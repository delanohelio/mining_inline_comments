{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2ODgxNzk5", "number": 202, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDoxODozNlrOD0ayUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNDoxNjo0MVrOD0jN2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MjkxNDEwOnYy", "diffSide": "RIGHT", "path": ".gitignore", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDoxODozNlrOGJWvUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMjoxNjo1M1rOGKThxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ2MjkyOQ==", "bodyText": "this may not be needed anymore.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412462929", "createdAt": "2020-04-21T20:18:36Z", "author": {"login": "zohrehj"}, "path": ".gitignore", "diffHunk": "@@ -0,0 +1,5 @@\n+**/.terraform\n+*.tfstate\n+*.tfstate.*\n+sql_credentials.json", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA1MTcxOA==", "bodyText": "Yes, you're right. These files aren't manually created anymore but managed by Terraform.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413051718", "createdAt": "2020-04-22T14:51:03Z", "author": {"login": "MartinPetkov"}, "path": ".gitignore", "diffHunk": "@@ -0,0 +1,5 @@\n+**/.terraform\n+*.tfstate\n+*.tfstate.*\n+sql_credentials.json", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ2MjkyOQ=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ1ODg4NQ==", "bodyText": "The lines for .json files have been removed.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413458885", "createdAt": "2020-04-23T02:16:53Z", "author": {"login": "MartinPetkov"}, "path": ".gitignore", "diffHunk": "@@ -0,0 +1,5 @@\n+**/.terraform\n+*.tfstate\n+*.tfstate.*\n+sql_credentials.json", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ2MjkyOQ=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzAwNzQ1OnYy", "diffSide": "RIGHT", "path": "Terraform/bootstrap/terraform.tfvars", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo0MTo0MVrOGJXmFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNjowMjo1MlrOGJ-Uew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3Njk1MA==", "bodyText": "I think we should use test values here and not the actual vars.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412476950", "createdAt": "2020-04-21T20:41:41Z", "author": {"login": "zohrehj"}, "path": "Terraform/bootstrap/terraform.tfvars", "diffHunk": "@@ -0,0 +1,23 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+devops_project_id = \"heroes-hat-dev-devops\"\n+org_id            = \"707577601068\"\n+billing_account   = \"01EA90-3519E1-89CB1F\"\n+state_bucket      = \"heroes-hat-dev-terraform-state-08679\"\n+storage_location  = \"us-central1\"\n+org_admin         = \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+devops_owners = [\n+  \"group:rocketturtle-gcp-admin@rocketturtle.net\",\n+]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3NzQwMQ==", "bodyText": "and add a section in terraform readme to update these values to the proper GCP project vars.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412477401", "createdAt": "2020-04-21T20:42:29Z", "author": {"login": "zohrehj"}, "path": "Terraform/bootstrap/terraform.tfvars", "diffHunk": "@@ -0,0 +1,23 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+devops_project_id = \"heroes-hat-dev-devops\"\n+org_id            = \"707577601068\"\n+billing_account   = \"01EA90-3519E1-89CB1F\"\n+state_bucket      = \"heroes-hat-dev-terraform-state-08679\"\n+storage_location  = \"us-central1\"\n+org_admin         = \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+devops_owners = [\n+  \"group:rocketturtle-gcp-admin@rocketturtle.net\",\n+]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3Njk1MA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAxOTY1MA==", "bodyText": "I believe @xingao267 created a script recently to update these. But otherwise, .tfvars is where you're supposed to have the actual values for your deployment.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413019650", "createdAt": "2020-04-22T14:13:38Z", "author": {"login": "MartinPetkov"}, "path": "Terraform/bootstrap/terraform.tfvars", "diffHunk": "@@ -0,0 +1,23 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+devops_project_id = \"heroes-hat-dev-devops\"\n+org_id            = \"707577601068\"\n+billing_account   = \"01EA90-3519E1-89CB1F\"\n+state_bucket      = \"heroes-hat-dev-terraform-state-08679\"\n+storage_location  = \"us-central1\"\n+org_admin         = \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+devops_owners = [\n+  \"group:rocketturtle-gcp-admin@rocketturtle.net\",\n+]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3Njk1MA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzExMTQxOQ==", "bodyText": "Done.\n#205", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413111419", "createdAt": "2020-04-22T16:02:52Z", "author": {"login": "xingao267"}, "path": "Terraform/bootstrap/terraform.tfvars", "diffHunk": "@@ -0,0 +1,23 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+devops_project_id = \"heroes-hat-dev-devops\"\n+org_id            = \"707577601068\"\n+billing_account   = \"01EA90-3519E1-89CB1F\"\n+state_bucket      = \"heroes-hat-dev-terraform-state-08679\"\n+storage_location  = \"us-central1\"\n+org_admin         = \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+devops_owners = [\n+  \"group:rocketturtle-gcp-admin@rocketturtle.net\",\n+]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3Njk1MA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzAyMzEzOnYy", "diffSide": "RIGHT", "path": "Terraform/cicd/terraform.tfvars", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo0NTozOFrOGJXvHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMjoxNjoxMlrOGKTg7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3OTI2Mw==", "bodyText": "same here, is there a way to get these values from configs?\nIf not, lets add instructions to update them and remove the actual values.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412479263", "createdAt": "2020-04-21T20:45:38Z", "author": {"login": "zohrehj"}, "path": "Terraform/cicd/terraform.tfvars", "diffHunk": "@@ -0,0 +1,23 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+org_id                        = \"707577601068\"\n+devops_project_id             = \"heroes-hat-dev-devops\"\n+state_bucket                  = \"heroes-hat-dev-terraform-state-08679\"\n+repo_owner                    = \"GoogleCloudPlatform\"\n+repo_name                     = \"fda-mystudies\"\n+branch_regex                  = \"terraform\"\n+continuous_deployment_enabled = true\n+trigger_enabled               = true\n+terraform_root                = \"Terraform\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ1ODY2OA==", "bodyText": "These can be replaced using rename.sh, and instructions were added in #205", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413458668", "createdAt": "2020-04-23T02:16:12Z", "author": {"login": "MartinPetkov"}, "path": "Terraform/cicd/terraform.tfvars", "diffHunk": "@@ -0,0 +1,23 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+org_id                        = \"707577601068\"\n+devops_project_id             = \"heroes-hat-dev-devops\"\n+state_bucket                  = \"heroes-hat-dev-terraform-state-08679\"\n+repo_owner                    = \"GoogleCloudPlatform\"\n+repo_name                     = \"fda-mystudies\"\n+branch_regex                  = \"terraform\"\n+continuous_deployment_enabled = true\n+trigger_enabled               = true\n+terraform_root                = \"Terraform\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3OTI2Mw=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzAyOTk2OnYy", "diffSide": "RIGHT", "path": "Terraform/engine.tmpl.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo0NzoyMVrOGJXzGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNDoxMjo0NlrOGJ4rWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MDI4MA==", "bodyText": "terraform readme mentions generic project ID and domain, but these values are hardcoded here, it would be great if we could remove these values and make it easier to update to actual values for future deployments.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412480280", "createdAt": "2020-04-21T20:47:21Z", "author": {"login": "zohrehj"}, "path": "Terraform/engine.tmpl.yaml", "diffHunk": "@@ -0,0 +1,112 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# Terraform Engine (https://github.com/GoogleCloudPlatform/healthcare/tree/master/deploy/engine) config to generate baseline.\n+\n+{{$BASE := \"../recipes\"}}\n+\n+data:\n+  ORG_ID: \"707577601068\"\n+  BILLING_ACCOUNT: \"01EA90-3519E1-89CB1F\"\n+  STORAGE_LOCATION: \"us-central1\"\n+\n+templates:\n+- name: \"foundation\"\n+  recipe_path: \"{{$BASE}}/org/foundation.yaml\"\n+  data:\n+    DEVOPS:\n+      PROJECT_ID: \"heroes-hat-dev-devops\"\n+      STATE_BUCKET: \"heroes-hat-dev-terraform-state-08679\"\n+      ENABLE_BOOTSTRAP_GCS_BACKEND: true\n+      ORG_ADMIN: \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+      PROJECT_OWNERS:\n+      - \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+    AUDIT:\n+      PROJECT_ID: \"heroes-hat-dev-audit\"\n+      DATASET_NAME: \"1yr_org_audit_logs\"\n+      BUCKET_NAME: \"7yr-org-audit-logs-08679\" # suffix is sha256(\"heroes-hat-dev\")[:5]\n+      AUDITORS: \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+      PROJECT_OWNERS:\n+      - \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+    ORG_POLICIES:\n+      ALLOWED_SHARED_VPC_HOST_PROJECTS:\n+      - \"projects/heroes-hat-dev-networks\"\n+      # ALLOWED_POLICY_MEMBER_DOMAINS:\n+      # - Add G Suite Customer IDs for the domains\n+    CICD:\n+      PROJECT_ID: \"heroes-hat-dev-devops\"\n+      STATE_BUCKET: \"heroes-hat-dev-terraform-state-08679\"\n+      REPO_OWNER: \"GoogleCloudPlatform\"\n+      REPO_NAME: \"fda-mystudies\"\n+      BRANCH_REGEX: \"terraform\"\n+      CONTINUOUS_DEPLOYMENT_ENABLED: true\n+      TRIGGER_ENABLED: true\n+      TERRAFORM_ROOT: \"Terraform\"\n+\n+# Folder\n+- name: \"folder-heroes-hat\"\n+  recipe_path: \"{{$BASE}}/org/folder.yaml\"\n+  output_ref: \"foundation.org_dir\"\n+  data:\n+    DISPLAY_NAME: \"fda-my-studies\"\n+\n+# Projects\n+- name: \"project-networks\"\n+  recipe_path: \"{{$BASE}}/folder/project.yaml\"\n+  output_ref: \"folder-heroes-hat.dir\"\n+  data:\n+    PROJECT_ID: \"heroes-hat-dev-networks\"\n+    PROJECT_OWNERS:\n+    - \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+    APIS:\n+    - \"compute.googleapis.com\"\n+    - \"container.googleapis.com\"\n+    - \"iap.googleapis.com\"\n+    - \"servicenetworking.googleapis.com\"\n+    - \"sqladmin.googleapis.com\"\n+\n+- name: \"project-apps\"\n+  recipe_path: \"{{$BASE}}/folder/project.yaml\"\n+  output_ref: \"folder-heroes-hat.dir\"\n+  data:\n+    PROJECT_ID: \"heroes-hat-dev-apps\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAxODk3MQ==", "bodyText": "@umairidris can comment more, but I believe this file is where you are supposed to put all the specific values. This file is only used by the Terraform Engine to generate Terraform configs.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413018971", "createdAt": "2020-04-22T14:12:46Z", "author": {"login": "MartinPetkov"}, "path": "Terraform/engine.tmpl.yaml", "diffHunk": "@@ -0,0 +1,112 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# Terraform Engine (https://github.com/GoogleCloudPlatform/healthcare/tree/master/deploy/engine) config to generate baseline.\n+\n+{{$BASE := \"../recipes\"}}\n+\n+data:\n+  ORG_ID: \"707577601068\"\n+  BILLING_ACCOUNT: \"01EA90-3519E1-89CB1F\"\n+  STORAGE_LOCATION: \"us-central1\"\n+\n+templates:\n+- name: \"foundation\"\n+  recipe_path: \"{{$BASE}}/org/foundation.yaml\"\n+  data:\n+    DEVOPS:\n+      PROJECT_ID: \"heroes-hat-dev-devops\"\n+      STATE_BUCKET: \"heroes-hat-dev-terraform-state-08679\"\n+      ENABLE_BOOTSTRAP_GCS_BACKEND: true\n+      ORG_ADMIN: \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+      PROJECT_OWNERS:\n+      - \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+    AUDIT:\n+      PROJECT_ID: \"heroes-hat-dev-audit\"\n+      DATASET_NAME: \"1yr_org_audit_logs\"\n+      BUCKET_NAME: \"7yr-org-audit-logs-08679\" # suffix is sha256(\"heroes-hat-dev\")[:5]\n+      AUDITORS: \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+      PROJECT_OWNERS:\n+      - \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+    ORG_POLICIES:\n+      ALLOWED_SHARED_VPC_HOST_PROJECTS:\n+      - \"projects/heroes-hat-dev-networks\"\n+      # ALLOWED_POLICY_MEMBER_DOMAINS:\n+      # - Add G Suite Customer IDs for the domains\n+    CICD:\n+      PROJECT_ID: \"heroes-hat-dev-devops\"\n+      STATE_BUCKET: \"heroes-hat-dev-terraform-state-08679\"\n+      REPO_OWNER: \"GoogleCloudPlatform\"\n+      REPO_NAME: \"fda-mystudies\"\n+      BRANCH_REGEX: \"terraform\"\n+      CONTINUOUS_DEPLOYMENT_ENABLED: true\n+      TRIGGER_ENABLED: true\n+      TERRAFORM_ROOT: \"Terraform\"\n+\n+# Folder\n+- name: \"folder-heroes-hat\"\n+  recipe_path: \"{{$BASE}}/org/folder.yaml\"\n+  output_ref: \"foundation.org_dir\"\n+  data:\n+    DISPLAY_NAME: \"fda-my-studies\"\n+\n+# Projects\n+- name: \"project-networks\"\n+  recipe_path: \"{{$BASE}}/folder/project.yaml\"\n+  output_ref: \"folder-heroes-hat.dir\"\n+  data:\n+    PROJECT_ID: \"heroes-hat-dev-networks\"\n+    PROJECT_OWNERS:\n+    - \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+    APIS:\n+    - \"compute.googleapis.com\"\n+    - \"container.googleapis.com\"\n+    - \"iap.googleapis.com\"\n+    - \"servicenetworking.googleapis.com\"\n+    - \"sqladmin.googleapis.com\"\n+\n+- name: \"project-apps\"\n+  recipe_path: \"{{$BASE}}/folder/project.yaml\"\n+  output_ref: \"folder-heroes-hat.dir\"\n+  data:\n+    PROJECT_ID: \"heroes-hat-dev-apps\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MDI4MA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzA0MjQzOnYy", "diffSide": "RIGHT", "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/main.tf", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo1MDozNVrOGJX6cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMjo0NTowN1rOGKUFeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MjE2Mw==", "bodyText": "would need to be changed for new deployments.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412482163", "createdAt": "2020-04-21T20:50:35Z", "author": {"login": "zohrehj"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/main.tf", "diffHunk": "@@ -0,0 +1,66 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+terraform {\n+  backend \"gcs\" {}\n+}\n+\n+# Network values are defined the same way in the network component.\n+\n+# From\n+# https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/modules/safer-cluster-update-variant\n+module \"heroes_hat_cluster\" {\n+  source = \"terraform-google-modules/kubernetes-engine/google//modules/safer-cluster\"\n+\n+  # Required\n+  name = \"heroes-hat-cluster\"\n+  # TODO: Set release_channel to \"regular\" when https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/pull/487 is merged.\n+  project_id             = var.project_id\n+  region                 = var.gke_region\n+  regional               = true\n+  network_project_id     = var.network_project_id\n+  network                = var.network\n+  subnetwork             = var.subnetwork\n+  ip_range_pods          = \"heroes-hat-cluster-ip-range-pods\"\n+  ip_range_services      = \"heroes-hat-cluster-ip-range-svc\"\n+  master_ipv4_cidr_block = \"192.168.0.0/28\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMDQ0Mw==", "bodyText": "Do you mean the CIDR block, or the IP range names (\"heroes-hat-...\")?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413020443", "createdAt": "2020-04-22T14:14:33Z", "author": {"login": "MartinPetkov"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/main.tf", "diffHunk": "@@ -0,0 +1,66 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+terraform {\n+  backend \"gcs\" {}\n+}\n+\n+# Network values are defined the same way in the network component.\n+\n+# From\n+# https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/modules/safer-cluster-update-variant\n+module \"heroes_hat_cluster\" {\n+  source = \"terraform-google-modules/kubernetes-engine/google//modules/safer-cluster\"\n+\n+  # Required\n+  name = \"heroes-hat-cluster\"\n+  # TODO: Set release_channel to \"regular\" when https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/pull/487 is merged.\n+  project_id             = var.project_id\n+  region                 = var.gke_region\n+  regional               = true\n+  network_project_id     = var.network_project_id\n+  network                = var.network\n+  subnetwork             = var.subnetwork\n+  ip_range_pods          = \"heroes-hat-cluster-ip-range-pods\"\n+  ip_range_services      = \"heroes-hat-cluster-ip-range-svc\"\n+  master_ipv4_cidr_block = \"192.168.0.0/28\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MjE2Mw=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE0NzE0Nw==", "bodyText": "IP range value.\nJust pointing out all the values that need to be updated for the final deployment. I am expecting these will be updated using the final script as well.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413147147", "createdAt": "2020-04-22T16:48:43Z", "author": {"login": "zohrehj"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/main.tf", "diffHunk": "@@ -0,0 +1,66 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+terraform {\n+  backend \"gcs\" {}\n+}\n+\n+# Network values are defined the same way in the network component.\n+\n+# From\n+# https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/modules/safer-cluster-update-variant\n+module \"heroes_hat_cluster\" {\n+  source = \"terraform-google-modules/kubernetes-engine/google//modules/safer-cluster\"\n+\n+  # Required\n+  name = \"heroes-hat-cluster\"\n+  # TODO: Set release_channel to \"regular\" when https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/pull/487 is merged.\n+  project_id             = var.project_id\n+  region                 = var.gke_region\n+  regional               = true\n+  network_project_id     = var.network_project_id\n+  network                = var.network\n+  subnetwork             = var.subnetwork\n+  ip_range_pods          = \"heroes-hat-cluster-ip-range-pods\"\n+  ip_range_services      = \"heroes-hat-cluster-ip-range-svc\"\n+  master_ipv4_cidr_block = \"192.168.0.0/28\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MjE2Mw=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE2Njk1OQ==", "bodyText": "Sorry, so you mean it shouldn't be called \"heroes-hat-...\"? Would it be better if it's called \"my-studies-...\"?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413166959", "createdAt": "2020-04-22T17:15:54Z", "author": {"login": "MartinPetkov"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/main.tf", "diffHunk": "@@ -0,0 +1,66 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+terraform {\n+  backend \"gcs\" {}\n+}\n+\n+# Network values are defined the same way in the network component.\n+\n+# From\n+# https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/modules/safer-cluster-update-variant\n+module \"heroes_hat_cluster\" {\n+  source = \"terraform-google-modules/kubernetes-engine/google//modules/safer-cluster\"\n+\n+  # Required\n+  name = \"heroes-hat-cluster\"\n+  # TODO: Set release_channel to \"regular\" when https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/pull/487 is merged.\n+  project_id             = var.project_id\n+  region                 = var.gke_region\n+  regional               = true\n+  network_project_id     = var.network_project_id\n+  network                = var.network\n+  subnetwork             = var.subnetwork\n+  ip_range_pods          = \"heroes-hat-cluster-ip-range-pods\"\n+  ip_range_services      = \"heroes-hat-cluster-ip-range-svc\"\n+  master_ipv4_cidr_block = \"192.168.0.0/28\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MjE2Mw=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ2ODAyNQ==", "bodyText": "We synced offline and I misunderstood, you were talking about the actual value \"192.168.0.0/28\".\nI don't believe this needs to be changed for the final deployment. Since this is private cluster, this IP is supposed to be a private IP, and there's nothing significant about it except that it doesn't overlap with other ranges in the subnet used for other purposes (i.e. pods and services).\nThis does remind me though, that (slight tangent) currently enable_private_endpoint = false, so the master endpoint is accessible to the whole world. In the final deployment, this should be replaced with master_authorized_networks and the IP range of UNC's network, here. An example of how to configure it is here:\nmaster_authorized_networks = [\n  {\n    cidr_block   = \"10.60.0.0/17\"\n    display_name = \"VPC\"\n  },\n]", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413468025", "createdAt": "2020-04-23T02:45:07Z", "author": {"login": "MartinPetkov"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/main.tf", "diffHunk": "@@ -0,0 +1,66 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+terraform {\n+  backend \"gcs\" {}\n+}\n+\n+# Network values are defined the same way in the network component.\n+\n+# From\n+# https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/modules/safer-cluster-update-variant\n+module \"heroes_hat_cluster\" {\n+  source = \"terraform-google-modules/kubernetes-engine/google//modules/safer-cluster\"\n+\n+  # Required\n+  name = \"heroes-hat-cluster\"\n+  # TODO: Set release_channel to \"regular\" when https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/pull/487 is merged.\n+  project_id             = var.project_id\n+  region                 = var.gke_region\n+  regional               = true\n+  network_project_id     = var.network_project_id\n+  network                = var.network\n+  subnetwork             = var.subnetwork\n+  ip_range_pods          = \"heroes-hat-cluster-ip-range-pods\"\n+  ip_range_services      = \"heroes-hat-cluster-ip-range-svc\"\n+  master_ipv4_cidr_block = \"192.168.0.0/28\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MjE2Mw=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzA0Nzc2OnYy", "diffSide": "RIGHT", "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/terraform.tfvars", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo1MTo1NFrOGJX9iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwMjoxMjozOFrOGKTcZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4Mjk1Mg==", "bodyText": "do we need to limit this to a single branch? I think going forward we probably want to run it on all main branches, i.e. develop, master, etc", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412482952", "createdAt": "2020-04-21T20:51:54Z", "author": {"login": "zohrehj"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/terraform.tfvars", "diffHunk": "@@ -0,0 +1,20 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+project_id                = \"heroes-hat-dev-apps\"\n+network_project_id        = \"heroes-hat-dev-networks\"\n+gke_region                = \"us-east1\"\n+repo_owner                = \"GoogleCloudPlatform\"\n+repo_name                 = \"fda-mystudies\"\n+cloudbuild_trigger_branch = \"early-access\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA1NTE1Mw==", "bodyText": "@xingao267 would be better to comment, but you're right, this should actually be a branch regex. I believe it was addressed (in the related repo) here: GoogleCloudPlatform/healthcare@8715bdc#diff-c207bb71760f78c5c983c0752d4b3464", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413055153", "createdAt": "2020-04-22T14:54:51Z", "author": {"login": "MartinPetkov"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/terraform.tfvars", "diffHunk": "@@ -0,0 +1,20 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+project_id                = \"heroes-hat-dev-apps\"\n+network_project_id        = \"heroes-hat-dev-networks\"\n+gke_region                = \"us-east1\"\n+repo_owner                = \"GoogleCloudPlatform\"\n+repo_name                 = \"fda-mystudies\"\n+cloudbuild_trigger_branch = \"early-access\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4Mjk1Mg=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ1NzUxMQ==", "bodyText": "In this particular case, this variable isn't actually used it seems. Other uses have been changed to use a branch_regex in #184, as well as in the template for the future. Closing this comment.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413457511", "createdAt": "2020-04-23T02:12:38Z", "author": {"login": "MartinPetkov"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/terraform.tfvars", "diffHunk": "@@ -0,0 +1,20 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+project_id                = \"heroes-hat-dev-apps\"\n+network_project_id        = \"heroes-hat-dev-networks\"\n+gke_region                = \"us-east1\"\n+repo_owner                = \"GoogleCloudPlatform\"\n+repo_name                 = \"fda-mystudies\"\n+cloudbuild_trigger_branch = \"early-access\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4Mjk1Mg=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzA0ODcwOnYy", "diffSide": "RIGHT", "path": "Terraform/org/audit/main.tf", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo1MjoxMFrOGJX-Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo1MjoxMFrOGJX-Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MzA5OA==", "bodyText": "all other locations are us-east1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412483098", "createdAt": "2020-04-21T20:52:10Z", "author": {"login": "zohrehj"}, "path": "Terraform/org/audit/main.tf", "diffHunk": "@@ -0,0 +1,127 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# This folder contains Terraform resources related to audit, which includes:\n+# - Organization IAM Audit log configs (https://cloud.google.com/logging/docs/audit),\n+# - BigQuery log sink creation and configuration for short term log storage,\n+# - Cloud Storage log sink creation and configuration for long term log storage,\n+# - IAM permissions to grant log Auditors iam.securityReviewer role to view the logs.\n+\n+terraform {\n+  backend \"gcs\" {}\n+}\n+\n+# IAM Audit log configs to enable collection of all possible audit logs.\n+resource \"google_organization_iam_audit_config\" \"config\" {\n+  org_id  = var.org_id\n+  service = \"allServices\"\n+\n+  audit_log_config {\n+    log_type = \"DATA_READ\"\n+  }\n+  audit_log_config {\n+    log_type = \"DATA_WRITE\"\n+  }\n+  audit_log_config {\n+    log_type = \"ADMIN_READ\"\n+  }\n+}\n+\n+# BigQuery log sink.\n+module \"bigquery_log_export\" {\n+  source  = \"terraform-google-modules/log-export/google\"\n+  version = \"~> 4.0\"\n+\n+  log_sink_name        = \"bigquery-org-sink\"\n+  parent_resource_type = \"organization\"\n+  parent_resource_id   = var.org_id\n+  include_children     = true\n+  filter               = \"logName:\\\"logs/cloudaudit.googleapis.com\\\"\"\n+  destination_uri      = \"bigquery.googleapis.com/projects/${var.project_id}/datasets/${module.bigquery_destination.bigquery_dataset.dataset_id}\"\n+}\n+\n+# TODO: replace with terraform-google-modules/log-export/google//modules/bigquery\n+# once https://github.com/terraform-google-modules/terraform-google-log-export/pull/52 is merged.\n+module \"bigquery_destination\" {\n+  source  = \"terraform-google-modules/bigquery/google\"\n+  version = \"~> 4.0\"\n+\n+  dataset_id                  = var.dataset_name\n+  project_id                  = var.project_id\n+  location                    = \"us-east1\"\n+  default_table_expiration_ms = 365 * 8.64 * pow(10, 7) # 365 days\n+  access = [\n+    {\n+      role          = \"roles/bigquery.dataOwner\",\n+      special_group = \"projectOwners\"\n+    },\n+    {\n+      role           = \"roles/bigquery.dataViewer\",\n+      group_by_email = split(\":\", var.auditors)[1] // trim 'group:' prefix\n+    },\n+  ]\n+}\n+\n+resource \"google_project_iam_member\" \"bigquery_sink_member\" {\n+  project = module.bigquery_destination.bigquery_dataset.project\n+  role    = \"roles/bigquery.dataEditor\"\n+  member  = module.bigquery_log_export.writer_identity\n+}\n+\n+# Cloud Storage log sink.\n+module \"storage_log_export\" {\n+  source  = \"terraform-google-modules/log-export/google\"\n+  version = \"~> 4.0\"\n+\n+  log_sink_name        = \"storage-org-sink\"\n+  parent_resource_type = \"organization\"\n+  parent_resource_id   = var.org_id\n+  include_children     = true\n+  filter               = \"logName:\\\"logs/cloudaudit.googleapis.com\\\"\"\n+  destination_uri      = \"storage.googleapis.com/${module.storage_destination.bucket.name}\"\n+}\n+\n+# TODO: Replace with terraform-google-modules/log-export/google//modules/storage\n+# once https://github.com/terraform-google-modules/terraform-google-log-export/pull/52  is fixed.\n+module \"storage_destination\" {\n+  source  = \"terraform-google-modules/cloud-storage/google//modules/simple_bucket\"\n+  version = \"~> 1.4\"\n+\n+  name          = var.bucket_name\n+  project_id    = var.project_id\n+  location      = \"us-central1\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 103}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzA1NTEzOnYy", "diffSide": "RIGHT", "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/project/terraform.tfvars", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo1Mzo1MVrOGJYBzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNzozMjozOFrOGKCeKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4NDA0NA==", "bodyText": "not sure if exposing the org_id and billing_account through git is a security risk or not.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412484044", "createdAt": "2020-04-21T20:53:51Z", "author": {"login": "zohrehj"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/project/terraform.tfvars", "diffHunk": "@@ -0,0 +1,24 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+name            = \"heroes-hat-dev-apps\"\n+org_id          = \"707577601068\"\n+billing_account = \"01EA90-3519E1-89CB1F\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE3OTQzMg==", "bodyText": "I asked Umair and Xin, and we don't think it is. IAM should prevent people outside of the organization from using the billing account for their resources or viewing the org.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413179432", "createdAt": "2020-04-22T17:32:38Z", "author": {"login": "MartinPetkov"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/project/terraform.tfvars", "diffHunk": "@@ -0,0 +1,24 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+name            = \"heroes-hat-dev-apps\"\n+org_id          = \"707577601068\"\n+billing_account = \"01EA90-3519E1-89CB1F\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4NDA0NA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzA2MjU3OnYy", "diffSide": "RIGHT", "path": "user-registration-server-ws/deployment.yaml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo1NTo1OFrOGJYGMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNjo0OTozN1rOGKAifA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4NTE2OA==", "bodyText": "should we keep the test string instead?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412485168", "createdAt": "2020-04-21T20:55:58Z", "author": {"login": "zohrehj"}, "path": "user-registration-server-ws/deployment.yaml", "diffHunk": "@@ -46,13 +46,13 @@ spec:\n             - name: AUTH_SERVER_URL\n               value: \"auth-server-np:50000\"\n             - name: RESPONSE_SERVER_URL\n-              value: \"response-serer-np:50000\"\n+              value: \"response-server-np:50000\"\n             - name: CLIENT_ID\n-              value: \"test_client_id_urs\"\n+              value: \"413422181706-c9r0uv1t2du10ttjf748mh6490g2ir5u.apps.googleusercontent.com\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMTcxOA==", "bodyText": "This was supposed to be test string, yes.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413021718", "createdAt": "2020-04-22T14:16:05Z", "author": {"login": "MartinPetkov"}, "path": "user-registration-server-ws/deployment.yaml", "diffHunk": "@@ -46,13 +46,13 @@ spec:\n             - name: AUTH_SERVER_URL\n               value: \"auth-server-np:50000\"\n             - name: RESPONSE_SERVER_URL\n-              value: \"response-serer-np:50000\"\n+              value: \"response-server-np:50000\"\n             - name: CLIENT_ID\n-              value: \"test_client_id_urs\"\n+              value: \"413422181706-c9r0uv1t2du10ttjf748mh6490g2ir5u.apps.googleusercontent.com\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4NTE2OA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE0Nzc3Mg==", "bodyText": "I see, please feel free to mark these as resolved as appropriate :-)", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413147772", "createdAt": "2020-04-22T16:49:37Z", "author": {"login": "zohrehj"}, "path": "user-registration-server-ws/deployment.yaml", "diffHunk": "@@ -46,13 +46,13 @@ spec:\n             - name: AUTH_SERVER_URL\n               value: \"auth-server-np:50000\"\n             - name: RESPONSE_SERVER_URL\n-              value: \"response-serer-np:50000\"\n+              value: \"response-server-np:50000\"\n             - name: CLIENT_ID\n-              value: \"test_client_id_urs\"\n+              value: \"413422181706-c9r0uv1t2du10ttjf748mh6490g2ir5u.apps.googleusercontent.com\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4NTE2OA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzA3MzM2OnYy", "diffSide": "RIGHT", "path": "response-server-ws/deployment.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo1ODozOVrOGJYMcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNDoxODowOVrOGJ48xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4Njc3MA==", "bodyText": "should this be 50000 ?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412486770", "createdAt": "2020-04-21T20:58:39Z", "author": {"login": "zohrehj"}, "path": "response-server-ws/deployment.yaml", "diffHunk": "@@ -58,9 +58,9 @@ spec:\n                   key: WCP_PASS\n                   name: response-server-credentials\n             - name: WCP_STUDY_METADATA_SERVER_URL\n-              value: \"34.74.32.124:50000\"\n+              value: \"study-meta-data-np:50000\"\n             - name: REGISTRATION_SERVER_URL\n-              value: \"35.196.79.108:60000\"\n+              value: \"user-registration-server-np:60000\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMzQyOQ==", "bodyText": "Yes.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413023429", "createdAt": "2020-04-22T14:18:09Z", "author": {"login": "MartinPetkov"}, "path": "response-server-ws/deployment.yaml", "diffHunk": "@@ -58,9 +58,9 @@ spec:\n                   key: WCP_PASS\n                   name: response-server-credentials\n             - name: WCP_STUDY_METADATA_SERVER_URL\n-              value: \"34.74.32.124:50000\"\n+              value: \"study-meta-data-np:50000\"\n             - name: REGISTRATION_SERVER_URL\n-              value: \"35.196.79.108:60000\"\n+              value: \"user-registration-server-np:60000\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4Njc3MA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NDI4NzE2OnYy", "diffSide": "RIGHT", "path": "WCP-WS/deployment.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNDoxMzoyNlrOGJigsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNDoxODoxOVrOGJ49Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NTc5NQ==", "bodyText": "I assume this is no longer needed with #197 merged?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412655795", "createdAt": "2020-04-22T04:13:26Z", "author": {"login": "kuoyuchi"}, "path": "WCP-WS/deployment.yaml", "diffHunk": "@@ -1,61 +1,67 @@\n # TODO: Rename this from study-meta-data to study-server.\n-apiVersion: apps/v1 \n-kind: Deployment \n-metadata: \n-  name: study-meta-data \n-  labels: \n-    app: study-meta-data \n-spec: \n-  replicas: 1 \n-  selector: \n-    matchLabels: \n-      app: study-meta-data \n-  template: \n-    metadata: \n-      labels: \n-        app: study-meta-data \n-    spec: \n-      containers: \n-        - name: study-meta-data \n-          image: gcr.io/heroes-hat-dev/study-meta-data:latest\n-          env: \n-            - name: DB_USER \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: username \n-            - name: DB_PASS \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: password \n-            - name: DB_NAME \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: dbname \n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: study-meta-data\n+  labels:\n+    app: study-meta-data\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      app: study-meta-data\n+  template:\n+    metadata:\n+      labels:\n+        app: study-meta-data\n+    spec:\n+      containers:\n+        - name: study-meta-data\n+          image: gcr.io/heroes-hat-dev-apps/study-meta-data:latest\n+          env:\n+            - name: DB_USER\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-meta-data-db-credentials\n+                  key: username\n+            - name: DB_PASS\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-meta-data-db-credentials\n+                  key: password\n+            - name: DB_NAME\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-meta-data-db-credentials\n+                  key: dbname\n             - name: RESPONSE_SERVER\n               value: \"response-server-np:50000\"\n             - name: USER_REGISTRATION_SERVER\n-              value: \"user-registration-server-np:50000\"\n+              value: \"user-registration-server-np:60000\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMzU2Nw==", "bodyText": "Yes, this should be 50000", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413023567", "createdAt": "2020-04-22T14:18:19Z", "author": {"login": "MartinPetkov"}, "path": "WCP-WS/deployment.yaml", "diffHunk": "@@ -1,61 +1,67 @@\n # TODO: Rename this from study-meta-data to study-server.\n-apiVersion: apps/v1 \n-kind: Deployment \n-metadata: \n-  name: study-meta-data \n-  labels: \n-    app: study-meta-data \n-spec: \n-  replicas: 1 \n-  selector: \n-    matchLabels: \n-      app: study-meta-data \n-  template: \n-    metadata: \n-      labels: \n-        app: study-meta-data \n-    spec: \n-      containers: \n-        - name: study-meta-data \n-          image: gcr.io/heroes-hat-dev/study-meta-data:latest\n-          env: \n-            - name: DB_USER \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: username \n-            - name: DB_PASS \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: password \n-            - name: DB_NAME \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: dbname \n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: study-meta-data\n+  labels:\n+    app: study-meta-data\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      app: study-meta-data\n+  template:\n+    metadata:\n+      labels:\n+        app: study-meta-data\n+    spec:\n+      containers:\n+        - name: study-meta-data\n+          image: gcr.io/heroes-hat-dev-apps/study-meta-data:latest\n+          env:\n+            - name: DB_USER\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-meta-data-db-credentials\n+                  key: username\n+            - name: DB_PASS\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-meta-data-db-credentials\n+                  key: password\n+            - name: DB_NAME\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-meta-data-db-credentials\n+                  key: dbname\n             - name: RESPONSE_SERVER\n               value: \"response-server-np:50000\"\n             - name: USER_REGISTRATION_SERVER\n-              value: \"user-registration-server-np:50000\"\n+              value: \"user-registration-server-np:60000\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NTc5NQ=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NDI4Nzk4OnYy", "diffSide": "RIGHT", "path": "WCP/deployment.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNDoxMzo0OVrOGJihIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNDoxODozNlrOGJ4-Fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NTkwNA==", "bodyText": "No longer needed with #197?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412655904", "createdAt": "2020-04-22T04:13:49Z", "author": {"login": "kuoyuchi"}, "path": "WCP/deployment.yaml", "diffHunk": "@@ -1,58 +1,60 @@\n-apiVersion: apps/v1 \n-kind: Deployment \n-metadata: \n-  name: study-designer \n-  labels: \n-    app: study-designer \n-spec: \n-  replicas: 1 \n-  selector: \n-    matchLabels: \n-      app: study-designer \n-  template: \n-    metadata: \n-      labels: \n-        app: study-designer \n-    spec: \n-      containers: \n-        - name: study-designer \n-          image: gcr.io/heroes-hat-dev/study-designer:latest\n-          env: \n-            - name: DB_USER \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-designer-db-credentials \n-                  key: username \n-            - name: DB_PASS \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-designer-db-credentials \n-                  key: password \n-            - name: DB_NAME \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-designer-db-credentials \n-                  key: dbname \n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: study-designer\n+  labels:\n+    app: study-designer\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      app: study-designer\n+  template:\n+    metadata:\n+      labels:\n+        app: study-designer\n+    spec:\n+      containers:\n+        - name: study-designer\n+          image: gcr.io/heroes-hat-dev-apps/study-designer:latest\n+          env:\n+            - name: DB_USER\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-designer-db-credentials\n+                  key: username\n+            - name: DB_PASS\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-designer-db-credentials\n+                  key: password\n+            - name: DB_NAME\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-designer-db-credentials\n+                  key: dbname\n             - name: REGISTRATION_SERVER_URL\n-              value: \"user-registration-server-np:50000\"\n+              value: \"user-registration-server-np:60000\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMzc2Ng==", "bodyText": "Yes.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413023766", "createdAt": "2020-04-22T14:18:36Z", "author": {"login": "MartinPetkov"}, "path": "WCP/deployment.yaml", "diffHunk": "@@ -1,58 +1,60 @@\n-apiVersion: apps/v1 \n-kind: Deployment \n-metadata: \n-  name: study-designer \n-  labels: \n-    app: study-designer \n-spec: \n-  replicas: 1 \n-  selector: \n-    matchLabels: \n-      app: study-designer \n-  template: \n-    metadata: \n-      labels: \n-        app: study-designer \n-    spec: \n-      containers: \n-        - name: study-designer \n-          image: gcr.io/heroes-hat-dev/study-designer:latest\n-          env: \n-            - name: DB_USER \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-designer-db-credentials \n-                  key: username \n-            - name: DB_PASS \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-designer-db-credentials \n-                  key: password \n-            - name: DB_NAME \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-designer-db-credentials \n-                  key: dbname \n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: study-designer\n+  labels:\n+    app: study-designer\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      app: study-designer\n+  template:\n+    metadata:\n+      labels:\n+        app: study-designer\n+    spec:\n+      containers:\n+        - name: study-designer\n+          image: gcr.io/heroes-hat-dev-apps/study-designer:latest\n+          env:\n+            - name: DB_USER\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-designer-db-credentials\n+                  key: username\n+            - name: DB_PASS\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-designer-db-credentials\n+                  key: password\n+            - name: DB_NAME\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-designer-db-credentials\n+                  key: dbname\n             - name: REGISTRATION_SERVER_URL\n-              value: \"user-registration-server-np:50000\"\n+              value: \"user-registration-server-np:60000\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NTkwNA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NDI5MDU3OnYy", "diffSide": "RIGHT", "path": "response-server-ws/deployment.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNDoxNDo1MFrOGJiiag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNDoxODoyNVrOGJ49jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NjIzNA==", "bodyText": "50000 with #197", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412656234", "createdAt": "2020-04-22T04:14:50Z", "author": {"login": "kuoyuchi"}, "path": "response-server-ws/deployment.yaml", "diffHunk": "@@ -58,9 +58,9 @@ spec:\n                   key: WCP_PASS\n                   name: response-server-credentials\n             - name: WCP_STUDY_METADATA_SERVER_URL\n-              value: \"34.74.32.124:50000\"\n+              value: \"study-meta-data-np:50000\"\n             - name: REGISTRATION_SERVER_URL\n-              value: \"35.196.79.108:60000\"\n+              value: \"user-registration-server-np:60000\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMzYzMQ==", "bodyText": "Yes.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413023631", "createdAt": "2020-04-22T14:18:25Z", "author": {"login": "MartinPetkov"}, "path": "response-server-ws/deployment.yaml", "diffHunk": "@@ -58,9 +58,9 @@ spec:\n                   key: WCP_PASS\n                   name: response-server-credentials\n             - name: WCP_STUDY_METADATA_SERVER_URL\n-              value: \"34.74.32.124:50000\"\n+              value: \"study-meta-data-np:50000\"\n             - name: REGISTRATION_SERVER_URL\n-              value: \"35.196.79.108:60000\"\n+              value: \"user-registration-server-np:60000\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NjIzNA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NDI5NTI5OnYy", "diffSide": "RIGHT", "path": "WCP-WS/deployment.yaml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNDoxNjo0MVrOGJik-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNDoyMDo0MlrOGJ5Edg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1Njg5MA==", "bodyText": "Is it possible to fork this as a separate tf-deployment.yaml file for now? Otherwise this will break the existing non-tf teamfood setup. Hopefully we can move teamfood to the tf deployment soon and this would be transient.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412656890", "createdAt": "2020-04-22T04:16:41Z", "author": {"login": "kuoyuchi"}, "path": "WCP-WS/deployment.yaml", "diffHunk": "@@ -1,61 +1,67 @@\n # TODO: Rename this from study-meta-data to study-server.\n-apiVersion: apps/v1 \n-kind: Deployment \n-metadata: \n-  name: study-meta-data \n-  labels: \n-    app: study-meta-data \n-spec: \n-  replicas: 1 \n-  selector: \n-    matchLabels: \n-      app: study-meta-data \n-  template: \n-    metadata: \n-      labels: \n-        app: study-meta-data \n-    spec: \n-      containers: \n-        - name: study-meta-data \n-          image: gcr.io/heroes-hat-dev/study-meta-data:latest\n-          env: \n-            - name: DB_USER \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: username \n-            - name: DB_PASS \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: password \n-            - name: DB_NAME \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: dbname \n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: study-meta-data\n+  labels:\n+    app: study-meta-data\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      app: study-meta-data\n+  template:\n+    metadata:\n+      labels:\n+        app: study-meta-data\n+    spec:\n+      containers:\n+        - name: study-meta-data\n+          image: gcr.io/heroes-hat-dev-apps/study-meta-data:latest", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1Njk2MA==", "bodyText": "Same for other deployment.yaml files.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412656960", "createdAt": "2020-04-22T04:16:55Z", "author": {"login": "kuoyuchi"}, "path": "WCP-WS/deployment.yaml", "diffHunk": "@@ -1,61 +1,67 @@\n # TODO: Rename this from study-meta-data to study-server.\n-apiVersion: apps/v1 \n-kind: Deployment \n-metadata: \n-  name: study-meta-data \n-  labels: \n-    app: study-meta-data \n-spec: \n-  replicas: 1 \n-  selector: \n-    matchLabels: \n-      app: study-meta-data \n-  template: \n-    metadata: \n-      labels: \n-        app: study-meta-data \n-    spec: \n-      containers: \n-        - name: study-meta-data \n-          image: gcr.io/heroes-hat-dev/study-meta-data:latest\n-          env: \n-            - name: DB_USER \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: username \n-            - name: DB_PASS \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: password \n-            - name: DB_NAME \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: dbname \n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: study-meta-data\n+  labels:\n+    app: study-meta-data\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      app: study-meta-data\n+  template:\n+    metadata:\n+      labels:\n+        app: study-meta-data\n+    spec:\n+      containers:\n+        - name: study-meta-data\n+          image: gcr.io/heroes-hat-dev-apps/study-meta-data:latest", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1Njg5MA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyNTM5OA==", "bodyText": "Good idea.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413025398", "createdAt": "2020-04-22T14:20:42Z", "author": {"login": "MartinPetkov"}, "path": "WCP-WS/deployment.yaml", "diffHunk": "@@ -1,61 +1,67 @@\n # TODO: Rename this from study-meta-data to study-server.\n-apiVersion: apps/v1 \n-kind: Deployment \n-metadata: \n-  name: study-meta-data \n-  labels: \n-    app: study-meta-data \n-spec: \n-  replicas: 1 \n-  selector: \n-    matchLabels: \n-      app: study-meta-data \n-  template: \n-    metadata: \n-      labels: \n-        app: study-meta-data \n-    spec: \n-      containers: \n-        - name: study-meta-data \n-          image: gcr.io/heroes-hat-dev/study-meta-data:latest\n-          env: \n-            - name: DB_USER \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: username \n-            - name: DB_PASS \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: password \n-            - name: DB_NAME \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: dbname \n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: study-meta-data\n+  labels:\n+    app: study-meta-data\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      app: study-meta-data\n+  template:\n+    metadata:\n+      labels:\n+        app: study-meta-data\n+    spec:\n+      containers:\n+        - name: study-meta-data\n+          image: gcr.io/heroes-hat-dev-apps/study-meta-data:latest", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1Njg5MA=="}, "originalCommit": {"oid": "4c24cd88581265903b0f594cc13b039a8766487c"}, "originalPosition": 55}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1174, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}