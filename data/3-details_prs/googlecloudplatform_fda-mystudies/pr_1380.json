{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMzM1ODM2", "number": 1380, "title": "Common Service - Fixed Issue #1200 - ID generation process should be simplified", "bodyText": "Fixed Issue #1200", "createdAt": "2020-10-14T12:25:54Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1380", "merged": true, "mergeCommit": {"oid": "fe4f40482624fc01872103266b103e7dfad8f291"}, "closed": true, "closedAt": "2020-10-14T16:19:33Z", "author": {"login": "dhanyak-btc"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdScRSnAH2gAyNTAzMzM1ODM2OmFmNDJkZGEzMzUzYWMwY2I1NjA0MTU2YzAyYmZmNWM5ZjYzOGUxMzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSfgcbAH2gAyNTAzMzM1ODM2OjYyMDA5ZjIzMTQ3NjhkYjljYzE3MDMzNWQzM2IzZGQxMzk5NDdkZTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "af42dda3353ac0cb5604156c02bff5c9f638e133", "author": {"user": {"login": "dhanyak-btc", "name": "Dhanya Kumar KV"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/af42dda3353ac0cb5604156c02bff5c9f638e133", "committedDate": "2020-10-14T12:24:06Z", "message": "Fixed Issue #1200\n\nFixed Issue #1200"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MzgxNzk0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1380#pullrequestreview-508381794", "createdAt": "2020-10-14T14:03:31Z", "commit": {"oid": "af42dda3353ac0cb5604156c02bff5c9f638e133"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNDowMzozMVrOHhUspg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNDowMzozMVrOHhUspg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDcwNDE2Ng==", "bodyText": "how many characters is this random string? we should try to fix the length of the iD to the 64 character (or whatever that length was) we defined at the DB level.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1380#discussion_r504704166", "createdAt": "2020-10-14T14:03:31Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/IdGenerator.java", "diffHunk": "@@ -8,27 +8,27 @@\n \n package com.google.cloud.healthcare.fdamystudies.common;\n \n-import java.security.SecureRandom;\n import java.util.UUID;\n-import org.apache.commons.codec.digest.DigestUtils;\n+import org.apache.commons.lang3.RandomStringUtils;\n \n public final class IdGenerator {\n \n-  private static SecureRandom secureRandom = new SecureRandom();\n-\n   private IdGenerator() {}\n \n-  /**\n-   * Generates a random Id using UUID and current time (milliseconds). Returns Sha256 Hex value of\n-   * random id (length=64).\n-   */\n+  /** Generate a random Id using UUID and replace hyphen (-) with random alpha numeric letter */\n   public static String id() {\n-    String millis = String.valueOf(System.currentTimeMillis());\n-    StringBuilder builder = new StringBuilder(UUID.randomUUID().toString());\n-    for (int i = 0; i < millis.length(); i++) {\n-      int index = secureRandom.nextInt(builder.length() - 1);\n-      builder.insert(index, millis.charAt(i));\n+    String uuid = UUID.randomUUID().toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af42dda3353ac0cb5604156c02bff5c9f638e133"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0690a8bee657eae23413bc342ad99940ad8e2f5b", "author": {"user": {"login": "dhanyak-btc", "name": "Dhanya Kumar KV"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0690a8bee657eae23413bc342ad99940ad8e2f5b", "committedDate": "2020-10-14T14:25:03Z", "message": "Merge branch 'develop' into issue-1200"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NDUyMDAw", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1380#pullrequestreview-508452000", "createdAt": "2020-10-14T15:09:54Z", "commit": {"oid": "0690a8bee657eae23413bc342ad99940ad8e2f5b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNTowOTo1NVrOHhX8ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNTowOTo1NVrOHhX8ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc1NzM0OA==", "bodyText": "see ID_LENGTH=128 here", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1380#discussion_r504757348", "createdAt": "2020-10-14T15:09:55Z", "author": {"login": "zohrehj"}, "path": "common-modules/common-service/src/main/java/com/google/cloud/healthcare/fdamystudies/common/IdGenerator.java", "diffHunk": "@@ -8,27 +8,27 @@\n \n package com.google.cloud.healthcare.fdamystudies.common;\n \n-import java.security.SecureRandom;\n import java.util.UUID;\n-import org.apache.commons.codec.digest.DigestUtils;\n+import org.apache.commons.lang3.RandomStringUtils;\n \n public final class IdGenerator {\n \n-  private static SecureRandom secureRandom = new SecureRandom();\n-\n   private IdGenerator() {}\n \n-  /**\n-   * Generates a random Id using UUID and current time (milliseconds). Returns Sha256 Hex value of\n-   * random id (length=64).\n-   */\n+  /** Generate a random Id using UUID and replace hyphen (-) with random alpha numeric letter */\n   public static String id() {\n-    String millis = String.valueOf(System.currentTimeMillis());\n-    StringBuilder builder = new StringBuilder(UUID.randomUUID().toString());\n-    for (int i = 0; i < millis.length(); i++) {\n-      int index = secureRandom.nextInt(builder.length() - 1);\n-      builder.insert(index, millis.charAt(i));\n+    String uuid = UUID.randomUUID().toString();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDcwNDE2Ng=="}, "originalCommit": {"oid": "af42dda3353ac0cb5604156c02bff5c9f638e133"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NTAwNzg3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1380#pullrequestreview-508500787", "createdAt": "2020-10-14T16:00:13Z", "commit": {"oid": "0690a8bee657eae23413bc342ad99940ad8e2f5b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62009f2314768db9cc170335d33b3dd139947de9", "author": {"user": {"login": "dhanyak-btc", "name": "Dhanya Kumar KV"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/62009f2314768db9cc170335d33b3dd139947de9", "committedDate": "2020-10-14T16:10:22Z", "message": "Merge branch 'develop' into issue-1200"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 233, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}