{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNDM1NjU4", "number": 122, "title": "Combine all clusters into one", "bodyText": "It seems the FDA MyStudies team has moved towards combining all servers into\none cluster, \"heroes-hat-dev\". Adjust Terraform configs to match that.\nAlso increase the IP ranges for pods and services, to leave more room for\nscaling.", "createdAt": "2020-04-09T13:49:53Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/122", "merged": true, "mergeCommit": {"oid": "b7af48dd53497045dac0dbea388c5ad66b718595"}, "closed": true, "closedAt": "2020-04-09T15:14:46Z", "author": {"login": "MartinPetkov"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcV9NaWgFqTM5MDgzNDU1OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcV9zHcAFqTM5MDg3MjU0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwODM0NTU4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/122#pullrequestreview-390834558", "createdAt": "2020-04-09T14:17:21Z", "commit": {"oid": "094b6b888595fc3daa87f20d9f79b4c0c158196f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNDoxNzoyMVrOGDaxhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNDoxNzoyMVrOGDaxhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjIzNzU3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            module \"heroes-hat-cluster\" {\n          \n          \n            \n            module \"heroes_hat_cluster\" {", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/122#discussion_r406237574", "createdAt": "2020-04-09T14:17:21Z", "author": {"login": "umairidris"}, "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/main.tf", "diffHunk": "@@ -6,131 +6,21 @@ terraform {\n \n # From\n # https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/modules/safer-cluster-update-variant\n-\n-# Auth server\n-module \"gke-auth-server\" {\n-  source = \"terraform-google-modules/kubernetes-engine/google//modules/safer-cluster\"\n-\n-  # Required\n-  name                   = \"auth-server-ws-cluster\"\n-  kubernetes_version     = \"1.14.10-gke.24\"\n-  project_id             = var.project_id\n-  region                 = var.gke_region\n-  regional               = true\n-  network_project_id     = var.network_project_id\n-  network                = var.network\n-  subnetwork             = var.subnetwork\n-  ip_range_pods          = \"auth-server-ws-cluster-ip-range-pods\"\n-  ip_range_services      = \"auth-server-ws-cluster-ip-range-svc\"\n-  master_ipv4_cidr_block = \"172.16.0.0/28\"\n-\n-  # Optional\n-  # Some of these were taken from the example config at\n-  # https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/examples/safer_cluster\n-  istio             = true\n-  skip_provisioners = true\n-\n-  # Need to either disable private endpoint, or enable master auth networks.\n-  enable_private_endpoint = false\n-}\n-\n-# Response server\n-module \"gke-response-server\" {\n-  source = \"terraform-google-modules/kubernetes-engine/google//modules/safer-cluster\"\n-\n-  # Required\n-  name                   = \"response-server-ws-cluster\"\n-  kubernetes_version     = \"1.14.10-gke.24\"\n-  project_id             = var.project_id\n-  region                 = var.gke_region\n-  regional               = true\n-  network_project_id     = var.network_project_id\n-  network                = var.network\n-  subnetwork             = var.subnetwork\n-  ip_range_pods          = \"response-server-ws-cluster-ip-range-pods\"\n-  ip_range_services      = \"response-server-ws-cluster-ip-range-svc\"\n-  master_ipv4_cidr_block = \"172.16.1.0/28\"\n-\n-  # Optional\n-  # Some of these were taken from the example config at\n-  # https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/examples/safer_cluster\n-  istio             = true\n-  skip_provisioners = true\n-\n-  # Need to either disable private endpoint, or enable master auth networks.\n-  enable_private_endpoint = false\n-}\n-\n-# Study designer\n-module \"gke-study-designer\" {\n-  source = \"terraform-google-modules/kubernetes-engine/google//modules/safer-cluster\"\n-\n-  # Required\n-  name                   = \"study-designer-cluster\"\n-  kubernetes_version     = \"1.14.10-gke.24\"\n-  project_id             = var.project_id\n-  region                 = var.gke_region\n-  regional               = true\n-  network_project_id     = var.network_project_id\n-  network                = var.network\n-  subnetwork             = var.subnetwork\n-  ip_range_pods          = \"study-designer-cluster-ip-range-pods\"\n-  ip_range_services      = \"study-designer-cluster-ip-range-svc\"\n-  master_ipv4_cidr_block = \"172.16.2.0/28\"\n-\n-  # Optional\n-  # Some of these were taken from the example config at\n-  # https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/examples/safer_cluster\n-  istio             = true\n-  skip_provisioners = true\n-\n-  # Need to either disable private endpoint, or enable master auth networks.\n-  enable_private_endpoint = false\n-}\n-\n-# Study metadata\n-module \"gke-study-metadata\" {\n-  source = \"terraform-google-modules/kubernetes-engine/google//modules/safer-cluster\"\n-\n-  # Required\n-  name                   = \"study-meta-data-cluster\"\n-  kubernetes_version     = \"1.14.10-gke.24\"\n-  project_id             = var.project_id\n-  region                 = var.gke_region\n-  regional               = true\n-  network_project_id     = var.network_project_id\n-  network                = var.network\n-  subnetwork             = var.subnetwork\n-  ip_range_pods          = \"study-meta-data-cluster-ip-range-pods\"\n-  ip_range_services      = \"study-meta-data-cluster-ip-range-svc\"\n-  master_ipv4_cidr_block = \"172.16.3.0/28\"\n-\n-  # Optional\n-  # Some of these were taken from the example config at\n-  # https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/examples/safer_cluster\n-  istio             = true\n-  skip_provisioners = true\n-\n-  # Need to either disable private endpoint, or enable master auth networks.\n-  enable_private_endpoint = false\n-}\n-\n-# User registration server\n-module \"gke-registration-server\" {\n+module \"heroes-hat-cluster\" {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "094b6b888595fc3daa87f20d9f79b4c0c158196f"}, "originalPosition": 115}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwODM0ODY0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/122#pullrequestreview-390834864", "createdAt": "2020-04-09T14:17:40Z", "commit": {"oid": "094b6b888595fc3daa87f20d9f79b4c0c158196f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18913896bed5108e89982dc396736f50c982c224", "author": {"user": {"login": "MartinPetkov", "name": "Martin Petkov"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/18913896bed5108e89982dc396736f50c982c224", "committedDate": "2020-04-09T14:33:24Z", "message": "Combine all clusters into one\n\nIt seems the FDA MyStudies team has moved towards combining all servers into\none cluster, \"heroes-hat-dev\". Adjust Terraform configs to match that.\n\nAlso increase the IP ranges for pods and services, to leave more room for\nscaling."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwODcyNTQz", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/122#pullrequestreview-390872543", "createdAt": "2020-04-09T14:58:32Z", "commit": {"oid": "18913896bed5108e89982dc396736f50c982c224"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1272, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}