{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMTc2OTgx", "number": 257, "title": "iOS Internal bug fixes.", "bodyText": "Fixes #256\nThere was an issue where charts' responses were replicating on empty charts, this has a fix for that as well.\nFix for Charts not loading due to the wrong date format after the user logs in again.\nFix for Responses getting deleted when study has no user action while withdrawing.", "createdAt": "2020-04-28T15:02:10Z", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/257", "merged": true, "mergeCommit": {"oid": "7500cbc1f56fbc560338faed55f6d5c3cfac49d3"}, "closed": true, "closedAt": "2020-04-29T14:31:24Z", "author": {"login": "tushar-boston"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcb9rpLgH2gAyNDEwMTc2OTgxOjIxZTViMjdiNmU5NTI0MWRiZDQ3N2FiYTg3ODJmMDdkYzc1NDgyY2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccYxf-gH2gAyNDEwMTc2OTgxOjk5NWI5MmY0MjU2MWZjMzdlNDQ0NTlhN2YwYjVkZTFmYmZhOTc0NDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "21e5b27b6e95241dbd477aba8782f07dc75482cc", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/21e5b27b6e95241dbd477aba8782f07dc75482cc", "committedDate": "2020-04-28T06:13:55Z", "message": "Fix loading responses back to dashboard."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc17c2f365f29051dc3e2075eb7c72f55cb6e09f", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/cc17c2f365f29051dc3e2075eb7c72f55cb6e09f", "committedDate": "2020-04-28T14:32:38Z", "message": "Update activity state to complete after processing the response."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3ced6b41e3a346c797d48475eb1f3c8993dfb3e", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b3ced6b41e3a346c797d48475eb1f3c8993dfb3e", "committedDate": "2020-04-28T14:35:22Z", "message": "Fix duplication of charts."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46589e921f464149540bb5e7c975745f13bb96fd", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/46589e921f464149540bb5e7c975745f13bb96fd", "committedDate": "2020-04-28T14:37:09Z", "message": "Data should be retained with no action."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxOTU1NzI2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/257#pullrequestreview-401955726", "createdAt": "2020-04-28T15:30:24Z", "commit": {"oid": "46589e921f464149540bb5e7c975745f13bb96fd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNTozMTowN1rOGNZ-Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNTozOTozNlrOGNabEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcxMDE0Ng==", "bodyText": "why does this need to be lazy if it's a primitive?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/257#discussion_r416710146", "createdAt": "2020-04-28T15:31:07Z", "author": {"login": "nikklassen"}, "path": "iOS/HPHC/HPHC/Controllers/StudyUI/StudyOverviewUI/StudyHomeViewController.swift", "diffHunk": "@@ -72,6 +72,7 @@ class StudyHomeViewController: UIViewController {\n   var isUpdatingIneligibility: Bool = false\n \n   var consentRestorationData: Data?\n+  lazy var isStudyActivitiesPresented = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46589e921f464149540bb5e7c975745f13bb96fd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcxMzI2Mw==", "bodyText": "fix indentation here", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/257#discussion_r416713263", "createdAt": "2020-04-28T15:35:11Z", "author": {"login": "nikklassen"}, "path": "iOS/HPHC/HPHC/Views/Cells/LineChartCell.swift", "diffHunk": "@@ -296,37 +298,11 @@ class LineChartCell: GraphChartTableViewCell {\n       self.handleWeeksOfMonthForDate(date: hourOfDayDate)\n \n     case .runs:\n-      self.buttonForward.isEnabled = true\n+     self.buttonForward.isEnabled = true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46589e921f464149540bb5e7c975745f13bb96fd"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcxNjAyMw==", "bodyText": "This can more cleanly be written as\nif frequencySet.isEmpty {\n  self.graphView.reloadData()\n  return false\n}\nlet sTime = ...\n\nThis reduces nesting and positive conditions are easier to read.", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/257#discussion_r416716023", "createdAt": "2020-04-28T15:37:53Z", "author": {"login": "nikklassen"}, "path": "iOS/HPHC/HPHC/Views/Cells/LineChartCell.swift", "diffHunk": "@@ -479,6 +430,40 @@ class LineChartCell: GraphChartTableViewCell {\n     return frequencyRunsSet\n   }\n \n+  @discardableResult\n+  private func plotForRunsType() -> Bool {\n+\n+    frequencyPageIndex = frequencyPageSize * pageNumber\n+    let frequencySet = self.getNextSetOfFrequencyRuns()\n+\n+    if !frequencySet.isEmpty {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46589e921f464149540bb5e7c975745f13bb96fd"}, "originalPosition": 155}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcxNjcwNg==", "bodyText": "Combine let and return", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/257#discussion_r416716706", "createdAt": "2020-04-28T15:38:38Z", "author": {"login": "nikklassen"}, "path": "iOS/HPHC/HPHC/Utils/Helpers/DateHelper.swift", "diffHunk": "@@ -0,0 +1,48 @@\n+//  Copyright 2020 Google LLC\n+//\n+//  Use of this source code is governed by an MIT-style\n+//  license that can be found in the LICENSE file or at\n+//  https://opensource.org/licenses/MIT.\n+\n+import Foundation\n+\n+enum DateHelper {\n+\n+  static private let runDateFormat = \"yyyy-MM-dd HH:mm:ss Z\"\n+\n+  enum DateType { case date, time }\n+\n+  static var iso8601DateFormatter: DateFormatter {\n+    let dateFormatter = DateFormatter()\n+    let locale = Locale(identifier: \"en_US_POSIX\")\n+    dateFormatter.timeZone = TimeZone.current\n+    dateFormatter.locale = locale\n+    dateFormatter.dateFormat = \"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"\n+    return dateFormatter\n+  }\n+\n+  static func stringFromDate(date: Date, format: String) -> String {\n+    let dateFormatter = DateFormatter()\n+    dateFormatter.dateFormat = format\n+    dateFormatter.timeZone = TimeZone.current\n+    dateFormatter.locale = Locale(identifier: \"en_US_POSIX\")\n+    let dateString = dateFormatter.string(from: date)\n+\n+    return dateString", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46589e921f464149540bb5e7c975745f13bb96fd"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcxNjc3Mg==", "bodyText": "Combine let and return", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/257#discussion_r416716772", "createdAt": "2020-04-28T15:38:43Z", "author": {"login": "nikklassen"}, "path": "iOS/HPHC/HPHC/Utils/Helpers/DateHelper.swift", "diffHunk": "@@ -0,0 +1,48 @@\n+//  Copyright 2020 Google LLC\n+//\n+//  Use of this source code is governed by an MIT-style\n+//  license that can be found in the LICENSE file or at\n+//  https://opensource.org/licenses/MIT.\n+\n+import Foundation\n+\n+enum DateHelper {\n+\n+  static private let runDateFormat = \"yyyy-MM-dd HH:mm:ss Z\"\n+\n+  enum DateType { case date, time }\n+\n+  static var iso8601DateFormatter: DateFormatter {\n+    let dateFormatter = DateFormatter()\n+    let locale = Locale(identifier: \"en_US_POSIX\")\n+    dateFormatter.timeZone = TimeZone.current\n+    dateFormatter.locale = locale\n+    dateFormatter.dateFormat = \"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"\n+    return dateFormatter\n+  }\n+\n+  static func stringFromDate(date: Date, format: String) -> String {\n+    let dateFormatter = DateFormatter()\n+    dateFormatter.dateFormat = format\n+    dateFormatter.timeZone = TimeZone.current\n+    dateFormatter.locale = Locale(identifier: \"en_US_POSIX\")\n+    let dateString = dateFormatter.string(from: date)\n+\n+    return dateString\n+  }\n+\n+  static func dateFromString(date: String, format: String) -> Date? {\n+    let dateFormatter = DateFormatter()\n+    dateFormatter.dateFormat = format\n+    dateFormatter.timeZone = TimeZone.current\n+    dateFormatter.locale = Locale(identifier: \"en_US_POSIX\")\n+    let date = dateFormatter.date(from: date)\n+\n+    return date", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46589e921f464149540bb5e7c975745f13bb96fd"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjcxNzU4NQ==", "bodyText": "Can you rewrite this to remove the force-cast?", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/257#discussion_r416717585", "createdAt": "2020-04-28T15:39:36Z", "author": {"login": "nikklassen"}, "path": "iOS/HPHC/HPHC/Controllers/StudyUI/ChartsUI/ChartsViewController.swift", "diffHunk": "@@ -111,26 +111,21 @@ class ChartsViewController: UIViewController {\n extension ChartsViewController: UITableViewDataSource {\n \n   func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {\n-    return 1\n-  }\n-\n-  func numberOfSections(in tableView: UITableView) -> Int {\n     return StudyDashboard.instance.charts.count\n   }\n \n   func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {\n \n-    let chart = StudyDashboard.instance.charts[indexPath.section]\n+    let chart = StudyDashboard.instance.charts[indexPath.row]\n \n     if chart.chartType == \"line-chart\" {\n-\n-      let cell = tableView.dequeueReusableCell(withIdentifier: \"lineChart\") as! LineChartCell\n+      let cell = tableView.dequeueReusableCell(withIdentifier: \"lineChart\", for: indexPath) as! LineChartCell", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46589e921f464149540bb5e7c975745f13bb96fd"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "587065e7cb1ddf0ea04969f9dbd4be1d64f04a59", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/587065e7cb1ddf0ea04969f9dbd4be1d64f04a59", "committedDate": "2020-04-28T17:30:37Z", "message": "Style guide cleanup."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c07b4f05732719d0f7512231673a5518bb7e3f70", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c07b4f05732719d0f7512231673a5518bb7e3f70", "committedDate": "2020-04-28T17:51:57Z", "message": "Update project.pbxproj\n\nBuild fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2288ece1a33621367a495d425c973e781d385635", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2288ece1a33621367a495d425c973e781d385635", "committedDate": "2020-04-28T17:52:30Z", "message": "Merge branch 'early-access' into ios-ui-update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNjU2Mzk2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/257#pullrequestreview-402656396", "createdAt": "2020-04-29T13:19:28Z", "commit": {"oid": "2288ece1a33621367a495d425c973e781d385635"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "995b92f42561fc37e44459a7f0b5de1fbfa97447", "author": {"user": {"login": "tushar-boston", "name": "Tushar Katyal"}}, "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/995b92f42561fc37e44459a7f0b5de1fbfa97447", "committedDate": "2020-04-29T13:47:45Z", "message": "Merge branch 'early-access' into ios-ui-update"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1169, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}