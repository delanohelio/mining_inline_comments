{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NTgzMDM5", "number": 6163, "title": "ocaml opium process forking", "bodyText": "uses #6131 to create an additional comparison variant that uses process forking", "createdAt": "2020-11-25T17:01:44Z", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6163", "merged": true, "mergeCommit": {"oid": "80ef9f43de95a1e7d3ea39c323c56f8d68f3757f"}, "closed": true, "closedAt": "2020-12-03T15:10:02Z", "author": {"login": "mudrz"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgBZEfAH2gAyNTI3NTgzMDM5OjIzMWVmMzYwNzhmMTc1YzNjOGEwYzI0ZmE3NWFkYjYxOTBhZTU3Yjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgRTcRAH2gAyNTI3NTgzMDM5Ojc0YzIzYTU4YzExMGViNWMyZDYzMDUwMTMzMDNjMDQ1MmEyZjlkYzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "231ef36078f175c3c8a0c24fa75adb6190ae57b7", "author": {"user": {"login": "mudrz", "name": null}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/231ef36078f175c3c8a0c24fa75adb6190ae57b7", "committedDate": "2020-11-25T17:00:06Z", "message": "opium forks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NzAwNzI5", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6163#pullrequestreview-538700729", "createdAt": "2020-11-25T17:07:04Z", "commit": {"oid": "231ef36078f175c3c8a0c24fa75adb6190ae57b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNzowNzowNFrOH58vFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNzowNzowNFrOH58vFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDUyNTk3Mw==", "bodyText": "@blandinw I notice that you have this function wrapped both in async and catch\nI'm not that familiar with Lwt, is it necessary?", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6163#discussion_r530525973", "createdAt": "2020-11-25T17:07:04Z", "author": {"login": "mudrz"}, "path": "frameworks/OCaml/opium/src/bin/main_forks.ml", "diffHunk": "@@ -0,0 +1,69 @@\n+open Opium.Std\n+open Lwt.Syntax\n+\n+let run_app app ~instances ~port =\n+  let listen_address =\n+    let inet_addr = Unix.inet_addr_any in\n+    Unix.ADDR_INET (inet_addr, port)\n+  in\n+  let socket =\n+    Lwt_unix.socket (Unix.domain_of_sockaddr listen_address) Unix.SOCK_STREAM 0\n+  in\n+  Lwt_unix.setsockopt socket Unix.SO_REUSEADDR true;\n+\n+  Lwt_main.run (\n+    let+ () = Lwt_unix.bind socket listen_address in\n+    Lwt_unix.listen socket (Lwt_unix.somaxconn () [@ocaml.warning \"-3\"])\n+  );\n+\n+  let rec accept_loop socket handler instance =\n+    let* (socket', sockaddr') = Lwt_unix.accept socket in\n+    Lwt.async (fun () -> handler sockaddr' socket');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "231ef36078f175c3c8a0c24fa75adb6190ae57b7"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66b17cf38a9ea4a025134aa5e521159ae46b281c", "author": {"user": {"login": "mudrz", "name": null}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/66b17cf38a9ea4a025134aa5e521159ae46b281c", "committedDate": "2020-11-26T10:54:36Z", "message": "start date refreshes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74c23a58c110eb5c2d6305013303c0452a2f9dc1", "author": {"user": {"login": "mudrz", "name": null}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/74c23a58c110eb5c2d6305013303c0452a2f9dc1", "committedDate": "2020-11-26T11:32:26Z", "message": "add missing changes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3922, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}