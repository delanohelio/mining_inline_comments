{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MDIyNjU0", "number": 5618, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODozOTozMFrODz3jog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMjowNToxNlrOD0dVOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NzE0MjEwOnYy", "diffSide": "RIGHT", "path": "frameworks/PHP/simps/app/Model/DbModel.php", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODozOTozMFrOGIiVXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjoyNTozOFrOGIqLqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNDMxOQ==", "bodyText": "For me that don't look like a full ORM,\nYou are using the PDO directly and with SQL.\nMicro ORM at most.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411604319", "createdAt": "2020-04-20T18:39:30Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTczMjI3MQ==", "bodyText": "I used the pdo connection pool and did not use orm. How should it be modified?", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411732271", "createdAt": "2020-04-20T22:24:08Z", "author": {"login": "sy-records"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNDMxOQ=="}, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTczMjkwNg==", "bodyText": "I want to add a separate ORM pr in the future.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411732906", "createdAt": "2020-04-20T22:25:38Z", "author": {"login": "sy-records"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNDMxOQ=="}, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NzE2MzA1OnYy", "diffSide": "RIGHT", "path": "frameworks/PHP/simps/app/Model/DbModel.php", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODo0NDozOFrOGIiiAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjo0MDowMFrOGIqkYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNzU1NA==", "bodyText": "You are sorting an array, not the array of Fortunes objects.\nRead the requiriments:\nhttps://github.com/TechEmpower/FrameworkBenchmarks/wiki/Project-Information-Framework-Tests-Overview#requirements-3\nPlease update the code, or change the benchmark_config to raw db.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411607554", "createdAt": "2020-04-20T18:44:38Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');\n+        $this->pdo->fortune_test->execute();\n+        $arr = $this->pdo->fortune_test->fetchAll();\n+        foreach ($arr as $row) {\n+            $fortune[$row['id']] = $row['message'];\n+        }\n+        $fortune[0] = 'Additional fortune added at request time.';\n+        \\asort($fortune);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwODQzNA==", "bodyText": "All the db tests should use objects: db, updates and fortunes.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411608434", "createdAt": "2020-04-20T18:46:08Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');\n+        $this->pdo->fortune_test->execute();\n+        $arr = $this->pdo->fortune_test->fetchAll();\n+        foreach ($arr as $row) {\n+            $fortune[$row['id']] = $row['message'];\n+        }\n+        $fortune[0] = 'Additional fortune added at request time.';\n+        \\asort($fortune);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNzU1NA=="}, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTczNzU0MA==", "bodyText": "Does this need to be revised again?", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411737540", "createdAt": "2020-04-20T22:36:13Z", "author": {"login": "sy-records"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');\n+        $this->pdo->fortune_test->execute();\n+        $arr = $this->pdo->fortune_test->fetchAll();\n+        foreach ($arr as $row) {\n+            $fortune[$row['id']] = $row['message'];\n+        }\n+        $fortune[0] = 'Additional fortune added at request time.';\n+        \\asort($fortune);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNzU1NA=="}, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTczODM2Mw==", "bodyText": "No, thanks for the changes.\nI liked the code for this fw.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411738363", "createdAt": "2020-04-20T22:38:03Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');\n+        $this->pdo->fortune_test->execute();\n+        $arr = $this->pdo->fortune_test->fetchAll();\n+        foreach ($arr as $row) {\n+            $fortune[$row['id']] = $row['message'];\n+        }\n+        $fortune[0] = 'Additional fortune added at request time.';\n+        \\asort($fortune);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNzU1NA=="}, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTczOTIzMg==", "bodyText": "Thanks for the review.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411739232", "createdAt": "2020-04-20T22:40:00Z", "author": {"login": "sy-records"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');\n+        $this->pdo->fortune_test->execute();\n+        $arr = $this->pdo->fortune_test->fetchAll();\n+        foreach ($arr as $row) {\n+            $fortune[$row['id']] = $row['message'];\n+        }\n+        $fortune[0] = 'Additional fortune added at request time.';\n+        \\asort($fortune);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNzU1NA=="}, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1ODAxMzY0OnYy", "diffSide": "RIGHT", "path": "frameworks/PHP/simps/benchmark_config.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjozMDo0MVrOGIqUYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjozMzoxOFrOGIqYag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTczNTEzNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    \"orm\": \"Full\",\n          \n          \n            \n                    \"orm\": \"Raw\",\n          \n      \n    \n    \n  \n\nIf you aren't using the ORM.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411735136", "createdAt": "2020-04-20T22:30:41Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/simps/benchmark_config.json", "diffHunk": "@@ -0,0 +1,29 @@\n+{\n+  \"framework\": \"simps\",\n+  \"tests\": [\n+    {\n+      \"default\": {\n+        \"json_url\": \"/json\",\n+        \"plaintext_url\": \"/plaintext\",\n+        \"db_url\": \"/db\",\n+        \"fortune_url\": \"/fortunes\",\n+        \"update_url\": \"/updates/\",\n+        \"port\": 8080,\n+        \"approach\": \"Realistic\",\n+        \"classification\": \"Micro\",\n+        \"database\": \"mysql\",\n+        \"framework\": \"Simps\",\n+        \"language\": \"PHP\",\n+        \"flavor\": \"None\",\n+        \"orm\": \"Full\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTczNjE3MA==", "bodyText": "ok.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411736170", "createdAt": "2020-04-20T22:33:18Z", "author": {"login": "sy-records"}, "path": "frameworks/PHP/simps/benchmark_config.json", "diffHunk": "@@ -0,0 +1,29 @@\n+{\n+  \"framework\": \"simps\",\n+  \"tests\": [\n+    {\n+      \"default\": {\n+        \"json_url\": \"/json\",\n+        \"plaintext_url\": \"/plaintext\",\n+        \"db_url\": \"/db\",\n+        \"fortune_url\": \"/fortunes\",\n+        \"update_url\": \"/updates/\",\n+        \"port\": 8080,\n+        \"approach\": \"Realistic\",\n+        \"classification\": \"Micro\",\n+        \"database\": \"mysql\",\n+        \"framework\": \"Simps\",\n+        \"language\": \"PHP\",\n+        \"flavor\": \"None\",\n+        \"orm\": \"Full\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTczNTEzNg=="}, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzMzMTE0OnYy", "diffSide": "RIGHT", "path": "frameworks/PHP/simps/app/Model/DbModel.php", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMjowNToxNlrOGJadFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMjowNToxNlrOGJadFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjUyMzc5OQ==", "bodyText": "Need to select id here as well.\nOther than that, this is ready to go.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r412523799", "createdAt": "2020-04-21T22:05:16Z", "author": {"login": "nbrady-techempower"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');\n+        $this->pdo->fortune_test->execute();\n+        $arr = $this->pdo->fortune_test->fetchAll();\n+        foreach ($arr as $row) {\n+            $fortune[$row['id']] = $row['message'];\n+        }\n+        $fortune[0] = 'Additional fortune added at request time.';\n+        \\asort($fortune);\n+        return $fortune;\n+    }\n+\n+    public function updates(int $queries = 0)\n+    {\n+        $query_count = 1;\n+        if ($queries > 1) {\n+            $query_count = $queries > 500 ? 500 : $queries;\n+        }\n+\n+        $arr = [];\n+        $this->pdo->updates_test_select = $this->pdo->updates_test_select ?? $this->pdo->prepare(\n+                'SELECT randomNumber FROM World WHERE id = ?'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbcd86f77e9c2b0e17246b7efed30d499b0b0b37"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2680, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}