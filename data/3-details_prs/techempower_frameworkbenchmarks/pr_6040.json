{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNjQzMjQ4", "number": 6040, "title": "Update http4s", "bodyText": "Replace doobie with quill and async drivers.\nUpdate http4s, Scala, etc. to newest versions.\nUpdate to JDK 15.\nImprove JVM flags.\nTweak thread pool sizes.", "createdAt": "2020-09-26T23:35:33Z", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6040", "merged": true, "mergeCommit": {"oid": "89a93f5c948643fa9e6e21b67ef58a9e07edb4af"}, "closed": true, "closedAt": "2020-09-28T18:13:16Z", "author": {"login": "wjoel"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdM0ONxgFqTQ5NzA0MDMxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNMEM3AFqTQ5NzE4MjM3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDQwMzE0", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6040#pullrequestreview-497040314", "createdAt": "2020-09-27T00:53:44Z", "commit": {"oid": "e52f37932a02a82810e746941fa3c1b21492cf77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwMDo1Mzo0NVrOHYjnmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwMDo1Mzo0NVrOHYjnmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUxMTQ1MA==", "bodyText": "Shouldn't this be delay? You don't generally use fromFuture with pure", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6040#discussion_r495511450", "createdAt": "2020-09-27T00:53:45Z", "author": {"login": "Daenyth"}, "path": "frameworks/Scala/http4s/src/main/scala/http4s/techempower/benchmark/DatabaseService.scala", "diffHunk": "@@ -0,0 +1,73 @@\n+package http4s.techempower.benchmark\n+\n+import java.util.concurrent.{Executor, ThreadLocalRandom}\n+\n+import scala.concurrent.{ExecutionContext, ExecutionContextExecutor}\n+import cats.effect.{ContextShift, IO => CatsIO}\n+import cats.syntax.all._\n+import io.getquill._\n+\n+class DatabaseService(ctx: PostgresJAsyncContext[LowerCase.type], executor: Executor)(implicit\n+    cs: ContextShift[CatsIO]\n+) {\n+  implicit val dbExecutionContext: ExecutionContextExecutor = ExecutionContext.fromExecutor(executor)\n+  import ctx._\n+\n+  def close(): CatsIO[Unit] = {\n+    CatsIO(ctx.close())\n+  }\n+\n+  // Provide a random number between 1 and 10000 (inclusive)\n+  private def randomWorldId() =\n+    CatsIO(ThreadLocalRandom.current().nextInt(1, 10001))\n+\n+  // Update the randomNumber field with a random number\n+  def updateRandomNumber(world: World): CatsIO[World] =\n+    for {\n+      randomId <- randomWorldId()\n+    } yield world.copy(randomNumber = randomId)\n+\n+  // Select a World object from the database by ID\n+  def selectWorld(id: Int): CatsIO[World] =\n+    CatsIO.fromFuture(\n+      CatsIO.pure(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e52f37932a02a82810e746941fa3c1b21492cf77"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c89b2b51d48629cee7a06604fb073f660f73a8a", "author": {"user": {"login": "wjoel", "name": "Joel Wilsson"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/7c89b2b51d48629cee7a06604fb073f660f73a8a", "committedDate": "2020-09-27T11:19:41Z", "message": "Update http4s\n\n- Replace doobie with quill and async drivers.\n- Update http4s, Scala, etc. to newest versions.\n- Update to JDK 15.\n- Improve JVM flags.\n- Tweak thread pool sizes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e52f37932a02a82810e746941fa3c1b21492cf77", "author": {"user": {"login": "wjoel", "name": "Joel Wilsson"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/e52f37932a02a82810e746941fa3c1b21492cf77", "committedDate": "2020-09-26T23:33:15Z", "message": "Update http4s\n\n- Replace doobie with quill and async drivers.\n- Update http4s, Scala, etc. to newest versions.\n- Update to JDK 15.\n- Improve JVM flags.\n- Tweak thread pool sizes."}, "afterCommit": {"oid": "7c89b2b51d48629cee7a06604fb073f660f73a8a", "author": {"user": {"login": "wjoel", "name": "Joel Wilsson"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/7c89b2b51d48629cee7a06604fb073f660f73a8a", "committedDate": "2020-09-27T11:19:41Z", "message": "Update http4s\n\n- Replace doobie with quill and async drivers.\n- Update http4s, Scala, etc. to newest versions.\n- Update to JDK 15.\n- Improve JVM flags.\n- Tweak thread pool sizes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MTgyMzc3", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6040#pullrequestreview-497182377", "createdAt": "2020-09-28T04:41:42Z", "commit": {"oid": "7c89b2b51d48629cee7a06604fb073f660f73a8a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3932, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}