{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxMDM1Njgw", "number": 6066, "title": "Add Morph OCaml framework", "bodyText": "Adding the Morph framework which is based on Httpaf instead of Cohttp and is therefore hopefully slightly faster than webmachine.\nI couldn't run the tests locally because of #6065", "createdAt": "2020-10-10T20:52:31Z", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6066", "merged": true, "mergeCommit": {"oid": "7819ed3cbc94696c264aadbfe7d18dd64f4fe4ae"}, "closed": true, "closedAt": "2020-10-20T15:45:12Z", "author": {"login": "ulrikstrid"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdRRLQrABqjM4NjMxMDc0NTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTLq1GAH2gAyNTAxMDM1NjgwOjZmNmNlYmYwODJjYjA3ZWQ1Y2M4ZmRjMzRiNGI0YTg2OGUwOTI0MDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1cb3d462e4a0e76247f7699aa9321937005fdef2", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/1cb3d462e4a0e76247f7699aa9321937005fdef2", "committedDate": "2020-10-10T20:51:25Z", "message": "Add Morph OCaml framework"}, "afterCommit": {"oid": "0f2253fcf43a507f86da886d519e6ca060ac0e4a", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/0f2253fcf43a507f86da886d519e6ca060ac0e4a", "committedDate": "2020-10-10T20:54:22Z", "message": "Add Morph OCaml framework"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f2253fcf43a507f86da886d519e6ca060ac0e4a", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/0f2253fcf43a507f86da886d519e6ca060ac0e4a", "committedDate": "2020-10-10T20:54:22Z", "message": "Add Morph OCaml framework"}, "afterCommit": {"oid": "a2140585972fe3c2f4cf4d11481a2a6c1f70f67f", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/a2140585972fe3c2f4cf4d11481a2a6c1f70f67f", "committedDate": "2020-10-10T20:55:20Z", "message": "Add Morph OCaml framework"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NDMwOTU0", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6066#pullrequestreview-507430954", "createdAt": "2020-10-13T13:25:13Z", "commit": {"oid": "a2140585972fe3c2f4cf4d11481a2a6c1f70f67f"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxMzoyNToxM1rOHgmmHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxMzozMToyOFrOHgm4sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk0ODgzMA==", "bodyText": "hey @ulrikstrid explicitly listing the testdir does not seem to be necessary - for example \n  \n    \n      FrameworkBenchmarks/.travis.yml\n    \n    \n        Lines 15 to 16\n      in\n      30bb2a4\n    \n    \n    \n    \n\n        \n          \n           - \"TESTLANG=C\" \n        \n\n        \n          \n           - \"TESTLANG=CSharp\" \n        \n    \n  \n\n\n(my PR for opium was also merged yesterday, so the list is not full)", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6066#discussion_r503948830", "createdAt": "2020-10-13T13:25:13Z", "author": {"login": "mudrz"}, "path": ".travis.yml", "diffHunk": "@@ -65,6 +65,8 @@ env:\n     - \"TESTLANG=Nim\"\n     - 'TESTDIR=\"Nim/httpbeast Nim/jester Nim/basolato\"'\n     - \"TESTLANG=OCaml\"\n+    - \"TESTDIR=OCaml/morph\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2140585972fe3c2f4cf4d11481a2a6c1f70f67f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk0OTgwMw==", "bodyText": "is this esy build intended?", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6066#discussion_r503949803", "createdAt": "2020-10-13T13:26:34Z", "author": {"login": "mudrz"}, "path": "frameworks/OCaml/morph/morph.dockerfile", "diffHunk": "@@ -0,0 +1,35 @@\n+FROM alpine:latest as certs\n+RUN apk --update add ca-certificates\n+\n+FROM reasonnative/web:4.10.0 as builder\n+\n+RUN mkdir /app\n+WORKDIR /app\n+\n+COPY src/esy.json src/morph-tfb.opam /app/\n+\n+RUN esy install\n+RUN esy build --release", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2140585972fe3c2f4cf4d11481a2a6c1f70f67f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk0OTk3MA==", "bodyText": "is the second esy install intended?", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6066#discussion_r503949970", "createdAt": "2020-10-13T13:26:48Z", "author": {"login": "mudrz"}, "path": "frameworks/OCaml/morph/morph.dockerfile", "diffHunk": "@@ -0,0 +1,35 @@\n+FROM alpine:latest as certs\n+RUN apk --update add ca-certificates\n+\n+FROM reasonnative/web:4.10.0 as builder\n+\n+RUN mkdir /app\n+WORKDIR /app\n+\n+COPY src/esy.json src/morph-tfb.opam /app/\n+\n+RUN esy install\n+RUN esy build --release\n+\n+COPY ./src/bin /app/src/bin\n+\n+RUN esy install", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2140585972fe3c2f4cf4d11481a2a6c1f70f67f"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk1MTE0Mg==", "bodyText": "are these certs automatically used by morph?", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6066#discussion_r503951142", "createdAt": "2020-10-13T13:28:16Z", "author": {"login": "mudrz"}, "path": "frameworks/OCaml/morph/morph.dockerfile", "diffHunk": "@@ -0,0 +1,35 @@\n+FROM alpine:latest as certs\n+RUN apk --update add ca-certificates\n+\n+FROM reasonnative/web:4.10.0 as builder\n+\n+RUN mkdir /app\n+WORKDIR /app\n+\n+COPY src/esy.json src/morph-tfb.opam /app/\n+\n+RUN esy install\n+RUN esy build --release\n+\n+COPY ./src/bin /app/src/bin\n+\n+RUN esy install\n+\n+RUN esy dune build --profile=docker --release\n+\n+RUN esy mv \"#{self.target_dir / 'default' / 'bin' / 'tfb.exe'}\" main.exe\n+\n+RUN strip main.exe\n+\n+FROM scratch as runtime\n+\n+ENV OPENSSL_STATIC=1\n+ENV SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt\n+ENV SSL_CERT_DIR=/etc/ssl/certs\n+COPY --from=certs /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2140585972fe3c2f4cf4d11481a2a6c1f70f67f"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk1MzU4NA==", "bodyText": "I added a .gitignore to /OCaml: \n  \n    \n      FrameworkBenchmarks/frameworks/OCaml/.gitignore\n    \n    \n        Lines 1 to 4\n      in\n      30bb2a4\n    \n    \n    \n    \n\n        \n          \n           **/_opam \n        \n\n        \n          \n           **/_build \n        \n\n        \n          \n           .merlin \n        \n\n        \n          \n           .ocamlformat \n        \n    \n  \n\n\nthese ignores seems to be very common for OCaml and esy, should they be at that level for convenience for others?", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6066#discussion_r503953584", "createdAt": "2020-10-13T13:31:28Z", "author": {"login": "mudrz"}, "path": "frameworks/OCaml/morph/src/.gitignore", "diffHunk": "@@ -0,0 +1,4 @@\n+_esy\n+*.install\n+.merlin\n+!bin/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2140585972fe3c2f4cf4d11481a2a6c1f70f67f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6908abd0128615fcb91df3be3e7283caf642333", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/b6908abd0128615fcb91df3be3e7283caf642333", "committedDate": "2020-10-14T11:41:53Z", "message": "Add Morph OCaml framework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48b154d7d09855d58cd4ddd8e126c0ebbf05d968", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/48b154d7d09855d58cd4ddd8e126c0ebbf05d968", "committedDate": "2020-10-14T11:41:53Z", "message": "Fix running tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4c1f7056c1d4b210c21a9d47f2ae924265e890e", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/d4c1f7056c1d4b210c21a9d47f2ae924265e890e", "committedDate": "2020-10-14T11:40:51Z", "message": "Fix running tests"}, "afterCommit": {"oid": "48b154d7d09855d58cd4ddd8e126c0ebbf05d968", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/48b154d7d09855d58cd4ddd8e126c0ebbf05d968", "committedDate": "2020-10-14T11:41:53Z", "message": "Fix running tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b44131d4b246fd997f002623d05805f0a4a76cab", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/b44131d4b246fd997f002623d05805f0a4a76cab", "committedDate": "2020-10-14T11:44:48Z", "message": "Update meta files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc4148b0efd564f1bcd3b17ed28cc04fc5aa081e", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/dc4148b0efd564f1bcd3b17ed28cc04fc5aa081e", "committedDate": "2020-10-14T11:57:03Z", "message": "Simplify dockerfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "098d1b89a85ba95efdaa377486ccac3296fbe8a0", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/098d1b89a85ba95efdaa377486ccac3296fbe8a0", "committedDate": "2020-10-16T07:40:30Z", "message": "Minor refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2053e18b9d6258fa8a6965f569d6a48e45376510", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/2053e18b9d6258fa8a6965f569d6a48e45376510", "committedDate": "2020-10-16T08:55:39Z", "message": "Fix copy of esy.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82996219984ee483d6e6be7fe10f1e357a7b723f", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/82996219984ee483d6e6be7fe10f1e357a7b723f", "committedDate": "2020-10-16T11:47:06Z", "message": "Add static option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f6cebf082cb07ed5cc8fdc34b4b4a868e092403", "author": {"user": {"login": "ulrikstrid", "name": "Ulrik Strid"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/6f6cebf082cb07ed5cc8fdc34b4b4a868e092403", "committedDate": "2020-10-16T19:37:32Z", "message": "Make sure libev is used"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3937, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}