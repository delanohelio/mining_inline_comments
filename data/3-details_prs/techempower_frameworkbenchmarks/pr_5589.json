{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMDI2MTAx", "number": 5589, "title": "micro optimizations/upgraded fat-free code, optimized nginx settings", "bodyText": "Just a refresh of settings to make sure Fat-Free is running the most recent release.", "createdAt": "2020-04-08T19:07:39Z", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5589", "merged": true, "mergeCommit": {"oid": "48f83e939940970f3af8596165e691f4ec3fa680"}, "closed": true, "closedAt": "2020-04-13T18:09:04Z", "author": {"login": "n0nag0n"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVsujnAH2gAyNDAxMDI2MTAxOmM0YTBhNWFiMjZlOTFiZDE1NmJlMzc4ZWQyMzJkNGEwYmE4MDNmZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXSr2wAH2gAyNDAxMDI2MTAxOjZkZDZlODZkNTRlYWQ5M2MwNmExZWQ5MDdjN2ZkZTEyZTA3ZTBlYzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c4a0a5ab26e91bd156be378ed232d4a0ba803fef", "author": {"user": {"login": "n0nag0n", "name": "Austin"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/c4a0a5ab26e91bd156be378ed232d4a0ba803fef", "committedDate": "2020-04-08T19:05:10Z", "message": "micro optimizations to fat-free code, upgraded fat-free, and optimized nginx settings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMTc3NjIy", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5589#pullrequestreview-391177622", "createdAt": "2020-04-09T22:40:42Z", "commit": {"oid": "c4a0a5ab26e91bd156be378ed232d4a0ba803fef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQyMjo0MDo0MlrOGDryFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQyMjo0MDo0MlrOGDryFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjUxNjI0Ng==", "bodyText": "That change will be detrimental.\nIt's the number of keealive connections to the php-fpm, per worker processes (1 per cpu core).\n28 cores * 120 = 3,360 keepalive connections.\nphp-fpm only have 1.024 children processes.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5589#discussion_r406516246", "createdAt": "2020-04-09T22:40:42Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/fat-free/deploy/nginx.conf", "diffHunk": "@@ -42,7 +45,7 @@ http {\n \n     upstream fastcgi_backend {\n         server unix:/var/run/php/php7.3-fpm.sock;\n-        keepalive 40;\n+        keepalive 120;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4a0a5ab26e91bd156be378ed232d4a0ba803fef"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDIyODkw", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5589#pullrequestreview-391422890", "createdAt": "2020-04-10T12:44:00Z", "commit": {"oid": "c4a0a5ab26e91bd156be378ed232d4a0ba803fef"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjo0NDowMFrOGD5f4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMjo0NDowMFrOGD5f4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc0MDk2Mg==", "bodyText": "Without persistent db connections will have less than 1K req/s.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5589#discussion_r406740962", "createdAt": "2020-04-10T12:44:00Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/fat-free/index.php", "diffHunk": "@@ -1,36 +1,36 @@\n <?php\n // drop startup errors\n-if (function_exists('error_clear_last'))\n-    error_clear_last();\n+// if (function_exists('error_clear_last'))\n+//     error_clear_last();\n    \n-error_reporting(0);\n+// error_reporting(0);\n \n /** @var Base $f3 */\n $f3=require('src/base.php');\n \n error_reporting(-1);\n \n-$f3->set('DEBUG',2);\n+$f3->set('DEBUG',0);\n $f3->set('HIGHLIGHT',false);\n $f3->set('CACHE','folder=tmp/cache/');\n $f3->set('UI','ui/');\n $f3->set('ONERROR',function($f3){\n     echo $f3->get('ERROR.code').': '.$f3->get('ERROR.text').\"\\n\".$f3->get('ERROR.trace');\n });\n \n-$f3->set('DBS',array('mysql:host=tfb-database;port=3306;dbname=hello_world','benchmarkdbuser','benchmarkdbpass',[PDO::ATTR_PERSISTENT => true]));\n+$f3->set('DBS',array('mysql:host=tfb-database;port=3306;dbname=hello_world','benchmarkdbuser','benchmarkdbpass'));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4a0a5ab26e91bd156be378ed232d4a0ba803fef"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6dd6e86d54ead93c06a1ed907c7fde12e07e0ec4", "author": {"user": {"login": "n0nag0n", "name": "Austin"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/6dd6e86d54ead93c06a1ed907c7fde12e07e0ec4", "committedDate": "2020-04-13T17:52:32Z", "message": "fat-free, fat-free-raw: reverted nginx, converted fortune to raw and orm"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3879, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}