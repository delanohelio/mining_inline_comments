{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyODU2NTU1", "number": 5758, "title": "ntex: reduce memory allocations in fortunes bench", "bodyText": "", "createdAt": "2020-06-11T05:55:53Z", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5758", "merged": true, "mergeCommit": {"oid": "d273d116dcfd960ecc1c2d64b5bea824577b8d26"}, "closed": true, "closedAt": "2020-06-11T20:22:20Z", "author": {"login": "fafhrd91"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqHxLQgH2gAyNDMyODU2NTU1OmFmMGZjYzgyMGU3MTMyYjQ2Yzc1OGE4MjE3ZDIxYTE2Y2Y0Y2I2MjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqRw8kgFqTQyOTEzNDcwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "af0fcc820e7132b46c758a8217d21a16cf4cb620", "author": {"user": {"login": "fafhrd91", "name": "Nikolay Kim"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/af0fcc820e7132b46c758a8217d21a16cf4cb620", "committedDate": "2020-06-11T05:53:57Z", "message": "reduce memory allocations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca4955468764ba3c949e6f0af5a592dfd9ec395a", "author": {"user": {"login": "fafhrd91", "name": "Nikolay Kim"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/ca4955468764ba3c949e6f0af5a592dfd9ec395a", "committedDate": "2020-06-11T05:56:49Z", "message": "upgrade rustc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MDQ1MjA1", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5758#pullrequestreview-429045205", "createdAt": "2020-06-11T15:42:49Z", "commit": {"oid": "ca4955468764ba3c949e6f0af5a592dfd9ec395a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNTo0Mjo0OVrOGijYMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNTo0Mjo0OVrOGijYMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODg4NDQwMw==", "bodyText": "The changes here and setting the body length capacity violate rule 5. in the fortunes test:\n\nThe list data structure must be a dynamic-size or equivalent and should not be dimensioned using foreknowledge of the row-count of the database table.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5758#discussion_r438884403", "createdAt": "2020-06-11T15:42:49Z", "author": {"login": "nbrady-techempower"}, "path": "frameworks/Rust/ntex/src/db.rs", "diffHunk": "@@ -161,31 +175,49 @@ impl PgConnection {\n         }\n     }\n \n-    pub fn tell_fortune(&self) -> impl Future<Output = Result<Vec<Fortune>, io::Error>> {\n-        let mut items = vec![Fortune {\n-            id: 0,\n-            message: \"Additional fortune added at request time.\".to_string(),\n-        }];\n-\n+    pub fn tell_fortune(&self) -> impl Future<Output = Result<Bytes, io::Error>> {\n         let fut = self.cl.query_raw(&self.fortune, &[]);\n \n         async move {\n             let mut stream = fut\n                 .await\n                 .map_err(|e| io::Error::new(io::ErrorKind::Other, format!(\"{:?}\", e)))?;\n \n+            let mut rows = SmallVec::<[_; 32]>::new();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4955468764ba3c949e6f0af5a592dfd9ec395a"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42a0fe99e7ae7f85d45462429d081792f43170fa", "author": {"user": {"login": "fafhrd91", "name": "Nikolay Kim"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/42a0fe99e7ae7f85d45462429d081792f43170fa", "committedDate": "2020-06-11T17:05:32Z", "message": "use dynamic buffer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MTM0NzAw", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5758#pullrequestreview-429134700", "createdAt": "2020-06-11T17:32:45Z", "commit": {"oid": "42a0fe99e7ae7f85d45462429d081792f43170fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3876, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}