{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MDIyNjU0", "number": 5618, "title": "add Simps", "bodyText": "", "createdAt": "2020-04-20T12:06:28Z", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618", "merged": true, "mergeCommit": {"oid": "2f8c3f86e1d0180ef693b7ceb5fd00bbb5490c0b"}, "closed": true, "closedAt": "2020-04-22T02:02:03Z", "author": {"login": "sy-records"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZd4wrAH2gAyNDA2MDIyNjU0OjEwYWQ0ZTAwMTFjNDY5MjhiNmE5ZWY0MDk0YWZjZjJmZjI0MTVlMWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ7Lq0AH2gAyNDA2MDIyNjU0OjhlZjIxZjRmM2Y5MTcxY2RkN2MxMjEyYjNlOTc2NWJlYWVkMGViN2Y=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "10ad4e0011c46928b6a9ef4094afcf2ff2415e1d", "author": {"user": {"login": "sy-records", "name": "\u6c88\u5501"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/10ad4e0011c46928b6a9ef4094afcf2ff2415e1d", "committedDate": "2020-04-20T12:03:26Z", "message": "add Simps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45b5bfd5617f90862dd415d2e5419581a18d7c01", "author": {"user": {"login": "sy-records", "name": "\u6c88\u5501"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/45b5bfd5617f90862dd415d2e5419581a18d7c01", "committedDate": "2020-04-20T12:21:32Z", "message": "update docker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70", "author": {"user": {"login": "sy-records", "name": "\u6c88\u5501"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/526107515a3721345b6cadee2d94b2fdfacc1b70", "committedDate": "2020-04-20T12:34:31Z", "message": "update readme"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NzEzODc3", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#pullrequestreview-396713877", "createdAt": "2020-04-20T18:39:30Z", "commit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODozOTozMFrOGIiVXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODo0NjowOFrOGIilcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNDMxOQ==", "bodyText": "For me that don't look like a full ORM,\nYou are using the PDO directly and with SQL.\nMicro ORM at most.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411604319", "createdAt": "2020-04-20T18:39:30Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNzU1NA==", "bodyText": "You are sorting an array, not the array of Fortunes objects.\nRead the requiriments:\nhttps://github.com/TechEmpower/FrameworkBenchmarks/wiki/Project-Information-Framework-Tests-Overview#requirements-3\nPlease update the code, or change the benchmark_config to raw db.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411607554", "createdAt": "2020-04-20T18:44:38Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');\n+        $this->pdo->fortune_test->execute();\n+        $arr = $this->pdo->fortune_test->fetchAll();\n+        foreach ($arr as $row) {\n+            $fortune[$row['id']] = $row['message'];\n+        }\n+        $fortune[0] = 'Additional fortune added at request time.';\n+        \\asort($fortune);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwODQzNA==", "bodyText": "All the db tests should use objects: db, updates and fortunes.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411608434", "createdAt": "2020-04-20T18:46:08Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');\n+        $this->pdo->fortune_test->execute();\n+        $arr = $this->pdo->fortune_test->fetchAll();\n+        foreach ($arr as $row) {\n+            $fortune[$row['id']] = $row['message'];\n+        }\n+        $fortune[0] = 'Additional fortune added at request time.';\n+        \\asort($fortune);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNzU1NA=="}, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2ODU3ODY4", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#pullrequestreview-396857868", "createdAt": "2020-04-20T22:30:40Z", "commit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjozMDo0MVrOGIqUYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMjozMDo0MVrOGIqUYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTczNTEzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    \"orm\": \"Full\",\n          \n          \n            \n                    \"orm\": \"Raw\",\n          \n      \n    \n    \n  \n\nIf you aren't using the ORM.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r411735136", "createdAt": "2020-04-20T22:30:41Z", "author": {"login": "joanhey"}, "path": "frameworks/PHP/simps/benchmark_config.json", "diffHunk": "@@ -0,0 +1,29 @@\n+{\n+  \"framework\": \"simps\",\n+  \"tests\": [\n+    {\n+      \"default\": {\n+        \"json_url\": \"/json\",\n+        \"plaintext_url\": \"/plaintext\",\n+        \"db_url\": \"/db\",\n+        \"fortune_url\": \"/fortunes\",\n+        \"update_url\": \"/updates/\",\n+        \"port\": 8080,\n+        \"approach\": \"Realistic\",\n+        \"classification\": \"Micro\",\n+        \"database\": \"mysql\",\n+        \"framework\": \"Simps\",\n+        \"language\": \"PHP\",\n+        \"flavor\": \"None\",\n+        \"orm\": \"Full\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "526107515a3721345b6cadee2d94b2fdfacc1b70"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4916e4a1a564cdbe418ea5aa8b689343fb9ded7e", "author": {"user": {"login": "sy-records", "name": "\u6c88\u5501"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/4916e4a1a564cdbe418ea5aa8b689343fb9ded7e", "committedDate": "2020-04-20T22:32:55Z", "message": "Update frameworks/PHP/simps/benchmark_config.json\n\nCo-Authored-By: Joan Miquel <joanhey@kumbiaphp.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbcd86f77e9c2b0e17246b7efed30d499b0b0b37", "author": {"user": {"login": "sy-records", "name": "\u6c88\u5501"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/cbcd86f77e9c2b0e17246b7efed30d499b0b0b37", "committedDate": "2020-04-21T03:48:29Z", "message": "add query_url"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NzA5NTc1", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#pullrequestreview-397709575", "createdAt": "2020-04-21T22:05:16Z", "commit": {"oid": "cbcd86f77e9c2b0e17246b7efed30d499b0b0b37"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMjowNToxNlrOGJadFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMjowNToxNlrOGJadFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjUyMzc5OQ==", "bodyText": "Need to select id here as well.\nOther than that, this is ready to go.", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5618#discussion_r412523799", "createdAt": "2020-04-21T22:05:16Z", "author": {"login": "nbrady-techempower"}, "path": "frameworks/PHP/simps/app/Model/DbModel.php", "diffHunk": "@@ -0,0 +1,97 @@\n+<?php\n+\n+declare(strict_types=1);\n+/**\n+ * This file is part of Simps.\n+ *\n+ * @link     https://simps.io\n+ * @document https://doc.simps.io\n+ * @license  https://github.com/simple-swoole/simps/blob/master/LICENSE\n+ */\n+\n+namespace App\\Model;\n+\n+use Simps\\DB\\BaseModel;\n+\n+class DbModel extends BaseModel\n+{\n+    public function fortunes()\n+    {\n+        $fortune = [];\n+        $this->pdo->fortune_test = $this->pdo->fortune_test ?? $this->pdo->prepare('SELECT id, message FROM Fortune');\n+        $this->pdo->fortune_test->execute();\n+        $arr = $this->pdo->fortune_test->fetchAll();\n+        foreach ($arr as $row) {\n+            $fortune[$row['id']] = $row['message'];\n+        }\n+        $fortune[0] = 'Additional fortune added at request time.';\n+        \\asort($fortune);\n+        return $fortune;\n+    }\n+\n+    public function updates(int $queries = 0)\n+    {\n+        $query_count = 1;\n+        if ($queries > 1) {\n+            $query_count = $queries > 500 ? 500 : $queries;\n+        }\n+\n+        $arr = [];\n+        $this->pdo->updates_test_select = $this->pdo->updates_test_select ?? $this->pdo->prepare(\n+                'SELECT randomNumber FROM World WHERE id = ?'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbcd86f77e9c2b0e17246b7efed30d499b0b0b37"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ef21f4f3f9171cdd7c1212b3e9765beaed0eb7f", "author": {"user": {"login": "sy-records", "name": "\u6c88\u5501"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/8ef21f4f3f9171cdd7c1212b3e9765beaed0eb7f", "committedDate": "2020-04-21T22:11:20Z", "message": "Update DbModel.php"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3885, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}