{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2NTU5OTM3", "number": 6248, "title": "[aiohttp] Use SQLAlchemy directly (rather than aiopg)", "bodyText": "One more update. This replaces aiopg with modern sqlalchemy. Because we are using asyncio this requires 1.4+.\nThis should obviously become the standard approach as 1.4 matures. It's also changed the API usage to actually use ORM, the previous code is only Core.\nI've also marked with TODOs very minor improvements that can be made once another beta release is made available.\n@samuelcolvin", "createdAt": "2020-12-29T16:51:12Z", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6248", "merged": true, "mergeCommit": {"oid": "fe99c809fc200ab5a74bd7dcbaf27af2de8530e4"}, "closed": true, "closedAt": "2021-01-08T16:37:34Z", "author": {"login": "Dreamsorcerer"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdqvPlggH2gAyNTQ2NTU5OTM3OjlhNTllZjQxYTVmYTA2NGQyYzMzNTcxOTlkNmYyNTViYjdhNTUyYmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABduJHkjAH2gAyNTQ2NTU5OTM3OjYwMDBhZDI1Mzk0NDNjNjYyZTE4NmJkMDRhNTNhNWI0MGRmMTM2NDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9a59ef41a5fa064d2c3357199d6f255bb7a552ba", "author": {"user": {"login": "Dreamsorcerer", "name": "Sam Bull"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/9a59ef41a5fa064d2c3357199d6f255bb7a552ba", "committedDate": "2020-12-29T00:04:37Z", "message": "Update aiohttp test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9e97736c1e1def15c994a6920cd2480644798d9", "author": {"user": {"login": "Dreamsorcerer", "name": "Sam Bull"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/e9e97736c1e1def15c994a6920cd2480644798d9", "committedDate": "2020-12-29T16:34:13Z", "message": "Update aiohttp to use async sqlalchemy."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89b559e5f08f6ff7ad68d97d9f06b6a264395fae", "author": {"user": {"login": "Dreamsorcerer", "name": "Sam Bull"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/89b559e5f08f6ff7ad68d97d9f06b6a264395fae", "committedDate": "2020-12-29T16:52:32Z", "message": "Merge branch 'master' into sqlalchemy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdf39ea2c3867406cb19c37b778c04d38d3f0912", "author": {"user": {"login": "Dreamsorcerer", "name": "Sam Bull"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/cdf39ea2c3867406cb19c37b778c04d38d3f0912", "committedDate": "2020-12-29T16:53:20Z", "message": "Update main.py"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NjI0MTI2", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6248#pullrequestreview-559624126", "createdAt": "2020-12-29T17:09:45Z", "commit": {"oid": "cdf39ea2c3867406cb19c37b778c04d38d3f0912"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxNzowOTo0NVrOIMT-yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQxNzowOTo0NVrOIMT-yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc4MTE5NQ==", "bodyText": "I'm not sure how these min/max size values translate into sqlalchemy directly..", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/6248#discussion_r549781195", "createdAt": "2020-12-29T17:09:45Z", "author": {"login": "Dreamsorcerer"}, "path": "frameworks/Python/aiohttp/app/main.py", "diffHunk": "@@ -52,16 +53,14 @@ async def db_ctx(app: web.Application):\n     min_size = max(int(max_size / 2), 1)\n     print(f'connection pool: min size: {min_size}, max size: {max_size}, orm: {CONNECTION_ORM}')\n     if CONNECTION_ORM:\n-        app['pg'] = await aiopg.sa.create_engine(dsn=dsn, minsize=min_size, maxsize=max_size, loop=app.loop)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf39ea2c3867406cb19c37b778c04d38d3f0912"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dcd254c87fef93ed739583a6ee95880fa9e784f", "author": {"user": {"login": "Dreamsorcerer", "name": "Sam Bull"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/4dcd254c87fef93ed739583a6ee95880fa9e784f", "committedDate": "2021-01-08T12:29:14Z", "message": "Update drivername"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "222ab9d329ff164a4d7a6f9765031911a3f9af25", "author": {"user": {"login": "Dreamsorcerer", "name": "Sam Bull"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/222ab9d329ff164a4d7a6f9765031911a3f9af25", "committedDate": "2021-01-08T12:51:39Z", "message": "Stop cheating in ORM updates."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6000ad2539443c662e186bd04a53a5b40df13642", "author": {"user": {"login": "Dreamsorcerer", "name": "Sam Bull"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/6000ad2539443c662e186bd04a53a5b40df13642", "committedDate": "2021-01-08T13:55:10Z", "message": "Remove unused import."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3915, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}