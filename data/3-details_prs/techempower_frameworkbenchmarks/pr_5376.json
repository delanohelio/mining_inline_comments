{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5ODU5Nzg4", "number": 5376, "title": "Added concurrent queries & test for Crystal/kemal", "bodyText": "This patch also fixed up the existing implementation to adhere by the rule to select the whole row instead of just selecting the random number column.", "createdAt": "2020-01-07T07:22:03Z", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5376", "merged": true, "mergeCommit": {"oid": "07f2e5892ef259008619f284df6a2b73d3da64a5"}, "closed": true, "closedAt": "2020-01-07T16:05:47Z", "author": {"login": "snluu"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb37bKhAH2gAyMzU5ODU5Nzg4OmM3MGJmMDQzNDA5NzUzMTQ3ZWQ5OWU2Y2VhOGIyYjRhYTllY2FkN2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb37ywSAFqTMzOTA3MTc1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c70bf043409753147ed99e6cea8b2b4aa9ecad7d", "author": {"user": {"login": "snluu", "name": "Steven Luu"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/c70bf043409753147ed99e6cea8b2b4aa9ecad7d", "committedDate": "2020-01-07T07:14:50Z", "message": "Added concurrent query impl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8b95f3abc9d12c954a2e79e78201831935cc536", "author": {"user": {"login": "snluu", "name": "Steven Luu"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/a8b95f3abc9d12c954a2e79e78201831935cc536", "committedDate": "2020-01-07T07:18:42Z", "message": "Create kemal-concurrent-queries.dockerfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d153e6f3089d36b613291b46debe684b9435df99", "author": {"user": {"login": "snluu", "name": "Steven Luu"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/d153e6f3089d36b613291b46debe684b9435df99", "committedDate": "2020-01-07T07:20:47Z", "message": "Added concurrent-queries test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96ba718b2f64ffb01139a585f86c56c17b686131", "author": {"user": {"login": "snluu", "name": "Steven Luu"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/96ba718b2f64ffb01139a585f86c56c17b686131", "committedDate": "2020-01-07T07:29:02Z", "message": "Updated concurrency to 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac8dabf2393290e21c440cb3bcac4ad190d08fb3", "author": {"user": {"login": "snluu", "name": "Steven Luu"}}, "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/ac8dabf2393290e21c440cb3bcac4ad190d08fb3", "committedDate": "2020-01-07T07:30:18Z", "message": "Updated pool size"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDcxNzU0", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5376#pullrequestreview-339071754", "createdAt": "2020-01-07T07:40:35Z", "commit": {"oid": "ac8dabf2393290e21c440cb3bcac4ad190d08fb3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo0MDozNlrOFaxydA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwNzo0MDozNlrOFaxydA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyMzAyOA==", "bodyText": "Time.now is deprecated in favor of Time.utc", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5376#discussion_r363623028", "createdAt": "2020-01-07T07:40:36Z", "author": {"login": "snluu"}, "path": "frameworks/Crystal/kemal/server-postgres.cr", "diffHunk": "@@ -37,14 +38,19 @@ private def fortunes\n end\n \n private def sanitized_query_count(request)\n-  queries = request.params.query[\"queries\"].as(String)\n+  queries = request.params.query[\"queries\"]? || \"1\"\n   queries = queries.to_i? || 1\n   queries.clamp(1..500)\n end\n \n+private def sanitized_concurrency(request)\n+  concurrency = request.params.query[\"concurrency\"]? || \"1\"\n+  concurrency.to_i? || 1\n+end\n+\n before_all do |env|\n   env.response.headers[\"Server\"] = \"Kemal\"\n-  env.response.headers[\"Date\"] = HTTP.format_time(Time.now)\n+  env.response.headers[\"Date\"] = HTTP.format_time(Time.utc)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac8dabf2393290e21c440cb3bcac4ad190d08fb3"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3899, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}