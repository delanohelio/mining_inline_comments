{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyOTMwMjg1", "number": 4914, "title": "Adjust bStats data sending delay", "bodyText": "Many servers tend to restart at a fixed time at xx:00 which causes an uneven distribution of requests on the bStats backend. To circumvent this problem, this commit introduces some randomness for the initial and second delay.\nThis matches the behavior of the bStats Metrics class version 1.8.", "createdAt": "2020-12-19T13:58:41Z", "url": "https://github.com/PaperMC/Paper/pull/4914", "merged": true, "mergeCommit": {"oid": "d5f3458c8c30f3dd116de20a07d5ed1cdbfa7611"}, "closed": true, "closedAt": "2020-12-20T15:41:00Z", "author": {"login": "Bastian"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdn46p_AFqTU1NTk4MzcwNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoDPElgFqTU1NjAyODM3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1OTgzNzA3", "url": "https://github.com/PaperMC/Paper/pull/4914#pullrequestreview-555983707", "createdAt": "2020-12-20T03:39:01Z", "commit": {"oid": "0a64b744fb4c079ad6f7a911cd9ab6630424fbeb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQwMzozOTowMVrOIJAeoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQwMzozOTowMVrOIJAeoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMxNTkzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            +        // WARNING: You must not modify and part of this Metrics class, including the submit delay or frequency!\n          \n          \n            \n            +        // WARNING: You must not modify any part of this Metrics class, including the submit delay or frequency!", "url": "https://github.com/PaperMC/Paper/pull/4914#discussion_r546315936", "createdAt": "2020-12-20T03:39:01Z", "author": {"login": "kashike"}, "path": "Spigot-Server-Patches/0005-Paper-Metrics.patch", "diffHunk": "@@ -107,16 +113,16 @@ index 0000000000000000000000000000000000000000..e4923ca371012188793b284cb0ed4280\n +     * Starts the Scheduler which submits our data every 30 minutes.\n +     */\n +    private void startSubmitting() {\n-+        final Timer timer = new Timer(true);\n-+        timer.scheduleAtFixedRate(new TimerTask() {\n-+            @Override\n-+            public void run() {\n-+                submitData();\n-+            }\n-+        }, 1000 * 60 * 5, 1000 * 60 * 30);\n-+        // Submit the data every 30 minutes, first time after 5 minutes to give other plugins enough time to start\n-+        // WARNING: Changing the frequency has no effect but your plugin WILL be blocked/deleted!\n-+        // WARNING: Just don't do it!\n++        final Runnable submitTask = this::submitData;\n++\n++        // Many servers tend to restart at a fixed time at xx:00 which causes an uneven distribution of requests on the\n++        // bStats backend. To circumvent this problem, we introduce some randomness into the initial and second delay.\n++        // WARNING: You must not modify and part of this Metrics class, including the submit delay or frequency!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a64b744fb4c079ad6f7a911cd9ab6630424fbeb"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bae0d8c3b22b75f15e60044dccb8a2ef865eefe5", "author": {"user": {"login": "Bastian", "name": "Bastian Oppermann"}}, "url": "https://github.com/PaperMC/Paper/commit/bae0d8c3b22b75f15e60044dccb8a2ef865eefe5", "committedDate": "2020-12-20T15:32:03Z", "message": "Adjust bStats data sending delay\n\nMany servers tend to restart at a fixed time at xx:00 which causes an\nuneven distribution of requests on the bStats backend. To circumvent\nthis problem, this commit introduces some randomness to the initial\nand second delay."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a64b744fb4c079ad6f7a911cd9ab6630424fbeb", "author": {"user": {"login": "Bastian", "name": "Bastian Oppermann"}}, "url": "https://github.com/PaperMC/Paper/commit/0a64b744fb4c079ad6f7a911cd9ab6630424fbeb", "committedDate": "2020-12-19T13:57:44Z", "message": "Adjust bStats data sending delay\n\nMany servers tend to restart at a fixed time at xx:00 which causes an\nuneven distribution of requests on the bStats backend. To circumvent\nthis problem, this commit introduces some randomness to the initial\nand second delay."}, "afterCommit": {"oid": "bae0d8c3b22b75f15e60044dccb8a2ef865eefe5", "author": {"user": {"login": "Bastian", "name": "Bastian Oppermann"}}, "url": "https://github.com/PaperMC/Paper/commit/bae0d8c3b22b75f15e60044dccb8a2ef865eefe5", "committedDate": "2020-12-20T15:32:03Z", "message": "Adjust bStats data sending delay\n\nMany servers tend to restart at a fixed time at xx:00 which causes an\nuneven distribution of requests on the bStats backend. To circumvent\nthis problem, this commit introduces some randomness to the initial\nand second delay."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDI4Mzcy", "url": "https://github.com/PaperMC/Paper/pull/4914#pullrequestreview-556028372", "createdAt": "2020-12-20T15:40:23Z", "commit": {"oid": "bae0d8c3b22b75f15e60044dccb8a2ef865eefe5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1368, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}