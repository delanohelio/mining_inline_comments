{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NTAwMzY5", "number": 4238, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODo0ODo1M1rOEd2qCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODo0ODo1M1rOEd2qCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NzM5NjU2OnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0568-Fix-NPE-in-getBedSpawnLocation.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODo0ODo1M1rOHJRCjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODo0ODo1M1rOHJRCjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ3ODQxMw==", "bodyText": "WorldServer -> CraftWorld -> WorldServer?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            +            Optional<Vec3D> spawnLoc = EntityHuman.getBed(((CraftWorld) world.getWorld()).getHandle(), bed, getHandle().getSpawnAngle(), getHandle().isSpawnForced(), true); // Paper - Fix NPE in getBedSpawnLocation\n          \n          \n            \n            +            Optional<Vec3D> spawnLoc = EntityHuman.getBed(world, bed, getHandle().getSpawnAngle(), getHandle().isSpawnForced(), true); // Paper - Fix NPE in getBedSpawnLocation", "url": "https://github.com/PaperMC/Paper/pull/4238#discussion_r479478413", "createdAt": "2020-08-28T18:48:53Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0568-Fix-NPE-in-getBedSpawnLocation.patch", "diffHunk": "@@ -0,0 +1,28 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: JRoy <joshroy126@gmail.com>\n+Date: Fri, 28 Aug 2020 12:01:25 -0400\n+Subject: [PATCH] Fix NPE in getBedSpawnLocation\n+\n+\n+diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java\n+index b97be51c6859fa2d45c07c853980adb05d11b65f..11d0c040df933413284dfbe7a6b48a265224b667 100644\n+--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java\n++++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java\n+@@ -874,14 +874,14 @@ public class CraftPlayer extends CraftHumanEntity implements Player {\n+ \n+     @Override\n+     public Location getBedSpawnLocation() {\n+-        World world = getHandle().server.getWorldServer(getHandle().getSpawnDimension()).getWorld();\n++        WorldServer world = getHandle().server.getWorldServer(getHandle().getSpawnDimension()); // Paper - Fix NPE in getBedSpawnLocation\n+         BlockPosition bed = getHandle().getSpawn();\n+ \n+         if (world != null && bed != null) {\n+-            Optional<Vec3D> spawnLoc = EntityHuman.getBed(((CraftWorld) world).getHandle(), bed, getHandle().getSpawnAngle(), getHandle().isSpawnForced(), true);\n++            Optional<Vec3D> spawnLoc = EntityHuman.getBed(((CraftWorld) world.getWorld()).getHandle(), bed, getHandle().getSpawnAngle(), getHandle().isSpawnForced(), true); // Paper - Fix NPE in getBedSpawnLocation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af6c343817c9c7ca48096e1ed781ebbc0de7cf5f"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1800, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}