{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NzUzMTI0", "number": 2819, "title": "Add effect to block break naturally", "bodyText": "Adds another break naturally method that enables the plugin dev to easily trigger the block break particle animation effect and sound when breaking a block.", "createdAt": "2020-01-02T18:39:29Z", "url": "https://github.com/PaperMC/Paper/pull/2819", "merged": true, "mergeCommit": {"oid": "617f6033e79993800a088fe32c4d5103fbbdc099"}, "closed": true, "closedAt": "2020-01-19T02:10:07Z", "author": {"login": "BillyGalbreath"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2ePbzgFqTMzNzc5NjE4Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7uOFugH2gAyMzU4NzUzMTI0OmU5NmYwZGU1ODZjMTVmYjE1ZmQ1ZGZmYjc4ZTYwYzA4MDYwMTM1YTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3Nzk2MTgz", "url": "https://github.com/PaperMC/Paper/pull/2819#pullrequestreview-337796183", "createdAt": "2020-01-02T18:40:50Z", "commit": {"oid": "9b72f34c100933655e74316c4d0a8003cc27f00f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxODo0MDo1MVrOFZyNrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxODo0MDo1MVrOFZyNrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjU4MTQyMw==", "bodyText": "magic numbers are pretty scary", "url": "https://github.com/PaperMC/Paper/pull/2819#discussion_r362581423", "createdAt": "2020-01-02T18:40:51Z", "author": {"login": "Spottedleaf"}, "path": "Spigot-Server-Patches/0420-Add-effect-to-block-break-naturally.patch", "diffHunk": "@@ -0,0 +1,34 @@\n+From f59a300db3dba8d827fe78eb0207fb7a32cbf612 Mon Sep 17 00:00:00 2001\n+From: William Blake Galbreath <Blake.Galbreath@GMail.com>\n+Date: Thu, 2 Jan 2020 12:25:07 -0600\n+Subject: [PATCH] Add effect to block break naturally\n+\n+\n+diff --git a/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java b/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java\n+index a667e58ed..f6aa78e9e 100644\n+--- a/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java\n++++ b/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java\n+@@ -607,12 +607,20 @@ public class CraftBlock implements Block {\n+ \n+     @Override\n+     public boolean breakNaturally(ItemStack item) {\n++        // Paper start\n++        return breakNaturally(item, false);\n++    }\n++\n++    @Override\n++    public boolean breakNaturally(ItemStack item, boolean triggerEffect) {\n++        // Paper end\n+         // Order matters here, need to drop before setting to air so skulls can get their data\n+         net.minecraft.server.Block block = this.getNMSBlock();\n+         boolean result = false;\n+ \n+         if (block != null && block != Blocks.AIR) {\n+             net.minecraft.server.Block.dropItems(getNMS(), world.getMinecraftWorld(), position, world.getTileEntity(position), null, CraftItemStack.asNMSCopy(item));\n++            if (triggerEffect) world.triggerEffect(2001, position, net.minecraft.server.Block.getCombinedId(block.getBlockData())); // Paper", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b72f34c100933655e74316c4d0a8003cc27f00f"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0OTY0OTQ5", "url": "https://github.com/PaperMC/Paper/pull/2819#pullrequestreview-344964949", "createdAt": "2020-01-18T22:08:10Z", "commit": {"oid": "5ed946368eec81d5dcfd221b4bfe5c690f474354"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daccd672b1ec6792920f0ef084d2a47d680929d3", "author": {"user": {"login": "BillyGalbreath", "name": "BillyGalbreath"}}, "url": "https://github.com/PaperMC/Paper/commit/daccd672b1ec6792920f0ef084d2a47d680929d3", "committedDate": "2020-01-19T02:05:24Z", "message": "Add effect to block break naturally"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e96f0de586c15fb15fd5dffb78e60c08060135a3", "author": {"user": {"login": "BillyGalbreath", "name": "BillyGalbreath"}}, "url": "https://github.com/PaperMC/Paper/commit/e96f0de586c15fb15fd5dffb78e60c08060135a3", "committedDate": "2020-01-19T02:07:29Z", "message": "Magic numbers are scary"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1300, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}