{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0NjgxNTc5", "number": 3311, "title": "Anti Xray: Obfuscate blocks touching lava feature", "bodyText": "Resolves #2940.\nObfuscating blocks touching lava can be disabled by setting the new config\noption anti-xray.lava-obscures in the paper world config to false.\nClearing lava with a bucket or replacing it by a transparent block already\ntriggers block updates for nearby blocks.", "createdAt": "2020-05-07T13:19:10Z", "url": "https://github.com/PaperMC/Paper/pull/3311", "merged": true, "mergeCommit": {"oid": "efd90b1e9c81c39b6b56746bf501ff3682637055"}, "closed": true, "closedAt": "2020-10-16T21:08:34Z", "author": {"login": "stonar96"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABce9PNfAFqTQwNzQ2NjA2Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTM8tVAFqTUxMDc5ODc1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NDY2MDYz", "url": "https://github.com/PaperMC/Paper/pull/3311#pullrequestreview-407466063", "createdAt": "2020-05-07T13:23:27Z", "commit": {"oid": "2af5c94726db0fb035772cca25c5d3ee1a91e97a"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMzoyMzoyOFrOGR-TBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMzoyNDoyNFrOGR-VmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ5OTY1Mw==", "bodyText": "Use default values here and reference the variable as defaults when getting the values.\nEDIT: You apparently can't resolve conversations in reviews, so ignore this :)", "url": "https://github.com/PaperMC/Paper/pull/3311#discussion_r421499653", "createdAt": "2020-05-07T13:23:28Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0384-Anti-Xray.patch", "diffHunk": "@@ -28,6 +28,7 @@ index 48676152152faf7a7b9524ac37d8b4a8c32c4e2c..ca2ac17747d4f2acf1df056759c5c182\n +    public EngineMode engineMode;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2af5c94726db0fb035772cca25c5d3ee1a91e97a"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTUwMDMxMg==", "bodyText": "Is changing default behaviour after so many versions a good idea?", "url": "https://github.com/PaperMC/Paper/pull/3311#discussion_r421500312", "createdAt": "2020-05-07T13:24:24Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0384-Anti-Xray.patch", "diffHunk": "@@ -38,6 +39,7 @@ index 48676152152faf7a7b9524ac37d8b4a8c32c4e2c..ca2ac17747d4f2acf1df056759c5c182\n +        maxChunkSectionIndex = getInt(\"anti-xray.max-chunk-section-index\", 3);\n +        maxChunkSectionIndex = maxChunkSectionIndex > 15 ? 15 : maxChunkSectionIndex;\n +        updateRadius = getInt(\"anti-xray.update-radius\", 2);\n++        lavaObscures = getBoolean(\"anti-xray.lava-obscures\", true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2af5c94726db0fb035772cca25c5d3ee1a91e97a"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NjYyOTI3", "url": "https://github.com/PaperMC/Paper/pull/3311#pullrequestreview-417662927", "createdAt": "2020-05-25T12:00:31Z", "commit": {"oid": "94a8ee47f18efa81ee78a89bbabbd535f651b6b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMjowMDozMVrOGZ-2Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxMjowMDozMVrOGZ-2Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg5NzMwNw==", "bodyText": "Comparing against stationary lava is not enough. The top-most stationary lava block will reveal 2 top texels (not fill the block fully).\nThere are 2 ores that are visible this way using the default vanilla texture pack: Emerald and Nether Quartz ore. Not to mention custom modpacks that may make other ores visible in this case by drawing ore textures closer to the block edges.\nWhether or not custom legitimate texture packs should be considered is up to debate. But I believe current patch will wrongly hide Emerald/Quartz ore, if so - it's hiding otherwise visible ores.", "url": "https://github.com/PaperMC/Paper/pull/3311#discussion_r429897307", "createdAt": "2020-05-25T12:00:31Z", "author": {"login": "VADemon"}, "path": "Spigot-Server-Patches/0384-Anti-Xray.patch", "diffHunk": "@@ -208,7 +210,8 @@ index 0000000000000000000000000000000000000000..9c017eb027ce52ea6a2414af2d0190b3\n +\n +            if (blockData != null) {\n +                solidGlobal[i] = blockData.getBlock().isOccluding(blockData, emptyChunk, zeroPos)\n-+                    && blockData.getBlock() != Blocks.SPAWNER && blockData.getBlock() != Blocks.BARRIER && blockData.getBlock() != Blocks.SHULKER_BOX;\n++                    && blockData.getBlock() != Blocks.SPAWNER && blockData.getBlock() != Blocks.BARRIER && blockData.getBlock() != Blocks.SHULKER_BOX || paperWorldConfig.lavaObscures && blockData == Blocks.LAVA.getBlockData();\n++                // Comparing blockData == Blocks.LAVA.getBlockData() instead of blockData.getBlock() == Blocks.LAVA ensures that only \"stationary lava\" is used", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a8ee47f18efa81ee78a89bbabbd535f651b6b2"}, "originalPosition": 53}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94a8ee47f18efa81ee78a89bbabbd535f651b6b2", "author": {"user": {"login": "stonar96", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/94a8ee47f18efa81ee78a89bbabbd535f651b6b2", "committedDate": "2020-05-07T15:04:36Z", "message": "Set lava-obscures to false by default\n\nServer owners should also modify their hidden-blocks list when enabling this\noption, such that it only contains ores with stone texture at the upper edges."}, "afterCommit": {"oid": "9843c4f5c0fbd4f288f1df667bb489f2d3bed212", "author": {"user": {"login": "stonar96", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/9843c4f5c0fbd4f288f1df667bb489f2d3bed212", "committedDate": "2020-06-09T01:34:01Z", "message": "Set lava-obscures to false by default\n\nServer owners should also modify their hidden-blocks list when enabling this\noption, such that it only contains ores with stone texture at the upper edges."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9843c4f5c0fbd4f288f1df667bb489f2d3bed212", "author": {"user": {"login": "stonar96", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/9843c4f5c0fbd4f288f1df667bb489f2d3bed212", "committedDate": "2020-06-09T01:34:01Z", "message": "Set lava-obscures to false by default\n\nServer owners should also modify their hidden-blocks list when enabling this\noption, such that it only contains ores with stone texture at the upper edges."}, "afterCommit": {"oid": "42f9cbccccf05e270f670857c7e7375f2085f93b", "author": {"user": {"login": "stonar96", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/42f9cbccccf05e270f670857c7e7375f2085f93b", "committedDate": "2020-09-29T10:54:22Z", "message": "Set lava-obscures to false by default\n\nServer owners should also modify their hidden-blocks list when enabling this\noption, such that it only contains ores with stone texture at the upper edges."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d66b6264b189a54bd6bbe1828d33a2838641d80", "author": {"user": {"login": "stonar96", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/1d66b6264b189a54bd6bbe1828d33a2838641d80", "committedDate": "2020-10-16T20:08:43Z", "message": "Obfuscate blocks touching lava\n\nResolves #2940.\nObfuscating blocks touching lava can be disabled by setting the new config\noption anti-xray.lava-obscures in the paper world config to false.\nClearing lava with a bucket or replacing it by a transparent block already\ntriggers block updates for nearby blocks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "722805a40e1f2b742ed3f3bbb813fa678afe0fc9", "author": {"user": {"login": "stonar96", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/722805a40e1f2b742ed3f3bbb813fa678afe0fc9", "committedDate": "2020-10-16T20:17:38Z", "message": "Set lava-obscures to false by default\n\nServer owners should also modify their hidden-blocks list when enabling this\noption, such that it only contains ores with stone texture at the upper edges."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "42f9cbccccf05e270f670857c7e7375f2085f93b", "author": {"user": {"login": "stonar96", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/42f9cbccccf05e270f670857c7e7375f2085f93b", "committedDate": "2020-09-29T10:54:22Z", "message": "Set lava-obscures to false by default\n\nServer owners should also modify their hidden-blocks list when enabling this\noption, such that it only contains ores with stone texture at the upper edges."}, "afterCommit": {"oid": "722805a40e1f2b742ed3f3bbb813fa678afe0fc9", "author": {"user": {"login": "stonar96", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/722805a40e1f2b742ed3f3bbb813fa678afe0fc9", "committedDate": "2020-10-16T20:17:38Z", "message": "Set lava-obscures to false by default\n\nServer owners should also modify their hidden-blocks list when enabling this\noption, such that it only contains ores with stone texture at the upper edges."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNzk4NzUx", "url": "https://github.com/PaperMC/Paper/pull/3311#pullrequestreview-510798751", "createdAt": "2020-10-16T21:06:58Z", "commit": {"oid": "722805a40e1f2b742ed3f3bbb813fa678afe0fc9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1868, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}