{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5MDI0MjMz", "number": 4820, "title": "Add BlockFailedDispenseEvent", "bodyText": "reviving #3205 since the repo is borked or smth?\nalso added a way to disable the sound effect", "createdAt": "2020-11-28T23:43:17Z", "url": "https://github.com/PaperMC/Paper/pull/4820", "merged": true, "mergeCommit": {"oid": "c7cdf255bff157a7c9bd73997c393970f817c704"}, "closed": true, "closedAt": "2021-01-03T19:40:13Z", "author": {"login": "MiniDigger"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhFHAjgFqTU0MDQyNDU2Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdsm_uZAFqTU2MDcyMDU1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNDI0NTYz", "url": "https://github.com/PaperMC/Paper/pull/4820#pullrequestreview-540424563", "createdAt": "2020-11-28T23:53:55Z", "commit": {"oid": "b3241e58ffe8daa417d485041a43e95d8df7d3ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQyMzo1Mzo1NVrOH7eEag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQyMzo1Mzo1NVrOH7eEag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMDY4Mg==", "bodyText": "Would personally move that to a protected method that returns if it should play the effect.\nprotected boolean triggerBlockFailedDispenseEvent(BlockPosition blockPosition)..\nAnd call it in the BlockDropper as well.", "url": "https://github.com/PaperMC/Paper/pull/4820#discussion_r532120682", "createdAt": "2020-11-28T23:53:55Z", "author": {"login": "yannicklamprecht"}, "path": "Spigot-Server-Patches/0604-Implemented-BlockFailedDispenseEvent.patch", "diffHunk": "@@ -0,0 +1,46 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: TheViperShow <29604693+TheViperShow@users.noreply.github.com>\n+Date: Wed, 22 Apr 2020 09:40:38 +0200\n+Subject: [PATCH] Implemented BlockFailedDispenseEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/BlockDispenser.java b/src/main/java/net/minecraft/server/BlockDispenser.java\n+index c239265581972d67c7567d7545d62499ebadd195..08f16fe32c12cb22ee5d793ac40b83c9398faf74 100644\n+--- a/src/main/java/net/minecraft/server/BlockDispenser.java\n++++ b/src/main/java/net/minecraft/server/BlockDispenser.java\n+@@ -48,7 +48,14 @@ public class BlockDispenser extends BlockTileEntity {\n+         int i = tileentitydispenser.h();\n+ \n+         if (i < 0) {\n+-            worldserver.triggerEffect(1001, blockposition, 0);\n++            // Paper start - BlockFailedDispenseEvent is called here\n++            org.bukkit.block.Block block = worldserver.getWorld().getBlockAt(blockposition.getX(), blockposition.getY(), blockposition.getZ());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3241e58ffe8daa417d485041a43e95d8df7d3ed"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3241e58ffe8daa417d485041a43e95d8df7d3ed", "author": {"user": {"login": "TheViperShow", "name": "TheViperShow"}}, "url": "https://github.com/PaperMC/Paper/commit/b3241e58ffe8daa417d485041a43e95d8df7d3ed", "committedDate": "2020-11-28T23:40:38Z", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>"}, "afterCommit": {"oid": "79067c9aff5fd1cb81f9455d60bb795b8fccf182", "author": {"user": {"login": "TheViperShow", "name": "TheViperShow"}}, "url": "https://github.com/PaperMC/Paper/commit/79067c9aff5fd1cb81f9455d60bb795b8fccf182", "committedDate": "2020-12-02T23:36:18Z", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNjc0ODMw", "url": "https://github.com/PaperMC/Paper/pull/4820#pullrequestreview-560674830", "createdAt": "2021-01-03T07:40:13Z", "commit": {"oid": "79067c9aff5fd1cb81f9455d60bb795b8fccf182"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79067c9aff5fd1cb81f9455d60bb795b8fccf182", "author": {"user": {"login": "TheViperShow", "name": "TheViperShow"}}, "url": "https://github.com/PaperMC/Paper/commit/79067c9aff5fd1cb81f9455d60bb795b8fccf182", "committedDate": "2020-12-02T23:36:18Z", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>"}, "afterCommit": {"oid": "3d076eed418e40de90771933563f2d273f629bbe", "author": {"user": {"login": "TheViperShow", "name": "TheViperShow"}}, "url": "https://github.com/PaperMC/Paper/commit/3d076eed418e40de90771933563f2d273f629bbe", "committedDate": "2021-01-03T19:30:20Z", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNzIwMzcy", "url": "https://github.com/PaperMC/Paper/pull/4820#pullrequestreview-560720372", "createdAt": "2021-01-03T19:32:10Z", "commit": {"oid": "3d076eed418e40de90771933563f2d273f629bbe"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5da794766ffa280add97ec759ffff7d67be3eb7", "author": {"user": {"login": "TheViperShow", "name": "TheViperShow"}}, "url": "https://github.com/PaperMC/Paper/commit/c5da794766ffa280add97ec759ffff7d67be3eb7", "committedDate": "2021-01-03T19:35:30Z", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d076eed418e40de90771933563f2d273f629bbe", "author": {"user": {"login": "TheViperShow", "name": "TheViperShow"}}, "url": "https://github.com/PaperMC/Paper/commit/3d076eed418e40de90771933563f2d273f629bbe", "committedDate": "2021-01-03T19:30:20Z", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>"}, "afterCommit": {"oid": "c5da794766ffa280add97ec759ffff7d67be3eb7", "author": {"user": {"login": "TheViperShow", "name": "TheViperShow"}}, "url": "https://github.com/PaperMC/Paper/commit/c5da794766ffa280add97ec759ffff7d67be3eb7", "committedDate": "2021-01-03T19:35:30Z", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNzIwNTU2", "url": "https://github.com/PaperMC/Paper/pull/4820#pullrequestreview-560720556", "createdAt": "2021-01-03T19:35:54Z", "commit": {"oid": "c5da794766ffa280add97ec759ffff7d67be3eb7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1510, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}