{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMTQxNjkx", "number": 3115, "title": "Port 20w15a pathfinding optimizations", "bodyText": "Mojang decided to remove their usage of streams for brain AI used for Villagers, this ports that change. I am missing the serialization diff, wasn't able to figure that one out.\nFor reference:\n20w14a on left, 20w15a on right.\nhttps://www.diffchecker.com/3R51lUh8\nMaking this draft while I fix comments/formatting.", "createdAt": "2020-04-09T00:14:39Z", "url": "https://github.com/PaperMC/Paper/pull/3115", "merged": true, "mergeCommit": {"oid": "c096fe19fa07bebcd78b25ee6b84f62f45d64e19"}, "closed": true, "closedAt": "2020-04-12T21:12:47Z", "author": {"login": "Callahhh"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVxOmLgFqTM5MDQxNTUyNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXAuXXgH2gAyNDAxMTQxNjkxOmMwOTZmZTE5ZmEwN2JlYmNkNzhiMjVlZTZiODRmNjJmNDVkNjRlMTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNDE1NTI1", "url": "https://github.com/PaperMC/Paper/pull/3115#pullrequestreview-390415525", "createdAt": "2020-04-09T00:19:47Z", "commit": {"oid": "83fbe4274efc612b26105c3dbe9a38b40009e352"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwMDoxOTo0N1rOGDFbIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwMDoxOTo0N1rOGDFbIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg4Nzc3Nw==", "bodyText": "import diff", "url": "https://github.com/PaperMC/Paper/pull/3115#discussion_r405887777", "createdAt": "2020-04-09T00:19:47Z", "author": {"login": "Spottedleaf"}, "path": "Spigot-Server-Patches/0460-Port-20w15a-pathfinding-optimizations.patch", "diffHunk": "@@ -0,0 +1,194 @@\n+From ed63b5ff1a14791d93100a91855283728eec3f7b Mon Sep 17 00:00:00 2001\n+From: Callahan <mr.callahhh@gmail.com>\n+Date: Wed, 8 Apr 2020 18:00:17 -0500\n+Subject: [PATCH] Port 20w15a pathfinding optimizations\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/BehaviorController.java b/src/main/java/net/minecraft/server/BehaviorController.java\n+index a1883eba6..2ed58fcb9 100644\n+--- a/src/main/java/net/minecraft/server/BehaviorController.java\n++++ b/src/main/java/net/minecraft/server/BehaviorController.java\n+@@ -10,6 +10,7 @@ import com.mojang.datafixers.types.DynamicOps;\n+ import com.mojang.datafixers.util.Pair;\n+ import java.util.Collection;\n+ import java.util.Iterator;\n++import java.util.List;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83fbe4274efc612b26105c3dbe9a38b40009e352"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNTY0NjEz", "url": "https://github.com/PaperMC/Paper/pull/3115#pullrequestreview-390564613", "createdAt": "2020-04-09T07:50:48Z", "commit": {"oid": "3ba709c12917d3e08ecd8f69e8a490fafd636321"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNzkyMDY1", "url": "https://github.com/PaperMC/Paper/pull/3115#pullrequestreview-390792065", "createdAt": "2020-04-09T13:29:32Z", "commit": {"oid": "3ba709c12917d3e08ecd8f69e8a490fafd636321"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06044e24584c48a6c8380872a250275b06418b6d", "author": {"user": {"login": "Callahhh", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/06044e24584c48a6c8380872a250275b06418b6d", "committedDate": "2020-04-12T19:43:07Z", "message": "Async command map building\n\nReduces lag created on login and world change for sending the command map to client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97b1cc361b8ce14e6ad45d3c84e997613a90722b", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/97b1cc361b8ce14e6ad45d3c84e997613a90722b", "committedDate": "2020-04-12T19:56:03Z", "message": "Allow shutting down server during a watchdog hang gracefully\n\nIf the request to shut down the server is received while we are in\na watchdog hang, immediately treat it as a crash and begin the shutdown\nprocess. Shutdown process is now improved to also shutdown cleanly when\nnot using restart scripts either.\n\nIf a server is deadlocked, a server owner can send SIGUP (or any other signal\nthe JVM understands to shut down as it currently does) and the watchdog\nwill no longer need to wait until the full timeout, allowing you to trigger\na close process and try to shut the server down gracefully, saving player and\nworld data.\n\nPreviously there was no way to trigger this outside of waiting for a full watchdog\ntimeout, which may be set to a really long time..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df8eedeed06e87e72b08a6472b5569b53f8b14bd", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/df8eedeed06e87e72b08a6472b5569b53f8b14bd", "committedDate": "2020-04-12T20:50:34Z", "message": "Restore Optimize Pathfinding patch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "832687de704f645ddfd5e9cbc7a667c878ef8f14", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/832687de704f645ddfd5e9cbc7a667c878ef8f14", "committedDate": "2020-04-12T20:50:50Z", "message": "Restore preventing saving bad entities patch to full effect"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c096fe19fa07bebcd78b25ee6b84f62f45d64e19", "author": {"user": {"login": "Callahhh", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/c096fe19fa07bebcd78b25ee6b84f62f45d64e19", "committedDate": "2020-04-12T20:56:59Z", "message": "Port 20w15a Villager AI optimizations"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1254, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}