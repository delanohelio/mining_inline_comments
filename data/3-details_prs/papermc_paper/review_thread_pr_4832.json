{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxNDE0ODg2", "number": 4832, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0yNFQwODowMjo1OVrOGBsQ7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0yNFQwODowNDo0M1rOGBsTgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDA0NDI2OTkwOnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0741-Add-cause-to-Weather-ThunderChangeEvents.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0yNFQwODowMjo1OVrOJgOAzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0yNFQwODowMjo1OVrOJgOAzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNzc2Mzc5MA==", "bodyText": "No, this happens when players go to sleep to skip the night.", "url": "https://github.com/PaperMC/Paper/pull/4832#discussion_r637763790", "createdAt": "2021-05-24T08:02:59Z", "author": {"login": "kennytv"}, "path": "Spigot-Server-Patches/0741-Add-cause-to-Weather-ThunderChangeEvents.patch", "diffHunk": "@@ -0,0 +1,118 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 2 Dec 2020 18:23:26 -0800\n+Subject: [PATCH] Add cause to Weather/ThunderChangeEvents\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/level/WorldServer.java b/src/main/java/net/minecraft/server/level/WorldServer.java\n+index 6aace2155258d8257d53ebfcb20c37ea7497c02c..fe0afd4959fd0f5d99a20a42f01d9700a472bcec 100644\n+--- a/src/main/java/net/minecraft/server/level/WorldServer.java\n++++ b/src/main/java/net/minecraft/server/level/WorldServer.java\n+@@ -419,8 +419,8 @@ public class WorldServer extends World implements GeneratorAccessSeed {\n+         this.worldDataServer.setClearWeatherTime(i);\n+         this.worldDataServer.setWeatherDuration(j);\n+         this.worldDataServer.setThunderDuration(j);\n+-        this.worldDataServer.setStorm(flag);\n+-        this.worldDataServer.setThundering(flag1);\n++        this.worldDataServer.setStorm(flag, org.bukkit.event.weather.WeatherChangeEvent.Cause.COMMAND); // Paper\n++        this.worldDataServer.setThundering(flag1, org.bukkit.event.weather.ThunderChangeEvent.Cause.COMMAND); // Paper\n+     }\n+ \n+     public BiomeBase getBiomeBySeed(int i, int j, int k) { return a(i, j, k); } // Paper - OBFHELPER\n+@@ -482,8 +482,8 @@ public class WorldServer extends World implements GeneratorAccessSeed {\n+                 this.worldDataServer.setThunderDuration(j);\n+                 this.worldDataServer.setWeatherDuration(k);\n+                 this.worldDataServer.setClearWeatherTime(i);\n+-                this.worldDataServer.setThundering(flag1);\n+-                this.worldDataServer.setStorm(flag2);\n++                this.worldDataServer.setThundering(flag1, org.bukkit.event.weather.ThunderChangeEvent.Cause.NATURAL); // Paper\n++                this.worldDataServer.setStorm(flag2, org.bukkit.event.weather.WeatherChangeEvent.Cause.COMMAND); // Paper\n+             }\n+ \n+             this.lastThunderLevel = this.thunderLevel;\n+@@ -885,14 +885,14 @@ public class WorldServer extends World implements GeneratorAccessSeed {\n+ \n+     private void clearWeather() {\n+         // CraftBukkit start\n+-        this.worldDataServer.setStorm(false);\n++        this.worldDataServer.setStorm(false, org.bukkit.event.weather.WeatherChangeEvent.Cause.COMMAND); // Paper - happens when weather cycle gamerule is set to false\n+         // If we stop due to everyone sleeping we should reset the weather duration to some other random value.\n+         // Not that everyone ever manages to get the whole server to sleep at the same time....\n+         if (!this.worldDataServer.hasStorm()) {\n+             this.worldDataServer.setWeatherDuration(0);\n+         }\n+         // CraftBukkit end\n+-        this.worldDataServer.setThundering(false);\n++        this.worldDataServer.setThundering(false, org.bukkit.event.weather.ThunderChangeEvent.Cause.COMMAND); // Paper - happens when weather cycle gamerule is set to false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3999fd6183dfd35822872c5aebc27277a328ced"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDA0NDI3MzY4OnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0741-Add-cause-to-Weather-ThunderChangeEvents.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0yNFQwODowMzo1NlrOJgOC0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0yNFQwODowMzo1NlrOJgOC0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNzc2NDMwNw==", "bodyText": "No, this happens when players go to sleep to skip the night.", "url": "https://github.com/PaperMC/Paper/pull/4832#discussion_r637764307", "createdAt": "2021-05-24T08:03:56Z", "author": {"login": "kennytv"}, "path": "Spigot-Server-Patches/0741-Add-cause-to-Weather-ThunderChangeEvents.patch", "diffHunk": "@@ -0,0 +1,118 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 2 Dec 2020 18:23:26 -0800\n+Subject: [PATCH] Add cause to Weather/ThunderChangeEvents\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/level/WorldServer.java b/src/main/java/net/minecraft/server/level/WorldServer.java\n+index 6aace2155258d8257d53ebfcb20c37ea7497c02c..fe0afd4959fd0f5d99a20a42f01d9700a472bcec 100644\n+--- a/src/main/java/net/minecraft/server/level/WorldServer.java\n++++ b/src/main/java/net/minecraft/server/level/WorldServer.java\n+@@ -419,8 +419,8 @@ public class WorldServer extends World implements GeneratorAccessSeed {\n+         this.worldDataServer.setClearWeatherTime(i);\n+         this.worldDataServer.setWeatherDuration(j);\n+         this.worldDataServer.setThunderDuration(j);\n+-        this.worldDataServer.setStorm(flag);\n+-        this.worldDataServer.setThundering(flag1);\n++        this.worldDataServer.setStorm(flag, org.bukkit.event.weather.WeatherChangeEvent.Cause.COMMAND); // Paper\n++        this.worldDataServer.setThundering(flag1, org.bukkit.event.weather.ThunderChangeEvent.Cause.COMMAND); // Paper\n+     }\n+ \n+     public BiomeBase getBiomeBySeed(int i, int j, int k) { return a(i, j, k); } // Paper - OBFHELPER\n+@@ -482,8 +482,8 @@ public class WorldServer extends World implements GeneratorAccessSeed {\n+                 this.worldDataServer.setThunderDuration(j);\n+                 this.worldDataServer.setWeatherDuration(k);\n+                 this.worldDataServer.setClearWeatherTime(i);\n+-                this.worldDataServer.setThundering(flag1);\n+-                this.worldDataServer.setStorm(flag2);\n++                this.worldDataServer.setThundering(flag1, org.bukkit.event.weather.ThunderChangeEvent.Cause.NATURAL); // Paper\n++                this.worldDataServer.setStorm(flag2, org.bukkit.event.weather.WeatherChangeEvent.Cause.COMMAND); // Paper\n+             }\n+ \n+             this.lastThunderLevel = this.thunderLevel;\n+@@ -885,14 +885,14 @@ public class WorldServer extends World implements GeneratorAccessSeed {\n+ \n+     private void clearWeather() {\n+         // CraftBukkit start\n+-        this.worldDataServer.setStorm(false);\n++        this.worldDataServer.setStorm(false, org.bukkit.event.weather.WeatherChangeEvent.Cause.COMMAND); // Paper - happens when weather cycle gamerule is set to false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3999fd6183dfd35822872c5aebc27277a328ced"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkNDA0NDI3NjUxOnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0741-Add-cause-to-Weather-ThunderChangeEvents.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0yNFQwODowNDo0M1rOJgOEYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0yNFQwODowNDo0M1rOJgOEYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNzc2NDcwNQ==", "bodyText": "Why is the reason here COMMAND?", "url": "https://github.com/PaperMC/Paper/pull/4832#discussion_r637764705", "createdAt": "2021-05-24T08:04:43Z", "author": {"login": "kennytv"}, "path": "Spigot-Server-Patches/0741-Add-cause-to-Weather-ThunderChangeEvents.patch", "diffHunk": "@@ -0,0 +1,118 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 2 Dec 2020 18:23:26 -0800\n+Subject: [PATCH] Add cause to Weather/ThunderChangeEvents\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/level/WorldServer.java b/src/main/java/net/minecraft/server/level/WorldServer.java\n+index 6aace2155258d8257d53ebfcb20c37ea7497c02c..fe0afd4959fd0f5d99a20a42f01d9700a472bcec 100644\n+--- a/src/main/java/net/minecraft/server/level/WorldServer.java\n++++ b/src/main/java/net/minecraft/server/level/WorldServer.java\n+@@ -419,8 +419,8 @@ public class WorldServer extends World implements GeneratorAccessSeed {\n+         this.worldDataServer.setClearWeatherTime(i);\n+         this.worldDataServer.setWeatherDuration(j);\n+         this.worldDataServer.setThunderDuration(j);\n+-        this.worldDataServer.setStorm(flag);\n+-        this.worldDataServer.setThundering(flag1);\n++        this.worldDataServer.setStorm(flag, org.bukkit.event.weather.WeatherChangeEvent.Cause.COMMAND); // Paper\n++        this.worldDataServer.setThundering(flag1, org.bukkit.event.weather.ThunderChangeEvent.Cause.COMMAND); // Paper\n+     }\n+ \n+     public BiomeBase getBiomeBySeed(int i, int j, int k) { return a(i, j, k); } // Paper - OBFHELPER\n+@@ -482,8 +482,8 @@ public class WorldServer extends World implements GeneratorAccessSeed {\n+                 this.worldDataServer.setThunderDuration(j);\n+                 this.worldDataServer.setWeatherDuration(k);\n+                 this.worldDataServer.setClearWeatherTime(i);\n+-                this.worldDataServer.setThundering(flag1);\n+-                this.worldDataServer.setStorm(flag2);\n++                this.worldDataServer.setThundering(flag1, org.bukkit.event.weather.ThunderChangeEvent.Cause.NATURAL); // Paper\n++                this.worldDataServer.setStorm(flag2, org.bukkit.event.weather.WeatherChangeEvent.Cause.COMMAND); // Paper", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3999fd6183dfd35822872c5aebc27277a328ced"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1766, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}