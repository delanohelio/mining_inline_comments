{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMTIzODE2", "number": 3129, "title": "Add API MinecraftServer#isStopping", "bodyText": "Exposes MinecraftServer#isRunning in order to allow for plugins to discern if the server is shutting down or reloading the plugins in the onDisable method.", "createdAt": "2020-04-11T01:58:52Z", "url": "https://github.com/PaperMC/Paper/pull/3129", "merged": true, "mergeCommit": {"oid": "11de41c777955fe091393d47264a6a6a4982ecdb"}, "closed": true, "closedAt": "2020-04-11T05:51:36Z", "author": {"login": "JRoy"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWbm0NgH2gAyNDAyMTIzODE2OjY3NzFjNjgyYWI0ODg5MjU3OGVkMmE2MmMyNTExY2IyYmM2ZTc3Njk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWfKZpAH2gAyNDAyMTIzODE2OmY3Y2FiYjU0ZTBjMDhmMGI2MDdkNWUyYmRkZjA1NjhjOTMwMWI1NWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6771c682ab48892578ed2a62c2511cb2bc6e7769", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/PaperMC/Paper/commit/6771c682ab48892578ed2a62c2511cb2bc6e7769", "committedDate": "2020-04-11T01:42:15Z", "message": "Expose MinecraftServer#isRunning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09c8f0273dce5ce1c8e9c2faa737d55ee825591d", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/PaperMC/Paper/commit/09c8f0273dce5ce1c8e9c2faa737d55ee825591d", "committedDate": "2020-04-11T02:01:18Z", "message": "License under MIT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzI2MTM2", "url": "https://github.com/PaperMC/Paper/pull/3129#pullrequestreview-391726136", "createdAt": "2020-04-11T02:05:04Z", "commit": {"oid": "6771c682ab48892578ed2a62c2511cb2bc6e7769"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQwMjowNTowNFrOGEJiEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQwMjowNTowNFrOGEJiEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwMzY2NA==", "bodyText": "Since this is on the Server interface. This seems redundant to me. isRunning() - I think would be sufficient.\n(I have no problem with it mentioning Server in the Bukkit class though.)", "url": "https://github.com/PaperMC/Paper/pull/3129#discussion_r407003664", "createdAt": "2020-04-11T02:05:04Z", "author": {"login": "chickeneer"}, "path": "Spigot-API-Patches/0193-Expose-MinecraftServer-isRunning.patch", "diffHunk": "@@ -0,0 +1,47 @@\n+From 0f38ed2b2376a7728b1251f5ef0fd80bde967e70 Mon Sep 17 00:00:00 2001\n+From: JRoy <joshroy126@gmail.com>\n+Date: Fri, 10 Apr 2020 21:24:35 -0400\n+Subject: [PATCH] Expose MinecraftServer#isRunning\n+\n+This allows for plugins to detect if the server is actually turning off in onDisable rather than just plugins reloading.\n+\n+diff --git a/src/main/java/org/bukkit/Bukkit.java b/src/main/java/org/bukkit/Bukkit.java\n+index b9973406..791ce81a 100644\n+--- a/src/main/java/org/bukkit/Bukkit.java\n++++ b/src/main/java/org/bukkit/Bukkit.java\n+@@ -1661,6 +1661,15 @@ public final class Bukkit {\n+     public static int getCurrentTick() {\n+         return server.getCurrentTick();\n+     }\n++\n++    /**\n++     * Checks if the server is still running (not being shutdown).\n++     *\n++     * @return true if server is not in the process of being shutdown\n++     */\n++    public static boolean isServerRunning() {\n++        return server.isServerRunning();\n++    }\n+     // Paper end\n+ \n+     @NotNull\n+diff --git a/src/main/java/org/bukkit/Server.java b/src/main/java/org/bukkit/Server.java\n+index 80f9abdc..14c266fa 100644\n+--- a/src/main/java/org/bukkit/Server.java\n++++ b/src/main/java/org/bukkit/Server.java\n+@@ -1455,5 +1455,12 @@ public interface Server extends PluginMessageRecipient {\n+      * @return Current tick\n+      */\n+     int getCurrentTick();\n++\n++    /**\n++     * Checks if the server is still running (not being shutdown).\n++     *\n++     * @return true if server is not in the process of being shutdown\n++     */\n++    boolean isServerRunning();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6771c682ab48892578ed2a62c2511cb2bc6e7769"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d033359b4b31790d15e838f29f5931fc49736a7c", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/PaperMC/Paper/commit/d033359b4b31790d15e838f29f5931fc49736a7c", "committedDate": "2020-04-11T02:20:43Z", "message": "Rename method in Server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "871399a0d44e899a78109604d5f31569c633278e", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/PaperMC/Paper/commit/871399a0d44e899a78109604d5f31569c633278e", "committedDate": "2020-04-11T02:31:23Z", "message": "Revert \"Rename method in Server\"\n\nThis reverts commit d033359b4b31790d15e838f29f5931fc49736a7c."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "390e4f9f0a9080f305c1dffa3bad0ff31830d946", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/PaperMC/Paper/commit/390e4f9f0a9080f305c1dffa3bad0ff31830d946", "committedDate": "2020-04-11T03:31:26Z", "message": "Rename method again but this time it's a good name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzMyMDAw", "url": "https://github.com/PaperMC/Paper/pull/3129#pullrequestreview-391732000", "createdAt": "2020-04-11T03:33:15Z", "commit": {"oid": "390e4f9f0a9080f305c1dffa3bad0ff31830d946"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzM2ODUw", "url": "https://github.com/PaperMC/Paper/pull/3129#pullrequestreview-391736850", "createdAt": "2020-04-11T05:03:23Z", "commit": {"oid": "390e4f9f0a9080f305c1dffa3bad0ff31830d946"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7cabb54e0c08f0b607d5e2bddf0568c9301b55f", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/f7cabb54e0c08f0b607d5e2bddf0568c9301b55f", "committedDate": "2020-04-11T05:50:50Z", "message": "Merge branch 'master' into feature/isServerRunning"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1260, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}