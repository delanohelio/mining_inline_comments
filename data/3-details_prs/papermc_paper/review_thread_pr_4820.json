{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5MDI0MjMz", "number": 4820, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQyMzo1Mzo1NVrOE-U3Cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQyMzo1Mzo1NVrOE-U3Cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzNzg4OTM5OnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0604-Implemented-BlockFailedDispenseEvent.patch", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yOFQyMzo1Mzo1NVrOH7eEag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwOTo1MjoxM1rOH8i4Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMDY4Mg==", "bodyText": "Would personally move that to a protected method that returns if it should play the effect.\nprotected boolean triggerBlockFailedDispenseEvent(BlockPosition blockPosition)..\nAnd call it in the BlockDropper as well.", "url": "https://github.com/PaperMC/Paper/pull/4820#discussion_r532120682", "createdAt": "2020-11-28T23:53:55Z", "author": {"login": "yannicklamprecht"}, "path": "Spigot-Server-Patches/0604-Implemented-BlockFailedDispenseEvent.patch", "diffHunk": "@@ -0,0 +1,46 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: TheViperShow <29604693+TheViperShow@users.noreply.github.com>\n+Date: Wed, 22 Apr 2020 09:40:38 +0200\n+Subject: [PATCH] Implemented BlockFailedDispenseEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/BlockDispenser.java b/src/main/java/net/minecraft/server/BlockDispenser.java\n+index c239265581972d67c7567d7545d62499ebadd195..08f16fe32c12cb22ee5d793ac40b83c9398faf74 100644\n+--- a/src/main/java/net/minecraft/server/BlockDispenser.java\n++++ b/src/main/java/net/minecraft/server/BlockDispenser.java\n+@@ -48,7 +48,14 @@ public class BlockDispenser extends BlockTileEntity {\n+         int i = tileentitydispenser.h();\n+ \n+         if (i < 0) {\n+-            worldserver.triggerEffect(1001, blockposition, 0);\n++            // Paper start - BlockFailedDispenseEvent is called here\n++            org.bukkit.block.Block block = worldserver.getWorld().getBlockAt(blockposition.getX(), blockposition.getY(), blockposition.getZ());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3241e58ffe8daa417d485041a43e95d8df7d3ed"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI0ODA5MA==", "bodyText": "yeah right, this should go into CraftEventFactory, will do that later", "url": "https://github.com/PaperMC/Paper/pull/4820#discussion_r533248090", "createdAt": "2020-12-01T09:52:13Z", "author": {"login": "MiniDigger"}, "path": "Spigot-Server-Patches/0604-Implemented-BlockFailedDispenseEvent.patch", "diffHunk": "@@ -0,0 +1,46 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: TheViperShow <29604693+TheViperShow@users.noreply.github.com>\n+Date: Wed, 22 Apr 2020 09:40:38 +0200\n+Subject: [PATCH] Implemented BlockFailedDispenseEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/BlockDispenser.java b/src/main/java/net/minecraft/server/BlockDispenser.java\n+index c239265581972d67c7567d7545d62499ebadd195..08f16fe32c12cb22ee5d793ac40b83c9398faf74 100644\n+--- a/src/main/java/net/minecraft/server/BlockDispenser.java\n++++ b/src/main/java/net/minecraft/server/BlockDispenser.java\n+@@ -48,7 +48,14 @@ public class BlockDispenser extends BlockTileEntity {\n+         int i = tileentitydispenser.h();\n+ \n+         if (i < 0) {\n+-            worldserver.triggerEffect(1001, blockposition, 0);\n++            // Paper start - BlockFailedDispenseEvent is called here\n++            org.bukkit.block.Block block = worldserver.getWorld().getBlockAt(blockposition.getX(), blockposition.getY(), blockposition.getZ());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMDY4Mg=="}, "originalCommit": {"oid": "b3241e58ffe8daa417d485041a43e95d8df7d3ed"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1765, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}