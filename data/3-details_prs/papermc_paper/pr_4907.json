{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyNDc2NDc5", "number": 4907, "title": "Add API to get Tile Entities in a Chunk by Predicate", "bodyText": "Currently, if someone wants to get all sign BlockState instances in a chunk, they end up parsing BlockEntity data of all BlockEntities in the chunk.\nThis means that a simple task like scanning sign lines ends up loading the contents of every container.\nThis API adds another method that takes a Predicate<Block>, to allow plugins to filter down by factors such as material, position, biome, etc. Due to the non-certain number of results here, some optimisations from the non-predicate version had to be omitted (pre-allocating array size).", "createdAt": "2020-12-18T11:12:13Z", "url": "https://github.com/PaperMC/Paper/pull/4907", "merged": true, "mergeCommit": {"oid": "0bdfb0158975de82c1089a744fe26e11c9b9bd52"}, "closed": true, "closedAt": "2020-12-24T09:27:50Z", "author": {"login": "me4502"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnWYvagBqjQxMjkzNjQ2ODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpQRqNAFqTU1ODQyNzc1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c48fab393223ead69a3bbc4f0bc89f30a93a6b33", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/c48fab393223ead69a3bbc4f0bc89f30a93a6b33", "committedDate": "2020-12-18T11:08:34Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}, "afterCommit": {"oid": "c9c76d41f52b6ab5f619aa77e96d0b2c0870ac0b", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/c9c76d41f52b6ab5f619aa77e96d0b2c0870ac0b", "committedDate": "2020-12-18T11:24:21Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9c76d41f52b6ab5f619aa77e96d0b2c0870ac0b", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/c9c76d41f52b6ab5f619aa77e96d0b2c0870ac0b", "committedDate": "2020-12-18T11:24:21Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}, "afterCommit": {"oid": "21827fb0254cac0af54e43887a1cd60db6a9bfa9", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/21827fb0254cac0af54e43887a1cd60db6a9bfa9", "committedDate": "2020-12-18T11:26:04Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "21827fb0254cac0af54e43887a1cd60db6a9bfa9", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/21827fb0254cac0af54e43887a1cd60db6a9bfa9", "committedDate": "2020-12-18T11:26:04Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}, "afterCommit": {"oid": "ee7f38b132f1632808f818fcd43e3c8953136047", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/ee7f38b132f1632808f818fcd43e3c8953136047", "committedDate": "2020-12-18T11:26:27Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NDM2NDYy", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-555436462", "createdAt": "2020-12-18T12:12:34Z", "commit": {"oid": "ee7f38b132f1632808f818fcd43e3c8953136047"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjoxMjozNFrOIIgiyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjoxNDoxM1rOIIgl1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc5MjcxMg==", "bodyText": "Sorry, what would be false here? I realise its necessity, just curious :p", "url": "https://github.com/PaperMC/Paper/pull/4907#discussion_r545792712", "createdAt": "2020-12-18T12:12:34Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0619-Implement-a-method-to-get-tile-entities-in-a-chunk-b.patch", "diffHunk": "@@ -0,0 +1,55 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Matthew Miller <mnmiller1@me.com>\n+Date: Fri, 18 Dec 2020 21:05:55 +1000\n+Subject: [PATCH] Implement a method to get tile entities in a chunk by\n+ Predicate\n+\n+\n+diff --git a/src/main/java/org/bukkit/craftbukkit/CraftChunk.java b/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n+index 42b47634437135a9e9b608283f3ce81c98ca181a..58f7ea1edf531bc642c62169b1c5d718bd24d71b 100644\n+--- a/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n++++ b/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n+@@ -3,8 +3,10 @@ package org.bukkit.craftbukkit;\n+ import com.google.common.base.Preconditions;\n+ import com.google.common.base.Predicates;\n+ import java.lang.ref.WeakReference;\n++import java.util.ArrayList;\n+ import java.util.Arrays;\n+ import java.util.Collection;\n++import java.util.List;\n+ import java.util.function.Predicate;\n+ import net.minecraft.server.BiomeStorage;\n+ import net.minecraft.server.BlockPosition;\n+@@ -157,6 +159,32 @@ public class CraftChunk implements Chunk {\n+         return entities;\n+     }\n+ \n++    // Paper start\n++    @Override\n++    public BlockState[] getTileEntities(Predicate<Block> blockPredicate, boolean useSnapshot) {\n++        if (!isLoaded()) {\n++            getWorld().getChunkAt(x, z); // Transient load for this tick\n++        }\n++        net.minecraft.server.Chunk chunk = getHandle();\n++\n++        List<BlockState> entities = new ArrayList<>();\n++\n++        for (Object obj : chunk.tileEntities.keySet().toArray()) {\n++            if (!(obj instanceof BlockPosition)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee7f38b132f1632808f818fcd43e3c8953136047"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc5MzQ5Mg==", "bodyText": "I feel it'd be better to just return the list instead. Surely the copying to an array is pretty expensive?", "url": "https://github.com/PaperMC/Paper/pull/4907#discussion_r545793492", "createdAt": "2020-12-18T12:14:13Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0619-Implement-a-method-to-get-tile-entities-in-a-chunk-b.patch", "diffHunk": "@@ -0,0 +1,55 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Matthew Miller <mnmiller1@me.com>\n+Date: Fri, 18 Dec 2020 21:05:55 +1000\n+Subject: [PATCH] Implement a method to get tile entities in a chunk by\n+ Predicate\n+\n+\n+diff --git a/src/main/java/org/bukkit/craftbukkit/CraftChunk.java b/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n+index 42b47634437135a9e9b608283f3ce81c98ca181a..58f7ea1edf531bc642c62169b1c5d718bd24d71b 100644\n+--- a/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n++++ b/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n+@@ -3,8 +3,10 @@ package org.bukkit.craftbukkit;\n+ import com.google.common.base.Preconditions;\n+ import com.google.common.base.Predicates;\n+ import java.lang.ref.WeakReference;\n++import java.util.ArrayList;\n+ import java.util.Arrays;\n+ import java.util.Collection;\n++import java.util.List;\n+ import java.util.function.Predicate;\n+ import net.minecraft.server.BiomeStorage;\n+ import net.minecraft.server.BlockPosition;\n+@@ -157,6 +159,32 @@ public class CraftChunk implements Chunk {\n+         return entities;\n+     }\n+ \n++    // Paper start\n++    @Override\n++    public BlockState[] getTileEntities(Predicate<Block> blockPredicate, boolean useSnapshot) {\n++        if (!isLoaded()) {\n++            getWorld().getChunkAt(x, z); // Transient load for this tick\n++        }\n++        net.minecraft.server.Chunk chunk = getHandle();\n++\n++        List<BlockState> entities = new ArrayList<>();\n++\n++        for (Object obj : chunk.tileEntities.keySet().toArray()) {\n++            if (!(obj instanceof BlockPosition)) {\n++                continue;\n++            }\n++\n++            BlockPosition position = (BlockPosition) obj;\n++            Block block = worldServer.getWorld().getBlockAt(position.getX(), position.getY(), position.getZ());\n++            if (blockPredicate.test(block)) {\n++                entities.add(block.getState(useSnapshot));\n++            }\n++        }\n++\n++        return entities.toArray(new BlockState[0]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee7f38b132f1632808f818fcd43e3c8953136047"}, "originalPosition": 49}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee7f38b132f1632808f818fcd43e3c8953136047", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/ee7f38b132f1632808f818fcd43e3c8953136047", "committedDate": "2020-12-18T11:26:27Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}, "afterCommit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/0c7bd0e031a46c4e88bc474ebba629575d72435e", "committedDate": "2020-12-18T12:56:50Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NTE0OTIz", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-555514923", "createdAt": "2020-12-18T14:11:59Z", "commit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMjowMFrOIIkVlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMjowMFrOIIkVlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1NDg3MQ==", "bodyText": "bad", "url": "https://github.com/PaperMC/Paper/pull/4907#discussion_r545854871", "createdAt": "2020-12-18T14:12:00Z", "author": {"login": "MrIvanPlays"}, "path": "Spigot-Server-Patches/0619-Implement-a-method-to-get-tile-entities-in-a-chunk-b.patch", "diffHunk": "@@ -0,0 +1,50 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Matthew Miller <mnmiller1@me.com>\n+Date: Fri, 18 Dec 2020 21:05:55 +1000\n+Subject: [PATCH] Implement a method to get tile entities in a chunk by\n+ Predicate\n+\n+\n+diff --git a/src/main/java/org/bukkit/craftbukkit/CraftChunk.java b/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n+index 42b47634437135a9e9b608283f3ce81c98ca181a..284e78c8171a9e50a4267433a953f4d9e8580f37 100644\n+--- a/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n++++ b/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n+@@ -3,8 +3,10 @@ package org.bukkit.craftbukkit;\n+ import com.google.common.base.Preconditions;\n+ import com.google.common.base.Predicates;\n+ import java.lang.ref.WeakReference;\n++import java.util.ArrayList;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NTE1MDEw", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-555515010", "createdAt": "2020-12-18T14:12:06Z", "commit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMjowNlrOIIkV3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMjowNlrOIIkV3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1NDk0Mg==", "bodyText": "bad", "url": "https://github.com/PaperMC/Paper/pull/4907#discussion_r545854942", "createdAt": "2020-12-18T14:12:06Z", "author": {"login": "MrIvanPlays"}, "path": "Spigot-Server-Patches/0619-Implement-a-method-to-get-tile-entities-in-a-chunk-b.patch", "diffHunk": "@@ -0,0 +1,50 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Matthew Miller <mnmiller1@me.com>\n+Date: Fri, 18 Dec 2020 21:05:55 +1000\n+Subject: [PATCH] Implement a method to get tile entities in a chunk by\n+ Predicate\n+\n+\n+diff --git a/src/main/java/org/bukkit/craftbukkit/CraftChunk.java b/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n+index 42b47634437135a9e9b608283f3ce81c98ca181a..284e78c8171a9e50a4267433a953f4d9e8580f37 100644\n+--- a/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n++++ b/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n+@@ -3,8 +3,10 @@ package org.bukkit.craftbukkit;\n+ import com.google.common.base.Preconditions;\n+ import com.google.common.base.Predicates;\n+ import java.lang.ref.WeakReference;\n++import java.util.ArrayList;\n+ import java.util.Arrays;\n+ import java.util.Collection;\n++import java.util.List;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NTE1MzA2", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-555515306", "createdAt": "2020-12-18T14:12:29Z", "commit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMjoyOVrOIIkWtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMjoyOVrOIIkWtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1NTE1OQ==", "bodyText": "java.util.List<BlockState> entities = new java.util.ArrayList<>();", "url": "https://github.com/PaperMC/Paper/pull/4907#discussion_r545855159", "createdAt": "2020-12-18T14:12:29Z", "author": {"login": "MrIvanPlays"}, "path": "Spigot-Server-Patches/0619-Implement-a-method-to-get-tile-entities-in-a-chunk-b.patch", "diffHunk": "@@ -0,0 +1,50 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Matthew Miller <mnmiller1@me.com>\n+Date: Fri, 18 Dec 2020 21:05:55 +1000\n+Subject: [PATCH] Implement a method to get tile entities in a chunk by\n+ Predicate\n+\n+\n+diff --git a/src/main/java/org/bukkit/craftbukkit/CraftChunk.java b/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n+index 42b47634437135a9e9b608283f3ce81c98ca181a..284e78c8171a9e50a4267433a953f4d9e8580f37 100644\n+--- a/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n++++ b/src/main/java/org/bukkit/craftbukkit/CraftChunk.java\n+@@ -3,8 +3,10 @@ package org.bukkit.craftbukkit;\n+ import com.google.common.base.Preconditions;\n+ import com.google.common.base.Predicates;\n+ import java.lang.ref.WeakReference;\n++import java.util.ArrayList;\n+ import java.util.Arrays;\n+ import java.util.Collection;\n++import java.util.List;\n+ import java.util.function.Predicate;\n+ import net.minecraft.server.BiomeStorage;\n+ import net.minecraft.server.BlockPosition;\n+@@ -157,6 +159,27 @@ public class CraftChunk implements Chunk {\n+         return entities;\n+     }\n+ \n++    // Paper start\n++    @Override\n++    public Collection<BlockState> getTileEntities(Predicate<Block> blockPredicate, boolean useSnapshot) {\n++        if (!isLoaded()) {\n++            getWorld().getChunkAt(x, z); // Transient load for this tick\n++        }\n++        net.minecraft.server.Chunk chunk = getHandle();\n++\n++        List<BlockState> entities = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NTE1NDk5", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-555515499", "createdAt": "2020-12-18T14:12:43Z", "commit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMjo0M1rOIIkXWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMjo0M1rOIIkXWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1NTMyMA==", "bodyText": "bad", "url": "https://github.com/PaperMC/Paper/pull/4907#discussion_r545855320", "createdAt": "2020-12-18T14:12:43Z", "author": {"login": "MrIvanPlays"}, "path": "Spigot-API-Patches/0243-Add-a-method-to-get-tile-entities-in-a-chunk-by-Pred.patch", "diffHunk": "@@ -0,0 +1,36 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Matthew Miller <mnmiller1@me.com>\n+Date: Fri, 18 Dec 2020 21:05:39 +1000\n+Subject: [PATCH] Add a method to get tile entities in a chunk by Predicate\n+\n+\n+diff --git a/src/main/java/org/bukkit/Chunk.java b/src/main/java/org/bukkit/Chunk.java\n+index b4ef6297f78d1f0c216e718024a21e6aa07cd1c6..98263d896f316983609432c45b85401a2692432d 100644\n+--- a/src/main/java/org/bukkit/Chunk.java\n++++ b/src/main/java/org/bukkit/Chunk.java\n+@@ -1,6 +1,8 @@\n+ package org.bukkit;\n+ \n+ import java.util.Collection;\n++import java.util.function.Predicate;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NTE1NTcz", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-555515573", "createdAt": "2020-12-18T14:12:47Z", "commit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMjo0N1rOIIkXhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMjo0N1rOIIkXhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1NTM2NQ==", "bodyText": "bad", "url": "https://github.com/PaperMC/Paper/pull/4907#discussion_r545855365", "createdAt": "2020-12-18T14:12:47Z", "author": {"login": "MrIvanPlays"}, "path": "Spigot-API-Patches/0243-Add-a-method-to-get-tile-entities-in-a-chunk-by-Pred.patch", "diffHunk": "@@ -0,0 +1,36 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Matthew Miller <mnmiller1@me.com>\n+Date: Fri, 18 Dec 2020 21:05:39 +1000\n+Subject: [PATCH] Add a method to get tile entities in a chunk by Predicate\n+\n+\n+diff --git a/src/main/java/org/bukkit/Chunk.java b/src/main/java/org/bukkit/Chunk.java\n+index b4ef6297f78d1f0c216e718024a21e6aa07cd1c6..98263d896f316983609432c45b85401a2692432d 100644\n+--- a/src/main/java/org/bukkit/Chunk.java\n++++ b/src/main/java/org/bukkit/Chunk.java\n+@@ -1,6 +1,8 @@\n+ package org.bukkit;\n+ \n+ import java.util.Collection;\n++import java.util.function.Predicate;\n++", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NTE2MDg3", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-555516087", "createdAt": "2020-12-18T14:13:28Z", "commit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMzoyOFrOIIkZIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxMzoyOFrOIIkZIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1NTc3Ng==", "bodyText": "Collection getTileEntities(NotNull java.util.Predicate blockPredicate, boolean useSnapshot);", "url": "https://github.com/PaperMC/Paper/pull/4907#discussion_r545855776", "createdAt": "2020-12-18T14:13:28Z", "author": {"login": "MrIvanPlays"}, "path": "Spigot-API-Patches/0243-Add-a-method-to-get-tile-entities-in-a-chunk-by-Pred.patch", "diffHunk": "@@ -0,0 +1,36 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Matthew Miller <mnmiller1@me.com>\n+Date: Fri, 18 Dec 2020 21:05:39 +1000\n+Subject: [PATCH] Add a method to get tile entities in a chunk by Predicate\n+\n+\n+diff --git a/src/main/java/org/bukkit/Chunk.java b/src/main/java/org/bukkit/Chunk.java\n+index b4ef6297f78d1f0c216e718024a21e6aa07cd1c6..98263d896f316983609432c45b85401a2692432d 100644\n+--- a/src/main/java/org/bukkit/Chunk.java\n++++ b/src/main/java/org/bukkit/Chunk.java\n+@@ -1,6 +1,8 @@\n+ package org.bukkit;\n+ \n+ import java.util.Collection;\n++import java.util.function.Predicate;\n++\n+ import org.bukkit.block.Block;\n+ import org.bukkit.block.BlockState;\n+ import org.bukkit.block.data.BlockData;\n+@@ -122,6 +124,16 @@ public interface Chunk extends PersistentDataHolder {\n+      */\n+     @NotNull\n+     BlockState[] getTileEntities(boolean useSnapshot);\n++\n++    /**\n++     * Get a list of all tile entities that match a given predicate in the chunk.\n++     *\n++     * @param blockPredicate The predicate of blocks to return tile entities for\n++     * @param useSnapshot Take snapshots or direct references\n++     * @return The tile entities.\n++     */\n++    @NotNull\n++    Collection<BlockState> getTileEntities(@NotNull Predicate<Block> blockPredicate, boolean useSnapshot);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NTE2Mzg2", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-555516386", "createdAt": "2020-12-18T14:13:53Z", "commit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NTQ4MTI2", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-555548126", "createdAt": "2020-12-18T14:41:00Z", "commit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c7bd0e031a46c4e88bc474ebba629575d72435e", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/0c7bd0e031a46c4e88bc474ebba629575d72435e", "committedDate": "2020-12-18T12:56:50Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}, "afterCommit": {"oid": "ec099f57cfd04766e28cdaf60bdeccb4b2346b21", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/ec099f57cfd04766e28cdaf60bdeccb4b2346b21", "committedDate": "2020-12-19T12:46:45Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1OTQ3ODU1", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-555947855", "createdAt": "2020-12-19T15:13:51Z", "commit": {"oid": "ec099f57cfd04766e28cdaf60bdeccb4b2346b21"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDEwOTUx", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-556010951", "createdAt": "2020-12-20T11:57:32Z", "commit": {"oid": "ec099f57cfd04766e28cdaf60bdeccb4b2346b21"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f58bccc5db71ea759b8c0ee123fd6838973fa38f", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/f58bccc5db71ea759b8c0ee123fd6838973fa38f", "committedDate": "2020-12-24T09:24:28Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec099f57cfd04766e28cdaf60bdeccb4b2346b21", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/ec099f57cfd04766e28cdaf60bdeccb4b2346b21", "committedDate": "2020-12-19T12:46:45Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}, "afterCommit": {"oid": "f58bccc5db71ea759b8c0ee123fd6838973fa38f", "author": {"user": {"login": "me4502", "name": "Maddy Miller"}}, "url": "https://github.com/PaperMC/Paper/commit/f58bccc5db71ea759b8c0ee123fd6838973fa38f", "committedDate": "2020-12-24T09:24:28Z", "message": "Add API to get Tile Entities in a Chunk by Predicate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NDI3NzU1", "url": "https://github.com/PaperMC/Paper/pull/4907#pullrequestreview-558427755", "createdAt": "2020-12-24T09:25:54Z", "commit": {"oid": "f58bccc5db71ea759b8c0ee123fd6838973fa38f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1365, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}