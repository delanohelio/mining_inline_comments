{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NTcwNDA4", "number": 3615, "reviewThreads": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNDowM1rOEpMARA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQxNToyMDo0MlrOFHdlaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjIzNzQ4OnYy", "diffSide": "RIGHT", "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNDowM1rOHatqXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNDowM1rOHatqXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc3MzE1MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            +package com.destroystokyo.paper.event.player;\n          \n          \n            \n            +package io.papermc.paper.event.player;", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r497773151", "createdAt": "2020-09-30T20:14:03Z", "author": {"login": "Proximyst"}, "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,114 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:12:18 -0600\n+Subject: [PATCH] Added PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+new file mode 100644\n+index 0000000000000000000000000000000000000000..0d861a44549dbbaa38f5a6e66762d4d32c7f1ac0\n+--- /dev/null\n++++ b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+@@ -0,0 +1,102 @@\n++package com.destroystokyo.paper.event.player;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7464e6327a1d0d1b841d83972831e93a70971b97"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjIzODc4OnYy", "diffSide": "RIGHT", "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNDoyOVrOHatrIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNDoyOVrOHatrIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc3MzM0Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            + * Called when a player sets the effect for a beacon\n          \n          \n            \n            + *\n          \n          \n            \n            + */\n          \n          \n            \n            + * Called when a player sets the effect for a beacon\n          \n          \n            \n            + */", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r497773346", "createdAt": "2020-09-30T20:14:29Z", "author": {"login": "Proximyst"}, "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,114 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:12:18 -0600\n+Subject: [PATCH] Added PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+new file mode 100644\n+index 0000000000000000000000000000000000000000..0d861a44549dbbaa38f5a6e66762d4d32c7f1ac0\n+--- /dev/null\n++++ b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+@@ -0,0 +1,102 @@\n++package com.destroystokyo.paper.event.player;\n++\n++import org.bukkit.entity.Player;\n++import org.bukkit.event.Cancellable;\n++import org.bukkit.event.HandlerList;\n++import org.bukkit.event.player.PlayerEvent;\n++import org.bukkit.potion.PotionEffectType;\n++import org.jetbrains.annotations.NotNull;\n++import org.jetbrains.annotations.Nullable;\n++\n++/**\n++ * Called when a player sets the effect for a beacon\n++ *\n++ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7464e6327a1d0d1b841d83972831e93a70971b97"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjIzOTk0OnYy", "diffSide": "RIGHT", "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNDo0OFrOHatr1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxOTozNDo1N1rOHsS3og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc3MzUyNA==", "bodyText": "Inline this.", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r497773524", "createdAt": "2020-09-30T20:14:48Z", "author": {"login": "Proximyst"}, "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,114 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:12:18 -0600\n+Subject: [PATCH] Added PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+new file mode 100644\n+index 0000000000000000000000000000000000000000..0d861a44549dbbaa38f5a6e66762d4d32c7f1ac0\n+--- /dev/null\n++++ b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+@@ -0,0 +1,102 @@\n++package com.destroystokyo.paper.event.player;\n++\n++import org.bukkit.entity.Player;\n++import org.bukkit.event.Cancellable;\n++import org.bukkit.event.HandlerList;\n++import org.bukkit.event.player.PlayerEvent;\n++import org.bukkit.potion.PotionEffectType;\n++import org.jetbrains.annotations.NotNull;\n++import org.jetbrains.annotations.Nullable;\n++\n++/**\n++ * Called when a player sets the effect for a beacon\n++ *\n++ */\n++public class PlayerChangeBeaconEffectEvent extends PlayerEvent implements Cancellable {\n++    private static final HandlerList handlers = new HandlerList();\n++\n++    private PotionEffectType primary;\n++    private PotionEffectType secondary;\n++\n++    private boolean isCancelled;\n++\n++    public PlayerChangeBeaconEffectEvent(@NotNull Player player, @NotNull PotionEffectType primary, @NotNull PotionEffectType secondary) {\n++        super(player);\n++        this.primary = primary;\n++        this.secondary = secondary;\n++        this.isCancelled = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7464e6327a1d0d1b841d83972831e93a70971b97"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjIwODU0Ng==", "bodyText": "You mean put them all on the same line?", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r516208546", "createdAt": "2020-11-02T19:34:57Z", "author": {"login": "Machine-Maker"}, "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,114 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:12:18 -0600\n+Subject: [PATCH] Added PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+new file mode 100644\n+index 0000000000000000000000000000000000000000..0d861a44549dbbaa38f5a6e66762d4d32c7f1ac0\n+--- /dev/null\n++++ b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+@@ -0,0 +1,102 @@\n++package com.destroystokyo.paper.event.player;\n++\n++import org.bukkit.entity.Player;\n++import org.bukkit.event.Cancellable;\n++import org.bukkit.event.HandlerList;\n++import org.bukkit.event.player.PlayerEvent;\n++import org.bukkit.potion.PotionEffectType;\n++import org.jetbrains.annotations.NotNull;\n++import org.jetbrains.annotations.Nullable;\n++\n++/**\n++ * Called when a player sets the effect for a beacon\n++ *\n++ */\n++public class PlayerChangeBeaconEffectEvent extends PlayerEvent implements Cancellable {\n++    private static final HandlerList handlers = new HandlerList();\n++\n++    private PotionEffectType primary;\n++    private PotionEffectType secondary;\n++\n++    private boolean isCancelled;\n++\n++    public PlayerChangeBeaconEffectEvent(@NotNull Player player, @NotNull PotionEffectType primary, @NotNull PotionEffectType secondary) {\n++        super(player);\n++        this.primary = primary;\n++        this.secondary = secondary;\n++        this.isCancelled = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc3MzUyNA=="}, "originalCommit": {"oid": "7464e6327a1d0d1b841d83972831e93a70971b97"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjI0MjQ1OnYy", "diffSide": "RIGHT", "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNToyOFrOHattSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNToyOFrOHattSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc3Mzg5OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            +     * @param primary the primary effect\n          \n          \n            \n            +\n          \n          \n            \n            +     * @param primary the primary effect", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r497773899", "createdAt": "2020-09-30T20:15:28Z", "author": {"login": "Proximyst"}, "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,114 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:12:18 -0600\n+Subject: [PATCH] Added PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+new file mode 100644\n+index 0000000000000000000000000000000000000000..0d861a44549dbbaa38f5a6e66762d4d32c7f1ac0\n+--- /dev/null\n++++ b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+@@ -0,0 +1,102 @@\n++package com.destroystokyo.paper.event.player;\n++\n++import org.bukkit.entity.Player;\n++import org.bukkit.event.Cancellable;\n++import org.bukkit.event.HandlerList;\n++import org.bukkit.event.player.PlayerEvent;\n++import org.bukkit.potion.PotionEffectType;\n++import org.jetbrains.annotations.NotNull;\n++import org.jetbrains.annotations.Nullable;\n++\n++/**\n++ * Called when a player sets the effect for a beacon\n++ *\n++ */\n++public class PlayerChangeBeaconEffectEvent extends PlayerEvent implements Cancellable {\n++    private static final HandlerList handlers = new HandlerList();\n++\n++    private PotionEffectType primary;\n++    private PotionEffectType secondary;\n++\n++    private boolean isCancelled;\n++\n++    public PlayerChangeBeaconEffectEvent(@NotNull Player player, @NotNull PotionEffectType primary, @NotNull PotionEffectType secondary) {\n++        super(player);\n++        this.primary = primary;\n++        this.secondary = secondary;\n++        this.isCancelled = false;\n++    }\n++\n++    /**\n++     * @return the primary effect\n++     */\n++    @Nullable public PotionEffectType getPrimary() {\n++        return primary;\n++    }\n++\n++    /**\n++     * Sets the primary effect\n++     * <p>\n++     * NOTE: The primary effect still has to be one of the valid effects for a beacon.\n++     * @param primary the primary effect", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7464e6327a1d0d1b841d83972831e93a70971b97"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjI0Mjg3OnYy", "diffSide": "RIGHT", "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNTozN1rOHattlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNTozN1rOHattlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc3Mzk3NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            +     * @param secondary the secondary effect\n          \n          \n            \n            +\n          \n          \n            \n            +     * @param secondary the secondary effect", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r497773974", "createdAt": "2020-09-30T20:15:37Z", "author": {"login": "Proximyst"}, "path": "Spigot-API-Patches/0214-Added-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,114 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:12:18 -0600\n+Subject: [PATCH] Added PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+new file mode 100644\n+index 0000000000000000000000000000000000000000..0d861a44549dbbaa38f5a6e66762d4d32c7f1ac0\n+--- /dev/null\n++++ b/src/main/java/com/destroystokyo/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+@@ -0,0 +1,102 @@\n++package com.destroystokyo.paper.event.player;\n++\n++import org.bukkit.entity.Player;\n++import org.bukkit.event.Cancellable;\n++import org.bukkit.event.HandlerList;\n++import org.bukkit.event.player.PlayerEvent;\n++import org.bukkit.potion.PotionEffectType;\n++import org.jetbrains.annotations.NotNull;\n++import org.jetbrains.annotations.Nullable;\n++\n++/**\n++ * Called when a player sets the effect for a beacon\n++ *\n++ */\n++public class PlayerChangeBeaconEffectEvent extends PlayerEvent implements Cancellable {\n++    private static final HandlerList handlers = new HandlerList();\n++\n++    private PotionEffectType primary;\n++    private PotionEffectType secondary;\n++\n++    private boolean isCancelled;\n++\n++    public PlayerChangeBeaconEffectEvent(@NotNull Player player, @NotNull PotionEffectType primary, @NotNull PotionEffectType secondary) {\n++        super(player);\n++        this.primary = primary;\n++        this.secondary = secondary;\n++        this.isCancelled = false;\n++    }\n++\n++    /**\n++     * @return the primary effect\n++     */\n++    @Nullable public PotionEffectType getPrimary() {\n++        return primary;\n++    }\n++\n++    /**\n++     * Sets the primary effect\n++     * <p>\n++     * NOTE: The primary effect still has to be one of the valid effects for a beacon.\n++     * @param primary the primary effect\n++     */\n++    public void setPrimary(@Nullable PotionEffectType primary) {\n++        this.primary = primary;\n++    }\n++\n++    /**\n++     * @return the secondary effect\n++     */\n++    @Nullable public PotionEffectType getSecondary() {\n++        return secondary;\n++    }\n++\n++    /**\n++     * Sets the secondary effect\n++     * <p>\n++     * This only has an effect when the beacon is able to accept a secondary effect.\n++     * NOTE: The secondary effect still has to be a valid effect for a beacon.\n++     * @param secondary the secondary effect", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7464e6327a1d0d1b841d83972831e93a70971b97"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjI0NDQ1OnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0524-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNjoxM1rOHatung==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNjoxM1rOHatung==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc3NDIzOA==", "bodyText": "Unless I'm missing something, this should be commented with Paper start & Paper end.", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r497774238", "createdAt": "2020-09-30T20:16:13Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0524-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,57 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:14:51 -0600\n+Subject: [PATCH] Added firing of PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/PlayerConnection.java b/src/main/java/net/minecraft/server/PlayerConnection.java\n+index 10e3bf60f13fbc8e26071bcfe8d19cbb635662a9..77c23c2f38c0778fe01820366612fc9b17414f35 100644\n+--- a/src/main/java/net/minecraft/server/PlayerConnection.java\n++++ b/src/main/java/net/minecraft/server/PlayerConnection.java\n+@@ -1,5 +1,6 @@\n+ package net.minecraft.server;\n+ \n++import com.destroystokyo.paper.event.player.PlayerChangeBeaconEffectEvent;\n+ import com.google.common.primitives.Doubles;\n+ import com.google.common.primitives.Floats;\n+ import com.mojang.brigadier.ParseResults;\n+@@ -26,6 +27,7 @@ import org.bukkit.Location;\n+ import org.bukkit.craftbukkit.entity.CraftPlayer;\n+ import org.bukkit.craftbukkit.event.CraftEventFactory;\n+ import org.bukkit.craftbukkit.inventory.CraftItemStack;\n++import org.bukkit.craftbukkit.potion.CraftPotionEffectType;\n+ import org.bukkit.craftbukkit.util.CraftChatMessage;\n+ import org.bukkit.craftbukkit.util.CraftMagicNumbers;\n+ import org.bukkit.craftbukkit.util.LazyPlayerSet;\n+@@ -58,6 +60,8 @@ import org.bukkit.event.player.PlayerToggleSprintEvent;\n+ import org.bukkit.inventory.CraftingInventory;\n+ import org.bukkit.inventory.EquipmentSlot;\n+ import org.bukkit.inventory.InventoryView;\n++import org.bukkit.potion.PotionEffect;\n++import org.bukkit.potion.PotionEffectType;\n+ import org.bukkit.util.NumberConversions;\n+ import com.destroystokyo.paper.event.player.IllegalPacketEvent; // Paper\n+ import com.destroystokyo.paper.event.player.PlayerJumpEvent; // Paper\n+@@ -728,9 +732,20 @@ public class PlayerConnection implements PacketListenerPlayIn {\n+     public void a(PacketPlayInBeacon packetplayinbeacon) {\n+         PlayerConnectionUtils.ensureMainThread(packetplayinbeacon, this, this.player.getWorldServer());\n+         if (this.player.activeContainer instanceof ContainerBeacon) {\n+-            ((ContainerBeacon) this.player.activeContainer).c(packetplayinbeacon.b(), packetplayinbeacon.c());\n+-        }\n++            ContainerBeacon containerBeacon = (ContainerBeacon) this.player.activeContainer;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7464e6327a1d0d1b841d83972831e93a70971b97"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjI0NTY3OnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0524-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNjozOFrOHatvgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNjozOFrOHatvgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc3NDQ2Nw==", "bodyText": "obfhelpers", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r497774467", "createdAt": "2020-09-30T20:16:38Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0524-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,57 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:14:51 -0600\n+Subject: [PATCH] Added firing of PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/PlayerConnection.java b/src/main/java/net/minecraft/server/PlayerConnection.java\n+index 10e3bf60f13fbc8e26071bcfe8d19cbb635662a9..77c23c2f38c0778fe01820366612fc9b17414f35 100644\n+--- a/src/main/java/net/minecraft/server/PlayerConnection.java\n++++ b/src/main/java/net/minecraft/server/PlayerConnection.java\n+@@ -1,5 +1,6 @@\n+ package net.minecraft.server;\n+ \n++import com.destroystokyo.paper.event.player.PlayerChangeBeaconEffectEvent;\n+ import com.google.common.primitives.Doubles;\n+ import com.google.common.primitives.Floats;\n+ import com.mojang.brigadier.ParseResults;\n+@@ -26,6 +27,7 @@ import org.bukkit.Location;\n+ import org.bukkit.craftbukkit.entity.CraftPlayer;\n+ import org.bukkit.craftbukkit.event.CraftEventFactory;\n+ import org.bukkit.craftbukkit.inventory.CraftItemStack;\n++import org.bukkit.craftbukkit.potion.CraftPotionEffectType;\n+ import org.bukkit.craftbukkit.util.CraftChatMessage;\n+ import org.bukkit.craftbukkit.util.CraftMagicNumbers;\n+ import org.bukkit.craftbukkit.util.LazyPlayerSet;\n+@@ -58,6 +60,8 @@ import org.bukkit.event.player.PlayerToggleSprintEvent;\n+ import org.bukkit.inventory.CraftingInventory;\n+ import org.bukkit.inventory.EquipmentSlot;\n+ import org.bukkit.inventory.InventoryView;\n++import org.bukkit.potion.PotionEffect;\n++import org.bukkit.potion.PotionEffectType;\n+ import org.bukkit.util.NumberConversions;\n+ import com.destroystokyo.paper.event.player.IllegalPacketEvent; // Paper\n+ import com.destroystokyo.paper.event.player.PlayerJumpEvent; // Paper\n+@@ -728,9 +732,20 @@ public class PlayerConnection implements PacketListenerPlayIn {\n+     public void a(PacketPlayInBeacon packetplayinbeacon) {\n+         PlayerConnectionUtils.ensureMainThread(packetplayinbeacon, this, this.player.getWorldServer());\n+         if (this.player.activeContainer instanceof ContainerBeacon) {\n+-            ((ContainerBeacon) this.player.activeContainer).c(packetplayinbeacon.b(), packetplayinbeacon.c());\n+-        }\n++            ContainerBeacon containerBeacon = (ContainerBeacon) this.player.activeContainer;\n++\n++            PotionEffectType primary = PotionEffectType.getById(packetplayinbeacon.b());\n++            PotionEffectType secondary = PotionEffectType.getById(packetplayinbeacon.c());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7464e6327a1d0d1b841d83972831e93a70971b97"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNjI0NjM4OnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0524-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNjo1MFrOHatv7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMDoxNjo1MFrOHatv7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc3NDU3NA==", "bodyText": "obfhelper", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r497774574", "createdAt": "2020-09-30T20:16:50Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0524-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,57 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:14:51 -0600\n+Subject: [PATCH] Added firing of PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/PlayerConnection.java b/src/main/java/net/minecraft/server/PlayerConnection.java\n+index 10e3bf60f13fbc8e26071bcfe8d19cbb635662a9..77c23c2f38c0778fe01820366612fc9b17414f35 100644\n+--- a/src/main/java/net/minecraft/server/PlayerConnection.java\n++++ b/src/main/java/net/minecraft/server/PlayerConnection.java\n+@@ -1,5 +1,6 @@\n+ package net.minecraft.server;\n+ \n++import com.destroystokyo.paper.event.player.PlayerChangeBeaconEffectEvent;\n+ import com.google.common.primitives.Doubles;\n+ import com.google.common.primitives.Floats;\n+ import com.mojang.brigadier.ParseResults;\n+@@ -26,6 +27,7 @@ import org.bukkit.Location;\n+ import org.bukkit.craftbukkit.entity.CraftPlayer;\n+ import org.bukkit.craftbukkit.event.CraftEventFactory;\n+ import org.bukkit.craftbukkit.inventory.CraftItemStack;\n++import org.bukkit.craftbukkit.potion.CraftPotionEffectType;\n+ import org.bukkit.craftbukkit.util.CraftChatMessage;\n+ import org.bukkit.craftbukkit.util.CraftMagicNumbers;\n+ import org.bukkit.craftbukkit.util.LazyPlayerSet;\n+@@ -58,6 +60,8 @@ import org.bukkit.event.player.PlayerToggleSprintEvent;\n+ import org.bukkit.inventory.CraftingInventory;\n+ import org.bukkit.inventory.EquipmentSlot;\n+ import org.bukkit.inventory.InventoryView;\n++import org.bukkit.potion.PotionEffect;\n++import org.bukkit.potion.PotionEffectType;\n+ import org.bukkit.util.NumberConversions;\n+ import com.destroystokyo.paper.event.player.IllegalPacketEvent; // Paper\n+ import com.destroystokyo.paper.event.player.PlayerJumpEvent; // Paper\n+@@ -728,9 +732,20 @@ public class PlayerConnection implements PacketListenerPlayIn {\n+     public void a(PacketPlayInBeacon packetplayinbeacon) {\n+         PlayerConnectionUtils.ensureMainThread(packetplayinbeacon, this, this.player.getWorldServer());\n+         if (this.player.activeContainer instanceof ContainerBeacon) {\n+-            ((ContainerBeacon) this.player.activeContainer).c(packetplayinbeacon.b(), packetplayinbeacon.c());\n+-        }\n++            ContainerBeacon containerBeacon = (ContainerBeacon) this.player.activeContainer;\n++\n++            PotionEffectType primary = PotionEffectType.getById(packetplayinbeacon.b());\n++            PotionEffectType secondary = PotionEffectType.getById(packetplayinbeacon.c());\n+ \n++            PlayerChangeBeaconEffectEvent event = new PlayerChangeBeaconEffectEvent(this.getPlayer(), primary, secondary);\n++\n++            if (event.callEvent()) {\n++                int primaryID = event.getPrimary() == null ? 0 : event.getPrimary().getId();\n++                int secondaryID = event.getSecondary() == null ? 0 : event.getSecondary().getId();\n++                containerBeacon.c(primaryID, secondaryID);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7464e6327a1d0d1b841d83972831e93a70971b97"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNTM5NzE4OnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0596-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQyMToxMToxOVrOHsVxdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQyMToxNTowMVrOHsV4DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI1NjExNw==", "bodyText": "Get rid of the patch for PlayerConnection class.", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r516256117", "createdAt": "2020-11-02T21:11:19Z", "author": {"login": "JOO200"}, "path": "Spigot-Server-Patches/0596-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,52 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:14:51 -0600\n+Subject: [PATCH] Added firing of PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/ContainerBeacon.java b/src/main/java/net/minecraft/server/ContainerBeacon.java\n+index 288390bf9210f0fcc7c85e3093a4924614dc1573..b4df9e9e4df6b7ca657d812fada1ddb2e654c668 100644\n+--- a/src/main/java/net/minecraft/server/ContainerBeacon.java\n++++ b/src/main/java/net/minecraft/server/ContainerBeacon.java\n+@@ -1,6 +1,11 @@\n+ package net.minecraft.server;\n+ \n+ import org.bukkit.craftbukkit.inventory.CraftInventoryView; // CraftBukkit\n++// Paper start\n++import io.papermc.paper.event.player.PlayerChangeBeaconEffectEvent;\n++import org.bukkit.entity.Player;\n++import org.bukkit.potion.PotionEffectType;\n++// Paper end\n+ \n+ public class ContainerBeacon extends Container {\n+ \n+@@ -128,9 +133,14 @@ public class ContainerBeacon extends Container {\n+ \n+     public void c(int i, int j) {\n+         if (this.d.hasItem()) {\n+-            this.containerProperties.setProperty(1, i);\n+-            this.containerProperties.setProperty(2, j);\n+-            this.d.a(1);\n++            // Paper start\n++            PlayerChangeBeaconEffectEvent event = new PlayerChangeBeaconEffectEvent((Player) this.player.player.getBukkitEntity(), PotionEffectType.getById(i), PotionEffectType.getById(j), this.containerAccess.getLocation().getBlock());\n++            if (event.callEvent()) {\n++                this.containerProperties.setProperty(1, event.getPrimary() == null ? 0 : event.getPrimary().getId());\n++                this.containerProperties.setProperty(2, event.getSecondary() == null ? 0 : event.getSecondary().getId());\n++                this.d.a(1);\n++            }\n++            // Paper end\n+         }\n+ \n+     }\n+diff --git a/src/main/java/net/minecraft/server/PlayerConnection.java b/src/main/java/net/minecraft/server/PlayerConnection.java", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19eac97749b2970ccc08b5fa4d7f591f813b8feb"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI1NzgwNA==", "bodyText": "ugh lol. I thought I got it, missed a newline I guess", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r516257804", "createdAt": "2020-11-02T21:15:01Z", "author": {"login": "Machine-Maker"}, "path": "Spigot-Server-Patches/0596-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,52 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:14:51 -0600\n+Subject: [PATCH] Added firing of PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/ContainerBeacon.java b/src/main/java/net/minecraft/server/ContainerBeacon.java\n+index 288390bf9210f0fcc7c85e3093a4924614dc1573..b4df9e9e4df6b7ca657d812fada1ddb2e654c668 100644\n+--- a/src/main/java/net/minecraft/server/ContainerBeacon.java\n++++ b/src/main/java/net/minecraft/server/ContainerBeacon.java\n+@@ -1,6 +1,11 @@\n+ package net.minecraft.server;\n+ \n+ import org.bukkit.craftbukkit.inventory.CraftInventoryView; // CraftBukkit\n++// Paper start\n++import io.papermc.paper.event.player.PlayerChangeBeaconEffectEvent;\n++import org.bukkit.entity.Player;\n++import org.bukkit.potion.PotionEffectType;\n++// Paper end\n+ \n+ public class ContainerBeacon extends Container {\n+ \n+@@ -128,9 +133,14 @@ public class ContainerBeacon extends Container {\n+ \n+     public void c(int i, int j) {\n+         if (this.d.hasItem()) {\n+-            this.containerProperties.setProperty(1, i);\n+-            this.containerProperties.setProperty(2, j);\n+-            this.d.a(1);\n++            // Paper start\n++            PlayerChangeBeaconEffectEvent event = new PlayerChangeBeaconEffectEvent((Player) this.player.player.getBukkitEntity(), PotionEffectType.getById(i), PotionEffectType.getById(j), this.containerAccess.getLocation().getBlock());\n++            if (event.callEvent()) {\n++                this.containerProperties.setProperty(1, event.getPrimary() == null ? 0 : event.getPrimary().getId());\n++                this.containerProperties.setProperty(2, event.getSecondary() == null ? 0 : event.getSecondary().getId());\n++                this.d.a(1);\n++            }\n++            // Paper end\n+         }\n+ \n+     }\n+diff --git a/src/main/java/net/minecraft/server/PlayerConnection.java b/src/main/java/net/minecraft/server/PlayerConnection.java", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjI1NjExNw=="}, "originalCommit": {"oid": "19eac97749b2970ccc08b5fa4d7f591f813b8feb"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMzY4OTc3OnYy", "diffSide": "RIGHT", "path": "Spigot-API-Patches/0236-Added-PlayerChangeBeaconEffectEvent.patch", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQxNToxOToxN1rOII8bGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQxOTo0NDowM1rOII9__A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI0OTQ5OQ==", "bodyText": "Have you looked into whether it'd be possible to alleviate/remove this requirement?", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r546249499", "createdAt": "2020-12-19T15:19:17Z", "author": {"login": "Proximyst"}, "path": "Spigot-API-Patches/0236-Added-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,122 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:12:18 -0600\n+Subject: [PATCH] Added PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/io/papermc/paper/event/player/PlayerChangeBeaconEffectEvent.java b/src/main/java/io/papermc/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+new file mode 100644\n+index 0000000000000000000000000000000000000000..d662b99cebb5aa0b2e21c6ba0a076517fa2f48b1\n+--- /dev/null\n++++ b/src/main/java/io/papermc/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+@@ -0,0 +1,110 @@\n++package io.papermc.paper.event.player;\n++\n++import org.bukkit.block.Block;\n++import org.bukkit.entity.Player;\n++import org.bukkit.event.Cancellable;\n++import org.bukkit.event.HandlerList;\n++import org.bukkit.event.player.PlayerEvent;\n++import org.bukkit.potion.PotionEffectType;\n++import org.jetbrains.annotations.NotNull;\n++import org.jetbrains.annotations.Nullable;\n++\n++/**\n++ * Called when a player sets the effect for a beacon\n++ */\n++public class PlayerChangeBeaconEffectEvent extends PlayerEvent implements Cancellable {\n++    private static final HandlerList handlers = new HandlerList();\n++\n++    private PotionEffectType primary;\n++    private PotionEffectType secondary;\n++    private final Block beacon;\n++\n++    private boolean isCancelled;\n++\n++    public PlayerChangeBeaconEffectEvent(@NotNull Player player, @Nullable PotionEffectType primary, @Nullable PotionEffectType secondary, @Nullable Block beacon) {\n++        super(player); this.primary = primary; this.secondary = secondary; this.isCancelled = false; this.beacon = beacon;\n++    }\n++\n++    /**\n++     * @return the primary effect\n++     */\n++    @Nullable public PotionEffectType getPrimary() {\n++        return primary;\n++    }\n++\n++    /**\n++     * Sets the primary effect\n++     * <p>\n++     * NOTE: The primary effect still has to be one of the valid effects for a beacon.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57d613528cebed0d8d6f9fa7c3b4fd1748ce85ec"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI3NTMyNA==", "bodyText": "Yeah, it might be possible. Right now, TileEntityBeacon.a just has a final 2d array of possible effects for beacons, and if its not one of those, it just sets the effect to null or no effect. So maybe that's something that can be looked at in the future, but I don't think its in the scope of this PR.", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r546275324", "createdAt": "2020-12-19T19:44:03Z", "author": {"login": "Machine-Maker"}, "path": "Spigot-API-Patches/0236-Added-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,122 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:12:18 -0600\n+Subject: [PATCH] Added PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/io/papermc/paper/event/player/PlayerChangeBeaconEffectEvent.java b/src/main/java/io/papermc/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+new file mode 100644\n+index 0000000000000000000000000000000000000000..d662b99cebb5aa0b2e21c6ba0a076517fa2f48b1\n+--- /dev/null\n++++ b/src/main/java/io/papermc/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+@@ -0,0 +1,110 @@\n++package io.papermc.paper.event.player;\n++\n++import org.bukkit.block.Block;\n++import org.bukkit.entity.Player;\n++import org.bukkit.event.Cancellable;\n++import org.bukkit.event.HandlerList;\n++import org.bukkit.event.player.PlayerEvent;\n++import org.bukkit.potion.PotionEffectType;\n++import org.jetbrains.annotations.NotNull;\n++import org.jetbrains.annotations.Nullable;\n++\n++/**\n++ * Called when a player sets the effect for a beacon\n++ */\n++public class PlayerChangeBeaconEffectEvent extends PlayerEvent implements Cancellable {\n++    private static final HandlerList handlers = new HandlerList();\n++\n++    private PotionEffectType primary;\n++    private PotionEffectType secondary;\n++    private final Block beacon;\n++\n++    private boolean isCancelled;\n++\n++    public PlayerChangeBeaconEffectEvent(@NotNull Player player, @Nullable PotionEffectType primary, @Nullable PotionEffectType secondary, @Nullable Block beacon) {\n++        super(player); this.primary = primary; this.secondary = secondary; this.isCancelled = false; this.beacon = beacon;\n++    }\n++\n++    /**\n++     * @return the primary effect\n++     */\n++    @Nullable public PotionEffectType getPrimary() {\n++        return primary;\n++    }\n++\n++    /**\n++     * Sets the primary effect\n++     * <p>\n++     * NOTE: The primary effect still has to be one of the valid effects for a beacon.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI0OTQ5OQ=="}, "originalCommit": {"oid": "57d613528cebed0d8d6f9fa7c3b4fd1748ce85ec"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMzY5MDExOnYy", "diffSide": "RIGHT", "path": "Spigot-API-Patches/0236-Added-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQxNToxOTo0N1rOII8bRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQxNToxOTo0N1rOII8bRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI0OTU0Mg==", "bodyText": "\"not take effect\" - will they still be saved, or just never apply? If latter, does this persist cross-reboot?", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r546249542", "createdAt": "2020-12-19T15:19:47Z", "author": {"login": "Proximyst"}, "path": "Spigot-API-Patches/0236-Added-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,122 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:12:18 -0600\n+Subject: [PATCH] Added PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/io/papermc/paper/event/player/PlayerChangeBeaconEffectEvent.java b/src/main/java/io/papermc/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+new file mode 100644\n+index 0000000000000000000000000000000000000000..d662b99cebb5aa0b2e21c6ba0a076517fa2f48b1\n+--- /dev/null\n++++ b/src/main/java/io/papermc/paper/event/player/PlayerChangeBeaconEffectEvent.java\n+@@ -0,0 +1,110 @@\n++package io.papermc.paper.event.player;\n++\n++import org.bukkit.block.Block;\n++import org.bukkit.entity.Player;\n++import org.bukkit.event.Cancellable;\n++import org.bukkit.event.HandlerList;\n++import org.bukkit.event.player.PlayerEvent;\n++import org.bukkit.potion.PotionEffectType;\n++import org.jetbrains.annotations.NotNull;\n++import org.jetbrains.annotations.Nullable;\n++\n++/**\n++ * Called when a player sets the effect for a beacon\n++ */\n++public class PlayerChangeBeaconEffectEvent extends PlayerEvent implements Cancellable {\n++    private static final HandlerList handlers = new HandlerList();\n++\n++    private PotionEffectType primary;\n++    private PotionEffectType secondary;\n++    private final Block beacon;\n++\n++    private boolean isCancelled;\n++\n++    public PlayerChangeBeaconEffectEvent(@NotNull Player player, @Nullable PotionEffectType primary, @Nullable PotionEffectType secondary, @Nullable Block beacon) {\n++        super(player); this.primary = primary; this.secondary = secondary; this.isCancelled = false; this.beacon = beacon;\n++    }\n++\n++    /**\n++     * @return the primary effect\n++     */\n++    @Nullable public PotionEffectType getPrimary() {\n++        return primary;\n++    }\n++\n++    /**\n++     * Sets the primary effect\n++     * <p>\n++     * NOTE: The primary effect still has to be one of the valid effects for a beacon.\n++     *\n++     * @param primary the primary effect\n++     */\n++    public void setPrimary(@Nullable PotionEffectType primary) {\n++        this.primary = primary;\n++    }\n++\n++    /**\n++     * @return the secondary effect\n++     */\n++    @Nullable public PotionEffectType getSecondary() {\n++        return secondary;\n++    }\n++\n++    /**\n++     * Sets the secondary effect\n++     * <p>\n++     * This only has an effect when the beacon is able to accept a secondary effect.\n++     * NOTE: The secondary effect still has to be a valid effect for a beacon.\n++     *\n++     * @param secondary the secondary effect\n++     */\n++    public void setSecondary(@Nullable PotionEffectType secondary) {\n++        this.secondary = secondary;\n++    }\n++\n++    /**\n++     * @return the beacon block associated with this event, or null if not found\n++     */\n++    @Nullable\n++    public Block getBeacon() {\n++        return beacon;\n++    }\n++\n++    /**\n++     * Gets the cancellation state of this event. A cancelled event will not\n++     * be executed in the server, but will still pass to other plugins\n++     * <p>\n++     * If a {@link PlayerChangeBeaconEffectEvent} is cancelled, the changes will\n++     * not take effect\n++     *\n++     * @return true if this event is cancelled\n++     */\n++    @Override\n++    public boolean isCancelled() {\n++        return this.isCancelled;\n++    }\n++\n++    /**\n++     * Sets the cancellation state of this event. A cancelled event will not\n++     * be executed in the server, but will still pass to other plugins\n++     * <p>\n++     * If a {@link PlayerChangeBeaconEffectEvent} is cancelled, the changes will\n++     * not take effect", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57d613528cebed0d8d6f9fa7c3b4fd1748ce85ec"}, "originalPosition": 104}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMzY5MDY0OnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0601-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQxNToyMDo0MlrOII8bjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQxNToyMDo0MlrOII8bjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI0OTYxMw==", "bodyText": "Don't touch this line.", "url": "https://github.com/PaperMC/Paper/pull/3615#discussion_r546249613", "createdAt": "2020-12-19T15:20:42Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0601-Added-firing-of-PlayerChangeBeaconEffectEvent.patch", "diffHunk": "@@ -0,0 +1,40 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 24 Jun 2020 15:14:51 -0600\n+Subject: [PATCH] Added firing of PlayerChangeBeaconEffectEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/ContainerBeacon.java b/src/main/java/net/minecraft/server/ContainerBeacon.java\n+index 288390bf9210f0fcc7c85e3093a4924614dc1573..b4df9e9e4df6b7ca657d812fada1ddb2e654c668 100644\n+--- a/src/main/java/net/minecraft/server/ContainerBeacon.java\n++++ b/src/main/java/net/minecraft/server/ContainerBeacon.java\n+@@ -1,6 +1,11 @@\n+ package net.minecraft.server;\n+ \n+ import org.bukkit.craftbukkit.inventory.CraftInventoryView; // CraftBukkit\n++// Paper start\n++import io.papermc.paper.event.player.PlayerChangeBeaconEffectEvent;\n++import org.bukkit.entity.Player;\n++import org.bukkit.potion.PotionEffectType;\n++// Paper end\n+ \n+ public class ContainerBeacon extends Container {\n+ \n+@@ -128,9 +133,14 @@ public class ContainerBeacon extends Container {\n+ \n+     public void c(int i, int j) {\n+         if (this.d.hasItem()) {\n+-            this.containerProperties.setProperty(1, i);\n+-            this.containerProperties.setProperty(2, j);\n+-            this.d.a(1);\n++            // Paper start\n++            PlayerChangeBeaconEffectEvent event = new PlayerChangeBeaconEffectEvent((Player) this.player.player.getBukkitEntity(), PotionEffectType.getById(i), PotionEffectType.getById(j), this.containerAccess.getLocation().getBlock());\n++            if (event.callEvent()) {\n++                this.containerProperties.setProperty(1, event.getPrimary() == null ? 0 : event.getPrimary().getId());\n++                this.containerProperties.setProperty(2, event.getSecondary() == null ? 0 : event.getSecondary().getId());\n++                this.d.a(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57d613528cebed0d8d6f9fa7c3b4fd1748ce85ec"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1924, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}