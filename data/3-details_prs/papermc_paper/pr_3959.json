{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyNzc5Nzkw", "number": 3959, "title": "Use title packet for actionbar methods", "bodyText": "This is quite the micro change, but this makes Paper's actionbar methods use the title packet instead of the chat packet to ever so slightly reduce encoded data (without the uuid, since that's always the system uuid anyways).\nAlso puts the title packet use for components to a method inside of the Player interface, as opposed to Spigot's sub class, so that using the stupid sub class isn't encouraged any more than it already is\nThought this might just be enough to be at least slightly better in cases of extremely frequent actionbar spam / using the 'more appropriate' packet, since what you send isn't  \"Game Info\", but a custom actionbar title, which also spares the client from 1-2 extra checks", "createdAt": "2020-07-19T21:16:22Z", "url": "https://github.com/PaperMC/Paper/pull/3959", "merged": true, "mergeCommit": {"oid": "0901ffd046156b8dfdc97a797ae4c8cf0cce0449"}, "closed": true, "closedAt": "2020-07-22T08:01:36Z", "author": {"login": "kennytv"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2kNyVAFqTQ1MTE2NTk4NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3WEH-ABqjM1NzQ1NDUxMzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTY1OTg1", "url": "https://github.com/PaperMC/Paper/pull/3959#pullrequestreview-451165985", "createdAt": "2020-07-19T21:49:38Z", "commit": {"oid": "2b3b6479d7b23a25fca80a71b423613fb20b3de1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTY4ODE0", "url": "https://github.com/PaperMC/Paper/pull/3959#pullrequestreview-451168814", "createdAt": "2020-07-19T22:36:03Z", "commit": {"oid": "2b3b6479d7b23a25fca80a71b423613fb20b3de1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b3b6479d7b23a25fca80a71b423613fb20b3de1", "author": {"user": {"login": "kennytv", "name": "Nassim Jahnke"}}, "url": "https://github.com/PaperMC/Paper/commit/2b3b6479d7b23a25fca80a71b423613fb20b3de1", "committedDate": "2020-07-19T19:19:15Z", "message": "Use title packet for actionbar methods"}, "afterCommit": {"oid": "b1cc59a85b7e79a8a75bbad11a1147d759db6ba2", "author": {"user": {"login": "kennytv", "name": "Nassim Jahnke"}}, "url": "https://github.com/PaperMC/Paper/commit/b1cc59a85b7e79a8a75bbad11a1147d759db6ba2", "committedDate": "2020-07-22T06:26:17Z", "message": "Use title packet for actionbar methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMDQ0NzMz", "url": "https://github.com/PaperMC/Paper/pull/3959#pullrequestreview-453044733", "createdAt": "2020-07-22T07:01:48Z", "commit": {"oid": "b1cc59a85b7e79a8a75bbad11a1147d759db6ba2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNzowMTo0OFrOG1VUjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNzowMTo0OFrOG1VUjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU3NzAzNw==", "bodyText": "This is an API break. it should be CraftChatMessage.fromString() instead.", "url": "https://github.com/PaperMC/Paper/pull/3959#discussion_r458577037", "createdAt": "2020-07-22T07:01:48Z", "author": {"login": "aikar"}, "path": "Spigot-Server-Patches/0131-String-based-Action-Bar-API.patch", "diffHunk": "@@ -18,17 +18,23 @@ index 275c1d2d1eb2649de9a9b5aece6e88c21362efba..d72ba7f76c42fd525a5b59a999a0c08e\n  \n      public static <K, V> Collector<Entry<? extends K, ? extends V>, ?, Map<K, V>> a() {\n diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java\n-index 9e9d054ed9d345eb7ab76ad9c3526889aeb220e3..e7c42fb4fd1235a934c16f4cccc1b1a66b3672a0 100644\n+index 9e9d054ed9d345eb7ab76ad9c3526889aeb220e3..abaeeea8ce0712d6ac8af938f2132a6e2afd7f45 100644\n --- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java\n +++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java\n-@@ -221,6 +221,18 @@ public class CraftPlayer extends CraftHumanEntity implements Player {\n+@@ -221,6 +221,24 @@ public class CraftPlayer extends CraftHumanEntity implements Player {\n      }\n  \n      // Paper start\n +    @Override\n++    public void sendActionBar(BaseComponent[] message) {\n++        if (getHandle().playerConnection == null) return;\n++        getHandle().playerConnection.sendPacket(new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.ACTIONBAR, message, -1, -1, -1));\n++    }\n++\n++    @Override\n +    public void sendActionBar(String message) {\n +        if (getHandle().playerConnection == null || message == null || message.isEmpty()) return;\n-+        getHandle().playerConnection.sendPacket(new PacketPlayOutChat(new net.minecraft.server.ChatComponentText(message), net.minecraft.server.ChatMessageType.GAME_INFO, SystemUtils.getNullUUID()));\n++        getHandle().playerConnection.sendPacket(new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.ACTIONBAR, new net.minecraft.server.ChatComponentText(message)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1cc59a85b7e79a8a75bbad11a1147d759db6ba2"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ab01faf751dcfbfc6b3d5ae22913edb7b9acb62", "author": {"user": {"login": "kennytv", "name": "Nassim Jahnke"}}, "url": "https://github.com/PaperMC/Paper/commit/7ab01faf751dcfbfc6b3d5ae22913edb7b9acb62", "committedDate": "2020-07-22T07:51:35Z", "message": "Use title packet for actionbar methods"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b1cc59a85b7e79a8a75bbad11a1147d759db6ba2", "author": {"user": {"login": "kennytv", "name": "Nassim Jahnke"}}, "url": "https://github.com/PaperMC/Paper/commit/b1cc59a85b7e79a8a75bbad11a1147d759db6ba2", "committedDate": "2020-07-22T06:26:17Z", "message": "Use title packet for actionbar methods"}, "afterCommit": {"oid": "7ab01faf751dcfbfc6b3d5ae22913edb7b9acb62", "author": {"user": {"login": "kennytv", "name": "Nassim Jahnke"}}, "url": "https://github.com/PaperMC/Paper/commit/7ab01faf751dcfbfc6b3d5ae22913edb7b9acb62", "committedDate": "2020-07-22T07:51:35Z", "message": "Use title packet for actionbar methods"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1690, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}