{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczNTk0MTY0", "number": 4210, "title": "Fix Entity Teleportation and cancel velocity if teleported", "bodyText": "Uses correct setPositionRotation for Entity teleporting instead of setLocation\nas this is how Vanilla teleports entities.\nCancel any pending motion when teleported.\nThis change should hopefully help resolve issues with entity teleportation causing major chunk loading issues resulting in hung servers and out of memory.\nPlease help with testing by running a test build:\nhttps://cdn.discordapp.com/attachments/748269415497465927/750022487944724571/fix-entity-teleport-r2.jar", "createdAt": "2020-08-26T01:49:55Z", "url": "https://github.com/PaperMC/Paper/pull/4210", "merged": true, "mergeCommit": {"oid": "43e5174a0157c04709f8132ab3711237d76d0954"}, "closed": true, "closedAt": "2020-09-04T01:48:45Z", "author": {"login": "aikar"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdC8EyYgFqTQ3NjQ5NDgyOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEU60ogBqjM3MTA1MzU2NTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NDk0ODI5", "url": "https://github.com/PaperMC/Paper/pull/4210#pullrequestreview-476494829", "createdAt": "2020-08-27T08:24:37Z", "commit": {"oid": "84fd1b6314490d34746e8468bde5a2b8a3bd54e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODoyNDozN1rOHIFubg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODoyNDozN1rOHIFubg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0NDQ2Mg==", "bodyText": "Vec3D.a otherwise ram go kaboom", "url": "https://github.com/PaperMC/Paper/pull/4210#discussion_r478244462", "createdAt": "2020-08-27T08:24:37Z", "author": {"login": "MrIvanPlays"}, "path": "Spigot-Server-Patches/0565-Fix-Entity-Teleportation-and-cancel-velocity-if-tele.patch", "diffHunk": "@@ -0,0 +1,57 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Aikar <aikar@aikar.co>\n+Date: Tue, 25 Aug 2020 20:45:36 -0400\n+Subject: [PATCH] Fix Entity Teleportation and cancel velocity if teleported\n+\n+Uses correct setPositionRotation for Entity teleporting instead of setLocation\n+as this is how Vanilla teleports entities.\n+\n+Cancel any pending motion when teleported.\n+\n+diff --git a/src/main/java/net/minecraft/server/Entity.java b/src/main/java/net/minecraft/server/Entity.java\n+index 97e61dae7927d7da18fcb23d9e4bf639234af4a5..f34eed12718e1a83d8a203abea72760476c84c5d 100644\n+--- a/src/main/java/net/minecraft/server/Entity.java\n++++ b/src/main/java/net/minecraft/server/Entity.java\n+@@ -1318,6 +1318,7 @@ public abstract class Entity implements INamableTileEntity, ICommandListener, Ke\n+     }\n+ \n+     public void setPositionRotation(double d0, double d1, double d2, float f, float f1) {\n++        this.mot = new Vec3D(0, 0, 0); // Paper - cancel entity velocity if teleported", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84fd1b6314490d34746e8468bde5a2b8a3bd54e7"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84fd1b6314490d34746e8468bde5a2b8a3bd54e7", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/84fd1b6314490d34746e8468bde5a2b8a3bd54e7", "committedDate": "2020-08-26T01:47:18Z", "message": "Fix Entity Teleportation and cancel velocity if teleported\n\nUses correct setPositionRotation for Entity teleporting instead of setLocation\nas this is how Vanilla teleports entities.\n\nCancel any pending motion when teleported."}, "afterCommit": {"oid": "6cf4a9a359fd598b57d8518e99965b253a972364", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/6cf4a9a359fd598b57d8518e99965b253a972364", "committedDate": "2020-08-27T21:43:28Z", "message": "Fix Entity Teleportation and cancel velocity if teleported\n\nUses correct setPositionRotation for Entity teleporting instead of setLocation\nas this is how Vanilla teleports entities.\n\nCancel any pending motion when teleported."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6cf4a9a359fd598b57d8518e99965b253a972364", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/6cf4a9a359fd598b57d8518e99965b253a972364", "committedDate": "2020-08-27T21:43:28Z", "message": "Fix Entity Teleportation and cancel velocity if teleported\n\nUses correct setPositionRotation for Entity teleporting instead of setLocation\nas this is how Vanilla teleports entities.\n\nCancel any pending motion when teleported."}, "afterCommit": {"oid": "c123ab69e3d6a43f7b2c06525c861405902a3c17", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/c123ab69e3d6a43f7b2c06525c861405902a3c17", "committedDate": "2020-08-28T15:22:52Z", "message": "Fix Entity Teleportation and cancel velocity if teleported\n\nUses correct setPositionRotation for Entity teleporting instead of setLocation\nas this is how Vanilla teleports entities.\n\nCancel any pending motion when teleported."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c123ab69e3d6a43f7b2c06525c861405902a3c17", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/c123ab69e3d6a43f7b2c06525c861405902a3c17", "committedDate": "2020-08-28T15:22:52Z", "message": "Fix Entity Teleportation and cancel velocity if teleported\n\nUses correct setPositionRotation for Entity teleporting instead of setLocation\nas this is how Vanilla teleports entities.\n\nCancel any pending motion when teleported."}, "afterCommit": {"oid": "12f276b7db6c463ebd7d9d33a8a56ee214d6dd77", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/12f276b7db6c463ebd7d9d33a8a56ee214d6dd77", "committedDate": "2020-08-31T15:53:36Z", "message": "Fix Entity Teleportation and cancel velocity if teleported\n\nUses correct setPositionRotation for Entity teleporting instead of setLocation\nas this is how Vanilla teleports entities.\n\nCancel any pending motion when teleported."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "057edab75a7786d00a4f76d4c6444635eab2c0ec", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/057edab75a7786d00a4f76d4c6444635eab2c0ec", "committedDate": "2020-08-31T15:55:10Z", "message": "Fix Entity Teleportation and cancel velocity if teleported\n\nUses correct setPositionRotation for Entity teleporting instead of setLocation\nas this is how Vanilla teleports entities.\n\nCancel any pending motion when teleported."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "12f276b7db6c463ebd7d9d33a8a56ee214d6dd77", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/12f276b7db6c463ebd7d9d33a8a56ee214d6dd77", "committedDate": "2020-08-31T15:53:36Z", "message": "Fix Entity Teleportation and cancel velocity if teleported\n\nUses correct setPositionRotation for Entity teleporting instead of setLocation\nas this is how Vanilla teleports entities.\n\nCancel any pending motion when teleported."}, "afterCommit": {"oid": "057edab75a7786d00a4f76d4c6444635eab2c0ec", "author": {"user": {"login": "aikar", "name": "Daniel Ennis"}}, "url": "https://github.com/PaperMC/Paper/commit/057edab75a7786d00a4f76d4c6444635eab2c0ec", "committedDate": "2020-08-31T15:55:10Z", "message": "Fix Entity Teleportation and cancel velocity if teleported\n\nUses correct setPositionRotation for Entity teleporting instead of setLocation\nas this is how Vanilla teleports entities.\n\nCancel any pending motion when teleported."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1553, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}