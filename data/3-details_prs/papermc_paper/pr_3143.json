{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzNDgzOTI1", "number": 3143, "title": "Allow using signs inside of spawn protection", "bodyText": "Signs have the ability to have a run_command tag that allows the player to execute a command by right clicking the sign. However the game sees this as \"using a sign\" in the same way as \"using a chest\" so it doesn't allow it.\nI propose we do allow signs to be right clicked inside of the spawn protection. I think this will be beneficial for most servers, for example choosing team in spawn. In case some server would like only op to use the signs that can be done in other ways using scoreboards.", "createdAt": "2020-04-15T00:50:12Z", "url": "https://github.com/PaperMC/Paper/pull/3143", "merged": true, "mergeCommit": {"oid": "48342b06ca2162005e62521fcf7eb83f11b91348"}, "closed": true, "closedAt": "2021-03-09T19:02:24Z", "author": {"login": "ntoonio"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX07_oAFqTM5MzYxOTkyNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABeBhT-iAH2gAyNDAzNDgzOTI1OjVkMTBiYmE0ZWY1MDk4ODVmODkxODNmMzM4NWUzZjU0M2YxZTVjN2U=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNjE5OTI3", "url": "https://github.com/PaperMC/Paper/pull/3143#pullrequestreview-393619927", "createdAt": "2020-04-15T09:46:56Z", "commit": {"oid": "940241952030998db01b4f82f5a15d976177d559"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxOTAwNTE0", "url": "https://github.com/PaperMC/Paper/pull/3143#pullrequestreview-401900514", "createdAt": "2020-04-28T14:35:48Z", "commit": {"oid": "940241952030998db01b4f82f5a15d976177d559"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMzUxNjEw", "url": "https://github.com/PaperMC/Paper/pull/3143#pullrequestreview-402351610", "createdAt": "2020-04-29T04:01:08Z", "commit": {"oid": "7e02e151c87971c050208ff0d10dec96e2e0a291"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNDowMTowOVrOGNu-5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNDowMToyMFrOGNu_DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA1NDQzNw==", "bodyText": "lets wrap the condition here with ( ) to be clearer to read.", "url": "https://github.com/PaperMC/Paper/pull/3143#discussion_r417054437", "createdAt": "2020-04-29T04:01:09Z", "author": {"login": "aikar"}, "path": "Spigot-Server-Patches/0477-Allow-using-signs-inside-spawn-protection.patch", "diffHunk": "@@ -0,0 +1,36 @@\n+From f3e4194397309af64500007e899f3d927e894a7c Mon Sep 17 00:00:00 2001\n+From: Anton Lindroth <ntoonio@gmail.com>\n+Date: Wed, 15 Apr 2020 01:54:02 +0200\n+Subject: [PATCH] Allow using signs inside spawn protection\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n+index 88a45e517..d44fa47a2 100644\n+--- a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n++++ b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n+@@ -689,4 +689,9 @@ public class PaperWorldConfig {\n+     private void lightQueueSize() {\n+         lightQueueSize = getInt(\"light-queue-size\", lightQueueSize);\n+     }\n++\n++    public boolean allowUsignSignsInsideSpawnProtection = false;\n++    private void allowUsignSignsInsideSpawnProtection() {\n++        allowUsignSignsInsideSpawnProtection = getBoolean(\"allow-using-signs-inside-spawn-protection\", allowUsignSignsInsideSpawnProtection);\n++    }\n+ }\n+diff --git a/src/main/java/net/minecraft/server/PlayerConnection.java b/src/main/java/net/minecraft/server/PlayerConnection.java\n+index 7929fcc80..6538db72b 100644\n+--- a/src/main/java/net/minecraft/server/PlayerConnection.java\n++++ b/src/main/java/net/minecraft/server/PlayerConnection.java\n+@@ -1366,7 +1366,7 @@ public class PlayerConnection implements PacketListenerPlayIn {\n+             IChatBaseComponent ichatbasecomponent = (new ChatMessage(\"build.tooHigh\", new Object[]{this.minecraftServer.getMaxBuildHeight()})).a(EnumChatFormat.RED);\n+ \n+             this.player.playerConnection.sendPacket(new PacketPlayOutChat(ichatbasecomponent, ChatMessageType.GAME_INFO));\n+-        } else if (this.teleportPos == null && this.player.g((double) blockposition.getX() + 0.5D, (double) blockposition.getY() + 0.5D, (double) blockposition.getZ() + 0.5D) < 64.0D && worldserver.a((EntityHuman) this.player, blockposition)) {\n++        } else if (this.teleportPos == null && this.player.g((double) blockposition.getX() + 0.5D, (double) blockposition.getY() + 0.5D, (double) blockposition.getZ() + 0.5D) < 64.0D && (worldserver.a((EntityHuman) this.player, blockposition) || clickedBlock.getBlock() instanceof net.minecraft.server.BlockSign && worldserver.paperConfig.allowUsignSignsInsideSpawnProtection)) { // Paper", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e02e151c87971c050208ff0d10dec96e2e0a291"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA1NDQ3Ng==", "bodyText": "typo in Using", "url": "https://github.com/PaperMC/Paper/pull/3143#discussion_r417054476", "createdAt": "2020-04-29T04:01:20Z", "author": {"login": "aikar"}, "path": "Spigot-Server-Patches/0477-Allow-using-signs-inside-spawn-protection.patch", "diffHunk": "@@ -0,0 +1,36 @@\n+From f3e4194397309af64500007e899f3d927e894a7c Mon Sep 17 00:00:00 2001\n+From: Anton Lindroth <ntoonio@gmail.com>\n+Date: Wed, 15 Apr 2020 01:54:02 +0200\n+Subject: [PATCH] Allow using signs inside spawn protection\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n+index 88a45e517..d44fa47a2 100644\n+--- a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n++++ b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n+@@ -689,4 +689,9 @@ public class PaperWorldConfig {\n+     private void lightQueueSize() {\n+         lightQueueSize = getInt(\"light-queue-size\", lightQueueSize);\n+     }\n++\n++    public boolean allowUsignSignsInsideSpawnProtection = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e02e151c87971c050208ff0d10dec96e2e0a291"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMTkyNTAw", "url": "https://github.com/PaperMC/Paper/pull/3143#pullrequestreview-543192500", "createdAt": "2020-12-02T20:01:57Z", "commit": {"oid": "6d0cd5f749b2746877fd8e4c079da82aec9aa101"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d10bba4ef509885f89183f3385e3f543f1e5c7e", "author": {"user": {"login": "ntoonio", "name": "Anton Lindroth"}}, "url": "https://github.com/PaperMC/Paper/commit/5d10bba4ef509885f89183f3385e3f543f1e5c7e", "committedDate": "2021-03-09T18:51:00Z", "message": "Allow signs that are inside of the spawn protection to be right clicked\nto use their run_command tag"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1265, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}