{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczNTk0MTY0", "number": 4210, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODoyNDozN1rOEdHW3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODoyNDozN1rOEdHW3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4OTY0NzAxOnYy", "diffSide": "RIGHT", "path": "Spigot-Server-Patches/0565-Fix-Entity-Teleportation-and-cancel-velocity-if-tele.patch", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwODoyNDozN1rOHIFubg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNDowNTozNFrOHIR-ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0NDQ2Mg==", "bodyText": "Vec3D.a otherwise ram go kaboom", "url": "https://github.com/PaperMC/Paper/pull/4210#discussion_r478244462", "createdAt": "2020-08-27T08:24:37Z", "author": {"login": "MrIvanPlays"}, "path": "Spigot-Server-Patches/0565-Fix-Entity-Teleportation-and-cancel-velocity-if-tele.patch", "diffHunk": "@@ -0,0 +1,57 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Aikar <aikar@aikar.co>\n+Date: Tue, 25 Aug 2020 20:45:36 -0400\n+Subject: [PATCH] Fix Entity Teleportation and cancel velocity if teleported\n+\n+Uses correct setPositionRotation for Entity teleporting instead of setLocation\n+as this is how Vanilla teleports entities.\n+\n+Cancel any pending motion when teleported.\n+\n+diff --git a/src/main/java/net/minecraft/server/Entity.java b/src/main/java/net/minecraft/server/Entity.java\n+index 97e61dae7927d7da18fcb23d9e4bf639234af4a5..f34eed12718e1a83d8a203abea72760476c84c5d 100644\n+--- a/src/main/java/net/minecraft/server/Entity.java\n++++ b/src/main/java/net/minecraft/server/Entity.java\n+@@ -1318,6 +1318,7 @@ public abstract class Entity implements INamableTileEntity, ICommandListener, Ke\n+     }\n+ \n+     public void setPositionRotation(double d0, double d1, double d2, float f, float f1) {\n++        this.mot = new Vec3D(0, 0, 0); // Paper - cancel entity velocity if teleported", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84fd1b6314490d34746e8468bde5a2b8a3bd54e7"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI4ODg5MQ==", "bodyText": "I'd say it's likely that the variable is modified in place elsewhere to avoid many more allocations; wouldn't wanna modify a global shared with all entities' movements...", "url": "https://github.com/PaperMC/Paper/pull/4210#discussion_r478288891", "createdAt": "2020-08-27T09:39:09Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0565-Fix-Entity-Teleportation-and-cancel-velocity-if-tele.patch", "diffHunk": "@@ -0,0 +1,57 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Aikar <aikar@aikar.co>\n+Date: Tue, 25 Aug 2020 20:45:36 -0400\n+Subject: [PATCH] Fix Entity Teleportation and cancel velocity if teleported\n+\n+Uses correct setPositionRotation for Entity teleporting instead of setLocation\n+as this is how Vanilla teleports entities.\n+\n+Cancel any pending motion when teleported.\n+\n+diff --git a/src/main/java/net/minecraft/server/Entity.java b/src/main/java/net/minecraft/server/Entity.java\n+index 97e61dae7927d7da18fcb23d9e4bf639234af4a5..f34eed12718e1a83d8a203abea72760476c84c5d 100644\n+--- a/src/main/java/net/minecraft/server/Entity.java\n++++ b/src/main/java/net/minecraft/server/Entity.java\n+@@ -1318,6 +1318,7 @@ public abstract class Entity implements INamableTileEntity, ICommandListener, Ke\n+     }\n+ \n+     public void setPositionRotation(double d0, double d1, double d2, float f, float f1) {\n++        this.mot = new Vec3D(0, 0, 0); // Paper - cancel entity velocity if teleported", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0NDQ2Mg=="}, "originalCommit": {"oid": "84fd1b6314490d34746e8468bde5a2b8a3bd54e7"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI5MDM0Mg==", "bodyText": "That object is immutable anyways, any sort of add function or similar will always create a new Vec3D object (so using the static zero vector should be fine)", "url": "https://github.com/PaperMC/Paper/pull/4210#discussion_r478290342", "createdAt": "2020-08-27T09:41:32Z", "author": {"login": "kennytv"}, "path": "Spigot-Server-Patches/0565-Fix-Entity-Teleportation-and-cancel-velocity-if-tele.patch", "diffHunk": "@@ -0,0 +1,57 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Aikar <aikar@aikar.co>\n+Date: Tue, 25 Aug 2020 20:45:36 -0400\n+Subject: [PATCH] Fix Entity Teleportation and cancel velocity if teleported\n+\n+Uses correct setPositionRotation for Entity teleporting instead of setLocation\n+as this is how Vanilla teleports entities.\n+\n+Cancel any pending motion when teleported.\n+\n+diff --git a/src/main/java/net/minecraft/server/Entity.java b/src/main/java/net/minecraft/server/Entity.java\n+index 97e61dae7927d7da18fcb23d9e4bf639234af4a5..f34eed12718e1a83d8a203abea72760476c84c5d 100644\n+--- a/src/main/java/net/minecraft/server/Entity.java\n++++ b/src/main/java/net/minecraft/server/Entity.java\n+@@ -1318,6 +1318,7 @@ public abstract class Entity implements INamableTileEntity, ICommandListener, Ke\n+     }\n+ \n+     public void setPositionRotation(double d0, double d1, double d2, float f, float f1) {\n++        this.mot = new Vec3D(0, 0, 0); // Paper - cancel entity velocity if teleported", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0NDQ2Mg=="}, "originalCommit": {"oid": "84fd1b6314490d34746e8468bde5a2b8a3bd54e7"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyODU4Mw==", "bodyText": "Vec3D's are spam created every single movement operation, so this usage is like 5% or less comparative to that.\nSo no it won't \"go boom\", as these call sites are lower velocity. but yes it could be the static version.", "url": "https://github.com/PaperMC/Paper/pull/4210#discussion_r478428583", "createdAt": "2020-08-27T13:42:34Z", "author": {"login": "aikar"}, "path": "Spigot-Server-Patches/0565-Fix-Entity-Teleportation-and-cancel-velocity-if-tele.patch", "diffHunk": "@@ -0,0 +1,57 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Aikar <aikar@aikar.co>\n+Date: Tue, 25 Aug 2020 20:45:36 -0400\n+Subject: [PATCH] Fix Entity Teleportation and cancel velocity if teleported\n+\n+Uses correct setPositionRotation for Entity teleporting instead of setLocation\n+as this is how Vanilla teleports entities.\n+\n+Cancel any pending motion when teleported.\n+\n+diff --git a/src/main/java/net/minecraft/server/Entity.java b/src/main/java/net/minecraft/server/Entity.java\n+index 97e61dae7927d7da18fcb23d9e4bf639234af4a5..f34eed12718e1a83d8a203abea72760476c84c5d 100644\n+--- a/src/main/java/net/minecraft/server/Entity.java\n++++ b/src/main/java/net/minecraft/server/Entity.java\n+@@ -1318,6 +1318,7 @@ public abstract class Entity implements INamableTileEntity, ICommandListener, Ke\n+     }\n+ \n+     public void setPositionRotation(double d0, double d1, double d2, float f, float f1) {\n++        this.mot = new Vec3D(0, 0, 0); // Paper - cancel entity velocity if teleported", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0NDQ2Mg=="}, "originalCommit": {"oid": "84fd1b6314490d34746e8468bde5a2b8a3bd54e7"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQzOTQ3Mw==", "bodyText": "as you say but i think using the one already in memory is better.", "url": "https://github.com/PaperMC/Paper/pull/4210#discussion_r478439473", "createdAt": "2020-08-27T13:57:30Z", "author": {"login": "MrIvanPlays"}, "path": "Spigot-Server-Patches/0565-Fix-Entity-Teleportation-and-cancel-velocity-if-tele.patch", "diffHunk": "@@ -0,0 +1,57 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Aikar <aikar@aikar.co>\n+Date: Tue, 25 Aug 2020 20:45:36 -0400\n+Subject: [PATCH] Fix Entity Teleportation and cancel velocity if teleported\n+\n+Uses correct setPositionRotation for Entity teleporting instead of setLocation\n+as this is how Vanilla teleports entities.\n+\n+Cancel any pending motion when teleported.\n+\n+diff --git a/src/main/java/net/minecraft/server/Entity.java b/src/main/java/net/minecraft/server/Entity.java\n+index 97e61dae7927d7da18fcb23d9e4bf639234af4a5..f34eed12718e1a83d8a203abea72760476c84c5d 100644\n+--- a/src/main/java/net/minecraft/server/Entity.java\n++++ b/src/main/java/net/minecraft/server/Entity.java\n+@@ -1318,6 +1318,7 @@ public abstract class Entity implements INamableTileEntity, ICommandListener, Ke\n+     }\n+ \n+     public void setPositionRotation(double d0, double d1, double d2, float f, float f1) {\n++        this.mot = new Vec3D(0, 0, 0); // Paper - cancel entity velocity if teleported", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0NDQ2Mg=="}, "originalCommit": {"oid": "84fd1b6314490d34746e8468bde5a2b8a3bd54e7"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ0NTI1MQ==", "bodyText": "The conversation was left unresolved and he did admit it could (and probably will) be the static version. You agree on it...", "url": "https://github.com/PaperMC/Paper/pull/4210#discussion_r478445251", "createdAt": "2020-08-27T14:05:34Z", "author": {"login": "Proximyst"}, "path": "Spigot-Server-Patches/0565-Fix-Entity-Teleportation-and-cancel-velocity-if-tele.patch", "diffHunk": "@@ -0,0 +1,57 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Aikar <aikar@aikar.co>\n+Date: Tue, 25 Aug 2020 20:45:36 -0400\n+Subject: [PATCH] Fix Entity Teleportation and cancel velocity if teleported\n+\n+Uses correct setPositionRotation for Entity teleporting instead of setLocation\n+as this is how Vanilla teleports entities.\n+\n+Cancel any pending motion when teleported.\n+\n+diff --git a/src/main/java/net/minecraft/server/Entity.java b/src/main/java/net/minecraft/server/Entity.java\n+index 97e61dae7927d7da18fcb23d9e4bf639234af4a5..f34eed12718e1a83d8a203abea72760476c84c5d 100644\n+--- a/src/main/java/net/minecraft/server/Entity.java\n++++ b/src/main/java/net/minecraft/server/Entity.java\n+@@ -1318,6 +1318,7 @@ public abstract class Entity implements INamableTileEntity, ICommandListener, Ke\n+     }\n+ \n+     public void setPositionRotation(double d0, double d1, double d2, float f, float f1) {\n++        this.mot = new Vec3D(0, 0, 0); // Paper - cancel entity velocity if teleported", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0NDQ2Mg=="}, "originalCommit": {"oid": "84fd1b6314490d34746e8468bde5a2b8a3bd54e7"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1791, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}