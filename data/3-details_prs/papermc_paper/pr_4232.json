{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1MDEwNjQ4", "number": 4232, "title": "Expose the Entity Counter to allow plugins to use valid and non-conflicting Entity Ids", "bodyText": "Basically without this (or reflection), people would have to send random (or very high value entity ids) for their packets, because otherwise \"ghost events\" get fired on the server for the completely wrong entities and other strange things might happen to the client (teleporting entities).\nUsing EntityIds provides the only safe way to have no collisions with regular server entities and also makes it easy for the plugin to track which packet-only entities it had.", "createdAt": "2020-08-27T23:59:29Z", "url": "https://github.com/PaperMC/Paper/pull/4232", "merged": true, "mergeCommit": {"oid": "6c512a082d6cbdc38cf066e6b7a65309f71e56c5"}, "closed": true, "closedAt": "2020-09-29T17:16:27Z", "author": {"login": "MeFisto94"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDS7jkgFqTQ3NzYzODI4Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNrdV0gFqTQ5ODcwOTkzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NjM4Mjg3", "url": "https://github.com/PaperMC/Paper/pull/4232#pullrequestreview-477638287", "createdAt": "2020-08-28T11:02:21Z", "commit": {"oid": "f0535f644476d8a406e032ef5009a2368308b380"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MjE0OTkz", "url": "https://github.com/PaperMC/Paper/pull/4232#pullrequestreview-478214993", "createdAt": "2020-08-30T16:01:46Z", "commit": {"oid": "f0535f644476d8a406e032ef5009a2368308b380"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNjowMTo0NlrOHJj2Tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNjowMTo0NlrOHJj2Tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc4NjU3NA==", "bodyText": "Perhaps allocateEntityId?", "url": "https://github.com/PaperMC/Paper/pull/4232#discussion_r479786574", "createdAt": "2020-08-30T16:01:46Z", "author": {"login": "kashike"}, "path": "Spigot-API-Patches/0222-Expose-the-Entity-Counter-to-allow-plugins-to-use-va.patch", "diffHunk": "@@ -0,0 +1,24 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: MeFisto94 <MeFisto94@users.noreply.github.com>\n+Date: Fri, 28 Aug 2020 01:41:31 +0200\n+Subject: [PATCH] Expose the Entity Counter to allow plugins to use valid and\n+ non-conflicting Entity Ids\n+\n+\n+diff --git a/src/main/java/org/bukkit/UnsafeValues.java b/src/main/java/org/bukkit/UnsafeValues.java\n+index d3ec5084e33dff038d54cdd2aeb703a3eb25f7a7..20cb67b7f2fcc590d4530d225d2a43898fd10117 100644\n+--- a/src/main/java/org/bukkit/UnsafeValues.java\n++++ b/src/main/java/org/bukkit/UnsafeValues.java\n+@@ -94,5 +94,12 @@ public interface UnsafeValues {\n+     byte[] serializeItem(ItemStack item);\n+ \n+     ItemStack deserializeItem(byte[] data);\n++\n++    /**\n++     * Creates and returns the next EntityId available.\n++     * <p>\n++     * Use this when sending custom packets, so that there are no collisions on the client or server.\n++     */\n++    public int createEntityId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0535f644476d8a406e032ef5009a2368308b380"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f0535f644476d8a406e032ef5009a2368308b380", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/f0535f644476d8a406e032ef5009a2368308b380", "committedDate": "2020-08-27T23:50:50Z", "message": "Expose the Entity Counter to allow plugins to use valid and non-conflicting Entity Ids"}, "afterCommit": {"oid": "dc366a5f9f6e609b8c948432f53f536ee8c8ac01", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/dc366a5f9f6e609b8c948432f53f536ee8c8ac01", "committedDate": "2020-09-03T09:17:33Z", "message": "Expose the Entity Counter to allow plugins to use valid and non-conflicting Entity Ids"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc366a5f9f6e609b8c948432f53f536ee8c8ac01", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/dc366a5f9f6e609b8c948432f53f536ee8c8ac01", "committedDate": "2020-09-03T09:17:33Z", "message": "Expose the Entity Counter to allow plugins to use valid and non-conflicting Entity Ids"}, "afterCommit": {"oid": "8bb6abda50913cca6f56758730cbe25489bce550", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/8bb6abda50913cca6f56758730cbe25489bce550", "committedDate": "2020-09-03T10:06:11Z", "message": "Expose the Entity Counter to allow plugins to use valid and non-conflicting Entity Ids"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MjAzODcy", "url": "https://github.com/PaperMC/Paper/pull/4232#pullrequestreview-498203872", "createdAt": "2020-09-29T07:56:55Z", "commit": {"oid": "8bb6abda50913cca6f56758730cbe25489bce550"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NDg1MjY1", "url": "https://github.com/PaperMC/Paper/pull/4232#pullrequestreview-498485265", "createdAt": "2020-09-29T13:45:05Z", "commit": {"oid": "8bb6abda50913cca6f56758730cbe25489bce550"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84e3c2ec73c4841a4896339c6ae036b7344bfab6", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/84e3c2ec73c4841a4896339c6ae036b7344bfab6", "committedDate": "2020-09-29T17:07:05Z", "message": "Expose the Entity Counter to allow plugins to use valid and non-conflicting Entity Ids"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8bb6abda50913cca6f56758730cbe25489bce550", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/8bb6abda50913cca6f56758730cbe25489bce550", "committedDate": "2020-09-03T10:06:11Z", "message": "Expose the Entity Counter to allow plugins to use valid and non-conflicting Entity Ids"}, "afterCommit": {"oid": "84e3c2ec73c4841a4896339c6ae036b7344bfab6", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/84e3c2ec73c4841a4896339c6ae036b7344bfab6", "committedDate": "2020-09-29T17:07:05Z", "message": "Expose the Entity Counter to allow plugins to use valid and non-conflicting Entity Ids"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NzA0OTgy", "url": "https://github.com/PaperMC/Paper/pull/4232#pullrequestreview-498704982", "createdAt": "2020-09-29T17:09:40Z", "commit": {"oid": "84e3c2ec73c4841a4896339c6ae036b7344bfab6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NzA5OTMw", "url": "https://github.com/PaperMC/Paper/pull/4232#pullrequestreview-498709930", "createdAt": "2020-09-29T17:16:13Z", "commit": {"oid": "84e3c2ec73c4841a4896339c6ae036b7344bfab6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1561, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}