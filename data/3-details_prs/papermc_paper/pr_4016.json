{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NzIyNzA4", "number": 4016, "title": "Get an ItemStack's Name as Translatable Component", "bodyText": "Opening this in draft state as there are a couple of ways to solve it [and I don't know if you want to have such API additions at all].\nCurrently there is no way to get the internal key used in the translation map, without using NMS.\nThis has lead to code like https://github.com/PikaMug/LocaleLib/blob/master/src/main/java/me/pikamug/localelib/LocaleKeys.java\nFor NMS, it's however trivial to get that key and that's what this patch solves.\nThere's just a few points where I am uncertain:\n\nReturning a TranslatableComponent instead of the Translation Key. It's more convenient and I don't see use cases where the key would be required without a component. In this case there's still TC#getTranslate, however if someone would soley need the keys, that'd be useless allocations\nUsually such things would belong into the ItemMeta, but due to NMS, this is only available on ItemStack, not even Material or something else. I've added it to ItemStack as Metas aren't linked to Stacks and so I couldn't add it to the Meta.\nThe Implementation in Bukkit: Typically Bukkit has interfaces but ItemStack is a class, so I put an exception into it in the body. Should I maybe just return null instead?\nThe OBFHELPER and changing the protection level instead of directly calling getName(). My Intention was to make it more future proof in case getName starts to return something different.\n\nThanks for your time!", "createdAt": "2020-07-28T10:36:41Z", "url": "https://github.com/PaperMC/Paper/pull/4016", "merged": true, "mergeCommit": {"oid": "da33f8bbe106309055d340c868c1138801536b88"}, "closed": true, "closedAt": "2020-08-31T09:56:33Z", "author": {"login": "MeFisto94"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc974sPgBqjM2NDQ2NzQ2Njg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEPyFkgFqTQ3ODQ3Mzg1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "356b22c2fc4bd97614480a7609fa46766925845a", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/356b22c2fc4bd97614480a7609fa46766925845a", "committedDate": "2020-07-28T18:58:28Z", "message": "fix patch order and naming"}, "afterCommit": {"oid": "3d037650b5a73b3a6294269f65aacd984acc3ad2", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/3d037650b5a73b3a6294269f65aacd984acc3ad2", "committedDate": "2020-08-11T19:20:44Z", "message": "Add a way to get translation keys for blocks, entities and materials"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d037650b5a73b3a6294269f65aacd984acc3ad2", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/3d037650b5a73b3a6294269f65aacd984acc3ad2", "committedDate": "2020-08-11T19:20:44Z", "message": "Add a way to get translation keys for blocks, entities and materials"}, "afterCommit": {"oid": "a5ed96c95c6f2943343626da6180466bbda40d26", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/a5ed96c95c6f2943343626da6180466bbda40d26", "committedDate": "2020-08-11T19:59:49Z", "message": "Add a way to get translation keys for blocks, entities and materials"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NDU5MzI1", "url": "https://github.com/PaperMC/Paper/pull/4016#pullrequestreview-475459325", "createdAt": "2020-08-26T12:57:13Z", "commit": {"oid": "a5ed96c95c6f2943343626da6180466bbda40d26"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MjI0ODU3", "url": "https://github.com/PaperMC/Paper/pull/4016#pullrequestreview-478224857", "createdAt": "2020-08-30T18:30:30Z", "commit": {"oid": "a5ed96c95c6f2943343626da6180466bbda40d26"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxODozMDozMFrOHJkvzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxODozMDozMFrOHJkvzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTgwMTI5Mg==", "bodyText": "Needs to be brought down a line, whitespace can matter in creating conflicts.", "url": "https://github.com/PaperMC/Paper/pull/4016#discussion_r479801292", "createdAt": "2020-08-30T18:30:30Z", "author": {"login": "aikar"}, "path": "Spigot-Server-Patches/0551-Add-a-way-to-get-translation-keys-for-blocks-entitie.patch", "diffHunk": "@@ -0,0 +1,110 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: MeFisto94 <MeFisto94@users.noreply.github.com>\n+Date: Tue, 11 Aug 2020 19:16:09 +0200\n+Subject: [PATCH] Add a way to get translation keys for blocks, entities and\n+ materials\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/Block.java b/src/main/java/net/minecraft/server/Block.java\n+index 81725611d5b8c10c05d561984f92dc67349900ec..a5c4bb06dc2a27121e638c68cdf05c948c5334d4 100644\n+--- a/src/main/java/net/minecraft/server/Block.java\n++++ b/src/main/java/net/minecraft/server/Block.java\n+@@ -282,6 +282,7 @@ public class Block extends BlockBase implements IMaterial {\n+         return !this.material.isBuildable() && !this.material.isLiquid();\n+     }\n+ \n++    public String getDescriptionId() { return i(); } // Paper - OBFHELPER\n+     public String i() {\n+         if (this.name == null) {\n+             this.name = SystemUtils.a(\"block\", IRegistry.BLOCK.getKey(this));\n+diff --git a/src/main/java/net/minecraft/server/EntityTypes.java b/src/main/java/net/minecraft/server/EntityTypes.java\n+index 18a806ebbf092b904983691529ce5edf2da4e6db..c252ffe6044ad3266f74c648911709723adc490c 100644\n+--- a/src/main/java/net/minecraft/server/EntityTypes.java\n++++ b/src/main/java/net/minecraft/server/EntityTypes.java\n+@@ -149,6 +149,7 @@ public class EntityTypes<T extends Entity> {\n+     public static Optional<EntityTypes<?>> a(String s) {\n+         return IRegistry.ENTITY_TYPE.getOptional(MinecraftKey.a(s));\n+     }\n++    public static Optional<EntityTypes<?>> getByName(String name) { return a(name); } // Paper - OBFHELPER", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5ed96c95c6f2943343626da6180466bbda40d26"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbcf2b0da4af49a055cc3f07237dcc371767c90d", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/dbcf2b0da4af49a055cc3f07237dcc371767c90d", "committedDate": "2020-08-31T09:33:40Z", "message": "Add a way to get translation keys for blocks, entities and materials"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5ed96c95c6f2943343626da6180466bbda40d26", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/a5ed96c95c6f2943343626da6180466bbda40d26", "committedDate": "2020-08-11T19:59:49Z", "message": "Add a way to get translation keys for blocks, entities and materials"}, "afterCommit": {"oid": "dbcf2b0da4af49a055cc3f07237dcc371767c90d", "author": {"user": {"login": "MeFisto94", "name": null}}, "url": "https://github.com/PaperMC/Paper/commit/dbcf2b0da4af49a055cc3f07237dcc371767c90d", "committedDate": "2020-08-31T09:33:40Z", "message": "Add a way to get translation keys for blocks, entities and materials"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NDczODUz", "url": "https://github.com/PaperMC/Paper/pull/4016#pullrequestreview-478473853", "createdAt": "2020-08-31T09:56:13Z", "commit": {"oid": "dbcf2b0da4af49a055cc3f07237dcc371767c90d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1697, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}