{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MDgxNDk1", "number": 8319, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwMzoyNToyMVrOD75W4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMTo0MTo1MVrOD8BtcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MTMyMzIxOnYy", "diffSide": "RIGHT", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwMzoyNToyMVrOGUgKmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwMzo0NDozMFrOGUgbIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE1MTcwNA==", "bodyText": "At the beginning of a for loop a new line is not required. Shall we remove this? WDYT?", "url": "https://github.com/wso2/product-is/pull/8319#discussion_r424151704", "createdAt": "2020-05-13T03:25:21Z", "author": {"login": "ShanChathusanda93"}, "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.saml;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.testng.Assert;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.tenant.mgt.stub.TenantMgtAdminServiceExceptionException;\n+import org.wso2.identity.integration.common.clients.TenantManagementServiceClient;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.utils.DataExtractUtil;\n+import org.json.JSONObject;\n+import org.json.XML;\n+\n+import java.io.IOException;\n+\n+public class SAMLMetadataTestCase extends ISIntegrationTest {\n+\n+    private static final String SUPER_TENANT_URL = \"https://localhost:9853/identity/metadata/saml2\";\n+    private static final String TENANT_URL = \"https://localhost:9853/t/wso2.com/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_TENANT = \"https://localhost:9853/samlsso?tenantDomain=wso2.com\";\n+    private static final String SAML_METADATA_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/samlsso\";\n+    private static final String SAMLARTRESOLVE_ENDPOINT = \"https://localhost:9853/samlartresolve\";\n+    private TenantManagementServiceClient tenantServiceClient;\n+\n+    @BeforeClass(alwaysRun = true)\n+    public void testInit() throws Exception {\n+\n+        super.init();\n+        tenantServiceClient = new TenantManagementServiceClient(isServer.getContextUrls().getBackEndUrl(),\n+                sessionCookie);\n+    }\n+\n+    @Test(groups = \"wso2.is\", description = \"This test method will test SAML Metadata endpoints.\")\n+    public void getSAMLMetadata() throws IOException, TenantMgtAdminServiceExceptionException, JSONException {\n+\n+        testResponseContent(SUPER_TENANT_URL, SAML_METADATA_ENDPOINT_SUPER_TENANT);\n+        tenantServiceClient.addTenant(\"wso2.com\", \"John\", \"password\",\n+                \"john@friends.com\", \"John\", \"Smith\");\n+        testResponseContent(TENANT_URL, SAML_METADATA_ENDPOINT_TENANT);\n+    }\n+\n+    private void testResponseContent(String locationURL, String samlMetadataEndpoint)\n+            throws IOException, JSONException {\n+\n+        HttpClient client = HttpClientBuilder.create().build();\n+        HttpResponse httpResponse = sendGetRequest(client, locationURL);\n+        String content = DataExtractUtil.getContentData(httpResponse);\n+        Assert.assertNotNull(content);\n+        JSONArray singleLogoutServices = XML.toJSONObject(content).getJSONObject(\"EntityDescriptor\").getJSONObject(\n+                \"IDPSSODescriptor\").getJSONArray(\"SingleLogoutService\");\n+\n+        for (int i = 0; i < singleLogoutServices.length(); i++) {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cae4f4964ebcf0f6196d01fb9eb36619f9ddbdc6"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE1NTkzNg==", "bodyText": "Fixed ed4daed", "url": "https://github.com/wso2/product-is/pull/8319#discussion_r424155936", "createdAt": "2020-05-13T03:44:30Z", "author": {"login": "GANGANI"}, "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.saml;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.testng.Assert;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.tenant.mgt.stub.TenantMgtAdminServiceExceptionException;\n+import org.wso2.identity.integration.common.clients.TenantManagementServiceClient;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.utils.DataExtractUtil;\n+import org.json.JSONObject;\n+import org.json.XML;\n+\n+import java.io.IOException;\n+\n+public class SAMLMetadataTestCase extends ISIntegrationTest {\n+\n+    private static final String SUPER_TENANT_URL = \"https://localhost:9853/identity/metadata/saml2\";\n+    private static final String TENANT_URL = \"https://localhost:9853/t/wso2.com/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_TENANT = \"https://localhost:9853/samlsso?tenantDomain=wso2.com\";\n+    private static final String SAML_METADATA_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/samlsso\";\n+    private static final String SAMLARTRESOLVE_ENDPOINT = \"https://localhost:9853/samlartresolve\";\n+    private TenantManagementServiceClient tenantServiceClient;\n+\n+    @BeforeClass(alwaysRun = true)\n+    public void testInit() throws Exception {\n+\n+        super.init();\n+        tenantServiceClient = new TenantManagementServiceClient(isServer.getContextUrls().getBackEndUrl(),\n+                sessionCookie);\n+    }\n+\n+    @Test(groups = \"wso2.is\", description = \"This test method will test SAML Metadata endpoints.\")\n+    public void getSAMLMetadata() throws IOException, TenantMgtAdminServiceExceptionException, JSONException {\n+\n+        testResponseContent(SUPER_TENANT_URL, SAML_METADATA_ENDPOINT_SUPER_TENANT);\n+        tenantServiceClient.addTenant(\"wso2.com\", \"John\", \"password\",\n+                \"john@friends.com\", \"John\", \"Smith\");\n+        testResponseContent(TENANT_URL, SAML_METADATA_ENDPOINT_TENANT);\n+    }\n+\n+    private void testResponseContent(String locationURL, String samlMetadataEndpoint)\n+            throws IOException, JSONException {\n+\n+        HttpClient client = HttpClientBuilder.create().build();\n+        HttpResponse httpResponse = sendGetRequest(client, locationURL);\n+        String content = DataExtractUtil.getContentData(httpResponse);\n+        Assert.assertNotNull(content);\n+        JSONArray singleLogoutServices = XML.toJSONObject(content).getJSONObject(\"EntityDescriptor\").getJSONObject(\n+                \"IDPSSODescriptor\").getJSONArray(\"SingleLogoutService\");\n+\n+        for (int i = 0; i < singleLogoutServices.length(); i++) {\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE1MTcwNA=="}, "originalCommit": {"oid": "cae4f4964ebcf0f6196d01fb9eb36619f9ddbdc6"}, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MTQwMDc2OnYy", "diffSide": "RIGHT", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwNDoxOTozMVrOGUg5wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwNDo0NDoyNVrOGUhPLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE2Mzc3Nw==", "bodyText": "private static final String SAML_METADATA_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/samlsso\";\nBetter if we name this as SAML_SSO_ENDPOINT_SUPER_TENANT and change the TENANT_URL and SUPER_TENANT_URL to SAML_METADATA_ENDPOINT_TENANT and SAML_METADATA_ENDPOINT_SUPER_TENANT respectively", "url": "https://github.com/wso2/product-is/pull/8319#discussion_r424163777", "createdAt": "2020-05-13T04:19:31Z", "author": {"login": "chamathns"}, "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.saml;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.testng.Assert;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.tenant.mgt.stub.TenantMgtAdminServiceExceptionException;\n+import org.wso2.identity.integration.common.clients.TenantManagementServiceClient;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.utils.DataExtractUtil;\n+import org.json.JSONObject;\n+import org.json.XML;\n+\n+import java.io.IOException;\n+\n+public class SAMLMetadataTestCase extends ISIntegrationTest {\n+\n+    private static final String SUPER_TENANT_URL = \"https://localhost:9853/identity/metadata/saml2\";\n+    private static final String TENANT_URL = \"https://localhost:9853/t/wso2.com/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_TENANT = \"https://localhost:9853/samlsso?tenantDomain=wso2.com\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed4daeda51db12ad05cd8d718640a10f984fe877"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE2OTI2Mg==", "bodyText": "Fixed 6ab5725", "url": "https://github.com/wso2/product-is/pull/8319#discussion_r424169262", "createdAt": "2020-05-13T04:44:25Z", "author": {"login": "GANGANI"}, "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.saml;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.testng.Assert;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.tenant.mgt.stub.TenantMgtAdminServiceExceptionException;\n+import org.wso2.identity.integration.common.clients.TenantManagementServiceClient;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.utils.DataExtractUtil;\n+import org.json.JSONObject;\n+import org.json.XML;\n+\n+import java.io.IOException;\n+\n+public class SAMLMetadataTestCase extends ISIntegrationTest {\n+\n+    private static final String SUPER_TENANT_URL = \"https://localhost:9853/identity/metadata/saml2\";\n+    private static final String TENANT_URL = \"https://localhost:9853/t/wso2.com/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_TENANT = \"https://localhost:9853/samlsso?tenantDomain=wso2.com\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE2Mzc3Nw=="}, "originalCommit": {"oid": "ed4daeda51db12ad05cd8d718640a10f984fe877"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MTUxNDI0OnYy", "diffSide": "RIGHT", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwNTozMDozOVrOGUh-OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QwODo1NjoxN1rOGUoCWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE4MTMwNQ==", "bodyText": "IIRC, we can run the same test for tenant case, rather than adding a new tenant.\nThere are tenants already available.\n@ashensw @Abilashini can you help with this", "url": "https://github.com/wso2/product-is/pull/8319#discussion_r424181305", "createdAt": "2020-05-13T05:30:39Z", "author": {"login": "malithie"}, "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.saml;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.testng.Assert;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.tenant.mgt.stub.TenantMgtAdminServiceExceptionException;\n+import org.wso2.identity.integration.common.clients.TenantManagementServiceClient;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.utils.DataExtractUtil;\n+import org.json.JSONObject;\n+import org.json.XML;\n+\n+import java.io.IOException;\n+\n+public class SAMLMetadataTestCase extends ISIntegrationTest {\n+\n+    private static final String SAML_METADATA_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_TENANT = \"https://localhost:9853/t/wso2.com/identity/metadata/saml2\";\n+    private static final String SAML_SSO_ENDPOINT_TENANT = \"https://localhost:9853/samlsso?tenantDomain=wso2.com\";\n+    private static final String SAML_SSO_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/samlsso\";\n+    private static final String SAMLARTRESOLVE_ENDPOINT = \"https://localhost:9853/samlartresolve\";\n+    private TenantManagementServiceClient tenantServiceClient;\n+\n+    @BeforeClass(alwaysRun = true)\n+    public void testInit() throws Exception {\n+\n+        super.init();\n+        tenantServiceClient = new TenantManagementServiceClient(isServer.getContextUrls().getBackEndUrl(),\n+                sessionCookie);\n+    }\n+\n+    @Test(groups = \"wso2.is\", description = \"This test method will test SAML Metadata endpoints.\")\n+    public void getSAMLMetadata() throws IOException, TenantMgtAdminServiceExceptionException, JSONException {\n+\n+        testResponseContent(SAML_METADATA_ENDPOINT_SUPER_TENANT, SAML_SSO_ENDPOINT_SUPER_TENANT);\n+        tenantServiceClient.addTenant(\"wso2.com\", \"John\", \"password\",\n+                \"john@friends.com\", \"John\", \"Smith\");\n+        testResponseContent(SAML_METADATA_ENDPOINT_TENANT, SAML_SSO_ENDPOINT_TENANT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ab572585a54837ade63020646e1add912218583"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDI4MDY2NA==", "bodyText": "Fixed e7205b2", "url": "https://github.com/wso2/product-is/pull/8319#discussion_r424280664", "createdAt": "2020-05-13T08:56:17Z", "author": {"login": "GANGANI"}, "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.saml;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.testng.Assert;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.tenant.mgt.stub.TenantMgtAdminServiceExceptionException;\n+import org.wso2.identity.integration.common.clients.TenantManagementServiceClient;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.utils.DataExtractUtil;\n+import org.json.JSONObject;\n+import org.json.XML;\n+\n+import java.io.IOException;\n+\n+public class SAMLMetadataTestCase extends ISIntegrationTest {\n+\n+    private static final String SAML_METADATA_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_TENANT = \"https://localhost:9853/t/wso2.com/identity/metadata/saml2\";\n+    private static final String SAML_SSO_ENDPOINT_TENANT = \"https://localhost:9853/samlsso?tenantDomain=wso2.com\";\n+    private static final String SAML_SSO_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/samlsso\";\n+    private static final String SAMLARTRESOLVE_ENDPOINT = \"https://localhost:9853/samlartresolve\";\n+    private TenantManagementServiceClient tenantServiceClient;\n+\n+    @BeforeClass(alwaysRun = true)\n+    public void testInit() throws Exception {\n+\n+        super.init();\n+        tenantServiceClient = new TenantManagementServiceClient(isServer.getContextUrls().getBackEndUrl(),\n+                sessionCookie);\n+    }\n+\n+    @Test(groups = \"wso2.is\", description = \"This test method will test SAML Metadata endpoints.\")\n+    public void getSAMLMetadata() throws IOException, TenantMgtAdminServiceExceptionException, JSONException {\n+\n+        testResponseContent(SAML_METADATA_ENDPOINT_SUPER_TENANT, SAML_SSO_ENDPOINT_SUPER_TENANT);\n+        tenantServiceClient.addTenant(\"wso2.com\", \"John\", \"password\",\n+                \"john@friends.com\", \"John\", \"Smith\");\n+        testResponseContent(SAML_METADATA_ENDPOINT_TENANT, SAML_SSO_ENDPOINT_TENANT);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE4MTMwNQ=="}, "originalCommit": {"oid": "6ab572585a54837ade63020646e1add912218583"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MjY2NDMwOnYy", "diffSide": "RIGHT", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMTozMzoyNFrOGUtU1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMjozMzo0OFrOGUvWEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM2NzMxNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"https://localhost:9853//t/carbon.super/identity/metadata/saml2\";\n          \n          \n            \n                        \"https://localhost:9853/t/carbon.super/identity/metadata/saml2\";", "url": "https://github.com/wso2/product-is/pull/8319#discussion_r424367316", "createdAt": "2020-05-13T11:33:24Z", "author": {"login": "mefarazath"}, "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.saml;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.tenant.mgt.stub.TenantMgtAdminServiceExceptionException;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.utils.DataExtractUtil;\n+import org.json.JSONObject;\n+import org.json.XML;\n+\n+import java.io.IOException;\n+\n+public class SAMLMetadataTestCase extends ISIntegrationTest {\n+\n+    private static final String SAML_METADATA_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_TENANT =\n+            \"https://localhost:9853/t/wso2.com/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_WITH_SUPER_TENANT_AS_PATH_PARAM =\n+            \"https://localhost:9853//t/carbon.super/identity/metadata/saml2\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84bbe62616f1cb3ec229e8949a650e7a85acf984"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQwMDQwMA==", "bodyText": "Fixed 615aad3", "url": "https://github.com/wso2/product-is/pull/8319#discussion_r424400400", "createdAt": "2020-05-13T12:33:48Z", "author": {"login": "GANGANI"}, "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.saml;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.tenant.mgt.stub.TenantMgtAdminServiceExceptionException;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.utils.DataExtractUtil;\n+import org.json.JSONObject;\n+import org.json.XML;\n+\n+import java.io.IOException;\n+\n+public class SAMLMetadataTestCase extends ISIntegrationTest {\n+\n+    private static final String SAML_METADATA_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_TENANT =\n+            \"https://localhost:9853/t/wso2.com/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_WITH_SUPER_TENANT_AS_PATH_PARAM =\n+            \"https://localhost:9853//t/carbon.super/identity/metadata/saml2\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM2NzMxNg=="}, "originalCommit": {"oid": "84bbe62616f1cb3ec229e8949a650e7a85acf984"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MjY5MTY4OnYy", "diffSide": "RIGHT", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMTo0MTo1MVrOGUtltQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMjozMzo0MFrOGUvVxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM3MTYzNw==", "bodyText": "Shall we add a message for the null case", "url": "https://github.com/wso2/product-is/pull/8319#discussion_r424371637", "createdAt": "2020-05-13T11:41:51Z", "author": {"login": "Abilashini"}, "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.saml;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.tenant.mgt.stub.TenantMgtAdminServiceExceptionException;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.utils.DataExtractUtil;\n+import org.json.JSONObject;\n+import org.json.XML;\n+\n+import java.io.IOException;\n+\n+public class SAMLMetadataTestCase extends ISIntegrationTest {\n+\n+    private static final String SAML_METADATA_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_TENANT =\n+            \"https://localhost:9853/t/wso2.com/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_WITH_SUPER_TENANT_AS_PATH_PARAM =\n+            \"https://localhost:9853//t/carbon.super/identity/metadata/saml2\";\n+    private static final String SAML_SSO_ENDPOINT_TENANT = \"https://localhost:9853/samlsso?tenantDomain=wso2.com\";\n+    private static final String SAML_SSO_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/samlsso\";\n+    private static final String SAMLARTRESOLVE_ENDPOINT = \"https://localhost:9853/samlartresolve\";\n+\n+    @Test(groups = \"wso2.is\", description = \"This test method will test SAML Metadata endpoints.\")\n+    public void getSAMLMetadata() throws IOException, TenantMgtAdminServiceExceptionException, JSONException {\n+\n+        testResponseContent(SAML_METADATA_ENDPOINT_SUPER_TENANT, SAML_SSO_ENDPOINT_SUPER_TENANT);\n+        testResponseContent(SAML_METADATA_ENDPOINT_WITH_SUPER_TENANT_AS_PATH_PARAM, SAML_SSO_ENDPOINT_SUPER_TENANT);\n+        testResponseContent(SAML_METADATA_ENDPOINT_TENANT, SAML_SSO_ENDPOINT_TENANT);\n+    }\n+\n+    private void testResponseContent(String samlMetadataEndpoint, String samlEndpoint)\n+            throws IOException, JSONException {\n+\n+        HttpClient client = HttpClientBuilder.create().build();\n+        HttpResponse httpResponse = sendGetRequest(client, samlMetadataEndpoint);\n+        String content = DataExtractUtil.getContentData(httpResponse);\n+        Assert.assertNotNull(content);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84bbe62616f1cb3ec229e8949a650e7a85acf984"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQwMDMyNA==", "bodyText": "Fixed 615aad3", "url": "https://github.com/wso2/product-is/pull/8319#discussion_r424400324", "createdAt": "2020-05-13T12:33:40Z", "author": {"login": "GANGANI"}, "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/saml/SAMLMetadataTestCase.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.saml;\n+\n+import org.apache.http.HttpResponse;\n+import org.apache.http.client.HttpClient;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.tenant.mgt.stub.TenantMgtAdminServiceExceptionException;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.utils.DataExtractUtil;\n+import org.json.JSONObject;\n+import org.json.XML;\n+\n+import java.io.IOException;\n+\n+public class SAMLMetadataTestCase extends ISIntegrationTest {\n+\n+    private static final String SAML_METADATA_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_TENANT =\n+            \"https://localhost:9853/t/wso2.com/identity/metadata/saml2\";\n+    private static final String SAML_METADATA_ENDPOINT_WITH_SUPER_TENANT_AS_PATH_PARAM =\n+            \"https://localhost:9853//t/carbon.super/identity/metadata/saml2\";\n+    private static final String SAML_SSO_ENDPOINT_TENANT = \"https://localhost:9853/samlsso?tenantDomain=wso2.com\";\n+    private static final String SAML_SSO_ENDPOINT_SUPER_TENANT = \"https://localhost:9853/samlsso\";\n+    private static final String SAMLARTRESOLVE_ENDPOINT = \"https://localhost:9853/samlartresolve\";\n+\n+    @Test(groups = \"wso2.is\", description = \"This test method will test SAML Metadata endpoints.\")\n+    public void getSAMLMetadata() throws IOException, TenantMgtAdminServiceExceptionException, JSONException {\n+\n+        testResponseContent(SAML_METADATA_ENDPOINT_SUPER_TENANT, SAML_SSO_ENDPOINT_SUPER_TENANT);\n+        testResponseContent(SAML_METADATA_ENDPOINT_WITH_SUPER_TENANT_AS_PATH_PARAM, SAML_SSO_ENDPOINT_SUPER_TENANT);\n+        testResponseContent(SAML_METADATA_ENDPOINT_TENANT, SAML_SSO_ENDPOINT_TENANT);\n+    }\n+\n+    private void testResponseContent(String samlMetadataEndpoint, String samlEndpoint)\n+            throws IOException, JSONException {\n+\n+        HttpClient client = HttpClientBuilder.create().build();\n+        HttpResponse httpResponse = sendGetRequest(client, samlMetadataEndpoint);\n+        String content = DataExtractUtil.getContentData(httpResponse);\n+        Assert.assertNotNull(content);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM3MTYzNw=="}, "originalCommit": {"oid": "84bbe62616f1cb3ec229e8949a650e7a85acf984"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1401, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}