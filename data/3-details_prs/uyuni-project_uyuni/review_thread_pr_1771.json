{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwNDgzOTE0", "number": 1771, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNDozNjoxNVrODWj4UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNDozNjoxNVrODWj4UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0OTgzMTIxOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/salt_steps.rb", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNDozNjoxNVrOFbYv-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNDo0OToxOVrOFbZLYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI2MTM3MQ==", "bodyText": "I don't get what's the difference of content between the find('#chooseFormulas')['innerHTML'] before and after the if.\nThat if can happen immediately after the first puts if the condition is true, so we will have duplicate info \ud83e\udd14", "url": "https://github.com/uyuni-project/uyuni/pull/1771#discussion_r364261371", "createdAt": "2020-01-08T14:36:15Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -279,11 +279,14 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n+  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n+    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d490f0fb50467052509c8cb6be5e2f2bd757fd7e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI2NDA1Mg==", "bodyText": "This is exactly what we need to investigate ;-) Of course you're right - there shouldn't be any difference. I'd like to be absolutely sure about content in DOM in those 3 precise moments.", "url": "https://github.com/uyuni-project/uyuni/pull/1771#discussion_r364264052", "createdAt": "2020-01-08T14:41:27Z", "author": {"login": "lkotek"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -279,11 +279,14 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n+  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n+    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI2MTM3MQ=="}, "originalCommit": {"oid": "d490f0fb50467052509c8cb6be5e2f2bd757fd7e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI2Nzk5Mg==", "bodyText": "Perfect then :)\nIn addition, you might want to add an assert comparing previous and new content.", "url": "https://github.com/uyuni-project/uyuni/pull/1771#discussion_r364267992", "createdAt": "2020-01-08T14:48:33Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -279,11 +279,14 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n+  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n+    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI2MTM3MQ=="}, "originalCommit": {"oid": "d490f0fb50467052509c8cb6be5e2f2bd757fd7e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI2ODM4NQ==", "bodyText": "(Btw. because of wait in all method there could be difference even in those infos.)", "url": "https://github.com/uyuni-project/uyuni/pull/1771#discussion_r364268385", "createdAt": "2020-01-08T14:49:19Z", "author": {"login": "lkotek"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -279,11 +279,14 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n+  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n+    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI2MTM3MQ=="}, "originalCommit": {"oid": "d490f0fb50467052509c8cb6be5e2f2bd757fd7e"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 199, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}