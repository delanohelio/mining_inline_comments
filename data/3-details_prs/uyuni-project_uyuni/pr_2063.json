{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MDMxNzE0", "number": 2063, "title": "Fix virtual pool creation with devices", "bodyText": "What does this PR change?\nFixes the creation of virtual storage pools using devices like disk ones.\nAlso enhances the cucumber testsuite for pool creation to really wait for the form to be ready.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: no UI change\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests: automated testing of all the disk pool types would be long, complex and incomplete.\n\n\n DONE\n\n\nLinks\nFixes #\nTracks # add downstream PR, if any\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-03-26T08:44:16Z", "url": "https://github.com/uyuni-project/uyuni/pull/2063", "merged": true, "mergeCommit": {"oid": "2fd48e2bcc3dc868fda973728438cb867d1efb62"}, "closed": true, "closedAt": "2020-03-26T15:51:15Z", "author": {"login": "cbosdo"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRX92VAH2gAyMzk0MDMxNzE0OjMzODllOTMyNzk0YWM2OGZlMGZjM2UzYmE3ZTRiODVkMzI0MzRlMGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRcE2XAFqTM4MjAwMzcwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3389e932794ac68fe0fc3e3ba7e4b85d32434e0d", "author": {"user": {"login": "cbosdo", "name": "Cedric Bosdonnat"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3389e932794ac68fe0fc3e3ba7e4b85d32434e0d", "committedDate": "2020-03-26T08:38:10Z", "message": "Fix virtual pool creation with devices"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxOTkyOTUz", "url": "https://github.com/uyuni-project/uyuni/pull/2063#pullrequestreview-381992953", "createdAt": "2020-03-26T13:13:00Z", "commit": {"oid": "7eff500f9b438ea2ff2f544f23cd78148f4cea9a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMzoxMzowMFrOF8GL4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMzoxMzoxMlrOF8GMaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2MDIyNg==", "bodyText": "\"appears in list\" less vague than \"is available as\" ?\nIt would stress it is in UI.", "url": "https://github.com/uyuni-project/uyuni/pull/2063#discussion_r398560226", "createdAt": "2020-03-26T13:13:00Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/minkvm_guests.feature", "diffHunk": "@@ -230,7 +230,7 @@ Feature: Be able to manage KVM virtual machines via the GUI\n     Given I am on the \"Virtualization\" page of this \"kvm_server\"\n     When I follow \"Storage\"\n     And I follow \"Create Pool\"\n-    And I wait until I see \"General\" text\n+    And I wait until option \"dir\" is available as \"type\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7eff500f9b438ea2ff2f544f23cd78148f4cea9a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2MDM2MQ==", "bodyText": "same", "url": "https://github.com/uyuni-project/uyuni/pull/2063#discussion_r398560361", "createdAt": "2020-03-26T13:13:12Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/navigation_steps.rb", "diffHunk": "@@ -767,6 +767,15 @@\n   raise \"#{arg1} is not selected as #{arg2}\" unless has_select?(arg2, selected: arg1)\n end\n \n+#\n+# Wait for an option to appear in a list\n+#\n+When(/^I wait until option \"([^\"]*)\" is available as \"([^\"]*)\"$/) do |arg1, arg2|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7eff500f9b438ea2ff2f544f23cd78148f4cea9a"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5adff4deb27e5c0a8e1aaff91de6f1071bfec716", "author": {"user": {"login": "cbosdo", "name": "Cedric Bosdonnat"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5adff4deb27e5c0a8e1aaff91de6f1071bfec716", "committedDate": "2020-03-26T13:20:24Z", "message": "Enhance wait in virtual pool creation test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea07ff852056627ed590c7217b7d8f6ed7a5bef9", "author": {"user": {"login": "cbosdo", "name": "Cedric Bosdonnat"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ea07ff852056627ed590c7217b7d8f6ed7a5bef9", "committedDate": "2020-03-26T13:20:24Z", "message": "Virtual pool creation UI: fix pool type change\n\nWhen changing the pool type we need to remove all properties from the\nmodel but the name and the pool type otherwise we'll stick with values\nwe don't want to pass to the action."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7eff500f9b438ea2ff2f544f23cd78148f4cea9a", "author": {"user": {"login": "cbosdo", "name": "Cedric Bosdonnat"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7eff500f9b438ea2ff2f544f23cd78148f4cea9a", "committedDate": "2020-03-26T12:14:23Z", "message": "Enhance wait in virtual pool creation test"}, "afterCommit": {"oid": "ea07ff852056627ed590c7217b7d8f6ed7a5bef9", "author": {"user": {"login": "cbosdo", "name": "Cedric Bosdonnat"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ea07ff852056627ed590c7217b7d8f6ed7a5bef9", "committedDate": "2020-03-26T13:20:24Z", "message": "Virtual pool creation UI: fix pool type change\n\nWhen changing the pool type we need to remove all properties from the\nmodel but the name and the pool type otherwise we'll stick with values\nwe don't want to pass to the action."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMDAzNzA1", "url": "https://github.com/uyuni-project/uyuni/pull/2063#pullrequestreview-382003705", "createdAt": "2020-03-26T13:25:25Z", "commit": {"oid": "ea07ff852056627ed590c7217b7d8f6ed7a5bef9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1533, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}