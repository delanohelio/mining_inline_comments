{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMTM1NjM2", "number": 1897, "title": "Cleanup forward register and ostarget", "bodyText": "What does this PR change?\nIn the early days of SUSE Manager we tried to forward the registrations to NCC.\nWe never implemented forwarding to SCC as we did our own subscription matching.\nBut we still collect some data only required for NCC registration and maintaining some other artifacts which could be removed.\nOS Target was a value only used by NCC\nGUID/SECRET was the identifier for a system in NCC.\nSo we can drop the tables suseServer, suseOSTarget and suseDelServer.\nsuseServerInstalledProducts is referencing rhnServer directly.\nThis PR also drop the Taskomatic job which calls every 15 minutes a dummy program to register systems at NCC.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: internal\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests: already covered\n\n\n DONE\n\n\nLinks\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-02-10T13:31:27Z", "url": "https://github.com/uyuni-project/uyuni/pull/1897", "merged": true, "mergeCommit": {"oid": "700b97a28b423f9884a2befe9d3e1a456cc66aee"}, "closed": true, "closedAt": "2020-02-18T20:00:04Z", "author": {"login": "mcalmer"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcC9blQAFqTM1NTk0NzY2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFOR98ABqjMwNDM5NTY1ODQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1OTQ3NjYx", "url": "https://github.com/uyuni-project/uyuni/pull/1897#pullrequestreview-355947661", "createdAt": "2020-02-10T13:48:15Z", "commit": {"oid": "bb3f8b92b27003a84757a3f2a9890566658667e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMzo0ODoxNVrOFnmo0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMzo0ODoxNVrOFnmo0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzA3MTgyNQ==", "bodyText": "Since self.suse_products is expected to be a list now, maybe we should also:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                self.suse_products = {}\n          \n          \n            \n                self.suse_products = []", "url": "https://github.com/uyuni-project/uyuni/pull/1897#discussion_r377071825", "createdAt": "2020-02-10T13:48:15Z", "author": {"login": "meaksh"}, "path": "backend/server/rhnServer/server_suse.py", "diffHunk": "@@ -19,17 +19,13 @@ class SuseData:\n   def __init__(self):\n     log_debug(4, \"SuseData initialized\")\n     # format:\n-    # suse_products { 'guid' = ...\n-    #                 'secret' = ...\n-    #                 'ostarget' = ...\n-    #                 'products' = [{ 'name' = ..., 'version' = ..., 'release' = ..., 'arch' = ..., 'baseproduct' = ...},\n-    #                               ...]\n-    #               }\n+    # suse_products [{ 'name' = ..., 'version' = ..., 'release' = ..., 'arch' = ..., 'baseproduct' = ...},\n+    #               ...]\n     self.suse_products = {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb3f8b92b27003a84757a3f2a9890566658667e6"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1OTUxMDQ0", "url": "https://github.com/uyuni-project/uyuni/pull/1897#pullrequestreview-355951044", "createdAt": "2020-02-10T13:53:06Z", "commit": {"oid": "ed1c9c7f587c4e2292bed515f08e1ec031765225"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMzo1MzowNlrOFnmzNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMzo1MzowNlrOFnmzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzA3NDQ4Ng==", "bodyText": "The suseServer table is removed with this PR. I think this whole line could be removed:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            suseServer                     :: rhnServer", "url": "https://github.com/uyuni-project/uyuni/pull/1897#discussion_r377074486", "createdAt": "2020-02-10T13:53:06Z", "author": {"login": "meaksh"}, "path": "schema/spacewalk/common/tables/tables.deps", "diffHunk": "@@ -248,9 +248,8 @@ suseImageInfoChannel           :: suseImageInfo rhnChannel\n suseImageInfoInstalledProduct  :: suseInstalledProduct suseImageInfo\n suseImageProfile               :: rhnRegTokenChannels web_customer suseImageStore\n suseImageStore                 :: suseCredentials web_customer suseImageStoreType\n-suseOSTarget                   :: rhnChannelArch\n suseMinionInfo                 :: rhnServer\n-suseServer                     :: rhnServer suseOSTarget\n+suseServer                     :: rhnServer", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed1c9c7f587c4e2292bed515f08e1ec031765225"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1OTUzMzE0", "url": "https://github.com/uyuni-project/uyuni/pull/1897#pullrequestreview-355953314", "createdAt": "2020-02-10T13:56:13Z", "commit": {"oid": "9a1b3794df4f488d6ecd15cf8722ff8e0e1bc688"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NTc4NDQy", "url": "https://github.com/uyuni-project/uyuni/pull/1897#pullrequestreview-356578442", "createdAt": "2020-02-11T11:19:34Z", "commit": {"oid": "9a1b3794df4f488d6ecd15cf8722ff8e0e1bc688"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a1b3794df4f488d6ecd15cf8722ff8e0e1bc688", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9a1b3794df4f488d6ecd15cf8722ff8e0e1bc688", "committedDate": "2020-02-10T13:53:31Z", "message": "Update schema/spacewalk/common/tables/tables.deps\n\nCo-Authored-By: Pablo Su\u00e1rez Hern\u00e1ndez <psuarezhernandez@suse.com>"}, "afterCommit": {"oid": "2615e73e5143617890207b4dc4bbe5315e3357e6", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2615e73e5143617890207b4dc4bbe5315e3357e6", "committedDate": "2020-02-11T11:53:16Z", "message": "update changelogs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ac4acca2e82fac3ec9152a328cc1852eaf02c01", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9ac4acca2e82fac3ec9152a328cc1852eaf02c01", "committedDate": "2020-02-11T12:05:13Z", "message": "fixup! schema update: drop tables suseDelServer, suseOSTarget and suseServer"}, "afterCommit": {"oid": "fd4bccd90193fdbae54166893639db1fa8039e72", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fd4bccd90193fdbae54166893639db1fa8039e72", "committedDate": "2020-02-12T09:18:13Z", "message": "update changelogs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e71e5507af4049820d611c3150eccfb90a09aab", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3e71e5507af4049820d611c3150eccfb90a09aab", "committedDate": "2020-02-13T13:08:21Z", "message": "re-add force re-registration handling and delete old server when machine_id is duplicate"}, "afterCommit": {"oid": "4817024a24973421fcec7613627cca4755ae8e84", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4817024a24973421fcec7613627cca4755ae8e84", "committedDate": "2020-02-14T10:04:46Z", "message": "re-add force re-registration handling and delete old server when machine_id is duplicate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e091027d29521a9febbd401f09ed145cfd4a87d5", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e091027d29521a9febbd401f09ed145cfd4a87d5", "committedDate": "2020-02-17T14:32:40Z", "message": "drop tables suseDelServer, suseOSTarget and suseServer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7a867a18fafb15c1ae64d7a4d0967fa513defa0", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b7a867a18fafb15c1ae64d7a4d0967fa513defa0", "committedDate": "2020-02-17T14:32:40Z", "message": "schema update: drop tables suseDelServer, suseOSTarget and suseServer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d7fd8b4e0ac9b0a572580af737004c6811927e9", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8d7fd8b4e0ac9b0a572580af737004c6811927e9", "committedDate": "2020-02-17T14:32:40Z", "message": "remove code handling dropped tables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3ed9d59691d5e899828fa9e80ef59b05baccbaf", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c3ed9d59691d5e899828fa9e80ef59b05baccbaf", "committedDate": "2020-02-17T14:32:40Z", "message": "Remove NCC Register Task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d5e166ec33d2e4096fa7c2ff3279f7f428b5f0a", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9d5e166ec33d2e4096fa7c2ff3279f7f428b5f0a", "committedDate": "2020-02-17T14:33:41Z", "message": "update changelogs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93c79f2b35624ace86a579a1f46846d69acae865", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/93c79f2b35624ace86a579a1f46846d69acae865", "committedDate": "2020-02-17T14:33:41Z", "message": "remove mgr-register from Makefile and logrotate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c89e32469cef0099e15537d0d0a16fef05755fb", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0c89e32469cef0099e15537d0d0a16fef05755fb", "committedDate": "2020-02-17T14:33:41Z", "message": "re-add force re-registration handling and delete old server when machine_id is duplicate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4817024a24973421fcec7613627cca4755ae8e84", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4817024a24973421fcec7613627cca4755ae8e84", "committedDate": "2020-02-14T10:04:46Z", "message": "re-add force re-registration handling and delete old server when machine_id is duplicate"}, "afterCommit": {"oid": "0c89e32469cef0099e15537d0d0a16fef05755fb", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0c89e32469cef0099e15537d0d0a16fef05755fb", "committedDate": "2020-02-17T14:33:41Z", "message": "re-add force re-registration handling and delete old server when machine_id is duplicate"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1649, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}