{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MjAwOTA3", "number": 2326, "title": "Add \"mgrcompat.module_run\" wrapper for \"module.run\" to avoid future syntax deprecation issues", "bodyText": "What does this PR change?\nThis PR introduces a new custom state module called mgrcompat, which provides a compatibility wrapper for Salt module.run state function, in order to avoid deprecation warnings with module.run and future errors once the old syntax is finally deprecated once Sodium version of Salt is released:\n2020-06-15 13:08:26,471 [salt.utils.decorators:613 ][WARNING ][1166] The function \"module.run\" is using its deprecated version and will expire in version \"Sodium\".\nThis new mgrcompat.module_run function takes care of:\n\nCheck which syntax is expected for module.run state function depending on the minion version and possible use_superseded configuration.\nIn case the minion is expecting the new syntax for module.run, then it would adapt the parameters accordingly so the minion is able to execute the desire state adapted to the new syntax.\n\nTherefore, to summarize, these are the main changes done by this PR:\n\nAdd mgrcompat state module as custom Salt module (susemanager-sls package).\nFix all SLS files to use mgrcompat.module_run instead module.run.\nForce a saltUtils.syncAll() call during minion registration to ensure custom state module is synced before applying any SLS file.\nFix expectations for jobs returns events on the Java side.\nIntroduce tests for mgrcompat and fix java tests.\n\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: internal changes\n\n\n DONE\n\n\nTest coverage\n\n\nUnit tests were added\n\n\n DONE\n\n\nLinks\nTracks SUSE/spacewalk#8498\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\" (Test skipped, there are no changes to test)\n Re-run test \"spacecmd_unittests\" (Test skipped, there are no changes to test)", "createdAt": "2020-06-16T13:06:04Z", "url": "https://github.com/uyuni-project/uyuni/pull/2326", "merged": true, "mergeCommit": {"oid": "098b6158f1e78a0b1b2ac3421cf9aef06341cd4a"}, "closed": true, "closedAt": "2020-07-09T09:18:47Z", "author": {"login": "meaksh"}, "timelineItems": {"totalCount": 68, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsKtWUAFqTQzMjQ0NjU0Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcy3121ABqjM1MjQ1Mzg5MzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNDQ2NTQ3", "url": "https://github.com/uyuni-project/uyuni/pull/2326#pullrequestreview-432446547", "createdAt": "2020-06-17T14:14:38Z", "commit": {"oid": "440617a698440880694fa5ff183ce631ac506afa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNDoxNDozOVrOGlHz2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNDoxNToxMVrOGlH1Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU3ODQ1OA==", "bodyText": "As it should now work with both, old and new syntax we should not enforce it.\nA customer who has own written state files and did not port it yet to use the compat module will hard fail for new clients.\nAnd as this config file is managed by SUSE Manager he cannot change it.", "url": "https://github.com/uyuni-project/uyuni/pull/2326#discussion_r441578458", "createdAt": "2020-06-17T14:14:39Z", "author": {"login": "mcalmer"}, "path": "susemanager-utils/susemanager-sls/salt/bootstrap/susemanager.conf", "diffHunk": "@@ -12,3 +12,5 @@ start_event_grains:\n   - machine_id\n   - saltboot_initrd\n   - susemanager\n+use_superseded:\n+  - module.run", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "440617a698440880694fa5ff183ce631ac506afa"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU3ODg1NA==", "bodyText": "We should do this in the testsuite, so we can be sure that it works.", "url": "https://github.com/uyuni-project/uyuni/pull/2326#discussion_r441578854", "createdAt": "2020-06-17T14:15:11Z", "author": {"login": "mcalmer"}, "path": "susemanager-utils/susemanager-sls/salt/bootstrap/susemanager.conf", "diffHunk": "@@ -12,3 +12,5 @@ start_event_grains:\n   - machine_id\n   - saltboot_initrd\n   - susemanager\n+use_superseded:\n+  - module.run", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU3ODQ1OA=="}, "originalCommit": {"oid": "440617a698440880694fa5ff183ce631ac506afa"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5083a10b287b9787c07e7a32b9d50ff2efc86e21", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5083a10b287b9787c07e7a32b9d50ff2efc86e21", "committedDate": "2020-06-17T14:55:24Z", "message": "Do not enable new module.run syntax by default on minion configuration"}, "afterCommit": {"oid": "60dcceb737a471f3fe97730d11c0668908578d07", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/60dcceb737a471f3fe97730d11c0668908578d07", "committedDate": "2020-06-23T09:32:49Z", "message": "Fix mgrcompat unit tests expectation after latest fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46afc2460651e43d40aa95818549b37544868a5e", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/46afc2460651e43d40aa95818549b37544868a5e", "committedDate": "2020-06-24T09:43:46Z", "message": "Adapt SLS files to properly sync required states and modules"}, "afterCommit": {"oid": "1c5795506af55fe2900bd7155c2b907e856f7ad7", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1c5795506af55fe2900bd7155c2b907e856f7ad7", "committedDate": "2020-06-24T10:34:49Z", "message": "Add testsuite scenarios to test mgrcompat with new module.run syntax"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04d02e99bbc09ee4a598fb96655dacf315f1780d", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/04d02e99bbc09ee4a598fb96655dacf315f1780d", "committedDate": "2020-06-24T14:52:40Z", "message": "Add testsuite scenario where mgrcompat module in not synced"}, "afterCommit": {"oid": "5f9150e8b33ce32ba072b5b00a4e381921fec2f5", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5f9150e8b33ce32ba072b5b00a4e381921fec2f5", "committedDate": "2020-06-25T12:07:10Z", "message": "Testsuite: ensure mgrcompat pycache file is removed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4OTY5NDAz", "url": "https://github.com/uyuni-project/uyuni/pull/2326#pullrequestreview-438969403", "createdAt": "2020-06-29T08:00:25Z", "commit": {"oid": "43df46dd00eebda4725196097e2bd85eb80ef301"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwODowMDoyNVrOGqJCqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwODowMDoyNVrOGqJCqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg0MTUxMg==", "bodyText": "I think using module.run is now \"forbidden\". Would it make sense to do a simple test to check that nobody uses it when pushing changes in future?\nMaybe simply a\ngrep \"module.run\" %{buildroot}/usr/share/susemanager/salt || exit 1\n\nin %check section or something similar in the unit tests which can run also on PRs.", "url": "https://github.com/uyuni-project/uyuni/pull/2326#discussion_r446841512", "createdAt": "2020-06-29T08:00:25Z", "author": {"login": "mcalmer"}, "path": "susemanager-utils/susemanager-sls/susemanager-sls.spec", "diffHunk": "@@ -91,6 +91,7 @@ cp src/modules/mgrclusters.py %{buildroot}/usr/share/susemanager/salt/_modules\n cp src/modules/mgr_caasp_manager.py %{buildroot}/usr/share/susemanager/salt/_modules\n cp src/modules/ssh_agent.py %{buildroot}/usr/share/susemanager/salt/_modules\n cp src/states/product.py %{buildroot}/usr/share/susemanager/salt/_states\n+cp src/states/mgrcompat.py %{buildroot}/usr/share/susemanager/salt/_states", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43df46dd00eebda4725196097e2bd85eb80ef301"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNzE5NDg1", "url": "https://github.com/uyuni-project/uyuni/pull/2326#pullrequestreview-441719485", "createdAt": "2020-07-02T14:13:51Z", "commit": {"oid": "9c731331546e5cfeecc27c87f38f471741620c22"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNDoxMzo1MVrOGsOxcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxNDoyOToyMVrOGsPczQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAzMjU2Mw==", "bodyText": "You probably don't want this workflow to run on edited, as it would be triggered whenever the PR description is changed! The remaining event types should be just fine and this is actually the default for pull_request, i.e. you can completely omit the types. Instead you probably want to add a paths filter, see my updated version of the rubocop workflow.", "url": "https://github.com/uyuni-project/uyuni/pull/2326#discussion_r449032563", "createdAt": "2020-07-02T14:13:51Z", "author": {"login": "renner"}, "path": ".github/workflows/salt-sls-files-checks.yml", "diffHunk": "@@ -0,0 +1,21 @@\n+name: Check the content of Salt SLS files\n+\n+on:\n+  pull_request:\n+    types: [opened, edited, synchronize, reopened]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c731331546e5cfeecc27c87f38f471741620c22"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAzNjQ3MA==", "bodyText": "There is newer version (v2) of actions/checkout, it uses fetch-depth: 1 per default (so it can be omitted here) and apparently contains some other improvements. See again the rubocop workflow for an example.", "url": "https://github.com/uyuni-project/uyuni/pull/2326#discussion_r449036470", "createdAt": "2020-07-02T14:19:31Z", "author": {"login": "renner"}, "path": ".github/workflows/salt-sls-files-checks.yml", "diffHunk": "@@ -0,0 +1,21 @@\n+name: Check the content of Salt SLS files\n+\n+on:\n+  pull_request:\n+    types: [opened, edited, synchronize, reopened]\n+\n+jobs:\n+  salt_sls_files_checks:\n+\n+    runs-on: ubuntu-latest\n+    \n+    steps:\n+    - uses: actions/checkout@v1\n+      with:\n+        fetch-depth: 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c731331546e5cfeecc27c87f38f471741620c22"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTA0MzY2MQ==", "bodyText": "Isn't this doing a synchronous Salt call reaching out to that minion? Someone who is an expert on the registration code and it's scalability should probably approve this at least, I remember that previously we tried to avoid doing synchronous calls to Salt during the registration as there is a risk of blocking a thread in case the minion is not responding. If there is any option to run this asynchronously it would definitely be preferable from my perspective.", "url": "https://github.com/uyuni-project/uyuni/pull/2326#discussion_r449043661", "createdAt": "2020-07-02T14:29:21Z", "author": {"login": "renner"}, "path": "java/code/src/com/suse/manager/reactor/messaging/RegisterMinionEventMessageAction.java", "diffHunk": "@@ -403,6 +403,8 @@ else if (!minion.getOrg().equals(org)) {\n                 return;\n             }\n \n+            MinionList minionTarget = new MinionList(minionId);\n+            systemQuery.syncAll(minionTarget);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c731331546e5cfeecc27c87f38f471741620c22"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4f00ba991cd757cca78644a081b9e6cee1068f6", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a4f00ba991cd757cca78644a081b9e6cee1068f6", "committedDate": "2020-07-08T10:20:20Z", "message": "Add custom mgrcompat state module to determine module.run syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "406592c1ab75f6d88470c9136c6d51140cd30822", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/406592c1ab75f6d88470c9136c6d51140cd30822", "committedDate": "2020-07-08T10:20:23Z", "message": "Add case for any future Salt release"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbc7d8232939906093164d9c05a50d1a21892442", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/cbc7d8232939906093164d9c05a50d1a21892442", "committedDate": "2020-07-08T10:20:23Z", "message": "Add unit tests for mgrcompat custom state module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff3d796312268c12bc66c198acecce94a69e21ff", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ff3d796312268c12bc66c198acecce94a69e21ff", "committedDate": "2020-07-08T10:20:23Z", "message": "Update susemanager-sls spec to add custom states"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8540783d50e5bcb249dba8a3a13703334967f40", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c8540783d50e5bcb249dba8a3a13703334967f40", "committedDate": "2020-07-08T10:20:24Z", "message": "Adding utf8 encoding to mgrcompat test file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f6e80c828c9c9b4542a449efc81556963a8106b", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6f6e80c828c9c9b4542a449efc81556963a8106b", "committedDate": "2020-07-08T10:20:24Z", "message": "Add missing __init__ file for custom states"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f152bd953ab10b31037f56f9cf29a22324de6dd8", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f152bd953ab10b31037f56f9cf29a22324de6dd8", "committedDate": "2020-07-08T10:20:24Z", "message": "Remove conflictive mockery use on mgrcompat tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c9fcc799e3fca01bb8af3802362e83d103b82f6", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5c9fcc799e3fca01bb8af3802362e83d103b82f6", "committedDate": "2020-07-08T10:20:25Z", "message": "Update changelog for susemanager-sls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2662b4318fe4e98927f4b1046382b2195aa12496", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2662b4318fe4e98927f4b1046382b2195aa12496", "committedDate": "2020-07-08T10:20:25Z", "message": "Prevent error when no attributes passed to the execution module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c72aa64a08672e50589c961b4595dda16b864340", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c72aa64a08672e50589c961b4595dda16b864340", "committedDate": "2020-07-08T10:20:25Z", "message": "Enable newer syntax for module.run on minions while bootstrapping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f8d2bc0f193e1d9465732d849c85dc3f21d040b", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6f8d2bc0f193e1d9465732d849c85dc3f21d040b", "committedDate": "2020-07-08T10:20:25Z", "message": "Add helper for running \"saltutil.sync_all\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaf8eabcd7cc68407aee0cf45be7ee1f36770126", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/aaf8eabcd7cc68407aee0cf45be7ee1f36770126", "committedDate": "2020-07-08T10:20:26Z", "message": "Sync all grains, state, modules and beacons during registration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8599d37a6189c991e7fecd0077db0ba34a3c70f0", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8599d37a6189c991e7fecd0077db0ba34a3c70f0", "committedDate": "2020-07-08T10:20:26Z", "message": "Add syncAll as expectation while registering a minion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "716d3cd882bf2715b75a199acb1ce2044c71b5b5", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/716d3cd882bf2715b75a199acb1ce2044c71b5b5", "committedDate": "2020-07-08T10:20:26Z", "message": "Take care of not expected returns from module execution"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43c0d35e5322adbb1e5cae530a4893a7be515530", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/43c0d35e5322adbb1e5cae530a4893a7be515530", "committedDate": "2020-07-08T10:20:26Z", "message": "Update changelog for spacewalk-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b60bb6494aebfada14a5c263c5ce12874fc535b", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2b60bb6494aebfada14a5c263c5ce12874fc535b", "committedDate": "2020-07-08T10:20:28Z", "message": "Adapt expected Salt responses to mgrcompat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56cd575d620c14db217b95730a487970e06195fe", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/56cd575d620c14db217b95730a487970e06195fe", "committedDate": "2020-07-08T10:20:28Z", "message": "Handle mgrcompat parameters properly and call module.run state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01a620ea73bc1b7bed1df42eaa5cca1a69a76ae6", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/01a620ea73bc1b7bed1df42eaa5cca1a69a76ae6", "committedDate": "2020-07-08T10:20:33Z", "message": "Switch SLS files to use mgrcompat.module_run instead module.run"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c034899eb51911026ce6d05914f2453bcd441c0b", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c034899eb51911026ce6d05914f2453bcd441c0b", "committedDate": "2020-07-08T10:20:33Z", "message": "Tailor old format kwargs to newer syntax of module.run"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f0e99a03a2ad25b6c006bc02e099fee01d79e95", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1f0e99a03a2ad25b6c006bc02e099fee01d79e95", "committedDate": "2020-07-08T10:20:33Z", "message": "Do not make mgrcompat state module depending on state.single"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a46780711fc15d24fd02f986f4811842ff01d9df", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a46780711fc15d24fd02f986f4811842ff01d9df", "committedDate": "2020-07-08T10:20:34Z", "message": "Add cases for Salt Neon on mgrcompat state module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef6b07f252d7a79e49ae08e5b1b327d5dab4783b", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ef6b07f252d7a79e49ae08e5b1b327d5dab4783b", "committedDate": "2020-07-08T10:20:34Z", "message": "Fix unit tests for mgrcompat state module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d4a8090c66a0649cf534d391be38fa2ee1feafb", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2d4a8090c66a0649cf534d391be38fa2ee1feafb", "committedDate": "2020-07-08T10:20:34Z", "message": "Fix remaining SLS files that directly call module.run"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f773d4140efd0247712e927b94c0fdbdaa254e3c", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f773d4140efd0247712e927b94c0fdbdaa254e3c", "committedDate": "2020-07-08T10:20:34Z", "message": "Fix remaining reference to module.run on Java code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88169f79e69a78a8d02c9a82f7b8c49b3449bb56", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/88169f79e69a78a8d02c9a82f7b8c49b3449bb56", "committedDate": "2020-07-08T10:20:35Z", "message": "Fix mockery and test environment for mgrcompat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa7f9ae964ad8fcd9080f1933ae9958452e04a27", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fa7f9ae964ad8fcd9080f1933ae9958452e04a27", "committedDate": "2020-07-08T10:20:35Z", "message": "Fix Java issues after last rebase with master branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7147c15e9ae1464be13f979725c0015c60916087", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7147c15e9ae1464be13f979725c0015c60916087", "committedDate": "2020-07-08T10:20:35Z", "message": "Adapt remaining usage of module.run on Java and tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33516bab7e0461cde776bafd22070f253392baa6", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/33516bab7e0461cde776bafd22070f253392baa6", "committedDate": "2020-07-08T10:20:35Z", "message": "Add syncAll call to RegisterMinionActionTest expectations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70ab22027c1cd2f33f7bce90e72cc16e19a437b3", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/70ab22027c1cd2f33f7bce90e72cc16e19a437b3", "committedDate": "2020-07-08T10:20:35Z", "message": "Fix expectations for SaltActionChainGeneratorServiceTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2a712858800e90b080df2d86e189521b6a6760b", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a2a712858800e90b080df2d86e189521b6a6760b", "committedDate": "2020-07-08T10:20:36Z", "message": "Always make mgrcompat state module available"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "759f6635070727f588668c476c0240343631d6a2", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/759f6635070727f588668c476c0240343631d6a2", "committedDate": "2020-07-08T10:20:36Z", "message": "Take care of possible kwargs parameters when tailoring to new syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4684bcae8cceb59849803caaa590d3069d6576e2", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4684bcae8cceb59849803caaa590d3069d6576e2", "committedDate": "2020-07-08T10:20:36Z", "message": "Refactor checks for new syntax requirements across Salt versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e924a7a49b6b8aa6fa9d10d122032d626f7c6c1", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1e924a7a49b6b8aa6fa9d10d122032d626f7c6c1", "committedDate": "2020-07-08T10:20:36Z", "message": "Add debug logging to mgrcompat state module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f16010bb87bf17e8a87027a186eebed54e69728", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8f16010bb87bf17e8a87027a186eebed54e69728", "committedDate": "2020-07-08T10:20:36Z", "message": "Minor fix on documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fa093d531bb23d0c51045952b819c5d1032e2d9", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3fa093d531bb23d0c51045952b819c5d1032e2d9", "committedDate": "2020-07-08T10:20:37Z", "message": "Update changelog for spacewalk-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5ae175bff78e9e5f615c3f6dc1a5f89cea9f8cf", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f5ae175bff78e9e5f615c3f6dc1a5f89cea9f8cf", "committedDate": "2020-07-08T10:20:37Z", "message": "Fix tests for mgrcompat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "416bc86fbc18ddf851399c16e98e3fd0285905e0", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/416bc86fbc18ddf851399c16e98e3fd0285905e0", "committedDate": "2020-07-08T10:20:37Z", "message": "Fix issue with tailored kwargs to avoid workaround at Salt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99718c65bdf946676eb86d31c77a4e2f56efe0b6", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/99718c65bdf946676eb86d31c77a4e2f56efe0b6", "committedDate": "2020-07-08T10:20:37Z", "message": "Do not enable new module.run syntax by default on minion configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2a881e0da26c6692628679a808e64c1dddd4576", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d2a881e0da26c6692628679a808e64c1dddd4576", "committedDate": "2020-07-08T10:20:38Z", "message": "Fix mgrcompat unit tests expectation after latest fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81e00616f35b371113ea62db1249d43a680baeda", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/81e00616f35b371113ea62db1249d43a680baeda", "committedDate": "2020-07-08T10:20:38Z", "message": "Adapt SLS files to properly sync required states and modules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "314bd8f1a401cd66a551b9e470f295dbf6f7a8df", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/314bd8f1a401cd66a551b9e470f295dbf6f7a8df", "committedDate": "2020-07-08T10:20:38Z", "message": "Add testsuite scenarios to test mgrcompat with new module.run syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1152244bf81b4e8741bf34ac33fb3e03e111ae0", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d1152244bf81b4e8741bf34ac33fb3e03e111ae0", "committedDate": "2020-07-08T10:20:38Z", "message": "Fix indentation and small issue on delete cleanup scenario"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31597474c72f4b97a37b53258556451e0be3eceb", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/31597474c72f4b97a37b53258556451e0be3eceb", "committedDate": "2020-07-08T10:20:38Z", "message": "Add min_salt_mgrcompat_state.feature to secondary run_sets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6aea13a29d5ad03e4242ec079119e9ce319736f3", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6aea13a29d5ad03e4242ec079119e9ce319736f3", "committedDate": "2020-07-08T10:20:39Z", "message": "Fix missing requires to use mgrcompat instead of module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4db5f4703d1a42ea2459f8bfa365064153dbe29", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a4db5f4703d1a42ea2459f8bfa365064153dbe29", "committedDate": "2020-07-08T10:20:39Z", "message": "Fix remaining references to module state instead of mgrcompat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c78beb964d3d38fc91548b9ebda9c9618d31c67", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9c78beb964d3d38fc91548b9ebda9c9618d31c67", "committedDate": "2020-07-08T10:20:39Z", "message": "Add testsuite scenario where mgrcompat module in not synced"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a0f247da2e4aa4e92d36b53c37bb100ad2753be", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4a0f247da2e4aa4e92d36b53c37bb100ad2753be", "committedDate": "2020-07-08T10:20:39Z", "message": "Remove extra whitespaces from feature file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1d7d2013eca317a93375477cad12d1e6300764a", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b1d7d2013eca317a93375477cad12d1e6300764a", "committedDate": "2020-07-08T10:20:40Z", "message": "Fix some includes to avoid conflicts in some scenarios"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2318a3319f3d6b2632cd568037822a253aae5273", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2318a3319f3d6b2632cd568037822a253aae5273", "committedDate": "2020-07-08T10:20:40Z", "message": "Fix wrong include path to bootstrap/remove_traditional_stack.sls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5df44f7594bc1939314a14c5dee8eb28fb364e2f", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5df44f7594bc1939314a14c5dee8eb28fb364e2f", "committedDate": "2020-07-08T10:20:40Z", "message": "Do some alignment fixes to avoid rendering issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "843f76a6880b665c2bdea057920e5b5caf95c906", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/843f76a6880b665c2bdea057920e5b5caf95c906", "committedDate": "2020-07-08T10:20:40Z", "message": "Allow util.syncstates to run when mgrcompat is not yet synced"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "390fe1c602837ad723f6a928ee847b607b41a6a6", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/390fe1c602837ad723f6a928ee847b607b41a6a6", "committedDate": "2020-07-08T10:20:40Z", "message": "Testsuite: ensure mgrcompat pycache file is removed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1299194bb660ae3f9867702dc626251078e324c", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c1299194bb660ae3f9867702dc626251078e324c", "committedDate": "2020-07-08T10:20:41Z", "message": "Add extra testsuite scenario to check syncstate works on outdated minions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55ca221ea89b33f2cf75d0a80fd5e73bdb41f97d", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/55ca221ea89b33f2cf75d0a80fd5e73bdb41f97d", "committedDate": "2020-07-08T10:20:41Z", "message": "Add missing step at mgrcompat testsuite scenario"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65de81d3fc7e8749215bd354c11c359d29af43cc", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/65de81d3fc7e8749215bd354c11c359d29af43cc", "committedDate": "2020-07-08T10:20:41Z", "message": "Sync custom states when at packages.profileupdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f008220bce3cd002be84a255e96bf4eccf94e731", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f008220bce3cd002be84a255e96bf4eccf94e731", "committedDate": "2020-07-08T10:20:41Z", "message": "Sync custom states when at images.profileupdate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e71327c2995f618e974ee1ed1c5cac2844dca82d", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e71327c2995f618e974ee1ed1c5cac2844dca82d", "committedDate": "2020-07-08T10:20:42Z", "message": "Sync custom states when srvmonitoring.status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d41bcf531ffa535ee774c0a722b0b87cbde80f62", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d41bcf531ffa535ee774c0a722b0b87cbde80f62", "committedDate": "2020-07-08T10:20:42Z", "message": "Add github workflow to check SLS content: no usage of module.run"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "216e7e41a25c2a3285cd913abf030c03f0af74e9", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/216e7e41a25c2a3285cd913abf030c03f0af74e9", "committedDate": "2020-07-08T10:20:42Z", "message": "Fail to build susemanager-sls if SLS contains contains module.run calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f36f621e3002f7bae9636de7b1fe10eac64bfe19", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f36f621e3002f7bae9636de7b1fe10eac64bfe19", "committedDate": "2020-07-08T10:20:42Z", "message": "Fix path to .github/config/file-content-checks.toml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38e6757a5826ee2d830e899dbf536750666bfe7d", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/38e6757a5826ee2d830e899dbf536750666bfe7d", "committedDate": "2020-07-08T10:25:31Z", "message": "Do not sync all custom Salt modules during registration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "54882f09556625b5986c152b1da4712f7cf69719", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/54882f09556625b5986c152b1da4712f7cf69719", "committedDate": "2020-07-03T08:44:33Z", "message": "Fix typo on github workflow path"}, "afterCommit": {"oid": "38e6757a5826ee2d830e899dbf536750666bfe7d", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/38e6757a5826ee2d830e899dbf536750666bfe7d", "committedDate": "2020-07-08T10:25:31Z", "message": "Do not sync all custom Salt modules during registration"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1333, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}