{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MDAyODc4", "number": 2136, "title": "Add support for extra HTTP headers for \"spacewalk-repo-sync\" on RPM repos", "bodyText": "What does this PR change?\nThis PR enables spacewalk-repo-sync to use extra HTTP headers when dealing with RPM repositories:\n\nExtra HTTP headers can be now defined at /etc/rhn/spacewalk-repo-sync/extra_headers.conf file, in a similar way as you can set HTTP proxy settings:\n\n# You can define extra headers per channel label\n[channel_label]\nheader1=value1\nheader2=value2\n\n# Or by repository name\n[repository_name]\nanother_header1=value\nanother_header2=value\n\n# Or globally for all respositories and channels\n[main]\na_global_header=value\n\nA new Zypper plugin called spacewalk-extra-http-headers has been also introduced in order to allow injecting the customer headers into the requests made by Zypper to retrieve the repository metadata.\n\nThis is particularly useful to deal with RHUI repositories within the public clouds.\nNOTE: This PR also adds missing ulnauth and spacewalk-uln-resolver files to spacewalk-backend-tools package.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nuyuni-project/uyuni-docs#217\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests: no tests for reposync with extra headers\n\n\n DONE\n\n\nLinks\nTracks SUSE/spacewalk#10936\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-04-20T11:25:12Z", "url": "https://github.com/uyuni-project/uyuni/pull/2136", "merged": true, "mergeCommit": {"oid": "03c93d62dd28a35e30741833895df957f763125a"}, "closed": true, "closedAt": "2020-04-21T08:35:37Z", "author": {"login": "meaksh"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZcnsMgH2gAyNDA2MDAyODc4OmFkYWRmNmQ3NzA1N2UyODk2NTExZjBhZjA3NzMzM2ViN2RiMzJiNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZvC65gFqTM5NzA4MzIzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "adadf6d77057e2896511f0af077333eb7db32b45", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/adadf6d77057e2896511f0af077333eb7db32b45", "committedDate": "2020-04-20T10:34:53Z", "message": "Introduce Zypper plugin to add extra HTTP headers on spacewalk-repo-sync"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a165a2d323de10f0e268519428ea3b3bdc10a42", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3a165a2d323de10f0e268519428ea3b3bdc10a42", "committedDate": "2020-04-20T10:34:54Z", "message": "Enable extra HTTP headers on spacewalk-repo-sync"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9cb27c086b62aa7933f462f0c5a8fe88bc721e8", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e9cb27c086b62aa7933f462f0c5a8fe88bc721e8", "committedDate": "2020-04-20T10:46:28Z", "message": "Include reposync Zypper plugins in spacewalk-backend-tools package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "586c1eb15f32a5f3ddb7303d44df2609c1bac9a5", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/586c1eb15f32a5f3ddb7303d44df2609c1bac9a5", "committedDate": "2020-04-20T10:46:28Z", "message": "Update changelog for spacewalk-backend"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c48f445e34c18a2fd1ac04ad50489f703e7f33d", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2c48f445e34c18a2fd1ac04ad50489f703e7f33d", "committedDate": "2020-04-20T10:52:16Z", "message": "Add missing ulnauth module to spacewalk-backend-tools package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9211ed52cf6a6afd3114257a63b37bc7f4a53027", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9211ed52cf6a6afd3114257a63b37bc7f4a53027", "committedDate": "2020-04-20T11:00:59Z", "message": "Rename constant for better consistency"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2Mzg2MjQx", "url": "https://github.com/uyuni-project/uyuni/pull/2136#pullrequestreview-396386241", "createdAt": "2020-04-20T11:58:40Z", "commit": {"oid": "9211ed52cf6a6afd3114257a63b37bc7f4a53027"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMTo1ODo0MFrOGIQ7iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMTo1ODo0MFrOGIQ7iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMxOTE3Ng==", "bodyText": "Is the shebang changed when building the package? If not, I fear that using env is not allowed and we do not want python2 anymore.", "url": "https://github.com/uyuni-project/uyuni/pull/2136#discussion_r411319176", "createdAt": "2020-04-20T11:58:40Z", "author": {"login": "mcalmer"}, "path": "backend/satellite_tools/spacewalk-extra-http-headers", "diffHunk": "@@ -0,0 +1,53 @@\n+#!/usr/bin/env python", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9211ed52cf6a6afd3114257a63b37bc7f4a53027"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NDI4NzQ5", "url": "https://github.com/uyuni-project/uyuni/pull/2136#pullrequestreview-396428749", "createdAt": "2020-04-20T12:59:33Z", "commit": {"oid": "9211ed52cf6a6afd3114257a63b37bc7f4a53027"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MDgzMjMz", "url": "https://github.com/uyuni-project/uyuni/pull/2136#pullrequestreview-397083233", "createdAt": "2020-04-21T08:02:55Z", "commit": {"oid": "9211ed52cf6a6afd3114257a63b37bc7f4a53027"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1362, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}