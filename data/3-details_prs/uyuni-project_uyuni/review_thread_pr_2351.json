{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4NjU3NTYx", "number": 2351, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNTo0MTo1MlrOEIOZ2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNTo0MTo1MlrOEIOZ2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MDYwMDU4OnYy", "diffSide": "RIGHT", "path": "java/code/src/com/redhat/rhn/taskomatic/domain/TaskoSchedule.hbm.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNTo0MTo1MlrOGoDrAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOToxOTo0M1rOGoKBsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDY1NjM4NQ==", "bodyText": "As for your question in the PR discussion: I think adjusting a hibernate queries is ok here. The only thing that rings a bell, is the situation, when :filter is an empty collection. Can you make sure, that the query would work in that case too? The query should be robust enough to handle that too.", "url": "https://github.com/uyuni-project/uyuni/pull/2351#discussion_r444656385", "createdAt": "2020-06-24T05:41:52Z", "author": {"login": "hustodemon"}, "path": "java/code/src/com/redhat/rhn/taskomatic/domain/TaskoSchedule.hbm.xml", "diffHunk": "@@ -77,15 +77,15 @@ PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n         </query>\n \n         <query name=\"TaskoSchedule.listActiveByOrg\">\n-            <![CDATA[FROM com.redhat.rhn.taskomatic.domain.TaskoSchedule WHERE orgId = :org_id AND (activeFrom < :timestamp AND (activeTill is null OR :timestamp < activeTill))]]>\n+            <![CDATA[FROM com.redhat.rhn.taskomatic.domain.TaskoSchedule WHERE orgId = :org_id AND (activeFrom < :timestamp AND (activeTill is null OR :timestamp < activeTill)) AND bunch.name NOT IN :filter]]>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5b63f9b999e785335ee0afad006b2f4781944f6"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2MDQ5OQ==", "bodyText": "Right thanks for pointing that out. I should have tried that. Putting an empty Array in the query won't work.\nI decided to adapt the method calling the query instead (using the removeIf(...) approach I used in the other case)", "url": "https://github.com/uyuni-project/uyuni/pull/2351#discussion_r444760499", "createdAt": "2020-06-24T09:19:43Z", "author": {"login": "parlt91"}, "path": "java/code/src/com/redhat/rhn/taskomatic/domain/TaskoSchedule.hbm.xml", "diffHunk": "@@ -77,15 +77,15 @@ PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n         </query>\n \n         <query name=\"TaskoSchedule.listActiveByOrg\">\n-            <![CDATA[FROM com.redhat.rhn.taskomatic.domain.TaskoSchedule WHERE orgId = :org_id AND (activeFrom < :timestamp AND (activeTill is null OR :timestamp < activeTill))]]>\n+            <![CDATA[FROM com.redhat.rhn.taskomatic.domain.TaskoSchedule WHERE orgId = :org_id AND (activeFrom < :timestamp AND (activeTill is null OR :timestamp < activeTill)) AND bunch.name NOT IN :filter]]>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDY1NjM4NQ=="}, "originalCommit": {"oid": "f5b63f9b999e785335ee0afad006b2f4781944f6"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4208, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}