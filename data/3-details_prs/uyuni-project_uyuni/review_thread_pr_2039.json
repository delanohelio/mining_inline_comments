{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNjIwMTYx", "number": 2039, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0MTo1OFrODqR4vA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMDoyODo0NFrODqUTZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NjU5ODM2OnYy", "diffSide": "RIGHT", "path": "schema/spacewalk/update-messages.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0MTo1OFrOF57XEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0MTo1OFrOF57XEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI4NTcxMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The changes will be applied automatically at the end\n          \n          \n            \n            The patch will be applied automatically at the end", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396285712", "createdAt": "2020-03-23T08:41:58Z", "author": {"login": "keichwa"}, "path": "schema/spacewalk/update-messages.txt", "diffHunk": "@@ -2,19 +2,16 @@\n SUSE Manager Database Schema Update\n \n This patch updates the database schema.\n-Additional configuration steps are required.\n+The changes will be applied automatically at the end", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd4ad8955a4bb73821f75d204fee73c02a2f60a8"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NjYwMDE4OnYy", "diffSide": "RIGHT", "path": "schema/spacewalk/update-messages.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0MjoyOVrOF57YPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0MjoyOVrOF57YPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI4NjAxMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In case of a failure, some services are stopped or cannot\n          \n          \n            \n            In case of a failure, spacewalk services are stopped and cannot", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396286012", "createdAt": "2020-03-23T08:42:29Z", "author": {"login": "keichwa"}, "path": "schema/spacewalk/update-messages.txt", "diffHunk": "@@ -2,19 +2,16 @@\n SUSE Manager Database Schema Update\n \n This patch updates the database schema.\n-Additional configuration steps are required.\n+The changes will be applied automatically at the end\n+of the update.\n+In case of a failure, some services are stopped or cannot", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd4ad8955a4bb73821f75d204fee73c02a2f60a8"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NjYwMTkxOnYy", "diffSide": "RIGHT", "path": "schema/spacewalk/update-messages.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0Mjo1NlrOF57ZRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0Mjo1NlrOF57ZRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI4NjI3Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            be started util the issue was fixed.\n          \n          \n            \n            be started until the issue is fixed.", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396286277", "createdAt": "2020-03-23T08:42:56Z", "author": {"login": "keichwa"}, "path": "schema/spacewalk/update-messages.txt", "diffHunk": "@@ -2,19 +2,16 @@\n SUSE Manager Database Schema Update\n \n This patch updates the database schema.\n-Additional configuration steps are required.\n+The changes will be applied automatically at the end\n+of the update.\n+In case of a failure, some services are stopped or cannot\n+be started util the issue was fixed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd4ad8955a4bb73821f75d204fee73c02a2f60a8"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NjYwNDk2OnYy", "diffSide": "RIGHT", "path": "schema/spacewalk/update-messages.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0Mzo0NlrOF57bGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0Mzo0NlrOF57bGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI4Njc0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For more information about the failure call:\n          \n          \n            \n            For more information about the failure, enter:", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396286744", "createdAt": "2020-03-23T08:43:46Z", "author": {"login": "keichwa"}, "path": "schema/spacewalk/update-messages.txt", "diffHunk": "@@ -2,19 +2,16 @@\n SUSE Manager Database Schema Update\n \n This patch updates the database schema.\n-Additional configuration steps are required.\n+The changes will be applied automatically at the end\n+of the update.\n+In case of a failure, some services are stopped or cannot\n+be started util the issue was fixed.\n \n-1. Stop the Spacewalk service before you apply this patch:\n-spacewalk-service stop\n+For more information about the failure call:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd4ad8955a4bb73821f75d204fee73c02a2f60a8"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NjYwODMxOnYy", "diffSide": "RIGHT", "path": "schema/spacewalk/update-messages.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0NDo0MVrOF57dFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwODo0NDo0MVrOF57dFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI4NzI1Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When the schema update was applied successfully, start the\n          \n          \n            \n            When the schema update is applied successfully, start the", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396287253", "createdAt": "2020-03-23T08:44:41Z", "author": {"login": "keichwa"}, "path": "schema/spacewalk/update-messages.txt", "diffHunk": "@@ -2,19 +2,16 @@\n SUSE Manager Database Schema Update\n \n This patch updates the database schema.\n-Additional configuration steps are required.\n+The changes will be applied automatically at the end\n+of the update.\n+In case of a failure, some services are stopped or cannot\n+be started util the issue was fixed.\n \n-1. Stop the Spacewalk service before you apply this patch:\n-spacewalk-service stop\n+For more information about the failure call:\n \n-2. Apply the patch.\n+systemctl status uyuni-check-database.service\n \n-3. If the SUSE Manager database is running on the same machine as\n-your SUSE Manager Server, take care that the database instance is\n-running\n+When the schema update was applied successfully, start the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd4ad8955a4bb73821f75d204fee73c02a2f60a8"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1Njc4NzYxOnYy", "diffSide": "RIGHT", "path": "schema/spacewalk/update-messages.txt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOTozMzozNFrOF59MVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMToxNToxNFrOF6A01Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMxNTczNA==", "bodyText": "Shouldn't  it be spacewalk service as we had before?", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396315734", "createdAt": "2020-03-23T09:33:34Z", "author": {"login": "juliogonzalez"}, "path": "schema/spacewalk/update-messages.txt", "diffHunk": "@@ -2,19 +2,16 @@\n SUSE Manager Database Schema Update\n \n This patch updates the database schema.\n-Additional configuration steps are required.\n+The patch will be applied automatically at the end\n+of the update.\n+In case of a failure, spacewalk services are stopped and cannot", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9092e6ec88fa0878c2fe068813943d64cd2188"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3NTI1Mw==", "bodyText": "Well, there not this one spacewalk service. spacewalk-service is a systemd target and contains multiple services.", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396375253", "createdAt": "2020-03-23T11:15:14Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/update-messages.txt", "diffHunk": "@@ -2,19 +2,16 @@\n SUSE Manager Database Schema Update\n \n This patch updates the database schema.\n-Additional configuration steps are required.\n+The patch will be applied automatically at the end\n+of the update.\n+In case of a failure, spacewalk services are stopped and cannot", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMxNTczNA=="}, "originalCommit": {"oid": "7b9092e6ec88fa0878c2fe068813943d64cd2188"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1Njc5MjQwOnYy", "diffSide": "RIGHT", "path": "schema/spacewalk/susemanager-schema.spec", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOTozNDo0OVrOF59PPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMToxNTo1OFrOF6A2uA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMxNjQ3Ng==", "bodyText": "As I don't see this service here, I guess it was added in the past, right?\nThis looks good, the package will not break as we always return true, so there will be this error, but services will not start.", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396316476", "createdAt": "2020-03-23T09:34:49Z", "author": {"login": "juliogonzalez"}, "path": "schema/spacewalk/susemanager-schema.spec", "diffHunk": "@@ -103,6 +103,9 @@ else\n fi\n %endif\n \n+%posttrans\n+systemctl try-restart uyuni-check-database.service ||:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9092e6ec88fa0878c2fe068813943d64cd2188"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3NTczNg==", "bodyText": "yes, and there are now dependencies which turn tomcat, apache, etc. off if this fail.", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396375736", "createdAt": "2020-03-23T11:15:58Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/susemanager-schema.spec", "diffHunk": "@@ -103,6 +103,9 @@ else\n fi\n %endif\n \n+%posttrans\n+systemctl try-restart uyuni-check-database.service ||:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMxNjQ3Ng=="}, "originalCommit": {"oid": "7b9092e6ec88fa0878c2fe068813943d64cd2188"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NjgxMzUzOnYy", "diffSide": "RIGHT", "path": "schema/spacewalk/update-messages.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOTozOTo1NVrOF59byA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOTozOTo1NVrOF59byA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMxOTY4OA==", "bodyText": "service or services?", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396319688", "createdAt": "2020-03-23T09:39:55Z", "author": {"login": "juliogonzalez"}, "path": "schema/spacewalk/update-messages.txt", "diffHunk": "@@ -2,19 +2,16 @@\n SUSE Manager Database Schema Update\n \n This patch updates the database schema.\n-Additional configuration steps are required.\n+The patch will be applied automatically at the end\n+of the update.\n+In case of a failure, spacewalk services are stopped and cannot\n+be started until the issue is fixed.\n \n-1. Stop the Spacewalk service before you apply this patch:\n-spacewalk-service stop\n+For more information about the failure, enter:\n \n-2. Apply the patch.\n+systemctl status uyuni-check-database.service\n \n-3. If the SUSE Manager database is running on the same machine as\n-your SUSE Manager Server, take care that the database instance is\n-running\n+When the schema update is applied successfully, start the\n+services again with:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9092e6ec88fa0878c2fe068813943d64cd2188"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1Njk5NDMwOnYy", "diffSide": "RIGHT", "path": "spacewalk/admin/spacewalk-admin.spec", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMDoyODo0NFrOF5_Nhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMToxODo0N1rOF6A9OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM0ODgwNg==", "bodyText": "Why do we need this change?", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396348806", "createdAt": "2020-03-23T10:28:44Z", "author": {"login": "hustodemon"}, "path": "spacewalk/admin/spacewalk-admin.spec", "diffHunk": "@@ -86,6 +86,12 @@ ln -s spacewalk-service $RPM_BUILD_ROOT%{_sbindir}/rhn-satellite\n sed -i 's|#!/usr/bin/python|#!/usr/bin/python3|' $RPM_BUILD_ROOT/usr/bin/mgr-events-config.py\n %endif\n \n+%post", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9092e6ec88fa0878c2fe068813943d64cd2188"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3NzQwMA==", "bodyText": "This is a fix which would be good to have already now. when we change .service files or add new, we need to reload the systemd daemon. Otherwise it does not know about the changes.\nspacewalk-admin is not touched very often. So I think it is ok, to call a reload on every change.", "url": "https://github.com/uyuni-project/uyuni/pull/2039#discussion_r396377400", "createdAt": "2020-03-23T11:18:47Z", "author": {"login": "mcalmer"}, "path": "spacewalk/admin/spacewalk-admin.spec", "diffHunk": "@@ -86,6 +86,12 @@ ln -s spacewalk-service $RPM_BUILD_ROOT%{_sbindir}/rhn-satellite\n sed -i 's|#!/usr/bin/python|#!/usr/bin/python3|' $RPM_BUILD_ROOT/usr/bin/mgr-events-config.py\n %endif\n \n+%post", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM0ODgwNg=="}, "originalCommit": {"oid": "7b9092e6ec88fa0878c2fe068813943d64cd2188"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 32, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}