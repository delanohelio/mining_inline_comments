{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MzMxNTEz", "number": 2198, "reviewThreads": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQxMToxMjozMlrOD62rUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMToxMTowNFrOD7Md-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDM5ODI3OnYy", "diffSide": "RIGHT", "path": "testsuite/documentation/static-run.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQxMToxMjozMlrOGS6YFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNzo1MDo1OVrOGTQqkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4Mzk4OQ==", "bodyText": "bldh? Sounds like my dog tapping the keyboard \ud83d\udc36\nIMHO I don't is that bad to add few more characters to a domain name. build-host-sles12sp3.tf.local\nBTW, we do on a SP3 then?", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422483989", "createdAt": "2020-05-09T11:12:32Z", "author": {"login": "srbarrios"}, "path": "testsuite/documentation/static-run.md", "diffHunk": "@@ -28,6 +29,7 @@ To run all standard tests, from the controller:\n export SERVER=\"${PREFIX}suma3pg.tf.local\"\n export CLIENT=\"${PREFIX}clisles12sp3.tf.local\"\n export MINION=\"${PREFIX}minsles12sp3.tf.local\"\n+export BUILD_HOST=\"${PREFIX}bldhsles12sp3.tf.local\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg0OTE3MA==", "bodyText": "Thanks for suggesting an alternative; I am going to switch to build-host-sles12sp4.tf.local.\nWe are using SP4; I am going to fix al so that.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422849170", "createdAt": "2020-05-11T07:50:59Z", "author": {"login": "calancha"}, "path": "testsuite/documentation/static-run.md", "diffHunk": "@@ -28,6 +29,7 @@ To run all standard tests, from the controller:\n export SERVER=\"${PREFIX}suma3pg.tf.local\"\n export CLIENT=\"${PREFIX}clisles12sp3.tf.local\"\n export MINION=\"${PREFIX}minsles12sp3.tf.local\"\n+export BUILD_HOST=\"${PREFIX}bldhsles12sp3.tf.local\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4Mzk4OQ=="}, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDM5OTI5OnYy", "diffSide": "RIGHT", "path": "testsuite/features/init_clients/sle_buildhost.feature", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQxMToxMzo0NVrOGS6Yhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDo0MzowN1rOGTfcjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NDEwMg==", "bodyText": "I would only write the tag once at the feature level, as it applies to all the scenarios", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422484102", "createdAt": "2020-05-09T11:13:45Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg0ODU2Mw==", "bodyText": "It was argued that there might be a difference in those cases (tag at feature VS tag on each scenario): it was suggested that the later might be more verbose than the former; we never found the time to check this.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422848563", "createdAt": "2020-05-11T07:49:53Z", "author": {"login": "calancha"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NDEwMg=="}, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk0OTc5NA==", "bodyText": "The only practical difference at run time, if I am not wrong, is that the whole feature disappears from the output and the logs if the tag is set at feature level. To be checked, I'm not 100 % sure of it right now.\nI kind of prefer to have it at scenario level, even if it is more verbose, because it acts as a reminder. But I suppose this is a matter of tastes.\nYes, we should discuss it once for all.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422949794", "createdAt": "2020-05-11T10:42:52Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NDEwMg=="}, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk2MDk1Mg==", "bodyText": "Tag at the feature level, from the point of view of implementation it's just adding the tag in all the scenarios.\nSo there are no differences in terms of performance or logging. If we will require the tag in all the scenarios, imho better if we just only have once at the feature level.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422960952", "createdAt": "2020-05-11T11:03:45Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NDEwMg=="}, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAyODkxMQ==", "bodyText": "Let's discuss the convention to follow out of this PR; once we get an agreement we can open a dedicated PR for that (updating the documentation as well with the desired convention).", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r423028911", "createdAt": "2020-05-11T13:13:32Z", "author": {"login": "calancha"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NDEwMg=="}, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA5MTM0MA==", "bodyText": "Sure.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r423091340", "createdAt": "2020-05-11T14:43:07Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NDEwMg=="}, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDQwMDI4OnYy", "diffSide": "RIGHT", "path": "testsuite/features/init_clients/sle_buildhost.feature", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQxMToxNTozOVrOGS6ZAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowNTo0OVrOGTXjKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NDIyNQ==", "bodyText": "This bug still applying?", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422484225", "createdAt": "2020-05-09T11:15:39Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost\n+  Scenario: Create the bootstrap repository for a Salt client buildhost\n+     Given I am authorized\n+     And I create the \"x86_64\" bootstrap repository for \"buildhost\" on the server\n+\n+@buildhost\n+  Scenario: Bootstrap a SLES buildhost\n+     Given I am authorized\n+     When I go to the bootstrapping page\n+     Then I should see a \"Bootstrap Minions\" text\n+     When I enter the hostname of \"buildhost\" as \"hostname\"\n+     And I enter \"22\" as \"port\"\n+     And I enter \"root\" as \"user\"\n+     And I enter \"linux\" as \"password\"\n+     And I select the hostname of \"proxy\" from \"proxies\"\n+     And I click on \"Bootstrap\"\n+     And I wait until I see \"Successfully bootstrapped host!\" text\n+\n+@buildhost\n+  Scenario: Check the new bootstrapped buildhost in System Overview page\n+    Given I am authorized\n+    When I go to the minion onboarding page\n+    Then I should see a \"accepted\" text\n+    When I follow the left menu \"Systems > Overview\"\n+    And I wait until I see the name of \"buildhost\", refreshing the page\n+    And I wait until onboarding is completed for \"buildhost\"\n+    Then the Salt master can reach \"buildhost\"\n+\n+@proxy\n+@buildhost\n+  Scenario: Check connection from buildhost to proxy\n+    Given I am on the Systems overview page of this \"buildhost\"\n+    When I follow \"Details\" in the content area\n+    And I follow \"Connection\" in the content area\n+    Then I should see \"proxy\" short hostname\n+\n+@proxy\n+@buildhost\n+  Scenario: Check registration on buildhost of minion\n+    Given I am on the Systems overview page of this \"proxy\"\n+    When I follow \"Details\" in the content area\n+    And I follow \"Proxy\" in the content area\n+    Then I should see \"buildhost\" hostname\n+\n+@buildhost\n+  Scenario: Subscribe the SLES buildhost to a base channel\n+    Given I am on the Systems overview page of this \"buildhost\"\n+    When I follow \"Software\" in the content area\n+    And I follow \"Software Channels\" in the content area\n+    And I wait until I do not see \"Loading...\" text\n+    And I check radio button \"Test-Channel-x86_64\"\n+    And I wait until I do not see \"Loading...\" text\n+    And I click on \"Next\"\n+    Then I should see a \"Confirm Software Channel Change\" text\n+    When I click on \"Confirm\"\n+    Then I should see a \"Changing the channels has been scheduled.\" text\n+    And I wait until event \"Subscribe channels scheduled by admin\" is completed\n+\n+  # bsc#1085436 - Apache returns 403 Forbidden after a zypper refresh on minion", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg2MTM3NA==", "bodyText": "It's fixed.  What should I do? Just delete the comment or something else?", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422861374", "createdAt": "2020-05-11T08:12:31Z", "author": {"login": "calancha"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost\n+  Scenario: Create the bootstrap repository for a Salt client buildhost\n+     Given I am authorized\n+     And I create the \"x86_64\" bootstrap repository for \"buildhost\" on the server\n+\n+@buildhost\n+  Scenario: Bootstrap a SLES buildhost\n+     Given I am authorized\n+     When I go to the bootstrapping page\n+     Then I should see a \"Bootstrap Minions\" text\n+     When I enter the hostname of \"buildhost\" as \"hostname\"\n+     And I enter \"22\" as \"port\"\n+     And I enter \"root\" as \"user\"\n+     And I enter \"linux\" as \"password\"\n+     And I select the hostname of \"proxy\" from \"proxies\"\n+     And I click on \"Bootstrap\"\n+     And I wait until I see \"Successfully bootstrapped host!\" text\n+\n+@buildhost\n+  Scenario: Check the new bootstrapped buildhost in System Overview page\n+    Given I am authorized\n+    When I go to the minion onboarding page\n+    Then I should see a \"accepted\" text\n+    When I follow the left menu \"Systems > Overview\"\n+    And I wait until I see the name of \"buildhost\", refreshing the page\n+    And I wait until onboarding is completed for \"buildhost\"\n+    Then the Salt master can reach \"buildhost\"\n+\n+@proxy\n+@buildhost\n+  Scenario: Check connection from buildhost to proxy\n+    Given I am on the Systems overview page of this \"buildhost\"\n+    When I follow \"Details\" in the content area\n+    And I follow \"Connection\" in the content area\n+    Then I should see \"proxy\" short hostname\n+\n+@proxy\n+@buildhost\n+  Scenario: Check registration on buildhost of minion\n+    Given I am on the Systems overview page of this \"proxy\"\n+    When I follow \"Details\" in the content area\n+    And I follow \"Proxy\" in the content area\n+    Then I should see \"buildhost\" hostname\n+\n+@buildhost\n+  Scenario: Subscribe the SLES buildhost to a base channel\n+    Given I am on the Systems overview page of this \"buildhost\"\n+    When I follow \"Software\" in the content area\n+    And I follow \"Software Channels\" in the content area\n+    And I wait until I do not see \"Loading...\" text\n+    And I check radio button \"Test-Channel-x86_64\"\n+    And I wait until I do not see \"Loading...\" text\n+    And I click on \"Next\"\n+    Then I should see a \"Confirm Software Channel Change\" text\n+    When I click on \"Confirm\"\n+    Then I should see a \"Changing the channels has been scheduled.\" text\n+    And I wait until event \"Subscribe channels scheduled by admin\" is completed\n+\n+  # bsc#1085436 - Apache returns 403 Forbidden after a zypper refresh on minion", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NDIyNQ=="}, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1NDQ2NA==", "bodyText": "This test is here to verify the bug fix indeed works, not to work around it. Otherwise we would have WORKAROUNDin comment  .\nBut given that we will not do package tests here, just nuke the scenario here, please.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422954464", "createdAt": "2020-05-11T10:51:35Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost\n+  Scenario: Create the bootstrap repository for a Salt client buildhost\n+     Given I am authorized\n+     And I create the \"x86_64\" bootstrap repository for \"buildhost\" on the server\n+\n+@buildhost\n+  Scenario: Bootstrap a SLES buildhost\n+     Given I am authorized\n+     When I go to the bootstrapping page\n+     Then I should see a \"Bootstrap Minions\" text\n+     When I enter the hostname of \"buildhost\" as \"hostname\"\n+     And I enter \"22\" as \"port\"\n+     And I enter \"root\" as \"user\"\n+     And I enter \"linux\" as \"password\"\n+     And I select the hostname of \"proxy\" from \"proxies\"\n+     And I click on \"Bootstrap\"\n+     And I wait until I see \"Successfully bootstrapped host!\" text\n+\n+@buildhost\n+  Scenario: Check the new bootstrapped buildhost in System Overview page\n+    Given I am authorized\n+    When I go to the minion onboarding page\n+    Then I should see a \"accepted\" text\n+    When I follow the left menu \"Systems > Overview\"\n+    And I wait until I see the name of \"buildhost\", refreshing the page\n+    And I wait until onboarding is completed for \"buildhost\"\n+    Then the Salt master can reach \"buildhost\"\n+\n+@proxy\n+@buildhost\n+  Scenario: Check connection from buildhost to proxy\n+    Given I am on the Systems overview page of this \"buildhost\"\n+    When I follow \"Details\" in the content area\n+    And I follow \"Connection\" in the content area\n+    Then I should see \"proxy\" short hostname\n+\n+@proxy\n+@buildhost\n+  Scenario: Check registration on buildhost of minion\n+    Given I am on the Systems overview page of this \"proxy\"\n+    When I follow \"Details\" in the content area\n+    And I follow \"Proxy\" in the content area\n+    Then I should see \"buildhost\" hostname\n+\n+@buildhost\n+  Scenario: Subscribe the SLES buildhost to a base channel\n+    Given I am on the Systems overview page of this \"buildhost\"\n+    When I follow \"Software\" in the content area\n+    And I follow \"Software Channels\" in the content area\n+    And I wait until I do not see \"Loading...\" text\n+    And I check radio button \"Test-Channel-x86_64\"\n+    And I wait until I do not see \"Loading...\" text\n+    And I click on \"Next\"\n+    Then I should see a \"Confirm Software Channel Change\" text\n+    When I click on \"Confirm\"\n+    Then I should see a \"Changing the channels has been scheduled.\" text\n+    And I wait until event \"Subscribe channels scheduled by admin\" is completed\n+\n+  # bsc#1085436 - Apache returns 403 Forbidden after a zypper refresh on minion", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NDIyNQ=="}, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk2MTk2MQ==", "bodyText": "Well, I'm not sure if the action behind it is made for that reason.\nCheck who implemented the step definition. Apparently it could be some relation. Maybe we can remove some hack or remove the scenario from that feature.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422961961", "createdAt": "2020-05-11T11:05:49Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost\n+  Scenario: Create the bootstrap repository for a Salt client buildhost\n+     Given I am authorized\n+     And I create the \"x86_64\" bootstrap repository for \"buildhost\" on the server\n+\n+@buildhost\n+  Scenario: Bootstrap a SLES buildhost\n+     Given I am authorized\n+     When I go to the bootstrapping page\n+     Then I should see a \"Bootstrap Minions\" text\n+     When I enter the hostname of \"buildhost\" as \"hostname\"\n+     And I enter \"22\" as \"port\"\n+     And I enter \"root\" as \"user\"\n+     And I enter \"linux\" as \"password\"\n+     And I select the hostname of \"proxy\" from \"proxies\"\n+     And I click on \"Bootstrap\"\n+     And I wait until I see \"Successfully bootstrapped host!\" text\n+\n+@buildhost\n+  Scenario: Check the new bootstrapped buildhost in System Overview page\n+    Given I am authorized\n+    When I go to the minion onboarding page\n+    Then I should see a \"accepted\" text\n+    When I follow the left menu \"Systems > Overview\"\n+    And I wait until I see the name of \"buildhost\", refreshing the page\n+    And I wait until onboarding is completed for \"buildhost\"\n+    Then the Salt master can reach \"buildhost\"\n+\n+@proxy\n+@buildhost\n+  Scenario: Check connection from buildhost to proxy\n+    Given I am on the Systems overview page of this \"buildhost\"\n+    When I follow \"Details\" in the content area\n+    And I follow \"Connection\" in the content area\n+    Then I should see \"proxy\" short hostname\n+\n+@proxy\n+@buildhost\n+  Scenario: Check registration on buildhost of minion\n+    Given I am on the Systems overview page of this \"proxy\"\n+    When I follow \"Details\" in the content area\n+    And I follow \"Proxy\" in the content area\n+    Then I should see \"buildhost\" hostname\n+\n+@buildhost\n+  Scenario: Subscribe the SLES buildhost to a base channel\n+    Given I am on the Systems overview page of this \"buildhost\"\n+    When I follow \"Software\" in the content area\n+    And I follow \"Software Channels\" in the content area\n+    And I wait until I do not see \"Loading...\" text\n+    And I check radio button \"Test-Channel-x86_64\"\n+    And I wait until I do not see \"Loading...\" text\n+    And I click on \"Next\"\n+    Then I should see a \"Confirm Software Channel Change\" text\n+    When I click on \"Confirm\"\n+    Then I should see a \"Changing the channels has been scheduled.\" text\n+    And I wait until event \"Subscribe channels scheduled by admin\" is completed\n+\n+  # bsc#1085436 - Apache returns 403 Forbidden after a zypper refresh on minion", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ4NDIyNQ=="}, "originalCommit": {"oid": "943cbc21f3fcacf0ccb6fffe68a748fd6770324c"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzcyMzIxOnYy", "diffSide": "RIGHT", "path": "testsuite/README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwOTo1OTozNVrOGTVXJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwOTo1OTozNVrOGTVXJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjkyNjExOA==", "bodyText": "Good catch, thanks.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422926118", "createdAt": "2020-05-11T09:59:35Z", "author": {"login": "Bischoff"}, "path": "testsuite/README.md", "diffHunk": "@@ -11,7 +11,7 @@ Apart from Cucumber, the testsuite relies on a number of [software components](d\n \n # Running the testsuite\n \n-You can run the SUSE Manager testsuite [with sumaform](https://github.com/moio/sumaform/blob/master/README_ADVANCED.md#cucumber-testsuite).\n+You can run the SUSE Manager testsuite [with sumaform](https://github.com/uyuni-project/sumaform/blob/master/README_ADVANCED.md#cucumber-testsuite).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzc4NjQ2OnYy", "diffSide": "RIGHT", "path": "testsuite/documentation/cucumber-steps.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDoxNzoyMFrOGTV-XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDoxNzoyMFrOGTV-XA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjkzNjE1Ng==", "bodyText": "I suggest build_host with an underscore for the step host name.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422936156", "createdAt": "2020-05-11T10:17:20Z", "author": {"login": "Bischoff"}, "path": "testsuite/documentation/cucumber-steps.md", "diffHunk": "@@ -37,8 +37,9 @@ Possible values are currently:\n | SUSE Manager proxy | ```$proxy``` | ```$PROXY``` | ```\"proxy\"``` | ```\"suse_manager_proxy\"``` |\n | SLES traditional client | ```$client``` | ```$CLIENT``` | ```\"sle_client\"``` | ```\"client\"``` |\n | SLES Salt minion | ```$minion``` | ```$MINION``` | ```\"sle_minion\"``` or ```\"sle_migrated_minion\"``` | ```\"minion\"``` |\n+| SLES Docker and Kiwi build host | ```$build_host``` | ```$BUILD_HOST``` | ```\"buildhost\"``` | ```\"minion\"``` |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzgxMjQ2OnYy", "diffSide": "RIGHT", "path": "testsuite/documentation/optional.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDoyNDo1NVrOGTWO6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDoyNDo1NVrOGTWO6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk0MDM5NQ==", "bodyText": "my_build_host.example.com, no need to obfuscate.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422940395", "createdAt": "2020-05-11T10:24:55Z", "author": {"login": "Bischoff"}, "path": "testsuite/documentation/optional.md", "diffHunk": "@@ -56,6 +56,27 @@ Inside of the testsuite, the scenarios that are tagged with\n are executed only if the minion is available.\n \n \n+### Testing with a Docker and Kiwi build host\n+\n+Using a Docker and Kiwi build host with the testsuite is not mandatory.\n+\n+If you do not want such a machine, do not define `BUILD_HOST` environment\n+variable before you run the testsuite. That's all.\n+\n+If you want a Docker and Kiwi build host, make this variable point to the machine\n+that will be the build host:\n+```bash\n+export BUILD_HOST=mybldh.example.com", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzg0NDQ0OnYy", "diffSide": "RIGHT", "path": "testsuite/documentation/static-run.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDozNDoxMFrOGTWiQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDozNDoxMFrOGTWiQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk0NTM0NQ==", "bodyText": "My bad, I forgot to update these \ud83d\ude1e . We don't specify anymore the service pack for the run time names of machines.\nAlso, we're not using sles12 anymore (apart in 3.2). And we don't specify version for service machines (proxy, controller, kvm host, etc).\nTherefore, those lines should become:\nexport CLIENT=\"${PREFIX}cli-sles15.tf.local\"\nexport MINION=\"${PREFIX}min-sles15.tf.local\"\nexport BUILD_HOST=\"${PREFIX}min-build.tf.local\"\nexport SSHMINION=\"${PREFIX}minssh-sles15.tf.local\"\n\nYou may see these names by ssh-ing to ramrod and doing virsh list.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422945345", "createdAt": "2020-05-11T10:34:10Z", "author": {"login": "Bischoff"}, "path": "testsuite/documentation/static-run.md", "diffHunk": "@@ -26,9 +27,10 @@ To run all standard tests, from the controller:\n \n ```console\n export SERVER=\"${PREFIX}suma3pg.tf.local\"\n-export CLIENT=\"${PREFIX}clisles12sp3.tf.local\"\n-export MINION=\"${PREFIX}minsles12sp3.tf.local\"\n-export SSHMINION=\"${PREFIX}minsles12sp3ssh.tf.local\"\n+export CLIENT=\"${PREFIX}clisles12sp4.tf.local\"\n+export MINION=\"${PREFIX}minsles12sp4.tf.local\"\n+export BUILD_HOST=\"${PREFIX}build-host-sles12sp4.tf.local\"\n+export SSHMINION=\"${PREFIX}minsles12sp4ssh.tf.local\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzg1NjUxOnYy", "diffSide": "RIGHT", "path": "testsuite/features/core/allcli_sanity.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDozNzo0OVrOGTWpxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDozNzo0OVrOGTWpxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk0NzI3MQ==", "bodyText": "The build host is healthy", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422947271", "createdAt": "2020-05-11T10:37:49Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/core/allcli_sanity.feature", "diffHunk": "@@ -16,6 +16,11 @@ Feature: Sanity checks\n     Then \"sle_minion\" should have a FQDN\n     And \"sle_minion\" should communicate with the server\n \n+@buildhost\n+  Scenario: The buildhost is healthy", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzg1ODE0OnYy", "diffSide": "RIGHT", "path": "testsuite/features/core/allcli_sanity.feature", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDozODoyMlrOGTWq1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDozODoyMlrOGTWq1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk0NzU0Mw==", "bodyText": "see remark above about using build_host in steps", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422947543", "createdAt": "2020-05-11T10:38:22Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/core/allcli_sanity.feature", "diffHunk": "@@ -16,6 +16,11 @@ Feature: Sanity checks\n     Then \"sle_minion\" should have a FQDN\n     And \"sle_minion\" should communicate with the server\n \n+@buildhost\n+  Scenario: The buildhost is healthy\n+    Then \"buildhost\" should have a FQDN\n+    And \"buildhost\" should communicate with the server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzg2MDI0OnYy", "diffSide": "RIGHT", "path": "testsuite/features/init_clients/sle_buildhost.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDozOTowNlrOGTWsMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDozOTowNlrOGTWsMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk0Nzg4OQ==", "bodyText": "Be able to bootstrap a Salt build host via the GUI", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422947889", "createdAt": "2020-05-11T10:39:06Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzg4OTYxOnYy", "diffSide": "RIGHT", "path": "testsuite/features/init_clients/sle_buildhost.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo0ODowNVrOGTW-Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo0ODowNVrOGTW-Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1MjUxMA==", "bodyText": "When\nWe might use different OS versions for build host and normal minion. That's even one of the purposes of this operation \ud83d\ude38 . In that case, the bootstrap repos will be different and all will work fine.\nHowever, if build host and normal minion use same operating system version, this will end up in trying to re-create the bootstrap repo. I think this should not be a problem and work out of the box. But only tests will tell us if it's really working fine.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422952510", "createdAt": "2020-05-11T10:48:05Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost\n+  Scenario: Create the bootstrap repository for a Salt client buildhost\n+     Given I am authorized\n+     And I create the \"x86_64\" bootstrap repository for \"buildhost\" on the server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzg5MjAxOnYy", "diffSide": "RIGHT", "path": "testsuite/features/init_clients/sle_buildhost.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo0ODo0OFrOGTW_vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo0ODo0OFrOGTW_vQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1Mjg5Mw==", "bodyText": "\"build host\" in English text.\nSame in other scenarios.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422952893", "createdAt": "2020-05-11T10:48:48Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost\n+  Scenario: Create the bootstrap repository for a Salt client buildhost\n+     Given I am authorized\n+     And I create the \"x86_64\" bootstrap repository for \"buildhost\" on the server\n+\n+@buildhost\n+  Scenario: Bootstrap a SLES buildhost", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzg5NjkxOnYy", "diffSide": "RIGHT", "path": "testsuite/features/init_clients/sle_buildhost.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo0OTo1NlrOGTXCdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo0OTo1NlrOGTXCdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1MzU5MQ==", "bodyText": "No. I don't think we will run any package tests on the build host.\nIn my honest opinion, this is not needed. Just remove the whole scenario.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422953591", "createdAt": "2020-05-11T10:49:56Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/init_clients/sle_buildhost.feature", "diffHunk": "@@ -0,0 +1,116 @@\n+# Copyright (c) 2016-2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Be able to bootstrap a Salt buildhost via the GUI\n+\n+@buildhost\n+  Scenario: Create the bootstrap repository for a Salt client buildhost\n+     Given I am authorized\n+     And I create the \"x86_64\" bootstrap repository for \"buildhost\" on the server\n+\n+@buildhost\n+  Scenario: Bootstrap a SLES buildhost\n+     Given I am authorized\n+     When I go to the bootstrapping page\n+     Then I should see a \"Bootstrap Minions\" text\n+     When I enter the hostname of \"buildhost\" as \"hostname\"\n+     And I enter \"22\" as \"port\"\n+     And I enter \"root\" as \"user\"\n+     And I enter \"linux\" as \"password\"\n+     And I select the hostname of \"proxy\" from \"proxies\"\n+     And I click on \"Bootstrap\"\n+     And I wait until I see \"Successfully bootstrapped host!\" text\n+\n+@buildhost\n+  Scenario: Check the new bootstrapped buildhost in System Overview page\n+    Given I am authorized\n+    When I go to the minion onboarding page\n+    Then I should see a \"accepted\" text\n+    When I follow the left menu \"Systems > Overview\"\n+    And I wait until I see the name of \"buildhost\", refreshing the page\n+    And I wait until onboarding is completed for \"buildhost\"\n+    Then the Salt master can reach \"buildhost\"\n+\n+@proxy\n+@buildhost\n+  Scenario: Check connection from buildhost to proxy\n+    Given I am on the Systems overview page of this \"buildhost\"\n+    When I follow \"Details\" in the content area\n+    And I follow \"Connection\" in the content area\n+    Then I should see \"proxy\" short hostname\n+\n+@proxy\n+@buildhost\n+  Scenario: Check registration on buildhost of minion\n+    Given I am on the Systems overview page of this \"proxy\"\n+    When I follow \"Details\" in the content area\n+    And I follow \"Proxy\" in the content area\n+    Then I should see \"buildhost\" hostname\n+\n+@buildhost\n+  Scenario: Subscribe the SLES buildhost to a base channel", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzkwNjU1OnYy", "diffSide": "LEFT", "path": "testsuite/features/init_clients/sle_minion.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1MjozOFrOGTXIAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1MjozOFrOGTXIAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1NTAwOA==", "bodyText": "Yay, you thought about removing them !!! Good \ud83d\ude04 .", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422955008", "createdAt": "2020-05-11T10:52:38Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/init_clients/sle_minion.feature", "diffHunk": "@@ -62,43 +62,6 @@ Feature: Be able to bootstrap a Salt minion via the GUI\n   Scenario: Detect latest Salt changes on the SLES minion\n     When I query latest Salt changes on \"sle_minion\"\n \n-\n-  Scenario: Turn the SLES minion into a container build host", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzkwOTI1OnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/buildhost_docker_auth_registry.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1MzoyNFrOGTXJnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1MzoyNFrOGTXJnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1NTQyMQ==", "bodyText": "add @buildhost tag", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422955421", "createdAt": "2020-05-11T10:53:24Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/buildhost_docker_auth_registry.feature", "diffHunk": "@@ -1,4 +1,4 @@\n-# Copyright (c) 2018 SUSE LLC\n+# Copyright (c) 2018-2020 SUSE LLC\n # Licensed under the terms of the MIT license.\n \n Feature: Build image with authenticated registry", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzkxMzIzOnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/buildhost_docker_auth_registry.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1NDoyOFrOGTXMAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1NDoyOFrOGTXMAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1NjAzNQ==", "bodyText": "Same, tag is missing", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422956035", "createdAt": "2020-05-11T10:54:28Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/buildhost_docker_auth_registry.feature", "diffHunk": "@@ -54,4 +54,4 @@ Feature: Build image with authenticated registry\n     When I delete the image \"portus_profile\" with version \"latest\" via XML-RPC calls\n \n   Scenario: Cleanup: kill stale portus image build jobs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzkxNjcwOnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/buildhost_docker_build_image.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1NTozMFrOGTXOJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1NTozMFrOGTXOJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1NjU4MQ==", "bodyText": "I tend to prefer them at scenario level, but it's probably just personal taste. Very fine so.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422956581", "createdAt": "2020-05-11T10:55:30Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/buildhost_docker_build_image.feature", "diffHunk": "@@ -4,6 +4,7 @@\n # Basic images do not contain zypper nor the name of the server,\n # so the inspect functionality is not tested here.\n \n+@buildhost", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzkyMTE5OnYy", "diffSide": "LEFT", "path": "testsuite/features/secondary/min_activationkey.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1Njo0OVrOGTXQww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1Njo0OVrOGTXQww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1NzI1MQ==", "bodyText": "OK, you thought about removing them! Very good.", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422957251", "createdAt": "2020-05-11T10:56:49Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/min_activationkey.feature", "diffHunk": "@@ -124,38 +124,6 @@ Feature: Bootstrap a Salt minion via the GUI with an activation key\n     And I click on \"Delete Activation Key\"\n     And I should see a \"Activation key Minion testing has been deleted.\" text\n \n-  Scenario: Cleanup: turn the SLES minion into a container build host after activation key tests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzkyMzQ5OnYy", "diffSide": "LEFT", "path": "testsuite/features/secondary/min_activationkey.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1NzoyOVrOGTXSHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1NzoyOVrOGTXSHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1NzU5Ng==", "bodyText": "It might be you can remove the definition of this step (and the same for Kiwi).", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422957596", "createdAt": "2020-05-11T10:57:29Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/min_activationkey.feature", "diffHunk": "@@ -124,38 +124,6 @@ Feature: Bootstrap a Salt minion via the GUI with an activation key\n     And I click on \"Delete Activation Key\"\n     And I should see a \"Activation key Minion testing has been deleted.\" text\n \n-  Scenario: Cleanup: turn the SLES minion into a container build host after activation key tests\n-    Given I am on the Systems overview page of this \"sle_minion\"\n-    When I follow \"Details\" in the content area\n-    And I follow \"Properties\" in the content area\n-    And I check \"container_build_host\"\n-    And I click on \"Update Properties\"\n-\n-  Scenario: Cleanup: turn the SLES minion into a OS image build host after activation key tests\n-    Given I am on the Systems overview page of this \"sle_minion\"\n-    When I follow \"Details\" in the content area\n-    And I follow \"Properties\" in the content area\n-    And I check \"osimage_build_host\"\n-    And I click on \"Update Properties\"\n-    Then I should see a \"OS Image Build Host type has been applied.\" text\n-    And I should see a \"Note: This action will not result in state application\" text\n-    And I should see a \"To apply the state, either use the states page or run state.highstate from the command line.\" text\n-    And I should see a \"System properties changed\" text\n-\n-  Scenario: Cleanup: apply the highstate to build host after activation key tests\n-    Given I am on the Systems overview page of this \"sle_minion\"\n-    When I wait until no Salt job is running on \"sle_minion\"\n-    And I enable repositories before installing Docker", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzkyNTE3OnYy", "diffSide": "LEFT", "path": "testsuite/features/secondary/min_activationkey.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1Nzo1NVrOGTXTEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMDo1Nzo1NVrOGTXTEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1Nzg0Mw==", "bodyText": "It might be you can remove the definition of this step (and the same for Kiwi).", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422957843", "createdAt": "2020-05-11T10:57:55Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/min_activationkey.feature", "diffHunk": "@@ -124,38 +124,6 @@ Feature: Bootstrap a Salt minion via the GUI with an activation key\n     And I click on \"Delete Activation Key\"\n     And I should see a \"Activation key Minion testing has been deleted.\" text\n \n-  Scenario: Cleanup: turn the SLES minion into a container build host after activation key tests\n-    Given I am on the Systems overview page of this \"sle_minion\"\n-    When I follow \"Details\" in the content area\n-    And I follow \"Properties\" in the content area\n-    And I check \"container_build_host\"\n-    And I click on \"Update Properties\"\n-\n-  Scenario: Cleanup: turn the SLES minion into a OS image build host after activation key tests\n-    Given I am on the Systems overview page of this \"sle_minion\"\n-    When I follow \"Details\" in the content area\n-    And I follow \"Properties\" in the content area\n-    And I check \"osimage_build_host\"\n-    And I click on \"Update Properties\"\n-    Then I should see a \"OS Image Build Host type has been applied.\" text\n-    And I should see a \"Note: This action will not result in state application\" text\n-    And I should see a \"To apply the state, either use the states page or run state.highstate from the command line.\" text\n-    And I should see a \"System properties changed\" text\n-\n-  Scenario: Cleanup: apply the highstate to build host after activation key tests\n-    Given I am on the Systems overview page of this \"sle_minion\"\n-    When I wait until no Salt job is running on \"sle_minion\"\n-    And I enable repositories before installing Docker\n-    And I apply highstate on \"sle_minion\"\n-    And I wait until \"docker\" service is active on \"sle_minion\"\n-    And I wait until file \"/var/lib/Kiwi/repo/rhn-org-trusted-ssl-cert-osimage-1.0-1.noarch.rpm\" exists on \"sle_minion\"\n-    And I disable repositories after installing Docker", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzkzNzQ3OnYy", "diffSide": "LEFT", "path": "testsuite/features/secondary/proxy_retail_pxeboot_and_mass_import.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowMToyNlrOGTXafQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowMToyNlrOGTXafQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk1OTc0MQ==", "bodyText": "OK. We have in our documentation a list of the normalized prefixes.\nCan you please add this new prefix there? It's in guidelines.md, section \"Rules for features\".", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422959741", "createdAt": "2020-05-11T11:01:26Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/proxy_retail_pxeboot_and_mass_import.feature", "diffHunk": "@@ -3,7 +3,7 @@\n #\n # This feature depends on a JeOS image present on the proxy\n # Please make sure that the feature\n-#     features/min_osimage_build_image.feature", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzk0MDU0OnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/command_steps.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowMjoyMVrOGTXcWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowMjoyMVrOGTXcWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk2MDIxOQ==", "bodyText": "to change to build_host if you change host name in steps as I recommend", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422960219", "createdAt": "2020-05-11T11:02:21Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -150,7 +150,7 @@\n     cmd = 'runuser -u salt -- salt-ssh --priv=/srv/susemanager/salt/salt_ssh/mgr_ssh_id'\n     extra_cmd = '-i --roster-file=/tmp/roster_tests -w -W'\n     $server.run(\"printf '#{system_name}:\\n  host: #{system_name}\\n  user: root\\n  passwd: linux\\n' > /tmp/roster_tests\")\n-  elsif host.include? 'minion'\n+  elsif host.include? 'minion' or host.include? 'buildhost'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzk0MjAxOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/common_steps.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowMjo0NVrOGTXdOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowMjo0NVrOGTXdOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk2MDQ0Mg==", "bodyText": "to change to build_host if you change host name in steps as I recommend", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422960442", "createdAt": "2020-05-11T11:02:45Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -281,7 +281,7 @@\n   if host.include?('client') or host.include?('ceos') or host.include?('ubuntu')\n     node.run('rhn_check -vvv', true, 500, 'root')\n     client_refresh_metadata\n-  elsif host.include?('minion') or host.include?('server') or host.include?('proxy')\n+  elsif host.include?('minion') or host.include?('server') or host.include?('proxy') or host.include?('buildhost')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzk0NjAzOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/common_steps.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowNDowNFrOGTXf0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowNDowNFrOGTXf0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk2MTEwNA==", "bodyText": "See above, it might be this whole definition has to be destroyed (to be checked).", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422961104", "createdAt": "2020-05-11T11:04:04Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -700,59 +700,59 @@\n end\n \n When(/^I enable repositories before installing Docker$/) do", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzk1NzU3OnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/common_steps.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowNzozN1rOGTXmtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTowNzozN1rOGTXmtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk2Mjg3MA==", "bodyText": "You might simply remove this definition (to be checked).", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422962870", "createdAt": "2020-05-11T11:07:37Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -700,59 +700,59 @@\n end\n \n When(/^I enable repositories before installing Docker$/) do\n-  os_version, os_family = get_os_version($minion)\n+  os_version, os_family = get_os_version($build_host)\n \n   # Distribution\n   repos = \"os_pool_repo os_update_repo\"\n-  puts $minion.run(\"zypper mr --enable #{repos}\")\n+  puts $build_host.run(\"zypper mr --enable #{repos}\")\n \n   # Tools\n-  repos, _code = $minion.run('zypper lr | grep \"tools\" | cut -d\"|\" -f2')\n-  puts $minion.run(\"zypper mr --enable #{repos.gsub(/\\s/, ' ')}\")\n+  repos, _code = $build_host.run('zypper lr | grep \"tools\" | cut -d\"|\" -f2')\n+  puts $build_host.run(\"zypper mr --enable #{repos.gsub(/\\s/, ' ')}\")\n \n   # Development\n   # (we do not install Python 2 repositories in this branch\n   #  because they are not needed anymore starting with version 4.1)\n   if os_family =~ /^sles/ && os_version =~ /^15/\n     repos = \"devel_pool_repo devel_updates_repo\"\n-    puts $minion.run(\"zypper mr --enable #{repos}\")\n+    puts $build_host.run(\"zypper mr --enable #{repos}\")\n   end\n \n   # Containers\n   unless os_family =~ /^opensuse/ || os_version =~ /^11/\n     repos = \"containers_pool_repo containers_updates_repo\"\n-    puts $minion.run(\"zypper mr --enable #{repos}\")\n+    puts $build_host.run(\"zypper mr --enable #{repos}\")\n   end\n \n-  $minion.run('zypper -n --gpg-auto-import-keys ref')\n+  $build_host.run('zypper -n --gpg-auto-import-keys ref')\n end\n \n When(/^I disable repositories after installing Docker$/) do", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMzk2ODU3OnYy", "diffSide": "LEFT", "path": "testsuite/features/step_definitions/docker_steps.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMToxMTowNFrOGTXtgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMToxMTowNFrOGTXtgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk2NDYwOQ==", "bodyText": "or with an underscore \ud83d\ude04", "url": "https://github.com/uyuni-project/uyuni/pull/2198#discussion_r422964609", "createdAt": "2020-05-11T11:11:04Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/docker_steps.rb", "diffHunk": "@@ -9,17 +9,17 @@\n # container operations\n cont_op = XMLRPCImageTest.new(ENV['SERVER'])\n \n-# retrieve minion id, needed for scheduleImageBuild call\n-def retrieve_minion_id", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee24ce95ed814d7b193273eaf1bc975c8e9dbdd"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4380, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}