{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMDU4MzUw", "number": 2033, "title": "Fix sanity checks for Uyuni", "bodyText": "What does this PR change?\nThe sanity checks were not written with the fact that some people would need to run them from outside our internal network in mind.\nThis PR checks the existing resources are available with no access to internal network.\nImportant : in case the resource has not been transported to the external network yet, it displays an error message, but does not fail. This way, we can go past the core features in Uyuni.\nAlso: I removed --failoption from curl. I tested it manually and it did not seem satisfactory to me.\nLinks\nFixes SUSE/spacewalk#10976\nPorts:\n\n4.0: SUSE/spacewalk#11015\n3.2: SUSE/spacewalk#11016\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed", "createdAt": "2020-03-19T15:06:12Z", "url": "https://github.com/uyuni-project/uyuni/pull/2033", "merged": true, "mergeCommit": {"oid": "bcfca66a724860405fd8dc3be5d2b66c79fcf571"}, "closed": true, "closedAt": "2020-03-20T09:54:39Z", "author": {"login": "Bischoff"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPN2XxAFqTM3Nzg0NjE2NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPbmVJgFqTM3ODI3NzE5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODQ2MTY1", "url": "https://github.com/uyuni-project/uyuni/pull/2033#pullrequestreview-377846165", "createdAt": "2020-03-19T15:43:05Z", "commit": {"oid": "e511b1a42a02486f8a5b0e298becaa78d539845c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTo0MzowNlrOF40gFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNTo0MzowNlrOF40gFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTEyNDc1Ng==", "bodyText": "Personally, I would prefer to have those strings in /testsuite/features/support/constants.rb", "url": "https://github.com/uyuni-project/uyuni/pull/2033#discussion_r395124756", "createdAt": "2020-03-19T15:43:06Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -21,13 +21,42 @@\n   $server.run(\"ping -c1 #{node.full_hostname}\")\n end\n \n-Then(/^it should be possible to download the file \"([^\"]*)\"$/) do |file|\n-  $server.run(\"curl -k #{file} -o /dev/null\")\n-end\n-\n-Then(/^it should be possible to reach the (.*) registry$/) do |registry|\n-  url = registry == 'portus' ? 'https://portus.mgr.suse.de:5000' : 'https://registry.mgr.suse.de:443'\n-  $server.run(\"curl -k --fail #{url}\")\n+Then(/^it should be possible to reach the (.*)$/) do |resource|\n+  case resource\n+  when 'download site'\n+    if $product == 'Uyuni'\n+      url = 'https://download.opensuse.org/repositories/systemsmanagement:/Uyuni:/Test-Packages:/Updates/rpm/repodata/repomd.xml'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e511b1a42a02486f8a5b0e298becaa78d539845c"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODQ3MDA4", "url": "https://github.com/uyuni-project/uyuni/pull/2033#pullrequestreview-377847008", "createdAt": "2020-03-19T15:43:55Z", "commit": {"oid": "e511b1a42a02486f8a5b0e298becaa78d539845c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODQ3NDEx", "url": "https://github.com/uyuni-project/uyuni/pull/2033#pullrequestreview-377847411", "createdAt": "2020-03-19T15:44:21Z", "commit": {"oid": "e511b1a42a02486f8a5b0e298becaa78d539845c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODY5OTAx", "url": "https://github.com/uyuni-project/uyuni/pull/2033#pullrequestreview-377869901", "createdAt": "2020-03-19T16:08:03Z", "commit": {"oid": "e511b1a42a02486f8a5b0e298becaa78d539845c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5c67b54975ae2b24c111a161926f9cd48620eb7", "author": {"user": {"login": "Bischoff", "name": "E Bischoff"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d5c67b54975ae2b24c111a161926f9cd48620eb7", "committedDate": "2020-03-19T21:24:47Z", "message": "Fix sanity checks for Uyuni"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Mjc3MTk1", "url": "https://github.com/uyuni-project/uyuni/pull/2033#pullrequestreview-378277195", "createdAt": "2020-03-20T07:44:15Z", "commit": {"oid": "d5c67b54975ae2b24c111a161926f9cd48620eb7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1505, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}