{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MjkzNzM2", "number": 1817, "title": "Testsuite: Re-add min_bootstrap_negative", "bodyText": "What does this PR change?\nFix a broken feature file and re-add it to the  CI pipeline.\nThe fix is to add a missing cleanup scenario:\n'Cleanup: subscribe again to base channel after negative tests'\nLinks\nPorts:\n\n\n32: https://github.com/SUSE/spacewalk/pull/10572\n\n\n40: https://github.com/SUSE/spacewalk/pull/10573\n\n\n DONE\n\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed", "createdAt": "2020-01-21T13:03:28Z", "url": "https://github.com/uyuni-project/uyuni/pull/1817", "merged": true, "mergeCommit": {"oid": "617378cb578118429ebefdec74149f26feaeb3cf"}, "closed": true, "closedAt": "2020-01-21T14:52:00Z", "author": {"login": "calancha"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8grfXgH2gAyMzY1MjkzNzM2OjVjMzgwMjIxYjM2ODg5ODk0ODc5MDM0M2MyNzdkZmU4NjI0YjgyNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8iGYwAFqTM0NTkyMDQ1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5c380221b368898948790343c277dfe8624b8254", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5c380221b368898948790343c277dfe8624b8254", "committedDate": "2020-01-21T12:54:51Z", "message": "Testsuite: Add missing cleanup scenario\n\n* testsuite/features/secondary/min_bootstrap_negative.feature:\nTag with @sle_minion this feature.\n\nAfter bootstrap the minion, wait until the minion is listed at\nSystems overview.\n\nAdd cleanup scenario:\n'Cleanup: subscribe again to base channel after negative tests'\n\n* testsuite/run_sets/secondary_parallelizable.yml:\nRe-add min_bootstrap_negative.feature."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTA5MjA1", "url": "https://github.com/uyuni-project/uyuni/pull/1817#pullrequestreview-345909205", "createdAt": "2020-01-21T14:17:36Z", "commit": {"oid": "5c380221b368898948790343c277dfe8624b8254"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTE0NTEz", "url": "https://github.com/uyuni-project/uyuni/pull/1817#pullrequestreview-345914513", "createdAt": "2020-01-21T14:24:27Z", "commit": {"oid": "5c380221b368898948790343c277dfe8624b8254"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDoyNDoyOFrOFf7xmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDoyNDoyOFrOFf7xmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAyOTUzMQ==", "bodyText": "Personally, I'd prefer to use a UI step instead of providing a url endpoint here. Just because for me the tests must be near as possible as what a customer will do, meaning clicking options in the UI. But it might just be a matter of taste.", "url": "https://github.com/uyuni-project/uyuni/pull/1817#discussion_r369029531", "createdAt": "2020-01-21T14:24:28Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_bootstrap_negative.feature", "diffHunk": "@@ -67,6 +68,21 @@ Feature: Negative tests for bootstrap normal minions\n      And I select the hostname of \"proxy\" from \"proxies\"\n      And I click on \"Bootstrap\"\n      And I wait until I see \"Successfully bootstrapped host!\" text\n+     And I navigate to \"rhn/systems/Overview.do\" page", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c380221b368898948790343c277dfe8624b8254"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTE1Mjg4", "url": "https://github.com/uyuni-project/uyuni/pull/1817#pullrequestreview-345915288", "createdAt": "2020-01-21T14:25:24Z", "commit": {"oid": "5c380221b368898948790343c277dfe8624b8254"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1OTIwNDUx", "url": "https://github.com/uyuni-project/uyuni/pull/1817#pullrequestreview-345920451", "createdAt": "2020-01-21T14:32:00Z", "commit": {"oid": "5c380221b368898948790343c277dfe8624b8254"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDozMjowMVrOFf8C-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNDozMzozOVrOFf8Gqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzMzk3Nw==", "bodyText": "Right. It's not a matter of taste, but a generic rule: do not depend on internals.\nI think we should even remove the I navigate to step definition.\nBut this is probably for another PR. This should be addressed globally. Maybe create a card so it does not get lost.", "url": "https://github.com/uyuni-project/uyuni/pull/1817#discussion_r369033977", "createdAt": "2020-01-21T14:32:01Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/min_bootstrap_negative.feature", "diffHunk": "@@ -67,6 +68,21 @@ Feature: Negative tests for bootstrap normal minions\n      And I select the hostname of \"proxy\" from \"proxies\"\n      And I click on \"Bootstrap\"\n      And I wait until I see \"Successfully bootstrapped host!\" text\n+     And I navigate to \"rhn/systems/Overview.do\" page", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAyOTUzMQ=="}, "originalCommit": {"oid": "5c380221b368898948790343c277dfe8624b8254"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzNDc2NA==", "bodyText": "Beware that sometimes this is not even enough, and you should wait for events like package list refresh to finish.", "url": "https://github.com/uyuni-project/uyuni/pull/1817#discussion_r369034764", "createdAt": "2020-01-21T14:33:22Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/min_bootstrap_negative.feature", "diffHunk": "@@ -67,6 +68,21 @@ Feature: Negative tests for bootstrap normal minions\n      And I select the hostname of \"proxy\" from \"proxies\"\n      And I click on \"Bootstrap\"\n      And I wait until I see \"Successfully bootstrapped host!\" text\n+     And I navigate to \"rhn/systems/Overview.do\" page\n+     And I wait until I see the name of \"sle_minion\", refreshing the page", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c380221b368898948790343c277dfe8624b8254"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTAzNDkyMw==", "bodyText": "Thanks.", "url": "https://github.com/uyuni-project/uyuni/pull/1817#discussion_r369034923", "createdAt": "2020-01-21T14:33:39Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/min_bootstrap_negative.feature", "diffHunk": "@@ -67,6 +68,21 @@ Feature: Negative tests for bootstrap normal minions\n      And I select the hostname of \"proxy\" from \"proxies\"\n      And I click on \"Bootstrap\"\n      And I wait until I see \"Successfully bootstrapped host!\" text\n+     And I navigate to \"rhn/systems/Overview.do\" page\n+     And I wait until I see the name of \"sle_minion\", refreshing the page\n+\n+  Scenario: Cleanup: subscribe again to base channel after negative tests\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    When I follow \"Software\" in the content area\n+    And I follow \"Software Channels\" in the content area\n+    And I wait until I do not see \"Loading...\" text\n+    And I check radio button \"Test-Channel-x86_64\"\n+    And I wait until I do not see \"Loading...\" text\n+    And I click on \"Next\"\n+    Then I should see a \"Confirm Software Channel Change\" text\n+    When I click on \"Confirm\"\n+    Then I should see a \"Changing the channels has been scheduled.\" text\n+    And I wait until event \"Subscribe channels scheduled by admin\" is completed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c380221b368898948790343c277dfe8624b8254"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1733, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}