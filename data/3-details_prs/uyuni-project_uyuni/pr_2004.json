{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NzUzNzg3", "number": 2004, "title": "Refactor notifications", "bodyText": "What does this PR change?\nMake notifications usable from outside of java, provide translations and compile all data on java side to make javascript easier.\nGUI diff\nLink in the list:\n\nDetails:\n\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: obvious\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests: already covered\n\n\n DONE\n\n\nLinks\nFixes SUSE/spacewalk#6609\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-03-11T15:18:52Z", "url": "https://github.com/uyuni-project/uyuni/pull/2004", "merged": true, "mergeCommit": {"oid": "79cb7e0a86207f3e9c80616d129417d661d56a21"}, "closed": true, "closedAt": "2020-03-23T14:48:39Z", "author": {"login": "mcalmer"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNPTxOABqjMxMjY1MDkwNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQe8rdAFqTM3OTQ2NjI1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "088738b9bb770208ac06188c0b662ef4ad38201a", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/088738b9bb770208ac06188c0b662ef4ad38201a", "committedDate": "2020-03-13T08:55:33Z", "message": "install notificationUtils"}, "afterCommit": {"oid": "40befc1467f8f15c8316c626179aa0d7f44914b2", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/40befc1467f8f15c8316c626179aa0d7f44914b2", "committedDate": "2020-03-13T12:16:47Z", "message": "change notification data type to TEXT"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "42e29c4752357e95633fa4cbc3ec3102fd269284", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/42e29c4752357e95633fa4cbc3ec3102fd269284", "committedDate": "2020-03-14T13:46:30Z", "message": "generate text description from description"}, "afterCommit": {"oid": "28e8e57d343bc4e4f6b19be2446086d8a42c1c96", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/28e8e57d343bc4e4f6b19be2446086d8a42c1c96", "committedDate": "2020-03-14T14:46:30Z", "message": "generate text description from description"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9343fa3c8a78995a4ae48af03687a0a20a39113a", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9343fa3c8a78995a4ae48af03687a0a20a39113a", "committedDate": "2020-03-14T16:07:15Z", "message": "fixup! remove textSummary - not needed anymore"}, "afterCommit": {"oid": "886dd785e6e1c860c6de1a3c7794e427d9c065bc", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/886dd785e6e1c860c6de1a3c7794e427d9c065bc", "committedDate": "2020-03-15T13:29:30Z", "message": "update changelog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d0d70cf6daaa1fe936afb7ccb54bce61a24fabe", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6d0d70cf6daaa1fe936afb7ccb54bce61a24fabe", "committedDate": "2020-03-20T08:39:36Z", "message": "UI Notifications: Minor improvements: Change message description to Optional"}, "afterCommit": {"oid": "a60dc9284b69227b78087712703f011c6d92ed52", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a60dc9284b69227b78087712703f011c6d92ed52", "committedDate": "2020-03-20T13:02:15Z", "message": "UI Notifications: Minor improvements: Change message description to Optional"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93cce83fd36e7388ac657c8644d67dcfbfa6e3e1", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/93cce83fd36e7388ac657c8644d67dcfbfa6e3e1", "committedDate": "2020-03-20T13:04:19Z", "message": "move schema migration"}, "afterCommit": {"oid": "82cfa0c565fc87f072a2e1f611665f270cbe9ee8", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/82cfa0c565fc87f072a2e1f611665f270cbe9ee8", "committedDate": "2020-03-20T15:35:05Z", "message": "move schema migration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4ODU2OTMw", "url": "https://github.com/uyuni-project/uyuni/pull/2004#pullrequestreview-378856930", "createdAt": "2020-03-20T23:09:55Z", "commit": {"oid": "82cfa0c565fc87f072a2e1f611665f270cbe9ee8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMzowOTo1NVrOF5leUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMzowOTo1NVrOF5leUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkyNzEyMw==", "bodyText": "Is this link going to be always visible? Maybe, depending on the type of the message, if the description field does not deliver any additional value to the summary maybe we can hide it. I wonder if it could be the case to already define this on the backend side, leaving the description field null or String.empty and we can decode it on the frontend side. Just my 2c", "url": "https://github.com/uyuni-project/uyuni/pull/2004#discussion_r395927123", "createdAt": "2020-03-20T23:09:55Z", "author": {"login": "ncounter"}, "path": "web/html/src/manager/notifications/notification-messages.js", "diffHunk": "@@ -222,23 +218,33 @@ class NotificationMessages extends React.Component {\n     return Object.keys(message).map((id) => message[id]);\n   };\n \n-  buildDescription = (row) => {\n-    let description = null;\n-    switch(row['type']) {\n-      case 'OnboardingFailed':\n-        description = 'Error registering minion id: ' + row['data']['minionId'];\n-      break;\n-      case 'ChannelSyncFailed':\n-        description = <span>Error syncing the channel: <a href={\"/rhn/channels/ChannelDetail.do?cid=\" + row['data']['channelId']}>{row['data']['channelName']}</a></span>;\n-      break;\n-      case 'ChannelSyncFinished':\n-        description = <span>Channel <a href={\"/rhn/channels/ChannelDetail.do?cid=\" + row['data']['channelId']}>{row['data']['channelName']}</a> sync completed</span>;\n-      break;\n-      default: description = JSON.stringify(row['data']);\n-    }\n-    return description;\n+  showDescriptionPopup = (row) => {\n+    this.setState({popupItem: row});\n+    showDialog(\"notifications-popup-dialog\");\n+  }\n+\n+  buildSummary = (row) => {\n+    const popupLink = <a href=\"#\" onClick={() => this.showDescriptionPopup(row)}>{t(\"Details\")}</a>;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82cfa0c565fc87f072a2e1f611665f270cbe9ee8"}, "originalPosition": 91}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f39a2c52a8835aec9ed4a6931ff5de5f59ff93b", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2f39a2c52a8835aec9ed4a6931ff5de5f59ff93b", "committedDate": "2020-03-23T09:38:51Z", "message": "UI Notifications: Wrap the details link in the brackets"}, "afterCommit": {"oid": "fc6f096076a99ad5af8d9a7c537f5cc4df38f601", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fc6f096076a99ad5af8d9a7c537f5cc4df38f601", "committedDate": "2020-03-23T13:36:20Z", "message": "Frontend: rename description into details"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acc2e5fd4f9a62f3f584454519f85ce2b56c968b", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/acc2e5fd4f9a62f3f584454519f85ce2b56c968b", "committedDate": "2020-03-23T13:38:02Z", "message": "indenting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fa66ba1cc59ae8640b10099926dfcb9fb1e89d8", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3fa66ba1cc59ae8640b10099926dfcb9fb1e89d8", "committedDate": "2020-03-23T13:54:14Z", "message": "provide summary and description from java to UI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a829e3767bcffe3ff3dd90e3bc1658898b15e8e2", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a829e3767bcffe3ff3dd90e3bc1658898b15e8e2", "committedDate": "2020-03-23T13:54:15Z", "message": "copyright year"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4f655eddd98fd34bc5dd4e6c102eda25cb9d51b", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a4f655eddd98fd34bc5dd4e6c102eda25cb9d51b", "committedDate": "2020-03-23T13:54:15Z", "message": "create CreateBootstrapRepoFailed notification type"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc6f096076a99ad5af8d9a7c537f5cc4df38f601", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fc6f096076a99ad5af8d9a7c537f5cc4df38f601", "committedDate": "2020-03-23T13:36:20Z", "message": "Frontend: rename description into details"}, "afterCommit": {"oid": "a6f0f0326be9e05ead6e6b602bb75abe5b15e9b5", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a6f0f0326be9e05ead6e6b602bb75abe5b15e9b5", "committedDate": "2020-03-23T13:54:18Z", "message": "Frontend: rename description into details"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a81e88e743dd86667348f223bb196c07c8eb7c51", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a81e88e743dd86667348f223bb196c07c8eb7c51", "committedDate": "2020-03-23T13:59:49Z", "message": "store notifications from python"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90e7b85395b4048b05aa0658296cb88b6a3e8815", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/90e7b85395b4048b05aa0658296cb88b6a3e8815", "committedDate": "2020-03-23T13:59:49Z", "message": "change notification data type to TEXT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59438d6e1d02215f8248a6f9a16f9fb9425a8ac9", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/59438d6e1d02215f8248a6f9a16f9fb9425a8ac9", "committedDate": "2020-03-23T13:59:50Z", "message": "add new type to message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b748b29297e31fae631d8730b9cb6b353b5b35a3", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b748b29297e31fae631d8730b9cb6b353b5b35a3", "committedDate": "2020-03-23T13:59:50Z", "message": "add notification for failed State Apply"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "916519c8adc965e518587ae2339ec60370b4446d", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/916519c8adc965e518587ae2339ec60370b4446d", "committedDate": "2020-03-23T13:59:50Z", "message": "add strings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7bcfb984ca590220553487752b15cda5a5c7485", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c7bcfb984ca590220553487752b15cda5a5c7485", "committedDate": "2020-03-23T13:59:50Z", "message": "disable ChannelSyncFinished and list new notification types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8eb45bfe7310ba3f67495d9b42ec4e189c1cdf5", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e8eb45bfe7310ba3f67495d9b42ec4e189c1cdf5", "committedDate": "2020-03-23T13:59:50Z", "message": "put strings into localized format strings to prevent number formating"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecebbcbcc3f142b52bdc404312d53a2d6a8dfb39", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ecebbcbcc3f142b52bdc404312d53a2d6a8dfb39", "committedDate": "2020-03-23T13:59:51Z", "message": "remove textSummary - not needed anymore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d370c2ee72a0eed5379702ca144021f0bca9556", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3d370c2ee72a0eed5379702ca144021f0bca9556", "committedDate": "2020-03-23T13:59:51Z", "message": "generate text description from description"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f79b3a505eeb5713884fcde1a34b387a1b6d8009", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f79b3a505eeb5713884fcde1a34b387a1b6d8009", "committedDate": "2020-03-23T13:59:51Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77bd3042b26202eaf672f49bd4a57c7e2f73b9b7", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/77bd3042b26202eaf672f49bd4a57c7e2f73b9b7", "committedDate": "2020-03-23T13:59:51Z", "message": "UI Notifications: Add 'description' field to the notification JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdaef943fa5af0e66b5f300f139b214177d35153", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/cdaef943fa5af0e66b5f300f139b214177d35153", "committedDate": "2020-03-23T13:59:52Z", "message": "UI Notifications: Refactor: Rename description to summary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c772c5d141d932683ea9cebb7760ec5aef06cfba", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c772c5d141d932683ea9cebb7760ec5aef06cfba", "committedDate": "2020-03-23T13:59:52Z", "message": "UI Notifications: Show notification 'description' in a popup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43a124e56a0a48450492af372a53116643701e0e", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/43a124e56a0a48450492af372a53116643701e0e", "committedDate": "2020-03-23T13:59:52Z", "message": "move schema migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1aa482fdf4771a14d5a974b2075b714a1e9c2d8", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c1aa482fdf4771a14d5a974b2075b714a1e9c2d8", "committedDate": "2020-03-23T13:59:52Z", "message": "UI Notifications: Wrap the details link in the brackets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98d3096064dfd818539359d9154939066009b413", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/98d3096064dfd818539359d9154939066009b413", "committedDate": "2020-03-23T13:59:52Z", "message": "Backend: rename description into details"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aff1c94fb87cc9c0bd22248431b74281f43688ff", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/aff1c94fb87cc9c0bd22248431b74281f43688ff", "committedDate": "2020-03-23T13:59:52Z", "message": "Frontend: rename description into details"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6f0f0326be9e05ead6e6b602bb75abe5b15e9b5", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a6f0f0326be9e05ead6e6b602bb75abe5b15e9b5", "committedDate": "2020-03-23T13:54:18Z", "message": "Frontend: rename description into details"}, "afterCommit": {"oid": "aff1c94fb87cc9c0bd22248431b74281f43688ff", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/aff1c94fb87cc9c0bd22248431b74281f43688ff", "committedDate": "2020-03-23T13:59:52Z", "message": "Frontend: rename description into details"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NDY2MjU3", "url": "https://github.com/uyuni-project/uyuni/pull/2004#pullrequestreview-379466257", "createdAt": "2020-03-23T14:12:18Z", "commit": {"oid": "aff1c94fb87cc9c0bd22248431b74281f43688ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1486, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}