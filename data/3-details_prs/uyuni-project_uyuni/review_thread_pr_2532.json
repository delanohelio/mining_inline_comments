{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0MDU0NjI2", "number": 2532, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwODozMDozMFrOEdix_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMjo1ODo1N1rOEkCu_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NDE0MDEyOnYy", "diffSide": "RIGHT", "path": "web/html/src/utils/data-endpoint.test.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwODozMDozMFrOHIwRAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNzozNTozN1rOHPm4Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODk0MTQ0MQ==", "bodyText": "Awesome. Thanks for adding tests. We need more of these \ud83d\ude04", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r478941441", "createdAt": "2020-08-28T08:30:30Z", "author": {"login": "parlt91"}, "path": "web/html/src/utils/data-endpoint.test.js", "diffHunk": "@@ -0,0 +1,148 @@\n+// Fix for node 8. Can be removed on node 10 or later\n+import \"@babel/polyfill\";\n+\n+import {ApiDataEndpoint, PageControl} from './data-endpoint';\n+import {Utils} from './functions';\n+import * as Network from './network';\n+\n+jest.mock('./network');\n+\n+const PATH = \"/my/test/url\";\n+const ORIGIN = \"https://my.domain\";\n+\n+test(\"Page control initialization\", () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c956da08dc6f2fdd8cef9c1cdbdf6a4dd38d0689"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEyNzY3OA==", "bodyText": "Yeah, kudos to that! I hope this is going to become a standard for all front-end contributions soon!", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r486127678", "createdAt": "2020-09-10T07:35:37Z", "author": {"login": "hustodemon"}, "path": "web/html/src/utils/data-endpoint.test.js", "diffHunk": "@@ -0,0 +1,148 @@\n+// Fix for node 8. Can be removed on node 10 or later\n+import \"@babel/polyfill\";\n+\n+import {ApiDataEndpoint, PageControl} from './data-endpoint';\n+import {Utils} from './functions';\n+import * as Network from './network';\n+\n+jest.mock('./network');\n+\n+const PATH = \"/my/test/url\";\n+const ORIGIN = \"https://my.domain\";\n+\n+test(\"Page control initialization\", () => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODk0MTQ0MQ=="}, "originalCommit": {"oid": "c956da08dc6f2fdd8cef9c1cdbdf6a4dd38d0689"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NDQ3MTEzOnYy", "diffSide": "RIGHT", "path": "web/html/src/utils/data-endpoint.js", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwOToxMTo1M1rOHIzlfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNjoyODo1OFrOHJM9Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODk5NTgzNg==", "bodyText": "would be better to not use the global. New pages tend to get it as a parameter of the renderer. I would leave that variable in the top levels components to ease removal of it in the future.", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r478995836", "createdAt": "2020-08-28T09:11:53Z", "author": {"login": "cbosdo"}, "path": "web/html/src/utils/data-endpoint.js", "diffHunk": "@@ -0,0 +1,131 @@\n+// @flow\n+\n+import {debounce} from 'lodash';\n+import {get} from './network';\n+\n+import type {Cancelable} from \"../utils/functions\";\n+\n+declare var userPrefPageSize: number;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c956da08dc6f2fdd8cef9c1cdbdf6a4dd38d0689"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTI1NzExNw==", "bodyText": "Can you point me to an example page?", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r479257117", "createdAt": "2020-08-28T12:52:46Z", "author": {"login": "cbbayburt"}, "path": "web/html/src/utils/data-endpoint.js", "diffHunk": "@@ -0,0 +1,131 @@\n+// @flow\n+\n+import {debounce} from 'lodash';\n+import {get} from './network';\n+\n+import type {Cancelable} from \"../utils/functions\";\n+\n+declare var userPrefPageSize: number;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODk5NTgzNg=="}, "originalCommit": {"oid": "c956da08dc6f2fdd8cef9c1cdbdf6a4dd38d0689"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQxMTQ3MA==", "bodyText": "Here you go: https://github.com/uyuni-project/uyuni/blob/master/web/html/src/manager/virtualization/guests/list/guests-list.renderer.js", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r479411470", "createdAt": "2020-08-28T16:28:58Z", "author": {"login": "cbosdo"}, "path": "web/html/src/utils/data-endpoint.js", "diffHunk": "@@ -0,0 +1,131 @@\n+// @flow\n+\n+import {debounce} from 'lodash';\n+import {get} from './network';\n+\n+import type {Cancelable} from \"../utils/functions\";\n+\n+declare var userPrefPageSize: number;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODk5NTgzNg=="}, "originalCommit": {"oid": "c956da08dc6f2fdd8cef9c1cdbdf6a4dd38d0689"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NDU5NjI4OnYy", "diffSide": "RIGHT", "path": "java/code/src/com/suse/manager/webui/utils/gson/PagedDataResultJson.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwOToyNToxNlrOHI0z7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMjo1MjowM1rOHJDftQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTAxNTkxOA==", "bodyText": "Not sure that is of any use here, but usually REST paginated APIs embed an URL to the next and/or previous pages and the page number.", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r479015918", "createdAt": "2020-08-28T09:25:16Z", "author": {"login": "cbosdo"}, "path": "java/code/src/com/suse/manager/webui/utils/gson/PagedDataResultJson.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/**\n+ * Copyright (c) 2020 SUSE LLC\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package com.suse.manager.webui.utils.gson;\n+\n+import com.redhat.rhn.common.db.datasource.DataResult;\n+\n+import java.util.List;\n+\n+/**\n+ * JSON wrapper class to hold paginated data\n+ *\n+ * @param <T> the type of the data items\n+ */\n+public class PagedDataResultJson<T> {\n+\n+    private List<T> items;\n+    private long total;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c60cc5fba0b1d2f5cc8f0b7e66b61bb544fb62a7"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTI1NjUwMQ==", "bodyText": "We also need it to display the total number in the UI, and in this case, this is enough to calculate the next/prev pages", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r479256501", "createdAt": "2020-08-28T12:52:03Z", "author": {"login": "cbbayburt"}, "path": "java/code/src/com/suse/manager/webui/utils/gson/PagedDataResultJson.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/**\n+ * Copyright (c) 2020 SUSE LLC\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+\n+package com.suse.manager.webui.utils.gson;\n+\n+import com.redhat.rhn.common.db.datasource.DataResult;\n+\n+import java.util.List;\n+\n+/**\n+ * JSON wrapper class to hold paginated data\n+ *\n+ * @param <T> the type of the data items\n+ */\n+public class PagedDataResultJson<T> {\n+\n+    private List<T> items;\n+    private long total;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTAxNTkxOA=="}, "originalCommit": {"oid": "c60cc5fba0b1d2f5cc8f0b7e66b61bb544fb62a7"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NTk4NzQ1OnYy", "diffSide": "RIGHT", "path": "web/html/src/components/table/AsyncDataHandler.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMjo0NDo0M1rOHJDIAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMjo0NDo0M1rOHJDIAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTI1MDQzNQ==", "bodyText": "I know it's a copy/paste from TableDataHandler but would be nice to get rid of the UNSAFE_* functions in that code", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r479250435", "createdAt": "2020-08-28T12:44:43Z", "author": {"login": "cbosdo"}, "path": "web/html/src/components/table/AsyncDataHandler.js", "diffHunk": "@@ -0,0 +1,318 @@\n+// @flow\n+import * as React from 'react';\n+\n+import {Utils} from \"utils/functions\";\n+import {ApiDataEndpoint, PageControl} from '../../utils/data-endpoint';\n+import { StatePersistedContext } from '../utils/StatePersistedContext';\n+\n+import { ItemsPerPageSelector } from '../pagination';\n+import { PaginationBlock } from '../pagination';\n+import { SearchPanel } from './SearchPanel';\n+import { SearchField } from './SearchField';\n+import { Header } from './Header';\n+\n+type ChildrenArgsProps = {\n+  currItems: Array<any>,\n+  headers: React.Node,\n+  handleSelect: Function,\n+  selectable: boolean,\n+  selectedItems: Array<any>,\n+  criteria?: string,\n+}\n+\n+type Props = {\n+  columns: Array<React.ElementRef<any>>,\n+  /** the async resource endpoint to retrieve the paged data from */\n+  resource: string,\n+  /** Function extracting the unique key of the row from the data object */\n+  identifier: Function,\n+  /** the column key name of the initial sorted column */\n+  initialSortColumnKey?: string,\n+  /** 1 for ascending, -1 for descending */\n+  initialSortDirection?: number,\n+  /** the React Object that contains the filter search field */\n+  searchField?: React.Element<typeof SearchField>,\n+  /** the initial number of how many row-per-page to show. If it's 0 table header and footer are hidden */\n+  initialItemsPerPage?: number,\n+  /** enables item selection */\n+  selectable: boolean,\n+  /** the handler to call when the table selection is updated. If not provided, the select boxes won't be rendered */\n+  onSelect?: (items: Array<any>) => void,\n+  /** the identifiers for selected items */\n+  selectedItems?: Array<any>,\n+  /** The message which is shown when there are no rows to display */\n+  emptyText?: string,\n+  /** The message which is shown when the data is loading */\n+  loadingText?: string,\n+  /** Children node in the table */\n+  children: (args: ChildrenArgsProps) => React.Node,\n+};\n+\n+type State = {\n+  data: Array<any>,\n+  currentPage: number,\n+  itemsPerPage: number,\n+  totalItems: number,\n+  criteria?: string,\n+  sortColumnKey: string | null,\n+  sortDirection: number,\n+  selectedItems: Array<any>,\n+  selectable: boolean,\n+  loading: boolean,\n+  endpoint: ApiDataEndpoint\n+};\n+\n+export class AsyncDataHandler extends React.Component<Props, State> {\n+  static defaultProps = {\n+    selectable: false,\n+    columns: [],\n+  };\n+\n+  static contextType = StatePersistedContext;\n+\n+  constructor(props: Props) {\n+    super(props);\n+    this.state = {\n+      data: [],\n+      currentPage: 1,\n+      itemsPerPage: this.props.initialItemsPerPage || 15,\n+      totalItems: 0,\n+      criteria: undefined,\n+      sortColumnKey: this.props.initialSortColumnKey || null,\n+      sortDirection: this.props.initialSortDirection || 1,\n+      selectedItems: this.props.selectedItems || [],\n+      selectable: this.props.selectable,\n+      loading: false,\n+      endpoint: new ApiDataEndpoint(new URL(this.props.resource, window.location.origin))\n+    };\n+  };\n+\n+  getData() {\n+    const currPage = (this.state.currentPage - 1) * this.state.itemsPerPage + 1;\n+    const pageControl = new PageControl(currPage, this.state.itemsPerPage,\n+      this.state.criteria, this.state.sortColumnKey, this.state.sortDirection);\n+\n+    this.setState({loading: true}, () => {\n+      this.state.endpoint.get(promise => {\n+        promise.then(data => this.updateData(data))\n+          .finally(() => this.setState({loading: false}));\n+        }, pageControl);\n+    });\n+  }\n+\n+  updateData({items, total}: {items: Array<any>, total: number}) {\n+    this.setState({data: items, totalItems: total}, () => {\n+      const lastPage = this.getLastPage();\n+      if (this.state.currentPage > lastPage) {\n+        this.setState({currentPage: lastPage});\n+      }\n+    });\n+  }\n+\n+  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n+    this.setState({\n+        selectedItems: nextProps.selectedItems || [],\n+        selectable: Boolean(nextProps.selectable)\n+    });\n+  };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2463a2c170835a1d203b815c58086d222cb35044"}, "originalPosition": 117}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NjAwNjI5OnYy", "diffSide": "RIGHT", "path": "web/html/src/components/table/AsyncDataHandler.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMjo0ODoxOFrOHJDUCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMjo0ODoxOFrOHJDUCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTI1MzUxMg==", "bodyText": "Most of these are common with TableDataHandler. I would rather see the TableDataHandler code refactored to accept something like a dataProvider property pointing to another component responsible for getting the data either asynchronously with your code or using preprovided data as we already have.", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r479253512", "createdAt": "2020-08-28T12:48:18Z", "author": {"login": "cbosdo"}, "path": "web/html/src/components/table/AsyncDataHandler.js", "diffHunk": "@@ -0,0 +1,318 @@\n+// @flow\n+import * as React from 'react';\n+\n+import {Utils} from \"utils/functions\";\n+import {ApiDataEndpoint, PageControl} from '../../utils/data-endpoint';\n+import { StatePersistedContext } from '../utils/StatePersistedContext';\n+\n+import { ItemsPerPageSelector } from '../pagination';\n+import { PaginationBlock } from '../pagination';\n+import { SearchPanel } from './SearchPanel';\n+import { SearchField } from './SearchField';\n+import { Header } from './Header';\n+\n+type ChildrenArgsProps = {\n+  currItems: Array<any>,\n+  headers: React.Node,\n+  handleSelect: Function,\n+  selectable: boolean,\n+  selectedItems: Array<any>,\n+  criteria?: string,\n+}\n+\n+type Props = {\n+  columns: Array<React.ElementRef<any>>,\n+  /** the async resource endpoint to retrieve the paged data from */\n+  resource: string,\n+  /** Function extracting the unique key of the row from the data object */\n+  identifier: Function,\n+  /** the column key name of the initial sorted column */\n+  initialSortColumnKey?: string,\n+  /** 1 for ascending, -1 for descending */\n+  initialSortDirection?: number,\n+  /** the React Object that contains the filter search field */\n+  searchField?: React.Element<typeof SearchField>,\n+  /** the initial number of how many row-per-page to show. If it's 0 table header and footer are hidden */\n+  initialItemsPerPage?: number,\n+  /** enables item selection */\n+  selectable: boolean,\n+  /** the handler to call when the table selection is updated. If not provided, the select boxes won't be rendered */\n+  onSelect?: (items: Array<any>) => void,\n+  /** the identifiers for selected items */\n+  selectedItems?: Array<any>,\n+  /** The message which is shown when there are no rows to display */\n+  emptyText?: string,\n+  /** The message which is shown when the data is loading */\n+  loadingText?: string,\n+  /** Children node in the table */\n+  children: (args: ChildrenArgsProps) => React.Node,\n+};\n+\n+type State = {\n+  data: Array<any>,\n+  currentPage: number,\n+  itemsPerPage: number,\n+  totalItems: number,\n+  criteria?: string,\n+  sortColumnKey: string | null,\n+  sortDirection: number,\n+  selectedItems: Array<any>,\n+  selectable: boolean,\n+  loading: boolean,\n+  endpoint: ApiDataEndpoint\n+};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2463a2c170835a1d203b815c58086d222cb35044"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MDY4NTMwOnYy", "diffSide": "RIGHT", "path": "java/code/src/com/suse/manager/webui/utils/test/PageControlHelperTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNzoxNDozMlrOHPmLTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDozNTo1MFrOHV9TAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjExNjE3Mw==", "bodyText": "Shouldn't the 2nd page only contain one item? 2 items on the 1st page, 1 item on the 2nd one.", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r486116173", "createdAt": "2020-09-10T07:14:32Z", "author": {"login": "hustodemon"}, "path": "java/code/src/com/suse/manager/webui/utils/test/PageControlHelperTest.java", "diffHunk": "@@ -0,0 +1,289 @@\n+package com.suse.manager.webui.utils.test;\n+\n+import com.redhat.rhn.common.db.datasource.DataResult;\n+import com.redhat.rhn.frontend.listview.PageControl;\n+import com.suse.manager.webui.utils.PageControlHelper;\n+import com.suse.manager.webui.utils.SparkTestUtils;\n+import junit.framework.TestCase;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+public class PageControlHelperTest extends TestCase {\n+\n+    private static final String REQUEST_URL = \"https://pagecontrol.test\";\n+\n+    public void testRequestWithNoParams() {\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequest(REQUEST_URL));\n+\n+        assertEquals(1, helper.getStart());\n+        assertEquals(0, helper.getPageSize());\n+        assertNull(helper.getQuery());\n+        assertNull(helper.getQueryColumn());\n+        assertNull(helper.getSortDirection());\n+        assertNull(helper.getSortColumn());\n+        assertNull(helper.getFunction());\n+    }\n+\n+    public void testRequestWithPageParams() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams),\"mydefaultproperty\");\n+\n+        assertEquals(5, helper.getStart());\n+        assertEquals(10, helper.getPageSize());\n+        assertNull(helper.getQuery());\n+        assertNull(helper.getQueryColumn());\n+        assertNull(helper.getSortDirection());\n+        assertNull(helper.getSortColumn());\n+        assertNull(helper.getFunction());\n+    }\n+\n+    public void testRequestWithFilterParams() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+        // Filter string and column\n+        queryParams.put(\"q\", \"mystring\");\n+        queryParams.put(\"qc\", \"myproperty\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        assertEquals(5, helper.getStart());\n+        assertEquals(10, helper.getPageSize());\n+        assertEquals(\"mystring\", helper.getQuery());\n+        assertEquals(\"myproperty\", helper.getQueryColumn());\n+        assertNull(helper.getSortDirection());\n+        assertNull(helper.getSortColumn());\n+        assertNull(helper.getFunction());\n+    }\n+\n+    public void testRequestWithSortParams() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+        // Sort direction and column\n+        queryParams.put(\"s\", \"1\");\n+        queryParams.put(\"sc\", \"mysortproperty\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        assertEquals(5, helper.getStart());\n+        assertEquals(10, helper.getPageSize());\n+        assertNull(helper.getQuery());\n+        assertNull(helper.getQueryColumn());\n+        assertEquals(\"1\", helper.getSortDirection());\n+        assertEquals(\"mysortproperty\", helper.getSortColumn());\n+        assertNull(helper.getFunction());\n+    }\n+\n+    public void testRequestWithFunctionParam() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Function\n+        queryParams.put(\"f\", \"myfunction\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        assertEquals(1, helper.getStart());\n+        assertEquals(0, helper.getPageSize());\n+        assertNull(helper.getQuery());\n+        assertNull(helper.getQueryColumn());\n+        assertNull(helper.getSortDirection());\n+        assertNull(helper.getSortColumn());\n+        assertEquals(\"myfunction\", helper.getFunction());\n+    }\n+\n+    public void testRequestWithDefaultFilterColumn() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+        // Filter string\n+        queryParams.put(\"q\", \"mystring\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        assertEquals(5, helper.getStart());\n+        assertEquals(10, helper.getPageSize());\n+        assertEquals(\"mystring\", helper.getQuery());\n+        assertEquals(\"mydefaultproperty\", helper.getQueryColumn());\n+    }\n+\n+    public void testPageControlWithNoParams() {\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequest(REQUEST_URL));\n+        PageControl pc = helper.getPageControl();\n+\n+        assertEquals(1, pc.getStart());\n+        assertEquals(0, pc.getEnd());\n+        assertFalse(pc.hasFilter());\n+        assertNull(pc.getFilterData());\n+        assertNull(pc.getFilterColumn());\n+    }\n+\n+    public void testPageControlWithPageParams() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams),\"mydefaultproperty\");\n+        PageControl pc = helper.getPageControl();\n+\n+        assertEquals(5, pc.getStart());\n+        assertEquals(14, pc.getEnd());\n+        assertFalse(pc.hasFilter());\n+        assertNull(pc.getFilterData());\n+        assertNull(pc.getFilterColumn());\n+    }\n+\n+    public void testPageControlWithFilterParams() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+        // Filter string and column\n+        queryParams.put(\"q\", \"mystring\");\n+        queryParams.put(\"qc\", \"myproperty\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+        PageControl pc = helper.getPageControl();\n+\n+        assertEquals(5, pc.getStart());\n+        assertEquals(14, pc.getEnd());\n+        assertTrue(pc.hasFilter());\n+        assertEquals(\"mystring\", pc.getFilterData());\n+        assertEquals(\"myproperty\", pc.getFilterColumn());\n+    }\n+\n+    public class PagedDataItem {\n+        private int firstProperty;\n+        private String secondProperty;\n+\n+        PagedDataItem(int firstProperty, String secondProperty) {\n+            this.firstProperty = firstProperty;\n+            this.secondProperty = secondProperty;\n+        }\n+\n+        public int getFirstProperty() {\n+            return firstProperty;\n+        }\n+\n+        public String getSecondProperty() {\n+            return secondProperty;\n+        }\n+    }\n+\n+    public void testApplySort() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        List<PagedDataItem> unsortedList = Arrays.asList(\n+                new PagedDataItem(2, \"two\"),\n+                new PagedDataItem(1, \"one\"),\n+                new PagedDataItem(3, \"three\"));\n+\n+        List<PagedDataItem> listToSort = new ArrayList<>(unsortedList);\n+        helper.applySort(listToSort);\n+\n+        // No sorting should be performed unless the sort column is specified\n+        assertEquals(unsortedList, listToSort);\n+\n+        // Sort column (number)\n+        queryParams.put(\"sc\", \"firstProperty\");\n+        helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL, queryParams),\n+                \"mydefaultproperty\");\n+        helper.applySort(listToSort);\n+\n+        // Should be sorted in ascending order by default\n+        assertEquals(1, listToSort.get(0).firstProperty);\n+        assertEquals(2, listToSort.get(1).firstProperty);\n+        assertEquals(3, listToSort.get(2).firstProperty);\n+\n+        // Sort direction (descending) and column (alpha)\n+        queryParams.put(\"s\", \"-1\");\n+        queryParams.put(\"sc\", \"secondProperty\");\n+        helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL, queryParams),\n+                \"mydefaultproperty\");\n+        listToSort = new ArrayList<>(unsortedList);\n+        helper.applySort(listToSort);\n+\n+        assertEquals(\"two\", listToSort.get(0).secondProperty);\n+        assertEquals(\"three\", listToSort.get(1).secondProperty);\n+        assertEquals(\"one\", listToSort.get(2).secondProperty);\n+    }\n+\n+    public void testProcessPageControl() {\n+        DataResult<PagedDataItem> testData = new DataResult<>(Arrays.asList(\n+                new PagedDataItem(1, \"angel\"),\n+                new PagedDataItem(2, \"apple\"),\n+                new PagedDataItem(3, \"orange\"),\n+                new PagedDataItem(4, \"ranger\")\n+        ));\n+\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"2\");\n+        queryParams.put(\"ps\", \"2\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        DataResult<PagedDataItem> result = helper.processPageControl(testData);\n+\n+        assertEquals(2, result.size());\n+        assertEquals(4, result.getTotalSize());\n+        assertEquals(2, result.getStart());\n+        assertEquals(3, result.getEnd());\n+        assertEquals(\"apple\", result.get(0).secondProperty);\n+        assertEquals(\"orange\", result.get(1).secondProperty);\n+    }\n+\n+    public void testProcessPageControlFiltered() {\n+        DataResult<PagedDataItem> testData = new DataResult<>(Arrays.asList(\n+                new PagedDataItem(1, \"angel\"),\n+                new PagedDataItem(2, \"apple\"),\n+                new PagedDataItem(3, \"orange\"),\n+                new PagedDataItem(4, \"ranger\")\n+        ));\n+\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"2\");\n+        queryParams.put(\"ps\", \"2\");\n+        // Filter string and column\n+        queryParams.put(\"q\", \"ang\");\n+        queryParams.put(\"qc\", \"secondProperty\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        DataResult<PagedDataItem> result = helper.processPageControl(testData);\n+\n+        assertEquals(2, result.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1416a5759e326688434bc9f7b8d156ccc1a17b83"}, "originalPosition": 282}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc4NjQzMw==", "bodyText": "No, the parameter p is actually for the start index (counting from 1), not the actual page number.", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r492786433", "createdAt": "2020-09-22T14:35:50Z", "author": {"login": "cbbayburt"}, "path": "java/code/src/com/suse/manager/webui/utils/test/PageControlHelperTest.java", "diffHunk": "@@ -0,0 +1,289 @@\n+package com.suse.manager.webui.utils.test;\n+\n+import com.redhat.rhn.common.db.datasource.DataResult;\n+import com.redhat.rhn.frontend.listview.PageControl;\n+import com.suse.manager.webui.utils.PageControlHelper;\n+import com.suse.manager.webui.utils.SparkTestUtils;\n+import junit.framework.TestCase;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+public class PageControlHelperTest extends TestCase {\n+\n+    private static final String REQUEST_URL = \"https://pagecontrol.test\";\n+\n+    public void testRequestWithNoParams() {\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequest(REQUEST_URL));\n+\n+        assertEquals(1, helper.getStart());\n+        assertEquals(0, helper.getPageSize());\n+        assertNull(helper.getQuery());\n+        assertNull(helper.getQueryColumn());\n+        assertNull(helper.getSortDirection());\n+        assertNull(helper.getSortColumn());\n+        assertNull(helper.getFunction());\n+    }\n+\n+    public void testRequestWithPageParams() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams),\"mydefaultproperty\");\n+\n+        assertEquals(5, helper.getStart());\n+        assertEquals(10, helper.getPageSize());\n+        assertNull(helper.getQuery());\n+        assertNull(helper.getQueryColumn());\n+        assertNull(helper.getSortDirection());\n+        assertNull(helper.getSortColumn());\n+        assertNull(helper.getFunction());\n+    }\n+\n+    public void testRequestWithFilterParams() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+        // Filter string and column\n+        queryParams.put(\"q\", \"mystring\");\n+        queryParams.put(\"qc\", \"myproperty\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        assertEquals(5, helper.getStart());\n+        assertEquals(10, helper.getPageSize());\n+        assertEquals(\"mystring\", helper.getQuery());\n+        assertEquals(\"myproperty\", helper.getQueryColumn());\n+        assertNull(helper.getSortDirection());\n+        assertNull(helper.getSortColumn());\n+        assertNull(helper.getFunction());\n+    }\n+\n+    public void testRequestWithSortParams() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+        // Sort direction and column\n+        queryParams.put(\"s\", \"1\");\n+        queryParams.put(\"sc\", \"mysortproperty\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        assertEquals(5, helper.getStart());\n+        assertEquals(10, helper.getPageSize());\n+        assertNull(helper.getQuery());\n+        assertNull(helper.getQueryColumn());\n+        assertEquals(\"1\", helper.getSortDirection());\n+        assertEquals(\"mysortproperty\", helper.getSortColumn());\n+        assertNull(helper.getFunction());\n+    }\n+\n+    public void testRequestWithFunctionParam() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Function\n+        queryParams.put(\"f\", \"myfunction\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        assertEquals(1, helper.getStart());\n+        assertEquals(0, helper.getPageSize());\n+        assertNull(helper.getQuery());\n+        assertNull(helper.getQueryColumn());\n+        assertNull(helper.getSortDirection());\n+        assertNull(helper.getSortColumn());\n+        assertEquals(\"myfunction\", helper.getFunction());\n+    }\n+\n+    public void testRequestWithDefaultFilterColumn() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+        // Filter string\n+        queryParams.put(\"q\", \"mystring\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        assertEquals(5, helper.getStart());\n+        assertEquals(10, helper.getPageSize());\n+        assertEquals(\"mystring\", helper.getQuery());\n+        assertEquals(\"mydefaultproperty\", helper.getQueryColumn());\n+    }\n+\n+    public void testPageControlWithNoParams() {\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequest(REQUEST_URL));\n+        PageControl pc = helper.getPageControl();\n+\n+        assertEquals(1, pc.getStart());\n+        assertEquals(0, pc.getEnd());\n+        assertFalse(pc.hasFilter());\n+        assertNull(pc.getFilterData());\n+        assertNull(pc.getFilterColumn());\n+    }\n+\n+    public void testPageControlWithPageParams() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams),\"mydefaultproperty\");\n+        PageControl pc = helper.getPageControl();\n+\n+        assertEquals(5, pc.getStart());\n+        assertEquals(14, pc.getEnd());\n+        assertFalse(pc.hasFilter());\n+        assertNull(pc.getFilterData());\n+        assertNull(pc.getFilterColumn());\n+    }\n+\n+    public void testPageControlWithFilterParams() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+        // Filter string and column\n+        queryParams.put(\"q\", \"mystring\");\n+        queryParams.put(\"qc\", \"myproperty\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+        PageControl pc = helper.getPageControl();\n+\n+        assertEquals(5, pc.getStart());\n+        assertEquals(14, pc.getEnd());\n+        assertTrue(pc.hasFilter());\n+        assertEquals(\"mystring\", pc.getFilterData());\n+        assertEquals(\"myproperty\", pc.getFilterColumn());\n+    }\n+\n+    public class PagedDataItem {\n+        private int firstProperty;\n+        private String secondProperty;\n+\n+        PagedDataItem(int firstProperty, String secondProperty) {\n+            this.firstProperty = firstProperty;\n+            this.secondProperty = secondProperty;\n+        }\n+\n+        public int getFirstProperty() {\n+            return firstProperty;\n+        }\n+\n+        public String getSecondProperty() {\n+            return secondProperty;\n+        }\n+    }\n+\n+    public void testApplySort() {\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"5\");\n+        queryParams.put(\"ps\", \"10\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        List<PagedDataItem> unsortedList = Arrays.asList(\n+                new PagedDataItem(2, \"two\"),\n+                new PagedDataItem(1, \"one\"),\n+                new PagedDataItem(3, \"three\"));\n+\n+        List<PagedDataItem> listToSort = new ArrayList<>(unsortedList);\n+        helper.applySort(listToSort);\n+\n+        // No sorting should be performed unless the sort column is specified\n+        assertEquals(unsortedList, listToSort);\n+\n+        // Sort column (number)\n+        queryParams.put(\"sc\", \"firstProperty\");\n+        helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL, queryParams),\n+                \"mydefaultproperty\");\n+        helper.applySort(listToSort);\n+\n+        // Should be sorted in ascending order by default\n+        assertEquals(1, listToSort.get(0).firstProperty);\n+        assertEquals(2, listToSort.get(1).firstProperty);\n+        assertEquals(3, listToSort.get(2).firstProperty);\n+\n+        // Sort direction (descending) and column (alpha)\n+        queryParams.put(\"s\", \"-1\");\n+        queryParams.put(\"sc\", \"secondProperty\");\n+        helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL, queryParams),\n+                \"mydefaultproperty\");\n+        listToSort = new ArrayList<>(unsortedList);\n+        helper.applySort(listToSort);\n+\n+        assertEquals(\"two\", listToSort.get(0).secondProperty);\n+        assertEquals(\"three\", listToSort.get(1).secondProperty);\n+        assertEquals(\"one\", listToSort.get(2).secondProperty);\n+    }\n+\n+    public void testProcessPageControl() {\n+        DataResult<PagedDataItem> testData = new DataResult<>(Arrays.asList(\n+                new PagedDataItem(1, \"angel\"),\n+                new PagedDataItem(2, \"apple\"),\n+                new PagedDataItem(3, \"orange\"),\n+                new PagedDataItem(4, \"ranger\")\n+        ));\n+\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"2\");\n+        queryParams.put(\"ps\", \"2\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        DataResult<PagedDataItem> result = helper.processPageControl(testData);\n+\n+        assertEquals(2, result.size());\n+        assertEquals(4, result.getTotalSize());\n+        assertEquals(2, result.getStart());\n+        assertEquals(3, result.getEnd());\n+        assertEquals(\"apple\", result.get(0).secondProperty);\n+        assertEquals(\"orange\", result.get(1).secondProperty);\n+    }\n+\n+    public void testProcessPageControlFiltered() {\n+        DataResult<PagedDataItem> testData = new DataResult<>(Arrays.asList(\n+                new PagedDataItem(1, \"angel\"),\n+                new PagedDataItem(2, \"apple\"),\n+                new PagedDataItem(3, \"orange\"),\n+                new PagedDataItem(4, \"ranger\")\n+        ));\n+\n+        Map<String, String> queryParams = new HashMap<>();\n+        // Start index and page size\n+        queryParams.put(\"p\", \"2\");\n+        queryParams.put(\"ps\", \"2\");\n+        // Filter string and column\n+        queryParams.put(\"q\", \"ang\");\n+        queryParams.put(\"qc\", \"secondProperty\");\n+\n+        PageControlHelper helper = new PageControlHelper(SparkTestUtils.createMockRequestWithParams(REQUEST_URL,\n+                queryParams), \"mydefaultproperty\");\n+\n+        DataResult<PagedDataItem> result = helper.processPageControl(testData);\n+\n+        assertEquals(2, result.size());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjExNjE3Mw=="}, "originalCommit": {"oid": "1416a5759e326688434bc9f7b8d156ccc1a17b83"}, "originalPosition": 282}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NTE0NTE3OnYy", "diffSide": "RIGHT", "path": "java/code/src/com/suse/manager/webui/controllers/maintenance/MaintenanceScheduleController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwNzowMjoxMFrOHQQz5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDo0MzoxN1rOHV9qvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjgxNDY5NA==", "bodyText": "Would it make sense to make the applySort part of processPageControl (and even make it private (or \"public for testing only\"))?", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r486814694", "createdAt": "2020-09-11T07:02:10Z", "author": {"login": "hustodemon"}, "path": "java/code/src/com/suse/manager/webui/controllers/maintenance/MaintenanceScheduleController.java", "diffHunk": "@@ -255,11 +266,112 @@ public static String delete(Request request, Response response, User user) {\n         return json(response, ResultJson.success());\n     }\n \n+    /**\n+     * Returns a list of system IDs assigned to a specified maintenance schedule\n+     *\n+     * @param request the Spark request\n+     * @param response the Spark response\n+     * @param user the authorized user\n+     * @return the JSON list of system IDs\n+     */\n+    public static String assignedSystems(Request request, Response response, User user) {\n+        response.type(\"application/json\");\n+        Long scheduleId = Long.parseLong(request.params(\"id\"));\n+        List<Long> systemIds = new ArrayList<>();\n+        MM.lookupScheduleByUserAndId(user, scheduleId).ifPresentOrElse(\n+                schedule -> {\n+                    List<EssentialServerDto> systems = SystemManager.systemsInSchedule(user, schedule, null);\n+                    systemIds.addAll(systems.stream().map(EssentialServerDto::getId).collect(Collectors.toList()));\n+                },\n+                () -> Spark.halt(HttpStatus.SC_NOT_FOUND)\n+        );\n+        return json(response, systemIds);\n+    }\n+\n+    /**\n+     * Returns a paged list of systems visible to a user and their assigned schedules\n+     *\n+     * @param request the Spark request\n+     * @param response the Spark response\n+     * @param user the authorized user\n+     * @return the JSON response\n+     */\n+    public static String systemSchedules(Request request, Response response, User user) {\n+        response.type(\"application/json\");\n+        PageControlHelper pageHelper = new PageControlHelper(request, \"name\");\n+\n+        DataResult<SystemScheduleDto> systems = SystemManager.systemListWithSchedules(user, null);\n+\n+        if (\"id\".equals(pageHelper.getFunction())) {\n+            // Return only IDs for \"select all\" function\n+            return json(response, systems.stream().map(SystemScheduleDto::getId).collect(Collectors.toList()));\n+        }\n+\n+        pageHelper.applySort(systems);\n+        systems = pageHelper.processPageControl(systems, new HashMap<>());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf15ccf9ba2f7a5a9a008f149920f01a1761732d"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc5MjUxMA==", "bodyText": "Right, I guess I had a reason for this in the early implementation, but it doesn't seem to be valid anymore. Thanks!", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r492792510", "createdAt": "2020-09-22T14:43:17Z", "author": {"login": "cbbayburt"}, "path": "java/code/src/com/suse/manager/webui/controllers/maintenance/MaintenanceScheduleController.java", "diffHunk": "@@ -255,11 +266,112 @@ public static String delete(Request request, Response response, User user) {\n         return json(response, ResultJson.success());\n     }\n \n+    /**\n+     * Returns a list of system IDs assigned to a specified maintenance schedule\n+     *\n+     * @param request the Spark request\n+     * @param response the Spark response\n+     * @param user the authorized user\n+     * @return the JSON list of system IDs\n+     */\n+    public static String assignedSystems(Request request, Response response, User user) {\n+        response.type(\"application/json\");\n+        Long scheduleId = Long.parseLong(request.params(\"id\"));\n+        List<Long> systemIds = new ArrayList<>();\n+        MM.lookupScheduleByUserAndId(user, scheduleId).ifPresentOrElse(\n+                schedule -> {\n+                    List<EssentialServerDto> systems = SystemManager.systemsInSchedule(user, schedule, null);\n+                    systemIds.addAll(systems.stream().map(EssentialServerDto::getId).collect(Collectors.toList()));\n+                },\n+                () -> Spark.halt(HttpStatus.SC_NOT_FOUND)\n+        );\n+        return json(response, systemIds);\n+    }\n+\n+    /**\n+     * Returns a paged list of systems visible to a user and their assigned schedules\n+     *\n+     * @param request the Spark request\n+     * @param response the Spark response\n+     * @param user the authorized user\n+     * @return the JSON response\n+     */\n+    public static String systemSchedules(Request request, Response response, User user) {\n+        response.type(\"application/json\");\n+        PageControlHelper pageHelper = new PageControlHelper(request, \"name\");\n+\n+        DataResult<SystemScheduleDto> systems = SystemManager.systemListWithSchedules(user, null);\n+\n+        if (\"id\".equals(pageHelper.getFunction())) {\n+            // Return only IDs for \"select all\" function\n+            return json(response, systems.stream().map(SystemScheduleDto::getId).collect(Collectors.toList()));\n+        }\n+\n+        pageHelper.applySort(systems);\n+        systems = pageHelper.processPageControl(systems, new HashMap<>());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjgxNDY5NA=="}, "originalCommit": {"oid": "cf15ccf9ba2f7a5a9a008f149920f01a1761732d"}, "originalPosition": 93}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2MjIzNzc5OnYy", "diffSide": "RIGHT", "path": "web/html/src/utils/data-providers/page-control.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMjo0NTo1NFrOHSvFmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDo0OTo1NFrOHV9_-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQwNzg5Nw==", "bodyText": "Again the ugly global... \ud83e\udd22", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r489407897", "createdAt": "2020-09-16T12:45:54Z", "author": {"login": "cbosdo"}, "path": "web/html/src/utils/data-providers/page-control.js", "diffHunk": "@@ -0,0 +1,29 @@\n+// @flow\n+\n+declare var userPrefPageSize: number;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cf47291563e4f91a5611cf64208ba4e8b2b48ac"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc5Nzk0Ng==", "bodyText": "Now I'm using the mixin provided from jade \ud83d\udc4d", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r492797946", "createdAt": "2020-09-22T14:49:54Z", "author": {"login": "cbbayburt"}, "path": "web/html/src/utils/data-providers/page-control.js", "diffHunk": "@@ -0,0 +1,29 @@\n+// @flow\n+\n+declare var userPrefPageSize: number;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQwNzg5Nw=="}, "originalCommit": {"oid": "8cf47291563e4f91a5611cf64208ba4e8b2b48ac"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2MjI0OTk3OnYy", "diffSide": "RIGHT", "path": "web/html/src/utils/data-providers/simple-data-provider.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMjo0OTowOVrOHSvNVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDo0OTozNFrOHV9-4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQwOTg3OA==", "bodyText": "Would be easier to read with a ComparatorType. And that type would be reused further down too", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r489409878", "createdAt": "2020-09-16T12:49:09Z", "author": {"login": "cbosdo"}, "path": "web/html/src/utils/data-providers/simple-data-provider.js", "diffHunk": "@@ -0,0 +1,59 @@\n+// @flow\n+\n+import PageControl from './page-control';\n+\n+type PagedData = {\n+  items: Array<any>,\n+  total: number\n+};\n+\n+export default class SimpleDataProvider {\n+  data: Array<any>;\n+  identifier: (row: any) => any;\n+  filter: ?(row: any, criteria: string) => boolean;\n+  comparators: ?{column: (a: any, b: any, key: string, direction: number) => number};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cf47291563e4f91a5611cf64208ba4e8b2b48ac"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc5NzY2NA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r492797664", "createdAt": "2020-09-22T14:49:34Z", "author": {"login": "cbbayburt"}, "path": "web/html/src/utils/data-providers/simple-data-provider.js", "diffHunk": "@@ -0,0 +1,59 @@\n+// @flow\n+\n+import PageControl from './page-control';\n+\n+type PagedData = {\n+  items: Array<any>,\n+  total: number\n+};\n+\n+export default class SimpleDataProvider {\n+  data: Array<any>;\n+  identifier: (row: any) => any;\n+  filter: ?(row: any, criteria: string) => boolean;\n+  comparators: ?{column: (a: any, b: any, key: string, direction: number) => number};", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQwOTg3OA=="}, "originalCommit": {"oid": "8cf47291563e4f91a5611cf64208ba4e8b2b48ac"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2MjI4OTg4OnYy", "diffSide": "RIGHT", "path": "web/html/src/components/table/TableDataHandler.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMjo1ODo1N1rOHSvmfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxMjo1ODo1N1rOHSvmfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTQxNjMxNw==", "bodyText": "I like that approach. Thanks for the hard work on it \ud83d\udc4f", "url": "https://github.com/uyuni-project/uyuni/pull/2532#discussion_r489416317", "createdAt": "2020-09-16T12:58:57Z", "author": {"login": "cbosdo"}, "path": "web/html/src/components/table/TableDataHandler.js", "diffHunk": "@@ -18,16 +21,27 @@ type ChildrenArgsProps = {\n \n type Props = {\n   columns: Array<React.ElementRef<any>>,\n-  /** any type of data in an array, where each element is a row data */\n-  data: Array<any>,\n+  /**\n+   * Either an array of data items of any type where each element is a row data,\n+   * or a URI string to a resource endpoint that returns a paged list of data items.\n+   *\n+   * The data returned from the endpoint must be in paginated form as the following:\n+   * ```\n+   * {\n+   *    items: [..],\n+   *    total: TOTAL_ITEMS\n+   * }\n+   * ```\n+   *\n+   * See: utils/data-providers/paged-data-endpoint.js for async usage", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf15ccf9ba2f7a5a9a008f149920f01a1761732d"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4165, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}