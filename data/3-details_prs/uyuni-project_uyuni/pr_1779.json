{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNDQ0NDUx", "number": 1779, "title": "Exclude base products from PAYG (Pay-As-You-Go) instances when feeding the subscription matcher", "bodyText": "What does this PR change?\nThis PR excludes the base products for PAYG (Pay-As-You-Go) virtual instances when feeding the subscription matcher, in order to not consume a subscription when it's not needed.\nSummary of changes:\n\nNew payg column for rhnServer DB table.\nOur custom public_cloud grains module now exposes a new is_payg_instance grain when the instances is PAYG.\nTo determine whether an instance is PAYG or not, we do the same way that SUSEConnect does.\nExclude PAYG instances when generating the JSON to feed the subscription-matcher.\n\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nuyuni-project/uyuni-docs#46\n\n\n DONE\n\n\nTest coverage\n\n\nUnit tests were added\n\n\n DONE\n\n\nLinks\nTracks SUSE/spacewalk#9943\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-01-10T13:13:04Z", "url": "https://github.com/uyuni-project/uyuni/pull/1779", "merged": true, "mergeCommit": {"oid": "435f88bf8107d10509dc97292bcada793ae58501"}, "closed": true, "closedAt": "2020-02-02T07:50:43Z", "author": {"login": "meaksh"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4-XMQABqjI5Mzg0NzI3NzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcATH4MgBqjI5OTk4NDAxNzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9cd3bc6772e01fb5cd5d07e74a5c9da54a444cdb", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9cd3bc6772e01fb5cd5d07e74a5c9da54a444cdb", "committedDate": "2020-01-10T12:51:12Z", "message": "Update changelog for spacewalk-java"}, "afterCommit": {"oid": "e757c02c7a970e4be5baa58239ea266fb59c016b", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e757c02c7a970e4be5baa58239ea266fb59c016b", "committedDate": "2020-01-10T13:13:55Z", "message": "Update changelog for spacewalk-java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzA5MDEz", "url": "https://github.com/uyuni-project/uyuni/pull/1779#pullrequestreview-341709013", "createdAt": "2020-01-13T09:17:12Z", "commit": {"oid": "e3b7d44c9ac77107d495014efb6b6666d0a4c7ee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOToxNzoxMlrOFcwl9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOToyNDoxOVrOFcwwoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcwMDU5Nw==", "bodyText": "Hmm, as for now we never used \"BOOLEAN\" in the DB. We always used CHAR(1) with 'Y' and 'N' value.\nThis was for oracle compatibility which is not needed anymore. But we use it everywhere. I would like to keep it for now and make an official discussion about what we want to do in future.\nAnd for backporting it is needed anyway.", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r365700597", "createdAt": "2020-01-13T09:17:12Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/common/tables/rhnVirtualInstance.sql", "diffHunk": "@@ -28,6 +28,7 @@ CREATE TABLE rhnVirtualInstance\n     uuid               VARCHAR2(128),\n     confirmed          NUMBER(1)\n                            DEFAULT (1) NOT NULL,\n+    payg               BOOLEAN,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3b7d44c9ac77107d495014efb6b6666d0a4c7ee"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcwMDgyNw==", "bodyText": "See above - use CHAR(1) please", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r365700827", "createdAt": "2020-01-13T09:17:51Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/upgrade/susemanager-schema-4.1.1-to-susemanager-schema-4.1.2/100-add-payg-to-virtualinstance.sql", "diffHunk": "@@ -0,0 +1,3 @@\n+ALTER TABLE rhnVirtualInstance\n+    ADD COLUMN IF NOT EXISTS payg BOOLEAN", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3b7d44c9ac77107d495014efb6b6666d0a4c7ee"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcwMjIzMA==", "bodyText": "Until now we never used real boolean. We used CHAR(1) and the schema say:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    <property name=\"payg\" column=\"PAYG\" type=\"boolean\"/>\n          \n          \n            \n                    <property name=\"payg\" type=\"yes_no\" column=\"PAYG\" />", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r365702230", "createdAt": "2020-01-13T09:21:27Z", "author": {"login": "mcalmer"}, "path": "java/code/src/com/redhat/rhn/domain/server/VirtualInstance.hbm.xml", "diffHunk": "@@ -16,6 +16,7 @@ PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n \n         <property name=\"uuid\" column=\"UUID\" type=\"string\" length=\"128\"/>\n         <property name=\"confirmed\" column=\"CONFIRMED\" type=\"long\"/>\n+        <property name=\"payg\" column=\"PAYG\" type=\"boolean\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3b7d44c9ac77107d495014efb6b6666d0a4c7ee"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcwMzMyOQ==", "bodyText": "Hmm, We need to check if a PAYG subscription really obsolete all subscriptions.\nI could imagin that we do not need a SLES subscription, but what about a SUSE Manager Lifecycle Subscription?\n@joesusecom ?", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r365703329", "createdAt": "2020-01-13T09:24:19Z", "author": {"login": "mcalmer"}, "path": "java/code/src/com/suse/manager/matcher/MatcherJsonIO.java", "diffHunk": "@@ -181,6 +182,7 @@ public MatcherJsonIO() {\n     private static Set<Long> getVirtualGuests(Server system) {\n         return system.getGuests().stream()\n             .filter(vi -> vi.getGuestSystem() != null)\n+            .filter(vi -> !vi.getPayg())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3b7d44c9ac77107d495014efb6b6666d0a4c7ee"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzEzOTg0", "url": "https://github.com/uyuni-project/uyuni/pull/1779#pullrequestreview-341713984", "createdAt": "2020-01-13T09:26:41Z", "commit": {"oid": "e3b7d44c9ac77107d495014efb6b6666d0a4c7ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOToyNjo0MVrOFcw0yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOToyNjo0MVrOFcw0yA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcwNDM5Mg==", "bodyText": "Is the existance of this file sufficient to detect a PAYG instance? Does it work for all clouds?", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r365704392", "createdAt": "2020-01-13T09:26:41Z", "author": {"login": "mcalmer"}, "path": "susemanager-utils/susemanager-sls/src/grains/public_cloud.py", "diffHunk": "@@ -111,3 +111,9 @@ def instance_id():\n     if INSTANCE_ID:\n         ret['instance_id'] = INSTANCE_ID\n     return ret\n+\n+def is_payg_instance():\n+    ret = {}\n+    if os.path.isfile('/usr/sbin/registercloudguest'):\n+        ret['is_payg_instance'] = True", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3b7d44c9ac77107d495014efb6b6666d0a4c7ee"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxODIyMzA4", "url": "https://github.com/uyuni-project/uyuni/pull/1779#pullrequestreview-341822308", "createdAt": "2020-01-13T12:53:47Z", "commit": {"oid": "0c19baa5bc6fb14ac4ce2fa61e634ed7b0b1bcb2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMjo1Mzo0OFrOFc16Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzoyNDo0MFrOFc2teQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTc4NzY5MQ==", "bodyText": "Nit: this null-check could be avoided if you used a primitive boolean attribute on L42 (not the boxed Boolean).", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r365787691", "createdAt": "2020-01-13T12:53:48Z", "author": {"login": "hustodemon"}, "path": "java/code/src/com/redhat/rhn/domain/server/VirtualInstance.java", "diffHunk": "@@ -100,6 +101,26 @@ public void setConfirmed(Long isConfirmed) {\n         confirmed = isConfirmed;\n     }\n \n+    /**\n+     *\n+     * @return payg\n+     */\n+    public Boolean getPayg() {\n+        if (payg == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c19baa5bc6fb14ac4ce2fa61e634ed7b0b1bcb2"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgwMDgyNQ==", "bodyText": "This method is called for each guest on a salt-based virtualization host, when the virtualization beacon fires. Doesn't this \"truncate\" payg flags  of all hosts to false?", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r365800825", "createdAt": "2020-01-13T13:24:40Z", "author": {"login": "hustodemon"}, "path": "java/code/src/com/redhat/rhn/manager/system/VirtualInstanceManager.java", "diffHunk": "@@ -317,6 +374,27 @@ public static void updateGuestVirtualInstance(VirtualInstance virtualInstance,\n     public static void updateGuestVirtualInstance(VirtualInstance virtualInstance,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c19baa5bc6fb14ac4ce2fa61e634ed7b0b1bcb2"}, "originalPosition": 110}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c19baa5bc6fb14ac4ce2fa61e634ed7b0b1bcb2", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0c19baa5bc6fb14ac4ce2fa61e634ed7b0b1bcb2", "committedDate": "2020-01-13T10:55:37Z", "message": "Use CHAR(1) instead BOOLEAN as DB column type"}, "afterCommit": {"oid": "6bb8e6ef166d6d347b71acc3deeacc82e0c6bff3", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6bb8e6ef166d6d347b71acc3deeacc82e0c6bff3", "committedDate": "2020-01-27T14:15:02Z", "message": "Adapt jUnit test to take care of entitlements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MTU3NDU5", "url": "https://github.com/uyuni-project/uyuni/pull/1779#pullrequestreview-349157459", "createdAt": "2020-01-28T06:47:44Z", "commit": {"oid": "192cc3cc0aad98f2292e1bf0499b445a76b66a70"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwNjo0Nzo0NFrOFiamHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwNjo0Nzo0NFrOFiamHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTYzMTY0Nw==", "bodyText": "As Joe has pointed out, AWS offers bare-metal PAYG instances as well, so this bit should not be in rhnVirtualInstance. I wonder if it makes sense to have a completely separate table (say rhnServerPAYG, with just a server_id column) or just add a column to rhnServer.", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r371631647", "createdAt": "2020-01-28T06:47:44Z", "author": {"login": "moio"}, "path": "schema/spacewalk/common/tables/rhnVirtualInstance.sql", "diffHunk": "@@ -28,6 +28,7 @@ CREATE TABLE rhnVirtualInstance\n     uuid               VARCHAR2(128),\n     confirmed          NUMBER(1)\n                            DEFAULT (1) NOT NULL,\n+    payg               CHAR(1) DEFAULT ('N') NOT NULL,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "192cc3cc0aad98f2292e1bf0499b445a76b66a70"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MjE1MzEz", "url": "https://github.com/uyuni-project/uyuni/pull/1779#pullrequestreview-349215313", "createdAt": "2020-01-28T09:06:30Z", "commit": {"oid": "192cc3cc0aad98f2292e1bf0499b445a76b66a70"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwOTowNjozMFrOFidbjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwOTowNzoyOFrOFidc8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY3ODA5Mg==", "bodyText": "This is not 100% true anymore as we do not fully exclude them. Maybe something like\nExclude products from PAYG ...", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r371678092", "createdAt": "2020-01-28T09:06:30Z", "author": {"login": "mcalmer"}, "path": "java/spacewalk-java.changes", "diffHunk": "@@ -1,3 +1,4 @@\n+- Exclude PAYG (Pay-As-You-Go) instances when doing subscription matching", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "192cc3cc0aad98f2292e1bf0499b445a76b66a70"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY3ODQ1MA==", "bodyText": "Hmm, if there are bare-metal instances it might make sense to add this to rhnServer directly.", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r371678450", "createdAt": "2020-01-28T09:07:28Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/common/tables/rhnVirtualInstance.sql", "diffHunk": "@@ -28,6 +28,7 @@ CREATE TABLE rhnVirtualInstance\n     uuid               VARCHAR2(128),\n     confirmed          NUMBER(1)\n                            DEFAULT (1) NOT NULL,\n+    payg               CHAR(1) DEFAULT ('N') NOT NULL,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTYzMTY0Nw=="}, "originalCommit": {"oid": "192cc3cc0aad98f2292e1bf0499b445a76b66a70"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MzI4MDY2", "url": "https://github.com/uyuni-project/uyuni/pull/1779#pullrequestreview-349328066", "createdAt": "2020-01-28T12:14:02Z", "commit": {"oid": "1da87fb41bca450cbd9703aea9bbd90b4b3e9e5f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5OTI2NzU0", "url": "https://github.com/uyuni-project/uyuni/pull/1779#pullrequestreview-349926754", "createdAt": "2020-01-29T08:21:44Z", "commit": {"oid": "1da87fb41bca450cbd9703aea9bbd90b4b3e9e5f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5OTQ3Mjg1", "url": "https://github.com/uyuni-project/uyuni/pull/1779#pullrequestreview-349947285", "createdAt": "2020-01-29T09:00:40Z", "commit": {"oid": "1da87fb41bca450cbd9703aea9bbd90b4b3e9e5f"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwOTowMDo0MFrOFjA3Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwOTowMzowNVrOFjA7dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjI1ODYzMA==", "bodyText": "Nitpick:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void setPayg(boolean isPAYG) {\n          \n          \n            \n                public void setPayg(boolean paygIn) {", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r372258630", "createdAt": "2020-01-29T09:00:40Z", "author": {"login": "moio"}, "path": "java/code/src/com/redhat/rhn/domain/server/Server.java", "diffHunk": "@@ -2132,4 +2133,20 @@ public void setFqdns(Set<ServerFQDN> fqdnsIn) {\n     public boolean doesOsSupportsMonitoring() {\n         return false;\n     }\n+\n+    /**\n+     *\n+     * @return payg\n+     */\n+    public boolean isPayg() {\n+        return payg;\n+    }\n+\n+    /**\n+     *\n+     * @param isPAYG boolean\n+     */\n+    public void setPayg(boolean isPAYG) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1da87fb41bca450cbd9703aea9bbd90b4b3e9e5f"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjI1OTQ3Mg==", "bodyText": "@hustodemon this means that those systems will get no product rather than free products from the matcher's POV. Are you explicitly OK with that?", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r372259472", "createdAt": "2020-01-29T09:02:32Z", "author": {"login": "moio"}, "path": "java/code/src/com/suse/manager/matcher/MatcherJsonIO.java", "diffHunk": "@@ -350,7 +351,7 @@ public String generateMatcherInput(boolean includeSelf, String arch, boolean sel\n \n         // add SUSE Manager entitlements\n         return concat(\n-                products.stream().map(SUSEProduct::getProductId),\n+                server.isPayg() ? Stream.empty() : products.stream().map(SUSEProduct::getProductId),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1da87fb41bca450cbd9703aea9bbd90b4b3e9e5f"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjI1OTcwMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 *", "url": "https://github.com/uyuni-project/uyuni/pull/1779#discussion_r372259703", "createdAt": "2020-01-29T09:03:05Z", "author": {"login": "moio"}, "path": "java/code/src/com/suse/manager/reactor/hardware/HardwareMapper.java", "diffHunk": "@@ -533,6 +533,14 @@ private boolean isVirtualGuest(String virtTypeLowerCase, String virtSubtype) {\n         return false;\n     }\n \n+    /**\n+     * Map PAYG information for the server to the database.\n+     *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1da87fb41bca450cbd9703aea9bbd90b4b3e9e5f"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc00060fd6c7bed1f6b953ffe1be998392658058", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fc00060fd6c7bed1f6b953ffe1be998392658058", "committedDate": "2020-01-29T09:31:55Z", "message": "Clean up code and use standard names for parameters\n\nCo-Authored-By: Silvio Moioli <moio@suse.com>"}, "afterCommit": {"oid": "90e4a6e7f49986f631af067aba16ba98f55e2f65", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/90e4a6e7f49986f631af067aba16ba98f55e2f65", "committedDate": "2020-01-29T10:07:47Z", "message": "Clean up code and use standard names for parameters\n\nCo-Authored-By: Silvio Moioli <moio@suse.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "90e4a6e7f49986f631af067aba16ba98f55e2f65", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/90e4a6e7f49986f631af067aba16ba98f55e2f65", "committedDate": "2020-01-29T10:07:47Z", "message": "Clean up code and use standard names for parameters\n\nCo-Authored-By: Silvio Moioli <moio@suse.com>"}, "afterCommit": {"oid": "852b2a04a05b9c6cc673c4bd4edeb0b848374d91", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/852b2a04a05b9c6cc673c4bd4edeb0b848374d91", "committedDate": "2020-01-29T10:08:20Z", "message": "Clean up code and use standard names for parameters\n\nCo-Authored-By: Silvio Moioli <moio@suse.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "856bba194110e0c522830715acdb226181008923", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/856bba194110e0c522830715acdb226181008923", "committedDate": "2020-02-02T07:21:18Z", "message": "Set custom 'is_payg_instance' grain when instance is PAYG"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a3bd4ba9ba5a5e7b0977b6870c2d5bfe6129637", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2a3bd4ba9ba5a5e7b0977b6870c2d5bfe6129637", "committedDate": "2020-02-02T07:21:18Z", "message": "Update changelog for susemanager-sls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8441a4ec67924be2c3400316096d8a2b9c6bb300", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8441a4ec67924be2c3400316096d8a2b9c6bb300", "committedDate": "2020-02-02T07:21:18Z", "message": "Set payg attribute when doing Hardware refresh"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32b790372ff8c7513e886c5acf85bdabac1fdd0b", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/32b790372ff8c7513e886c5acf85bdabac1fdd0b", "committedDate": "2020-02-02T07:21:18Z", "message": "Preserve 'payg' attribute when refreshing virtual instances"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0331f1fc98f52a8d138588fbab3e95268f9b0f9", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d0331f1fc98f52a8d138588fbab3e95268f9b0f9", "committedDate": "2020-02-02T07:21:18Z", "message": "Exclude PAYG instances when feeding the subscription matcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba7e3bc064fe2d872d41e2be4068da09157e5573", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ba7e3bc064fe2d872d41e2be4068da09157e5573", "committedDate": "2020-02-02T07:21:18Z", "message": "Fix VirtualInstance.getPayg to take care of possible NULL values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15c9a563741ef4958d2d10afb7939852cee17ccd", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/15c9a563741ef4958d2d10afb7939852cee17ccd", "committedDate": "2020-02-02T07:21:18Z", "message": "Remove tabs and use spaces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f90140d6de35d04f277e7babc8146d5cc92f92d", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5f90140d6de35d04f277e7babc8146d5cc92f92d", "committedDate": "2020-02-02T07:21:18Z", "message": "Add payg to rhnVirtualInstance DB schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd92f9bb6aedb548a9313adcfc512d7bd39eb62a", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/dd92f9bb6aedb548a9313adcfc512d7bd39eb62a", "committedDate": "2020-02-02T07:21:18Z", "message": "Update changelog for susemanager-schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff4317a82a00073278b708f15998bb24a2801c73", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ff4317a82a00073278b708f15998bb24a2801c73", "committedDate": "2020-02-02T07:21:47Z", "message": "Update changelog for spacewalk-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7febc3bcde25772f90fa73a1a6dc9c843ba2080f", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7febc3bcde25772f90fa73a1a6dc9c843ba2080f", "committedDate": "2020-02-02T07:21:47Z", "message": "Fix broken schema migration file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee72b95d8ef363d38e642a98bf6e7a3ea9eaf307", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ee72b95d8ef363d38e642a98bf6e7a3ea9eaf307", "committedDate": "2020-02-02T07:21:47Z", "message": "Do not exclude systems without virtual instance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da78916a7d1ef92adc53c916a582ab452b2391b2", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/da78916a7d1ef92adc53c916a582ab452b2391b2", "committedDate": "2020-02-02T07:21:48Z", "message": "jUnit: check that PAYG instances are not passed to the MatcherJson"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbdc53d52d7498b9f31b2bfb9e46f11f309f7b68", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/dbdc53d52d7498b9f31b2bfb9e46f11f309f7b68", "committedDate": "2020-02-02T07:21:48Z", "message": "Use CHAR(1) instead BOOLEAN as DB column type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e64440ef8df2d12b5bcd2b29889155eb7105086c", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e64440ef8df2d12b5bcd2b29889155eb7105086c", "committedDate": "2020-02-02T07:21:48Z", "message": "Use primitive boolean for VirtualInstance payg attribute"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29481bb4a101626d1c2d737373c5700f439559dc", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/29481bb4a101626d1c2d737373c5700f439559dc", "committedDate": "2020-02-02T07:21:48Z", "message": "Only exclude products for PAYG instances and not the entitlements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80ebad7d7243cf059be44a1dd648243cb57fb5c2", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/80ebad7d7243cf059be44a1dd648243cb57fb5c2", "committedDate": "2020-02-02T07:21:48Z", "message": "Adapt jUnit test to take care of entitlements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa891b6d44a3bda1c59512515c93bbd5e41947d1", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fa891b6d44a3bda1c59512515c93bbd5e41947d1", "committedDate": "2020-02-02T07:21:48Z", "message": "Set payg as NOT NULL attribute in the database"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "555930f154c588583b894a8b2e16f46358823d98", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/555930f154c588583b894a8b2e16f46358823d98", "committedDate": "2020-02-02T07:22:01Z", "message": "Fix changelog entry for spacewalk-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c359fb7c030465e646321e1dff7d548f29b0c00", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7c359fb7c030465e646321e1dff7d548f29b0c00", "committedDate": "2020-02-02T07:22:01Z", "message": "Move payg attribute to rhnServer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47f58f17d7093dcd4e780cf58178c7951b12cb17", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/47f58f17d7093dcd4e780cf58178c7951b12cb17", "committedDate": "2020-02-02T07:22:02Z", "message": "Fix changelog entry for susemanager-schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8478bb733f3b0e310e78634ed97d8d741dce8f9", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f8478bb733f3b0e310e78634ed97d8d741dce8f9", "committedDate": "2020-02-02T07:22:02Z", "message": "Fix lint issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b3ebd70117226907a32b5249fd43537b118a29b", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8b3ebd70117226907a32b5249fd43537b118a29b", "committedDate": "2020-02-02T07:22:02Z", "message": "Clean up code and use standard names for parameters\n\nCo-Authored-By: Silvio Moioli <moio@suse.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c90818ec4f08d03633656434e771f55d8bc5eacc", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c90818ec4f08d03633656434e771f55d8bc5eacc", "committedDate": "2020-02-02T07:22:02Z", "message": "Fix java lint issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35fd70d8635b056a33a928f919d6e19a4f63d97e", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/35fd70d8635b056a33a928f919d6e19a4f63d97e", "committedDate": "2020-01-29T10:30:33Z", "message": "Fix java lint issues"}, "afterCommit": {"oid": "c90818ec4f08d03633656434e771f55d8bc5eacc", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c90818ec4f08d03633656434e771f55d8bc5eacc", "committedDate": "2020-02-02T07:22:02Z", "message": "Fix java lint issues"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1715, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}