{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MjU4MzUz", "number": 2604, "title": "QA Workaround: Refresh the pillar data before retrieve values, after save the formula with changes", "bodyText": "What does this PR change?\nThis PR aimes to fix a testsuite issue retrieving pillar data, which is not up to date sometimes when we save the formula.\nAlso, prevents an error handling the output text from salt.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests\n\n\n DONE\n\n\nLinks\nNeed ports\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-09-15T12:23:00Z", "url": "https://github.com/uyuni-project/uyuni/pull/2604", "merged": true, "mergeCommit": {"oid": "e943df8297714b84ef5f56611268c84d44499405"}, "closed": true, "closedAt": "2020-09-16T07:47:36Z", "author": {"login": "srbarrios"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJHcWHgFqTQ4ODY1Njg0OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJHqtEABqjM3NjgyOTkwODk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NjU2ODQ5", "url": "https://github.com/uyuni-project/uyuni/pull/2604#pullrequestreview-488656849", "createdAt": "2020-09-15T13:02:02Z", "commit": {"oid": "5c7e3e4e3a4edff901ad0dfd44ed37150b88544e"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMzowMjowMlrOHSAsIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMzowMjozNFrOHSAtxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY0NzcxNA==", "bodyText": "Then maybe", "url": "https://github.com/uyuni-project/uyuni/pull/2604#discussion_r488647714", "createdAt": "2020-09-15T13:02:02Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/min_salt_formulas_advanced.feature", "diffHunk": "@@ -99,6 +99,7 @@ Feature: Use advanced features of Salt formulas\n      And I click on \"Clear values\" and confirm\n      And I click on \"Save Formula\"\n      Then I should see a \"Formula saved\" text\n+     When I refresh the pillar data\n      And the pillar data for \"testing:str\" should be \"\" on \"sle_minion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c7e3e4e3a4edff901ad0dfd44ed37150b88544e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY0ODEzMw==", "bodyText": "'\\n' to make rubocop happy", "url": "https://github.com/uyuni-project/uyuni/pull/2604#discussion_r488648133", "createdAt": "2020-09-15T13:02:34Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -547,6 +547,7 @@\n   if verb == 'be' && value == ''\n     raise \"Output has more than one line: #{output}\" unless output.split(\"\\n\").length == 1\n   elsif verb == 'be'\n+    raise \"Output value not found : #{output}\" unless output.split(\"\\n\") > 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c7e3e4e3a4edff901ad0dfd44ed37150b88544e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d1f5a2206ed3b2914d3a9dd1967aaf366bef573", "author": {"user": {"login": "srbarrios", "name": "Oscar Barrios"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9d1f5a2206ed3b2914d3a9dd1967aaf366bef573", "committedDate": "2020-09-15T13:17:51Z", "message": "QA: Refresh the pillar data before retrieve values"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5c7e3e4e3a4edff901ad0dfd44ed37150b88544e", "author": {"user": {"login": "srbarrios", "name": "Oscar Barrios"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5c7e3e4e3a4edff901ad0dfd44ed37150b88544e", "committedDate": "2020-09-15T12:20:21Z", "message": "QA: Refresh the pillar data before retrieve values"}, "afterCommit": {"oid": "9d1f5a2206ed3b2914d3a9dd1967aaf366bef573", "author": {"user": {"login": "srbarrios", "name": "Oscar Barrios"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9d1f5a2206ed3b2914d3a9dd1967aaf366bef573", "committedDate": "2020-09-15T13:17:51Z", "message": "QA: Refresh the pillar data before retrieve values"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 984, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}