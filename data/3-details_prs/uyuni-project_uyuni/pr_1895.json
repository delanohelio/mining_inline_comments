{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMTIwMjIy", "number": 1895, "title": "Show proxy info in system list", "bodyText": "What does this PR change?\nSUSE/spacewalk#5557\nGUI diff\nBefore:\nAfter:\n\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: additional icon information\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests: additional icon\n\n\n DONE\n\n\nLinks\nFixes SUSE/spacewalk#5557\nTracks # add downstream PR, if any\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-02-10T12:58:19Z", "url": "https://github.com/uyuni-project/uyuni/pull/1895", "merged": true, "mergeCommit": {"oid": "6594c3c4f17918d936ff5bf7314aca005511bcb5"}, "closed": true, "closedAt": "2020-03-02T14:47:36Z", "author": {"login": "ncounter"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIbBPUABqjMwNzc4MTM2NDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJuojsAH2gAyMzczMTIwMjIyOjllZGNiOGJlMGIzNjA0OTU1YmI0NDAxNWFhMjJjMTA5ZWIwMDA1NzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0310f26aa0b889698d5730d2b844cf675f27c385", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0310f26aa0b889698d5730d2b844cf675f27c385", "committedDate": "2020-02-10T12:56:04Z", "message": "Show proxy icon info in system list"}, "afterCommit": {"oid": "9fc0a76b5e73714be208a18d4cf35e51b3c17a39", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9fc0a76b5e73714be208a18d4cf35e51b3c17a39", "committedDate": "2020-02-27T13:05:47Z", "message": "Show proxy icon info in system list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9fc0a76b5e73714be208a18d4cf35e51b3c17a39", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9fc0a76b5e73714be208a18d4cf35e51b3c17a39", "committedDate": "2020-02-27T13:05:47Z", "message": "Show proxy icon info in system list"}, "afterCommit": {"oid": "2622c6eb57beabebdbca58f97a2fde7cac929748", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2622c6eb57beabebdbca58f97a2fde7cac929748", "committedDate": "2020-02-27T13:25:25Z", "message": "Show proxy icon info in system list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2622c6eb57beabebdbca58f97a2fde7cac929748", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2622c6eb57beabebdbca58f97a2fde7cac929748", "committedDate": "2020-02-27T13:25:25Z", "message": "Show proxy icon info in system list"}, "afterCommit": {"oid": "6f2a0592fcb076d89f545997f3be2b61552d566d", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6f2a0592fcb076d89f545997f3be2b61552d566d", "committedDate": "2020-02-27T13:29:35Z", "message": "Show proxy icon info in system list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f2a0592fcb076d89f545997f3be2b61552d566d", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6f2a0592fcb076d89f545997f3be2b61552d566d", "committedDate": "2020-02-27T13:29:35Z", "message": "Show proxy icon info in system list"}, "afterCommit": {"oid": "3074ab81c33f4031acb19ea37619d3f6507b8310", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3074ab81c33f4031acb19ea37619d3f6507b8310", "committedDate": "2020-02-27T13:59:06Z", "message": "Add proxy flag to the rhnServerOverview database view and fetch it"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3074ab81c33f4031acb19ea37619d3f6507b8310", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3074ab81c33f4031acb19ea37619d3f6507b8310", "committedDate": "2020-02-27T13:59:06Z", "message": "Add proxy flag to the rhnServerOverview database view and fetch it"}, "afterCommit": {"oid": "1e7fd6f075bde7318ecd95e0a6abd5e94d171dc2", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1e7fd6f075bde7318ecd95e0a6abd5e94d171dc2", "committedDate": "2020-02-27T14:16:43Z", "message": "Add proxy flag to the rhnServerOverview database view and fetch it"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1e7fd6f075bde7318ecd95e0a6abd5e94d171dc2", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1e7fd6f075bde7318ecd95e0a6abd5e94d171dc2", "committedDate": "2020-02-27T14:16:43Z", "message": "Add proxy flag to the rhnServerOverview database view and fetch it"}, "afterCommit": {"oid": "626bc692eb73ca1c234351af2d1e49e64de19f23", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/626bc692eb73ca1c234351af2d1e49e64de19f23", "committedDate": "2020-02-27T14:23:29Z", "message": "Add proxy flag to the rhnServerOverview database view and fetch it"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "626bc692eb73ca1c234351af2d1e49e64de19f23", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/626bc692eb73ca1c234351af2d1e49e64de19f23", "committedDate": "2020-02-27T14:23:29Z", "message": "Add proxy flag to the rhnServerOverview database view and fetch it"}, "afterCommit": {"oid": "38f691bd323808910d592b5af8ed6096bfd42994", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/38f691bd323808910d592b5af8ed6096bfd42994", "committedDate": "2020-02-27T16:14:22Z", "message": "Add proxy flag to the rhnServerOverview database view and fetch it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ef9c7ca948fbf7855978d09f902768a442085cc", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1ef9c7ca948fbf7855978d09f902768a442085cc", "committedDate": "2020-03-02T09:37:02Z", "message": "Fix indentation to improve readability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24d08d5f7c15c1d8f77b4f4ec494ccef03aaf6e5", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/24d08d5f7c15c1d8f77b4f4ec494ccef03aaf6e5", "committedDate": "2020-03-02T09:37:07Z", "message": "Show proxy icon info in system list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "631f3b2459426a7a0e8c6662017315df59dc89e0", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/631f3b2459426a7a0e8c6662017315df59dc89e0", "committedDate": "2020-03-02T09:29:29Z", "message": "Changelog"}, "afterCommit": {"oid": "3103d502450be0fca0a845dffebb45171c8c7284", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3103d502450be0fca0a845dffebb45171c8c7284", "committedDate": "2020-03-02T09:37:33Z", "message": "Changelog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3103d502450be0fca0a845dffebb45171c8c7284", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3103d502450be0fca0a845dffebb45171c8c7284", "committedDate": "2020-03-02T09:37:33Z", "message": "Changelog"}, "afterCommit": {"oid": "779766a8df0225ee263d7a54064d70f430a345f4", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/779766a8df0225ee263d7a54064d70f430a345f4", "committedDate": "2020-03-02T10:28:30Z", "message": "Add proper icon title text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ab09988c5f7d72307accf9bab2713ad40e59e7d", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9ab09988c5f7d72307accf9bab2713ad40e59e7d", "committedDate": "2020-03-02T10:42:29Z", "message": "Add proxy flag to the rhnServerOverview database view and fetch it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d2235eb9de057a17541de7b1b630ef1ebc13301", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0d2235eb9de057a17541de7b1b630ef1ebc13301", "committedDate": "2020-03-02T10:42:30Z", "message": "Add proper icon title text"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "779766a8df0225ee263d7a54064d70f430a345f4", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/779766a8df0225ee263d7a54064d70f430a345f4", "committedDate": "2020-03-02T10:28:30Z", "message": "Add proper icon title text"}, "afterCommit": {"oid": "0d2235eb9de057a17541de7b1b630ef1ebc13301", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0d2235eb9de057a17541de7b1b630ef1ebc13301", "committedDate": "2020-03-02T10:42:30Z", "message": "Add proper icon title text"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTM2NTU2", "url": "https://github.com/uyuni-project/uyuni/pull/1895#pullrequestreview-367136556", "createdAt": "2020-03-02T11:43:16Z", "commit": {"oid": "9ab09988c5f7d72307accf9bab2713ad40e59e7d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo0MzoxNlrOFwcoMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo0MzoxNlrOFwcoMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM0NTAwOQ==", "bodyText": "I think you need to use coalesce here as well. In case it is not a proxy you would get \"NULL\".\nAs far as I can see, the jsp did not work wil NULL value here. Or did you test it?\nDo you really need the ID, or just a \"yes/no\". As you use this value with PROXY_ID AS IS_RHN_PROXY\nit sounds like 1/0 would be enough.", "url": "https://github.com/uyuni-project/uyuni/pull/1895#discussion_r386345009", "createdAt": "2020-03-02T11:43:16Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/common/views/rhnServerOverview.sql", "diffHunk": "@@ -109,7 +110,8 @@ select\n     os,\n     release,\n     ( select name from rhnServerArch where id = s.server_arch_id),\n-    coalesce((select 1 from rhnServerLock SL WHERE SL.server_id = S.id), 0)\n+    coalesce((select 1 from rhnServerLock SL WHERE SL.server_id = S.id), 0),\n+    ( select pxy.server_Id from rhnProxyInfo pxy where pxy.server_id = S.id)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ab09988c5f7d72307accf9bab2713ad40e59e7d"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTM4NDEy", "url": "https://github.com/uyuni-project/uyuni/pull/1895#pullrequestreview-367138412", "createdAt": "2020-03-02T11:46:36Z", "commit": {"oid": "24d08d5f7c15c1d8f77b4f4ec494ccef03aaf6e5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo0NjozN1rOFwctrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo0NjozN1rOFwctrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM0NjQxNQ==", "bodyText": "Not sure if this works when current.rhnProxy is empty. Have you tested it?", "url": "https://github.com/uyuni-project/uyuni/pull/1895#discussion_r386346415", "createdAt": "2020-03-02T11:46:37Z", "author": {"login": "mcalmer"}, "path": "java/code/webapp/WEB-INF/pages/common/fragments/systems/system_list_fragment.jspf", "diffHunk": "@@ -14,6 +15,10 @@\n   </c:otherwise>\n </c:choose>\n \n+<c:if test=\"${current.rhnProxy}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24d08d5f7c15c1d8f77b4f4ec494ccef03aaf6e5"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MjI3NjM2", "url": "https://github.com/uyuni-project/uyuni/pull/1895#pullrequestreview-367227636", "createdAt": "2020-03-02T14:13:29Z", "commit": {"oid": "0d2235eb9de057a17541de7b1b630ef1ebc13301"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MjMwMzAy", "url": "https://github.com/uyuni-project/uyuni/pull/1895#pullrequestreview-367230302", "createdAt": "2020-03-02T14:17:16Z", "commit": {"oid": "0d2235eb9de057a17541de7b1b630ef1ebc13301"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNDoxNzoxNlrOFwhCgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxNDoxNzoxNlrOFwhCgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQxNzI4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            drop view rhnServerOverview;\n          \n          \n            \n            drop view if exists rhnServerOverview;", "url": "https://github.com/uyuni-project/uyuni/pull/1895#discussion_r386417281", "createdAt": "2020-03-02T14:17:16Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/upgrade/susemanager-schema-4.1.3-to-susemanager-schema-4.1.4/005-rhnServerOverview.sql", "diffHunk": "@@ -0,0 +1,101 @@\n+drop view rhnServerOverview;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d2235eb9de057a17541de7b1b630ef1ebc13301"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9edcb8be0b3604955bb44015aa22c109eb000570", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9edcb8be0b3604955bb44015aa22c109eb000570", "committedDate": "2020-03-02T14:31:20Z", "message": "Fix rhnServerOverview migration\n\nCo-Authored-By: Michael Calmer <Michael.Calmer@suse.de>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1646, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}