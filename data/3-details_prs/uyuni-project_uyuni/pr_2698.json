{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MzEwNTIx", "number": 2698, "title": "enable redfish by default", "bodyText": "What does this PR change?\nEnable Redfish power management by default\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nDocumentation issue was created: SUSE/spacewalk#12767\n\n\n DONE\n\n\nTest coverage\n\n\nCucumber tests were added\n\n\n DONE\n\n\nLinks\nFixes SUSE/spacewalk#9866\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-10-07T14:52:06Z", "url": "https://github.com/uyuni-project/uyuni/pull/2698", "merged": true, "mergeCommit": {"oid": "1657deb123f6c719405238a4571ed0f91874f104"}, "closed": true, "closedAt": "2020-10-15T07:39:17Z", "author": {"login": "mcalmer"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdRylXigBqjM4NjYyNTQwNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSswQMABqjM4ODAwMjg2MTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c37ce3c5e9e0e0e19138b84a646b2f06842c1a66", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c37ce3c5e9e0e0e19138b84a646b2f06842c1a66", "committedDate": "2020-10-07T14:51:18Z", "message": "enable redfish by default"}, "afterCommit": {"oid": "dfba436d5f5f7077631f9da1d5d17167ee1921cd", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/dfba436d5f5f7077631f9da1d5d17167ee1921cd", "committedDate": "2020-10-12T11:49:47Z", "message": "enable redfish by default"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc8a1d5d58656c6c092399ad0b6691e91ddb1773", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/dc8a1d5d58656c6c092399ad0b6691e91ddb1773", "committedDate": "2020-10-13T11:23:45Z", "message": "fix 9"}, "afterCommit": {"oid": "1bd62e2e602a4f96462cd19ea025161d7763b74e", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1bd62e2e602a4f96462cd19ea025161d7763b74e", "committedDate": "2020-10-13T12:04:40Z", "message": "update changelog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "07414c8e8a8381ddfc4dbcc55c4fbe6dc5228c83", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/07414c8e8a8381ddfc4dbcc55c4fbe6dc5228c83", "committedDate": "2020-10-13T13:14:56Z", "message": "provide Redfish-Mockup-Server from our git"}, "afterCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9f9bd28d36c8d648f8be995342768b2bb6c1a74c", "committedDate": "2020-10-13T13:33:02Z", "message": "provide Redfish-Mockup-Server from our git"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTI2NTg0", "url": "https://github.com/uyuni-project/uyuni/pull/2698#pullrequestreview-507526584", "createdAt": "2020-10-13T14:54:51Z", "commit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNDo1NDo1MVrOHgq8RQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTowMTowNVrOHgrQKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMDAzNw==", "bodyText": "Add \"Redfish\" word", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504020037", "createdAt": "2020-10-13T14:54:51Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMDMzNA==", "bodyText": "Or \"when\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504020334", "createdAt": "2020-10-13T14:55:11Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMDYyMA==", "bodyText": "\"When\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504020620", "createdAt": "2020-10-13T14:55:27Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMDc0MA==", "bodyText": "\"And\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504020740", "createdAt": "2020-10-13T14:55:37Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMDg3MA==", "bodyText": "\"should contain\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504020870", "createdAt": "2020-10-13T14:55:48Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTAxOQ==", "bodyText": "\"When\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504021019", "createdAt": "2020-10-13T14:55:59Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTIxMg==", "bodyText": "\"And\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504021212", "createdAt": "2020-10-13T14:56:14Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTM4Ng==", "bodyText": "\"Then\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504021386", "createdAt": "2020-10-13T14:56:26Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"\n+    And I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    And I click on \"Power Off\"\n+    And I should see a \"system has been powered off\" text\n+    And I wait for \"20\" seconds\n+    And I should see the power is \"Unknown\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTUwNg==", "bodyText": "\"When\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504021506", "createdAt": "2020-10-13T14:56:34Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"\n+    And I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    And I click on \"Power Off\"\n+    And I should see a \"system has been powered off\" text\n+    And I wait for \"20\" seconds\n+    And I should see the power is \"Unknown\"\n+    Then I click on \"Get status\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTYxNw==", "bodyText": "\"Then\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504021617", "createdAt": "2020-10-13T14:56:43Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"\n+    And I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    And I click on \"Power Off\"\n+    And I should see a \"system has been powered off\" text\n+    And I wait for \"20\" seconds\n+    And I should see the power is \"Unknown\"\n+    Then I click on \"Get status\"\n+    And I should see the power is \"Off\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTc0Ng==", "bodyText": "\"When\", etc", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504021746", "createdAt": "2020-10-13T14:56:53Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"\n+    And I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    And I click on \"Power Off\"\n+    And I should see a \"system has been powered off\" text\n+    And I wait for \"20\" seconds\n+    And I should see the power is \"Unknown\"\n+    Then I click on \"Get status\"\n+    And I should see the power is \"Off\"\n+    Then I click on \"Power On\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTkzMw==", "bodyText": "\"When\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504021933", "createdAt": "2020-10-13T14:57:07Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"\n+    And I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    And I click on \"Power Off\"\n+    And I should see a \"system has been powered off\" text\n+    And I wait for \"20\" seconds\n+    And I should see the power is \"Unknown\"\n+    Then I click on \"Get status\"\n+    And I should see the power is \"Off\"\n+    Then I click on \"Power On\"\n+    And I should see a \"system has been powered on\" text\n+    Then I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    Then I click on \"Reboot\"\n+    And I should see a \"system has been rebooted\" text\n+    Then I click on \"Get status\"\n+    And I should see the power is \"On\"\n+\n+  Scenario: Check power management SSM configuration for Redfish\n+    Given I am authorized\n+    And I am on the System Overview page\n+    And I check the \"sle_minion\" client", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMjI0MQ==", "bodyText": "\"When\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504022241", "createdAt": "2020-10-13T14:57:29Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"\n+    And I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    And I click on \"Power Off\"\n+    And I should see a \"system has been powered off\" text\n+    And I wait for \"20\" seconds\n+    And I should see the power is \"Unknown\"\n+    Then I click on \"Get status\"\n+    And I should see the power is \"Off\"\n+    Then I click on \"Power On\"\n+    And I should see a \"system has been powered on\" text\n+    Then I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    Then I click on \"Reboot\"\n+    And I should see a \"system has been rebooted\" text\n+    Then I click on \"Get status\"\n+    And I should see the power is \"On\"\n+\n+  Scenario: Check power management SSM configuration for Redfish\n+    Given I am authorized\n+    And I am on the System Overview page\n+    And I check the \"sle_minion\" client\n+    And I am on System Set Manager Overview\n+    And I follow \"Configure power management\" in the content area\n+    Then I should see \"sle_minion\" as link\n+    And I should see a \"Change Power Management Configuration\" text\n+    And I should see a \"Type\" text\n+    And I should see a \"Network address\" text\n+    And I should see a \"Username\" text\n+    And I should see a \"Password\" text\n+    And I should see a \"System identifier\" text\n+    And I should see a \"Update\" button\n+    When I enter \"testing\" as \"powerUsername\"\n+    And I enter \"qwertz\" as \"powerPassword\"\n+    And I click on \"Update\"\n+    Then I should see a \"Configuration successfully saved for 1 system(s)\" text\n+    And the cobbler report contains \"Power Management Username      : testing\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : qwertz\" for system \"sle_minion\"\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Check power management SSM operation for Redfish\n+    Given I am authorized\n+    And I am on System Set Manager Overview\n+    And I follow \"power management operations\" in the content area", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMjQwMw==", "bodyText": "\"When\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504022403", "createdAt": "2020-10-13T14:57:41Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"\n+    And I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    And I click on \"Power Off\"\n+    And I should see a \"system has been powered off\" text\n+    And I wait for \"20\" seconds\n+    And I should see the power is \"Unknown\"\n+    Then I click on \"Get status\"\n+    And I should see the power is \"Off\"\n+    Then I click on \"Power On\"\n+    And I should see a \"system has been powered on\" text\n+    Then I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    Then I click on \"Reboot\"\n+    And I should see a \"system has been rebooted\" text\n+    Then I click on \"Get status\"\n+    And I should see the power is \"On\"\n+\n+  Scenario: Check power management SSM configuration for Redfish\n+    Given I am authorized\n+    And I am on the System Overview page\n+    And I check the \"sle_minion\" client\n+    And I am on System Set Manager Overview\n+    And I follow \"Configure power management\" in the content area\n+    Then I should see \"sle_minion\" as link\n+    And I should see a \"Change Power Management Configuration\" text\n+    And I should see a \"Type\" text\n+    And I should see a \"Network address\" text\n+    And I should see a \"Username\" text\n+    And I should see a \"Password\" text\n+    And I should see a \"System identifier\" text\n+    And I should see a \"Update\" button\n+    When I enter \"testing\" as \"powerUsername\"\n+    And I enter \"qwertz\" as \"powerPassword\"\n+    And I click on \"Update\"\n+    Then I should see a \"Configuration successfully saved for 1 system(s)\" text\n+    And the cobbler report contains \"Power Management Username      : testing\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : qwertz\" for system \"sle_minion\"\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Check power management SSM operation for Redfish\n+    Given I am authorized\n+    And I am on System Set Manager Overview\n+    And I follow \"power management operations\" in the content area\n+    Then I should see \"sle_minion\" as link\n+    And I should see a \"Power On\" button\n+    And I should see a \"Power Off\" button\n+    And I should see a \"Reboot\" button\n+\n+  Scenario: Cleanup: reset Redfish values\n+    Given I am logged in via XML-RPC powermgmt as user \"admin\" and password \"admin\"\n+    And I want to operate on this \"sle_minion\"\n+    Then I set power management value \"\" for \"powerAddress\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMjYxMw==", "bodyText": "\"Then\", \"should\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504022613", "createdAt": "2020-10-13T14:57:57Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"\n+    And I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    And I click on \"Power Off\"\n+    And I should see a \"system has been powered off\" text\n+    And I wait for \"20\" seconds\n+    And I should see the power is \"Unknown\"\n+    Then I click on \"Get status\"\n+    And I should see the power is \"Off\"\n+    Then I click on \"Power On\"\n+    And I should see a \"system has been powered on\" text\n+    Then I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    Then I click on \"Reboot\"\n+    And I should see a \"system has been rebooted\" text\n+    Then I click on \"Get status\"\n+    And I should see the power is \"On\"\n+\n+  Scenario: Check power management SSM configuration for Redfish\n+    Given I am authorized\n+    And I am on the System Overview page\n+    And I check the \"sle_minion\" client\n+    And I am on System Set Manager Overview\n+    And I follow \"Configure power management\" in the content area\n+    Then I should see \"sle_minion\" as link\n+    And I should see a \"Change Power Management Configuration\" text\n+    And I should see a \"Type\" text\n+    And I should see a \"Network address\" text\n+    And I should see a \"Username\" text\n+    And I should see a \"Password\" text\n+    And I should see a \"System identifier\" text\n+    And I should see a \"Update\" button\n+    When I enter \"testing\" as \"powerUsername\"\n+    And I enter \"qwertz\" as \"powerPassword\"\n+    And I click on \"Update\"\n+    Then I should see a \"Configuration successfully saved for 1 system(s)\" text\n+    And the cobbler report contains \"Power Management Username      : testing\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : qwertz\" for system \"sle_minion\"\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Check power management SSM operation for Redfish\n+    Given I am authorized\n+    And I am on System Set Manager Overview\n+    And I follow \"power management operations\" in the content area\n+    Then I should see \"sle_minion\" as link\n+    And I should see a \"Power On\" button\n+    And I should see a \"Power Off\" button\n+    And I should see a \"Reboot\" button\n+\n+  Scenario: Cleanup: reset Redfish values\n+    Given I am logged in via XML-RPC powermgmt as user \"admin\" and password \"admin\"\n+    And I want to operate on this \"sle_minion\"\n+    Then I set power management value \"\" for \"powerAddress\"\n+    And I set power management value \"\" for \"powerUsername\"\n+    And I set power management value \"\" for \"powerPassword\"\n+    And I set power management value \"ipmitool\" for \"powerType\"\n+    And the cobbler report contains \"Power Management Address       :\" for system \"sle_minion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMjc2Mw==", "bodyText": "or \"When\"", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504022763", "createdAt": "2020-10-13T14:58:09Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"\n+    And I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    And I click on \"Power Off\"\n+    And I should see a \"system has been powered off\" text\n+    And I wait for \"20\" seconds\n+    And I should see the power is \"Unknown\"\n+    Then I click on \"Get status\"\n+    And I should see the power is \"Off\"\n+    Then I click on \"Power On\"\n+    And I should see a \"system has been powered on\" text\n+    Then I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    Then I click on \"Reboot\"\n+    And I should see a \"system has been rebooted\" text\n+    Then I click on \"Get status\"\n+    And I should see the power is \"On\"\n+\n+  Scenario: Check power management SSM configuration for Redfish\n+    Given I am authorized\n+    And I am on the System Overview page\n+    And I check the \"sle_minion\" client\n+    And I am on System Set Manager Overview\n+    And I follow \"Configure power management\" in the content area\n+    Then I should see \"sle_minion\" as link\n+    And I should see a \"Change Power Management Configuration\" text\n+    And I should see a \"Type\" text\n+    And I should see a \"Network address\" text\n+    And I should see a \"Username\" text\n+    And I should see a \"Password\" text\n+    And I should see a \"System identifier\" text\n+    And I should see a \"Update\" button\n+    When I enter \"testing\" as \"powerUsername\"\n+    And I enter \"qwertz\" as \"powerPassword\"\n+    And I click on \"Update\"\n+    Then I should see a \"Configuration successfully saved for 1 system(s)\" text\n+    And the cobbler report contains \"Power Management Username      : testing\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : qwertz\" for system \"sle_minion\"\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Check power management SSM operation for Redfish\n+    Given I am authorized\n+    And I am on System Set Manager Overview\n+    And I follow \"power management operations\" in the content area\n+    Then I should see \"sle_minion\" as link\n+    And I should see a \"Power On\" button\n+    And I should see a \"Power Off\" button\n+    And I should see a \"Reboot\" button\n+\n+  Scenario: Cleanup: reset Redfish values\n+    Given I am logged in via XML-RPC powermgmt as user \"admin\" and password \"admin\"\n+    And I want to operate on this \"sle_minion\"\n+    Then I set power management value \"\" for \"powerAddress\"\n+    And I set power management value \"\" for \"powerUsername\"\n+    And I set power management value \"\" for \"powerPassword\"\n+    And I set power management value \"ipmitool\" for \"powerType\"\n+    And the cobbler report contains \"Power Management Address       :\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      :\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      :\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : ipmitool\" for system \"sle_minion\"\n+\n+  Scenario: Cleanup: don't fake a Redfish host\n+    Given the server stops mocking a Redfish host", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyNDA4NA==", "bodyText": "Excellent :-) directly from the standards\nOnly problem is it will fail if we have no external network at this point in time. But I still like it more than copying it to our git.", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504024084", "createdAt": "2020-10-13T14:59:46Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -445,6 +445,25 @@\n   $server.run(\"kill $(pidof -x fake_ipmi_host.sh)\")\n end\n \n+When(/^the server starts mocking a Redfish host$/) do\n+  $server.run(\"mkdir -p /root/Redfish-Mockup-Server/\")\n+  [\"redfishMockupServer.py\", \"rfSsdpServer.py\"].each do |file|\n+    source = File.dirname(__FILE__) + '/../upload_files/Redfish-Mockup-Server/' + file\n+    dest = \"/root/Redfish-Mockup-Server/\" + file\n+    return_code = file_inject($server, source, dest)\n+    raise 'File injection failed' unless return_code.zero?\n+  end\n+  $server.run(\"curl --output DSP2043_2019.1.zip https://www.dmtf.org/sites/default/files/standards/documents/DSP2043_2019.1.zip\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyNDc2Mw==", "bodyText": "I would even put one parameter per line, I'm not a big fan of very long lines", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504024763", "createdAt": "2020-10-13T15:00:37Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -445,6 +445,25 @@\n   $server.run(\"kill $(pidof -x fake_ipmi_host.sh)\")\n end\n \n+When(/^the server starts mocking a Redfish host$/) do\n+  $server.run(\"mkdir -p /root/Redfish-Mockup-Server/\")\n+  [\"redfishMockupServer.py\", \"rfSsdpServer.py\"].each do |file|\n+    source = File.dirname(__FILE__) + '/../upload_files/Redfish-Mockup-Server/' + file\n+    dest = \"/root/Redfish-Mockup-Server/\" + file\n+    return_code = file_inject($server, source, dest)\n+    raise 'File injection failed' unless return_code.zero?\n+  end\n+  $server.run(\"curl --output DSP2043_2019.1.zip https://www.dmtf.org/sites/default/files/standards/documents/DSP2043_2019.1.zip\")\n+  $server.run(\"unzip DSP2043_2019.1.zip\")\n+  cmd = \"/usr/bin/python3 /root/Redfish-Mockup-Server/redfishMockupServer.py -H #{$server.full_hostname} -p 8443 -S \" \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyNDk4MA==", "bodyText": "should", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504024980", "createdAt": "2020-10-13T15:00:54Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -474,7 +493,13 @@\n   node.run('rm /tmp/test_user_defined_state')\n end\n \n-Then(/^the cobbler report contains \"([^\"]*)\" for system \"([^\"]*)\"$/) do |arg1, system|\n+Then(/^the cobbler report contains \"([^\"]*)\" for system \"([^\"]*)\"$/) do |arg1, host|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyNTEyOA==", "bodyText": "should", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504025128", "createdAt": "2020-10-13T15:01:05Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -474,7 +493,13 @@\n   node.run('rm /tmp/test_user_defined_state')\n end\n \n-Then(/^the cobbler report contains \"([^\"]*)\" for system \"([^\"]*)\"$/) do |arg1, system|\n+Then(/^the cobbler report contains \"([^\"]*)\" for system \"([^\"]*)\"$/) do |arg1, host|\n+  node = get_target(host)\n+  output = sshcmd(\"cobbler system report --name #{node.full_hostname}:1\", ignore_err: true)[:stdout]\n+  raise \"Not found: #{output}\" unless output.include?(arg1)\n+end\n+\n+Then(/^the cobbler report contains \"([^\"]*)\" for cobbler system \"([^\"]*)\"$/) do |arg1, system|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTY4MjQy", "url": "https://github.com/uyuni-project/uyuni/pull/2698#pullrequestreview-507568242", "createdAt": "2020-10-13T15:32:13Z", "commit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTozMjoxM1rOHgs0qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTozMjoxM1rOHgs0qQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA1MDg1Nw==", "bodyText": "I prefer single quotes if we don't have something that needs to be escaped.\nIt applies to different places of these lines.", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504050857", "createdAt": "2020-10-13T15:32:13Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -445,6 +445,25 @@\n   $server.run(\"kill $(pidof -x fake_ipmi_host.sh)\")\n end\n \n+When(/^the server starts mocking a Redfish host$/) do\n+  $server.run(\"mkdir -p /root/Redfish-Mockup-Server/\")\n+  [\"redfishMockupServer.py\", \"rfSsdpServer.py\"].each do |file|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTczNzE3", "url": "https://github.com/uyuni-project/uyuni/pull/2698#pullrequestreview-507573717", "createdAt": "2020-10-13T15:37:38Z", "commit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTozNzozOFrOHgtFmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTozNzozOFrOHgtFmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA1NTE5NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              raise \"Not found: #{output}\" unless output.include?(arg1)\n          \n          \n            \n              raise \"Not found:\\n#{output}\" unless output.include?(arg1)", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504055194", "createdAt": "2020-10-13T15:37:38Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -474,7 +493,13 @@\n   node.run('rm /tmp/test_user_defined_state')\n end\n \n-Then(/^the cobbler report contains \"([^\"]*)\" for system \"([^\"]*)\"$/) do |arg1, system|\n+Then(/^the cobbler report contains \"([^\"]*)\" for system \"([^\"]*)\"$/) do |arg1, host|\n+  node = get_target(host)\n+  output = sshcmd(\"cobbler system report --name #{node.full_hostname}:1\", ignore_err: true)[:stdout]\n+  raise \"Not found: #{output}\" unless output.include?(arg1)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTc0NzMz", "url": "https://github.com/uyuni-project/uyuni/pull/2698#pullrequestreview-507574733", "createdAt": "2020-10-13T15:38:43Z", "commit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTozODo0M1rOHgtIjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTozODo0M1rOHgtIjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA1NTk1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Then(/^the cobbler report contains \"([^\"]*)\" for system \"([^\"]*)\"$/) do |arg1, host|\n          \n          \n            \n            Then(/^the cobbler report contains \"([^\"]*)\" for system \"([^\"]*)\"$/) do |text, system|", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504055950", "createdAt": "2020-10-13T15:38:43Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -474,7 +493,13 @@\n   node.run('rm /tmp/test_user_defined_state')\n end\n \n-Then(/^the cobbler report contains \"([^\"]*)\" for system \"([^\"]*)\"$/) do |arg1, system|\n+Then(/^the cobbler report contains \"([^\"]*)\" for system \"([^\"]*)\"$/) do |arg1, host|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTc2NzQz", "url": "https://github.com/uyuni-project/uyuni/pull/2698#pullrequestreview-507576743", "createdAt": "2020-10-13T15:40:51Z", "commit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTo0MDo1MVrOHgtOoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTo0MDo1MVrOHgtOoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA1NzUwNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When(/^I enter \"([^\"]*)\" as the redfish server address$/) do |host|\n          \n          \n            \n            When(/^I enter the server hostname as the redfish server address$/) do", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504057505", "createdAt": "2020-10-13T15:40:51Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/navigation_steps.rb", "diffHunk": "@@ -950,3 +950,8 @@\n When(/^I select the next maintenance window$/) do\n   find(:xpath, \"//select[@id='maintenance-window-select']/option\", match: :first).select_option\n end\n+\n+When(/^I enter \"([^\"]*)\" as the redfish server address$/) do |host|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTgwMTcx", "url": "https://github.com/uyuni-project/uyuni/pull/2698#pullrequestreview-507580171", "createdAt": "2020-10-13T15:44:18Z", "commit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTo0NDoxOFrOHgtYvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTo0NDoxOFrOHgtYvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA2MDA5Mg==", "bodyText": "I would just hide the point that we are moking it, in our Gherkin scenarios.\nThe implementation we make behind the scenarios shouldn't be important at the test description level.\nIt should just be part of the tets framework, but not part of the step definitions or Scenario description.", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504060092", "createdAt": "2020-10-13T15:44:18Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTg0MTk1", "url": "https://github.com/uyuni-project/uyuni/pull/2698#pullrequestreview-507584195", "createdAt": "2020-10-13T15:48:24Z", "commit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTo0ODoyNVrOHgtklw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNTo0ODoyNVrOHgtklw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA2MzEyNw==", "bodyText": "Please just add a timeout of 20 seconds inside the step definition of I should see the power is \"Unknown\", so we can get rid of steps like I wait for x seconds", "url": "https://github.com/uyuni-project/uyuni/pull/2698#discussion_r504063127", "createdAt": "2020-10-13T15:48:25Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/srv_power_management_redfish.feature", "diffHunk": "@@ -0,0 +1,95 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Power management\n+\n+  Scenario: Fake a Redfish host\n+    Given the server starts mocking a Redfish host\n+\n+  Scenario: Save power management values for Redfish\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    When I enter \"server\" as the redfish server address\n+    And I enter \"ipmiusr\" as \"powerUsername\"\n+    And I enter \"test\" as \"powerPassword\"\n+    And I select \"Redfish\" from \"powerType\"\n+    And I click on \"Save\"\n+    Then I should see a \"Power settings saved\" text\n+    And the cobbler report contains \":8443\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Username      : ipmiusr\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Password      : test\" for system \"sle_minion\"\n+    And the cobbler report contains \"Power Management Type          : redfish\" for system \"sle_minion\"\n+\n+  Scenario: Test Redfish functions\n+    Given I am on the Systems overview page of this \"sle_minion\"\n+    And I follow \"Provisioning\" in the content area\n+    And I follow \"Power Management\" in the content area\n+    Then I click on \"Power On\"\n+    And I click on \"Get status\"\n+    And I should see the power is \"On\"\n+    And I click on \"Power Off\"\n+    And I should see a \"system has been powered off\" text\n+    And I wait for \"20\" seconds\n+    And I should see the power is \"Unknown\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9f9bd28d36c8d648f8be995342768b2bb6c1a74c", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9f9bd28d36c8d648f8be995342768b2bb6c1a74c", "committedDate": "2020-10-13T13:33:02Z", "message": "provide Redfish-Mockup-Server from our git"}, "afterCommit": {"oid": "448a02d52cce8017f946599dc055fff7c6e3e2bd", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/448a02d52cce8017f946599dc055fff7c6e3e2bd", "committedDate": "2020-10-14T08:33:26Z", "message": "provide Redfish-Mockup-Server from our git"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69ba18ad1f92e9d356d7b4636223d503497e09c1", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/69ba18ad1f92e9d356d7b4636223d503497e09c1", "committedDate": "2020-10-14T11:51:20Z", "message": "refactor 3"}, "afterCommit": {"oid": "fa5cef6fa24c06ff5329945b77837edd2b706569", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fa5cef6fa24c06ff5329945b77837edd2b706569", "committedDate": "2020-10-14T12:20:12Z", "message": "Clear SSM before working with it"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MzA1MDM3", "url": "https://github.com/uyuni-project/uyuni/pull/2698#pullrequestreview-508305037", "createdAt": "2020-10-14T12:45:27Z", "commit": {"oid": "fa5cef6fa24c06ff5329945b77837edd2b706569"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MDg5OTkw", "url": "https://github.com/uyuni-project/uyuni/pull/2698#pullrequestreview-509089990", "createdAt": "2020-10-15T07:27:39Z", "commit": {"oid": "fa5cef6fa24c06ff5329945b77837edd2b706569"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98dd1d91a4849fb42fffc220b0f8004cb3ca85ef", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/98dd1d91a4849fb42fffc220b0f8004cb3ca85ef", "committedDate": "2020-10-15T07:33:46Z", "message": "enable redfish by default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59f3873616728ca93c4ca951e8a651a394a9ab56", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/59f3873616728ca93c4ca951e8a651a394a9ab56", "committedDate": "2020-10-15T07:33:47Z", "message": "cucumber tests for redfish power management"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d3e594073993515b2674671af2abd38cd4247e3", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1d3e594073993515b2674671af2abd38cd4247e3", "committedDate": "2020-10-15T07:33:47Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "708390bfe767ab2ef7ca05312a548075bbd5cadd", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/708390bfe767ab2ef7ca05312a548075bbd5cadd", "committedDate": "2020-10-15T07:33:47Z", "message": "copy Redfish-Mockup-Server to our git\n\nhttps://github.com/DMTF/Redfish-Mockup-Server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a708f91bf199d952cd8583ff796b36526f82d5a", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7a708f91bf199d952cd8583ff796b36526f82d5a", "committedDate": "2020-10-15T07:33:47Z", "message": "make python grequests optional\n\nnot needed for our usecase and we can save a lot of dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d22fee0fbd78b36e2d7bfefa4fafda25e6c2a62", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4d22fee0fbd78b36e2d7bfefa4fafda25e6c2a62", "committedDate": "2020-10-15T07:33:47Z", "message": "provide Redfish-Mockup-Server from our git"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ea6680f625da33e2ba216d1bee7f12006ff8061", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4ea6680f625da33e2ba216d1bee7f12006ff8061", "committedDate": "2020-10-15T07:33:47Z", "message": "refactor test descriptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4551fef5c5f4fc75765bb4abb9a3bac43c04f4a4", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4551fef5c5f4fc75765bb4abb9a3bac43c04f4a4", "committedDate": "2020-10-15T07:33:47Z", "message": "Clear SSM before working with it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6c872c23fbb50de559a0c84e7546834d32ec499", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d6c872c23fbb50de559a0c84e7546834d32ec499", "committedDate": "2020-10-15T07:35:10Z", "message": "fix broken VAR name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa5cef6fa24c06ff5329945b77837edd2b706569", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fa5cef6fa24c06ff5329945b77837edd2b706569", "committedDate": "2020-10-14T12:20:12Z", "message": "Clear SSM before working with it"}, "afterCommit": {"oid": "d6c872c23fbb50de559a0c84e7546834d32ec499", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d6c872c23fbb50de559a0c84e7546834d32ec499", "committedDate": "2020-10-15T07:35:10Z", "message": "fix broken VAR name"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1043, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}