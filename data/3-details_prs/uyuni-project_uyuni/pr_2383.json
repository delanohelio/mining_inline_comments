{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzMzAxNDEz", "number": 2383, "title": "Products page improvement", "bodyText": "What does this PR change?\n2 fixes and 1 improvement. See the commit messages for further info (they are\npretty detailed).\nI suggest reviewing \"commit-by-commit\".\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: bugfixes + minor changes\n\n\n DONE\n\n\nTest coverage\n\nNo tests: ui code\n DONE\n\nLinks\nTracks SUSE/spacewalk#11837\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-07-02T06:20:45Z", "url": "https://github.com/uyuni-project/uyuni/pull/2383", "merged": true, "mergeCommit": {"oid": "270182aeb3d5025cb2b85be32799a3876b7f9213"}, "closed": true, "closedAt": "2020-07-15T08:30:08Z", "author": {"login": "hustodemon"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcw8POjgFqTQ0MTQ5MDAyMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1GFyMgBqjM1NDczOTY2MTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNDkwMDIz", "url": "https://github.com/uyuni-project/uyuni/pull/2383#pullrequestreview-441490023", "createdAt": "2020-07-02T09:05:27Z", "commit": {"oid": "6d7c7bf4ac53f1f2d277e0912988e3668c725d75"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwOTowNToyN1rOGsEJPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQwOTowNToyN1rOGsEJPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg1ODQyOQ==", "bodyText": "I see where the problem lays, it's a bit hidden but the point is that CustomDataHandler is basically just a wrapper for the TableDataHandler component. But while the latter has properties to sort by default, the CustomDataHandler doesn't instead. And it is fine from the component shape POV because one is about to draw columns, the other is just a wrapper it does not know nothing about column keys etc.\n\ud83d\udc4d", "url": "https://github.com/uyuni-project/uyuni/pull/2383#discussion_r448858429", "createdAt": "2020-07-02T09:05:27Z", "author": {"login": "ncounter"}, "path": "web/html/src/manager/admin/setup/products/products.js", "diffHunk": "@@ -461,7 +478,7 @@ class Products extends React.Component {\n     return (\n       <div>\n         <CustomDataHandler\n-          data={this.buildRows(this.filterDataByArch(this.props.data))}\n+          data={this.buildRows(this.filterDataByArch(this.props.data).sort(this.compareProducts))}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d7c7bf4ac53f1f2d277e0912988e3668c725d75"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efdb7fcb8c4c574da4963ad1603a53b0d55ce4f2", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/efdb7fcb8c4c574da4963ad1603a53b0d55ce4f2", "committedDate": "2020-07-15T08:09:20Z", "message": "Bugfix: Fix the initial shape of data in product component\n\nPreviously, the initial value of the serverData in the component state\nwas set to an OBJECT (serverData: {_DATA_ROOT_ID : []}), but when\nreloading the data, it is set to ARRAY of objects.\n\nThis commit sets the initial value to array."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8a01be9d532b8728448f95bb80cfed31799293a", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f8a01be9d532b8728448f95bb80cfed31799293a", "committedDate": "2020-07-15T08:09:20Z", "message": "Bugfix: Sort products in correct place\n\nPreviously, we were sorting them in the child component (CheckList), but\nthat was too late, as this component does not see the full list of\nproducts (it only sees the list filtered based on the 'items per page'\nselector)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb5bfbe1e43b0daf366b46d019403fd3f421ca10", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/bb5bfbe1e43b0daf366b46d019403fd3f421ca10", "committedDate": "2020-07-15T08:09:20Z", "message": "Shift the SUSE products to the top of the products list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a700cd19119f75e5d77855b75d0bd966c64d6147", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a700cd19119f75e5d77855b75d0bd966c64d6147", "committedDate": "2020-07-15T08:09:30Z", "message": "Update changelog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58e8aa031061523e9e4aca7210d80f359f253fd1", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/58e8aa031061523e9e4aca7210d80f359f253fd1", "committedDate": "2020-07-02T10:52:28Z", "message": "Update changelog"}, "afterCommit": {"oid": "a700cd19119f75e5d77855b75d0bd966c64d6147", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a700cd19119f75e5d77855b75d0bd966c64d6147", "committedDate": "2020-07-15T08:09:30Z", "message": "Update changelog"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1207, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}