{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4NTI0NTMx", "number": 2745, "title": "Fix modular data handling for cloned channels", "bodyText": "The modular metadata (modules.yaml) is shared between cloned channels: Whenever we clone a channel, we skip cloning the metadata and instead serve it from the original when requested from clients (DownloadFile, DownloadController).\nWith this approach, the following scenario is problematic:\n\nwe sync a vendor channel A\nwe clone it into B\nnext day, the vendor channel A receives new modular metadata, so we update it\nwhen a client requests modular metadata for the clone B, it gets metadata for A\nthis is a problem since:\n\nthe new modular information doesn't need to be correct for the clone\n(and mainly) the checksum of the modules.yaml in the repomd.xml of B is not matching the new modules.yaml, thus leading to dnf errors\n\n\n\nThe fix is in 2 places:\n\nreposync: when syncing modules.yaml from a RHEL modular channel, we prepend the the checksum to the file name when saving the file on the disk (/var/spacewalk/rhn/modules). This allows co-existence of multiple modules.yaml, which can be referenced from the Uyuni channels.\njava code:\n\ncloning channel also clones the modular metadata\nCLM operations (build/promote) also keep the modular metadata in correct state\n\n\n\nReview\nCommit-by-commit (there are some todos in the intermediate commits, but these can be ignored).\nNew additions\n\n\ncleanup job\nModularDataCleanup.java is part of the cleanup-data-bunch and takes care of removing stale modules.yaml files\n\n\nfix spacewalk-manage-lifecycle\nThis tool was also broken. For promoting channels in the \"environments\", mergePackages endpoint is used. This does not align the modules. Resolved by introducing a new API endpoint with the possibility to align the repodata.\n\n\nreposync tests:\nnone added. I tried to write some, but the idea of testing the copy_metadata_file behavior didn't fit the rest of the reposync test. If test are needed, I'd need some help.\n\n\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: bugfix\n\n\n DONE\n\n\nTest coverage\n\n\nUnit tests were added\n\n\n DONE\n\n\nLinks\nSUSE/spacewalk#12718\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-10-22T19:55:21Z", "url": "https://github.com/uyuni-project/uyuni/pull/2745", "merged": true, "mergeCommit": {"oid": "fed9c22db65c077e8aa5a98cb075451b6db1a217"}, "closed": true, "closedAt": "2021-01-19T09:20:36Z", "author": {"login": "hustodemon"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVRqg2ABqjM5MTI1NTc0MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdxnwF0gBqjQyMjE1MDI4MDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80327fe163957771e53103460a0d354dff8a9654", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/80327fe163957771e53103460a0d354dff8a9654", "committedDate": "2020-10-22T19:54:43Z", "message": "wip: python"}, "afterCommit": {"oid": "a50a8c11240dc244067aa691776dd8a969fc011f", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a50a8c11240dc244067aa691776dd8a969fc011f", "committedDate": "2020-10-23T07:44:05Z", "message": "wip: python"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a50a8c11240dc244067aa691776dd8a969fc011f", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a50a8c11240dc244067aa691776dd8a969fc011f", "committedDate": "2020-10-23T07:44:05Z", "message": "wip: python"}, "afterCommit": {"oid": "affffa93da4c8489352193ced1c247fc38623b50", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/affffa93da4c8489352193ced1c247fc38623b50", "committedDate": "2020-10-23T07:48:15Z", "message": "Reposync: include the the modules.yaml checksum in the filename when reposyncing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "affffa93da4c8489352193ced1c247fc38623b50", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/affffa93da4c8489352193ced1c247fc38623b50", "committedDate": "2020-10-23T07:48:15Z", "message": "Reposync: include the the modules.yaml checksum in the filename when reposyncing"}, "afterCommit": {"oid": "c00a144640010932bb010a5912b1f2ba3df8fca0", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c00a144640010932bb010a5912b1f2ba3df8fca0", "committedDate": "2020-10-23T09:21:03Z", "message": "todo"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d75edc149360bb54b186d60d825defb09c26261b", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d75edc149360bb54b186d60d825defb09c26261b", "committedDate": "2020-10-23T09:23:32Z", "message": "Changelog"}, "afterCommit": {"oid": "99fe71b3a063733959345cd796c7d1d0c44492b7", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/99fe71b3a063733959345cd796c7d1d0c44492b7", "committedDate": "2020-10-23T10:34:25Z", "message": "Changelog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NTU4ODY1", "url": "https://github.com/uyuni-project/uyuni/pull/2745#pullrequestreview-515558865", "createdAt": "2020-10-23T10:55:35Z", "commit": {"oid": "99fe71b3a063733959345cd796c7d1d0c44492b7"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxMDo1NTozNVrOHnI7bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxMTowNDoyNVrOHnJMiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgwMjc5Nw==", "bodyText": "I would adjust the padding of the message like previous messages in this same stage of reposync\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        log(0, \"Including the checksum in the modules file name: %s\" % basename)\n          \n          \n            \n                        log(0, \"  Including the checksum in the modules file name: %s\" % basename)", "url": "https://github.com/uyuni-project/uyuni/pull/2745#discussion_r510802797", "createdAt": "2020-10-23T10:55:35Z", "author": {"login": "meaksh"}, "path": "backend/satellite_tools/reposync.py", "diffHunk": "@@ -748,6 +760,12 @@ def copy_metadata_file(self, plug, filename, comps_type, relative_dir):\n         if comps_type == 'comps' and not re.match('comps.xml(' + \"|\".join(compressed_suffixes) + ')*', basename):\n             log(0, \"  Renaming non-standard filename %s to %s.\" % (basename, 'comps' + basename[basename.find('.'):]))\n             basename = 'comps' + basename[basename.find('.'):]\n+        elif comps_type == 'modules' and re.match('modules.yaml(' + \"|\".join(compressed_suffixes) + ')*', basename):\n+            # decompress only for getting the checksum\n+            checksum = self._getDecompressedFileChecksum(filename, 'sha256')\n+            basename = checksum + \"-\" + basename\n+            log(0, \"Including the checksum in the modules file name: %s\" % basename)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99fe71b3a063733959345cd796c7d1d0c44492b7"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgwNzE3Nw==", "bodyText": "Let's try to prevent introducing more camelCase code in Python files if possible \ud83d\ude04\nBetter use something more pythonic like, _get_decompressed_file_checksum", "url": "https://github.com/uyuni-project/uyuni/pull/2745#discussion_r510807177", "createdAt": "2020-10-23T11:04:25Z", "author": {"login": "meaksh"}, "path": "backend/satellite_tools/reposync.py", "diffHunk": "@@ -734,6 +735,17 @@ def import_updates(self, plug):\n             elif notices_type == 'patches':\n                 self.upload_patches(notices)\n \n+    @staticmethod\n+    def _getDecompressedFileChecksum(abspath, hashtype):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99fe71b3a063733959345cd796c7d1d0c44492b7"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3345d3725b0669e150374d361f5823163098a537", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3345d3725b0669e150374d361f5823163098a537", "committedDate": "2020-10-26T18:29:20Z", "message": "WIP: Job for cleaning unused channel modular data\n\nIt'll be part of the existing 'cleanup-data-bunch' bunch."}, "afterCommit": {"oid": "e48fcb08a19581a2a0c87fdc7648967add25262e", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e48fcb08a19581a2a0c87fdc7648967add25262e", "committedDate": "2020-10-26T18:35:38Z", "message": "WIP: Job for cleaning unused channel modular data\n\nIt'll be part of the existing 'cleanup-data-bunch' bunch."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e48fcb08a19581a2a0c87fdc7648967add25262e", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e48fcb08a19581a2a0c87fdc7648967add25262e", "committedDate": "2020-10-26T18:35:38Z", "message": "WIP: Job for cleaning unused channel modular data\n\nIt'll be part of the existing 'cleanup-data-bunch' bunch."}, "afterCommit": {"oid": "b5be2424cc890f11f2925930d90093c8e06be9de", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b5be2424cc890f11f2925930d90093c8e06be9de", "committedDate": "2020-10-26T18:36:22Z", "message": "WIP: Job for cleaning unused channel modular data\n\nIt'll be part of the existing 'cleanup-data-bunch' bunch."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5be2424cc890f11f2925930d90093c8e06be9de", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b5be2424cc890f11f2925930d90093c8e06be9de", "committedDate": "2020-10-26T18:36:22Z", "message": "WIP: Job for cleaning unused channel modular data\n\nIt'll be part of the existing 'cleanup-data-bunch' bunch."}, "afterCommit": {"oid": "f764ed3bf00a2b97081cb9301439196bc00cc6cb", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f764ed3bf00a2b97081cb9301439196bc00cc6cb", "committedDate": "2020-10-26T18:40:58Z", "message": "WIP: Job for cleaning unused channel modular data\n\nIt'll be part of the existing 'cleanup-data-bunch' bunch."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f764ed3bf00a2b97081cb9301439196bc00cc6cb", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f764ed3bf00a2b97081cb9301439196bc00cc6cb", "committedDate": "2020-10-26T18:40:58Z", "message": "WIP: Job for cleaning unused channel modular data\n\nIt'll be part of the existing 'cleanup-data-bunch' bunch."}, "afterCommit": {"oid": "1ddda519719baeac392d2e3f38f12e20091ab34b", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1ddda519719baeac392d2e3f38f12e20091ab34b", "committedDate": "2020-10-26T18:41:53Z", "message": "WIP: Job for cleaning unused channel modular data\n\nIt'll be part of the existing 'cleanup-data-bunch' bunch."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "738c6a35a864b4d8b0bfda888e5430e04d473016", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/738c6a35a864b4d8b0bfda888e5430e04d473016", "committedDate": "2020-10-27T09:48:38Z", "message": "Reposync: treat resources using 'with'"}, "afterCommit": {"oid": "8f912e9580c13c7484f1b59671ab6e2fa878e3c0", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8f912e9580c13c7484f1b59671ab6e2fa878e3c0", "committedDate": "2020-10-27T09:52:00Z", "message": "Reposync: treat resources using 'with'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8f912e9580c13c7484f1b59671ab6e2fa878e3c0", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8f912e9580c13c7484f1b59671ab6e2fa878e3c0", "committedDate": "2020-10-27T09:52:00Z", "message": "Reposync: treat resources using 'with'"}, "afterCommit": {"oid": "aad2cef91cf3130c20603c991d575144dd5274bd", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/aad2cef91cf3130c20603c991d575144dd5274bd", "committedDate": "2020-10-27T10:12:14Z", "message": "Reposync: treat resources using 'with'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NTcwOTY0", "url": "https://github.com/uyuni-project/uyuni/pull/2745#pullrequestreview-517570964", "createdAt": "2020-10-27T10:50:16Z", "commit": {"oid": "59587ad3da951f41ea63f8f4238f7000c71c8237"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDo1MTowN1rOHo17hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMTowNDo0NlrOHo2ibw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4ODY3OA==", "bodyText": "typo", "url": "https://github.com/uyuni-project/uyuni/pull/2745#discussion_r512588678", "createdAt": "2020-10-27T10:51:07Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/common/data/rhnTaskoTask.sql", "diffHunk": "@@ -116,4 +116,7 @@ INSERT INTO rhnTaskoTask (id, name, class)\n INSERT INTO rhnTaskoTask (id, name, class)\n    VALUES (sequence_nextval('rhn_tasko_task_id_seq'), 'ssh-minion-action-executor', 'com.redhat.rhn.taskomatic.task.SSHMinionActionExecutor');\n \n+INSERT INTO rhnTaskoTask (id, name, class)\n+   VALUES (sequence_nextval('rhn_tasko_task_id_seq'), 'channel-modular-data-cleaunp', 'com.redhat.rhn.taskomatic.task.ModularDataCleanup');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59587ad3da951f41ea63f8f4238f7000c71c8237"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4ODc5NQ==", "bodyText": "typo", "url": "https://github.com/uyuni-project/uyuni/pull/2745#discussion_r512588795", "createdAt": "2020-10-27T10:51:17Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/common/data/rhnTaskoTemplate.sql", "diffHunk": "@@ -252,4 +252,11 @@ INSERT INTO rhnTaskoTemplate (id, bunch_id, task_id, ordering, start_if)\n                         0,\n                         null);\n \n+INSERT INTO rhnTaskoTemplate (id, bunch_id, task_id, ordering, start_if)\n+            VALUES (sequence_nextval('rhn_tasko_template_id_seq'),\n+                        (SELECT id FROM rhnTaskoBunch WHERE name='cleanup-data-bunch'),\n+                        (SELECT id FROM rhnTaskoTask WHERE name='channel-modular-data-cleaunp'),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59587ad3da951f41ea63f8f4238f7000c71c8237"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU5NDcyMA==", "bodyText": "So we have a new Task, but use an existing Bunch. Ok, but the typo in the task name should be fixed.", "url": "https://github.com/uyuni-project/uyuni/pull/2745#discussion_r512594720", "createdAt": "2020-10-27T10:58:59Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/upgrade/susemanager-schema-4.2.2-to-susemanager-schema-4.2.3/210-channel-modular-data-cleaunp-job.sql", "diffHunk": "@@ -0,0 +1,16 @@\n+INSERT INTO rhnTaskoTask (id, name, class)\n+SELECT sequence_nextval('rhn_tasko_task_id_seq'), 'channel-modular-data-cleaunp', 'com.redhat.rhn.taskomatic.task.ModularDataCleanup'\n+WHERE NOT EXISTS (SELECT 1 FROM rhnTaskoTask WHERE name='channel-modular-data-cleaunp');\n+\n+INSERT INTO rhnTaskoTemplate (id, bunch_id, task_id, ordering, start_if)\n+SELECT sequence_nextval('rhn_tasko_template_id_seq'),\n+    (SELECT id FROM rhnTaskoBunch WHERE name='cleanup-data-bunch'),\n+    (SELECT id FROM rhnTaskoTask WHERE name='channel-modular-data-cleaunp'),\n+    1,\n+    null\n+WHERE NOT EXISTS (\n+    SELECT 1 FROM rhnTaskoTemplate\n+    WHERE bunch_id = (SELECT id FROM rhnTaskoBunch WHERE name = 'cleanup-data-bunch')\n+      AND task_id = (SELECT id FROM rhnTaskoTask WHERE name = 'channel-modular-data-cleaunp')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59587ad3da951f41ea63f8f4238f7000c71c8237"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU5ODYzOQ==", "bodyText": "Is there any good reason to call this with false in future? Will true break the functionality under some conditions?\nIf true should work in general, we should just do it always and do not implement an extra function.", "url": "https://github.com/uyuni-project/uyuni/pull/2745#discussion_r512598639", "createdAt": "2020-10-27T11:04:46Z", "author": {"login": "mcalmer"}, "path": "java/code/src/com/redhat/rhn/frontend/xmlrpc/channel/software/ChannelSoftwareHandler.java", "diffHunk": "@@ -2331,6 +2331,32 @@ private void channelAdminPermCheck(User loggedInUser) {\n      */\n     public Object[] mergePackages(User loggedInUser, String mergeFromLabel,\n             String mergeToLabel) {\n+        return mergePackages(loggedInUser, mergeFromLabel, mergeToLabel, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59587ad3da951f41ea63f8f4238f7000c71c8237"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NjAzODgw", "url": "https://github.com/uyuni-project/uyuni/pull/2745#pullrequestreview-517603880", "createdAt": "2020-10-27T11:34:25Z", "commit": {"oid": "3a3112f2acd245a473d1dc9371503fac5210cda0"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMTozNDoyNVrOHo3oAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMTozNDoyNVrOHo3oAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjYxNjQ1MA==", "bodyText": "There are some unused imports in this one, and maybe in some other test classes as well", "url": "https://github.com/uyuni-project/uyuni/pull/2745#discussion_r512616450", "createdAt": "2020-10-27T11:34:25Z", "author": {"login": "cbbayburt"}, "path": "java/code/src/com/redhat/rhn/manager/contentmgmt/test/ContentManagerChannelAlignmentTest.java", "diffHunk": "@@ -22,13 +22,15 @@\n import static com.redhat.rhn.domain.role.RoleFactory.ORG_ADMIN;\n import static java.util.Collections.emptyList;\n import static java.util.Collections.singleton;\n+import static java.util.Optional.empty;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a3112f2acd245a473d1dc9371503fac5210cda0"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3Njk3NDc0", "url": "https://github.com/uyuni-project/uyuni/pull/2745#pullrequestreview-517697474", "createdAt": "2020-10-27T13:24:58Z", "commit": {"oid": "221b5f0beed3d853aa14ae18d9a3b049a1321785"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "221b5f0beed3d853aa14ae18d9a3b049a1321785", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/221b5f0beed3d853aa14ae18d9a3b049a1321785", "committedDate": "2020-10-27T12:43:55Z", "message": "Remove unused imports in ContentManagerChannelAlignmentTest"}, "afterCommit": {"oid": "218980ebc96ec4406b9e309b7fabe4e2c426a610", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/218980ebc96ec4406b9e309b7fabe4e2c426a610", "committedDate": "2021-01-19T08:12:13Z", "message": "Remove unused imports in ContentManagerChannelAlignmentTest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "218980ebc96ec4406b9e309b7fabe4e2c426a610", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/218980ebc96ec4406b9e309b7fabe4e2c426a610", "committedDate": "2021-01-19T08:12:13Z", "message": "Remove unused imports in ContentManagerChannelAlignmentTest"}, "afterCommit": {"oid": "5b278f59e4654ce4f8fadc61551cf0618642420f", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5b278f59e4654ce4f8fadc61551cf0618642420f", "committedDate": "2021-01-19T08:30:22Z", "message": "Remove unused imports in ContentManagerChannelAlignmentTest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b278f59e4654ce4f8fadc61551cf0618642420f", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5b278f59e4654ce4f8fadc61551cf0618642420f", "committedDate": "2021-01-19T08:30:22Z", "message": "Remove unused imports in ContentManagerChannelAlignmentTest"}, "afterCommit": {"oid": "09e6868f1578c94fbfbb297818ab128edb370d0c", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/09e6868f1578c94fbfbb297818ab128edb370d0c", "committedDate": "2021-01-19T08:36:15Z", "message": "Remove unused imports in ContentManagerChannelAlignmentTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83e718a51785fb1c4972ac6c52438b41b3659324", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/83e718a51785fb1c4972ac6c52438b41b3659324", "committedDate": "2021-01-19T09:13:23Z", "message": "Allow changing RepoMetadata (and child classes) from hibernate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "405bdd99dd7ca52e8c05d279c97c06c6c7024763", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/405bdd99dd7ca52e8c05d279c97c06c6c7024763", "committedDate": "2021-01-19T09:13:23Z", "message": "Clone modules metadata when clonning a channel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79d97227450de0647224c8568036e6d1bf3c969c", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/79d97227450de0647224c8568036e6d1bf3c969c", "committedDate": "2021-01-19T09:13:24Z", "message": "Test: Clone modules metadata when clonning a channel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43007cef564dfd016e02016aa68f23f613dd3739", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/43007cef564dfd016e02016aa68f23f613dd3739", "committedDate": "2021-01-19T09:13:24Z", "message": "Refactor: Extract common functionality to a method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab81b47f6e79bde6184a658135fec3777bfd34c0", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ab81b47f6e79bde6184a658135fec3777bfd34c0", "committedDate": "2021-01-19T09:13:24Z", "message": "Set the modular information of channels on CLM project build/promote"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c46abe87b8c122f952b1f73cc7960e97964a87a", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3c46abe87b8c122f952b1f73cc7960e97964a87a", "committedDate": "2021-01-19T09:13:24Z", "message": "Refactor: Move the modules handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a675b143d134583f3f61c2b9220f51eade97c1f1", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a675b143d134583f3f61c2b9220f51eade97c1f1", "committedDate": "2021-01-19T09:13:24Z", "message": "Test: Set the modular information of channels on CLM project build/promote"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe185fc2f5bc21c917eb0bd776197703f1ab898a", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fe185fc2f5bc21c917eb0bd776197703f1ab898a", "committedDate": "2021-01-19T09:13:24Z", "message": "Reposync: include the the modules.yaml checksum in the filename when reposyncing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f01c4a9cc3e0566783b38c71be8b40f710415169", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f01c4a9cc3e0566783b38c71be8b40f710415169", "committedDate": "2021-01-19T09:13:37Z", "message": "Changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c407fa7a55798373977a4db36fd040fa50358ea", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6c407fa7a55798373977a4db36fd040fa50358ea", "committedDate": "2021-01-19T09:13:38Z", "message": "Update backend/satellite_tools/reposync.py\n\nCo-authored-by: Pablo Su\u00e1rez Hern\u00e1ndez <psuarezhernandez@suse.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41645868c2322a5c16a3742eca7ca1bb6b3dbd63", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/41645868c2322a5c16a3742eca7ca1bb6b3dbd63", "committedDate": "2021-01-19T09:13:38Z", "message": "Merge repo modular data in \"spacewalk manage lifecycle\" tool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c1bf0a383032777b5d61b8b58db079a3279b7e9", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7c1bf0a383032777b5d61b8b58db079a3279b7e9", "committedDate": "2021-01-19T09:13:38Z", "message": "Reposync: turn camelCase into underscores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fd17d747180443b8f133fe2e56f025a1ba95b93", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9fd17d747180443b8f133fe2e56f025a1ba95b93", "committedDate": "2021-01-19T09:13:38Z", "message": "Job for cleaning unused channel modular data\n\nIt'll be part of the existing 'cleanup-data-bunch' bunch."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7af15e8fe4ee58e16fefae92d8263fa47f110b9", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b7af15e8fe4ee58e16fefae92d8263fa47f110b9", "committedDate": "2021-01-19T09:13:38Z", "message": "Reposync: treat resources using 'with'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de87cc4d4c6e5e624858d0e1beff939bcaa58f4f", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/de87cc4d4c6e5e624858d0e1beff939bcaa58f4f", "committedDate": "2021-01-19T09:13:38Z", "message": "Make checkstyle happy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a520bdf833123a5b5c96561cd719d6016bce1ddb", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a520bdf833123a5b5c96561cd719d6016bce1ddb", "committedDate": "2021-01-19T09:13:38Z", "message": "Fix a typo: cleaunp -> cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c46b420be2f3cf4b7a17141e5c044c53ae99353a", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c46b420be2f3cf4b7a17141e5c044c53ae99353a", "committedDate": "2021-01-19T09:13:38Z", "message": "Remove unused imports in ContentManagerChannelAlignmentTest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09e6868f1578c94fbfbb297818ab128edb370d0c", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/09e6868f1578c94fbfbb297818ab128edb370d0c", "committedDate": "2021-01-19T08:36:15Z", "message": "Remove unused imports in ContentManagerChannelAlignmentTest"}, "afterCommit": {"oid": "c46b420be2f3cf4b7a17141e5c044c53ae99353a", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c46b420be2f3cf4b7a17141e5c044c53ae99353a", "committedDate": "2021-01-19T09:13:38Z", "message": "Remove unused imports in ContentManagerChannelAlignmentTest"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 920, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}