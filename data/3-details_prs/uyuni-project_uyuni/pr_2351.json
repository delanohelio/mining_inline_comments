{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4NjU3NTYx", "number": 2351, "title": "Fix recurring actions shown in Task Schedules UI", "bodyText": "What does this PR change?\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the Admin -> Task Schedules list.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: Does not affect behavior described in the docs\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests: Just restores intended recurring action functionality\n\n\n DONE\n\n\nLinks\nFixes: SUSE/spacewalk#11581\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-06-23T15:43:04Z", "url": "https://github.com/uyuni-project/uyuni/pull/2351", "merged": true, "mergeCommit": {"oid": "5ad50d98a3ad873142a546053733fd71fcd5c93f"}, "closed": true, "closedAt": "2020-06-26T13:40:21Z", "author": {"login": "parlt91"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuHc4mgBqjM0NzM2MTczODc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvDG2NgBqjM0ODY1Njk4NTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c75d27bbf48cdda98fa5c88d3a48c1552444b83", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6c75d27bbf48cdda98fa5c88d3a48c1552444b83", "committedDate": "2020-06-23T15:30:21Z", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}, "afterCommit": {"oid": "f5b63f9b999e785335ee0afad006b2f4781944f6", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f5b63f9b999e785335ee0afad006b2f4781944f6", "committedDate": "2020-06-23T15:47:02Z", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MzM4MzIw", "url": "https://github.com/uyuni-project/uyuni/pull/2351#pullrequestreview-436338320", "createdAt": "2020-06-24T05:41:51Z", "commit": {"oid": "f5b63f9b999e785335ee0afad006b2f4781944f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNTo0MTo1MlrOGoDrAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNTo0MTo1MlrOGoDrAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDY1NjM4NQ==", "bodyText": "As for your question in the PR discussion: I think adjusting a hibernate queries is ok here. The only thing that rings a bell, is the situation, when :filter is an empty collection. Can you make sure, that the query would work in that case too? The query should be robust enough to handle that too.", "url": "https://github.com/uyuni-project/uyuni/pull/2351#discussion_r444656385", "createdAt": "2020-06-24T05:41:52Z", "author": {"login": "hustodemon"}, "path": "java/code/src/com/redhat/rhn/taskomatic/domain/TaskoSchedule.hbm.xml", "diffHunk": "@@ -77,15 +77,15 @@ PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n         </query>\n \n         <query name=\"TaskoSchedule.listActiveByOrg\">\n-            <![CDATA[FROM com.redhat.rhn.taskomatic.domain.TaskoSchedule WHERE orgId = :org_id AND (activeFrom < :timestamp AND (activeTill is null OR :timestamp < activeTill))]]>\n+            <![CDATA[FROM com.redhat.rhn.taskomatic.domain.TaskoSchedule WHERE orgId = :org_id AND (activeFrom < :timestamp AND (activeTill is null OR :timestamp < activeTill)) AND bunch.name NOT IN :filter]]>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5b63f9b999e785335ee0afad006b2f4781944f6"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f5b63f9b999e785335ee0afad006b2f4781944f6", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f5b63f9b999e785335ee0afad006b2f4781944f6", "committedDate": "2020-06-23T15:47:02Z", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}, "afterCommit": {"oid": "13a648c6eefba7482a6c8c505d11840031d5a6e2", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/13a648c6eefba7482a6c8c505d11840031d5a6e2", "committedDate": "2020-06-24T09:14:46Z", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NDc0NTk0", "url": "https://github.com/uyuni-project/uyuni/pull/2351#pullrequestreview-436474594", "createdAt": "2020-06-24T09:23:29Z", "commit": {"oid": "13a648c6eefba7482a6c8c505d11840031d5a6e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "13a648c6eefba7482a6c8c505d11840031d5a6e2", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/13a648c6eefba7482a6c8c505d11840031d5a6e2", "committedDate": "2020-06-24T09:14:46Z", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}, "afterCommit": {"oid": "3b4a9c33ac8b44ece7983a5dd03c326dae3a17d7", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3b4a9c33ac8b44ece7983a5dd03c326dae3a17d7", "committedDate": "2020-06-25T08:43:29Z", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e38f895d92d04d742463f901bdd04e5f55e1689", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6e38f895d92d04d742463f901bdd04e5f55e1689", "committedDate": "2020-06-26T13:16:53Z", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b4a9c33ac8b44ece7983a5dd03c326dae3a17d7", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3b4a9c33ac8b44ece7983a5dd03c326dae3a17d7", "committedDate": "2020-06-25T08:43:29Z", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}, "afterCommit": {"oid": "6e38f895d92d04d742463f901bdd04e5f55e1689", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6e38f895d92d04d742463f901bdd04e5f55e1689", "committedDate": "2020-06-26T13:16:53Z", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1161, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}