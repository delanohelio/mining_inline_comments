{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MzAwMTA4", "number": 1986, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDozMDoxMVrODnBJdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDozMDo1NFrODnBKcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjM5ODYxOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/common_steps.rb", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDozMDoxMVrOF0xLgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDozMDoxMVrOF0xLgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg3NjAzNQ==", "bodyText": "\"When\" please", "url": "https://github.com/uyuni-project/uyuni/pull/1986#discussion_r390876035", "createdAt": "2020-03-11T10:30:11Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -461,6 +461,24 @@\n   raise \"xpath: #{xpath} not found\" unless find(:xpath, xpath).set(true)\n end\n \n+When(/I wait until the tree item \"([^\"]+)\" has no sub-list/) do |item|\n+  repeat_until_timeout(message: \"could still find a sub list for tree item #{item}\") do\n+    xpath = \"//span[contains(text(), '#{item}')]/ancestor::div[contains(@class, 'product-details-wrapper')]/div/i[contains(@class, 'fa-angle-')]\"\n+    begin\n+      find(:xpath, xpath)\n+      sleep 1\n+    rescue Capybara::ElementNotFound\n+      break\n+    end\n+  end\n+end\n+\n+And(/^I wait until the tree item \"([^\"]+)\" contains \"([^\"]+)\" text$/) do |item, text|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b8009d2b22709365f3e94214da047980548447f"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjM5OTc5OnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/minkvm_guests.feature", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDozMDozMlrOF0xMVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDozMDozMlrOF0xMVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg3NjI0NQ==", "bodyText": "Could be \"And\"", "url": "https://github.com/uyuni-project/uyuni/pull/1986#discussion_r390876245", "createdAt": "2020-03-11T10:30:32Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/minkvm_guests.feature", "diffHunk": "@@ -194,6 +194,27 @@ Feature: Be able to manage KVM virtual machines via the GUI\n     And I click on \"Delete\" in \"Delete Guest\" modal\n     Then I should not see a \"test-vm2\" virtual machine on \"kvm_server\"\n \n+@virthost_kvm\n+  Scenario: Refresh a virtual storage pool for KVM\n+    Given I am on the \"Virtualization\" page of this \"kvm_server\"\n+    When I follow \"Storage\"\n+    And I click on \"Refresh\" in tree item \"test-pool0\"\n+    Then I wait until the tree item \"test-pool0\" has no sub-list", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b8009d2b22709365f3e94214da047980548447f"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjQwMDM0OnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/minkvm_guests.feature", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDozMDo0MlrOF0xMqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDozMDo0MlrOF0xMqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg3NjMzMA==", "bodyText": "Same.", "url": "https://github.com/uyuni-project/uyuni/pull/1986#discussion_r390876330", "createdAt": "2020-03-11T10:30:42Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/minkvm_guests.feature", "diffHunk": "@@ -194,6 +194,27 @@ Feature: Be able to manage KVM virtual machines via the GUI\n     And I click on \"Delete\" in \"Delete Guest\" modal\n     Then I should not see a \"test-vm2\" virtual machine on \"kvm_server\"\n \n+@virthost_kvm\n+  Scenario: Refresh a virtual storage pool for KVM\n+    Given I am on the \"Virtualization\" page of this \"kvm_server\"\n+    When I follow \"Storage\"\n+    And I click on \"Refresh\" in tree item \"test-pool0\"\n+    Then I wait until the tree item \"test-pool0\" has no sub-list\n+\n+@virthost_kvm\n+  Scenario: Stop a virtual storage pool for KVM\n+    Given I am on the \"Virtualization\" page of this \"kvm_server\"\n+    When I follow \"Storage\"\n+    And I click on \"Stop\" in tree item \"test-pool0\"\n+    Then I wait until the tree item \"test-pool0\" contains \"inactive\" text", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b8009d2b22709365f3e94214da047980548447f"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjQwMTEyOnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/minkvm_guests.feature", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDozMDo1NFrOF0xNIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMDozMDo1NFrOF0xNIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDg3NjQ0OA==", "bodyText": "Same.", "url": "https://github.com/uyuni-project/uyuni/pull/1986#discussion_r390876448", "createdAt": "2020-03-11T10:30:54Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/minkvm_guests.feature", "diffHunk": "@@ -194,6 +194,27 @@ Feature: Be able to manage KVM virtual machines via the GUI\n     And I click on \"Delete\" in \"Delete Guest\" modal\n     Then I should not see a \"test-vm2\" virtual machine on \"kvm_server\"\n \n+@virthost_kvm\n+  Scenario: Refresh a virtual storage pool for KVM\n+    Given I am on the \"Virtualization\" page of this \"kvm_server\"\n+    When I follow \"Storage\"\n+    And I click on \"Refresh\" in tree item \"test-pool0\"\n+    Then I wait until the tree item \"test-pool0\" has no sub-list\n+\n+@virthost_kvm\n+  Scenario: Stop a virtual storage pool for KVM\n+    Given I am on the \"Virtualization\" page of this \"kvm_server\"\n+    When I follow \"Storage\"\n+    And I click on \"Stop\" in tree item \"test-pool0\"\n+    Then I wait until the tree item \"test-pool0\" contains \"inactive\" text\n+\n+@virthost_kvm\n+  Scenario: Start a virtual storage pool for KVM\n+    Given I am on the \"Virtualization\" page of this \"kvm_server\"\n+    When I follow \"Storage\"\n+    And I click on \"Start\" in tree item \"test-pool0\"\n+    Then I wait until the tree item \"test-pool0\" contains \"running\" text", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b8009d2b22709365f3e94214da047980548447f"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 135, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}