{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMzQ4NTI4", "number": 2720, "title": "Hotfix: Fix release string comparison for RHEL8/CentOS8 modular packages", "bodyText": "The current comparing algorithm evaluates the 'release' part of some rhel8 modular rpms as equal, which breaks other parts of Uyuni (reposyncing a rhel/centos8 channels leads to unique constraint violation on rhnChannelNewestPackage).\nThis PR is not the ultimate fix to the problem, it only restores the old behavior (before #2615), where the constraint violation didn't happen (packages were ordered (although very likely incorrectly)).\nCurrently, there is an effort to improve the version comparison (split the rpm and deb logic). When it's done, this PR should be reverted!\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\nfix\nTest coverage\n\n\nUnit tests were added\n\n\n DONE\n\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-10-14T12:47:59Z", "url": "https://github.com/uyuni-project/uyuni/pull/2720", "merged": true, "mergeCommit": {"oid": "c1b09f8f3a90338b6bea170ab39bf938626ec88c"}, "closed": true, "closedAt": "2020-10-15T09:07:40Z", "author": {"login": "hustodemon"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSdXAhgFqTUwODM1NzMzMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSuCluAFqTUwOTE3MDQ2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MzU3MzMy", "url": "https://github.com/uyuni-project/uyuni/pull/2720#pullrequestreview-508357332", "createdAt": "2020-10-14T13:40:15Z", "commit": {"oid": "403e0f6a8805539aeb1ac4b28623fc0edb11faf0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMzo0MDoxNVrOHhTiOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMzo0MDoxNVrOHhTiOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY4NTExMg==", "bodyText": "a bsc# is not present, is this intended?", "url": "https://github.com/uyuni-project/uyuni/pull/2720#discussion_r504685112", "createdAt": "2020-10-14T13:40:15Z", "author": {"login": "mbologna"}, "path": "java/spacewalk-java.changes", "diffHunk": "@@ -1,3 +1,4 @@\n+- Hotfix the modular RPMs release comparison", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "403e0f6a8805539aeb1ac4b28623fc0edb11faf0"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NDExODI4", "url": "https://github.com/uyuni-project/uyuni/pull/2720#pullrequestreview-508411828", "createdAt": "2020-10-14T14:31:57Z", "commit": {"oid": "403e0f6a8805539aeb1ac4b28623fc0edb11faf0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NDM1NTM3", "url": "https://github.com/uyuni-project/uyuni/pull/2720#pullrequestreview-508435537", "createdAt": "2020-10-14T14:54:12Z", "commit": {"oid": "403e0f6a8805539aeb1ac4b28623fc0edb11faf0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ddcff720aaf26823485d07a2f8ddba25c78dafe", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8ddcff720aaf26823485d07a2f8ddba25c78dafe", "committedDate": "2020-10-15T07:53:24Z", "message": "Hotfix: Fix release string comparison for RHEL8/CentOS8 modular packages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f0c0a4363d671979a4a1f10420be16b15158a1b", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4f0c0a4363d671979a4a1f10420be16b15158a1b", "committedDate": "2020-10-15T07:53:24Z", "message": "Fix a typo in a comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1077738f1c4cca32503eff3f409d84e26ad41f44", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1077738f1c4cca32503eff3f409d84e26ad41f44", "committedDate": "2020-10-15T07:53:39Z", "message": "Changelog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "403e0f6a8805539aeb1ac4b28623fc0edb11faf0", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/403e0f6a8805539aeb1ac4b28623fc0edb11faf0", "committedDate": "2020-10-14T12:49:39Z", "message": "Changelog"}, "afterCommit": {"oid": "1077738f1c4cca32503eff3f409d84e26ad41f44", "author": {"user": {"login": "hustodemon", "name": "Frantisek Kobzik"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1077738f1c4cca32503eff3f409d84e26ad41f44", "committedDate": "2020-10-15T07:53:39Z", "message": "Changelog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MTcwNDYw", "url": "https://github.com/uyuni-project/uyuni/pull/2720#pullrequestreview-509170460", "createdAt": "2020-10-15T09:06:21Z", "commit": {"oid": "1077738f1c4cca32503eff3f409d84e26ad41f44"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 890, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}