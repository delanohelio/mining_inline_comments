{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4MzMzNzYz", "number": 2292, "title": "Avoid traceback with AssertionError: Failed to update row (bsc#1172558)", "bodyText": "What does this PR change?\nIt prevents a traceback by removing a wrong assertion that failed in cases where no error really happened.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\nNo documentation needed: bugfix\n DONE\n\nTest coverage\n\n\nCucumber tests previously failing are now green (problem was reproduced locally running secondary/srv_patches_page.feature in isolation - errors would pop up most runs)\n\n\n DONE\n\n\nLinks\nFixes https://bugzilla.suse.com/show_bug.cgi?id=1172558\nTracks SUSE/spacewalk#11639\n\n DONE\n\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-06-05T09:26:12Z", "url": "https://github.com/uyuni-project/uyuni/pull/2292", "merged": true, "mergeCommit": {"oid": "124e60c9eb8dc3ef4762c0026dc0374ba19bf0ad"}, "closed": true, "closedAt": "2020-06-05T12:47:19Z", "author": {"login": "moio"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoPLERgH2gAyNDI4MzMzNzYzOjNiZTNmMTdjMmRlN2IxYzI4OGNkZTExNDhkMTdkMGRkM2YwNGNmYTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoSEalAH2gAyNDI4MzMzNzYzOmJmNTU1NTU2ZmFmNjQ2ZTcyZmIyYjQ4ZmU1YjcyYTUxMmFlZjQ5NGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3be3f17c2de7b1c288cde1148d17d0dd3f04cfa0", "author": {"user": {"login": "moio", "name": "Silvio Moioli"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3be3f17c2de7b1c288cde1148d17d0dd3f04cfa0", "committedDate": "2020-06-05T09:23:43Z", "message": "Avoid traceback with AssertionError: Failed to update row (bsc#1172558)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MTU4NTEx", "url": "https://github.com/uyuni-project/uyuni/pull/2292#pullrequestreview-425158511", "createdAt": "2020-06-05T09:52:22Z", "commit": {"oid": "3be3f17c2de7b1c288cde1148d17d0dd3f04cfa0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTo1MjoyMlrOGfoCtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwOTo1MjoyMlrOGfoCtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgxNTA5NA==", "bodyText": "Fine to remove the assert, but... it does mean we are not checking the output of executeUpdate method?\nWhat if the row failed updating it? \ud83e\udd14", "url": "https://github.com/uyuni-project/uyuni/pull/2292#discussion_r435815094", "createdAt": "2020-06-05T09:52:22Z", "author": {"login": "srbarrios"}, "path": "java/code/src/com/redhat/rhn/domain/rhnset/RhnSetFactory.java", "diffHunk": "@@ -184,22 +184,19 @@ private static void executeMode(RhnSetElement elem,\n         params.put(\"user_id\", elem.getUserId());\n         params.put(\"label\", elem.getLabel());\n         params.put(\"el_one\", elem.getElement());\n-        int count;\n \n         if (elem.getElementThree() == null && elem.getElementTwo() == null) {\n-            count = el1.executeUpdate(params);\n+            el1.executeUpdate(params);\n         }\n         else if (elem.getElementThree() == null) {\n             params.put(\"el_two\", elem.getElementTwo());\n-            count = el2.executeUpdate(params);\n+            el2.executeUpdate(params);\n         }\n         else {\n             params.put(\"el_three\", elem.getElementThree());\n             params.put(\"el_two\", elem.getElementTwo());\n-            count = el3.executeUpdate(params);\n+            el3.executeUpdate(params);\n         }\n-\n-        assert count == 1 : \"Failed to update row\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3be3f17c2de7b1c288cde1148d17d0dd3f04cfa0"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MTc1OTQ5", "url": "https://github.com/uyuni-project/uyuni/pull/2292#pullrequestreview-425175949", "createdAt": "2020-06-05T10:18:44Z", "commit": {"oid": "3be3f17c2de7b1c288cde1148d17d0dd3f04cfa0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf555556faf646e72fb2b48fe5b72a512aef494d", "author": {"user": {"login": "moio", "name": "Silvio Moioli"}}, "url": "https://github.com/uyuni-project/uyuni/commit/bf555556faf646e72fb2b48fe5b72a512aef494d", "committedDate": "2020-06-05T12:46:10Z", "message": "Merge branch 'master' into bsc1172558"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1300, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}