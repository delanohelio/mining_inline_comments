{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4MDMyNjkw", "number": 2615, "title": "Fix: handle version comparison corner cases in Ubuntu packages", "bodyText": "What does this PR change?\nHandle version comparison corner cases in Ubuntu packages\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: internal\n\n\n DONE\n\n\nTest coverage\n\n\nUnit tests and database tests were added\n\n\n DONE\n\n\nLinks\nFixes #2531\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-09-16T14:31:34Z", "url": "https://github.com/uyuni-project/uyuni/pull/2615", "merged": true, "mergeCommit": {"oid": "158533df1abe02bf46ae7daff72e814a09053507"}, "closed": true, "closedAt": "2020-09-22T15:07:31Z", "author": {"login": "mbologna"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJdx1bAFqTQ4OTcyMjE1Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLZH3MgBqjM3OTM2NzA0NDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzIyMTUz", "url": "https://github.com/uyuni-project/uyuni/pull/2615#pullrequestreview-489722153", "createdAt": "2020-09-16T15:04:13Z", "commit": {"oid": "95604f376a819e60d44905b549b19a580003ca65"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTowNDoxNFrOHS1UfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTowNDoxNFrOHS1UfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxMDAxMg==", "bodyText": "You adapted the check to test explicit of ~ not found, but no of this tests here has a case where a tilde exists.\nCan you add such a test?", "url": "https://github.com/uyuni-project/uyuni/pull/2615#discussion_r489510012", "createdAt": "2020-09-16T15:04:14Z", "author": {"login": "mcalmer"}, "path": "java/code/src/com/redhat/rhn/common/util/test/RpmVersionComparatorTest.java", "diffHunk": "@@ -168,6 +168,11 @@ public void testUbuntuBugzilla1150113() {\n     public void testBugzilla1173201() {\n         assertCompareSymm(-1, \"1.27+1.3.9\", \"1.27.1ubuntu1+1.3.9\");\n         assertCompareSymm(-1, \"1.27+1.3.9\", \"1.27.1+1.3.9\");\n+        assertCompareSymm(-1, \"1.27+1.3.9\", \"1.27.1ubuntu2+1.3.11\");\n+        assertCompareSymm(1, \"1.27+1.3.9\", \"1.3.11\");\n+        assertCompareSymm(1, \"1.27\", \"1.3.11\");\n+        assertCompareSymm(1, \"1.27+1.3.9\", \"1.3.9\");\n+        assertCompareSymm(-1, \"1.27+1.3.9\", \"5.18.4.1\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95604f376a819e60d44905b549b19a580003ca65"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzI1MTQz", "url": "https://github.com/uyuni-project/uyuni/pull/2615#pullrequestreview-489725143", "createdAt": "2020-09-16T15:07:05Z", "commit": {"oid": "95604f376a819e60d44905b549b19a580003ca65"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTowNzowNlrOHS1dMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNTowNzowNlrOHS1dMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxMjI0Mg==", "bodyText": "Not sure if this should go into the uyuni release which is currently prepared.\nIf yes, please change the number of the script as we already have a 100-... .\nIf not, you need to change the directory as it will be released for 4.2.1-to-4.2.2", "url": "https://github.com/uyuni-project/uyuni/pull/2615#discussion_r489512242", "createdAt": "2020-09-16T15:07:06Z", "author": {"login": "mcalmer"}, "path": "schema/susemanager-schema-4.2.0-to-susemanager-schema-4.2.1/100-rpm.pkb.sql", "diffHunk": "@@ -0,0 +1,255 @@\n+-- oracle equivalent source sha1 539cb03eb177b7e87992701071488bbb32bb0624", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95604f376a819e60d44905b549b19a580003ca65"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95604f376a819e60d44905b549b19a580003ca65", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/95604f376a819e60d44905b549b19a580003ca65", "committedDate": "2020-09-16T14:30:56Z", "message": "Chore: populate .changes"}, "afterCommit": {"oid": "222e7c6b29d04a3c1876e86127928752e32d5dd4", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/222e7c6b29d04a3c1876e86127928752e32d5dd4", "committedDate": "2020-09-16T15:35:25Z", "message": "Chore: populate .changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "222e7c6b29d04a3c1876e86127928752e32d5dd4", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/222e7c6b29d04a3c1876e86127928752e32d5dd4", "committedDate": "2020-09-16T15:35:25Z", "message": "Chore: populate .changes"}, "afterCommit": {"oid": "717b2e2b77d0f9ee5deed5212d574911039926be", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/717b2e2b77d0f9ee5deed5212d574911039926be", "committedDate": "2020-09-16T16:11:48Z", "message": "Chore: populate .changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNDgzNjg1", "url": "https://github.com/uyuni-project/uyuni/pull/2615#pullrequestreview-493483685", "createdAt": "2020-09-22T13:53:07Z", "commit": {"oid": "717b2e2b77d0f9ee5deed5212d574911039926be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cde4906926869a66a817e07010ec5171e887673", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8cde4906926869a66a817e07010ec5171e887673", "committedDate": "2020-09-22T14:31:00Z", "message": "Test: add JUnit to cover Ubuntu package comparison"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10a3ae6f782f3813298d1022aad6cdfe9402c84e", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/10a3ae6f782f3813298d1022aad6cdfe9402c84e", "committedDate": "2020-09-22T14:31:00Z", "message": "Test: add database tests to cover Ubuntu pkg cmp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "388f61fed23ba2b282aa5bfd1ade42e19dde6a13", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/388f61fed23ba2b282aa5bfd1ade42e19dde6a13", "committedDate": "2020-09-22T14:31:00Z", "message": "Fix: handle cmp w/Ubuntu pkgs containing '+' (Java)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "717b2e2b77d0f9ee5deed5212d574911039926be", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/717b2e2b77d0f9ee5deed5212d574911039926be", "committedDate": "2020-09-16T16:11:48Z", "message": "Chore: populate .changes"}, "afterCommit": {"oid": "1aeec09a92506a74de593337ed8069ddf190bb39", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1aeec09a92506a74de593337ed8069ddf190bb39", "committedDate": "2020-09-22T14:32:20Z", "message": "Chore: populate .changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0f5723a5e17b8ece456a2a84a010e50ffa1bcdd", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e0f5723a5e17b8ece456a2a84a010e50ffa1bcdd", "committedDate": "2020-09-22T14:46:20Z", "message": "Fix: handle cmp w/Ubuntu pkgs containing '+' (db)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6d33a266f7dff3dfda2a4aca822688169a49279", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b6d33a266f7dff3dfda2a4aca822688169a49279", "committedDate": "2020-09-22T14:46:20Z", "message": "Chore: populate .changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f17f7a9d1375d206bd85deb6bff34fccd5592add", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f17f7a9d1375d206bd85deb6bff34fccd5592add", "committedDate": "2020-09-22T14:46:20Z", "message": "Chore: move SQL migration script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "91b86f3520e6da714c9c2e7a38c2f01ae2e082dd", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/91b86f3520e6da714c9c2e7a38c2f01ae2e082dd", "committedDate": "2020-09-22T14:43:36Z", "message": "Chore: move SQL migration script"}, "afterCommit": {"oid": "f17f7a9d1375d206bd85deb6bff34fccd5592add", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f17f7a9d1375d206bd85deb6bff34fccd5592add", "committedDate": "2020-09-22T14:46:20Z", "message": "Chore: move SQL migration script"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 989, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}