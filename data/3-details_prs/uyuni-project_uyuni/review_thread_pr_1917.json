{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MzI1Mjgz", "number": 1917, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMjo1Mjo1MVrODgPW-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMDozMToxOFrODnaRYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTMyNjY1OnYy", "diffSide": "RIGHT", "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMjo1Mjo1MVrOFqVvpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwMDoxNToxMFrOFqyBJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MDc3Mg==", "bodyText": "Do not include the 'astra' changes. I will do it on my PR.\nThis should look like as:\n     if [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\nCLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n     else\nCLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n    fi\n\nAlso review the spacing, just in case (quickly retry the script).", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379940772", "createdAt": "2020-02-16T22:52:51Z", "author": {"login": "juliogonzalez"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNDAwNA==", "bodyText": "committed changes ;)", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380404004", "createdAt": "2020-02-18T00:15:10Z", "author": {"login": "gnuninu"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MDc3Mg=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTMzMDU4OnYy", "diffSide": "RIGHT", "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "isResolved": false, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMzowMDozOVrOFqVxow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QyMDozOTo1NlrOFqvQfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw==", "bodyText": "Making the calculation outside the if doesn't make too much sense, it would be better having it inside.\nHowever I also wonder if adding the bootstrap repository wouldn't be a better alternative, so you don't need to look for the package (the path could change).\n@mcalmer any opinion?", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379941283", "createdAt": "2020-02-16T23:00:39Z", "author": {"login": "juliogonzalez"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_VARIANT_ID}}/bootstrap\"\n+      # Debian does not need minor version in the bootstrap repo URL\n+     elif [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n+     else\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    fi\n     CLIENT_REPO_NAME=\"susemanager_bootstrap\"\n     CLIENT_REPO_FILE=\"/etc/apt/sources.list.d/$CLIENT_REPO_NAME.list\"\n \n     setup_deb_bootstrap_repo\n \n+    # Debian vanilla install requires apt-transport-https prior salt-minion installation otherwise will fail\n+    APT_TRANSPORT_HTTPS_DEB=$(wget -O - http://$HOSTNAME/pub/repositories/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap/pool/main/a/apt/ /dev/null 2>&1 |grep apt-transport-https|cut -d '\"' -f 6)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA1NTYxMw==", "bodyText": "yes, I would put it into the if as it is only used there.", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380055613", "createdAt": "2020-02-17T09:04:24Z", "author": {"login": "mcalmer"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_VARIANT_ID}}/bootstrap\"\n+      # Debian does not need minor version in the bootstrap repo URL\n+     elif [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n+     else\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    fi\n     CLIENT_REPO_NAME=\"susemanager_bootstrap\"\n     CLIENT_REPO_FILE=\"/etc/apt/sources.list.d/$CLIENT_REPO_NAME.list\"\n \n     setup_deb_bootstrap_repo\n \n+    # Debian vanilla install requires apt-transport-https prior salt-minion installation otherwise will fail\n+    APT_TRANSPORT_HTTPS_DEB=$(wget -O - http://$HOSTNAME/pub/repositories/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap/pool/main/a/apt/ /dev/null 2>&1 |grep apt-transport-https|cut -d '\"' -f 6)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA1OTk0Mg==", "bodyText": "@mcalmer I was rather asking about adding the bootstrap repo here, instead of doing magic to look for the package :-)\nBTW, if this package is needed, we'd need it as well at susemanager-utils/susemanager-sls/salt/bootstrap/ for people using WebUI to bootstrap.", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380059942", "createdAt": "2020-02-17T09:13:37Z", "author": {"login": "juliogonzalez"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_VARIANT_ID}}/bootstrap\"\n+      # Debian does not need minor version in the bootstrap repo URL\n+     elif [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n+     else\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    fi\n     CLIENT_REPO_NAME=\"susemanager_bootstrap\"\n     CLIENT_REPO_FILE=\"/etc/apt/sources.list.d/$CLIENT_REPO_NAME.list\"\n \n     setup_deb_bootstrap_repo\n \n+    # Debian vanilla install requires apt-transport-https prior salt-minion installation otherwise will fail\n+    APT_TRANSPORT_HTTPS_DEB=$(wget -O - http://$HOSTNAME/pub/repositories/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap/pool/main/a/apt/ /dev/null 2>&1 |grep apt-transport-https|cut -d '\"' -f 6)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA2Nzk2OA==", "bodyText": "It seems the problem is, that you cannot do HTTPS without this packagwe? To get this package you must do plain HTTP. If the bootstrap repo is setup with HTTPS, you habe a chicken/egg problem. Solution could be to hard code HTTP for the bootstrap repo in case of Debian.\nAnd then we need to add this package to the other packages which should be installed.", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380067968", "createdAt": "2020-02-17T09:29:07Z", "author": {"login": "mcalmer"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_VARIANT_ID}}/bootstrap\"\n+      # Debian does not need minor version in the bootstrap repo URL\n+     elif [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n+     else\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    fi\n     CLIENT_REPO_NAME=\"susemanager_bootstrap\"\n     CLIENT_REPO_FILE=\"/etc/apt/sources.list.d/$CLIENT_REPO_NAME.list\"\n \n     setup_deb_bootstrap_repo\n \n+    # Debian vanilla install requires apt-transport-https prior salt-minion installation otherwise will fail\n+    APT_TRANSPORT_HTTPS_DEB=$(wget -O - http://$HOSTNAME/pub/repositories/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap/pool/main/a/apt/ /dev/null 2>&1 |grep apt-transport-https|cut -d '\"' -f 6)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA2OTQ0MQ==", "bodyText": "Well, IIUC, you could add here the bootstrap repo with HTTP and leave it as it is, because later the script will disable all repositories and add the one for bootstrap with HTTPS, right?", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380069441", "createdAt": "2020-02-17T09:31:57Z", "author": {"login": "juliogonzalez"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_VARIANT_ID}}/bootstrap\"\n+      # Debian does not need minor version in the bootstrap repo URL\n+     elif [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n+     else\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    fi\n     CLIENT_REPO_NAME=\"susemanager_bootstrap\"\n     CLIENT_REPO_FILE=\"/etc/apt/sources.list.d/$CLIENT_REPO_NAME.list\"\n \n     setup_deb_bootstrap_repo\n \n+    # Debian vanilla install requires apt-transport-https prior salt-minion installation otherwise will fail\n+    APT_TRANSPORT_HTTPS_DEB=$(wget -O - http://$HOSTNAME/pub/repositories/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap/pool/main/a/apt/ /dev/null 2>&1 |grep apt-transport-https|cut -d '\"' -f 6)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA3NzI3Ng==", "bodyText": "Please only for debian in this case. We have customers blocking port 80.\nThey cannot do this when they want to have debian. But for the other OSes it would be better to support HTTPS from the first interaction.", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380077276", "createdAt": "2020-02-17T09:46:22Z", "author": {"login": "mcalmer"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_VARIANT_ID}}/bootstrap\"\n+      # Debian does not need minor version in the bootstrap repo URL\n+     elif [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n+     else\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    fi\n     CLIENT_REPO_NAME=\"susemanager_bootstrap\"\n     CLIENT_REPO_FILE=\"/etc/apt/sources.list.d/$CLIENT_REPO_NAME.list\"\n \n     setup_deb_bootstrap_repo\n \n+    # Debian vanilla install requires apt-transport-https prior salt-minion installation otherwise will fail\n+    APT_TRANSPORT_HTTPS_DEB=$(wget -O - http://$HOSTNAME/pub/repositories/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap/pool/main/a/apt/ /dev/null 2>&1 |grep apt-transport-https|cut -d '\"' -f 6)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA3OTk2OQ==", "bodyText": "@mcalmer I don't understand what you mean. I am not saying we do it for all OS.\nI am saying we could add the here (for Debian) the bootstrap repo with HTTP, install the package, and then the script will take care of disabling this one and enabling the one with HTTPS .", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380079969", "createdAt": "2020-02-17T09:51:18Z", "author": {"login": "juliogonzalez"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_VARIANT_ID}}/bootstrap\"\n+      # Debian does not need minor version in the bootstrap repo URL\n+     elif [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n+     else\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    fi\n     CLIENT_REPO_NAME=\"susemanager_bootstrap\"\n     CLIENT_REPO_FILE=\"/etc/apt/sources.list.d/$CLIENT_REPO_NAME.list\"\n \n     setup_deb_bootstrap_repo\n \n+    # Debian vanilla install requires apt-transport-https prior salt-minion installation otherwise will fail\n+    APT_TRANSPORT_HTTPS_DEB=$(wget -O - http://$HOSTNAME/pub/repositories/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap/pool/main/a/apt/ /dev/null 2>&1 |grep apt-transport-https|cut -d '\"' -f 6)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM1ODc4MA==", "bodyText": "Hi guys, thanks for the feedback. I can have a look to achieve what Julio proposed. I am assuming a similar approach would be recommended for the web UI bootstrap as well?", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380358780", "createdAt": "2020-02-17T20:39:56Z", "author": {"login": "gnuninu"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_VARIANT_ID}}/bootstrap\"\n+      # Debian does not need minor version in the bootstrap repo URL\n+     elif [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n+     else\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    fi\n     CLIENT_REPO_NAME=\"susemanager_bootstrap\"\n     CLIENT_REPO_FILE=\"/etc/apt/sources.list.d/$CLIENT_REPO_NAME.list\"\n \n     setup_deb_bootstrap_repo\n \n+    # Debian vanilla install requires apt-transport-https prior salt-minion installation otherwise will fail\n+    APT_TRANSPORT_HTTPS_DEB=$(wget -O - http://$HOSTNAME/pub/repositories/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap/pool/main/a/apt/ /dev/null 2>&1 |grep apt-transport-https|cut -d '\"' -f 6)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTMzMDk5OnYy", "diffSide": "RIGHT", "path": "susemanager-utils/susemanager-sls/susemanager-sls.changes", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMzowMToxOVrOFqVx1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMzowMToxOVrOFqVx1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTMzMg==", "bodyText": "Leave only:\n- Enable support for bootstrapping Debian 9 and 10\n\nAnd let's test Debian 10 :-)", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379941332", "createdAt": "2020-02-16T23:01:19Z", "author": {"login": "juliogonzalez"}, "path": "susemanager-utils/susemanager-sls/susemanager-sls.changes", "diffHunk": "@@ -1,3 +1,4 @@\n+- Enable support for bootstrapping Debian 9 and 10 (debian 10 yet to be fully tested) (gnuninu) - nicola.dimarzo@suse.com", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTMzMTM4OnYy", "diffSide": "RIGHT", "path": "susemanager/susemanager.changes", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMzowMTo1NlrOFqVyBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMzowMTo1NlrOFqVyBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTM4Mg==", "bodyText": "Same.", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379941382", "createdAt": "2020-02-16T23:01:56Z", "author": {"login": "juliogonzalez"}, "path": "susemanager/susemanager.changes", "diffHunk": "@@ -1,3 +1,4 @@\n+- Enable support for bootstrapping Debian 9 and 10 (debian 10 yet to be fully tested) (gnuninu) - nicola.dimarzo@suse.com", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTMzMTcwOnYy", "diffSide": "RIGHT", "path": "susemanager/susemanager.changes", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMzowMjoyOFrOFqVyKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMzowMjoyOFrOFqVyKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTQxOQ==", "bodyText": "I hope autobuild will not complain about this cleanup. FMPOV it's OK :-)", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379941419", "createdAt": "2020-02-16T23:02:28Z", "author": {"login": "juliogonzalez"}, "path": "susemanager/susemanager.changes", "diffHunk": "@@ -142,7 +143,7 @@ Wed Jan 16 12:26:43 CET 2019 - jgonzalez@suse.com\n \n - version 4.0.4-1\n - ensure POSTGRES_LANG is correctly set (bsc#1121787)\n-- add bootstrap repo definition for OES 2018 SP1 (bsc#1116826) \n+- add bootstrap repo definition for OES 2018 SP1 (bsc#1116826)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MTMzMjQ0OnYy", "diffSide": "RIGHT", "path": "susemanager/src/mgr_bootstrap_data.py", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQyMzowMzo0MVrOFqVyjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOTozMDoyMFrOFyMINw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTUxNw==", "bodyText": "To be honest, if we are going to have debian9-amd64-uyuni here, I wonder if we shouldn't have the uyuni prefix at spacewalk-common-channels repositories as well, in preparation for a future Debian support at SUSE Manager.\n@paususe?", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379941517", "createdAt": "2020-02-16T23:03:41Z", "author": {"login": "juliogonzalez"}, "path": "susemanager/src/mgr_bootstrap_data.py", "diffHunk": "@@ -893,5 +997,15 @@\n         'BASECHANNEL' : 'ubuntu-18.04-pool-amd64-uyuni', 'PKGLIST' : PKGLISTUBUNTU1804,\n         'DEST' : '/srv/www/htdocs/pub/repositories/ubuntu/18/4/bootstrap/',\n         'TYPE' : 'deb'\n-    }\n+    },\n+    'debian9-amd64-uyuni' : {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDMwNTAwMw==", "bodyText": "Yes", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380305003", "createdAt": "2020-02-17T17:34:35Z", "author": {"login": "paususe"}, "path": "susemanager/src/mgr_bootstrap_data.py", "diffHunk": "@@ -893,5 +997,15 @@\n         'BASECHANNEL' : 'ubuntu-18.04-pool-amd64-uyuni', 'PKGLIST' : PKGLISTUBUNTU1804,\n         'DEST' : '/srv/www/htdocs/pub/repositories/ubuntu/18/4/bootstrap/',\n         'TYPE' : 'deb'\n-    }\n+    },\n+    'debian9-amd64-uyuni' : {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTUxNw=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM5OTk1Mw==", "bodyText": "just to clarify, shall we leave the suffix -uyuni as it is in mgr_bootstrap_data.py, is it ok?", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380399953", "createdAt": "2020-02-17T23:48:45Z", "author": {"login": "gnuninu"}, "path": "susemanager/src/mgr_bootstrap_data.py", "diffHunk": "@@ -893,5 +997,15 @@\n         'BASECHANNEL' : 'ubuntu-18.04-pool-amd64-uyuni', 'PKGLIST' : PKGLISTUBUNTU1804,\n         'DEST' : '/srv/www/htdocs/pub/repositories/ubuntu/18/4/bootstrap/',\n         'TYPE' : 'deb'\n-    }\n+    },\n+    'debian9-amd64-uyuni' : {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTUxNw=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3MTgzMQ==", "bodyText": "yes!", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r388171831", "createdAt": "2020-03-05T09:30:20Z", "author": {"login": "juliogonzalez"}, "path": "susemanager/src/mgr_bootstrap_data.py", "diffHunk": "@@ -893,5 +997,15 @@\n         'BASECHANNEL' : 'ubuntu-18.04-pool-amd64-uyuni', 'PKGLIST' : PKGLISTUBUNTU1804,\n         'DEST' : '/srv/www/htdocs/pub/repositories/ubuntu/18/4/bootstrap/',\n         'TYPE' : 'deb'\n-    }\n+    },\n+    'debian9-amd64-uyuni' : {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTUxNw=="}, "originalCommit": {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe"}, "originalPosition": 117}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNDg5NjQzOnYy", "diffSide": "RIGHT", "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOTozMTo0M1rOFyMLQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOTozMTo0M1rOFyMLQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3MjYxMQ==", "bodyText": "Please add a changelog entry at spacewalk-certs-tools.changes.", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r388172611", "createdAt": "2020-03-05T09:31:43Z", "author": {"login": "juliogonzalez"}, "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,7 +622,12 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    # Debian does not need minor version in the bootstrap repo URL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b60a757daa0c0017f04ce791d10e7415ed04409e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNDkwNjQ2OnYy", "diffSide": "RIGHT", "path": "utils/spacewalk-common-channels.ini", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwOTozNDozNVrOFyMRlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMDoyODo1MVrOFyOIPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3NDIyOQ==", "bodyText": "As in the end we are adding -uyuni  suffix to bootstrap to support Debian both now on Uyuni and on SUSE Manager later, may I suggest you duplocate Debian 9 and Debian 10 here, and you add -uyuni to the labels and names, just as we do for Ubuntu above?\nThis will also require a change at susemanager/src/mgr_bootstrap_data.py and the doc for PR.", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r388174229", "createdAt": "2020-03-05T09:34:35Z", "author": {"login": "juliogonzalez"}, "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -1332,6 +1332,24 @@ checksum = sha256\n base_channels = debian-9-pool-amd64\n repo_url = http://security-cdn.debian.org/debian-security/dists/stretch/updates/main/binary-amd64/\n \n+[debian-9-amd64-uyuni-client-master]\n+label    = debian-9-amd64-uyuni-client-master\n+name     = Uyuni Master Client Tools for Debian 9 Stretch AMD64\n+archs    = amd64-deb\n+repo_type = deb\n+checksum = sha256\n+base_channels = debian-9-pool-amd64\n+repo_url = https://download.opensuse.org/repositories/systemsmanagement:/Uyuni:/Master:/Debian9-Uyuni-Client-Tools/Debian_9/\n+\n+[debian-9-amd64-uyuni-client-stable]\n+label    = debian-9-amd64-uyuni-client-stable\n+name     = Uyuni Stable Client Tools for Debian 9 Stretch AMD64\n+archs    = amd64-deb\n+repo_type = deb\n+checksum = sha256\n+base_channels = debian-9-pool-amd64\n+repo_url = https://download.opensuse.org/repositories/systemsmanagement:/Uyuni:/Stable:/Debian9-Uyuni-Client-Tools/Debian_9/\n+\n [debian-10-pool-amd64]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b60a757daa0c0017f04ce791d10e7415ed04409e"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIwNDYwNQ==", "bodyText": "no probs will do that", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r388204605", "createdAt": "2020-03-05T10:28:51Z", "author": {"login": "gnuninu"}, "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -1332,6 +1332,24 @@ checksum = sha256\n base_channels = debian-9-pool-amd64\n repo_url = http://security-cdn.debian.org/debian-security/dists/stretch/updates/main/binary-amd64/\n \n+[debian-9-amd64-uyuni-client-master]\n+label    = debian-9-amd64-uyuni-client-master\n+name     = Uyuni Master Client Tools for Debian 9 Stretch AMD64\n+archs    = amd64-deb\n+repo_type = deb\n+checksum = sha256\n+base_channels = debian-9-pool-amd64\n+repo_url = https://download.opensuse.org/repositories/systemsmanagement:/Uyuni:/Master:/Debian9-Uyuni-Client-Tools/Debian_9/\n+\n+[debian-9-amd64-uyuni-client-stable]\n+label    = debian-9-amd64-uyuni-client-stable\n+name     = Uyuni Stable Client Tools for Debian 9 Stretch AMD64\n+archs    = amd64-deb\n+repo_type = deb\n+checksum = sha256\n+base_channels = debian-9-pool-amd64\n+repo_url = https://download.opensuse.org/repositories/systemsmanagement:/Uyuni:/Stable:/Debian9-Uyuni-Client-Tools/Debian_9/\n+\n [debian-10-pool-amd64]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3NDIyOQ=="}, "originalCommit": {"oid": "b60a757daa0c0017f04ce791d10e7415ed04409e"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMzc4ODI1OnYy", "diffSide": "RIGHT", "path": "utils/spacewalk-common-channels.ini", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwODozNzoxNFrOFzeZog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTowNToyM1rOF0THaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTc3OA==", "bodyText": "Mmmmm, why do we have this and the next channel, if we already have debian-10-amd64-uyuni-client-stable and debian-10-amd64-uyuni-client-master below?\nAlso, despite it was not changed by this PR, can we change -master to -devel as we have for all other OS, and remove -stable as we have for all other OS?", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r389519778", "createdAt": "2020-03-09T08:37:14Z", "author": {"login": "juliogonzalez"}, "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -1379,13 +1426,60 @@ checksum = sha256\n base_channels = debian-10-pool-amd64\n repo_url = http://security-cdn.debian.org/debian-security/dists/buster/updates/main/binary-amd64/\n \n+[debian-10-amd64-client-master]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8af42b7841fd8a0a2696b80a12c4ec66bc82f155"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2OTQ4NA==", "bodyText": "why do we have this and the next channel, if we already have debian-10-amd64-uyuni-client-stable and debian-10-amd64-uyuni-client-master below?\n\nbecause i assumed we want to have these repo duplicated without -uyuni suffix for later SUMA support?\n\nAlso, despite it was not changed by this PR, can we change -master to -devel as we have for all other OS, and remove -stable as we have for all other OS\n\n.\nYeah fine.\nI have noticed something else, we need to add for Uyuni also in the  name line otherwise spacewalk-common-channels complains it exists.", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r389569484", "createdAt": "2020-03-09T10:18:09Z", "author": {"login": "gnuninu"}, "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -1379,13 +1426,60 @@ checksum = sha256\n base_channels = debian-10-pool-amd64\n repo_url = http://security-cdn.debian.org/debian-security/dists/buster/updates/main/binary-amd64/\n \n+[debian-10-amd64-client-master]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTc3OA=="}, "originalCommit": {"oid": "8af42b7841fd8a0a2696b80a12c4ec66bc82f155"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU4NTMxMA==", "bodyText": "because i assumed we want to have these repo duplicated without -uyuni suffix for later SUMA support?\n\nNot really. SUSE Manager would have its own client tools on SCC, without using `spacewalk-common-channels' :-)\nHowever we still need the other stuff (not the clients) as SCC would not provide Debian repositories.", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r389585310", "createdAt": "2020-03-09T10:50:02Z", "author": {"login": "juliogonzalez"}, "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -1379,13 +1426,60 @@ checksum = sha256\n base_channels = debian-10-pool-amd64\n repo_url = http://security-cdn.debian.org/debian-security/dists/buster/updates/main/binary-amd64/\n \n+[debian-10-amd64-client-master]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTc3OA=="}, "originalCommit": {"oid": "8af42b7841fd8a0a2696b80a12c4ec66bc82f155"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU4ODA3NA==", "bodyText": "gotcha!\nlet me wrap up and send over\ndoc updated already", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r389588074", "createdAt": "2020-03-09T10:55:41Z", "author": {"login": "gnuninu"}, "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -1379,13 +1426,60 @@ checksum = sha256\n base_channels = debian-10-pool-amd64\n repo_url = http://security-cdn.debian.org/debian-security/dists/buster/updates/main/binary-amd64/\n \n+[debian-10-amd64-client-master]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTc3OA=="}, "originalCommit": {"oid": "8af42b7841fd8a0a2696b80a12c4ec66bc82f155"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM4MzQ2Nw==", "bodyText": "done the changes. let me know if it's ok", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r390383467", "createdAt": "2020-03-10T15:05:23Z", "author": {"login": "gnuninu"}, "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -1379,13 +1426,60 @@ checksum = sha256\n base_channels = debian-10-pool-amd64\n repo_url = http://security-cdn.debian.org/debian-security/dists/buster/updates/main/binary-amd64/\n \n+[debian-10-amd64-client-master]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTc3OA=="}, "originalCommit": {"oid": "8af42b7841fd8a0a2696b80a12c4ec66bc82f155"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyNjUxMzE4OnYy", "diffSide": "RIGHT", "path": "susemanager-utils/susemanager-sls/salt/bootstrap/init.sls", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMDozMDo0N1rOF1ZBAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMzoxMzowOFrOF1y6TQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyODcwNw==", "bodyText": "@gnuninu why is this commented?\nLooks to me that without this, Ubuntu won't work, as it uses osrelease[0] and osrelease[1]\nOr am I missing anything?", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r391528707", "createdAt": "2020-03-12T10:30:47Z", "author": {"login": "juliogonzalez"}, "path": "susemanager-utils/susemanager-sls/salt/bootstrap/init.sls", "diffHunk": "@@ -33,11 +33,11 @@ mgr_server_localhost_alias_absent:\n {% set bootstrap_repo_url = 'https://' ~ salt['pillar.get']('mgr_server') ~ '/pub/repositories/' ~ os_base ~ '/' ~ grains['osmajorrelease'] ~ '/bootstrap/' %}\n {% endif %}\n {%- elif grains['os_family'] == 'Debian' %}\n-{%- set osrelease = grains['osrelease'].split('.') %}\n+#{%- set osrelease = grains['osrelease'].split('.') %}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6e6f3f88273af822e0676d477643be46007adeb"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk1Mjk3Mw==", "bodyText": "@gnuninu why is this commented?\n\nthat change was probably inherited by the first tests i ran to fix the URL for Debian, indeed it's necessary for Ubuntu so i am removing the comment.\n\nLooks to me that without this, Ubuntu won't work, as it uses osrelease[0] and osrelease[1]\n\nyes Correct because it sets osrelease with the python string method split('.')", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r391952973", "createdAt": "2020-03-12T23:13:08Z", "author": {"login": "gnuninu"}, "path": "susemanager-utils/susemanager-sls/salt/bootstrap/init.sls", "diffHunk": "@@ -33,11 +33,11 @@ mgr_server_localhost_alias_absent:\n {% set bootstrap_repo_url = 'https://' ~ salt['pillar.get']('mgr_server') ~ '/pub/repositories/' ~ os_base ~ '/' ~ grains['osmajorrelease'] ~ '/bootstrap/' %}\n {% endif %}\n {%- elif grains['os_family'] == 'Debian' %}\n-{%- set osrelease = grains['osrelease'].split('.') %}\n+#{%- set osrelease = grains['osrelease'].split('.') %}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyODcwNw=="}, "originalCommit": {"oid": "f6e6f3f88273af822e0676d477643be46007adeb"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyNjUxNDkwOnYy", "diffSide": "RIGHT", "path": "susemanager/susemanager.changes", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMDozMToxOFrOF1ZCCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMDozMToxOFrOF1ZCCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyODk2OA==", "bodyText": "Don't add your email to the changelog entry.", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r391528968", "createdAt": "2020-03-12T10:31:18Z", "author": {"login": "juliogonzalez"}, "path": "susemanager/susemanager.changes", "diffHunk": "@@ -1,3 +1,4 @@\n+- Enable support for bootstrapping Debian 9 and 10 - nicola.dimarzo@suse.com", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6e6f3f88273af822e0676d477643be46007adeb"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 164, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}