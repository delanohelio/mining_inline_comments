{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NjI2MTA4", "number": 1933, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToxNDo0OFrODhciwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToxNjozMFrODhclDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2Mzk3MjUwOnYy", "diffSide": "RIGHT", "path": "testsuite/features/core/proxy_register_as_minion_with_script.feature", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToxNDo0OFrOFsLg_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTo0Nzo1MVrOFsMq7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3MDMzNQ==", "bodyText": "When", "url": "https://github.com/uyuni-project/uyuni/pull/1933#discussion_r381870335", "createdAt": "2020-02-20T09:14:48Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/core/proxy_register_as_minion_with_script.feature", "diffHunk": "@@ -22,9 +22,9 @@ Feature: Setup SUSE Manager proxy\n @proxy\n   Scenario: Accept the key for the proxy\n     Given I am authorized as \"testing\" with password \"testing\"\n-    When I go to the minion onboarding page\n-    Then I should see a \"pending\" text\n-    When I accept \"proxy\" key\n+    And I go to the minion onboarding page", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1a342066d839500f603a16679054856ad9717ba"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3ODkyNw==", "bodyText": "Do you mean all of them to start with when, like this:\n    Given I am authorized as \"testing\" with password \"testing\"\n    When I go to the minion onboarding page\n    When I wait until I see \"pending\" text, refreshing the page\n    When I accept \"proxy\" key\n\nOr you want instead I change just the last And with When?", "url": "https://github.com/uyuni-project/uyuni/pull/1933#discussion_r381878927", "createdAt": "2020-02-20T09:29:52Z", "author": {"login": "calancha"}, "path": "testsuite/features/core/proxy_register_as_minion_with_script.feature", "diffHunk": "@@ -22,9 +22,9 @@ Feature: Setup SUSE Manager proxy\n @proxy\n   Scenario: Accept the key for the proxy\n     Given I am authorized as \"testing\" with password \"testing\"\n-    When I go to the minion onboarding page\n-    Then I should see a \"pending\" text\n-    When I accept \"proxy\" key\n+    And I go to the minion onboarding page", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3MDMzNQ=="}, "originalCommit": {"oid": "f1a342066d839500f603a16679054856ad9717ba"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg4OTI2MQ==", "bodyText": "Do you mean all of them to start with when, like this:\n    Given I am authorized as \"testing\" with password \"testing\"\n    When I go to the minion onboarding page\n    When I wait until I see \"pending\" text, refreshing the page\n    When I accept \"proxy\" key\n\nOr you want instead I change just the last And with When?\n\nPlease change just first \"And\" into \"When\". The following \"And\"s stay.\nGiven\nWhen\nAnd\nAnd", "url": "https://github.com/uyuni-project/uyuni/pull/1933#discussion_r381889261", "createdAt": "2020-02-20T09:47:51Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/core/proxy_register_as_minion_with_script.feature", "diffHunk": "@@ -22,9 +22,9 @@ Feature: Setup SUSE Manager proxy\n @proxy\n   Scenario: Accept the key for the proxy\n     Given I am authorized as \"testing\" with password \"testing\"\n-    When I go to the minion onboarding page\n-    Then I should see a \"pending\" text\n-    When I accept \"proxy\" key\n+    And I go to the minion onboarding page", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3MDMzNQ=="}, "originalCommit": {"oid": "f1a342066d839500f603a16679054856ad9717ba"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2Mzk3NjQ1OnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/command_steps.rb", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToxNTo1NVrOFsLjVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOTo0OToxMVrOFsMt9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3MDkzNA==", "bodyText": "ok, nice, thanks", "url": "https://github.com/uyuni-project/uyuni/pull/1933#discussion_r381870934", "createdAt": "2020-02-20T09:15:55Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -834,7 +834,14 @@\n   filename = File.basename(path)\n   cmd = \"configure-proxy.sh --non-interactive --rhn-user=admin --rhn-password=admin --answer-file=#{filename}\"\n   proxy_timeout = 600\n-  $proxy.run(cmd, true, proxy_timeout, 'root')\n+  return_code = 0\n+  # Workaround issue https://github.com/SUSE/spacewalk/issues/9165\n+  begin\n+    return_code = $proxy.run(cmd, true, proxy_timeout, 'root')\n+  rescue StandardError => e\n+    puts \"Catched exception (see bsc#1138952): #{e}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1a342066d839500f603a16679054856ad9717ba"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg5MDAzOQ==", "bodyText": "It could be a good idea to tag this with the following comment:\n# WORKAROUND bsc#1138952", "url": "https://github.com/uyuni-project/uyuni/pull/1933#discussion_r381890039", "createdAt": "2020-02-20T09:49:11Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -834,7 +834,14 @@\n   filename = File.basename(path)\n   cmd = \"configure-proxy.sh --non-interactive --rhn-user=admin --rhn-password=admin --answer-file=#{filename}\"\n   proxy_timeout = 600\n-  $proxy.run(cmd, true, proxy_timeout, 'root')\n+  return_code = 0\n+  # Workaround issue https://github.com/SUSE/spacewalk/issues/9165\n+  begin\n+    return_code = $proxy.run(cmd, true, proxy_timeout, 'root')\n+  rescue StandardError => e\n+    puts \"Catched exception (see bsc#1138952): #{e}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3MDkzNA=="}, "originalCommit": {"oid": "f1a342066d839500f603a16679054856ad9717ba"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2Mzk3ODM5OnYy", "diffSide": "RIGHT", "path": "testsuite/run_sets/core.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToxNjozMFrOFsLklA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwOToxNjozMFrOFsLklA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg3MTI1Mg==", "bodyText": "Finally... :-)", "url": "https://github.com/uyuni-project/uyuni/pull/1933#discussion_r381871252", "createdAt": "2020-02-20T09:16:30Z", "author": {"login": "Bischoff"}, "path": "testsuite/run_sets/core.yml", "diffHunk": "@@ -23,7 +23,7 @@\n   # one of: proxy_register_as_trad_with_script.feature\n   #         proxy_register_as_minion_with_script.feature\n   #         proxy_register_as_minion_with_gui.feature\n-- features/core/proxy_register_as_minion_with_gui.feature\n+- features/core/proxy_register_as_minion_with_script.feature", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1a342066d839500f603a16679054856ad9717ba"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 176, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}