{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5NjIyNTY1", "number": 2572, "title": "move token information into apt auth.conf on Debian 10...", "bodyText": "What does this PR change?\nSince Debian 10, apt uses a netrc kind of file to hide the authentication\ninformation that is needed to access repositories. It moves the token information\nout of the \"sources.list\" file on Debian 10 systems into\nnew \"auth.conf\" files.\nWarnings that are shown without the change\nN: Usage of apt_auth.conf(5) should be preferred over embedding login information directly in the sources.list(5) entry for https://...\n\nGUI diff\nNo difference.\nBefore:\nAfter:\n\n DONE\n\nDocumentation\n\n DONE\n\nTest coverage\n\n\nNo tests:\n\n\n DONE\n\n\nLinks\nFixes #\nTracks #\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-09-04T12:04:31Z", "url": "https://github.com/uyuni-project/uyuni/pull/2572", "merged": true, "mergeCommit": {"oid": "74a1317927d5072a995004edd7e7f0b531e7021e"}, "closed": true, "closedAt": "2020-10-02T10:04:33Z", "author": {"login": "rpasche"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFjDP-gH2gAyNDc5NjIyNTY1Ojk3ZjE3YTVlM2MzMjljYjVhYTA0ZGVmZmJkZDkxZmUwYjM4YjNjZWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOjAHrgH2gAyNDc5NjIyNTY1OmNmZjI0MWM4ZTg1ZWUzMTU5NDdiNWRhOWYyYzYyNWM0MTIyMjE2NGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "97f17a5e3c329cb5aa04deffbdd91fe0b38b3cea", "author": {"user": {"login": "rpasche", "name": "Robert Paschedag"}}, "url": "https://github.com/uyuni-project/uyuni/commit/97f17a5e3c329cb5aa04deffbdd91fe0b38b3cea", "committedDate": "2020-09-04T10:57:05Z", "message": "move token information into apt auth.conf on Debian 10...\n\nSince Debian 10, apt uses a netrc kind of file to hide the authentication\ninformation that needed to access repositories."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6da150f8fdc8634a59545945b559e6b41218f74", "author": {"user": {"login": "rpasche", "name": "Robert Paschedag"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f6da150f8fdc8634a59545945b559e6b41218f74", "committedDate": "2020-09-05T20:14:57Z", "message": "move repository login information also for Ubuntu >= 18 (like for Debian 10)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3e1fd91df4af574216ff12b5906bd2cd316afc2", "author": {"user": {"login": "rpasche", "name": "Robert Paschedag"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f3e1fd91df4af574216ff12b5906bd2cd316afc2", "committedDate": "2020-09-07T11:36:59Z", "message": "remove unneeded check for os_family within aptauth.conf"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MjI0NzEw", "url": "https://github.com/uyuni-project/uyuni/pull/2572#pullrequestreview-497224710", "createdAt": "2020-09-28T06:44:11Z", "commit": {"oid": "f3e1fd91df4af574216ff12b5906bd2cd316afc2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNjo0NDoxMVrOHYwVpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNjo0NDoxMVrOHYwVpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTcxOTg0Ng==", "bodyText": "Don't forget to remove this file when deleting a minion (see susemanager-utils/susemanager-sls/salt/cleanup_minion/init.sls and susemanager-utils/susemanager-sls/salt/cleanup_ssh_minion/init.sls).", "url": "https://github.com/uyuni-project/uyuni/pull/2572#discussion_r495719846", "createdAt": "2020-09-28T06:44:11Z", "author": {"login": "mateiw"}, "path": "susemanager-utils/susemanager-sls/salt/channels/init.sls", "diffHunk": "@@ -72,6 +72,18 @@ mgrchannels_repo:\n {%- endif %}\n {%- endif %}\n \n+{%- if (grains['os'] == 'Debian' and grains['osmajorrelease']|int >= 10) or (grains['os'] == 'Ubuntu' and grains['osmajorrelease']|int >= 18) %}\n+aptauth_conf:\n+  file.managed:\n+    - name: \"/etc/apt/auth.conf.d/susemanager.conf\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3e1fd91df4af574216ff12b5906bd2cd316afc2"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0eec77335afbbc489a7175710b55ffce4226bfb", "author": {"user": {"login": "rpasche", "name": "Robert Paschedag"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b0eec77335afbbc489a7175710b55ffce4226bfb", "committedDate": "2020-09-28T19:46:17Z", "message": "remove debian auth.conf.d file on minion cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MzA3MDM3", "url": "https://github.com/uyuni-project/uyuni/pull/2572#pullrequestreview-498307037", "createdAt": "2020-09-29T09:59:57Z", "commit": {"oid": "b0eec77335afbbc489a7175710b55ffce4226bfb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwOTo1OTo1N1rOHZlr3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwOTo1OTo1N1rOHZlr3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjU5Mzg4NQ==", "bodyText": "file.absent doesn't seem to support multiple names.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            mgrchannels_repo_clean_channels:\n          \n          \n            \n              file.absent:\n          \n          \n            \n                - name: /etc/apt/sources.list.d/susemanager:channels.list\n          \n          \n            \n                - name: /etc/apt/auth.conf.d/susemanager.conf\n          \n          \n            \n            mgrchannels_repo_clean_channels:\n          \n          \n            \n              file.absent:\n          \n          \n            \n                - name: /etc/apt/sources.list.d/susemanager:channels.list\n          \n          \n            \n            mgrchannels_repo_clean_auth:\n          \n          \n            \n              file.absent:\n          \n          \n            \n                - name: /etc/apt/auth.conf.d/susemanager.conf", "url": "https://github.com/uyuni-project/uyuni/pull/2572#discussion_r496593885", "createdAt": "2020-09-29T09:59:57Z", "author": {"login": "mateiw"}, "path": "susemanager-utils/susemanager-sls/salt/cleanup_minion/init.sls", "diffHunk": "@@ -12,6 +12,7 @@ mgrchannels_repo_clean_all:\n mgrchannels_repo_clean_channels:\n   file.absent:\n     - name: /etc/apt/sources.list.d/susemanager:channels.list\n+    - name: /etc/apt/auth.conf.d/susemanager.conf", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0eec77335afbbc489a7175710b55ffce4226bfb"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee7e6e13bd5bd9424cb1b7eba44db63497e838b1", "author": {"user": {"login": "rpasche", "name": "Robert Paschedag"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ee7e6e13bd5bd9424cb1b7eba44db63497e838b1", "committedDate": "2020-09-29T11:15:11Z", "message": "Use suggested patch to also remove debian auth file\n\nCo-authored-by: Matei Albu <mateiw@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMDA1NjI2", "url": "https://github.com/uyuni-project/uyuni/pull/2572#pullrequestreview-501005626", "createdAt": "2020-10-02T09:56:33Z", "commit": {"oid": "ee7e6e13bd5bd9424cb1b7eba44db63497e838b1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cff241c8e85ee315947b5da9f2c625c41222164f", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/cff241c8e85ee315947b5da9f2c625c41222164f", "committedDate": "2020-10-02T09:58:59Z", "message": "Merge branch 'master' into create_apt_auth_for_debian_10"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1136, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}