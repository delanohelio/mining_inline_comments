{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwMzA0NjYz", "number": 2952, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzoxMjo1NVrOE_uQdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzoxMjo1NVrOE_uQdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MjUzNjIxOnYy", "diffSide": "RIGHT", "path": "java/code/src/com/redhat/rhn/manager/channel/test/BaseRepoCommandTest.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNzoxMjo1NVrOH9lcvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwOTozNzowOVrOH_Imwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMzODc0OA==", "bodyText": "Why is this valid?", "url": "https://github.com/uyuni-project/uyuni/pull/2952#discussion_r534338748", "createdAt": "2020-12-02T17:12:55Z", "author": {"login": "mcalmer"}, "path": "java/code/src/com/redhat/rhn/manager/channel/test/BaseRepoCommandTest.java", "diffHunk": "@@ -130,4 +130,82 @@ private void validUrlInput(String url, String type) {\n             fail(\"valid repo type caused error: \" + url);\n         }\n     }\n+\n+    public void testRepoLabelInput() {\n+\n+        // Repository label must contain only letters, hyphens, periods, underscores and numeral\n+\n+        // I N V A L I D\n+        invalidRepoLabelInput(\"\");\n+        invalidRepoLabelInput(\"example/repo\");\n+        invalidRepoLabelInput(\"example;repo\");\n+        invalidRepoLabelInput(\"example_repo$\");\n+        invalidRepoLabelInput(\"my*examplerepo\");\n+        invalidRepoLabelInput(\"example^repo\");\n+\n+        // V A L I D\n+        validRepoLabelInput(\"my example repo\");\n+        validRepoLabelInput(\"my-example-repo\");\n+        validRepoLabelInput(\"my-example_repo\");\n+        validRepoLabelInput(\"my_repo_22\");\n+        validRepoLabelInput(\"My-Example-Repo\");\n+        validRepoLabelInput(\"My/Example/Repo/15\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d33d26c138d3132405d0abd4e703d061eb64b29"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQyMzI4Nw==", "bodyText": "I used here the same regex we have for validating the channel names. The slashes will be replaced as non-valid characters in the reposync plugins (as for already created custom repository labels in the database).\nOn the other hand, we could also not accept slashes from the UI to be safer and prevent posible related issues with path maybe even in some other places from the code base where we use the \"repository label\" to build paths in the system.", "url": "https://github.com/uyuni-project/uyuni/pull/2952#discussion_r535423287", "createdAt": "2020-12-03T17:09:38Z", "author": {"login": "meaksh"}, "path": "java/code/src/com/redhat/rhn/manager/channel/test/BaseRepoCommandTest.java", "diffHunk": "@@ -130,4 +130,82 @@ private void validUrlInput(String url, String type) {\n             fail(\"valid repo type caused error: \" + url);\n         }\n     }\n+\n+    public void testRepoLabelInput() {\n+\n+        // Repository label must contain only letters, hyphens, periods, underscores and numeral\n+\n+        // I N V A L I D\n+        invalidRepoLabelInput(\"\");\n+        invalidRepoLabelInput(\"example/repo\");\n+        invalidRepoLabelInput(\"example;repo\");\n+        invalidRepoLabelInput(\"example_repo$\");\n+        invalidRepoLabelInput(\"my*examplerepo\");\n+        invalidRepoLabelInput(\"example^repo\");\n+\n+        // V A L I D\n+        validRepoLabelInput(\"my example repo\");\n+        validRepoLabelInput(\"my-example-repo\");\n+        validRepoLabelInput(\"my-example_repo\");\n+        validRepoLabelInput(\"my_repo_22\");\n+        validRepoLabelInput(\"My-Example-Repo\");\n+        validRepoLabelInput(\"My/Example/Repo/15\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMzODc0OA=="}, "originalCommit": {"oid": "8d33d26c138d3132405d0abd4e703d061eb64b29"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQzNTQ5Ng==", "bodyText": "What I mean is: in Line 140 we have this test:\n    invalidRepoLabelInput(\"example/repo\");\n\nWhy is \"example/repo\" INVALID but \"My/Example/Repo/15\" is VALID ?\nIs it not because of the slash?", "url": "https://github.com/uyuni-project/uyuni/pull/2952#discussion_r535435496", "createdAt": "2020-12-03T17:26:44Z", "author": {"login": "mcalmer"}, "path": "java/code/src/com/redhat/rhn/manager/channel/test/BaseRepoCommandTest.java", "diffHunk": "@@ -130,4 +130,82 @@ private void validUrlInput(String url, String type) {\n             fail(\"valid repo type caused error: \" + url);\n         }\n     }\n+\n+    public void testRepoLabelInput() {\n+\n+        // Repository label must contain only letters, hyphens, periods, underscores and numeral\n+\n+        // I N V A L I D\n+        invalidRepoLabelInput(\"\");\n+        invalidRepoLabelInput(\"example/repo\");\n+        invalidRepoLabelInput(\"example;repo\");\n+        invalidRepoLabelInput(\"example_repo$\");\n+        invalidRepoLabelInput(\"my*examplerepo\");\n+        invalidRepoLabelInput(\"example^repo\");\n+\n+        // V A L I D\n+        validRepoLabelInput(\"my example repo\");\n+        validRepoLabelInput(\"my-example-repo\");\n+        validRepoLabelInput(\"my-example_repo\");\n+        validRepoLabelInput(\"my_repo_22\");\n+        validRepoLabelInput(\"My-Example-Repo\");\n+        validRepoLabelInput(\"My/Example/Repo/15\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMzODc0OA=="}, "originalCommit": {"oid": "8d33d26c138d3132405d0abd4e703d061eb64b29"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTk2MzMzMA==", "bodyText": "Oh! That's correct.. there should be a problem with the logic of the invalidRepoLabelInput and validRepoLabelInput helpers. I'll fix that.\nWith the current implementation, the \"slashes\" are allowed.", "url": "https://github.com/uyuni-project/uyuni/pull/2952#discussion_r535963330", "createdAt": "2020-12-04T09:37:09Z", "author": {"login": "meaksh"}, "path": "java/code/src/com/redhat/rhn/manager/channel/test/BaseRepoCommandTest.java", "diffHunk": "@@ -130,4 +130,82 @@ private void validUrlInput(String url, String type) {\n             fail(\"valid repo type caused error: \" + url);\n         }\n     }\n+\n+    public void testRepoLabelInput() {\n+\n+        // Repository label must contain only letters, hyphens, periods, underscores and numeral\n+\n+        // I N V A L I D\n+        invalidRepoLabelInput(\"\");\n+        invalidRepoLabelInput(\"example/repo\");\n+        invalidRepoLabelInput(\"example;repo\");\n+        invalidRepoLabelInput(\"example_repo$\");\n+        invalidRepoLabelInput(\"my*examplerepo\");\n+        invalidRepoLabelInput(\"example^repo\");\n+\n+        // V A L I D\n+        validRepoLabelInput(\"my example repo\");\n+        validRepoLabelInput(\"my-example-repo\");\n+        validRepoLabelInput(\"my-example_repo\");\n+        validRepoLabelInput(\"my_repo_22\");\n+        validRepoLabelInput(\"My-Example-Repo\");\n+        validRepoLabelInput(\"My/Example/Repo/15\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMzODc0OA=="}, "originalCommit": {"oid": "8d33d26c138d3132405d0abd4e703d061eb64b29"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3842, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}