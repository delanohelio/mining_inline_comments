{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NDQyNTg2", "number": 2931, "title": "Fix loading indicator for tables using SimpleDataProvider", "bodyText": "What does this PR change?\nFix loading indicator for tables using SimpleDataProvider\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: Fix\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests: Fix\n\n\n DONE\n\n\nLinks\nFixes SUSE/spacewalk#12799\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-11-30T10:17:00Z", "url": "https://github.com/uyuni-project/uyuni/pull/2931", "merged": true, "mergeCommit": {"oid": "9aad0849f05022d9decd9907868a0709c005e0ea"}, "closed": true, "closedAt": "2020-12-03T08:59:09Z", "author": {"login": "parlt91"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhk3_4gBqjQwNTE3OTExNjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh8AWEgFqTU0MjAzOTkzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3ff26d0c74357891f04c3cd5359a45cf138e5cf", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c3ff26d0c74357891f04c3cd5359a45cf138e5cf", "committedDate": "2020-11-30T10:14:02Z", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}, "afterCommit": {"oid": "3f563c6b28210d6bf5d8856788419534b277489b", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3f563c6b28210d6bf5d8856788419534b277489b", "committedDate": "2020-11-30T12:53:51Z", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f563c6b28210d6bf5d8856788419534b277489b", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3f563c6b28210d6bf5d8856788419534b277489b", "committedDate": "2020-11-30T12:53:51Z", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}, "afterCommit": {"oid": "e1b9944ff5e6787af63a0fa28478468996a46ef4", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e1b9944ff5e6787af63a0fa28478468996a46ef4", "committedDate": "2020-11-30T12:58:41Z", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1b9944ff5e6787af63a0fa28478468996a46ef4", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e1b9944ff5e6787af63a0fa28478468996a46ef4", "committedDate": "2020-11-30T12:58:41Z", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}, "afterCommit": {"oid": "aeea922f72ecb0e5a745774025c9e3ef41a87d9f", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/aeea922f72ecb0e5a745774025c9e3ef41a87d9f", "committedDate": "2020-11-30T13:02:47Z", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwOTA3NDAx", "url": "https://github.com/uyuni-project/uyuni/pull/2931#pullrequestreview-540907401", "createdAt": "2020-11-30T13:29:42Z", "commit": {"oid": "aeea922f72ecb0e5a745774025c9e3ef41a87d9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aeea922f72ecb0e5a745774025c9e3ef41a87d9f", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/aeea922f72ecb0e5a745774025c9e3ef41a87d9f", "committedDate": "2020-11-30T13:02:47Z", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}, "afterCommit": {"oid": "4f6df72151a63c2d27c0485c56033888c1decde6", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4f6df72151a63c2d27c0485c56033888c1decde6", "committedDate": "2020-11-30T13:41:29Z", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9e97d89c966669b4bc2803ff9f1e454653e64da", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b9e97d89c966669b4bc2803ff9f1e454653e64da", "committedDate": "2020-12-01T15:15:55Z", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f6df72151a63c2d27c0485c56033888c1decde6", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4f6df72151a63c2d27c0485c56033888c1decde6", "committedDate": "2020-11-30T13:41:29Z", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}, "afterCommit": {"oid": "ad30277183a9d52d1974bf637d732bbb91907f45", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ad30277183a9d52d1974bf637d732bbb91907f45", "committedDate": "2020-12-01T15:20:42Z", "message": "Unit test loading indicator using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9497fe9838e7dc6de5c8012da2445f98ea0e6cca", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9497fe9838e7dc6de5c8012da2445f98ea0e6cca", "committedDate": "2020-12-01T15:26:28Z", "message": "Unit test loading indicator using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad30277183a9d52d1974bf637d732bbb91907f45", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ad30277183a9d52d1974bf637d732bbb91907f45", "committedDate": "2020-12-01T15:20:42Z", "message": "Unit test loading indicator using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}, "afterCommit": {"oid": "9497fe9838e7dc6de5c8012da2445f98ea0e6cca", "author": {"user": {"login": "parlt91", "name": "Pascal Arlt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9497fe9838e7dc6de5c8012da2445f98ea0e6cca", "committedDate": "2020-12-01T15:26:28Z", "message": "Unit test loading indicator using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMDM5OTMy", "url": "https://github.com/uyuni-project/uyuni/pull/2931#pullrequestreview-542039932", "createdAt": "2020-12-01T15:51:04Z", "commit": {"oid": "ad30277183a9d52d1974bf637d732bbb91907f45"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNTo1MToxOVrOH8zd7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNTo1MToxOVrOH8zd7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxOTg1NA==", "bodyText": "Realistically this is redundant with the waitForElementToBeRemoved, but I think it's completely fine to be verbose here with the intention. Looks good to me. \ud83d\udc4d\nIn the long run, I would hope a smoother abstraction around loading will emerge as we write more tests for the table, but time will tell.", "url": "https://github.com/uyuni-project/uyuni/pull/2931#discussion_r533519854", "createdAt": "2020-12-01T15:51:19Z", "author": {"login": "Etheryte"}, "path": "web/html/src/components/table/Table.test.js", "diffHunk": "@@ -117,4 +117,28 @@ describe(\"Table component\", () => {\n       })\n     ).not.toBe(null);\n   });\n+\n+  test(\"loading indicator for tables using SimpleDataProvider\", async () => {\n+    const data = [{value: \"Value 0\"}];\n+\n+    const { rerender } = render(\n+      <Table {...baseProps} loading={true} />\n+    );\n+\n+    // Check if loading indicator appears\n+    expect(screen.queryByText(baseProps.loadingText)).not.toBe(null);\n+\n+    rerender(\n+      <Table {...baseProps} data={data} loading={false} >\n+        <Column columnKey=\"value\" cell={item => item.value} />\n+      </Table>\n+    );\n+    await waitForElementToBeRemoved(() =>\n+      screen.queryByText(baseProps.loadingText)\n+    );\n+\n+    // Check if loading indicator disappears and data is displayed\n+    expect(screen.queryByText(baseProps.loadingText)).toBe(null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9497fe9838e7dc6de5c8012da2445f98ea0e6cca"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 773, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}