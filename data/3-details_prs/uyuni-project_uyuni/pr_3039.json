{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNDU1OTE2", "number": 3039, "title": "Ignore duplicate NEVRAs in package profile update (bsc#1176018)", "bodyText": "With the newer output format, pkg.info_installed sometimes returns duplicate entries having the same NEVRA for a package. Since it's not an issue from SUMA's perspective, this update lets SUMA ignore the additional entries and continue the process.\nDocumentation\n\nNo documentation needed: Bugfix\n\nTest coverage\n\nUnit tests were adapted\n\nPort of: SUSE/spacewalk#13377\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-12-16T21:41:50Z", "url": "https://github.com/uyuni-project/uyuni/pull/3039", "merged": true, "mergeCommit": {"oid": "1b60b801b403e9d453456f2a84d14050d7c4c876"}, "closed": true, "closedAt": "2020-12-16T21:46:04Z", "author": {"login": "cbbayburt"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdm19_PAH2gAyNTQxNDU1OTE2OjFiNjBiODAxYjQwM2U5ZDQ1MzQ1NmYyYTg0ZDE0MDUwZDdjNGM4NzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdm98JoAFqTU1NDMyMjI2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1b60b801b403e9d453456f2a84d14050d7c4c876", "author": {"user": {"login": "cbbayburt", "name": "Can Bulut Bayburt"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1b60b801b403e9d453456f2a84d14050d7c4c876", "committedDate": "2020-12-16T21:39:02Z", "message": "Ignore duplicate NEVRAs in package profile update (bsc#1176018)\n\n(cherry picked from commit 5055d41ce428e7bed466365db940505e62113081)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MzIyMjY3", "url": "https://github.com/uyuni-project/uyuni/pull/3039#pullrequestreview-554322267", "createdAt": "2020-12-17T06:56:15Z", "commit": {"oid": "1b60b801b403e9d453456f2a84d14050d7c4c876"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNjo1NjoxNlrOIHnOVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNjo1NjoxNlrOIHnOVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDg1MzU4OA==", "bodyText": "@cbbayburt as the install date is something we use sometimes it would be good to keep the entry with the latest install date.", "url": "https://github.com/uyuni-project/uyuni/pull/3039#discussion_r544853588", "createdAt": "2020-12-17T06:56:16Z", "author": {"login": "mcalmer"}, "path": "java/code/src/com/suse/manager/utils/SaltUtils.java", "diffHunk": "@@ -1481,7 +1481,8 @@ private static void updatePackages(MinionServer server,\n                 )\n                 .collect(Collectors.toMap(\n                         SaltUtils::packageToKey,\n-                        Function.identity()\n+                        Function.identity(),\n+                        (first, duplicate) -> first // Deal with duplicates: ignore additional entries", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b60b801b403e9d453456f2a84d14050d7c4c876"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 837, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}