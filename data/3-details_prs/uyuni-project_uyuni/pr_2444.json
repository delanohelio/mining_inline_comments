{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MzQ1Njgy", "number": 2444, "title": "testsuite: Run most of the time with centos/ubuntu normal minions", "bodyText": "What does this PR change?\nRun most of the time with CentOS and Ubuntu normal minions, instead of running with SSH managed ones.\nSee https://github.com/SUSE/spacewalk/issues/11972\n\n\ntestsuite/features/core/allcli_sanity.feature\n\n\ntestsuite/features/secondary/allcli_config_channel.feature\n\n\ntestsuite/features/secondary/allcli_overview_systems_details.feature\n\n\ntestsuite/features/secondary/allcli_reboot.feature\n\n\ntestsuite/features/secondary/allcli_software_channels.feature\n\n\ntestsuite/features/secondary/allcli_system_group.feature\n\n\ntestsuite/features/secondary/min_centos_monitoring.feature\n\n\ntestsuite/features/secondary/min_centos_salt.feature\n\n\ntestsuite/features/secondary/min_ubuntu_salt.feature\n\n\ntestsuite/features/secondary/min_ubuntu_salt_install_package.feature\n\n\ntestsuite/features/secondary/minssh_centos_salt_install_package_and_patch.feature\n\n\ntestsuite/features/secondary/srv_group_union_intersection.feature\n\n\ntestsuite/features/secondary/trad_centos_client.feature\n\n\ntestsuite/features/init_clients/min_centos_salt.feature\nRename it from centos_minion.feature\n\n\ntestsuite/features/init_clients/min_ubuntu_salt.feature:\nRename it from ubuntu_ssh_minion.feature\n\n\ntestsuite/features/secondary/min_centos_ssh.feature\nRename it from min_centos_salt.feature\n\n\ntestsuite/features/secondary/min_ubuntu_ssh.feature\nRename from min_ubuntu_salt.feature\n\n\ntestsuite/run_sets/init_clients.yml\n\n\ntestsuite/run_sets/refhost.yml\n\n\ntestsuite/run_sets/secondary.yml\n\n\ntestsuite/run_sets/sle-updates.yml:\nUpdate with the new file names.\n\n\nLinks\nPorts\n\nManager-3.2: https://github.com/SUSE/spacewalk/pull/12017\nManager-4.0: https://github.com/SUSE/spacewalk/pull/12018\nManager-4.1: https://github.com/SUSE/spacewalk/pull/12019\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed", "createdAt": "2020-07-24T15:18:46Z", "url": "https://github.com/uyuni-project/uyuni/pull/2444", "merged": true, "mergeCommit": {"oid": "246c84ae439418eb6d7351e9317512ec4784f0cd"}, "closed": true, "closedAt": "2020-07-29T07:18:21Z", "author": {"login": "calancha"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc48l6EgFqTQ1NTUyODUyMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5SE_7gFqTQ1NjQwOTcwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTI4NTIx", "url": "https://github.com/uyuni-project/uyuni/pull/2444#pullrequestreview-455528521", "createdAt": "2020-07-27T07:21:32Z", "commit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyMTozMlrOG3Wdqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyMTozMlrOG3Wdqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5MjkwNw==", "bodyText": "For traditional clients sure, but for SSH minion I'm not sure that we need to install those packages. They will not hurt anyway :)", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460692907", "createdAt": "2020-07-27T07:21:32Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -65,12 +65,22 @@ Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n     And I wait until event \"Subscribe channels scheduled by admin\" is completed\n \n @centos_minion\n-  Scenario: Detect latest Salt changes on the CentOS minion\n-    When I query latest Salt changes on \"ceos_minion\"\n+  Scenario: Prepare the SSH-managed CentOS minion\n+    Given I am authorized\n+    When I enable SUSE Manager tools repositories on \"ceos_ssh_minion\"\n+    And  I enable repository \"CentOS-Base\" on this \"ceos_ssh_minion\"\n+    And  I install package \"hwdata m2crypto wget\" on this \"ceos_ssh_minion\"\n+    And  I install package \"spacewalk-client-tools spacewalk-check spacewalk-client-setup mgr-daemon mgr-osad mgr-cfg-actions\" on this \"ceos_ssh_minion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 88}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTI5MjQx", "url": "https://github.com/uyuni-project/uyuni/pull/2444#pullrequestreview-455529241", "createdAt": "2020-07-27T07:22:48Z", "commit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyMjo0OFrOG3Wf8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyMjo0OFrOG3Wf8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5MzQ4OA==", "bodyText": "We probably need both tags here (if you ask me, better at feature level, once), centos_minion and centos_ssh_minion", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460693488", "createdAt": "2020-07-27T07:22:48Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -1,58 +1,58 @@\n-# Copyright (c) 2017-2019 SUSE LLC\n+# Copyright (c) 2017-2020 SUSE LLC\n # Licensed under the terms of the MIT license.\n #\n-# 1) delete CentOS SSH minion and register as Centos minion\n+# 1) delete CentOS minion and register as Centos SSH minion\n # 2) run a remote command\n # 3) try an openscap scan\n-# 4) delete CentOS minion client and register as Centos SSH minion\n+# 4) delete CentOS SSH minion client and register as Centos minion\n \n-Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n+Feature: Bootstrap a SSH-managed CentOS minion and do some basic operations on it\n \n @centos_minion", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTMxNjI4", "url": "https://github.com/uyuni-project/uyuni/pull/2444#pullrequestreview-455531628", "createdAt": "2020-07-27T07:26:40Z", "commit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyNjo0MFrOG3WnPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyNjo0MFrOG3WnPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5NTM1Nw==", "bodyText": "I wonder why we delete the centos minion, to test centos ssh minion, apparently, we are not reusing the same VM \ud83e\udd14", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460695357", "createdAt": "2020-07-27T07:26:40Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -1,58 +1,58 @@\n-# Copyright (c) 2017-2019 SUSE LLC\n+# Copyright (c) 2017-2020 SUSE LLC\n # Licensed under the terms of the MIT license.\n #\n-# 1) delete CentOS SSH minion and register as Centos minion\n+# 1) delete CentOS minion and register as Centos SSH minion\n # 2) run a remote command\n # 3) try an openscap scan\n-# 4) delete CentOS minion client and register as Centos SSH minion\n+# 4) delete CentOS SSH minion client and register as Centos minion\n \n-Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n+Feature: Bootstrap a SSH-managed CentOS minion and do some basic operations on it\n \n @centos_minion\n-  Scenario: Delete the CentOS SSH minion before normal minion tests\n-    When I am on the Systems overview page of this \"ceos_ssh_minion\"\n+  Scenario: Delete the CentOS minion before SSH minion tests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTM0OTc5", "url": "https://github.com/uyuni-project/uyuni/pull/2444#pullrequestreview-455534979", "createdAt": "2020-07-27T07:30:52Z", "commit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzozMDo1M1rOG3Wvdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzozMDo1M1rOG3Wvdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5NzQ2Mw==", "bodyText": "Out of scope: Not sure about it, but if that target is looking for the name of the VM, we might want to refactor it, so we pass \"centos_ssh_minion\" hostname as a target. Just thinking in the future if we have someday more VMs matching \"centos\" in this feature's test.", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460697463", "createdAt": "2020-07-27T07:30:53Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -80,23 +90,23 @@ Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n     And I wait until event \"OpenSCAP xccdf scanning\" is completed\n \n @centos_minion\n-  Scenario: Run a remote command on the CentOS minion\n+  Scenario: Run a remote command on the SSH-managed CentOS minion\n     Given I am authorized as \"testing\" with password \"testing\"\n     When I follow the left menu \"Salt > Remote Commands\"\n     Then I should see a \"Remote Commands\" text in the content area\n     When I enter command \"cat /etc/os-release\"\n     And I enter target \"*centos*\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 114}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTQyMzIz", "url": "https://github.com/uyuni-project/uyuni/pull/2444#pullrequestreview-455542323", "createdAt": "2020-07-27T07:36:48Z", "commit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzozNjo0OVrOG3W7Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzozNjo0OVrOG3W7Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMDQzMA==", "bodyText": "We should also rename both feature files named as min_centos/ubuntu_salt.feature", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460700430", "createdAt": "2020-07-27T07:36:49Z", "author": {"login": "srbarrios"}, "path": "testsuite/run_sets/refhost.yml", "diffHunk": "@@ -20,8 +20,8 @@\n - features/init_clients/sle_client.feature\n - features/init_clients/sle_minion.feature\n - features/init_clients/sle_ssh_minion.feature\n-- features/init_clients/centos_ssh_minion.feature\n-- features/init_clients/ubuntu_ssh_minion.feature\n+- features/init_clients/centos_minion.feature", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTQzNzY2", "url": "https://github.com/uyuni-project/uyuni/pull/2444#pullrequestreview-455543766", "createdAt": "2020-07-27T07:39:11Z", "commit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f81a52044f795914a7324b305c430116b2d755e3", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f81a52044f795914a7324b305c430116b2d755e3", "committedDate": "2020-07-27T10:00:49Z", "message": "testsuite: Run most of the time with centos/ubuntu normal minions\n\nSee spacewalk#11972\n\n- testsuite/features/core/allcli_sanity.feature\n- testsuite/features/secondary/allcli_config_channel.feature\n- testsuite/features/secondary/allcli_overview_systems_details.feature\n- testsuite/features/secondary/allcli_reboot.feature\n- testsuite/features/secondary/allcli_software_channels.feature\n- testsuite/features/secondary/allcli_system_group.feature\n- testsuite/features/secondary/min_centos_monitoring.feature\n- testsuite/features/secondary/min_centos_salt.feature\n- testsuite/features/secondary/min_ubuntu_salt.feature\n- testsuite/features/secondary/min_ubuntu_salt_install_package.feature\n- testsuite/features/secondary/minssh_centos_salt_install_package_and_patch.feature\n- testsuite/features/secondary/srv_group_union_intersection.feature\n- testsuite/features/secondary/trad_centos_client.feature\n\n- testsuite/features/init_clients/min_centos_salt.feature\n  Rename it from centos_minion.feature\n- testsuite/features/init_clients/min_ubuntu_salt.feature:\n  Rename it from ubuntu_ssh_minion.feature\n- testsuite/features/secondary/min_centos_ssh.feature\n  Rename it from min_centos_salt.feature\n- testsuite/features/secondary/min_ubuntu_ssh.feature\n  Rename from min_ubuntu_salt.feature\n\n- testsuite/run_sets/init_clients.yml\n- testsuite/run_sets/refhost.yml\n- testsuite/run_sets/secondary.yml\n- testsuite/run_sets/sle-updates.yml:\nUpdate with the new file names."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84e302a3bd6ab1af4c941cd032c080664f74ff3a", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/84e302a3bd6ab1af4c941cd032c080664f74ff3a", "committedDate": "2020-07-27T09:25:55Z", "message": "Rename some files\n\n- testsuite/features/init_clients/min_centos_salt.feature\nrename from centos_minion.feature\n\n- testsuite/features/init_clients/min_ubuntu_salt.feature\nrename from ubuntu_minion.feature\n\n- testsuite/features/secondary/min_centos_ssh.feature\nrename from min_centos_salt.feature\n\n- testsuite/features/secondary/min_ubuntu_ssh.feature\nrename from min_ubuntu_salt.feature\n\n- testsuite/run_sets/init_clients.yml\n- testsuite/run_sets/refhost.yml\n- testsuite/run_sets/secondary.yml\n- testsuite/run_sets/sle-updates.yml:\nUpdate with the new file names."}, "afterCommit": {"oid": "f81a52044f795914a7324b305c430116b2d755e3", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f81a52044f795914a7324b305c430116b2d755e3", "committedDate": "2020-07-27T10:00:49Z", "message": "testsuite: Run most of the time with centos/ubuntu normal minions\n\nSee spacewalk#11972\n\n- testsuite/features/core/allcli_sanity.feature\n- testsuite/features/secondary/allcli_config_channel.feature\n- testsuite/features/secondary/allcli_overview_systems_details.feature\n- testsuite/features/secondary/allcli_reboot.feature\n- testsuite/features/secondary/allcli_software_channels.feature\n- testsuite/features/secondary/allcli_system_group.feature\n- testsuite/features/secondary/min_centos_monitoring.feature\n- testsuite/features/secondary/min_centos_salt.feature\n- testsuite/features/secondary/min_ubuntu_salt.feature\n- testsuite/features/secondary/min_ubuntu_salt_install_package.feature\n- testsuite/features/secondary/minssh_centos_salt_install_package_and_patch.feature\n- testsuite/features/secondary/srv_group_union_intersection.feature\n- testsuite/features/secondary/trad_centos_client.feature\n\n- testsuite/features/init_clients/min_centos_salt.feature\n  Rename it from centos_minion.feature\n- testsuite/features/init_clients/min_ubuntu_salt.feature:\n  Rename it from ubuntu_ssh_minion.feature\n- testsuite/features/secondary/min_centos_ssh.feature\n  Rename it from min_centos_salt.feature\n- testsuite/features/secondary/min_ubuntu_ssh.feature\n  Rename from min_ubuntu_salt.feature\n\n- testsuite/run_sets/init_clients.yml\n- testsuite/run_sets/refhost.yml\n- testsuite/run_sets/secondary.yml\n- testsuite/run_sets/sle-updates.yml:\nUpdate with the new file names."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NzQ1NTg0", "url": "https://github.com/uyuni-project/uyuni/pull/2444#pullrequestreview-455745584", "createdAt": "2020-07-27T12:45:57Z", "commit": {"oid": "f81a52044f795914a7324b305c430116b2d755e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NDA5NzA2", "url": "https://github.com/uyuni-project/uyuni/pull/2444#pullrequestreview-456409706", "createdAt": "2020-07-28T08:23:31Z", "commit": {"oid": "f81a52044f795914a7324b305c430116b2d755e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1233, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}