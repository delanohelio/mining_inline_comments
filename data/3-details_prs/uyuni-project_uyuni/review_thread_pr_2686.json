{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3NDI1MTQ2", "number": 2686, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTo0NzoyOVrOErPmMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTo0OToyM1rOErPpWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzNzc5NzYxOnYy", "diffSide": "RIGHT", "path": "susemanager-utils/susemanager-sls/modules/runners/mgrk8s.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTo0NzoyOVrOHd58Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTo0NzoyOVrOHd58Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTEyMDA2Mg==", "bodyText": "Could you also log the exception?", "url": "https://github.com/uyuni-project/uyuni/pull/2686#discussion_r501120062", "createdAt": "2020-10-07T15:47:29Z", "author": {"login": "mateiw"}, "path": "susemanager-utils/susemanager-sls/modules/runners/mgrk8s.py", "diffHunk": "@@ -44,13 +47,16 @@ def get_all_containers(kubeconfig=None, context=None):\n     pods = api.list_pod_for_all_namespaces(watch=False)\n     output = dict(containers=[])\n     for pod in pods.items:\n-        for container in pod.status.container_statuses:\n-            res_cont = dict()\n-            res_cont['container_id'] = container.container_id\n-            res_cont['image'] = container.image\n-            res_cont['image_id'] = container.image_id\n-            res_cont['pod_name'] = pod.metadata.name\n-            res_cont['pod_namespace'] = pod.metadata.namespace\n-            output['containers'].append(res_cont)\n+        try:\n+            for container in pod.status.container_statuses:\n+                res_cont = dict()\n+                res_cont['container_id'] = container.container_id\n+                res_cont['image'] = container.image\n+                res_cont['image_id'] = container.image_id\n+                res_cont['pod_name'] = pod.metadata.name\n+                res_cont['pod_namespace'] = pod.metadata.namespace\n+                output['containers'].append(res_cont)\n+        except:\n+            log.error(\"Failed to parse pod container statuses\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bca8be3ae869745f8e80ba159dd21e71ec187d41"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzNzgwNTcwOnYy", "diffSide": "RIGHT", "path": "susemanager-utils/susemanager-sls/modules/runners/mgrk8s.py", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNTo0OToyM1rOHd6BbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoxMzozMlrOHegqew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTEyMTM4OQ==", "bodyText": "IIUC container_statuses is empty? In this case maybe in addition to the try...except block, a check could be added to avoid the exception altogether.", "url": "https://github.com/uyuni-project/uyuni/pull/2686#discussion_r501121389", "createdAt": "2020-10-07T15:49:23Z", "author": {"login": "mateiw"}, "path": "susemanager-utils/susemanager-sls/modules/runners/mgrk8s.py", "diffHunk": "@@ -44,13 +47,16 @@ def get_all_containers(kubeconfig=None, context=None):\n     pods = api.list_pod_for_all_namespaces(watch=False)\n     output = dict(containers=[])\n     for pod in pods.items:\n-        for container in pod.status.container_statuses:\n-            res_cont = dict()\n-            res_cont['container_id'] = container.container_id\n-            res_cont['image'] = container.image\n-            res_cont['image_id'] = container.image_id\n-            res_cont['pod_name'] = pod.metadata.name\n-            res_cont['pod_namespace'] = pod.metadata.namespace\n-            output['containers'].append(res_cont)\n+        try:\n+            for container in pod.status.container_statuses:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bca8be3ae869745f8e80ba159dd21e71ec187d41"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc1NDQ5MQ==", "bodyText": "Yes, you are right", "url": "https://github.com/uyuni-project/uyuni/pull/2686#discussion_r501754491", "createdAt": "2020-10-08T14:13:32Z", "author": {"login": "mbologna"}, "path": "susemanager-utils/susemanager-sls/modules/runners/mgrk8s.py", "diffHunk": "@@ -44,13 +47,16 @@ def get_all_containers(kubeconfig=None, context=None):\n     pods = api.list_pod_for_all_namespaces(watch=False)\n     output = dict(containers=[])\n     for pod in pods.items:\n-        for container in pod.status.container_statuses:\n-            res_cont = dict()\n-            res_cont['container_id'] = container.container_id\n-            res_cont['image'] = container.image\n-            res_cont['image_id'] = container.image_id\n-            res_cont['pod_name'] = pod.metadata.name\n-            res_cont['pod_namespace'] = pod.metadata.namespace\n-            output['containers'].append(res_cont)\n+        try:\n+            for container in pod.status.container_statuses:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTEyMTM4OQ=="}, "originalCommit": {"oid": "bca8be3ae869745f8e80ba159dd21e71ec187d41"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4081, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}