{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5NDg4MTc1", "number": 2418, "title": "Warn user when multiple group formulas are active", "bodyText": "What does this PR change?\nAdds a warning when multiple groups set up the same formula and a system is in more than one of these groups. The UI shows multiple formulas\nGUI diff\nBefore:\n\nAfter:\n\nCaaSP Management Settings are excluded:\n\nDocumentation\n\nDocumentation issue was created: Link for SUSE Manager contributors, Link for community contributors.\n(OPTIONAL) Documentation PR\n\nTODO\n\n DONE\n\nTest coverage\n\n\nNo tests: Minor UI change only, I don't think we need to automatically test it. Please correct me if I am wrong.\n\n\n DONE\n\n\nLinks\nFixes SUSE/spacewalk#11850\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-07-15T13:39:54Z", "url": "https://github.com/uyuni-project/uyuni/pull/2418", "merged": true, "mergeCommit": {"oid": "06f6bedb86aadf8ee9081638ac84a69c4a5656a4"}, "closed": true, "closedAt": "2020-08-03T11:22:21Z", "author": {"login": "agraul"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1LXO4AFqTQ0OTAwMDUzOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4_GkTABqjM1ODkxNTY5NTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MDAwNTM4", "url": "https://github.com/uyuni-project/uyuni/pull/2418#pullrequestreview-449000538", "createdAt": "2020-07-15T14:18:24Z", "commit": {"oid": "91e27f9dab7b5164e12f5a867fbb72fe0418b4f6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MDAxNTQy", "url": "https://github.com/uyuni-project/uyuni/pull/2418#pullrequestreview-449001542", "createdAt": "2020-07-15T14:19:25Z", "commit": {"oid": "91e27f9dab7b5164e12f5a867fbb72fe0418b4f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNDoxOToyNVrOGyAY2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNDoxOToyNVrOGyAY2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTA4ODM0NQ==", "bodyText": "All messages should be localized like below:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    'Multiple Group formulas detected. Only one formula for \"'\n          \n          \n            \n                                        + capitalize(data.formula_name) + '\" can be used on each system!'\n          \n          \n            \n                                    t('Multiple Group formulas detected. Only one formula for \"{0}\" can be used on each system!', capitalize(data.formula_name))", "url": "https://github.com/uyuni-project/uyuni/pull/2418#discussion_r455088345", "createdAt": "2020-07-15T14:19:25Z", "author": {"login": "cbbayburt"}, "path": "web/html/src/components/FormulaForm.js", "diffHunk": "@@ -73,6 +73,12 @@ class FormulaForm extends React.Component {\n                     metadata: {}\n                 });\n             else {\n+                if (data.formula_list.filter(formula => formula == data.formula_name).length > 1) {\n+                    this.state.errors.push(\n+                        'Multiple Group formulas detected. Only one formula for \"'\n+                            + capitalize(data.formula_name) + '\" can be used on each system!'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91e27f9dab7b5164e12f5a867fbb72fe0418b4f6"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MDk1MzAw", "url": "https://github.com/uyuni-project/uyuni/pull/2418#pullrequestreview-449095300", "createdAt": "2020-07-15T15:57:29Z", "commit": {"oid": "763b30ba3c293e7437428f5639f6c19d2b860aeb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MTMwMjk2", "url": "https://github.com/uyuni-project/uyuni/pull/2418#pullrequestreview-449130296", "createdAt": "2020-07-15T16:43:56Z", "commit": {"oid": "763b30ba3c293e7437428f5639f6c19d2b860aeb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjo0Mzo1N1rOGyGapg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNjo0Mzo1N1rOGyGapg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4NzExMA==", "bodyText": "It is more like a question than a request for a fix: is this a real error the user should take some action to fix and we want to stop him, or is it just a warning message about something that can go wrong but unknown?", "url": "https://github.com/uyuni-project/uyuni/pull/2418#discussion_r455187110", "createdAt": "2020-07-15T16:43:57Z", "author": {"login": "ncounter"}, "path": "web/html/src/components/FormulaForm.js", "diffHunk": "@@ -73,6 +73,11 @@ class FormulaForm extends React.Component {\n                     metadata: {}\n                 });\n             else {\n+                if (data.formula_list.filter(formula => formula == data.formula_name).length > 1) {\n+                    this.state.errors.push(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "763b30ba3c293e7437428f5639f6c19d2b860aeb"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MzQ0ODcx", "url": "https://github.com/uyuni-project/uyuni/pull/2418#pullrequestreview-449344871", "createdAt": "2020-07-15T21:19:43Z", "commit": {"oid": "763b30ba3c293e7437428f5639f6c19d2b860aeb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNTQyODE3", "url": "https://github.com/uyuni-project/uyuni/pull/2418#pullrequestreview-450542817", "createdAt": "2020-07-17T10:17:48Z", "commit": {"oid": "2a9de31d8f46deee18647ec49a138dab7b6d0703"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNTU4MjM0", "url": "https://github.com/uyuni-project/uyuni/pull/2418#pullrequestreview-450558234", "createdAt": "2020-07-17T10:45:22Z", "commit": {"oid": "2a9de31d8f46deee18647ec49a138dab7b6d0703"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d209f3d13ef48d180829a16f9dbf5f442105664", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4d209f3d13ef48d180829a16f9dbf5f442105664", "committedDate": "2020-07-17T14:45:02Z", "message": "Add changelog entry"}, "afterCommit": {"oid": "0ee57f6bdc84a701b731af0d1a60aeef632d1f74", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0ee57f6bdc84a701b731af0d1a60aeef632d1f74", "committedDate": "2020-07-27T09:58:55Z", "message": "Add changelog entry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34fbfc36264c2239e98924222e36d0725ab1b52b", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/34fbfc36264c2239e98924222e36d0725ab1b52b", "committedDate": "2020-07-27T10:14:06Z", "message": "Add warning for multiple group formulas\n\nMultiple group formulas are not supported at this time. Only the formula\nfrom the group that is processed first is used.\n\nFixes https://github.com/SUSE/spacewalk/issues/11850\n\nCo-authored-by: Can Bulut Bayburt <1103552+cbbayburt@users.noreply.github.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ee57f6bdc84a701b731af0d1a60aeef632d1f74", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0ee57f6bdc84a701b731af0d1a60aeef632d1f74", "committedDate": "2020-07-27T09:58:55Z", "message": "Add changelog entry"}, "afterCommit": {"oid": "34fbfc36264c2239e98924222e36d0725ab1b52b", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/34fbfc36264c2239e98924222e36d0725ab1b52b", "committedDate": "2020-07-27T10:14:06Z", "message": "Add warning for multiple group formulas\n\nMultiple group formulas are not supported at this time. Only the formula\nfrom the group that is processed first is used.\n\nFixes https://github.com/SUSE/spacewalk/issues/11850\n\nCo-authored-by: Can Bulut Bayburt <1103552+cbbayburt@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1223, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}