{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NTY5MzAw", "number": 2337, "title": "Show cluster upgrade plan in the cluster upgrade UI", "bodyText": "What does this PR change?\nAdds support for showing the cluster upgrade plan as the first step in the cluster upgrade flow.\nThis is targeted post-GMC.\nGUI diff\nBefore:\n\nupgrade plan was not shown\n\nAfter:\n\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: add explanation. This can't be used if there is a GUI diff\n\n\nDocumentation issue was created: Link for SUSE Manager contributors, Link for community contributors.\n\n\n(OPTIONAL) Documentation PR\n\n\n DONE\n\n\nTest coverage\n\n\nUnit tests were added\n\n\n DONE\n\n\nLinks\nFixes #\nTracks # add downstream PR, if any\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-06-18T15:44:08Z", "url": "https://github.com/uyuni-project/uyuni/pull/2337", "merged": true, "mergeCommit": {"oid": "30e6e840cc1d288ce81a3ae2a6b6c7f5ba9e8e41"}, "closed": true, "closedAt": "2020-10-22T16:28:36Z", "author": {"login": "mateiw"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsu1_GgFqTQzMzkwMDkwNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVDeGLAFqTUxNDgzODAxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzOTAwOTA3", "url": "https://github.com/uyuni-project/uyuni/pull/2337#pullrequestreview-433900907", "createdAt": "2020-06-19T08:33:21Z", "commit": {"oid": "ac28c81b7815c476486888621268126a075c7069"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODozMzoyMVrOGmM13Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODozMzoyMVrOGmM13Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjcwOTQ2OQ==", "bodyText": "I didn't expose this method on purpose.\nIf you want to get the cluster upgrade plan, you should call upgrade_cluster(plan=True, *args, **kwargs)\nIs there a reason why we do want to do it this way?", "url": "https://github.com/uyuni-project/uyuni/pull/2337#discussion_r442709469", "createdAt": "2020-06-19T08:33:21Z", "author": {"login": "meaksh"}, "path": "susemanager-utils/susemanager-sls/src/modules/mgr_caasp_manager.py", "diffHunk": "@@ -229,7 +229,7 @@ def add_node(skuba_cluster_path,\n     return ret\n \n \n-def _upgrade_cluster_plan(skuba_cluster_path,\n+def upgrade_cluster_plan(skuba_cluster_path,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac28c81b7815c476486888621268126a075c7069"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzOTAxMjUw", "url": "https://github.com/uyuni-project/uyuni/pull/2337#pullrequestreview-433901250", "createdAt": "2020-06-19T08:33:54Z", "commit": {"oid": "ac28c81b7815c476486888621268126a075c7069"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODozMzo1NFrOGmM2xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODozMzo1NFrOGmM2xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjcwOTcwMg==", "bodyText": "Same consideration as in above comment", "url": "https://github.com/uyuni-project/uyuni/pull/2337#discussion_r442709702", "createdAt": "2020-06-19T08:33:54Z", "author": {"login": "meaksh"}, "path": "susemanager-utils/susemanager-sls/src/modules/mgr_caasp_manager.py", "diffHunk": "@@ -262,7 +262,7 @@ def upgrade_cluster(skuba_cluster_path,\n                     **kwargs):\n \n     if plan:\n-        return _upgrade_cluster_plan(skuba_cluster_path=skuba_cluster_path,\n+        return upgrade_cluster_plan(skuba_cluster_path=skuba_cluster_path,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac28c81b7815c476486888621268126a075c7069"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzOTAxNjYy", "url": "https://github.com/uyuni-project/uyuni/pull/2337#pullrequestreview-433901662", "createdAt": "2020-06-19T08:34:32Z", "commit": {"oid": "ac28c81b7815c476486888621268126a075c7069"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODozNDozMlrOGmM38g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODozNDozMlrOGmM38g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjcxMDAwMg==", "bodyText": "This shouldn't be required in case we simply use upgrade_cluster(plan=True, **)", "url": "https://github.com/uyuni-project/uyuni/pull/2337#discussion_r442710002", "createdAt": "2020-06-19T08:34:32Z", "author": {"login": "meaksh"}, "path": "susemanager-utils/susemanager-sls/src/modules/mgrclusters.py", "diffHunk": "@@ -49,6 +49,9 @@ def upgrade_cluster(provider_module, params):\n     fun = _get_provider_fun(provider_module, 'upgrade_cluster')\n     return fun(**params)\n \n+def upgrade_cluster_plan(provider_module, params):\n+    fun = _get_provider_fun(provider_module, 'upgrade_cluster_plan')\n+    return fun(**params)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac28c81b7815c476486888621268126a075c7069"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef794c7dd7058b013707be3823106229ba99b6b8", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ef794c7dd7058b013707be3823106229ba99b6b8", "committedDate": "2020-06-19T15:46:31Z", "message": "fixup! Show cluster upgrade plan in the upgrade UI"}, "afterCommit": {"oid": "61cb4031dd0c969ad1e746e96a58832de8cdc238", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/61cb4031dd0c969ad1e746e96a58832de8cdc238", "committedDate": "2020-06-19T15:54:17Z", "message": "Show cluster upgrade plan in the upgrade UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NzYzNzQ3", "url": "https://github.com/uyuni-project/uyuni/pull/2337#pullrequestreview-436763747", "createdAt": "2020-06-24T15:30:33Z", "commit": {"oid": "61cb4031dd0c969ad1e746e96a58832de8cdc238"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTgyOTA1", "url": "https://github.com/uyuni-project/uyuni/pull/2337#pullrequestreview-438182905", "createdAt": "2020-06-26T10:21:00Z", "commit": {"oid": "61cb4031dd0c969ad1e746e96a58832de8cdc238"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "61cb4031dd0c969ad1e746e96a58832de8cdc238", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/61cb4031dd0c969ad1e746e96a58832de8cdc238", "committedDate": "2020-06-19T15:54:17Z", "message": "Show cluster upgrade plan in the upgrade UI"}, "afterCommit": {"oid": "a1b96b9e93373879aa59bc26eb580c317a505fed", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a1b96b9e93373879aa59bc26eb580c317a505fed", "committedDate": "2020-07-13T14:30:23Z", "message": "Show cluster upgrade plan in the upgrade UI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0baf7c78f1a53ff9aebb6679d5c826267563ba1", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a0baf7c78f1a53ff9aebb6679d5c826267563ba1", "committedDate": "2020-10-22T09:37:41Z", "message": "Copy caasp provider files on deploy-salt-files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd0131bc45e2f1d797422ada12f84b6c77d8edfb", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/dd0131bc45e2f1d797422ada12f84b6c77d8edfb", "committedDate": "2020-10-22T10:37:21Z", "message": "Show cluster upgrade plan in the upgrade UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a1b96b9e93373879aa59bc26eb580c317a505fed", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a1b96b9e93373879aa59bc26eb580c317a505fed", "committedDate": "2020-07-13T14:30:23Z", "message": "Show cluster upgrade plan in the upgrade UI"}, "afterCommit": {"oid": "dd0131bc45e2f1d797422ada12f84b6c77d8edfb", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/dd0131bc45e2f1d797422ada12f84b6c77d8edfb", "committedDate": "2020-10-22T10:37:21Z", "message": "Show cluster upgrade plan in the upgrade UI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a25b03350219a94abb40c1be17762a9c608fb3d", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0a25b03350219a94abb40c1be17762a9c608fb3d", "committedDate": "2020-10-22T11:32:35Z", "message": "fixup!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffaaba24aebf78d9dc8769c82485371319e59fac", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ffaaba24aebf78d9dc8769c82485371319e59fac", "committedDate": "2020-10-22T12:50:24Z", "message": "fixup!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b21b03760616712556e5bfb3ce48383bf2a14ee2", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b21b03760616712556e5bfb3ce48383bf2a14ee2", "committedDate": "2020-10-22T13:41:24Z", "message": "fixup!"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0ODM4MDE5", "url": "https://github.com/uyuni-project/uyuni/pull/2337#pullrequestreview-514838019", "createdAt": "2020-10-22T15:12:14Z", "commit": {"oid": "b21b03760616712556e5bfb3ce48383bf2a14ee2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1152, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}