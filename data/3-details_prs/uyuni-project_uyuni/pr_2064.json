{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MDc5NDAy", "number": 2064, "title": "Refactoring 3 uyuni", "bodyText": "What does this PR change?\n\n\nrefactor SaltReactor to avoid setReactor on SystemQuery\n\n\nCreate initial SaltApi interface and move some methods there.\n\n\nAdd VirtManager interface and move virtualization methods from SystemQuery there.\n\n\nreduce uses of SaltService.INSTANCE further.\n\n\n DONE\n\n\nDocumentation\n\n\nNo documentation needed: no user visible change\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests: already covered\n\n\n DONE\n\n\nLinks\nFixes #\nTracks # add downstream PR, if any\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-03-26T10:23:43Z", "url": "https://github.com/uyuni-project/uyuni/pull/2064", "merged": true, "mergeCommit": {"oid": "83e4951e4b468134d26ba4ee43362a088f64fd34"}, "closed": true, "closedAt": "2020-04-14T12:38:09Z", "author": {"login": "lucidd"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSsf-YABqjMxNzgwODgwMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXiWmiAH2gAyMzk0MDc5NDAyOjgzZTQ5NTFlNGI0NjgxMzRkMjZiYTRlZTQzMzYyYTA4OGY2NGZkMzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "322f9b62fce3b5a81354e79237451984860ccee1", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/322f9b62fce3b5a81354e79237451984860ccee1", "committedDate": "2020-03-26T15:13:39Z", "message": "fix tests"}, "afterCommit": {"oid": "af2502ee31348ab65c2e0fbf34222cd1e0e34c61", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/af2502ee31348ab65c2e0fbf34222cd1e0e34c61", "committedDate": "2020-03-30T11:06:53Z", "message": "fix checkstyle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d7bde369c76eb3b8d407142098c0ca1138340280", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d7bde369c76eb3b8d407142098c0ca1138340280", "committedDate": "2020-03-30T11:28:26Z", "message": "fixup! fix checkstyle"}, "afterCommit": {"oid": "a2adb1a3d5ee369e4767780a6c045e08c65170d5", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a2adb1a3d5ee369e4767780a6c045e08c65170d5", "committedDate": "2020-03-30T11:30:44Z", "message": "fixup! fix checkstyle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a2adb1a3d5ee369e4767780a6c045e08c65170d5", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a2adb1a3d5ee369e4767780a6c045e08c65170d5", "committedDate": "2020-03-30T11:30:44Z", "message": "fixup! fix checkstyle"}, "afterCommit": {"oid": "af79cefa9ef50d56c08d1998912300f4f4673121", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/af79cefa9ef50d56c08d1998912300f4f4673121", "committedDate": "2020-03-31T08:49:20Z", "message": "fix tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af79cefa9ef50d56c08d1998912300f4f4673121", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/af79cefa9ef50d56c08d1998912300f4f4673121", "committedDate": "2020-03-31T08:49:20Z", "message": "fix tests"}, "afterCommit": {"oid": "957998d711ad214a16cf396e96f74602bbda1fc4", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/957998d711ad214a16cf396e96f74602bbda1fc4", "committedDate": "2020-04-01T13:15:38Z", "message": "fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NTgyNjE3", "url": "https://github.com/uyuni-project/uyuni/pull/2064#pullrequestreview-385582617", "createdAt": "2020-04-01T13:26:37Z", "commit": {"oid": "af79cefa9ef50d56c08d1998912300f4f4673121"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTozNjo1MlrOGARvwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTozNzo0NFrOGARxIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk0MzkzNg==", "bodyText": "Suggested change", "url": "https://github.com/uyuni-project/uyuni/pull/2064#discussion_r402943936", "createdAt": "2020-04-03T11:36:52Z", "author": {"login": "renner"}, "path": "java/code/src/com/suse/manager/webui/services/iface/RedhatProductInfo.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/**\n+ * Copyright (c) 2020 SUSE LLC\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+package com.suse.manager.webui.services.iface;\n+\n+import java.util.Optional;\n+\n+/**\n+ * Information to determine redhat product.\n+ */\n+public class RedhatProductInfo {\n+\n+    private final Optional<String> centosReleaseContent;\n+    private final Optional<String> rhelReleaseContent;\n+    private final Optional<String> whatProvidesRes;\n+\n+    /**\n+     * @param centosReleaseContentIn centos release content\n+     * @param rhelReleaseContentIn rhel release content\n+     * @param whatProvidesResIn what provides res result\n+     */\n+    public RedhatProductInfo(Optional<String> centosReleaseContentIn, Optional<String> rhelReleaseContentIn,\n+                             Optional<String> whatProvidesResIn) {\n+        this.centosReleaseContent = centosReleaseContentIn;\n+        this.rhelReleaseContent = rhelReleaseContentIn;\n+        this.whatProvidesRes = whatProvidesResIn;\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "957998d711ad214a16cf396e96f74602bbda1fc4"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk0NDI5MQ==", "bodyText": "Is iface the right package to use here?", "url": "https://github.com/uyuni-project/uyuni/pull/2064#discussion_r402944291", "createdAt": "2020-04-03T11:37:44Z", "author": {"login": "renner"}, "path": "java/code/src/com/suse/manager/webui/services/iface/RedhatProductInfo.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/**\n+ * Copyright (c) 2020 SUSE LLC\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+package com.suse.manager.webui.services.iface;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "957998d711ad214a16cf396e96f74602bbda1fc4"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MTkxMTE2", "url": "https://github.com/uyuni-project/uyuni/pull/2064#pullrequestreview-387191116", "createdAt": "2020-04-03T11:59:25Z", "commit": {"oid": "957998d711ad214a16cf396e96f74602bbda1fc4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTo1OToyNlrOGASXog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMTo1OToyNlrOGASXog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk1NDE0Ng==", "bodyText": "2018--2020", "url": "https://github.com/uyuni-project/uyuni/pull/2064#discussion_r402954146", "createdAt": "2020-04-03T11:59:26Z", "author": {"login": "cbosdo"}, "path": "java/code/src/com/suse/manager/virtualization/VirtManagerSalt.java", "diffHunk": "@@ -0,0 +1,171 @@\n+/**\n+ * Copyright (c) 2018 SUSE LLC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "957998d711ad214a16cf396e96f74602bbda1fc4"}, "originalPosition": 2}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c6dd0fe55cc127fc4597ca93bebf6a080115d5f", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3c6dd0fe55cc127fc4597ca93bebf6a080115d5f", "committedDate": "2020-04-07T15:52:24Z", "message": "remove empty line\n\nCo-Authored-By: Johannes Renner <jrenner@suse.de>"}, "afterCommit": {"oid": "7423c6b5466c6d415e363aae5fc598417e35c9e5", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7423c6b5466c6d415e363aae5fc598417e35c9e5", "committedDate": "2020-04-09T11:10:28Z", "message": "remove empty line\n\nCo-Authored-By: Johannes Renner <jrenner@suse.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNzM0NzU5", "url": "https://github.com/uyuni-project/uyuni/pull/2064#pullrequestreview-390734759", "createdAt": "2020-04-09T12:10:08Z", "commit": {"oid": "24d78455f57ad4a3ef82569c17ddccbd9fa3e2da"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNzU5NTQz", "url": "https://github.com/uyuni-project/uyuni/pull/2064#pullrequestreview-390759543", "createdAt": "2020-04-09T12:47:44Z", "commit": {"oid": "24d78455f57ad4a3ef82569c17ddccbd9fa3e2da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0Nzo0NFrOGDXL3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0Nzo0NFrOGDXL3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3ODc4Mw==", "bodyText": "This is confusing, why they both are pointing to same? Are they even being used?", "url": "https://github.com/uyuni-project/uyuni/pull/2064#discussion_r406178783", "createdAt": "2020-04-09T12:47:44Z", "author": {"login": "admd"}, "path": "java/code/src/com/suse/manager/webui/services/impl/SaltService.java", "diffHunk": "@@ -122,14 +123,16 @@\n /**\n  * Singleton class acting as a service layer for accessing the salt API.\n  */\n-public class SaltService implements SystemQuery {\n+public class SaltService implements SystemQuery, SaltApi {\n \n     private final Batch defaultBatch;\n \n     /**\n      * Singleton instance of this class\n      */\n-    public static final SystemQuery INSTANCE = new SaltService();\n+    private static final SaltService INSTANCE_SALT_SERVICE = new SaltService();\n+    public static final SystemQuery INSTANCE = INSTANCE_SALT_SERVICE;\n+    public static final SaltApi INSTANCE_SALT_API = INSTANCE_SALT_SERVICE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24d78455f57ad4a3ef82569c17ddccbd9fa3e2da"}, "originalPosition": 72}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNjk3NTI2", "url": "https://github.com/uyuni-project/uyuni/pull/2064#pullrequestreview-392697526", "createdAt": "2020-04-14T08:11:24Z", "commit": {"oid": "24d78455f57ad4a3ef82569c17ddccbd9fa3e2da"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24d78455f57ad4a3ef82569c17ddccbd9fa3e2da", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/24d78455f57ad4a3ef82569c17ddccbd9fa3e2da", "committedDate": "2020-04-09T11:58:23Z", "message": "update copyright"}, "afterCommit": {"oid": "069b6fd51405908499629162b05082215696b931", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/069b6fd51405908499629162b05082215696b931", "committedDate": "2020-04-14T10:12:23Z", "message": "update copyright"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "069b6fd51405908499629162b05082215696b931", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/069b6fd51405908499629162b05082215696b931", "committedDate": "2020-04-14T10:12:23Z", "message": "update copyright"}, "afterCommit": {"oid": "2a5c22fe3e871738b77560f5a36438ada94b7c93", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2a5c22fe3e871738b77560f5a36438ada94b7c93", "committedDate": "2020-04-14T10:42:49Z", "message": "update copyright"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d67aaf6777e10101f4a7cabca20a5d4fea52df0", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9d67aaf6777e10101f4a7cabca20a5d4fea52df0", "committedDate": "2020-04-14T12:06:58Z", "message": "replace applyState with more specific method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e11383f1f56effe9096a7051ce342ba0e83db32c", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e11383f1f56effe9096a7051ce342ba0e83db32c", "committedDate": "2020-04-14T12:07:02Z", "message": "remove setReactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ceeb96d4008a8611d314e7acdf56a1377b552d2", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7ceeb96d4008a8611d314e7acdf56a1377b552d2", "committedDate": "2020-04-14T12:07:02Z", "message": "add VirtManager interface and removing method from SystemQuery"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5ef3f2223faa15f683764cc9dac41be856b8fa0", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c5ef3f2223faa15f683764cc9dac41be856b8fa0", "committedDate": "2020-04-14T12:07:03Z", "message": "Pass SystemQuery instance to *MinionBootstrappers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaaea1925dbb14547b207ebd77fe47315dd6af04", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/eaaea1925dbb14547b207ebd77fe47315dd6af04", "committedDate": "2020-04-14T12:07:03Z", "message": "fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3675a9d98625e13e5bcd97fac8d2e2dec151301b", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/3675a9d98625e13e5bcd97fac8d2e2dec151301b", "committedDate": "2020-04-14T12:07:03Z", "message": "fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a62013753a4a82c8492e8145f0b77c43bb10f18b", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a62013753a4a82c8492e8145f0b77c43bb10f18b", "committedDate": "2020-04-14T12:07:03Z", "message": "remove empty line\n\nCo-Authored-By: Johannes Renner <jrenner@suse.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b8e16d2693423aff1215780f4689a5ddbb574c7", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9b8e16d2693423aff1215780f4689a5ddbb574c7", "committedDate": "2020-04-14T12:07:03Z", "message": "update copyright"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a5c22fe3e871738b77560f5a36438ada94b7c93", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2a5c22fe3e871738b77560f5a36438ada94b7c93", "committedDate": "2020-04-14T10:42:49Z", "message": "update copyright"}, "afterCommit": {"oid": "9b8e16d2693423aff1215780f4689a5ddbb574c7", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9b8e16d2693423aff1215780f4689a5ddbb574c7", "committedDate": "2020-04-14T12:07:03Z", "message": "update copyright"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83e4951e4b468134d26ba4ee43362a088f64fd34", "author": {"user": {"login": "lucidd", "name": "Kevin Walter"}}, "url": "https://github.com/uyuni-project/uyuni/commit/83e4951e4b468134d26ba4ee43362a088f64fd34", "committedDate": "2020-04-14T12:07:48Z", "message": "Merge branch 'refactoring-3-uyuni' into uyuni-master"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1536, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}