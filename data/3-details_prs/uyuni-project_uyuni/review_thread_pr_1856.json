{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMjI4NDM3", "number": 1856, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMDozMTo0M1rODcledg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMjoyODoxNVrODcnXdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzAwNzI2OnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/salt_steps.rb", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMDozMTo0M1rOFkszMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMToyOTo0MlrOFkuVdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAyNzA1Ng==", "bodyText": "Could it be the first assignment (the one with the comment) is enough, and we do not need the other two?\nAfter all, if the problem is to force access to DOM tree, once is enough, isn't it?", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374027056", "createdAt": "2020-02-03T10:31:43Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,14 +271,16 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  _inner_element = find('#chooseFormulas')['innerHTML']\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n-    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+    _inner_element = find('#chooseFormulas')['innerHTML']", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9087cc4b55a91d7b18771cf5f9834ffb053bc166"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAzMjQ4MA==", "bodyText": "we just need to access the element not the assignment, we could just use:\nfind('#chooseFormulas')['innerHTML']", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374032480", "createdAt": "2020-02-03T10:43:44Z", "author": {"login": "calancha"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,14 +271,16 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  _inner_element = find('#chooseFormulas')['innerHTML']\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n-    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+    _inner_element = find('#chooseFormulas')['innerHTML']", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAyNzA1Ng=="}, "originalCommit": {"oid": "9087cc4b55a91d7b18771cf5f9834ffb053bc166"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA0NjA1MQ==", "bodyText": "That too, yes", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374046051", "createdAt": "2020-02-03T11:14:25Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,14 +271,16 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  _inner_element = find('#chooseFormulas')['innerHTML']\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n-    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+    _inner_element = find('#chooseFormulas')['innerHTML']", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAyNzA1Ng=="}, "originalCommit": {"oid": "9087cc4b55a91d7b18771cf5f9834ffb053bc166"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA1MTE0Mg==", "bodyText": "@calancha @Bischoff I know :-) It came to my mind too. My first intention was to keep this solution as close as possible to the previous one. But it is also true, that the other two additional puts were present only for debug print. So... I will change it ;-)", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374051142", "createdAt": "2020-02-03T11:27:02Z", "author": {"login": "lkotek"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,14 +271,16 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  _inner_element = find('#chooseFormulas')['innerHTML']\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n-    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+    _inner_element = find('#chooseFormulas')['innerHTML']", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAyNzA1Ng=="}, "originalCommit": {"oid": "9087cc4b55a91d7b18771cf5f9834ffb053bc166"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA1MjIxMg==", "bodyText": "@lkotek maybe give it an extra testing shot with those changes, just in case?", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374052212", "createdAt": "2020-02-03T11:29:42Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,14 +271,16 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  _inner_element = find('#chooseFormulas')['innerHTML']\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n-    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+    _inner_element = find('#chooseFormulas')['innerHTML']", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAyNzA1Ng=="}, "originalCommit": {"oid": "9087cc4b55a91d7b18771cf5f9834ffb053bc166"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzIxNDQxOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/salt_steps.rb", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMTo0NzoyN1rOFkuxBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMjoyNzowMlrOFkvsuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA1OTI2OA==", "bodyText": "Interesting, I thought that rubocop complains if we don't add a newline after a raise.", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374059268", "createdAt": "2020-02-03T11:47:27Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,15 +271,19 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  find('#chooseFormulas')['innerHTML']\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n-    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n-    raise \"xpath: #{xpath_query} not found\" unless find(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).click\n+    element = find(:xpath, xpath_query, match: :first ,wait: DEFAULT_TIMEOUT) if find('#chooseFormulas')\n+    raise \"xpath: #{xpath_query} not found\" unless element.nil?    ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90b9685846397f7f3e5e9b8d8bc8078c6a437085"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA3NDU1Mw==", "bodyText": "Remove the `if find(#chooseFormulas) i.e. revert to original code", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374074553", "createdAt": "2020-02-03T12:27:02Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,15 +271,19 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  find('#chooseFormulas')['innerHTML']\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n-    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n-    raise \"xpath: #{xpath_query} not found\" unless find(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).click\n+    element = find(:xpath, xpath_query, match: :first ,wait: DEFAULT_TIMEOUT) if find('#chooseFormulas')\n+    raise \"xpath: #{xpath_query} not found\" unless element.nil?    ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA1OTI2OA=="}, "originalCommit": {"oid": "90b9685846397f7f3e5e9b8d8bc8078c6a437085"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzIxNzAzOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/salt_steps.rb", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMTo0ODoyOVrOFkuyhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMjozOTo0N1rOFkv_3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA1OTY1NA==", "bodyText": "We can get rid of that one, as we are already acting through it later on.", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374059654", "createdAt": "2020-02-03T11:48:29Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,15 +271,19 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  find('#chooseFormulas')['innerHTML']", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90b9685846397f7f3e5e9b8d8bc8078c6a437085"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA3NDA4Mg==", "bodyText": "No. We must keep the first one and remove the others.", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374074082", "createdAt": "2020-02-03T12:25:50Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,15 +271,19 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  find('#chooseFormulas')['innerHTML']", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA1OTY1NA=="}, "originalCommit": {"oid": "90b9685846397f7f3e5e9b8d8bc8078c6a437085"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA3OTQ1Mw==", "bodyText": "Yep, this is important. Well if there is one single important line in this PR, it is this one :-D", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374079453", "createdAt": "2020-02-03T12:39:47Z", "author": {"login": "lkotek"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,15 +271,19 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  find('#chooseFormulas')['innerHTML']", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA1OTY1NA=="}, "originalCommit": {"oid": "90b9685846397f7f3e5e9b8d8bc8078c6a437085"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzMxNzAzOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/salt_steps.rb", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMjoyODoxNVrOFkvuwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMjo0NzoxMlrOFkwLbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA3NTA3Mg==", "bodyText": "Remove the `if find(#chooseFormulas) i.e. revert to original code", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374075072", "createdAt": "2020-02-03T12:28:15Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,15 +271,19 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  find('#chooseFormulas')['innerHTML']\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n-    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n-    raise \"xpath: #{xpath_query} not found\" unless find(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).click\n+    element = find(:xpath, xpath_query, match: :first ,wait: DEFAULT_TIMEOUT) if find('#chooseFormulas')\n+    raise \"xpath: #{xpath_query} not found\" unless element.nil?    \n+    element.click   \n   else\n     xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'check'\n     xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'uncheck'\n-    puts \"Selected formulas [else]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n-    raise \"xpath: #{xpath_query} not found\" unless all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n+    element = find(:xpath, xpath_query, match: :first ,wait: DEFAULT_TIMEOUT) if find('#chooseFormulas')\n+    raise \"xpath: #{xpath_query} not found\" unless element.nil?    ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90b9685846397f7f3e5e9b8d8bc8078c6a437085"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA4MjQxNQ==", "bodyText": "@Bischoff Yep, it just failed in run 1034. Sorry @srbarrios :-(", "url": "https://github.com/uyuni-project/uyuni/pull/1856#discussion_r374082415", "createdAt": "2020-02-03T12:47:12Z", "author": {"login": "lkotek"}, "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -271,15 +271,19 @@\n   # Complicated code because the checkbox is not a <input type=checkbox> but an <i>\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'check'\n   xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'uncheck'\n-  puts \"Selected formulas [beginning]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n+  # WORKAROUND\n+  # DOM refreshes content of chooseFormulas element by accessing it. Then conditions are evaluated properly.\n+  find('#chooseFormulas')['innerHTML']\n   if all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n-    puts \"Selected formulas [if]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n-    raise \"xpath: #{xpath_query} not found\" unless find(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).click\n+    element = find(:xpath, xpath_query, match: :first ,wait: DEFAULT_TIMEOUT) if find('#chooseFormulas')\n+    raise \"xpath: #{xpath_query} not found\" unless element.nil?    \n+    element.click   \n   else\n     xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-check-square-o']\" if action == 'check'\n     xpath_query = \"//a[@id = '#{formula}']/i[@class = 'fa fa-lg fa-square-o']\" if action == 'uncheck'\n-    puts \"Selected formulas [else]:\\n#{find('#chooseFormulas')['innerHTML']}\"\n-    raise \"xpath: #{xpath_query} not found\" unless all(:xpath, xpath_query, wait: DEFAULT_TIMEOUT).any?\n+    element = find(:xpath, xpath_query, match: :first ,wait: DEFAULT_TIMEOUT) if find('#chooseFormulas')\n+    raise \"xpath: #{xpath_query} not found\" unless element.nil?    ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA3NTA3Mg=="}, "originalCommit": {"oid": "90b9685846397f7f3e5e9b8d8bc8078c6a437085"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 246, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}