{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5OTQwMDI2", "number": 2231, "title": "Uyuni master ubuntu shows removed pkgs", "bodyText": "What does this PR change?\nSince status was excluded from the pkg information, everything was deemed to be installed. This changes once 'status' is included again.\nGUI diff\nNo difference.\nDocumentation\n\nNo documentation needed: only internal and user invisible changes\n\nTest coverage\n\nNo tests: Works as implemented. But we should think about changing the implementation details here.\n\nChangelogs\nProvided\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-05-19T07:47:51Z", "url": "https://github.com/uyuni-project/uyuni/pull/2231", "merged": true, "mergeCommit": {"oid": "b913ed27d37084a7ec031c50e6e08bea7cde54b6"}, "closed": true, "closedAt": "2020-05-19T09:43:14Z", "author": {"login": "brejoc"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcikaKcAH2gAyNDE5OTQwMDI2OmQ0MDBmMjE4ZmY1ODZiNmZlY2U1ZGU4YWNmZjdlMTA3OWMwMTc4OTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcixQG7gFqTQxNDI3Njk0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d400f218ff586b6fece5de8acff7e1079c017892", "author": {"user": {"login": "brejoc", "name": "Jochen Breuer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d400f218ff586b6fece5de8acff7e1079c017892", "committedDate": "2020-05-18T18:44:40Z", "message": "Fix for bsc#1171461 - Ubuntu shows removed packages\n\nSince we status was excluded from the pkg information, everything was deemed\nto be installed. This changes once 'status' is included again."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c12130106a04a971db95e4d3ea2d32f6ff3d9086", "author": {"user": {"login": "brejoc", "name": "Jochen Breuer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c12130106a04a971db95e4d3ea2d32f6ff3d9086", "committedDate": "2020-05-19T07:52:49Z", "message": "Adds changelog entrywq"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6cfe07fd30e7f0c9adb47a57eadf3e9391dc0caa", "author": {"user": {"login": "brejoc", "name": "Jochen Breuer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6cfe07fd30e7f0c9adb47a57eadf3e9391dc0caa", "committedDate": "2020-05-19T07:49:24Z", "message": "Readds accidentally removed line from changelog"}, "afterCommit": {"oid": "c12130106a04a971db95e4d3ea2d32f6ff3d9086", "author": {"user": {"login": "brejoc", "name": "Jochen Breuer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c12130106a04a971db95e4d3ea2d32f6ff3d9086", "committedDate": "2020-05-19T07:52:49Z", "message": "Adds changelog entrywq"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MjY1NjI1", "url": "https://github.com/uyuni-project/uyuni/pull/2231#pullrequestreview-414265625", "createdAt": "2020-05-19T09:27:54Z", "commit": {"oid": "c12130106a04a971db95e4d3ea2d32f6ff3d9086"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwOToyNzo1NFrOGXX07Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwOToyNzo1NFrOGXX07Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE2MDgxMw==", "bodyText": "Hmm... I don't really understand this change. The pkg.info_installed method should always only return installed packages (regardless the attr argument).\nThe attr argument only affects to the format of the output, but the list of packages should always be the same (only installed packages).\nIn case pkg.info_installed is reporting uninstalled packages on Ubuntu/Debian, I would expect a fix on the Salt module but not here.\nAm I missing something here?", "url": "https://github.com/uyuni-project/uyuni/pull/2231#discussion_r427160813", "createdAt": "2020-05-19T09:27:54Z", "author": {"login": "meaksh"}, "path": "susemanager-utils/susemanager-sls/salt/packages/profileupdate.sls", "diffHunk": "@@ -2,7 +2,7 @@ packages:\n   module.run:\n     - name: pkg.info_installed\n     - kwargs: {\n-          attr: 'arch,epoch,version,release,install_date_time_t',\n+          attr: 'status,arch,epoch,version,release,install_date_time_t',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c12130106a04a971db95e4d3ea2d32f6ff3d9086"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0Mjc2OTQw", "url": "https://github.com/uyuni-project/uyuni/pull/2231#pullrequestreview-414276940", "createdAt": "2020-05-19T09:42:27Z", "commit": {"oid": "c12130106a04a971db95e4d3ea2d32f6ff3d9086"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1243, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}