{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0NDQ4OTg4", "number": 1909, "title": "Adjust REGEX for username validation", "bodyText": "What does this PR change?\nAdjust REGEX for username validation:\n\n/ is not valid for the GNU/Linux Distributions I tested (Debian, openSUSE, CentOS) or Windows (I kept \\ as it's the separator between user and domain in Windows)\nOnly English alphabetic are valid at the same distributions (tried with cyrillic)\n_ is a valid character.\n- was allowed, but it didn't work on the REGEX (see screenshots). Works now (it's used by for a lot of images at AWS: ec2-user)\nThe error message was not really correct as it didn't mention -\nAdd some more testcases\n\nGUI diff\nNo difference.\nBefore:\n\nAfter:\n\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: modules/client-configuration/pages/registration-webui.adoc does not talk about the username restrictions.\n\n\n DONE\n\n\nTest coverage\n\n\nUnit tests were added\n\n\n DONE\n\n\nLinks\nNone\n\n DONE\n\nChangelogs\nNo sure we really need a changelog here.\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-02-12T18:00:41Z", "url": "https://github.com/uyuni-project/uyuni/pull/1909", "merged": true, "mergeCommit": {"oid": "979baeb3dc6d9e3eeac0f980440487553a4bcb4b"}, "closed": true, "closedAt": "2020-03-03T16:09:18Z", "author": {"login": "juliogonzalez"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDqSpTAFqTM1NzY2OTg4Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEOtuwAFqTM1ODkwNTQ3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NjY5ODgz", "url": "https://github.com/uyuni-project/uyuni/pull/1909#pullrequestreview-357669883", "createdAt": "2020-02-12T18:04:13Z", "commit": {"oid": "2ae5ba0e253a88e9e92321bb90c44ac618c20ef0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODowNDoxM1rOFo493g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxODowNDoxM1rOFo493g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQyMDcwMg==", "bodyText": "@hustodemon so... After reviewing the tests (didn't notice we have them for this), I realized you added that... maybe for future Windows support:\n    public void testValidateBootstrapInputUserBackslash() {\n        String json = \"{user: 'domain\\\\\\\\admin', host: 'host.domain.com'}\";\n        BootstrapHostsJson input = MinionsAPI.GSON.fromJson(json, BootstrapHostsJson.class);\n        List<String> validationErrors = InputValidator.INSTANCE.validateBootstrapInput(input);\n        assertTrue(validationErrors.isEmpty());\n    }\n\nBut that explains the backslash, not the slash. Any idea if that's used at Windows as well? I'd say it is not. We where not even testing it.", "url": "https://github.com/uyuni-project/uyuni/pull/1909#discussion_r378420702", "createdAt": "2020-02-12T18:04:13Z", "author": {"login": "juliogonzalez"}, "path": "java/code/src/com/suse/manager/webui/utils/InputValidator.java", "diffHunk": "@@ -33,8 +33,8 @@\n      */\n     INSTANCE;\n \n-    // Allow letters (of all languages), numbers, '.', '/', '\\' and '-'\n-    private static final Pattern USERNAME = Pattern.compile(\"^[\\\\p{L}\\\\p{N}.-/\\\\\\\\]*$\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ae5ba0e253a88e9e92321bb90c44ac618c20ef0"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ae5ba0e253a88e9e92321bb90c44ac618c20ef0", "author": {"user": {"login": "juliogonzalez", "name": "Julio Gonz\u00e1lez Gil"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2ae5ba0e253a88e9e92321bb90c44ac618c20ef0", "committedDate": "2020-02-12T14:39:03Z", "message": "Adjust REGEX for username validation"}, "afterCommit": {"oid": "45946add4c4d4b70cf71716c59a9c04869e0a6d3", "author": {"user": {"login": "juliogonzalez", "name": "Julio Gonz\u00e1lez Gil"}}, "url": "https://github.com/uyuni-project/uyuni/commit/45946add4c4d4b70cf71716c59a9c04869e0a6d3", "committedDate": "2020-02-12T18:12:04Z", "message": "Adjust REGEX for username validation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "45946add4c4d4b70cf71716c59a9c04869e0a6d3", "author": {"user": {"login": "juliogonzalez", "name": "Julio Gonz\u00e1lez Gil"}}, "url": "https://github.com/uyuni-project/uyuni/commit/45946add4c4d4b70cf71716c59a9c04869e0a6d3", "committedDate": "2020-02-12T18:12:04Z", "message": "Adjust REGEX for username validation"}, "afterCommit": {"oid": "9555f74ca01fdc3aaa4d20cfeecd5999e330c033", "author": {"user": {"login": "juliogonzalez", "name": "Julio Gonz\u00e1lez Gil"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9555f74ca01fdc3aaa4d20cfeecd5999e330c033", "committedDate": "2020-02-12T18:14:12Z", "message": "Adjust REGEX for username validation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9555f74ca01fdc3aaa4d20cfeecd5999e330c033", "author": {"user": {"login": "juliogonzalez", "name": "Julio Gonz\u00e1lez Gil"}}, "url": "https://github.com/uyuni-project/uyuni/commit/9555f74ca01fdc3aaa4d20cfeecd5999e330c033", "committedDate": "2020-02-12T18:14:12Z", "message": "Adjust REGEX for username validation"}, "afterCommit": {"oid": "a57b35eff0a20e29718db577ce493edc43e57c6b", "author": {"user": {"login": "juliogonzalez", "name": "Julio Gonz\u00e1lez Gil"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a57b35eff0a20e29718db577ce493edc43e57c6b", "committedDate": "2020-02-12T18:22:25Z", "message": "Adjust REGEX for username validation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "098ec0453f02696aaa30881490bdc11cdcbb3be5", "author": {"user": {"login": "juliogonzalez", "name": "Julio Gonz\u00e1lez Gil"}}, "url": "https://github.com/uyuni-project/uyuni/commit/098ec0453f02696aaa30881490bdc11cdcbb3be5", "committedDate": "2020-02-12T21:18:41Z", "message": "Adjust REGEX for username validation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a57b35eff0a20e29718db577ce493edc43e57c6b", "author": {"user": {"login": "juliogonzalez", "name": "Julio Gonz\u00e1lez Gil"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a57b35eff0a20e29718db577ce493edc43e57c6b", "committedDate": "2020-02-12T18:22:25Z", "message": "Adjust REGEX for username validation"}, "afterCommit": {"oid": "098ec0453f02696aaa30881490bdc11cdcbb3be5", "author": {"user": {"login": "juliogonzalez", "name": "Julio Gonz\u00e1lez Gil"}}, "url": "https://github.com/uyuni-project/uyuni/commit/098ec0453f02696aaa30881490bdc11cdcbb3be5", "committedDate": "2020-02-12T21:18:41Z", "message": "Adjust REGEX for username validation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MDM2MTA1", "url": "https://github.com/uyuni-project/uyuni/pull/1909#pullrequestreview-358036105", "createdAt": "2020-02-13T08:42:10Z", "commit": {"oid": "098ec0453f02696aaa30881490bdc11cdcbb3be5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MTQ1Nzkx", "url": "https://github.com/uyuni-project/uyuni/pull/1909#pullrequestreview-358145791", "createdAt": "2020-02-13T11:31:18Z", "commit": {"oid": "098ec0453f02696aaa30881490bdc11cdcbb3be5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4OTA1NDc0", "url": "https://github.com/uyuni-project/uyuni/pull/1909#pullrequestreview-358905474", "createdAt": "2020-02-14T12:23:43Z", "commit": {"oid": "098ec0453f02696aaa30881490bdc11cdcbb3be5"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxMjoyMzo0NFrOFp08ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxMjoyMzo0NFrOFp08ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQwMzQyMg==", "bodyText": "After some searching, I wasn't able to verify the slash case on windows. But I'd say that the fact that it causes trouble on the supported systems by us (like SLE) is more than good reason to kick it away.", "url": "https://github.com/uyuni-project/uyuni/pull/1909#discussion_r379403422", "createdAt": "2020-02-14T12:23:44Z", "author": {"login": "hustodemon"}, "path": "java/code/src/com/suse/manager/webui/utils/InputValidator.java", "diffHunk": "@@ -33,8 +33,8 @@\n      */\n     INSTANCE;\n \n-    // Allow letters (of all languages), numbers, '.', '/', '\\' and '-'\n-    private static final Pattern USERNAME = Pattern.compile(\"^[\\\\p{L}\\\\p{N}.-/\\\\\\\\]*$\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQyMDcwMg=="}, "originalCommit": {"oid": "2ae5ba0e253a88e9e92321bb90c44ac618c20ef0"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1657, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}