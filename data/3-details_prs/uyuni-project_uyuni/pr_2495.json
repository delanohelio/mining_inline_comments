{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NDg2OTM0", "number": 2495, "title": "Enable and disable \"Desktop-Applications\" repo on SLE15, required by \"Development-Tools\" channel", "bodyText": "What does this PR change?\nThis PR fixes an issue in the testsuite while applying the highstate on the build host.\nThe \"SLE-Module-Desktop-Applications\" channel is required by \"SLE-Module-Development-Tools\" channel but we're not taking care of enable and disable it properly before and after triggering the highstate on the build host.\nThis PR should fix this issue and enable and disable the \"Desktop-Application\" repository accordingly to allow the highstate to success.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\nNo documentation needed: testsuite changes\n DONE\n\nTest coverage\n\nNo tests: testsuite changes\n DONE\n\nLinks\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-08-18T13:07:45Z", "url": "https://github.com/uyuni-project/uyuni/pull/2495", "merged": true, "mergeCommit": {"oid": "529e8ba11354acbe045ecfd93cb583e1b3cab0a9"}, "closed": true, "closedAt": "2020-08-18T13:30:21Z", "author": {"login": "meaksh"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAGqsfAH2gAyNDY5NDg2OTM0OmNiNzQ0OWNlYmU3MGRlMTcyZWQ2OTRjNmQ5NmZkMTQwZjExZGM4NGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAG9augFqTQ2OTQ1MDE4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cb7449cebe70de172ed694c6d96fd140f11dc84f", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/cb7449cebe70de172ed694c6d96fd140f11dc84f", "committedDate": "2020-08-18T13:03:18Z", "message": "Enable/Disable Desktop-Applications repo on SLE15, required by Development-Tools"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NDQ2NTU5", "url": "https://github.com/uyuni-project/uyuni/pull/2495#pullrequestreview-469446559", "createdAt": "2020-08-18T13:19:33Z", "commit": {"oid": "cb7449cebe70de172ed694c6d96fd140f11dc84f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NDQ4NTA0", "url": "https://github.com/uyuni-project/uyuni/pull/2495#pullrequestreview-469448504", "createdAt": "2020-08-18T13:21:51Z", "commit": {"oid": "cb7449cebe70de172ed694c6d96fd140f11dc84f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMzoyMTo1MVrOHCUKCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMzoyMTo1MVrOHCUKCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjE4OTQ0OQ==", "bodyText": "Let's run the command  only once, make sense? :9", "url": "https://github.com/uyuni-project/uyuni/pull/2495#discussion_r472189449", "createdAt": "2020-08-18T13:21:51Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -717,12 +717,14 @@\n   repos, _code = $build_host.run('zypper lr | grep \"tools\" | cut -d\"|\" -f2')\n   puts $build_host.run(\"zypper mr --enable #{repos.gsub(/\\s/, ' ')}\")\n \n-  # Development\n+  # Development and Desktop Applications (required)\n   # (we do not install Python 2 repositories in this branch\n   #  because they are not needed anymore starting with version 4.1)\n   if os_family =~ /^sles/ && os_version =~ /^15/\n     repos = \"devel_pool_repo devel_updates_repo\"\n     puts $build_host.run(\"zypper mr --enable #{repos}\")\n+    repos = \"desktop_pool_repo desktop_updates_repo\"\n+    puts $build_host.run(\"zypper mr --enable #{repos}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb7449cebe70de172ed694c6d96fd140f11dc84f"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NDQ4NzM1", "url": "https://github.com/uyuni-project/uyuni/pull/2495#pullrequestreview-469448735", "createdAt": "2020-08-18T13:22:07Z", "commit": {"oid": "cb7449cebe70de172ed694c6d96fd140f11dc84f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMzoyMjowN1rOHCULJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMzoyMjowN1rOHCULJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjE4OTczNQ==", "bodyText": "same, run it once", "url": "https://github.com/uyuni-project/uyuni/pull/2495#discussion_r472189735", "createdAt": "2020-08-18T13:22:07Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -745,12 +747,14 @@\n   repos, _code = $build_host.run('zypper lr | grep \"tools\" | cut -d\"|\" -f2')\n   puts $build_host.run(\"zypper mr --disable #{repos.gsub(/\\s/, ' ')}\")\n \n-  # Development\n+  # Development and Desktop Applications (required)\n   # (we do not install Python 2 repositories in this branch\n   #  because they are not needed anymore starting with version 4.1)\n   if os_family =~ /^sles/ && os_version =~ /^15/\n     repos = \"devel_pool_repo devel_updates_repo\"\n     puts $build_host.run(\"zypper mr --disable #{repos}\")\n+    repos = \"desktop_pool_repo desktop_updates_repo\"\n+    puts $build_host.run(\"zypper mr --disable #{repos}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb7449cebe70de172ed694c6d96fd140f11dc84f"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2432edec676a0d675d75d8461be9c61e8b3e641a", "author": {"user": {"login": "meaksh", "name": "Pablo Su\u00e1rez Hern\u00e1ndez"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2432edec676a0d675d75d8461be9c61e8b3e641a", "committedDate": "2020-08-18T13:23:30Z", "message": "Do not duplicate zypper calls"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NDUwMTg5", "url": "https://github.com/uyuni-project/uyuni/pull/2495#pullrequestreview-469450189", "createdAt": "2020-08-18T13:23:45Z", "commit": {"oid": "cb7449cebe70de172ed694c6d96fd140f11dc84f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1060, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}