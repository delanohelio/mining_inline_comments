{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MzQ1Njgy", "number": 2444, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyMTozMlrOESQ-fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzozNjo0OVrOESRRyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTg3OTY0OnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/min_centos_salt.feature", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyMTozMlrOG3Wdqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyMTozMlrOG3Wdqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5MjkwNw==", "bodyText": "For traditional clients sure, but for SSH minion I'm not sure that we need to install those packages. They will not hurt anyway :)", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460692907", "createdAt": "2020-07-27T07:21:32Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -65,12 +65,22 @@ Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n     And I wait until event \"Subscribe channels scheduled by admin\" is completed\n \n @centos_minion\n-  Scenario: Detect latest Salt changes on the CentOS minion\n-    When I query latest Salt changes on \"ceos_minion\"\n+  Scenario: Prepare the SSH-managed CentOS minion\n+    Given I am authorized\n+    When I enable SUSE Manager tools repositories on \"ceos_ssh_minion\"\n+    And  I enable repository \"CentOS-Base\" on this \"ceos_ssh_minion\"\n+    And  I install package \"hwdata m2crypto wget\" on this \"ceos_ssh_minion\"\n+    And  I install package \"spacewalk-client-tools spacewalk-check spacewalk-client-setup mgr-daemon mgr-osad mgr-cfg-actions\" on this \"ceos_ssh_minion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 88}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTg4MzM3OnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/min_centos_salt.feature", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyMjo0OFrOG3Wf8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzozMjo1NFrOG3WzLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5MzQ4OA==", "bodyText": "We probably need both tags here (if you ask me, better at feature level, once), centos_minion and centos_ssh_minion", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460693488", "createdAt": "2020-07-27T07:22:48Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -1,58 +1,58 @@\n-# Copyright (c) 2017-2019 SUSE LLC\n+# Copyright (c) 2017-2020 SUSE LLC\n # Licensed under the terms of the MIT license.\n #\n-# 1) delete CentOS SSH minion and register as Centos minion\n+# 1) delete CentOS minion and register as Centos SSH minion\n # 2) run a remote command\n # 3) try an openscap scan\n-# 4) delete CentOS minion client and register as Centos SSH minion\n+# 4) delete CentOS SSH minion client and register as Centos minion\n \n-Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n+Feature: Bootstrap a SSH-managed CentOS minion and do some basic operations on it\n \n @centos_minion", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5ODQxNA==", "bodyText": "Ah nothing sorry, we only have one VM, got confused", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460698414", "createdAt": "2020-07-27T07:32:54Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -1,58 +1,58 @@\n-# Copyright (c) 2017-2019 SUSE LLC\n+# Copyright (c) 2017-2020 SUSE LLC\n # Licensed under the terms of the MIT license.\n #\n-# 1) delete CentOS SSH minion and register as Centos minion\n+# 1) delete CentOS minion and register as Centos SSH minion\n # 2) run a remote command\n # 3) try an openscap scan\n-# 4) delete CentOS minion client and register as Centos SSH minion\n+# 4) delete CentOS SSH minion client and register as Centos minion\n \n-Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n+Feature: Bootstrap a SSH-managed CentOS minion and do some basic operations on it\n \n @centos_minion", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5MzQ4OA=="}, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTg5NTQzOnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/min_centos_salt.feature", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzoyNjo0MFrOG3WnPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzozMzoyMFrOG3W0Eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5NTM1Nw==", "bodyText": "I wonder why we delete the centos minion, to test centos ssh minion, apparently, we are not reusing the same VM \ud83e\udd14", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460695357", "createdAt": "2020-07-27T07:26:40Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -1,58 +1,58 @@\n-# Copyright (c) 2017-2019 SUSE LLC\n+# Copyright (c) 2017-2020 SUSE LLC\n # Licensed under the terms of the MIT license.\n #\n-# 1) delete CentOS SSH minion and register as Centos minion\n+# 1) delete CentOS minion and register as Centos SSH minion\n # 2) run a remote command\n # 3) try an openscap scan\n-# 4) delete CentOS minion client and register as Centos SSH minion\n+# 4) delete CentOS SSH minion client and register as Centos minion\n \n-Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n+Feature: Bootstrap a SSH-managed CentOS minion and do some basic operations on it\n \n @centos_minion\n-  Scenario: Delete the CentOS SSH minion before normal minion tests\n-    When I am on the Systems overview page of this \"ceos_ssh_minion\"\n+  Scenario: Delete the CentOS minion before SSH minion tests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5ODAwMQ==", "bodyText": "We are using two tags, but currently the VMs are the same, that's why we need to delete in that step.\nSee here:\ntestsuite/features/support/twopence_init.rb\n$node_by_host = { 'server'                => $server,\n                  'proxy'                 => $proxy,\n                  'ceos_minion'           => $ceos_minion,\n                  'ceos_ssh_minion'       => $ceos_minion,\n                  'ceos_client'           => $ceos_minion,", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460698001", "createdAt": "2020-07-27T07:32:02Z", "author": {"login": "calancha"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -1,58 +1,58 @@\n-# Copyright (c) 2017-2019 SUSE LLC\n+# Copyright (c) 2017-2020 SUSE LLC\n # Licensed under the terms of the MIT license.\n #\n-# 1) delete CentOS SSH minion and register as Centos minion\n+# 1) delete CentOS minion and register as Centos SSH minion\n # 2) run a remote command\n # 3) try an openscap scan\n-# 4) delete CentOS minion client and register as Centos SSH minion\n+# 4) delete CentOS SSH minion client and register as Centos minion\n \n-Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n+Feature: Bootstrap a SSH-managed CentOS minion and do some basic operations on it\n \n @centos_minion\n-  Scenario: Delete the CentOS SSH minion before normal minion tests\n-    When I am on the Systems overview page of this \"ceos_ssh_minion\"\n+  Scenario: Delete the CentOS minion before SSH minion tests", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5NTM1Nw=="}, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5ODY0Mg==", "bodyText": "Cool, got confused, all good then", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460698642", "createdAt": "2020-07-27T07:33:20Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -1,58 +1,58 @@\n-# Copyright (c) 2017-2019 SUSE LLC\n+# Copyright (c) 2017-2020 SUSE LLC\n # Licensed under the terms of the MIT license.\n #\n-# 1) delete CentOS SSH minion and register as Centos minion\n+# 1) delete CentOS minion and register as Centos SSH minion\n # 2) run a remote command\n # 3) try an openscap scan\n-# 4) delete CentOS minion client and register as Centos SSH minion\n+# 4) delete CentOS SSH minion client and register as Centos minion\n \n-Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n+Feature: Bootstrap a SSH-managed CentOS minion and do some basic operations on it\n \n @centos_minion\n-  Scenario: Delete the CentOS SSH minion before normal minion tests\n-    When I am on the Systems overview page of this \"ceos_ssh_minion\"\n+  Scenario: Delete the CentOS minion before SSH minion tests", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5NTM1Nw=="}, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTkwOTI4OnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/min_centos_salt.feature", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzozMDo1M1rOG3Wvdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzozMDo1M1rOG3Wvdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5NzQ2Mw==", "bodyText": "Out of scope: Not sure about it, but if that target is looking for the name of the VM, we might want to refactor it, so we pass \"centos_ssh_minion\" hostname as a target. Just thinking in the future if we have someday more VMs matching \"centos\" in this feature's test.", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460697463", "createdAt": "2020-07-27T07:30:53Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/secondary/min_centos_salt.feature", "diffHunk": "@@ -80,23 +90,23 @@ Feature: Be able to bootstrap a CentOS minion and do some basic operations on it\n     And I wait until event \"OpenSCAP xccdf scanning\" is completed\n \n @centos_minion\n-  Scenario: Run a remote command on the CentOS minion\n+  Scenario: Run a remote command on the SSH-managed CentOS minion\n     Given I am authorized as \"testing\" with password \"testing\"\n     When I follow the left menu \"Salt > Remote Commands\"\n     Then I should see a \"Remote Commands\" text in the content area\n     When I enter command \"cat /etc/os-release\"\n     And I enter target \"*centos*\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 114}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3NTkyOTA3OnYy", "diffSide": "RIGHT", "path": "testsuite/run_sets/refhost.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwNzozNjo0OVrOG3W7Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwOToyODoyM1rOG3awVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMDQzMA==", "bodyText": "We should also rename both feature files named as min_centos/ubuntu_salt.feature", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460700430", "createdAt": "2020-07-27T07:36:49Z", "author": {"login": "srbarrios"}, "path": "testsuite/run_sets/refhost.yml", "diffHunk": "@@ -20,8 +20,8 @@\n - features/init_clients/sle_client.feature\n - features/init_clients/sle_minion.feature\n - features/init_clients/sle_ssh_minion.feature\n-- features/init_clients/centos_ssh_minion.feature\n-- features/init_clients/ubuntu_ssh_minion.feature\n+- features/init_clients/centos_minion.feature", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc2MzIyMQ==", "bodyText": "Done.  Renamed as:\n\ntestsuite/features/init_clients/min_centos_salt.feature\ntestsuite/features/init_clients/min_ubuntu_salt.feature\ntestsuite/features/secondary/min_centos_ssh.feature\ntestsuite/features/secondary/min_ubuntu_ssh.feature", "url": "https://github.com/uyuni-project/uyuni/pull/2444#discussion_r460763221", "createdAt": "2020-07-27T09:28:23Z", "author": {"login": "calancha"}, "path": "testsuite/run_sets/refhost.yml", "diffHunk": "@@ -20,8 +20,8 @@\n - features/init_clients/sle_client.feature\n - features/init_clients/sle_minion.feature\n - features/init_clients/sle_ssh_minion.feature\n-- features/init_clients/centos_ssh_minion.feature\n-- features/init_clients/ubuntu_ssh_minion.feature\n+- features/init_clients/centos_minion.feature", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMDQzMA=="}, "originalCommit": {"oid": "e5c5008cdad1f9f098016bca15e6f44885fe6fb4"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4247, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}