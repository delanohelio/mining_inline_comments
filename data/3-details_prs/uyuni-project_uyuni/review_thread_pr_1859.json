{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMjkyNTgy", "number": 1859, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMjo0Mjo1OVrODcnmMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMDozOTozOVrOEEPUwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzM1NDcyOnYy", "diffSide": "RIGHT", "path": "testsuite/run_sets/testsuite.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMjo0Mjo1OVrOFkwE2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMjo0Mjo1OVrOFkwE2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA4MDczMQ==", "bodyText": "Don't re-add this file please.", "url": "https://github.com/uyuni-project/uyuni/pull/1859#discussion_r374080731", "createdAt": "2020-02-03T12:42:59Z", "author": {"login": "Bischoff"}, "path": "testsuite/run_sets/testsuite.yml", "diffHunk": "@@ -0,0 +1,143 @@\n+# This file describes the order of features in a normal testsuite run.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1b56972f793192b8ba0b3d1225b4afe9df8d86f"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzQ4NjIzOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/command_steps.rb", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzoyODo0MlrOFkxS-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo1MDoxMlrOFkx8bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEwMDcyOA==", "bodyText": "In order to cover other clients could you please do that?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              if host == 'sle_minion'\n          \n          \n            \n              if host.include? 'ubuntu'\n          \n          \n            \n                cmd = \"ls /var/cache/apt/archives/#{pkg_name}*.deb\"\n          \n          \n            \n              else\n          \n          \n            \n                cmd = \"ls /var/cache/zypp/packages/susemanager:test-channel-x86_64/getPackage/*/*/#{pkg_name}*.rpm\"\n          \n          \n            \n              end", "url": "https://github.com/uyuni-project/uyuni/pull/1859#discussion_r374100728", "createdAt": "2020-02-03T13:28:42Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -703,7 +703,11 @@\n \n When(/^I wait until the package \"(.*?)\" has been cached on this \"(.*?)\"$/) do |pkg_name, host|\n   node = get_target(host)\n-  cmd = \"ls /var/cache/zypp/packages/susemanager:test-channel-x86_64/getPackage/*/*/#{pkg_name}*.rpm\"\n+  if host == 'sle_minion'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1b56972f793192b8ba0b3d1225b4afe9df8d86f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDExMTM0MQ==", "bodyText": "I already quickly raised this issue with Marcelo. This PR is part of a port, so that change would need to happen in the other branches as well.\nMarcelo? It would mean to port back that change to 4.0 after that.", "url": "https://github.com/uyuni-project/uyuni/pull/1859#discussion_r374111341", "createdAt": "2020-02-03T13:50:12Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -703,7 +703,11 @@\n \n When(/^I wait until the package \"(.*?)\" has been cached on this \"(.*?)\"$/) do |pkg_name, host|\n   node = get_target(host)\n-  cmd = \"ls /var/cache/zypp/packages/susemanager:test-channel-x86_64/getPackage/*/*/#{pkg_name}*.rpm\"\n+  if host == 'sle_minion'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDEwMDcyOA=="}, "originalCommit": {"oid": "d1b56972f793192b8ba0b3d1225b4afe9df8d86f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzU0ODg0OnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/min_ubuntu_salt_install_with_staging.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0ODoyOVrOFkx5Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0ODoyOVrOFkx5Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDExMDQ3NA==", "bodyText": "2017-2020", "url": "https://github.com/uyuni-project/uyuni/pull/1859#discussion_r374110474", "createdAt": "2020-02-03T13:48:29Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/min_ubuntu_salt_install_with_staging.feature", "diffHunk": "@@ -0,0 +1,66 @@\n+# Copyright (c) 2017-2019 SUSE LLC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1b56972f793192b8ba0b3d1225b4afe9df8d86f"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMzU0OTc3OnYy", "diffSide": "RIGHT", "path": "testsuite/features/secondary/min_ubuntu_salt_install_with_staging.feature", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0ODo0NlrOFkx5mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMzo0ODo0NlrOFkx5mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDExMDYxOA==", "bodyText": "I install old package \"virgo-dummy=1.0\"", "url": "https://github.com/uyuni-project/uyuni/pull/1859#discussion_r374110618", "createdAt": "2020-02-03T13:48:46Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/min_ubuntu_salt_install_with_staging.feature", "diffHunk": "@@ -0,0 +1,66 @@\n+# Copyright (c) 2017-2019 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+#\n+# This feature relies on having properly configured\n+#   /etc/rhn/rhn.conf\n+# file on your SUSE Manager server.\n+#\n+# For the scope of these tests, we configure it as follows:\n+#   java.salt_content_staging_window = 0.033 (2 minutes)\n+#   java.salt_content_staging_advance = 0.05 (3 minutes)\n+# which means \"between 3 and 1 minutes before package installation or patching\"\n+\n+@ubuntu_minion\n+Feature: Install a package on the Ubuntu minion with staging enabled\n+\n+  Scenario: Pre-requisite: install virgo-dummy-1.0 package, make sure orion-dummy is not present on Ubuntu minion\n+    When I enable repository \"test_repo_deb_pool\" on this \"ubuntu_minion\"\n+    And I run \"apt update\" on \"ubuntu_minion\"\n+    And I remove package \"orion-dummy\" from this \"ubuntu_minion\"\n+    And I install package \"virgo-dummy=1.0\" on this \"ubuntu_minion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1b56972f793192b8ba0b3d1225b4afe9df8d86f"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyODgwODM0OnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/command_steps.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMDozOTozOVrOGhvG_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMDozOTozOVrOGhvG_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODAyODAzMQ==", "bodyText": "elsif", "url": "https://github.com/uyuni-project/uyuni/pull/1859#discussion_r438028031", "createdAt": "2020-06-10T10:39:39Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -770,7 +770,11 @@\n \n When(/^I wait until the package \"(.*?)\" has been cached on this \"(.*?)\"$/) do |pkg_name, host|\n   node = get_target(host)\n-  cmd = \"ls /var/cache/zypp/packages/susemanager:test-channel-x86_64/getPackage/*/*/#{pkg_name}*.rpm\"\n+  if host == 'sle_minion'\n+    cmd = \"ls /var/cache/zypp/packages/susemanager:test-channel-x86_64/getPackage/*/*/#{pkg_name}*.rpm\"\n+  if host.include? 'ubuntu'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f581e8c7a2098681a19cdb182e4cb0a00ed9a551"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 145, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}