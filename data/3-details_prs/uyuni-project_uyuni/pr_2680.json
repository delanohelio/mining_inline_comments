{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2ODQ5NTYy", "number": 2680, "title": "Testsuite: Minor refactor on kiwi images navigation steps", "bodyText": "What does this PR change?\nDrop internal details from Cucumber\nMimic the way how the users navigate the UI.\n\n\ntestsuite/features/secondary/buildhost_osimage_build_image.feature:\nRewrite the step that navigates to the kiwi image store.\nNavigate to image build/list like users do (i.e. by menu clicks).\n\n\ntestsuite/features/support/commonlib.rb (compute_image_url):\nDelete this function.\n\n\ntestsuite/features/step_definitions/docker_steps.rb:\nMimic how users navigate os images.\nDeleted unused steps.\n\n\ntestsuite/features/secondary/min_bootstrap_ssh_key.feature:\nHide systems page url from cucumber.\n\n\nLinks\nhttps://github.com/SUSE/spacewalk/issues/12540\nPorts:\n\nManger-4.1: https://github.com/SUSE/spacewalk/pull/12650\nManager-4.0: https://github.com/SUSE/spacewalk/pull/12649\nManager-3.2: https://github.com/SUSE/spacewalk/pull/12648\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)", "createdAt": "2020-10-02T11:30:33Z", "url": "https://github.com/uyuni-project/uyuni/pull/2680", "merged": true, "mergeCommit": {"oid": "93a51e3edc32dbc7cbaccc53d8da5743aeba9176"}, "closed": true, "closedAt": "2020-10-05T08:01:01Z", "author": {"login": "calancha"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOqA4YgFqTUwMTM0NDUxOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPfClpgFqTUwMTgwMTg4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMzQ0NTE5", "url": "https://github.com/uyuni-project/uyuni/pull/2680#pullrequestreview-501344519", "createdAt": "2020-10-02T18:09:08Z", "commit": {"oid": "1cb2c7f805fedf4e1102af74a37b1adbf5c7384a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODowOTowOFrOHb266Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODowOTowOFrOHb266Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk3MzQxNw==", "bodyText": "I'd directly use the step inside. As we don't process any data on this step definition.", "url": "https://github.com/uyuni-project/uyuni/pull/2680#discussion_r498973417", "createdAt": "2020-10-02T18:09:08Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/docker_steps.rb", "diffHunk": "@@ -24,11 +24,11 @@ def retrieve_build_host_id\n \n # OS image build\n When(/^I navigate to images webpage$/) do\n-  visit(\"https://#{$server.full_hostname}/rhn/manager/cm/images\")\n+  step %(I follow the left menu \"Images > Image List\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cb2c7f805fedf4e1102af74a37b1adbf5c7384a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMzQ0OTEw", "url": "https://github.com/uyuni-project/uyuni/pull/2680#pullrequestreview-501344910", "createdAt": "2020-10-02T18:09:46Z", "commit": {"oid": "1cb2c7f805fedf4e1102af74a37b1adbf5c7384a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODowOTo0NlrOHb28DQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODowOTo0NlrOHb28DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk3MzcwOQ==", "bodyText": "Same, I would just use the step inside in the scenario", "url": "https://github.com/uyuni-project/uyuni/pull/2680#discussion_r498973709", "createdAt": "2020-10-02T18:09:46Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/docker_steps.rb", "diffHunk": "@@ -24,11 +24,11 @@ def retrieve_build_host_id\n \n # OS image build\n When(/^I navigate to images webpage$/) do\n-  visit(\"https://#{$server.full_hostname}/rhn/manager/cm/images\")\n+  step %(I follow the left menu \"Images > Image List\")\n end\n \n When(/^I navigate to images build webpage$/) do\n-  visit(\"https://#{$server.full_hostname}/rhn/manager/cm/build\")\n+  step %(I follow the left menu \"Images > Build\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cb2c7f805fedf4e1102af74a37b1adbf5c7384a"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMzQ2MzM0", "url": "https://github.com/uyuni-project/uyuni/pull/2680#pullrequestreview-501346334", "createdAt": "2020-10-02T18:12:05Z", "commit": {"oid": "1cb2c7f805fedf4e1102af74a37b1adbf5c7384a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoxMjowNlrOHb2_9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxODoxMjowNlrOHb2_9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk3NDcwOQ==", "bodyText": "If we don't have a way from the WebUI to navigate into that URI, I suggest to create a card for Naica Squad to discuss a new entry in the menu for that. Ping @ncounter", "url": "https://github.com/uyuni-project/uyuni/pull/2680#discussion_r498974709", "createdAt": "2020-10-02T18:12:06Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/docker_steps.rb", "diffHunk": "@@ -38,8 +38,8 @@ def retrieve_build_host_id\n   )\n end\n \n-Then(/^I am on the image page of \"([^\"]*)\"$/) do |image_name|\n-  step %(I navigate to \"#{compute_image_url(image_name)}\" page)\n+Then(/^I am on the image store of the kiwi image for organization \"([^\"]*)\"$/) do |org|\n+  step %(I navigate to \"os-images/#{org}/\" page)\n end", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cb2c7f805fedf4e1102af74a37b1adbf5c7384a"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ee3d33602b59d32c6f892b1f07e32f084e2051f", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2ee3d33602b59d32c6f892b1f07e32f084e2051f", "committedDate": "2020-10-05T06:51:50Z", "message": "Testsuite: Minor refactor on kiwi images navigation steps\n\nDrop internal details from Cucumber\nMimic the way how the users navigate the UI.\n(See https://github.com/SUSE/spacewalk/issues/12540)\n- testsuite/features/secondary/buildhost_osimage_build_image.feature:\nRewrite the step that navigates to the kiwi image store.\n\n- testsuite/features/support/commonlib.rb (compute_image_url):\nDelete this function.\n\n- testsuite/features/step_definitions/docker_steps.rb:\nMimic how users navigate os images.\n\n- testsuite/features/secondary/min_bootstrap_ssh_key.feature:\nHide systems page url from cucumber."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1cb2c7f805fedf4e1102af74a37b1adbf5c7384a", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1cb2c7f805fedf4e1102af74a37b1adbf5c7384a", "committedDate": "2020-10-02T11:27:07Z", "message": "Testsuite: Minor refactor on kiwi images navigation steps\n\nDrop internal details from Cucumber\nMimic the way how the users navigate the UI.\n(See https://github.com/SUSE/spacewalk/issues/12540)\n- testsuite/features/secondary/buildhost_osimage_build_image.feature:\nRewrite the step that navigates to the kiwi image store.\n\n- testsuite/features/support/commonlib.rb (compute_image_url):\nDelete this function.\n\n- testsuite/features/step_definitions/docker_steps.rb:\nMimic how users navigate os images.\n\n- testsuite/features/secondary/min_bootstrap_ssh_key.feature:\nHide systems page url from cucumber."}, "afterCommit": {"oid": "04d2b7945b041f04641162afccabb6d6069e2044", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/04d2b7945b041f04641162afccabb6d6069e2044", "committedDate": "2020-10-05T07:03:18Z", "message": "User like navigation\n\n- testsuite/features/secondary/buildhost_docker_auth_registry.feature\n- testsuite/features/secondary/buildhost_osimage_build_image.feature:\nNavigate as users i.e. by menu clicks.\n\n- testsuite/features/step_definitions/docker_steps.rb:\nDelete unused steps."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a8017e0365aefe0594c834860382e5089366689", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1a8017e0365aefe0594c834860382e5089366689", "committedDate": "2020-10-05T07:18:42Z", "message": "User like navigation\n\n- testsuite/features/secondary/buildhost_docker_auth_registry.feature\n- testsuite/features/secondary/buildhost_osimage_build_image.feature:\nNavigate as users i.e. by menu clicks.\n\n- testsuite/features/step_definitions/docker_steps.rb:\nDelete unused steps."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04d2b7945b041f04641162afccabb6d6069e2044", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/04d2b7945b041f04641162afccabb6d6069e2044", "committedDate": "2020-10-05T07:03:18Z", "message": "User like navigation\n\n- testsuite/features/secondary/buildhost_docker_auth_registry.feature\n- testsuite/features/secondary/buildhost_osimage_build_image.feature:\nNavigate as users i.e. by menu clicks.\n\n- testsuite/features/step_definitions/docker_steps.rb:\nDelete unused steps."}, "afterCommit": {"oid": "1a8017e0365aefe0594c834860382e5089366689", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1a8017e0365aefe0594c834860382e5089366689", "committedDate": "2020-10-05T07:18:42Z", "message": "User like navigation\n\n- testsuite/features/secondary/buildhost_docker_auth_registry.feature\n- testsuite/features/secondary/buildhost_osimage_build_image.feature:\nNavigate as users i.e. by menu clicks.\n\n- testsuite/features/step_definitions/docker_steps.rb:\nDelete unused steps."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxODAxODg3", "url": "https://github.com/uyuni-project/uyuni/pull/2680#pullrequestreview-501801887", "createdAt": "2020-10-05T07:55:59Z", "commit": {"oid": "1a8017e0365aefe0594c834860382e5089366689"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1035, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}