{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3OTUxMDg4", "number": 2290, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzowMTo0NVrOECpuhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwOTo1ODo1MVrOEFAK5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMjE2MjYzOnYy", "diffSide": "RIGHT", "path": "backend/common/repo.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzowMTo0NVrOGfPY1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNzowMTo0NVrOGfPY1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQxMTE1OQ==", "bodyText": "You need to adapt the parser as well. Currently only \"sha256\", \"sha1\", \"md5\" are supported.\nMaybe currently debian do not use better algorithms, but sooner or later they will. So why not support them already.", "url": "https://github.com/uyuni-project/uyuni/pull/2290#discussion_r435411159", "createdAt": "2020-06-04T17:01:45Z", "author": {"login": "mcalmer"}, "path": "backend/common/repo.py", "diffHunk": "@@ -214,19 +214,22 @@ def is_flat(self) -> bool:\n \n     def verify_packages_index(self) -> bool:\n         \"\"\"\n-        Verify Packages index against all listed checksum algorithms.\n+        Verify Packages index with the best available checksum algorithm.\n \n-        :param name: name of the packages index\n         :return: result (boolean)\n         \"\"\"\n         name, data = self.get_pkg_index_raw()\n         entry = self.get_release_index().get(name)\n-        for algorithm in [\"md5\", \"sha1\", \"sha256\"]:\n-            if entry is None:\n-                res = False\n-            else:\n-                res = getattr(hashlib, algorithm)(data).hexdigest() == getattr(entry.checksum, algorithm)\n-            if not res:\n+        if entry is None:\n+            return False\n+\n+        result = False\n+        for algorithm in (\"sha512\", \"sha384\", \"sha256\", \"sha1\", \"md5\"):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddf97f96d6662b5d720445f5ffdbc25e3321045a"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNjgxMTI2OnYy", "diffSide": "RIGHT", "path": "backend/spacewalk-backend.changes", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwOTo1ODo1MVrOGi-Shg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMDowNjoyM1rOGi-gCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMyNTMxOA==", "bodyText": "This entry needs to be added to the top of the file. It got placed in the wrong place probably after last rebase.", "url": "https://github.com/uyuni-project/uyuni/pull/2290#discussion_r439325318", "createdAt": "2020-06-12T09:58:51Z", "author": {"login": "meaksh"}, "path": "backend/spacewalk-backend.changes", "diffHunk": "@@ -6,6 +6,7 @@ Wed Jun 10 12:14:57 CEST 2020 - jgonzalez@suse.com\n - supportconfig speedup fixes, add option to not compress spacewalk-debug output dir\n - Prevent failure when syncing from RHEL CDN due extra params (bsc#1171885)\n - Ubuntu repos sync uses http proxy (bsc#1168845)\n+- Only check strongest available Ubuntu/Debian repository index checksum", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5aa8822ac10e2704fbb422f49e3c18e2bc9f3d6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMyNjgzOQ==", "bodyText": "Oh, I did not know that. I used https://github.com/uyuni-project/uyuni/pull/2278/files as reference and it was added at the bottom in that PR. I'll move it to the top", "url": "https://github.com/uyuni-project/uyuni/pull/2290#discussion_r439326839", "createdAt": "2020-06-12T10:02:08Z", "author": {"login": "agraul"}, "path": "backend/spacewalk-backend.changes", "diffHunk": "@@ -6,6 +6,7 @@ Wed Jun 10 12:14:57 CEST 2020 - jgonzalez@suse.com\n - supportconfig speedup fixes, add option to not compress spacewalk-debug output dir\n - Prevent failure when syncing from RHEL CDN due extra params (bsc#1171885)\n - Ubuntu repos sync uses http proxy (bsc#1168845)\n+- Only check strongest available Ubuntu/Debian repository index checksum", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMyNTMxOA=="}, "originalCommit": {"oid": "e5aa8822ac10e2704fbb422f49e3c18e2bc9f3d6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMyNzM0MA==", "bodyText": "Oh, you man above that entry. Now I got it.", "url": "https://github.com/uyuni-project/uyuni/pull/2290#discussion_r439327340", "createdAt": "2020-06-12T10:03:12Z", "author": {"login": "agraul"}, "path": "backend/spacewalk-backend.changes", "diffHunk": "@@ -6,6 +6,7 @@ Wed Jun 10 12:14:57 CEST 2020 - jgonzalez@suse.com\n - supportconfig speedup fixes, add option to not compress spacewalk-debug output dir\n - Prevent failure when syncing from RHEL CDN due extra params (bsc#1171885)\n - Ubuntu repos sync uses http proxy (bsc#1168845)\n+- Only check strongest available Ubuntu/Debian repository index checksum", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMyNTMxOA=="}, "originalCommit": {"oid": "e5aa8822ac10e2704fbb422f49e3c18e2bc9f3d6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMyODc3Nw==", "bodyText": "As a general rule, you need to add it to the top of the file. In the case of https://github.com/uyuni-project/uyuni/pull/2278/files , that's not true but it's not really a problem because there is no release on top of the new entry.\nThis is not the case here on this PR, where you're adding the changelog entry below an already release version of this package.\nSo, general rule, always on top :)", "url": "https://github.com/uyuni-project/uyuni/pull/2290#discussion_r439328777", "createdAt": "2020-06-12T10:06:23Z", "author": {"login": "meaksh"}, "path": "backend/spacewalk-backend.changes", "diffHunk": "@@ -6,6 +6,7 @@ Wed Jun 10 12:14:57 CEST 2020 - jgonzalez@suse.com\n - supportconfig speedup fixes, add option to not compress spacewalk-debug output dir\n - Prevent failure when syncing from RHEL CDN due extra params (bsc#1171885)\n - Ubuntu repos sync uses http proxy (bsc#1168845)\n+- Only check strongest available Ubuntu/Debian repository index checksum", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMyNTMxOA=="}, "originalCommit": {"oid": "e5aa8822ac10e2704fbb422f49e3c18e2bc9f3d6"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4287, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}