{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzODg1OTEy", "number": 2062, "title": "Add notification messages filter by type", "bodyText": "What does this PR change?\nSUSE/spacewalk#3945 - \"add type filter\"\nGUI diff\nBefore:\n\nAfter:\n\n\n DONE\n\nDocumentation\n\nDocumentation needed: looking at the docs there is more to update. The screenshot for this new filter for sure, but also we have more Types now, and the default java.notifications_type_disabled includes the ChannelSyncFinished type. @mcalmer did you create already a doc issue for these changes?\n DONE\n\nTest coverage\n\n\nNo tests: add explanation\n\n\nUnit tests were added\n\n\nCucumber tests were added\n\n\n DONE\n\n\nLinks\nFixes # SUSE/spacewalk#3945\nTracks # add downstream PR, if any\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-03-26T00:00:33Z", "url": "https://github.com/uyuni-project/uyuni/pull/2062", "merged": true, "mergeCommit": {"oid": "4f3c27ca3f32e1ee12cdc91918d79446bf7cac54"}, "closed": true, "closedAt": "2020-03-29T12:37:59Z", "author": {"login": "ncounter"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRQmcaABqjMxNjYxOTU5Mzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSTmh6AFqTM4MzM3Njc2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7569528936fadfea3492e1485c582fc913dd1787", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7569528936fadfea3492e1485c582fc913dd1787", "committedDate": "2020-03-25T23:59:12Z", "message": "Add notification messages filter by type"}, "afterCommit": {"oid": "7c520626f30c39c7c3daf278726ee54ccf5a7d97", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7c520626f30c39c7c3daf278726ee54ccf5a7d97", "committedDate": "2020-03-26T00:03:05Z", "message": "Add notification messages filter by type"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c520626f30c39c7c3daf278726ee54ccf5a7d97", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7c520626f30c39c7c3daf278726ee54ccf5a7d97", "committedDate": "2020-03-26T00:03:05Z", "message": "Add notification messages filter by type"}, "afterCommit": {"oid": "804ebdef08225d646545b17209cbdea96802bdae", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/804ebdef08225d646545b17209cbdea96802bdae", "committedDate": "2020-03-27T22:37:23Z", "message": "Add notification messages filter by type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5550746f61210ffe3169db9b7cb6e342e5b4efab", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5550746f61210ffe3169db9b7cb6e342e5b4efab", "committedDate": "2020-03-27T23:10:02Z", "message": "Add notification messages filter by type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1183512f5394c4d83b2f2b8a618cf2068b9f3010", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1183512f5394c4d83b2f2b8a618cf2068b9f3010", "committedDate": "2020-03-27T23:10:03Z", "message": "Let the table handle more filters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18ce5b6dbc7ad7f7b736618383606adff23f17fc", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/18ce5b6dbc7ad7f7b736618383606adff23f17fc", "committedDate": "2020-03-27T23:10:03Z", "message": "Use the additionaFilters placeholder for the new filter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d8230f88dd8af7824d98954930724577439785ed", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d8230f88dd8af7824d98954930724577439785ed", "committedDate": "2020-03-27T22:57:22Z", "message": "Use the additionaFilters placeholder for the new filter"}, "afterCommit": {"oid": "18ce5b6dbc7ad7f7b736618383606adff23f17fc", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/18ce5b6dbc7ad7f7b736618383606adff23f17fc", "committedDate": "2020-03-27T23:10:03Z", "message": "Use the additionaFilters placeholder for the new filter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzEwMDk4", "url": "https://github.com/uyuni-project/uyuni/pull/2062#pullrequestreview-383310098", "createdAt": "2020-03-28T12:44:07Z", "commit": {"oid": "18ce5b6dbc7ad7f7b736618383606adff23f17fc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMjo0NDowN1rOF9JNRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMjo0NDowN1rOF9JNRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY1ODMxMA==", "bodyText": "The t() here will not work. As we use gettext, we have an automated parser which evaluate the t() functions and get the text out of it which should be translated. This will not work here.\nPlease add the t() to the _MESSAGE_TYPE dict directly.", "url": "https://github.com/uyuni-project/uyuni/pull/2062#discussion_r399658310", "createdAt": "2020-03-28T12:44:07Z", "author": {"login": "mcalmer"}, "path": "web/html/src/manager/notifications/notification-messages.js", "diffHunk": "@@ -153,15 +201,7 @@ class NotificationMessages extends React.Component {\n   };\n \n   decodeTypeText = (rawType) => {\n-    var typeText;\n-    switch(rawType) {\n-      case 'OnboardingFailed': typeText = t('Onboarding failed'); break;\n-      case 'ChannelSyncFailed': typeText = t('Channel sync failed'); break;\n-      case 'ChannelSyncFinished': typeText = t('Channel sync finished'); break;\n-      case 'CreateBootstrapRepoFailed': typeText = t('Creating Bootstrap Repository failed'); break;\n-      case 'StateApplyFailed': typeText = t('State apply failed'); break;\n-    }\n-    return typeText;\n+    return t(_MESSAGE_TYPE[rawType].text);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18ce5b6dbc7ad7f7b736618383606adff23f17fc"}, "originalPosition": 91}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "401db520ef4de67218586f2d1ae356cae994f6c2", "author": {"user": {"login": "ncounter", "name": "Dario Leidi"}}, "url": "https://github.com/uyuni-project/uyuni/commit/401db520ef4de67218586f2d1ae356cae994f6c2", "committedDate": "2020-03-28T20:32:06Z", "message": "Translate the text directly"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzc2NzYy", "url": "https://github.com/uyuni-project/uyuni/pull/2062#pullrequestreview-383376762", "createdAt": "2020-03-29T06:07:00Z", "commit": {"oid": "401db520ef4de67218586f2d1ae356cae994f6c2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1530, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}