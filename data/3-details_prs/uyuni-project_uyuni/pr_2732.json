{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1OTQwNjcy", "number": 2732, "title": "Replace unicode quotes at stdout with single quotes", "bodyText": "What does this PR change?\nHaving these quotes in the output break some Cucumber formatters; when\nthis happen, the testsuite reporter is not created, and no e-mail is\nsent.\n\ntestsuite/features/step_definitions/common_steps.rb\n\nLinks\nhttps://github.com/SUSE/spacewalk/issues/12739\nContinuation of  #2724\nPorts\n\nManager-4.1: https://github.com/SUSE/spacewalk/pull/12813\nManager-4.0: https://github.com/SUSE/spacewalk/pull/12814\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)", "createdAt": "2020-10-19T12:47:25Z", "url": "https://github.com/uyuni-project/uyuni/pull/2732", "merged": true, "mergeCommit": {"oid": "d2d645905a5ffc0bcdc01f5d30b2d294d400abb0"}, "closed": true, "closedAt": "2020-10-19T15:43:45Z", "author": {"login": "calancha"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUDzzSgFqTUxMTczNDI4Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUE6JPgBqjM4OTM3MjM0MzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNzM0Mjgz", "url": "https://github.com/uyuni-project/uyuni/pull/2732#pullrequestreview-511734283", "createdAt": "2020-10-19T13:02:00Z", "commit": {"oid": "b9adedd5a6966d336bb70987b2721f48f42321df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzowMjowMFrOHkNM8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzowMjowMFrOHkNM8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcyNzA4OQ==", "bodyText": "I wonder if there is a better way to cover all the cases.\nWhat about the method dump?\nhttps://ruby-doc.org/core-2.5.0/String.html#method-i-dump\nI must say I never tried it.", "url": "https://github.com/uyuni-project/uyuni/pull/2732#discussion_r507727089", "createdAt": "2020-10-19T13:02:00Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -824,9 +824,10 @@\n     node.run('yum install wget', true, 600, 'root')\n   end\n   command1 = \"wget --no-check-certificate -O /usr/share/rhn/RHN-ORG-TRUSTED-SSL-CERT http://#{$server.ip}/pub/RHN-ORG-TRUSTED-SSL-CERT\"\n-  puts node.run(command1, true, 500, 'root').to_s\n+  # Replace unicode quotes in the output by single quotes (otherwise, they might break some Cucumber formatters).\n+  puts node.run(command1, true, 500, 'root').to_s.gsub(/\\\\xE2\\\\x80\\\\x98/, \"'\").gsub(/\\\\xE2\\\\x80\\\\x99/, \"'\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b9adedd5a6966d336bb70987b2721f48f42321df"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e31779070721a0622080f4212ff14af8de51937e", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e31779070721a0622080f4212ff14af8de51937e", "committedDate": "2020-10-19T14:17:58Z", "message": "Testsuite: Prevent from unescaped special chars in the stdout\n\nHaving them might break Cucumber formatters; when this happen, the\ntestsuite reporter is not created, and no e-mail is sent.\n- testsuite/features/step_definitions/common_steps.rb:\nDump the string before print it."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9adedd5a6966d336bb70987b2721f48f42321df", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b9adedd5a6966d336bb70987b2721f48f42321df", "committedDate": "2020-10-19T12:42:50Z", "message": "Replace unicode quotes at stdout with single quotes\n\nHaving these quotes in the output break some Cucumber formatters; when\nthis happen, the testsuite reporter is not created, and no e-mail is\nsent.\n- testsuite/features/step_definitions/common_steps.rb"}, "afterCommit": {"oid": "e31779070721a0622080f4212ff14af8de51937e", "author": {"user": {"login": "calancha", "name": "Tino Calancha"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e31779070721a0622080f4212ff14af8de51937e", "committedDate": "2020-10-19T14:17:58Z", "message": "Testsuite: Prevent from unescaped special chars in the stdout\n\nHaving them might break Cucumber formatters; when this happen, the\ntestsuite reporter is not created, and no e-mail is sent.\n- testsuite/features/step_definitions/common_steps.rb:\nDump the string before print it."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 899, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}