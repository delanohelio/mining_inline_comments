{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MzU2NjAw", "number": 2995, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODowNjo0NFrOFDV1bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODowNzozMVrOFDV2qQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDQ3NzkxOnYy", "diffSide": "RIGHT", "path": "spacecmd/src/spacecmd/configchannel.py", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODowNjo0NFrOIC8TNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwODoyMjo0NlrOIFEu_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NjAyMA==", "bodyText": "It would be cool to have a (Cucumber?) test to cover this.", "url": "https://github.com/uyuni-project/uyuni/pull/2995#discussion_r539956020", "createdAt": "2020-12-10T08:06:44Z", "author": {"login": "moio"}, "path": "spacecmd/src/spacecmd/configchannel.py", "diffHunk": "@@ -847,6 +847,7 @@ def help_configchannel_updateinitsls(self):\n \n options:\n   -c CHANNEL\n+  -r REVISION", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c948e2f405eaa26bbf104ad00eebed2ea50a2bab"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA0ODAxOQ==", "bodyText": "Sure! I'll add a Cucumber test for this.", "url": "https://github.com/uyuni-project/uyuni/pull/2995#discussion_r540048019", "createdAt": "2020-12-10T10:20:52Z", "author": {"login": "ricardoasmarques"}, "path": "spacecmd/src/spacecmd/configchannel.py", "diffHunk": "@@ -847,6 +847,7 @@ def help_configchannel_updateinitsls(self):\n \n options:\n   -c CHANNEL\n+  -r REVISION", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NjAyMA=="}, "originalCommit": {"oid": "c948e2f405eaa26bbf104ad00eebed2ea50a2bab"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTIyMTQ1Ng==", "bodyText": "@moio I've now updated this PR with a Cucumber test that will guarantee -r REVISION option is working properly.", "url": "https://github.com/uyuni-project/uyuni/pull/2995#discussion_r541221456", "createdAt": "2020-12-11T19:54:45Z", "author": {"login": "ricardoasmarques"}, "path": "spacecmd/src/spacecmd/configchannel.py", "diffHunk": "@@ -847,6 +847,7 @@ def help_configchannel_updateinitsls(self):\n \n options:\n   -c CHANNEL\n+  -r REVISION", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NjAyMA=="}, "originalCommit": {"oid": "c948e2f405eaa26bbf104ad00eebed2ea50a2bab"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE5MTM1OQ==", "bodyText": "You have a green light from my side! Thanks!", "url": "https://github.com/uyuni-project/uyuni/pull/2995#discussion_r542191359", "createdAt": "2020-12-14T08:22:46Z", "author": {"login": "moio"}, "path": "spacecmd/src/spacecmd/configchannel.py", "diffHunk": "@@ -847,6 +847,7 @@ def help_configchannel_updateinitsls(self):\n \n options:\n   -c CHANNEL\n+  -r REVISION", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NjAyMA=="}, "originalCommit": {"oid": "c948e2f405eaa26bbf104ad00eebed2ea50a2bab"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MDQ4MTA1OnYy", "diffSide": "RIGHT", "path": "java/code/src/com/redhat/rhn/frontend/xmlrpc/configchannel/ConfigChannelHandler.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODowNzozMVrOIC8U7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMzozNjoxNlrOIDJj5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NjQ2MQ==", "bodyText": "What are the pros and cons to add this as a field in this map rather than a full new parameter?", "url": "https://github.com/uyuni-project/uyuni/pull/2995#discussion_r539956461", "createdAt": "2020-12-10T08:07:31Z", "author": {"login": "moio"}, "path": "java/code/src/com/redhat/rhn/frontend/xmlrpc/configchannel/ConfigChannelHandler.java", "diffHunk": "@@ -389,6 +389,7 @@ public ConfigChannel update(User loggedInUser, String label,\n      *  #struct_begin(\"path info\")\n      *      #prop_desc(\"string\",\"contents\", \"Contents of the init.sls file\")\n      *      #prop_desc(\"boolean\",\"contents_enc64\", \"Identifies base64 encoded content(default: disabled)\")\n+     *      #prop_desc(\"int\", \"revision\", \"next revision number, auto increment for null\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c948e2f405eaa26bbf104ad00eebed2ea50a2bab"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxOTM2MA==", "bodyText": "PROS\n\nConsistency with the syntax already used on configchannel.createOrUpdatePath, which is the equivalent method for updating \"files\" (instead of \"states\")\nNo need to overload this method to guarantee that we are not breaking the current method signature\nDo not pollute method signature with optional parameters\nSince contents is a required field, and lives inside the map, It doesn't seem right to keep the required contents field in the map and the optional revision field as a new parameter (since revision is less important and less used)\n\nCONS\n\nField is not explicitly declared, so we have to rely on documentation to check which \"fields\" are accepted, but unfortunately Java does not have a great way to deal with optional parameters (requires method overload for that)\n\nLet me know if you prefer a new parameter, so I can update the PR accordingly.", "url": "https://github.com/uyuni-project/uyuni/pull/2995#discussion_r540019360", "createdAt": "2020-12-10T09:42:11Z", "author": {"login": "ricardoasmarques"}, "path": "java/code/src/com/redhat/rhn/frontend/xmlrpc/configchannel/ConfigChannelHandler.java", "diffHunk": "@@ -389,6 +389,7 @@ public ConfigChannel update(User loggedInUser, String label,\n      *  #struct_begin(\"path info\")\n      *      #prop_desc(\"string\",\"contents\", \"Contents of the init.sls file\")\n      *      #prop_desc(\"boolean\",\"contents_enc64\", \"Identifies base64 encoded content(default: disabled)\")\n+     *      #prop_desc(\"int\", \"revision\", \"next revision number, auto increment for null\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NjQ2MQ=="}, "originalCommit": {"oid": "c948e2f405eaa26bbf104ad00eebed2ea50a2bab"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDE3MzI4Nw==", "bodyText": "PROS\n* Consistency with the syntax already used on `configchannel.createOrUpdatePath`, which is the equivalent method for updating \"files\" (instead of \"states\")\n\n\nGood point.\n\n* No need to overload this method to guarantee that we are not breaking the current method signature\n\n\nOverloading is not a problem with Java and XMLRPC, so that is not a concern I would say.\n\n* Do not pollute method signature with optional parameters\n\n* Since `contents` is a required field, and lives inside the map, It doesn't seem right to keep the **required** `contents` field in the map and the **optional** `revision` field as a new parameter (since `revision` is less important and less used)\n\nCONS\n* Field is not explicitly declared, so we have to rely on documentation to check which \"fields\" are accepted, but unfortunately Java does not have a great way to deal with optional parameters (requires method overload for that)\n\nLet me know if you prefer a new parameter, so I can update the PR accordingly.\n\nI am convinced about the pros, OK with the current direction \ud83d\udc4d", "url": "https://github.com/uyuni-project/uyuni/pull/2995#discussion_r540173287", "createdAt": "2020-12-10T13:36:16Z", "author": {"login": "moio"}, "path": "java/code/src/com/redhat/rhn/frontend/xmlrpc/configchannel/ConfigChannelHandler.java", "diffHunk": "@@ -389,6 +389,7 @@ public ConfigChannel update(User loggedInUser, String label,\n      *  #struct_begin(\"path info\")\n      *      #prop_desc(\"string\",\"contents\", \"Contents of the init.sls file\")\n      *      #prop_desc(\"boolean\",\"contents_enc64\", \"Identifies base64 encoded content(default: disabled)\")\n+     *      #prop_desc(\"int\", \"revision\", \"next revision number, auto increment for null\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NjQ2MQ=="}, "originalCommit": {"oid": "c948e2f405eaa26bbf104ad00eebed2ea50a2bab"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3877, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}