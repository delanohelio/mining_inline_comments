{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MzM0MTY5", "number": 2264, "title": "Add docker logout step", "bodyText": "What does this PR change?\nAs a last step of the docker build process, docker.logout is called from the Salt states. This ensures no registry credentials are left on the build host that executes the state.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\nDon't know if and how this would be documented as the change is not very visible to users. A user would need to check if docker credentials are left on the build host.\n\n DONE\n\nTest coverage\n\n\nNo tests: Yet. I am not sure how this should be tested\n\n\n DONE\n\n\nLinks\nFixes # SUSE/spacewalk#11017\nRequires # openSUSE/salt#245\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-05-28T08:34:40Z", "url": "https://github.com/uyuni-project/uyuni/pull/2264", "merged": true, "mergeCommit": {"oid": "5a6abef77e876ed210ba29ed68c44cc62ab7405e"}, "closed": true, "closedAt": "2020-07-13T12:25:56Z", "author": {"login": "agraul"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqhLOpAFqTQyOTY2ODA2MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0gW8ZAFqTQ0NzE5MjYxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NjY4MDYw", "url": "https://github.com/uyuni-project/uyuni/pull/2264#pullrequestreview-429668060", "createdAt": "2020-06-12T11:29:58Z", "commit": {"oid": "11226c8d4e235c4bfc25bb1e32aa1501b5b60754"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMToyOTo1OVrOGjAsoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMToyOTo1OVrOGjAsoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM2NDc2OA==", "bodyText": "I'm not sure this would work as we want. The problem here is that we have to consider that minions might be not up-to-date, so they could have a Salt 2019.2.0 version installed where the docker.logout method is not yet available.\nMaybe something like this would be better:\n{% if 'docker.logout' in salt %}\n...\n{% endif %}", "url": "https://github.com/uyuni-project/uyuni/pull/2264#discussion_r439364768", "createdAt": "2020-06-12T11:29:59Z", "author": {"login": "meaksh"}, "path": "susemanager-utils/susemanager-sls/salt/images/docker.sls", "diffHunk": "@@ -35,6 +35,18 @@ mgr_pushimage:\n       - module: mgr_buildimage\n       - module: mgr_registries_login\n \n+{% if grains['saltversioninfo'][0] >= 2019 %}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11226c8d4e235c4bfc25bb1e32aa1501b5b60754"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "11226c8d4e235c4bfc25bb1e32aa1501b5b60754", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/11226c8d4e235c4bfc25bb1e32aa1501b5b60754", "committedDate": "2020-05-27T19:10:32Z", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state."}, "afterCommit": {"oid": "abc8cc4a224734e6a4e46196a0a4c24ebff470ed", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/abc8cc4a224734e6a4e46196a0a4c24ebff470ed", "committedDate": "2020-06-15T15:16:05Z", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "abc8cc4a224734e6a4e46196a0a4c24ebff470ed", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/abc8cc4a224734e6a4e46196a0a4c24ebff470ed", "committedDate": "2020-06-15T15:16:05Z", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state."}, "afterCommit": {"oid": "6500b39bb6d16d8c682ea43c08e08f9e6850c680", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6500b39bb6d16d8c682ea43c08e08f9e6850c680", "committedDate": "2020-06-16T08:28:22Z", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6500b39bb6d16d8c682ea43c08e08f9e6850c680", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6500b39bb6d16d8c682ea43c08e08f9e6850c680", "committedDate": "2020-06-16T08:28:22Z", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state."}, "afterCommit": {"oid": "ed699794135f740a9b07454e5a119e5faa05b14a", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ed699794135f740a9b07454e5a119e5faa05b14a", "committedDate": "2020-07-13T11:40:57Z", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "860e69aad903f14ef079496eba31ff882127c6ec", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/860e69aad903f14ef079496eba31ff882127c6ec", "committedDate": "2020-07-13T11:58:17Z", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed699794135f740a9b07454e5a119e5faa05b14a", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ed699794135f740a9b07454e5a119e5faa05b14a", "committedDate": "2020-07-13T11:40:57Z", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state."}, "afterCommit": {"oid": "860e69aad903f14ef079496eba31ff882127c6ec", "author": {"user": {"login": "agraul", "name": "Alexander Graul"}}, "url": "https://github.com/uyuni-project/uyuni/commit/860e69aad903f14ef079496eba31ff882127c6ec", "committedDate": "2020-07-13T11:58:17Z", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MTkyNjEw", "url": "https://github.com/uyuni-project/uyuni/pull/2264#pullrequestreview-447192610", "createdAt": "2020-07-13T12:12:10Z", "commit": {"oid": "860e69aad903f14ef079496eba31ff882127c6ec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1273, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}