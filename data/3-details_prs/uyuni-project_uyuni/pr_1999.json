{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1Njk0ODE2", "number": 1999, "title": "Port of CaaSP management fixes + system-lock formula dependency", "bodyText": "What does this PR change?\n\nAdd dependency to system-lock-formula [last commit of https://github.com/SUSE/spacewalk/pull/10880]\nPort of CaaSP management fixes pre-MU [https://github.com/SUSE/spacewalk/pull/10947]\n\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: docs already in\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests: already in\n\n\n DONE\n\n\nLinks\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-03-09T16:40:47Z", "url": "https://github.com/uyuni-project/uyuni/pull/1999", "merged": true, "mergeCommit": {"oid": "b2533a01d6304978529848cf6041f9fd0d25e7d2"}, "closed": true, "closedAt": "2020-03-10T09:32:14Z", "author": {"login": "mbologna"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMCggEgFqTM3MTQ0MDQ1Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMPHtNAFqTM3MTc5MjI1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNDQwNDUy", "url": "https://github.com/uyuni-project/uyuni/pull/1999#pullrequestreview-371440452", "createdAt": "2020-03-09T18:47:46Z", "commit": {"oid": "94ea8d376e9f45630cd0dc3ea56ceb5195dbff6e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxODo0Nzo0N1rOFz1D6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxODo0ODowM1rOFz1Eaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg5MTA1MA==", "bodyText": "Doc (and release notes) says:\n\nWhen you have added the {caasp} nodes to {productname}, the registered system will be locked automatically. When a system is locked, the {webui} shows a warning and you can schedule actions using the {webui} or the API, but the action will fail.\n\nIs it \"some\" actions or \"all actions\"? What the doc and the release notes say is, FMPOV: All actions.\nHowever it seems the formula says otherwise: SUSE/salt-formulas#42 (review)\nSo it's \"all\", \"all except\", or \"some\"?", "url": "https://github.com/uyuni-project/uyuni/pull/1999#discussion_r389891050", "createdAt": "2020-03-09T18:47:47Z", "author": {"login": "juliogonzalez"}, "path": "java/code/src/com/suse/manager/webui/templates/minion/minion-header.jade", "diffHunk": "@@ -18,6 +18,6 @@\n if h.formulaValueEquals(server, \"system-lock\", \"minion_blackout\", \"true\") and not h.hasSshPushContactMethod(server)\n   .alert.alert-warning\n     p.\n-      System is locked. Some operations are not allowed.\n+      System is locked. Some actions are not allowed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94ea8d376e9f45630cd0dc3ea56ceb5195dbff6e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg5MTE3OQ==", "bodyText": "Same.", "url": "https://github.com/uyuni-project/uyuni/pull/1999#discussion_r389891179", "createdAt": "2020-03-09T18:48:03Z", "author": {"login": "juliogonzalez"}, "path": "java/code/webapp/WEB-INF/pages/common/fragments/systems/system-header.jspf", "diffHunk": "@@ -52,7 +52,7 @@\n \n <rhn:require acl=\"formula_value_equals(system-lock, minion_blackout, true);not has_ssh_push_contact_method()\">\n <div class=\"alert alert-warning\">\n-<p>System is locked. Some operations are not allowed.</p>\n+<p>System is locked. Some actions are not allowed.</p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94ea8d376e9f45630cd0dc3ea56ceb5195dbff6e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e661c0fd30b661fd9a9a771f24924d70a43e8ffa", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e661c0fd30b661fd9a9a771f24924d70a43e8ffa", "committedDate": "2020-03-10T09:25:25Z", "message": "Style: clarify/adapt terms for system lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0443d9fb40548be21a2a4ac28217251a084bc9a4", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0443d9fb40548be21a2a4ac28217251a084bc9a4", "committedDate": "2020-03-10T09:25:25Z", "message": "Feat: spacewalk-java depends on system-lock-formula"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac78c1f1385fc0d831cefb44159a6d2d1c875bc8", "author": {"user": {"login": "mateiw", "name": "Matei Albu"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ac78c1f1385fc0d831cefb44159a6d2d1c875bc8", "committedDate": "2020-03-10T09:25:25Z", "message": "CaaSP: pillar refresh not executed on sw profile update (bsc#1166061)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e059f19c612a9bdfeaa85d8885e08a44450e471", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2e059f19c612a9bdfeaa85d8885e08a44450e471", "committedDate": "2020-03-10T09:26:03Z", "message": "Chore: add changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f3da9c8a5f7900c6f72d723c5c1400387a9edaa", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0f3da9c8a5f7900c6f72d723c5c1400387a9edaa", "committedDate": "2020-03-10T09:26:03Z", "message": "Style: change wording to adapt terms"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3f81cad8e234af8312bc73080e86afcf97a8728", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/a3f81cad8e234af8312bc73080e86afcf97a8728", "committedDate": "2020-03-10T08:24:18Z", "message": "Style: change wording to adapt terms"}, "afterCommit": {"oid": "0f3da9c8a5f7900c6f72d723c5c1400387a9edaa", "author": {"user": {"login": "mbologna", "name": "Michele Bologna"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0f3da9c8a5f7900c6f72d723c5c1400387a9edaa", "committedDate": "2020-03-10T09:26:03Z", "message": "Style: change wording to adapt terms"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNzkyMjUx", "url": "https://github.com/uyuni-project/uyuni/pull/1999#pullrequestreview-371792251", "createdAt": "2020-03-10T09:30:10Z", "commit": {"oid": "0f3da9c8a5f7900c6f72d723c5c1400387a9edaa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1479, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}