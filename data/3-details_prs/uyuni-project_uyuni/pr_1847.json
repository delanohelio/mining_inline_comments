{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5MTUzNjcx", "number": 1847, "title": "Sync all before show highstate", "bodyText": "What does this PR change?\nSometimes it is needed to sync the modules, states, grains, etc. from master to minion before a show_highstate can be executed successfully.\nThis change call a sync_all explicitly before calling show_hightstate.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: internal\n\n\n DONE\n\n\nTest coverage\n\n\nNo tests: manual\n\n\n DONE\n\n\nLinks\nFixes SUSE/spacewalk#10570\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-01-30T15:59:45Z", "url": "https://github.com/uyuni-project/uyuni/pull/1847", "merged": true, "mergeCommit": {"oid": "6c281bf932a0f1a02d28208fd6ed09ef0fd9a8a9"}, "closed": true, "closedAt": "2020-02-01T16:36:16Z", "author": {"login": "mcalmer"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_wd1HgFqTM1MTU2MjM2Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAFPNMgBqjI5OTk0MDMxNzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNTYyMzY3", "url": "https://github.com/uyuni-project/uyuni/pull/1847#pullrequestreview-351562367", "createdAt": "2020-01-31T15:00:10Z", "commit": {"oid": "5d7c7e17071d02f759faa8304d65aeea2c9b2648"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNTowMDoxMVrOFkOCaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNTowMDoxMVrOFkOCaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzUyMzA1MQ==", "bodyText": "Is it a common practice to keep the bsc#number in comments? We already have it in the commit message, and in Uyuni upstream it will not be reachable by external non-SUSE contributors. I'd remove the number, leaving the comment instead to explain the concept behind.", "url": "https://github.com/uyuni-project/uyuni/pull/1847#discussion_r373523051", "createdAt": "2020-01-31T15:00:11Z", "author": {"login": "ncounter"}, "path": "java/code/src/com/suse/manager/webui/controllers/StatesAPI.java", "diffHunk": "@@ -667,8 +667,12 @@ public static String showHighstate(Request request, Response response) {\n                 .map(minion -> {\n                     final String minionId = minion.getMinionId();\n                     try {\n+                        MinionList minions = new MinionList(minionId);\n+                        // bsc#1152673 - sync to minion before showing highstate", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d7c7e17071d02f759faa8304d65aeea2c9b2648"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNTgyMTkx", "url": "https://github.com/uyuni-project/uyuni/pull/1847#pullrequestreview-351582191", "createdAt": "2020-01-31T15:28:55Z", "commit": {"oid": "c01eb0ee17307a44d96c9ca851eaca328d98362f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c01eb0ee17307a44d96c9ca851eaca328d98362f", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c01eb0ee17307a44d96c9ca851eaca328d98362f", "committedDate": "2020-01-31T15:15:29Z", "message": "fixup! call saltutil.sync_all before calling highstate (bsc#1152673)"}, "afterCommit": {"oid": "e582470e5d3cdeaf1d83016931b0f3ee4d71cbaf", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e582470e5d3cdeaf1d83016931b0f3ee4d71cbaf", "committedDate": "2020-01-31T15:35:02Z", "message": "update changelog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e582470e5d3cdeaf1d83016931b0f3ee4d71cbaf", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e582470e5d3cdeaf1d83016931b0f3ee4d71cbaf", "committedDate": "2020-01-31T15:35:02Z", "message": "update changelog"}, "afterCommit": {"oid": "4d7e4e037369f778c5d6a7d122367653d92262c3", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4d7e4e037369f778c5d6a7d122367653d92262c3", "committedDate": "2020-02-01T14:32:38Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "711e7de4dcf2ade3236fb1ecf695368533060407", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/711e7de4dcf2ade3236fb1ecf695368533060407", "committedDate": "2020-02-01T15:11:39Z", "message": "call saltutil.sync_all before calling highstate (bsc#1152673)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f84b66a9737fb61bc78d5990b7cc82189e030c25", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f84b66a9737fb61bc78d5990b7cc82189e030c25", "committedDate": "2020-02-01T15:12:03Z", "message": "update changelog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d7e4e037369f778c5d6a7d122367653d92262c3", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/4d7e4e037369f778c5d6a7d122367653d92262c3", "committedDate": "2020-02-01T14:32:38Z", "message": "update changelog"}, "afterCommit": {"oid": "f84b66a9737fb61bc78d5990b7cc82189e030c25", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f84b66a9737fb61bc78d5990b7cc82189e030c25", "committedDate": "2020-02-01T15:12:03Z", "message": "update changelog"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1766, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}