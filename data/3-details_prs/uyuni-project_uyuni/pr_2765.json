{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExMTMyODUx", "number": 2765, "title": "Allow vendor change during dist upgrades", "bodyText": "What does this PR change?\nThis is a port of spacewalk pr 12584\nSpacewalk issue #11331\nThis adds support for allow vendor change during dist upgrades.  You can now enable vendor change in the UI during a single action, or via the api.\nAlso hangs on this: openSUSE/zypp-plugin-spacewalk#43 (merged)\nand this: saltstack/salt#58560 (review)  (merged)\nor this: openSUSE/salt#284\nGUI diff\nBefore:\nAfter:\n\n\n DONE\n\nDocumentation\n\n\nuyuni-project/uyuni-docs#571\n\n\n DONE\n\n\nTest coverage\n\n\nUnit tests were added\n\n\n DONE\n\n\n DONE\n\n\nLinks\nFixes #\nTracks # add downstream PR, if any\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-10-27T22:22:44Z", "url": "https://github.com/uyuni-project/uyuni/pull/2765", "merged": true, "mergeCommit": {"oid": "b397368f91e5bacb8c0454c49306fc3279cc586d"}, "closed": true, "closedAt": "2020-10-29T08:47:14Z", "author": {"login": "mseidl"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdW3gdSAFqTUxODM1MDk0OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXNwHigBqjM5MzUwMTA3ODE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MzUwOTQ4", "url": "https://github.com/uyuni-project/uyuni/pull/2765#pullrequestreview-518350948", "createdAt": "2020-10-28T06:17:33Z", "commit": {"oid": "5de4fc8fd66e6c9ca776967b4f8dcd40dd2b9462"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwNjoxNzozM1rOHpbcZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwNjoyMjo0NVrOHpbinA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzIwMzMwMA==", "bodyText": "This seems to be wrong .", "url": "https://github.com/uyuni-project/uyuni/pull/2765#discussion_r513203300", "createdAt": "2020-10-28T06:17:33Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/susemanager-schema.changes", "diffHunk": "@@ -1,4 +1,10 @@\n+- add new column to rhnactiondup table for allowVendorChange flag\n - Add cobbler-related fields in VM Creation action table\n+\n+-------------------------------------------------------------------\n+Thu Oct 22 11:13:51 CEST 2020 - jgonzalez@suse.com\n+\n+- version 4.1.14-1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5de4fc8fd66e6c9ca776967b4f8dcd40dd2b9462"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzIwNDg5Mg==", "bodyText": "You should have this twice. It would be good to keep the 4.1 version as  it is. This is needed for migration.", "url": "https://github.com/uyuni-project/uyuni/pull/2765#discussion_r513204892", "createdAt": "2020-10-28T06:22:45Z", "author": {"login": "mcalmer"}, "path": "schema/spacewalk/upgrade/susemanager-schema-4.2.2-to-susemanager-schema-4.2.3/001-rhnActionDup-add-alllow-vendor-change.sql", "diffHunk": "@@ -0,0 +1,6 @@\n+ALTER TABLE rhnActionDup DROP CONSTRAINT IF EXISTS rhn_actiondup_avc_ck;\n+ALTER TABLE rhnActionDup", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5de4fc8fd66e6c9ca776967b4f8dcd40dd2b9462"}, "originalPosition": 2}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5de4fc8fd66e6c9ca776967b4f8dcd40dd2b9462", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/5de4fc8fd66e6c9ca776967b4f8dcd40dd2b9462", "committedDate": "2020-10-27T22:13:33Z", "message": "update changelog"}, "afterCommit": {"oid": "6ff73aa3f270c159b0c13888d1e21d1cc597b718", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/6ff73aa3f270c159b0c13888d1e21d1cc597b718", "committedDate": "2020-10-28T08:51:17Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ac2119d07c8023aec60160537cd9f81bf39f2f5", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0ac2119d07c8023aec60160537cd9f81bf39f2f5", "committedDate": "2020-10-29T08:17:46Z", "message": "add new column to rhnactiondup table for allowVendorChange flag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc66feb23a5b8ebbb15ae6d4e058d21fc0127451", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/cc66feb23a5b8ebbb15ae6d4e058d21fc0127451", "committedDate": "2020-10-29T08:17:46Z", "message": "add new allowVendorChange flag for dist upgrades"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2475f50777746e9e2c6cfabe3e5663e3d205e063", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2475f50777746e9e2c6cfabe3e5663e3d205e063", "committedDate": "2020-10-29T08:17:46Z", "message": "add allowVendorChange to ui"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61334dda10ff61e46b45bb24a7646e6e91214b38", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/61334dda10ff61e46b45bb24a7646e6e91214b38", "committedDate": "2020-10-29T08:17:46Z", "message": "add 'allow_vendor_change' option to rhn clients for dist upgrades"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f5176854c21f1ed6b23372add308ffa4090b160", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/1f5176854c21f1ed6b23372add308ffa4090b160", "committedDate": "2020-10-29T08:17:46Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25f02a2ed04cc72fa735371a655fa666f35197f9", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/25f02a2ed04cc72fa735371a655fa666f35197f9", "committedDate": "2020-10-29T08:17:46Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbe2b0583534a525408c39781371f488afd82508", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fbe2b0583534a525408c39781371f488afd82508", "committedDate": "2020-10-29T08:17:46Z", "message": "Fix checkstyle issues and add missing api calls."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b216fedbbfca1a6af58f3407632240d1ec1a6647", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b216fedbbfca1a6af58f3407632240d1ec1a6647", "committedDate": "2020-10-29T08:17:46Z", "message": "fix sql failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64dbf4604eeedf5385c5b590d3e62f9c5dc034df", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/64dbf4604eeedf5385c5b590d3e62f9c5dc034df", "committedDate": "2020-10-29T08:17:46Z", "message": "refactor form check for bool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0954334c5f628ee21e7728bbef6bdb48d02d1e1e", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0954334c5f628ee21e7728bbef6bdb48d02d1e1e", "committedDate": "2020-10-29T08:18:17Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32c5c52b48b3ce174a40d88b8194e7ee811989d0", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/32c5c52b48b3ce174a40d88b8194e7ee811989d0", "committedDate": "2020-10-29T08:18:23Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b83cf1c1c79740e775554d8fdfed2edeb616aa1d", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b83cf1c1c79740e775554d8fdfed2edeb616aa1d", "committedDate": "2020-10-29T08:18:24Z", "message": "copy sql file for uyuni"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c1110c845d4ba4dcbfe0b2715063e90630a5fcc9", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c1110c845d4ba4dcbfe0b2715063e90630a5fcc9", "committedDate": "2020-10-29T08:13:20Z", "message": "copy sql file for uyuni"}, "afterCommit": {"oid": "b83cf1c1c79740e775554d8fdfed2edeb616aa1d", "author": {"user": {"login": "mseidl", "name": "Martin Seidl"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b83cf1c1c79740e775554d8fdfed2edeb616aa1d", "committedDate": "2020-10-29T08:18:24Z", "message": "copy sql file for uyuni"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 936, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}