{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMTkwOTk2", "number": 2116, "title": "refresh pillar data on the minion after generating new channel pillar data", "bodyText": "What does this PR change?\nAfter changing channels on a minion it happens very otften, that a \"zypper refresh\" called on that minion failed as it cannot access the repositories.\nIt turns out that the tokens are still old in the repo file and looking at the pillar data on the minon show, that it still has the old tokens while on the server the pillar files has already the new tokens.\nTake care to call a pillar_refresh after changing the tokens.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: internal\n\n\n DONE\n\n\nTest coverage\n\n\nCucumber tests were added\n\n\n DONE\n\n\nLinks\nTracks SUSE/spacewalk#11234\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-04-11T13:34:48Z", "url": "https://github.com/uyuni-project/uyuni/pull/2116", "merged": true, "mergeCommit": {"oid": "5c883ce11b46362b4d2ec6a83bdb152194224b24"}, "closed": true, "closedAt": "2020-04-16T15:03:40Z", "author": {"login": "mcalmer"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXeT80gBqjMyMjk4MTkxOTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYOBDQgBqjMyNDAzNTM1MzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29c4a6ce85b383796c6d1cc137b533292e8b26b7", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/29c4a6ce85b383796c6d1cc137b533292e8b26b7", "committedDate": "2020-04-11T14:13:52Z", "message": "move ChannelsChangedEventMessageAction registration to SaltReactor class"}, "afterCommit": {"oid": "7de01590746e54de0d8bc694e80864f1bbb15bd4", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/7de01590746e54de0d8bc694e80864f1bbb15bd4", "committedDate": "2020-04-14T07:24:39Z", "message": "move ChannelsChangedEventMessageAction registration to SaltReactor class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNzY1ODY5", "url": "https://github.com/uyuni-project/uyuni/pull/2116#pullrequestreview-392765869", "createdAt": "2020-04-14T09:41:26Z", "commit": {"oid": "f2853a8366b19af58d26b390beb3c2e9cdba8dd2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwOTo0MToyNlrOGFGkpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwOTo0Mjo1OVrOGFGo7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODAwMzc1MQ==", "bodyText": "Nitpick: \"child channel\" lower case", "url": "https://github.com/uyuni-project/uyuni/pull/2116#discussion_r408003751", "createdAt": "2020-04-14T09:41:26Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/change_software_channel.feature", "diffHunk": "@@ -0,0 +1,79 @@\n+# Copyright (c) 2020 SUSE LLC\n+# Licensed under the terms of the MIT license.\n+\n+Feature: Assign Child Channel to system", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2853a8366b19af58d26b390beb3c2e9cdba8dd2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODAwNDM2MQ==", "bodyText": "Title of feature does not follow conventions. Prefix it with min_ please.", "url": "https://github.com/uyuni-project/uyuni/pull/2116#discussion_r408004361", "createdAt": "2020-04-14T09:42:17Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/secondary/change_software_channel.feature", "diffHunk": "@@ -0,0 +1,79 @@\n+# Copyright (c) 2020 SUSE LLC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2853a8366b19af58d26b390beb3c2e9cdba8dd2"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODAwNDg0NQ==", "bodyText": "same, naming problem", "url": "https://github.com/uyuni-project/uyuni/pull/2116#discussion_r408004845", "createdAt": "2020-04-14T09:42:59Z", "author": {"login": "Bischoff"}, "path": "testsuite/run_sets/secondary.yml", "diffHunk": "@@ -40,5 +40,6 @@\n - features/secondary/min_docker_auth_registry.feature\n - features/secondary/min_docker_xmlrpc.feature\n - features/secondary/min_recurring_action.feature\n+- features/secondary/change_software_channel.feature", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2853a8366b19af58d26b390beb3c2e9cdba8dd2"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2853a8366b19af58d26b390beb3c2e9cdba8dd2", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f2853a8366b19af58d26b390beb3c2e9cdba8dd2", "committedDate": "2020-04-14T07:57:56Z", "message": "test assigning a child channel to a system\n\ntest pillar data refresh as an immediately change can cause a\nrace condition"}, "afterCommit": {"oid": "703e8e709ab0d1b9b755bba3eed85b30141abd4d", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/703e8e709ab0d1b9b755bba3eed85b30141abd4d", "committedDate": "2020-04-14T10:04:20Z", "message": "test assigning a child channel to a system\n\ntest pillar data refresh as an immediately change can cause a\nrace condition"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "703e8e709ab0d1b9b755bba3eed85b30141abd4d", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/703e8e709ab0d1b9b755bba3eed85b30141abd4d", "committedDate": "2020-04-14T10:04:20Z", "message": "test assigning a child channel to a system\n\ntest pillar data refresh as an immediately change can cause a\nrace condition"}, "afterCommit": {"oid": "b04a1d0a89a36fc3fdf249ce5ea1990a93b7e1d6", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b04a1d0a89a36fc3fdf249ce5ea1990a93b7e1d6", "committedDate": "2020-04-14T10:07:35Z", "message": "test assigning a child channel to a system\n\ntest pillar data refresh as an immediately change can cause a\nrace condition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyODA3MDcw", "url": "https://github.com/uyuni-project/uyuni/pull/2116#pullrequestreview-392807070", "createdAt": "2020-04-14T10:39:23Z", "commit": {"oid": "b04a1d0a89a36fc3fdf249ce5ea1990a93b7e1d6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyODEwOTg5", "url": "https://github.com/uyuni-project/uyuni/pull/2116#pullrequestreview-392810989", "createdAt": "2020-04-14T10:45:29Z", "commit": {"oid": "b04a1d0a89a36fc3fdf249ce5ea1990a93b7e1d6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyODIzNzM5", "url": "https://github.com/uyuni-project/uyuni/pull/2116#pullrequestreview-392823739", "createdAt": "2020-04-14T11:05:29Z", "commit": {"oid": "b04a1d0a89a36fc3fdf249ce5ea1990a93b7e1d6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b04a1d0a89a36fc3fdf249ce5ea1990a93b7e1d6", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/b04a1d0a89a36fc3fdf249ce5ea1990a93b7e1d6", "committedDate": "2020-04-14T10:07:35Z", "message": "test assigning a child channel to a system\n\ntest pillar data refresh as an immediately change can cause a\nrace condition"}, "afterCommit": {"oid": "fb6434c227672cd5f20d47f512bfeaf1cfc7b54b", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fb6434c227672cd5f20d47f512bfeaf1cfc7b54b", "committedDate": "2020-04-15T12:39:48Z", "message": "test assigning a child channel to a system\n\ntest pillar data refresh as an immediately change can cause a\nrace condition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac4aaccaa8da0ed221936909b765c8e8c6955bfa", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ac4aaccaa8da0ed221936909b765c8e8c6955bfa", "committedDate": "2020-04-16T14:59:28Z", "message": "refresh pillar data on the minion after generating new channel pillar data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac3faf425609c1b2899399868920982f2d6d9e3d", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/ac3faf425609c1b2899399868920982f2d6d9e3d", "committedDate": "2020-04-16T14:59:52Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40082dd9bb59a30e0ba1e88a04f69affcad2b6d8", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/40082dd9bb59a30e0ba1e88a04f69affcad2b6d8", "committedDate": "2020-04-16T14:59:52Z", "message": "move ChannelsChangedEventMessageAction registration to SaltReactor class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcd645ceba6518b86e5cba68a08598982be62663", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fcd645ceba6518b86e5cba68a08598982be62663", "committedDate": "2020-04-16T14:59:53Z", "message": "test assigning a child channel to a system\n\ntest pillar data refresh as an immediately change can cause a\nrace condition"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb6434c227672cd5f20d47f512bfeaf1cfc7b54b", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fb6434c227672cd5f20d47f512bfeaf1cfc7b54b", "committedDate": "2020-04-15T12:39:48Z", "message": "test assigning a child channel to a system\n\ntest pillar data refresh as an immediately change can cause a\nrace condition"}, "afterCommit": {"oid": "fcd645ceba6518b86e5cba68a08598982be62663", "author": {"user": {"login": "mcalmer", "name": "Michael Calmer"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fcd645ceba6518b86e5cba68a08598982be62663", "committedDate": "2020-04-16T14:59:53Z", "message": "test assigning a child channel to a system\n\ntest pillar data refresh as an immediately change can cause a\nrace condition"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1345, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}