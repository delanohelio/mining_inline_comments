{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1OTk2NjYz", "number": 2479, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwOTo0NToxNlrOEdJPJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMTo1MTozOFrOEf9GjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4OTk1NDkzOnYy", "diffSide": "LEFT", "path": "branding/css/susemanager-theme.less", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwOTo0NToxNlrOHIIq0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNjoxODoxMVrOHIXvNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI5MjY4OQ==", "bodyText": "Today we all should learn: this is not the way to disable a feature! \ud83d\ude05\nJust to be clear: no blame to anyone, just to be aware of.", "url": "https://github.com/uyuni-project/uyuni/pull/2479#discussion_r478292689", "createdAt": "2020-08-27T09:45:16Z", "author": {"login": "ncounter"}, "path": "branding/css/susemanager-theme.less", "diffHunk": "@@ -896,10 +896,6 @@ input[name=\"cveIdentifierId\"]#cveIdentifierId {\n .popover-content ul li {\n   margin-top: .5em\n }\n-/* Create New User. Language selection hidden for SUSE Manager users as we only offer support for English */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d6d28ab719e6c65ad97c50b729b8a3f373f8a7b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODUzOTU3Mw==", "bodyText": "Yeah I was shocked when I saw this \ud83d\ude05", "url": "https://github.com/uyuni-project/uyuni/pull/2479#discussion_r478539573", "createdAt": "2020-08-27T16:18:11Z", "author": {"login": "parlt91"}, "path": "branding/css/susemanager-theme.less", "diffHunk": "@@ -896,10 +896,6 @@ input[name=\"cveIdentifierId\"]#cveIdentifierId {\n .popover-content ul li {\n   margin-top: .5em\n }\n-/* Create New User. Language selection hidden for SUSE Manager users as we only offer support for English */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI5MjY4OQ=="}, "originalCommit": {"oid": "4d6d28ab719e6c65ad97c50b729b8a3f373f8a7b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MDU0NTA0OnYy", "diffSide": "RIGHT", "path": "java/code/src/com/redhat/rhn/common/conf/ConfigDefaults.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMjozMjoyM1rOHIOKZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNToxMDozNlrOHIU7DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM4MjY5Mw==", "bodyText": "why not DEFAULT_LOCALE? btw, is this going to affect the language or also all the localization like date and time?", "url": "https://github.com/uyuni-project/uyuni/pull/2479#discussion_r478382693", "createdAt": "2020-08-27T12:32:23Z", "author": {"login": "ncounter"}, "path": "java/code/src/com/redhat/rhn/common/conf/ConfigDefaults.java", "diffHunk": "@@ -329,6 +330,11 @@\n      */\n     public static final String ALLOW_ADDING_PATCHES_VIA_API = \"java.allow_adding_patches_via_api\";\n \n+    /**\n+     * Specify the default language to use if user preferences are not available such as on the login page\n+     */\n+    public static final String PREFERRED_LOCALE = \"web.locale\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d6d28ab719e6c65ad97c50b729b8a3f373f8a7b"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ5MzQ1Mg==", "bodyText": "I guess you are right DEFAULT_LOCALE is better in this context.\nIt is just the language.", "url": "https://github.com/uyuni-project/uyuni/pull/2479#discussion_r478493452", "createdAt": "2020-08-27T15:10:36Z", "author": {"login": "parlt91"}, "path": "java/code/src/com/redhat/rhn/common/conf/ConfigDefaults.java", "diffHunk": "@@ -329,6 +330,11 @@\n      */\n     public static final String ALLOW_ADDING_PATCHES_VIA_API = \"java.allow_adding_patches_via_api\";\n \n+    /**\n+     * Specify the default language to use if user preferences are not available such as on the login page\n+     */\n+    public static final String PREFERRED_LOCALE = \"web.locale\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM4MjY5Mw=="}, "originalCommit": {"oid": "4d6d28ab719e6c65ad97c50b729b8a3f373f8a7b"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MDU3MzQ2OnYy", "diffSide": "RIGHT", "path": "java/code/webapp/WEB-INF/decorators/layout_head.jsp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMjo0MDoyN1rOHIOcUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNToyMjoyNFrOHIVbwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM4NzI4MA==", "bodyText": "Can we put this into window.preferredLocale?", "url": "https://github.com/uyuni-project/uyuni/pull/2479#discussion_r478387280", "createdAt": "2020-08-27T12:40:27Z", "author": {"login": "ncounter"}, "path": "java/code/webapp/WEB-INF/decorators/layout_head.jsp", "diffHunk": "@@ -62,14 +62,17 @@\n         </c:otherwise>\n     </c:choose>\n \n+    <!-- expose user preferred language to the application -->\n+    <c:set var=\"currentLocale\" value=\"${GlobalInstanceHolder.MENU_TREE.getCurrentLocale(pageContext)}\"/>\n+    <script> preferredLocale='${currentLocale}'</script>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d6d28ab719e6c65ad97c50b729b8a3f373f8a7b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODUwMTgyNQ==", "bodyText": "Yes of course we can. I will change it", "url": "https://github.com/uyuni-project/uyuni/pull/2479#discussion_r478501825", "createdAt": "2020-08-27T15:22:24Z", "author": {"login": "parlt91"}, "path": "java/code/webapp/WEB-INF/decorators/layout_head.jsp", "diffHunk": "@@ -62,14 +62,17 @@\n         </c:otherwise>\n     </c:choose>\n \n+    <!-- expose user preferred language to the application -->\n+    <c:set var=\"currentLocale\" value=\"${GlobalInstanceHolder.MENU_TREE.getCurrentLocale(pageContext)}\"/>\n+    <script> preferredLocale='${currentLocale}'</script>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM4NzI4MA=="}, "originalCommit": {"oid": "4d6d28ab719e6c65ad97c50b729b8a3f373f8a7b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxOTQyNDEzOnYy", "diffSide": "RIGHT", "path": "java/code/src/com/suse/manager/webui/controllers/login/templates/login.jade", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMTo1MTozOFrOHMjBGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxMzoxNTo1OVrOHMmEGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkxODY4MA==", "bodyText": "Following @ncounter's suggestion, shall we move this to window.preferredLocale too?", "url": "https://github.com/uyuni-project/uyuni/pull/2479#discussion_r482918680", "createdAt": "2020-09-03T11:51:38Z", "author": {"login": "cbbayburt"}, "path": "java/code/src/com/suse/manager/webui/controllers/login/templates/login.jade", "diffHunk": "@@ -58,6 +58,7 @@ html\n             | #{request_method}\n \n         script(type='text/javascript').\n+            preferredLocale = \"#{preferredLocale}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33e8278fa744085b186558ff12d4ed18eccce538"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjk2ODYwMA==", "bodyText": "It seems that it is already added to the window variable. At least typing window.preferredLocale into the console at the login page returns the value", "url": "https://github.com/uyuni-project/uyuni/pull/2479#discussion_r482968600", "createdAt": "2020-09-03T13:15:59Z", "author": {"login": "parlt91"}, "path": "java/code/src/com/suse/manager/webui/controllers/login/templates/login.jade", "diffHunk": "@@ -58,6 +58,7 @@ html\n             | #{request_method}\n \n         script(type='text/javascript').\n+            preferredLocale = \"#{preferredLocale}\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkxODY4MA=="}, "originalCommit": {"oid": "33e8278fa744085b186558ff12d4ed18eccce538"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4096, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}