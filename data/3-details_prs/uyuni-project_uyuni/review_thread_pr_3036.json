{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxMjk5MzEw", "number": 3036, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTo1MDoyOFrOFG4NLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxNzowNTo0OVrOFHlh6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzU2NjUyOnYy", "diffSide": "RIGHT", "path": "testsuite/features/qam/reposync/srv_sync_qam_products.feature", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTo1MDoyOFrOIIGKfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMDo0MTo0OVrOIId1Eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MDUwOA==", "bodyText": "Fine.. just to have a mirror of 4.1 for next 4.2.\nBut ofc, this will not apply to Uyuni", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545360508", "createdAt": "2020-12-17T19:50:28Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/qam/reposync/srv_sync_qam_products.feature", "diffHunk": "@@ -126,3 +126,11 @@ Feature: Synchronize products in the products page of the Setup Wizard\n     Then I should see the \"SUSE Manager Proxy 4.1 x86_64\" selected\n     When I click the Add Product button\n     And I wait until I see \"SUSE Manager Proxy 4.1 x86_64\" product has been added\n+\n+  Scenario: SUSE Manager Retail Branch Server 4.1 x86_64", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcxODI1Nw==", "bodyText": "We could also switch to 4.2 here - it's head branch after all. And it will soon come to existence as we are at alpha 1.\nTell me if you prefer that.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545718257", "createdAt": "2020-12-18T09:46:34Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/qam/reposync/srv_sync_qam_products.feature", "diffHunk": "@@ -126,3 +126,11 @@ Feature: Synchronize products in the products page of the Setup Wizard\n     Then I should see the \"SUSE Manager Proxy 4.1 x86_64\" selected\n     When I click the Add Product button\n     And I wait until I see \"SUSE Manager Proxy 4.1 x86_64\" product has been added\n+\n+  Scenario: SUSE Manager Retail Branch Server 4.1 x86_64", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MDUwOA=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcyNDAwOA==", "bodyText": "We need to have here whatever \"Head\" version shown in the WebUI, as it shows 4.2, we should have here 4.2.\nBUT keep in mind that we will not execute this code either for Uyuni or Head. As the purpose of this code is only for Maintenance Updates.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545724008", "createdAt": "2020-12-18T09:56:31Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/qam/reposync/srv_sync_qam_products.feature", "diffHunk": "@@ -126,3 +126,11 @@ Feature: Synchronize products in the products page of the Setup Wizard\n     Then I should see the \"SUSE Manager Proxy 4.1 x86_64\" selected\n     When I click the Add Product button\n     And I wait until I see \"SUSE Manager Proxy 4.1 x86_64\" product has been added\n+\n+  Scenario: SUSE Manager Retail Branch Server 4.1 x86_64", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MDUwOA=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc0MDA2Mw==", "bodyText": "I know that. The thing is, this code will eventually become the 4.2 QAM code.\nI'll change 4.1 to 4.2 in head.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545740063", "createdAt": "2020-12-18T10:26:16Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/qam/reposync/srv_sync_qam_products.feature", "diffHunk": "@@ -126,3 +126,11 @@ Feature: Synchronize products in the products page of the Setup Wizard\n     Then I should see the \"SUSE Manager Proxy 4.1 x86_64\" selected\n     When I click the Add Product button\n     And I wait until I see \"SUSE Manager Proxy 4.1 x86_64\" product has been added\n+\n+  Scenario: SUSE Manager Retail Branch Server 4.1 x86_64", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MDUwOA=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc0ODI0Mg==", "bodyText": "Done.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545748242", "createdAt": "2020-12-18T10:41:49Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/qam/reposync/srv_sync_qam_products.feature", "diffHunk": "@@ -126,3 +126,11 @@ Feature: Synchronize products in the products page of the Setup Wizard\n     Then I should see the \"SUSE Manager Proxy 4.1 x86_64\" selected\n     When I click the Add Product button\n     And I wait until I see \"SUSE Manager Proxy 4.1 x86_64\" product has been added\n+\n+  Scenario: SUSE Manager Retail Branch Server 4.1 x86_64", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MDUwOA=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzU3MjgzOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/command_steps.rb", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTo1MTo1OVrOIIGOMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMTo1MTo0M1rOIIf8jA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MTQ1Nw==", "bodyText": "I wonder if we bootstrap the same repo name in Uyuni \ud83e\udd14\nWe might distinguish by $product in this section.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545361457", "createdAt": "2020-12-17T19:51:59Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -878,7 +878,9 @@\n   node = get_target(host)\n   os_version, _os_family = get_os_version(node)\n   cmd = 'false'\n-  if (os_version.include? '12') || (os_version.include? '15')\n+  if (os_version.include? '15') && (host.include? 'proxy')\n+    cmd = \"mgr-create-bootstrap-repo -c SUMA-41-PROXY-#{arch}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcxODg4MA==", "bodyText": "Don't know.\nApart from that, same as above, we could also start using 42.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545718880", "createdAt": "2020-12-18T09:47:36Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -878,7 +878,9 @@\n   node = get_target(host)\n   os_version, _os_family = get_os_version(node)\n   cmd = 'false'\n-  if (os_version.include? '12') || (os_version.include? '15')\n+  if (os_version.include? '15') && (host.include? 'proxy')\n+    cmd = \"mgr-create-bootstrap-repo -c SUMA-41-PROXY-#{arch}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MTQ1Nw=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcyNDgxNg==", "bodyText": "Yes. For head code, this is a typo. Still we need to distinguish products.\nPinging our proxy master, @lkotek", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545724816", "createdAt": "2020-12-18T09:57:55Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -878,7 +878,9 @@\n   node = get_target(host)\n   os_version, _os_family = get_os_version(node)\n   cmd = 'false'\n-  if (os_version.include? '12') || (os_version.include? '15')\n+  if (os_version.include? '15') && (host.include? 'proxy')\n+    cmd = \"mgr-create-bootstrap-repo -c SUMA-41-PROXY-#{arch}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MTQ1Nw=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc0OTE1Mg==", "bodyText": "I switched to 4.2.\nThanks for the ping. We can fix the issue here, or in a separate PR, whatever makes more sense for you guys.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545749152", "createdAt": "2020-12-18T10:43:33Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -878,7 +878,9 @@\n   node = get_target(host)\n   os_version, _os_family = get_os_version(node)\n   cmd = 'false'\n-  if (os_version.include? '12') || (os_version.include? '15')\n+  if (os_version.include? '15') && (host.include? 'proxy')\n+    cmd = \"mgr-create-bootstrap-repo -c SUMA-41-PROXY-#{arch}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MTQ1Nw=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc1NzIxMw==", "bodyText": "I will take a look. I have a lot of notes about it from few months ago :-)", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545757213", "createdAt": "2020-12-18T10:58:45Z", "author": {"login": "lkotek"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -878,7 +878,9 @@\n   node = get_target(host)\n   os_version, _os_family = get_os_version(node)\n   cmd = 'false'\n-  if (os_version.include? '12') || (os_version.include? '15')\n+  if (os_version.include? '15') && (host.include? 'proxy')\n+    cmd = \"mgr-create-bootstrap-repo -c SUMA-41-PROXY-#{arch}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MTQ1Nw=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc2MTc5Mg==", "bodyText": "@srbarrios In case of uyuni we create the same bootstrap repo as for Leap 15.2. Proxy specific things needs to be part of activation key, but there is nothing specific to be done at level of bootstrap repo. (Basically uyuni works like SUMA 3.2 and older.)", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545761792", "createdAt": "2020-12-18T11:07:39Z", "author": {"login": "lkotek"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -878,7 +878,9 @@\n   node = get_target(host)\n   os_version, _os_family = get_os_version(node)\n   cmd = 'false'\n-  if (os_version.include? '12') || (os_version.include? '15')\n+  if (os_version.include? '15') && (host.include? 'proxy')\n+    cmd = \"mgr-create-bootstrap-repo -c SUMA-41-PROXY-#{arch}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MTQ1Nw=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc3MTkzMw==", "bodyText": "So for Uyuni we will also use SUMA-41-PROXY-#{arch} on the bootstrap repo command ?", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545771933", "createdAt": "2020-12-18T11:28:26Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -878,7 +878,9 @@\n   node = get_target(host)\n   os_version, _os_family = get_os_version(node)\n   cmd = 'false'\n-  if (os_version.include? '12') || (os_version.include? '15')\n+  if (os_version.include? '15') && (host.include? 'proxy')\n+    cmd = \"mgr-create-bootstrap-repo -c SUMA-41-PROXY-#{arch}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MTQ1Nw=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc4MjkyNA==", "bodyText": "I will remove the change and let Lukas address this in a separate PR.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545782924", "createdAt": "2020-12-18T11:51:43Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -878,7 +878,9 @@\n   node = get_target(host)\n   os_version, _os_family = get_os_version(node)\n   cmd = 'false'\n-  if (os_version.include? '12') || (os_version.include? '15')\n+  if (os_version.include? '15') && (host.include? 'proxy')\n+    cmd = \"mgr-create-bootstrap-repo -c SUMA-41-PROXY-#{arch}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MTQ1Nw=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzU4MjQyOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/command_steps.rb", "isResolved": true, "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTo1NDoxMlrOIIGT6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMTo1MDowOVrOIIf5nA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MjkyMQ==", "bodyText": "Please don't use 'product' as a variable, it is easy to mix with '$product'", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545362921", "createdAt": "2020-12-17T19:54:12Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1460,3 +1462,15 @@\n   raise 'File injection failed' unless return_code.zero?\n   node.run('salt-call --local --file-root=/usr/share/susemanager/salt --module-dirs=/usr/share/susemanager/salt/ --log-level=info --retcode-passthrough state.apply ' + state)\n end\n+\n+When(/^I set correct product for \"(proxy|branch server)\"$/) do |product|\n+  if product.include? 'proxy'\n+    prod = 'SUSE-Manager-Proxy'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2NDAwOA==", "bodyText": "Also, review if for Uyuni, we use a different name like Uyuni-Proxy. As this code serve for Head and Uyuni we might want to distinguish both.\n@lkotek ^^^^", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545364008", "createdAt": "2020-12-17T19:55:56Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1460,3 +1462,15 @@\n   raise 'File injection failed' unless return_code.zero?\n   node.run('salt-call --local --file-root=/usr/share/susemanager/salt --module-dirs=/usr/share/susemanager/salt/ --log-level=info --retcode-passthrough state.apply ' + state)\n end\n+\n+When(/^I set correct product for \"(proxy|branch server)\"$/) do |product|\n+  if product.include? 'proxy'\n+    prod = 'SUSE-Manager-Proxy'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MjkyMQ=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY5MjIwMw==", "bodyText": "@srbarrios Very good catch, thanks! I didn't realize that, but yes, you're completely right.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545692203", "createdAt": "2020-12-18T09:13:32Z", "author": {"login": "lkotek"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1460,3 +1462,15 @@\n   raise 'File injection failed' unless return_code.zero?\n   node.run('salt-call --local --file-root=/usr/share/susemanager/salt --module-dirs=/usr/share/susemanager/salt/ --log-level=info --retcode-passthrough state.apply ' + state)\n end\n+\n+When(/^I set correct product for \"(proxy|branch server)\"$/) do |product|\n+  if product.include? 'proxy'\n+    prod = 'SUSE-Manager-Proxy'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MjkyMQ=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcxOTU5MQ==", "bodyText": "I'm not the author of this code.\nIf you would like such changes, please contact the original authors, and let's do it in separate PRs.\nThis is only about aligning the code in every branch.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545719591", "createdAt": "2020-12-18T09:48:53Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1460,3 +1462,15 @@\n   raise 'File injection failed' unless return_code.zero?\n   node.run('salt-call --local --file-root=/usr/share/susemanager/salt --module-dirs=/usr/share/susemanager/salt/ --log-level=info --retcode-passthrough state.apply ' + state)\n end\n+\n+When(/^I set correct product for \"(proxy|branch server)\"$/) do |product|\n+  if product.include? 'proxy'\n+    prod = 'SUSE-Manager-Proxy'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MjkyMQ=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcyNjE5NQ==", "bodyText": "I'm not the author of this code.\nIf you would like such changes, please contact the original authors, and let's do it in separate PRs.\nThis is only about aligning the code in every branch.\n\n@Bischoff Do you want to merge something wrong? In Uyuni we need to distinguish with Head. This doesn't apply to spacewalk. So please don't merge it, to fix this wrong code in a future PR. And as you can see above, I already pinged the author ;)", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545726195", "createdAt": "2020-12-18T10:00:26Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1460,3 +1462,15 @@\n   raise 'File injection failed' unless return_code.zero?\n   node.run('salt-call --local --file-root=/usr/share/susemanager/salt --module-dirs=/usr/share/susemanager/salt/ --log-level=info --retcode-passthrough state.apply ' + state)\n end\n+\n+When(/^I set correct product for \"(proxy|branch server)\"$/) do |product|\n+  if product.include? 'proxy'\n+    prod = 'SUSE-Manager-Proxy'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MjkyMQ=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc1MDIyNA==", "bodyText": "We can also fix it as part of this PR, yes, if it is short.\nIt is just that I would like to focus on synchronizing the branches.\nIf we find errors at this occasion, fine, but maybe it is cleaner and simpler to do it in separate PRs. That's all.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545750224", "createdAt": "2020-12-18T10:45:32Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1460,3 +1462,15 @@\n   raise 'File injection failed' unless return_code.zero?\n   node.run('salt-call --local --file-root=/usr/share/susemanager/salt --module-dirs=/usr/share/susemanager/salt/ --log-level=info --retcode-passthrough state.apply ' + state)\n end\n+\n+When(/^I set correct product for \"(proxy|branch server)\"$/) do |product|\n+  if product.include? 'proxy'\n+    prod = 'SUSE-Manager-Proxy'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MjkyMQ=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc3MDk5NQ==", "bodyText": "If we do in a separate PR better, but then let's not port any line at that section.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545770995", "createdAt": "2020-12-18T11:26:21Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1460,3 +1462,15 @@\n   raise 'File injection failed' unless return_code.zero?\n   node.run('salt-call --local --file-root=/usr/share/susemanager/salt --module-dirs=/usr/share/susemanager/salt/ --log-level=info --retcode-passthrough state.apply ' + state)\n end\n+\n+When(/^I set correct product for \"(proxy|branch server)\"$/) do |product|\n+  if product.include? 'proxy'\n+    prod = 'SUSE-Manager-Proxy'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MjkyMQ=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc3MTEzMA==", "bodyText": "@srbarrios I would like to address this in separate PR. TBH I am afraid we can jump into a lot of unexpected consequences as we entering area, where are differences between uyni, head and SUMA itself. I am author of this code, so I volunteer to fix it. But my suggestion is not to do it today on Friday before Christmas. I can create card for it so this won't be forgotten.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545771130", "createdAt": "2020-12-18T11:26:42Z", "author": {"login": "lkotek"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1460,3 +1462,15 @@\n   raise 'File injection failed' unless return_code.zero?\n   node.run('salt-call --local --file-root=/usr/share/susemanager/salt --module-dirs=/usr/share/susemanager/salt/ --log-level=info --retcode-passthrough state.apply ' + state)\n end\n+\n+When(/^I set correct product for \"(proxy|branch server)\"$/) do |product|\n+  if product.include? 'proxy'\n+    prod = 'SUSE-Manager-Proxy'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MjkyMQ=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc3Nzc5OA==", "bodyText": "If we do in a separate PR better, but then let's not port any line at that section.\n\nOK. I will not port anything then. Same for the other one above.\n@lkotek I created a card for you in January SUSE/spacewalk#13509", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545777798", "createdAt": "2020-12-18T11:41:04Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1460,3 +1462,15 @@\n   raise 'File injection failed' unless return_code.zero?\n   node.run('salt-call --local --file-root=/usr/share/susemanager/salt --module-dirs=/usr/share/susemanager/salt/ --log-level=info --retcode-passthrough state.apply ' + state)\n end\n+\n+When(/^I set correct product for \"(proxy|branch server)\"$/) do |product|\n+  if product.include? 'proxy'\n+    prod = 'SUSE-Manager-Proxy'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MjkyMQ=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc4MjE3Mg==", "bodyText": "I just realized this code is used in QAM only - no uyuni then, it will become used in 4.2 where we have SUSE Manager only. So the whole discussion was pointless.\nBut... as we might want to start using QAM test suite at some point for milestones as well, better have bullet-proof code.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545782172", "createdAt": "2020-12-18T11:50:09Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1460,3 +1462,15 @@\n   raise 'File injection failed' unless return_code.zero?\n   node.run('salt-call --local --file-root=/usr/share/susemanager/salt --module-dirs=/usr/share/susemanager/salt/ --log-level=info --retcode-passthrough state.apply ' + state)\n end\n+\n+When(/^I set correct product for \"(proxy|branch server)\"$/) do |product|\n+  if product.include? 'proxy'\n+    prod = 'SUSE-Manager-Proxy'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2MjkyMQ=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzU5NzMzOnYy", "diffSide": "RIGHT", "path": "testsuite/features/step_definitions/navigation_steps.rb", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTo1NzozOFrOIIGcug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwOTo0OTo0OVrOIIcHOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2NTE3OA==", "bodyText": "My bad thanks to port it :)", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545365178", "createdAt": "2020-12-17T19:57:38Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/navigation_steps.rb", "diffHunk": "@@ -818,6 +818,10 @@\n   find(\"input[placeholder='Filter by Synopsis: ']\").set(input)\n end\n \n+When(/^I enter \"([^\"]*)\" as the filtered channel name$/) do |input|\n+  find(\"input[placeholder='Filter by Channel Name: ']\").set(input)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcyMDEyMA==", "bodyText": "No worry, you're not the only one to have forgotten ports.\nThat's the whole purpose of this operation.", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545720120", "createdAt": "2020-12-18T09:49:49Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/step_definitions/navigation_steps.rb", "diffHunk": "@@ -818,6 +818,10 @@\n   find(\"input[placeholder='Filter by Synopsis: ']\").set(input)\n end\n \n+When(/^I enter \"([^\"]*)\" as the filtered channel name$/) do |input|\n+  find(\"input[placeholder='Filter by Channel Name: ']\").set(input)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2NTE3OA=="}, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzYwMzEzOnYy", "diffSide": "RIGHT", "path": "testsuite/features/support/env.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTo1OTowNlrOIIGgQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTo1OTowNlrOIIGgQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM2NjA4MA==", "bodyText": "Thanks!", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r545366080", "createdAt": "2020-12-17T19:59:06Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/support/env.rb", "diffHunk": "@@ -32,12 +32,11 @@\n Capybara.default_max_wait_time = 10\n DEFAULT_TIMEOUT = 250\n \n-# QAM test-suite will provide a json including all client repositories with format :\n-# {\"client_type\" : { \"salt\" : \"salt_repo\" , \"traditional\" : \"traditional_repo\" }}\n-mu_repos_path = File.dirname(__FILE__) + '/../upload_files/' + 'mu_repositories.json'\n-if File.exist?(mu_repos_path)\n-  mu_repos_file = File.read(mu_repos_path)\n-  $mu_repositories = JSON.parse(mu_repos_file)\n+# QAM test suite will provide a json file including all client repositories", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79892d83184de4ee2b7a9b46098ce513ccdee6c0"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNDk5MjQzOnYy", "diffSide": "RIGHT", "path": "testsuite/features/qam/reposync/srv_sync_qam_products.feature", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxNzowNTo0OVrOIJFzpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxODoxMDozNlrOIJGPNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQwMzIzOQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r546403239", "createdAt": "2020-12-20T17:05:49Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/qam/reposync/srv_sync_qam_products.feature", "diffHunk": "@@ -119,10 +119,18 @@ Feature: Synchronize products in the products page of the Setup Wizard\n     When I click the Add Product button\n     And I wait until I see \"RHEL or SLES ES or CentOS 8 Base x86_64\" product has been added\n \n-  Scenario: SUSE Manager Proxy 4.1 x86_64\n+  Scenario: SUSE Manager Proxy 4.2 x86_64\n     Given I am on the Products page\n-    And I enter \"SUSE Manager Proxy 4.1 x86_64\" as the filtered product description\n-    And I select \"SUSE Manager Proxy 4.1 x86_64\" as a product\n-    Then I should see the \"SUSE Manager Proxy 4.1 x86_64\" selected\n+    When I enter \"SUSE Manager Proxy 4.2 x86_64\" as the filtered product description", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9de5fa8da906a221ebf905a2e9fa537df97540f8"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxMDI5NA==", "bodyText": "Yeah, it's a bit of anticipating the future, I know...", "url": "https://github.com/uyuni-project/uyuni/pull/3036#discussion_r546410294", "createdAt": "2020-12-20T18:10:36Z", "author": {"login": "Bischoff"}, "path": "testsuite/features/qam/reposync/srv_sync_qam_products.feature", "diffHunk": "@@ -119,10 +119,18 @@ Feature: Synchronize products in the products page of the Setup Wizard\n     When I click the Add Product button\n     And I wait until I see \"RHEL or SLES ES or CentOS 8 Base x86_64\" product has been added\n \n-  Scenario: SUSE Manager Proxy 4.1 x86_64\n+  Scenario: SUSE Manager Proxy 4.2 x86_64\n     Given I am on the Products page\n-    And I enter \"SUSE Manager Proxy 4.1 x86_64\" as the filtered product description\n-    And I select \"SUSE Manager Proxy 4.1 x86_64\" as a product\n-    Then I should see the \"SUSE Manager Proxy 4.1 x86_64\" selected\n+    When I enter \"SUSE Manager Proxy 4.2 x86_64\" as the filtered product description", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQwMzIzOQ=="}, "originalCommit": {"oid": "9de5fa8da906a221ebf905a2e9fa537df97540f8"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3886, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}