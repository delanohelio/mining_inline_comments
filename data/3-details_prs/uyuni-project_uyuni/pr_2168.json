{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NzcyNjYy", "number": 2168, "title": "Pass primary minion ip to the salt runner", "bodyText": "What does this PR change?\ncollectKiwiImage wrongly assumed that minion id is the same as minion hostname. Now ask grains for primary fqdn.\nTo support scenarios where DNS system may not be configured, collectKiwiImage runner needs reachable IP address for rsync. Instead of parsing and evaluating all IPs from grains, rely on primary IP address passed from database.\nGUI diff\nNo difference.\n\n DONE\n\nDocumentation\n\n\nNo documentation needed: not user facing change\n\n\n DONE\n\n\nTest coverage\n\n\nUnit tests already cowered.\n\n\nCucumber tests Basic functionality already cowered.\n\n\n DONE\n\n\nLinks\nFixes bsc#1170737\nTracks # add downstream PR, if any\n\n DONE\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed\n\nIf you uncheck the checkbox after the PR is created, you will need to re-run changelog_test (see below)\nRe-run a test\nIf you need to re-run a test, please mark the related checkbox, it will be unchecked automatically once it has re-run:\n\n Re-run test \"changelog_test\"\n Re-run test \"backend_unittests_pgsql\"\n Re-run test \"java_lint_checkstyle\"\n Re-run test \"java_pgsql_tests\"\n Re-run test \"ruby_rubocop\"\n Re-run test \"schema_migration_test_oracle\"\n Re-run test \"schema_migration_test_pgsql\"\n Re-run test \"susemanager_unittests\"\n Re-run test \"javascript_lint\"\n Re-run test \"spacecmd_unittests\"", "createdAt": "2020-04-27T22:05:12Z", "url": "https://github.com/uyuni-project/uyuni/pull/2168", "merged": true, "mergeCommit": {"oid": "1f5e1e0575eb978fda85a723e8a89846192e1b80"}, "closed": true, "closedAt": "2020-06-05T10:29:52Z", "author": {"login": "aaannz"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcb_rZ8ABqjMyNzkxODg5NjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoO5w2gBqjM0MTAzOTIzMzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e812384f85042be2faca3cf3b06a695ae5af9286", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/e812384f85042be2faca3cf3b06a695ae5af9286", "committedDate": "2020-04-27T22:00:34Z", "message": "Salt returns 'retcode', not 'returncode'"}, "afterCommit": {"oid": "d89f09f71d75df46701ba7b088c9b2ba8c5ef31f", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d89f09f71d75df46701ba7b088c9b2ba8c5ef31f", "committedDate": "2020-04-28T08:33:06Z", "message": "Salt returns 'retcode', not 'returncode'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d89f09f71d75df46701ba7b088c9b2ba8c5ef31f", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d89f09f71d75df46701ba7b088c9b2ba8c5ef31f", "committedDate": "2020-04-28T08:33:06Z", "message": "Salt returns 'retcode', not 'returncode'"}, "afterCommit": {"oid": "2ba67796352a21fe042c63b1fee1f78bee38880d", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2ba67796352a21fe042c63b1fee1f78bee38880d", "committedDate": "2020-04-28T13:38:29Z", "message": "Salt returns 'retcode', not 'returncode'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxOTkyMzEy", "url": "https://github.com/uyuni-project/uyuni/pull/2168#pullrequestreview-401992312", "createdAt": "2020-04-28T16:08:53Z", "commit": {"oid": "fc3ada7ede09088d96ce8a985c473fbfbb2f8161"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNjowODo1M1rOGNbxyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNjowODo1M1rOGNbxyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjczOTc4Nw==", "bodyText": "This entry can be a bit more descriptive with more context. Something like:\n\"Use primary minion IP when uploading images with 'kiwi-image-collect' runner\"\n(also for susemanager-sls.changes)", "url": "https://github.com/uyuni-project/uyuni/pull/2168#discussion_r416739787", "createdAt": "2020-04-28T16:08:53Z", "author": {"login": "cbbayburt"}, "path": "java/spacewalk-java.changes", "diffHunk": "@@ -1,3 +1,4 @@\n+- Pass primary minion ip to the salt runner", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc3ada7ede09088d96ce8a985c473fbfbb2f8161"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ba67796352a21fe042c63b1fee1f78bee38880d", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/2ba67796352a21fe042c63b1fee1f78bee38880d", "committedDate": "2020-04-28T13:38:29Z", "message": "Salt returns 'retcode', not 'returncode'"}, "afterCommit": {"oid": "c768399b52b41149fed865b022506ee265aaaadc", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c768399b52b41149fed865b022506ee265aaaadc", "committedDate": "2020-04-28T17:21:26Z", "message": "Salt returns 'retcode', not 'returncode'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNTkyNTAz", "url": "https://github.com/uyuni-project/uyuni/pull/2168#pullrequestreview-402592503", "createdAt": "2020-04-29T11:51:33Z", "commit": {"oid": "c768399b52b41149fed865b022506ee265aaaadc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c768399b52b41149fed865b022506ee265aaaadc", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/c768399b52b41149fed865b022506ee265aaaadc", "committedDate": "2020-04-28T17:21:26Z", "message": "Salt returns 'retcode', not 'returncode'"}, "afterCommit": {"oid": "d9275e1dedc40e0b04db0932d8bdfe01f61bfb22", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d9275e1dedc40e0b04db0932d8bdfe01f61bfb22", "committedDate": "2020-05-13T12:02:46Z", "message": "Salt returns 'retcode', not 'returncode'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d9275e1dedc40e0b04db0932d8bdfe01f61bfb22", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d9275e1dedc40e0b04db0932d8bdfe01f61bfb22", "committedDate": "2020-05-13T12:02:46Z", "message": "Salt returns 'retcode', not 'returncode'"}, "afterCommit": {"oid": "8b1ad7e3377b5b8ae45d1f2e9853b977b3055912", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8b1ad7e3377b5b8ae45d1f2e9853b977b3055912", "committedDate": "2020-05-22T08:19:16Z", "message": "Salt returns 'retcode', not 'returncode'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b1ad7e3377b5b8ae45d1f2e9853b977b3055912", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/8b1ad7e3377b5b8ae45d1f2e9853b977b3055912", "committedDate": "2020-05-22T08:19:16Z", "message": "Salt returns 'retcode', not 'returncode'"}, "afterCommit": {"oid": "d9d04045b2cb5c1b28a1ed8d9f247cf77b98ba56", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d9d04045b2cb5c1b28a1ed8d9f247cf77b98ba56", "committedDate": "2020-06-04T10:20:22Z", "message": "Salt returns 'retcode', not 'returncode'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f86347b3b454097711154714ebe59380b4f9b1fd", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f86347b3b454097711154714ebe59380b4f9b1fd", "committedDate": "2020-06-05T09:04:16Z", "message": "Pass primary minion ip to the salt runner\n\ncollectKiwiImage runner needs reachable address for rsync. Instead\nof parsing and evaulating all IPs from grains, rely on primary IP\naddress stored at database."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d09ceff1223a2e8b8008cf32eaf5361733b76e6a", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d09ceff1223a2e8b8008cf32eaf5361733b76e6a", "committedDate": "2020-06-05T09:04:22Z", "message": "Salt returns 'retcode', not 'returncode'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d9d04045b2cb5c1b28a1ed8d9f247cf77b98ba56", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d9d04045b2cb5c1b28a1ed8d9f247cf77b98ba56", "committedDate": "2020-06-04T10:20:22Z", "message": "Salt returns 'retcode', not 'returncode'"}, "afterCommit": {"oid": "d09ceff1223a2e8b8008cf32eaf5361733b76e6a", "author": {"user": {"login": "aaannz", "name": "Ond\u0159ej Hole\u010dek"}}, "url": "https://github.com/uyuni-project/uyuni/commit/d09ceff1223a2e8b8008cf32eaf5361733b76e6a", "committedDate": "2020-06-05T09:04:22Z", "message": "Salt returns 'retcode', not 'returncode'"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1390, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}