{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNzcyMjQ4", "number": 2981, "title": "Faster and more robust checkbox test", "bodyText": "What does this PR change?\nTest for a selected product can be made faster (do not search in the page twice) and more robuts (current test fails in certain conditions).\nLinks\nPorts:\n\n4.1: SUSE/spacewalk#13381\n4.0: SUSE/spacewalk#13383\n\nChangelogs\nIf you don't need a changelog check, please mark this checkbox:\n\n No changelog needed", "createdAt": "2020-12-07T15:52:47Z", "url": "https://github.com/uyuni-project/uyuni/pull/2981", "merged": true, "mergeCommit": {"oid": "d5e8fbbd3f4825064fdede0cebddae6af11d531a"}, "closed": true, "closedAt": "2020-12-08T14:57:01Z", "author": {"login": "Bischoff"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdj4C2hgBqjQwODA0OTg2OTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkLKUSABqjQwODUwOTAwMjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0545b2e111e89f3d5151e2994f3b41ebcd27eb24", "author": {"user": {"login": "Bischoff", "name": "E Bischoff"}}, "url": "https://github.com/uyuni-project/uyuni/commit/0545b2e111e89f3d5151e2994f3b41ebcd27eb24", "committedDate": "2020-12-07T15:41:21Z", "message": "Faster and more robust checkbox test"}, "afterCommit": {"oid": "f28791a067eeae3677a82d127fcf479528a44d5e", "author": {"user": {"login": "Bischoff", "name": "E Bischoff"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f28791a067eeae3677a82d127fcf479528a44d5e", "committedDate": "2020-12-07T16:17:37Z", "message": "Faster and more robust checkbox test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MzE0OTAx", "url": "https://github.com/uyuni-project/uyuni/pull/2981#pullrequestreview-546314901", "createdAt": "2020-12-07T16:25:45Z", "commit": {"oid": "f28791a067eeae3677a82d127fcf479528a44d5e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MzE2NjEz", "url": "https://github.com/uyuni-project/uyuni/pull/2981#pullrequestreview-546316613", "createdAt": "2020-12-07T16:27:27Z", "commit": {"oid": "f28791a067eeae3677a82d127fcf479528a44d5e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MzI1ODkw", "url": "https://github.com/uyuni-project/uyuni/pull/2981#pullrequestreview-546325890", "createdAt": "2020-12-07T16:37:19Z", "commit": {"oid": "f28791a067eeae3677a82d127fcf479528a44d5e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NDE0MjQ5", "url": "https://github.com/uyuni-project/uyuni/pull/2981#pullrequestreview-546414249", "createdAt": "2020-12-07T18:20:14Z", "commit": {"oid": "f28791a067eeae3677a82d127fcf479528a44d5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxODoyMDoxNVrOIA0KrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxODoyMDoxNVrOIA0KrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzcyNTYxMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              product = find(:xpath, xpath)\n          \n          \n            \n              selected = product.find(:xpath, \"./div/input[@type='checkbox']\").checked?\n          \n          \n            \n              raise \"#{product['data-identifier']} is not checked\" unless selected\n          \n          \n            \n            within(xpath) do\n          \n          \n            \n              raise \"#{product} is not checked\" unless find(:xpath, \"./div/input[@type='checkbox']\").checked?\n          \n          \n            \n            end", "url": "https://github.com/uyuni-project/uyuni/pull/2981#discussion_r537725612", "createdAt": "2020-12-07T18:20:15Z", "author": {"login": "srbarrios"}, "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -511,8 +511,9 @@\n \n Then(/^I should see the \"(.*?)\" selected$/) do |product|\n   xpath = \"//span[contains(text(), '#{product}')]/ancestor::div[contains(@class, 'product-details-wrapper')]\"\n-  product_identifier = find(:xpath, xpath)['data-identifier']\n-  raise \"#{product_identifier} is not checked\" unless has_checked_field?('checkbox-for-' + product_identifier)\n+  product = find(:xpath, xpath)\n+  selected = product.find(:xpath, \"./div/input[@type='checkbox']\").checked?\n+  raise \"#{product['data-identifier']} is not checked\" unless selected", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f28791a067eeae3677a82d127fcf479528a44d5e"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f28791a067eeae3677a82d127fcf479528a44d5e", "author": {"user": {"login": "Bischoff", "name": "E Bischoff"}}, "url": "https://github.com/uyuni-project/uyuni/commit/f28791a067eeae3677a82d127fcf479528a44d5e", "committedDate": "2020-12-07T16:17:37Z", "message": "Faster and more robust checkbox test"}, "afterCommit": {"oid": "86ce225a67e5acae89a5cb0e5a0396bd28902fe1", "author": {"user": {"login": "Bischoff", "name": "E Bischoff"}}, "url": "https://github.com/uyuni-project/uyuni/commit/86ce225a67e5acae89a5cb0e5a0396bd28902fe1", "committedDate": "2020-12-08T12:42:31Z", "message": "Faster and more robust checkbox test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "86ce225a67e5acae89a5cb0e5a0396bd28902fe1", "author": {"user": {"login": "Bischoff", "name": "E Bischoff"}}, "url": "https://github.com/uyuni-project/uyuni/commit/86ce225a67e5acae89a5cb0e5a0396bd28902fe1", "committedDate": "2020-12-08T12:42:31Z", "message": "Faster and more robust checkbox test"}, "afterCommit": {"oid": "41c72c3192a1a52fbde428212be262baf35d01d3", "author": {"user": {"login": "Bischoff", "name": "E Bischoff"}}, "url": "https://github.com/uyuni-project/uyuni/commit/41c72c3192a1a52fbde428212be262baf35d01d3", "committedDate": "2020-12-08T12:43:32Z", "message": "Faster and more robust checkbox test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb68e93080289238f2e670b7f9da5d02dca1003c", "author": {"user": {"login": "Bischoff", "name": "E Bischoff"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fb68e93080289238f2e670b7f9da5d02dca1003c", "committedDate": "2020-12-08T14:37:21Z", "message": "Faster and more robust checkbox test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41c72c3192a1a52fbde428212be262baf35d01d3", "author": {"user": {"login": "Bischoff", "name": "E Bischoff"}}, "url": "https://github.com/uyuni-project/uyuni/commit/41c72c3192a1a52fbde428212be262baf35d01d3", "committedDate": "2020-12-08T12:43:32Z", "message": "Faster and more robust checkbox test"}, "afterCommit": {"oid": "fb68e93080289238f2e670b7f9da5d02dca1003c", "author": {"user": {"login": "Bischoff", "name": "E Bischoff"}}, "url": "https://github.com/uyuni-project/uyuni/commit/fb68e93080289238f2e670b7f9da5d02dca1003c", "committedDate": "2020-12-08T14:37:21Z", "message": "Faster and more robust checkbox test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 806, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}