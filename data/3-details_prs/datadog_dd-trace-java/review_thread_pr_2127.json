{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4NTQyNjY2", "number": 2127, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMTowOToxOFrOE99Kcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNzozMDoxOVrOE-wvCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzNDAwNjkwOnYy", "diffSide": "RIGHT", "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMTowOToxOFrOH66ZnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMToxMToyNFrOH66dwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUzNjI4NQ==", "bodyText": "tweak the log message to be \"{}. Dropping trace: {}\" if we're no longer counting them?", "url": "https://github.com/DataDog/dd-trace-java/pull/2127#discussion_r531536285", "createdAt": "2020-11-27T11:09:18Z", "author": {"login": "mcculls"}, "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java", "diffHunk": "@@ -143,14 +143,12 @@ public void write(final List<DDSpan> trace) {\n   }\n \n   private void handleDroppedTrace(final String reason, final List<DDSpan> trace) {\n-    incrementTraceCount();\n     log.debug(\"{}. Counted but dropping trace: {}\", reason, trace);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0e90e9ba36edcaad415e36a2a354f5edcc3536c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUzNzM0Ng==", "bodyText": "Actually they are counted via statsd", "url": "https://github.com/DataDog/dd-trace-java/pull/2127#discussion_r531537346", "createdAt": "2020-11-27T11:11:24Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java", "diffHunk": "@@ -143,14 +143,12 @@ public void write(final List<DDSpan> trace) {\n   }\n \n   private void handleDroppedTrace(final String reason, final List<DDSpan> trace) {\n-    incrementTraceCount();\n     log.debug(\"{}. Counted but dropping trace: {}\", reason, trace);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUzNjI4NQ=="}, "originalCommit": {"oid": "b0e90e9ba36edcaad415e36a2a354f5edcc3536c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzNDAwOTEwOnYy", "diffSide": "RIGHT", "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMTowOTo1OVrOH66a8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMTowOTo1OVrOH66a8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUzNjYyNg==", "bodyText": "as above, tweak log message to reflect we're not counting dropped traces any more", "url": "https://github.com/DataDog/dd-trace-java/pull/2127#discussion_r531536626", "createdAt": "2020-11-27T11:09:59Z", "author": {"login": "mcculls"}, "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java", "diffHunk": "@@ -143,14 +143,12 @@ public void write(final List<DDSpan> trace) {\n   }\n \n   private void handleDroppedTrace(final String reason, final List<DDSpan> trace) {\n-    incrementTraceCount();\n     log.debug(\"{}. Counted but dropping trace: {}\", reason, trace);\n     healthMetrics.onFailedPublish(UNSET);\n   }\n \n   private void handleDroppedTrace(\n       final String reason, final List<DDSpan> trace, final int samplingPriority) {\n-    incrementTraceCount();\n     log.debug(\"{}. Counted but dropping trace: {}\", reason, trace);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0e90e9ba36edcaad415e36a2a354f5edcc3536c"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MDAwOTAzOnYy", "diffSide": "RIGHT", "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/LoggingWriter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQwNzo0MDo0NFrOH7u3iQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMTo0MDoxOVrOH73Ulg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM5NTkxMw==", "bodyText": "Not \"LoggingWritier\" anymore?", "url": "https://github.com/DataDog/dd-trace-java/pull/2127#discussion_r532395913", "createdAt": "2020-11-30T07:40:44Z", "author": {"login": "lpriima"}, "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/LoggingWriter.java", "diffHunk": "@@ -49,6 +44,9 @@ public void close() {\n     log.info(\"close()\");\n   }\n \n+  @Override\n+  public void incrementTraceCount() {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c0c7c9d9c6a5460193b8840e182127a9c96387c"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUzNDQyMg==", "bodyText": "I'll leave this open to see if anyone else considers this was serving a purpose", "url": "https://github.com/DataDog/dd-trace-java/pull/2127#discussion_r532534422", "createdAt": "2020-11-30T11:40:19Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/LoggingWriter.java", "diffHunk": "@@ -49,6 +44,9 @@ public void close() {\n     log.info(\"close()\");\n   }\n \n+  @Override\n+  public void incrementTraceCount() {}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjM5NTkxMw=="}, "originalCommit": {"oid": "7c0c7c9d9c6a5460193b8840e182127a9c96387c"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MjQ1NjQzOnYy", "diffSide": "LEFT", "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNzozMDoxOVrOH8F3Fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxNzozNToxMlrOH8GDyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc3MjYzMQ==", "bodyText": "Since these are now no-ops, I suggest we should either keep the API calls or remove the method entirely.", "url": "https://github.com/DataDog/dd-trace-java/pull/2127#discussion_r532772631", "createdAt": "2020-11-30T17:30:19Z", "author": {"login": "tylerbenson"}, "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java", "diffHunk": "@@ -143,14 +143,12 @@ public void write(final List<DDSpan> trace) {\n   }\n \n   private void handleDroppedTrace(final String reason, final List<DDSpan> trace) {\n-    incrementTraceCount();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c0c7c9d9c6a5460193b8840e182127a9c96387c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc3NTg4MQ==", "bodyText": "There's a comment in CoreTracer about why we can't (I did it).", "url": "https://github.com/DataDog/dd-trace-java/pull/2127#discussion_r532775881", "createdAt": "2020-11-30T17:35:12Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/DDAgentWriter.java", "diffHunk": "@@ -143,14 +143,12 @@ public void write(final List<DDSpan> trace) {\n   }\n \n   private void handleDroppedTrace(final String reason, final List<DDSpan> trace) {\n-    incrementTraceCount();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjc3MjYzMQ=="}, "originalCommit": {"oid": "7c0c7c9d9c6a5460193b8840e182127a9c96387c"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4632, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}