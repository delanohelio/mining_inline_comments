{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMDEwNzQw", "number": 2151, "title": "clear timer histogram counts on flush", "bodyText": "allows to track continuously new max, p99", "createdAt": "2020-12-02T13:17:47Z", "url": "https://github.com/DataDog/dd-trace-java/pull/2151", "merged": true, "mergeCommit": {"oid": "cb2cca90d48bbe27ddbeed02df45c23540b7e974"}, "closed": true, "closedAt": "2020-12-02T17:13:55Z", "author": {"login": "raphaelgavache"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiObWIABqjQwNjIzMDUzNjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiP8FiAFqTU0MjkyNzQ2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "87a661e59f17f93275a696cca551109b2bcf7f3e", "author": {"user": {"login": "raphaelgavache", "name": "Raphael Gavache"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/87a661e59f17f93275a696cca551109b2bcf7f3e", "committedDate": "2020-12-02T13:16:42Z", "message": "Clear histogram count"}, "afterCommit": {"oid": "844b870d8e4a26506ad5a1a9665bae03cc10e0bc", "author": {"user": {"login": "raphaelgavache", "name": "Raphael Gavache"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/844b870d8e4a26506ad5a1a9665bae03cc10e0bc", "committedDate": "2020-12-02T13:19:02Z", "message": "Clear histogram count"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyODI3NzU1", "url": "https://github.com/DataDog/dd-trace-java/pull/2151#pullrequestreview-542827755", "createdAt": "2020-12-02T13:22:26Z", "commit": {"oid": "844b870d8e4a26506ad5a1a9665bae03cc10e0bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMzoyMjoyNlrOH9aq3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMzoyMjoyNlrOH9aq3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDE2MjE0MA==", "bodyText": "I think you're looking for histogram.reset()", "url": "https://github.com/DataDog/dd-trace-java/pull/2151#discussion_r534162140", "createdAt": "2020-12-02T13:22:26Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/monitor/Timer.java", "diffHunk": "@@ -80,5 +80,6 @@ public void flush() {\n     statsd.gauge(name, histogram.getValueAtPercentile(50), p50Tags);\n     statsd.gauge(name, histogram.getValueAtPercentile(99), p99Tags);\n     statsd.gauge(name, histogram.getMaxValue(), maxTags);\n+    histogram.clearCounts();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "844b870d8e4a26506ad5a1a9665bae03cc10e0bc"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "967c9d714c7340f7b79aecbaf46d1a33da4a1f7f", "author": {"user": {"login": "raphaelgavache", "name": "Raphael Gavache"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/967c9d714c7340f7b79aecbaf46d1a33da4a1f7f", "committedDate": "2020-12-02T14:32:20Z", "message": "Clear histogram count"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "844b870d8e4a26506ad5a1a9665bae03cc10e0bc", "author": {"user": {"login": "raphaelgavache", "name": "Raphael Gavache"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/844b870d8e4a26506ad5a1a9665bae03cc10e0bc", "committedDate": "2020-12-02T13:19:02Z", "message": "Clear histogram count"}, "afterCommit": {"oid": "967c9d714c7340f7b79aecbaf46d1a33da4a1f7f", "author": {"user": {"login": "raphaelgavache", "name": "Raphael Gavache"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/967c9d714c7340f7b79aecbaf46d1a33da4a1f7f", "committedDate": "2020-12-02T14:32:20Z", "message": "Clear histogram count"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyOTA0Mzky", "url": "https://github.com/DataDog/dd-trace-java/pull/2151#pullrequestreview-542904392", "createdAt": "2020-12-02T14:43:21Z", "commit": {"oid": "967c9d714c7340f7b79aecbaf46d1a33da4a1f7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyOTI3NDYw", "url": "https://github.com/DataDog/dd-trace-java/pull/2151#pullrequestreview-542927460", "createdAt": "2020-12-02T15:04:52Z", "commit": {"oid": "967c9d714c7340f7b79aecbaf46d1a33da4a1f7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2915, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}