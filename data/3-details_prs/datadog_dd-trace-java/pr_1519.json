{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MjI5NDA0", "number": 1519, "title": "OpenTracing no longer automatically added in `dd-java-agent`. Registers GlobalTracer instance via instrumentation if necessary.", "bodyText": "With this PR, if GlobalTracer is used, instrumentation will activate to automatically register a Tracer instance for it, but this behavior can be disabled.\nTo disable OpenTracing:\n\nSystem Property: -Ddd.integration.opentracing.enabled=false\nEnvironment Variable: DD_INTEGRATION_OPENTRACING_ENABLED=false\n\nThere are several classes that are now duplicated around the codebase.  I'm not sure of a good strategy to reduce that duplication.", "createdAt": "2020-06-01T21:41:16Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1519", "merged": true, "mergeCommit": {"oid": "9d9a9fd24c9721dca3808d6578be4648fad1e061"}, "closed": true, "closedAt": "2020-06-02T21:22:14Z", "author": {"login": "tylerbenson"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnVm3NgBqjMzOTc5MDkzNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnZZ72gFqTQyMjkzMDAzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb066a1fc16d9708e0989b89fc8ded1dcf269528", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/bb066a1fc16d9708e0989b89fc8ded1dcf269528", "committedDate": "2020-06-01T21:34:47Z", "message": "Add OpenTracing instrumentation for GlobalTracer"}, "afterCommit": {"oid": "77fe8a3dea096f22ce7cfc269387e451277541a9", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/77fe8a3dea096f22ce7cfc269387e451277541a9", "committedDate": "2020-06-02T14:19:25Z", "message": "Fix build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "529bb1dad996a4fd9a32da9e0af59d5a4150a318", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/529bb1dad996a4fd9a32da9e0af59d5a4150a318", "committedDate": "2020-06-02T17:22:45Z", "message": "Update dd-trace-ot to use internal api instead of dd-trace-core where possible."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5288e126dcea8ae99eb02c8e88b802c5bc1ec2a", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c5288e126dcea8ae99eb02c8e88b802c5bc1ec2a", "committedDate": "2020-06-02T17:22:45Z", "message": "Remove OpenTracing dependency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b52ec52841b0b37b6bb76dfe663bee988b5541b9", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/b52ec52841b0b37b6bb76dfe663bee988b5541b9", "committedDate": "2020-06-02T17:22:45Z", "message": "Add OpenTracing instrumentation for GlobalTracer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ea1927f62a5c51908280780fbb672aacf8ff094", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/1ea1927f62a5c51908280780fbb672aacf8ff094", "committedDate": "2020-06-02T17:22:45Z", "message": "Fix build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77fe8a3dea096f22ce7cfc269387e451277541a9", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/77fe8a3dea096f22ce7cfc269387e451277541a9", "committedDate": "2020-06-02T14:19:25Z", "message": "Fix build"}, "afterCommit": {"oid": "1ea1927f62a5c51908280780fbb672aacf8ff094", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/1ea1927f62a5c51908280780fbb672aacf8ff094", "committedDate": "2020-06-02T17:22:45Z", "message": "Fix build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyOTMwMDMw", "url": "https://github.com/DataDog/dd-trace-java/pull/1519#pullrequestreview-422930030", "createdAt": "2020-06-02T17:59:48Z", "commit": {"oid": "1ea1927f62a5c51908280780fbb672aacf8ff094"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNzo1OTo0OFrOGd9aew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxODowNTo1MFrOGd9vPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA2ODA5MQ==", "bodyText": "I'm not sure this is necessary.  We already test delegation to the bootstrap for DD classes", "url": "https://github.com/DataDog/dd-trace-java/pull/1519#discussion_r434068091", "createdAt": "2020-06-02T17:59:48Z", "author": {"login": "randomanderson"}, "path": "dd-java-agent/agent-tooling/src/main/java/datadog/trace/agent/tooling/ClassLoaderMatcher.java", "diffHunk": "@@ -86,7 +86,7 @@ private static boolean shouldSkipClass(final ClassLoader loader) {\n      */\n     private static boolean delegatesToBootstrap(final ClassLoader loader) {\n       boolean delegates = true;\n-      if (!loadsExpectedClass(loader, GlobalTracer.class)) {\n+      if (!loadsExpectedClass(loader, Tracer.class)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ea1927f62a5c51908280780fbb672aacf8ff094"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA3MzQwNw==", "bodyText": "Is this necessary?  Also, why is it 0.31.0 when we're using 0.32.0 everywhere else", "url": "https://github.com/DataDog/dd-trace-java/pull/1519#discussion_r434073407", "createdAt": "2020-06-02T18:05:50Z", "author": {"login": "randomanderson"}, "path": "dd-java-agent/dd-java-agent.gradle", "diffHunk": "@@ -97,16 +114,15 @@ modifyPom {\n dependencies {\n   testCompile project(':dd-java-agent:agent-bootstrap')\n   testCompile project(':dd-trace-api')\n-  testCompile project(':dd-trace-ot')\n   testCompile project(':dd-trace-core')\n   testCompile project(':utils:test-utils')\n \n   testCompile deps.testLogging\n   testCompile deps.guava\n+  testCompile group: 'io.opentracing', name: 'opentracing-util', version: '0.31.0'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ea1927f62a5c51908280780fbb672aacf8ff094"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2329, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}