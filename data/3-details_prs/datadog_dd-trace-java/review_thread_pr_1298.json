{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NDYwODkw", "number": 1298, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMzoxMDo0NlrODlnt3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMzoxMDo0NlrODlnt3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNzc0NjIyOnYy", "diffSide": "RIGHT", "path": "dd-java-agent/instrumentation/jedis-1.4/src/main/java/datadog/trace/instrumentation/jedis/JedisInstrumentation.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMzoxMDo0NlrOFynejA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMDowODoyM1rOFyog_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODYxOTkxNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // Avoid matching 3.x\n          \n          \n            \n                return not(hasClassesNamed(\"redis.clients.jedis.commands.ProtocolCommand\"));\n          \n          \n            \n                // Avoid matching 3.x\n          \n          \n            \n                return not(hasClassesNamed(\"redis.clients.jedis.commands.ProtocolCommand\"))\n          \n          \n            \n                    // Optimization for expensive typeMatcher.\n          \n          \n            \n                    .and(hasClassesNamed(\"rediis.clients.jedis.Protocol\"));\n          \n      \n    \n    \n  \n\nThe non-double-negative part is missing", "url": "https://github.com/DataDog/dd-trace-java/pull/1298#discussion_r388619916", "createdAt": "2020-03-05T23:10:46Z", "author": {"login": "randomanderson"}, "path": "dd-java-agent/instrumentation/jedis-1.4/src/main/java/datadog/trace/instrumentation/jedis/JedisInstrumentation.java", "diffHunk": "@@ -34,9 +34,8 @@ public JedisInstrumentation() {\n \n   @Override\n   public ElementMatcher<ClassLoader> classLoaderMatcher() {\n-    return classLoaderHasNoResources(\"redis/clients/jedis/commands/ProtocolCommand.class\")\n-        // Optimization for expensive typeMatcher.\n-        .and(not(classLoaderHasNoResources(\"redis/clients/jedis/Protocol.class\")));\n+    // Avoid matching 3.x\n+    return not(hasClassesNamed(\"redis.clients.jedis.commands.ProtocolCommand\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb782fdd0ea43baf060cbce3368312f17f38164c"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODYzNjkyNQ==", "bodyText": "This is actually intentional.  JedisInstrumentation was doing a simple named matcher, so adding the classload matcher in unnecessary.  (It was added by accident.)", "url": "https://github.com/DataDog/dd-trace-java/pull/1298#discussion_r388636925", "createdAt": "2020-03-06T00:08:23Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/instrumentation/jedis-1.4/src/main/java/datadog/trace/instrumentation/jedis/JedisInstrumentation.java", "diffHunk": "@@ -34,9 +34,8 @@ public JedisInstrumentation() {\n \n   @Override\n   public ElementMatcher<ClassLoader> classLoaderMatcher() {\n-    return classLoaderHasNoResources(\"redis/clients/jedis/commands/ProtocolCommand.class\")\n-        // Optimization for expensive typeMatcher.\n-        .and(not(classLoaderHasNoResources(\"redis/clients/jedis/Protocol.class\")));\n+    // Avoid matching 3.x\n+    return not(hasClassesNamed(\"redis.clients.jedis.commands.ProtocolCommand\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODYxOTkxNg=="}, "originalCommit": {"oid": "cb782fdd0ea43baf060cbce3368312f17f38164c"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 384, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}