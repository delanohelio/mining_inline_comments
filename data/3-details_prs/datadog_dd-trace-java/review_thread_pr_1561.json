{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxNTI2ODQx", "number": 1561, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNDoxNjo0MlrOED5v0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNDoxNjo0MlrOED5v0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNTI3MzE1OnYy", "diffSide": "RIGHT", "path": "dd-java-agent/src/main/java/datadog/trace/bootstrap/AgentBootstrap.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNDoxNjo0MlrOGhMUBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjoyNDoxNFrOGhSjlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ1NzkyNg==", "bodyText": "Would this be different if the class was subclassed or something?  Maybe make AgentBootstrap final instead?", "url": "https://github.com/DataDog/dd-trace-java/pull/1561#discussion_r437457926", "createdAt": "2020-06-09T14:16:42Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/src/main/java/datadog/trace/bootstrap/AgentBootstrap.java", "diffHunk": "@@ -40,6 +41,7 @@\n  * </ul>\n  */\n public class AgentBootstrap {\n+  private static final Class<?> thisClass = MethodHandles.lookup().lookupClass();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "000f342dbd773a268f979fd1938ca1b026737f9c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ3MTU2NA==", "bodyText": "No. thisClass field will always return AgentBootstrap.class. All static context is not part of inheritance. That's why Scala separates class and object to avoid this confusion.\nBut we can mark this and by default all classes final: it wouldn't hurt.", "url": "https://github.com/DataDog/dd-trace-java/pull/1561#discussion_r437471564", "createdAt": "2020-06-09T14:34:20Z", "author": {"login": "lpriima"}, "path": "dd-java-agent/src/main/java/datadog/trace/bootstrap/AgentBootstrap.java", "diffHunk": "@@ -40,6 +41,7 @@\n  * </ul>\n  */\n public class AgentBootstrap {\n+  private static final Class<?> thisClass = MethodHandles.lookup().lookupClass();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ1NzkyNg=="}, "originalCommit": {"oid": "000f342dbd773a268f979fd1938ca1b026737f9c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ4MjEyNQ==", "bodyText": "Ah, I missed that it was static.  So why use MethodHandles instead of AgentBootstrap.class?", "url": "https://github.com/DataDog/dd-trace-java/pull/1561#discussion_r437482125", "createdAt": "2020-06-09T14:47:38Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/src/main/java/datadog/trace/bootstrap/AgentBootstrap.java", "diffHunk": "@@ -40,6 +41,7 @@\n  * </ul>\n  */\n public class AgentBootstrap {\n+  private static final Class<?> thisClass = MethodHandles.lookup().lookupClass();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ1NzkyNg=="}, "originalCommit": {"oid": "000f342dbd773a268f979fd1938ca1b026737f9c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUyNDcyMQ==", "bodyText": "thisClass field was to avoid copy paste . But it can be\nprivate static final Class<?> thisClass = AgentBootstrap.class;\nI don't have strong opinion about which version would be better", "url": "https://github.com/DataDog/dd-trace-java/pull/1561#discussion_r437524721", "createdAt": "2020-06-09T15:32:56Z", "author": {"login": "lpriima"}, "path": "dd-java-agent/src/main/java/datadog/trace/bootstrap/AgentBootstrap.java", "diffHunk": "@@ -40,6 +41,7 @@\n  * </ul>\n  */\n public class AgentBootstrap {\n+  private static final Class<?> thisClass = MethodHandles.lookup().lookupClass();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ1NzkyNg=="}, "originalCommit": {"oid": "000f342dbd773a268f979fd1938ca1b026737f9c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU0OTE5NA==", "bodyText": "@tylerbenson Which one you prefer ?", "url": "https://github.com/DataDog/dd-trace-java/pull/1561#discussion_r437549194", "createdAt": "2020-06-09T16:06:59Z", "author": {"login": "lpriima"}, "path": "dd-java-agent/src/main/java/datadog/trace/bootstrap/AgentBootstrap.java", "diffHunk": "@@ -40,6 +41,7 @@\n  * </ul>\n  */\n public class AgentBootstrap {\n+  private static final Class<?> thisClass = MethodHandles.lookup().lookupClass();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ1NzkyNg=="}, "originalCommit": {"oid": "000f342dbd773a268f979fd1938ca1b026737f9c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2MDIxMw==", "bodyText": "Either is fine with me.", "url": "https://github.com/DataDog/dd-trace-java/pull/1561#discussion_r437560213", "createdAt": "2020-06-09T16:24:14Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/src/main/java/datadog/trace/bootstrap/AgentBootstrap.java", "diffHunk": "@@ -40,6 +41,7 @@\n  * </ul>\n  */\n public class AgentBootstrap {\n+  private static final Class<?> thisClass = MethodHandles.lookup().lookupClass();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ1NzkyNg=="}, "originalCommit": {"oid": "000f342dbd773a268f979fd1938ca1b026737f9c"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 223, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}