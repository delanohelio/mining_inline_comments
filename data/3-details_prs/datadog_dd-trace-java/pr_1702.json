{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1MjE4NzEy", "number": 1702, "title": "MLT - Avoid sending only base stacktrace", "bodyText": "Also increase span priority for MLT traces and use existing span priority as a signal for the heuristic.\nIncludes some changes for the decoder to allow iteration in both directions.", "createdAt": "2020-07-22T16:15:08Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1702", "merged": true, "mergeCommit": {"oid": "359307dfcb7e61553e4253d5b06d1043aa9b51d1"}, "closed": true, "closedAt": "2020-07-22T21:19:10Z", "author": {"login": "tylerbenson"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3cerXAH2gAyNDU1MjE4NzEyOjJmYTUxMDZiZDQ0ZTFiNzI5ZDY5YzdmY2M4MWMxNTFiODk1YjlhNjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3hT1fgBqjM1Nzc1NDY3ODc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2fa5106bd44e1b729d69c7fcc81c151b895b9a69", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/2fa5106bd44e1b729d69c7fcc81c151b895b9a69", "committedDate": "2020-07-22T15:22:46Z", "message": "Split ScopeStackCollector part into abstract class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "159896df276c7c4750b65536b2f485fcbe48629f", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/159896df276c7c4750b65536b2f485fcbe48629f", "committedDate": "2020-07-22T15:57:54Z", "message": "Avoid adding MLT data if only base stacktrace provided\n\nAlso increase span priority to avoid being discarded."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70d7a468652bc39ed00d8fcadc57819136b152a7", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/70d7a468652bc39ed00d8fcadc57819136b152a7", "committedDate": "2020-07-22T17:12:11Z", "message": "Allow stack iteration from both leaf and root."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58dc838c0ef2cb8cb95a1ac907a0afff647e8af9", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/58dc838c0ef2cb8cb95a1ac907a0afff647e8af9", "committedDate": "2020-07-22T16:11:31Z", "message": "Use sampling priority as a signal to increase chance of MLT activation.\n\nAlso increase heuristic sampling rate limiter."}, "afterCommit": {"oid": "81fa0d59d4728b882719f77c62bdffb2afb0ccc7", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/81fa0d59d4728b882719f77c62bdffb2afb0ccc7", "committedDate": "2020-07-22T17:12:11Z", "message": "Use sampling priority as a signal to increase chance of MLT activation.\n\nAlso increase heuristic sampling rate limiter."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNTkyMTUz", "url": "https://github.com/DataDog/dd-trace-java/pull/1702#pullrequestreview-453592153", "createdAt": "2020-07-22T18:48:41Z", "commit": {"oid": "81fa0d59d4728b882719f77c62bdffb2afb0ccc7"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxODo0ODo0MVrOG1vtFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxODo0ODo0MVrOG1vtFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTAwOTMwMQ==", "bodyText": "Why not just span.getSamplingPriority()?", "url": "https://github.com/DataDog/dd-trace-java/pull/1702#discussion_r459009301", "createdAt": "2020-07-22T18:48:41Z", "author": {"login": "randomanderson"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/scopemanager/TraceProfilingScopeInterceptor.java", "diffHunk": "@@ -111,6 +112,11 @@ private boolean maybeInteresting(final AgentSpan span) {\n         return true;\n       }\n \n+      if (span.context().getSamplingPriority() == PrioritySampling.USER_KEEP) {\n+        // The trace was manually identified as important, so more likely interesting.\n+        return true;\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81fa0d59d4728b882719f77c62bdffb2afb0ccc7"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1890750d4b1ee0e933d4a70892146428aede968", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c1890750d4b1ee0e933d4a70892146428aede968", "committedDate": "2020-07-22T19:01:11Z", "message": "Use sampling priority as a signal to increase chance of MLT activation.\n\nAlso increase heuristic sampling rate limiter."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2b178434fbcfce62d43cbb6fcecc40d410a99a9", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/f2b178434fbcfce62d43cbb6fcecc40d410a99a9", "committedDate": "2020-07-22T18:49:17Z", "message": "fix tests"}, "afterCommit": {"oid": "c1890750d4b1ee0e933d4a70892146428aede968", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c1890750d4b1ee0e933d4a70892146428aede968", "committedDate": "2020-07-22T19:01:11Z", "message": "Use sampling priority as a signal to increase chance of MLT activation.\n\nAlso increase heuristic sampling rate limiter."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da218c9a75fe808dd3d943645b2d6a30831242df", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/da218c9a75fe808dd3d943645b2d6a30831242df", "committedDate": "2020-07-22T19:15:48Z", "message": "It actually does need a null check."}, "afterCommit": {"oid": "cfba71a3cf4e7264c43e2ec33121faf0b5e23f36", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/cfba71a3cf4e7264c43e2ec33121faf0b5e23f36", "committedDate": "2020-07-22T19:49:13Z", "message": "It actually does need a null check.\n\nAnd reduce code coverage requirement."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71162a5be5779302d9c757ee1d2f78efd290b879", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/71162a5be5779302d9c757ee1d2f78efd290b879", "committedDate": "2020-07-22T21:00:18Z", "message": "It actually does need a null check.\n\nAnd reduce code coverage requirement."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cfba71a3cf4e7264c43e2ec33121faf0b5e23f36", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/cfba71a3cf4e7264c43e2ec33121faf0b5e23f36", "committedDate": "2020-07-22T19:49:13Z", "message": "It actually does need a null check.\n\nAnd reduce code coverage requirement."}, "afterCommit": {"oid": "71162a5be5779302d9c757ee1d2f78efd290b879", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/71162a5be5779302d9c757ee1d2f78efd290b879", "committedDate": "2020-07-22T21:00:18Z", "message": "It actually does need a null check.\n\nAnd reduce code coverage requirement."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2022, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}