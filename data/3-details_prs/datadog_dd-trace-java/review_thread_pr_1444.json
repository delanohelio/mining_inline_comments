{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MDQ3Njg0", "number": 1444, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjoxNjoyOFrOD7Nt3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzoxMzozMFrOD7O7pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNDE3MzExOnYy", "diffSide": "LEFT", "path": "dd-trace-core/src/main/java/datadog/trace/core/DDSpan.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjoxNjoyOFrOGTZrwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjoxNjoyOFrOGTZrwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk5NjkyOA==", "bodyText": "Nice catch!", "url": "https://github.com/DataDog/dd-trace-java/pull/1444#discussion_r422996928", "createdAt": "2020-05-11T12:16:28Z", "author": {"login": "bantonsson"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/DDSpan.java", "diffHunk": "@@ -67,8 +73,6 @@\n       // Timestamp have come from an external clock, so use startTimeNano as a flag\n       startTimeNano = 0;\n     }\n-\n-    context.getTrace().registerSpan(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e37db8e1b8c29a5c0719aae08698b447d66ab5cf"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNDE3ODc4OnYy", "diffSide": "RIGHT", "path": "dd-trace-core/src/main/java/datadog/trace/core/DDSpan.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjoxODoxMlrOGTZvVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjoyMTo1NVrOGTZ3BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk5Nzg0Ng==", "bodyText": "Should this have package reachability like the constructor, and should the constructor become private to avoid creating without registering?", "url": "https://github.com/DataDog/dd-trace-java/pull/1444#discussion_r422997846", "createdAt": "2020-05-11T12:18:12Z", "author": {"login": "bantonsson"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/DDSpan.java", "diffHunk": "@@ -24,6 +24,12 @@\n @Slf4j\n public class DDSpan implements MutableSpan, AgentSpan {\n \n+  public static DDSpan create(final long timestampMicro, final DDSpanContext context) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e37db8e1b8c29a5c0719aae08698b447d66ab5cf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk5OTgxMw==", "bodyText": "I think it should, yes.", "url": "https://github.com/DataDog/dd-trace-java/pull/1444#discussion_r422999813", "createdAt": "2020-05-11T12:21:55Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/DDSpan.java", "diffHunk": "@@ -24,6 +24,12 @@\n @Slf4j\n public class DDSpan implements MutableSpan, AgentSpan {\n \n+  public static DDSpan create(final long timestampMicro, final DDSpanContext context) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk5Nzg0Ng=="}, "originalCommit": {"oid": "e37db8e1b8c29a5c0719aae08698b447d66ab5cf"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNDM3MjIxOnYy", "diffSide": "RIGHT", "path": "dd-trace-core/src/main/java/datadog/trace/core/CoreTracer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzoxMzozMFrOGTbomA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzoyMDo1OVrOGTb7XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAyODg4OA==", "bodyText": "This should probably not be a static import since there are multiple $CLASS.create methods used in this class", "url": "https://github.com/DataDog/dd-trace-java/pull/1444#discussion_r423028888", "createdAt": "2020-05-11T13:13:30Z", "author": {"login": "devinsba"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/CoreTracer.java", "diffHunk": "@@ -479,7 +481,7 @@ public CoreSpanBuilder ignoreActiveSpan() {\n     }\n \n     private DDSpan buildSpan() {\n-      return new DDSpan(timestampMicro, buildSpanContext());\n+      return create(timestampMicro, buildSpanContext());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59feb49e25d1351411f6946e9cab1443b3bedfff"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAzMzY5Mw==", "bodyText": "That's fair enough, I've changed that.", "url": "https://github.com/DataDog/dd-trace-java/pull/1444#discussion_r423033693", "createdAt": "2020-05-11T13:20:59Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/CoreTracer.java", "diffHunk": "@@ -479,7 +481,7 @@ public CoreSpanBuilder ignoreActiveSpan() {\n     }\n \n     private DDSpan buildSpan() {\n-      return new DDSpan(timestampMicro, buildSpanContext());\n+      return create(timestampMicro, buildSpanContext());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAyODg4OA=="}, "originalCommit": {"oid": "59feb49e25d1351411f6946e9cab1443b3bedfff"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 307, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}