{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMTc5NTMy", "number": 1482, "title": "Add a context event type support for MLT sampler JFR recording", "bodyText": "This simple patch adds the ability to write the 'context' event so we can track the current tracing context for each sampled thread.\nThe context is wrapped in its own type to make further evolution easier.", "createdAt": "2020-05-21T06:39:43Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1482", "merged": true, "mergeCommit": {"oid": "444420048f296b867eda52360ebab184b5f507f1"}, "closed": true, "closedAt": "2020-05-22T08:14:53Z", "author": {"login": "jbachorik"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjX0N6gH2gAyNDIxMTc5NTMyOjVhYmVhN2ExMTc3NzFmZTU3ZTQ1Mjg2ZmZiMTRlODQ3NWFkYmRmMGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjso90AFqTQxNjY4NjY5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5abea7a117771fe57e45286ffb14e8475adbdf0a", "author": {"user": {"login": "jbachorik", "name": "Jaroslav Bachorik"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/5abea7a117771fe57e45286ffb14e8475adbdf0a", "committedDate": "2020-05-21T06:38:17Z", "message": "Add a context event type support for MLT sampler JFR recording"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1OTMxMTIw", "url": "https://github.com/DataDog/dd-trace-java/pull/1482#pullrequestreview-415931120", "createdAt": "2020-05-21T07:20:04Z", "commit": {"oid": "5abea7a117771fe57e45286ffb14e8475adbdf0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNzoyMDowNFrOGYoz5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNzoyMDowNFrOGYoz5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ4NzY1NQ==", "bodyText": "nit/general interest: is there any way to avoid the capture?", "url": "https://github.com/DataDog/dd-trace-java/pull/1482#discussion_r428487655", "createdAt": "2020-05-21T07:20:04Z", "author": {"login": "richardstartin"}, "path": "dd-java-agent/agent-profiling/profiling-controller/src/main/java/com/datadog/profiling/mlt/SamplerWriter.java", "diffHunk": "@@ -52,6 +71,26 @@ public void writeThreadSample(ThreadInfo threadInfo) {\n                 }));\n   }\n \n+  private Type registerContextEventType() {\n+    return recording.registerEventType(\n+        CONTEXT_EVENT_NAME,\n+        builder -> {\n+          builder.addField(\"traceId\", Types.Builtin.STRING);\n+        });\n+  }\n+\n+  private TypedValue getThread(Thread thread) {\n+    return recording\n+        .getType(Types.JDK.THREAD)\n+        .asValue(\n+            builder -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5abea7a117771fe57e45286ffb14e8475adbdf0a"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2Njg2Njkz", "url": "https://github.com/DataDog/dd-trace-java/pull/1482#pullrequestreview-416686693", "createdAt": "2020-05-22T06:54:00Z", "commit": {"oid": "5abea7a117771fe57e45286ffb14e8475adbdf0a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2285, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}