{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0OTI4MTI4", "number": 1998, "title": "Exclude internal agent threads from exception profiling", "bodyText": "Profiling of agent threads can be re-enabled by system property:\n-Ddd.profiling.exclude.agent-threads=false\n\nor by environment variable:\nDD_PROFILING_EXCLUDE_AGENT_THREADS=false", "createdAt": "2020-10-16T15:28:25Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1998", "merged": true, "mergeCommit": {"oid": "45944eca494c8fe87489e52a7f73d3c9267ed704"}, "closed": true, "closedAt": "2020-10-16T17:33:39Z", "author": {"login": "mcculls"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTH8WZgH2gAyNTA0OTI4MTI4OmNjMDdkNjA4ZDdjYzU1YjY4MWMwNDg0YWRjODg5MTQ1ZDgwMTNjMmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUFF5MgFqTUxMTgzMDM2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cc07d608d7cc55b681c0484adc889145d8013c2a", "author": {"user": {"login": "mcculls", "name": "Stuart McCulloch"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/cc07d608d7cc55b681c0484adc889145d8013c2a", "committedDate": "2020-10-16T15:17:03Z", "message": "Exclude internal agent threads from exception profiling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNTg4NDQ2", "url": "https://github.com/DataDog/dd-trace-java/pull/1998#pullrequestreview-510588446", "createdAt": "2020-10-16T15:41:29Z", "commit": {"oid": "cc07d608d7cc55b681c0484adc889145d8013c2a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNTo0MToyOVrOHjFy9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNTo0MToyOVrOHjFy9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU1NzE3Mw==", "bodyText": "what do people think about using == here instead of equals?", "url": "https://github.com/DataDog/dd-trace-java/pull/1998#discussion_r506557173", "createdAt": "2020-10-16T15:41:29Z", "author": {"login": "mcculls"}, "path": "dd-java-agent/instrumentation/exception-profiling/src/main/java11/datadog/exceptions/instrumentation/ThrowableInstanceAdvice.java", "diffHunk": "@@ -17,6 +19,12 @@ public static void onExit(@Advice.This final Throwable t) {\n      */\n     if (ThrowableInstanceAdviceHelper.enterHandler()) {\n       try {\n+        /*\n+         * Exclude internal agent threads from exception profiling.\n+         */\n+        if (AGENT_THREAD_GROUP.equals(Thread.currentThread().getThreadGroup())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc07d608d7cc55b681c0484adc889145d8013c2a"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNjAxMzU0", "url": "https://github.com/DataDog/dd-trace-java/pull/1998#pullrequestreview-510601354", "createdAt": "2020-10-16T15:57:54Z", "commit": {"oid": "cc07d608d7cc55b681c0484adc889145d8013c2a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNjA3NzIz", "url": "https://github.com/DataDog/dd-trace-java/pull/1998#pullrequestreview-510607723", "createdAt": "2020-10-16T16:06:01Z", "commit": {"oid": "cc07d608d7cc55b681c0484adc889145d8013c2a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03fed6f079d4f43c499ac5a1e1f4a726bbacc8ad", "author": {"user": {"login": "mcculls", "name": "Stuart McCulloch"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/03fed6f079d4f43c499ac5a1e1f4a726bbacc8ad", "committedDate": "2020-10-16T16:25:54Z", "message": "Add flag to exclude agent threads from profiling (default: true)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNjI4MDI2", "url": "https://github.com/DataDog/dd-trace-java/pull/1998#pullrequestreview-510628026", "createdAt": "2020-10-16T16:32:11Z", "commit": {"oid": "03fed6f079d4f43c499ac5a1e1f4a726bbacc8ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExODMwMzY3", "url": "https://github.com/DataDog/dd-trace-java/pull/1998#pullrequestreview-511830367", "createdAt": "2020-10-19T14:31:40Z", "commit": {"oid": "03fed6f079d4f43c499ac5a1e1f4a726bbacc8ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDozMTo0MVrOHkRolA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDozMTo0MVrOHkRolA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc5OTcwMA==", "bodyText": "I think this should have been dd-trace-java since this is used by dd-trace-ot as well.", "url": "https://github.com/DataDog/dd-trace-java/pull/1998#discussion_r507799700", "createdAt": "2020-10-19T14:31:41Z", "author": {"login": "tylerbenson"}, "path": "internal-api/src/main/java/datadog/trace/util/DaemonThreadFactory.java", "diffHunk": "@@ -4,6 +4,8 @@\n \n /** A {@link ThreadFactory} implementation that starts all {@link Thread} as daemons. */\n public final class DaemonThreadFactory implements ThreadFactory {\n+  public static final ThreadGroup AGENT_THREAD_GROUP = new ThreadGroup(\"dd-java-agent\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03fed6f079d4f43c499ac5a1e1f4a726bbacc8ad"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2994, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}