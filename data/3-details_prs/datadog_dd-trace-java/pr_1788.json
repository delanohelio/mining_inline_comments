{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNzg1NjY2", "number": 1788, "title": "Fix double read of shared atomic in reactor instrumentation", "bodyText": "Occasional NPEs when things race.", "createdAt": "2020-08-20T09:30:55Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1788", "merged": true, "mergeCommit": {"oid": "a99a90f4eaa1c698d8fb3f82072cde0bdff6f9b2"}, "closed": true, "closedAt": "2020-08-20T13:32:56Z", "author": {"login": "bantonsson"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAsy3YgH2gAyNDcwNzg1NjY2OmM5NjlhZDZkZjk1ZWVlY2Q2YjNjZjlhYmE1MDdmZTk4NzUyZGU3M2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAwPwGgFqTQ3MTYxNTI1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c969ad6df95eeecd6b3cf9aba507fe98752de73d", "author": {"user": {"login": "bantonsson", "name": "Bj\u00f6rn Antonsson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c969ad6df95eeecd6b3cf9aba507fe98752de73d", "committedDate": "2020-08-20T09:28:37Z", "message": "Fix double read of shared atomic in reactor instrumentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNDIyMTYz", "url": "https://github.com/DataDog/dd-trace-java/pull/1788#pullrequestreview-471422163", "createdAt": "2020-08-20T09:32:08Z", "commit": {"oid": "c969ad6df95eeecd6b3cf9aba507fe98752de73d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwOTozMjowOVrOHD3UBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwOTozMjowOVrOHD3UBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzgxNDAyMw==", "bodyText": "This is just cleanup, of using the thing we actually read 4 lines above.", "url": "https://github.com/DataDog/dd-trace-java/pull/1788#discussion_r473814023", "createdAt": "2020-08-20T09:32:09Z", "author": {"login": "bantonsson"}, "path": "dd-java-agent/instrumentation/reactor-core-3.1/src/main/java8/datadog/trace/instrumentation/reactor/core/TracingSubscriber.java", "diffHunk": "@@ -42,7 +42,7 @@ public TracingSubscriber(final AgentSpan upstreamSpan, final CoreSubscriber<T> d\n       if (downstreamScope != null) {\n         downstreamScope.setAsyncPropagation(true);\n         // create a hard reference to the trace that we don't want reported until we are done\n-        continuation.set(activeScope().capture());\n+        continuation.set(downstreamScope.capture());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c969ad6df95eeecd6b3cf9aba507fe98752de73d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNDI1MjMy", "url": "https://github.com/DataDog/dd-trace-java/pull/1788#pullrequestreview-471425232", "createdAt": "2020-08-20T09:36:39Z", "commit": {"oid": "c969ad6df95eeecd6b3cf9aba507fe98752de73d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNjE1MjU2", "url": "https://github.com/DataDog/dd-trace-java/pull/1788#pullrequestreview-471615256", "createdAt": "2020-08-20T13:29:53Z", "commit": {"oid": "c969ad6df95eeecd6b3cf9aba507fe98752de73d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2148, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}