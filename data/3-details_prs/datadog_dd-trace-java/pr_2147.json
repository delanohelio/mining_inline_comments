{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNTY1NTU5", "number": 2147, "title": "Fix CassandraClientTest flakiness", "bodyText": "This fixes the race with callbackExecuted.get() and the completion of the trace by using a CountDownLatch.  Additionally, I prophylactically changed the test to use a random port even though port conflicts haven't historically been an issue with this test.", "createdAt": "2020-12-01T20:47:02Z", "url": "https://github.com/DataDog/dd-trace-java/pull/2147", "merged": true, "mergeCommit": {"oid": "ff239d7c722eb80e9a55c54fe76959a2a02f5096"}, "closed": true, "closedAt": "2020-12-01T22:36:19Z", "author": {"login": "randomanderson"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiAVWlgFqTU0MjI4NzI0Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiA-y7gBqjQwNTkzNTI5OTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMjg3MjQy", "url": "https://github.com/DataDog/dd-trace-java/pull/2147#pullrequestreview-542287242", "createdAt": "2020-12-01T20:53:59Z", "commit": {"oid": "d9ec53a808231fb35b08c67f417608c83a5db138"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMjg3MjUy", "url": "https://github.com/DataDog/dd-trace-java/pull/2147#pullrequestreview-542287252", "createdAt": "2020-12-01T20:54:00Z", "commit": {"oid": "d9ec53a808231fb35b08c67f417608c83a5db138"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMjkyODYy", "url": "https://github.com/DataDog/dd-trace-java/pull/2147#pullrequestreview-542292862", "createdAt": "2020-12-01T21:01:56Z", "commit": {"oid": "d9ec53a808231fb35b08c67f417608c83a5db138"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMjk3MDQy", "url": "https://github.com/DataDog/dd-trace-java/pull/2147#pullrequestreview-542297042", "createdAt": "2020-12-01T21:08:12Z", "commit": {"oid": "d9ec53a808231fb35b08c67f417608c83a5db138"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQyMTowODoxM1rOH8_0bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQyMTowODoxM1rOH8_0bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzcyMjIyMQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/DataDog/dd-trace-java/pull/2147#discussion_r533722221", "createdAt": "2020-12-01T21:08:13Z", "author": {"login": "lpriima"}, "path": "dd-java-agent/instrumentation/datastax-cassandra-3/src/test/groovy/CassandraClientTest.groovy", "diffHunk": "@@ -32,10 +35,10 @@ class CassandraClientTest extends AgentTestRunner {\n      started in container like we do for memcached. Note: this will complicate things because\n      tests would have to assume they run under shared Cassandra and act accordingly.\n       */\n-    EmbeddedCassandraServerHelper.startEmbeddedCassandra(120000L)\n+    EmbeddedCassandraServerHelper.startEmbeddedCassandra(EmbeddedCassandraServerHelper.CASSANDRA_RNDPORT_YML_FILE, 120000L)\n \n     cluster = EmbeddedCassandraServerHelper.getCluster()\n-\n+    port = EmbeddedCassandraServerHelper.getNativeTransportPort()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9ec53a808231fb35b08c67f417608c83a5db138"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42117aa35df8e093ad5f808e36f83273209a0727", "author": {"user": {"login": "randomanderson", "name": "Laplie Anderson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/42117aa35df8e093ad5f808e36f83273209a0727", "committedDate": "2020-12-01T21:34:26Z", "message": "Fix CassandraClientTest flakiness"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d9ec53a808231fb35b08c67f417608c83a5db138", "author": {"user": {"login": "randomanderson", "name": "Laplie Anderson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/d9ec53a808231fb35b08c67f417608c83a5db138", "committedDate": "2020-12-01T20:43:55Z", "message": "Fix CassandraClientTest flakiness"}, "afterCommit": {"oid": "42117aa35df8e093ad5f808e36f83273209a0727", "author": {"user": {"login": "randomanderson", "name": "Laplie Anderson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/42117aa35df8e093ad5f808e36f83273209a0727", "committedDate": "2020-12-01T21:34:26Z", "message": "Fix CassandraClientTest flakiness"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2907, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}