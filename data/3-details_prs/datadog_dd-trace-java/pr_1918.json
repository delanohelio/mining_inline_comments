{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MTEzMjQ5", "number": 1918, "title": "Support 'dd.trace.startup.logs' system property and 'DD_TRACE_STARTUP_LOGS' environment variable", "bodyText": "When \"false\" we configure the log level at startup to WARN to hide agent info messages at startup.\nThis doesn't affect agent warning or error messages.\nThe startup logs setting also has no effect when debug mode (dd.trace.debug) is enabled.\nNOTE: as it stands this PR does not change the log level after the agent has finished startup, ie. it will continue to hide agent info messages but still log warnings and errors. This was considered acceptable because users setting this option typically will be only interested in warnings and errors. It also avoids introducing additional custom logging API and logic to bump the log level back once startup is \"done\", where we may already be dealing with multiple agent threads.", "createdAt": "2020-09-28T12:39:55Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1918", "merged": true, "mergeCommit": {"oid": "44ebd29dd9a16978bd6addac31872c9285a93f95"}, "closed": true, "closedAt": "2020-09-29T09:15:14Z", "author": {"login": "mcculls"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNSkbiAH2gAyNDk0MTEzMjQ5OjQ0MDk4OWE3MDRjZmU1ZGUxNjljZDA2ZGY0YzNmMzA0NDU5NDE4MDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNVwJngFqTQ5NzY3NTM4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "440989a704cfe5de169cd06df4c3f30445941802", "author": {"user": {"login": "mcculls", "name": "Stuart McCulloch"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/440989a704cfe5de169cd06df4c3f30445941802", "committedDate": "2020-09-28T12:16:20Z", "message": "Support 'dd.trace.startup.logs' system property and 'DD_TRACE_STARTUP_LOGS' environment variable.\nWhen \"false\" we configure the log level at startup to WARN to hide agent info messages at startup.\n\nThis doesn't affect agent warning or error messages. The startup logs setting also has no effect\nwhen debug mode (dd.trace.debug) is enabled."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3NTA1NTA5", "url": "https://github.com/DataDog/dd-trace-java/pull/1918#pullrequestreview-497505509", "createdAt": "2020-09-28T13:22:31Z", "commit": {"oid": "440989a704cfe5de169cd06df4c3f30445941802"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3NTUwOTc3", "url": "https://github.com/DataDog/dd-trace-java/pull/1918#pullrequestreview-497550977", "createdAt": "2020-09-28T14:09:21Z", "commit": {"oid": "440989a704cfe5de169cd06df4c3f30445941802"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3Njc1MDc1", "url": "https://github.com/DataDog/dd-trace-java/pull/1918#pullrequestreview-497675075", "createdAt": "2020-09-28T15:58:32Z", "commit": {"oid": "440989a704cfe5de169cd06df4c3f30445941802"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNTo1ODozMlrOHZFMUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNTo1ODozMlrOHZFMUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA2MTUyMA==", "bodyText": "it's 3rd place where we use this pattern ( isAppUsingCustomLogManager(), isDebugMode() ) in this file. But I'm still not sure whatever it deserves to be a separate method.\nand here also:\n\n  \n    \n      dd-trace-java/internal-api/src/main/java/datadog/trace/bootstrap/config/provider/EnvironmentConfigSource.java\n    \n    \n         Line 22\n      in\n      c1df100\n    \n    \n    \n    \n\n        \n          \n           private static String propertyNameToEnvironmentVariableName(final String setting) { \n        \n    \n  \n\n\nhttps://github.com/DataDog/dd-trace-java/blob/master/internal-api/src/main/java/datadog/trace/api/Config.java", "url": "https://github.com/DataDog/dd-trace-java/pull/1918#discussion_r496061520", "createdAt": "2020-09-28T15:58:32Z", "author": {"login": "lpriima"}, "path": "dd-java-agent/agent-bootstrap/src/main/java/datadog/trace/bootstrap/Agent.java", "diffHunk": "@@ -435,6 +437,21 @@ private static boolean isDebugMode() {\n     return false;\n   }\n \n+  /**\n+   * Determine if we should log startup info messages according to dd.trace.startup.logs\n+   *\n+   * @return true if we should\n+   */\n+  private static boolean isStartupLogsEnabled() {\n+    final String startupLogsSysprop = \"dd.trace.startup.logs\";\n+    String startupLogsEnabled = System.getProperty(startupLogsSysprop);\n+    if (startupLogsEnabled == null) {\n+      startupLogsEnabled = System.getenv(startupLogsSysprop.replace('.', '_').toUpperCase());\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "440989a704cfe5de169cd06df4c3f30445941802"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3Njc1Mzgw", "url": "https://github.com/DataDog/dd-trace-java/pull/1918#pullrequestreview-497675380", "createdAt": "2020-09-28T15:58:51Z", "commit": {"oid": "440989a704cfe5de169cd06df4c3f30445941802"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3169, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}