{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwODQ0ODE1", "number": 1789, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMzozODo0MFrOEaiP3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDozOTo0MVrOEakMdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MjU5NTUxOnYy", "diffSide": "RIGHT", "path": "dd-java-agent/instrumentation/testng-6.4/src/test/groovy/TestNGTest.groovy", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMzozODo0MFrOHEBojw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwODo0MDoxN1rOHFaC2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzk4MzExOQ==", "bodyText": "Would it be possible to setOutputDirectory to build/tmp/test-output? Then you wouldn't need to add the line in .gitignore.", "url": "https://github.com/DataDog/dd-trace-java/pull/1789#discussion_r473983119", "createdAt": "2020-08-20T13:38:40Z", "author": {"login": "bantonsson"}, "path": "dd-java-agent/instrumentation/testng-6.4/src/test/groovy/TestNGTest.groovy", "diffHunk": "@@ -0,0 +1,141 @@\n+import datadog.trace.agent.test.base.TestFrameworkTest\n+import datadog.trace.bootstrap.instrumentation.decorator.TestDecorator\n+import datadog.trace.instrumentation.testng.TestNGDecorator\n+import org.example.TestError\n+import org.example.TestFailed\n+import org.example.TestFailedWithSuccessPercentage\n+import org.example.TestInheritance\n+import org.example.TestSkipped\n+import org.example.TestSucceed\n+import org.testng.TestNG\n+\n+class TestNGTest extends TestFrameworkTest {\n+\n+  def \"test success generates spans\"() {\n+    setup:\n+    def testNG = new TestNG()\n+    testNG.setTestClasses(TestSucceed)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbc9a6d1a6ae353a261a3de801f54fd140fd56be"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQzMTY0Mg==", "bodyText": "Changed \ud83d\udc4d", "url": "https://github.com/DataDog/dd-trace-java/pull/1789#discussion_r475431642", "createdAt": "2020-08-24T08:40:17Z", "author": {"login": "drodriguezhdez"}, "path": "dd-java-agent/instrumentation/testng-6.4/src/test/groovy/TestNGTest.groovy", "diffHunk": "@@ -0,0 +1,141 @@\n+import datadog.trace.agent.test.base.TestFrameworkTest\n+import datadog.trace.bootstrap.instrumentation.decorator.TestDecorator\n+import datadog.trace.instrumentation.testng.TestNGDecorator\n+import org.example.TestError\n+import org.example.TestFailed\n+import org.example.TestFailedWithSuccessPercentage\n+import org.example.TestInheritance\n+import org.example.TestSkipped\n+import org.example.TestSucceed\n+import org.testng.TestNG\n+\n+class TestNGTest extends TestFrameworkTest {\n+\n+  def \"test success generates spans\"() {\n+    setup:\n+    def testNG = new TestNG()\n+    testNG.setTestClasses(TestSucceed)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzk4MzExOQ=="}, "originalCommit": {"oid": "bbc9a6d1a6ae353a261a3de801f54fd140fd56be"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2Mjg1NjY1OnYy", "diffSide": "RIGHT", "path": "dd-java-agent/instrumentation/testng-6.4/src/main/java/datadog/trace/instrumentation/testng/TestNGDecorator.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDoyNzo0MlrOHEEOeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDoyNzo0MlrOHEEOeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAyNTU5Mw==", "bodyText": "lol... every time I see this it looks like a typo for testing.", "url": "https://github.com/DataDog/dd-trace-java/pull/1789#discussion_r474025593", "createdAt": "2020-08-20T14:27:42Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/instrumentation/testng-6.4/src/main/java/datadog/trace/instrumentation/testng/TestNGDecorator.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package datadog.trace.instrumentation.testng;\n+\n+import datadog.trace.api.DDTags;\n+import datadog.trace.bootstrap.instrumentation.api.AgentSpan;\n+import datadog.trace.bootstrap.instrumentation.decorator.TestDecorator;\n+import lombok.extern.slf4j.Slf4j;\n+import org.testng.ITestResult;\n+\n+@Slf4j\n+public class TestNGDecorator extends TestDecorator {\n+  public static final TestNGDecorator DECORATE = new TestNGDecorator();\n+\n+  @Override\n+  public String testFramework() {\n+    return \"testng\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbc9a6d1a6ae353a261a3de801f54fd140fd56be"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MjkxMjI5OnYy", "diffSide": "RIGHT", "path": "gradle/java.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDozOToxMlrOHEEw2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDozOToxMlrOHEEw2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAzNDM5Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              return project.name == \"junit-4.10\" || project.name == \"testng-6.4\"\n          \n          \n            \n              return [ \"junit-4.10\", \"testng-6.4\" ].contains(project.name)\n          \n      \n    \n    \n  \n\n(or something like this... I assume there will be more testing projects.)", "url": "https://github.com/DataDog/dd-trace-java/pull/1789#discussion_r474034393", "createdAt": "2020-08-20T14:39:12Z", "author": {"login": "tylerbenson"}, "path": "gradle/java.gradle", "diffHunk": "@@ -278,7 +278,7 @@ def isJdkForced(String javaName) {\n }\n \n def isTestingInstrumentation(Project project) {\n-  return project.name == \"junit-4.10\"\n+  return project.name == \"junit-4.10\" || project.name == \"testng-6.4\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbc9a6d1a6ae353a261a3de801f54fd140fd56be"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MjkxNDQ0OnYy", "diffSide": "RIGHT", "path": "settings.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDozOTo0MVrOHEEyNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxNDozOTo0MVrOHEEyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAzNDc0Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            include 'dd-java-agent:instrumentation:testng-6.4'\n          \n          \n            \n            include ':dd-java-agent:instrumentation:testng-6.4'", "url": "https://github.com/DataDog/dd-trace-java/pull/1789#discussion_r474034742", "createdAt": "2020-08-20T14:39:41Z", "author": {"login": "tylerbenson"}, "path": "settings.gradle", "diffHunk": "@@ -156,6 +156,7 @@ include ':dd-java-agent:instrumentation:spring-scheduling-3.1'\n include ':dd-java-agent:instrumentation:spring-webmvc-3.1'\n include ':dd-java-agent:instrumentation:spring-webflux-5'\n include ':dd-java-agent:instrumentation:spymemcached-2.12'\n+include 'dd-java-agent:instrumentation:testng-6.4'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbc9a6d1a6ae353a261a3de801f54fd140fd56be"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 50, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}