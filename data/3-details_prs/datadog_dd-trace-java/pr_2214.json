{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNDY4NDE1", "number": 2214, "title": "remove some intrusive tests", "bodyText": "", "createdAt": "2020-12-16T22:09:30Z", "url": "https://github.com/DataDog/dd-trace-java/pull/2214", "merged": true, "mergeCommit": {"oid": "18ac666fc91e3d4f80008df4d1f248177d160b82"}, "closed": true, "closedAt": "2020-12-17T17:51:39Z", "author": {"login": "richardstartin"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdm2UdtgH2gAyNTQxNDY4NDE1OjY1MmJiMDg5ZWM0MTZhOTQ5Yzk0MjgzNGFhMDBmNTIxNjQyNzg0ZTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdm-vTEAFqTU1NDM1MDIwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "652bb089ec416a949c942834aa00f521642784e8", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/652bb089ec416a949c942834aa00f521642784e8", "committedDate": "2020-12-16T22:03:35Z", "message": "remove test reaching into DDSpanContext internals"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "189b84626537f8baca363549ae342d8bc0abdaeb", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/189b84626537f8baca363549ae342d8bc0abdaeb", "committedDate": "2020-12-16T22:08:27Z", "message": "fix tests reaching into DDAgentApi internals"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MTI2MTMx", "url": "https://github.com/DataDog/dd-trace-java/pull/2214#pullrequestreview-554126131", "createdAt": "2020-12-16T22:11:20Z", "commit": {"oid": "189b84626537f8baca363549ae342d8bc0abdaeb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMjoxMToyMFrOIHbYYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMjoxMToyMFrOIHbYYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY1OTU1Mw==", "bodyText": "I'm tempted to just remove these tests entirely", "url": "https://github.com/DataDog/dd-trace-java/pull/2214#discussion_r544659553", "createdAt": "2020-12-16T22:11:20Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/test/groovy/datadog/trace/core/CoreTracerTest.groovy", "diffHunk": "@@ -138,11 +138,9 @@ class CoreTracerTest extends DDSpecification {\n \n     when:\n     injectSysConfig(AGENT_UNIX_DOMAIN_SOCKET, uds)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "189b84626537f8baca363549ae342d8bc0abdaeb"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MjM3MjYy", "url": "https://github.com/DataDog/dd-trace-java/pull/2214#pullrequestreview-554237262", "createdAt": "2020-12-17T02:34:38Z", "commit": {"oid": "189b84626537f8baca363549ae342d8bc0abdaeb"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMjozNDozOFrOIHh7Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNDozOToxOFrOIHkX6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDc2Njc3NQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/DataDog/dd-trace-java/pull/2214#discussion_r544766775", "createdAt": "2020-12-17T02:34:38Z", "author": {"login": "lpriima"}, "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/ddagent/DDAgentApi.java", "diffHunk": "@@ -79,7 +79,6 @@\n   private String detectedVersion = null;\n   private boolean agentRunning = false;\n   private boolean agentDiscovered = false;\n-  private boolean usingUnixDomainSockets;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "189b84626537f8baca363549ae342d8bc0abdaeb"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgwNjg4OA==", "bodyText": "DDAgentApi::detectEndpoint still not private and used in other tests after this. It also can be called directly from DDAgentApi ctor. (Maybe after updating more tests in this file which are testing Config in fact).", "url": "https://github.com/DataDog/dd-trace-java/pull/2214#discussion_r544806888", "createdAt": "2020-12-17T04:39:18Z", "author": {"login": "lpriima"}, "path": "dd-trace-core/src/test/groovy/datadog/trace/core/CoreTracerTest.groovy", "diffHunk": "@@ -190,12 +183,9 @@ class CoreTracerTest extends DDSpecification {\n   def \"verify overriding port\"() {\n     when:\n     injectSysConfig(key, value)\n-    def tracer = CoreTracer.builder().build()\n-    ((DDAgentWriter) tracer.writer).api.detectEndpoint()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "189b84626537f8baca363549ae342d8bc0abdaeb"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MzUwMjAy", "url": "https://github.com/DataDog/dd-trace-java/pull/2214#pullrequestreview-554350202", "createdAt": "2020-12-17T07:52:08Z", "commit": {"oid": "189b84626537f8baca363549ae342d8bc0abdaeb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2771, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}