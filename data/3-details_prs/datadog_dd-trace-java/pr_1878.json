{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4MTM0ODcy", "number": 1878, "title": "Precompute UTF-8 for span names", "bodyText": "This makes a source-compatible but binary-incompatible change to AgentTracer. There are fast paths in trace serialization when we use UTF8ByteString, so moving as many fields over to UTF8ByteString as possible saves lots of CPU, and avoids doing lookups. This is busy work, so if anyone else wants to do the tag keys in another PR, please be my guest, otherwise I will follow up with that when I get time :)", "createdAt": "2020-09-16T17:24:06Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1878", "merged": true, "mergeCommit": {"oid": "2a56120c54ca1dad6d43b3014b05a9564921ab5c"}, "closed": true, "closedAt": "2020-09-17T17:28:22Z", "author": {"login": "richardstartin"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJf1s4ABqjM3NzQyOTk5OTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJ0SbqgFqTQ5MDgxODcwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd24b23639024ed7641ae747fe269a0289a8505a", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/cd24b23639024ed7641ae747fe269a0289a8505a", "committedDate": "2020-09-16T17:21:13Z", "message": "revapi"}, "afterCommit": {"oid": "860340c929aa0f10438008128ee4d99a7cda27ac", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/860340c929aa0f10438008128ee4d99a7cda27ac", "committedDate": "2020-09-16T17:28:06Z", "message": "revapi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "860340c929aa0f10438008128ee4d99a7cda27ac", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/860340c929aa0f10438008128ee4d99a7cda27ac", "committedDate": "2020-09-16T17:28:06Z", "message": "revapi"}, "afterCommit": {"oid": "d0a09d17e6b753390bdb4f86376bbee5bde4bcdc", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/d0a09d17e6b753390bdb4f86376bbee5bde4bcdc", "committedDate": "2020-09-16T19:49:57Z", "message": "revapi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0a09d17e6b753390bdb4f86376bbee5bde4bcdc", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/d0a09d17e6b753390bdb4f86376bbee5bde4bcdc", "committedDate": "2020-09-16T19:49:57Z", "message": "revapi"}, "afterCommit": {"oid": "47d4b65c7bdde3bbadff4468dcd5bc82c29f5989", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/47d4b65c7bdde3bbadff4468dcd5bc82c29f5989", "committedDate": "2020-09-16T20:16:06Z", "message": "revapi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "47d4b65c7bdde3bbadff4468dcd5bc82c29f5989", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/47d4b65c7bdde3bbadff4468dcd5bc82c29f5989", "committedDate": "2020-09-16T20:16:06Z", "message": "revapi"}, "afterCommit": {"oid": "a5262beef6481ea52a8453b1d0f6379eee5e4629", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/a5262beef6481ea52a8453b1d0f6379eee5e4629", "committedDate": "2020-09-16T20:39:24Z", "message": "revapi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5262beef6481ea52a8453b1d0f6379eee5e4629", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/a5262beef6481ea52a8453b1d0f6379eee5e4629", "committedDate": "2020-09-16T20:39:24Z", "message": "revapi"}, "afterCommit": {"oid": "62358d5184bf151a3a6d93a3ab6e0c21329f7a6f", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/62358d5184bf151a3a6d93a3ab6e0c21329f7a6f", "committedDate": "2020-09-16T20:57:20Z", "message": "revapi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62358d5184bf151a3a6d93a3ab6e0c21329f7a6f", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/62358d5184bf151a3a6d93a3ab6e0c21329f7a6f", "committedDate": "2020-09-16T20:57:20Z", "message": "revapi"}, "afterCommit": {"oid": "bff05b61da10311e8f260e1800587f169aa57e74", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/bff05b61da10311e8f260e1800587f169aa57e74", "committedDate": "2020-09-16T21:51:19Z", "message": "revapi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bff05b61da10311e8f260e1800587f169aa57e74", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/bff05b61da10311e8f260e1800587f169aa57e74", "committedDate": "2020-09-16T21:51:19Z", "message": "revapi"}, "afterCommit": {"oid": "a569933f94dd0731451b656fdce1abb44626c273", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/a569933f94dd0731451b656fdce1abb44626c273", "committedDate": "2020-09-17T09:21:30Z", "message": "revapi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a569933f94dd0731451b656fdce1abb44626c273", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/a569933f94dd0731451b656fdce1abb44626c273", "committedDate": "2020-09-17T09:21:30Z", "message": "revapi"}, "afterCommit": {"oid": "2ff62ac857e333e951a8b257ec0623eed9220868", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/2ff62ac857e333e951a8b257ec0623eed9220868", "committedDate": "2020-09-17T09:42:37Z", "message": "revapi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ff62ac857e333e951a8b257ec0623eed9220868", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/2ff62ac857e333e951a8b257ec0623eed9220868", "committedDate": "2020-09-17T09:42:37Z", "message": "revapi"}, "afterCommit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/e3f9c9f6f370d4b81485be31c8869d2a710a3cbb", "committedDate": "2020-09-17T10:01:38Z", "message": "revapi"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNDQ3NDc4", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#pullrequestreview-490447478", "createdAt": "2020-09-17T10:16:52Z", "commit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoxNjo1MlrOHTbTFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoxNjo1MlrOHTbTFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEzMjI0Nw==", "bodyText": "There are a few places where this is necessary in the tests", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#discussion_r490132247", "createdAt": "2020-09-17T10:16:52Z", "author": {"login": "richardstartin"}, "path": "dd-java-agent/instrumentation/couchbase-2.0/src/test/groovy/util/AbstractCouchbaseTest.groovy", "diffHunk": "@@ -120,8 +120,8 @@ abstract class AbstractCouchbaseTest extends AgentTestRunner {\n     TEST_WRITER.each {\n       it.sort({\n         a, b ->\n-          boolean aIsCouchbaseOperation = a.operationName == \"couchbase.call\"\n-          boolean bIsCouchbaseOperation = b.operationName == \"couchbase.call\"\n+          boolean aIsCouchbaseOperation = a.operationName.toString() == \"couchbase.call\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNDQ5MTUw", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#pullrequestreview-490449150", "createdAt": "2020-09-17T10:19:18Z", "commit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoxOToxOFrOHTbYGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoxOToxOFrOHTbYGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEzMzUzMA==", "bodyText": "Added some caching here to capture \"servlet.\" + method and ensure the UTF-8 encoding is only done once.", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#discussion_r490133530", "createdAt": "2020-09-17T10:19:18Z", "author": {"login": "richardstartin"}, "path": "dd-java-agent/instrumentation/servlet/src/main/java/datadog/trace/instrumentation/servlet/dispatcher/RequestDispatcherDecorator.java", "diffHunk": "@@ -1,8 +1,16 @@\n package datadog.trace.instrumentation.servlet.dispatcher;\n \n+import datadog.trace.api.Function;\n+import datadog.trace.api.Functions;\n+import datadog.trace.api.cache.DDCache;\n+import datadog.trace.api.cache.DDCaches;\n import datadog.trace.bootstrap.instrumentation.decorator.BaseDecorator;\n \n public class RequestDispatcherDecorator extends BaseDecorator {\n+  public static final DDCache<CharSequence, CharSequence> SPAN_NAME_CACHE =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNDQ5NjQz", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#pullrequestreview-490449643", "createdAt": "2020-09-17T10:19:52Z", "commit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoxOTo1MlrOHTbZwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoxOTo1MlrOHTbZwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEzMzk1NA==", "bodyText": "Use of the cache here (method is very low cardinality)", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#discussion_r490133954", "createdAt": "2020-09-17T10:19:52Z", "author": {"login": "richardstartin"}, "path": "dd-java-agent/instrumentation/servlet/src/main/java/datadog/trace/instrumentation/servlet/dispatcher/RequestDispatcherInstrumentation.java", "diffHunk": "@@ -99,7 +101,8 @@ public static AgentScope start(\n         parent = servletSpan.context();\n       }\n \n-      final AgentSpan span = startSpan(\"servlet.\" + method, parent);\n+      final AgentSpan span =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNDQ5ODYy", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#pullrequestreview-490449862", "createdAt": "2020-09-17T10:20:11Z", "commit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoyMDoxMVrOHTbaXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoyMDoxMVrOHTbaXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEzNDExMQ==", "bodyText": "Same caching here", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#discussion_r490134111", "createdAt": "2020-09-17T10:20:11Z", "author": {"login": "richardstartin"}, "path": "dd-java-agent/instrumentation/servlet/src/main/java/datadog/trace/instrumentation/servlet/http/HttpServletDecorator.java", "diffHunk": "@@ -1,8 +1,16 @@\n package datadog.trace.instrumentation.servlet.http;\n \n+import datadog.trace.api.Function;\n+import datadog.trace.api.Functions;\n+import datadog.trace.api.cache.DDCache;\n+import datadog.trace.api.cache.DDCaches;\n import datadog.trace.bootstrap.instrumentation.decorator.BaseDecorator;\n \n public class HttpServletDecorator extends BaseDecorator {\n+  public static final DDCache<CharSequence, CharSequence> SPAN_NAME_CACHE =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNDUxMzg1", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#pullrequestreview-490451385", "createdAt": "2020-09-17T10:22:23Z", "commit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoyMjoyNFrOHTbe2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoyMjoyNFrOHTbe2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEzNTI1OA==", "bodyText": "Don't need this any more.", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#discussion_r490135258", "createdAt": "2020-09-17T10:22:24Z", "author": {"login": "richardstartin"}, "path": "internal-api/src/main/java/datadog/trace/bootstrap/instrumentation/api/DDSpanNames.java", "diffHunk": "@@ -1,8 +0,0 @@\n-package datadog.trace.bootstrap.instrumentation.api;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNDUxOTAw", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#pullrequestreview-490451900", "createdAt": "2020-09-17T10:23:08Z", "commit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoyMzowOVrOHTbgUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDoyMzowOVrOHTbgUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEzNTYzMg==", "bodyText": "The idea is to use CharSequence in more places until we can completely remove this entire class. This means users only pay for \"interning\" what they need.", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#discussion_r490135632", "createdAt": "2020-09-17T10:23:09Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/StringTables.java", "diffHunk": "@@ -48,7 +47,6 @@\n     internConstantsUTF8(InstrumentationTags.class, UTF8_INTERN_KEYS_TABLE, null);\n     internConstantsUTF8(DDSpanTypes.class, UTF8_INTERN_TAGS_TABLE, TAGS_FIRST_CHAR_IS_PRESENT);\n     internConstantsUTF8(DDComponents.class, UTF8_INTERN_TAGS_TABLE, TAGS_FIRST_CHAR_IS_PRESENT);\n-    internConstantsUTF8(DDSpanNames.class, UTF8_INTERN_TAGS_TABLE, TAGS_FIRST_CHAR_IS_PRESENT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNDYzNjkz", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#pullrequestreview-490463693", "createdAt": "2020-09-17T10:40:30Z", "commit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDo0MDozMFrOHTcEaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMDo0MDozMFrOHTcEaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE0NDg3Mg==", "bodyText": "should this be AWS_HTTP to match the other constant naming?", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#discussion_r490144872", "createdAt": "2020-09-17T10:40:30Z", "author": {"login": "mcculls"}, "path": "dd-java-agent/instrumentation/aws-java-sdk-1.11.0/src/main/java/datadog/trace/instrumentation/aws/v0/TracingRequestHandler.java", "diffHunk": "@@ -29,7 +32,7 @@ public AmazonWebServiceRequest beforeMarshalling(final AmazonWebServiceRequest r\n \n   @Override\n   public void beforeRequest(final Request<?> request) {\n-    final AgentSpan span = startSpan(\"aws.http\");\n+    final AgentSpan span = startSpan(SPAN_NAME);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06675637b3a5325d8c7cbe12064abae859bcb79f", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/06675637b3a5325d8c7cbe12064abae859bcb79f", "committedDate": "2020-09-17T10:43:19Z", "message": "change span name to be a UTF8ByteString"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "043a4791455e642705a2d848b94e7a682d0f531c", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/043a4791455e642705a2d848b94e7a682d0f531c", "committedDate": "2020-09-17T10:43:19Z", "message": "revapi"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/e3f9c9f6f370d4b81485be31c8869d2a710a3cbb", "committedDate": "2020-09-17T10:01:38Z", "message": "revapi"}, "afterCommit": {"oid": "043a4791455e642705a2d848b94e7a682d0f531c", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/043a4791455e642705a2d848b94e7a682d0f531c", "committedDate": "2020-09-17T10:43:19Z", "message": "revapi"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNDcyOTI3", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#pullrequestreview-490472927", "createdAt": "2020-09-17T10:54:49Z", "commit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60e419f233d5333a50bb4829d6bf310f79c6f4fc", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/60e419f233d5333a50bb4829d6bf310f79c6f4fc", "committedDate": "2020-09-17T11:19:30Z", "message": "use the same span name cache for request dispatcher and httpservlet span names"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8d36c1a1d222268fcc6ea42329fa510f86e80274", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/8d36c1a1d222268fcc6ea42329fa510f86e80274", "committedDate": "2020-09-17T10:59:51Z", "message": "use the same span name cache for request dispatcher and httpservlet span names"}, "afterCommit": {"oid": "60e419f233d5333a50bb4829d6bf310f79c6f4fc", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/60e419f233d5333a50bb4829d6bf310f79c6f4fc", "committedDate": "2020-09-17T11:19:30Z", "message": "use the same span name cache for request dispatcher and httpservlet span names"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwODE4NzA3", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#pullrequestreview-490818707", "createdAt": "2020-09-17T17:13:44Z", "commit": {"oid": "60e419f233d5333a50bb4829d6bf310f79c6f4fc"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNzoxMzo0NFrOHTtOpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNzoxNTozMFrOHTtSwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQyNjAyMg==", "bodyText": "nice change!", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#discussion_r490426022", "createdAt": "2020-09-17T17:13:44Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/instrumentation/servlet/src/main/java/datadog/trace/instrumentation/servlet/dispatcher/RequestDispatcherInstrumentation.java", "diffHunk": "@@ -99,7 +101,8 @@ public static AgentScope start(\n         parent = servletSpan.context();\n       }\n \n-      final AgentSpan span = startSpan(\"servlet.\" + method, parent);\n+      final AgentSpan span =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDEzMzk1NA=="}, "originalCommit": {"oid": "e3f9c9f6f370d4b81485be31c8869d2a710a3cbb"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQyNzA3Mg==", "bodyText": "I wonder if we should take this a step further and require UTF8BytesString instead...  This would push the need to cache this to the OT/OTel instrumentation, which has its' own tradeoffs.", "url": "https://github.com/DataDog/dd-trace-java/pull/1878#discussion_r490427072", "createdAt": "2020-09-17T17:15:30Z", "author": {"login": "tylerbenson"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/CoreTracer.java", "diffHunk": "@@ -319,28 +319,28 @@ private void registerClassLoader(final ClassLoader classLoader) {\n   }\n \n   @Override\n-  public CoreSpanBuilder buildSpan(final String operationName) {\n+  public CoreSpanBuilder buildSpan(final CharSequence operationName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60e419f233d5333a50bb4829d6bf310f79c6f4fc"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3125, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}