{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NDI2NzIy", "number": 1248, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxOTowODo0MVrODh-3FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxOToxMToyN1rODh-6JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2OTU5NTA4OnYy", "diffSide": "RIGHT", "path": "dd-java-agent/instrumentation/hystrix-1.4/src/main/java/datadog/trace/instrumentation/hystrix/HystrixInstrumentation.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxOTowODo0MVrOFtBihg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxOTowODo0MVrOFtBihg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc1NTQ2Mg==", "bodyText": "I think some of these are safe, but many aren't.  For example, HystrixCommand is intended to be extended, so most usages of this won't match the package prefix.  I'm guessing many of these others have a similar issue.", "url": "https://github.com/DataDog/dd-trace-java/pull/1248#discussion_r382755462", "createdAt": "2020-02-21T19:08:41Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/instrumentation/hystrix-1.4/src/main/java/datadog/trace/instrumentation/hystrix/HystrixInstrumentation.java", "diffHunk": "@@ -29,9 +30,11 @@ public HystrixInstrumentation() {\n \n   @Override\n   public ElementMatcher<TypeDescription> typeMatcher() {\n-    return safeExtendsClass(\n-        named(\"com.netflix.hystrix.HystrixCommand\")\n-            .or(named(\"com.netflix.hystrix.HystrixObservableCommand\")));\n+    return nameStartsWith(\"com.netflix.hystrix.\")\n+        .and(\n+            safeExtendsClass(\n+                named(\"com.netflix.hystrix.HystrixCommand\")\n+                    .or(named(\"com.netflix.hystrix.HystrixObservableCommand\"))));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dea85909044f0f5d3cf0f67d2d6852fc9e493259"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2OTYwMjkzOnYy", "diffSide": "RIGHT", "path": "dd-java-agent/instrumentation/hibernate/core-3.3/src/main/java/datadog/trace/instrumentation/hibernate/core/v3_3/CriteriaInstrumentation.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxOToxMToyOFrOFtBnnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxOToyNTo0MVrOFtCAVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc1Njc2NQ==", "bodyText": "I don't think this one can be done. I've seen custom Criteria classes before", "url": "https://github.com/DataDog/dd-trace-java/pull/1248#discussion_r382756765", "createdAt": "2020-02-21T19:11:28Z", "author": {"login": "devinsba"}, "path": "dd-java-agent/instrumentation/hibernate/core-3.3/src/main/java/datadog/trace/instrumentation/hibernate/core/v3_3/CriteriaInstrumentation.java", "diffHunk": "@@ -31,7 +32,9 @@\n \n   @Override\n   public ElementMatcher<TypeDescription> typeMatcher() {\n-    return not(isInterface()).and(safeHasInterface(named(\"org.hibernate.Criteria\")));\n+    return nameStartsWith(\"org.hibernate.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dea85909044f0f5d3cf0f67d2d6852fc9e493259"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc2MzA5NA==", "bodyText": "reverged whole hibernate and a few others", "url": "https://github.com/DataDog/dd-trace-java/pull/1248#discussion_r382763094", "createdAt": "2020-02-21T19:25:41Z", "author": {"login": "mar-kolya"}, "path": "dd-java-agent/instrumentation/hibernate/core-3.3/src/main/java/datadog/trace/instrumentation/hibernate/core/v3_3/CriteriaInstrumentation.java", "diffHunk": "@@ -31,7 +32,9 @@\n \n   @Override\n   public ElementMatcher<TypeDescription> typeMatcher() {\n-    return not(isInterface()).and(safeHasInterface(named(\"org.hibernate.Criteria\")));\n+    return nameStartsWith(\"org.hibernate.\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc1Njc2NQ=="}, "originalCommit": {"oid": "dea85909044f0f5d3cf0f67d2d6852fc9e493259"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 540, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}