{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMDEzMzI3", "number": 1269, "title": "Use plugin to automatically set version", "bodyText": "This uses the axion-release to automatically set the version for the gradle project by looking at git tags.\nThis removes 9 steps from the 21 step release process.\nI preserved our practice of generating a release commit but don't have strong feelings about it.\nRelevant commands\nShow current version:\n./gradlew currentVersion\n\nDo a dry-run of a release (no actions performed):\n./gradlew release -Prelease.dryRun\n\nPerform a release:\n./gradlew release", "createdAt": "2020-02-27T18:50:59Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1269", "merged": true, "mergeCommit": {"oid": "872743db917c3311214d0b155397666c7afd8eb4"}, "closed": true, "closedAt": "2020-03-10T19:37:04Z", "author": {"login": "randomanderson"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIgUE3AFqTM2NTkyODk0NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMXXnVgFqTM3MjI0MzE4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1OTI4OTQ1", "url": "https://github.com/DataDog/dd-trace-java/pull/1269#pullrequestreview-365928945", "createdAt": "2020-02-27T19:16:21Z", "commit": {"oid": "924e81fc48a24434972856847d88656734ec3bf7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxOToxNjoyMVrOFvd5sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxOToxNjoyMVrOFvd5sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTMxNzI5Nw==", "bodyText": "How does this work?  What actually pushes that commit to master? Is there a new gradle task that needs to be run?", "url": "https://github.com/DataDog/dd-trace-java/pull/1269#discussion_r385317297", "createdAt": "2020-02-27T19:16:21Z", "author": {"login": "tylerbenson"}, "path": "dd-trace-java.gradle", "diffHunk": "@@ -10,13 +10,33 @@ plugins {\n   // files in 'workspace' build directory in CI\n   id 'com.github.sherter.google-java-format' version '0.8' apply false\n   id 'com.dorongold.task-tree' version '1.5'\n+  id 'pl.allegro.tech.build.axion-release' version '1.9.3'\n }\n \n def isCI = System.getenv(\"CI\") != null\n \n+scmVersion {\n+  tag {\n+    prefix = 'v'\n+    versionSeparator = ''\n+  }\n+\n+  createReleaseCommit true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "924e81fc48a24434972856847d88656734ec3bf7"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa50a545520ab7700bd0b6834f335f968cced10f", "author": {"user": {"login": "randomanderson", "name": "Laplie Anderson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/fa50a545520ab7700bd0b6834f335f968cced10f", "committedDate": "2020-03-10T16:26:46Z", "message": "Use plugin to automatically set version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c14a9276b3d97555ecb37af18c29ee3d65c5db1a", "author": {"user": {"login": "randomanderson", "name": "Laplie Anderson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c14a9276b3d97555ecb37af18c29ee3d65c5db1a", "committedDate": "2020-03-10T16:26:46Z", "message": "Add a release commit to match previous behavior"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d99b138d2f2dd37ab668a5ddc99959efb3154c7", "author": {"user": {"login": "randomanderson", "name": "Laplie Anderson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/6d99b138d2f2dd37ab668a5ddc99959efb3154c7", "committedDate": "2020-03-10T16:26:46Z", "message": "Don't create release tag"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "809da2d1c36df2a72700416b7239cb888e18e2ce", "author": {"user": {"login": "randomanderson", "name": "Laplie Anderson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/809da2d1c36df2a72700416b7239cb888e18e2ce", "committedDate": "2020-02-27T23:19:17Z", "message": "Don't create release tag"}, "afterCommit": {"oid": "6d99b138d2f2dd37ab668a5ddc99959efb3154c7", "author": {"user": {"login": "randomanderson", "name": "Laplie Anderson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/6d99b138d2f2dd37ab668a5ddc99959efb3154c7", "committedDate": "2020-03-10T16:26:46Z", "message": "Don't create release tag"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMjQzMTg1", "url": "https://github.com/DataDog/dd-trace-java/pull/1269#pullrequestreview-372243185", "createdAt": "2020-03-10T19:06:47Z", "commit": {"oid": "6d99b138d2f2dd37ab668a5ddc99959efb3154c7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2536, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}