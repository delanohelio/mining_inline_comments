{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MzEyMTIy", "number": 1350, "title": "Add fix suggestion when JFR API not found", "bodyText": "suggests to use zulu 1.8u212+ which includes JFR or OpenJDK11+", "createdAt": "2020-04-03T18:03:26Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1350", "merged": true, "mergeCommit": {"oid": "176b9c012139fe0614723c6ec2fe37cb626191a8"}, "closed": true, "closedAt": "2020-04-06T14:35:39Z", "author": {"login": "jpbempel"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUEz5CAH2gAyMzk4MzEyMTIyOjM0M2E3N2Q2MTkwZDY4N2E5N2MxZDQ1ZjRjNzNhMTU0MGFmMGU4NWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcU-2J7AFqTM4ODI1NjM1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "343a77d6190d687a97c1d45f4c73a1540af0e85a", "author": {"user": {"login": "jpbempel", "name": "Jean-Philippe Bempel"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/343a77d6190d687a97c1d45f4c73a1540af0e85a", "committedDate": "2020-04-03T18:00:52Z", "message": "Add fix suggestion when JFR API not found\n\nsuggests to use zulu 1.8u212 at least which include JFR or OpenJDK11+"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3NTI1MTk2", "url": "https://github.com/DataDog/dd-trace-java/pull/1350#pullrequestreview-387525196", "createdAt": "2020-04-03T19:28:46Z", "commit": {"oid": "343a77d6190d687a97c1d45f4c73a1540af0e85a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxOToyODo0NlrOGAlRJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxOToyODo0NlrOGAlRJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzI2Mzc4Mg==", "bodyText": "Mind adding a test for this? We are running on at least some version that this should be testable from.", "url": "https://github.com/DataDog/dd-trace-java/pull/1350#discussion_r403263782", "createdAt": "2020-04-03T19:28:46Z", "author": {"login": "mar-kolya"}, "path": "dd-java-agent/agent-profiling/profiling-controller/src/main/java/com/datadog/profiling/controller/ControllerFactory.java", "diffHunk": "@@ -49,8 +49,28 @@ public static Controller createController(final Config config)\n         | InstantiationException\n         | IllegalAccessException\n         | InvocationTargetException e) {\n-      throw new UnsupportedEnvironmentException(\n-          \"The JFR controller could not find a supported JFR API\", e);\n+      String exMsg = \"The JFR controller could not find a supported JFR API\"\n+        + getFixProposalMessage();\n+      throw new UnsupportedEnvironmentException(exMsg, e);\n+    }\n+  }\n+\n+  private static String getFixProposalMessage() {\n+    try {\n+      String javaVersion = System.getProperty(\"java.version\");\n+      if (javaVersion == null) {\n+        return \"\";\n+      }\n+      String javaVendor = System.getProperty(\"java.vendor\", \"\");\n+      if (javaVersion.startsWith(\"1.8\")) {\n+        if (javaVendor.startsWith(\"Azul Systems\")) {\n+          return \", use Azul zulu version 1.8.0_212+\";\n+        }\n+        // TODO Add version minimum once JFR backported into OpenJDK distros\n+      }\n+      return \", use OpenJDK 11+ or Azul zulu version 1.8.0_212+\";\n+    } catch (Exception ex) {\n+      return \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "343a77d6190d687a97c1d45f4c73a1540af0e85a"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce26d0532e781354f69225efb2b509b66e587abd", "author": {"user": {"login": "jpbempel", "name": "Jean-Philippe Bempel"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/ce26d0532e781354f69225efb2b509b66e587abd", "committedDate": "2020-04-06T10:19:20Z", "message": "Add test for improved messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "658544fb38843b543d6a6be8ed7f755386b0b08d", "author": {"user": {"login": "jpbempel", "name": "Jean-Philippe Bempel"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/658544fb38843b543d6a6be8ed7f755386b0b08d", "committedDate": "2020-04-06T11:26:55Z", "message": "Fix formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MjU2MzU0", "url": "https://github.com/DataDog/dd-trace-java/pull/1350#pullrequestreview-388256354", "createdAt": "2020-04-06T13:37:50Z", "commit": {"oid": "658544fb38843b543d6a6be8ed7f755386b0b08d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2619, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}