{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MTA3NzY4", "number": 1185, "title": "Remove Jackson from dd-trace-ot", "bodyText": "Reduced the size of dd-java-agent jar by about 2 MB.  Jackson is not removed completely though as it is still a dependency of jmxfetch.\nTrace serialization is primarily done directly with msgpack.\nResponse deserialization and LoggingWriter serialization is done with mochi.\nMsgpack Serialization buffer still not being reused though.\n(PR based off of #1161... that should be merged first.  So focus on the last commit.)", "createdAt": "2020-01-22T23:10:22Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1185", "merged": true, "mergeCommit": {"oid": "0eac80baa0b4bd61eacff3d3d45f31ccad9b69b9"}, "closed": true, "closedAt": "2020-02-03T20:10:17Z", "author": {"login": "tylerbenson"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8_hI2ABqjI5NzIxMTc2NzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAyqoZAFqTM1MjUyODI5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "43ac232a46d8f407482fd573201d9309027e4c20", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/43ac232a46d8f407482fd573201d9309027e4c20", "committedDate": "2020-01-22T23:04:07Z", "message": "Remove Jackson from dd-trace-ot\n\nReduced the size of dd-java-agent jar by about 2 MB.  Jackson is not removed completely though as it is still a dependency of jmxfetch.\n\nSerialization buffer still not being reused though."}, "afterCommit": {"oid": "c3404ea61ce197f2bb3d278a9e66928d9405ae17", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c3404ea61ce197f2bb3d278a9e66928d9405ae17", "committedDate": "2020-01-23T00:50:26Z", "message": "Remove Jackson from dd-trace-ot\n\nReduced the size of dd-java-agent jar by about 2 MB. Jackson is not removed completely though as it is still a dependency of jmxfetch.\n\nTrace serialization is primarily done directly with msgpack.\nResponse deserialization and LoggingWriter serialization is done with mochi.\n\nMsgpack Serialization buffer still not being reused though."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3404ea61ce197f2bb3d278a9e66928d9405ae17", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c3404ea61ce197f2bb3d278a9e66928d9405ae17", "committedDate": "2020-01-23T00:50:26Z", "message": "Remove Jackson from dd-trace-ot\n\nReduced the size of dd-java-agent jar by about 2 MB. Jackson is not removed completely though as it is still a dependency of jmxfetch.\n\nTrace serialization is primarily done directly with msgpack.\nResponse deserialization and LoggingWriter serialization is done with mochi.\n\nMsgpack Serialization buffer still not being reused though."}, "afterCommit": {"oid": "af212af4f510772d150eaa0b59bb186ad2ccf387", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/af212af4f510772d150eaa0b59bb186ad2ccf387", "committedDate": "2020-01-23T01:09:41Z", "message": "Remove Jackson from dd-trace-ot\n\nReduced the size of dd-java-agent jar by about 2 MB. Jackson is not removed completely though as it is still a dependency of jmxfetch.\n\nTrace serialization is primarily done directly with msgpack.\nResponse deserialization and LoggingWriter serialization is done with mochi.\n\nMsgpack Serialization buffer still not being reused though."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MzM1MzE1", "url": "https://github.com/DataDog/dd-trace-java/pull/1185#pullrequestreview-347335315", "createdAt": "2020-01-23T14:25:58Z", "commit": {"oid": "af212af4f510772d150eaa0b59bb186ad2ccf387"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNDoyNTo1OVrOFg__sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxNDoyNTo1OVrOFg__sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDE0NzI1MQ==", "bodyText": "else with an exception for unsupported types?", "url": "https://github.com/DataDog/dd-trace-java/pull/1185#discussion_r370147251", "createdAt": "2020-01-23T14:25:59Z", "author": {"login": "dougqh"}, "path": "dd-trace-ot/src/main/java/datadog/trace/common/serialization/FormatWriter.java", "diffHunk": "@@ -0,0 +1,101 @@\n+package datadog.trace.common.serialization;\n+\n+import datadog.opentracing.DDSpan;\n+import java.io.IOException;\n+import java.math.BigInteger;\n+import java.util.List;\n+import java.util.Map;\n+\n+public abstract class FormatWriter<DEST> {\n+  public abstract void writeKey(String key, DEST destination) throws IOException;\n+\n+  public abstract void writeListHeader(int size, DEST destination) throws IOException;\n+\n+  public abstract void writeListFooter(DEST destination) throws IOException;\n+\n+  public abstract void writeMapHeader(int size, DEST destination) throws IOException;\n+\n+  public abstract void writeMapFooter(DEST destination) throws IOException;\n+\n+  public abstract void writeString(String key, String value, DEST destination) throws IOException;\n+\n+  public abstract void writeShort(String key, short value, DEST destination) throws IOException;\n+\n+  public abstract void writeByte(String key, byte value, DEST destination) throws IOException;\n+\n+  public abstract void writeInt(String key, int value, DEST destination) throws IOException;\n+\n+  public abstract void writeLong(String key, long value, DEST destination) throws IOException;\n+\n+  public abstract void writeFloat(String key, float value, DEST destination) throws IOException;\n+\n+  public abstract void writeDouble(String key, double value, DEST destination) throws IOException;\n+\n+  public abstract void writeBigInteger(String key, BigInteger value, DEST destination)\n+      throws IOException;\n+\n+  public void writeNumber(final String key, final Number value, final DEST destination)\n+      throws IOException {\n+    if (value instanceof Double) {\n+      writeDouble(key, value.doubleValue(), destination);\n+    } else if (value instanceof Long) {\n+      writeLong(key, value.longValue(), destination);\n+    } else if (value instanceof Integer) {\n+      writeInt(key, value.intValue(), destination);\n+    } else if (value instanceof Float) {\n+      writeFloat(key, value.floatValue(), destination);\n+    } else if (value instanceof Byte) {\n+      writeByte(key, value.byteValue(), destination);\n+    } else if (value instanceof Short) {\n+      writeShort(key, value.shortValue(), destination);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af212af4f510772d150eaa0b59bb186ad2ccf387"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MzM4Njk3", "url": "https://github.com/DataDog/dd-trace-java/pull/1185#pullrequestreview-347338697", "createdAt": "2020-01-23T14:30:20Z", "commit": {"oid": "af212af4f510772d150eaa0b59bb186ad2ccf387"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "697d4972a8cb75be75cbf62dde4166be7b72e1c9", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/697d4972a8cb75be75cbf62dde4166be7b72e1c9", "committedDate": "2020-01-31T20:59:43Z", "message": "Remove Jackson from dd-trace-ot\n\nReduced the size of dd-java-agent jar by about 2 MB. Jackson is not removed completely though as it is still a dependency of jmxfetch.\n\nTrace serialization is primarily done directly with msgpack.\nResponse deserialization and LoggingWriter serialization is done with mochi.\n\nMsgpack Serialization buffer still not being reused though."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af212af4f510772d150eaa0b59bb186ad2ccf387", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/af212af4f510772d150eaa0b59bb186ad2ccf387", "committedDate": "2020-01-23T01:09:41Z", "message": "Remove Jackson from dd-trace-ot\n\nReduced the size of dd-java-agent jar by about 2 MB. Jackson is not removed completely though as it is still a dependency of jmxfetch.\n\nTrace serialization is primarily done directly with msgpack.\nResponse deserialization and LoggingWriter serialization is done with mochi.\n\nMsgpack Serialization buffer still not being reused though."}, "afterCommit": {"oid": "697d4972a8cb75be75cbf62dde4166be7b72e1c9", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/697d4972a8cb75be75cbf62dde4166be7b72e1c9", "committedDate": "2020-01-31T20:59:43Z", "message": "Remove Jackson from dd-trace-ot\n\nReduced the size of dd-java-agent jar by about 2 MB. Jackson is not removed completely though as it is still a dependency of jmxfetch.\n\nTrace serialization is primarily done directly with msgpack.\nResponse deserialization and LoggingWriter serialization is done with mochi.\n\nMsgpack Serialization buffer still not being reused though."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNTI4Mjk3", "url": "https://github.com/DataDog/dd-trace-java/pull/1185#pullrequestreview-352528297", "createdAt": "2020-02-03T20:07:54Z", "commit": {"oid": "697d4972a8cb75be75cbf62dde4166be7b72e1c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2681, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}