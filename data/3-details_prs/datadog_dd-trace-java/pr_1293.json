{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MjQyMjAw", "number": 1293, "title": "Scale back ignores", "bodyText": "Include java-concurrent instrumentation in all instrumentations when running tests.\nThis has uncovered bugs in java-concurrent instrumentation and grpc instrumentation which should also be fixed by this PR.", "createdAt": "2020-03-05T12:15:56Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1293", "merged": true, "mergeCommit": {"oid": "98ea5a8e870f4d3cf763297a7e106f1838f43470"}, "closed": true, "closedAt": "2020-03-06T19:34:09Z", "author": {"login": "mar-kolya"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcLCQgGgBqjMxMDU4OTkyMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcLFNWCgFqTM3MDU2ODA0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "81acf586dce02b6bcf1d9c7ab3fdb5458f3db7b8", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/81acf586dce02b6bcf1d9c7ab3fdb5458f3db7b8", "committedDate": "2020-03-06T14:57:36Z", "message": "Include classloading instrumentation into all tests\n\nClassloading instrument core JDK classes so we should make sure this\ndoesn't have bad effects on other instrumentations."}, "afterCommit": {"oid": "39bd80d6afbe349f96fae1f95fbd38c644aa5908", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/39bd80d6afbe349f96fae1f95fbd38c644aa5908", "committedDate": "2020-03-06T15:56:55Z", "message": "Include classloading instrumentation into all tests\n\nClassloading instrument core JDK classes so we should make sure this\ndoesn't have bad effects on other instrumentations."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "839deb779d6f1d659a505432a816cc6ce534ca25", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/839deb779d6f1d659a505432a816cc6ce534ca25", "committedDate": "2020-03-06T18:49:55Z", "message": "Add java-concurrent as a dependency to all instrumentations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1c9ffa571ca82c8fc2ac52d2f23583b3809a4e1", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c1c9ffa571ca82c8fc2ac52d2f23583b3809a4e1", "committedDate": "2020-03-06T18:49:55Z", "message": "Fix couchbase ignores"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d34aa2e9667397436e6322d632a7bb5dd123af1", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/0d34aa2e9667397436e6322d632a7bb5dd123af1", "committedDate": "2020-03-06T18:49:55Z", "message": "Stop skipping cassandra core instrumentation\n\nLooks like it has lots of runnables sprinkled all over the place"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e301761dc23d55129aa13a7e83cd6e4dc4326e17", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/e301761dc23d55129aa13a7e83cd6e4dc4326e17", "committedDate": "2020-03-06T18:49:55Z", "message": "Stop ignoring org.springframework.scheduling.annotation\n\nIt has some runnables and it is not very big"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8c625b8f0d607c74bc5923d5753d133dd9c98a7", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/a8c625b8f0d607c74bc5923d5753d133dd9c98a7", "committedDate": "2020-03-06T18:49:55Z", "message": "Fix google http client ignore matchers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab8b24655397e0225ccb67e94f3fe2c9f53b8722", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/ab8b24655397e0225ccb67e94f3fe2c9f53b8722", "committedDate": "2020-03-06T18:49:55Z", "message": "Remove asm matchers - asm is already matched elsewhere"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74161a5872303eae83f4b46a5cc39ff05658a8b4", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/74161a5872303eae83f4b46a5cc39ff05658a8b4", "committedDate": "2020-03-06T18:49:55Z", "message": "Add missng dots"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd4257627dabc3a0f9ca30d00dc8231499fd5764", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/fd4257627dabc3a0f9ca30d00dc8231499fd5764", "committedDate": "2020-03-06T18:49:55Z", "message": "Do not ignore org.springframework.util.concurrent."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "930c1fb4e96c88ca5d1e7eacd69f7bb2275705ac", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/930c1fb4e96c88ca5d1e7eacd69f7bb2275705ac", "committedDate": "2020-03-06T18:49:55Z", "message": "One more exception for h2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a261fb476074c3d06c40cf7b5f1f1021b8473d38", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/a261fb476074c3d06c40cf7b5f1f1021b8473d38", "committedDate": "2020-03-06T18:49:55Z", "message": "More spring exceptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18f9c653b9ae02eb4f516f34b6704b7b9ace4678", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/18f9c653b9ae02eb4f516f34b6704b7b9ace4678", "committedDate": "2020-03-06T18:49:55Z", "message": "Exceptions for hppc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4aac30826d05ec86432b16a2518f09199f7a38ff", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/4aac30826d05ec86432b16a2518f09199f7a38ff", "committedDate": "2020-03-06T18:49:55Z", "message": "Split Runnable and Callable instrumentations\n\nOtherwise `Runnable` may define `call` method leading to\ninstrumentation exception.\nSee `org.h2.util.Task` as an example."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51630ada628799d21876ffb87b84a72a70e92a7c", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/51630ada628799d21876ffb87b84a72a70e92a7c", "committedDate": "2020-03-06T18:49:55Z", "message": "Unignore `org.h2.util.Task`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2917034d2979e9fd7465147a3bd8cd15a98c9d15", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/2917034d2979e9fd7465147a3bd8cd15a98c9d15", "committedDate": "2020-03-06T18:49:55Z", "message": "Increase hystrix test timeout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "517ecca4c1a919002da5ffc6cc09863d309babd1", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/517ecca4c1a919002da5ffc6cc09863d309babd1", "committedDate": "2020-03-06T18:50:51Z", "message": "Remove explicit concurrent instrumentation dependencies\n\nSince we include concurrent instrumentation for all instrumentatin\nprojects now there is no point in including it in every instrumentation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46b776f76af51f57a361161cc0a70db7e1966144", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/46b776f76af51f57a361161cc0a70db7e1966144", "committedDate": "2020-03-06T18:50:56Z", "message": "Include classloading instrumentation into all tests\n\nClassloading instrument core JDK classes so we should make sure this\ndoesn't have bad effects on other instrumentations."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39bd80d6afbe349f96fae1f95fbd38c644aa5908", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/39bd80d6afbe349f96fae1f95fbd38c644aa5908", "committedDate": "2020-03-06T15:56:55Z", "message": "Include classloading instrumentation into all tests\n\nClassloading instrument core JDK classes so we should make sure this\ndoesn't have bad effects on other instrumentations."}, "afterCommit": {"oid": "46b776f76af51f57a361161cc0a70db7e1966144", "author": {"user": {"login": "mar-kolya", "name": "Nikolay Martynov"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/46b776f76af51f57a361161cc0a70db7e1966144", "committedDate": "2020-03-06T18:50:56Z", "message": "Include classloading instrumentation into all tests\n\nClassloading instrument core JDK classes so we should make sure this\ndoesn't have bad effects on other instrumentations."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNTY4MDQw", "url": "https://github.com/DataDog/dd-trace-java/pull/1293#pullrequestreview-370568040", "createdAt": "2020-03-06T19:22:37Z", "commit": {"oid": "46b776f76af51f57a361161cc0a70db7e1966144"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOToyMjozN1rOFzEeKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOToyMjozN1rOFzEeKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA5NDk1Mg==", "bodyText": "nice call adding this too.", "url": "https://github.com/DataDog/dd-trace-java/pull/1293#discussion_r389094952", "createdAt": "2020-03-06T19:22:37Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/instrumentation/instrumentation.gradle", "diffHunk": "@@ -56,6 +56,12 @@ subprojects { Project subProj ->\n       annotationProcessor deps.autoservice\n       implementation deps.autoservice\n \n+      // Include instrumentations instrumenting core JDK classes tp ensure interoperability with other instrumentation\n+      testCompile project(':dd-java-agent:instrumentation:java-concurrent')\n+      // FIXME: we should enable this, but currently this fails tests for google http client\n+      //testCompile project(':dd-java-agent:instrumentation:http-url-connection')\n+      testCompile project(':dd-java-agent:instrumentation:classloading')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46b776f76af51f57a361161cc0a70db7e1966144"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2550, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}