{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNTgwMzMz", "number": 2148, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQyMToyMDoxOVrOE_WBwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQyMTozNTowN1rOE_WUbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0ODU2NjQyOnYy", "diffSide": "RIGHT", "path": "dd-trace-core/src/test/groovy/datadog/trace/common/writer/DDAgentWriterCombinedTest.groovy", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQyMToyMDoxOVrOH9ANCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQyMToyMDoxOVrOH9ANCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzcyODUyMQ==", "bodyText": "This makes the writer busy spin until the trace is published iff the queue is full", "url": "https://github.com/DataDog/dd-trace-java/pull/2148#discussion_r533728521", "createdAt": "2020-12-01T21:20:19Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/test/groovy/datadog/trace/common/writer/DDAgentWriterCombinedTest.groovy", "diffHunk": "@@ -182,6 +184,7 @@ class DDAgentWriterCombinedTest extends DDSpecification {\n     def writer = DDAgentWriter.builder()\n       .agentApi(api)\n       .traceBufferSize(BUFFER_SIZE)\n+      .prioritization(ENSURE_TRACE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b5dcb7f937c6d13a4fda153a9a8817e406b4002"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0ODYxNDIwOnYy", "diffSide": "LEFT", "path": "dd-trace-core/src/test/groovy/datadog/trace/common/writer/DDAgentWriterCombinedTest.groovy", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQyMTozNTowN1rOH9ArIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQyMTozNTowN1rOH9ArIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzczNjIyNQ==", "bodyText": "Interestingly, this test can now run at what would be one microsecond per trace on my macbook (which still feels like quite a lot)", "url": "https://github.com/DataDog/dd-trace-java/pull/2148#discussion_r533736225", "createdAt": "2020-12-01T21:35:07Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/test/groovy/datadog/trace/common/writer/DDAgentWriterCombinedTest.groovy", "diffHunk": "@@ -193,11 +194,6 @@ class DDAgentWriterCombinedTest extends DDSpecification {\n     int maxedPayloadTraceCount = ((int) ((mapper.messageBufferSize() - 5) / traceSize))\n     (0..maxedPayloadTraceCount).each {\n       writer.write(minimalTrace)\n-      def start = System.nanoTime()\n-      // (consumer processes a trace in about 20 microseconds", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df25e9e3bf65474cac412f81475895e007c32e8f"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4656, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}