{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyMTMyNDMy", "number": 1979, "title": "Fix flaky netty executor instrumentation test", "bodyText": "", "createdAt": "2020-10-13T09:22:30Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1979", "merged": true, "mergeCommit": {"oid": "d866d8bebcf0993e696ea9c961074e12721ee184"}, "closed": true, "closedAt": "2020-10-13T18:24:47Z", "author": {"login": "richardstartin"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSFiVbABqjM4NzAzOTM3ODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSL4nYAH2gAyNTAyMTMyNDMyOmU3NGFkZTQ1Zjk2ZmJlNjViZDUwN2ZiYzMwNTVkNjA3OWY0ZTJkZGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7be93f3d706dc7da51c2082210b5ec00ae73a4fc", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/7be93f3d706dc7da51c2082210b5ec00ae73a4fc", "committedDate": "2020-10-13T09:21:47Z", "message": "separate netty executor tests to avoid creating so many groups"}, "afterCommit": {"oid": "635aa4a043bde405923e9a5745729c61a8f96a9a", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/635aa4a043bde405923e9a5745729c61a8f96a9a", "committedDate": "2020-10-13T09:54:39Z", "message": "separate netty executor tests to avoid creating so many groups"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "635aa4a043bde405923e9a5745729c61a8f96a9a", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/635aa4a043bde405923e9a5745729c61a8f96a9a", "committedDate": "2020-10-13T09:54:39Z", "message": "separate netty executor tests to avoid creating so many groups"}, "afterCommit": {"oid": "c18557de02ec5f0cb35701f0694444847f2a06c2", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c18557de02ec5f0cb35701f0694444847f2a06c2", "committedDate": "2020-10-13T10:15:53Z", "message": "separate netty executor tests to avoid creating so many groups"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MzE1NTQ4", "url": "https://github.com/DataDog/dd-trace-java/pull/1979#pullrequestreview-507315548", "createdAt": "2020-10-13T11:02:16Z", "commit": {"oid": "c18557de02ec5f0cb35701f0694444847f2a06c2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MzIzMjI3", "url": "https://github.com/DataDog/dd-trace-java/pull/1979#pullrequestreview-507323227", "createdAt": "2020-10-13T11:13:14Z", "commit": {"oid": "c18557de02ec5f0cb35701f0694444847f2a06c2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c18557de02ec5f0cb35701f0694444847f2a06c2", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c18557de02ec5f0cb35701f0694444847f2a06c2", "committedDate": "2020-10-13T10:15:53Z", "message": "separate netty executor tests to avoid creating so many groups"}, "afterCommit": {"oid": "e8ad7e4ee230f488fc506b4a8fbb1b7af5d26ac1", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/e8ad7e4ee230f488fc506b4a8fbb1b7af5d26ac1", "committedDate": "2020-10-13T12:06:18Z", "message": "separate netty executor tests to avoid creating so many groups"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77039198d962fa055e96e0ba153a296c3a37073c", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/77039198d962fa055e96e0ba153a296c3a37073c", "committedDate": "2020-10-13T13:30:23Z", "message": "make injected field volatile"}, "afterCommit": {"oid": "cf913bb4df60a4489d6b2e2d73a4de3815c99f85", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/cf913bb4df60a4489d6b2e2d73a4de3815c99f85", "committedDate": "2020-10-13T13:49:16Z", "message": "remove unnecessary context store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23ca22f9d158eb53bd17810e1c7075cef08dbbaa", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/23ca22f9d158eb53bd17810e1c7075cef08dbbaa", "committedDate": "2020-10-13T14:05:38Z", "message": "separate netty executor tests to avoid creating so many groups"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d84a162833368cac5ed4ea2d23f325347759a05", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/6d84a162833368cac5ed4ea2d23f325347759a05", "committedDate": "2020-10-13T14:05:38Z", "message": "remove unnecessary context store"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf913bb4df60a4489d6b2e2d73a4de3815c99f85", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/cf913bb4df60a4489d6b2e2d73a4de3815c99f85", "committedDate": "2020-10-13T13:49:16Z", "message": "remove unnecessary context store"}, "afterCommit": {"oid": "6d84a162833368cac5ed4ea2d23f325347759a05", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/6d84a162833368cac5ed4ea2d23f325347759a05", "committedDate": "2020-10-13T14:05:38Z", "message": "remove unnecessary context store"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NDg5NTk1", "url": "https://github.com/DataDog/dd-trace-java/pull/1979#pullrequestreview-507489595", "createdAt": "2020-10-13T14:21:03Z", "commit": {"oid": "3a5bb55353904ec4e80b11bfe566cd2b1a09bcba"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTExMDY3", "url": "https://github.com/DataDog/dd-trace-java/pull/1979#pullrequestreview-507511067", "createdAt": "2020-10-13T14:40:21Z", "commit": {"oid": "3a5bb55353904ec4e80b11bfe566cd2b1a09bcba"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNDo0MDoyMVrOHgqO7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNDo0MDoyMVrOHgqO7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAwODQzMA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/DataDog/dd-trace-java/pull/1979#discussion_r504008430", "createdAt": "2020-10-13T14:40:21Z", "author": {"login": "bantonsson"}, "path": "dd-java-agent/instrumentation/java-concurrent/src/main/java/datadog/trace/instrumentation/java/concurrent/JavaForkJoinTaskInstrumentation.java", "diffHunk": "@@ -58,7 +59,7 @@ public boolean matches(TypeDescription target) {\n   @Override\n   public Map<? extends ElementMatcher<? super MethodDescription>, String> transformers() {\n     Map<ElementMatcher<MethodDescription>, String> transformers = new HashMap<>(4);\n-    transformers.put(isMethod().and(named(\"exec\")), getClass().getName() + \"$Exec\");\n+    transformers.put(isMethod().and(namedOneOf(\"doExec\", \"exec\")), getClass().getName() + \"$Exec\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a5bb55353904ec4e80b11bfe566cd2b1a09bcba"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a5bb55353904ec4e80b11bfe566cd2b1a09bcba", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/3a5bb55353904ec4e80b11bfe566cd2b1a09bcba", "committedDate": "2020-10-13T14:12:46Z", "message": "instrument doExec for cases where work is stolen"}, "afterCommit": {"oid": "a9e44ab8648dc94a23a43434950de3453ad7a764", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/a9e44ab8648dc94a23a43434950de3453ad7a764", "committedDate": "2020-10-13T14:55:15Z", "message": "instrument doExec for cases where work is stolen"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "038ace3590cf0e66f3dc6b81984a2f91bd96ccba", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/038ace3590cf0e66f3dc6b81984a2f91bd96ccba", "committedDate": "2020-10-13T15:22:46Z", "message": "instrument FJT.doExec, permit UnorderedThreadPoolEventExecutor"}, "afterCommit": {"oid": "6ff9c1c01163de5cdd9a051d0193602e3d90417d", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/6ff9c1c01163de5cdd9a051d0193602e3d90417d", "committedDate": "2020-10-13T15:38:29Z", "message": "instrument FJT.doExec, remove UnorderedThreadPoolEventExecutor from tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39f9044035aae40d2194c954a042a9073f2f294f", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/39f9044035aae40d2194c954a042a9073f2f294f", "committedDate": "2020-10-13T15:40:00Z", "message": "instrument doExec for cases where work is stolen, remove UnorderedThreadPoolEventExecutor from tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ff9c1c01163de5cdd9a051d0193602e3d90417d", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/6ff9c1c01163de5cdd9a051d0193602e3d90417d", "committedDate": "2020-10-13T15:38:29Z", "message": "instrument FJT.doExec, remove UnorderedThreadPoolEventExecutor from tests"}, "afterCommit": {"oid": "39f9044035aae40d2194c954a042a9073f2f294f", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/39f9044035aae40d2194c954a042a9073f2f294f", "committedDate": "2020-10-13T15:40:00Z", "message": "instrument doExec for cases where work is stolen, remove UnorderedThreadPoolEventExecutor from tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5c68876b30da76e83f3599c0632c88575593b60", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/a5c68876b30da76e83f3599c0632c88575593b60", "committedDate": "2020-10-13T16:51:19Z", "message": "prevent RunnableFuture instrumentation from interfering with ForkJoinTask adapater classes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NjUyMzQy", "url": "https://github.com/DataDog/dd-trace-java/pull/1979#pullrequestreview-507652342", "createdAt": "2020-10-13T17:00:41Z", "commit": {"oid": "a5c68876b30da76e83f3599c0632c88575593b60"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNzowMDo0MVrOHgw2EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNzowMToxMlrOHgw3YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDExNjc1Mw==", "bodyText": "This shouldn't be needed...", "url": "https://github.com/DataDog/dd-trace-java/pull/1979#discussion_r504116753", "createdAt": "2020-10-13T17:00:41Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/instrumentation/akka-concurrent/src/main/java/datadog/trace/instrumentation/akka/concurrent/AkkaForkJoinTaskInstrumentation.java", "diffHunk": "@@ -44,6 +52,22 @@ public AkkaForkJoinTaskInstrumentation() {\n     return named(\"akka.dispatch.forkjoin.ForkJoinTask\");\n   }\n \n+  @Override\n+  public boolean isEnabled() {\n+    return true;\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5c68876b30da76e83f3599c0632c88575593b60"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDExNzA4OQ==", "bodyText": "or this", "url": "https://github.com/DataDog/dd-trace-java/pull/1979#discussion_r504117089", "createdAt": "2020-10-13T17:01:12Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/instrumentation/java-concurrent/src/main/java/datadog/trace/instrumentation/java/concurrent/JavaForkJoinTaskInstrumentation.java", "diffHunk": "@@ -58,12 +65,28 @@ public boolean matches(TypeDescription target) {\n   @Override\n   public Map<? extends ElementMatcher<? super MethodDescription>, String> transformers() {\n     Map<ElementMatcher<MethodDescription>, String> transformers = new HashMap<>(4);\n-    transformers.put(isMethod().and(named(\"exec\")), getClass().getName() + \"$Exec\");\n+    transformers.put(isMethod().and(namedOneOf(\"doExec\", \"exec\")), getClass().getName() + \"$Exec\");\n     transformers.put(isMethod().and(named(\"fork\")), getClass().getName() + \"$Fork\");\n     transformers.put(isMethod().and(named(\"cancel\")), getClass().getName() + \"$Cancel\");\n     return Collections.unmodifiableMap(transformers);\n   }\n \n+  @Override\n+  public boolean isEnabled() {\n+    return true;\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5c68876b30da76e83f3599c0632c88575593b60"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NjU0OTEx", "url": "https://github.com/DataDog/dd-trace-java/pull/1979#pullrequestreview-507654911", "createdAt": "2020-10-13T17:04:01Z", "commit": {"oid": "a5c68876b30da76e83f3599c0632c88575593b60"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNzowNDowMVrOHgw9sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNzowNDowMVrOHgw9sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDExODcwNA==", "bodyText": "Is there are reason we don't want enabling/disabling to work like every other instrumentation?", "url": "https://github.com/DataDog/dd-trace-java/pull/1979#discussion_r504118704", "createdAt": "2020-10-13T17:04:01Z", "author": {"login": "randomanderson"}, "path": "dd-java-agent/instrumentation/akka-concurrent/src/main/java/datadog/trace/instrumentation/akka/concurrent/AkkaForkJoinTaskInstrumentation.java", "diffHunk": "@@ -44,6 +52,22 @@ public AkkaForkJoinTaskInstrumentation() {\n     return named(\"akka.dispatch.forkjoin.ForkJoinTask\");\n   }\n \n+  @Override\n+  public boolean isEnabled() {\n+    return true;\n+  }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5c68876b30da76e83f3599c0632c88575593b60"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e74ade45f96fbe65bd507fbc3055d6079f4e2dde", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/e74ade45f96fbe65bd507fbc3055d6079f4e2dde", "committedDate": "2020-10-13T17:18:40Z", "message": "restrict instrumented RunnableFuture classes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2968, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}