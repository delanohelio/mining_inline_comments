{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NDk2NjM3", "number": 1225, "title": "Introduce the LogsHandler", "bodyText": "", "createdAt": "2020-02-14T17:33:11Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1225", "merged": true, "mergeCommit": {"oid": "a86d22937878266b2c78986c160a7c272c8e54d0"}, "closed": true, "closedAt": "2020-03-02T15:40:28Z", "author": {"login": "mariusc83"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcETEVzgBqjMwMzk1NTg3MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIzuyEABqjMwODI5MTYyNDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0916b08c3e34a660f205180fd5383951a1048ec1", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/0916b08c3e34a660f205180fd5383951a1048ec1", "committedDate": "2020-02-14T17:32:40Z", "message": "Introduce the LogsHandler"}, "afterCommit": {"oid": "9c26cacbaa17953d6358a3a02f6e83b01be53622", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/9c26cacbaa17953d6358a3a02f6e83b01be53622", "committedDate": "2020-02-14T17:34:34Z", "message": "Introduce the LogsHandler"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c26cacbaa17953d6358a3a02f6e83b01be53622", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/9c26cacbaa17953d6358a3a02f6e83b01be53622", "committedDate": "2020-02-14T17:34:34Z", "message": "Introduce the LogsHandler"}, "afterCommit": {"oid": "c287dbbf895e0c6182b9a33170b693f354d11244", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/c287dbbf895e0c6182b9a33170b693f354d11244", "committedDate": "2020-02-14T18:13:09Z", "message": "Introduce the LogsHandler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MzAyMDIy", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#pullrequestreview-365302022", "createdAt": "2020-02-26T22:48:53Z", "commit": {"oid": "c287dbbf895e0c6182b9a33170b693f354d11244"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMjo0ODo1NFrOFu_QXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMjo1MDoyNVrOFu_Shg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgxNTE5Ng==", "bodyText": "What about making the previous behavior be the default logHandler?\nThen this method would simply call\nlogHandler.log(map);", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#discussion_r384815196", "createdAt": "2020-02-26T22:48:54Z", "author": {"login": "tylerbenson"}, "path": "dd-trace-ot/src/main/java/datadog/opentracing/DDSpan.java", "diffHunk": "@@ -227,7 +242,9 @@ public final DDSpan setOperationName(final String operationName) {\n    */\n   @Override\n   public final DDSpan log(final Map<String, ?> map) {\n-    if (!extractError(map)) {\n+    if (!extractError(map) && logsHandler != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c287dbbf895e0c6182b9a33170b693f354d11244"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgxNTYwOA==", "bodyText": "This could start with the Default implementation instead of null.", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#discussion_r384815608", "createdAt": "2020-02-26T22:50:03Z", "author": {"login": "tylerbenson"}, "path": "dd-trace-ot/src/main/java/datadog/opentracing/DDTracer.java", "diffHunk": "@@ -580,6 +580,7 @@ private static DDScopeEventFactory createScopeEventFactory() {\n     private boolean errorFlag;\n     private String spanType;\n     private boolean ignoreScope = false;\n+    private LogsHandler logsHandler = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c287dbbf895e0c6182b9a33170b693f354d11244"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgxNTc1MA==", "bodyText": "Assert logsHandler is never set to null.", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#discussion_r384815750", "createdAt": "2020-02-26T22:50:25Z", "author": {"login": "tylerbenson"}, "path": "dd-trace-ot/src/main/java/datadog/opentracing/DDTracer.java", "diffHunk": "@@ -670,6 +671,11 @@ public DDSpanBuilder withSpanType(final String spanType) {\n       return parent.baggageItems();\n     }\n \n+    public DDSpanBuilder withLogsHandler(LogsHandler logsHandler) {\n+      this.logsHandler = logsHandler;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c287dbbf895e0c6182b9a33170b693f354d11244"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MzAzNzMz", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#pullrequestreview-365303733", "createdAt": "2020-02-26T22:52:24Z", "commit": {"oid": "c287dbbf895e0c6182b9a33170b693f354d11244"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMjo1MjoyNFrOFu_Vpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMjo1MjoyNFrOFu_Vpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgxNjU1MQ==", "bodyText": "One more thing... lets go with LogHandler", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#discussion_r384816551", "createdAt": "2020-02-26T22:52:24Z", "author": {"login": "tylerbenson"}, "path": "dd-trace-ot/src/main/java/datadog/opentracing/LogsHandler.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package datadog.opentracing;\n+\n+import java.util.Map;\n+\n+public interface LogsHandler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c287dbbf895e0c6182b9a33170b693f354d11244"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a7581fedc9d0289ec053970f1f47ec7604395e4", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/2a7581fedc9d0289ec053970f1f47ec7604395e4", "committedDate": "2020-02-27T10:04:52Z", "message": "Add the DefaultLogHandler implementation"}, "afterCommit": {"oid": "56bc7ddb42f1e2dacd4b1e3466fe17c55ca9f4f8", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/56bc7ddb42f1e2dacd4b1e3466fe17c55ca9f4f8", "committedDate": "2020-02-27T11:55:17Z", "message": "Add the DefaultLogHandler implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "56bc7ddb42f1e2dacd4b1e3466fe17c55ca9f4f8", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/56bc7ddb42f1e2dacd4b1e3466fe17c55ca9f4f8", "committedDate": "2020-02-27T11:55:17Z", "message": "Add the DefaultLogHandler implementation"}, "afterCommit": {"oid": "bdc8a27fe97b4d599ec346d8f3f3f96657a7abec", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/bdc8a27fe97b4d599ec346d8f3f3f96657a7abec", "committedDate": "2020-02-27T12:21:07Z", "message": "Add the DefaultLogHandler implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NjQwNjIz", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#pullrequestreview-365640623", "createdAt": "2020-02-27T12:28:39Z", "commit": {"oid": "bdc8a27fe97b4d599ec346d8f3f3f96657a7abec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMjoyODozOVrOFvQX0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMjoyODozOVrOFvQX0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA5NTYzMg==", "bodyText": "I guess this should stay here...it is decorating the current span with the relevant information from the map (attributes). I don't think it's the LogHandler's responsibility to do this.", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#discussion_r385095632", "createdAt": "2020-02-27T12:28:39Z", "author": {"login": "mariusc83"}, "path": "dd-trace-ot/src/main/java/datadog/opentracing/DDSpan.java", "diffHunk": "@@ -238,9 +252,8 @@ public final DDSpan log(final Map<String, ?> map) {\n    */\n   @Override\n   public final DDSpan log(final long l, final Map<String, ?> map) {\n-    if (!extractError(map)) {\n-      log.debug(\"`log` method is not implemented. Doing nothing\");\n-    }\n+    extractError(map);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdc8a27fe97b4d599ec346d8f3f3f96657a7abec"}, "originalPosition": 49}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bdc8a27fe97b4d599ec346d8f3f3f96657a7abec", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/bdc8a27fe97b4d599ec346d8f3f3f96657a7abec", "committedDate": "2020-02-27T12:21:07Z", "message": "Add the DefaultLogHandler implementation"}, "afterCommit": {"oid": "f523ee26075d62577cad486b985923305dabd068", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/f523ee26075d62577cad486b985923305dabd068", "committedDate": "2020-02-27T12:31:35Z", "message": "Add the DefaultLogHandler implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1ODMwNTAx", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#pullrequestreview-365830501", "createdAt": "2020-02-27T16:57:37Z", "commit": {"oid": "f523ee26075d62577cad486b985923305dabd068"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNjo1NzozOFrOFvZPOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNjo1NzozOFrOFvZPOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI0MDg5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  assert logHandler != null : \"LogHandler must not be null\";\n          \n          \n            \n                  this.logHandler = logHandler;\n          \n          \n            \n                  if(logHandler != null) {\n          \n          \n            \n                      this.logHandler = logHandler;\n          \n          \n            \n                  }\n          \n      \n    \n    \n  \n\nNow that I think about it, I think this is a better option...  Avoids the risk of harmful exceptions.", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#discussion_r385240890", "createdAt": "2020-02-27T16:57:38Z", "author": {"login": "tylerbenson"}, "path": "dd-trace-ot/src/main/java/datadog/opentracing/DDTracer.java", "diffHunk": "@@ -670,6 +671,12 @@ public DDSpanBuilder withSpanType(final String spanType) {\n       return parent.baggageItems();\n     }\n \n+    public DDSpanBuilder withLogHandler(final LogHandler logHandler) {\n+      assert logHandler != null : \"LogHandler must not be null\";\n+      this.logHandler = logHandler;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f523ee26075d62577cad486b985923305dabd068"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6560b51e375aefc5545754d80f60a057d080b82", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/a6560b51e375aefc5545754d80f60a057d080b82", "committedDate": "2020-02-28T07:55:35Z", "message": "Apply code review changes"}, "afterCommit": {"oid": "349c57e687b5fb5de8244365a05f62dc254eb658", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/349c57e687b5fb5de8244365a05f62dc254eb658", "committedDate": "2020-02-28T08:12:10Z", "message": "Apply code review changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "349c57e687b5fb5de8244365a05f62dc254eb658", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/349c57e687b5fb5de8244365a05f62dc254eb658", "committedDate": "2020-02-28T08:12:10Z", "message": "Apply code review changes"}, "afterCommit": {"oid": "4ff068df9c514384facf31d1af3d3071e434a272", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/4ff068df9c514384facf31d1af3d3071e434a272", "committedDate": "2020-02-28T09:22:17Z", "message": "Apply code review changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NTc2MDE0", "url": "https://github.com/DataDog/dd-trace-java/pull/1225#pullrequestreview-366576014", "createdAt": "2020-02-28T17:50:40Z", "commit": {"oid": "4ff068df9c514384facf31d1af3d3071e434a272"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cd2d9f79b7848d9e7873eb19e917d4e6233a935", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/6cd2d9f79b7848d9e7873eb19e917d4e6233a935", "committedDate": "2020-02-28T17:53:35Z", "message": "Introduce the LogsHandler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b24ae8d6387868c7a69ed601a79277e1d9688d63", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/b24ae8d6387868c7a69ed601a79277e1d9688d63", "committedDate": "2020-02-28T17:53:35Z", "message": "Add the DefaultLogHandler implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d36201c9dc8e63c1e5e066c1d71aa8ac3545a87f", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/d36201c9dc8e63c1e5e066c1d71aa8ac3545a87f", "committedDate": "2020-02-28T17:53:35Z", "message": "Apply code review changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ff068df9c514384facf31d1af3d3071e434a272", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/4ff068df9c514384facf31d1af3d3071e434a272", "committedDate": "2020-02-28T09:22:17Z", "message": "Apply code review changes"}, "afterCommit": {"oid": "d36201c9dc8e63c1e5e066c1d71aa8ac3545a87f", "author": {"user": {"login": "mariusc83", "name": "Marius Constantin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/d36201c9dc8e63c1e5e066c1d71aa8ac3545a87f", "committedDate": "2020-02-28T17:53:35Z", "message": "Apply code review changes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2722, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}