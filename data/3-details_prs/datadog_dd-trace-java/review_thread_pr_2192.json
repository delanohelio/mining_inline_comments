{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2ODcyNDg1", "number": 2192, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMjo1MToyMFrOFD-K5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDo1ODoyNVrOFEBhfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NzA4NjQ3OnYy", "diffSide": "RIGHT", "path": "dd-trace-core/src/main/java/datadog/trace/common/metrics/SerializingMetricWriter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMjo1MToyMFrOID3cdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxMjo1MToyMFrOID3cdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDkyNTA0NQ==", "bodyText": "Within the context of writer.format buffer resizes can be managed", "url": "https://github.com/DataDog/dd-trace-java/pull/2192#discussion_r540925045", "createdAt": "2020-12-11T12:51:20Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/main/java/datadog/trace/common/metrics/SerializingMetricWriter.java", "diffHunk": "@@ -71,41 +73,58 @@ public void startBucket(int metricCount, long start, long duration) {\n \n   @Override\n   public void add(MetricKey key, AggregateMetric aggregate) {\n-    writer.startMap(10);\n+    writer.format(\n+        new Metric(key, aggregate),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11155a8d9f13b631cecada13f7c7c6928f5adab4"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NzYzNTgyOnYy", "diffSide": "RIGHT", "path": "dd-trace-core/src/main/java/datadog/trace/common/metrics/Aggregator.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDo1ODoyNVrOID8avg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDo1ODoyNVrOID8avg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAwNjUyNg==", "bodyText": "Oh, sneaky.", "url": "https://github.com/DataDog/dd-trace-java/pull/2192#discussion_r541006526", "createdAt": "2020-12-11T14:58:25Z", "author": {"login": "bantonsson"}, "path": "dd-trace-core/src/main/java/datadog/trace/common/metrics/Aggregator.java", "diffHunk": "@@ -36,7 +36,7 @@\n     this.writer = writer;\n     this.batchPool = batchPool;\n     this.inbox = inbox;\n-    this.aggregates = new LRUCache<>(maxAggregates, 0.75f, maxAggregates * 4 / 3);\n+    this.aggregates = new LRUCache<>(maxAggregates * 4 / 3, 0.75f, maxAggregates);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4a81b538ede5b37a48343a6c162a32982e632b9"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4532, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}