{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MzMyNDQ1", "number": 1505, "title": "add assertions about metrics", "bodyText": "Recovers the metrics asserts from the abandoned #1484\nAlso interns some constant metric names I spotted.", "createdAt": "2020-05-28T08:31:24Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1505", "merged": true, "mergeCommit": {"oid": "58de27ab6c9d4d2290dac857afdf85c9dbcd7a0f"}, "closed": true, "closedAt": "2020-05-28T18:07:35Z", "author": {"login": "richardstartin"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclpsw-gBqjMzODE3MTkyNzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclukFyAFqTQyMDE1MjM4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ee5bcd686c6dc376c15e2003505a86b40565e0b", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/9ee5bcd686c6dc376c15e2003505a86b40565e0b", "committedDate": "2020-05-28T08:29:11Z", "message": "add assertions about metrics"}, "afterCommit": {"oid": "f5b9b731c6f45a853e525bfce54e4a3f4c94b552", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/f5b9b731c6f45a853e525bfce54e4a3f4c94b552", "committedDate": "2020-05-28T08:35:46Z", "message": "add assertions about metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f5b9b731c6f45a853e525bfce54e4a3f4c94b552", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/f5b9b731c6f45a853e525bfce54e4a3f4c94b552", "committedDate": "2020-05-28T08:35:46Z", "message": "add assertions about metrics"}, "afterCommit": {"oid": "eb6c840fe472a0b74c2ebe6b5c5f9978c7ff3abb", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/eb6c840fe472a0b74c2ebe6b5c5f9978c7ff3abb", "committedDate": "2020-05-28T08:45:58Z", "message": "add assertions about metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb6c840fe472a0b74c2ebe6b5c5f9978c7ff3abb", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/eb6c840fe472a0b74c2ebe6b5c5f9978c7ff3abb", "committedDate": "2020-05-28T08:45:58Z", "message": "add assertions about metrics"}, "afterCommit": {"oid": "cfdb38bd0c419c0189ac1af278d3746786bd9707", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/cfdb38bd0c419c0189ac1af278d3746786bd9707", "committedDate": "2020-05-28T08:48:30Z", "message": "add assertions about metrics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTA5MDU1", "url": "https://github.com/DataDog/dd-trace-java/pull/1505#pullrequestreview-419909055", "createdAt": "2020-05-28T08:55:49Z", "commit": {"oid": "cfdb38bd0c419c0189ac1af278d3746786bd9707"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODo1NTo0OVrOGbr6TA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODo1NTo0OVrOGbr6TA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY4NDE3Mg==", "bodyText": "let's really revisit this at 4KB, this breached 3KB by about 10 bytes and I think we have them all now.", "url": "https://github.com/DataDog/dd-trace-java/pull/1505#discussion_r431684172", "createdAt": "2020-05-28T08:55:49Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/test/groovy/datadog/trace/core/StringTablesTest.groovy", "diffHunk": "@@ -23,8 +23,8 @@ class StringTablesTest extends Specification {\n       approxSizeBytesIgnoringHashMapOverhead += entry.getKey().length()\n       approxSizeBytesIgnoringHashMapOverhead += entry.getValue().length\n     }\n-    // less than 3KB memory overhead seems reasonable for reducing GBs of allocations\n-    expect: approxSizeBytesIgnoringHashMapOverhead < 1024 * 3\n+    // less than 4KB memory overhead seems reasonable for reducing GBs of allocations", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cfdb38bd0c419c0189ac1af278d3746786bd9707"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "112d6625d02364e0baec1e348f56cac037725475", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/112d6625d02364e0baec1e348f56cac037725475", "committedDate": "2020-05-28T09:05:04Z", "message": "add assertions about metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cfdb38bd0c419c0189ac1af278d3746786bd9707", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/cfdb38bd0c419c0189ac1af278d3746786bd9707", "committedDate": "2020-05-28T08:48:30Z", "message": "add assertions about metrics"}, "afterCommit": {"oid": "112d6625d02364e0baec1e348f56cac037725475", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/112d6625d02364e0baec1e348f56cac037725475", "committedDate": "2020-05-28T09:05:04Z", "message": "add assertions about metrics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMTUyMzgz", "url": "https://github.com/DataDog/dd-trace-java/pull/1505#pullrequestreview-420152383", "createdAt": "2020-05-28T14:16:20Z", "commit": {"oid": "112d6625d02364e0baec1e348f56cac037725475"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2306, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}