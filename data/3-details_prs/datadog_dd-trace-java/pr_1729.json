{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwMDE4OTEy", "number": 1729, "title": "cache hystrix resource name", "bodyText": "", "createdAt": "2020-07-31T10:38:41Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1729", "merged": true, "mergeCommit": {"oid": "e7f2d55076c719862080686f7d3f55512952fb11"}, "closed": true, "closedAt": "2020-07-31T15:27:08Z", "author": {"login": "richardstartin"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6Sa-tgBqjM2MDgwNzc5MTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6VD7NgFqTQ1OTIxNjE5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df60adc2ff9a6dc154b24dbf92578624d770f1f0", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/df60adc2ff9a6dc154b24dbf92578624d770f1f0", "committedDate": "2020-07-31T10:36:56Z", "message": "reduce redundancy in hystrix tags, cache resource name"}, "afterCommit": {"oid": "ece1c1e0028f847896b2469ab340365ac77c0899", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/ece1c1e0028f847896b2469ab340365ac77c0899", "committedDate": "2020-07-31T11:21:08Z", "message": "reduce redundancy in hystrix tags, cache resource name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ece1c1e0028f847896b2469ab340365ac77c0899", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/ece1c1e0028f847896b2469ab340365ac77c0899", "committedDate": "2020-07-31T11:21:08Z", "message": "reduce redundancy in hystrix tags, cache resource name"}, "afterCommit": {"oid": "7c3c3db53dfbb36599e7ae673c53c590ce2644df", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/7c3c3db53dfbb36599e7ae673c53c590ce2644df", "committedDate": "2020-07-31T11:32:19Z", "message": "revapi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d318fe9759c32acb1ec5f4a804d7adef770c4db", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/3d318fe9759c32acb1ec5f4a804d7adef770c4db", "committedDate": "2020-07-31T13:25:23Z", "message": "reduce redundancy in hystrix tags, cache resource name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c3c3db53dfbb36599e7ae673c53c590ce2644df", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/7c3c3db53dfbb36599e7ae673c53c590ce2644df", "committedDate": "2020-07-31T11:32:19Z", "message": "revapi"}, "afterCommit": {"oid": "3d318fe9759c32acb1ec5f4a804d7adef770c4db", "author": {"user": {"login": "richardstartin", "name": "Richard Startin"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/3d318fe9759c32acb1ec5f4a804d7adef770c4db", "committedDate": "2020-07-31T13:25:23Z", "message": "reduce redundancy in hystrix tags, cache resource name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MjE2MTkw", "url": "https://github.com/DataDog/dd-trace-java/pull/1729#pullrequestreview-459216190", "createdAt": "2020-07-31T14:25:51Z", "commit": {"oid": "3d318fe9759c32acb1ec5f4a804d7adef770c4db"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNDoyNTo1MVrOG6Kg9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNDoyNTo1MVrOG6Kg9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0Mjg3MA==", "bodyText": "This seems reasonable for a size, is there a reason for this specific number?", "url": "https://github.com/DataDog/dd-trace-java/pull/1729#discussion_r463642870", "createdAt": "2020-07-31T14:25:51Z", "author": {"login": "devinsba"}, "path": "dd-java-agent/instrumentation/hystrix-1.4/src/main/java/datadog/trace/instrumentation/hystrix/HystrixDecorator.java", "diffHunk": "@@ -1,13 +1,56 @@\n package datadog.trace.instrumentation.hystrix;\n \n+import static datadog.trace.bootstrap.instrumentation.api.InstrumentationTags.HYSTRIX_CIRCUIT_OPEN;\n+import static datadog.trace.bootstrap.instrumentation.api.InstrumentationTags.HYSTRIX_COMMAND;\n+import static datadog.trace.bootstrap.instrumentation.api.InstrumentationTags.HYSTRIX_GROUP;\n+\n import com.netflix.hystrix.HystrixInvokableInfo;\n import datadog.trace.api.DDTags;\n import datadog.trace.bootstrap.instrumentation.api.AgentSpan;\n+import datadog.trace.bootstrap.instrumentation.api.FixedSizeCache;\n import datadog.trace.bootstrap.instrumentation.decorator.BaseDecorator;\n+import java.util.Objects;\n \n public class HystrixDecorator extends BaseDecorator {\n   public static HystrixDecorator DECORATE = new HystrixDecorator();\n \n+  private static final FixedSizeCache<ResourceNameCacheKey, String> RESOURCE_NAME_CACHE =\n+      new FixedSizeCache<>(64);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d318fe9759c32acb1ec5f4a804d7adef770c4db"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2065, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}