{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5MzI2Mzk4", "number": 2065, "title": "`FieldBackedProvider` should avoid modifying `Serializable` classes without `serialVersionUID`", "bodyText": "These classes may implicitly generate a serialVersionUID based on the modified class structure which would be different if we modified the class, making the serialization incompatible.", "createdAt": "2020-11-11T16:56:34Z", "url": "https://github.com/DataDog/dd-trace-java/pull/2065", "merged": true, "mergeCommit": {"oid": "6b389acaa5ab8d340a4157a968fc121f7780b2c0"}, "closed": true, "closedAt": "2020-11-11T21:56:54Z", "author": {"login": "tylerbenson"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbhS0ogH2gAyNTE5MzI2Mzk4OjYyOGYwYWEyZDE4Y2RhZWE0NTI2NjgzYWU1MDUwYTlmMmM2NTdmOWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbkZVtgFqTUyODUyODc3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "628f0aa2d18cdaea4526683ae5050a9f2c657f9b", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/628f0aa2d18cdaea4526683ae5050a9f2c657f9b", "committedDate": "2020-11-11T17:20:37Z", "message": "`FieldBackedProvider` should avoid modifying `Serializable` classes without `serialVersionUID`\n\nThese classes may implicitly generate a serialVersionUID based on the modified class structure which would be different if we modified the class, making the serialization incompatible."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b6878b406f6632996e6698f7a0004423a02d4ae", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/7b6878b406f6632996e6698f7a0004423a02d4ae", "committedDate": "2020-11-11T16:50:53Z", "message": "`FieldBackedProvider` should avoid modifying `Serializable` classes without `serialVersionUID`\n\nThese classes may implicitly generate a serialVersionUID based on the modified class structure which would be different if we modified the class, making the serialization incompatible."}, "afterCommit": {"oid": "628f0aa2d18cdaea4526683ae5050a9f2c657f9b", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/628f0aa2d18cdaea4526683ae5050a9f2c657f9b", "committedDate": "2020-11-11T17:20:37Z", "message": "`FieldBackedProvider` should avoid modifying `Serializable` classes without `serialVersionUID`\n\nThese classes may implicitly generate a serialVersionUID based on the modified class structure which would be different if we modified the class, making the serialization incompatible."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NDMyMzc1", "url": "https://github.com/DataDog/dd-trace-java/pull/2065#pullrequestreview-528432375", "createdAt": "2020-11-11T18:30:41Z", "commit": {"oid": "628f0aa2d18cdaea4526683ae5050a9f2c657f9b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NDg3MzQ3", "url": "https://github.com/DataDog/dd-trace-java/pull/2065#pullrequestreview-528487347", "createdAt": "2020-11-11T19:52:16Z", "commit": {"oid": "628f0aa2d18cdaea4526683ae5050a9f2c657f9b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxOTo1MjoxNlrOHxb_3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxOTo1MjoxNlrOHxb_3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTYwMDk5MQ==", "bodyText": "Is the field required to be final?  I recall there aren't any visibility requirements.\nArguably, it would be safer to cast wider rather than smaller net here.", "url": "https://github.com/DataDog/dd-trace-java/pull/2065#discussion_r521600991", "createdAt": "2020-11-11T19:52:16Z", "author": {"login": "dougqh"}, "path": "dd-java-agent/agent-tooling/src/main/java/datadog/trace/agent/tooling/context/FieldBackedProvider.java", "diffHunk": "@@ -139,6 +145,14 @@ public static void resetContextMatchers() {\n                     .type(safeHasSuperType(named(entry.getKey())), classLoaderMatcher)\n                     .and(ShouldInjectFieldsMatcher.of(entry.getKey(), entry.getValue()))\n                     .and(Default.NOT_DECORATOR_MATCHER)\n+                    .and(\n+                        not(safeHasSuperType(named(\"java.io.Serializable\")))\n+                            .or(\n+                                declaresField(\n+                                    named(\"serialVersionUID\")\n+                                        .and(ElementMatchers.<FieldDescription>isStatic())\n+                                        .and(isFinal())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "628f0aa2d18cdaea4526683ae5050a9f2c657f9b"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NTI4Nzc5", "url": "https://github.com/DataDog/dd-trace-java/pull/2065#pullrequestreview-528528779", "createdAt": "2020-11-11T20:57:27Z", "commit": {"oid": "628f0aa2d18cdaea4526683ae5050a9f2c657f9b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2818, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}