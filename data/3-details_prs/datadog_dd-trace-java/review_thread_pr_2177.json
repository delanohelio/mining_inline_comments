{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MjM3NjYw", "number": 2177, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNTo0ODoyOFrOFC_tCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjo0NTozNFrOFDBoHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4Njg1MTk0OnYy", "diffSide": "RIGHT", "path": "dd-trace-core/src/main/java/datadog/trace/core/CoreSpan.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNTo0ODoyOFrOICbm7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjowMjowMVrOICcU2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQyMDM5Ng==", "bodyText": "I assume \"top level\" means that the resulting service name is different from the parent?\nI think that is something that might warrant clarification otherwise it might be confused with \"local root\".", "url": "https://github.com/DataDog/dd-trace-java/pull/2177#discussion_r539420396", "createdAt": "2020-12-09T15:48:28Z", "author": {"login": "tylerbenson"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/CoreSpan.java", "diffHunk": "@@ -55,6 +55,8 @@\n \n   boolean isMeasured();\n \n+  boolean isTopLevel();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10e960eaa40a2dd1e633279f5f1b0796d28bd6d0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQzMjE1NA==", "bodyText": "top level is a fundamental concept in the backend and the agent", "url": "https://github.com/DataDog/dd-trace-java/pull/2177#discussion_r539432154", "createdAt": "2020-12-09T16:02:01Z", "author": {"login": "richardstartin"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/CoreSpan.java", "diffHunk": "@@ -55,6 +55,8 @@\n \n   boolean isMeasured();\n \n+  boolean isTopLevel();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQyMDM5Ng=="}, "originalCommit": {"oid": "10e960eaa40a2dd1e633279f5f1b0796d28bd6d0"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NzE2NzAxOnYy", "diffSide": "RIGHT", "path": "dd-trace-core/src/main/java/datadog/trace/core/DDSpanContext.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjo0NTozNFrOICek8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjo0NTozNFrOICek8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ2OTA0MQ==", "bodyText": "High level understanding of last clause looks difficult to me. But seems like you covered all cases with tests: https://github.com/DataDog/dd-trace-java/pull/2177/files#diff-c0f34fdf7aab5b82e441f40c6c5f1931cace8e6ea59d82d7831dd575c4eb18a9R459 :)", "url": "https://github.com/DataDog/dd-trace-java/pull/2177#discussion_r539469041", "createdAt": "2020-12-09T16:45:34Z", "author": {"login": "lpriima"}, "path": "dd-trace-core/src/main/java/datadog/trace/core/DDSpanContext.java", "diffHunk": "@@ -215,6 +222,16 @@ public void setMeasured(boolean measured) {\n     }\n   }\n \n+  public boolean isTopLevel() {\n+    return topLevel;\n+  }\n+\n+  private static boolean isTopLevel(CharSequence parentServiceName, String serviceName) {\n+    return parentServiceName == null\n+        || parentServiceName.length() == 0\n+        || !serviceName.equals(parentServiceName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3334433cd13ae165eb98f22fd4edaf2b905a9d25"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4515, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}