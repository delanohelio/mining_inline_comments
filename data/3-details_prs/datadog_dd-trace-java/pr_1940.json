{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MzUzNTU4", "number": 1940, "title": "Added CI/Git information to test spans for CI providers", "bodyText": "Added CI/Git information to test spans for the following CI providers:\n\nTravisCI\nCircleCI\nAzure Pipelines\nGitHub Actions\nBuildkite\nBitBucket\nAppVeyor", "createdAt": "2020-10-01T15:33:23Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1940", "merged": true, "mergeCommit": {"oid": "bb193a8619e75c23244590f551e80dcaa7b719e5"}, "closed": true, "closedAt": "2020-10-05T12:18:42Z", "author": {"login": "drodriguezhdez"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOgjfRAH2gAyNDk2MzUzNTU4OmQ0NWQ0OWQ0Zjc0OWFjOTc3ZmY1MGQxZDUwYmI0YmMxMTk3YzI2NGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPiT2OgFqTUwMTk3MTgzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d45d49d4f749ac977ff50d1d50bb4bc1197c264d", "author": {"user": {"login": "drodriguezhdez", "name": "Daniel Rodriguez Hernandez"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/d45d49d4f749ac977ff50d1d50bb4bc1197c264d", "committedDate": "2020-10-02T07:07:54Z", "message": "Add CI providers information for Test spans"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5955fce539fb6762130ac398f413c84b324aca72", "author": {"user": {"login": "drodriguezhdez", "name": "Daniel Rodriguez Hernandez"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/5955fce539fb6762130ac398f413c84b324aca72", "committedDate": "2020-10-01T15:27:40Z", "message": "Add CI providers information for Test spans"}, "afterCommit": {"oid": "d45d49d4f749ac977ff50d1d50bb4bc1197c264d", "author": {"user": {"login": "drodriguezhdez", "name": "Daniel Rodriguez Hernandez"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/d45d49d4f749ac977ff50d1d50bb4bc1197c264d", "committedDate": "2020-10-02T07:07:54Z", "message": "Add CI providers information for Test spans"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e676aee2054c16bb35f545de46c9759cea86260a", "author": {"user": {"login": "drodriguezhdez", "name": "Daniel Rodriguez Hernandez"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/e676aee2054c16bb35f545de46c9759cea86260a", "committedDate": "2020-10-02T07:11:00Z", "message": "Use setSpanType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7548823e4c6b6c3aa4a560240b315dfcfe0f729b", "author": {"user": {"login": "drodriguezhdez", "name": "Daniel Rodriguez Hernandez"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/7548823e4c6b6c3aa4a560240b315dfcfe0f729b", "committedDate": "2020-10-02T07:42:31Z", "message": "Remove unnecesary blank lines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9e29073eea9089eee89df8d405bf8c2628523c7", "author": {"user": {"login": "drodriguezhdez", "name": "Daniel Rodriguez Hernandez"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/b9e29073eea9089eee89df8d405bf8c2628523c7", "committedDate": "2020-10-02T07:58:32Z", "message": "Clear discriminant CI env vars on test setup for TestDecoratorTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e78d8eaac18a31905d7c14520ee6be2e753166da", "author": {"user": {"login": "drodriguezhdez", "name": "Daniel Rodriguez Hernandez"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/e78d8eaac18a31905d7c14520ee6be2e753166da", "committedDate": "2020-10-02T08:12:11Z", "message": "Check Test.BUILD_SOURCE_ROOT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "582b2969cd4d016df09efa80571ac3a7ce453987", "author": {"user": {"login": "drodriguezhdez", "name": "Daniel Rodriguez Hernandez"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/582b2969cd4d016df09efa80571ac3a7ce453987", "committedDate": "2020-10-02T08:28:30Z", "message": "Check ci.pipeline.name in tests spans"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwOTgwNDk4", "url": "https://github.com/DataDog/dd-trace-java/pull/1940#pullrequestreview-500980498", "createdAt": "2020-10-02T09:16:26Z", "commit": {"oid": "582b2969cd4d016df09efa80571ac3a7ce453987"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwOToxNjoyNlrOHbmwaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwOToxNjoyNlrOHbmwaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODcwODU4NA==", "bodyText": "Do you want a hierarchy here instead?", "url": "https://github.com/DataDog/dd-trace-java/pull/1940#discussion_r498708584", "createdAt": "2020-10-02T09:16:26Z", "author": {"login": "richardstartin"}, "path": "dd-java-agent/agent-bootstrap/src/main/java/datadog/trace/bootstrap/instrumentation/decorator/TestDecorator.java", "diffHunk": "@@ -69,6 +170,20 @@ public TestDecorator() {\n       setJenkinsData();\n     } else if (System.getenv(GITLAB) != null) {\n       setGitLabData();\n+    } else if (System.getenv(TRAVIS) != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "582b2969cd4d016df09efa80571ac3a7ce453987"}, "originalPosition": 126}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMTU2NjU1", "url": "https://github.com/DataDog/dd-trace-java/pull/1940#pullrequestreview-501156655", "createdAt": "2020-10-02T13:55:08Z", "commit": {"oid": "582b2969cd4d016df09efa80571ac3a7ce453987"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNzU4NTAz", "url": "https://github.com/DataDog/dd-trace-java/pull/1940#pullrequestreview-501758503", "createdAt": "2020-10-05T06:46:55Z", "commit": {"oid": "582b2969cd4d016df09efa80571ac3a7ce453987"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwNjo0Njo1NlrOHcPY-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQwNjo0Njo1NlrOHcPY-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTM3NDMyOQ==", "bodyText": "Could this be a wildcard import?", "url": "https://github.com/DataDog/dd-trace-java/pull/1940#discussion_r499374329", "createdAt": "2020-10-05T06:46:56Z", "author": {"login": "bantonsson"}, "path": "dd-java-agent/agent-bootstrap/src/test/groovy/datadog/trace/bootstrap/instrumentation/decorator/TestDecoratorTest.groovy", "diffHunk": "@@ -6,7 +6,78 @@ import datadog.trace.bootstrap.instrumentation.api.AgentSpan\n import datadog.trace.bootstrap.instrumentation.api.Tags\n import org.junit.Rule\n import org.junit.contrib.java.lang.system.EnvironmentVariables\n+import spock.lang.Shared\n \n+import static datadog.trace.bootstrap.instrumentation.decorator.TestDecorator.APPVEYOR", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "582b2969cd4d016df09efa80571ac3a7ce453987"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5eb97bc9f1a4a9534f83acbc596a0a90407ab5df", "author": {"user": {"login": "drodriguezhdez", "name": "Daniel Rodriguez Hernandez"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/5eb97bc9f1a4a9534f83acbc596a0a90407ab5df", "committedDate": "2020-10-05T11:10:16Z", "message": "Refactor into CIProviderInfo's"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbf70c01fab2301c8453ec35178a32a67a64eab3", "author": {"user": {"login": "drodriguezhdez", "name": "Daniel Rodriguez Hernandez"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/dbf70c01fab2301c8453ec35178a32a67a64eab3", "committedDate": "2020-10-05T11:22:53Z", "message": "Fix CodeNarc violations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTcxODMy", "url": "https://github.com/DataDog/dd-trace-java/pull/1940#pullrequestreview-501971832", "createdAt": "2020-10-05T11:44:33Z", "commit": {"oid": "dbf70c01fab2301c8453ec35178a32a67a64eab3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3187, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}