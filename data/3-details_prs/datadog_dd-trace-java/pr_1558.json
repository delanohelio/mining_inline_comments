{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMjQ0NDQ2", "number": 1558, "title": "Don't fetch merge commit if not in pull request", "bodyText": "#1554 didn't check if the build wasn't in a pull request.  This broke the master build (and would break any other non-pull request builds)", "createdAt": "2020-06-08T16:04:34Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1558", "merged": true, "mergeCommit": {"oid": "c7e489b7891f662f5d74c3b3099b00c41c541deb"}, "closed": true, "closedAt": "2020-06-08T16:30:13Z", "author": {"login": "randomanderson"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpSn4pAH2gAyNDMxMjQ0NDQ2OjIzOTY4NjU2OGJlNWI2MWEyYmYyOTAxOTc3N2IyMjlhMzc5YmRmZTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpUlMLAFqTQyNjQ5NTQ5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "239686568be5b61a2bf29019777b229a379bdfe0", "author": {"user": {"login": "randomanderson", "name": "Laplie Anderson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/239686568be5b61a2bf29019777b229a379bdfe0", "committedDate": "2020-06-08T15:58:50Z", "message": "Don't fetch merge commit on master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NDA2NTM5", "url": "https://github.com/DataDog/dd-trace-java/pull/1558#pullrequestreview-426406539", "createdAt": "2020-06-08T16:22:51Z", "commit": {"oid": "239686568be5b61a2bf29019777b229a379bdfe0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NDk1NDk2", "url": "https://github.com/DataDog/dd-trace-java/pull/1558#pullrequestreview-426495496", "createdAt": "2020-06-08T18:15:42Z", "commit": {"oid": "239686568be5b61a2bf29019777b229a379bdfe0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxODoxNTo0MlrOGgqWgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxODoxNTo0MlrOGgqWgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjkwMTUwNQ==", "bodyText": "If this is documented in github somewhere, could you include a reference to it?", "url": "https://github.com/DataDog/dd-trace-java/pull/1558#discussion_r436901505", "createdAt": "2020-06-08T18:15:42Z", "author": {"login": "tylerbenson"}, "path": ".circleci/config.yml", "diffHunk": "@@ -22,9 +22,12 @@ commands:\n           command: |\n             CIRCLE_PR_NUMBER=\"${CIRCLE_PR_NUMBER:-${CIRCLE_PULL_REQUEST##*/}}\"\n \n-            FETCH_REFS=\"${FETCH_REFS} +refs/pull/${CIRCLE_PR_NUMBER}/merge:pr/${CIRCLE_PR_NUMBER}/merge\"\n-            git fetch -u origin ${FETCH_REFS}\n-            git checkout \"pr/${CIRCLE_PR_NUMBER}/merge\"\n+            if [[ -n \"${CIRCLE_PR_NUMBER}\" ]]\n+            then\n+              FETCH_REFS=\"${FETCH_REFS} +refs/pull/${CIRCLE_PR_NUMBER}/merge:pr/${CIRCLE_PR_NUMBER}/merge\"\n+              git fetch -u origin ${FETCH_REFS}\n+              git checkout \"pr/${CIRCLE_PR_NUMBER}/merge\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "239686568be5b61a2bf29019777b229a379bdfe0"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2382, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}