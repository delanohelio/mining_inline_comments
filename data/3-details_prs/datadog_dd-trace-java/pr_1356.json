{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwMzc5MTYw", "number": 1356, "title": "Fix Extractor edge case with value of a single comma.", "bodyText": "Turns out the issue wasn't with an empty string returning an empty array, but a string with just ,.\njshell> \",\".split(\",\")\n$1 ==> String[0] {  }\n\nA non-intuitive edge case in my opinion.", "createdAt": "2020-04-07T16:36:20Z", "url": "https://github.com/DataDog/dd-trace-java/pull/1356", "merged": true, "mergeCommit": {"oid": "02555e5fccafce85fe295ca4c43550da2cc8e166"}, "closed": true, "closedAt": "2020-04-09T18:46:33Z", "author": {"login": "tylerbenson"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVV_BUAH2gAyNDAwMzc5MTYwOmU3ZjBkMmRiMTIyYzRkMDZlNDZhNTE2YTc4ODM5OTcxNzJjYWQ0ZGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVX5s4AFqTM4OTM5NzAwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e7f0d2db122c4d06e46a516a7883997172cad4db", "author": {"user": {"login": "tylerbenson", "name": "Tyler Benson"}}, "url": "https://github.com/DataDog/dd-trace-java/commit/e7f0d2db122c4d06e46a516a7883997172cad4db", "committedDate": "2020-04-07T16:35:20Z", "message": "Alternate fix for #1319\n\nTurns out the issue wasn't with an empty string returning an empty array, but a string with just `,`.\n```\njshell> \",\".split(\",\")\n$1 ==> String[0] {  }\n```\nA non-intuitive edge case in my opinion."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5Mjk3OTQx", "url": "https://github.com/DataDog/dd-trace-java/pull/1356#pullrequestreview-389297941", "createdAt": "2020-04-07T16:40:01Z", "commit": {"oid": "e7f0d2db122c4d06e46a516a7883997172cad4db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNjo0MDowMlrOGCMcBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNjo0MDowMlrOGCMcBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk1NDExOQ==", "bodyText": "The else case here means that value will be left simply as ,. Should it be explicitly set to null or empty string instead?", "url": "https://github.com/DataDog/dd-trace-java/pull/1356#discussion_r404954119", "createdAt": "2020-04-07T16:40:02Z", "author": {"login": "tylerbenson"}, "path": "dd-java-agent/agent-tooling/src/main/java/datadog/trace/agent/tooling/OpenTracing32.java", "diffHunk": "@@ -299,12 +299,15 @@ private Extractor(final C carrier, final Getter<C> getter) {\n       extracted = new HashMap<>();\n       for (final String key : getter.keys(carrier)) {\n         // extracted header value\n-        String s = getter.get(carrier, key);\n+        String value = getter.get(carrier, key);\n         // in case of multiple values in the header, need to parse\n-        if (s != null && !s.isEmpty()) {\n-          s = s.split(\",\")[0].trim();\n+        if (value != null) {\n+          final String[] split = value.split(\",\");\n+          if (split.length > 0) {\n+            value = split[0].trim();\n+          }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e7f0d2db122c4d06e46a516a7883997172cad4db"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5Mzk3MDAx", "url": "https://github.com/DataDog/dd-trace-java/pull/1356#pullrequestreview-389397001", "createdAt": "2020-04-07T18:49:20Z", "commit": {"oid": "e7f0d2db122c4d06e46a516a7883997172cad4db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2631, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}