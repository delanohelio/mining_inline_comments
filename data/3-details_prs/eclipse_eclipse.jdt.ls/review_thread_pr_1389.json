{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5NjUzNzI0", "number": 1389, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNzo0MDoyM1rODpZdhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNzo0MDoyM1rODpZdhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NzM1MzY2OnYy", "diffSide": "RIGHT", "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/handlers/WorkspaceFolderChangeHandler.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNzo0MDoyM1rOF4i-HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwODowODoxM1rOF4jr-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDgzNzUzMg==", "bodyText": "why not use rootPathSet.addAll() api directly?", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1389#discussion_r394837532", "createdAt": "2020-03-19T07:40:23Z", "author": {"login": "testforstephen"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/handlers/WorkspaceFolderChangeHandler.java", "diffHunk": "@@ -44,6 +49,24 @@ public void update(DidChangeWorkspaceFoldersParams params) {\n \t\t\t\tremovedRootPaths.add(rootPath);\n \t\t\t}\n \t\t}\n+\t\tupdateRootPaths(addedRootPaths, removedRootPaths);\n \t\tprojectManager.updateWorkspaceFolders(addedRootPaths, removedRootPaths);\n \t}\n+\n+\tprivate void updateRootPaths(Collection<IPath> addedRootPaths, Collection<IPath> removedRootPaths) {\n+\t\tSet<IPath> rootPathSet = new HashSet<>(preferenceManager.getPreferences().getRootPaths());\n+\n+\t\tSet<IPath> removedSet = new HashSet<>(removedRootPaths);\n+\t\tfor (IPath removed : removedSet) {\n+\t\t\tif (rootPathSet.contains(removed)) {\n+\t\t\t\trootPathSet.remove(removed);\n+\t\t\t}\n+\t\t}\n+\n+\t\tSet<IPath> addedSet = new HashSet<>(addedRootPaths);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d39323b27e25166b85cd8fedef6896d7dc908896"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDg0OTI3Mg==", "bodyText": "yes, that's much better", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1389#discussion_r394849272", "createdAt": "2020-03-19T08:08:13Z", "author": {"login": "jdneo"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/handlers/WorkspaceFolderChangeHandler.java", "diffHunk": "@@ -44,6 +49,24 @@ public void update(DidChangeWorkspaceFoldersParams params) {\n \t\t\t\tremovedRootPaths.add(rootPath);\n \t\t\t}\n \t\t}\n+\t\tupdateRootPaths(addedRootPaths, removedRootPaths);\n \t\tprojectManager.updateWorkspaceFolders(addedRootPaths, removedRootPaths);\n \t}\n+\n+\tprivate void updateRootPaths(Collection<IPath> addedRootPaths, Collection<IPath> removedRootPaths) {\n+\t\tSet<IPath> rootPathSet = new HashSet<>(preferenceManager.getPreferences().getRootPaths());\n+\n+\t\tSet<IPath> removedSet = new HashSet<>(removedRootPaths);\n+\t\tfor (IPath removed : removedSet) {\n+\t\t\tif (rootPathSet.contains(removed)) {\n+\t\t\t\trootPathSet.remove(removed);\n+\t\t\t}\n+\t\t}\n+\n+\t\tSet<IPath> addedSet = new HashSet<>(addedRootPaths);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDgzNzUzMg=="}, "originalCommit": {"oid": "d39323b27e25166b85cd8fedef6896d7dc908896"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3526, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}