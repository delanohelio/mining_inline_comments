{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExMzcyODc2", "number": 1585, "title": "Infer expressions if there is no selection range when extracting method", "bodyText": "Relates to redhat-developer/vscode-java#1680\nSigned-off-by: Shi Chen chenshi@microsoft.com", "createdAt": "2020-10-28T08:34:32Z", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585", "merged": true, "mergeCommit": {"oid": "8308265311bb5505e48a8a108649e4917319321f"}, "closed": true, "closedAt": "2020-11-13T08:41:28Z", "author": {"login": "CsCherrYY"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdW7pmCABqjM5MzA2Nzc3NTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcDDCigFqTUyOTg2OTcxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1411ca6897b9a149ba5b8a5b5f86dc9e6ae2677", "author": {"user": {"login": "CsCherrYY", "name": "Shi Chen"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/e1411ca6897b9a149ba5b8a5b5f86dc9e6ae2677", "committedDate": "2020-10-28T08:31:57Z", "message": "Infer expressions if there is no selection range when extracting method\n\nSigned-off-by: Shi Chen <chenshi@microsoft.com>"}, "afterCommit": {"oid": "750bdaeffed5ade55a8d62325526b810c53bbabd", "author": {"user": {"login": "CsCherrYY", "name": "Shi Chen"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/750bdaeffed5ade55a8d62325526b810c53bbabd", "committedDate": "2020-10-28T11:11:01Z", "message": "Infer expressions if there is no selection range when extracting method\n\nSigned-off-by: Shi Chen <chenshi@microsoft.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MDQ2MjIy", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#pullrequestreview-525046222", "createdAt": "2020-11-06T10:52:34Z", "commit": {"oid": "b611d4fc0eee5a1b30f1c075e053a0215f95549c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMDo1MjozNVrOHupRUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwODoxNjowMFrOHxCuLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY3MjcyMQ==", "bodyText": "Since infer is a verb, i would prefer to name it as inferSelection instead of getInferSelection", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#discussion_r518672721", "createdAt": "2020-11-06T10:52:35Z", "author": {"login": "testforstephen"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/handlers/JDTLanguageServer.java", "diffHunk": "@@ -939,6 +941,12 @@ public void didChangeWorkspaceFolders(DidChangeWorkspaceFoldersParams params) {\n \t\treturn computeAsync((monitor) -> GetRefactorEditHandler.getEditsForRefactor(params));\n \t}\n \n+\t@Override\n+\tpublic CompletableFuture<List<InferSelection>> getInferSelection(GetInferSelectionParams params) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b611d4fc0eee5a1b30f1c075e053a0215f95549c"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODY3NzU3Mg==", "bodyText": "InferSelection -> SelectionInfo.", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#discussion_r518677572", "createdAt": "2020-11-06T10:59:59Z", "author": {"login": "testforstephen"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/handlers/GetInferSelectionHandler.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Microsoft Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License 2.0\n+ * which accompanies this distribution, and is available at\n+ * https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *     Microsoft Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package org.eclipse.jdt.ls.core.internal.handlers;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.jdt.core.ICompilationUnit;\n+import org.eclipse.jdt.core.dom.ASTNode;\n+import org.eclipse.jdt.core.dom.Expression;\n+import org.eclipse.jdt.core.dom.ParenthesizedExpression;\n+import org.eclipse.jdt.ls.core.internal.JDTUtils;\n+import org.eclipse.jdt.ls.core.internal.corext.refactoring.code.ExtractMethodRefactoring;\n+import org.eclipse.jdt.ls.core.internal.corrections.DiagnosticsHelper;\n+import org.eclipse.jdt.ls.core.internal.corrections.InnovationContext;\n+import org.eclipse.jdt.ls.core.internal.text.correction.RefactorProposalUtility;\n+import org.eclipse.lsp4j.CodeActionParams;\n+import org.eclipse.lsp4j.FormattingOptions;\n+\n+public class GetInferSelectionHandler {\n+\n+\tpublic static List<InferSelection> getInferSelectionsForRefactor(GetInferSelectionParams params) {\n+\t\tfinal ICompilationUnit unit = JDTUtils.resolveCompilationUnit(params.context.getTextDocument().getUri());\n+\t\tif (unit == null) {\n+\t\t\treturn null;\n+\t\t}\n+\t\tMap formatterOptions = params.options == null ? null : FormatterHandler.getOptions(params.options, unit);\n+\t\tint start = DiagnosticsHelper.getStartOffset(unit, params.context.getRange());\n+\t\tint end = DiagnosticsHelper.getEndOffset(unit, params.context.getRange());\n+\t\tInnovationContext context = new InnovationContext(unit, start, end - start);\n+\t\tList<InferSelection> extractMethodInfos = new ArrayList<InferSelection>();\n+\t\tASTNode parent = context.getCoveringNode();\n+\t\ttry {\n+\t\t\tif (RefactorProposalUtility.EXTRACT_METHOD_COMMAND.equals(params.command)) {\n+\t\t\t\twhile (parent != null && parent instanceof Expression) {\n+\t\t\t\t\tif (parent instanceof ParenthesizedExpression) {\n+\t\t\t\t\t\tparent = parent.getParent();\n+\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t}\n+\t\t\t\t\tExtractMethodRefactoring refactoring = new ExtractMethodRefactoring(context.getASTRoot(), parent.getStartPosition(), parent.getLength(), formatterOptions);\n+\t\t\t\t\tif (refactoring.checkInitialConditions(new NullProgressMonitor()).isOK()) {\n+\t\t\t\t\t\textractMethodInfos.add(new InferSelection(parent.toString(), parent.getStartPosition(), parent.getLength()));\n+\t\t\t\t\t}\n+\t\t\t\t\tparent = parent.getParent();\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t} catch (CoreException e) {\n+\t\t\t// do nothing.\n+\t\t}\n+\n+\t\tif (extractMethodInfos.size() == 0) {\n+\t\t\treturn null;\n+\t\t}\n+\t\treturn extractMethodInfos;\n+\t}\n+\n+\tpublic static class InferSelection {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b611d4fc0eee5a1b30f1c075e053a0215f95549c"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTE4MjMzNA==", "bodyText": "When inferring a possible expression for the refactoring operation, formatting options is not needed.", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#discussion_r521182334", "createdAt": "2020-11-11T08:06:19Z", "author": {"login": "testforstephen"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/handlers/GetInferSelectionHandler.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Microsoft Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License 2.0\n+ * which accompanies this distribution, and is available at\n+ * https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *     Microsoft Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package org.eclipse.jdt.ls.core.internal.handlers;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.jdt.core.ICompilationUnit;\n+import org.eclipse.jdt.core.dom.ASTNode;\n+import org.eclipse.jdt.core.dom.Expression;\n+import org.eclipse.jdt.core.dom.ParenthesizedExpression;\n+import org.eclipse.jdt.ls.core.internal.JDTUtils;\n+import org.eclipse.jdt.ls.core.internal.corext.refactoring.code.ExtractMethodRefactoring;\n+import org.eclipse.jdt.ls.core.internal.corrections.DiagnosticsHelper;\n+import org.eclipse.jdt.ls.core.internal.corrections.InnovationContext;\n+import org.eclipse.jdt.ls.core.internal.text.correction.RefactorProposalUtility;\n+import org.eclipse.lsp4j.CodeActionParams;\n+import org.eclipse.lsp4j.FormattingOptions;\n+\n+public class GetInferSelectionHandler {\n+\n+\tpublic static List<InferSelection> getInferSelectionsForRefactor(GetInferSelectionParams params) {\n+\t\tfinal ICompilationUnit unit = JDTUtils.resolveCompilationUnit(params.context.getTextDocument().getUri());\n+\t\tif (unit == null) {\n+\t\t\treturn null;\n+\t\t}\n+\t\tMap formatterOptions = params.options == null ? null : FormatterHandler.getOptions(params.options, unit);\n+\t\tint start = DiagnosticsHelper.getStartOffset(unit, params.context.getRange());\n+\t\tint end = DiagnosticsHelper.getEndOffset(unit, params.context.getRange());\n+\t\tInnovationContext context = new InnovationContext(unit, start, end - start);\n+\t\tList<InferSelection> extractMethodInfos = new ArrayList<InferSelection>();\n+\t\tASTNode parent = context.getCoveringNode();\n+\t\ttry {\n+\t\t\tif (RefactorProposalUtility.EXTRACT_METHOD_COMMAND.equals(params.command)) {\n+\t\t\t\twhile (parent != null && parent instanceof Expression) {\n+\t\t\t\t\tif (parent instanceof ParenthesizedExpression) {\n+\t\t\t\t\t\tparent = parent.getParent();\n+\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t}\n+\t\t\t\t\tExtractMethodRefactoring refactoring = new ExtractMethodRefactoring(context.getASTRoot(), parent.getStartPosition(), parent.getLength(), formatterOptions);\n+\t\t\t\t\tif (refactoring.checkInitialConditions(new NullProgressMonitor()).isOK()) {\n+\t\t\t\t\t\textractMethodInfos.add(new InferSelection(parent.toString(), parent.getStartPosition(), parent.getLength()));\n+\t\t\t\t\t}\n+\t\t\t\t\tparent = parent.getParent();\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t} catch (CoreException e) {\n+\t\t\t// do nothing.\n+\t\t}\n+\n+\t\tif (extractMethodInfos.size() == 0) {\n+\t\t\treturn null;\n+\t\t}\n+\t\treturn extractMethodInfos;\n+\t}\n+\n+\tpublic static class InferSelection {\n+\t\tpublic String name;\n+\t\tpublic int startPosition;\n+\t\tpublic int length;\n+\n+\t\tpublic InferSelection(String name, int startPosition, int length) {\n+\t\t\tthis.name = name;\n+\t\t\tthis.startPosition = startPosition;\n+\t\t\tthis.length = length;\n+\t\t}\n+\t}\n+\n+\tpublic static class GetInferSelectionParams {\n+\t\tpublic String command;\n+\t\tpublic CodeActionParams context;\n+\t\tpublic FormattingOptions options;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c504bd962f6bc18ddcd9dbe17ffcca644560e342"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTE4NTUwNQ==", "bodyText": "This is duplicated with InferSelection class under file GetInferSelectionHandler.java.", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#discussion_r521185505", "createdAt": "2020-11-11T08:13:15Z", "author": {"login": "testforstephen"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/text/correction/RefactorProposalUtility.java", "diffHunk": "@@ -844,4 +862,16 @@ public boolean isMoveAvaiable() {\n \t\t\treturn !supportedDestinationKinds.isEmpty();\n \t\t}\n \t}\n+\n+\tpublic static class ExtractMethodInfo {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c504bd962f6bc18ddcd9dbe17ffcca644560e342"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTE4Njg2MA==", "bodyText": "startPosition -> offset", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#discussion_r521186860", "createdAt": "2020-11-11T08:16:00Z", "author": {"login": "testforstephen"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/handlers/GetInferSelectionHandler.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Microsoft Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License 2.0\n+ * which accompanies this distribution, and is available at\n+ * https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *     Microsoft Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package org.eclipse.jdt.ls.core.internal.handlers;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.jdt.core.ICompilationUnit;\n+import org.eclipse.jdt.core.dom.ASTNode;\n+import org.eclipse.jdt.core.dom.Expression;\n+import org.eclipse.jdt.core.dom.ParenthesizedExpression;\n+import org.eclipse.jdt.ls.core.internal.JDTUtils;\n+import org.eclipse.jdt.ls.core.internal.corext.refactoring.code.ExtractMethodRefactoring;\n+import org.eclipse.jdt.ls.core.internal.corrections.DiagnosticsHelper;\n+import org.eclipse.jdt.ls.core.internal.corrections.InnovationContext;\n+import org.eclipse.jdt.ls.core.internal.text.correction.RefactorProposalUtility;\n+import org.eclipse.lsp4j.CodeActionParams;\n+import org.eclipse.lsp4j.FormattingOptions;\n+\n+public class GetInferSelectionHandler {\n+\n+\tpublic static List<InferSelection> getInferSelectionsForRefactor(GetInferSelectionParams params) {\n+\t\tfinal ICompilationUnit unit = JDTUtils.resolveCompilationUnit(params.context.getTextDocument().getUri());\n+\t\tif (unit == null) {\n+\t\t\treturn null;\n+\t\t}\n+\t\tMap formatterOptions = params.options == null ? null : FormatterHandler.getOptions(params.options, unit);\n+\t\tint start = DiagnosticsHelper.getStartOffset(unit, params.context.getRange());\n+\t\tint end = DiagnosticsHelper.getEndOffset(unit, params.context.getRange());\n+\t\tInnovationContext context = new InnovationContext(unit, start, end - start);\n+\t\tList<InferSelection> extractMethodInfos = new ArrayList<InferSelection>();\n+\t\tASTNode parent = context.getCoveringNode();\n+\t\ttry {\n+\t\t\tif (RefactorProposalUtility.EXTRACT_METHOD_COMMAND.equals(params.command)) {\n+\t\t\t\twhile (parent != null && parent instanceof Expression) {\n+\t\t\t\t\tif (parent instanceof ParenthesizedExpression) {\n+\t\t\t\t\t\tparent = parent.getParent();\n+\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t}\n+\t\t\t\t\tExtractMethodRefactoring refactoring = new ExtractMethodRefactoring(context.getASTRoot(), parent.getStartPosition(), parent.getLength(), formatterOptions);\n+\t\t\t\t\tif (refactoring.checkInitialConditions(new NullProgressMonitor()).isOK()) {\n+\t\t\t\t\t\textractMethodInfos.add(new InferSelection(parent.toString(), parent.getStartPosition(), parent.getLength()));\n+\t\t\t\t\t}\n+\t\t\t\t\tparent = parent.getParent();\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t} catch (CoreException e) {\n+\t\t\t// do nothing.\n+\t\t}\n+\n+\t\tif (extractMethodInfos.size() == 0) {\n+\t\t\treturn null;\n+\t\t}\n+\t\treturn extractMethodInfos;\n+\t}\n+\n+\tpublic static class InferSelection {\n+\t\tpublic String name;\n+\t\tpublic int startPosition;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c504bd962f6bc18ddcd9dbe17ffcca644560e342"}, "originalPosition": 74}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MDYwMjMx", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#pullrequestreview-528060231", "createdAt": "2020-11-11T10:46:46Z", "commit": {"oid": "84d88aa49edf17dc5e3f02523f2a80924c2006af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMDo0Njo0NlrOHxH5Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMDo0Njo0NlrOHxH5Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI3MTU5MQ==", "bodyText": "remove FormattingOptions options", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#discussion_r521271591", "createdAt": "2020-11-11T10:46:46Z", "author": {"login": "testforstephen"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/handlers/InferSelectionHandler.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Microsoft Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License 2.0\n+ * which accompanies this distribution, and is available at\n+ * https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *     Microsoft Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package org.eclipse.jdt.ls.core.internal.handlers;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.jdt.core.ICompilationUnit;\n+import org.eclipse.jdt.core.dom.ASTNode;\n+import org.eclipse.jdt.core.dom.Expression;\n+import org.eclipse.jdt.core.dom.ParenthesizedExpression;\n+import org.eclipse.jdt.ls.core.internal.JDTUtils;\n+import org.eclipse.jdt.ls.core.internal.corext.refactoring.code.ExtractMethodRefactoring;\n+import org.eclipse.jdt.ls.core.internal.corrections.DiagnosticsHelper;\n+import org.eclipse.jdt.ls.core.internal.corrections.InnovationContext;\n+import org.eclipse.jdt.ls.core.internal.text.correction.RefactorProposalUtility;\n+import org.eclipse.lsp4j.CodeActionParams;\n+import org.eclipse.lsp4j.FormattingOptions;\n+\n+public class InferSelectionHandler {\n+\n+\tpublic static List<SelectionInfo> inferSelectionsForRefactor(InferSelectionParams params) {\n+\t\tfinal ICompilationUnit unit = JDTUtils.resolveCompilationUnit(params.context.getTextDocument().getUri());\n+\t\tif (unit == null) {\n+\t\t\treturn null;\n+\t\t}\n+\t\tint start = DiagnosticsHelper.getStartOffset(unit, params.context.getRange());\n+\t\tint end = DiagnosticsHelper.getEndOffset(unit, params.context.getRange());\n+\t\tInnovationContext context = new InnovationContext(unit, start, end - start);\n+\t\tList<SelectionInfo> extractMethodInfos = new ArrayList<SelectionInfo>();\n+\t\tASTNode parent = context.getCoveringNode();\n+\t\ttry {\n+\t\t\tif (RefactorProposalUtility.EXTRACT_METHOD_COMMAND.equals(params.command)) {\n+\t\t\t\twhile (parent != null && parent instanceof Expression) {\n+\t\t\t\t\tif (parent instanceof ParenthesizedExpression) {\n+\t\t\t\t\t\tparent = parent.getParent();\n+\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t}\n+\t\t\t\t\tExtractMethodRefactoring refactoring = new ExtractMethodRefactoring(context.getASTRoot(), parent.getStartPosition(), parent.getLength());\n+\t\t\t\t\tif (refactoring.checkInitialConditions(new NullProgressMonitor()).isOK()) {\n+\t\t\t\t\t\textractMethodInfos.add(new SelectionInfo(parent.toString(), parent.getStartPosition(), parent.getLength()));\n+\t\t\t\t\t}\n+\t\t\t\t\tparent = parent.getParent();\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t} catch (CoreException e) {\n+\t\t\t// do nothing.\n+\t\t}\n+\n+\t\tif (extractMethodInfos.size() == 0) {\n+\t\t\treturn null;\n+\t\t}\n+\t\treturn extractMethodInfos;\n+\t}\n+\n+\tpublic static class SelectionInfo {\n+\t\tpublic String name;\n+\t\tpublic int offset;\n+\t\tpublic int length;\n+\n+\t\tpublic SelectionInfo(String name, int offset, int length) {\n+\t\t\tthis.name = name;\n+\t\t\tthis.offset = offset;\n+\t\t\tthis.length = length;\n+\t\t}\n+\t}\n+\n+\tpublic static class InferSelectionParams {\n+\t\tpublic String command;\n+\t\tpublic CodeActionParams context;\n+\n+\t\tpublic InferSelectionParams(String command, CodeActionParams context, FormattingOptions options) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84d88aa49edf17dc5e3f02523f2a80924c2006af"}, "originalPosition": 87}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4MTc0Nzky", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#pullrequestreview-528174792", "createdAt": "2020-11-11T13:34:23Z", "commit": {"oid": "22ac04eba16b06488086cc8f0b4c82ec71d275aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMzozNDoyM1rOHxNWAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxMzozNDoyM1rOHxNWAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM2MDg5OQ==", "bodyText": "would you add some unit tests for this?", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#discussion_r521360899", "createdAt": "2020-11-11T13:34:23Z", "author": {"login": "testforstephen"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/handlers/InferSelectionHandler.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 Microsoft Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License 2.0\n+ * which accompanies this distribution, and is available at\n+ * https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *     Microsoft Corporation - initial API and implementation\n+ *******************************************************************************/\n+\n+package org.eclipse.jdt.ls.core.internal.handlers;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.jdt.core.ICompilationUnit;\n+import org.eclipse.jdt.core.dom.ASTNode;\n+import org.eclipse.jdt.core.dom.Expression;\n+import org.eclipse.jdt.core.dom.ParenthesizedExpression;\n+import org.eclipse.jdt.ls.core.internal.JDTUtils;\n+import org.eclipse.jdt.ls.core.internal.corext.refactoring.code.ExtractMethodRefactoring;\n+import org.eclipse.jdt.ls.core.internal.corrections.DiagnosticsHelper;\n+import org.eclipse.jdt.ls.core.internal.corrections.InnovationContext;\n+import org.eclipse.jdt.ls.core.internal.text.correction.RefactorProposalUtility;\n+import org.eclipse.lsp4j.CodeActionParams;\n+import org.eclipse.lsp4j.FormattingOptions;\n+\n+public class InferSelectionHandler {\n+\n+\tpublic static List<SelectionInfo> inferSelectionsForRefactor(InferSelectionParams params) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22ac04eba16b06488086cc8f0b4c82ec71d275aa"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58af60874f9cd7645de4f9cc6e25fabdb19bd9b0", "author": {"user": {"login": "CsCherrYY", "name": "Shi Chen"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/58af60874f9cd7645de4f9cc6e25fabdb19bd9b0", "committedDate": "2020-11-13T03:59:59Z", "message": "Infer expressions if there is no selection range\n\nSigned-off-by: Shi Chen <chenshi@microsoft.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "106b52e3502cc6f2b8296640b18a03e741a623ad", "author": {"user": {"login": "CsCherrYY", "name": "Shi Chen"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/106b52e3502cc6f2b8296640b18a03e741a623ad", "committedDate": "2020-11-12T08:27:04Z", "message": "Add test for InferSelection and remove meaningless codes\n\nSigned-off-by: Shi Chen <chenshi@microsoft.com>"}, "afterCommit": {"oid": "58af60874f9cd7645de4f9cc6e25fabdb19bd9b0", "author": {"user": {"login": "CsCherrYY", "name": "Shi Chen"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/58af60874f9cd7645de4f9cc6e25fabdb19bd9b0", "committedDate": "2020-11-13T03:59:59Z", "message": "Infer expressions if there is no selection range\n\nSigned-off-by: Shi Chen <chenshi@microsoft.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5ODY5NzEy", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1585#pullrequestreview-529869712", "createdAt": "2020-11-13T08:40:09Z", "commit": {"oid": "58af60874f9cd7645de4f9cc6e25fabdb19bd9b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1032, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}