{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4Njg0MTA1", "number": 1490, "title": "jdt.ls should store gradle wrapper checksums at build time", "bodyText": "Fixes #1486\nSigned-off-by: Snjezana Peco snjezana.peco@redhat.com", "createdAt": "2020-06-23T16:28:34Z", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490", "merged": true, "mergeCommit": {"oid": "9d50ba00dfd87824d7f143110258e93c12550e90"}, "closed": true, "closedAt": "2020-07-01T14:48:47Z", "author": {"login": "snjeza"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcu5emwgBqjM0ODQ3NjYwNjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwpl_XgBqjM1MDIyNzA1MzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9d84abe2ba923dad185ee3036ad425146139561", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/c9d84abe2ba923dad185ee3036ad425146139561", "committedDate": "2020-06-23T16:22:39Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}, "afterCommit": {"oid": "9623dacb62b6208c011e4021a2584ea44531bf92", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/9623dacb62b6208c011e4021a2584ea44531bf92", "committedDate": "2020-06-26T02:02:48Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9623dacb62b6208c011e4021a2584ea44531bf92", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/9623dacb62b6208c011e4021a2584ea44531bf92", "committedDate": "2020-06-26T02:02:48Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}, "afterCommit": {"oid": "d0f42c0b730cccb6cb29130589d7747a167da0d3", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/d0f42c0b730cccb6cb29130589d7747a167da0d3", "committedDate": "2020-06-26T02:20:09Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjY5OTAw", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#pullrequestreview-438269900", "createdAt": "2020-06-26T12:54:25Z", "commit": {"oid": "d0f42c0b730cccb6cb29130589d7747a167da0d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjo1NDoyNVrOGpfyfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxMjo1NDoyNVrOGpfyfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE2NTYzMA==", "bodyText": "<plugin>\n\t\t\t\t<groupId>org.codehaus.gmaven</groupId>\n\t\t\t\t<artifactId>groovy-maven-plugin</artifactId>\n\t\t\t\t<version>2.1.1</version>\n\t\t\t\t<executions>\n\t\t\t\t\t<execution>\n\t\t\t\t\t\t<?m2e execute onConfiguration?>\n\t\t\t\t\t\t<phase>generate-resources</phase>\n\t\t\t\t\t\t<goals>\n\t\t\t\t\t\t\t<goal>execute</goal>\n\t\t\t\t\t\t</goals>\n\t\t\t\t\t\t<configuration>\n\t\t\t\t\t\t\t<source>\n\t\t\t\t\t\t\t\timport groovy.json.JsonSlurper\n\t\t\t\t\t\t\t\timport groovy.json.JsonOutput\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdef versionUrl = new URL(\"https://services.gradle.org/versions/all\")\n\t\t\t\t\t\t\t\tdef versionStr = versionUrl.text;\n\t\t\t\t\t\t\t\tdef versionsFile = new File(\"${basedir}/gradle/checksums/versions.json\")\n\t\t\t\t\t\t\t\tversionsFile.parentFile.mkdirs() //just in case\n\t\t\t\t\t\t\t\tversionsFile.write(versionStr)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdef versions = new JsonSlurper().parseText(versionStr);\n\t\t\t\t\t\t\t\tclass Checksum { String wrapperChecksumUrl; String sha256 }\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdef checksums = []\n\t\t\t\t\t\t\t\tversions.each {\n\t\t\t\t\t\t\t\t\tif (it.wrapperChecksumUrl) {\n\t\t\t\t\t\t\t\t\t\tdef sha256url = new URL(it.wrapperChecksumUrl)\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tdef sha256 = sha256url.text\n\t\t\t\t\t\t\t\t\t\t\tdef checksum = new Checksum(wrapperChecksumUrl: it.wrapperChecksumUrl, sha256: sha256);\n\t\t\t\t\t\t\t\t\t\t\tchecksums.add(checksum)\n\t\t\t\t\t\t\t\t\t\t} catch(Exception e) {\n\t\t\t\t\t\t\t\t\t\t\t// ignore \n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdef json = JsonOutput.toJson(checksums)\n\t\t\t\t\t\t\t\tdef checksumsFile = new File(\"${basedir}/gradle/checksums/checksums.json\")\n\t\t\t\t\t\t\t\tchecksumsFile.write(JsonOutput.prettyPrint(json))\n\t\t\t\t\t\t\t</source>\n\t\t\t\t\t\t</configuration>\n\t\t\t\t\t</execution>\n\t\t\t\t</executions>\n\t\t\t</plugin>", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#discussion_r446165630", "createdAt": "2020-06-26T12:54:25Z", "author": {"login": "fbricon"}, "path": "org.eclipse.jdt.ls.core/pom.xml", "diffHunk": "@@ -30,6 +30,47 @@\n \t\t\t\t\t</artifactItems>\n \t\t\t\t</configuration>\n \t\t\t</plugin>\n+\t\t\t<plugin>\n+\t\t\t\t<groupId>org.codehaus.gmaven</groupId>\n+\t\t\t\t<artifactId>groovy-maven-plugin</artifactId>\n+\t\t\t\t<version>2.1.1</version>\n+\t\t\t\t<executions>\n+\t\t\t\t\t<execution>\n+\t\t\t\t\t\t<phase>generate-resources</phase>\n+\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t<goal>execute</goal>\n+\t\t\t\t\t\t</goals>\n+\t\t\t\t\t\t<configuration>\n+\t\t\t\t\t\t\t<source>\n+\t\t\t\t\t\t\t\timport groovy.json.JsonSlurper;\n+\t\t\t\t\t\t\t\timport groovy.json.JsonOutput;\n+\t\t\t\t\t\t\t\tURL versionUrl = new URL('https://services.gradle.org/versions/all');\n+\t\t\t\t\t\t\t\tString versionStr = versionUrl.text;\n+\t\t\t\t\t\t\t\tFile outFile = new File(\"${basedir}/gradle/checksums/versions.json\");\n+\t\t\t\t\t\t\t\toutFile.write(versionStr);\n+\t\t\t\t\t\t\t\tList versions = new JsonSlurper().parseText(versionStr);\n+\t\t\t\t\t\t\t\tclass Checksum { String wrapperChecksumUrl; String sha256 };\n+\t\t\t\t\t\t\t\tList checksums = [];\n+\t\t\t\t\t\t\t\tfor (version in versions) {\n+\t\t\t\t\t\t\t\t\tif (version.wrapperChecksumUrl != null) {\n+\t\t\t\t\t\t\t\t\t\tdef sha256url = new URL(version.wrapperChecksumUrl);\n+\t\t\t\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\t\t\t\tdef sha256 = sha256url.text;\n+\t\t\t\t\t\t\t\t\t\t\tdef checksum = new Checksum(wrapperChecksumUrl: version.wrapperChecksumUrl, sha256: sha256);\n+\t\t\t\t\t\t\t\t\t\t\tchecksums.add(checksum);\n+\t\t\t\t\t\t\t\t\t\t} catch(Exception e) {\n+\t\t\t\t\t\t\t\t\t\t\t// ignore \n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\toutFile = new File(\"${basedir}/gradle/checksums/checksums.json\");\n+\t\t\t\t\t\t\t\tdef json = JsonOutput.toJson(checksums);\n+\t\t\t\t\t\t\t\toutFile.write(JsonOutput.prettyPrint(json));\n+\t\t\t\t\t\t\t</source>\n+\t\t\t\t\t\t</configuration>\n+\t\t\t\t\t</execution>\n+\t\t\t\t</executions>\n+\t\t\t</plugin>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0f42c0b730cccb6cb29130589d7747a167da0d3"}, "originalPosition": 44}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0f42c0b730cccb6cb29130589d7747a167da0d3", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/d0f42c0b730cccb6cb29130589d7747a167da0d3", "committedDate": "2020-06-26T02:20:09Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}, "afterCommit": {"oid": "7c037817c3fa2bd0edb42814b5710d7413f3cb6c", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/7c037817c3fa2bd0edb42814b5710d7413f3cb6c", "committedDate": "2020-06-26T16:30:48Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MTE5MDE3", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#pullrequestreview-439119017", "createdAt": "2020-06-29T13:02:26Z", "commit": {"oid": "7c037817c3fa2bd0edb42814b5710d7413f3cb6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzowMjoyNlrOGqP29Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzowMjoyNlrOGqP29Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk1MzIwNQ==", "bodyText": "always true since that's what you're iterating over", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#discussion_r446953205", "createdAt": "2020-06-29T13:02:26Z", "author": {"login": "fbricon"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/internal/gradle/checksums/WrapperValidator.java", "diffHunk": "@@ -114,6 +130,9 @@ public String apply(Map<String, String> input) {\n \t\t\t\t\tFile cacheDir = getSha256CacheFile();\n \t\t\t\t\tfor (String wrapperChecksumUrl : wrapperChecksumUrls) {\n \t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\tif (wrapperChecksumUrls.contains(wrapperChecksumUrl)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c037817c3fa2bd0edb42814b5710d7413f3cb6c"}, "originalPosition": 70}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c037817c3fa2bd0edb42814b5710d7413f3cb6c", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/7c037817c3fa2bd0edb42814b5710d7413f3cb6c", "committedDate": "2020-06-26T16:30:48Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}, "afterCommit": {"oid": "842e1acf3c41846d09b31c3340358638bd904598", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/842e1acf3c41846d09b31c3340358638bd904598", "committedDate": "2020-07-01T11:51:35Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwODA2ODkx", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#pullrequestreview-440806891", "createdAt": "2020-07-01T12:05:22Z", "commit": {"oid": "842e1acf3c41846d09b31c3340358638bd904598"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjowNToyMlrOGrjEwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjowNToyMlrOGrjEwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMxNjYwOQ==", "bodyText": "println e.message", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#discussion_r448316609", "createdAt": "2020-07-01T12:05:22Z", "author": {"login": "fbricon"}, "path": "org.eclipse.jdt.ls.core/pom.xml", "diffHunk": "@@ -30,6 +30,52 @@\n \t\t\t\t\t</artifactItems>\n \t\t\t\t</configuration>\n \t\t\t</plugin>\n+\t\t\t<plugin>\n+\t\t\t\t<groupId>org.codehaus.gmaven</groupId>\n+\t\t\t\t<artifactId>groovy-maven-plugin</artifactId>\n+\t\t\t\t<version>2.1.1</version>\n+\t\t\t\t<executions>\n+\t\t\t\t\t<execution>\n+\t\t\t\t\t\t<?m2e execute onConfiguration?>\n+\t\t\t\t\t\t<phase>generate-resources</phase>\n+\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t<goal>execute</goal>\n+\t\t\t\t\t\t</goals>\n+\t\t\t\t\t\t<configuration>\n+\t\t\t\t\t\t\t<source>\n+\t\t\t\t\t\t\t\timport groovy.json.JsonSlurper\n+\t\t\t\t\t\t\t\timport groovy.json.JsonOutput\n+\n+\t\t\t\t\t\t\t\tdef versionUrl = new URL(\"https://services.gradle.org/versions/all\")\n+\t\t\t\t\t\t\t\tdef versionStr = versionUrl.text;\n+\t\t\t\t\t\t\t\tdef versionsFile = new File(\"${basedir}/gradle/checksums/versions.json\")\n+\t\t\t\t\t\t\t\tversionsFile.parentFile.mkdirs() //just in case\n+\t\t\t\t\t\t\t\tversionsFile.write(versionStr)\n+\n+\t\t\t\t\t\t\t\tdef versions = new JsonSlurper().parseText(versionStr);\n+\t\t\t\t\t\t\t\tclass Checksum { String wrapperChecksumUrl; String sha256 }\n+\n+\t\t\t\t\t\t\t\tdef checksums = []\n+\t\t\t\t\t\t\t\tversions.each {\n+\t\t\t\t\t\t\t\t\tif (it.wrapperChecksumUrl) {\n+\t\t\t\t\t\t\t\t\t\tdef sha256url = new URL(it.wrapperChecksumUrl)\n+\t\t\t\t\t\t\t\t\t\ttry {\n+\t\t\t\t\t\t\t\t\t\t\tdef sha256 = sha256url.text\n+\t\t\t\t\t\t\t\t\t\t\tdef checksum = new Checksum(wrapperChecksumUrl: it.wrapperChecksumUrl, sha256: sha256);\n+\t\t\t\t\t\t\t\t\t\t\tchecksums.add(checksum)\n+\t\t\t\t\t\t\t\t\t\t} catch(Exception e) {\n+\t\t\t\t\t\t\t\t\t\t\t// ignore ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "842e1acf3c41846d09b31c3340358638bd904598"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwODA4MDUw", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#pullrequestreview-440808050", "createdAt": "2020-07-01T12:07:13Z", "commit": {"oid": "842e1acf3c41846d09b31c3340358638bd904598"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjowNzoxNFrOGrjIPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjowNzoxNFrOGrjIPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMxNzUwMg==", "bodyText": "loadInternalChecksums", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#discussion_r448317502", "createdAt": "2020-07-01T12:07:14Z", "author": {"login": "fbricon"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/internal/gradle/checksums/WrapperValidator.java", "diffHunk": "@@ -159,6 +180,55 @@ public String apply(Map<String, String> input) {\n \t\t}\n \t}\n \n+\tprivate void getInternalChecksums() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "842e1acf3c41846d09b31c3340358638bd904598"}, "originalPosition": 101}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwODA4NDgy", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#pullrequestreview-440808482", "createdAt": "2020-07-01T12:07:56Z", "commit": {"oid": "842e1acf3c41846d09b31c3340358638bd904598"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjowNzo1NlrOGrjJjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjowNzo1NlrOGrjJjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMxNzgzOQ==", "bodyText": "updateGradleVersionsFile", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#discussion_r448317839", "createdAt": "2020-07-01T12:07:56Z", "author": {"login": "fbricon"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/internal/gradle/checksums/WrapperValidator.java", "diffHunk": "@@ -159,6 +180,55 @@ public String apply(Map<String, String> input) {\n \t\t}\n \t}\n \n+\tprivate void getInternalChecksums() {\n+\t\tBundle bundle = Platform.getBundle(IConstants.PLUGIN_ID);\n+\t\tURL url = FileLocator.find(bundle, new org.eclipse.core.runtime.Path(GRADLE_CHECKSUMS));\n+\t\tif (url != null) {\n+\t\t\ttry (InputStream inputStream = url.openStream(); InputStreamReader inputStreamReader = new InputStreamReader(inputStream); Reader reader = new BufferedReader(inputStreamReader)) {\n+\t\t\t\tJsonElement jsonElement = new JsonParser().parse(reader);\n+\t\t\t\tif (jsonElement instanceof JsonArray) {\n+\t\t\t\t\tJsonArray array = (JsonArray) jsonElement;\n+\t\t\t\t\tfor (JsonElement json : array) {\n+\t\t\t\t\t\tString sha256 = json.getAsJsonObject().get(\"sha256\").getAsString();\n+\t\t\t\t\t\tString wrapperChecksumUrl = json.getAsJsonObject().get(\"wrapperChecksumUrl\").getAsString();\n+\t\t\t\t\t\tif (sha256 != null) {\n+\t\t\t\t\t\t\tallowed.add(sha256);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\tif (wrapperChecksumUrl != null) {\n+\t\t\t\t\t\t\twrapperChecksumUrls.add(wrapperChecksumUrl);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t} catch (IOException e) {\n+\t\t\t\tJavaLanguageServerPlugin.logException(e.getMessage(), e);\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\tprivate void updateVersions() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "842e1acf3c41846d09b31c3340358638bd904598"}, "originalPosition": 126}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "842e1acf3c41846d09b31c3340358638bd904598", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/842e1acf3c41846d09b31c3340358638bd904598", "committedDate": "2020-07-01T11:51:35Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}, "afterCommit": {"oid": "44c88a7e02edb306940a6694646fa6c905b299f9", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/44c88a7e02edb306940a6694646fa6c905b299f9", "committedDate": "2020-07-01T12:12:52Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44c88a7e02edb306940a6694646fa6c905b299f9", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/44c88a7e02edb306940a6694646fa6c905b299f9", "committedDate": "2020-07-01T12:12:52Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}, "afterCommit": {"oid": "fc4f608a0a1bb6d5ef969d8fe572ce736f84fb10", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/fc4f608a0a1bb6d5ef969d8fe572ce736f84fb10", "committedDate": "2020-07-01T12:16:04Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwODI0OTIz", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#pullrequestreview-440824923", "createdAt": "2020-07-01T12:32:02Z", "commit": {"oid": "fc4f608a0a1bb6d5ef969d8fe572ce736f84fb10"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjozMjowMlrOGrj6Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMjozMjowMlrOGrj6Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMzMDMzMQ==", "bodyText": "println \"Fetching ${it.wrapperChecksumUrl}\"", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1490#discussion_r448330331", "createdAt": "2020-07-01T12:32:02Z", "author": {"login": "fbricon"}, "path": "org.eclipse.jdt.ls.core/pom.xml", "diffHunk": "@@ -30,6 +30,52 @@\n \t\t\t\t\t</artifactItems>\n \t\t\t\t</configuration>\n \t\t\t</plugin>\n+\t\t\t<plugin>\n+\t\t\t\t<groupId>org.codehaus.gmaven</groupId>\n+\t\t\t\t<artifactId>groovy-maven-plugin</artifactId>\n+\t\t\t\t<version>2.1.1</version>\n+\t\t\t\t<executions>\n+\t\t\t\t\t<execution>\n+\t\t\t\t\t\t<?m2e execute onConfiguration?>\n+\t\t\t\t\t\t<phase>generate-resources</phase>\n+\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t<goal>execute</goal>\n+\t\t\t\t\t\t</goals>\n+\t\t\t\t\t\t<configuration>\n+\t\t\t\t\t\t\t<source>\n+\t\t\t\t\t\t\t\timport groovy.json.JsonSlurper\n+\t\t\t\t\t\t\t\timport groovy.json.JsonOutput\n+\n+\t\t\t\t\t\t\t\tdef versionUrl = new URL(\"https://services.gradle.org/versions/all\")\n+\t\t\t\t\t\t\t\tdef versionStr = versionUrl.text;\n+\t\t\t\t\t\t\t\tdef versionsFile = new File(\"${basedir}/gradle/checksums/versions.json\")\n+\t\t\t\t\t\t\t\tversionsFile.parentFile.mkdirs() //just in case\n+\t\t\t\t\t\t\t\tversionsFile.write(versionStr)\n+\n+\t\t\t\t\t\t\t\tdef versions = new JsonSlurper().parseText(versionStr);\n+\t\t\t\t\t\t\t\tclass Checksum { String wrapperChecksumUrl; String sha256 }\n+\n+\t\t\t\t\t\t\t\tdef checksums = []\n+\t\t\t\t\t\t\t\tversions.each {\n+\t\t\t\t\t\t\t\t\tif (it.wrapperChecksumUrl) {\n+\t\t\t\t\t\t\t\t\t\tdef sha256url = new URL(it.wrapperChecksumUrl)\n+\t\t\t\t\t\t\t\t\t\ttry {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc4f608a0a1bb6d5ef969d8fe572ce736f84fb10"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34d2213765c8586fb46986e44130aa94b8aa9ce2", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/34d2213765c8586fb46986e44130aa94b8aa9ce2", "committedDate": "2020-07-01T12:41:46Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc4f608a0a1bb6d5ef969d8fe572ce736f84fb10", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/fc4f608a0a1bb6d5ef969d8fe572ce736f84fb10", "committedDate": "2020-07-01T12:16:04Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}, "afterCommit": {"oid": "34d2213765c8586fb46986e44130aa94b8aa9ce2", "author": {"user": {"login": "snjeza", "name": "Snjeza"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/34d2213765c8586fb46986e44130aa94b8aa9ce2", "committedDate": "2020-07-01T12:41:46Z", "message": "jdt.ls should store gradle wrapper checksums at build time\n\nSigned-off-by: Snjezana Peco <snjezana.peco@redhat.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1160, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}