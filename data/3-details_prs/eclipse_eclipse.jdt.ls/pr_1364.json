{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5OTczNDc1", "number": 1364, "title": "enable syntax mode when importing a partial folder of maven/gradle project", "bodyText": "Signed-off-by: Jinbo Wang jinbwan@microsoft.com\nFix redhat-developer/vscode-java#1275\nWhen opening a partial folder from a maven/gradle project, because the classpath is incomplete, will report syntax errors only.", "createdAt": "2020-02-26T02:30:55Z", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1364", "merged": true, "mergeCommit": {"oid": "7ba96eb2579530d42dce489e91cad2eee7529953"}, "closed": true, "closedAt": "2020-03-30T20:27:52Z", "author": {"login": "testforstephen"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKh-TxgH2gAyMzc5OTczNDc1OmZkZDkxNTI0YTZhNzNiOGI3MTVlMWFlMDQ2Y2FkNTk3YmZiOTExNDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcS0gs1AFqTM4NDIwNDExOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fdd91524a6a73b8b715e1ae046cad597bfb91149", "author": {"user": {"login": "testforstephen", "name": "Jinbo Wang"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/fdd91524a6a73b8b715e1ae046cad597bfb91149", "committedDate": "2020-03-05T02:20:15Z", "message": "enable syntax mode when importing a partial folder of maven/gradle project\n\nSigned-off-by: Jinbo Wang <jinbwan@microsoft.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f6eba37325ef9264103d99cbc71c9628bc53e3a", "author": {"user": {"login": "testforstephen", "name": "Jinbo Wang"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/3f6eba37325ef9264103d99cbc71c9628bc53e3a", "committedDate": "2020-02-26T02:26:57Z", "message": "enable syntax mode when importing a partial folder of maven/gradle project\n\nSigned-off-by: Jinbo Wang <jinbwan@microsoft.com>"}, "afterCommit": {"oid": "fdd91524a6a73b8b715e1ae046cad597bfb91149", "author": {"user": {"login": "testforstephen", "name": "Jinbo Wang"}}, "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/fdd91524a6a73b8b715e1ae046cad597bfb91149", "committedDate": "2020-03-05T02:20:15Z", "message": "enable syntax mode when importing a partial folder of maven/gradle project\n\nSigned-off-by: Jinbo Wang <jinbwan@microsoft.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MjA0MTE5", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1364#pullrequestreview-384204119", "createdAt": "2020-03-30T20:27:30Z", "commit": {"oid": "fdd91524a6a73b8b715e1ae046cad597bfb91149"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDoyNzozMFrOF9660A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDoyNzozMFrOF9660A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3Mjc4NA==", "bodyText": "I'm not super fan of hardcoding Maven and Gradle specific things here, I think we can improve that by decoupling Build files discovery from the InvisibleProjectImporter, but it'll do for now", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1364#discussion_r400472784", "createdAt": "2020-03-30T20:27:30Z", "author": {"login": "fbricon"}, "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/managers/InvisibleProjectImporter.java", "diffHunk": "@@ -140,6 +141,20 @@ public static boolean loadInvisibleProject(IPath javaFile, IPath rootPath, boole\n \t\treturn true;\n \t}\n \n+\tprivate static boolean isPartOfMatureProject(IPath sourcePath) {\n+\t\tsourcePath = sourcePath.removeTrailingSeparator();\n+\t\tList<String> segments = Arrays.asList(sourcePath.segments());\n+\t\tint index = segments.lastIndexOf(\"src\");\n+\t\tif (index <= 0) {\n+\t\t\treturn false;\n+\t\t}\n+\n+\t\tIPath srcPath = sourcePath.removeLastSegments(segments.size() -1 - index);\n+\t\tIPath container = srcPath.removeLastSegments(1);\n+\t\treturn container.append(\"pom.xml\").toFile().exists()\n+\t\t\t|| container.append(\"build.gradle\").toFile().exists();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdd91524a6a73b8b715e1ae046cad597bfb91149"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1071, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}