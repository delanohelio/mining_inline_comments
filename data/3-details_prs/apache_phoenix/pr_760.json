{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzMzk0MzAz", "number": 760, "title": "PHOENIX-5840: IndexTool inline verification should not fail with -v O\u2026", "bodyText": "\u2026NLY option", "createdAt": "2020-04-14T20:20:33Z", "url": "https://github.com/apache/phoenix/pull/760", "merged": true, "mergeCommit": {"oid": "1c3724a2d835e8a77f10f7f817203a51304046eb"}, "closed": true, "closedAt": "2020-04-15T22:34:39Z", "author": {"login": "swaroopak"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXr6X2gBqjMyMzMyMzQ5NDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX87puABqjMyMzY4ODI2MDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "951fb850b5a0509f43d7e4b587ba80333958fc95", "author": {"user": null}, "url": "https://github.com/apache/phoenix/commit/951fb850b5a0509f43d7e4b587ba80333958fc95", "committedDate": "2020-04-14T20:13:45Z", "message": "PHOENIX-5840: IndexTool inline verification should not fail with -v ONLY option"}, "afterCommit": {"oid": "bfc61424c737f70fbefcc429db2f54bfedcf145e", "author": {"user": null}, "url": "https://github.com/apache/phoenix/commit/bfc61424c737f70fbefcc429db2f54bfedcf145e", "committedDate": "2020-04-14T23:15:42Z", "message": "PHOENIX-5840: IndexTool inline verification should not fail with -v ONLY option"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMzgyMDA2", "url": "https://github.com/apache/phoenix/pull/760#pullrequestreview-393382006", "createdAt": "2020-04-15T00:28:53Z", "commit": {"oid": "bfc61424c737f70fbefcc429db2f54bfedcf145e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwMDoyODo1M1rOGFlnQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwMDoyODo1M1rOGFlnQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODUxMjMyMA==", "bodyText": "I suggest the following instead of above\npublic boolean isVerificationFailed() {\nif (getAfter().getInvalidIndexRowCount() + getAfter().getMissingIndexRowCount() +\nafter.getBeyondMaxLookBackInvalidIndexRowCount() + after.getBeyondMaxLookBackMissingIndexRowCount() > 0) {\nreturn true;\n}\nreturn false;\n}", "url": "https://github.com/apache/phoenix/pull/760#discussion_r408512320", "createdAt": "2020-04-15T00:28:53Z", "author": {"login": "kadirozde"}, "path": "phoenix-core/src/main/java/org/apache/phoenix/coprocessor/IndexToolVerificationResult.java", "diffHunk": "@@ -413,13 +413,8 @@ public void update(Cell cell) {\n     }\n \n     public boolean isVerificationFailed(IndexTool.IndexVerifyType verifyType) {\n-        if (verifyType == IndexTool.IndexVerifyType.BEFORE || verifyType == IndexTool.IndexVerifyType.NONE) {\n+        if (verifyType == IndexTool.IndexVerifyType.BEFORE || verifyType == IndexTool.IndexVerifyType.NONE || verifyType == IndexTool.IndexVerifyType.ONLY) {\n             return false;\n-        } else if (verifyType == IndexTool.IndexVerifyType.ONLY) {\n-            if (getBefore().getInvalidIndexRowCount() + getBefore().getMissingIndexRowCount() +\n-                before.getBeyondMaxLookBackInvalidIndexRowCount() + before.getBeyondMaxLookBackMissingIndexRowCount() > 0) {\n-                return true;\n-            }\n         } else if (verifyType == IndexTool.IndexVerifyType.BOTH || verifyType == IndexTool.IndexVerifyType.AFTER) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfc61424c737f70fbefcc429db2f54bfedcf145e"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "231e1a6e921f571b1a289bb2f6002327da6a4550", "author": {"user": null}, "url": "https://github.com/apache/phoenix/commit/231e1a6e921f571b1a289bb2f6002327da6a4550", "committedDate": "2020-04-15T01:34:08Z", "message": "Fixing review comments: Simplify the if"}, "afterCommit": {"oid": "136105df6cb391a11a4021eb58195132d299619a", "author": {"user": null}, "url": "https://github.com/apache/phoenix/commit/136105df6cb391a11a4021eb58195132d299619a", "committedDate": "2020-04-15T17:21:56Z", "message": "PHOENIX-5840: IndexTool inline verification should not fail with -v ONLY option"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzOTg0MDE0", "url": "https://github.com/apache/phoenix/pull/760#pullrequestreview-393984014", "createdAt": "2020-04-15T17:26:42Z", "commit": {"oid": "136105df6cb391a11a4021eb58195132d299619a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba9618f482f0db2de8cb83acae32b4204c15ab60", "author": {"user": null}, "url": "https://github.com/apache/phoenix/commit/ba9618f482f0db2de8cb83acae32b4204c15ab60", "committedDate": "2020-04-15T19:05:33Z", "message": "PHOENIX-5840: IndexTool inline verification should not fail with -v ONLY option"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "136105df6cb391a11a4021eb58195132d299619a", "author": {"user": null}, "url": "https://github.com/apache/phoenix/commit/136105df6cb391a11a4021eb58195132d299619a", "committedDate": "2020-04-15T17:21:56Z", "message": "PHOENIX-5840: IndexTool inline verification should not fail with -v ONLY option"}, "afterCommit": {"oid": "ba9618f482f0db2de8cb83acae32b4204c15ab60", "author": {"user": null}, "url": "https://github.com/apache/phoenix/commit/ba9618f482f0db2de8cb83acae32b4204c15ab60", "committedDate": "2020-04-15T19:05:33Z", "message": "PHOENIX-5840: IndexTool inline verification should not fail with -v ONLY option"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2001, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}