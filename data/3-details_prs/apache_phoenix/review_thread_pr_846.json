{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NDUzNzA2", "number": 846, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMjowMDowMlrOESxzWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMjowMDowMlrOESxzWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTI1Nzg0OnYy", "diffSide": "RIGHT", "path": "phoenix-core/src/main/java/org/apache/phoenix/compile/DeleteCompiler.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMjowMDowMlrOG4JQXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxODoxMzowNVrOG4YpoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUyNTA4Nw==", "bodyText": "Perhaps use clientSideIndexes  instead of checking isMaintainedOnClient here is better?", "url": "https://github.com/apache/phoenix/pull/846#discussion_r461525087", "createdAt": "2020-07-28T12:00:02Z", "author": {"login": "comnetwork"}, "path": "phoenix-core/src/main/java/org/apache/phoenix/compile/DeleteCompiler.java", "diffHunk": "@@ -486,19 +494,22 @@ else if (table.isTransactional() && connection.getSCN() != null) {\n             projectedColumns.add(column);\n             aliasedNodes.add(FACTORY.aliasedNode(null, FACTORY.column(null, '\"' + column.getName().getString() + '\"', null)));\n         }\n-        // Project all non PK indexed columns so that we can do the proper index maintenance\n+        // Project all non PK indexed columns so that we can do the proper index maintenance on the indexes for which\n+        // mutations are generated on the client side. Indexed columns are needed to identify index rows to be deleted\n         for (PTable index : table.getIndexes()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abe5e3cbdad795d5c2e03ad8de7539cc819de982"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc3NzMxMw==", "bodyText": "Possibly but I have tested this code and do not want to go through the whole testing cycle which includes testing on a real cluster as this is a production issue for us now. Thanks for the suggestion", "url": "https://github.com/apache/phoenix/pull/846#discussion_r461777313", "createdAt": "2020-07-28T18:13:05Z", "author": {"login": "kadirozde"}, "path": "phoenix-core/src/main/java/org/apache/phoenix/compile/DeleteCompiler.java", "diffHunk": "@@ -486,19 +494,22 @@ else if (table.isTransactional() && connection.getSCN() != null) {\n             projectedColumns.add(column);\n             aliasedNodes.add(FACTORY.aliasedNode(null, FACTORY.column(null, '\"' + column.getName().getString() + '\"', null)));\n         }\n-        // Project all non PK indexed columns so that we can do the proper index maintenance\n+        // Project all non PK indexed columns so that we can do the proper index maintenance on the indexes for which\n+        // mutations are generated on the client side. Indexed columns are needed to identify index rows to be deleted\n         for (PTable index : table.getIndexes()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUyNTA4Nw=="}, "originalCommit": {"oid": "abe5e3cbdad795d5c2e03ad8de7539cc819de982"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4580, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}