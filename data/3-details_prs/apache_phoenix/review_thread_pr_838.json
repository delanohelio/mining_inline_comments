{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0MTk2NDEy", "number": 838, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNTo0ODozMlrOEco2QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNTo0ODozMlrOEco2QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NDY0ODMyOnYy", "diffSide": "LEFT", "path": "phoenix-core/src/it/java/org/apache/phoenix/end2end/InListIT.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxNTo0ODozMlrOHHSfdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQwNDo1NTozNFrOHKiFYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQwNTA0Ng==", "bodyText": "Instead of the initialized variable, could we change this to the @BeforeClass annotation instead?\nIn fact would the whole test still work if we only change @before to @BeforeClass?", "url": "https://github.com/apache/phoenix/pull/838#discussion_r477405046", "createdAt": "2020-08-26T15:48:32Z", "author": {"login": "lhofhansl"}, "path": "phoenix-core/src/it/java/org/apache/phoenix/end2end/InListIT.java", "diffHunk": "@@ -43,27 +46,39 @@\n import org.apache.phoenix.schema.types.PInteger;\n import org.apache.phoenix.util.PhoenixRuntime;\n import org.apache.phoenix.util.PropertiesUtil;\n+import org.junit.After;\n import org.junit.Before;\n import org.junit.Test;\n \n-import com.google.common.base.Function;\n-import com.google.common.base.Joiner;\n-import com.google.common.collect.Lists;\n-\n \n public class InListIT extends ParallelStatsDisabledIT {\n     private static final String TENANT_SPECIFIC_URL1 = getUrl() + ';' + TENANT_ID_ATTRIB + \"=tenant1\";\n-    String tableName;\n-    String descViewName;\n-    String ascViewName;\n+    private static boolean isInitialized = false;\n+    private static String tableName = generateUniqueName();\n+    private static String tableName2 = generateUniqueName();\n+    private static String descViewName = generateUniqueName();\n+    private static String ascViewName = generateUniqueName();\n+    private static String viewName1 = generateUniqueName();\n+    private static String viewName2 = generateUniqueName();\n+    private static String prefix = generateUniqueName();\n \n     @Before\n     public void setup() throws Exception {\n-        tableName = generateUniqueName();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdeb6bf0b6365eb2c4c4be56e3c57e4f6a6faa8d"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQyMTkzMg==", "bodyText": "And sorry I missed this for so long. I was off end of July and then missed it.", "url": "https://github.com/apache/phoenix/pull/838#discussion_r477421932", "createdAt": "2020-08-26T16:13:47Z", "author": {"login": "lhofhansl"}, "path": "phoenix-core/src/it/java/org/apache/phoenix/end2end/InListIT.java", "diffHunk": "@@ -43,27 +46,39 @@\n import org.apache.phoenix.schema.types.PInteger;\n import org.apache.phoenix.util.PhoenixRuntime;\n import org.apache.phoenix.util.PropertiesUtil;\n+import org.junit.After;\n import org.junit.Before;\n import org.junit.Test;\n \n-import com.google.common.base.Function;\n-import com.google.common.base.Joiner;\n-import com.google.common.collect.Lists;\n-\n \n public class InListIT extends ParallelStatsDisabledIT {\n     private static final String TENANT_SPECIFIC_URL1 = getUrl() + ';' + TENANT_ID_ATTRIB + \"=tenant1\";\n-    String tableName;\n-    String descViewName;\n-    String ascViewName;\n+    private static boolean isInitialized = false;\n+    private static String tableName = generateUniqueName();\n+    private static String tableName2 = generateUniqueName();\n+    private static String descViewName = generateUniqueName();\n+    private static String ascViewName = generateUniqueName();\n+    private static String viewName1 = generateUniqueName();\n+    private static String viewName2 = generateUniqueName();\n+    private static String prefix = generateUniqueName();\n \n     @Before\n     public void setup() throws Exception {\n-        tableName = generateUniqueName();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQwNTA0Ng=="}, "originalCommit": {"oid": "cdeb6bf0b6365eb2c4c4be56e3c57e4f6a6faa8d"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMyMTgwNQ==", "bodyText": "would the whole test still work if we only change @before to @BeforeClass?\n\nYeah , actually @BeforeClass requires a method to be static so all the data structures need to be updated as static. I didn't spend time doing that probably because of being lazy though could have used @BeforeAll and make the Junit lifecycle to be @testinstance(Lifecycle.PER_CLASS) to avoid an initialized variable.", "url": "https://github.com/apache/phoenix/pull/838#discussion_r480321805", "createdAt": "2020-08-31T18:50:14Z", "author": {"login": "ankitsinghal"}, "path": "phoenix-core/src/it/java/org/apache/phoenix/end2end/InListIT.java", "diffHunk": "@@ -43,27 +46,39 @@\n import org.apache.phoenix.schema.types.PInteger;\n import org.apache.phoenix.util.PhoenixRuntime;\n import org.apache.phoenix.util.PropertiesUtil;\n+import org.junit.After;\n import org.junit.Before;\n import org.junit.Test;\n \n-import com.google.common.base.Function;\n-import com.google.common.base.Joiner;\n-import com.google.common.collect.Lists;\n-\n \n public class InListIT extends ParallelStatsDisabledIT {\n     private static final String TENANT_SPECIFIC_URL1 = getUrl() + ';' + TENANT_ID_ATTRIB + \"=tenant1\";\n-    String tableName;\n-    String descViewName;\n-    String ascViewName;\n+    private static boolean isInitialized = false;\n+    private static String tableName = generateUniqueName();\n+    private static String tableName2 = generateUniqueName();\n+    private static String descViewName = generateUniqueName();\n+    private static String ascViewName = generateUniqueName();\n+    private static String viewName1 = generateUniqueName();\n+    private static String viewName2 = generateUniqueName();\n+    private static String prefix = generateUniqueName();\n \n     @Before\n     public void setup() throws Exception {\n-        tableName = generateUniqueName();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQwNTA0Ng=="}, "originalCommit": {"oid": "cdeb6bf0b6365eb2c4c4be56e3c57e4f6a6faa8d"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDgwNjI0Mw==", "bodyText": "I looked up @testinstance because it sounds interesting, but it's a Junit5 feature, and we're still on Junit 4. AFAICT The only solutions are your current one, or using @BeforeClass as you said.", "url": "https://github.com/apache/phoenix/pull/838#discussion_r480806243", "createdAt": "2020-09-01T04:55:34Z", "author": {"login": "stoty"}, "path": "phoenix-core/src/it/java/org/apache/phoenix/end2end/InListIT.java", "diffHunk": "@@ -43,27 +46,39 @@\n import org.apache.phoenix.schema.types.PInteger;\n import org.apache.phoenix.util.PhoenixRuntime;\n import org.apache.phoenix.util.PropertiesUtil;\n+import org.junit.After;\n import org.junit.Before;\n import org.junit.Test;\n \n-import com.google.common.base.Function;\n-import com.google.common.base.Joiner;\n-import com.google.common.collect.Lists;\n-\n \n public class InListIT extends ParallelStatsDisabledIT {\n     private static final String TENANT_SPECIFIC_URL1 = getUrl() + ';' + TENANT_ID_ATTRIB + \"=tenant1\";\n-    String tableName;\n-    String descViewName;\n-    String ascViewName;\n+    private static boolean isInitialized = false;\n+    private static String tableName = generateUniqueName();\n+    private static String tableName2 = generateUniqueName();\n+    private static String descViewName = generateUniqueName();\n+    private static String ascViewName = generateUniqueName();\n+    private static String viewName1 = generateUniqueName();\n+    private static String viewName2 = generateUniqueName();\n+    private static String prefix = generateUniqueName();\n \n     @Before\n     public void setup() throws Exception {\n-        tableName = generateUniqueName();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQwNTA0Ng=="}, "originalCommit": {"oid": "cdeb6bf0b6365eb2c4c4be56e3c57e4f6a6faa8d"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4577, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}