{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyMjcxMTEx", "number": 447, "title": "added check for no objects detected in object detector", "bodyText": "Description\nFixed object detector default handler for \"no objects detected\" by the model.\nFixes #435\nType of change\n\n Bug fix (non-breaking change which fixes an issue)\n\nFeature/Issue validation/testing\n\nStart torchserve\nregister fastrcnn model from model zoo\nrun inference with a blank image\nThe request should succeed with response \"No object detected\"\n\nChecklist:\n\n Have you added tests that prove your fix is effective or that this feature works?\n New and existing unit tests pass locally with these changes?\n Has code been commented, particularly in hard-to-understand areas?\n Have you made corresponding changes to the documentation?", "createdAt": "2020-06-10T07:52:31Z", "url": "https://github.com/pytorch/serve/pull/447", "merged": true, "mergeCommit": {"oid": "782fee34bd16a6b7ffdc84d4ee0264912963e835"}, "closed": true, "closedAt": "2020-07-21T16:34:56Z", "author": {"login": "harshbafna"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp00KcgH2gAyNDMyMjcxMTExOjc2NzkxMDU2NWJmMzE4Njg1OTcyYTRmOWQ2ZWRiYTI3OGU0NWY3M2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3IeW7gH2gAyNDMyMjcxMTExOjVkYjJiYjMwNjI5MmZhYzIyZWU4NGY5MGViZjg5NWExNjY5NGE2ZjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "767910565bf318685972a4f9d6edba278e45f73d", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/767910565bf318685972a4f9d6edba278e45f73d", "committedDate": "2020-06-10T07:49:01Z", "message": "added check for no objects detected in onject detector"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3ODMyMzM1", "url": "https://github.com/pytorch/serve/pull/447#pullrequestreview-427832335", "createdAt": "2020-06-10T08:34:14Z", "commit": {"oid": "767910565bf318685972a4f9d6edba278e45f73d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwODozNDoxNFrOGhqpWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwODozNDoxNFrOGhqpWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk1NDkwNg==", "bodyText": "Remove unused object.", "url": "https://github.com/pytorch/serve/pull/447#discussion_r437954906", "createdAt": "2020-06-10T08:34:14Z", "author": {"login": "dhaniram-kshirsagar"}, "path": "ts/torch_handler/object_detector.py", "diffHunk": "@@ -2,13 +2,16 @@\n Module for object detection default handler\n \"\"\"\n import io\n+import logging\n import torch\n from PIL import Image\n from torchvision import transforms\n from torchvision import __version__ as torchvision_version\n from torch.autograd import Variable\n from .vision_handler import VisionHandler\n \n+logger = logging.getLogger(__name__)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "767910565bf318685972a4f9d6edba278e45f73d"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9165727651d7bd4777bdfdaa4236e2940fb24c92", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/9165727651d7bd4777bdfdaa4236e2940fb24c92", "committedDate": "2020-06-10T14:09:29Z", "message": "Removed unused logger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec90e74922cf9daa971e11fdd5f6d7a695017227", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/ec90e74922cf9daa971e11fdd5f6d7a695017227", "committedDate": "2020-06-10T14:13:08Z", "message": "Removed unused import."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e728e85f1b1189bf54e0d2ecbe5097ca1b72ccc9", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/e728e85f1b1189bf54e0d2ecbe5097ca1b72ccc9", "committedDate": "2020-06-19T06:23:11Z", "message": "Merge branch 'master' into issue_435"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "673a163f737b3d82d937e74cc1b9487c97f87c89", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/673a163f737b3d82d937e74cc1b9487c97f87c89", "committedDate": "2020-06-19T06:24:06Z", "message": "rebased to master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MTY2NDE5", "url": "https://github.com/pytorch/serve/pull/447#pullrequestreview-437166419", "createdAt": "2020-06-25T04:53:30Z", "commit": {"oid": "673a163f737b3d82d937e74cc1b9487c97f87c89"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNDo1MzozMFrOGorT2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNDo1MzozMFrOGorT2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMwNTgxNw==", "bodyText": "Wondering if returning an empty list is more appropriate that returning an element a single element with string val.", "url": "https://github.com/pytorch/serve/pull/447#discussion_r445305817", "createdAt": "2020-06-25T04:53:30Z", "author": {"login": "dhanainme"}, "path": "ts/torch_handler/object_detector.py", "diffHunk": "@@ -91,8 +97,9 @@ def handle(data, context):\n \n         data = _service.preprocess(data)\n         data = _service.inference(data)\n-        data = _service.postprocess(data)\n-\n-        return data\n+        if data:\n+            return _service.postprocess(data)\n+        else:\n+            return [\"No object detected\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "673a163f737b3d82d937e74cc1b9487c97f87c89"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aec7641ca0b9f52f7398fcfc36a1f7d61ff5b9cf", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/aec7641ca0b9f52f7398fcfc36a1f7d61ff5b9cf", "committedDate": "2020-06-25T09:59:17Z", "message": "Merge branch 'master' into issue_435"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32d00036cbc4f03c006d4ee339910fc375516b2e", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/32d00036cbc4f03c006d4ee339910fc375516b2e", "committedDate": "2020-06-25T16:12:59Z", "message": "added test for blank image as input to object detector in sanity script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4459cf8b721f73ae74cb1ce10db0a2d06953204e", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/4459cf8b721f73ae74cb1ce10db0a2d06953204e", "committedDate": "2020-07-03T08:20:04Z", "message": "Merge branch 'master' into issue_435"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18a9f738a8f14fd8fd1f8ff114ff389717d61338", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/18a9f738a8f14fd8fd1f8ff114ff389717d61338", "committedDate": "2020-07-07T03:28:09Z", "message": "Merge branch 'master' into issue_435"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37d32a3652acb73ddbe1da09fa0bdd987a7a09e9", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/37d32a3652acb73ddbe1da09fa0bdd987a7a09e9", "committedDate": "2020-07-08T04:02:31Z", "message": "Merge branch 'master' into issue_435"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f06107f65b5297e658961dddf2b3c6b26a5a4a80", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/f06107f65b5297e658961dddf2b3c6b26a5a4a80", "committedDate": "2020-07-15T05:48:01Z", "message": "Merge branch 'master' into issue_435"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwOTc0ODc2", "url": "https://github.com/pytorch/serve/pull/447#pullrequestreview-450974876", "createdAt": "2020-07-17T21:51:19Z", "commit": {"oid": "f06107f65b5297e658961dddf2b3c6b26a5a4a80"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QyMTo1MToyMFrOGziGng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QyMTo1MToyMFrOGziGng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4OTMxMA==", "bodyText": "Agreed with @dhanainme", "url": "https://github.com/pytorch/serve/pull/447#discussion_r456689310", "createdAt": "2020-07-17T21:51:20Z", "author": {"login": "maaquib"}, "path": "ts/torch_handler/object_detector.py", "diffHunk": "@@ -91,8 +97,9 @@ def handle(data, context):\n \n         data = _service.preprocess(data)\n         data = _service.inference(data)\n-        data = _service.postprocess(data)\n-\n-        return data\n+        if data:\n+            return _service.postprocess(data)\n+        else:\n+            return [\"No object detected\"]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMwNTgxNw=="}, "originalCommit": {"oid": "673a163f737b3d82d937e74cc1b9487c97f87c89"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f494f3454a345e5550260f9ba09e71f44ccf4ce", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/9f494f3454a345e5550260f9ba09e71f44ccf4ce", "committedDate": "2020-07-18T01:34:26Z", "message": "Merge branch 'master' into issue_435"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e92103faa724e1a850120c2cb0e90efd4a479f11", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/e92103faa724e1a850120c2cb0e90efd4a479f11", "committedDate": "2020-07-18T01:53:17Z", "message": "changed behavior to return empty list if no objects detected"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd2f4fac5e973917e7b6c442cce99b465e0f3431", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/bd2f4fac5e973917e7b6c442cce99b465e0f3431", "committedDate": "2020-07-18T02:39:39Z", "message": "fixed return type to blank list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTMxNDMz", "url": "https://github.com/pytorch/serve/pull/447#pullrequestreview-452531433", "createdAt": "2020-07-21T14:44:19Z", "commit": {"oid": "bd2f4fac5e973917e7b6c442cce99b465e0f3431"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5db2bb306292fac22ee84f90ebf895a16694a6f4", "author": {"user": {"login": "dhanainme", "name": null}}, "url": "https://github.com/pytorch/serve/commit/5db2bb306292fac22ee84f90ebf895a16694a6f4", "committedDate": "2020-07-21T16:04:19Z", "message": "Merge branch 'master' into issue_435"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2198, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}