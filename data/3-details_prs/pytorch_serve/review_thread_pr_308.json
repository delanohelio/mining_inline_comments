{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0ODE3MDA0", "number": 308, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzo0MTozOFrOD6WjwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNzoxMzoxN1rOD-rf0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNTEzNjAwOnYy", "diffSide": "RIGHT", "path": "docker/Dockerfile.cpu", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzo0MTozOFrOGSJTDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMToyMjo1MVrOGWA45g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY3OTg4NQ==", "bodyText": "Can't we have a separate requirements.txt in docker folder with all the required packages. That way we can simply COPY requirements.txt in the docker file and RUN pip install -r requirements.txt in all the Dockerfiles. We will have one place to update if we need to add packages or pin the versions of packages right?", "url": "https://github.com/pytorch/serve/pull/308#discussion_r421679885", "createdAt": "2020-05-07T17:41:38Z", "author": {"login": "vdantu"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -20,12 +20,7 @@ RUN apt-get update && \\\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n-RUN pip install --no-cache-dir psutil\n-RUN pip install --no-cache-dir torch\n-RUN pip install --no-cache-dir torchvision\n-RUN pip install --no-cache-dir torchtext\n-ADD serve serve\n-RUN pip install ../serve/\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext torchserve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5af7ba9870a250b9a274b4346084c450b6a6be1b"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5ODQ4Ng==", "bodyText": "@vdantu There is a separate GH issues for requirements.txt -- this can be tackled as part of its sol", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422598486", "createdAt": "2020-05-10T06:58:18Z", "author": {"login": "chauhang"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -20,12 +20,7 @@ RUN apt-get update && \\\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n-RUN pip install --no-cache-dir psutil\n-RUN pip install --no-cache-dir torch\n-RUN pip install --no-cache-dir torchvision\n-RUN pip install --no-cache-dir torchtext\n-ADD serve serve\n-RUN pip install ../serve/\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext torchserve", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY3OTg4NQ=="}, "originalCommit": {"oid": "5af7ba9870a250b9a274b4346084c450b6a6be1b"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzkzMzE3MQ==", "bodyText": "@vdantu @chauhang I have added you both in this PR for a separate requirements.txt\nPlease review and comment there as well. Thanks.\n#228", "url": "https://github.com/pytorch/serve/pull/308#discussion_r423933171", "createdAt": "2020-05-12T18:07:42Z", "author": {"login": "mycpuorg"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -20,12 +20,7 @@ RUN apt-get update && \\\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n-RUN pip install --no-cache-dir psutil\n-RUN pip install --no-cache-dir torch\n-RUN pip install --no-cache-dir torchvision\n-RUN pip install --no-cache-dir torchtext\n-ADD serve serve\n-RUN pip install ../serve/\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext torchserve", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY3OTg4NQ=="}, "originalCommit": {"oid": "5af7ba9870a250b9a274b4346084c450b6a6be1b"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTczNjQyMg==", "bodyText": "#228 will address the requirement.txt and new issue can be created to incorporate those changes in new Dockerfile. Please suggest.", "url": "https://github.com/pytorch/serve/pull/308#discussion_r425736422", "createdAt": "2020-05-15T11:22:51Z", "author": {"login": "dhaniram-kshirsagar"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -20,12 +20,7 @@ RUN apt-get update && \\\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n-RUN pip install --no-cache-dir psutil\n-RUN pip install --no-cache-dir torch\n-RUN pip install --no-cache-dir torchvision\n-RUN pip install --no-cache-dir torchtext\n-ADD serve serve\n-RUN pip install ../serve/\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext torchserve", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY3OTg4NQ=="}, "originalCommit": {"oid": "5af7ba9870a250b9a274b4346084c450b6a6be1b"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMTM0OTQ0OnYy", "diffSide": "RIGHT", "path": "docker/Dockerfile.cpu", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwNjo0OToyN1rOGTBTrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwNjo0OToyN1rOGTBTrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5NzU0OA==", "bodyText": "@dhaniram-kshirsagar The model archiver also need to be added to the docker during production install. Add the pip install for that as well", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422597548", "createdAt": "2020-05-10T06:49:27Z", "author": {"login": "chauhang"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -20,12 +20,7 @@ RUN apt-get update && \\\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n-RUN pip install --no-cache-dir psutil\n-RUN pip install --no-cache-dir torch\n-RUN pip install --no-cache-dir torchvision\n-RUN pip install --no-cache-dir torchtext\n-ADD serve serve\n-RUN pip install ../serve/\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext torchserve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMTM0OTkwOnYy", "diffSide": "RIGHT", "path": "docker/Dockerfile.gpu", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwNjo1MDowM1rOGTBT4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwNjo1MDowM1rOGTBT4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5NzYwMA==", "bodyText": "@dhaniram-kshirsagar Add the pip install from model archiver as well", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422597600", "createdAt": "2020-05-10T06:50:03Z", "author": {"login": "chauhang"}, "path": "docker/Dockerfile.gpu", "diffHunk": "@@ -21,10 +21,7 @@ RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n RUN export USE_CUDA=1\n-RUN pip install psutil future torch torchvision torchtext\n-RUN pip install --no-cache-dir psutil\n-ADD serve serve\n-RUN pip install ../serve/\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext torchserve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMTM1NjM0OnYy", "diffSide": "RIGHT", "path": "docker/Dockerfile.cpu", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwNjo1NzoyNVrOGTBXBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMToxOTo1MlrOGWAzcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5ODQwNA==", "bodyText": "@dhaniram-kshirsagar Why are g++, python3-dev, vim needed for production version of docker containers? Please review and remove any non essential items. This will help in reducing the size of the docker container and speedup the launch time", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422598404", "createdAt": "2020-05-10T06:57:25Z", "author": {"login": "chauhang"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -9,7 +9,7 @@ RUN apt-get update && \\\n     dpkg-dev \\\n     g++ \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTczNTAyNw==", "bodyText": "PR #309 for #178 is addressing this and other concerns related to dockerfile in this PR. Also, #309 will result in single docker file for cpu and gpu. #309 is almost done with respect to multi-stage and buildkit hence planning to merge #309 changes to this PR to avoid duplication of work.  Please have a look at comments in #309.", "url": "https://github.com/pytorch/serve/pull/308#discussion_r425735027", "createdAt": "2020-05-15T11:19:52Z", "author": {"login": "dhaniram-kshirsagar"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -9,7 +9,7 @@ RUN apt-get update && \\\n     dpkg-dev \\\n     g++ \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5ODQwNA=="}, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMTM1OTMyOnYy", "diffSide": "RIGHT", "path": "docker/Dockerfile_dev.gpu", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwNzowMDo1NFrOGTBYaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwNzowMDo1NFrOGTBYaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5ODc2MQ==", "bodyText": "Please remove from all the docker files", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422598761", "createdAt": "2020-05-10T07:00:54Z", "author": {"login": "chauhang"}, "path": "docker/Dockerfile_dev.gpu", "diffHunk": "@@ -0,0 +1,47 @@\n+FROM nvidia/cuda:10.1-cudnn7-runtime-ubuntu18.04\n+\n+ENV PYTHONUNBUFFERED TRUE\n+\n+RUN apt-get update && \\\n+    DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y \\\n+    fakeroot \\\n+    ca-certificates \\\n+    dpkg-dev \\\n+    g++ \\\n+    python3-dev \\\n+    openjdk-11-jdk-headless \\\n+    curl \\\n+    vim \\\n+    && rm -rf /var/lib/apt/lists/* \\\n+    && cd /tmp \\\n+    && curl -O https://bootstrap.pypa.io/get-pip.py \\\n+    && python3 get-pip.py\n+\n+RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n+RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n+\n+RUN export USE_CUDA=1\n+RUN pip install psutil future torch torchvision torchtext\n+ADD serve serve\n+RUN pip install ../serve/\n+\n+RUN useradd -m model-server \\\n+    && mkdir -p /home/model-server/tmp\n+\n+COPY dockerd-entrypoint.sh /usr/local/bin/dockerd-entrypoint.sh\n+\n+RUN chmod +x /usr/local/bin/dockerd-entrypoint.sh \\\n+    && chown -R model-server /home/model-server\n+\n+COPY config.properties /home/model-server/config.properties\n+RUN mkdir /home/model-server/model-store && chown -R model-server /home/model-server/model-store\n+\n+EXPOSE 8080 8081\n+\n+USER model-server\n+WORKDIR /home/model-server\n+ENV TEMP=/home/model-server/tmp\n+ENTRYPOINT [\"/usr/local/bin/dockerd-entrypoint.sh\"]\n+CMD [\"serve\"]\n+\n+LABEL maintainer=\"wongale@amazon.com\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMTM5MTE2OnYy", "diffSide": "RIGHT", "path": "docker/README.md", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwNzozOTowMlrOGTBn5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxODoyNDo1NFrOGY94WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYwMjcyNQ==", "bodyText": "@dhaniram-kshirsagar The docker dev build command throws many errors for the failing gradle tests while the build is happening\n 5 tests completed, 1 failed\n  \n  > Task :server:test FAILED\n  > Task :server:jacocoTestReport\n  \n  FAILURE: Build failed with an exception.\n  \n  * What went wrong:\n  Execution failed for task ':server:test'.\n  > There were failing tests. See the report at: file:///serve/frontend/server/build/reports/tests/test/index.html\n\nHowever after this it still proceeds and creates a container.\nFailed to build torchserve\nInstalling collected packages: torchserve\n    Running setup.py install for torchserve: started\n    Running setup.py install for torchserve: still running...\n    Running setup.py install for torchserve: still running...\n    Running setup.py install for torchserve: finished with status 'done'\nSuccessfully installed torchserve-0.0.1b20200510\nRemoving intermediate container a7e2317f538d\n ---> b30ed2bfdf4f\nStep 9/20 : RUN useradd -m model-server     && mkdir -p /home/model-server/tmp\n....\n\n\nPlease fix the errors so that all the gradle tests work fine which will be needed for the development build.\nNote: The build for branch issue_266 worked fine, so unclear where the error is.\n./build_image.sh -b issue_266 -t torchserver:dev gave no errors", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422602725", "createdAt": "2020-05-10T07:39:02Z", "author": {"login": "chauhang"}, "path": "docker/README.md", "diffHunk": "@@ -54,27 +68,50 @@ The TorchServe's inference and management APIs can be accessed on localhost over\n curl http://localhost:8080/ping\n ```\n \n-#### Check running containers\n+# Create TorchServe docker image from source\n+\n+The following are examples on how to use the `build_image.sh` script to build Docker images to support CPU or GPU inference.\n+\n+To build the TorchServe image for a CPU device using the `master` branch, use the following command:\n \n ```bash\n-docker ps\n+./build_image.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxODc0Mw==", "bodyText": "I tried to reproduce this with latest changes however no luck. IMO, fixes #352 and #341 should take care of these intermittent build failures.", "url": "https://github.com/pytorch/serve/pull/308#discussion_r426818743", "createdAt": "2020-05-18T18:32:30Z", "author": {"login": "dhaniram-kshirsagar"}, "path": "docker/README.md", "diffHunk": "@@ -54,27 +68,50 @@ The TorchServe's inference and management APIs can be accessed on localhost over\n curl http://localhost:8080/ping\n ```\n \n-#### Check running containers\n+# Create TorchServe docker image from source\n+\n+The following are examples on how to use the `build_image.sh` script to build Docker images to support CPU or GPU inference.\n+\n+To build the TorchServe image for a CPU device using the `master` branch, use the following command:\n \n ```bash\n-docker ps\n+./build_image.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYwMjcyNQ=="}, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUzNzUwOQ==", "bodyText": "Again tried different combinations to repro this however still no luck. With changes in this PR [branch -> issue_266]\ncd docker\n./build_image.sh [checkout master]\n--> successfully created image\n\nintroduce some error in any of java file [to fail the build]\nmodify the build_image.sh so that it uses existing serve\n-finally execute script\n./build_image.sh\n--> build fails and no docker file is created.\n\nPlease provide details if the above steps are incorrect.", "url": "https://github.com/pytorch/serve/pull/308#discussion_r427537509", "createdAt": "2020-05-19T19:10:50Z", "author": {"login": "dhaniram-kshirsagar"}, "path": "docker/README.md", "diffHunk": "@@ -54,27 +68,50 @@ The TorchServe's inference and management APIs can be accessed on localhost over\n curl http://localhost:8080/ping\n ```\n \n-#### Check running containers\n+# Create TorchServe docker image from source\n+\n+The following are examples on how to use the `build_image.sh` script to build Docker images to support CPU or GPU inference.\n+\n+To build the TorchServe image for a CPU device using the `master` branch, use the following command:\n \n ```bash\n-docker ps\n+./build_image.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYwMjcyNQ=="}, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODgzMjg1Ng==", "bodyText": "Verified that this works on branch issue_266", "url": "https://github.com/pytorch/serve/pull/308#discussion_r428832856", "createdAt": "2020-05-21T18:24:54Z", "author": {"login": "maaquib"}, "path": "docker/README.md", "diffHunk": "@@ -54,27 +68,50 @@ The TorchServe's inference and management APIs can be accessed on localhost over\n curl http://localhost:8080/ping\n ```\n \n-#### Check running containers\n+# Create TorchServe docker image from source\n+\n+The following are examples on how to use the `build_image.sh` script to build Docker images to support CPU or GPU inference.\n+\n+To build the TorchServe image for a CPU device using the `master` branch, use the following command:\n \n ```bash\n-docker ps\n+./build_image.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYwMjcyNQ=="}, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MDUwNzYyOnYy", "diffSide": "RIGHT", "path": "docker/Dockerfile_dev.gpu", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNzoxMjo0OVrOGY7cvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNzoxMjo0OVrOGY7cvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc5MzAyMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ADD serve serve\n          \n          \n            \n            ADD ../serve serve", "url": "https://github.com/pytorch/serve/pull/308#discussion_r428793020", "createdAt": "2020-05-21T17:12:49Z", "author": {"login": "maaquib"}, "path": "docker/Dockerfile_dev.gpu", "diffHunk": "@@ -21,10 +34,10 @@ RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n RUN export USE_CUDA=1\n-RUN pip install psutil future torch torchvision torchtext\n-RUN pip install --no-cache-dir psutil\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext\n ADD serve serve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6913a21e9b483d0f6d47ae25fdacbe277ea6e952"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MDUwOTYzOnYy", "diffSide": "RIGHT", "path": "docker/Dockerfile_dev.cpu", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNzoxMzoxN1rOGY7d7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNzoxMzoxN1rOGY7d7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc5MzMyNg==", "bodyText": "Given that the docker build would be run from the serve/docker directory shouldn't this be\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ADD serve serve\n          \n          \n            \n            ADD ../serve serve", "url": "https://github.com/pytorch/serve/pull/308#discussion_r428793326", "createdAt": "2020-05-21T17:13:17Z", "author": {"login": "maaquib"}, "path": "docker/Dockerfile_dev.cpu", "diffHunk": "@@ -20,12 +33,10 @@ RUN apt-get update && \\\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n-RUN pip install --no-cache-dir psutil\n-RUN pip install --no-cache-dir torch\n-RUN pip install --no-cache-dir torchvision\n-RUN pip install --no-cache-dir torchtext\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext\n ADD serve serve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6913a21e9b483d0f6d47ae25fdacbe277ea6e952"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1643, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}