{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NDk0MTU5", "number": 322, "title": "Issue 312 install from src", "bodyText": "This addresses issue #312. Fixes case where torchserve was not previously installed in the host.\nDescription\nPlease include a summary of the feature or issue being fixed. Please also include relevant motivation and context. List any dependencies that are required for this change.\nFixes #(issue)\nType of change\nPlease delete options that are not relevant.\n\n Bug fix (non-breaking change which fixes an issue)\n This change requires a documentation update\n\nFeature/Issue validation/testing\nPlease describe the tests [UT/IT] that you ran to verify your changes and relevant result summary. Provide instructions so it can be reproduced.\nPlease also list any relevant details for your test configuration.\n\n\n Test A\nInstalled with pip install .\n\n\nUT/IT execution results\n\n\nLogs\n\n\nChecklist:\n\n Have you added tests that prove your fix is effective or that this feature works?\n New and existing unit tests pass locally with these changes?\n Has code been commented, particularly in hard-to-understand areas?\n Have you made corresponding changes to the documentation?", "createdAt": "2020-05-09T01:31:36Z", "url": "https://github.com/pytorch/serve/pull/322", "merged": true, "mergeCommit": {"oid": "c41bc1d453f47e1575316651da106a5f1d6f5b82"}, "closed": true, "closedAt": "2020-05-12T17:35:21Z", "author": {"login": "dhanainme"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdMSY9AH2gAyNDE1NDk0MTU5OmMxZGJjMmE2NzFiZmRjMDgwMzBhZmQyNzJhOGEzYzZhMGY4ZmU0YjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgmX3RgH2gAyNDE1NDk0MTU5OjViZTZkNmRjMDExZDkyNWZjYjg3ZjAzMWI5MzhkMDQwYWYxNGU4MGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c1dbc2a671bfdc08030afd272a8a3c6a0f8fe4b6", "author": {"user": {"login": "eslesar-aws", "name": "Eric Slesar"}}, "url": "https://github.com/pytorch/serve/commit/c1dbc2a671bfdc08030afd272a8a3c6a0f8fe4b6", "committedDate": "2020-05-02T01:48:50Z", "message": "documentation: fixed issues in installation and quick start in README.md"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e13bfc184e7323ce4d990702f4a34537acd8165d", "author": {"user": {"login": "maaquib", "name": "Aaqib"}}, "url": "https://github.com/pytorch/serve/commit/e13bfc184e7323ce4d990702f4a34537acd8165d", "committedDate": "2020-05-02T23:41:37Z", "message": "documentation: Reverting conda related doc changes from PR#286\n\nFixes https://github.com/pytorch/serve/issues/297"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "296116b8ea2ec36ad412b80a12743408d7ad4b69", "author": {"user": {"login": "chauhang", "name": "Geeta Chauhan"}}, "url": "https://github.com/pytorch/serve/commit/296116b8ea2ec36ad412b80a12743408d7ad4b69", "committedDate": "2020-05-02T23:56:11Z", "message": "Merge pull request #298 from maaquib/issue_297\n\ndocumentation: Reverting conda related doc changes from PR#286"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85dbef426688c5d0fe2a47fc56cad6a79b179718", "author": {"user": {"login": "aaronmarkham", "name": "Aaron Markham"}}, "url": "https://github.com/pytorch/serve/commit/85dbef426688c5d0fe2a47fc56cad6a79b179718", "committedDate": "2020-05-08T17:14:30Z", "message": "remove minus y (#311)\n\nupdate pip install instructions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "044f8d23d50a093b9d6f2c0f69afc147cf9eb746", "author": {"user": {"login": "mycpuorg", "name": null}}, "url": "https://github.com/pytorch/serve/commit/044f8d23d50a093b9d6f2c0f69afc147cf9eb746", "committedDate": "2020-05-08T22:28:45Z", "message": "Update instructions for installation from source\n\nThis commit aims to address Issue #312\n\nTested on a fresh EC2 P3.2 instance:\n* Followed instructions under\nhttps://github.com/pytorch/serve#install-torchserve-for-development\n* Started the server manually from command line\n* Ran a ping query\n\nReceived a response from server with \"Healthy\" status\n\nSigned-off-by: Manoj Rao <mail@mycpu.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "231f18ca958d74570410235a28c5bcfb927ccae7", "author": {"user": {"login": "mycpuorg", "name": null}}, "url": "https://github.com/pytorch/serve/commit/231f18ca958d74570410235a28c5bcfb927ccae7", "committedDate": "2020-05-08T23:32:14Z", "message": "add separate files for installation\n\none each for linux and macos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eef731fac8ff92a7117f199659e7847f76742788", "author": {"user": {"login": "mycpuorg", "name": null}}, "url": "https://github.com/pytorch/serve/commit/eef731fac8ff92a7117f199659e7847f76742788", "committedDate": "2020-05-09T00:25:09Z", "message": "update README and remove relative path from script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e083890ffe67dfd76769fd760a29d3fc291e40a", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/9e083890ffe67dfd76769fd760a29d3fc291e40a", "committedDate": "2020-05-09T01:27:09Z", "message": "Install script - Dont uninstall if not previously installed - #132"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjEzNDg3", "url": "https://github.com/pytorch/serve/pull/322#pullrequestreview-408613487", "createdAt": "2020-05-09T05:11:32Z", "commit": {"oid": "9e083890ffe67dfd76769fd760a29d3fc291e40a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNToxMTozMlrOGS4jsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNToxMTozMlrOGS4jsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ1NDE5Mg==", "bodyText": "we should remove powerai channel as well, it is only required for sentencepiece.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r422454192", "createdAt": "2020-05-09T05:11:32Z", "author": {"login": "harshbafna"}, "path": "README.md", "diffHunk": "@@ -40,13 +47,13 @@ pip install torchserve torch-model-archiver\n     For CPU\n \n     ```bash\n-    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch sentencepiece torchtext torchvision -c pytorch -c powerai\n+    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch torchtext torchvision -c pytorch -c powerai", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e083890ffe67dfd76769fd760a29d3fc291e40a"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjEzNDk0", "url": "https://github.com/pytorch/serve/pull/322#pullrequestreview-408613494", "createdAt": "2020-05-09T05:11:43Z", "commit": {"oid": "9e083890ffe67dfd76769fd760a29d3fc291e40a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNToxMTo0M1rOGS4jsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNToxMTo0M1rOGS4jsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ1NDE5NQ==", "bodyText": "we should remove powerai channel as well, it is only required for sentencepiece.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r422454195", "createdAt": "2020-05-09T05:11:43Z", "author": {"login": "harshbafna"}, "path": "README.md", "diffHunk": "@@ -40,13 +47,13 @@ pip install torchserve torch-model-archiver\n     For CPU\n \n     ```bash\n-    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch sentencepiece torchtext torchvision -c pytorch -c powerai\n+    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch torchtext torchvision -c pytorch -c powerai\n     ```\n \n     For GPU\n \n     ```bash\n-    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch sentencepiece torchtext torchvision cudatoolkit=10.1 -c pytorch -c powerai\n+    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch torchtext torchvision cudatoolkit=10.1 -c pytorch -c powerai", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e083890ffe67dfd76769fd760a29d3fc291e40a"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NzIwMzQ4", "url": "https://github.com/pytorch/serve/pull/322#pullrequestreview-408720348", "createdAt": "2020-05-10T08:24:48Z", "commit": {"oid": "9e083890ffe67dfd76769fd760a29d3fc291e40a"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwODoyNDo0OFrOGTCASA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwODoyODo1NlrOGTCCoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYwODk2OA==", "bodyText": "The name of the script file is incorrect. Please update to correct name ./scripts/install_from_src_ubuntu", "url": "https://github.com/pytorch/serve/pull/322#discussion_r422608968", "createdAt": "2020-05-10T08:24:48Z", "author": {"login": "chauhang"}, "path": "README.md", "diffHunk": "@@ -77,36 +89,32 @@ pip install torchserve torch-model-archiver\n     source activate torchserve\n     ```\n \n+2. Optional if using torchtext models\n+    ```bash\n+    pip install sentencepiece\n+    ```\n+\n Now you are ready to [package and serve models with TorchServe](#serve-a-model).\n \n ### Install TorchServe for development\n \n If you plan to develop with TorchServe and change some of the source code, you must install it from source code.\n \n-1. Install dependencies\n+Please deactivate any conda env that you might be within.\n+Run the following script from the top of the source directory.\n \n-    ```bash\n-    pip install psutil future -y\n-    ```\n-\n-1. Clone the repo\n-\n-    ```bash\n-    git clone https://github.com/pytorch/serve\n-    cd serve\n-    ```\n-\n-1. Make your changes executable\n+NOTE: This script uninstalls existing `torchserve` and `torch-model-archiver` installations\n \n-    ```bash\n-    pip install -e .\n-    ```\n+#### For Debian Based Systems\n+Verified on EC2 instances running Ubuntu DL AMI 28.x\n \n-* To develop with torch-model-archiver:\n+```\n+./scripts/install_from_src_linux", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e083890ffe67dfd76769fd760a29d3fc291e40a"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYwOTU2OA==", "bodyText": "@mycpuorg Why do we still need this extra step for uninstall for updgrade? The new scripts should take care of this automatically", "url": "https://github.com/pytorch/serve/pull/322#discussion_r422609568", "createdAt": "2020-05-10T08:28:56Z", "author": {"login": "chauhang"}, "path": "README.md", "diffHunk": "@@ -77,36 +89,32 @@ pip install torchserve torch-model-archiver\n     source activate torchserve\n     ```\n \n+2. Optional if using torchtext models\n+    ```bash\n+    pip install sentencepiece\n+    ```\n+\n Now you are ready to [package and serve models with TorchServe](#serve-a-model).\n \n ### Install TorchServe for development\n \n If you plan to develop with TorchServe and change some of the source code, you must install it from source code.\n \n-1. Install dependencies\n+Please deactivate any conda env that you might be within.\n+Run the following script from the top of the source directory.\n \n-    ```bash\n-    pip install psutil future -y\n-    ```\n-\n-1. Clone the repo\n-\n-    ```bash\n-    git clone https://github.com/pytorch/serve\n-    cd serve\n-    ```\n-\n-1. Make your changes executable\n+NOTE: This script uninstalls existing `torchserve` and `torch-model-archiver` installations\n \n-    ```bash\n-    pip install -e .\n-    ```\n+#### For Debian Based Systems\n+Verified on EC2 instances running Ubuntu DL AMI 28.x\n \n-* To develop with torch-model-archiver:\n+```\n+./scripts/install_from_src_linux\n+```\n+#### For MAC OS\n \n-```bash\n-cd serve/model-archiver\n-pip install -e .\n+```\n+./scripts/install_from_src_macos\n ```\n \n * To upgrade TorchServe or model archiver from source code and make changes executable, run:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e083890ffe67dfd76769fd760a29d3fc291e40a"}, "originalPosition": 116}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09f9163648a71b09127dda97bcc861a53df7ea5d", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/09f9163648a71b09127dda97bcc861a53df7ea5d", "committedDate": "2020-05-11T04:30:29Z", "message": "explicitly build the source code with gradle prior to install"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6bc33030826c3753e77a823e442399523494e15", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/d6bc33030826c3753e77a823e442399523494e15", "committedDate": "2020-05-11T04:32:34Z", "message": "remove upgrade instructions in favor of clean reinstall from source"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74c6825b770d01909d9b1c5d0275c4a37774efea", "author": {"user": {"login": "mycpuorg", "name": null}}, "url": "https://github.com/pytorch/serve/commit/74c6825b770d01909d9b1c5d0275c4a37774efea", "committedDate": "2020-05-11T04:34:17Z", "message": "Merge branch 'staging_0_1_1' into issue_312_install_from_src"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7", "committedDate": "2020-05-11T04:37:11Z", "message": "update instructions to contain the correct script name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MjIwNjgx", "url": "https://github.com/pytorch/serve/pull/322#pullrequestreview-409220681", "createdAt": "2020-05-11T14:22:58Z", "commit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDoyMjo1OFrOGTeipw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDoyODo0MlrOGTey-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA3NjUxOQ==", "bodyText": "Can't we get rid of this line for basic user installation? People don't need any of these, especially sentencepiece... they can download that later as part of the example's setup steps.\nIn my recent tests, I can get the needed deps just by doing pip install torchserve torch-model-archiver.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423076519", "createdAt": "2020-05-11T14:22:58Z", "author": {"login": "aaronmarkham"}, "path": "README.md", "diffHunk": "@@ -18,14 +18,21 @@ Conda instructions are provided in more detail, but you may also use `pip` and `\n \n ### Install with pip\n \n-To use `pip` to install TorchServe and the model archiver:\n+1. Install Java 11\n \n-``` bash\n-pip install torch torchtext torchvision sentencepiece psutil future\n-pip install torchserve torch-model-archiver\n-```\n+    ```bash\n+    sudo apt-get install openjdk-11-jdk\n+    ```\n+\n+1. Use `pip` to install TorchServe and the model archiver:\n+\n+    ``` bash\n+    pip install torch torchtext torchvision sentencepiece psutil future", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA3NzQyOQ==", "bodyText": "I think basic setup should be stripped down to just conda create --name torchserve torchserve torch-model-archiver -c pytorch. It seems to work fine that way for basic usage and doesn't add extra deps in the setup command.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423077429", "createdAt": "2020-05-11T14:24:14Z", "author": {"login": "aaronmarkham"}, "path": "README.md", "diffHunk": "@@ -40,13 +47,13 @@ pip install torchserve torch-model-archiver\n     For CPU\n \n     ```bash\n-    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch sentencepiece torchtext torchvision -c pytorch -c powerai\n+    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch torchtext torchvision -c pytorch -c powerai", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ1NDE5Mg=="}, "originalCommit": {"oid": "9e083890ffe67dfd76769fd760a29d3fc291e40a"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA3ODg3Mw==", "bodyText": "I'd remove this and add instructions to the torchtext models folder.\nThere are many issues with this and it confuses the flow for basic setup.\nFor example, this doesn't work on mac w/ py3.8 - so does that get mentioned here? No, it's too specific.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423078873", "createdAt": "2020-05-11T14:26:10Z", "author": {"login": "aaronmarkham"}, "path": "README.md", "diffHunk": "@@ -55,6 +62,11 @@ pip install torchserve torch-model-archiver\n     source activate torchserve\n     ```\n \n+2. Optional if using torchtext models\n+    ```bash\n+    pip install sentencepiece", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA3OTI3MA==", "bodyText": "Like mentioned earlier, I'd move to a torchtext page.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423079270", "createdAt": "2020-05-11T14:26:42Z", "author": {"login": "aaronmarkham"}, "path": "README.md", "diffHunk": "@@ -77,43 +89,32 @@ pip install torchserve torch-model-archiver\n     source activate torchserve\n     ```\n \n+2. Optional if using torchtext models", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA4MDY5Nw==", "bodyText": "I saw ncs come in here sort of randomly and w/o explanation in recent runs. What is it for? As we've somewhat described each element already, it's weird to have this setting go unmentioned.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423080697", "createdAt": "2020-05-11T14:28:42Z", "author": {"login": "aaronmarkham"}, "path": "README.md", "diffHunk": "@@ -162,7 +162,7 @@ For more information about the model archiver, see [Torch Model archiver for Tor\n After you archive and store the model, use the `torchserve` command to serve the model.\n \n ```bash\n-torchserve --start --model-store ./model_store --models ./model_store/densenet161.mar\n+torchserve --start --ncs --model-store model_store --models densenet161.mar", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 165}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MjMyNjY3", "url": "https://github.com/pytorch/serve/pull/322#pullrequestreview-409232667", "createdAt": "2020-05-11T14:35:40Z", "commit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDozNTo0MFrOGTfHVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNDozNTo0MFrOGTfHVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA4NTkwOA==", "bodyText": "I don't think this is true. I tested it on 3.6, 3.7, 2.7... vanilla installs and upgrading the existing conda envs on DLAMI. Sounds like testing is needed again, but anyways... don't think this is accurate and shouldn't be the case anyway...", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423085908", "createdAt": "2020-05-11T14:35:40Z", "author": {"login": "aaronmarkham"}, "path": "README.md", "diffHunk": "@@ -18,14 +18,21 @@ Conda instructions are provided in more detail, but you may also use `pip` and `\n \n ### Install with pip\n \n-To use `pip` to install TorchServe and the model archiver:\n+1. Install Java 11\n \n-``` bash\n-pip install torch torchtext torchvision sentencepiece psutil future\n-pip install torchserve torch-model-archiver\n-```\n+    ```bash\n+    sudo apt-get install openjdk-11-jdk\n+    ```\n+\n+1. Use `pip` to install TorchServe and the model archiver:\n+\n+    ``` bash\n+    pip install torch torchtext torchvision sentencepiece psutil future\n+    pip install torchserve torch-model-archiver\n+    ```\n \n ### Install with Conda\n+**Note:** For Conda, Python 3.8 is required to run Torchserve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NTY1MzAw", "url": "https://github.com/pytorch/serve/pull/322#pullrequestreview-409565300", "createdAt": "2020-05-11T22:06:59Z", "commit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMjowNjo1OVrOGTvFbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQyMjowNjo1OVrOGTvFbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM0NzU2NQ==", "bodyText": "Can we please limit our reviews to the section for installing from source? This will help us stay focused in this commit.\nThis commit only tries to fix what's reported in the issue #312\nFor other issues than what this commit is trying to address please feel free to create an issue and we can track them. Thanks.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423347565", "createdAt": "2020-05-11T22:06:59Z", "author": {"login": "mycpuorg"}, "path": "README.md", "diffHunk": "@@ -40,13 +47,13 @@ pip install torchserve torch-model-archiver\n     For CPU\n \n     ```bash\n-    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch sentencepiece torchtext torchvision -c pytorch -c powerai\n+    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch torchtext torchvision -c pytorch -c powerai", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ1NDE5Mg=="}, "originalCommit": {"oid": "9e083890ffe67dfd76769fd760a29d3fc291e40a"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjY3NDAw", "url": "https://github.com/pytorch/serve/pull/322#pullrequestreview-409667400", "createdAt": "2020-05-12T03:06:03Z", "commit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjY5MzEz", "url": "https://github.com/pytorch/serve/pull/322#pullrequestreview-409669313", "createdAt": "2020-05-12T03:12:55Z", "commit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "state": "DISMISSED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMzoxMjo1NlrOGT0hyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMzozNDo1M1rOGT011A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzNjc0Nw==", "bodyText": "Remove cd .. as we are running the script from serve home directory.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423436747", "createdAt": "2020-05-12T03:12:56Z", "author": {"login": "harshbafna"}, "path": "scripts/install_from_src_macos", "diffHunk": "@@ -0,0 +1,47 @@\n+#!/bin/bash\n+set -euo pipefail\n+\n+clean_slate()\n+{\n+\techo \"                      ==============================================\"\n+\techo \"                      If you are within a conda env please deactivate it and come back\"\n+\techo \"                      If you don't want to proceed kill this script in the next 10 seconds!\"\n+\techo \"                      ==============================================\"\n+\n+\tsleep 10\n+\n+\techo \"Cleaning up state\"\n+\t# uninstall any global installations\n+\tpip uninstall --yes torchserve\n+\tpip uninstall --yes torch-model-archiver\n+\tsleep 5\n+}\n+\n+install_java_deps()\n+{\n+\tbrew tap AdoptOpenJDK/openjdk\n+\tbrew cask install adoptopenjdk11\n+}\n+\n+install_torch_deps()\n+{\n+\t# replace this with requirements.txt when ready\n+\tpip install torch torchtext torchvision sentencepiece psutil future\n+}\n+\n+build_install_server()\n+{\n+\tcd ../ && pip install .", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzNjc5NA==", "bodyText": "Remove cd .. as we are running the script from serve home directory.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423436794", "createdAt": "2020-05-12T03:13:08Z", "author": {"login": "harshbafna"}, "path": "scripts/install_from_src_macos", "diffHunk": "@@ -0,0 +1,47 @@\n+#!/bin/bash\n+set -euo pipefail\n+\n+clean_slate()\n+{\n+\techo \"                      ==============================================\"\n+\techo \"                      If you are within a conda env please deactivate it and come back\"\n+\techo \"                      If you don't want to proceed kill this script in the next 10 seconds!\"\n+\techo \"                      ==============================================\"\n+\n+\tsleep 10\n+\n+\techo \"Cleaning up state\"\n+\t# uninstall any global installations\n+\tpip uninstall --yes torchserve\n+\tpip uninstall --yes torch-model-archiver\n+\tsleep 5\n+}\n+\n+install_java_deps()\n+{\n+\tbrew tap AdoptOpenJDK/openjdk\n+\tbrew cask install adoptopenjdk11\n+}\n+\n+install_torch_deps()\n+{\n+\t# replace this with requirements.txt when ready\n+\tpip install torch torchtext torchvision sentencepiece psutil future\n+}\n+\n+build_install_server()\n+{\n+\tcd ../ && pip install .\n+}\n+\n+build_install_archiver()\n+{\n+\tcd ../model-archiver && pip install .", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzODg2OQ==", "bodyText": "We don't want to support install from source on conda environment?\nAs per manual testing the installation works fine on conda environment as well.\nThe script should support installation on pip/pyenv and conda environments.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423438869", "createdAt": "2020-05-12T03:21:42Z", "author": {"login": "harshbafna"}, "path": "scripts/install_from_src_macos", "diffHunk": "@@ -0,0 +1,47 @@\n+#!/bin/bash\n+set -euo pipefail\n+\n+clean_slate()\n+{\n+\techo \"                      ==============================================\"\n+\techo \"                      If you are within a conda env please deactivate it and come back\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzOTUyNg==", "bodyText": "psutil/future preinstallation is only required in conda environments", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423439526", "createdAt": "2020-05-12T03:24:36Z", "author": {"login": "harshbafna"}, "path": "scripts/install_from_src_macos", "diffHunk": "@@ -0,0 +1,47 @@\n+#!/bin/bash\n+set -euo pipefail\n+\n+clean_slate()\n+{\n+\techo \"                      ==============================================\"\n+\techo \"                      If you are within a conda env please deactivate it and come back\"\n+\techo \"                      If you don't want to proceed kill this script in the next 10 seconds!\"\n+\techo \"                      ==============================================\"\n+\n+\tsleep 10\n+\n+\techo \"Cleaning up state\"\n+\t# uninstall any global installations\n+\tpip uninstall --yes torchserve\n+\tpip uninstall --yes torch-model-archiver\n+\tsleep 5\n+}\n+\n+install_java_deps()\n+{\n+\tbrew tap AdoptOpenJDK/openjdk\n+\tbrew cask install adoptopenjdk11\n+}\n+\n+install_torch_deps()\n+{\n+\t# replace this with requirements.txt when ready\n+\tpip install torch torchtext torchvision sentencepiece psutil future", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQzOTY4Mw==", "bodyText": "psutil/future preinstallation is only required in conda environments", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423439683", "createdAt": "2020-05-12T03:25:13Z", "author": {"login": "harshbafna"}, "path": "scripts/install_from_src_ubuntu", "diffHunk": "@@ -0,0 +1,48 @@\n+#!/bin/bash\n+set -euo pipefail\n+\n+clean_slate()\n+{\n+\techo \"                      ==============================================\"\n+\techo \"                      If you are within a conda env please deactivate it and come back\"\n+\techo \"                      If you don't want to proceed kill this script in the next 10 seconds!\"\n+\techo \"                      ==============================================\"\n+\n+\tsleep 10\n+\n+\techo \"Cleaning up state\"\n+\t# uninstall any global installations\n+\tpip uninstall --yes torchserve || true\n+\tpip uninstall --yes torch-model-archiver || true\n+\tsleep 5\n+}\n+\n+install_java_deps()\n+{\n+\tsudo apt-get install -y openjdk-11-jdk\n+}\n+\n+install_torch_deps()\n+{\n+\t# replace this with requirements.txt when ready\n+\tpip install torch torchtext torchvision sentencepiece psutil future", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ0MDIwMw==", "bodyText": "Refer to comment in install_from_source_mac.\nAlso in EC2 environment DL AMI is the most preferred environment which comes in with conda for package/environment management.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423440203", "createdAt": "2020-05-12T03:27:28Z", "author": {"login": "harshbafna"}, "path": "scripts/install_from_src_ubuntu", "diffHunk": "@@ -0,0 +1,48 @@\n+#!/bin/bash\n+set -euo pipefail\n+\n+clean_slate()\n+{\n+\techo \"                      ==============================================\"\n+\techo \"                      If you are within a conda env please deactivate it and come back\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ0MTcxMA==", "bodyText": "This will run the build process twice.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423441710", "createdAt": "2020-05-12T03:33:59Z", "author": {"login": "harshbafna"}, "path": "scripts/install_from_src_ubuntu", "diffHunk": "@@ -0,0 +1,48 @@\n+#!/bin/bash\n+set -euo pipefail\n+\n+clean_slate()\n+{\n+\techo \"                      ==============================================\"\n+\techo \"                      If you are within a conda env please deactivate it and come back\"\n+\techo \"                      If you don't want to proceed kill this script in the next 10 seconds!\"\n+\techo \"                      ==============================================\"\n+\n+\tsleep 10\n+\n+\techo \"Cleaning up state\"\n+\t# uninstall any global installations\n+\tpip uninstall --yes torchserve || true\n+\tpip uninstall --yes torch-model-archiver || true\n+\tsleep 5\n+}\n+\n+install_java_deps()\n+{\n+\tsudo apt-get install -y openjdk-11-jdk\n+}\n+\n+install_torch_deps()\n+{\n+\t# replace this with requirements.txt when ready\n+\tpip install torch torchtext torchvision sentencepiece psutil future\n+}\n+\n+build_install_server()\n+{\n+\tpython setup.py build\n+\tpip install .", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ0MTg3Ng==", "bodyText": "pip install . already dumps complete logs on console if the build fails.", "url": "https://github.com/pytorch/serve/pull/322#discussion_r423441876", "createdAt": "2020-05-12T03:34:53Z", "author": {"login": "harshbafna"}, "path": "scripts/install_from_src_ubuntu", "diffHunk": "@@ -0,0 +1,48 @@\n+#!/bin/bash\n+set -euo pipefail\n+\n+clean_slate()\n+{\n+\techo \"                      ==============================================\"\n+\techo \"                      If you are within a conda env please deactivate it and come back\"\n+\techo \"                      If you don't want to proceed kill this script in the next 10 seconds!\"\n+\techo \"                      ==============================================\"\n+\n+\tsleep 10\n+\n+\techo \"Cleaning up state\"\n+\t# uninstall any global installations\n+\tpip uninstall --yes torchserve || true\n+\tpip uninstall --yes torch-model-archiver || true\n+\tsleep 5\n+}\n+\n+install_java_deps()\n+{\n+\tsudo apt-get install -y openjdk-11-jdk\n+}\n+\n+install_torch_deps()\n+{\n+\t# replace this with requirements.txt when ready\n+\tpip install torch torchtext torchvision sentencepiece psutil future\n+}\n+\n+build_install_server()\n+{\n+\tpython setup.py build\n+\tpip install .", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ0MTcxMA=="}, "originalCommit": {"oid": "421f2ab20ceb9f18fdc4091d9a1b9d8dc5700ca7"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5be6d6dc011d925fcb87f031b938d040af14e80a", "author": {"user": {"login": "mycpuorg", "name": null}}, "url": "https://github.com/pytorch/serve/commit/5be6d6dc011d925fcb87f031b938d040af14e80a", "committedDate": "2020-05-12T15:54:07Z", "message": "Merge branch 'staging_0_1_1' into issue_312_install_from_src"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2399, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}