{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxNDAwMjU0", "number": 438, "title": "Apachebench benchmarking - Script / Documentation updates", "bodyText": "Testing\n\nubuntu@ip-172-31-78-248:~/bm/serve/benchmarks$ ./benchmark-ab.sh --model  vgg11 --url https://torchserve-mar-files.s3.amazonaws.com/vgg11.mar --bsize 1 --bdelay 50 --worker 4 --input ../examples/image_classifier/kitten.jpg --requests 20 --concurrency 10\nTorchServe has stopped.\nPreparing config...\nstarting torchserve...\nWaiting for torchserve to start...\ntorchserve started successfully\nRegistering model ...\n{\n  \"status\": \"Workers scaled\"\n}\nExecuting Apache Bench tests ...\nExecuting inference performance test\nUnregistering model ...\n{\n  \"status\": \"Model \\\"vgg11\\\" unregistered\"\n}\nExecution completed\nGrabing performance numbers\n\nCPU/GPU: cpu\nModel: vgg11\nConcurrency: 10\nRequests: 20\nModel latency P50: 269.49\nModel latency P90: 369.21\nModel latency P99: 370.55\nTS throughput: 12.57\nTS latency P50: 702\nTS latency P90: 907\nTS latency P99: 1012\nTS latency mean: 795.813\nTS error rate: 0.000000%\nCSV : cpu, vgg11, 1, 10, 20, 269.49, 369.21, 370.55, 12.57, 702, 907, 907, 1012, 795.813, 0.000000", "createdAt": "2020-06-08T21:13:57Z", "url": "https://github.com/pytorch/serve/pull/438", "merged": true, "mergeCommit": {"oid": "c45616479e466a23ea7c814df4e601d717b65646"}, "closed": true, "closedAt": "2020-06-08T22:12:01Z", "author": {"login": "dhanainme"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpXHBmAH2gAyNDMxNDAwMjU0OjJiODUzZmMzNjMzMWM2OTJkZDRmMTJmNzM2YTA4NzM4ZDQwZTUxMGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpXul0gH2gAyNDMxNDAwMjU0OjY3MjJjYWNiOTNkYzk2YmQwZDI5Y2YyNGQyZDliODNkNzRlYTg2YjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2b853fc36331c692dd4f12f736a08738d40e510e", "author": {"user": {"login": "dhanainme", "name": null}}, "url": "https://github.com/pytorch/serve/commit/2b853fc36331c692dd4f12f736a08738d40e510e", "committedDate": "2020-06-08T21:12:28Z", "message": "Apachebench benchmarking script - Script / Documentation updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NjQzNjQ0", "url": "https://github.com/pytorch/serve/pull/438#pullrequestreview-426643644", "createdAt": "2020-06-08T21:44:03Z", "commit": {"oid": "2b853fc36331c692dd4f12f736a08738d40e510e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMTo0NDowM1rOGgxf7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMTo0NDowM1rOGgxf7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAxODYwNg==", "bodyText": "The script should stop the torchserve server once the benchmark is complete", "url": "https://github.com/pytorch/serve/pull/438#discussion_r437018606", "createdAt": "2020-06-08T21:44:03Z", "author": {"login": "maaquib"}, "path": "benchmarks/README.md", "diffHunk": "@@ -130,10 +134,68 @@ Run verbose with only a single loop\\\n \n The full list of options can be found by running with the -h or --help flags.\n \n+# Benchmarking with Apache Bench\n+\n+## Installation \n+\n+### For Ubuntu\n+\n+```\n+apt-get install apache2-utils\n+\n+```\n+\n+Apache Bench is installed in Mac by default. You can test by running ```ab -h```\n+\n+## Benchmark \n+\n+To run benchmarks execute benchmark script as follows \n+\n+```\n+./benchmark-ab.sh --model  vgg11 --url https://torchserve-mar-files.s3.amazonaws.com/vgg11.mar --bsize 1 --bdelay 50 --worker 4 --input ../examples/image_classifier/kitten.jpg --requests 20 --concurrency 10", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b853fc36331c692dd4f12f736a08738d40e510e"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71ec0cfe9f810e799a01e5f716abd6c259980418", "author": {"user": {"login": "dhanainme", "name": null}}, "url": "https://github.com/pytorch/serve/commit/71ec0cfe9f810e799a01e5f716abd6c259980418", "committedDate": "2020-06-08T21:44:24Z", "message": "Stop TS after benchmark completion."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NjQ1MjEz", "url": "https://github.com/pytorch/serve/pull/438#pullrequestreview-426645213", "createdAt": "2020-06-08T21:47:04Z", "commit": {"oid": "71ec0cfe9f810e799a01e5f716abd6c259980418"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6722cacb93dc96bd0d29cf24d2d9b83d74ea86b1", "author": {"user": {"login": "dhanainme", "name": null}}, "url": "https://github.com/pytorch/serve/commit/6722cacb93dc96bd0d29cf24d2d9b83d74ea86b1", "committedDate": "2020-06-08T21:55:41Z", "message": "Merge branch 'staging_0_1_1' into ab_benchmark_updates"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2188, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}