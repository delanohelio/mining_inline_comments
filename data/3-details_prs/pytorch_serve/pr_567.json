{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4OTAwOTgz", "number": 567, "title": "Add CLASSPATH for Windows", "bodyText": "Description\nThe variable classpath in ts/model_server.py is not suitable for Windows. Add suitable classpath for Windows.\nFixes #(issue)\nType of change\nPlease delete options that are not relevant.\n\n New feature (non-breaking change which adds functionality)\n\nFeature/Issue validation/testing\nPlease describe the tests [UT/IT] that you ran to verify your changes and relevent result summary. Provide instructions so it can be reproduced.\nPlease also list any relevant details for your test configuration.\n\n\nUT/IT execution results\n\n\nLogs\n\n\nChecklist:\n\n Have you added tests that prove your fix is effective or that this feature works?\n New and existing unit tests pass locally with these changes?\n Has code been commented, particularly in hard-to-understand areas?\n Have you made corresponding changes to the documentation?", "createdAt": "2020-07-30T06:18:32Z", "url": "https://github.com/pytorch/serve/pull/567", "merged": true, "mergeCommit": {"oid": "d872a8c1131a10603c0579710e7ea8369760ac96"}, "closed": true, "closedAt": "2020-08-04T16:48:01Z", "author": {"login": "MengMeng96"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6YDQVAFqTQ1OTM1NzA1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7oAdTgFqTQ2MDkwMzMyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MzU3MDU0", "url": "https://github.com/pytorch/serve/pull/567#pullrequestreview-459357054", "createdAt": "2020-07-31T17:54:58Z", "commit": {"oid": "fe7bad8a347ed33db554d2dde304dee38f8acc6b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba2889f9adb360fe729ceb338c88125a56e10e0a", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/ba2889f9adb360fe729ceb338c88125a56e10e0a", "committedDate": "2020-08-03T01:31:02Z", "message": "Merge branch 'classpath' of https://github.com/MengMeng96/serve into classpath"}, "afterCommit": {"oid": "d26bc564fea168230f28d0e8560c529e1663ef7b", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/d26bc564fea168230f28d0e8560c529e1663ef7b", "committedDate": "2020-08-03T01:49:21Z", "message": "fit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0aa6f819c0c79744ec504f1b23906d5a22a28c54", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/0aa6f819c0c79744ec504f1b23906d5a22a28c54", "committedDate": "2020-08-03T02:05:28Z", "message": "fit"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d26bc564fea168230f28d0e8560c529e1663ef7b", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/d26bc564fea168230f28d0e8560c529e1663ef7b", "committedDate": "2020-08-03T01:49:21Z", "message": "fit"}, "afterCommit": {"oid": "0aa6f819c0c79744ec504f1b23906d5a22a28c54", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/0aa6f819c0c79744ec504f1b23906d5a22a28c54", "committedDate": "2020-08-03T02:05:28Z", "message": "fit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5Nzc4Nzk4", "url": "https://github.com/pytorch/serve/pull/567#pullrequestreview-459778798", "createdAt": "2020-08-03T06:36:26Z", "commit": {"oid": "0aa6f819c0c79744ec504f1b23906d5a22a28c54"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwNjozNjoyN1rOG6tt_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwNjozNjoyN1rOG6tt_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDIxOTY0Nw==", "bodyText": "Both the strings are more or less the same except for a couple of characters, better create a common string before if/else block and format it based on the platform.", "url": "https://github.com/pytorch/serve/pull/567#discussion_r464219647", "createdAt": "2020-08-03T06:36:27Z", "author": {"login": "harshbafna"}, "path": "ts/model_server.py", "diffHunk": "@@ -80,8 +81,13 @@ def start():\n                 sys.exit(1)\n             ts_conf_file = ts_config\n \n-        class_path = \\\n-            \".:{}\".format(os.path.join(ts_home, \"ts/frontend/*\"))\n+        if(platform.system() == 'Windows'):\n+            class_path = \\\n+                        \"{}\".format(os.path.join(ts_home, \"ts/frontend/*\"))\n+        else:\n+            class_path = \\\n+                        \".:{}\".format(os.path.join(ts_home, \"ts/frontend/*\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0aa6f819c0c79744ec504f1b23906d5a22a28c54"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96d3a858e3f9deed32b3144583a2c07f41bcd082", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/96d3a858e3f9deed32b3144583a2c07f41bcd082", "committedDate": "2020-08-03T07:04:29Z", "message": "create a common string before if/else block and format it based on the platform"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35a85cda3a739780162b7535a31fda317e08313c", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/35a85cda3a739780162b7535a31fda317e08313c", "committedDate": "2020-08-03T07:06:04Z", "message": "create a common string before if/else block and format it based on the platform"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMDAwMTM2", "url": "https://github.com/pytorch/serve/pull/567#pullrequestreview-460000136", "createdAt": "2020-08-03T12:52:38Z", "commit": {"oid": "35a85cda3a739780162b7535a31fda317e08313c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxMjo1MjozOVrOG64TaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxMjo1MjozOVrOG64TaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM5MzA2NA==", "bodyText": "platform_path_saparator = {\n\"Windows\": \"\",\n\"Darwin\": \".:\",\n\"Linux\": \".:\"\n}\nclass_path = \"{}{}\".format(platform_path_saparator[platform.system()], os.path.join(ts_home, \"ts/frontend/*\"))\nHow about this?", "url": "https://github.com/pytorch/serve/pull/567#discussion_r464393064", "createdAt": "2020-08-03T12:52:39Z", "author": {"login": "harshbafna"}, "path": "ts/model_server.py", "diffHunk": "@@ -80,8 +81,9 @@ def start():\n                 sys.exit(1)\n             ts_conf_file = ts_config\n \n-        class_path = \\\n-            \".:{}\".format(os.path.join(ts_home, \"ts/frontend/*\"))\n+        class_path = \"{}\".format(os.path.join(ts_home, \"ts/frontend/*\"))\n+        if platform.system() != 'Windows':", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35a85cda3a739780162b7535a31fda317e08313c"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ff7fafe29b28499b09de1447c7b8033b68c5f0f", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/8ff7fafe29b28499b09de1447c7b8033b68c5f0f", "committedDate": "2020-08-04T01:13:49Z", "message": "separator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7182a5348aeacec6d05a216fac5067e354b153c", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/b7182a5348aeacec6d05a216fac5067e354b153c", "committedDate": "2020-08-04T01:25:46Z", "message": "fit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09905fc10943b839b215fc962a2112b53f953668", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/09905fc10943b839b215fc962a2112b53f953668", "committedDate": "2020-08-04T01:35:44Z", "message": "fit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7efcd484209faccfdfe14dadb2c50e7deeaa8cda", "author": {"user": {"login": "MengMeng96", "name": null}}, "url": "https://github.com/pytorch/serve/commit/7efcd484209faccfdfe14dadb2c50e7deeaa8cda", "committedDate": "2020-08-04T02:05:32Z", "message": "Merge branch 'master' into classpath"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwOTAzMzIz", "url": "https://github.com/pytorch/serve/pull/567#pullrequestreview-460903323", "createdAt": "2020-08-04T15:04:19Z", "commit": {"oid": "7efcd484209faccfdfe14dadb2c50e7deeaa8cda"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1981, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}