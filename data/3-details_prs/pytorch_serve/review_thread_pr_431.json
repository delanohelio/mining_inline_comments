{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NDgxMDMx", "number": 431, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMjo0OTo0M1rOECwpIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMTowNzo0MlrOECyQvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMzI5NTcxOnYy", "diffSide": "RIGHT", "path": ".circleci/Dockerfile", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMjo0OTo0M1rOGfakvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNzozMzo0M1rOGf3RcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU5NDQzMQ==", "bodyText": "@seemethere Will this only run on CPU machines? How are we planning to generate binaries for GPUs?", "url": "https://github.com/pytorch/serve/pull/431#discussion_r435594431", "createdAt": "2020-06-04T22:49:43Z", "author": {"login": "chauhang"}, "path": ".circleci/Dockerfile", "diffHunk": "@@ -0,0 +1,6 @@\n+FROM ubuntu:18.04 as dev\n+RUN apt-get update && apt-get install -y openjdk-11-jdk\n+COPY --from=continuumio/miniconda3:4.8.2 /opt/conda /opt/conda\n+ENV PATH=\"/opt/conda/bin/:${PATH}\"\n+ARG PYTORCH_CHANNEL=pytorch\n+RUN conda install -c \"${PYTORCH_CHANNEL}\" -c powerai -y pytorch torchvision torchtext cpuonly psutil", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjAyMzQ5NA==", "bodyText": "Does building with CUDA enabled binaries actually matter for using torchserve binaries with GPUs?\nI'm unaware if it actually does.", "url": "https://github.com/pytorch/serve/pull/431#discussion_r436023494", "createdAt": "2020-06-05T16:13:17Z", "author": {"login": "seemethere"}, "path": ".circleci/Dockerfile", "diffHunk": "@@ -0,0 +1,6 @@\n+FROM ubuntu:18.04 as dev\n+RUN apt-get update && apt-get install -y openjdk-11-jdk\n+COPY --from=continuumio/miniconda3:4.8.2 /opt/conda /opt/conda\n+ENV PATH=\"/opt/conda/bin/:${PATH}\"\n+ARG PYTORCH_CHANNEL=pytorch\n+RUN conda install -c \"${PYTORCH_CHANNEL}\" -c powerai -y pytorch torchvision torchtext cpuonly psutil", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU5NDQzMQ=="}, "originalCommit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA2NDYyNQ==", "bodyText": "You are right, TorchServe binaries are not dependent on Cuda. We just need to verify that the generated binaries work for both CPU and GPU deployments", "url": "https://github.com/pytorch/serve/pull/431#discussion_r436064625", "createdAt": "2020-06-05T17:33:43Z", "author": {"login": "chauhang"}, "path": ".circleci/Dockerfile", "diffHunk": "@@ -0,0 +1,6 @@\n+FROM ubuntu:18.04 as dev\n+RUN apt-get update && apt-get install -y openjdk-11-jdk\n+COPY --from=continuumio/miniconda3:4.8.2 /opt/conda /opt/conda\n+ENV PATH=\"/opt/conda/bin/:${PATH}\"\n+ARG PYTORCH_CHANNEL=pytorch\n+RUN conda install -c \"${PYTORCH_CHANNEL}\" -c powerai -y pytorch torchvision torchtext cpuonly psutil", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU5NDQzMQ=="}, "originalCommit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMzU1NDg1OnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMTowNDowMFrOGfdI2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNjoxMjowM1rOGf0uJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzNjQ0MQ==", "bodyText": "https://github.com/pytorch/serve/pull/431/files#r435594431\nseems to use Ubuntu 18.04 docker image and build on top.\nI'm not sure what the image: tag is for or what the naming convention used?\nubuntu-1604:201903-01", "url": "https://github.com/pytorch/serve/pull/431#discussion_r435636441", "createdAt": "2020-06-05T01:04:00Z", "author": {"login": "mycpuorg"}, "path": ".circleci/config.yml", "diffHunk": "@@ -0,0 +1,74 @@\n+version: 2.1\n+\n+jobs:\n+    build_docker_environment:\n+        parameters:\n+            pytorch_channel:\n+                type: string\n+                default: \"pytorch\"\n+        machine:\n+            image: ubuntu-1604:201903-01", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjAyMjgyMw==", "bodyText": "These are related to circleci's base image and although they look similar do not relate to docker images.\nsee https://circleci.com/docs/2.0/configuration-reference/#available-machine-images", "url": "https://github.com/pytorch/serve/pull/431#discussion_r436022823", "createdAt": "2020-06-05T16:12:03Z", "author": {"login": "seemethere"}, "path": ".circleci/config.yml", "diffHunk": "@@ -0,0 +1,74 @@\n+version: 2.1\n+\n+jobs:\n+    build_docker_environment:\n+        parameters:\n+            pytorch_channel:\n+                type: string\n+                default: \"pytorch\"\n+        machine:\n+            image: ubuntu-1604:201903-01", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzNjQ0MQ=="}, "originalCommit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMzU2MDkyOnYy", "diffSide": "RIGHT", "path": ".circleci/config.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMTowNzo0MlrOGfdMfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMTowNzo0MlrOGfdMfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzNzM3Mw==", "bodyText": "same question here", "url": "https://github.com/pytorch/serve/pull/431#discussion_r435637373", "createdAt": "2020-06-05T01:07:42Z", "author": {"login": "mycpuorg"}, "path": ".circleci/config.yml", "diffHunk": "@@ -0,0 +1,74 @@\n+version: 2.1\n+\n+jobs:\n+    build_docker_environment:\n+        parameters:\n+            pytorch_channel:\n+                type: string\n+                default: \"pytorch\"\n+        machine:\n+            image: ubuntu-1604:201903-01\n+        environment:\n+            - DOCKER_BUILDKIT=1\n+        steps:\n+            - checkout\n+            - run:\n+                name: Building docker image\n+                command: |\n+                    cat .circleci/Dockerfile | docker build \\\n+                        -t pytorch/serve-circleci-dev \\\n+                        --progress=plain \\\n+                        --build-arg PYTORCH_CHANNEL=\"<< parameters.pytorch_channel >>\" -\n+            - run:\n+                name: Save docker image to archive\n+                command: mkdir /tmp/workspace && docker image save pytorch/serve-circleci-dev -o /tmp/workspace/dev-image.tar\n+            - persist_to_workspace:\n+                root: /tmp/workspace\n+                paths:\n+                    - dev-image.tar\n+    build_wheel:\n+        parameters:\n+            build_directory:\n+                type: string\n+                default: \".\"\n+        machine:\n+            image: ubuntu-1604:201903-01", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1497, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}