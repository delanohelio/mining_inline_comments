{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0ODE3MDA0", "number": 308, "title": "Dockerfile enhancements", "bodyText": "Description\n\nNow we have single Dockerfile per #178 /  #309 and also does following\n\n\nInstall torch-model-archiver\n\n\nEarlier Dockerfiles have been named as dev which will allow creating image for any torchserve branch i.e. build from source. Also, existing build_image.sh and start.sh have been moved to docker folder for easily building and deploying dockers for torchserve branch\n\n\nAdded buildkit support to dev dockerfiles\nDev Dockerfiles have been kept as is i.e. without multistage because developer may need those build tools\n\n\nUpdated main and docker's README.md for torchserve from pypi and 'from source'\n-Added section on how to create mar from docker container\n\nFixes #266 #178 #195\nType of change\nPlease delete options that are not relevant.\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to not work as expected)\n This change requires a documentation update\n\nFeature/Issue validation/testing\nSuccessfully tested production and dev docker files using following [validating documentation in docker README.md]-\n\nDev\n./build_image.sh\n./start.sh\n\n-cpu\nDOCKER_BUILDKIT=1 docker build --file Dockerfile -t torchserve:latest .\n\ndocker run --rm -it -p 8080:8080 -p 8081:8081 torchserve:latest\n\ncurl -v -X POST \"http://localhost:8081/models?initial_workers=1&synchronous=true&url=https://torchserve.s3.amazonaws.com/mar_files/resnet-18.mar\"\n\ncurl -O https://s3.amazonaws.com/model-server/inputs/kitten.jpg\n\ncurl -X POST http://localhost:8080/predictions/resnet-18 -T kitten.jpg\n\ntorchserve --stop\n\n-gpu\nDOCKER_BUILDKIT=1 docker build --file Dockerfile --build-arg BASE_IMAGE=nvidia/cuda:10.1-cudnn7-runtime-ubuntu18.04 -t torchserve:latest .\n\ndocker run --rm -it --gpus all -p 8080:8080 -p 8081:8081 torchserve:latest\n\ncurl -v -X POST \"http://localhost:8081/models?initial_workers=1&synchronous=true&url=https://torchserve.s3.amazonaws.com/mar_files/resnet-18.mar\"\n\ncurl -O https://s3.amazonaws.com/model-server/inputs/kitten.jpg\n\ncurl -X POST http://localhost:8080/predictions/resnet-18 -T kitten.jpg\n\ntorchserve --stop\n\nChecklist:\n\n Have you added tests that prove your fix is effective or that this feature works?\nNA\n New and existing unit tests pass locally with these changes?\n Has code been commented, particularly in hard-to-understand areas?\n Have you made corresponding changes to the documentation?", "createdAt": "2020-05-07T17:17:04Z", "url": "https://github.com/pytorch/serve/pull/308", "merged": true, "mergeCommit": {"oid": "c698540f413757b4f992e0cb515aa26171b2e5d5"}, "closed": true, "closedAt": "2020-05-21T18:37:33Z", "author": {"login": "dhaniram-kshirsagar"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfAQtRgH2gAyNDE0ODE3MDA0OjVhZjdiYTk4NzBhMjUwYjlhMjc0YjQzNDYwODRjNDUwYjZhNmJlMWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjh76EAH2gAyNDE0ODE3MDA0Ojk1Mjg0NjU1MmQ2MjQ3NzQwNzg1M2Q3MDc2YWEwMzk0ZmE1YjRkM2M=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5af7ba9870a250b9a274b4346084c450b6a6be1b", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/5af7ba9870a250b9a274b4346084c450b6a6be1b", "committedDate": "2020-05-07T16:55:59Z", "message": "dockerfile now points to latest torchserve on pypi and added separate files for dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b788f04ac4b756e8cf32cc5db354c053705f3742", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/b788f04ac4b756e8cf32cc5db354c053705f3742", "committedDate": "2020-05-07T17:36:55Z", "message": "Minor changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3Njk1MTQy", "url": "https://github.com/pytorch/serve/pull/308#pullrequestreview-407695142", "createdAt": "2020-05-07T17:41:38Z", "commit": {"oid": "5af7ba9870a250b9a274b4346084c450b6a6be1b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzo0MTozOFrOGSJTDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNzo0MTozOFrOGSJTDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY3OTg4NQ==", "bodyText": "Can't we have a separate requirements.txt in docker folder with all the required packages. That way we can simply COPY requirements.txt in the docker file and RUN pip install -r requirements.txt in all the Dockerfiles. We will have one place to update if we need to add packages or pin the versions of packages right?", "url": "https://github.com/pytorch/serve/pull/308#discussion_r421679885", "createdAt": "2020-05-07T17:41:38Z", "author": {"login": "vdantu"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -20,12 +20,7 @@ RUN apt-get update && \\\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n-RUN pip install --no-cache-dir psutil\n-RUN pip install --no-cache-dir torch\n-RUN pip install --no-cache-dir torchvision\n-RUN pip install --no-cache-dir torchtext\n-ADD serve serve\n-RUN pip install ../serve/\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext torchserve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5af7ba9870a250b9a274b4346084c450b6a6be1b"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88df06b71933cfd64964c3ba8c2d360b38b3eea1", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/88df06b71933cfd64964c3ba8c2d360b38b3eea1", "committedDate": "2020-05-08T06:36:51Z", "message": "Made build and run commands consistent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b6044970a6aee4a38badb0b152061a25ec5ae8b", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/6b6044970a6aee4a38badb0b152061a25ec5ae8b", "committedDate": "2020-05-08T06:38:20Z", "message": "Fixing formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adcae965086948e39c8a2e940ac7434974825648", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/adcae965086948e39c8a2e940ac7434974825648", "committedDate": "2020-05-08T06:40:07Z", "message": "Consistency issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NzEyNjEw", "url": "https://github.com/pytorch/serve/pull/308#pullrequestreview-408712610", "createdAt": "2020-05-10T06:49:27Z", "commit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "state": "DISMISSED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwNjo0OToyN1rOGTBTrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQwNzozOTowMlrOGTBn5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5NzU0OA==", "bodyText": "@dhaniram-kshirsagar The model archiver also need to be added to the docker during production install. Add the pip install for that as well", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422597548", "createdAt": "2020-05-10T06:49:27Z", "author": {"login": "chauhang"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -20,12 +20,7 @@ RUN apt-get update && \\\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n-RUN pip install --no-cache-dir psutil\n-RUN pip install --no-cache-dir torch\n-RUN pip install --no-cache-dir torchvision\n-RUN pip install --no-cache-dir torchtext\n-ADD serve serve\n-RUN pip install ../serve/\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext torchserve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5NzYwMA==", "bodyText": "@dhaniram-kshirsagar Add the pip install from model archiver as well", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422597600", "createdAt": "2020-05-10T06:50:03Z", "author": {"login": "chauhang"}, "path": "docker/Dockerfile.gpu", "diffHunk": "@@ -21,10 +21,7 @@ RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n RUN export USE_CUDA=1\n-RUN pip install psutil future torch torchvision torchtext\n-RUN pip install --no-cache-dir psutil\n-ADD serve serve\n-RUN pip install ../serve/\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext torchserve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5ODQwNA==", "bodyText": "@dhaniram-kshirsagar Why are g++, python3-dev, vim needed for production version of docker containers? Please review and remove any non essential items. This will help in reducing the size of the docker container and speedup the launch time", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422598404", "createdAt": "2020-05-10T06:57:25Z", "author": {"login": "chauhang"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -9,7 +9,7 @@ RUN apt-get update && \\\n     dpkg-dev \\\n     g++ \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5ODQ4Ng==", "bodyText": "@vdantu There is a separate GH issues for requirements.txt -- this can be tackled as part of its sol", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422598486", "createdAt": "2020-05-10T06:58:18Z", "author": {"login": "chauhang"}, "path": "docker/Dockerfile.cpu", "diffHunk": "@@ -20,12 +20,7 @@ RUN apt-get update && \\\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n-RUN pip install --no-cache-dir psutil\n-RUN pip install --no-cache-dir torch\n-RUN pip install --no-cache-dir torchvision\n-RUN pip install --no-cache-dir torchtext\n-ADD serve serve\n-RUN pip install ../serve/\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext torchserve", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY3OTg4NQ=="}, "originalCommit": {"oid": "5af7ba9870a250b9a274b4346084c450b6a6be1b"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU5ODc2MQ==", "bodyText": "Please remove from all the docker files", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422598761", "createdAt": "2020-05-10T07:00:54Z", "author": {"login": "chauhang"}, "path": "docker/Dockerfile_dev.gpu", "diffHunk": "@@ -0,0 +1,47 @@\n+FROM nvidia/cuda:10.1-cudnn7-runtime-ubuntu18.04\n+\n+ENV PYTHONUNBUFFERED TRUE\n+\n+RUN apt-get update && \\\n+    DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y \\\n+    fakeroot \\\n+    ca-certificates \\\n+    dpkg-dev \\\n+    g++ \\\n+    python3-dev \\\n+    openjdk-11-jdk-headless \\\n+    curl \\\n+    vim \\\n+    && rm -rf /var/lib/apt/lists/* \\\n+    && cd /tmp \\\n+    && curl -O https://bootstrap.pypa.io/get-pip.py \\\n+    && python3 get-pip.py\n+\n+RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n+RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n+\n+RUN export USE_CUDA=1\n+RUN pip install psutil future torch torchvision torchtext\n+ADD serve serve\n+RUN pip install ../serve/\n+\n+RUN useradd -m model-server \\\n+    && mkdir -p /home/model-server/tmp\n+\n+COPY dockerd-entrypoint.sh /usr/local/bin/dockerd-entrypoint.sh\n+\n+RUN chmod +x /usr/local/bin/dockerd-entrypoint.sh \\\n+    && chown -R model-server /home/model-server\n+\n+COPY config.properties /home/model-server/config.properties\n+RUN mkdir /home/model-server/model-store && chown -R model-server /home/model-server/model-store\n+\n+EXPOSE 8080 8081\n+\n+USER model-server\n+WORKDIR /home/model-server\n+ENV TEMP=/home/model-server/tmp\n+ENTRYPOINT [\"/usr/local/bin/dockerd-entrypoint.sh\"]\n+CMD [\"serve\"]\n+\n+LABEL maintainer=\"wongale@amazon.com\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYwMjcyNQ==", "bodyText": "@dhaniram-kshirsagar The docker dev build command throws many errors for the failing gradle tests while the build is happening\n 5 tests completed, 1 failed\n  \n  > Task :server:test FAILED\n  > Task :server:jacocoTestReport\n  \n  FAILURE: Build failed with an exception.\n  \n  * What went wrong:\n  Execution failed for task ':server:test'.\n  > There were failing tests. See the report at: file:///serve/frontend/server/build/reports/tests/test/index.html\n\nHowever after this it still proceeds and creates a container.\nFailed to build torchserve\nInstalling collected packages: torchserve\n    Running setup.py install for torchserve: started\n    Running setup.py install for torchserve: still running...\n    Running setup.py install for torchserve: still running...\n    Running setup.py install for torchserve: finished with status 'done'\nSuccessfully installed torchserve-0.0.1b20200510\nRemoving intermediate container a7e2317f538d\n ---> b30ed2bfdf4f\nStep 9/20 : RUN useradd -m model-server     && mkdir -p /home/model-server/tmp\n....\n\n\nPlease fix the errors so that all the gradle tests work fine which will be needed for the development build.\nNote: The build for branch issue_266 worked fine, so unclear where the error is.\n./build_image.sh -b issue_266 -t torchserver:dev gave no errors", "url": "https://github.com/pytorch/serve/pull/308#discussion_r422602725", "createdAt": "2020-05-10T07:39:02Z", "author": {"login": "chauhang"}, "path": "docker/README.md", "diffHunk": "@@ -54,27 +68,50 @@ The TorchServe's inference and management APIs can be accessed on localhost over\n curl http://localhost:8080/ping\n ```\n \n-#### Check running containers\n+# Create TorchServe docker image from source\n+\n+The following are examples on how to use the `build_image.sh` script to build Docker images to support CPU or GPU inference.\n+\n+To build the TorchServe image for a CPU device using the `master` branch, use the following command:\n \n ```bash\n-docker ps\n+./build_image.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adcae965086948e39c8a2e940ac7434974825648"}, "originalPosition": 83}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "929afd8c98c10b6517d5356c7ee72fcdbadac249", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/929afd8c98c10b6517d5356c7ee72fcdbadac249", "committedDate": "2020-05-18T15:49:34Z", "message": "Enhanced Dockerfile for binary per #178 and other misc."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fad8c6d4b076db662c7f2c74d7f53b227907249d", "author": {"user": null}, "url": "https://github.com/pytorch/serve/commit/fad8c6d4b076db662c7f2c74d7f53b227907249d", "committedDate": "2020-05-18T18:10:10Z", "message": "Fixed gpu related issues in start script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad92e924a602abad63d829c470efcff0cde0d9f9", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/ad92e924a602abad63d829c470efcff0cde0d9f9", "committedDate": "2020-05-18T18:16:02Z", "message": "Corrected the heading font"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "650c2feca01a2e7cfaae17d506f59861efbfad58", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/650c2feca01a2e7cfaae17d506f59861efbfad58", "committedDate": "2020-05-18T19:06:34Z", "message": "Added mar creation steps from container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "120526bd27391f104caba8cf00f4917d1f54737e", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/120526bd27391f104caba8cf00f4917d1f54737e", "committedDate": "2020-05-18T19:06:54Z", "message": "Merge branch 'issue_266' of https://github.com/pytorch/serve into issue_266"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8929d0e655f2b0966dea4f1c754328f31006a295", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/8929d0e655f2b0966dea4f1c754328f31006a295", "committedDate": "2020-05-19T13:21:43Z", "message": "added buildkit support for dev docker files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72f9d5d2f51be599203cf44942bdd60fa4a87fdb", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/72f9d5d2f51be599203cf44942bdd60fa4a87fdb", "committedDate": "2020-05-19T13:22:27Z", "message": "Merge branch 'staging_0_1_1' into issue_266"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "824d912e99adb4c6712c7efbf9580779e654c676", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/824d912e99adb4c6712c7efbf9580779e654c676", "committedDate": "2020-05-19T13:22:47Z", "message": "Merge branch 'issue_266' of https://github.com/pytorch/serve into issue_266"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fb39cb2500898da19507405fb20f08cadbcc528", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/1fb39cb2500898da19507405fb20f08cadbcc528", "committedDate": "2020-05-19T13:58:37Z", "message": "Fix for buildkit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df05ec101c654c163d1d13b496ffcf4a70b897b8", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/df05ec101c654c163d1d13b496ffcf4a70b897b8", "committedDate": "2020-05-19T18:14:54Z", "message": "Restoring psutil and future as absence leads intermittent hangged build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "705cbf1c706479c66db37558b5f3116c73136b06", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/705cbf1c706479c66db37558b5f3116c73136b06", "committedDate": "2020-05-21T11:28:26Z", "message": "Fixed review comments for doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1df2fd5dc44d3350b276769a36d5a495d0fbb8d1", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/1df2fd5dc44d3350b276769a36d5a495d0fbb8d1", "committedDate": "2020-05-21T11:30:55Z", "message": "Fixed typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6913a21e9b483d0f6d47ae25fdacbe277ea6e952", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/6913a21e9b483d0f6d47ae25fdacbe277ea6e952", "committedDate": "2020-05-21T11:32:39Z", "message": "Merge branch 'staging_0_1_1' into issue_266"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MzM1NDY4", "url": "https://github.com/pytorch/serve/pull/308#pullrequestreview-416335468", "createdAt": "2020-05-21T17:12:48Z", "commit": {"oid": "6913a21e9b483d0f6d47ae25fdacbe277ea6e952"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNzoxMjo0OVrOGY7cvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNzoxMzoxN1rOGY7d7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc5MzAyMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ADD serve serve\n          \n          \n            \n            ADD ../serve serve", "url": "https://github.com/pytorch/serve/pull/308#discussion_r428793020", "createdAt": "2020-05-21T17:12:49Z", "author": {"login": "maaquib"}, "path": "docker/Dockerfile_dev.gpu", "diffHunk": "@@ -21,10 +34,10 @@ RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n RUN export USE_CUDA=1\n-RUN pip install psutil future torch torchvision torchtext\n-RUN pip install --no-cache-dir psutil\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext\n ADD serve serve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6913a21e9b483d0f6d47ae25fdacbe277ea6e952"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc5MzMyNg==", "bodyText": "Given that the docker build would be run from the serve/docker directory shouldn't this be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ADD serve serve\n          \n          \n            \n            ADD ../serve serve", "url": "https://github.com/pytorch/serve/pull/308#discussion_r428793326", "createdAt": "2020-05-21T17:13:17Z", "author": {"login": "maaquib"}, "path": "docker/Dockerfile_dev.cpu", "diffHunk": "@@ -20,12 +33,10 @@ RUN apt-get update && \\\n RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1\n RUN update-alternatives --install /usr/local/bin/pip pip /usr/local/bin/pip3 1\n \n-RUN pip install --no-cache-dir psutil\n-RUN pip install --no-cache-dir torch\n-RUN pip install --no-cache-dir torchvision\n-RUN pip install --no-cache-dir torchtext\n+RUN pip install --no-cache-dir psutil future torch torchvision torchtext\n ADD serve serve", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6913a21e9b483d0f6d47ae25fdacbe277ea6e952"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2Mzg2MDg1", "url": "https://github.com/pytorch/serve/pull/308#pullrequestreview-416386085", "createdAt": "2020-05-21T18:24:17Z", "commit": {"oid": "6913a21e9b483d0f6d47ae25fdacbe277ea6e952"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "952846552d62477407853d7076aa0394fa5b4d3c", "author": {"user": {"login": "maaquib", "name": "Aaqib"}}, "url": "https://github.com/pytorch/serve/commit/952846552d62477407853d7076aa0394fa5b4d3c", "committedDate": "2020-05-21T18:25:44Z", "message": "Merge branch 'staging_0_1_1' into issue_266"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2381, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}