{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NDgxMDMx", "number": 431, "title": ".circleci: Add initial circleci configuration", "bodyText": "Adds initial circleci configuration for building wheels.\nWheels will show up as build artifacts in circleci.\nWhat does this actually do?\nRuns python setup.py bdist_wheel --release --universal in CircelCI and then stores the artifacts for release.\nSigned-off-by: Eli Uriegas eliuriegas@fb.com", "createdAt": "2020-06-03T22:08:50Z", "url": "https://github.com/pytorch/serve/pull/431", "merged": true, "mergeCommit": {"oid": "0794dabeb65a203aec51ffc26473068b3ae46345"}, "closed": true, "closedAt": "2020-06-05T17:37:33Z", "author": {"login": "seemethere"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnw7OuABqjM0MDQyNTIzOTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoWNwBgFqTQyNTQ5NDQ2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc369c3732166afab10be1f16a0d623781db1d63", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/cc369c3732166afab10be1f16a0d623781db1d63", "committedDate": "2020-06-03T22:07:11Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "045440a0f8e3bff28f09cfaa9b91244925e3e139", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/045440a0f8e3bff28f09cfaa9b91244925e3e139", "committedDate": "2020-06-03T22:09:09Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "045440a0f8e3bff28f09cfaa9b91244925e3e139", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/045440a0f8e3bff28f09cfaa9b91244925e3e139", "committedDate": "2020-06-03T22:09:09Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "972b9a893687055952505ea883472280587fab2b", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/972b9a893687055952505ea883472280587fab2b", "committedDate": "2020-06-03T22:10:16Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "972b9a893687055952505ea883472280587fab2b", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/972b9a893687055952505ea883472280587fab2b", "committedDate": "2020-06-03T22:10:16Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "25898bfc860f0d1db66e91f862bd1e758093c74a", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/25898bfc860f0d1db66e91f862bd1e758093c74a", "committedDate": "2020-06-03T22:10:46Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "25898bfc860f0d1db66e91f862bd1e758093c74a", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/25898bfc860f0d1db66e91f862bd1e758093c74a", "committedDate": "2020-06-03T22:10:46Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "dab2f1b4c1dad047687de5a3af08b4c0b7a10510", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/dab2f1b4c1dad047687de5a3af08b4c0b7a10510", "committedDate": "2020-06-03T22:11:41Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dab2f1b4c1dad047687de5a3af08b4c0b7a10510", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/dab2f1b4c1dad047687de5a3af08b4c0b7a10510", "committedDate": "2020-06-03T22:11:41Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "208f8f56a8aebdae20ee5e7b84fc70c805b22f8f", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/208f8f56a8aebdae20ee5e7b84fc70c805b22f8f", "committedDate": "2020-06-03T22:13:52Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "208f8f56a8aebdae20ee5e7b84fc70c805b22f8f", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/208f8f56a8aebdae20ee5e7b84fc70c805b22f8f", "committedDate": "2020-06-03T22:13:52Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "770101573baafbcae12c6eae2a6b8f446ff3b613", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/770101573baafbcae12c6eae2a6b8f446ff3b613", "committedDate": "2020-06-03T22:15:30Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "770101573baafbcae12c6eae2a6b8f446ff3b613", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/770101573baafbcae12c6eae2a6b8f446ff3b613", "committedDate": "2020-06-03T22:15:30Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "aeb234303a5fb3668d0f30752f717a4486b20c36", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/aeb234303a5fb3668d0f30752f717a4486b20c36", "committedDate": "2020-06-03T22:16:47Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aeb234303a5fb3668d0f30752f717a4486b20c36", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/aeb234303a5fb3668d0f30752f717a4486b20c36", "committedDate": "2020-06-03T22:16:47Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "5f24df0a88585bbf0c21de9468bae59e2a23706d", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/5f24df0a88585bbf0c21de9468bae59e2a23706d", "committedDate": "2020-06-03T22:18:03Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f24df0a88585bbf0c21de9468bae59e2a23706d", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/5f24df0a88585bbf0c21de9468bae59e2a23706d", "committedDate": "2020-06-03T22:18:03Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "535b22ee4190b113776f5db4fba22fcb2a4c2e5c", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/535b22ee4190b113776f5db4fba22fcb2a4c2e5c", "committedDate": "2020-06-03T22:19:06Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "535b22ee4190b113776f5db4fba22fcb2a4c2e5c", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/535b22ee4190b113776f5db4fba22fcb2a4c2e5c", "committedDate": "2020-06-03T22:19:06Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "0ff2fb62cf127cad5fd9e607c0e6c3cad64710b6", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/0ff2fb62cf127cad5fd9e607c0e6c3cad64710b6", "committedDate": "2020-06-03T22:22:48Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ff2fb62cf127cad5fd9e607c0e6c3cad64710b6", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/0ff2fb62cf127cad5fd9e607c0e6c3cad64710b6", "committedDate": "2020-06-03T22:22:48Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "5634f250975fdbc807156881d492c2b39ad3a059", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/5634f250975fdbc807156881d492c2b39ad3a059", "committedDate": "2020-06-03T22:32:40Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5634f250975fdbc807156881d492c2b39ad3a059", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/5634f250975fdbc807156881d492c2b39ad3a059", "committedDate": "2020-06-03T22:32:40Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "af4736ad5d6fd125121ab8eddcd8a8f959a7da31", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/af4736ad5d6fd125121ab8eddcd8a8f959a7da31", "committedDate": "2020-06-04T17:55:23Z", "message": ".git: Add gitignore\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af4736ad5d6fd125121ab8eddcd8a8f959a7da31", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/af4736ad5d6fd125121ab8eddcd8a8f959a7da31", "committedDate": "2020-06-04T17:55:23Z", "message": ".git: Add gitignore\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "04659924b993da056352db72c260ef2d16e87d8e", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/04659924b993da056352db72c260ef2d16e87d8e", "committedDate": "2020-06-04T18:29:40Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NzQyMDYw", "url": "https://github.com/pytorch/serve/pull/431#pullrequestreview-424742060", "createdAt": "2020-06-04T18:57:15Z", "commit": {"oid": "af4736ad5d6fd125121ab8eddcd8a8f959a7da31"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "committedDate": "2020-06-04T19:06:21Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04659924b993da056352db72c260ef2d16e87d8e", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/04659924b993da056352db72c260ef2d16e87d8e", "committedDate": "2020-06-04T18:29:40Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}, "afterCommit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "author": {"user": {"login": "seemethere", "name": "Eli Uriegas"}}, "url": "https://github.com/pytorch/serve/commit/52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "committedDate": "2020-06-04T19:06:21Z", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0ODg3MTEz", "url": "https://github.com/pytorch/serve/pull/431#pullrequestreview-424887113", "createdAt": "2020-06-04T22:49:43Z", "commit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMjo0OTo0M1rOGfakvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMjo0OTo0M1rOGfakvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU5NDQzMQ==", "bodyText": "@seemethere Will this only run on CPU machines? How are we planning to generate binaries for GPUs?", "url": "https://github.com/pytorch/serve/pull/431#discussion_r435594431", "createdAt": "2020-06-04T22:49:43Z", "author": {"login": "chauhang"}, "path": ".circleci/Dockerfile", "diffHunk": "@@ -0,0 +1,6 @@\n+FROM ubuntu:18.04 as dev\n+RUN apt-get update && apt-get install -y openjdk-11-jdk\n+COPY --from=continuumio/miniconda3:4.8.2 /opt/conda /opt/conda\n+ENV PATH=\"/opt/conda/bin/:${PATH}\"\n+ARG PYTORCH_CHANNEL=pytorch\n+RUN conda install -c \"${PYTORCH_CHANNEL}\" -c powerai -y pytorch torchvision torchtext cpuonly psutil", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0OTE4MzUy", "url": "https://github.com/pytorch/serve/pull/431#pullrequestreview-424918352", "createdAt": "2020-06-05T00:13:57Z", "commit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0OTMyNjkw", "url": "https://github.com/pytorch/serve/pull/431#pullrequestreview-424932690", "createdAt": "2020-06-05T01:04:00Z", "commit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMTowNDowMFrOGfdI2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMTowNzo0MlrOGfdMfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzNjQ0MQ==", "bodyText": "https://github.com/pytorch/serve/pull/431/files#r435594431\nseems to use Ubuntu 18.04 docker image and build on top.\nI'm not sure what the image: tag is for or what the naming convention used?\nubuntu-1604:201903-01", "url": "https://github.com/pytorch/serve/pull/431#discussion_r435636441", "createdAt": "2020-06-05T01:04:00Z", "author": {"login": "mycpuorg"}, "path": ".circleci/config.yml", "diffHunk": "@@ -0,0 +1,74 @@\n+version: 2.1\n+\n+jobs:\n+    build_docker_environment:\n+        parameters:\n+            pytorch_channel:\n+                type: string\n+                default: \"pytorch\"\n+        machine:\n+            image: ubuntu-1604:201903-01", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzNzM3Mw==", "bodyText": "same question here", "url": "https://github.com/pytorch/serve/pull/431#discussion_r435637373", "createdAt": "2020-06-05T01:07:42Z", "author": {"login": "mycpuorg"}, "path": ".circleci/config.yml", "diffHunk": "@@ -0,0 +1,74 @@\n+version: 2.1\n+\n+jobs:\n+    build_docker_environment:\n+        parameters:\n+            pytorch_channel:\n+                type: string\n+                default: \"pytorch\"\n+        machine:\n+            image: ubuntu-1604:201903-01\n+        environment:\n+            - DOCKER_BUILDKIT=1\n+        steps:\n+            - checkout\n+            - run:\n+                name: Building docker image\n+                command: |\n+                    cat .circleci/Dockerfile | docker build \\\n+                        -t pytorch/serve-circleci-dev \\\n+                        --progress=plain \\\n+                        --build-arg PYTORCH_CHANNEL=\"<< parameters.pytorch_channel >>\" -\n+            - run:\n+                name: Save docker image to archive\n+                command: mkdir /tmp/workspace && docker image save pytorch/serve-circleci-dev -o /tmp/workspace/dev-image.tar\n+            - persist_to_workspace:\n+                root: /tmp/workspace\n+                paths:\n+                    - dev-image.tar\n+    build_wheel:\n+        parameters:\n+            build_directory:\n+                type: string\n+                default: \".\"\n+        machine:\n+            image: ubuntu-1604:201903-01", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDk0NDY0", "url": "https://github.com/pytorch/serve/pull/431#pullrequestreview-425494464", "createdAt": "2020-06-05T17:35:59Z", "commit": {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2183, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}