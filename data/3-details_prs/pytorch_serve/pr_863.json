{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2MjY5MDA1", "number": 863, "title": "add npm packages for mac; enable windows", "bodyText": "Description\nPlease include a summary of the feature or issue being fixed. Please also include relevant motivation and context. List any dependencies that are required for this change.\nFixes #(issue)\nissue833\nType of change\nPlease delete options that are not relevant.\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to not work as expected)\n This change requires a documentation update\n\nFeature/Issue validation/testing\nPlease describe the tests [UT/IT] that you ran to verify your changes and relevent result summary. Provide instructions so it can be reproduced.\nPlease also list any relevant details for your test configuration.\n\n\n Mac\n\n\n ubuntu cpu\n\n\n ubuntu gpu\n\n\n windows\n\n\nUT/IT execution results\n\n\nLogs\n\n\nChecklist:\n\n Have you added tests that prove your fix is effective or that this feature works?\n New and existing unit tests pass locally with these changes?\n Has code been commented, particularly in hard-to-understand areas?\n Have you made corresponding changes to the documentation?", "createdAt": "2020-12-10T21:28:04Z", "url": "https://github.com/pytorch/serve/pull/863", "merged": true, "mergeCommit": {"oid": "1b27e46269fe1c7a7a3337b40ac29f977b18d59f"}, "closed": true, "closedAt": "2020-12-12T04:34:53Z", "author": {"login": "lxning"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk6KISAH2gAyNTM2MjY5MDA1OjJiMmE2NzRjNzE1Mzg2OTA3MmVlYjNlYzVlZTRiNGI0OGJmNDhkZmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlU6twAFqTU1MDY4OTQzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2b2a674c7153869072eeb3ec5ee4b4b48bf48dfe", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/2b2a674c7153869072eeb3ec5ee4b4b48bf48dfe", "committedDate": "2020-12-10T21:24:04Z", "message": "add npm packages for mac; enable windows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "960eb231fe3efea8d9c48be68752f71306271cab", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/960eb231fe3efea8d9c48be68752f71306271cab", "committedDate": "2020-12-10T21:46:27Z", "message": "update smi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50cb550a3a744a6cb78c4a8f866b4e4187ed8baf", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/50cb550a3a744a6cb78c4a8f866b4e4187ed8baf", "committedDate": "2020-12-10T23:58:53Z", "message": "test windows format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f1e36b3c6fdd2993d8b113069edfa603c7d1cd7", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/8f1e36b3c6fdd2993d8b113069edfa603c7d1cd7", "committedDate": "2020-12-11T00:41:17Z", "message": "test windows path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63a618cd569d2059003c109a823b94612b1c1e63", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/63a618cd569d2059003c109a823b94612b1c1e63", "committedDate": "2020-12-11T00:44:06Z", "message": "test windows path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a5d382d00f21c1c0969575c6b57368cfff89d2a", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/0a5d382d00f21c1c0969575c6b57368cfff89d2a", "committedDate": "2020-12-11T01:10:14Z", "message": "Merge branch 'master' into issue_833"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3769ec0ae0fe026953146ca4fa11d088556124ec", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/3769ec0ae0fe026953146ca4fa11d088556124ec", "committedDate": "2020-12-11T05:10:07Z", "message": "Merge branch 'master' into issue_833"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "416b870c8137809c3463d4504ae5916c7f48d52b", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/416b870c8137809c3463d4504ae5916c7f48d52b", "committedDate": "2020-12-11T05:34:41Z", "message": "Merge branch 'master' into issue_833"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMTc2MDU5", "url": "https://github.com/pytorch/serve/pull/863#pullrequestreview-550176059", "createdAt": "2020-12-11T15:03:29Z", "commit": {"oid": "416b870c8137809c3463d4504ae5916c7f48d52b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNTowMzozMFrOID8oqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNTowNzowMFrOID8yIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMDA4OQ==", "bodyText": "Windows has nvidia-smi.exe instead of nvidia-smi. We should only check for that.\nSee if we can reuse this dictionary from ts_scripts/util.py", "url": "https://github.com/pytorch/serve/pull/863#discussion_r541010089", "createdAt": "2020-12-11T15:03:30Z", "author": {"login": "harshbafna"}, "path": "ts_scripts/print_env_info.py", "diffHunk": "@@ -50,8 +50,24 @@\n     \"cudnn_version\": []\n }\n \n-smi = 'nvidia-smi'\n+npm_env =  {\n+    \"npm_pkg_version\": []\n+}\n \n+def get_nvidia_smi():\n+    # Note: nvidia-smi is currently available only on Windows and Linux\n+    smi = 'nvidia-smi'\n+    if get_platform() == 'win32':", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "416b870c8137809c3463d4504ae5916c7f48d52b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMDQ2Mg==", "bodyText": "is this for node packages?", "url": "https://github.com/pytorch/serve/pull/863#discussion_r541010462", "createdAt": "2020-12-11T15:04:03Z", "author": {"login": "harshbafna"}, "path": "ts_scripts/print_env_info.py", "diffHunk": "@@ -62,6 +78,8 @@ def run(command):\n     enc = locale.getpreferredencoding()\n     output = output.decode(enc)\n     err = err.decode(enc)\n+    if output.startswith(\"\u251c\u2500\u2500 \"):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "416b870c8137809c3463d4504ae5916c7f48d52b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMTY4MQ==", "bodyText": "We should rather use windows-powershell which is inbuilt, instead of cygwin.", "url": "https://github.com/pytorch/serve/pull/863#discussion_r541011681", "createdAt": "2020-12-11T15:05:47Z", "author": {"login": "harshbafna"}, "path": "ts_scripts/print_env_info.py", "diffHunk": "@@ -134,6 +171,8 @@ def check_release_file():\n def get_os():\n     from platform import machine\n     platform = get_platform()\n+    if platform == 'win32' or platform == 'cygwin':", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "416b870c8137809c3463d4504ae5916c7f48d52b"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMjMwNA==", "bodyText": "what about other platforms?", "url": "https://github.com/pytorch/serve/pull/863#discussion_r541012304", "createdAt": "2020-12-11T15:06:41Z", "author": {"login": "harshbafna"}, "path": "ts_scripts/print_env_info.py", "diffHunk": "@@ -295,6 +344,8 @@ def populate_env_info():\n     if TORCH_AVAILABLE and torch.cuda.is_available():\n         populate_cuda_env(\"Yes\")\n \n+    if get_platform() == 'darwin':\n+        populate_npm_env()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "416b870c8137809c3463d4504ae5916c7f48d52b"}, "originalPosition": 141}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMjUxMg==", "bodyText": "what about other platforms?", "url": "https://github.com/pytorch/serve/pull/863#discussion_r541012512", "createdAt": "2020-12-11T15:07:00Z", "author": {"login": "harshbafna"}, "path": "ts_scripts/print_env_info.py", "diffHunk": "@@ -332,17 +383,27 @@ def populate_env_info():\n cuDNN version: {cudnn_version}\n \"\"\"\n \n+npm_info_fmt = \"\"\"\n+Versions of npm installed packages:\n+{npm_pkg_version}\n+\"\"\"\n+\n \n def get_pretty_env_info(branch_name):\n     global env_info_fmt\n     global cuda_info_fmt\n+    global npm_info_fmt\n     populate_env_info()\n     env_dict = {**torchserve_env, **python_env, **java_env, **os_info, \"torchserve_branch\": branch_name}\n \n     if TORCH_AVAILABLE and torch.cuda.is_available():\n         env_dict.update(cuda_env)\n         env_info_fmt = env_info_fmt + \"\\n\" + cuda_info_fmt\n \n+    if get_platform() == 'darwin':", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "416b870c8137809c3463d4504ae5916c7f48d52b"}, "originalPosition": 166}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59953072014bfd3d5aef3dfc592f51a51d3451a4", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/59953072014bfd3d5aef3dfc592f51a51d3451a4", "committedDate": "2020-12-11T17:43:23Z", "message": "update windows smi cmd"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cec19fd338ec747397cb9bd31082501006ef348", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/6cec19fd338ec747397cb9bd31082501006ef348", "committedDate": "2020-12-11T19:02:02Z", "message": "Merge branch 'master' into issue_833"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67941287720a71233bb1f9d8a7a054fbe288fc29", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/67941287720a71233bb1f9d8a7a054fbe288fc29", "committedDate": "2020-12-11T19:19:23Z", "message": "fix tab"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "255cb303c0e20b56db33767f6fcaf78924f5694e", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/255cb303c0e20b56db33767f6fcaf78924f5694e", "committedDate": "2020-12-11T19:20:03Z", "message": "Merge branch 'issue_833' of github.com:pytorch/serve into issue_833\nfix format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b46c863b37f4edc33753c739e1bb07832b2cef25", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/b46c863b37f4edc33753c739e1bb07832b2cef25", "committedDate": "2020-12-11T19:22:26Z", "message": "Merge branch 'master' into issue_833"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91a018b6f8824d76da7f47b8b37f8be43c490dea", "author": {"user": {"login": "lxning", "name": null}}, "url": "https://github.com/pytorch/serve/commit/91a018b6f8824d76da7f47b8b37f8be43c490dea", "committedDate": "2020-12-11T19:28:17Z", "message": "Merge branch 'issue_833' of github.com:pytorch/serve into issue_833"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8383716dcaee7483a7bd570bb9dbfad9ec9d60c3", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/8383716dcaee7483a7bd570bb9dbfad9ec9d60c3", "committedDate": "2020-12-12T03:41:19Z", "message": "Merge branch 'master' into issue_833"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNjg2MjQ3", "url": "https://github.com/pytorch/serve/pull/863#pullrequestreview-550686247", "createdAt": "2020-12-12T03:42:29Z", "commit": {"oid": "91a018b6f8824d76da7f47b8b37f8be43c490dea"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNjg5MDEx", "url": "https://github.com/pytorch/serve/pull/863#pullrequestreview-550689011", "createdAt": "2020-12-12T04:26:36Z", "commit": {"oid": "8383716dcaee7483a7bd570bb9dbfad9ec9d60c3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNjg5NDM3", "url": "https://github.com/pytorch/serve/pull/863#pullrequestreview-550689437", "createdAt": "2020-12-12T04:34:40Z", "commit": {"oid": "8383716dcaee7483a7bd570bb9dbfad9ec9d60c3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1954, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}