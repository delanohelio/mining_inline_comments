{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MzIxNTc3", "number": 318, "title": "Removed duplicate snapshot server property", "bodyText": "Description\nAddresses concern about snapshot server properties \"NUM_WORKERS\" which was confusing.\n\n\nRemoved \"NUM_WORKERS\" which was unnecessary property duplicate of \"default_workers_per_model\"\n\n\n\"default_workers_per_model\"  is the actual config property to set default workers for models which are loaded at startup of torchserve.\n\n\nFixes #154\nType of change\nPlease delete options that are not relevant.\n\n Bug fix (non-breaking change which fixes an issue)\n This change requires a documentation update\n\nFeature/Issue validation/testing\nPlease describe the tests [UT/IT] that you ran to verify your changes and relevent result summary. Provide instructions so it can be reproduced.\nPlease also list any relevant details for your test configuration.\n\n Test A\nrepro steps:\ntorchserve --start --model-store modelstore\ncurl -X POST \"http://localhost:8081/models?url=r18.mar\"\ncurl -v -X PUT \"http://localhost:8081/models/r18?min_worker=4\"\n\nObserve Snapshot files generated, has a entry for \"default_workers_per_init_model\".\n\nLogs\nissue_154_torchserve_sanity_log.txt\n\nChecklist:\n\n Have you added tests that prove your fix is effective or that this feature works?\n New and existing unit tests pass locally with these changes?\n Has code been commented, particularly in hard-to-understand areas?\n Have you made corresponding changes to the documentation?", "createdAt": "2020-05-08T16:35:11Z", "url": "https://github.com/pytorch/serve/pull/318", "merged": true, "mergeCommit": {"oid": "48fc80f8d86a47d76760af0fb07bb4032b407ac7"}, "closed": true, "closedAt": "2020-07-06T19:35:15Z", "author": {"login": "shivamshriwas"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfTlmaAH2gAyNDE1MzIxNTc3Ojg3YzAwMzQ5OGIzOTdkNGQ0OGY5NmU3YzFiNzRmMWQ5YTM3M2QwMWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyWf6kAFqTQ0MzM1NDQ4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "87c003498b397d4d48f96e7c1b74f1d9a373d01a", "author": {"user": {"login": "shivamshriwas", "name": "shivamshriwas"}}, "url": "https://github.com/pytorch/serve/commit/87c003498b397d4d48f96e7c1b74f1d9a373d01a", "committedDate": "2020-05-08T15:27:00Z", "message": "Refactored code , updated docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cea48401dd42420048cbd46e7a6fb7f8a39d241", "author": {"user": {"login": "shivamshriwas", "name": "shivamshriwas"}}, "url": "https://github.com/pytorch/serve/commit/4cea48401dd42420048cbd46e7a6fb7f8a39d241", "committedDate": "2020-05-08T15:51:06Z", "message": "fixed formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NDE2NDgx", "url": "https://github.com/pytorch/serve/pull/318#pullrequestreview-408416481", "createdAt": "2020-05-08T17:58:36Z", "commit": {"oid": "4cea48401dd42420048cbd46e7a6fb7f8a39d241"}, "state": "DISMISSED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNzo1ODozNlrOGSuRkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxODowMjoxMVrOGSuYjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI4NTcxMw==", "bodyText": "Why is this change required? This seems to be a breaking change and without any functionality change.", "url": "https://github.com/pytorch/serve/pull/318#discussion_r422285713", "createdAt": "2020-05-08T17:58:36Z", "author": {"login": "vdantu"}, "path": "frontend/server/src/main/java/org/pytorch/serve/util/ConfigManager.java", "diffHunk": "@@ -53,7 +53,8 @@\n     private static final String TS_MANAGEMENT_ADDRESS = \"management_address\";\n     private static final String TS_LOAD_MODELS = \"load_models\";\n     private static final String TS_BLACKLIST_ENV_VARS = \"blacklist_env_vars\";\n-    private static final String TS_DEFAULT_WORKERS_PER_MODEL = \"default_workers_per_model\";\n+    private static final String TS_DEFAULT_WORKERS_PER_INIT_MODEL =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4cea48401dd42420048cbd46e7a6fb7f8a39d241"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI4NjU4NQ==", "bodyText": "Why are we modifying the original configuration? Can't we simply change the snapshot to follow what exists in main configuration?", "url": "https://github.com/pytorch/serve/pull/318#discussion_r422286585", "createdAt": "2020-05-08T18:00:12Z", "author": {"login": "vdantu"}, "path": "docs/configuration.md", "diffHunk": "@@ -183,7 +183,7 @@ Most of the following properties are designed for performance tuning. Adjusting\n * `enable_envvars_config`: Enable configuring TorchServe through environment variables. When this option is set to \"true\", all the static configurations of TorchServe can come through environment variables as well. Default: false\n * `number_of_netty_threads`: number frontend netty thread. Default: number of logical processors available to the JVM.\n * `netty_client_threads`: number of backend netty thread. Default: number of logical processors available to the JVM.\n-* `default_workers_per_model`: number of workers to create for each model that loaded at startup time. Default: available GPUs in system or number of logical processors available to the JVM.\n+* `default_workers_per_init_model`: number of workers to create for each model that loaded at startup time. Default: available GPUs in system or number of logical processors available to the JVM.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4cea48401dd42420048cbd46e7a6fb7f8a39d241"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI4NzUwMg==", "bodyText": "Can we just call this default_workers_per_model?", "url": "https://github.com/pytorch/serve/pull/318#discussion_r422287502", "createdAt": "2020-05-08T18:02:11Z", "author": {"login": "vdantu"}, "path": "frontend/server/src/test/resources/snapshots/snapshot4.cfg", "diffHunk": "@@ -6,7 +6,7 @@ enable_envvars_config=true\n load_models=noop.mar\n private_key_file=src/test/resources/key.pem\n snapshot_store=FS\n-NUM_WORKERS=4\n+default_workers_per_init_model=4", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4cea48401dd42420048cbd46e7a6fb7f8a39d241"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bcad04d98bac0bc64a82be5c48fb678f77eae2c", "author": {"user": {"login": "dhanainme", "name": null}}, "url": "https://github.com/pytorch/serve/commit/7bcad04d98bac0bc64a82be5c48fb678f77eae2c", "committedDate": "2020-05-16T00:57:30Z", "message": "Merge branch 'staging_0_1_1' into issue_154"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7032fb30f4dc67243591e1c4bfb56fb53ebb6182", "author": {"user": {"login": "shivamshriwas", "name": "shivamshriwas"}}, "url": "https://github.com/pytorch/serve/commit/7032fb30f4dc67243591e1c4bfb56fb53ebb6182", "committedDate": "2020-05-19T19:35:43Z", "message": "merged branch staging_0_1_1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24b23b0e450845fa3ef6d9fa0d48556b0a80d4d3", "author": {"user": {"login": "shivamshriwas", "name": "shivamshriwas"}}, "url": "https://github.com/pytorch/serve/commit/24b23b0e450845fa3ef6d9fa0d48556b0a80d4d3", "committedDate": "2020-05-19T19:50:09Z", "message": "reverted back default_workers_per_init_model to default_workers_per_model"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTkxOTE2", "url": "https://github.com/pytorch/serve/pull/318#pullrequestreview-415591916", "createdAt": "2020-05-20T18:11:19Z", "commit": {"oid": "24b23b0e450845fa3ef6d9fa0d48556b0a80d4d3"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c542df2fad67e7027114bd1619c9dbd0c0f31390", "author": {"user": {"login": "shivamshriwas", "name": "shivamshriwas"}}, "url": "https://github.com/pytorch/serve/commit/c542df2fad67e7027114bd1619c9dbd0c0f31390", "committedDate": "2020-05-20T19:35:43Z", "message": "Merge branch 'staging_0_1_1' into issue_154"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68c523c15c299f1ee957f1b139a6c22fcbdede1c", "author": {"user": {"login": "chauhang", "name": "Geeta Chauhan"}}, "url": "https://github.com/pytorch/serve/commit/68c523c15c299f1ee957f1b139a6c22fcbdede1c", "committedDate": "2020-05-27T04:41:03Z", "message": "Merge branch 'staging_0_1_1' into issue_154"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "117fb158aff92488c0019cf17c9f1dd8716e8dd1", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/117fb158aff92488c0019cf17c9f1dd8716e8dd1", "committedDate": "2020-05-29T06:29:09Z", "message": "Merge branch 'staging_0_1_1' into issue_154"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41adc52b21a3787e209cc744696527c1c99e0553", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/41adc52b21a3787e209cc744696527c1c99e0553", "committedDate": "2020-06-10T03:04:29Z", "message": "Merge branch 'staging_0_1_1' into issue_154"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5990ddaf432efe4bba5feb64000571790a782bb", "author": {"user": {"login": "shivamshriwas", "name": "shivamshriwas"}}, "url": "https://github.com/pytorch/serve/commit/c5990ddaf432efe4bba5feb64000571790a782bb", "committedDate": "2020-06-21T20:44:07Z", "message": "Merge branch 'master' of https://github.com/pytorch/serve into issue_154\n\n# Conflicts:\n#\tdocker/README.md\n#\ttest/README.md\n#\ttest/regression_tests.sh"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d227ea27f5742df7e6f014f1263ce158eca940db", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/d227ea27f5742df7e6f014f1263ce158eca940db", "committedDate": "2020-07-02T11:33:14Z", "message": "Merge branch 'master' into issue_154"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d202b103ebc5c69ec4ab85e5d06b850d3e6c127", "author": {"user": {"login": "maaquib", "name": "Aaqib"}}, "url": "https://github.com/pytorch/serve/commit/0d202b103ebc5c69ec4ab85e5d06b850d3e6c127", "committedDate": "2020-07-06T19:15:33Z", "message": "Merge branch 'master' into issue_154"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzMzU0NDg0", "url": "https://github.com/pytorch/serve/pull/318#pullrequestreview-443354484", "createdAt": "2020-07-06T19:35:04Z", "commit": {"oid": "0d202b103ebc5c69ec4ab85e5d06b850d3e6c127"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2391, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}