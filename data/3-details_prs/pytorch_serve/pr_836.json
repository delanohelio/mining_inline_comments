{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMDM5MTI3", "number": 836, "title": "Build fixes", "bodyText": "Description\nPlease include a summary of the feature or issue being fixed. Please also include relevant motivation and context. List any dependencies that are required for this change.\nFixes #(issue)\nType of change\nPlease delete options that are not relevant.\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to not work as expected)\n This change requires a documentation update\n\nFeature/Issue validation/testing\nPlease describe the tests [UT/IT] that you ran to verify your changes and relevent result summary. Provide instructions so it can be reproduced.\nPlease also list any relevant details for your test configuration.\n\n\n Test A\n\n\n Test B\n\n\nUT/IT execution results\n\n\nLogs\n\n\nChecklist:\n\n Have you added tests that prove your fix is effective or that this feature works?\n New and existing unit tests pass locally with these changes?\n Has code been commented, particularly in hard-to-understand areas?\n Have you made corresponding changes to the documentation?", "createdAt": "2020-12-05T16:14:24Z", "url": "https://github.com/pytorch/serve/pull/836", "merged": true, "mergeCommit": {"oid": "59edddde96e199767c6ae240ecdbb88022ba2433"}, "closed": true, "closedAt": "2020-12-09T06:06:11Z", "author": {"login": "harshbafna"}, "timelineItems": {"totalCount": 47, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjE_RhgH2gAyNTMzMDM5MTI3OjA5M2U0NzBiMTQxMGY3YjM3MmQ0N2Q5MTExZTQzZTI3YmMzMGE3ZDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkYPDEAFqTU0Nzg2MDQzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "093e470b1410f7b372d47d9111e43e27bc30a7d2", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/093e470b1410f7b372d47d9111e43e27bc30a7d2", "committedDate": "2020-12-05T04:53:19Z", "message": "fixed docker readme for cuda version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "547a7cb8db6f0d4eed260f0fe44c8466327549c2", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/547a7cb8db6f0d4eed260f0fe44c8466327549c2", "committedDate": "2020-12-05T05:35:34Z", "message": "added cuda92 support for PT 16"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ff67eba0775cb57c5d035553bdeca5b786e164e", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/6ff67eba0775cb57c5d035553bdeca5b786e164e", "committedDate": "2020-12-05T05:59:23Z", "message": "excluded test package from installation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96eeb20a070dcbde98f5b643941a5172583cbb2a", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/96eeb20a070dcbde98f5b643941a5172583cbb2a", "committedDate": "2020-12-05T05:59:41Z", "message": "minor fix for cuda version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfd208638c545830cc5dce5e91738786bfc5b024", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/bfd208638c545830cc5dce5e91738786bfc5b024", "committedDate": "2020-12-05T06:00:27Z", "message": "added header info in install from src"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6299947287dd07fe19807cd0225b2d01b3d3d8de", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/6299947287dd07fe19807cd0225b2d01b3d3d8de", "committedDate": "2020-12-05T06:03:49Z", "message": "missed checkin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb638bce2b208dd6e25f87d154c0e379ec37c23b", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/fb638bce2b208dd6e25f87d154c0e379ec37c23b", "committedDate": "2020-12-05T09:04:51Z", "message": "fixed import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1ab474663b242969c2ae82bc2dc7ac29eb2fb9e", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/f1ab474663b242969c2ae82bc2dc7ac29eb2fb9e", "committedDate": "2020-12-05T09:05:11Z", "message": "added python version check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ea037bd6bfdc4091feef1cd1a50131839b8e253", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/7ea037bd6bfdc4091feef1cd1a50131839b8e253", "committedDate": "2020-12-05T09:07:29Z", "message": "node fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcae405ebed0c439b0bda55062e15a25820ad7ae", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/fcae405ebed0c439b0bda55062e15a25820ad7ae", "committedDate": "2020-12-05T09:08:17Z", "message": "update pip and setuptools"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8eeb1dea08a05b46d932eb598e2dd1c19830c26a", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/8eeb1dea08a05b46d932eb598e2dd1c19830c26a", "committedDate": "2020-12-05T12:00:38Z", "message": "refactored functions to util module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b42667308a8e87a82f025850b3030376c6f6a00c", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/b42667308a8e87a82f025850b3030376c6f6a00c", "committedDate": "2020-12-05T16:13:49Z", "message": "updated README"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NjM5MTI4", "url": "https://github.com/pytorch/serve/pull/836#pullrequestreview-545639128", "createdAt": "2020-12-05T18:17:58Z", "commit": {"oid": "b42667308a8e87a82f025850b3030376c6f6a00c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQxODoxNzo1OVrOH_-FGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNVQxODo1Mjo0MFrOH__WYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgzOTQ1MA==", "bodyText": "Can we also clarify that we need to specify the appropriate BASE_IMAGE= with the cuda version", "url": "https://github.com/pytorch/serve/pull/836#discussion_r536839450", "createdAt": "2020-12-05T18:17:59Z", "author": {"login": "maaquib"}, "path": "docker/README.md", "diffHunk": "@@ -38,7 +38,7 @@ For creating GPU based image with the latest CUDA version PyTorch supports (ex.\n DOCKER_BUILDKIT=1 docker build --file Dockerfile --build-arg BASE_IMAGE=nvidia/cuda:10.2-cudnn7-runtime-ubuntu18.04 -t torchserve:latest .\n ```\n \n-For creating GPU based image with older CUDA versions (ex. CUDA 10.1), make sure that the `--build-arg CUDA_VERSION=<version>` is specified. The version is in the format \"cuda92\", \"cuda101\":\n+For creating GPU based image with older CUDA versions (ex. CUDA 10.1), make sure that the `--build-arg CUDA_VERSION=<version>` is specified. The version is in the format \"cu92\", \"cu101\", \"cu102\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b42667308a8e87a82f025850b3030376c6f6a00c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjg2MDI1Ng==", "bodyText": "requirements_cu102.txt doesn't exist. Please add it\nI don't like the idea of having users install dependencies two different ways. We already have an install_dependencies.py script and this pip install should be part of it", "url": "https://github.com/pytorch/serve/pull/836#discussion_r536860256", "createdAt": "2020-12-05T18:52:40Z", "author": {"login": "maaquib"}, "path": "README.md", "diffHunk": "@@ -40,16 +40,29 @@ TorchServe is a flexible and easy to use tool for serving PyTorch models.\n \n 2. Install python pre-requisite packages\n \n- - For CPU or GPU-Cuda 10.2\n+ - For CPU or latest supported CUDA version for Torch 1.6\n \n     ```bash\n     pip install -U -r requirements.txt\n     ```\n+   \n+ - For GPU with Cuda 10.2\n+\n+    ```bash\n+    pip install -U -r requirements_cu102.txt -f https://download.pytorch.org/whl/torch_stable.html", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b42667308a8e87a82f025850b3030376c6f6a00c"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29bc917d169d75121ad924d56315eccadf87a3a7", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/29bc917d169d75121ad924d56315eccadf87a3a7", "committedDate": "2020-12-06T02:40:27Z", "message": "Added requirements file for cuda 102"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c7f3415ec8698d938a3c0d76f802e251e0d9c2c", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/2c7f3415ec8698d938a3c0d76f802e251e0d9c2c", "committedDate": "2020-12-06T02:46:30Z", "message": "added base image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c639a8fde7761d7cad30470aae63ad265e5d593", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/0c639a8fde7761d7cad30470aae63ad265e5d593", "committedDate": "2020-12-06T05:06:37Z", "message": "added strict check for python 3.6+"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f49cc2a4101f1ff18e6796dbeabda8be1ad28965", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/f49cc2a4101f1ff18e6796dbeabda8be1ad28965", "committedDate": "2020-12-06T05:07:07Z", "message": "updated python path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2b724181bf204501eb3539518653d822d605450", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/f2b724181bf204501eb3539518653d822d605450", "committedDate": "2020-12-06T05:14:41Z", "message": "added logger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e24e78c5de8d94a2a1061ef0fdbd5eb22db97fde", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/e24e78c5de8d94a2a1061ef0fdbd5eb22db97fde", "committedDate": "2020-12-06T05:21:48Z", "message": "fixed python version check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b1709c0c5162a5e59da18834431e0d3a0b05c96", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/1b1709c0c5162a5e59da18834431e0d3a0b05c96", "committedDate": "2020-12-06T08:00:26Z", "message": "Fixes for windows native support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c56a686b6129ed904080cea5a8fb14da7b7bbac", "author": {"user": {"login": "dhaniram-kshirsagar", "name": null}}, "url": "https://github.com/pytorch/serve/commit/0c56a686b6129ed904080cea5a8fb14da7b7bbac", "committedDate": "2020-12-06T08:00:49Z", "message": "Merge branch 'build_fixes' of https://github.com/pytorch/serve into build_fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NzM0MzQy", "url": "https://github.com/pytorch/serve/pull/836#pullrequestreview-545734342", "createdAt": "2020-12-06T18:18:48Z", "commit": {"oid": "0c56a686b6129ed904080cea5a8fb14da7b7bbac"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQxODoxODo0OVrOIANreA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQxODoxODo0OVrOIANreA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzA5NTAzMg==", "bodyText": "@harshbafna @maaquib Why are we pinning to 3.6 version? We need support for python >= 3.6", "url": "https://github.com/pytorch/serve/pull/836#discussion_r537095032", "createdAt": "2020-12-06T18:18:49Z", "author": {"login": "chauhang"}, "path": "ts_scripts/utils.py", "diffHunk": "@@ -0,0 +1,20 @@\n+import os\n+import sys\n+\n+\n+def is_gpu_instance():\n+    return True if os.system(\"nvidia-smi\") == 0 else False\n+\n+\n+def is_conda_env():\n+    return True if os.system(\"conda\") == 0 else False\n+\n+\n+def check_python_version():\n+    req_version = (3, 6)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c56a686b6129ed904080cea5a8fb14da7b7bbac"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NzM0Mzg0", "url": "https://github.com/pytorch/serve/pull/836#pullrequestreview-545734384", "createdAt": "2020-12-06T18:19:18Z", "commit": {"oid": "0c56a686b6129ed904080cea5a8fb14da7b7bbac"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15d8759f5f2b4b118641ac186103e93112f7aade", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/15d8759f5f2b4b118641ac186103e93112f7aade", "committedDate": "2020-12-07T04:41:10Z", "message": "removed cuda 10.2 requirements file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce3c3e6f111db81b44058fab9ce68e539df5eda8", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/ce3c3e6f111db81b44058fab9ce68e539df5eda8", "committedDate": "2020-12-07T04:42:40Z", "message": "Merge branch 'build_fixes' of https://github.com/pytorch/serve into build_fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75d77f92ef7f9f0cc323c3655febc40caab3e03a", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/75d77f92ef7f9f0cc323c3655febc40caab3e03a", "committedDate": "2020-12-07T04:48:40Z", "message": "froze pylint version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fe98696dd2c7a5e7d7f3daab619a0ea31c7d2e0", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/6fe98696dd2c7a5e7d7f3daab619a0ea31c7d2e0", "committedDate": "2020-12-07T07:48:26Z", "message": "added cu92 as allowed cuda version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "362d3d67ce165f4da490707a25242f12fda44788", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/362d3d67ce165f4da490707a25242f12fda44788", "committedDate": "2020-12-07T08:33:56Z", "message": "removed is gpu instance check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a8a0596944622ecfc7d34125ff2a3030e748ce1", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/3a8a0596944622ecfc7d34125ff2a3030e748ce1", "committedDate": "2020-12-07T08:43:20Z", "message": "added check for latest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30f7a642bb8d266fb2690b08d0a179e1e0c97f35", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/30f7a642bb8d266fb2690b08d0a179e1e0c97f35", "committedDate": "2020-12-07T08:53:54Z", "message": "enhanced build image script to support production docker image as well"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "540357572d05e03b43a4e47c1049bfa38dfcbd35", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/540357572d05e03b43a4e47c1049bfa38dfcbd35", "committedDate": "2020-12-07T09:17:10Z", "message": "updated help section"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0665ad64c201e02322b809890491a2c1415bdea0", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/0665ad64c201e02322b809890491a2c1415bdea0", "committedDate": "2020-12-07T09:19:49Z", "message": "updated docker readme"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTU0NzY2", "url": "https://github.com/pytorch/serve/pull/836#pullrequestreview-546554766", "createdAt": "2020-12-07T21:33:56Z", "commit": {"oid": "0665ad64c201e02322b809890491a2c1415bdea0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMTozMzo1N1rOIA7sYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMTozNjozN1rOIA7y1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzg0ODkzMQ==", "bodyText": "Add possible values for this option", "url": "https://github.com/pytorch/serve/pull/836#discussion_r537848931", "createdAt": "2020-12-07T21:33:57Z", "author": {"login": "maaquib"}, "path": "docker/build_image.sh", "diffHunk": "@@ -16,7 +17,8 @@ do\n           echo \"-h, --help  show brief help\"\n           echo \"-b, --branch_name=BRANCH_NAME specify a branch_name to use\"\n           echo \"-g, --gpu specify to use gpu\"\n-          echo \"-c, --codebuild specify to created image for codebuild\"\n+          echo \"-bt, --buildtype specify to created image for codebuild\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0665ad64c201e02322b809890491a2c1415bdea0"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzg1MDU4Mg==", "bodyText": "This might have side affects if the user is running in a virtual env. Please verify.", "url": "https://github.com/pytorch/serve/pull/836#discussion_r537850582", "createdAt": "2020-12-07T21:36:37Z", "author": {"login": "maaquib"}, "path": "ts_scripts/install_dependencies.py", "diffHunk": "@@ -41,26 +49,30 @@ def install_jmeter(self):\n class Linux(Common):\n     def __init__(self):\n         super().__init__()\n+        os.system(f\"{self.sudo_cmd}apt-get update\")\n \n     def install_java(self):\n-        os.system(f\"{self.sudo_cmd}apt-get update\")\n         os.system(f\"{self.sudo_cmd}apt-get install -y openjdk-11-jdk\")\n \n-    def install_node_packages(self):\n-        os.system(f\"{self.sudo_cmd}apt-get update\")\n-        os.system(f\"{self.sudo_cmd}npm install -g newman newman-reporter-html markdown-link-check\")\n-\n     def install_nodejs(self):\n-        os.system(f\"{self.sudo_cmd}apt-get update\")\n+        python_path = Path(sys.executable).resolve()\n         os.system(f\"{self.sudo_cmd}curl -sL https://deb.nodesource.com/setup_14.x | {self.sudo_cmd}bash -\")\n         os.system(f\"{self.sudo_cmd}apt-get install -y nodejs\")\n+        os.system(f\"{self.sudo_cmd}ln -sf {python_path} /usr/bin/python\")\n+        os.system(f\"{self.sudo_cmd}ln -sf /usr/bin/pip3 /usr/bin/pip\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0665ad64c201e02322b809890491a2c1415bdea0"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2Njc3NTI4", "url": "https://github.com/pytorch/serve/pull/836#pullrequestreview-546677528", "createdAt": "2020-12-08T01:35:17Z", "commit": {"oid": "0665ad64c201e02322b809890491a2c1415bdea0"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b82c56eb3a9c3f0cc32767a7d7804989773d1508", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/b82c56eb3a9c3f0cc32767a7d7804989773d1508", "committedDate": "2020-12-08T03:59:30Z", "message": "Merge branch 'master' into build_fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c83dc38cf5d1af33fba4169175601b7be7502b4", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/8c83dc38cf5d1af33fba4169175601b7be7502b4", "committedDate": "2020-12-08T05:46:47Z", "message": "updated help section"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a207396c91247e97d2c6b29d0e28a05e13f94cf7", "author": {"user": {"login": "harshbafna", "name": "Harsh Bafna"}}, "url": "https://github.com/pytorch/serve/commit/a207396c91247e97d2c6b29d0e28a05e13f94cf7", "committedDate": "2020-12-08T05:47:06Z", "message": "Merge branch 'build_fixes' of https://github.com/pytorch/serve into build_fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dee3a147ae794a9c5674feef6fda2267c0892cce", "author": {"user": {"login": "chauhang", "name": "Geeta Chauhan"}}, "url": "https://github.com/pytorch/serve/commit/dee3a147ae794a9c5674feef6fda2267c0892cce", "committedDate": "2020-12-08T18:20:12Z", "message": "Merge branch 'master' into build_fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df5fe4cd5ed4db1e4f21a040db4e029a7c454a60", "author": {"user": {"login": "maheshambule", "name": "Mahesh Ambule"}}, "url": "https://github.com/pytorch/serve/commit/df5fe4cd5ed4db1e4f21a040db4e029a7c454a60", "committedDate": "2020-12-08T18:45:24Z", "message": "install dependencies dev and prod environment (#837)\n\n* production and dev env support\r\n\r\n* Merge branch 'build_fixes' of https://github.com/pytorch/serve into build_fixes1\r\n\r\n# Conflicts:\r\n#\tREADME.md\r\n#\tts_scripts/install_dependencies.py\r\n\r\n* add --environment=dev param\r\n\r\n* add environment param\r\n\r\n* add environment param\r\n\r\n* small fix\r\n\r\n* prod and dev commands separation\r\n\r\n* prod and dev commands separation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2a9d0d8d88637e25fbabb67b2d311635cba95c6", "author": {"user": {"login": "maaquib", "name": "Aaqib"}}, "url": "https://github.com/pytorch/serve/commit/a2a9d0d8d88637e25fbabb67b2d311635cba95c6", "committedDate": "2020-12-08T18:45:41Z", "message": "Merge branch 'master' into build_fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbb1ecd37bdb49df95464f0e8d17a04b870216b5", "author": {"user": {"login": "maaquib", "name": "Aaqib"}}, "url": "https://github.com/pytorch/serve/commit/fbb1ecd37bdb49df95464f0e8d17a04b870216b5", "committedDate": "2020-12-08T18:48:03Z", "message": "Merge branch 'master' into build_fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a0212146ae1e3ac7159ad21105713b83550149c", "author": {"user": {"login": "chauhang", "name": "Geeta Chauhan"}}, "url": "https://github.com/pytorch/serve/commit/4a0212146ae1e3ac7159ad21105713b83550149c", "committedDate": "2020-12-09T00:32:47Z", "message": "Merge branch 'master' into build_fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NzQ5NzI2", "url": "https://github.com/pytorch/serve/pull/836#pullrequestreview-547749726", "createdAt": "2020-12-09T00:42:18Z", "commit": {"oid": "4a0212146ae1e3ac7159ad21105713b83550149c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwMDo0MjoxOFrOIB833Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwMDo0MjoxOFrOIB833Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODkxNjgyOQ==", "bodyText": "Please replace 1.0 with current latest version of another tag like \"dev-latest\"", "url": "https://github.com/pytorch/serve/pull/836#discussion_r538916829", "createdAt": "2020-12-09T00:42:18Z", "author": {"login": "chauhang"}, "path": "docker/README.md", "diffHunk": "@@ -26,143 +25,177 @@ git clone https://github.com/pytorch/serve.git\n \n # Create TorchServe docker image\n \n-For creating CPU based image :\n+Use `build_image.sh` script to build the docker images. The script builds the `production`, `dev` and `codebuild` docker images.\n \n-```bash\n-DOCKER_BUILDKIT=1 docker build --file Dockerfile -t torchserve:latest .\n-```\n+| Parameter | Desciption |\n+|------|------|\n+|-h, --help|Show script help|\n+|-b, --branch_name|Specify a branch name to use. Default: master |\n+|-g, --gpu|Build image with GPU based ubuntu base image|\n+|-bt, --buildtype|Which type of docker image to build. Can be one of : production, dev, codebuild|\n+|-t, --tag|Tag name for image. If not specified, script uses torchserv default tag names.|\n+|-cv, --cudaversion| Specify to cuda version to use. Supported values `cu92`, `cu101`, `cu102`. Default `cu102`|\n+\n+**PRODUCTION ENVIRONMENT IMAGES**\n+\n+Creates a docker image with publicly available `torchserve` and `torch-model-archiver` binaries installed.\n \n-For creating GPU based image with the latest CUDA version PyTorch supports (ex. CUDA 10.2 as of Oct 2020):\n+ - For creating CPU based image :\n \n ```bash\n-DOCKER_BUILDKIT=1 docker build --file Dockerfile --build-arg BASE_IMAGE=nvidia/cuda:10.2-cudnn7-runtime-ubuntu18.04 -t torchserve:latest .\n+./build_image.sh\n ```\n \n-For creating GPU based image with older CUDA versions (ex. CUDA 10.1), make sure that the `--build-arg CUDA_VERSION=<version>` is specified. The version is in the format \"cuda92\", \"cuda101\":\n+ - For creating GPU based image (Default cuda 10.2):\n \n ```bash\n-DOCKER_BUILDKIT=1 docker build --file Dockerfile --build-arg BASE_IMAGE=nvidia/cuda:10.1-cudnn7-runtime-ubuntu18.04 --build-arg CUDA_VERSION=cu101 -t torchserve:latest .\n+./build_image.sh -g\n ```\n \n-## Start a container with a TorchServe image\n-\n-The following examples will start the container with 8080/81 port exposed to outer-world/localhost.\n+ - For creating GPU based image with cuda version 10.1:\n \n-#### Start CPU container\n+```bash\n+./build_image.sh -g -cv cu101\n+```\n \n-For the latest version, you can use the `latest` tag:\n+ - For creating GPU based image with cuda version 9.2:\n \n ```bash\n-docker run --rm -it -p 8080:8080 -p 8081:8081 pytorch/torchserve:latest\n+./build_image.sh -g -cv cu92\n ```\n \n-For specific versions you can pass in the specific tag to use (ex: pytorch/torchserve:0.1.1-cpu):\n+ - For creating image with a custom tag:\n \n ```bash\n-docker run --rm -it -p 8080:8080 -p 8081:8081 pytorch/torchserve:0.1.1-cpu\n+./build_image.sh -t torchserve:1.0\n ```\n \n-#### Start GPU container\n+**DEVELOPER ENVIRONMENT IMAGES**\n \n-For GPU latest image with gpu devices 1 and 2:\n+Creates a docker image with `torchserve` and `torch-model-archiver` installed from source.\n+\n+- For creating CPU based image :\n \n ```bash\n-docker run --rm -it --gpus '\"device=1,2\"' -p 8080:8080 -p 8081:8081 pytorch/torchserve:latest-gpu\n+./build_image.sh -bt dev\n ```\n \n-For specific versions you can pass in the specific tag to use (ex: 0.1.1-cuda10.1-cudnn7-runtime):\n+- For creating CPU based image with a different branch:\n \n ```bash\n-docker run --rm -it --gpus all -p 8080:8080 -p 8081:8081 pytorch/torchserve:0.1.1-cuda10.1-cudnn7-runtime\n+./build_image.sh -bt dev -b my_branch\n ```\n \n-For the latest version, you can use the `latest-gpu` tag:\n+- For creating GPU based image (Default cuda 10.2):\n \n ```bash\n-docker run --rm -it --gpus all -p 8080:8080 -p 8081:8081 torchserve:gpu-latest\n+./build_image.sh -bt dev -g\n ```\n \n-#### Accessing TorchServe APIs inside container\n+- For creating GPU based image with a different branch:\n \n-The TorchServe's inference and management APIs can be accessed on localhost over 8080 and 8081 ports respectively. Example :\n+```bash\n+./build_image.sh -bt dev -g -b my_branch\n+```\n+\n+ - For creating GPU based image with cuda version 10.1:\n \n ```bash\n-curl http://localhost:8080/ping\n+./build_image.sh -bt dev -g -cv cu101\n ```\n \n-# Create TorchServe docker image from source\n+ - For creating GPU based image with cuda version 9.2:\n \n-The following are examples on how to use the `build_image.sh` script to build Docker images from source to support CPU or GPU inference.\n+```bash\n+./build_image.sh -bt dev -g -cv cu92\n+```\n \n-To build the TorchServe image for a CPU device using the `master` branch, use the following command:\n+ - For creating image with a custom tag:\n \n ```bash\n-./build_image.sh\n+./build_image.sh -bt dev -t torchserve-dev:1.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a0212146ae1e3ac7159ad21105713b83550149c"}, "originalPosition": 130}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NTQyNzA0", "url": "https://github.com/pytorch/serve/pull/836#pullrequestreview-547542704", "createdAt": "2020-12-08T19:04:18Z", "commit": {"oid": "fbb1ecd37bdb49df95464f0e8d17a04b870216b5"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxOTowNDoxOVrOIBxgBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxOTowNDoxOVrOIBxgBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODczMDUwMw==", "bodyText": "@maheshambule  I had tested with Py37 on conda recently. Why are we adding Py38 as as a min?", "url": "https://github.com/pytorch/serve/pull/836#discussion_r538730503", "createdAt": "2020-12-08T19:04:19Z", "author": {"login": "maaquib"}, "path": "README.md", "diffHunk": "@@ -25,35 +25,37 @@ TorchServe is a flexible and easy to use tool for serving PyTorch models.\n \n ## Install TorchServe\n \n-1. Install Java 11\n+1. Install dependencies\n \n-    For Ubuntu\n-    ```bash\n-    sudo apt-get install openjdk-11-jdk\n-    ```\n-   \n-   For Mac\n-    ```bash\n-    brew tap AdoptOpenJDK/openjdk\n-    brew cask install adoptopenjdk11\n-    ```\n+Note: For Conda, Python 3.8 is required to run Torchserve.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbb1ecd37bdb49df95464f0e8d17a04b870216b5"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc924de3eeadb30e64c982d1b68a378ea02e2a75", "author": {"user": {"login": "maaquib", "name": "Aaqib"}}, "url": "https://github.com/pytorch/serve/commit/cc924de3eeadb30e64c982d1b68a378ea02e2a75", "committedDate": "2020-12-09T03:52:08Z", "message": "Merge branch 'master' into build_fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3ODUxNzkx", "url": "https://github.com/pytorch/serve/pull/836#pullrequestreview-547851791", "createdAt": "2020-12-09T05:37:06Z", "commit": {"oid": "cc924de3eeadb30e64c982d1b68a378ea02e2a75"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3ODYwNDMw", "url": "https://github.com/pytorch/serve/pull/836#pullrequestreview-547860430", "createdAt": "2020-12-09T05:52:40Z", "commit": {"oid": "cc924de3eeadb30e64c982d1b68a378ea02e2a75"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1929, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}