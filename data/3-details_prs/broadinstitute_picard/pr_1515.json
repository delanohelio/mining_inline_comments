{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNDMzNTkw", "number": 1515, "title": "gl-916 add pipeline version to metrics", "bodyText": "Description\nGive your PR a concise yet descriptive title\nupdated picard to add this new, nullable pipeline_version field\nExplain the motivation for making this change. What existing problem does the pull request solve?\nMention any issues fixed, addressed or otherwise related to this pull request, including issue numbers or hard links for issues in other repos.\nYou can delete these instructions once you have written your PR description.\n\nChecklist (never delete this)\nNever delete this, it is our record that procedure was followed. If you find that for whatever reason one of the checklist points doesn't apply to your PR, you can leave it unchecked but please add an explanation below.\nContent\n\n Added or modified tests to cover changes and any new functionality\n Edited the README / documentation (if applicable)\n All tests passing on Travis\n\nReview\n\n Final thumbs-up from reviewer\n Rebase, squash and reword as applicable\n\nFor more detailed guidelines, see https://github.com/broadinstitute/picard/wiki/Guidelines-for-pull-requests", "createdAt": "2020-05-26T20:02:51Z", "url": "https://github.com/broadinstitute/picard/pull/1515", "merged": true, "mergeCommit": {"oid": "9d577c81ab73ca45c29be67dade82194277e5b1c"}, "closed": true, "closedAt": "2020-06-01T18:45:59Z", "author": {"login": "nikellepetrillo"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjOSXpAH2gAyNDIzNDMzNTkwOmZhZDhjZWQ1Y2YzNmY0MjA1NTVmOGNjMGNmNjRhN2MyNjA1MDY3MzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnEVDugH2gAyNDIzNDMzNTkwOjRiMGIxOGQ4NjEzNzE0NDAxYzYzMDc2NjMwMDlkMWYzM2IxZjA2YjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fad8ced5cf36f420555f8cc0cf64a7c260506736", "author": {"user": {"login": "gbggrant", "name": "George Grant"}}, "url": "https://github.com/broadinstitute/picard/commit/fad8ced5cf36f420555f8cc0cf64a7c260506736", "committedDate": "2020-05-20T19:32:10Z", "message": "GL-916 Stubbed out adding PIPELINE_VERSION to arrays metrics."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6a829276a0d3cf59cd629ba6d137fa13742c1a9", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/a6a829276a0d3cf59cd629ba6d137fa13742c1a9", "committedDate": "2020-05-22T12:51:01Z", "message": "add optional pipeline_version input"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27b511ce267120f26f3add6528dbc1c3d5686235", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/27b511ce267120f26f3add6528dbc1c3d5686235", "committedDate": "2020-05-22T16:08:36Z", "message": "pass pipeline_version to accumulator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bebc49c4299565d4debb9deb5af0dc19a8b94356", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/bebc49c4299565d4debb9deb5af0dc19a8b94356", "committedDate": "2020-05-26T19:58:08Z", "message": "add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40d0420d54d9caa53b96f418f2d4bdfc3abc2e30", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/40d0420d54d9caa53b96f418f2d4bdfc3abc2e30", "committedDate": "2020-05-27T00:31:45Z", "message": "Merge branch 'master' into np_GL-916_AddPipelineVersionToMetrics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MzE0OTg4", "url": "https://github.com/broadinstitute/picard/pull/1515#pullrequestreview-419314988", "createdAt": "2020-05-27T15:03:08Z", "commit": {"oid": "40d0420d54d9caa53b96f418f2d4bdfc3abc2e30"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNTowMzowOVrOGbPDFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNTowMzowOVrOGbPDFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTIxMTI4Nw==", "bodyText": "Given the way this class is used, I don't see why the code in setup() isn't done in the constructor directly.", "url": "https://github.com/broadinstitute/picard/pull/1515#discussion_r431211287", "createdAt": "2020-05-27T15:03:09Z", "author": {"login": "pshapiro4broad"}, "path": "src/main/java/picard/arrays/ArraysCallingMetricAccumulator.java", "diffHunk": "@@ -76,14 +77,15 @@\n                         detail.P95_GREEN = p95Green;\n                         detail.P95_RED = p95Red;\n                         detail.SCANNER_NAME = scannerName;\n+                        detail.PIPELINE_VERSION = pipelineVersion;\n                         return detail;\n                     }, true);\n \n     ArraysCallingMetricAccumulator(DbSnpBitSetUtil.DbSnpBitSets dbsnp) {\n         this.dbsnp = dbsnp;\n     }\n \n-    public void setup(final VCFHeader vcfHeader) {\n+    public void setup(final VCFHeader vcfHeader, final String pipelineVersion) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40d0420d54d9caa53b96f418f2d4bdfc3abc2e30"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fc935178c93f7fca1530ce7ea4d6295480133be", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/9fc935178c93f7fca1530ce7ea4d6295480133be", "committedDate": "2020-05-29T12:21:13Z", "message": "change how we are passing PIPELINE_VERSION to metrics collector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b57833741081cb071f27d3952df9c88d81ce779e", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/b57833741081cb071f27d3952df9c88d81ce779e", "committedDate": "2020-05-29T12:21:34Z", "message": "Merge remote-tracking branch 'origin/np_GL-916_AddPipelineVersionToMetrics' into np_GL-916_AddPipelineVersionToMetrics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a39eafbdc36d7473b36ef045750dc1d85bb41ecd", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/a39eafbdc36d7473b36ef045750dc1d85bb41ecd", "committedDate": "2020-05-29T17:06:03Z", "message": "add pipeline_version to test data"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxOTI0MzU2", "url": "https://github.com/broadinstitute/picard/pull/1515#pullrequestreview-421924356", "createdAt": "2020-06-01T15:10:38Z", "commit": {"oid": "a39eafbdc36d7473b36ef045750dc1d85bb41ecd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNToxMDozOFrOGdOGdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNToxMDozOFrOGdOGdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI5MjkxOA==", "bodyText": "Since this is an optional parameter, we should have one test without pipelineVersion set in the VCF.  It should allow that case.", "url": "https://github.com/broadinstitute/picard/pull/1515#discussion_r433292918", "createdAt": "2020-06-01T15:10:38Z", "author": {"login": "gbggrant"}, "path": "testdata/picard/arrays/7991775143_R01C01_wo_optional_fields.vcf", "diffHunk": "@@ -179,6 +179,7 @@\n ##p95Green=4251\n ##p95Red=5479\n ##picardVersion=2.20.3-17-g8331bf3-SNAPSHOT\n+##pipelineVersion=foo", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a39eafbdc36d7473b36ef045750dc1d85bb41ecd"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "326769590e97d7e67ef864d920b858f5a2262585", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/326769590e97d7e67ef864d920b858f5a2262585", "committedDate": "2020-06-01T17:20:20Z", "message": "add test to allow case when pipeline version is not set in the vcf"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d4ae986c6f8c686d186207732c052c0e97a84f0", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/2d4ae986c6f8c686d186207732c052c0e97a84f0", "committedDate": "2020-06-01T17:48:57Z", "message": "Merge branch 'master' into np_GL-916_AddPipelineVersionToMetrics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDU0MTk1", "url": "https://github.com/broadinstitute/picard/pull/1515#pullrequestreview-422054195", "createdAt": "2020-06-01T17:50:15Z", "commit": {"oid": "326769590e97d7e67ef864d920b858f5a2262585"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzo1MjozMVrOGdUMdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzo1NToxN1rOGdUSFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5Mjc1OA==", "bodyText": "I don\u2019t think you need to update the example. I would either add an example or remove the comment. Adding a TODO should be avoided if possible.", "url": "https://github.com/broadinstitute/picard/pull/1515#discussion_r433392758", "createdAt": "2020-06-01T17:52:31Z", "author": {"login": "pshapiro4broad"}, "path": "src/main/java/picard/arrays/CollectArraysVariantCallingMetrics.java", "diffHunk": "@@ -43,10 +43,12 @@\n                     \"<h4>Usage example:</h4>\" +\n                     \"<pre>\" +\n                     \"java -jar picard.jar CollectArraysVariantCallingMetrics \\\\<br />\" +\n+                    // TODO - ADD example", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d4ae986c6f8c686d186207732c052c0e97a84f0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5NDE5Nw==", "bodyText": "Since PIPELINE_VERSION is already a String you don\u2019t need to call toString\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        lines.add(new VCFHeaderLine(InfiniumVcfFields.PIPELINE_VERSION, PIPELINE_VERSION.toString()));\n          \n          \n            \n                        lines.add(new VCFHeaderLine(InfiniumVcfFields.PIPELINE_VERSION, PIPELINE_VERSION);", "url": "https://github.com/broadinstitute/picard/pull/1515#discussion_r433394197", "createdAt": "2020-06-01T17:55:17Z", "author": {"login": "pshapiro4broad"}, "path": "src/main/java/picard/arrays/GtcToVcf.java", "diffHunk": "@@ -538,6 +541,9 @@ private VCFHeader createVCFHeader(final Build37ExtendedIlluminaManifest manifest\n         if (EXPECTED_GENDER != null) {\n             lines.add(new VCFHeaderLine(InfiniumVcfFields.EXPECTED_GENDER, EXPECTED_GENDER));\n         }\n+        if (PIPELINE_VERSION != null) {\n+            lines.add(new VCFHeaderLine(InfiniumVcfFields.PIPELINE_VERSION, PIPELINE_VERSION.toString()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d4ae986c6f8c686d186207732c052c0e97a84f0"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a6f1fca6f09ad0d18d790523a6aea75c079be0f", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/2a6f1fca6f09ad0d18d790523a6aea75c079be0f", "committedDate": "2020-06-01T17:58:12Z", "message": "Update src/main/java/picard/arrays/GtcToVcf.java\n\nCo-authored-by: Phil Shapiro <pshapiro@broadinstitute.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e2a59dd9299b69c4b79cc75b97091dcd8752270", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/7e2a59dd9299b69c4b79cc75b97091dcd8752270", "committedDate": "2020-06-01T18:04:48Z", "message": "remove TODO comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b0b18d8613714401c6307663009d1f33b1f06b6", "author": {"user": {"login": "nikellepetrillo", "name": "Nikelle Petrillo"}}, "url": "https://github.com/broadinstitute/picard/commit/4b0b18d8613714401c6307663009d1f33b1f06b6", "committedDate": "2020-06-01T18:11:45Z", "message": "add a parenthesis"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3215, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}