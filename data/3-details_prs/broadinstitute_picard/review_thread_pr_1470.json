{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1ODczMTQ4", "number": 1470, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0NjozOFrODizwwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0Nzo1OVrODizy4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODI2MjQxOnYy", "diffSide": "RIGHT", "path": "src/main/java/picard/arrays/VcfToAdpc.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0NjozOFrOFuQ0YA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo1NTo1OFrOFuRJSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NDM2OA==", "bodyText": "Should this also check the NUM_MARKERS_FILE?", "url": "https://github.com/broadinstitute/picard/pull/1470#discussion_r384054368", "createdAt": "2020-02-25T18:46:38Z", "author": {"login": "jessicaway"}, "path": "src/main/java/picard/arrays/VcfToAdpc.java", "diffHunk": "@@ -62,55 +68,85 @@\n                     \"An adpc.bin file is a binary file containing genotyping array intensity data that can be exported \" +\n                     \"by Illumina's GenomeStudio and Beadstudio analysis tools. The adpc.bin file is used as an input to \" +\n                     \"<a href='https://genome.sph.umich.edu/wiki/VerifyIDintensity'>VerifyIDintensity</a> a tool for \" +\n-                    \"detecting and estimating sample contamination of Illumina genotyping array data.\" +\n+                    \"detecting and estimating sample contamination of Illumina genotyping array data. \" +\n+                    \"If more than one VCF is used, they must all have the same number of loci.\" +\n                     \"<h4>Usage example:</h4>\" +\n                     \"<pre>\" +\n                     \"java -jar picard.jar VcfToAdpc \\\\<br />\" +\n                     \"      VCF=input.vcf \\\\<br />\" +\n-                    \"      OUTPUT=output.adpc.bin\" +\n+                    \"      OUTPUT=output.adpc.bin \\\\<br />\" +\n+                    \"      SAMPLES_FILE=output.samples.txt \\\\<br />\" +\n+                    \"      NUM_MARKERS_FILE=output.num_markers.txt \\\\<br />\" +\n                     \"</pre>\";\n \n \n     private final Log log = Log.getInstance(VcfToAdpc.class);\n \n-    @Argument(doc = \"The Input VCF\")\n-    public File VCF;\n+    @Argument(doc = \"One or more VCF files containing array intensity data.\")\n+    public List<File> VCF;\n \n     @Argument(shortName = StandardOptionDefinitions.OUTPUT_SHORT_NAME, doc = \"The output (adpc.bin) file to write.\")\n     public File OUTPUT;\n \n+    @Argument(shortName = \"SF\", doc = \"A text file into which the names of the samples will be written. \" +\n+            \"These will be in the same order as the data in the adpc.bin file.\")\n+    public File SAMPLES_FILE;\n+\n+    @Argument(shortName = \"NMF\", doc = \"A text file into which the number of loci in the VCF will be written. \" +\n+            \"This is useful for calling verifyIDIntensity.\")\n+    public File NUM_MARKERS_FILE;\n+\n     @Override\n     protected int doWork() {\n-        IOUtil.assertFileIsReadable(VCF);\n+        final List<File> inputs = IOUtil.unrollFiles(VCF, IOUtil.VCF_EXTENSIONS);\n+        IOUtil.assertFilesAreWritable(inputs);\n+        IOUtil.assertFileIsWritable(SAMPLES_FILE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a229b85c3370924cbb1c8988fceb88b00505ebba"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1OTcyMw==", "bodyText": "Yes.", "url": "https://github.com/broadinstitute/picard/pull/1470#discussion_r384059723", "createdAt": "2020-02-25T18:55:58Z", "author": {"login": "gbggrant"}, "path": "src/main/java/picard/arrays/VcfToAdpc.java", "diffHunk": "@@ -62,55 +68,85 @@\n                     \"An adpc.bin file is a binary file containing genotyping array intensity data that can be exported \" +\n                     \"by Illumina's GenomeStudio and Beadstudio analysis tools. The adpc.bin file is used as an input to \" +\n                     \"<a href='https://genome.sph.umich.edu/wiki/VerifyIDintensity'>VerifyIDintensity</a> a tool for \" +\n-                    \"detecting and estimating sample contamination of Illumina genotyping array data.\" +\n+                    \"detecting and estimating sample contamination of Illumina genotyping array data. \" +\n+                    \"If more than one VCF is used, they must all have the same number of loci.\" +\n                     \"<h4>Usage example:</h4>\" +\n                     \"<pre>\" +\n                     \"java -jar picard.jar VcfToAdpc \\\\<br />\" +\n                     \"      VCF=input.vcf \\\\<br />\" +\n-                    \"      OUTPUT=output.adpc.bin\" +\n+                    \"      OUTPUT=output.adpc.bin \\\\<br />\" +\n+                    \"      SAMPLES_FILE=output.samples.txt \\\\<br />\" +\n+                    \"      NUM_MARKERS_FILE=output.num_markers.txt \\\\<br />\" +\n                     \"</pre>\";\n \n \n     private final Log log = Log.getInstance(VcfToAdpc.class);\n \n-    @Argument(doc = \"The Input VCF\")\n-    public File VCF;\n+    @Argument(doc = \"One or more VCF files containing array intensity data.\")\n+    public List<File> VCF;\n \n     @Argument(shortName = StandardOptionDefinitions.OUTPUT_SHORT_NAME, doc = \"The output (adpc.bin) file to write.\")\n     public File OUTPUT;\n \n+    @Argument(shortName = \"SF\", doc = \"A text file into which the names of the samples will be written. \" +\n+            \"These will be in the same order as the data in the adpc.bin file.\")\n+    public File SAMPLES_FILE;\n+\n+    @Argument(shortName = \"NMF\", doc = \"A text file into which the number of loci in the VCF will be written. \" +\n+            \"This is useful for calling verifyIDIntensity.\")\n+    public File NUM_MARKERS_FILE;\n+\n     @Override\n     protected int doWork() {\n-        IOUtil.assertFileIsReadable(VCF);\n+        final List<File> inputs = IOUtil.unrollFiles(VCF, IOUtil.VCF_EXTENSIONS);\n+        IOUtil.assertFilesAreWritable(inputs);\n+        IOUtil.assertFileIsWritable(SAMPLES_FILE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NDM2OA=="}, "originalCommit": {"oid": "a229b85c3370924cbb1c8988fceb88b00505ebba"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3ODI2Nzg2OnYy", "diffSide": "RIGHT", "path": "src/main/java/picard/arrays/VcfToAdpc.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo0Nzo1OVrOFuQ3nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODo1NjoyOFrOFuRKXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NTE5Nw==", "bodyText": "Do we need to check writeable? The previous check was for readable", "url": "https://github.com/broadinstitute/picard/pull/1470#discussion_r384055197", "createdAt": "2020-02-25T18:47:59Z", "author": {"login": "jessicaway"}, "path": "src/main/java/picard/arrays/VcfToAdpc.java", "diffHunk": "@@ -62,55 +68,85 @@\n                     \"An adpc.bin file is a binary file containing genotyping array intensity data that can be exported \" +\n                     \"by Illumina's GenomeStudio and Beadstudio analysis tools. The adpc.bin file is used as an input to \" +\n                     \"<a href='https://genome.sph.umich.edu/wiki/VerifyIDintensity'>VerifyIDintensity</a> a tool for \" +\n-                    \"detecting and estimating sample contamination of Illumina genotyping array data.\" +\n+                    \"detecting and estimating sample contamination of Illumina genotyping array data. \" +\n+                    \"If more than one VCF is used, they must all have the same number of loci.\" +\n                     \"<h4>Usage example:</h4>\" +\n                     \"<pre>\" +\n                     \"java -jar picard.jar VcfToAdpc \\\\<br />\" +\n                     \"      VCF=input.vcf \\\\<br />\" +\n-                    \"      OUTPUT=output.adpc.bin\" +\n+                    \"      OUTPUT=output.adpc.bin \\\\<br />\" +\n+                    \"      SAMPLES_FILE=output.samples.txt \\\\<br />\" +\n+                    \"      NUM_MARKERS_FILE=output.num_markers.txt \\\\<br />\" +\n                     \"</pre>\";\n \n \n     private final Log log = Log.getInstance(VcfToAdpc.class);\n \n-    @Argument(doc = \"The Input VCF\")\n-    public File VCF;\n+    @Argument(doc = \"One or more VCF files containing array intensity data.\")\n+    public List<File> VCF;\n \n     @Argument(shortName = StandardOptionDefinitions.OUTPUT_SHORT_NAME, doc = \"The output (adpc.bin) file to write.\")\n     public File OUTPUT;\n \n+    @Argument(shortName = \"SF\", doc = \"A text file into which the names of the samples will be written. \" +\n+            \"These will be in the same order as the data in the adpc.bin file.\")\n+    public File SAMPLES_FILE;\n+\n+    @Argument(shortName = \"NMF\", doc = \"A text file into which the number of loci in the VCF will be written. \" +\n+            \"This is useful for calling verifyIDIntensity.\")\n+    public File NUM_MARKERS_FILE;\n+\n     @Override\n     protected int doWork() {\n-        IOUtil.assertFileIsReadable(VCF);\n+        final List<File> inputs = IOUtil.unrollFiles(VCF, IOUtil.VCF_EXTENSIONS);\n+        IOUtil.assertFilesAreWritable(inputs);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a229b85c3370924cbb1c8988fceb88b00505ebba"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1OTk5Nw==", "bodyText": "Oof.  Yeah, just mistranscribed that.", "url": "https://github.com/broadinstitute/picard/pull/1470#discussion_r384059997", "createdAt": "2020-02-25T18:56:28Z", "author": {"login": "gbggrant"}, "path": "src/main/java/picard/arrays/VcfToAdpc.java", "diffHunk": "@@ -62,55 +68,85 @@\n                     \"An adpc.bin file is a binary file containing genotyping array intensity data that can be exported \" +\n                     \"by Illumina's GenomeStudio and Beadstudio analysis tools. The adpc.bin file is used as an input to \" +\n                     \"<a href='https://genome.sph.umich.edu/wiki/VerifyIDintensity'>VerifyIDintensity</a> a tool for \" +\n-                    \"detecting and estimating sample contamination of Illumina genotyping array data.\" +\n+                    \"detecting and estimating sample contamination of Illumina genotyping array data. \" +\n+                    \"If more than one VCF is used, they must all have the same number of loci.\" +\n                     \"<h4>Usage example:</h4>\" +\n                     \"<pre>\" +\n                     \"java -jar picard.jar VcfToAdpc \\\\<br />\" +\n                     \"      VCF=input.vcf \\\\<br />\" +\n-                    \"      OUTPUT=output.adpc.bin\" +\n+                    \"      OUTPUT=output.adpc.bin \\\\<br />\" +\n+                    \"      SAMPLES_FILE=output.samples.txt \\\\<br />\" +\n+                    \"      NUM_MARKERS_FILE=output.num_markers.txt \\\\<br />\" +\n                     \"</pre>\";\n \n \n     private final Log log = Log.getInstance(VcfToAdpc.class);\n \n-    @Argument(doc = \"The Input VCF\")\n-    public File VCF;\n+    @Argument(doc = \"One or more VCF files containing array intensity data.\")\n+    public List<File> VCF;\n \n     @Argument(shortName = StandardOptionDefinitions.OUTPUT_SHORT_NAME, doc = \"The output (adpc.bin) file to write.\")\n     public File OUTPUT;\n \n+    @Argument(shortName = \"SF\", doc = \"A text file into which the names of the samples will be written. \" +\n+            \"These will be in the same order as the data in the adpc.bin file.\")\n+    public File SAMPLES_FILE;\n+\n+    @Argument(shortName = \"NMF\", doc = \"A text file into which the number of loci in the VCF will be written. \" +\n+            \"This is useful for calling verifyIDIntensity.\")\n+    public File NUM_MARKERS_FILE;\n+\n     @Override\n     protected int doWork() {\n-        IOUtil.assertFileIsReadable(VCF);\n+        final List<File> inputs = IOUtil.unrollFiles(VCF, IOUtil.VCF_EXTENSIONS);\n+        IOUtil.assertFilesAreWritable(inputs);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NTE5Nw=="}, "originalCommit": {"oid": "a229b85c3370924cbb1c8988fceb88b00505ebba"}, "originalPosition": 61}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 717, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}