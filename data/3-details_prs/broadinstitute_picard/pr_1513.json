{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNDA5NDcx", "number": 1513, "title": "Fixes edge case where soft-cliped portion of a read ends up at a nega\u2026", "bodyText": "\u2026tive position\nDescription\nGive your PR a concise yet descriptive title\nPlease explain the changes you made here.\nExplain the motivation for making this change. What existing problem does the pull request solve?\nMention any issues fixed, addressed or otherwise related to this pull request, including issue numbers or hard links for issues in other repos.\nYou can delete these instructions once you have written your PR description.\n\nChecklist (never delete this)\nNever delete this, it is our record that procedure was followed. If you find that for whatever reason one of the checklist points doesn't apply to your PR, you can leave it unchecked but please add an explanation below.\nContent\n\n Added or modified tests to cover changes and any new functionality\n Edited the README / documentation (if applicable)\n All tests passing on Travis\n\nReview\n\n Final thumbs-up from reviewer\n Rebase, squash and reword as applicable\n\nFor more detailed guidelines, see https://github.com/broadinstitute/picard/wiki/Guidelines-for-pull-requests", "createdAt": "2020-05-21T15:11:59Z", "url": "https://github.com/broadinstitute/picard/pull/1513", "merged": true, "mergeCommit": {"oid": "dfc76d530a6bfd17b116619183144d32529dfa39"}, "closed": true, "closedAt": "2020-05-21T19:57:51Z", "author": {"login": "fleharty"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjfI5CAH2gAyNDIxNDA5NDcxOjRkNTI2MDFiYTFiNGNjMWU0ZmRkODNhMWE5ODliY2QwNzE3OTM1Yzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcji7vBgH2gAyNDIxNDA5NDcxOjk1YTM3ZTMwODJkOGFjZTBhNTEwNmFiYmYwNjhjMzYzMTU5YTViMTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4d52601ba1b4cc1e4fdd83a1a989bcd0717935c8", "author": {"user": {"login": "fleharty", "name": "Mark Fleharty"}}, "url": "https://github.com/broadinstitute/picard/commit/4d52601ba1b4cc1e4fdd83a1a989bcd0717935c8", "committedDate": "2020-05-21T15:10:12Z", "message": "Fixes edge case where soft-cliped portion of a read ends up at a negative position"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cf3a8b394a3be75fcb3c06bc056c150f0840609", "author": {"user": {"login": "fleharty", "name": "Mark Fleharty"}}, "url": "https://github.com/broadinstitute/picard/commit/2cf3a8b394a3be75fcb3c06bc056c150f0840609", "committedDate": "2020-05-21T15:16:38Z", "message": "Accidently added the tests, but not the actual code.  Here is the code that should work."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93dd5559a68ee4525b141cd8f6a222077544fb6d", "author": {"user": {"login": "fleharty", "name": "Mark Fleharty"}}, "url": "https://github.com/broadinstitute/picard/commit/93dd5559a68ee4525b141cd8f6a222077544fb6d", "committedDate": "2020-05-21T15:38:48Z", "message": "Cleaning up a few things before review."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50736b874c4f5de31ad8728024de30bf0468159b", "author": {"user": {"login": "fleharty", "name": "Mark Fleharty"}}, "url": "https://github.com/broadinstitute/picard/commit/50736b874c4f5de31ad8728024de30bf0468159b", "committedDate": "2020-05-21T15:52:36Z", "message": "Removing code used for debugging."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NDI4Njc4", "url": "https://github.com/broadinstitute/picard/pull/1513#pullrequestreview-416428678", "createdAt": "2020-05-21T19:28:30Z", "commit": {"oid": "50736b874c4f5de31ad8728024de30bf0468159b"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6c907087b9d17cb5fc6ba0f1c8b983367a288a9", "author": {"user": {"login": "fleharty", "name": "Mark Fleharty"}}, "url": "https://github.com/broadinstitute/picard/commit/e6c907087b9d17cb5fc6ba0f1c8b983367a288a9", "committedDate": "2020-05-21T19:29:05Z", "message": "Making code more elegant by putting shift inside getReadPositionAtReferencePosition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NDMxNjQz", "url": "https://github.com/broadinstitute/picard/pull/1513#pullrequestreview-416431643", "createdAt": "2020-05-21T19:32:54Z", "commit": {"oid": "e6c907087b9d17cb5fc6ba0f1c8b983367a288a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxOTozMjo1NFrOGZABlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxOTozMjo1NFrOGZABlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODg2Nzk4OA==", "bodyText": "add a comment that since the read effectively got shifted forward by turning the clips into matches, the query position needs also to be moved forward so that it's still querying the same base", "url": "https://github.com/broadinstitute/picard/pull/1513#discussion_r428867988", "createdAt": "2020-05-21T19:32:54Z", "author": {"login": "yfarjoun"}, "path": "src/main/java/picard/sam/AbstractAlignmentMerger.java", "diffHunk": "@@ -819,10 +819,10 @@ private static int getReadPositionAtReferencePositionIgnoreSoftClips(final SAMRe\n \n         // Temporarily use the newCigar that has SOFT_CLIPs replaced with MATCH_OR_MISMATCH to get read position at reference, but ignore existence of soft-clips\n         rec.setCigar(newCigar);\n-        readPosition = SAMRecord.getReadPositionAtReferencePosition(rec, pos, false);\n+        readPosition = SAMRecord.getReadPositionAtReferencePosition(rec, pos + posShift, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6c907087b9d17cb5fc6ba0f1c8b983367a288a9"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NDMxOTg2", "url": "https://github.com/broadinstitute/picard/pull/1513#pullrequestreview-416431986", "createdAt": "2020-05-21T19:33:26Z", "commit": {"oid": "e6c907087b9d17cb5fc6ba0f1c8b983367a288a9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95a37e3082d8ace0a5106abbf068c363159a5b11", "author": {"user": {"login": "fleharty", "name": "Mark Fleharty"}}, "url": "https://github.com/broadinstitute/picard/commit/95a37e3082d8ace0a5106abbf068c363159a5b11", "committedDate": "2020-05-21T19:35:27Z", "message": "Adding comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3212, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}