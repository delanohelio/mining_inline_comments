{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNzk4MTIz", "number": 1556, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDoyOTo1NlrOEVBr9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDozNTo0NFrOEVB3Hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDgzMTkwOnYy", "diffSide": "RIGHT", "path": "src/main/java/picard/fingerprint/FingerprintChecker.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDoyOTo1NlrOG7jGeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNjoyMzo1NVrOG7n_Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA5NDI2NQ==", "bodyText": "Is it usual to log before throw in picard? Normally I would expect code to throw and then rely on the catch point to log. This is also usually shorter to write as code has (potentially) many throw points but few catch points.", "url": "https://github.com/broadinstitute/picard/pull/1556#discussion_r465094265", "createdAt": "2020-08-04T14:29:56Z", "author": {"login": "pshapiro4broad"}, "path": "src/main/java/picard/fingerprint/FingerprintChecker.java", "diffHunk": "@@ -575,6 +582,12 @@ public IntervalList getLociToGenotype(final Collection<Fingerprint> fingerprints\n             }\n         }\n \n+        if (!foundALocus && in.getFileHeader().getSortOrder()!= SAMFileHeader.SortOrder.coordinate) {\n+            final PicardException noReadsFound = new PicardException(String.format(\"Couldn't even find one locus with reads to fingerprint in file %s, which in addition isn't coordinate-sorted. Please sort the file and try again.\", samFile));\n+            log.error(noReadsFound);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "344cc06c573a2b2fb8a56921651518a4431eb530"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE3NDM0Ng==", "bodyText": "I used it because I wanted to see that the error that is thrown is what I expect...there was a bug previously and this test succeeded by failing in a different way....should change back.", "url": "https://github.com/broadinstitute/picard/pull/1556#discussion_r465174346", "createdAt": "2020-08-04T16:23:55Z", "author": {"login": "yfarjoun"}, "path": "src/main/java/picard/fingerprint/FingerprintChecker.java", "diffHunk": "@@ -575,6 +582,12 @@ public IntervalList getLociToGenotype(final Collection<Fingerprint> fingerprints\n             }\n         }\n \n+        if (!foundALocus && in.getFileHeader().getSortOrder()!= SAMFileHeader.SortOrder.coordinate) {\n+            final PicardException noReadsFound = new PicardException(String.format(\"Couldn't even find one locus with reads to fingerprint in file %s, which in addition isn't coordinate-sorted. Please sort the file and try again.\", samFile));\n+            log.error(noReadsFound);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA5NDI2NQ=="}, "originalCommit": {"oid": "344cc06c573a2b2fb8a56921651518a4431eb530"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDgzNDYzOnYy", "diffSide": "RIGHT", "path": "src/main/java/picard/fingerprint/FingerprintChecker.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDozMDoyNFrOG7jIEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDozMDoyNFrOG7jIEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA5NDY3Mw==", "bodyText": "whitespace\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (!foundALocus && in.getFileHeader().getSortOrder()!= SAMFileHeader.SortOrder.coordinate) {\n          \n          \n            \n                    if (!foundALocus && in.getFileHeader().getSortOrder() != SAMFileHeader.SortOrder.coordinate) {", "url": "https://github.com/broadinstitute/picard/pull/1556#discussion_r465094673", "createdAt": "2020-08-04T14:30:24Z", "author": {"login": "pshapiro4broad"}, "path": "src/main/java/picard/fingerprint/FingerprintChecker.java", "diffHunk": "@@ -575,6 +582,12 @@ public IntervalList getLociToGenotype(final Collection<Fingerprint> fingerprints\n             }\n         }\n \n+        if (!foundALocus && in.getFileHeader().getSortOrder()!= SAMFileHeader.SortOrder.coordinate) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "344cc06c573a2b2fb8a56921651518a4431eb530"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDgzNTQ4OnYy", "diffSide": "RIGHT", "path": "src/main/java/picard/fingerprint/FingerprintChecker.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDozMDozNVrOG7jIjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDozMDozNVrOG7jIjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA5NDc5OQ==", "bodyText": "whitespace\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                foundALocus=true;\n          \n          \n            \n                                foundALocus = true;", "url": "https://github.com/broadinstitute/picard/pull/1556#discussion_r465094799", "createdAt": "2020-08-04T14:30:35Z", "author": {"login": "pshapiro4broad"}, "path": "src/main/java/picard/fingerprint/FingerprintChecker.java", "diffHunk": "@@ -556,6 +562,7 @@ public IntervalList getLociToGenotype(final Collection<Fingerprint> fingerprints\n                 }\n \n                 if (fingerprintIdDetailsMap.containsKey(rg)) {\n+                    foundALocus=true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "344cc06c573a2b2fb8a56921651518a4431eb530"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDgzNzEyOnYy", "diffSide": "RIGHT", "path": "src/main/java/picard/fingerprint/FingerprintChecker.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDozMDo1NlrOG7jJjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDozMDo1NlrOG7jJjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA5NTA1Mg==", "bodyText": "whitespace\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(!in.hasIndex()){\n          \n          \n            \n                    if (!in.hasIndex()) {", "url": "https://github.com/broadinstitute/picard/pull/1556#discussion_r465095052", "createdAt": "2020-08-04T14:30:56Z", "author": {"login": "pshapiro4broad"}, "path": "src/main/java/picard/fingerprint/FingerprintChecker.java", "diffHunk": "@@ -480,6 +480,12 @@ public IntervalList getLociToGenotype(final Collection<Fingerprint> fingerprints\n \n         checkDictionaryGoodForFingerprinting(in.getFileHeader().getSequenceDictionary());\n \n+        if(!in.hasIndex()){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "344cc06c573a2b2fb8a56921651518a4431eb530"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNDg2MDQ2OnYy", "diffSide": "RIGHT", "path": "src/test/java/picard/fingerprint/FingerprintCheckerTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDozNTo0NFrOG7jXmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDozNTo0NFrOG7jXmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA5ODY0OQ==", "bodyText": "unnecessary new\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            new Object[]{\"NA12891.over.fingerprints.r1.sam\", true},\n          \n          \n            \n                           {\"NA12891.over.fingerprints.r1.sam\", true},", "url": "https://github.com/broadinstitute/picard/pull/1556#discussion_r465098649", "createdAt": "2020-08-04T14:35:44Z", "author": {"login": "pshapiro4broad"}, "path": "src/test/java/picard/fingerprint/FingerprintCheckerTest.java", "diffHunk": "@@ -151,11 +151,26 @@ public void testFingerprintSwapEqual(final File vcfFile, final File genotypesFil\n         }\n     }\n \n-    @Test(expectedExceptions = PicardException.class)\n-    public void testTerminateOnBadFile() {\n+    @DataProvider\n+    Object[][] samFilesforFingerprinting() {\n+        return new Object[][]{\n+                new Object[]{\"NA12891.over.fingerprints.r1.sam\", true},", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "344cc06c573a2b2fb8a56921651518a4431eb530"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 628, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}