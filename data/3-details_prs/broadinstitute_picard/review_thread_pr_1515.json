{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNDMzNTkw", "number": 1515, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNTowMzowOFrOEAI99A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzo1NToxN1rOEBdUKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NTgyMzg4OnYy", "diffSide": "RIGHT", "path": "src/main/java/picard/arrays/ArraysCallingMetricAccumulator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNTowMzowOVrOGbPDFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNTowOTo1N1rOGdOE5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTIxMTI4Nw==", "bodyText": "Given the way this class is used, I don't see why the code in setup() isn't done in the constructor directly.", "url": "https://github.com/broadinstitute/picard/pull/1515#discussion_r431211287", "createdAt": "2020-05-27T15:03:09Z", "author": {"login": "pshapiro4broad"}, "path": "src/main/java/picard/arrays/ArraysCallingMetricAccumulator.java", "diffHunk": "@@ -76,14 +77,15 @@\n                         detail.P95_GREEN = p95Green;\n                         detail.P95_RED = p95Red;\n                         detail.SCANNER_NAME = scannerName;\n+                        detail.PIPELINE_VERSION = pipelineVersion;\n                         return detail;\n                     }, true);\n \n     ArraysCallingMetricAccumulator(DbSnpBitSetUtil.DbSnpBitSets dbsnp) {\n         this.dbsnp = dbsnp;\n     }\n \n-    public void setup(final VCFHeader vcfHeader) {\n+    public void setup(final VCFHeader vcfHeader, final String pipelineVersion) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40d0420d54d9caa53b96f418f2d4bdfc3abc2e30"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI5MjUxNg==", "bodyText": "The code has been rewritten to not pass pipelineVersion to CollectArraysVariantCallingMetrics, so this suggestion isn't germane to the PR (and probably should be done elsewhere).", "url": "https://github.com/broadinstitute/picard/pull/1515#discussion_r433292516", "createdAt": "2020-06-01T15:09:57Z", "author": {"login": "gbggrant"}, "path": "src/main/java/picard/arrays/ArraysCallingMetricAccumulator.java", "diffHunk": "@@ -76,14 +77,15 @@\n                         detail.P95_GREEN = p95Green;\n                         detail.P95_RED = p95Red;\n                         detail.SCANNER_NAME = scannerName;\n+                        detail.PIPELINE_VERSION = pipelineVersion;\n                         return detail;\n                     }, true);\n \n     ArraysCallingMetricAccumulator(DbSnpBitSetUtil.DbSnpBitSets dbsnp) {\n         this.dbsnp = dbsnp;\n     }\n \n-    public void setup(final VCFHeader vcfHeader) {\n+    public void setup(final VCFHeader vcfHeader, final String pipelineVersion) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTIxMTI4Nw=="}, "originalCommit": {"oid": "40d0420d54d9caa53b96f418f2d4bdfc3abc2e30"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5OTAxMjU0OnYy", "diffSide": "RIGHT", "path": "testdata/picard/arrays/7991775143_R01C01_wo_optional_fields.vcf", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNToxMDozOFrOGdOGdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNToxMDozOFrOGdOGdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI5MjkxOA==", "bodyText": "Since this is an optional parameter, we should have one test without pipelineVersion set in the VCF.  It should allow that case.", "url": "https://github.com/broadinstitute/picard/pull/1515#discussion_r433292918", "createdAt": "2020-06-01T15:10:38Z", "author": {"login": "gbggrant"}, "path": "testdata/picard/arrays/7991775143_R01C01_wo_optional_fields.vcf", "diffHunk": "@@ -179,6 +179,7 @@\n ##p95Green=4251\n ##p95Red=5479\n ##picardVersion=2.20.3-17-g8331bf3-SNAPSHOT\n+##pipelineVersion=foo", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a39eafbdc36d7473b36ef045750dc1d85bb41ecd"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5OTYzNDk1OnYy", "diffSide": "RIGHT", "path": "src/main/java/picard/arrays/CollectArraysVariantCallingMetrics.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzo1MjozMVrOGdUMdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzo1MjozMVrOGdUMdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5Mjc1OA==", "bodyText": "I don\u2019t think you need to update the example. I would either add an example or remove the comment. Adding a TODO should be avoided if possible.", "url": "https://github.com/broadinstitute/picard/pull/1515#discussion_r433392758", "createdAt": "2020-06-01T17:52:31Z", "author": {"login": "pshapiro4broad"}, "path": "src/main/java/picard/arrays/CollectArraysVariantCallingMetrics.java", "diffHunk": "@@ -43,10 +43,12 @@\n                     \"<h4>Usage example:</h4>\" +\n                     \"<pre>\" +\n                     \"java -jar picard.jar CollectArraysVariantCallingMetrics \\\\<br />\" +\n+                    // TODO - ADD example", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d4ae986c6f8c686d186207732c052c0e97a84f0"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5OTY0MzI5OnYy", "diffSide": "RIGHT", "path": "src/main/java/picard/arrays/GtcToVcf.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzo1NToxN1rOGdUSFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzo1NToxN1rOGdUSFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5NDE5Nw==", "bodyText": "Since PIPELINE_VERSION is already a String you don\u2019t need to call toString\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        lines.add(new VCFHeaderLine(InfiniumVcfFields.PIPELINE_VERSION, PIPELINE_VERSION.toString()));\n          \n          \n            \n                        lines.add(new VCFHeaderLine(InfiniumVcfFields.PIPELINE_VERSION, PIPELINE_VERSION);", "url": "https://github.com/broadinstitute/picard/pull/1515#discussion_r433394197", "createdAt": "2020-06-01T17:55:17Z", "author": {"login": "pshapiro4broad"}, "path": "src/main/java/picard/arrays/GtcToVcf.java", "diffHunk": "@@ -538,6 +541,9 @@ private VCFHeader createVCFHeader(final Build37ExtendedIlluminaManifest manifest\n         if (EXPECTED_GENDER != null) {\n             lines.add(new VCFHeaderLine(InfiniumVcfFields.EXPECTED_GENDER, EXPECTED_GENDER));\n         }\n+        if (PIPELINE_VERSION != null) {\n+            lines.add(new VCFHeaderLine(InfiniumVcfFields.PIPELINE_VERSION, PIPELINE_VERSION.toString()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d4ae986c6f8c686d186207732c052c0e97a84f0"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 605, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}