{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3Mzg1MjM0", "number": 4373, "title": "Fixed stacktraces caused by incorrect JNDI lookup", "bodyText": "Fixed processing default local interface\n\ncause:\n\nthe stateless bean implemented some interface from library\nthe interface was annotated only with @Path\nneither interface nor class was annotated by @Local or @Remote (then @Local is implicit in ejb3.2)\n\n\n\n\n\nImplemented support of Stateless.name attribute\n\nit is used in JNDI names on Payara\n\n\n\nLimited default local interfaces\n\npartial impl of the ejb 3.2 spec 4.9.7, some interfaces are not allowed\n\n\n\nSigned-off-by: David Matejcek dmatej@seznam.cz", "createdAt": "2020-01-27T09:16:37Z", "url": "https://github.com/eclipse-ee4j/jersey/pull/4373", "merged": true, "mergeCommit": {"oid": "e17b2b171470706f87a53e79abee92db7b7e608c"}, "closed": true, "closedAt": "2020-02-19T11:31:02Z", "author": {"login": "dmatej"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-ZMjHAH2gAyMzY3Mzg1MjM0OjEzZDE0NjVlNzNhMzNhODc5NzM1OWU1YTZlNGYxMTlmYTM0ZmMwMWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcF0zZDAFqTM2MTAzNTQ4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "13d1465e73a33a8797359e5a6e4f119fa34fc01c", "author": {"user": {"login": "dmatej", "name": "David Mat\u011bj\u010dek"}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/13d1465e73a33a8797359e5a6e4f119fa34fc01c", "committedDate": "2020-01-27T09:19:34Z", "message": "Fixed stacktraces caused by incorrect JNDI lookup\n\n* Fixed processing default local interface\n  - cause:\n    - the stateless bean implemented some interface from library\n    - the interface was annotated only with @Path\n    - neither interface nor class was annotated by @Local or @Remote (then @Local is implicit in ejb3.2)\n\n* Implemented support of Stateless.name attribute\n  - it is used in JNDI names on Payara\n\n* Limited default local interfaces\n  - partial impl of the ejb 3.2 spec 4.9.7, some interfaces are not allowed\n\nSigned-off-by: David Matejcek <dmatej@seznam.cz>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NjEwODA2", "url": "https://github.com/eclipse-ee4j/jersey/pull/4373#pullrequestreview-356610806", "createdAt": "2020-02-11T12:18:03Z", "commit": {"oid": "13d1465e73a33a8797359e5a6e4f119fa34fc01c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMjoxODowM1rOFoG13g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMjoxODowM1rOFoG13g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU5OTQ1NA==", "bodyText": "Why don't you deal with Stateful, too?", "url": "https://github.com/eclipse-ee4j/jersey/pull/4373#discussion_r377599454", "createdAt": "2020-02-11T12:18:03Z", "author": {"login": "jansupol"}, "path": "containers/glassfish/jersey-gf-ejb/src/main/java/org/glassfish/jersey/gf/ejb/internal/EjbComponentProvider.java", "diffHunk": "@@ -92,23 +95,43 @@\n \n         final InitialContext ctx;\n         final Class<T> clazz;\n+        final String beanName;\n         final EjbComponentProvider ejbProvider;\n \n         @SuppressWarnings(\"unchecked\")\n         @Override\n         public T get() {\n             try {\n-                return (T) lookup(ctx, clazz, clazz.getSimpleName(), ejbProvider);\n+                return (T) lookup(ctx, clazz, beanName, ejbProvider);\n             } catch (NamingException ex) {\n                 Logger.getLogger(ApplicationHandler.class.getName()).log(Level.SEVERE, null, ex);\n                 return null;\n             }\n         }\n \n+        private static <T> String getBeanName(final Class<T> clazz) {\n+            final Stateless stateless = clazz.getAnnotation(Stateless.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13d1465e73a33a8797359e5a6e4f119fa34fc01c"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5Nzc5NzIy", "url": "https://github.com/eclipse-ee4j/jersey/pull/4373#pullrequestreview-359779722", "createdAt": "2020-02-17T14:37:17Z", "commit": {"oid": "13d1465e73a33a8797359e5a6e4f119fa34fc01c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjI4NTQw", "url": "https://github.com/eclipse-ee4j/jersey/pull/4373#pullrequestreview-360228540", "createdAt": "2020-02-18T10:32:24Z", "commit": {"oid": "13d1465e73a33a8797359e5a6e4f119fa34fc01c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMDM1NDgx", "url": "https://github.com/eclipse-ee4j/jersey/pull/4373#pullrequestreview-361035481", "createdAt": "2020-02-19T11:26:54Z", "commit": {"oid": "13d1465e73a33a8797359e5a6e4f119fa34fc01c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1270, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}