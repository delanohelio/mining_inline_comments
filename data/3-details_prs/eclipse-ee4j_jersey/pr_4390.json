{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNDM2MjE3", "number": 4390, "title": "Fix #3433 - Multiple cookies with same name are not supported", "bodyText": "Signed-off-by: tvallin thibault.vallin@oracle.com\nNewCookie :\n- pick the latest expiration date\n- if same date, take the longest path string\nCookie :\n- pick the longest string", "createdAt": "2020-02-07T14:23:34Z", "url": "https://github.com/eclipse-ee4j/jersey/pull/4390", "merged": true, "mergeCommit": {"oid": "e5af7d692ceb00d98c37980f7be65344dc948d46"}, "closed": true, "closedAt": "2020-02-18T11:17:35Z", "author": {"login": "tvallin"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcB__FkAH2gAyMzcyNDM2MjE3Ojc0M2MzZmEyYzUxMGM4N2NhZjI2NDkzNjY5NjA2YzMyNjZmMDgxY2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFf1zuAFqTM2MDI0Nzg5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "743c3fa2c510c87caf26493669606c3266f081ce", "author": {"user": {"login": "tvallin", "name": "Thibault Vallin"}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/743c3fa2c510c87caf26493669606c3266f081ce", "committedDate": "2020-02-07T14:12:56Z", "message": "Fix 3433 - Multiple cookies with same name are not supported\n\nSigned-off-by: tvallin <thibault.vallin@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "392a1c0ecc84f9f619b1f18211b0e45f5353a073", "author": {"user": {"login": "tvallin", "name": "Thibault Vallin"}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/392a1c0ecc84f9f619b1f18211b0e45f5353a073", "committedDate": "2020-02-07T14:49:30Z", "message": "Fix 3433 - Check style fix\n\nSigned-off-by: tvallin <thibault.vallin@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NTgzMjEw", "url": "https://github.com/eclipse-ee4j/jersey/pull/4390#pullrequestreview-357583210", "createdAt": "2020-02-12T16:09:57Z", "commit": {"oid": "392a1c0ecc84f9f619b1f18211b0e45f5353a073"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjowOTo1N1rOFo0z3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNjowOTo1N1rOFo0z3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1MjYwNQ==", "bodyText": "Please use Calendar or LocalDateTime to set the dates you want, to prevent parsing exception with foreign locales", "url": "https://github.com/eclipse-ee4j/jersey/pull/4390#discussion_r378352605", "createdAt": "2020-02-12T16:09:57Z", "author": {"login": "jansupol"}, "path": "tests/e2e-core-common/src/test/java/org/glassfish/jersey/tests/e2e/common/message/internal/HeaderUtilsTest.java", "diffHunk": "@@ -180,4 +184,97 @@ public void testAsHeaderString() throws Exception {\n         final String result = HeaderUtils.asHeaderString(values, null);\n         assertEquals(\"value,[null],\" + uri.toASCIIString(), result);\n     }\n+\n+    @Test\n+    public void testgetPreferedNewCookie(){\n+\n+        Date earliestDate;\n+        Date latestDate;\n+\n+        try {\n+            earliestDate = HttpDateFormat.readDate(\"Fri, 1 Jan 2020 00:00:00 GMT\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "392a1c0ecc84f9f619b1f18211b0e45f5353a073"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MDA3MTMz", "url": "https://github.com/eclipse-ee4j/jersey/pull/4390#pullrequestreview-358007133", "createdAt": "2020-02-13T07:43:34Z", "commit": {"oid": "392a1c0ecc84f9f619b1f18211b0e45f5353a073"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwNzo0MzozNVrOFpJs8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwNzo0NDo1MFrOFpJukg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY5NDg5Ng==", "bodyText": "expiry date can be NULL. Isn't it better to use maxAge value?", "url": "https://github.com/eclipse-ee4j/jersey/pull/4390#discussion_r378694896", "createdAt": "2020-02-13T07:43:35Z", "author": {"login": "senivam"}, "path": "core-common/src/main/java/org/glassfish/jersey/message/internal/HeaderUtils.java", "diffHunk": "@@ -298,6 +299,24 @@ public static void checkHeaderChanges(final Map<String, String> headersSnapshot,\n         }\n     }\n \n+    /**\n+     * Compare two NewCookies having the same name. See documentation RFC.\n+     *\n+     * @param one    NewCookie to be compared.\n+     * @param second NewCookie to be compared.\n+     * @return the prefered NewCookie according to rules :\n+     *              - the latest expiration date.\n+     *              - if same expiration date, the longest path.\n+     */\n+    public static NewCookie getPreferedNewCookie(NewCookie one, NewCookie second) {\n+\n+        if (!one.getExpiry().equals(second.getExpiry())){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "392a1c0ecc84f9f619b1f18211b0e45f5353a073"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY5NTMxNA==", "bodyText": "Preferred ? may be rename the whole method to getPreferredCookie?", "url": "https://github.com/eclipse-ee4j/jersey/pull/4390#discussion_r378695314", "createdAt": "2020-02-13T07:44:50Z", "author": {"login": "senivam"}, "path": "core-common/src/main/java/org/glassfish/jersey/message/internal/HeaderUtils.java", "diffHunk": "@@ -298,6 +299,24 @@ public static void checkHeaderChanges(final Map<String, String> headersSnapshot,\n         }\n     }\n \n+    /**\n+     * Compare two NewCookies having the same name. See documentation RFC.\n+     *\n+     * @param one    NewCookie to be compared.\n+     * @param second NewCookie to be compared.\n+     * @return the prefered NewCookie according to rules :\n+     *              - the latest expiration date.\n+     *              - if same expiration date, the longest path.\n+     */\n+    public static NewCookie getPreferedNewCookie(NewCookie one, NewCookie second) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "392a1c0ecc84f9f619b1f18211b0e45f5353a073"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f54fe96853ac168a12c5ca005da25b8bfb96aa98", "author": {"user": {"login": "tvallin", "name": "Thibault Vallin"}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/f54fe96853ac168a12c5ca005da25b8bfb96aa98", "committedDate": "2020-02-13T09:58:46Z", "message": "Fix #3433 - Use maxAge instead of Date + method renaming\n\nSigned-off-by: tvallin <thibault.vallin@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a64354a1fa5fce19e3aaf612a7f5c7cb5744098a", "author": {"user": {"login": "tvallin", "name": "Thibault Vallin"}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/a64354a1fa5fce19e3aaf612a7f5c7cb5744098a", "committedDate": "2020-02-14T08:44:35Z", "message": "Fix #3433 - Use calendar for test + comparator for cookie\n\nSigned-off-by: tvallin <thibault.vallin@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7693649863afee8a1e6824f9e8a45493d2e97cc1", "author": {"user": {"login": "tvallin", "name": "Thibault Vallin"}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/7693649863afee8a1e6824f9e8a45493d2e97cc1", "committedDate": "2020-02-14T10:06:23Z", "message": "Fix #3433 - fix compareNullable return value\n\nSigned-off-by: tvallin <thibault.vallin@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a72ab1f637ad7a51866c7bd6dbe4108ba4db4571", "author": {"user": {"login": "tvallin", "name": "Thibault Vallin"}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/a72ab1f637ad7a51866c7bd6dbe4108ba4db4571", "committedDate": "2020-02-17T15:07:20Z", "message": "Fix #3433 - remove compareNullable method + fix calendar test\n\nSigned-off-by: tvallin <thibault.vallin@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5OTg1ODUx", "url": "https://github.com/eclipse-ee4j/jersey/pull/4390#pullrequestreview-359985851", "createdAt": "2020-02-17T22:16:36Z", "commit": {"oid": "a72ab1f637ad7a51866c7bd6dbe4108ba4db4571"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjQ3ODk0", "url": "https://github.com/eclipse-ee4j/jersey/pull/4390#pullrequestreview-360247894", "createdAt": "2020-02-18T11:01:32Z", "commit": {"oid": "a72ab1f637ad7a51866c7bd6dbe4108ba4db4571"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1278, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}