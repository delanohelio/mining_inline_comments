{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2NTg1MzE5", "number": 4615, "title": "Allow for org.glassfish.jersey.servlet.ServletContainer in web.xml", "bodyText": "without init parameters and without the Application subclass in the app\nSigned-off-by: Jan Supol jan.supol@oracle.com", "createdAt": "2020-10-20T08:24:00Z", "url": "https://github.com/eclipse-ee4j/jersey/pull/4615", "merged": true, "mergeCommit": {"oid": "bb56997f4a48981efed8bd949ef88e97f79d5419"}, "closed": true, "closedAt": "2020-10-27T11:18:46Z", "author": {"login": "jansupol"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUU9G1AFqTUxMjQ3ODAxMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWTUmcAFqTUxNjcxNzI3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyNDc4MDEz", "url": "https://github.com/eclipse-ee4j/jersey/pull/4615#pullrequestreview-512478013", "createdAt": "2020-10-20T08:52:17Z", "commit": {"oid": "552df9fb408d64fea763b10e8dbfeb7465072cae"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwODo1MjoxN1rOHkxq-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwODo1OTo0NlrOHkx-7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMyNDYwMA==", "bodyText": "no instances of LinkedList are created, this can be removed", "url": "https://github.com/eclipse-ee4j/jersey/pull/4615#discussion_r508324600", "createdAt": "2020-10-20T08:52:17Z", "author": {"login": "senivam"}, "path": "containers/jersey-servlet/src/main/java/org/glassfish/jersey/servlet/init/JerseyServletContainerInitializer.java", "diffHunk": "@@ -21,6 +21,7 @@\n import java.util.HashMap;\n import java.util.HashSet;\n import java.util.LinkedHashSet;\n+import java.util.LinkedList;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "552df9fb408d64fea763b10e8dbfeb7465072cae"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMyNDkxMw==", "bodyText": "this could be final (as most of variables declared here)", "url": "https://github.com/eclipse-ee4j/jersey/pull/4615#discussion_r508324913", "createdAt": "2020-10-20T08:52:45Z", "author": {"login": "senivam"}, "path": "containers/jersey-servlet/src/main/java/org/glassfish/jersey/servlet/init/JerseyServletContainerInitializer.java", "diffHunk": "@@ -129,11 +130,13 @@ public void onStartup(Set<Class<?>> classes, final ServletContext servletContext\n \n     private void onStartupImpl(final Set<Class<?>> classes, final ServletContext servletContext) throws ServletException {\n         // first see if there are any application classes in the web app\n+        Set<ServletRegistration> registrationsWithApplication = new HashSet<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "552df9fb408d64fea763b10e8dbfeb7465072cae"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMyOTcwOQ==", "bodyText": "it seems LinkedSet can contain NULL, so it's possible to\nregistrationsWithApplication.add(addServletWithApplication(servletContext, applicationClass, classes));\n\nafterwards it's beeing checked for (contains(..)) but context.getServletRegistrations().values() would not have NULLs so it won't be an issue.\nAll of that is just to eliminate an instance creation... can be ignored though/but that instance (just in case) can also be final :)", "url": "https://github.com/eclipse-ee4j/jersey/pull/4615#discussion_r508329709", "createdAt": "2020-10-20T08:59:46Z", "author": {"login": "senivam"}, "path": "containers/jersey-servlet/src/main/java/org/glassfish/jersey/servlet/init/JerseyServletContainerInitializer.java", "diffHunk": "@@ -145,17 +148,21 @@ private void onStartupImpl(final Set<Class<?>> classes, final ServletContext ser\n                         if (sr instanceof ServletRegistration) {\n                             addServletWithExistingRegistration(servletContext, (ServletRegistration) sr,\n                                     applicationClass, classes);\n+                            registrationsWithApplication.add((ServletRegistration) sr);\n                         }\n                     }\n                 } else {\n                     // app not handled by any servlet/filter -> add it\n-                    addServletWithApplication(servletContext, applicationClass, classes);\n+                    ServletRegistration sr = addServletWithApplication(servletContext, applicationClass, classes);\n+                    if (sr != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "552df9fb408d64fea763b10e8dbfeb7465072cae"}, "originalPosition": 40}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "552df9fb408d64fea763b10e8dbfeb7465072cae", "author": {"user": {"login": "jansupol", "name": null}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/552df9fb408d64fea763b10e8dbfeb7465072cae", "committedDate": "2020-10-19T19:50:19Z", "message": "Allow for org.glassfish.jersey.servlet.ServletContainer class name without init parameters in web.xml\n\nSigned-off-by: Jan Supol <jan.supol@oracle.com>"}, "afterCommit": {"oid": "1a35ca09379aac2e2a5552c063bb76af2be8b3d6", "author": {"user": {"login": "jansupol", "name": null}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/1a35ca09379aac2e2a5552c063bb76af2be8b3d6", "committedDate": "2020-10-20T13:40:21Z", "message": "Allow for org.glassfish.jersey.servlet.ServletContainer class name without init parameters in web.xml\n\nSigned-off-by: Jan Supol <jan.supol@oracle.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f4058bc37b753f2102a049050abd12e25270268", "author": {"user": {"login": "jansupol", "name": null}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/7f4058bc37b753f2102a049050abd12e25270268", "committedDate": "2020-10-20T15:08:09Z", "message": "Allow for org.glassfish.jersey.servlet.ServletContainer class name without init parameters in web.xml\n\nSigned-off-by: Jan Supol <jan.supol@oracle.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a35ca09379aac2e2a5552c063bb76af2be8b3d6", "author": {"user": {"login": "jansupol", "name": null}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/1a35ca09379aac2e2a5552c063bb76af2be8b3d6", "committedDate": "2020-10-20T13:40:21Z", "message": "Allow for org.glassfish.jersey.servlet.ServletContainer class name without init parameters in web.xml\n\nSigned-off-by: Jan Supol <jan.supol@oracle.com>"}, "afterCommit": {"oid": "7f4058bc37b753f2102a049050abd12e25270268", "author": {"user": {"login": "jansupol", "name": null}}, "url": "https://github.com/eclipse-ee4j/jersey/commit/7f4058bc37b753f2102a049050abd12e25270268", "committedDate": "2020-10-20T15:08:09Z", "message": "Allow for org.glassfish.jersey.servlet.ServletContainer class name without init parameters in web.xml\n\nSigned-off-by: Jan Supol <jan.supol@oracle.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyOTE2NDI5", "url": "https://github.com/eclipse-ee4j/jersey/pull/4615#pullrequestreview-512916429", "createdAt": "2020-10-20T16:23:27Z", "commit": {"oid": "7f4058bc37b753f2102a049050abd12e25270268"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NzE3Mjcy", "url": "https://github.com/eclipse-ee4j/jersey/pull/4615#pullrequestreview-516717272", "createdAt": "2020-10-26T12:14:16Z", "commit": {"oid": "7f4058bc37b753f2102a049050abd12e25270268"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1194, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}