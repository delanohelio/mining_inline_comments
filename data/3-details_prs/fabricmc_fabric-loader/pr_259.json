{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NzY3MjA4", "number": 259, "title": "Handle up-coming pre-releases as beta not release candidate", "bodyText": "", "createdAt": "2020-06-18T21:16:28Z", "url": "https://github.com/FabricMC/fabric-loader/pull/259", "merged": true, "mergeCommit": {"oid": "a5a5edf4da0f9517b8d8da1bbd9cd8348515b41e"}, "closed": true, "closedAt": "2020-06-30T19:22:55Z", "author": {"login": "modmuss50"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcslJ2oAH2gAyNDM2NzY3MjA4OjBhNDYzNTk4NDcwZDI2ODI3OWU1OWZiZmQ1Yjc5NDgwYjNmYTkwM2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuI2wjgFqTQzNTk5ODE3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0a463598470d268279e59fbfd5b79480b3fa903b", "author": {"user": {"login": "modmuss50", "name": "modmuss50"}}, "url": "https://github.com/FabricMC/fabric-loader/commit/0a463598470d268279e59fbfd5b79480b3fa903b", "committedDate": "2020-06-18T21:16:00Z", "message": "Handle up-coming pre-releases as beta not release candidate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "307918201ecd4474131a8a87b5dedd5a4fc30c2c", "author": {"user": {"login": "modmuss50", "name": "modmuss50"}}, "url": "https://github.com/FabricMC/fabric-loader/commit/307918201ecd4474131a8a87b5dedd5a4fc30c2c", "committedDate": "2020-06-18T22:08:51Z", "message": "Use semver to detect legacy versions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjk0NTU3", "url": "https://github.com/FabricMC/fabric-loader/pull/259#pullrequestreview-433694557", "createdAt": "2020-06-18T22:42:33Z", "commit": {"oid": "307918201ecd4474131a8a87b5dedd5a4fc30c2c"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMjo0MjozM1rOGmCgJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMjo0MzoyNlrOGmChHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU0MDA3MQ==", "bodyText": "the error should include the contents of the release var", "url": "https://github.com/FabricMC/fabric-loader/pull/259#discussion_r442540071", "createdAt": "2020-06-18T22:42:33Z", "author": {"login": "sfPlayer1"}, "path": "src/main/java/net/fabricmc/loader/minecraft/McVersionLookup.java", "diffHunk": "@@ -290,7 +293,20 @@ private static String normalizeVersion(String name, String release) {\n \t\t\t\tmatcher = PRE_RELEASE_PATTERN.matcher(name);\n \n \t\t\t\tif (matcher.matches()) {\n-\t\t\t\t\tname = String.format(\"rc.%s\", matcher.group(1));\n+\t\t\t\t\tboolean legacyVersion;\n+\n+\t\t\t\t\ttry {\n+\t\t\t\t\t\tlegacyVersion = SemanticVersionPredicateParser.create(\"<=1.16\").test(new SemanticVersionImpl(release, false));\n+\t\t\t\t\t} catch (VersionParsingException e) {\n+\t\t\t\t\t\tthrow new RuntimeException(\"Failed to parse version\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "307918201ecd4474131a8a87b5dedd5a4fc30c2c"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU0MDMxOQ==", "bodyText": "except", "url": "https://github.com/FabricMC/fabric-loader/pull/259#discussion_r442540319", "createdAt": "2020-06-18T22:43:26Z", "author": {"login": "sfPlayer1"}, "path": "src/main/java/net/fabricmc/loader/minecraft/McVersionLookup.java", "diffHunk": "@@ -290,7 +293,20 @@ private static String normalizeVersion(String name, String release) {\n \t\t\t\tmatcher = PRE_RELEASE_PATTERN.matcher(name);\n \n \t\t\t\tif (matcher.matches()) {\n-\t\t\t\t\tname = String.format(\"rc.%s\", matcher.group(1));\n+\t\t\t\t\tboolean legacyVersion;\n+\n+\t\t\t\t\ttry {\n+\t\t\t\t\t\tlegacyVersion = SemanticVersionPredicateParser.create(\"<=1.16\").test(new SemanticVersionImpl(release, false));\n+\t\t\t\t\t} catch (VersionParsingException e) {\n+\t\t\t\t\t\tthrow new RuntimeException(\"Failed to parse version\");\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t// Mark pre-releases as beta expect for legacy versions where these were previously marked as rc", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "307918201ecd4474131a8a87b5dedd5a4fc30c2c"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ad1301554b880964aa9e4e2e93cddfe53ae3ef7", "author": {"user": {"login": "modmuss50", "name": "modmuss50"}}, "url": "https://github.com/FabricMC/fabric-loader/commit/5ad1301554b880964aa9e4e2e93cddfe53ae3ef7", "committedDate": "2020-06-23T16:33:45Z", "message": "feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1OTk4MTc3", "url": "https://github.com/FabricMC/fabric-loader/pull/259#pullrequestreview-435998177", "createdAt": "2020-06-23T17:25:39Z", "commit": {"oid": "5ad1301554b880964aa9e4e2e93cddfe53ae3ef7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3443, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}