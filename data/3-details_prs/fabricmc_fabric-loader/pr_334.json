{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMDc2Nzk0", "number": 334, "title": "Add aliases to Fabric Loader", "bodyText": "This PR does 1 thing:\n\nAdds aliases to dependency handling, so mods can depend on a mod's alias instead of its mod id.\n\nPlease review, there are some changes that I made that I wasn't sure of the standard of.", "createdAt": "2020-11-17T01:27:39Z", "url": "https://github.com/FabricMC/fabric-loader/pull/334", "merged": true, "mergeCommit": {"oid": "1a0c22d709ffafcd74fd3003524bb8f7be7ce9aa"}, "closed": true, "closedAt": "2021-01-10T18:10:25Z", "author": {"login": "AMereBagatelle"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddMQ7BgH2gAyNTIyMDc2Nzk0OjUzNjE4MDIyOGUxZmRkNGEwZTJjM2RiYjA0NTc4YjgwYTM3MjFmMGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdu12hEAFqTU2NDg4NjgzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "536180228e1fdd4a0e2c3dbb04578b80a3721f0a", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/536180228e1fdd4a0e2c3dbb04578b80a3721f0a", "committedDate": "2020-11-16T21:58:23Z", "message": "Add metadata entry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aea23a95e16e53b3a4f35134ac20436344f4a8bd", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/aea23a95e16e53b3a4f35134ac20436344f4a8bd", "committedDate": "2020-11-17T01:24:32Z", "message": "Add alias functionality"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxOTczODAy", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-531973802", "createdAt": "2020-11-17T02:21:04Z", "commit": {"oid": "aea23a95e16e53b3a4f35134ac20436344f4a8bd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMjoyMTowNFrOH0h0Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMjoyNTo0MVrOH0h6DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg0MjA0Ng==", "bodyText": "we don't use star imports typically. Old codestyle has some but we are moving away from that", "url": "https://github.com/FabricMC/fabric-loader/pull/334#discussion_r524842046", "createdAt": "2020-11-17T02:21:04Z", "author": {"login": "i509VCB"}, "path": "src/main/java/net/fabricmc/loader/discovery/ModResolver.java", "diffHunk": "@@ -19,28 +19,23 @@\n import com.google.common.jimfs.Configuration;\n import com.google.common.jimfs.Jimfs;\n import com.google.common.jimfs.PathType;\n-\n import net.fabricmc.loader.FabricLoader;\n+import net.fabricmc.loader.api.Version;\n import net.fabricmc.loader.api.metadata.ModDependency;\n import net.fabricmc.loader.game.GameProvider.BuiltinMod;\n-import net.fabricmc.loader.api.Version;\n import net.fabricmc.loader.launch.common.FabricLauncherBase;\n import net.fabricmc.loader.lib.gson.MalformedJsonException;\n import net.fabricmc.loader.metadata.LoaderModMetadata;\n-import net.fabricmc.loader.metadata.NestedJarEntry;\n import net.fabricmc.loader.metadata.ModMetadataParser;\n+import net.fabricmc.loader.metadata.NestedJarEntry;\n import net.fabricmc.loader.metadata.ParseMetadataException;\n import net.fabricmc.loader.util.FileSystemUtil;\n import net.fabricmc.loader.util.UrlConversionException;\n import net.fabricmc.loader.util.UrlUtil;\n import net.fabricmc.loader.util.sat4j.core.VecInt;\n import net.fabricmc.loader.util.sat4j.minisat.SolverFactory;\n-import net.fabricmc.loader.util.sat4j.specs.ContradictionException;\n-import net.fabricmc.loader.util.sat4j.specs.IProblem;\n-import net.fabricmc.loader.util.sat4j.specs.ISolver;\n-import net.fabricmc.loader.util.sat4j.specs.IVecInt;\n import net.fabricmc.loader.util.sat4j.specs.TimeoutException;\n-\n+import net.fabricmc.loader.util.sat4j.specs.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aea23a95e16e53b3a4f35134ac20436344f4a8bd"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg0MzUzMw==", "bodyText": "Why not flip the condition here so you can just set the variable value from the nextString", "url": "https://github.com/FabricMC/fabric-loader/pull/334#discussion_r524843533", "createdAt": "2020-11-17T02:25:41Z", "author": {"login": "i509VCB"}, "path": "src/main/java/net/fabricmc/loader/metadata/V1ModMetadataParser.java", "diffHunk": "@@ -220,7 +214,29 @@ static LoaderModMetadata parse(Logger logger, JsonReader reader) throws IOExcept\n \n \t\tModMetadataParser.logWarningMessages(logger, id, warnings);\n \n-\t\treturn new V1ModMetadata(id, version, environment, entrypoints, jars, mixins, accessWidener, depends, recommends, suggests, conflicts, breaks, requires, name, description, authors, contributors, contact, license, icon, languageAdapters, customValues);\n+\t\treturn new V1ModMetadata(id, version, aliases, environment, entrypoints, jars, mixins, accessWidener, depends, recommends, suggests, conflicts, breaks, requires, name, description, authors, contributors, contact, license, icon, languageAdapters, customValues);\n+\t}\n+\n+\tprivate static void readAliases(JsonReader reader, List<String> aliases) throws IOException, ParseMetadataException {\n+\t\tif (reader.peek() != JsonToken.BEGIN_ARRAY) {\n+\t\t\tthrow new ParseMetadataException(\"Aliases must be in an array\");\n+\t\t}\n+\n+\t\treader.beginArray();\n+\n+\t\twhile (reader.hasNext()) {\n+\t\t\tString alias;\n+\n+\t\t\tif (reader.peek() == JsonToken.STRING) {\n+\t\t\t\talias = reader.nextString();\n+\t\t\t} else {\n+\t\t\t\tthrow new ParseMetadataException(\"Aliases must be a string\", reader);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aea23a95e16e53b3a4f35134ac20436344f4a8bd"}, "originalPosition": 184}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8f161c3f3d80694734042d85d91cf37e5c99e52", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/f8f161c3f3d80694734042d85d91cf37e5c99e52", "committedDate": "2020-11-17T13:04:49Z", "message": "Revert IDEA autoformatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f54284092a1e59b9d248bc3aa24410e59707d180", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/f54284092a1e59b9d248bc3aa24410e59707d180", "committedDate": "2020-11-17T13:06:28Z", "message": "Flip condition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaa3bdfb5e82e61d1ea382a847e0a8de23ba323d", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/aaa3bdfb5e82e61d1ea382a847e0a8de23ba323d", "committedDate": "2020-11-17T13:19:13Z", "message": "Allow mods to be searched by alias"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cdadc4a0d81417de0217ed38c534b19cd9e9b62", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/3cdadc4a0d81417de0217ed38c534b19cd9e9b62", "committedDate": "2020-11-17T22:56:03Z", "message": "Fix errors being still thrown even if alias is found"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1be523b0e0addd1e4170d196009487195cb9713f", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/1be523b0e0addd1e4170d196009487195cb9713f", "committedDate": "2020-11-19T15:22:11Z", "message": "Add logger statement to warn about using a alias"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "237829b53d8bf52689b16c84047c2a1b4faa3610", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/237829b53d8bf52689b16c84047c2a1b4faa3610", "committedDate": "2020-11-19T17:23:47Z", "message": "Lock logger complaint behind isDevelopmentEnvironment check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NzAwOTkw", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-535700990", "createdAt": "2020-11-20T19:01:24Z", "commit": {"oid": "237829b53d8bf52689b16c84047c2a1b4faa3610"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NzA3NzA2", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-535707706", "createdAt": "2020-11-20T19:11:57Z", "commit": {"oid": "237829b53d8bf52689b16c84047c2a1b4faa3610"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxOToxMTo1N1rOH3dfxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxOToxMTo1N1rOH3dfxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkxNjk5Nw==", "bodyText": "Make this an unmodifiableList, see the maps bellow.", "url": "https://github.com/FabricMC/fabric-loader/pull/334#discussion_r527916997", "createdAt": "2020-11-20T19:11:57Z", "author": {"login": "modmuss50"}, "path": "src/main/java/net/fabricmc/loader/metadata/V1ModMetadata.java", "diffHunk": "@@ -76,9 +79,10 @@\n \t// Optional (custom values)\n \tprivate final Map<String, CustomValue> customValues;\n \n-\tV1ModMetadata(String id, Version version, ModEnvironment environment, Map<String, List<EntrypointMetadata>> entrypoints, Collection<NestedJarEntry> jars, Collection<MixinEntry> mixins, /* @Nullable */ String accessWidener, Map<String, ModDependency> depends, Map<String, ModDependency> recommends, Map<String, ModDependency> suggests, Map<String, ModDependency> conflicts, Map<String, ModDependency> breaks, Map<String, ModDependency> requires, /* @Nullable */ String name, /* @Nullable */String description, Collection<Person> authors, Collection<Person> contributors, /* @Nullable */ContactInformation contact, Collection<String> license, IconEntry icon, Map<String, String> languageAdapters, Map<String, CustomValue> customValues) {\n+\tV1ModMetadata(String id, Version version, Collection<String> aliases, ModEnvironment environment, Map<String, List<EntrypointMetadata>> entrypoints, Collection<NestedJarEntry> jars, Collection<MixinEntry> mixins, /* @Nullable */ String accessWidener, Map<String, ModDependency> depends, Map<String, ModDependency> recommends, Map<String, ModDependency> suggests, Map<String, ModDependency> conflicts, Map<String, ModDependency> breaks, Map<String, ModDependency> requires, /* @Nullable */ String name, /* @Nullable */String description, Collection<Person> authors, Collection<Person> contributors, /* @Nullable */ContactInformation contact, Collection<String> license, IconEntry icon, Map<String, String> languageAdapters, Map<String, CustomValue> customValues) {\n \t\tthis.id = id;\n \t\tthis.version = version;\n+\t\tthis.aliases = aliases;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "237829b53d8bf52689b16c84047c2a1b4faa3610"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NzExMDI1", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-535711025", "createdAt": "2020-11-20T19:16:39Z", "commit": {"oid": "237829b53d8bf52689b16c84047c2a1b4faa3610"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxOToxNjozOVrOH3dqJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxOToxNjozOVrOH3dqJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkxOTY1Mw==", "bodyText": "I'm not sure if this is sufficient to resolve a normal set of mods - what happens if there is an older version of fabric-api (with an id of \"fabric\") in the mods folder as well as a newer one (with an id of \"fabric-api\" and an alias of \"fabric\")? Depending on the order of the hash map I think this might either load both or only one? (Also this doesn't seem to have duplication checking in FabricLoader.addMod() - I don't think that's enough to fix this, but it would be able to at least detect when this happens)", "url": "https://github.com/FabricMC/fabric-loader/pull/334#discussion_r527919653", "createdAt": "2020-11-20T19:16:39Z", "author": {"login": "AlexIIL"}, "path": "src/main/java/net/fabricmc/loader/discovery/ModResolver.java", "diffHunk": "@@ -98,6 +98,9 @@ private static IVecInt toVecInt(IntStream stream) {\n \t\tfor (ModCandidateSet mcs : modCandidateSetMap.values()) {\n \t\t\tCollection<ModCandidate> s = mcs.toSortedSet();\n \t\t\tmodCandidateMap.put(mcs.getModId(), s);\n+\t\t\tfor (String modAlias : mcs.getModAliases()) {\n+\t\t\t\tmodCandidateMap.put(modAlias, s);\n+\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "237829b53d8bf52689b16c84047c2a1b4faa3610"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NzEyOTc0", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-535712974", "createdAt": "2020-11-20T19:19:41Z", "commit": {"oid": "237829b53d8bf52689b16c84047c2a1b4faa3610"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxOToxOTo0MVrOH3dwJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxOToxOTo0MVrOH3dwJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkyMTE5MQ==", "bodyText": "Am I just missing something or is there no duplication checking? Lets say 2 mods define the same aliases this should fail in a similar way to duplicate mods.", "url": "https://github.com/FabricMC/fabric-loader/pull/334#discussion_r527921191", "createdAt": "2020-11-20T19:19:41Z", "author": {"login": "modmuss50"}, "path": "src/main/java/net/fabricmc/loader/FabricLoader.java", "diffHunk": "@@ -333,6 +333,9 @@ protected void addMod(ModCandidate candidate) throws ModResolutionException {\n \t\tModContainer container = new ModContainer(info, originUrl);\n \t\tmods.add(container);\n \t\tmodMap.put(info.getId(), container);\n+\t\tfor (String alias : info.getAliases()) {\n+\t\t\tmodMap.put(alias, container);\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "237829b53d8bf52689b16c84047c2a1b4faa3610"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4269c1525fa30b825c2713e9f0ceee6b2134a08b", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/4269c1525fa30b825c2713e9f0ceee6b2134a08b", "committedDate": "2020-11-20T19:36:58Z", "message": "Make aliases unmodifiable in V1ModMetadata"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "635f5c03ac8c1cb8355d7dd33b5dc2c3989bf8b7", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/635f5c03ac8c1cb8355d7dd33b5dc2c3989bf8b7", "committedDate": "2020-11-20T19:41:52Z", "message": "Add duplication check, resolve ModMuss change request"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "663b5e5de8fb1f1767ba9cc73fbc535b18f9283c", "author": {"user": {"login": "AlexIIL", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/663b5e5de8fb1f1767ba9cc73fbc535b18f9283c", "committedDate": "2020-11-20T19:57:11Z", "message": "Fix advanced mod resolving not detecting duplicates correctly."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "377428fc034c2267180d25985f4be092cb161e6a", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/377428fc034c2267180d25985f4be092cb161e6a", "committedDate": "2020-11-20T20:02:23Z", "message": "Merge pull request #1 from AlexIIL/alexiil-alias-resolver-fix\n\nFix advanced mod resolving not working correctly for aliases..."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1OTU2NTU4", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-535956558", "createdAt": "2020-11-21T10:27:23Z", "commit": {"oid": "377428fc034c2267180d25985f4be092cb161e6a"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxMDoyNzoyM1rOH3tgXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQxMDozNToxOVrOH3tjLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODE3OTI5Mg==", "bodyText": "We can inline the reader.nextString() call right into the aliases.add(String) method", "url": "https://github.com/FabricMC/fabric-loader/pull/334#discussion_r528179292", "createdAt": "2020-11-21T10:27:23Z", "author": {"login": "i509VCB"}, "path": "src/main/java/net/fabricmc/loader/metadata/V1ModMetadataParser.java", "diffHunk": "@@ -220,7 +226,29 @@ static LoaderModMetadata parse(Logger logger, JsonReader reader) throws IOExcept\n \n \t\tModMetadataParser.logWarningMessages(logger, id, warnings);\n \n-\t\treturn new V1ModMetadata(id, version, environment, entrypoints, jars, mixins, accessWidener, depends, recommends, suggests, conflicts, breaks, requires, name, description, authors, contributors, contact, license, icon, languageAdapters, customValues);\n+\t\treturn new V1ModMetadata(id, version, aliases, environment, entrypoints, jars, mixins, accessWidener, depends, recommends, suggests, conflicts, breaks, requires, name, description, authors, contributors, contact, license, icon, languageAdapters, customValues);\n+\t}\n+\n+\tprivate static void readAliases(JsonReader reader, List<String> aliases) throws IOException, ParseMetadataException {\n+\t\tif (reader.peek() != JsonToken.BEGIN_ARRAY) {\n+\t\t\tthrow new ParseMetadataException(\"Aliases must be in an array\");\n+\t\t}\n+\n+\t\treader.beginArray();\n+\n+\t\twhile (reader.hasNext()) {\n+\t\t\tString alias;\n+\n+\t\t\tif (reader.peek() != JsonToken.STRING) {\n+\t\t\t\tthrow new ParseMetadataException(\"Aliases must be a string\", reader);\n+\t\t\t}\n+\n+\t\t\talias = reader.nextString();\n+\n+\t\t\taliases.add(alias);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "377428fc034c2267180d25985f4be092cb161e6a"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODE3OTM2Ng==", "bodyText": "Since this is referring to a specific entry.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tthrow new ParseMetadataException(\"Aliases must be a string\", reader);\n          \n          \n            \n            \t\t\t\tthrow new ParseMetadataException(\"Alias must be a string\", reader);", "url": "https://github.com/FabricMC/fabric-loader/pull/334#discussion_r528179366", "createdAt": "2020-11-21T10:28:24Z", "author": {"login": "i509VCB"}, "path": "src/main/java/net/fabricmc/loader/metadata/V1ModMetadataParser.java", "diffHunk": "@@ -220,7 +226,29 @@ static LoaderModMetadata parse(Logger logger, JsonReader reader) throws IOExcept\n \n \t\tModMetadataParser.logWarningMessages(logger, id, warnings);\n \n-\t\treturn new V1ModMetadata(id, version, environment, entrypoints, jars, mixins, accessWidener, depends, recommends, suggests, conflicts, breaks, requires, name, description, authors, contributors, contact, license, icon, languageAdapters, customValues);\n+\t\treturn new V1ModMetadata(id, version, aliases, environment, entrypoints, jars, mixins, accessWidener, depends, recommends, suggests, conflicts, breaks, requires, name, description, authors, contributors, contact, license, icon, languageAdapters, customValues);\n+\t}\n+\n+\tprivate static void readAliases(JsonReader reader, List<String> aliases) throws IOException, ParseMetadataException {\n+\t\tif (reader.peek() != JsonToken.BEGIN_ARRAY) {\n+\t\t\tthrow new ParseMetadataException(\"Aliases must be in an array\");\n+\t\t}\n+\n+\t\treader.beginArray();\n+\n+\t\twhile (reader.hasNext()) {\n+\t\t\tString alias;\n+\n+\t\t\tif (reader.peek() != JsonToken.STRING) {\n+\t\t\t\tthrow new ParseMetadataException(\"Aliases must be a string\", reader);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "377428fc034c2267180d25985f4be092cb161e6a"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODE4MDAxMg==", "bodyText": "Not in scope of this PR, but it may a neat thing to look into for a GameProvider's builtin mods to possibly provide aliases.", "url": "https://github.com/FabricMC/fabric-loader/pull/334#discussion_r528180012", "createdAt": "2020-11-21T10:35:19Z", "author": {"login": "i509VCB"}, "path": "src/main/java/net/fabricmc/loader/metadata/BuiltinModMetadata.java", "diffHunk": "@@ -76,6 +76,11 @@ public String getId() {\n \t\treturn id;\n \t}\n \n+\t@Override\n+\tpublic Collection<String> getAliases() {\n+\t\treturn Collections.emptyList();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "377428fc034c2267180d25985f4be092cb161e6a"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11b5b40889e61f9bad1c48af24f218ee5a4df2c8", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/11b5b40889e61f9bad1c48af24f218ee5a4df2c8", "committedDate": "2020-11-21T17:49:54Z", "message": "Update src/main/java/net/fabricmc/loader/metadata/V1ModMetadataParser.java\r\n\r\nFix metadata exception string\n\nCo-authored-by: i509VCB <i509vcb@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9057abba4fc3d3f4e06b88883105895c1c7a518e", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/9057abba4fc3d3f4e06b88883105895c1c7a518e", "committedDate": "2020-11-21T17:56:32Z", "message": "Inline reader.nextString call"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8c473ce11f91a45030ace9d6e7aa060fa1f00fa", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/e8c473ce11f91a45030ace9d6e7aa060fa1f00fa", "committedDate": "2020-11-21T17:57:04Z", "message": "Merge remote-tracking branch 'origin/master'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MDExMTEw", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-536011110", "createdAt": "2020-11-21T21:49:20Z", "commit": {"oid": "e8c473ce11f91a45030ace9d6e7aa060fa1f00fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNTA1MjMz", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-540505233", "createdAt": "2020-11-29T18:34:58Z", "commit": {"oid": "e8c473ce11f91a45030ace9d6e7aa060fa1f00fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMTkwMjg5", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-542190289", "createdAt": "2020-12-01T18:39:59Z", "commit": {"oid": "e8c473ce11f91a45030ace9d6e7aa060fa1f00fa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxODozOTo1OVrOH86puA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxODozOTo1OVrOH86puA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzYzNzU2MA==", "bodyText": "This appears to be broken when giving fabric loader an alias:\n{\n  \"schemaVersion\": 1,\n  \"id\": \"fabricloader\",\n  \"aliases\": [\n    \"testmod\"\n  ]\nFails with a duplicate mod id of fabricloader.", "url": "https://github.com/FabricMC/fabric-loader/pull/334#discussion_r533637560", "createdAt": "2020-12-01T18:39:59Z", "author": {"login": "modmuss50"}, "path": "src/main/java/net/fabricmc/loader/discovery/ModResolver.java", "diffHunk": "@@ -92,12 +92,15 @@ private static IVecInt toVecInt(IntStream stream) {\n \tpublic Map<String, ModCandidate> findCompatibleSet(Logger logger, Map<String, ModCandidateSet> modCandidateSetMap) throws ModResolutionException {\n \t\t// First, map all ModCandidateSets to Set<ModCandidate>s.\n \t\tboolean isAdvanced = false;\n-\t\tMap<String, Collection<ModCandidate>> modCandidateMap = new HashMap<>();\n+\t\tMap<String, List<ModCandidate>> modCandidateMap = new HashMap<>();\n \t\tSet<String> mandatoryMods = new HashSet<>();\n \n \t\tfor (ModCandidateSet mcs : modCandidateSetMap.values()) {\n \t\t\tCollection<ModCandidate> s = mcs.toSortedSet();\n-\t\t\tmodCandidateMap.put(mcs.getModId(), s);\n+\t\t\tmodCandidateMap.computeIfAbsent(mcs.getModId(), i -> new ArrayList<>()).addAll(s);\n+\t\t\tfor (String modAlias : mcs.getModAliases()) {\n+\t\t\t\tmodCandidateMap.computeIfAbsent(modAlias, i -> new ArrayList<>()).addAll(s);\n+\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8c473ce11f91a45030ace9d6e7aa060fa1f00fa"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMjAzNzM0", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-542203734", "createdAt": "2020-12-01T18:57:48Z", "commit": {"oid": "e8c473ce11f91a45030ace9d6e7aa060fa1f00fa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfd1721cfd86fdd06921b338b059f8952c27afd1", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/bfd1721cfd86fdd06921b338b059f8952c27afd1", "committedDate": "2020-12-01T19:40:36Z", "message": "Fix aliases breaking on the non-advanced path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c503f7a58fb3e0f190ae8b67dac7bafc50f76219", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/c503f7a58fb3e0f190ae8b67dac7bafc50f76219", "committedDate": "2020-12-01T20:07:49Z", "message": "Check mod id aliases when running loader\nRemove accidental inclusion of testmod alias"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MDY3NDI3", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-544067427", "createdAt": "2020-12-03T15:24:24Z", "commit": {"oid": "c503f7a58fb3e0f190ae8b67dac7bafc50f76219"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f749138ba76151c2c8d062be8f2a2dbc8263d8a", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/1f749138ba76151c2c8d062be8f2a2dbc8263d8a", "committedDate": "2020-12-04T18:37:57Z", "message": "Rename aliases to provides"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "249266fd00566edf2b0d2964b210ec256c95be00", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/249266fd00566edf2b0d2964b210ec256c95be00", "committedDate": "2020-12-04T18:43:16Z", "message": "Oops missed some"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MjMwMTMw", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-545230130", "createdAt": "2020-12-04T19:14:23Z", "commit": {"oid": "249266fd00566edf2b0d2964b210ec256c95be00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffbf0f360c171b77612e72488c39b28cedcc92c9", "author": {"user": {"login": "AMereBagatelle", "name": null}}, "url": "https://github.com/FabricMC/fabric-loader/commit/ffbf0f360c171b77612e72488c39b28cedcc92c9", "committedDate": "2020-12-06T13:57:44Z", "message": "Oops, missed some v2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNTMxNTcx", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-560531571", "createdAt": "2020-12-31T18:31:39Z", "commit": {"oid": "ffbf0f360c171b77612e72488c39b28cedcc92c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNjIwMDcw", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-560620070", "createdAt": "2021-01-02T04:29:09Z", "commit": {"oid": "ffbf0f360c171b77612e72488c39b28cedcc92c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0ODg2ODM0", "url": "https://github.com/FabricMC/fabric-loader/pull/334#pullrequestreview-564886834", "createdAt": "2021-01-10T18:02:16Z", "commit": {"oid": "ffbf0f360c171b77612e72488c39b28cedcc92c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3402, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}