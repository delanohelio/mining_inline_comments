{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MTY1MDk5", "number": 1044, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODoxMzozNFrOD8mHUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxODo1NTo1MlrOD8-1EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODY1NjE3OnYy", "diffSide": "RIGHT", "path": "docs/prompt_behavior.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODoxMzozNFrOGVolUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODozMTowNVrOGVpLQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMzODE5NA==", "bodyText": "File a bug", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1044#discussion_r425338194", "createdAt": "2020-05-14T18:13:34Z", "author": {"login": "iambmelt"}, "path": "docs/prompt_behavior.md", "diffHunk": "@@ -0,0 +1,16 @@\n+# Android Prompt & PromptBehavior\n+\n+| Product | Prompt            | Embedded Behavior                                                                                                                                                                                                                                          | (Embedded) OpenId Prompt Equivalent                                                              | Sent to Broker?      | Broker Behavior                                                                                                                                                                                                                                                                                                        | (Broker) OpenId Prompt Equivalent                         |\n+|---------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n+| ADAL    | `null`            | Equivalent to `Auto`                                                                                                                                                                                                                                       | (unsent)                                                                                         | N/A                  | Equivalent to `Auto`                                                                                                                                                                                                                                                                                                   | (unsent)                                                  |\n+| ADAL    | `Auto`            | Silent request is first attempted. If unsuccessful, switch to interactive.                                                                                                                                                                                 | (unsent)                                                                                         | Yes                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `Always`          | The user will be prompted for credentials even if cached tokens already exist.                                                                                                                                                                             | `login`                                                                                          | Yes, augmented       | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `REFRESH_SESSION` | Interactively reauthorizes the user. If cookies are available in WebView, the user will not be prompted for credentials and the UI will dismiss automatically.                                                                                             | `refresh_session`                                                                                | Yes, but unsupported | Unsupported by V2 endpoint                                                                                                                                                                                                                                                                                             | (unsent)                                                  |\n+| ADAL    | `FORCE_PROMPT`    | If no broker is installed, behaves equivalent to `Always`. If broker _is_ installed, a prompt for credentials will be shown.                                                                                                                               | `login`                                                                                          | Yes                  | Equivalent to `Always` in embedded flow.                                                                                                                                                                                                                                                                               | `login`                                                   |\n+| MSAL    | `null`            | Equivalent to `WHEN_REQUIRED`                                                                                                                                                                                                                              | (unsent)                                                                                         | N/A                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| MSAL    | `SELECT_ACCOUNT`  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, sends query param `prompt=select_account` to `/authorize` endpoint. Shows a list of accounts the user can choose from to authorize.                                             | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | Yes                  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, `AccountChooserActivity` is shown. Account picker inside of ESTS/WebView is _never_ shown, as the user would have already pre-selected an account via `AccountChooserActivity`. If user selects '`Add Account`', no `prompt=login` is sent. | (unsent - account selection via `AccountChooserActivity`) |\n+| MSAL    | `LOGIN`           | Sends query param `prompt=login` to `/authorize` endpoint. The user will _always_ be prompted for credentials by the service.                                                                                                                              | `login`                                                                                          | Yes                  | Same as embedded flow.                                                                                                                                                                                                                                                                                                 | `login`                                                   |\n+| MSAL    | `CONSENT`         | Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before. `// TODO what happens for pre-authz apps?`                                                              | `consent`                                                                                        | Yes                  | BUG: User is not shown prompt for consent. <br/>Expected: User shown consent page                                                                                                                                                                                                                                      | `consent`                                                 |\n+| MSAL    | `WHEN_REQUIRED`   | If `login_hint` is supplied, no `prompt` query parameter will be sent to the `/authorize` endpoint. The user _may_ be preompted to login or grant consent as required by the service/application. If no `login_hint` is supplied, `prompt=select_account`. | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | N/A                  | Same as embedded flow                                                                                                                                                                                                                                                                                                  | (unsent - account selection via `AccountChooserActivity`) |\n+\n+>Note: `CONSENT` not implemented inside of broker with MSAL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bea3dd872aee20436916d03ddc8897f961c2aa0"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMzODM5NQ==", "bodyText": "Make table reflect desired behavior once bug is filed", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1044#discussion_r425338395", "createdAt": "2020-05-14T18:13:58Z", "author": {"login": "iambmelt"}, "path": "docs/prompt_behavior.md", "diffHunk": "@@ -0,0 +1,16 @@\n+# Android Prompt & PromptBehavior\n+\n+| Product | Prompt            | Embedded Behavior                                                                                                                                                                                                                                          | (Embedded) OpenId Prompt Equivalent                                                              | Sent to Broker?      | Broker Behavior                                                                                                                                                                                                                                                                                                        | (Broker) OpenId Prompt Equivalent                         |\n+|---------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n+| ADAL    | `null`            | Equivalent to `Auto`                                                                                                                                                                                                                                       | (unsent)                                                                                         | N/A                  | Equivalent to `Auto`                                                                                                                                                                                                                                                                                                   | (unsent)                                                  |\n+| ADAL    | `Auto`            | Silent request is first attempted. If unsuccessful, switch to interactive.                                                                                                                                                                                 | (unsent)                                                                                         | Yes                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `Always`          | The user will be prompted for credentials even if cached tokens already exist.                                                                                                                                                                             | `login`                                                                                          | Yes, augmented       | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `REFRESH_SESSION` | Interactively reauthorizes the user. If cookies are available in WebView, the user will not be prompted for credentials and the UI will dismiss automatically.                                                                                             | `refresh_session`                                                                                | Yes, but unsupported | Unsupported by V2 endpoint                                                                                                                                                                                                                                                                                             | (unsent)                                                  |\n+| ADAL    | `FORCE_PROMPT`    | If no broker is installed, behaves equivalent to `Always`. If broker _is_ installed, a prompt for credentials will be shown.                                                                                                                               | `login`                                                                                          | Yes                  | Equivalent to `Always` in embedded flow.                                                                                                                                                                                                                                                                               | `login`                                                   |\n+| MSAL    | `null`            | Equivalent to `WHEN_REQUIRED`                                                                                                                                                                                                                              | (unsent)                                                                                         | N/A                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| MSAL    | `SELECT_ACCOUNT`  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, sends query param `prompt=select_account` to `/authorize` endpoint. Shows a list of accounts the user can choose from to authorize.                                             | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | Yes                  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, `AccountChooserActivity` is shown. Account picker inside of ESTS/WebView is _never_ shown, as the user would have already pre-selected an account via `AccountChooserActivity`. If user selects '`Add Account`', no `prompt=login` is sent. | (unsent - account selection via `AccountChooserActivity`) |\n+| MSAL    | `LOGIN`           | Sends query param `prompt=login` to `/authorize` endpoint. The user will _always_ be prompted for credentials by the service.                                                                                                                              | `login`                                                                                          | Yes                  | Same as embedded flow.                                                                                                                                                                                                                                                                                                 | `login`                                                   |\n+| MSAL    | `CONSENT`         | Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before. `// TODO what happens for pre-authz apps?`                                                              | `consent`                                                                                        | Yes                  | BUG: User is not shown prompt for consent. <br/>Expected: User shown consent page                                                                                                                                                                                                                                      | `consent`                                                 |\n+| MSAL    | `WHEN_REQUIRED`   | If `login_hint` is supplied, no `prompt` query parameter will be sent to the `/authorize` endpoint. The user _may_ be preompted to login or grant consent as required by the service/application. If no `login_hint` is supplied, `prompt=select_account`. | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | N/A                  | Same as embedded flow                                                                                                                                                                                                                                                                                                  | (unsent - account selection via `AccountChooserActivity`) |\n+\n+>Note: `CONSENT` not implemented inside of broker with MSAL", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMzODE5NA=="}, "originalCommit": {"oid": "4bea3dd872aee20436916d03ddc8897f961c2aa0"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM0NzkwNA==", "bodyText": "Bug filed here:\nAzureAD/ad-accounts-for-android#1294\nContains link to VSO PBI", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1044#discussion_r425347904", "createdAt": "2020-05-14T18:31:05Z", "author": {"login": "iambmelt"}, "path": "docs/prompt_behavior.md", "diffHunk": "@@ -0,0 +1,16 @@\n+# Android Prompt & PromptBehavior\n+\n+| Product | Prompt            | Embedded Behavior                                                                                                                                                                                                                                          | (Embedded) OpenId Prompt Equivalent                                                              | Sent to Broker?      | Broker Behavior                                                                                                                                                                                                                                                                                                        | (Broker) OpenId Prompt Equivalent                         |\n+|---------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n+| ADAL    | `null`            | Equivalent to `Auto`                                                                                                                                                                                                                                       | (unsent)                                                                                         | N/A                  | Equivalent to `Auto`                                                                                                                                                                                                                                                                                                   | (unsent)                                                  |\n+| ADAL    | `Auto`            | Silent request is first attempted. If unsuccessful, switch to interactive.                                                                                                                                                                                 | (unsent)                                                                                         | Yes                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `Always`          | The user will be prompted for credentials even if cached tokens already exist.                                                                                                                                                                             | `login`                                                                                          | Yes, augmented       | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `REFRESH_SESSION` | Interactively reauthorizes the user. If cookies are available in WebView, the user will not be prompted for credentials and the UI will dismiss automatically.                                                                                             | `refresh_session`                                                                                | Yes, but unsupported | Unsupported by V2 endpoint                                                                                                                                                                                                                                                                                             | (unsent)                                                  |\n+| ADAL    | `FORCE_PROMPT`    | If no broker is installed, behaves equivalent to `Always`. If broker _is_ installed, a prompt for credentials will be shown.                                                                                                                               | `login`                                                                                          | Yes                  | Equivalent to `Always` in embedded flow.                                                                                                                                                                                                                                                                               | `login`                                                   |\n+| MSAL    | `null`            | Equivalent to `WHEN_REQUIRED`                                                                                                                                                                                                                              | (unsent)                                                                                         | N/A                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| MSAL    | `SELECT_ACCOUNT`  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, sends query param `prompt=select_account` to `/authorize` endpoint. Shows a list of accounts the user can choose from to authorize.                                             | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | Yes                  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, `AccountChooserActivity` is shown. Account picker inside of ESTS/WebView is _never_ shown, as the user would have already pre-selected an account via `AccountChooserActivity`. If user selects '`Add Account`', no `prompt=login` is sent. | (unsent - account selection via `AccountChooserActivity`) |\n+| MSAL    | `LOGIN`           | Sends query param `prompt=login` to `/authorize` endpoint. The user will _always_ be prompted for credentials by the service.                                                                                                                              | `login`                                                                                          | Yes                  | Same as embedded flow.                                                                                                                                                                                                                                                                                                 | `login`                                                   |\n+| MSAL    | `CONSENT`         | Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before. `// TODO what happens for pre-authz apps?`                                                              | `consent`                                                                                        | Yes                  | BUG: User is not shown prompt for consent. <br/>Expected: User shown consent page                                                                                                                                                                                                                                      | `consent`                                                 |\n+| MSAL    | `WHEN_REQUIRED`   | If `login_hint` is supplied, no `prompt` query parameter will be sent to the `/authorize` endpoint. The user _may_ be preompted to login or grant consent as required by the service/application. If no `login_hint` is supplied, `prompt=select_account`. | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | N/A                  | Same as embedded flow                                                                                                                                                                                                                                                                                                  | (unsent - account selection via `AccountChooserActivity`) |\n+\n+>Note: `CONSENT` not implemented inside of broker with MSAL", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMzODE5NA=="}, "originalCommit": {"oid": "4bea3dd872aee20436916d03ddc8897f961c2aa0"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0OTIxMzg4OnYy", "diffSide": "RIGHT", "path": "docs/prompt_behavior.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMTowMzoxNlrOGVuH2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMToyNDoyNVrOGVuwoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQyODk1Mw==", "bodyText": "Got the update from PM team: PreAuthZ apps simply ignore this param", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1044#discussion_r425428953", "createdAt": "2020-05-14T21:03:16Z", "author": {"login": "iambmelt"}, "path": "docs/prompt_behavior.md", "diffHunk": "@@ -0,0 +1,14 @@\n+# Android Prompt & PromptBehavior\n+\n+| Product | Prompt            | Embedded Behavior                                                                                                                                                                                                                                          | (Embedded) OpenId Prompt Equivalent                                                              | Sent to Broker?      | Broker Behavior                                                                                                                                                                                                                                                                                                        | (Broker) OpenId Prompt Equivalent                         |\n+|---------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n+| ADAL    | `null`            | Equivalent to `Auto`                                                                                                                                                                                                                                       | (unsent)                                                                                         | N/A                  | Equivalent to `Auto`                                                                                                                                                                                                                                                                                                   | (unsent)                                                  |\n+| ADAL    | `Auto`            | Silent request is first attempted. If unsuccessful, switch to interactive.                                                                                                                                                                                 | (unsent)                                                                                         | Yes                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `Always`          | The user will be prompted for credentials even if cached tokens already exist.                                                                                                                                                                             | `login`                                                                                          | Yes, augmented       | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `REFRESH_SESSION` | Interactively reauthorizes the user. If cookies are available in WebView, the user will not be prompted for credentials and the UI will dismiss automatically.                                                                                             | `refresh_session`                                                                                | Yes, but unsupported | Unsupported by V2 endpoint                                                                                                                                                                                                                                                                                             | (unsent)                                                  |\n+| ADAL    | `FORCE_PROMPT`    | If no broker is installed, behaves equivalent to `Always`. If broker _is_ installed, a prompt for credentials will be shown.                                                                                                                               | `login`                                                                                          | Yes                  | Equivalent to `Always` in embedded flow.                                                                                                                                                                                                                                                                               | `login`                                                   |\n+| MSAL    | `null`            | Equivalent to `WHEN_REQUIRED`                                                                                                                                                                                                                              | (unsent)                                                                                         | N/A                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| MSAL    | `SELECT_ACCOUNT`  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, sends query param `prompt=select_account` to `/authorize` endpoint. Shows a list of accounts the user can choose from to authorize.                                             | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | Yes                  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, `AccountChooserActivity` is shown. Account picker inside of ESTS/WebView is _never_ shown, as the user would have already pre-selected an account via `AccountChooserActivity`. If user selects '`Add Account`', no `prompt=login` is sent. | (unsent - account selection via `AccountChooserActivity`) |\n+| MSAL    | `LOGIN`           | Sends query param `prompt=login` to `/authorize` endpoint. The user will _always_ be prompted for credentials by the service.                                                                                                                              | `login`                                                                                          | Yes                  | Same as embedded flow.                                                                                                                                                                                                                                                                                                 | `login`                                                   |\n+| MSAL    | `CONSENT`         | Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before. `// TODO what happens for pre-authz apps?`                                                              | `consent`                                                                                        | Yes                  |  Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before.                                                                                                                                                                                                                                      | `consent`                                                 |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa77d4bd5f749b514b899c8f22d8954636932586"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQzOTM5Mw==", "bodyText": "Updated in d122373", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1044#discussion_r425439393", "createdAt": "2020-05-14T21:24:25Z", "author": {"login": "iambmelt"}, "path": "docs/prompt_behavior.md", "diffHunk": "@@ -0,0 +1,14 @@\n+# Android Prompt & PromptBehavior\n+\n+| Product | Prompt            | Embedded Behavior                                                                                                                                                                                                                                          | (Embedded) OpenId Prompt Equivalent                                                              | Sent to Broker?      | Broker Behavior                                                                                                                                                                                                                                                                                                        | (Broker) OpenId Prompt Equivalent                         |\n+|---------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n+| ADAL    | `null`            | Equivalent to `Auto`                                                                                                                                                                                                                                       | (unsent)                                                                                         | N/A                  | Equivalent to `Auto`                                                                                                                                                                                                                                                                                                   | (unsent)                                                  |\n+| ADAL    | `Auto`            | Silent request is first attempted. If unsuccessful, switch to interactive.                                                                                                                                                                                 | (unsent)                                                                                         | Yes                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `Always`          | The user will be prompted for credentials even if cached tokens already exist.                                                                                                                                                                             | `login`                                                                                          | Yes, augmented       | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `REFRESH_SESSION` | Interactively reauthorizes the user. If cookies are available in WebView, the user will not be prompted for credentials and the UI will dismiss automatically.                                                                                             | `refresh_session`                                                                                | Yes, but unsupported | Unsupported by V2 endpoint                                                                                                                                                                                                                                                                                             | (unsent)                                                  |\n+| ADAL    | `FORCE_PROMPT`    | If no broker is installed, behaves equivalent to `Always`. If broker _is_ installed, a prompt for credentials will be shown.                                                                                                                               | `login`                                                                                          | Yes                  | Equivalent to `Always` in embedded flow.                                                                                                                                                                                                                                                                               | `login`                                                   |\n+| MSAL    | `null`            | Equivalent to `WHEN_REQUIRED`                                                                                                                                                                                                                              | (unsent)                                                                                         | N/A                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| MSAL    | `SELECT_ACCOUNT`  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, sends query param `prompt=select_account` to `/authorize` endpoint. Shows a list of accounts the user can choose from to authorize.                                             | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | Yes                  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, `AccountChooserActivity` is shown. Account picker inside of ESTS/WebView is _never_ shown, as the user would have already pre-selected an account via `AccountChooserActivity`. If user selects '`Add Account`', no `prompt=login` is sent. | (unsent - account selection via `AccountChooserActivity`) |\n+| MSAL    | `LOGIN`           | Sends query param `prompt=login` to `/authorize` endpoint. The user will _always_ be prompted for credentials by the service.                                                                                                                              | `login`                                                                                          | Yes                  | Same as embedded flow.                                                                                                                                                                                                                                                                                                 | `login`                                                   |\n+| MSAL    | `CONSENT`         | Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before. `// TODO what happens for pre-authz apps?`                                                              | `consent`                                                                                        | Yes                  |  Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before.                                                                                                                                                                                                                                      | `consent`                                                 |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQyODk1Mw=="}, "originalCommit": {"oid": "aa77d4bd5f749b514b899c8f22d8954636932586"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MjcwNTQ1OnYy", "diffSide": "RIGHT", "path": "docs/prompt_behavior.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxODo1NTo1MlrOGWQWEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQxOTowODoyMFrOGWcExA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk4OTY1MQ==", "bodyText": "Probable typo: preompted -> prompted", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1044#discussion_r425989651", "createdAt": "2020-05-15T18:55:52Z", "author": {"login": "MariusVolkhart"}, "path": "docs/prompt_behavior.md", "diffHunk": "@@ -0,0 +1,14 @@\n+# Android Prompt & PromptBehavior\n+\n+| Product | Prompt            | Embedded Behavior                                                                                                                                                                                                                                          | (Embedded) OpenId Prompt Equivalent                                                              | Sent to Broker?      | Broker Behavior                                                                                                                                                                                                                                                                                                        | (Broker) OpenId Prompt Equivalent                         |\n+|---------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n+| ADAL    | `null`            | Equivalent to `Auto`                                                                                                                                                                                                                                       | (unsent)                                                                                         | N/A                  | Equivalent to `Auto`                                                                                                                                                                                                                                                                                                   | (unsent)                                                  |\n+| ADAL    | `Auto`            | Silent request is first attempted. If unsuccessful, switch to interactive.                                                                                                                                                                                 | (unsent)                                                                                         | Yes                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `Always`          | The user will be prompted for credentials even if cached tokens already exist.                                                                                                                                                                             | `login`                                                                                          | Yes, augmented       | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `REFRESH_SESSION` | Interactively reauthorizes the user. If cookies are available in WebView, the user will not be prompted for credentials and the UI will dismiss automatically.                                                                                             | `refresh_session`                                                                                | Yes, but unsupported | Unsupported by V2 endpoint                                                                                                                                                                                                                                                                                             | (unsent)                                                  |\n+| ADAL    | `FORCE_PROMPT`    | If no broker is installed, behaves equivalent to `Always`. If broker _is_ installed, a prompt for credentials will be shown.                                                                                                                               | `login`                                                                                          | Yes                  | Equivalent to `Always` in embedded flow.                                                                                                                                                                                                                                                                               | `login`                                                   |\n+| MSAL    | `null`            | Equivalent to `WHEN_REQUIRED`                                                                                                                                                                                                                              | (unsent)                                                                                         | N/A                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| MSAL    | `SELECT_ACCOUNT`  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, sends query param `prompt=select_account` to `/authorize` endpoint. Shows a list of accounts the user can choose from to authorize.                                             | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | Yes                  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, `AccountChooserActivity` is shown. Account picker inside of ESTS/WebView is _never_ shown, as the user would have already pre-selected an account via `AccountChooserActivity`. If user selects '`Add Account`', no `prompt=login` is sent. | (unsent - account selection via `AccountChooserActivity`) |\n+| MSAL    | `LOGIN`           | Sends query param `prompt=login` to `/authorize` endpoint. The user will _always_ be prompted for credentials by the service.                                                                                                                              | `login`                                                                                          | Yes                  | Same as embedded flow.                                                                                                                                                                                                                                                                                                 | `login`                                                   |\n+| MSAL    | `CONSENT`         | Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before. This param will be ignored by 1P apps, as these apps are pre-consented via M365 TOC.                                                              | `consent`                                                                                        | Yes                  |  Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before.                                                                                                                                                                                                                                      | `consent`                                                 |\n+| MSAL    | `WHEN_REQUIRED`   | If `login_hint` is supplied, no `prompt` query parameter will be sent to the `/authorize` endpoint. The user _may_ be preompted to login or grant consent as required by the service/application. If no `login_hint` is supplied, `prompt=select_account`. | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | N/A                  | Same as embedded flow                                                                                                                                                                                                                                                                                                  | (unsent - account selection via `AccountChooserActivity`) |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d12237313c27dc75f4c3b5a863113b49bcdd09f4"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE4MTgyOA==", "bodyText": "7c077ed", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1044#discussion_r426181828", "createdAt": "2020-05-16T19:08:20Z", "author": {"login": "iambmelt"}, "path": "docs/prompt_behavior.md", "diffHunk": "@@ -0,0 +1,14 @@\n+# Android Prompt & PromptBehavior\n+\n+| Product | Prompt            | Embedded Behavior                                                                                                                                                                                                                                          | (Embedded) OpenId Prompt Equivalent                                                              | Sent to Broker?      | Broker Behavior                                                                                                                                                                                                                                                                                                        | (Broker) OpenId Prompt Equivalent                         |\n+|---------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n+| ADAL    | `null`            | Equivalent to `Auto`                                                                                                                                                                                                                                       | (unsent)                                                                                         | N/A                  | Equivalent to `Auto`                                                                                                                                                                                                                                                                                                   | (unsent)                                                  |\n+| ADAL    | `Auto`            | Silent request is first attempted. If unsuccessful, switch to interactive.                                                                                                                                                                                 | (unsent)                                                                                         | Yes                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `Always`          | The user will be prompted for credentials even if cached tokens already exist.                                                                                                                                                                             | `login`                                                                                          | Yes, augmented       | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| ADAL    | `REFRESH_SESSION` | Interactively reauthorizes the user. If cookies are available in WebView, the user will not be prompted for credentials and the UI will dismiss automatically.                                                                                             | `refresh_session`                                                                                | Yes, but unsupported | Unsupported by V2 endpoint                                                                                                                                                                                                                                                                                             | (unsent)                                                  |\n+| ADAL    | `FORCE_PROMPT`    | If no broker is installed, behaves equivalent to `Always`. If broker _is_ installed, a prompt for credentials will be shown.                                                                                                                               | `login`                                                                                          | Yes                  | Equivalent to `Always` in embedded flow.                                                                                                                                                                                                                                                                               | `login`                                                   |\n+| MSAL    | `null`            | Equivalent to `WHEN_REQUIRED`                                                                                                                                                                                                                              | (unsent)                                                                                         | N/A                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |\n+| MSAL    | `SELECT_ACCOUNT`  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, sends query param `prompt=select_account` to `/authorize` endpoint. Shows a list of accounts the user can choose from to authorize.                                             | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | Yes                  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, `AccountChooserActivity` is shown. Account picker inside of ESTS/WebView is _never_ shown, as the user would have already pre-selected an account via `AccountChooserActivity`. If user selects '`Add Account`', no `prompt=login` is sent. | (unsent - account selection via `AccountChooserActivity`) |\n+| MSAL    | `LOGIN`           | Sends query param `prompt=login` to `/authorize` endpoint. The user will _always_ be prompted for credentials by the service.                                                                                                                              | `login`                                                                                          | Yes                  | Same as embedded flow.                                                                                                                                                                                                                                                                                                 | `login`                                                   |\n+| MSAL    | `CONSENT`         | Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before. This param will be ignored by 1P apps, as these apps are pre-consented via M365 TOC.                                                              | `consent`                                                                                        | Yes                  |  Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before.                                                                                                                                                                                                                                      | `consent`                                                 |\n+| MSAL    | `WHEN_REQUIRED`   | If `login_hint` is supplied, no `prompt` query parameter will be sent to the `/authorize` endpoint. The user _may_ be preompted to login or grant consent as required by the service/application. If no `login_hint` is supplied, `prompt=select_account`. | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | N/A                  | Same as embedded flow                                                                                                                                                                                                                                                                                                  | (unsent - account selection via `AccountChooserActivity`) |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk4OTY1MQ=="}, "originalCommit": {"oid": "d12237313c27dc75f4c3b5a863113b49bcdd09f4"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1937, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}