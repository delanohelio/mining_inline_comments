{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwNzk5MzI3", "number": 1183, "title": "add Coverage Report tasks for Msal", "bodyText": "This Pull Request is related to ITEM - https://identitydivision.visualstudio.com/Engineering/_workitems/edit/1152996\nThis PR adds the tasks which generates tasks for all buildFlavour combination to generate Coverage Report.\nTo generate the Coverage report:\nRun the task\nThen run -> ./gradlew localDebugMsalBothTestCoverageReport (where local(or snapshot or dist) is Build, debug(or release) is Flavour, and Both(or Android or unit) is Test Type)\nReports will be available in msal/msal/build/reports/jacoco", "createdAt": "2020-10-09T20:14:47Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183", "merged": true, "mergeCommit": {"oid": "caa131f1faaaefaf493344c55c7f826e743cd14d"}, "closed": true, "closedAt": "2020-11-21T01:41:21Z", "author": {"login": "ayushmeghwani"}, "timelineItems": {"totalCount": 45, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQ7-3GgH2gAyNTAwNzk5MzI3OmE1ODU0NGJiODM0Y2Y3ZGRlN2Q0MzM5NmQ0N2U5MDRjYmVjNmIyNmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdddIucgH2gAyNTAwNzk5MzI3OmExNWMzNGQyZGQyMDQzYjk4MDRkYmRmOGNlZjVmYjM3MTY1MDRmZDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a58544bb834cf7dde7d43396d47e904cbec6b26b", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/a58544bb834cf7dde7d43396d47e904cbec6b26b", "committedDate": "2020-10-09T20:13:05Z", "message": "add Coverage Report tasks for Msal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee51e1496d5766dc5b5d80bb918f6fdb82fa5613", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/ee51e1496d5766dc5b5d80bb918f6fdb82fa5613", "committedDate": "2020-10-09T20:16:57Z", "message": "remove jacoco version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MTA1NDY0", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-507105464", "createdAt": "2020-10-13T06:31:25Z", "commit": {"oid": "ee51e1496d5766dc5b5d80bb918f6fdb82fa5613"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNjozMToyNVrOHgXORw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNjozMToyNVrOHgXORw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzY5Njk2Nw==", "bodyText": "see my comments about these in the common PR. same comments apply here", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r503696967", "createdAt": "2020-10-13T06:31:25Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +133,54 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+\n+    def buildTypes = android.buildTypes.collect { type ->\n+        type.name\n+    }\n+    def productFlavors = android.productFlavors.collect { flavor ->\n+        flavor.name\n+    }\n+    // When no product flavors defined, use empty string\n+    if (!productFlavors) productFlavors.add('')\n+    productFlavors.each { productFlavorName ->\n+        buildTypes.each { buildTypeName ->\n+            def sourceName\n+            if (!productFlavorName) {\n+                sourceName = \"${buildTypeName}\"\n+            } else {\n+                sourceName = \"${productFlavorName}${buildTypeName.capitalize()}\"\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee51e1496d5766dc5b5d80bb918f6fdb82fa5613"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c19bfb85e3e99d5e4866e20b21464771f41a1696", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/c19bfb85e3e99d5e4866e20b21464771f41a1696", "committedDate": "2020-10-13T18:41:40Z", "message": "add buildVariants to loop over"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/ebf7bfe178e1ccb715d80df71e0db7989a9c8e22", "committedDate": "2020-10-16T23:53:59Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODUxODEx", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-510851811", "createdAt": "2020-10-16T23:57:42Z", "commit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo1Nzo0MlrOHjSlzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo1Nzo0MlrOHjSlzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2Njc5Nw==", "bodyText": "Can you provide more details as to why this is needed?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506766797", "createdAt": "2020-10-16T23:57:42Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -5,6 +5,16 @@ apply plugin: 'maven'\n apply plugin: 'maven-publish'\n apply from: 'versioning/version_tasks.gradle'\n group = 'com.microsoft.identity.client'\n+apply plugin: 'jacoco'\n+\n+jacoco {\n+    reportsDir = file(\"$buildDir/reports/unitTests\")\n+}\n+\n+//To include Robolectric tests in the Jacoco report, flag -> \"includeNolocationClasses\" is set to true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODUxODg2", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-510851886", "createdAt": "2020-10-16T23:58:02Z", "commit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo1ODowMlrOHjSmEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo1ODowMlrOHjSmEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2Njg2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                description = \"Generate Coverage Report tasks for every build Flavour\"\n          \n          \n            \n                description = \"Generate Coverage Report tasks for every build variant\"", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506766865", "createdAt": "2020-10-16T23:58:02Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODUyMDIx", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-510852021", "createdAt": "2020-10-16T23:58:48Z", "commit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo1ODo0OFrOHjSmnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo1ODo0OFrOHjSmnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2NzAwNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Tasks for generating Coverage reports for every buildVariant\n          \n          \n            \n                    // Tasks for generating Coverage reports for every build variant", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506767005", "createdAt": "2020-10-16T23:58:48Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODU2NzI5", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-510856729", "createdAt": "2020-10-17T00:30:25Z", "commit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMDozMDoyNVrOHjS45g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMDozMDoyNVrOHjS45g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3MTY4Ng==", "bodyText": "So tell me if my understanding is right - what we're doing here is as follows:\n\nFor each build variant generate a new coverage report task\nThis coverage report task will run unit test for the build variant specified and perform code coverage. It will also call the pre-generated jacoco task for capturing code coverage for instrumented tests. (The pre-generated task does both i.e. run instrumented tests and capture coverage)\n\nYou are only using the pre-generated code coverage task to avoid having to re-do the work for doing coverage for instrumented tests?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506771686", "createdAt": "2020-10-17T00:30:25Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODYxNTk3", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-510861597", "createdAt": "2020-10-17T01:14:49Z", "commit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMToxNDo1MFrOHjTNag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMToxNDo1MFrOHjTNag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3NjkzOA==", "bodyText": "Let's change this to Code Coverage", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506776938", "createdAt": "2020-10-17T01:14:50Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODYzODI2", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-510863826", "createdAt": "2020-10-17T01:41:29Z", "commit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMTo0MToyOVrOHjTXrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMTo0MToyOVrOHjTXrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3OTU2Nw==", "bodyText": "What are additionalSourceDirs?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506779567", "createdAt": "2020-10-17T01:41:29Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Msal Reporting\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            additionalSourceDirs.from = files(coverageSourceDirs)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODY0MjYx", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-510864261", "createdAt": "2020-10-17T01:48:05Z", "commit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMTo0ODowNVrOHjTZ0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMTo0ODowNVrOHjTZ0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc4MDExMg==", "bodyText": "How is the source code in common dependency being considered? It did not seem to be considered (at least when running from Android-Complete)", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506780112", "createdAt": "2020-10-17T01:48:05Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Msal Reporting\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODY0NDY1", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-510864465", "createdAt": "2020-10-17T01:51:12Z", "commit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMTo1MToxMlrOHjTa2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMTo1MToxMlrOHjTa2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc4MDM3OA==", "bodyText": "This probably doesn't need to be a task of its own. I don't think we ever need to call this directly, right?\nIt can just be a method that's called on the build variants, and just go directly in the android section of the file -- IIRC we are already looping over build variants somewhere in this file so you can just follow that pattern.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506780378", "createdAt": "2020-10-17T01:51:12Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwODY0NTEw", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-510864510", "createdAt": "2020-10-17T01:51:51Z", "commit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5acece17f02085cfba995b7b027a76ac86d60a9", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/e5acece17f02085cfba995b7b027a76ac86d60a9", "committedDate": "2020-10-19T07:36:44Z", "message": "add Coverage Report tasks for MsalAutomation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b981787b373dd1a93e2599ce45ef3c9b78e2dc0a", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/b981787b373dd1a93e2599ce45ef3c9b78e2dc0a", "committedDate": "2020-10-19T07:43:35Z", "message": "Merge branch 'aymeghwa-CodeCoverage' of https://github.com/AzureAD/microsoft-authentication-library-for-android into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55598c331544de41878f43a83d087a4f9146af76", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/55598c331544de41878f43a83d087a4f9146af76", "committedDate": "2020-10-19T20:24:34Z", "message": "add all Coverage tasks(unit, android & both) in android section"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMjI1MDgw", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-512225080", "createdAt": "2020-10-19T23:18:51Z", "commit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMzoxODo1MVrOHkk-zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMzoxODo1MVrOHkk-zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNjY4NQ==", "bodyText": "Do we need to do all this? Can't this task just depend on code coverage task for unit and android test? (I think all this task needs to do is to just run those other two tasks)", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508116685", "createdAt": "2020-10-19T23:18:51Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -79,6 +89,59 @@ android {\n             def fileName = \"${archivesBaseName}-${version}.aar\"\n             outputFileName = fileName\n         }\n+\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports(UnitTest & AndroidTests) for every build variant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            classDirectories.from = files([javaClasses])\n+            executionData.from = fileTree(dir: \"$buildDir\", includes: [\n+                    \"jacoco/${testTaskName}.exec\"\n+            ])\n+            reports {\n+                xml.enabled = true\n+                html.enabled = true\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMjI1MzEz", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-512225313", "createdAt": "2020-10-19T23:19:30Z", "commit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMzoxOTozMFrOHkk_nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMzoxOTozMFrOHkk_nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNjg5NQ==", "bodyText": "Don't we have tasks already (auto generated) for Code Coverage for instrumented tests?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508116895", "createdAt": "2020-10-19T23:19:30Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -79,6 +89,59 @@ android {\n             def fileName = \"${archivesBaseName}-${version}.aar\"\n             outputFileName = fileName\n         }\n+\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports(UnitTest & AndroidTests) for every build variant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            classDirectories.from = files([javaClasses])\n+            executionData.from = fileTree(dir: \"$buildDir\", includes: [\n+                    \"jacoco/${testTaskName}.exec\"\n+            ])\n+            reports {\n+                xml.enabled = true\n+                html.enabled = true\n+            }\n+        }\n+\n+        // Tasks for generating Coverage reports(UnitTest) for every build variant\n+        task \"${buildVariant}MsalUnitTestCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Reports(UnitTest) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            classDirectories.from = files([javaClasses])\n+            executionData.from = fileTree(dir: \"$buildDir\", includes: [\n+                    \"jacoco/${testTaskName}.exec\"\n+            ])\n+            reports {\n+                xml.enabled = true\n+                html.enabled = true\n+            }\n+        }\n+\n+        // Tasks for generating Coverage reports(AndroidTest) for every build variant\n+        task \"${buildVariant}MsalAndroidTestCoverageReport\" (type:JacocoReport, dependsOn: [\"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Report(AndroidTest) on the ${buildVariant.capitalize()}\"\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 87}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMjI1NjQ2", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-512225646", "createdAt": "2020-10-19T23:20:26Z", "commit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMzoyMDoyN1rOHklA2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMzoyMDoyN1rOHklA2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNzIwOQ==", "bodyText": "Same feedback as MSAL, this doesn't need to be a task - it can just be looping over variants in the android section of build.gradle", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508117209", "createdAt": "2020-10-19T23:20:27Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/build.gradle", "diffHunk": "@@ -157,3 +160,17 @@ dependencies {\n     androidTestImplementation \"androidx.test:runner:$rootProject.ext.androidxTestRunnerVersion\"\n     androidTestUtil \"androidx.test:orchestrator:$rootProject.ext.androidxTestOrchestratorVersion\"\n }\n+\n+task createMsalAutomationCoverageReportTask() {\n+    group = \"MsalAutomation Reporting\"\n+    description = \"Generate AndroidTests Coverage Report tasks for every build Flavour\"\n+    android.applicationVariants.all { variant ->\n+        def buildVariant = variant.name\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalAutomationCoverageReport\" (type:JacocoReport, dependsOn: [\"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"MsalAutomation Reporting\"\n+            description = \"Generate MsalAutomation AndroidTests Coverage Reports on the ${buildVariant.capitalize()}\"\n+        }\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8fcc4985a3e774783336c24a981a15e63c2cc61", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/c8fcc4985a3e774783336c24a981a15e63c2cc61", "committedDate": "2020-10-20T11:41:43Z", "message": "include common files to coverage report"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04677153070f0939684affe93772abbc6045262b", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/04677153070f0939684affe93772abbc6045262b", "committedDate": "2020-10-20T11:45:07Z", "message": "remove extra code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eadde441cb1589582c4e2887263dbdedf357fca7", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/eadde441cb1589582c4e2887263dbdedf357fca7", "committedDate": "2020-10-20T21:18:27Z", "message": "add generic method to create all tasks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "900dee012f4636e073d635bc53b203e92091bc2c", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/900dee012f4636e073d635bc53b203e92091bc2c", "committedDate": "2020-10-22T18:29:19Z", "message": "add generic method to create all tasks for msalautomation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d163d741f24e4e262688773a571c93a2310f8605", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/d163d741f24e4e262688773a571c93a2310f8605", "committedDate": "2020-10-22T20:29:30Z", "message": "Merge branch 'dev' of https://github.com/AzureAD/microsoft-authentication-library-for-android into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4760bce99179273c43c403e702abf57b201427c", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/b4760bce99179273c43c403e702abf57b201427c", "committedDate": "2020-10-27T00:59:44Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3Mjc3MjI4", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-517277228", "createdAt": "2020-10-27T01:01:00Z", "commit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMTowMFrOHonrNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMTowMFrOHonrNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTEyNA==", "bodyText": "The Strings UnitTest, AndroidTest and BothTest can be stored in some constants as they are being reused.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512355124", "createdAt": "2020-10-27T01:01:00Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -79,6 +85,11 @@ android {\n             def fileName = \"${archivesBaseName}-${version}.aar\"\n             outputFileName = fileName\n         }\n+\n+        def buildVariant = variant.name\n+        createCoverageTask(buildVariant, \"UnitTest\")\n+        createCoverageTask(buildVariant, \"AndroidTest\")\n+        createCoverageTask(buildVariant, \"BothTest\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3Mjc3NTkw", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-517277590", "createdAt": "2020-10-27T01:02:16Z", "commit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMjoxNlrOHonsXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMjoxNlrOHonsXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTQyMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n          \n          \n            \n                def unitTestTask = \"test${buildVariant.capitalize()}UnitTest\"", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512355420", "createdAt": "2020-10-27T01:02:16Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3Mjc3NjQ1", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-517277645", "createdAt": "2020-10-27T01:02:26Z", "commit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMjoyN1rOHonsiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMjoyN1rOHonsiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTQ2Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"\n          \n          \n            \n                def androidTestTask = \"connected${buildVariant.capitalize()}AndroidTest\"", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512355467", "createdAt": "2020-10-27T01:02:27Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n+    def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3Mjc4MTI0", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-517278124", "createdAt": "2020-10-27T01:03:56Z", "commit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMzo1N1rOHonuCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMzo1N1rOHonuCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTg1MQ==", "bodyText": "can we also get html?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512355851", "createdAt": "2020-10-27T01:03:57Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n+    def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"\n+    def unitTestFile = \"jacoco/${unitTest}.exec\"\n+    def androidTestFile = \"outputs/code_coverage/${buildVariant}AndroidTest/connected/*.ec\"\n+    def taskList, executionFiles\n+    if (testType.matches(\"BothTest\")) {\n+        taskList = [unitTest, androidTest]\n+        executionFiles = [unitTestFile, androidTestFile]\n+    } else if (testType.matches(\"UnitTest\")){\n+        taskList = [unitTest]\n+        executionFiles = [unitTestFile]\n+    } else {\n+        taskList = [androidTest]\n+        executionFiles = [androidTestFile]\n+    }\n+\n+    task \"${buildVariant}Msal${testType}CoverageReport\" (type:JacocoReport, dependsOn: taskList) {\n+        group = \"Code Coverage\"\n+        description = \"Generate Msal Coverage Reports(${testType}) on the ${buildVariant.capitalize()}\"\n+        def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+        def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+        def javaClasses = fileTree(\n+                dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                excludes: fileFilter\n+        )\n+        //To include common files in the coverage report\n+        def commonBuild = buildVariant.matches(\"(.*)Debug(.*)\") ? \"debug\" : \"release\"\n+        def additionalCoverageSourceDirs = \"${projectDir}/../common/common/src/main/java\"\n+        def additionalJavaClasses = fileTree(\n+                dir: \"${buildDir}/../common/intermediates/javac/${commonBuild}/classes\",\n+                excludes: fileFilter\n+        )\n+\n+        sourceDirectories.from = files([coverageSourceDirs])\n+        additionalSourceDirs.from = files(additionalCoverageSourceDirs)\n+        additionalClassDirs.from = files([additionalJavaClasses])\n+        classDirectories.from = files([javaClasses])\n+        executionData.from = fileTree(dir: \"$buildDir\", includes: executionFiles)\n+        reports {\n+            xml.enabled = true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3Mjc4MjYz", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-517278263", "createdAt": "2020-10-27T01:04:23Z", "commit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowNDoyM1rOHonuhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowNDoyM1rOHonuhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTk3NA==", "bodyText": "Let's add a little documentation for this task", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512355974", "createdAt": "2020-10-27T01:04:23Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n+    def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"\n+    def unitTestFile = \"jacoco/${unitTest}.exec\"\n+    def androidTestFile = \"outputs/code_coverage/${buildVariant}AndroidTest/connected/*.ec\"\n+    def taskList, executionFiles\n+    if (testType.matches(\"BothTest\")) {\n+        taskList = [unitTest, androidTest]\n+        executionFiles = [unitTestFile, androidTestFile]\n+    } else if (testType.matches(\"UnitTest\")){\n+        taskList = [unitTest]\n+        executionFiles = [unitTestFile]\n+    } else {\n+        taskList = [androidTest]\n+        executionFiles = [androidTestFile]\n+    }\n+\n+    task \"${buildVariant}Msal${testType}CoverageReport\" (type:JacocoReport, dependsOn: taskList) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c22186868918072be26447048a9fffee4b79e35a", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/c22186868918072be26447048a9fffee4b79e35a", "committedDate": "2020-10-27T10:40:19Z", "message": "resolve constant names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e939b884ba31452c40ea8f62427c678a7df4037", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/9e939b884ba31452c40ea8f62427c678a7df4037", "committedDate": "2020-10-27T10:40:52Z", "message": "Merge branch 'aymeghwa-CodeCoverage' of https://github.com/AzureAD/microsoft-authentication-library-for-android into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d86b870dbb8e6c6356f7e20bf9560dc87b45b37c", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/d86b870dbb8e6c6356f7e20bf9560dc87b45b37c", "committedDate": "2020-10-27T20:37:26Z", "message": "add proper comments to explain tasks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bc67640e7a20ce139dc73faaa91b8ede12b9b20", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/9bc67640e7a20ce139dc73faaa91b8ede12b9b20", "committedDate": "2020-10-28T21:08:45Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3471aaafdee074c8de90de46d153e81601c89634", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/3471aaafdee074c8de90de46d153e81601c89634", "committedDate": "2020-10-30T07:50:54Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b384d37548502446d4c5736329d03a97e02554f5", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/b384d37548502446d4c5736329d03a97e02554f5", "committedDate": "2020-10-31T20:14:57Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7b43753e42a0b5cac8cb7b6d57a2f92aac944c2", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/c7b43753e42a0b5cac8cb7b6d57a2f92aac944c2", "committedDate": "2020-11-06T06:03:39Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef77d46361949e38972e5a89475300f512a5c5b6", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/ef77d46361949e38972e5a89475300f512a5c5b6", "committedDate": "2020-11-09T19:34:34Z", "message": "add different android-complete and msal file path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f854e2f0123ac8c3edc494302e7d58b5e739470c", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/f854e2f0123ac8c3edc494302e7d58b5e739470c", "committedDate": "2020-11-10T07:02:08Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NDc1MjQ5", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#pullrequestreview-527475249", "createdAt": "2020-11-10T18:11:41Z", "commit": {"oid": "f854e2f0123ac8c3edc494302e7d58b5e739470c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7742b34df78b18cad4c84235c129476014a43c32", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/7742b34df78b18cad4c84235c129476014a43c32", "committedDate": "2020-11-11T17:51:26Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6ff6aed530fd538424dd0e238864b9ca87173dd", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/a6ff6aed530fd538424dd0e238864b9ca87173dd", "committedDate": "2020-11-12T07:51:18Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "340480bfc468a4b205322f0df1433f9dd6cd1063", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/340480bfc468a4b205322f0df1433f9dd6cd1063", "committedDate": "2020-11-16T06:11:12Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a15c34d2dd2043b9804dbdf8cef5fb3716504fd6", "author": {"user": {"login": "ayushmeghwani", "name": "Ayush Meghwani"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/a15c34d2dd2043b9804dbdf8cef5fb3716504fd6", "committedDate": "2020-11-17T17:37:49Z", "message": "Merge branch 'dev' into aymeghwa-CodeCoverage"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1270, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}