{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwMjQ5NjQ4", "number": 1229, "title": "Make cacheRecord immutable, insist on non-null AccountRecord", "bodyText": "Depends on AzureAD/microsoft-authentication-library-common-for-android#1125", "createdAt": "2020-11-13T00:55:14Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1229", "merged": true, "mergeCommit": {"oid": "effd5e1822fa0a857a71b6a294aaf36afb93f5e0"}, "closed": true, "closedAt": "2020-12-01T03:09:09Z", "author": {"login": "AdamBJohnsonx"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddNJzpgFqTUzMTg3MzA1MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhvZtEgH2gAyNTIwMjQ5NjQ4OjYzOTgwMTkxMmI2Y2QzMjgwZTk5ZjdkMzg1NjQzMzEzNWRmMjlkODI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODczMDUx", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1229#pullrequestreview-531873051", "createdAt": "2020-11-16T23:00:30Z", "commit": {"oid": "8aa480049dbc716724b147dec76962d11d5a06b5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzowMDozMVrOH0Z_nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzowMDozMVrOH0Z_nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDcxMzg4NQ==", "bodyText": "Nit: Variable naming here may be improvable", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1229#discussion_r524713885", "createdAt": "2020-11-16T23:00:31Z", "author": {"login": "iambmelt"}, "path": "msal/src/test/java/com/microsoft/identity/client/e2e/shadows/ShadowDeviceCodeFlowCommandSuccessful.java", "diffHunk": "@@ -64,16 +64,18 @@ public AcquireTokenResult execute() {\n                 expiryDate);\n \n         // Create parameters for dummy authentication result\n-        final CacheRecord cacheRecord = new CacheRecord();\n-        cacheRecord.setAccount(new AccountRecord());\n-        cacheRecord.getAccount().setHomeAccountId(\"abcd\");\n-        cacheRecord.getAccount().setLocalAccountId(\"abcd\");\n+        final CacheRecordBuilder cacheRecord = new CacheRecord.builder();\n+        final AccountRecord accountRecord = new AccountRecord();\n+        cacheRecord.account(accountRecord);\n+        accountRecord.setHomeAccountId(\"abcd\");\n+        accountRecord.setLocalAccountId(\"abcd\");\n         final List<ICacheRecord> cacheRecordList = new ArrayList<>();\n-        cacheRecordList.add(cacheRecord);\n+        final ICacheRecord build = cacheRecord.build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8aa480049dbc716724b147dec76962d11d5a06b5"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODc3MDkx", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1229#pullrequestreview-531877091", "createdAt": "2020-11-16T23:02:36Z", "commit": {"oid": "8aa480049dbc716724b147dec76962d11d5a06b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8aa480049dbc716724b147dec76962d11d5a06b5", "author": {"user": {"login": "AdamBJohnsonx", "name": null}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/8aa480049dbc716724b147dec76962d11d5a06b5", "committedDate": "2020-11-13T00:54:45Z", "message": "Make cacheRecord immutable, insist on non-null AccountRecord"}, "afterCommit": {"oid": "ba352fcce8497619b63a151849ff393866a15c1f", "author": {"user": {"login": "AdamBJohnsonx", "name": null}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/ba352fcce8497619b63a151849ff393866a15c1f", "committedDate": "2020-11-17T21:25:08Z", "message": "Make cacheRecord immutable, insist on non-null AccountRecord"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMTQxMTA5", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1229#pullrequestreview-541141109", "createdAt": "2020-11-30T17:37:49Z", "commit": {"oid": "b9a56553bb13d4cda51337d6d1d9777b8eb9c598"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b48b4a8a2264da4b64cc9c42fb7d2cbcb49d91ae", "author": {"user": {"login": "AdamBJohnsonx", "name": null}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/b48b4a8a2264da4b64cc9c42fb7d2cbcb49d91ae", "committedDate": "2020-11-30T20:30:26Z", "message": "Make cacheRecord immutable, insist on non-null AccountRecord"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc4a319f59925460918465133ed5a9a71eba712f", "author": {"user": {"login": "AdamBJohnsonx", "name": null}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/cc4a319f59925460918465133ed5a9a71eba712f", "committedDate": "2020-11-30T20:30:26Z", "message": "Address naming feedback"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9a56553bb13d4cda51337d6d1d9777b8eb9c598", "author": {"user": {"login": "AdamBJohnsonx", "name": null}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/b9a56553bb13d4cda51337d6d1d9777b8eb9c598", "committedDate": "2020-11-17T21:28:29Z", "message": "Address naming feedback"}, "afterCommit": {"oid": "cc4a319f59925460918465133ed5a9a71eba712f", "author": {"user": {"login": "AdamBJohnsonx", "name": null}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/cc4a319f59925460918465133ed5a9a71eba712f", "committedDate": "2020-11-30T20:30:26Z", "message": "Address naming feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxMjgwNDY4", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1229#pullrequestreview-541280468", "createdAt": "2020-11-30T20:45:51Z", "commit": {"oid": "cc4a319f59925460918465133ed5a9a71eba712f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQyMDo0NTo1MlrOH8NLDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQyMDo0NTo1MlrOH8NLDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg5MjQzMQ==", "bodyText": "Checking this for null is now moot.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            final AccountRecord account = cacheRecord.getAccount();\n          \n          \n            \n                            if (account == null) {\n          \n          \n            \n                                // If the account is null, it can't be a home account.\n          \n          \n            \n                                continue;\n          \n          \n            \n                            }\n          \n          \n            \n                            final String acctHomeAccountId = account.getHomeAccountId();\n          \n          \n            \n                            final String acctLocalAccountId = account.getLocalAccountId();\n          \n          \n            \n                            final String acctHomeAccountId = cacheRecord.getAccount().getHomeAccountId();\n          \n          \n            \n                            final String acctLocalAccountId = cacheRecord.getAccount().getLocalAccountId();", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1229#discussion_r532892431", "createdAt": "2020-11-30T20:45:52Z", "author": {"login": "AdamBJohnsonx"}, "path": "msal/src/main/java/com/microsoft/identity/client/AccountAdapter.java", "diffHunk": "@@ -79,8 +79,13 @@\n             final List<ICacheRecord> result = new ArrayList<>();\n \n             for (final ICacheRecord cacheRecord : records) {\n-                final String acctHomeAccountId = cacheRecord.getAccount().getHomeAccountId();\n-                final String acctLocalAccountId = cacheRecord.getAccount().getLocalAccountId();\n+                final AccountRecord account = cacheRecord.getAccount();\n+                if (account == null) {\n+                    // If the account is null, it can't be a home account.\n+                    continue;\n+                }\n+                final String acctHomeAccountId = account.getHomeAccountId();\n+                final String acctLocalAccountId = account.getLocalAccountId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc4a319f59925460918465133ed5a9a71eba712f"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8af23dc36b2978268f2d4be3f9e869a18bb26a86", "author": {"user": {"login": "AdamBJohnsonx", "name": null}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/8af23dc36b2978268f2d4be3f9e869a18bb26a86", "committedDate": "2020-11-30T20:46:13Z", "message": "Revert impossible null check."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "364a52047677473516f67c1ccf09b30c9a9d0a63", "author": {"user": {"login": "AdamBJohnsonx", "name": null}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/364a52047677473516f67c1ccf09b30c9a9d0a63", "committedDate": "2020-12-01T01:10:21Z", "message": "Address missing unit test files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "639801912b6cd3280e99f7d3856433135df29d82", "author": {"user": {"login": "AdamBJohnsonx", "name": null}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/639801912b6cd3280e99f7d3856433135df29d82", "committedDate": "2020-12-01T01:10:21Z", "message": "Update common submodule"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1297, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}