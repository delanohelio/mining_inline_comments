{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NjYwNjA0", "number": 1177, "title": "Add MSAL Automation Flavors", "bodyText": "In this PR, I've added broker as a flavor to the MSAL Automation App. This allows us to choose a build variant against which to run automation. So we can run against the following:\n\nlocal debug MSAL against Broker Host\nlocal debug MSAL against debug build of Authenticator app\ndist release MSAL against release build of Authenticator app\ndist release MSAL against release build of Company Portal app\n\nAlso did some refactoring as needed. This PR looks big but it is actually small as a lot of similar changes are made in multiple files. Those changes are like:\n\nDon't override getBroker method in every test\nJust use the broker from the automation flavor\n\nAlso consumed the changes in this Common PR: AzureAD/microsoft-authentication-library-common-for-android#1070", "createdAt": "2020-10-06T15:54:38Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1177", "merged": true, "mergeCommit": {"oid": "e1201984ca95fb9baea62f8fecc34b212190ded4"}, "closed": true, "closedAt": "2020-10-12T19:42:29Z", "author": {"login": "shahzaibj"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOxXR2gH2gAyNDk4NjYwNjA0OjVkNmMxZDJmZWVhNDU3YTBjOWIzMmQ0M2IyM2E0MTdlZjBhNWMyY2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQpjglgFqTUwNTIxNzM1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5d6c1d2feea457a0c9b32d43b23a417ef0a5c2cd", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/5d6c1d2feea457a0c9b32d43b23a417ef0a5c2cd", "committedDate": "2020-10-03T02:42:57Z", "message": "Add broker as flavor to msal automation app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e9872216510ea7679c8e2b01c640aebf9ebd3a9", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/7e9872216510ea7679c8e2b01c640aebf9ebd3a9", "committedDate": "2020-10-03T02:43:18Z", "message": "Refactor msal broker tests to use broker from flavor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f32c293088b12714d71264796641feb652aaba39", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/f32c293088b12714d71264796641feb652aaba39", "committedDate": "2020-10-03T02:56:51Z", "message": "Refactor automation app flavor names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ad372d1e3af36444c2c4189a84768de387bef15", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/7ad372d1e3af36444c2c4189a84768de387bef15", "committedDate": "2020-10-05T22:02:59Z", "message": "Use broker instance variable when referencing broker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86cb3083268004b376d93dcd39b1d614be566755", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/86cb3083268004b376d93dcd39b1d614be566755", "committedDate": "2020-10-06T19:22:33Z", "message": "Merge branch 'dev' into shahzaibj/automation-variants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f0b9581d98a85ac58fef46fc7b4509d5f95c95b", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/6f0b9581d98a85ac58fef46fc7b4509d5f95c95b", "committedDate": "2020-10-06T19:45:02Z", "message": "Update submodule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95c14e0f403aa3589666e3a86c0467d91f07dd00", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/95c14e0f403aa3589666e3a86c0467d91f07dd00", "committedDate": "2020-10-07T16:19:04Z", "message": "Merge branch 'dev' into shahzaibj/automation-variants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2e68974b30c6010c77c4b6b8e3dff38d3733ecd", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/f2e68974b30c6010c77c4b6b8e3dff38d3733ecd", "committedDate": "2020-10-07T16:19:29Z", "message": "Update submodule"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MDc0ODM5", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1177#pullrequestreview-504074839", "createdAt": "2020-10-07T16:45:35Z", "commit": {"oid": "f2e68974b30c6010c77c4b6b8e3dff38d3733ecd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNjo0NTozNVrOHd8YvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNjo0NTozNVrOHd8YvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE2MDEyNA==", "bodyText": "How does this work? Does it matter what flavor/build the automation test app is built with?\nShould we use the signature hash of the APKs instead to see if the combination is valid?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1177#discussion_r501160124", "createdAt": "2020-10-07T16:45:35Z", "author": {"login": "rpdome"}, "path": "msalautomationapp/build.gradle", "diffHunk": "@@ -50,26 +50,60 @@ android {\n         }\n     }\n \n-    testBuildType = \"release\"\n+    testBuildType = \"debug\"\n \n     lintOptions {\n         abortOnError false\n     }\n \n-    flavorDimensions \"main\"\n+    flavorDimensions \"main\", \"broker\"\n \n     productFlavors {\n         local {\n+            dimension \"main\"\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-local\"\n             resValue(\"string\", \"application_name\", \"msal-local\")\n         }\n         dist {\n+            dimension \"main\"\n             // Keep .local because the redirect url we registered on the portal contains .local, not .dist\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-dist\"\n             resValue(\"string\", \"application_name\", \"msal-dist\")\n         }\n+\n+        BrokerMicrosoftAuthenticator {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerCompanyPortal {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerHost {\n+            dimension \"broker\"\n+        }\n+    }\n+\n+    variantFilter { variant ->\n+        def flavorName = variant.flavors*.name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2e68974b30c6010c77c4b6b8e3dff38d3733ecd"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MTk1MjU0", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1177#pullrequestreview-504195254", "createdAt": "2020-10-07T19:21:27Z", "commit": {"oid": "f2e68974b30c6010c77c4b6b8e3dff38d3733ecd"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a835579e1a341c244362aceb988d8b0093349e3b", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/a835579e1a341c244362aceb988d8b0093349e3b", "committedDate": "2020-10-08T22:19:27Z", "message": "Merge branch 'dev' into shahzaibj/automation-variants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e5a5dd0781f77f40256cdbfae2ca9b2ee7898f4", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/4e5a5dd0781f77f40256cdbfae2ca9b2ee7898f4", "committedDate": "2020-10-08T22:40:35Z", "message": "Use constants for broker/flavor names"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MjE3MzU5", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1177#pullrequestreview-505217359", "createdAt": "2020-10-08T22:44:55Z", "commit": {"oid": "4e5a5dd0781f77f40256cdbfae2ca9b2ee7898f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1263, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}