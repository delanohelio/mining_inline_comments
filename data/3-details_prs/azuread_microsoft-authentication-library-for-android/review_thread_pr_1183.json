{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwNzk5MzI3", "number": 1183, "reviewThreads": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNjozMToyNVrOEs4lpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowNDoyM1rOEyJLsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NDk5OTQyOnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwNjozMToyNVrOHgXORw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxODo0Mjo0NlrOHg0n8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzY5Njk2Nw==", "bodyText": "see my comments about these in the common PR. same comments apply here", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r503696967", "createdAt": "2020-10-13T06:31:25Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +133,54 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+\n+    def buildTypes = android.buildTypes.collect { type ->\n+        type.name\n+    }\n+    def productFlavors = android.productFlavors.collect { flavor ->\n+        flavor.name\n+    }\n+    // When no product flavors defined, use empty string\n+    if (!productFlavors) productFlavors.add('')\n+    productFlavors.each { productFlavorName ->\n+        buildTypes.each { buildTypeName ->\n+            def sourceName\n+            if (!productFlavorName) {\n+                sourceName = \"${buildTypeName}\"\n+            } else {\n+                sourceName = \"${productFlavorName}${buildTypeName.capitalize()}\"\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee51e1496d5766dc5b5d80bb918f6fdb82fa5613"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE3ODY3Mw==", "bodyText": "added buildVariants to loop over, have a look.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r504178673", "createdAt": "2020-10-13T18:42:46Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +133,54 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+\n+    def buildTypes = android.buildTypes.collect { type ->\n+        type.name\n+    }\n+    def productFlavors = android.productFlavors.collect { flavor ->\n+        flavor.name\n+    }\n+    // When no product flavors defined, use empty string\n+    if (!productFlavors) productFlavors.add('')\n+    productFlavors.each { productFlavorName ->\n+        buildTypes.each { buildTypeName ->\n+            def sourceName\n+            if (!productFlavorName) {\n+                sourceName = \"${buildTypeName}\"\n+            } else {\n+                sourceName = \"${productFlavorName}${buildTypeName.capitalize()}\"\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzY5Njk2Nw=="}, "originalCommit": {"oid": "ee51e1496d5766dc5b5d80bb918f6fdb82fa5613"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDE2OTcwOnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo1Nzo0MlrOHjSlzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMTo0OTo0M1rOHkKh9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2Njc5Nw==", "bodyText": "Can you provide more details as to why this is needed?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506766797", "createdAt": "2020-10-16T23:57:42Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -5,6 +5,16 @@ apply plugin: 'maven'\n apply plugin: 'maven-publish'\n apply from: 'versioning/version_tasks.gradle'\n group = 'com.microsoft.identity.client'\n+apply plugin: 'jacoco'\n+\n+jacoco {\n+    reportsDir = file(\"$buildDir/reports/unitTests\")\n+}\n+\n+//To include Robolectric tests in the Jacoco report, flag -> \"includeNolocationClasses\" is set to true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY4MzMxNw==", "bodyText": "So whenever this flag is not set to true or enabled. there is no coverage which happens for Roboelectric tests and as msal and other repos contains these Roboelectric tests. so we have to enable this flag. And in earlier versions of jacoco, this flag was already enabled in jacoco plugin itself but in latest versions it is not there so we have to do it manually.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r507683317", "createdAt": "2020-10-19T11:49:43Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -5,6 +5,16 @@ apply plugin: 'maven'\n apply plugin: 'maven-publish'\n apply from: 'versioning/version_tasks.gradle'\n group = 'com.microsoft.identity.client'\n+apply plugin: 'jacoco'\n+\n+jacoco {\n+    reportsDir = file(\"$buildDir/reports/unitTests\")\n+}\n+\n+//To include Robolectric tests in the Jacoco report, flag -> \"includeNolocationClasses\" is set to true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2Njc5Nw=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDE3MDIxOnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo1ODowMlrOHjSmEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMDoyNjoxNlrOHkgXlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2Njg2NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                description = \"Generate Coverage Report tasks for every build Flavour\"\n          \n          \n            \n                description = \"Generate Coverage Report tasks for every build variant\"", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506766865", "createdAt": "2020-10-16T23:58:02Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA0MTEwOQ==", "bodyText": "changed.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508041109", "createdAt": "2020-10-19T20:26:16Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2Njg2NQ=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDE3MTEwOnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMzo1ODo0OFrOHjSmnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMDoyNjozMVrOHkgYLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2NzAwNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Tasks for generating Coverage reports for every buildVariant\n          \n          \n            \n                    // Tasks for generating Coverage reports for every build variant", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506767005", "createdAt": "2020-10-16T23:58:48Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA0MTI2Mw==", "bodyText": "changed.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508041263", "createdAt": "2020-10-19T20:26:31Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc2NzAwNQ=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDIwNDIwOnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMDozMDoyNVrOHjS45g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzoxNjo0OVrOHkNyDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3MTY4Ng==", "bodyText": "So tell me if my understanding is right - what we're doing here is as follows:\n\nFor each build variant generate a new coverage report task\nThis coverage report task will run unit test for the build variant specified and perform code coverage. It will also call the pre-generated jacoco task for capturing code coverage for instrumented tests. (The pre-generated task does both i.e. run instrumented tests and capture coverage)\n\nYou are only using the pre-generated code coverage task to avoid having to re-do the work for doing coverage for instrumented tests?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506771686", "createdAt": "2020-10-17T00:30:25Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc4MDI0MA==", "bodyText": "I think the better thing to do (as discussed the other day) is to create a separate task for coverage for unit tests. Then you can have a third task that can just combine the tasks for coverage report for unit tests + instrumented tests. This would allow us to be more flexible.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506780240", "createdAt": "2020-10-17T01:49:43Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3MTY4Ng=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzczNjU5MQ==", "bodyText": "Yes you are right, So Code coverage task is dependent on 2 tasks:\n\n\nthe first one runs all the unit tests and and jacoco instruments all the src files and with the help of these two, jacoco creates final coverage report\n\n\nAnd second task is one which does both the task for instrument tests, so there is no need of any addition work on that task.\n\n\nAnd as per our discussion that day, as Azure dev ops does not support instrument tests, so in all for every build there will be three tasks:\n\nTask which would generate report for both unit tests and instrumented tests\nTask which would generate report only for unit tests\nTask which would generate report only for instrumented tests", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r507736591", "createdAt": "2020-10-19T13:16:49Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3MTY4Ng=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDI0NDY4OnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMToxNDo1MFrOHjTNag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMDoyNjozOVrOHkgYdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3NjkzOA==", "bodyText": "Let's change this to Code Coverage", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506776938", "createdAt": "2020-10-17T01:14:50Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3Njk4Mg==", "bodyText": "Same applies to other repos as well", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506776982", "createdAt": "2020-10-17T01:15:08Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3NjkzOA=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA0MTMzMw==", "bodyText": "changed.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508041333", "createdAt": "2020-10-19T20:26:39Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3NjkzOA=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDI2NTI3OnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMTo0MToyOVrOHjTXrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxOTowODozOFrOHkdunQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3OTU2Nw==", "bodyText": "What are additionalSourceDirs?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506779567", "createdAt": "2020-10-17T01:41:29Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Msal Reporting\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            additionalSourceDirs.from = files(coverageSourceDirs)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk5Nzg1Mw==", "bodyText": "According to documentation,\nsourceDirectories - Source sets that coverage should be reported for.\nadditionalSourceDirs - Additional source dirs for the classes coverage data is being reported for,\nSo after investigation, sourceDirectories is only sufficient to cover all the classess for the coverage report, additionalSourceDirs is redundant here", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r507997853", "createdAt": "2020-10-19T19:08:38Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Msal Reporting\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            additionalSourceDirs.from = files(coverageSourceDirs)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc3OTU2Nw=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDI2OTczOnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMTo0ODowNVrOHjTZ0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxMTo0MjoyM1rOHk4KSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc4MDExMg==", "bodyText": "How is the source code in common dependency being considered? It did not seem to be considered (at least when running from Android-Complete)", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506780112", "createdAt": "2020-10-17T01:48:05Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Msal Reporting\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzczOTIzMw==", "bodyText": "No that is not the case, the actual path of coverageSourceDirs is \"android-complete\\msal\\msal/src/main/java\" , where path of projectDir is \"android-complete\\msal\\msal\". So jacoco use all the src classes and instrument it to generate coverage report. so that is the purpose of this coverageSourceDirs .", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r507739233", "createdAt": "2020-10-19T13:20:20Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Msal Reporting\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc4MDExMg=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQzMDkyMw==", "bodyText": "files of common repos are included in coverage report", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508430923", "createdAt": "2020-10-20T11:42:23Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {\n+    group = \"Msal Reporting\"\n+    description = \"Generate Coverage Report tasks for every build Flavour\"\n+    android.libraryVariants.all { variant ->\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Msal Reporting\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc4MDExMg=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NDI3MTg1OnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QwMTo1MToxMlrOHjTa2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMDoyODowOFrOHkgbjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc4MDM3OA==", "bodyText": "This probably doesn't need to be a task of its own. I don't think we ever need to call this directly, right?\nIt can just be a method that's called on the build variants, and just go directly in the android section of the file -- IIRC we are already looping over build variants somewhere in this file so you can just follow that pattern.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r506780378", "createdAt": "2020-10-17T01:51:12Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA0MjEyNA==", "bodyText": "generation of all the new tasks are now implemented in already loop-over sub section of android block of build.gradle file", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508042124", "createdAt": "2020-10-19T20:28:08Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -124,6 +134,38 @@ task sourcesJar(type: Jar) {\n     destinationDir = reporting.file(\"$project.buildDir/outputs/jar/\")\n }\n \n+task createMsalCoverageReportTask() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjc4MDM3OA=="}, "originalCommit": {"oid": "ebf7bfe178e1ccb715d80df71e0db7989a9c8e22"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MjgzMTc0OnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMzoxODo1MVrOHkk-zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNzoxOTozMlrOHnBpiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNjY4NQ==", "bodyText": "Do we need to do all this? Can't this task just depend on code coverage task for unit and android test? (I think all this task needs to do is to just run those other two tasks)", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508116685", "createdAt": "2020-10-19T23:18:51Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -79,6 +89,59 @@ android {\n             def fileName = \"${archivesBaseName}-${version}.aar\"\n             outputFileName = fileName\n         }\n+\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports(UnitTest & AndroidTests) for every build variant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            classDirectories.from = files([javaClasses])\n+            executionData.from = fileTree(dir: \"$buildDir\", includes: [\n+                    \"jacoco/${testTaskName}.exec\"\n+            ])\n+            reports {\n+                xml.enabled = true\n+                html.enabled = true\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM5MTAxMw==", "bodyText": "For unit tests, we have to do all of this. The \"testLocalDebugUnitTest\" task runs all the test, that's it but to generate coverage report we are doing all of this. including source files and raw output of task \"testLocalDebugUnitTest\" is stored in \"testLocalDebugUnitTest.exec\" file that's why we use it.\nBut for Android tests, there is no need to do anything. just run the auto generated task \"createLocalDebugCoverageReport\" and it will generate the coverage report, that's why parent task depends on this task so that both reports could be generated with execution of one task only.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508391013", "createdAt": "2020-10-20T10:33:38Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -79,6 +89,59 @@ android {\n             def fileName = \"${archivesBaseName}-${version}.aar\"\n             outputFileName = fileName\n         }\n+\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports(UnitTest & AndroidTests) for every build variant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            classDirectories.from = files([javaClasses])\n+            executionData.from = fileTree(dir: \"$buildDir\", includes: [\n+                    \"jacoco/${testTaskName}.exec\"\n+            ])\n+            reports {\n+                xml.enabled = true\n+                html.enabled = true\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNjY4NQ=="}, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4MzUyOA==", "bodyText": "added one generic method to reduce repetition of code.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r510683528", "createdAt": "2020-10-23T07:19:32Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -79,6 +89,59 @@ android {\n             def fileName = \"${archivesBaseName}-${version}.aar\"\n             outputFileName = fileName\n         }\n+\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports(UnitTest & AndroidTests) for every build variant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            classDirectories.from = files([javaClasses])\n+            executionData.from = fileTree(dir: \"$buildDir\", includes: [\n+                    \"jacoco/${testTaskName}.exec\"\n+            ])\n+            reports {\n+                xml.enabled = true\n+                html.enabled = true\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNjY4NQ=="}, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MjgzMzA5OnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMzoxOTozMFrOHkk_nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNzoyMDozOVrOHnBrmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNjg5NQ==", "bodyText": "Don't we have tasks already (auto generated) for Code Coverage for instrumented tests?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508116895", "createdAt": "2020-10-19T23:19:30Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -79,6 +89,59 @@ android {\n             def fileName = \"${archivesBaseName}-${version}.aar\"\n             outputFileName = fileName\n         }\n+\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports(UnitTest & AndroidTests) for every build variant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            classDirectories.from = files([javaClasses])\n+            executionData.from = fileTree(dir: \"$buildDir\", includes: [\n+                    \"jacoco/${testTaskName}.exec\"\n+            ])\n+            reports {\n+                xml.enabled = true\n+                html.enabled = true\n+            }\n+        }\n+\n+        // Tasks for generating Coverage reports(UnitTest) for every build variant\n+        task \"${buildVariant}MsalUnitTestCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Reports(UnitTest) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            classDirectories.from = files([javaClasses])\n+            executionData.from = fileTree(dir: \"$buildDir\", includes: [\n+                    \"jacoco/${testTaskName}.exec\"\n+            ])\n+            reports {\n+                xml.enabled = true\n+                html.enabled = true\n+            }\n+        }\n+\n+        // Tasks for generating Coverage reports(AndroidTest) for every build variant\n+        task \"${buildVariant}MsalAndroidTestCoverageReport\" (type:JacocoReport, dependsOn: [\"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Report(AndroidTest) on the ${buildVariant.capitalize()}\"\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4NDA1Nw==", "bodyText": "Those tasks does not cover all the files for coverage, and misses on showing coverage in file. so added new method and tasks", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r510684057", "createdAt": "2020-10-23T07:20:39Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -79,6 +89,59 @@ android {\n             def fileName = \"${archivesBaseName}-${version}.aar\"\n             outputFileName = fileName\n         }\n+\n+        def buildVariant = variant.name\n+        def testTaskName = \"test${buildVariant.capitalize()}UnitTest\"\n+\n+        // Tasks for generating Coverage reports(UnitTest & AndroidTests) for every build variant\n+        task \"${buildVariant}MsalCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\", \"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Reports(UnitTest & AndroidTests) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            classDirectories.from = files([javaClasses])\n+            executionData.from = fileTree(dir: \"$buildDir\", includes: [\n+                    \"jacoco/${testTaskName}.exec\"\n+            ])\n+            reports {\n+                xml.enabled = true\n+                html.enabled = true\n+            }\n+        }\n+\n+        // Tasks for generating Coverage reports(UnitTest) for every build variant\n+        task \"${buildVariant}MsalUnitTestCoverageReport\" (type:JacocoReport, dependsOn: [\"$testTaskName\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Reports(UnitTest) on the ${buildVariant.capitalize()}\"\n+\n+            def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+            def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+            def javaClasses = fileTree(\n+                    dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                    excludes: fileFilter\n+            )\n+            sourceDirectories.from = files([coverageSourceDirs])\n+            classDirectories.from = files([javaClasses])\n+            executionData.from = fileTree(dir: \"$buildDir\", includes: [\n+                    \"jacoco/${testTaskName}.exec\"\n+            ])\n+            reports {\n+                xml.enabled = true\n+                html.enabled = true\n+            }\n+        }\n+\n+        // Tasks for generating Coverage reports(AndroidTest) for every build variant\n+        task \"${buildVariant}MsalAndroidTestCoverageReport\" (type:JacocoReport, dependsOn: [\"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"Code Coverage\"\n+            description = \"Generate Msal Coverage Report(AndroidTest) on the ${buildVariant.capitalize()}\"\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNjg5NQ=="}, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 87}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MjgzNTI0OnYy", "diffSide": "RIGHT", "path": "msalautomationapp/build.gradle", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQyMzoyMDoyN1rOHklA2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNzoyMToxMlrOHnBsiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNzIwOQ==", "bodyText": "Same feedback as MSAL, this doesn't need to be a task - it can just be looping over variants in the android section of build.gradle", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508117209", "createdAt": "2020-10-19T23:20:27Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/build.gradle", "diffHunk": "@@ -157,3 +160,17 @@ dependencies {\n     androidTestImplementation \"androidx.test:runner:$rootProject.ext.androidxTestRunnerVersion\"\n     androidTestUtil \"androidx.test:orchestrator:$rootProject.ext.androidxTestOrchestratorVersion\"\n }\n+\n+task createMsalAutomationCoverageReportTask() {\n+    group = \"MsalAutomation Reporting\"\n+    description = \"Generate AndroidTests Coverage Report tasks for every build Flavour\"\n+    android.applicationVariants.all { variant ->\n+        def buildVariant = variant.name\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalAutomationCoverageReport\" (type:JacocoReport, dependsOn: [\"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"MsalAutomation Reporting\"\n+            description = \"Generate MsalAutomation AndroidTests Coverage Reports on the ${buildVariant.capitalize()}\"\n+        }\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNzQzNQ==", "bodyText": "In fact, since this is Instrumented Test, I think these should be auto generated?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r508117435", "createdAt": "2020-10-19T23:21:08Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/build.gradle", "diffHunk": "@@ -157,3 +160,17 @@ dependencies {\n     androidTestImplementation \"androidx.test:runner:$rootProject.ext.androidxTestRunnerVersion\"\n     androidTestUtil \"androidx.test:orchestrator:$rootProject.ext.androidxTestOrchestratorVersion\"\n }\n+\n+task createMsalAutomationCoverageReportTask() {\n+    group = \"MsalAutomation Reporting\"\n+    description = \"Generate AndroidTests Coverage Report tasks for every build Flavour\"\n+    android.applicationVariants.all { variant ->\n+        def buildVariant = variant.name\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalAutomationCoverageReport\" (type:JacocoReport, dependsOn: [\"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"MsalAutomation Reporting\"\n+            description = \"Generate MsalAutomation AndroidTests Coverage Reports on the ${buildVariant.capitalize()}\"\n+        }\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNzIwOQ=="}, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY4NDI5OQ==", "bodyText": "added new changes which create coverages tasks as per the requirement", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r510684299", "createdAt": "2020-10-23T07:21:12Z", "author": {"login": "ayushmeghwani"}, "path": "msalautomationapp/build.gradle", "diffHunk": "@@ -157,3 +160,17 @@ dependencies {\n     androidTestImplementation \"androidx.test:runner:$rootProject.ext.androidxTestRunnerVersion\"\n     androidTestUtil \"androidx.test:orchestrator:$rootProject.ext.androidxTestOrchestratorVersion\"\n }\n+\n+task createMsalAutomationCoverageReportTask() {\n+    group = \"MsalAutomation Reporting\"\n+    description = \"Generate AndroidTests Coverage Report tasks for every build Flavour\"\n+    android.applicationVariants.all { variant ->\n+        def buildVariant = variant.name\n+\n+        // Tasks for generating Coverage reports for every buildVariant\n+        task \"${buildVariant}MsalAutomationCoverageReport\" (type:JacocoReport, dependsOn: [\"create${buildVariant.capitalize()}CoverageReport\"]) {\n+            group = \"MsalAutomation Reporting\"\n+            description = \"Generate MsalAutomation AndroidTests Coverage Reports on the ${buildVariant.capitalize()}\"\n+        }\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODExNzIwOQ=="}, "originalCommit": {"oid": "55598c331544de41878f43a83d087a4f9146af76"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMDE0MTM1OnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMTowMFrOHonrNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDo0MjowNlrOHo1j3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTEyNA==", "bodyText": "The Strings UnitTest, AndroidTest and BothTest can be stored in some constants as they are being reused.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512355124", "createdAt": "2020-10-27T01:01:00Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -79,6 +85,11 @@ android {\n             def fileName = \"${archivesBaseName}-${version}.aar\"\n             outputFileName = fileName\n         }\n+\n+        def buildVariant = variant.name\n+        createCoverageTask(buildVariant, \"UnitTest\")\n+        createCoverageTask(buildVariant, \"AndroidTest\")\n+        createCoverageTask(buildVariant, \"BothTest\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4MjYyMw==", "bodyText": "added", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512582623", "createdAt": "2020-10-27T10:42:06Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -79,6 +85,11 @@ android {\n             def fileName = \"${archivesBaseName}-${version}.aar\"\n             outputFileName = fileName\n         }\n+\n+        def buildVariant = variant.name\n+        createCoverageTask(buildVariant, \"UnitTest\")\n+        createCoverageTask(buildVariant, \"AndroidTest\")\n+        createCoverageTask(buildVariant, \"BothTest\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTEyNA=="}, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMDE0MzMxOnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMjoxNlrOHonsXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDo0MTo1NlrOHo1jfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTQyMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n          \n          \n            \n                def unitTestTask = \"test${buildVariant.capitalize()}UnitTest\"", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512355420", "createdAt": "2020-10-27T01:02:16Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4MjUyNw==", "bodyText": "changed", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512582527", "createdAt": "2020-10-27T10:41:56Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTQyMA=="}, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMDE0MzYxOnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMjoyN1rOHonsiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMDo0MTo0OVrOHo1jLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTQ2Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"\n          \n          \n            \n                def androidTestTask = \"connected${buildVariant.capitalize()}AndroidTest\"", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512355467", "createdAt": "2020-10-27T01:02:27Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n+    def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4MjQ0NQ==", "bodyText": "changed.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512582445", "createdAt": "2020-10-27T10:41:49Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n+    def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTQ2Nw=="}, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMDE0NjA4OnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowMzo1N1rOHonuCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwNzowOTo0MlrOHot7Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTg1MQ==", "bodyText": "can we also get html?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512355851", "createdAt": "2020-10-27T01:03:57Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n+    def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"\n+    def unitTestFile = \"jacoco/${unitTest}.exec\"\n+    def androidTestFile = \"outputs/code_coverage/${buildVariant}AndroidTest/connected/*.ec\"\n+    def taskList, executionFiles\n+    if (testType.matches(\"BothTest\")) {\n+        taskList = [unitTest, androidTest]\n+        executionFiles = [unitTestFile, androidTestFile]\n+    } else if (testType.matches(\"UnitTest\")){\n+        taskList = [unitTest]\n+        executionFiles = [unitTestFile]\n+    } else {\n+        taskList = [androidTest]\n+        executionFiles = [androidTestFile]\n+    }\n+\n+    task \"${buildVariant}Msal${testType}CoverageReport\" (type:JacocoReport, dependsOn: taskList) {\n+        group = \"Code Coverage\"\n+        description = \"Generate Msal Coverage Reports(${testType}) on the ${buildVariant.capitalize()}\"\n+        def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+        def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+        def javaClasses = fileTree(\n+                dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                excludes: fileFilter\n+        )\n+        //To include common files in the coverage report\n+        def commonBuild = buildVariant.matches(\"(.*)Debug(.*)\") ? \"debug\" : \"release\"\n+        def additionalCoverageSourceDirs = \"${projectDir}/../common/common/src/main/java\"\n+        def additionalJavaClasses = fileTree(\n+                dir: \"${buildDir}/../common/intermediates/javac/${commonBuild}/classes\",\n+                excludes: fileFilter\n+        )\n+\n+        sourceDirectories.from = files([coverageSourceDirs])\n+        additionalSourceDirs.from = files(additionalCoverageSourceDirs)\n+        additionalClassDirs.from = files([additionalJavaClasses])\n+        classDirectories.from = files([javaClasses])\n+        executionData.from = fileTree(dir: \"$buildDir\", includes: executionFiles)\n+        reports {\n+            xml.enabled = true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ1NzUxNA==", "bodyText": "html reports are already being generated, by default. So, I didn't add any flag for it", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512457514", "createdAt": "2020-10-27T07:09:42Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n+    def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"\n+    def unitTestFile = \"jacoco/${unitTest}.exec\"\n+    def androidTestFile = \"outputs/code_coverage/${buildVariant}AndroidTest/connected/*.ec\"\n+    def taskList, executionFiles\n+    if (testType.matches(\"BothTest\")) {\n+        taskList = [unitTest, androidTest]\n+        executionFiles = [unitTestFile, androidTestFile]\n+    } else if (testType.matches(\"UnitTest\")){\n+        taskList = [unitTest]\n+        executionFiles = [unitTestFile]\n+    } else {\n+        taskList = [androidTest]\n+        executionFiles = [androidTestFile]\n+    }\n+\n+    task \"${buildVariant}Msal${testType}CoverageReport\" (type:JacocoReport, dependsOn: taskList) {\n+        group = \"Code Coverage\"\n+        description = \"Generate Msal Coverage Reports(${testType}) on the ${buildVariant.capitalize()}\"\n+        def coverageSourceDirs = \"${projectDir}/src/main/java\"\n+        def fileFilter = ['**/R.class', '**/R$*.class', '**/BuildConfig.*', '**/Manifest*.*', '**/*Test.*']\n+        def javaClasses = fileTree(\n+                dir: \"${buildDir}/intermediates/javac/${buildVariant}/classes\",\n+                excludes: fileFilter\n+        )\n+        //To include common files in the coverage report\n+        def commonBuild = buildVariant.matches(\"(.*)Debug(.*)\") ? \"debug\" : \"release\"\n+        def additionalCoverageSourceDirs = \"${projectDir}/../common/common/src/main/java\"\n+        def additionalJavaClasses = fileTree(\n+                dir: \"${buildDir}/../common/intermediates/javac/${commonBuild}/classes\",\n+                excludes: fileFilter\n+        )\n+\n+        sourceDirectories.from = files([coverageSourceDirs])\n+        additionalSourceDirs.from = files(additionalCoverageSourceDirs)\n+        additionalClassDirs.from = files([additionalJavaClasses])\n+        classDirectories.from = files([javaClasses])\n+        executionData.from = fileTree(dir: \"$buildDir\", includes: executionFiles)\n+        reports {\n+            xml.enabled = true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTg1MQ=="}, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMDE0NzA0OnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwMTowNDoyM1rOHonuhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMDozODozM1rOHpP7wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTk3NA==", "bodyText": "Let's add a little documentation for this task", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r512355974", "createdAt": "2020-10-27T01:04:23Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n+    def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"\n+    def unitTestFile = \"jacoco/${unitTest}.exec\"\n+    def androidTestFile = \"outputs/code_coverage/${buildVariant}AndroidTest/connected/*.ec\"\n+    def taskList, executionFiles\n+    if (testType.matches(\"BothTest\")) {\n+        taskList = [unitTest, androidTest]\n+        executionFiles = [unitTestFile, androidTestFile]\n+    } else if (testType.matches(\"UnitTest\")){\n+        taskList = [unitTest]\n+        executionFiles = [unitTestFile]\n+    } else {\n+        taskList = [androidTest]\n+        executionFiles = [androidTestFile]\n+    }\n+\n+    task \"${buildVariant}Msal${testType}CoverageReport\" (type:JacocoReport, dependsOn: taskList) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAxNDcyMg==", "bodyText": "added", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1183#discussion_r513014722", "createdAt": "2020-10-27T20:38:33Z", "author": {"login": "ayushmeghwani"}, "path": "msal/build.gradle", "diffHunk": "@@ -96,6 +107,52 @@ android {\n     }\n }\n \n+ext.createCoverageTask = { buildVariant, testType ->\n+    def unitTest = \"test${buildVariant.capitalize()}UnitTest\"\n+    def androidTest = \"connected${buildVariant.capitalize()}AndroidTest\"\n+    def unitTestFile = \"jacoco/${unitTest}.exec\"\n+    def androidTestFile = \"outputs/code_coverage/${buildVariant}AndroidTest/connected/*.ec\"\n+    def taskList, executionFiles\n+    if (testType.matches(\"BothTest\")) {\n+        taskList = [unitTest, androidTest]\n+        executionFiles = [unitTestFile, androidTestFile]\n+    } else if (testType.matches(\"UnitTest\")){\n+        taskList = [unitTest]\n+        executionFiles = [unitTestFile]\n+    } else {\n+        taskList = [androidTest]\n+        executionFiles = [androidTestFile]\n+    }\n+\n+    task \"${buildVariant}Msal${testType}CoverageReport\" (type:JacocoReport, dependsOn: taskList) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1NTk3NA=="}, "originalCommit": {"oid": "b4760bce99179273c43c403e702abf57b201427c"}, "originalPosition": 46}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1853, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}