{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxODQ2NDIy", "number": 1188, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzoyOToxNVrOEy7I4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxODo1MzoxNlrOEy9MjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxODMzMTg0OnYy", "diffSide": "RIGHT", "path": ".travis.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzoyOToxNVrOHp1n-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzozMDowNFrOHp1qSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMjI1MA==", "bodyText": "Have you thought about checking in a license file?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513632250", "createdAt": "2020-10-28T17:29:15Z", "author": {"login": "AdamBJohnsonx"}, "path": ".travis.yml", "diffHunk": "@@ -1,53 +1,49 @@\n # ./travis.yml for MSAL android\n-language: android\n-jdk: oraclejdk8\n-\n-# Don't use the Travis Container-Based Infrastructure\n-sudo: true\n+dist: bionic\n \n # Build Variables\n env:\n   global:\n-    - BUILD_TOOLS_VERSION=28.0.3\n-    - COMPILE_SDK_VERSION=28\n-    - EMULATOR_API_VERSION=21\n-\n-    # This is to guarantee a clean gradle log\n-    - TERM=dumb\n-\n-android:\n-  components:\n-    - tools\n-    - platform-tools\n-    - build-tools-$BUILD_TOOLS_VERSION\n-    - android-$COMPILE_SDK_VERSION\n-    - extra-google-m2repository\n-\n-    ## Emulator config ##\n-    # The SDK version used for the emulator\n-    - android-$EMULATOR_API_VERSION\n-\n-    #system images\n-    - sys-img-armeabi-v7a-android-$EMULATOR_API_VERSION\n+    - BUILD_TOOLS_VERSION=29.0.3\n+    - API_VERSION=29\n+    - ANDROID_TOOLS=commandlinetools-linux-6609375_latest.zip\n+    - ARCH=x86_64\n \n before_install:\n+  # download and unzip Android SDK command line tools\n+  - sudo apt install openjdk-8-jdk\n+  - export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 \n+  - echo $JAVA_HOME\n+  #- sudo update-alternatives --set java /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n+  - wget -nv https://dl.google.com/android/repository/$ANDROID_TOOLS\n+  - unzip -q $ANDROID_TOOLS -d $HOME/sdk\n+  # set SDK tools path variable and ANDROID_HOME\n+  - export ANDROID_BIN=$HOME/sdk/tools/bin\n+  - export ANDROID_HOME=$HOME/sdk\n+  - export ANDROID_SDK_ROOT=$HOME/sdk\n+  # create empty cfg file to prevent sdkmanager warning message\n+  - mkdir -p $HOME/.android && touch $HOME/.android/repositories.cfg\n   - chmod +x gradlew\n-\n-before_cache:\n-  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock\n-  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/\n-cache:\n-  directories:\n-    - $HOME/.gradle/caches/\n-    - $HOME/.gradle/wrapper/\n-    - $HOME/.android/build-cache\n+  - $ANDROID_BIN/sdkmanager --update --sdk_root=$ANDROID_HOME --no_https --verbose\n+  - yes | $ANDROID_BIN/sdkmanager --install \"tools\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMjg0MA==", "bodyText": "Yes.  I've seen that break in some builds though... so i've opted not to do that for now.  We can revisit if it's performance pain in practice", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513632840", "createdAt": "2020-10-28T17:30:04Z", "author": {"login": "shoatman"}, "path": ".travis.yml", "diffHunk": "@@ -1,53 +1,49 @@\n # ./travis.yml for MSAL android\n-language: android\n-jdk: oraclejdk8\n-\n-# Don't use the Travis Container-Based Infrastructure\n-sudo: true\n+dist: bionic\n \n # Build Variables\n env:\n   global:\n-    - BUILD_TOOLS_VERSION=28.0.3\n-    - COMPILE_SDK_VERSION=28\n-    - EMULATOR_API_VERSION=21\n-\n-    # This is to guarantee a clean gradle log\n-    - TERM=dumb\n-\n-android:\n-  components:\n-    - tools\n-    - platform-tools\n-    - build-tools-$BUILD_TOOLS_VERSION\n-    - android-$COMPILE_SDK_VERSION\n-    - extra-google-m2repository\n-\n-    ## Emulator config ##\n-    # The SDK version used for the emulator\n-    - android-$EMULATOR_API_VERSION\n-\n-    #system images\n-    - sys-img-armeabi-v7a-android-$EMULATOR_API_VERSION\n+    - BUILD_TOOLS_VERSION=29.0.3\n+    - API_VERSION=29\n+    - ANDROID_TOOLS=commandlinetools-linux-6609375_latest.zip\n+    - ARCH=x86_64\n \n before_install:\n+  # download and unzip Android SDK command line tools\n+  - sudo apt install openjdk-8-jdk\n+  - export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 \n+  - echo $JAVA_HOME\n+  #- sudo update-alternatives --set java /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n+  - wget -nv https://dl.google.com/android/repository/$ANDROID_TOOLS\n+  - unzip -q $ANDROID_TOOLS -d $HOME/sdk\n+  # set SDK tools path variable and ANDROID_HOME\n+  - export ANDROID_BIN=$HOME/sdk/tools/bin\n+  - export ANDROID_HOME=$HOME/sdk\n+  - export ANDROID_SDK_ROOT=$HOME/sdk\n+  # create empty cfg file to prevent sdkmanager warning message\n+  - mkdir -p $HOME/.android && touch $HOME/.android/repositories.cfg\n   - chmod +x gradlew\n-\n-before_cache:\n-  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock\n-  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/\n-cache:\n-  directories:\n-    - $HOME/.gradle/caches/\n-    - $HOME/.gradle/wrapper/\n-    - $HOME/.android/build-cache\n+  - $ANDROID_BIN/sdkmanager --update --sdk_root=$ANDROID_HOME --no_https --verbose\n+  - yes | $ANDROID_BIN/sdkmanager --install \"tools\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMjI1MA=="}, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxODMzNjc4OnYy", "diffSide": "RIGHT", "path": "sdks.txt", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzozMDoxOVrOHp1q_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzozNjozMlrOHp17gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzAyMA==", "bodyText": "What's this file for?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513633020", "createdAt": "2020-10-28T17:30:19Z", "author": {"login": "AdamBJohnsonx"}, "path": "sdks.txt", "diffHunk": "@@ -0,0 +1,259 @@\n+Loading package information...                                                  \rLoading local repository...                                                     \r[=========                              ] 25% Loading local repository...       \r[=========                              ] 25% Fetch remote repository...        \r[=========                              ] 25% Fetch remote repository...        \r[==============                         ] 36% Fetch remote repository...        \r[=================                      ] 43% Fetch remote repository...        \r[=================                      ] 44% Fetch remote repository...        \r[==================                     ] 46% Fetch remote repository...        \r[==================                     ] 47% Fetch remote repository...        \r[==================                     ] 47% Fetch remote repository...        \r[===================                    ] 48% Fetch remote repository...        \r[===================                    ] 49% Fetch remote repository...        \r[===================                    ] 50% Fetch remote repository...        \r[====================                   ] 50% Fetch remote repository...        \r[====================                   ] 51% Fetch remote repository...        \r[====================                   ] 52% Fetch remote repository...        \r[=====================                  ] 53% Fetch remote repository...        \r[=====================                  ] 53% Fetch remote repository...        \r[=====================                  ] 54% Fetch remote repository...        \r[=====================                  ] 55% Fetch remote repository...        \r[======================                 ] 56% Fetch remote repository...        \r[======================                 ] 56% Fetch remote repository...        \r[======================                 ] 57% Fetch remote repository...        \r[=======================                ] 58% Fetch remote repository...        \r[=======================                ] 59% Fetch remote repository...        \r[=======================                ] 59% Fetch remote repository...        \r[========================               ] 60% Fetch remote repository...        \r[========================               ] 60% Computing updates...              \r[=============================          ] 75% Computing updates...              \r[=============================          ] 75% Computing updates...              \r[=======================================] 100% Computing updates...             \rInstalled packages:\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzNTk5Ng==", "bodyText": "Just me debugging something.  I'll remove in a separate PR.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513635996", "createdAt": "2020-10-28T17:34:43Z", "author": {"login": "shoatman"}, "path": "sdks.txt", "diffHunk": "@@ -0,0 +1,259 @@\n+Loading package information...                                                  \rLoading local repository...                                                     \r[=========                              ] 25% Loading local repository...       \r[=========                              ] 25% Fetch remote repository...        \r[=========                              ] 25% Fetch remote repository...        \r[==============                         ] 36% Fetch remote repository...        \r[=================                      ] 43% Fetch remote repository...        \r[=================                      ] 44% Fetch remote repository...        \r[==================                     ] 46% Fetch remote repository...        \r[==================                     ] 47% Fetch remote repository...        \r[==================                     ] 47% Fetch remote repository...        \r[===================                    ] 48% Fetch remote repository...        \r[===================                    ] 49% Fetch remote repository...        \r[===================                    ] 50% Fetch remote repository...        \r[====================                   ] 50% Fetch remote repository...        \r[====================                   ] 51% Fetch remote repository...        \r[====================                   ] 52% Fetch remote repository...        \r[=====================                  ] 53% Fetch remote repository...        \r[=====================                  ] 53% Fetch remote repository...        \r[=====================                  ] 54% Fetch remote repository...        \r[=====================                  ] 55% Fetch remote repository...        \r[======================                 ] 56% Fetch remote repository...        \r[======================                 ] 56% Fetch remote repository...        \r[======================                 ] 57% Fetch remote repository...        \r[=======================                ] 58% Fetch remote repository...        \r[=======================                ] 59% Fetch remote repository...        \r[=======================                ] 59% Fetch remote repository...        \r[========================               ] 60% Fetch remote repository...        \r[========================               ] 60% Computing updates...              \r[=============================          ] 75% Computing updates...              \r[=============================          ] 75% Computing updates...              \r[=======================================] 100% Computing updates...             \rInstalled packages:\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzAyMA=="}, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzNzI1MQ==", "bodyText": "I'm going to fix it here.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513637251", "createdAt": "2020-10-28T17:36:32Z", "author": {"login": "shoatman"}, "path": "sdks.txt", "diffHunk": "@@ -0,0 +1,259 @@\n+Loading package information...                                                  \rLoading local repository...                                                     \r[=========                              ] 25% Loading local repository...       \r[=========                              ] 25% Fetch remote repository...        \r[=========                              ] 25% Fetch remote repository...        \r[==============                         ] 36% Fetch remote repository...        \r[=================                      ] 43% Fetch remote repository...        \r[=================                      ] 44% Fetch remote repository...        \r[==================                     ] 46% Fetch remote repository...        \r[==================                     ] 47% Fetch remote repository...        \r[==================                     ] 47% Fetch remote repository...        \r[===================                    ] 48% Fetch remote repository...        \r[===================                    ] 49% Fetch remote repository...        \r[===================                    ] 50% Fetch remote repository...        \r[====================                   ] 50% Fetch remote repository...        \r[====================                   ] 51% Fetch remote repository...        \r[====================                   ] 52% Fetch remote repository...        \r[=====================                  ] 53% Fetch remote repository...        \r[=====================                  ] 53% Fetch remote repository...        \r[=====================                  ] 54% Fetch remote repository...        \r[=====================                  ] 55% Fetch remote repository...        \r[======================                 ] 56% Fetch remote repository...        \r[======================                 ] 56% Fetch remote repository...        \r[======================                 ] 57% Fetch remote repository...        \r[=======================                ] 58% Fetch remote repository...        \r[=======================                ] 59% Fetch remote repository...        \r[=======================                ] 59% Fetch remote repository...        \r[========================               ] 60% Fetch remote repository...        \r[========================               ] 60% Computing updates...              \r[=============================          ] 75% Computing updates...              \r[=============================          ] 75% Computing updates...              \r[=======================================] 100% Computing updates...             \rInstalled packages:\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzAyMA=="}, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxODMzNjk2OnYy", "diffSide": "RIGHT", "path": ".travis.yml", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzozMDoyMlrOHp1rHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzo1NToxOVrOHp2uFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzA1NQ==", "bodyText": "Do we want to use the API_VERSION variable on this line, instead of android-29? Same question for line 31", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513633055", "createdAt": "2020-10-28T17:30:22Z", "author": {"login": "iambmelt"}, "path": ".travis.yml", "diffHunk": "@@ -1,53 +1,49 @@\n # ./travis.yml for MSAL android\n-language: android\n-jdk: oraclejdk8\n-\n-# Don't use the Travis Container-Based Infrastructure\n-sudo: true\n+dist: bionic\n \n # Build Variables\n env:\n   global:\n-    - BUILD_TOOLS_VERSION=28.0.3\n-    - COMPILE_SDK_VERSION=28\n-    - EMULATOR_API_VERSION=21\n-\n-    # This is to guarantee a clean gradle log\n-    - TERM=dumb\n-\n-android:\n-  components:\n-    - tools\n-    - platform-tools\n-    - build-tools-$BUILD_TOOLS_VERSION\n-    - android-$COMPILE_SDK_VERSION\n-    - extra-google-m2repository\n-\n-    ## Emulator config ##\n-    # The SDK version used for the emulator\n-    - android-$EMULATOR_API_VERSION\n-\n-    #system images\n-    - sys-img-armeabi-v7a-android-$EMULATOR_API_VERSION\n+    - BUILD_TOOLS_VERSION=29.0.3\n+    - API_VERSION=29\n+    - ANDROID_TOOLS=commandlinetools-linux-6609375_latest.zip\n+    - ARCH=x86_64\n \n before_install:\n+  # download and unzip Android SDK command line tools\n+  - sudo apt install openjdk-8-jdk\n+  - export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 \n+  - echo $JAVA_HOME\n+  #- sudo update-alternatives --set java /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n+  - wget -nv https://dl.google.com/android/repository/$ANDROID_TOOLS\n+  - unzip -q $ANDROID_TOOLS -d $HOME/sdk\n+  # set SDK tools path variable and ANDROID_HOME\n+  - export ANDROID_BIN=$HOME/sdk/tools/bin\n+  - export ANDROID_HOME=$HOME/sdk\n+  - export ANDROID_SDK_ROOT=$HOME/sdk\n+  # create empty cfg file to prevent sdkmanager warning message\n+  - mkdir -p $HOME/.android && touch $HOME/.android/repositories.cfg\n   - chmod +x gradlew\n-\n-before_cache:\n-  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock\n-  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/\n-cache:\n-  directories:\n-    - $HOME/.gradle/caches/\n-    - $HOME/.gradle/wrapper/\n-    - $HOME/.android/build-cache\n+  - $ANDROID_BIN/sdkmanager --update --sdk_root=$ANDROID_HOME --no_https --verbose\n+  - yes | $ANDROID_BIN/sdkmanager --install \"tools\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true\n+  - yes | $ANDROID_BIN/sdkmanager --install \"platforms;android-29\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzNjU3Nw==", "bodyText": "That was the intention...", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513636577", "createdAt": "2020-10-28T17:35:35Z", "author": {"login": "shoatman"}, "path": ".travis.yml", "diffHunk": "@@ -1,53 +1,49 @@\n # ./travis.yml for MSAL android\n-language: android\n-jdk: oraclejdk8\n-\n-# Don't use the Travis Container-Based Infrastructure\n-sudo: true\n+dist: bionic\n \n # Build Variables\n env:\n   global:\n-    - BUILD_TOOLS_VERSION=28.0.3\n-    - COMPILE_SDK_VERSION=28\n-    - EMULATOR_API_VERSION=21\n-\n-    # This is to guarantee a clean gradle log\n-    - TERM=dumb\n-\n-android:\n-  components:\n-    - tools\n-    - platform-tools\n-    - build-tools-$BUILD_TOOLS_VERSION\n-    - android-$COMPILE_SDK_VERSION\n-    - extra-google-m2repository\n-\n-    ## Emulator config ##\n-    # The SDK version used for the emulator\n-    - android-$EMULATOR_API_VERSION\n-\n-    #system images\n-    - sys-img-armeabi-v7a-android-$EMULATOR_API_VERSION\n+    - BUILD_TOOLS_VERSION=29.0.3\n+    - API_VERSION=29\n+    - ANDROID_TOOLS=commandlinetools-linux-6609375_latest.zip\n+    - ARCH=x86_64\n \n before_install:\n+  # download and unzip Android SDK command line tools\n+  - sudo apt install openjdk-8-jdk\n+  - export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 \n+  - echo $JAVA_HOME\n+  #- sudo update-alternatives --set java /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n+  - wget -nv https://dl.google.com/android/repository/$ANDROID_TOOLS\n+  - unzip -q $ANDROID_TOOLS -d $HOME/sdk\n+  # set SDK tools path variable and ANDROID_HOME\n+  - export ANDROID_BIN=$HOME/sdk/tools/bin\n+  - export ANDROID_HOME=$HOME/sdk\n+  - export ANDROID_SDK_ROOT=$HOME/sdk\n+  # create empty cfg file to prevent sdkmanager warning message\n+  - mkdir -p $HOME/.android && touch $HOME/.android/repositories.cfg\n   - chmod +x gradlew\n-\n-before_cache:\n-  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock\n-  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/\n-cache:\n-  directories:\n-    - $HOME/.gradle/caches/\n-    - $HOME/.gradle/wrapper/\n-    - $HOME/.android/build-cache\n+  - $ANDROID_BIN/sdkmanager --update --sdk_root=$ANDROID_HOME --no_https --verbose\n+  - yes | $ANDROID_BIN/sdkmanager --install \"tools\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true\n+  - yes | $ANDROID_BIN/sdkmanager --install \"platforms;android-29\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzA1NQ=="}, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY0MjYwMQ==", "bodyText": "Do you know how to use this in a travis string?  I assumethere is syntax for this, but couldn't find easily", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513642601", "createdAt": "2020-10-28T17:44:23Z", "author": {"login": "shoatman"}, "path": ".travis.yml", "diffHunk": "@@ -1,53 +1,49 @@\n # ./travis.yml for MSAL android\n-language: android\n-jdk: oraclejdk8\n-\n-# Don't use the Travis Container-Based Infrastructure\n-sudo: true\n+dist: bionic\n \n # Build Variables\n env:\n   global:\n-    - BUILD_TOOLS_VERSION=28.0.3\n-    - COMPILE_SDK_VERSION=28\n-    - EMULATOR_API_VERSION=21\n-\n-    # This is to guarantee a clean gradle log\n-    - TERM=dumb\n-\n-android:\n-  components:\n-    - tools\n-    - platform-tools\n-    - build-tools-$BUILD_TOOLS_VERSION\n-    - android-$COMPILE_SDK_VERSION\n-    - extra-google-m2repository\n-\n-    ## Emulator config ##\n-    # The SDK version used for the emulator\n-    - android-$EMULATOR_API_VERSION\n-\n-    #system images\n-    - sys-img-armeabi-v7a-android-$EMULATOR_API_VERSION\n+    - BUILD_TOOLS_VERSION=29.0.3\n+    - API_VERSION=29\n+    - ANDROID_TOOLS=commandlinetools-linux-6609375_latest.zip\n+    - ARCH=x86_64\n \n before_install:\n+  # download and unzip Android SDK command line tools\n+  - sudo apt install openjdk-8-jdk\n+  - export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 \n+  - echo $JAVA_HOME\n+  #- sudo update-alternatives --set java /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n+  - wget -nv https://dl.google.com/android/repository/$ANDROID_TOOLS\n+  - unzip -q $ANDROID_TOOLS -d $HOME/sdk\n+  # set SDK tools path variable and ANDROID_HOME\n+  - export ANDROID_BIN=$HOME/sdk/tools/bin\n+  - export ANDROID_HOME=$HOME/sdk\n+  - export ANDROID_SDK_ROOT=$HOME/sdk\n+  # create empty cfg file to prevent sdkmanager warning message\n+  - mkdir -p $HOME/.android && touch $HOME/.android/repositories.cfg\n   - chmod +x gradlew\n-\n-before_cache:\n-  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock\n-  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/\n-cache:\n-  directories:\n-    - $HOME/.gradle/caches/\n-    - $HOME/.gradle/wrapper/\n-    - $HOME/.android/build-cache\n+  - $ANDROID_BIN/sdkmanager --update --sdk_root=$ANDROID_HOME --no_https --verbose\n+  - yes | $ANDROID_BIN/sdkmanager --install \"tools\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true\n+  - yes | $ANDROID_BIN/sdkmanager --install \"platforms;android-29\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzA1NQ=="}, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY0ODk5OQ==", "bodyText": "I'm going to work on this one later.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513648999", "createdAt": "2020-10-28T17:53:33Z", "author": {"login": "shoatman"}, "path": ".travis.yml", "diffHunk": "@@ -1,53 +1,49 @@\n # ./travis.yml for MSAL android\n-language: android\n-jdk: oraclejdk8\n-\n-# Don't use the Travis Container-Based Infrastructure\n-sudo: true\n+dist: bionic\n \n # Build Variables\n env:\n   global:\n-    - BUILD_TOOLS_VERSION=28.0.3\n-    - COMPILE_SDK_VERSION=28\n-    - EMULATOR_API_VERSION=21\n-\n-    # This is to guarantee a clean gradle log\n-    - TERM=dumb\n-\n-android:\n-  components:\n-    - tools\n-    - platform-tools\n-    - build-tools-$BUILD_TOOLS_VERSION\n-    - android-$COMPILE_SDK_VERSION\n-    - extra-google-m2repository\n-\n-    ## Emulator config ##\n-    # The SDK version used for the emulator\n-    - android-$EMULATOR_API_VERSION\n-\n-    #system images\n-    - sys-img-armeabi-v7a-android-$EMULATOR_API_VERSION\n+    - BUILD_TOOLS_VERSION=29.0.3\n+    - API_VERSION=29\n+    - ANDROID_TOOLS=commandlinetools-linux-6609375_latest.zip\n+    - ARCH=x86_64\n \n before_install:\n+  # download and unzip Android SDK command line tools\n+  - sudo apt install openjdk-8-jdk\n+  - export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 \n+  - echo $JAVA_HOME\n+  #- sudo update-alternatives --set java /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n+  - wget -nv https://dl.google.com/android/repository/$ANDROID_TOOLS\n+  - unzip -q $ANDROID_TOOLS -d $HOME/sdk\n+  # set SDK tools path variable and ANDROID_HOME\n+  - export ANDROID_BIN=$HOME/sdk/tools/bin\n+  - export ANDROID_HOME=$HOME/sdk\n+  - export ANDROID_SDK_ROOT=$HOME/sdk\n+  # create empty cfg file to prevent sdkmanager warning message\n+  - mkdir -p $HOME/.android && touch $HOME/.android/repositories.cfg\n   - chmod +x gradlew\n-\n-before_cache:\n-  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock\n-  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/\n-cache:\n-  directories:\n-    - $HOME/.gradle/caches/\n-    - $HOME/.gradle/wrapper/\n-    - $HOME/.android/build-cache\n+  - $ANDROID_BIN/sdkmanager --update --sdk_root=$ANDROID_HOME --no_https --verbose\n+  - yes | $ANDROID_BIN/sdkmanager --install \"tools\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true\n+  - yes | $ANDROID_BIN/sdkmanager --install \"platforms;android-29\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzA1NQ=="}, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY1MDE5OQ==", "bodyText": "Is it not just present in the environment that the command is running in? https://docs.travis-ci.com/user/environment-variables/ seems to suggest that.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513650199", "createdAt": "2020-10-28T17:55:19Z", "author": {"login": "AdamBJohnsonx"}, "path": ".travis.yml", "diffHunk": "@@ -1,53 +1,49 @@\n # ./travis.yml for MSAL android\n-language: android\n-jdk: oraclejdk8\n-\n-# Don't use the Travis Container-Based Infrastructure\n-sudo: true\n+dist: bionic\n \n # Build Variables\n env:\n   global:\n-    - BUILD_TOOLS_VERSION=28.0.3\n-    - COMPILE_SDK_VERSION=28\n-    - EMULATOR_API_VERSION=21\n-\n-    # This is to guarantee a clean gradle log\n-    - TERM=dumb\n-\n-android:\n-  components:\n-    - tools\n-    - platform-tools\n-    - build-tools-$BUILD_TOOLS_VERSION\n-    - android-$COMPILE_SDK_VERSION\n-    - extra-google-m2repository\n-\n-    ## Emulator config ##\n-    # The SDK version used for the emulator\n-    - android-$EMULATOR_API_VERSION\n-\n-    #system images\n-    - sys-img-armeabi-v7a-android-$EMULATOR_API_VERSION\n+    - BUILD_TOOLS_VERSION=29.0.3\n+    - API_VERSION=29\n+    - ANDROID_TOOLS=commandlinetools-linux-6609375_latest.zip\n+    - ARCH=x86_64\n \n before_install:\n+  # download and unzip Android SDK command line tools\n+  - sudo apt install openjdk-8-jdk\n+  - export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 \n+  - echo $JAVA_HOME\n+  #- sudo update-alternatives --set java /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n+  - wget -nv https://dl.google.com/android/repository/$ANDROID_TOOLS\n+  - unzip -q $ANDROID_TOOLS -d $HOME/sdk\n+  # set SDK tools path variable and ANDROID_HOME\n+  - export ANDROID_BIN=$HOME/sdk/tools/bin\n+  - export ANDROID_HOME=$HOME/sdk\n+  - export ANDROID_SDK_ROOT=$HOME/sdk\n+  # create empty cfg file to prevent sdkmanager warning message\n+  - mkdir -p $HOME/.android && touch $HOME/.android/repositories.cfg\n   - chmod +x gradlew\n-\n-before_cache:\n-  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock\n-  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/\n-cache:\n-  directories:\n-    - $HOME/.gradle/caches/\n-    - $HOME/.gradle/wrapper/\n-    - $HOME/.android/build-cache\n+  - $ANDROID_BIN/sdkmanager --update --sdk_root=$ANDROID_HOME --no_https --verbose\n+  - yes | $ANDROID_BIN/sdkmanager --install \"tools\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true\n+  - yes | $ANDROID_BIN/sdkmanager --install \"platforms;android-29\" --sdk_root=$ANDROID_HOME --no_https --verbose | grep -v = || true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzA1NQ=="}, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxODMzOTgwOnYy", "diffSide": "RIGHT", "path": "msal/build.gradle", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzozMTowOFrOHp1tFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzozNTowOVrOHp13ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzU1OA==", "bodyText": "No longer needed?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513633558", "createdAt": "2020-10-28T17:31:08Z", "author": {"login": "iambmelt"}, "path": "msal/build.gradle", "diffHunk": "@@ -90,8 +90,8 @@ android {\n                 exclude 'com/microsoft/identity/client/e2e/tests/network'\n             }\n \n-            systemProperty 'robolectric.offline', 'true'\n-            systemProperty 'robolectric.dependency.dir', './libs'\n+            //systemProperty 'robolectric.offline', 'true'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzNjAyOA==", "bodyText": "the problem is that whenever we change target version we need to download the new file and check it in the repo.....I'm thinking we can make it optional via cmd param....similar to how we've done a lot of other things...", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513636028", "createdAt": "2020-10-28T17:34:47Z", "author": {"login": "shahzaibj"}, "path": "msal/build.gradle", "diffHunk": "@@ -90,8 +90,8 @@ android {\n                 exclude 'com/microsoft/identity/client/e2e/tests/network'\n             }\n \n-            systemProperty 'robolectric.offline', 'true'\n-            systemProperty 'robolectric.dependency.dir', './libs'\n+            //systemProperty 'robolectric.offline', 'true'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzU1OA=="}, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzNjI5MQ==", "bodyText": "I can remove the comment.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513636291", "createdAt": "2020-10-28T17:35:09Z", "author": {"login": "shoatman"}, "path": "msal/build.gradle", "diffHunk": "@@ -90,8 +90,8 @@ android {\n                 exclude 'com/microsoft/identity/client/e2e/tests/network'\n             }\n \n-            systemProperty 'robolectric.offline', 'true'\n-            systemProperty 'robolectric.dependency.dir', './libs'\n+            //systemProperty 'robolectric.offline', 'true'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzYzMzU1OA=="}, "originalCommit": {"oid": "dd4ea2206eca087262761f08c0a5c65ed9200a03"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxODY2ODkzOnYy", "diffSide": "RIGHT", "path": ".travis.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxODo1MzoxNlrOHp47LQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxODo1MzoxNlrOHp47LQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY4NjMxNw==", "bodyText": "I don't really know is this will work given travis and the SDK manager, but non-quoted variable expansion is dangerous.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              - $ANDROID_BIN/sdkmanager --update --sdk_root=$ANDROID_HOME --no_https --verbose\n          \n          \n            \n              - $ANDROID_BIN/sdkmanager --update --sdk_root=\"$ANDROID_HOME\" --no_https --verbose", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1188#discussion_r513686317", "createdAt": "2020-10-28T18:53:16Z", "author": {"login": "AdamBJohnsonx"}, "path": ".travis.yml", "diffHunk": "@@ -1,53 +1,49 @@\n # ./travis.yml for MSAL android\n-language: android\n-jdk: oraclejdk8\n-\n-# Don't use the Travis Container-Based Infrastructure\n-sudo: true\n+dist: bionic\n \n # Build Variables\n env:\n   global:\n-    - BUILD_TOOLS_VERSION=28.0.3\n-    - COMPILE_SDK_VERSION=28\n-    - EMULATOR_API_VERSION=21\n-\n-    # This is to guarantee a clean gradle log\n-    - TERM=dumb\n-\n-android:\n-  components:\n-    - tools\n-    - platform-tools\n-    - build-tools-$BUILD_TOOLS_VERSION\n-    - android-$COMPILE_SDK_VERSION\n-    - extra-google-m2repository\n-\n-    ## Emulator config ##\n-    # The SDK version used for the emulator\n-    - android-$EMULATOR_API_VERSION\n-\n-    #system images\n-    - sys-img-armeabi-v7a-android-$EMULATOR_API_VERSION\n+    - BUILD_TOOLS_VERSION=29.0.3\n+    - API_VERSION=29\n+    - ANDROID_TOOLS=commandlinetools-linux-6609375_latest.zip\n+    - ARCH=x86_64\n \n before_install:\n+  # download and unzip Android SDK command line tools\n+  - sudo apt install openjdk-8-jdk\n+  - export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 \n+  - echo $JAVA_HOME\n+  #- sudo update-alternatives --set java /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n+  - wget -nv https://dl.google.com/android/repository/$ANDROID_TOOLS\n+  - unzip -q $ANDROID_TOOLS -d $HOME/sdk\n+  # set SDK tools path variable and ANDROID_HOME\n+  - export ANDROID_BIN=$HOME/sdk/tools/bin\n+  - export ANDROID_HOME=$HOME/sdk\n+  - export ANDROID_SDK_ROOT=$HOME/sdk\n+  # create empty cfg file to prevent sdkmanager warning message\n+  - mkdir -p $HOME/.android && touch $HOME/.android/repositories.cfg\n   - chmod +x gradlew\n-\n-before_cache:\n-  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock\n-  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/\n-cache:\n-  directories:\n-    - $HOME/.gradle/caches/\n-    - $HOME/.gradle/wrapper/\n-    - $HOME/.android/build-cache\n+  - $ANDROID_BIN/sdkmanager --update --sdk_root=$ANDROID_HOME --no_https --verbose", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "885d9d1de4ef9ecc6f070ac38b50823495eebb5c"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1856, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}