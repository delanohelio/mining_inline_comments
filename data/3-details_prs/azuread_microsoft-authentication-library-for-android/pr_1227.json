{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwMDQ5NTI0", "number": 1227, "title": "Automating TestCase 833515", "bodyText": "Automating TestCase 833515:\nPR Link for NavigateTo in google chrome: AzureAD/microsoft-authentication-library-common-for-android#1139", "createdAt": "2020-11-12T17:43:05Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227", "merged": true, "mergeCommit": {"oid": "ef58822611e37207a21f166080f3c6e3492ae56a"}, "closed": true, "closedAt": "2020-12-13T01:36:59Z", "author": {"login": "kkrishnareddy"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdb2MZIAH2gAyNTIwMDQ5NTI0OjU5ZGQxZTAzMWQzNGNiNjBiNTlmZGJlOTllMjhiZTdiMWE4ZTdhNjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlkhwOgH2gAyNTIwMDQ5NTI0OjIwOWVhNDM3MmYyZmRlYzNhNTQ0ZDAyMTM4ODFlMjQxNDk0NDljZGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "59dd1e031d34cb60b59fdbe99e28be7b1a8e7a68", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/59dd1e031d34cb60b59fdbe99e28be7b1a8e7a68", "committedDate": "2020-11-12T17:41:36Z", "message": "Automating TestCase 833515"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/c58bfa23f56376e16598c7a93ddf9ed89dc34200", "committedDate": "2020-11-21T00:08:09Z", "message": "Merge branch 'dev' into kkoppart-TestCase833515"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODU3OTgy", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#pullrequestreview-535857982", "createdAt": "2020-11-21T00:34:34Z", "commit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDozNDozNFrOH3k7Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDozNDozNFrOH3k7Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzODY5OQ==", "bodyText": "will need to uninstall prior to install", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#discussion_r528038699", "createdAt": "2020-11-21T00:34:34Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/src/androidTest/java/com/microsoft/identity/client/msal/automationapp/testpass/broker/TestCase833515.java", "diffHunk": "@@ -0,0 +1,179 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.msal.automationapp.testpass.broker;\n+\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.MultipleAccountPublicClientApplication;\n+import com.microsoft.identity.client.PublicClientApplication;\n+import com.microsoft.identity.client.SingleAccountPublicClientApplication;\n+import com.microsoft.identity.client.exception.MsalException;\n+import com.microsoft.identity.client.msal.automationapp.R;\n+import com.microsoft.identity.client.ui.automation.annotations.SupportedBrokers;\n+import com.microsoft.identity.client.ui.automation.app.AzureSampleApp;\n+import com.microsoft.identity.client.ui.automation.broker.BrokerMicrosoftAuthenticator;\n+import com.microsoft.identity.client.ui.automation.browser.BrowserChrome;\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+import com.microsoft.identity.internal.testutils.labutils.LabConfig;\n+import com.microsoft.identity.internal.testutils.labutils.LabConstants;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserHelper;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserQuery;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+// End My Shift - In Shared device mode, global sign out should work.\n+// https://identitydivision.visualstudio.com/DevEx/_workitems/edit/833515\n+@SupportedBrokers(brokers = {BrokerMicrosoftAuthenticator.class})\n+public class TestCase833515 extends AbstractMsalBrokerTest {\n+\n+    @Test\n+    public void test_833515() throws MsalException, InterruptedException, UiObjectNotFoundException {\n+        // pca should be in MULTIPLE account mode starting out\n+        Assert.assertTrue(mApplication instanceof MultipleAccountPublicClientApplication);\n+\n+        //we should NOT be in shared device mode\n+        Assert.assertFalse(mApplication.isSharedDevice());\n+\n+        // perform shared device registration\n+        mBroker.performSharedDeviceRegistration(\n+                mLoginHint, LabConfig.getCurrentLabConfig().getLabUserPassword()\n+        );\n+\n+        // re-create PCA after device registration\n+        mApplication = PublicClientApplication.create(mContext, getConfigFileResourceId());\n+\n+        // pca should now be in SINGLE account mode\n+        Assert.assertTrue(mApplication instanceof SingleAccountPublicClientApplication);\n+\n+        // we should be in shared device mode\n+        Assert.assertTrue(mApplication.isSharedDevice());\n+\n+        //creating a basic temp user account\n+        final String newUser = LabConstants.TempUserType.BASIC;\n+        final String username = LabUserHelper.loadTempUser(newUser);\n+        String password = LabConfig.getCurrentLabConfig().getLabUserPassword();\n+        Thread.sleep(TimeUnit.SECONDS.toMillis(30));\n+\n+\n+        final SingleAccountPublicClientApplication singleAccountPCA =\n+                (SingleAccountPublicClientApplication) mApplication;\n+\n+        final CountDownLatch latch = new CountDownLatch(1);\n+\n+        // try sign in with an account from the same tenant\n+        singleAccountPCA.signIn(mActivity, username, mScopes, successfulInteractiveCallback(latch));\n+\n+        final PromptHandlerParameters promptHandlerParameters = PromptHandlerParameters.builder()\n+                .loginHint(username)\n+                .sessionExpected(false)\n+                .consentPageExpected(false)\n+                .broker(mBroker)\n+                .prompt(PromptParameter.SELECT_ACCOUNT)\n+                .expectingBrokerAccountChooserActivity(false)\n+                .build();\n+\n+        AadPromptHandler aadPromptHandler = new AadPromptHandler(promptHandlerParameters);\n+        aadPromptHandler.handlePrompt(username, password);\n+\n+        latch.await();\n+\n+        //launching azure sample app and confirming user signed in or not.\n+        final AzureSampleApp azureSampleApp = new AzureSampleApp();\n+        azureSampleApp.install();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "originalPosition": 111}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODU4MTgy", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#pullrequestreview-535858182", "createdAt": "2020-11-21T00:35:31Z", "commit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDozNTozMlrOH3k7_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDozNTozMlrOH3k7_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzODkxMA==", "bodyText": "You don't need to launch and handle first run just to clear storage....you can just call clear directly.....and you already handle launch first run below so you don't need to do it twice", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#discussion_r528038910", "createdAt": "2020-11-21T00:35:32Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/src/androidTest/java/com/microsoft/identity/client/msal/automationapp/testpass/broker/TestCase833515.java", "diffHunk": "@@ -0,0 +1,179 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.msal.automationapp.testpass.broker;\n+\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.MultipleAccountPublicClientApplication;\n+import com.microsoft.identity.client.PublicClientApplication;\n+import com.microsoft.identity.client.SingleAccountPublicClientApplication;\n+import com.microsoft.identity.client.exception.MsalException;\n+import com.microsoft.identity.client.msal.automationapp.R;\n+import com.microsoft.identity.client.ui.automation.annotations.SupportedBrokers;\n+import com.microsoft.identity.client.ui.automation.app.AzureSampleApp;\n+import com.microsoft.identity.client.ui.automation.broker.BrokerMicrosoftAuthenticator;\n+import com.microsoft.identity.client.ui.automation.browser.BrowserChrome;\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+import com.microsoft.identity.internal.testutils.labutils.LabConfig;\n+import com.microsoft.identity.internal.testutils.labutils.LabConstants;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserHelper;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserQuery;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+// End My Shift - In Shared device mode, global sign out should work.\n+// https://identitydivision.visualstudio.com/DevEx/_workitems/edit/833515\n+@SupportedBrokers(brokers = {BrokerMicrosoftAuthenticator.class})\n+public class TestCase833515 extends AbstractMsalBrokerTest {\n+\n+    @Test\n+    public void test_833515() throws MsalException, InterruptedException, UiObjectNotFoundException {\n+        // pca should be in MULTIPLE account mode starting out\n+        Assert.assertTrue(mApplication instanceof MultipleAccountPublicClientApplication);\n+\n+        //we should NOT be in shared device mode\n+        Assert.assertFalse(mApplication.isSharedDevice());\n+\n+        // perform shared device registration\n+        mBroker.performSharedDeviceRegistration(\n+                mLoginHint, LabConfig.getCurrentLabConfig().getLabUserPassword()\n+        );\n+\n+        // re-create PCA after device registration\n+        mApplication = PublicClientApplication.create(mContext, getConfigFileResourceId());\n+\n+        // pca should now be in SINGLE account mode\n+        Assert.assertTrue(mApplication instanceof SingleAccountPublicClientApplication);\n+\n+        // we should be in shared device mode\n+        Assert.assertTrue(mApplication.isSharedDevice());\n+\n+        //creating a basic temp user account\n+        final String newUser = LabConstants.TempUserType.BASIC;\n+        final String username = LabUserHelper.loadTempUser(newUser);\n+        String password = LabConfig.getCurrentLabConfig().getLabUserPassword();\n+        Thread.sleep(TimeUnit.SECONDS.toMillis(30));\n+\n+\n+        final SingleAccountPublicClientApplication singleAccountPCA =\n+                (SingleAccountPublicClientApplication) mApplication;\n+\n+        final CountDownLatch latch = new CountDownLatch(1);\n+\n+        // try sign in with an account from the same tenant\n+        singleAccountPCA.signIn(mActivity, username, mScopes, successfulInteractiveCallback(latch));\n+\n+        final PromptHandlerParameters promptHandlerParameters = PromptHandlerParameters.builder()\n+                .loginHint(username)\n+                .sessionExpected(false)\n+                .consentPageExpected(false)\n+                .broker(mBroker)\n+                .prompt(PromptParameter.SELECT_ACCOUNT)\n+                .expectingBrokerAccountChooserActivity(false)\n+                .build();\n+\n+        AadPromptHandler aadPromptHandler = new AadPromptHandler(promptHandlerParameters);\n+        aadPromptHandler.handlePrompt(username, password);\n+\n+        latch.await();\n+\n+        //launching azure sample app and confirming user signed in or not.\n+        final AzureSampleApp azureSampleApp = new AzureSampleApp();\n+        azureSampleApp.install();\n+        azureSampleApp.launch();\n+        Thread.sleep(TimeUnit.SECONDS.toMillis(5));\n+        azureSampleApp.confirmSignedIn(username);\n+\n+        //signing in chrome browser.\n+        IBrowser chrome = new BrowserChrome();\n+        chrome.launch();\n+        chrome.handleFirstRun();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "originalPosition": 119}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODU4MzE1", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#pullrequestreview-535858315", "createdAt": "2020-11-21T00:36:10Z", "commit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDozNjoxMFrOH3k8ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDozNjoxMFrOH3k8ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzOTAxMg==", "bodyText": "navigateTo is not working....I see this method is TODO....do you have separate PR in common to implement this? Can you link these PRs?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#discussion_r528039012", "createdAt": "2020-11-21T00:36:10Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/src/androidTest/java/com/microsoft/identity/client/msal/automationapp/testpass/broker/TestCase833515.java", "diffHunk": "@@ -0,0 +1,179 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.msal.automationapp.testpass.broker;\n+\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.MultipleAccountPublicClientApplication;\n+import com.microsoft.identity.client.PublicClientApplication;\n+import com.microsoft.identity.client.SingleAccountPublicClientApplication;\n+import com.microsoft.identity.client.exception.MsalException;\n+import com.microsoft.identity.client.msal.automationapp.R;\n+import com.microsoft.identity.client.ui.automation.annotations.SupportedBrokers;\n+import com.microsoft.identity.client.ui.automation.app.AzureSampleApp;\n+import com.microsoft.identity.client.ui.automation.broker.BrokerMicrosoftAuthenticator;\n+import com.microsoft.identity.client.ui.automation.browser.BrowserChrome;\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+import com.microsoft.identity.internal.testutils.labutils.LabConfig;\n+import com.microsoft.identity.internal.testutils.labutils.LabConstants;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserHelper;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserQuery;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+// End My Shift - In Shared device mode, global sign out should work.\n+// https://identitydivision.visualstudio.com/DevEx/_workitems/edit/833515\n+@SupportedBrokers(brokers = {BrokerMicrosoftAuthenticator.class})\n+public class TestCase833515 extends AbstractMsalBrokerTest {\n+\n+    @Test\n+    public void test_833515() throws MsalException, InterruptedException, UiObjectNotFoundException {\n+        // pca should be in MULTIPLE account mode starting out\n+        Assert.assertTrue(mApplication instanceof MultipleAccountPublicClientApplication);\n+\n+        //we should NOT be in shared device mode\n+        Assert.assertFalse(mApplication.isSharedDevice());\n+\n+        // perform shared device registration\n+        mBroker.performSharedDeviceRegistration(\n+                mLoginHint, LabConfig.getCurrentLabConfig().getLabUserPassword()\n+        );\n+\n+        // re-create PCA after device registration\n+        mApplication = PublicClientApplication.create(mContext, getConfigFileResourceId());\n+\n+        // pca should now be in SINGLE account mode\n+        Assert.assertTrue(mApplication instanceof SingleAccountPublicClientApplication);\n+\n+        // we should be in shared device mode\n+        Assert.assertTrue(mApplication.isSharedDevice());\n+\n+        //creating a basic temp user account\n+        final String newUser = LabConstants.TempUserType.BASIC;\n+        final String username = LabUserHelper.loadTempUser(newUser);\n+        String password = LabConfig.getCurrentLabConfig().getLabUserPassword();\n+        Thread.sleep(TimeUnit.SECONDS.toMillis(30));\n+\n+\n+        final SingleAccountPublicClientApplication singleAccountPCA =\n+                (SingleAccountPublicClientApplication) mApplication;\n+\n+        final CountDownLatch latch = new CountDownLatch(1);\n+\n+        // try sign in with an account from the same tenant\n+        singleAccountPCA.signIn(mActivity, username, mScopes, successfulInteractiveCallback(latch));\n+\n+        final PromptHandlerParameters promptHandlerParameters = PromptHandlerParameters.builder()\n+                .loginHint(username)\n+                .sessionExpected(false)\n+                .consentPageExpected(false)\n+                .broker(mBroker)\n+                .prompt(PromptParameter.SELECT_ACCOUNT)\n+                .expectingBrokerAccountChooserActivity(false)\n+                .build();\n+\n+        AadPromptHandler aadPromptHandler = new AadPromptHandler(promptHandlerParameters);\n+        aadPromptHandler.handlePrompt(username, password);\n+\n+        latch.await();\n+\n+        //launching azure sample app and confirming user signed in or not.\n+        final AzureSampleApp azureSampleApp = new AzureSampleApp();\n+        azureSampleApp.install();\n+        azureSampleApp.launch();\n+        Thread.sleep(TimeUnit.SECONDS.toMillis(5));\n+        azureSampleApp.confirmSignedIn(username);\n+\n+        //signing in chrome browser.\n+        IBrowser chrome = new BrowserChrome();\n+        chrome.launch();\n+        chrome.handleFirstRun();\n+        chrome.clear();\n+\n+        //relaunching chrome after clearing history of chrome.\n+        chrome.launch();\n+        chrome.handleFirstRun();\n+        chrome.navigateTo(\"https://myapps.microsoft.com\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "originalPosition": 125}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODU4NDgz", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#pullrequestreview-535858483", "createdAt": "2020-11-21T00:37:01Z", "commit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDozNzowMVrOH3k9AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDozNzowMVrOH3k9AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzOTE2OQ==", "bodyText": "Let's use specific names like nextButton\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    UiObject button = UiAutomatorUtils.obtainUiObjectWithText(\"Next\");\n          \n          \n            \n                    UiObject nextButton = UiAutomatorUtils.obtainUiObjectWithText(\"Next\");", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#discussion_r528039169", "createdAt": "2020-11-21T00:37:01Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/src/androidTest/java/com/microsoft/identity/client/msal/automationapp/testpass/broker/TestCase833515.java", "diffHunk": "@@ -0,0 +1,179 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.msal.automationapp.testpass.broker;\n+\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.MultipleAccountPublicClientApplication;\n+import com.microsoft.identity.client.PublicClientApplication;\n+import com.microsoft.identity.client.SingleAccountPublicClientApplication;\n+import com.microsoft.identity.client.exception.MsalException;\n+import com.microsoft.identity.client.msal.automationapp.R;\n+import com.microsoft.identity.client.ui.automation.annotations.SupportedBrokers;\n+import com.microsoft.identity.client.ui.automation.app.AzureSampleApp;\n+import com.microsoft.identity.client.ui.automation.broker.BrokerMicrosoftAuthenticator;\n+import com.microsoft.identity.client.ui.automation.browser.BrowserChrome;\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+import com.microsoft.identity.internal.testutils.labutils.LabConfig;\n+import com.microsoft.identity.internal.testutils.labutils.LabConstants;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserHelper;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserQuery;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+// End My Shift - In Shared device mode, global sign out should work.\n+// https://identitydivision.visualstudio.com/DevEx/_workitems/edit/833515\n+@SupportedBrokers(brokers = {BrokerMicrosoftAuthenticator.class})\n+public class TestCase833515 extends AbstractMsalBrokerTest {\n+\n+    @Test\n+    public void test_833515() throws MsalException, InterruptedException, UiObjectNotFoundException {\n+        // pca should be in MULTIPLE account mode starting out\n+        Assert.assertTrue(mApplication instanceof MultipleAccountPublicClientApplication);\n+\n+        //we should NOT be in shared device mode\n+        Assert.assertFalse(mApplication.isSharedDevice());\n+\n+        // perform shared device registration\n+        mBroker.performSharedDeviceRegistration(\n+                mLoginHint, LabConfig.getCurrentLabConfig().getLabUserPassword()\n+        );\n+\n+        // re-create PCA after device registration\n+        mApplication = PublicClientApplication.create(mContext, getConfigFileResourceId());\n+\n+        // pca should now be in SINGLE account mode\n+        Assert.assertTrue(mApplication instanceof SingleAccountPublicClientApplication);\n+\n+        // we should be in shared device mode\n+        Assert.assertTrue(mApplication.isSharedDevice());\n+\n+        //creating a basic temp user account\n+        final String newUser = LabConstants.TempUserType.BASIC;\n+        final String username = LabUserHelper.loadTempUser(newUser);\n+        String password = LabConfig.getCurrentLabConfig().getLabUserPassword();\n+        Thread.sleep(TimeUnit.SECONDS.toMillis(30));\n+\n+\n+        final SingleAccountPublicClientApplication singleAccountPCA =\n+                (SingleAccountPublicClientApplication) mApplication;\n+\n+        final CountDownLatch latch = new CountDownLatch(1);\n+\n+        // try sign in with an account from the same tenant\n+        singleAccountPCA.signIn(mActivity, username, mScopes, successfulInteractiveCallback(latch));\n+\n+        final PromptHandlerParameters promptHandlerParameters = PromptHandlerParameters.builder()\n+                .loginHint(username)\n+                .sessionExpected(false)\n+                .consentPageExpected(false)\n+                .broker(mBroker)\n+                .prompt(PromptParameter.SELECT_ACCOUNT)\n+                .expectingBrokerAccountChooserActivity(false)\n+                .build();\n+\n+        AadPromptHandler aadPromptHandler = new AadPromptHandler(promptHandlerParameters);\n+        aadPromptHandler.handlePrompt(username, password);\n+\n+        latch.await();\n+\n+        //launching azure sample app and confirming user signed in or not.\n+        final AzureSampleApp azureSampleApp = new AzureSampleApp();\n+        azureSampleApp.install();\n+        azureSampleApp.launch();\n+        Thread.sleep(TimeUnit.SECONDS.toMillis(5));\n+        azureSampleApp.confirmSignedIn(username);\n+\n+        //signing in chrome browser.\n+        IBrowser chrome = new BrowserChrome();\n+        chrome.launch();\n+        chrome.handleFirstRun();\n+        chrome.clear();\n+\n+        //relaunching chrome after clearing history of chrome.\n+        chrome.launch();\n+        chrome.handleFirstRun();\n+        chrome.navigateTo(\"https://myapps.microsoft.com\");\n+        UiAutomatorUtils.handleInput(\"i0116\", username);\n+        UiObject button = UiAutomatorUtils.obtainUiObjectWithText(\"Next\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "originalPosition": 127}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODU4Njkz", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#pullrequestreview-535858693", "createdAt": "2020-11-21T00:38:02Z", "commit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDozODowMlrOH3k90Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDozODowMlrOH3k90Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzOTM3Nw==", "bodyText": "This name is confusing....it saves account but the text on it seems to be No? Let's use more appropriate variable names", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#discussion_r528039377", "createdAt": "2020-11-21T00:38:02Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/src/androidTest/java/com/microsoft/identity/client/msal/automationapp/testpass/broker/TestCase833515.java", "diffHunk": "@@ -0,0 +1,179 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.msal.automationapp.testpass.broker;\n+\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.MultipleAccountPublicClientApplication;\n+import com.microsoft.identity.client.PublicClientApplication;\n+import com.microsoft.identity.client.SingleAccountPublicClientApplication;\n+import com.microsoft.identity.client.exception.MsalException;\n+import com.microsoft.identity.client.msal.automationapp.R;\n+import com.microsoft.identity.client.ui.automation.annotations.SupportedBrokers;\n+import com.microsoft.identity.client.ui.automation.app.AzureSampleApp;\n+import com.microsoft.identity.client.ui.automation.broker.BrokerMicrosoftAuthenticator;\n+import com.microsoft.identity.client.ui.automation.browser.BrowserChrome;\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+import com.microsoft.identity.internal.testutils.labutils.LabConfig;\n+import com.microsoft.identity.internal.testutils.labutils.LabConstants;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserHelper;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserQuery;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+// End My Shift - In Shared device mode, global sign out should work.\n+// https://identitydivision.visualstudio.com/DevEx/_workitems/edit/833515\n+@SupportedBrokers(brokers = {BrokerMicrosoftAuthenticator.class})\n+public class TestCase833515 extends AbstractMsalBrokerTest {\n+\n+    @Test\n+    public void test_833515() throws MsalException, InterruptedException, UiObjectNotFoundException {\n+        // pca should be in MULTIPLE account mode starting out\n+        Assert.assertTrue(mApplication instanceof MultipleAccountPublicClientApplication);\n+\n+        //we should NOT be in shared device mode\n+        Assert.assertFalse(mApplication.isSharedDevice());\n+\n+        // perform shared device registration\n+        mBroker.performSharedDeviceRegistration(\n+                mLoginHint, LabConfig.getCurrentLabConfig().getLabUserPassword()\n+        );\n+\n+        // re-create PCA after device registration\n+        mApplication = PublicClientApplication.create(mContext, getConfigFileResourceId());\n+\n+        // pca should now be in SINGLE account mode\n+        Assert.assertTrue(mApplication instanceof SingleAccountPublicClientApplication);\n+\n+        // we should be in shared device mode\n+        Assert.assertTrue(mApplication.isSharedDevice());\n+\n+        //creating a basic temp user account\n+        final String newUser = LabConstants.TempUserType.BASIC;\n+        final String username = LabUserHelper.loadTempUser(newUser);\n+        String password = LabConfig.getCurrentLabConfig().getLabUserPassword();\n+        Thread.sleep(TimeUnit.SECONDS.toMillis(30));\n+\n+\n+        final SingleAccountPublicClientApplication singleAccountPCA =\n+                (SingleAccountPublicClientApplication) mApplication;\n+\n+        final CountDownLatch latch = new CountDownLatch(1);\n+\n+        // try sign in with an account from the same tenant\n+        singleAccountPCA.signIn(mActivity, username, mScopes, successfulInteractiveCallback(latch));\n+\n+        final PromptHandlerParameters promptHandlerParameters = PromptHandlerParameters.builder()\n+                .loginHint(username)\n+                .sessionExpected(false)\n+                .consentPageExpected(false)\n+                .broker(mBroker)\n+                .prompt(PromptParameter.SELECT_ACCOUNT)\n+                .expectingBrokerAccountChooserActivity(false)\n+                .build();\n+\n+        AadPromptHandler aadPromptHandler = new AadPromptHandler(promptHandlerParameters);\n+        aadPromptHandler.handlePrompt(username, password);\n+\n+        latch.await();\n+\n+        //launching azure sample app and confirming user signed in or not.\n+        final AzureSampleApp azureSampleApp = new AzureSampleApp();\n+        azureSampleApp.install();\n+        azureSampleApp.launch();\n+        Thread.sleep(TimeUnit.SECONDS.toMillis(5));\n+        azureSampleApp.confirmSignedIn(username);\n+\n+        //signing in chrome browser.\n+        IBrowser chrome = new BrowserChrome();\n+        chrome.launch();\n+        chrome.handleFirstRun();\n+        chrome.clear();\n+\n+        //relaunching chrome after clearing history of chrome.\n+        chrome.launch();\n+        chrome.handleFirstRun();\n+        chrome.navigateTo(\"https://myapps.microsoft.com\");\n+        UiAutomatorUtils.handleInput(\"i0116\", username);\n+        UiObject button = UiAutomatorUtils.obtainUiObjectWithText(\"Next\");\n+        button.click();\n+        UiAutomatorUtils.handleInput(\"i0118\", password);\n+        UiAutomatorUtils.handleButtonClick(\"idSIButton9\");\n+        final UiObject saveAccount = UiAutomatorUtils.obtainUiObjectWithText(\"No\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "originalPosition": 131}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODU4ODA5", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#pullrequestreview-535858809", "createdAt": "2020-11-21T00:38:37Z", "commit": {"oid": "c58bfa23f56376e16598c7a93ddf9ed89dc34200"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee6dd3f3642379aa283e1f34d32db5a061a01457", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/ee6dd3f3642379aa283e1f34d32db5a061a01457", "committedDate": "2020-11-23T14:31:56Z", "message": "resolving PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05f7bf17dcf5054fc68b751fe740ab02ccccf01c", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/05f7bf17dcf5054fc68b751fe740ab02ccccf01c", "committedDate": "2020-11-23T14:32:13Z", "message": "Merge branch 'kkoppart-TestCase833515' of https://github.com/AzureAD/microsoft-authentication-library-for-android into kkoppart-TestCase833515"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "945ad644625bd5160754125d5e5135e83ac15b12", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/945ad644625bd5160754125d5e5135e83ac15b12", "committedDate": "2020-11-23T14:35:10Z", "message": "resolving PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f472e77bb977b8d42432c8b5c3fcadeedbe35df5", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/f472e77bb977b8d42432c8b5c3fcadeedbe35df5", "committedDate": "2020-11-23T14:41:29Z", "message": "adding supported broker to the testcase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62e32c6d05676ed224d8e52a468ff94774f4795d", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/62e32c6d05676ed224d8e52a468ff94774f4795d", "committedDate": "2020-11-25T05:53:37Z", "message": "NavigateTo using BrowserChrome"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "551795a605b301f8cbbf24f80affb226923f24a2", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/551795a605b301f8cbbf24f80affb226923f24a2", "committedDate": "2020-11-26T20:05:23Z", "message": "Merge branch 'dev' into kkoppart-TestCase833515"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5NTc5MzQz", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#pullrequestreview-539579343", "createdAt": "2020-11-26T23:40:25Z", "commit": {"oid": "551795a605b301f8cbbf24f80affb226923f24a2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQyMzo0MDoyNVrOH6pMiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQyMzo0MDoyNVrOH6pMiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTI1NDQwOA==", "bodyText": "Can we avoid throwing the MsalException and UiObjectNotFoundException directly from the test? and rather just handle them within the test and throw it from the test by wrapping it into an AssertionError", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#discussion_r531254408", "createdAt": "2020-11-26T23:40:25Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/src/androidTest/java/com/microsoft/identity/client/msal/automationapp/testpass/broker/TestCase833515.java", "diffHunk": "@@ -0,0 +1,184 @@\n+//  Copyright (c) Microsoft Corporation.\n+//  All rights reserved.\n+//\n+//  This code is licensed under the MIT License.\n+//\n+//  Permission is hereby granted, free of charge, to any person obtaining a copy\n+//  of this software and associated documentation files(the \"Software\"), to deal\n+//  in the Software without restriction, including without limitation the rights\n+//  to use, copy, modify, merge, publish, distribute, sublicense, and / or sell\n+//  copies of the Software, and to permit persons to whom the Software is\n+//  furnished to do so, subject to the following conditions :\n+//\n+//  The above copyright notice and this permission notice shall be included in\n+//  all copies or substantial portions of the Software.\n+//\n+//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+//  THE SOFTWARE.\n+package com.microsoft.identity.client.msal.automationapp.testpass.broker;\n+\n+import androidx.test.platform.app.InstrumentationRegistry;\n+import androidx.test.uiautomator.UiDevice;\n+import androidx.test.uiautomator.UiObject;\n+import androidx.test.uiautomator.UiObjectNotFoundException;\n+\n+import com.microsoft.identity.client.MultipleAccountPublicClientApplication;\n+import com.microsoft.identity.client.PublicClientApplication;\n+import com.microsoft.identity.client.SingleAccountPublicClientApplication;\n+import com.microsoft.identity.client.exception.MsalException;\n+import com.microsoft.identity.client.msal.automationapp.R;\n+import com.microsoft.identity.client.ui.automation.annotations.SupportedBrokers;\n+import com.microsoft.identity.client.ui.automation.app.AzureSampleApp;\n+import com.microsoft.identity.client.ui.automation.broker.BrokerHost;\n+import com.microsoft.identity.client.ui.automation.broker.BrokerMicrosoftAuthenticator;\n+import com.microsoft.identity.client.ui.automation.browser.BrowserChrome;\n+import com.microsoft.identity.client.ui.automation.browser.IBrowser;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptHandlerParameters;\n+import com.microsoft.identity.client.ui.automation.interaction.PromptParameter;\n+import com.microsoft.identity.client.ui.automation.interaction.microsoftsts.AadPromptHandler;\n+import com.microsoft.identity.client.ui.automation.utils.UiAutomatorUtils;\n+import com.microsoft.identity.internal.testutils.labutils.LabConfig;\n+import com.microsoft.identity.internal.testutils.labutils.LabConstants;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserHelper;\n+import com.microsoft.identity.internal.testutils.labutils.LabUserQuery;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+\n+// End My Shift - In Shared device mode, global sign out should work.\n+// https://identitydivision.visualstudio.com/DevEx/_workitems/edit/833515\n+@SupportedBrokers(brokers = {BrokerMicrosoftAuthenticator.class, BrokerHost.class})\n+public class TestCase833515 extends AbstractMsalBrokerTest {\n+\n+    @Test\n+    public void test_833515() throws MsalException, InterruptedException, UiObjectNotFoundException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "551795a605b301f8cbbf24f80affb226923f24a2"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "734dc2046f0b19fc45ae3d20b70bae3a80305982", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/734dc2046f0b19fc45ae3d20b70bae3a80305982", "committedDate": "2020-12-01T12:33:04Z", "message": "No need to launch Chrome for clearing chrome history"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ed005ec26965bc815d39c006f097623f7541cbe", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/7ed005ec26965bc815d39c006f097623f7541cbe", "committedDate": "2020-12-01T12:33:21Z", "message": "Merge branch 'kkoppart-TestCase833515' of https://github.com/AzureAD/microsoft-authentication-library-for-android into kkoppart-TestCase833515"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca15fdf3ef5a3ec75daccda43fda3070ae23edb4", "author": {"user": {"login": "kkrishnareddy", "name": "krishna reddy kopparthy"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/ca15fdf3ef5a3ec75daccda43fda3070ae23edb4", "committedDate": "2020-12-02T00:32:39Z", "message": "Asserting UI Objects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20198a13aaa0c3575d667c4f56b995b25119ba65", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/20198a13aaa0c3575d667c4f56b995b25119ba65", "committedDate": "2020-12-12T18:25:43Z", "message": "Merge branch 'dev' into kkoppart-TestCase833515"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "769f65f0b9c8e2339a56058ad46f9a70a2be48f9", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/769f65f0b9c8e2339a56058ad46f9a70a2be48f9", "committedDate": "2020-12-12T19:34:54Z", "message": "Improve test 833515"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODU4NTY3", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1227#pullrequestreview-550858567", "createdAt": "2020-12-12T20:08:00Z", "commit": {"oid": "769f65f0b9c8e2339a56058ad46f9a70a2be48f9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "209ea4372f2fdec3a544d0213881e24149449cde", "author": {"user": {"login": "shahzaibj", "name": "Shahzaib"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/209ea4372f2fdec3a544d0213881e24149449cde", "committedDate": "2020-12-12T22:45:53Z", "message": "Update common"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1296, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}