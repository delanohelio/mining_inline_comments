{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1Nzg1NjU2", "number": 989, "title": "Adding default proguard config to project repo, relocating from readme", "bodyText": "Based on feedback in #987 - moving this config out of readme and including by default\nrelated:\n\n#982\n#513\n#613", "createdAt": "2020-03-30T17:14:15Z", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989", "merged": true, "mergeCommit": {"oid": "5356c2f257a9d712252779b52dfe8eb2db79204b"}, "closed": true, "closedAt": "2020-04-01T01:37:12Z", "author": {"login": "iambmelt"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSxsuRgH2gAyMzk1Nzg1NjU2Ojc0YTZjMzhlZDM1MjFmMWYzYmZkZmYwOWI4MjI4NjA3NDhkZjFmNzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTNhJigFqTM4NTIxMjIyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "74a6c38ed3521f1f3bfdff09b822860748df1f70", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/74a6c38ed3521f1f3bfdff09b822860748df1f70", "committedDate": "2020-03-30T17:10:55Z", "message": "Adding default proguard config to project repo, relocating from readme"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MDY3MzYz", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989#pullrequestreview-384067363", "createdAt": "2020-03-30T17:17:56Z", "commit": {"oid": "74a6c38ed3521f1f3bfdff09b822860748df1f70"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNzoxNzo1NlrOF90CmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNzoxNzo1NlrOF90CmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDM2MDA4OQ==", "bodyText": "Do we still need this bit in README?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989#discussion_r400360089", "createdAt": "2020-03-30T17:17:56Z", "author": {"login": "shahzaibj"}, "path": "README.md", "diffHunk": "@@ -205,45 +205,6 @@ if(account != null){\n ## ProGuard\n MSAL uses reflection and generic type information stored in `.class` files at runtime to support various persistence and serialization related functionalities. Accordingly, library support for minification and obfuscation is limited. For reliability, we recommend developers exclude the Microsoft package from ProGuard.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74a6c38ed3521f1f3bfdff09b822860748df1f70"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79d2152a68852c70c8cb7a4cf72dd6377d32524f", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/79d2152a68852c70c8cb7a4cf72dd6377d32524f", "committedDate": "2020-03-30T18:29:54Z", "message": "Refine readme"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MTQxNzUz", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989#pullrequestreview-384141753", "createdAt": "2020-03-30T18:57:18Z", "commit": {"oid": "79d2152a68852c70c8cb7a4cf72dd6377d32524f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MTQ3OTUw", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989#pullrequestreview-384147950", "createdAt": "2020-03-30T19:06:06Z", "commit": {"oid": "79d2152a68852c70c8cb7a4cf72dd6377d32524f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6d22b7932aa836a56ba210fa96d0f648353e011", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/c6d22b7932aa836a56ba210fa96d0f648353e011", "committedDate": "2020-03-30T19:08:28Z", "message": "Update submodule to latest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MTU2MTQ2", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989#pullrequestreview-384156146", "createdAt": "2020-03-30T19:18:00Z", "commit": {"oid": "c6d22b7932aa836a56ba210fa96d0f648353e011"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6441ee7d2c9b0bcff6dc446846f3fb596442c9ac", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/6441ee7d2c9b0bcff6dc446846f3fb596442c9ac", "committedDate": "2020-03-30T20:28:20Z", "message": "Merge branch 'dev' into iambmelt/add-pg-config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NDI2OTEz", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989#pullrequestreview-384426913", "createdAt": "2020-03-31T06:12:32Z", "commit": {"oid": "74a6c38ed3521f1f3bfdff09b822860748df1f70"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjoxMjozMlrOF-Gq3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjoxMjozMlrOF-Gq3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY2NTMwOQ==", "bodyText": "It's not really the idea behind a Proguard configuration file to keep all files of the library. You're supposed to only keep classes that are accessed through JNI or reflection:\nhttps://developer.android.com/studio/build/shrink-code#keep-code\nOtherwise, it removes the purpose of shrinking and obfuscation.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989#discussion_r400665309", "createdAt": "2020-03-31T06:12:32Z", "author": {"login": "guillaume-tgl"}, "path": "msal/proguard-rules.pro", "diffHunk": "@@ -15,3 +15,36 @@\n #-keepclassmembers class fqcn.of.javascript.interface.for.webview {\n #   public *;\n #}\n+\n+##---------------Begin: proguard configuration for MSAL  --------\n+-keep class com.microsoft.** { *; }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74a6c38ed3521f1f3bfdff09b822860748df1f70"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0Nzk4MzE0", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989#pullrequestreview-384798314", "createdAt": "2020-03-31T14:36:34Z", "commit": {"oid": "6441ee7d2c9b0bcff6dc446846f3fb596442c9ac"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDozNjozNVrOF-Y9aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNDozNjozNVrOF-Y9aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk2NDk3MQ==", "bodyText": "In order for proguard/R8 to be able to pick up and use these default rules you have to reference your .pro file(s) from the build.gradle file. Specifying consumerProguardFiles for the release build type is what does this, see this example:\nhttps://github.com/JakeWharton/ThreeTenABP/pull/12/files#diff-91f078d04c55297c16043badd6a8b960R33-R38", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989#discussion_r400964971", "createdAt": "2020-03-31T14:36:35Z", "author": {"login": "joshfriend"}, "path": "README.md", "diffHunk": "@@ -203,46 +203,7 @@ if(account != null){\n ```\n \n ## ProGuard\n-MSAL uses reflection and generic type information stored in `.class` files at runtime to support various persistence and serialization related functionalities. Accordingly, library support for minification and obfuscation is limited. For reliability, we recommend developers exclude the Microsoft package from ProGuard.\n-\n-Preserve MSAL classes:\n-```\n--keep class com.microsoft.** { *; }\n-```\n-\n-Users of MSAL must manually add the ProGuard configuration for Gson and Nimbus, dependencies of this library. An example configuration for [Gson 2.8.5](https://github.com/google/gson/releases/tag/gson-parent-2.8.5) and [Nimbus JOSE + JWT](https://search.maven.org/artifact/com.nimbusds/nimbus-jose-jwt) can be found below. Developers are encouraged to consult the documentation of relevant dependencies for the most up-to-date ProGuard guidance.\n-\n-```\n-##---------------Begin: proguard configuration for Gson  ----------\n-# Gson uses generic type information stored in a class file when working with fields. Proguard\n-# removes such information by default, so configure it to keep all of it.\n--keepattributes Signature\n-\n-# For using GSON @Expose annotation\n--keepattributes *Annotation*\n-\n-# Gson specific classes\n--dontwarn sun.misc.**\n-#-keep class com.google.gson.stream.** { *; }\n-\n-# Application classes that will be serialized/deserialized over Gson\n--keep class com.google.gson.examples.android.model.** { <fields>; }\n-\n-# Prevent proguard from stripping interface information from TypeAdapter, TypeAdapterFactory,\n-# JsonSerializer, JsonDeserializer instances (so they can be used in @JsonAdapter)\n--keep class * implements com.google.gson.TypeAdapter\n--keep class * implements com.google.gson.TypeAdapterFactory\n--keep class * implements com.google.gson.JsonSerializer\n--keep class * implements com.google.gson.JsonDeserializer\n-\n-# Prevent R8 from leaving Data object members always null\n--keepclassmembers,allowobfuscation class * {\n-  @com.google.gson.annotations.SerializedName <fields>;\n-}\n-\n-##---------------Begin: proguard configuration for Nimbus  ----------\n--keep class com.nimbusds.** { *; }\n-```\n+MSAL uses reflection and generic type information stored in `.class` files at runtime to support various persistence and serialization related functionalities. Accordingly, library support for minification and obfuscation is limited. A default configuration is shipped with this library; please [file an issue](https://github.com/AzureAD/microsoft-authentication-library-for-android/issues/new/choose) if you find any issues.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6441ee7d2c9b0bcff6dc446846f3fb596442c9ac"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7437a3f552c020183d1070be30407c83b1b8c39c", "author": {"user": {"login": "iambmelt", "name": "Brian Melton-Grace"}}, "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/commit/7437a3f552c020183d1070be30407c83b1b8c39c", "committedDate": "2020-03-31T20:58:53Z", "message": "Updating gradle release type + renaming proguard rules file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MjEyMjI0", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/989#pullrequestreview-385212224", "createdAt": "2020-04-01T01:35:37Z", "commit": {"oid": "7437a3f552c020183d1070be30407c83b1b8c39c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1324, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}