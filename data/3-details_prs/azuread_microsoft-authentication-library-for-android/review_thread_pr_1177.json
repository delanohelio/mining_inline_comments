{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NjYwNjA0", "number": 1177, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNjo0NTozNVrOErRHaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNjo0NTozNVrOErRHaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzODA0NjQ4OnYy", "diffSide": "RIGHT", "path": "msalautomationapp/build.gradle", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNjo0NTozNVrOHd8YvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNzowOTo1MlrOHd9VHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE2MDEyNA==", "bodyText": "How does this work? Does it matter what flavor/build the automation test app is built with?\nShould we use the signature hash of the APKs instead to see if the combination is valid?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1177#discussion_r501160124", "createdAt": "2020-10-07T16:45:35Z", "author": {"login": "rpdome"}, "path": "msalautomationapp/build.gradle", "diffHunk": "@@ -50,26 +50,60 @@ android {\n         }\n     }\n \n-    testBuildType = \"release\"\n+    testBuildType = \"debug\"\n \n     lintOptions {\n         abortOnError false\n     }\n \n-    flavorDimensions \"main\"\n+    flavorDimensions \"main\", \"broker\"\n \n     productFlavors {\n         local {\n+            dimension \"main\"\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-local\"\n             resValue(\"string\", \"application_name\", \"msal-local\")\n         }\n         dist {\n+            dimension \"main\"\n             // Keep .local because the redirect url we registered on the portal contains .local, not .dist\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-dist\"\n             resValue(\"string\", \"application_name\", \"msal-dist\")\n         }\n+\n+        BrokerMicrosoftAuthenticator {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerCompanyPortal {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerHost {\n+            dimension \"broker\"\n+        }\n+    }\n+\n+    variantFilter { variant ->\n+        def flavorName = variant.flavors*.name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2e68974b30c6010c77c4b6b8e3dff38d3733ecd"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE2Mzg3Nw==", "bodyText": "All we are doing here is excluding specific build variants from gradle because such variants are just not supported under any circumstance. For instance, we don't support using Company Portal with a localDebug build of MSAL because MSAL will just not talk to it.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1177#discussion_r501163877", "createdAt": "2020-10-07T16:51:10Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/build.gradle", "diffHunk": "@@ -50,26 +50,60 @@ android {\n         }\n     }\n \n-    testBuildType = \"release\"\n+    testBuildType = \"debug\"\n \n     lintOptions {\n         abortOnError false\n     }\n \n-    flavorDimensions \"main\"\n+    flavorDimensions \"main\", \"broker\"\n \n     productFlavors {\n         local {\n+            dimension \"main\"\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-local\"\n             resValue(\"string\", \"application_name\", \"msal-local\")\n         }\n         dist {\n+            dimension \"main\"\n             // Keep .local because the redirect url we registered on the portal contains .local, not .dist\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-dist\"\n             resValue(\"string\", \"application_name\", \"msal-dist\")\n         }\n+\n+        BrokerMicrosoftAuthenticator {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerCompanyPortal {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerHost {\n+            dimension \"broker\"\n+        }\n+    }\n+\n+    variantFilter { variant ->\n+        def flavorName = variant.flavors*.name", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE2MDEyNA=="}, "originalCommit": {"oid": "f2e68974b30c6010c77c4b6b8e3dff38d3733ecd"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE2NjUzOQ==", "bodyText": "So we aren't checking here if a specific flavor of MSAL can work with a specific flavor of broker. All we are doing here is just excluding some variants that we don't support in the MSAL Automation App (at least as of today).", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1177#discussion_r501166539", "createdAt": "2020-10-07T16:55:23Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/build.gradle", "diffHunk": "@@ -50,26 +50,60 @@ android {\n         }\n     }\n \n-    testBuildType = \"release\"\n+    testBuildType = \"debug\"\n \n     lintOptions {\n         abortOnError false\n     }\n \n-    flavorDimensions \"main\"\n+    flavorDimensions \"main\", \"broker\"\n \n     productFlavors {\n         local {\n+            dimension \"main\"\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-local\"\n             resValue(\"string\", \"application_name\", \"msal-local\")\n         }\n         dist {\n+            dimension \"main\"\n             // Keep .local because the redirect url we registered on the portal contains .local, not .dist\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-dist\"\n             resValue(\"string\", \"application_name\", \"msal-dist\")\n         }\n+\n+        BrokerMicrosoftAuthenticator {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerCompanyPortal {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerHost {\n+            dimension \"broker\"\n+        }\n+    }\n+\n+    variantFilter { variant ->\n+        def flavorName = variant.flavors*.name", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE2MDEyNA=="}, "originalCommit": {"oid": "f2e68974b30c6010c77c4b6b8e3dff38d3733ecd"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE3NDA3OA==", "bodyText": "what I meant is that I can technically upload MSAL/Broker with any build/flavor and pick the 'right' build/flavor for the msalautomationapp, right?", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1177#discussion_r501174078", "createdAt": "2020-10-07T17:07:21Z", "author": {"login": "rpdome"}, "path": "msalautomationapp/build.gradle", "diffHunk": "@@ -50,26 +50,60 @@ android {\n         }\n     }\n \n-    testBuildType = \"release\"\n+    testBuildType = \"debug\"\n \n     lintOptions {\n         abortOnError false\n     }\n \n-    flavorDimensions \"main\"\n+    flavorDimensions \"main\", \"broker\"\n \n     productFlavors {\n         local {\n+            dimension \"main\"\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-local\"\n             resValue(\"string\", \"application_name\", \"msal-local\")\n         }\n         dist {\n+            dimension \"main\"\n             // Keep .local because the redirect url we registered on the portal contains .local, not .dist\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-dist\"\n             resValue(\"string\", \"application_name\", \"msal-dist\")\n         }\n+\n+        BrokerMicrosoftAuthenticator {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerCompanyPortal {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerHost {\n+            dimension \"broker\"\n+        }\n+    }\n+\n+    variantFilter { variant ->\n+        def flavorName = variant.flavors*.name", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE2MDEyNA=="}, "originalCommit": {"oid": "f2e68974b30c6010c77c4b6b8e3dff38d3733ecd"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE3NTU4MQ==", "bodyText": "Broker yes.....MSAL is selected by the build variant (local vs dist).\nSo yes technically you can select Broker flavor as BrokerHost and instead supply Authenticator app when running the automation. In that case the tests will fail because the tests will be looking for a BrokerHost apk and if they don't find it then they will fail.", "url": "https://github.com/AzureAD/microsoft-authentication-library-for-android/pull/1177#discussion_r501175581", "createdAt": "2020-10-07T17:09:52Z", "author": {"login": "shahzaibj"}, "path": "msalautomationapp/build.gradle", "diffHunk": "@@ -50,26 +50,60 @@ android {\n         }\n     }\n \n-    testBuildType = \"release\"\n+    testBuildType = \"debug\"\n \n     lintOptions {\n         abortOnError false\n     }\n \n-    flavorDimensions \"main\"\n+    flavorDimensions \"main\", \"broker\"\n \n     productFlavors {\n         local {\n+            dimension \"main\"\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-local\"\n             resValue(\"string\", \"application_name\", \"msal-local\")\n         }\n         dist {\n+            dimension \"main\"\n             // Keep .local because the redirect url we registered on the portal contains .local, not .dist\n             applicationIdSuffix \".local\"\n             versionNameSuffix \"-dist\"\n             resValue(\"string\", \"application_name\", \"msal-dist\")\n         }\n+\n+        BrokerMicrosoftAuthenticator {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerCompanyPortal {\n+            dimension \"broker\"\n+        }\n+\n+        BrokerHost {\n+            dimension \"broker\"\n+        }\n+    }\n+\n+    variantFilter { variant ->\n+        def flavorName = variant.flavors*.name", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE2MDEyNA=="}, "originalCommit": {"oid": "f2e68974b30c6010c77c4b6b8e3dff38d3733ecd"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1845, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}