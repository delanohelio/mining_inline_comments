{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzNzc4NzA2", "number": 164, "title": "[Micro-service] Private IP manager", "bodyText": "This PR contains the following features:\n\nAdd a design document for private_ip_manager service.\nAdd a private_ip_manager service that supports the management of ipv4 and ipv6 address ranges, as well as the allocation of ipv4 and ipv6 addresses from ip address ranges.\nSupport range ip availability and usage stats.\nAdd detailed UTs for private_ip_manager service.\nMove the db module to the directory lib directory.", "createdAt": "2020-04-15T14:01:33Z", "url": "https://github.com/futurewei-cloud/alcor/pull/164", "merged": true, "mergeCommit": {"oid": "b33be1f8b9b74ac5122b122982bd0feb576b4c82"}, "closed": true, "closedAt": "2020-04-22T03:36:52Z", "author": {"login": "chenpiaoping"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX4aopgH2gAyNDAzNzc4NzA2OjA5MzQ0MGEwZTAwMTE5NGZhZGY0NTY5NDNkMWE4MWM3ZGU3ZGQzZDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ_nSLgH2gAyNDAzNzc4NzA2OjI1YmRiNDJmMTdiODE3MmY0MzVlZmEwOThlYzUxMmVkMzc0YmU5ZDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "093440a0e001194fadf456943d1a81c7de7dd3d5", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/093440a0e001194fadf456943d1a81c7de7dd3d5", "committedDate": "2020-04-15T13:50:07Z", "message": "[Micro-service] Private IP manager"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzODMyNzQ2", "url": "https://github.com/futurewei-cloud/alcor/pull/164#pullrequestreview-393832746", "createdAt": "2020-04-15T14:31:50Z", "commit": {"oid": "093440a0e001194fadf456943d1a81c7de7dd3d5"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNDozMTo1MFrOGF8kvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxNDozNjo1NVrOGF80Ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg4ODUxMQ==", "bodyText": "General comment: let us use \"private_ip_manager\" for the directory name.", "url": "https://github.com/futurewei-cloud/alcor/pull/164#discussion_r408888511", "createdAt": "2020-04-15T14:31:50Z", "author": {"login": "xieus"}, "path": "services/ip_manager/.gitignore", "diffHunk": "@@ -0,0 +1,31 @@\n+HELP.md\n+target/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093440a0e001194fadf456943d1a81c7de7dd3d5"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg4ODg5NQ==", "bodyText": "like the pom file! no extra dependencies.", "url": "https://github.com/futurewei-cloud/alcor/pull/164#discussion_r408888895", "createdAt": "2020-04-15T14:32:21Z", "author": {"login": "xieus"}, "path": "services/ip_manager/pom.xml", "diffHunk": "@@ -0,0 +1,61 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+    <parent>\n+        <groupId>org.springframework.boot</groupId>\n+        <artifactId>spring-boot-starter-parent</artifactId>\n+        <version>2.2.6.RELEASE</version>\n+        <relativePath/> <!-- lookup parent from repository -->\n+    </parent>\n+    <groupId>com.futurewei.alcor</groupId>\n+    <artifactId>ipmanager</artifactId>\n+    <version>0.0.1-SNAPSHOT</version>\n+    <name>ipmanager</name>\n+    <description>ip manager micrservice</description>\n+\n+    <properties>\n+        <java.version>1.8</java.version>\n+    </properties>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.springframework.boot</groupId>\n+            <artifactId>spring-boot-starter-web</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093440a0e001194fadf456943d1a81c7de7dd3d5"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg4OTk3MQ==", "bodyText": "Seems the first iteration focuses on IPv4, which is totally fine. IPv6 will also be supported, right?", "url": "https://github.com/futurewei-cloud/alcor/pull/164#discussion_r408889971", "createdAt": "2020-04-15T14:33:38Z", "author": {"login": "xieus"}, "path": "services/ip_manager/src/main/java/com/futurewei/alcor/ipmanager/controller/Ipv4AddrController.java", "diffHunk": "@@ -0,0 +1,168 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+package com.futurewei.alcor.ipmanager.controller;\n+import com.futurewei.alcor.ipmanager.entity.Ipv4AddrState;\n+import com.futurewei.alcor.ipmanager.http.Ipv4AddrRequest;\n+import com.futurewei.alcor.ipmanager.http.Ipv4AddrRangeRequest;\n+import com.futurewei.alcor.ipmanager.http.Ipv4AddrRequestBulk;\n+import com.futurewei.alcor.ipmanager.http.status.Ipv4AddrInvalidException;\n+import com.futurewei.alcor.ipmanager.http.status.Ipv4AddrRangeInvalidException;\n+import com.futurewei.alcor.ipmanager.http.status.Ipv4AddrStateInvalidException;\n+import com.futurewei.alcor.ipmanager.http.status.SubnetIdInvalidException;\n+import com.futurewei.alcor.ipmanager.service.Ipv4AddrService;\n+import com.futurewei.alcor.utils.Ipv4AddrUtil;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.web.bind.annotation.*;\n+\n+import java.util.Map;\n+\n+\n+@RestController\n+public class Ipv4AddrController {\n+    @Autowired\n+    Ipv4AddrService ipv4AddrService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093440a0e001194fadf456943d1a81c7de7dd3d5"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg5MDYwMQ==", "bodyText": "When you get a chance, please include the design doc in the PR as well. Thanks.", "url": "https://github.com/futurewei-cloud/alcor/pull/164#discussion_r408890601", "createdAt": "2020-04-15T14:34:25Z", "author": {"login": "xieus"}, "path": "services/ip_manager/src/main/java/com/futurewei/alcor/ipmanager/controller/Ipv4AddrController.java", "diffHunk": "@@ -0,0 +1,168 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+package com.futurewei.alcor.ipmanager.controller;\n+import com.futurewei.alcor.ipmanager.entity.Ipv4AddrState;\n+import com.futurewei.alcor.ipmanager.http.Ipv4AddrRequest;\n+import com.futurewei.alcor.ipmanager.http.Ipv4AddrRangeRequest;\n+import com.futurewei.alcor.ipmanager.http.Ipv4AddrRequestBulk;\n+import com.futurewei.alcor.ipmanager.http.status.Ipv4AddrInvalidException;\n+import com.futurewei.alcor.ipmanager.http.status.Ipv4AddrRangeInvalidException;\n+import com.futurewei.alcor.ipmanager.http.status.Ipv4AddrStateInvalidException;\n+import com.futurewei.alcor.ipmanager.http.status.SubnetIdInvalidException;\n+import com.futurewei.alcor.ipmanager.service.Ipv4AddrService;\n+import com.futurewei.alcor.utils.Ipv4AddrUtil;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.web.bind.annotation.*;\n+\n+import java.util.Map;\n+\n+\n+@RestController\n+public class Ipv4AddrController {\n+    @Autowired\n+    Ipv4AddrService ipv4AddrService;\n+\n+    private void checkSubnetId(String subnetId) throws SubnetIdInvalidException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093440a0e001194fadf456943d1a81c7de7dd3d5"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg5MTQ1Ng==", "bodyText": "Let us plan to add more UTs as well.", "url": "https://github.com/futurewei-cloud/alcor/pull/164#discussion_r408891456", "createdAt": "2020-04-15T14:35:33Z", "author": {"login": "xieus"}, "path": "services/ip_manager/src/test/java/com/futurewei/alcor/ipmanager/IpManagerApplicationTests.java", "diffHunk": "@@ -0,0 +1,13 @@\n+package com.futurewei.alcor.ipmanager;\n+\n+import org.junit.jupiter.api.Test;\n+import org.springframework.boot.test.context.SpringBootTest;\n+\n+@SpringBootTest\n+class IpManagerApplicationTests {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093440a0e001194fadf456943d1a81c7de7dd3d5"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg5MjQ1MA==", "bodyText": "For IPv4AddrService, I would suggest to split into two layers, service layer and service impl layer.\nService Layer: Show the interface\nService Impl Layer: Show the implementation of the interface. This design allows different implementations later on.\nOne example of the above design is SubnetManager:\nhttps://github.com/kevin-zhonghao/alcor/tree/feature/route_manager/services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service", "url": "https://github.com/futurewei-cloud/alcor/pull/164#discussion_r408892450", "createdAt": "2020-04-15T14:36:55Z", "author": {"login": "xieus"}, "path": "services/ip_manager/src/main/java/com/futurewei/alcor/ipmanager/service/Ipv4AddrService.java", "diffHunk": "@@ -0,0 +1,420 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+package com.futurewei.alcor.ipmanager.service;\n+\n+import com.futurewei.alcor.ipmanager.http.Ipv4AddrRequest;\n+import com.futurewei.alcor.ipmanager.http.Ipv4AddrRangeRequest;\n+import com.futurewei.alcor.ipmanager.entity.Ipv4AddrState;\n+import com.futurewei.alcor.ipmanager.entity.Ipv4AddrAlloc;\n+import com.futurewei.alcor.ipmanager.entity.Ipv4AddrRange;\n+import com.futurewei.alcor.ipmanager.http.Ipv4AddrRequestBulk;\n+import com.futurewei.alcor.ipmanager.http.status.*;\n+import com.futurewei.alcor.ipmanager.repo.Ipv4AddrRangeRepo;\n+import com.futurewei.alcor.ipmanager.repo.Ipv4AddrRepo;\n+import com.futurewei.alcor.utils.Ipv4AddrUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Service;\n+\n+import java.util.*;\n+import java.util.stream.Collectors;\n+\n+\n+@Service\n+public class Ipv4AddrService {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093440a0e001194fadf456943d1a81c7de7dd3d5"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6df3f8b15f54428c25655e68c727d07fd1439cd", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/f6df3f8b15f54428c25655e68c727d07fd1439cd", "committedDate": "2020-04-16T04:33:21Z", "message": "Change the microservice name ip_manager to private_ip_manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9993581f8f4dfeb5862adeceb6c2bf1cca253e4", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/f9993581f8f4dfeb5862adeceb6c2bf1cca253e4", "committedDate": "2020-04-16T09:33:11Z", "message": "design doc for private ip manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22184e601a8b5b64a3c4dec5d33d36554f4e4047", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/22184e601a8b5b64a3c4dec5d33d36554f4e4047", "committedDate": "2020-04-17T01:58:24Z", "message": "rename IpManagerApplication.java to PrivateIpManagerApplication.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "652e6122f517cffecfa66993d2e20e1bf13282ff", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/652e6122f517cffecfa66993d2e20e1bf13282ff", "committedDate": "2020-04-18T10:07:19Z", "message": "modify ip allocation algorithm"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTYzMTg1", "url": "https://github.com/futurewei-cloud/alcor/pull/164#pullrequestreview-395963185", "createdAt": "2020-04-19T00:25:37Z", "commit": {"oid": "652e6122f517cffecfa66993d2e20e1bf13282ff"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQwMDoyNTozN1rOGHv9gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQwMDoyNTozN1rOGHv9gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc3OTAxMA==", "bodyText": "Let us add a section on the design doc about the allocation algorithm :-)", "url": "https://github.com/futurewei-cloud/alcor/pull/164#discussion_r410779010", "createdAt": "2020-04-19T00:25:37Z", "author": {"login": "xieus"}, "path": "services/private_ip_manager/src/main/java/com/futurewei/alcor/privateipmanager/allocator/Ipv4AddrAllocator.java", "diffHunk": "@@ -0,0 +1,96 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.privateipmanager.allocator;\n+\n+import com.futurewei.alcor.privateipmanager.exception.IpAddrInvalidException;\n+import com.futurewei.alcor.privateipmanager.exception.IpAddrNotEnoughException;\n+import com.futurewei.alcor.privateipmanager.utils.Ipv4AddrUtil;\n+\n+import java.util.*;\n+\n+public class Ipv4AddrAllocator implements IpAddrAllocator {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "652e6122f517cffecfa66993d2e20e1bf13282ff"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d6b6cec936aa2766490eebff725e00fac927196", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/9d6b6cec936aa2766490eebff725e00fac927196", "committedDate": "2020-04-19T00:38:18Z", "message": "add some test cases for private ip manager"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTYzNjk0", "url": "https://github.com/futurewei-cloud/alcor/pull/164#pullrequestreview-395963694", "createdAt": "2020-04-19T00:35:11Z", "commit": {"oid": "652e6122f517cffecfa66993d2e20e1bf13282ff"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQwMDozNToxMlrOGHwCrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQwMDozNToxMlrOGHwCrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc4MDMzNA==", "bodyText": "The key here is the subnet Id. How about multiple ip ranges per subnet?", "url": "https://github.com/futurewei-cloud/alcor/pull/164#discussion_r410780334", "createdAt": "2020-04-19T00:35:12Z", "author": {"login": "xieus"}, "path": "services/private_ip_manager/src/main/java/com/futurewei/alcor/privateipmanager/repo/IpAddrRangeRepo.java", "diffHunk": "@@ -0,0 +1,259 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+package com.futurewei.alcor.privateipmanager.repo;\n+\n+import com.futurewei.alcor.common.db.CacheFactory;\n+import com.futurewei.alcor.common.db.ICache;\n+import com.futurewei.alcor.common.db.Transaction;\n+import com.futurewei.alcor.common.repo.ICacheRepository;\n+import com.futurewei.alcor.privateipmanager.entity.IpAddrAlloc;\n+import com.futurewei.alcor.privateipmanager.entity.IpAddrRange;\n+import com.futurewei.alcor.privateipmanager.entity.IpAddrRangeRequest;\n+import com.futurewei.alcor.privateipmanager.exception.InternalDbOperationException;\n+import com.futurewei.alcor.privateipmanager.exception.IpAddrRangeNotFoundException;\n+import com.futurewei.alcor.privateipmanager.exception.IpAddrRangeExistException;\n+import com.futurewei.alcor.privateipmanager.exception.SubnetNotFoundException;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.context.annotation.ComponentScan;\n+import org.springframework.stereotype.Repository;\n+import com.futurewei.alcor.common.db.CacheException;\n+import javax.annotation.PostConstruct;\n+import java.util.*;\n+\n+@ComponentScan(value=\"com.futurewei.alcor.common.db\")\n+@Repository\n+public class IpAddrRangeRepo implements ICacheRepository<IpAddrRange> {\n+    private static final Logger LOG = LoggerFactory.getLogger(IpAddrRangeRepo.class);\n+    private ICache<String, IpAddrRange> ipAddrRangeCache;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "652e6122f517cffecfa66993d2e20e1bf13282ff"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTY0MTkx", "url": "https://github.com/futurewei-cloud/alcor/pull/164#pullrequestreview-395964191", "createdAt": "2020-04-19T00:44:15Z", "commit": {"oid": "9d6b6cec936aa2766490eebff725e00fac927196"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQwMDo0NDoxNVrOGHwIEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQwMDo0NDoxNVrOGHwIEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc4MTcxNQ==", "bodyText": "validate?", "url": "https://github.com/futurewei-cloud/alcor/pull/164#discussion_r410781715", "createdAt": "2020-04-19T00:44:15Z", "author": {"login": "xieus"}, "path": "services/private_ip_manager/src/main/java/com/futurewei/alcor/privateipmanager/allocator/IpAddrAllocator.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.privateipmanager.allocator;\n+\n+\n+import com.futurewei.alcor.privateipmanager.exception.IpAddrNotEnoughException;\n+\n+import java.util.List;\n+\n+public interface IpAddrAllocator {\n+\n+    String allocate() throws Exception;\n+\n+    List<String> allocateBulk(int num) throws IpAddrNotEnoughException, Exception;\n+\n+    void release(String ipAddr) throws Exception;\n+\n+    void releaseBulk(List<String> ipAddrList) throws Exception;\n+\n+    boolean valid(String ipv4Addr);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d6b6cec936aa2766490eebff725e00fac927196"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32b31928898fb483831150a3eb515518ee036ef3", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/32b31928898fb483831150a3eb515518ee036ef3", "committedDate": "2020-04-20T07:01:40Z", "message": "add concurrency handling and IP allocation algorithm to the design doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1d1207e07edc9ceec1fd1510a5889e50753f506", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/b1d1207e07edc9ceec1fd1510a5889e50753f506", "committedDate": "2020-04-21T05:32:03Z", "message": "Update private ip manager design doc and add an entry in Toc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MDAxNTk1", "url": "https://github.com/futurewei-cloud/alcor/pull/164#pullrequestreview-397001595", "createdAt": "2020-04-21T05:42:23Z", "commit": {"oid": "b1d1207e07edc9ceec1fd1510a5889e50753f506"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b1d1207e07edc9ceec1fd1510a5889e50753f506", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/b1d1207e07edc9ceec1fd1510a5889e50753f506", "committedDate": "2020-04-21T05:32:03Z", "message": "Update private ip manager design doc and add an entry in Toc"}, "afterCommit": {"oid": "abf46a5597161288ad8e79a902f085e1caf40d90", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/abf46a5597161288ad8e79a902f085e1caf40d90", "committedDate": "2020-04-21T07:33:15Z", "message": "rename subnet_id to range_id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "abf46a5597161288ad8e79a902f085e1caf40d90", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/abf46a5597161288ad8e79a902f085e1caf40d90", "committedDate": "2020-04-21T07:33:15Z", "message": "rename subnet_id to range_id"}, "afterCommit": {"oid": "d1a163e62f57fd32080af6c2046a2ec75595bc5f", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/d1a163e62f57fd32080af6c2046a2ec75595bc5f", "committedDate": "2020-04-21T07:38:43Z", "message": "rename subnet_id to range_id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1a163e62f57fd32080af6c2046a2ec75595bc5f", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/d1a163e62f57fd32080af6c2046a2ec75595bc5f", "committedDate": "2020-04-21T07:38:43Z", "message": "rename subnet_id to range_id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d273eca56926665cec96b5defa5f7f3eb0611374", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/d273eca56926665cec96b5defa5f7f3eb0611374", "committedDate": "2020-04-21T08:36:21Z", "message": "add ip availability to ip range"}, "afterCommit": {"oid": "2add9b84f7041615b1fe2bdf690f4d58fd8d5225", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/2add9b84f7041615b1fe2bdf690f4d58fd8d5225", "committedDate": "2020-04-21T08:46:21Z", "message": "add ip availability to ip range"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2add9b84f7041615b1fe2bdf690f4d58fd8d5225", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/2add9b84f7041615b1fe2bdf690f4d58fd8d5225", "committedDate": "2020-04-21T08:46:21Z", "message": "add ip availability to ip range"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2d6b21f16dcbae0b9c2cbbf5082e4891e347366", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/c2d6b21f16dcbae0b9c2cbbf5082e4891e347366", "committedDate": "2020-04-21T09:54:17Z", "message": "rename first_addr to first_ip"}, "afterCommit": {"oid": "a477e0b4444e4ba503d15a9afcabfc757d220993", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/a477e0b4444e4ba503d15a9afcabfc757d220993", "committedDate": "2020-04-21T10:04:04Z", "message": "rename first_addr to first_ip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a477e0b4444e4ba503d15a9afcabfc757d220993", "author": {"user": {"login": "chenpiaoping", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/a477e0b4444e4ba503d15a9afcabfc757d220993", "committedDate": "2020-04-21T10:04:04Z", "message": "rename first_addr to first_ip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25bdb42f17b8172f435efa098ec512ed374be9d5", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/25bdb42f17b8172f435efa098ec512ed374be9d5", "committedDate": "2020-04-22T03:21:07Z", "message": "Merge branch 'ip_manager' of https://github.com/chenpiaoping/alcor into ip_manager"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2403, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}