{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNDY0MjUy", "number": 340, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMDo0NDoxMlrOEUzc7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMzo0MjoxOFrOEXCthw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMjQ5OTY0OnYy", "diffSide": "RIGHT", "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMDo0NDoxMlrOG7NMGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMToxNDozM1rOG7NpvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczNTI1Ng==", "bodyText": "upload?", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r464735256", "createdAt": "2020-08-04T00:44:12Z", "author": {"login": "xieus"}, "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "diffHunk": "@@ -49,7 +54,22 @@\n \n     @RequestMapping(\n             method = POST,\n-            value = {\"/nodes/upload\", \"/v4/nodes/upload\"})\n+            value = {\"/bulk/nodes\", \"/v4/bulk/nodes\"})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7994849a780cc720859cc22e2381cbc4640e676"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc0Mjg0NA==", "bodyText": "changed in ac81684", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r464742844", "createdAt": "2020-08-04T01:14:33Z", "author": {"login": "haboy52581"}, "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "diffHunk": "@@ -49,7 +54,22 @@\n \n     @RequestMapping(\n             method = POST,\n-            value = {\"/nodes/upload\", \"/v4/nodes/upload\"})\n+            value = {\"/bulk/nodes\", \"/v4/bulk/nodes\"})", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczNTI1Ng=="}, "originalCommit": {"oid": "d7994849a780cc720859cc22e2381cbc4640e676"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMjkyNDE3OnYy", "diffSide": "RIGHT", "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNDo1MzowM1rOG7RB0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNDo1MzowM1rOG7RB0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc5ODE2MQ==", "bodyText": "Why do we want to throw an exception about \"empty file\" here?", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r464798161", "createdAt": "2020-08-04T04:53:03Z", "author": {"login": "xieus"}, "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "diffHunk": "@@ -24,29 +24,49 @@\n import com.futurewei.alcor.nodemanager.service.NodeService;\n import com.futurewei.alcor.nodemanager.utils.NodeManagerConstant;\n import com.futurewei.alcor.common.utils.RestPreconditionsUtil;\n+import com.futurewei.alcor.web.entity.node.BulkNodeInfoJson;\n import com.futurewei.alcor.web.json.annotation.FieldFilter;\n import io.swagger.annotations.ApiParam;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.http.HttpStatus;\n import org.springframework.web.bind.annotation.*;\n import org.springframework.web.multipart.MultipartFile;\n+import com.futurewei.alcor.common.logging.Logger;\n+import com.futurewei.alcor.common.logging.LoggerFactory;\n \n import javax.servlet.http.HttpServletRequest;\n import java.util.ArrayList;\n import java.util.List;\n import java.util.Map;\n+import java.util.logging.Level;\n \n import static org.springframework.web.bind.annotation.RequestMethod.*;\n \n @RestController\n public class NodeController {\n+    private static final Logger LOG = LoggerFactory.getLogger();\n \n     @Autowired\n     private NodeService service;\n \n     @Autowired\n     private HttpServletRequest request;\n \n+    @RequestMapping(\n+            method = POST,\n+            value = {\"/bulk/nodes\", \"/v4/bulk/nodes\"})\n+    public List<NodeInfo> registerNodesInfoBulk(@RequestBody BulkNodeInfoJson resource) throws Exception {\n+        if (resource == null) {\n+            throw new ParameterNullOrEmptyException(NodeManagerConstant.NODE_EXCEPTION_FILE_EMPTY);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac816841a996400233480dc329debf09b660d3e5"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMjkyOTQzOnYy", "diffSide": "RIGHT", "path": "web/src/main/java/com/futurewei/alcor/web/entity/node/BulkNodeInfoJson.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNDo1NTo0NVrOG7REvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzo0NzoyMVrOG-jemA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc5ODkwOA==", "bodyText": "The bulk creation chooses a key \"host_infos\", which is different from the /upload API, it is for our own benefits to choose the same key for both APIs, either \"host_infos\" or \"Hosts\".", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r464798908", "createdAt": "2020-08-04T04:55:45Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/node/BulkNodeInfoJson.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package com.futurewei.alcor.web.entity.node;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.futurewei.alcor.web.entity.NodeInfo;\n+\n+import java.util.List;\n+\n+public class BulkNodeInfoJson {\n+  @JsonProperty(\"host_infos\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac816841a996400233480dc329debf09b660d3e5"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2NzY4MQ==", "bodyText": "Checking this comment", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r466067681", "createdAt": "2020-08-05T23:56:39Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/node/BulkNodeInfoJson.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package com.futurewei.alcor.web.entity.node;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.futurewei.alcor.web.entity.NodeInfo;\n+\n+import java.util.List;\n+\n+public class BulkNodeInfoJson {\n+  @JsonProperty(\"host_infos\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc5ODkwOA=="}, "originalCommit": {"oid": "ac816841a996400233480dc329debf09b660d3e5"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI0NjE2OA==", "bodyText": "fixed in 339c752", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r468246168", "createdAt": "2020-08-10T23:47:21Z", "author": {"login": "haboy52581"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/node/BulkNodeInfoJson.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package com.futurewei.alcor.web.entity.node;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.futurewei.alcor.web.entity.NodeInfo;\n+\n+import java.util.List;\n+\n+public class BulkNodeInfoJson {\n+  @JsonProperty(\"host_infos\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc5ODkwOA=="}, "originalCommit": {"oid": "ac816841a996400233480dc329debf09b660d3e5"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMzExNjczOnYy", "diffSide": "RIGHT", "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNjoyODoyN1rOG7Szcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzo0Njo1OFrOG-jeKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgyNzI1MA==", "bodyText": "Can you add a UT to cover the new /bulk/nodes API? Also, the /upload appears to be problematic. It will be nice to fix them all together.", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r464827250", "createdAt": "2020-08-04T06:28:27Z", "author": {"login": "xieus"}, "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "diffHunk": "@@ -24,29 +24,49 @@\n import com.futurewei.alcor.nodemanager.service.NodeService;\n import com.futurewei.alcor.nodemanager.utils.NodeManagerConstant;\n import com.futurewei.alcor.common.utils.RestPreconditionsUtil;\n+import com.futurewei.alcor.web.entity.node.BulkNodeInfoJson;\n import com.futurewei.alcor.web.json.annotation.FieldFilter;\n import io.swagger.annotations.ApiParam;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.http.HttpStatus;\n import org.springframework.web.bind.annotation.*;\n import org.springframework.web.multipart.MultipartFile;\n+import com.futurewei.alcor.common.logging.Logger;\n+import com.futurewei.alcor.common.logging.LoggerFactory;\n \n import javax.servlet.http.HttpServletRequest;\n import java.util.ArrayList;\n import java.util.List;\n import java.util.Map;\n+import java.util.logging.Level;\n \n import static org.springframework.web.bind.annotation.RequestMethod.*;\n \n @RestController\n public class NodeController {\n+    private static final Logger LOG = LoggerFactory.getLogger();\n \n     @Autowired\n     private NodeService service;\n \n     @Autowired\n     private HttpServletRequest request;\n \n+    @RequestMapping(\n+            method = POST,\n+            value = {\"/bulk/nodes\", \"/v4/bulk/nodes\"})\n+    public List<NodeInfo> registerNodesInfoBulk(@RequestBody BulkNodeInfoJson resource) throws Exception {\n+        if (resource == null) {\n+            throw new ParameterNullOrEmptyException(NodeManagerConstant.NODE_EXCEPTION_FILE_EMPTY);\n+        }\n+        try {\n+            return service.createNodeInfoBulk(resource.getNodeInfos());\n+        } catch (Exception e) {\n+            LOG.log(Level.SEVERE,e.getMessage());\n+            throw e;\n+        }\n+    }\n+\n     @RequestMapping(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac816841a996400233480dc329debf09b660d3e5"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzMDczNg==", "bodyText": "fixed in 72508 for adding UT", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r466030736", "createdAt": "2020-08-05T22:05:20Z", "author": {"login": "haboy52581"}, "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "diffHunk": "@@ -24,29 +24,49 @@\n import com.futurewei.alcor.nodemanager.service.NodeService;\n import com.futurewei.alcor.nodemanager.utils.NodeManagerConstant;\n import com.futurewei.alcor.common.utils.RestPreconditionsUtil;\n+import com.futurewei.alcor.web.entity.node.BulkNodeInfoJson;\n import com.futurewei.alcor.web.json.annotation.FieldFilter;\n import io.swagger.annotations.ApiParam;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.http.HttpStatus;\n import org.springframework.web.bind.annotation.*;\n import org.springframework.web.multipart.MultipartFile;\n+import com.futurewei.alcor.common.logging.Logger;\n+import com.futurewei.alcor.common.logging.LoggerFactory;\n \n import javax.servlet.http.HttpServletRequest;\n import java.util.ArrayList;\n import java.util.List;\n import java.util.Map;\n+import java.util.logging.Level;\n \n import static org.springframework.web.bind.annotation.RequestMethod.*;\n \n @RestController\n public class NodeController {\n+    private static final Logger LOG = LoggerFactory.getLogger();\n \n     @Autowired\n     private NodeService service;\n \n     @Autowired\n     private HttpServletRequest request;\n \n+    @RequestMapping(\n+            method = POST,\n+            value = {\"/bulk/nodes\", \"/v4/bulk/nodes\"})\n+    public List<NodeInfo> registerNodesInfoBulk(@RequestBody BulkNodeInfoJson resource) throws Exception {\n+        if (resource == null) {\n+            throw new ParameterNullOrEmptyException(NodeManagerConstant.NODE_EXCEPTION_FILE_EMPTY);\n+        }\n+        try {\n+            return service.createNodeInfoBulk(resource.getNodeInfos());\n+        } catch (Exception e) {\n+            LOG.log(Level.SEVERE,e.getMessage());\n+            throw e;\n+        }\n+    }\n+\n     @RequestMapping(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgyNzI1MA=="}, "originalCommit": {"oid": "ac816841a996400233480dc329debf09b660d3e5"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2MDc4Mg==", "bodyText": "Thanks. Can you please check the /upload UT and fix it if needed?", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r466060782", "createdAt": "2020-08-05T23:33:16Z", "author": {"login": "xieus"}, "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "diffHunk": "@@ -24,29 +24,49 @@\n import com.futurewei.alcor.nodemanager.service.NodeService;\n import com.futurewei.alcor.nodemanager.utils.NodeManagerConstant;\n import com.futurewei.alcor.common.utils.RestPreconditionsUtil;\n+import com.futurewei.alcor.web.entity.node.BulkNodeInfoJson;\n import com.futurewei.alcor.web.json.annotation.FieldFilter;\n import io.swagger.annotations.ApiParam;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.http.HttpStatus;\n import org.springframework.web.bind.annotation.*;\n import org.springframework.web.multipart.MultipartFile;\n+import com.futurewei.alcor.common.logging.Logger;\n+import com.futurewei.alcor.common.logging.LoggerFactory;\n \n import javax.servlet.http.HttpServletRequest;\n import java.util.ArrayList;\n import java.util.List;\n import java.util.Map;\n+import java.util.logging.Level;\n \n import static org.springframework.web.bind.annotation.RequestMethod.*;\n \n @RestController\n public class NodeController {\n+    private static final Logger LOG = LoggerFactory.getLogger();\n \n     @Autowired\n     private NodeService service;\n \n     @Autowired\n     private HttpServletRequest request;\n \n+    @RequestMapping(\n+            method = POST,\n+            value = {\"/bulk/nodes\", \"/v4/bulk/nodes\"})\n+    public List<NodeInfo> registerNodesInfoBulk(@RequestBody BulkNodeInfoJson resource) throws Exception {\n+        if (resource == null) {\n+            throw new ParameterNullOrEmptyException(NodeManagerConstant.NODE_EXCEPTION_FILE_EMPTY);\n+        }\n+        try {\n+            return service.createNodeInfoBulk(resource.getNodeInfos());\n+        } catch (Exception e) {\n+            LOG.log(Level.SEVERE,e.getMessage());\n+            throw e;\n+        }\n+    }\n+\n     @RequestMapping(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgyNzI1MA=="}, "originalCommit": {"oid": "ac816841a996400233480dc329debf09b660d3e5"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI0NjA1OA==", "bodyText": "fixed in 339c752", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r468246058", "createdAt": "2020-08-10T23:46:58Z", "author": {"login": "haboy52581"}, "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "diffHunk": "@@ -24,29 +24,49 @@\n import com.futurewei.alcor.nodemanager.service.NodeService;\n import com.futurewei.alcor.nodemanager.utils.NodeManagerConstant;\n import com.futurewei.alcor.common.utils.RestPreconditionsUtil;\n+import com.futurewei.alcor.web.entity.node.BulkNodeInfoJson;\n import com.futurewei.alcor.web.json.annotation.FieldFilter;\n import io.swagger.annotations.ApiParam;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.http.HttpStatus;\n import org.springframework.web.bind.annotation.*;\n import org.springframework.web.multipart.MultipartFile;\n+import com.futurewei.alcor.common.logging.Logger;\n+import com.futurewei.alcor.common.logging.LoggerFactory;\n \n import javax.servlet.http.HttpServletRequest;\n import java.util.ArrayList;\n import java.util.List;\n import java.util.Map;\n+import java.util.logging.Level;\n \n import static org.springframework.web.bind.annotation.RequestMethod.*;\n \n @RestController\n public class NodeController {\n+    private static final Logger LOG = LoggerFactory.getLogger();\n \n     @Autowired\n     private NodeService service;\n \n     @Autowired\n     private HttpServletRequest request;\n \n+    @RequestMapping(\n+            method = POST,\n+            value = {\"/bulk/nodes\", \"/v4/bulk/nodes\"})\n+    public List<NodeInfo> registerNodesInfoBulk(@RequestBody BulkNodeInfoJson resource) throws Exception {\n+        if (resource == null) {\n+            throw new ParameterNullOrEmptyException(NodeManagerConstant.NODE_EXCEPTION_FILE_EMPTY);\n+        }\n+        try {\n+            return service.createNodeInfoBulk(resource.getNodeInfos());\n+        } catch (Exception e) {\n+            LOG.log(Level.SEVERE,e.getMessage());\n+            throw e;\n+        }\n+    }\n+\n     @RequestMapping(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgyNzI1MA=="}, "originalCommit": {"oid": "ac816841a996400233480dc329debf09b660d3e5"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDM0MTg0OnYy", "diffSide": "RIGHT", "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOTo0Mzo1MVrOG8YBYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOTo0Mzo1MVrOG8YBYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk2MTMxNA==", "bodyText": "Could you please check API name?  \"/bulk/nodes\"? or \"/nodes/bulk\"\nAPI naming convention was:\n/module_name (e.g. \"nodes\" for node manage\")/api_name (\"bulk\")", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r465961314", "createdAt": "2020-08-05T19:43:51Z", "author": {"login": "kimeunju108"}, "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "diffHunk": "@@ -49,7 +54,22 @@\n \n     @RequestMapping(\n             method = POST,\n-            value = {\"/nodes/upload\", \"/v4/nodes/upload\"})\n+            value = {\"/bulk/nodes\", \"/v4/bulk/nodes\"})\n+    public List<NodeInfo> registerNodesInfoBulk(@RequestBody BulkNodeInfoJson resource) throws Exception {\n+        if (resource == null) {\n+            throw new ParameterNullOrEmptyException(NodeManagerConstant.NODE_EXCEPTION_FILE_EMPTY);\n+        }\n+        try {\n+            return service.createNodeInfoBulk(resource.getNodeInfos());\n+        } catch (Exception e) {\n+            LOG.log(Level.SEVERE,e.getMessage());\n+            throw e;\n+        }\n+    }\n+\n+    @RequestMapping(\n+            method = POST,\n+            value = {\"/bulk/nodes\", \"/v4/bulk/nodes\"})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7994849a780cc720859cc22e2381cbc4640e676"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMTAyMzQwOnYy", "diffSide": "RIGHT", "path": "services/node_manager/src/test/java/com/futurewei/alcor/nodemanager/controller/NodeControllerTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzo1NDoyM1rOG8eeRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzo0Njo0NlrOG-jd6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2NzAxMw==", "bodyText": "Assertion to ensure the same size is necessary.\nWe also need to check other fields, including the key and value.", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r466067013", "createdAt": "2020-08-05T23:54:23Z", "author": {"login": "xieus"}, "path": "services/node_manager/src/test/java/com/futurewei/alcor/nodemanager/controller/NodeControllerTest.java", "diffHunk": "@@ -275,4 +281,16 @@ public void deleteNodeInfo_invalidId() throws Exception {\n             assertTrue(e.getCause().getClass().getSimpleName().contains(\"ParameterNullOrEmptyException\"));\n         }\n     }\n+\n+    @Test\n+    public void testNodeBulkRegistration() throws Exception {\n+        Gson gson=new Gson();\n+        String input =\n+        \"{\\\"nodeInfos\\\":[{\\\"id\\\":\\\"c2b79aca-316e-4ce8-a8ac-815e2de1f129\\\",\\\"name\\\":\\\"compute9\\\",\\\"localIp\\\":\\\"10.213.43.150\\\",\\\"macAddress\\\":\\\"90:17:ac:c1:34:5d\\\",\\\"veth\\\":\\\"eth1\\\",\\\"gRPCServerPort\\\":8080},{\\\"id\\\":\\\"c2b79aca-316e-4ce8-a8ac-815e2de1f120\\\",\\\"name\\\":\\\"compute10\\\",\\\"localIp\\\":\\\"10.213.43.151\\\",\\\"macAddress\\\":\\\"90:17:ac:c1:34:5e\\\",\\\"veth\\\":\\\"eth1\\\",\\\"gRPCServerPort\\\":8080}]}\";\n+        BulkNodeInfoJson bulkNodeInfoJson = gson.fromJson(input, BulkNodeInfoJson.class);\n+\n+        assertEquals(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "725081fa19340150514d578e9a751f4d07f0dcf0"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI0NTk5NA==", "bodyText": "fixed in 339c752", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r468245994", "createdAt": "2020-08-10T23:46:46Z", "author": {"login": "haboy52581"}, "path": "services/node_manager/src/test/java/com/futurewei/alcor/nodemanager/controller/NodeControllerTest.java", "diffHunk": "@@ -275,4 +281,16 @@ public void deleteNodeInfo_invalidId() throws Exception {\n             assertTrue(e.getCause().getClass().getSimpleName().contains(\"ParameterNullOrEmptyException\"));\n         }\n     }\n+\n+    @Test\n+    public void testNodeBulkRegistration() throws Exception {\n+        Gson gson=new Gson();\n+        String input =\n+        \"{\\\"nodeInfos\\\":[{\\\"id\\\":\\\"c2b79aca-316e-4ce8-a8ac-815e2de1f129\\\",\\\"name\\\":\\\"compute9\\\",\\\"localIp\\\":\\\"10.213.43.150\\\",\\\"macAddress\\\":\\\"90:17:ac:c1:34:5d\\\",\\\"veth\\\":\\\"eth1\\\",\\\"gRPCServerPort\\\":8080},{\\\"id\\\":\\\"c2b79aca-316e-4ce8-a8ac-815e2de1f120\\\",\\\"name\\\":\\\"compute10\\\",\\\"localIp\\\":\\\"10.213.43.151\\\",\\\"macAddress\\\":\\\"90:17:ac:c1:34:5e\\\",\\\"veth\\\":\\\"eth1\\\",\\\"gRPCServerPort\\\":8080}]}\";\n+        BulkNodeInfoJson bulkNodeInfoJson = gson.fromJson(input, BulkNodeInfoJson.class);\n+\n+        assertEquals(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2NzAxMw=="}, "originalCommit": {"oid": "725081fa19340150514d578e9a751f4d07f0dcf0"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMTAyNTU3OnYy", "diffSide": "RIGHT", "path": "services/node_manager/src/test/java/com/futurewei/alcor/nodemanager/controller/NodeControllerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzo1NToyOVrOG8efjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzo0NjoxN1rOG-jdVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2NzM0MQ==", "bodyText": "should the key be \"host_infos\" or \"nodeInfos\"?", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r466067341", "createdAt": "2020-08-05T23:55:29Z", "author": {"login": "xieus"}, "path": "services/node_manager/src/test/java/com/futurewei/alcor/nodemanager/controller/NodeControllerTest.java", "diffHunk": "@@ -275,4 +281,16 @@ public void deleteNodeInfo_invalidId() throws Exception {\n             assertTrue(e.getCause().getClass().getSimpleName().contains(\"ParameterNullOrEmptyException\"));\n         }\n     }\n+\n+    @Test\n+    public void testNodeBulkRegistration() throws Exception {\n+        Gson gson=new Gson();\n+        String input =\n+        \"{\\\"nodeInfos\\\":[{\\\"id\\\":\\\"c2b79aca-316e-4ce8-a8ac-815e2de1f129\\\",\\\"name\\\":\\\"compute9\\\",\\\"localIp\\\":\\\"10.213.43.150\\\",\\\"macAddress\\\":\\\"90:17:ac:c1:34:5d\\\",\\\"veth\\\":\\\"eth1\\\",\\\"gRPCServerPort\\\":8080},{\\\"id\\\":\\\"c2b79aca-316e-4ce8-a8ac-815e2de1f120\\\",\\\"name\\\":\\\"compute10\\\",\\\"localIp\\\":\\\"10.213.43.151\\\",\\\"macAddress\\\":\\\"90:17:ac:c1:34:5e\\\",\\\"veth\\\":\\\"eth1\\\",\\\"gRPCServerPort\\\":8080}]}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "725081fa19340150514d578e9a751f4d07f0dcf0"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI0NTg0NQ==", "bodyText": "use former one, fixed in 339c752", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r468245845", "createdAt": "2020-08-10T23:46:17Z", "author": {"login": "haboy52581"}, "path": "services/node_manager/src/test/java/com/futurewei/alcor/nodemanager/controller/NodeControllerTest.java", "diffHunk": "@@ -275,4 +281,16 @@ public void deleteNodeInfo_invalidId() throws Exception {\n             assertTrue(e.getCause().getClass().getSimpleName().contains(\"ParameterNullOrEmptyException\"));\n         }\n     }\n+\n+    @Test\n+    public void testNodeBulkRegistration() throws Exception {\n+        Gson gson=new Gson();\n+        String input =\n+        \"{\\\"nodeInfos\\\":[{\\\"id\\\":\\\"c2b79aca-316e-4ce8-a8ac-815e2de1f129\\\",\\\"name\\\":\\\"compute9\\\",\\\"localIp\\\":\\\"10.213.43.150\\\",\\\"macAddress\\\":\\\"90:17:ac:c1:34:5d\\\",\\\"veth\\\":\\\"eth1\\\",\\\"gRPCServerPort\\\":8080},{\\\"id\\\":\\\"c2b79aca-316e-4ce8-a8ac-815e2de1f120\\\",\\\"name\\\":\\\"compute10\\\",\\\"localIp\\\":\\\"10.213.43.151\\\",\\\"macAddress\\\":\\\"90:17:ac:c1:34:5e\\\",\\\"veth\\\":\\\"eth1\\\",\\\"gRPCServerPort\\\":8080}]}\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2NzM0MQ=="}, "originalCommit": {"oid": "725081fa19340150514d578e9a751f4d07f0dcf0"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTk3MTI3OnYy", "diffSide": "RIGHT", "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/service/implement/NodeServiceImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMzo0MjoxOFrOG-nR-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwNjowNjo1NFrOG-pmaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODMwODQ3NQ==", "bodyText": "Pls remove two extra lines.", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r468308475", "createdAt": "2020-08-11T03:42:18Z", "author": {"login": "xieus"}, "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/service/implement/NodeServiceImpl.java", "diffHunk": "@@ -42,6 +42,8 @@\n     @Autowired\n     private NodeRepository nodeRepository;\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99d2497c0df65ce97211936ab8f3d3cf4e9bdb9e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODM0NjQ3Mw==", "bodyText": "fixed in 533e6", "url": "https://github.com/futurewei-cloud/alcor/pull/340#discussion_r468346473", "createdAt": "2020-08-11T06:06:54Z", "author": {"login": "haboy52581"}, "path": "services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/service/implement/NodeServiceImpl.java", "diffHunk": "@@ -42,6 +42,8 @@\n     @Autowired\n     private NodeRepository nodeRepository;\n \n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODMwODQ3NQ=="}, "originalCommit": {"oid": "99d2497c0df65ce97211936ab8f3d3cf4e9bdb9e"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4631, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}