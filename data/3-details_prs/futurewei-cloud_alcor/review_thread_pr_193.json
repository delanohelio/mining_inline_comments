{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MTYyMzQw", "number": 193, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0MDo1N1rOD8mrUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDo1NzoyNVrOD-y-Hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODc0ODMyOnYy", "diffSide": "RIGHT", "path": "schema/proto3/common.proto", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0MDo1N1rOGVpgwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMDoyNjoxMlrOGVyg0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1MzQxMA==", "bodyText": "CREATE_UPDATE_SWITCH and CREATE_UPDATE_ROUTER shouldn't be used for OVS scenarios. CREATE_UPDATE_GATEWAY might be. Let us discuss.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425353410", "createdAt": "2020-05-14T18:40:57Z", "author": {"login": "xieus"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -34,10 +35,11 @@ enum OperationType {\n     GET = 2;\n     DELETE = 3;\n     INFO = 4;\n-    FINALIZE = 5;\n-    CREATE_UPDATE_SWITCH = 6;\n+    FINALIZE = 5; // FIXME: we will try to the whole port operation in the FINALIZE call\n+    CREATE_UPDATE_SWITCH = 6; // FIXME: I don't think we need this for OVS?\n     CREATE_UPDATE_ROUTER = 7;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2MzU0Mw==", "bodyText": "Yes, we haven't close done on the Router/DVR design yet. But we can have some initial discussions.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425463543", "createdAt": "2020-05-14T22:21:34Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -34,10 +35,11 @@ enum OperationType {\n     GET = 2;\n     DELETE = 3;\n     INFO = 4;\n-    FINALIZE = 5;\n-    CREATE_UPDATE_SWITCH = 6;\n+    FINALIZE = 5; // FIXME: we will try to the whole port operation in the FINALIZE call\n+    CREATE_UPDATE_SWITCH = 6; // FIXME: I don't think we need this for OVS?\n     CREATE_UPDATE_ROUTER = 7;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1MzQxMA=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUwMDg4Mg==", "bodyText": "@haboy52581 These are the fields we discussed.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425500882", "createdAt": "2020-05-15T00:26:12Z", "author": {"login": "xieus"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -34,10 +35,11 @@ enum OperationType {\n     GET = 2;\n     DELETE = 3;\n     INFO = 4;\n-    FINALIZE = 5;\n-    CREATE_UPDATE_SWITCH = 6;\n+    FINALIZE = 5; // FIXME: we will try to the whole port operation in the FINALIZE call\n+    CREATE_UPDATE_SWITCH = 6; // FIXME: I don't think we need this for OVS?\n     CREATE_UPDATE_ROUTER = 7;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1MzQxMA=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODc1MDY0OnYy", "diffSide": "RIGHT", "path": "schema/proto3/common.proto", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0MTozNFrOGVpiPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozMjowOVrOGZDpzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1Mzc4OQ==", "bodyText": "Is it worth mentioning VXLAN-GPE here?", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425353789", "createdAt": "2020-05-14T18:41:34Z", "author": {"login": "xieus"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -58,3 +60,10 @@ enum Protocol {\n     HTTP = 3;\n     ARP = 4;\n }\n+\n+enum NetworkType { \n+    VXLAN = 0; // the default type\n+    VLAN = 1;\n+    GRE = 2;\n+    GENEVE = 3;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2NDEzOA==", "bodyText": "I thought about that, the reasons I didn't put it there are:\n\nCurrent neutron doesn't have support on VXLAN-GPE\nIt is not clear to me on which problem to solve by VLAN-GPE", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425464138", "createdAt": "2020-05-14T22:23:12Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -58,3 +60,10 @@ enum Protocol {\n     HTTP = 3;\n     ARP = 4;\n }\n+\n+enum NetworkType { \n+    VXLAN = 0; // the default type\n+    VLAN = 1;\n+    GRE = 2;\n+    GENEVE = 3;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1Mzc4OQ=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUwMjc1Mg==", "bodyText": "Current neutron doesn't have support on VXLAN-GPE\n\n\nOVS should support VxLan-GPE already. The OVS commit for GPE support: https://openii.cn/openvswitch/ovs/commit/439f39cb9bd7214d1f70c317420cb2d33556296f\nAs Neutron doesn't support VxLan-GPE, actually this is a good opportunity for Alcor. VxLan-GPE is more like a DP term but we could check what's required for CP to support the new tunneling technology.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425502752", "createdAt": "2020-05-15T00:32:50Z", "author": {"login": "xieus"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -58,3 +60,10 @@ enum Protocol {\n     HTTP = 3;\n     ARP = 4;\n }\n+\n+enum NetworkType { \n+    VXLAN = 0; // the default type\n+    VLAN = 1;\n+    GRE = 2;\n+    GENEVE = 3;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1Mzc4OQ=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk2MjEwOA==", "bodyText": "I have added VxLAN-GPE option now after seeing the advantages: https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/cether/configuration/xe-16/ce-xe-16-book/vxlan-gpe-tunnel.html\nHere is my analysis to support vxlan-gpe:\n\nVM will not need to know that tunnel type is used\nAgent will need to create the additional vxlan-gpe port during setup/init\nAgent will use the new vxlan-gpe port if NetworkType = VXLAN-GPE send down from Controller\nE2E functional testing and automated test code\nI don't see other changes needed unless we start leverage the vxlan-gpe specific features\n\nWe can say Alcor will have preliminary or proposed future support for VxLan-GPE. Thoughts?", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425962108", "createdAt": "2020-05-15T17:59:42Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -58,3 +60,10 @@ enum Protocol {\n     HTTP = 3;\n     ARP = 4;\n }\n+\n+enum NetworkType { \n+    VXLAN = 0; // the default type\n+    VLAN = 1;\n+    GRE = 2;\n+    GENEVE = 3;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1Mzc4OQ=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc0NzgyNA==", "bodyText": "Sounds like a plan. One more question before we call it good: Can VxLan-GPE VNI overlap with \"regular\" VxLan VNI? Will this cause conflict on the host?", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r428747824", "createdAt": "2020-05-21T15:54:35Z", "author": {"login": "xieus"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -58,3 +60,10 @@ enum Protocol {\n     HTTP = 3;\n     ARP = 4;\n }\n+\n+enum NetworkType { \n+    VXLAN = 0; // the default type\n+    VLAN = 1;\n+    GRE = 2;\n+    GENEVE = 3;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1Mzc4OQ=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkyNzQzOA==", "bodyText": "My understanding is yes, the VxLan-GPE can use the same setup of VNI since it is backward compatible with VxLan. The official VxLan-GPE draft said VxLan-GPE vtep would detect if the other side is VxLan only then it would use VxLan encap header format. However, on the topic of how to detect vtep can support VxLan-GPE or it is VxLan only, the draft said it is out of scope...", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r428927438", "createdAt": "2020-05-21T21:32:09Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -58,3 +60,10 @@ enum Protocol {\n     HTTP = 3;\n     ARP = 4;\n }\n+\n+enum NetworkType { \n+    VXLAN = 0; // the default type\n+    VLAN = 1;\n+    GRE = 2;\n+    GENEVE = 3;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1Mzc4OQ=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODc1NDU4OnYy", "diffSide": "RIGHT", "path": "schema/proto3/dhcp.proto", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0Mjo0MVrOGVpkyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMDozNDozOVrOGVypuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NDQ0MQ==", "bodyText": "Version shall be needed for other protobuf message as well.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425354441", "createdAt": "2020-05-14T18:42:41Z", "author": {"login": "xieus"}, "path": "schema/proto3/dhcp.proto", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+syntax = \"proto3\";\n+\n+package alcor.schema;\n+\n+option java_package = \"com.futurewei.alcor.schema\";\n+option java_outer_classname = \"DHCP\";\n+\n+import \"common.proto\";\n+\n+message DHCPConfiguration {\n+    int32 version = 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2NTc2MQ==", "bodyText": "We have that for PortConfiguration, SubnetConfiguration, VpcConfiguration and now DHCPConfiguration. Do you mean to have version for every message including HostInfo or FixedIp under PortConfiguration? I think that would be a good idea.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425465761", "createdAt": "2020-05-14T22:27:36Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/dhcp.proto", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+syntax = \"proto3\";\n+\n+package alcor.schema;\n+\n+option java_package = \"com.futurewei.alcor.schema\";\n+option java_outer_classname = \"DHCP\";\n+\n+import \"common.proto\";\n+\n+message DHCPConfiguration {\n+    int32 version = 1;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NDQ0MQ=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUwMzE2MQ==", "bodyText": "Versioning to the port level should be sufficient usually. It depends on which new scenarios could be covered for HostInfo and Fixed.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425503161", "createdAt": "2020-05-15T00:34:39Z", "author": {"login": "xieus"}, "path": "schema/proto3/dhcp.proto", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+syntax = \"proto3\";\n+\n+package alcor.schema;\n+\n+option java_package = \"com.futurewei.alcor.schema\";\n+option java_outer_classname = \"DHCP\";\n+\n+import \"common.proto\";\n+\n+message DHCPConfiguration {\n+    int32 version = 1;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NDQ0MQ=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODc1NjgwOnYy", "diffSide": "RIGHT", "path": "schema/proto3/goalstate.proto", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0MzoxNlrOGVpmMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozMjo0MVrOGZDqxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NDgwMg==", "bodyText": "We need to discuss the naming of GoalState.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425354802", "createdAt": "2020-05-14T18:43:16Z", "author": {"login": "xieus"}, "path": "schema/proto3/goalstate.proto", "diffHunk": "@@ -24,10 +24,12 @@ import \"vpc.proto\";\n import \"subnet.proto\";\n import \"port.proto\";\n import \"securitygroup.proto\";\n+import \"dhcp.proto\";\n \n message GoalState {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkyNzY4NA==", "bodyText": "I got the idea now and I think we can close this topic.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r428927684", "createdAt": "2020-05-21T21:32:41Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/goalstate.proto", "diffHunk": "@@ -24,10 +24,12 @@ import \"vpc.proto\";\n import \"subnet.proto\";\n import \"port.proto\";\n import \"securitygroup.proto\";\n+import \"dhcp.proto\";\n \n message GoalState {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NDgwMg=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODc1OTc4OnYy", "diffSide": "RIGHT", "path": "schema/proto3/port.proto", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0NDoxM1rOGVpoLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMDozNTowOVrOGVyqew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NTMxMA==", "bodyText": "New field to be placed at the end after discussion.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425355310", "createdAt": "2020-05-14T18:44:13Z", "author": {"login": "xieus"}, "path": "schema/proto3/port.proto", "diffHunk": "@@ -26,6 +26,11 @@ import \"common.proto\";\n message PortConfiguration {\n     int32 version = 1;\n \n+    // FIXME: the options for NetworkType are:\n+    // 1. put in PortConfiguration here since only useful for Port, ACA programming will be direct and easier\n+    // 2. put in VPC configuration since it is a \"network level\" configuration, \n+    //      that mean every port configuration needs to go with VPC config for ACA to look up\n+    NetworkType network_type = 13;  // TODO: the ID will be update after discussion", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2NjczMw==", "bodyText": "discussion point: since this is a major revision of the schema, I am proposing to make the fields pretty with the ordering and not to add new fields at the end. Compatibility with the previous release of Alcor or ACA was not a goal in my mind.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425466733", "createdAt": "2020-05-14T22:30:23Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/port.proto", "diffHunk": "@@ -26,6 +26,11 @@ import \"common.proto\";\n message PortConfiguration {\n     int32 version = 1;\n \n+    // FIXME: the options for NetworkType are:\n+    // 1. put in PortConfiguration here since only useful for Port, ACA programming will be direct and easier\n+    // 2. put in VPC configuration since it is a \"network level\" configuration, \n+    //      that mean every port configuration needs to go with VPC config for ACA to look up\n+    NetworkType network_type = 13;  // TODO: the ID will be update after discussion", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NTMxMA=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUwMzM1NQ==", "bodyText": "+1", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425503355", "createdAt": "2020-05-15T00:35:09Z", "author": {"login": "xieus"}, "path": "schema/proto3/port.proto", "diffHunk": "@@ -26,6 +26,11 @@ import \"common.proto\";\n message PortConfiguration {\n     int32 version = 1;\n \n+    // FIXME: the options for NetworkType are:\n+    // 1. put in PortConfiguration here since only useful for Port, ACA programming will be direct and easier\n+    // 2. put in VPC configuration since it is a \"network level\" configuration, \n+    //      that mean every port configuration needs to go with VPC config for ACA to look up\n+    NetworkType network_type = 13;  // TODO: the ID will be update after discussion", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NTMxMA=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODc2MzU4OnYy", "diffSide": "LEFT", "path": "schema/proto3/port.proto", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0NToyMFrOGVpqqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMjozMTo1N1rOGVwdiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NTk0Ng==", "bodyText": "Is dhcp options completely covered by the new dhcp.proto", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425355946", "createdAt": "2020-05-14T18:45:20Z", "author": {"login": "xieus"}, "path": "schema/proto3/port.proto", "diffHunk": "@@ -53,16 +58,14 @@ message PortConfiguration {\n         string mac_address = 2;\n     }\n \n-    message ExtraDhcpOption {\n-        string name = 1;\n-        string value = 2;\n-    }\n-\n-    HostInfo host_info = 9;\n+    HostInfo host_info = 9; // FIXME: will be used to populate neighbor info only\n     repeated FixedIp fixed_ips = 10;\n     repeated SecurityGroupId security_group_ids = 11;\n     repeated AllowAddressPair allow_address_pairs = 12;\n-    repeated ExtraDhcpOption extra_dhcp_options = 13;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2NzI3Mg==", "bodyText": "yes, that would include DNS server(s) list also.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425467272", "createdAt": "2020-05-14T22:31:57Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/port.proto", "diffHunk": "@@ -53,16 +58,14 @@ message PortConfiguration {\n         string mac_address = 2;\n     }\n \n-    message ExtraDhcpOption {\n-        string name = 1;\n-        string value = 2;\n-    }\n-\n-    HostInfo host_info = 9;\n+    HostInfo host_info = 9; // FIXME: will be used to populate neighbor info only\n     repeated FixedIp fixed_ips = 10;\n     repeated SecurityGroupId security_group_ids = 11;\n     repeated AllowAddressPair allow_address_pairs = 12;\n-    repeated ExtraDhcpOption extra_dhcp_options = 13;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NTk0Ng=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODc3NDMzOnYy", "diffSide": "RIGHT", "path": "schema/proto3/subnet.proto", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0ODoyN1rOGVpx2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMjozMjo0OVrOGVwetQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1Nzc4NQ==", "bodyText": "It is a list of dns name servers associated with the subnet. Default is an empty list.\nDNS servers needed to be included by dhcp.proto, right?\n\u00a0", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425357785", "createdAt": "2020-05-14T18:48:27Z", "author": {"login": "xieus"}, "path": "schema/proto3/subnet.proto", "diffHunk": "@@ -61,9 +61,9 @@ message SubnetConfiguration {\n         string mac_address = 4;\n     }\n \n-    repeated DnsEntry dns_list = 13;\n-    repeated SecurityGroupId security_group_ids = 14;\n-    repeated TransitSwitch transit_switches = 15;\n+    repeated DnsEntry dns_list = 13; // FIXME: what is this for?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2NzU3Mw==", "bodyText": "yes, that's cover as dhcp option based on: https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425467573", "createdAt": "2020-05-14T22:32:49Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/subnet.proto", "diffHunk": "@@ -61,9 +61,9 @@ message SubnetConfiguration {\n         string mac_address = 4;\n     }\n \n-    repeated DnsEntry dns_list = 13;\n-    repeated SecurityGroupId security_group_ids = 14;\n-    repeated TransitSwitch transit_switches = 15;\n+    repeated DnsEntry dns_list = 13; // FIXME: what is this for?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1Nzc4NQ=="}, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODc3NTI4OnYy", "diffSide": "RIGHT", "path": "schema/proto3/vpc.proto", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0ODo0MlrOGVpyYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxODo0ODo0MlrOGVpyYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1NzkyMQ==", "bodyText": "Like it.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r425357921", "createdAt": "2020-05-14T18:48:42Z", "author": {"login": "xieus"}, "path": "schema/proto3/vpc.proto", "diffHunk": "@@ -49,7 +53,7 @@ message VpcConfiguration {\n \n     repeated SubnetId subnet_ids = 7;\n     repeated Route routes = 8;\n-    repeated TransitRouter transit_routers = 9;\n+    repeated TransitRouter transit_routers = 9; // FIXME: to be removed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59712027a6f248a93bac72b200a9ccf696d2390b"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NDgzMjk2OnYy", "diffSide": "RIGHT", "path": "schema/proto3/vpc.proto", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxNzozMTo1NFrOGWiaJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxNzozMTo1NFrOGWiaJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI4NTYwNQ==", "bodyText": "Like it!", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r426285605", "createdAt": "2020-05-17T17:31:54Z", "author": {"login": "xieus"}, "path": "schema/proto3/vpc.proto", "diffHunk": "@@ -24,13 +24,17 @@ option java_outer_classname = \"Vpc\";\n import \"common.proto\";\n \n message VpcConfiguration {\n-    int32 version = 1;\n+    uint32 version = 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04985a33fe35748d2f865fd392b93d0800c61593"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MDIyMTE0OnYy", "diffSide": "RIGHT", "path": "schema/proto3/common.proto", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNTo1MjowNFrOGY4jwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozNTo0MVrOGZDxbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc0NTY2NQ==", "bodyText": "Let us close on all the FIXME staff and plan to merge it :-)", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r428745665", "createdAt": "2020-05-21T15:52:04Z", "author": {"login": "xieus"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -34,10 +35,11 @@ enum OperationType {\n     GET = 2;\n     DELETE = 3;\n     INFO = 4;\n-    FINALIZE = 5;\n-    CREATE_UPDATE_SWITCH = 6;\n-    CREATE_UPDATE_ROUTER = 7;\n-    CREATE_UPDATE_GATEWAY = 8;\n+    NEIGHBOR_INFO = 5; // FIXME: we may need CRUD for NEIGHBOR_INFO", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04985a33fe35748d2f865fd392b93d0800c61593"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkyOTM5MA==", "bodyText": "Fixed.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r428929390", "createdAt": "2020-05-21T21:35:41Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -34,10 +35,11 @@ enum OperationType {\n     GET = 2;\n     DELETE = 3;\n     INFO = 4;\n-    FINALIZE = 5;\n-    CREATE_UPDATE_SWITCH = 6;\n-    CREATE_UPDATE_ROUTER = 7;\n-    CREATE_UPDATE_GATEWAY = 8;\n+    NEIGHBOR_INFO = 5; // FIXME: we may need CRUD for NEIGHBOR_INFO", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc0NTY2NQ=="}, "originalCommit": {"oid": "04985a33fe35748d2f865fd392b93d0800c61593"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MDIzNzI4OnYy", "diffSide": "RIGHT", "path": "schema/proto3/port.proto", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNTo1NTozMlrOGY4uPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozODoxNVrOGZD2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc0ODM1MQ==", "bodyText": "Fix FIXME", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r428748351", "createdAt": "2020-05-21T15:55:32Z", "author": {"login": "xieus"}, "path": "schema/proto3/port.proto", "diffHunk": "@@ -24,15 +24,21 @@ option java_outer_classname = \"Port\";\n import \"common.proto\";\n \n message PortConfiguration {\n-    int32 version = 1;\n-\n-    string project_id = 2;\n-    string network_id = 3;\n-    string id = 4;\n-    string name = 5;\n-    string network_ns = 6;\n-    string mac_address = 7;\n-    string veth_name = 8;\n+    uint32 version = 1;\n+\n+    // FIXME: the options for NetworkType are:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04985a33fe35748d2f865fd392b93d0800c61593"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzMDYxNg==", "bodyText": "Fixed.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r428930616", "createdAt": "2020-05-21T21:38:15Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/port.proto", "diffHunk": "@@ -24,15 +24,21 @@ option java_outer_classname = \"Port\";\n import \"common.proto\";\n \n message PortConfiguration {\n-    int32 version = 1;\n-\n-    string project_id = 2;\n-    string network_id = 3;\n-    string id = 4;\n-    string name = 5;\n-    string network_ns = 6;\n-    string mac_address = 7;\n-    string veth_name = 8;\n+    uint32 version = 1;\n+\n+    // FIXME: the options for NetworkType are:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc0ODM1MQ=="}, "originalCommit": {"oid": "04985a33fe35748d2f865fd392b93d0800c61593"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MTczMjA2OnYy", "diffSide": "LEFT", "path": "schema/proto3/port.proto", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDo1NjowOFrOGZHe0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDo1NjowOFrOGZHe0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MDE2Mg==", "bodyText": "Let us scope a MVP for basic port programming. We will revisit this part shortly.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r428990162", "createdAt": "2020-05-22T00:56:08Z", "author": {"login": "xieus"}, "path": "schema/proto3/port.proto", "diffHunk": "@@ -63,10 +59,6 @@ message PortConfiguration {\n     repeated FixedIp fixed_ips = 12;\n     repeated AllowAddressPair allow_address_pairs = 13;\n     repeated SecurityGroupId security_group_ids = 14;\n-\n-    // FIXME: note that for neutron, it sends down more stuff than this", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e01593b3222e72ad703e20a502e2ed84e2cb80fd"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MTczNDA2OnYy", "diffSide": "LEFT", "path": "schema/proto3/vpc.proto", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDo1NzoyNVrOGZHgCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNTo1Mjo1OFrOGZLdTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MDQ3Mg==", "bodyText": "That is right. MTU will be on vpc level.\nDoes this mean that they will use the same MTU on a region basis and ignore MTU value from Neutron Server.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r428990472", "createdAt": "2020-05-22T00:57:25Z", "author": {"login": "xieus"}, "path": "schema/proto3/vpc.proto", "diffHunk": "@@ -31,10 +31,6 @@ message VpcConfiguration {\n     string name = 4;\n     string cidr = 5;\n     int64 tunnel_id = 6;\n-    // FIXME: MTU info would be part VPC right?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e01593b3222e72ad703e20a502e2ed84e2cb80fd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5OTcyNA==", "bodyText": "The MTU setting depends on the physical NIC MTU setting and all the networking hardware needs to support it (e.g. jumbo frame MTU=9000). Therefore, we cannot simply allow a VPC to set certain MTU. More detail here: https://github.com/openstack/neutron/blob/cc69828ff09f5dbc37488f3f56bb045772e35634/doc/source/admin/config-mtu.rst#L7", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r428999724", "createdAt": "2020-05-22T01:38:02Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/vpc.proto", "diffHunk": "@@ -31,10 +31,6 @@ message VpcConfiguration {\n     string name = 4;\n     string cidr = 5;\n     int64 tunnel_id = 6;\n-    // FIXME: MTU info would be part VPC right?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MDQ3Mg=="}, "originalCommit": {"oid": "e01593b3222e72ad703e20a502e2ed84e2cb80fd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAyNzcyNQ==", "bodyText": "Thanks for the clarification. The document makes sense but somehow contradicts with the other document. OpenStack Neutron v2.0 API allows to puts a MTU field when creating a network.\nhttps://docs.openstack.org/api-ref/network/v2/?expanded=create-network-detail#create-network\n{\n\"network\": {\n\"name\": \"sample_network\",\n\"admin_state_up\": true,\n\"dns_domain\": \"my-domain.org.\",\n\"qos_policy_id\": \"6a8454ade84346f59e8d40665f878b2e\",\n\"mtu\": 1400\n}\n}", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r429027725", "createdAt": "2020-05-22T03:45:27Z", "author": {"login": "xieus"}, "path": "schema/proto3/vpc.proto", "diffHunk": "@@ -31,10 +31,6 @@ message VpcConfiguration {\n     string name = 4;\n     string cidr = 5;\n     int64 tunnel_id = 6;\n-    // FIXME: MTU info would be part VPC right?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MDQ3Mg=="}, "originalCommit": {"oid": "e01593b3222e72ad703e20a502e2ed84e2cb80fd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA1MjUzNQ==", "bodyText": "Looking deeper into MTU in neutron code, while it is not being used in ovs neutron agent where it is configuring ports created by nova agent, MTU setting are being used in dvr edge router (for source NAT), dvr floating IP management and neutron L3 agent (I am guessing it is because these component will create (e.g. gateway) ports). We will need to look into MTU topic more when we design our router.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r429052535", "createdAt": "2020-05-22T05:41:38Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/vpc.proto", "diffHunk": "@@ -31,10 +31,6 @@ message VpcConfiguration {\n     string name = 4;\n     string cidr = 5;\n     int64 tunnel_id = 6;\n-    // FIXME: MTU info would be part VPC right?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MDQ3Mg=="}, "originalCommit": {"oid": "e01593b3222e72ad703e20a502e2ed84e2cb80fd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA1NTMwOQ==", "bodyText": "I see. Let us keep this field for now which allows us to revisit for L3 networking staff shortly.", "url": "https://github.com/futurewei-cloud/alcor/pull/193#discussion_r429055309", "createdAt": "2020-05-22T05:52:58Z", "author": {"login": "xieus"}, "path": "schema/proto3/vpc.proto", "diffHunk": "@@ -31,10 +31,6 @@ message VpcConfiguration {\n     string name = 4;\n     string cidr = 5;\n     int64 tunnel_id = 6;\n-    // FIXME: MTU info would be part VPC right?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MDQ3Mg=="}, "originalCommit": {"oid": "e01593b3222e72ad703e20a502e2ed84e2cb80fd"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4747, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}