{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1ODU5Njg5", "number": 316, "title": "[Microservice API] Make PortEntity Fully Compatible With Neutron", "bodyText": "Bug Description\nPort Manager has incompatible response data format with Neutron. For example, the Neutron Spec declares some field as object while Alcor feeds this as Integer which caused OpenStack command complains\ndictionary update sequence element #0 has length 1; 2 is required\n\nBy Tracebacking most recent call last, it was found that Port Manager feeds these:\n\"binding:profile\": \"string\", // this should be object\n\"binding:vif_details\": \"string\", // this should be object\n\"dns_assignment\":  [\n\t\t\t\t{\n\t\t\t\t\t\"host_name\": \"string\",\n\t\t\t\t\t\"ip_address\": \"string\",\n\t\t\t\t\t\"fqdn\": \"string\"\n\t\t\t\t}\n\t\t\t], // this should be object\nProposed Fix\nThis PR corrects the fields of PortEntity mentioned above and also proposes corresponding DPM UT fix.", "createdAt": "2020-07-23T17:38:48Z", "url": "https://github.com/futurewei-cloud/alcor/pull/316", "merged": true, "mergeCommit": {"oid": "2050a72d2816abeea0254d84321546eae0811ec1"}, "closed": true, "closedAt": "2020-07-29T00:05:46Z", "author": {"login": "haboy52581"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3y8FgAH2gAyNDU1ODU5Njg5OjYyYzQ0ZTc3NDgxODY5NTI0ZTc3ZDQzMjcyZDFhOGNkYWU3NjVmZTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5fclvgFqTQ1NzEwNTQwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "62c44e77481869524e77d43272d1a8cdae765fe4", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/62c44e77481869524e77d43272d1a8cdae765fe4", "committedDate": "2020-07-23T17:32:48Z", "message": "fix issue 315"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8c8b05b20f29a86276bd8c8500c12046d117c84", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/a8c8b05b20f29a86276bd8c8500c12046d117c84", "committedDate": "2020-07-23T17:37:27Z", "message": "fix conflict from master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64e35e4bfd03b85af35284e413544c5937065577", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/64e35e4bfd03b85af35284e413544c5937065577", "committedDate": "2020-07-23T17:46:43Z", "message": "ignore the failure ut on pm for now due to timeline"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDYxNjM5", "url": "https://github.com/futurewei-cloud/alcor/pull/316#pullrequestreview-454461639", "createdAt": "2020-07-23T20:13:26Z", "commit": {"oid": "64e35e4bfd03b85af35284e413544c5937065577"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QyMDoxMzoyNlrOG2Z8Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QyMDoxOTowNlrOG2aHcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcwMTI5OQ==", "bodyText": "You don't have to remove the test case, temporarily commenting out \"@test\" will make it :)\nLet us get back the test cases when the new change is verified locally.", "url": "https://github.com/futurewei-cloud/alcor/pull/316#discussion_r459701299", "createdAt": "2020-07-23T20:13:26Z", "author": {"login": "xieus"}, "path": "services/data_plane_manager/src/test/java/com/futurewei/alcor/dataplane/utils/GoalStateManagerTest.java", "diffHunk": "@@ -4540,703 +4540,11 @@ public void scenarioB() {\n     check(input, output);\n   }\n \n-  @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64e35e4bfd03b85af35284e413544c5937065577"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcwMjQ4OA==", "bodyText": "is it required to fill in these fields? They appear to be information from physical networks which don't apply to our case.\nSee if we should assign \"\"", "url": "https://github.com/futurewei-cloud/alcor/pull/316#discussion_r459702488", "createdAt": "2020-07-23T20:15:51Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/port/LocalLinkInformation.java", "diffHunk": "@@ -0,0 +1,12 @@\n+package com.futurewei.alcor.web.entity.port;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+\n+public class LocalLinkInformation {\n+    @JsonProperty(\"port_id\")\n+    private  String port_id=\"Ethernet3/1\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64e35e4bfd03b85af35284e413544c5937065577"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcwNDE3OQ==", "bodyText": "@chenpiaoping recommended not to use @DaTa annotation because it generates code during compilation and has Poor security and maintainability.\nLet us get back the Getter and Setter.", "url": "https://github.com/futurewei-cloud/alcor/pull/316#discussion_r459704179", "createdAt": "2020-07-23T20:19:06Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/port/PortEntity.java", "diffHunk": "@@ -443,261 +419,4 @@ public String toString() {\n                     '}';\n         }\n     }\n-\n-\n-    public String getVpcId() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64e35e4bfd03b85af35284e413544c5937065577"}, "originalPosition": 89}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76b517b4649b93f0278e17130ed19d10e4a40c64", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/76b517b4649b93f0278e17130ed19d10e4a40c64", "committedDate": "2020-07-27T17:33:07Z", "message": "Merge branch 'master' into dev/315"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fc306c4a2ed02cfbf90fa811d6ea011a6bacade", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/0fc306c4a2ed02cfbf90fa811d6ea011a6bacade", "committedDate": "2020-07-27T19:13:13Z", "message": "add test cases back"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aca63deefcfe1b7fd961d506d0e337f6fbbe3d01", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/aca63deefcfe1b7fd961d506d0e337f6fbbe3d01", "committedDate": "2020-07-27T19:19:13Z", "message": "remove default value for LocalLinkInformation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MTA1NDAz", "url": "https://github.com/futurewei-cloud/alcor/pull/316#pullrequestreview-457105403", "createdAt": "2020-07-28T23:52:46Z", "commit": {"oid": "aca63deefcfe1b7fd961d506d0e337f6fbbe3d01"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMzo1Mjo0N1rOG4jtOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMzo1NzoyNlrOG4jy4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk1ODQ1OA==", "bodyText": "@haboy52581 Please re-enable this test case in a follow-up PR as we discussed.", "url": "https://github.com/futurewei-cloud/alcor/pull/316#discussion_r461958458", "createdAt": "2020-07-28T23:52:47Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/test/java/com/futurewei/alcor/portmanager/controller/UpdatePortTest.java", "diffHunk": "@@ -118,7 +118,7 @@ public void updateBindingHostIdTest() throws Exception {\n                 .andExpect(MockMvcResultMatchers.jsonPath(\"$.port.binding:host_id\").value(UnitTestConfig.nodeId2));\n     }\n \n-    @Test\n+//    @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aca63deefcfe1b7fd961d506d0e337f6fbbe3d01"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk1OTkwNA==", "bodyText": "This file become a humongous test file. Consider to break down into one main file with only the test logic and many payload file. This way, you can find it relatively easy to debug and add a new test case. @haboy52581", "url": "https://github.com/futurewei-cloud/alcor/pull/316#discussion_r461959904", "createdAt": "2020-07-28T23:57:26Z", "author": {"login": "xieus"}, "path": "services/data_plane_manager/src/test/java/com/futurewei/alcor/dataplane/utils/GoalStateManagerTest.java", "diffHunk": "@@ -41,310 +41,121 @@ public boolean shouldSkipClass(Class<?> clazz) {\n   @AfterEach\n   void tearDown() {}\n \n-  @Test\n-  public void scenarioC() {\n+ @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aca63deefcfe1b7fd961d506d0e337f6fbbe3d01"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2241, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}