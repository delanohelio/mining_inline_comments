{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMjY2MTY3", "number": 82, "title": "Goal state programming task for subnet/vpc", "bodyText": "This PR proposes the following changes:\n\nAdd an abstract class for GoalStateProgrammer\nExtend GoalStateProgrammer to PortGoalStateProgrammer  and SubnetGoalStateProgrammer (newly introduced in this PR)\nRandom assignment of transit router\nFix port creation bug. Bug description: In the original port creation API, newly assigned VIP and MAC addresses were not stored to a persistent store therefore subsequent GET calls got empty value for VIP and MAC.", "createdAt": "2020-01-08T03:33:49Z", "url": "https://github.com/futurewei-cloud/alcor/pull/82", "merged": true, "mergeCommit": {"oid": "4a4689579d30831ccc205b4994a44f3874a47ae2"}, "closed": true, "closedAt": "2020-01-08T19:00:52Z", "author": {"login": "xieus"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4Mw_0AH2gAyMzYwMjY2MTY3OjNjMDEwODExM2I5OWYzZmRmMmE0NTdhYTA3ZWE1MzI3NWZlYTg4M2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4aGFeAH2gAyMzYwMjY2MTY3OmJiOGM5ZmJkYTU4M2U1ZTI4NGFjNjlmMzMwMzVjZGY0YzM0ZTAyYTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3c0108113b99f3fdf2a457aa07ea53275fea883a", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/3c0108113b99f3fdf2a457aa07ea53275fea883a", "committedDate": "2020-01-08T03:27:04Z", "message": "Goal state programming task for subnet/vpc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMDU1OTY0", "url": "https://github.com/futurewei-cloud/alcor/pull/82#pullrequestreview-340055964", "createdAt": "2020-01-08T18:25:59Z", "commit": {"oid": "3c0108113b99f3fdf2a457aa07ea53275fea883a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxODoyNjowMFrOFbfw3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxODoyNzoyOFrOFbfzSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM3NjI4NA==", "bodyText": "Nit: the previous function name has good information, I suggest to use a better function than \"run\".", "url": "https://github.com/futurewei-cloud/alcor/pull/82#discussion_r364376284", "createdAt": "2020-01-08T18:26:00Z", "author": {"login": "er1cthe0ne"}, "path": "src/com/futurewei/alcor/controller/resourcemgr/physical/goalstatemgmt/PortGoalStateProgrammer.java", "diffHunk": "@@ -29,27 +29,27 @@\n import lombok.Data;\n \n @Data\n-public class GoalStateWorker {\n+public class PortGoalStateProgrammer extends GoalStateProgrammer {\n \n     private PortProgramInfo portProgramInfo;\n-    private GoalStateProvisionerClient gRpcClientForEpHost;\n-    private MessageClient kafkaClient;\n \n-    public GoalStateWorker(PortProgramInfo portProgramInfo) {\n+    public PortGoalStateProgrammer(PortProgramInfo portProgramInfo) {\n         this.portProgramInfo = portProgramInfo;\n     }\n \n-    public long[] SendGoalStateToHosts() {\n+    @Override\n+    public long[] run() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c0108113b99f3fdf2a457aa07ea53275fea883a"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM3NjkwNg==", "bodyText": "I assume this.isFastPath will be configurable in the future right?", "url": "https://github.com/futurewei-cloud/alcor/pull/82#discussion_r364376906", "createdAt": "2020-01-08T18:27:28Z", "author": {"login": "er1cthe0ne"}, "path": "src/com/futurewei/alcor/controller/resourcemgr/physical/goalstatemgmt/SubnetGoalStateProgrammer.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.controller.resourcemgr.physical.goalstatemgmt;\n+\n+import com.futurewei.alcor.controller.comm.config.IKafkaConfiguration;\n+import com.futurewei.alcor.controller.comm.grpc.GoalStateProvisionerClient;\n+import com.futurewei.alcor.controller.comm.message.GoalStateMessageConsumerFactory;\n+import com.futurewei.alcor.controller.comm.message.GoalStateMessageProducerFactory;\n+import com.futurewei.alcor.controller.comm.message.MessageClient;\n+import com.futurewei.alcor.controller.model.HostInfo;\n+import com.futurewei.alcor.controller.model.SubnetState;\n+import com.futurewei.alcor.controller.model.VpcState;\n+import com.futurewei.alcor.controller.schema.Common;\n+import com.futurewei.alcor.controller.schema.Goalstate;\n+import com.futurewei.alcor.controller.utilities.GoalStateUtil;\n+\n+public class SubnetGoalStateProgrammer extends GoalStateProgrammer {\n+\n+    private SubnetProgramInfo subnetProgramInfo;\n+    private boolean isFastPath;\n+\n+    public SubnetGoalStateProgrammer(SubnetProgramInfo subnetProgramInfo) {\n+        this.subnetProgramInfo = subnetProgramInfo;\n+        this.isFastPath = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c0108113b99f3fdf2a457aa07ea53275fea883a"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb8c9fbda583e5e284ac69f33035cdf4c34e02a4", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/bb8c9fbda583e5e284ac69f33035cdf4c34e02a4", "committedDate": "2020-01-08T18:58:52Z", "message": "Rename programmer method back to SendGoalStateToHosts"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2340, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}