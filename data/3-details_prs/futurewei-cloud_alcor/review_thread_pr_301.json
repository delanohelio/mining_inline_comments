{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwODkyODEy", "number": 301, "reviewThreads": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo0ODozNVrOEPgPsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzozMDoyNFrOEW_5eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NjkyNDAyOnYy", "diffSide": "RIGHT", "path": "lib/src/main/java/com/futurewei/alcor/common/db/ignite/IgniteConfiguration.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo0ODozNVrOGzP-tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo0ODozNVrOGzP-tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5MjM3NQ==", "bodyText": "Cool. Like the change.\nPR #297 also sets this flag as true for existing microservices, but we also need to change it fundamentally in DB module.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r456392375", "createdAt": "2020-07-17T11:48:35Z", "author": {"login": "xieus"}, "path": "lib/src/main/java/com/futurewei/alcor/common/db/ignite/IgniteConfiguration.java", "diffHunk": "@@ -70,7 +70,7 @@\n     @Value(\"${ignite.trust-store-password:#{null}}\")\n     private String trustStorePassword;\n \n-    @Value(\"${ignite.thin.client.enable: #{false}}\")\n+    @Value(\"${ignite.thin.client.enable: #{true}}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5788815c4f6113e60c8f75c152dd5d685eaac35"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NjkzMzMxOnYy", "diffSide": "RIGHT", "path": "services/mac_manager/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo1MTozNVrOGzQEMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo1MTozNVrOGzQEMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5Mzc3OA==", "bodyText": "These are duplicated. Please remove.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r456393778", "createdAt": "2020-07-17T11:51:35Z", "author": {"login": "xieus"}, "path": "services/mac_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,6 +1,14 @@\n server.port=9005\n-\n #####MAC manager configuration######\n+#Machine configuration", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5788815c4f6113e60c8f75c152dd5d685eaac35"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0Njk0MzUxOnYy", "diffSide": "RIGHT", "path": "lib/src/main/java/com/futurewei/alcor/common/stats/DurationCalculator.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo1NToxOFrOGzQKYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo1NToxOFrOGzQKYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5NTM2MQ==", "bodyText": "Will this give us some false positive information that the duration is zero? :-)", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r456395361", "createdAt": "2020-07-17T11:55:18Z", "author": {"login": "xieus"}, "path": "lib/src/main/java/com/futurewei/alcor/common/stats/DurationCalculator.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.common.stats;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+public class DurationCalculator {\n+    private static final Logger LOG = LoggerFactory.getLogger(DurationCalculator.class);\n+\n+    private static Map<Long, Long> startTimes = new HashMap<>();\n+\n+    public static void begin() {\n+        long id = Thread.currentThread().getId();\n+        startTimes.put(id, System.nanoTime());\n+    }\n+\n+    public static void end(String description) {\n+        long id = Thread.currentThread().getId();\n+        long endTime = System.nanoTime();\n+        long startTime;\n+        if (startTimes.containsKey(id)) {\n+            startTime = startTimes.get(id);\n+        } else {\n+            startTime = endTime;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5788815c4f6113e60c8f75c152dd5d685eaac35"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0Njk0NjMyOnYy", "diffSide": "LEFT", "path": "services/node_manager/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo1NjoyNlrOGzQMCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo1NjoyNlrOGzQMCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5NTc4Ng==", "bodyText": "Remove?", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r456395786", "createdAt": "2020-07-17T11:56:26Z", "author": {"login": "xieus"}, "path": "services/node_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,9 +1,11 @@\n server.port=9007\n-\n #####Ignite configuration######\n ignite.host=localhost\n ignite.port=10800\n-ignite.thin.client.enable=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5788815c4f6113e60c8f75c152dd5d685eaac35"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0Njk0ODYzOnYy", "diffSide": "RIGHT", "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/service/implement/PortServiceImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo1NzoyM1rOGzQNfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo1Nzo0N1rOGzQOMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5NjE1OA==", "bodyText": "Interesting!", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r456396158", "createdAt": "2020-07-17T11:57:23Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/service/implement/PortServiceImpl.java", "diffHunk": "@@ -37,9 +38,10 @@\n import java.util.*;\n import java.util.concurrent.CompletableFuture;\n \n-@Service\n-@ComponentScan(value = \"com.futurewei.alcor.common.utils\")\n-@ComponentScan(value = \"com.futurewei.alcor.web.restclient\")\n+//@Service\n+//@ComponentScan(value = \"com.futurewei.alcor.common.utils\")\n+//@ComponentScan(value = \"com.futurewei.alcor.web.restclient\")\n+@Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5788815c4f6113e60c8f75c152dd5d685eaac35"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5NjMzNg==", "bodyText": "Which guy replace this? Let me keep looking.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r456396336", "createdAt": "2020-07-17T11:57:47Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/service/implement/PortServiceImpl.java", "diffHunk": "@@ -37,9 +38,10 @@\n import java.util.*;\n import java.util.concurrent.CompletableFuture;\n \n-@Service\n-@ComponentScan(value = \"com.futurewei.alcor.common.utils\")\n-@ComponentScan(value = \"com.futurewei.alcor.web.restclient\")\n+//@Service\n+//@ComponentScan(value = \"com.futurewei.alcor.common.utils\")\n+//@ComponentScan(value = \"com.futurewei.alcor.web.restclient\")\n+@Deprecated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5NjE1OA=="}, "originalCommit": {"oid": "d5788815c4f6113e60c8f75c152dd5d685eaac35"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0Njk1MjEyOnYy", "diffSide": "RIGHT", "path": "services/port_manager/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMTo1ODozNlrOGzQPkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNjoyNDowM1rOG0V0tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5NjY4OA==", "bodyText": "I think we have some merge issue for application.properties. These are also duplicated.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r456396688", "createdAt": "2020-07-17T11:58:36Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,6 +1,15 @@\n server.port=9006\n-\n #####Microservice url configuration######\n+#Redis configuration", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5788815c4f6113e60c8f75c152dd5d685eaac35"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE3MzU0MQ==", "bodyText": "Resolved", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457173541", "createdAt": "2020-07-20T08:29:58Z", "author": {"login": "chenpiaoping"}, "path": "services/port_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,6 +1,15 @@\n server.port=9006\n-\n #####Microservice url configuration######\n+#Redis configuration", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5NjY4OA=="}, "originalCommit": {"oid": "d5788815c4f6113e60c8f75c152dd5d685eaac35"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUzNjY5NQ==", "bodyText": "Thanks.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457536695", "createdAt": "2020-07-20T16:24:03Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,6 +1,15 @@\n server.port=9006\n-\n #####Microservice url configuration######\n+#Redis configuration", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5NjY4OA=="}, "originalCommit": {"oid": "d5788815c4f6113e60c8f75c152dd5d685eaac35"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0Njk1NzIwOnYy", "diffSide": "RIGHT", "path": "services/private_ip_manager/src/main/java/com/futurewei/alcor/privateipmanager/controller/IpAddrController.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMjowMDoxN1rOGzQSqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMjowMDoxN1rOGzQSqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM5NzQ4Mw==", "bodyText": "This is a very good annotation. Consider to apply it to all other services as well \ud83d\udc4d", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r456397483", "createdAt": "2020-07-17T12:00:17Z", "author": {"login": "xieus"}, "path": "services/private_ip_manager/src/main/java/com/futurewei/alcor/privateipmanager/controller/IpAddrController.java", "diffHunk": "@@ -82,6 +85,7 @@ private int checkIpVersion(String ipAddress) throws Exception {\n     @PostMapping(\"/ips\")\n     @ResponseBody\n     @ResponseStatus(HttpStatus.CREATED)\n+    @DurationStatistics", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5788815c4f6113e60c8f75c152dd5d685eaac35"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjQzMjU2OnYy", "diffSide": "RIGHT", "path": "lib/src/main/java/com/futurewei/alcor/common/db/ignite/MockIgniteServer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMzo0Nzo0N1rOG0jEbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMTozNDoyMlrOG1Phlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc1MzcxMA==", "bodyText": "Can we explicit set it to false?", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457753710", "createdAt": "2020-07-20T23:47:47Z", "author": {"login": "xieus"}, "path": "lib/src/main/java/com/futurewei/alcor/common/db/ignite/MockIgniteServer.java", "diffHunk": "@@ -55,6 +57,11 @@ public static void init() {\n                 tcpDiscoverySpi.setLocalPortRange(LISTEN_PORT_RANGE);\n                 cfg.setDiscoverySpi(tcpDiscoverySpi);\n //                cfg.setPeerClassLoadingEnabled(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ4MjA3MA==", "bodyText": "For testing, since ignite server is started locally, we do not need to enable this configuration.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r458482070", "createdAt": "2020-07-22T01:34:22Z", "author": {"login": "chenpiaoping"}, "path": "lib/src/main/java/com/futurewei/alcor/common/db/ignite/MockIgniteServer.java", "diffHunk": "@@ -55,6 +57,11 @@ public static void init() {\n                 tcpDiscoverySpi.setLocalPortRange(LISTEN_PORT_RANGE);\n                 cfg.setDiscoverySpi(tcpDiscoverySpi);\n //                cfg.setPeerClassLoadingEnabled(true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc1MzcxMA=="}, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjQ4MTIyOnYy", "diffSide": "RIGHT", "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/processor/AbstractProcessor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDoxMjoyNlrOG0jg6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMTo0MDozNFrOG1PoHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2MTAwMQ==", "bodyText": "Can we use Alcor logger or you need something special from slf4j?", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457761001", "createdAt": "2020-07-21T00:12:26Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/processor/AbstractProcessor.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.portmanager.processor;\n+\n+import org.slf4j.Logger;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ4Mzc0MA==", "bodyText": "I thought alcor would use slf4j directly.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r458483740", "createdAt": "2020-07-22T01:40:34Z", "author": {"login": "chenpiaoping"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/processor/AbstractProcessor.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.portmanager.processor;\n+\n+import org.slf4j.Logger;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2MTAwMQ=="}, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjQ5MTc0OnYy", "diffSide": "LEFT", "path": "services/vpc_manager/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDoxNzo1M1rOG0jnBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMTozOToxM1rOG1PmzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2MjU2Nw==", "bodyText": "We should keep this configuration as thick client is not fully supported in K8s scenario.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457762567", "createdAt": "2020-07-21T00:17:53Z", "author": {"login": "xieus"}, "path": "services/vpc_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,12 +1,10 @@\n server.port=9001\n-\n #####Microservice url configuration######\n microservices.route.service.url=http://localhost:9003/vpcs/\n \n #####Ignite configuration######\n ignite.host=localhost\n ignite.port=10800\n-ignite.thin.client.enable=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ4MzQwNA==", "bodyText": "ok", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r458483404", "createdAt": "2020-07-22T01:39:13Z", "author": {"login": "chenpiaoping"}, "path": "services/vpc_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,12 +1,10 @@\n server.port=9001\n-\n #####Microservice url configuration######\n microservices.route.service.url=http://localhost:9003/vpcs/\n \n #####Ignite configuration######\n ignite.host=localhost\n ignite.port=10800\n-ignite.thin.client.enable=true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2MjU2Nw=="}, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjQ5NzM4OnYy", "diffSide": "RIGHT", "path": "web/src/main/java/com/futurewei/alcor/web/entity/subnet/SubnetEntity.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDoyMDo1MVrOG0jqUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNjoxODo0OVrOG1UPig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2MzQwOA==", "bodyText": "Does the @DaTa annotation not work here?", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457763408", "createdAt": "2020-07-21T00:20:51Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/subnet/SubnetEntity.java", "diffHunk": "@@ -208,4 +208,284 @@ public SubnetEntity(SubnetEntity subnetEntity) {\n                 subnetEntity.getHostRoutes(), subnetEntity.getPrefixlen(), subnetEntity.useDefaultSubnetpool, subnetEntity.getServiceTypes(), subnetEntity.getCreated_at(),\n                 subnetEntity.getUpdated_at());\n     }\n+\n+    public String getVpcId() {\n+        return vpcId;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ4MzI4Ng==", "bodyText": "As i know, @ Data is no longer recommended because it generates code during compilation and has Poor security and maintainability", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r458483286", "createdAt": "2020-07-22T01:38:47Z", "author": {"login": "chenpiaoping"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/subnet/SubnetEntity.java", "diffHunk": "@@ -208,4 +208,284 @@ public SubnetEntity(SubnetEntity subnetEntity) {\n                 subnetEntity.getHostRoutes(), subnetEntity.getPrefixlen(), subnetEntity.useDefaultSubnetpool, subnetEntity.getServiceTypes(), subnetEntity.getCreated_at(),\n                 subnetEntity.getUpdated_at());\n     }\n+\n+    public String getVpcId() {\n+        return vpcId;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2MzQwOA=="}, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU1OTM3MA==", "bodyText": "Okay thanks, let us remind the team of this annotation limit and start cleaning up the annotation when we see that.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r458559370", "createdAt": "2020-07-22T06:18:49Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/subnet/SubnetEntity.java", "diffHunk": "@@ -208,4 +208,284 @@ public SubnetEntity(SubnetEntity subnetEntity) {\n                 subnetEntity.getHostRoutes(), subnetEntity.getPrefixlen(), subnetEntity.useDefaultSubnetpool, subnetEntity.getServiceTypes(), subnetEntity.getCreated_at(),\n                 subnetEntity.getUpdated_at());\n     }\n+\n+    public String getVpcId() {\n+        return vpcId;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2MzQwOA=="}, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjUwMTczOnYy", "diffSide": "LEFT", "path": "services/security_group_manager/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDoyMzoxMlrOG0js4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDoyMzoxMlrOG0js4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2NDA2NQ==", "bodyText": "Keep this configuration as well.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457764065", "createdAt": "2020-07-21T00:23:12Z", "author": {"login": "xieus"}, "path": "services/security_group_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,9 +1,7 @@\n server.port=9008\n-\n #####Ignite configuration######\n ignite.host=localhost\n ignite.port=10800\n-ignite.thin.client.enable=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjUwODA3OnYy", "diffSide": "RIGHT", "path": "services/security_group_manager/src/main/java/com/futurewei/alcor/securitygroup/controller/SecurityGroupRuleController.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDoyNjoxOFrOG0jwaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMTo0MTo0M1rOG1PpIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2NDk3MQ==", "bodyText": "@chenpiaoping Can you test the SG APIs from API GW to see if anything is expected? Recently there is a minor change of List SG API introduced by PR ##304. The List SG contract was not fully compatible wit Neutron. Can you check others as well.\nThanks.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457764971", "createdAt": "2020-07-21T00:26:18Z", "author": {"login": "xieus"}, "path": "services/security_group_manager/src/main/java/com/futurewei/alcor/securitygroup/controller/SecurityGroupRuleController.java", "diffHunk": "@@ -15,24 +15,28 @@\n */\n package com.futurewei.alcor.securitygroup.controller;\n \n+import com.futurewei.alcor.common.stats.DurationStatistics;\n import com.futurewei.alcor.securitygroup.service.SecurityGroupRuleService;\n import com.futurewei.alcor.web.entity.securitygroup.SecurityGroupRule;\n import com.futurewei.alcor.web.entity.securitygroup.SecurityGroupRuleBulkJson;\n import com.futurewei.alcor.web.entity.securitygroup.SecurityGroupRuleJson;\n import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.context.annotation.ComponentScan;\n import org.springframework.http.HttpStatus;\n import org.springframework.web.bind.annotation.*;\n import java.util.List;\n import static com.futurewei.alcor.securitygroup.utils.RestParameterValidator.*;\n \n @RestController\n+@ComponentScan(value = \"com.futurewei.alcor.common.stats\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2NTEzNQ==", "bodyText": "You can do it a separate/small PR if any change is needed.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457765135", "createdAt": "2020-07-21T00:26:56Z", "author": {"login": "xieus"}, "path": "services/security_group_manager/src/main/java/com/futurewei/alcor/securitygroup/controller/SecurityGroupRuleController.java", "diffHunk": "@@ -15,24 +15,28 @@\n */\n package com.futurewei.alcor.securitygroup.controller;\n \n+import com.futurewei.alcor.common.stats.DurationStatistics;\n import com.futurewei.alcor.securitygroup.service.SecurityGroupRuleService;\n import com.futurewei.alcor.web.entity.securitygroup.SecurityGroupRule;\n import com.futurewei.alcor.web.entity.securitygroup.SecurityGroupRuleBulkJson;\n import com.futurewei.alcor.web.entity.securitygroup.SecurityGroupRuleJson;\n import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.context.annotation.ComponentScan;\n import org.springframework.http.HttpStatus;\n import org.springframework.web.bind.annotation.*;\n import java.util.List;\n import static com.futurewei.alcor.securitygroup.utils.RestParameterValidator.*;\n \n @RestController\n+@ComponentScan(value = \"com.futurewei.alcor.common.stats\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2NDk3MQ=="}, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ4NDAwMw==", "bodyText": "ok, i will do that.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r458484003", "createdAt": "2020-07-22T01:41:43Z", "author": {"login": "chenpiaoping"}, "path": "services/security_group_manager/src/main/java/com/futurewei/alcor/securitygroup/controller/SecurityGroupRuleController.java", "diffHunk": "@@ -15,24 +15,28 @@\n */\n package com.futurewei.alcor.securitygroup.controller;\n \n+import com.futurewei.alcor.common.stats.DurationStatistics;\n import com.futurewei.alcor.securitygroup.service.SecurityGroupRuleService;\n import com.futurewei.alcor.web.entity.securitygroup.SecurityGroupRule;\n import com.futurewei.alcor.web.entity.securitygroup.SecurityGroupRuleBulkJson;\n import com.futurewei.alcor.web.entity.securitygroup.SecurityGroupRuleJson;\n import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.context.annotation.ComponentScan;\n import org.springframework.http.HttpStatus;\n import org.springframework.web.bind.annotation.*;\n import java.util.List;\n import static com.futurewei.alcor.securitygroup.utils.RestParameterValidator.*;\n \n @RestController\n+@ComponentScan(value = \"com.futurewei.alcor.common.stats\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2NDk3MQ=="}, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjUwOTgzOnYy", "diffSide": "LEFT", "path": "services/route_manager/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDoyNzoxNVrOG0jxbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDoyNzoxNVrOG0jxbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2NTIyOQ==", "bodyText": "Keep this as well.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457765229", "createdAt": "2020-07-21T00:27:15Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,9 +1,7 @@\n server.port=9003\n-\n #####Ignite configuration######\n ignite.host=localhost\n ignite.port=10800\n-ignite.thin.client.enable=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjUxMTY1OnYy", "diffSide": "LEFT", "path": "services/private_ip_manager/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDoyODoxOVrOG0jyfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwMDoyODoxOVrOG0jyfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc2NTUwMA==", "bodyText": "Keep this as well.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r457765500", "createdAt": "2020-07-21T00:28:19Z", "author": {"login": "xieus"}, "path": "services/private_ip_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,9 +1,7 @@\n server.port=9004\n-\n #####Ignite configuration######\n ignite.host=localhost\n ignite.port=10800\n-ignite.thin.client.enable=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "439252a00868f8a417be17e73a9e67a1e2ca6616"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MzMwNjE1OnYy", "diffSide": "RIGHT", "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/processor/CallbackFunction.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNTowNjo1M1rOG3Chog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNTowNjo1M1rOG3Chog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2NjI0Mg==", "bodyText": "extra line.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r460366242", "createdAt": "2020-07-25T05:06:53Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/processor/CallbackFunction.java", "diffHunk": "@@ -0,0 +1,9 @@\n+package com.futurewei.alcor.portmanager.processor;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba6c9ba4bbc267ce46391c31da94822541f6182a"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNjMxOTI0OnYy", "diffSide": "RIGHT", "path": "web/src/main/java/com/futurewei/alcor/web/restclient/NodeManagerRestClient.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMTowNjo0NFrOG7xhTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMTowNjo0NFrOG7xhTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMzMDUwOQ==", "bodyText": "\"node_name\" => \"name\"", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r465330509", "createdAt": "2020-08-04T21:06:44Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/restclient/NodeManagerRestClient.java", "diffHunk": "@@ -34,8 +38,23 @@\n \n     @DurationStatistics\n     public NodeInfoJson getNodeInfo(String nodeId) throws Exception {\n-        String url = nodeManagerUrl + \"/\" + nodeId;\n-        return getRequest(url, NodeInfoJson.class);\n+        String queryParameter = buildQueryParameter(\"node_name\", Collections.singletonList(nodeId));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81f1e185eb2b28c174f68a3915f2105242dddd"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNjMyMDE4OnYy", "diffSide": "RIGHT", "path": "web/src/main/java/com/futurewei/alcor/web/restclient/NodeManagerRestClient.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMTowNjo1OVrOG7xh3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNzo0MTowN1rOG79-KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMzMDY1Mw==", "bodyText": "\"node_name\" => \"name\"", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r465330653", "createdAt": "2020-08-04T21:06:59Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/restclient/NodeManagerRestClient.java", "diffHunk": "@@ -34,8 +38,23 @@\n \n     @DurationStatistics\n     public NodeInfoJson getNodeInfo(String nodeId) throws Exception {\n-        String url = nodeManagerUrl + \"/\" + nodeId;\n-        return getRequest(url, NodeInfoJson.class);\n+        String queryParameter = buildQueryParameter(\"node_name\", Collections.singletonList(nodeId));\n+        String url = nodeManagerUrl + \"?\" + queryParameter;\n+        NodesWebJson nodesWebJson = getForObject(url, NodesWebJson.class);\n+        if (nodesWebJson == null ||\n+                nodesWebJson.getNodeInfos() == null ||\n+                nodesWebJson.getNodeInfos().size() != 1) {\n+            return new NodeInfoJson();\n+        }\n+\n+        return new NodeInfoJson(nodesWebJson.getNodeInfos().get(0));\n+    }\n+\n+    @DurationStatistics\n+    public NodesWebJson getNodeInfoBulk(List<String> nodeIds) throws Exception {\n+        String queryParameter = buildQueryParameter(\"node_name\", nodeIds);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c81f1e185eb2b28c174f68a3915f2105242dddd"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQyMDQ2MA==", "bodyText": "But node manager uses node_name:\npublic List getAllNodes(@ApiParam(value = \"node_name\") @RequestParam(required = false) String name,\n@ApiParam(value = \"node_id\") @RequestParam(required = false) String id,\n@ApiParam(value = \"mac_address\") @RequestParam(required = false) String mac_address,\n@ApiParam(value = \"local_Ip\") @RequestParam(required = false) String local_ip) throws ParameterNullOrEmptyException, Exception {\nhttps://github.com/futurewei-cloud/alcor/blob/master/services/node_manager/src/main/java/com/futurewei/alcor/nodemanager/controller/NodeController.java", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r465420460", "createdAt": "2020-08-05T01:33:50Z", "author": {"login": "chenpiaoping"}, "path": "web/src/main/java/com/futurewei/alcor/web/restclient/NodeManagerRestClient.java", "diffHunk": "@@ -34,8 +38,23 @@\n \n     @DurationStatistics\n     public NodeInfoJson getNodeInfo(String nodeId) throws Exception {\n-        String url = nodeManagerUrl + \"/\" + nodeId;\n-        return getRequest(url, NodeInfoJson.class);\n+        String queryParameter = buildQueryParameter(\"node_name\", Collections.singletonList(nodeId));\n+        String url = nodeManagerUrl + \"?\" + queryParameter;\n+        NodesWebJson nodesWebJson = getForObject(url, NodesWebJson.class);\n+        if (nodesWebJson == null ||\n+                nodesWebJson.getNodeInfos() == null ||\n+                nodesWebJson.getNodeInfos().size() != 1) {\n+            return new NodeInfoJson();\n+        }\n+\n+        return new NodeInfoJson(nodesWebJson.getNodeInfos().get(0));\n+    }\n+\n+    @DurationStatistics\n+    public NodesWebJson getNodeInfoBulk(List<String> nodeIds) throws Exception {\n+        String queryParameter = buildQueryParameter(\"node_name\", nodeIds);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMzMDY1Mw=="}, "originalCommit": {"oid": "9c81f1e185eb2b28c174f68a3915f2105242dddd"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTUxNTg2Mw==", "bodyText": "@chenpiaoping Somehow the query parameters that actually worked in the E2E test are\nname\nid\nmac_address\nlocal_ip\nIs this expected? @Gzure", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r465515863", "createdAt": "2020-08-05T07:02:49Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/restclient/NodeManagerRestClient.java", "diffHunk": "@@ -34,8 +38,23 @@\n \n     @DurationStatistics\n     public NodeInfoJson getNodeInfo(String nodeId) throws Exception {\n-        String url = nodeManagerUrl + \"/\" + nodeId;\n-        return getRequest(url, NodeInfoJson.class);\n+        String queryParameter = buildQueryParameter(\"node_name\", Collections.singletonList(nodeId));\n+        String url = nodeManagerUrl + \"?\" + queryParameter;\n+        NodesWebJson nodesWebJson = getForObject(url, NodesWebJson.class);\n+        if (nodesWebJson == null ||\n+                nodesWebJson.getNodeInfos() == null ||\n+                nodesWebJson.getNodeInfos().size() != 1) {\n+            return new NodeInfoJson();\n+        }\n+\n+        return new NodeInfoJson(nodesWebJson.getNodeInfos().get(0));\n+    }\n+\n+    @DurationStatistics\n+    public NodesWebJson getNodeInfoBulk(List<String> nodeIds) throws Exception {\n+        String queryParameter = buildQueryParameter(\"node_name\", nodeIds);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMzMDY1Mw=="}, "originalCommit": {"oid": "9c81f1e185eb2b28c174f68a3915f2105242dddd"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTUzNDUwNA==", "bodyText": "Yes. name is ok as a parameter.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r465534504", "createdAt": "2020-08-05T07:41:07Z", "author": {"login": "Gzure"}, "path": "web/src/main/java/com/futurewei/alcor/web/restclient/NodeManagerRestClient.java", "diffHunk": "@@ -34,8 +38,23 @@\n \n     @DurationStatistics\n     public NodeInfoJson getNodeInfo(String nodeId) throws Exception {\n-        String url = nodeManagerUrl + \"/\" + nodeId;\n-        return getRequest(url, NodeInfoJson.class);\n+        String queryParameter = buildQueryParameter(\"node_name\", Collections.singletonList(nodeId));\n+        String url = nodeManagerUrl + \"?\" + queryParameter;\n+        NodesWebJson nodesWebJson = getForObject(url, NodesWebJson.class);\n+        if (nodesWebJson == null ||\n+                nodesWebJson.getNodeInfos() == null ||\n+                nodesWebJson.getNodeInfos().size() != 1) {\n+            return new NodeInfoJson();\n+        }\n+\n+        return new NodeInfoJson(nodesWebJson.getNodeInfos().get(0));\n+    }\n+\n+    @DurationStatistics\n+    public NodesWebJson getNodeInfoBulk(List<String> nodeIds) throws Exception {\n+        String queryParameter = buildQueryParameter(\"node_name\", nodeIds);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMzMDY1Mw=="}, "originalCommit": {"oid": "9c81f1e185eb2b28c174f68a3915f2105242dddd"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNzYxODI3OnYy", "diffSide": "RIGHT", "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/repo/PortRepository.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNzoyNToyMVrOG79fpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNzozMDo0MVrOG79pzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTUyNjY5NQ==", "bodyText": "@chenpiaoping  Piaoping, our debug session doesn't include the commit 27d5b64 \"Change the name of neighbor cache\" which was just committed right before the meeting. Do you think this would make the difference?\nAlso can you pull from the latest master later today as we want to make sure your private branch has all the master payload? Thanks.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r465526695", "createdAt": "2020-08-05T07:25:21Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/repo/PortRepository.java", "diffHunk": "@@ -243,4 +257,67 @@ public PortNeighbors getPortNeighbors(Object arg) throws CacheException {\n \n         return portNeighbors;\n     }\n+\n+    private String getNeighborCacheName(String suffix) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27d5b642ae0b5e117494d88c91a1d80868fb31e7"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTUyOTI5Mg==", "bodyText": "This commit will not affect the results of the test. I pulled it from master yesterday.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r465529292", "createdAt": "2020-08-05T07:30:41Z", "author": {"login": "chenpiaoping"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/repo/PortRepository.java", "diffHunk": "@@ -243,4 +257,67 @@ public PortNeighbors getPortNeighbors(Object arg) throws CacheException {\n \n         return portNeighbors;\n     }\n+\n+    private String getNeighborCacheName(String suffix) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTUyNjY5NQ=="}, "originalCommit": {"oid": "27d5b642ae0b5e117494d88c91a1d80868fb31e7"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTQ3NzYwOnYy", "diffSide": "RIGHT", "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/processor/PortProcessor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzoxNDo0M1rOG-i3Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzoxNDo0M1rOG-i3Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIzNjA5NA==", "bodyText": "This createProcess only applies to port with binding host id. How about those without binding host id?", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r468236094", "createdAt": "2020-08-10T23:14:43Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/processor/PortProcessor.java", "diffHunk": "@@ -0,0 +1,239 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.portmanager.processor;\n+\n+import com.futurewei.alcor.web.entity.dataplane.InternalPortEntity;\n+import com.futurewei.alcor.web.entity.port.BindingProfile;\n+import com.futurewei.alcor.web.entity.port.PortEntity;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.UUID;\n+\n+public class PortProcessor extends AbstractProcessor {\n+    private void updateName(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        String newName = newPortEntity.getName();\n+        String oldName = oldPortEntity.getName();\n+\n+        if (newName != null && !newName.equals(oldName)) {\n+            oldPortEntity.setName(newName);\n+        }\n+    }\n+\n+    private void updateAdminState(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        boolean newAdminStateUp = newPortEntity.isAdminStateUp();\n+        boolean oldAdminStateUp = oldPortEntity.isAdminStateUp();\n+\n+        if (newAdminStateUp != oldAdminStateUp) {\n+            oldPortEntity.setAdminStateUp(newAdminStateUp);\n+        }\n+    }\n+\n+    private void updateBindingHostId(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        String newBindingHostId = newPortEntity.getBindingHostId();\n+        String oldBindingHostId = oldPortEntity.getBindingHostId();\n+\n+        if (newBindingHostId != null && !newBindingHostId.equals(oldBindingHostId)) {\n+            oldPortEntity.setBindingHostId(newBindingHostId);\n+        }\n+    }\n+\n+    private void updateBindingProfile(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        BindingProfile newBindingProfile = newPortEntity.getBindingProfile();\n+        BindingProfile oldBindingProfile = oldPortEntity.getBindingProfile();\n+\n+        if (newBindingProfile != null && !newBindingProfile.equals(oldBindingProfile)) {\n+            oldPortEntity.setBindingProfile(newBindingProfile);\n+        }\n+    }\n+\n+    private void updateBindingVnicType(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        String newBindingVnicType = newPortEntity.getBindingVnicType();\n+        String oldBindingVnicType = oldPortEntity.getBindingVnicType();\n+\n+        if (newBindingVnicType != null && !newBindingVnicType.equals(oldBindingVnicType)) {\n+            oldPortEntity.setBindingVnicType(newBindingVnicType);\n+        }\n+    }\n+\n+    private void updateDescription(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        String newDescription = newPortEntity.getDescription();\n+        String oldDescription = oldPortEntity.getDescription();\n+\n+        if (newDescription != null && !newDescription.equals(oldDescription)) {\n+            oldPortEntity.setDescription(newDescription);\n+        }\n+    }\n+\n+    private void updateDeviceId(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        String newDeviceId = newPortEntity.getDeviceId();\n+        String oldDeviceId = oldPortEntity.getDeviceId();\n+\n+        if (newDeviceId != null && !newDeviceId.equals(oldDeviceId)) {\n+            oldPortEntity.setDeviceId(newDeviceId);\n+        }\n+    }\n+\n+    private void updateDeviceOwner(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        String newDeviceOwner = newPortEntity.getDeviceOwner();\n+        String oldDeviceOwner = oldPortEntity.getDeviceOwner();\n+\n+        if (newDeviceOwner != null && !newDeviceOwner.equals(oldDeviceOwner)) {\n+            oldPortEntity.setDeviceOwner(newDeviceOwner);\n+        }\n+    }\n+\n+    private void updateDnsDomain(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        String newDnsDomain = newPortEntity.getDnsDomain();\n+        String oldDnsDomain = oldPortEntity.getDnsDomain();\n+\n+        if (newDnsDomain != null && !newDnsDomain.equals(oldDnsDomain)) {\n+            oldPortEntity.setDnsDomain(newDnsDomain);\n+        }\n+    }\n+\n+    private void updateDnsName(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        String newDnsName = newPortEntity.getDnsName();\n+        String oldDnsName = oldPortEntity.getDnsName();\n+\n+        if (newDnsName != null && !newDnsName.equals(oldDnsName)) {\n+            oldPortEntity.setDnsName(newDnsName);\n+        }\n+    }\n+\n+    private void updateExtraDhcpOpts(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        List<PortEntity.ExtraDhcpOpt> newExtraDhcpOpts = newPortEntity.getExtraDhcpOpts();\n+        List<PortEntity.ExtraDhcpOpt> oldExtraDhcpOpts = oldPortEntity.getExtraDhcpOpts();\n+\n+        if (newExtraDhcpOpts != null && !newExtraDhcpOpts.equals(oldExtraDhcpOpts)) {\n+            oldPortEntity.setExtraDhcpOpts(newExtraDhcpOpts);\n+        }\n+    }\n+\n+    private void updateAllowedAddressPairs(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        List<PortEntity.AllowAddressPair> newAllowedAddressPairs = newPortEntity.getAllowedAddressPairs();\n+        List<PortEntity.AllowAddressPair> oldAllowedAddressPairs = oldPortEntity.getAllowedAddressPairs();\n+\n+        if (newAllowedAddressPairs != null && !newAllowedAddressPairs.equals(oldAllowedAddressPairs)) {\n+            oldPortEntity.setAllowedAddressPairs(newAllowedAddressPairs);\n+        }\n+    }\n+\n+    private void updatePortSecurityEnabled(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        boolean newPortSecurityEnabled = newPortEntity.isPortSecurityEnabled();\n+        boolean oldPortSecurityEnabled = oldPortEntity.isPortSecurityEnabled();\n+\n+        if (newPortSecurityEnabled != oldPortSecurityEnabled) {\n+            oldPortEntity.setPortSecurityEnabled(newPortSecurityEnabled);\n+        }\n+    }\n+\n+    private void updateQosPolicyId(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        String newQosPolicyId = newPortEntity.getQosPolicyId();\n+        String oldQosPolicyId = oldPortEntity.getQosPolicyId();\n+\n+        if (newQosPolicyId != null && !newQosPolicyId.equals(oldQosPolicyId)) {\n+            oldPortEntity.setQosPolicyId(newQosPolicyId);\n+        }\n+    }\n+\n+\n+    private void updateMacLearningEnabled(PortEntity newPortEntity, PortEntity oldPortEntity) {\n+        boolean newMacLearningEnabled = newPortEntity.isMacLearningEnabled();\n+        boolean oldMacLearningEnabled = oldPortEntity.isMacLearningEnabled();\n+\n+        if (newMacLearningEnabled != oldMacLearningEnabled) {\n+            oldPortEntity.setMacLearningEnabled(newMacLearningEnabled);\n+        }\n+    }\n+\n+    private InternalPortEntity buildInternalPortEntity(PortEntity portEntity) {\n+        InternalPortEntity internalPortEntity =\n+                new InternalPortEntity(portEntity, null, null, null);\n+        NetworkConfig.ExtendPortEntity extendPortEntity =\n+                new NetworkConfig.ExtendPortEntity(internalPortEntity, portEntity.getBindingHostId());\n+\n+        return extendPortEntity;\n+    }\n+\n+    private void buildInternalPortEntities(PortContext context, List<PortEntity> portEntities) {\n+        List<InternalPortEntity> internalPortEntities = new ArrayList<>();\n+\n+        for (PortEntity portEntity: portEntities) {\n+            if (portEntity.getBindingHostId() != null) {\n+                internalPortEntities.add(buildInternalPortEntity(portEntity));\n+            }\n+        }\n+\n+        context.getNetworkConfig().setPortEntities(internalPortEntities);\n+    }\n+\n+    @Override\n+    void createProcess(PortContext context) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0827dc546153d7bac41bc2c44eab610715b6d700"}, "originalPosition": 186}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTQ5NDMxOnYy", "diffSide": "RIGHT", "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/processor/ProcessorManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzoyMjoyNlrOG-jA3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzoyMjoyNlrOG-jA3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIzODU1OQ==", "bodyText": "Can you give some comments to ProcessManager, AbstractProcess, PortProcess, and other types of processes etc.?", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r468238559", "createdAt": "2020-08-10T23:22:26Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/processor/ProcessorManager.java", "diffHunk": "@@ -0,0 +1,83 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.portmanager.processor;\n+\n+import com.futurewei.alcor.portmanager.util.ReflectionUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.stereotype.Component;\n+\n+import javax.annotation.PostConstruct;\n+import java.util.*;\n+\n+@Component\n+public class ProcessorManager {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0827dc546153d7bac41bc2c44eab610715b6d700"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTUxMDMzOnYy", "diffSide": "RIGHT", "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/request/RequestManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzozMDoyNFrOG-jKYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMzozMDoyNFrOG-jKYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI0MDk5NA==", "bodyText": "Please make some comments to RequestManager, and some other important requests as well.", "url": "https://github.com/futurewei-cloud/alcor/pull/301#discussion_r468240994", "createdAt": "2020-08-10T23:30:24Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/request/RequestManager.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.portmanager.request;\n+\n+import com.futurewei.alcor.common.executor.AsyncExecutor;\n+import com.futurewei.alcor.portmanager.processor.CallbackFunction;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.concurrent.CompletableFuture;\n+import java.util.concurrent.CompletionException;\n+\n+public class RequestManager {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0827dc546153d7bac41bc2c44eab610715b6d700"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4599, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}