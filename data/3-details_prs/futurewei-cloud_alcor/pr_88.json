{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNzg0ODky", "number": 88, "title": "Deploy controller with K8s", "bodyText": "This PR adds the following new changes:\n\nService/Deployment yaml files for controller\nService/Deployment yaml files for redis\nScript to deploy controller as K8s app\nNew config file for k8s deployment\nMisc changes to consolidate package import", "createdAt": "2020-01-12T01:59:08Z", "url": "https://github.com/futurewei-cloud/alcor/pull/88", "merged": true, "mergeCommit": {"oid": "096f7fcf9cc748ca16289d75175ab05fdc09ce41"}, "closed": true, "closedAt": "2020-01-17T02:10:26Z", "author": {"login": "xieus"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5FmDTAH2gAyMzYxNzg0ODkyOjc3NjRjYTUwZGZkYTg1MTBjNzZiM2VlMTYxOGJkM2EzMzQ0ZGM4NzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7EUlhAH2gAyMzYxNzg0ODkyOjk5NmExMmM4MmZjZTc5M2UyMTViNWU1MTliOTY1ZDJkMzc5NzZjNGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7764ca50dfda8510c76b3ee1618bd3a3344dc873", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/7764ca50dfda8510c76b3ee1618bd3a3344dc873", "committedDate": "2020-01-10T21:39:42Z", "message": "Add a k8s yaml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5f00dcf03f029ad6eca79a8a7bec98db48a730a", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/d5f00dcf03f029ad6eca79a8a7bec98db48a730a", "committedDate": "2020-01-10T21:50:32Z", "message": "Update type to ClusterIp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "382c0ce76cee52dcb4bbc376f5f268cf8ec45faf", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/382c0ce76cee52dcb4bbc376f5f268cf8ec45faf", "committedDate": "2020-01-10T22:41:37Z", "message": "Update service yaml and add deployment yaml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65f42d9232d1fcecbc776e9ed01c9c94788da641", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/65f42d9232d1fcecbc776e9ed01c9c94788da641", "committedDate": "2020-01-10T22:43:52Z", "message": "Add back service yaml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80b35a8b5f8a24521979b0fa17b5fbf6a5d6ad5e", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/80b35a8b5f8a24521979b0fa17b5fbf6a5d6ad5e", "committedDate": "2020-01-10T23:26:04Z", "message": "Remove unused refs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3514c5dbbfb993762a11eb12a07721a3720afa1", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/a3514c5dbbfb993762a11eb12a07721a3720afa1", "committedDate": "2020-01-10T23:30:41Z", "message": "Update the alcor controller package name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecffc7ad947bace546e922c1854347d18a972db5", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/ecffc7ad947bace546e922c1854347d18a972db5", "committedDate": "2020-01-11T01:00:48Z", "message": "Add redis deployment yaml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eafc9f36a45905d8a3ab5eb6a0176d42278170c2", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/eafc9f36a45905d8a3ab5eb6a0176d42278170c2", "committedDate": "2020-01-11T02:21:52Z", "message": "Add redis deployment/service yaml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a227e5f1dd7d8a620e92fc62efa305711efd98d", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/9a227e5f1dd7d8a620e92fc62efa305711efd98d", "committedDate": "2020-01-12T01:50:48Z", "message": "Add deployment util script and k8s config file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNTQ5OTA0", "url": "https://github.com/futurewei-cloud/alcor/pull/88#pullrequestreview-341549904", "createdAt": "2020-01-12T02:03:21Z", "commit": {"oid": "9a227e5f1dd7d8a620e92fc62efa305711efd98d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwMjowMzoyMlrOFcnjuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMlQwMjowMzoyMlrOFcnjuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MjU2OA==", "bodyText": "do we need to push the new image up everytime we call this script, note that the caller will require the user account password for fwnetworking for this to succeed.", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r365552568", "createdAt": "2020-01-12T02:03:22Z", "author": {"login": "er1cthe0ne"}, "path": "scripts/deployK8sClusterService.sh", "diffHunk": "@@ -0,0 +1,17 @@\n+#!/bin/bash\n+\n+if $1; then\n+\tdocker build -t fwnetworking/controller .\n+\tdocker push fwnetworking/controller:latest", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a227e5f1dd7d8a620e92fc62efa305711efd98d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e76569ee939f88dbdabdf53c8e0a5c769be11599", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/e76569ee939f88dbdabdf53c8e0a5c769be11599", "committedDate": "2020-01-14T02:10:03Z", "message": "Use a template for k8s config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7210f011ab1df4e7a8fa0a32f097a5a8bbfb96a6", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/7210f011ab1df4e7a8fa0a32f097a5a8bbfb96a6", "committedDate": "2020-01-14T06:20:47Z", "message": "Make a template docker file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "139319221899f81a90bb1dbdde5829b420158904", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/139319221899f81a90bb1dbdde5829b420158904", "committedDate": "2020-01-16T22:30:14Z", "message": "Update Controller service/deployment yaml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MjY4Mzg4", "url": "https://github.com/futurewei-cloud/alcor/pull/88#pullrequestreview-344268388", "createdAt": "2020-01-16T22:49:13Z", "commit": {"oid": "139319221899f81a90bb1dbdde5829b420158904"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjo0OToxM1rOFeqCIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjo0OToxM1rOFeqCIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY5MDI3NQ==", "bodyText": "Better to have version tag here to avoid using latest.", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r367690275", "createdAt": "2020-01-16T22:49:13Z", "author": {"login": "yb01"}, "path": "kubernetes/app/controller-deployment.yaml", "diffHunk": "@@ -0,0 +1,23 @@\n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: alcor\n+  labels:\n+    app: alcor\n+spec:\n+  replicas: 3\n+  selector:\n+    matchLabels:\n+      app: alcor\n+  template:\n+    metadata:\n+      labels:\n+        app: alcor\n+    spec:\n+      containers:\n+        - name: alcor\n+          image: fwnetworking/controller", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139319221899f81a90bb1dbdde5829b420158904"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MjY5OTAz", "url": "https://github.com/futurewei-cloud/alcor/pull/88#pullrequestreview-344269903", "createdAt": "2020-01-16T22:53:04Z", "commit": {"oid": "139319221899f81a90bb1dbdde5829b420158904"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjo1MzowNFrOFeqGvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQyMjo1MzowNFrOFeqGvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY5MTQ1Mg==", "bodyText": "here you assumed docker login is already run ?", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r367691452", "createdAt": "2020-01-16T22:53:04Z", "author": {"login": "yb01"}, "path": "scripts/deployK8sClusterService.sh", "diffHunk": "@@ -0,0 +1,17 @@\n+#!/bin/bash\n+\n+if $1; then\n+\tdocker build -t fwnetworking/controller .\n+\tdocker push fwnetworking/controller:latest", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "139319221899f81a90bb1dbdde5829b420158904"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MjcwNDI0", "url": "https://github.com/futurewei-cloud/alcor/pull/88#pullrequestreview-344270424", "createdAt": "2020-01-16T22:54:17Z", "commit": {"oid": "139319221899f81a90bb1dbdde5829b420158904"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "996a12c82fce793e215b5e519b965d2d37976c4f", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/996a12c82fce793e215b5e519b965d2d37976c4f", "committedDate": "2020-01-17T01:18:34Z", "message": "Add version tag to the deployment yaml"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2343, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}