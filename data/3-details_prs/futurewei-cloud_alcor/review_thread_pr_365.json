{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1MDU2NDY2", "number": 365, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNjo0MToyOFrOEeLfHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMjo0MzoxMlrOEfu_wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMDgwOTI3OnYy", "diffSide": "RIGHT", "path": "kubernetes/services/elastic_ip_manager.yaml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNjo0MToyOFrOHJsTkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNzoyMzo0NVrOHJtexw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkyNTEzNg==", "bodyText": "@Gzure Can you please suggest what needs to be changed to support rbac in K8s deployment?\nThis is related to PR #367. Thanks.", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r479925136", "createdAt": "2020-08-31T06:41:28Z", "author": {"login": "xieus"}, "path": "kubernetes/services/elastic_ip_manager.yaml", "diffHunk": "@@ -1,63 +1,65 @@\n-apiVersion: v1\r\n-kind: ConfigMap\r\n-metadata:\r\n-  name: elasticip-configmap\r\n-data:\r\n-  application.properties: |\r\n-    ignite.host=ignite-alcor-service.default.svc.cluster.local\r\n-    ignite.port=10800\r\n-    microservices.port.service.url=http://portmanager-service.default.svc.cluster.local:9006\r\n----\r\n-apiVersion: apps/v1\r\n-kind: Deployment\r\n-metadata:\r\n-  labels:\r\n-    app: elasticipmanager\r\n-  name: elasticipmanager\r\n-spec:\r\n-  selector:\r\n-    matchLabels:\r\n-      app: elasticipmanager\r\n-  replicas: 3\r\n-  template:\r\n-    metadata:\r\n-      labels:\r\n-        app: elasticipmanager\r\n-    spec:\r\n-      volumes:\r\n-        - name: elasticip-volume\r\n-          configMap:\r\n-            name: elasticip-configmap\r\n-            items:\r\n-              - key: application.properties\r\n-                path: application.properties\r\n-      containers:\r\n-        - image: zhonghaolyu/repo:ipKube1\r\n-          #- image: fwnetworking/controller:elasticip_manager-v0.3.0\r\n-          name: elasticipmanager-web\r\n-          imagePullPolicy: IfNotPresent\r\n-          command: [\"java\", \"-jar\", \"/app/AlcorElasticIpManager-0.1.0.jar\", \"--spring.config.location=/etc/elasticip/application.properties\"]\r\n-          ports:\r\n-            - containerPort: 8080\r\n-          volumeMounts:\r\n-            - name: elasticip-volume\r\n-              mountPath: /etc/elasticip\r\n-          envFrom:\r\n-            - configMapRef:\r\n-                name: elasticip-configmap\r\n----\r\n-apiVersion: v1\r\n-kind: Service\r\n-metadata:\r\n-  name: elasticipmanager-service\r\n-  labels:\r\n-    name: elasticipmanager-service\r\n-spec:\r\n-  type: NodePort\r\n-  ports:\r\n-    - port: 9011\r\n-      targetPort: 8080\r\n-      nodePort: 30011\r\n-  selector:\r\n-    app: elasticipmanager\r\n-\r\n+apiVersion: v1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e17084c52c60dd49023c4d78b48b4ab4abae99a"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkyOTc0OA==", "bodyText": "@Gzure Can you please suggest what needs to be changed to support rbac in K8s deployment?\nThis is related to PR #367. Thanks.\n\nWe don't change k8s deploy files, because of the Rbac config file already in Jar file.", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r479929748", "createdAt": "2020-08-31T06:49:38Z", "author": {"login": "Gzure"}, "path": "kubernetes/services/elastic_ip_manager.yaml", "diffHunk": "@@ -1,63 +1,65 @@\n-apiVersion: v1\r\n-kind: ConfigMap\r\n-metadata:\r\n-  name: elasticip-configmap\r\n-data:\r\n-  application.properties: |\r\n-    ignite.host=ignite-alcor-service.default.svc.cluster.local\r\n-    ignite.port=10800\r\n-    microservices.port.service.url=http://portmanager-service.default.svc.cluster.local:9006\r\n----\r\n-apiVersion: apps/v1\r\n-kind: Deployment\r\n-metadata:\r\n-  labels:\r\n-    app: elasticipmanager\r\n-  name: elasticipmanager\r\n-spec:\r\n-  selector:\r\n-    matchLabels:\r\n-      app: elasticipmanager\r\n-  replicas: 3\r\n-  template:\r\n-    metadata:\r\n-      labels:\r\n-        app: elasticipmanager\r\n-    spec:\r\n-      volumes:\r\n-        - name: elasticip-volume\r\n-          configMap:\r\n-            name: elasticip-configmap\r\n-            items:\r\n-              - key: application.properties\r\n-                path: application.properties\r\n-      containers:\r\n-        - image: zhonghaolyu/repo:ipKube1\r\n-          #- image: fwnetworking/controller:elasticip_manager-v0.3.0\r\n-          name: elasticipmanager-web\r\n-          imagePullPolicy: IfNotPresent\r\n-          command: [\"java\", \"-jar\", \"/app/AlcorElasticIpManager-0.1.0.jar\", \"--spring.config.location=/etc/elasticip/application.properties\"]\r\n-          ports:\r\n-            - containerPort: 8080\r\n-          volumeMounts:\r\n-            - name: elasticip-volume\r\n-              mountPath: /etc/elasticip\r\n-          envFrom:\r\n-            - configMapRef:\r\n-                name: elasticip-configmap\r\n----\r\n-apiVersion: v1\r\n-kind: Service\r\n-metadata:\r\n-  name: elasticipmanager-service\r\n-  labels:\r\n-    name: elasticipmanager-service\r\n-spec:\r\n-  type: NodePort\r\n-  ports:\r\n-    - port: 9011\r\n-      targetPort: 8080\r\n-      nodePort: 30011\r\n-  selector:\r\n-    app: elasticipmanager\r\n-\r\n+apiVersion: v1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkyNTEzNg=="}, "originalCommit": {"oid": "0e17084c52c60dd49023c4d78b48b4ab4abae99a"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk0NDM5MQ==", "bodyText": "okay thanks.", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r479944391", "createdAt": "2020-08-31T07:23:45Z", "author": {"login": "xieus"}, "path": "kubernetes/services/elastic_ip_manager.yaml", "diffHunk": "@@ -1,63 +1,65 @@\n-apiVersion: v1\r\n-kind: ConfigMap\r\n-metadata:\r\n-  name: elasticip-configmap\r\n-data:\r\n-  application.properties: |\r\n-    ignite.host=ignite-alcor-service.default.svc.cluster.local\r\n-    ignite.port=10800\r\n-    microservices.port.service.url=http://portmanager-service.default.svc.cluster.local:9006\r\n----\r\n-apiVersion: apps/v1\r\n-kind: Deployment\r\n-metadata:\r\n-  labels:\r\n-    app: elasticipmanager\r\n-  name: elasticipmanager\r\n-spec:\r\n-  selector:\r\n-    matchLabels:\r\n-      app: elasticipmanager\r\n-  replicas: 3\r\n-  template:\r\n-    metadata:\r\n-      labels:\r\n-        app: elasticipmanager\r\n-    spec:\r\n-      volumes:\r\n-        - name: elasticip-volume\r\n-          configMap:\r\n-            name: elasticip-configmap\r\n-            items:\r\n-              - key: application.properties\r\n-                path: application.properties\r\n-      containers:\r\n-        - image: zhonghaolyu/repo:ipKube1\r\n-          #- image: fwnetworking/controller:elasticip_manager-v0.3.0\r\n-          name: elasticipmanager-web\r\n-          imagePullPolicy: IfNotPresent\r\n-          command: [\"java\", \"-jar\", \"/app/AlcorElasticIpManager-0.1.0.jar\", \"--spring.config.location=/etc/elasticip/application.properties\"]\r\n-          ports:\r\n-            - containerPort: 8080\r\n-          volumeMounts:\r\n-            - name: elasticip-volume\r\n-              mountPath: /etc/elasticip\r\n-          envFrom:\r\n-            - configMapRef:\r\n-                name: elasticip-configmap\r\n----\r\n-apiVersion: v1\r\n-kind: Service\r\n-metadata:\r\n-  name: elasticipmanager-service\r\n-  labels:\r\n-    name: elasticipmanager-service\r\n-spec:\r\n-  type: NodePort\r\n-  ports:\r\n-    - port: 9011\r\n-      targetPort: 8080\r\n-      nodePort: 30011\r\n-  selector:\r\n-    app: elasticipmanager\r\n-\r\n+apiVersion: v1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkyNTEzNg=="}, "originalCommit": {"oid": "0e17084c52c60dd49023c4d78b48b4ab4abae99a"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxMTU3NzY1OnYy", "diffSide": "RIGHT", "path": "kubernetes/services/ignite_alcor_ip.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQwNDowNzo0NVrOHLVMZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMToxNzozOFrOHMITyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTY0MzYyMw==", "bodyText": "@kevin-zhonghao Do we need to turn on this JVM option?", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r481643623", "createdAt": "2020-09-02T04:07:45Z", "author": {"login": "xieus"}, "path": "kubernetes/services/ignite_alcor_ip.yaml", "diffHunk": "@@ -0,0 +1,131 @@\n+kind: ClusterRoleBinding\n+apiVersion: rbac.authorization.k8s.io/v1\n+metadata:\n+  name: ignite-alcor-ip\n+roleRef:\n+  kind: ClusterRole\n+  name: ignite-alcor-ip\n+  apiGroup: rbac.authorization.k8s.io\n+subjects:\n+  - kind: ServiceAccount\n+    name: ignite-alcor-ip\n+    namespace: ignite-alcor-ip\n+---\n+apiVersion: rbac.authorization.k8s.io/v1\n+kind: ClusterRole\n+metadata:\n+  name: ignite-alcor-ip\n+  namespace: ignite-alcor-ip\n+rules:\n+  - apiGroups:\n+      - \"\"\n+    resources: # Here are resources you can access\n+      - pods\n+      - endpoints\n+    verbs: # That is what you can do with them\n+      - get\n+      - list\n+      - watch\n+---\n+apiVersion: v1\n+kind: Namespace\n+metadata:\n+  name: ignite-alcor-ip\n+---\n+apiVersion: v1\n+kind: ServiceAccount\n+metadata:\n+  name: ignite-alcor-ip\n+  namespace: ignite-alcor-ip\n+---\n+apiVersion: v1\n+kind: Service\n+metadata:\n+  # The name must be equal to TcpDiscoveryKubernetesIpFinder.serviceName\n+  name: ignite-alcor-ip-service\n+  # The name must be equal to TcpDiscoveryKubernetesIpFinder.namespaceName\n+  namespace: ignite-alcor-ip\n+  labels:\n+    app: ignite-alcor-ip\n+spec:\n+  #type: LoadBalancer\n+  ports:\n+    - name: rest\n+      port: 8080\n+      targetPort: 8080\n+    - name: sql\n+      port: 10801\n+      targetPort: 10800\n+    #- name: thinclients\n+      #port: 10900\n+      #targetPort: 10900\n+  selector:\n+    app: ignite-alcor-ip\n+---\n+apiVersion: apps/v1\n+kind: StatefulSet\n+metadata:\n+  labels:\n+    app: ignite-alcor-ip\n+  name: ignite-alcor-ip\n+  namespace: ignite-alcor-ip\n+spec:\n+  selector:\n+    matchLabels:\n+      app: ignite-alcor-ip\n+  serviceName: ignite-alcor-ip-service\n+  replicas: 1\n+  template:\n+    metadata:\n+      labels:\n+        app: ignite-alcor-ip\n+    spec:\n+      serviceAccountName: ignite-alcor-ip\n+      containers:\n+        - name: ignite-alcor-ip-node\n+          image: ignite_alcor:lib8\n+          imagePullPolicy: IfNotPresent\n+          env:\n+            - name: OPTION_LIBS\n+              value: ignite-kubernetes,ignite-rest-http\n+            - name: CONFIG_URI\n+              value: https://raw.githubusercontent.com/kevin-zhonghao/alcor/xml/kubernetes/services/ignite_ip_config.xml\n+            #- name: IGNITE_QUIET\n+              #value: \"false\"\n+            #- name: JVM_OPTS\n+              #value: \"-Djava.net.preferIPv4Stack=true \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e17084c52c60dd49023c4d78b48b4ab4abae99a"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjQ4MTA5OQ==", "bodyText": "Yes ~ I turned on this option already", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r482481099", "createdAt": "2020-09-02T21:17:38Z", "author": {"login": "kevin-zhonghao"}, "path": "kubernetes/services/ignite_alcor_ip.yaml", "diffHunk": "@@ -0,0 +1,131 @@\n+kind: ClusterRoleBinding\n+apiVersion: rbac.authorization.k8s.io/v1\n+metadata:\n+  name: ignite-alcor-ip\n+roleRef:\n+  kind: ClusterRole\n+  name: ignite-alcor-ip\n+  apiGroup: rbac.authorization.k8s.io\n+subjects:\n+  - kind: ServiceAccount\n+    name: ignite-alcor-ip\n+    namespace: ignite-alcor-ip\n+---\n+apiVersion: rbac.authorization.k8s.io/v1\n+kind: ClusterRole\n+metadata:\n+  name: ignite-alcor-ip\n+  namespace: ignite-alcor-ip\n+rules:\n+  - apiGroups:\n+      - \"\"\n+    resources: # Here are resources you can access\n+      - pods\n+      - endpoints\n+    verbs: # That is what you can do with them\n+      - get\n+      - list\n+      - watch\n+---\n+apiVersion: v1\n+kind: Namespace\n+metadata:\n+  name: ignite-alcor-ip\n+---\n+apiVersion: v1\n+kind: ServiceAccount\n+metadata:\n+  name: ignite-alcor-ip\n+  namespace: ignite-alcor-ip\n+---\n+apiVersion: v1\n+kind: Service\n+metadata:\n+  # The name must be equal to TcpDiscoveryKubernetesIpFinder.serviceName\n+  name: ignite-alcor-ip-service\n+  # The name must be equal to TcpDiscoveryKubernetesIpFinder.namespaceName\n+  namespace: ignite-alcor-ip\n+  labels:\n+    app: ignite-alcor-ip\n+spec:\n+  #type: LoadBalancer\n+  ports:\n+    - name: rest\n+      port: 8080\n+      targetPort: 8080\n+    - name: sql\n+      port: 10801\n+      targetPort: 10800\n+    #- name: thinclients\n+      #port: 10900\n+      #targetPort: 10900\n+  selector:\n+    app: ignite-alcor-ip\n+---\n+apiVersion: apps/v1\n+kind: StatefulSet\n+metadata:\n+  labels:\n+    app: ignite-alcor-ip\n+  name: ignite-alcor-ip\n+  namespace: ignite-alcor-ip\n+spec:\n+  selector:\n+    matchLabels:\n+      app: ignite-alcor-ip\n+  serviceName: ignite-alcor-ip-service\n+  replicas: 1\n+  template:\n+    metadata:\n+      labels:\n+        app: ignite-alcor-ip\n+    spec:\n+      serviceAccountName: ignite-alcor-ip\n+      containers:\n+        - name: ignite-alcor-ip-node\n+          image: ignite_alcor:lib8\n+          imagePullPolicy: IfNotPresent\n+          env:\n+            - name: OPTION_LIBS\n+              value: ignite-kubernetes,ignite-rest-http\n+            - name: CONFIG_URI\n+              value: https://raw.githubusercontent.com/kevin-zhonghao/alcor/xml/kubernetes/services/ignite_ip_config.xml\n+            #- name: IGNITE_QUIET\n+              #value: \"false\"\n+            #- name: JVM_OPTS\n+              #value: \"-Djava.net.preferIPv4Stack=true \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTY0MzYyMw=="}, "originalCommit": {"oid": "0e17084c52c60dd49023c4d78b48b4ab4abae99a"}, "originalPosition": 96}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxMTU5ODM4OnYy", "diffSide": "RIGHT", "path": "kubernetes/services/sg_manager.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQwNDoxMTozN1rOHLVapA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMjowNDoxNVrOHMKqgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTY0NzI2OA==", "bodyText": "@kevin-zhonghao a general recommendation is to keep the last digit of nodePort same as port, for example, 30008 for sg manager. This would help in the debugging process.", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r481647268", "createdAt": "2020-09-02T04:11:37Z", "author": {"login": "xieus"}, "path": "kubernetes/services/sg_manager.yaml", "diffHunk": "@@ -56,7 +58,7 @@ spec:\n   ports:\n     - port: 9008\n       targetPort: 8080\n-      nodePort: 30010\n+      nodePort: 30011", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e17084c52c60dd49023c4d78b48b4ab4abae99a"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjUxOTY4MA==", "bodyText": "Sure, made it", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r482519680", "createdAt": "2020-09-02T22:04:15Z", "author": {"login": "kevin-zhonghao"}, "path": "kubernetes/services/sg_manager.yaml", "diffHunk": "@@ -56,7 +58,7 @@ spec:\n   ports:\n     - port: 9008\n       targetPort: 8080\n-      nodePort: 30010\n+      nodePort: 30011", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTY0NzI2OA=="}, "originalCommit": {"oid": "0e17084c52c60dd49023c4d78b48b4ab4abae99a"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNzA3NDM2OnYy", "diffSide": "RIGHT", "path": "kubernetes/services/deleteYaml.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMjozNzo0NFrOHMMqWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMzowMDozMVrOHMOT4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjU1MjQwOQ==", "bodyText": "Consider using same ns for all ignite pods/containers, regardless of which services that are connected to. This is not priority.", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r482552409", "createdAt": "2020-09-02T22:37:44Z", "author": {"login": "xieus"}, "path": "kubernetes/services/deleteYaml.sh", "diffHunk": "@@ -0,0 +1,128 @@\n+#!/bin/bash\n+\n+# Install prerequisites\n+if [[ \"$OSTYPE\" == \"linux-gnu\" ]]; then\n+\n+  echo \"delete yaml files\"\n+  \n+  kubectl delete clusterrolebinding ignite-alcor\n+  kubectl delete clusterrole ignite-alcor\n+  #kubectl delete namespaces ignite-alcor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "745f25824e29f85e810193a3a4475b0f5a6db441"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjU3OTQyNQ==", "bodyText": "Sure", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r482579425", "createdAt": "2020-09-02T23:00:31Z", "author": {"login": "kevin-zhonghao"}, "path": "kubernetes/services/deleteYaml.sh", "diffHunk": "@@ -0,0 +1,128 @@\n+#!/bin/bash\n+\n+# Install prerequisites\n+if [[ \"$OSTYPE\" == \"linux-gnu\" ]]; then\n+\n+  echo \"delete yaml files\"\n+  \n+  kubectl delete clusterrolebinding ignite-alcor\n+  kubectl delete clusterrole ignite-alcor\n+  #kubectl delete namespaces ignite-alcor", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjU1MjQwOQ=="}, "originalCommit": {"oid": "745f25824e29f85e810193a3a4475b0f5a6db441"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNzA3Njk0OnYy", "diffSide": "RIGHT", "path": "kubernetes/services/dpm_manager.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMjozODowOFrOHMMsHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMjozODowOFrOHMMsHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjU1Mjg2MA==", "bodyText": "like full name! \ud83d\udc4d", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r482552860", "createdAt": "2020-09-02T22:38:08Z", "author": {"login": "xieus"}, "path": "kubernetes/services/dpm_manager.yaml", "diffHunk": "@@ -11,17 +11,17 @@ apiVersion: apps/v1\n kind: Deployment\n metadata:\n   labels:\n-    app: dpmmanager\n-  name: dpmmanager\n+    app: dataplanemanager", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "745f25824e29f85e810193a3a4475b0f5a6db441"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNzEwMTkzOnYy", "diffSide": "RIGHT", "path": "kubernetes/services/api-gateway.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMjo0MTozN1rOHMM8qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMzowMToxNlrOHMOWBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjU1NzA5Ng==", "bodyText": "This will need to update to a new port after our Quota Mgr check-in (PR #359)", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r482557096", "createdAt": "2020-09-02T22:41:37Z", "author": {"login": "xieus"}, "path": "kubernetes/services/api-gateway.yaml", "diffHunk": "@@ -4,16 +4,43 @@ metadata:\n   name: api-configmap\n data:\n   application.properties: |\n+    ignite.thin.client.enable=true\n     spring.application.name=alcor-api-gateway\n-\n     logging.level.org.springframework.web=DEBUG\n     logging.level.org.springframework.cloud=DEBUG\n     logging.level.com.github.tomakehurst.wiremock=TRACE\n     management.endpoints.web.exposure.include=health,prometheus\n     spring.sleuth.sampler.probability=1.0\n     spring.sleuth.web.skipPattern=(^health.*)\n+    ignite.host=ignite-alcor-service.ignite-alcor.svc.cluster.local\n+    ignite.port=10800\n+    #ignite.key-store-path=keystore.jks\n+    #ignite.key-store-password=123456\n+    \n+    #ignite.trust-store-path=truststore.jks\n+    #ignite.trust-store-password=123456\n+\n     microservices.vpc.service.url=http://vpcmanager-service.default.svc.cluster.local:9001/\n     microservices.subnet.service.url=http://subnetmanager-service.default.svc.cluster.local:9002/\n+    microservices.port.service.url=http://portmanager-service.default.svc.cluster.local:9006/\n+    microservices.sg.service.url=http://sgmanager-service.default.svc.cluster.local:9008/\n+    microservices.route.service.url=http://routemanager-service.default.svc.cluster.local:9003/\n+    microservices.quota.service.url = http://vpcmanager-service.default.svc.cluster.local:9001/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "745f25824e29f85e810193a3a4475b0f5a6db441"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjU3OTk3Mg==", "bodyText": "NP", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r482579972", "createdAt": "2020-09-02T23:01:16Z", "author": {"login": "kevin-zhonghao"}, "path": "kubernetes/services/api-gateway.yaml", "diffHunk": "@@ -4,16 +4,43 @@ metadata:\n   name: api-configmap\n data:\n   application.properties: |\n+    ignite.thin.client.enable=true\n     spring.application.name=alcor-api-gateway\n-\n     logging.level.org.springframework.web=DEBUG\n     logging.level.org.springframework.cloud=DEBUG\n     logging.level.com.github.tomakehurst.wiremock=TRACE\n     management.endpoints.web.exposure.include=health,prometheus\n     spring.sleuth.sampler.probability=1.0\n     spring.sleuth.web.skipPattern=(^health.*)\n+    ignite.host=ignite-alcor-service.ignite-alcor.svc.cluster.local\n+    ignite.port=10800\n+    #ignite.key-store-path=keystore.jks\n+    #ignite.key-store-password=123456\n+    \n+    #ignite.trust-store-path=truststore.jks\n+    #ignite.trust-store-password=123456\n+\n     microservices.vpc.service.url=http://vpcmanager-service.default.svc.cluster.local:9001/\n     microservices.subnet.service.url=http://subnetmanager-service.default.svc.cluster.local:9002/\n+    microservices.port.service.url=http://portmanager-service.default.svc.cluster.local:9006/\n+    microservices.sg.service.url=http://sgmanager-service.default.svc.cluster.local:9008/\n+    microservices.route.service.url=http://routemanager-service.default.svc.cluster.local:9003/\n+    microservices.quota.service.url = http://vpcmanager-service.default.svc.cluster.local:9001/", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjU1NzA5Ng=="}, "originalCommit": {"oid": "745f25824e29f85e810193a3a4475b0f5a6db441"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNzExMjk4OnYy", "diffSide": "RIGHT", "path": "kubernetes/services/ignite_alcor.yaml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMjo0MzoxMlrOHMNEJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQyMzowMTozMlrOHMOW5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjU1OTAxMg==", "bodyText": "A pending item for us to figure out what is the recommended number of cpu. :-)", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r482559012", "createdAt": "2020-09-02T22:43:12Z", "author": {"login": "xieus"}, "path": "kubernetes/services/ignite_alcor.yaml", "diffHunk": "@@ -85,9 +85,9 @@ spec:\n         - name: ignite-alcor-node\n           image: ignite_alcor:lib8\n           imagePullPolicy: IfNotPresent\n-          resources:\n-            requests:\n-              cpu: \"16\"\n+          #resources:\n+            #requests:\n+              #cpu: \"16\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "745f25824e29f85e810193a3a4475b0f5a6db441"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjU4MDE5OQ==", "bodyText": "Yes that's right", "url": "https://github.com/futurewei-cloud/alcor/pull/365#discussion_r482580199", "createdAt": "2020-09-02T23:01:32Z", "author": {"login": "kevin-zhonghao"}, "path": "kubernetes/services/ignite_alcor.yaml", "diffHunk": "@@ -85,9 +85,9 @@ spec:\n         - name: ignite-alcor-node\n           image: ignite_alcor:lib8\n           imagePullPolicy: IfNotPresent\n-          resources:\n-            requests:\n-              cpu: \"16\"\n+          #resources:\n+            #requests:\n+              #cpu: \"16\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjU1OTAxMg=="}, "originalCommit": {"oid": "745f25824e29f85e810193a3a4475b0f5a6db441"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4666, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}