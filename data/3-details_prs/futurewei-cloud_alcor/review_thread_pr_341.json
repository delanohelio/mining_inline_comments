{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMDE0MTcw", "number": 341, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMToxOToxNFrOEVK_5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjoxODozN1rOEVRjjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNjM1NzQ5OnYy", "diffSide": "RIGHT", "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMToxOToxNVrOG7x4wA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMToxOToxNVrOG7x4wA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMzNjUxMg==", "bodyText": "Recommend to make a comment like \"Short-term fix: ....\"", "url": "https://github.com/futurewei-cloud/alcor/pull/341#discussion_r465336512", "createdAt": "2020-08-04T21:19:15Z", "author": {"login": "xieus"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java", "diffHunk": "@@ -133,6 +133,12 @@ public SubnetWebJson createSubnetState(@PathVariable String projectId, @RequestB\n             RestPreconditionsUtil.verifyParameterNotNullorEmpty(projectId);\n             RestPreconditionsUtil.verifyResourceNotNull(resource.getSubnet());\n \n+            // hard code : set gateway_ip = \"\" if its value is null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3d4f65805c5602ec8d2e2d07312c7b3c0dd6e9e"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNjM1OTkwOnYy", "diffSide": "RIGHT", "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMToyMDowNFrOG7x6SQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMToyMDowNFrOG7x6SQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMzNjkwNQ==", "bodyText": "Do you need to have the same short-term fix to Put Subnet?", "url": "https://github.com/futurewei-cloud/alcor/pull/341#discussion_r465336905", "createdAt": "2020-08-04T21:20:04Z", "author": {"login": "xieus"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java", "diffHunk": "@@ -133,6 +133,12 @@ public SubnetWebJson createSubnetState(@PathVariable String projectId, @RequestB\n             RestPreconditionsUtil.verifyParameterNotNullorEmpty(projectId);\n             RestPreconditionsUtil.verifyResourceNotNull(resource.getSubnet());\n \n+            // hard code : set gateway_ip = \"\" if its value is null\n+            String gateway_Ip = resource.getSubnet().getGatewayIp();\n+            if (gateway_Ip == null) {\n+                resource.getSubnet().setGatewayIp(\"\");\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3d4f65805c5602ec8d2e2d07312c7b3c0dd6e9e"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNzQwNjA3OnYy", "diffSide": "RIGHT", "path": "services/vpc_manager/src/main/java/com/futurewei/alcor/vpcmanager/controller/VpcController.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjowODowMFrOG77gHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjowODowMFrOG77gHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ5NDA0Nw==", "bodyText": "Please update comment.", "url": "https://github.com/futurewei-cloud/alcor/pull/341#discussion_r465494047", "createdAt": "2020-08-05T06:08:00Z", "author": {"login": "xieus"}, "path": "services/vpc_manager/src/main/java/com/futurewei/alcor/vpcmanager/controller/VpcController.java", "diffHunk": "@@ -363,4 +365,49 @@ public VpcWebJson addSubnetIdToVpcState(@PathVariable String projectid, @PathVar\n         return new VpcWebJson(inVpcState);\n \n     }\n+\n+    /**\n+     * delete subnet id in a network", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c5fc152121f9eeafec87ef0cd07fb95e899b824"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNzQzMTgwOnYy", "diffSide": "RIGHT", "path": "services/vpc_manager/src/main/java/com/futurewei/alcor/vpcmanager/controller/VpcController.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjoxODozN1rOG77vGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjoxODozN1rOG77vGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ5Nzg4Mg==", "bodyText": "inVpcState => updatedVPcState", "url": "https://github.com/futurewei-cloud/alcor/pull/341#discussion_r465497882", "createdAt": "2020-08-05T06:18:37Z", "author": {"login": "xieus"}, "path": "services/vpc_manager/src/main/java/com/futurewei/alcor/vpcmanager/controller/VpcController.java", "diffHunk": "@@ -363,4 +365,49 @@ public VpcWebJson addSubnetIdToVpcState(@PathVariable String projectid, @PathVar\n         return new VpcWebJson(inVpcState);\n \n     }\n+\n+    /**\n+     * delete subnet id in a network\n+     * @param projectid\n+     * @param vpcid\n+     * @param subnetid\n+     * @return\n+     * @throws Exception\n+     */\n+    @RequestMapping(\n+            method = PUT,\n+            value = {\"/project/{projectid}/vpcs/{vpcid}/subnetid/{subnetid}\"})\n+    public VpcWebJson deleteSubnetIdInVpcState(@PathVariable String projectid, @PathVariable String vpcid, @PathVariable String subnetid) throws Exception {\n+\n+        VpcEntity inVpcState = new VpcEntity();\n+\n+        try {\n+            RestPreconditionsUtil.verifyParameterNotNullorEmpty(projectid);\n+            RestPreconditionsUtil.verifyParameterNotNullorEmpty(vpcid);\n+            RestPreconditionsUtil.verifyParameterNotNullorEmpty(subnetid);\n+\n+            inVpcState = this.vpcDatabaseService.getByVpcId(vpcid);\n+            if (inVpcState == null) {\n+                throw new ResourceNotFoundException(\"Vpc not found : \" + vpcid);\n+            }\n+\n+            List<String> subnets = inVpcState.getSubnets();\n+            if (subnets == null || !subnets.contains(subnetid)) {\n+                return new VpcWebJson(inVpcState);\n+            }\n+            subnets.remove(subnetid);\n+\n+            inVpcState.setSubnets(subnets);\n+\n+            this.vpcDatabaseService.addVpc(inVpcState);\n+\n+            inVpcState = this.vpcDatabaseService.getByVpcId(vpcid);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c5fc152121f9eeafec87ef0cd07fb95e899b824"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4634, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}