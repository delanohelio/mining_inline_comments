{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5MDk0NDQy", "number": 358, "title": "[Design] Southbound Programming Workflow", "bodyText": "This PR drafts the southbound programming workflows from Port Mgr to ACA, for both gRPC fast path and MQ scale path.\nIt also updates integration docs (add author names, correct grammar errors etc.)", "createdAt": "2020-08-17T22:15:51Z", "url": "https://github.com/futurewei-cloud/alcor/pull/358", "merged": true, "mergeCommit": {"oid": "e51ef7e0f32ec56f62a1fd48440ec6ce31cdab5c"}, "closed": true, "closedAt": "2020-08-18T00:31:13Z", "author": {"login": "xieus"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpyKSYAH2gAyNDY5MDk0NDQyOjg1MzcyMDE4ZjRjNWE1MTViNWFhZTUxYTE1NDdhMTI1M2I0YTI5MzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc_7c88AFqTQ2ODkwNTY1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "85372018f4c5a515b5aae51a1547a1253b4a2935", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/85372018f4c5a515b5aae51a1547a1253b4a2935", "committedDate": "2020-06-10T04:43:28Z", "message": "Update integration docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fdee1faf0160d8989fe513ab08063bb8009568e", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/5fdee1faf0160d8989fe513ab08063bb8009568e", "committedDate": "2020-06-17T18:17:25Z", "message": "Merge branch 'upstream_master' into docs/workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a5ab01e1749310066adfd2dcd74ee56e08ce8fb", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/1a5ab01e1749310066adfd2dcd74ee56e08ce8fb", "committedDate": "2020-06-17T20:31:17Z", "message": "Add sb_prog workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e13065153763a1fe6144167f61a78998efafb1e1", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/e13065153763a1fe6144167f61a78998efafb1e1", "committedDate": "2020-06-24T14:31:53Z", "message": "Merge branch 'upstream_master' into docs/workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "730dc81066fd7670cdf1352ec613e6ca57e8c5e2", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/730dc81066fd7670cdf1352ec613e6ca57e8c5e2", "committedDate": "2020-06-24T19:21:08Z", "message": "Update SB programming workflows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d98672d7120f71ed16e33207abe732e7e5b90367", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/d98672d7120f71ed16e33207abe732e7e5b90367", "committedDate": "2020-06-24T19:28:37Z", "message": "Add a new sb workflow doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c317eb3de6110cd9a7e29210cb731e97733849e", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/6c317eb3de6110cd9a7e29210cb731e97733849e", "committedDate": "2020-06-26T06:54:35Z", "message": "Add Scenario E to v1 workflow and Scenario A to v2 workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "738fa6b8936d25143729745fcc5835cc0e9f943e", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/738fa6b8936d25143729745fcc5835cc0e9f943e", "committedDate": "2020-06-26T16:04:34Z", "message": "Add Scenario B to v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "447457f27ea7f76922d975dc3886cab0e1c0c85e", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/447457f27ea7f76922d975dc3886cab0e1c0c85e", "committedDate": "2020-06-26T16:09:33Z", "message": "Remove MQ from v1 diagram"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "936f6e3ee948b624a1e62f12aa739a3eb9a38b0a", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/936f6e3ee948b624a1e62f12aa739a3eb9a38b0a", "committedDate": "2020-08-17T21:52:06Z", "message": "Merge from upstream master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8398d71eac9cf405ac4c20820683e15aebda90ee", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/8398d71eac9cf405ac4c20820683e15aebda90ee", "committedDate": "2020-08-17T22:09:43Z", "message": "Add author info to Nova integration doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ba1357405e43883ea9ff2e7c6207b53856b1039", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/1ba1357405e43883ea9ff2e7c6207b53856b1039", "committedDate": "2020-08-17T22:42:03Z", "message": "Rename normal path to scaling path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c7d231578c72010dc383adde13d592eea6acd91", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/1c7d231578c72010dc383adde13d592eea6acd91", "committedDate": "2020-08-17T22:43:39Z", "message": "Rename normal path to scaling path"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4OTA1NjUz", "url": "https://github.com/futurewei-cloud/alcor/pull/358#pullrequestreview-468905653", "createdAt": "2020-08-17T23:58:11Z", "commit": {"oid": "1c7d231578c72010dc383adde13d592eea6acd91"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMzo1ODoxMVrOHB-rIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMzo1ODoxMVrOHB-rIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTgzNzQ3Mg==", "bodyText": "Let's plan to change NEIGHBOR_CREATE_UPDATE to our new Neighbor state format: NEIGHBOR,CREATE(operation_type),L2(neighbor_type)", "url": "https://github.com/futurewei-cloud/alcor/pull/358#discussion_r471837472", "createdAt": "2020-08-17T23:58:11Z", "author": {"login": "er1cthe0ne"}, "path": "docs/modules/ROOT/workflows/southbound_prog_workflow_v1.puml", "diffHunk": "@@ -0,0 +1,175 @@\n+' Copyright 2019 The Alcor Authors.\n+\n+' Licensed under the Apache License, Version 2.0 (the \"License\");\n+'        you may not use this file except in compliance with the License.\n+'        You may obtain a copy of the License at\n+\n+'        http://www.apache.org/licenses/LICENSE-2.0\n+\n+'        Unless required by applicable law or agreed to in writing, software\n+'        distributed under the License is distributed on an \"AS IS\" BASIS,\n+'        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+'        See the License for the specific language governing permissions and\n+'        limitations under the License.\n+\n+@startuml\n+\n+title Southbound Workflow of Port Provisioning - v1\n+\n+skinparam monochrome true\n+collections \"Port Manager\" as pm\n+collections \"Data Plane Manager\" as dpm\n+'collections \"Message Queue\" as mq\n+participant \"ACA@Host 1\" as host1\n+participant \"ACA@Host 2\" as host2\n+participant \"ACA@Host 3\" as host3\n+\n+==Scenario A: Create the first Port P1 at Host 1==\n+autonumber \"<b>[0]\"\n+pm -> dpm: POST /port async with RequestBody NetworkConfiguration={\\n\\t[P1 w/ neighbor_info=NULL],[Subnet],[VPC],[SG]}\n+activate dpm\n+dpm -> host1: Send a GoalState message {[(P1,CREATE)],[(Subnet,INFO)]} via gPRC\n+activate host1\n+host1 -> dpm: Reply a GoalStateOperationReply message on P1 programming status\n+deactivate host1\n+dpm -> pm: Reply an InternalProgrammingStatus message on P1 programming status\n+deactivate dpm\n+\n+==Create the second Port P2 at Host 1==\n+autonumber 5 \"<b>[0]\"\n+pm -> dpm: POST /port async with RequestBody NetworkConfiguration={\\n\\t[P2 w/ neighbor_info=NULL],[Subnet],[VPC],[SG]}\n+activate dpm\n+\n+dpm -> host1: Send a GoalState message \\n{[(P2,CREATE)],[(Subnet,INFO)]} via gPRC\n+activate host1\n+host1 -> dpm: Reply a GoalStateOperationReply message on P2 programming status\n+deactivate host1\n+\n+dpm -> pm: Once receiving response from Host1, reply an InternalProgrammingStatus\\nmessage on P2 programming status\n+deactivate dpm\n+==================================================\n+\n+==Scenario B: Create Ports (P1, P2) at Host 1==\n+autonumber \"<b>[0]\"\n+pm -> dpm: POST /port async with RequestBody NetworkConfiguration={\\n\\t[P1,P2 w/ neighbor_info=NULL],[Subnet],[VPC],[SG]}\n+activate dpm\n+\n+autonumber 2 \"<b>[0]\"\n+dpm -> host1: Send a GoalState message \\n{[(P1,CREATE),(P2,CREATE)],[(Subnet,INFO)]} via gPRC\n+activate host1\n+host1 -> dpm: Reply a GoalStateOperationReply message on P1 and P2 programming status\n+deactivate host1\n+\n+autonumber 4 \"<b>[0]\"\n+dpm -> pm: After receiving response from Host1 and Host2, reply an InternalProgrammingStatus\\nmessage on P2 programming status\n+deactivate dpm\n+\n+\n+==Scenario C: Create the first Port P1 at Host 1==\n+autonumber \"<b>[0]\"\n+pm -> dpm: POST /port async with RequestBody NetworkConfiguration={\\n\\t[P1 w/ neighbor_info=NULL],[Subnet],[VPC],[SG]}\n+activate dpm\n+dpm -> host1: Send a GoalState message {[(P1,CREATE)],[(Subnet,INFO)]} via gPRC\n+activate host1\n+host1 -> dpm: Reply a GoalStateOperationReply message on P1 programming status\n+deactivate host1\n+dpm -> pm: Reply an InternalProgrammingStatus message on P1 programming status\n+deactivate dpm\n+\n+==Create the second Port P2 at Host 2==\n+autonumber 5 \"<b>[0]\"\n+pm -> dpm: POST /port async with RequestBody NetworkConfiguration={\\n\\t[P2 w/ neighbor_info=[P1]],[Subnet],[VPC],[SG]}\n+activate dpm\n+\n+autonumber 6 \"<b>[0.a]\"\n+dpm -> host2: Send a GoalState message \\n{[(P2,CREATE),(P1,NEIGHBOR_CREATE_UPDATE)],[(Subnet,INFO)]} via gPRC", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c7d231578c72010dc383adde13d592eea6acd91"}, "originalPosition": 85}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2303, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}