{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMjY2MTY3", "number": 82, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxODoyNjowMFrODWoUJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxODoyNzoyOFrODWoVtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MDU1NzgxOnYy", "diffSide": "RIGHT", "path": "src/com/futurewei/alcor/controller/resourcemgr/physical/goalstatemgmt/PortGoalStateProgrammer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxODoyNjowMFrOFbfw3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxODo1ODo0MlrOFbgpKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM3NjI4NA==", "bodyText": "Nit: the previous function name has good information, I suggest to use a better function than \"run\".", "url": "https://github.com/futurewei-cloud/alcor/pull/82#discussion_r364376284", "createdAt": "2020-01-08T18:26:00Z", "author": {"login": "er1cthe0ne"}, "path": "src/com/futurewei/alcor/controller/resourcemgr/physical/goalstatemgmt/PortGoalStateProgrammer.java", "diffHunk": "@@ -29,27 +29,27 @@\n import lombok.Data;\n \n @Data\n-public class GoalStateWorker {\n+public class PortGoalStateProgrammer extends GoalStateProgrammer {\n \n     private PortProgramInfo portProgramInfo;\n-    private GoalStateProvisionerClient gRpcClientForEpHost;\n-    private MessageClient kafkaClient;\n \n-    public GoalStateWorker(PortProgramInfo portProgramInfo) {\n+    public PortGoalStateProgrammer(PortProgramInfo portProgramInfo) {\n         this.portProgramInfo = portProgramInfo;\n     }\n \n-    public long[] SendGoalStateToHosts() {\n+    @Override\n+    public long[] run() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c0108113b99f3fdf2a457aa07ea53275fea883a"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM5MDY5Ng==", "bodyText": "Thanks. Rename method back as suggested.", "url": "https://github.com/futurewei-cloud/alcor/pull/82#discussion_r364390696", "createdAt": "2020-01-08T18:58:42Z", "author": {"login": "xieus"}, "path": "src/com/futurewei/alcor/controller/resourcemgr/physical/goalstatemgmt/PortGoalStateProgrammer.java", "diffHunk": "@@ -29,27 +29,27 @@\n import lombok.Data;\n \n @Data\n-public class GoalStateWorker {\n+public class PortGoalStateProgrammer extends GoalStateProgrammer {\n \n     private PortProgramInfo portProgramInfo;\n-    private GoalStateProvisionerClient gRpcClientForEpHost;\n-    private MessageClient kafkaClient;\n \n-    public GoalStateWorker(PortProgramInfo portProgramInfo) {\n+    public PortGoalStateProgrammer(PortProgramInfo portProgramInfo) {\n         this.portProgramInfo = portProgramInfo;\n     }\n \n-    public long[] SendGoalStateToHosts() {\n+    @Override\n+    public long[] run() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM3NjI4NA=="}, "originalCommit": {"oid": "3c0108113b99f3fdf2a457aa07ea53275fea883a"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MDU2MTgxOnYy", "diffSide": "RIGHT", "path": "src/com/futurewei/alcor/controller/resourcemgr/physical/goalstatemgmt/SubnetGoalStateProgrammer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxODoyNzoyOFrOFbfzSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxODozMzowM1rOFbf8xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM3NjkwNg==", "bodyText": "I assume this.isFastPath will be configurable in the future right?", "url": "https://github.com/futurewei-cloud/alcor/pull/82#discussion_r364376906", "createdAt": "2020-01-08T18:27:28Z", "author": {"login": "er1cthe0ne"}, "path": "src/com/futurewei/alcor/controller/resourcemgr/physical/goalstatemgmt/SubnetGoalStateProgrammer.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.controller.resourcemgr.physical.goalstatemgmt;\n+\n+import com.futurewei.alcor.controller.comm.config.IKafkaConfiguration;\n+import com.futurewei.alcor.controller.comm.grpc.GoalStateProvisionerClient;\n+import com.futurewei.alcor.controller.comm.message.GoalStateMessageConsumerFactory;\n+import com.futurewei.alcor.controller.comm.message.GoalStateMessageProducerFactory;\n+import com.futurewei.alcor.controller.comm.message.MessageClient;\n+import com.futurewei.alcor.controller.model.HostInfo;\n+import com.futurewei.alcor.controller.model.SubnetState;\n+import com.futurewei.alcor.controller.model.VpcState;\n+import com.futurewei.alcor.controller.schema.Common;\n+import com.futurewei.alcor.controller.schema.Goalstate;\n+import com.futurewei.alcor.controller.utilities.GoalStateUtil;\n+\n+public class SubnetGoalStateProgrammer extends GoalStateProgrammer {\n+\n+    private SubnetProgramInfo subnetProgramInfo;\n+    private boolean isFastPath;\n+\n+    public SubnetGoalStateProgrammer(SubnetProgramInfo subnetProgramInfo) {\n+        this.subnetProgramInfo = subnetProgramInfo;\n+        this.isFastPath = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c0108113b99f3fdf2a457aa07ea53275fea883a"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM3OTMzNQ==", "bodyText": "One option is to always use fast path for switch/router setup.  We could think more on this.", "url": "https://github.com/futurewei-cloud/alcor/pull/82#discussion_r364379335", "createdAt": "2020-01-08T18:33:03Z", "author": {"login": "xieus"}, "path": "src/com/futurewei/alcor/controller/resourcemgr/physical/goalstatemgmt/SubnetGoalStateProgrammer.java", "diffHunk": "@@ -0,0 +1,105 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+package com.futurewei.alcor.controller.resourcemgr.physical.goalstatemgmt;\n+\n+import com.futurewei.alcor.controller.comm.config.IKafkaConfiguration;\n+import com.futurewei.alcor.controller.comm.grpc.GoalStateProvisionerClient;\n+import com.futurewei.alcor.controller.comm.message.GoalStateMessageConsumerFactory;\n+import com.futurewei.alcor.controller.comm.message.GoalStateMessageProducerFactory;\n+import com.futurewei.alcor.controller.comm.message.MessageClient;\n+import com.futurewei.alcor.controller.model.HostInfo;\n+import com.futurewei.alcor.controller.model.SubnetState;\n+import com.futurewei.alcor.controller.model.VpcState;\n+import com.futurewei.alcor.controller.schema.Common;\n+import com.futurewei.alcor.controller.schema.Goalstate;\n+import com.futurewei.alcor.controller.utilities.GoalStateUtil;\n+\n+public class SubnetGoalStateProgrammer extends GoalStateProgrammer {\n+\n+    private SubnetProgramInfo subnetProgramInfo;\n+    private boolean isFastPath;\n+\n+    public SubnetGoalStateProgrammer(SubnetProgramInfo subnetProgramInfo) {\n+        this.subnetProgramInfo = subnetProgramInfo;\n+        this.isFastPath = true;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM3NjkwNg=="}, "originalCommit": {"oid": "3c0108113b99f3fdf2a457aa07ea53275fea883a"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4675, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}