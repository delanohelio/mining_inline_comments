{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNTM2NzY5", "number": 215, "title": "[Documentation] Outline Elastic IP Manager Design", "bodyText": "This PR offers a design outline of Elastic IP Manager to kick off discussion.", "createdAt": "2020-05-25T04:22:45Z", "url": "https://github.com/futurewei-cloud/alcor/pull/215", "merged": true, "mergeCommit": {"oid": "44a3360e10880ef65921d1e5af8fab0e0a6e820a"}, "closed": true, "closedAt": "2020-05-27T03:43:07Z", "author": {"login": "xieus"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckoOThgH2gAyNDIyNTM2NzY5OjMzZjNmZmUzODY1ZTE1ZmQyZWE0ZTYwY2M2ZGFiMGEzZDhlNWU1OWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclPqOxgFqTQxODgxMTY4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "33f3ffe3865e15fd2ea4e60cc6dab0a3d8e5e59a", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/33f3ffe3865e15fd2ea4e60cc6dab0a3d8e5e59a", "committedDate": "2020-05-25T04:19:11Z", "message": "Outline EIP manager design"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff0c9e2142263fa087dbf9b9ef2abd4c8427b9a9", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/ff0c9e2142263fa087dbf9b9ef2abd4c8427b9a9", "committedDate": "2020-05-25T06:04:13Z", "message": "Add reference section"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTc5MTM0", "url": "https://github.com/futurewei-cloud/alcor/pull/215#pullrequestreview-417979134", "createdAt": "2020-05-26T05:28:51Z", "commit": {"oid": "ff0c9e2142263fa087dbf9b9ef2abd4c8427b9a9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNToyODo1MlrOGaPF2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNToyODo1MlrOGaPF2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE2MzQxNw==", "bodyText": "should the uniqueness be in the world level?", "url": "https://github.com/futurewei-cloud/alcor/pull/215#discussion_r430163417", "createdAt": "2020-05-26T05:28:52Z", "author": {"login": "er1cthe0ne"}, "path": "docs/modules/ROOT/pages/mgmt_services/elastic_ip_manager.adoc", "diffHunk": "@@ -0,0 +1,207 @@\n+= Elastic IP Manager Design Specification\n+Eric Yuan <dakuaiera@sina.com>, Liguang Xie <lxie@futurewei.com>\n+v0.1, 2020-05-24\n+:toc: right\n+:imagesdir: ../../images\n+\n+NOTE: This document is under development\n+\n+== Overview\n+\n+The Elastic IP (EIP) manager is responsible of allocating and releasing EIP as well as associating the allocated EIP to a running instance or network interface (port).\n+This is the acting microservice that provides elastic/floating IP APIs to external customers (through API gateway) and driving the elastic IP CURD workflow.\n+A network interface with an enabled EIP could establish inbound connections from and outbound connections to external networks like Internet.\n+\n+=== User Cases\n+A customer of Alcor could leverage Elastic IP manager in the following cases:\n+\n+* Allocate or release a _standalone_ EIP within the user account.\n+* Associate or disassociate an EIP to a running instance, which by default attach to its primary interface.\n+* Associate or disassociate an EIP to a network interface.\n+\n+=== Service Basic Requirements\n+\n+[arabic]\n+1. Provide CURD REST APIs for customers or provider admins to management EIPs. The APIs are compatible to OpenStack Neutron v2.0 APIs <<neutron_api>>.\n+1. Provide CURD REST APIs for cloud provider admins to register or unregister a list of public IPv4 or IPv6 ranges in EIP manager.\n+Note that those IP ranges should be owned by cloud provider.\n+1. Allocate _standalone_ and _unique_ EIP address. Guarantee uniqueness of EIP address in a regional scope.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff0c9e2142263fa087dbf9b9ef2abd4c8427b9a9"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTc5MTY3", "url": "https://github.com/futurewei-cloud/alcor/pull/215#pullrequestreview-417979167", "createdAt": "2020-05-26T05:28:57Z", "commit": {"oid": "ff0c9e2142263fa087dbf9b9ef2abd4c8427b9a9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTA5Mzgw", "url": "https://github.com/futurewei-cloud/alcor/pull/215#pullrequestreview-418109380", "createdAt": "2020-05-26T09:08:00Z", "commit": {"oid": "ff0c9e2142263fa087dbf9b9ef2abd4c8427b9a9"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwOTowODowMFrOGaVXUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwOTo1MToyMFrOGaW8pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI2NjE5NQ==", "bodyText": "Maybe we don't need to support this case (associate or disassociate an EIP to a running instance)? That case could be supported by an upper layer API orchestration component.", "url": "https://github.com/futurewei-cloud/alcor/pull/215#discussion_r430266195", "createdAt": "2020-05-26T09:08:00Z", "author": {"login": "Eric-Yuan"}, "path": "docs/modules/ROOT/pages/mgmt_services/elastic_ip_manager.adoc", "diffHunk": "@@ -0,0 +1,207 @@\n+= Elastic IP Manager Design Specification\n+Eric Yuan <dakuaiera@sina.com>, Liguang Xie <lxie@futurewei.com>\n+v0.1, 2020-05-24\n+:toc: right\n+:imagesdir: ../../images\n+\n+NOTE: This document is under development\n+\n+== Overview\n+\n+The Elastic IP (EIP) manager is responsible of allocating and releasing EIP as well as associating the allocated EIP to a running instance or network interface (port).\n+This is the acting microservice that provides elastic/floating IP APIs to external customers (through API gateway) and driving the elastic IP CURD workflow.\n+A network interface with an enabled EIP could establish inbound connections from and outbound connections to external networks like Internet.\n+\n+=== User Cases\n+A customer of Alcor could leverage Elastic IP manager in the following cases:\n+\n+* Allocate or release a _standalone_ EIP within the user account.\n+* Associate or disassociate an EIP to a running instance, which by default attach to its primary interface.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff0c9e2142263fa087dbf9b9ef2abd4c8427b9a9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI5MjEzNQ==", "bodyText": "I think the internal or external DNS might be an indenpentant microservice,  because they own indenpentant resource models and APIs. The dns_name attribute in a floatingip/port could be added after the DNS microservice is ready.", "url": "https://github.com/futurewei-cloud/alcor/pull/215#discussion_r430292135", "createdAt": "2020-05-26T09:51:20Z", "author": {"login": "Eric-Yuan"}, "path": "docs/modules/ROOT/pages/mgmt_services/elastic_ip_manager.adoc", "diffHunk": "@@ -0,0 +1,207 @@\n+= Elastic IP Manager Design Specification\n+Eric Yuan <dakuaiera@sina.com>, Liguang Xie <lxie@futurewei.com>\n+v0.1, 2020-05-24\n+:toc: right\n+:imagesdir: ../../images\n+\n+NOTE: This document is under development\n+\n+== Overview\n+\n+The Elastic IP (EIP) manager is responsible of allocating and releasing EIP as well as associating the allocated EIP to a running instance or network interface (port).\n+This is the acting microservice that provides elastic/floating IP APIs to external customers (through API gateway) and driving the elastic IP CURD workflow.\n+A network interface with an enabled EIP could establish inbound connections from and outbound connections to external networks like Internet.\n+\n+=== User Cases\n+A customer of Alcor could leverage Elastic IP manager in the following cases:\n+\n+* Allocate or release a _standalone_ EIP within the user account.\n+* Associate or disassociate an EIP to a running instance, which by default attach to its primary interface.\n+* Associate or disassociate an EIP to a network interface.\n+\n+=== Service Basic Requirements\n+\n+[arabic]\n+1. Provide CURD REST APIs for customers or provider admins to management EIPs. The APIs are compatible to OpenStack Neutron v2.0 APIs <<neutron_api>>.\n+1. Provide CURD REST APIs for cloud provider admins to register or unregister a list of public IPv4 or IPv6 ranges in EIP manager.\n+Note that those IP ranges should be owned by cloud provider.\n+1. Allocate _standalone_ and _unique_ EIP address. Guarantee uniqueness of EIP address in a regional scope.\n+1. Release public IP address per customer request or other microservices, and make it ready for reuse for other customers.\n+1. Release (port, EIP) association when a port is to be deleted.\n+1. Maintain EIP states and a mapping from an EIP to its owning interface/port.\n+1. Association of an EIP to a running instance or network interface (port) at POST call (when fixed_ip_address is not NULL), or at PUT call.\n+1. Disassociation of EIP with a network interface (primary or secondary).\n+1. Working together with other services including port manager and DNS manager for allocation of port and external DNS, respectively.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff0c9e2142263fa087dbf9b9ef2abd4c8427b9a9"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4ODExNjg2", "url": "https://github.com/futurewei-cloud/alcor/pull/215#pullrequestreview-418811686", "createdAt": "2020-05-27T02:15:59Z", "commit": {"oid": "ff0c9e2142263fa087dbf9b9ef2abd4c8427b9a9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2103, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}