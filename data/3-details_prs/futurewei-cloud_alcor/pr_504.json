{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyMjAwNTgz", "number": 504, "title": "[Hotfix] Short-term Solution to GW Port Issues", "bodyText": "Issue Description: #495 #498\nSolution:\n\nIssue 495: Adjusted the logic sequence of code execution and commented the operation of deleting gateway port in port manager\nIssue 498: Store subnet entity in db before creating gateway port in PM, and then update subnet in the end", "createdAt": "2020-12-04T00:17:20Z", "url": "https://github.com/futurewei-cloud/alcor/pull/504", "merged": true, "mergeCommit": {"oid": "977ac09ce7dadceb4c3790f9e89c88610922d005"}, "closed": true, "closedAt": "2020-12-04T05:00:58Z", "author": {"login": "kevin-zhonghao"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQUKStAH2gAyNTMyMjAwNTgzOjI0YjliNzZhZTM0OWYyNzdhYzU1ZjFjYzExZTgxNjM2ZDE1NjliNmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdivjO-gFqTU0NDYzOTM4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "24b9b76ae349f277ac55f1cc11e81636d1569b6d", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/24b9b76ae349f277ac55f1cc11e81636d1569b6d", "committedDate": "2020-10-07T21:49:22Z", "message": "commit message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08ec421662ef56559a388e6c7308aa47cfd07a6b", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/08ec421662ef56559a388e6c7308aa47cfd07a6b", "committedDate": "2020-10-07T22:00:25Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2507b8fc44a4ca94da310b73c11453cec9f2504b", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/2507b8fc44a4ca94da310b73c11453cec9f2504b", "committedDate": "2020-10-15T17:12:49Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cab6bfa9573926c29b9f8dbbeab732a9de1da7e", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/8cab6bfa9573926c29b9f8dbbeab732a9de1da7e", "committedDate": "2020-10-15T23:33:06Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9d2a5822429286e2b01ce0842f16cb70dc5168f", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/d9d2a5822429286e2b01ce0842f16cb70dc5168f", "committedDate": "2020-10-16T16:57:50Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daba98ee8949b91b2b77f74c6fbb30529355ee51", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/daba98ee8949b91b2b77f74c6fbb30529355ee51", "committedDate": "2020-10-20T00:03:13Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b813735c5032b70928a2304007875824f5ccedca", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/b813735c5032b70928a2304007875824f5ccedca", "committedDate": "2020-10-22T17:43:05Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd9a9847b0f42c5a7fd089ea09fa6f24233d008e", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/fd9a9847b0f42c5a7fd089ea09fa6f24233d008e", "committedDate": "2020-10-28T19:40:54Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e44875aa2fa685b2252647f413c704dce7a21611", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/e44875aa2fa685b2252647f413c704dce7a21611", "committedDate": "2020-10-29T18:42:59Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98dcf0dbb1c950ee71a0d663a7042cbce30d24ed", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/98dcf0dbb1c950ee71a0d663a7042cbce30d24ed", "committedDate": "2020-10-30T22:44:46Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9c3a47d74ba5fffbe13746ee4e33af0fbb394fe", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/a9c3a47d74ba5fffbe13746ee4e33af0fbb394fe", "committedDate": "2020-11-03T23:40:18Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f058bd1edef55af8ab0e25cb7b043fa6c04c272f", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/f058bd1edef55af8ab0e25cb7b043fa6c04c272f", "committedDate": "2020-11-05T07:42:35Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08d4a6f7da0d94caef77156cbb27fa05965eff9a", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/08d4a6f7da0d94caef77156cbb27fa05965eff9a", "committedDate": "2020-11-05T19:07:01Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef0b4fe4b03ddcc00904f1d603d020648846c34f", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/ef0b4fe4b03ddcc00904f1d603d020648846c34f", "committedDate": "2020-11-18T22:54:01Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf29fc71c3dba26a3a166b859fd10be380f03400", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/bf29fc71c3dba26a3a166b859fd10be380f03400", "committedDate": "2020-12-02T21:06:36Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b23608afa9dfcd50c2c172672f9a104ccb0e7f21", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/b23608afa9dfcd50c2c172672f9a104ccb0e7f21", "committedDate": "2020-12-03T18:09:47Z", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor into new_master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d573fbfce3994282ebb7cfcdbe2556c2c35afc57", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/d573fbfce3994282ebb7cfcdbe2556c2c35afc57", "committedDate": "2020-12-04T00:14:41Z", "message": "temporary solution for issue 495 and 498"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NTY2OTA5", "url": "https://github.com/futurewei-cloud/alcor/pull/504#pullrequestreview-544566909", "createdAt": "2020-12-04T00:18:19Z", "commit": {"oid": "d573fbfce3994282ebb7cfcdbe2556c2c35afc57"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMDoxODoxOVrOH-7HlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwMDoxOTowMFrOH-7IZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc0MjM1Ng==", "bodyText": "We can remove //-tem", "url": "https://github.com/futurewei-cloud/alcor/pull/504#discussion_r535742356", "createdAt": "2020-12-04T00:18:19Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/NeutronRouterToSubnetServiceImpl.java", "diffHunk": "@@ -44,7 +44,7 @@ public SubnetWebJson getSubnet(String projectid, String subnetId) {\n \n     @Override\n     public SubnetsWebJson getSubnetsByPortId(String projectid, String portId) {\n-        String subnetManagerServiceUrl = subnetUrl + \"/project/\" + projectid + \"/subnets?port_id=\" + portId;\n+        String subnetManagerServiceUrl = subnetUrl + \"/project/\" + projectid + \"/subnets?gatewayPortId=\" + portId;//-tem", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d573fbfce3994282ebb7cfcdbe2556c2c35afc57"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc0MjU2Ng==", "bodyText": "Let us discuss this in today's afternoon sync up meeting.", "url": "https://github.com/futurewei-cloud/alcor/pull/504#discussion_r535742566", "createdAt": "2020-12-04T00:19:00Z", "author": {"login": "xieus"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java", "diffHunk": "@@ -516,19 +519,19 @@ public ResponseId deleteSubnetState(@PathVariable String projectId, @PathVariabl\n                 throw new SubnetBindRoutes();\n             }\n \n-            this.subnetDatabaseService.deleteSubnet(subnetId);\n-\n             // delete subnet id in vpc\n             this.subnetService.deleteSubnetIdInVpc(subnetId, projectId, subnetEntity.getVpcId());\n \n             // delete subnet routing rule in route manager\n             this.subnetService.deleteSubnetRoutingRuleInRM(projectId, subnetId);\n \n-            // delete gateway port in port manager\n-            GatewayPortDetail gatewayPortDetail = subnetEntity.getGatewayPortDetail();\n-            if (gatewayPortDetail != null) {\n-                this.subnetToPortManagerService.deleteGatewayPort(projectId, gatewayPortDetail.getGatewayPortId());\n-            }\n+            // TODO: delete gateway port in port manager. Temporary solution, need PM fix issue", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d573fbfce3994282ebb7cfcdbe2556c2c35afc57"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b77deb3ab22076f50577d6378e557adf197dbb1a", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/b77deb3ab22076f50577d6378e557adf197dbb1a", "committedDate": "2020-12-04T03:03:01Z", "message": "temporary solution for issue 495 and 498"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c176a9f6751684c3526f582b34e183d5178efe6", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/9c176a9f6751684c3526f582b34e183d5178efe6", "committedDate": "2020-12-04T03:33:10Z", "message": "temporary solution for issue 495 and 498"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NjM5Mzg4", "url": "https://github.com/futurewei-cloud/alcor/pull/504#pullrequestreview-544639388", "createdAt": "2020-12-04T03:54:41Z", "commit": {"oid": "9c176a9f6751684c3526f582b34e183d5178efe6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2048, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}