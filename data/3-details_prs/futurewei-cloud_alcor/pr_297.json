{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NTIyNzcx", "number": 297, "title": "[Ignite] Set Ignite Thin Client as the Default Client", "bodyText": "This PR is mainly about enable all micro services to use ignite thin client mode", "createdAt": "2020-07-13T22:08:31Z", "url": "https://github.com/futurewei-cloud/alcor/pull/297", "merged": true, "mergeCommit": {"oid": "37eb9418a00fc70c681d9b1a423f7a11a965c9a5"}, "closed": true, "closedAt": "2020-07-17T05:37:16Z", "author": {"login": "haboy52581"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0o95IgFqTQ0NzY0NzAyNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1pyKZAFqTQ1MDMyMjIyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjQ3MDI1", "url": "https://github.com/futurewei-cloud/alcor/pull/297#pullrequestreview-447647025", "createdAt": "2020-07-13T22:13:57Z", "commit": {"oid": "f4221e3569c3b645e6ceb1e7c58b2468d247250e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjoxMzo1N1rOGw8Ncw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjoxMzo1N1rOGw8Ncw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk3MTMxNQ==", "bodyText": "Let us add one deployment script for Ignite container, which will be a major usage for Ignite.", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r453971315", "createdAt": "2020-07-13T22:13:57Z", "author": {"login": "xieus"}, "path": "scripts/ignite.sh", "diffHunk": "@@ -0,0 +1,5 @@\n+kill -9 `lsof -i:10800|awk '{print $2}'|grep -v PID`\n+cd /root/git/apache-ignite-2.8.1-bin/bin/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4221e3569c3b645e6ceb1e7c58b2468d247250e"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjQ5NzQx", "url": "https://github.com/futurewei-cloud/alcor/pull/297#pullrequestreview-447649741", "createdAt": "2020-07-13T22:19:20Z", "commit": {"oid": "f4221e3569c3b645e6ceb1e7c58b2468d247250e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjoxOToyMFrOGw8caQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjoyNToyN1rOGw8qgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk3NTE0NQ==", "bodyText": "For DPM, the assigned port is 9010 https://github.com/futurewei-cloud/alcor/blob/master/services/data_plane_manager/src/main/resources/application.properties.\nLet us change it to 9010:9010.", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r453975145", "createdAt": "2020-07-13T22:19:20Z", "author": {"login": "xieus"}, "path": "scripts/deploy_docker.sh", "diffHunk": "@@ -0,0 +1,27 @@\n+sh ignite.sh\n+sleep 30\n+export IGNITE_HOME=/root/git/apache-ignite-2.8.1-bin/\n+docker stop -f $(docker ps |grep -v rally|awk '{print $1}'|grep -v CON)\n+\n+docker run --rm --net=host --name mm -p 9005:9005 -v /tmp:/tmp -itd mm\n+sleep 2\n+docker run --rm --net=host --name pim -p 9004:9004 -v /tmp:/tmp -itd pim\n+sleep 2\n+docker run --rm --net=host --name rm -p 9003:9003 -v /tmp:/tmp -itd rm\n+sleep 2\n+docker run --rm --net=host --name nm -p 9007:9007 -v /tmp:/tmp -itd nm\n+sleep 2\n+docker run --rm --net=host --name sgm -p 9008:9008 -v /tmp:/tmp -itd sgm\n+sleep 2\n+docker run --rm --net=host --name sm -p 9002:9002 -v /tmp:/tmp -itd sm\n+sleep 2\n+docker run --rm --net=host --name vm -p 9001:9001 -v /tmp:/tmp -itd vm\n+sleep 2\n+docker run --rm --net=host --name dpm -p 9009:9009 -v /tmp:/tmp -itd dpm\n+sleep 2\n+sleep 10\n+docker run --rm --net=host --name pm -p 9006:9006 -v /tmp:/tmp -itd pm\n+sleep 2\n+docker run --rm --net=host --name ag -p 8080:8080  -v /tmp:/tmp -itd ag", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4221e3569c3b645e6ceb1e7c58b2468d247250e"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk3ODc1Mg==", "bodyText": "For each service, we have the naming conversion, could you update the script by referencing to the doc https://github.com/xieus/alcor/blob/docs/design/docs/modules/ROOT/controller.adoc?", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r453978752", "createdAt": "2020-07-13T22:25:27Z", "author": {"login": "xieus"}, "path": "scripts/deploy_docker.sh", "diffHunk": "@@ -0,0 +1,27 @@\n+sh ignite.sh\n+sleep 30\n+export IGNITE_HOME=/root/git/apache-ignite-2.8.1-bin/\n+docker stop -f $(docker ps |grep -v rally|awk '{print $1}'|grep -v CON)\n+\n+docker run --rm --net=host --name mm -p 9005:9005 -v /tmp:/tmp -itd mm", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4221e3569c3b645e6ceb1e7c58b2468d247250e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjYwMDIy", "url": "https://github.com/futurewei-cloud/alcor/pull/297#pullrequestreview-447660022", "createdAt": "2020-07-13T22:40:12Z", "commit": {"oid": "f6bb4a504d011c90cd34c82a890a3fb1e669314e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjo0MDoxMlrOGw9NtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjo0NDoxM1rOGw9TRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4Nzc2NQ==", "bodyText": "Need to rename the file with a proper name, which is a basic requirement for every file to be checked in.", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r453987765", "createdAt": "2020-07-13T22:40:12Z", "author": {"login": "xieus"}, "path": "scripts/1", "diffHunk": "@@ -0,0 +1,16 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6bb4a504d011c90cd34c82a890a3fb1e669314e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4ODE5OA==", "bodyText": "Is this file duplicate of scripts/cvpc.json?", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r453988198", "createdAt": "2020-07-13T22:41:21Z", "author": {"login": "xieus"}, "path": "scripts/1", "diffHunk": "@@ -0,0 +1,16 @@\n+{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4Nzc2NQ=="}, "originalCommit": {"oid": "f6bb4a504d011c90cd34c82a890a3fb1e669314e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4OTA1Mg==", "bodyText": "For API gateway, the assigned port is 9009. Please change to 9009:9009.", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r453989052", "createdAt": "2020-07-13T22:43:49Z", "author": {"login": "xieus"}, "path": "scripts/deploy_docker.sh", "diffHunk": "@@ -0,0 +1,27 @@\n+sh ignite.sh\n+sleep 30\n+export IGNITE_HOME=/root/git/apache-ignite-2.8.1-bin/\n+docker stop -f $(docker ps |grep -v rally|awk '{print $1}'|grep -v CON)\n+\n+docker run --rm --net=host --name mm -p 9005:9005 -v /tmp:/tmp -itd mm\n+sleep 2\n+docker run --rm --net=host --name pim -p 9004:9004 -v /tmp:/tmp -itd pim\n+sleep 2\n+docker run --rm --net=host --name rm -p 9003:9003 -v /tmp:/tmp -itd rm\n+sleep 2\n+docker run --rm --net=host --name nm -p 9007:9007 -v /tmp:/tmp -itd nm\n+sleep 2\n+docker run --rm --net=host --name sgm -p 9008:9008 -v /tmp:/tmp -itd sgm\n+sleep 2\n+docker run --rm --net=host --name sm -p 9002:9002 -v /tmp:/tmp -itd sm\n+sleep 2\n+docker run --rm --net=host --name vm -p 9001:9001 -v /tmp:/tmp -itd vm\n+sleep 2\n+docker run --rm --net=host --name dpm -p 9009:9009 -v /tmp:/tmp -itd dpm\n+sleep 2\n+sleep 10\n+docker run --rm --net=host --name pm -p 9006:9006 -v /tmp:/tmp -itd pm\n+sleep 2\n+docker run --rm --net=host --name ag -p 8080:8080  -v /tmp:/tmp -itd ag", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk3NTE0NQ=="}, "originalCommit": {"oid": "f4221e3569c3b645e6ceb1e7c58b2468d247250e"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4OTE5MA==", "bodyText": "8080 => 9009 as suggested above.", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r453989190", "createdAt": "2020-07-13T22:44:13Z", "author": {"login": "xieus"}, "path": "scripts/test.sh", "diffHunk": "@@ -0,0 +1,6 @@\n+curl -X POST -H \"Content-Type: application/json\" --data @cvpc.json http://10.213.43.158:8080/project/3dda2801-d675", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6bb4a504d011c90cd34c82a890a3fb1e669314e"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MzczOTI1", "url": "https://github.com/futurewei-cloud/alcor/pull/297#pullrequestreview-448373925", "createdAt": "2020-07-14T18:48:48Z", "commit": {"oid": "3bfa97f662d91ef27090a47009fea7716392dcb0"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxODo0ODo0OFrOGxgxyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxODo1ODowNlrOGxhGHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3MDQ0MA==", "bodyText": "we would need binding host id as well.", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r454570440", "createdAt": "2020-07-14T18:48:48Z", "author": {"login": "xieus"}, "path": "scripts/cp1b.json", "diffHunk": "@@ -0,0 +1,63 @@\n+{\n+  \"port\": {\n+    \"admin_state_up\": true,\n+    \"allowed_address_pairs\": [\n+      {\n+        \"ip_address\": \"11.11.11.1\",\n+        \"mac_address\": \"00-AA-BB-15-EB-3F\"\n+      }\n+    ],\n+    \"binding:profile\": \"string\",\n+    \"binding:vif_details\": \"string\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bfa97f662d91ef27090a47009fea7716392dcb0"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3MTAzOQ==", "bodyText": "do we need \"-itd VMM\" or it doesn't matter actually?", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r454571039", "createdAt": "2020-07-14T18:49:53Z", "author": {"login": "xieus"}, "path": "scripts/deploy_docker.sh", "diffHunk": "@@ -0,0 +1,12 @@\n+docker stop -f $(docker ps |grep -v rally|awk '{print $1}'|grep -v CON)\n+docker run -tid  --name ig1 -p 47500:47500 -p 47100:47100 -p 10800:10800 -it apacheignite/ignite:latest\n+docker run --rm --net=host --name VMM -p 9005:9005 -v /tmp:/tmp -itd mm", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bfa97f662d91ef27090a47009fea7716392dcb0"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3MjkwOA==", "bodyText": "Need to register nodes if binding host id is not null.\nAlso I would suggest you to provide similar features as provided in https://github.com/futurewei-cloud/alcor/blob/master/scripts/sampleVpcTest.sh\ne.g. use json_pp to show clear json message, allow users to delete vpc/subnet/port etc.", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r454572908", "createdAt": "2020-07-14T18:53:18Z", "author": {"login": "xieus"}, "path": "scripts/test.sh", "diffHunk": "@@ -0,0 +1,6 @@\n+curl -X POST -H \"Content-Type: application/json\" --data @cvpc.json http://10.213.43.158:9009/project/3dda2801-d675\n+-4688-a63f-dcda8d327f50/vpcs\n+curl -X POST -H \"Content-Type: application/json\" --data @csn.json http://10.213.43.158:9009/project/3dda2801-d675-\n+4688-a63f-dcda8d327f50/subnets\n+curl -X POST -H \"Content-Type: application/json\" --data @cp1b.json http://10.213.43.158:9009/project/3dda2801-d675", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bfa97f662d91ef27090a47009fea7716392dcb0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3NTY0NA==", "bodyText": "This script has the potential to replace https://github.com/futurewei-cloud/alcor/blob/master/scripts/deploy.sh.\nCould you provide similar features of the current deploy.sh, for example,\n\nadd Ignite deployment with the latest xml you provided\nremove existing containers if conflicted with new deployment\nUbuntu and MacOs support (MacOS is optional) you can do it later when not so busy", "url": "https://github.com/futurewei-cloud/alcor/pull/297#discussion_r454575644", "createdAt": "2020-07-14T18:58:06Z", "author": {"login": "xieus"}, "path": "scripts/deploy_docker.sh", "diffHunk": "@@ -0,0 +1,12 @@\n+docker stop -f $(docker ps |grep -v rally|awk '{print $1}'|grep -v CON)\n+docker run -tid  --name ig1 -p 47500:47500 -p 47100:47100 -p 10800:10800 -it apacheignite/ignite:latest\n+docker run --rm --net=host --name VMM -p 9005:9005 -v /tmp:/tmp -itd mm", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3MTAzOQ=="}, "originalCommit": {"oid": "3bfa97f662d91ef27090a47009fea7716392dcb0"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a4c530dbadace8e265f2d535a342ad3bdec94b2", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/7a4c530dbadace8e265f2d535a342ad3bdec94b2", "committedDate": "2020-07-17T01:19:22Z", "message": "change to use ignite thin client"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3ab75486d2b79d30e2002f2fd38fd57ef6c24afb", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/3ab75486d2b79d30e2002f2fd38fd57ef6c24afb", "committedDate": "2020-07-17T00:39:47Z", "message": "change properties to use ignite thin client"}, "afterCommit": {"oid": "7a4c530dbadace8e265f2d535a342ad3bdec94b2", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/7a4c530dbadace8e265f2d535a342ad3bdec94b2", "committedDate": "2020-07-17T01:19:22Z", "message": "change to use ignite thin client"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMzIyMjIw", "url": "https://github.com/futurewei-cloud/alcor/pull/297#pullrequestreview-450322220", "createdAt": "2020-07-17T01:44:58Z", "commit": {"oid": "7a4c530dbadace8e265f2d535a342ad3bdec94b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2204, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}