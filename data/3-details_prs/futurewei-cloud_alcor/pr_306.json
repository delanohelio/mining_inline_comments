{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzODgwODgy", "number": 306, "title": "[Deployment] Alcor Onebox Setup for Development and Deployment", "bodyText": "This PR proposes the following changes:\n\nScripts to build and deploy Alcor microservices and DB service in onebox setup\nIgnite Dockerfile with JDK11\nTest script and VPC/Subnet/Port/SG payload", "createdAt": "2020-07-20T22:05:11Z", "url": "https://github.com/futurewei-cloud/alcor/pull/306", "merged": true, "mergeCommit": {"oid": "8eb23fbc855567896d9260cb43962d680a89a7d5"}, "closed": true, "closedAt": "2020-07-29T21:15:39Z", "author": {"login": "haboy52581"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc248IEgH2gAyNDUzODgwODgyOmNhMjQ3MzE2ZjAzYzg0YzJiZTg0Njc1Yjk2MGRmYmRkMzg2MjJhMjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5xuHWgFqTQ1NzkwMzUzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ca247316f03c84c2be84675b960dfbdd38622a22", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/ca247316f03c84c2be84675b960dfbdd38622a22", "committedDate": "2020-07-20T21:58:21Z", "message": "add ignite dockerfile, deployment script and test script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/410435514cc9da4826fead98dd1fa76b8fd838b5", "committedDate": "2020-07-20T22:04:14Z", "message": "reorg"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxOTk3NzU1", "url": "https://github.com/futurewei-cloud/alcor/pull/306#pullrequestreview-451997755", "createdAt": "2020-07-20T22:17:37Z", "commit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMjoxNzozN1rOG0hM_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMjoyNToyNlrOG0hYuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyMzEzMg==", "bodyText": "../Dockerfile point to <alcor_root>. Do we refer to <alcor_root>/scripts/Dockerfile? In that case, we will need change the relative path here.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r457723132", "createdAt": "2020-07-20T22:17:37Z", "author": {"login": "xieus"}, "path": "scripts/startall.sh", "diffHunk": "@@ -0,0 +1,24 @@\n+#prepare build\n+apt install openjdk-11-jdk telnet bridge-utils maven -y\n+git clone https://github.com/futurewei-cloud/alcor.git\n+cd alcor\n+cp ../Dockerfile scripts/ignite.Dockerfile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyMzg1MQ==", "bodyText": "What is the expected result from current sg implementation?", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r457723851", "createdAt": "2020-07-20T22:19:23Z", "author": {"login": "xieus"}, "path": "scripts/test1.sh", "diffHunk": "@@ -0,0 +1,5 @@\n+curl -X POST -H \"Content-Type: application/json\" --data @json/cvpc.json http://localhost:9009/project/3dda2801-d675-4688-a63f-dcda8d327f50/vpcs\n+curl -X POST -H \"Content-Type: application/json\" --data @json/csn.json http://localhost:9009/project/3dda2801-d675-4688-a63f-dcda8d327f50/subnets\n+curl -X POST -H \"Content-Type: application/json\" --data @json/node.json http://localhost:9007/v4/nodes\n+curl -X POST -H \"Content-Type: application/json\" --data @json/sg.json http://localhost:9008/v4/3dda2801-d675-4688-a63f-dcda8d327f50/security-groups", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyNTg0OA==", "bodyText": "For container deployment,\n\"local_ip\":\"127.0.0.1\"\n\"node_name\":\"local_node\"\n\"server_port\":50001\nI think ACA opens port 50001 for gRPC connection, right? Does DPM consume the port for now?", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r457725848", "createdAt": "2020-07-20T22:24:47Z", "author": {"login": "xieus"}, "path": "scripts/json/node.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.188\",\r\n+    \"mac_address\": \"90:17:ac:c1:34:64\",\r\n+    \"node_id\": \"9192a4d4-ffff-4ece-b3f0-8d36e3d85001\",\r\n+    \"node_name\": \"node2\",\r\n+    \"server_port\": 8080,\r\n+    \"veth\": \"eth0\"\r\n+  }\r\n+}\r\n+\r\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.166\",\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyNjEzNw==", "bodyText": "Indent here.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r457726137", "createdAt": "2020-07-20T22:25:26Z", "author": {"login": "xieus"}, "path": "scripts/json/cp1b.json", "diffHunk": "@@ -0,0 +1,63 @@\n+{\r\n+  \"port\": {\r\n+    \"admin_state_up\": true,\r\n+    \"allowed_address_pairs\": [\r\n+      {\r\n+        \"ip_address\": \"11.11.11.1\",\r\n+        \"mac_address\": \"00-AA-BB-15-EB-3F\"\r\n+      }\r\n+    ],\r\n+\"binding:host_id\": \"9192a4d4-ffff-4ece-b3f0-8d36e3d85001\",\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3a83477906d5ee8b831d7a7d987de82ca561d1f", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/e3a83477906d5ee8b831d7a7d987de82ca561d1f", "committedDate": "2020-07-22T03:01:50Z", "message": "Merge branch 'master' of github.com:futurewei-cloud/alcor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTc5OTk0", "url": "https://github.com/futurewei-cloud/alcor/pull/306#pullrequestreview-452979994", "createdAt": "2020-07-22T04:06:47Z", "commit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNDowNjo0N1rOG1R8cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNDowNjo0N1rOG1R8cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUyMTcxNQ==", "bodyText": "This is a change from other PR. It is not supposed to be here.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r458521715", "createdAt": "2020-07-22T04:06:47Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/port/PortEntity.java", "diffHunk": "@@ -108,6 +109,7 @@\n     @JsonProperty(\"revision_number\")\n     private int revisionNumber;\n \n+    @JsonIgnore", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNjc0OTYz", "url": "https://github.com/futurewei-cloud/alcor/pull/306#pullrequestreview-453674963", "createdAt": "2020-07-22T20:50:43Z", "commit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDo1MDo0NFrOG1zuWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDo1MDo0NFrOG1zuWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA3NTE2MA==", "bodyText": "@haboy52581 Xiaodong, I just tried to use this Dockerfile locally and found that it took me more than 30 minutes to complete it.\nWe might need to rely on this Dockerfile in our Onebox deployment, K8s deployment and daily CI workflow.\nPlease try a light-weighted option like CIRROS or others.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r459075160", "createdAt": "2020-07-22T20:50:44Z", "author": {"login": "xieus"}, "path": "scripts/Dockerfile", "diffHunk": "@@ -0,0 +1,19 @@\n+FROM ubuntu", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MzM3Mjg3", "url": "https://github.com/futurewei-cloud/alcor/pull/306#pullrequestreview-456337287", "createdAt": "2020-07-28T06:31:27Z", "commit": {"oid": "3e32e355ff4918beb00f7b3e953153ba341d2393"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e32e355ff4918beb00f7b3e953153ba341d2393", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/3e32e355ff4918beb00f7b3e953153ba341d2393", "committedDate": "2020-07-28T01:04:04Z", "message": "Merge branch 'master' of https://github.com/haboy52581/alcor"}, "afterCommit": {"oid": "841a344ecb10b613e807aa509c0765fd84be4722", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/841a344ecb10b613e807aa509c0765fd84be4722", "committedDate": "2020-07-24T23:57:35Z", "message": "address the points in pr#306"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "841a344ecb10b613e807aa509c0765fd84be4722", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/841a344ecb10b613e807aa509c0765fd84be4722", "committedDate": "2020-07-24T23:57:35Z", "message": "address the points in pr#306"}, "afterCommit": {"oid": "7ef7d695a5b947bc646e8d14ef547c6fc4ffaab2", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/7ef7d695a5b947bc646e8d14ef547c6fc4ffaab2", "committedDate": "2020-07-28T22:23:30Z", "message": "address the points in pr#306"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ef7d695a5b947bc646e8d14ef547c6fc4ffaab2", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/7ef7d695a5b947bc646e8d14ef547c6fc4ffaab2", "committedDate": "2020-07-28T22:23:30Z", "message": "address the points in pr#306"}, "afterCommit": {"oid": "e3a83477906d5ee8b831d7a7d987de82ca561d1f", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/e3a83477906d5ee8b831d7a7d987de82ca561d1f", "committedDate": "2020-07-22T03:01:50Z", "message": "Merge branch 'master' of github.com:futurewei-cloud/alcor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76b80d0ad2867fcf3bfdee152de57d928b8cac9e", "author": {"user": {"login": "haboy52581", "name": null}}, "url": "https://github.com/futurewei-cloud/alcor/commit/76b80d0ad2867fcf3bfdee152de57d928b8cac9e", "committedDate": "2020-07-28T22:30:46Z", "message": "add eim run"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3OTAzNTMy", "url": "https://github.com/futurewei-cloud/alcor/pull/306#pullrequestreview-457903532", "createdAt": "2020-07-29T21:15:29Z", "commit": {"oid": "76b80d0ad2867fcf3bfdee152de57d928b8cac9e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2228, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}