{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4ODUxMjI3", "number": 263, "title": "[Port Manager] Bug Fixes for Delete Ports, Duplicated Port-SG Binding", "bodyText": "This PR proposes fix to a few Port Manager bugs:\n\nDelete Port API doesn't correctly update neighborCache resulting in legacy ports in neighborCache. The root cause is that update NeighborCache doesn't use the correct key for query\nRemove duplicated binding between port and security groups for bulk creation\nRemove redundant neighbor_info for ports on the same host", "createdAt": "2020-06-23T22:12:27Z", "url": "https://github.com/futurewei-cloud/alcor/pull/263", "merged": true, "mergeCommit": {"oid": "26c50c586222e6916b0075ac987382b66c3ac995"}, "closed": true, "closedAt": "2020-06-26T06:28:00Z", "author": {"login": "xieus"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuM4RBgH2gAyNDM4ODUxMjI3OjViZTZlM2ZhMjJjYWM4Y2MyZGMxZTI0NDk2ZTI0NWUwYjUzZTA4OTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu9OrBAFqTQzODA0MjIyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5be6e3fa22cac8cc2dc1e24496e245e0b53e0899", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/5be6e3fa22cac8cc2dc1e24496e245e0b53e0899", "committedDate": "2020-06-23T22:06:55Z", "message": "Replace neighborCache key with vpc id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MjE2MjY1", "url": "https://github.com/futurewei-cloud/alcor/pull/263#pullrequestreview-436216265", "createdAt": "2020-06-23T22:59:46Z", "commit": {"oid": "5be6e3fa22cac8cc2dc1e24496e245e0b53e0899"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d89c3dcb790c4452568c57b772bf2dca203a3d7", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/7d89c3dcb790c4452568c57b772bf2dca203a3d7", "committedDate": "2020-06-24T00:05:54Z", "message": "Fix duplicated issue of port-SG binding"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5a6bc28776d5b9f418a5a451fddacf7830a57bd", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/c5a6bc28776d5b9f418a5a451fddacf7830a57bd", "committedDate": "2020-06-24T00:22:41Z", "message": "Refactor createPortAndNeighborBulk"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5dc729d8efcafb63fb58588900d67fe2d10e4c8", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/d5dc729d8efcafb63fb58588900d67fe2d10e4c8", "committedDate": "2020-06-24T03:39:30Z", "message": "Revert GET SGs as used to build NetwworkConfiguration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4d9d1b99c6e32d92be3c7892dd4d8e64faff386", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/d4d9d1b99c6e32d92be3c7892dd4d8e64faff386", "committedDate": "2020-06-24T04:47:09Z", "message": "Formating a few PM files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a996a22a37125ea846de4ba9fd9e69bd1316f20", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/9a996a22a37125ea846de4ba9fd9e69bd1316f20", "committedDate": "2020-06-24T05:41:10Z", "message": "Remove redundant neighbor_info for ports on the same host"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MzQ5MDIx", "url": "https://github.com/futurewei-cloud/alcor/pull/263#pullrequestreview-436349021", "createdAt": "2020-06-24T06:09:16Z", "commit": {"oid": "c5a6bc28776d5b9f418a5a451fddacf7830a57bd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNjowOToxNlrOGoEMEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNjowOToxNlrOGoEMEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDY2NDg0OQ==", "bodyText": "btw, Please add neighborCache= cacheFactory.getCache(PortNeighbors.class);  to the constructor, Thanks!", "url": "https://github.com/futurewei-cloud/alcor/pull/263#discussion_r444664849", "createdAt": "2020-06-24T06:09:16Z", "author": {"login": "chenpiaoping"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/repo/PortRepository.java", "diffHunk": "@@ -116,18 +116,19 @@ public void createPortAndNeighborBulk(List<PortEntity> portEntities, Map<String,\n             //Add neighborInfos to neighborCache\n             if (neighbors != null) {\n                 for (Map.Entry<String, List<NeighborInfo>> entry: neighbors.entrySet()) {\n-                    PortNeighbors portNeighbors = neighborCache.get(entry.getKey());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5a6bc28776d5b9f418a5a451fddacf7830a57bd"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a758e1848834c30726ea0c395dea2542c34dc66b", "author": {"user": {"login": "xieus", "name": "Liguang Xie"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/a758e1848834c30726ea0c395dea2542c34dc66b", "committedDate": "2020-06-24T06:47:46Z", "message": "Fix PortRepository constructor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MDQyMjI5", "url": "https://github.com/futurewei-cloud/alcor/pull/263#pullrequestreview-438042229", "createdAt": "2020-06-26T06:26:50Z", "commit": {"oid": "a758e1848834c30726ea0c395dea2542c34dc66b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2175, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}