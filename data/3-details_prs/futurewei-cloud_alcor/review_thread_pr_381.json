{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMTc1MTQw", "number": 381, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMTo1ODowNlrOEiToWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMTo1ODowNlrOEiToWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NDA4NjY0OnYy", "diffSide": "RIGHT", "path": "schema/proto3/router.proto", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQyMTo1ODowNlrOHQHKxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwMDo1ODoyM1rOHQKl1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1NjcwOQ==", "bodyText": "Do we expect this has to be IP, or could be others like a label?", "url": "https://github.com/futurewei-cloud/alcor/pull/381#discussion_r486656709", "createdAt": "2020-09-10T21:58:06Z", "author": {"login": "xieus"}, "path": "schema/proto3/router.proto", "diffHunk": "@@ -32,13 +37,19 @@ message RouterConfiguration {\n     MessageType message_type = 5; // DELTA (default) or FULL\n     string host_dvr_mac_address = 6;\n \n+    message RoutingRuleExtraInfo{\n+        DestinationType destination_type = 1;\n+        string next_hop_mac = 2;\n+        }\n+\n     message RoutingRule {\n         OperationType operation_type = 1;\n         string id = 2;\n         string name = 3;\n-        string destination = 4;\n-        string nextHop = 5;\n+        string destination = 4;  // destination IP, could be 154.12.42.24/32 (host address) or 0.0.0.0/0 (network address)\n+        string next_hop_ip = 5;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a64d8cf203c4cfe224a26696b5a6484f1e36b329"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1Nzg0MQ==", "bodyText": "this is expected to be IP only, confirmed with James this morning.", "url": "https://github.com/futurewei-cloud/alcor/pull/381#discussion_r486657841", "createdAt": "2020-09-10T22:01:00Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/router.proto", "diffHunk": "@@ -32,13 +37,19 @@ message RouterConfiguration {\n     MessageType message_type = 5; // DELTA (default) or FULL\n     string host_dvr_mac_address = 6;\n \n+    message RoutingRuleExtraInfo{\n+        DestinationType destination_type = 1;\n+        string next_hop_mac = 2;\n+        }\n+\n     message RoutingRule {\n         OperationType operation_type = 1;\n         string id = 2;\n         string name = 3;\n-        string destination = 4;\n-        string nextHop = 5;\n+        string destination = 4;  // destination IP, could be 154.12.42.24/32 (host address) or 0.0.0.0/0 (network address)\n+        string next_hop_ip = 5;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1NjcwOQ=="}, "originalCommit": {"oid": "a64d8cf203c4cfe224a26696b5a6484f1e36b329"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY2Mzc4Nw==", "bodyText": "Yes. \"nexthop\" should be an IP address of a gateway, but we can use \"nexthop_type\" to indicate what type of the nexthop or gateway, such as \"local\", \"vpc\", \"internet\", \"ngw\", etc...", "url": "https://github.com/futurewei-cloud/alcor/pull/381#discussion_r486663787", "createdAt": "2020-09-10T22:16:36Z", "author": {"login": "cj-chung"}, "path": "schema/proto3/router.proto", "diffHunk": "@@ -32,13 +37,19 @@ message RouterConfiguration {\n     MessageType message_type = 5; // DELTA (default) or FULL\n     string host_dvr_mac_address = 6;\n \n+    message RoutingRuleExtraInfo{\n+        DestinationType destination_type = 1;\n+        string next_hop_mac = 2;\n+        }\n+\n     message RoutingRule {\n         OperationType operation_type = 1;\n         string id = 2;\n         string name = 3;\n-        string destination = 4;\n-        string nextHop = 5;\n+        string destination = 4;  // destination IP, could be 154.12.42.24/32 (host address) or 0.0.0.0/0 (network address)\n+        string next_hop_ip = 5;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1NjcwOQ=="}, "originalCommit": {"oid": "a64d8cf203c4cfe224a26696b5a6484f1e36b329"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY3MTI2NA==", "bodyText": "should it be nexthop_type or destination_type existed in RoutingRuleExtraInfo?\nI think destination_type is more appropriate since it is more important about the destination.", "url": "https://github.com/futurewei-cloud/alcor/pull/381#discussion_r486671264", "createdAt": "2020-09-10T22:36:04Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/router.proto", "diffHunk": "@@ -32,13 +37,19 @@ message RouterConfiguration {\n     MessageType message_type = 5; // DELTA (default) or FULL\n     string host_dvr_mac_address = 6;\n \n+    message RoutingRuleExtraInfo{\n+        DestinationType destination_type = 1;\n+        string next_hop_mac = 2;\n+        }\n+\n     message RoutingRule {\n         OperationType operation_type = 1;\n         string id = 2;\n         string name = 3;\n-        string destination = 4;\n-        string nextHop = 5;\n+        string destination = 4;  // destination IP, could be 154.12.42.24/32 (host address) or 0.0.0.0/0 (network address)\n+        string next_hop_ip = 5;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1NjcwOQ=="}, "originalCommit": {"oid": "a64d8cf203c4cfe224a26696b5a6484f1e36b329"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjcxMjc4OA==", "bodyText": "Okay thanks for the confirmation.\nKeep in mind that this change will ask an upstream microservices (either RM or others) to read the user-input rules (which uses next_hop) and convert the customer object into an infra object (with next_hop_ip).", "url": "https://github.com/futurewei-cloud/alcor/pull/381#discussion_r486712788", "createdAt": "2020-09-11T00:58:23Z", "author": {"login": "xieus"}, "path": "schema/proto3/router.proto", "diffHunk": "@@ -32,13 +37,19 @@ message RouterConfiguration {\n     MessageType message_type = 5; // DELTA (default) or FULL\n     string host_dvr_mac_address = 6;\n \n+    message RoutingRuleExtraInfo{\n+        DestinationType destination_type = 1;\n+        string next_hop_mac = 2;\n+        }\n+\n     message RoutingRule {\n         OperationType operation_type = 1;\n         string id = 2;\n         string name = 3;\n-        string destination = 4;\n-        string nextHop = 5;\n+        string destination = 4;  // destination IP, could be 154.12.42.24/32 (host address) or 0.0.0.0/0 (network address)\n+        string next_hop_ip = 5;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1NjcwOQ=="}, "originalCommit": {"oid": "a64d8cf203c4cfe224a26696b5a6484f1e36b329"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4397, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}