{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NzcxMzU3", "number": 220, "title": "Rename Port/Route Web Classes, and Update Kubernetes yaml", "bodyText": "This PR proposes the following change:\n\nRename web classes of port and route to avoid duplicate with schema classes\nAdd new Kubernetes yaml files of node manager and port manager", "createdAt": "2020-05-28T22:34:29Z", "url": "https://github.com/futurewei-cloud/alcor/pull/220", "merged": true, "mergeCommit": {"oid": "26033d0c5aeacd9502e3b0c6bd8c518f8eb7da40"}, "closed": true, "closedAt": "2020-05-29T08:15:46Z", "author": {"login": "kevin-zhonghao"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcj6ExKAH2gAyNDI0NzcxMzU3OjQzYWYyMjI1NTFiMzhkYWNkZWU1MjIxMWE0YjkzMjJkOWMxZTkxYmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcl9_ReAFqTQyMDc0MzIxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "43af222551b38dacdee52211a4b9322d9c1e91be", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/43af222551b38dacdee52211a4b9322d9c1e91be", "committedDate": "2020-05-22T22:33:08Z", "message": "create branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bca3c9b8bccddb0f70f2a074c2b9610767b385d", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/7bca3c9b8bccddb0f70f2a074c2b9610767b385d", "committedDate": "2020-05-26T18:10:59Z", "message": "sync up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c736c16c0b298618d836ef7e9c99e064e116e74", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/9c736c16c0b298618d836ef7e9c99e064e116e74", "committedDate": "2020-05-26T18:16:38Z", "message": "Merge branch 'new_master' into feature/pending_items"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "505c496b93145d89365f31a4d7019226c8a614fa", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/505c496b93145d89365f31a4d7019226c8a614fa", "committedDate": "2020-05-28T22:31:10Z", "message": "Rename RouteEntity and PortEntity, update port manager and node manager yaml files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNTQ3NDAx", "url": "https://github.com/futurewei-cloud/alcor/pull/220#pullrequestreview-420547401", "createdAt": "2020-05-28T22:57:01Z", "commit": {"oid": "505c496b93145d89365f31a4d7019226c8a614fa"}, "state": "APPROVED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMjo1NzowMVrOGcJeTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMzozMDo0MFrOGcKHDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2ODUyNQ==", "bodyText": "Is it possible to use a local image link? if so, this could speed up the testing.", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432168525", "createdAt": "2020-05-28T22:57:01Z", "author": {"login": "xieus"}, "path": "kubernetes/services/mac_manager.yaml", "diffHunk": "@@ -38,7 +41,7 @@ spec:\n               - key: application.properties\n                 path: application.properties\n       containers:\n-        - image: zhonghaolyu/repo:macKube2\n+        - image: zhonghaolyu/repo:macKube1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "505c496b93145d89365f31a4d7019226c8a614fa"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTEzNw==", "bodyText": "is this a single-node cluster setup?", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432169137", "createdAt": "2020-05-28T22:58:54Z", "author": {"login": "xieus"}, "path": "kubernetes/services/subnet_manager.yaml", "diffHunk": "@@ -4,17 +4,17 @@ metadata:\n   name: subnet-configmap\n data:\n   application.properties: |\n-    spring.redis.host=10.109.3.172\n-    spring.redis.port=6382\n+    ignite.host=10.99.135.32\n+    ignite.port=10800\n     logging.level.root=info\n     logging.level.org.springframework.web=info\n     logging.file.path=.\n     logging.type=file\n     apache.kafka.address=172.17.0.1:9092\n-    microservices.vpc.service.url=http://192.168.1.25:30001/project/\n-    microservices.mac.service.url=http://192.168.1.25:30005/macs\n-    microservices.route.service.url=http://192.168.1.25:30003/\n-    microservices.ip.service.url=http://192.168.1.25:30007/ips/\n+    microservices.vpc.service.url=http://10.213.43.166:30001/project/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "505c496b93145d89365f31a4d7019226c8a614fa"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTY4OQ==", "bodyText": "Thanks for updating the comment as well \ud83d\udc4d", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432169689", "createdAt": "2020-05-28T23:00:21Z", "author": {"login": "xieus"}, "path": "services/port_manager/src/main/java/com/futurewei/alcor/portmanager/controller/PortController.java", "diffHunk": "@@ -36,16 +36,16 @@\n      * If any exception occurs in the added process, we need to roll back\n      * the resource allocated from each micro-service.\n      * @param projectId Project the port belongs to\n-     * @param portStateJson Port configuration\n+     * @param portWebJson Port configuration", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "505c496b93145d89365f31a4d7019226c8a614fa"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3ODM2NQ==", "bodyText": "rename the variable name to \"route\"", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432178365", "createdAt": "2020-05-28T23:28:42Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java", "diffHunk": "@@ -50,7 +50,7 @@\n             value = {\"/vpcs/{vpcId}/routes/{routeId}\"})\n     public RouteWebJson getRuleByVpcId(@PathVariable String vpcId, @PathVariable String routeId) throws Exception {\n \n-        RouteWebObject routeState = null;\n+        RouteEntity routeState = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "505c496b93145d89365f31a4d7019226c8a614fa"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3ODY3MQ==", "bodyText": "maybe rename the variable name to \"route\"", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432178671", "createdAt": "2020-05-28T23:29:45Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java", "diffHunk": "@@ -35,7 +35,7 @@ public Map getAllRoutes() throws CacheException {\n     }\n \n     @Override\n-    public void addRoute(RouteWebObject routeState) throws DatabasePersistenceException {\n+    public void addRoute(RouteEntity routeState) throws DatabasePersistenceException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "505c496b93145d89365f31a4d7019226c8a614fa"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3ODk1OQ==", "bodyText": "routeState => route", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432178959", "createdAt": "2020-05-28T23:30:40Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java", "diffHunk": "@@ -4,15 +4,15 @@\n import com.futurewei.alcor.common.exception.DatabasePersistenceException;\n import com.futurewei.alcor.common.exception.ResourceNotFoundException;\n import com.futurewei.alcor.common.exception.ResourcePersistenceException;\n-import com.futurewei.alcor.web.entity.route.RouteWebObject;\n+import com.futurewei.alcor.web.entity.route.RouteEntity;\n \n import java.util.Map;\n \n public interface RouteDatabaseService {\n \n-    public RouteWebObject getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n+    public RouteEntity getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n     public Map getAllRoutes () throws CacheException;\n-    public void addRoute (RouteWebObject routeState) throws DatabasePersistenceException;\n+    public void addRoute (RouteEntity routeState) throws DatabasePersistenceException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "505c496b93145d89365f31a4d7019226c8a614fa"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNTYyODgz", "url": "https://github.com/futurewei-cloud/alcor/pull/220#pullrequestreview-420562883", "createdAt": "2020-05-28T23:39:32Z", "commit": {"oid": "505c496b93145d89365f31a4d7019226c8a614fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMzozOTozMlrOGcKQsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMzozOTozMlrOGcKQsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4MTQyNA==", "bodyText": "I think this change caused UT failure.", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432181424", "createdAt": "2020-05-28T23:39:32Z", "author": {"login": "xieus"}, "path": "services/private_ip_manager/src/main/resources/application.properties", "diffHunk": "@@ -1,13 +1,13 @@\n-server.port=9004\n+#server.port=9004\n #Redis configuration\n #spring.redis.host=localhost\n #spring.redis.port=6380\n #apache.kafka.address=172.17.0.1:9092\n #server.port=9000\n #Ignite configuration\n #ignite.host=192.168.137.1\n-ignite.host=localhost\n-ignite.port=10801\n+ignite.host=192.168.137.1\n+ignite.port=10800", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "505c496b93145d89365f31a4d7019226c8a614fa"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f121481b5cac3a1d7411cd838f63b0a7581805ad", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/f121481b5cac3a1d7411cd838f63b0a7581805ad", "committedDate": "2020-05-29T00:45:26Z", "message": "Fix UTs issues, rename route"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNjI0MTUy", "url": "https://github.com/futurewei-cloud/alcor/pull/220#pullrequestreview-420624152", "createdAt": "2020-05-29T03:08:29Z", "commit": {"oid": "f121481b5cac3a1d7411cd838f63b0a7581805ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMzowODoyOVrOGcNW7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMzowODoyOVrOGcNW7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIzMjE3NA==", "bodyText": "@kevin-zhonghao The change I was referring to was \"RouteEntity route = null\" :-)", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432232174", "createdAt": "2020-05-29T03:08:29Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java", "diffHunk": "@@ -50,7 +50,7 @@\n             value = {\"/vpcs/{vpcId}/routes/{routeId}\"})\n     public RouteWebJson getRuleByVpcId(@PathVariable String vpcId, @PathVariable String routeId) throws Exception {\n \n-        RouteWebObject routeState = null;\n+        Route routeState = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f121481b5cac3a1d7411cd838f63b0a7581805ad"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "141655217ae5c3a6065c08fbecd470f68540b7f4", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/141655217ae5c3a6065c08fbecd470f68540b7f4", "committedDate": "2020-05-29T04:45:39Z", "message": "update route"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNjUxMTk4", "url": "https://github.com/futurewei-cloud/alcor/pull/220#pullrequestreview-420651198", "createdAt": "2020-05-29T04:53:42Z", "commit": {"oid": "141655217ae5c3a6065c08fbecd470f68540b7f4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwNDo1Mzo0M1rOGcOvJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwNDo1Nzo0M1rOGcOymw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1NDc1Ng==", "bodyText": "This is good.", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432254756", "createdAt": "2020-05-29T04:53:43Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java", "diffHunk": "@@ -50,49 +50,49 @@\n             value = {\"/vpcs/{vpcId}/routes/{routeId}\"})\n     public RouteWebJson getRuleByVpcId(@PathVariable String vpcId, @PathVariable String routeId) throws Exception {\n \n-        Route routeState = null;\n+        RouteEntity routeEntity = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "141655217ae5c3a6065c08fbecd470f68540b7f4"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1NDg4OA==", "bodyText": "=> \"RouteEntity routeEntity\"", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432254888", "createdAt": "2020-05-29T04:54:27Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteDatabaseServiceImpl.java", "diffHunk": "@@ -35,9 +35,9 @@ public Map getAllRoutes() throws CacheException {\n     }\n \n     @Override\n-    public void addRoute(Route routeState) throws DatabasePersistenceException {\n+    public void addRoute(RouteEntity routeEntityState) throws DatabasePersistenceException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "141655217ae5c3a6065c08fbecd470f68540b7f4"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1NDk5OQ==", "bodyText": "=> \"RouteEntity routeEntity\"", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432254999", "createdAt": "2020-05-29T04:54:57Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/RouteDatabaseService.java", "diffHunk": "@@ -4,15 +4,15 @@\n import com.futurewei.alcor.common.exception.DatabasePersistenceException;\n import com.futurewei.alcor.common.exception.ResourceNotFoundException;\n import com.futurewei.alcor.common.exception.ResourcePersistenceException;\n-import com.futurewei.alcor.web.entity.route.Route;\n+import com.futurewei.alcor.web.entity.route.RouteEntity;\n \n import java.util.Map;\n \n public interface RouteDatabaseService {\n \n-    public Route getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n+    public RouteEntity getByRouteId (String routeId) throws ResourceNotFoundException, ResourcePersistenceException;\n     public Map getAllRoutes () throws CacheException;\n-    public void addRoute (Route routeState) throws DatabasePersistenceException;\n+    public void addRoute (RouteEntity routeEntityState) throws DatabasePersistenceException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "141655217ae5c3a6065c08fbecd470f68540b7f4"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1NTA3NA==", "bodyText": "Revert back to \"RouteControllerTests\"", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432255074", "createdAt": "2020-05-29T04:55:19Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/test/java/com/futurewei/alcor/route/RouteEntityControllerTests.java", "diffHunk": "@@ -29,7 +29,7 @@\n @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,\n         properties = {\"httpbin=http://localhost:${wiremock.server.port}\"})\n @AutoConfigureMockMvc\n-public class RouteControllerTests {\n+public class RouteEntityControllerTests {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "141655217ae5c3a6065c08fbecd470f68540b7f4"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI1NTY0Mw==", "bodyText": "I think we need to revert the changes in *.adoc, *.puml, *.proto and application.properties.\nGlobal replacement is dangerous :-)", "url": "https://github.com/futurewei-cloud/alcor/pull/220#discussion_r432255643", "createdAt": "2020-05-29T04:57:43Z", "author": {"login": "xieus"}, "path": "docs/modules/ROOT/pages/db_services/data_store.adoc", "diffHunk": "@@ -53,14 +53,14 @@ Similar analysis could be done for other controllers.\n ** The target is 1 million read/write operations per second.\n ** Estimated size of a middle-sized region is 500,000 node with 100 ports per node with consideration of multi-port container and VMs.\n Thus, the estimated total number of ports is ~50 millions.\n-** The estimated number of port-related resources (e.g. security groups, ACL, routes, DNS records and subnets) is of the same magnitude.\n+** The estimated number of port-related resources (e.g. security groups, ACL, routeEntities, DNS records and subnets) is of the same magnitude.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "141655217ae5c3a6065c08fbecd470f68540b7f4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0597a70567298785a9efc1737dcc645c97d39755", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/0597a70567298785a9efc1737dcc645c97d39755", "committedDate": "2020-05-29T06:23:56Z", "message": "Fix issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7052f361447c39a085c98cd20f408cd9bf5177d6", "author": {"user": {"login": "kevin-zhonghao", "name": "Zhonghao(Kevin) Lyu"}}, "url": "https://github.com/futurewei-cloud/alcor/commit/7052f361447c39a085c98cd20f408cd9bf5177d6", "committedDate": "2020-05-29T06:47:30Z", "message": "Fix issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNzQzMjEy", "url": "https://github.com/futurewei-cloud/alcor/pull/220#pullrequestreview-420743212", "createdAt": "2020-05-29T08:14:36Z", "commit": {"oid": "7052f361447c39a085c98cd20f408cd9bf5177d6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2110, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}