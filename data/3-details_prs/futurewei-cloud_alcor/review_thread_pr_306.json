{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzODgwODgy", "number": 306, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMjoxNzozN1rOEQZBUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDo1MDo0NFrOERNsvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjIyNjEwOnYy", "diffSide": "RIGHT", "path": "scripts/startall.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMjoxNzozN1rOG0hM_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMjoxNzozN1rOG0hM_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyMzEzMg==", "bodyText": "../Dockerfile point to <alcor_root>. Do we refer to <alcor_root>/scripts/Dockerfile? In that case, we will need change the relative path here.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r457723132", "createdAt": "2020-07-20T22:17:37Z", "author": {"login": "xieus"}, "path": "scripts/startall.sh", "diffHunk": "@@ -0,0 +1,24 @@\n+#prepare build\n+apt install openjdk-11-jdk telnet bridge-utils maven -y\n+git clone https://github.com/futurewei-cloud/alcor.git\n+cd alcor\n+cp ../Dockerfile scripts/ignite.Dockerfile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjIzMDcwOnYy", "diffSide": "RIGHT", "path": "scripts/test1.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMjoxOToyM1rOG0hPyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwMDowMzoxMlrOG3ApmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyMzg1MQ==", "bodyText": "What is the expected result from current sg implementation?", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r457723851", "createdAt": "2020-07-20T22:19:23Z", "author": {"login": "xieus"}, "path": "scripts/test1.sh", "diffHunk": "@@ -0,0 +1,5 @@\n+curl -X POST -H \"Content-Type: application/json\" --data @json/cvpc.json http://localhost:9009/project/3dda2801-d675-4688-a63f-dcda8d327f50/vpcs\n+curl -X POST -H \"Content-Type: application/json\" --data @json/csn.json http://localhost:9009/project/3dda2801-d675-4688-a63f-dcda8d327f50/subnets\n+curl -X POST -H \"Content-Type: application/json\" --data @json/node.json http://localhost:9007/v4/nodes\n+curl -X POST -H \"Content-Type: application/json\" --data @json/sg.json http://localhost:9008/v4/3dda2801-d675-4688-a63f-dcda8d327f50/security-groups", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDMzNTUxMw==", "bodyText": "The expected result should be this:\n{\n\"security_group\":{\n\"id\":\"3dda2801-d675-4688-a63f-dcda8d111111\",\n\"project_id\":\"3dda2801-d675-4688-a63f-dcda8d327f50\",\n\"tenant_id\":\"3dda2801-d675-4688-a63f-dcda8d327f50\",\n\"name\":\"sg1\",\n\"description\":\"string\",\n\"security_group_rules\":[\n{\n\"id\":\"6cccca44-eac5-4b1f-9bbe-02157708916a\",\n\"project_id\":null,\n\"tenant_id\":\"3dda2801-d675-4688-a63f-dcda8d327f50\",\n\"name\":null,\n\"description\":null,\n\"security_group_id\":\"3dda2801-d675-4688-a63f-dcda8d111111\",\n\"remote_group_id\":null,\n\"direction\":\"egress\",\n\"remote_ip_prefix\":null,\n\"protocol\":null,\n\"port_range_max\":null,\n\"port_range_min\":null,\n\"ether_type\":\"IPv4\"\n},\n{\n\"id\":\"0ee2b64e-1405-4964-bd23-e48b50958126\",\n\"project_id\":null,\n\"tenant_id\":\"3dda2801-d675-4688-a63f-dcda8d327f50\",\n\"name\":null,\n\"description\":null,\n\"security_group_id\":\"3dda2801-d675-4688-a63f-dcda8d111111\",\n\"remote_group_id\":null,\n\"direction\":\"egress\",\n\"remote_ip_prefix\":null,\n\"protocol\":null,\n\"port_range_max\":null,\n\"port_range_min\":null,\n\"ether_type\":\"IPv6\"\n}\n],\n\"create_at\":\"2020-07-25 00:06:28\",\n\"update_at\":\"2020-07-25 00:06:28\"\n}\n}", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r460335513", "createdAt": "2020-07-25T00:03:12Z", "author": {"login": "haboy52581"}, "path": "scripts/test1.sh", "diffHunk": "@@ -0,0 +1,5 @@\n+curl -X POST -H \"Content-Type: application/json\" --data @json/cvpc.json http://localhost:9009/project/3dda2801-d675-4688-a63f-dcda8d327f50/vpcs\n+curl -X POST -H \"Content-Type: application/json\" --data @json/csn.json http://localhost:9009/project/3dda2801-d675-4688-a63f-dcda8d327f50/subnets\n+curl -X POST -H \"Content-Type: application/json\" --data @json/node.json http://localhost:9007/v4/nodes\n+curl -X POST -H \"Content-Type: application/json\" --data @json/sg.json http://localhost:9008/v4/3dda2801-d675-4688-a63f-dcda8d327f50/security-groups", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyMzg1MQ=="}, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjI0Mzg1OnYy", "diffSide": "RIGHT", "path": "scripts/json/node.json", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMjoyNDo0N1rOG0hXmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwMDozMjoyMlrOG3A8Bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyNTg0OA==", "bodyText": "For container deployment,\n\"local_ip\":\"127.0.0.1\"\n\"node_name\":\"local_node\"\n\"server_port\":50001\nI think ACA opens port 50001 for gRPC connection, right? Does DPM consume the port for now?", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r457725848", "createdAt": "2020-07-20T22:24:47Z", "author": {"login": "xieus"}, "path": "scripts/json/node.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.188\",\r\n+    \"mac_address\": \"90:17:ac:c1:34:64\",\r\n+    \"node_id\": \"9192a4d4-ffff-4ece-b3f0-8d36e3d85001\",\r\n+    \"node_name\": \"node2\",\r\n+    \"server_port\": 8080,\r\n+    \"veth\": \"eth0\"\r\n+  }\r\n+}\r\n+\r\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.166\",\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk0NDUwOA==", "bodyText": "yes, dpm consume the port", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r458944508", "createdAt": "2020-07-22T17:00:03Z", "author": {"login": "haboy52581"}, "path": "scripts/json/node.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.188\",\r\n+    \"mac_address\": \"90:17:ac:c1:34:64\",\r\n+    \"node_id\": \"9192a4d4-ffff-4ece-b3f0-8d36e3d85001\",\r\n+    \"node_name\": \"node2\",\r\n+    \"server_port\": 8080,\r\n+    \"veth\": \"eth0\"\r\n+  }\r\n+}\r\n+\r\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.166\",\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyNTg0OA=="}, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg1NjEwMA==", "bodyText": "Based on today's discussion, DPM doesn't consume this port for now and the next step for us is (1) update DPM contract to include this field (2) DPM implementation and test update. @haboy52581", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r459856100", "createdAt": "2020-07-24T05:18:58Z", "author": {"login": "xieus"}, "path": "scripts/json/node.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.188\",\r\n+    \"mac_address\": \"90:17:ac:c1:34:64\",\r\n+    \"node_id\": \"9192a4d4-ffff-4ece-b3f0-8d36e3d85001\",\r\n+    \"node_name\": \"node2\",\r\n+    \"server_port\": 8080,\r\n+    \"veth\": \"eth0\"\r\n+  }\r\n+}\r\n+\r\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.166\",\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyNTg0OA=="}, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDMzNDc0MQ==", "bodyText": "so do you mean we have to change the contract now or after the release", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r460334741", "createdAt": "2020-07-24T23:58:43Z", "author": {"login": "haboy52581"}, "path": "scripts/json/node.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.188\",\r\n+    \"mac_address\": \"90:17:ac:c1:34:64\",\r\n+    \"node_id\": \"9192a4d4-ffff-4ece-b3f0-8d36e3d85001\",\r\n+    \"node_name\": \"node2\",\r\n+    \"server_port\": 8080,\r\n+    \"veth\": \"eth0\"\r\n+  }\r\n+}\r\n+\r\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.166\",\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyNTg0OA=="}, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM0MDIzMQ==", "bodyText": "You can create a tracking issue and address the issue in a follow-up PR.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r460340231", "createdAt": "2020-07-25T00:32:22Z", "author": {"login": "xieus"}, "path": "scripts/json/node.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.188\",\r\n+    \"mac_address\": \"90:17:ac:c1:34:64\",\r\n+    \"node_id\": \"9192a4d4-ffff-4ece-b3f0-8d36e3d85001\",\r\n+    \"node_name\": \"node2\",\r\n+    \"server_port\": 8080,\r\n+    \"veth\": \"eth0\"\r\n+  }\r\n+}\r\n+\r\n+{\r\n+  \"host_info\": {\r\n+    \"local_ip\": \"10.213.43.166\",\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyNTg0OA=="}, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NjI0NTkyOnYy", "diffSide": "RIGHT", "path": "scripts/json/cp1b.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMjoyNToyNlrOG0hYuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMjoyNToyNlrOG0hYuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcyNjEzNw==", "bodyText": "Indent here.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r457726137", "createdAt": "2020-07-20T22:25:26Z", "author": {"login": "xieus"}, "path": "scripts/json/cp1b.json", "diffHunk": "@@ -0,0 +1,63 @@\n+{\r\n+  \"port\": {\r\n+    \"admin_state_up\": true,\r\n+    \"allowed_address_pairs\": [\r\n+      {\r\n+        \"ip_address\": \"11.11.11.1\",\r\n+        \"mac_address\": \"00-AA-BB-15-EB-3F\"\r\n+      }\r\n+    ],\r\n+\"binding:host_id\": \"9192a4d4-ffff-4ece-b3f0-8d36e3d85001\",\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "410435514cc9da4826fead98dd1fa76b8fd838b5"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MTM2NTAwOnYy", "diffSide": "RIGHT", "path": "web/src/main/java/com/futurewei/alcor/web/entity/port/PortEntity.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNDowNjo0N1rOG1R8cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQyMzo1Nzo1OVrOG3AmHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUyMTcxNQ==", "bodyText": "This is a change from other PR. It is not supposed to be here.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r458521715", "createdAt": "2020-07-22T04:06:47Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/port/PortEntity.java", "diffHunk": "@@ -108,6 +109,7 @@\n     @JsonProperty(\"revision_number\")\n     private int revisionNumber;\n \n+    @JsonIgnore", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE0MjQwMQ==", "bodyText": "fixed in  #310", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r459142401", "createdAt": "2020-07-22T23:36:52Z", "author": {"login": "haboy52581"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/port/PortEntity.java", "diffHunk": "@@ -108,6 +109,7 @@\n     @JsonProperty(\"revision_number\")\n     private int revisionNumber;\n \n+    @JsonIgnore", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUyMTcxNQ=="}, "originalCommit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg1NjY0MA==", "bodyText": "Correct. As this file has been merged to master, it should be removed from this PR.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r459856640", "createdAt": "2020-07-24T05:21:26Z", "author": {"login": "xieus"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/port/PortEntity.java", "diffHunk": "@@ -108,6 +109,7 @@\n     @JsonProperty(\"revision_number\")\n     private int revisionNumber;\n \n+    @JsonIgnore", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUyMTcxNQ=="}, "originalCommit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDMzNDYyMg==", "bodyText": "fixed in 841a344", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r460334622", "createdAt": "2020-07-24T23:57:59Z", "author": {"login": "haboy52581"}, "path": "web/src/main/java/com/futurewei/alcor/web/entity/port/PortEntity.java", "diffHunk": "@@ -108,6 +109,7 @@\n     @JsonProperty(\"revision_number\")\n     private int revisionNumber;\n \n+    @JsonIgnore", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUyMTcxNQ=="}, "originalCommit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDg1NjkyOnYy", "diffSide": "RIGHT", "path": "scripts/Dockerfile", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDo1MDo0NFrOG1zuWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwNToxOTo1NVrOG2jZ4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA3NTE2MA==", "bodyText": "@haboy52581 Xiaodong, I just tried to use this Dockerfile locally and found that it took me more than 30 minutes to complete it.\nWe might need to rely on this Dockerfile in our Onebox deployment, K8s deployment and daily CI workflow.\nPlease try a light-weighted option like CIRROS or others.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r459075160", "createdAt": "2020-07-22T20:50:44Z", "author": {"login": "xieus"}, "path": "scripts/Dockerfile", "diffHunk": "@@ -0,0 +1,19 @@\n+FROM ubuntu", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE0MjE4MQ==", "bodyText": "I think it really depends on the scenario you want to use, if this file is used for internally then please let me know why the repo you want to use; if this is for outside world, then this is very fast if you are running on the normal box since that's for dockerhub connection", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r459142181", "createdAt": "2020-07-22T23:36:16Z", "author": {"login": "haboy52581"}, "path": "scripts/Dockerfile", "diffHunk": "@@ -0,0 +1,19 @@\n+FROM ubuntu", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA3NTE2MA=="}, "originalCommit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg1NjM1NQ==", "bodyText": "Okay let us discuss various options.", "url": "https://github.com/futurewei-cloud/alcor/pull/306#discussion_r459856355", "createdAt": "2020-07-24T05:19:55Z", "author": {"login": "xieus"}, "path": "scripts/Dockerfile", "diffHunk": "@@ -0,0 +1,19 @@\n+FROM ubuntu", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA3NTE2MA=="}, "originalCommit": {"oid": "8e453a8d97c22f1d78b29b45eabdb7025e2926f0"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4603, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}