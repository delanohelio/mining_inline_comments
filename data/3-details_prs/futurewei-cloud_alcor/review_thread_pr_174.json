{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4MzEzNDk4", "number": 174, "reviewThreads": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNDozMDo0OFrOD1lbfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwNDo0MzoxNlrOD3A8XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NTE0MzY0OnYy", "diffSide": "RIGHT", "path": "services/private_ip_manager/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNDozMDo0OFrOGLF56Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNDozMDo0OFrOGLF56Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI4NDI2NQ==", "bodyText": "Let us try not to check in local-specific settings.", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r414284265", "createdAt": "2020-04-24T04:30:48Z", "author": {"login": "xieus"}, "path": "services/private_ip_manager/src/main/resources/application.properties", "diffHunk": "@@ -4,7 +4,7 @@\n #apache.kafka.address=172.17.0.1:9092\n server.port=9000\n #Ignite configuration\n-ignite.host=localhost\n+ignite.host=http://192.168.137.1/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b39917536031f6bbb212d07aeb14473295b34841"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3OTkwNDY2OnYy", "diffSide": "RIGHT", "path": "services/private_ip_manager/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoxODowNFrOGLv_tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoxODowNFrOGLv_tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk3Mzg3Nw==", "bodyText": "Should we keep 9000 given that Ignite may take 8080", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r414973877", "createdAt": "2020-04-25T04:18:04Z", "author": {"login": "xieus"}, "path": "services/private_ip_manager/src/main/resources/application.properties", "diffHunk": "@@ -2,9 +2,9 @@\n #spring.redis.host=localhost\n #spring.redis.port=6379\n #apache.kafka.address=172.17.0.1:9092\n-server.port=9000\n+server.port=8080", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c01a2d8e68c105cf25bdbb50be7829ba55e47f6"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3OTkwNTEzOnYy", "diffSide": "LEFT", "path": "services/route_manager/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoxODoxOVrOGLv_5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoxODoxOVrOGLv_5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk3MzkyNg==", "bodyText": "Like it!", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r414973926", "createdAt": "2020-04-25T04:18:19Z", "author": {"login": "xieus"}, "path": "services/route_manager/pom.xml", "diffHunk": "@@ -31,74 +31,30 @@\n             <groupId>org.springframework.boot</groupId>\n             <artifactId>spring-boot-starter-data-redis</artifactId>\n         </dependency>\n-        <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c01a2d8e68c105cf25bdbb50be7829ba55e47f6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3OTkwNTkxOnYy", "diffSide": "RIGHT", "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoxODo0OFrOGLwAOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoxODo0OFrOGLwAOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk3NDAxMQ==", "bodyText": "Like it!", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r414974011", "createdAt": "2020-04-25T04:18:48Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/controller/RouteController.java", "diffHunk": "@@ -39,7 +40,7 @@\n     private Logger logger = LoggerFactory.getLogger(this.getClass());\n \n     @Autowired\n-    private RouteRepository routeRepository;\n+    private RouteDatabaseService routeDatabaseService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c01a2d8e68c105cf25bdbb50be7829ba55e47f6"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3OTkwNjY5OnYy", "diffSide": "RIGHT", "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteServiceImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoxOToyMFrOGLwAjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMjoxNTo0OVrOGM6BiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk3NDA5Mg==", "bodyText": "empty implementation?", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r414974092", "createdAt": "2020-04-25T04:19:20Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteServiceImpl.java", "diffHunk": "@@ -0,0 +1,8 @@\n+package com.futurewei.alcor.route.service.Impl;\n+\n+import com.futurewei.alcor.route.service.RouteService;\n+import org.springframework.stereotype.Service;\n+\n+@Service\n+public class RouteServiceImpl implements RouteService {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c01a2d8e68c105cf25bdbb50be7829ba55e47f6"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE4Njc2MQ==", "bodyText": "Yes, because we haven't any route logic service yet", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416186761", "createdAt": "2020-04-27T22:15:49Z", "author": {"login": "kevin-zhonghao"}, "path": "services/route_manager/src/main/java/com/futurewei/alcor/route/service/Impl/RouteServiceImpl.java", "diffHunk": "@@ -0,0 +1,8 @@\n+package com.futurewei.alcor.route.service.Impl;\n+\n+import com.futurewei.alcor.route.service.RouteService;\n+import org.springframework.stereotype.Service;\n+\n+@Service\n+public class RouteServiceImpl implements RouteService {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk3NDA5Mg=="}, "originalCommit": {"oid": "2c01a2d8e68c105cf25bdbb50be7829ba55e47f6"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3OTkwNzc2OnYy", "diffSide": "RIGHT", "path": "services/route_manager/src/test/java/com/futurewei/alcor/route/RouteControllerTests.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoyMDoxN1rOGLwBAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoyMDoxN1rOGLwBAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk3NDIxMQ==", "bodyText": "Like it!", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r414974211", "createdAt": "2020-04-25T04:20:17Z", "author": {"login": "xieus"}, "path": "services/route_manager/src/test/java/com/futurewei/alcor/route/RouteControllerTests.java", "diffHunk": "@@ -0,0 +1,140 @@\n+package com.futurewei.alcor.route;\n+\n+import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\n+import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;\n+import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n+import static org.junit.Assert.*;\n+\n+import com.futurewei.alcor.route.config.UnitTestConfig;\n+import com.futurewei.alcor.route.entity.RouteState;\n+import com.futurewei.alcor.route.service.RouteDatabaseService;\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mockito;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.boot.test.mock.mockito.MockBean;\n+import org.springframework.http.MediaType;\n+import org.springframework.test.context.junit4.SpringRunner;\n+import org.springframework.test.web.servlet.MockMvc;\n+import org.springframework.test.web.servlet.result.MockMvcResultMatchers;\n+\n+import java.io.IOException;\n+\n+\n+@RunWith(SpringRunner.class)\n+@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,\n+        properties = {\"httpbin=http://localhost:${wiremock.server.port}\"})\n+@AutoConfigureMockMvc\n+public class RouteControllerTests {\n+\n+    @Autowired\n+    private MockMvc mockMvc;\n+\n+    @MockBean\n+    private RouteDatabaseService routeDatabaseService;\n+\n+    private String getByIdUri = \"/vpcs/\" + UnitTestConfig.vpcId + \"/routes/\" + UnitTestConfig.routeId;\n+    private String createSubnetUri = \"/subnets/\" + UnitTestConfig.subnetId + \"/routes\";\n+    private String createVpcUri = \"/vpcs/\" + UnitTestConfig.vpcId + \"/routes\";\n+    private String deleteUri = \"/vpcs/\" + UnitTestConfig.vpcId + \"/routes/\" + UnitTestConfig.routeId;\n+\n+    @Test\n+    public void routeGetById_canFindRoute_pass () throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c01a2d8e68c105cf25bdbb50be7829ba55e47f6"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3OTkwODQ1OnYy", "diffSide": "LEFT", "path": "services/vpc_manager/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoyMDozN1rOGLwBSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQwNDoyMDozN1rOGLwBSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk3NDI4Mg==", "bodyText": "Like it!", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r414974282", "createdAt": "2020-04-25T04:20:37Z", "author": {"login": "xieus"}, "path": "services/vpc_manager/pom.xml", "diffHunk": "@@ -33,74 +33,30 @@\n             <groupId>org.springframework.boot</groupId>\n             <artifactId>spring-boot-starter-data-redis</artifactId>\n         </dependency>\n-        <dependency>\n-            <groupId>org.springframework.boot</groupId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c01a2d8e68c105cf25bdbb50be7829ba55e47f6"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM2ODgzOnYy", "diffSide": "RIGHT", "path": "kubernetes/services/mac_manager.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyMzo1NFrOGM7zyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzozMToyMFrOGM7_8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNjAwOQ==", "bodyText": "Remove local changes unless necessary.", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416216009", "createdAt": "2020-04-27T23:23:54Z", "author": {"login": "xieus"}, "path": "kubernetes/services/mac_manager.yaml", "diffHunk": "@@ -4,7 +4,7 @@ metadata:\n   name: mac-configmap\n data:\n   application.properties: |\n-    spring.redis.host=10.111.70.101\n+    spring.redis.host=10.109.217.22", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxOTEyMQ==", "bodyText": "okay ~", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416219121", "createdAt": "2020-04-27T23:31:20Z", "author": {"login": "kevin-zhonghao"}, "path": "kubernetes/services/mac_manager.yaml", "diffHunk": "@@ -4,7 +4,7 @@ metadata:\n   name: mac-configmap\n data:\n   application.properties: |\n-    spring.redis.host=10.111.70.101\n+    spring.redis.host=10.109.217.22", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNjAwOQ=="}, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM2OTUzOnYy", "diffSide": "RIGHT", "path": "kubernetes/services/route_manager.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDowNVrOGM70Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDowNVrOGM70Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNjA5OQ==", "bodyText": "Local change.", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416216099", "createdAt": "2020-04-27T23:24:05Z", "author": {"login": "xieus"}, "path": "kubernetes/services/route_manager.yaml", "diffHunk": "@@ -4,7 +4,7 @@ metadata:\n   name: route-configmap\n data:\n   application.properties: |\n-    spring.redis.host=10.107.65.124\n+    spring.redis.host=10.104.15.13", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM2OTgyOnYy", "diffSide": "RIGHT", "path": "kubernetes/services/subnet_manager.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDoxMVrOGM70Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDoxMVrOGM70Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNjE0Ng==", "bodyText": "Local change.", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416216146", "createdAt": "2020-04-27T23:24:11Z", "author": {"login": "xieus"}, "path": "kubernetes/services/subnet_manager.yaml", "diffHunk": "@@ -4,17 +4,17 @@ metadata:\n   name: subnet-configmap\n data:\n   application.properties: |\n-    spring.redis.host=10.109.3.172\n+    spring.redis.host=10.96.83.248", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM3MDIyOnYy", "diffSide": "RIGHT", "path": "kubernetes/services/subnet_manager.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDoyMFrOGM70jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDoyMFrOGM70jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNjIwNw==", "bodyText": "Local change.", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416216207", "createdAt": "2020-04-27T23:24:20Z", "author": {"login": "xieus"}, "path": "kubernetes/services/subnet_manager.yaml", "diffHunk": "@@ -4,17 +4,17 @@ metadata:\n   name: subnet-configmap\n data:\n   application.properties: |\n-    spring.redis.host=10.109.3.172\n+    spring.redis.host=10.96.83.248\n     spring.redis.port=6382\n     logging.level.root=info\n     logging.level.org.springframework.web=info\n     logging.file.path=.\n     logging.type=file\n     apache.kafka.address=172.17.0.1:9092\n-    microservices.vpc.service.url=http://192.168.1.17:30001/project/\n-    microservices.mac.service.url=http://192.168.1.17:30005/macs\n-    microservices.route.service.url=http://192.168.1.17:30003/\n-    microservices.ip.service.url=http://192.168.1.17:30007/ips/\n+    microservices.vpc.service.url=http://192.168.1.25:30001/project/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM3MDY4OnYy", "diffSide": "RIGHT", "path": "kubernetes/services/subnet_manager.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDoyN1rOGM70yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDoyN1rOGM70yA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNjI2NA==", "bodyText": "Local change.", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416216264", "createdAt": "2020-04-27T23:24:27Z", "author": {"login": "xieus"}, "path": "kubernetes/services/subnet_manager.yaml", "diffHunk": "@@ -41,7 +41,7 @@ spec:\n               - key: application.properties\n                 path: application.properties\n       containers:\n-        - image: zhonghaolyu/repo:subnetKube2\n+        - image: zhonghaolyu/repo:subnetKube4", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM3MDgzOnYy", "diffSide": "RIGHT", "path": "kubernetes/services/vpc_manager.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDozM1rOGM704A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDozM1rOGM704A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNjI4OA==", "bodyText": "Local change.", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416216288", "createdAt": "2020-04-27T23:24:33Z", "author": {"login": "xieus"}, "path": "kubernetes/services/vpc_manager.yaml", "diffHunk": "@@ -4,14 +4,14 @@ metadata:\n   name: vpc-configmap\n data:\n   application.properties: |\n-    spring.redis.host=10.107.92.164\n+    spring.redis.host=10.106.100.62", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM3MTAzOnYy", "diffSide": "RIGHT", "path": "kubernetes/services/vpc_manager.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDozN1rOGM71AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNDozN1rOGM71AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNjMyMQ==", "bodyText": "Local change.", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416216321", "createdAt": "2020-04-27T23:24:37Z", "author": {"login": "xieus"}, "path": "kubernetes/services/vpc_manager.yaml", "diffHunk": "@@ -4,14 +4,14 @@ metadata:\n   name: vpc-configmap\n data:\n   application.properties: |\n-    spring.redis.host=10.107.92.164\n+    spring.redis.host=10.106.100.62\n     spring.redis.port=6379\n     logging.level.root=info\n     logging.level.org.springframework.web=info\n     logging.file.path=.\n     logging.type=file\n     apache.kafka.address=172.17.0.1:9092\n-    microservices.route.service.url=http://192.168.1.17:30003/vpcs/\n+    microservices.route.service.url=http://192.168.1.25:30003/vpcs/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM3MjkzOnYy", "diffSide": "RIGHT", "path": "services/private_ip_manager/Dockerfile", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNToyOFrOGM72Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNToyOFrOGM72Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNjYxNA==", "bodyText": "Local change.", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416216614", "createdAt": "2020-04-27T23:25:28Z", "author": {"login": "xieus"}, "path": "services/private_ip_manager/Dockerfile", "diffHunk": "@@ -5,7 +5,8 @@ FROM openjdk:8\n MAINTAINER Zhonghao Lyu <zlyu@futurewei.com>\n \n # Route Manager process\n-EXPOSE 9000\n+#EXPOSE 9000\n+EXPOSE 8080", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM3NjEyOnYy", "diffSide": "RIGHT", "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyNjoyNlrOGM734A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMToxNTo1MlrOGM-TBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNzA1Ng==", "bodyText": "Should we verify cidr block?", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416217056", "createdAt": "2020-04-27T23:26:26Z", "author": {"login": "xieus"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java", "diffHunk": "@@ -102,6 +102,7 @@ public SubnetStateJson createSubnetState(@PathVariable String projectId, @Reques\n             SubnetState inSubnetState = resource.getSubnet();\n             String subnetId = inSubnetState.getId();\n             String vpcId = inSubnetState.getVpcId();\n+            String cidr = inSubnetState.getCidr();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI1Njc3NA==", "bodyText": "Finished! ~", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416256774", "createdAt": "2020-04-28T01:15:52Z", "author": {"login": "kevin-zhonghao"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/controller/SubnetController.java", "diffHunk": "@@ -102,6 +102,7 @@ public SubnetStateJson createSubnetState(@PathVariable String projectId, @Reques\n             SubnetState inSubnetState = resource.getSubnet();\n             String subnetId = inSubnetState.getId();\n             String vpcId = inSubnetState.getVpcId();\n+            String cidr = inSubnetState.getCidr();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNzA1Ng=="}, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM4MTU3OnYy", "diffSide": "RIGHT", "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/implement/SubnetServiceImp.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyODowOFrOGM76zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMToxODoyMFrOGM-Wbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNzgwNA==", "bodyText": "Should we do something here?", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416217804", "createdAt": "2020-04-27T23:28:08Z", "author": {"login": "xieus"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/implement/SubnetServiceImp.java", "diffHunk": "@@ -196,4 +205,20 @@ public IpAddrRequest allocateIPGateway(String subnetId) throws FallbackException\n \n         return ipResponse;\n     }\n+\n+    @Override\n+    public String[] cidrToFirstIpAndLastIp(String cidr) {\n+        if (cidr == null) {\n+            return null;\n+        }\n+        SubnetUtils utils = new SubnetUtils(cidr);\n+        String[] address = utils.getInfo().getAllAddresses();\n+        if (address == null || address.length < 1) {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI1NzY0Ng==", "bodyText": "Yeah ~ it should have \"return null\"", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416257646", "createdAt": "2020-04-28T01:18:20Z", "author": {"login": "kevin-zhonghao"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/implement/SubnetServiceImp.java", "diffHunk": "@@ -196,4 +205,20 @@ public IpAddrRequest allocateIPGateway(String subnetId) throws FallbackException\n \n         return ipResponse;\n     }\n+\n+    @Override\n+    public String[] cidrToFirstIpAndLastIp(String cidr) {\n+        if (cidr == null) {\n+            return null;\n+        }\n+        SubnetUtils utils = new SubnetUtils(cidr);\n+        String[] address = utils.getInfo().getAllAddresses();\n+        if (address == null || address.length < 1) {\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxNzgwNA=="}, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM4NDE2OnYy", "diffSide": "RIGHT", "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/implement/SubnetServiceImp.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyOTowNFrOGM78Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMToyOTo1N1rOGM-mAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxODE2Ng==", "bodyText": "getAllAddress could be very costly for a huge subnet. Could we do it more efficient?", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416218166", "createdAt": "2020-04-27T23:29:04Z", "author": {"login": "xieus"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/implement/SubnetServiceImp.java", "diffHunk": "@@ -196,4 +205,20 @@ public IpAddrRequest allocateIPGateway(String subnetId) throws FallbackException\n \n         return ipResponse;\n     }\n+\n+    @Override\n+    public String[] cidrToFirstIpAndLastIp(String cidr) {\n+        if (cidr == null) {\n+            return null;\n+        }\n+        SubnetUtils utils = new SubnetUtils(cidr);\n+        String[] address = utils.getInfo().getAllAddresses();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI2MTYzMg==", "bodyText": "Yes ~ you are right", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416261632", "createdAt": "2020-04-28T01:29:57Z", "author": {"login": "kevin-zhonghao"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/implement/SubnetServiceImp.java", "diffHunk": "@@ -196,4 +205,20 @@ public IpAddrRequest allocateIPGateway(String subnetId) throws FallbackException\n \n         return ipResponse;\n     }\n+\n+    @Override\n+    public String[] cidrToFirstIpAndLastIp(String cidr) {\n+        if (cidr == null) {\n+            return null;\n+        }\n+        SubnetUtils utils = new SubnetUtils(cidr);\n+        String[] address = utils.getInfo().getAllAddresses();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxODE2Ng=="}, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4OTM4NjcyOnYy", "diffSide": "RIGHT", "path": "services/subnet_manager/src/test/java/com/futurewei/alcor/subnet/SubnetControllerTests.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMzoyOTo1N1rOGM79nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMTozOToyM1rOGM-yDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxODUyNQ==", "bodyText": "Can we have a UT covering bad CIDR block case?", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416218525", "createdAt": "2020-04-27T23:29:57Z", "author": {"login": "xieus"}, "path": "services/subnet_manager/src/test/java/com/futurewei/alcor/subnet/SubnetControllerTests.java", "diffHunk": "@@ -97,7 +97,7 @@ public void createSubnetState_create_pass () throws Exception {\n                 .thenReturn(routeWebJson);\n         Mockito.when(subnetService.allocateMacGateway(anyString(), anyString(), anyString()))\n                 .thenReturn(macResponse);\n-        Mockito.when(subnetService.allocateIPGateway(anyString()))\n+        Mockito.when(subnetService.allocateIPGateway(anyString(), anyString()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI2NDcxNg==", "bodyText": "Finished!", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416264716", "createdAt": "2020-04-28T01:39:23Z", "author": {"login": "kevin-zhonghao"}, "path": "services/subnet_manager/src/test/java/com/futurewei/alcor/subnet/SubnetControllerTests.java", "diffHunk": "@@ -97,7 +97,7 @@ public void createSubnetState_create_pass () throws Exception {\n                 .thenReturn(routeWebJson);\n         Mockito.when(subnetService.allocateMacGateway(anyString(), anyString(), anyString()))\n                 .thenReturn(macResponse);\n-        Mockito.when(subnetService.allocateIPGateway(anyString()))\n+        Mockito.when(subnetService.allocateIPGateway(anyString(), anyString()))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIxODUyNQ=="}, "originalCommit": {"oid": "e3fd31d96ddbfbcd30c3f1a84e8d3163a58a6a63"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5MDEzNjM2OnYy", "diffSide": "RIGHT", "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/SubnetService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwNDo0Mjo1NFrOGNCRvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwNDo0NToxN1rOGNCUyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjMyMTk4Mg==", "bodyText": "To be accurate, let us use \"allocateIpAddressForGatewayPort\"", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416321982", "createdAt": "2020-04-28T04:42:54Z", "author": {"login": "xieus"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/SubnetService.java", "diffHunk": "@@ -32,7 +35,13 @@ public void fallbackOperation (AtomicReference<RouteWebJson> routeResponseAtomic\n     // Allocate Gateway Mac\n     public MacStateJson allocateMacGateway (String projectId, String vpcId, String portId) throws Exception;\n \n-    // TODO : Verify/Allocate Gateway IP, subnet id, port id, subnet cidr, response:IP - unique\n-    public IpAddrRequest allocateIPGateway (String subnetId) throws Exception;\n+    // Verify/Allocate Gateway IP\n+    public IpAddrRequest allocateIPGateway (String subnetId, String cidr) throws Exception;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a54470de61cb41b57d3ecefaba89ac6862d6a88"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjMyMjc2MQ==", "bodyText": "Also inside this method, I believe we have two standalone logics. One is to allocate Ip range for subnet, and the other is to allocate ip address for gateway port. Let us split them into two methods.", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416322761", "createdAt": "2020-04-28T04:45:17Z", "author": {"login": "xieus"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/SubnetService.java", "diffHunk": "@@ -32,7 +35,13 @@ public void fallbackOperation (AtomicReference<RouteWebJson> routeResponseAtomic\n     // Allocate Gateway Mac\n     public MacStateJson allocateMacGateway (String projectId, String vpcId, String portId) throws Exception;\n \n-    // TODO : Verify/Allocate Gateway IP, subnet id, port id, subnet cidr, response:IP - unique\n-    public IpAddrRequest allocateIPGateway (String subnetId) throws Exception;\n+    // Verify/Allocate Gateway IP\n+    public IpAddrRequest allocateIPGateway (String subnetId, String cidr) throws Exception;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjMyMTk4Mg=="}, "originalCommit": {"oid": "8a54470de61cb41b57d3ecefaba89ac6862d6a88"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5MDEzNzI1OnYy", "diffSide": "RIGHT", "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/SubnetService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwNDo0MzoxNlrOGNCSPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwNDo0MzoxNlrOGNCSPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjMyMjExMQ==", "bodyText": "Let us use allocateMacAddressForGatewayPort", "url": "https://github.com/futurewei-cloud/alcor/pull/174#discussion_r416322111", "createdAt": "2020-04-28T04:43:16Z", "author": {"login": "xieus"}, "path": "services/subnet_manager/src/main/java/com/futurewei/alcor/subnet/service/SubnetService.java", "diffHunk": "@@ -32,7 +35,13 @@ public void fallbackOperation (AtomicReference<RouteWebJson> routeResponseAtomic\n     // Allocate Gateway Mac\n     public MacStateJson allocateMacGateway (String projectId, String vpcId, String portId) throws Exception;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a54470de61cb41b57d3ecefaba89ac6862d6a88"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4722, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}