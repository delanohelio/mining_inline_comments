{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYxNTM2Mjc1", "number": 339, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxMDoxNDoyMFrOEUXiRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzozODoyMlrOEVnSGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NzkyNTgyOnYy", "diffSide": "RIGHT", "path": "schema/proto3/common.proto", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxMDoxNDoyMFrOG6j68g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQyMjo1Njo1NFrOG6ocgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTEyMg==", "bodyText": "Resource type is a type for customer-defined resources. Could you elaborate why neighbor is a type?", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464059122", "createdAt": "2020-08-02T10:14:20Z", "author": {"login": "xieus"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -25,8 +25,10 @@ enum ResourceType {\n     VPC = 0;\n     SUBNET = 1;\n     PORT = 2;\n-    SECURITYGROUP = 3;\n-    DHCP = 4;\n+    NEIGHBOR = 3;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDEzMzI0OA==", "bodyText": "GoalStateOperationStatus includes ResourceType for GoalStateOperationReply. Since we introduced NeighborState in the schema, we need to add NEIGHBOR as ResourceType for our GoalStateOperationReply.", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464133248", "createdAt": "2020-08-02T22:56:54Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -25,8 +25,10 @@ enum ResourceType {\n     VPC = 0;\n     SUBNET = 1;\n     PORT = 2;\n-    SECURITYGROUP = 3;\n-    DHCP = 4;\n+    NEIGHBOR = 3;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTEyMg=="}, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NzkyNzcxOnYy", "diffSide": "RIGHT", "path": "schema/proto3/dhcp.proto", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxMDoxNjo1M1rOG6j72Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQyMjo1Nzo1NlrOG6oczg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTM1Mw==", "bodyText": "If we need to merge the dhcp change earlier, we could create a separate PR for that.", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464059353", "createdAt": "2020-08-02T10:16:53Z", "author": {"login": "xieus"}, "path": "schema/proto3/dhcp.proto", "diffHunk": "@@ -27,10 +27,12 @@ message DHCPConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string mac_address = 3;\n-    string ipv4_address = 4;\n-    string ipv6_address = 5;\n-    string port_host_name = 6; // for local DNS response\n+    string request_id = 3;\n+    string subnet_id = 4;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDEzMzMyNg==", "bodyText": "ok, I don't think dhcp progress is blocked because they will be using a random/fixed server address for DHCP server for now.", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464133326", "createdAt": "2020-08-02T22:57:56Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/dhcp.proto", "diffHunk": "@@ -27,10 +27,12 @@ message DHCPConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string mac_address = 3;\n-    string ipv4_address = 4;\n-    string ipv6_address = 5;\n-    string port_host_name = 6; // for local DNS response\n+    string request_id = 3;\n+    string subnet_id = 4;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTM1Mw=="}, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NzkyOTE5OnYy", "diffSide": "RIGHT", "path": "schema/proto3/goalstate.proto", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxMDoxOToyM1rOG6j8nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwMTowNDoyMVrOG6pW7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTU1MQ==", "bodyText": "Will replacing security_group_states with neighbor_states become a breaking change for protobuf message? I am a bit surprised that this change doesn't break our CI :-)", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464059551", "createdAt": "2020-08-02T10:19:23Z", "author": {"login": "xieus"}, "path": "schema/proto3/goalstate.proto", "diffHunk": "@@ -23,15 +23,19 @@ option java_package = \"com.futurewei.alcor.schema\";\n import \"vpc.proto\";\n import \"subnet.proto\";\n import \"port.proto\";\n+import \"neighbor.proto\";\n import \"securitygroup.proto\";\n import \"dhcp.proto\";\n+import \"router.proto\";\n \n message GoalState {\n     uint32 format_version = 1;\n \n     repeated VpcState vpc_states = 2;\n     repeated SubnetState subnet_states = 3;\n     repeated PortState port_states = 4;\n-    repeated SecurityGroupState security_group_states = 5;\n-    repeated DHCPState dhcp_states = 6;\n+    repeated NeighborState neighbor_states = 5;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDEzMzU4NA==", "bodyText": "I think it didn't break because we always set and get the protobuf fields by name, e.g:\nPortConfiguration_builder->set_id(port_id_4);\nPortConfiguration_builder->set_vpc_id(vpc_id_2);\nPortConfiguration_builder->set_name(port_name_4);\nPortConfiguration_builder->set_mac_address(vmac_address_4);\nTherefore, it is okay even when the order of the fields changed.", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464133584", "createdAt": "2020-08-02T23:00:12Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/goalstate.proto", "diffHunk": "@@ -23,15 +23,19 @@ option java_package = \"com.futurewei.alcor.schema\";\n import \"vpc.proto\";\n import \"subnet.proto\";\n import \"port.proto\";\n+import \"neighbor.proto\";\n import \"securitygroup.proto\";\n import \"dhcp.proto\";\n+import \"router.proto\";\n \n message GoalState {\n     uint32 format_version = 1;\n \n     repeated VpcState vpc_states = 2;\n     repeated SubnetState subnet_states = 3;\n     repeated PortState port_states = 4;\n-    repeated SecurityGroupState security_group_states = 5;\n-    repeated DHCPState dhcp_states = 6;\n+    repeated NeighborState neighbor_states = 5;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTU1MQ=="}, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDE0ODIwNg==", "bodyText": "Okay, that is to say, if we merge this PR to Alcor/Master, DPM starts sending the protobuf message with updated version, existing ACA should be fine?", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464148206", "createdAt": "2020-08-03T01:04:21Z", "author": {"login": "xieus"}, "path": "schema/proto3/goalstate.proto", "diffHunk": "@@ -23,15 +23,19 @@ option java_package = \"com.futurewei.alcor.schema\";\n import \"vpc.proto\";\n import \"subnet.proto\";\n import \"port.proto\";\n+import \"neighbor.proto\";\n import \"securitygroup.proto\";\n import \"dhcp.proto\";\n+import \"router.proto\";\n \n message GoalState {\n     uint32 format_version = 1;\n \n     repeated VpcState vpc_states = 2;\n     repeated SubnetState subnet_states = 3;\n     repeated PortState port_states = 4;\n-    repeated SecurityGroupState security_group_states = 5;\n-    repeated DHCPState dhcp_states = 6;\n+    repeated NeighborState neighbor_states = 5;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTU1MQ=="}, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NzkzMDkwOnYy", "diffSide": "RIGHT", "path": ".gitignore", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxMDoyMToyNlrOG6j9ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxMDoyMToyNlrOG6j9ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTc0OQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464059749", "createdAt": "2020-08-02T10:21:26Z", "author": {"login": "xieus"}, "path": ".gitignore", "diffHunk": "@@ -79,3 +79,6 @@ lib/target/\n \n # Ignite\n ignite/\n+\n+# mac system file\n+.DS_Store", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NzkzNDk4OnYy", "diffSide": "RIGHT", "path": "schema/proto3/subnet.proto", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxMDoyNzoyMVrOG6j_Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QwMToxMzowOVrOG6pcAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MDI1MQ==", "bodyText": "Should we move network_type from port directly to network, instead of subnet? Do you plan to support two subnets in the same network with different values of network_type?", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464060251", "createdAt": "2020-08-02T10:27:21Z", "author": {"login": "xieus"}, "path": "schema/proto3/subnet.proto", "diffHunk": "@@ -27,36 +27,27 @@ message SubnetConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string id = 3;\n-    string project_id = 4;\n-    string vpc_id = 5;\n-    string name = 6;\n-    string cidr = 7;\n-    int64 tunnel_id = 8;\n+    string request_id = 3;\n+    string id = 4;\n+    NetworkType network_type = 5;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDEzNDY1Mw==", "bodyText": "putting it in subnet level will allow us to support:\n\ntwo subnets in the same network with different network_type\neach network with n subnet will support one network_type only\n\n@cj-chung can you help to find out what openstack neutron supports?\nNote that we have the notion to look up subnet info, but we don't have the notion to look up vpc info (yet).", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464134653", "createdAt": "2020-08-02T23:12:00Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/subnet.proto", "diffHunk": "@@ -27,36 +27,27 @@ message SubnetConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string id = 3;\n-    string project_id = 4;\n-    string vpc_id = 5;\n-    string name = 6;\n-    string cidr = 7;\n-    int64 tunnel_id = 8;\n+    string request_id = 3;\n+    string id = 4;\n+    NetworkType network_type = 5;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MDI1MQ=="}, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDE0ODgyOQ==", "bodyText": "Neutron by default supports one network, one network type, and one segmentation id.\nRef: https://docs.openstack.org/api-ref/network/v2/?expanded=create-network-detail#create-network\nRegarding two subnets with different network_type, DP will be pretty challenging.", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464148829", "createdAt": "2020-08-03T01:08:41Z", "author": {"login": "xieus"}, "path": "schema/proto3/subnet.proto", "diffHunk": "@@ -27,36 +27,27 @@ message SubnetConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string id = 3;\n-    string project_id = 4;\n-    string vpc_id = 5;\n-    string name = 6;\n-    string cidr = 7;\n-    int64 tunnel_id = 8;\n+    string request_id = 3;\n+    string id = 4;\n+    NetworkType network_type = 5;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MDI1MQ=="}, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDE0OTUwNQ==", "bodyText": "Also, it supports one network with multiple segments, each with different network type and segmentation id.\n    \"network\": {\n        \"segments\": [\n            {\n                \"provider:segmentation_id\": 2,\n                \"provider:physical_network\": \"public\",\n                \"provider:network_type\": \"vlan\"\n            },\n            {\n                \"provider:physical_network\": \"default\",\n                \"provider:network_type\": \"flat\"\n            }\n        ],\n        \"name\": \"net1\",\n        \"admin_state_up\": true,\n        \"qos_policy_id\": \"6a8454ade84346f59e8d40665f878b2e\"\n    }\n}", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464149505", "createdAt": "2020-08-03T01:13:09Z", "author": {"login": "xieus"}, "path": "schema/proto3/subnet.proto", "diffHunk": "@@ -27,36 +27,27 @@ message SubnetConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string id = 3;\n-    string project_id = 4;\n-    string vpc_id = 5;\n-    string name = 6;\n-    string cidr = 7;\n-    int64 tunnel_id = 8;\n+    string request_id = 3;\n+    string id = 4;\n+    NetworkType network_type = 5;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MDI1MQ=="}, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5Nzk0MjkzOnYy", "diffSide": "RIGHT", "path": "schema/proto3/neighbor.proto", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxMDozODo1NFrOG6kDPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQyMzoxMzowOVrOG6oibg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MTI0NQ==", "bodyText": "Move neighbor_host_dvr_mac field to right after host_ip_address.", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464061245", "createdAt": "2020-08-02T10:38:54Z", "author": {"login": "xieus"}, "path": "schema/proto3/neighbor.proto", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+syntax = \"proto3\";\n+\n+package alcor.schema;\n+\n+option java_package = \"com.futurewei.alcor.schema\";\n+option java_outer_classname = \"Neighbor\";\n+\n+import \"common.proto\";\n+\n+enum NeighborType { \n+    L2 = 0; // the default type\n+    L3 = 1;\n+}\n+\n+message NeighborConfiguration {\n+    uint32 format_version = 1;\n+    uint32 revision_number = 2;\n+\n+    string request_id = 3;\n+    string id = 4;\n+    NeighborType neighbor_type = 5; // L2 (default) or L3\n+    string project_id = 6;\n+    string vpc_id = 7;\n+    string name = 8;\n+    string mac_address = 9;\n+    string host_ip_address = 10;\n+\n+    message FixedIp {\n+        string subnet_id = 1;\n+        string ip_address = 2;\n+    }\n+\n+    message AllowAddressPair {\n+        string ip_address = 1;\n+        string mac_address = 2;\n+    }\n+\n+    string neighbor_host_dvr_mac = 11;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDEzNDc2Ng==", "bodyText": "fixed.", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464134766", "createdAt": "2020-08-02T23:13:09Z", "author": {"login": "er1cthe0ne"}, "path": "schema/proto3/neighbor.proto", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+syntax = \"proto3\";\n+\n+package alcor.schema;\n+\n+option java_package = \"com.futurewei.alcor.schema\";\n+option java_outer_classname = \"Neighbor\";\n+\n+import \"common.proto\";\n+\n+enum NeighborType { \n+    L2 = 0; // the default type\n+    L3 = 1;\n+}\n+\n+message NeighborConfiguration {\n+    uint32 format_version = 1;\n+    uint32 revision_number = 2;\n+\n+    string request_id = 3;\n+    string id = 4;\n+    NeighborType neighbor_type = 5; // L2 (default) or L3\n+    string project_id = 6;\n+    string vpc_id = 7;\n+    string name = 8;\n+    string mac_address = 9;\n+    string host_ip_address = 10;\n+\n+    message FixedIp {\n+        string subnet_id = 1;\n+        string ip_address = 2;\n+    }\n+\n+    message AllowAddressPair {\n+        string ip_address = 1;\n+        string mac_address = 2;\n+    }\n+\n+    string neighbor_host_dvr_mac = 11;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MTI0NQ=="}, "originalCommit": {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwNzI3NzA0OnYy", "diffSide": "RIGHT", "path": "schema/proto3/subnet.proto", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNTowNDoyOVrOG76Ubw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNTowNjo0NFrOG76W4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3NDY3MQ==", "bodyText": "I did not find Gateway definition in subnet proto", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r465474671", "createdAt": "2020-08-05T05:04:29Z", "author": {"login": "haboy52581"}, "path": "schema/proto3/subnet.proto", "diffHunk": "@@ -27,36 +27,27 @@ message SubnetConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string id = 3;\n-    string project_id = 4;\n-    string vpc_id = 5;\n-    string name = 6;\n-    string cidr = 7;\n-    int64 tunnel_id = 8;\n+    string request_id = 3;\n+    string id = 4;\n+    NetworkType network_type = 5;\n+    string project_id = 6;\n+    string vpc_id = 7;\n+    string name = 8;\n+    string cidr = 9;\n+\n+    // TODO: change to uint32 but that would require change in DPM\n+    uint64 tunnel_id = 10;\n \n     message Gateway {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce29a09a93f1bf2f411224c09b2faa7b56dc8241"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3NTI5OA==", "bodyText": "Also I have updated DPM's input about subnet Internal Entity part here, let me know if you have any questions:\nhttps://github.com/haboy52581/alcor/blob/master/docs/modules/ROOT/pages/infra_services/data_plane_manager.adoc#api-specification", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r465475298", "createdAt": "2020-08-05T05:06:44Z", "author": {"login": "haboy52581"}, "path": "schema/proto3/subnet.proto", "diffHunk": "@@ -27,36 +27,27 @@ message SubnetConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string id = 3;\n-    string project_id = 4;\n-    string vpc_id = 5;\n-    string name = 6;\n-    string cidr = 7;\n-    int64 tunnel_id = 8;\n+    string request_id = 3;\n+    string id = 4;\n+    NetworkType network_type = 5;\n+    string project_id = 6;\n+    string vpc_id = 7;\n+    string name = 8;\n+    string cidr = 9;\n+\n+    // TODO: change to uint32 but that would require change in DPM\n+    uint64 tunnel_id = 10;\n \n     message Gateway {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3NDY3MQ=="}, "originalCommit": {"oid": "ce29a09a93f1bf2f411224c09b2faa7b56dc8241"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDk3Njg2OnYy", "diffSide": "RIGHT", "path": "schema/proto3/neighbor.proto", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzozMDo0NVrOG8eC8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzozMDo0NVrOG8eC8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2MDAxNw==", "bodyText": "should we put the neighbor to port as one field which is more naturally?", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r466060017", "createdAt": "2020-08-05T23:30:45Z", "author": {"login": "haboy52581"}, "path": "schema/proto3/neighbor.proto", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+syntax = \"proto3\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce29a09a93f1bf2f411224c09b2faa7b56dc8241"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDk4OTk1OnYy", "diffSide": "RIGHT", "path": "schema/proto3/dhcp.proto", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzozNzozNVrOG8eK2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzozNzozNVrOG8eK2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2MjA0Mg==", "bodyText": "do we need one called Id?", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r466062042", "createdAt": "2020-08-05T23:37:35Z", "author": {"login": "haboy52581"}, "path": "schema/proto3/dhcp.proto", "diffHunk": "@@ -27,10 +27,12 @@ message DHCPConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string mac_address = 3;\n-    string ipv4_address = 4;\n-    string ipv6_address = 5;\n-    string port_host_name = 6; // for local DNS response\n+    string request_id = 3;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce29a09a93f1bf2f411224c09b2faa7b56dc8241"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDk5MTYxOnYy", "diffSide": "RIGHT", "path": "schema/proto3/common.proto", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzozODoyMlrOG8eL1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzozODoyMlrOG8eL1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2MjI5Mw==", "bodyText": "if we put neighbor into port as field, then we do NOT need NEIGHBORXXX type and logic to handle that", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r466062293", "createdAt": "2020-08-05T23:38:22Z", "author": {"login": "haboy52581"}, "path": "schema/proto3/common.proto", "diffHunk": "@@ -35,14 +37,9 @@ enum OperationType {\n     GET = 2;\n     DELETE = 3;\n     INFO = 4;\n-    NEIGHBOR_CREATE_UPDATE = 5;\n-    NEIGHBOR_GET = 6;\n-    NEIGHBOR_DELETE = 7;\n-    CREATE_UPDATE_GATEWAY = 8;\n-\n-    FINALIZE = 9;              // For Mizar only\n-    CREATE_UPDATE_SWITCH = 10; // For Mizar only\n-    CREATE_UPDATE_ROUTER = 11; // For Mizar only\n+    NEIGHBOR_CREATE_UPDATE = 5; // To be removed after using NeighborState", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce29a09a93f1bf2f411224c09b2faa7b56dc8241"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4628, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}