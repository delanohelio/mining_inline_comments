{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1OTc5NzEz", "number": 1806, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMDoxNzowOVrOEePudA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMDoxNzo1MlrOEePvQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMTUwMzg4OnYy", "diffSide": "RIGHT", "path": "gradle/validation/validate-source-patterns.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMDoxNzowOVrOHJyxDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMDoxNzowOVrOHJyxDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDAzMDk5MQ==", "bodyText": "I would move it to the class's constructor? Then inputs and outputs are consistently in the same code.", "url": "https://github.com/apache/lucene-solr/pull/1806#discussion_r480030991", "createdAt": "2020-08-31T10:17:09Z", "author": {"login": "dweiss"}, "path": "gradle/validation/validate-source-patterns.gradle", "diffHunk": "@@ -15,27 +15,233 @@\n  * limitations under the License.\n  */\n \n-// This should be eventually rewritten in plain gradle. For now, delegate to\n-// the ant/groovy script we already have.\n+import org.apache.rat.Defaults;\n+import org.apache.rat.document.impl.FileDocument;\n+import org.apache.rat.api.MetaData;\n \n-configure(rootProject) {\n-  configurations {\n-    checkSourceDeps\n+buildscript {\n+  repositories {\n+    mavenCentral()\n   }\n \n   dependencies {\n-    checkSourceDeps \"org.codehaus.groovy:groovy-all:2.4.17\"\n-    checkSourceDeps \"org.apache.rat:apache-rat:${scriptDepVersions['apache-rat']}\"\n+    classpath \"org.apache.rat:apache-rat:${scriptDepVersions['apache-rat']}\"\n+  }\n+}\n+\n+configure(rootProject) {\n+  task(\"validateSourcePatterns\", type: ValidateSourcePatternsTask) {\n+    group = 'Verification'\n+    description = 'Validate Source Patterns'\n+    \n+    // this task has no outputs, so it's always uptodate (if inputs don't change).\n+    outputs.upToDateWhen { true }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3edd1b520fd98b0b0e63b66db6f61cf9e71efff2"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMTUwNTk0OnYy", "diffSide": "RIGHT", "path": "gradle/validation/validate-source-patterns.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMDoxNzo1MlrOHJyyRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMDoxNzo1MlrOHJyyRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDAzMTMwMg==", "bodyText": "And this I'd move to the task declaration block (so that it's not hardcoded but configured :)", "url": "https://github.com/apache/lucene-solr/pull/1806#discussion_r480031302", "createdAt": "2020-08-31T10:17:52Z", "author": {"login": "dweiss"}, "path": "gradle/validation/validate-source-patterns.gradle", "diffHunk": "@@ -15,27 +15,233 @@\n  * limitations under the License.\n  */\n \n-// This should be eventually rewritten in plain gradle. For now, delegate to\n-// the ant/groovy script we already have.\n+import org.apache.rat.Defaults;\n+import org.apache.rat.document.impl.FileDocument;\n+import org.apache.rat.api.MetaData;\n \n-configure(rootProject) {\n-  configurations {\n-    checkSourceDeps\n+buildscript {\n+  repositories {\n+    mavenCentral()\n   }\n \n   dependencies {\n-    checkSourceDeps \"org.codehaus.groovy:groovy-all:2.4.17\"\n-    checkSourceDeps \"org.apache.rat:apache-rat:${scriptDepVersions['apache-rat']}\"\n+    classpath \"org.apache.rat:apache-rat:${scriptDepVersions['apache-rat']}\"\n+  }\n+}\n+\n+configure(rootProject) {\n+  task(\"validateSourcePatterns\", type: ValidateSourcePatternsTask) {\n+    group = 'Verification'\n+    description = 'Validate Source Patterns'\n+    \n+    // this task has no outputs, so it's always uptodate (if inputs don't change).\n+    outputs.upToDateWhen { true }\n   }\n+}\n+\n+class ValidateSourcePatternsTask extends DefaultTask {\n+\n+  @InputFiles\n+  final ConfigurableFileTree sourceFiles = project.fileTree(project.rootDir) {\n+    [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3edd1b520fd98b0b0e63b66db6f61cf9e71efff2"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1341, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}