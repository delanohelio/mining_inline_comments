{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMDc0ODY0", "number": 1979, "title": "LUCENE-9574 Add DropIfFlaggedFilterFactory", "bodyText": "", "createdAt": "2020-10-14T03:08:06Z", "url": "https://github.com/apache/lucene-solr/pull/1979", "merged": true, "mergeCommit": {"oid": "ab5671d367eb0099269bb91696c5b8c84090485f"}, "closed": true, "closedAt": "2020-10-14T17:26:36Z", "author": {"login": "gus-asf"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSRfq3gH2gAyNTAzMDc0ODY0OmY0MWFiNWFjMGQ5ZWI2NTc4YmYzNzkzNTFkNzBhOTVlNDBlMjRhZTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSffa_gFqTUwODUwOTA0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f41ab5ac0d9eb6578bf379351d70a95e40e24ae7", "author": {"user": {"login": "gus-asf", "name": "Gus Heck"}}, "url": "https://github.com/apache/lucene-solr/commit/f41ab5ac0d9eb6578bf379351d70a95e40e24ae7", "committedDate": "2020-10-13T23:50:51Z", "message": "LUCENE-9574 Add DropIfFlaggedFilterFactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d33101b37f858dca465d8f8485900061c6a049c", "author": {"user": {"login": "gus-asf", "name": "Gus Heck"}}, "url": "https://github.com/apache/lucene-solr/commit/0d33101b37f858dca465d8f8485900061c6a049c", "committedDate": "2020-10-14T03:14:38Z", "message": "LUCENE-9574 tidy up test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2a8c4ea270a05ee01646cf5913fbeb4e44d3747", "author": {"user": {"login": "gus-asf", "name": "Gus Heck"}}, "url": "https://github.com/apache/lucene-solr/commit/a2a8c4ea270a05ee01646cf5913fbeb4e44d3747", "committedDate": "2020-10-14T11:49:30Z", "message": "LUCENE-9574 fix @since"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MzI3MjI2", "url": "https://github.com/apache/lucene-solr/pull/1979#pullrequestreview-508327226", "createdAt": "2020-10-14T13:09:44Z", "commit": {"oid": "a2a8c4ea270a05ee01646cf5913fbeb4e44d3747"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMzowOTo0NFrOHhSL3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMzoxMTowOVrOHhSQEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY2MzAwNg==", "bodyText": "Can you make the class final and make the constructor public? Why is this protected?", "url": "https://github.com/apache/lucene-solr/pull/1979#discussion_r504663006", "createdAt": "2020-10-14T13:09:44Z", "author": {"login": "uschindler"}, "path": "lucene/analysis/common/src/java/org/apache/lucene/analysis/miscellaneous/DropIfFlaggedFilter.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.lucene.analysis.miscellaneous;\n+\n+import org.apache.lucene.analysis.FilteringTokenFilter;\n+import org.apache.lucene.analysis.TokenStream;\n+import org.apache.lucene.analysis.tokenattributes.FlagsAttribute;\n+\n+/**\n+ * Allows Tokens with a given combination of flags to be dropped. If all flags specified are present\n+ * the token is dropped, otherwise it is retained.\n+ *\n+ * @see DropIfFlaggedFilterFactory\n+ * @since 8.8.0\n+ */\n+public class DropIfFlaggedFilter extends FilteringTokenFilter {\n+  private final FlagsAttribute flagsAtt = addAttribute(FlagsAttribute.class);\n+  private final int dropFlags;\n+\n+  /**\n+   * Construct a token stream filtering the given input.\n+   *\n+   * @param input the source stream\n+   * @param dropFlags a combination of flags that indicates that the token should be dropped.\n+   */\n+  @SuppressWarnings(\"WeakerAccess\")\n+  protected DropIfFlaggedFilter(TokenStream input, int dropFlags) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a8c4ea270a05ee01646cf5913fbeb4e44d3747"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY2NDA4Mw==", "bodyText": "You should make the class final, too. That's not a requirement, but would be in line with other filters. The reason is: We don't want subclasses, as we prefer delegation over inheritance.", "url": "https://github.com/apache/lucene-solr/pull/1979#discussion_r504664083", "createdAt": "2020-10-14T13:11:09Z", "author": {"login": "uschindler"}, "path": "lucene/analysis/common/src/java/org/apache/lucene/analysis/miscellaneous/DropIfFlaggedFilter.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.lucene.analysis.miscellaneous;\n+\n+import org.apache.lucene.analysis.FilteringTokenFilter;\n+import org.apache.lucene.analysis.TokenStream;\n+import org.apache.lucene.analysis.tokenattributes.FlagsAttribute;\n+\n+/**\n+ * Allows Tokens with a given combination of flags to be dropped. If all flags specified are present\n+ * the token is dropped, otherwise it is retained.\n+ *\n+ * @see DropIfFlaggedFilterFactory\n+ * @since 8.8.0\n+ */\n+public class DropIfFlaggedFilter extends FilteringTokenFilter {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a8c4ea270a05ee01646cf5913fbeb4e44d3747"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MzM0NDQz", "url": "https://github.com/apache/lucene-solr/pull/1979#pullrequestreview-508334443", "createdAt": "2020-10-14T13:17:23Z", "commit": {"oid": "a2a8c4ea270a05ee01646cf5913fbeb4e44d3747"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMzoxNzoyM1rOHhShOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMzoxNzoyM1rOHhShOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY2ODQ3NA==", "bodyText": "Hi could you please undo all the formaating changes in the CHANGES.txt? This makes merging of other pull requests hard.\nMaybe your editor reformatted the whole file. I'd just copy the new changes entry into the file.", "url": "https://github.com/apache/lucene-solr/pull/1979#discussion_r504668474", "createdAt": "2020-10-14T13:17:23Z", "author": {"login": "uschindler"}, "path": "lucene/CHANGES.txt", "diffHunk": "@@ -19,7 +19,7 @@ API Changes\n * LUCENE-8474: RAMDirectory and associated deprecated classes have been\n   removed. (Dawid Weiss)\n \n-* LUCENE-3041: The deprecated Weight#extractTerms() method has been ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2a8c4ea270a05ee01646cf5913fbeb4e44d3747"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "473a1a2294bf08dc8c4a3e306958d3c46debcc8a", "author": {"user": {"login": "gus-asf", "name": "Gus Heck"}}, "url": "https://github.com/apache/lucene-solr/commit/473a1a2294bf08dc8c4a3e306958d3c46debcc8a", "committedDate": "2020-10-14T15:22:14Z", "message": "LUCENE-9574 add spurious white space back into CHANGES.txt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f030a8f09e6f8c3bbbc8a56478a68e4cbb312db", "author": {"user": {"login": "gus-asf", "name": "Gus Heck"}}, "url": "https://github.com/apache/lucene-solr/commit/1f030a8f09e6f8c3bbbc8a56478a68e4cbb312db", "committedDate": "2020-10-14T15:31:18Z", "message": "LUCENE-9574 fix up some modifiers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NTA5MDQ3", "url": "https://github.com/apache/lucene-solr/pull/1979#pullrequestreview-508509047", "createdAt": "2020-10-14T16:09:15Z", "commit": {"oid": "1f030a8f09e6f8c3bbbc8a56478a68e4cbb312db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2734, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}