{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNDA2NzAw", "number": 1360, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMDozMDowN1rODp0ThQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyOTozMFrODrRHtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MTc1MTczOnYy", "diffSide": "RIGHT", "path": "lucene/analysis/common/src/java/org/apache/lucene/analysis/util/AnalysisSPILoader.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMDozMDowN1rOF5OcRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNzozMjowNVrOF67gsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0OTc2Ng==", "bodyText": "This could be package private (since the original method was not public and still this is called only from classes in the same package)?", "url": "https://github.com/apache/lucene-solr/pull/1360#discussion_r395549766", "createdAt": "2020-03-20T10:30:07Z", "author": {"login": "mocobeta"}, "path": "lucene/analysis/common/src/java/org/apache/lucene/analysis/util/AnalysisSPILoader.java", "diffHunk": "@@ -143,6 +144,24 @@ public S newInstance(String name, Map<String,String> args) {\n   public Set<String> availableServices() {\n     return originalNames;\n   }  \n+\n+  /**\n+   * Looks up SPI name (static \"NAME\" field) with appropriate modifiers.\n+   * Also it must be a String class and declared in the concrete class.\n+   * @return the SPI name\n+   * @throws NoSuchFieldException - if the \"NAME\" field is not defined.\n+   * @throws IllegalAccessException - if the \"NAME\" field is inaccessible.\n+   * @throws IllegalStateException - if the \"NAME\" field does not have appropriate modifiers or isn't a String field.\n+   */\n+  public static String lookupSPIName(Class<? extends AbstractAnalysisFactory> service) throws NoSuchFieldException, IllegalAccessException, IllegalStateException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5aa10a7d8f429e7357c7486d79b08e62e2d553f"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMzNjc1Mw==", "bodyText": "I thought that this method is useful if you want to figure out the name of a factory where you only have class reference. There is no reason to hide it.", "url": "https://github.com/apache/lucene-solr/pull/1360#discussion_r397336753", "createdAt": "2020-03-24T17:32:05Z", "author": {"login": "uschindler"}, "path": "lucene/analysis/common/src/java/org/apache/lucene/analysis/util/AnalysisSPILoader.java", "diffHunk": "@@ -143,6 +144,24 @@ public S newInstance(String name, Map<String,String> args) {\n   public Set<String> availableServices() {\n     return originalNames;\n   }  \n+\n+  /**\n+   * Looks up SPI name (static \"NAME\" field) with appropriate modifiers.\n+   * Also it must be a String class and declared in the concrete class.\n+   * @return the SPI name\n+   * @throws NoSuchFieldException - if the \"NAME\" field is not defined.\n+   * @throws IllegalAccessException - if the \"NAME\" field is inaccessible.\n+   * @throws IllegalStateException - if the \"NAME\" field does not have appropriate modifiers or isn't a String field.\n+   */\n+  public static String lookupSPIName(Class<? extends AbstractAnalysisFactory> service) throws NoSuchFieldException, IllegalAccessException, IllegalStateException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0OTc2Ng=="}, "originalCommit": {"oid": "f5aa10a7d8f429e7357c7486d79b08e62e2d553f"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2Njk1ODYwOnYy", "diffSide": "RIGHT", "path": "lucene/CHANGES.txt", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNToyOTozMFrOF7gvmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjo1NjozMVrOF7k4Zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0Njc3Ng==", "bodyText": "i did nothing here and had no idea about this issue...", "url": "https://github.com/apache/lucene-solr/pull/1360#discussion_r397946776", "createdAt": "2020-03-25T15:29:30Z", "author": {"login": "mocobeta"}, "path": "lucene/CHANGES.txt", "diffHunk": "@@ -47,6 +47,13 @@ API Changes\n * LUCENE-9264: SimpleFSDirectory has been removed in favor of NIOFSDirectory.\n   (Yannick Welsch)\n \n+* LUCENE-9281: Use java.util.ServiceLoader to load codec components and analysis\n+  factories to be compatible with Java Module System. This allows to load factories\n+  without META-INF/service from a Java module exposing the factory in the module\n+  descriptor. This breaks backwards compatibility as custom factories must now\n+  also implement the default constructor (see MIGRATE.txt).\n+  (Uwe Schindler, Dawid Weiss, Tomoko Uchida)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d90d1b35e5b37a89220c5f4a3f1fb9efca414bf3"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk1NTM3Mw==", "bodyText": "Removed you, I just added you because you were doing a lot of preparatory work and also commented on some changes.", "url": "https://github.com/apache/lucene-solr/pull/1360#discussion_r397955373", "createdAt": "2020-03-25T15:40:04Z", "author": {"login": "uschindler"}, "path": "lucene/CHANGES.txt", "diffHunk": "@@ -47,6 +47,13 @@ API Changes\n * LUCENE-9264: SimpleFSDirectory has been removed in favor of NIOFSDirectory.\n   (Yannick Welsch)\n \n+* LUCENE-9281: Use java.util.ServiceLoader to load codec components and analysis\n+  factories to be compatible with Java Module System. This allows to load factories\n+  without META-INF/service from a Java module exposing the factory in the module\n+  descriptor. This breaks backwards compatibility as custom factories must now\n+  also implement the default constructor (see MIGRATE.txt).\n+  (Uwe Schindler, Dawid Weiss, Tomoko Uchida)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0Njc3Ng=="}, "originalCommit": {"oid": "d90d1b35e5b37a89220c5f4a3f1fb9efca414bf3"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAxNDU2Nw==", "bodyText": "Thanks... I just looked through the changes and approved (though i don't fully understand about it).", "url": "https://github.com/apache/lucene-solr/pull/1360#discussion_r398014567", "createdAt": "2020-03-25T16:56:31Z", "author": {"login": "mocobeta"}, "path": "lucene/CHANGES.txt", "diffHunk": "@@ -47,6 +47,13 @@ API Changes\n * LUCENE-9264: SimpleFSDirectory has been removed in favor of NIOFSDirectory.\n   (Yannick Welsch)\n \n+* LUCENE-9281: Use java.util.ServiceLoader to load codec components and analysis\n+  factories to be compatible with Java Module System. This allows to load factories\n+  without META-INF/service from a Java module exposing the factory in the module\n+  descriptor. This breaks backwards compatibility as custom factories must now\n+  also implement the default constructor (see MIGRATE.txt).\n+  (Uwe Schindler, Dawid Weiss, Tomoko Uchida)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk0Njc3Ng=="}, "originalCommit": {"oid": "d90d1b35e5b37a89220c5f4a3f1fb9efca414bf3"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 877, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}