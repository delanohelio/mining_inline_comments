{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyMTAyODk1", "number": 1775, "title": "SOLR-14767 : fix long field parsing from string", "bodyText": "Description\nInt and Long fields when passed as a string should consider all possible value formats and not throw NumberFormatException\nSolution\nUse Double.parse as a fallback when it fails\nTests\nadded a test to index with values as 42.2 which should not cause NumberFormatException\nChecklist\nPlease review the following and check all that apply:\n\n I have reviewed the guidelines for How to Contribute and my code conforms to the standards described there to the best of my ability.\n I have created a Jira issue and added the issue ID to my pull request title.\n I have given Solr maintainers access to contribute to my PR branch. (optional but recommended)\n I have developed this patch against the master branch.\n I have run ant precommit and the appropriate test suite.\n I have added tests for my changes.\n I have added documentation for the Ref Guide (for Solr changes only).", "createdAt": "2020-08-23T10:05:25Z", "url": "https://github.com/apache/lucene-solr/pull/1775", "merged": true, "mergeCommit": {"oid": "63f0b6b706dcbc8e92a8ff3ee8b81d6d6900aa67"}, "closed": true, "closedAt": "2020-09-29T13:53:34Z", "author": {"login": "apoorvprecisely"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBrJ3NgFqTQ3Mjk5ODE4NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNVHwqABqjM4MTUwNzY2MzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTk4MTg0", "url": "https://github.com/apache/lucene-solr/pull/1775#pullrequestreview-472998184", "createdAt": "2020-08-23T10:07:51Z", "commit": {"oid": "ae523fe4e96914faffd2ba9cc36bc638e462d572"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QxMDowNzo1MVrOHFL5_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QxMDowNzo1MVrOHFL5_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTE5OTk5OA==", "bodyText": "I think we need to check this in createField, not in toNativeType", "url": "https://github.com/apache/lucene-solr/pull/1775#discussion_r475199998", "createdAt": "2020-08-23T10:07:51Z", "author": {"login": "munendrasn"}, "path": "solr/core/src/java/org/apache/solr/schema/TrieLongField.java", "diffHunk": "@@ -56,7 +56,7 @@ public Object toNativeType(Object val) {\n     if(val==null) return null;\n     if (val instanceof Number) return ((Number) val).longValue();\n     try {\n-      if (val instanceof CharSequence) return Long.parseLong(val.toString());\n+      if (val instanceof CharSequence)return (long) Double.parseDouble(val.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae523fe4e96914faffd2ba9cc36bc638e462d572"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyOTk4MjQx", "url": "https://github.com/apache/lucene-solr/pull/1775#pullrequestreview-472998241", "createdAt": "2020-08-23T10:08:48Z", "commit": {"oid": "ae523fe4e96914faffd2ba9cc36bc638e462d572"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae523fe4e96914faffd2ba9cc36bc638e462d572", "author": {"user": {"login": "apoorvprecisely", "name": "Apoorv Bhawsar"}}, "url": "https://github.com/apache/lucene-solr/commit/ae523fe4e96914faffd2ba9cc36bc638e462d572", "committedDate": "2020-08-23T10:03:16Z", "message": "SOLR-14767 : fix long field parsing from string"}, "afterCommit": {"oid": "d3bba9940c5343d2f97fa5faac95beb6c22fd893", "author": {"user": {"login": "apoorvprecisely", "name": "Apoorv Bhawsar"}}, "url": "https://github.com/apache/lucene-solr/commit/d3bba9940c5343d2f97fa5faac95beb6c22fd893", "committedDate": "2020-09-21T17:20:44Z", "message": "SOLR-14767 : fix long field parsing from string"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d3bba9940c5343d2f97fa5faac95beb6c22fd893", "author": {"user": {"login": "apoorvprecisely", "name": "Apoorv Bhawsar"}}, "url": "https://github.com/apache/lucene-solr/commit/d3bba9940c5343d2f97fa5faac95beb6c22fd893", "committedDate": "2020-09-21T17:20:44Z", "message": "SOLR-14767 : fix long field parsing from string"}, "afterCommit": {"oid": "1f8abe71dfc0fb65b9f32b3c5f278e5fa056f33a", "author": {"user": null}, "url": "https://github.com/apache/lucene-solr/commit/1f8abe71dfc0fb65b9f32b3c5f278e5fa056f33a", "committedDate": "2020-09-24T10:24:29Z", "message": "SOLR-14767 : fix field parsing from string values"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "25b13519f0797ca2278229fb1c38dc6cc97586d0", "author": {"user": {"login": "apoorvprecisely", "name": "Apoorv Bhawsar"}}, "url": "https://github.com/apache/lucene-solr/commit/25b13519f0797ca2278229fb1c38dc6cc97586d0", "committedDate": "2020-09-26T09:29:52Z", "message": "SOLR-14767 : test field parsing from string values"}, "afterCommit": {"oid": "be79120ce79ead043ebd647e48a43a3e875dfd31", "author": {"user": {"login": "apoorvprecisely", "name": "Apoorv Bhawsar"}}, "url": "https://github.com/apache/lucene-solr/commit/be79120ce79ead043ebd647e48a43a3e875dfd31", "committedDate": "2020-09-26T09:31:05Z", "message": "SOLR-14767 : fix field parsing from string values"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be79120ce79ead043ebd647e48a43a3e875dfd31", "author": {"user": {"login": "apoorvprecisely", "name": "Apoorv Bhawsar"}}, "url": "https://github.com/apache/lucene-solr/commit/be79120ce79ead043ebd647e48a43a3e875dfd31", "committedDate": "2020-09-26T09:31:05Z", "message": "SOLR-14767 : fix field parsing from string values"}, "afterCommit": {"oid": "0efd1253b6a18efc3287b663cbf098ca479b8205", "author": {"user": {"login": "apoorvprecisely", "name": "Apoorv Bhawsar"}}, "url": "https://github.com/apache/lucene-solr/commit/0efd1253b6a18efc3287b663cbf098ca479b8205", "committedDate": "2020-09-26T09:34:04Z", "message": "SOLR-14767 : fix field parsing from string values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd71077c5781cbc090fcab58b7f6646fd468233b", "author": {"user": {"login": "apoorvprecisely", "name": "Apoorv Bhawsar"}}, "url": "https://github.com/apache/lucene-solr/commit/cd71077c5781cbc090fcab58b7f6646fd468233b", "committedDate": "2020-09-28T14:10:39Z", "message": "SOLR-14767 : fix field parsing from string values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72b0d4ee079be51d506537c8266d0ec8047f3b9a", "author": {"user": {"login": "munendrasn", "name": "S N Munendra"}}, "url": "https://github.com/apache/lucene-solr/commit/72b0d4ee079be51d506537c8266d0ec8047f3b9a", "committedDate": "2020-09-28T14:54:02Z", "message": "SOLR-14767: handle TrieFields and minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f77d58ac6c66408bb22991b1c49d8533ebba02fa", "author": {"user": {"login": "munendrasn", "name": "S N Munendra"}}, "url": "https://github.com/apache/lucene-solr/commit/f77d58ac6c66408bb22991b1c49d8533ebba02fa", "committedDate": "2020-09-28T15:08:59Z", "message": "SOLR-14767: add changes entry"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0efd1253b6a18efc3287b663cbf098ca479b8205", "author": {"user": {"login": "apoorvprecisely", "name": "Apoorv Bhawsar"}}, "url": "https://github.com/apache/lucene-solr/commit/0efd1253b6a18efc3287b663cbf098ca479b8205", "committedDate": "2020-09-26T09:34:04Z", "message": "SOLR-14767 : fix field parsing from string values"}, "afterCommit": {"oid": "f77d58ac6c66408bb22991b1c49d8533ebba02fa", "author": {"user": {"login": "munendrasn", "name": "S N Munendra"}}, "url": "https://github.com/apache/lucene-solr/commit/f77d58ac6c66408bb22991b1c49d8533ebba02fa", "committedDate": "2020-09-28T15:08:59Z", "message": "SOLR-14767: add changes entry"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2400, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}