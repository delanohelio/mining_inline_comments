{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NjMxNDIy", "number": 1521, "title": "Lucene-9371: Allow external access to RegExp's parsed structure", "bodyText": "The RegExp parser holds a useful representation of the parsed logic in a regular expression but does not have a public API that would allow the objects to be transformed to new forms e.g. to render to an English explanation of the logic.\nThis PR exposes that capability by making the internal fields public and final. I toyed with the idea of just adding getter methods but the internal state of this class should ideally be made immutable anyway so instead I opted for making the parsed fields final.", "createdAt": "2020-05-15T14:40:48Z", "url": "https://github.com/apache/lucene-solr/pull/1521", "merged": true, "mergeCommit": {"oid": "44fc5b989a6e6ff8d4581dd0a25174208425f3f6"}, "closed": true, "closedAt": "2020-05-19T16:38:01Z", "author": {"login": "markharwood"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchj20MABqjMzNDE0MjM5MTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABci2xFwABqjMzNTI2MTg4Mzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c3f8094a4a60c21675858ad9621a6dc005a07ed", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/apache/lucene-solr/commit/0c3f8094a4a60c21675858ad9621a6dc005a07ed", "committedDate": "2020-05-15T15:16:00Z", "message": "Added missing Javadoc"}, "afterCommit": {"oid": "64a066f68efaf9922c7c8ff4d69751c1cf7a6aa7", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/apache/lucene-solr/commit/64a066f68efaf9922c7c8ff4d69751c1cf7a6aa7", "committedDate": "2020-05-15T15:31:46Z", "message": "Make RegExp internal fields public final to allow external classes to render eg English explanations of pattern logic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "64a066f68efaf9922c7c8ff4d69751c1cf7a6aa7", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/apache/lucene-solr/commit/64a066f68efaf9922c7c8ff4d69751c1cf7a6aa7", "committedDate": "2020-05-15T15:31:46Z", "message": "Make RegExp internal fields public final to allow external classes to render eg English explanations of pattern logic"}, "afterCommit": {"oid": "538da51c3dd02560a0ab05e24626f05341fa9a18", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/apache/lucene-solr/commit/538da51c3dd02560a0ab05e24626f05341fa9a18", "committedDate": "2020-05-15T16:48:08Z", "message": "Make RegExp internal fields public final to allow external classes to render eg English explanations of pattern logic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyODczNDM2", "url": "https://github.com/apache/lucene-solr/pull/1521#pullrequestreview-412873436", "createdAt": "2020-05-15T18:26:32Z", "commit": {"oid": "538da51c3dd02560a0ab05e24626f05341fa9a18"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxODoyNjozMlrOGWPdwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxODoyNzo1N1rOGWPgpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk3NTIzNA==", "bodyText": "Can we add @lucene.experimental or @lucene.internal?\nAhh, nevermind -- the class level javadocs say so already.", "url": "https://github.com/apache/lucene-solr/pull/1521#discussion_r425975234", "createdAt": "2020-05-15T18:26:32Z", "author": {"login": "mikemccand"}, "path": "lucene/core/src/java/org/apache/lucene/util/automaton/RegExp.java", "diffHunk": "@@ -365,8 +365,43 @@\n  */\n public class RegExp {\n   \n-  enum Kind {\n-    REGEXP_UNION, REGEXP_CONCATENATION, REGEXP_INTERSECTION, REGEXP_OPTIONAL, REGEXP_REPEAT, REGEXP_REPEAT_MIN, REGEXP_REPEAT_MINMAX, REGEXP_COMPLEMENT, REGEXP_CHAR, REGEXP_CHAR_RANGE, REGEXP_ANYCHAR, REGEXP_EMPTY, REGEXP_STRING, REGEXP_ANYSTRING, REGEXP_AUTOMATON, REGEXP_INTERVAL,\n+  /**\n+   * The type of expression represented by a RegExp node.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "538da51c3dd02560a0ab05e24626f05341fa9a18"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk3NTgzMw==", "bodyText": "Can we be consistent about the spaces around =?", "url": "https://github.com/apache/lucene-solr/pull/1521#discussion_r425975833", "createdAt": "2020-05-15T18:27:42Z", "author": {"login": "mikemccand"}, "path": "lucene/core/src/java/org/apache/lucene/util/automaton/RegExp.java", "diffHunk": "@@ -468,6 +519,37 @@ public RegExp(String s, int syntax_flags) throws IllegalArgumentException {\n     from = e.from;\n     to = e.to;\n   }\n+  \n+  RegExp(Kind kind, RegExp exp1, RegExp exp2, String s, int c, int min, int max, int digits, int from, int to){    \n+    this.originalString = null;\n+    this.kind = kind;\n+    this.flags = 0;\n+    this.exp1=exp1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "538da51c3dd02560a0ab05e24626f05341fa9a18"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk3NTk3Mg==", "bodyText": "Hmm also here.  Still looking for the last permutation ...", "url": "https://github.com/apache/lucene-solr/pull/1521#discussion_r425975972", "createdAt": "2020-05-15T18:27:57Z", "author": {"login": "mikemccand"}, "path": "lucene/core/src/java/org/apache/lucene/util/automaton/RegExp.java", "diffHunk": "@@ -468,6 +519,37 @@ public RegExp(String s, int syntax_flags) throws IllegalArgumentException {\n     from = e.from;\n     to = e.to;\n   }\n+  \n+  RegExp(Kind kind, RegExp exp1, RegExp exp2, String s, int c, int min, int max, int digits, int from, int to){    \n+    this.originalString = null;\n+    this.kind = kind;\n+    this.flags = 0;\n+    this.exp1=exp1;\n+    this.exp2=exp2;\n+    this.s = s;\n+    this.c = c;\n+    this.min =min;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "538da51c3dd02560a0ab05e24626f05341fa9a18"}, "originalPosition": 109}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0Mzk4NDgy", "url": "https://github.com/apache/lucene-solr/pull/1521#pullrequestreview-414398482", "createdAt": "2020-05-19T12:35:10Z", "commit": {"oid": "d6d52699bd94a22a69cbb928e70cf49c1d7af64f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c1fec7a4335edc4af94dcdab769d3462e1d1934", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/apache/lucene-solr/commit/3c1fec7a4335edc4af94dcdab769d3462e1d1934", "committedDate": "2020-05-19T16:07:45Z", "message": "Make RegExp internal fields public final to allow external classes to render eg English explanations of pattern logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79fbb397e89618a16e187358d3a1c405e93cad2f", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/apache/lucene-solr/commit/79fbb397e89618a16e187358d3a1c405e93cad2f", "committedDate": "2020-05-19T16:07:45Z", "message": "Fix whitespace issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d6d52699bd94a22a69cbb928e70cf49c1d7af64f", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/apache/lucene-solr/commit/d6d52699bd94a22a69cbb928e70cf49c1d7af64f", "committedDate": "2020-05-18T09:25:25Z", "message": "Fix whitespace issues"}, "afterCommit": {"oid": "79fbb397e89618a16e187358d3a1c405e93cad2f", "author": {"user": {"login": "markharwood", "name": null}}, "url": "https://github.com/apache/lucene-solr/commit/79fbb397e89618a16e187358d3a1c405e93cad2f", "committedDate": "2020-05-19T16:07:45Z", "message": "Fix whitespace issues"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2528, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}