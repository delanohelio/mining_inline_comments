{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMjI2MDY0", "number": 2115, "title": "SOLR-14992 Wait for node down before checking for node up", "bodyText": "https://issues.apache.org/jira/browse/SOLR-14992", "createdAt": "2020-12-02T18:59:56Z", "url": "https://github.com/apache/lucene-solr/pull/2115", "merged": true, "mergeCommit": {"oid": "cef928171fa8962ee5c826dc831f3d6401c6a8bd"}, "closed": true, "closedAt": "2020-12-04T00:32:08Z", "author": {"login": "madrob"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiTSShAH2gAyNTMxMjI2MDY0OmVmMWI4MzMxMzBiZmMwNDEyYjQ2ZTJhYWRjNzNkOGRjMDhkNzJkZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiUMA2gFqTU0MzE5MjQ2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ef1b833130bfc0412b46e2aadc73d8dc08d72dd6", "author": {"user": null}, "url": "https://github.com/apache/lucene-solr/commit/ef1b833130bfc0412b46e2aadc73d8dc08d72dd6", "committedDate": "2020-12-02T18:58:50Z", "message": "SOLR-14992 Wait for node down before checking for node up"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMTkyNDYw", "url": "https://github.com/apache/lucene-solr/pull/2115#pullrequestreview-543192460", "createdAt": "2020-12-02T20:01:53Z", "commit": {"oid": "ef1b833130bfc0412b46e2aadc73d8dc08d72dd6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMDowMTo1M1rOH9r96Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMDowMTo1M1rOH9r96Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDQ0NTU0NQ==", "bodyText": "Wouldn't it be better to actually check for the node znode ctime? Or maybe a bump in /live_nodes's cversion?", "url": "https://github.com/apache/lucene-solr/pull/2115#discussion_r534445545", "createdAt": "2020-12-02T20:01:53Z", "author": {"login": "tflobbe"}, "path": "solr/core/src/test/org/apache/solr/cloud/TestPullReplicaErrorHandling.java", "diffHunk": "@@ -236,8 +237,9 @@ public void testCloseHooksDeletedOnReconnect() throws Exception {\n     JettySolrRunner jetty = getJettyForReplica(s.getReplicas(EnumSet.of(Replica.Type.PULL)).get(0));\n     SolrCore core = jetty.getCoreContainer().getCores().iterator().next();\n \n-    for (int i = 0; i < 5; i++) {\n+    for (int i = 0; i < (TEST_NIGHTLY ? 5 : 2); i++) {\n       cluster.expireZkSession(jetty);\n+      waitForState(\"Expecting node to be disconnected\", collectionName, activeReplicaCount(1, 0, 0));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef1b833130bfc0412b46e2aadc73d8dc08d72dd6"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2388, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}