{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MTk4MTU2", "number": 1141, "title": "SOLR-14147 change the Security manager to default to true.", "bodyText": "Description\nChange the Security Manager to default to true.\nSolution\nChanged the boolean values.\nTests\nNo tests are affected.\nChecklist\nPlease review the following and check all that apply:\n\n I have reviewed the guidelines for How to Contribute and my code conforms to the standards described there to the best of my ability.\n @rmuir has created a Jira issue and I added the issue ID to my pull request title.\n I have given Solr maintainers access to contribute to my PR branch. (optional but recommended)\n I have developed this patch against the master branch.\n I have run ant precommit and the appropriate test suite.\n I have added tests for my changes.\n I have added documentation for the Ref Guide (for Solr changes only).", "createdAt": "2020-01-04T09:15:22Z", "url": "https://github.com/apache/lucene-solr/pull/1141", "merged": true, "mergeCommit": {"oid": "bc5f837344a32b7795bd1d727251e639b33056c0"}, "closed": true, "closedAt": "2020-02-06T00:17:56Z", "author": {"login": "MarcusSorealheis"}, "timelineItems": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2_TIGgH2gAyMzU5MTk4MTU2Ojc1Nzc2ZDg0ZDc5YWJhYzQ5ODljNzMxNjEwZTljYzVjNThlNTkwOGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBb61DAH2gAyMzU5MTk4MTU2OmJhNmNjZmMyMjA0MTJiM2FiZmM3ODI3MmZiZWEwNDg2ZTFmNzkzMTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "75776d84d79abac4989c731610e9cc5c58e5908b", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/75776d84d79abac4989c731610e9cc5c58e5908b", "committedDate": "2020-01-04T09:11:45Z", "message": "change the Security manager to default."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b2ef8daebf9c656f0631e949a32c2df7b821c32", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/5b2ef8daebf9c656f0631e949a32c2df7b821c32", "committedDate": "2020-01-04T09:23:05Z", "message": "update the ref-guide."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41c91d9e4a87aa2149c34fa533c7396f030e78b2", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/41c91d9e4a87aa2149c34fa533c7396f030e78b2", "committedDate": "2020-01-04T18:34:40Z", "message": "uncomment init scripts update changes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Mzc5MzU2", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-338379356", "createdAt": "2020-01-05T03:29:55Z", "commit": {"oid": "41c91d9e4a87aa2149c34fa533c7396f030e78b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMzoyOTo1NVrOFaP3bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMzoyOTo1NVrOFaP3bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2NzI0NA==", "bodyText": "We shouldn't put uncommented values in these files. After all, it says at the very top of the file:\n\nThe default shipped state of this file is completely commented.\n\nInstead, lets fix the actual defaults for the scripts. It just means if the environment variable is not set, we want to set it to true. Here is an example that does that for a different change, but demonstrates the idea: https://issues.apache.org/jira/secure/attachment/12989428/SOLR-14142.patch", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r363067244", "createdAt": "2020-01-05T03:29:55Z", "author": {"login": "rmuir"}, "path": "solr/bin/solr.in.sh", "diffHunk": "@@ -229,4 +229,4 @@\n # Runtime properties are passed to the security policy file (server/etc/security.policy)\n # You can also tweak via standard JDK files such as ~/.java.policy, see https://s.apache.org/java8policy\n # This is experimental! It may not work at all with Hadoop/HDFS features.\n-#SOLR_SECURITY_MANAGER_ENABLED=false\n+SOLR_SECURITY_MANAGER_ENABLED=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41c91d9e4a87aa2149c34fa533c7396f030e78b2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Mzc5Mzcw", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-338379370", "createdAt": "2020-01-05T03:30:43Z", "commit": {"oid": "41c91d9e4a87aa2149c34fa533c7396f030e78b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMzozMDo0M1rOFaP3ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQwMzozMDo0M1rOFaP3ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA2NzI1OQ==", "bodyText": "I think we want to remove this whole section from this documentation page. If we fix the default here, then it is one less step the user has to worry about. Can we find a better place to document this hadoop stuff?", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r363067259", "createdAt": "2020-01-05T03:30:43Z", "author": {"login": "rmuir"}, "path": "solr/solr-ref-guide/src/securing-solr.adoc", "diffHunk": "@@ -97,4 +97,4 @@ It is also strongly recommended that Solr listen to only those network interface\n \n == Enable Security Manager\n \n-Solr can run in a Java Security Manager sandbox by setting `SOLR_SECURITY_MANAGER_ENABLED=true` via environment variable or in `solr.in.sh`/`solr.in.cmd`. This feature is incompatible with Hadoop.\n+Solr runs in a Java Security Manager sandbox by default. Since this feature is incompatible with Hadoop, you can disable it by setting `SOLR_SECURITY_MANAGER_ENABLED=false` via environment variable or in `solr.in.sh`/`solr.in.cmd` if you are running Solr with Hadoop.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41c91d9e4a87aa2149c34fa533c7396f030e78b2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b9212898d8652756c1614e3d7254a5480bf3145", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/1b9212898d8652756c1614e3d7254a5480bf3145", "committedDate": "2020-01-05T08:37:33Z", "message": "changed the ref guide and re-commented file."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b4bd6649c4175d7395145283e8a25e8d28ec4b3", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/6b4bd6649c4175d7395145283e8a25e8d28ec4b3", "committedDate": "2020-01-05T22:33:40Z", "message": "remove added comment."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c20c47d906a15fa08f6f229bfeb2bd4676907ebe", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/c20c47d906a15fa08f6f229bfeb2bd4676907ebe", "committedDate": "2020-01-05T23:00:48Z", "message": "modified shell script."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "886d938caab7bafc41e42b869d09c5a832782257", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/886d938caab7bafc41e42b869d09c5a832782257", "committedDate": "2020-01-05T23:18:31Z", "message": "removed comment in windows file.\n\nSigned-off-by: marcussorealheis <marcuseagan@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NDM3MTA1", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-338437105", "createdAt": "2020-01-06T01:21:09Z", "commit": {"oid": "886d938caab7bafc41e42b869d09c5a832782257"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQwMToyMTowOVrOFaT2SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQwMToyMTowOVrOFaT2SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEzMjQ4OA==", "bodyText": "I think we may prefer the bashism of if [ \"${SOLR_SECURITY_MANAGER_ENABLED:-true}\" == \"true\" ] for consistency elsewhere in the script. it makes it clear that if its undefined, it will default to true.\nthe windows file solr.cmd needs to be changed too. Currently this pull request doesn't change anything for windows. for windows CMD, I think it is clearest to just put a IF NOT DEFINED before the check. see that linked patch for an example.", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r363132488", "createdAt": "2020-01-06T01:21:09Z", "author": {"login": "rmuir"}, "path": "solr/bin/solr", "diffHunk": "@@ -2084,14 +2084,14 @@ else\n   REMOTE_JMX_OPTS=()\n fi\n \n-# Enable java security manager (limiting filesystem access and other things)\n-if [ \"$SOLR_SECURITY_MANAGER_ENABLED\" == \"true\" ]; then\n+# Disable java security manager (allowing filesystem access and other things)\n+if [ \"$SOLR_SECURITY_MANAGER_ENABLED\" == \"false\" ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "886d938caab7bafc41e42b869d09c5a832782257"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95cd376ea639fbb09b002d9428fb3ceef47d91e6", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/95cd376ea639fbb09b002d9428fb3ceef47d91e6", "committedDate": "2020-01-06T02:19:54Z", "message": "bashism and fix windows"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcf334f394d88bab0c26566afc7cc40ca4d251ca", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/fcf334f394d88bab0c26566afc7cc40ca4d251ca", "committedDate": "2020-01-06T05:06:37Z", "message": "remove space\n\nSigned-off-by: marcussorealheis <marcuseagan@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "409390ff6fcfa5032ce367d7bc0aada531a4d31f", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/409390ff6fcfa5032ce367d7bc0aada531a4d31f", "committedDate": "2020-01-06T05:18:05Z", "message": "typo."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f59a78b98357bba6326f5c641ac2e03a610dcd8b", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/f59a78b98357bba6326f5c641ac2e03a610dcd8b", "committedDate": "2020-01-09T21:31:10Z", "message": "Merge branch 'master' into SOLR-14147_enable_security_man_default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e71eec100069eae28510b81537af0536f5267b03", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/e71eec100069eae28510b81537af0536f5267b03", "committedDate": "2020-01-13T22:09:18Z", "message": "Merge branch 'master' into SOLR-14147_enable_security_man_default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50814e31e041bb0a3943b728f197eb7177ea6041", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/50814e31e041bb0a3943b728f197eb7177ea6041", "committedDate": "2020-01-21T09:28:05Z", "message": "Merge branch 'master' into SOLR-14147_enable_security_man_default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODYxMzMz", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-351861333", "createdAt": "2020-02-01T02:59:53Z", "commit": {"oid": "50814e31e041bb0a3943b728f197eb7177ea6041"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo1OTo1NFrOFkcFqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo1OTo1NFrOFkcFqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1MzI1OQ==", "bodyText": "i think these are just formatting differences, can we nuke them?", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r373753259", "createdAt": "2020-02-01T02:59:54Z", "author": {"login": "rmuir"}, "path": "solr/bin/solr.cmd", "diffHunk": "@@ -1190,12 +1190,11 @@ IF \"%ENABLE_REMOTE_JMX_OPTS%\"==\"true\" (\n REM Enable java security manager by default (limiting filesystem access and other things)\n IF NOT DEFINED SOLR_SECURITY_MANAGER_ENABLED (\n   set SOLR_SECURITY_MANAGER_ENABLED=true && set SECURITY_MANAGER_OPTS=-Djava.security.manager ^\n--Djava.security.policy=\"%SOLR_SERVER_DIR%\\etc\\security.policy\" ^\n--Djava.security.properties=\"%SOLR_SERVER_DIR%\\etc\\security.properties\" ^\n--Dsolr.internal.network.permission=*\n+    -Djava.security.policy=\"%SOLR_SERVER_DIR%\\etc\\security.policy\" ^\n+    -Djava.security.properties=\"%SOLR_SERVER_DIR%\\etc\\security.properties\" ^\n+    -Dsolr.internal.network.permission=*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50814e31e041bb0a3943b728f197eb7177ea6041"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODYxNTQ4", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-351861548", "createdAt": "2020-02-01T03:04:22Z", "commit": {"oid": "50814e31e041bb0a3943b728f197eb7177ea6041"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMzowNDoyMlrOFkcGnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMzowNDoyMlrOFkcGnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1MzUwMA==", "bodyText": "I think this logic may be reversed. It is true (or unset, in which case it defaults to true), we want to enable the thing. It can be seen from looking quickly at the admin UI at system properties, to determine if you correctly enabled this setting. you will see java.security.manager flag set in the system properties part of the admin UI.", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r373753500", "createdAt": "2020-02-01T03:04:22Z", "author": {"login": "rmuir"}, "path": "solr/bin/solr", "diffHunk": "@@ -2086,14 +2086,14 @@ else\n   REMOTE_JMX_OPTS=()\n fi\n \n-# Enable java security manager (limiting filesystem access and other things)\n-if [ \"$SOLR_SECURITY_MANAGER_ENABLED\" == \"true\" ]; then\n+# Disable java security manager (allowing filesystem access and other things)\n+if [ \"${SOLR_SECURITY_MANAGER_ENABLED:-true}\" == \"true\" ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50814e31e041bb0a3943b728f197eb7177ea6041"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODYxNjM4", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-351861638", "createdAt": "2020-02-01T03:06:25Z", "commit": {"oid": "50814e31e041bb0a3943b728f197eb7177ea6041"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMzowNjoyNlrOFkcG-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMzowNjoyNlrOFkcG-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1MzU5NA==", "bodyText": "to keep the .cmd logic simple, we may just want to set the environment variable, if it is not already set. It limits the changes to what we want to do (changing the default) with just a simple if-statement. And we can avoid wrestling with any of the other parts of this CMD file :)", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r373753594", "createdAt": "2020-02-01T03:06:26Z", "author": {"login": "rmuir"}, "path": "solr/bin/solr.cmd", "diffHunk": "@@ -1187,12 +1187,12 @@ IF \"%ENABLE_REMOTE_JMX_OPTS%\"==\"true\" (\n   set REMOTE_JMX_OPTS=\n )\n \n-REM Enable java security manager (limiting filesystem access and other things)\n-IF \"%SOLR_SECURITY_MANAGER_ENABLED%\"==\"true\" (\n-  set SECURITY_MANAGER_OPTS=-Djava.security.manager ^\n--Djava.security.policy=\"%SOLR_SERVER_DIR%\\etc\\security.policy\" ^\n--Djava.security.properties=\"%SOLR_SERVER_DIR%\\etc\\security.properties\" ^\n--Dsolr.internal.network.permission=*\n+REM Enable java security manager by default (limiting filesystem access and other things)\n+IF NOT DEFINED SOLR_SECURITY_MANAGER_ENABLED (", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50814e31e041bb0a3943b728f197eb7177ea6041"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "242e83e039552e4d33bbd6627e3bc38d46a157fa", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/242e83e039552e4d33bbd6627e3bc38d46a157fa", "committedDate": "2020-02-01T04:29:15Z", "message": "merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a6511430b6c10d60b01e0069d8611e18f3bf624", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/7a6511430b6c10d60b01e0069d8611e18f3bf624", "committedDate": "2020-02-01T04:29:38Z", "message": "Merge branch 'SOLR-14147_enable_security_man_default' of github.com:MarcusSorealheis/lucene-solr into SOLR-14147_enable_security_man_default\n\n* 'SOLR-14147_enable_security_man_default' of github.com:MarcusSorealheis/lucene-solr:\n  typo.\n  remove space\n  bashism and fix windows\n  removed comment in windows file."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c566bf9367eff552a45a6c24d9574d6823b78c17", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/c566bf9367eff552a45a6c24d9574d6823b78c17", "committedDate": "2020-02-01T04:38:00Z", "message": "removed formatting issue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8aa51874c512b51e9775d8ae0cc9a6f7f444f61", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/f8aa51874c512b51e9775d8ae0cc9a6f7f444f61", "committedDate": "2020-02-01T04:51:23Z", "message": "simplify."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b863cc0b1af7cc3c1e794d3b9cf08cf1d79b6a5e", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/b863cc0b1af7cc3c1e794d3b9cf08cf1d79b6a5e", "committedDate": "2020-02-01T05:40:54Z", "message": "fix shell script"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODg4MzI1", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-351888325", "createdAt": "2020-02-01T15:03:50Z", "commit": {"oid": "b863cc0b1af7cc3c1e794d3b9cf08cf1d79b6a5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxNTowMzo1MFrOFkd_UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxNTowMzo1MFrOFkd_UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc4NDQwMQ==", "bodyText": "Sorry, maybe my comment was confusing, this logic is not correct. we need two \"IF\".\nWe don't need to change anything about the existing logic, but we need to introduce a new IF above it to set the default. something like this:\nREM Enable by default (if the variable is not set by the user, we set it to true)\nIF NOT DEFINED SOLR_SECURITY_MANAGER_ENABLED(\n  set SOLR_SECURITY_MANAGER_ENABLED=true\n)\n...\nREM Existing logic in master (Unchanged)\nIF \"%SOLR_SECURITY_MANAGER_ENABLED%\"==\"true\" (\n ...", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r373784401", "createdAt": "2020-02-01T15:03:50Z", "author": {"login": "rmuir"}, "path": "solr/bin/solr.cmd", "diffHunk": "@@ -1187,8 +1187,8 @@ IF \"%ENABLE_REMOTE_JMX_OPTS%\"==\"true\" (\n   set REMOTE_JMX_OPTS=\n )\n \n-REM Enable java security manager (limiting filesystem access and other things)\n-IF \"%SOLR_SECURITY_MANAGER_ENABLED%\"==\"true\" (\n+REM Enable java security manager by default (limiting filesystem access and other things)\n+IF NOT DEFINED SOLR_SECURITY_MANAGER_ENABLED (", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b863cc0b1af7cc3c1e794d3b9cf08cf1d79b6a5e"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODg4NDg2", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-351888486", "createdAt": "2020-02-01T15:08:01Z", "commit": {"oid": "b863cc0b1af7cc3c1e794d3b9cf08cf1d79b6a5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxNTowODowMlrOFkeAEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxNTowODowMlrOFkeAEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc4NDU5NQ==", "bodyText": "as a matter of style/consistency i would reverse this so we are comparing with \"true\", and change the comment back to \"Enable\" from \"Disable\". I think it is easier on the brain to think about positives (not the negatives).\nso something like this pseudocode:\n# Enable java security manager (limiting filesystem access and other things)\nif [ \"$SOLR_SECURITY_MANAGER_ENABLED:-true\" == \"true\" ]; then\n  SECURITY_MANAGER_OPTS=('-Djava.security.manager' \\\n    \"-Djava.security.policy=${SOLR_SERVER_DIR}/etc/security.policy\" \\\n    \"-Djava.security.properties=${SOLR_SERVER_DIR}/etc/security.properties\" \\\n    '-Dsolr.internal.network.permission=*')\nelse\n  SECURITY_MANAGER_OPTS=()\nfi\n\nEssentially the same as existing logic, we just add the :-true so that if the variable is not set by the user in any way, we default its value to true.", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r373784595", "createdAt": "2020-02-01T15:08:02Z", "author": {"login": "rmuir"}, "path": "solr/bin/solr", "diffHunk": "@@ -2086,14 +2086,14 @@ else\n   REMOTE_JMX_OPTS=()\n fi\n \n-# Enable java security manager (limiting filesystem access and other things)\n-if [ \"$SOLR_SECURITY_MANAGER_ENABLED\" == \"true\" ]; then\n+# Disable java security manager (allowing filesystem access and other things)\n+if [ \"${SOLR_SECURITY_MANAGER_ENABLED:-true}\" == \"false\" ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b863cc0b1af7cc3c1e794d3b9cf08cf1d79b6a5e"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dfd37eb83e0651cbbeabb3f17d001465b28f8f1", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/7dfd37eb83e0651cbbeabb3f17d001465b28f8f1", "committedDate": "2020-02-04T06:43:26Z", "message": "simplify unix and fix other."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMDY1NjQy", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-353065642", "createdAt": "2020-02-04T15:26:07Z", "commit": {"oid": "7dfd37eb83e0651cbbeabb3f17d001465b28f8f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNToyNjowN1rOFlYQzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNToyNjowN1rOFlYQzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDczOTE1MA==", "bodyText": "I think there may have been an issue with merging here. I see a lot of this network-related content duplicated now.", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r374739150", "createdAt": "2020-02-04T15:26:07Z", "author": {"login": "rmuir"}, "path": "solr/solr-ref-guide/src/securing-solr.adoc", "diffHunk": "@@ -95,6 +94,15 @@ It is also strongly recommended that Solr listen to only those network interface\n  ----\n // end::security-network-binding-1[]\n \n-== Enable Security Manager\n+// tag::security-network-binding-1[]\n+Administrators should consider their security setup carefully as an important step in moving to production.  Solr provides a number of features out of the box to meet the security needs of users: authentication and authorization can be configured using a range of security plugins, privacy can be bolstered by enabling SSL/TLS, and (in SolrCloud) ZooKeeper data can be protected with ACL rules to prevent unauthorized reads and writes.\n+\n+Even if these measures or others are taken, it is strongly recommended that Solr always be protected by a firewall.  Solr is not designed to be exposed on the open internet.\n \n-Solr can run in a Java Security Manager sandbox by setting `SOLR_SECURITY_MANAGER_ENABLED=true` via environment variable or in `solr.in.sh`/`solr.in.cmd`. This feature is incompatible with Hadoop.\n+It is also strongly recommended that Solr listen to only those network interfaces that are strictly required.  To prevent administrators from unintentionally exposing Solr more broadly, Solr only listens on the loopback interface (\"127.0.0.1\") by default.  Most deployments will need to change this value to something less restrictive so that it can be reached from other boxes.  This can be done by setting a `SOLR_JETTY_HOST` value in your environment's \"include script\" (`solr.in.sh` or `solr.in.cmd`):\n+\n+[source,bash]\n+ ----\n+ SOLR_JETTY_HOST=\"0.0.0.0\"\n+ ----\n+// end::security-network-binding-1[]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7dfd37eb83e0651cbbeabb3f17d001465b28f8f1"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMDc3MTU2", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-353077156", "createdAt": "2020-02-04T15:39:27Z", "commit": {"oid": "7dfd37eb83e0651cbbeabb3f17d001465b28f8f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNTozOToyN1rOFlYy5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxNTozOToyN1rOFlYy5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDc0Nzg3Nw==", "bodyText": "I suggest to reword this slightly in the first sentence to a more generic description: \"... now runs with java security manager enabled by default\". This way users know what it does (even if they don't know that configuration parameter).\nFor the second sentence, I would tweak wording from \"disable this feature via...\" to \"set   SOLR_SECURITY_MANAGER_ENABLED=false via...\". It matches the actual variable name and gives them the little snippet they need, in case they need to do it.", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r374747877", "createdAt": "2020-02-04T15:39:27Z", "author": {"login": "rmuir"}, "path": "solr/CHANGES.txt", "diffHunk": "@@ -81,7 +81,9 @@ Upgrade Notes\n * SOLR-13985: Solr's Jetty now binds to localhost network interface by default for better out of the box security.\n   Administrators that need Solr exposed more broadly can change the SOLR_JETTY_HOST property in their Solr include\n   (solr.in.sh/solr.in.cmd) file. (Jason Gerlowski, David Smiley, Robert Muir)\n-  \n+\n+* SOLR-14147: Solr now runs with the SOLR_SECURITY_MANAGER enabled by default. Administrators that need to run Solr with Hadoop will need to disable this feature via environment variable or in one of the Solr init scripts. Other features in Solr could also break. (Robert Muir, marcussorealheis) ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7dfd37eb83e0651cbbeabb3f17d001465b28f8f1"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e55b65e70c07e1044d51f8170a473ec99d35805b", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/e55b65e70c07e1044d51f8170a473ec99d35805b", "committedDate": "2020-02-04T18:43:35Z", "message": "improving documentation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1c516b28778b134b235c521edf5c3ae38b4166b", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/b1c516b28778b134b235c521edf5c3ae38b4166b", "committedDate": "2020-02-04T21:41:05Z", "message": "merge issues resolved."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNDA2ODc1", "url": "https://github.com/apache/lucene-solr/pull/1141#pullrequestreview-353406875", "createdAt": "2020-02-05T00:59:03Z", "commit": {"oid": "b1c516b28778b134b235c521edf5c3ae38b4166b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwMDo1OTowM1rOFlosLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwMDo1OTowM1rOFlosLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTAwODMwMQ==", "bodyText": "i think wording 'in the environment' may work better than 'as an argument to the start command'? From doing development work, I always think of the term \"arguments\" being strongly associated with program's parameters placed after the command (e.g. argc/argv in C, args[] in java, etc), but doing this won't work with these scripts.", "url": "https://github.com/apache/lucene-solr/pull/1141#discussion_r375008301", "createdAt": "2020-02-05T00:59:03Z", "author": {"login": "rmuir"}, "path": "solr/CHANGES.txt", "diffHunk": "@@ -81,7 +81,9 @@ Upgrade Notes\n * SOLR-13985: Solr's Jetty now binds to localhost network interface by default for better out of the box security.\n   Administrators that need Solr exposed more broadly can change the SOLR_JETTY_HOST property in their Solr include\n   (solr.in.sh/solr.in.cmd) file. (Jason Gerlowski, David Smiley, Robert Muir)\n-  \n+\n+* SOLR-14147: Solr now runs with the java security manager enabled by default. Administrators that need to run Solr with Hadoop will need to disable this feature by setting SOLR_SECURITY_MANAGER=false as an argument to the start command or in one of the Solr init scripts. Other features in Solr could also break. (Robert Muir, marcussorealheis) ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1c516b28778b134b235c521edf5c3ae38b4166b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba6ccfc220412b3abfc78272fbea0486e1f79315", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/ba6ccfc220412b3abfc78272fbea0486e1f79315", "committedDate": "2020-02-05T20:11:42Z", "message": "fixed README"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2346, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}