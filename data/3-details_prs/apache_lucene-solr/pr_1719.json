{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNzEwNzQ3", "number": 1719, "title": "SOLR-14702: Remove Master and Slave from Code Base and Docs (8.x)", "bodyText": "This PR brings the changes from #1711 into 8.x and add a commit to bring back compatibility. With this code change, a Solr instance running 8.7 should be able to replicate from a Solr instance running 8.x < 8.7, and a Solr instance running 9.0 should be able to replicate from an instance running 8.7\nSome manual testing to check before merging this is listed here: https://issues.apache.org/jira/browse/SOLR-14708\nI haven't validated the UI yet.\nI kept the \"bring back compatibility\" changes in a single commit to make it easier to review the changes.\nCC @MarcusSorealheis", "createdAt": "2020-08-06T00:24:37Z", "url": "https://github.com/apache/lucene-solr/pull/1719", "merged": true, "mergeCommit": {"oid": "f0eef2270cc5d2659a0f837760415dbb80fa0c2c"}, "closed": true, "closedAt": "2020-08-07T23:10:57Z", "author": {"login": "tflobbe"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8C-RdAH2gAyNDYzNzEwNzQ3OjAwZWJiOTQxYzcyOTZiODNlZGRkMjI5MjljZGUzNDY3Y2Q3YTAyNjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8GpwvgFqTQ2MjE0OTg5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "00ebb941c7296b83eddd22929cde3467cd7a0264", "author": {"user": {"login": "MarcusSorealheis", "name": "Marcus"}}, "url": "https://github.com/apache/lucene-solr/commit/00ebb941c7296b83eddd22929cde3467cd7a0264", "committedDate": "2020-08-05T22:29:22Z", "message": "SOLR-14702: Remove oppressive language (part1) (#1711)\n\nReplace references to \"master\" and \"slave\" with \"leader\" and \"follower\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fd500e70f30b191a75ba32a7313061f8715b2ef", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/9fd500e70f30b191a75ba32a7313061f8715b2ef", "committedDate": "2020-08-05T22:32:09Z", "message": "SOLR-14702: doFetch reads legacy parameters too"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "748fb4dc32a2b9cd2e720cf5b3c224a96d6de50f", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/748fb4dc32a2b9cd2e720cf5b3c224a96d6de50f", "committedDate": "2020-08-05T23:46:17Z", "message": "Add compatibility with 8.x versions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMTA5MDk2", "url": "https://github.com/apache/lucene-solr/pull/1719#pullrequestreview-462109096", "createdAt": "2020-08-06T00:26:43Z", "commit": {"oid": "748fb4dc32a2b9cd2e720cf5b3c224a96d6de50f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDoyNjo0M1rOG8fB1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDoyNjo0M1rOG8fB1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3NjExOA==", "bodyText": "I left this intentionally using the new parameters because this configuration is only read locally", "url": "https://github.com/apache/lucene-solr/pull/1719#discussion_r466076118", "createdAt": "2020-08-06T00:26:43Z", "author": {"login": "tflobbe"}, "path": "solr/core/src/java/org/apache/solr/cloud/ReplicateFromLeader.java", "diffHunk": "@@ -76,12 +76,12 @@ public void startReplication(boolean switchTransactionLog) throws InterruptedExc\n       }\n       log.info(\"Will start replication from leader with poll interval: {}\", pollIntervalStr );\n \n-      NamedList<Object> slaveConfig = new NamedList<>();\n-      slaveConfig.add(\"fetchFromLeader\", Boolean.TRUE);\n-      slaveConfig.add(ReplicationHandler.SKIP_COMMIT_ON_MASTER_VERSION_ZERO, switchTransactionLog);\n-      slaveConfig.add(\"pollInterval\", pollIntervalStr);\n+      NamedList<Object> followerConfig = new NamedList<>();\n+      followerConfig.add(\"fetchFromLeader\", Boolean.TRUE);\n+      followerConfig.add(ReplicationHandler.SKIP_COMMIT_ON_LEADER_VERSION_ZERO, switchTransactionLog);\n+      followerConfig.add(\"pollInterval\", pollIntervalStr);\n       NamedList<Object> replicationConfig = new NamedList<>();\n-      replicationConfig.add(\"slave\", slaveConfig);\n+      replicationConfig.add(\"follower\", followerConfig);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "748fb4dc32a2b9cd2e720cf5b3c224a96d6de50f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMTQ5ODkz", "url": "https://github.com/apache/lucene-solr/pull/1719#pullrequestreview-462149893", "createdAt": "2020-08-06T02:45:07Z", "commit": {"oid": "748fb4dc32a2b9cd2e720cf5b3c224a96d6de50f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMjo0NTowN1rOG8hSUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMjo0NTowN1rOG8hSUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjExMzEwNg==", "bodyText": "It should be left intentionally. It comes from the leader, right?", "url": "https://github.com/apache/lucene-solr/pull/1719#discussion_r466113106", "createdAt": "2020-08-06T02:45:07Z", "author": {"login": "MarcusSorealheis"}, "path": "solr/core/src/java/org/apache/solr/cloud/ReplicateFromLeader.java", "diffHunk": "@@ -76,12 +76,12 @@ public void startReplication(boolean switchTransactionLog) throws InterruptedExc\n       }\n       log.info(\"Will start replication from leader with poll interval: {}\", pollIntervalStr );\n \n-      NamedList<Object> slaveConfig = new NamedList<>();\n-      slaveConfig.add(\"fetchFromLeader\", Boolean.TRUE);\n-      slaveConfig.add(ReplicationHandler.SKIP_COMMIT_ON_MASTER_VERSION_ZERO, switchTransactionLog);\n-      slaveConfig.add(\"pollInterval\", pollIntervalStr);\n+      NamedList<Object> followerConfig = new NamedList<>();\n+      followerConfig.add(\"fetchFromLeader\", Boolean.TRUE);\n+      followerConfig.add(ReplicationHandler.SKIP_COMMIT_ON_LEADER_VERSION_ZERO, switchTransactionLog);\n+      followerConfig.add(\"pollInterval\", pollIntervalStr);\n       NamedList<Object> replicationConfig = new NamedList<>();\n-      replicationConfig.add(\"slave\", slaveConfig);\n+      replicationConfig.add(\"follower\", followerConfig);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA3NjExOA=="}, "originalCommit": {"oid": "748fb4dc32a2b9cd2e720cf5b3c224a96d6de50f"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2319, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}