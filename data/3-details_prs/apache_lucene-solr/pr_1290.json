{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMTYwODIx", "number": 1290, "title": "LUCENE-9251: Filter equal edges with different value on isEdgeFromPolygon", "bodyText": "See https://issues.apache.org/jira/browse/LUCENE-9251\nUnfortunately, I haven't been able to produce a meaningful unit test as I can only reproduce the issue with the complex polygon provided by the user. Still I think the change make sense.", "createdAt": "2020-02-26T11:08:32Z", "url": "https://github.com/apache/lucene-solr/pull/1290", "merged": true, "mergeCommit": {"oid": "c313365c5ffe76192e6179f3dfe23d056f7076c5"}, "closed": true, "closedAt": "2020-03-03T06:07:35Z", "author": {"login": "iverase"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIErahgH2gAyMzgwMTYwODIxOjNjZDBiMzgxNjQ1NTI2MDIxYTUwYzFiOGEwYWI1ZjljMjFiYWVkMjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJ7xssgH2gAyMzgwMTYwODIxOjc0YzVhYTUxMmFkNGM5NzIwNmZiOGZjNTFkNzZjYTEyZjQxZTYyY2Q=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3cd0b381645526021a50c1b8a0ab5f9c21baed20", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/apache/lucene-solr/commit/3cd0b381645526021a50c1b8a0ab5f9c21baed20", "committedDate": "2020-02-26T11:04:31Z", "message": "Filter equal edges with different value on isEdgeFromPolygon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68f71e9b575d53f6b7f68e084a18277a03396082", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/apache/lucene-solr/commit/68f71e9b575d53f6b7f68e084a18277a03396082", "committedDate": "2020-02-26T11:06:42Z", "message": "typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NjU5NTQ0", "url": "https://github.com/apache/lucene-solr/pull/1290#pullrequestreview-366659544", "createdAt": "2020-02-28T20:15:50Z", "commit": {"oid": "68f71e9b575d53f6b7f68e084a18277a03396082"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQyMDoxNTo1MFrOFwBnaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQyMDoxNTo1MFrOFwBnaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTkwMjQ0MQ==", "bodyText": "nit: remove comment", "url": "https://github.com/apache/lucene-solr/pull/1290#discussion_r385902441", "createdAt": "2020-02-28T20:15:50Z", "author": {"login": "nknize"}, "path": "lucene/core/src/java/org/apache/lucene/geo/Tessellator.java", "diffHunk": "@@ -915,13 +914,14 @@ private static final Node filterPoints(final Node start, Node end) {\n       continueIteration = false;\n       nextNode = node.next;\n       prevNode = node.previous;\n-      //We can filter points when they are the same, if not and they are co-linear we can only\n-      //remove it if both edges have the same value in .isNextEdgeFromPolygon\n-      if (isVertexEquals(node, nextNode)  ||\n-          (prevNode.isNextEdgeFromPolygon == node.isNextEdgeFromPolygon &&\n+      // we can filter points when:\n+      if (isVertexEquals(node, nextNode)  ||   // 1. they are the same,\n+         // isVertexEquals(prevNode, nextNode) || // 2.- each one starts and ends in each other", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68f71e9b575d53f6b7f68e084a18277a03396082"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ca800b60b5cc457e7bb17fa399f92e5b2c54463", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/apache/lucene-solr/commit/0ca800b60b5cc457e7bb17fa399f92e5b2c54463", "committedDate": "2020-02-29T08:32:36Z", "message": "remove comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e72fc24659f405e43cf385ea1660b10011047bb8", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/apache/lucene-solr/commit/e72fc24659f405e43cf385ea1660b10011047bb8", "committedDate": "2020-03-02T15:48:18Z", "message": "Add test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07c6dcff92b0794320daf9543ce1324eb1a76a2a", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/apache/lucene-solr/commit/07c6dcff92b0794320daf9543ce1324eb1a76a2a", "committedDate": "2020-03-02T15:50:02Z", "message": "set nightly"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NTU3NzQ3", "url": "https://github.com/apache/lucene-solr/pull/1290#pullrequestreview-367557747", "createdAt": "2020-03-02T21:56:03Z", "commit": {"oid": "07c6dcff92b0794320daf9543ce1324eb1a76a2a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMTo1NjowNFrOFwwv5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMTo1NjowNFrOFwwv5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3NDY2MQ==", "bodyText": "nice!", "url": "https://github.com/apache/lucene-solr/pull/1290#discussion_r386674661", "createdAt": "2020-03-02T21:56:04Z", "author": {"login": "nknize"}, "path": "lucene/core/src/test/org/apache/lucene/geo/TestTessellator.java", "diffHunk": "@@ -561,6 +561,18 @@ public void testComplexPolygon39() throws Exception {\n     checkPolygon(wkt);\n   }\n \n+  @Nightly\n+  public void testComplexPolygon40() throws Exception {\n+    String wkt = GeoTestUtil.readShape(\"lucene-9251.wkt.gz\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07c6dcff92b0794320daf9543ce1324eb1a76a2a"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "148df5d3fbcbea9d4df5be72e2fc46fb91d4bb4d", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/apache/lucene-solr/commit/148df5d3fbcbea9d4df5be72e2fc46fb91d4bb4d", "committedDate": "2020-03-03T05:47:16Z", "message": "Merge branch 'master' into tessellatorError"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74c5aa512ad4c97206fb8fc51d76ca12f41e62cd", "author": {"user": {"login": "iverase", "name": "Ignacio Vera"}}, "url": "https://github.com/apache/lucene-solr/commit/74c5aa512ad4c97206fb8fc51d76ca12f41e62cd", "committedDate": "2020-03-03T05:50:05Z", "message": "Add entry in CHANGES.txt"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2149, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}