{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNjA2OTk5", "number": 1905, "title": "LUCENE-9488 Release with Gradle Part 2", "bodyText": "Deleted lucene/version.properties again", "createdAt": "2020-09-21T23:13:43Z", "url": "https://github.com/apache/lucene-solr/pull/1905", "merged": true, "mergeCommit": {"oid": "08e38d3452d548189edba691c2853b63b1fa55ae"}, "closed": true, "closedAt": "2020-10-08T19:25:51Z", "author": {"login": "madrob"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLSTgcAFqTQ5MzE2NTYzOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQUGaqAH2gAyNDkwNjA2OTk5OjlmMGEwYmU4ODE3YTc2ODg2NWI1ODNhN2JhNThjMzIyZTYzMTA3YjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMTY1NjM4", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-493165638", "createdAt": "2020-09-22T06:48:38Z", "commit": {"oid": "6e4d365c50edb003967a85418b4d02e307a24d1e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNjo0ODozOFrOHVsPiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNjo0OTo0OVrOHVsRbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUwNzAxOQ==", "bodyText": "Yes, please move it to :lucene:packaging. It makes things much cleaner in the long run.", "url": "https://github.com/apache/lucene-solr/pull/1905#discussion_r492507019", "createdAt": "2020-09-22T06:48:38Z", "author": {"login": "dweiss"}, "path": "lucene/build.gradle", "diffHunk": "@@ -15,8 +15,56 @@\n  * limitations under the License.\n  */\n \n+// Should we do this as :lucene:packaging similar to how Solr does it?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e4d365c50edb003967a85418b4d02e307a24d1e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUwNzUwMw==", "bodyText": "This is wrong. It should rely on published artifacts from other subprojects (set up proper dependencies) and assemble them in the right way into the distribution layout.", "url": "https://github.com/apache/lucene-solr/pull/1905#discussion_r492507503", "createdAt": "2020-09-22T06:49:49Z", "author": {"login": "dweiss"}, "path": "lucene/build.gradle", "diffHunk": "@@ -15,8 +15,56 @@\n  * limitations under the License.\n  */\n \n+// Should we do this as :lucene:packaging similar to how Solr does it?\n+// Or is this fine here?\n+\n+plugins {\n+  id 'distribution'\n+}\n+\n description = 'Parent project for Apache Lucene Core'\n \n subprojects {\n   group \"org.apache.lucene\"\n-}\n\\ No newline at end of file\n+}\n+\n+distributions {\n+  main {\n+      // This is empirically wrong, but it is mostly a copy from `ant package-zip`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e4d365c50edb003967a85418b4d02e307a24d1e"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MDY5MzQy", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-495069342", "createdAt": "2020-09-23T21:42:02Z", "commit": {"oid": "585ce2414c4867bec8e3d42f90b60badc50098f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNzQ4NjQ3", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-500748647", "createdAt": "2020-10-01T22:02:43Z", "commit": {"oid": "574961ee42826df168eae54ba442a6c124638377"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMjowMjo0M1rOHbcKcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMjowMjo0M1rOHbcKcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUzNTAyNA==", "bodyText": "@dweiss this is still a problem, not sure why it comes up or how to resolve it.", "url": "https://github.com/apache/lucene-solr/pull/1905#discussion_r498535024", "createdAt": "2020-10-01T22:02:43Z", "author": {"login": "madrob"}, "path": "lucene/packaging/build.gradle", "diffHunk": "@@ -0,0 +1,160 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+// This project puts together a \"distribution\", assembling dependencies from\n+// various other projects.\n+\n+plugins {\n+    id 'distribution'\n+}\n+\n+description = 'Lucene distribution packaging'\n+\n+// Declare all subprojects that should be included in binary distribution.\n+// By default everything is included, unless explicitly excluded.\n+def includeInBinaries = project(\":lucene\").subprojects.findAll {subproject ->\n+    return !(subproject.path in [\n+        \":lucene:packaging\",\n+        \":lucene:analysis\",\n+        \":lucene:luke\", // nocommit - Encountered duplicate path \"luke/lib/log4j-core-2.13.2.jar\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "574961ee42826df168eae54ba442a6c124638377"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMjA1NTQy", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-502205542", "createdAt": "2020-10-05T16:04:01Z", "commit": {"oid": "6ac41c82be3c22ecdee72816351a80fd355e27f0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNjowNDowMVrOHcj2Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNjowNDowMVrOHcj2Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTcwOTUwMg==", "bodyText": "Use charset here. File.text = ... uses default charset. Use File.setText(..., 'UTF-8')", "url": "https://github.com/apache/lucene-solr/pull/1905#discussion_r499709502", "createdAt": "2020-10-05T16:04:01Z", "author": {"login": "uschindler"}, "path": "gradle/releasing.gradle", "diffHunk": "@@ -0,0 +1,58 @@\n+\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+import org.apache.commons.codec.digest.DigestUtils\n+import org.apache.commons.codec.digest.MessageDigestAlgorithms\n+\n+// We're using commons-codec for computing checksums.\n+buildscript {\n+    repositories {\n+        mavenCentral()\n+    }\n+\n+    dependencies {\n+        classpath 'commons-codec:commons-codec:1.13'\n+    }\n+}\n+\n+allprojects {\n+    plugins.withType(DistributionPlugin) {\n+        def checksum = {\n+            outputs.files.each { File file ->\n+                new File(file.parent, file.name + \".sha512\").text = new DigestUtils(MessageDigestAlgorithms.SHA_512).digestAsHex(file).trim() + \"  \" + file.name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ac41c82be3c22ecdee72816351a80fd355e27f0"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMjcxNjUz", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-502271653", "createdAt": "2020-10-05T17:29:50Z", "commit": {"oid": "130de247f6adb55e6fa6248f9d69a5e810acba26"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzoyOTo1MFrOHcm5sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzoyOTo1MFrOHcm5sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1OTUzNw==", "bodyText": "minor comment but there is an unnecessary blank line :)", "url": "https://github.com/apache/lucene-solr/pull/1905#discussion_r499759537", "createdAt": "2020-10-05T17:29:50Z", "author": {"login": "danmuzi"}, "path": "gradle/releasing.gradle", "diffHunk": "@@ -0,0 +1,58 @@\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "130de247f6adb55e6fa6248f9d69a5e810acba26"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2c02688274f6c70c84462020c6825ee72cf5ace", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/f2c02688274f6c70c84462020c6825ee72cf5ace", "committedDate": "2020-10-05T18:11:07Z", "message": "LUCENE-9488 Release with Gradle Part 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d73f23a4ffb9dadfde0dfd74545eb03cc3e8663e", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/d73f23a4ffb9dadfde0dfd74545eb03cc3e8663e", "committedDate": "2020-10-05T18:11:07Z", "message": "Add lucene packaging to zip+tgz"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e4dbd1ac76bc442c31c3a0d2c1ed5f69de5a091", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/9e4dbd1ac76bc442c31c3a0d2c1ed5f69de5a091", "committedDate": "2020-10-05T18:11:07Z", "message": "use version.release because gradle does not like naked version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c343074b4a7061edd8f1eb846de37b2c72a74bd", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/7c343074b4a7061edd8f1eb846de37b2c72a74bd", "committedDate": "2020-10-05T18:11:07Z", "message": "lucene packaging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cd112be4d132c3fe5e1322c4fb621767b330211", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/9cd112be4d132c3fe5e1322c4fb621767b330211", "committedDate": "2020-10-05T18:11:08Z", "message": "Move lucene packaging to new module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efcab8f03a4adab63302607d67aaf8a45341b40b", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/efcab8f03a4adab63302607d67aaf8a45341b40b", "committedDate": "2020-10-05T18:11:08Z", "message": "Update lucene dist directory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d6e7f2eb9c69e887e4bf86fd21bed7cdda63a64", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/1d6e7f2eb9c69e887e4bf86fd21bed7cdda63a64", "committedDate": "2020-10-05T18:11:08Z", "message": "Use top-level assembleDist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75682d4dc4e7a2838fb9ff405c49741f126ffa00", "author": {"user": {"login": "dweiss", "name": "Dawid Weiss"}}, "url": "https://github.com/apache/lucene-solr/commit/75682d4dc4e7a2838fb9ff405c49741f126ffa00", "committedDate": "2020-10-05T18:11:08Z", "message": "Binary distribution assembly."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea079d6266398d78e34661cdb766c3db41649d7b", "author": {"user": {"login": "dweiss", "name": "Dawid Weiss"}}, "url": "https://github.com/apache/lucene-solr/commit/ea079d6266398d78e34661cdb766c3db41649d7b", "committedDate": "2020-10-05T18:11:08Z", "message": "Add luke launch scripts."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c6049a6714cefd1f962c57655cf438fe052a13c", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/8c6049a6714cefd1f962c57655cf438fe052a13c", "committedDate": "2020-10-05T18:11:08Z", "message": "include docs in assembly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47c85d0e36d55ee7c787948ef37a32cb2d3e64d9", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/47c85d0e36d55ee7c787948ef37a32cb2d3e64d9", "committedDate": "2020-10-05T18:11:08Z", "message": "cleaner assemble depends on docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2afeed2f8c05773c4fa9fbb4d6b6d609ea522e17", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/2afeed2f8c05773c4fa9fbb4d6b6d609ea522e17", "committedDate": "2020-10-05T18:11:08Z", "message": "back to a for loop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b7d795db3c46a91f68e8b96c73a8410263bca31", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/5b7d795db3c46a91f68e8b96c73a8410263bca31", "committedDate": "2020-10-05T18:11:08Z", "message": "Use proper configuration paths for docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "924dda50d43eeb4f7455fb5d00f2592f199e5310", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/924dda50d43eeb4f7455fb5d00f2592f199e5310", "committedDate": "2020-10-05T18:11:08Z", "message": "Checksum assembly artifacts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dee73998d6261cc38e8244c2bdc116cc8676491b", "author": {"user": {"login": "dweiss", "name": "Dawid Weiss"}}, "url": "https://github.com/apache/lucene-solr/commit/dee73998d6261cc38e8244c2bdc116cc8676491b", "committedDate": "2020-10-05T18:11:08Z", "message": "Fix double jar in luke."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52eabaf02389c84ae433930ecd34a7e3ce401833", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/52eabaf02389c84ae433930ecd34a7e3ce401833", "committedDate": "2020-10-05T18:11:08Z", "message": "Use commons-codec for checksums"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b01f8aed51230256d54edd8f72195041d69d87a", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/9b01f8aed51230256d54edd8f72195041d69d87a", "committedDate": "2020-10-05T18:11:08Z", "message": "use utf-8 charset"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9dcfdd4526e70c4fb8e7fd18a0f8bae723a647ab", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/9dcfdd4526e70c4fb8e7fd18a0f8bae723a647ab", "committedDate": "2020-10-05T18:11:08Z", "message": "comment cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afb9ecdfd28c8ea5e6664fa322ce7c7ab4d66907", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/afb9ecdfd28c8ea5e6664fa322ce7c7ab4d66907", "committedDate": "2020-10-05T18:11:08Z", "message": "Use correct task for maven build"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "130de247f6adb55e6fa6248f9d69a5e810acba26", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/130de247f6adb55e6fa6248f9d69a5e810acba26", "committedDate": "2020-10-05T16:12:00Z", "message": "use utf-8 charset"}, "afterCommit": {"oid": "afb9ecdfd28c8ea5e6664fa322ce7c7ab4d66907", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/afb9ecdfd28c8ea5e6664fa322ce7c7ab4d66907", "committedDate": "2020-10-05T18:11:08Z", "message": "Use correct task for maven build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7c2553892faba6120417e44ef6b07e74cbe2e92", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/a7c2553892faba6120417e44ef6b07e74cbe2e92", "committedDate": "2020-10-05T18:13:18Z", "message": "blank line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/52dc9b86b37d666ec73cc443d835e1c6d4a31004", "committedDate": "2020-10-05T19:08:05Z", "message": "queryparser docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDU3Mzk0", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-502457394", "createdAt": "2020-10-05T22:12:44Z", "commit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjoxMjo0NFrOHcviYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjoxMjo0NFrOHcviYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkwMTAyNg==", "bodyText": "I don't think so. Documentation in Solr's Artifacts on Jenkins already contain everything perfectly. If its the same for Lucene, we're fine. Should land in the ZIP's docs folder.", "url": "https://github.com/apache/lucene-solr/pull/1905#discussion_r499901026", "createdAt": "2020-10-05T22:12:44Z", "author": {"login": "uschindler"}, "path": "solr/packaging/build.gradle", "diffHunk": "@@ -115,15 +121,15 @@ distributions {\n         into \"server\"\n       })\n \n+      from(configurations.docs, {\n+        into \"docs\"\n+      })\n       // docs/   - TODO: this is assembled via XSLT... leaving out for now.\n+      // -- Is there more to do here?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDU4MTY2", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-502458166", "createdAt": "2020-10-05T22:14:21Z", "commit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDU5ODYy", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-502459862", "createdAt": "2020-10-05T22:18:04Z", "commit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjoxODowNVrOHcvp1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjoxODowNVrOHcvp1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkwMjkzMg==", "bodyText": "where is this coming from?", "url": "https://github.com/apache/lucene-solr/pull/1905#discussion_r499902932", "createdAt": "2020-10-05T22:18:05Z", "author": {"login": "uschindler"}, "path": "lucene/packaging/build.gradle", "diffHunk": "@@ -0,0 +1,171 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+// This project puts together a \"distribution\", assembling dependencies from\n+// various other projects.\n+\n+plugins {\n+    id 'distribution'\n+}\n+\n+description = 'Lucene distribution packaging'\n+\n+// Declare all subprojects that should be included in binary distribution.\n+// By default everything is included, unless explicitly excluded.\n+def includeInBinaries = project(\":lucene\").subprojects.findAll {subproject ->\n+    return !(subproject.path in [\n+        // Exclude packaging, not relevant to binary distribution.\n+        \":lucene:packaging\",\n+        // Exclude parent container project of analysis modules (no artifacts).\n+        \":lucene:analysis\"\n+    ])\n+}\n+\n+// Create a configuration to each subproject and add dependency.\n+def binaryArtifactsConf = { Project prj ->\n+    \"dep-binary\" + prj.path.replace(':', '-')\n+}\n+\n+def allDepsConf = { Project prj ->\n+    \"dep-full\" + prj.path.replace(':', '-')\n+}\n+\n+configurations {\n+    docs\n+}\n+\n+for (Project includedProject : includeInBinaries) {\n+    def confBinaries = binaryArtifactsConf(includedProject)\n+    def confFull = allDepsConf(includedProject)\n+    configurations.create(confBinaries)\n+    configurations.create(confFull)\n+    dependencies { DependencyHandler handler ->\n+        // Just project binaries.\n+        handler.add(confBinaries, project(path: includedProject.path, configuration: \"packaging\"))\n+        // All project dependencies, including transitive dependencies from the runtime configuration.\n+        handler.add(confFull, project(path: includedProject.path, configuration: \"runtimeElements\"), {\n+            exclude group: \"org.apache.lucene\"\n+\n+            // Exclude these from all projects.\n+            exclude group: \"commons-logging\"\n+            exclude group: \"org.slf4j\"\n+        })\n+    }\n+}\n+\n+dependencies {\n+    docs project(path: ':lucene', configuration: 'docs')\n+}\n+\n+distributions {\n+    // The \"main\" distribution is the binary distribution.\n+    // We should also add 'source' distribution at some point\n+    // (we can't do it now as the build itself is tangled with Solr).\n+    main {\n+        distributionBaseName = 'lucene'\n+\n+        contents {\n+            // Manually correct posix permissions (matters when packaging on Windows).\n+            filesMatching([\"**/*.sh\", \"**/*.bat\"]) { copy ->\n+                copy.setMode(0755)\n+            }\n+\n+            // Root distribution files; these are cherry-picked manually.\n+            from(project(':lucene').projectDir, {\n+                include \"CHANGES.txt\"\n+                include \"JRE_VERSION_MIGRATION.md\"\n+                include \"LICENSE.txt\"\n+                include \"licenses/*\"\n+                include \"MIGRATE.md\"\n+                include \"NOTICE.txt\"\n+                include \"README.md\"\n+                include \"SYSTEM_REQUIREMENTS.md\"\n+            })\n+\n+            // A couple more missing README files\n+            from(project(':lucene:analysis').projectDir) {\n+                include \"README.txt\"\n+                into 'analysis'\n+            }\n+\n+            // Copy files from documentation output to 'docs'\n+            from(configurations.docs, {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004"}, "originalPosition": 106}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDU5OTgx", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-502459981", "createdAt": "2020-10-05T22:18:20Z", "commit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjoxODoyMFrOHcvqNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjoxODoyMFrOHcvqNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkwMzAzMA==", "bodyText": "where is this coming from?", "url": "https://github.com/apache/lucene-solr/pull/1905#discussion_r499903030", "createdAt": "2020-10-05T22:18:20Z", "author": {"login": "uschindler"}, "path": "solr/packaging/build.gradle", "diffHunk": "@@ -115,15 +121,15 @@ distributions {\n         into \"server\"\n       })\n \n+      from(configurations.docs, {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDYxNTM3", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-502461537", "createdAt": "2020-10-05T22:21:41Z", "commit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjoyMTo0MVrOHcvu0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQyMjoyMTo0MVrOHcvu0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkwNDIwOA==", "bodyText": "I have no idea where this configuration is defined. The :solr project only has a task called documentation that needs to be executed before, but the outputs are not defined as config. So how should this work (same for Lucene)?", "url": "https://github.com/apache/lucene-solr/pull/1905#discussion_r499904208", "createdAt": "2020-10-05T22:21:41Z", "author": {"login": "uschindler"}, "path": "solr/packaging/build.gradle", "diffHunk": "@@ -62,12 +63,17 @@ dependencies {\n \n   example project(path: \":solr:example\", configuration: \"packaging\")\n   server project(path: \":solr:server\", configuration: \"packaging\")\n+\n+  // Copy files from documentation output\n+  docs project(path: ':solr', configuration: 'docs')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDYxODIy", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-502461822", "createdAt": "2020-10-05T22:22:24Z", "commit": {"oid": "52dc9b86b37d666ec73cc443d835e1c6d4a31004"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e841393324d0f69cb26d4070d3c57d922cc0012d", "author": {"user": {"login": "uschindler", "name": "Uwe Schindler"}}, "url": "https://github.com/apache/lucene-solr/commit/e841393324d0f69cb26d4070d3c57d922cc0012d", "committedDate": "2020-10-07T17:32:40Z", "message": "Merge branch 'master' of https://gitbox.apache.org/repos/asf/lucene-solr into gradle-release"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17bc35e0ba8a22d3ec6754ffa274d8b73be5489a", "author": {"user": {"login": "uschindler", "name": "Uwe Schindler"}}, "url": "https://github.com/apache/lucene-solr/commit/17bc35e0ba8a22d3ec6754ffa274d8b73be5489a", "committedDate": "2020-10-07T18:05:32Z", "message": "Make documentation packaging correct:\n- Lucene depends on the whole Javadocs (config \"docs\", built by documentation) and ships it\n- Solr only depends on the docsOnline configuration containing a stub, pointing to web page\n- Remove useless dependency"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MTQzMjQz", "url": "https://github.com/apache/lucene-solr/pull/1905#pullrequestreview-504143243", "createdAt": "2020-10-07T18:12:34Z", "commit": {"oid": "17bc35e0ba8a22d3ec6754ffa274d8b73be5489a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f0a0be8817a768865b583a7ba58c322e63107b6", "author": {"user": {"login": "uschindler", "name": "Uwe Schindler"}}, "url": "https://github.com/apache/lucene-solr/commit/9f0a0be8817a768865b583a7ba58c322e63107b6", "committedDate": "2020-10-07T21:45:08Z", "message": "Clenup relics from Ant in documentation. Also add formatted changes to Solr's TGZ."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2300, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}