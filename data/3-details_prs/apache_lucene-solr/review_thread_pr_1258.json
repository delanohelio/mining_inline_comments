{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MzU1Nzgx", "number": 1258, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QyMjoxNDowMlrODgg8DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QyMjoyODoyNVrODghEKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NDIwNjg0OnYy", "diffSide": "RIGHT", "path": "lucene/core/src/java/org/apache/lucene/geo/Rectangle2D.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QyMjoxNDowMlrOFqwrFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QyMjoxNDowMlrOFqwrFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM4MTk3Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private static double MIN_LON_INCL_QUANTIZE = decodeLongitude(encodeLongitude(MIN_LON_INCL));\n          \n          \n            \n              private static double MIN_LON_INCL_QUANTIZE = decodeLongitude(GeoEncodingUtils.MIN_LON_ENCODED);", "url": "https://github.com/apache/lucene-solr/pull/1258#discussion_r380381973", "createdAt": "2020-02-17T22:14:02Z", "author": {"login": "nknize"}, "path": "lucene/core/src/java/org/apache/lucene/geo/Rectangle2D.java", "diffHunk": "@@ -415,16 +217,63 @@ public boolean equals(Object o) {\n     return minX == that.minX &&\n         maxX == that.maxX &&\n         minY == that.minY &&\n-        maxY == that.maxY &&\n-        Arrays.equals(bbox, that.bbox) &&\n-        Arrays.equals(west, that.west);\n+        maxY == that.maxY;\n   }\n \n   @Override\n   public int hashCode() {\n     int result = Objects.hash(minX, maxX, minY, maxY);\n-    result = 31 * result + Arrays.hashCode(bbox);\n-    result = 31 * result + Arrays.hashCode(west);\n     return result;\n   }\n-}\n+\n+  @Override\n+  public String toString() {\n+    final StringBuilder sb = new StringBuilder();\n+    sb.append(\"XYRectangle(x=\");\n+    sb.append(minX);\n+    sb.append(\" TO \");\n+    sb.append(maxX);\n+    sb.append(\" y=\");\n+    sb.append(minY);\n+    sb.append(\" TO \");\n+    sb.append(maxY);\n+    sb.append(\")\");\n+    return sb.toString();\n+  }\n+\n+  /** create a component2D from the provided XY rectangle */\n+  static Component2D create(XYRectangle rectangle) {\n+    return new Rectangle2D(rectangle.minX, rectangle.maxX, rectangle.minY, rectangle.maxY);\n+  }\n+\n+  private static double MIN_LON_INCL_QUANTIZE = decodeLongitude(encodeLongitude(MIN_LON_INCL));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e143444deb996273cef01c311dceb779037c6b6e"}, "originalPosition": 511}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NDIwNzkwOnYy", "diffSide": "RIGHT", "path": "lucene/core/src/java/org/apache/lucene/geo/Rectangle2D.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QyMjoxNDozMVrOFqwrnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QyMjoxNDozMVrOFqwrnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM4MjEwOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private static double MAX_LON_INCL_QUANTIZE = decodeLongitude(encodeLongitude(MAX_LON_INCL));\n          \n          \n            \n              private static double MAX_LON_INCL_QUANTIZE = decodeLongitude(GeoEncodingUtils.MAX_LON_ENCODED);", "url": "https://github.com/apache/lucene-solr/pull/1258#discussion_r380382109", "createdAt": "2020-02-17T22:14:31Z", "author": {"login": "nknize"}, "path": "lucene/core/src/java/org/apache/lucene/geo/Rectangle2D.java", "diffHunk": "@@ -415,16 +217,63 @@ public boolean equals(Object o) {\n     return minX == that.minX &&\n         maxX == that.maxX &&\n         minY == that.minY &&\n-        maxY == that.maxY &&\n-        Arrays.equals(bbox, that.bbox) &&\n-        Arrays.equals(west, that.west);\n+        maxY == that.maxY;\n   }\n \n   @Override\n   public int hashCode() {\n     int result = Objects.hash(minX, maxX, minY, maxY);\n-    result = 31 * result + Arrays.hashCode(bbox);\n-    result = 31 * result + Arrays.hashCode(west);\n     return result;\n   }\n-}\n+\n+  @Override\n+  public String toString() {\n+    final StringBuilder sb = new StringBuilder();\n+    sb.append(\"XYRectangle(x=\");\n+    sb.append(minX);\n+    sb.append(\" TO \");\n+    sb.append(maxX);\n+    sb.append(\" y=\");\n+    sb.append(minY);\n+    sb.append(\" TO \");\n+    sb.append(maxY);\n+    sb.append(\")\");\n+    return sb.toString();\n+  }\n+\n+  /** create a component2D from the provided XY rectangle */\n+  static Component2D create(XYRectangle rectangle) {\n+    return new Rectangle2D(rectangle.minX, rectangle.maxX, rectangle.minY, rectangle.maxY);\n+  }\n+\n+  private static double MIN_LON_INCL_QUANTIZE = decodeLongitude(encodeLongitude(MIN_LON_INCL));\n+  private static double MAX_LON_INCL_QUANTIZE = decodeLongitude(encodeLongitude(MAX_LON_INCL));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e143444deb996273cef01c311dceb779037c6b6e"}, "originalPosition": 512}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NDIyNzYzOnYy", "diffSide": "RIGHT", "path": "lucene/core/src/java/org/apache/lucene/document/LatLonShapeBoundingBoxQuery.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QyMjoyODoyNVrOFqw3Qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNjozNTo0N1rOFw5x7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM4NTA5MQ==", "bodyText": "Is this class needed because Rectangle2D is package private?", "url": "https://github.com/apache/lucene-solr/pull/1258#discussion_r380385091", "createdAt": "2020-02-17T22:28:25Z", "author": {"login": "nknize"}, "path": "lucene/core/src/java/org/apache/lucene/document/LatLonShapeBoundingBoxQuery.java", "diffHunk": "@@ -108,4 +115,385 @@ public String toString(String field) {\n     sb.append(rectangle.toString());\n     return sb.toString();\n   }\n+\n+  /** Holds spatial logic for a bounding box that works in the encoded space */\n+  private static class EncodedRectangle {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e143444deb996273cef01c311dceb779037c6b6e"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgyMjYzNg==", "bodyText": "This class is an specialisation for bounding box queries working on the encoded space. As such it feels like the correct place to package this logic is in the query itself. I am pushing this change, if you disagree we can re-think how to package this logic later on.", "url": "https://github.com/apache/lucene-solr/pull/1258#discussion_r386822636", "createdAt": "2020-03-03T06:35:47Z", "author": {"login": "iverase"}, "path": "lucene/core/src/java/org/apache/lucene/document/LatLonShapeBoundingBoxQuery.java", "diffHunk": "@@ -108,4 +115,385 @@ public String toString(String field) {\n     sb.append(rectangle.toString());\n     return sb.toString();\n   }\n+\n+  /** Holds spatial logic for a bounding box that works in the encoded space */\n+  private static class EncodedRectangle {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM4NTA5MQ=="}, "originalCommit": {"oid": "e143444deb996273cef01c311dceb779037c6b6e"}, "originalPosition": 92}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 928, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}