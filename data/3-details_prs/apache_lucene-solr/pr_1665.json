{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3NzMyOTg3", "number": 1665, "title": "SOLR-11262: XML writer implements writeMap and writeIterator", "bodyText": "", "createdAt": "2020-07-11T07:18:38Z", "url": "https://github.com/apache/lucene-solr/pull/1665", "merged": true, "mergeCommit": {"oid": "8c9c0640cfe558a8c65f2ef50113f38cb7ef66d6"}, "closed": true, "closedAt": "2020-07-13T01:21:14Z", "author": {"login": "munendrasn"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczy7VegH2gAyNDQ3NzMyOTg3OmQ3MzQ2NDA5NDY1Y2ZjMmQ0NGUxNTNiMWZmNTkyZjM2ZDMyYzZmNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0N0TFAH2gAyNDQ3NzMyOTg3OmIzYzM2ZTcwMDFiZjc0Zjg5YzM3NmY0NTg2ODNmYWMwY2VjODQ3YTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d7346409465cfc2d44e153b1ff592f36d32c6f66", "author": {"user": {"login": "munendrasn", "name": "S N Munendra"}}, "url": "https://github.com/apache/lucene-solr/commit/d7346409465cfc2d44e153b1ff592f36d32c6f66", "committedDate": "2020-07-11T07:16:17Z", "message": "SOLR-11262: XML writer implements writeMap and writeIterator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2Nzg1MTM4", "url": "https://github.com/apache/lucene-solr/pull/1665#pullrequestreview-446785138", "createdAt": "2020-07-11T07:22:37Z", "commit": {"oid": "d7346409465cfc2d44e153b1ff592f36d32c6f66"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMVQwNzoyMjozN1rOGwLHdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMVQwNzoyMjozN1rOGwLHdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE2Njk2NA==", "bodyText": "what is this LocalSolrQueryRequest for?", "url": "https://github.com/apache/lucene-solr/pull/1665#discussion_r453166964", "createdAt": "2020-07-11T07:22:37Z", "author": {"login": "noblepaul"}, "path": "solr/core/src/test/org/apache/solr/response/TestPushWriter.java", "diffHunk": "@@ -45,26 +46,47 @@\n \n   public void testStandardResponse() throws IOException {\n     ByteArrayOutputStream baos = new ByteArrayOutputStream();\n-    OutputStreamWriter osw = new OutputStreamWriter(baos, StandardCharsets.UTF_8);\n-    PushWriter pw = new JSONWriter(osw,\n-        new LocalSolrQueryRequest(null, new ModifiableSolrParams()), new SolrQueryResponse());\n-    writeData(pw);\n-    osw.flush();\n-    if (log.isInfoEnabled()) {\n-      log.info(\"{}\", new String(baos.toByteArray(), StandardCharsets.UTF_8));\n+    Map m;\n+    try (OutputStreamWriter osw = new OutputStreamWriter(baos, StandardCharsets.UTF_8)) {\n+      JSONWriter pw = new JSONWriter(osw,\n+          new LocalSolrQueryRequest(null, new ModifiableSolrParams()), new SolrQueryResponse());\n+      writeData(null, pw);\n+      osw.flush();\n+      if (log.isInfoEnabled()) {\n+        log.info(\"{}\", new String(baos.toByteArray(), StandardCharsets.UTF_8));\n+      }\n+      m = (Map) Utils.fromJSON(baos.toByteArray());\n+      checkValues(m);\n     }\n-    @SuppressWarnings({\"rawtypes\"})\n-    Map m = (Map) Utils.fromJSON(baos.toByteArray());\n-    checkValues(m);\n+\n     try (JavaBinCodec jbc = new JavaBinCodec(baos= new ByteArrayOutputStream(), null)) {\n       writeData(jbc);\n-      try (JavaBinCodec jbcUn = new JavaBinCodec()) {\n-        m = (Map) jbcUn.unmarshal(new ByteArrayInputStream(baos.toByteArray()));\n-      }\n+      m = (Map) Utils.fromJavabin(baos.toByteArray());\n     }\n     checkValues(m);\n   }\n \n+  public void testXmlWriter() throws Exception {\n+    try (ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+        OutputStreamWriter osw = new OutputStreamWriter(baos, StandardCharsets.UTF_8)) {\n+      XMLWriter xml = new XMLWriter(osw,\n+          new LocalSolrQueryRequest(null, new ModifiableSolrParams()), new SolrQueryResponse());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7346409465cfc2d44e153b1ff592f36d32c6f66"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9985691e6713ec570da74da36e7d9ce9ae9e444d", "author": {"user": {"login": "munendrasn", "name": "S N Munendra"}}, "url": "https://github.com/apache/lucene-solr/commit/9985691e6713ec570da74da36e7d9ce9ae9e444d", "committedDate": "2020-07-11T08:17:53Z", "message": "SOLR-11262: fix gradle precommit failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3c36e7001bf74f89c376f458683fac0cec847a5", "author": {"user": {"login": "munendrasn", "name": "S N Munendra"}}, "url": "https://github.com/apache/lucene-solr/commit/b3c36e7001bf74f89c376f458683fac0cec847a5", "committedDate": "2020-07-12T14:36:02Z", "message": "SOLR-11262: add changes.txt entry"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2458, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}