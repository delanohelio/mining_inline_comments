{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NzE4MTcz", "number": 1456, "title": "SOLR-13289: Support for BlockMax WAND", "bodyText": "This PR adds support for BlockMax WAND via a minExactHits parameter. Hits will be counted accurately at least until this value, and above that, the count will be an approximation. In distributed search requests, the count will be per shard, so potentially the count will be accurately counted until numShards * minExactHits. The response will include the value numFoundExact which can be true (The value in numFound is exact) or false (the value in numFound is an approximation).\nI plan to merge this to master and 8x as it is in this PR", "createdAt": "2020-04-24T19:08:28Z", "url": "https://github.com/apache/lucene-solr/pull/1456", "merged": true, "mergeCommit": {"oid": "d9f9d6dd47c06f5fe092d43d6bf0c77c5ff2019f"}, "closed": true, "closedAt": "2020-05-08T21:25:48Z", "author": {"login": "tflobbe"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccHYT1gFqTQwMjA2MDI5OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfYnIiAH2gAyNDA4NzE4MTczOjRhYjAwYTRmMDM1ZDFhM2NlMTgxMjFkOGQ5NWE2MDg1MjBkZTU2ODY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMDYwMjk5", "url": "https://github.com/apache/lucene-solr/pull/1456#pullrequestreview-402060299", "createdAt": "2020-04-28T17:31:51Z", "commit": {"oid": "982b753963c659007692d03538f81fa4d0dc7b92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNzozMTo1MVrOGNfOIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNzozMTo1MVrOGNfOIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc5NjE5NA==", "bodyText": "@jpountz, What did you mean with this comment? MultiCollector will set the scoreMode to COMPLETE in the case of the main collector being something other than TOP_SCORES, right?", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r416796194", "createdAt": "2020-04-28T17:31:51Z", "author": {"login": "tflobbe"}, "path": "solr/core/src/java/org/apache/solr/search/MaxScoreCollector.java", "diffHunk": "@@ -39,7 +39,7 @@ public float getMaxScore() {\n   public ScoreMode scoreMode() {\n     // Should be TOP_SCORES but this would wrap the scorer unnecessarily since\n     // this collector is only used in a MultiCollector.\n-    return ScoreMode.COMPLETE;\n+    return ScoreMode.TOP_SCORES;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "982b753963c659007692d03538f81fa4d0dc7b92"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMjUxMjAw", "url": "https://github.com/apache/lucene-solr/pull/1456#pullrequestreview-402251200", "createdAt": "2020-04-28T22:15:31Z", "commit": {"oid": "4e2c5aa08086176dbbd7f2c0da3cd7a8ca8c12df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMjoxNTozMVrOGNpBMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMjoxNTozMVrOGNpBMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk1NjcyMw==", "bodyText": "I plan to move the default value to a solrconfig config in a future PR, for now, MAX_VALUE (disabled)", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r416956723", "createdAt": "2020-04-28T22:15:31Z", "author": {"login": "tflobbe"}, "path": "solr/core/src/java/org/apache/solr/handler/component/QueryComponent.java", "diffHunk": "@@ -401,6 +403,14 @@ public void process(ResponseBuilder rb) throws IOException\n     doProcessUngroupedSearch(rb, cmd, result);\n   }\n \n+  private int getMinExactHits(SolrParams params) {\n+    long minExactHits = params.getLong(CommonParams.MIN_EXACT_HITS, Integer.MAX_VALUE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e2c5aa08086176dbbd7f2c0da3cd7a8ca8c12df"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NDAyOTc3", "url": "https://github.com/apache/lucene-solr/pull/1456#pullrequestreview-404402977", "createdAt": "2020-05-01T21:10:42Z", "commit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMToxMDo0MlrOGPV1SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMToyNDoyNFrOGPWIKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODczOTUyOA==", "bodyText": "Why? We can't pick a default and still use this?", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418739528", "createdAt": "2020-05-01T21:10:42Z", "author": {"login": "madrob"}, "path": "solr/core/src/java/org/apache/solr/response/GeoJSONResponseWriter.java", "diffHunk": "@@ -292,11 +293,18 @@ else if(geo instanceof WriteableGeoJSON) {\n     }\n   }\n \n+  @Deprecated\n   @Override\n   public void writeStartDocumentList(String name, \n-      long start, int size, long numFound, Float maxScore) throws IOException\n+      long start, int size, long numFound, Float maxScore) throws IOException {\n+    throw new UnsupportedOperationException();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc0MDE1MQ==", "bodyText": "do you mean solr 10? we don't need a major version with it deprecated before we can jettison it? folks upgrading from 8.5->9 might be surprised by this.", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418740151", "createdAt": "2020-05-01T21:12:31Z", "author": {"login": "madrob"}, "path": "solr/core/src/java/org/apache/solr/response/JSONWriter.java", "diffHunk": "@@ -132,11 +133,16 @@ public void writeSolrDocument(String name, SolrDocument doc, ReturnFields return\n   //       that the size could not be reliably determined.\n   //\n \n+  /**\n+   * This method will be removed in Solr 9", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc0MDk4OQ==", "bodyText": "why can we make this change?", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418740989", "createdAt": "2020-05-01T21:14:51Z", "author": {"login": "madrob"}, "path": "solr/core/src/java/org/apache/solr/search/MaxScoreCollector.java", "diffHunk": "@@ -37,9 +37,7 @@ public float getMaxScore() {\n \n   @Override\n   public ScoreMode scoreMode() {\n-    // Should be TOP_SCORES but this would wrap the scorer unnecessarily since\n-    // this collector is only used in a MultiCollector.\n-    return ScoreMode.COMPLETE;\n+    return ScoreMode.TOP_SCORES;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc0MTgzMw==", "bodyText": "this is going to overflow in the default case, is that ok?", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418741833", "createdAt": "2020-05-01T21:17:13Z", "author": {"login": "madrob"}, "path": "solr/core/src/java/org/apache/solr/search/QueryResultKey.java", "diffHunk": "@@ -65,6 +70,7 @@ public QueryResultKey(Query query, List<Query> filters, Sort sort, int nc_flags)\n       h = h*29 + sf.hashCode();\n       ramSfields += BASE_SF_RAM_BYTES_USED + RamUsageEstimator.sizeOfObject(sf.getField());\n     }\n+    h = h*31 + minExactHits;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc0NDM2Mg==", "bodyText": "s/mun/min", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418744362", "createdAt": "2020-05-01T21:24:24Z", "author": {"login": "madrob"}, "path": "solr/core/src/test/org/apache/solr/request/TestFaceting.java", "diffHunk": "@@ -931,5 +934,28 @@ public void testListedTermCounts() throws Exception {\n         \"//lst[@name='facet_fields']/lst[@name='title_ws']/int[2][@name='Book2']\",\n         \"//lst[@name='facet_fields']/lst[@name='title_ws']/int[3][@name='Book3']\");\n   }\n+  \n+  @Test\n+  public void testFacetCountsWithMinExactHits() throws Exception {\n+    final int NUM_DOCS = 20;\n+    for (int i = 0; i < NUM_DOCS ; i++) {\n+      assertU(adoc(\"id\", String.valueOf(i), \"title_ws\", \"Book1\"));\n+      assertU(commit());\n+    }\n+    ModifiableSolrParams params = new ModifiableSolrParams();\n+    params.set(\"q\", \"title_ws:Book1\");\n+    params.set(FacetParams.FACET, \"true\");\n+    params.set(FacetParams.FACET_FIELD, \"title_ws\");\n+    assertQ(req(params),\n+        \"//lst[@name='facet_fields']/lst[@name='title_ws']/int[1][@name='Book1'][.='20']\"\n+        ,\"//*[@hitCountRelation='\" + HitCountRelation.EQ + \"']\"\n+        ,\"//*[@numFound='\" + NUM_DOCS + \"']\");\n+    \n+    // It doesn't matter if we request munExactHits, when requesting facets, the numFound value is precise", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzI3ODc2", "url": "https://github.com/apache/lucene-solr/pull/1456#pullrequestreview-404327876", "createdAt": "2020-05-01T18:38:47Z", "commit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "state": "APPROVED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxODozODo0N1rOGPSGNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMTo1MDoyMVrOGPWqUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY3ODMyNw==", "bodyText": "This doesn't really allow anyone to specify a minExactHits value between Integer.MAX_VALUE and Long.MAX_VALUE. For practical reasons, that is ok but just not consistent and would require a note in the ref guide too. Do you think we should just switch this out with Long instead?", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418678327", "createdAt": "2020-05-01T18:38:47Z", "author": {"login": "anshumg"}, "path": "solr/core/src/java/org/apache/solr/handler/component/QueryComponent.java", "diffHunk": "@@ -401,6 +403,14 @@ public void process(ResponseBuilder rb) throws IOException\n     doProcessUngroupedSearch(rb, cmd, result);\n   }\n \n+  private int getMinExactHits(SolrParams params) {\n+    long minExactHits = params.getLong(CommonParams.MIN_EXACT_HITS, Integer.MAX_VALUE);\n+    if (minExactHits < 0 || minExactHits > Integer.MAX_VALUE) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4MTk3NQ==", "bodyText": "This method will be removed after Solr 9, right?", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418681975", "createdAt": "2020-05-01T18:46:53Z", "author": {"login": "anshumg"}, "path": "solr/core/src/java/org/apache/solr/response/JSONWriter.java", "diffHunk": "@@ -132,11 +133,16 @@ public void writeSolrDocument(String name, SolrDocument doc, ReturnFields return\n   //       that the size could not be reliably determined.\n   //\n \n+  /**\n+   * This method will be removed in Solr 9", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY5MDE4Mw==", "bodyText": ":)", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418690183", "createdAt": "2020-05-01T19:05:12Z", "author": {"login": "anshumg"}, "path": "solr/core/src/test/org/apache/solr/TestDistributedSearch.java", "diffHunk": "@@ -1082,11 +1086,32 @@ public void test() throws Exception {\n     assertEquals(new EnumFieldValue(11, \"Critical\"),\n                  rsp.getFieldStatsInfo().get(fieldName).getMax());\n \n-    handle.put(\"severity\", UNORDERED); // this is stupid, but stats.facet doesn't garuntee order\n+    handle.put(\"severity\", UNORDERED); // this is stupid, but stats.facet doesn't guarantee order\n     query(\"q\", \"*:*\", \"stats\", \"true\", \"stats.field\", fieldName, \n           \"stats.facet\", fieldName);\n   }\n \n+  private void testMinExactHits() throws Exception {\n+    assertIsExactHitCount(\"q\",\"{!cache=false}dog OR men OR cow OR country OR dumpty\", CommonParams.MIN_EXACT_HITS, \"200\", CommonParams.ROWS, \"2\", CommonParams.SORT, \"score desc, id asc\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY5MTI5NA==", "bodyText": "We can move this commit out of the loop and just commit once.", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418691294", "createdAt": "2020-05-01T19:07:55Z", "author": {"login": "anshumg"}, "path": "solr/core/src/test/org/apache/solr/request/TestFaceting.java", "diffHunk": "@@ -931,5 +934,28 @@ public void testListedTermCounts() throws Exception {\n         \"//lst[@name='facet_fields']/lst[@name='title_ws']/int[2][@name='Book2']\",\n         \"//lst[@name='facet_fields']/lst[@name='title_ws']/int[3][@name='Book3']\");\n   }\n+  \n+  @Test\n+  public void testFacetCountsWithMinExactHits() throws Exception {\n+    final int NUM_DOCS = 20;\n+    for (int i = 0; i < NUM_DOCS ; i++) {\n+      assertU(adoc(\"id\", String.valueOf(i), \"title_ws\", \"Book1\"));\n+      assertU(commit());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY5MTU2Mg==", "bodyText": "munExactHits -> numExactHits", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418691562", "createdAt": "2020-05-01T19:08:32Z", "author": {"login": "anshumg"}, "path": "solr/core/src/test/org/apache/solr/request/TestFaceting.java", "diffHunk": "@@ -931,5 +934,28 @@ public void testListedTermCounts() throws Exception {\n         \"//lst[@name='facet_fields']/lst[@name='title_ws']/int[2][@name='Book2']\",\n         \"//lst[@name='facet_fields']/lst[@name='title_ws']/int[3][@name='Book3']\");\n   }\n+  \n+  @Test\n+  public void testFacetCountsWithMinExactHits() throws Exception {\n+    final int NUM_DOCS = 20;\n+    for (int i = 0; i < NUM_DOCS ; i++) {\n+      assertU(adoc(\"id\", String.valueOf(i), \"title_ws\", \"Book1\"));\n+      assertU(commit());\n+    }\n+    ModifiableSolrParams params = new ModifiableSolrParams();\n+    params.set(\"q\", \"title_ws:Book1\");\n+    params.set(FacetParams.FACET, \"true\");\n+    params.set(FacetParams.FACET_FIELD, \"title_ws\");\n+    assertQ(req(params),\n+        \"//lst[@name='facet_fields']/lst[@name='title_ws']/int[1][@name='Book1'][.='20']\"\n+        ,\"//*[@hitCountRelation='\" + HitCountRelation.EQ + \"']\"\n+        ,\"//*[@numFound='\" + NUM_DOCS + \"']\");\n+    \n+    // It doesn't matter if we request munExactHits, when requesting facets, the numFound value is precise", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY5MjM5OA==", "bodyText": "We can move the commit out of the loop", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418692398", "createdAt": "2020-05-01T19:10:36Z", "author": {"login": "anshumg"}, "path": "solr/core/src/test/org/apache/solr/search/SolrIndexSearcherTest.java", "diffHunk": "@@ -0,0 +1,200 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.solr.search;\n+\n+import org.apache.lucene.index.Term;\n+import org.apache.lucene.search.TermQuery;\n+import org.apache.solr.SolrTestCaseJ4;\n+import org.apache.solr.common.HitCountRelation;\n+import org.junit.Before;\n+import org.junit.BeforeClass;\n+\n+import java.io.IOException;\n+\n+public class SolrIndexSearcherTest extends SolrTestCaseJ4 {\n+  \n+  private final static int NUM_DOCS = 20;\n+\n+  @BeforeClass\n+  public static void setUpClass() throws Exception {\n+    initCore(\"solrconfig.xml\", \"schema.xml\");\n+    for (int i = 0 ; i < NUM_DOCS ; i ++) {\n+      assertU(adoc(\"id\", String.valueOf(i), \"field1_s\", \"foo\", \"field2_s\", String.valueOf(i % 2), \"field3_s\", String.valueOf(i)));\n+      assertU(commit());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc1MzEwNA==", "bodyText": "s/change/changed", "url": "https://github.com/apache/lucene-solr/pull/1456#discussion_r418753104", "createdAt": "2020-05-01T21:50:21Z", "author": {"login": "anshumg"}, "path": "solr/solrj/src/test/org/apache/solr/common/util/TestJavaBinCodec.java", "diffHunk": "@@ -242,6 +243,7 @@ public void testBackCompatForSolrDocumentWithChildDocs() throws IOException {\n   }\n \n   @Test\n+  @Ignore(\"This test compares binaries, which change due to SOLR-13289\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bb3447bf59fab33681ca5af7e758a0a575d59b9"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d6357513574a7ef95270aa0782da695b4ec5f74", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/4d6357513574a7ef95270aa0782da695b4ec5f74", "committedDate": "2020-05-08T16:57:34Z", "message": "Add equality test for QueryResultKey"}, "afterCommit": {"oid": "8b123f2501c8f4e390a889a4a798dce8608a1655", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/8b123f2501c8f4e390a889a4a798dce8608a1655", "committedDate": "2020-05-08T17:09:20Z", "message": "Add equality test for QueryResultKey"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81f88f425ba034bf3545131b0630bd68f5f8329b", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/81f88f425ba034bf3545131b0630bd68f5f8329b", "committedDate": "2020-05-08T21:04:24Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fbbb423a2ed80e807feb218d76c231901c4bf59", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/0fbbb423a2ed80e807feb218d76c231901c4bf59", "committedDate": "2020-05-08T21:04:24Z", "message": "More WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62fd01ae55371cf0678ca54326aa271a20fff036", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/62fd01ae55371cf0678ca54326aa271a20fff036", "committedDate": "2020-05-08T21:04:24Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17f7aa2527d8118af21a1d3ec840d866a20a19ad", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/17f7aa2527d8118af21a1d3ec840d866a20a19ad", "committedDate": "2020-05-08T21:04:24Z", "message": "Include new relation in SolrJ response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f36f2f9ff4f6ead984bee418bfbbc7c2cf8e17a", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/9f36f2f9ff4f6ead984bee418bfbbc7c2cf8e17a", "committedDate": "2020-05-08T21:04:24Z", "message": "Unignore test that now passes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c773d7c1427de9ee2ff681dfe03f07c0e573b3c", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/9c773d7c1427de9ee2ff681dfe03f07c0e573b3c", "committedDate": "2020-05-08T21:04:24Z", "message": "Default to counting all hits"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19a7a9e0d0990fe4ada885a5d507ef149f615700", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/19a7a9e0d0990fe4ada885a5d507ef149f615700", "committedDate": "2020-05-08T21:04:24Z", "message": "Add support and tests for distribution"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5f4935da8312bd063b203a8d6f77b9a00bb3569", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/f5f4935da8312bd063b203a8d6f77b9a00bb3569", "committedDate": "2020-05-08T21:04:24Z", "message": "Refactor things a bit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a225853cddc224ef900df85762eb2b2f9fff9b36", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/a225853cddc224ef900df85762eb2b2f9fff9b36", "committedDate": "2020-05-08T21:04:24Z", "message": "Fix BasicFunctionalityTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aafc447ac5c962a0f41bc0ee37777e1f5a735d7b", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/aafc447ac5c962a0f41bc0ee37777e1f5a735d7b", "committedDate": "2020-05-08T21:04:24Z", "message": "Minor improvements to tests and fix overflow bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2beb768be9ccd0202c4193b3dbd6d290ffc702d7", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/2beb768be9ccd0202c4193b3dbd6d290ffc702d7", "committedDate": "2020-05-08T21:04:24Z", "message": "Use correct key in shards.info for hit count relation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab81e1335717223b1b60aab2359d44281c7fddaa", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/ab81e1335717223b1b60aab2359d44281c7fddaa", "committedDate": "2020-05-08T21:04:24Z", "message": "Calculate score, even when minExactHits is provided"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df6b1bf88dd9391a641d360e1f3879ad5ee1c48b", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/df6b1bf88dd9391a641d360e1f3879ad5ee1c48b", "committedDate": "2020-05-08T21:04:24Z", "message": "Remove SolrDocumentList.isExactHitCount() method\n\nclients should use getter instead"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d3046a445502413d61fd91f25b3f54b25cdac29", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/1d3046a445502413d61fd91f25b3f54b25cdac29", "committedDate": "2020-05-08T21:04:24Z", "message": "Rename HitCountRelation in SolrJ to match attribute in text response writers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1eb9b3ad0d83971084801fbb5a303462efda9b8", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/a1eb9b3ad0d83971084801fbb5a303462efda9b8", "committedDate": "2020-05-08T21:04:24Z", "message": "Add hitCountRelation to JSON output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc39337506fcd20e99039c63e4f1ee882186a2d5", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/fc39337506fcd20e99039c63e4f1ee882186a2d5", "committedDate": "2020-05-08T21:04:24Z", "message": "Include relation in all ResponseWriters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "353e4e1407b660a4c6e5374f1b1685ab226bea5b", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/353e4e1407b660a4c6e5374f1b1685ab226bea5b", "committedDate": "2020-05-08T21:04:24Z", "message": "Fix TestGroupingSearch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e2c1aaf143fa7c84d3c4c6fdd767f4d6a46dadf", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/0e2c1aaf143fa7c84d3c4c6fdd767f4d6a46dadf", "committedDate": "2020-05-08T21:04:24Z", "message": "Add test for facets\n\nCount is precise when requesting facets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40a0e89ee2593317aa5999d53d360a2a5065487e", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/40a0e89ee2593317aa5999d53d360a2a5065487e", "committedDate": "2020-05-08T21:04:24Z", "message": "Fix TestJoin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d196cf05062542340e8baa9babac47069111894b", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/d196cf05062542340e8baa9babac47069111894b", "committedDate": "2020-05-08T21:04:24Z", "message": "Minor improvements to tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ca1679701639406b842426e7d856f994b373293", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/6ca1679701639406b842426e7d856f994b373293", "committedDate": "2020-05-08T21:04:24Z", "message": "Fix TestRealtimeGet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "430898d77b7e55bcd72cf14162e7a76df4489fd4", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/430898d77b7e55bcd72cf14162e7a76df4489fd4", "committedDate": "2020-05-08T21:04:24Z", "message": "Minor fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "badd558d6951473480cc4c3dc4d062d9f181b20b", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/badd558d6951473480cc4c3dc4d062d9f181b20b", "committedDate": "2020-05-08T21:04:24Z", "message": "Use shorter Enum values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ea9adfec9da1ea3fea1c9405c7b1ff009685c1c", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/1ea9adfec9da1ea3fea1c9405c7b1ff009685c1c", "committedDate": "2020-05-08T21:04:24Z", "message": "Make response a boolean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "292261cbebc5777c1afdf1ad14c2cef95135253b", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/292261cbebc5777c1afdf1ad14c2cef95135253b", "committedDate": "2020-05-08T21:04:24Z", "message": "Rename attribute"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cbc8ec149c0509c84e7902f85ccb99646c5e57c", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/4cbc8ec149c0509c84e7902f85ccb99646c5e57c", "committedDate": "2020-05-08T21:04:24Z", "message": "Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1a8cc6f325e9dafa5387e95d80c8f95421b2137", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/d1a8cc6f325e9dafa5387e95d80c8f95421b2137", "committedDate": "2020-05-08T21:04:25Z", "message": "Add equality test for QueryResultKey"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f07efd981027bf1f8c62e8d0dbb376209bfb64c", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/0f07efd981027bf1f8c62e8d0dbb376209bfb64c", "committedDate": "2020-05-08T21:04:25Z", "message": "Minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6de5b96cd0a9d3b8469c46fadde20a80917853ca", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/6de5b96cd0a9d3b8469c46fadde20a80917853ca", "committedDate": "2020-05-08T21:04:25Z", "message": "Rename hitCountExact->numFoundExact"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6082ab987b6d8e778386e69c2dc7a16b4b151bdd", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/6082ab987b6d8e778386e69c2dc7a16b4b151bdd", "committedDate": "2020-05-08T21:04:25Z", "message": "Update binaries for testForwardCompat"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0347004b277f47dd72cb5cfda1a1548e09f900cf", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/0347004b277f47dd72cb5cfda1a1548e09f900cf", "committedDate": "2020-05-08T18:53:03Z", "message": "Update binaries for testForwardCompat"}, "afterCommit": {"oid": "6082ab987b6d8e778386e69c2dc7a16b4b151bdd", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/6082ab987b6d8e778386e69c2dc7a16b4b151bdd", "committedDate": "2020-05-08T21:04:25Z", "message": "Update binaries for testForwardCompat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ab00a4f035d1a3ce18121d8d95a608520de5686", "author": {"user": {"login": "tflobbe", "name": "Tomas Fernandez Lobbe"}}, "url": "https://github.com/apache/lucene-solr/commit/4ab00a4f035d1a3ce18121d8d95a608520de5686", "committedDate": "2020-05-08T21:18:12Z", "message": "Add Changes entry"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2130, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}