{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NTYzMjIx", "number": 1546, "title": "SOLR: Use absolute paths for server paths.", "bodyText": "Fixes relative path ambiguities when the current working directory is atypical.\nI discovered this problem when running Solr standalone from IntelliJ using a CWD that was maybe slightly unexpected. Some relative paths like the core instance dir were getting resolved relative to the CWD instead of the solr home or core root dir.  So I think it's preferable to make the major directories of Solr be absolute to avoid this problem.  Not worth a CHANGES.txt entry, I think.\nBTW I thought maybe this might be related to https://issues.apache.org/jira/browse/SOLR-7323 because I was trying to reproduce it but no it's not.", "createdAt": "2020-05-31T05:20:35Z", "url": "https://github.com/apache/lucene-solr/pull/1546", "merged": true, "mergeCommit": {"oid": "a06f57c7e16b305c26e94c2a6e76e6b6528b8ce2"}, "closed": true, "closedAt": "2020-06-03T02:36:52Z", "author": {"login": "dsmiley"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmkooZAH2gAyNDI1NTYzMjIxOmI5NmJjODRhMGIzNzg5MTFhNjJiZGYyMDM5YThkYzQ4MzNlMGM3ZGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqUgUNAFqTQyOTI3NTczOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b96bc84a0b378911a62bdf2039a8dc4833e0c7dd", "author": {"user": {"login": "dsmiley", "name": "David Smiley"}}, "url": "https://github.com/apache/lucene-solr/commit/b96bc84a0b378911a62bdf2039a8dc4833e0c7dd", "committedDate": "2020-05-31T05:16:10Z", "message": "SOLR: Use absolute paths for server paths.\nFixes relative path ambiguities when the current working directory is atypical."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDYyNDg4", "url": "https://github.com/apache/lucene-solr/pull/1546#pullrequestreview-421462488", "createdAt": "2020-05-31T05:21:31Z", "commit": {"oid": "b96bc84a0b378911a62bdf2039a8dc4833e0c7dd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwNToyMTozMlrOGc2yeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQwNToyMTozMlrOGc2yeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjkxMDk2OQ==", "bodyText": "Just a little change to make the var effectively final, which is clearer.", "url": "https://github.com/apache/lucene-solr/pull/1546#discussion_r432910969", "createdAt": "2020-05-31T05:21:32Z", "author": {"login": "dsmiley"}, "path": "solr/core/src/java/org/apache/solr/handler/admin/CoreAdminOperation.java", "diffHunk": "@@ -77,7 +77,7 @@\n     String coreName = params.required().get(CoreAdminParams.NAME);\n     Map<String, String> coreParams = buildCoreParams(params);\n     CoreContainer coreContainer = it.handler.coreContainer;\n-    Path instancePath = coreContainer.getCoreRootDirectory().resolve(coreName);\n+    Path instancePath;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b96bc84a0b378911a62bdf2039a8dc4833e0c7dd"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxOTM4MzU5", "url": "https://github.com/apache/lucene-solr/pull/1546#pullrequestreview-421938359", "createdAt": "2020-06-01T15:21:08Z", "commit": {"oid": "b96bc84a0b378911a62bdf2039a8dc4833e0c7dd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e374c5c92e7a6964ef1c275a3ebb5b1f9b217fb7", "author": {"user": {"login": "dsmiley", "name": "David Smiley"}}, "url": "https://github.com/apache/lucene-solr/commit/e374c5c92e7a6964ef1c275a3ebb5b1f9b217fb7", "committedDate": "2020-06-02T05:05:16Z", "message": "SOLR: Also use absolute paths for SolrCore instanceDir.\nRemoved needless toAbsolutePath and normalize or needless resolving known-absolute paths with something else.\nNodeConfig: Moved toAbsolutePath to setters."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNTQwMDYw", "url": "https://github.com/apache/lucene-solr/pull/1546#pullrequestreview-422540060", "createdAt": "2020-06-02T10:19:58Z", "commit": {"oid": "e374c5c92e7a6964ef1c275a3ebb5b1f9b217fb7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4eb2be42918be1e190d1addc98c91c4a42f31b6c", "author": {"user": {"login": "dsmiley", "name": "David Smiley"}}, "url": "https://github.com/apache/lucene-solr/commit/4eb2be42918be1e190d1addc98c91c4a42f31b6c", "committedDate": "2020-06-02T18:11:15Z", "message": "almost done."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5Mjc1NzM5", "url": "https://github.com/apache/lucene-solr/pull/1546#pullrequestreview-429275739", "createdAt": "2020-06-11T20:44:18Z", "commit": {"oid": "4eb2be42918be1e190d1addc98c91c4a42f31b6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMDo0NDoxOFrOGiuJMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMDo0NDoxOFrOGiuJMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA2MDc4Nw==", "bodyText": "A bit late, but I don't think this is necessary, as all callers will send absolute paths. And if you ever get a relative path, resolving it with toAbsolutePath() leads to it being relative to whatever CWD the app is started with, while the typical resolving of relative instanceDir is to resolve it relative to CoreContainer#coreRootDirectory.", "url": "https://github.com/apache/lucene-solr/pull/1546#discussion_r439060787", "createdAt": "2020-06-11T20:44:18Z", "author": {"login": "janhoy"}, "path": "solr/core/src/java/org/apache/solr/core/CoreDescriptor.java", "diffHunk": "@@ -182,7 +182,7 @@ public CoreDescriptor(String coreName, CoreDescriptor other) {\n    */\n   public CoreDescriptor(String name, Path instanceDir, Map<String, String> coreProps,\n                         Properties containerProperties, ZkController zkController) {\n-    this.instanceDir = instanceDir;\n+    this.instanceDir = instanceDir.toAbsolutePath();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4eb2be42918be1e190d1addc98c91c4a42f31b6c"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2565, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}