{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwNzU5MDUz", "number": 1836, "title": "LUCENE-9317: Clean up split package in analyzers-common", "bodyText": "This is a draft pull request for review, to try to clean up package name conflicts between analyzers-common and core. Also I tried to make necessary changes as small as possible.\nSee https://issues.apache.org/jira/browse/LUCENE-9317 for more background.\nThe main changes are:\n\nMove analysis base classes to lucene-core (o.a.l.a) from analyzers-common (o.a.l.a.util)\nRename all service provider files (META-INF/services/...).\nMove o.a.l.a.standard.StandardTokenizer to lucene-core\nSplit o.a.l.a.standard in analyzers-common into o.a.l.a.classic and o.a.l.a.email\n\nWith above changes, there is no package name conflicts.\n\no.a.l.a.util and newly created o.a.l.a.classic and o.a.l.a.email only exist in analyzers-common\no.a.l.a.standard only exists in lucene-core\nother packages are not touched.\n\nCompiling whole Lucene/Solr main classes are fine, thanks to IDE's refactoring feature.\nTasks to be done:\n\nCreate fake factory base classes in o.a.l.a.util for backward compatibility (?)\nFix tests\nFix gradle scripts (?)", "createdAt": "2020-09-06T13:01:35Z", "url": "https://github.com/apache/lucene-solr/pull/1836", "merged": true, "mergeCommit": {"oid": "5e617ccc33d91998a992a87ae258de43ef75242e"}, "closed": true, "closedAt": "2020-09-28T07:49:29Z", "author": {"login": "mocobeta"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGNoCsgH2gAyNDgwNzU5MDUzOmZiZmFkZTc5OTMzOTdiMGQ1ZDMxNDNmOWQyM2RlOWFiYTY1NTY0NDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNNQcvgFqTQ5NzIwNzM5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fbfade7993397b0d5d3143f9d23de9aba6556449", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/fbfade7993397b0d5d3143f9d23de9aba6556449", "committedDate": "2020-09-06T12:33:17Z", "message": "Move analysis base classes and StandardAnalyzer to core from analyzers-common; split o.a.l.a.standard into o.a.l.a.{classic|email}"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb965dd3eecb299ba51ef7011d6b0379405dabe1", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/cb965dd3eecb299ba51ef7011d6b0379405dabe1", "committedDate": "2020-09-14T17:07:40Z", "message": "Merge branch 'master' into jira/LUCENE-9317-cleanup-analyzer-common"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46cf7e41190925c2802084c9ea1b3c73da4002bf", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/46cf7e41190925c2802084c9ea1b3c73da4002bf", "committedDate": "2020-09-22T05:55:25Z", "message": "resolve conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MDcwNjE1", "url": "https://github.com/apache/lucene-solr/pull/1836#pullrequestreview-495070615", "createdAt": "2020-09-23T21:44:21Z", "commit": {"oid": "46cf7e41190925c2802084c9ea1b3c73da4002bf"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73708901e145b8751959aeefdb96a33357390baf", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/73708901e145b8751959aeefdb96a33357390baf", "committedDate": "2020-09-26T16:06:38Z", "message": "Merge branch 'master' into jira/LUCENE-9317-cleanup-analyzer-common"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ba7788416500bb9bc0a2c0d1d2577edb039cf15", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/5ba7788416500bb9bc0a2c0d1d2577edb039cf15", "committedDate": "2020-09-27T06:24:49Z", "message": "Refactor/move/split all unit tests for analyisis factories; Update RefGuide."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8f28aaad0beec1f511a5afa28ce9431d3152c76", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/f8f28aaad0beec1f511a5afa28ce9431d3152c76", "committedDate": "2020-09-27T06:52:50Z", "message": "Fix javadocs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b03ff1117cdf890a0e64f7273a311330403c8ad3", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/b03ff1117cdf890a0e64f7273a311330403c8ad3", "committedDate": "2020-09-27T07:04:10Z", "message": "Make linters happy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6782fcf21d1a3e08607c8c7f22ef712c37eef8ab", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/6782fcf21d1a3e08607c8c7f22ef712c37eef8ab", "committedDate": "2020-09-27T07:45:10Z", "message": "Update jflex genetion task (renaming package to o.a.l.a.email)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f6f8118e815ec2b2bd3b29a8314c2427464b50d", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/2f6f8118e815ec2b2bd3b29a8314c2427464b50d", "committedDate": "2020-09-27T07:46:44Z", "message": "Add an entry to MIGRAGE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3db4f5ef7bf576d876eaf810c2b70d3a8e9e9b4", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/f3db4f5ef7bf576d876eaf810c2b70d3a8e9e9b4", "committedDate": "2020-09-27T08:02:22Z", "message": "Move ResourceLoader and ResourceLoaderAware to o.a.l.util package."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDk1MzU0", "url": "https://github.com/apache/lucene-solr/pull/1836#pullrequestreview-497095354", "createdAt": "2020-09-27T17:01:14Z", "commit": {"oid": "f3db4f5ef7bf576d876eaf810c2b70d3a8e9e9b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef30a0ea6d032e17c52b1e54d880995e0fac7989", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/ef30a0ea6d032e17c52b1e54d880995e0fac7989", "committedDate": "2020-09-28T04:47:23Z", "message": "delete obsoleted comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a31632d17703803b23883323ea974d24842759e5", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/a31632d17703803b23883323ea974d24842759e5", "committedDate": "2020-09-28T05:11:40Z", "message": "Add a CHANGES entry."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fdeb7ff5cded3fe9f9a7aaaa36bfd42e997fd17", "author": {"user": {"login": "mocobeta", "name": "Tomoko Uchida"}}, "url": "https://github.com/apache/lucene-solr/commit/2fdeb7ff5cded3fe9f9a7aaaa36bfd42e997fd17", "committedDate": "2020-09-28T06:00:12Z", "message": "exclude o.a.s.pkg.TestPackages test."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MjA3Mzkz", "url": "https://github.com/apache/lucene-solr/pull/1836#pullrequestreview-497207393", "createdAt": "2020-09-28T06:04:59Z", "commit": {"oid": "ef30a0ea6d032e17c52b1e54d880995e0fac7989"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNjowNDo1OVrOHYvg1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwNjowNDo1OVrOHYvg1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTcwNjMyNw==", "bodyText": "This is finally moved to test-framework from analyzers-common. :)", "url": "https://github.com/apache/lucene-solr/pull/1836#discussion_r495706327", "createdAt": "2020-09-28T06:04:59Z", "author": {"login": "mocobeta"}, "path": "lucene/test-framework/src/java/org/apache/lucene/analysis/BaseTokenStreamFactoryTestCase.java", "diffHunk": "@@ -39,10 +39,6 @@\n  *   assertTokenStreamContents(stream, new String[] { \"some\", \"text\", \"to\", \"analyze\" });\n  * </pre>\n  */\n-// TODO: this has to be here, since the abstract factories are not in lucene-core,\n-// so test-framework doesnt know about them...\n-// this also means we currently cannot use this in other analysis modules :(\n-// TODO: maybe after we improve the abstract factory/SPI apis, they can sit in core and resolve this.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef30a0ea6d032e17c52b1e54d880995e0fac7989"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2229, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}