{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0ODAwODM1", "number": 1992, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNTo1MToxM1rOFD07Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNTo1NTozN1rOFD0_gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NTU3MTk0OnYy", "diffSide": "RIGHT", "path": "solr/core/src/java/org/apache/solr/search/facet/FacetRangeProcessor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNTo1MToxM1rOIDqKcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNTo1MToxM1rOIDqKcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDcwNzQ0MA==", "bodyText": "Here (and in the else) I think I would explicitly do setCache(false) as it feels more readable to me, but I don't have strong opinions on that.", "url": "https://github.com/apache/lucene-solr/pull/1992#discussion_r540707440", "createdAt": "2020-12-11T05:51:13Z", "author": {"login": "madrob"}, "path": "solr/core/src/java/org/apache/solr/search/facet/FacetRangeProcessor.java", "diffHunk": "@@ -531,7 +533,20 @@ private  SimpleOrderedMap getRangeCountsIndexed() throws IOException {\n   private Query[] filters;\n   private DocSet[] intersections;\n   private void rangeStats(Range range, int slot) throws IOException {\n-    Query rangeQ = sf.getType().getRangeQuery(null, sf, range.low == null ? null : calc.formatValue(range.low), range.high==null ? null : calc.formatValue(range.high), range.includeLower, range.includeUpper);\n+    final Query rangeQ;\n+    {\n+      final Query rangeQuery = sf.getType().getRangeQuery(null, sf, range.low == null ? null : calc.formatValue(range.low), range.high==null ? null : calc.formatValue(range.high), range.includeLower, range.includeUpper);\n+      if (fcontext.cache) {\n+        rangeQ = rangeQuery;\n+      } else if (rangeQuery instanceof ExtendedQuery) {\n+        ((ExtendedQuery) rangeQuery).setCache(fcontext.cache);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d30f1e5a238ae29916f84c7af73d4c76564cdf2b"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NTU4MjczOnYy", "diffSide": "RIGHT", "path": "solr/core/src/test/org/apache/solr/search/facet/TestJsonRangeFacets.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNTo1NTozN1rOIDqQGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNTo1NTozN1rOIDqQGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDcwODg5MQ==", "bodyText": "Might as well store the string directly?", "url": "https://github.com/apache/lucene-solr/pull/1992#discussion_r540708891", "createdAt": "2020-12-11T05:55:37Z", "author": {"login": "madrob"}, "path": "solr/core/src/test/org/apache/solr/search/facet/TestJsonRangeFacets.java", "diffHunk": "@@ -41,6 +42,7 @@ public static void beforeTests() throws Exception {\n     if (Boolean.getBoolean(NUMERIC_POINTS_SYSPROP)) System.setProperty(NUMERIC_DOCVALUES_SYSPROP,\"true\");\n \n     initCore(\"solrconfig-tlog.xml\",\"schema_latest.xml\");\n+    cache = random().nextBoolean();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d30f1e5a238ae29916f84c7af73d4c76564cdf2b"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1154, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}