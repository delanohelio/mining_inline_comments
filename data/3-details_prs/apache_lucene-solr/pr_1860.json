{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1Mzg1ODYy", "number": 1860, "title": "LUCENE-9488 Update release process to work with gradle", "bodyText": "https://issues.apache.org/jira/browse/LUCENE-9488", "createdAt": "2020-09-11T19:25:19Z", "url": "https://github.com/apache/lucene-solr/pull/1860", "merged": true, "mergeCommit": {"oid": "3134f10a4255b5d766462251868a43e9bb9c03ce"}, "closed": true, "closedAt": "2020-09-15T15:10:17Z", "author": {"login": "madrob"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH5Vv9gH2gAyNDg1Mzg1ODYyOmRhNDhkZWFhYjQ3YWFlZDIyNjNiZWQxMzlhMjExYmU2NmRlZjlkMjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJJxaKAFqTQ4ODgyMDkwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "da48deaab47aaed2263bed139a211be66def9d29", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/da48deaab47aaed2263bed139a211be66def9d29", "committedDate": "2020-09-11T18:03:03Z", "message": "LUCENE-9475 Restore lucene/version.properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e90f858dbcf23ad9e799ef62a26e287eb43f381c", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/e90f858dbcf23ad9e799ef62a26e287eb43f381c", "committedDate": "2020-09-11T18:04:58Z", "message": "LUCENE-9488 Move releasewizrds commands ant to gradle\n\nRename a few of the trivial commands"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bd3a7c2386a3188922a12bb45b127ab3da47ad7", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/0bd3a7c2386a3188922a12bb45b127ab3da47ad7", "committedDate": "2020-09-11T18:09:47Z", "message": "drop check for ant"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e172e2f78eeff0b32a285ab64c550c099334369b", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/e172e2f78eeff0b32a285ab64c550c099334369b", "committedDate": "2020-09-11T18:12:17Z", "message": "Only need Java 11 defined"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6acd444ca99abe3ace925ddf34972ce5783c3966", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/6acd444ca99abe3ace925ddf34972ce5783c3966", "committedDate": "2020-09-11T19:12:06Z", "message": "copyright"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94c4cca26b3b4603ece6d22e6ecdef4968420193", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/94c4cca26b3b4603ece6d22e6ecdef4968420193", "committedDate": "2020-09-11T19:15:36Z", "message": "Back to JAVA11_HOME"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37023bf93dd484034488c979359da986f72560ba", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/37023bf93dd484034488c979359da986f72560ba", "committedDate": "2020-09-11T19:17:18Z", "message": "typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a574ab8192a63e085aacd571799af9f2ebcaffc", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/9a574ab8192a63e085aacd571799af9f2ebcaffc", "committedDate": "2020-09-11T19:17:48Z", "message": "typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15c155488730ccec99f6406772f407bab4efa3f0", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/15c155488730ccec99f6406772f407bab4efa3f0", "committedDate": "2020-09-11T19:24:14Z", "message": "clear gradle artifact cache"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MjI3MTU0", "url": "https://github.com/apache/lucene-solr/pull/1860#pullrequestreview-487227154", "createdAt": "2020-09-12T12:39:57Z", "commit": {"oid": "15c155488730ccec99f6406772f407bab4efa3f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQxMjozOTo1N1rOHQ04sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQxMjozOTo1N1rOHQ04sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQwNTc0NQ==", "bodyText": "Will the ./ syntax work on Windows?", "url": "https://github.com/apache/lucene-solr/pull/1860#discussion_r487405745", "createdAt": "2020-09-12T12:39:57Z", "author": {"login": "janhoy"}, "path": "dev-tools/scripts/releaseWizard.yaml", "diffHunk": "@@ -411,7 +410,7 @@ groups:\n         cmd: git pull\n         stdout: true\n       - !Command\n-        cmd: ant clean precommit\n+        cmd: ./gradlew clean check -x test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15c155488730ccec99f6406772f407bab4efa3f0"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64b339aa5b49c312b6fb9a7c995de588ea94ae71", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/64b339aa5b49c312b6fb9a7c995de588ea94ae71", "committedDate": "2020-09-14T15:50:16Z", "message": "generate local gradle settings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d2a7412edd204313224395c29fd28cfdd3bb172", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/7d2a7412edd204313224395c29fd28cfdd3bb172", "committedDate": "2020-09-14T18:31:31Z", "message": "ant to gradlew in buildAndRelease.py"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "674e1db60a9179ef55094a8becfbe850d18f7e40", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/674e1db60a9179ef55094a8becfbe850d18f7e40", "committedDate": "2020-09-14T22:00:53Z", "message": "dynamic gradle command"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21d57315112c348e6077f995c7ca6164e49d491e", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/21d57315112c348e6077f995c7ca6164e49d491e", "committedDate": "2020-09-14T22:01:29Z", "message": "WIP prepare-release to new targets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "223b656106acf77f5da8e6c67321695af142c3df", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/223b656106acf77f5da8e6c67321695af142c3df", "committedDate": "2020-09-14T22:04:29Z", "message": "quote syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34a7bf3fcf6f5bf1340ba78c7974ebbb5e77ef0c", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/34a7bf3fcf6f5bf1340ba78c7974ebbb5e77ef0c", "committedDate": "2020-09-14T22:05:47Z", "message": "three components for all version numbers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c39dc09d51e6c0947fec9b0b2d127ef82fc5e47e", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/c39dc09d51e6c0947fec9b0b2d127ef82fc5e47e", "committedDate": "2020-09-14T22:23:47Z", "message": "only major release gets next stable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "916e09b4aca0fab441cc74668e168fed22ae910b", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/916e09b4aca0fab441cc74668e168fed22ae910b", "committedDate": "2020-09-14T22:29:37Z", "message": "ant javadoc renamed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7921e69aece72f542ec9595f4157b50c4363e1b8", "author": {"user": {"login": "madrob", "name": "Mike Drob"}}, "url": "https://github.com/apache/lucene-solr/commit/7921e69aece72f542ec9595f4157b50c4363e1b8", "committedDate": "2020-09-14T22:32:40Z", "message": "git pull ff-only"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NzU5MDM4", "url": "https://github.com/apache/lucene-solr/pull/1860#pullrequestreview-488759038", "createdAt": "2020-09-15T14:42:16Z", "commit": {"oid": "7921e69aece72f542ec9595f4157b50c4363e1b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4ODE0ODU4", "url": "https://github.com/apache/lucene-solr/pull/1860#pullrequestreview-488814858", "createdAt": "2020-09-15T15:37:44Z", "commit": {"oid": "7921e69aece72f542ec9595f4157b50c4363e1b8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNTozNzo0NVrOHSH83Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNTozNzo0NVrOHSH83Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc2NjY4NQ==", "bodyText": "Please remove that file, it wont be used.\nIf release scripts need to edit the version number after a release, /build.gradle is your friend. Theres also a version.base and that's the source of information.\nhttps://github.com/apache/lucene-solr/blob/master/build.gradle#L38\nThere is a reason why this file was removed, so dont restore it!", "url": "https://github.com/apache/lucene-solr/pull/1860#discussion_r488766685", "createdAt": "2020-09-15T15:37:45Z", "author": {"login": "uschindler"}, "path": "lucene/version.properties", "diffHunk": "@@ -0,0 +1,10 @@\n+# This file contains some version properties as used by various build files.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7921e69aece72f542ec9595f4157b50c4363e1b8"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4ODIwOTAw", "url": "https://github.com/apache/lucene-solr/pull/1860#pullrequestreview-488820900", "createdAt": "2020-09-15T15:44:10Z", "commit": {"oid": "7921e69aece72f542ec9595f4157b50c4363e1b8"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNTo0NDoxMFrOHSIPaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNTo0NToyN1rOHSITEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc3MTQzMw==", "bodyText": "This must be -Dversion.release=%s, as gradle has some reserved meaning of version.", "url": "https://github.com/apache/lucene-solr/pull/1860#discussion_r488771433", "createdAt": "2020-09-15T15:44:10Z", "author": {"login": "uschindler"}, "path": "dev-tools/scripts/buildAndPushRelease.py", "diffHunk": "@@ -108,37 +107,26 @@ def prepare(root, version, gpgKeyID, gpgPassword):\n   print('  Check DOAP files')\n   checkDOAPfiles(version)\n \n-  print('  ant -Dtests.badapples=false clean validate documentation-lint test')\n-  run('ant -Dtests.badapples=false clean validate documentation-lint test')\n+  print('  ./gradlew -Dtests.badapples=false clean check')\n+  run('./gradlew -Dtests.badapples=false clean check')\n \n   open('rev.txt', mode='wb').write(rev.encode('UTF-8'))\n   \n-  print('  lucene prepare-release')\n-  os.chdir('lucene')\n-  cmd = 'ant -Dversion=%s' % version\n+  print('  prepare-release')\n+  cmd = './gradlew -Dversion=%s clean' % version", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7921e69aece72f542ec9595f4157b50c4363e1b8"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc3MjM3MA==", "bodyText": "This must be -Dversion.release=%s, as gradle has some reserved meaning of version.", "url": "https://github.com/apache/lucene-solr/pull/1860#discussion_r488772370", "createdAt": "2020-09-15T15:45:27Z", "author": {"login": "uschindler"}, "path": "dev-tools/scripts/releaseWizard.yaml", "diffHunk": "@@ -1059,7 +1056,7 @@ groups:\n         logfile: checkout-release-tag.log\n         tee: true\n       - !Command\n-        cmd: ant documentation -Dversion={{ release_version }}\n+        cmd: \"{{ gradle_cmd }} documentation -Dversion={{ release_version }}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7921e69aece72f542ec9595f4157b50c4363e1b8"}, "originalPosition": 122}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2262, "cost": 1, "resetAt": "2021-10-29T19:57:52Z"}}}