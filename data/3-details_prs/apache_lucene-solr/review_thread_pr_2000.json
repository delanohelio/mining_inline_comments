{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1Mjk3Nzk3", "number": 2000, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QxNToyNzoxMlrOEu0-aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QxNToyNzoxMlrOEu0-aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3NTM3ODk3OnYy", "diffSide": "RIGHT", "path": "lucene/core/src/java/org/apache/lucene/index/IndexUpgrader.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QxNToyNzoxMlrOHjeAlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyOTowMlrOHkJ3Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk1Mzg3OA==", "bodyText": "This have to be public because the renamed o.a.l.backward_index.TestBackwardsCompatibility refers this.", "url": "https://github.com/apache/lucene-solr/pull/2000#discussion_r506953878", "createdAt": "2020-10-17T15:27:12Z", "author": {"login": "mocobeta"}, "path": "lucene/core/src/java/org/apache/lucene/index/IndexUpgrader.java", "diffHunk": "@@ -77,9 +77,10 @@ private static void printUsage() {\n   public static void main(String[] args) throws IOException {\n     parseArgs(args).upgrade();\n   }\n-  \n+\n+  /** Parse arguments. */\n   @SuppressForbidden(reason = \"System.out required: command line tool\")\n-  static IndexUpgrader parseArgs(String[] args) throws IOException {\n+  public static IndexUpgrader parseArgs(String[] args) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff11963c2b1923a5b50c5603e9b778301535e8c1"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk1OTgzNw==", "bodyText": "Should the test maybe just call IndexUpgader.main(args) instead of upgrader = parseArgs(args) ... upgrader.upgrade()? @uschindler ?", "url": "https://github.com/apache/lucene-solr/pull/2000#discussion_r506959837", "createdAt": "2020-10-17T16:31:40Z", "author": {"login": "rmuir"}, "path": "lucene/core/src/java/org/apache/lucene/index/IndexUpgrader.java", "diffHunk": "@@ -77,9 +77,10 @@ private static void printUsage() {\n   public static void main(String[] args) throws IOException {\n     parseArgs(args).upgrade();\n   }\n-  \n+\n+  /** Parse arguments. */\n   @SuppressForbidden(reason = \"System.out required: command line tool\")\n-  static IndexUpgrader parseArgs(String[] args) throws IOException {\n+  public static IndexUpgrader parseArgs(String[] args) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk1Mzg3OA=="}, "originalCommit": {"oid": "ff11963c2b1923a5b50c5603e9b778301535e8c1"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2MTIwOQ==", "bodyText": "I don't know the code. But maybe indexupgrader can just provide an API to call it without first creating some arguments. This would also make it easier to use for 3rd party code.", "url": "https://github.com/apache/lucene-solr/pull/2000#discussion_r506961209", "createdAt": "2020-10-17T16:45:51Z", "author": {"login": "uschindler"}, "path": "lucene/core/src/java/org/apache/lucene/index/IndexUpgrader.java", "diffHunk": "@@ -77,9 +77,10 @@ private static void printUsage() {\n   public static void main(String[] args) throws IOException {\n     parseArgs(args).upgrade();\n   }\n-  \n+\n+  /** Parse arguments. */\n   @SuppressForbidden(reason = \"System.out required: command line tool\")\n-  static IndexUpgrader parseArgs(String[] args) throws IOException {\n+  public static IndexUpgrader parseArgs(String[] args) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk1Mzg3OA=="}, "originalCommit": {"oid": "ff11963c2b1923a5b50c5603e9b778301535e8c1"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE3MzYwOA==", "bodyText": "It should be possible to just call main() instead of calling parseArgs() and upgrade() separately. Can we omit the assertion error regarding to parseArgs()?\n        /*\n        IndexUpgrader upgrader = null;\n        try {\n          upgrader = IndexUpgrader.parseArgs(args.toArray(new String[0]));\n        } catch (Exception e) {\n          throw new AssertionError(\"unable to parse args: \" + args, e);\n        }\n        upgrader.upgrade();\n         */\n        // this could throw IOException. \n        // we cannot identify whether the error occurs in parseArgs() or upgrade()\n        IndexUpgrader.main(args.toArray(new String[0]));", "url": "https://github.com/apache/lucene-solr/pull/2000#discussion_r507173608", "createdAt": "2020-10-18T15:00:11Z", "author": {"login": "mocobeta"}, "path": "lucene/core/src/java/org/apache/lucene/index/IndexUpgrader.java", "diffHunk": "@@ -77,9 +77,10 @@ private static void printUsage() {\n   public static void main(String[] args) throws IOException {\n     parseArgs(args).upgrade();\n   }\n-  \n+\n+  /** Parse arguments. */\n   @SuppressForbidden(reason = \"System.out required: command line tool\")\n-  static IndexUpgrader parseArgs(String[] args) throws IOException {\n+  public static IndexUpgrader parseArgs(String[] args) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk1Mzg3OA=="}, "originalCommit": {"oid": "ff11963c2b1923a5b50c5603e9b778301535e8c1"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzE4NTExOQ==", "bodyText": "I think so.", "url": "https://github.com/apache/lucene-solr/pull/2000#discussion_r507185119", "createdAt": "2020-10-18T16:45:47Z", "author": {"login": "uschindler"}, "path": "lucene/core/src/java/org/apache/lucene/index/IndexUpgrader.java", "diffHunk": "@@ -77,9 +77,10 @@ private static void printUsage() {\n   public static void main(String[] args) throws IOException {\n     parseArgs(args).upgrade();\n   }\n-  \n+\n+  /** Parse arguments. */\n   @SuppressForbidden(reason = \"System.out required: command line tool\")\n-  static IndexUpgrader parseArgs(String[] args) throws IOException {\n+  public static IndexUpgrader parseArgs(String[] args) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk1Mzg3OA=="}, "originalCommit": {"oid": "ff11963c2b1923a5b50c5603e9b778301535e8c1"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY3MjM1OA==", "bodyText": "fixed the test and reverted the change for IndexUpgrader. 2b9c1bf", "url": "https://github.com/apache/lucene-solr/pull/2000#discussion_r507672358", "createdAt": "2020-10-19T11:29:02Z", "author": {"login": "mocobeta"}, "path": "lucene/core/src/java/org/apache/lucene/index/IndexUpgrader.java", "diffHunk": "@@ -77,9 +77,10 @@ private static void printUsage() {\n   public static void main(String[] args) throws IOException {\n     parseArgs(args).upgrade();\n   }\n-  \n+\n+  /** Parse arguments. */\n   @SuppressForbidden(reason = \"System.out required: command line tool\")\n-  static IndexUpgrader parseArgs(String[] args) throws IOException {\n+  public static IndexUpgrader parseArgs(String[] args) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk1Mzg3OA=="}, "originalCommit": {"oid": "ff11963c2b1923a5b50c5603e9b778301535e8c1"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1163, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}