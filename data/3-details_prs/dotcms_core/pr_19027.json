{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyOTIxOTA3", "number": 19027, "title": "core#18583 Permission Tab showing for user without the \"EDIT_PERMISSIONS\" permission", "bodyText": "If you create a role that does not include \"Edit Permissions\" and grant it to a limited user, they can still see the permissions tab. This tab should be hidden from the user if they do not have \"EDIT_PERMISSION\" on the content.\nNote they cannot see or edit the permissions, which is good. The bug is that the tab is displayed.", "createdAt": "2020-08-04T18:09:07Z", "url": "https://github.com/dotCMS/core/pull/19027", "merged": true, "mergeCommit": {"oid": "1f9ee5caeac1f0cfd9e9c9d37b43f39bd2a1604d"}, "closed": true, "closedAt": "2020-08-06T17:51:54Z", "author": {"login": "alfredo-dotcms"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7qogMAH2gAyNDYyOTIxOTA3OjYwYTljNDE3NTQ4YzI5N2E2MGFiMzgyODUwN2I2NTNkYTNiZDMxMjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8RYZFAFqTQ2MjYxOTQxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "60a9c417548c297a60ab3828507b653da3bd3123", "author": {"user": {"login": "alfredo-dotcms", "name": null}}, "url": "https://github.com/dotCMS/core/commit/60a9c417548c297a60ab3828507b653da3bd3123", "committedDate": "2020-08-04T18:07:52Z", "message": "core#18583 fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMTc3MTU1", "url": "https://github.com/dotCMS/core/pull/19027#pullrequestreview-461177155", "createdAt": "2020-08-04T21:10:12Z", "commit": {"oid": "60a9c417548c297a60ab3828507b653da3bd3123"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNzA1MDA0", "url": "https://github.com/dotCMS/core/pull/19027#pullrequestreview-461705004", "createdAt": "2020-08-05T14:13:13Z", "commit": {"oid": "60a9c417548c297a60ab3828507b653da3bd3123"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNDoxMzoxM1rOG8Ljfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNDoxMzoxM1rOG8Ljfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc1NzA1NQ==", "bodyText": "maybe hasViewPermision is a better name", "url": "https://github.com/dotCMS/core/pull/19027#discussion_r465757055", "createdAt": "2020-08-05T14:13:13Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/webapp/html/portlet/ext/contentlet/edit_contentlet.jsp", "diffHunk": "@@ -180,9 +180,13 @@\n \tfinal LayoutAPI layoutAPI = APILocator.getLayoutAPI();\n     boolean canSeeRules = layoutAPI.doesUserHaveAccessToPortlet(\"rules\", user)\n             && conPerAPI.doesUserHavePermission(contentlet, PermissionAPI.PERMISSION_USE, user)\n-               && conPerAPI.doesUserHavePermissions(contentlet.getParentPermissionable(), \"RULES: \" + PermissionAPI.PERMISSION_USE, user);\n+            && conPerAPI.doesUserHavePermissions(contentlet.getParentPermissionable(), \"RULES: \" + PermissionAPI.PERMISSION_USE, user);\n+    \n+    boolean canSeePermissions = layoutAPI.doesUserHaveAccessToPortlet(\"permissions\", user)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60a9c417548c297a60ab3828507b653da3bd3123"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjE5NDE3", "url": "https://github.com/dotCMS/core/pull/19027#pullrequestreview-462619417", "createdAt": "2020-08-06T15:16:34Z", "commit": {"oid": "60a9c417548c297a60ab3828507b653da3bd3123"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 701, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}