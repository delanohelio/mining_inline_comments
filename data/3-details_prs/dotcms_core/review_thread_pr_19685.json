{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NTUwNTA0", "number": 19685, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMzo1OToxM1rOFESFKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDozMDoyMlrOFFAuYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwMDM0ODU4OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/RelationshipFieldDataFetcher.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQyMzo1OToxM1rOIEWeZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzozNTo1M1rOIFxfNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQzMzQ0Ng==", "bodyText": "You can use this apache commons 3 function and code will be cleaner\nfinal String query = StringUtils.defaultString(environment.getArgument(\"query\"), \"\");", "url": "https://github.com/dotCMS/core/pull/19685#discussion_r541433446", "createdAt": "2020-12-11T23:59:13Z", "author": {"login": "victoralfaro-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/RelationshipFieldDataFetcher.java", "diffHunk": "@@ -55,8 +56,29 @@ public Object get(final DataFetchingEnvironment environment) throws Exception {\n \n             Object objectToReturn = records.doesAllowOnlyOne() ? null : Collections.emptyList();\n \n-            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,\n-                    true, isChildField, contentlet.getLanguageId(), contentlet.isLive());\n+//            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,\n+//                    true, isChildField, contentlet.getLanguageId(), contentlet.isLive());\n+\n+            final String query = environment.getArgument(\"query\")!=null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9ab90296a9d468d3f1eb638c44a6f74e9639426"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQzOTUwMQ==", "bodyText": "Same for the rest of String variables.", "url": "https://github.com/dotCMS/core/pull/19685#discussion_r541439501", "createdAt": "2020-12-12T00:06:57Z", "author": {"login": "victoralfaro-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/RelationshipFieldDataFetcher.java", "diffHunk": "@@ -55,8 +56,29 @@ public Object get(final DataFetchingEnvironment environment) throws Exception {\n \n             Object objectToReturn = records.doesAllowOnlyOne() ? null : Collections.emptyList();\n \n-            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,\n-                    true, isChildField, contentlet.getLanguageId(), contentlet.isLive());\n+//            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,\n+//                    true, isChildField, contentlet.getLanguageId(), contentlet.isLive());\n+\n+            final String query = environment.getArgument(\"query\")!=null", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQzMzQ0Ng=="}, "originalCommit": {"oid": "f9ab90296a9d468d3f1eb638c44a6f74e9639426"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU4NDE2MQ==", "bodyText": "I like it! will do", "url": "https://github.com/dotCMS/core/pull/19685#discussion_r542584161", "createdAt": "2020-12-14T17:50:44Z", "author": {"login": "dsilvam"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/RelationshipFieldDataFetcher.java", "diffHunk": "@@ -55,8 +56,29 @@ public Object get(final DataFetchingEnvironment environment) throws Exception {\n \n             Object objectToReturn = records.doesAllowOnlyOne() ? null : Collections.emptyList();\n \n-            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,\n-                    true, isChildField, contentlet.getLanguageId(), contentlet.isLive());\n+//            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,\n+//                    true, isChildField, contentlet.getLanguageId(), contentlet.isLive());\n+\n+            final String query = environment.getArgument(\"query\")!=null", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQzMzQ0Ng=="}, "originalCommit": {"oid": "f9ab90296a9d468d3f1eb638c44a6f74e9639426"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkyNDU5Nw==", "bodyText": "done", "url": "https://github.com/dotCMS/core/pull/19685#discussion_r542924597", "createdAt": "2020-12-14T23:35:53Z", "author": {"login": "dsilvam"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/RelationshipFieldDataFetcher.java", "diffHunk": "@@ -55,8 +56,29 @@ public Object get(final DataFetchingEnvironment environment) throws Exception {\n \n             Object objectToReturn = records.doesAllowOnlyOne() ? null : Collections.emptyList();\n \n-            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,\n-                    true, isChildField, contentlet.getLanguageId(), contentlet.isLive());\n+//            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,\n+//                    true, isChildField, contentlet.getLanguageId(), contentlet.isLive());\n+\n+            final String query = environment.getArgument(\"query\")!=null", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQzMzQ0Ng=="}, "originalCommit": {"oid": "f9ab90296a9d468d3f1eb638c44a6f74e9639426"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwMDM5MjI2OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotcms/rendering/velocity/viewtools/content/util/ContentUtils.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQwMDowNzo0NlrOIEW6WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzozNDozNVrOIFxc7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ0MDYwMA==", "bodyText": "Use a StringBuilder instead.", "url": "https://github.com/dotCMS/core/pull/19685#discussion_r541440600", "createdAt": "2020-12-12T00:07:46Z", "author": {"login": "victoralfaro-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/rendering/velocity/viewtools/content/util/ContentUtils.java", "diffHunk": "@@ -674,5 +676,34 @@ public static long count(String query, User user, String tmDate) {\n         return getPullResults(relationship, contentletIdentifier, condition, limit, offset, sort,\n                 user, tmDate, pullParents, -1, null);\n     }\n+\n+\tpublic static String addDefaultsToQuery(String query, final boolean editOrPreviewMode, final\n+\t\t\tHttpServletRequest request){\n+\t\tString q = \"\";\n+\n+\t\tif(query != null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9ab90296a9d468d3f1eb638c44a6f74e9639426"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQyOTA0Mw==", "bodyText": "agree", "url": "https://github.com/dotCMS/core/pull/19685#discussion_r542429043", "createdAt": "2020-12-14T14:31:42Z", "author": {"login": "erickgonzalez"}, "path": "dotCMS/src/main/java/com/dotcms/rendering/velocity/viewtools/content/util/ContentUtils.java", "diffHunk": "@@ -674,5 +676,34 @@ public static long count(String query, User user, String tmDate) {\n         return getPullResults(relationship, contentletIdentifier, condition, limit, offset, sort,\n                 user, tmDate, pullParents, -1, null);\n     }\n+\n+\tpublic static String addDefaultsToQuery(String query, final boolean editOrPreviewMode, final\n+\t\t\tHttpServletRequest request){\n+\t\tString q = \"\";\n+\n+\t\tif(query != null)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ0MDYwMA=="}, "originalCommit": {"oid": "f9ab90296a9d468d3f1eb638c44a6f74e9639426"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkyNDAxNA==", "bodyText": "Java optimizes this under the covers. It's not an advantage anymore.", "url": "https://github.com/dotCMS/core/pull/19685#discussion_r542924014", "createdAt": "2020-12-14T23:34:35Z", "author": {"login": "dsilvam"}, "path": "dotCMS/src/main/java/com/dotcms/rendering/velocity/viewtools/content/util/ContentUtils.java", "diffHunk": "@@ -674,5 +676,34 @@ public static long count(String query, User user, String tmDate) {\n         return getPullResults(relationship, contentletIdentifier, condition, limit, offset, sort,\n                 user, tmDate, pullParents, -1, null);\n     }\n+\n+\tpublic static String addDefaultsToQuery(String query, final boolean editOrPreviewMode, final\n+\t\t\tHttpServletRequest request){\n+\t\tString q = \"\";\n+\n+\t\tif(query != null)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ0MDYwMA=="}, "originalCommit": {"oid": "f9ab90296a9d468d3f1eb638c44a6f74e9639426"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzk5MDczOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/RelationshipFieldDataFetcher.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDozMDoyMlrOIFTLgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzozNDo0NlrOIFxdOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQyODAzNA==", "bodyText": "Remove unused code", "url": "https://github.com/dotCMS/core/pull/19685#discussion_r542428034", "createdAt": "2020-12-14T14:30:22Z", "author": {"login": "erickgonzalez"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/RelationshipFieldDataFetcher.java", "diffHunk": "@@ -55,8 +56,29 @@ public Object get(final DataFetchingEnvironment environment) throws Exception {\n \n             Object objectToReturn = records.doesAllowOnlyOne() ? null : Collections.emptyList();\n \n-            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,\n-                    true, isChildField, contentlet.getLanguageId(), contentlet.isLive());\n+//            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9ab90296a9d468d3f1eb638c44a6f74e9639426"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkyNDA4OQ==", "bodyText": "Done", "url": "https://github.com/dotCMS/core/pull/19685#discussion_r542924089", "createdAt": "2020-12-14T23:34:46Z", "author": {"login": "dsilvam"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/RelationshipFieldDataFetcher.java", "diffHunk": "@@ -55,8 +56,29 @@ public Object get(final DataFetchingEnvironment environment) throws Exception {\n \n             Object objectToReturn = records.doesAllowOnlyOne() ? null : Collections.emptyList();\n \n-            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,\n-                    true, isChildField, contentlet.getLanguageId(), contentlet.isLive());\n+//            List<Contentlet> relatedContent = contentlet.getRelated(fieldVar, user,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQyODAzNA=="}, "originalCommit": {"oid": "f9ab90296a9d468d3f1eb638c44a6f74e9639426"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1728, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}