{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2Mzc1Njcw", "number": 18971, "title": "#18970 : Adding some validations steps that will indicate a situation\u2026", "bodyText": "\u2026 in which Push Publishing wants to access and edit an existing contentlet that is archived. This change adds a useful logging and status message for the PP bundle history.\nNOTE: THE TICKET NUMBER IN THE COMMIT MESSAGE IS WRONG. THIS IS THE RIGHT ONE: #18920", "createdAt": "2020-07-24T16:20:33Z", "url": "https://github.com/dotCMS/core/pull/18971", "merged": true, "mergeCommit": {"oid": "ed3fdfa9d0691220b41f7a737ca728341b5a519f"}, "closed": true, "closedAt": "2020-08-24T19:49:31Z", "author": {"login": "jcastro-dotcms"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4GevfgH2gAyNDU2Mzc1NjcwOmMyMjQxZDk4ZTk5ZmZjNzZhYjM4Yjg1MDMwZjE4ZmJlMTg3Y2E0ZGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCHuK7gFqTQ3Mzc5MTU4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c2241d98e99ffc76ab38b85030f18fbe187ca4db", "author": {"user": {"login": "jcastro-dotcms", "name": "Jose Castro"}}, "url": "https://github.com/dotCMS/core/commit/c2241d98e99ffc76ab38b85030f18fbe187ca4db", "committedDate": "2020-07-24T16:18:51Z", "message": "#18970 : Adding some validations steps that will indicate a situation in which Push Publishing wants to access and edit an existing contentlet that is archived. This change adds a useful logging and status message for the PP bundle history."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDIzMjEx", "url": "https://github.com/dotCMS/core/pull/18971#pullrequestreview-455023211", "createdAt": "2020-07-24T16:26:57Z", "commit": {"oid": "c2241d98e99ffc76ab38b85030f18fbe187ca4db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MDUwNzA2", "url": "https://github.com/dotCMS/core/pull/18971#pullrequestreview-455050706", "createdAt": "2020-07-24T17:08:57Z", "commit": {"oid": "c2241d98e99ffc76ab38b85030f18fbe187ca4db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1ODE5NzUw", "url": "https://github.com/dotCMS/core/pull/18971#pullrequestreview-455819750", "createdAt": "2020-07-27T14:11:49Z", "commit": {"oid": "c2241d98e99ffc76ab38b85030f18fbe187ca4db"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0bd0d77d7f98140d0592a2b41c997979e43e2f9", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/e0bd0d77d7f98140d0592a2b41c997979e43e2f9", "committedDate": "2020-08-21T23:08:42Z", "message": "#18920 Adding IT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc82ae0aa014ed7cc4ea314edfa95295c715b48c", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/fc82ae0aa014ed7cc4ea314edfa95295c715b48c", "committedDate": "2020-08-24T16:45:25Z", "message": "Merge branch 'master' of https://github.com/dotCMS/core into issue-18920-existing-archived-content-causing-push-to-fail"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNjgxNTc0", "url": "https://github.com/dotCMS/core/pull/18971#pullrequestreview-473681574", "createdAt": "2020-08-24T16:52:50Z", "commit": {"oid": "fc82ae0aa014ed7cc4ea314edfa95295c715b48c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNjo1Mjo1MFrOHFt3Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNjo1Mjo1MFrOHFt3Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc1NjM4Nw==", "bodyText": "Codacy found an issue: Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block", "url": "https://github.com/dotCMS/core/pull/18971#discussion_r475756387", "createdAt": "2020-08-24T16:52:50Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/content/elasticsearch/business/ESContentletAPIImplTest.java", "diffHunk": "@@ -673,6 +672,32 @@ public void testGetArchivedRelatedChild()\n         }\n     }\n \n+\n+    /**\n+     * Method to test: {@link ESContentletAPIImpl#checkin(Contentlet, User, boolean)}\n+     * Given Scenario: Try to check-in a version of an archived page with {@link Contentlet#DONT_VALIDATE_ME} flag on\n+     * ExpectedResult: The method should not throw a {@link NullPointerException}, but a {@link DotDataException} because\n+     * we are trying to check-in a version of an archived content\n+     */\n+    @Test\n+    public void testCheckInArchivedPageShouldThrowDotDataException() {\n+        final Contentlet contentlet = TestDataUtils\n+                .getPageContent(true, APILocator.getLanguageAPI().getDefaultLanguage().getId());\n+        ContentletDataGen.archive(contentlet);\n+\n+        final Contentlet newVersion = ContentletDataGen.checkout(contentlet);\n+        newVersion.setBoolProperty(Contentlet.DONT_VALIDATE_ME, true);\n+        try {\n+            ContentletDataGen.checkin(newVersion);\n+            fail();\n+        } catch (Exception e){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc82ae0aa014ed7cc4ea314edfa95295c715b48c"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNzkxNTg4", "url": "https://github.com/dotCMS/core/pull/18971#pullrequestreview-473791588", "createdAt": "2020-08-24T19:24:51Z", "commit": {"oid": "fc82ae0aa014ed7cc4ea314edfa95295c715b48c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 670, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}