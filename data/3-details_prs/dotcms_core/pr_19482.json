{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3Nzg2NDUx", "number": 19482, "title": "Issue 18730", "bodyText": "This PR is for migrate the template request to the DB from hibernate to dotconnect, now instead of calling the InodeFactory that uses hibernate it calls the TemplateAPI.\nFixes for the import/export util were made to support the removed mapping of hibernate.\nMost of the code already had tests but since some  methods were added, Some tests were created.", "createdAt": "2020-10-21T18:43:46Z", "url": "https://github.com/dotCMS/core/pull/19482", "merged": true, "mergeCommit": {"oid": "fa81ff389d6b962dea752f9515dd293985db9bc4"}, "closed": true, "closedAt": "2020-10-29T15:37:34Z", "author": {"login": "erickgonzalez"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdS7AGlgH2gAyNTA3Nzg2NDUxOmRiNjhiYjExZmI3MzIzY2NhN2E3NmJhNzY4YzQ0ZTBmZjVlNTY0Yzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWWwCYgFqTUxNjk0MzUxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "db68bb11fb7323cca7a76ba768c44e0ff5e564c7", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/db68bb11fb7323cca7a76ba768c44e0ff5e564c7", "committedDate": "2020-10-16T00:12:23Z", "message": "#18730 remove mapping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43769b5f61c47b1b9e7fd65d51b15788a532fe6b", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/43769b5f61c47b1b9e7fd65d51b15788a532fe6b", "committedDate": "2020-10-16T00:13:36Z", "message": "#18730 migrate API to use dotconnect"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4ee0e0b000c49c7963c39e82bf5953d11094a0b", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/c4ee0e0b000c49c7963c39e82bf5953d11094a0b", "committedDate": "2020-10-16T16:22:20Z", "message": "#18730 move classes where they belong"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe7e610157683eecf5305daaf9e7659d661f9f28", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/fe7e610157683eecf5305daaf9e7659d661f9f28", "committedDate": "2020-10-16T17:40:51Z", "message": "#18730 a bit of cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "625af82e2d98770b94d372c39d6244bf038e0cd0", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/625af82e2d98770b94d372c39d6244bf038e0cd0", "committedDate": "2020-10-16T21:14:28Z", "message": "#18730 call factory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4726b2eea68619f9a9df179a32b66bbe1b6e515d", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/4726b2eea68619f9a9df179a32b66bbe1b6e515d", "committedDate": "2020-10-20T20:58:05Z", "message": "Merge branch 'master' of github.com:dotCMS/core into issue-18730"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7f7a01172aab5baab2a35bb943b079fdee91b8d", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/b7f7a01172aab5baab2a35bb943b079fdee91b8d", "committedDate": "2020-10-21T18:35:17Z", "message": "#18730 fixes for history, delete version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c53c3f74deba61640b3261facc3984dfadd903f", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/2c53c3f74deba61640b3261facc3984dfadd903f", "committedDate": "2020-10-21T18:38:40Z", "message": "#18730 fixes for publish, unpublish, archive"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c593fed2e3cc1cf053ea7cb9ab399ae35e9cf88", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/6c593fed2e3cc1cf053ea7cb9ab399ae35e9cf88", "committedDate": "2020-10-21T18:39:28Z", "message": "Merge branch 'master' of github.com:dotCMS/core into issue-18730"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fabdd2d51047f2ea94d08670fbf4bfc48a2219ad", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/fabdd2d51047f2ea94d08670fbf4bfc48a2219ad", "committedDate": "2020-10-22T15:42:00Z", "message": "sql to recreate getChildrenClass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e435b7327338572337f00ebee7382c0b37393a8b", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/e435b7327338572337f00ebee7382c0b37393a8b", "committedDate": "2020-10-22T16:05:36Z", "message": "#18730 call findAllVersions from template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "324a0739e76468db94132ed8af1971ddc68a04a4", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/324a0739e76468db94132ed8af1971ddc68a04a4", "committedDate": "2020-10-22T18:02:19Z", "message": "#18730 get idate and owner from inode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "103d1c9b15ec9650818005a6e12b9c8f68b6a155", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/103d1c9b15ec9650818005a6e12b9c8f68b6a155", "committedDate": "2020-10-22T20:17:40Z", "message": "#18730 should update all versions of the template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1de967e871c05a8b0c08b5900273f719c9d7b7eb", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/1de967e871c05a8b0c08b5900273f719c9d7b7eb", "committedDate": "2020-10-22T21:45:01Z", "message": "Merge branch 'master' of github.com:dotCMS/core into issue-18730"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93bd51b9677b63142c8506765021448a1e937123", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/93bd51b9677b63142c8506765021448a1e937123", "committedDate": "2020-10-22T23:37:36Z", "message": "#18730 export template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0dd2edd3998742e42f494879709a3280f9e3f456", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/0dd2edd3998742e42f494879709a3280f9e3f456", "committedDate": "2020-10-23T00:22:23Z", "message": "#18730 doc tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92b80c004067c116664128f11a2755eb0816aa95", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/92b80c004067c116664128f11a2755eb0816aa95", "committedDate": "2020-10-23T00:52:51Z", "message": "#18730 tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/bc72abff3e2f9a7262d8a202866fc8d97c798e57", "committedDate": "2020-10-23T03:54:40Z", "message": "remove call InodeFactory.getInode"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjYwODQw", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-515260840", "createdAt": "2020-10-23T04:01:49Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo0OVrOHm7Ynw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo0OVrOHm7Ynw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU4MDg5NQ==", "bodyText": "Codacy found an issue: A method/constructor should not explicitly throw java.lang.Exception", "url": "https://github.com/dotCMS/core/pull/19482#discussion_r510580895", "createdAt": "2020-10-23T04:01:49Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/templates/business/TemplateAPI.java", "diffHunk": "@@ -220,7 +219,7 @@ Template copy(Template sourceTemplate, Host destinationHost, boolean forceOverwr\n \t * @throws Exception\n \t */\n \t@Deprecated\n-\tpublic boolean delete(Template template, User user, boolean respectFrontendRoles) throws DotSecurityException, Exception;\n+\tboolean delete(Template template, User user, boolean respectFrontendRoles) throws DotSecurityException, Exception;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "originalPosition": 183}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjYwODQ0", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-515260844", "createdAt": "2020-10-23T04:01:50Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1MFrOHm7YqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1MFrOHm7YqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU4MDkwNA==", "bodyText": "Codacy found an issue: Avoid variables with short names like id", "url": "https://github.com/dotCMS/core/pull/19482#discussion_r510580904", "createdAt": "2020-10-23T04:01:50Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/templates/business/TemplateAPIImpl.java", "diffHunk": "@@ -482,17 +467,14 @@ public Template find(String inode, User user,  boolean respectFrontEndRoles) thr\n \n \t}\n \n-\n-\n-\n-\tpublic Template findLiveTemplate(String id, User user, boolean respectFrontendRoles) throws DotDataException, DotSecurityException {\n+\tpublic Template findLiveTemplate(final String id, final User user, final boolean respectFrontendRoles) throws DotDataException, DotSecurityException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "originalPosition": 242}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjYwODQ3", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-515260847", "createdAt": "2020-10-23T04:01:51Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1MVrOHm7YrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1MVrOHm7YrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU4MDkwOA==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotcms.contenttype.model.type.BaseContentType'", "url": "https://github.com/dotCMS/core/pull/19482#discussion_r510580908", "createdAt": "2020-10-23T04:01:51Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/templates/business/TemplateAPITest.java", "diffHunk": "@@ -1,10 +1,14 @@\n package com.dotmarketing.portlets.templates.business;\n \n import com.dotcms.IntegrationTestBase;\n+import com.dotcms.content.elasticsearch.business.ESContentFactoryImpl;\n+import com.dotcms.contenttype.model.type.BaseContentType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjYwODUz", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-515260853", "createdAt": "2020-10-23T04:01:52Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1MlrOHm7YsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1MlrOHm7YsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU4MDkxMw==", "bodyText": "Codacy found an issue: Avoid throwing raw exception types.", "url": "https://github.com/dotCMS/core/pull/19482#discussion_r510580913", "createdAt": "2020-10-23T04:01:52Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/rendering/velocity/viewtools/DotTemplateTool.java", "diffHunk": "@@ -132,15 +134,16 @@ public static void removeFromLayoutCache(final String templateInode){\n         layoutCache.invalidate(templateInode + true);\n     }\n \n-    private static DrawedBody getDrawedBody(String themeInode, User user) throws DotDataException, DotSecurityException {\n-        final Identifier ident = APILocator.getIdentifierAPI().findFromInode(themeInode);\n-        final Template template = APILocator.getTemplateAPI().findWorkingTemplate(ident.getId(), user, false);\n+    private static DrawedBody getDrawedBody(String themeInodeOrId, User user) throws DotDataException, DotSecurityException {\n+        final Template template = FactoryLocator.getTemplateFactory().find(themeInodeOrId);//If null themeInodeOrId is a Id\n+        final String identifier = template!=null ? template.getIdentifier() : themeInodeOrId;\n+        final Template workingTemplate = APILocator.getTemplateAPI().findWorkingTemplate(identifier, user, false);\n \n-        if (!template.isDrawed()){\n-            throw new RuntimeException(\"Template with inode: \" + themeInode + \" is not drawed\");\n+        if (!workingTemplate.isDrawed()){\n+            throw new RuntimeException(\"Template with inode: \" + themeInodeOrId + \" is not drawed\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjYwODU5", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-515260859", "createdAt": "2020-10-23T04:01:53Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1M1rOHm7YuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1M1rOHm7YuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU4MDkyMA==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotcms.content.elasticsearch.business.ESContentFactoryImpl'", "url": "https://github.com/dotCMS/core/pull/19482#discussion_r510580920", "createdAt": "2020-10-23T04:01:53Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/templates/business/TemplateAPITest.java", "diffHunk": "@@ -1,10 +1,14 @@\n package com.dotmarketing.portlets.templates.business;\n \n import com.dotcms.IntegrationTestBase;\n+import com.dotcms.content.elasticsearch.business.ESContentFactoryImpl;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjYwODYy", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-515260862", "createdAt": "2020-10-23T04:01:54Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1NFrOHm7Yuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1NFrOHm7Yuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU4MDkyMw==", "bodyText": "Codacy found an issue: Avoid variables with short names like id", "url": "https://github.com/dotCMS/core/pull/19482#discussion_r510580923", "createdAt": "2020-10-23T04:01:54Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/templates/business/TemplateAPIImpl.java", "diffHunk": "@@ -455,23 +440,23 @@ public boolean delete(Template template, User user, boolean respectFrontendRoles\n \t\t}\n \t}\n \n-\tpublic Template findWorkingTemplate(String id, User user, boolean respectFrontendRoles) throws DotDataException, DotSecurityException {\n-\t\tVersionInfo info = APILocator.getVersionableAPI().getVersionInfo(id);\n+\tpublic Template findWorkingTemplate(final String id, final User user, final boolean respectFrontendRoles) throws DotDataException, DotSecurityException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "originalPosition": 210}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjYwODY3", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-515260867", "createdAt": "2020-10-23T04:01:55Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1NVrOHm7Yvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1NVrOHm7Yvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU4MDkyNw==", "bodyText": "Codacy found an issue: All methods are static.  Consider using a utility class instead. Alternatively, you could add a private constructor or make the class abstract to silence this warning.", "url": "https://github.com/dotCMS/core/pull/19482#discussion_r510580927", "createdAt": "2020-10-23T04:01:55Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/templates/business/TemplateSQL.java", "diffHunk": "@@ -0,0 +1,63 @@\n+package com.dotmarketing.portlets.templates.business;\n+\n+import com.dotmarketing.beans.Inode.Type;\n+\n+public class TemplateSQL {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MjYwODcz", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-515260873", "createdAt": "2020-10-23T04:01:56Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1NlrOHm7Ywg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNDowMTo1NlrOHm7Ywg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU4MDkzMA==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'io.vavr.control.Try'", "url": "https://github.com/dotCMS/core/pull/19482#discussion_r510580930", "createdAt": "2020-10-23T04:01:56Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/rendering/velocity/viewtools/DotTemplateTool.java", "diffHunk": "@@ -21,6 +22,7 @@\n import com.dotmarketing.util.UtilMethods;\n import com.liferay.portal.model.User;\n \n+import io.vavr.control.Try;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1ODM1NDM4", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-515835438", "createdAt": "2020-10-23T16:42:31Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNjo0MjozMVrOHnVglg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNjo0MjozMVrOHnVglg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAwODkxOA==", "bodyText": "remove this", "url": "https://github.com/dotCMS/core/pull/19482#discussion_r511008918", "createdAt": "2020-10-23T16:42:31Z", "author": {"login": "nollymar"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/templates/business/TemplateSQL.java", "diffHunk": "@@ -0,0 +1,63 @@\n+package com.dotmarketing.portlets.templates.business;\n+\n+import com.dotmarketing.beans.Inode.Type;\n+\n+public class TemplateSQL {\n+\n+    public static TemplateSQL getInstance(){ return new TemplateSQL(); }\n+\n+    public static final String FIND_TEMPLATES_BY_HOST_INODE =\n+            \"select template.*, template_1_.*  from \" + Type.TEMPLATE.getTableName() + \" template, inode template_1_, \" +\n+                    \"identifier template_identifier, \" + Type.TEMPLATE.getVersionTableName() + \" vi where \" +\n+                    \"template_identifier.host_inode = ? and template_identifier.id = template.identifier and \" +\n+                    \"template.inode = template_1_.inode and vi.identifier=template.identifier and \" +\n+                    \"template.inode=vi.working_inode \";\n+\n+    public static final String FIND_WORKING_TEMPLATE_BY_HOST_INODE_AND_TITLE =\n+            \"select template.*, template_1_.* from \" + Type.TEMPLATE.getTableName() + \" template, inode template_1_, \" +\n+                    \"identifier template_identifier, \" + Type.TEMPLATE.getVersionTableName() + \" vi where \" +\n+                    \"template_identifier.host_inode = ? and template_identifier.id = template.identifier and \" +\n+                    \"vi.identifier=template_identifier.id and template.title = ? and \" +\n+                    \"template.inode = template_1_.inode and \" +\n+                    \"template.inode=vi.working_inode \";\n+\n+//    public static final String SELECT_ALL_FIELDS = \"select inode, show_on_menu, title, mod_date, mod_user, \" +\n+//            \"sort_order, friendly_name, body, header, footer, image, identifier, drawed, drawed_body, \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1ODM2Njc4", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-515836678", "createdAt": "2020-10-23T16:44:23Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2OTQzNTEx", "url": "https://github.com/dotCMS/core/pull/19482#pullrequestreview-516943511", "createdAt": "2020-10-26T16:13:57Z", "commit": {"oid": "bc72abff3e2f9a7262d8a202866fc8d97c798e57"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1768, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}