{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMTkwNjIy", "number": 19419, "reviewThreads": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTozMToxM1rOErzDZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0N1rOErzebw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzYwNjc4OnYy", "diffSide": "RIGHT", "path": "dotCMS/dependencies.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTozMToxM1rOHexINw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTozMToxM1rOHexINw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAyNDI0Nw==", "bodyText": "This change is not necessary", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502024247", "createdAt": "2020-10-08T21:31:13Z", "author": {"login": "nollymar"}, "path": "dotCMS/dependencies.gradle", "diffHunk": "@@ -3,7 +3,7 @@ dependencies {\n \n     def eeType = dotcmsReleaseVersion.equals(\"master\") ? '-SNAPSHOT' : ''\n \n-    compile group: 'com.dotcms.enterprise', name: 'ee', version: dotcmsReleaseVersion + eeType, changing: true\n+    compile group: 'com.dotcms.enterprise', name: 'ee', version: '5.3.9', changing: true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b2b88f587976e388986b41c5b07155ed16405db"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NDgyOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotcms/rest/api/v1/template/TemplateResource.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyMlrOHexw5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyMlrOHexw5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDY2Mw==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotmarketing.business.DotStateException'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034663", "createdAt": "2020-10-08T21:55:22Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/rest/api/v1/template/TemplateResource.java", "diffHunk": "@@ -7,13 +7,15 @@\n import com.dotcms.rest.ResponseEntityView;\n import com.dotcms.rest.WebResource;\n import com.dotcms.rest.annotation.NoCache;\n+import com.dotcms.rest.exception.ValidationException;\n import com.dotcms.util.CollectionsUtils;\n import com.dotcms.util.PaginationUtil;\n import com.dotcms.util.pagination.ContainerPaginator;\n import com.dotcms.util.pagination.OrderDirection;\n import com.dotcms.util.pagination.TemplatePaginator;\n import com.dotmarketing.beans.Host;\n import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.business.DotStateException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NDg1OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyM1rOHexw7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyM1rOHexw7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDY2OA==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotmarketing.portlets.contentlet.transform.strategy.KeyValueViewStrategy'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034668", "createdAt": "2020-10-08T21:55:23Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializer.java", "diffHunk": "@@ -1,9 +1,15 @@\n package com.dotmarketing.portlets.htmlpageasset.business.render.page;\n \n+import com.dotcms.contenttype.model.field.Field;\n+import com.dotcms.contenttype.model.field.KeyValueField;\n+import com.dotcms.contenttype.model.type.ContentType;\n import com.dotmarketing.exception.DotRuntimeException;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n import com.dotmarketing.portlets.contentlet.transform.DotContentletTransformer;\n import com.dotmarketing.portlets.contentlet.transform.DotTransformerBuilder;\n+import com.dotmarketing.portlets.contentlet.transform.strategy.KeyValueViewStrategy;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NDkxOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotmarketing/startup/runonce/Task05390MakeRoomForLongerJobDetailTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyNFrOHexw9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyNFrOHexw9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDY3Nw==", "bodyText": "Codacy found an issue: A method/constructor should not explicitly throw java.lang.Exception", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034677", "createdAt": "2020-10-08T21:55:24Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/startup/runonce/Task05390MakeRoomForLongerJobDetailTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.dotmarketing.startup.runonce;\n+\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.db.DbConnectionFactory;\n+import com.dotmarketing.db.DbType;\n+import com.dotmarketing.util.Logger;\n+import org.junit.Assert;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+public class Task05390MakeRoomForLongerJobDetailTest {\n+\n+    @BeforeClass\n+    public static void prepare() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NDk3OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyNVrOHexw_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyNVrOHexw_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDY4NQ==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotmarketing.util.UtilMethods'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034685", "createdAt": "2020-10-08T21:55:25Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializer.java", "diffHunk": "@@ -1,9 +1,15 @@\n package com.dotmarketing.portlets.htmlpageasset.business.render.page;\n \n+import com.dotcms.contenttype.model.field.Field;\n+import com.dotcms.contenttype.model.field.KeyValueField;\n+import com.dotcms.contenttype.model.type.ContentType;\n import com.dotmarketing.exception.DotRuntimeException;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n import com.dotmarketing.portlets.contentlet.transform.DotContentletTransformer;\n import com.dotmarketing.portlets.contentlet.transform.DotTransformerBuilder;\n+import com.dotmarketing.portlets.contentlet.transform.strategy.KeyValueViewStrategy;\n import com.dotmarketing.portlets.templates.model.Template;\n+import com.dotmarketing.util.UtilMethods;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTAxOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotcms/rest/api/v1/template/TemplateResource.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyNlrOHexxAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyNlrOHexxAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDY5MA==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotcms.rest.exception.ValidationException'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034690", "createdAt": "2020-10-08T21:55:26Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/rest/api/v1/template/TemplateResource.java", "diffHunk": "@@ -7,13 +7,15 @@\n import com.dotcms.rest.ResponseEntityView;\n import com.dotcms.rest.WebResource;\n import com.dotcms.rest.annotation.NoCache;\n+import com.dotcms.rest.exception.ValidationException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTA1OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyN1rOHexxCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyN1rOHexxCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDY5Nw==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotcms.contenttype.model.type.ContentType'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034697", "createdAt": "2020-10-08T21:55:27Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializer.java", "diffHunk": "@@ -1,9 +1,15 @@\n package com.dotmarketing.portlets.htmlpageasset.business.render.page;\n \n+import com.dotcms.contenttype.model.field.Field;\n+import com.dotcms.contenttype.model.field.KeyValueField;\n+import com.dotcms.contenttype.model.type.ContentType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTA5OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyOFrOHexxDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyOFrOHexxDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDcwMg==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotcms.contenttype.model.field.TextField'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034702", "createdAt": "2020-10-08T21:55:28Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package com.dotmarketing.portlets.htmlpageasset.business.render.page;\n+\n+import com.dotcms.contenttype.model.field.Field;\n+import com.dotcms.contenttype.model.field.KeyValueField;\n+import com.dotcms.contenttype.model.field.TextField;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTExOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyOVrOHexxEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NToyOVrOHexxEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDcwNQ==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'java.util.Collections.emptyMap'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034705", "createdAt": "2020-10-08T21:55:29Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializer.java", "diffHunk": "@@ -13,10 +19,13 @@\n import java.io.CharArrayReader;\n import java.io.IOException;\n import java.util.Collections;\n+import java.util.List;\n import java.util.Map;\n import java.util.Objects;\n import java.util.TreeMap;\n \n+import static java.util.Collections.emptyMap;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTE3OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotcms/security/apps/SecretsStoreKeyStoreImplTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozMFrOHexxGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozMFrOHexxGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDcxNQ==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'java.security.KeyStoreException'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034715", "createdAt": "2020-10-08T21:55:30Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/security/apps/SecretsStoreKeyStoreImplTest.java", "diffHunk": "@@ -1,13 +1,17 @@\n package com.dotcms.security.apps;\n \n+import static com.dotcms.security.apps.SecretsStoreKeyStoreImpl.SECRETS_KEYSTORE_PASSWORD_KEY;\n import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertFalse;\n import static org.junit.Assert.assertNotNull;\n import static org.junit.Assert.assertTrue;\n \n import com.dotcms.util.IntegrationTestInitService;\n import com.dotmarketing.business.CacheLocator;\n+import com.dotmarketing.util.Config;\n import com.dotmarketing.util.UUIDGenerator;\n+import java.security.KeyStore;\n+import java.security.KeyStoreException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTIzOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/templates/business/TemplateAPI.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozMVrOHexxJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozMVrOHexxJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDcyNQ==", "bodyText": "Codacy found an issue: Unnecessary modifier 'public' on method 'deleteTemplate': the method is declared in an interface type", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034725", "createdAt": "2020-10-08T21:55:31Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/templates/business/TemplateAPI.java", "diffHunk": "@@ -193,16 +193,33 @@ Template copy(Template sourceTemplate, Host destinationHost, boolean forceOverwr\n \t */\n \tvoid unarchive (Template template);\n \n+\t/**\n+\t * Delete the specified template.\n+\t *\n+\t * Template should be archive, otherwise DotStateException\n+\t * Should have write permission, otherwise SecurityException\n+\t *\n+\t * @param template {@link Template}\n+\t * @param user     {@link User}\n+\t * @param respectFrontendRoles {@link Boolean}\n+\t * @return boolean\n+\t * @throws DotSecurityException\n+\t * @throws Exception\n+\t */\n+\tpublic boolean deleteTemplate(Template template, User user, boolean respectFrontendRoles);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTMzOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/templates/design/bean/TemplateLayout.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozMlrOHexxLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozMlrOHexxLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDczNQ==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'java.util.stream.Stream'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034735", "createdAt": "2020-10-08T21:55:32Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/templates/design/bean/TemplateLayout.java", "diffHunk": "@@ -19,6 +19,7 @@\n import java.util.List;\n import java.util.Set;\n import java.util.stream.Collectors;\n+import java.util.stream.Stream;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTM5OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozM1rOHexxOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozM1rOHexxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDc0NA==", "bodyText": "Codacy found an issue: The String literal \"urlContentMap\" appears 6 times in this file; the first occurrence is on line 61", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034744", "createdAt": "2020-10-08T21:55:33Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package com.dotmarketing.portlets.htmlpageasset.business.render.page;\n+\n+import com.dotcms.contenttype.model.field.Field;\n+import com.dotcms.contenttype.model.field.KeyValueField;\n+import com.dotcms.contenttype.model.field.TextField;\n+import com.dotcms.contenttype.model.type.BaseContentType;\n+import com.dotcms.contenttype.model.type.ContentType;\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertTrue;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+\n+/**\n+ * Test for the {@link PageViewSerializerTest}\n+ * @author jsanca\n+ */\n+public class PageViewSerializerTest {\n+\n+    @BeforeClass\n+    public static void prepare () throws Exception {\n+\n+        //Setting web app environment\n+        IntegrationTestInitService.getInstance().init();\n+    }\n+\n+    /**\n+     * Method to test: createObjectMapKeyValue\n+     * Given Scenario: key value but not key field\n+     * ExpectedResult: return the key value as string\n+     */\n+    @Test\n+    public void createObjectMapUrlContent_convert_url_map_no_keyvalue() throws Exception {\n+\n+        final PageViewSerializer pageViewSerializer = new PageViewSerializer();\n+        final Map<String, Object> pageViewMap       = new HashMap<>();\n+        final Contentlet baseContent                = new Contentlet();\n+        final Contentlet urlContent                 = mock(Contentlet.class);\n+        final String     keyValue                   = \"{\\\"key1\\\":\\\"value1\\\", \\\"key2\\\":\\\"value2\\\"}\";\n+        baseContent.getMap().put(\"keyValue\", keyValue);\n+        final ContentType contentType               = mock(ContentType.class);\n+        when(contentType.baseType()).thenReturn(BaseContentType.CONTENT);\n+        when(urlContent.getTitleImage()).thenReturn(Optional.empty());\n+        when(urlContent.getContentType()).thenReturn(contentType);\n+        when(urlContent.getBaseType()).thenReturn(Optional.of(BaseContentType.CONTENT));\n+        when(urlContent.get(\"keyValue\")).thenReturn(keyValue);\n+        when(contentType.fields(KeyValueField.class)).thenReturn(new ArrayList<>());\n+        pageViewSerializer.createObjectMapUrlContent(urlContent, pageViewMap);\n+\n+        assertTrue(pageViewMap.containsKey(\"urlContentMap\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTQ1OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotcms/security/apps/SecretsStoreKeyStoreImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozNVrOHexxQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozNVrOHexxQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDc1NA==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'java.security.GeneralSecurityException'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034754", "createdAt": "2020-10-08T21:55:35Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/security/apps/SecretsStoreKeyStoreImpl.java", "diffHunk": "@@ -2,24 +2,35 @@\n \n import static com.dotcms.security.apps.AppsCache.CACHE_404;\n \n+import com.dotcms.api.system.event.Visibility;\n import com.dotcms.auth.providers.jwt.factories.SigningKeyFactory;\n import com.dotcms.enterprise.cluster.ClusterFactory;\n+import com.dotcms.notifications.bean.NotificationLevel;\n+import com.dotcms.notifications.bean.NotificationType;\n+import com.dotcms.notifications.business.NotificationAPI;\n+import com.dotcms.util.I18NMessage;\n import com.dotmarketing.business.APILocator;\n import com.dotmarketing.business.CacheLocator;\n import com.dotmarketing.business.DotCacheException;\n+import com.dotmarketing.business.Role;\n+import com.dotmarketing.exception.DotDataException;\n import com.dotmarketing.exception.DotRuntimeException;\n import com.dotmarketing.util.Config;\n import com.dotmarketing.util.Logger;\n import com.dotmarketing.util.UtilMethods;\n import com.google.common.annotations.VisibleForTesting;\n+import com.liferay.portal.language.LanguageException;\n+import com.liferay.portal.model.User;\n import com.liferay.util.FileUtil;\n import com.rainerhahnekamp.sneakythrow.Sneaky;\n+import io.vavr.control.Try;\n import java.io.File;\n import java.io.IOException;\n import java.io.InputStream;\n import java.io.OutputStream;\n import java.nio.file.Files;\n import java.nio.file.Paths;\n+import java.security.GeneralSecurityException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTU0OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozNlrOHexxTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozNlrOHexxTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDc2NQ==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotcms.contenttype.model.field.Field'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034765", "createdAt": "2020-10-08T21:55:36Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializer.java", "diffHunk": "@@ -1,9 +1,15 @@\n package com.dotmarketing.portlets.htmlpageasset.business.render.page;\n \n+import com.dotcms.contenttype.model.field.Field;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTYyOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozN1rOHexxWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozN1rOHexxWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDc3Ng==", "bodyText": "Codacy found an issue: A method/constructor should not explicitly throw java.lang.Exception", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034776", "createdAt": "2020-10-08T21:55:37Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package com.dotmarketing.portlets.htmlpageasset.business.render.page;\n+\n+import com.dotcms.contenttype.model.field.Field;\n+import com.dotcms.contenttype.model.field.KeyValueField;\n+import com.dotcms.contenttype.model.field.TextField;\n+import com.dotcms.contenttype.model.type.BaseContentType;\n+import com.dotcms.contenttype.model.type.ContentType;\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertTrue;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+\n+/**\n+ * Test for the {@link PageViewSerializerTest}\n+ * @author jsanca\n+ */\n+public class PageViewSerializerTest {\n+\n+    @BeforeClass\n+    public static void prepare () throws Exception {\n+\n+        //Setting web app environment\n+        IntegrationTestInitService.getInstance().init();\n+    }\n+\n+    /**\n+     * Method to test: createObjectMapKeyValue\n+     * Given Scenario: key value but not key field\n+     * ExpectedResult: return the key value as string\n+     */\n+    @Test\n+    public void createObjectMapUrlContent_convert_url_map_no_keyvalue() throws Exception {\n+\n+        final PageViewSerializer pageViewSerializer = new PageViewSerializer();\n+        final Map<String, Object> pageViewMap       = new HashMap<>();\n+        final Contentlet baseContent                = new Contentlet();\n+        final Contentlet urlContent                 = mock(Contentlet.class);\n+        final String     keyValue                   = \"{\\\"key1\\\":\\\"value1\\\", \\\"key2\\\":\\\"value2\\\"}\";\n+        baseContent.getMap().put(\"keyValue\", keyValue);\n+        final ContentType contentType               = mock(ContentType.class);\n+        when(contentType.baseType()).thenReturn(BaseContentType.CONTENT);\n+        when(urlContent.getTitleImage()).thenReturn(Optional.empty());\n+        when(urlContent.getContentType()).thenReturn(contentType);\n+        when(urlContent.getBaseType()).thenReturn(Optional.of(BaseContentType.CONTENT));\n+        when(urlContent.get(\"keyValue\")).thenReturn(keyValue);\n+        when(contentType.fields(KeyValueField.class)).thenReturn(new ArrayList<>());\n+        pageViewSerializer.createObjectMapUrlContent(urlContent, pageViewMap);\n+\n+        assertTrue(pageViewMap.containsKey(\"urlContentMap\"));\n+        assertFalse(Map.class.cast(pageViewMap.get(\"urlContentMap\")).containsKey(\"keyValue\"));\n+    }\n+\n+    /**\n+     * Method to test: createObjectMapKeyValue\n+     * Given Scenario: key value given\n+     * ExpectedResult: return the key value as map\n+     */\n+    @Test\n+    public void createObjectMapUrlContent_convert_url_map_keyvalue() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTY2OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozOFrOHexxXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozOFrOHexxXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDc4MQ==", "bodyText": "Codacy found an issue: A method/constructor should not explicitly throw java.lang.Exception", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034781", "createdAt": "2020-10-08T21:55:38Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package com.dotmarketing.portlets.htmlpageasset.business.render.page;\n+\n+import com.dotcms.contenttype.model.field.Field;\n+import com.dotcms.contenttype.model.field.KeyValueField;\n+import com.dotcms.contenttype.model.field.TextField;\n+import com.dotcms.contenttype.model.type.BaseContentType;\n+import com.dotcms.contenttype.model.type.ContentType;\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertTrue;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+\n+/**\n+ * Test for the {@link PageViewSerializerTest}\n+ * @author jsanca\n+ */\n+public class PageViewSerializerTest {\n+\n+    @BeforeClass\n+    public static void prepare () throws Exception {\n+\n+        //Setting web app environment\n+        IntegrationTestInitService.getInstance().init();\n+    }\n+\n+    /**\n+     * Method to test: createObjectMapKeyValue\n+     * Given Scenario: key value but not key field\n+     * ExpectedResult: return the key value as string\n+     */\n+    @Test\n+    public void createObjectMapUrlContent_convert_url_map_no_keyvalue() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTcwOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/HTMLPageAssetRenderedTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozOVrOHexxYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTozOVrOHexxYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDc4NQ==", "bodyText": "Codacy found an issue: The String literal \"content2content1\" appears 4 times in this file; the first occurrence is on line 668", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034785", "createdAt": "2020-10-08T21:55:39Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/HTMLPageAssetRenderedTest.java", "diffHunk": "@@ -664,7 +665,7 @@ public void ContentFallbackFalse_PageFallbackFalse_PageEnglish_ViewEnglishConten\n                         .setPageMode(PageMode.LIVE)\n                         .build(),\n                 mockRequest, mockResponse);\n-        Assert.assertTrue(\"ENG = \"+html , html.contains(\"content2content1\"));\n+        assertTrue(\"ENG = \"+html , html.contains(\"content2content1\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTc0OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotmarketing/startup/runonce/Task05390MakeRoomForLongerJobDetailTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0MFrOHexxZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0MFrOHexxZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDc5MQ==", "bodyText": "Codacy found an issue: Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034791", "createdAt": "2020-10-08T21:55:40Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/startup/runonce/Task05390MakeRoomForLongerJobDetailTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.dotmarketing.startup.runonce;\n+\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.db.DbConnectionFactory;\n+import com.dotmarketing.db.DbType;\n+import com.dotmarketing.util.Logger;\n+import org.junit.Assert;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+public class Task05390MakeRoomForLongerJobDetailTest {\n+\n+    @BeforeClass\n+    public static void prepare() throws Exception {\n+        // Setting web app environment\n+        IntegrationTestInitService.getInstance().init();\n+    }\n+\n+    @Test\n+    public void testExecuteUpgrade() {\n+        final DbType dbType = DbType.getDbType(DbConnectionFactory.getDBType());\n+        try{\n+            final Task05390MakeRoomForLongerJobDetail upgradeTask = new Task05390MakeRoomForLongerJobDetail();\n+            final boolean forceRun = upgradeTask.forceRun();\n+            if(forceRun){\n+                Assert.assertEquals(\"should be applied only for mySQL \", DbType.MYSQL, dbType );\n+                upgradeTask.executeUpgrade();\n+            } else {\n+                Assert.assertNotEquals(String.format(\"should not be applied on dbs ot type `%s` \",dbType), DbType.MYSQL, dbType );\n+            }\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTc4OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotcms/security/apps/SecretsStoreKeyStoreImplTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0MVrOHexxcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0MVrOHexxcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDgwMA==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'java.security.KeyStore'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034800", "createdAt": "2020-10-08T21:55:41Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/security/apps/SecretsStoreKeyStoreImplTest.java", "diffHunk": "@@ -1,13 +1,17 @@\n package com.dotcms.security.apps;\n \n+import static com.dotcms.security.apps.SecretsStoreKeyStoreImpl.SECRETS_KEYSTORE_PASSWORD_KEY;\n import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.assertFalse;\n import static org.junit.Assert.assertNotNull;\n import static org.junit.Assert.assertTrue;\n \n import com.dotcms.util.IntegrationTestInitService;\n import com.dotmarketing.business.CacheLocator;\n+import com.dotmarketing.util.Config;\n import com.dotmarketing.util.UUIDGenerator;\n+import java.security.KeyStore;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTgyOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/HTMLPageAssetRenderedTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0MlrOHexxdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0MlrOHexxdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDgwNg==", "bodyText": "Codacy found an issue: A method/constructor should not explicitly throw java.lang.Exception", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034806", "createdAt": "2020-10-08T21:55:42Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/HTMLPageAssetRenderedTest.java", "diffHunk": "@@ -1602,7 +1603,54 @@ public void containerTwiceIntoPageAndTemplateLayout() throws Exception{\n                         .setPageMode(PageMode.LIVE)\n                         .build(),\n                 mockRequest, mockResponse);\n-        Assert.assertTrue(html.contains(\"content1content2content1content2\"));\n+        assertTrue(html.contains(\"content1content2content1content2\"));\n+    }\n+\n+    @Test\n+    public void pageWithSidebarShouldRender() throws Exception{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 214}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTg3OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/contentlet/transform/DotContentletTransformerImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0M1rOHexxgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0M1rOHexxgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDgxNw==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotmarketing.portlets.contentlet.transform.strategy.TransformOptions.KEY_VALUE_VIEW'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034817", "createdAt": "2020-10-08T21:55:43Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/contentlet/transform/DotContentletTransformerImpl.java", "diffHunk": "@@ -4,7 +4,11 @@\n import static com.dotmarketing.portlets.contentlet.transform.strategy.TransformOptions.CATEGORIES_NAME;\n import static com.dotmarketing.portlets.contentlet.transform.strategy.TransformOptions.COMMON_PROPS;\n import static com.dotmarketing.portlets.contentlet.transform.strategy.TransformOptions.CONSTANTS;\n+\n+import static com.dotmarketing.portlets.contentlet.transform.strategy.TransformOptions.KEY_VALUE_VIEW;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTkwOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0NFrOHexxhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0NFrOHexxhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDgyMw==", "bodyText": "Codacy found an issue: The String literal \"keyValue\" appears 10 times in this file; the first occurrence is on line 47", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034823", "createdAt": "2020-10-08T21:55:44Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package com.dotmarketing.portlets.htmlpageasset.business.render.page;\n+\n+import com.dotcms.contenttype.model.field.Field;\n+import com.dotcms.contenttype.model.field.KeyValueField;\n+import com.dotcms.contenttype.model.field.TextField;\n+import com.dotcms.contenttype.model.type.BaseContentType;\n+import com.dotcms.contenttype.model.type.ContentType;\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertTrue;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+\n+/**\n+ * Test for the {@link PageViewSerializerTest}\n+ * @author jsanca\n+ */\n+public class PageViewSerializerTest {\n+\n+    @BeforeClass\n+    public static void prepare () throws Exception {\n+\n+        //Setting web app environment\n+        IntegrationTestInitService.getInstance().init();\n+    }\n+\n+    /**\n+     * Method to test: createObjectMapKeyValue\n+     * Given Scenario: key value but not key field\n+     * ExpectedResult: return the key value as string\n+     */\n+    @Test\n+    public void createObjectMapUrlContent_convert_url_map_no_keyvalue() throws Exception {\n+\n+        final PageViewSerializer pageViewSerializer = new PageViewSerializer();\n+        final Map<String, Object> pageViewMap       = new HashMap<>();\n+        final Contentlet baseContent                = new Contentlet();\n+        final Contentlet urlContent                 = mock(Contentlet.class);\n+        final String     keyValue                   = \"{\\\"key1\\\":\\\"value1\\\", \\\"key2\\\":\\\"value2\\\"}\";\n+        baseContent.getMap().put(\"keyValue\", keyValue);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTk2OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/HTMLPageAssetRenderedTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0NVrOHexxkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0NVrOHexxkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDgzMg==", "bodyText": "Codacy found an issue: The String literal \"ESP = \" appears 5 times in this file; the first occurrence is on line 472", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034832", "createdAt": "2020-10-08T21:55:45Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/HTMLPageAssetRenderedTest.java", "diffHunk": "@@ -468,7 +469,7 @@ public void render_spanish_contentlets_on_english_page(\n                         .setPageMode(PageMode.LIVE)\n                         .build(),\n                 mockRequest, mockResponse);\n-        Assert.assertTrue(\"ESP = \"+html , html.contains(\"content2Spa\") && html.contains(\"content3Spa\"));\n+        assertTrue(\"ESP = \"+html , html.contains(\"content2Spa\") && html.contains(\"content3Spa\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTk3OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0NlrOHexxkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0NlrOHexxkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDgzNQ==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotcms.contenttype.model.field.Field'", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034835", "createdAt": "2020-10-08T21:55:46Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/htmlpageasset/business/render/page/PageViewSerializerTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+package com.dotmarketing.portlets.htmlpageasset.business.render.page;\n+\n+import com.dotcms.contenttype.model.field.Field;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0MzY3NTk5OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/HTMLPageAssetRenderedTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0N1rOHexxlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMTo1NTo0N1rOHexxlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDgzOA==", "bodyText": "Codacy found an issue: The String literal \"ENG = \" appears 6 times in this file; the first occurrence is on line 405", "url": "https://github.com/dotCMS/core/pull/19419#discussion_r502034838", "createdAt": "2020-10-08T21:55:47Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/HTMLPageAssetRenderedTest.java", "diffHunk": "@@ -401,7 +402,7 @@ public void ContentFallbackFalse_PageFallbackTrue_PageEnglish_ViewEnglishContent\n                     .setPageMode(PageMode.LIVE)\n                     .build(),\n                 mockRequest, mockResponse);\n-        Assert.assertTrue(\"ENG = \"+html , html.contains(\"content1\") && html.contains(\"content2\"));\n+        assertTrue(\"ENG = \"+html , html.contains(\"content1\") && html.contains(\"content2\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a355b7ddf0bb95f7d7c5f5c3c5e33c951c866e2"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1749, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}