{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3NzYwMTI4", "number": 18260, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNDowOTo0NFrODuZM4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNDoxMTo0M1rODuZQBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTczOTg1OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/hostvariable/ajax/HostVariableAjax.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNDowOTo0NFrOGAXJtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNDoyNDo1MFrOGAXxVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAzMjUwMQ==", "bodyText": "this methos should not return a String, it should return void and throw a exception with the error message", "url": "https://github.com/dotCMS/core/pull/18260#discussion_r403032501", "createdAt": "2020-04-03T14:09:44Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/hostvariable/ajax/HostVariableAjax.java", "diffHunk": "@@ -1,129 +1,192 @@\n package com.dotmarketing.portlets.hostvariable.ajax;\n \n-import java.util.Date;\n-import java.util.LinkedList;\n-import java.util.List;\n-import java.util.Map;\n-\n-import javax.servlet.http.HttpServletRequest;\n-\n import com.dotcms.repackage.org.directwebremoting.WebContext;\n import com.dotcms.repackage.org.directwebremoting.WebContextFactory;\n-\n import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.business.NoSuchUserException;\n import com.dotmarketing.business.web.UserWebAPI;\n import com.dotmarketing.business.web.WebAPILocator;\n import com.dotmarketing.exception.DotDataException;\n import com.dotmarketing.exception.DotRuntimeException;\n import com.dotmarketing.exception.DotSecurityException;\n-import com.dotmarketing.portlets.contentlet.business.HostAPI;\n import com.dotmarketing.portlets.hostvariable.bussiness.HostVariableAPI;\n import com.dotmarketing.portlets.hostvariable.model.HostVariable;\n+import com.dotmarketing.util.Logger;\n import com.dotmarketing.util.RegEX;\n import com.dotmarketing.util.UtilMethods;\n import com.liferay.portal.PortalException;\n import com.liferay.portal.SystemException;\n import com.liferay.portal.language.LanguageUtil;\n import com.liferay.portal.model.User;\n \n-public class HostVariableAjax {\n+import javax.servlet.http.HttpServletRequest;\n+import java.util.Date;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.Map;\n \n-\tprotected HostAPI hostAPI = APILocator.getHostAPI();\n+/**\n+ * This class allows the interaction with Site Variables in dotCMS. The methods exposed here are referenced via DWR by\n+ * the UI layer to allow users to perform CRUD operations on them.\n+ *\n+ * @author root\n+ * @since Mar 22, 2012\n+ */\n+public class HostVariableAjax {\n \n-\tpublic String saveHostVariable(String id, String hostId, String name, String key, String value) throws DotRuntimeException, PortalException, \n-\t\tSystemException, DotDataException, DotSecurityException {\n+\tprotected final UserWebAPI userWebAPI = WebAPILocator.getUserWebAPI();\n+\tprotected final HostVariableAPI hostVariableAPI = APILocator.getHostVariableAPI();\n+\n+\t/**\n+\t * Saves a Site Variable in the specified Site.\n+\t *\n+\t * @param id     The ID of the Site Variable.\n+\t * @param siteId The ID of the Site that the variable will be assigned to.\n+\t * @param name   The human-readable name of the Site Variable.\n+\t * @param key    The unique key assigned to the Site Variable.\n+\t * @param value  The value of the Site Variable.\n+\t *\n+\t * @return If the Site Variable was saved correctly, returns {@code null}. Otherwise, an error message is returned.\n+\t *\n+\t * @throws DotRuntimeException  An error occurred when executing this request.\n+\t * @throws PortalException      An error occurred when executing this request.\n+\t * @throws SystemException      An error occurred when executing this request.\n+\t * @throws DotDataException     The logged-in user does not have the required permissions to perform this action.\n+\t * @throws DotSecurityException The logged-in user does not have the required permissions to perform this action.\n+\t */\n+\tpublic String saveHostVariable(final String id, final String siteId, String name, String key, String value) throws DotRuntimeException, PortalException,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "860e229baae542c585ab0254777b3f0ee58f1fc4"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA0MjY0NA==", "bodyText": "This is a legacy class, the method signature must remain. Otherwise, a lot of code changes are required.", "url": "https://github.com/dotCMS/core/pull/18260#discussion_r403042644", "createdAt": "2020-04-03T14:24:50Z", "author": {"login": "jcastro-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/hostvariable/ajax/HostVariableAjax.java", "diffHunk": "@@ -1,129 +1,192 @@\n package com.dotmarketing.portlets.hostvariable.ajax;\n \n-import java.util.Date;\n-import java.util.LinkedList;\n-import java.util.List;\n-import java.util.Map;\n-\n-import javax.servlet.http.HttpServletRequest;\n-\n import com.dotcms.repackage.org.directwebremoting.WebContext;\n import com.dotcms.repackage.org.directwebremoting.WebContextFactory;\n-\n import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.business.NoSuchUserException;\n import com.dotmarketing.business.web.UserWebAPI;\n import com.dotmarketing.business.web.WebAPILocator;\n import com.dotmarketing.exception.DotDataException;\n import com.dotmarketing.exception.DotRuntimeException;\n import com.dotmarketing.exception.DotSecurityException;\n-import com.dotmarketing.portlets.contentlet.business.HostAPI;\n import com.dotmarketing.portlets.hostvariable.bussiness.HostVariableAPI;\n import com.dotmarketing.portlets.hostvariable.model.HostVariable;\n+import com.dotmarketing.util.Logger;\n import com.dotmarketing.util.RegEX;\n import com.dotmarketing.util.UtilMethods;\n import com.liferay.portal.PortalException;\n import com.liferay.portal.SystemException;\n import com.liferay.portal.language.LanguageUtil;\n import com.liferay.portal.model.User;\n \n-public class HostVariableAjax {\n+import javax.servlet.http.HttpServletRequest;\n+import java.util.Date;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.Map;\n \n-\tprotected HostAPI hostAPI = APILocator.getHostAPI();\n+/**\n+ * This class allows the interaction with Site Variables in dotCMS. The methods exposed here are referenced via DWR by\n+ * the UI layer to allow users to perform CRUD operations on them.\n+ *\n+ * @author root\n+ * @since Mar 22, 2012\n+ */\n+public class HostVariableAjax {\n \n-\tpublic String saveHostVariable(String id, String hostId, String name, String key, String value) throws DotRuntimeException, PortalException, \n-\t\tSystemException, DotDataException, DotSecurityException {\n+\tprotected final UserWebAPI userWebAPI = WebAPILocator.getUserWebAPI();\n+\tprotected final HostVariableAPI hostVariableAPI = APILocator.getHostVariableAPI();\n+\n+\t/**\n+\t * Saves a Site Variable in the specified Site.\n+\t *\n+\t * @param id     The ID of the Site Variable.\n+\t * @param siteId The ID of the Site that the variable will be assigned to.\n+\t * @param name   The human-readable name of the Site Variable.\n+\t * @param key    The unique key assigned to the Site Variable.\n+\t * @param value  The value of the Site Variable.\n+\t *\n+\t * @return If the Site Variable was saved correctly, returns {@code null}. Otherwise, an error message is returned.\n+\t *\n+\t * @throws DotRuntimeException  An error occurred when executing this request.\n+\t * @throws PortalException      An error occurred when executing this request.\n+\t * @throws SystemException      An error occurred when executing this request.\n+\t * @throws DotDataException     The logged-in user does not have the required permissions to perform this action.\n+\t * @throws DotSecurityException The logged-in user does not have the required permissions to perform this action.\n+\t */\n+\tpublic String saveHostVariable(final String id, final String siteId, String name, String key, String value) throws DotRuntimeException, PortalException,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAzMjUwMQ=="}, "originalCommit": {"oid": "860e229baae542c585ab0254777b3f0ee58f1fc4"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTc0NzkxOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotmarketing/portlets/hostvariable/ajax/HostVariableAjax.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNDoxMTo0M1rOGAXO0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNToyNTowNFrOGAaUdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAzMzgxMA==", "bodyText": "why not use a Rest end point?", "url": "https://github.com/dotCMS/core/pull/18260#discussion_r403033810", "createdAt": "2020-04-03T14:11:43Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/hostvariable/ajax/HostVariableAjax.java", "diffHunk": "@@ -1,129 +1,192 @@\n package com.dotmarketing.portlets.hostvariable.ajax;\n \n-import java.util.Date;\n-import java.util.LinkedList;\n-import java.util.List;\n-import java.util.Map;\n-\n-import javax.servlet.http.HttpServletRequest;\n-\n import com.dotcms.repackage.org.directwebremoting.WebContext;\n import com.dotcms.repackage.org.directwebremoting.WebContextFactory;\n-\n import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.business.NoSuchUserException;\n import com.dotmarketing.business.web.UserWebAPI;\n import com.dotmarketing.business.web.WebAPILocator;\n import com.dotmarketing.exception.DotDataException;\n import com.dotmarketing.exception.DotRuntimeException;\n import com.dotmarketing.exception.DotSecurityException;\n-import com.dotmarketing.portlets.contentlet.business.HostAPI;\n import com.dotmarketing.portlets.hostvariable.bussiness.HostVariableAPI;\n import com.dotmarketing.portlets.hostvariable.model.HostVariable;\n+import com.dotmarketing.util.Logger;\n import com.dotmarketing.util.RegEX;\n import com.dotmarketing.util.UtilMethods;\n import com.liferay.portal.PortalException;\n import com.liferay.portal.SystemException;\n import com.liferay.portal.language.LanguageUtil;\n import com.liferay.portal.model.User;\n \n-public class HostVariableAjax {\n+import javax.servlet.http.HttpServletRequest;\n+import java.util.Date;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.Map;\n \n-\tprotected HostAPI hostAPI = APILocator.getHostAPI();\n+/**\n+ * This class allows the interaction with Site Variables in dotCMS. The methods exposed here are referenced via DWR by\n+ * the UI layer to allow users to perform CRUD operations on them.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "860e229baae542c585ab0254777b3f0ee58f1fc4"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA0MzAxOQ==", "bodyText": "This is a legacy class, the core of its code must remain. Otherwise, a lot of code changes are required.", "url": "https://github.com/dotCMS/core/pull/18260#discussion_r403043019", "createdAt": "2020-04-03T14:25:17Z", "author": {"login": "jcastro-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/hostvariable/ajax/HostVariableAjax.java", "diffHunk": "@@ -1,129 +1,192 @@\n package com.dotmarketing.portlets.hostvariable.ajax;\n \n-import java.util.Date;\n-import java.util.LinkedList;\n-import java.util.List;\n-import java.util.Map;\n-\n-import javax.servlet.http.HttpServletRequest;\n-\n import com.dotcms.repackage.org.directwebremoting.WebContext;\n import com.dotcms.repackage.org.directwebremoting.WebContextFactory;\n-\n import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.business.NoSuchUserException;\n import com.dotmarketing.business.web.UserWebAPI;\n import com.dotmarketing.business.web.WebAPILocator;\n import com.dotmarketing.exception.DotDataException;\n import com.dotmarketing.exception.DotRuntimeException;\n import com.dotmarketing.exception.DotSecurityException;\n-import com.dotmarketing.portlets.contentlet.business.HostAPI;\n import com.dotmarketing.portlets.hostvariable.bussiness.HostVariableAPI;\n import com.dotmarketing.portlets.hostvariable.model.HostVariable;\n+import com.dotmarketing.util.Logger;\n import com.dotmarketing.util.RegEX;\n import com.dotmarketing.util.UtilMethods;\n import com.liferay.portal.PortalException;\n import com.liferay.portal.SystemException;\n import com.liferay.portal.language.LanguageUtil;\n import com.liferay.portal.model.User;\n \n-public class HostVariableAjax {\n+import javax.servlet.http.HttpServletRequest;\n+import java.util.Date;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.Map;\n \n-\tprotected HostAPI hostAPI = APILocator.getHostAPI();\n+/**\n+ * This class allows the interaction with Site Variables in dotCMS. The methods exposed here are referenced via DWR by\n+ * the UI layer to allow users to perform CRUD operations on them.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAzMzgxMA=="}, "originalCommit": {"oid": "860e229baae542c585ab0254777b3f0ee58f1fc4"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA4NDQwNg==", "bodyText": "I do understand it is a DWR and it is ok, however some of us (R&D) should be in charge about it a migrate the service to an endpoint as Freddy said, we should get far away from DWR as possible", "url": "https://github.com/dotCMS/core/pull/18260#discussion_r403084406", "createdAt": "2020-04-03T15:25:04Z", "author": {"login": "jdotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/hostvariable/ajax/HostVariableAjax.java", "diffHunk": "@@ -1,129 +1,192 @@\n package com.dotmarketing.portlets.hostvariable.ajax;\n \n-import java.util.Date;\n-import java.util.LinkedList;\n-import java.util.List;\n-import java.util.Map;\n-\n-import javax.servlet.http.HttpServletRequest;\n-\n import com.dotcms.repackage.org.directwebremoting.WebContext;\n import com.dotcms.repackage.org.directwebremoting.WebContextFactory;\n-\n import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.business.NoSuchUserException;\n import com.dotmarketing.business.web.UserWebAPI;\n import com.dotmarketing.business.web.WebAPILocator;\n import com.dotmarketing.exception.DotDataException;\n import com.dotmarketing.exception.DotRuntimeException;\n import com.dotmarketing.exception.DotSecurityException;\n-import com.dotmarketing.portlets.contentlet.business.HostAPI;\n import com.dotmarketing.portlets.hostvariable.bussiness.HostVariableAPI;\n import com.dotmarketing.portlets.hostvariable.model.HostVariable;\n+import com.dotmarketing.util.Logger;\n import com.dotmarketing.util.RegEX;\n import com.dotmarketing.util.UtilMethods;\n import com.liferay.portal.PortalException;\n import com.liferay.portal.SystemException;\n import com.liferay.portal.language.LanguageUtil;\n import com.liferay.portal.model.User;\n \n-public class HostVariableAjax {\n+import javax.servlet.http.HttpServletRequest;\n+import java.util.Date;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.Map;\n \n-\tprotected HostAPI hostAPI = APILocator.getHostAPI();\n+/**\n+ * This class allows the interaction with Site Variables in dotCMS. The methods exposed here are referenced via DWR by\n+ * the UI layer to allow users to perform CRUD operations on them.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAzMzgxMA=="}, "originalCommit": {"oid": "860e229baae542c585ab0254777b3f0ee58f1fc4"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2438, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}