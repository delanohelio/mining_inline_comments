{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3MTAxNDQ5", "number": 19470, "title": "#18605 pauses and then unpauses based on a cache invalidation", "bodyText": "", "createdAt": "2020-10-20T21:16:40Z", "url": "https://github.com/dotCMS/core/pull/19470", "merged": true, "mergeCommit": {"oid": "c379d1b079c199a46033807bea7cff2b5f661962"}, "closed": true, "closedAt": "2020-11-02T20:47:31Z", "author": {"login": "wezell"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPpdNtgH2gAyNTA3MTAxNDQ5OjdlNTA1NWJjNTJlOWMxN2ZjNmQyZWIwMWFmOGEzZjIxODg0MmY4NWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYq2mUAH2gAyNTA3MTAxNDQ5Ojk3MThjMjg0MzY1ZjhjMzQ2YTAxMzdmYWNjZWI3ZmExNDVhOWYxMjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7e5055bc52e9c17fc6d2eb01af8a3f218842f85b", "author": {"user": {"login": "wezell", "name": "Will Ezell"}}, "url": "https://github.com/dotCMS/core/commit/7e5055bc52e9c17fc6d2eb01af8a3f218842f85b", "committedDate": "2020-10-05T20:04:07Z", "message": "#18605 pauses and then unpauses based on a cache invalidation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a26ab94619db45a357358ff243c2458d5532d96d", "author": {"user": {"login": "wezell", "name": "Will Ezell"}}, "url": "https://github.com/dotCMS/core/commit/a26ab94619db45a357358ff243c2458d5532d96d", "committedDate": "2020-10-20T21:47:06Z", "message": "#18605 adding ttl to the cache put in the logger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59ab34245f484fc919947fe6c3b1473963f78618", "author": {"user": {"login": "wezell", "name": "Will Ezell"}}, "url": "https://github.com/dotCMS/core/commit/59ab34245f484fc919947fe6c3b1473963f78618", "committedDate": "2020-10-20T21:54:04Z", "message": "#18605 less logging"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNzYxNTE5", "url": "https://github.com/dotCMS/core/pull/19470#pullrequestreview-513761519", "createdAt": "2020-10-21T14:37:46Z", "commit": {"oid": "59ab34245f484fc919947fe6c3b1473963f78618"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "633fd87faa1b4247e19c9a4bcdfda00aaacffa8a", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/633fd87faa1b4247e19c9a4bcdfda00aaacffa8a", "committedDate": "2020-10-28T17:26:57Z", "message": "Merge branch 'master' of https://github.com/dotCMS/core into issue-18605-pause-reindexthread"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4OTMzMDY5", "url": "https://github.com/dotCMS/core/pull/19470#pullrequestreview-518933069", "createdAt": "2020-10-28T17:47:21Z", "commit": {"oid": "633fd87faa1b4247e19c9a4bcdfda00aaacffa8a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzo0NzoyMVrOHp2Y9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxNzo0NzoyMVrOHp2Y9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY0NDc5MA==", "bodyText": "Codacy found an issue: Avoid reassigning parameters such as 'bulkProcessor'", "url": "https://github.com/dotCMS/core/pull/19470#discussion_r513644790", "createdAt": "2020-10-28T17:47:21Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/common/reindex/ReindexThread.java", "diffHunk": "@@ -164,6 +174,19 @@ private BulkProcessor closeBulkProcessor(final BulkProcessor bulkProcessor) thro\n     }\n \n \n+    private BulkProcessor finalizeReIndex(BulkProcessor bulkProcessor) throws InterruptedException, LanguageException, DotDataException, SQLException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "633fd87faa1b4247e19c9a4bcdfda00aaacffa8a"}, "originalPosition": 94}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59b5c1b2e98e7028ad428bc38471e69c90b0b922", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/59b5c1b2e98e7028ad428bc38471e69c90b0b922", "committedDate": "2020-10-29T16:15:05Z", "message": "Merge branch 'master' of https://github.com/dotCMS/core into issue-18605-pause-reindexthread"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89cb988627fb55d6d2c319938157b6a0238977fe", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/89cb988627fb55d6d2c319938157b6a0238977fe", "committedDate": "2020-10-29T18:49:59Z", "message": "#18605 Fixing failing test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da78b39e946668806942c5209ab619a95c2c0b60", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/da78b39e946668806942c5209ab619a95c2c0b60", "committedDate": "2020-10-29T18:54:40Z", "message": "#18605 Adding a kind of cache invalidation to unpause ReindexThread (10 minutes by default)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6dddbc6e63bb827bc8a8a94e3403092633e17b4", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/c6dddbc6e63bb827bc8a8a94e3403092633e17b4", "committedDate": "2020-10-30T21:33:22Z", "message": "#18605 Implementing new ITs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f36017a9e8f65289edabd04ef206499ad6bc050", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/9f36017a9e8f65289edabd04ef206499ad6bc050", "committedDate": "2020-10-30T21:33:40Z", "message": "#18605 Increasing logging time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODA5NTI3", "url": "https://github.com/dotCMS/core/pull/19470#pullrequestreview-521809527", "createdAt": "2020-11-02T16:47:24Z", "commit": {"oid": "9f36017a9e8f65289edabd04ef206499ad6bc050"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNjo0NzoyNFrOHsMvpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNjo0NzoyNFrOHsMvpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjEwODE5OA==", "bodyText": "Doc Test", "url": "https://github.com/dotCMS/core/pull/19470#discussion_r516108198", "createdAt": "2020-11-02T16:47:24Z", "author": {"login": "erickgonzalez"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/common/reindex/ReindexAPITest.java", "diffHunk": "@@ -123,42 +123,47 @@ public void test_highestpriority_reindex_vs_normal_reindex() throws DotDataExcep\n \n     @Test\n     public void test_content_type_reindex() throws Exception {\n-        ReindexThread.pause();\n-        ContentType type = new ContentTypeDataGen().nextPersisted();\n-        new DotConnect().setSQL(\"delete from dist_reindex_journal\").loadResult();\n-        for (int i = 0; i < numberToTest; i++) {\n-            new ContentletDataGen(type.id()).setPolicy(IndexPolicy.DEFER).nextPersisted();\n-        }\n-\n-        final ReindexQueueAPI reindexQueueAPI = APILocator.getReindexQueueAPI();\n-\n-\n-\n-        Map<String, ReindexEntry> reindexEntries = reindexQueueAPI.findContentToReindex(numberToTest);\n-\n-        assertTrue(\"should have \" + numberToTest + \" to reindex, only got\" +  reindexEntries.size(),  reindexEntries.size()== numberToTest);\n+        Config.setProperty(\"ALLOW_MANUAL_REINDEX_UNPAUSE\", true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f36017a9e8f65289edabd04ef206499ad6bc050"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxOTQ4Nzg3", "url": "https://github.com/dotCMS/core/pull/19470#pullrequestreview-521948787", "createdAt": "2020-11-02T19:55:24Z", "commit": {"oid": "9f36017a9e8f65289edabd04ef206499ad6bc050"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9718c284365f8c346a0137facceb7fa145a9f120", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/9718c284365f8c346a0137facceb7fa145a9f120", "committedDate": "2020-11-02T20:47:04Z", "message": "#18605 Doc test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1759, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}