{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3MzkzNDM5", "number": 18592, "title": "Issue 18591", "bodyText": "This fixes the escalationthread for multi-lingual contents", "createdAt": "2020-06-03T19:01:32Z", "url": "https://github.com/dotCMS/core/pull/18592", "merged": true, "mergeCommit": {"oid": "3335a3b58b87ab72e6e3cdfdf69f932ea22b1589"}, "closed": true, "closedAt": "2020-06-11T20:52:43Z", "author": {"login": "wezell"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnuMKngH2gAyNDI3MzkzNDM5Ojk3MDQyOGQ3MjAxOGY0MWFmNjNlNjg3ZjMzZTY3NzY0MTY0ZGVjYzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoWbLZgFqTQyNTUwMzk1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "970428d72018f41af63e687f33e67764164decc6", "author": {"user": {"login": "wezell", "name": "Will Ezell"}}, "url": "https://github.com/dotCMS/core/commit/970428d72018f41af63e687f33e67764164decc6", "committedDate": "2020-06-03T18:58:03Z", "message": "#18591 fixes esclation thread"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf448811b615ad02af840feb146297700b8486dc", "author": {"user": {"login": "wezell", "name": "Will Ezell"}}, "url": "https://github.com/dotCMS/core/commit/cf448811b615ad02af840feb146297700b8486dc", "committedDate": "2020-06-03T18:59:41Z", "message": "#18591 moves transaction closer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzODUzMzQ2", "url": "https://github.com/dotCMS/core/pull/18592#pullrequestreview-423853346", "createdAt": "2020-06-03T19:14:46Z", "commit": {"oid": "cf448811b615ad02af840feb146297700b8486dc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOToxNDo0NlrOGepz5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOToxNDo0NlrOGepz5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc5NTQ5Mg==", "bodyText": "I would enclosed the body into a method and wrap into the transaction", "url": "https://github.com/dotCMS/core/pull/18592#discussion_r434795492", "createdAt": "2020-06-03T19:14:46Z", "author": {"login": "jdotcms"}, "path": "dotCMS/src/main/java/com/dotcms/workflow/EscalationThread.java", "diffHunk": "@@ -36,11 +35,11 @@ public void run(final JobExecutionContext jobContext) throws JobExecutionExcepti\n \n             try {\n \n-                startTransaction();\n+\n                 final List<WorkflowTask> tasks = workflowAPI.findExpiredTasks();\n \n                 for (final WorkflowTask task : tasks) {\n-\n+                    startTransaction();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf448811b615ad02af840feb146297700b8486dc"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzODUzNTQ4", "url": "https://github.com/dotCMS/core/pull/18592#pullrequestreview-423853548", "createdAt": "2020-06-03T19:15:03Z", "commit": {"oid": "cf448811b615ad02af840feb146297700b8486dc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOToxNTowM1rOGep0fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxOToxNTowM1rOGep0fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc5NTY0NA==", "bodyText": "cool", "url": "https://github.com/dotCMS/core/pull/18592#discussion_r434795644", "createdAt": "2020-06-03T19:15:03Z", "author": {"login": "jdotcms"}, "path": "dotCMS/src/main/java/com/dotcms/workflow/EscalationThread.java", "diffHunk": "@@ -51,10 +50,10 @@ public void run(final JobExecutionContext jobContext) throws JobExecutionExcepti\n                             \"timeout on step '\" + step.getName() + \"' \" +\n                             \"excecuting escalation action '\" + action.getName() + \"'\");\n \n-                    // find contentlet for default language\n+                    // find contentlet for the given language\n                     final Contentlet contentletByDefaultLanguage =\n                             APILocator.getContentletAPI().findContentletByIdentifier(task.getWebasset(), false,\n-                                APILocator.getLanguageAPI().getDefaultLanguage().getId(),\n+                                task.getLanguageId(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf448811b615ad02af840feb146297700b8486dc"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NDk2MDI4", "url": "https://github.com/dotCMS/core/pull/18592#pullrequestreview-424496028", "createdAt": "2020-06-04T14:16:42Z", "commit": {"oid": "cf448811b615ad02af840feb146297700b8486dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NTM5MzEy", "url": "https://github.com/dotCMS/core/pull/18592#pullrequestreview-424539312", "createdAt": "2020-06-04T14:58:49Z", "commit": {"oid": "cf448811b615ad02af840feb146297700b8486dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NTYxNTU5", "url": "https://github.com/dotCMS/core/pull/18592#pullrequestreview-424561559", "createdAt": "2020-06-04T15:21:30Z", "commit": {"oid": "cf448811b615ad02af840feb146297700b8486dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b246df50f8be99c0d4d9d98b42a7646df0dfcacd", "author": {"user": {"login": "wezell", "name": "Will Ezell"}}, "url": "https://github.com/dotCMS/core/commit/b246df50f8be99c0d4d9d98b42a7646df0dfcacd", "committedDate": "2020-06-04T16:41:01Z", "message": "#18591 taking sanchez's advice"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NjQwOTgy", "url": "https://github.com/dotCMS/core/pull/18592#pullrequestreview-424640982", "createdAt": "2020-06-04T16:47:47Z", "commit": {"oid": "b246df50f8be99c0d4d9d98b42a7646df0dfcacd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjo0Nzo0OFrOGfO26w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjo0Nzo0OFrOGfO26w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQwMjQ3NQ==", "bodyText": "Issue found: Avoid unused imports such as 'com.dotmarketing.db.HibernateUtil.rollbackTransaction'", "url": "https://github.com/dotCMS/core/pull/18592#discussion_r435402475", "createdAt": "2020-06-04T16:47:48Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/workflow/EscalationThread.java", "diffHunk": "@@ -1,12 +1,18 @@\n package com.dotcms.workflow;\n \n+import static com.dotmarketing.db.HibernateUtil.closeSessionSilently;\n+import static com.dotmarketing.db.HibernateUtil.rollbackTransaction;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246df50f8be99c0d4d9d98b42a7646df0dfcacd"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NjQwOTk3", "url": "https://github.com/dotCMS/core/pull/18592#pullrequestreview-424640997", "createdAt": "2020-06-04T16:47:48Z", "commit": {"oid": "b246df50f8be99c0d4d9d98b42a7646df0dfcacd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjo0Nzo0OVrOGfO2-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjo0Nzo0OVrOGfO2-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQwMjQ4OQ==", "bodyText": "Issue found: Avoid unused imports such as 'com.dotmarketing.db.HibernateUtil.closeSessionSilently'", "url": "https://github.com/dotCMS/core/pull/18592#discussion_r435402489", "createdAt": "2020-06-04T16:47:49Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/workflow/EscalationThread.java", "diffHunk": "@@ -1,12 +1,18 @@\n package com.dotcms.workflow;\n \n+import static com.dotmarketing.db.HibernateUtil.closeSessionSilently;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b246df50f8be99c0d4d9d98b42a7646df0dfcacd"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NTAzOTU0", "url": "https://github.com/dotCMS/core/pull/18592#pullrequestreview-425503954", "createdAt": "2020-06-05T17:50:39Z", "commit": {"oid": "b246df50f8be99c0d4d9d98b42a7646df0dfcacd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 888, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}