{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0NTExNzA3", "number": 19178, "title": "#19155 adding a fix for limited user creating content multi line", "bodyText": "When a Limited user tries to create a contentlet on diff lang, an error has been throwed.", "createdAt": "2020-08-27T07:34:25Z", "url": "https://github.com/dotCMS/core/pull/19178", "merged": true, "mergeCommit": {"oid": "08c3b89653759d1012c42f101216d232b6eb1c14"}, "closed": true, "closedAt": "2020-09-02T18:56:49Z", "author": {"login": "jdotcms"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdC7P7kgH2gAyNDc0NTExNzA3OmUzNWVjMDYxY2UxOWVhNWFkZWU5ZWIyY2MwNDMwNDExMzVjMTE5MWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdE-ua6gH2gAyNDc0NTExNzA3OjNlMTdmN2FlYzMwZGNhYjdmYThmYzc1NzhmZmJjZjc0Y2UzYzUxZGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e35ec061ce19ea5adee9eb2cc043041135c1191e", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/e35ec061ce19ea5adee9eb2cc043041135c1191e", "committedDate": "2020-08-27T07:26:53Z", "message": "#19155 adding a fix for limitated user creating content multi line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbb4a34d184bd5765a1724183454a3df42c343d2", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/cbb4a34d184bd5765a1724183454a3df42c343d2", "committedDate": "2020-08-27T18:27:48Z", "message": "#19155 allowing limited users to add multilang contentlets"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NzcyOTA0", "url": "https://github.com/dotCMS/core/pull/19178#pullrequestreview-477772904", "createdAt": "2020-08-28T14:25:05Z", "commit": {"oid": "cbb4a34d184bd5765a1724183454a3df42c343d2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3Nzc0NjIw", "url": "https://github.com/dotCMS/core/pull/19178#pullrequestreview-477774620", "createdAt": "2020-08-28T14:27:11Z", "commit": {"oid": "cbb4a34d184bd5765a1724183454a3df42c343d2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNDoyNzoxMlrOHJIrkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNDoyNzoyMlrOHJIr8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTM0MTQ1Ng==", "bodyText": "any test?", "url": "https://github.com/dotCMS/core/pull/19178#discussion_r479341456", "createdAt": "2020-08-28T14:27:12Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/java/com/dotmarketing/business/PermissionBitAPIImpl.java", "diffHunk": "@@ -375,7 +375,7 @@ public boolean doesUserHavePermission(final Permissionable permissionable, int p\n      */\r\n     private boolean isLiveContentlet(Permissionable permissionable) {\r\n         return permissionable!=null && permissionable instanceof Contentlet\r\n-                && Sneaky.sneak(()->((Contentlet) permissionable).isLive());\r\n+                && Try.of(()->((Contentlet) permissionable).isLive()).getOrElse(false);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbb4a34d184bd5765a1724183454a3df42c343d2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTM0MTU1Mw==", "bodyText": "any test?", "url": "https://github.com/dotCMS/core/pull/19178#discussion_r479341553", "createdAt": "2020-08-28T14:27:22Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/webapp/html/portlet/ext/contentlet/edit_contentlet.jsp", "diffHunk": "@@ -179,11 +179,11 @@\n \tboolean canEditAsset = conPerAPI.doesUserHavePermission(contentlet, PermissionAPI.PERMISSION_EDIT_PERMISSIONS, user);\n \tfinal LayoutAPI layoutAPI = APILocator.getLayoutAPI();\n     boolean canSeeRules = layoutAPI.doesUserHaveAccessToPortlet(\"rules\", user)\n-            && conPerAPI.doesUserHavePermission(contentlet, PermissionAPI.PERMISSION_USE, user)\n+            && conPerAPI.doesUserHavePermission(contentlet, PermissionAPI.PERMISSION_USE, user, PageMode.get(request).respectAnonPerms)\n             && conPerAPI.doesUserHavePermissions(contentlet.getParentPermissionable(), \"RULES: \" + PermissionAPI.PERMISSION_USE, user);\n     \n     boolean hasViewPermision = layoutAPI.doesUserHaveAccessToPortlet(\"permissions\", user)\n-            && conPerAPI.doesUserHavePermission(contentlet, PermissionAPI.PERMISSION_USE, user)\n+            && conPerAPI.doesUserHavePermission(contentlet, PermissionAPI.PERMISSION_USE, user, PageMode.get(request).respectAnonPerms)\n             && conPerAPI.doesUserHavePermissions(contentlet.getParentPermissionable(), \"PERMISSIONS: \" + PermissionAPI.PERMISSION_USE, user);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbb4a34d184bd5765a1724183454a3df42c343d2"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTIyMjM5", "url": "https://github.com/dotCMS/core/pull/19178#pullrequestreview-477922239", "createdAt": "2020-08-28T17:54:56Z", "commit": {"oid": "cbb4a34d184bd5765a1724183454a3df42c343d2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a56fd6486165d8049f6e37e79d31948eb48c8c68", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/a56fd6486165d8049f6e37e79d31948eb48c8c68", "committedDate": "2020-08-31T22:14:21Z", "message": "dotCMS/core#19096 Template Rest API CRUD\n\n* #19096 adding the crud for templates\r\n\r\n* #19096 minor refactor\r\n\r\n* #19096 adding a template view to reduce the verbosity in the response\r\n\r\n* #19096 adding fixes and unit test\r\n\r\n* #19096 adding more attributes to the template view in order to figure out the diff actions enabled on each template such as publish, edit, etc\r\n\r\n* #19096 added save new, edit and publish template\r\n\r\n* #19096 adding the template resource to add/edit/publish/unpublish/copy/unlock/archive/unarchive/delete\r\n\r\n* #19096 some refactorings\r\n\r\n* #Adding a refactor and fixes\r\n\r\n* #19096 fixing a test\r\n\r\n* #19096 unit test done\r\n\r\n* #19096 adding review feedback\r\n\r\n* #19096 switching to local env on curl test instead of using localhost directly\r\n\r\n* #19096 fixing an unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7c5269962ab2ee2dc13a90f7a5e38b5784b881e", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/f7c5269962ab2ee2dc13a90f7a5e38b5784b881e", "committedDate": "2020-09-01T16:02:53Z", "message": "dotCMS/core#19157 Make Saml metadata generation admin only\n\n* #19157 now metadata is available only for admin\r\n\r\n* #19157 adding unit test for metadata non admin check\r\n\r\n* #19157 adding unit test for metadata non admin check\r\n\r\n* #19157 adding unit test for metadata non admin check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab398ddcaf14a78fecb638b0e03223d7329994fe", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/ab398ddcaf14a78fecb638b0e03223d7329994fe", "committedDate": "2020-09-01T19:07:45Z", "message": "Merge branch 'master' of github.com:dotCMS/core into issue-19155-limiteduser-multilang-issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e65644571be5f17038a554082ecb3214e5c86318", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/e65644571be5f17038a554082ecb3214e5c86318", "committedDate": "2020-09-02T05:17:43Z", "message": "#19155 adding unit test for the changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6342bd3f6a8d2d86f9b122b49e2b6a976dac5a4b", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/6342bd3f6a8d2d86f9b122b49e2b6a976dac5a4b", "committedDate": "2020-09-02T05:23:40Z", "message": "#19155 adding unit test for the changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwODY3MDMx", "url": "https://github.com/dotCMS/core/pull/19178#pullrequestreview-480867031", "createdAt": "2020-09-02T14:17:41Z", "commit": {"oid": "6342bd3f6a8d2d86f9b122b49e2b6a976dac5a4b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwOTk3MjU4", "url": "https://github.com/dotCMS/core/pull/19178#pullrequestreview-480997258", "createdAt": "2020-09-02T16:30:33Z", "commit": {"oid": "6342bd3f6a8d2d86f9b122b49e2b6a976dac5a4b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e17f7aec30dcab7fa8fc7578ffbcf74ce3c51df", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/3e17f7aec30dcab7fa8fc7578ffbcf74ce3c51df", "committedDate": "2020-09-02T16:37:45Z", "message": "#19155 merge release-5.3.8"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1818, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}