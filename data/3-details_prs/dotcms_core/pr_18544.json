{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyMTI0MDky", "number": 18544, "title": "Issue 18443 prevent schema generation if rels fail", "bodyText": "Validate case when trying to obtain a relationship from a rel-field returns null.\nBefore, we were getting a NPE that was preventing the entire schema generation.\nNow we throw an exception which is captured at a higher level and logged and we continue with the schema generation. Only consequence is that the relationship field won't be available.\nIntegration Test included", "createdAt": "2020-05-22T20:23:06Z", "url": "https://github.com/dotCMS/core/pull/18544", "merged": true, "mergeCommit": {"oid": "43754f72d9cd8ea6f17c10e75144ccc76f3e839b"}, "closed": true, "closedAt": "2020-05-26T23:06:20Z", "author": {"login": "dsilvam"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcj1QZzgH2gAyNDIyMTI0MDkyOmUzYWU4YzI5Njg4ODdiYmY5NjMwNGUzYTQ5MjU2ZjA0NTNmYTJmMWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclGR45gH2gAyNDIyMTI0MDkyOmRmODg0Y2YxODczZmE2YjE1MWNlYzZhYzQ5ZDA5ZmM1NjYwNmZhOTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e3ae8c2968887bbf96304e3a49256f0453fa2f1c", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/e3ae8c2968887bbf96304e3a49256f0453fa2f1c", "committedDate": "2020-05-22T16:56:19Z", "message": "#18443 continue with schema generation if errors in relationship fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c014d795c488ae7ff321c2bf9a32111bb5f84744", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/c014d795c488ae7ff321c2bf9a32111bb5f84744", "committedDate": "2020-05-22T20:22:37Z", "message": "#18443 integration test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f606674c6e6e2cf09e0b4e7b104dda7a51249873", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/f606674c6e6e2cf09e0b4e7b104dda7a51249873", "committedDate": "2020-05-22T20:29:24Z", "message": "#18443 javadoc for test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTkwNzQy", "url": "https://github.com/dotCMS/core/pull/18544#pullrequestreview-417190742", "createdAt": "2020-05-22T21:26:40Z", "commit": {"oid": "f606674c6e6e2cf09e0b4e7b104dda7a51249873"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MzYxOTAx", "url": "https://github.com/dotCMS/core/pull/18544#pullrequestreview-418361901", "createdAt": "2020-05-26T14:34:48Z", "commit": {"oid": "f606674c6e6e2cf09e0b4e7b104dda7a51249873"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxNDozNDo0OVrOGahPRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxNDozNDo0OVrOGahPRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQ2MDc0Mg==", "bodyText": "do we really need catch Exception?, isn't it possible catch another more specific exception?", "url": "https://github.com/dotCMS/core/pull/18544#discussion_r430460742", "createdAt": "2020-05-26T14:34:49Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/business/GraphqlAPIImpl.java", "diffHunk": "@@ -179,7 +187,11 @@ private void createSchemaType(ContentType contentType,\n \n             if(!(field instanceof RowField) && !(field instanceof ColumnField)) {\n                 if (field instanceof RelationshipField) {\n-                    handleRelationshipField(contentType, builder, field, graphqlObjectTypes);\n+                    try {\n+                        handleRelationshipField(contentType, builder, field, graphqlObjectTypes);\n+                    } catch(Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f606674c6e6e2cf09e0b4e7b104dda7a51249873"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MzcxOTk4", "url": "https://github.com/dotCMS/core/pull/18544#pullrequestreview-418371998", "createdAt": "2020-05-26T14:45:13Z", "commit": {"oid": "f606674c6e6e2cf09e0b4e7b104dda7a51249873"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df884cf1873fa6b151cec6ac49d09fc56606fa93", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/df884cf1873fa6b151cec6ac49d09fc56606fa93", "committedDate": "2020-05-26T15:20:15Z", "message": "#18443 code-review"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 861, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}