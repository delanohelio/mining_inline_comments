{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NjgzMTY4", "number": 19198, "title": "#19190 containers Done", "bodyText": "Implementation of containers field for the GraphQL Page API.\n\nA small refactor of converting List<Map<String, Object>> to List<Contentlet> was done in the PageRenderUtil. This was done to have Contentlets instead of Maps and being able to rely on the existing Contentlet GraphQL Type.\nMethod call to add tags to contentlet was added to the contentlet transformer\nIntegration tests modified to adapt to the change above.\nNew Postman tests included", "createdAt": "2020-08-28T23:40:31Z", "url": "https://github.com/dotCMS/core/pull/19198", "merged": true, "mergeCommit": {"oid": "7826f9696e3bf2246633cd15689ec23fe8e7f9de"}, "closed": true, "closedAt": "2020-09-09T14:47:58Z", "author": {"login": "dsilvam"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDdxDXAH2gAyNDc1NjgzMTY4OjUzZmQ3ODA1MjQ4MGYzYzQ3NzViMWNjYzBmMzRlM2IyMTYxMzE2YmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHNTc3gFqTQ4NTA4NTkzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "53fd78052480f3c4775b1ccc0f34e3b2161316bc", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/53fd78052480f3c4775b1ccc0f34e3b2161316bc", "committedDate": "2020-08-28T23:39:50Z", "message": "#19190 first part"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af7007368ea742c5fc94f3716ac10b6d2410068a", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/af7007368ea742c5fc94f3716ac10b6d2410068a", "committedDate": "2020-08-31T23:19:42Z", "message": "#19190 container first level properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98a1133bd0bd4680db580865db891a202774f173", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/98a1133bd0bd4680db580865db891a202774f173", "committedDate": "2020-09-01T22:07:04Z", "message": "#19190 postman tests for first level fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4834c4313267dcb184006d0e4eb33fc7ac552083", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/4834c4313267dcb184006d0e4eb33fc7ac552083", "committedDate": "2020-09-01T23:34:10Z", "message": "#19190 containers-rendered done with postman"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b877c6697ffad332344532a40fb6a0f0dcc612b", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/4b877c6697ffad332344532a40fb6a0f0dcc612b", "committedDate": "2020-09-01T23:34:29Z", "message": "#19190 containers-rendered done with postman"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d35de1b70f06ec1b411313535399452c1193e663", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/d35de1b70f06ec1b411313535399452c1193e663", "committedDate": "2020-09-02T17:16:17Z", "message": "Include both variants of collection names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45ec60d1df2dc621e5278d23e1d063fd20de1448", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/45ec60d1df2dc621e5278d23e1d063fd20de1448", "committedDate": "2020-09-02T21:48:37Z", "message": "#19190 containerStructure ready"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d96e9ae0efcc6213e998e50fab61aba1f53b716", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/0d96e9ae0efcc6213e998e50fab61aba1f53b716", "committedDate": "2020-09-02T23:53:14Z", "message": "#19190 include tags in contentlets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3580e3def6504032fe2e73de9336ba5f8f284801", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/3580e3def6504032fe2e73de9336ba5f8f284801", "committedDate": "2020-09-03T16:00:47Z", "message": "#19190 doOptions for CORS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9489f27a241f663d3b0b03c0fbe238a07877cdc1", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/9489f27a241f663d3b0b03c0fbe238a07877cdc1", "committedDate": "2020-09-03T16:07:12Z", "message": "Revert \"#19190 doOptions for CORS\"\n\nThis reverts commit 3580e3def6504032fe2e73de9336ba5f8f284801."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "581b066ac6ae485d8af3126b9dec223a89e51de6", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/581b066ac6ae485d8af3126b9dec223a89e51de6", "committedDate": "2020-09-03T23:09:22Z", "message": "#19190 add map field for contentlet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ffcc5dce4320d07feceebc69b945b9922a02803", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/0ffcc5dce4320d07feceebc69b945b9922a02803", "committedDate": "2020-09-04T18:39:03Z", "message": "#19190 test cats and tags using map field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e331cbd3def9ff0fdc66accadd6b4c4397e372f3", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/e331cbd3def9ff0fdc66accadd6b4c4397e372f3", "committedDate": "2020-09-04T21:51:10Z", "message": "#19190 fix ITs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f07162eb3d600a9d0343c3c0af0c0ed5479d4709", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/f07162eb3d600a9d0343c3c0af0c0ed5479d4709", "committedDate": "2020-09-04T22:20:46Z", "message": "#19190 codacy feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72fa82fd0ca3058f24c664c5df9574e5540c2a77", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/72fa82fd0ca3058f24c664c5df9574e5540c2a77", "committedDate": "2020-09-04T23:30:23Z", "message": "#19190 fix postman tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/f65297b5c6801897be97d5f8c7c31a00880d377b", "committedDate": "2020-09-08T15:28:08Z", "message": "#19190 fix integration tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjc0MTY3", "url": "https://github.com/dotCMS/core/pull/19198#pullrequestreview-484274167", "createdAt": "2020-09-08T15:47:39Z", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0NzozOVrOHOjdGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0NzozOVrOHOjdGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMzAwMg==", "bodyText": "Codacy found an issue: Avoid unused method parameters such as 'map'.", "url": "https://github.com/dotCMS/core/pull/19198#discussion_r485023002", "createdAt": "2020-09-08T15:47:39Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/contentlet/transform/strategy/DefaultTransformStrategy.java", "diffHunk": "@@ -276,6 +278,22 @@ private void addCategories(final Contentlet contentlet, final Map<String, Object\n         }\n     }\n \n+    /**\n+     * add tags to the given contentlet\n+     */\n+    private void addTags(final Contentlet contentlet, final Map<String, Object> map,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjc0MTc5", "url": "https://github.com/dotCMS/core/pull/19198#pullrequestreview-484274179", "createdAt": "2020-09-08T15:47:40Z", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0MFrOHOjdKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0MFrOHOjdKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMzAxNg==", "bodyText": "Codacy found an issue: Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block", "url": "https://github.com/dotCMS/core/pull/19198#discussion_r485023016", "createdAt": "2020-09-08T15:47:40Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/page/RenderedContainersDataFetcher.java", "diffHunk": "@@ -0,0 +1,50 @@\n+package com.dotcms.graphql.datafetcher.page;\n+\n+import com.dotcms.graphql.DotGraphQLContext;\n+import com.dotcms.rendering.velocity.services.PageRenderUtil;\n+import com.dotmarketing.portlets.htmlpageasset.business.render.ContainerRaw;\n+import com.dotmarketing.portlets.htmlpageasset.business.render.ContainerRenderedBuilder;\n+import com.dotmarketing.portlets.htmlpageasset.model.HTMLPageAsset;\n+import com.dotmarketing.portlets.templates.design.bean.TemplateLayout;\n+import com.dotmarketing.util.Logger;\n+import com.dotmarketing.util.PageMode;\n+import com.dotmarketing.util.VelocityUtil;\n+import graphql.schema.DataFetcher;\n+import graphql.schema.DataFetchingEnvironment;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.Set;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import org.apache.velocity.context.Context;\n+\n+/**\n+ * This DataFetcher returns the {@link TemplateLayout} associated to the requested {@link HTMLPageAsset}.\n+ */\n+public class RenderedContainersDataFetcher implements DataFetcher<Set<Entry<String, String>>> {\n+    @Override\n+    public Set<Entry<String, String>> get(final DataFetchingEnvironment environment) throws Exception {\n+        try {\n+            final DotGraphQLContext context = environment.getContext();\n+            final ContainerRaw containerRaw = environment.getSource();\n+            final String pageModeAsString = (String) context.getParam(\"pageMode\");\n+\n+            final PageMode mode = PageMode.get(pageModeAsString);\n+            final HttpServletRequest request = context.getHttpServletRequest();\n+            final HttpServletResponse response = context.getHttpServletResponse();\n+\n+            final PageRenderUtil pageRenderUtil = (PageRenderUtil) context.getParam(\"pageRenderUtil\");\n+\n+            final Context velocityContext  = pageRenderUtil\n+                    .addAll(VelocityUtil.getInstance().getContext(request, response));\n+\n+            final Map<String, String> uuidsRendered = ContainerRenderedBuilder.\n+                    render(velocityContext, mode, containerRaw);\n+\n+            return uuidsRendered.entrySet();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjc0MTk3", "url": "https://github.com/dotCMS/core/pull/19198#pullrequestreview-484274197", "createdAt": "2020-09-08T15:47:41Z", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0MVrOHOjdMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0MVrOHOjdMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMzAyNQ==", "bodyText": "Codacy found an issue: Avoid declaring a variable if it is unreferenced before a possible exit point.", "url": "https://github.com/dotCMS/core/pull/19198#discussion_r485023025", "createdAt": "2020-09-08T15:47:41Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/page/ContainersDataFetcher.java", "diffHunk": "@@ -0,0 +1,50 @@\n+package com.dotcms.graphql.datafetcher.page;\n+\n+import com.dotcms.graphql.DotGraphQLContext;\n+import com.dotcms.rendering.velocity.services.PageRenderUtil;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n+import com.dotmarketing.portlets.htmlpageasset.business.render.ContainerRaw;\n+import com.dotmarketing.portlets.htmlpageasset.model.HTMLPageAsset;\n+import com.dotmarketing.portlets.templates.design.bean.TemplateLayout;\n+import com.dotmarketing.util.Logger;\n+import com.dotmarketing.util.PageMode;\n+import com.liferay.portal.model.User;\n+import graphql.schema.DataFetcher;\n+import graphql.schema.DataFetchingEnvironment;\n+import java.util.List;\n+import javax.servlet.http.HttpServletRequest;\n+\n+/**\n+ * This DataFetcher returns the {@link TemplateLayout} associated to the requested {@link HTMLPageAsset}.\n+ */\n+public class ContainersDataFetcher implements DataFetcher<List<ContainerRaw>> {\n+    @Override\n+    public List<ContainerRaw> get(final DataFetchingEnvironment environment) throws Exception {\n+        try {\n+            final DotGraphQLContext context = environment.getContext();\n+            final User user = context.getUser();\n+            final Contentlet page = environment.getSource();\n+            final String pageModeAsString = (String) context.getParam(\"pageMode\");\n+            final String languageId = (String) context.getParam(\"languageId\");\n+\n+            final PageMode mode = PageMode.get(pageModeAsString);\n+            final HttpServletRequest request = context.getHttpServletRequest();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjc0MjE5", "url": "https://github.com/dotCMS/core/pull/19198#pullrequestreview-484274219", "createdAt": "2020-09-08T15:47:42Z", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0MlrOHOjdRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0MlrOHOjdRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMzA0Ng==", "bodyText": "Codacy found an issue: Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block", "url": "https://github.com/dotCMS/core/pull/19198#discussion_r485023046", "createdAt": "2020-09-08T15:47:42Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/page/ContainersDataFetcher.java", "diffHunk": "@@ -0,0 +1,50 @@\n+package com.dotcms.graphql.datafetcher.page;\n+\n+import com.dotcms.graphql.DotGraphQLContext;\n+import com.dotcms.rendering.velocity.services.PageRenderUtil;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n+import com.dotmarketing.portlets.htmlpageasset.business.render.ContainerRaw;\n+import com.dotmarketing.portlets.htmlpageasset.model.HTMLPageAsset;\n+import com.dotmarketing.portlets.templates.design.bean.TemplateLayout;\n+import com.dotmarketing.util.Logger;\n+import com.dotmarketing.util.PageMode;\n+import com.liferay.portal.model.User;\n+import graphql.schema.DataFetcher;\n+import graphql.schema.DataFetchingEnvironment;\n+import java.util.List;\n+import javax.servlet.http.HttpServletRequest;\n+\n+/**\n+ * This DataFetcher returns the {@link TemplateLayout} associated to the requested {@link HTMLPageAsset}.\n+ */\n+public class ContainersDataFetcher implements DataFetcher<List<ContainerRaw>> {\n+    @Override\n+    public List<ContainerRaw> get(final DataFetchingEnvironment environment) throws Exception {\n+        try {\n+            final DotGraphQLContext context = environment.getContext();\n+            final User user = context.getUser();\n+            final Contentlet page = environment.getSource();\n+            final String pageModeAsString = (String) context.getParam(\"pageMode\");\n+            final String languageId = (String) context.getParam(\"languageId\");\n+\n+            final PageMode mode = PageMode.get(pageModeAsString);\n+            final HttpServletRequest request = context.getHttpServletRequest();\n+\n+            final HTMLPageAsset pageAsset = APILocator.getHTMLPageAssetAPI()\n+                    .fromContentlet(page);\n+\n+            final Host site = APILocator.getHostAPI().find(page.getHost(), user, false);\n+            PageRenderUtil pageRenderUtil = new PageRenderUtil(pageAsset, user, mode,\n+                    Long.parseLong(languageId), site);\n+\n+            context.addParam(\"pageRenderUtil\", pageRenderUtil);\n+\n+            return pageRenderUtil.getContainersRaw();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjc0MjM2", "url": "https://github.com/dotCMS/core/pull/19198#pullrequestreview-484274236", "createdAt": "2020-09-08T15:47:43Z", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0M1rOHOjdUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0M1rOHOjdUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMzA1OA==", "bodyText": "Codacy found an issue: Avoid unused method parameters such as 'user'.", "url": "https://github.com/dotCMS/core/pull/19198#discussion_r485023058", "createdAt": "2020-09-08T15:47:43Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/contentlet/transform/strategy/DefaultTransformStrategy.java", "diffHunk": "@@ -276,6 +278,22 @@ private void addCategories(final Contentlet contentlet, final Map<String, Object\n         }\n     }\n \n+    /**\n+     * add tags to the given contentlet\n+     */\n+    private void addTags(final Contentlet contentlet, final Map<String, Object> map,\n+            final Set<TransformOptions> options, final User user) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjc0MjU0", "url": "https://github.com/dotCMS/core/pull/19198#pullrequestreview-484274254", "createdAt": "2020-09-08T15:47:44Z", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0NFrOHOjdYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0NFrOHOjdYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMzA3NA==", "bodyText": "Codacy found an issue: The String literal \"containers\" appears 5 times in this file; the first occurrence is on line 113", "url": "https://github.com/dotCMS/core/pull/19198#discussion_r485023074", "createdAt": "2020-09-08T15:47:44Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/business/PageAPIGraphQLTypesProvider.java", "diffHunk": "@@ -108,6 +123,8 @@\n \n         pageFields.put(\"layout\", new TypeFetcher(GraphQLTypeReference.typeRef(\"Layout\"),\n                 new LayoutDataFetcher()));\n+        pageFields.put(\"containers\", new TypeFetcher(list(GraphQLTypeReference.typeRef(\"Container\")),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjc0MjY3", "url": "https://github.com/dotCMS/core/pull/19198#pullrequestreview-484274267", "createdAt": "2020-09-08T15:47:45Z", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0NVrOHOjdcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0NVrOHOjdcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMzA5MA==", "bodyText": "Codacy found an issue: Avoid unused local variables such as 'request'.", "url": "https://github.com/dotCMS/core/pull/19198#discussion_r485023090", "createdAt": "2020-09-08T15:47:45Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/page/ContainersDataFetcher.java", "diffHunk": "@@ -0,0 +1,50 @@\n+package com.dotcms.graphql.datafetcher.page;\n+\n+import com.dotcms.graphql.DotGraphQLContext;\n+import com.dotcms.rendering.velocity.services.PageRenderUtil;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n+import com.dotmarketing.portlets.htmlpageasset.business.render.ContainerRaw;\n+import com.dotmarketing.portlets.htmlpageasset.model.HTMLPageAsset;\n+import com.dotmarketing.portlets.templates.design.bean.TemplateLayout;\n+import com.dotmarketing.util.Logger;\n+import com.dotmarketing.util.PageMode;\n+import com.liferay.portal.model.User;\n+import graphql.schema.DataFetcher;\n+import graphql.schema.DataFetchingEnvironment;\n+import java.util.List;\n+import javax.servlet.http.HttpServletRequest;\n+\n+/**\n+ * This DataFetcher returns the {@link TemplateLayout} associated to the requested {@link HTMLPageAsset}.\n+ */\n+public class ContainersDataFetcher implements DataFetcher<List<ContainerRaw>> {\n+    @Override\n+    public List<ContainerRaw> get(final DataFetchingEnvironment environment) throws Exception {\n+        try {\n+            final DotGraphQLContext context = environment.getContext();\n+            final User user = context.getUser();\n+            final Contentlet page = environment.getSource();\n+            final String pageModeAsString = (String) context.getParam(\"pageMode\");\n+            final String languageId = (String) context.getParam(\"languageId\");\n+\n+            final PageMode mode = PageMode.get(pageModeAsString);\n+            final HttpServletRequest request = context.getHttpServletRequest();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0Mjc0Mjg5", "url": "https://github.com/dotCMS/core/pull/19198#pullrequestreview-484274289", "createdAt": "2020-09-08T15:47:46Z", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0NlrOHOjdhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo0Nzo0NlrOHOjdhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyMzEwOQ==", "bodyText": "Codacy found an issue: Avoid catching generic exceptions such as NullPointerException, RuntimeException, Exception in try-catch block", "url": "https://github.com/dotCMS/core/pull/19198#discussion_r485023109", "createdAt": "2020-09-08T15:47:46Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/ContentMapDataFetcher.java", "diffHunk": "@@ -0,0 +1,20 @@\n+package com.dotcms.graphql.datafetcher;\n+\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n+import com.dotmarketing.util.Logger;\n+import graphql.schema.DataFetcher;\n+import graphql.schema.DataFetchingEnvironment;\n+\n+public class ContentMapDataFetcher implements DataFetcher<Object> {\n+    @Override\n+    public Object get(final DataFetchingEnvironment environment) throws Exception {\n+        try {\n+            final Contentlet contentlet = environment.getSource();\n+            final String key = environment.getArgument(\"key\");\n+            return contentlet.get(key);\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MDYxMzg5", "url": "https://github.com/dotCMS/core/pull/19198#pullrequestreview-485061389", "createdAt": "2020-09-09T14:21:17Z", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MDg1OTM0", "url": "https://github.com/dotCMS/core/pull/19198#pullrequestreview-485085934", "createdAt": "2020-09-09T14:44:43Z", "commit": {"oid": "f65297b5c6801897be97d5f8c7c31a00880d377b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1826, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}