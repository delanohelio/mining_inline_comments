{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1MTg0MDM3", "number": 18942, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNDo1MVrOERNL3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNDo1NFrOERNL7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDc3Mjc2OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotcms/rest/api/v1/apps/AppsResourceTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNDo1MVrOG1y5FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNDo1MVrOG1y5FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2MTUyNA==", "bodyText": "Codacy found an issue: The String literal \"selectParam\" appears 4 times in this file; the first occurrence is on line 795", "url": "https://github.com/dotCMS/core/pull/18942#discussion_r459061524", "createdAt": "2020-07-22T20:24:51Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/rest/api/v1/apps/AppsResourceTest.java", "diffHunk": "@@ -773,6 +773,92 @@ public void Test_Secret_Serializer_Returned_Values_Match_Descriptor_Verify_Hidde\n         }\n     }\n \n+    /**\n+     * Test we save a secret that is described as a Select List\n+     * Given scenario: We create a secret then we update the select value sending one of the values\n+     * Expected Result: Only the public value  was supposed to be updated. The other 2 hidden fields should remain the same since we sent a bunch of *****\n+     * @throws IOException\n+     */\n+    @Test\n+    public void Test_Select_List_Param()\n+            throws IOException {\n+       //Select list definition\n+       final List<Map<String,String>> list = ImmutableList.of(\n+           ImmutableMap.of(\"label\",\"-\",\"value\",\"\"),\n+           ImmutableMap.of(\"label\",\"uno\",\"value\",\"1\"),\n+           ImmutableMap.of(\"label\",\"dos\",\"value\",\"2\",\"selected\",\"true\"),\n+           ImmutableMap.of(\"label\",\"tres\",\"value\",\"3\")\n+       );\n+\n+        final AppDescriptorDataGen dataGen = new AppDescriptorDataGen()\n+                .stringParam(\"param1\", false,  true)\n+                .selectParam(\"selectParam\", true, list)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "509a914b7c7837721016b429e8c8367b133ad81e"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDc3MjgxOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/integration-test/java/com/dotcms/rest/api/v1/apps/AppsResourceTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNDo1MlrOG1y5HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNDo1MlrOG1y5HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2MTUzMg==", "bodyText": "Codacy found an issue: The String literal \"label\" appears 4 times in this file; the first occurrence is on line 787", "url": "https://github.com/dotCMS/core/pull/18942#discussion_r459061532", "createdAt": "2020-07-22T20:24:52Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/rest/api/v1/apps/AppsResourceTest.java", "diffHunk": "@@ -773,6 +773,92 @@ public void Test_Secret_Serializer_Returned_Values_Match_Descriptor_Verify_Hidde\n         }\n     }\n \n+    /**\n+     * Test we save a secret that is described as a Select List\n+     * Given scenario: We create a secret then we update the select value sending one of the values\n+     * Expected Result: Only the public value  was supposed to be updated. The other 2 hidden fields should remain the same since we sent a bunch of *****\n+     * @throws IOException\n+     */\n+    @Test\n+    public void Test_Select_List_Param()\n+            throws IOException {\n+       //Select list definition\n+       final List<Map<String,String>> list = ImmutableList.of(\n+           ImmutableMap.of(\"label\",\"-\",\"value\",\"\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "509a914b7c7837721016b429e8c8367b133ad81e"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDc3Mjg3OnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotcms/security/apps/AppsAPIImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNDo1M1rOG1y5JQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNDo1M1rOG1y5JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2MTU0MQ==", "bodyText": "Codacy found an issue: Useless parentheses.", "url": "https://github.com/dotCMS/core/pull/18942#discussion_r459061541", "createdAt": "2020-07-22T20:24:53Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/security/apps/AppsAPIImpl.java", "diffHunk": "@@ -610,6 +611,45 @@ private void removeDescriptor(final AppDescriptor descriptor) throws DotDataExce\n         return emptyMap();\n     }\n \n+    /**\n+     * Condition check This verifies the descriptor demands the param to be required but.. No default value is provided and the secret neither has a stored value\n+     * @param descriptor ParamDescriptor\n+     * @param secret stored secret\n+     * @return\n+     */\n+    private boolean isRequiredWithNoDefaultValue(final ParamDescriptor descriptor, final Secret secret ){\n+        //Verify we have a param marked required and no default Value\n+        final boolean isRequiredWithNoDefaultParam = (descriptor.isRequired() && isEmpty(descriptor.getValue()));\n+        //Verify the secret is empty\n+        final boolean isSecretWithEmptyValue = (null == secret || isNotSet(secret.getValue()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "509a914b7c7837721016b429e8c8367b133ad81e"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDc3MjkyOnYy", "diffSide": "RIGHT", "path": "dotCMS/src/main/java/com/dotcms/security/apps/AppsAPIImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNDo1NFrOG1y5KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoyNDo1NFrOG1y5KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2MTU0NQ==", "bodyText": "Codacy found an issue: Useless parentheses.", "url": "https://github.com/dotCMS/core/pull/18942#discussion_r459061545", "createdAt": "2020-07-22T20:24:54Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotcms/security/apps/AppsAPIImpl.java", "diffHunk": "@@ -610,6 +611,45 @@ private void removeDescriptor(final AppDescriptor descriptor) throws DotDataExce\n         return emptyMap();\n     }\n \n+    /**\n+     * Condition check This verifies the descriptor demands the param to be required but.. No default value is provided and the secret neither has a stored value\n+     * @param descriptor ParamDescriptor\n+     * @param secret stored secret\n+     * @return\n+     */\n+    private boolean isRequiredWithNoDefaultValue(final ParamDescriptor descriptor, final Secret secret ){\n+        //Verify we have a param marked required and no default Value\n+        final boolean isRequiredWithNoDefaultParam = (descriptor.isRequired() && isEmpty(descriptor.getValue()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "509a914b7c7837721016b429e8c8367b133ad81e"}, "originalPosition": 65}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2073, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}