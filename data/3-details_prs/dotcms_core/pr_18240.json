{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2Nzc5OTAz", "number": 18240, "title": "#18194  fix NPE on site_search_audit.jsp", "bodyText": "This comes to solve a problem that breaks the jsp and prevents it from loading when site search job option all sites is selected", "createdAt": "2020-04-01T06:05:20Z", "url": "https://github.com/dotCMS/core/pull/18240", "merged": true, "mergeCommit": {"oid": "58763c6ccdd047981010180473e3955b4603de1c"}, "closed": true, "closedAt": "2020-04-01T15:54:53Z", "author": {"login": "fabrizzio-dotCMS"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTRRG9gH2gAyMzk2Nzc5OTAzOmI5ZDQ5YzMyZWM3Y2Y0Y2Y1Y2FmMGRlZGRhZDkzN2ZkY2NmYmE1MzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTY35QgFqTM4NTY2MTMzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b9d49c32ec7cf4cf5caf0deddad937fdccfba534", "author": {"user": {"login": "fabrizzio-dotCMS", "name": "Fabrizzio Araya"}}, "url": "https://github.com/dotCMS/core/commit/b9d49c32ec7cf4cf5caf0deddad937fdccfba534", "committedDate": "2020-04-01T05:57:43Z", "message": "#18194  fix NPE on site_search_audit.jsp"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MzA0OTA3", "url": "https://github.com/dotCMS/core/pull/18240#pullrequestreview-385304907", "createdAt": "2020-04-01T06:48:10Z", "commit": {"oid": "b9d49c32ec7cf4cf5caf0deddad937fdccfba534"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNjo0ODoxMFrOF-y69w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNjo0ODoxMFrOF-y69w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM5MDMyNw==", "bodyText": "rename to hostId", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401390327", "createdAt": "2020-04-01T06:48:10Z", "author": {"login": "jdotcms"}, "path": "dotCMS/src/main/webapp/html/portlet/ext/sitesearch/site_search_audit.jsp", "diffHunk": "@@ -57,11 +56,19 @@\n     </tr>\n     <% for(SiteSearchAudit a : recents) { %>\n     <%\n-        StringBuilder hostList=new StringBuilder();\n-        for(String hid : a.getHostList().split(\",\")) {\n-            if(UtilMethods.isSet(hid))\n-                hostList.append(APILocator.getHostAPI().find(hid, APILocator.getUserAPI().getSystemUser(), false).getHostname())\n-                        .append(\"  \");\n+        final StringBuilder hostList = new StringBuilder();\n+        final String [] sites = a.getHostList().split(\",\");\n+        if(UtilMethods.isSet(sites) ){\n+            if (\"empty\".equalsIgnoreCase(sites[0])) {\n+                hostList.append(LanguageUtil.get(pageContext, \"All\")).append(\"  \");\n+            } else {\n+                for (String hid : sites) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b9d49c32ec7cf4cf5caf0deddad937fdccfba534"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MzA1MTM2", "url": "https://github.com/dotCMS/core/pull/18240#pullrequestreview-385305136", "createdAt": "2020-04-01T06:48:37Z", "commit": {"oid": "b9d49c32ec7cf4cf5caf0deddad937fdccfba534"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNjo0ODozN1rOF-y7sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwNjo0ODozN1rOF-y7sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM5MDUxNA==", "bodyText": "sites must check if size is >= 1", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401390514", "createdAt": "2020-04-01T06:48:37Z", "author": {"login": "jdotcms"}, "path": "dotCMS/src/main/webapp/html/portlet/ext/sitesearch/site_search_audit.jsp", "diffHunk": "@@ -57,11 +56,19 @@\n     </tr>\n     <% for(SiteSearchAudit a : recents) { %>\n     <%\n-        StringBuilder hostList=new StringBuilder();\n-        for(String hid : a.getHostList().split(\",\")) {\n-            if(UtilMethods.isSet(hid))\n-                hostList.append(APILocator.getHostAPI().find(hid, APILocator.getUserAPI().getSystemUser(), false).getHostname())\n-                        .append(\"  \");\n+        final StringBuilder hostList = new StringBuilder();\n+        final String [] sites = a.getHostList().split(\",\");\n+        if(UtilMethods.isSet(sites) ){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b9d49c32ec7cf4cf5caf0deddad937fdccfba534"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MzA1Mzgx", "url": "https://github.com/dotCMS/core/pull/18240#pullrequestreview-385305381", "createdAt": "2020-04-01T06:49:03Z", "commit": {"oid": "b9d49c32ec7cf4cf5caf0deddad937fdccfba534"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d583a3a5356711e56bc854e7e38268b4bb1fe52e", "author": {"user": {"login": "fabrizzio-dotCMS", "name": "Fabrizzio Araya"}}, "url": "https://github.com/dotCMS/core/commit/d583a3a5356711e56bc854e7e38268b4bb1fe52e", "committedDate": "2020-04-01T13:31:25Z", "message": "#18194 feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NjI2MDU0", "url": "https://github.com/dotCMS/core/pull/18240#pullrequestreview-385626054", "createdAt": "2020-04-01T14:13:07Z", "commit": {"oid": "d583a3a5356711e56bc854e7e38268b4bb1fe52e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNDoxMzowN1rOF_Cm8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNDoxMzowN1rOF_Cm8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY0NzM0Nw==", "bodyText": "what is it happen if getHostList return null?", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401647347", "createdAt": "2020-04-01T14:13:07Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/webapp/html/portlet/ext/sitesearch/site_search_audit.jsp", "diffHunk": "@@ -57,11 +56,19 @@\n     </tr>\n     <% for(SiteSearchAudit a : recents) { %>\n     <%\n-        StringBuilder hostList=new StringBuilder();\n-        for(String hid : a.getHostList().split(\",\")) {\n-            if(UtilMethods.isSet(hid))\n-                hostList.append(APILocator.getHostAPI().find(hid, APILocator.getUserAPI().getSystemUser(), false).getHostname())\n-                        .append(\"  \");\n+        final StringBuilder hostList = new StringBuilder();\n+        final String [] sites = a.getHostList().split(\",\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d583a3a5356711e56bc854e7e38268b4bb1fe52e"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NjMxNTcy", "url": "https://github.com/dotCMS/core/pull/18240#pullrequestreview-385631572", "createdAt": "2020-04-01T14:19:11Z", "commit": {"oid": "d583a3a5356711e56bc854e7e38268b4bb1fe52e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNDoxOToxMVrOF_C4IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNDoxOToxMVrOF_C4IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY1MTc0NA==", "bodyText": "where is hostList use?", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401651744", "createdAt": "2020-04-01T14:19:11Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/webapp/html/portlet/ext/sitesearch/site_search_audit.jsp", "diffHunk": "@@ -57,11 +56,19 @@\n     </tr>\n     <% for(SiteSearchAudit a : recents) { %>\n     <%\n-        StringBuilder hostList=new StringBuilder();\n-        for(String hid : a.getHostList().split(\",\")) {\n-            if(UtilMethods.isSet(hid))\n-                hostList.append(APILocator.getHostAPI().find(hid, APILocator.getUserAPI().getSystemUser(), false).getHostname())\n-                        .append(\"  \");\n+        final StringBuilder hostList = new StringBuilder();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d583a3a5356711e56bc854e7e38268b4bb1fe52e"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NjYxMzMz", "url": "https://github.com/dotCMS/core/pull/18240#pullrequestreview-385661333", "createdAt": "2020-04-01T14:49:25Z", "commit": {"oid": "d583a3a5356711e56bc854e7e38268b4bb1fe52e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1236, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}