{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzMzE5NDQy", "number": 17853, "title": "Issue 16589", "bodyText": "set hostId when pulling nav from root so only pulls items that belong to the selected host", "createdAt": "2020-01-15T20:18:23Z", "url": "https://github.com/dotCMS/core/pull/17853", "merged": true, "mergeCommit": {"oid": "c28946f8ec74d9b46c9a850de9c8f34e706e769d"}, "closed": true, "closedAt": "2020-01-17T15:44:36Z", "author": {"login": "erickgonzalez"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6rQy8AH2gAyMzYzMzE5NDQyOmY4ZGU0MWNiNDRkMGFkZDQ3NzRkOTI2MDQ1MGJhOGM3OGM1YWM4ZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6-nhQgFqTM0NDEzMDQ4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f8de41cb44d0add4774d9260450ba8c78c5ac8f6", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/f8de41cb44d0add4774d9260450ba8c78c5ac8f6", "committedDate": "2020-01-15T20:06:48Z", "message": "#16589 set hostId when pulling nav from root so only pulls items that belongs to the selected host"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adaf3d358d84604ee710a47e285dfa3c4dc2d1c9", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/adaf3d358d84604ee710a47e285dfa3c4dc2d1c9", "committedDate": "2020-01-15T20:07:38Z", "message": "#16589 IT and update old IT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNTAxMTEw", "url": "https://github.com/dotCMS/core/pull/17853#pullrequestreview-343501110", "createdAt": "2020-01-15T20:30:30Z", "commit": {"oid": "adaf3d358d84604ee710a47e285dfa3c4dc2d1c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMDozMDozMFrOFeFfog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQyMDozMDozMFrOFeFfog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA5MTYxOA==", "bodyText": "Issue found: Local variable 'navResult' could be declared final", "url": "https://github.com/dotCMS/core/pull/17853#discussion_r367091618", "createdAt": "2020-01-15T20:30:30Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/viewtools/navigation/NavToolTest.java", "diffHunk": "@@ -409,4 +404,41 @@ private int findShowOnMenuUnderFolder(Folder folder, User user)\n         return showOnMenu;\n     }\n \n+    @Test\n+    public void testNavTool_rootLevel_returnItemsOnlyForSite() throws Exception\n+    {\n+        //Get SystemFolder\n+        final Folder systemFolder = APILocator.getFolderAPI().findSystemFolder();\n+\n+        //Create new Host\n+        final Host newHost1 = new SiteDataGen().nextPersisted();\n+\n+        //Create contentlets on one host\n+        final File file = File.createTempFile(\"fileTestEngTrue\", \".txt\");\n+        FileUtil.write(file, \"helloworld\");\n+        final Contentlet fileAssetOneHost = new FileAssetDataGen(systemFolder, file)\n+                .host(newHost1).setProperty(FileAssetAPI.SHOW_ON_MENU, \"true\").nextPersisted();\n+        final Template template = new TemplateDataGen().nextPersisted();\n+        final Contentlet pageAssetOneHost = new HTMLPageDataGen(systemFolder, template)\n+                .showOnMenu(true).host(newHost1).nextPersisted();\n+        ContentletDataGen.publish(pageAssetOneHost);\n+        ContentletDataGen.publish(fileAssetOneHost);\n+\n+        //Create new Host\n+        final Host newHost2 = new SiteDataGen().nextPersisted();\n+\n+        //Create contentlets on default host\n+        final Contentlet fileAssetNewHost = new FileAssetDataGen(systemFolder, file)\n+                .host(newHost2).setProperty(FileAssetAPI.SHOW_ON_MENU, \"true\").nextPersisted();\n+        final Contentlet pageAssetNewHost = new HTMLPageDataGen(systemFolder, template)\n+                .showOnMenu(true).host(newHost2).nextPersisted();\n+        ContentletDataGen.publish(pageAssetNewHost);\n+        ContentletDataGen.publish(fileAssetNewHost);\n+\n+        NavResult navResult = new NavTool().getNav(newHost2, systemFolder.getPath());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adaf3d358d84604ee710a47e285dfa3c4dc2d1c9"}, "originalPosition": 81}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNTM5MjY2", "url": "https://github.com/dotCMS/core/pull/17853#pullrequestreview-343539266", "createdAt": "2020-01-15T21:39:07Z", "commit": {"oid": "adaf3d358d84604ee710a47e285dfa3c4dc2d1c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNTQ0NDgx", "url": "https://github.com/dotCMS/core/pull/17853#pullrequestreview-343544481", "createdAt": "2020-01-15T21:48:24Z", "commit": {"oid": "adaf3d358d84604ee710a47e285dfa3c4dc2d1c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MTMwNDg5", "url": "https://github.com/dotCMS/core/pull/17853#pullrequestreview-344130489", "createdAt": "2020-01-16T18:39:49Z", "commit": {"oid": "adaf3d358d84604ee710a47e285dfa3c4dc2d1c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1302, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}