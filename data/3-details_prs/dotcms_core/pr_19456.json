{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0Mjk5MzQ1", "number": 19456, "title": "#19080 system container", "bodyText": "Adding changes to handle the headless container: this is a container that does not need any content type layout, instead of it uses a generic layout for all content types or the content types selected by the user by config.\nThis generic layout it's the default_container.vtl file.\nCan provide a list of content types that this container can use $dotJSON.put(\"useDefaultLayout\", \"*\") at the container.vtl, as a note: * means all content types. This will be also respecting content type permissions based on the user when adding content.\nBoth vtl's were added to the empty starter.", "createdAt": "2020-10-15T18:34:30Z", "url": "https://github.com/dotCMS/core/pull/19456", "merged": true, "mergeCommit": {"oid": "0d42bc963d11df56b20052a06a3dad91bb5a3592"}, "closed": true, "closedAt": "2021-03-11T21:09:50Z", "author": {"login": "jdotcms"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdS2JjlgH2gAyNTA0Mjk5MzQ1OmU2NDBmYjJiZTk2YTkwNDAyYWNlM2EwNTQyMzA1OTU1NzdjNGQ2MmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeCLT45gFqTYxMDE2MjE2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e640fb2be96a90402ace3a054230595577c4d62c", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/e640fb2be96a90402ace3a054230595577c4d62c", "committedDate": "2020-10-15T18:33:11Z", "message": "#19080 adding first draft of a headless container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "241b8d46371cffe9b712a27553543e582c57f3e2", "author": {"user": {"login": "alfredo-dotcms", "name": null}}, "url": "https://github.com/dotCMS/core/commit/241b8d46371cffe9b712a27553543e582c57f3e2", "committedDate": "2020-10-16T18:58:54Z", "message": "Merge branch 'master' into issue-19080-default-layout-for-file-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3927fd4ccb3e1fd765bc434d09395a3ec3d18e48", "author": {"user": {"login": "alfredo-dotcms", "name": null}}, "url": "https://github.com/dotCMS/core/commit/3927fd4ccb3e1fd765bc434d09395a3ec3d18e48", "committedDate": "2020-10-16T19:01:26Z", "message": "core#19086 fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ae4d43c8682a18afd0b30558ab3624c28e87ada", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/4ae4d43c8682a18afd0b30558ab3624c28e87ada", "committedDate": "2020-10-16T19:27:24Z", "message": "#19080 adding more changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1600f5bdf75a3e2166ac0adc2c9dc21f4d557a7e", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/1600f5bdf75a3e2166ac0adc2c9dc21f4d557a7e", "committedDate": "2020-10-19T18:39:49Z", "message": "#19080 adding the ability to use a default layout for a headless container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555", "author": {"user": {"login": "jdotcms", "name": "Jonathan"}}, "url": "https://github.com/dotCMS/core/commit/116cf22bed9da6f8f2213f0d70b57ca441b1c555", "committedDate": "2020-10-19T18:40:15Z", "message": "Merge branch 'issue-19080-default-layout-for-file-container' of github.com:dotCMS/core into issue-19080-default-layout-for-file-container"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYxODk4", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512061898", "createdAt": "2020-10-19T18:48:10Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxMFrOHkc9zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxMFrOHkc9zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTM1Ng==", "bodyText": "Codacy found an issue: Avoid unused local variables such as 'assets'.", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985356", "createdAt": "2020-10-19T18:48:10Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/ContainerStructureFinderStrategyResolverTest.java", "diffHunk": "@@ -56,4 +72,81 @@ public void get_container_structure_from_file_name_() throws Exception {\n         assertEquals(longNamedStrategy.getVelocityVarName(fileAsset), fileName);\n     }\n \n+    /**\n+     * Method to test: {@link FileAssetContainerUtil#fromAssets(Host, Folder, List, boolean, boolean)}\n+     * Given Scenario: Creates a container with a default layout\n+     * ExpectedResult: Expected result that the result should contains the default container layout\n+     * @throws Exception\n+     */\n+    @Test\n+    public void test_default_layout() throws Exception {\n+\n+        //Getting the current default host\n+        final String pathRoot             = \"/application/containers/test\"+System.currentTimeMillis();\n+        final Host currentDefaultHost     = APILocator.getHostAPI().findDefaultHost(APILocator.systemUser(), false);\n+        final Folder containerFolder      = this.createAppContainerTest(currentDefaultHost, pathRoot);\n+        final String contentTypeVariable  = \"testfa\"+System.currentTimeMillis();\n+        ContentType fileAssetContentType  = ImmutableFileAssetContentType.builder()\n+                .name(\"FileAssetTestContentType\").variable(contentTypeVariable).build();\n+        fileAssetContentType              = APILocator.getContentTypeAPI(APILocator.systemUser()).save(fileAssetContentType);\n+        final List<FileAsset> assets      = Arrays.asList(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYxOTEx", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512061911", "createdAt": "2020-10-19T18:48:11Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxMVrOHkc91Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxMVrOHkc91Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTM2NQ==", "bodyText": "Codacy found an issue: Consider simply returning the value vs storing it in local variable 'rootFolder'", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985365", "createdAt": "2020-10-19T18:48:11Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -116,6 +135,70 @@ public void test_getHost_demo_default_demo() throws Exception {\n         }\n     }\n \n+    /**\n+     * Method to test: {@link FileAssetContainerUtil#fromAssets(Host, Folder, List, boolean, boolean)}\n+     * Given Scenario: Creates a container with a default layout\n+     * ExpectedResult: Expected result that the result should contains the default container layout\n+     * @throws Exception\n+     */\n+    @Test\n+    public void test_fromAssets_default_layout() throws Exception {\n+\n+        //Getting the current default host\n+        final Host currentDefaultHost     = APILocator.getHostAPI().findDefaultHost(APILocator.systemUser(), false);\n+        final Folder containerFolder      = this.createAppContainerTest(currentDefaultHost);\n+        final String contentTypeVariable  = \"testfa\"+System.currentTimeMillis();\n+        ContentType fileAssetContentType  = ImmutableFileAssetContentType.builder()\n+                .name(\"FileAssetTestContentType\").variable(contentTypeVariable).build();\n+        fileAssetContentType              = contentTypeAPI.save(fileAssetContentType);\n+        final List<FileAsset> assets      = Arrays.asList(\n+                this.createFileAsset(\"container\", \".vtl\",\n+                        \"$dotJSON.put(\\\"title\\\", \\\"Test VTL and Valid and Invalid Content Types\\\")\\n\" +\n+                        \"$dotJSON.put(\\\"max_contentlets\\\", 25)\\n\" +\n+                        \"$dotJSON.put(\\\"useDefaultLayout\\\",\\\"*\\\")\", containerFolder, fileAssetContentType),\n+                this.createFileAsset(\"default_container\", \".vtl\", \"$title\", containerFolder, fileAssetContentType));\n+        final boolean showLive            = false;\n+        final boolean includeHostOnPath   = false;\n+\n+        final Container container = FileAssetContainerUtil.getInstance().fromAssets(currentDefaultHost,\n+                containerFolder, assets, showLive, includeHostOnPath);\n+\n+        Assert.assertNotNull(container);\n+        Assert.assertTrue(container instanceof FileAssetContainer);\n+        Assert.assertEquals(1   , FileAssetContainer.class.cast(container).getContainerStructuresAssets().size());\n+        Assert.assertNotNull(FileAssetContainer.class.cast(container).getDefaultContainerLayoutAsset());\n+        Assert.assertEquals(\"default_container.vtl\",FileAssetContainer.class.cast(container).getDefaultContainerLayoutAsset().getFileName());\n+    }\n+\n+    private FileAsset createFileAsset (final String fileName1,\n+                                       final String fileExtension,\n+                                       final String fileContent,\n+                                       final Folder root1,\n+                                       final ContentType fileAssetContentType) throws Exception {\n+\n+        final FileAsset fileAsset = new FileAsset();\n+        final File tempFile1      = File.createTempFile(fileName1, fileExtension);\n+        FileUtil.write(tempFile1, fileContent);\n+        final String fileNameField1 = fileName1 + fileExtension;\n+\n+        fileAsset.setContentType(fileAssetContentType);\n+        fileAsset.setFolder(root1.getInode());\n+        fileAsset.setBinary(FileAssetAPI.BINARY_FIELD, tempFile1);\n+        fileAsset.setStringProperty(FileAssetAPI.HOST_FOLDER_FIELD, root1.getInode());\n+        fileAsset.setStringProperty(FileAssetAPI.TITLE_FIELD, fileNameField1);\n+        fileAsset.setStringProperty(FileAssetAPI.FILE_NAME_FIELD, fileNameField1);\n+        fileAsset.setIndexPolicy(IndexPolicy.FORCE);\n+\n+        // Create a piece of content for the default host\n+        return APILocator.getFileAssetAPI().fromContentlet(\n+                APILocator.getContentletAPI().checkin(fileAsset, user, false));\n+    }\n+\n+    private Folder createAppContainerTest(final Host currentDefaultHost) throws DotDataException, DotSecurityException {\n \n+        final String pathRoot   = \"/application/containers/test\"+System.currentTimeMillis();\n+        final Folder rootFolder = APILocator.getFolderAPI().createFolders(pathRoot, currentDefaultHost, APILocator.systemUser(), false);\n+        return rootFolder;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 101}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYxOTI2", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512061926", "createdAt": "2020-10-19T18:48:12Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxMlrOHkc94g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxMlrOHkc94g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTM3OA==", "bodyText": "Codacy found an issue: A method/constructor should not explicitly throw java.lang.Exception", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985378", "createdAt": "2020-10-19T18:48:12Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/ContainerStructureFinderStrategyResolverTest.java", "diffHunk": "@@ -56,4 +72,81 @@ public void get_container_structure_from_file_name_() throws Exception {\n         assertEquals(longNamedStrategy.getVelocityVarName(fileAsset), fileName);\n     }\n \n+    /**\n+     * Method to test: {@link FileAssetContainerUtil#fromAssets(Host, Folder, List, boolean, boolean)}\n+     * Given Scenario: Creates a container with a default layout\n+     * ExpectedResult: Expected result that the result should contains the default container layout\n+     * @throws Exception\n+     */\n+    @Test\n+    public void test_default_layout() throws Exception {\n+\n+        //Getting the current default host\n+        final String pathRoot             = \"/application/containers/test\"+System.currentTimeMillis();\n+        final Host currentDefaultHost     = APILocator.getHostAPI().findDefaultHost(APILocator.systemUser(), false);\n+        final Folder containerFolder      = this.createAppContainerTest(currentDefaultHost, pathRoot);\n+        final String contentTypeVariable  = \"testfa\"+System.currentTimeMillis();\n+        ContentType fileAssetContentType  = ImmutableFileAssetContentType.builder()\n+                .name(\"FileAssetTestContentType\").variable(contentTypeVariable).build();\n+        fileAssetContentType              = APILocator.getContentTypeAPI(APILocator.systemUser()).save(fileAssetContentType);\n+        final List<FileAsset> assets      = Arrays.asList(\n+                this.createFileAsset(\"container\", \".vtl\",\n+                        \"$dotJSON.put(\\\"title\\\", \\\"Test No VTL and All Content Types\\\")\\n\" +\n+                                \"$dotJSON.put(\\\"max_contentlets\\\", 25)\\n\" +\n+                                \"$dotJSON.put(\\\"useDefaultLayout\\\",\\\"*\\\")\", containerFolder, fileAssetContentType),\n+                this.createFileAsset(\"default_container\", \".vtl\", \"$title\", containerFolder, fileAssetContentType));\n+\n+        final ContainerStructureFinderStrategyResolver containerStructureFinderStrategyResolver =\n+                new ContainerStructureFinderStrategyResolver();\n+\n+        final Container container = APILocator.getContainerAPI()\n+                .getWorkingContainerByFolderPath(pathRoot, currentDefaultHost, APILocator.systemUser(), false);\n+        final Optional<ContainerStructureFinderStrategy> containerStructureFinderStrategy =\n+                containerStructureFinderStrategyResolver.get(container);\n+\n+        Assert.assertTrue(containerStructureFinderStrategy.isPresent());\n+\n+        final  List<ContainerStructure> containerStructures = containerStructureFinderStrategy.get().apply(container);\n+\n+        Assert.assertNotNull(containerStructures);\n+        Assert.assertFalse(containerStructures.isEmpty());\n+\n+        final List<ContentType> contentTypes = APILocator.getContentTypeAPI(APILocator.systemUser()).findAll();\n+        for (final ContentType contentType : contentTypes) {\n+\n+            Assert.assertTrue(\"Content Type: \" + contentType.variable() + \" does not included on the container\",\n+                    containerStructures.stream().anyMatch(containerStructure -> containerStructure.getStructureId().equals(contentType.id())));\n+        }\n+    }\n+\n+    private FileAsset createFileAsset (final String fileName1,\n+                                       final String fileExtension,\n+                                       final String fileContent,\n+                                       final Folder root1,\n+                                       final ContentType fileAssetContentType) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 94}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYxOTQx", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512061941", "createdAt": "2020-10-19T18:48:13Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxM1rOHkc97Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxM1rOHkc97Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTM4OQ==", "bodyText": "Codacy found an issue: Avoid using redundant field initializer for 'defaultContainerLayoutAsset'", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985389", "createdAt": "2020-10-19T18:48:13Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/main/java/com/dotmarketing/portlets/containers/model/FileAssetContainer.java", "diffHunk": "@@ -42,15 +42,28 @@ public FileAssetContainer() {\n     @JsonIgnore\n     private transient FileAsset postLoopAsset = null;\n \n+    @JsonIgnore\n+    private transient FileAsset defaultContainerLayoutAsset = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYxOTU0", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512061954", "createdAt": "2020-10-19T18:48:14Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxNFrOHkc99g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxNFrOHkc99g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTM5OA==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotcms.rendering.velocity.viewtools.content.FileAssetMap'", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985398", "createdAt": "2020-10-19T18:48:14Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,33 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.contenttype.model.type.ContentType;\n+import com.dotcms.contenttype.model.type.ImmutableFileAssetContentType;\n import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;\n import com.dotcms.datagen.SiteDataGen;\n+import com.dotcms.rendering.velocity.viewtools.content.FileAssetMap;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYxOTY2", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512061966", "createdAt": "2020-10-19T18:48:15Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxNVrOHkc-Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxNVrOHkc-Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTQxMQ==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotcms.datagen.FolderDataGen'", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985411", "createdAt": "2020-10-19T18:48:15Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,33 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.contenttype.model.type.ContentType;\n+import com.dotcms.contenttype.model.type.ImmutableFileAssetContentType;\n import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYxOTgz", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512061983", "createdAt": "2020-10-19T18:48:16Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxNlrOHkc-Dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxNlrOHkc-Dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTQyMw==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.dotmarketing.portlets.containers.model.FileAssetContainer'", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985423", "createdAt": "2020-10-19T18:48:16Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/ContainerStructureFinderStrategyResolverTest.java", "diffHunk": "@@ -1,6 +1,18 @@\n package com.dotmarketing.portlets.containers.business;\n \n import static org.junit.Assert.assertEquals;\n+\n+import com.dotcms.contenttype.model.type.ContentType;\n+import com.dotcms.contenttype.model.type.ImmutableFileAssetContentType;\n+import com.dotmarketing.beans.ContainerStructure;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.exception.DotDataException;\n+import com.dotmarketing.exception.DotSecurityException;\n+import com.dotmarketing.portlets.containers.model.Container;\n+import com.dotmarketing.portlets.containers.model.FileAssetContainer;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYyMDAy", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512062002", "createdAt": "2020-10-19T18:48:17Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxOFrOHkc-HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxOFrOHkc-HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTQzNg==", "bodyText": "Codacy found an issue: Consider simply returning the value vs storing it in local variable 'rootFolder'", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985436", "createdAt": "2020-10-19T18:48:18Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/ContainerStructureFinderStrategyResolverTest.java", "diffHunk": "@@ -56,4 +72,81 @@ public void get_container_structure_from_file_name_() throws Exception {\n         assertEquals(longNamedStrategy.getVelocityVarName(fileAsset), fileName);\n     }\n \n+    /**\n+     * Method to test: {@link FileAssetContainerUtil#fromAssets(Host, Folder, List, boolean, boolean)}\n+     * Given Scenario: Creates a container with a default layout\n+     * ExpectedResult: Expected result that the result should contains the default container layout\n+     * @throws Exception\n+     */\n+    @Test\n+    public void test_default_layout() throws Exception {\n+\n+        //Getting the current default host\n+        final String pathRoot             = \"/application/containers/test\"+System.currentTimeMillis();\n+        final Host currentDefaultHost     = APILocator.getHostAPI().findDefaultHost(APILocator.systemUser(), false);\n+        final Folder containerFolder      = this.createAppContainerTest(currentDefaultHost, pathRoot);\n+        final String contentTypeVariable  = \"testfa\"+System.currentTimeMillis();\n+        ContentType fileAssetContentType  = ImmutableFileAssetContentType.builder()\n+                .name(\"FileAssetTestContentType\").variable(contentTypeVariable).build();\n+        fileAssetContentType              = APILocator.getContentTypeAPI(APILocator.systemUser()).save(fileAssetContentType);\n+        final List<FileAsset> assets      = Arrays.asList(\n+                this.createFileAsset(\"container\", \".vtl\",\n+                        \"$dotJSON.put(\\\"title\\\", \\\"Test No VTL and All Content Types\\\")\\n\" +\n+                                \"$dotJSON.put(\\\"max_contentlets\\\", 25)\\n\" +\n+                                \"$dotJSON.put(\\\"useDefaultLayout\\\",\\\"*\\\")\", containerFolder, fileAssetContentType),\n+                this.createFileAsset(\"default_container\", \".vtl\", \"$title\", containerFolder, fileAssetContentType));\n+\n+        final ContainerStructureFinderStrategyResolver containerStructureFinderStrategyResolver =\n+                new ContainerStructureFinderStrategyResolver();\n+\n+        final Container container = APILocator.getContainerAPI()\n+                .getWorkingContainerByFolderPath(pathRoot, currentDefaultHost, APILocator.systemUser(), false);\n+        final Optional<ContainerStructureFinderStrategy> containerStructureFinderStrategy =\n+                containerStructureFinderStrategyResolver.get(container);\n+\n+        Assert.assertTrue(containerStructureFinderStrategy.isPresent());\n+\n+        final  List<ContainerStructure> containerStructures = containerStructureFinderStrategy.get().apply(container);\n+\n+        Assert.assertNotNull(containerStructures);\n+        Assert.assertFalse(containerStructures.isEmpty());\n+\n+        final List<ContentType> contentTypes = APILocator.getContentTypeAPI(APILocator.systemUser()).findAll();\n+        for (final ContentType contentType : contentTypes) {\n+\n+            Assert.assertTrue(\"Content Type: \" + contentType.variable() + \" does not included on the container\",\n+                    containerStructures.stream().anyMatch(containerStructure -> containerStructure.getStructureId().equals(contentType.id())));\n+        }\n+    }\n+\n+    private FileAsset createFileAsset (final String fileName1,\n+                                       final String fileExtension,\n+                                       final String fileContent,\n+                                       final Folder root1,\n+                                       final ContentType fileAssetContentType) throws Exception {\n+\n+        final FileAsset fileAsset = new FileAsset();\n+        final File tempFile1      = File.createTempFile(fileName1, fileExtension);\n+        FileUtil.write(tempFile1, fileContent);\n+        final String fileNameField1 = fileName1 + fileExtension;\n+\n+        fileAsset.setContentType(fileAssetContentType);\n+        fileAsset.setFolder(root1.getInode());\n+        fileAsset.setBinary(FileAssetAPI.BINARY_FIELD, tempFile1);\n+        fileAsset.setStringProperty(FileAssetAPI.HOST_FOLDER_FIELD, root1.getInode());\n+        fileAsset.setStringProperty(FileAssetAPI.TITLE_FIELD, fileNameField1);\n+        fileAsset.setStringProperty(FileAssetAPI.FILE_NAME_FIELD, fileNameField1);\n+        fileAsset.setIndexPolicy(IndexPolicy.FORCE);\n+\n+        // Create a piece of content for the default host\n+        return APILocator.getFileAssetAPI().fromContentlet(\n+                APILocator.getContentletAPI().checkin(fileAsset, APILocator.systemUser(), false));\n+    }\n+\n+    private Folder createAppContainerTest(final Host currentDefaultHost, final String pathRoot) throws DotDataException, DotSecurityException {\n+\n+        final Folder rootFolder = APILocator.getFolderAPI().createFolders(pathRoot, currentDefaultHost, APILocator.systemUser(), false);\n+        return rootFolder;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 117}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYyMDEz", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512062013", "createdAt": "2020-10-19T18:48:19Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxOVrOHkc-Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxOVrOHkc-Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTQ0Mw==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'com.liferay.portal.model.User'", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985443", "createdAt": "2020-10-19T18:48:19Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,33 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.contenttype.model.type.ContentType;\n+import com.dotcms.contenttype.model.type.ImmutableFileAssetContentType;\n import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;\n import com.dotcms.datagen.SiteDataGen;\n+import com.dotcms.rendering.velocity.viewtools.content.FileAssetMap;\n import com.dotmarketing.beans.Host;\n import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.exception.DotDataException;\n+import com.dotmarketing.exception.DotSecurityException;\n import com.dotmarketing.portlets.ContentletBaseTest;\n+import com.dotmarketing.portlets.containers.model.Container;\n import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.portlets.contentlet.model.IndexPolicy;\n+import com.dotmarketing.portlets.fileassets.business.FileAsset;\n+import com.dotmarketing.portlets.fileassets.business.FileAssetAPI;\n+import com.dotmarketing.portlets.folders.model.Folder;\n+import com.liferay.portal.model.User;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYyMDI1", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512062025", "createdAt": "2020-10-19T18:48:19Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxOVrOHkc-LQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoxOVrOHkc-LQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTQ1Mw==", "bodyText": "Codacy found an issue: A method/constructor should not explicitly throw java.lang.Exception", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985453", "createdAt": "2020-10-19T18:48:19Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -116,6 +135,70 @@ public void test_getHost_demo_default_demo() throws Exception {\n         }\n     }\n \n+    /**\n+     * Method to test: {@link FileAssetContainerUtil#fromAssets(Host, Folder, List, boolean, boolean)}\n+     * Given Scenario: Creates a container with a default layout\n+     * ExpectedResult: Expected result that the result should contains the default container layout\n+     * @throws Exception\n+     */\n+    @Test\n+    public void test_fromAssets_default_layout() throws Exception {\n+\n+        //Getting the current default host\n+        final Host currentDefaultHost     = APILocator.getHostAPI().findDefaultHost(APILocator.systemUser(), false);\n+        final Folder containerFolder      = this.createAppContainerTest(currentDefaultHost);\n+        final String contentTypeVariable  = \"testfa\"+System.currentTimeMillis();\n+        ContentType fileAssetContentType  = ImmutableFileAssetContentType.builder()\n+                .name(\"FileAssetTestContentType\").variable(contentTypeVariable).build();\n+        fileAssetContentType              = contentTypeAPI.save(fileAssetContentType);\n+        final List<FileAsset> assets      = Arrays.asList(\n+                this.createFileAsset(\"container\", \".vtl\",\n+                        \"$dotJSON.put(\\\"title\\\", \\\"Test VTL and Valid and Invalid Content Types\\\")\\n\" +\n+                        \"$dotJSON.put(\\\"max_contentlets\\\", 25)\\n\" +\n+                        \"$dotJSON.put(\\\"useDefaultLayout\\\",\\\"*\\\")\", containerFolder, fileAssetContentType),\n+                this.createFileAsset(\"default_container\", \".vtl\", \"$title\", containerFolder, fileAssetContentType));\n+        final boolean showLive            = false;\n+        final boolean includeHostOnPath   = false;\n+\n+        final Container container = FileAssetContainerUtil.getInstance().fromAssets(currentDefaultHost,\n+                containerFolder, assets, showLive, includeHostOnPath);\n+\n+        Assert.assertNotNull(container);\n+        Assert.assertTrue(container instanceof FileAssetContainer);\n+        Assert.assertEquals(1   , FileAssetContainer.class.cast(container).getContainerStructuresAssets().size());\n+        Assert.assertNotNull(FileAssetContainer.class.cast(container).getDefaultContainerLayoutAsset());\n+        Assert.assertEquals(\"default_container.vtl\",FileAssetContainer.class.cast(container).getDefaultContainerLayoutAsset().getFileName());\n+    }\n+\n+    private FileAsset createFileAsset (final String fileName1,\n+                                       final String fileExtension,\n+                                       final String fileContent,\n+                                       final Folder root1,\n+                                       final ContentType fileAssetContentType) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 77}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYyMDMy", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512062032", "createdAt": "2020-10-19T18:48:20Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoyMFrOHkc-OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoyMFrOHkc-OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTQ2NQ==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'java.io.IOException'", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985465", "createdAt": "2020-10-19T18:48:20Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,33 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.contenttype.model.type.ContentType;\n+import com.dotcms.contenttype.model.type.ImmutableFileAssetContentType;\n import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;\n import com.dotcms.datagen.SiteDataGen;\n+import com.dotcms.rendering.velocity.viewtools.content.FileAssetMap;\n import com.dotmarketing.beans.Host;\n import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.exception.DotDataException;\n+import com.dotmarketing.exception.DotSecurityException;\n import com.dotmarketing.portlets.ContentletBaseTest;\n+import com.dotmarketing.portlets.containers.model.Container;\n import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.portlets.contentlet.model.IndexPolicy;\n+import com.dotmarketing.portlets.fileassets.business.FileAsset;\n+import com.dotmarketing.portlets.fileassets.business.FileAssetAPI;\n+import com.dotmarketing.portlets.folders.model.Folder;\n+import com.liferay.portal.model.User;\n+import com.liferay.util.FileUtil;\n import org.junit.Assert;\n import org.junit.Test;\n \n+import java.io.File;\n+import java.io.IOException;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyMDYyMDQ1", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-512062045", "createdAt": "2020-10-19T18:48:21Z", "commit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoyMVrOHkc-Qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODo0ODoyMVrOHkc-Qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk4NTQ3NA==", "bodyText": "Codacy found an issue: Avoid unused imports such as 'java.util.Map'", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r507985474", "createdAt": "2020-10-19T18:48:21Z", "author": {"login": "dev-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,33 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.contenttype.model.type.ContentType;\n+import com.dotcms.contenttype.model.type.ImmutableFileAssetContentType;\n import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;\n import com.dotcms.datagen.SiteDataGen;\n+import com.dotcms.rendering.velocity.viewtools.content.FileAssetMap;\n import com.dotmarketing.beans.Host;\n import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.exception.DotDataException;\n+import com.dotmarketing.exception.DotSecurityException;\n import com.dotmarketing.portlets.ContentletBaseTest;\n+import com.dotmarketing.portlets.containers.model.Container;\n import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.portlets.contentlet.model.IndexPolicy;\n+import com.dotmarketing.portlets.fileassets.business.FileAsset;\n+import com.dotmarketing.portlets.fileassets.business.FileAssetAPI;\n+import com.dotmarketing.portlets.folders.model.Folder;\n+import com.liferay.portal.model.User;\n+import com.liferay.util.FileUtil;\n import org.junit.Assert;\n import org.junit.Test;\n \n+import java.io.File;\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.Map;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "116cf22bed9da6f8f2213f0d70b57ca441b1c555"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79a24607b7142c863bde89292a4da59b23f19810", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/79a24607b7142c863bde89292a4da59b23f19810", "committedDate": "2021-03-02T18:59:01Z", "message": "Merge branch 'master' of github.com:dotCMS/core into issue-19080-default-layout-for-file-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e11c0da7379fde8a147bcf91a639df51c77a42f4", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/e11c0da7379fde8a147bcf91a639df51c77a42f4", "committedDate": "2021-03-04T14:57:13Z", "message": "feedback codacy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa2aacc5889a301b2552b8ce62545f6e6a8b1058", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/fa2aacc5889a301b2552b8ce62545f6e6a8b1058", "committedDate": "2021-03-04T14:57:48Z", "message": "Merge branch 'master' of github.com:dotCMS/core into issue-19080-default-layout-for-file-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e667cb9e92ea983cf839f4c5ce47ab34222b942", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/1e667cb9e92ea983cf839f4c5ce47ab34222b942", "committedDate": "2021-03-04T16:37:37Z", "message": "#19080 update empty starter with system container files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ec4a88401010f9702504c8cb6f58d1e6ecdd953", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/3ec4a88401010f9702504c8cb6f58d1e6ecdd953", "committedDate": "2021-03-10T20:45:01Z", "message": "Merge branch 'master' of github.com:dotCMS/core into issue-19080-default-layout-for-file-container"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA5MTk5NDgz", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-609199483", "createdAt": "2021-03-10T21:50:35Z", "commit": {"oid": "3ec4a88401010f9702504c8cb6f58d1e6ecdd953"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xMFQyMTo1MDozNVrOI0elgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xMFQyMTo1MDozNVrOI0elgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MTg5Nzk4NA==", "bodyText": "here are you flushing all the cache?", "url": "https://github.com/dotCMS/core/pull/19456#discussion_r591897984", "createdAt": "2021-03-10T21:50:35Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/java/com/dotcms/contenttype/business/ContentTypeCache2Impl.java", "diffHunk": "@@ -103,4 +104,9 @@ public ContentType byVarOrInode(String varOrInode) {\n     \t}\n \n \t}\n+\n+    public void clearContainerStructures() {\n+\n+        cache.flushGroup(containerStructureGroup);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ec4a88401010f9702504c8cb6f58d1e6ecdd953"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA5ODg4NTg1", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-609888585", "createdAt": "2021-03-11T15:26:47Z", "commit": {"oid": "3ec4a88401010f9702504c8cb6f58d1e6ecdd953"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f4e9b6f0990d9fc6b534a29ae1f4bff9ee3cd54", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/6f4e9b6f0990d9fc6b534a29ae1f4bff9ee3cd54", "committedDate": "2021-03-11T18:35:49Z", "message": "Merge branch 'master' of github.com:dotCMS/core into issue-19080-default-layout-for-file-container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80a8fdce91cee22dfa4c95658f409f7c7b5392b2", "author": {"user": {"login": "erickgonzalez", "name": null}}, "url": "https://github.com/dotCMS/core/commit/80a8fdce91cee22dfa4c95658f409f7c7b5392b2", "committedDate": "2021-03-11T18:54:40Z", "message": "#19080 update starter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjEwMTYyMTY1", "url": "https://github.com/dotCMS/core/pull/19456#pullrequestreview-610162165", "createdAt": "2021-03-11T19:46:55Z", "commit": {"oid": "80a8fdce91cee22dfa4c95658f409f7c7b5392b2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1741, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}