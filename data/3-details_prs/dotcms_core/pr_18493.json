{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NjM4NTE0", "number": 18493, "title": "Additional fix for issue 14385", "bodyText": "With this change, I am modifying the way in which the hikari datasource is initialized. Now, a Properties object is sent directly to Hikari. This provides more flexibility when a user wants to set additional properties in the datasource", "createdAt": "2020-05-13T22:07:15Z", "url": "https://github.com/dotCMS/core/pull/18493", "merged": true, "mergeCommit": {"oid": "980987b9b88bab7fba025ee9985412108427e716"}, "closed": true, "closedAt": "2020-05-14T15:24:17Z", "author": {"login": "nollymar"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchAPMrgH2gAyNDE3NjM4NTE0OjkzZmExNzJjM2QyYzg3ZmE2MTNkYjllYzc5YWU0N2VmMTk5YTFiZGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchOYs1AFqTQxMTg2NTIwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "93fa172c3d2c87fa613db9ec79ae47ef199a1bdd", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/93fa172c3d2c87fa613db9ec79ae47ef199a1bdd", "committedDate": "2020-05-13T22:02:11Z", "message": "#14385 Initializing Hikari datasource in a cleaner way"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzM1MDM5", "url": "https://github.com/dotCMS/core/pull/18493#pullrequestreview-411335039", "createdAt": "2020-05-13T22:10:25Z", "commit": {"oid": "93fa172c3d2c87fa613db9ec79ae47ef199a1bdd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzM2MTQz", "url": "https://github.com/dotCMS/core/pull/18493#pullrequestreview-411336143", "createdAt": "2020-05-13T22:12:44Z", "commit": {"oid": "93fa172c3d2c87fa613db9ec79ae47ef199a1bdd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjoxMjo0NVrOGVFWnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMjoxMjo0NVrOGVFWnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc2MDk5MQ==", "bodyText": "I guess you can just simply call:\ndbType = System.getProperty(\"databaseType\", System.getenv(\"databaseType\"))", "url": "https://github.com/dotCMS/core/pull/18493#discussion_r424760991", "createdAt": "2020-05-13T22:12:45Z", "author": {"login": "victoralfaro-dotcms"}, "path": "dotCMS/src/integration-test/java/com/dotcms/util/TestDataSourceProvider.java", "diffHunk": "@@ -63,18 +26,26 @@ public DataSource apply() {\n      * Load properties file with DB connection details\n      * @throws NamingException\n      */\n-    private void loadProperties()  {\n-        ClassLoader loader = Thread.currentThread().getContextClassLoader();\n-        prop = new Properties();\n+    private Properties getProperties()  {\n+        final ClassLoader loader = Thread.currentThread().getContextClassLoader();\n+        final Properties properties = new Properties();\n \n-        try (InputStream resourceStream = loader.getResourceAsStream(\"db-config.properties\")) {\n-            prop.load(resourceStream);\n-        } catch (Exception e) {\n-            Logger.info(this.getClass(), \"Unable to get properties from file db-config.properties - let's try the environment\");\n+        String dbType = \"postgres\";\n+\n+        if (System.getProperty(\"databaseType\")!=null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93fa172c3d2c87fa613db9ec79ae47ef199a1bdd"}, "originalPosition": 77}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzM2NTk4", "url": "https://github.com/dotCMS/core/pull/18493#pullrequestreview-411336598", "createdAt": "2020-05-13T22:13:39Z", "commit": {"oid": "93fa172c3d2c87fa613db9ec79ae47ef199a1bdd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "642ef3a2eb8a6c827007505e1db5727578eff7a2", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/642ef3a2eb8a6c827007505e1db5727578eff7a2", "committedDate": "2020-05-13T22:52:44Z", "message": "#14385 Applying code review suggestion: https://github.com/dotCMS/core/pull/18493#pullrequestreview-411336143"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7e80527abbe5b568b6665d48c28bedc3ad30d84", "author": {"user": null}, "url": "https://github.com/dotCMS/core/commit/f7e80527abbe5b568b6665d48c28bedc3ad30d84", "committedDate": "2020-05-13T23:59:12Z", "message": "Merge branch 'release-5.3.0' of https://github.com/dotCMS/core into additional-fix-for-issue-14385"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExODY1MjAz", "url": "https://github.com/dotCMS/core/pull/18493#pullrequestreview-411865203", "createdAt": "2020-05-14T14:31:15Z", "commit": {"oid": "f7e80527abbe5b568b6665d48c28bedc3ad30d84"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1108, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}