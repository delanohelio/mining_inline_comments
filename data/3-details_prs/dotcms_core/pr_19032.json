{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMDYxMzY3", "number": 19032, "title": "#18801 add \"count\" field to GraphQL", "bodyText": "", "createdAt": "2020-08-04T23:28:59Z", "url": "https://github.com/dotCMS/core/pull/19032", "merged": true, "mergeCommit": {"oid": "c51882b5fc74a0f654e4722030e088cfca866b5b"}, "closed": true, "closedAt": "2020-08-06T15:17:57Z", "author": {"login": "dsilvam"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7vMljAH2gAyNDYzMDYxMzY3OjliYmYzYzA5ZTAxYTMwZmYxYzZkM2Y3MDNlOGU4NGQ1YWYwMTMyNjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8RtpbgFqTQ2MjY0MDQ5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9bbf3c09e01a30ff1c6d3f703e8e84d5af013269", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/9bbf3c09e01a30ff1c6d3f703e8e84d5af013269", "committedDate": "2020-08-04T23:26:54Z", "message": "#18801 add \"count\" field to GraphQL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNzAwMDY2", "url": "https://github.com/dotCMS/core/pull/19032#pullrequestreview-461700066", "createdAt": "2020-08-05T14:08:09Z", "commit": {"oid": "9bbf3c09e01a30ff1c6d3f703e8e84d5af013269"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNDowODowOVrOG8LVcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNDoxMTo1NlrOG8Lf_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc1MzQ1Ng==", "bodyText": "I am not sure if this should be fieldName, maybe 'collectionName' could be a better name", "url": "https://github.com/dotCMS/core/pull/19032#discussion_r465753456", "createdAt": "2020-08-05T14:08:09Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/business/CountTypeProvider.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package com.dotcms.graphql.business;\n+\n+import static com.dotcms.util.CollectionsUtils.map;\n+import static graphql.Scalars.GraphQLString;\n+\n+import com.dotcms.graphql.util.TypeUtil;\n+import graphql.schema.GraphQLObjectType;\n+import graphql.schema.GraphQLOutputType;\n+import graphql.schema.GraphQLType;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.Map;\n+\n+public enum CountTypeProvider implements GraphQLTypesProvider {\n+\n+    INSTANCE;\n+\n+    final Map<String, GraphQLOutputType> pageFields = map(\n+            \"totalCount\", GraphQLString,\n+            \"fieldName\", GraphQLString);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bbf3c09e01a30ff1c6d3f703e8e84d5af013269"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc1NTIxOQ==", "bodyText": "should it be the same name than here https://github.com/dotCMS/core/pull/19032/files#diff-cf87643edb0d8a8ccf07993e94b7180bR21?\nmaybe we can create a suoer class here to define to add the count field and create the Map, and later each sub class could add the extra parameters", "url": "https://github.com/dotCMS/core/pull/19032#discussion_r465755219", "createdAt": "2020-08-05T14:10:34Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/business/CountTypeProvider.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package com.dotcms.graphql.business;\n+\n+import static com.dotcms.util.CollectionsUtils.map;\n+import static graphql.Scalars.GraphQLString;\n+\n+import com.dotcms.graphql.util.TypeUtil;\n+import graphql.schema.GraphQLObjectType;\n+import graphql.schema.GraphQLOutputType;\n+import graphql.schema.GraphQLType;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.Map;\n+\n+public enum CountTypeProvider implements GraphQLTypesProvider {\n+\n+    INSTANCE;\n+\n+    final Map<String, GraphQLOutputType> pageFields = map(\n+            \"totalCount\", GraphQLString,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bbf3c09e01a30ff1c6d3f703e8e84d5af013269"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc1NjE1Ng==", "bodyText": "maybe should re throw a DotRuntimeException", "url": "https://github.com/dotCMS/core/pull/19032#discussion_r465756156", "createdAt": "2020-08-05T14:11:56Z", "author": {"login": "freddyucv"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/CountDataFetcher.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package com.dotcms.graphql.datafetcher;\n+\n+import com.dotcms.graphql.DotGraphQLContext;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n+import com.dotmarketing.portlets.contentlet.transform.FolderToMapTransformer;\n+import com.dotmarketing.util.Logger;\n+import com.liferay.portal.model.User;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+import graphql.schema.DataFetcher;\n+import graphql.schema.DataFetchingEnvironment;\n+\n+public class CountDataFetcher implements DataFetcher<List<Map<String, Object>>> {\n+    @Override\n+    public List<Map<String, Object>> get(final DataFetchingEnvironment environment) throws Exception {\n+        try {\n+            return ((DotGraphQLContext) environment.getContext()).getFieldCountMaps();\n+        } catch (Exception e) {\n+            Logger.error(this, e.getMessage(), e);\n+            throw e;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bbf3c09e01a30ff1c6d3f703e8e84d5af013269"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55437c5fdb46e03a6de86cda9007d5693bce876b", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/55437c5fdb46e03a6de86cda9007d5693bce876b", "committedDate": "2020-08-05T17:33:32Z", "message": "#18801 Rename count to QueryMetadata and postman tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89735bdcb988dfde0380f834877314543d36d985", "author": {"user": {"login": "dsilvam", "name": "Daniel Silva"}}, "url": "https://github.com/dotCMS/core/commit/89735bdcb988dfde0380f834877314543d36d985", "committedDate": "2020-08-05T17:36:32Z", "message": "#18801 rename class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjE3NjIy", "url": "https://github.com/dotCMS/core/pull/19032#pullrequestreview-462617622", "createdAt": "2020-08-06T15:14:41Z", "commit": {"oid": "89735bdcb988dfde0380f834877314543d36d985"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjE4MTI5", "url": "https://github.com/dotCMS/core/pull/19032#pullrequestreview-462618129", "createdAt": "2020-08-06T15:15:14Z", "commit": {"oid": "89735bdcb988dfde0380f834877314543d36d985"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjIwMjYw", "url": "https://github.com/dotCMS/core/pull/19032#pullrequestreview-462620260", "createdAt": "2020-08-06T15:17:26Z", "commit": {"oid": "89735bdcb988dfde0380f834877314543d36d985"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjM4ODA2", "url": "https://github.com/dotCMS/core/pull/19032#pullrequestreview-462638806", "createdAt": "2020-08-06T15:37:56Z", "commit": {"oid": "89735bdcb988dfde0380f834877314543d36d985"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNTozNzo1NlrOG85Fnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNTozNzo1NlrOG85Fnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjUwMzA3MQ==", "bodyText": "doc", "url": "https://github.com/dotCMS/core/pull/19032#discussion_r466503071", "createdAt": "2020-08-06T15:37:56Z", "author": {"login": "jdotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/business/QueryMetadataFieldProvider.java", "diffHunk": "@@ -0,0 +1,23 @@\n+package com.dotcms.graphql.business;\n+\n+import static graphql.schema.GraphQLFieldDefinition.newFieldDefinition;\n+import static graphql.schema.GraphQLList.list;\n+\n+import com.dotcms.graphql.datafetcher.QueryMetadataDataFetcher;\n+import com.dotmarketing.exception.DotDataException;\n+import graphql.schema.GraphQLFieldDefinition;\n+import java.util.Collection;\n+import java.util.Collections;\n+\n+public enum QueryMetadataFieldProvider implements GraphQLFieldsProvider {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89735bdcb988dfde0380f834877314543d36d985"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjM5MjA1", "url": "https://github.com/dotCMS/core/pull/19032#pullrequestreview-462639205", "createdAt": "2020-08-06T15:38:22Z", "commit": {"oid": "89735bdcb988dfde0380f834877314543d36d985"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNTozODoyMlrOG85Gug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNTozODoyMlrOG85Gug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjUwMzM1NA==", "bodyText": "doc", "url": "https://github.com/dotCMS/core/pull/19032#discussion_r466503354", "createdAt": "2020-08-06T15:38:22Z", "author": {"login": "jdotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/business/QueryMetadataTypeProvider.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package com.dotcms.graphql.business;\n+\n+import static com.dotcms.util.CollectionsUtils.map;\n+import static graphql.Scalars.GraphQLString;\n+\n+import com.dotcms.graphql.util.TypeUtil;\n+import graphql.schema.GraphQLObjectType;\n+import graphql.schema.GraphQLOutputType;\n+import graphql.schema.GraphQLType;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.Map;\n+\n+public enum QueryMetadataTypeProvider implements GraphQLTypesProvider {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89735bdcb988dfde0380f834877314543d36d985"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjQwNDk5", "url": "https://github.com/dotCMS/core/pull/19032#pullrequestreview-462640499", "createdAt": "2020-08-06T15:39:47Z", "commit": {"oid": "89735bdcb988dfde0380f834877314543d36d985"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNTozOTo0N1rOG85K8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNTozOTo0N1rOG85K8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjUwNDQzNA==", "bodyText": "Doc", "url": "https://github.com/dotCMS/core/pull/19032#discussion_r466504434", "createdAt": "2020-08-06T15:39:47Z", "author": {"login": "jdotcms"}, "path": "dotCMS/src/main/java/com/dotcms/graphql/datafetcher/QueryMetadataDataFetcher.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package com.dotcms.graphql.datafetcher;\n+\n+import com.dotcms.graphql.DotGraphQLContext;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.portlets.contentlet.model.Contentlet;\n+import com.dotmarketing.portlets.contentlet.transform.FolderToMapTransformer;\n+import com.dotmarketing.util.Logger;\n+import com.liferay.portal.model.User;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+import graphql.schema.DataFetcher;\n+import graphql.schema.DataFetchingEnvironment;\n+\n+public class QueryMetadataDataFetcher implements DataFetcher<List<Map<String, Object>>> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89735bdcb988dfde0380f834877314543d36d985"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 707, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}