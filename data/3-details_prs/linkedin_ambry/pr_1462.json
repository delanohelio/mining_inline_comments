{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwOTUxMTA0", "number": 1462, "title": "Support Disable/Enable/Reset partition in Helix bootstrap tool", "bodyText": "support disabling partition when decommissioning a replica. (This is supposed to be done before removing it from IdealState)\nsupport enabling partition if it is previously disabled\nsupport resetting partition if it is previously in ERROR state\nintroduced HelixAdminOperation in bootstrap tool to simplify some code logic\nadded option to remove admin configs (i.e. PartitionOverride map)", "createdAt": "2020-04-08T16:24:04Z", "url": "https://github.com/linkedin/ambry/pull/1462", "merged": true, "mergeCommit": {"oid": "efe93e719c9370b7b649d24d05e74aca54127da6"}, "closed": true, "closedAt": "2020-04-20T18:21:13Z", "author": {"login": "jsjtzyy"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVqYcMAH2gAyNDAwOTUxMTA0OjIwMDFkMzFkMzc3MGNkZGMyMDRiY2UzYjU2YWFlNGQxNTNiMjhkZWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX_DPdAH2gAyNDAwOTUxMTA0OjJhNmU1OGQ3ZjU4YWIwMWNjYTZlOGVmMGM0ZWUyMjg4M2FiODU0NmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2001d31d3770cddc204bce3b56aae4d153b28ded", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/2001d31d3770cddc204bce3b56aae4d153b28ded", "committedDate": "2020-04-08T16:21:12Z", "message": "Support disabling partition in Helix bootstrap tool\n\n1. support disabling partition when decommissioning a replica. (This is\nsupposed to be done before removing it from IdealState)\n2. introduced HelixAdminOperation in bootstrap tool to simplify some\ncode logic."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMjg0NTkz", "url": "https://github.com/linkedin/ambry/pull/1462#pullrequestreview-391284593", "createdAt": "2020-04-10T06:19:41Z", "commit": {"oid": "2001d31d3770cddc204bce3b56aae4d153b28ded"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwNjoxOTo0MVrOGDyHQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwNjoxOTo0MVrOGDyHQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYxOTk3MA==", "bodyText": "Indent for the entire info function from line 729 to 735.", "url": "https://github.com/linkedin/ambry/pull/1462#discussion_r406619970", "createdAt": "2020-04-10T06:19:41Z", "author": {"login": "xuhao417347761"}, "path": "ambry-clustermap/src/main/java/com/github/ambry/clustermap/HelixBootstrapUpgradeUtil.java", "diffHunk": "@@ -707,22 +722,45 @@ private void addUpdateResources(String dcName, Map<String, Set<String>> partitio\n                 .add(partitionName);\n           }\n         } else if (!instanceSetInStatic.equals(instanceSetInHelix)) {\n-          // @formatter:off\n+          // we change the IdealState only when the operation is meant to bootstrap cluster or indeed update IdealState\n+          if (EnumSet.of(HelixAdminOperation.UpdateIdealState, HelixAdminOperation.BootstrapCluster)\n+              .contains(helixAdminOperation)) {\n+            // @formatter:off\n           info(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2001d31d3770cddc204bce3b56aae4d153b28ded"}, "originalPosition": 212}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "624cbcf7a6f25501d62efe75014276dd6ee37c43", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/624cbcf7a6f25501d62efe75014276dd6ee37c43", "committedDate": "2020-04-11T04:38:13Z", "message": "indentation and change comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMzM2NjAy", "url": "https://github.com/linkedin/ambry/pull/1462#pullrequestreview-392336602", "createdAt": "2020-04-13T18:26:15Z", "commit": {"oid": "624cbcf7a6f25501d62efe75014276dd6ee37c43"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "375da499b4a9411d71e1d8e705b5ed583c7d3877", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/375da499b4a9411d71e1d8e705b5ed583c7d3877", "committedDate": "2020-04-15T03:41:51Z", "message": "added Enable/Reset partition features"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91855d8148258b57368ec4fd94b28d53b000219c", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/91855d8148258b57368ec4fd94b28d53b000219c", "committedDate": "2020-04-15T03:54:19Z", "message": "format files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed3a0bd461ee757c13bdb8b22311d6b61ee5450c", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/ed3a0bd461ee757c13bdb8b22311d6b61ee5450c", "committedDate": "2020-04-15T18:05:48Z", "message": "support deleting admin configs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a6e58d7f58ab01cca6e8ef0c4ee22883ab8546a", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/2a6e58d7f58ab01cca6e8ef0c4ee22883ab8546a", "committedDate": "2020-04-15T21:33:54Z", "message": "fix argument validation failure"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1367, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}