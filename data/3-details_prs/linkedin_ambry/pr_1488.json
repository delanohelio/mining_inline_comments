{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5NjEzNjYw", "number": 1488, "title": "Updating replica status(sealed/stopped) in multiple clusters", "bodyText": "As an effort for migrating Ambry from one ZK cluster to another, storage manager\nshould update replica status in both clusters to make sure they are consistent.\nThis PR allows storage manager to take in a list of participants and generate\ncorresponding replica status delegates. BlobStore will update sealing/unsealing\nstate via these delegates.", "createdAt": "2020-04-27T16:36:30Z", "url": "https://github.com/linkedin/ambry/pull/1488", "merged": true, "mergeCommit": {"oid": "0781fb676300ca7fb9390ce13b983c8e86f007b2"}, "closed": true, "closedAt": "2020-05-07T16:13:19Z", "author": {"login": "jsjtzyy"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccif93gFqTQwMzEzNzI1MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcewYPkAH2gAyNDA5NjEzNjYwOjU0Y2Q3NzYzYmVlZTQ4MzJmYmI4NDgxOWVjZWMyODkwZTk5NjI5Mjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMTM3MjUx", "url": "https://github.com/linkedin/ambry/pull/1488#pullrequestreview-403137251", "createdAt": "2020-04-30T00:55:12Z", "commit": {"oid": "a45c344b87357206fd33df6969a9084912d9c180"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMDo1NToxMlrOGOWKTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwMTowNDowN1rOGOWUIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY5NjMzMg==", "bodyText": "minor: delegates (plural)", "url": "https://github.com/linkedin/ambry/pull/1488#discussion_r417696332", "createdAt": "2020-04-30T00:55:12Z", "author": {"login": "lightningrob"}, "path": "ambry-store/src/main/java/com/github/ambry/store/BlobStore.java", "diffHunk": "@@ -117,17 +117,17 @@\n    * @param factory the {@link StoreKeyFactory} for parsing store keys.\n    * @param recovery the {@link MessageStoreRecovery} instance to use.\n    * @param hardDelete the {@link MessageStoreHardDelete} instance to use.\n-   * @param replicaStatusDelegate delegate used to communicate BlobStore write status (sealed/unsealed, stopped/started)\n+   * @param replicaStatusDelegates delegate used to communicate BlobStore write status(sealed/unsealed, stopped/started)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a45c344b87357206fd33df6969a9084912d9c180"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY5ODg1MQ==", "bodyText": "Add javadoc explaining what the return vals are and that they can be null.", "url": "https://github.com/linkedin/ambry/pull/1488#discussion_r417698851", "createdAt": "2020-04-30T01:04:07Z", "author": {"login": "lightningrob"}, "path": "ambry-store/src/test/java/com/github/ambry/store/StorageManagerTest.java", "diffHunk": "@@ -1236,15 +1274,23 @@ private void generateConfigs(boolean segmentedLog, boolean updateInstanceConfig)\n   /**\n    * An extension of {@link HelixParticipant} to help with tests.\n    */\n-  private class MockClusterParticipant extends HelixParticipant {\n+  class MockClusterParticipant extends HelixParticipant {\n     Boolean updateNodeInfoReturnVal = null;\n     Set<ReplicaId> sealedReplicas = new HashSet<>();\n     Set<ReplicaId> stoppedReplicas = new HashSet<>();\n+    private Boolean setSealStateReturnVal;\n+    private Boolean setStopStateReturnVal;\n \n     MockClusterParticipant() throws IOException {\n+      this(null, null);\n+    }\n+\n+    MockClusterParticipant(Boolean setSealStateReturnVal, Boolean setStopStateReturnVal) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a45c344b87357206fd33df6969a9084912d9c180"}, "originalPosition": 174}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2e2cba272faabcb20e6a05bf7f08917e8b45be9", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/e2e2cba272faabcb20e6a05bf7f08917e8b45be9", "committedDate": "2020-04-30T16:35:06Z", "message": "adress comments"}, "afterCommit": {"oid": "f7d7ba704afcc5e915267888fb6fc005f5ba79b0", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/f7d7ba704afcc5e915267888fb6fc005f5ba79b0", "committedDate": "2020-05-05T21:24:55Z", "message": "rebase master and minor changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MDEwNDY2", "url": "https://github.com/linkedin/ambry/pull/1488#pullrequestreview-407010466", "createdAt": "2020-05-06T21:46:05Z", "commit": {"oid": "95949e8838c0be87fd01e576303e5b4bec0b185e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQyMTo0NjowNlrOGRmm2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQyMTo0NjowNlrOGRmm2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTExMTUxMw==", "bodyText": "javadoc needs to be changed here.", "url": "https://github.com/linkedin/ambry/pull/1488#discussion_r421111513", "createdAt": "2020-05-06T21:46:06Z", "author": {"login": "ankagrawal"}, "path": "ambry-store/src/main/java/com/github/ambry/store/BlobStore.java", "diffHunk": "@@ -941,8 +945,8 @@ public long getEndPositionOfLastPut() throws StoreException {\n   /**\n    * @return {@link ReplicaStatusDelegate} associated with this store\n    */\n-  public ReplicaStatusDelegate getReplicaStatusDelegate() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95949e8838c0be87fd01e576303e5b4bec0b185e"}, "originalPosition": 103}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "822dd8a870052e208d923728e1b23fbbb09ebf87", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/822dd8a870052e208d923728e1b23fbbb09ebf87", "committedDate": "2020-05-06T21:57:12Z", "message": "Updating replica status(sealed/stopped) in multiple clusters\n\nAs an effort for migrating Ambry from one ZK cluster to another, storage manager\nshould update replica status in both clusters to make sure they are consistent.\nThis PR allows storage manager to take in a list of participants and generate\ncorresponding replica status delegates. BlobStore will update sealing/unsealing\nstate via these delegates."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f501a207a3048dad1b274224e9c390d8ba761924", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/f501a207a3048dad1b274224e9c390d8ba761924", "committedDate": "2020-05-06T21:58:33Z", "message": "comment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95949e8838c0be87fd01e576303e5b4bec0b185e", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/95949e8838c0be87fd01e576303e5b4bec0b185e", "committedDate": "2020-05-05T22:33:33Z", "message": "fix test failure"}, "afterCommit": {"oid": "f501a207a3048dad1b274224e9c390d8ba761924", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/f501a207a3048dad1b274224e9c390d8ba761924", "committedDate": "2020-05-06T21:58:33Z", "message": "comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54cd7763beee4832fbb84819ecec2890e9962928", "author": {"user": {"login": "jsjtzyy", "name": "Yingyi Zhang"}}, "url": "https://github.com/linkedin/ambry/commit/54cd7763beee4832fbb84819ecec2890e9962928", "committedDate": "2020-05-06T22:25:44Z", "message": "fixed test failure"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1427, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}