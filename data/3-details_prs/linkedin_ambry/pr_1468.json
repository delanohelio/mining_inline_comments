{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNTgzOTk3", "number": 1468, "title": "Increase retention time to fix the hard deleter test failure", "bodyText": "This PR increases the retention day in the hard delete integration test to fix this failure:\ncom.github.ambry.server.ServerHardDeleteTest > endToEndTestHardDeletes FAILED\n1321    java.lang.AssertionError: expected:<Blob_Deleted_Permanently> but was:<No_Error>\n1322        at org.junit.Assert.fail(Assert.java:91)\n1323        at org.junit.Assert.failNotEquals(Assert.java:645)\n1324        at org.junit.Assert.assertEquals(Assert.java:126)\n1325        at org.junit.Assert.assertEquals(Assert.java:145)\n1326        at com.github.ambry.server.ServerHardDeleteTest.undeleteBlob(ServerHardDeleteTest.java:416)\n1327        at com.github.ambry.server.ServerHardDeleteTest.endToEndTestHardDeletes(ServerHardDeleteTest.java:349)\n\nThe problem is when we delete a blob in the test case, we undelete it later. There are some time gap between these two operations and somehow the time instance runs too far to surpass one day, which is the retention day for deleted blob. So when we undelete it, it's already too late.\nThis PR changes the retention day to 7 and hopefully this would fix this the failure.", "createdAt": "2020-04-09T18:42:05Z", "url": "https://github.com/linkedin/ambry/pull/1468", "merged": true, "mergeCommit": {"oid": "b3235979b871393655b29cbfb05cfccc1f4f7e11"}, "closed": true, "closedAt": "2020-04-09T20:24:10Z", "author": {"login": "justinlin-linkedin"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWA6-dAH2gAyNDAxNTgzOTk3OmQ2OWE1ZDU2OWZmNzhjYTVjY2Q5ZTM0N2RkOWFkZjdjMWM2YTI5NmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWBL4fAFqTM5MTA1MDQ3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d69a5d569ff78ca5ccd9e347dd9adf7c1c6a296b", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/d69a5d569ff78ca5ccd9e347dd9adf7c1c6a296b", "committedDate": "2020-04-09T18:36:50Z", "message": "Increase retention time to fix the hard deleter test failure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMDQzNDky", "url": "https://github.com/linkedin/ambry/pull/1468#pullrequestreview-391043492", "createdAt": "2020-04-09T18:44:52Z", "commit": {"oid": "d69a5d569ff78ca5ccd9e347dd9adf7c1c6a296b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODo0NDo1MlrOGDlAyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODo0NDo1MlrOGDlAyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwNTMyMw==", "bodyText": "good catch", "url": "https://github.com/linkedin/ambry/pull/1468#discussion_r406405323", "createdAt": "2020-04-09T18:44:52Z", "author": {"login": "jsjtzyy"}, "path": "ambry-store/src/main/java/com/github/ambry/store/IndexValue.java", "diffHunk": "@@ -437,7 +437,7 @@ ByteBuffer getBytes() {\n   public String toString() {\n     return \"Offset: \" + offset + \", Size: \" + getSize() + \", Deleted: \" + isDelete() + \", TTL Updated: \" + isTtlUpdate()\n         + \", Undelete: \" + isUndelete() + \", ExpiresAtMs: \" + getExpiresAtMs() + \", Original Message Offset: \"\n-        + getOriginalMessageOffset() + (formatVersion != PersistentIndex.VERSION_0 ? (\", OperationTimeAtSecs \"\n+        + getOriginalMessageOffset() + (formatVersion != PersistentIndex.VERSION_0 ? (\", OperationTimeInMs \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d69a5d569ff78ca5ccd9e347dd9adf7c1c6a296b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMDUwNDc4", "url": "https://github.com/linkedin/ambry/pull/1468#pullrequestreview-391050478", "createdAt": "2020-04-09T18:55:18Z", "commit": {"oid": "d69a5d569ff78ca5ccd9e347dd9adf7c1c6a296b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1378, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}