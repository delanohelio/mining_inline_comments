{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwNTkwNjM3", "number": 1401, "title": "Configurable timeouts for all cloud requests", "bodyText": "Turn off automatic Cosmos retries.", "createdAt": "2020-02-27T01:30:45Z", "url": "https://github.com/linkedin/ambry/pull/1401", "merged": true, "mergeCommit": {"oid": "7f13f3646c35f38c4231c1043cf778d2804b3ecd"}, "closed": true, "closedAt": "2020-03-05T03:53:41Z", "author": {"login": "lightningrob"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIPv-LgH2gAyMzgwNTkwNjM3OmFkOWNjNGZmYjcxY2E5NDE3MDlhZWY4NjZjNWViZjU1YWZlYmE4OGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKjTXIgFqTM2OTI4MDcyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ad9cc4ffb71ca941709aef866c5ebf55afeba88c", "author": {"user": {"login": "shipkit-org", "name": "shipkit.org automated bot"}}, "url": "https://github.com/linkedin/ambry/commit/ad9cc4ffb71ca941709aef866c5ebf55afeba88c", "committedDate": "2020-02-26T23:58:27Z", "message": "Configurable timeouts for all cloud requests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MzYxODQ0", "url": "https://github.com/linkedin/ambry/pull/1401#pullrequestreview-365361844", "createdAt": "2020-02-27T01:32:34Z", "commit": {"oid": "ad9cc4ffb71ca941709aef866c5ebf55afeba88c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwMTozMjozNFrOFvCaTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwMTozMjozNFrOFvCaTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDg2Njg5Mw==", "bodyText": "Increased timeout since integration test occasionally timed out on startup.", "url": "https://github.com/linkedin/ambry/pull/1401#discussion_r384866893", "createdAt": "2020-02-27T01:32:34Z", "author": {"login": "lightningrob"}, "path": "ambry-cloud/src/main/java/com.github.ambry.cloud/azure/AzureBlobDataAccessor.java", "diffHunk": "@@ -239,7 +226,7 @@ public boolean downloadFile(String containerName, String fileName, OutputStream\n   void testConnectivity() {\n     try {\n       // TODO: Turn on verbose logging during this call (how to do in v12?)\n-      storageClient.getBlobContainerClient(\"partition-0\").existsWithResponse(Duration.ofSeconds(1), Context.NONE);\n+      storageClient.getBlobContainerClient(\"partition-0\").existsWithResponse(Duration.ofSeconds(5), Context.NONE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad9cc4ffb71ca941709aef866c5ebf55afeba88c"}, "originalPosition": 117}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bf52afabe7a9400368fab3b8610281acf09d7dd", "author": {"user": {"login": "shipkit-org", "name": "shipkit.org automated bot"}}, "url": "https://github.com/linkedin/ambry/commit/2bf52afabe7a9400368fab3b8610281acf09d7dd", "committedDate": "2020-02-27T02:01:50Z", "message": "Fix test mocks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea6e2a96d549a15aeeb12144b7836fad672b398f", "author": {"user": {"login": "shipkit-org", "name": "shipkit.org automated bot"}}, "url": "https://github.com/linkedin/ambry/commit/ea6e2a96d549a15aeeb12144b7836fad672b398f", "committedDate": "2020-02-27T04:08:24Z", "message": "Another test fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d75805a541371cb1bdf695e1fec3da5c5ad2ef3", "author": {"user": {"login": "shipkit-org", "name": "shipkit.org automated bot"}}, "url": "https://github.com/linkedin/ambry/commit/4d75805a541371cb1bdf695e1fec3da5c5ad2ef3", "committedDate": "2020-02-27T06:23:44Z", "message": "Merge branch 'master' of github.com:linkedin/ambry into cloud-request-timeouts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDExMDU5", "url": "https://github.com/linkedin/ambry/pull/1401#pullrequestreview-367411059", "createdAt": "2020-03-02T18:06:10Z", "commit": {"oid": "4d75805a541371cb1bdf695e1fec3da5c5ad2ef3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODowNjoxMVrOFwpnZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODowNjoxMVrOFwpnZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU1Nzc5Ng==", "bodyText": "Seems everything here needs to be public static final int.", "url": "https://github.com/linkedin/ambry/pull/1401#discussion_r386557796", "createdAt": "2020-03-02T18:06:11Z", "author": {"login": "xuhao417347761"}, "path": "ambry-api/src/main/java/com.github.ambry/config/CloudConfig.java", "diffHunk": "@@ -59,7 +61,9 @@\n   public static final int DEFAULT_RECENT_BLOB_CACHE_LIMIT = 10000;\n   public static final int DEFAULT_MAX_ATTEMPTS = 3;\n   public static final long DEFAULT_RETRY_DELAY_VALUE = 50;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d75805a541371cb1bdf695e1fec3da5c5ad2ef3"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDExNDI4", "url": "https://github.com/linkedin/ambry/pull/1401#pullrequestreview-367411428", "createdAt": "2020-03-02T18:06:46Z", "commit": {"oid": "4d75805a541371cb1bdf695e1fec3da5c5ad2ef3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODowNjo0NlrOFwpooA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODowNjo0NlrOFwpooA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU1ODExMg==", "bodyText": "Same as above.", "url": "https://github.com/linkedin/ambry/pull/1401#discussion_r386558112", "createdAt": "2020-03-02T18:06:46Z", "author": {"login": "xuhao417347761"}, "path": "ambry-api/src/main/java/com.github.ambry/config/CloudConfig.java", "diffHunk": "@@ -217,8 +221,23 @@\n   @Config(CLOUD_DEFAULT_RETRY_DELAY)\n   public final long cloudDefaultRetryDelay;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d75805a541371cb1bdf695e1fec3da5c5ad2ef3"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDg0MjUz", "url": "https://github.com/linkedin/ambry/pull/1401#pullrequestreview-367484253", "createdAt": "2020-03-02T19:56:28Z", "commit": {"oid": "4d75805a541371cb1bdf695e1fec3da5c5ad2ef3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxOTo1NjoyOFrOFwtMCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxOTo1NjoyOFrOFwtMCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYxNjMzMA==", "bodyText": "Note here is a little confused. Please add more context.", "url": "https://github.com/linkedin/ambry/pull/1401#discussion_r386616330", "createdAt": "2020-03-02T19:56:28Z", "author": {"login": "zzmao"}, "path": "ambry-cloud/src/main/java/com.github.ambry.cloud/azure/AzureBlobDataAccessor.java", "diffHunk": "@@ -93,12 +95,15 @@\n       logger.info(\"Using proxy: {}:{}\", cloudConfig.vcrProxyHost, cloudConfig.vcrProxyPort);\n     }\n     HttpClient client = new NettyAsyncHttpClientBuilder().proxy(proxyOptions).build();\n+    requestTimeout = Duration.ofMillis(cloudConfig.cloudRequestTimeout);\n+    uploadTimeout = Duration.ofMillis(cloudConfig.cloudUploadRequestTimeout);\n+    batchTimeout = Duration.ofMillis(cloudConfig.cloudBatchRequestTimeout);\n \n-    // TODO: may want to set different retry options depending on live serving or replication mode\n-    RequestRetryOptions requestRetryOptions = new RequestRetryOptions();\n+    // Note: retry decisions are made at CloudBlobStore level, not here.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d75805a541371cb1bdf695e1fec3da5c5ad2ef3"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDg0MzQ0", "url": "https://github.com/linkedin/ambry/pull/1401#pullrequestreview-367484344", "createdAt": "2020-03-02T19:56:36Z", "commit": {"oid": "4d75805a541371cb1bdf695e1fec3da5c5ad2ef3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad00d73742509d3d98dece6e6da0595d3f818cda", "author": {"user": {"login": "shipkit-org", "name": "shipkit.org automated bot"}}, "url": "https://github.com/linkedin/ambry/commit/ad00d73742509d3d98dece6e6da0595d3f818cda", "committedDate": "2020-03-03T02:03:19Z", "message": "Address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MjgwNzI3", "url": "https://github.com/linkedin/ambry/pull/1401#pullrequestreview-369280727", "createdAt": "2020-03-05T03:53:09Z", "commit": {"oid": "ad00d73742509d3d98dece6e6da0595d3f818cda"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1645, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}