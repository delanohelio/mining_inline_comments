{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwNzEwMDUx", "number": 1354, "title": "Dont return bytes on simple blob when getChunkIdsOnly is true", "bodyText": "This would fixes a bytebuf leaking issue. When getChunkIdsOnly is true, if the blob is a simple blob, we should just return the id, not the data.", "createdAt": "2020-01-09T00:06:08Z", "url": "https://github.com/linkedin/ambry/pull/1354", "merged": true, "mergeCommit": {"oid": "1fd301eb9636b0174da66b81b468a25bb48d4b86"}, "closed": true, "closedAt": "2020-01-09T01:40:16Z", "author": {"login": "justinlin-linkedin"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4eePKAH2gAyMzYwNzEwMDUxOmRmNmYyZjI2OTIxZjEwMzFkOTIxYTQyYTRhMzg0ZDVkMDI5NGRmZTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4f1JqAFqTM0MDI0Nzg4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "df6f2f26921f1031d921a42a4a384d5d0294dfe8", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/df6f2f26921f1031d921a42a4a384d5d0294dfe8", "committedDate": "2020-01-09T00:04:52Z", "message": "Dont return bytes on simple blob when getChunkIdsOnly is true"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10848315d47b9defb03096863b46cd964df891cb", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/10848315d47b9defb03096863b46cd964df891cb", "committedDate": "2020-01-09T00:50:57Z", "message": "Add test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMjM5OTYy", "url": "https://github.com/linkedin/ambry/pull/1354#pullrequestreview-340239962", "createdAt": "2020-01-09T01:08:06Z", "commit": {"oid": "10848315d47b9defb03096863b46cd964df891cb"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwMTowODowNlrOFbodyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQwMTowODowNlrOFbodyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDUxODg1OQ==", "bodyText": "Thanks for adding this test. Is there a test case getChunkIdsOnly with composite blobs anywhere? If not, it may be worth adding", "url": "https://github.com/linkedin/ambry/pull/1354#discussion_r364518859", "createdAt": "2020-01-09T01:08:06Z", "author": {"login": "cgtz"}, "path": "ambry-router/src/test/java/com.github.ambry.router/GetBlobOperationTest.java", "diffHunk": "@@ -363,6 +363,19 @@ public void testSimpleBlobRawMode() throws Exception {\n     }\n   }\n \n+  /**\n+   * Test gets of simple blob with getChunkIdsOnly being true.\n+   */\n+  @Test\n+  public void testSimpleBlobGetChunkIdsOnly() throws Exception {\n+    blobSize = maxChunkSize;\n+    doPut();\n+    options =\n+        new GetBlobOptionsInternal(new GetBlobOptionsBuilder().operationType(GetBlobOptions.OperationType.All).build(),\n+            true, routerMetrics.ageAtGet);\n+    getAndAssertSuccess();\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10848315d47b9defb03096863b46cd964df891cb"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07b05cf15fe6eba5c4787739b52c1540c8a9fe5d", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/07b05cf15fe6eba5c4787739b52c1540c8a9fe5d", "committedDate": "2020-01-09T01:12:11Z", "message": "Add more tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMjQ3ODgy", "url": "https://github.com/linkedin/ambry/pull/1354#pullrequestreview-340247882", "createdAt": "2020-01-09T01:39:48Z", "commit": {"oid": "07b05cf15fe6eba5c4787739b52c1540c8a9fe5d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1541, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}