{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNTE1MjYw", "number": 1466, "title": "Treat 'SSLEngine closed already' as a client termination exception.", "bodyText": "When clients close the connection from their side, the router may\nstill be delivering data. When using SSL, the write call in\nNettyResponseChannel may encounter an exception indicating the SSLEngine\nhas already been closed, which can happen when the connection is in the\nprocess of being closed.\nThis change treats such exceptions as client-side connection\nterminations so they will not be logged so verbosely. See\nNettyResponseChannel::log for how Utils::isPossibleClientTermination\nis used.", "createdAt": "2020-04-09T16:12:42Z", "url": "https://github.com/linkedin/ambry/pull/1466", "merged": true, "mergeCommit": {"oid": "37fdb5574c7892152c22a107d97090492cab92ab"}, "closed": true, "closedAt": "2020-04-10T18:32:07Z", "author": {"login": "cgtz"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcV-2ougH2gAyNDAxNTE1MjYwOjRlMTYxMGNlYjM1OTdmZDM5OGNkNmZkYmQ2ZGIzOGNkMWEyMTJjODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWAZb-AFqTM5MTAxMzA5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e1610ceb3597fd398cd6fdbd6db38cd1a212c80", "author": {"user": {"login": "cgtz", "name": "Casey Getz"}}, "url": "https://github.com/linkedin/ambry/commit/4e1610ceb3597fd398cd6fdbd6db38cd1a212c80", "committedDate": "2020-04-09T16:12:17Z", "message": "Treat 'SSLEngine closed already' as a client termination exception.\n\nWhen clients close the connection from their side, the router may\nstill be delivering data. When using SSL, the write call in\nNettyResponseChannel may encounter an exception indicating the SSLEngine\nhas already been closed, which can happen when the connection is in the\nprocess of being closed.\n\nThis change treats such exceptions as client-side connection\nterminations so they will not be logged so verbosely. See\nNettyResponseChannel::log for how Utils::isPossibleClientTermination\nis used."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTQzMDQ1", "url": "https://github.com/linkedin/ambry/pull/1466#pullrequestreview-390943045", "createdAt": "2020-04-09T16:22:06Z", "commit": {"oid": "4e1610ceb3597fd398cd6fdbd6db38cd1a212c80"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTg3Njg0", "url": "https://github.com/linkedin/ambry/pull/1466#pullrequestreview-390987684", "createdAt": "2020-04-09T17:23:39Z", "commit": {"oid": "4e1610ceb3597fd398cd6fdbd6db38cd1a212c80"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyMzo0MFrOGDiMfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNzoyMzo0MFrOGDiMfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM1OTE2NA==", "bodyText": "Actually SSLException is an IOException, so we don't have to do this if-else statement.", "url": "https://github.com/linkedin/ambry/pull/1466#discussion_r406359164", "createdAt": "2020-04-09T17:23:40Z", "author": {"login": "justinlin-linkedin"}, "path": "ambry-utils/src/main/java/com/github/ambry/utils/Utils.java", "diffHunk": "@@ -1026,8 +1030,14 @@ public static void shutDownExecutorService(ExecutorService executorService, long\n    * @return {@code true} this cause indicates a possible early termination from the client. {@code false} otherwise.\n    */\n   public static boolean isPossibleClientTermination(Throwable cause) {\n-    return cause instanceof IOException && (CLIENT_RESET_EXCEPTION_MSG.equals(cause.getMessage())\n-        || CLIENT_BROKEN_PIPE_EXCEPTION_MSG.equals(cause.getMessage()));\n+    if (cause instanceof SSLException) {\n+      return SSL_ENGINE_CLOSED_EXCEPTION_MSG.equals(cause.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e1610ceb3597fd398cd6fdbd6db38cd1a212c80"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0103810e6bb535ae45f269e8df1ff37b2a62e1e", "author": {"user": {"login": "cgtz", "name": "Casey Getz"}}, "url": "https://github.com/linkedin/ambry/commit/c0103810e6bb535ae45f269e8df1ff37b2a62e1e", "committedDate": "2020-04-09T17:32:34Z", "message": "Simplify method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMDEzMDkz", "url": "https://github.com/linkedin/ambry/pull/1466#pullrequestreview-391013093", "createdAt": "2020-04-09T18:00:12Z", "commit": {"oid": "c0103810e6bb535ae45f269e8df1ff37b2a62e1e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1371, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}