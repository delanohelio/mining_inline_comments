{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0OTM4MjMx", "number": 1565, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0MzowNFrOEFwv9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0MzozM1rOEFwwRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NDc3MDQ1OnYy", "diffSide": "RIGHT", "path": "ambry-clustermap/src/main/java/com/github/ambry/clustermap/DynamicClusterChangeHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0MzowNFrOGkJR9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0MzowNFrOGkJR9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1Mzk3Mg==", "bodyText": "This change comes from formatting file. No logic change.", "url": "https://github.com/linkedin/ambry/pull/1565#discussion_r440553972", "createdAt": "2020-06-16T02:43:04Z", "author": {"login": "jsjtzyy"}, "path": "ambry-clustermap/src/main/java/com/github/ambry/clustermap/DynamicClusterChangeHandler.java", "diffHunk": "@@ -356,8 +358,8 @@ private void addOrUpdateInstanceInfos(Iterable<DataNodeConfig> dataNodeConfigs)\n               new AmbryPartition(Long.parseLong(partitionName), replicaConfig.getPartitionClass(),\n                   helixClusterManagerCallback);\n           // Ensure only one AmbryPartition instance exists for specific partition.\n-          mappedPartition =\n-              clusterChangeHandlerCallback.addPartitionIfAbsent(mappedPartition, replicaConfig.getReplicaCapacityInBytes());\n+          mappedPartition = clusterChangeHandlerCallback.addPartitionIfAbsent(mappedPartition,\n+              replicaConfig.getReplicaCapacityInBytes());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "615245290a52a054c878e176a15e0660e6b88223"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NDc3MDc4OnYy", "diffSide": "RIGHT", "path": "ambry-clustermap/src/main/java/com/github/ambry/clustermap/DynamicClusterChangeHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0MzoxOVrOGkJSKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0MzoxOVrOGkJSKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1NDAyNg==", "bodyText": "same here", "url": "https://github.com/linkedin/ambry/pull/1565#discussion_r440554026", "createdAt": "2020-06-16T02:43:19Z", "author": {"login": "jsjtzyy"}, "path": "ambry-clustermap/src/main/java/com/github/ambry/clustermap/DynamicClusterChangeHandler.java", "diffHunk": "@@ -472,8 +474,8 @@ private void updateReplicaStateAndOverrideIfNeeded(AmbryReplica replica, Collect\n       DataNodeConfig.DiskConfig diskConfig = diskEntry.getValue();\n \n       // Create disk\n-      AmbryDisk disk =\n-          new AmbryDisk(clusterMapConfig, datanode, mountPath, diskConfig.getState(), diskConfig.getDiskCapacityInBytes());\n+      AmbryDisk disk = new AmbryDisk(clusterMapConfig, datanode, mountPath, diskConfig.getState(),\n+          diskConfig.getDiskCapacityInBytes());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "615245290a52a054c878e176a15e0660e6b88223"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NDc3MTI3OnYy", "diffSide": "RIGHT", "path": "ambry-clustermap/src/main/java/com/github/ambry/clustermap/DynamicClusterChangeHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0MzozM1rOGkJSag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMjo0MzozM1rOGkJSag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1NDA5MA==", "bodyText": "same here, no production code change", "url": "https://github.com/linkedin/ambry/pull/1565#discussion_r440554090", "createdAt": "2020-06-16T02:43:33Z", "author": {"login": "jsjtzyy"}, "path": "ambry-clustermap/src/main/java/com/github/ambry/clustermap/DynamicClusterChangeHandler.java", "diffHunk": "@@ -485,9 +487,10 @@ private void updateReplicaStateAndOverrideIfNeeded(AmbryReplica replica, Collect\n             new AmbryPartition(Long.parseLong(partitionName), replicaConfig.getPartitionClass(),\n                 helixClusterManagerCallback);\n         // Ensure only one AmbryPartition instance exists for specific partition.\n-        mappedPartition =\n-            clusterChangeHandlerCallback.addPartitionIfAbsent(mappedPartition, replicaConfig.getReplicaCapacityInBytes());\n-        ensurePartitionAbsenceOnNodeAndValidateCapacity(mappedPartition, datanode, replicaConfig.getReplicaCapacityInBytes());\n+        mappedPartition = clusterChangeHandlerCallback.addPartitionIfAbsent(mappedPartition,\n+            replicaConfig.getReplicaCapacityInBytes());\n+        ensurePartitionAbsenceOnNodeAndValidateCapacity(mappedPartition, datanode,\n+            replicaConfig.getReplicaCapacityInBytes());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "615245290a52a054c878e176a15e0660e6b88223"}, "originalPosition": 54}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1278, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}