{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1Njg1Nzky", "number": 1625, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDoyODo1N1rOEjKrjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo1OTowOFrOEjtRiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzEwNjA3OnYy", "diffSide": "RIGHT", "path": "ambry-messageformat/src/main/java/com/github/ambry/messageformat/MessageFormatSend.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDoyODo1N1rOHRXvGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjo1MzozOFrOHReL1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk3NjczMA==", "bodyText": "we could rename this method to fetchDataFromDisk, since that is its primary job now.", "url": "https://github.com/linkedin/ambry/pull/1625#discussion_r487976730", "createdAt": "2020-09-14T14:28:57Z", "author": {"login": "cgtz"}, "path": "ambry-messageformat/src/main/java/com/github/ambry/messageformat/MessageFormatSend.java", "diffHunk": "@@ -104,9 +104,8 @@ public MessageFormatSend(MessageReadSet readSet, MessageFormatFlags flag, Messag\n   /**\n    * Calculates the offsets from the MessageReadSet that needs to be sent over the network\n    * based on the type of data requested as indicated by the flags\n-   * @param enableDataPrefetch do data prefetch if this is true.\n    */\n-  private void calculateOffsets(boolean enableDataPrefetch) throws IOException, MessageFormatException {\n+  private void calculateOffsets() throws IOException, MessageFormatException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b62456e96fd5cb6f9b774941ac2210a74d8ea32"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA4MjM5MA==", "bodyText": "+1", "url": "https://github.com/linkedin/ambry/pull/1625#discussion_r488082390", "createdAt": "2020-09-14T16:53:38Z", "author": {"login": "zzmao"}, "path": "ambry-messageformat/src/main/java/com/github/ambry/messageformat/MessageFormatSend.java", "diffHunk": "@@ -104,9 +104,8 @@ public MessageFormatSend(MessageReadSet readSet, MessageFormatFlags flag, Messag\n   /**\n    * Calculates the offsets from the MessageReadSet that needs to be sent over the network\n    * based on the type of data requested as indicated by the flags\n-   * @param enableDataPrefetch do data prefetch if this is true.\n    */\n-  private void calculateOffsets(boolean enableDataPrefetch) throws IOException, MessageFormatException {\n+  private void calculateOffsets() throws IOException, MessageFormatException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk3NjczMA=="}, "originalCommit": {"oid": "5b62456e96fd5cb6f9b774941ac2210a74d8ea32"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1ODc3Mzg3OnYy", "diffSide": "RIGHT", "path": "ambry-messageformat/src/main/java/com/github/ambry/messageformat/MessageFormatSend.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo1OTowOFrOHSNs4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo1OTowOFrOHSNs4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg2MDg5OA==", "bodyText": "nit: add a space in networkbased", "url": "https://github.com/linkedin/ambry/pull/1625#discussion_r488860898", "createdAt": "2020-09-15T17:59:08Z", "author": {"login": "cgtz"}, "path": "ambry-messageformat/src/main/java/com/github/ambry/messageformat/MessageFormatSend.java", "diffHunk": "@@ -88,25 +88,24 @@ public long sizetoSend() {\n   }\n \n   public MessageFormatSend(MessageReadSet readSet, MessageFormatFlags flag, MessageFormatMetrics metrics,\n-      StoreKeyFactory storeKeyFactory, boolean enableDataPrefetch) throws IOException, MessageFormatException {\n+      StoreKeyFactory storeKeyFactory) throws IOException, MessageFormatException {\n     this.readSet = readSet;\n     this.flag = flag;\n     this.storeKeyFactory = storeKeyFactory;\n     totalSizeToWrite = 0;\n     long startTime = SystemTime.getInstance().milliseconds();\n-    calculateOffsets(enableDataPrefetch);\n+    fetchDataFromReadSet();\n     metrics.calculateOffsetMessageFormatSendTime.update(SystemTime.getInstance().milliseconds() - startTime);\n     sizeWritten = 0;\n     currentWriteIndex = 0;\n     sizeWrittenFromCurrentIndex = 0;\n   }\n \n   /**\n-   * Calculates the offsets from the MessageReadSet that needs to be sent over the network\n-   * based on the type of data requested as indicated by the flags\n-   * @param enableDataPrefetch do data prefetch if this is true.\n+   * Fetch data from the MessageReadSet that needs to be sent over the networkbased on the type of data requested as", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c423403a20ff0e9a78a85ade68adb814b63d46a"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1376, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}