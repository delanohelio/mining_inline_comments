{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1Njg1Nzky", "number": 1625, "title": "Remove prefetch configuration", "bodyText": "This PR removes serverEnableStoreDataPrefetch configuration, and set it to true by default.", "createdAt": "2020-09-12T03:03:28Z", "url": "https://github.com/linkedin/ambry/pull/1625", "merged": true, "mergeCommit": {"oid": "740e0673a07f19a9647593e6f8f3e52b53075f9d"}, "closed": true, "closedAt": "2020-09-15T18:08:47Z", "author": {"login": "justinlin-linkedin"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdI0FNbgFqTQ4NzgyOTI1Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJLzE_AFqTQ4ODkzODA5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3ODI5MjUy", "url": "https://github.com/linkedin/ambry/pull/1625#pullrequestreview-487829252", "createdAt": "2020-09-14T14:28:57Z", "commit": {"oid": "5b62456e96fd5cb6f9b774941ac2210a74d8ea32"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDoyODo1N1rOHRXvGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNDoyODo1N1rOHRXvGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk3NjczMA==", "bodyText": "we could rename this method to fetchDataFromDisk, since that is its primary job now.", "url": "https://github.com/linkedin/ambry/pull/1625#discussion_r487976730", "createdAt": "2020-09-14T14:28:57Z", "author": {"login": "cgtz"}, "path": "ambry-messageformat/src/main/java/com/github/ambry/messageformat/MessageFormatSend.java", "diffHunk": "@@ -104,9 +104,8 @@ public MessageFormatSend(MessageReadSet readSet, MessageFormatFlags flag, Messag\n   /**\n    * Calculates the offsets from the MessageReadSet that needs to be sent over the network\n    * based on the type of data requested as indicated by the flags\n-   * @param enableDataPrefetch do data prefetch if this is true.\n    */\n-  private void calculateOffsets(boolean enableDataPrefetch) throws IOException, MessageFormatException {\n+  private void calculateOffsets() throws IOException, MessageFormatException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b62456e96fd5cb6f9b774941ac2210a74d8ea32"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b62456e96fd5cb6f9b774941ac2210a74d8ea32", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/5b62456e96fd5cb6f9b774941ac2210a74d8ea32", "committedDate": "2020-09-12T03:02:42Z", "message": "Remove prefetch configuration"}, "afterCommit": {"oid": "681b8c41cfe8ed72e1cc3861b8bb7338c7a0efea", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/681b8c41cfe8ed72e1cc3861b8bb7338c7a0efea", "committedDate": "2020-09-14T19:08:20Z", "message": "Address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "beb82874ab3a18c0c300b92d664d6254fd3b0a2e", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/beb82874ab3a18c0c300b92d664d6254fd3b0a2e", "committedDate": "2020-09-14T20:34:10Z", "message": "Remove prefetch configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c423403a20ff0e9a78a85ade68adb814b63d46a", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/7c423403a20ff0e9a78a85ade68adb814b63d46a", "committedDate": "2020-09-14T20:34:10Z", "message": "Address comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "681b8c41cfe8ed72e1cc3861b8bb7338c7a0efea", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/681b8c41cfe8ed72e1cc3861b8bb7338c7a0efea", "committedDate": "2020-09-14T19:08:20Z", "message": "Address comments"}, "afterCommit": {"oid": "7c423403a20ff0e9a78a85ade68adb814b63d46a", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/7c423403a20ff0e9a78a85ade68adb814b63d46a", "committedDate": "2020-09-14T20:34:10Z", "message": "Address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTMyMjAw", "url": "https://github.com/linkedin/ambry/pull/1625#pullrequestreview-488932200", "createdAt": "2020-09-15T17:59:08Z", "commit": {"oid": "7c423403a20ff0e9a78a85ade68adb814b63d46a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo1OTowOFrOHSNs4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo1OTowOFrOHSNs4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg2MDg5OA==", "bodyText": "nit: add a space in networkbased", "url": "https://github.com/linkedin/ambry/pull/1625#discussion_r488860898", "createdAt": "2020-09-15T17:59:08Z", "author": {"login": "cgtz"}, "path": "ambry-messageformat/src/main/java/com/github/ambry/messageformat/MessageFormatSend.java", "diffHunk": "@@ -88,25 +88,24 @@ public long sizetoSend() {\n   }\n \n   public MessageFormatSend(MessageReadSet readSet, MessageFormatFlags flag, MessageFormatMetrics metrics,\n-      StoreKeyFactory storeKeyFactory, boolean enableDataPrefetch) throws IOException, MessageFormatException {\n+      StoreKeyFactory storeKeyFactory) throws IOException, MessageFormatException {\n     this.readSet = readSet;\n     this.flag = flag;\n     this.storeKeyFactory = storeKeyFactory;\n     totalSizeToWrite = 0;\n     long startTime = SystemTime.getInstance().milliseconds();\n-    calculateOffsets(enableDataPrefetch);\n+    fetchDataFromReadSet();\n     metrics.calculateOffsetMessageFormatSendTime.update(SystemTime.getInstance().milliseconds() - startTime);\n     sizeWritten = 0;\n     currentWriteIndex = 0;\n     sizeWrittenFromCurrentIndex = 0;\n   }\n \n   /**\n-   * Calculates the offsets from the MessageReadSet that needs to be sent over the network\n-   * based on the type of data requested as indicated by the flags\n-   * @param enableDataPrefetch do data prefetch if this is true.\n+   * Fetch data from the MessageReadSet that needs to be sent over the networkbased on the type of data requested as", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c423403a20ff0e9a78a85ade68adb814b63d46a"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTMyNDY0", "url": "https://github.com/linkedin/ambry/pull/1625#pullrequestreview-488932464", "createdAt": "2020-09-15T17:59:27Z", "commit": {"oid": "7c423403a20ff0e9a78a85ade68adb814b63d46a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTM4MDk5", "url": "https://github.com/linkedin/ambry/pull/1625#pullrequestreview-488938099", "createdAt": "2020-09-15T18:07:19Z", "commit": {"oid": "7c423403a20ff0e9a78a85ade68adb814b63d46a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1253, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}