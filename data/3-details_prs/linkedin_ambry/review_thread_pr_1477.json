{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0ODU2NTY1", "number": 1477, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMDo1NTo1MlrOD25JIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMDo1NTo1MlrOD25JIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODg1OTIzOnYy", "diffSide": "RIGHT", "path": "ambry-tools/src/main/java/com/github/ambry/clustermap/HelixVcrPopulateTool.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMDo1NTo1MlrOGM3TNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwMDoxMDoxMFrOGM84oA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE0MjEzMg==", "bodyText": "I am a little confused about this comment because I see resource ideal state is updated in the following lines.", "url": "https://github.com/linkedin/ambry/pull/1477#discussion_r416142132", "createdAt": "2020-04-27T20:55:52Z", "author": {"login": "jsjtzyy"}, "path": "ambry-tools/src/main/java/com/github/ambry/clustermap/HelixVcrPopulateTool.java", "diffHunk": "@@ -92,11 +101,26 @@ public static void main(String[] args) {\n     }\n \n     if (options.has(updateClusterOpt)) {\n-      String srcZkString = options.valueOf(srcOpt).split(SEPARATOR)[0];\n-      String srcClusterName = options.valueOf(srcOpt).split(SEPARATOR)[1];\n-      System.out.println(\"Updating cluster: \" + destClusterName + \"by checking \" + srcClusterName);\n       boolean dryRun = options.has(dryRunOpt);\n-      updateResourceAndPartition(srcZkString, srcClusterName, destZkString, destClusterName, dryRun);\n+      if (options.has(srcOpt)) {\n+        String[] srcZkAndCluster = options.valueOf(srcOpt).split(SEPARATOR);\n+        if (srcZkAndCluster.length != 2) {\n+          errorAndExit(\"src argument must have form 'zkString/clusterName'\");\n+        }\n+        String srcZkString = srcZkAndCluster[0];\n+        String srcClusterName = srcZkAndCluster[1];\n+        System.out.println(\"Updating cluster: \" + destClusterName + \"by checking \" + srcClusterName);\n+        updateResourceAndPartition(srcZkString, srcClusterName, destZkString, destClusterName, dryRun);\n+      } else {\n+        // Just update cluster config, not resources", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da58f46dc91128eaa56d6b3884454ad59e27e959"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjIzMzYzMg==", "bodyText": "Yeah, I meant the resources would not be updated with any new partitions, though their idealstate is still updated.  I removed the comment, it's not needed.", "url": "https://github.com/linkedin/ambry/pull/1477#discussion_r416233632", "createdAt": "2020-04-28T00:10:10Z", "author": {"login": "lightningrob"}, "path": "ambry-tools/src/main/java/com/github/ambry/clustermap/HelixVcrPopulateTool.java", "diffHunk": "@@ -92,11 +101,26 @@ public static void main(String[] args) {\n     }\n \n     if (options.has(updateClusterOpt)) {\n-      String srcZkString = options.valueOf(srcOpt).split(SEPARATOR)[0];\n-      String srcClusterName = options.valueOf(srcOpt).split(SEPARATOR)[1];\n-      System.out.println(\"Updating cluster: \" + destClusterName + \"by checking \" + srcClusterName);\n       boolean dryRun = options.has(dryRunOpt);\n-      updateResourceAndPartition(srcZkString, srcClusterName, destZkString, destClusterName, dryRun);\n+      if (options.has(srcOpt)) {\n+        String[] srcZkAndCluster = options.valueOf(srcOpt).split(SEPARATOR);\n+        if (srcZkAndCluster.length != 2) {\n+          errorAndExit(\"src argument must have form 'zkString/clusterName'\");\n+        }\n+        String srcZkString = srcZkAndCluster[0];\n+        String srcClusterName = srcZkAndCluster[1];\n+        System.out.println(\"Updating cluster: \" + destClusterName + \"by checking \" + srcClusterName);\n+        updateResourceAndPartition(srcZkString, srcClusterName, destZkString, destClusterName, dryRun);\n+      } else {\n+        // Just update cluster config, not resources", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE0MjEzMg=="}, "originalCommit": {"oid": "da58f46dc91128eaa56d6b3884454ad59e27e959"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1505, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}