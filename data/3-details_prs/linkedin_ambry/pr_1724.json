{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NDIwOTk3", "number": 1724, "title": "[StorageQuota] Fix a string manipulation bug in HostnameHelper and backup file mismatch", "bodyText": "Fix a string manipulation bug in hostname and add more logs.", "createdAt": "2020-12-09T19:43:48Z", "url": "https://github.com/linkedin/ambry/pull/1724", "merged": true, "mergeCommit": {"oid": "36edb944b3706ea4586af80be3b374bff952309a"}, "closed": true, "closedAt": "2020-12-11T19:11:02Z", "author": {"login": "justinlin-linkedin"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk57c1AH2gAyNTM1NDIwOTk3OjQ3YzMxYzMzNTg3NjRmYmQzMTc3NThkYTBlOTJiNjVjZjg3OGQyZTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlM2W4AFqTU1MDUwNjA0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "47c31c3358764fbd317758da0e92b65cf878d2e4", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/47c31c3358764fbd317758da0e92b65cf878d2e4", "committedDate": "2020-12-10T21:08:02Z", "message": "[StorageQuota] Fix a string manipulation bug in HostnameHelper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d036c586e7ec4ce4e92ceec1f1b014869ecde62", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/5d036c586e7ec4ce4e92ceec1f1b014869ecde62", "committedDate": "2020-12-11T00:58:56Z", "message": "Fix backup error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "353aadad2724dd9161258f1410100c4a1f6b57ef", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/353aadad2724dd9161258f1410100c4a1f6b57ef", "committedDate": "2020-12-09T19:41:16Z", "message": "[StorageQuota] Fix a string manipulation bug in HostnameHelper"}, "afterCommit": {"oid": "5d036c586e7ec4ce4e92ceec1f1b014869ecde62", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/5d036c586e7ec4ce4e92ceec1f1b014869ecde62", "committedDate": "2020-12-11T00:58:56Z", "message": "Fix backup error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMzQ0MzIz", "url": "https://github.com/linkedin/ambry/pull/1724#pullrequestreview-550344323", "createdAt": "2020-12-11T17:35:54Z", "commit": {"oid": "5d036c586e7ec4ce4e92ceec1f1b014869ecde62"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzozNTo1NFrOIEC7IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNzozNTo1NFrOIEC7IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTExMzEyMQ==", "bodyText": "minor: I would suggest this:\nif (domainName != null) {\n   domainName = domainName.trim();\n   if (!domainName.isEmpty() && domainName.charAt(0) != '.') {\n     ...\n   }\n    ...\n}", "url": "https://github.com/linkedin/ambry/pull/1724#discussion_r541113121", "createdAt": "2020-12-11T17:35:54Z", "author": {"login": "jsjtzyy"}, "path": "ambry-server/src/main/java/com/github/ambry/server/mysql/HostnameHelper.java", "diffHunk": "@@ -42,10 +48,12 @@ public HostnameHelper(AccountStatsMySqlConfig config, int port) {\n    */\n   public String simplifyHostname(String hostname) {\n     for (String domainName : domainNamesToRemove) {\n-      if (domainName.charAt(0) != '.') {\n-        domainName = \".\" + domainName;\n+      if (domainName != null && !domainName.isEmpty()) {\n+        if (domainName.charAt(0) != '.') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d036c586e7ec4ce4e92ceec1f1b014869ecde62"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f94041e52439d74d8f0f4b2986b9046e8bb1baed", "author": {"user": {"login": "justinlin-linkedin", "name": "Justin Lin"}}, "url": "https://github.com/linkedin/ambry/commit/f94041e52439d74d8f0f4b2986b9046e8bb1baed", "committedDate": "2020-12-11T18:09:19Z", "message": "Comments and add tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNTA2MDQ0", "url": "https://github.com/linkedin/ambry/pull/1724#pullrequestreview-550506044", "createdAt": "2020-12-11T19:10:40Z", "commit": {"oid": "f94041e52439d74d8f0f4b2986b9046e8bb1baed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1048, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}