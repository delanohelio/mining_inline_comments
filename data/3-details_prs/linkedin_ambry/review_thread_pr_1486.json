{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NjUwNDY2", "number": 1486, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxOTowMDo1NlrOD3VnwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxOToxNjoyOFrOD3V-PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5MzUyNTEyOnYy", "diffSide": "RIGHT", "path": "ambry-clustermap/src/main/java/com/github/ambry/clustermap/ClusterMapUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxOTowMDo1NlrOGNil2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxOTowMDo1NlrOGNil2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjg1MTQxNg==", "bodyText": "minor: \"No partitions for partition class = '\" + partitionClass + \"' and default partition class = '\" + defaultPartitionClass + \"' found\"", "url": "https://github.com/linkedin/ambry/pull/1486#discussion_r416851416", "createdAt": "2020-04-28T19:00:56Z", "author": {"login": "jsjtzyy"}, "path": "ambry-clustermap/src/main/java/com/github/ambry/clustermap/ClusterMapUtils.java", "diffHunk": "@@ -548,22 +551,26 @@ private boolean areAllLocalReplicasForPartitionUp(PartitionId partitionId) {\n       try {\n         if (partitionClass == null) {\n           toReturn.addAll(allPartitions);\n-        } else if (partitionIdsByClassAndLocalReplicaCount.containsKey(partitionClass)) {\n+        } else {\n           SortedMap<Integer, List<PartitionId>> partitionsByReplicaCount =\n               partitionIdsByClassAndLocalReplicaCount.get(partitionClass);\n+          if (partitionsByReplicaCount == null) {\n+            partitionsByReplicaCount = partitionIdsByClassAndLocalReplicaCount.get(defaultPartitionClass);\n+          }\n+          if (partitionsByReplicaCount == null) {\n+            throw new IllegalArgumentException(\n+                \"No partitions for default partition class \" + partitionClass + \" found\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aa281555736335c633675eba2faeab26722b527"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5MzU4MjY5OnYy", "diffSide": "RIGHT", "path": "ambry-router/src/main/java/com/github/ambry/router/PutManager.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxOToxNjoyOFrOGNjJDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxOToxNjoyOFrOGNjJDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjg2MDQzMA==", "bodyText": "good catch", "url": "https://github.com/linkedin/ambry/pull/1486#discussion_r416860430", "createdAt": "2020-04-28T19:16:28Z", "author": {"login": "jsjtzyy"}, "path": "ambry-router/src/main/java/com/github/ambry/router/PutManager.java", "diffHunk": "@@ -176,7 +176,7 @@ private String getPartitionClass(BlobProperties blobProperties) {\n     Account account = accountService.getAccountById(blobProperties.getAccountId());\n     if (account != null) {\n       Container container = account.getContainerById(blobProperties.getContainerId());\n-      if (container != null && container.getReplicationPolicy() != null) {\n+      if (container != null && !Utils.isNullOrEmpty(container.getReplicationPolicy())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aa281555736335c633675eba2faeab26722b527"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1525, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}