{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMzEzMzYx", "number": 1204, "title": "Implemented Context Aware scheduled thread pool for bulkhead", "bodyText": "As per our internal discussion, replaced ThreadPoolExecutor by ContextAwareBoundedScheduledThreadPool inside ThreadPoolBulkhead.\nContextAwareBoundedScheduledThreadPool extends to ScheduledThreadPoolExecutor but maintains a boundedBlocking queue implementation using semaphore to control number of task submitted to queue.\nit respects list of ContextPropagators configured in ThreadPoolBulkhead and propagates the same. Also it propagates MDC contextMap by default if set in caller thread.\nKindly review implementation of ContextAwareBoundedScheduledThreadPool. would it be better to implement ScheduledThreadPoolExecutor by ThreadPoolBulkhead itself or a separate implementation like this is fine ?\nAlso how are we planning to use the same threadpool in timeLimiter and retry? I guess we might need additional config to pass bulkhead instance to timeLimiter ?\n@RobWin .", "createdAt": "2020-10-14T11:44:07Z", "url": "https://github.com/resilience4j/resilience4j/pull/1204", "merged": true, "mergeCommit": {"oid": "6e5a7b98b3aacfd64c837706893d04b8ba8ef298"}, "closed": true, "closedAt": "2020-11-30T08:46:22Z", "author": {"login": "KrnSaurabh"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYe7yAABqjM5NDY1MDIzOTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdhhR8QAFqTU0MDY5NDkxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d7be291b8c42af115636b39d4c8984790f165354", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/d7be291b8c42af115636b39d4c8984790f165354", "committedDate": "2020-10-26T12:26:13Z", "message": "Changed Bounded Scheduled Thread Pool to Unbounded"}, "afterCommit": {"oid": "abf1b69d4f1ebf34733c662fcdf2177d82728bf7", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/abf1b69d4f1ebf34733c662fcdf2177d82728bf7", "committedDate": "2020-11-02T06:50:20Z", "message": "Implenmented contextAwareScheduledThreadPool for timelimiter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNTA2MDA3", "url": "https://github.com/resilience4j/resilience4j/pull/1204#pullrequestreview-521506007", "createdAt": "2020-11-02T10:29:28Z", "commit": {"oid": "abf1b69d4f1ebf34733c662fcdf2177d82728bf7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMDoyOToyOFrOHr-nxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMDoyOToyOFrOHr-nxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg3NjgwNA==", "bodyText": "Can we rename it to\nContextAwareScheduledThreadPoolExecutor ?", "url": "https://github.com/resilience4j/resilience4j/pull/1204#discussion_r515876804", "createdAt": "2020-11-02T10:29:28Z", "author": {"login": "RobWin"}, "path": "resilience4j-core/src/main/java/io/github/resilience4j/core/ContextAwareScheduledThreadPool.java", "diffHunk": "@@ -0,0 +1,110 @@\n+/*\n+ *\n+ *  Copyright 2020 krnsaurabh\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *         http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ *\n+ */\n+package io.github.resilience4j.core;\n+\n+import io.github.resilience4j.core.lang.Nullable;\n+import org.slf4j.MDC;\n+\n+import java.util.*;\n+import java.util.concurrent.Callable;\n+import java.util.concurrent.ScheduledFuture;\n+import java.util.concurrent.ScheduledThreadPoolExecutor;\n+import java.util.concurrent.TimeUnit;\n+\n+public class ContextAwareScheduledThreadPool extends ScheduledThreadPoolExecutor {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "abf1b69d4f1ebf34733c662fcdf2177d82728bf7"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af94d4861837a3d39095245fb612c1681c122fda", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/af94d4861837a3d39095245fb612c1681c122fda", "committedDate": "2020-11-25T08:11:24Z", "message": "Implenmented contextAwareScheduledThreadPool for timelimiter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11e33b8465d6a77dddbc1c36460fffaafbba55b5", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/11e33b8465d6a77dddbc1c36460fffaafbba55b5", "committedDate": "2020-11-25T08:13:08Z", "message": "Added ContextAwareThreadPoolExecutor to RetryAsync"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fbe2f4260bfacbb66390a39a53f8a31bbddda7e", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/8fbe2f4260bfacbb66390a39a53f8a31bbddda7e", "committedDate": "2020-11-25T08:13:09Z", "message": "Fixed Javadoc for NamingThreadFactory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "786fed50aa64cd8d3cf797612501f07b9523948c", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/786fed50aa64cd8d3cf797612501f07b9523948c", "committedDate": "2020-11-25T08:13:09Z", "message": "Added builders for ContextAwareThreadPool and added few tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7bebaadd5b8cf329199d6e9bfbabfadac758fd4", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/a7bebaadd5b8cf329199d6e9bfbabfadac758fd4", "committedDate": "2020-11-13T14:50:32Z", "message": "Fixed Javadoc for NamingThreadFactory"}, "afterCommit": {"oid": "786fed50aa64cd8d3cf797612501f07b9523948c", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/786fed50aa64cd8d3cf797612501f07b9523948c", "committedDate": "2020-11-25T08:13:09Z", "message": "Added builders for ContextAwareThreadPool and added few tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwNjk0OTE2", "url": "https://github.com/resilience4j/resilience4j/pull/1204#pullrequestreview-540694916", "createdAt": "2020-11-30T08:43:12Z", "commit": {"oid": "786fed50aa64cd8d3cf797612501f07b9523948c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1807, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}