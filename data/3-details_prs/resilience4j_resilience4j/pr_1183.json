{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0OTc5MDYw", "number": 1183, "title": "feat(micronaut): update intercept and test cases", "bodyText": "I move the proceed call into the executionCompletionStage. it should still handle it for the fallback in proceed returns null right?", "createdAt": "2020-09-29T17:07:57Z", "url": "https://github.com/resilience4j/resilience4j/pull/1183", "merged": true, "mergeCommit": {"oid": "58b991464c47c5584304f1c11517ff2e6c8bdc73"}, "closed": true, "closedAt": "2020-10-02T08:04:51Z", "author": {"login": "pollend"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNrTi3gH2gAyNDk0OTc5MDYwOjY3NmRhMmQ5NDAxNjUyOTVjNWUyMGE4MWUzMDc2NjI4YzNlNjQ5NjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOhXgXgFqTUwMDkzMzU5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "676da2d940165295c5e20a81e3076628c3e64961", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/resilience4j/resilience4j/commit/676da2d940165295c5e20a81e3076628c3e64961", "committedDate": "2020-09-29T17:05:31Z", "message": "move proceed into excuteCompletionStage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NzQ0MjUz", "url": "https://github.com/resilience4j/resilience4j/pull/1183#pullrequestreview-498744253", "createdAt": "2020-09-29T17:59:47Z", "commit": {"oid": "676da2d940165295c5e20a81e3076628c3e64961"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNzo1OTo0OFrOHZ6dKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxODowMDoyMFrOHZ6eeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjkzNDE4Nw==", "bodyText": "can u please do it as we have in bulkhead aspect  :\nhttps://github.com/resilience4j/resilience4j/blob/master/resilience4j-spring/src/main/java/io/github/resilience4j/bulkhead/configure/BulkheadAspect.java#L221\nSame story for other interceptors  ,  you can quickly compare with its own spring aspects", "url": "https://github.com/resilience4j/resilience4j/pull/1183#discussion_r496934187", "createdAt": "2020-09-29T17:59:48Z", "author": {"login": "Romeh"}, "path": "resilience4j-micronaut/src/main/java/io/github/resilience4j/mirconaut/bulkhead/BulkheadInterceptor.java", "diffHunk": "@@ -97,11 +97,7 @@ public Object intercept(MethodInvocationContext<Object, Object> context) {\n         ReturnType<Object> rt = context.getReturnType();\n         Class<Object> returnType = rt.getType();\n         if (CompletionStage.class.isAssignableFrom(returnType)) {\n-            Object result = context.proceed();\n-            if (result == null) {\n-                return result;\n-            }\n-            return this.fallbackCompletable(bulkhead.executeCompletionStage(() -> ((CompletableFuture<?>) result)),context);\n+            return this.fallbackCompletable(bulkhead.executeCompletionStage(() -> ((CompletableFuture<?>) context.proceed())),context);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "676da2d940165295c5e20a81e3076628c3e64961"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjkzNDUyMQ==", "bodyText": "Same for reactive types please", "url": "https://github.com/resilience4j/resilience4j/pull/1183#discussion_r496934521", "createdAt": "2020-09-29T18:00:20Z", "author": {"login": "Romeh"}, "path": "resilience4j-micronaut/src/main/java/io/github/resilience4j/mirconaut/circuitbreaker/CircuitBreakerInterceptor.java", "diffHunk": "@@ -83,11 +83,7 @@ public Object intercept(MethodInvocationContext<Object, Object> context) {\n         ReturnType<Object> rt = context.getReturnType();\n         Class<Object> returnType = rt.getType();\n         if (CompletionStage.class.isAssignableFrom(returnType)) {\n-            Object result = context.proceed();\n-            if (result == null) {\n-                return result;\n-            }\n-            return this.fallbackCompletable(circuitBreaker.executeCompletionStage(() -> ((CompletableFuture<?>) result)), context);\n+            return this.fallbackCompletable(circuitBreaker.executeCompletionStage(() -> ((CompletableFuture<?>) context.proceed())), context);\n         } else if (Publishers.isConvertibleToPublisher(returnType)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "676da2d940165295c5e20a81e3076628c3e64961"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1f27f6b8e855b01a0e425d2265789223972eec0", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/resilience4j/resilience4j/commit/c1f27f6b8e855b01a0e425d2265789223972eec0", "committedDate": "2020-09-29T19:41:19Z", "message": "tweak for flowable test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a774192bfd0b024b2b621237da37b7e936865d7", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/resilience4j/resilience4j/commit/4a774192bfd0b024b2b621237da37b7e936865d7", "committedDate": "2020-09-29T19:42:10Z", "message": "Merge branch 'feature/flowable-test' into feature/tweak-completion-stage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f2d54c8cfc4bc2a3ba5172957eb048325fc319b", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/resilience4j/resilience4j/commit/9f2d54c8cfc4bc2a3ba5172957eb048325fc319b", "committedDate": "2020-09-29T21:30:52Z", "message": "correct flowable and exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd485881cad4f2d7d27f45ed4568fd2910fab95e", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/resilience4j/resilience4j/commit/bd485881cad4f2d7d27f45ed4568fd2910fab95e", "committedDate": "2020-09-29T21:57:36Z", "message": "tweak intercept for fallback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1954c7335d322093e67bf5627178053dcf068edd", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/resilience4j/resilience4j/commit/1954c7335d322093e67bf5627178053dcf068edd", "committedDate": "2020-09-29T22:04:29Z", "message": "correct recovery for threadpool bulkhead"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e938994915810ec176d1091c682b90a05861082e", "author": {"user": {"login": "pollend", "name": "Michael Pollind"}}, "url": "https://github.com/resilience4j/resilience4j/commit/e938994915810ec176d1091c682b90a05861082e", "committedDate": "2020-10-01T19:12:34Z", "message": "bump"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwOTMzNTk5", "url": "https://github.com/resilience4j/resilience4j/pull/1183#pullrequestreview-500933599", "createdAt": "2020-10-02T08:04:43Z", "commit": {"oid": "e938994915810ec176d1091c682b90a05861082e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1798, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}