{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzNjcyNTQ4", "number": 1087, "title": "Enriched SSE event with hystrix like event data  - Ratpack", "bodyText": "Added  hystrix like stream that closes issue   #1076", "createdAt": "2020-07-20T17:35:49Z", "url": "https://github.com/resilience4j/resilience4j/pull/1087", "merged": true, "mergeCommit": {"oid": "16a93d3c23f621bde805f09191e0f1f8d6668b77"}, "closed": true, "closedAt": "2020-08-13T07:44:54Z", "author": {"login": "vijaycse"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc20o7xAH2gAyNDUzNjcyNTQ4OjZkOWQ2Yjk1ZmYwZTQzMjhhZWU0NTRlNThmNjNiZjNkZmNkNDU3M2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-bG3DgFqTQ2NjUxODc5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6d9d6b95ff0e4328aee454e58f63bf3dfcd4573a", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/6d9d6b95ff0e4328aee454e58f63bf3dfcd4573a", "committedDate": "2020-07-20T16:57:46Z", "message": " Adding hystrix like stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7091683bd0b9d9958030dcbe16164f6a52824450", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/7091683bd0b9d9958030dcbe16164f6a52824450", "committedDate": "2020-07-20T17:29:02Z", "message": " Adding hystrix like stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "808731c089e23393eed08e4a1654cdb01d64619b", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/808731c089e23393eed08e4a1654cdb01d64619b", "committedDate": "2020-07-20T17:32:33Z", "message": " Formatting and rename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f650eb833c1e7586d41a99a4f405ae12c3497df4", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/f650eb833c1e7586d41a99a4f405ae12c3497df4", "committedDate": "2020-07-20T20:57:22Z", "message": " Added failure and slow thresold similar to springboot2 CB details"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxOTYwMzI0", "url": "https://github.com/resilience4j/resilience4j/pull/1087#pullrequestreview-451960324", "createdAt": "2020-07-20T21:07:49Z", "commit": {"oid": "f650eb833c1e7586d41a99a4f405ae12c3497df4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTowNzo0OVrOG0fVQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTowNzo0OVrOG0fVQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY5MjQ4Mg==", "bodyText": "Added similar to springboot2 health details.\n\n  \n    \n      resilience4j/resilience4j-spring-boot2/src/main/java/io/github/resilience4j/circuitbreaker/monitoring/health/CircuitBreakersHealthIndicator.java\n    \n    \n         Line 59\n      in\n      b4f5249\n    \n    \n    \n    \n\n        \n          \n           private static Health.Builder addDetails(Health.Builder builder,", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r457692482", "createdAt": "2020-07-20T21:07:49Z", "author": {"login": "vijaycse"}, "path": "resilience4j-ratpack/src/main/java/io/github/resilience4j/ratpack/circuitbreaker/monitoring/endpoint/events/CircuitBreakerStreamEventsDTO.java", "diffHunk": "@@ -0,0 +1,85 @@\n+/*\n+ * Copyright 2020 Vijay Ram\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.github.resilience4j.ratpack.circuitbreaker.monitoring.endpoint.events;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import io.github.resilience4j.circuitbreaker.CircuitBreaker;\n+import io.github.resilience4j.circuitbreaker.CircuitBreakerConfig;\n+import io.github.resilience4j.circuitbreaker.event.CircuitBreakerEvent;\n+\n+\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+public class CircuitBreakerStreamEventsDTO {\n+\n+    private CircuitBreakerEvent circuitBreakerRecentEvent;\n+    private CircuitBreaker.Metrics metrics;\n+    private CircuitBreaker.State currentState;\n+    private float failureRateThreshold;\n+    private float slowCallRateThreshold;\n+\n+    public CircuitBreakerStreamEventsDTO(CircuitBreakerEvent circuitBreakerEvent,\n+                                         CircuitBreaker.State state,\n+                                         CircuitBreaker.Metrics metrics,\n+                                         CircuitBreakerConfig circuitBreakerConfig) {\n+        this.circuitBreakerRecentEvent = circuitBreakerEvent;\n+        this.metrics = metrics;\n+        this.currentState = state;\n+        this.failureRateThreshold = circuitBreakerConfig.getFailureRateThreshold();\n+        this.slowCallRateThreshold = circuitBreakerConfig.getSlowCallRateThreshold();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f650eb833c1e7586d41a99a4f405ae12c3497df4"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfdc9dbd6b9c7a838052e665be1a78ebed4a1186", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/dfdc9dbd6b9c7a838052e665be1a78ebed4a1186", "committedDate": "2020-07-23T15:56:00Z", "message": " Moved the hystris stream event DTO to resilence4j common module"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MjgzNjM0", "url": "https://github.com/resilience4j/resilience4j/pull/1087#pullrequestreview-454283634", "createdAt": "2020-07-23T16:04:29Z", "commit": {"oid": "dfdc9dbd6b9c7a838052e665be1a78ebed4a1186"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjowNDoyOVrOG2RZkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjowODoyOVrOG2RjTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU2MTM2Mg==", "bodyText": "@vijaycse please update the description to not mention eco :D", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r459561362", "createdAt": "2020-07-23T16:04:29Z", "author": {"login": "drmaas"}, "path": "resilience4j-framework-common/src/main/java/io/github/resilience4j/common/circuitbreaker/monitoring/endpoint/CircuitBreakerHystrixStreamEventsDTO.java", "diffHunk": "@@ -0,0 +1,75 @@\n+package io.github.resilience4j.common.circuitbreaker.monitoring.endpoint;\n+\n+import io.github.resilience4j.circuitbreaker.CircuitBreaker;\n+import io.github.resilience4j.circuitbreaker.CircuitBreakerConfig;\n+import io.github.resilience4j.circuitbreaker.event.CircuitBreakerEvent;\n+\n+/**\n+ * @author vijayram\n+ */\n+\n+/**\n+ * This class is used to emit available data as SSE so that resilence4j SSE can be bridged\n+ * to suppose legacy hystrix eco tools such as hystrix dashboard , turbine and vizceral.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfdc9dbd6b9c7a838052e665be1a78ebed4a1186"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU2Mzg1Mg==", "bodyText": "@RobWin do we want to name things hystrix - or name things turbine or a more generic name? The use case for all of this is that the streams are aggregated by turbine, which is polled by vizceral to provide real-time visualization of network traffic across all application instances.\nHystrix provided a streaming endpoint like this one - and Vijay is porting it forward for clients using resilience4j.", "url": "https://github.com/resilience4j/resilience4j/pull/1087#discussion_r459563852", "createdAt": "2020-07-23T16:08:29Z", "author": {"login": "drmaas"}, "path": "resilience4j-ratpack/src/main/java/io/github/resilience4j/ratpack/circuitbreaker/monitoring/endpoint/CircuitBreakerChain.java", "diffHunk": "@@ -111,6 +112,26 @@ public void execute(Chain chain) throws Exception {\n                             .event(c -> c.getEventType().name()).data(data));\n                 ctx.render(events);\n             });\n+            chain1.get(\"hystrixStream/events\", ctx -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfdc9dbd6b9c7a838052e665be1a78ebed4a1186"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2bb718bd6fade3df65ea91976e73fba4dc35208", "author": {"user": null}, "url": "https://github.com/resilience4j/resilience4j/commit/f2bb718bd6fade3df65ea91976e73fba4dc35208", "committedDate": "2020-07-23T16:30:24Z", "message": " Code review comments addressed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11f202a759e69c2c01421a3e315b00566eac0447", "author": {"user": {"login": "vijaycse", "name": "Vijay Ram"}}, "url": "https://github.com/resilience4j/resilience4j/commit/11f202a759e69c2c01421a3e315b00566eac0447", "committedDate": "2020-08-07T21:23:37Z", "message": "Adding Docs as suggested in Code review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NTE4Nzk2", "url": "https://github.com/resilience4j/resilience4j/pull/1087#pullrequestreview-466518796", "createdAt": "2020-08-13T07:44:19Z", "commit": {"oid": "11f202a759e69c2c01421a3e315b00566eac0447"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1758, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}