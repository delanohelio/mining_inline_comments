{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NTc4MjI1", "number": 887, "title": "(Partially) Closes #351: Javadocs for map APIs", "bodyText": "I have completed Javadocs on the API's map package. I am opening a PR to being the review process now before I (or someone else!) moves on to the other packages (list, set, bag, etc.).  In my view, map was the highest priority with methods like getIfAbsentPutWith that benefited most from Javadocs. Additionally, I'm envisioning many Javadocs in those packages will be copy-paste from what I have here, so I want to confirm the verbiage is right before doing so.\nSome non-Javadoc changes included in this PR (which can be taken out if needed):\n\nUpdate checkstyle DTD (now content assist works in Eclipse when editing the configs)\nRemove \\r checkstyle check. I don't see what benefit it provides (from what I can tell, my commits still have just \\n even from Windows) while just making it a lot harder to contribute from Windows and get a clean build\nRemove a redundant tap() declaration in immutableObjectPrimitiveMap.stg\n\nAdditionally, this includes a helper JavadocUtil that will copy Javadocs back from a generated class to a template. It's not perfect but it saved me a ton of time, so that I could edit the Javadocs on an example concrete class and benefit from Eclipse's Javadoc assists that would otherwise be unavailable when directly editing the template.", "createdAt": "2020-05-18T15:32:34Z", "url": "https://github.com/eclipse/eclipse-collections/pull/887", "merged": true, "mergeCommit": {"oid": "869fb06d477adf3ec7ff732baa7484e975b1da55"}, "closed": true, "closedAt": "2020-06-07T04:01:35Z", "author": {"login": "jdimeo"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABciiPuFgFqTQxMzc0MzExMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcozt16gFqTQyNTc4NTEyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzQzMTEw", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-413743110", "createdAt": "2020-05-18T16:13:26Z", "commit": {"oid": "9cea83f2f420cc513edfea70b6084030e977b51d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjoxMzoyNlrOGW-P-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjoxMzoyNlrOGW-P-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc0MTc1Mw==", "bodyText": "Hi @jdimeo, why is this method being removed?", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r426741753", "createdAt": "2020-05-18T16:13:26Z", "author": {"login": "donraab"}, "path": "eclipse-collections-code-generator/src/main/resources/api/map/immutableObjectPrimitiveMap.stg", "diffHunk": "@@ -39,22 +38,33 @@ public interface ImmutableObject<name>Map\\<K> extends Object<name>Map\\<K>\n     @Override\n     Immutable<name>Collection reject(<name>Predicate predicate);\n \n-    /**\n-     * @since 9.0.\n-     */\n-    default ImmutableObject<name>Map\\<K> tap(<name>Procedure procedure)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9cea83f2f420cc513edfea70b6084030e977b51d"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NDY2NDM3", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-417466437", "createdAt": "2020-05-25T05:42:07Z", "commit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNTo0MjowN1rOGZ1O9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNTo0MjowN1rOGZ1O9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTczOTc2NQ==", "bodyText": "@motlin @nikhilnanivadekar Are you both ok with this removal?", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r429739765", "createdAt": "2020-05-25T05:42:07Z", "author": {"login": "donraab"}, "path": "checkstyle-configuration.xml", "diffHunk": "@@ -334,9 +334,4 @@\n         <property name=\"format\" value=\"\\n\\n\\n\" />\n         <property name=\"message\" value=\"Extra newline.\" />\n     </module>\n-\n-    <module name=\"RegexpMultiline\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODk1ODg5", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-417895889", "createdAt": "2020-05-25T23:02:48Z", "commit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzowMjo0OFrOGaKyKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzowMjo0OFrOGaKyKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA5Mjg0MA==", "bodyText": "This sentence fragment looks like it might be superfluous.", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r430092840", "createdAt": "2020-05-25T23:02:48Z", "author": {"login": "donraab"}, "path": "eclipse-collections-code-generator/src/main/resources/api/map/mutablePrimitiveObjectMap.stg", "diffHunk": "@@ -45,20 +53,71 @@ public interface Mutable<name>ObjectMap\\<V> extends <name>ObjectMap\\<V>, Mutable\n     }\n \n     /**\n+     * Puts all of the key/value mappings from the specified map into this map. If this\n+     * map already has a value associated with one of the keys in the map, it will be\n+     * replaced with the value in {@code map}.\n+     * @param map the map to copy into this map\n      * @since 5.0.\n      */\n     void putAll(<name>ObjectMap\\<? extends V> map);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #remove(<type>)\n+     */\n     V removeKey(<type> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #removeKey(<type>)\n+     */\n     V remove(<type> key);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates a value with the key.\n+     * a new value with they key", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODk2MDYx", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-417896061", "createdAt": "2020-05-25T23:04:01Z", "commit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzowNDowMVrOGaKypw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzowNDowMVrOGaKypw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA5Mjk2Nw==", "bodyText": "I don't believe the key is passed to the function, as it is a Function0 which means it takes no parameters.", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r430092967", "createdAt": "2020-05-25T23:04:01Z", "author": {"login": "donraab"}, "path": "eclipse-collections-code-generator/src/main/resources/api/map/mutablePrimitiveObjectMap.stg", "diffHunk": "@@ -45,20 +53,71 @@ public interface Mutable<name>ObjectMap\\<V> extends <name>ObjectMap\\<V>, Mutable\n     }\n \n     /**\n+     * Puts all of the key/value mappings from the specified map into this map. If this\n+     * map already has a value associated with one of the keys in the map, it will be\n+     * replaced with the value in {@code map}.\n+     * @param map the map to copy into this map\n      * @since 5.0.\n      */\n     void putAll(<name>ObjectMap\\<? extends V> map);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #remove(<type>)\n+     */\n     V removeKey(<type> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #removeKey(<type>)\n+     */\n     V remove(<type> key);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates a value with the key.\n+     * a new value with they key\n+     * @param key the key\n+     * @param value the value to associate with {@code key} if no such mapping exists\n+     * @return the value associated with key, if one exists, or {@code value} if not\n+     */\n     V getIfAbsentPut(<type> key, V value);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value supplier with the key.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODk2MjI1", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-417896225", "createdAt": "2020-05-25T23:05:08Z", "commit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzowNTowOFrOGaKzPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzowNTowOFrOGaKzPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA5MzExOQ==", "bodyText": "The value function is invoked with the additional parameter here, not the key.", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r430093119", "createdAt": "2020-05-25T23:05:08Z", "author": {"login": "donraab"}, "path": "eclipse-collections-code-generator/src/main/resources/api/map/mutablePrimitiveObjectMap.stg", "diffHunk": "@@ -45,20 +53,71 @@ public interface Mutable<name>ObjectMap\\<V> extends <name>ObjectMap\\<V>, Mutable\n     }\n \n     /**\n+     * Puts all of the key/value mappings from the specified map into this map. If this\n+     * map already has a value associated with one of the keys in the map, it will be\n+     * replaced with the value in {@code map}.\n+     * @param map the map to copy into this map\n      * @since 5.0.\n      */\n     void putAll(<name>ObjectMap\\<? extends V> map);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #remove(<type>)\n+     */\n     V removeKey(<type> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #removeKey(<type>)\n+     */\n     V remove(<type> key);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates a value with the key.\n+     * a new value with they key\n+     * @param key the key\n+     * @param value the value to associate with {@code key} if no such mapping exists\n+     * @return the value associated with key, if one exists, or {@code value} if not\n+     */\n     V getIfAbsentPut(<type> key, V value);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value supplier with the key.\n+     * @param key the key\n+     * @param function the supplier that provides the value if no mapping exists for {@code key}\n+     * @return the value associated with the key, if one exists, or the result of\n+     * invoking {@code function} if not\n+     */\n     V getIfAbsentPut(<type> key, Function0\\<? extends V> function);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value function with the key.\n+     * @param key the key\n+     * @param function the function that provides the value if no mapping exists.\n+     * The {@code key} will be passed as the argument to the function.\n+     * @return the value associated with the key, if one exists, or the result of\n+     * invoking {@code function} with {@code key} if not\n+     */\n     V getIfAbsentPutWithKey(<type> key, <name>ToObjectFunction\\<? extends V> function);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value function with the key.\n+     * @param key the key", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTAxNjUw", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-417901650", "createdAt": "2020-05-25T23:41:09Z", "commit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzo0MTowOVrOGaLG0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzo0MTowOVrOGaLG0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA5ODEyOA==", "bodyText": "A sentence fragment.", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r430098128", "createdAt": "2020-05-25T23:41:09Z", "author": {"login": "donraab"}, "path": "eclipse-collections-code-generator/src/main/resources/api/map/mutablePrimitivePrimitiveMap.stg", "diffHunk": "@@ -56,20 +68,88 @@ public interface Mutable<name1><name2>Map extends <name1><name2>Map, Mutable<nam\n      */\n     void updateValues(<name1><name2>To<name2>Function function);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #remove(<type1>)\n+     */\n     void removeKey(<type1> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #removeKey(<type1>)\n+     */\n     void remove(<type1> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map,\n+     * returning the previously associated value with the key. If no mapping\n+     * existed for the key, the specified default value is returned.\n+     * @param key the key to remove\n+     * @param value the default value to return if no mapping for the key exists\n+     * @return the value previously associated with the key, if one existed,\n+     * or {@code value} if not\n+     */\n     <type2> removeKeyIfAbsent(<type1> key, <type2> value);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates a value with the key.\n+     * a new value with they key", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTAxODE0", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-417901814", "createdAt": "2020-05-25T23:42:24Z", "commit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzo0MjoyNFrOGaLHTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzo0MjoyNFrOGaLHTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA5ODI1Mg==", "bodyText": "I understand this better after reading your comment from before but could still be confusing.", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r430098252", "createdAt": "2020-05-25T23:42:24Z", "author": {"login": "donraab"}, "path": "eclipse-collections-code-generator/src/main/resources/api/map/mutablePrimitivePrimitiveMap.stg", "diffHunk": "@@ -56,20 +68,88 @@ public interface Mutable<name1><name2>Map extends <name1><name2>Map, Mutable<nam\n      */\n     void updateValues(<name1><name2>To<name2>Function function);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #remove(<type1>)\n+     */\n     void removeKey(<type1> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #removeKey(<type1>)\n+     */\n     void remove(<type1> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map,\n+     * returning the previously associated value with the key. If no mapping\n+     * existed for the key, the specified default value is returned.\n+     * @param key the key to remove\n+     * @param value the default value to return if no mapping for the key exists\n+     * @return the value previously associated with the key, if one existed,\n+     * or {@code value} if not\n+     */\n     <type2> removeKeyIfAbsent(<type1> key, <type2> value);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates a value with the key.\n+     * a new value with they key\n+     * @param key the key\n+     * @param value the value to associate with {@code key} if no such mapping exists\n+     * @return the value associated with key, if one exists, or {@code value} if not\n+     */\n     <type2> getIfAbsentPut(<type1> key, <type2> value);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value supplier with the key.\n+     * @param key the key", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "originalPosition": 68}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTAyMDM0", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-417902034", "createdAt": "2020-05-25T23:43:53Z", "commit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzo0Mzo1M1rOGaLIKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzo0Mzo1M1rOGaLIKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA5ODQ3Mw==", "bodyText": "Interestingly, with \"with the key\" has dual meaning as the value is associated with the key, and they key is passed as a parameter to the function. I think this is ok here.", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r430098473", "createdAt": "2020-05-25T23:43:53Z", "author": {"login": "donraab"}, "path": "eclipse-collections-code-generator/src/main/resources/api/map/mutablePrimitivePrimitiveMap.stg", "diffHunk": "@@ -56,20 +68,88 @@ public interface Mutable<name1><name2>Map extends <name1><name2>Map, Mutable<nam\n      */\n     void updateValues(<name1><name2>To<name2>Function function);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #remove(<type1>)\n+     */\n     void removeKey(<type1> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #removeKey(<type1>)\n+     */\n     void remove(<type1> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map,\n+     * returning the previously associated value with the key. If no mapping\n+     * existed for the key, the specified default value is returned.\n+     * @param key the key to remove\n+     * @param value the default value to return if no mapping for the key exists\n+     * @return the value previously associated with the key, if one existed,\n+     * or {@code value} if not\n+     */\n     <type2> removeKeyIfAbsent(<type1> key, <type2> value);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates a value with the key.\n+     * a new value with they key\n+     * @param key the key\n+     * @param value the value to associate with {@code key} if no such mapping exists\n+     * @return the value associated with key, if one exists, or {@code value} if not\n+     */\n     <type2> getIfAbsentPut(<type1> key, <type2> value);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value supplier with the key.\n+     * @param key the key\n+     * @param function the supplier that provides the value if no mapping exists for {@code key}\n+     * @return the value associated with the key, if one exists, or the result of\n+     * invoking {@code function} if not\n+     */\n     <type2> getIfAbsentPut(<type1> key, <name2>Function0 function);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value function with the key.\n+     * @param key the key", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "originalPosition": 78}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTAyMTQ1", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-417902145", "createdAt": "2020-05-25T23:44:41Z", "commit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzo0NDo0MVrOGaLIjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQyMzo0NDo0MVrOGaLIjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA5ODU3Mw==", "bodyText": "This is where it gets confusing. The calculated value is associated with the key, but the parameter is passed to the function.", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r430098573", "createdAt": "2020-05-25T23:44:41Z", "author": {"login": "donraab"}, "path": "eclipse-collections-code-generator/src/main/resources/api/map/mutablePrimitivePrimitiveMap.stg", "diffHunk": "@@ -56,20 +68,88 @@ public interface Mutable<name1><name2>Map extends <name1><name2>Map, Mutable<nam\n      */\n     void updateValues(<name1><name2>To<name2>Function function);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #remove(<type1>)\n+     */\n     void removeKey(<type1> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #removeKey(<type1>)\n+     */\n     void remove(<type1> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map,\n+     * returning the previously associated value with the key. If no mapping\n+     * existed for the key, the specified default value is returned.\n+     * @param key the key to remove\n+     * @param value the default value to return if no mapping for the key exists\n+     * @return the value previously associated with the key, if one existed,\n+     * or {@code value} if not\n+     */\n     <type2> removeKeyIfAbsent(<type1> key, <type2> value);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates a value with the key.\n+     * a new value with they key\n+     * @param key the key\n+     * @param value the value to associate with {@code key} if no such mapping exists\n+     * @return the value associated with key, if one exists, or {@code value} if not\n+     */\n     <type2> getIfAbsentPut(<type1> key, <type2> value);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value supplier with the key.\n+     * @param key the key\n+     * @param function the supplier that provides the value if no mapping exists for {@code key}\n+     * @return the value associated with the key, if one exists, or the result of\n+     * invoking {@code function} if not\n+     */\n     <type2> getIfAbsentPut(<type1> key, <name2>Function0 function);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value function with the key.\n+     * @param key the key\n+     * @param function the function that provides the value if no mapping exists.\n+     * The {@code key} will be passed as the argument to the function.\n+     * @return the value associated with the key, if one exists, or the result of\n+     * invoking {@code function} with {@code key} if not\n+     */\n     <type2> getIfAbsentPutWithKey(<type1> key, <name1>To<name2>Function function);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value function with the key.\n+     * @param key the key", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "originalPosition": 89}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTA3MjY0", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-417907264", "createdAt": "2020-05-26T00:18:18Z", "commit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNTEyNDc1", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-421512475", "createdAt": "2020-05-31T17:18:27Z", "commit": {"oid": "431b0be50bb9641d6a4bd6497ebdcca33889356c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNzoxODoyN1rOGc6LmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNzoxODoyN1rOGc6LmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk2NjU1Mg==", "bodyText": "@jdimeo while that is true, this is a part of micro-optimization. Basically, when you pass in a parameter, you can cache it for that loop and avoid things like finality and reassignment issues. Secondly, the *with patterns help us use Method References.", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r432966552", "createdAt": "2020-05-31T17:18:27Z", "author": {"login": "nikhilnanivadekar"}, "path": "eclipse-collections-code-generator/src/main/resources/api/map/mutablePrimitiveObjectMap.stg", "diffHunk": "@@ -45,20 +53,71 @@ public interface Mutable<name>ObjectMap\\<V> extends <name>ObjectMap\\<V>, Mutable\n     }\n \n     /**\n+     * Puts all of the key/value mappings from the specified map into this map. If this\n+     * map already has a value associated with one of the keys in the map, it will be\n+     * replaced with the value in {@code map}.\n+     * @param map the map to copy into this map\n      * @since 5.0.\n      */\n     void putAll(<name>ObjectMap\\<? extends V> map);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #remove(<type>)\n+     */\n     V removeKey(<type> key);\n \n+    /**\n+     * Removes the mapping associated with the key, if one exists, from the map.\n+     * @param key the key to remove\n+     * @see #removeKey(<type>)\n+     */\n     V remove(<type> key);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates a value with the key.\n+     * a new value with they key\n+     * @param key the key\n+     * @param value the value to associate with {@code key} if no such mapping exists\n+     * @return the value associated with key, if one exists, or {@code value} if not\n+     */\n     V getIfAbsentPut(<type> key, V value);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value supplier with the key.\n+     * @param key the key\n+     * @param function the supplier that provides the value if no mapping exists for {@code key}\n+     * @return the value associated with the key, if one exists, or the result of\n+     * invoking {@code function} if not\n+     */\n     V getIfAbsentPut(<type> key, Function0\\<? extends V> function);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value function with the key.\n+     * @param key the key\n+     * @param function the function that provides the value if no mapping exists.\n+     * The {@code key} will be passed as the argument to the function.\n+     * @return the value associated with the key, if one exists, or the result of\n+     * invoking {@code function} with {@code key} if not\n+     */\n     V getIfAbsentPutWithKey(<type> key, <name>ToObjectFunction\\<? extends V> function);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * associates the result of invoking the value function with the key.\n+     * @param key the key", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA5MzExOQ=="}, "originalCommit": {"oid": "e36ca664abb49ed5fc49f24d1744bc582e03fbdc"}, "originalPosition": 75}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c430379b0e987383fb0c8bf20686992ff7127597", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/c430379b0e987383fb0c8bf20686992ff7127597", "committedDate": "2020-06-01T16:03:59Z", "message": "Create a simple utility to aid in Javadoc creation\n\nThis will copy back any Javadocs present in a generated class back to the corresponding template. This is so that you can open a generated class in your IDE and benefit from auto complete and auto formatting while writing the Javadoc, and then copy it back to the .stg template file which will apply to all other specializations. Invoke it with pairs of arguments: the generated class name followed by the template path (relative to the template root). it assumes the API folder is a sibling to the working directory.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5c6f488275e182b27d9db55fb1e79a022c61b7fe", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/5c6f488275e182b27d9db55fb1e79a022c61b7fe", "committedDate": "2020-06-01T03:37:09Z", "message": "Add @Override annotations for tap() (and one toString()) implementations.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}, "afterCommit": {"oid": "8189c2c1967c5f0de902645829d3dd3259e32e23", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/8189c2c1967c5f0de902645829d3dd3259e32e23", "committedDate": "2020-06-01T16:04:00Z", "message": "Add @Override annotations for tap() (and one toString()) implementations.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fbc08073400fd802035423b0518d97dcc9acdf3", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/9fbc08073400fd802035423b0518d97dcc9acdf3", "committedDate": "2020-06-01T16:17:39Z", "message": "Javadocs for primitiveValuesMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc0195d592b5e91de54d0a77df59af26c9a3ac03", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/cc0195d592b5e91de54d0a77df59af26c9a3ac03", "committedDate": "2020-06-01T16:18:03Z", "message": "Javadocs for primitivePrimitiveMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9565fa61dbfc9c981fbfc83bdd7cde35b9ea124", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/d9565fa61dbfc9c981fbfc83bdd7cde35b9ea124", "committedDate": "2020-06-01T16:18:12Z", "message": "Javadocs for mutablePrimitivePrimitiveMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24431369ae160745b0a2434fc0dc490ddbea47d4", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/24431369ae160745b0a2434fc0dc490ddbea47d4", "committedDate": "2020-06-01T16:18:20Z", "message": "Javadocs for primitiveObjectMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12d2da156cfadb0b41c4e7f42c3bd3c60ec28507", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/12d2da156cfadb0b41c4e7f42c3bd3c60ec28507", "committedDate": "2020-06-01T16:18:25Z", "message": "Javadocs for objectPrimitiveMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5323af05825b695d91166b974daa7c689d94a46", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/e5323af05825b695d91166b974daa7c689d94a46", "committedDate": "2020-06-01T16:18:36Z", "message": "Javadocs for mutableObjectPrimitiveMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8189c2c1967c5f0de902645829d3dd3259e32e23", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/8189c2c1967c5f0de902645829d3dd3259e32e23", "committedDate": "2020-06-01T16:04:00Z", "message": "Add @Override annotations for tap() (and one toString()) implementations.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}, "afterCommit": {"oid": "cf07f0be55b98858972ab64b7bb5b2a5066e2874", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/cf07f0be55b98858972ab64b7bb5b2a5066e2874", "committedDate": "2020-06-01T16:18:44Z", "message": "Add @Override annotations for tap() (and one toString()) implementations.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c5b014df777e8c46ee4571b00b2e45cfaef34a7", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/3c5b014df777e8c46ee4571b00b2e45cfaef34a7", "committedDate": "2020-06-01T16:32:18Z", "message": "Javadocs for immutableObjectPrimitiveMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bce6520f2cf06503466f95a1ddcff8c4118d42e1", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/bce6520f2cf06503466f95a1ddcff8c4118d42e1", "committedDate": "2020-06-01T16:32:25Z", "message": "Javadocs for immutablePrimitiveObjectMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5be50f66c85182cc16679bf75a4afbe0d5ec4e4f", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/5be50f66c85182cc16679bf75a4afbe0d5ec4e4f", "committedDate": "2020-06-01T16:32:25Z", "message": "Javadocs for immutablePrimitivePrimitiveMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cee562ffa67a9c48b561f0c8236903346656dd6", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/7cee562ffa67a9c48b561f0c8236903346656dd6", "committedDate": "2020-06-01T16:32:25Z", "message": "Javadocs for mutablePrimitiveObjectMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfe5eac2b124f288de1b05e817cd535de95d89b1", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/dfe5eac2b124f288de1b05e817cd535de95d89b1", "committedDate": "2020-06-01T16:32:25Z", "message": "Javadocs for mutablePrimitiveValuesMaps.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10e80cccca78210078cdd97bd4584ee2036c0adf", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/10e80cccca78210078cdd97bd4584ee2036c0adf", "committedDate": "2020-06-01T16:32:25Z", "message": "Update Checkstyle DTD to point to correct location.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c678013e5f5c16878733f4d18afc095a2ab8da0", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/3c678013e5f5c16878733f4d18afc095a2ab8da0", "committedDate": "2020-06-01T16:32:26Z", "message": "Proposed checkstyle change: remove \\r check\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80b5f01ee1fe63ef0bd325b22dbc52429e80cca3", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/80b5f01ee1fe63ef0bd325b22dbc52429e80cca3", "committedDate": "2020-06-01T16:32:36Z", "message": "Add @Override annotations for tap() (and one toString()) implementations.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf07f0be55b98858972ab64b7bb5b2a5066e2874", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/cf07f0be55b98858972ab64b7bb5b2a5066e2874", "committedDate": "2020-06-01T16:18:44Z", "message": "Add @Override annotations for tap() (and one toString()) implementations.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}, "afterCommit": {"oid": "80b5f01ee1fe63ef0bd325b22dbc52429e80cca3", "author": {"user": {"login": "jdimeo", "name": "John Dimeo"}}, "url": "https://github.com/eclipse/eclipse-collections/commit/80b5f01ee1fe63ef0bd325b22dbc52429e80cca3", "committedDate": "2020-06-01T16:32:36Z", "message": "Add @Override annotations for tap() (and one toString()) implementations.\n\nSigned-off-by: John Dimeo <dimeo@elderresearch.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1Nzg0OTYz", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-425784963", "createdAt": "2020-06-07T03:53:20Z", "commit": {"oid": "80b5f01ee1fe63ef0bd325b22dbc52429e80cca3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QwMzo1MzoyMVrOGgG-jQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QwMzo1MzoyMVrOGgG-jQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMyMTkzMw==", "bodyText": "We might want to update the wording a bit in a future iteration. But it is not super important.\nkeysView() keyValueView() essentially all *View() APIs are supposed to be lazy. So, the idea of changes in the map reflecting in the view might be a bit awkward.\nIt is ok for now", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r436321933", "createdAt": "2020-06-07T03:53:21Z", "author": {"login": "nikhilnanivadekar"}, "path": "eclipse-collections-code-generator/src/main/resources/api/map/primitiveObjectMap.stg", "diffHunk": "@@ -32,33 +32,92 @@ import org.eclipse.collections.api.tuple.primitive.<name>ObjectPair;\n  */\n public interface <name>ObjectMap\\<V> extends PrimitiveObjectMap\\<V>\n {\n+    /**\n+     * Retrieves the value associated with the key. If no mapping exists for the key,\n+     * {@code null} is returned.\n+     * @param key the key\n+     * @return the value associated with the key, or the default value if no such\n+     * mapping exists\n+     */\n     V get(<type> key);\n \n+    /**\n+     * Retrieves the value associated with the key if one exists; if it does not,\n+     * returns the result of invoking the value supplier.\n+     * @param key the key\n+     * @param function the supplier that provides the value if no mapping exists for {@code key}\n+     * @return the value associated with the key, if one exists, or the result of\n+     * invoking {@code ifAbsent} if not\n+     */\n     V getIfAbsent(<type> key, Function0\\<? extends V> ifAbsent);\n \n+    /**\n+     * Returns whether or not the key is present in the map.\n+     * @param key the key\n+     * @return if a mapping exists in this map for the key\n+     */\n     boolean containsKey(<type> key);\n \n     @Override\n     <name>ObjectMap\\<V> tap(Procedure\\<? super V> procedure);\n \n+    /**\n+     * Iterates through each key in the map, invoking the procedure for each.\n+     * @param procedure the procedure to invoke for each key\n+     */\n     void forEachKey(<name>Procedure procedure);\n \n+    /**\n+     * Iterates through each key/value pair in the map, invoking the procedure for each.\n+     * @param procedure the procedure to invoke for each key/value pair\n+     */\n     void forEachKeyValue(<name>ObjectProcedure\\<? super V> procedure);\n \n+    /**\n+     * Return a copy of this map containing only the key/value pairs that match the predicate.\n+     * @param predicate the predicate to determine which key/value pairs in this map should be\n+     * included in the returned map\n+     * @return a copy of this map with the matching key/value pairs\n+     */\n     <name>ObjectMap\\<V> select(<name>ObjectPredicate\\<? super V> predicate);\n \n+    /**\n+     * Return a copy of this map containing only the key/value pairs that do not match the\n+     * predicate.\n+     * @param predicate the predicate to determine which key/value pairs in this map should be\n+     * excluded from the returned map\n+     * @return a copy of this map without the matching key/value pairs\n+     */\n     <name>ObjectMap\\<V> reject(<name>ObjectPredicate\\<? super V> predicate);\n \n+    /**\n+     * Returns a copy of this map that is immutable (if this map is mutable) or\n+     * itself if it is already immutable.\n+     * @return an immutable map that is equivalent to this one\n+     */\n     Immutable<name>ObjectMap\\<V> toImmutable();\n \n+    /**\n+     * Returns a set containing all the keys in this map. The set is backed by the\n+     * map, so any modifications to the returned set will affect this map.\n+     * @return a mutable set containing the keys in this map\n+     */\n     Mutable<name>Set keySet();\n \n     /**\n+     * Returns a view of the keys in this map. This iterable is backed by the map, so\n+     * any modifications to the underlying map will be reflected in the keys returned", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80b5f01ee1fe63ef0bd325b22dbc52429e80cca3"}, "originalPosition": 78}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1Nzg1MTE1", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-425785115", "createdAt": "2020-06-07T03:57:59Z", "commit": {"oid": "80b5f01ee1fe63ef0bd325b22dbc52429e80cca3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QwMzo1Nzo1OVrOGgG_Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QwMzo1Nzo1OVrOGgG_Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMyMjE0Mw==", "bodyText": "This utility is awesome! May be if it is possible, can you contribute another utility which will move code to the template? It will be super useful to be able to write code in one of the primitive files and reverse engineer it to a template. It need not be fully polished and working, but should provide a starting point. Thoughts?", "url": "https://github.com/eclipse/eclipse-collections/pull/887#discussion_r436322143", "createdAt": "2020-06-07T03:57:59Z", "author": {"login": "nikhilnanivadekar"}, "path": "eclipse-collections-code-generator/src/test/java/org/eclipse/collections/codegenerator/tools/JavadocUtil.java", "diffHunk": "@@ -0,0 +1,206 @@\n+/*\n+ * Copyright (c) 2020 Goldman Sachs and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * and Eclipse Distribution License v. 1.0 which accompany this distribution.\n+ * The Eclipse Public License is available at http://www.eclipse.org/legal/epl-v10.html\n+ * and the Eclipse Distribution License is available at\n+ * http://www.eclipse.org/org/documents/edl-v10.php.\n+ */\n+\n+package org.eclipse.collections.codegenerator.tools;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Deque;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.ListIterator;\n+import java.util.regex.Pattern;\n+\n+import org.eclipse.collections.codegenerator.EclipseCollectionsCodeGenerator;\n+import org.eclipse.collections.codegenerator.model.Primitive;\n+\n+/**\n+ * <p>This class copies the Javadocs from a generated class back to the template.\n+ * This is helpful for writing the Javadocs on a \"real\" class to benefit from IDE\n+ * support (auto complete of parameter names, for example) that you don't get\n+ * when directly editing the template.</p>\n+ *\n+ * <p>This class is in the test classpath to keep it out of public API, but it is\n+ * not a test.</p>\n+ *\n+ * <p>This assumes it is running in the same folder as the code generator and the\n+ * API folder with the templates is a sibling folder. You can specify any number\n+ * of pairs of arguments, for example:\n+ * <blockquote><code>\n+ * org.eclipse.collections.api.map.primitive.IntValuesMap\n+ * api/map/primitiveValuesMap\n+ * org.eclipse.collections.api.map.primitive.CharIntMap\n+ * api/map/primitivePrimitiveMap\n+ * </code></blockquote>\n+ * </p>\n+ *\n+ * @author <a href=\"dimeo@elderresearch.com\">John Dimeo</a>\n+ * @since May 8, 2020\n+ */\n+public class JavadocUtil\n+{\n+    private static final Path TEMPLATE_ROOT = Paths.get(\"src\", \"main\", \"resources\");\n+    private static final Path API_ROOT = Paths.get(\"..\", \"eclipse-collections-api\");\n+\n+    private String generatedClass;\n+    private String template;\n+\n+    public JavadocUtil generatedClass(String gc)\n+    {\n+        this.generatedClass = gc;\n+        return this;\n+    }\n+\n+    public JavadocUtil template(String t)\n+    {\n+        this.template = t;\n+        return this;\n+    }\n+\n+    public void process() throws IOException\n+    {\n+        generatedClass = generatedClass.replace('.', File.separatorChar);\n+        if (!generatedClass.endsWith(\".java\"))\n+        {\n+            generatedClass += \".java\";\n+        }\n+        if (!template.endsWith(\".stg\"))\n+        {\n+            template  += \".stg\";\n+        }\n+\n+        Path src = API_ROOT.resolve(EclipseCollectionsCodeGenerator.GENERATED_SOURCES_LOCATION.replace('/', File.separatorChar) + generatedClass);\n+        Path dest = TEMPLATE_ROOT.resolve(template.replace('/', File.separatorChar));\n+\n+        if (!Files.isRegularFile(src) || !Files.isRegularFile(dest))\n+        {\n+            throw new IllegalArgumentException(\"Specified files are not readable\");\n+        }\n+\n+        List<String> srcLines = Files.readAllLines(src);\n+        List<String> destLines = Files.readAllLines(dest);\n+        Deque<String> javadocLines = new LinkedList<>();\n+\n+        boolean inJavadoc = false;\n+        boolean matchNextLine = false;\n+        for (String srcLine : srcLines)\n+        {\n+            String srcLineNorm = normalizeGeneratedClassLine(srcLine);\n+            String srcLineTrimmed = srcLineNorm.trim();\n+            if (srcLineTrimmed.isEmpty())\n+            {\n+                continue;\n+            }\n+\n+            // Annotations belong with the javadoc\n+            if (srcLineTrimmed.startsWith(\"@\"))\n+            {\n+                javadocLines.add(srcLineNorm);\n+                continue;\n+            }\n+\n+            if (matchNextLine)\n+            {\n+                findLineReplacingJavadoc(destLines, srcLineTrimmed, javadocLines);\n+                matchNextLine = false;\n+                continue;\n+            }\n+\n+            if (srcLineTrimmed.startsWith(\"/**\"))\n+            {\n+                inJavadoc = true;\n+                javadocLines.clear();\n+            }\n+            if (inJavadoc)\n+            {\n+                javadocLines.add(srcLineNorm);\n+                if (srcLineTrimmed.startsWith(\"*/\") || srcLineTrimmed.endsWith(\"*/\"))\n+                {\n+                    inJavadoc = false;\n+                    matchNextLine = true;\n+                }\n+            }\n+        }\n+\n+        Files.write(dest, destLines);\n+\n+        System.out.println(\"Copied Javadocs from \" + generatedClass + \" back to \" + template);\n+    }\n+\n+    private static void findLineReplacingJavadoc(List<String> lines, String matchLine, Deque<String> javadoc)\n+    {\n+        ListIterator<String> iter = lines.listIterator();\n+        while (iter.hasNext())\n+        {\n+            String line = normalizeTemplateLine(iter.next().trim());\n+            // Definitions aren't candidates for matches\n+            if (line.isEmpty() || line.contains(\"::=\"))\n+            {\n+                continue;\n+            }\n+\n+            if (line.equals(matchLine))\n+            {\n+                // Remove existing javadoc\n+                iter.previous();\n+                while (iter.hasPrevious()\n+                    && (line = iter.previous().trim()).startsWith(\"@\")\n+                    || line.startsWith(\"*/\")\n+                    || line.startsWith(\"*\")\n+                    || line.startsWith(\"/**\"))\n+                {\n+                    iter.remove();\n+                }\n+                iter.next();\n+                javadoc.forEach(iter::add);\n+                return;\n+            }\n+        }\n+        System.err.println(\"Could not match line \" + matchLine);\n+        return;\n+    }\n+\n+    // Remove all types and type placeholders so lines will exactly match\n+    private static String normalizeTemplateLine(String s)\n+    {\n+        s = s.replace(\"<type1>\", \"<type>\").replace(\"<type2>\", \"<type>\");\n+        s = s.replace(\"<name1>\", \"<name>\").replace(\"<name2>\", \"<name>\");\n+        // boolean is a common return value for is...() methods - normalize\n+        // it to match normalized lines from the generated class. Also remove \\\n+        return s.replace(\"boolean\", \"<type>\").replaceAll(Pattern.quote(\"\\\\\"), \"\");\n+    }\n+\n+    // TODO: Multiple types/names not properly supported\n+    private static String normalizeGeneratedClassLine(String s)\n+    {\n+        for (Primitive p : Primitive.values())\n+        {\n+            s = s.replace(p.type, \"<type>\").replace(p.getName(), \"<name>\");\n+        }\n+        // ... but \"interface\" gets erroneously replaced\n+        return s.replace(\"<type>erface\", \"interface\");\n+    }\n+\n+    public static void main(String... args) throws IOException\n+    {\n+        if (args.length < 2 || args.length % 2 > 0)\n+        {\n+            throw new IllegalArgumentException(\"You must specify pairs of file paths: a generated class followed by its template\");\n+        }\n+\n+        for (int i = 0; i < args.length; i += 2)\n+        {\n+            new JavadocUtil().generatedClass(args[i]).template(args[i + 1]).process();\n+        }\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80b5f01ee1fe63ef0bd325b22dbc52429e80cca3"}, "originalPosition": 206}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1Nzg1MTI2", "url": "https://github.com/eclipse/eclipse-collections/pull/887#pullrequestreview-425785126", "createdAt": "2020-06-07T03:58:17Z", "commit": {"oid": "80b5f01ee1fe63ef0bd325b22dbc52429e80cca3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 669, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}