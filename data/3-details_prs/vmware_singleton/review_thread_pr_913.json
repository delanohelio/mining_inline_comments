{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0MTAzNzc4", "number": 913, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNjo1NzoyOVrOFCJ9gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNjo1NzoyOVrOFCJ9gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3ODA0Njc0OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/vmware/vipclient/i18n/messages/api/opt/local/LocalMessagesOpt.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQwNjo1NzoyOVrOIBJ3dA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNzozMTozOVrOIBr2zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA4MTE0MA==", "bodyText": "Can \"/\" be suitable for all systems? Should it be FileSeparator?", "url": "https://github.com/vmware/singleton/pull/913#discussion_r538081140", "createdAt": "2020-12-08T06:57:29Z", "author": {"login": "huihuiw01"}, "path": "src/main/java/com/vmware/vipclient/i18n/messages/api/opt/local/LocalMessagesOpt.java", "diffHunk": "@@ -67,9 +67,11 @@ public void getComponentMessages(MessageCacheItem cacheItem) {\n \tprivate InputStream getInputStream() {\n \t\tString locale = LocaleUtility.fmtToMappedLocale(dto.getLocale()).toLanguageTag();\n \t\twhile (true) {\n-\t\t\tString filePath = FormatUtils.format(OFFLINE_RESOURCE_PATH, dto.getComponent(), locale);\n-\t\t\tPath path = Paths.get(VIPCfg.getInstance().getOfflineResourcesBaseUrl(), filePath);\n-\t\t\tInputStream is = Thread.currentThread().getContextClassLoader().getResourceAsStream(path.toString());\n+\t\t\tString offlineResourcePath = VIPCfg.getInstance().getOfflineResourcesBaseUrl();\n+\t\t\tif(!offlineResourcePath.endsWith(\"/\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e5e871b15351b59ead2feee67e5d04ac0ace8d7"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODYzODAzMQ==", "bodyText": "No, that is the root cause of the bug. If we use FileSeparator (same as Paths.get), then '' (backslash) will be used in Windows platform. However, the forward slash in jar is not platform dependent. Even if the application is run on a Windows platform, the jar files will still have forward slashes. The use of Paths.get (or FileSeparator) was causing the issue of not finding the message bundles.", "url": "https://github.com/vmware/singleton/pull/913#discussion_r538638031", "createdAt": "2020-12-08T17:31:39Z", "author": {"login": "jessiejuachon"}, "path": "src/main/java/com/vmware/vipclient/i18n/messages/api/opt/local/LocalMessagesOpt.java", "diffHunk": "@@ -67,9 +67,11 @@ public void getComponentMessages(MessageCacheItem cacheItem) {\n \tprivate InputStream getInputStream() {\n \t\tString locale = LocaleUtility.fmtToMappedLocale(dto.getLocale()).toLanguageTag();\n \t\twhile (true) {\n-\t\t\tString filePath = FormatUtils.format(OFFLINE_RESOURCE_PATH, dto.getComponent(), locale);\n-\t\t\tPath path = Paths.get(VIPCfg.getInstance().getOfflineResourcesBaseUrl(), filePath);\n-\t\t\tInputStream is = Thread.currentThread().getContextClassLoader().getResourceAsStream(path.toString());\n+\t\t\tString offlineResourcePath = VIPCfg.getInstance().getOfflineResourcesBaseUrl();\n+\t\t\tif(!offlineResourcePath.endsWith(\"/\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODA4MTE0MA=="}, "originalCommit": {"oid": "6e5e871b15351b59ead2feee67e5d04ac0ace8d7"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4419, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}