{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MTMxMTc5", "number": 549, "title": "\"scopeFilter\" return wrong data in getPattern APIs #545", "bodyText": "fix issue:\n\"scopeFilter\" return wrong data in getPattern APIs #545\nConfuse description for scopeFilter in getPattern APIs #546", "createdAt": "2020-05-13T05:44:10Z", "url": "https://github.com/vmware/singleton/pull/549", "merged": true, "mergeCommit": {"oid": "c48f025717bc50b932de3a68c947e14100ec0e19"}, "closed": true, "closedAt": "2020-05-21T03:27:20Z", "author": {"login": "chaoq0318"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYHT7ZAH2gAyNDE3MTMxMTc5OmFiODQ3NDBjOWI2Yzk0MzBmYmVkMTczYjBhZTk2M2NjNjI5MzJkN2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjVDuBAFqTQxNTg1NDM3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ab84740c9b6c9430fbed173b0ae963cc62932d7d", "author": {"user": {"login": "chaoq0318", "name": "chaoq"}}, "url": "https://github.com/vmware/singleton/commit/ab84740c9b6c9430fbed173b0ae963cc62932d7d", "committedDate": "2020-04-16T07:11:22Z", "message": " Add a new query parameter scopeFilter to the pattern API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dea6d29146c43096b956fc991aec96b851a27608", "author": {"user": {"login": "chaoq0318", "name": "chaoq"}}, "url": "https://github.com/vmware/singleton/commit/dea6d29146c43096b956fc991aec96b851a27608", "committedDate": "2020-04-20T02:11:27Z", "message": "fix comment: grammar error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "585be5a264a897e40b4ff5c434b53c1ca1f00e1e", "author": {"user": {"login": "chaoq0318", "name": "chaoq"}}, "url": "https://github.com/vmware/singleton/commit/585be5a264a897e40b4ff5c434b53c1ca1f00e1e", "committedDate": "2020-04-20T02:19:19Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ac143eaae77141795637472d30aa8797c570f1d", "author": {"user": {"login": "chaoq0318", "name": "chaoq"}}, "url": "https://github.com/vmware/singleton/commit/6ac143eaae77141795637472d30aa8797c570f1d", "committedDate": "2020-04-28T06:29:31Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17c3aade7039a525d88125d4f85352ab3369c684", "author": {"user": {"login": "chaoq0318", "name": "chaoq"}}, "url": "https://github.com/vmware/singleton/commit/17c3aade7039a525d88125d4f85352ab3369c684", "committedDate": "2020-05-13T05:13:46Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf1ac7a2fefe634b41d06df28df94e64efc09c3e", "author": {"user": {"login": "chaoq0318", "name": "chaoq"}}, "url": "https://github.com/vmware/singleton/commit/cf1ac7a2fefe634b41d06df28df94e64efc09c3e", "committedDate": "2020-05-13T05:22:55Z", "message": "\"scopeFilter\" return wrong data in getPattern APIs(#545)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecb3236f9aae6dda9b05fe7baeeb7e8b5016b6bf", "author": {"user": {"login": "chaoq0318", "name": "chaoq"}}, "url": "https://github.com/vmware/singleton/commit/ecb3236f9aae6dda9b05fe7baeeb7e8b5016b6bf", "committedDate": "2020-05-13T05:28:25Z", "message": "Confuse description for scopeFilter in getPattern APIs(#546)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjExMzI0", "url": "https://github.com/vmware/singleton/pull/549#pullrequestreview-411611324", "createdAt": "2020-05-14T09:10:36Z", "commit": {"oid": "ecb3236f9aae6dda9b05fe7baeeb7e8b5016b6bf"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMzEyMTk5", "url": "https://github.com/vmware/singleton/pull/549#pullrequestreview-413312199", "createdAt": "2020-05-18T06:51:02Z", "commit": {"oid": "ecb3236f9aae6dda9b05fe7baeeb7e8b5016b6bf"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwNjo1MTowMlrOGWpjRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwNzowNToyNFrOGWp7KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjQwMjYzMA==", "bodyText": "Is it more convenient to filter data when get categorie\u2018s data?", "url": "https://github.com/vmware/singleton/pull/549#discussion_r426402630", "createdAt": "2020-05-18T06:51:02Z", "author": {"login": "huihuiw01"}, "path": "g11n-ws/modules/md-service-i18n-l2/src/main/java/com/vmware/i18n/l2/service/pattern/PatternServiceImpl.java", "diffHunk": "@@ -240,10 +240,23 @@ private void filterScope(Map<String, Object> patternMap, String scopeFilter) {\n \t\t\treturn;\n \t\t}\n \n-\t\tArrays.asList(scopeFilter.split(ConstantsChar.COMMA)).stream().forEach(scopeNode -> {\n-\t\t\tList<String> scopeFilters = Arrays.asList(scopeNode.split(ConstantsChar.UNDERLINE));\n-\t\t\tremoveData(patternMap, scopeFilters, 0);\n-\t\t});\n+\t\t// If scopeFilter starts with ^, it means deleting the data under the node", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecb3236f9aae6dda9b05fe7baeeb7e8b5016b6bf"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjQwMzUxNg==", "bodyText": "What's the usage of 'scopeFilter'?\nIs it possible to have such value: currency_CNY, measurements_volume-liter, ^(dates_dateTimeFormats_intervalFormats )?\nIf yes, looks like the logic doesn't handle this.", "url": "https://github.com/vmware/singleton/pull/549#discussion_r426403516", "createdAt": "2020-05-18T06:53:08Z", "author": {"login": "huihuiw01"}, "path": "g11n-ws/modules/md-service-i18n-l2/src/main/java/com/vmware/i18n/l2/service/pattern/PatternServiceImpl.java", "diffHunk": "@@ -240,10 +240,23 @@ private void filterScope(Map<String, Object> patternMap, String scopeFilter) {\n \t\t\treturn;\n \t\t}\n \n-\t\tArrays.asList(scopeFilter.split(ConstantsChar.COMMA)).stream().forEach(scopeNode -> {\n-\t\t\tList<String> scopeFilters = Arrays.asList(scopeNode.split(ConstantsChar.UNDERLINE));\n-\t\t\tremoveData(patternMap, scopeFilters, 0);\n-\t\t});\n+\t\t// If scopeFilter starts with ^, it means deleting the data under the node\n+\t\tif (scopeFilter.startsWith(ConstantsChar.REVERSE)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecb3236f9aae6dda9b05fe7baeeb7e8b5016b6bf"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjQwODc0NA==", "bodyText": "scope filter should be 'scopeFilter'", "url": "https://github.com/vmware/singleton/pull/549#discussion_r426408744", "createdAt": "2020-05-18T07:05:24Z", "author": {"login": "huihuiw01"}, "path": "g11n-ws/vip-common/src/main/java/com/vmware/vip/common/constants/ConstantsMsg.java", "diffHunk": "@@ -27,6 +27,7 @@\n    public static final String PARAM_NOT_VALIDATE = \"The parameter is not pass the validate\";\n    public static final String PATTERN_NOT_VALIDATE = \"The request pattern name is invalid\";\n    public static final String FIFE_NOT_FOUND= \"File is not existing\";\n+   public static final String SCOPE_FILTER_NOT_VALIDATE = \"The request parameter scope filter is invalid, only one filtering method is supported\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecb3236f9aae6dda9b05fe7baeeb7e8b5016b6bf"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b97bf991ebae2ab96c7c066bfb43fa376adcbd46", "author": {"user": {"login": "chaoq0318", "name": "chaoq"}}, "url": "https://github.com/vmware/singleton/commit/b97bf991ebae2ab96c7c066bfb43fa376adcbd46", "committedDate": "2020-05-18T09:02:44Z", "message": "fix comment:scope filter should be \"scopeFilter\""}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1MTkxMzA2", "url": "https://github.com/vmware/singleton/pull/549#pullrequestreview-415191306", "createdAt": "2020-05-20T10:17:09Z", "commit": {"oid": "b97bf991ebae2ab96c7c066bfb43fa376adcbd46"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4113b653e65f2c25a1ca9ee76663d44b442e341c", "author": {"user": {"login": "chaoq0318", "name": "chaoq"}}, "url": "https://github.com/vmware/singleton/commit/4113b653e65f2c25a1ca9ee76663d44b442e341c", "committedDate": "2020-05-21T02:01:30Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1ODU0Mzc0", "url": "https://github.com/vmware/singleton/pull/549#pullrequestreview-415854374", "createdAt": "2020-05-21T03:25:30Z", "commit": {"oid": "4113b653e65f2c25a1ca9ee76663d44b442e341c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4371, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}