{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2NDY3MTI0", "number": 713, "title": "Getting from service when source is unavailable", "bodyText": "", "createdAt": "2020-08-12T02:30:19Z", "url": "https://github.com/vmware/singleton/pull/713", "merged": true, "mergeCommit": {"oid": "93ab269414f7f8750b85f7be16d931c4462720ae"}, "closed": true, "closedAt": "2020-08-12T06:36:57Z", "author": {"login": "Xiaochao8"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-B_yhAH2gAyNDY2NDY3MTI0OjQ2NGY3ZGM2YmQ1ZjAwNjJhNDRhOTQwYWRiZDI3MjU4MWU2ODJlOWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-DOwOgFqTQ2NTU3MzM3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "464f7dc6bd5f0062a44a940adbd272581e682e9b", "author": {"user": {"login": "Xiaochao8", "name": "Xiaochao Li"}}, "url": "https://github.com/vmware/singleton/commit/464f7dc6bd5f0062a44a940adbd272581e682e9b", "committedDate": "2020-08-12T02:28:58Z", "message": "Add getStringWithoutSource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NTU1NTI4", "url": "https://github.com/vmware/singleton/pull/713#pullrequestreview-465555528", "createdAt": "2020-08-12T02:48:15Z", "commit": {"oid": "464f7dc6bd5f0062a44a940adbd272581e682e9b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NTYyOTUw", "url": "https://github.com/vmware/singleton/pull/713#pullrequestreview-465562950", "createdAt": "2020-08-12T03:14:58Z", "commit": {"oid": "464f7dc6bd5f0062a44a940adbd272581e682e9b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwMzoxNDo1OFrOG_QSxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwMzoxNDo1OFrOG_QSxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODk4MDQyMw==", "bodyText": "How about move these codes to a new private method: getStringWithSource\nPlease try to combine common codes of getStringWithSource and getStringWithoutSource, i think there are some duplicated codes", "url": "https://github.com/vmware/singleton/pull/713#discussion_r468980423", "createdAt": "2020-08-12T03:14:58Z", "author": {"login": "linr211"}, "path": "src/main/java/com/vmware/vipclient/i18n/base/instances/TranslationMessage.java", "diffHunk": "@@ -167,7 +221,7 @@ private String getStringWithArgs(final Locale locale,\n                     translation = FormatUtils.formatMsg(translation,\n                             LocaleUtility.defaultLocale, (Map<String, Object>) args);\n                 } else {\n-                    translation = FormatUtils.formatMsg(translation, locale, (Map) args);\n+                    translation = FormatUtils.formatMsg(translation, locale, (Map<String, Object>) args);\n                 }\n             }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "464f7dc6bd5f0062a44a940adbd272581e682e9b"}, "originalPosition": 96}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fd020c0ce589f8da4fb2503350253f1ca056029", "author": {"user": {"login": "Xiaochao8", "name": "Xiaochao Li"}}, "url": "https://github.com/vmware/singleton/commit/3fd020c0ce589f8da4fb2503350253f1ca056029", "committedDate": "2020-08-12T03:16:58Z", "message": "Don't consider pseudo because source is empty"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b426180a34650eafdea8daa4c166a0823a91a34f", "author": {"user": {"login": "Xiaochao8", "name": "Xiaochao Li"}}, "url": "https://github.com/vmware/singleton/commit/b426180a34650eafdea8daa4c166a0823a91a34f", "committedDate": "2020-08-12T03:22:50Z", "message": "Revert unnecessary change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a132ffad2740256baf4f16a3cb18d3df54839a34", "author": {"user": {"login": "Xiaochao8", "name": "Xiaochao Li"}}, "url": "https://github.com/vmware/singleton/commit/a132ffad2740256baf4f16a3cb18d3df54839a34", "committedDate": "2020-08-12T03:26:37Z", "message": "Add comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64cdc454aae355cbd240a5f0013bee76c3aefec0", "author": {"user": {"login": "Xiaochao8", "name": "Xiaochao Li"}}, "url": "https://github.com/vmware/singleton/commit/64cdc454aae355cbd240a5f0013bee76c3aefec0", "committedDate": "2020-08-12T03:36:42Z", "message": "Add getStringWithSource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa4b48efd8db785859eb085e34dee94d1da99647", "author": {"user": {"login": "Xiaochao8", "name": "Xiaochao Li"}}, "url": "https://github.com/vmware/singleton/commit/fa4b48efd8db785859eb085e34dee94d1da99647", "committedDate": "2020-08-12T03:38:51Z", "message": "Minor change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26fc7ee44f02ec5b015df2dbbb3c3979ad3b88ec", "author": {"user": {"login": "Xiaochao8", "name": "Xiaochao Li"}}, "url": "https://github.com/vmware/singleton/commit/26fc7ee44f02ec5b015df2dbbb3c3979ad3b88ec", "committedDate": "2020-08-12T03:41:27Z", "message": "Fix bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba83d68c48116d3261fc27f83aa527fbb55e5408", "author": {"user": {"login": "Xiaochao8", "name": "Xiaochao Li"}}, "url": "https://github.com/vmware/singleton/commit/ba83d68c48116d3261fc27f83aa527fbb55e5408", "committedDate": "2020-08-12T03:43:23Z", "message": "Minor change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NTcyNzA0", "url": "https://github.com/vmware/singleton/pull/713#pullrequestreview-465572704", "createdAt": "2020-08-12T03:51:16Z", "commit": {"oid": "ba83d68c48116d3261fc27f83aa527fbb55e5408"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NTczMzc5", "url": "https://github.com/vmware/singleton/pull/713#pullrequestreview-465573379", "createdAt": "2020-08-12T03:53:50Z", "commit": {"oid": "ba83d68c48116d3261fc27f83aa527fbb55e5408"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwMzo1Mzo1MFrOG_Q3Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwMzo1Mzo1MFrOG_Q3Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODk4OTc3NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (StringUtil.isEmpty(translation)) {\n          \n          \n            \n                        return \"\";\n          \n          \n            \n                    }\n          \n          \n            \n            \n          \n          \n            \n                    if (args != null) {\n          \n          \n            \n                    if (!StringUtil.isEmpty(translation) && args != null) {", "url": "https://github.com/vmware/singleton/pull/713#discussion_r468989775", "createdAt": "2020-08-12T03:53:50Z", "author": {"login": "jessiejuachon"}, "path": "src/main/java/com/vmware/vipclient/i18n/base/instances/TranslationMessage.java", "diffHunk": "@@ -175,6 +189,24 @@ private String getStringWithArgs(final Locale locale,\n         return translation;\n     }\n \n+    private String getStringWithoutSource(MessagesDTO dto, final Object args) {\n+        Locale locale = Locale.forLanguageTag(dto.getLocale());\n+        String translation = new StringService(dto).getString();\n+        if (StringUtil.isEmpty(translation)) {\n+            return \"\";\n+        }\n+\n+        if (args != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba83d68c48116d3261fc27f83aa527fbb55e5408"}, "originalPosition": 54}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4269, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}