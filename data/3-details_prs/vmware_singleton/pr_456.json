{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4OTg5Nzc2", "number": 456, "title": "add parameter verification for get translation with pattern API", "bodyText": "", "createdAt": "2020-03-16T05:02:23Z", "url": "https://github.com/vmware/singleton/pull/456", "merged": true, "mergeCommit": {"oid": "c991168b79c03e350bfa6e2b27a5358e212ed245"}, "closed": true, "closedAt": "2020-03-19T12:55:00Z", "author": {"login": "tigershi"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH9bZQgH2gAyMzg4OTg5Nzc2OjQ1OTZjYTdlMDA2ZDI3ZTIzYzI2N2Q3ZTAzYjlkYjFjMDhlYzAxOGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPKZXPAFqTM3NzY0MTYxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4596ca7e006d27e23c267d7e03b9db1c08ec018f", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/4596ca7e006d27e23c267d7e03b9db1c08ec018f", "committedDate": "2020-02-26T02:37:41Z", "message": "add and format the version fallback APIs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "061c835dea17a65f9951a5bf77606b206d1c9b41", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/061c835dea17a65f9951a5bf77606b206d1c9b41", "committedDate": "2020-02-26T07:07:39Z", "message": "update the bug of version fallback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6443a0b37304cca42b0309c997461fd7850f1066", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/6443a0b37304cca42b0309c997461fd7850f1066", "committedDate": "2020-03-04T07:02:29Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b427f7077007a8f5b388da54a75c2c8ca5048439", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/b427f7077007a8f5b388da54a75c2c8ca5048439", "committedDate": "2020-03-04T10:17:15Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa519d432220423f9ea23d2ed5f8b9c030c45e8c", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/fa519d432220423f9ea23d2ed5f8b9c030c45e8c", "committedDate": "2020-03-04T10:39:46Z", "message": "add support languager version fallback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aabccda0c997a31b570c686fc22584c698d2e93c", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/aabccda0c997a31b570c686fc22584c698d2e93c", "committedDate": "2020-03-05T07:21:13Z", "message": "add the unit test for version fallback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71843b50f42576845956b8370e367ce320a7efde", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/71843b50f42576845956b8370e367ce320a7efde", "committedDate": "2020-03-05T09:00:23Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe96fd7227b2e529c6965e39bd543433c47dee3d", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/fe96fd7227b2e529c6965e39bd543433c47dee3d", "committedDate": "2020-03-09T08:51:27Z", "message": "fixed the comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffea6c114cf4c561fec9e60093fd5c31614a9f34", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/ffea6c114cf4c561fec9e60093fd5c31614a9f34", "committedDate": "2020-03-09T09:03:38Z", "message": "fixed the comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afaeb215805b29774a4da9f01b4e79f778ea65d9", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/afaeb215805b29774a4da9f01b4e79f778ea65d9", "committedDate": "2020-03-10T01:24:35Z", "message": "fixed the comment of the colin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c179a31b5029d60f5144ae5fd3b713403be072bf", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/c179a31b5029d60f5144ae5fd3b713403be072bf", "committedDate": "2020-03-10T10:46:10Z", "message": "Miss copyright and license headers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0d390f925fa0bc9d60809408d82c0d494b637ca", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/d0d390f925fa0bc9d60809408d82c0d494b637ca", "committedDate": "2020-03-10T11:12:45Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d682f53993f10d3f7e3a6f0f0816e0d160fc43a", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/1d682f53993f10d3f7e3a6f0f0816e0d160fc43a", "committedDate": "2020-03-11T01:59:50Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b612e7b05721d299951e3d6fc739d511a4db4c3f", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/b612e7b05721d299951e3d6fc739d511a4db4c3f", "committedDate": "2020-03-16T03:59:30Z", "message": "add the validate for get translation and pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6dce6df105fedb70301f2fb8c65e37d8ed301a75", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/6dce6df105fedb70301f2fb8c65e37d8ed301a75", "committedDate": "2020-03-16T05:03:16Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0OTY1NTEx", "url": "https://github.com/vmware/singleton/pull/456#pullrequestreview-374965511", "createdAt": "2020-03-16T07:24:39Z", "commit": {"oid": "6dce6df105fedb70301f2fb8c65e37d8ed301a75"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1ODM1MTI2", "url": "https://github.com/vmware/singleton/pull/456#pullrequestreview-375835126", "createdAt": "2020-03-17T08:46:17Z", "commit": {"oid": "6dce6df105fedb70301f2fb8c65e37d8ed301a75"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwODo0NjoxN1rOF3Sm9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwODo0NjoxN1rOF3Sm9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzUyMDg4NQ==", "bodyText": "Don't use RuntimeException, it will cause thread exit.", "url": "https://github.com/vmware/singleton/pull/456#discussion_r393520885", "createdAt": "2020-03-17T08:46:17Z", "author": {"login": "linr211"}, "path": "g11n-ws/modules/md-restful-api-i18n/src/main/java/com/vmware/vip/i18n/api/base/TranslationWithPatternAction.java", "diffHunk": "@@ -51,6 +52,12 @@\n \t    */\n \t   public APIResponseDTO getTransPattern(TranslationWithPatternDTO data) throws Exception {\n \t      logger.info(\"begin getTransPattern\");\n+\t      try {\n+\t    \t  ParameterValidationUtility.validateTranslationWithPatternAPI(data);\n+\t      }catch(RuntimeException excep) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6dce6df105fedb70301f2fb8c65e37d8ed301a75"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82184100744be4207fa48621c32baf4d5bf478bc", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/82184100744be4207fa48621c32baf4d5bf478bc", "committedDate": "2020-03-18T06:46:22Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NjAyODA0", "url": "https://github.com/vmware/singleton/pull/456#pullrequestreview-376602804", "createdAt": "2020-03-18T06:57:34Z", "commit": {"oid": "69ff42f6d8bd930b7f77d00bb51269bc52ac0081"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2Njg4MDgw", "url": "https://github.com/vmware/singleton/pull/456#pullrequestreview-376688080", "createdAt": "2020-03-18T09:25:14Z", "commit": {"oid": "69ff42f6d8bd930b7f77d00bb51269bc52ac0081"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwOToyNToxNVrOF38c8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwOToyNjowNVrOF38fCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIwNjQ1MA==", "bodyText": "put the validation in 'validate' function\ndon't need the catch since the function will throw it.", "url": "https://github.com/vmware/singleton/pull/456#discussion_r394206450", "createdAt": "2020-03-18T09:25:15Z", "author": {"login": "linr211"}, "path": "g11n-ws/modules/md-restful-api-i18n/src/main/java/com/vmware/vip/i18n/api/base/TranslationWithPatternAction.java", "diffHunk": "@@ -51,6 +53,12 @@\n \t    */\n \t   public APIResponseDTO getTransPattern(TranslationWithPatternDTO data) throws Exception {\n \t      logger.info(\"begin getTransPattern\");\n+\t      try {\n+\t    \t  ParameterValidationUtility.validateTranslationWithPatternAPI(data);\n+\t      }catch(VIPAPIException excep) {\n+\t    \t  return super.handleResponse(APIResponseStatus.BAD_REQUEST.getCode(),\n+\t    \t\t\t  excep.getMessage(), null);\n+\t      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69ff42f6d8bd930b7f77d00bb51269bc52ac0081"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIwNjk4Ng==", "bodyText": "remove 'private ParameterValidationUtility() {}', it's not required.", "url": "https://github.com/vmware/singleton/pull/456#discussion_r394206986", "createdAt": "2020-03-18T09:26:05Z", "author": {"login": "linr211"}, "path": "g11n-ws/modules/md-restful-api-i18n/src/main/java/com/vmware/vip/i18n/api/base/utils/ParameterValidationUtility.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Copyright 2019 VMware, Inc.\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package com.vmware.vip.i18n.api.base.utils;\n+\n+\n+import org.apache.commons.lang3.StringUtils;\n+import com.vmware.vip.common.constants.ValidationMsg;\n+import com.vmware.vip.common.exceptions.VIPAPIException;\n+import com.vmware.vip.common.i18n.dto.TranslationWithPatternDTO;\n+import com.vmware.vip.common.utils.RegExpValidatorUtils;\n+\n+public class ParameterValidationUtility{\n+\tprivate ParameterValidationUtility() {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69ff42f6d8bd930b7f77d00bb51269bc52ac0081"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e5feec50643be5fd9fcce9bd823d5e1bf2a0749", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/5e5feec50643be5fd9fcce9bd823d5e1bf2a0749", "committedDate": "2020-03-19T02:07:20Z", "message": "fixed the comment of the validate parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c881bb76eee0f154f4dff52b1f601fb77c265ddc", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/c881bb76eee0f154f4dff52b1f601fb77c265ddc", "committedDate": "2020-03-19T03:54:39Z", "message": "fixed the comment of the validate parameters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NjMwMDIz", "url": "https://github.com/vmware/singleton/pull/456#pullrequestreview-377630023", "createdAt": "2020-03-19T11:23:40Z", "commit": {"oid": "c881bb76eee0f154f4dff52b1f601fb77c265ddc"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMToyMzo0MFrOF4qOCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMToyMzo0MFrOF4qOCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk1NjI5OA==", "bodyText": "Is this duplicate validation because there has already called validate in TranslationWithPatternAction.java ?", "url": "https://github.com/vmware/singleton/pull/456#discussion_r394956298", "createdAt": "2020-03-19T11:23:40Z", "author": {"login": "Xiaochao8"}, "path": "g11n-ws/modules/md-service-authen/src/main/java/com/vmware/vip/core/validation/ParameterValidation.java", "diffHunk": "@@ -34,6 +33,7 @@ public void validate() throws ValidationException {\n \t\tvalidateComponent(request);\n \t\tvalidateKey(request);\n \t\tvalidateLocale(request);\n+\t\tvalidateLanguage(request);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c881bb76eee0f154f4dff52b1f601fb77c265ddc"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NjM2MDA5", "url": "https://github.com/vmware/singleton/pull/456#pullrequestreview-377636009", "createdAt": "2020-03-19T11:33:04Z", "commit": {"oid": "c881bb76eee0f154f4dff52b1f601fb77c265ddc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NjQxNjE2", "url": "https://github.com/vmware/singleton/pull/456#pullrequestreview-377641616", "createdAt": "2020-03-19T11:41:41Z", "commit": {"oid": "c881bb76eee0f154f4dff52b1f601fb77c265ddc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMTo0MTo0MlrOF4qyDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxMTo0MTo0MlrOF4qyDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2NTUxOQ==", "bodyText": "How about change validate throwing VIPAPIException for other conditions to unify the process?", "url": "https://github.com/vmware/singleton/pull/456#discussion_r394965519", "createdAt": "2020-03-19T11:41:42Z", "author": {"login": "Xiaochao8"}, "path": "g11n-ws/modules/md-restful-api-i18n/src/main/java/com/vmware/vip/i18n/api/base/TranslationWithPatternAction.java", "diffHunk": "@@ -51,7 +53,14 @@\n \t    */\n \t   public APIResponseDTO getTransPattern(TranslationWithPatternDTO data) throws Exception {\n \t      logger.info(\"begin getTransPattern\");\n-\t      if (validate(data)) {\n+\t      boolean validateResult;\n+\t      try {\n+\t    \t  validateResult = validate(data);\n+\t      }catch(VIPAPIException excep) {\n+\t    \t  return super.handleResponse(APIResponseStatus.BAD_REQUEST.getCode(),\n+\t    \t\t\t  excep.getMessage(), null);\n+\t      }\n+\t      if (validateResult) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c881bb76eee0f154f4dff52b1f601fb77c265ddc"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4320, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}