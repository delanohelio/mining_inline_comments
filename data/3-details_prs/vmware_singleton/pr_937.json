{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1NTA0MDYw", "number": 937, "title": "fix version api bugs: 933, 935", "bodyText": "#933\n#935", "createdAt": "2020-12-25T03:19:16Z", "url": "https://github.com/vmware/singleton/pull/937", "merged": true, "mergeCommit": {"oid": "9d15ab43cdf36e198fae1f1b76fbf625796869ad"}, "closed": true, "closedAt": "2021-01-15T01:22:43Z", "author": {"login": "huihuiw01"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdpfe9OAH2gAyNTQ1NTA0MDYwOjMwOGMzZjc1MmJkNTcwYjg1ZThiMjZlZjMwM2YzNmEzZjM0YWQyNDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdwOW4mAH2gAyNTQ1NTA0MDYwOjZjMDg0ZDZjNTEyNWI1MDY1YjM5NjcyZGZjMmUwMTkxMDA1MGExNzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "308c3f752bd570b85e8b26ef303f36a3f34ad244", "author": {"user": {"login": "huihuiw01", "name": null}}, "url": "https://github.com/vmware/singleton/commit/308c3f752bd570b85e8b26ef303f36a3f34ad244", "committedDate": "2020-12-25T03:09:00Z", "message": "fix bug 933: Service name should be singleton-i18n-manager instead of vip-i18n-manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f03ea285ca3b582d9844bc4a91c42e923b930556", "author": {"user": {"login": "huihuiw01", "name": null}}, "url": "https://github.com/vmware/singleton/commit/f03ea285ca3b582d9844bc4a91c42e923b930556", "committedDate": "2020-12-25T03:10:02Z", "message": "fix bug 935: Bundle version fallback doesn't work"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0MTI3ODE1", "url": "https://github.com/vmware/singleton/pull/937#pullrequestreview-564127815", "createdAt": "2021-01-08T09:46:17Z", "commit": {"oid": "3d895b79ec9bd931c9c08af27861454b67546472"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0MTI4Nzc5", "url": "https://github.com/vmware/singleton/pull/937#pullrequestreview-564128779", "createdAt": "2021-01-08T09:47:41Z", "commit": {"oid": "3d895b79ec9bd931c9c08af27861454b67546472"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d895b79ec9bd931c9c08af27861454b67546472", "author": {"user": {"login": "huihuiw01", "name": null}}, "url": "https://github.com/vmware/singleton/commit/3d895b79ec9bd931c9c08af27861454b67546472", "committedDate": "2020-12-25T03:11:04Z", "message": "fix bug 934: Singleton service version info isn't loaded when requesting unsupported product/version in about API"}, "afterCommit": {"oid": "f03ea285ca3b582d9844bc4a91c42e923b930556", "author": {"user": {"login": "huihuiw01", "name": null}}, "url": "https://github.com/vmware/singleton/commit/f03ea285ca3b582d9844bc4a91c42e923b930556", "committedDate": "2020-12-25T03:10:02Z", "message": "fix bug 935: Bundle version fallback doesn't work"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3MDk2NDU5", "url": "https://github.com/vmware/singleton/pull/937#pullrequestreview-567096459", "createdAt": "2021-01-13T10:43:00Z", "commit": {"oid": "f03ea285ca3b582d9844bc4a91c42e923b930556"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3ODEyMzM3", "url": "https://github.com/vmware/singleton/pull/937#pullrequestreview-567812337", "createdAt": "2021-01-14T02:42:07Z", "commit": {"oid": "f03ea285ca3b582d9844bc4a91c42e923b930556"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNFQwMjo0MjowN1rOITNEOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNFQwMjo0MjowN1rOITNEOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzAwNzkyOQ==", "bodyText": "In this block, there must be this case: either productname or version is empty. How to get build version in this case?", "url": "https://github.com/vmware/singleton/pull/937#discussion_r557007929", "createdAt": "2021-01-14T02:42:07Z", "author": {"login": "Xiaochao8"}, "path": "g11n-ws/modules/md-restful-api-i18n/src/main/java/com/vmware/vip/i18n/api/v2/about/AboutVersionAPI.java", "diffHunk": "@@ -44,6 +45,11 @@\n     public APIResponseDTO getVersionInfo(\n             @ApiParam(name = APIParamName.PRODUCT_NAME, required = false, value = APIParamValue.PRODUCT_NAME) @RequestParam(required = false) String productName,\n             @ApiParam(name = APIParamName.VERSION, required = false, value = APIParamValue.VERSION) @RequestParam(required = false) String version) throws AboutAPIException {\n-        return super.handleResponse(APIResponseStatus.OK, versionService.getBuildVersion(productName, version));\n+        if(!StringUtils.isEmpty(productName) && !StringUtils.isEmpty(version)) {\n+            String availableVersion = super.getAvailableVersion(productName, version);\n+            return super.handleVersionFallbackResponse(version, availableVersion, versionService.getBuildVersion(productName, availableVersion));\n+        }else{\n+            return super.handleResponse(APIResponseStatus.OK, versionService.getBuildVersion(productName, version));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f03ea285ca3b582d9844bc4a91c42e923b930556"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7638d41b17c5ba569ffea327f0dc16013d1b777", "author": {"user": {"login": "huihuiw01", "name": null}}, "url": "https://github.com/vmware/singleton/commit/b7638d41b17c5ba569ffea327f0dc16013d1b777", "committedDate": "2021-01-14T10:35:53Z", "message": "change according to review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY4MTkyMzQz", "url": "https://github.com/vmware/singleton/pull/937#pullrequestreview-568192343", "createdAt": "2021-01-14T12:36:49Z", "commit": {"oid": "b7638d41b17c5ba569ffea327f0dc16013d1b777"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY4MjU3OTk3", "url": "https://github.com/vmware/singleton/pull/937#pullrequestreview-568257997", "createdAt": "2021-01-14T14:00:42Z", "commit": {"oid": "b7638d41b17c5ba569ffea327f0dc16013d1b777"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c084d6c5125b5065b39672dfc2e01910050a171", "author": {"user": {"login": "huihuiw01", "name": null}}, "url": "https://github.com/vmware/singleton/commit/6c084d6c5125b5065b39672dfc2e01910050a171", "committedDate": "2021-01-15T01:09:16Z", "message": "Merge branch 'master' into master_fixVersionAPIBugs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4191, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}