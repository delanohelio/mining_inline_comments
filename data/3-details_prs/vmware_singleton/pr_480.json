{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzOTk4NTI2", "number": 480, "title": "add new validate for singleton service", "bodyText": "", "createdAt": "2020-03-26T07:20:39Z", "url": "https://github.com/vmware/singleton/pull/480", "merged": true, "mergeCommit": {"oid": "cf9838b983010c39e246a15e2ece2e2f9ad76c46"}, "closed": true, "closedAt": "2020-03-26T09:34:46Z", "author": {"login": "tigershi"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH9bZQgH2gAyMzkzOTk4NTI2OjQ1OTZjYTdlMDA2ZDI3ZTIzYzI2N2Q3ZTAzYjlkYjFjMDhlYzAxOGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRYDwQgFqTM4MTc5ODEwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4596ca7e006d27e23c267d7e03b9db1c08ec018f", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/4596ca7e006d27e23c267d7e03b9db1c08ec018f", "committedDate": "2020-02-26T02:37:41Z", "message": "add and format the version fallback APIs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "061c835dea17a65f9951a5bf77606b206d1c9b41", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/061c835dea17a65f9951a5bf77606b206d1c9b41", "committedDate": "2020-02-26T07:07:39Z", "message": "update the bug of version fallback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6443a0b37304cca42b0309c997461fd7850f1066", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/6443a0b37304cca42b0309c997461fd7850f1066", "committedDate": "2020-03-04T07:02:29Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b427f7077007a8f5b388da54a75c2c8ca5048439", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/b427f7077007a8f5b388da54a75c2c8ca5048439", "committedDate": "2020-03-04T10:17:15Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa519d432220423f9ea23d2ed5f8b9c030c45e8c", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/fa519d432220423f9ea23d2ed5f8b9c030c45e8c", "committedDate": "2020-03-04T10:39:46Z", "message": "add support languager version fallback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aabccda0c997a31b570c686fc22584c698d2e93c", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/aabccda0c997a31b570c686fc22584c698d2e93c", "committedDate": "2020-03-05T07:21:13Z", "message": "add the unit test for version fallback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71843b50f42576845956b8370e367ce320a7efde", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/71843b50f42576845956b8370e367ce320a7efde", "committedDate": "2020-03-05T09:00:23Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe96fd7227b2e529c6965e39bd543433c47dee3d", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/fe96fd7227b2e529c6965e39bd543433c47dee3d", "committedDate": "2020-03-09T08:51:27Z", "message": "fixed the comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffea6c114cf4c561fec9e60093fd5c31614a9f34", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/ffea6c114cf4c561fec9e60093fd5c31614a9f34", "committedDate": "2020-03-09T09:03:38Z", "message": "fixed the comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afaeb215805b29774a4da9f01b4e79f778ea65d9", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/afaeb215805b29774a4da9f01b4e79f778ea65d9", "committedDate": "2020-03-10T01:24:35Z", "message": "fixed the comment of the colin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c179a31b5029d60f5144ae5fd3b713403be072bf", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/c179a31b5029d60f5144ae5fd3b713403be072bf", "committedDate": "2020-03-10T10:46:10Z", "message": "Miss copyright and license headers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0d390f925fa0bc9d60809408d82c0d494b637ca", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/d0d390f925fa0bc9d60809408d82c0d494b637ca", "committedDate": "2020-03-10T11:12:45Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d682f53993f10d3f7e3a6f0f0816e0d160fc43a", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/1d682f53993f10d3f7e3a6f0f0816e0d160fc43a", "committedDate": "2020-03-11T01:59:50Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b612e7b05721d299951e3d6fc739d511a4db4c3f", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/b612e7b05721d299951e3d6fc739d511a4db4c3f", "committedDate": "2020-03-16T03:59:30Z", "message": "add the validate for get translation and pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6dce6df105fedb70301f2fb8c65e37d8ed301a75", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/6dce6df105fedb70301f2fb8c65e37d8ed301a75", "committedDate": "2020-03-16T05:03:16Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82184100744be4207fa48621c32baf4d5bf478bc", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/82184100744be4207fa48621c32baf4d5bf478bc", "committedDate": "2020-03-18T06:46:22Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e5feec50643be5fd9fcce9bd823d5e1bf2a0749", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/5e5feec50643be5fd9fcce9bd823d5e1bf2a0749", "committedDate": "2020-03-19T02:07:20Z", "message": "fixed the comment of the validate parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c881bb76eee0f154f4dff52b1f601fb77c265ddc", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/c881bb76eee0f154f4dff52b1f601fb77c265ddc", "committedDate": "2020-03-19T03:54:39Z", "message": "fixed the comment of the validate parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7524b79d2df6352544c26677ba0ddd645a53691", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/e7524b79d2df6352544c26677ba0ddd645a53691", "committedDate": "2020-03-20T01:25:34Z", "message": "add the cache controll feature"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a83dd0d03ac641d26477382cad2a369fc50f6323", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/a83dd0d03ac641d26477382cad2a369fc50f6323", "committedDate": "2020-03-20T01:38:48Z", "message": "add the comment for method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33fae1f0f555b14195903f7d53a18ddb4bc628b6", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/33fae1f0f555b14195903f7d53a18ddb4bc628b6", "committedDate": "2020-03-20T01:47:44Z", "message": "add the copyright header for new file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d21abbbf81055556513233b3d72614744f0701fa", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/d21abbbf81055556513233b3d72614744f0701fa", "committedDate": "2020-03-20T01:48:42Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68b2ce794a2e2cd9998ae8b2c116f84df82ca50b", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/68b2ce794a2e2cd9998ae8b2c116f84df82ca50b", "committedDate": "2020-03-20T07:56:33Z", "message": "formate the code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43eaf51f680db8db7aa551cb6b04e6648c92932c", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/43eaf51f680db8db7aa551cb6b04e6648c92932c", "committedDate": "2020-03-20T08:06:20Z", "message": "formate the code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22343aaa0d7dc31d0e9748b6e88f8f7bc070d472", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/22343aaa0d7dc31d0e9748b6e88f8f7bc070d472", "committedDate": "2020-03-20T08:09:48Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e00c97e4d60ab6136e5786013f8c361d5bc54110", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/e00c97e4d60ab6136e5786013f8c361d5bc54110", "committedDate": "2020-03-26T04:42:12Z", "message": "add the new validate feature"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f6a420f17af2390abec6f08ec1775677b744b78", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/4f6a420f17af2390abec6f08ec1775677b744b78", "committedDate": "2020-03-26T07:20:58Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNzczOTI0", "url": "https://github.com/vmware/singleton/pull/480#pullrequestreview-381773924", "createdAt": "2020-03-26T08:06:34Z", "commit": {"oid": "4f6a420f17af2390abec6f08ec1775677b744b78"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwODowNjozNVrOF77MDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwODowNzo0M1rOF77OJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM4MDA0Nw==", "bodyText": "Is this way more effcient?\nString region = pathVariables.get(APIParamName.REGION);\nif (region == null) {\nregion = request.getParameter(APIParamName.REGION);\n}", "url": "https://github.com/vmware/singleton/pull/480#discussion_r398380047", "createdAt": "2020-03-26T08:06:35Z", "author": {"login": "Xiaochao8"}, "path": "g11n-ws/modules/md-service-authen/src/main/java/com/vmware/vip/core/validation/ParameterValidation.java", "diffHunk": "@@ -93,6 +98,85 @@ private void validateComponent(HttpServletRequest request)\n \t\t}\n \t}\n \n+\t@SuppressWarnings(\"unchecked\")\n+\tprivate void validateRegion(HttpServletRequest request)\n+\t\t\tthrows ValidationException {\n+\t\tMap<String, String> pathVariables = (Map<String, String>) request\n+\t\t\t\t.getAttribute(HandlerMapping.URI_TEMPLATE_VARIABLES_ATTRIBUTE);\n+\t\tString region = pathVariables.get(APIParamName.REGION) == null ? request\n+\t\t\t\t.getParameter(APIParamName.REGION) : pathVariables\n+\t\t\t\t.get(APIParamName.REGION);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f6a420f17af2390abec6f08ec1775677b744b78"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM4MDU4Mg==", "bodyText": "Same as above.", "url": "https://github.com/vmware/singleton/pull/480#discussion_r398380582", "createdAt": "2020-03-26T08:07:43Z", "author": {"login": "Xiaochao8"}, "path": "g11n-ws/modules/md-service-authen/src/main/java/com/vmware/vip/core/validation/ParameterValidation.java", "diffHunk": "@@ -93,6 +98,85 @@ private void validateComponent(HttpServletRequest request)\n \t\t}\n \t}\n \n+\t@SuppressWarnings(\"unchecked\")\n+\tprivate void validateRegion(HttpServletRequest request)\n+\t\t\tthrows ValidationException {\n+\t\tMap<String, String> pathVariables = (Map<String, String>) request\n+\t\t\t\t.getAttribute(HandlerMapping.URI_TEMPLATE_VARIABLES_ATTRIBUTE);\n+\t\tString region = pathVariables.get(APIParamName.REGION) == null ? request\n+\t\t\t\t.getParameter(APIParamName.REGION) : pathVariables\n+\t\t\t\t.get(APIParamName.REGION);\n+\t\tif (StringUtils.isEmpty(region)) {\n+\t\t\treturn;\n+\t\t}\n+\t\tif (!RegExpValidatorUtils.IsLetterAndNumberAndValidchar(region)) {\n+\t\t\tthrow new ValidationException(ValidationMsg.REGION_NOT_VALIDE);\n+\t\t}\n+\t}\n+\t\n+\t@SuppressWarnings(\"unchecked\")\n+\tprivate void validateScope(HttpServletRequest request)\n+\t\t\tthrows ValidationException {\n+\t\tMap<String, String> pathVariables = (Map<String, String>) request\n+\t\t\t\t.getAttribute(HandlerMapping.URI_TEMPLATE_VARIABLES_ATTRIBUTE);\n+\t\tString scope = pathVariables.get(APIParamName.SCOPE) == null ? request\n+\t\t\t\t.getParameter(APIParamName.SCOPE) : pathVariables\n+\t\t\t\t.get(APIParamName.SCOPE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f6a420f17af2390abec6f08ec1775677b744b78"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNzk4MTA2", "url": "https://github.com/vmware/singleton/pull/480#pullrequestreview-381798106", "createdAt": "2020-03-26T08:44:37Z", "commit": {"oid": "4f6a420f17af2390abec6f08ec1775677b744b78"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4327, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}