{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNTQ1Nzc4", "number": 569, "title": "No cache update in GetProductTranslationAPI", "bodyText": "", "createdAt": "2020-05-20T06:53:59Z", "url": "https://github.com/vmware/singleton/pull/569", "merged": true, "mergeCommit": {"oid": "6ed6aaddadec5a569986e3ba1af349eacc144a9e"}, "closed": true, "closedAt": "2020-05-27T06:45:34Z", "author": {"login": "tigershi"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVf9jhgH2gAyNDIwNTQ1Nzc4OjU1NjllZThhNjlkYmJkMjNjMmFlYjhjMTVmODU0OTU5NmRjMTg2OGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABck-Y_bAFqTQxNzk5MzM5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5569ee8a69dbbd23c2aeb8c15f8549596dc1868b", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/5569ee8a69dbbd23c2aeb8c15f8549596dc1868b", "committedDate": "2020-04-08T04:12:47Z", "message": "Check parameter scope for APIs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed53f30249e75daed5aea5094163c303b3343367", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/ed53f30249e75daed5aea5094163c303b3343367", "committedDate": "2020-04-08T07:30:02Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8c075699556f3b19122afe1f97c9b708eb82710", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/d8c075699556f3b19122afe1f97c9b708eb82710", "committedDate": "2020-04-09T00:43:59Z", "message": "Add Deprecated for post method get translation and patterns hasno dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52b529e8ebe8ea1e9b34cd7d2a2a64499827a286", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/52b529e8ebe8ea1e9b34cd7d2a2a64499827a286", "committedDate": "2020-04-20T09:57:03Z", "message": "split the source collect from singleton server"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2c0a2156d3a750ff4628d12ed3b490e772c080a", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/b2c0a2156d3a750ff4628d12ed3b490e772c080a", "committedDate": "2020-04-21T02:02:06Z", "message": "fixed the validate of source collect"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d60de4d3fbfaa4995075b096cd4f7c1074efb30e", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/d60de4d3fbfaa4995075b096cd4f7c1074efb30e", "committedDate": "2020-04-21T06:46:36Z", "message": "update the api description"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3d29219b443356be7db1e66eed8ab7f5047e4c5", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/f3d29219b443356be7db1e66eed8ab7f5047e4c5", "committedDate": "2020-04-22T01:51:23Z", "message": "fixed the source collect url and ignore the v1 apis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e8f805c75c27a96fa75a49f0e0ab8d64a7a328f", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/0e8f805c75c27a96fa75a49f0e0ab8d64a7a328f", "committedDate": "2020-04-23T02:12:38Z", "message": "fixed the source api comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e0663cc18eface60cc6762c4d7ce69243fff393", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/6e0663cc18eface60cc6762c4d7ce69243fff393", "committedDate": "2020-04-23T06:33:37Z", "message": "add licence header for build file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7790a57a730e216779eeb9d3627a9e12ad9df0be", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/7790a57a730e216779eeb9d3627a9e12ad9df0be", "committedDate": "2020-04-28T01:40:02Z", "message": "fixed the pip line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a88371ca7587b899cf0e575d22267b143807476", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/9a88371ca7587b899cf0e575d22267b143807476", "committedDate": "2020-04-28T02:31:11Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4e4bf0203f13177854f663f4da1bd803139b770", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/d4e4bf0203f13177854f663f4da1bd803139b770", "committedDate": "2020-04-28T02:58:31Z", "message": "fixed the pip line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e46e0aa513828045b2bcb661de4c3dd4dd7d15fa", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/e46e0aa513828045b2bcb661de4c3dd4dd7d15fa", "committedDate": "2020-04-28T04:15:06Z", "message": "fixed the pip line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44f27a31484c6b1770a7aeae4091b4014636c033", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/44f27a31484c6b1770a7aeae4091b4014636c033", "committedDate": "2020-04-28T04:19:49Z", "message": "fixed the pip line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6db5d17622b93901eac6443c5f501efffb745f8", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/e6db5d17622b93901eac6443c5f501efffb745f8", "committedDate": "2020-05-06T06:40:59Z", "message": "fixed the source collection response status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0388f06c6e944191dd4629ea0a6529221de298d9", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/0388f06c6e944191dd4629ea0a6529221de298d9", "committedDate": "2020-05-13T02:34:44Z", "message": "revert the i18n codes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f47478208a42eccfc46b18a442435e95341206e", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/2f47478208a42eccfc46b18a442435e95341206e", "committedDate": "2020-05-13T07:19:44Z", "message": "fixed the comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03a2db28198da42c12129f582a79cc2a21f66ac9", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/03a2db28198da42c12129f582a79cc2a21f66ac9", "committedDate": "2020-05-14T03:15:10Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dafe39705c0e5f8e9231c8beb9178bccecdb2da7", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/dafe39705c0e5f8e9231c8beb9178bccecdb2da7", "committedDate": "2020-05-19T02:14:51Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63c9342429589137e1bbe0e259f63d5a8ef14fc0", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/63c9342429589137e1bbe0e259f63d5a8ef14fc0", "committedDate": "2020-05-20T06:54:33Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a208326e1421ecd2d2a060cdd5b644f8ea9a3e2d", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/a208326e1421ecd2d2a060cdd5b644f8ea9a3e2d", "committedDate": "2020-05-20T06:59:11Z", "message": "No cache update in GetProductTranslationAPI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d83072b1228c42405fab594a705e5343c3f5bbe5", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/d83072b1228c42405fab594a705e5343c3f5bbe5", "committedDate": "2020-05-20T07:07:56Z", "message": "No cache update in GetProductTranslationAPI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1MTQwODM1", "url": "https://github.com/vmware/singleton/pull/569#pullrequestreview-415140835", "createdAt": "2020-05-20T09:12:04Z", "commit": {"oid": "d83072b1228c42405fab594a705e5343c3f5bbe5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwOToxMjowNFrOGYCeXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwOToxMjowNFrOGYCeXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzg1OTU1MA==", "bodyText": "Why delete the cache\uff1f", "url": "https://github.com/vmware/singleton/pull/569#discussion_r427859550", "createdAt": "2020-05-20T09:12:04Z", "author": {"login": "Xiaochao8"}, "path": "g11n-ws/modules/md-service-i18n-l3/src/main/java/com/vmware/vip/core/messages/service/product/ProductService.java", "diffHunk": "@@ -166,6 +171,19 @@ private DropVersionDTO getDropVersion(DropVersionDTO versioninfo,JSONObject jo,\n \t\t\t\t\t\t+ componentMessagesDTO.getVersion(), e);\n \t\t\t}\n \t\t}\n+\t\tcom.vmware.vip.core.messages.service.multcomponent.TranslationDTO multComp = new com.vmware.vip.core.messages.service.multcomponent.TranslationDTO();\n+\t\tmultComp.setProductName(productName);\n+\t\tmultComp.setVersion(version);\n+\t\tmultComp.setLocales(getSupportedLocaleList(productName, version));\n+\t\tmultComp.setComponents(getComponentNameList(productName, version));\n+\t\tString multKey = CachedKeyGetter.getMultiComponentsCachedKey(multComp);\n+\t\ttry {\n+\t\t\tTranslationCache3.deleteCachedObject(CacheName.MULTCOMPONENT, multKey, com.vmware.vip.core.messages.service.multcomponent.TranslationDTO.class);\n+\t\t} catch (VIPCacheException e) {\n+\t\t\t// TODO Auto-generated catch block\n+\t\t\tthrow new L3APIException(\n+\t\t\t\t\t\"MULTCOMPONENT cache occurs error when update translation.\", e);\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d83072b1228c42405fab594a705e5343c3f5bbe5"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1OTM0MDI0", "url": "https://github.com/vmware/singleton/pull/569#pullrequestreview-415934024", "createdAt": "2020-05-21T07:25:51Z", "commit": {"oid": "d83072b1228c42405fab594a705e5343c3f5bbe5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNzoyNTo1MVrOGYo87Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwNzoyODoyMlrOGYpArQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ4OTk2NQ==", "bodyText": "Delete todo", "url": "https://github.com/vmware/singleton/pull/569#discussion_r428489965", "createdAt": "2020-05-21T07:25:51Z", "author": {"login": "Xiaochao8"}, "path": "g11n-ws/modules/md-service-i18n-l3/src/main/java/com/vmware/vip/core/messages/service/product/ProductService.java", "diffHunk": "@@ -166,6 +171,19 @@ private DropVersionDTO getDropVersion(DropVersionDTO versioninfo,JSONObject jo,\n \t\t\t\t\t\t+ componentMessagesDTO.getVersion(), e);\n \t\t\t}\n \t\t}\n+\t\tcom.vmware.vip.core.messages.service.multcomponent.TranslationDTO multComp = new com.vmware.vip.core.messages.service.multcomponent.TranslationDTO();\n+\t\tmultComp.setProductName(productName);\n+\t\tmultComp.setVersion(version);\n+\t\tmultComp.setLocales(getSupportedLocaleList(productName, version));\n+\t\tmultComp.setComponents(getComponentNameList(productName, version));\n+\t\tString multKey = CachedKeyGetter.getMultiComponentsCachedKey(multComp);\n+\t\ttry {\n+\t\t\tTranslationCache3.deleteCachedObject(CacheName.MULTCOMPONENT, multKey, com.vmware.vip.core.messages.service.multcomponent.TranslationDTO.class);\n+\t\t} catch (VIPCacheException e) {\n+\t\t\t// TODO Auto-generated catch block", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d83072b1228c42405fab594a705e5343c3f5bbe5"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ5MDkyNQ==", "bodyText": "Does this error return to user?\nIf so, it's wrong because updating has been successful.", "url": "https://github.com/vmware/singleton/pull/569#discussion_r428490925", "createdAt": "2020-05-21T07:28:22Z", "author": {"login": "Xiaochao8"}, "path": "g11n-ws/modules/md-service-i18n-l3/src/main/java/com/vmware/vip/core/messages/service/product/ProductService.java", "diffHunk": "@@ -166,6 +171,19 @@ private DropVersionDTO getDropVersion(DropVersionDTO versioninfo,JSONObject jo,\n \t\t\t\t\t\t+ componentMessagesDTO.getVersion(), e);\n \t\t\t}\n \t\t}\n+\t\tcom.vmware.vip.core.messages.service.multcomponent.TranslationDTO multComp = new com.vmware.vip.core.messages.service.multcomponent.TranslationDTO();\n+\t\tmultComp.setProductName(productName);\n+\t\tmultComp.setVersion(version);\n+\t\tmultComp.setLocales(getSupportedLocaleList(productName, version));\n+\t\tmultComp.setComponents(getComponentNameList(productName, version));\n+\t\tString multKey = CachedKeyGetter.getMultiComponentsCachedKey(multComp);\n+\t\ttry {\n+\t\t\tTranslationCache3.deleteCachedObject(CacheName.MULTCOMPONENT, multKey, com.vmware.vip.core.messages.service.multcomponent.TranslationDTO.class);\n+\t\t} catch (VIPCacheException e) {\n+\t\t\t// TODO Auto-generated catch block\n+\t\t\tthrow new L3APIException(\n+\t\t\t\t\t\"MULTCOMPONENT cache occurs error when update translation.\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d83072b1228c42405fab594a705e5343c3f5bbe5"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NzQyMjcy", "url": "https://github.com/vmware/singleton/pull/569#pullrequestreview-416742272", "createdAt": "2020-05-22T08:36:20Z", "commit": {"oid": "d83072b1228c42405fab594a705e5343c3f5bbe5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6df5c6744e69a881f6d969f5d94e23960d76ff4c", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/6df5c6744e69a881f6d969f5d94e23960d76ff4c", "committedDate": "2020-05-25T02:00:53Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NTE1NjIz", "url": "https://github.com/vmware/singleton/pull/569#pullrequestreview-417515623", "createdAt": "2020-05-25T07:38:08Z", "commit": {"oid": "da8eefa7da0437afaf4abc152d5db6e72ba17cbc"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzozODowOFrOGZ3nHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwNzozOToxM1rOGZ3pGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc3ODcxOA==", "bodyText": "not good in the loop.", "url": "https://github.com/vmware/singleton/pull/569#discussion_r429778718", "createdAt": "2020-05-25T07:38:08Z", "author": {"login": "linr211"}, "path": "g11n-ws/modules/md-service-i18n-l3/src/main/java/com/vmware/vip/core/messages/service/product/ProductService.java", "diffHunk": "@@ -145,9 +146,13 @@ private DropVersionDTO getDropVersion(DropVersionDTO versioninfo,JSONObject jo,\n \t\t\tList<ComponentMessagesDTO> componentMessagesDTOList)\n \t\t\tthrows L3APIException {\n \t\tList<TranslationDTO> translationDTOList = new ArrayList<TranslationDTO>();\n+\t\tString productName = null;\n+\t\tString version = null;\n \t\tfor (ComponentMessagesDTO componentMessagesDTO : componentMessagesDTOList) {\n \t\t\ttry {\n \t\t\t\tupdateTranslation(componentMessagesDTO);\n+\t\t\t\tproductName = componentMessagesDTO.getProductName();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da8eefa7da0437afaf4abc152d5db6e72ba17cbc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc3OTIyNw==", "bodyText": "put them in a private method.", "url": "https://github.com/vmware/singleton/pull/569#discussion_r429779227", "createdAt": "2020-05-25T07:39:13Z", "author": {"login": "linr211"}, "path": "g11n-ws/modules/md-service-i18n-l3/src/main/java/com/vmware/vip/core/messages/service/product/ProductService.java", "diffHunk": "@@ -166,6 +171,19 @@ private DropVersionDTO getDropVersion(DropVersionDTO versioninfo,JSONObject jo,\n \t\t\t\t\t\t+ componentMessagesDTO.getVersion(), e);\n \t\t\t}\n \t\t}\n+\t\tcom.vmware.vip.core.messages.service.multcomponent.TranslationDTO multComp = new com.vmware.vip.core.messages.service.multcomponent.TranslationDTO();\n+\t\tmultComp.setProductName(productName);\n+\t\tmultComp.setVersion(version);\n+\t\tmultComp.setLocales(getSupportedLocaleList(productName, version));\n+\t\tmultComp.setComponents(getComponentNameList(productName, version));\n+\t\tString multKey = CachedKeyGetter.getMultiComponentsCachedKey(multComp);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da8eefa7da0437afaf4abc152d5db6e72ba17cbc"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "864ebe2ef31b45d323e3595f17e9d9f3080e5dea", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/864ebe2ef31b45d323e3595f17e9d9f3080e5dea", "committedDate": "2020-05-25T08:37:51Z", "message": "format code for update multcomponent cache"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NTYzNDQw", "url": "https://github.com/vmware/singleton/pull/569#pullrequestreview-417563440", "createdAt": "2020-05-25T08:56:14Z", "commit": {"oid": "864ebe2ef31b45d323e3595f17e9d9f3080e5dea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84f0f520a6fee0e89781b5ae144cdecb2228462d", "author": {"user": {"login": "tigershi", "name": "tigershi"}}, "url": "https://github.com/vmware/singleton/commit/84f0f520a6fee0e89781b5ae144cdecb2228462d", "committedDate": "2020-05-25T09:15:57Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NTk5NTUx", "url": "https://github.com/vmware/singleton/pull/569#pullrequestreview-417599551", "createdAt": "2020-05-25T09:54:26Z", "commit": {"oid": "84f0f520a6fee0e89781b5ae144cdecb2228462d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwOTo1NDoyN1rOGZ7vXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwOTo1NToxOVrOGZ7w1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg0NjM2Ng==", "bodyText": "Is it necessary to judge length of componentMessagesDTOList greater than 0?", "url": "https://github.com/vmware/singleton/pull/569#discussion_r429846366", "createdAt": "2020-05-25T09:54:27Z", "author": {"login": "Xiaochao8"}, "path": "g11n-ws/modules/md-service-i18n-l3/src/main/java/com/vmware/vip/core/messages/service/product/ProductService.java", "diffHunk": "@@ -166,8 +167,31 @@ private DropVersionDTO getDropVersion(DropVersionDTO versioninfo,JSONObject jo,\n \t\t\t\t\t\t+ componentMessagesDTO.getVersion(), e);\n \t\t\t}\n \t\t}\n+\t\tupdateMultComponentCache(componentMessagesDTOList.get(0).getProductName(), componentMessagesDTOList.get(0).getVersion());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84f0f520a6fee0e89781b5ae144cdecb2228462d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg0Njc0MQ==", "bodyText": "Here should log an error message rather than throwing an exception because translation has been updated successfully.", "url": "https://github.com/vmware/singleton/pull/569#discussion_r429846741", "createdAt": "2020-05-25T09:55:19Z", "author": {"login": "Xiaochao8"}, "path": "g11n-ws/modules/md-service-i18n-l3/src/main/java/com/vmware/vip/core/messages/service/product/ProductService.java", "diffHunk": "@@ -166,8 +167,31 @@ private DropVersionDTO getDropVersion(DropVersionDTO versioninfo,JSONObject jo,\n \t\t\t\t\t\t+ componentMessagesDTO.getVersion(), e);\n \t\t\t}\n \t\t}\n+\t\tupdateMultComponentCache(componentMessagesDTOList.get(0).getProductName(), componentMessagesDTOList.get(0).getVersion());\n \t\treturn translationDTOList;\n \t}\n+\t\n+\t/**\n+\t * update the MultComponent Cache project when update translations\n+\t * \n+\t * @param productName\n+\t * @param version\n+\t * @throws L3APIException\n+\t */\n+\tprivate void updateMultComponentCache(String productName, String version) throws L3APIException {\n+\t\tcom.vmware.vip.core.messages.service.multcomponent.TranslationDTO multComp = new com.vmware.vip.core.messages.service.multcomponent.TranslationDTO();\n+\t\tmultComp.setProductName(productName);\n+\t\tmultComp.setVersion(version);\n+\t\tmultComp.setLocales(getSupportedLocaleList(productName, version));\n+\t\tmultComp.setComponents(getComponentNameList(productName, version));\n+\t\tString multKey = CachedKeyGetter.getMultiComponentsCachedKey(multComp);\n+\t\ttry {\n+\t\t\tTranslationCache3.deleteCachedObject(CacheName.MULTCOMPONENT, multKey,\n+\t\t\t\t\tcom.vmware.vip.core.messages.service.multcomponent.TranslationDTO.class);\n+\t\t} catch (VIPCacheException e) {\n+\t\t\tthrow new L3APIException(\"MULTCOMPONENT cache occurs error when update translation.\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84f0f520a6fee0e89781b5ae144cdecb2228462d"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTkzMzk0", "url": "https://github.com/vmware/singleton/pull/569#pullrequestreview-417993394", "createdAt": "2020-05-26T06:08:46Z", "commit": {"oid": "84f0f520a6fee0e89781b5ae144cdecb2228462d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4396, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}