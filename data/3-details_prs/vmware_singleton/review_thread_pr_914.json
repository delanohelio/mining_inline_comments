{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MTM3MTkx", "number": 914, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwMjo0OTo0NVrOFDyV2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwMjo0OTo0NVrOFDyV2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5NTE0ODQxOnYy", "diffSide": "RIGHT", "path": "singletonclient/SingletonClient/Implementation/SingletonUpdate.cs", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwMjo0OTo0NVrOIDmtuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNjo1NToyOVrOIDri3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY1MDkzNw==", "bodyText": "Should you get the locale list by get the combination of locale list under each component, then use it to update the locale list?", "url": "https://github.com/vmware/singleton/pull/914#discussion_r540650937", "createdAt": "2020-12-11T02:49:45Z", "author": {"login": "huihuiw01"}, "path": "singletonclient/SingletonClient/Implementation/SingletonUpdate.cs", "diffHunk": "@@ -218,6 +218,16 @@ private ILocaleMessages LoadOfflineLocaleBundle(string locale, string nearLocale\n                 componentList = _config.GetExternalComponentList();\n                 List<string> releaseComponents = _release.GetRelease().GetMessages().GetComponentList();\n                 SingletonUtil.UpdateListFromAnotherList(releaseComponents, componentList);\n+\n+                List<string> releaseLocales = _release.GetRelease().GetMessages().GetLocaleList();\n+                if (releaseLocales.Count == 0)\n+                {\n+                    for (int i = 0; i < releaseComponents.Count; i++)\n+                    {\n+                        List<string> componentLocaleList = _config.GetExternalLocaleList(releaseComponents[i]);\n+                        SingletonUtil.UpdateListFromAnotherList(releaseLocales, componentLocaleList);\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "509a2612855886d78e7a7b1cd30a0cef48a128a9"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY2MzkxMg==", "bodyText": "It's exactly what you said.\n\nget the locale list by get the combination of locale list under each component\nList componentLocaleList = _config.GetExternalLocaleList(releaseComponents[i])\nuse it to update the locale list\nSingletonUtil.UpdateListFromAnotherList(releaseLocales, componentLocaleList);", "url": "https://github.com/vmware/singleton/pull/914#discussion_r540663912", "createdAt": "2020-12-11T03:28:36Z", "author": {"login": "jin-jasper"}, "path": "singletonclient/SingletonClient/Implementation/SingletonUpdate.cs", "diffHunk": "@@ -218,6 +218,16 @@ private ILocaleMessages LoadOfflineLocaleBundle(string locale, string nearLocale\n                 componentList = _config.GetExternalComponentList();\n                 List<string> releaseComponents = _release.GetRelease().GetMessages().GetComponentList();\n                 SingletonUtil.UpdateListFromAnotherList(releaseComponents, componentList);\n+\n+                List<string> releaseLocales = _release.GetRelease().GetMessages().GetLocaleList();\n+                if (releaseLocales.Count == 0)\n+                {\n+                    for (int i = 0; i < releaseComponents.Count; i++)\n+                    {\n+                        List<string> componentLocaleList = _config.GetExternalLocaleList(releaseComponents[i]);\n+                        SingletonUtil.UpdateListFromAnotherList(releaseLocales, componentLocaleList);\n+                    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY1MDkzNw=="}, "originalCommit": {"oid": "509a2612855886d78e7a7b1cd30a0cef48a128a9"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY3ODA1MA==", "bodyText": "But line 227 and 228 are in the for loop,\n\nIsn't componentLocaleList a new object? If yes, then it isn't the combination of locale list under each component, just that for current component.\nNeedn't update in each iteration, update after iteration done is enough.", "url": "https://github.com/vmware/singleton/pull/914#discussion_r540678050", "createdAt": "2020-12-11T04:14:36Z", "author": {"login": "huihuiw01"}, "path": "singletonclient/SingletonClient/Implementation/SingletonUpdate.cs", "diffHunk": "@@ -218,6 +218,16 @@ private ILocaleMessages LoadOfflineLocaleBundle(string locale, string nearLocale\n                 componentList = _config.GetExternalComponentList();\n                 List<string> releaseComponents = _release.GetRelease().GetMessages().GetComponentList();\n                 SingletonUtil.UpdateListFromAnotherList(releaseComponents, componentList);\n+\n+                List<string> releaseLocales = _release.GetRelease().GetMessages().GetLocaleList();\n+                if (releaseLocales.Count == 0)\n+                {\n+                    for (int i = 0; i < releaseComponents.Count; i++)\n+                    {\n+                        List<string> componentLocaleList = _config.GetExternalLocaleList(releaseComponents[i]);\n+                        SingletonUtil.UpdateListFromAnotherList(releaseLocales, componentLocaleList);\n+                    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY1MDkzNw=="}, "originalCommit": {"oid": "509a2612855886d78e7a7b1cd30a0cef48a128a9"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDczMDA3OQ==", "bodyText": "The loop is to enumerate every component.\ncomponentLocaleList is a new object and it is the combination of locales under a component,\nBut componentLocaleList could be different for different component. All componentLocaleList objects are combined into releaseLocales as the final result.", "url": "https://github.com/vmware/singleton/pull/914#discussion_r540730079", "createdAt": "2020-12-11T06:55:29Z", "author": {"login": "jin-jasper"}, "path": "singletonclient/SingletonClient/Implementation/SingletonUpdate.cs", "diffHunk": "@@ -218,6 +218,16 @@ private ILocaleMessages LoadOfflineLocaleBundle(string locale, string nearLocale\n                 componentList = _config.GetExternalComponentList();\n                 List<string> releaseComponents = _release.GetRelease().GetMessages().GetComponentList();\n                 SingletonUtil.UpdateListFromAnotherList(releaseComponents, componentList);\n+\n+                List<string> releaseLocales = _release.GetRelease().GetMessages().GetLocaleList();\n+                if (releaseLocales.Count == 0)\n+                {\n+                    for (int i = 0; i < releaseComponents.Count; i++)\n+                    {\n+                        List<string> componentLocaleList = _config.GetExternalLocaleList(releaseComponents[i]);\n+                        SingletonUtil.UpdateListFromAnotherList(releaseLocales, componentLocaleList);\n+                    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY1MDkzNw=="}, "originalCommit": {"oid": "509a2612855886d78e7a7b1cd30a0cef48a128a9"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4421, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}