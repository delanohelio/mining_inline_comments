{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNTk1Nzcx", "number": 4869, "title": "Namespace in TM", "bodyText": "Goals (and why):\nClient feedback report for TimeLock should include both the original namespace and the overridden service name.\nImplementation Description (bullets):\n\nOptional namespace field is added to ConjureTimeLockClientFeedback\n\nTesting (What was existing testing like?  What have you done to improve it?):\n\nNo new tests added\n\nPriority (whenever / two weeks / yesterday):\nToday", "createdAt": "2020-06-26T13:46:26Z", "url": "https://github.com/palantir/atlasdb/pull/4869", "merged": true, "mergeCommit": {"oid": "f8ce36368070c43e87676ac1d1bbd9a79674d3a7"}, "closed": true, "closedAt": "2020-07-07T14:54:46Z", "author": {"login": "sudiksha27"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvFS-9gFqTQzODQwNzA4NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcym8NPgFqTQ0Mzk2Mjk5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NDA3MDg1", "url": "https://github.com/palantir/atlasdb/pull/4869#pullrequestreview-438407085", "createdAt": "2020-06-26T15:50:46Z", "commit": {"oid": "f9f72eec3bd9d01e1df30469c2d28ee0ddb14d58"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNTo1MDo0N1rOGpl7cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNTo1MDo0N1rOGpl7cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI2NjIyNg==", "bodyText": "remove it for now", "url": "https://github.com/palantir/atlasdb/pull/4869#discussion_r446266226", "createdAt": "2020-06-26T15:50:47Z", "author": {"login": "sudiksha27"}, "path": "lock-api/src/main/java/com/palantir/lock/client/metrics/TimeLockFeedbackBackgroundTask.java", "diffHunk": "@@ -88,6 +93,7 @@ public void scheduleWithFixedDelay() {\n                         .atlasVersion(versionSupplier.get())\n                         .nodeId(nodeId)\n                         .serviceName(serviceName)\n+                        .namespace(namespace)\n                         .build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9f72eec3bd9d01e1df30469c2d28ee0ddb14d58"}, "originalPosition": 40}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9f72eec3bd9d01e1df30469c2d28ee0ddb14d58", "author": {"user": {"login": "sudiksha27", "name": "sudiksha nanda"}}, "url": "https://github.com/palantir/atlasdb/commit/f9f72eec3bd9d01e1df30469c2d28ee0ddb14d58", "committedDate": "2020-06-26T13:45:54Z", "message": "Namespace in TM"}, "afterCommit": {"oid": "c352495decc059485dd90a9bbde9767fc0fe93ae", "author": {"user": {"login": "sudiksha27", "name": "sudiksha nanda"}}, "url": "https://github.com/palantir/atlasdb/commit/c352495decc059485dd90a9bbde9767fc0fe93ae", "committedDate": "2020-06-26T17:11:59Z", "message": "Namespace in TM"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MzIxNjA5", "url": "https://github.com/palantir/atlasdb/pull/4869#pullrequestreview-439321609", "createdAt": "2020-06-29T16:42:16Z", "commit": {"oid": "656b4f8714e01af06ad518c7ba10b4cb6eb57d41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjo0MjoxNlrOGqZTFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjo0MjoxNlrOGqZTFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzEwNzg2Mg==", "bodyText": "nit: could we make this Value.Derived, and/or have the service name take a Suppliers.memoize(() -> namespace())? I'm worried we're doing a bunch of unnecessary stream reads every time we look up the namespace.", "url": "https://github.com/palantir/atlasdb/pull/4869#discussion_r447107862", "createdAt": "2020-06-29T16:42:16Z", "author": {"login": "jeremyk-91"}, "path": "atlasdb-config/src/main/java/com/palantir/atlasdb/factory/TransactionManagers.java", "diffHunk": "@@ -614,13 +615,17 @@ private MetricsManager setUpMetricsAndGetMetricsManager() {\n     @VisibleForTesting\n     @Value.Derived\n     String serviceName() {\n-        return serviceIdentifierOverride().orElseGet(() -> Stream.of(config().namespace(),\n+        return serviceIdentifierOverride().orElseGet(this::namespace);\n+    }\n+\n+    private String namespace() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "656b4f8714e01af06ad518c7ba10b4cb6eb57d41"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e097b8f2f8a8fb38308717d695e6229a3f5e2c83", "author": {"user": {"login": "sudiksha27", "name": "sudiksha nanda"}}, "url": "https://github.com/palantir/atlasdb/commit/e097b8f2f8a8fb38308717d695e6229a3f5e2c83", "committedDate": "2020-07-01T20:53:20Z", "message": "Namespace in TM"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ba6aa343b272c50ffe71cde11dbe9c2efb11fb4", "author": {"user": {"login": "sudiksha27", "name": "sudiksha nanda"}}, "url": "https://github.com/palantir/atlasdb/commit/7ba6aa343b272c50ffe71cde11dbe9c2efb11fb4", "committedDate": "2020-07-01T20:53:20Z", "message": "Fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddbca16fe6c312d6e1e92de38b410dcdfa1faa35", "author": {"user": {"login": "sudiksha27", "name": "sudiksha nanda"}}, "url": "https://github.com/palantir/atlasdb/commit/ddbca16fe6c312d6e1e92de38b410dcdfa1faa35", "committedDate": "2020-07-01T20:53:20Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "997af35b83c73c412495cb192097a004fb8b8f4b", "author": {"user": {"login": "sudiksha27", "name": "sudiksha nanda"}}, "url": "https://github.com/palantir/atlasdb/commit/997af35b83c73c412495cb192097a004fb8b8f4b", "committedDate": "2020-07-01T20:53:20Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86ce861b48e1b7580fd4b2e0befbaf69f6fada34", "author": {"user": {"login": "sudiksha27", "name": "sudiksha nanda"}}, "url": "https://github.com/palantir/atlasdb/commit/86ce861b48e1b7580fd4b2e0befbaf69f6fada34", "committedDate": "2020-07-01T20:53:20Z", "message": "Address comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c1c12cab134dd5718617d0d2770a982ffbc6b10", "author": {"user": {"login": "sudiksha27", "name": "sudiksha nanda"}}, "url": "https://github.com/palantir/atlasdb/commit/4c1c12cab134dd5718617d0d2770a982ffbc6b10", "committedDate": "2020-07-01T20:52:24Z", "message": "Address comments"}, "afterCommit": {"oid": "86ce861b48e1b7580fd4b2e0befbaf69f6fada34", "author": {"user": {"login": "sudiksha27", "name": "sudiksha nanda"}}, "url": "https://github.com/palantir/atlasdb/commit/86ce861b48e1b7580fd4b2e0befbaf69f6fada34", "committedDate": "2020-07-01T20:53:20Z", "message": "Address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55beac65cafe79e2d2eb2865ba32e72d39dab18b", "author": {"user": {"login": "sudiksha27", "name": "sudiksha nanda"}}, "url": "https://github.com/palantir/atlasdb/commit/55beac65cafe79e2d2eb2865ba32e72d39dab18b", "committedDate": "2020-07-07T14:41:30Z", "message": "docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzOTYyOTky", "url": "https://github.com/palantir/atlasdb/pull/4869#pullrequestreview-443962992", "createdAt": "2020-07-07T14:44:27Z", "commit": {"oid": "55beac65cafe79e2d2eb2865ba32e72d39dab18b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2703, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}