{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2Mjg2ODEx", "number": 4762, "title": "[Dialogue] Part 2: Translation from AtlasDB Services to ServiceConfigBlocks", "bodyText": "Goals (and why):\n\nAllow us to, given Atlas level constructs for specifying how a service should be laid out (ServerListConfigs and AuxiliaryRemotingParameters-es, including having variable retry and blocking timeout behaviours), translate them into a suitable ServiceConfigBlock that Dialogue understands.\n\nImplementation Description (bullets):\n\nExtract the constants in ClientOptions to a separate class: these are used by both CJR and Dialogue. Refactor to HumanReadableDuration since converting from that to Java durations is easier than the other way around.\nBump the version of Dialogue.\nImplement DialogueClientOptions, the conversion piece.\n\nTesting (What was existing testing like?  What have you done to improve it?):\nNew classes are tested. For the refactor, existing tests should cover it.\nConcerns (what feedback would you like?):\n\nThis section is prone to typos (tests helped catch one). Were there any other silly mistakes?\n\nWhere should we start reviewing?: ClientOptionsConstants. It's probably worthwhile validating the constant extraction and the implementation of DialogueClientOptions as two parts.\nPriority (whenever / two weeks / yesterday): this week", "createdAt": "2020-05-11T19:03:53Z", "url": "https://github.com/palantir/atlasdb/pull/4762", "merged": true, "mergeCommit": {"oid": "af8540746495c42a199eac670f39be3f55e75b57"}, "closed": true, "closedAt": "2020-05-12T11:17:24Z", "author": {"login": "jeremyk-91"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgh9l2AFqTQwOTkxNjY0Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgslCOAFqTQxMDQ4MzkzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5OTE2NjQ3", "url": "https://github.com/palantir/atlasdb/pull/4762#pullrequestreview-409916647", "createdAt": "2020-05-12T10:42:03Z", "commit": {"oid": "0cc2f2d41744526727da3b45cda70974731bcc70"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDo0MjowM1rOGUAtgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMDo0NToxOVrOGUA0hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNjM1NQ==", "bodyText": "name it _SHORT", "url": "https://github.com/palantir/atlasdb/pull/4762#discussion_r423636355", "createdAt": "2020-05-12T10:42:03Z", "author": {"login": "gmaretic"}, "path": "atlasdb-conjure/src/test/java/com/palantir/atlasdb/http/v2/DialogueClientOptionsTest.java", "diffHunk": "@@ -0,0 +1,106 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.atlasdb.http.v2;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.nio.file.Paths;\n+import java.util.List;\n+\n+import org.junit.Test;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import com.palantir.atlasdb.config.AuxiliaryRemotingParameters;\n+import com.palantir.atlasdb.config.ImmutableServerListConfig;\n+import com.palantir.atlasdb.config.ServerListConfig;\n+import com.palantir.conjure.java.api.config.service.PartialServiceConfiguration;\n+import com.palantir.conjure.java.api.config.service.ServicesConfigBlock;\n+import com.palantir.conjure.java.api.config.service.UserAgent;\n+import com.palantir.conjure.java.api.config.ssl.SslConfiguration;\n+\n+public class DialogueClientOptionsTest {\n+    private static final String SERVICE_NAME = \"service\";\n+    private static final UserAgent USER_AGENT = UserAgent.of(UserAgent.Agent.of(SERVICE_NAME, \"1.2.3\"));\n+    private static final List<String> SERVERS = ImmutableList.of(\"apple\", \"banana\", \"cherry\", \"dewberry\");\n+    private static final SslConfiguration SSL_CONFIGURATION = SslConfiguration.of(Paths.get(\"a\", \"b\"));\n+\n+    private static final AuxiliaryRemotingParameters REMOTING_PARAMETERS_EXTENDED_TIMEOUT\n+            = AuxiliaryRemotingParameters.builder()\n+            .userAgent(USER_AGENT)\n+            .shouldRetry(true)\n+            .shouldLimitPayload(true)\n+            .shouldUseExtendedTimeout(true)\n+            .build();\n+    private static final AuxiliaryRemotingParameters REMOTING_PARAMETERS = AuxiliaryRemotingParameters.builder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cc2f2d41744526727da3b45cda70974731bcc70"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNjUzMg==", "bodyText": "Same as above", "url": "https://github.com/palantir/atlasdb/pull/4762#discussion_r423636532", "createdAt": "2020-05-12T10:42:27Z", "author": {"login": "gmaretic"}, "path": "atlasdb-conjure/src/test/java/com/palantir/atlasdb/http/v2/DialogueClientOptionsTest.java", "diffHunk": "@@ -0,0 +1,106 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.atlasdb.http.v2;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.nio.file.Paths;\n+import java.util.List;\n+\n+import org.junit.Test;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import com.palantir.atlasdb.config.AuxiliaryRemotingParameters;\n+import com.palantir.atlasdb.config.ImmutableServerListConfig;\n+import com.palantir.atlasdb.config.ServerListConfig;\n+import com.palantir.conjure.java.api.config.service.PartialServiceConfiguration;\n+import com.palantir.conjure.java.api.config.service.ServicesConfigBlock;\n+import com.palantir.conjure.java.api.config.service.UserAgent;\n+import com.palantir.conjure.java.api.config.ssl.SslConfiguration;\n+\n+public class DialogueClientOptionsTest {\n+    private static final String SERVICE_NAME = \"service\";\n+    private static final UserAgent USER_AGENT = UserAgent.of(UserAgent.Agent.of(SERVICE_NAME, \"1.2.3\"));\n+    private static final List<String> SERVERS = ImmutableList.of(\"apple\", \"banana\", \"cherry\", \"dewberry\");\n+    private static final SslConfiguration SSL_CONFIGURATION = SslConfiguration.of(Paths.get(\"a\", \"b\"));\n+\n+    private static final AuxiliaryRemotingParameters REMOTING_PARAMETERS_EXTENDED_TIMEOUT\n+            = AuxiliaryRemotingParameters.builder()\n+            .userAgent(USER_AGENT)\n+            .shouldRetry(true)\n+            .shouldLimitPayload(true)\n+            .shouldUseExtendedTimeout(true)\n+            .build();\n+    private static final AuxiliaryRemotingParameters REMOTING_PARAMETERS = AuxiliaryRemotingParameters.builder()\n+            .userAgent(USER_AGENT)\n+            .shouldRetry(true)\n+            .shouldLimitPayload(true)\n+            .shouldUseExtendedTimeout(false)\n+            .build();\n+\n+    private static final ServerListConfig SERVER_LIST_CONFIG = ImmutableServerListConfig.builder()\n+            .sslConfiguration(SSL_CONFIGURATION)\n+            .addAllServers(SERVERS)\n+            .build();\n+\n+    private static final RemoteServiceConfiguration REMOTE_SERVICE_CONFIGURATION_EXTENDED_TIMEOUT\n+            = ImmutableRemoteServiceConfiguration.builder()\n+            .serverList(SERVER_LIST_CONFIG)\n+            .remotingParameters(REMOTING_PARAMETERS_EXTENDED_TIMEOUT)\n+            .build();\n+    private static final RemoteServiceConfiguration REMOTE_SERVICE_CONFIGURATION", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cc2f2d41744526727da3b45cda70974731bcc70"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNzM1MA==", "bodyText": "Verify absence of proxy configuration", "url": "https://github.com/palantir/atlasdb/pull/4762#discussion_r423637350", "createdAt": "2020-05-12T10:43:48Z", "author": {"login": "gmaretic"}, "path": "atlasdb-conjure/src/test/java/com/palantir/atlasdb/http/v2/DialogueClientOptionsTest.java", "diffHunk": "@@ -0,0 +1,106 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.atlasdb.http.v2;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+import java.nio.file.Paths;\n+import java.util.List;\n+\n+import org.junit.Test;\n+\n+import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableMap;\n+import com.palantir.atlasdb.config.AuxiliaryRemotingParameters;\n+import com.palantir.atlasdb.config.ImmutableServerListConfig;\n+import com.palantir.atlasdb.config.ServerListConfig;\n+import com.palantir.conjure.java.api.config.service.PartialServiceConfiguration;\n+import com.palantir.conjure.java.api.config.service.ServicesConfigBlock;\n+import com.palantir.conjure.java.api.config.service.UserAgent;\n+import com.palantir.conjure.java.api.config.ssl.SslConfiguration;\n+\n+public class DialogueClientOptionsTest {\n+    private static final String SERVICE_NAME = \"service\";\n+    private static final UserAgent USER_AGENT = UserAgent.of(UserAgent.Agent.of(SERVICE_NAME, \"1.2.3\"));\n+    private static final List<String> SERVERS = ImmutableList.of(\"apple\", \"banana\", \"cherry\", \"dewberry\");\n+    private static final SslConfiguration SSL_CONFIGURATION = SslConfiguration.of(Paths.get(\"a\", \"b\"));\n+\n+    private static final AuxiliaryRemotingParameters REMOTING_PARAMETERS_EXTENDED_TIMEOUT\n+            = AuxiliaryRemotingParameters.builder()\n+            .userAgent(USER_AGENT)\n+            .shouldRetry(true)\n+            .shouldLimitPayload(true)\n+            .shouldUseExtendedTimeout(true)\n+            .build();\n+    private static final AuxiliaryRemotingParameters REMOTING_PARAMETERS = AuxiliaryRemotingParameters.builder()\n+            .userAgent(USER_AGENT)\n+            .shouldRetry(true)\n+            .shouldLimitPayload(true)\n+            .shouldUseExtendedTimeout(false)\n+            .build();\n+\n+    private static final ServerListConfig SERVER_LIST_CONFIG = ImmutableServerListConfig.builder()\n+            .sslConfiguration(SSL_CONFIGURATION)\n+            .addAllServers(SERVERS)\n+            .build();\n+\n+    private static final RemoteServiceConfiguration REMOTE_SERVICE_CONFIGURATION_EXTENDED_TIMEOUT\n+            = ImmutableRemoteServiceConfiguration.builder()\n+            .serverList(SERVER_LIST_CONFIG)\n+            .remotingParameters(REMOTING_PARAMETERS_EXTENDED_TIMEOUT)\n+            .build();\n+    private static final RemoteServiceConfiguration REMOTE_SERVICE_CONFIGURATION\n+            = ImmutableRemoteServiceConfiguration.builder()\n+            .serverList(SERVER_LIST_CONFIG)\n+            .remotingParameters(REMOTING_PARAMETERS)\n+            .build();\n+\n+    @Test\n+    public void serviceConfigBlockGeneration() {\n+        ServicesConfigBlock servicesConfigBlock = DialogueClientOptions.toServicesConfigBlock(\n+                ImmutableMap.of(SERVICE_NAME, REMOTE_SERVICE_CONFIGURATION_EXTENDED_TIMEOUT));\n+\n+        assertThat(servicesConfigBlock.services()).containsOnlyKeys(SERVICE_NAME);\n+\n+        PartialServiceConfiguration partialServiceConfiguration = servicesConfigBlock.services().get(SERVICE_NAME);\n+        assertThat(partialServiceConfiguration.uris()).hasSameElementsAs(SERVERS);\n+        assertThat(partialServiceConfiguration.security()).contains(SSL_CONFIGURATION);\n+        assertThat(partialServiceConfiguration.backoffSlotSize())\n+                .contains(ClientOptionsConstants.STANDARD_BACKOFF_SLOT_SIZE);\n+        assertThat(partialServiceConfiguration.connectTimeout()).contains(ClientOptionsConstants.CONNECT_TIMEOUT);\n+        assertThat(partialServiceConfiguration.maxNumRetries()).contains(ClientOptionsConstants.STANDARD_MAX_RETRIES);\n+        assertThat(partialServiceConfiguration.readTimeout()).contains(ClientOptionsConstants.LONG_READ_TIMEOUT);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cc2f2d41744526727da3b45cda70974731bcc70"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzODE0OQ==", "bodyText": "Maybe rename this", "url": "https://github.com/palantir/atlasdb/pull/4762#discussion_r423638149", "createdAt": "2020-05-12T10:45:19Z", "author": {"login": "gmaretic"}, "path": "timelock-server/src/suiteTest/java/com/palantir/atlasdb/timelock/MultiNodePaxosTimeLockServerIntegrationTest.java", "diffHunk": "@@ -82,7 +82,9 @@\n \n     private static final int DEFAULT_LOCK_TIMEOUT_MS = 10_000;\n     private static final int LONG_LOCK_TIMEOUT_MS =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cc2f2d41744526727da3b45cda70974731bcc70"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8da751a5606d084f07c9ff120971f36255707fd", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/f8da751a5606d084f07c9ff120971f36255707fd", "committedDate": "2020-05-12T10:58:42Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01e978f2075d7a41b4b64b9ba0ebade62e392cc7", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/01e978f2075d7a41b4b64b9ba0ebade62e392cc7", "committedDate": "2020-05-12T10:58:42Z", "message": "versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79240234ef674b702a03d428ad6dcc01d94f31d2", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/79240234ef674b702a03d428ad6dcc01d94f31d2", "committedDate": "2020-05-12T10:58:42Z", "message": "HRD and refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86b353279f92c52986496129191302549e659bfb", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/86b353279f92c52986496129191302549e659bfb", "committedDate": "2020-05-12T10:58:42Z", "message": "ADDSP impl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f29905638a788e9cb52fb5e17f6b53a68e03e9aa", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/f29905638a788e9cb52fb5e17f6b53a68e03e9aa", "committedDate": "2020-05-12T10:58:42Z", "message": "DialogueClientOptionsTest and bugfix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc24909681835179a742531d77f1aaf617116082", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/bc24909681835179a742531d77f1aaf617116082", "committedDate": "2020-05-12T10:58:42Z", "message": "don't put ADDSP in this commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8cd97620db4778e6c7514e5ae8c30a2d30c3436", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/e8cd97620db4778e6c7514e5ae8c30a2d30c3436", "committedDate": "2020-05-12T10:58:42Z", "message": "fix funky test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a0fb061069d34eb4a34d08d383b462377b1ab38", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/4a0fb061069d34eb4a34d08d383b462377b1ab38", "committedDate": "2020-05-12T10:58:42Z", "message": "salts test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afcb1f2c72c272060472b39c0a1389dd31d16302", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/afcb1f2c72c272060472b39c0a1389dd31d16302", "committedDate": "2020-05-12T10:58:42Z", "message": "DACTS not in this PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26854690f90b5e760e350d58f487a9fd491ebe02", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/26854690f90b5e760e350d58f487a9fd491ebe02", "committedDate": "2020-05-12T10:58:42Z", "message": "baseline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3161a5d8e38a0e12cef44493a6ff4be4ac230975", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/3161a5d8e38a0e12cef44493a6ff4be4ac230975", "committedDate": "2020-05-12T10:58:42Z", "message": "baseline 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7b1fda497e25d0d5741b501b4c7b68d847c40ea", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/a7b1fda497e25d0d5741b501b4c7b68d847c40ea", "committedDate": "2020-05-12T10:58:42Z", "message": "baseline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1506da8d9630d85f96602eb8336dab7623f3ce00", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/1506da8d9630d85f96602eb8336dab7623f3ce00", "committedDate": "2020-05-12T10:59:55Z", "message": "Revert \"Add generated changelog entries\"\n\nThis reverts commit f8da751a5606d084f07c9ff120971f36255707fd."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0cc2f2d41744526727da3b45cda70974731bcc70", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/0cc2f2d41744526727da3b45cda70974731bcc70", "committedDate": "2020-05-11T19:55:08Z", "message": "baseline"}, "afterCommit": {"oid": "1506da8d9630d85f96602eb8336dab7623f3ce00", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/1506da8d9630d85f96602eb8336dab7623f3ce00", "committedDate": "2020-05-12T10:59:55Z", "message": "Revert \"Add generated changelog entries\"\n\nThis reverts commit f8da751a5606d084f07c9ff120971f36255707fd."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7c3f65613bf92dbbf66031f071fd73bb59fea2b", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/a7c3f65613bf92dbbf66031f071fd73bb59fea2b", "committedDate": "2020-05-12T11:02:38Z", "message": "CR"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNDgzMDgw", "url": "https://github.com/palantir/atlasdb/pull/4762#pullrequestreview-410483080", "createdAt": "2020-05-12T23:05:44Z", "commit": {"oid": "a7c3f65613bf92dbbf66031f071fd73bb59fea2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMzowNTo0NFrOGUb_Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMzowNTo0NFrOGUb_Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA4MzI1NA==", "bodyText": "I think dialogue-clients should give you everything you need - don't think you need -serde or -hc4-client.", "url": "https://github.com/palantir/atlasdb/pull/4762#discussion_r424083254", "createdAt": "2020-05-12T23:05:44Z", "author": {"login": "iamdanfox"}, "path": "atlasdb-conjure/build.gradle", "diffHunk": "@@ -4,7 +4,12 @@ dependencies {\n   compile project(':atlasdb-commons')\n   compile project(':atlasdb-remoting-api')\n \n-  compile group: 'com.palantir.conjure.java.runtime', name: 'conjure-java-jaxrs-client'\n+  implementation 'com.palantir.refreshable:refreshable'\n+  implementation 'com.palantir.dialogue:dialogue-apache-hc4-client'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7c3f65613bf92dbbf66031f071fd73bb59fea2b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNDgzOTM0", "url": "https://github.com/palantir/atlasdb/pull/4762#pullrequestreview-410483934", "createdAt": "2020-05-12T23:07:55Z", "commit": {"oid": "a7c3f65613bf92dbbf66031f071fd73bb59fea2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMzowNzo1NVrOGUcCQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMzowNzo1NVrOGUcCQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA4NDAzMg==", "bodyText": "Can utilities like this be package-private? I know you guys don't use revapi right now, but I think if you made more of your stuff package-private maybe you could?", "url": "https://github.com/palantir/atlasdb/pull/4762#discussion_r424084032", "createdAt": "2020-05-12T23:07:55Z", "author": {"login": "iamdanfox"}, "path": "atlasdb-conjure/src/main/java/com/palantir/atlasdb/http/v2/DialogueClientOptions.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.atlasdb.http.v2;\n+\n+import java.util.Map;\n+\n+import com.palantir.atlasdb.config.AuxiliaryRemotingParameters;\n+import com.palantir.atlasdb.config.ServerListConfig;\n+import com.palantir.common.streams.KeyedStream;\n+import com.palantir.conjure.java.api.config.service.PartialServiceConfiguration;\n+import com.palantir.conjure.java.api.config.service.ServicesConfigBlock;\n+import com.palantir.logsafe.exceptions.SafeIllegalStateException;\n+\n+public final class DialogueClientOptions {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7c3f65613bf92dbbf66031f071fd73bb59fea2b"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2826, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}