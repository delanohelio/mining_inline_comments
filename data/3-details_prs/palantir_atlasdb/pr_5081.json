{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMTkxMzY5", "number": 5081, "title": "Fail on compiler warnings", "bodyText": "Goals (and why):\nCatch bugs at compile time rather than runtime.\nImplementation Description (bullets):\nEnable -Werror, and disable error-prone on generated projects (those suffixed -protobufs).\nWarnings that do not currently pass are disabled for now, allowing current and new checks to be automatically validated.\nTesting (What was existing testing like?  What have you done to improve it?):\nThese are tests.\nConcerns (what feedback would you like?):\nWhere should we start reviewing?:\ngradle files.\nPriority (whenever / two weeks / yesterday):\nThe sooner it merges, the less likely we are to regress.", "createdAt": "2020-10-26T17:28:36Z", "url": "https://github.com/palantir/atlasdb/pull/5081", "merged": true, "mergeCommit": {"oid": "bbcad9eac1cbf82158df0b66b98c724ec9f3c645"}, "closed": true, "closedAt": "2020-10-26T18:13:06Z", "author": {"login": "carterkozak"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWXw5wAH2gAyNTEwMTkxMzY5OjI3ZGE4MTk1YzFhZGU2ZWYwMDk4ZDdjOGUwNjdlMjc0NWUyN2I2YzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWZBHigFqTUxNzA4MTg5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "27da8195c1ade6ef0098d7c8e067e2745e27b6c0", "author": {"user": {"login": "carterkozak", "name": "Carter Kozak"}}, "url": "https://github.com/palantir/atlasdb/commit/27da8195c1ade6ef0098d7c8e067e2745e27b6c0", "committedDate": "2020-10-26T17:24:48Z", "message": "Fix non-error-prone compiler warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ebce2e33bdc3f8a20eb460f031a3df9ba70cbeb", "author": {"user": {"login": "carterkozak", "name": "Carter Kozak"}}, "url": "https://github.com/palantir/atlasdb/commit/8ebce2e33bdc3f8a20eb460f031a3df9ba70cbeb", "committedDate": "2020-10-26T17:24:54Z", "message": "Suppress failing error-prone checks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDE1OTAw", "url": "https://github.com/palantir/atlasdb/pull/5081#pullrequestreview-517015900", "createdAt": "2020-10-26T17:29:37Z", "commit": {"oid": "8ebce2e33bdc3f8a20eb460f031a3df9ba70cbeb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzoyOTozN1rOHoasdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzoyOTozN1rOHoasdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0MjQ1Mw==", "bodyText": "Potential data correctness issues, we should fix the underlying code and enforce this asap.", "url": "https://github.com/palantir/atlasdb/pull/5081#discussion_r512142453", "createdAt": "2020-10-26T17:29:37Z", "author": {"login": "carterkozak"}, "path": "build.gradle", "diffHunk": "@@ -107,23 +107,98 @@ allprojects {\n     }\n \n     tasks.withType(JavaCompile) {\n+        options.compilerArgs += ['-Werror']\n         // temporarily relax constraints until we can fix all violations\n-        options.errorprone.warn 'CatchBlockLogException',\n+        options.errorprone.disable 'AlmostJavadoc', \n+                'AnnotateFormatMethod',\n+                'ArrayAsKeyOfSetOrMap',\n+                'AssertEqualsArgumentOrderChecker',\n+                'AssertionFailureIgnored',\n+                'ByteBufferBackingArray',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ebce2e33bdc3f8a20eb460f031a3df9ba70cbeb"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDE2NTQ3", "url": "https://github.com/palantir/atlasdb/pull/5081#pullrequestreview-517016547", "createdAt": "2020-10-26T17:30:23Z", "commit": {"oid": "8ebce2e33bdc3f8a20eb460f031a3df9ba70cbeb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzozMDoyNFrOHoaugg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzozMDoyNFrOHoaugg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0Mjk3OA==", "bodyText": "Trivial to fix (as many of these are), should be done in a follow-up.", "url": "https://github.com/palantir/atlasdb/pull/5081#discussion_r512142978", "createdAt": "2020-10-26T17:30:24Z", "author": {"login": "carterkozak"}, "path": "build.gradle", "diffHunk": "@@ -107,23 +107,98 @@ allprojects {\n     }\n \n     tasks.withType(JavaCompile) {\n+        options.compilerArgs += ['-Werror']\n         // temporarily relax constraints until we can fix all violations\n-        options.errorprone.warn 'CatchBlockLogException',\n+        options.errorprone.disable 'AlmostJavadoc', \n+                'AnnotateFormatMethod',\n+                'ArrayAsKeyOfSetOrMap',\n+                'AssertEqualsArgumentOrderChecker',\n+                'AssertionFailureIgnored',\n+                'ByteBufferBackingArray',\n+                'CacheLoaderNull',\n+                'CatchBlockLogException',\n+                'CatchFail',\n                 'CheckReturnValue',\n+                'ClassCanBeStatic',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ebce2e33bdc3f8a20eb460f031a3df9ba70cbeb"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDM3Mjg5", "url": "https://github.com/palantir/atlasdb/pull/5081#pullrequestreview-517037289", "createdAt": "2020-10-26T17:54:49Z", "commit": {"oid": "8ebce2e33bdc3f8a20eb460f031a3df9ba70cbeb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDgxODkz", "url": "https://github.com/palantir/atlasdb/pull/5081#pullrequestreview-517081893", "createdAt": "2020-10-26T18:52:25Z", "commit": {"oid": "8ebce2e33bdc3f8a20eb460f031a3df9ba70cbeb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxODo1MjoyNVrOHod29g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxODo1MjoyNVrOHod29g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE5NDI5NA==", "bodyText": "Note this upgrade reduced the gradle CONFIGURING time from ~50 seconds to ~4 seconds on my machine.", "url": "https://github.com/palantir/atlasdb/pull/5081#discussion_r512194294", "createdAt": "2020-10-26T18:52:25Z", "author": {"login": "carterkozak"}, "path": "build.gradle", "diffHunk": "@@ -31,7 +31,7 @@ buildscript {\n plugins {\n     id 'com.github.johnrengelman.shadow' version '5.1.0'\n     id 'com.palantir.configuration-resolver' version '0.4.0'\n-    id 'com.palantir.consistent-versions' version '1.17.3'\n+    id 'com.palantir.consistent-versions' version '1.26.1'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ebce2e33bdc3f8a20eb460f031a3df9ba70cbeb"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2435, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}