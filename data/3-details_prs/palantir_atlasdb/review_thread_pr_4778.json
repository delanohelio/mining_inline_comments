{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MjA0MzUw", "number": 4778, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwODoyNzoyNVrOD8x8OA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1NjowOFrOD84deg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MDU5Mzg0OnYy", "diffSide": "RIGHT", "path": "atlasdb-config/src/main/java/com/palantir/atlasdb/config/AtlasDbConfig.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwODoyNzoyNVrOGV7Xlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwOTo0MjowNlrOGV95RQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY0NTk3NQ==", "bodyText": "AtlasDbConfig is the wrong place, this should really be in TransactionManagers (and mark the method as 'deprecated').", "url": "https://github.com/palantir/atlasdb/pull/4778#discussion_r425645975", "createdAt": "2020-05-15T08:27:25Z", "author": {"login": "j-baker"}, "path": "atlasdb-config/src/main/java/com/palantir/atlasdb/config/AtlasDbConfig.java", "diffHunk": "@@ -271,6 +272,16 @@ public int getDefaultLockTimeoutSeconds() {\n      */\n     public abstract Optional<TimestampCache> timestampCache();\n \n+    /**\n+     * If set, a {@link com.palantir.dialogue.clients.DialogueClients.ReloadingFactory} that a\n+     * {@link com.palantir.atlasdb.transaction.api.TransactionManager} based on this configuration should use.\n+     * This may be useful for ensuring that connection pools are shared between multitenant services, for instance.\n+     *\n+     * WARNING: Providing reloading factories to multiple distinct TimeLock servers may result in undefined\n+     * behaviour.\n+     */\n+    public abstract Optional<DialogueClients.ReloadingFactory> reloadingFactory();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4eefbdecf2505f3f5513fa2fbd1d112fa16f9d6"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY0NjY1OQ==", "bodyText": "AtlasDbConfig is json deserializable, this cannot actually be json deserialized to.", "url": "https://github.com/palantir/atlasdb/pull/4778#discussion_r425646659", "createdAt": "2020-05-15T08:28:41Z", "author": {"login": "j-baker"}, "path": "atlasdb-config/src/main/java/com/palantir/atlasdb/config/AtlasDbConfig.java", "diffHunk": "@@ -271,6 +272,16 @@ public int getDefaultLockTimeoutSeconds() {\n      */\n     public abstract Optional<TimestampCache> timestampCache();\n \n+    /**\n+     * If set, a {@link com.palantir.dialogue.clients.DialogueClients.ReloadingFactory} that a\n+     * {@link com.palantir.atlasdb.transaction.api.TransactionManager} based on this configuration should use.\n+     * This may be useful for ensuring that connection pools are shared between multitenant services, for instance.\n+     *\n+     * WARNING: Providing reloading factories to multiple distinct TimeLock servers may result in undefined\n+     * behaviour.\n+     */\n+    public abstract Optional<DialogueClients.ReloadingFactory> reloadingFactory();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY0NTk3NQ=="}, "originalCommit": {"oid": "d4eefbdecf2505f3f5513fa2fbd1d112fa16f9d6"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY4NzM2NQ==", "bodyText": "Hmm, yeah it did feel like a better TransactionManagers fit, though I originally dumped it in AtlasDbConfig because the shared timestamp cache is there. I\u2019ll move this across", "url": "https://github.com/palantir/atlasdb/pull/4778#discussion_r425687365", "createdAt": "2020-05-15T09:42:06Z", "author": {"login": "jeremyk-91"}, "path": "atlasdb-config/src/main/java/com/palantir/atlasdb/config/AtlasDbConfig.java", "diffHunk": "@@ -271,6 +272,16 @@ public int getDefaultLockTimeoutSeconds() {\n      */\n     public abstract Optional<TimestampCache> timestampCache();\n \n+    /**\n+     * If set, a {@link com.palantir.dialogue.clients.DialogueClients.ReloadingFactory} that a\n+     * {@link com.palantir.atlasdb.transaction.api.TransactionManager} based on this configuration should use.\n+     * This may be useful for ensuring that connection pools are shared between multitenant services, for instance.\n+     *\n+     * WARNING: Providing reloading factories to multiple distinct TimeLock servers may result in undefined\n+     * behaviour.\n+     */\n+    public abstract Optional<DialogueClients.ReloadingFactory> reloadingFactory();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY0NTk3NQ=="}, "originalCommit": {"oid": "d4eefbdecf2505f3f5513fa2fbd1d112fa16f9d6"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MDYwMTUwOnYy", "diffSide": "RIGHT", "path": "changelog/@unreleased/pr-4778.v2.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwODoyOTozNlrOGV7chg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwODoyOTozNlrOGV7chg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY0NzIzOA==", "bodyText": "Please don't use 'multitenant' in this context, the noun is already 'taken' so it's likely to be confusing.", "url": "https://github.com/palantir/atlasdb/pull/4778#discussion_r425647238", "createdAt": "2020-05-15T08:29:36Z", "author": {"login": "j-baker"}, "path": "changelog/@unreleased/pr-4778.v2.yml", "diffHunk": "@@ -0,0 +1,8 @@\n+type: improvement\n+improvement:\n+  description: AtlasDB now allows users to pass in a `DialogueClients.ReloadingFactory`\n+    in install configuration. This is likely to be useful for multitenant users of", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4eefbdecf2505f3f5513fa2fbd1d112fa16f9d6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MTY2MjAyOnYy", "diffSide": "RIGHT", "path": "changelog/@unreleased/pr-4778.v2.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1NjowOFrOGWF8Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzo1NjowOFrOGWF8Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgxOTIxMA==", "bodyText": "\ud83d\udd2a", "url": "https://github.com/palantir/atlasdb/pull/4778#discussion_r425819210", "createdAt": "2020-05-15T13:56:08Z", "author": {"login": "gmaretic"}, "path": "changelog/@unreleased/pr-4778.v2.yml", "diffHunk": "@@ -0,0 +1,8 @@\n+type: improvement\n+improvement:\n+  description: AtlasDB now allows users to pass in a `DialogueClients.ReloadingFactory`\n+    in install configuration. This is likely to be useful for AtlasDB-Proxy, which", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f42b0f0228654a082b88cde6c9a2a2d9803b2615"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2849, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}