{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NDc5NTM1", "number": 4866, "title": "Adjust AssertUtils to be safelogging compatible", "bodyText": "Format string and args will be passed to slf4j directly,\ninstead of doing our own manual formatting.\nHelps with whitelisting logging on internal repo.", "createdAt": "2020-06-24T20:34:34Z", "url": "https://github.com/palantir/atlasdb/pull/4866", "merged": true, "mergeCommit": {"oid": "f5b936de0c8b8908d32efc86996520876273a366"}, "closed": true, "closedAt": "2020-07-08T18:50:33Z", "author": {"login": "dxiao"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcugGDFAH2gAyNDM5NDc5NTM1OjYyODc3NWVhYmI1NWVkOTA3ZDBiOWVmYzhkMjVkYmQ2NWZhNzZmOTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcy_DuZgFqTQ0NTA0MDk4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "628775eabb55ed907d0b9efc8d25dbd65fa76f96", "author": {"user": null}, "url": "https://github.com/palantir/atlasdb/commit/628775eabb55ed907d0b9efc8d25dbd65fa76f96", "committedDate": "2020-06-24T20:30:10Z", "message": "Adjust AssertUtils to be safelogging compatible\n\nFormat string and args will be passed to slf4j directly,\ninstead of doing our own manual formatting."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2fedcb89e627931eeb359557704d85ac4d94d27", "author": {"user": null}, "url": "https://github.com/palantir/atlasdb/commit/d2fedcb89e627931eeb359557704d85ac4d94d27", "committedDate": "2020-06-24T20:30:10Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MDAzODcz", "url": "https://github.com/palantir/atlasdb/pull/4866#pullrequestreview-437003873", "createdAt": "2020-06-24T21:01:36Z", "commit": {"oid": "d2fedcb89e627931eeb359557704d85ac4d94d27"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQyMTowMTozN1rOGoi_yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQyMTowMTozN1rOGoi_yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE2OTYwOQ==", "bodyText": "Have you verified this works as expected? I think the throwable needs to be the last parameter.", "url": "https://github.com/palantir/atlasdb/pull/4866#discussion_r445169609", "createdAt": "2020-06-24T21:01:37Z", "author": {"login": "carterkozak"}, "path": "atlasdb-commons/src/main/java/com/palantir/util/AssertUtils.java", "diffHunk": "@@ -119,7 +120,11 @@ public static void assertAndLogWithException(boolean cheapTest, String msg, Thro\n     public static void assertAndLogWithException(Logger log, boolean cheapTest, String format, Throwable t,\n             Object... args) {\n         if (!cheapTest) {\n-            assertAndLogWithException(log, false, String.format(format, args), t);\n+            Object[] newArgs = new Object[args.length + 1];\n+            newArgs[0] = t;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2fedcb89e627931eeb359557704d85ac4d94d27"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "000ff63652c5308bf83a7c670a8012c17d90b8d5", "author": {"user": null}, "url": "https://github.com/palantir/atlasdb/commit/000ff63652c5308bf83a7c670a8012c17d90b8d5", "committedDate": "2020-06-24T22:26:49Z", "message": "Fixup order of arguments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MzE3Mjc1", "url": "https://github.com/palantir/atlasdb/pull/4866#pullrequestreview-439317275", "createdAt": "2020-06-29T16:36:36Z", "commit": {"oid": "000ff63652c5308bf83a7c670a8012c17d90b8d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjozNjozNlrOGqZFXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjozNjozNlrOGqZFXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzEwNDM1MA==", "bodyText": "Unfortunately this generally isn't allowed in gradle-baseline. I'm not sure what a good solution here is: separately doing a string substitution, maybe?", "url": "https://github.com/palantir/atlasdb/pull/4866#discussion_r447104350", "createdAt": "2020-06-29T16:36:36Z", "author": {"login": "jeremyk-91"}, "path": "atlasdb-commons/src/main/java/com/palantir/util/AssertUtils.java", "diffHunk": "@@ -119,7 +121,10 @@ public static void assertAndLogWithException(boolean cheapTest, String msg, Thro\n     public static void assertAndLogWithException(Logger log, boolean cheapTest, String format, Throwable t,\n             Object... args) {\n         if (!cheapTest) {\n-            assertAndLogWithException(log, false, String.format(format, args), t);\n+            Object[] newArgs = Arrays.copyOf(args, args.length + 1);\n+            newArgs[args.length] = t;\n+            log.error(\"Assertion \" + format + \" with exception \", newArgs);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "000ff63652c5308bf83a7c670a8012c17d90b8d5"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6be83733c6bf3947ac4106f76f0d63ffcafe1b23", "author": {"user": null}, "url": "https://github.com/palantir/atlasdb/commit/6be83733c6bf3947ac4106f76f0d63ffcafe1b23", "committedDate": "2020-07-02T17:02:48Z", "message": "Merge remote-tracking branch 'refs/remotes/origin/develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c576f66dec39e82aac9e699515b37b3010fca03", "author": {"user": null}, "url": "https://github.com/palantir/atlasdb/commit/1c576f66dec39e82aac9e699515b37b3010fca03", "committedDate": "2020-07-02T17:10:12Z", "message": "Address gradle-baseline issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b015c56bfe684e7ba1da8c7002a04ef869140182", "author": {"user": null}, "url": "https://github.com/palantir/atlasdb/commit/b015c56bfe684e7ba1da8c7002a04ef869140182", "committedDate": "2020-07-02T19:00:41Z", "message": "Fix PostgresVersionCheckTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b842575b851e36b341c96168be4f5823253d74e8", "author": {"user": null}, "url": "https://github.com/palantir/atlasdb/commit/b842575b851e36b341c96168be4f5823253d74e8", "committedDate": "2020-07-02T21:13:57Z", "message": "Actually fix it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd0d3fb560cebae7d89d9ee9ab81ad27c4b727de", "author": {"user": null}, "url": "https://github.com/palantir/atlasdb/commit/cd0d3fb560cebae7d89d9ee9ab81ad27c4b727de", "committedDate": "2020-07-02T21:15:00Z", "message": "organize imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MDQwOTg4", "url": "https://github.com/palantir/atlasdb/pull/4866#pullrequestreview-445040988", "createdAt": "2020-07-08T18:50:23Z", "commit": {"oid": "cd0d3fb560cebae7d89d9ee9ab81ad27c4b727de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2697, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}