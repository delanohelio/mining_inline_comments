{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNzUxNzQ4", "number": 4673, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMDoxMDo0M1rODrYTdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMDoxMDo0M1rODrYTdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2ODEzNTU2OnYy", "diffSide": "RIGHT", "path": "atlasdb-client/src/main/java/com/palantir/atlasdb/util/TaggedMetricsInvocationEventHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMDoxMDo0M1rOF7saMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMDoxMDo0M1rOF7saMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODEzNzkwNw==", "bodyText": "nit: orElseGet(() -> ... (as CircleCI kindly pointed out).", "url": "https://github.com/palantir/atlasdb/pull/4673#discussion_r398137907", "createdAt": "2020-03-25T20:10:43Z", "author": {"login": "Jolyon-S"}, "path": "atlasdb-client/src/main/java/com/palantir/atlasdb/util/TaggedMetricsInvocationEventHandler.java", "diffHunk": "@@ -169,9 +170,16 @@ public void onFailure(@Nullable InvocationContext context, @Nonnull Throwable ca\n         }\n \n         String failuresMetricName = InstrumentationUtils.getFailuresMetricName(context, serviceName);\n-        taggedMetricRegistry.meter(MetricName.builder().safeName(failuresMetricName).build()).mark();\n-        taggedMetricRegistry.meter(MetricName.builder().safeName(\n-                MetricRegistry.name(failuresMetricName, cause.getClass().getName())).build())\n+        Map<String, String> tags = tagFunction.map(f -> f.apply(context)).orElse(ImmutableMap.of());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17fb6567af36c1f6839cc8693e76cdd266516f8d"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3002, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}