{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNTUyNzU1", "number": 4794, "title": "[Dialogue] Part 9: Shims for Lesser Used Services: AtlasDB -> TimeLock", "bodyText": "Goals (and why):\n\nImprove performance on lesser used services to some extent\nDon't go through the pain/effort of fully Conjurising these services.\n\nImplementation Description (bullets):\n\nAllow the usage of the JaxRs client shim for Dialogue across lesser used services.\n\nTesting (What was existing testing like?  What have you done to improve it?):\n\nExisting integration tests should suffice.\n\nConcerns (what feedback would you like?):\nNothing in particular. Does the organisation make sense?\nWhere should we start reviewing?: AtlasDbDialogueServiceProvider\nPriority (whenever / two weeks / yesterday): this week", "createdAt": "2020-05-21T20:01:25Z", "url": "https://github.com/palantir/atlasdb/pull/4794", "merged": true, "mergeCommit": {"oid": "b246de59728aec2c63dcefa96d50268c3a37c6eb"}, "closed": true, "closedAt": "2020-05-26T13:42:42Z", "author": {"login": "jeremyk-91"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjiqpRgH2gAyNDIxNTUyNzU1OjgwZjNiN2FmNjg0MTM2N2M4YjM0ZDFlZjlhZDhiYWRjNGIxMTYzMTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclCLLbAFqTQxODE2Njg2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "80f3b7af6841367c8b34d1ef9ad8badc4b116317", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/80f3b7af6841367c8b34d1ef9ad8badc4b116317", "committedDate": "2020-05-21T19:16:47Z", "message": "Shims"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48b2aed6896e776267e5fb36a0c513e9c150ad54", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/48b2aed6896e776267e5fb36a0c513e9c150ad54", "committedDate": "2020-05-21T19:16:55Z", "message": "Dialogue shim factory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d931a57dd997161268e04b26e5966d148becd1ae", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/d931a57dd997161268e04b26e5966d148becd1ae", "committedDate": "2020-05-21T19:33:28Z", "message": "More descriptive builders"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0812eb2ea16b11076aee6909ffbf3f486bd4177", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/b0812eb2ea16b11076aee6909ffbf3f486bd4177", "committedDate": "2020-05-21T19:36:25Z", "message": "Imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adf993304bc011d16af72666086960daf5b43a28", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/adf993304bc011d16af72666086960daf5b43a28", "committedDate": "2020-05-21T19:36:25Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2ODcxMzg5", "url": "https://github.com/palantir/atlasdb/pull/4794#pullrequestreview-416871389", "createdAt": "2020-05-22T12:28:30Z", "commit": {"oid": "adf993304bc011d16af72666086960daf5b43a28"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjoyODozMFrOGZVVEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjoyODozMFrOGZVVEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxNzA0MA==", "bodyText": "I'd recommend putting the word 'shim' in here so that it's super clear which ones are using the 'full dialogue' codegen vs the feign thingy.", "url": "https://github.com/palantir/atlasdb/pull/4794#discussion_r429217040", "createdAt": "2020-05-22T12:28:30Z", "author": {"login": "iamdanfox"}, "path": "atlasdb-config/src/main/java/com/palantir/atlasdb/http/AtlasDbHttpClients.java", "diffHunk": "@@ -80,6 +83,14 @@ private AtlasDbHttpClients() {\n         return wrapWithOkHttpBugHandling(type, clientFactory);\n     }\n \n+    public static <T> T createDialogueProxy(TaggedMetricRegistry registry, Class<T> type, Channel channel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adf993304bc011d16af72666086960daf5b43a28"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2ODcxNTAy", "url": "https://github.com/palantir/atlasdb/pull/4794#pullrequestreview-416871502", "createdAt": "2020-05-22T12:28:43Z", "commit": {"oid": "adf993304bc011d16af72666086960daf5b43a28"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjoyODo0NFrOGZVVaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjoyODo0NFrOGZVVaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxNzEyOQ==", "bodyText": "only used in one place... inline?", "url": "https://github.com/palantir/atlasdb/pull/4794#discussion_r429217129", "createdAt": "2020-05-22T12:28:44Z", "author": {"login": "iamdanfox"}, "path": "atlasdb-conjure/src/main/java/com/palantir/atlasdb/http/v2/DialogueShimFactory.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.atlasdb.http.v2;\n+\n+import com.palantir.conjure.java.client.jaxrs.JaxRsClient;\n+import com.palantir.conjure.java.dialogue.serde.DefaultConjureRuntime;\n+import com.palantir.dialogue.Channel;\n+\n+public final class DialogueShimFactory {\n+    private DialogueShimFactory() {\n+        // N\u00f6\n+    }\n+\n+    public static <T> T create(Class<T> type, Channel channel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adf993304bc011d16af72666086960daf5b43a28"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTY2ODYw", "url": "https://github.com/palantir/atlasdb/pull/4794#pullrequestreview-418166860", "createdAt": "2020-05-26T10:26:44Z", "commit": {"oid": "adf993304bc011d16af72666086960daf5b43a28"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDoyNjo0NVrOGaYIYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDozMzowM1rOGaYVZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMxMTUyMw==", "bodyText": "\ud83c\udf89", "url": "https://github.com/palantir/atlasdb/pull/4794#discussion_r430311523", "createdAt": "2020-05-26T10:26:45Z", "author": {"login": "gmaretic"}, "path": "atlasdb-conjure/src/main/java/com/palantir/atlasdb/http/v2/DialogueShimFactory.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.atlasdb.http.v2;\n+\n+import com.palantir.conjure.java.client.jaxrs.JaxRsClient;\n+import com.palantir.conjure.java.dialogue.serde.DefaultConjureRuntime;\n+import com.palantir.dialogue.Channel;\n+\n+public final class DialogueShimFactory {\n+    private DialogueShimFactory() {\n+        // N\u00f6", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adf993304bc011d16af72666086960daf5b43a28"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMxNDg1NQ==", "bodyText": "\ud83c\udf89", "url": "https://github.com/palantir/atlasdb/pull/4794#discussion_r430314855", "createdAt": "2020-05-26T10:33:03Z", "author": {"login": "gmaretic"}, "path": "atlasdb-config/src/main/java/com/palantir/atlasdb/factory/TransactionManagers.java", "diffHunk": "@@ -1305,4 +1325,20 @@ default Runnable close() {\n         TransactionService transactionService();\n         Optional<TransactionSchemaInstaller> schemaInstaller();\n     }\n+\n+    @Value.Immutable\n+    @Value.Style(stagedBuilder = false)\n+    public interface RemoteProxies<T> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adf993304bc011d16af72666086960daf5b43a28"}, "originalPosition": 66}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2872, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}