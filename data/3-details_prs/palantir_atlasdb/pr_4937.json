{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2MTQ3OTM5", "number": 4937, "title": "Reuse Dialogue Factory in Timelock Adjudication Service", "bodyText": "Goals (and why):\n\nReuse Dialogue clients as much as possible, for performance reasons.\n\nImplementation Description (bullets):\n\nTimeLock Adjudication created its own ReloadingFactory, but it should use the same base one as the normal TimeLock client, and where it's provided (e.g. in AtlasDB Proxy) we really should reuse them.\n\nTesting (What was existing testing like?  What have you done to improve it?):\n\nNone :( Is there a good way to test this?\n\nConcerns (what feedback would you like?):\n\nIs there a good way to test this?\n\nWhere should we start reviewing?: small\nPriority (whenever / two weeks / yesterday): this week please", "createdAt": "2020-08-11T14:38:37Z", "url": "https://github.com/palantir/atlasdb/pull/4937", "merged": true, "mergeCommit": {"oid": "eda6513b192b3169ef4ba40c1cbe7e6ba529d1e1"}, "closed": true, "closedAt": "2020-08-14T13:37:46Z", "author": {"login": "jeremyk-91"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc93tfqAH2gAyNDY2MTQ3OTM5OjZmZTc5NmFkMzgyYWUwODQwMzFmZmMxNDY3MGEyYjJkMWU5ZGJmMDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-0O_9AH2gAyNDY2MTQ3OTM5OjEzNDdiNDY3NTAwNWEyOTg1NjA1YWJiYWU5ZWEzYWE1YTc4YWNhOGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6fe796ad382ae084031ffc14670a2b2d1e9dbf09", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/6fe796ad382ae084031ffc14670a2b2d1e9dbf09", "committedDate": "2020-08-11T14:29:56Z", "message": "Reuse in adjudicaiton"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d1f205163055534f4213a3ca28ab28e909c71ee", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/2d1f205163055534f4213a3ca28ab28e909c71ee", "committedDate": "2020-08-11T14:29:56Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f22196fca4c44f4dd9bcdcf3e1a1e32bf42f147f", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/f22196fca4c44f4dd9bcdcf3e1a1e32bf42f147f", "committedDate": "2020-08-11T14:29:56Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1MTM5MTYx", "url": "https://github.com/palantir/atlasdb/pull/4937#pullrequestreview-465139161", "createdAt": "2020-08-11T14:44:05Z", "commit": {"oid": "f22196fca4c44f4dd9bcdcf3e1a1e32bf42f147f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1MTM5NzI3", "url": "https://github.com/palantir/atlasdb/pull/4937#pullrequestreview-465139727", "createdAt": "2020-08-11T14:44:39Z", "commit": {"oid": "f22196fca4c44f4dd9bcdcf3e1a1e32bf42f147f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxNDo0NDo0MFrOG-7V6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxNDo0NDo0MFrOG-7V6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYzNzE2MQ==", "bodyText": "The default cached executor is fine here, doesn't really matter either way.", "url": "https://github.com/palantir/atlasdb/pull/4937#discussion_r468637161", "createdAt": "2020-08-11T14:44:40Z", "author": {"login": "carterkozak"}, "path": "atlasdb-config/src/test/java/com/palantir/atlasdb/factory/TransactionManagersTest.java", "diffHunk": "@@ -917,7 +918,11 @@ private void verifyFeedbackIsReportedToService() {\n                 Refreshable.create(mockAtlasDbRuntimeConfig);\n         Refreshable<List<TimeLockClientFeedbackService>> timeLockClientFeedbackServices =\n                 TransactionManagers.getTimeLockClientFeedbackServices(\n-                        config, refreshableRuntimeConfig, USER_AGENT);\n+                        config,\n+                        refreshableRuntimeConfig,\n+                        USER_AGENT,\n+                        DialogueClients.create(Refreshable.only(ServicesConfigBlock.builder().build()))\n+                                .withBlockingExecutor(PTExecutors.newCachedThreadPool(\"atlas-dialogue-blocking\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f22196fca4c44f4dd9bcdcf3e1a1e32bf42f147f"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1MTQxMjU0", "url": "https://github.com/palantir/atlasdb/pull/4937#pullrequestreview-465141254", "createdAt": "2020-08-11T14:46:09Z", "commit": {"oid": "f22196fca4c44f4dd9bcdcf3e1a1e32bf42f147f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61c1f94792680e533fcd149ecf459d8df9401f17", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/61c1f94792680e533fcd149ecf459d8df9401f17", "committedDate": "2020-08-11T14:53:38Z", "message": "use default cached exec"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1MzE5MjM0", "url": "https://github.com/palantir/atlasdb/pull/4937#pullrequestreview-465319234", "createdAt": "2020-08-11T18:23:51Z", "commit": {"oid": "61c1f94792680e533fcd149ecf459d8df9401f17"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxODoyMzo1MVrOG_D7Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxODoyMzo1MVrOG_D7Bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc3NzczNA==", "bodyText": "Sorry I wasn't clear, I meant that we can remove this line entirely, but it doesn't hurt anything to leave around either.", "url": "https://github.com/palantir/atlasdb/pull/4937#discussion_r468777734", "createdAt": "2020-08-11T18:23:51Z", "author": {"login": "carterkozak"}, "path": "atlasdb-config/src/test/java/com/palantir/atlasdb/factory/TransactionManagersTest.java", "diffHunk": "@@ -922,7 +922,7 @@ private void verifyFeedbackIsReportedToService() {\n                         refreshableRuntimeConfig,\n                         USER_AGENT,\n                         DialogueClients.create(Refreshable.only(ServicesConfigBlock.builder().build()))\n-                                .withBlockingExecutor(PTExecutors.newCachedThreadPool(\"atlas-dialogue-blocking\")));\n+                                .withBlockingExecutor(PTExecutors.newCachedThreadPool()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61c1f94792680e533fcd149ecf459d8df9401f17"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "667f9471426c665d12e244c6cf3609ac7502d4bd", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/667f9471426c665d12e244c6cf3609ac7502d4bd", "committedDate": "2020-08-12T22:10:57Z", "message": "Actuallly fix Carter's comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MzEzNTM2", "url": "https://github.com/palantir/atlasdb/pull/4937#pullrequestreview-466313536", "createdAt": "2020-08-12T22:14:31Z", "commit": {"oid": "667f9471426c665d12e244c6cf3609ac7502d4bd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1347b4675005a2985605abbae9ea3aa5a78aca8d", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/1347b4675005a2985605abbae9ea3aa5a78aca8d", "committedDate": "2020-08-14T13:00:50Z", "message": "unused import"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2779, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}