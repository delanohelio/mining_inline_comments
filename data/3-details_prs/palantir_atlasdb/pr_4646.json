{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2OTE4MDI5", "number": 4646, "title": "[PDS-113496] Martin Lewis's Muse Part 1: Snapshot Transaction", "bodyText": "Goals (and why):\n\nSee internal ticket.\nHaving fewer metrics saves money.\n\nImplementation Description (bullets):\n\nCounters don't publish a 1m rate metric while meters do, but a lot of our 1m rate metrics are nto being used.\nChange cell filter based metrics and broad cells-read metrics to use counters, not meters.\n\nTesting (What was existing testing like?  What have you done to improve it?): none\nConcerns (what feedback would you like?):\n\nThe cells read metric is actually used, but you really should be using per_second(count) in internal infrastructure. It's true that that is different from the 1m rate, but I don't think the difference is material here.\n\nWhere should we start reviewing?: no preference, it's small\nPriority (whenever / two weeks / yesterday): this week please", "createdAt": "2020-03-11T21:00:20Z", "url": "https://github.com/palantir/atlasdb/pull/4646", "merged": true, "mergeCommit": {"oid": "ffc9fc05114ad31c3bf22edd3ef0fb70e6da6758"}, "closed": true, "closedAt": "2020-03-24T12:14:31Z", "author": {"login": "jeremyk-91"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMtiOWgH2gAyMzg2OTE4MDI5OjJmZjgzMTJhMWM2M2Y1Njg2ZGU0YjdiNmJjMDNiZThhMWFmZGQwNmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQxJMwAH2gAyMzg2OTE4MDI5OmU0ZTdmOGU3ZGMyNmFjZjhkMDQzOTg3Y2FlZTE2MmIxMWU3NTExNWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2ff8312a1c63f5686de4b7b6bc03be8a1afdd06a", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/2ff8312a1c63f5686de4b7b6bc03be8a1afdd06a", "committedDate": "2020-03-11T20:56:17Z", "message": "Snapshot Transaction Read and Cell Filter Metrics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "144213e4892567b4fc41f4e959212bf08bd21716", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/144213e4892567b4fc41f4e959212bf08bd21716", "committedDate": "2020-03-11T20:56:17Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NDY3MDI3", "url": "https://github.com/palantir/atlasdb/pull/4646#pullrequestreview-379467027", "createdAt": "2020-03-23T14:13:02Z", "commit": {"oid": "144213e4892567b4fc41f4e959212bf08bd21716"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDoxMzowMlrOF6HPtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDoxMzowMlrOF6HPtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ4MDQzOA==", "bodyText": "getMeter should now be unused right? can we get rid of that?", "url": "https://github.com/palantir/atlasdb/pull/4646#discussion_r396480438", "createdAt": "2020-03-23T14:13:02Z", "author": {"login": "felixdesouza"}, "path": "atlasdb-impl-shared/src/main/java/com/palantir/atlasdb/transaction/impl/SnapshotTransaction.java", "diffHunk": "@@ -2380,4 +2381,11 @@ private Meter getMeter(String name, TableReference tableRef) {\n                 name,\n                 metricsManager.getTableNameTagFor(tableRef));\n     }\n+\n+    private Counter getCounter(String name, TableReference tableRef) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "144213e4892567b4fc41f4e959212bf08bd21716"}, "originalPosition": 106}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "560a356331a478da41eae6d4efdcf57af0344b28", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/560a356331a478da41eae6d4efdcf57af0344b28", "committedDate": "2020-03-23T15:58:55Z", "message": "Remove unused method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4e7f8e7dc26acf8d043987caee162b11e75115e", "author": {"user": {"login": "jeremyk-91", "name": "Jeremy Kong"}}, "url": "https://github.com/palantir/atlasdb/commit/e4e7f8e7dc26acf8d043987caee162b11e75115e", "committedDate": "2020-03-24T11:24:16Z", "message": "No more meters"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3140, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}