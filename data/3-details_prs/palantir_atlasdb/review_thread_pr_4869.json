{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNTk1Nzcx", "number": 4869, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNTo1MDo0N1rOEJLkyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjo0MjoxNlrOEJvhDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MDYyMjgyOnYy", "diffSide": "RIGHT", "path": "lock-api/src/main/java/com/palantir/lock/client/metrics/TimeLockFeedbackBackgroundTask.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNTo1MDo0N1rOGpl7cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNTo1MDo0N1rOGpl7cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI2NjIyNg==", "bodyText": "remove it for now", "url": "https://github.com/palantir/atlasdb/pull/4869#discussion_r446266226", "createdAt": "2020-06-26T15:50:47Z", "author": {"login": "sudiksha27"}, "path": "lock-api/src/main/java/com/palantir/lock/client/metrics/TimeLockFeedbackBackgroundTask.java", "diffHunk": "@@ -88,6 +93,7 @@ public void scheduleWithFixedDelay() {\n                         .atlasVersion(versionSupplier.get())\n                         .nodeId(nodeId)\n                         .serviceName(serviceName)\n+                        .namespace(namespace)\n                         .build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9f72eec3bd9d01e1df30469c2d28ee0ddb14d58"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NjUxMTQ4OnYy", "diffSide": "RIGHT", "path": "atlasdb-config/src/main/java/com/palantir/atlasdb/factory/TransactionManagers.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjo0MjoxNlrOGqZTFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNjo0MjoxNlrOGqZTFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzEwNzg2Mg==", "bodyText": "nit: could we make this Value.Derived, and/or have the service name take a Suppliers.memoize(() -> namespace())? I'm worried we're doing a bunch of unnecessary stream reads every time we look up the namespace.", "url": "https://github.com/palantir/atlasdb/pull/4869#discussion_r447107862", "createdAt": "2020-06-29T16:42:16Z", "author": {"login": "jeremyk-91"}, "path": "atlasdb-config/src/main/java/com/palantir/atlasdb/factory/TransactionManagers.java", "diffHunk": "@@ -614,13 +615,17 @@ private MetricsManager setUpMetricsAndGetMetricsManager() {\n     @VisibleForTesting\n     @Value.Derived\n     String serviceName() {\n-        return serviceIdentifierOverride().orElseGet(() -> Stream.of(config().namespace(),\n+        return serviceIdentifierOverride().orElseGet(this::namespace);\n+    }\n+\n+    private String namespace() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "656b4f8714e01af06ad518c7ba10b4cb6eb57d41"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2692, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}