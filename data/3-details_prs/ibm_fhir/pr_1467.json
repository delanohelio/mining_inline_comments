{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3MTM1NDcy", "number": 1467, "title": "Issue #1421 - update code validation to enforce new validation rules", "bodyText": "Signed-off-by: Mike Schroeder mschroed@us.ibm.com", "createdAt": "2020-09-01T14:49:45Z", "url": "https://github.com/IBM/FHIR/pull/1467", "merged": true, "mergeCommit": {"oid": "d2cd6f5c6cc5dd14d3b3098f1acd721098ea3acf"}, "closed": true, "closedAt": "2020-09-01T21:36:48Z", "author": {"login": "michaelwschroeder"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEojvBAH2gAyNDc3MTM1NDcyOjc0YWZmYTZjMzUwMmRlYzcxNmU1MWQyYjJkMzJkZGY2YWI2NGIyOTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEt3B3AFqTQ4MDExMDYyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "74affa6c3502dec716e51d2b2d32ddf6ab64b296", "author": {"user": {"login": "michaelwschroeder", "name": "Michael W Schroeder"}}, "url": "https://github.com/IBM/FHIR/commit/74affa6c3502dec716e51d2b2d32ddf6ab64b296", "committedDate": "2020-09-01T14:48:10Z", "message": "Issue #1421 - update code validation to enforce new validation rules\n\nSigned-off-by: Mike Schroeder <mschroed@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be", "author": {"user": {"login": "michaelwschroeder", "name": "Michael W Schroeder"}}, "url": "https://github.com/IBM/FHIR/commit/1c110f88085895e9e2a4c79a01b1e59c055ad1be", "committedDate": "2020-09-01T15:42:12Z", "message": "Issue #1421 - update carin-bb test for new validation warnings\n\nSigned-off-by: Mike Schroeder <mschroed@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTEwNzY1", "url": "https://github.com/IBM/FHIR/pull/1467#pullrequestreview-479910765", "createdAt": "2020-09-01T16:14:30Z", "commit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTQ3Mjg0", "url": "https://github.com/IBM/FHIR/pull/1467#pullrequestreview-479947284", "createdAt": "2020-09-01T17:01:31Z", "commit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNzowMTozMVrOHLAE0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNzowMTozMVrOHLAE0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTI5NzYxNw==", "bodyText": "because our object are immutable, you could actually \"cheat\" and re-use the same one in multiple places.\nstill, thats an optimization that probably isn't needed in the example generator, just wanted to make you aware of the possibility", "url": "https://github.com/IBM/FHIR/pull/1467#discussion_r481297617", "createdAt": "2020-09-01T17:01:31Z", "author": {"login": "lmsurpre"}, "path": "fhir-examples-generator/src/main/java/com/ibm/fhir/examples/DataCreatorBase.java", "diffHunk": "@@ -237,6 +239,16 @@ protected Object createArgument(Class<?> owningClass, Method builderMethod, Clas\n         return builder.extension(e);\n     }\n \n+    protected CodeableConcept.Builder setDataAbsentReasonCoding(CodeableConcept.Builder builder) {\n+        Coding coding = Coding.builder()\n+                .extension(Extension.builder()\n+                .url(\"http://hl7.org/fhir/StructureDefinition/data-absent-reason\")\n+                .value(Code.of(\"unknown\"))\n+                .build())\n+                .build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTcwMTgx", "url": "https://github.com/IBM/FHIR/pull/1467#pullrequestreview-479970181", "createdAt": "2020-09-01T17:33:20Z", "commit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNzozMzoyMFrOHLBLlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNzozMzoyMFrOHLBLlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMxNTczNA==", "bodyText": "does it also control whether we do syntax-based validation of UCUM and Language valuesets?", "url": "https://github.com/IBM/FHIR/pull/1467#discussion_r481315734", "createdAt": "2020-09-01T17:33:20Z", "author": {"login": "lmsurpre"}, "path": "fhir-model/src/main/java/com/ibm/fhir/model/config/FHIRModelConfig.java", "diffHunk": "@@ -39,10 +39,16 @@\n      */\n     public static final String PROPERTY_CHECK_REFERENCE_TYPES = \"com.ibm.fhir.model.checkReferenceTypes\";\n \n+    /**\n+     * Used to determine whether CodeableConcepts that don't contain both system and code are checked during object construction\n+     */\n+    public static final String PROPERTY_ADVANCED_CODEABLE_CONCEPT_VALIDATION = \"com.ibm.fhir.model.advancedCodeableConcepValidation\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTczNTk5", "url": "https://github.com/IBM/FHIR/pull/1467#pullrequestreview-479973599", "createdAt": "2020-09-01T17:38:05Z", "commit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNzozODowNVrOHLBV6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxNzozODowNVrOHLBV6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMxODM3OQ==", "bodyText": "This is a breaking change for this Java API. fhir-model is the one module where we are trying to keep some backwards-compatibility (e.g. see the project README at https://github.com/IBM/FHIR).\nCan we deprecate that old method and add the new one instead of the replace?", "url": "https://github.com/IBM/FHIR/pull/1467#discussion_r481318379", "createdAt": "2020-09-01T17:38:05Z", "author": {"login": "lmsurpre"}, "path": "fhir-model/src/main/java/com/ibm/fhir/model/util/ValidationSupport.java", "diffHunk": "@@ -604,19 +408,166 @@ public static void prohibited(Element element, String elementName) {\n     }\n \n     /**\n-     * @throws IllegalStateExeption if the codeableConcept has coding elements that do not include codes from the required binding\n+     * Check that the specified list of elements contain a code that is a member of the specified value set.\n+     * \n+     * @param elements\n+     *     the list of elements for which to check codes\n+     * @param elementName\n+     *     the name of the element\n+     * @param valueSet\n+     *     the URL of the value set to check membership against\n+     * @param system\n+     *     the value set system\n+     * @param codes\n+     *     the value set codes\n+     * @throws IllegalStateExeption if each element in the list does not include a code from the required value set\n      */\n-    public static void checkCodeableConcept(CodeableConcept codeableConcept, String elementName, String valueSet, String system, String... codes) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "originalPosition": 254}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTkyNTc0", "url": "https://github.com/IBM/FHIR/pull/1467#pullrequestreview-479992574", "createdAt": "2020-09-01T18:04:28Z", "commit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowNDoyOVrOHLCQmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowNDoyOVrOHLCQmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMzQwMw==", "bodyText": "this method was never included in a release, so i think its fine to delete", "url": "https://github.com/IBM/FHIR/pull/1467#discussion_r481333403", "createdAt": "2020-09-01T18:04:29Z", "author": {"login": "lmsurpre"}, "path": "fhir-model/src/main/java/com/ibm/fhir/model/util/ValidationSupport.java", "diffHunk": "@@ -204,207 +209,6 @@ public static void checkUri(String s) {\n         }\n     }\n \n-    /**\n-     * Checks that each language code in the list has a valid BCP-47 syntax.\n-     * @param language the language code list\n-     * @param elementName the element name\n-     * @throws IllegalStateException if the passed language code list is not valid\n-     */\n-    public static void checkLanguageCodes(List<Code> languages, String elementName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTkyNjg4", "url": "https://github.com/IBM/FHIR/pull/1467#pullrequestreview-479992688", "createdAt": "2020-09-01T18:04:37Z", "commit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowNDozN1rOHLCQ8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowNDozN1rOHLCQ8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMzQ4OA==", "bodyText": "this method was never included in a release, so i think its fine to delete", "url": "https://github.com/IBM/FHIR/pull/1467#discussion_r481333488", "createdAt": "2020-09-01T18:04:37Z", "author": {"login": "lmsurpre"}, "path": "fhir-model/src/main/java/com/ibm/fhir/model/util/ValidationSupport.java", "diffHunk": "@@ -204,207 +209,6 @@ public static void checkUri(String s) {\n         }\n     }\n \n-    /**\n-     * Checks that each language code in the list has a valid BCP-47 syntax.\n-     * @param language the language code list\n-     * @param elementName the element name\n-     * @throws IllegalStateException if the passed language code list is not valid\n-     */\n-    public static void checkLanguageCodes(List<Code> languages, String elementName) {\n-        if (languages != null) {\n-            for (Code language : languages) {\n-                checkLanguageCode(language, elementName);\n-            }\n-        }\n-    }\n-    \n-    /**\n-     * Checks that the language code has a valid BCP-47 syntax.\n-     * @param language the language code\n-     * @param elementName the element name\n-     * @throws IllegalStateException if the passed language code is not valid\n-     */\n-    public static void checkLanguageCode(Code language, String elementName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c110f88085895e9e2a4c79a01b1e59c055ad1be"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13940f5a82bd87c7be50ddd99d2e2983c8f37fef", "author": {"user": {"login": "michaelwschroeder", "name": "Michael W Schroeder"}}, "url": "https://github.com/IBM/FHIR/commit/13940f5a82bd87c7be50ddd99d2e2983c8f37fef", "committedDate": "2020-09-01T19:17:59Z", "message": "Issue #1421 - updates after review comments\n\nSigned-off-by: Mike Schroeder <mschroed@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3897bd5fad5e16949136599b1c75462a11b9e247", "author": {"user": {"login": "michaelwschroeder", "name": "Michael W Schroeder"}}, "url": "https://github.com/IBM/FHIR/commit/3897bd5fad5e16949136599b1c75462a11b9e247", "committedDate": "2020-09-01T20:06:57Z", "message": "Issue #1421 - rename advancedCodeableConceptValidation\n\nSigned-off-by: Mike Schroeder <mschroed@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c20868fe71f7f2e61b5dd98079b35c6be07af4dc", "author": {"user": {"login": "michaelwschroeder", "name": "Michael W Schroeder"}}, "url": "https://github.com/IBM/FHIR/commit/c20868fe71f7f2e61b5dd98079b35c6be07af4dc", "committedDate": "2020-09-01T20:47:56Z", "message": "Issue #1421 - fix validation config, add documentation of new property\n\nSigned-off-by: Mike Schroeder <mschroed@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMTEwNjI2", "url": "https://github.com/IBM/FHIR/pull/1467#pullrequestreview-480110626", "createdAt": "2020-09-01T20:58:46Z", "commit": {"oid": "c20868fe71f7f2e61b5dd98079b35c6be07af4dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1418, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}