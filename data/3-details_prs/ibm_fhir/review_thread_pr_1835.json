{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNTMwOTEz", "number": 1835, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQyMTo0NTo1NlrOFLD3tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQyMjoxNDo0NFrOFLEbeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MTQyMDY5OnYy", "diffSide": "RIGHT", "path": "build/audit/README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQyMTo0NTo1NlrOIOCMPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQyMTo0NTo1NlrOIOCMPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTU4Njg3OA==", "bodyText": "typo and a bit akward\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The GitHub Action is parameterized with a matrix for each new audits. Each additional entry in the array ends up greating a multiple of the automation steps which must complete successfully for the workflow. For instance, kafka is parameterized and executes a job for each audit layer value in the matrix (one java x one audit = 1 workflow job). \n          \n          \n            \n            The GitHub Action is parameterized with a matrix for each new audits. Each additional entry in the array ends up creating multiple automation steps which must complete successfully for the workflow. For instance, kafka is parameterized and executes a job for each audit layer value in the matrix (one java x one audit = 1 workflow job).", "url": "https://github.com/IBM/FHIR/pull/1835#discussion_r551586878", "createdAt": "2021-01-04T21:45:56Z", "author": {"login": "lmsurpre"}, "path": "build/audit/README.md", "diffHunk": "@@ -0,0 +1,53 @@\n+# End-to-End Automation Framework for FHIR Audit Integration Tests\n+\n+This document outlines the end-to-end audit automation framework. \n+\n+The automation runs with these steps: \n+\n+- **Checkout source code** - Checks out the git code and populates the `github` environment variables.\n+- **Set up java** - Downloads and setup java based on the matrix values `matrix.java`.\n+- **Setup prerequisites** - This step builds the required artifacts necessary to test the build with the audit. \n+- **Server Integration Tests - Additional audit Layers** - The step executes the pre-integration-docker, then integration-test-docker and runs the post-integration-docker scripts.\n+- **Gather error logs** - This step only runs upon an error condition. \n+- **Upload logs** - The step uploads the results of the integration tests and the error condition logs are posted to the job. \n+\n+The GitHub Action is parameterized with a matrix for each new audits. Each additional entry in the array ends up greating a multiple of the automation steps which must complete successfully for the workflow. For instance, kafka is parameterized and executes a job for each audit layer value in the matrix (one java x one audit = 1 workflow job). ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "096f1b49c6f749af23085d98985eead7e541c688"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MTUxMjI2OnYy", "diffSide": "RIGHT", "path": "build/audit/kafka/integration-test.sh", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQyMjoxNDo0NFrOIODDtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQyMjozMDozNlrOIODeCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTYwMTA3OA==", "bodyText": "how close does this need to be to our kafka client dependency version?\nassuming they should match, we'll want to somehow remember this version is hardcoded here...", "url": "https://github.com/IBM/FHIR/pull/1835#discussion_r551601078", "createdAt": "2021-01-04T22:14:44Z", "author": {"login": "lmsurpre"}, "path": "build/audit/kafka/integration-test.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/usr/bin/env bash\n+\n+###############################################################################\n+# (C) Copyright IBM Corp. 2020\n+#\n+# SPDX-License-Identifier: Apache-2.0\n+###############################################################################\n+\n+set -o errexit\n+set -o nounset\n+set -o pipefail\n+\n+# downloads and extracts kafka to a directory\n+download(){\n+    if [ ! -f ${WORKSPACE}/build/audit/kafka/workarea/kafka.tgz ]\n+    then \n+        curl -L -o ${WORKSPACE}/build/audit/kafka/workarea/kafka.tgz http://www-us.apache.org/dist/kafka/2.7.0/kafka_2.13-2.7.0.tgz", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67a543d2d0b9ac49e32064af31dfc160b0905d03"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTYwNzgxOQ==", "bodyText": "It doesn't I left this in here... but I don't think we'll really need it - it's a easy way to flip back to downloading rather than running in docker", "url": "https://github.com/IBM/FHIR/pull/1835#discussion_r551607819", "createdAt": "2021-01-04T22:30:36Z", "author": {"login": "prb112"}, "path": "build/audit/kafka/integration-test.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/usr/bin/env bash\n+\n+###############################################################################\n+# (C) Copyright IBM Corp. 2020\n+#\n+# SPDX-License-Identifier: Apache-2.0\n+###############################################################################\n+\n+set -o errexit\n+set -o nounset\n+set -o pipefail\n+\n+# downloads and extracts kafka to a directory\n+download(){\n+    if [ ! -f ${WORKSPACE}/build/audit/kafka/workarea/kafka.tgz ]\n+    then \n+        curl -L -o ${WORKSPACE}/build/audit/kafka/workarea/kafka.tgz http://www-us.apache.org/dist/kafka/2.7.0/kafka_2.13-2.7.0.tgz", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTYwMTA3OA=="}, "originalCommit": {"oid": "67a543d2d0b9ac49e32064af31dfc160b0905d03"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4582, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}