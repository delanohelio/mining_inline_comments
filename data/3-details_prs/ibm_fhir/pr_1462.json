{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2NDU4OTg4", "number": 1462, "title": "feat: US-Core: Upgrade to STU3 Release 3.1.1 #1311 #1427", "bodyText": "Added XML and JSON examples for fhir-ig-us-core and add entries in\nIndex.java\nAdded the specification artifacts and cleaned up the\nCapabilityStatements so CapabilityStatement.text contains valid XHTML\nUpdated the CHANGELOG with spec element changes\nUpdate Tests for profile changes\nAdd fhir-examples to pom.xml for fhir-ig-us-core\nCreated Factory to run through the Spec Tests\n\nModified DiagnosticReport-cardiology-report.json and\nDiagnosticReport-cardiology-report.xml to corrected hash value\nModified MedicationRequest-uscore-mo2.xml and\nMedicationRequest-uscore-mo2.json (invalid xhtml)\nMedicationRequest-uscore-mo2.json as it contains invalid XHTML in the\nnarrative text\n\n\nAdded IT tests for:\n\nUSCoreAllergyIntoleranceTest - SHOULD/SHALL and REVINCLUDE\nUSCoreCarePlanTest - SHOULD/SHALL with one caveat the implication of\nsystem|code is not supported.  We support system less only.\n\n\n\nSigned-off-by: Paul Bastide pbastide@us.ibm.com", "createdAt": "2020-08-31T18:25:29Z", "url": "https://github.com/IBM/FHIR/pull/1462", "merged": true, "mergeCommit": {"oid": "8ffbc8ba7cba4c98830a00b253c8349d6a56448c"}, "closed": true, "closedAt": "2020-09-03T12:14:13Z", "author": {"login": "prb112"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEW-iUgH2gAyNDc2NDU4OTg4OjViZjczMjgxZTVkYmEzYjFjNmI0YzBjM2ExMjIwNzM5MjA0YjAyNTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFH3p_gFqTQ4MTQ2MzEzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5bf73281e5dba3b1c6b4c0c3a1220739204b0250", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/5bf73281e5dba3b1c6b4c0c3a1220739204b0250", "committedDate": "2020-08-31T18:19:09Z", "message": "feat: US-Core: Upgrade to STU3 Release 3.1.1 #1311 #1427\n\n- Added XML and JSON examples for fhir-ig-us-core and add entries in\nIndex.java\n- Added the specification artifacts and cleaned up the\nCapabilityStatements so CapabilityStatement.text contains valid XHTML\n- Updated the CHANGELOG with spec element changes\n- Update Tests for profile changes\n- Add fhir-examples to pom.xml for fhir-ig-us-core\n- Created Factory to run through the Spec Tests\n\t- Modified DiagnosticReport-cardiology-report.json and\nDiagnosticReport-cardiology-report.xml to corrected hash value\n\t- Modified MedicationRequest-uscore-mo2.xml and\nMedicationRequest-uscore-mo2.json (invalid xhtml)\nMedicationRequest-uscore-mo2.json as it contains invalid XHTML in the\nnarrative text\n- Added IT tests for:\n\t- USCoreAllergyIntoleranceTest - SHOULD/SHALL and REVINCLUDE\n\t- USCoreCarePlanTest - SHOULD/SHALL with one caveat the implication of\nsystem|code is not supported.  We support system less only.\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bef63607bd2452ae767dd4cba233af1e9f13b51a", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/bef63607bd2452ae767dd4cba233af1e9f13b51a", "committedDate": "2020-08-31T20:31:30Z", "message": "doc: updated the doc to indicate support for STU3.1.1\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d8a28c7bf4d7bcbc14924bd8712402528c09629", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/1d8a28c7bf4d7bcbc14924bd8712402528c09629", "committedDate": "2020-09-01T17:05:24Z", "message": "Merge branch 'master' into issue-1427"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f39735264a1b1ce8f7edb67b30c5b5aac1c1491c", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/f39735264a1b1ce8f7edb67b30c5b5aac1c1491c", "committedDate": "2020-09-01T17:19:04Z", "message": "fix: US-Core: Create Integration Tests for STU3 Release 3.1.1\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c0a2259e63a5fc52771431bec65b3efd1bdb547", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/1c0a2259e63a5fc52771431bec65b3efd1bdb547", "committedDate": "2020-09-01T18:45:31Z", "message": "feature: US-Core: Create Integration Tests for STU3 Release 3.1.1\n\n- Integration Test\n\t- USCoreCareTeamTest\n\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ae0e6079131c4b8748d486a404ef1fd0f030ed2", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/3ae0e6079131c4b8748d486a404ef1fd0f030ed2", "committedDate": "2020-09-02T15:13:38Z", "message": "fix: SparkParquetWriterTest fails unexpectedly #1471\n\n- Disables the Unit Tests on Windows Build and Update windows.yml to\ncatch early Windows Build Errors\n- Update the automation to not skipTests\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99a7077573c4cb168ce26bb672bd8dcb1fb26433", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/99a7077573c4cb168ce26bb672bd8dcb1fb26433", "committedDate": "2020-09-02T15:31:51Z", "message": "Merge branch 'master' into issue-1427"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e78fe49522cedfea6ca60962fd5b6691b4ea53e5", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/e78fe49522cedfea6ca60962fd5b6691b4ea53e5", "committedDate": "2020-09-02T15:35:07Z", "message": "US-Core: Create Integration Tests for STU3 Release 3.1.1 #1311\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a6b11cbeb9af4f36be4e77d3ddf068e29e0cc45", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/9a6b11cbeb9af4f36be4e77d3ddf068e29e0cc45", "committedDate": "2020-09-02T15:40:23Z", "message": "US-Core: Create Integration Tests for STU3 Release 3.1.1 #1311\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "196480bf5347f781a2bfa85ea70fc8157fb43405", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/196480bf5347f781a2bfa85ea70fc8157fb43405", "committedDate": "2020-09-02T15:49:12Z", "message": "US-Core: Create Integration Tests for STU3 Release 3.1.1 #1311\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b6bc86778b8820f1ca16bb2804a0a936e6cf60c", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/2b6bc86778b8820f1ca16bb2804a0a936e6cf60c", "committedDate": "2020-09-02T17:11:38Z", "message": "fix: add inline debugging\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8cded39edf04c17fc6d4c00eebc44e007c071ce", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/e8cded39edf04c17fc6d4c00eebc44e007c071ce", "committedDate": "2020-09-02T17:16:28Z", "message": "fix: Change single test\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc08fde2bd32427751567d0238db018d7fda5fe3", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/dc08fde2bd32427751567d0238db018d7fda5fe3", "committedDate": "2020-09-02T17:55:20Z", "message": "fix: debug issue on Windows integration tests\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "433c3126121ade1e82eeca07d9b63832c91e16b4", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/433c3126121ade1e82eeca07d9b63832c91e16b4", "committedDate": "2020-09-02T18:23:48Z", "message": "fix: debug issue on Windows integration tests\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMTU5MDE0", "url": "https://github.com/IBM/FHIR/pull/1462#pullrequestreview-481159014", "createdAt": "2020-09-02T18:31:02Z", "commit": {"oid": "433c3126121ade1e82eeca07d9b63832c91e16b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxODozMTowMlrOHL8Upg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxODozMTowMlrOHL8Upg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI4NDcxMA==", "bodyText": "unless you repeated the same set of changes, i wonder if we could just scrap this historic detail and just go with whatever changes you made to STU3.1.1 artifacts\nsomeone could check the git history if they really cared about what we did to the 3.1 artifacts that we no longer include...", "url": "https://github.com/IBM/FHIR/pull/1462#discussion_r482284710", "createdAt": "2020-09-02T18:31:02Z", "author": {"login": "lmsurpre"}, "path": "conformance/fhir-ig-us-core/CHANGELOG", "diffHunk": "@@ -1,5 +1,23 @@\n-Changed constraint provenance-1 in StructureDefinition-us-core-provenance.json from: ($this.agent.who.resolve().is Practitioner or Device) implies exists() to: ($this.agent.who.resolve().is(Practitioner) or $this.agent.who.resolve().is(Device)) implies exists() to correct a FHIRPath syntax error\n+# Version 1\n+- Changed constraint provenance-1 in StructureDefinition-us-core-provenance.json from: ($this.agent.who.resolve().is Practitioner or Device) implies exists() to: ($this.agent.who.resolve().is(Practitioner) or $this.agent.who.resolve().is(Device)) implies exists() to correct a FHIRPath syntax error\n     See: https://jira.hl7.org/browse/FHIR-27065 for more information\n+- Changed SearchParameter-us-core-procedure-date.json from Procedure.occurence to Procedure.performed\n+    See: https://jira.hl7.org/browse/FHIR-27887 for more information", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "433c3126121ade1e82eeca07d9b63832c91e16b4"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMTY0OTI3", "url": "https://github.com/IBM/FHIR/pull/1462#pullrequestreview-481164927", "createdAt": "2020-09-02T18:39:31Z", "commit": {"oid": "433c3126121ade1e82eeca07d9b63832c91e16b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxODozOTozMlrOHL8zdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxODozOTozMlrOHL8zdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI5MjU5OQ==", "bodyText": "did we open a ticket at jira.hl7.org for this one?", "url": "https://github.com/IBM/FHIR/pull/1462#discussion_r482292599", "createdAt": "2020-09-02T18:39:32Z", "author": {"login": "lmsurpre"}, "path": "conformance/fhir-ig-us-core/CHANGELOG", "diffHunk": "@@ -1,5 +1,23 @@\n-Changed constraint provenance-1 in StructureDefinition-us-core-provenance.json from: ($this.agent.who.resolve().is Practitioner or Device) implies exists() to: ($this.agent.who.resolve().is(Practitioner) or $this.agent.who.resolve().is(Device)) implies exists() to correct a FHIRPath syntax error\n+# Version 1\n+- Changed constraint provenance-1 in StructureDefinition-us-core-provenance.json from: ($this.agent.who.resolve().is Practitioner or Device) implies exists() to: ($this.agent.who.resolve().is(Practitioner) or $this.agent.who.resolve().is(Device)) implies exists() to correct a FHIRPath syntax error\n     See: https://jira.hl7.org/browse/FHIR-27065 for more information\n+- Changed SearchParameter-us-core-procedure-date.json from Procedure.occurence to Procedure.performed\n+    See: https://jira.hl7.org/browse/FHIR-27887 for more information\n \n-Changed SearchParameter-us-core-procedure-date.json from Procedure.occurence to Procedure.performed\n-    See: https://jira.hl7.org/browse/FHIR-27887 for more information\n\\ No newline at end of file\n+# Version 2\n+Source - http://hl7.org/fhir/us/core/STU3.1.1/\n+- Removed 3.1.0 Artifacts\n+- Updated to 3.1.1 Artifacts STU3.1.1\n+- Moved the package.tgz's examples folder to the fhir-examples project\n+- Changed the text-generated for the CapabilityStatements CapabilityStatement-us-core-client.json and CapabilityStatement-us-core-server.json\n+    as the xhtml was invalid\n+- Per https://github.com/IBM/FHIR/issues/1460 Relaxed required to extensible\n+    - https://jira.hl7.org/browse/FHIR-27911 Change binding to UCUM from required to extensible + max binding UCUM\n+    - Per https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/US.20Core.20QA.20Issue.20.233-.20nasty.20profiling.20error\n+    - Changed Required to extensible for \n+        - \"id\": \"Observation.component:FlowRate.value[x]\",\n+        - \"id\": \"Observation.component:Concentration.code\",\n+- Modify MedicationRequest-uscore-mo2.json and MedicationRequest-uscore-mo2.xml to remove invalid XHTML\n+   - Any <p> (or other block-level element) will implicitly close any open <p>.\n+   - https://www.w3.org/TR/html401/struct/text.html#h-9.3.1\n+   - The P element represents a paragraph. It cannot contain block-level elements (including P itself).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "433c3126121ade1e82eeca07d9b63832c91e16b4"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMTY2Nzc3", "url": "https://github.com/IBM/FHIR/pull/1462#pullrequestreview-481166777", "createdAt": "2020-09-02T18:42:08Z", "commit": {"oid": "433c3126121ade1e82eeca07d9b63832c91e16b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxODo0MjowOFrOHL88ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxODo0MjowOFrOHL88ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI5NDk3MA==", "bodyText": "did we need to generate our own .index.json file for US Core?  does it include an .index.json that just isn't valid or does it not even have one?", "url": "https://github.com/IBM/FHIR/pull/1462#discussion_r482294970", "createdAt": "2020-09-02T18:42:08Z", "author": {"login": "lmsurpre"}, "path": "conformance/fhir-ig-us-core/src/main/java/com/ibm/fhir/ig/us/core/util/IndexGenerator.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * (C) Copyright IBM Corp. 2020\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package com.ibm.fhir.ig.us.core.util;\n+\n+import java.io.File;\n+import java.io.FileNotFoundException;\n+import java.io.FileOutputStream;\n+import java.io.FileReader;\n+import java.io.IOException;\n+import java.io.OutputStream;\n+\n+import com.ibm.fhir.model.format.Format;\n+import com.ibm.fhir.model.parser.FHIRParser;\n+import com.ibm.fhir.model.parser.exception.FHIRParserException;\n+import com.ibm.fhir.model.resource.Resource;\n+import com.ibm.fhir.registry.util.Index;\n+import com.ibm.fhir.registry.util.Index.Entry;\n+\n+public class IndexGenerator {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "433c3126121ade1e82eeca07d9b63832c91e16b4"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMTY4MjQw", "url": "https://github.com/IBM/FHIR/pull/1462#pullrequestreview-481168240", "createdAt": "2020-09-02T18:44:18Z", "commit": {"oid": "433c3126121ade1e82eeca07d9b63832c91e16b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxODo0NDoxOFrOHL9ETw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxODo0NDoxOFrOHL9ETw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI5NjkxMQ==", "bodyText": "pretty minor, but this will be taken as javadoc for only PROFILES_US_CORE_JSON.  i'd suggest we either change it to a block comment (removing a single *) or just have one for each.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /**\n          \n          \n            \n                 * US Core Examples in XML and JSON\n          \n          \n            \n                 */\n          \n          \n            \n                PROFILES_US_CORE_JSON(\"/profiles-us-core-json.txt\"),\n          \n          \n            \n                /*\n          \n          \n            \n                 * US Core Examples in XML and JSON\n          \n          \n            \n                 */\n          \n          \n            \n                PROFILES_US_CORE_JSON(\"/profiles-us-core-json.txt\"),", "url": "https://github.com/IBM/FHIR/pull/1462#discussion_r482296911", "createdAt": "2020-09-02T18:44:18Z", "author": {"login": "lmsurpre"}, "path": "fhir-examples/src/main/java/com/ibm/fhir/examples/Index.java", "diffHunk": "@@ -90,15 +101,28 @@\n      */\n     PROFILES_PDEX_PLAN_NET_JSON(\"/profiles-pdex-plan-net-json.txt\"),\n \n+    /**\n+     * US Core Examples in XML and JSON\n+     */\n+    PROFILES_US_CORE_JSON(\"/profiles-us-core-json.txt\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "433c3126121ade1e82eeca07d9b63832c91e16b4"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10451ed3b9447a8f5ac4688b528d1cc2a6c8887c", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/10451ed3b9447a8f5ac4688b528d1cc2a6c8887c", "committedDate": "2020-09-02T20:10:15Z", "message": "fix: per code review of the US Core STU 3.1.1\n\n- Fix the Workflow\n- Copied over the hidden .index.json to the us-core package\n- Removed the IndexGenerator (wasn't needed)\n- Cleaned up change log to include only what is relevant and necessary\n- Fixed up the index to not include javadoc\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNDYzMTM1", "url": "https://github.com/IBM/FHIR/pull/1462#pullrequestreview-481463135", "createdAt": "2020-09-03T03:16:59Z", "commit": {"oid": "10451ed3b9447a8f5ac4688b528d1cc2a6c8887c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1414, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}