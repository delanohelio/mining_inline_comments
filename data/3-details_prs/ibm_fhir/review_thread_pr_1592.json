{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1OTUzNjk3", "number": 1592, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDoxMzoxOFrOEvVfRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo0NzowMFrOEvaEKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDcwNTk2OnYy", "diffSide": "RIGHT", "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDoxMzoxOFrOHkQmmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDoyOTo1NlrOHkRfMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MjgwOQ==", "bodyText": "Personal preference.  \"search\".equals(interactionString)\nSame for other else if checks in this method.", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507782809", "createdAt": "2020-10-19T14:13:18Z", "author": {"login": "tbieste"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +397,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteracations(List<String> interactionConfig) throws FHIRPersistenceException {\n+        if (interactionConfig == null) return null;\n+\n+        List<Rest.Resource.Interaction> defaultInteractions = new ArrayList<>();\n+        for (String interactionString : interactionConfig) {\n+            if (interactionString.equals(\"search\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12fca15b4a021aba736c0d0b19c58c9d8903397f"}, "originalPosition": 103}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc5NzI5Ng==", "bodyText": "suggestion taken", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507797296", "createdAt": "2020-10-19T14:29:56Z", "author": {"login": "lmsurpre"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +397,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteracations(List<String> interactionConfig) throws FHIRPersistenceException {\n+        if (interactionConfig == null) return null;\n+\n+        List<Rest.Resource.Interaction> defaultInteractions = new ArrayList<>();\n+        for (String interactionString : interactionConfig) {\n+            if (interactionString.equals(\"search\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MjgwOQ=="}, "originalCommit": {"oid": "12fca15b4a021aba736c0d0b19c58c9d8903397f"}, "originalPosition": 103}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDcxMDUzOnYy", "diffSide": "RIGHT", "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDoxNDoxOVrOHkQpgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDoyOToyN1rOHkRc-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MzU1Mw==", "bodyText": "Variable is defaultInteractions, but this isn't just for defaults. Consider renaming variable.", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507783553", "createdAt": "2020-10-19T14:14:19Z", "author": {"login": "tbieste"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +397,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteracations(List<String> interactionConfig) throws FHIRPersistenceException {\n+        if (interactionConfig == null) return null;\n+\n+        List<Rest.Resource.Interaction> defaultInteractions = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12fca15b4a021aba736c0d0b19c58c9d8903397f"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc5NTU1NA==", "bodyText": "Oh, I saw this buildInteractions method also called on line 256, which made me think it wasn't just the defaults.", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507795554", "createdAt": "2020-10-19T14:28:28Z", "author": {"login": "tbieste"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +397,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteracations(List<String> interactionConfig) throws FHIRPersistenceException {\n+        if (interactionConfig == null) return null;\n+\n+        List<Rest.Resource.Interaction> defaultInteractions = new ArrayList<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MzU1Mw=="}, "originalCommit": {"oid": "12fca15b4a021aba736c0d0b19c58c9d8903397f"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc5NjcyOA==", "bodyText": "you were right, i was wrong.  thought this was in the other spot.  suggestion taken.", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507796728", "createdAt": "2020-10-19T14:29:27Z", "author": {"login": "lmsurpre"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +397,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteracations(List<String> interactionConfig) throws FHIRPersistenceException {\n+        if (interactionConfig == null) return null;\n+\n+        List<Rest.Resource.Interaction> defaultInteractions = new ArrayList<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MzU1Mw=="}, "originalCommit": {"oid": "12fca15b4a021aba736c0d0b19c58c9d8903397f"}, "originalPosition": 101}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MDcxMjIwOnYy", "diffSide": "RIGHT", "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDoxNDozOFrOHkQqig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNDoyOTo0NFrOHkReTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MzgxOA==", "bodyText": "Typo in \"Interacations\"", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507783818", "createdAt": "2020-10-19T14:14:38Z", "author": {"login": "tbieste"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +397,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteracations(List<String> interactionConfig) throws FHIRPersistenceException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12fca15b4a021aba736c0d0b19c58c9d8903397f"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc5NzA3MA==", "bodyText": "fixed", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507797070", "createdAt": "2020-10-19T14:29:44Z", "author": {"login": "lmsurpre"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +397,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteracations(List<String> interactionConfig) throws FHIRPersistenceException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MzgxOA=="}, "originalCommit": {"oid": "12fca15b4a021aba736c0d0b19c58c9d8903397f"}, "originalPosition": 98}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTQ0MjE2OnYy", "diffSide": "RIGHT", "path": "docs/src/pages/guides/FHIRServerUsersGuide.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo0MzoyOVrOHkXsTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo1MDo0NVrOHkX9bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5ODk1OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            |`fhirServer/resources/<resourceType>/searchParameters/<code>/url`|string|null|\n          \n          \n            \n            |`fhirServer/resources/<resourceType>/searchParameters/<code>/url`|string or null|\n          \n      \n    \n    \n  \n\nshould the pipe be considered an or ? the MD considers it a column delimiter", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507898958", "createdAt": "2020-10-19T16:43:29Z", "author": {"login": "prb112"}, "path": "docs/src/pages/guides/FHIRServerUsersGuide.md", "diffHunk": "@@ -1595,7 +1600,12 @@ through the shared lib at `wlp/user/shared/resources/lib`) |\n |`fhirServer/core/conditionalDeleteMaxNumber`|10|\n |`fhirServer/core/capabilityStatementCacheTimeout`|60|\n |`fhirServer/core/extendedCodeableConceptValidation`|true|\n-|`fhirServer/searchParameterFilter`|`\"*\": [*]`|\n+|`fhirServer/resources/open`|true|\n+|`fhirServer/resources/Resource/interactions`|null (all interactions supported)|\n+|`fhirServer/resources/Resource/searchParameters`|null (all global search parameters supported)|\n+|`fhirServer/resources/<resourceType>/interactions`|null (inherets from `fhirServer/resources/Resource/interactions`)|\n+|`fhirServer/resources/<resourceType>/searchParameters`|null (all type-specific search parameters supported)|\n+|`fhirServer/resources/<resourceType>/searchParameters/<code>/url`|string|null|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c1e751aecca9612d78fad5d1630018189a02836"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkwMzM0Mg==", "bodyText": "copy -paste error from the previous section.  fixed by dropping the middle \"column\"", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507903342", "createdAt": "2020-10-19T16:50:45Z", "author": {"login": "lmsurpre"}, "path": "docs/src/pages/guides/FHIRServerUsersGuide.md", "diffHunk": "@@ -1595,7 +1600,12 @@ through the shared lib at `wlp/user/shared/resources/lib`) |\n |`fhirServer/core/conditionalDeleteMaxNumber`|10|\n |`fhirServer/core/capabilityStatementCacheTimeout`|60|\n |`fhirServer/core/extendedCodeableConceptValidation`|true|\n-|`fhirServer/searchParameterFilter`|`\"*\": [*]`|\n+|`fhirServer/resources/open`|true|\n+|`fhirServer/resources/Resource/interactions`|null (all interactions supported)|\n+|`fhirServer/resources/Resource/searchParameters`|null (all global search parameters supported)|\n+|`fhirServer/resources/<resourceType>/interactions`|null (inherets from `fhirServer/resources/Resource/interactions`)|\n+|`fhirServer/resources/<resourceType>/searchParameters`|null (all type-specific search parameters supported)|\n+|`fhirServer/resources/<resourceType>/searchParameters/<code>/url`|string|null|", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5ODk1OA=="}, "originalCommit": {"oid": "9c1e751aecca9612d78fad5d1630018189a02836"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTQ1NDcwOnYy", "diffSide": "RIGHT", "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo0Njo0NVrOHkXz2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODoxNjozOFrOHkb0Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkwMDg5MQ==", "bodyText": "This is such a complicated stack to get here, it may be good to put a comment about the input and output as an ImplNote (not required, just a thought on how complex this Resource can be to build. )", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507900891", "createdAt": "2020-10-19T16:46:45Z", "author": {"login": "prb112"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +408,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteractions(List<String> interactionConfig) throws FHIRPersistenceException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c1e751aecca9612d78fad5d1630018189a02836"}, "originalPosition": 110}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk2NjQ5MQ==", "bodyText": "added some javadoc", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507966491", "createdAt": "2020-10-19T18:16:38Z", "author": {"login": "lmsurpre"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +408,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteractions(List<String> interactionConfig) throws FHIRPersistenceException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkwMDg5MQ=="}, "originalCommit": {"oid": "9c1e751aecca9612d78fad5d1630018189a02836"}, "originalPosition": 110}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTQ1NTc5OnYy", "diffSide": "RIGHT", "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo0NzowMFrOHkX0fQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxODoxNjozMVrOHkbzzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkwMTA1Mw==", "bodyText": "Same comment as 411", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507901053", "createdAt": "2020-10-19T16:47:00Z", "author": {"login": "prb112"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +408,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteractions(List<String> interactionConfig) throws FHIRPersistenceException {\n+        if (interactionConfig == null) return null;\n+\n+        List<Rest.Resource.Interaction> interactions = new ArrayList<>();\n+        for (String interactionString : interactionConfig) {\n+            if (\"search\".equals(interactionString)) {\n+                // special case for search since the value set uses \"search-type\" instead of just \"search\"\n+                interactions.add(buildInteractionStatement(TypeRestfulInteraction.SEARCH_TYPE));\n+            } else if (\"history\".equals(interactionString)){\n+                // special case for search since the value set uses \"history-instance\" instead of just \"history\"\n+                interactions.add(buildInteractionStatement(TypeRestfulInteraction.HISTORY_INSTANCE));\n+            } else if (\"delete\".equals(interactionString)) {\n+                // special case for delete since we shouldn't advertise it if the PL doesn't support it\n+                interactions.add(buildInteractionStatement(TypeRestfulInteraction.DELETE));\n+            } else {\n+                interactions.add(buildInteractionStatement(TypeRestfulInteraction.of(interactionString)));\n+            }\n+        }\n+        return interactions;\n+    }\n+\n+    private List<ResourceType.ValueSet> getSupportedResourceTypes(boolean supportOmittedRsrcTypes) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c1e751aecca9612d78fad5d1630018189a02836"}, "originalPosition": 131}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk2NjQxNQ==", "bodyText": "added some javadoc", "url": "https://github.com/IBM/FHIR/pull/1592#discussion_r507966415", "createdAt": "2020-10-19T18:16:31Z", "author": {"login": "lmsurpre"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/Capabilities.java", "diffHunk": "@@ -383,10 +408,55 @@ private CapabilityStatement buildCapabilityStatement() throws Exception {\n         return conformance;\n     }\n \n+    private List<Rest.Resource.Interaction> buildInteractions(List<String> interactionConfig) throws FHIRPersistenceException {\n+        if (interactionConfig == null) return null;\n+\n+        List<Rest.Resource.Interaction> interactions = new ArrayList<>();\n+        for (String interactionString : interactionConfig) {\n+            if (\"search\".equals(interactionString)) {\n+                // special case for search since the value set uses \"search-type\" instead of just \"search\"\n+                interactions.add(buildInteractionStatement(TypeRestfulInteraction.SEARCH_TYPE));\n+            } else if (\"history\".equals(interactionString)){\n+                // special case for search since the value set uses \"history-instance\" instead of just \"history\"\n+                interactions.add(buildInteractionStatement(TypeRestfulInteraction.HISTORY_INSTANCE));\n+            } else if (\"delete\".equals(interactionString)) {\n+                // special case for delete since we shouldn't advertise it if the PL doesn't support it\n+                interactions.add(buildInteractionStatement(TypeRestfulInteraction.DELETE));\n+            } else {\n+                interactions.add(buildInteractionStatement(TypeRestfulInteraction.of(interactionString)));\n+            }\n+        }\n+        return interactions;\n+    }\n+\n+    private List<ResourceType.ValueSet> getSupportedResourceTypes(boolean supportOmittedRsrcTypes) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkwMTA1Mw=="}, "originalCommit": {"oid": "9c1e751aecca9612d78fad5d1630018189a02836"}, "originalPosition": 131}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4725, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}