{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0NTkxODYw", "number": 1343, "title": "README Update from Customer Feedback", "bodyText": "Signed-off-by: Paul Bastide pbastide@us.ibm.com", "createdAt": "2020-07-21T15:45:30Z", "url": "https://github.com/IBM/FHIR/pull/1343", "merged": true, "mergeCommit": {"oid": "59b95ad9a1de92eb774ea9d3b47ac61c270b87f8"}, "closed": true, "closedAt": "2020-07-21T15:53:49Z", "author": {"login": "prb112"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3IMhVAH2gAyNDU0NTkxODYwOmMzNGIxZDIxNjg2OTdmNWJkYzIxYzYxM2QxZmE5Nzg0OWE1MzczODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3IUj-gFqTQ1MjU5OTU1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c34b1d2168697f5bdc21c613d1fa97849a537388", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/c34b1d2168697f5bdc21c613d1fa97849a537388", "committedDate": "2020-07-21T15:44:50Z", "message": "README Update from Customer Feedback\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "118a5aa64cbe2bc7fc81364960508372d5bd9777", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/118a5aa64cbe2bc7fc81364960508372d5bd9777", "committedDate": "2020-07-21T15:46:38Z", "message": "README Update from Customer Feedback\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTk3MDM3", "url": "https://github.com/IBM/FHIR/pull/1343#pullrequestreview-452597037", "createdAt": "2020-07-21T15:50:57Z", "commit": {"oid": "118a5aa64cbe2bc7fc81364960508372d5bd9777"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNTo1MDo1OFrOG0-jhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNTo1MDo1OFrOG0-jhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIwNDAzOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Alternative: Setting upIBM FHIR Servers against a shared DB2 with separate schemas for each customer\n          \n          \n            \n            ## Alternative: Setting up a shared Db2 with separate schemas for each tenant", "url": "https://github.com/IBM/FHIR/pull/1343#discussion_r458204039", "createdAt": "2020-07-21T15:50:58Z", "author": {"login": "lmsurpre"}, "path": "fhir-persistence-schema/README.md", "diffHunk": "@@ -214,7 +214,55 @@ For postgresql:\n --db-type postgresql\n ```\n \n-## Alternative: manually apply the schema\n+## Alternative: Setting upIBM FHIR Servers against a shared DB2 with separate schemas for each customer", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118a5aa64cbe2bc7fc81364960508372d5bd9777"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b9a29772416ad7daa54a4fbd2371342ffc69ae5", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/4b9a29772416ad7daa54a4fbd2371342ffc69ae5", "committedDate": "2020-07-21T15:52:39Z", "message": "Update fhir-persistence-schema/README.md\r\n\r\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>\n\nCo-authored-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTk4Nzg5", "url": "https://github.com/IBM/FHIR/pull/1343#pullrequestreview-452598789", "createdAt": "2020-07-21T15:52:51Z", "commit": {"oid": "118a5aa64cbe2bc7fc81364960508372d5bd9777"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNTo1Mjo1MlrOG0-o4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNTo1Mjo1MlrOG0-o4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIwNTQwOA==", "bodyText": "We already have a section on printing the schema near the top (under getting started).  This section should specifically focus on how to apply that manually.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Alternative: Print the Schema\n          \n          \n            \n            ## Alternative: Manually apply the schema", "url": "https://github.com/IBM/FHIR/pull/1343#discussion_r458205408", "createdAt": "2020-07-21T15:52:52Z", "author": {"login": "lmsurpre"}, "path": "fhir-persistence-schema/README.md", "diffHunk": "@@ -214,7 +214,55 @@ For postgresql:\n --db-type postgresql\n ```\n \n-## Alternative: manually apply the schema\n+## Alternative: Setting upIBM FHIR Servers against a shared DB2 with separate schemas for each customer\n+\n+For those using multiple schemas for each customer, for instance, customer 2 needs to be separately configured with the database and schema. \n+\n+### Create the additional schema\n+\n+```\n+java -jar ./fhir-persistence-schema-${VERSION}-cli.jar \\ \n+--prop-file db2.properties\n+--create-schemas\n+--create-schema-batch FHIR_JBATCH_2ND\n+--create-schema-oauth FHIR_OUATH_2ND\n+--create-schema-fhir FHIRDATA_2ND\n+```\n+\n+### Deploy the additional schema\n+\n+```\n+java -jar ./fhir-persistence-schema-${VERSION}-cli.jar \\ \n+--prop-file db2.properties\n+--schema-name FHIRDATA\n+--update-schema-batch FHIR_JBATCH_2ND\n+--update-schema-oauth FHIR_OUATH_2ND\n+--update-schema-fhir FHIRDATA_2ND\n+```\n+\n+### Grant privileges to data access user\n+```\n+java -jar ./fhir-persistence-schema-${VERSION}-cli.jar \\ \n+--prop-file db2.properties\n+--grant-to FHIRSERVER\n+--target BATCH FHIR_JBATCH_2ND\n+```\n+\n+```\n+java -jar ./fhir-persistence-schema-${VERSION}-cli.jar \\ \n+--prop-file db2.properties\n+--grant-to FHIRSERVER\n+--target OAUTH FHIR_OAUTH_2ND\n+```\n+\n+```\n+java -jar ./fhir-persistence-schema-${VERSION}-cli.jar \\ \n+--prop-file db2.properties\n+--grant-to FHIRSERVER\n+--target DATA FHIRDATA_2ND\n+```\n+\n+## Alternative: Print the Schema", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118a5aa64cbe2bc7fc81364960508372d5bd9777"}, "originalPosition": 53}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "771f845d84b2bd66a843b52b0dd5d64f51098690", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/771f845d84b2bd66a843b52b0dd5d64f51098690", "committedDate": "2020-07-21T15:53:09Z", "message": "Update fhir-persistence-schema/README.md\r\n\r\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>\n\nCo-authored-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTk5NTU4", "url": "https://github.com/IBM/FHIR/pull/1343#pullrequestreview-452599558", "createdAt": "2020-07-21T15:53:37Z", "commit": {"oid": "771f845d84b2bd66a843b52b0dd5d64f51098690"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1347, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}