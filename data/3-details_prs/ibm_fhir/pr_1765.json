{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwMzM0OTYz", "number": 1765, "title": "fix: automation update and modification for readme #1724", "bodyText": "datasource.xml is created as the default which enables bootstrapping\ndatasource-bootstrap.xml changed to reflect the referenced datasource\nupdated README.md in the disabled folder to reflect the appropriate\nbehavior and expectation\nupdate the automation to reflect the dual usage.\n\ncopy-server-config.sh controls db2 is updated to use old method\npostgres pre-integration-test.sh uses new method\npre-integration-test.sh uses new method (default derby)\n\n\nUpdate the User Guide to reflect the changes\n\nSigned-off-by: Paul Bastide pbastide@us.ibm.com", "createdAt": "2020-12-01T14:19:43Z", "url": "https://github.com/IBM/FHIR/pull/1765", "merged": true, "mergeCommit": {"oid": "3ac0e1d248e2b07ef05d0877d04f7cda02c2c3a4"}, "closed": true, "closedAt": "2020-12-01T22:21:47Z", "author": {"login": "prb112"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdh6rkSgH2gAyNTMwMzM0OTYzOjIyZmMzZDk1MjIyYjBkODNkODMxYjQwMzkzOTMzOTY5M2Y2MTA2YWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdiBditAFqTU0MjM0MDExNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "22fc3d95222b0d83d831b403939339693f6106ae", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/22fc3d95222b0d83d831b403939339693f6106ae", "committedDate": "2020-12-01T14:18:49Z", "message": "fix: automation update and modification for readme #1724\n\n- datasource.xml is created as the default which enables bootstrapping\n- datasource-bootstrap.xml changed to reflect the referenced datasource\n- updated README.md in the disabled folder to reflect the appropriate\nbehavior and expectation\n- update the automation to reflect the dual usage.\n\t- copy-server-config.sh controls db2 is updated to use old method\n\t- postgres pre-integration-test.sh uses new method\n\t- pre-integration-test.sh uses new method (default derby)\n- Update the User Guide to reflect the changes\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMTA1Mjg4", "url": "https://github.com/IBM/FHIR/pull/1765#pullrequestreview-542105288", "createdAt": "2020-12-01T16:56:48Z", "commit": {"oid": "22fc3d95222b0d83d831b403939339693f6106ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNjo1Njo0OFrOH82hYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNjo1Njo0OFrOH82hYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU2OTg4OQ==", "bodyText": "I think this is what failed...", "url": "https://github.com/IBM/FHIR/pull/1765#discussion_r533569889", "createdAt": "2020-12-01T16:56:48Z", "author": {"login": "prb112"}, "path": "build/persistence/postgres/pre-integration-test.sh", "diffHunk": "@@ -50,11 +50,12 @@ copy_server_config(){\n     cp -pr ${WORKSPACE}/fhir-server/liberty-config-tenants/config/* $DIST/config\n     cp -pr ${WORKSPACE}/fhir-server/liberty-config/config/default/fhir-server-config-postgresql.json $DIST/config/default/fhir-server-config.json\n \n-    echo \"Replacing datasource content in server configDropins...\"\n-    rm -f $DIST/overrides/datasource-*.xml 2> /dev/null\n+    # Note the overrides folder is specifically mounted to the docker image under configDropins/overrides\n+    echo \"Creating an overrides folder in $DIST\"\n     mkdir -p $DIST/overrides\n-    cp -p ${WORKSPACE}/fhir-server/liberty-config/configDropins/overrides/datasource-bootstrap.xml $DIST/overrides\n-    cp -p ${WORKSPACE}/fhir-server/liberty-config/configDropins/overrides/datasource-postgresql.xml $DIST/overrides\n+    \n+    # Copy and rename the postgres override\n+    cp -p ${WORKSPACE}/fhir-server/liberty-config/configDropins/disabled/datasource-postgresql.xml $DIST/overrides/datasource.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22fc3d95222b0d83d831b403939339693f6106ae"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMTEzMTI0", "url": "https://github.com/IBM/FHIR/pull/1765#pullrequestreview-542113124", "createdAt": "2020-12-01T17:04:54Z", "commit": {"oid": "22fc3d95222b0d83d831b403939339693f6106ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNzowNDo1NFrOH824cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNzowNDo1NFrOH824cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU3NTc5NQ==", "bodyText": "we're mixing datasource and datastore again...probably should match the others:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Continuing the above example, configure a drop-in server configuration file 'configDropins/overrides/datastore.xml' as follows:\n          \n          \n            \n            Continuing the above example, configure a drop-in server configuration file 'configDropins/overrides/datasource.xml' as follows:", "url": "https://github.com/IBM/FHIR/pull/1765#discussion_r533575795", "createdAt": "2020-12-01T17:04:54Z", "author": {"login": "lmsurpre"}, "path": "docs/src/pages/guides/FHIRServerUsersGuide.md", "diffHunk": "@@ -450,7 +450,7 @@ The 'dataSourceJndiName' property can be removed as it is only used when 'enable\n \n When configured explicitly, the jndiName does not have to follow the standard naming convention, although this is not recommended.\n \n-Continuing the above example, configure a drop-in server configuration file 'configDropins/overrides/datastore-default.xml' as follows:\n+Continuing the above example, configure a drop-in server configuration file 'configDropins/overrides/datastore.xml' as follows:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22fc3d95222b0d83d831b403939339693f6106ae"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d18ff45b2777cc892df2745a3e87f4e8f6920e3c", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/d18ff45b2777cc892df2745a3e87f4e8f6920e3c", "committedDate": "2020-12-01T18:31:48Z", "message": "fix the datasource definitions\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3f3b747713a476811eb6ff3eab60cecb637180d", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/a3f3b747713a476811eb6ff3eab60cecb637180d", "committedDate": "2020-12-01T21:50:47Z", "message": "dummy commit to force rebuild\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMzM4NTQ2", "url": "https://github.com/IBM/FHIR/pull/1765#pullrequestreview-542338546", "createdAt": "2020-12-01T22:10:22Z", "commit": {"oid": "22fc3d95222b0d83d831b403939339693f6106ae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMzQwMTE1", "url": "https://github.com/IBM/FHIR/pull/1765#pullrequestreview-542340115", "createdAt": "2020-12-01T22:12:50Z", "commit": {"oid": "a3f3b747713a476811eb6ff3eab60cecb637180d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 788, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}