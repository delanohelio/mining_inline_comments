{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyMDEwNzQx", "number": 683, "title": "Refactoring and addition of FHIRUtil.createStandaloneBundle", "bodyText": "Moved ReferenceMappingVisitor from fhir-server to fhir-model and\nrefactored it to allow any mapping (not just UUID -> logical id)\n\n\nIntroduced FHIRUtil.createStandaloneBundle for adding resources to a\nbundle and replacing internal references with bundle-local UUID values\n\n\nRemoved deprecated FHIRUtil methods and added deprecated flag to\nFHIRUtil.getResourceTypeName(Resource resource)\n\n\nSigned-off-by: Lee Surprenant lmsurpre@us.ibm.com", "createdAt": "2020-02-06T17:03:22Z", "url": "https://github.com/IBM/FHIR/pull/683", "merged": true, "mergeCommit": {"oid": "9a01a26088f5283c0675709855f59fe7752ac1d8"}, "closed": true, "closedAt": "2020-02-06T23:03:27Z", "author": {"login": "lmsurpre"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBt9Q1gFqTM1NDYyNTM5NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBz15VAFqTM1NDg1NzQwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NjI1Mzk0", "url": "https://github.com/IBM/FHIR/pull/683#pullrequestreview-354625394", "createdAt": "2020-02-06T17:12:39Z", "commit": {"oid": "fa0a0fbff8cded1765ae898aba31d1d2b438f9de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa0a0fbff8cded1765ae898aba31d1d2b438f9de", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/fa0a0fbff8cded1765ae898aba31d1d2b438f9de", "committedDate": "2020-02-06T17:04:44Z", "message": "Merge branch 'master' into lee-master"}, "afterCommit": {"oid": "aacd9363fafa247d1134d1710fee65b4c6e47cf1", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/aacd9363fafa247d1134d1710fee65b4c6e47cf1", "committedDate": "2020-02-06T17:15:48Z", "message": "Refactoring and addition of FHIRUtil.createStandaloneBundle\n\n1. Moved ReferenceMappingVisitor from fhir-server to fhir-model and\nrefactored it to allow any mapping (not just UUID -> logical id)\n\n2. Introduced FHIRUtil.createStandaloneBundle for adding resources to a\nbundle and replacing internal references with bundle-local UUID values\n\n3. Removed deprecated FHIRUtil methods and added deprecated flag to\nFHIRUtil.getResourceTypeName(Resource resource)\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aacd9363fafa247d1134d1710fee65b4c6e47cf1", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/aacd9363fafa247d1134d1710fee65b4c6e47cf1", "committedDate": "2020-02-06T17:15:48Z", "message": "Refactoring and addition of FHIRUtil.createStandaloneBundle\n\n1. Moved ReferenceMappingVisitor from fhir-server to fhir-model and\nrefactored it to allow any mapping (not just UUID -> logical id)\n\n2. Introduced FHIRUtil.createStandaloneBundle for adding resources to a\nbundle and replacing internal references with bundle-local UUID values\n\n3. Removed deprecated FHIRUtil methods and added deprecated flag to\nFHIRUtil.getResourceTypeName(Resource resource)\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}, "afterCommit": {"oid": "1d667e92564ce73f3442891886e33eabec642294", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/1d667e92564ce73f3442891886e33eabec642294", "committedDate": "2020-02-06T17:19:40Z", "message": "Refactoring and addition of FHIRUtil.createStandaloneBundle\n\n1. Moved ReferenceMappingVisitor from fhir-server to fhir-model and\nrefactored it to allow any mapping (not just UUID -> logical id)\n\n2. Introduced FHIRUtil.createStandaloneBundle for adding resources to a\nbundle and replacing internal references with bundle-local UUID values\n\n3. Removed deprecated FHIRUtil methods and added deprecated flag to\nFHIRUtil.getResourceTypeName(Resource resource)\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "800b5c91e83cc7f81b4dfd88f083a3f28b11caee", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/800b5c91e83cc7f81b4dfd88f083a3f28b11caee", "committedDate": "2020-02-06T17:53:57Z", "message": "Refactoring and addition of FHIRUtil.createStandaloneBundle\n\n1. Moved ReferenceMappingVisitor from fhir-server to fhir-model and\nrefactored it to allow any mapping (not just UUID -> logical id)\n\n2. Introduced FHIRUtil.createStandaloneBundle for adding resources to a\nbundle and replacing internal references with bundle-local UUID values\n\n3. Removed deprecated FHIRUtil methods and added deprecated flag to\nFHIRUtil.getResourceTypeName(Resource resource)\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d667e92564ce73f3442891886e33eabec642294", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/1d667e92564ce73f3442891886e33eabec642294", "committedDate": "2020-02-06T17:19:40Z", "message": "Refactoring and addition of FHIRUtil.createStandaloneBundle\n\n1. Moved ReferenceMappingVisitor from fhir-server to fhir-model and\nrefactored it to allow any mapping (not just UUID -> logical id)\n\n2. Introduced FHIRUtil.createStandaloneBundle for adding resources to a\nbundle and replacing internal references with bundle-local UUID values\n\n3. Removed deprecated FHIRUtil methods and added deprecated flag to\nFHIRUtil.getResourceTypeName(Resource resource)\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}, "afterCommit": {"oid": "800b5c91e83cc7f81b4dfd88f083a3f28b11caee", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/800b5c91e83cc7f81b4dfd88f083a3f28b11caee", "committedDate": "2020-02-06T17:53:57Z", "message": "Refactoring and addition of FHIRUtil.createStandaloneBundle\n\n1. Moved ReferenceMappingVisitor from fhir-server to fhir-model and\nrefactored it to allow any mapping (not just UUID -> logical id)\n\n2. Introduced FHIRUtil.createStandaloneBundle for adding resources to a\nbundle and replacing internal references with bundle-local UUID values\n\n3. Removed deprecated FHIRUtil methods and added deprecated flag to\nFHIRUtil.getResourceTypeName(Resource resource)\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9c81cf039ae60c90b87489dff15f2384e0d16bf", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/a9c81cf039ae60c90b87489dff15f2384e0d16bf", "committedDate": "2020-02-06T18:23:03Z", "message": "Updated build.yml to make powershell step fail on test error\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0ODUzMDg3", "url": "https://github.com/IBM/FHIR/pull/683#pullrequestreview-354853087", "createdAt": "2020-02-06T23:51:09Z", "commit": {"oid": "a9c81cf039ae60c90b87489dff15f2384e0d16bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo1MTowOVrOFmuL7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQyMzo1MTowOVrOFmuL7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE0NjkyNw==", "bodyText": "this should set to false", "url": "https://github.com/IBM/FHIR/pull/683#discussion_r376146927", "createdAt": "2020-02-06T23:51:09Z", "author": {"login": "albertwang-ibm"}, "path": "fhir-server-test/src/test/java/com/ibm/fhir/server/test/BundleTest.java", "diffHunk": "@@ -57,7 +57,7 @@\n public class BundleTest extends FHIRServerTestBase {\n     // Set this to true to have the request and response bundles displayed on the\n     // console.\n-    private boolean debug = false;\n+    private boolean DEBUG = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9c81cf039ae60c90b87489dff15f2384e0d16bf"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0ODU3NDAx", "url": "https://github.com/IBM/FHIR/pull/683#pullrequestreview-354857401", "createdAt": "2020-02-07T00:04:01Z", "commit": {"oid": "a9c81cf039ae60c90b87489dff15f2384e0d16bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMDowNDowMVrOFmuaGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMDowNDowMVrOFmuaGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE1MDU1NQ==", "bodyText": "Is this function used now? seems I can not find any caller ...", "url": "https://github.com/IBM/FHIR/pull/683#discussion_r376150555", "createdAt": "2020-02-07T00:04:01Z", "author": {"login": "albertwang-ibm"}, "path": "fhir-model/src/main/java/com/ibm/fhir/model/util/FHIRUtil.java", "diffHunk": "@@ -790,4 +521,38 @@ public static boolean isFailure(IssueSeverity severity) {\n             return true;\n         }\n     }\n+    \n+    /**\n+     * Create a self-contained bundle from the passed map of resources, replacing Resource.id values and \n+     * references with a generated UUID.\n+     * \n+     * @param bundleType\n+     *            The type of bundle to create\n+     * @param resources\n+     *            A mapping from String identifiers to Resources. For resources with no logical id, the key can be any\n+     *            string\n+     * @return a Bundle with the passed resources with ids and references replaced by UUIDs\n+     */\n+    public static Bundle createStandaloneBundle(BundleType bundleType, Map<String,Resource> resources) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9c81cf039ae60c90b87489dff15f2384e0d16bf"}, "originalPosition": 381}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 685, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}