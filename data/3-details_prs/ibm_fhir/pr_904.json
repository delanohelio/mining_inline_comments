{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNTEzMjAx", "number": 904, "title": "Issue 837 and 649 - double-down on the UBI-based OpenLiberty image", "bodyText": "Subsumes #834\n\n\nUpdated fhir-install/Dockerfile to use the UBI-based open-liberty image from https://hub.docker.com/r/openliberty/open-liberty\n\n\nMoved fhir-install/docker to build to make it clear this is just for our CI process.\nPreviously, the CI pipeline used a mix of scripts from build and fhir-install.\nNow there is a single Dockerfile in fhir-install and the variants used by our CI\npipeline are nicely contained under the build directory.\n\n\nAdded dockerfile-maven-plugin to fhir-install; now it builds the\nibmcom/ibm-fhir-server docker image as part of the \"install\" phase and\npushes it to a registry as part of the \"deploy\" phase (config pending)\n\n\nRemoved build/docker/liberty/Dockerfile, moved the config and userlib dirs\nunder a child directory named \"volumes\", and bind mounted those volumes\nfrom the fhir-server service defined in docker-compose.yml\n\n\nRemoved copy-dependencies.sh; now pre-integration-test.sh just\ncopies the dependencies directly to the target ($SIT) directory, so that\nonly the dockerized integration scripts actually use the build/docker\ndirectory\n\n\nAdded docker-push.sh to the release workflow; this uses a username\nand password that come from github secrets (currently my username and a\ncorresponding apikey)", "createdAt": "2020-04-07T21:31:55Z", "url": "https://github.com/IBM/FHIR/pull/904", "merged": true, "mergeCommit": {"oid": "48f032b2fde9f2c606cce34f7c6219c85397af39"}, "closed": true, "closedAt": "2020-04-08T18:11:27Z", "author": {"login": "lmsurpre"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVX6axgH2gAyNDAwNTEzMjAxOjllMDlhY2MxOGY4ZmQ1MzIwYWNmM2QxYTRhNGQ4NTA5M2QzNmU5OTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVrnwXAH2gAyNDAwNTEzMjAxOmMxYjI1ZmY0MzllZGE3YTQzMTllYTA4MzkzYTE3OWQyYzY3ZWNkMDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9e09acc18f8fd5320acf3d1a4a4d85093d36e999", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/9e09acc18f8fd5320acf3d1a4a4d85093d36e999", "committedDate": "2020-04-07T18:50:07Z", "message": "Update Dockerfile to align with openliberty #814\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9c803ba0af00d33dd2103c5ac5eac7fd602f07b", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/c9c803ba0af00d33dd2103c5ac5eac7fd602f07b", "committedDate": "2020-04-07T21:27:59Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}, "afterCommit": {"oid": "68928ed58c3925c386853bb1a04a4abebcfe6b17", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/68928ed58c3925c386853bb1a04a4abebcfe6b17", "committedDate": "2020-04-07T21:35:43Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "68928ed58c3925c386853bb1a04a4abebcfe6b17", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/68928ed58c3925c386853bb1a04a4abebcfe6b17", "committedDate": "2020-04-07T21:35:43Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}, "afterCommit": {"oid": "b92d3ceb96144a52fa8471e454b639c3d2e54f62", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/b92d3ceb96144a52fa8471e454b639c3d2e54f62", "committedDate": "2020-04-07T21:52:39Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NTY2NjUz", "url": "https://github.com/IBM/FHIR/pull/904#pullrequestreview-389566653", "createdAt": "2020-04-07T23:52:13Z", "commit": {"oid": "b92d3ceb96144a52fa8471e454b639c3d2e54f62"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMzo1MjoxM1rOGCaNLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMzo1MjoxM1rOGCaNLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE3OTY5Mw==", "bodyText": "logs was added for release.sh - please add back", "url": "https://github.com/IBM/FHIR/pull/904#discussion_r405179693", "createdAt": "2020-04-07T23:52:13Z", "author": {"login": "prb112"}, "path": "build/.gitignore", "diffHunk": "@@ -1 +1,6 @@\n-logs/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b92d3ceb96144a52fa8471e454b639c3d2e54f62"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NTY3MTUx", "url": "https://github.com/IBM/FHIR/pull/904#pullrequestreview-389567151", "createdAt": "2020-04-07T23:53:46Z", "commit": {"oid": "b92d3ceb96144a52fa8471e454b639c3d2e54f62"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMzo1Mzo0NlrOGCaO8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMzo1Mzo0NlrOGCaO8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE4MDE0Nw==", "bodyText": "I think what I built for persistence-automation for postgres, could play well here, and we should probably reconcile early as I think you have a pattern that I've just generalized.", "url": "https://github.com/IBM/FHIR/pull/904#discussion_r405180147", "createdAt": "2020-04-07T23:53:46Z", "author": {"login": "prb112"}, "path": "build/db2-migration-test-docker.sh", "diffHunk": "@@ -7,13 +7,13 @@\n set -ex\n \n echo \"Preparing environment for fhir-server integration tests...\"\n-if [[ -z \"${WORKSPACE}\" ]]; then\n-    echo \"ERROR: WORKSPACE environment variable not set!\"\n-    exit 2\n-fi\n+\n+# The full path to the directory of this script, no matter where its called from", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b92d3ceb96144a52fa8471e454b639c3d2e54f62"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NTY3NjE4", "url": "https://github.com/IBM/FHIR/pull/904#pullrequestreview-389567618", "createdAt": "2020-04-07T23:55:01Z", "commit": {"oid": "b92d3ceb96144a52fa8471e454b639c3d2e54f62"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMzo1NTowMVrOGCaQtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMzo1NTowMVrOGCaQtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE4MDU5OQ==", "bodyText": "There has to be at least one link / reference to this file in an md", "url": "https://github.com/IBM/FHIR/pull/904#discussion_r405180599", "createdAt": "2020-04-07T23:55:01Z", "author": {"login": "prb112"}, "path": "build/docker/db2/Dockerfile", "diffHunk": "@@ -6,8 +6,7 @@\n \n FROM ibmcom/db2\n \n-# Create a non-admin user for the FHIR server\n-# This non-admin user will be used by fhir server to access db2\n+# Create a non-admin user for the FHIR server to use to access db2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b92d3ceb96144a52fa8471e454b639c3d2e54f62"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b92d3ceb96144a52fa8471e454b639c3d2e54f62", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/b92d3ceb96144a52fa8471e454b639c3d2e54f62", "committedDate": "2020-04-07T21:52:39Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}, "afterCommit": {"oid": "19fcdb289afe182d913f04679552735dbda90740", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/19fcdb289afe182d913f04679552735dbda90740", "committedDate": "2020-04-08T01:44:24Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19fcdb289afe182d913f04679552735dbda90740", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/19fcdb289afe182d913f04679552735dbda90740", "committedDate": "2020-04-08T01:44:24Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}, "afterCommit": {"oid": "6a982c88ba111c5827b117c67322b666e3d42c0a", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/6a982c88ba111c5827b117c67322b666e3d42c0a", "committedDate": "2020-04-08T03:02:10Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a982c88ba111c5827b117c67322b666e3d42c0a", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/6a982c88ba111c5827b117c67322b666e3d42c0a", "committedDate": "2020-04-08T03:02:10Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}, "afterCommit": {"oid": "d5c9811c2dc33b4741df6c9475500f8b0f6f6a36", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/d5c9811c2dc33b4741df6c9475500f8b0f6f6a36", "committedDate": "2020-04-08T03:05:04Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1eba4ad4790419d79762906439ccb99fd381a41", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/e1eba4ad4790419d79762906439ccb99fd381a41", "committedDate": "2020-04-08T04:07:12Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5c9811c2dc33b4741df6c9475500f8b0f6f6a36", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/d5c9811c2dc33b4741df6c9475500f8b0f6f6a36", "committedDate": "2020-04-08T03:05:04Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}, "afterCommit": {"oid": "e1eba4ad4790419d79762906439ccb99fd381a41", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/e1eba4ad4790419d79762906439ccb99fd381a41", "committedDate": "2020-04-08T04:07:12Z", "message": "issue #837 - moved docker-compose env and all related scripts to build\n\nPreviously, the CI pipeline used a strange mix of scripts from `build`\nand `fhir-install`.\nNow there is a single Dockerfile in fhir-install and the variants used\nby our CI pipeline are nicely contained under the build directory.\n\nI performed a lot of cleanup / script normalization in the process.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "435dca98d89bce7486cc177654f66549116f7e3c", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/435dca98d89bce7486cc177654f66549116f7e3c", "committedDate": "2020-04-08T13:15:58Z", "message": "issue #837 - consolidate down to a single fhir-server docker image\n\n1. Added dockerfile-maven-plugin to fhir-install; now it builds the\n`ibmcom/ibm-fhir-server` docker image as part of the \"install\" phase and\npushes it to a registry as part of the \"deploy\" phase (config pending)\n\n2. Removed build/docker/liberty/Dockerfile; renamed the `liberty` dir to\n`fhir-server`, moved the config and userlib dirs under a child directory\nnamed \"volumes\", and bind mounted those volumes from the fhir-server\nservice defined in docker-compose.yml\n\n3. Removed copy-dependencies.sh; now `pre-integration-test.sh` just\ncopies the dependencies directly to the target ($SIT) directory, so that\nonly the dockerized integration scripts actually use the build/docker\ndirectory\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9a1dcbccba3546f479aec1f0ce639d3e3a8ff5a", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/d9a1dcbccba3546f479aec1f0ce639d3e3a8ff5a", "committedDate": "2020-04-08T13:44:42Z", "message": "Merge pull request #907 from IBM/issue-649\n\nissue #837 - consolidate to a single fhir-server docker image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db0e5d6fbfc6abeb801b0acaf85070e812a3e3aa", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/db0e5d6fbfc6abeb801b0acaf85070e812a3e3aa", "committedDate": "2020-04-08T15:59:19Z", "message": "issue #649 - docker push release automation\n\n1. Added docker-push.sh to the release workflow; this uses a username\nand password that come from github secrets (currently my username and a\ncorresponding apikey)\n\n2. Delete some old/outdated scripts from the build directory\n\n3. Moved the dockerfile-maven-plugin version back into parent\ndependencyManagement\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a62c3bede27f4e373da124462b78ea9d46036cfc", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/a62c3bede27f4e373da124462b78ea9d46036cfc", "committedDate": "2020-04-08T16:03:43Z", "message": "Merge pull request #909 from IBM/issue-649\n\nissue #649 - docker push release automation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTQzMjMz", "url": "https://github.com/IBM/FHIR/pull/904#pullrequestreview-390143233", "createdAt": "2020-04-08T16:35:46Z", "commit": {"oid": "a62c3bede27f4e373da124462b78ea9d46036cfc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjozNTo0NlrOGC3fNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjozNTo0NlrOGC3fNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY1OTQ0Nw==", "bodyText": "interesting.. this is considered a reserved exit code\nhttp://www.tldp.org/LDP/abs/html/exitcodes.html\njust something to think about next time we're in the code", "url": "https://github.com/IBM/FHIR/pull/904#discussion_r405659447", "createdAt": "2020-04-08T16:35:46Z", "author": {"login": "prb112"}, "path": "build/docker/copy-schema-jar.sh", "diffHunk": "@@ -0,0 +1,22 @@\n+#!/usr/bin/env bash\n+###############################################################################\n+# (C) Copyright IBM Corp. 2016, 2020\n+#\n+# SPDX-License-Identifier: Apache-2.0\n+###############################################################################\n+set -e\n+\n+if [[ -z \"${WORKSPACE}\" ]]; then\n+    echo \"ERROR: WORKSPACE environment variable not set!\"\n+    exit 2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a62c3bede27f4e373da124462b78ea9d46036cfc"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTQ2NzI1", "url": "https://github.com/IBM/FHIR/pull/904#pullrequestreview-390146725", "createdAt": "2020-04-08T16:40:26Z", "commit": {"oid": "a62c3bede27f4e373da124462b78ea9d46036cfc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjo0MDoyNlrOGC3qqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjo0MDoyNlrOGC3qqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY2MjM3Nw==", "bodyText": "good fix", "url": "https://github.com/IBM/FHIR/pull/904#discussion_r405662377", "createdAt": "2020-04-08T16:40:26Z", "author": {"login": "prb112"}, "path": "build/gen-code.sh", "diffHunk": "@@ -5,12 +5,16 @@\n #\n # SPDX-License-Identifier: Apache-2.0\n ###############################################################################\n+set -ex\n \n-# installs the fhir-tools\n-mvn clean package install -f ../fhir-tools/pom.xml\n+# The full path to the directory of this script, no matter where its called from\n+DIR=\"$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" >/dev/null 2>&1 && pwd )\"\n+WORKSPACE=\"$( dirname \"${DIR}\" )\"\n+\n+# Install the latest fhir-tools\n+mvn clean install -f ${WORKSPACE}/fhir-tools/pom.xml\n \n if [[ $? -eq 0 ]]\n-then \n-    mvn com.ibm.fhir:fhir-tools:generate-model -f ../fhir-model/pom.xml\n+then\n+    mvn com.ibm.fhir:fhir-tools:generate-model -f ${WORKSPACE}/fhir-model/pom.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a62c3bede27f4e373da124462b78ea9d46036cfc"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d474fd13fd77b10aa8849265f483c7e2510898e", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/4d474fd13fd77b10aa8849265f483c7e2510898e", "committedDate": "2020-04-08T16:41:55Z", "message": "Update README and avoid reserved exit code in scripts\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTQ4MzY1", "url": "https://github.com/IBM/FHIR/pull/904#pullrequestreview-390148365", "createdAt": "2020-04-08T16:42:32Z", "commit": {"oid": "a62c3bede27f4e373da124462b78ea9d46036cfc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1b25ff439eda7a4319ea08393a179d2c67ecd01", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/c1b25ff439eda7a4319ea08393a179d2c67ecd01", "committedDate": "2020-04-08T17:47:50Z", "message": "update README-DB2 and move into build dir\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 586, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}