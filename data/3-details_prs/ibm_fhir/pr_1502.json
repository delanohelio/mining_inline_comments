{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0NDg2Njgw", "number": 1502, "title": "issue #1500 validate resources in bundles just once", "bodyText": "Signed-off-by: Robin Arnold robin.arnold23@ibm.com", "createdAt": "2020-09-11T00:43:48Z", "url": "https://github.com/IBM/FHIR/pull/1502", "merged": true, "mergeCommit": {"oid": "f59bdd23a54d2241a01617a19108f69327a999c6"}, "closed": true, "closedAt": "2020-09-16T01:59:59Z", "author": {"login": "punktilious"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHqcxugH2gAyNDg0NDg2NjgwOjMzNzc3NzQxNzE2MTEyODc2NzM2ZWZiMGY5YzVmNmJhYTJmZTY3YWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJSKdQAH2gAyNDg0NDg2NjgwOjY1M2MzYTViYWE4NjE1YzUxZjM1ZmM5ZTE3NzhmMTRlNjExOGU1Y2M=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "33777741716112876736efb0f9c5f6baa2fe67ab", "author": {"user": {"login": "punktilious", "name": "Robin Arnold"}}, "url": "https://github.com/IBM/FHIR/commit/33777741716112876736efb0f9c5f6baa2fe67ab", "committedDate": "2020-09-11T00:42:09Z", "message": "issue #1500 validate resources in bundles just once\n\nSigned-off-by: Robin Arnold <robin.arnold23@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzQ3OTEx", "url": "https://github.com/IBM/FHIR/pull/1502#pullrequestreview-486747911", "createdAt": "2020-09-11T12:08:17Z", "commit": {"oid": "33777741716112876736efb0f9c5f6baa2fe67ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjowODoxOFrOHQcNLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjowODoxOFrOHQcNLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAwMTM5MA==", "bodyText": "small comment, no action necessary, just awareness.\nit comes off as a double negative and makes it slightly less readable", "url": "https://github.com/IBM/FHIR/pull/1502#discussion_r487001390", "createdAt": "2020-09-11T12:08:18Z", "author": {"login": "prb112"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/resources/FHIRResource.java", "diffHunk": "@@ -59,6 +59,7 @@\n  */\n public class FHIRResource {\n     private static final Logger log = java.util.logging.Logger.getLogger(FHIRResource.class.getName());\n+    protected static final boolean NO_SKIP_VALIDATION = false; // do not skip validation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33777741716112876736efb0f9c5f6baa2fe67ab"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzQ4NTUx", "url": "https://github.com/IBM/FHIR/pull/1502#pullrequestreview-486748551", "createdAt": "2020-09-11T12:09:19Z", "commit": {"oid": "33777741716112876736efb0f9c5f6baa2fe67ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjowOToxOVrOHQcPDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjowOToxOVrOHQcPDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAwMTg3MQ==", "bodyText": "Since this is used in two spots, perhaps it should be reconciled into one constant", "url": "https://github.com/IBM/FHIR/pull/1502#discussion_r487001871", "createdAt": "2020-09-11T12:09:19Z", "author": {"login": "prb112"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -100,7 +100,9 @@\n \n     private static final String EXTENSION_URL = \"http://ibm.com/fhir/extension\";\n     private static final String LOCAL_REF_PREFIX = \"urn:\";\n-\n+    private static final boolean SKIP_VALIDATION = true; // constant for when we want to avoid repeating validation\n+    private static final boolean NO_SKIP_VALIDATION = false; // do not skip validation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33777741716112876736efb0f9c5f6baa2fe67ab"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzQ5ODI1", "url": "https://github.com/IBM/FHIR/pull/1502#pullrequestreview-486749825", "createdAt": "2020-09-11T12:11:17Z", "commit": {"oid": "33777741716112876736efb0f9c5f6baa2fe67ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjoxMToxN1rOHQcTAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjoxMToxN1rOHQcTAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAwMjg4Mw==", "bodyText": "should it just be the validateInput(newResource)'s output not passing to a new arraylist?", "url": "https://github.com/IBM/FHIR/pull/1502#discussion_r487002883", "createdAt": "2020-09-11T12:11:17Z", "author": {"login": "prb112"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -382,7 +385,7 @@ private FHIRRestOperationResponse doPatchOrUpdate(String type, String id, FHIRPa\n             }\n \n             // Validate the input and, if valid, start collecting supplemental warnings\n-            List<Issue> warnings = new ArrayList<>(validateInput(newResource));\n+            List<Issue> warnings = skipValidation ? new ArrayList<>() : new ArrayList<>(validateInput(newResource));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33777741716112876736efb0f9c5f6baa2fe67ab"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzUwNDQw", "url": "https://github.com/IBM/FHIR/pull/1502#pullrequestreview-486750440", "createdAt": "2020-09-11T12:12:18Z", "commit": {"oid": "33777741716112876736efb0f9c5f6baa2fe67ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjoxMjoxOFrOHQcUyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxMjoxMjoxOFrOHQcUyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAwMzMzNw==", "bodyText": "should we drop this line?", "url": "https://github.com/IBM/FHIR/pull/1502#discussion_r487003337", "createdAt": "2020-09-11T12:12:18Z", "author": {"login": "prb112"}, "path": "operation/fhir-operation-document/src/main/java/com/ibm/fhir/operation/document/DocumentOperation.java", "diffHunk": "@@ -76,7 +76,7 @@ protected Parameters doInvoke(FHIROperationContext operationContext, Class<? ext\n                     \n                     if (persist) {\n                         // FHIRResourceHelper resourceHelper = (FHIRResourceHelper) operationContext.getProperty(FHIROperationContext.PROPNAME_RESOURCE_HELPER;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33777741716112876736efb0f9c5f6baa2fe67ab"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NzUwNTg2", "url": "https://github.com/IBM/FHIR/pull/1502#pullrequestreview-486750586", "createdAt": "2020-09-11T12:12:32Z", "commit": {"oid": "33777741716112876736efb0f9c5f6baa2fe67ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69b90b1dfd1517980ba057a7885539371f3d32c8", "author": {"user": {"login": "punktilious", "name": "Robin Arnold"}}, "url": "https://github.com/IBM/FHIR/commit/69b90b1dfd1517980ba057a7885539371f3d32c8", "committedDate": "2020-09-16T00:04:27Z", "message": "issue #1500 address review comments to simplify bool constants\n\nSigned-off-by: Robin Arnold <robin.arnold23@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "653c3a5baa8615c51f35fc9e1778f14e6118e5cc", "author": {"user": {"login": "punktilious", "name": "Robin Arnold"}}, "url": "https://github.com/IBM/FHIR/commit/653c3a5baa8615c51f35fc9e1778f14e6118e5cc", "committedDate": "2020-09-16T01:32:16Z", "message": "issue #1500 review comments fixing doCreate\n\nSigned-off-by: Robin Arnold <robin.arnold23@ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 831, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}