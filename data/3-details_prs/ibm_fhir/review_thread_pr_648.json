{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MjIzNDE5", "number": 648, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMDo1Mzo0MVrODbXh2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMDo1Mzo0MVrODbXh2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMDIzNjQyOnYy", "diffSide": "RIGHT", "path": "fhir-persistence-schema/README.md", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMDo1Mzo0MVrOFi0HFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMjoyNDozN1rOFi2waQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTY4Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ```\n          \n      \n    \n    \n  \n\nOn Windows use %VERSION%", "url": "https://github.com/IBM/FHIR/pull/648#discussion_r372049687", "createdAt": "2020-01-28T20:53:41Z", "author": {"login": "prb112"}, "path": "fhir-persistence-schema/README.md", "diffHunk": "@@ -1,58 +1,37 @@\n # IBM FHIR Server - fhir-persistence-schema\n \n-Builds and manages the multi-tenant FHIR R4 RDBMS schema (Db2). Includes Derby support for use in unit tests.\n+Builds and manages the multi-tenant FHIR R4 RDBMS schema (Db2). Includes Derby support for use in tests.\n \n-This module is built into two different jar files. The default jar is included with the IBM FHIR Server web application and is used\n-for bootstrapping Apache Derby databases (if configured). There is also an executable command line interface (cli) version of this jar that packages this module with all of its dependencies.\n+This module is built into two different jar files. The default jar is included with the IBM FHIR Server web application and is used for bootstrapping Apache Derby databases (if configured). There is also an executable command line interface (cli) version of this jar that packages this module with all of its dependencies.\n \n-This module is built into two different jar files. The executable command line interface (cli) version of this module is can also be downloaded directly from [JFrog Bintray](https://bintray.com/ibm-watson-health/ibm-fhir-server-releases/fhir-persistence-schema#files/com/ibm/fhir/fhir-persistence-schema) or is available from the Releases tab.\n+The executable command line interface (cli) version of this module can be downloaded from the project [Releases tab](https://github.com/IBM/FHIR/releases).\n \n-The cli jar is included in the FHIR Server distribution zip but \n+## Getting started\n+### Creating the database\n \n-## Execute the fhir-persistence-schema command line interface (CLI)\n-\n-1 - Execute the corresponding command, where VERSION is the version of the fhir-persistence-schema cli jar that you are using, and SCHEMA_COMMAND is the documented schema command you are using.\n-\n-*Linux/Mac*  \n-\n-```\n-VERSION=4.0.0-SNAPSHOT\n-java -jar ./fhir-persistence-schema-${VERSION}-cli.jar SCHEMA_COMMAND\n-```\n-\n-*Windows*\n-\n-```\n-set VERSION=4.0.0-SNAPSHOT\n-java -jar ./fhir-persistence-schema-%VERSION%-cli.jar SCHEMA_COMMAND\n-```\n+To create the Db2 database and database user, use the following commands:\n \n-## Creating the database\n-\n-To create the database and database user, please use the following command.\n-\n-``` shell \n-useradd fhiruser\n+``` shell\n+useradd fhirserver\n su - db2inst1 -c \"db2 CREATE DB FHIRDB using codeset UTF-8 territory us PAGESIZE 32768\"\n-su - db2inst1 -c \"db2 \\\"connect to fhirdb\\\" && db2 \\\"grant connect on database TO USER fhiruser\\\"\"\n+su - db2inst1 -c \"db2 \\\"connect to fhirdb\\\" && db2 \\\"grant connect on database TO USER fhirserver\\\"\"\n ```\n \n-## Printing the schema\n+### Printing the schema\n \n To print the schema DDL for review, execute `com.ibm.fhir.schema.app.SchemaPrinter`:\n \n-``` shell \n+``` shell\n java -cp ./fhir-persistence-schema-${VERSION}-cli.jar com.ibm.fhir.schema.app.SchemaPrinter [--to-file]\n ```\n \n-Without to-file, the output is the current System.out; else it's schema.sql, grants.sql, and stored-procedures.sql of the current directory.\n+With `--to-file` it outputs to `./schema.sql`, `./grants.sql`, and `./stored-procedures.sql`; otherwise to System.out.\n \n-\n-## Deploy and manage the schema with `com.ibm.fhir.schema.app.Main` \n+## Execute the fhir-persistence-schema command line interface (CLI)\n \n To deploy and manage the schema on a target database, the `fhir-persistence-schema` project includes a Main class that can parallelize the schema updates.\n \n-``` shell \n+``` shell\n java -jar ./fhir-persistence-schema-${VERSION}-cli.jar [OPTIONS]\n ```", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5101d0328f0bfcbcb39a54b2c1c03cea34a162d"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA1MDIwMw==", "bodyText": "may also need to specify where the VERSION comes from", "url": "https://github.com/IBM/FHIR/pull/648#discussion_r372050203", "createdAt": "2020-01-28T20:54:51Z", "author": {"login": "prb112"}, "path": "fhir-persistence-schema/README.md", "diffHunk": "@@ -1,58 +1,37 @@\n # IBM FHIR Server - fhir-persistence-schema\n \n-Builds and manages the multi-tenant FHIR R4 RDBMS schema (Db2). Includes Derby support for use in unit tests.\n+Builds and manages the multi-tenant FHIR R4 RDBMS schema (Db2). Includes Derby support for use in tests.\n \n-This module is built into two different jar files. The default jar is included with the IBM FHIR Server web application and is used\n-for bootstrapping Apache Derby databases (if configured). There is also an executable command line interface (cli) version of this jar that packages this module with all of its dependencies.\n+This module is built into two different jar files. The default jar is included with the IBM FHIR Server web application and is used for bootstrapping Apache Derby databases (if configured). There is also an executable command line interface (cli) version of this jar that packages this module with all of its dependencies.\n \n-This module is built into two different jar files. The executable command line interface (cli) version of this module is can also be downloaded directly from [JFrog Bintray](https://bintray.com/ibm-watson-health/ibm-fhir-server-releases/fhir-persistence-schema#files/com/ibm/fhir/fhir-persistence-schema) or is available from the Releases tab.\n+The executable command line interface (cli) version of this module can be downloaded from the project [Releases tab](https://github.com/IBM/FHIR/releases).\n \n-The cli jar is included in the FHIR Server distribution zip but \n+## Getting started\n+### Creating the database\n \n-## Execute the fhir-persistence-schema command line interface (CLI)\n-\n-1 - Execute the corresponding command, where VERSION is the version of the fhir-persistence-schema cli jar that you are using, and SCHEMA_COMMAND is the documented schema command you are using.\n-\n-*Linux/Mac*  \n-\n-```\n-VERSION=4.0.0-SNAPSHOT\n-java -jar ./fhir-persistence-schema-${VERSION}-cli.jar SCHEMA_COMMAND\n-```\n-\n-*Windows*\n-\n-```\n-set VERSION=4.0.0-SNAPSHOT\n-java -jar ./fhir-persistence-schema-%VERSION%-cli.jar SCHEMA_COMMAND\n-```\n+To create the Db2 database and database user, use the following commands:\n \n-## Creating the database\n-\n-To create the database and database user, please use the following command.\n-\n-``` shell \n-useradd fhiruser\n+``` shell\n+useradd fhirserver\n su - db2inst1 -c \"db2 CREATE DB FHIRDB using codeset UTF-8 territory us PAGESIZE 32768\"\n-su - db2inst1 -c \"db2 \\\"connect to fhirdb\\\" && db2 \\\"grant connect on database TO USER fhiruser\\\"\"\n+su - db2inst1 -c \"db2 \\\"connect to fhirdb\\\" && db2 \\\"grant connect on database TO USER fhirserver\\\"\"\n ```\n \n-## Printing the schema\n+### Printing the schema\n \n To print the schema DDL for review, execute `com.ibm.fhir.schema.app.SchemaPrinter`:\n \n-``` shell \n+``` shell\n java -cp ./fhir-persistence-schema-${VERSION}-cli.jar com.ibm.fhir.schema.app.SchemaPrinter [--to-file]\n ```\n \n-Without to-file, the output is the current System.out; else it's schema.sql, grants.sql, and stored-procedures.sql of the current directory.\n+With `--to-file` it outputs to `./schema.sql`, `./grants.sql`, and `./stored-procedures.sql`; otherwise to System.out.\n \n-\n-## Deploy and manage the schema with `com.ibm.fhir.schema.app.Main` \n+## Execute the fhir-persistence-schema command line interface (CLI)\n \n To deploy and manage the schema on a target database, the `fhir-persistence-schema` project includes a Main class that can parallelize the schema updates.\n \n-``` shell \n+``` shell\n java -jar ./fhir-persistence-schema-${VERSION}-cli.jar [OPTIONS]\n ```", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTY4Nw=="}, "originalCommit": {"oid": "e5101d0328f0bfcbcb39a54b2c1c03cea34a162d"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA1MDIzNA==", "bodyText": "I also thought to just make it ./fhir-persistence-schema-*-cli.jar like we just did in our script...then its platform-neutral, right?", "url": "https://github.com/IBM/FHIR/pull/648#discussion_r372050234", "createdAt": "2020-01-28T20:54:55Z", "author": {"login": "lmsurpre"}, "path": "fhir-persistence-schema/README.md", "diffHunk": "@@ -1,58 +1,37 @@\n # IBM FHIR Server - fhir-persistence-schema\n \n-Builds and manages the multi-tenant FHIR R4 RDBMS schema (Db2). Includes Derby support for use in unit tests.\n+Builds and manages the multi-tenant FHIR R4 RDBMS schema (Db2). Includes Derby support for use in tests.\n \n-This module is built into two different jar files. The default jar is included with the IBM FHIR Server web application and is used\n-for bootstrapping Apache Derby databases (if configured). There is also an executable command line interface (cli) version of this jar that packages this module with all of its dependencies.\n+This module is built into two different jar files. The default jar is included with the IBM FHIR Server web application and is used for bootstrapping Apache Derby databases (if configured). There is also an executable command line interface (cli) version of this jar that packages this module with all of its dependencies.\n \n-This module is built into two different jar files. The executable command line interface (cli) version of this module is can also be downloaded directly from [JFrog Bintray](https://bintray.com/ibm-watson-health/ibm-fhir-server-releases/fhir-persistence-schema#files/com/ibm/fhir/fhir-persistence-schema) or is available from the Releases tab.\n+The executable command line interface (cli) version of this module can be downloaded from the project [Releases tab](https://github.com/IBM/FHIR/releases).\n \n-The cli jar is included in the FHIR Server distribution zip but \n+## Getting started\n+### Creating the database\n \n-## Execute the fhir-persistence-schema command line interface (CLI)\n-\n-1 - Execute the corresponding command, where VERSION is the version of the fhir-persistence-schema cli jar that you are using, and SCHEMA_COMMAND is the documented schema command you are using.\n-\n-*Linux/Mac*  \n-\n-```\n-VERSION=4.0.0-SNAPSHOT\n-java -jar ./fhir-persistence-schema-${VERSION}-cli.jar SCHEMA_COMMAND\n-```\n-\n-*Windows*\n-\n-```\n-set VERSION=4.0.0-SNAPSHOT\n-java -jar ./fhir-persistence-schema-%VERSION%-cli.jar SCHEMA_COMMAND\n-```\n+To create the Db2 database and database user, use the following commands:\n \n-## Creating the database\n-\n-To create the database and database user, please use the following command.\n-\n-``` shell \n-useradd fhiruser\n+``` shell\n+useradd fhirserver\n su - db2inst1 -c \"db2 CREATE DB FHIRDB using codeset UTF-8 territory us PAGESIZE 32768\"\n-su - db2inst1 -c \"db2 \\\"connect to fhirdb\\\" && db2 \\\"grant connect on database TO USER fhiruser\\\"\"\n+su - db2inst1 -c \"db2 \\\"connect to fhirdb\\\" && db2 \\\"grant connect on database TO USER fhirserver\\\"\"\n ```\n \n-## Printing the schema\n+### Printing the schema\n \n To print the schema DDL for review, execute `com.ibm.fhir.schema.app.SchemaPrinter`:\n \n-``` shell \n+``` shell\n java -cp ./fhir-persistence-schema-${VERSION}-cli.jar com.ibm.fhir.schema.app.SchemaPrinter [--to-file]\n ```\n \n-Without to-file, the output is the current System.out; else it's schema.sql, grants.sql, and stored-procedures.sql of the current directory.\n+With `--to-file` it outputs to `./schema.sql`, `./grants.sql`, and `./stored-procedures.sql`; otherwise to System.out.\n \n-\n-## Deploy and manage the schema with `com.ibm.fhir.schema.app.Main` \n+## Execute the fhir-persistence-schema command line interface (CLI)\n \n To deploy and manage the schema on a target database, the `fhir-persistence-schema` project includes a Main class that can parallelize the schema updates.\n \n-``` shell \n+``` shell\n java -jar ./fhir-persistence-schema-${VERSION}-cli.jar [OPTIONS]\n ```", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTY4Nw=="}, "originalCommit": {"oid": "e5101d0328f0bfcbcb39a54b2c1c03cea34a162d"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA5MzAzMw==", "bodyText": "added a note to replace version with the version", "url": "https://github.com/IBM/FHIR/pull/648#discussion_r372093033", "createdAt": "2020-01-28T22:24:37Z", "author": {"login": "lmsurpre"}, "path": "fhir-persistence-schema/README.md", "diffHunk": "@@ -1,58 +1,37 @@\n # IBM FHIR Server - fhir-persistence-schema\n \n-Builds and manages the multi-tenant FHIR R4 RDBMS schema (Db2). Includes Derby support for use in unit tests.\n+Builds and manages the multi-tenant FHIR R4 RDBMS schema (Db2). Includes Derby support for use in tests.\n \n-This module is built into two different jar files. The default jar is included with the IBM FHIR Server web application and is used\n-for bootstrapping Apache Derby databases (if configured). There is also an executable command line interface (cli) version of this jar that packages this module with all of its dependencies.\n+This module is built into two different jar files. The default jar is included with the IBM FHIR Server web application and is used for bootstrapping Apache Derby databases (if configured). There is also an executable command line interface (cli) version of this jar that packages this module with all of its dependencies.\n \n-This module is built into two different jar files. The executable command line interface (cli) version of this module is can also be downloaded directly from [JFrog Bintray](https://bintray.com/ibm-watson-health/ibm-fhir-server-releases/fhir-persistence-schema#files/com/ibm/fhir/fhir-persistence-schema) or is available from the Releases tab.\n+The executable command line interface (cli) version of this module can be downloaded from the project [Releases tab](https://github.com/IBM/FHIR/releases).\n \n-The cli jar is included in the FHIR Server distribution zip but \n+## Getting started\n+### Creating the database\n \n-## Execute the fhir-persistence-schema command line interface (CLI)\n-\n-1 - Execute the corresponding command, where VERSION is the version of the fhir-persistence-schema cli jar that you are using, and SCHEMA_COMMAND is the documented schema command you are using.\n-\n-*Linux/Mac*  \n-\n-```\n-VERSION=4.0.0-SNAPSHOT\n-java -jar ./fhir-persistence-schema-${VERSION}-cli.jar SCHEMA_COMMAND\n-```\n-\n-*Windows*\n-\n-```\n-set VERSION=4.0.0-SNAPSHOT\n-java -jar ./fhir-persistence-schema-%VERSION%-cli.jar SCHEMA_COMMAND\n-```\n+To create the Db2 database and database user, use the following commands:\n \n-## Creating the database\n-\n-To create the database and database user, please use the following command.\n-\n-``` shell \n-useradd fhiruser\n+``` shell\n+useradd fhirserver\n su - db2inst1 -c \"db2 CREATE DB FHIRDB using codeset UTF-8 territory us PAGESIZE 32768\"\n-su - db2inst1 -c \"db2 \\\"connect to fhirdb\\\" && db2 \\\"grant connect on database TO USER fhiruser\\\"\"\n+su - db2inst1 -c \"db2 \\\"connect to fhirdb\\\" && db2 \\\"grant connect on database TO USER fhirserver\\\"\"\n ```\n \n-## Printing the schema\n+### Printing the schema\n \n To print the schema DDL for review, execute `com.ibm.fhir.schema.app.SchemaPrinter`:\n \n-``` shell \n+``` shell\n java -cp ./fhir-persistence-schema-${VERSION}-cli.jar com.ibm.fhir.schema.app.SchemaPrinter [--to-file]\n ```\n \n-Without to-file, the output is the current System.out; else it's schema.sql, grants.sql, and stored-procedures.sql of the current directory.\n+With `--to-file` it outputs to `./schema.sql`, `./grants.sql`, and `./stored-procedures.sql`; otherwise to System.out.\n \n-\n-## Deploy and manage the schema with `com.ibm.fhir.schema.app.Main` \n+## Execute the fhir-persistence-schema command line interface (CLI)\n \n To deploy and manage the schema on a target database, the `fhir-persistence-schema` project includes a Main class that can parallelize the schema updates.\n \n-``` shell \n+``` shell\n java -jar ./fhir-persistence-schema-${VERSION}-cli.jar [OPTIONS]\n ```", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTY4Nw=="}, "originalCommit": {"oid": "e5101d0328f0bfcbcb39a54b2c1c03cea34a162d"}, "originalPosition": 71}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 244, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}