{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1ODIzMDAw", "number": 869, "title": "issue #664 #884 conditional delete multiple match support and config for disabling bulk export public access", "bodyText": "This PR:\n(1) Added support for conditional delete with multiple matches.\n(2) Added server configure \"fhirserver.bulkdata.isExportPublic\" to allow user to disable public access to the exported files in COS/S3.", "createdAt": "2020-03-30T18:30:15Z", "url": "https://github.com/IBM/FHIR/pull/869", "merged": true, "mergeCommit": {"oid": "a076e9dade84e90545ea7eca7dcc1c3c4421b625"}, "closed": true, "closedAt": "2020-04-03T16:17:02Z", "author": {"login": "albertwang-ibm"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSynm1AH2gAyMzk1ODIzMDAwOmMxYmMwNTY0MGViNTc2YjY0NjNlZDQ3YzE5ODZiODQ0MjBhYjFiODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTtNQXgH2gAyMzk1ODIzMDAwOmY4ODY3NmYyYjlhNmNiZjc4NjU2ZjZhMDM4ZTBlMDA1YmYzNTIzYTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c1bc05640eb576b6463ed47c1986b84420ab1b81", "author": {"user": {"login": "albertwang-ibm", "name": "Albert(Xu) Wang"}}, "url": "https://github.com/IBM/FHIR/commit/c1bc05640eb576b6463ed47c1986b84420ab1b81", "committedDate": "2020-03-30T18:15:14Z", "message": "Merge pull request #868 from IBM/issue-664\n\nIssue 664 - sync with master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ec11924798594357a2603d7c09b4135fcd200f9", "author": {"user": {"login": "albertwang-ibm", "name": "Albert(Xu) Wang"}}, "url": "https://github.com/IBM/FHIR/commit/8ec11924798594357a2603d7c09b4135fcd200f9", "committedDate": "2020-03-30T18:28:56Z", "message": "issue #664 conditional multiple delete support\n\nSigned-off-by: Albert Wang <xuwang@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0MTY1ODg2", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-384165886", "createdAt": "2020-03-30T19:31:52Z", "commit": {"oid": "8ec11924798594357a2603d7c09b4135fcd200f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxOTozMTo1MlrOF95EPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxOTozMTo1MlrOF95EPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0MjQzMA==", "bodyText": "this is the only real change in this file, all the others are just formats like removing empty spaces at the line ends.", "url": "https://github.com/IBM/FHIR/pull/869#discussion_r400442430", "createdAt": "2020-03-30T19:31:52Z", "author": {"login": "albertwang-ibm"}, "path": "fhir-server-test/src/test/java/com/ibm/fhir/server/test/BundleTest.java", "diffHunk": "@@ -2209,8 +2209,7 @@ public void testBatchConditionalDeletes() throws Exception {\n         assertResponseBundle(responseBundle, BundleType.BATCH_RESPONSE, 4);\n         assertGoodGetResponse(responseBundle.getEntry().get(0), Status.OK.getStatusCode(), HTTPReturnPreference.MINIMAL);\n         assertGoodGetResponse(responseBundle.getEntry().get(1), Status.NO_CONTENT.getStatusCode(), HTTPReturnPreference.MINIMAL);\n-        assertBadResponse(responseBundle.getEntry().get(2), Status.PRECONDITION_FAILED.getStatusCode(),\n-                \"returned multiple matches\");\n+        assertGoodGetResponse(responseBundle.getEntry().get(2), Status.NO_CONTENT.getStatusCode(), HTTPReturnPreference.MINIMAL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ec11924798594357a2603d7c09b4135fcd200f9"}, "originalPosition": 652}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27e7f1ab2797531f384a51a5ebe23f5c256848de", "author": {"user": {"login": "albertwang-ibm", "name": "Albert(Xu) Wang"}}, "url": "https://github.com/IBM/FHIR/commit/27e7f1ab2797531f384a51a5ebe23f5c256848de", "committedDate": "2020-04-01T13:55:15Z", "message": "issue #664 add config for conditional delete\n\nSigned-off-by: Albert Wang <xuwang@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1ODM4MjE5", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-385838219", "createdAt": "2020-04-01T18:22:18Z", "commit": {"oid": "27e7f1ab2797531f384a51a5ebe23f5c256848de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxODoyMjoxOFrOF_NDiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxODoyMjoxOFrOF_NDiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTgxODUwNQ==", "bodyText": "should it be a 412 to be more consistent with the fhir spec?", "url": "https://github.com/IBM/FHIR/pull/869#discussion_r401818505", "createdAt": "2020-04-01T18:22:18Z", "author": {"login": "lmsurpre"}, "path": "fhir-server-test/src/test/java/com/ibm/fhir/server/test/BundleTest.java", "diffHunk": "@@ -2209,8 +2209,22 @@ public void testBatchConditionalDeletes() throws Exception {\n         assertResponseBundle(responseBundle, BundleType.BATCH_RESPONSE, 4);\n         assertGoodGetResponse(responseBundle.getEntry().get(0), Status.OK.getStatusCode(), HTTPReturnPreference.MINIMAL);\n         assertGoodGetResponse(responseBundle.getEntry().get(1), Status.NO_CONTENT.getStatusCode(), HTTPReturnPreference.MINIMAL);\n-        assertBadResponse(responseBundle.getEntry().get(2), Status.PRECONDITION_FAILED.getStatusCode(),\n-                \"returned multiple matches\");\n+\n+        // A search that results in multiple matches:\n+        // (1) if matches > FHIRConstants.FHIR_CONDITIONAL_DELETE_MAX_NUMBER_DEFAULT, then result in a 400 status code.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27e7f1ab2797531f384a51a5ebe23f5c256848de"}, "originalPosition": 664}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1ODQzNjM0", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-385843634", "createdAt": "2020-04-01T18:29:41Z", "commit": {"oid": "27e7f1ab2797531f384a51a5ebe23f5c256848de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxODoyOTo0MVrOF_NU6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxODoyOTo0MVrOF_NU6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTgyMjk1Mg==", "bodyText": "should it be a 412 to be more consistent with the fhir spec?", "url": "https://github.com/IBM/FHIR/pull/869#discussion_r401822952", "createdAt": "2020-04-01T18:29:41Z", "author": {"login": "lmsurpre"}, "path": "fhir-server-test/src/test/java/com/ibm/fhir/server/test/DeleteTest.java", "diffHunk": "@@ -430,17 +435,31 @@ public void testConditionalDeleteResource() throws Exception {\n         } else {\n             assertResponse(response.getResponse(), Response.Status.METHOD_NOT_ALLOWED.getStatusCode());\n         }\n-        \n-        // A search that results in multiple matches should result in a 412 status code.\n+\n+        // A search that results in multiple matches:\n+        // (1) if matches > FHIRConstants.FHIR_CONDITIONAL_DELETE_MAX_NUMBER_DEFAULT, then result in a 400 status code.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27e7f1ab2797531f384a51a5ebe23f5c256848de"}, "originalPosition": 81}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1ODQ0Nzc2", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-385844776", "createdAt": "2020-04-01T18:31:11Z", "commit": {"oid": "27e7f1ab2797531f384a51a5ebe23f5c256848de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxODozMToxMlrOF_NYYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxODozMToxMlrOF_NYYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTgyMzg0MA==", "bodyText": "because you use FHIRConfigHelper to look up the value of the config property, I think this means it is both tenant-specific and dynamic\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            |`fhirServer/core/conditionalDeleteMaxNumber`|N|N|\n          \n          \n            \n            |`fhirServer/core/conditionalDeleteMaxNumber`|Y|Y|", "url": "https://github.com/IBM/FHIR/pull/869#discussion_r401823840", "createdAt": "2020-04-01T18:31:12Z", "author": {"login": "lmsurpre"}, "path": "docs/src/pages/guides/FHIRServerUsersGuide.md", "diffHunk": "@@ -1420,6 +1422,7 @@ must restart the server for that change to take effect.\n |`fhirServer/core/defaultHandling`|Y|Y|\n |`fhirServer/core/allowClientHandlingPref`|Y|Y|\n |`fhirServer/core/checkReferenceTypes`|N|N|\n+|`fhirServer/core/conditionalDeleteMaxNumber`|N|N|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27e7f1ab2797531f384a51a5ebe23f5c256848de"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1ODQ0OTUx", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-385844951", "createdAt": "2020-04-01T18:31:29Z", "commit": {"oid": "27e7f1ab2797531f384a51a5ebe23f5c256848de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxODozMToyOVrOF_NY8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxODozMToyOVrOF_NY8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTgyMzk4NQ==", "bodyText": "because you use FHIRConfigHelper to look it up, I think this means it is tenant-specific", "url": "https://github.com/IBM/FHIR/pull/869#discussion_r401823985", "createdAt": "2020-04-01T18:31:29Z", "author": {"login": "lmsurpre"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -499,26 +503,28 @@ public FHIRRestOperationResponse doDelete(String type, String id, String searchQ\n             // resource to be deleted. Otherwise, we'll use the id value to identify the resource\n             // to be deleted.\n             Resource resourceToDelete = null;\n+            Bundle responseBundle = null;\n+\n             if (searchQueryString != null) {\n+                int searchPageSize = FHIRConfigHelper.getIntProperty(FHIRConfiguration.PROPERTY_CONDITIONAL_DELETE_MAX_NUMBER, FHIRConstants.FHIR_CONDITIONAL_DELETE_MAX_NUMBER_DEFAULT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27e7f1ab2797531f384a51a5ebe23f5c256848de"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4601fb2e8e99fdbf31a5af5cfef637749a579d90", "author": {"user": {"login": "albertwang-ibm", "name": "Albert(Xu) Wang"}}, "url": "https://github.com/IBM/FHIR/commit/4601fb2e8e99fdbf31a5af5cfef637749a579d90", "committedDate": "2020-04-01T23:51:46Z", "message": "issue #664 updates per review comments\n\nSigned-off-by: Albert Wang <xuwang@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ed5b894b0315298eff762129b0e39551be438fd", "author": {"user": {"login": "albertwang-ibm", "name": "Albert(Xu) Wang"}}, "url": "https://github.com/IBM/FHIR/commit/7ed5b894b0315298eff762129b0e39551be438fd", "committedDate": "2020-04-02T01:24:34Z", "message": "issue #884 add config to disable public access for export\n\nSigned-off-by: Albert Wang <xuwang@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45c9225519841c2905f62134698740401f1dd613", "author": {"user": {"login": "albertwang-ibm", "name": "Albert(Xu) Wang"}}, "url": "https://github.com/IBM/FHIR/commit/45c9225519841c2905f62134698740401f1dd613", "committedDate": "2020-04-02T01:29:23Z", "message": "issue #884 minor update\n\nSigned-off-by: Albert Wang <xuwang@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MDY1Njg1", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-386065685", "createdAt": "2020-04-02T02:11:33Z", "commit": {"oid": "45c9225519841c2905f62134698740401f1dd613"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMjoxMTozM1rOF_Y6nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMjoxMTozM1rOF_Y6nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjAxMjgyOQ==", "bodyText": "Is this the part that you mentioned only works on Amazon S3 and not COS?  Or that's something else?", "url": "https://github.com/IBM/FHIR/pull/869#discussion_r402012829", "createdAt": "2020-04-02T02:11:33Z", "author": {"login": "lmsurpre"}, "path": "fhir-bulkimportexport-webapp/src/main/java/com/ibm/fhir/bulkexport/system/ChunkWriter.java", "diffHunk": "@@ -154,11 +158,18 @@ private void pushFhirJsonsToCos(InputStream in, int dataLength) throws Exception\n             if (cosBucketPathPrefix != null && cosBucketPathPrefix.trim().length() > 0) {\n                 itemName = cosBucketPathPrefix + \"/\" + ResourceTypes.get(chunkData.getIndexOfCurrentResourceType())\n                             + \"_\" + chunkData.getPartNum() + \".ndjson\";\n+                if (isExportPublic) {\n+                    // Set expiration time to 2 hours(7200 seconds).\n+                    metadata.setExpirationTime(Date.from(Instant.now().plusSeconds(7200)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45c9225519841c2905f62134698740401f1dd613"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MDY2MDE1", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-386066015", "createdAt": "2020-04-02T02:12:49Z", "commit": {"oid": "45c9225519841c2905f62134698740401f1dd613"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMjoxMjo0OVrOF_Y76A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMjoxMjo0OVrOF_Y76A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjAxMzE2MA==", "bodyText": "does \"cos\" cover all S3-compatible object stores or just the IBM Cloud one?", "url": "https://github.com/IBM/FHIR/pull/869#discussion_r402013160", "createdAt": "2020-04-02T02:12:49Z", "author": {"login": "lmsurpre"}, "path": "docs/src/pages/guides/FHIRServerUsersGuide.md", "diffHunk": "@@ -1368,6 +1327,22 @@ This section contains reference information about each of the configuration prop\n |`fhirServer/audit/serviceProperties/geoState`|string|The Geo State configure for CADF audit logging service.|\n |`fhirServer/audit/serviceProperties/geoCounty`|string|The Geo Country configure for CADF audit logging service.|\n |`fhirServer/search/useBoundingRadius`|boolean|True, the bounding area is a Radius, else the bounding area is a box.|\n+|`fhirServer/bulkdata/applicationName`| string|Fixed value, always set to fhir-bulkimportexport-webapp |\n+|`fhirServer/bulkdata/moduleName`|string| Fixed value, always set to fhir-bulkimportexport.war |\n+|`fhirServer/bulkdata/jobParameters/cos.bucket.name`|string|Object store bucket name |\n+|`fhirServer/bulkdata/jobParameters/cos.location`|Object store location |\n+|`fhirServer/bulkdata/jobParameters/cos.endpointurl`| Object store end point url |\n+|`fhirServer/bulkdata/jobParameters/credential.ibm`| If use IBM credential, \"Y\" or \"N\" |\n+|`fhirServer/bulkdata/jobParameters/cos.api.key`|string|API key for accessing IBM COS |\n+|`fhirServer/bulkdata/jobParameters/cos.srvinst.id`|string|Service instance Id for accessing IBM COS |\n+|`fhirServer/bulkdata/implementation_type`|string|\"cos\" or \"dummy\" which matches the desired bulk operation implementation type |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45c9225519841c2905f62134698740401f1dd613"}, "originalPosition": 82}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MDY4MDgz", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-386068083", "createdAt": "2020-04-02T02:20:24Z", "commit": {"oid": "45c9225519841c2905f62134698740401f1dd613"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMjoyMDoyNVrOF_ZDeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMjoyMDoyNVrOF_ZDeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjAxNTA5Ng==", "bodyText": "I agree its best to move these to the reference table in section 5; good call", "url": "https://github.com/IBM/FHIR/pull/869#discussion_r402015096", "createdAt": "2020-04-02T02:20:25Z", "author": {"login": "lmsurpre"}, "path": "docs/src/pages/guides/FHIRServerUsersGuide.md", "diffHunk": "@@ -1143,50 +1143,7 @@ The *fhir-bulkimportexport-webapp* module is a wrapper for the whole BulkData we\n     </webApplication>\n ```\n \n-BulkData web application writes the exported FHIR resources to an IBM Cloud Object Storage (COS) or Amazon S3 bucket, as configured in the per-tenant bulkdata.json configuration file. The bulkdata.json file is stored in the tenant configuration directory of each fhir-server instance. The following is a bulkdata.json which is configured to export the FHIR resources into fhir-bulkdata-sample bucket of IBM COS:\n-\n-```json\n-{\n-  \"applicationName\": \"fhir-bulkimportexport-webapp\",\n-  \"moduleName\": \"fhir-bulkimportexport.war\",\n-  \"jobParameters\": {\n-    \"cos.bucket.name\": \"fhir-bulkdata-sample\",\n-    \"cos.location\": \"us\",\n-    \"cos.endpointurl\": \"https://s3.us-south.cloud-object-storage.appdomain.cloud\",\n-    \"cos.credential.ibm\": \"Y\",\n-    \"cos.api.key\": \"xxxxxxxxxxxxxxxxxxxxxxx\",\n-    \"cos.srvinst.id\": \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\n-  },\n-  \"implementation_type\": \"cos\",\n-  \"batch-uri\": \"https://localhost:9443/ibm/api/batch/jobinstances\",\n-  \"batch-user\": \"fhiradmin\",\n-  \"batch-user-password\": \"xxxxxxxxxxxx\",\n-  \"batch-truststore\" : \"resources/security/fhirTruststore.jks\",\n-  \"batch-truststore-password\" : \"xxxxxxxxxxxx\",\n-  \"serverHostname\" : \"localhost:9443\",\n-  \"contextRoot\" : \"/fhir-server/api/v4\"\n-}\n-```\n-The following configured parameters are:\n-\n-|Parameter Name   | Description|\n-|--------------| ------------|\n-|`applicationName`| fixed value, always set to fhir-bulkimportexport-webapp |\n-|`moduleName`| fixed value, always set to fhir-bulkimportexport.war |\n-|`jobParameters.cos.bucket.name`| object store bucket name |\n-|`jobParameters.cos.location`| object store location |\n-|`jobParameters.cos.endpointurl`| object store end point url |\n-|`jobParameters.credential.ibm`| if use IBM credential |\n-|`jobParameters.cos.api.key`| api key for accessing IBM COS |\n-|`jobParameters.cos.srvinst.id`| service instance Id for accessing IBM COS |\n-|`implementation_type`| cos or dummy which matches the desired bulk operation implementation type |\n-|`batch-uri`| the URL to access the FHIR server hosting the batch web application |\n-|`batch-user`| user for submitting JavaBatch job |\n-|`batch-user-password`| password for above batch user |\n-|`batch-truststore`| trust store for JavaBatch job submission |\n-|`batch-truststore-password`| password for above trust store |\n-|`serverHostname`| host name part of the server generated polling location url |\n-|`contextRoot`| context root part of the server generated polling location url |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45c9225519841c2905f62134698740401f1dd613"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MDY4NzAw", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-386068700", "createdAt": "2020-04-02T02:22:50Z", "commit": {"oid": "45c9225519841c2905f62134698740401f1dd613"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMjoyMjo1MFrOF_ZFnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMjoyMjo1MFrOF_ZFnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjAxNTY0NA==", "bodyText": "I agree this content is outdated; now the config data exists in fhir-server-config.json instead of a separate bulkdata.json.\nHowever, I think maybe we should leave a sample config here just to illustrate the properties (and refer to section 5 for the full list of properties).", "url": "https://github.com/IBM/FHIR/pull/869#discussion_r402015644", "createdAt": "2020-04-02T02:22:50Z", "author": {"login": "lmsurpre"}, "path": "docs/src/pages/guides/FHIRServerUsersGuide.md", "diffHunk": "@@ -1143,50 +1143,7 @@ The *fhir-bulkimportexport-webapp* module is a wrapper for the whole BulkData we\n     </webApplication>\n ```\n \n-BulkData web application writes the exported FHIR resources to an IBM Cloud Object Storage (COS) or Amazon S3 bucket, as configured in the per-tenant bulkdata.json configuration file. The bulkdata.json file is stored in the tenant configuration directory of each fhir-server instance. The following is a bulkdata.json which is configured to export the FHIR resources into fhir-bulkdata-sample bucket of IBM COS:\n-\n-```json\n-{\n-  \"applicationName\": \"fhir-bulkimportexport-webapp\",\n-  \"moduleName\": \"fhir-bulkimportexport.war\",\n-  \"jobParameters\": {\n-    \"cos.bucket.name\": \"fhir-bulkdata-sample\",\n-    \"cos.location\": \"us\",\n-    \"cos.endpointurl\": \"https://s3.us-south.cloud-object-storage.appdomain.cloud\",\n-    \"cos.credential.ibm\": \"Y\",\n-    \"cos.api.key\": \"xxxxxxxxxxxxxxxxxxxxxxx\",\n-    \"cos.srvinst.id\": \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\n-  },\n-  \"implementation_type\": \"cos\",\n-  \"batch-uri\": \"https://localhost:9443/ibm/api/batch/jobinstances\",\n-  \"batch-user\": \"fhiradmin\",\n-  \"batch-user-password\": \"xxxxxxxxxxxx\",\n-  \"batch-truststore\" : \"resources/security/fhirTruststore.jks\",\n-  \"batch-truststore-password\" : \"xxxxxxxxxxxx\",\n-  \"serverHostname\" : \"localhost:9443\",\n-  \"contextRoot\" : \"/fhir-server/api/v4\"\n-}\n-```", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45c9225519841c2905f62134698740401f1dd613"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30cdf062affb37c0910ef231446d825a3bba8001", "author": {"user": {"login": "albertwang-ibm", "name": "Albert(Xu) Wang"}}, "url": "https://github.com/IBM/FHIR/commit/30cdf062affb37c0910ef231446d825a3bba8001", "committedDate": "2020-04-02T13:22:48Z", "message": "issue #884 minor updates to document\n\nSigned-off-by: Albert Wang <xuwang@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDUyNjE5", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-386452619", "createdAt": "2020-04-02T13:58:00Z", "commit": {"oid": "45c9225519841c2905f62134698740401f1dd613"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzo1ODowMFrOF_sh1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzo1ODowMFrOF_sh1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMzNDE2NQ==", "bodyText": "Should we add the other bulkdata properties here too?  Do any of them have a \"default value\"?", "url": "https://github.com/IBM/FHIR/pull/869#discussion_r402334165", "createdAt": "2020-04-02T13:58:00Z", "author": {"login": "lmsurpre"}, "path": "docs/src/pages/guides/FHIRServerUsersGuide.md", "diffHunk": "@@ -1399,6 +1375,7 @@ This section contains reference information about each of the configuration prop\n |`fhirServer/audit/serviceProperties/geoCity`|Dallas|\n |`fhirServer/audit/serviceProperties/geoState`|TX|\n |`fhirServer/audit/serviceProperties/geoCounty`|US|\n+|`fhirServer/bulkdata/isExportPublic`|true|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45c9225519841c2905f62134698740401f1dd613"}, "originalPosition": 105}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDU0OTc4", "url": "https://github.com/IBM/FHIR/pull/869#pullrequestreview-386454978", "createdAt": "2020-04-02T14:00:20Z", "commit": {"oid": "30cdf062affb37c0910ef231446d825a3bba8001"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f88676f2b9a6cbf78656f6a038e0e005bf3523a3", "author": {"user": {"login": "albertwang-ibm", "name": "Albert(Xu) Wang"}}, "url": "https://github.com/IBM/FHIR/commit/f88676f2b9a6cbf78656f6a038e0e005bf3523a3", "committedDate": "2020-04-02T14:30:51Z", "message": "issue #884 minor updates\n\nSigned-off-by: Albert Wang <xuwang@us.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 562, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}