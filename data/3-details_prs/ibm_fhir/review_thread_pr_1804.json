{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNzYyNjYz", "number": 1804, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNTo1OTo1N1rOFB2lWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjozNDowOVrOFB3qCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDg3MTkyOnYy", "diffSide": "RIGHT", "path": "fhir-audit/src/main/java/com/ibm/fhir/audit/logging/impl/WhcAuditCadfLogService.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNTo1OTo1N1rOIAt0Hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjo0MDowM1rOIAvurQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyMTUzNA==", "bodyText": "I know it's not part of the change, but is this the best way to get the name of the host? Do we ensure that HOSTNAME is part of the environment?  On Windows, COMPUTERNAME might be more appropriate. Let me know if you think we need a ticket for this.", "url": "https://github.com/IBM/FHIR/pull/1804#discussion_r537621534", "createdAt": "2020-12-07T15:59:57Z", "author": {"login": "punktilious"}, "path": "fhir-audit/src/main/java/com/ibm/fhir/audit/logging/impl/WhcAuditCadfLogService.java", "diffHunk": "@@ -82,7 +82,7 @@\n     private static CadfResource observerRsrc =\n             new CadfResource.Builder(\"fhir-server\", ResourceType.compute_node)\n                             .geolocation(new CadfGeolocation.Builder(geoCity, geoState, geoCountry, null).build())\n-                            .name(\"Fhir Audit\")\n+                            .name(\"IBM FHIR Server - Audit\")\n                             .host(System.getenv(\"HOSTNAME\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d00e2c8ec412072a34b0ff59a9370992593832f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyODk4NA==", "bodyText": "Good point, I don't think it's super reliable. I think a ticket isn't bad, probably lower priority.", "url": "https://github.com/IBM/FHIR/pull/1804#discussion_r537628984", "createdAt": "2020-12-07T16:09:10Z", "author": {"login": "prb112"}, "path": "fhir-audit/src/main/java/com/ibm/fhir/audit/logging/impl/WhcAuditCadfLogService.java", "diffHunk": "@@ -82,7 +82,7 @@\n     private static CadfResource observerRsrc =\n             new CadfResource.Builder(\"fhir-server\", ResourceType.compute_node)\n                             .geolocation(new CadfGeolocation.Builder(geoCity, geoState, geoCountry, null).build())\n-                            .name(\"Fhir Audit\")\n+                            .name(\"IBM FHIR Server - Audit\")\n                             .host(System.getenv(\"HOSTNAME\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyMTUzNA=="}, "originalCommit": {"oid": "6d00e2c8ec412072a34b0ff59a9370992593832f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY1MjkwOQ==", "bodyText": "Thanks", "url": "https://github.com/IBM/FHIR/pull/1804#discussion_r537652909", "createdAt": "2020-12-07T16:40:03Z", "author": {"login": "prb112"}, "path": "fhir-audit/src/main/java/com/ibm/fhir/audit/logging/impl/WhcAuditCadfLogService.java", "diffHunk": "@@ -82,7 +82,7 @@\n     private static CadfResource observerRsrc =\n             new CadfResource.Builder(\"fhir-server\", ResourceType.compute_node)\n                             .geolocation(new CadfGeolocation.Builder(geoCity, geoState, geoCountry, null).build())\n-                            .name(\"Fhir Audit\")\n+                            .name(\"IBM FHIR Server - Audit\")\n                             .host(System.getenv(\"HOSTNAME\"))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyMTUzNA=="}, "originalCommit": {"oid": "6d00e2c8ec412072a34b0ff59a9370992593832f"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDg4NDI0OnYy", "diffSide": "RIGHT", "path": "fhir-audit/src/main/java/com/ibm/fhir/audit/logging/impl/WhcAuditCadfLogService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjowMjoxM1rOIAt7Lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjozMTowN1rOIAvUUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyMzM0Mg==", "bodyText": "String != String. Shouldn't this use !equals(...)?", "url": "https://github.com/IBM/FHIR/pull/1804#discussion_r537623342", "createdAt": "2020-12-07T16:02:13Z", "author": {"login": "punktilious"}, "path": "fhir-audit/src/main/java/com/ibm/fhir/audit/logging/impl/WhcAuditCadfLogService.java", "diffHunk": "@@ -197,8 +196,10 @@ public static CadfEvent createCadfEvent(AuditLogEntry logEntry)\n         Outcome cadfEventOutCome;\n \n         // Cadf does't log config, so skip\n-        if ((logEntry.getEventType() != AuditLogEventType.FHIR_CONFIGDATA.value()) && logEntry.getContext() != null\n-                && logEntry.getContext().getAction() != null && logEntry.getContext().getApiParameters() != null) {\n+        if ((logEntry.getEventType() != AuditLogEventType.FHIR_CONFIGDATA.value())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d00e2c8ec412072a34b0ff59a9370992593832f"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY0NjE2MQ==", "bodyText": "Cleaned this up by addressing Lee's well-known request", "url": "https://github.com/IBM/FHIR/pull/1804#discussion_r537646161", "createdAt": "2020-12-07T16:31:07Z", "author": {"login": "prb112"}, "path": "fhir-audit/src/main/java/com/ibm/fhir/audit/logging/impl/WhcAuditCadfLogService.java", "diffHunk": "@@ -197,8 +196,10 @@ public static CadfEvent createCadfEvent(AuditLogEntry logEntry)\n         Outcome cadfEventOutCome;\n \n         // Cadf does't log config, so skip\n-        if ((logEntry.getEventType() != AuditLogEventType.FHIR_CONFIGDATA.value()) && logEntry.getContext() != null\n-                && logEntry.getContext().getAction() != null && logEntry.getContext().getApiParameters() != null) {\n+        if ((logEntry.getEventType() != AuditLogEventType.FHIR_CONFIGDATA.value())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyMzM0Mg=="}, "originalCommit": {"oid": "6d00e2c8ec412072a34b0ff59a9370992593832f"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NTA0Nzc5OnYy", "diffSide": "RIGHT", "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/RestAuditLogger.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjozNDowOVrOIAvdRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjozNDowOVrOIAvdRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY0ODQ1Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Skip over the actual logging, int his case, we're deciding by default\n          \n          \n            \n                    // Skip over the actual logging, in this case, we're deciding by default", "url": "https://github.com/IBM/FHIR/pull/1804#discussion_r537648452", "createdAt": "2020-12-07T16:34:09Z", "author": {"login": "lmsurpre"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/RestAuditLogger.java", "diffHunk": "@@ -311,6 +313,21 @@ public static void logBundle(HttpServletRequest request, Bundle bundle, Date sta\n                 .resourcesUpdated(updateCount).build());\n         entry.setDescription(\"FHIR Bundle request\");\n \n+        // Previously we didn't set the Action which caused the logEntry to\n+        // Skip over the actual logging, int his case, we're deciding by default", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2814bf66b821939d42e92031358cc0f5ffbb413"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4658, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}