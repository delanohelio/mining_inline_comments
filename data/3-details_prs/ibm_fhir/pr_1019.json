{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMTgwMTE2", "number": 1019, "title": "Improve the Exception Case for Db2 Configured Multitenancy #1018", "bodyText": "Signed-off-by: Paul Bastide pbastide@us.ibm.com", "createdAt": "2020-05-04T20:55:28Z", "url": "https://github.com/IBM/FHIR/pull/1019", "merged": true, "mergeCommit": {"oid": "221a1635c4f9a379444005bb31b1b4cf6a688c3a"}, "closed": true, "closedAt": "2020-05-05T14:58:39Z", "author": {"login": "prb112"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceF4DxAH2gAyNDEzMTgwMTE2Ojg1ZDQyNmIwMWNiN2NhYmYyZWZkYjI5MjM1MWVlMjBjNDhmZGJhODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceVDxOAFqTQwNTg1MTU0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "85d426b01cb7cabf2efdb292351ee20c48fdba84", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/85d426b01cb7cabf2efdb292351ee20c48fdba84", "committedDate": "2020-05-04T20:54:34Z", "message": "Improve the Exception Case for Db2 Configured Multitenancy #1018\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "878ca838b2ada1bb953fa17feabf5d6802a2d18a", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/878ca838b2ada1bb953fa17feabf5d6802a2d18a", "committedDate": "2020-05-04T20:58:57Z", "message": "issue #1018\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MzU0MzY5", "url": "https://github.com/IBM/FHIR/pull/1019#pullrequestreview-405354369", "createdAt": "2020-05-04T21:17:41Z", "commit": {"oid": "878ca838b2ada1bb953fa17feabf5d6802a2d18a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMToxNzo0MVrOGQSjIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMToxNzo0MVrOGQSjIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczNDMwNw==", "bodyText": "should this be FHIRConfigHelper.getBooleanProperty(FHIRConfiguration.PROPERTY_DATASOURCES + \"/\" + dsId + \"/multitenant\"?", "url": "https://github.com/IBM/FHIR/pull/1019#discussion_r419734307", "createdAt": "2020-05-04T21:17:41Z", "author": {"login": "lmsurpre"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/filter/rest/FHIRRestServletFilter.java", "diffHunk": "@@ -134,6 +134,15 @@ public void doFilter(HttpServletRequest request, HttpServletResponse response, F\n                 if (tenantKey != null) {\n                     context.setTenantKey(tenantKey);\n                 }\n+\n+                String type = dsPG.getStringProperty(\"type\", null);\n+                if (type != null) {\n+                    // Based on the default for the database type, the code.\n+                    Boolean enabled =\n+                            FHIRConfigHelper.getBooleanProperty(\"multitenant\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "878ca838b2ada1bb953fa17feabf5d6802a2d18a"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MzU5OTk4", "url": "https://github.com/IBM/FHIR/pull/1019#pullrequestreview-405359998", "createdAt": "2020-05-04T21:26:50Z", "commit": {"oid": "878ca838b2ada1bb953fa17feabf5d6802a2d18a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMToyNjo1MFrOGQS1Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMToyNjo1MFrOGQS1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczODkzMQ==", "bodyText": "trying to decide if we want this here...I guess is the idea is its similar to the tenantKey so put it in the same spot?\nthat one made sense to me because it was already here, but I'm not sure if we want to keep adding stuff to the requestcontext.  can we keep it isolated to just the FHIRDbDAOImpl?", "url": "https://github.com/IBM/FHIR/pull/1019#discussion_r419738931", "createdAt": "2020-05-04T21:26:50Z", "author": {"login": "lmsurpre"}, "path": "fhir-config/src/main/java/com/ibm/fhir/config/FHIRRequestContext.java", "diffHunk": "@@ -33,6 +33,8 @@\n     private String tenantId;\n     private String tenantKey;\n     private String dataStoreId;\n+    // By default, setting to False.\n+    private Boolean dataStoreMultiTenant = Boolean.FALSE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "878ca838b2ada1bb953fa17feabf5d6802a2d18a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fe04afec6e8cf5a13ef79164d2826b3733656c8", "author": {"user": {"login": "prb112", "name": "Paul Bastide"}}, "url": "https://github.com/IBM/FHIR/commit/0fe04afec6e8cf5a13ef79164d2826b3733656c8", "committedDate": "2020-05-05T12:48:17Z", "message": "issue #1018\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1ODQyNzQ5", "url": "https://github.com/IBM/FHIR/pull/1019#pullrequestreview-405842749", "createdAt": "2020-05-05T14:26:52Z", "commit": {"oid": "0fe04afec6e8cf5a13ef79164d2826b3733656c8"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1ODUwNjI4", "url": "https://github.com/IBM/FHIR/pull/1019#pullrequestreview-405850628", "createdAt": "2020-05-05T14:34:57Z", "commit": {"oid": "0fe04afec6e8cf5a13ef79164d2826b3733656c8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1ODUxMjAw", "url": "https://github.com/IBM/FHIR/pull/1019#pullrequestreview-405851200", "createdAt": "2020-05-05T14:35:34Z", "commit": {"oid": "0fe04afec6e8cf5a13ef79164d2826b3733656c8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1ODUxNTQ5", "url": "https://github.com/IBM/FHIR/pull/1019#pullrequestreview-405851549", "createdAt": "2020-05-05T14:35:56Z", "commit": {"oid": "0fe04afec6e8cf5a13ef79164d2826b3733656c8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 433, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}