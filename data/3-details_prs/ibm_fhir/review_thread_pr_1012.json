{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyMjI2OTcw", "number": 1012, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNzo0OToxM1rOD4b5pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNzo0OToxM1rOD4b5pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNTAzOTc1OnYy", "diffSide": "RIGHT", "path": "fhir-path/src/main/java/com/ibm/fhir/path/evaluator/FHIRPathEvaluator.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNzo0OToxM1rOGPQumg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxODoxMzoxMVrOGPRZmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NTg5OA==", "bodyText": "So this is consistent with the where function?\nWhat is the result if the argument is non-empty and non-boolean?", "url": "https://github.com/IBM/FHIR/pull/1012#discussion_r418655898", "createdAt": "2020-05-01T17:49:13Z", "author": {"login": "lmsurpre"}, "path": "fhir-path/src/main/java/com/ibm/fhir/path/evaluator/FHIRPathEvaluator.java", "diffHunk": "@@ -367,8 +367,10 @@ private void reset() {\n             if (arguments.size() < 0 || arguments.size() > 1) {\n                 throw unexpectedNumberOfArguments(arguments.size(), \"exists\");\n             }\n-            Collection<FHIRPathNode> nodes = arguments.isEmpty() ? getCurrentContext() : visit(arguments.get(0));\n-            return !nodes.isEmpty() ? SINGLETON_TRUE : SINGLETON_FALSE;\n+            if (arguments.isEmpty()) {\n+                return !getCurrentContext().isEmpty() ? SINGLETON_TRUE : SINGLETON_FALSE;\n+            }\n+            return isTrue(visit(arguments.get(0))) ? SINGLETON_TRUE : SINGLETON_FALSE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffd02795a04420f09385510d859d98730bab3b61"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NjM0Ng==", "bodyText": "it will return false if the argument evaluates to a non-empty or non-boolean", "url": "https://github.com/IBM/FHIR/pull/1012#discussion_r418656346", "createdAt": "2020-05-01T17:50:01Z", "author": {"login": "JohnTimm"}, "path": "fhir-path/src/main/java/com/ibm/fhir/path/evaluator/FHIRPathEvaluator.java", "diffHunk": "@@ -367,8 +367,10 @@ private void reset() {\n             if (arguments.size() < 0 || arguments.size() > 1) {\n                 throw unexpectedNumberOfArguments(arguments.size(), \"exists\");\n             }\n-            Collection<FHIRPathNode> nodes = arguments.isEmpty() ? getCurrentContext() : visit(arguments.get(0));\n-            return !nodes.isEmpty() ? SINGLETON_TRUE : SINGLETON_FALSE;\n+            if (arguments.isEmpty()) {\n+                return !getCurrentContext().isEmpty() ? SINGLETON_TRUE : SINGLETON_FALSE;\n+            }\n+            return isTrue(visit(arguments.get(0))) ? SINGLETON_TRUE : SINGLETON_FALSE;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NTg5OA=="}, "originalCommit": {"oid": "ffd02795a04420f09385510d859d98730bab3b61"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY2NjkwNg==", "bodyText": "i confirmed with john that this matches the where function, so this looks good to me", "url": "https://github.com/IBM/FHIR/pull/1012#discussion_r418666906", "createdAt": "2020-05-01T18:13:11Z", "author": {"login": "lmsurpre"}, "path": "fhir-path/src/main/java/com/ibm/fhir/path/evaluator/FHIRPathEvaluator.java", "diffHunk": "@@ -367,8 +367,10 @@ private void reset() {\n             if (arguments.size() < 0 || arguments.size() > 1) {\n                 throw unexpectedNumberOfArguments(arguments.size(), \"exists\");\n             }\n-            Collection<FHIRPathNode> nodes = arguments.isEmpty() ? getCurrentContext() : visit(arguments.get(0));\n-            return !nodes.isEmpty() ? SINGLETON_TRUE : SINGLETON_FALSE;\n+            if (arguments.isEmpty()) {\n+                return !getCurrentContext().isEmpty() ? SINGLETON_TRUE : SINGLETON_FALSE;\n+            }\n+            return isTrue(visit(arguments.get(0))) ? SINGLETON_TRUE : SINGLETON_FALSE;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY1NTg5OA=="}, "originalCommit": {"oid": "ffd02795a04420f09385510d859d98730bab3b61"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 33, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}