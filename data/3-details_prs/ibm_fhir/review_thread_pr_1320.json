{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1Njg3NTE3", "number": 1320, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QyMTozNjozMlrOEMQGIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QyMTozODowMlrOEMQHtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMjgyMDgwOnYy", "diffSide": "RIGHT", "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QyMTozNjozMlrOGuQfow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QyMTo0MToxNVrOGuQnnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1NzkyMw==", "bodyText": "do we consistently ignore case when working with id values?", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451157923", "createdAt": "2020-07-07T21:36:32Z", "author": {"login": "punktilious"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -338,11 +338,11 @@ private FHIRRestOperationResponse doPatchOrUpdate(String type, String id, FHIRPa\n \n                     // If the id of the input resource is different from the id of the search result,\n                     // then throw exception.\n-                    if (newResource.getId() != null && newResource.getId() != null\n-                            && !newResource.getId().equalsIgnoreCase(id)) {\n+                    if (newResource.getId() != null && id != null && !newResource.getId().equalsIgnoreCase(id)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7ddcd692bf150b5fac51bdadbc88e0916319d7d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1ODM2OA==", "bodyText": "In this particular case, I left it the way it was because I assume it was put there for good reason. We can certainly verify that equalsIgnoreCase is the right behavior there.", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451158368", "createdAt": "2020-07-07T21:37:38Z", "author": {"login": "JohnTimm"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -338,11 +338,11 @@ private FHIRRestOperationResponse doPatchOrUpdate(String type, String id, FHIRPa\n \n                     // If the id of the input resource is different from the id of the search result,\n                     // then throw exception.\n-                    if (newResource.getId() != null && newResource.getId() != null\n-                            && !newResource.getId().equalsIgnoreCase(id)) {\n+                    if (newResource.getId() != null && id != null && !newResource.getId().equalsIgnoreCase(id)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1NzkyMw=="}, "originalCommit": {"oid": "c7ddcd692bf150b5fac51bdadbc88e0916319d7d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1OTg3OQ==", "bodyText": "From here:\nhttp://hl7.org/fhir/http.html#general\nNote: All URLs (and ids that form part of the URL) defined by this specification are case sensitive.", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451159879", "createdAt": "2020-07-07T21:41:02Z", "author": {"login": "JohnTimm"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -338,11 +338,11 @@ private FHIRRestOperationResponse doPatchOrUpdate(String type, String id, FHIRPa\n \n                     // If the id of the input resource is different from the id of the search result,\n                     // then throw exception.\n-                    if (newResource.getId() != null && newResource.getId() != null\n-                            && !newResource.getId().equalsIgnoreCase(id)) {\n+                    if (newResource.getId() != null && id != null && !newResource.getId().equalsIgnoreCase(id)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1NzkyMw=="}, "originalCommit": {"oid": "c7ddcd692bf150b5fac51bdadbc88e0916319d7d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1OTk2Nw==", "bodyText": "I will update the PR.", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451159967", "createdAt": "2020-07-07T21:41:15Z", "author": {"login": "JohnTimm"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -338,11 +338,11 @@ private FHIRRestOperationResponse doPatchOrUpdate(String type, String id, FHIRPa\n \n                     // If the id of the input resource is different from the id of the search result,\n                     // then throw exception.\n-                    if (newResource.getId() != null && newResource.getId() != null\n-                            && !newResource.getId().equalsIgnoreCase(id)) {\n+                    if (newResource.getId() != null && id != null && !newResource.getId().equalsIgnoreCase(id)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1NzkyMw=="}, "originalCommit": {"oid": "c7ddcd692bf150b5fac51bdadbc88e0916319d7d"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMjgyNDg2OnYy", "diffSide": "RIGHT", "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QyMTozODowMlrOGuQiAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QyMTo0NDoxNFrOGuQtIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1ODUzMA==", "bodyText": "Did you intend to leave this commented out? Should probably remove it.", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451158530", "createdAt": "2020-07-07T21:38:02Z", "author": {"login": "punktilious"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -1324,11 +1324,13 @@ private void methodValidation(HTTPVerb method, Resource resource) throws FHIRPer\n                         \"Bundle.Entry.resource is required for BundleEntry with PUT method.\";\n                 throw buildRestException(msg, IssueType.INVALID);\n             }\n+            /*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7ddcd692bf150b5fac51bdadbc88e0916319d7d"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE2MTM3Nw==", "bodyText": "Removed commented out code.", "url": "https://github.com/IBM/FHIR/pull/1320#discussion_r451161377", "createdAt": "2020-07-07T21:44:14Z", "author": {"login": "JohnTimm"}, "path": "fhir-server/src/main/java/com/ibm/fhir/server/util/FHIRRestHelper.java", "diffHunk": "@@ -1324,11 +1324,13 @@ private void methodValidation(HTTPVerb method, Resource resource) throws FHIRPer\n                         \"Bundle.Entry.resource is required for BundleEntry with PUT method.\";\n                 throw buildRestException(msg, IssueType.INVALID);\n             }\n+            /*", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE1ODUzMA=="}, "originalCommit": {"oid": "c7ddcd692bf150b5fac51bdadbc88e0916319d7d"}, "originalPosition": 72}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4752, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}