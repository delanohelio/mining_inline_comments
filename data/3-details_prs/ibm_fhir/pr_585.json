{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMjc2NzY1", "number": 585, "title": "issue #564 and #584 - package fhir-swagger-generator as executable jar", "bodyText": "Previously, this package really only worked from the development\nenvironment. Now, its possible to download and execute the jar file\ndirectly.\nI also updated fhir-openapi with the updated openapi.json (based on the\nnew order of data types coming from ModelSupport).\nI also updated the Usage docs in fhir-swagger-generator/README.\nFinally, this PR addresses #584 by specifying the charset for the swagger/openapi definitions.\nSigned-off-by: Lee Surprenant lmsurpre@us.ibm.com", "createdAt": "2020-01-13T19:13:18Z", "url": "https://github.com/IBM/FHIR/pull/585", "merged": true, "mergeCommit": {"oid": "768f18357994e1a76aa8942299e7f8b67b05856a"}, "closed": true, "closedAt": "2020-01-13T20:45:05Z", "author": {"login": "lmsurpre"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6BSo4AH2gAyMzYyMjc2NzY1Ojc0YWVlZjFhYmFmYTFlMGFlZDUyMjNjMGNlMjRjNjFhZGRjYWJlMjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6Ck4jAFqTM0MjEyNTE2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "74aeef1abafa1e0aed5223c0ce24c61addcabe21", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/74aeef1abafa1e0aed5223c0ce24c61addcabe21", "committedDate": "2020-01-13T19:12:48Z", "message": "issue #564 - package fhir-swagger-generator as executable jar\n\nPreviously, this package really only worked from the development\nenvironment. Now, its possible to download and execute the jar file\ndirectly.\n\nI also updated fhir-openapi with the updated openapi.json (based on the\nnew order of data types coming from ModelSupport).\n\nI also updated the Usage docs in fhir-swagger-generator/README.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc9d46d0cc44d2ec6d2d7f210b3aa85b3fd79a89", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/bc9d46d0cc44d2ec6d2d7f210b3aa85b3fd79a89", "committedDate": "2020-01-13T19:34:42Z", "message": "Remove jakarta.json-api dependency\n\nWhile generating the shaded jar, I noticed warnings for overlapping\nclass names between `jakarta.json` and `jakarta.json-api`.\n\nOriginally, we had `jakarta.json-api` depdencies so that we can use the\napplicaiton server's javax.json instead of shipping our own, but now\nthere is a mix of both.\n\nTo resolve, I removed all traces of `jakarta.json-api` since we weren't\neven using it right (it should have been \"provided\" scope and not\n\"compile\" scope).\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c2e14f10e6259259283f53807be8d4d1e83788e", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/0c2e14f10e6259259283f53807be8d4d1e83788e", "committedDate": "2020-01-13T19:55:53Z", "message": "issue #584 - specify charset for the swagger/openapi JsonWriter\n\nThis should force it to use UTF-8.\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMTAxNTI4", "url": "https://github.com/IBM/FHIR/pull/585#pullrequestreview-342101528", "createdAt": "2020-01-13T19:58:30Z", "commit": {"oid": "0c2e14f10e6259259283f53807be8d4d1e83788e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxOTo1ODozMVrOFdC1pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxOTo1ODozMVrOFdC1pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk5OTUyNw==", "bodyText": "please update copyright year", "url": "https://github.com/IBM/FHIR/pull/585#discussion_r365999527", "createdAt": "2020-01-13T19:58:31Z", "author": {"login": "prb112"}, "path": "fhir-config/src/test/java/com/ibm/fhir/config/test/FHIRConfigHelperTest.java", "diffHunk": "@@ -22,7 +22,6 @@\n import com.ibm.fhir.config.FHIRConfigHelper;\n import com.ibm.fhir.config.FHIRConfiguration;\n import com.ibm.fhir.config.FHIRRequestContext;\n-import com.ibm.fhir.config.PropertyGroup;\n \n public class FHIRConfigHelperTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2e14f10e6259259283f53807be8d4d1e83788e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMTAzNjY2", "url": "https://github.com/IBM/FHIR/pull/585#pullrequestreview-342103666", "createdAt": "2020-01-13T20:02:15Z", "commit": {"oid": "0c2e14f10e6259259283f53807be8d4d1e83788e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMDowMjoxNlrOFdC72Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMDowMjoxNlrOFdC72Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjAwMTExMw==", "bodyText": "Have you tried a build with java9?\nper http://repo1.maven.org/maven2/org/glassfish/json/1.1.6/json-1.1.6.pom\n\n[9,)\n\nYou'll end up with lots of modules.\napi\nimpl\njaxrs\njaxrs-1x\ntests\ngf\ndemos\nbundles\nit's worth double checking instead of embedding the 'extra' jars everytime.", "url": "https://github.com/IBM/FHIR/pull/585#discussion_r366001113", "createdAt": "2020-01-13T20:02:16Z", "author": {"login": "prb112"}, "path": "fhir-config/pom.xml", "diffHunk": "@@ -17,19 +17,14 @@\n             <version>${project.version}</version>\n         </dependency>\n         <dependency>\n-            <groupId>jakarta.json</groupId>\n-            <artifactId>jakarta.json-api</artifactId>\n+            <groupId>org.glassfish</groupId>\n+            <artifactId>jakarta.json</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2e14f10e6259259283f53807be8d4d1e83788e"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMTA0NTE3", "url": "https://github.com/IBM/FHIR/pull/585#pullrequestreview-342104517", "createdAt": "2020-01-13T20:03:50Z", "commit": {"oid": "0c2e14f10e6259259283f53807be8d4d1e83788e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMDowMzo1MFrOFdC-eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMDowMzo1MFrOFdC-eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjAwMTc4Ng==", "bodyText": "Looks good", "url": "https://github.com/IBM/FHIR/pull/585#discussion_r366001786", "createdAt": "2020-01-13T20:03:50Z", "author": {"login": "prb112"}, "path": "fhir-swagger-generator/src/main/java/com/ibm/fhir/swagger/generator/FHIRSwaggerGenerator.java", "diffHunk": "@@ -169,8 +172,8 @@ public static void main(String[] args) throws Exception {\n                 config.put(JsonGenerator.PRETTY_PRINTING, true);\n                 JsonWriterFactory factory = Json.createWriterFactory(config);\n \n-                File outFile = new File(\"./src/main/resources/swagger/\" + resourceClassName + \"-swagger.json\");\n-                try (JsonWriter writer = factory.createWriter(new FileWriter(outFile))) {\n+                File outFile = new File(OUTDIR + File.separator +  resourceClassName + \"-swagger.json\");\n+                try (JsonWriter writer = factory.createWriter(new FileOutputStream(outFile), StandardCharsets.UTF_8)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2e14f10e6259259283f53807be8d4d1e83788e"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMTA0ODE3", "url": "https://github.com/IBM/FHIR/pull/585#pullrequestreview-342104817", "createdAt": "2020-01-13T20:04:24Z", "commit": {"oid": "0c2e14f10e6259259283f53807be8d4d1e83788e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMDowNDoyNFrOFdC_Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QyMDowNDoyNFrOFdC_Vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjAwMjAwNw==", "bodyText": "Looks Good", "url": "https://github.com/IBM/FHIR/pull/585#discussion_r366002007", "createdAt": "2020-01-13T20:04:24Z", "author": {"login": "prb112"}, "path": "fhir-swagger-generator/src/main/java/com/ibm/fhir/openapi/generator/FHIROpenApiGenerator.java", "diffHunk": "@@ -462,8 +466,8 @@ private static void generateBatchTransactionOpenApi(Filter filter) throws Except\n         config.put(JsonGenerator.PRETTY_PRINTING, true);\n         JsonWriterFactory factory = Json.createWriterFactory(config);\n         \n-        File outFile = new File(\"./src/main/resources/swagger/batch-swagger.json\");\n-        try (JsonWriter writer = factory.createWriter(new FileWriter(outFile))) {\n+        File outFile = new File(OUTDIR + File.separator + \"batch-swagger.json\");\n+        try (JsonWriter writer = factory.createWriter(new FileOutputStream(outFile), StandardCharsets.UTF_8)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c2e14f10e6259259283f53807be8d4d1e83788e"}, "originalPosition": 88}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "149f1e30fd607f21cac2a34e679822efaadbffcb", "author": {"user": {"login": "lmsurpre", "name": "Lee Surprenant"}}, "url": "https://github.com/IBM/FHIR/commit/149f1e30fd607f21cac2a34e679822efaadbffcb", "committedDate": "2020-01-13T20:26:55Z", "message": "update copyright statements\n\nSigned-off-by: Lee Surprenant <lmsurpre@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMTE3ODI4", "url": "https://github.com/IBM/FHIR/pull/585#pullrequestreview-342117828", "createdAt": "2020-01-13T20:28:45Z", "commit": {"oid": "149f1e30fd607f21cac2a34e679822efaadbffcb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMTI1MTY4", "url": "https://github.com/IBM/FHIR/pull/585#pullrequestreview-342125168", "createdAt": "2020-01-13T20:42:38Z", "commit": {"oid": "149f1e30fd607f21cac2a34e679822efaadbffcb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 620, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}