{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyMDIyODAz", "number": 1955, "title": "[CALCITE-3941] Add the default strict mode to the path in the Json functions", "bodyText": "As illustrated in CALCITE-3941", "createdAt": "2020-05-01T07:35:28Z", "url": "https://github.com/apache/calcite/pull/1955", "merged": true, "mergeCommit": {"oid": "057186d1c462ce06f72ed296d50e2836fe0d35df"}, "closed": true, "closedAt": "2020-06-28T08:20:30Z", "author": {"login": "XuQianJin-Stars"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfhirogFqTQwODYyMzM1Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvlxWlgBqjM0ODk5MTUxNDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjIzMzU3", "url": "https://github.com/apache/calcite/pull/1955#pullrequestreview-408623357", "createdAt": "2020-05-09T07:42:26Z", "commit": {"oid": "7bf4205f61a6c0877059e203e90b0d40125ae39a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0MjoyNlrOGS5Oag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0MjoyNlrOGS5Oag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTEzMA==", "bodyText": "What does pathWff mean? Should we change it to a more clearer name?", "url": "https://github.com/apache/calcite/pull/1955#discussion_r422465130", "createdAt": "2020-05-09T07:42:26Z", "author": {"login": "chunweilei"}, "path": "core/src/main/java/org/apache/calcite/runtime/JsonFunctions.java", "diffHunk": "@@ -112,18 +113,22 @@ public static JsonPathContext jsonApiCommonSyntax(String input, String pathSpec)\n   }\n \n   public static JsonPathContext jsonApiCommonSyntax(JsonValueContext input, String pathSpec) {\n+    PathMode mode;\n+    String pathWff;\n     try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bf4205f61a6c0877059e203e90b0d40125ae39a"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjIzNzU3", "url": "https://github.com/apache/calcite/pull/1955#pullrequestreview-408623757", "createdAt": "2020-05-09T07:47:10Z", "commit": {"oid": "7bf4205f61a6c0877059e203e90b0d40125ae39a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0NzoxMFrOGS5QAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0NzoxMFrOGS5QAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTUzOA==", "bodyText": "What if there is an illegal mode? For instance, json_exists('{\\\"foo\\\":\\\"bar\\\"}', \"strictxx $.foo' false on error). Will it throw exception?", "url": "https://github.com/apache/calcite/pull/1955#discussion_r422465538", "createdAt": "2020-05-09T07:47:10Z", "author": {"login": "chunweilei"}, "path": "core/src/main/java/org/apache/calcite/runtime/JsonFunctions.java", "diffHunk": "@@ -112,18 +113,22 @@ public static JsonPathContext jsonApiCommonSyntax(String input, String pathSpec)\n   }\n \n   public static JsonPathContext jsonApiCommonSyntax(JsonValueContext input, String pathSpec) {\n+    PathMode mode;\n+    String pathWff;\n     try {\n       Matcher matcher = JSON_PATH_BASE.matcher(pathSpec);\n       if (!matcher.matches()) {\n-        throw RESOURCE.illegalJsonPathSpec(pathSpec).ex();\n+        mode = PathMode.STRICT;\n+        pathWff = pathSpec;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bf4205f61a6c0877059e203e90b0d40125ae39a"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMTIyNDE2", "url": "https://github.com/apache/calcite/pull/1955#pullrequestreview-431122416", "createdAt": "2020-06-16T02:46:05Z", "commit": {"oid": "55e350bfe8a072dc53bf9817a7fe0816e23ac5f8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "55e350bfe8a072dc53bf9817a7fe0816e23ac5f8", "author": {"user": {"login": "XuQianJin-Stars", "name": "ForwardXu"}}, "url": "https://github.com/apache/calcite/commit/55e350bfe8a072dc53bf9817a7fe0816e23ac5f8", "committedDate": "2020-06-14T07:27:12Z", "message": "[CALCITE-3941] Add the default strict mode to the path in the Json functions"}, "afterCommit": {"oid": "90db090863869683f20c00e9b861ac59280ca1ec", "author": {"user": {"login": "XuQianJin-Stars", "name": "ForwardXu"}}, "url": "https://github.com/apache/calcite/commit/90db090863869683f20c00e9b861ac59280ca1ec", "committedDate": "2020-06-19T03:52:10Z", "message": "[CALCITE-3941] Add the default strict mode to the path in the Json functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ffc92873c25e9ba6e82e58311963ed45f87e434", "author": {"user": {"login": "XuQianJin-Stars", "name": "ForwardXu"}}, "url": "https://github.com/apache/calcite/commit/1ffc92873c25e9ba6e82e58311963ed45f87e434", "committedDate": "2020-06-28T05:38:27Z", "message": "[CALCITE-3941] Add the default strict mode to the path in the Json functions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "90db090863869683f20c00e9b861ac59280ca1ec", "author": {"user": {"login": "XuQianJin-Stars", "name": "ForwardXu"}}, "url": "https://github.com/apache/calcite/commit/90db090863869683f20c00e9b861ac59280ca1ec", "committedDate": "2020-06-19T03:52:10Z", "message": "[CALCITE-3941] Add the default strict mode to the path in the Json functions"}, "afterCommit": {"oid": "1ffc92873c25e9ba6e82e58311963ed45f87e434", "author": {"user": {"login": "XuQianJin-Stars", "name": "ForwardXu"}}, "url": "https://github.com/apache/calcite/commit/1ffc92873c25e9ba6e82e58311963ed45f87e434", "committedDate": "2020-06-28T05:38:27Z", "message": "[CALCITE-3941] Add the default strict mode to the path in the Json functions"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4170, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}