{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0Njk4MTI0", "number": 1801, "title": "[CALCITE-3791] HepPlanner does not clear metadata cache for the ancestors of discarded node when a transformation happens", "bodyText": "JIRA: https://issues.apache.org/jira/browse/CALCITE-3791.", "createdAt": "2020-02-13T06:45:01Z", "url": "https://github.com/apache/calcite/pull/1801", "merged": true, "mergeCommit": {"oid": "668792554cf7097d668bf794ef2ba5b1fd4956ee"}, "closed": true, "closedAt": "2020-02-16T12:11:42Z", "author": {"login": "chunweilei"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcD6QDagFqTM1ODE4MzYyOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEVu50gFqTM1OTIwNjc5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MTgzNjI5", "url": "https://github.com/apache/calcite/pull/1801#pullrequestreview-358183629", "createdAt": "2020-02-13T12:39:53Z", "commit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjozOTo1M1rOFpSQIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjozOTo1M1rOFpSQIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzNDk3OQ==", "bodyText": "parents -> ancestors?", "url": "https://github.com/apache/calcite/pull/1801#discussion_r378834979", "createdAt": "2020-02-13T12:39:53Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/plan/hep/HepPlanner.java", "diffHunk": "@@ -888,6 +890,28 @@ private void contractVertices(\n     }\n   }\n \n+  /**\n+   * Clears metadata cache for the RelNode and its parents.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MTg4MTM0", "url": "https://github.com/apache/calcite/pull/1801#pullrequestreview-358188134", "createdAt": "2020-02-13T12:47:29Z", "commit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjo0NzozMFrOFpSeAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjo0NzozMFrOFpSeAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzODUzMA==", "bodyText": "I am not sure what is the standard procedure of changing a public API.", "url": "https://github.com/apache/calcite/pull/1801#discussion_r378838530", "createdAt": "2020-02-13T12:47:30Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/rel/metadata/RelMdUtil.java", "diffHunk": "@@ -943,9 +943,9 @@ private static boolean isNonNegative(Double result, boolean fail) {\n    * Removes cached metadata values for specified RelNode.\n    *\n    * @param rel RelNode whose cached metadata should be removed\n+   * @return true if cache for the provided RelNode was not empty\n    */\n-  public static void clearCache(RelNode rel) {\n-    rel.getCluster().getMetadataQuery().clearCache(rel);\n+  public static boolean clearCache(RelNode rel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1e15d33783a38a8d896fe8203c68f61d5dbeca4", "author": {"user": {"login": "chunweilei", "name": "chunwei"}}, "url": "https://github.com/apache/calcite/commit/b1e15d33783a38a8d896fe8203c68f61d5dbeca4", "committedDate": "2020-02-14T08:11:53Z", "message": "[CALCITE-3791] HepPlanner does not clear metadata cache for the ancestors of discarded node when a transformation happens"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7", "author": {"user": {"login": "chunweilei", "name": "chunwei"}}, "url": "https://github.com/apache/calcite/commit/99cad83687c39e088c953ef8a44c6ea4d4e78ea7", "committedDate": "2020-02-13T06:39:39Z", "message": "[CALCITE-3791] HepPlanner does not clear metadata cache for the ancestors of discarded node when a transformation happens"}, "afterCommit": {"oid": "b1e15d33783a38a8d896fe8203c68f61d5dbeca4", "author": {"user": {"login": "chunweilei", "name": "chunwei"}}, "url": "https://github.com/apache/calcite/commit/b1e15d33783a38a8d896fe8203c68f61d5dbeca4", "committedDate": "2020-02-14T08:11:53Z", "message": "[CALCITE-3791] HepPlanner does not clear metadata cache for the ancestors of discarded node when a transformation happens"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MjA2Nzk5", "url": "https://github.com/apache/calcite/pull/1801#pullrequestreview-359206799", "createdAt": "2020-02-14T20:41:01Z", "commit": {"oid": "b1e15d33783a38a8d896fe8203c68f61d5dbeca4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4251, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}