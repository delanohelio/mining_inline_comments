{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNzg3ODUz", "number": 2046, "title": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)", "bodyText": "", "createdAt": "2020-06-26T21:09:15Z", "url": "https://github.com/apache/calcite/pull/2046", "merged": true, "mergeCommit": {"oid": "eb55b5f93a27a5b68280e25abf37cb8cda112ad7"}, "closed": true, "closedAt": "2020-07-13T18:08:15Z", "author": {"login": "James-Jeyun-Kim"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvKmcjABqjM0ODgyNjg2NzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczptvGgFqTQ0NjY4NDMzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ff5da5ffb23516942d99c1efdb78e82c2124122", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/4ff5da5ffb23516942d99c1efdb78e82c2124122", "committedDate": "2020-06-26T21:03:10Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}, "afterCommit": {"oid": "9005eb01e6c07e6edee3fec5c6ef4743de89e640", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/9005eb01e6c07e6edee3fec5c6ef4743de89e640", "committedDate": "2020-06-26T21:57:36Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9005eb01e6c07e6edee3fec5c6ef4743de89e640", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/9005eb01e6c07e6edee3fec5c6ef4743de89e640", "committedDate": "2020-06-26T21:57:36Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}, "afterCommit": {"oid": "1104ac72a5f9c165a6a7673646d02e4475860fa3", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/1104ac72a5f9c165a6a7673646d02e4475860fa3", "committedDate": "2020-06-26T22:59:15Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1104ac72a5f9c165a6a7673646d02e4475860fa3", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/1104ac72a5f9c165a6a7673646d02e4475860fa3", "committedDate": "2020-06-26T22:59:15Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}, "afterCommit": {"oid": "198bb8009a7fd77f3c675f1e21fe9a5cd61a08a6", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/198bb8009a7fd77f3c675f1e21fe9a5cd61a08a6", "committedDate": "2020-07-01T20:45:40Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxOTk5NjYz", "url": "https://github.com/apache/calcite/pull/2046#pullrequestreview-441999663", "createdAt": "2020-07-02T20:29:30Z", "commit": {"oid": "198bb8009a7fd77f3c675f1e21fe9a5cd61a08a6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMDoyOTozMFrOGscG0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQyMDoyOTozMFrOGscG0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI1MTAyNA==", "bodyText": "This test probably belongs more to SqlValidatorTest which has support to test for error (and validate error messages).`", "url": "https://github.com/apache/calcite/pull/2046#discussion_r449251024", "createdAt": "2020-07-02T20:29:30Z", "author": {"login": "laurentgo"}, "path": "core/src/test/java/org/apache/calcite/test/SqlToRelConverterTest.java", "diffHunk": "@@ -875,6 +877,20 @@ public final Sql sql(String sql) {\n     sql(sql).ok();\n   }\n \n+  /** Test case for\n+   * <a href=\"https://issues.apache.org/jira/browse/CALCITE-4092\">[CALCITE-4092]\n+   * NPE using WITH clause without a corresponding SELECT FROM</a>. */\n+  @Test void testWithNotSelected() {\n+    final String sql = \"with emp2 as (select max(empno) as empno from emp where empno > 10)\\n\"\n+        + \"select * from emp where empno < emp2.empno\";\n+    try {\n+      sql(sql).ok();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "198bb8009a7fd77f3c675f1e21fe9a5cd61a08a6"}, "originalPosition": 25}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "198bb8009a7fd77f3c675f1e21fe9a5cd61a08a6", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/198bb8009a7fd77f3c675f1e21fe9a5cd61a08a6", "committedDate": "2020-07-01T20:45:40Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}, "afterCommit": {"oid": "5f3a50f96bdd3a5d28162673b3361ffda8acbff3", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/5f3a50f96bdd3a5d28162673b3361ffda8acbff3", "committedDate": "2020-07-02T21:07:58Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e03961c2516369afb1a855a62313ee4d4efeaf65", "author": {"user": {"login": "James-Jeyun-Kim", "name": null}}, "url": "https://github.com/apache/calcite/commit/e03961c2516369afb1a855a62313ee4d4efeaf65", "committedDate": "2020-07-02T21:09:11Z", "message": "Update SqlToRelConverterTest.java"}, "afterCommit": {"oid": "e092e7f7eb4b3705fdee81d1311e25d50b73652c", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/e092e7f7eb4b3705fdee81d1311e25d50b73652c", "committedDate": "2020-07-02T21:17:04Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13be558dc7873206dea54c214c461f8d879eccb2", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/13be558dc7873206dea54c214c461f8d879eccb2", "committedDate": "2020-07-02T21:41:22Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e092e7f7eb4b3705fdee81d1311e25d50b73652c", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/e092e7f7eb4b3705fdee81d1311e25d50b73652c", "committedDate": "2020-07-02T21:17:04Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}, "afterCommit": {"oid": "13be558dc7873206dea54c214c461f8d879eccb2", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/13be558dc7873206dea54c214c461f8d879eccb2", "committedDate": "2020-07-02T21:41:22Z", "message": "[CALCITE-4092] NPE using WITH clause without a corresponding SELECT FROM (James Kim)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2Njg0MzMy", "url": "https://github.com/apache/calcite/pull/2046#pullrequestreview-446684332", "createdAt": "2020-07-10T20:32:17Z", "commit": {"oid": "13be558dc7873206dea54c214c461f8d879eccb2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3789, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}