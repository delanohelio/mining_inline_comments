{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NjM4Mjc4", "number": 2088, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMTo0MDowN1rOESxavg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMTo0MDowN1rOESxavg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTE5NDg2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/calcite/rex/RexFieldAccess.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMTo0MDowN1rOG4IqKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMTo0MDowN1rOG4IqKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUxNTMwNQ==", "bodyText": "I made this change because there are some problem with the new added test case in test env with concurrency, the == check not works anymore.", "url": "https://github.com/apache/calcite/pull/2088#discussion_r461515305", "createdAt": "2020-07-28T11:40:07Z", "author": {"login": "danny0405"}, "path": "core/src/main/java/org/apache/calcite/rex/RexFieldAccess.java", "diffHunk": "@@ -57,14 +59,23 @@\n   RexFieldAccess(\n       RexNode expr,\n       RelDataTypeField field) {\n+    checkValid(expr, field);\n     this.expr = expr;\n     this.field = field;\n     this.digest = expr + \".\" + field.getName();\n-    assert expr.getType().getFieldList().get(field.getIndex()) == field;\n   }\n \n   //~ Methods ----------------------------------------------------------------\n \n+  private static void checkValid(RexNode expr, RelDataTypeField field) {\n+    RelDataType exprType = expr.getType();\n+    int fieldsNum = exprType.getFieldList().size();\n+    int fieldIdx = field.getIndex();\n+    final String errMsg = \"Field \" + field + \" does not exist for expression \" + expr;\n+    Preconditions.checkArgument(fieldIdx < fieldsNum, errMsg);\n+    Preconditions.checkArgument(exprType.getFieldList().get(fieldIdx).equals(field), errMsg);\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5d8f3e3a8a89c199ed93833f49b9819f03a7c9e"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 99, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}