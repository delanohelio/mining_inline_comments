{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMzY0ODU3", "number": 1912, "title": "[CALCITE-3889] Add apply(Mappings.Mapping) to RelTrait and RelTraitSet", "bodyText": "RelTrait Collation, Distribution have key indices, when we pass down the\ntraitset to child or propagate to parent operator, we have to remap these keys.\nIt would be nice to have apply(Mappings.Mapping) on RelTrait and RelTraitSet.\nRelDistribution already has the method, but we may want it on every RelTrait\nexcept Convention. (CALCITE-3889)", "createdAt": "2020-04-12T16:34:49Z", "url": "https://github.com/apache/calcite/pull/1912", "merged": true, "mergeCommit": {"oid": "4787cba48eb00190f4477b92386db06cd2c7fb63"}, "closed": true, "closedAt": "2020-05-02T04:04:07Z", "author": {"login": "hsyuan"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcW9Ab1ABqjMyMjUyNDk4MDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcdOL0cABqjMyOTQ5NjkzMzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b71c826aae9aa1aa325d626a00c0792bad3b0fb", "author": {"user": {"login": "hsyuan", "name": "Haisheng Yuan"}}, "url": "https://github.com/apache/calcite/commit/3b71c826aae9aa1aa325d626a00c0792bad3b0fb", "committedDate": "2020-04-12T16:32:18Z", "message": "[CALCITE-3889] Add apply(Mappings.Mapping) to RelTrait and RelTraitSet\n\nRelTrait Collation, Distribution have key indices, when we pass down the\ntraitset to child or propagate to parent operator, we have to remap these keys.\nIt would be nice to have apply(Mappings.Mapping) on RelTrait and RelTraitSet.\nRelDistribution already has the method, but we may want it on every RelTrait\nexcept Convention."}, "afterCommit": {"oid": "781de1d645d119bd9c5c46ce485c0411647a3e1d", "author": {"user": {"login": "hsyuan", "name": "Haisheng Yuan"}}, "url": "https://github.com/apache/calcite/commit/781de1d645d119bd9c5c46ce485c0411647a3e1d", "committedDate": "2020-04-12T16:36:59Z", "message": "[CALCITE-3889] Add apply(Mappings.Mapping) to RelTrait and RelTraitSet\n\nRelTrait Collation, Distribution have key indices, when we pass down the\ntraitset to child or propagate to parent operator, we have to remap these keys.\nIt would be nice to have apply(Mappings.Mapping) on RelTrait and RelTraitSet.\nRelDistribution already has the method, but we may want it on every RelTrait\nexcept Convention."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "781de1d645d119bd9c5c46ce485c0411647a3e1d", "author": {"user": {"login": "hsyuan", "name": "Haisheng Yuan"}}, "url": "https://github.com/apache/calcite/commit/781de1d645d119bd9c5c46ce485c0411647a3e1d", "committedDate": "2020-04-12T16:36:59Z", "message": "[CALCITE-3889] Add apply(Mappings.Mapping) to RelTrait and RelTraitSet\n\nRelTrait Collation, Distribution have key indices, when we pass down the\ntraitset to child or propagate to parent operator, we have to remap these keys.\nIt would be nice to have apply(Mappings.Mapping) on RelTrait and RelTraitSet.\nRelDistribution already has the method, but we may want it on every RelTrait\nexcept Convention."}, "afterCommit": {"oid": "8216e3b11a88a112f5426c3129d73f9b636b1b7e", "author": {"user": {"login": "hsyuan", "name": "Haisheng Yuan"}}, "url": "https://github.com/apache/calcite/commit/8216e3b11a88a112f5426c3129d73f9b636b1b7e", "committedDate": "2020-04-12T16:37:49Z", "message": "[CALCITE-3889] Add apply(Mappings.Mapping) to RelTrait and RelTraitSet\n\nRelTrait Collation, Distribution have key indices, when we pass down the\ntraitset to child or propagate to parent operator, we have to remap these keys.\nIt would be nice to have apply(Mappings.Mapping) on RelTrait and RelTraitSet.\nRelDistribution already has the method, but we may want it on every RelTrait\nexcept Convention."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxOTMxODcw", "url": "https://github.com/apache/calcite/pull/1912#pullrequestreview-391931870", "createdAt": "2020-04-13T03:01:31Z", "commit": {"oid": "8216e3b11a88a112f5426c3129d73f9b636b1b7e"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxOTUxMDk1", "url": "https://github.com/apache/calcite/pull/1912#pullrequestreview-391951095", "createdAt": "2020-04-13T04:24:27Z", "commit": {"oid": "8216e3b11a88a112f5426c3129d73f9b636b1b7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QwNDoyNDoyN1rOGEcXzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QwNDoyNDoyN1rOGEcXzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzMxMjMzNQ==", "bodyText": "In which cases does the returned trait have a different type from this?", "url": "https://github.com/apache/calcite/pull/1912#discussion_r407312335", "createdAt": "2020-04-13T04:24:27Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/plan/RelTrait.java", "diffHunk": "@@ -85,4 +87,14 @@\n    * @param planner Planner\n    */\n   void register(RelOptPlanner planner);\n+\n+  /**\n+   * Applies a mapping to this trait.\n+   *\n+   * @param mapping   Mapping\n+   * @return trait with mapping applied\n+   */\n+  default <T extends RelTrait> T apply(Mappings.TargetMapping mapping) {\n+    return (T) this;\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8216e3b11a88a112f5426c3129d73f9b636b1b7e"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDI4NjY1", "url": "https://github.com/apache/calcite/pull/1912#pullrequestreview-396028665", "createdAt": "2020-04-19T15:05:37Z", "commit": {"oid": "8216e3b11a88a112f5426c3129d73f9b636b1b7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNTowNTozN1rOGH42lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNTowNTozN1rOGH42lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkyNDY5NA==", "bodyText": "We apply here only Mappings.TargetMapping. Can we apply other types of mappings?", "url": "https://github.com/apache/calcite/pull/1912#discussion_r410924694", "createdAt": "2020-04-19T15:05:37Z", "author": {"login": "rkondakov"}, "path": "core/src/main/java/org/apache/calcite/plan/RelTrait.java", "diffHunk": "@@ -85,4 +87,14 @@\n    * @param planner Planner\n    */\n   void register(RelOptPlanner planner);\n+\n+  /**\n+   * Applies a mapping to this trait.\n+   *\n+   * @param mapping   Mapping\n+   * @return trait with mapping applied\n+   */\n+  default <T extends RelTrait> T apply(Mappings.TargetMapping mapping) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8216e3b11a88a112f5426c3129d73f9b636b1b7e"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4787cba48eb00190f4477b92386db06cd2c7fb63", "author": {"user": {"login": "hsyuan", "name": "Haisheng Yuan"}}, "url": "https://github.com/apache/calcite/commit/4787cba48eb00190f4477b92386db06cd2c7fb63", "committedDate": "2020-05-02T03:58:14Z", "message": "[CALCITE-3889] Add apply(Mappings.Mapping) to RelTrait and RelTraitSet\n\nRelTrait Collation, Distribution have key indices, when we pass down the\ntraitset to child or propagate to parent operator, we have to remap these keys.\nIt would be nice to have apply(Mappings.Mapping) on RelTrait and RelTraitSet.\nRelDistribution already has the method, but we may want it on every RelTrait\nexcept Convention.\n\nClose #1912"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8216e3b11a88a112f5426c3129d73f9b636b1b7e", "author": {"user": {"login": "hsyuan", "name": "Haisheng Yuan"}}, "url": "https://github.com/apache/calcite/commit/8216e3b11a88a112f5426c3129d73f9b636b1b7e", "committedDate": "2020-04-12T16:37:49Z", "message": "[CALCITE-3889] Add apply(Mappings.Mapping) to RelTrait and RelTraitSet\n\nRelTrait Collation, Distribution have key indices, when we pass down the\ntraitset to child or propagate to parent operator, we have to remap these keys.\nIt would be nice to have apply(Mappings.Mapping) on RelTrait and RelTraitSet.\nRelDistribution already has the method, but we may want it on every RelTrait\nexcept Convention."}, "afterCommit": {"oid": "4787cba48eb00190f4477b92386db06cd2c7fb63", "author": {"user": {"login": "hsyuan", "name": "Haisheng Yuan"}}, "url": "https://github.com/apache/calcite/commit/4787cba48eb00190f4477b92386db06cd2c7fb63", "committedDate": "2020-05-02T03:58:14Z", "message": "[CALCITE-3889] Add apply(Mappings.Mapping) to RelTrait and RelTraitSet\n\nRelTrait Collation, Distribution have key indices, when we pass down the\ntraitset to child or propagate to parent operator, we have to remap these keys.\nIt would be nice to have apply(Mappings.Mapping) on RelTrait and RelTraitSet.\nRelDistribution already has the method, but we may want it on every RelTrait\nexcept Convention.\n\nClose #1912"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4083, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}