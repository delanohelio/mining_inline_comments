{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0Njk4MTI0", "number": 1801, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjozOTo1M1rODfh6aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjo0NzozMFrODfiDhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0Mzg4MDczOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/calcite/plan/hep/HepPlanner.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjozOTo1M1rOFpSQIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwMjowNjozM1rOFppq6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzNDk3OQ==", "bodyText": "parents -> ancestors?", "url": "https://github.com/apache/calcite/pull/1801#discussion_r378834979", "createdAt": "2020-02-13T12:39:53Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/plan/hep/HepPlanner.java", "diffHunk": "@@ -888,6 +890,28 @@ private void contractVertices(\n     }\n   }\n \n+  /**\n+   * Clears metadata cache for the RelNode and its parents.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTIxODY2NQ==", "bodyText": "Will do.", "url": "https://github.com/apache/calcite/pull/1801#discussion_r379218665", "createdAt": "2020-02-14T02:06:33Z", "author": {"login": "chunweilei"}, "path": "core/src/main/java/org/apache/calcite/plan/hep/HepPlanner.java", "diffHunk": "@@ -888,6 +890,28 @@ private void contractVertices(\n     }\n   }\n \n+  /**\n+   * Clears metadata cache for the RelNode and its parents.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzNDk3OQ=="}, "originalCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MzkwNDA3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/calcite/rel/metadata/RelMdUtil.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxMjo0NzozMFrOFpSeAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNTowNjozOFrOFp5mZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzODUzMA==", "bodyText": "I am not sure what is the standard procedure of changing a public API.", "url": "https://github.com/apache/calcite/pull/1801#discussion_r378838530", "createdAt": "2020-02-13T12:47:30Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/rel/metadata/RelMdUtil.java", "diffHunk": "@@ -943,9 +943,9 @@ private static boolean isNonNegative(Double result, boolean fail) {\n    * Removes cached metadata values for specified RelNode.\n    *\n    * @param rel RelNode whose cached metadata should be removed\n+   * @return true if cache for the provided RelNode was not empty\n    */\n-  public static void clearCache(RelNode rel) {\n-    rel.getCluster().getMetadataQuery().clearCache(rel);\n+  public static boolean clearCache(RelNode rel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE4MTY0OA==", "bodyText": "I think void to boolean is fine.", "url": "https://github.com/apache/calcite/pull/1801#discussion_r379181648", "createdAt": "2020-02-13T23:44:02Z", "author": {"login": "hsyuan"}, "path": "core/src/main/java/org/apache/calcite/rel/metadata/RelMdUtil.java", "diffHunk": "@@ -943,9 +943,9 @@ private static boolean isNonNegative(Double result, boolean fail) {\n    * Removes cached metadata values for specified RelNode.\n    *\n    * @param rel RelNode whose cached metadata should be removed\n+   * @return true if cache for the provided RelNode was not empty\n    */\n-  public static void clearCache(RelNode rel) {\n-    rel.getCluster().getMetadataQuery().clearCache(rel);\n+  public static boolean clearCache(RelNode rel) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzODUzMA=="}, "originalCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTIxODgwMQ==", "bodyText": "Agree with @hsyuan . It will not break anything.", "url": "https://github.com/apache/calcite/pull/1801#discussion_r379218801", "createdAt": "2020-02-14T02:07:11Z", "author": {"login": "chunweilei"}, "path": "core/src/main/java/org/apache/calcite/rel/metadata/RelMdUtil.java", "diffHunk": "@@ -943,9 +943,9 @@ private static boolean isNonNegative(Double result, boolean fail) {\n    * Removes cached metadata values for specified RelNode.\n    *\n    * @param rel RelNode whose cached metadata should be removed\n+   * @return true if cache for the provided RelNode was not empty\n    */\n-  public static void clearCache(RelNode rel) {\n-    rel.getCluster().getMetadataQuery().clearCache(rel);\n+  public static boolean clearCache(RelNode rel) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzODUzMA=="}, "originalCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTIyMTU1Ng==", "bodyText": "Thanks a lot for your clarification.", "url": "https://github.com/apache/calcite/pull/1801#discussion_r379221556", "createdAt": "2020-02-14T02:20:07Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/rel/metadata/RelMdUtil.java", "diffHunk": "@@ -943,9 +943,9 @@ private static boolean isNonNegative(Double result, boolean fail) {\n    * Removes cached metadata values for specified RelNode.\n    *\n    * @param rel RelNode whose cached metadata should be removed\n+   * @return true if cache for the provided RelNode was not empty\n    */\n-  public static void clearCache(RelNode rel) {\n-    rel.getCluster().getMetadataQuery().clearCache(rel);\n+  public static boolean clearCache(RelNode rel) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzODUzMA=="}, "originalCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ3MTQzNw==", "bodyText": "I'm wondering how to give a valid test, e.g. even though we clear the cache that should not do, the tests still passes.", "url": "https://github.com/apache/calcite/pull/1801#discussion_r379471437", "createdAt": "2020-02-14T14:52:03Z", "author": {"login": "danny0405"}, "path": "core/src/main/java/org/apache/calcite/rel/metadata/RelMdUtil.java", "diffHunk": "@@ -943,9 +943,9 @@ private static boolean isNonNegative(Double result, boolean fail) {\n    * Removes cached metadata values for specified RelNode.\n    *\n    * @param rel RelNode whose cached metadata should be removed\n+   * @return true if cache for the provided RelNode was not empty\n    */\n-  public static void clearCache(RelNode rel) {\n-    rel.getCluster().getMetadataQuery().clearCache(rel);\n+  public static boolean clearCache(RelNode rel) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzODUzMA=="}, "originalCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ3OTY1Mg==", "bodyText": "I tried to add a test case. But it is really difficult. We can see the problem is just there.", "url": "https://github.com/apache/calcite/pull/1801#discussion_r379479652", "createdAt": "2020-02-14T15:06:38Z", "author": {"login": "chunweilei"}, "path": "core/src/main/java/org/apache/calcite/rel/metadata/RelMdUtil.java", "diffHunk": "@@ -943,9 +943,9 @@ private static boolean isNonNegative(Double result, boolean fail) {\n    * Removes cached metadata values for specified RelNode.\n    *\n    * @param rel RelNode whose cached metadata should be removed\n+   * @return true if cache for the provided RelNode was not empty\n    */\n-  public static void clearCache(RelNode rel) {\n-    rel.getCluster().getMetadataQuery().clearCache(rel);\n+  public static boolean clearCache(RelNode rel) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgzODUzMA=="}, "originalCommit": {"oid": "99cad83687c39e088c953ef8a44c6ea4d4e78ea7"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 297, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}