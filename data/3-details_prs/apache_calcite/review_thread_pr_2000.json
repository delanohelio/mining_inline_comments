{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3MTMxMzYw", "number": 2000, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMzowNzoxNlrOECY7iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwNjoxMzozNVrOEDJfbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTQxMDY3OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/org/apache/calcite/test/MaterializedViewSubstitutionVisitorTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMzowNzoxNlrOGe0QsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMzowNzoxNlrOGe0QsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk2NjcwNQ==", "bodyText": "How about some doc here to explain why matching should fail.", "url": "https://github.com/apache/calcite/pull/2000#discussion_r434966705", "createdAt": "2020-06-04T03:07:16Z", "author": {"login": "jinxing64"}, "path": "core/src/test/java/org/apache/calcite/test/MaterializedViewSubstitutionVisitorTest.java", "diffHunk": "@@ -410,6 +410,18 @@\n     sql(mv, query).noMat();\n   }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02e8ad91d14d32c088b56d51f094ce0adee0e0d4"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwOTQxMjU3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/calcite/plan/SubstitutionVisitor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMzowODozMlrOGe0R2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMzoxMDozMVrOGe0T0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk2NzAwMQ==", "bodyText": "How about some doc to explain why matching should fail when the function doesn't support roll-up.", "url": "https://github.com/apache/calcite/pull/2000#discussion_r434967001", "createdAt": "2020-06-04T03:08:32Z", "author": {"login": "jinxing64"}, "path": "core/src/main/java/org/apache/calcite/plan/SubstitutionVisitor.java", "diffHunk": "@@ -1899,8 +1899,12 @@ public static MutableRel unifyAggregates(MutableAggregate query,\n         if (i < 0) {\n           return null;\n         }\n+        SqlAggFunction aggFunction = getRollup(aggregateCall.getAggregation());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02e8ad91d14d32c088b56d51f094ce0adee0e0d4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk2NzUwNA==", "bodyText": "Mark it as final", "url": "https://github.com/apache/calcite/pull/2000#discussion_r434967504", "createdAt": "2020-06-04T03:10:31Z", "author": {"login": "jinxing64"}, "path": "core/src/main/java/org/apache/calcite/plan/SubstitutionVisitor.java", "diffHunk": "@@ -1899,8 +1899,12 @@ public static MutableRel unifyAggregates(MutableAggregate query,\n         if (i < 0) {\n           return null;\n         }\n+        SqlAggFunction aggFunction = getRollup(aggregateCall.getAggregation());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk2NzAwMQ=="}, "originalCommit": {"oid": "02e8ad91d14d32c088b56d51f094ce0adee0e0d4"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxMDM2OTkzOnYy", "diffSide": "RIGHT", "path": "core/src/test/java/org/apache/calcite/test/MaterializedViewSubstitutionVisitorTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwOTozMjozMlrOGe9oRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwOTozMjozMlrOGe9oRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEyMDE5OA==", "bodyText": "In current MaterializedViewSubstitutionVisitorTest.java, there's already an testAggregateRollUp. How about rename this as testSqlAggFunctionRollup2 and put it after testAggregateRollUp ?", "url": "https://github.com/apache/calcite/pull/2000#discussion_r435120198", "createdAt": "2020-06-04T09:32:32Z", "author": {"login": "jinxing64"}, "path": "core/src/test/java/org/apache/calcite/test/MaterializedViewSubstitutionVisitorTest.java", "diffHunk": "@@ -410,6 +410,21 @@\n     sql(mv, query).noMat();\n   }\n \n+  /**\n+   * stddev_pop aggregate function does not support roll up.\n+   */\n+  @Test public void testSqlAggFunctionRollup() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "489e3b608d89626c4759e938b62b176847d962dd"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNzM2Njg3OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/org/apache/calcite/test/MaterializedViewSubstitutionVisitorTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwNjoxMzozNVrOGgCJnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwNjoxMzozNVrOGgCJnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0Mjg0NQ==", "bodyText": "public is not needed. Please remove.", "url": "https://github.com/apache/calcite/pull/2000#discussion_r436242845", "createdAt": "2020-06-06T06:13:35Z", "author": {"login": "jinxing64"}, "path": "core/src/test/java/org/apache/calcite/test/MaterializedViewSubstitutionVisitorTest.java", "diffHunk": "@@ -509,6 +509,21 @@\n         .ok();\n   }\n \n+  /**\n+   * stddev_pop aggregate function does not support roll up.\n+   */\n+  @Test public void testAggregateRollUp2() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38ba704427fadf365f75769a42045a7114d2e9e0"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 162, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}