{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MTAwNTA0", "number": 2243, "title": "Fix grammatical errors in TopDownRuleDriver/TopDownRuleQueue/RuleDriver/VolcanoPlanner", "bodyText": "It comes from #2237. I open this PR for the comment fix to make reviewers easier to review.", "createdAt": "2020-11-04T02:51:10Z", "url": "https://github.com/apache/calcite/pull/2243", "merged": true, "mergeCommit": {"oid": "fdcb195b829fdc4f52d777ae09630ee65eb0a977"}, "closed": true, "closedAt": "2020-11-06T02:58:58Z", "author": {"login": "chunweilei"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZFUoSAFqTUyMzAyMzI1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZt8b-gBqjM5NjUyODEwMjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMDIzMjU0", "url": "https://github.com/apache/calcite/pull/2243#pullrequestreview-523023254", "createdAt": "2020-11-04T03:37:23Z", "commit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzozNzoyNFrOHtIEoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzozNzoyNFrOHtIEoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzA4MDIyNQ==", "bodyText": "It would be helpful to add some links to the passThrough and derive operations.", "url": "https://github.com/apache/calcite/pull/2243#discussion_r517080225", "createdAt": "2020-11-04T03:37:24Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/plan/volcano/TopDownRuleDriver.java", "diffHunk": "@@ -69,8 +69,8 @@\n   private GeneratorTask applying = null;\n \n   /**\n-   * RelNodes that are generated by passThrough or derive\n-   * these nodes will not takes part in another passThrough or derive.\n+   * RelNodes that are generated by passThrough or derive.\n+   * These nodes will not take part in another passThrough or derive.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMDI0ODg5", "url": "https://github.com/apache/calcite/pull/2243#pullrequestreview-523024889", "createdAt": "2020-11-04T03:43:32Z", "commit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzo0MzozM1rOHtIJmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzo0MzozM1rOHtIJmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzA4MTQ5OQ==", "bodyText": "Rel -> RelNode?", "url": "https://github.com/apache/calcite/pull/2243#discussion_r517081499", "createdAt": "2020-11-04T03:43:33Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/plan/volcano/TopDownRuleDriver.java", "diffHunk": "@@ -170,27 +170,27 @@ private void clearProcessed(RelSet set) {\n     }\n   }\n \n-  // a callback invoked when a RelNode is going to be added into a RelSubset,\n-  // either by Register or Reregister. The task driver should need to schedule\n-  // tasks for the new nodes.\n+  // A callback invoked when a RelNode is going to be added into a RelSubset,\n+  // either by Register or Reregister. The task driver should schedule tasks\n+  // for the new nodes.\n   @Override public void onProduce(RelNode node, RelSubset subset) {\n \n-    // if the RelNode is added to another RelSubset, just ignore it.\n-    // It should be schedule in the later OptimizeGroup task\n+    // If the RelNode is added to another RelSubset, just ignore it.\n+    // It should be scheduled in the later OptimizeGroup task.\n     if (applying == null || subset.set\n         != VolcanoPlanner.equivRoot(applying.group().set)) {\n       return;\n     }\n \n-    // extra callback from each task\n+    // Extra callback from each task.\n     if (!applying.onProduce(node)) {\n       return;\n     }\n \n     if (!planner.isLogical(node)) {\n       // For a physical node, schedule tasks to optimize its inputs.\n       // The upper bound depends on all optimizing RelSubsets that this Rel belongs to.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "originalPosition": 85}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMDI1ODg5", "url": "https://github.com/apache/calcite/pull/2243#pullrequestreview-523025889", "createdAt": "2020-11-04T03:47:27Z", "commit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzo0NzoyN1rOHtIM-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzo0NzoyN1rOHtIM-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzA4MjM2MQ==", "bodyText": "an -> a", "url": "https://github.com/apache/calcite/pull/2243#discussion_r517082361", "createdAt": "2020-11-04T03:47:27Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/plan/volcano/TopDownRuleDriver.java", "diffHunk": "@@ -311,31 +311,31 @@ default boolean onProduce(RelNode node) {\n       }\n \n       if (group.taskState != null && upperBound.isLe(group.upperBound)) {\n-        // either this group failed to optimize before or it is a ring\n+        // Either this group failed to optimize before or it is a ring.\n         return;\n       }\n \n       group.startOptimize(upperBound);\n \n-      // cannot decide an actual lower bound before MExpr are fully explored\n-      // so delay the lower bound checking\n+      // Cannot decide an actual lower bound before MExpr are fully explored.\n+      // So delay the lower bound check.\n \n-      // a gate keeper to update context\n+      // A gate keeper to update context.\n       tasks.push(new GroupOptimized(group));\n \n-      // optimize mExprs in group\n+      // Optimize mExprs in group.\n       List<RelNode> physicals = new ArrayList<>();\n       for (RelNode rel : group.set.rels) {\n         if (planner.isLogical(rel)) {\n           tasks.push(new OptimizeMExpr(rel, group, false));\n         } else if (rel.isEnforcer()) {\n-          // Enforcers have lower priority than other physical nodes\n+          // Enforcers have lower priority than other physical nodes.\n           physicals.add(0, rel);\n         } else {\n           physicals.add(rel);\n         }\n       }\n-      // always apply O_INPUTS first so as to get an valid upper bound\n+      // Always apply O_INPUTS first so as to get an valid upper bound.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "originalPosition": 146}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMDI3MDAw", "url": "https://github.com/apache/calcite/pull/2243#pullrequestreview-523027000", "createdAt": "2020-11-04T03:51:52Z", "commit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzo1MTo1MlrOHtIQlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzo1MTo1MlrOHtIQlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzA4MzI4Ng==", "bodyText": "Change this to a JavaDoc, and \"Check\" -> \"Checks\"?", "url": "https://github.com/apache/calcite/pull/2243#discussion_r517083286", "createdAt": "2020-11-04T03:51:52Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/plan/volcano/TopDownRuleDriver.java", "diffHunk": "@@ -590,7 +593,7 @@ private RelNode convert(RelNode rel, RelSubset group) {\n     return null;\n   }\n \n-  // check whether a node's lower bound is less than a RelSubset's upper bound\n+  // Check whether a node's lower bound is less than a RelSubset's upper bound.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "originalPosition": 259}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMDI3MjI4", "url": "https://github.com/apache/calcite/pull/2243#pullrequestreview-523027228", "createdAt": "2020-11-04T03:52:44Z", "commit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzo1Mjo0NFrOHtIRRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzo1Mjo0NFrOHtIRRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzA4MzQ2MQ==", "bodyText": "simplify -> simplifies", "url": "https://github.com/apache/calcite/pull/2243#discussion_r517083461", "createdAt": "2020-11-04T03:52:44Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/plan/volcano/TopDownRuleDriver.java", "diffHunk": "@@ -601,7 +604,7 @@ private boolean checkLowerBound(RelNode rel, RelSubset group) {\n   }\n \n   /**\n-   * A task that optimize input for physical nodes who has only one input.\n+   * A task that optimizes input for physical nodes who has only one input.\n    * This task can be replaced by OptimizeInputs but simplify lots of logic.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "originalPosition": 269}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMDI3Njkw", "url": "https://github.com/apache/calcite/pull/2243#pullrequestreview-523027690", "createdAt": "2020-11-04T03:54:39Z", "commit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzo1NDozOVrOHtISzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwMzo1NDozOVrOHtISzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzA4Mzg1Mg==", "bodyText": "Optimize -> Optimizing", "url": "https://github.com/apache/calcite/pull/2243#discussion_r517083852", "createdAt": "2020-11-04T03:54:39Z", "author": {"login": "liyafan82"}, "path": "core/src/main/java/org/apache/calcite/plan/volcano/TopDownRuleDriver.java", "diffHunk": "@@ -768,22 +772,22 @@ private boolean checkLowerBound(RelNode rel, RelSubset group) {\n \n     @Override public void perform() {\n       if (input != parent.getInput(i)) {\n-        // The input has chnaged. So reschedule the optimize task.\n+        // The input has changed. So reschedule the optimize task.\n         input = (RelSubset) parent.getInput(i);\n         tasks.push(this);\n         tasks.push(new OptimizeGroup(input, upper));\n         return;\n       }\n \n-      // Optimize input completed. Update the context for other inputs\n+      // Optimize input completed. Update the context for other inputs.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "291945be7ea19948dbb5493d3fc7f7d4a9d5025b"}, "originalPosition": 356}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f470633054805138d2ba324a7864210b38c775eb", "author": {"user": {"login": "chunweilei", "name": "chunwei"}}, "url": "https://github.com/apache/calcite/commit/f470633054805138d2ba324a7864210b38c775eb", "committedDate": "2020-11-04T03:59:32Z", "message": "address comments"}, "afterCommit": {"oid": "2c306b47e24bf01de420120079d3c29635925d07", "author": {"user": {"login": "chunweilei", "name": "chunwei"}}, "url": "https://github.com/apache/calcite/commit/2c306b47e24bf01de420120079d3c29635925d07", "committedDate": "2020-11-04T04:01:12Z", "message": "address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b3fcd2f1d26f5937af3755b8fd81d584dac6021", "author": {"user": {"login": "chunweilei", "name": "chunwei"}}, "url": "https://github.com/apache/calcite/commit/0b3fcd2f1d26f5937af3755b8fd81d584dac6021", "committedDate": "2020-11-06T02:56:43Z", "message": "Fix grammatical errors in TopDownRuleDriver/TopDownRuleQueue/RuleDriver/VolcanoPlanner"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2c306b47e24bf01de420120079d3c29635925d07", "author": {"user": {"login": "chunweilei", "name": "chunwei"}}, "url": "https://github.com/apache/calcite/commit/2c306b47e24bf01de420120079d3c29635925d07", "committedDate": "2020-11-04T04:01:12Z", "message": "address comments"}, "afterCommit": {"oid": "0b3fcd2f1d26f5937af3755b8fd81d584dac6021", "author": {"user": {"login": "chunweilei", "name": "chunwei"}}, "url": "https://github.com/apache/calcite/commit/0b3fcd2f1d26f5937af3755b8fd81d584dac6021", "committedDate": "2020-11-06T02:56:43Z", "message": "Fix grammatical errors in TopDownRuleDriver/TopDownRuleQueue/RuleDriver/VolcanoPlanner"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3030, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}