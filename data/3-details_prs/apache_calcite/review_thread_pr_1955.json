{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyMDIyODAz", "number": 1955, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0MjoyNlrOD611BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0NzoxMFrOD612Lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDI1OTI0OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/calcite/runtime/JsonFunctions.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0MjoyNlrOGS5Oag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0MjoyNlrOGS5Oag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTEzMA==", "bodyText": "What does pathWff mean? Should we change it to a more clearer name?", "url": "https://github.com/apache/calcite/pull/1955#discussion_r422465130", "createdAt": "2020-05-09T07:42:26Z", "author": {"login": "chunweilei"}, "path": "core/src/main/java/org/apache/calcite/runtime/JsonFunctions.java", "diffHunk": "@@ -112,18 +113,22 @@ public static JsonPathContext jsonApiCommonSyntax(String input, String pathSpec)\n   }\n \n   public static JsonPathContext jsonApiCommonSyntax(JsonValueContext input, String pathSpec) {\n+    PathMode mode;\n+    String pathWff;\n     try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bf4205f61a6c0877059e203e90b0d40125ae39a"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzMDI2MjIzOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/org/apache/calcite/runtime/JsonFunctions.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwNzo0NzoxMFrOGS5QAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQwNzoyNjowM1rOGjbSSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTUzOA==", "bodyText": "What if there is an illegal mode? For instance, json_exists('{\\\"foo\\\":\\\"bar\\\"}', \"strictxx $.foo' false on error). Will it throw exception?", "url": "https://github.com/apache/calcite/pull/1955#discussion_r422465538", "createdAt": "2020-05-09T07:47:10Z", "author": {"login": "chunweilei"}, "path": "core/src/main/java/org/apache/calcite/runtime/JsonFunctions.java", "diffHunk": "@@ -112,18 +113,22 @@ public static JsonPathContext jsonApiCommonSyntax(String input, String pathSpec)\n   }\n \n   public static JsonPathContext jsonApiCommonSyntax(JsonValueContext input, String pathSpec) {\n+    PathMode mode;\n+    String pathWff;\n     try {\n       Matcher matcher = JSON_PATH_BASE.matcher(pathSpec);\n       if (!matcher.matches()) {\n-        throw RESOURCE.illegalJsonPathSpec(pathSpec).ex();\n+        mode = PathMode.STRICT;\n+        pathWff = pathSpec;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bf4205f61a6c0877059e203e90b0d40125ae39a"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgwMDM5NA==", "bodyText": "false on error\n\nThe exception was handled and returned as false.", "url": "https://github.com/apache/calcite/pull/1955#discussion_r439800394", "createdAt": "2020-06-14T07:26:03Z", "author": {"login": "XuQianJin-Stars"}, "path": "core/src/main/java/org/apache/calcite/runtime/JsonFunctions.java", "diffHunk": "@@ -112,18 +113,22 @@ public static JsonPathContext jsonApiCommonSyntax(String input, String pathSpec)\n   }\n \n   public static JsonPathContext jsonApiCommonSyntax(JsonValueContext input, String pathSpec) {\n+    PathMode mode;\n+    String pathWff;\n     try {\n       Matcher matcher = JSON_PATH_BASE.matcher(pathSpec);\n       if (!matcher.matches()) {\n-        throw RESOURCE.illegalJsonPathSpec(pathSpec).ex();\n+        mode = PathMode.STRICT;\n+        pathWff = pathSpec;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ2NTUzOA=="}, "originalCommit": {"oid": "7bf4205f61a6c0877059e203e90b0d40125ae39a"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 267, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}