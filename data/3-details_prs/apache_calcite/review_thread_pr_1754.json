{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMDg2NjE5", "number": 1754, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwNDoyNzo1MVrODXutBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwNDoyNzo1MVrODXutBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MjA5MDMxOnYy", "diffSide": "RIGHT", "path": "cassandra/src/main/java/org/apache/calcite/adapter/cassandra/CassandraSchema.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwNDoyNzo1MVrOFdL4rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwNzoxMTo0OFrOFdN2eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE0Nzc1OQ==", "bodyText": "Fix the compile warnings.", "url": "https://github.com/apache/calcite/pull/1754#discussion_r366147759", "createdAt": "2020-01-14T04:27:51Z", "author": {"login": "danny0405"}, "path": "cassandra/src/main/java/org/apache/calcite/adapter/cassandra/CassandraSchema.java", "diffHunk": "@@ -140,7 +140,7 @@ public CassandraSchema(String host, int port, String keyspace, String username,\n     this.parentSchema = parentSchema;\n     this.name = name;\n \n-    this.hook = Hook.TRIMMED.add(node -> {\n+    this.hook = Hook.TRIMMED.addThread(node -> {\n       CassandraSchema.this.addMaterializedViews();\n     });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6283736a993c7d0fa4e69018c41a5fd4ea05013c"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE2MDIxOQ==", "bodyText": "@vlsi Can you help to see this problem ? when i try to replace the add with addThread, the jdk8 tests failed because of the concurrent modification exception.", "url": "https://github.com/apache/calcite/pull/1754#discussion_r366160219", "createdAt": "2020-01-14T05:41:13Z", "author": {"login": "danny0405"}, "path": "cassandra/src/main/java/org/apache/calcite/adapter/cassandra/CassandraSchema.java", "diffHunk": "@@ -140,7 +140,7 @@ public CassandraSchema(String host, int port, String keyspace, String username,\n     this.parentSchema = parentSchema;\n     this.name = name;\n \n-    this.hook = Hook.TRIMMED.add(node -> {\n+    this.hook = Hook.TRIMMED.addThread(node -> {\n       CassandraSchema.this.addMaterializedViews();\n     });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE0Nzc1OQ=="}, "originalCommit": {"oid": "6283736a993c7d0fa4e69018c41a5fd4ea05013c"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE3OTk2MA==", "bodyText": "I guess @michaelmior could clarify better.\nI've no idea what this does and I have very little understanding of how Calcite adapter works.\nWhat I know is Hook#add adds a static (cross-thread) hook, which typically interferes when concurrent execution is used (e.g. when tests are executed concurrently).", "url": "https://github.com/apache/calcite/pull/1754#discussion_r366179960", "createdAt": "2020-01-14T07:11:48Z", "author": {"login": "vlsi"}, "path": "cassandra/src/main/java/org/apache/calcite/adapter/cassandra/CassandraSchema.java", "diffHunk": "@@ -140,7 +140,7 @@ public CassandraSchema(String host, int port, String keyspace, String username,\n     this.parentSchema = parentSchema;\n     this.name = name;\n \n-    this.hook = Hook.TRIMMED.add(node -> {\n+    this.hook = Hook.TRIMMED.addThread(node -> {\n       CassandraSchema.this.addMaterializedViews();\n     });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE0Nzc1OQ=="}, "originalCommit": {"oid": "6283736a993c7d0fa4e69018c41a5fd4ea05013c"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 364, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}