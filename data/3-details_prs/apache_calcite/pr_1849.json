{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1MzQxNDQ1", "number": 1849, "title": "[CALCITE-3815] Add missing SQL standard aggregate functions: EVERY, SO\u2026", "bodyText": "\u2026ME, INTERSECTION\nThis PR contains changes to support EVERY, SOME and INTERSECTION aggregation functions.", "createdAt": "2020-03-09T01:23:47Z", "url": "https://github.com/apache/calcite/pull/1849", "merged": true, "mergeCommit": {"oid": "f11115a2fe9e360f38910f112288581040e0ced5"}, "closed": true, "closedAt": "2020-03-14T11:10:55Z", "author": {"login": "HanumathRao"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcL1CYSgFqTM3MDg5MzM0NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNdH1TAFqTM3NDY5Njc5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwODkzMzQ0", "url": "https://github.com/apache/calcite/pull/1849#pullrequestreview-370893344", "createdAt": "2020-03-09T02:47:04Z", "commit": {"oid": "06bbf26434209f3e97dfa3f3f5111a5ffb02c164"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwMjo0NzowNVrOFzZq0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwMzowMjo1MFrOFzZ1fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ0MjI1Ng==", "bodyText": "Since SOME and EVERY are also SQL standard aggregate functions, should we add them in ReservedFunctionNames?", "url": "https://github.com/apache/calcite/pull/1849#discussion_r389442256", "createdAt": "2020-03-09T02:47:05Z", "author": {"login": "DonnyZone"}, "path": "core/src/main/codegen/templates/Parser.jj", "diffHunk": "@@ -6405,6 +6423,7 @@ SqlIdentifier ReservedFunctionName() :\n     |   <FIRST_VALUE>\n     |   <FLOOR>\n     |   <FUSION>\n+    |   <INTERSECTION>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06bbf26434209f3e97dfa3f3f5111a5ffb02c164"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ0MzE5NQ==", "bodyText": "nitpicking: keep the indent style for new line, or put them in the same line", "url": "https://github.com/apache/calcite/pull/1849#discussion_r389443195", "createdAt": "2020-03-09T02:52:16Z", "author": {"login": "DonnyZone"}, "path": "core/src/main/java/org/apache/calcite/adapter/enumerable/RexImpTable.java", "diffHunk": "@@ -1540,6 +1542,43 @@ public Expression implementResult(AggContext info,\n     }\n   }\n \n+  /** Implementor for the {@code INTERSECTION} aggregate function. */\n+  static class IntersectionImplementor extends StrictAggImplementor {\n+    @Override protected void implementNotNullReset(AggContext info,\n+                                                   AggResetContext reset) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06bbf26434209f3e97dfa3f3f5111a5ffb02c164"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQ0NDk4OA==", "bodyText": "If no rows are selected, the result is NULL\n\nIs this an expected behavior?", "url": "https://github.com/apache/calcite/pull/1849#discussion_r389444988", "createdAt": "2020-03-09T03:02:50Z", "author": {"login": "DonnyZone"}, "path": "site/_docs/reference.md", "diffHunk": "@@ -1766,12 +1766,15 @@ and `LISTAGG`).\n | COUNT( [ ALL &#124; DISTINCT ] value [, value ]*) | Returns the number of input rows for which *value* is not null (wholly not null if *value* is composite)\n | COUNT(*)                           | Returns the number of input rows\n | FUSION(multiset)                   | Returns the multiset union of *multiset* across all input values\n+| INTERSECTION(multiset)             | Returns the multiset intersection of *multiset* across all input values\n | APPROX_COUNT_DISTINCT(value [, value ]*)      | Returns the approximate number of distinct values of *value*; the database is allowed to use an approximation but is not required to\n | AVG( [ ALL &#124; DISTINCT ] numeric)         | Returns the average (arithmetic mean) of *numeric* across all input values\n | SUM( [ ALL &#124; DISTINCT ] numeric)         | Returns the sum of *numeric* across all input values\n | MAX( [ ALL &#124; DISTINCT ] value)           | Returns the maximum value of *value* across all input values\n | MIN( [ ALL &#124; DISTINCT ] value)           | Returns the minimum value of *value* across all input values\n | ANY_VALUE( [ ALL &#124; DISTINCT ] value)     | Returns one of the values of *value* across all input values; this is NOT specified in the SQL standard\n+| SOME( [ condition ] )                         | Returns true if any expression is true. If no rows are selected, the result is NULL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06bbf26434209f3e97dfa3f3f5111a5ffb02c164"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "06bbf26434209f3e97dfa3f3f5111a5ffb02c164", "author": {"user": {"login": "HanumathRao", "name": "Hanumath Rao Maduri"}}, "url": "https://github.com/apache/calcite/commit/06bbf26434209f3e97dfa3f3f5111a5ffb02c164", "committedDate": "2020-03-09T01:19:40Z", "message": "CALCITE-3815: Add missing SQL standard aggregate functions: EVERY, SOME, INTERSECTION"}, "afterCommit": {"oid": "372f4f9a907eae5dbb6a944408b4e468dc986fc2", "author": {"user": {"login": "HanumathRao", "name": "Hanumath Rao Maduri"}}, "url": "https://github.com/apache/calcite/commit/372f4f9a907eae5dbb6a944408b4e468dc986fc2", "committedDate": "2020-03-11T04:45:41Z", "message": "[CALCITE-3815] Addressing review comments."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0cd5fb48ba393e7a54bdad16c730b451b689e6fb", "author": {"user": {"login": "HanumathRao", "name": "Hanumath Rao Maduri"}}, "url": "https://github.com/apache/calcite/commit/0cd5fb48ba393e7a54bdad16c730b451b689e6fb", "committedDate": "2020-03-13T05:23:21Z", "message": "[CALCITE-3815] fixing the SOME and EVERY function to use ReservedFunctionName."}, "afterCommit": {"oid": "bcdb1287c452b4952a9e4959741977b3057af2d2", "author": {"user": {"login": "HanumathRao", "name": "Hanumath Rao Maduri"}}, "url": "https://github.com/apache/calcite/commit/bcdb1287c452b4952a9e4959741977b3057af2d2", "committedDate": "2020-03-13T05:35:46Z", "message": "[CALCITE-3815] fixing the SOME and EVERY function to use ReservedFunctionName."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MDc0MDEz", "url": "https://github.com/apache/calcite/pull/1849#pullrequestreview-374074013", "createdAt": "2020-03-13T06:31:27Z", "commit": {"oid": "bcdb1287c452b4952a9e4959741977b3057af2d2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwNjozMToyN1rOF1459g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwNjozMToyN1rOF1459g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA1MTE5MA==", "bodyText": "Please also add INTERSECTION in AGGREGATE EnumSet [1].\n[1] \n  \n    \n      calcite/core/src/main/java/org/apache/calcite/sql/SqlKind.java\n    \n    \n         Line 1159\n      in\n      4c3cef9\n    \n    \n    \n    \n\n        \n          \n           public static final EnumSet<SqlKind> AGGREGATE =", "url": "https://github.com/apache/calcite/pull/1849#discussion_r392051190", "createdAt": "2020-03-13T06:31:27Z", "author": {"login": "DonnyZone"}, "path": "core/src/main/java/org/apache/calcite/sql/SqlKind.java", "diffHunk": "@@ -966,6 +966,9 @@\n   /** The {@code FUSION} aggregate function. */\n   FUSION,\n \n+  /** The {@code INTERSECTION} aggregate function. */\n+  INTERSECTION,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcdb1287c452b4952a9e4959741977b3057af2d2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "741b7f1ad37012bf3f8bd95fcc2de6fb14303aac", "author": {"user": {"login": "HanumathRao", "name": "Hanumath Rao Maduri"}}, "url": "https://github.com/apache/calcite/commit/741b7f1ad37012bf3f8bd95fcc2de6fb14303aac", "committedDate": "2020-03-13T16:21:27Z", "message": "[CALCITE-3815] Add missing SQL standard aggregate functions: EVERY, SOME, INTERSECTION"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bcdb1287c452b4952a9e4959741977b3057af2d2", "author": {"user": {"login": "HanumathRao", "name": "Hanumath Rao Maduri"}}, "url": "https://github.com/apache/calcite/commit/bcdb1287c452b4952a9e4959741977b3057af2d2", "committedDate": "2020-03-13T05:35:46Z", "message": "[CALCITE-3815] fixing the SOME and EVERY function to use ReservedFunctionName."}, "afterCommit": {"oid": "741b7f1ad37012bf3f8bd95fcc2de6fb14303aac", "author": {"user": {"login": "HanumathRao", "name": "Hanumath Rao Maduri"}}, "url": "https://github.com/apache/calcite/commit/741b7f1ad37012bf3f8bd95fcc2de6fb14303aac", "committedDate": "2020-03-13T16:21:27Z", "message": "[CALCITE-3815] Add missing SQL standard aggregate functions: EVERY, SOME, INTERSECTION"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0Njk2Nzk4", "url": "https://github.com/apache/calcite/pull/1849#pullrequestreview-374696798", "createdAt": "2020-03-14T04:22:40Z", "commit": {"oid": "741b7f1ad37012bf3f8bd95fcc2de6fb14303aac"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwNDoyMjo0MFrOF2Xrqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwNDoyMjo0MFrOF2Xrqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1NTQzNQ==", "bodyText": "That's great! Thanks;)", "url": "https://github.com/apache/calcite/pull/1849#discussion_r392555435", "createdAt": "2020-03-14T04:22:40Z", "author": {"login": "DonnyZone"}, "path": "core/src/main/java/org/apache/calcite/sql/SqlKind.java", "diffHunk": "@@ -966,6 +966,9 @@\n   /** The {@code FUSION} aggregate function. */\n   FUSION,\n \n+  /** The {@code INTERSECTION} aggregate function. */\n+  INTERSECTION,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA1MTE5MA=="}, "originalCommit": {"oid": "bcdb1287c452b4952a9e4959741977b3057af2d2"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4344, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}