{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxNjExNDgy", "number": 2013, "title": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)", "bodyText": "Fix Bug as Follows\nhttps://issues.apache.org/jira/browse/CALCITE-3935", "createdAt": "2020-06-09T08:08:50Z", "url": "https://github.com/apache/calcite/pull/2013", "merged": true, "mergeCommit": {"oid": "a36f5a21f006ee717e7949269a99fa48a65f6abe"}, "closed": true, "closedAt": "2021-09-20T08:28:23Z", "author": {"login": "wojustme"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqfvlaAFqTQyOTYwOTQ3Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABe_j1HvgBqjUzMjI5NjUyNDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NjA5NDcy", "url": "https://github.com/apache/calcite/pull/2013#pullrequestreview-429609472", "createdAt": "2020-06-12T09:49:52Z", "commit": {"oid": "934beef56200258677b3404ba5dbaa4956fc3469"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwOTo0OTo1MlrOGi-CWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwOTo0OTo1MlrOGi-CWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMyMTE3Nw==", "bodyText": "What if it's a right Join but with Calc as the left child ?\nIf above concern is valid, please add a corresponding test.", "url": "https://github.com/apache/calcite/pull/2013#discussion_r439321177", "createdAt": "2020-06-12T09:49:52Z", "author": {"login": "jinxing64"}, "path": "core/src/main/java/org/apache/calcite/plan/SubstitutionVisitor.java", "diffHunk": "@@ -1202,8 +1202,9 @@ private JoinOnLeftCalcToJoinUnifyRule() {\n       if (joinRelType == null) {\n         return null;\n       }\n-      if (joinRelType != JoinRelType.INNER\n-          && !(joinRelType.isOuterJoin() && qInput0Cond.isAlwaysTrue())) {\n+      // If JoinType is inner-join or out-join,\n+      // Calc which is bottom join can be pulled up.\n+      if (joinRelType != JoinRelType.INNER && !joinRelType.isOuterJoin()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "934beef56200258677b3404ba5dbaa4956fc3469"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "934beef56200258677b3404ba5dbaa4956fc3469", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/934beef56200258677b3404ba5dbaa4956fc3469", "committedDate": "2020-06-09T08:05:51Z", "message": "[CALCITE-3935] Materialization-Failed, when querying with LeftJoinWithFilter (xurenhe)"}, "afterCommit": {"oid": "d07410b215c46daecb5715571132737fa7447be3", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/d07410b215c46daecb5715571132737fa7447be3", "committedDate": "2020-06-21T07:03:38Z", "message": "[CALCITE-3935] Materialization-Failed, LeftFilter on LeftJoin can be pulled up, such as RightFilterOnRightJoin."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d07410b215c46daecb5715571132737fa7447be3", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/d07410b215c46daecb5715571132737fa7447be3", "committedDate": "2020-06-21T07:03:38Z", "message": "[CALCITE-3935] Materialization-Failed, LeftFilter on LeftJoin can be pulled up, such as RightFilterOnRightJoin."}, "afterCommit": {"oid": "d17982881b4474f9b8c27efa2caf9dbc4153f53b", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/d17982881b4474f9b8c27efa2caf9dbc4153f53b", "committedDate": "2020-06-21T07:07:32Z", "message": "[CALCITE-3935] Materialization-Failed, LeftFilter on LeftJoin can be pulled up, such as RightFilterOnRightJoin."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d17982881b4474f9b8c27efa2caf9dbc4153f53b", "author": {"user": null}, "url": "https://github.com/apache/calcite/commit/d17982881b4474f9b8c27efa2caf9dbc4153f53b", "committedDate": "2020-06-21T07:07:32Z", "message": "[CALCITE-3935] Materialization-Failed, LeftFilter on LeftJoin can be pulled up, such as RightFilterOnRightJoin."}, "afterCommit": {"oid": "daec4dd50eab7ef95f27ec8333fb79b98efd8b35", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/daec4dd50eab7ef95f27ec8333fb79b98efd8b35", "committedDate": "2020-06-21T07:12:19Z", "message": "[CALCITE-3935] Materialization-Failed, LeftFilterOnLeftJoin can be pulled up, such as RightFilterOnRightJoin."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "daec4dd50eab7ef95f27ec8333fb79b98efd8b35", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/daec4dd50eab7ef95f27ec8333fb79b98efd8b35", "committedDate": "2020-06-21T07:12:19Z", "message": "[CALCITE-3935] Materialization-Failed, LeftFilterOnLeftJoin can be pulled up, such as RightFilterOnRightJoin."}, "afterCommit": {"oid": "e17d6487eb60f32c6fc33ef8097a2dfde0cda282", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/e17d6487eb60f32c6fc33ef8097a2dfde0cda282", "committedDate": "2020-06-22T02:14:54Z", "message": "[CALCITE-3935] Materialization-Failed, LeftFilterOnLeftJoin can be pulled up, such as RightFilterOnRightJoin."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NjkwMzk1", "url": "https://github.com/apache/calcite/pull/2013#pullrequestreview-438690395", "createdAt": "2020-06-27T11:09:07Z", "commit": {"oid": "e17d6487eb60f32c6fc33ef8097a2dfde0cda282"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QxMTowOTowN1rOGp1B6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QxMTowOTowN1rOGp1B6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUxMzY0Mw==", "bodyText": "we do not format like this", "url": "https://github.com/apache/calcite/pull/2013#discussion_r446513643", "createdAt": "2020-06-27T11:09:07Z", "author": {"login": "yanlin-Lynn"}, "path": "core/src/main/java/org/apache/calcite/plan/SubstitutionVisitor.java", "diffHunk": "@@ -2011,6 +2006,38 @@ public static boolean equalType(String desc0, MutableRel rel0, String desc1,\n     return RelOptUtil.equal(desc0, rel0.rowType, desc1, rel1.rowType, litmus);\n   }\n \n+  /**\n+   * Check filter bottom join can be pull-up,\n+   * when meeting JoinOnCalc of query unify to Join of target.\n+   * Such as {@link JoinOnLeftCalcToJoinUnifyRule} <br/>\n+   * {@link JoinOnRightCalcToJoinUnifyRule} <br/>\n+   * {@link JoinOnCalcsToJoinUnifyRule} <br/>\n+   */\n+  private static boolean canPullUpFilterBottomJoin(JoinRelType joinType,\n+                                                   RexNode leftFilterRexNode,\n+                                                   RexNode rightFilterRexNode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e17d6487eb60f32c6fc33ef8097a2dfde0cda282"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NjkwNTAw", "url": "https://github.com/apache/calcite/pull/2013#pullrequestreview-438690500", "createdAt": "2020-06-27T11:11:08Z", "commit": {"oid": "e17d6487eb60f32c6fc33ef8097a2dfde0cda282"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QxMToxMTowOFrOGp1Chw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QxMToxMTowOFrOGp1Chw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUxMzc5OQ==", "bodyText": "Check if filter under join can be pulled up", "url": "https://github.com/apache/calcite/pull/2013#discussion_r446513799", "createdAt": "2020-06-27T11:11:08Z", "author": {"login": "yanlin-Lynn"}, "path": "core/src/main/java/org/apache/calcite/plan/SubstitutionVisitor.java", "diffHunk": "@@ -2011,6 +2006,38 @@ public static boolean equalType(String desc0, MutableRel rel0, String desc1,\n     return RelOptUtil.equal(desc0, rel0.rowType, desc1, rel1.rowType, litmus);\n   }\n \n+  /**\n+   * Check filter bottom join can be pull-up,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e17d6487eb60f32c6fc33ef8097a2dfde0cda282"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e17d6487eb60f32c6fc33ef8097a2dfde0cda282", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/e17d6487eb60f32c6fc33ef8097a2dfde0cda282", "committedDate": "2020-06-22T02:14:54Z", "message": "[CALCITE-3935] Materialization-Failed, LeftFilterOnLeftJoin can be pulled up, such as RightFilterOnRightJoin."}, "afterCommit": {"oid": "5d4e8c46b937045c564c57a1777e99a3874ade92", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/5d4e8c46b937045c564c57a1777e99a3874ade92", "committedDate": "2021-08-31T11:23:09Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up bottom filters of `Left/Right` join (xurenhe)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5d4e8c46b937045c564c57a1777e99a3874ade92", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/5d4e8c46b937045c564c57a1777e99a3874ade92", "committedDate": "2021-08-31T11:23:09Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up bottom filters of `Left/Right` join (xurenhe)"}, "afterCommit": {"oid": "84372b468c424331160dbe79bddcb64db9cb1e65", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/84372b468c424331160dbe79bddcb64db9cb1e65", "committedDate": "2021-08-31T11:37:53Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up bottom filters of `Left/Right` join (xurenhe)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84372b468c424331160dbe79bddcb64db9cb1e65", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/84372b468c424331160dbe79bddcb64db9cb1e65", "committedDate": "2021-08-31T11:37:53Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up bottom filters of `Left/Right` join (xurenhe)"}, "afterCommit": {"oid": "3e0668e4491249faa5ab7f85aeefdfb66d478fc9", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/3e0668e4491249faa5ab7f85aeefdfb66d478fc9", "committedDate": "2021-08-31T12:10:37Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e0668e4491249faa5ab7f85aeefdfb66d478fc9", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/3e0668e4491249faa5ab7f85aeefdfb66d478fc9", "committedDate": "2021-08-31T12:10:37Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}, "afterCommit": {"oid": "f2600f98ded3eaaa1e4c8bab74edd994518c7784", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/f2600f98ded3eaaa1e4c8bab74edd994518c7784", "committedDate": "2021-08-31T12:15:01Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2600f98ded3eaaa1e4c8bab74edd994518c7784", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/f2600f98ded3eaaa1e4c8bab74edd994518c7784", "committedDate": "2021-08-31T12:15:01Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}, "afterCommit": {"oid": "e13570ba745d6b808a63e70d8a5f9f7833b376e1", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/e13570ba745d6b808a63e70d8a5f9f7833b376e1", "committedDate": "2021-09-02T12:00:53Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzUyMTAwMDI1", "url": "https://github.com/apache/calcite/pull/2013#pullrequestreview-752100025", "createdAt": "2021-09-12T07:09:22Z", "commit": {"oid": "e13570ba745d6b808a63e70d8a5f9f7833b376e1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwNzowOToyMlrOKiCF-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwNzowOToyMlrOKiCF-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc3NDUyMw==", "bodyText": "You should refine this note.", "url": "https://github.com/apache/calcite/pull/2013#discussion_r706774523", "createdAt": "2021-09-12T07:09:22Z", "author": {"login": "yanlin-Lynn"}, "path": "core/src/main/java/org/apache/calcite/plan/SubstitutionVisitor.java", "diffHunk": "@@ -1388,16 +1388,11 @@ private JoinOnCalcsToJoinUnifyRule() {\n       final RexBuilder rexBuilder = call.getCluster().getRexBuilder();\n \n       // Try pulling up MutableCalc only when:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e13570ba745d6b808a63e70d8a5f9f7833b376e1"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzUyMTAwMjAy", "url": "https://github.com/apache/calcite/pull/2013#pullrequestreview-752100202", "createdAt": "2021-09-12T07:12:14Z", "commit": {"oid": "e13570ba745d6b808a63e70d8a5f9f7833b376e1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwNzoxMjoxNFrOKiCHSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwNzoxMjoxNFrOKiCHSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc3NDg1OA==", "bodyText": "Check if filter under join can be pulled up, keep the same with the note for this method.", "url": "https://github.com/apache/calcite/pull/2013#discussion_r706774858", "createdAt": "2021-09-12T07:12:14Z", "author": {"login": "yanlin-Lynn"}, "path": "core/src/main/java/org/apache/calcite/plan/SubstitutionVisitor.java", "diffHunk": "@@ -1303,8 +1303,8 @@ private JoinOnRightCalcToJoinUnifyRule() {\n       if (joinRelType == null) {\n         return null;\n       }\n-      if (joinRelType != JoinRelType.INNER\n-          && !(joinRelType.isOuterJoin() && qInput1Cond.isAlwaysTrue())) {\n+      // Check filter bottom join can be pulled up.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e13570ba745d6b808a63e70d8a5f9f7833b376e1"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzUyMTAwNTQ1", "url": "https://github.com/apache/calcite/pull/2013#pullrequestreview-752100545", "createdAt": "2021-09-12T07:17:15Z", "commit": {"oid": "e13570ba745d6b808a63e70d8a5f9f7833b376e1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwNzoxNzoxNVrOKiCJcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xMlQwNzoxNzoxNVrOKiCJcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc3NTQxMQ==", "bodyText": "Suggest you write like this.\nif (joinType == JoinRelType.LEFT) && (rightFilterRexNode == null || rightFilterRexNode.isAlwaysTrue()) {\n  return true;\n}", "url": "https://github.com/apache/calcite/pull/2013#discussion_r706775411", "createdAt": "2021-09-12T07:17:15Z", "author": {"login": "yanlin-Lynn"}, "path": "core/src/main/java/org/apache/calcite/plan/SubstitutionVisitor.java", "diffHunk": "@@ -2083,6 +2078,38 @@ public static boolean equalType(String desc0, MutableRel rel0, String desc1,\n     return RelOptUtil.equal(desc0, rel0.rowType, desc1, rel1.rowType, litmus);\n   }\n \n+  /**\n+   * Check if filter under join can be pulled up,\n+   * when meeting JoinOnCalc of query unify to Join of target.\n+   * Such as {@link JoinOnLeftCalcToJoinUnifyRule} <br/>\n+   * {@link JoinOnRightCalcToJoinUnifyRule} <br/>\n+   * {@link JoinOnCalcsToJoinUnifyRule} <br/>\n+   */\n+  private static boolean canPullUpFilterUnderJoin(JoinRelType joinType,\n+                                                  @Nullable RexNode leftFilterRexNode,\n+                                                  @Nullable RexNode rightFilterRexNode) {\n+    if (joinType == JoinRelType.INNER) {\n+      return true;\n+    }\n+    if (joinType == JoinRelType.LEFT) {\n+      if (rightFilterRexNode == null || rightFilterRexNode.isAlwaysTrue()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e13570ba745d6b808a63e70d8a5f9f7833b376e1"}, "originalPosition": 58}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e13570ba745d6b808a63e70d8a5f9f7833b376e1", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/e13570ba745d6b808a63e70d8a5f9f7833b376e1", "committedDate": "2021-09-02T12:00:53Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}, "afterCommit": {"oid": "a2c39c46da146ebea5a2c859be21f7e0b1eb02ed", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/a2c39c46da146ebea5a2c859be21f7e0b1eb02ed", "committedDate": "2021-09-12T13:09:51Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a2c39c46da146ebea5a2c859be21f7e0b1eb02ed", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/a2c39c46da146ebea5a2c859be21f7e0b1eb02ed", "committedDate": "2021-09-12T13:09:51Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}, "afterCommit": {"oid": "568025202ccd5da20a95c49e4388f8ff6a46982f", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/568025202ccd5da20a95c49e4388f8ff6a46982f", "committedDate": "2021-09-12T13:19:59Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}, {"__typename": "PullRequestReview", "id": "PRR_kwDOAUNjNM4s6W9F", "url": "https://github.com/apache/calcite/pull/2013#pullrequestreview-753495877", "createdAt": "2021-09-14T05:46:59Z", "commit": {"oid": "568025202ccd5da20a95c49e4388f8ff6a46982f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xNFQwNTo0Njo1OVrOKjIlyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wOS0xNFQwNTo0Njo1OVrOKjIlyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "PRRC_kwDOAUNjNM4qMiXI", "bodyText": "fix this indentation please.", "url": "https://github.com/apache/calcite/pull/2013#discussion_r707929544", "createdAt": "2021-09-14T05:46:59Z", "author": {"login": "yanlin-Lynn"}, "path": "core/src/main/java/org/apache/calcite/plan/SubstitutionVisitor.java", "diffHunk": "@@ -2083,6 +2075,35 @@ public static boolean equalType(String desc0, MutableRel rel0, String desc1,\n     return RelOptUtil.equal(desc0, rel0.rowType, desc1, rel1.rowType, litmus);\n   }\n \n+  /**\n+   * Check if filter under join can be pulled up,\n+   * when meeting JoinOnCalc of query unify to Join of target.\n+   * Such as {@link JoinOnLeftCalcToJoinUnifyRule} <br/>\n+   * {@link JoinOnRightCalcToJoinUnifyRule} <br/>\n+   * {@link JoinOnCalcsToJoinUnifyRule} <br/>\n+   */\n+  private static boolean canPullUpFilterUnderJoin(JoinRelType joinType,\n+                                                  @Nullable RexNode leftFilterRexNode,\n+                                                  @Nullable RexNode rightFilterRexNode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "568025202ccd5da20a95c49e4388f8ff6a46982f"}, "originalPosition": 72}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "568025202ccd5da20a95c49e4388f8ff6a46982f", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/568025202ccd5da20a95c49e4388f8ff6a46982f", "committedDate": "2021-09-12T13:19:59Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}, "afterCommit": {"oid": "bc3a87c50e66c382f31e82fe7dafa4adc0b8ab49", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/bc3a87c50e66c382f31e82fe7dafa4adc0b8ab49", "committedDate": "2021-09-16T08:16:15Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bc3a87c50e66c382f31e82fe7dafa4adc0b8ab49", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/bc3a87c50e66c382f31e82fe7dafa4adc0b8ab49", "committedDate": "2021-09-16T08:16:15Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}, "afterCommit": {"oid": "52e12d5947d98ab714e1495e66bb75b24610a9f7", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/52e12d5947d98ab714e1495e66bb75b24610a9f7", "committedDate": "2021-09-16T08:27:26Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "52e12d5947d98ab714e1495e66bb75b24610a9f7", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/52e12d5947d98ab714e1495e66bb75b24610a9f7", "committedDate": "2021-09-16T08:27:26Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}, "afterCommit": {"oid": "9036e804747302a7be0e33d14f9132e251baac0b", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/9036e804747302a7be0e33d14f9132e251baac0b", "committedDate": "2021-09-16T08:53:31Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9036e804747302a7be0e33d14f9132e251baac0b", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/9036e804747302a7be0e33d14f9132e251baac0b", "committedDate": "2021-09-16T08:53:31Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}, "afterCommit": {"oid": "ef33f382f9429b0ae2c011a6726f8fa46191eb15", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/ef33f382f9429b0ae2c011a6726f8fa46191eb15", "committedDate": "2021-09-16T09:26:42Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8279a51d7b5046ff1dc14215de5f8ebc1f672f6", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/a8279a51d7b5046ff1dc14215de5f8ebc1f672f6", "committedDate": "2021-09-18T12:49:49Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef33f382f9429b0ae2c011a6726f8fa46191eb15", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/ef33f382f9429b0ae2c011a6726f8fa46191eb15", "committedDate": "2021-09-16T09:26:42Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}, "afterCommit": {"oid": "a8279a51d7b5046ff1dc14215de5f8ebc1f672f6", "author": {"user": {"login": "wojustme", "name": "xurenhe"}}, "url": "https://github.com/apache/calcite/commit/a8279a51d7b5046ff1dc14215de5f8ebc1f672f6", "committedDate": "2021-09-18T12:49:49Z", "message": "[CALCITE-3935] Enhance Join-Materialization, support to pull-up filters under join of left or right (xurenhe)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3609, "cost": 1, "resetAt": "2021-10-28T16:48:13Z"}}}