{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNDQ2MTI1", "number": 1288, "title": "Add thread names & mdc to log", "bodyText": "Added mdc & thread to log output.\nAdded mdc keys to BlockChainImpl (blockHash & blockHeight)\nAdded names to various threads\nAdded logging around BlockChainImpl calls to transactionPool", "createdAt": "2020-08-05T15:09:24Z", "url": "https://github.com/rsksmart/rskj/pull/1288", "merged": true, "mergeCommit": {"oid": "1e0eefb322b3364042d611e0919f90164ece5265"}, "closed": true, "closedAt": "2020-08-13T19:59:02Z", "author": {"login": "nicops"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc78sXxgFqTQ2MTc2MDM1Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-j2oQAFqTQ2NzAwMzAwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNzYwMzUz", "url": "https://github.com/rsksmart/rskj/pull/1288#pullrequestreview-461760353", "createdAt": "2020-08-05T15:10:23Z", "commit": {"oid": "a8c4b45d64d63c3f448c8e02a6b0b5522d9d1b68"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMzgyOTU2", "url": "https://github.com/rsksmart/rskj/pull/1288#pullrequestreview-462382956", "createdAt": "2020-08-06T10:06:07Z", "commit": {"oid": "a8c4b45d64d63c3f448c8e02a6b0b5522d9d1b68"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMDowNjowN1rOG8tGcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMDowNjowN1rOG8tGcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjMwNjY3Mw==", "bodyText": "Could we add the block number and short hash to the log message? It could help when grep over the log lines. I'm not sure about the current format (there is a pull request that standardize the format)", "url": "https://github.com/rsksmart/rskj/pull/1288#discussion_r466306673", "createdAt": "2020-08-06T10:06:07Z", "author": {"login": "ajlopezrsk"}, "path": "rskj-core/src/main/java/co/rsk/core/bc/BlockChainImpl.java", "diffHunk": "@@ -457,8 +457,11 @@ private void saveReceipts(Block block, BlockResult result) {\n     }\n \n     private void processBest(final Block block) {\n+        logger.debug(\"Starting to run transactionPool.processBest(block)\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8c4b45d64d63c3f448c8e02a6b0b5522d9d1b68"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8c4b45d64d63c3f448c8e02a6b0b5522d9d1b68", "author": {"user": null}, "url": "https://github.com/rsksmart/rskj/commit/a8c4b45d64d63c3f448c8e02a6b0b5522d9d1b68", "committedDate": "2020-08-05T15:08:07Z", "message": "Added logging around BlockChainImpl calls to transactionPool"}, "afterCommit": {"oid": "980ec96b4b2b3c9d59e40c32dbb86b9c3b62432c", "author": {"user": null}, "url": "https://github.com/rsksmart/rskj/commit/980ec96b4b2b3c9d59e40c32dbb86b9c3b62432c", "committedDate": "2020-08-11T16:07:41Z", "message": "Logging improvements\n\nAdded mdc & thread to log output.\nAdded mdc keys to BlockChainImpl (blockHash & blockHeight)\nAdded names to various threads\nAdded logging around BlockChainImpl calls to transactionPool"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MTQyMjgz", "url": "https://github.com/rsksmart/rskj/pull/1288#pullrequestreview-466142283", "createdAt": "2020-08-12T17:50:48Z", "commit": {"oid": "980ec96b4b2b3c9d59e40c32dbb86b9c3b62432c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MTk4ODk1", "url": "https://github.com/rsksmart/rskj/pull/1288#pullrequestreview-466198895", "createdAt": "2020-08-12T19:11:56Z", "commit": {"oid": "980ec96b4b2b3c9d59e40c32dbb86b9c3b62432c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxOToxMTo1NlrOG_u4yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxOToxMTo1NlrOG_u4yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ4MTY3NQ==", "bodyText": "Wouldn't be better if we wrap-up org.slf4j.MDC with an own implementation? Kind of helper or sthg?", "url": "https://github.com/rsksmart/rskj/pull/1288#discussion_r469481675", "createdAt": "2020-08-12T19:11:56Z", "author": {"login": "patogallaiovlabs"}, "path": "rskj-core/src/main/java/co/rsk/core/bc/BlockChainImpl.java", "diffHunk": "@@ -144,6 +144,9 @@ public ImportResult tryToConnect(Block block) {\n             }\n \n             try {\n+                org.slf4j.MDC.put(\"blockHash\", block.getHash().toHexString());\n+                org.slf4j.MDC.put(\"blockHeight\", Long.toString(block.getNumber()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "980ec96b4b2b3c9d59e40c32dbb86b9c3b62432c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MjQ2NzI3", "url": "https://github.com/rsksmart/rskj/pull/1288#pullrequestreview-466246727", "createdAt": "2020-08-12T20:25:58Z", "commit": {"oid": "980ec96b4b2b3c9d59e40c32dbb86b9c3b62432c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMDoyNTo1OFrOG_xL9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMDoyNTo1OFrOG_xL9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUxOTM0OA==", "bodyText": "AFAIR, this is an auxiliary class, which its only real use is in regtest. Maybe we could add also the name of the thread to MinerServer, it has a thread", "url": "https://github.com/rsksmart/rskj/pull/1288#discussion_r469519348", "createdAt": "2020-08-12T20:25:58Z", "author": {"login": "ajlopezrsk"}, "path": "rskj-core/src/main/java/co/rsk/mine/MinerClientImpl.java", "diffHunk": "@@ -77,7 +77,7 @@ public RefreshWork createRefreshWork() {\n     }\n \n     public Thread createDoWorkThread() {\n-        return new Thread() {\n+        return new Thread(\"miner client\") {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "980ec96b4b2b3c9d59e40c32dbb86b9c3b62432c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92df76a3c838671d2987e990a4d6a96f2ab7f171", "author": {"user": null}, "url": "https://github.com/rsksmart/rskj/commit/92df76a3c838671d2987e990a4d6a96f2ab7f171", "committedDate": "2020-08-13T15:30:27Z", "message": "Logging improvements\n\nAdded mdc & thread to log output.\nAdded mdc keys to BlockChainImpl (blockHash & blockHeight)\nAdded names to various threads\nAdded logging around BlockChainImpl calls to transactionPool"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "980ec96b4b2b3c9d59e40c32dbb86b9c3b62432c", "author": {"user": null}, "url": "https://github.com/rsksmart/rskj/commit/980ec96b4b2b3c9d59e40c32dbb86b9c3b62432c", "committedDate": "2020-08-11T16:07:41Z", "message": "Logging improvements\n\nAdded mdc & thread to log output.\nAdded mdc keys to BlockChainImpl (blockHash & blockHeight)\nAdded names to various threads\nAdded logging around BlockChainImpl calls to transactionPool"}, "afterCommit": {"oid": "92df76a3c838671d2987e990a4d6a96f2ab7f171", "author": {"user": null}, "url": "https://github.com/rsksmart/rskj/commit/92df76a3c838671d2987e990a4d6a96f2ab7f171", "committedDate": "2020-08-13T15:30:27Z", "message": "Logging improvements\n\nAdded mdc & thread to log output.\nAdded mdc keys to BlockChainImpl (blockHash & blockHeight)\nAdded names to various threads\nAdded logging around BlockChainImpl calls to transactionPool"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2OTk1MjM2", "url": "https://github.com/rsksmart/rskj/pull/1288#pullrequestreview-466995236", "createdAt": "2020-08-13T17:44:46Z", "commit": {"oid": "92df76a3c838671d2987e990a4d6a96f2ab7f171"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MDAzMDA4", "url": "https://github.com/rsksmart/rskj/pull/1288#pullrequestreview-467003008", "createdAt": "2020-08-13T17:55:44Z", "commit": {"oid": "92df76a3c838671d2987e990a4d6a96f2ab7f171"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 503, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}