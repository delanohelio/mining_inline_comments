{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MjY0MDAz", "number": 1222, "title": "Remove unused code from BlockNodeInformation & TransactionNodeInformation", "bodyText": "Rationale\nSee #1145\nBlockNodeInformation\nmaxPeers here is not actually used for anything. maxPeers is hardcoded to 50 and it limits the total size of a HashMap, the attribute blocksByNode of the BlockNodeInformation class. But, that structure is not actually queried at all in the main code, it should be queried by the getBlocksByNode methods (there are two overrides) but it is only queried on the test code.\nFor clarity, this PR removes the unused attribute and changes the test code to make the same assertions in a different way.\nTransactionNodeInformation\nIn this class, maxPeers here is not actually used for anything, literally the attribute is unused. So we are removing the maxPeers from the class and the constructor.\nmaxBlocks & maxTransactions\nThese two attributes simply limit the amount of blocks/transactions remembered by removing old entries after the 1000th. This means forgetting which node knows about a block/transaction when the block/transaction is old enough. Currently there are no config values for this and in principle it should not be an issue for bootstrapping a node.", "createdAt": "2020-04-20T19:44:43Z", "url": "https://github.com/rsksmart/rskj/pull/1222", "merged": true, "mergeCommit": {"oid": "0df03b4ab979ef7bc6310c4af9dabc58aa3435b3"}, "closed": true, "closedAt": "2020-04-23T20:18:20Z", "author": {"login": "nicops"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZkShSAH2gAyNDA2MjY0MDAzOjg2NzdkYjEwN2ViZDQ0ZWEzOGQ5YWM3YzFlYjNjMzhmODliODc1Zjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaiPk9AFqTM5OTQxOTMwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8677db107ebd44ea38d9ac7c1eb3c38f89b875f7", "author": {"user": null}, "url": "https://github.com/rsksmart/rskj/commit/8677db107ebd44ea38d9ac7c1eb3c38f89b875f7", "committedDate": "2020-04-20T19:31:00Z", "message": "Remove unused code from BlockNodeInformation & TransactionNodeInformation (issue #1145)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NzU5OTk5", "url": "https://github.com/rsksmart/rskj/pull/1222#pullrequestreview-396759999", "createdAt": "2020-04-20T19:46:16Z", "commit": {"oid": "8677db107ebd44ea38d9ac7c1eb3c38f89b875f7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxOTo0NjoxNlrOGIkyhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxOTo0NjoxNlrOGIkyhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY0NDU0OA==", "bodyText": "I removed this test because it checked the behaviour of the getBlocksByNode method and the underlying map, which is now gone", "url": "https://github.com/rsksmart/rskj/pull/1222#discussion_r411644548", "createdAt": "2020-04-20T19:46:16Z", "author": {"login": "nicops"}, "path": "rskj-core/src/test/java/co/rsk/net/BlockNodeInformationTest.java", "diffHunk": "@@ -37,38 +37,6 @@ private NodeID createNodeID(int i) {\n         return new NodeID(ByteBuffer.allocate(4).putInt(i).array());\n     }\n \n-    @Test\n-    public void nodeEvictionPolicy() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8677db107ebd44ea38d9ac7c1eb3c38f89b875f7"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NzczODY3", "url": "https://github.com/rsksmart/rskj/pull/1222#pullrequestreview-396773867", "createdAt": "2020-04-20T20:07:03Z", "commit": {"oid": "8677db107ebd44ea38d9ac7c1eb3c38f89b875f7"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3NDY5NzYw", "url": "https://github.com/rsksmart/rskj/pull/1222#pullrequestreview-397469760", "createdAt": "2020-04-21T16:26:58Z", "commit": {"oid": "8677db107ebd44ea38d9ac7c1eb3c38f89b875f7"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe7cc8afe0e1af297b06785ab8b5c05cbca3e322", "author": {"user": null}, "url": "https://github.com/rsksmart/rskj/commit/fe7cc8afe0e1af297b06785ab8b5c05cbca3e322", "committedDate": "2020-04-22T17:57:51Z", "message": "Make BlockNodeInformation & TransactionNodeInformation thread safe"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NDQ2MjMw", "url": "https://github.com/rsksmart/rskj/pull/1222#pullrequestreview-398446230", "createdAt": "2020-04-22T18:05:16Z", "commit": {"oid": "fe7cc8afe0e1af297b06785ab8b5c05cbca3e322"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5NDE5MzAx", "url": "https://github.com/rsksmart/rskj/pull/1222#pullrequestreview-399419301", "createdAt": "2020-04-23T19:41:54Z", "commit": {"oid": "fe7cc8afe0e1af297b06785ab8b5c05cbca3e322"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 703, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}