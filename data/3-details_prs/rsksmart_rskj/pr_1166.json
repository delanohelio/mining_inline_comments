{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5MDc2MTU4", "number": 1166, "title": "Difficulty divisor drop", "bodyText": "Difficulty divisor is increased from 50 to 400", "createdAt": "2020-01-30T13:33:55Z", "url": "https://github.com/rsksmart/rskj/pull/1166", "merged": true, "mergeCommit": {"oid": "27ff23122165671326c6777b8f451581719da5ea"}, "closed": true, "closedAt": "2020-02-13T17:52:42Z", "author": {"login": "smcsicardi"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_cjtLAFqTM1MDkwNjMyOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcD9uW9AFqTM1ODM3NjM5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwOTA2MzI5", "url": "https://github.com/rsksmart/rskj/pull/1166#pullrequestreview-350906329", "createdAt": "2020-01-30T15:21:21Z", "commit": {"oid": "9b0e99e071247ee95de74513821a8879f919de5f"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNToyMToyMVrOFju5hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNToyNDo1MVrOFjvCVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxMjg3MQ==", "bodyText": "Since the method is no longer static I think the constants parameter could be dropped", "url": "https://github.com/rsksmart/rskj/pull/1166#discussion_r373012871", "createdAt": "2020-01-30T15:21:21Z", "author": {"login": "M-Picco"}, "path": "rskj-core/src/main/java/co/rsk/core/DifficultyCalculator.java", "diffHunk": "@@ -48,7 +48,7 @@ public BlockDifficulty calcDifficulty(BlockHeader header, BlockHeader parentHead\n         return getBlockDifficulty(header, parentHeader, constants);\n     }\n \n-    private static BlockDifficulty getBlockDifficulty(\n+    private BlockDifficulty getBlockDifficulty(\n             BlockHeader curBlockHeader,\n             BlockHeader parent,\n             Constants constants) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b0e99e071247ee95de74513821a8879f919de5f"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxNDI1Mg==", "bodyText": "Could a constant be introduced for the value 400?", "url": "https://github.com/rsksmart/rskj/pull/1166#discussion_r373014252", "createdAt": "2020-01-30T15:23:35Z", "author": {"login": "M-Picco"}, "path": "rskj-core/src/main/java/co/rsk/core/DifficultyCalculator.java", "diffHunk": "@@ -58,6 +58,11 @@ private static BlockDifficulty getBlockDifficulty(\n         long curBlockTS = curBlockHeader.getTimestamp();\n         int duration = constants.getDurationLimit();\n         BigInteger difDivisor = constants.getDifficultyBoundDivisor();\n+        if (activationConfig.isActive(ConsensusRule.RSKIP156, curBlockHeader.getNumber())\n+            && constants.getChainId() != Constants.REGTEST_CHAIN_ID) {\n+            // Unless we are in regtest, this RSKIP increments the difficulty divisor from 50 to 400\n+            difDivisor = BigInteger.valueOf(400);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b0e99e071247ee95de74513821a8879f919de5f"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAxNTEyNA==", "bodyText": "This new block could be moved to a private method which returns the final divisor in order to improve legibility.", "url": "https://github.com/rsksmart/rskj/pull/1166#discussion_r373015124", "createdAt": "2020-01-30T15:24:51Z", "author": {"login": "M-Picco"}, "path": "rskj-core/src/main/java/co/rsk/core/DifficultyCalculator.java", "diffHunk": "@@ -58,6 +58,11 @@ private static BlockDifficulty getBlockDifficulty(\n         long curBlockTS = curBlockHeader.getTimestamp();\n         int duration = constants.getDurationLimit();\n         BigInteger difDivisor = constants.getDifficultyBoundDivisor();\n+        if (activationConfig.isActive(ConsensusRule.RSKIP156, curBlockHeader.getNumber())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b0e99e071247ee95de74513821a8879f919de5f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwOTI5ODQy", "url": "https://github.com/rsksmart/rskj/pull/1166#pullrequestreview-350929842", "createdAt": "2020-01-30T15:49:22Z", "commit": {"oid": "9b0e99e071247ee95de74513821a8879f919de5f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNTo0OToyMlrOFjv-cQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNTo0OToyMlrOFjv-cQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAzMDUxMw==", "bodyText": "Since this \"constant\" is no longer constant maybe we should find a way to remove it from here", "url": "https://github.com/rsksmart/rskj/pull/1166#discussion_r373030513", "createdAt": "2020-01-30T15:49:22Z", "author": {"login": "M-Picco"}, "path": "rskj-core/src/main/java/org/ethereum/config/Constants.java", "diffHunk": "@@ -89,6 +89,7 @@ public BlockDifficulty getFallbackMiningDifficulty() {\n     }\n \n     public BigInteger getDifficultyBoundDivisor() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b0e99e071247ee95de74513821a8879f919de5f"}, "originalPosition": 3}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b0e99e071247ee95de74513821a8879f919de5f", "author": {"user": {"login": "smcsicardi", "name": "Sebastian Sicardi"}}, "url": "https://github.com/rsksmart/rskj/commit/9b0e99e071247ee95de74513821a8879f919de5f", "committedDate": "2020-01-30T13:32:02Z", "message": "Added tests"}, "afterCommit": {"oid": "c442e2608806ed193bf519cabcc9ad02921ae060", "author": {"user": {"login": "smcsicardi", "name": "Sebastian Sicardi"}}, "url": "https://github.com/rsksmart/rskj/commit/c442e2608806ed193bf519cabcc9ad02921ae060", "committedDate": "2020-01-30T16:50:48Z", "message": "Added tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwOTgxNDk5", "url": "https://github.com/rsksmart/rskj/pull/1166#pullrequestreview-350981499", "createdAt": "2020-01-30T16:53:02Z", "commit": {"oid": "c442e2608806ed193bf519cabcc9ad02921ae060"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c442e2608806ed193bf519cabcc9ad02921ae060", "author": {"user": {"login": "smcsicardi", "name": "Sebastian Sicardi"}}, "url": "https://github.com/rsksmart/rskj/commit/c442e2608806ed193bf519cabcc9ad02921ae060", "committedDate": "2020-01-30T16:50:48Z", "message": "Added tests"}, "afterCommit": {"oid": "c919f51aa739ec9621506c9ee1eb33edf620f6f5", "author": {"user": {"login": "smcsicardi", "name": "Sebastian Sicardi"}}, "url": "https://github.com/rsksmart/rskj/commit/c919f51aa739ec9621506c9ee1eb33edf620f6f5", "committedDate": "2020-01-31T14:17:01Z", "message": "Added tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c919f51aa739ec9621506c9ee1eb33edf620f6f5", "author": {"user": {"login": "smcsicardi", "name": "Sebastian Sicardi"}}, "url": "https://github.com/rsksmart/rskj/commit/c919f51aa739ec9621506c9ee1eb33edf620f6f5", "committedDate": "2020-01-31T14:17:01Z", "message": "Added tests"}, "afterCommit": {"oid": "f83f0f90356193145c951c8b0e1fe35c43470088", "author": {"user": {"login": "smcsicardi", "name": "Sebastian Sicardi"}}, "url": "https://github.com/rsksmart/rskj/commit/f83f0f90356193145c951c8b0e1fe35c43470088", "committedDate": "2020-01-31T16:37:55Z", "message": "Added tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNTMwNTk3", "url": "https://github.com/rsksmart/rskj/pull/1166#pullrequestreview-352530597", "createdAt": "2020-02-03T20:11:43Z", "commit": {"oid": "f83f0f90356193145c951c8b0e1fe35c43470088"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7d67899e3399be3e693be45696c71a1f6065b98", "author": {"user": {"login": "smcsicardi", "name": "Sebastian Sicardi"}}, "url": "https://github.com/rsksmart/rskj/commit/a7d67899e3399be3e693be45696c71a1f6065b98", "committedDate": "2020-02-13T15:05:02Z", "message": "Implemented difficulty divisor increase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7f7cc993d8f35b2222c87ee834cda2e8d69ee31", "author": {"user": {"login": "smcsicardi", "name": "Sebastian Sicardi"}}, "url": "https://github.com/rsksmart/rskj/commit/d7f7cc993d8f35b2222c87ee834cda2e8d69ee31", "committedDate": "2020-02-13T15:05:02Z", "message": "Added tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f83f0f90356193145c951c8b0e1fe35c43470088", "author": {"user": {"login": "smcsicardi", "name": "Sebastian Sicardi"}}, "url": "https://github.com/rsksmart/rskj/commit/f83f0f90356193145c951c8b0e1fe35c43470088", "committedDate": "2020-01-31T16:37:55Z", "message": "Added tests"}, "afterCommit": {"oid": "d7f7cc993d8f35b2222c87ee834cda2e8d69ee31", "author": {"user": {"login": "smcsicardi", "name": "Sebastian Sicardi"}}, "url": "https://github.com/rsksmart/rskj/commit/d7f7cc993d8f35b2222c87ee834cda2e8d69ee31", "committedDate": "2020-02-13T15:05:02Z", "message": "Added tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4Mzc2Mzk0", "url": "https://github.com/rsksmart/rskj/pull/1166#pullrequestreview-358376394", "createdAt": "2020-02-13T16:42:42Z", "commit": {"oid": "d7f7cc993d8f35b2222c87ee834cda2e8d69ee31"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 643, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}