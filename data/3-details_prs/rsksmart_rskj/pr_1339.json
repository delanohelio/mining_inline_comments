{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2OTM4ODAw", "number": 1339, "title": "Fixed length of root field in tx receipt response", "bodyText": "This sets the length of the root field that's being returned by eth_getTransactionReceipt JSON-RPC call to 32 bytes.\nDescription\nRight now rskj returns 0x00,0x01 instead of 0x0...0 and 0x0...1 (32 bytes) for the root field. This makes some js libraries incompatible with rskj.\nMotivation and Context\nThis change is required for the rskj node to be compatible with client libraries at the JSON-RPC level.\nHow Has This Been Tested?\nJSON-RPC response of eth_getTransactionReceipt has been checked.\nTypes of changes\n\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to not work as expected)\n\nChecklist:\n\n\n\n My code follows the code style of this project.\n My change requires a change to the documentation.\n I have updated the documentation accordingly.\n Tests for the changes have been added (for bug fixes / features)\n Requires Activation Code (Hard Fork)\n\n\nOther information:", "createdAt": "2020-10-20T16:21:28Z", "url": "https://github.com/rsksmart/rskj/pull/1339", "merged": true, "mergeCommit": {"oid": "31db6b67374adc46d226d704b7d201b46251ed0e"}, "closed": true, "closedAt": "2020-11-09T15:39:34Z", "author": {"login": "Vovchyk"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVHu9EAFqTUxNTA4MDYxMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABda2pb-AFqTUyNjM4MTA5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MDgwNjEz", "url": "https://github.com/rsksmart/rskj/pull/1339#pullrequestreview-515080613", "createdAt": "2020-10-22T20:09:36Z", "commit": {"oid": "d3fecfe2363ac67db63e21659c29d6bf34b9f139"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDowOTozNlrOHmx_xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQyMDowOTozNlrOHmx_xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQyNzA3OA==", "bodyText": "I would add an assert of the last byte, matching the src.", "url": "https://github.com/rsksmart/rskj/pull/1339#discussion_r510427078", "createdAt": "2020-10-22T20:09:36Z", "author": {"login": "patogallaiovlabs"}, "path": "rskj-core/src/test/java/org/ethereum/util/ByteUtilTest.java", "diffHunk": "@@ -466,7 +466,47 @@ public void testParseBytes() {\n         for (int i=0; i < b3.length; i++) {\n             assertEquals(b3[i],normalByteArrayOffset3LeadingZeroes[i]);\n         }\n+    }\n+\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testToBytesWithLeadingZeros_InvalidLen() {\n+        ByteUtil.toBytesWithLeadingZeros(new byte[0], -1);\n+    }\n+\n+    @Test\n+    public void testToBytesWithLeadingZeros_NullSource() {\n+        byte[] actualResult = ByteUtil.toBytesWithLeadingZeros(null, 1);\n+\n+        assertNull(actualResult);\n+    }\n+\n+    @Test\n+    public void testToBytesWithLeadingZeros_EmptySource() {\n+        byte[] src = new byte[0];\n+\n+        byte[] actualResult = ByteUtil.toBytesWithLeadingZeros(src, 0);\n \n+        assertEquals(src, actualResult);\n     }\n \n+    @Test\n+    public void testToBytesWithLeadingZeros_SameSource() {\n+        byte[] src = new byte[]{0};\n+\n+        byte[] actualResult = ByteUtil.toBytesWithLeadingZeros(src, 0);\n+\n+        assertEquals(src, actualResult);\n+    }\n+\n+    @Test\n+    public void testToBytesWithLeadingZeros_WithLeadingZeros() {\n+        byte[] src = new byte[]{1};\n+\n+        byte[] actualResult = ByteUtil.toBytesWithLeadingZeros(src, 10);\n+\n+        assertEquals(10, actualResult.length);\n+        for (int i = 0; i < actualResult.length - src.length; i++) {\n+            assertEquals(0, actualResult[i]);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3fecfe2363ac67db63e21659c29d6bf34b9f139"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDM1MzAy", "url": "https://github.com/rsksmart/rskj/pull/1339#pullrequestreview-517035302", "createdAt": "2020-10-26T17:52:26Z", "commit": {"oid": "027e254e2ce3dbbaa42b0ba1bdc915b35996a603"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7051035eb78516e99dcca714689224fb908d9e4", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/f7051035eb78516e99dcca714689224fb908d9e4", "committedDate": "2020-11-09T13:40:59Z", "message": "Fixed length of root field in tx receipt response"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa57fe8843d7871936a82751d9e0b0dd5c5fbaf3", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/fa57fe8843d7871936a82751d9e0b0dd5c5fbaf3", "committedDate": "2020-11-09T13:40:59Z", "message": "Updated testToBytesWithLeadingZeros_WithLeadingZeros test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf9e2f19c1bc2c18393ae5614dae1e39f76b62fe", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/bf9e2f19c1bc2c18393ae5614dae1e39f76b62fe", "committedDate": "2020-11-09T13:40:59Z", "message": "Added test for TransactionReceiptDTO.root field"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "027e254e2ce3dbbaa42b0ba1bdc915b35996a603", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/027e254e2ce3dbbaa42b0ba1bdc915b35996a603", "committedDate": "2020-10-26T15:09:16Z", "message": "Added test for TransactionReceiptDTO.root field"}, "afterCommit": {"oid": "bf9e2f19c1bc2c18393ae5614dae1e39f76b62fe", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/bf9e2f19c1bc2c18393ae5614dae1e39f76b62fe", "committedDate": "2020-11-09T13:40:59Z", "message": "Added test for TransactionReceiptDTO.root field"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2MzIwMzQz", "url": "https://github.com/rsksmart/rskj/pull/1339#pullrequestreview-526320343", "createdAt": "2020-11-09T14:39:36Z", "commit": {"oid": "bf9e2f19c1bc2c18393ae5614dae1e39f76b62fe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2MzgxMDkz", "url": "https://github.com/rsksmart/rskj/pull/1339#pullrequestreview-526381093", "createdAt": "2020-11-09T15:39:24Z", "commit": {"oid": "bf9e2f19c1bc2c18393ae5614dae1e39f76b62fe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 591, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}