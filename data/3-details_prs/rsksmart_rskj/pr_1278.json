{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1MTc5MzA1", "number": 1278, "title": "Logging improvements", "bodyText": "Changes that are done if scope of this pull request:\n\nRemoved truncation of ids, hashes etc. while logging them.\nEncapsulated Hex.toHexString() method inside the ByteUtil class.\nImproved Transaction.toString() method. Now inside the Transaction.toString() method the gasPrice, receiveAddress and value fields are printed directly without calling toString() on them (which could cause NullPointerException when, for instance, gasPrice or the other fields are null).\nAdded logging of tx hash in Program class\n\nNote: there are a lot of files with changes, but the changes themselves are pretty straightforward. Mostly replacements in logging methods.", "createdAt": "2020-07-22T15:06:51Z", "url": "https://github.com/rsksmart/rskj/pull/1278", "merged": true, "mergeCommit": {"oid": "8d8492c28de857007f83ab4a4b05c20e74cbe8b4"}, "closed": true, "closedAt": "2020-08-14T17:23:13Z", "author": {"login": "Vovchyk"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5FYOWgFqTQ1NTE4NzI4OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-1roqgFqTQ2NzYzMjg2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MTg3Mjg4", "url": "https://github.com/rsksmart/rskj/pull/1278#pullrequestreview-455187288", "createdAt": "2020-07-24T21:09:54Z", "commit": {"oid": "0c5e81a2c251dd86b13169feb86fa4df054a44a3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQyMTowOTo1NFrOG2916A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzozMjo1OFrOG3sjkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDI4OTUxMg==", "bodyText": "I think we could fix this at this point. assigning \"s\" while returning makes no sense, am i right?", "url": "https://github.com/rsksmart/rskj/pull/1278#discussion_r460289512", "createdAt": "2020-07-24T21:09:54Z", "author": {"login": "patogallaiovlabs"}, "path": "rskj-core/src/main/java/co/rsk/rpc/modules/personal/PersonalModuleWalletEnabled.java", "diffHunk": "@@ -172,7 +173,7 @@ public String dumpRawKey(String address) throws Exception {\n                 throw new Exception(\"Address private key is locked or could not be found in this node\");\n             }\n \n-            return s = TypeConverter.toJsonHex(Hex.toHexString(account.getEcKey().getPrivKeyBytes()));\n+            return s = TypeConverter.toJsonHex(ByteUtil.toHexString(account.getEcKey().getPrivKeyBytes()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c5e81a2c251dd86b13169feb86fa4df054a44a3"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1NDg2NA==", "bodyText": "Are ignored tests?", "url": "https://github.com/rsksmart/rskj/pull/1278#discussion_r461054864", "createdAt": "2020-07-27T17:32:58Z", "author": {"login": "patogallaiovlabs"}, "path": "rskj-core/src/test/java/org/ethereum/core/LogInfoTest.java", "diffHunk": "@@ -19,16 +19,14 @@\n \n package org.ethereum.core;\n \n+import org.bouncycastle.util.encoders.Hex;\n+import org.ethereum.util.ByteUtil;\n import org.ethereum.vm.LogInfo;\n-\n+import org.junit.Ignore;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c5e81a2c251dd86b13169feb86fa4df054a44a3"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c5e81a2c251dd86b13169feb86fa4df054a44a3", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/0c5e81a2c251dd86b13169feb86fa4df054a44a3", "committedDate": "2020-07-24T13:21:59Z", "message": "Added logging of tx hash in Program class"}, "afterCommit": {"oid": "65e55e67b2b0346e82c8690cb2efafcda2542019", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/65e55e67b2b0346e82c8690cb2efafcda2542019", "committedDate": "2020-07-28T08:10:43Z", "message": "Added logging of tx hash in Program class"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65e55e67b2b0346e82c8690cb2efafcda2542019", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/65e55e67b2b0346e82c8690cb2efafcda2542019", "committedDate": "2020-07-28T08:10:43Z", "message": "Added logging of tx hash in Program class"}, "afterCommit": {"oid": "f814d78a9d10b897f1134106f0edc87873dd1163", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/f814d78a9d10b897f1134106f0edc87873dd1163", "committedDate": "2020-07-28T09:15:28Z", "message": "Added logging of tx hash in Program class"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f814d78a9d10b897f1134106f0edc87873dd1163", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/f814d78a9d10b897f1134106f0edc87873dd1163", "committedDate": "2020-07-28T09:15:28Z", "message": "Added logging of tx hash in Program class"}, "afterCommit": {"oid": "472e04b88c51cd0767f8b77a48cbec448bc176db", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/472e04b88c51cd0767f8b77a48cbec448bc176db", "committedDate": "2020-07-30T10:25:03Z", "message": "Added extra tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "472e04b88c51cd0767f8b77a48cbec448bc176db", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/472e04b88c51cd0767f8b77a48cbec448bc176db", "committedDate": "2020-07-30T10:25:03Z", "message": "Added extra tests"}, "afterCommit": {"oid": "ab7916b839d897e0e6db98da9b880a8eb5cf5fe1", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/ab7916b839d897e0e6db98da9b880a8eb5cf5fe1", "committedDate": "2020-07-30T14:28:29Z", "message": "Added extra tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab7916b839d897e0e6db98da9b880a8eb5cf5fe1", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/ab7916b839d897e0e6db98da9b880a8eb5cf5fe1", "committedDate": "2020-07-30T14:28:29Z", "message": "Added extra tests"}, "afterCommit": {"oid": "454466e31c2cb0caed9a0b69b76d2ab8f37dfc51", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/454466e31c2cb0caed9a0b69b76d2ab8f37dfc51", "committedDate": "2020-07-30T14:44:32Z", "message": "Added extra tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MTk0MzEy", "url": "https://github.com/rsksmart/rskj/pull/1278#pullrequestreview-459194312", "createdAt": "2020-07-31T13:57:21Z", "commit": {"oid": "454466e31c2cb0caed9a0b69b76d2ab8f37dfc51"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMzo1NzoyMlrOG6Ji4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxMzo1ODo1OFrOG6JmhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzYyNjk3OQ==", "bodyText": "Would be nice to have at least 1 assert. I understand that you are testing that this doesn't fail, but would be better if we are clear on that.", "url": "https://github.com/rsksmart/rskj/pull/1278#discussion_r463626979", "createdAt": "2020-07-31T13:57:22Z", "author": {"login": "patogallaiovlabs"}, "path": "rskj-core/src/test/java/org/ethereum/core/TransactionTest.java", "diffHunk": "@@ -712,6 +712,32 @@ function doIt(address invokedAddress) {\n         Assert.assertEquals(1, executor.getVMLogs().size());\n     }\n \n+    @Test\n+    public void verifyTx_noSignature() {\n+        BigInteger value = new BigInteger(\"1000000000000000000000\");\n+        byte[] privKey = HashUtil.keccak256(\"cat\".getBytes());\n+        ECKey ecKey = ECKey.fromPrivate(privKey);\n+        byte[] gasPrice = Hex.decode(\"09184e72a000\");\n+        byte[] gas = Hex.decode(\"4255\");\n+\n+        Transaction tx = new Transaction(new byte[0], gasPrice, gas, ecKey.getAddress(), value.toByteArray(),null);\n+        tx.verify();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "454466e31c2cb0caed9a0b69b76d2ab8f37dfc51"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzYyNzkwOQ==", "bodyText": "Same here.", "url": "https://github.com/rsksmart/rskj/pull/1278#discussion_r463627909", "createdAt": "2020-07-31T13:58:58Z", "author": {"login": "patogallaiovlabs"}, "path": "rskj-core/src/test/java/org/ethereum/core/TransactionTest.java", "diffHunk": "@@ -712,6 +712,32 @@ function doIt(address invokedAddress) {\n         Assert.assertEquals(1, executor.getVMLogs().size());\n     }\n \n+    @Test\n+    public void verifyTx_noSignature() {\n+        BigInteger value = new BigInteger(\"1000000000000000000000\");\n+        byte[] privKey = HashUtil.keccak256(\"cat\".getBytes());\n+        ECKey ecKey = ECKey.fromPrivate(privKey);\n+        byte[] gasPrice = Hex.decode(\"09184e72a000\");\n+        byte[] gas = Hex.decode(\"4255\");\n+\n+        Transaction tx = new Transaction(new byte[0], gasPrice, gas, ecKey.getAddress(), value.toByteArray(),null);\n+        tx.verify();\n+    }\n+\n+    @Test\n+    public void verifyTx_withSignature() {\n+        BigInteger value = new BigInteger(\"1000000000000000000000\");\n+        byte[] senderPrivKey = HashUtil.keccak256(\"cow\".getBytes());\n+        byte[] privKey = HashUtil.keccak256(\"cat\".getBytes());\n+        ECKey ecKey = ECKey.fromPrivate(privKey);\n+        byte[] gasPrice = Hex.decode(\"09184e72a000\");\n+        byte[] gas = Hex.decode(\"4255\");\n+\n+        Transaction tx = new Transaction(new byte[0], gasPrice, gas, ecKey.getAddress(), value.toByteArray(),null);\n+        tx.sign(senderPrivKey);\n+        tx.verify();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "454466e31c2cb0caed9a0b69b76d2ab8f37dfc51"}, "originalPosition": 27}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "454466e31c2cb0caed9a0b69b76d2ab8f37dfc51", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/454466e31c2cb0caed9a0b69b76d2ab8f37dfc51", "committedDate": "2020-07-30T14:44:32Z", "message": "Added extra tests"}, "afterCommit": {"oid": "0a6f9b1b963336d920a0bfa53a791710950212bd", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/0a6f9b1b963336d920a0bfa53a791710950212bd", "committedDate": "2020-08-03T09:13:02Z", "message": "Added extra tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a6f9b1b963336d920a0bfa53a791710950212bd", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/0a6f9b1b963336d920a0bfa53a791710950212bd", "committedDate": "2020-08-03T09:13:02Z", "message": "Added extra tests"}, "afterCommit": {"oid": "ccca6d9ca34d87bdd340b0b0ec8592b1a2a41083", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/ccca6d9ca34d87bdd340b0b0ec8592b1a2a41083", "committedDate": "2020-08-03T10:23:23Z", "message": "Added extra tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxODY5MDIz", "url": "https://github.com/rsksmart/rskj/pull/1278#pullrequestreview-461869023", "createdAt": "2020-08-05T17:18:29Z", "commit": {"oid": "ccca6d9ca34d87bdd340b0b0ec8592b1a2a41083"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNzoxODoyOVrOG8TNsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNzoxODoyOVrOG8TNsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTg4MjU0NA==", "bodyText": "fix indentation?", "url": "https://github.com/rsksmart/rskj/pull/1278#discussion_r465882544", "createdAt": "2020-08-05T17:18:29Z", "author": {"login": "nicops"}, "path": "rskj-core/src/main/java/org/ethereum/core/TransactionReceipt.java", "diffHunk": "@@ -19,21 +19,17 @@\n \n package org.ethereum.core;\n \n-import org.bouncycastle.util.BigIntegers;\n-import org.bouncycastle.util.encoders.Hex;\n-import org.ethereum.util.RLP;\n-import org.ethereum.util.RLPElement;\n-import org.ethereum.util.RLPItem;\n-import org.ethereum.util.RLPList;\n-import org.ethereum.vm.LogInfo;\n-\n-import java.math.BigInteger;\n-import java.util.ArrayList;\n-import java.util.Arrays;\n-import java.util.List;\n-\n-import static co.rsk.util.ListArrayUtil.nullToEmpty;\n-import static org.ethereum.util.ByteUtil.EMPTY_BYTE_ARRAY;\n+    import org.bouncycastle.util.BigIntegers;\n+    import org.ethereum.util.*;\n+    import org.ethereum.vm.LogInfo;\n+\n+    import java.math.BigInteger;\n+    import java.util.ArrayList;\n+    import java.util.Arrays;\n+    import java.util.List;\n+\n+    import static co.rsk.util.ListArrayUtil.nullToEmpty;\n+    import static org.ethereum.util.ByteUtil.EMPTY_BYTE_ARRAY;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ccca6d9ca34d87bdd340b0b0ec8592b1a2a41083"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjA2NzY5", "url": "https://github.com/rsksmart/rskj/pull/1278#pullrequestreview-462606769", "createdAt": "2020-08-06T15:02:49Z", "commit": {"oid": "ccca6d9ca34d87bdd340b0b0ec8592b1a2a41083"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjI2NjQ0", "url": "https://github.com/rsksmart/rskj/pull/1278#pullrequestreview-462626644", "createdAt": "2020-08-06T15:24:34Z", "commit": {"oid": "ccca6d9ca34d87bdd340b0b0ec8592b1a2a41083"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1260eba9f217f4458d15ad79d2c2635392ca06a8", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/1260eba9f217f4458d15ad79d2c2635392ca06a8", "committedDate": "2020-08-14T14:06:59Z", "message": "Logging improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "489b003ce602fff53c513ddf3c258676205a71ab", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/489b003ce602fff53c513ddf3c258676205a71ab", "committedDate": "2020-08-14T14:06:59Z", "message": "Added logging of tx hash in Program class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7febb16e5a6463c20945e597ef05d83a98b51d8", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/b7febb16e5a6463c20945e597ef05d83a98b51d8", "committedDate": "2020-08-14T14:06:59Z", "message": "Added extra tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ccca6d9ca34d87bdd340b0b0ec8592b1a2a41083", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/ccca6d9ca34d87bdd340b0b0ec8592b1a2a41083", "committedDate": "2020-08-03T10:23:23Z", "message": "Added extra tests"}, "afterCommit": {"oid": "b7febb16e5a6463c20945e597ef05d83a98b51d8", "author": {"user": {"login": "Vovchyk", "name": null}}, "url": "https://github.com/rsksmart/rskj/commit/b7febb16e5a6463c20945e597ef05d83a98b51d8", "committedDate": "2020-08-14T14:06:59Z", "message": "Added extra tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3NjMyODYw", "url": "https://github.com/rsksmart/rskj/pull/1278#pullrequestreview-467632860", "createdAt": "2020-08-14T14:42:01Z", "commit": {"oid": "b7febb16e5a6463c20945e597ef05d83a98b51d8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 491, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}