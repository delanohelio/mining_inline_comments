{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0NTgzNzQw", "number": 1073, "title": "Clean up to tool-attributes, add annotations and add test for custom \u2026", "bodyText": "\u2026tool types.\nThis PR does not change any of the behaviour, this PR simply does 3 things:\n\nAdd @nullable and @ApiStatus.Internal (people are not supposed to touch them!! whoever using the internal events please stop) annotations\nRemove redundant VanillaToolsModdedBlocksToolHandler's Tag#contains, it is already checked beforehand.\nAdd a custom tool type (tater) in the testmod, and blocks that are effectively broken by taters.\n\nSigned-off-by: shedaniel daniel@shedaniel.me", "createdAt": "2020-09-11T03:12:02Z", "url": "https://github.com/FabricMC/fabric/pull/1073", "merged": true, "mergeCommit": {"oid": "e1e947a65ffcfdbb7413d9bf47f52f317416db85"}, "closed": true, "closedAt": "2020-10-18T17:32:17Z", "author": {"login": "shedaniel"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHsi2yAH2gAyNDg0NTgzNzQwOmU1NDc4MjZjYTAzNWViODRmYTIzYTc5MzdmYjBlNzZkN2ZkNTI4YmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdRN6rEAFqTUwNjExMjE2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e547826ca035eb84fa23a7937fb0e76d7fd528bf", "author": {"user": {"login": "shedaniel", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/e547826ca035eb84fa23a7937fb0e76d7fd528bf", "committedDate": "2020-09-11T03:08:36Z", "message": "Clean up to tool-attributes, add annotations and add test for custom tool types.\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd1f96a487708f8635cc5d8f4089b1f206692875", "author": {"user": {"login": "shedaniel", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/cd1f96a487708f8635cc5d8f4089b1f206692875", "committedDate": "2020-09-11T03:12:34Z", "message": "Change version to 1.2.3\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9482427aef02905ba088e2723714cca7750ebcb", "author": {"user": {"login": "shedaniel", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/a9482427aef02905ba088e2723714cca7750ebcb", "committedDate": "2020-09-11T03:13:23Z", "message": "remove unrelated change\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NDQ3NjY5", "url": "https://github.com/FabricMC/fabric/pull/1073#pullrequestreview-486447669", "createdAt": "2020-09-11T03:23:40Z", "commit": {"oid": "a9482427aef02905ba088e2723714cca7750ebcb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwMzoyMzo0MFrOHQM6lQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwMzoyMzo0MFrOHQM6lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc1MDg2OQ==", "bodyText": "Convert everything above to tabs", "url": "https://github.com/FabricMC/fabric/pull/1073#discussion_r486750869", "createdAt": "2020-09-11T03:23:40Z", "author": {"login": "i509VCB"}, "path": "fabric-tool-attribute-api-v1/build.gradle", "diffHunk": "@@ -1,9 +1,9 @@\n archivesBaseName = \"fabric-tool-attribute-api-v1\"\n-version = getSubprojectVersion(project, \"1.2.2\")\n+version = getSubprojectVersion(project, \"1.2.3\")\n \n dependencies {\n     compile project(path: ':fabric-api-base', configuration: 'dev')\n     compile project(path: ':fabric-tag-extensions-v0', configuration: 'dev')\n     testmodCompile project(path: ':fabric-object-builder-api-v1', configuration: 'dev')\n-\ttestmodCompile project(path: ':fabric-events-lifecycle-v0', configuration: 'dev')\n+\ttestmodCompile project(path: ':fabric-lifecycle-events-v1', configuration: 'dev')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9482427aef02905ba088e2723714cca7750ebcb"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eba9da1ad8906a14d5189f97f0ce1ff5cef3a330", "author": {"user": {"login": "shedaniel", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/eba9da1ad8906a14d5189f97f0ce1ff5cef3a330", "committedDate": "2020-09-11T03:26:55Z", "message": "Turn build.gradle to tabs\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fad981c15e29dd5bf573f8816f5542406a375f9", "author": {"user": {"login": "shedaniel", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/6fad981c15e29dd5bf573f8816f5542406a375f9", "committedDate": "2020-09-11T03:59:14Z", "message": "Fix checkstyle\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2OTUyMzQ3", "url": "https://github.com/FabricMC/fabric/pull/1073#pullrequestreview-486952347", "createdAt": "2020-09-11T16:28:38Z", "commit": {"oid": "6fad981c15e29dd5bf573f8816f5542406a375f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNjoyODozOFrOHQlqKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNjoyODozOFrOHQlqKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzE1NjI2NQ==", "bodyText": "General question: Do we want this on all internal classes?\nIf so would some way to enforce it for the whole of fabric api be a good idea?", "url": "https://github.com/FabricMC/fabric/pull/1073#discussion_r487156265", "createdAt": "2020-09-11T16:28:38Z", "author": {"login": "modmuss50"}, "path": "fabric-tool-attribute-api-v1/src/main/java/net/fabricmc/fabric/impl/tool/attribute/AttributeManager.java", "diffHunk": "@@ -23,10 +23,12 @@\n \n import com.google.common.collect.HashMultimap;\n import com.google.common.collect.Multimap;\n+import org.jetbrains.annotations.ApiStatus;\n \n import net.minecraft.entity.attribute.EntityAttribute;\n import net.minecraft.entity.attribute.EntityAttributeModifier;\n \n+@ApiStatus.Internal", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6fad981c15e29dd5bf573f8816f5542406a375f9"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81c1b43362e592ec30a1247ff87da8ebb7c5c118", "author": {"user": {"login": "shedaniel", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/81c1b43362e592ec30a1247ff87da8ebb7c5c118", "committedDate": "2020-10-06T16:16:44Z", "message": "Merge remote-tracking branch 'fabric/1.16' into custom_tool_tags\n\n# Conflicts:\n#\tfabric-tool-attribute-api-v1/src/main/java/net/fabricmc/fabric/impl/tool/attribute/ToolManagerImpl.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2d55126f71f02e9a6ca54e0712fe491bb3928a1", "author": {"user": {"login": "shedaniel", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/f2d55126f71f02e9a6ca54e0712fe491bb3928a1", "committedDate": "2020-10-06T16:19:54Z", "message": "Fix some review issues\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e574833471a1a4f79087dc1bd721c1766c344e9e", "author": {"user": {"login": "shedaniel", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/e574833471a1a4f79087dc1bd721c1766c344e9e", "committedDate": "2020-10-06T16:30:07Z", "message": "Add license to package-info.java\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6170c708156c6193e9bb753c369aeb346979a04c", "author": {"user": {"login": "shedaniel", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/6170c708156c6193e9bb753c369aeb346979a04c", "committedDate": "2020-10-06T16:37:00Z", "message": "Remove line between the javadoc and the package line\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2496f3f50b4583b090cf6d3ce4a097ac9e23655f", "author": {"user": {"login": "shedaniel", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/2496f3f50b4583b090cf6d3ce4a097ac9e23655f", "committedDate": "2020-10-06T16:39:10Z", "message": "Move the @NotNull annotation\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMTYzNDc0", "url": "https://github.com/FabricMC/fabric/pull/1073#pullrequestreview-503163474", "createdAt": "2020-10-06T16:45:11Z", "commit": {"oid": "2496f3f50b4583b090cf6d3ce4a097ac9e23655f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMTc4Nzgz", "url": "https://github.com/FabricMC/fabric/pull/1073#pullrequestreview-503178783", "createdAt": "2020-10-06T17:03:09Z", "commit": {"oid": "2496f3f50b4583b090cf6d3ce4a097ac9e23655f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMjA5NDc0", "url": "https://github.com/FabricMC/fabric/pull/1073#pullrequestreview-503209474", "createdAt": "2020-10-06T17:41:39Z", "commit": {"oid": "2496f3f50b4583b090cf6d3ce4a097ac9e23655f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNzo0MTozOVrOHdS7Pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNzo0Mjo1MlrOHdS99g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ4MDgzMQ==", "bodyText": "Is there a reason the tag check is dropped here?", "url": "https://github.com/FabricMC/fabric/pull/1073#discussion_r500480831", "createdAt": "2020-10-06T17:41:39Z", "author": {"login": "i509VCB"}, "path": "fabric-tool-attribute-api-v1/src/main/java/net/fabricmc/fabric/impl/tool/attribute/handlers/VanillaToolsModdedBlocksToolHandler.java", "diffHunk": "@@ -51,12 +54,13 @@ public ActionResult isEffectiveOn(Tag<Item> tag, BlockState state, ItemStack sta\n \t\treturn ActionResult.PASS;\n \t}\n \n+\t@NotNull\n \t@Override\n \tpublic TypedActionResult<Float> getMiningSpeedMultiplier(Tag<Item> tag, BlockState state, ItemStack stack, LivingEntity user) {\n \t\tif (!(stack.getItem() instanceof DynamicAttributeTool)) {\n \t\t\tToolManagerImpl.Entry entry = ToolManagerImpl.entryNullable(state.getBlock());\n \n-\t\t\tif (entry != null && entry.getMiningLevel(tag) >= 0 && tag.contains(stack.getItem())) {\n+\t\t\tif (entry != null && entry.getMiningLevel(tag) >= 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2496f3f50b4583b090cf6d3ce4a097ac9e23655f"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ4MTUyNg==", "bodyText": "Was there a reason this was null?", "url": "https://github.com/FabricMC/fabric/pull/1073#discussion_r500481526", "createdAt": "2020-10-06T17:42:52Z", "author": {"login": "i509VCB"}, "path": "fabric-tool-attribute-api-v1/src/main/java/net/fabricmc/fabric/impl/tool/attribute/ToolManagerImpl.java", "diffHunk": "@@ -253,8 +258,9 @@ default ActionResult isEffectiveOn(Tag<Item> tag, BlockState state, ItemStack st\n \t\t * @param user  the user involved in breaking the block, null if not applicable.\n \t\t * @return the result of mining speed.\n \t\t */\n+\t\t@NotNull\n \t\tdefault TypedActionResult<Float> getMiningSpeedMultiplier(Tag<Item> tag, BlockState state, ItemStack stack, @Nullable LivingEntity user) {\n-\t\t\treturn null;\n+\t\t\treturn TypedActionResult.pass(1.0F);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2496f3f50b4583b090cf6d3ce4a097ac9e23655f"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDMxNjAy", "url": "https://github.com/FabricMC/fabric/pull/1073#pullrequestreview-506031602", "createdAt": "2020-10-09T23:07:52Z", "commit": {"oid": "2496f3f50b4583b090cf6d3ce4a097ac9e23655f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MTEyMTY4", "url": "https://github.com/FabricMC/fabric/pull/1073#pullrequestreview-506112168", "createdAt": "2020-10-10T17:06:48Z", "commit": {"oid": "2496f3f50b4583b090cf6d3ce4a097ac9e23655f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3294, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}