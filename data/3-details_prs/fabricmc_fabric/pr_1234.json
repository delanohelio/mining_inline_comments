{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzMTY4NTYx", "number": 1234, "title": "Fabric API Lookup", "bodyText": "Fabric API Lookup API v1\nIntroduction\nThis module allows Api instances to be associated with game objects without specifying how the association is implemented. This is useful when the same Api could be implemented more than once or implemented in different ways.\nMany thanks to @grondag for providing the original concept (#1072).\nThanks also go to @i509VCB, @Pyrofab, @sfPlayer1 and the others who were involved with the design of this module.\nThis is the foundation upon which can be built for example a fluid transfer api (#1166). Closes #1199.\nFlexible Api Querying\nBlock Api Usage example\nBuilding blocks\nThis PR was changed a lot, please have a look at the README, the package info, and the javadoc for BlockApiLookup and ApiLookupMap for up-to-date documentation.\nMore usage examples\nFastTransferLib (https://github.com/Technici4n/FastTransferLib) is an experiment to build an item, fluid and energy transfer api on top of this module. (Which was until recently called fabric-provider-api-v1.)\nMissing things?\nI could add an overload of BlockApiLookup#find with nullable BlockState and BlockEntity parameters, so that the caller can directly provide them if they are available for some reason. Added in later commits.\nThere is no module to retrieve apis from items or entities yet because there were unsolved issues with those. The community can use the provided building blocks to experiment with their own implementations of ItemStackApiLookup and EntityApiLookup until the way forward becomes clear, but let's please not delay the BlockApiLookup because of that.", "createdAt": "2020-12-21T01:21:27Z", "url": "https://github.com/FabricMC/fabric/pull/1234", "merged": true, "mergeCommit": {"oid": "dc716ea1674642c756cb030eed411f0f4919e0e8"}, "closed": true, "closedAt": "2021-03-08T20:32:36Z", "author": {"login": "Technici4n"}, "timelineItems": {"totalCount": 68, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWG40wAH2gAyNTQzMTY4NTYxOmMzOGQwNzU1NTIyZmFhZjg3MTljMjFiMjZhNTVmODRmYmMxODVjYmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeBNUKVAH2gAyNTQzMTY4NTYxOjAxYTAwMzU4OGIzOTY2OTY0ZWFkMGZhZTU5YmQzYzI1ZDViZDU2NjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c38d0755522faaf8719c21b26a55f84fbc185cbf", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/c38d0755522faaf8719c21b26a55f84fbc185cbf", "committedDate": "2020-10-25T21:45:04Z", "message": "Implement the item and block providers for provider api.\n\nYes it builds :)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a1ab867990635b893cd358dd6106c536eeffb75", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/7a1ab867990635b893cd358dd6106c536eeffb75", "committedDate": "2020-10-25T22:05:34Z", "message": "NotNull is implicit; so remove instances of it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1f0ed2cf75b61a9d1aa2ebd640d8c7e51cb44a5", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/e1f0ed2cf75b61a9d1aa2ebd640d8c7e51cb44a5", "committedDate": "2020-10-25T22:09:45Z", "message": "Some javadoc for context key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9ba2a43902253aabcb8939c1ea060baf3072f5f", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/a9ba2a43902253aabcb8939c1ea060baf3072f5f", "committedDate": "2020-10-25T22:28:15Z", "message": "Inline some api lookup return values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bd4cde57dd80b89abec67772e71712d8ba1c39b", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/3bd4cde57dd80b89abec67772e71712d8ba1c39b", "committedDate": "2020-10-26T18:56:47Z", "message": "Add first iteration of provider api test mod"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85e56eb9a29115565b4be0badf13502f41bbf6b7", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/85e56eb9a29115565b4be0badf13502f41bbf6b7", "committedDate": "2020-10-26T19:02:46Z", "message": "Reorder no context field so static block is not needed."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91980b62562c12170b8779018889482dacf5504e", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/91980b62562c12170b8779018889482dacf5504e", "committedDate": "2020-10-26T23:53:13Z", "message": "Fix a bug related to testmod block entity not checking if it has a world\n\nAlso includes stuff related to the util classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b480984213662378164de5ac2193a7eee6ed570", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/8b480984213662378164de5ac2193a7eee6ed570", "committedDate": "2020-11-21T18:27:38Z", "message": "Add block entity caches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77d882103164aefd13758504b6e7fc57b3d3ac90", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/77d882103164aefd13758504b6e7fc57b3d3ac90", "committedDate": "2020-11-24T21:43:23Z", "message": "Add fallback providers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10881ca0e6288401378e9517e400fca4f482b3d9", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/10881ca0e6288401378e9517e400fca4f482b3d9", "committedDate": "2020-11-25T11:08:15Z", "message": "Merge branch '1.16' into api-provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0aa755e6f9d8085b48ec2c4a9ae87d407a2eacf9", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/0aa755e6f9d8085b48ec2c4a9ae87d407a2eacf9", "committedDate": "2020-11-26T09:47:11Z", "message": "Inline ContextKey, remove ApiLookup, add Class<T> and Class<C> parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa81038b13fb8367e3b5fc8fe4001dc094ca9cd5", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/fa81038b13fb8367e3b5fc8fe4001dc094ca9cd5", "committedDate": "2020-11-26T09:53:24Z", "message": "Add item fallback providers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd6314743f3d6772ea7bfdcbaac346321ac4c390", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/fd6314743f3d6772ea7bfdcbaac346321ac4c390", "committedDate": "2020-11-26T16:47:58Z", "message": "Add javadoc for BlockApiLookup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64c61d8e99760e11b118eb7670b0ed1f8c62c840", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/64c61d8e99760e11b118eb7670b0ed1f8c62c840", "committedDate": "2020-11-26T16:58:39Z", "message": "Javadoc fixes, build.gradle update and version bump"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58a1cb0d56eef63cd9ac1e95c5ceb646b84a7a4f", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/58a1cb0d56eef63cd9ac1e95c5ceb646b84a7a4f", "committedDate": "2020-12-02T18:36:48Z", "message": "Add a BlockState parameter to BlockApiProvider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f149eb809043f26e968630aec69f9060d75dc25", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/4f149eb809043f26e968630aec69f9060d75dc25", "committedDate": "2020-12-13T20:41:08Z", "message": "Bye items \ud83e\udd80"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d20007ae27b6bd0979d614ee8dd2583b1611b6b", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/8d20007ae27b6bd0979d614ee8dd2583b1611b6b", "committedDate": "2020-12-17T23:58:01Z", "message": "Rename to fabric-api-lookup-api-v1 and add package-info.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3b050d4f5daf0b5675f7ac94c292a60802f978c", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/d3b050d4f5daf0b5675f7ac94c292a60802f978c", "committedDate": "2020-12-20T00:59:04Z", "message": "Document all api classes, and fix the memory leak in the cache"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed5f62686ddc8087df842c223cb51d8da65f17c4", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/ed5f62686ddc8087df842c223cb51d8da65f17c4", "committedDate": "2020-12-21T00:28:42Z", "message": "Make docs a bit less insane"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cd4e3674bb93fe1af9c6d8df5191b54bbe97673", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/0cd4e3674bb93fe1af9c6d8df5191b54bbe97673", "committedDate": "2020-12-21T00:35:16Z", "message": "Revert build.gradle changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MDg2NTcz", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-556086573", "createdAt": "2020-12-21T01:29:53Z", "commit": {"oid": "0cd4e3674bb93fe1af9c6d8df5191b54bbe97673"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da3072b37bb09ea103ac882431ea6eeb521798b9", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/da3072b37bb09ea103ac882431ea6eeb521798b9", "committedDate": "2020-12-21T19:53:12Z", "message": "Add example code to javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c3b8bbeb902eb3c93be4ae5159a4ae73540232e", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/3c3b8bbeb902eb3c93be4ae5159a4ae73540232e", "committedDate": "2020-12-22T00:11:42Z", "message": "Write README, document what BlockApiCache does, fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30d45b640027415da3c9b0f65ea0bdcd937aa72f", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/30d45b640027415da3c9b0f65ea0bdcd937aa72f", "committedDate": "2020-12-22T20:27:32Z", "message": "Add @Nullable BlockState and BlockEntity parameters where applicable, pass BlockState and BlockEntity to fallback providers, and reduce insanity overall"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5477c43058321d086032a52d5cbc28873d73be01", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/5477c43058321d086032a52d5cbc28873d73be01", "committedDate": "2020-12-22T23:38:59Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MTM2NDQy", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-558136442", "createdAt": "2020-12-23T17:31:28Z", "commit": {"oid": "5477c43058321d086032a52d5cbc28873d73be01"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dee0ad256764ac2f095af748d2dfc7d6108e5f28", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/dee0ad256764ac2f095af748d2dfc7d6108e5f28", "committedDate": "2020-12-23T20:45:29Z", "message": "Some javadoc cleanup and slight tweaks in impl"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MjM2Mjcz", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-558236273", "createdAt": "2020-12-23T21:28:57Z", "commit": {"oid": "dee0ad256764ac2f095af748d2dfc7d6108e5f28"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NTAxODUw", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-558501850", "createdAt": "2020-12-24T13:15:14Z", "commit": {"oid": "dee0ad256764ac2f095af748d2dfc7d6108e5f28"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NzU2NjM3", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-558756637", "createdAt": "2020-12-25T05:12:08Z", "commit": {"oid": "dee0ad256764ac2f095af748d2dfc7d6108e5f28"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb61f6d8f5b3bcc60830b8b115aebeb8fe3dfc00", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/cb61f6d8f5b3bcc60830b8b115aebeb8fe3dfc00", "committedDate": "2020-12-25T12:53:03Z", "message": "Fix ApiLookupMapImpl bug and add a relevant unit test in the testmod, minor tweaks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4OTIwNjAx", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-558920601", "createdAt": "2020-12-27T11:06:40Z", "commit": {"oid": "cb61f6d8f5b3bcc60830b8b115aebeb8fe3dfc00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4OTIyMDAy", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-558922002", "createdAt": "2020-12-27T11:29:58Z", "commit": {"oid": "cb61f6d8f5b3bcc60830b8b115aebeb8fe3dfc00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4OTI5OTM3", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-558929937", "createdAt": "2020-12-27T13:39:24Z", "commit": {"oid": "cb61f6d8f5b3bcc60830b8b115aebeb8fe3dfc00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5Mjg4Nzgw", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-559288780", "createdAt": "2020-12-28T20:15:19Z", "commit": {"oid": "cb61f6d8f5b3bcc60830b8b115aebeb8fe3dfc00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzNzMyMTY1", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-563732165", "createdAt": "2021-01-07T18:43:11Z", "commit": {"oid": "cb61f6d8f5b3bcc60830b8b115aebeb8fe3dfc00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "047fe88d687a2a688e86dc90c40a002787c72f0e", "author": {"user": {"login": "PepperCode1", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/047fe88d687a2a688e86dc90c40a002787c72f0e", "committedDate": "2021-01-11T23:01:24Z", "message": "Javadoc formatting."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2OTE4MTE5", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-566918119", "createdAt": "2021-01-13T06:13:26Z", "commit": {"oid": "047fe88d687a2a688e86dc90c40a002787c72f0e"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QwNjoxMzoyNlrOISg57A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QwNjoxNzoxNFrOISg-tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjI4NDM5Ng==", "bodyText": "Would adding a String name to this logger make it clearer for the user where the error came from?", "url": "https://github.com/FabricMC/fabric/pull/1234#discussion_r556284396", "createdAt": "2021-01-13T06:13:26Z", "author": {"login": "PepperCode1"}, "path": "fabric-api-lookup-api-v1/src/main/java/net/fabricmc/fabric/impl/lookup/block/BlockApiLookupImpl.java", "diffHunk": "@@ -0,0 +1,160 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.impl.lookup.block;\n+\n+import java.util.List;\n+import java.util.Objects;\n+import java.util.concurrent.CopyOnWriteArrayList;\n+\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+import org.jetbrains.annotations.Nullable;\n+\n+import net.minecraft.block.Block;\n+import net.minecraft.block.BlockState;\n+import net.minecraft.block.entity.BlockEntity;\n+import net.minecraft.block.entity.BlockEntityType;\n+import net.minecraft.util.math.BlockPos;\n+import net.minecraft.util.registry.Registry;\n+import net.minecraft.world.World;\n+\n+import net.fabricmc.fabric.api.lookup.v1.ApiProviderMap;\n+import net.fabricmc.fabric.api.lookup.v1.block.BlockApiLookup;\n+import net.fabricmc.fabric.mixin.lookup.BlockEntityTypeAccessor;\n+\n+public final class BlockApiLookupImpl<T, C> implements BlockApiLookup<T, C> {\n+\tprivate static final Logger LOGGER = LogManager.getLogger();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "047fe88d687a2a688e86dc90c40a002787c72f0e"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjI4NTYyMA==", "bodyText": "This is the only occurrence of <br>. Is it necessary for formatting or can it be replaced with a <p> for consistency?", "url": "https://github.com/FabricMC/fabric/pull/1234#discussion_r556285620", "createdAt": "2021-01-13T06:17:14Z", "author": {"login": "PepperCode1"}, "path": "fabric-api-lookup-api-v1/src/main/java/net/fabricmc/fabric/api/lookup/v1/block/BlockApiCache.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.api.lookup.v1.block;\n+\n+import java.util.Objects;\n+\n+import org.jetbrains.annotations.Nullable;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.block.entity.BlockEntity;\n+import net.minecraft.world.World;\n+import net.minecraft.server.world.ServerWorld;\n+import net.minecraft.util.math.BlockPos;\n+\n+import net.fabricmc.fabric.impl.lookup.block.BlockApiCacheImpl;\n+import net.fabricmc.fabric.impl.lookup.block.BlockApiLookupImpl;\n+\n+/**\n+ * A {@link BlockApiLookup} bound to a {@link ServerWorld} and a position, providing much faster Api access.\n+ * Refer to {@link BlockApiLookup} for example code.\n+ *\n+ * <p>{@link BlockApiLookup#get(World, BlockPos, BlockState, BlockEntity, Object) BlockApiLookup#get()} looks up\n+ * the block state, the block entity, and the Api provider registered for the target block.\n+ *\n+ * <br>This object caches the block entity at the target position, and the last used Api provider, removing those queries.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "047fe88d687a2a688e86dc90c40a002787c72f0e"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2OTUzMDQy", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-566953042", "createdAt": "2021-01-13T07:32:59Z", "commit": {"oid": "047fe88d687a2a688e86dc90c40a002787c72f0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2OTUzMDQ5", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-566953049", "createdAt": "2021-01-13T07:33:00Z", "commit": {"oid": "047fe88d687a2a688e86dc90c40a002787c72f0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2OTU3NzEw", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-566957710", "createdAt": "2021-01-13T07:41:29Z", "commit": {"oid": "047fe88d687a2a688e86dc90c40a002787c72f0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaba1d7096af8a44f385fc059d2bc78bb9bf93b6", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/eaba1d7096af8a44f385fc059d2bc78bb9bf93b6", "committedDate": "2021-01-13T23:21:15Z", "message": "Module name in logger, remove inconsistent <br> tag"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY4NjIyNDA2", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-568622406", "createdAt": "2021-01-14T21:00:48Z", "commit": {"oid": "eaba1d7096af8a44f385fc059d2bc78bb9bf93b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNFQyMTowMDo0OVrOIT3D8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNFQyMTowMDo0OVrOIT3D8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzY5NTk4Ng==", "bodyText": "Unless im missing something I dont see these 2 interfaces needing to be exposed as API? They seem to be related to impl details?", "url": "https://github.com/FabricMC/fabric/pull/1234#discussion_r557695986", "createdAt": "2021-01-14T21:00:49Z", "author": {"login": "modmuss50"}, "path": "fabric-api-lookup-api-v1/src/main/java/net/fabricmc/fabric/api/lookup/v1/ApiLookupMap.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.api.lookup.v1;\n+\n+import java.util.Objects;\n+import java.util.function.Supplier;\n+\n+import net.minecraft.util.Identifier;\n+\n+import net.fabricmc.fabric.impl.lookup.ApiLookupMapImpl;\n+\n+/**\n+ * Access to generic Api lookup instances. This is is meant to be used by implementors of Api lookup registries.\n+ *\n+ * <p>Note: To store a lookup class with type parameters {@code <T, C>}, it is recommended to store it as {@code <?, ?>} and perform an unchecked cast on queries internally.\n+ *\n+ * @param <L> The type of the lookup.\n+ */\n+public interface ApiLookupMap<L> extends Iterable<L> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eaba1d7096af8a44f385fc059d2bc78bb9bf93b6"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY4NjMyNTM5", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-568632539", "createdAt": "2021-01-14T21:16:16Z", "commit": {"oid": "eaba1d7096af8a44f385fc059d2bc78bb9bf93b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNFQyMToxNjoxNlrOIT3irA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNFQyMToxNjoxNlrOIT3irA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzcwMzg1Mg==", "bodyText": "What happens if you try to cache something that isnt a BE? registred via registerForBlocks.", "url": "https://github.com/FabricMC/fabric/pull/1234#discussion_r557703852", "createdAt": "2021-01-14T21:16:16Z", "author": {"login": "modmuss50"}, "path": "fabric-api-lookup-api-v1/src/main/java/net/fabricmc/fabric/impl/lookup/block/BlockApiCacheImpl.java", "diffHunk": "@@ -0,0 +1,121 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.impl.lookup.block;\n+\n+import org.jetbrains.annotations.Nullable;\n+\n+import net.minecraft.block.BlockState;\n+import net.minecraft.block.entity.BlockEntity;\n+import net.minecraft.server.world.ServerWorld;\n+import net.minecraft.util.math.BlockPos;\n+\n+import net.fabricmc.fabric.api.event.lifecycle.v1.ServerBlockEntityEvents;\n+import net.fabricmc.fabric.api.lookup.v1.block.BlockApiCache;\n+import net.fabricmc.fabric.api.lookup.v1.block.BlockApiLookup;\n+\n+public final class BlockApiCacheImpl<T, C> implements BlockApiCache<T, C> {\n+\tprivate final BlockApiLookupImpl<T, C> lookup;\n+\tprivate final ServerWorld world;\n+\tprivate final BlockPos pos;\n+\t/**\n+\t * We always cache the block entity, even if it's null. We rely on BE load and unload events to invalidate the cache when necessary.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eaba1d7096af8a44f385fc059d2bc78bb9bf93b6"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwMDcyNzQ0", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-570072744", "createdAt": "2021-01-17T16:28:18Z", "commit": {"oid": "eaba1d7096af8a44f385fc059d2bc78bb9bf93b6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwMDc0MDky", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-570074092", "createdAt": "2021-01-17T16:42:41Z", "commit": {"oid": "eaba1d7096af8a44f385fc059d2bc78bb9bf93b6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwNzE5MzAx", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-570719301", "createdAt": "2021-01-18T18:43:56Z", "commit": {"oid": "eaba1d7096af8a44f385fc059d2bc78bb9bf93b6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcxNjIzNzcz", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-571623773", "createdAt": "2021-01-19T20:19:40Z", "commit": {"oid": "eaba1d7096af8a44f385fc059d2bc78bb9bf93b6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQyMDoxOTo0MFrOIWgK_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQyMDoxOTo0MFrOIWgK_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDQ2NjY4Nw==", "bodyText": "This module now needs to define a module lifecycle:\nFor the new module you would add the following to the fabric.mod.json\n  \"custom\": {\n    \"fabric-api:module-lifecycle\": \"stable\"\n  }", "url": "https://github.com/FabricMC/fabric/pull/1234#discussion_r560466687", "createdAt": "2021-01-19T20:19:40Z", "author": {"login": "i509VCB"}, "path": "fabric-api-lookup-api-v1/src/main/resources/fabric.mod.json", "diffHunk": "@@ -0,0 +1,27 @@\n+{\n+  \"schemaVersion\": 1,\n+  \"id\": \"fabric-api-lookup-api-v1\",\n+  \"name\": \"Fabric Api Lookup API (v1)\",\n+  \"version\": \"${version}\",\n+  \"environment\": \"*\",\n+  \"license\": \"Apache-2.0\",\n+  \"icon\": \"assets/fabric-api-lookup-api-v1/icon.png\",\n+  \"contact\": {\n+    \"homepage\": \"https://fabricmc.net\",\n+    \"irc\": \"irc://irc.esper.net:6667/fabric\",\n+    \"issues\": \"https://github.com/FabricMC/fabric/issues\",\n+    \"sources\": \"https://github.com/FabricMC/fabric\"\n+  },\n+  \"authors\": [\n+    \"FabricMC\"\n+  ],\n+  \"depends\": {\n+    \"fabricloader\": \">=0.9.2\",\n+    \"fabric-api-base\": \"*\",\n+    \"fabric-lifecycle-events-v1\": \"*\"\n+  },\n+  \"description\": \"A universal way to expose and query Apis\",\n+  \"mixins\": [\n+    \"fabric-api-lookup-api-v1.mixins.json\"\n+  ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eaba1d7096af8a44f385fc059d2bc78bb9bf93b6"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f91dfb62b469222a1d5f4db738a7bcc8f97ae93", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/8f91dfb62b469222a1d5f4db738a7bcc8f97ae93", "committedDate": "2021-01-19T20:25:03Z", "message": "Add module lifecyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc0OTIwOTAw", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-574920900", "createdAt": "2021-01-24T11:34:15Z", "commit": {"oid": "8f91dfb62b469222a1d5f4db738a7bcc8f97ae93"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNFQxMTozNDoxNVrOIZLyng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yNFQxMTozNDoxNVrOIZLyng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzI3ODQ5NA==", "bodyText": "copying my non-merge-blocking bikeshed from 1278:\nI'm so sorry but I honestly think I need to commit bikeshed and say argue that \"Api Lookup Api\" is a terrible name that, while being very literal, is clunky to use and ends up hurting ease of understanding of the code due to the redundancy of the term \"api\". Calling it a component API isn't quite accurate either, since entity-component systems are inherently about managing storage as well as lookup. I think the best term to use here would be \"property\", as it's looking or traits of an object without caring about how they're stored.", "url": "https://github.com/FabricMC/fabric/pull/1234#discussion_r563278494", "createdAt": "2021-01-24T11:34:15Z", "author": {"login": "LemmaEOF"}, "path": "fabric-api-lookup-api-v1/README.md", "diffHunk": "@@ -0,0 +1,28 @@\n+#  Fabric Api Lookup API (v1)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f91dfb62b469222a1d5f4db738a7bcc8f97ae93"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc0OTIzNDQx", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-574923441", "createdAt": "2021-01-24T12:07:06Z", "commit": {"oid": "8f91dfb62b469222a1d5f4db738a7bcc8f97ae93"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc3MzEzOTU5", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-577313959", "createdAt": "2021-01-27T13:06:20Z", "commit": {"oid": "8f91dfb62b469222a1d5f4db738a7bcc8f97ae93"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc5Mjc3MTY1", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-579277165", "createdAt": "2021-01-29T13:56:47Z", "commit": {"oid": "8f91dfb62b469222a1d5f4db738a7bcc8f97ae93"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yOVQxMzo1Njo0OFrOIclEhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yOVQxMzo1Njo0OFrOIclEhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjgzODQwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tprivate static class StoredLookup<L> {\n          \n          \n            \n            \t\tprivate final L lookup;\n          \n          \n            \n            \t\tprivate final Class<?> apiClass;\n          \n          \n            \n            \t\tprivate final Class<?> contextClass;\n          \n          \n            \n            \n          \n          \n            \n            \t\tprivate StoredLookup(L lookup, Class<?> apiClass, Class<?> contextClass) {\n          \n          \n            \n            \tprivate static final class StoredLookup<L> {\n          \n          \n            \n            \t\tfinal L lookup;\n          \n          \n            \n            \t\tfinal Class<?> apiClass;\n          \n          \n            \n            \t\tfinal Class<?> contextClass;\n          \n          \n            \n            \n          \n          \n            \n            \t\tStoredLookup(L lookup, Class<?> apiClass, Class<?> contextClass) {\n          \n      \n    \n    \n  \n\nThis ain't java 11, no nest host yet", "url": "https://github.com/FabricMC/fabric/pull/1234#discussion_r566838404", "createdAt": "2021-01-29T13:56:48Z", "author": {"login": "liach"}, "path": "fabric-api-lookup-api-v1/src/main/java/net/fabricmc/fabric/impl/lookup/ApiLookupMapImpl.java", "diffHunk": "@@ -0,0 +1,73 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.impl.lookup;\n+\n+import java.util.HashMap;\n+import java.util.Iterator;\n+import java.util.Map;\n+import java.util.function.Supplier;\n+import java.util.stream.Collectors;\n+\n+import net.minecraft.util.Identifier;\n+\n+import net.fabricmc.fabric.api.lookup.v1.ApiLookupMap;\n+\n+public final class ApiLookupMapImpl<L> implements ApiLookupMap<L> {\n+\tprivate final Map<Identifier, StoredLookup<L>> lookups = new HashMap<>();\n+\tprivate final Supplier<L> lookupFactory;\n+\n+\tpublic ApiLookupMapImpl(Supplier<L> lookupFactory) {\n+\t\tthis.lookupFactory = lookupFactory;\n+\t}\n+\n+\t@Override\n+\tpublic synchronized L getLookup(Identifier lookupId, Class<?> apiClass, Class<?> contextClass) {\n+\t\tStoredLookup<L> storedLookup = lookups.computeIfAbsent(lookupId, id -> new StoredLookup<>(lookupFactory.get(), apiClass, contextClass));\n+\n+\t\tif (storedLookup.apiClass == apiClass && storedLookup.contextClass == contextClass) {\n+\t\t\treturn storedLookup.lookup;\n+\t\t}\n+\n+\t\tfinal String errorMessage = String.format(\n+\t\t\t\t\"Lookup with id %s is already registered with api class %s and context class %s. It can't be registered with api class %s and context class %s.\",\n+\t\t\t\tlookupId,\n+\t\t\t\tstoredLookup.apiClass.getCanonicalName(),\n+\t\t\t\tstoredLookup.contextClass.getCanonicalName(),\n+\t\t\t\tapiClass.getCanonicalName(),\n+\t\t\t\tcontextClass.getCanonicalName()\n+\t\t);\n+\n+\t\tthrow new IllegalArgumentException(errorMessage);\n+\t}\n+\n+\t@Override\n+\tpublic synchronized Iterator<L> iterator() {\n+\t\treturn lookups.values().stream().map(storedLookup -> storedLookup.lookup).collect(Collectors.toList()).iterator();\n+\t}\n+\n+\tprivate static class StoredLookup<L> {\n+\t\tprivate final L lookup;\n+\t\tprivate final Class<?> apiClass;\n+\t\tprivate final Class<?> contextClass;\n+\n+\t\tprivate StoredLookup(L lookup, Class<?> apiClass, Class<?> contextClass) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f91dfb62b469222a1d5f4db738a7bcc8f97ae93"}, "originalPosition": 67}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03a8b15acff8687fba70e2fc65c6af75eddb5fa4", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/03a8b15acff8687fba70e2fc65c6af75eddb5fa4", "committedDate": "2021-01-30T08:57:46Z", "message": "Add final, remove synthetic methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1928ea30b697254606c6b9be4ff2c9f5ab3f51e2", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/1928ea30b697254606c6b9be4ff2c9f5ab3f51e2", "committedDate": "2021-02-21T21:59:11Z", "message": "Big refactor - code part"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a111356677cb11e8534e748764c0fa09e5823ee", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/3a111356677cb11e8534e748764c0fa09e5823ee", "committedDate": "2021-02-21T23:59:36Z", "message": "Big refactor - (mostly) doc part"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d4dc7627836be462e19fc4fc93fc096b334bdd8", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/5d4dc7627836be462e19fc4fc93fc096b334bdd8", "committedDate": "2021-02-22T00:11:39Z", "message": "Documentation updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk0ODk4ODA5", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-594898809", "createdAt": "2021-02-22T00:02:03Z", "commit": {"oid": "3a111356677cb11e8534e748764c0fa09e5823ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQwMDowMjowM1rOIpBnRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQwMDowMjowM1rOIpBnRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3OTg4ODk2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * @param context Additional context for the query, defined by type parameter C.\n          \n          \n            \n            \t * @return The retrieved API, or {@code null} if no API was found.\n          \n          \n            \n            \t * @param context additional context for the query\n          \n          \n            \n            \t * @return the retrieved API, or {@code null} if no API was found\n          \n      \n    \n    \n  \n\nImo you should move the description of type C to the @param tags for class doc\nI think we are more inclined to use sentence fragments for the param and return tags than full sentences. This just serves as an example.", "url": "https://github.com/FabricMC/fabric/pull/1234#discussion_r579888966", "createdAt": "2021-02-22T00:02:03Z", "author": {"login": "liach"}, "path": "fabric-api-lookup-api-v1/src/main/java/net/fabricmc/fabric/api/lookup/v1/block/BlockApiCache.java", "diffHunk": "@@ -40,25 +40,30 @@\n @ApiStatus.NonExtendable\n public interface BlockApiCache<A, C> {\n \t/**\n-\t * Retrieve an Api from a block in the world, using the world and the position passed at creation time.\n+\t * Attempt to retrieve an API from a block in the world, using the world and the position passed at creation time.\n \t *\n-\t * <p>Note: If the block state is known, it is more efficient to use {@link BlockApiCache#get(BlockState, Object)}.\n+\t * <p>Note: If the block state is known, it is more efficient to use {@link BlockApiCache#find(BlockState, Object)}.\n+\t *\n+\t * @param context Additional context for the query, defined by type parameter C.\n+\t * @return The retrieved API, or {@code null} if no API was found.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a111356677cb11e8534e748764c0fa09e5823ee"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk0OTAxOTYy", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-594901962", "createdAt": "2021-02-22T00:26:21Z", "commit": {"oid": "5d4dc7627836be462e19fc4fc93fc096b334bdd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQwMDoyNjoyMlrOIpB0xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0yMlQwMDoyNjoyMlrOIpB0xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3OTg5MjQyMg==", "bodyText": "the reason checkstyle complained here is you need to use the html entity codes for < and >", "url": "https://github.com/FabricMC/fabric/pull/1234#discussion_r579892422", "createdAt": "2021-02-22T00:26:22Z", "author": {"login": "i509VCB"}, "path": "fabric-api-lookup-api-v1/src/main/java/net/fabricmc/fabric/api/lookup/v1/custom/ApiLookupMap.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.api.lookup.v1.custom;\n+\n+import java.util.Objects;\n+\n+import org.jetbrains.annotations.ApiStatus;\n+\n+import net.minecraft.util.Identifier;\n+\n+import net.fabricmc.fabric.impl.lookup.custom.ApiLookupMapImpl;\n+\n+//CHECKSTYLE.OFF: JavadocStyle - Checkstyle didn't like <A, C>, even though {@code ... } already escapes it.\n+/**\n+ * A a map meant to be used as the backing storage for custom {@code ApiLookup} instances,\n+ * to implement a custom equivalent of {@link net.fabricmc.fabric.api.lookup.v1.block.BlockApiLookup#get BlockApiLookup#get}.\n+ *\n+ * <p><h3>Usage Example</h3>\n+ * We will be implementing the following simplified version of an API lookup interface for item stacks\n+ * to illustrate how to use {@link ApiLookupMap} and {@link ApiProviderMap}.\n+ * <pre>{@code\n+ * public interface ItemStackApiLookup<A, C> {\n+ *     static <A, C> ItemStackApiLookup<A, C> get(Identifier lookupId, Class<A> apiClass, Class<C> contextClass) {\n+ *         return ItemStackApiLookupImpl.get(lookupId, apiClass, contextClass);\n+ *     }\n+ *     // Find an API instance.\n+ *     \uff20Nullable\n+ *     A find(ItemStack stack, C context);\n+ *     // Expose the API for some item.\n+ *     void register(ItemStackApiProvider<A, C> provider, Item item);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d4dc7627836be462e19fc4fc93fc096b334bdd8"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74b89fb2ff28a6e3450dd67e8ab7cdb8392f8bbf", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/74b89fb2ff28a6e3450dd67e8ab7cdb8392f8bbf", "committedDate": "2021-02-22T00:37:35Z", "message": "Documentation fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk0OTA0OTYy", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-594904962", "createdAt": "2021-02-22T00:46:21Z", "commit": {"oid": "74b89fb2ff28a6e3450dd67e8ab7cdb8392f8bbf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjAxMjkwNTk3", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-601290597", "createdAt": "2021-03-02T00:16:16Z", "commit": {"oid": "74b89fb2ff28a6e3450dd67e8ab7cdb8392f8bbf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbac8fdb4116de2a35378ebcc27f49c59980ce50", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/bbac8fdb4116de2a35378ebcc27f49c59980ce50", "committedDate": "2021-03-02T09:47:50Z", "message": "Fix checkstyle.xml typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjAxNjMyNzc3", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-601632777", "createdAt": "2021-03-02T09:57:03Z", "commit": {"oid": "bbac8fdb4116de2a35378ebcc27f49c59980ce50"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjAyNDc2MTUx", "url": "https://github.com/FabricMC/fabric/pull/1234#pullrequestreview-602476151", "createdAt": "2021-03-03T03:26:19Z", "commit": {"oid": "bbac8fdb4116de2a35378ebcc27f49c59980ce50"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c5cead071a5b7db1e9e58a04c6fb0de64389293", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/4c5cead071a5b7db1e9e58a04c6fb0de64389293", "committedDate": "2021-03-04T14:11:40Z", "message": "Slightly improve non-nullability checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80a0ea336f8fe4f07a70c7012266a71577a64e34", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/80a0ea336f8fe4f07a70c7012266a71577a64e34", "committedDate": "2021-03-04T21:10:28Z", "message": "Tidy null checks.\n\n* Use \"may not\" instead of \"cannot\", and end sentences with a period.\n* Remove null checks for vararg parameters: passing a null vararg is unlikely and will cause an NPE directly anyway."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01a003588b3966964ead0fae59bd3c25d5bd5661", "author": {"user": {"login": "Technici4n", "name": "Technici4n"}}, "url": "https://github.com/FabricMC/fabric/commit/01a003588b3966964ead0fae59bd3c25d5bd5661", "committedDate": "2021-03-08T19:33:06Z", "message": "Fix tiny javadoc mistake"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3535, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}