{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNDY5MDU4", "number": 604, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNTo0NzoyMVrOD4q0cQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQyMDoxMjoxNlrOD4sP4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNzQ4NDAxOnYy", "diffSide": "RIGHT", "path": "fabric-command-api-v1/src/main/java/net/fabricmc/fabric/mixin/command/MixinMinecraftDedicatedServer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNTo0NzoyMVrOGPkIYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxNTo0ODo0MVrOGPkI5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk3Mzc5NA==", "bodyText": "You only have to fire with true. By passing false you fire the event twice.\nThe event is designed in a way where mod devs are expected to use the dedicated flag and handle registration for both integrated and dedicated servers in the same method.", "url": "https://github.com/FabricMC/fabric/pull/604#discussion_r418973794", "createdAt": "2020-05-02T15:47:21Z", "author": {"login": "i509VCB"}, "path": "fabric-command-api-v1/src/main/java/net/fabricmc/fabric/mixin/command/MixinMinecraftDedicatedServer.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.mixin.command;\n+\n+import java.io.File;\n+import java.net.Proxy;\n+\n+import com.mojang.authlib.GameProfileRepository;\n+import com.mojang.authlib.minecraft.MinecraftSessionService;\n+import com.mojang.authlib.yggdrasil.YggdrasilAuthenticationService;\n+import com.mojang.datafixers.DataFixer;\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.injection.At;\n+import org.spongepowered.asm.mixin.injection.Inject;\n+import org.spongepowered.asm.mixin.injection.callback.CallbackInfoReturnable;\n+\n+import net.minecraft.server.MinecraftServer;\n+import net.minecraft.server.WorldGenerationProgressListenerFactory;\n+import net.minecraft.server.command.CommandManager;\n+import net.minecraft.server.dedicated.MinecraftDedicatedServer;\n+import net.minecraft.util.UserCache;\n+\n+import net.fabricmc.fabric.api.command.v1.CommandRegistrationCallback;\n+\n+@Mixin(MinecraftDedicatedServer.class)\n+public abstract class MixinMinecraftDedicatedServer extends MinecraftServer {\n+\tpublic MixinMinecraftDedicatedServer(File gameDir, Proxy proxy, DataFixer dataFixer, CommandManager commandManager, YggdrasilAuthenticationService authService, MinecraftSessionService sessionService, GameProfileRepository gameProfileRepository, UserCache userCache, WorldGenerationProgressListenerFactory worldGenerationProgressListenerFactory, String levelName) {\n+\t\tsuper(gameDir, proxy, dataFixer, commandManager, authService, sessionService, gameProfileRepository, userCache, worldGenerationProgressListenerFactory, levelName);\n+\t}\n+\n+\t@Inject(method = \"setupServer\", at = @At(\"HEAD\"))\n+\tprivate void setupServer(CallbackInfoReturnable<Boolean> info) {\n+\t\tCommandRegistrationCallback.EVENT.invoker().register(getCommandManager().getDispatcher(), true);\n+\t\tCommandRegistrationCallback.EVENT.invoker().register(getCommandManager().getDispatcher(), false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f7b202e25a8b856e7712ecbfb591f4740546f9c"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk3MzkyNQ==", "bodyText": "Well rather the flag says if the server is dedicated or integrated", "url": "https://github.com/FabricMC/fabric/pull/604#discussion_r418973925", "createdAt": "2020-05-02T15:48:41Z", "author": {"login": "i509VCB"}, "path": "fabric-command-api-v1/src/main/java/net/fabricmc/fabric/mixin/command/MixinMinecraftDedicatedServer.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.mixin.command;\n+\n+import java.io.File;\n+import java.net.Proxy;\n+\n+import com.mojang.authlib.GameProfileRepository;\n+import com.mojang.authlib.minecraft.MinecraftSessionService;\n+import com.mojang.authlib.yggdrasil.YggdrasilAuthenticationService;\n+import com.mojang.datafixers.DataFixer;\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.injection.At;\n+import org.spongepowered.asm.mixin.injection.Inject;\n+import org.spongepowered.asm.mixin.injection.callback.CallbackInfoReturnable;\n+\n+import net.minecraft.server.MinecraftServer;\n+import net.minecraft.server.WorldGenerationProgressListenerFactory;\n+import net.minecraft.server.command.CommandManager;\n+import net.minecraft.server.dedicated.MinecraftDedicatedServer;\n+import net.minecraft.util.UserCache;\n+\n+import net.fabricmc.fabric.api.command.v1.CommandRegistrationCallback;\n+\n+@Mixin(MinecraftDedicatedServer.class)\n+public abstract class MixinMinecraftDedicatedServer extends MinecraftServer {\n+\tpublic MixinMinecraftDedicatedServer(File gameDir, Proxy proxy, DataFixer dataFixer, CommandManager commandManager, YggdrasilAuthenticationService authService, MinecraftSessionService sessionService, GameProfileRepository gameProfileRepository, UserCache userCache, WorldGenerationProgressListenerFactory worldGenerationProgressListenerFactory, String levelName) {\n+\t\tsuper(gameDir, proxy, dataFixer, commandManager, authService, sessionService, gameProfileRepository, userCache, worldGenerationProgressListenerFactory, levelName);\n+\t}\n+\n+\t@Inject(method = \"setupServer\", at = @At(\"HEAD\"))\n+\tprivate void setupServer(CallbackInfoReturnable<Boolean> info) {\n+\t\tCommandRegistrationCallback.EVENT.invoker().register(getCommandManager().getDispatcher(), true);\n+\t\tCommandRegistrationCallback.EVENT.invoker().register(getCommandManager().getDispatcher(), false);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk3Mzc5NA=="}, "originalCommit": {"oid": "1f7b202e25a8b856e7712ecbfb591f4740546f9c"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwNzcxODA5OnYy", "diffSide": "RIGHT", "path": "fabric-command-api-v1/src/main/resources/fabric-command-api-v1.mixins.json", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQyMDoxMjoxNlrOGPl4Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQyMDozMDowN1rOGPl_LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAwMjM5NQ==", "bodyText": "Should we mixin this on client", "url": "https://github.com/FabricMC/fabric/pull/604#discussion_r419002395", "createdAt": "2020-05-02T20:12:16Z", "author": {"login": "liach"}, "path": "fabric-command-api-v1/src/main/resources/fabric-command-api-v1.mixins.json", "diffHunk": "@@ -3,7 +3,8 @@\n   \"package\": \"net.fabricmc.fabric.mixin.command\",\n   \"compatibilityLevel\": \"JAVA_8\",\n   \"mixins\": [\n-    \"MixinCommandManager\"\n+    \"MixinCommandManager\",\n+    \"MixinMinecraftDedicatedServer\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec636454532a28bbd37e9898b1060a451f46b8b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAwMjkwMA==", "bodyText": "Yes, this follows how it was done before", "url": "https://github.com/FabricMC/fabric/pull/604#discussion_r419002900", "createdAt": "2020-05-02T20:17:22Z", "author": {"login": "modmuss50"}, "path": "fabric-command-api-v1/src/main/resources/fabric-command-api-v1.mixins.json", "diffHunk": "@@ -3,7 +3,8 @@\n   \"package\": \"net.fabricmc.fabric.mixin.command\",\n   \"compatibilityLevel\": \"JAVA_8\",\n   \"mixins\": [\n-    \"MixinCommandManager\"\n+    \"MixinCommandManager\",\n+    \"MixinMinecraftDedicatedServer\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAwMjM5NQ=="}, "originalCommit": {"oid": "eec636454532a28bbd37e9898b1060a451f46b8b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAwNDEzMA==", "bodyText": "Agreed, now whole dedi server is shipped on client so this sounds good", "url": "https://github.com/FabricMC/fabric/pull/604#discussion_r419004130", "createdAt": "2020-05-02T20:29:26Z", "author": {"login": "liach"}, "path": "fabric-command-api-v1/src/main/resources/fabric-command-api-v1.mixins.json", "diffHunk": "@@ -3,7 +3,8 @@\n   \"package\": \"net.fabricmc.fabric.mixin.command\",\n   \"compatibilityLevel\": \"JAVA_8\",\n   \"mixins\": [\n-    \"MixinCommandManager\"\n+    \"MixinCommandManager\",\n+    \"MixinMinecraftDedicatedServer\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAwMjM5NQ=="}, "originalCommit": {"oid": "eec636454532a28bbd37e9898b1060a451f46b8b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAwNDIwNA==", "bodyText": "it may not be ideal, but this needed fixing now, id be happy to look at a follow up PR that improves this.", "url": "https://github.com/FabricMC/fabric/pull/604#discussion_r419004204", "createdAt": "2020-05-02T20:30:07Z", "author": {"login": "modmuss50"}, "path": "fabric-command-api-v1/src/main/resources/fabric-command-api-v1.mixins.json", "diffHunk": "@@ -3,7 +3,8 @@\n   \"package\": \"net.fabricmc.fabric.mixin.command\",\n   \"compatibilityLevel\": \"JAVA_8\",\n   \"mixins\": [\n-    \"MixinCommandManager\"\n+    \"MixinCommandManager\",\n+    \"MixinMinecraftDedicatedServer\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAwMjM5NQ=="}, "originalCommit": {"oid": "eec636454532a28bbd37e9898b1060a451f46b8b"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3547, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}