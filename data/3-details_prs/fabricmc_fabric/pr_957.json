{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NzA2MzQy", "number": 957, "title": "Entity Events v1", "bodyText": "First up is an event fired after a living entity is damaged. All vanilla living entities except armor stands work with this event.\nA few events include:\n\nEntity changing world\nPlayer changing world (seperate since these semantics are different)\nPlayer respawn\nPlayer copied (data half of respawn, is long before packets are sent)\nWhen an entity is killed by another entity\n\nThis also fixes a bug related to vanilla's built-in killed by method not be invoked when a server player entity kills another entity.", "createdAt": "2020-07-26T05:59:42Z", "url": "https://github.com/FabricMC/fabric/pull/957", "merged": true, "mergeCommit": {"oid": "79b23bee5b26bb2ccd4b10b341b98673ee903809"}, "closed": true, "closedAt": "2020-12-30T16:43:22Z", "author": {"login": "i509VCB"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8amFUABqjM2MzE0NDk0NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdqS2xJAFqTU1ODkzNTExOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "47321b885fe01187b33002232ce74ab9db5ad2ac", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/47321b885fe01187b33002232ce74ab9db5ad2ac", "committedDate": "2020-07-31T07:33:45Z", "message": "Call AFTER_KILLED_OTHER on a ServerPlayerEntity upon death."}, "afterCommit": {"oid": "4b564b2b4de8564e4cafba16a26a432d11543c29", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/4b564b2b4de8564e4cafba16a26a432d11543c29", "committedDate": "2020-08-07T02:00:19Z", "message": "Call AFTER_KILLED_OTHER on a ServerPlayerEntity upon death."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea0728ed905316ab694b3cac15353e6e969de135", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/ea0728ed905316ab694b3cac15353e6e969de135", "committedDate": "2020-08-07T04:13:12Z", "message": "Add event which is fired when a player first joined a server and add functional interface annotations"}, "afterCommit": {"oid": "9cfdf61d0ebb1b6215e8ece3cf6a1a9f5dc41f04", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/9cfdf61d0ebb1b6215e8ece3cf6a1a9f5dc41f04", "committedDate": "2020-08-13T02:07:37Z", "message": "Add event which is fired when a player first joined a server and add functional interface annotations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NDA3NzQ3", "url": "https://github.com/FabricMC/fabric/pull/957#pullrequestreview-466407747", "createdAt": "2020-08-13T02:43:16Z", "commit": {"oid": "123eadc0156d3780a81b4c705e3890199c3eeefb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwMjo0MzoxNlrOG_6AxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwMjo0MzoxNlrOG_6AxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTY2Mzk0MQ==", "bodyText": "Hmm, what's the point of Area Helper from minecraft then", "url": "https://github.com/FabricMC/fabric/pull/957#discussion_r469663941", "createdAt": "2020-08-13T02:43:16Z", "author": {"login": "liach"}, "path": "fabric-entity-events-v1/src/main/java/net/fabricmc/fabric/api/entity/event/v1/EntityTeleportationHelper.java", "diffHunk": "@@ -0,0 +1,117 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.api.entity.event.v1;\n+\n+import java.util.Optional;\n+\n+import net.minecraft.client.world.ClientWorld;\n+import net.minecraft.entity.Entity;\n+import net.minecraft.entity.EntityType;\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.entity.mob.PathAwareEntity;\n+import net.minecraft.server.network.ServerPlayerEntity;\n+import net.minecraft.server.world.ServerWorld;\n+import net.minecraft.util.math.MathHelper;\n+\n+/**\n+ * A utility class providing methods to help teleport entities to other server worlds.\n+ */\n+public final class EntityTeleportationHelper {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "123eadc0156d3780a81b4c705e3890199c3eeefb"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxOTkxNjkz", "url": "https://github.com/FabricMC/fabric/pull/957#pullrequestreview-491991693", "createdAt": "2020-09-19T11:08:23Z", "commit": {"oid": "123eadc0156d3780a81b4c705e3890199c3eeefb"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "123eadc0156d3780a81b4c705e3890199c3eeefb", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/123eadc0156d3780a81b4c705e3890199c3eeefb", "committedDate": "2020-08-13T02:39:14Z", "message": "mispelled"}, "afterCommit": {"oid": "5d9b506811e265c6107f00e87129458ba0a09c13", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/5d9b506811e265c6107f00e87129458ba0a09c13", "committedDate": "2020-10-22T07:16:01Z", "message": "mispelled"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b44207bff6eb9588f934066d95f531d635e436c", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/6b44207bff6eb9588f934066d95f531d635e436c", "committedDate": "2020-10-22T18:35:19Z", "message": "Comments and null check"}, "afterCommit": {"oid": "abb1682540e07eb5501b2325bc173ccdc146041c", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/abb1682540e07eb5501b2325bc173ccdc146041c", "committedDate": "2020-10-22T20:00:44Z", "message": "Update for mappings"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ca057156292b2e6b69c732ea724b54948e964af", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/7ca057156292b2e6b69c732ea724b54948e964af", "committedDate": "2020-10-25T21:08:15Z", "message": "Warning comment"}, "afterCommit": {"oid": "9ed153b36f61de5a02bc0775df29b7c558171440", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/9ed153b36f61de5a02bc0775df29b7c558171440", "committedDate": "2020-11-20T04:05:38Z", "message": "Warning comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NTYwMDUz", "url": "https://github.com/FabricMC/fabric/pull/957#pullrequestreview-535560053", "createdAt": "2020-11-20T16:05:39Z", "commit": {"oid": "9ed153b36f61de5a02bc0775df29b7c558171440"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8577bb1dcfece3d6fb35280f136760c2f51c3673", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/8577bb1dcfece3d6fb35280f136760c2f51c3673", "committedDate": "2020-11-22T09:05:34Z", "message": "Entity Events v1.\n\nFirst up is an event fired after a living entity is damaged. All vanilla living entities except armor stands work with this event."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbda16d5237c1c95cd9b2aef9dcf48ccd8c1f808", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/fbda16d5237c1c95cd9b2aef9dcf48ccd8c1f808", "committedDate": "2020-11-22T09:05:34Z", "message": "Events related to killing of entities, changing world, player respawn/copyFrom\n\nDeath related:\nan entity killing something and an entity being killed by an adversary\n\nPlayer related:\nAfter respawn, copy to"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b10b6b0c248be0d776cb681bc70cc9f6982c2781", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/b10b6b0c248be0d776cb681bc70cc9f6982c2781", "committedDate": "2020-11-22T09:05:34Z", "message": "Adversary stuff isn't needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a7b5b593f7797b617530afa46d706029bf542b7", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/5a7b5b593f7797b617530afa46d706029bf542b7", "committedDate": "2020-11-22T09:05:34Z", "message": "checkstyle again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "589bfdd4132658f45983729e4a23033abf9af10c", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/589bfdd4132658f45983729e4a23033abf9af10c", "committedDate": "2020-11-22T09:05:34Z", "message": "Call AFTER_KILLED_OTHER on a ServerPlayerEntity upon death."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95836187a619c6ae31d43572ad9e7480e836d1e3", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/95836187a619c6ae31d43572ad9e7480e836d1e3", "committedDate": "2020-11-22T09:05:34Z", "message": "Add event which is fired when a player first joined a server and add functional interface annotations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cadc396b6e39c655f412858f21a37f66085db89c", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/cadc396b6e39c655f412858f21a37f66085db89c", "committedDate": "2020-11-22T09:05:34Z", "message": "Update build.gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a25a277ac0ef9c2cbc81757bf402ff3e2a5e045c", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/a25a277ac0ef9c2cbc81757bf402ff3e2a5e045c", "committedDate": "2020-11-22T09:05:34Z", "message": "mispelled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0a29855879e1473e79ca9f0f31573b68f18323d", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/c0a29855879e1473e79ca9f0f31573b68f18323d", "committedDate": "2020-11-22T09:05:34Z", "message": "Some renames, test events, drop damage event\n\nDamage events need further consideration in future"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1e44f0c2112f33d2fbf398bb353231e7f7732f4", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/d1e44f0c2112f33d2fbf398bb353231e7f7732f4", "committedDate": "2020-11-22T09:05:34Z", "message": "Comments and null check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9451b72936de2fdf5a4ea4ecbe48ecff05a74f2d", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/9451b72936de2fdf5a4ea4ecbe48ecff05a74f2d", "committedDate": "2020-11-22T09:05:34Z", "message": "Update for mappings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6e11f8b98b34915b37078f793eac8bafbb43bee", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/e6e11f8b98b34915b37078f793eac8bafbb43bee", "committedDate": "2020-11-22T09:05:34Z", "message": "Warning comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e503ec42442fc3d19a46b4528fb066d1880ccf4", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/0e503ec42442fc3d19a46b4528fb066d1880ccf4", "committedDate": "2020-11-22T09:09:29Z", "message": "Remove first join event and teleport helper\n\nFirst join does not work atm and teleport is in dimensions pr"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ed153b36f61de5a02bc0775df29b7c558171440", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/9ed153b36f61de5a02bc0775df29b7c558171440", "committedDate": "2020-11-20T04:05:38Z", "message": "Warning comment"}, "afterCommit": {"oid": "0e503ec42442fc3d19a46b4528fb066d1880ccf4", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/0e503ec42442fc3d19a46b4528fb066d1880ccf4", "committedDate": "2020-11-22T09:09:29Z", "message": "Remove first join event and teleport helper\n\nFirst join does not work atm and teleport is in dimensions pr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbf1b563180b0738faca28b7a65b6210fbd5297d", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/cbf1b563180b0738faca28b7a65b6210fbd5297d", "committedDate": "2020-11-22T09:24:10Z", "message": "Module dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MDUwMzc4", "url": "https://github.com/FabricMC/fabric/pull/957#pullrequestreview-536050378", "createdAt": "2020-11-22T11:01:27Z", "commit": {"oid": "cbf1b563180b0738faca28b7a65b6210fbd5297d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "928edbe3bbd24399f615228ca45a2d1b59a442dc", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/928edbe3bbd24399f615228ca45a2d1b59a442dc", "committedDate": "2020-11-23T08:16:30Z", "message": "Javadoc tweaks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a4d6f6d25e04e71df8f3e0f3c2ed7c09e4e7092", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/5a4d6f6d25e04e71df8f3e0f3c2ed7c09e4e7092", "committedDate": "2020-12-22T20:42:19Z", "message": "Merge branch '1.16' into entity-post-damage-event"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a88deb2113d013701d1d6fc5dc92ae40285dec49", "author": {"user": {"login": "i509VCB", "name": null}}, "url": "https://github.com/FabricMC/fabric/commit/a88deb2113d013701d1d6fc5dc92ae40285dec49", "committedDate": "2020-12-23T23:43:31Z", "message": "The serverening"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4Mjc3ODY3", "url": "https://github.com/FabricMC/fabric/pull/957#pullrequestreview-558277867", "createdAt": "2020-12-23T23:59:13Z", "commit": {"oid": "a88deb2113d013701d1d6fc5dc92ae40285dec49"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MzA1NDYw", "url": "https://github.com/FabricMC/fabric/pull/957#pullrequestreview-558305460", "createdAt": "2020-12-24T02:20:12Z", "commit": {"oid": "a88deb2113d013701d1d6fc5dc92ae40285dec49"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MzQxMzA2", "url": "https://github.com/FabricMC/fabric/pull/957#pullrequestreview-558341306", "createdAt": "2020-12-24T05:25:59Z", "commit": {"oid": "a88deb2113d013701d1d6fc5dc92ae40285dec49"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNToyNTo1OVrOIK-78A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNToyNTo1OVrOIK-78A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM4NzgyNA==", "bodyText": "Imo we should just capture failhard than generate an exception stub. same for other local captures.", "url": "https://github.com/FabricMC/fabric/pull/957#discussion_r548387824", "createdAt": "2020-12-24T05:25:59Z", "author": {"login": "liach"}, "path": "fabric-entity-events-v1/src/main/java/net/fabricmc/fabric/mixin/entity/event/LivingEntityMixin.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.mixin.entity.event;\n+\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.injection.At;\n+import org.spongepowered.asm.mixin.injection.Inject;\n+import org.spongepowered.asm.mixin.injection.callback.CallbackInfo;\n+import org.spongepowered.asm.mixin.injection.callback.LocalCapture;\n+\n+import net.minecraft.entity.Entity;\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.entity.damage.DamageSource;\n+import net.minecraft.server.world.ServerWorld;\n+\n+import net.fabricmc.fabric.api.entity.event.v1.ServerEntityCombatEvents;\n+\n+@Mixin(LivingEntity.class)\n+abstract class LivingEntityMixin extends EntityMixin {\n+\t@Inject(method = \"onDeath\", at = @At(value = \"INVOKE\", target = \"Lnet/minecraft/entity/Entity;onKilledOther(Lnet/minecraft/server/world/ServerWorld;Lnet/minecraft/entity/LivingEntity;)V\", shift = At.Shift.AFTER), locals = LocalCapture.CAPTURE_FAILEXCEPTION)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88deb2113d013701d1d6fc5dc92ae40285dec49"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4NTAxMjYz", "url": "https://github.com/FabricMC/fabric/pull/957#pullrequestreview-558501263", "createdAt": "2020-12-24T13:13:12Z", "commit": {"oid": "a88deb2113d013701d1d6fc5dc92ae40285dec49"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4OTM1MTE4", "url": "https://github.com/FabricMC/fabric/pull/957#pullrequestreview-558935118", "createdAt": "2020-12-27T15:00:10Z", "commit": {"oid": "a88deb2113d013701d1d6fc5dc92ae40285dec49"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3190, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}