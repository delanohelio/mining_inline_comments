{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NzczOTc1", "number": 789, "title": "Add optional macro or mapper parameter for DEDUP to merge duplicate ticks", "bodyText": "This optional parameter can apply more complex strategies for merging duplicate ticks than just keeping the last tick.\nThe implementation is based on GTSHelper.map but does not expose this parameter in MAP. This is because deduping will behave strangely with step>1, pre>0, post>0 or when using outputTicks. This is why it was included in DEDUP and not MAP.\nExample:\nNEWGTS\n0 NaN NaN NaN 0 ADDVALUE\n1 NaN NaN NaN 1 ADDVALUE\n1 NaN NaN NaN 2 ADDVALUE\n1 NaN NaN NaN 3 ADDVALUE\n2 NaN NaN NaN 4 ADDVALUE\n3 NaN NaN NaN 5 ADDVALUE\n\nmapper.median DEDUP\n\nGives\n[[{\"c\":\"\",\"l\":{},\"a\":{},\"la\":0,\"v\":[[0,0.0],[1,2.0],[2,4.0],[3,5.0]]}]]", "createdAt": "2020-07-09T10:36:33Z", "url": "https://github.com/senx/warp10-platform/pull/789", "merged": true, "mergeCommit": {"oid": "c16e116c2371efccf55f518798f9c5a049d24b8f"}, "closed": true, "closedAt": "2020-07-23T11:49:02Z", "author": {"login": "ftence"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczMggPgH2gAyNDQ2NzczOTc1OjAxZDNlNGI0OTk5MjUwZTFiY2ViMDBjM2FhYTM5ZDkxNzMwOGI0ODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3t_UEAH2gAyNDQ2NzczOTc1OjZkMjJhMDE2ZjM5MzIxNDBiMjNmMTAwZjQzZGViMDQ0Y2NjMmZhMjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "01d3e4b4999250e1bceb00c3aaa39d917308b488", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/01d3e4b4999250e1bceb00c3aaa39d917308b488", "committedDate": "2020-07-09T10:30:35Z", "message": "Add optional macro or mapper parameter for DEDUP to merge duplicate ticks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTYyMTYz", "url": "https://github.com/senx/warp10-platform/pull/789#pullrequestreview-445562163", "createdAt": "2020-07-09T12:21:39Z", "commit": {"oid": "01d3e4b4999250e1bceb00c3aaa39d917308b488"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMjoyMTozOVrOGvOpsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMjoyMTozOVrOGvOpsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE3NjMwNQ==", "bodyText": "Put it in upper case since it is a constant", "url": "https://github.com/senx/warp10-platform/pull/789#discussion_r452176305", "createdAt": "2020-07-09T12:21:39Z", "author": {"login": "hbs"}, "path": "warp10/src/main/java/io/warp10/script/functions/DEDUP.java", "diffHunk": "@@ -18,24 +18,25 @@\n \n import io.warp10.continuum.gts.GTSHelper;\n import io.warp10.continuum.gts.GeoTimeSerie;\n-import io.warp10.script.ElementOrListStackFunction;\n+import io.warp10.script.ListRecursiveStackFunction;\n import io.warp10.script.WarpScriptException;\n+import io.warp10.script.WarpScriptMapperFunction;\n import io.warp10.script.WarpScriptStack;\n \n /**\n  * Remove duplicates from GTS instances.\n  * <p>\n- * DEDUP expects no other parameter on the stack than the GTS instances\n+ * DEDUP expects an optional mapper or macro (as MAP) and GTS instances\n  */\n-public class DEDUP extends ElementOrListStackFunction {\n+public class DEDUP extends ListRecursiveStackFunction {\n \n-  private final ElementStackFunction dedup = new ElementStackFunction() {\n+  private final ElementStackFunction simpleDedup = new ElementStackFunction() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01d3e4b4999250e1bceb00c3aaa39d917308b488"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d22a016f3932140b23f100f43deb044ccc2fa29", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/6d22a016f3932140b23f100f43deb044ccc2fa29", "committedDate": "2020-07-23T11:46:48Z", "message": "Abide by naming convention"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3378, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}