{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MjgyMDY2", "number": 669, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwODo1NDo0MVrODinRIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMzoyNTo1MFrODjdkCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NjIxNTM3OnYy", "diffSide": "RIGHT", "path": "etc/conf.templates/distributed/10-directory.conf.template", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwODo1NDo0MVrOFt9W2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNzozNzoyOFrOFugxGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzczNTUxMg==", "bodyText": "It there a reason it's warp10. instead of directory. like the other keys in this file?", "url": "https://github.com/senx/warp10-platform/pull/669#discussion_r383735512", "createdAt": "2020-02-25T08:54:41Z", "author": {"login": "ftence"}, "path": "etc/conf.templates/distributed/10-directory.conf.template", "diffHunk": "@@ -286,3 +286,8 @@ directory.hbase.filter = false\n // Should we ignore the proxy settings when doing a streaming request?\n //\n #directory.streaming.noproxy =\n+\n+//\n+// Set to true to allow Directory queries with missing label selectors (using empty exact match)\n+//\n+warp10.absent.label.support = true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "379dfe71a35b7c43249cfaa5b0874da6a9fb0838"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMxNTY3NA==", "bodyText": "The reason was that the support for missing labels may go beyond Directory. As a matter of fact filterByMetadata should be modified to also support absent label selection if the config is enabled.\nI will move the config out of the directory config file and into the top warp one.", "url": "https://github.com/senx/warp10-platform/pull/669#discussion_r384315674", "createdAt": "2020-02-26T07:37:28Z", "author": {"login": "hbs"}, "path": "etc/conf.templates/distributed/10-directory.conf.template", "diffHunk": "@@ -286,3 +286,8 @@ directory.hbase.filter = false\n // Should we ignore the proxy settings when doing a streaming request?\n //\n #directory.streaming.noproxy =\n+\n+//\n+// Set to true to allow Directory queries with missing label selectors (using empty exact match)\n+//\n+warp10.absent.label.support = true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzczNTUxMg=="}, "originalCommit": {"oid": "379dfe71a35b7c43249cfaa5b0874da6a9fb0838"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3NjIxNjIxOnYy", "diffSide": "RIGHT", "path": "etc/conf.templates/standalone/10-directory.conf.template", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwODo1NDo1OVrOFt9XYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwODo1NDo1OVrOFt9XYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzczNTY1MA==", "bodyText": "Ditto.", "url": "https://github.com/senx/warp10-platform/pull/669#discussion_r383735650", "createdAt": "2020-02-25T08:54:59Z", "author": {"login": "ftence"}, "path": "etc/conf.templates/standalone/10-directory.conf.template", "diffHunk": "@@ -29,3 +29,8 @@ directory.stats.class.maxcardinality = 100\n // Maximum number of labels for which to report detailed stats in 'FINDSTATS'\n //\n directory.stats.labels.maxcardinality = 100\n+\n+//\n+// Set to true to allow Directory queries with missing label selectors (using empty exact match)\n+//\n+warp10.absent.label.support = true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "379dfe71a35b7c43249cfaa5b0874da6a9fb0838"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NTExMTE1OnYy", "diffSide": "RIGHT", "path": "warp10/src/main/java/io/warp10/continuum/gts/MetadataSelectorMatcher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMzoyNTo1MFrOFvSEFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMzoyNTo1MFrOFvSEFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEyMzM0OA==", "bodyText": "Shouldn't  it be null != inputAttributes && null != inputAttributes.get(label) ?\nAlso you could merge the if and the else if blocks because they do the same.", "url": "https://github.com/senx/warp10-platform/pull/669#discussion_r385123348", "createdAt": "2020-02-27T13:25:50Z", "author": {"login": "ftence"}, "path": "warp10/src/main/java/io/warp10/continuum/gts/MetadataSelectorMatcher.java", "diffHunk": "@@ -177,8 +212,19 @@ public boolean matches(Metadata metadata) {\n     } else {\n       // standard selector\n       if (null != this.labelsPatterns) {\n+        for (String label: this.missingLabels) {\n+          if (null != inputLabels && null != inputLabels.get(label)) {\n+            labelAndAttributeMatch = false;\n+            break;\n+          } else if (null != inputAttributes && null != inputLabels.get(label)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67ae8d49e06c19fd9658c75aaf8378366541a9bc"}, "originalPosition": 93}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1311, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}