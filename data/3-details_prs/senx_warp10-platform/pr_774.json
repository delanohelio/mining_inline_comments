{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI5MjQ0NzA0", "number": 774, "title": "Revamp gradle files and build script for cleaner build and publish", "bodyText": "", "createdAt": "2020-06-06T14:51:08Z", "url": "https://github.com/senx/warp10-platform/pull/774", "merged": true, "mergeCommit": {"oid": "9b02cb100233daa69ea794afd0d96fd5a3911f24"}, "closed": true, "closedAt": "2021-02-11T15:53:20Z", "author": {"login": "ftence"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcooaMcAH2gAyNDI5MjQ0NzA0OjVhM2JkNTZmYjMxNmU3NzE3N2M1NjUwZmQ0Njc3YTdlYWExNmUyZmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd4KK5kgFqTU4NTcwMzM4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5a3bd56fb316e77177c5650fd4677a7eaa16e2fb", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/5a3bd56fb316e77177c5650fd4677a7eaa16e2fb", "committedDate": "2020-06-06T14:47:52Z", "message": "Revamp gradle files and build script for smoother build and publish"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae613ea11fdd36d2c2db8da4092f1ec7e86b5e5a", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/ae613ea11fdd36d2c2db8da4092f1ec7e86b5e5a", "committedDate": "2020-06-06T14:50:58Z", "message": "Add missing newlines at end of files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bbf6fa0ada71812dcf5069759739a59f89fe9aa", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/6bbf6fa0ada71812dcf5069759739a59f89fe9aa", "committedDate": "2020-06-06T16:06:13Z", "message": "Address deprecated warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e6eb20e0d708ea4f32cbdd99d07fbb74cff71d2", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/4e6eb20e0d708ea4f32cbdd99d07fbb74cff71d2", "committedDate": "2020-06-12T09:01:15Z", "message": "Get right Gradle configuration for WarpScript POM"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79502f28b62a39c0338cea5602713e93e47dfef9", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/79502f28b62a39c0338cea5602713e93e47dfef9", "committedDate": "2020-07-07T11:55:10Z", "message": "Add sourcesJar tasks to create sources jars"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDE5MDE0", "url": "https://github.com/senx/warp10-platform/pull/774#pullrequestreview-451419014", "createdAt": "2020-07-20T08:56:28Z", "commit": {"oid": "79502f28b62a39c0338cea5602713e93e47dfef9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwODo1NjoyOFrOG0A6Fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQwODo1NjoyOFrOG0A6Fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE5NDAwNg==", "bodyText": "META-INF/*.RSA signatures may appear/disappear depending on dependencies. It is important that those files be removed otherwise the JVM may fail to validate repackaged classes if they initially had a signature.", "url": "https://github.com/senx/warp10-platform/pull/774#discussion_r457194006", "createdAt": "2020-07-20T08:56:28Z", "author": {"login": "hbs"}, "path": "warp10/build.gradle", "diffHunk": "@@ -43,171 +42,147 @@ dependencies {\n     //\n     // io.warp10 dependencies\n     //\n-    compile project(':crypto')\n-    compile project(':token')\n-    compile 'io.warp10:sensision:1.0.21'\n+    api project(':crypto')\n+    api project(':token')\n+    api 'io.warp10:sensision:1.0.21'\n \n-    compile 'joda-time:joda-time:2.2'\n-    compile 'org.apache.commons:commons-lang3:3.6'\n-    compile 'org.apache.commons:commons-math3:3.6'\n-    compile 'org.bouncycastle:bcprov-jdk16:1.46'\n+    api 'joda-time:joda-time:2.2'\n+    api 'org.apache.commons:commons-lang3:3.6'\n+    api 'org.apache.commons:commons-math3:3.6'\n+    api 'org.bouncycastle:bcprov-jdk16:1.46'\n \n     //\n     // Processing\n     //\n-    compile 'org.processing:core:3.0'\n+    api 'org.processing:core:3.0'\n \n     //\n     // Commons CLI\n     //\n-    compile 'commons-cli:commons-cli:1.3.1'\n+    api 'commons-cli:commons-cli:1.3.1'\n \n     //\n     // HBase 1.0.0\n     //\n-    compile 'org.apache.hbase:hbase-client:1.0.0'\n-    compile 'org.apache.hbase:hbase-examples:1.0.0'\n-    compile 'org.apache.hbase:hbase-common:1.0.0'\n-    compile 'org.apache.hbase:hbase-protocol:1.0.0'\n-\n-    compile 'org.eclipse.jetty:jetty-server:9.4.2.v20170220'\n-    compile 'org.eclipse.jetty.websocket:websocket-server:9.4.2.v20170220'\n-    compile 'org.eclipse.jetty.websocket:websocket-client:9.4.2.v20170220'\n-    compile 'com.netflix.curator:curator-x-discovery:1.3.3'\n-    compile 'com.fasterxml.jackson.core:jackson-databind:2.10.2'\n-    compile 'org.slf4j:slf4j-api:1.7.5'\n+    api 'org.apache.hbase:hbase-client:1.0.0'\n+    api 'org.apache.hbase:hbase-examples:1.0.0'\n+    api 'org.apache.hbase:hbase-common:1.0.0'\n+    api 'org.apache.hbase:hbase-protocol:1.0.0'\n+\n+    api 'org.eclipse.jetty:jetty-server:9.4.2.v20170220'\n+    api 'org.eclipse.jetty.websocket:websocket-server:9.4.2.v20170220'\n+    api 'org.eclipse.jetty.websocket:websocket-client:9.4.2.v20170220'\n+    api 'com.netflix.curator:curator-x-discovery:1.3.3'\n+    api 'com.fasterxml.jackson.core:jackson-databind:2.10.2'\n+    api 'org.slf4j:slf4j-api:1.7.5'\n \n     //\n     // FFT\n     //\n-    compile 'com.github.rwl:jtransforms:2.4.0'\n+    api 'com.github.rwl:jtransforms:2.4.0'\n \n     //\n     // Pyrolite\n     //\n-    compile 'net.razorvine:pyrolite:4.10'\n+    api 'net.razorvine:pyrolite:4.10'\n \n     //\n     // LevelDB\n     //\n-    compile 'org.fusesource.leveldbjni:leveldbjni-all:1.8'\n+    api 'org.fusesource.leveldbjni:leveldbjni-all:1.8'\n     // https://mvnrepository.com/artifact/org.openlabtesting.leveldbjni/leveldbjni-linux64-aarch64\n-    compile group: 'org.openlabtesting.leveldbjni', name: 'leveldbjni-linux64-aarch64', version: '1.8'\n+    api group: 'org.openlabtesting.leveldbjni', name: 'leveldbjni-linux64-aarch64', version: '1.8'\n \n-    compile 'org.iq80.leveldb:leveldb:0.12:uber'\n+    api 'org.iq80.leveldb:leveldb:0.12:uber'\n \n     //\n     // Worf\n     //\n-    compile 'jline:jline:2.13'\n+    api 'jline:jline:2.13'\n \n     //\n     // Mustache\n     //\n-    compile 'com.github.spullara.mustache.java:compiler:0.9.1'\n+    api 'com.github.spullara.mustache.java:compiler:0.9.1'\n \n     //\n     // Geo\n     //\n-    compile 'com.geoxp:geoxplib:1.0.0'\n-    compile(\"org.wololo:jts2geojson:0.10.0\")\n+    api 'com.geoxp:geoxplib:1.0.0'\n+    api 'org.wololo:jts2geojson:0.10.0'\n \n     //\n     // Java Merge Sort\n     //\n-    compile 'com.fasterxml.util:java-merge-sort:1.0.0'\n+    api 'com.fasterxml.util:java-merge-sort:1.0.0'\n \n     // @see http://www.mail-archive.com/dev@kafka.apache.org/msg03829.html\n-    compile(\"org.apache.kafka:kafka_2.11:0.8.2.2\") {\n+    api('org.apache.kafka:kafka_2.11:0.8.2.2') {\n         exclude module: 'jms'\n         exclude module: 'jmxtools'\n         exclude module: 'jmxri'\n     }\n-    testCompile 'junit:junit:4.6'\n-}\n-\n-jar {\n-    zip64 = true\n-\n-    manifest {\n-        attributes(\n-                \"Implementation-Title\": \"Warp 10\",\n-                \"Implementation-Vendor\": \"SenX\",\n-                \"Implementation-Version\": version)\n-    }\n+    testCompileOnly 'junit:junit:4.6'\n }\n \n task pack(type: Jar) {\n     zip64 = true\n-    ext.warpSuffixName = null != System.getProperty('warp') ? System.getProperty('warp') : \"\"\n-    appendix = \"${warpSuffixName}\"\n+    archiveAppendix = (null != System.getProperty('warp')) ? System.getProperty('warp') : \"\"\n \n     manifest {\n-        attributes(\"Main-Class\": \"io.warp10.standalone.Warp\")\n-        attributes(\"Implementation-Title\": \"Warp 10\")\n-        attributes(\"Implementation-Version\": version)\n+        attributes(\n+            \"Main-Class\": \"io.warp10.standalone.Warp\",\n+            \"Implementation-Title\": \"Warp 10\",\n+            \"Implementation-Vendor\": \"Warp 10\",\n+            \"Implementation-Version\": project.version\n+        )\n     }\n \n     from files(sourceSets.main.output.classesDirs)\n     from files(sourceSets.main.resources.srcDirs)\n     from {\n-        configurations.compile.collect {\n+        configurations.compileClasspath.collect {\n             it.isDirectory() ? it : zipTree(it).matching {\n                 exclude { it.toString().contains('/servlet-api') }\n-                exclude { it.toString().contains('jmh') }\n                 exclude { it.toString().contains('junit') }\n-                exclude { it.toString().contains('parquet') }\n             }\n         }\n     } {\n         exclude 'META-INF/*.DSA'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79502f28b62a39c0338cea5602713e93e47dfef9"}, "originalPosition": 184}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8eda04660549c6ca0170cca9fd920835b87ad24d", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/8eda04660549c6ca0170cca9fd920835b87ad24d", "committedDate": "2020-07-23T11:43:12Z", "message": "Make sure RSA signatures from dependencies are removed in warp10:pack"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1312dd800b7f15c1807924e9dda7368b4e5223be", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/1312dd800b7f15c1807924e9dda7368b4e5223be", "committedDate": "2020-07-29T08:04:31Z", "message": "Merge branch 'master' into gradle_revamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5785c9e90a31ab13b6ea797842db9c607d5a73d4", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/5785c9e90a31ab13b6ea797842db9c607d5a73d4", "committedDate": "2020-09-03T10:19:23Z", "message": "Merge branch 'master' into gradle_revamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3abe8d956f5a6a509268549f6ab10fc615408852", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/3abe8d956f5a6a509268549f6ab10fc615408852", "committedDate": "2020-11-10T16:43:32Z", "message": "Merge branch 'master' into gradle_revamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "521dce07cbab77cb148687a435ac7f03084654d1", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/521dce07cbab77cb148687a435ac7f03084654d1", "committedDate": "2020-11-13T10:56:24Z", "message": "Merge branch 'master' into gradle_revamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84a006ce6a6ba3f93883717729d94231f19ff65f", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/84a006ce6a6ba3f93883717729d94231f19ff65f", "committedDate": "2020-11-13T11:30:39Z", "message": "Address Gradle 7.0 deprecation warnings and fix compile->api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82a19b8a8c733703b1dbf870c43313c9c34434ed", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/82a19b8a8c733703b1dbf870c43313c9c34434ed", "committedDate": "2020-11-17T08:53:16Z", "message": "Avoid duplicate classes in the jar built by warp10:pack"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d6b7e5fdb2f814fbe558d952bb6c828004c3419", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/5d6b7e5fdb2f814fbe558d952bb6c828004c3419", "committedDate": "2021-01-11T11:46:54Z", "message": "Merge branch 'master' into gradle_revamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "641eb9f4e68b25f4ef3716511cbbf890d6c24872", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/641eb9f4e68b25f4ef3716511cbbf890d6c24872", "committedDate": "2021-01-11T13:07:55Z", "message": "Fix classpath"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e30e0ccba8ac2f1a739473cda6f793a66a44cc1", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/3e30e0ccba8ac2f1a739473cda6f793a66a44cc1", "committedDate": "2021-01-12T15:32:44Z", "message": "Remove transitive deps for hbase-examples and add comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9557f0277b3569eda8ea08fbb97b20a628ef9ba2", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/9557f0277b3569eda8ea08fbb97b20a628ef9ba2", "committedDate": "2021-01-13T13:58:43Z", "message": "Use runtime classpath instead of compile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f845590f1b7a35f7b720e39eb976010491aae4a7", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/f845590f1b7a35f7b720e39eb976010491aae4a7", "committedDate": "2021-01-13T14:18:44Z", "message": "Update copyright notices"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "882792e9db950fa03808aeae004ed56209935123", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/882792e9db950fa03808aeae004ed56209935123", "committedDate": "2021-02-08T09:54:20Z", "message": "Fix test dependencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg1NTE4NTQx", "url": "https://github.com/senx/warp10-platform/pull/774#pullrequestreview-585518541", "createdAt": "2021-02-08T13:52:36Z", "commit": {"oid": "882792e9db950fa03808aeae004ed56209935123"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOFQxMzo1MjozN1rOIhj64w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wOFQxMzo1Mjo1MlrOIhj7iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjA2MjQzNQ==", "bodyText": "Upgrade sensision to 1.0.23", "url": "https://github.com/senx/warp10-platform/pull/774#discussion_r572062435", "createdAt": "2021-02-08T13:52:37Z", "author": {"login": "steven-gueguen"}, "path": "token/build.gradle", "diffHunk": "@@ -29,38 +23,36 @@ sourceSets {\n }\n \n dependencies {\n-    testCompile 'junit:junit:4.6'\n-    testCompile 'org.slf4j:slf4j-log4j12:1.7.21'\n+    testImplementation 'junit:junit:4.6'\n+    testImplementation 'org.slf4j:slf4j-log4j12:1.7.21'\n \n     // WARP10 DEPENDENCIES\n-    compile project(':crypto')\n-    compile 'io.warp10:sensision:1.0.22'\n+    api project(':crypto')\n+    api 'io.warp10:sensision:1.0.22'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "882792e9db950fa03808aeae004ed56209935123"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjA2MjYwMA==", "bodyText": "Upgrade sensision to 1.0.23", "url": "https://github.com/senx/warp10-platform/pull/774#discussion_r572062600", "createdAt": "2021-02-08T13:52:52Z", "author": {"login": "steven-gueguen"}, "path": "warp10/build.gradle", "diffHunk": "@@ -43,171 +42,195 @@ dependencies {\n     //\n     // io.warp10 dependencies\n     //\n-    compile project(':crypto')\n-    compile project(':token')\n-    compile 'io.warp10:sensision:1.0.22'\n+    api project(':crypto')\n+    api project(':token')\n+    api 'io.warp10:sensision:1.0.22'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "882792e9db950fa03808aeae004ed56209935123"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47b278447d94cd56364939f22309e15af239b48f", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/47b278447d94cd56364939f22309e15af239b48f", "committedDate": "2021-02-08T15:42:37Z", "message": "Bump sensision dep to 1.0.23"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg1NzAzMzg0", "url": "https://github.com/senx/warp10-platform/pull/774#pullrequestreview-585703384", "createdAt": "2021-02-08T16:47:57Z", "commit": {"oid": "47b278447d94cd56364939f22309e15af239b48f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3364, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}