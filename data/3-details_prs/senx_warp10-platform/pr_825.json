{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxODA5OTk1", "number": 825, "title": "Added configuration for Jetty thread pool and queue size", "bodyText": "", "createdAt": "2020-09-08T06:33:50Z", "url": "https://github.com/senx/warp10-platform/pull/825", "merged": true, "mergeCommit": {"oid": "a27de4604f9cd27fe11a1b61d5baac99a8df4f4a"}, "closed": true, "closedAt": "2020-09-08T09:38:34Z", "author": {"login": "hbs"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGxp63gH2gAyNDgxODA5OTk1OjU0MmQyNTExNGU2MWE3MzE3ZDcxOWY4NDRiYmIyYjVmMmYxOGEwN2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdG0P39gFqTQ4Mzk2MDgzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "542d25114e61a7317d719f844bbb2b5f2f18a07b", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/542d25114e61a7317d719f844bbb2b5f2f18a07b", "committedDate": "2020-09-08T06:31:55Z", "message": "Added configuration for Jetty thread pool and queue size in egress/standalone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "754d59bb73bb64ceed5cc84a35f2a2bb24c7829b", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/754d59bb73bb64ceed5cc84a35f2a2bb24c7829b", "committedDate": "2020-09-08T07:28:21Z", "message": "Fixed comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzODcwNzA1", "url": "https://github.com/senx/warp10-platform/pull/825#pullrequestreview-483870705", "createdAt": "2020-09-08T07:37:41Z", "commit": {"oid": "754d59bb73bb64ceed5cc84a35f2a2bb24c7829b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNzozNzo0MVrOHOQhxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwNzo0MzowN1rOHOQtuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcxMjkwMA==", "bodyText": "Defaults to 200.", "url": "https://github.com/senx/warp10-platform/pull/825#discussion_r484712900", "createdAt": "2020-09-08T07:37:41Z", "author": {"login": "ftence"}, "path": "etc/conf.templates/distributed/10-egress.conf.template", "diffHunk": "@@ -48,6 +48,16 @@ egress.port = 8881\n //\n egress.host = 127.0.0.1\n \n+//\n+// Number of threads in Jetty's Thread Pool", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "754d59bb73bb64ceed5cc84a35f2a2bb24c7829b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcxMzE0Mg==", "bodyText": "Defaults to 200.", "url": "https://github.com/senx/warp10-platform/pull/825#discussion_r484713142", "createdAt": "2020-09-08T07:38:05Z", "author": {"login": "ftence"}, "path": "etc/conf.templates/standalone/00-warp.conf.template", "diffHunk": "@@ -92,6 +92,16 @@ standalone.host = 127.0.0.1\n //\n standalone.port = 8080\n \n+//\n+// Number of threads in Jetty's Thread Pool", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "754d59bb73bb64ceed5cc84a35f2a2bb24c7829b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcxNTI2MA==", "bodyText": "Remove Server at the start of the line and remove the following line.", "url": "https://github.com/senx/warp10-platform/pull/825#discussion_r484715260", "createdAt": "2020-09-08T07:41:47Z", "author": {"login": "ftence"}, "path": "warp10/src/main/java/io/warp10/continuum/egress/Egress.java", "diffHunk": "@@ -103,6 +106,16 @@ public Egress(KeyStore keystore, Properties props, boolean fetcher) throws Excep\n \n     List<Connector> connectors = new ArrayList<Connector>();\n     \n+    int maxThreads = Integer.parseInt(props.getProperty(Configuration.EGRESS_JETTY_THREADPOOL, DEFAULT_THREADPOOL_SIZE));\n+    BlockingArrayQueue<Runnable> queue = null;\n+    \n+    if (props.containsKey(Configuration.EGRESS_JETTY_MAXQUEUESIZE)) {\n+      int queuesize = Integer.parseInt(props.getProperty(Configuration.EGRESS_JETTY_MAXQUEUESIZE));\n+      queue = new BlockingArrayQueue<Runnable>(queuesize);\n+    }\n+    \n+    Server server = new Server(new QueuedThreadPool(maxThreads, 8, 60000, queue));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "754d59bb73bb64ceed5cc84a35f2a2bb24c7829b"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcxNTk2Mw==", "bodyText": "Add DEFAULT to the name to make it clear it is a default value.", "url": "https://github.com/senx/warp10-platform/pull/825#discussion_r484715963", "createdAt": "2020-09-08T07:43:07Z", "author": {"login": "ftence"}, "path": "warp10/src/main/java/io/warp10/standalone/Warp.java", "diffHunk": "@@ -72,6 +74,8 @@\n \n public class Warp extends WarpDist implements Runnable {\n \n+  private static final String STANDALONE_THREADPOOL_SIZE = \"200\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "754d59bb73bb64ceed5cc84a35f2a2bb24c7829b"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfb54b9fd802bc42bc58fced78bbea9cce20fc9d", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/cfb54b9fd802bc42bc58fced78bbea9cce20fc9d", "committedDate": "2020-09-08T07:56:44Z", "message": "Addressed PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e643b36eea11d8a0214af322dda6723a547e1aa", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/7e643b36eea11d8a0214af322dda6723a547e1aa", "committedDate": "2020-09-08T08:36:15Z", "message": "Added comment on pool size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71e4e2d5c8895d091bd4f858f4d497c4e45e6dae", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/71e4e2d5c8895d091bd4f858f4d497c4e45e6dae", "committedDate": "2020-09-08T08:56:00Z", "message": "Fixed logger"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzOTYwODM5", "url": "https://github.com/senx/warp10-platform/pull/825#pullrequestreview-483960839", "createdAt": "2020-09-08T09:33:11Z", "commit": {"oid": "71e4e2d5c8895d091bd4f858f4d497c4e45e6dae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3206, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}