{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxODk1NTgy", "number": 720, "title": "Avoid a copy when building List from stack", "bodyText": "When Stack.popn() is called, it copies the requested elements in the stack array in a new array. In TOLIST, this new array is wrapped in a List using Arrays.asList, which does not copy the data. However when using either addAll or the ArrayList constructor, it calls toArray() on the wrapped array which does a clone.\nThis PR avoids this last unneeded copy by assigning directly the array produced by popn() to the internal array of the ArrayList. It also uses System.arraycopy which is much faster.\nPerf gains expressed as % of time taken for a ->LIST using the PR code wrt the pre-PR code ie 100 * time_pr / time_pre_pr.\n\n\n\nNumber of elements\n% time taken\n\n\n\n\n1\n60%\n\n\n10\n65%\n\n\n100\n45%\n\n\n1000\n14%\n\n\n10000\n11%\n\n\n10000\n10%\n\n\n\nThis PR makes STACKTOLIST work on a stack which has reached the depth limit.", "createdAt": "2020-04-10T12:47:24Z", "url": "https://github.com/senx/warp10-platform/pull/720", "merged": true, "mergeCommit": {"oid": "4012368f2036b88ed0b3b48bfb1659b725caaf2e"}, "closed": true, "closedAt": "2020-04-10T14:36:27Z", "author": {"login": "ftence"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWORMYAH2gAyNDAxODk1NTgyOjdjOGUwZTRiYzJkZmY3ZTE3NmY2ZDAzMjQ1YjU0NDdlMDQzN2VlNmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWQ3JeAFqTM5MTQzMzk2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7c8e0e4bc2dff7e176f6d03245b5447e0437ee6e", "author": {"user": {"login": "ftence", "name": "Fabien Tenc\u00e9"}}, "url": "https://github.com/senx/warp10-platform/commit/7c8e0e4bc2dff7e176f6d03245b5447e0437ee6e", "committedDate": "2020-04-10T10:09:52Z", "message": "Avoid a copy when building List from stack"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDMzOTY1", "url": "https://github.com/senx/warp10-platform/pull/720#pullrequestreview-391433965", "createdAt": "2020-04-10T13:11:07Z", "commit": {"oid": "7c8e0e4bc2dff7e176f6d03245b5447e0437ee6e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMzoxMTowOFrOGD6Fjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxMzoxMTowOFrOGD6Fjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc1MDYwNw==", "bodyText": "Does this include the ArrayItr class too?", "url": "https://github.com/senx/warp10-platform/pull/720#discussion_r406750607", "createdAt": "2020-04-10T13:11:08Z", "author": {"login": "hbs"}, "path": "warpscript/build.gradle", "diffHunk": "@@ -46,6 +46,7 @@ jar {\n     include 'io/warp10/WarpURLDecoder.class'\n     include 'io/warp10/DoubleUtils.class'\n     include 'io/warp10/FloatUtils.class'\n+    include 'io/warp10/ListWrapper.class'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c8e0e4bc2dff7e176f6d03245b5447e0437ee6e"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3310, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}