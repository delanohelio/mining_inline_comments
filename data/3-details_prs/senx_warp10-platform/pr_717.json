{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNjI4NDM2", "number": 717, "title": "Config fetch", "bodyText": "Extract all required configuration values in a single JVM run thus speeding up the launch process.", "createdAt": "2020-04-09T20:27:20Z", "url": "https://github.com/senx/warp10-platform/pull/717", "merged": true, "mergeCommit": {"oid": "da248b60b385c896c7bfed1f03d28e7c926cb32f"}, "closed": true, "closedAt": "2020-04-14T20:51:53Z", "author": {"login": "hbs"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWCcnegH2gAyNDAxNjI4NDM2OjEzMmU0NWRlZWQxMmE0YTVmZDc2ZDJiNzYyNDFjOWRkMjlhMDcyZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXmSncAFqTM5MzEwODYxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "132e45deed12a4a5fd76d2b76241c9dd29a072d6", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/132e45deed12a4a5fd76d2b76241c9dd29a072d6", "committedDate": "2020-04-09T20:23:29Z", "message": "Changed config fetch by launching JVM once instead of 3 times"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyOTUyNjkw", "url": "https://github.com/senx/warp10-platform/pull/717#pullrequestreview-392952690", "createdAt": "2020-04-14T13:57:25Z", "commit": {"oid": "132e45deed12a4a5fd76d2b76241c9dd29a072d6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxMzo1NzoyNlrOGFP63g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNDoxMzo1NlrOGFQsew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE1Njg5NA==", "bodyText": "Should be ^leveldb\\.home=.", "url": "https://github.com/senx/warp10-platform/pull/717#discussion_r408156894", "createdAt": "2020-04-14T13:57:26Z", "author": {"login": "ftence"}, "path": "warp10/src/main/sh/warp10-standalone.sh", "diffHunk": "@@ -388,15 +388,21 @@ start() {\n   getConfigFiles\n \n   #\n-  # Config file exists ?\n+  # Config file exists?\n   #\n   if [[ -z \"${CONFIG_FILES}\" ]]; then\n     echo \"Config file does not exist - Use 'bootstrap' command before the very first launch (it must be run as root)\"\n     echo \"WARNING: Since version 2.1.0, Warp 10 can use multiple configuration files. The files have to be present in ${WARP10_CONFIG_DIR}\"\n     exit 1\n   fi\n \n-  LEVELDB_HOME=\"`${JAVACMD} -Xms64m -Xmx64m -XX:+UseG1GC -cp ${WARP10_CP} io.warp10.WarpConfig ${CONFIG_FILES} 'leveldb.home' | grep 'leveldb.home' | sed -e 's/^.*=//'`\"\n+  //\n+  // Extract configuration keys\n+  //\n+\n+  CONFIG_KEYS=$(${JAVACMD} -Xms64m -Xmx64m -XX:+UseG1GC -cp ${WARP10_CP} io.warp10.WarpConfig ${CONFIG_FILES} . 'leveldb.home' 'standalone.host' 'standalone.port'|grep -e '^@CONF@ '|sed -e 's/^@CONF@ //')\n+\n+  LEVELDB_HOME=\"$(echo \"${CONFIG_KEYS}\"|grep -e '^leveldb.home='| sed -e 's/^.*=//')\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "132e45deed12a4a5fd76d2b76241c9dd29a072d6"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE1NzE3NA==", "bodyText": "^standalone\\.host=", "url": "https://github.com/senx/warp10-platform/pull/717#discussion_r408157174", "createdAt": "2020-04-14T13:57:48Z", "author": {"login": "ftence"}, "path": "warp10/src/main/sh/warp10-standalone.sh", "diffHunk": "@@ -417,8 +423,8 @@ start() {\n     ${JAVACMD} ${JAVA_OPTS} -cp ${WARP10_CP} ${WARP10_INIT} ${LEVELDB_HOME} >> ${WARP10_HOME}/logs/warp10.log 2>&1\n   fi\n \n-  WARP10_LISTENSTO_HOST=\"`${JAVACMD} -Xms64m -Xmx64m -XX:+UseG1GC -cp ${WARP10_CP} io.warp10.WarpConfig ${CONFIG_FILES} 'standalone.host' | grep 'standalone.host' | sed -e 's/^.*=//'`\"\n-  WARP10_LISTENSTO_PORT=\"`${JAVACMD} -Xms64m -Xmx64m -XX:+UseG1GC -cp ${WARP10_CP} io.warp10.WarpConfig ${CONFIG_FILES} 'standalone.port' | grep 'standalone.port' | sed -e 's/^.*=//'`\"\n+  WARP10_LISTENSTO_HOST=\"$(echo \"${CONFIG_KEYS}\"|grep -e '^standalone.host='| sed -e 's/^.*=//')\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "132e45deed12a4a5fd76d2b76241c9dd29a072d6"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE1NzM0Mw==", "bodyText": "^standalone\\.port=", "url": "https://github.com/senx/warp10-platform/pull/717#discussion_r408157343", "createdAt": "2020-04-14T13:58:04Z", "author": {"login": "ftence"}, "path": "warp10/src/main/sh/warp10-standalone.sh", "diffHunk": "@@ -417,8 +423,8 @@ start() {\n     ${JAVACMD} ${JAVA_OPTS} -cp ${WARP10_CP} ${WARP10_INIT} ${LEVELDB_HOME} >> ${WARP10_HOME}/logs/warp10.log 2>&1\n   fi\n \n-  WARP10_LISTENSTO_HOST=\"`${JAVACMD} -Xms64m -Xmx64m -XX:+UseG1GC -cp ${WARP10_CP} io.warp10.WarpConfig ${CONFIG_FILES} 'standalone.host' | grep 'standalone.host' | sed -e 's/^.*=//'`\"\n-  WARP10_LISTENSTO_PORT=\"`${JAVACMD} -Xms64m -Xmx64m -XX:+UseG1GC -cp ${WARP10_CP} io.warp10.WarpConfig ${CONFIG_FILES} 'standalone.port' | grep 'standalone.port' | sed -e 's/^.*=//'`\"\n+  WARP10_LISTENSTO_HOST=\"$(echo \"${CONFIG_KEYS}\"|grep -e '^standalone.host='| sed -e 's/^.*=//')\"\n+  WARP10_LISTENSTO_PORT=\"$(echo \"${CONFIG_KEYS}\"|grep -e '^standalone.port='| sed -e 's/^.*=//')\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "132e45deed12a4a5fd76d2b76241c9dd29a072d6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE2MzU4NA==", "bodyText": "Not bash comments!", "url": "https://github.com/senx/warp10-platform/pull/717#discussion_r408163584", "createdAt": "2020-04-14T14:05:55Z", "author": {"login": "ftence"}, "path": "warp10/src/main/sh/warp10-standalone.sh", "diffHunk": "@@ -388,15 +388,21 @@ start() {\n   getConfigFiles\n \n   #\n-  # Config file exists ?\n+  # Config file exists?\n   #\n   if [[ -z \"${CONFIG_FILES}\" ]]; then\n     echo \"Config file does not exist - Use 'bootstrap' command before the very first launch (it must be run as root)\"\n     echo \"WARNING: Since version 2.1.0, Warp 10 can use multiple configuration files. The files have to be present in ${WARP10_CONFIG_DIR}\"\n     exit 1\n   fi\n \n-  LEVELDB_HOME=\"`${JAVACMD} -Xms64m -Xmx64m -XX:+UseG1GC -cp ${WARP10_CP} io.warp10.WarpConfig ${CONFIG_FILES} 'leveldb.home' | grep 'leveldb.home' | sed -e 's/^.*=//'`\"\n+  //\n+  // Extract configuration keys\n+  //", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "132e45deed12a4a5fd76d2b76241c9dd29a072d6"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE2OTU5NQ==", "bodyText": "I found it clearer to put a space before and after |, all following lines are concerned.", "url": "https://github.com/senx/warp10-platform/pull/717#discussion_r408169595", "createdAt": "2020-04-14T14:13:56Z", "author": {"login": "ftence"}, "path": "warp10/src/main/sh/warp10-standalone.sh", "diffHunk": "@@ -388,15 +388,21 @@ start() {\n   getConfigFiles\n \n   #\n-  # Config file exists ?\n+  # Config file exists?\n   #\n   if [[ -z \"${CONFIG_FILES}\" ]]; then\n     echo \"Config file does not exist - Use 'bootstrap' command before the very first launch (it must be run as root)\"\n     echo \"WARNING: Since version 2.1.0, Warp 10 can use multiple configuration files. The files have to be present in ${WARP10_CONFIG_DIR}\"\n     exit 1\n   fi\n \n-  LEVELDB_HOME=\"`${JAVACMD} -Xms64m -Xmx64m -XX:+UseG1GC -cp ${WARP10_CP} io.warp10.WarpConfig ${CONFIG_FILES} 'leveldb.home' | grep 'leveldb.home' | sed -e 's/^.*=//'`\"\n+  //\n+  // Extract configuration keys\n+  //\n+\n+  CONFIG_KEYS=$(${JAVACMD} -Xms64m -Xmx64m -XX:+UseG1GC -cp ${WARP10_CP} io.warp10.WarpConfig ${CONFIG_FILES} . 'leveldb.home' 'standalone.host' 'standalone.port'|grep -e '^@CONF@ '|sed -e 's/^@CONF@ //')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "132e45deed12a4a5fd76d2b76241c9dd29a072d6"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39e9503149971f0c0470ef3416eb1aaf0a74f6b2", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/39e9503149971f0c0470ef3416eb1aaf0a74f6b2", "committedDate": "2020-04-14T14:37:25Z", "message": "Merge branch 'master' of github.com:senx/warp10-platform into config-fetch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c29514ebb2248c84ea586fcd55f2e6684258855", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/0c29514ebb2248c84ea586fcd55f2e6684258855", "committedDate": "2020-04-14T14:53:02Z", "message": "Addressed PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7240a9a605d0071f87a6bc20a5d73228f9f94ff", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/e7240a9a605d0071f87a6bc20a5d73228f9f94ff", "committedDate": "2020-04-14T15:49:50Z", "message": "Addressed PR comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMTA4NjE1", "url": "https://github.com/senx/warp10-platform/pull/717#pullrequestreview-393108615", "createdAt": "2020-04-14T16:43:04Z", "commit": {"oid": "e7240a9a605d0071f87a6bc20a5d73228f9f94ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3304, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}