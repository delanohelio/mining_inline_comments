{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MDIxMjg1", "number": 690, "title": "Adds activeafter/quietafter params to /delete requests and a metaonly option", "bodyText": "", "createdAt": "2020-03-10T09:25:26Z", "url": "https://github.com/senx/warp10-platform/pull/690", "merged": true, "mergeCommit": {"oid": "de4f82353639a04034577c62265a65e51a4dfef9"}, "closed": true, "closedAt": "2020-03-20T16:56:53Z", "author": {"login": "hbs"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcLYLl9AH2gAyMzg2MDIxMjg1OmI1ZDBmOWIwNWJkNWZjYjM2ODZhN2Y3MDUxNzk2NGM5ZjJlMWUxOGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPiUPzAFqTM3ODU4ODAzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b5d0f9b05bd5fcb3686a7f70517964c9f2e1e18d", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/b5d0f9b05bd5fcb3686a7f70517964c9f2e1e18d", "committedDate": "2020-03-07T17:29:38Z", "message": "Initial commit. Delete options initially for Warp 10 Accelerator, extended for all deletes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "628e0237367f3e7e32d072d099fc96e5e2f54ff8", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/628e0237367f3e7e32d072d099fc96e5e2f54ff8", "committedDate": "2020-03-08T09:52:41Z", "message": "Disabled data deletes when nodata is true"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxOTE5MzAx", "url": "https://github.com/senx/warp10-platform/pull/690#pullrequestreview-371919301", "createdAt": "2020-03-10T12:49:07Z", "commit": {"oid": "628e0237367f3e7e32d072d099fc96e5e2f54ff8"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjo0OTowN1rOF0NUdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjo1MTo0NFrOF0NaPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI4ODUwMA==", "bodyText": "I would propose deletemeta as HTTP parameter here instead of \"nodata\". IMO, this would made more sence for a user", "url": "https://github.com/senx/warp10-platform/pull/690#discussion_r390288500", "createdAt": "2020-03-10T12:49:07Z", "author": {"login": "aurrelhebert"}, "path": "warp10/src/main/java/io/warp10/continuum/store/Constants.java", "diffHunk": "@@ -376,6 +376,7 @@\n   public static final String HTTP_PARAM_SAMPLE = \"sample\";\n   public static final String HTTP_PARAM_PREBOUNDARY = \"boundary.pre\";\n   public static final String HTTP_PARAM_POSTBOUNDARY = \"boundary.post\";\n+  public static final String HTTP_PARAM_NODATA = \"nodata\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "628e0237367f3e7e32d072d099fc96e5e2f54ff8"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI4OTk4MQ==", "bodyText": "When the nodata (or deletemeta) option is set, we should consider it's correspond to a deleteallcall and not throw this error.", "url": "https://github.com/senx/warp10-platform/pull/690#discussion_r390289981", "createdAt": "2020-03-10T12:51:44Z", "author": {"login": "aurrelhebert"}, "path": "warp10/src/main/java/io/warp10/continuum/ingress/Ingress.java", "diffHunk": "@@ -1545,6 +1545,22 @@ public void handleDelete(String target, Request baseRequest, HttpServletRequest\n         throw new IOException(\"Parameter \" + Constants.HTTP_PARAM_DELETEALL + \" should be set when deleting a full range.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "628e0237367f3e7e32d072d099fc96e5e2f54ff8"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "437de51fcd1bfe57c27d344106f1e1aa9da9d582", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/437de51fcd1bfe57c27d344106f1e1aa9da9d582", "committedDate": "2020-03-10T16:31:45Z", "message": "Addressed PR comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNzY3NTg2", "url": "https://github.com/senx/warp10-platform/pull/690#pullrequestreview-372767586", "createdAt": "2020-03-11T13:42:41Z", "commit": {"oid": "437de51fcd1bfe57c27d344106f1e1aa9da9d582"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTAyMjk5", "url": "https://github.com/senx/warp10-platform/pull/690#pullrequestreview-378502299", "createdAt": "2020-03-20T13:54:38Z", "commit": {"oid": "437de51fcd1bfe57c27d344106f1e1aa9da9d582"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1NDozOFrOF5UppA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxMzo1NDozOFrOF5UppA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY1MTQ5Mg==", "bodyText": "Not related to these lines but does the same test has to be applied in the finally?\nAlso in the finally, if metaonly, completeDeletion should not be checked.", "url": "https://github.com/senx/warp10-platform/pull/690#discussion_r395651492", "createdAt": "2020-03-20T13:54:38Z", "author": {"login": "ftence"}, "path": "warp10/src/main/java/io/warp10/continuum/ingress/Ingress.java", "diffHunk": "@@ -1772,7 +1807,10 @@ public void close() throws Exception {\n                   continue;\n                 }\n               }\n-              pushDeleteMessage(start, end, minage, metadata);\n+              \n+              if (!metaonly) {\n+                pushDeleteMessage(start, end, minage, metadata);\n+              }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "437de51fcd1bfe57c27d344106f1e1aa9da9d582"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca17be5959a7da75ee4986d3ac39e8d61f396bd4", "author": {"user": {"login": "hbs", "name": "Mathias Herberts"}}, "url": "https://github.com/senx/warp10-platform/commit/ca17be5959a7da75ee4986d3ac39e8d61f396bd4", "committedDate": "2020-03-20T14:34:00Z", "message": "Avoid calling pushDeleteMessage when metaonly is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTg4MDMx", "url": "https://github.com/senx/warp10-platform/pull/690#pullrequestreview-378588031", "createdAt": "2020-03-20T15:33:50Z", "commit": {"oid": "ca17be5959a7da75ee4986d3ac39e8d61f396bd4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3459, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}