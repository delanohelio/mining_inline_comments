{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3MTMwNzA0", "number": 266, "title": "[FAI-191] Implement test for Grafana dashboards in Kogito metrics", "bodyText": "@r00ta @danielezonca\nThere is the first version of tests for Grafana and Prometheus integration in metrics example. I think there are few points for discussion:\n\nIt might be more time consuming to use container tests than usual Quarkus tests, which may result in longer build. Do we want these tests to be part of main build or should we use some special profile for these tests.\nI use Maven failsafe plugin for Grafana tests. It seems not usual in this repo, but it is necessary because Docker build needs executable jar to build the image. Any objections or suggestions?", "createdAt": "2020-06-03T11:09:57Z", "url": "https://github.com/kiegroup/kogito-examples/pull/266", "merged": true, "mergeCommit": {"oid": "78fd52ca5cff883e451d3098e5b6a5cf9b379f89"}, "closed": true, "closedAt": "2020-06-04T15:04:19Z", "author": {"login": "jiripetrlik"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnngP5gBqjM0MDE2NDQ0NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcn_S9BgFqTQyNDUzNDE0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e45c57580cccd82dac4329d66346fd3e54eaf938", "author": {"user": {"login": "jiripetrlik", "name": "Jiri Petrlik"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/e45c57580cccd82dac4329d66346fd3e54eaf938", "committedDate": "2020-06-03T11:07:57Z", "message": "[FAI-191] Implemente test for Grafana dashboards in Kogito metrics example"}, "afterCommit": {"oid": "a481247cbe75b456f2fe9c34dd84483a44301651", "author": {"user": {"login": "jiripetrlik", "name": "Jiri Petrlik"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/a481247cbe75b456f2fe9c34dd84483a44301651", "committedDate": "2020-06-03T11:10:19Z", "message": "[FAI-191] Implemente test for Grafana dashboards in Kogito metrics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNDY3MzA0", "url": "https://github.com/kiegroup/kogito-examples/pull/266#pullrequestreview-423467304", "createdAt": "2020-06-03T11:39:58Z", "commit": {"oid": "a481247cbe75b456f2fe9c34dd84483a44301651"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMTozOTo1OFrOGeX8_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMTozOTo1OFrOGeX8_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDUwMjkwOQ==", "bodyText": "Can you please use maven-resources-plugin to copy resources instead of maven-antrun-plugin?\nhttp://maven.apache.org/plugins/maven-resources-plugin/examples/copy-resources.html", "url": "https://github.com/kiegroup/kogito-examples/pull/266#discussion_r434502909", "createdAt": "2020-06-03T11:39:58Z", "author": {"login": "danielezonca"}, "path": "dmn-drools-quarkus-metrics/pom.xml", "diffHunk": "@@ -82,6 +92,41 @@\n           </execution>\n         </executions>\n       </plugin>\n+      <plugin>\n+        <artifactId>maven-antrun-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <phase>package</phase>\n+            <goals>\n+              <goal>run</goal>\n+            </goals>\n+            <configuration>\n+              <tasks>\n+                <copy todir=\"${project.basedir}/docker-compose/grafana/provisioning/dashboards\">\n+                  <fileset dir=\"${project.build.directory}/generated-resources/kogito/dashboards\"/>\n+                </copy>\n+              </tasks>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a481247cbe75b456f2fe9c34dd84483a44301651"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNDk1MDE3", "url": "https://github.com/kiegroup/kogito-examples/pull/266#pullrequestreview-423495017", "createdAt": "2020-06-03T12:20:20Z", "commit": {"oid": "a481247cbe75b456f2fe9c34dd84483a44301651"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMjoyMDoyMFrOGeZQHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMjoyMDoyMFrOGeZQHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDUyNDE5MQ==", "bodyText": "Just a minor thing: since the injection of the dashboards was performed in the run-compose.sh and now it is removed, we should insert the instructions here (for example specify where to find the dashboards). wdyt?", "url": "https://github.com/kiegroup/kogito-examples/pull/266#discussion_r434524191", "createdAt": "2020-06-03T12:20:20Z", "author": {"login": "r00ta"}, "path": "dmn-drools-quarkus-metrics/README.md", "diffHunk": "@@ -70,9 +70,9 @@ You can use these default dashboards, or you can personalize them and use your c\n \n ### Compile and Run in Local Dev Mode\n \n-A script `docker-compose/run-compose.sh` is provided to demonstrate how to inject the generated dashboards in the volume of the grafana container: \n-1. the generated dashboards are copied from `target/resources/dashboards/` to the directory `docker-compose/grafana/provisioning/dashboards`. \n-2. `docker-compose` is run. \n+It is possible to use `docker-compose` to demonstrate how to inject the generated dashboards in the volume of the grafana container:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a481247cbe75b456f2fe9c34dd84483a44301651"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76cb164f0f29ecd0a60dfcd727cfc8b83886f38b", "author": {"user": {"login": "jiripetrlik", "name": "Jiri Petrlik"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/76cb164f0f29ecd0a60dfcd727cfc8b83886f38b", "committedDate": "2020-06-04T10:15:27Z", "message": "[FAI-191] Implemente test for Grafana dashboards in Kogito metrics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a481247cbe75b456f2fe9c34dd84483a44301651", "author": {"user": {"login": "jiripetrlik", "name": "Jiri Petrlik"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/a481247cbe75b456f2fe9c34dd84483a44301651", "committedDate": "2020-06-03T11:10:19Z", "message": "[FAI-191] Implemente test for Grafana dashboards in Kogito metrics"}, "afterCommit": {"oid": "76cb164f0f29ecd0a60dfcd727cfc8b83886f38b", "author": {"user": {"login": "jiripetrlik", "name": "Jiri Petrlik"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/76cb164f0f29ecd0a60dfcd727cfc8b83886f38b", "committedDate": "2020-06-04T10:15:27Z", "message": "[FAI-191] Implemente test for Grafana dashboards in Kogito metrics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MzUwMjU4", "url": "https://github.com/kiegroup/kogito-examples/pull/266#pullrequestreview-424350258", "createdAt": "2020-06-04T11:31:14Z", "commit": {"oid": "76cb164f0f29ecd0a60dfcd727cfc8b83886f38b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NTM0MTQ5", "url": "https://github.com/kiegroup/kogito-examples/pull/266#pullrequestreview-424534149", "createdAt": "2020-06-04T14:53:51Z", "commit": {"oid": "76cb164f0f29ecd0a60dfcd727cfc8b83886f38b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4481, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}