{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyMjM3Mzk4", "number": 428, "title": "KOGITO-3725: Enable Travels and Visas tests", "bodyText": "JIRA: https://issues.redhat.com/browse/KOGITO-3725\nMany thanks for submitting your Pull Request \u2764\ufe0f!\nPlease make sure that your PR meets the following requirements:\nWARNING! Please make sure you are opening your PR against master branch!\n\n You have read the contributors guide\n Pull Request title is properly formatted: KOGITO-XYZ Subject\n Pull Request title contains the target branch if not targeting master: [0.9.x] KOGITO-XYZ Subject\n Pull Request contains link to the JIRA issue\n Pull Request contains link to any dependent or related Pull Request\n Pull Request contains description of the issue\n Pull Request does not include fixes for issues other than the main ticket", "createdAt": "2020-10-29T12:24:30Z", "url": "https://github.com/kiegroup/kogito-examples/pull/428", "merged": true, "mergeCommit": {"oid": "49056c38ca27cd3c71c44a7429573604f38ccf16"}, "closed": true, "closedAt": "2020-10-29T15:19:56Z", "author": {"login": "Sgitario"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXRSonABqjM5MzYwNTk2NDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXSUrLAFqTUxOTY3MjA3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a75b88019adb70e249ccf37435ef363b40914f7", "author": {"user": {"login": "Sgitario", "name": "Jose Carvajal"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/2a75b88019adb70e249ccf37435ef363b40914f7", "committedDate": "2020-10-29T12:22:50Z", "message": "KOGITO-3725: Enable Travels and Visas tests"}, "afterCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53", "author": {"user": {"login": "Sgitario", "name": "Jose Carvajal"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/01ba5da50d03cbed3169a185d401150ea5ac6d53", "committedDate": "2020-10-29T12:25:59Z", "message": "KOGITO-3725: Enable Travels and Visas tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NjEwMzg5", "url": "https://github.com/kiegroup/kogito-examples/pull/428#pullrequestreview-519610389", "createdAt": "2020-10-29T12:26:55Z", "commit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyNjo1NVrOHqZatw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyNjo1NVrOHqZatw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxODY3OQ==", "bodyText": "This issue was already fixed and the app works without this dependency. Removing it.", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514218679", "createdAt": "2020-10-29T12:26:55Z", "author": {"login": "Sgitario"}, "path": "kogito-travel-agency/extended/visas/pom.xml", "diffHunk": "@@ -70,11 +70,6 @@\n       <groupId>org.kie.kogito</groupId>\n       <artifactId>process-management-addon</artifactId>\n     </dependency>\n-    <!-- Needed because of this: https://github.com/quarkusio/quarkus/issues/7809 . Adding the resteasy extension does not fix it. -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NjEwNTQy", "url": "https://github.com/kiegroup/kogito-examples/pull/428#pullrequestreview-519610542", "createdAt": "2020-10-29T12:27:07Z", "commit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyNzowN1rOHqZbKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyNzowN1rOHqZbKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxODc5Mw==", "bodyText": "This issue was already fixed and the app works without this dependency. Removing it.", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514218793", "createdAt": "2020-10-29T12:27:07Z", "author": {"login": "Sgitario"}, "path": "kogito-travel-agency/extended/travels/pom.xml", "diffHunk": "@@ -89,13 +93,9 @@\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n-      <groupId>io.quarkus</groupId>\n-      <artifactId>quarkus-smallrye-openapi</artifactId>\n-    </dependency>\n-    <!-- Needed because of this: https://github.com/quarkusio/quarkus/issues/7809 . Adding the resteasy extension does not fix it. -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NjExNjY3", "url": "https://github.com/kiegroup/kogito-examples/pull/428#pullrequestreview-519611667", "createdAt": "2020-10-29T12:28:34Z", "commit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyODozNVrOHqZeTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyODozNVrOHqZeTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxOTU5OQ==", "bodyText": "@ricardozanini this is a workaround I had to add because of the changes in kiegroup/kogito-runtimes#779.\nI think we should raise a ticket so users don't have to add this workaround to implement integration tests.", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514219599", "createdAt": "2020-10-29T12:28:35Z", "author": {"login": "Sgitario"}, "path": "pom.xml", "diffHunk": "@@ -384,6 +384,28 @@\n           <artifactId>spring-boot-maven-plugin</artifactId>\n           <version>${springboot.version}</version>\n         </plugin>\n+        <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+          <artifactId>maven-resources-plugin</artifactId>\n+          <version>2.5</version>\n+          <executions>\n+            <execution>\n+              <id>add-it-resources</id>\n+              <phase>pre-integration-test</phase>\n+              <goals>\n+                <goal>copy-resources</goal>\n+              </goals>\n+              <configuration>\n+                <outputDirectory>${project.build.directory}/test-run/META-INF</outputDirectory>\n+                <resources>\n+                  <resource>\n+                    <directory>target/classes/META-INF</directory>\n+                  </resource>\n+                </resources>\n+              </configuration>\n+            </execution>\n+          </executions>\n+        </plugin>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NjEzMjkz", "url": "https://github.com/kiegroup/kogito-examples/pull/428#pullrequestreview-519613293", "createdAt": "2020-10-29T12:30:38Z", "commit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjozMDozOFrOHqZjPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjozMDozOFrOHqZjPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIyMDg2MA==", "bodyText": "Setting the topic as broadcast fixed the below issue:\n2020-10-28 09:10:15,066 ERROR [io.sma.rea.mes.kafka] (main) SRMSG18217: Unable to read a record from Kafka topics '[visasresponses]': java.lang.IllegalStateException: This processor allows only a single Subscriber\n    at io.smallrye.mutiny.vertx.MultiReadStream.subscribe(MultiReadStream.java:62)\n    at io.smallrye.mutiny.operators.AbstractMulti.subscribe(AbstractMulti.java:24)\n    at io.smallrye.mutiny.groups.MultiSubscribe.withSubscriber(MultiSubscribe.java:69)\n    at io.smallrye.mutiny.operators.multi.MultiOnFailureInvoke.subscribe(MultiOnFailureInvoke.java:29)\n    at io.smallrye.mutiny.operators.AbstractMulti.subscribe(AbstractMulti.java:31)\n    at io.smallrye.mutiny.context.ContextPropagationMultiInterceptor$ContextPropagationMulti$1.run(ContextPropagationMultiInterceptor.java:57)", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514220860", "createdAt": "2020-10-29T12:30:38Z", "author": {"login": "Sgitario"}, "path": "kogito-travel-agency/extended/travels/src/test/resources/application.properties", "diffHunk": "@@ -10,17 +10,18 @@ kogito.service.url=http://localhost:8080\n kogito.dataindex.http.url=http://localhost:8180\n kogito.dataindex.ws.url=ws://localhost:8180\n \n+#Infinispan\n quarkus.infinispan-client.server-list=localhost:11222\n-#quarkus.infinispan-client.server-list=kogito-infinispan:11222\n-quarkus.infinispan-client.auth-username= \n-quarkus.infinispan-client.auth-password= \n-quarkus.infinispan-client.sasl-mechanism=\n+quarkus.infinispan-client.use-auth=true\n+quarkus.infinispan-client.auth-username=admin\n+quarkus.infinispan-client.auth-password=admin\n \n kafka.bootstrap.servers=localhost:9092\n \n #mp.messaging.incoming.kogito_incoming_stream.bootstrap.servers=localhost:9092\n mp.messaging.incoming.kogito_incoming_stream.connector=smallrye-kafka\n mp.messaging.incoming.kogito_incoming_stream.topic=visasresponses\n+mp.messaging.incoming.kogito_incoming_stream.broadcast=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NjQyMjc2", "url": "https://github.com/kiegroup/kogito-examples/pull/428#pullrequestreview-519642276", "createdAt": "2020-10-29T13:05:59Z", "commit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5062d4156c28d6e6bca76be381221b5867a4bdaf", "author": {"user": {"login": "Sgitario", "name": "Jose Carvajal"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/5062d4156c28d6e6bca76be381221b5867a4bdaf", "committedDate": "2020-10-29T13:14:08Z", "message": "KOGITO-3725: Enable Travels and Visas tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53", "author": {"user": {"login": "Sgitario", "name": "Jose Carvajal"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/01ba5da50d03cbed3169a185d401150ea5ac6d53", "committedDate": "2020-10-29T12:25:59Z", "message": "KOGITO-3725: Enable Travels and Visas tests"}, "afterCommit": {"oid": "5062d4156c28d6e6bca76be381221b5867a4bdaf", "author": {"user": {"login": "Sgitario", "name": "Jose Carvajal"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/5062d4156c28d6e6bca76be381221b5867a4bdaf", "committedDate": "2020-10-29T13:14:08Z", "message": "KOGITO-3725: Enable Travels and Visas tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NjcwMjg5", "url": "https://github.com/kiegroup/kogito-examples/pull/428#pullrequestreview-519670289", "createdAt": "2020-10-29T13:36:27Z", "commit": {"oid": "5062d4156c28d6e6bca76be381221b5867a4bdaf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NjcyMDcy", "url": "https://github.com/kiegroup/kogito-examples/pull/428#pullrequestreview-519672072", "createdAt": "2020-10-29T13:38:22Z", "commit": {"oid": "5062d4156c28d6e6bca76be381221b5867a4bdaf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4268, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}