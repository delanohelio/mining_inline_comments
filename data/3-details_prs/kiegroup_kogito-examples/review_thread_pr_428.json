{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyMjM3Mzk4", "number": 428, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyNjo1NVrOEzRixg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjozMDozOFrOEzRoIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjAwMjYyOnYy", "diffSide": "LEFT", "path": "kogito-travel-agency/extended/visas/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyNjo1NVrOHqZatw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyNjo1NVrOHqZatw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxODY3OQ==", "bodyText": "This issue was already fixed and the app works without this dependency. Removing it.", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514218679", "createdAt": "2020-10-29T12:26:55Z", "author": {"login": "Sgitario"}, "path": "kogito-travel-agency/extended/visas/pom.xml", "diffHunk": "@@ -70,11 +70,6 @@\n       <groupId>org.kie.kogito</groupId>\n       <artifactId>process-management-addon</artifactId>\n     </dependency>\n-    <!-- Needed because of this: https://github.com/quarkusio/quarkus/issues/7809 . Adding the resteasy extension does not fix it. -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjAwMzM5OnYy", "diffSide": "LEFT", "path": "kogito-travel-agency/extended/travels/pom.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyNzowN1rOHqZbKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyNzowN1rOHqZbKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxODc5Mw==", "bodyText": "This issue was already fixed and the app works without this dependency. Removing it.", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514218793", "createdAt": "2020-10-29T12:27:07Z", "author": {"login": "Sgitario"}, "path": "kogito-travel-agency/extended/travels/pom.xml", "diffHunk": "@@ -89,13 +93,9 @@\n       <scope>test</scope>\n     </dependency>\n     <dependency>\n-      <groupId>io.quarkus</groupId>\n-      <artifactId>quarkus-smallrye-openapi</artifactId>\n-    </dependency>\n-    <!-- Needed because of this: https://github.com/quarkusio/quarkus/issues/7809 . Adding the resteasy extension does not fix it. -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjAwODMxOnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjoyODozNVrOHqZeTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxNjoyMzowOFrOHqkC1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxOTU5OQ==", "bodyText": "@ricardozanini this is a workaround I had to add because of the changes in kiegroup/kogito-runtimes#779.\nI think we should raise a ticket so users don't have to add this workaround to implement integration tests.", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514219599", "createdAt": "2020-10-29T12:28:35Z", "author": {"login": "Sgitario"}, "path": "pom.xml", "diffHunk": "@@ -384,6 +384,28 @@\n           <artifactId>spring-boot-maven-plugin</artifactId>\n           <version>${springboot.version}</version>\n         </plugin>\n+        <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+          <artifactId>maven-resources-plugin</artifactId>\n+          <version>2.5</version>\n+          <executions>\n+            <execution>\n+              <id>add-it-resources</id>\n+              <phase>pre-integration-test</phase>\n+              <goals>\n+                <goal>copy-resources</goal>\n+              </goals>\n+              <configuration>\n+                <outputDirectory>${project.build.directory}/test-run/META-INF</outputDirectory>\n+                <resources>\n+                  <resource>\n+                    <directory>target/classes/META-INF</directory>\n+                  </resource>\n+                </resources>\n+              </configuration>\n+            </execution>\n+          </executions>\n+        </plugin>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM5Mjc4OA==", "bodyText": "@Sgitario this one maybe? https://issues.redhat.com/browse/KOGITO-3406\nCould you take a look, maybe raising a new ticket or detailing this one?", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514392788", "createdAt": "2020-10-29T16:23:08Z", "author": {"login": "ricardozanini"}, "path": "pom.xml", "diffHunk": "@@ -384,6 +384,28 @@\n           <artifactId>spring-boot-maven-plugin</artifactId>\n           <version>${springboot.version}</version>\n         </plugin>\n+        <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+          <artifactId>maven-resources-plugin</artifactId>\n+          <version>2.5</version>\n+          <executions>\n+            <execution>\n+              <id>add-it-resources</id>\n+              <phase>pre-integration-test</phase>\n+              <goals>\n+                <goal>copy-resources</goal>\n+              </goals>\n+              <configuration>\n+                <outputDirectory>${project.build.directory}/test-run/META-INF</outputDirectory>\n+                <resources>\n+                  <resource>\n+                    <directory>target/classes/META-INF</directory>\n+                  </resource>\n+                </resources>\n+              </configuration>\n+            </execution>\n+          </executions>\n+        </plugin>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIxOTU5OQ=="}, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyMjAxNjM0OnYy", "diffSide": "RIGHT", "path": "kogito-travel-agency/extended/travels/src/test/resources/application.properties", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMjozMDozOFrOHqZjPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQxMzoxNDo0N1rOHqbN-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIyMDg2MA==", "bodyText": "Setting the topic as broadcast fixed the below issue:\n2020-10-28 09:10:15,066 ERROR [io.sma.rea.mes.kafka] (main) SRMSG18217: Unable to read a record from Kafka topics '[visasresponses]': java.lang.IllegalStateException: This processor allows only a single Subscriber\n    at io.smallrye.mutiny.vertx.MultiReadStream.subscribe(MultiReadStream.java:62)\n    at io.smallrye.mutiny.operators.AbstractMulti.subscribe(AbstractMulti.java:24)\n    at io.smallrye.mutiny.groups.MultiSubscribe.withSubscriber(MultiSubscribe.java:69)\n    at io.smallrye.mutiny.operators.multi.MultiOnFailureInvoke.subscribe(MultiOnFailureInvoke.java:29)\n    at io.smallrye.mutiny.operators.AbstractMulti.subscribe(AbstractMulti.java:31)\n    at io.smallrye.mutiny.context.ContextPropagationMultiInterceptor$ContextPropagationMulti$1.run(ContextPropagationMultiInterceptor.java:57)", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514220860", "createdAt": "2020-10-29T12:30:38Z", "author": {"login": "Sgitario"}, "path": "kogito-travel-agency/extended/travels/src/test/resources/application.properties", "diffHunk": "@@ -10,17 +10,18 @@ kogito.service.url=http://localhost:8080\n kogito.dataindex.http.url=http://localhost:8180\n kogito.dataindex.ws.url=ws://localhost:8180\n \n+#Infinispan\n quarkus.infinispan-client.server-list=localhost:11222\n-#quarkus.infinispan-client.server-list=kogito-infinispan:11222\n-quarkus.infinispan-client.auth-username= \n-quarkus.infinispan-client.auth-password= \n-quarkus.infinispan-client.sasl-mechanism=\n+quarkus.infinispan-client.use-auth=true\n+quarkus.infinispan-client.auth-username=admin\n+quarkus.infinispan-client.auth-password=admin\n \n kafka.bootstrap.servers=localhost:9092\n \n #mp.messaging.incoming.kogito_incoming_stream.bootstrap.servers=localhost:9092\n mp.messaging.incoming.kogito_incoming_stream.connector=smallrye-kafka\n mp.messaging.incoming.kogito_incoming_stream.topic=visasresponses\n+mp.messaging.incoming.kogito_incoming_stream.broadcast=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI0MjMwMA==", "bodyText": "nice! I have addressed this by attaching a broadcast programmatically in kiegroup/kogito-runtimes#854 so then we'll be able to remove this", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514242300", "createdAt": "2020-10-29T13:05:28Z", "author": {"login": "evacchi"}, "path": "kogito-travel-agency/extended/travels/src/test/resources/application.properties", "diffHunk": "@@ -10,17 +10,18 @@ kogito.service.url=http://localhost:8080\n kogito.dataindex.http.url=http://localhost:8180\n kogito.dataindex.ws.url=ws://localhost:8180\n \n+#Infinispan\n quarkus.infinispan-client.server-list=localhost:11222\n-#quarkus.infinispan-client.server-list=kogito-infinispan:11222\n-quarkus.infinispan-client.auth-username= \n-quarkus.infinispan-client.auth-password= \n-quarkus.infinispan-client.sasl-mechanism=\n+quarkus.infinispan-client.use-auth=true\n+quarkus.infinispan-client.auth-username=admin\n+quarkus.infinispan-client.auth-password=admin\n \n kafka.bootstrap.servers=localhost:9092\n \n #mp.messaging.incoming.kogito_incoming_stream.bootstrap.servers=localhost:9092\n mp.messaging.incoming.kogito_incoming_stream.connector=smallrye-kafka\n mp.messaging.incoming.kogito_incoming_stream.topic=visasresponses\n+mp.messaging.incoming.kogito_incoming_stream.broadcast=true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIyMDg2MA=="}, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI0ODE4NQ==", "bodyText": "Thanks @evacchi ! I've removed my changes and made this PR to depend on yours.", "url": "https://github.com/kiegroup/kogito-examples/pull/428#discussion_r514248185", "createdAt": "2020-10-29T13:14:47Z", "author": {"login": "Sgitario"}, "path": "kogito-travel-agency/extended/travels/src/test/resources/application.properties", "diffHunk": "@@ -10,17 +10,18 @@ kogito.service.url=http://localhost:8080\n kogito.dataindex.http.url=http://localhost:8180\n kogito.dataindex.ws.url=ws://localhost:8180\n \n+#Infinispan\n quarkus.infinispan-client.server-list=localhost:11222\n-#quarkus.infinispan-client.server-list=kogito-infinispan:11222\n-quarkus.infinispan-client.auth-username= \n-quarkus.infinispan-client.auth-password= \n-quarkus.infinispan-client.sasl-mechanism=\n+quarkus.infinispan-client.use-auth=true\n+quarkus.infinispan-client.auth-username=admin\n+quarkus.infinispan-client.auth-password=admin\n \n kafka.bootstrap.servers=localhost:9092\n \n #mp.messaging.incoming.kogito_incoming_stream.bootstrap.servers=localhost:9092\n mp.messaging.incoming.kogito_incoming_stream.connector=smallrye-kafka\n mp.messaging.incoming.kogito_incoming_stream.topic=visasresponses\n+mp.messaging.incoming.kogito_incoming_stream.broadcast=true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDIyMDg2MA=="}, "originalCommit": {"oid": "01ba5da50d03cbed3169a185d401150ea5ac6d53"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 351, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}