{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1ODU4NTE0", "number": 435, "title": "KOGITO-3716 Allow automatic close of staging repo", "bodyText": "https://issues.redhat.com/browse/KOGITO-3716\nDependent PRs:\n\nkiegroup/kogito-pipelines#91\nkiegroup/kogito-runtimes#865\nkiegroup/optaplanner#1010\n#435\nkiegroup/jenkins-pipeline-shared-libraries#114\n\nMany thanks for submitting your Pull Request \u2764\ufe0f!\nPlease make sure that your PR meets the following requirements:\nWARNING! Please make sure you are opening your PR against master branch!\n\n You have read the contributors guide\n Pull Request title is properly formatted: KOGITO-XYZ Subject\n Pull Request title contains the target branch if not targeting master: [0.9.x] KOGITO-XYZ Subject\n Pull Request contains link to the JIRA issue\n Pull Request contains link to any dependent or related Pull Request\n Pull Request contains description of the issue\n Pull Request does not include fixes for issues other than the main ticket", "createdAt": "2020-11-05T07:34:03Z", "url": "https://github.com/kiegroup/kogito-examples/pull/435", "merged": true, "mergeCommit": {"oid": "c6e344430fda99ce0da9c85113c5e910525f4c05"}, "closed": true, "closedAt": "2020-12-07T08:01:12Z", "author": {"login": "radtriste"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZd0PbgFqTUyNDAwNzUxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdig5MzAH2gAyNTE1ODU4NTE0OjIxMDRhMzQxOWY3MWE5NzBiNzZjMzI2NmQ0YzA2MTQ0Yjc1NzBjODI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MDA3NTE0", "url": "https://github.com/kiegroup/kogito-examples/pull/435#pullrequestreview-524007514", "createdAt": "2020-11-05T08:09:39Z", "commit": {"oid": "3a16b3689212d2397d9d03be7e9d67c0970b8ec4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwODowOTozOVrOHt3kwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwODowOTozOVrOHt3kwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzg1ODQ5Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    def options = [\"-s ${env.GLOBAL_MAVEN_SETTINGS}\", '-fae']\n          \n          \n            \n                    if(params.MAVEN_DEPENDENCIES_REPOSITORY){\n          \n          \n            \n                        options += ['-Denforcer.skip']\n          \n          \n            \n                    }\n          \n          \n            \n                    maven.runMaven(mvnCmd, skipTests, options)\n          \n          \n            \n                    def opts = [\"-s ${env.GLOBAL_MAVEN_SETTINGS}\", '-fae']\n          \n          \n            \n                    if(params.MAVEN_DEPENDENCIES_REPOSITORY){\n          \n          \n            \n                        opts += ['-Denforcer.skip']\n          \n          \n            \n                    }\n          \n          \n            \n                    maven.runMaven(mvnCmd, skipTests, opts)", "url": "https://github.com/kiegroup/kogito-examples/pull/435#discussion_r517858497", "createdAt": "2020-11-05T08:09:39Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.deploy", "diffHunk": "@@ -306,6 +347,10 @@ void runMaven(String command, String directory, boolean skipTests = false, List\n         mvnCmd += \" ${extraArgs}\"\n     }\n     dir(directory) {\n-        maven.runMaven(mvnCmd, skipTests, ['-fae'])\n+        def options = [\"-s ${env.GLOBAL_MAVEN_SETTINGS}\", '-fae']\n+        if(params.MAVEN_DEPENDENCIES_REPOSITORY){\n+            options += ['-Denforcer.skip']\n+        }\n+        maven.runMaven(mvnCmd, skipTests, options)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a16b3689212d2397d9d03be7e9d67c0970b8ec4"}, "originalPosition": 92}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MDQ1MzE3", "url": "https://github.com/kiegroup/kogito-examples/pull/435#pullrequestreview-524045317", "createdAt": "2020-11-05T08:56:32Z", "commit": {"oid": "188d3ef1811820c401e624ef8771c73a6156b242"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwODo1NjozMlrOHt5TCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwODo1NjozMlrOHt5TCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzg4NjczMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    cmd += \"--projects ${parentProjectName ?: directory}\"\n          \n          \n            \n                    cmd += \" --projects ${parentProjectName ?: directory}\"", "url": "https://github.com/kiegroup/kogito-examples/pull/435#discussion_r517886730", "createdAt": "2020-11-05T08:56:32Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.deploy", "diffHunk": "@@ -292,9 +307,35 @@ void mavenCleanInstall(String directory, boolean skipTests = false, List profile\n     runMaven('clean install', directory, skipTests, profiles, extraArgs)\n }\n \n-void mavenDeploy(String directory) {\n-    extraArgs = params.MAVEN_DEPLOY_REPOSITORY != '' ? \"-DaltDeploymentRepository=runtimes-artifacts::default::${params.MAVEN_DEPLOY_REPOSITORY} -Denforcer.skip=true\" : ''\n-    runMaven('clean deploy', directory, true, [], extraArgs)\n+void mavenDeploy(String directory, String parentProjectName='') {\n+    if(!isRelease() || params.MAVEN_DEPLOY_REPOSITORY){\n+        extraArgs = ''\n+        if (params.MAVEN_DEPLOY_REPOSITORY){\n+            extraArgs += \"-DaltDeploymentRepository=runtimes-artifacts::default::${params.MAVEN_DEPLOY_REPOSITORY} -Denforcer.skip=true\"\n+        }\n+        runMaven('clean deploy', directory, true, [], extraArgs)\n+    } else {\n+        // First deploy locally\n+        extraArgs = \"-DaltDeploymentRepository=local::default::file://${env.MAVEN_DEPLOY_LOCAL_DIR}/${directory}\"\n+        runMaven('clean deploy', directory, true, [], extraArgs)\n+\n+        // Deploy to staging repository and close\n+        cmd = 'org.sonatype.plugins:nexus-staging-maven-plugin:1.6.5:deploy-staged-repository -DkeepStagingRepositoryOnCloseRuleFailure=true -DstagingProgressTimeoutMinutes=10'\n+        cmd += \"--projects ${parentProjectName ?: directory}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "188d3ef1811820c401e624ef8771c73a6156b242"}, "originalPosition": 67}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MDYzNzY2", "url": "https://github.com/kiegroup/kogito-examples/pull/435#pullrequestreview-524063766", "createdAt": "2020-11-05T09:18:45Z", "commit": {"oid": "c9d5fddec14cc9f1d3301a63ae0e6f82e4a5c8a4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwOToxODo0NVrOHt6J6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwOToxODo0NVrOHt6J6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzkwMDc3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    cmd += \" --projects ${parentProjectName ?: directory}\"\n          \n          \n            \n                    cmd += \" --projects :${parentProjectName ?: directory}\"", "url": "https://github.com/kiegroup/kogito-examples/pull/435#discussion_r517900776", "createdAt": "2020-11-05T09:18:45Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.deploy", "diffHunk": "@@ -292,9 +307,35 @@ void mavenCleanInstall(String directory, boolean skipTests = false, List profile\n     runMaven('clean install', directory, skipTests, profiles, extraArgs)\n }\n \n-void mavenDeploy(String directory) {\n-    extraArgs = params.MAVEN_DEPLOY_REPOSITORY != '' ? \"-DaltDeploymentRepository=runtimes-artifacts::default::${params.MAVEN_DEPLOY_REPOSITORY} -Denforcer.skip=true\" : ''\n-    runMaven('clean deploy', directory, true, [], extraArgs)\n+void mavenDeploy(String directory, String parentProjectName='') {\n+    if(!isRelease() || params.MAVEN_DEPLOY_REPOSITORY){\n+        extraArgs = ''\n+        if (params.MAVEN_DEPLOY_REPOSITORY){\n+            extraArgs += \"-DaltDeploymentRepository=runtimes-artifacts::default::${params.MAVEN_DEPLOY_REPOSITORY} -Denforcer.skip=true\"\n+        }\n+        runMaven('clean deploy', directory, true, [], extraArgs)\n+    } else {\n+        // First deploy locally\n+        extraArgs = \"-DaltDeploymentRepository=local::default::file://${env.MAVEN_DEPLOY_LOCAL_DIR}/${directory}\"\n+        runMaven('clean deploy', directory, true, [], extraArgs)\n+\n+        // Deploy to staging repository and close\n+        cmd = 'org.sonatype.plugins:nexus-staging-maven-plugin:1.6.5:deploy-staged-repository -DkeepStagingRepositoryOnCloseRuleFailure=true -DstagingProgressTimeoutMinutes=10'\n+        cmd += \" --projects ${parentProjectName ?: directory}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9d5fddec14cc9f1d3301a63ae0e6f82e4a5c8a4"}, "originalPosition": 67}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MDg5OTYy", "url": "https://github.com/kiegroup/kogito-examples/pull/435#pullrequestreview-524089962", "createdAt": "2020-11-05T09:49:40Z", "commit": {"oid": "23966a7655c7988e754dfd67882a1b7f008ab868"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwOTo0OTo0MVrOHt7W1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwOTo0OTo0MVrOHt7W1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzkyMDQ2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    cmd += \"--projects ${directory}\"\n          \n          \n            \n                    cmd += \" --projects :${parentProjectName ?: directory}\"", "url": "https://github.com/kiegroup/kogito-examples/pull/435#discussion_r517920469", "createdAt": "2020-11-05T09:49:41Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.deploy", "diffHunk": "@@ -292,9 +307,35 @@ void mavenCleanInstall(String directory, boolean skipTests = false, List profile\n     runMaven('clean install', directory, skipTests, profiles, extraArgs)\n }\n \n-void mavenDeploy(String directory) {\n-    extraArgs = params.MAVEN_DEPLOY_REPOSITORY != '' ? \"-DaltDeploymentRepository=runtimes-artifacts::default::${params.MAVEN_DEPLOY_REPOSITORY} -Denforcer.skip=true\" : ''\n-    runMaven('clean deploy', directory, true, [], extraArgs)\n+void mavenDeploy(String directory, String parentProjectName='') {\n+    if(!isRelease() || params.MAVEN_DEPLOY_REPOSITORY){\n+        extraArgs = ''\n+        if (params.MAVEN_DEPLOY_REPOSITORY){\n+            extraArgs += \"-DaltDeploymentRepository=runtimes-artifacts::default::${params.MAVEN_DEPLOY_REPOSITORY} -Denforcer.skip=true\"\n+        }\n+        runMaven('clean deploy', directory, true, [], extraArgs)\n+    } else {\n+        // First deploy locally\n+        extraArgs = \"-DaltDeploymentRepository=local::default::file://${env.MAVEN_DEPLOY_LOCAL_DIR}/${directory}\"\n+        runMaven('clean deploy', directory, true, [], extraArgs)\n+\n+        // Deploy to staging repository and close\n+        cmd = 'org.sonatype.plugins:nexus-staging-maven-plugin:1.6.5:deploy-staged-repository -DkeepStagingRepositoryOnCloseRuleFailure=true -DstagingProgressTimeoutMinutes=10'\n+        cmd += \" --projects :${parentProjectName ?: directory}\"\n+        cmd += \" -DnexusUrl=${env.NEXUS_RELEASE_URL}\"\n+        cmd += \" -DserverId=${env.NEXUS_RELEASE_REPOSITORY_ID}\" \n+        cmd += \" -DrepositoryDirectory=${env.MAVEN_DEPLOY_LOCAL_DIR}/${directory}\"\n+        cmd += \" -DstagingProfileId=${env.NEXUS_STAGING_REPOSITORY_ID}\" \n+        cmd += \" -DstagingDescription=\\\"Kogito Runtimes ${getProjectVersion()}\\\"\"\n+        echo \"Run maven cmd $cmd\"\n+        runMaven(cmd, directory)\n+\n+        // Promote to build profile\n+        cmd = \"org.sonatype.plugins:nexus-staging-maven-plugin:1.6.5:promote -DbuildPromotionProfileId=${env.NEXUS_BUILD_PROMOTION_PROFILE_ID}\"\n+        cmd += \"--projects ${directory}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23966a7655c7988e754dfd67882a1b7f008ab868"}, "originalPosition": 78}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MTU0MDYx", "url": "https://github.com/kiegroup/kogito-examples/pull/435#pullrequestreview-524154061", "createdAt": "2020-11-05T11:08:35Z", "commit": {"oid": "516dfb37f3ab717c58ecfa26d2e9128f66fdced5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMTowODozNVrOHt-Wng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMTowODozNVrOHt-Wng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk2OTU2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                            sh \"echo '\\n-Denforcer.skip' | tee -a optaplanner/.mvn/maven.config\"\n          \n          \n            \n                                            sh \"echo '\\n-Denforcer.skip' | tee -a .mvn/maven.config\"", "url": "https://github.com/kiegroup/kogito-examples/pull/435#discussion_r517969566", "createdAt": "2020-11-05T11:08:35Z", "author": {"login": "radtriste"}, "path": "Jenkinsfile.deploy", "diffHunk": "@@ -88,16 +102,17 @@ pipeline {\n             steps {\n                 script {\n                     dir('kogito-examples') {\n-                        configFileProvider([configFile(fileId: maven.getSubmarineSettingsXmlId(), targetLocation: 'maven-settings.xml', variable: 'MAVEN_SETTINGS_FILE')]){\n+                        configFileProvider([configFile(fileId: env.MAVEN_SETTINGS_CONFIG_FILE_ID, targetLocation: 'maven-settings.xml', variable: 'MAVEN_SETTINGS_FILE')]){\n                             // expose the temp file via a global environment variable for other stages\n                             env.GLOBAL_MAVEN_SETTINGS = \"${MAVEN_SETTINGS_FILE}\"\n                             sh \"echo '\\n-B -s ${MAVEN_SETTINGS_FILE}' | tee -a .mvn/maven.config\"\n-                            if(params.MAVEN_DEPENDENCIES_REPOSITORY != ''){\n-                                sh \"echo '\\n-Denforcer.skip=true' | tee -a .mvn/maven.config\"\n-                                sh \"sed -i 's|<repositories>|<repositories><repository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></repository>|g' ${MAVEN_SETTINGS_FILE}\"\n-                                sh \"sed -i 's|<pluginRepositories>|<pluginRepositories><pluginRepository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></pluginRepository>|g' ${MAVEN_SETTINGS_FILE}\"\n-                                // Done to allow Maven to download release artificats from MAVEN_DEPENDENCIES_REPOSITORY\n-                                sh \"sed -i 's|external:\\\\*|external:*,!staging|g' ${MAVEN_SETTINGS_FILE}\"\n+                            if(params.MAVEN_DEPENDENCIES_REPOSITORY){\n+                                depsRepositoryContent = \"<id>deps-repo</id><name>Dependencies Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases>\"\n+                                sh \"echo '\\n-Denforcer.skip' | tee -a optaplanner/.mvn/maven.config\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "516dfb37f3ab717c58ecfa26d2e9128f66fdced5"}, "originalPosition": 38}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1cb47888f496a40c2e2af9a0b271ac4d900ea0e0", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/1cb47888f496a40c2e2af9a0b271ac4d900ea0e0", "committedDate": "2020-11-05T11:08:44Z", "message": "Update Jenkinsfile.deploy"}, "afterCommit": {"oid": "f75c5c319f2c2a0c854a801da22bd78ef2824580", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/f75c5c319f2c2a0c854a801da22bd78ef2824580", "committedDate": "2020-11-24T14:33:42Z", "message": "use shared libs for Maven"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d42dadfe5bc8e2343839d470608369f567f8049", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/0d42dadfe5bc8e2343839d470608369f567f8049", "committedDate": "2020-11-26T13:01:04Z", "message": "correction"}, "afterCommit": {"oid": "b360d930045c20e7f45a0a210ef1e0a34b757e04", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/b360d930045c20e7f45a0a210ef1e0a34b757e04", "committedDate": "2020-11-26T14:08:08Z", "message": "KOGITO-3716 Allow automatic close of staging repo"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b4a184a39532b621ea3a81332803f20bacb393f0", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/b4a184a39532b621ea3a81332803f20bacb393f0", "committedDate": "2020-11-30T08:34:43Z", "message": "test promote"}, "afterCommit": {"oid": "daf0f439f7ed6e0ef948de0ffe993695df405f34", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/daf0f439f7ed6e0ef948de0ffe993695df405f34", "committedDate": "2020-11-30T11:12:12Z", "message": "update"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9cafa5e80934fb54ee057dc30a46169780580d52", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/9cafa5e80934fb54ee057dc30a46169780580d52", "committedDate": "2020-12-02T08:40:53Z", "message": "updated mvn settings"}, "afterCommit": {"oid": "96c925954bf0fed8da02ec5fd8b4b4421a4e1f7c", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/96c925954bf0fed8da02ec5fd8b4b4421a4e1f7c", "committedDate": "2020-12-02T08:41:28Z", "message": "KOGITO-3716 Allow automatic close of staging repo"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96c925954bf0fed8da02ec5fd8b4b4421a4e1f7c", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/96c925954bf0fed8da02ec5fd8b4b4421a4e1f7c", "committedDate": "2020-12-02T08:41:28Z", "message": "KOGITO-3716 Allow automatic close of staging repo"}, "afterCommit": {"oid": "e557404e1b3068b075273b22eab428ed2872d573", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/e557404e1b3068b075273b22eab428ed2872d573", "committedDate": "2020-12-02T08:43:27Z", "message": "KOGITO-3716 Allow automatic close of staging repo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyNjk4ODAz", "url": "https://github.com/kiegroup/kogito-examples/pull/435#pullrequestreview-542698803", "createdAt": "2020-12-02T10:31:22Z", "commit": {"oid": "e557404e1b3068b075273b22eab428ed2872d573"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMDozMToyM1rOH9UeAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxMDozMToyM1rOH9UeAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDA2MDU0Ng==", "bodyText": "Here we use getMavenConfig() while in kogito-runtimes we create a defaultMavenCmd. Would be nice to keep consistency across the pipelines.\nBtw, I prefer this approach over the defaultMavenCmd: the getMavenConfig() always returns a new instance. Thus, there is no risk of accidentally changing the defaultMavenCmd due to forgetting to call clone().", "url": "https://github.com/kiegroup/kogito-examples/pull/435#discussion_r534060546", "createdAt": "2020-12-02T10:31:23Z", "author": {"login": "rsynek"}, "path": "Jenkinsfile.promote", "diffHunk": "@@ -104,17 +107,17 @@ pipeline {\n                 script {\n                     dir('kogito-examples-bot') {\n                         prepareForPR('kogito-examples')\n-                        setupMavenConfig()\n-                        maven.mvnVersionsSet(getSnapshotVersion(), true)\n-                        updateOptaPlannerVersion(util.getNextVersion(getOptaPlannerVersion(), 'micro'))\n+\n+                        maven.mvnVersionsSet(getMavenConfig(), getSnapshotVersion(), true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e557404e1b3068b075273b22eab428ed2872d573"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5643ba1dff46ffa0dd5eda14295f2676671e1067", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/5643ba1dff46ffa0dd5eda14295f2676671e1067", "committedDate": "2020-12-02T16:01:00Z", "message": "KOGITO-3716 Allow automatic close of staging repo"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ac978c8de849d6550d66a03e75a233352481fb65", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/ac978c8de849d6550d66a03e75a233352481fb65", "committedDate": "2020-12-02T15:54:18Z", "message": "small update"}, "afterCommit": {"oid": "5643ba1dff46ffa0dd5eda14295f2676671e1067", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/5643ba1dff46ffa0dd5eda14295f2676671e1067", "committedDate": "2020-12-02T16:01:00Z", "message": "KOGITO-3716 Allow automatic close of staging repo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2104a3419f71a970b76c3266d4c06144b7570c82", "author": {"user": {"login": "radtriste", "name": "Tristan Radisson"}}, "url": "https://github.com/kiegroup/kogito-examples/commit/2104a3419f71a970b76c3266d4c06144b7570c82", "committedDate": "2020-12-03T10:50:06Z", "message": "removed jenkins tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4273, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}