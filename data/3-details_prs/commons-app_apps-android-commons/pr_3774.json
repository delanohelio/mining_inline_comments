{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMDAzMDQ5", "number": 3774, "title": "Add destroyed column to BookmarkLocation table (##3729)", "bodyText": "Description (required)\nFixes #3729\nWhat changes did you make and why?\n\nDatabase version changed from 12 to 13\nMigration to add column location_destroyed to BookmarkLocation table\nUpdated Tests and Dao to reflect the new column\n\nTests performed (required)\nTested {prodDebug, betaDebug} on {Pixel 2 emulator} with API level {28}.\nChecked for successful database migration (on emulator) as well.", "createdAt": "2020-05-26T06:05:53Z", "url": "https://github.com/commons-app/apps-android-commons/pull/3774", "merged": true, "mergeCommit": {"oid": "82d662c8ef58420dc09d5f91afa991bbeaa3fcca"}, "closed": true, "closedAt": "2020-05-27T09:10:01Z", "author": {"login": "gvaibhav1734"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABck-PFogH2gAyNDIzMDAzMDQ5OjRkZDE2MDhhMGZmZGUwNGIyNjEyNmE3ZmI3MTlmNjU1OTJhYzQwMjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclVkkpAFqTQxOTAwMTI2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4dd1608a0ffde04b26126a7fb719f65592ac4022", "author": {"user": {"login": "gvaibhav1734", "name": "Vaibhav"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/4dd1608a0ffde04b26126a7fb719f65592ac4022", "committedDate": "2020-05-26T05:57:57Z", "message": "Add destroyed column to BookmarkLocation table (##3729)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTkyMjcz", "url": "https://github.com/commons-app/apps-android-commons/pull/3774#pullrequestreview-417992273", "createdAt": "2020-05-26T06:05:57Z", "commit": {"oid": "4dd1608a0ffde04b26126a7fb719f65592ac4022"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTk1Nzk1", "url": "https://github.com/commons-app/apps-android-commons/pull/3774#pullrequestreview-417995795", "createdAt": "2020-05-26T06:14:40Z", "commit": {"oid": "4dd1608a0ffde04b26126a7fb719f65592ac4022"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDQ5NDk4", "url": "https://github.com/commons-app/apps-android-commons/pull/3774#pullrequestreview-418049498", "createdAt": "2020-05-26T07:48:46Z", "commit": {"oid": "4dd1608a0ffde04b26126a7fb719f65592ac4022"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzo0ODo0NlrOGaSgxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzo0ODo0NlrOGaSgxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIxOTQ2MQ==", "bodyText": "this from == x && to == y is not how it should be done, typically this is done in a switch on from and you just let it fallthrough.\nThe problem is that we can never guarantee a user upgrades monotonically, a user could theoretically go from v1 to v100 with none of the intervening updates and migrations should happily walk them along that path", "url": "https://github.com/commons-app/apps-android-commons/pull/3774#discussion_r430219461", "createdAt": "2020-05-26T07:48:46Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/bookmarks/locations/BookmarkLocationsDao.java", "diffHunk": "@@ -276,6 +280,15 @@ public static void onUpdate(SQLiteDatabase db, int from, int to) {\n                 }\n                 return;\n             }\n+            if (from == 12 && to == 13) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4dd1608a0ffde04b26126a7fb719f65592ac4022"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5e005438268d8d5b51bf10158dd6f196ab6448d", "author": {"user": {"login": "gvaibhav1734", "name": "Vaibhav"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/f5e005438268d8d5b51bf10158dd6f196ab6448d", "committedDate": "2020-05-26T08:24:39Z", "message": "switch with fall through for migrations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MDAxMjY3", "url": "https://github.com/commons-app/apps-android-commons/pull/3774#pullrequestreview-419001267", "createdAt": "2020-05-27T09:09:14Z", "commit": {"oid": "f5e005438268d8d5b51bf10158dd6f196ab6448d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 613, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}