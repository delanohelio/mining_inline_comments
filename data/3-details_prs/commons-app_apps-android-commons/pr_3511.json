{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3OTU4MzE2", "number": 3511, "title": "Fixes #2238 scalebar added in map ", "bodyText": "Description (required)\nA scale bar is added to nearby map.\nFixes #2238 Show Map Scale\nWhat changes did you make and why?\nUsed scale bar plugin for android built upon mapboxMap object in NearbyParentFragment class\nTests performed (required)\nTested BetaDebug on Pixel2 with API 28 and Nexus S with API 28", "createdAt": "2020-03-13T20:05:46Z", "url": "https://github.com/commons-app/apps-android-commons/pull/3511", "merged": true, "mergeCommit": {"oid": "bdb61dfda61b78d76476a3036c3d2db48b00290e"}, "closed": true, "closedAt": "2020-03-17T08:41:32Z", "author": {"login": "318anushka"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNVyr6AH2gAyMzg3OTU4MzE2OjFhYTdhNTZiNmFhYWI2NTFlMWM2Yzc0YWM1ODMxMzc5Y2FlYjgxYmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOenTNAFqTM3NTgzMTYyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1aa7a56b6aaab651e1c6c74ac5831379caeb81ba", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/1aa7a56b6aaab651e1c6c74ac5831379caeb81ba", "committedDate": "2020-03-13T19:50:28Z", "message": "scalebar added in map"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NTc4MTY5", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#pullrequestreview-374578169", "createdAt": "2020-03-13T20:05:50Z", "commit": {"oid": "1aa7a56b6aaab651e1c6c74ac5831379caeb81ba"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0Njk4MzYy", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#pullrequestreview-374698362", "createdAt": "2020-03-14T04:59:10Z", "commit": {"oid": "1aa7a56b6aaab651e1c6c74ac5831379caeb81ba"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwNDo1OToxMVrOF2Xy0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwNToyNzozMFrOF2X4eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1NzI2NQ==", "bodyText": "Kindly revert these changes.", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#discussion_r392557265", "createdAt": "2020-03-14T04:59:11Z", "author": {"login": "sivaraam"}, "path": ".idea/codeStyles/Project.xml", "diffHunk": "@@ -47,31 +47,9 @@\n       <option name=\"SPACE_BEFORE_SUPERCLASS_COLON\" value=\"false\" />\n     </Objective-C>\n     <Objective-C-extensions>\n-      <option name=\"GENERATE_INSTANCE_VARIABLES_FOR_PROPERTIES\" value=\"ASK\" />\n-      <option name=\"RELEASE_STYLE\" value=\"IVAR\" />\n-      <option name=\"TYPE_QUALIFIERS_PLACEMENT\" value=\"BEFORE\" />\n-      <file>\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"Import\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"Macro\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"Typedef\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"Enum\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"Constant\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"Global\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"Struct\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"FunctionPredecl\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"Function\" />\n-      </file>\n-      <class>\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"Property\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"Synthesize\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"InitMethod\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"StaticMethod\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"InstanceMethod\" />\n-        <option name=\"com.jetbrains.cidr.lang.util.OCDeclarationKind\" value=\"DeallocMethod\" />\n-      </class>\n       <extensions>\n-        <pair source=\"cc\" header=\"h\" />\n-        <pair source=\"c\" header=\"h\" />\n+        <pair source=\"cc\" header=\"h\" fileNamingConvention=\"NONE\" />\n+        <pair source=\"c\" header=\"h\" fileNamingConvention=\"NONE\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1aa7a56b6aaab651e1c6c74ac5831379caeb81ba"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1NzQwMQ==", "bodyText": "I believe this isn't required. We already have the mavenCentral() repository in the top-level build.gradle.", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#discussion_r392557401", "createdAt": "2020-03-14T05:01:36Z", "author": {"login": "sivaraam"}, "path": "app/build.gradle", "diffHunk": "@@ -13,6 +13,9 @@ def isRunningOnTravisAndIsNotPRBuild = System.getenv(\"CI\") == \"true\" && file('..\n if(isRunningOnTravisAndIsNotPRBuild) {\n     apply plugin: 'com.github.triplet.play'\n }\n+repositories {\n+    mavenCentral()\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1aa7a56b6aaab651e1c6c74ac5831379caeb81ba"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1ODcxMw==", "bodyText": "Can you use constants in place of these magic numbers? Some comments about why these numbers were chosen would be nice.", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#discussion_r392558713", "createdAt": "2020-03-14T05:27:30Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -239,6 +243,25 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat\n                         .zoom(ZOOM_LEVEL)\n                         .build();\n                 mapBoxMap.setCameraPosition(cameraPosition);\n+                scaleBarPlugin = new ScaleBarPlugin(mapView, mapBoxMap);\n+\n+                int color = isDarkTheme?R.color.bottom_bar_light:R.color.bottom_bar_dark;\n+\n+                float size = new TextView(getContext()).getTextSize()-1;\n+\n+                scaleBarOptions = new ScaleBarOptions(getContext())\n+                    .setTextColor(color)\n+                    .setTextSize(size)\n+                    .setBarHeight((float) (size/3.5))\n+                    .setBorderWidth(size/10)\n+                    .setMetricUnit(true)\n+                    .setRefreshInterval(15)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1aa7a56b6aaab651e1c6c74ac5831379caeb81ba"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4828e42f10e52b706363108e21333d2bad1bf0f2", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/4828e42f10e52b706363108e21333d2bad1bf0f2", "committedDate": "2020-03-14T06:32:12Z", "message": "changes reverted in .idea/Project.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "163401ffc4e5f9974cb51162b465c1966c6d8f13", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/163401ffc4e5f9974cb51162b465c1966c6d8f13", "committedDate": "2020-03-14T12:26:30Z", "message": "magic numbers replaced with constants for scalebar"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzM5ODI3", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#pullrequestreview-374739827", "createdAt": "2020-03-14T17:00:55Z", "commit": {"oid": "163401ffc4e5f9974cb51162b465c1966c6d8f13"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNzowMDo1NlrOF2alLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNzozNTo1MFrOF2aupw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYwMjkyNg==", "bodyText": "Thanks for reverting the changes! If possible kindly revert this whitespace change too.", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#discussion_r392602926", "createdAt": "2020-03-14T17:00:56Z", "author": {"login": "sivaraam"}, "path": ".idea/codeStyles/Project.xml", "diffHunk": "@@ -71,7 +71,7 @@\n       </class>\n       <extensions>\n         <pair source=\"cc\" header=\"h\" />\n-        <pair source=\"c\" header=\"h\" />\n+        <pair source=\"c\" header=\"h\"  />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "163401ffc4e5f9974cb51162b465c1966c6d8f13"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYwNDU0Mw==", "bodyText": "It seems that the default refresh interval is 15 milliseconds. So, this call to set the refresh interval to 15 milliseconds seems unnecessary.", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#discussion_r392604543", "createdAt": "2020-03-14T17:23:56Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -239,6 +243,29 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat\n                         .zoom(ZOOM_LEVEL)\n                         .build();\n                 mapBoxMap.setCameraPosition(cameraPosition);\n+                scaleBarPlugin = new ScaleBarPlugin(mapView, mapBoxMap);\n+\n+                int color = isDarkTheme?R.color.bottom_bar_light:R.color.bottom_bar_dark;\n+\n+                final float SIZE = new TextView(getContext()).getTextSize()-1;     //Default text size for scalebar params\n+                final float SCALEBAR_HEIGHT = (float) (SIZE/3.5);                  //these values are chosen to keep scalebar size comparable to other text depending upon the screen size and device resolution\n+                final float SCALEBAR_BORDER_WIDTH = SIZE/10;\n+                final float SCALEBAR_MARGIN = SIZE/2;\n+                final int REFRESH_INTERVAL = 15;                                  //minimum refresh time in millisec\n+\n+                scaleBarOptions = new ScaleBarOptions(getContext())\n+                    .setTextColor(color)\n+                    .setTextSize(SIZE)\n+                    .setBarHeight(SCALEBAR_HEIGHT)\n+                    .setBorderWidth(SCALEBAR_BORDER_WIDTH)\n+                    .setMetricUnit(true)\n+                    .setRefreshInterval(REFRESH_INTERVAL)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "163401ffc4e5f9974cb51162b465c1966c6d8f13"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYwNTM1MQ==", "bodyText": "It's better if we just leave whether or not to use the metric system to the default setting of scale bar. The default seems to be smart enough to identify this based on system setting. So, we can just take advantage of the default by not setting this.", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#discussion_r392605351", "createdAt": "2020-03-14T17:35:50Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -239,6 +243,29 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat\n                         .zoom(ZOOM_LEVEL)\n                         .build();\n                 mapBoxMap.setCameraPosition(cameraPosition);\n+                scaleBarPlugin = new ScaleBarPlugin(mapView, mapBoxMap);\n+\n+                int color = isDarkTheme?R.color.bottom_bar_light:R.color.bottom_bar_dark;\n+\n+                final float SIZE = new TextView(getContext()).getTextSize()-1;     //Default text size for scalebar params\n+                final float SCALEBAR_HEIGHT = (float) (SIZE/3.5);                  //these values are chosen to keep scalebar size comparable to other text depending upon the screen size and device resolution\n+                final float SCALEBAR_BORDER_WIDTH = SIZE/10;\n+                final float SCALEBAR_MARGIN = SIZE/2;\n+                final int REFRESH_INTERVAL = 15;                                  //minimum refresh time in millisec\n+\n+                scaleBarOptions = new ScaleBarOptions(getContext())\n+                    .setTextColor(color)\n+                    .setTextSize(SIZE)\n+                    .setBarHeight(SCALEBAR_HEIGHT)\n+                    .setBorderWidth(SCALEBAR_BORDER_WIDTH)\n+                    .setMetricUnit(true)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "163401ffc4e5f9974cb51162b465c1966c6d8f13"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64f55c0bcf1a031a39942ed65d279ce6980d7d52", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/64f55c0bcf1a031a39942ed65d279ce6980d7d52", "committedDate": "2020-03-14T20:13:06Z", "message": "Default setting for scaling unit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0OTI5NjUw", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#pullrequestreview-374929650", "createdAt": "2020-03-16T06:06:36Z", "commit": {"oid": "64f55c0bcf1a031a39942ed65d279ce6980d7d52"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwNjowNjozN1rOF2mcTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwNjowNjozN1rOF2mcTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc5NzI2Mw==", "bodyText": "Is there an issue with removing this call altogether? I mean this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                .setBorderWidth(SCALEBAR_BORDER_WIDTH)\n          \n          \n            \n                                .setRefreshInterval(15)            //Refresh time for scalebar in millisec\n          \n          \n            \n                                .setMarginTop(SCALEBAR_MARGIN)\n          \n          \n            \n                                .setBorderWidth(SCALEBAR_BORDER_WIDTH)\n          \n          \n            \n                                .setMarginTop(SCALEBAR_MARGIN)", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#discussion_r392797263", "createdAt": "2020-03-16T06:06:37Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -239,6 +243,27 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat\n                         .zoom(ZOOM_LEVEL)\n                         .build();\n                 mapBoxMap.setCameraPosition(cameraPosition);\n+                scaleBarPlugin = new ScaleBarPlugin(mapView, mapBoxMap);\n+\n+                int color = isDarkTheme?R.color.bottom_bar_light:R.color.bottom_bar_dark;\n+\n+                final float SIZE = new TextView(getContext()).getTextSize()-1;     //Default text size for scalebar params\n+                final float SCALEBAR_HEIGHT = (float) (SIZE/3.5);                  //these values are chosen to keep scalebar size comparable to other text depending upon the screen size and device resolution\n+                final float SCALEBAR_BORDER_WIDTH = SIZE/10;\n+                final float SCALEBAR_MARGIN = SIZE/2;\n+\n+                scaleBarOptions = new ScaleBarOptions(getContext())\n+                    .setTextColor(color)\n+                    .setTextSize(SIZE)\n+                    .setBarHeight(SCALEBAR_HEIGHT)\n+                    .setBorderWidth(SCALEBAR_BORDER_WIDTH)\n+                    .setRefreshInterval(15)            //Refresh time for scalebar in millisec\n+                    .setMarginTop(SCALEBAR_MARGIN)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64f55c0bcf1a031a39942ed65d279ce6980d7d52"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MDA3ODk2", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#pullrequestreview-375007896", "createdAt": "2020-03-16T08:45:54Z", "commit": {"oid": "64f55c0bcf1a031a39942ed65d279ce6980d7d52"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODo0NTo1NFrOF2qRbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODo0NTo1NFrOF2qRbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg2MDAxNQ==", "bodyText": "This spacing is not in style for the project, try pressing ctrl+alt+l in this file, or consider setting up a macro like mentioned in the docs", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#discussion_r392860015", "createdAt": "2020-03-16T08:45:54Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -239,6 +243,27 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat\n                         .zoom(ZOOM_LEVEL)\n                         .build();\n                 mapBoxMap.setCameraPosition(cameraPosition);\n+                scaleBarPlugin = new ScaleBarPlugin(mapView, mapBoxMap);\n+\n+                int color = isDarkTheme?R.color.bottom_bar_light:R.color.bottom_bar_dark;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64f55c0bcf1a031a39942ed65d279ce6980d7d52"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MDM1MzY5", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#pullrequestreview-375035369", "createdAt": "2020-03-16T09:27:40Z", "commit": {"oid": "64f55c0bcf1a031a39942ed65d279ce6980d7d52"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOToyNzo0MFrOF2rmvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOToyNzo0MFrOF2rmvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg4MTg1NA==", "bodyText": "these don't need to be fields I think, local variables should be fine", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#discussion_r392881854", "createdAt": "2020-03-16T09:27:40Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -196,6 +198,8 @@\n     private boolean isVisibleToUser;\n     private MapboxMap.OnCameraMoveListener cameraMoveListener;\n     private fr.free.nrw.commons.location.LatLng lastFocusLocation;\n+    private ScaleBarPlugin scaleBarPlugin;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64f55c0bcf1a031a39942ed65d279ce6980d7d52"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dc06fa52f7689faf2f1c9840458c708b755a44a", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/1dc06fa52f7689faf2f1c9840458c708b755a44a", "committedDate": "2020-03-16T10:26:00Z", "message": "Default setting for scalebar refresh interval"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0dca05065c64f12897be7ba94aa5a88954062271", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/0dca05065c64f12897be7ba94aa5a88954062271", "committedDate": "2020-03-16T12:16:12Z", "message": "Reformatted code for adding scalebar"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MTY1NjYw", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#pullrequestreview-375165660", "createdAt": "2020-03-16T12:23:45Z", "commit": {"oid": "0dca05065c64f12897be7ba94aa5a88954062271"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMjoyMzo0NVrOF2xhew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMjoyMzo0NVrOF2xhew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjk3ODgxMQ==", "bodyText": "I kind of glanced over this because I thought I already saw review comments but I would caution against this.\nResolve a dimen value that is appropriate here, you can use context.getResources().getDimensionPixelSize(R.dimen.some_dimen) and that will give you different sizes depending on the density of the screen. All of these should be like that and the math should be avoided. Constructing a textview to find out the default value of text size is putting the donkey before the cart, a little bit", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#discussion_r392978811", "createdAt": "2020-03-16T12:23:45Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -239,8 +241,25 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat\n                         .zoom(ZOOM_LEVEL)\n                         .build();\n                 mapBoxMap.setCameraPosition(cameraPosition);\n-            });\n \n+                ScaleBarPlugin scaleBarPlugin = new ScaleBarPlugin(mapView, mapBoxMap);\n+                int color = isDarkTheme ? R.color.bottom_bar_light : R.color.bottom_bar_dark;\n+                //Default text size for scalebar params\n+                final float SIZE = new TextView(getContext()).getTextSize() - 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0dca05065c64f12897be7ba94aa5a88954062271"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64ee6921cb7123a49be01bd1b69f646b885579eb", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/64ee6921cb7123a49be01bd1b69f646b885579eb", "committedDate": "2020-03-16T18:04:53Z", "message": "dimen values for scalebar params"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1ODMxNjIx", "url": "https://github.com/commons-app/apps-android-commons/pull/3511#pullrequestreview-375831621", "createdAt": "2020-03-17T08:41:06Z", "commit": {"oid": "64ee6921cb7123a49be01bd1b69f646b885579eb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 413, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}