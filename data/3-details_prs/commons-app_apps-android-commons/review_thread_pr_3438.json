{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwODI5ODky", "number": 3438, "reviewThreads": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMjo1OTowNVrODjdCDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNjozMjo1MVrODo-78A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NTAyNDEyOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMjo1OTowNVrOFvRO-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjozMDo0NlrOFyaunA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwOTc1Mw==", "bodyText": "Hi @glitch101, instead of making a new instance of NearbyParentFragment, as the NearbyParentFragmentPresenter is already implementing LocationUpdateListener, how about adding a new method in LocationUpdateListener, enableLocationOffDialog(boolean shouldEnable) and as the presenter will be implementing it, it can be routed from there to the fragment", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r385109753", "createdAt": "2020-02-27T12:59:05Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "diffHunk": "@@ -212,6 +213,14 @@ public void onProviderEnabled(String provider) {\n     @Override\n     public void onProviderDisabled(String provider) {\n         Timber.d(\"Provider %s disabled\", provider);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4d91a6774c83d8a3e94007dc364aa7ff740c9a8"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE1MTI4Ng==", "bodyText": "You are right! That would be a cleaner and robust method to toggle the dialog based on location state. I have pushed the changes you recommended. Thanks for the tip @ashishkumar468! Please let me know if I did something wrong. :)", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r385151286", "createdAt": "2020-02-27T14:14:14Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "diffHunk": "@@ -212,6 +213,14 @@ public void onProviderEnabled(String provider) {\n     @Override\n     public void onProviderDisabled(String provider) {\n         Timber.d(\"Provider %s disabled\", provider);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwOTc1Mw=="}, "originalCommit": {"oid": "c4d91a6774c83d8a3e94007dc364aa7ff740c9a8"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3MTIyNA==", "bodyText": "The boolean trap", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r388171224", "createdAt": "2020-03-05T09:29:17Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "diffHunk": "@@ -212,6 +213,14 @@ public void onProviderEnabled(String provider) {\n     @Override\n     public void onProviderDisabled(String provider) {\n         Timber.d(\"Provider %s disabled\", provider);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwOTc1Mw=="}, "originalCommit": {"oid": "c4d91a6774c83d8a3e94007dc364aa7ff740c9a8"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxMTAzNg==", "bodyText": "The boolean trap\n\nThanks, @macgills for introducing me to The boolean trap. I will take care of it in this PR and in the future.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r388411036", "createdAt": "2020-03-05T16:30:46Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "diffHunk": "@@ -212,6 +213,14 @@ public void onProviderEnabled(String provider) {\n     @Override\n     public void onProviderDisabled(String provider) {\n         Timber.d(\"Provider %s disabled\", provider);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwOTc1Mw=="}, "originalCommit": {"oid": "c4d91a6774c83d8a3e94007dc364aa7ff740c9a8"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5ODcyOTM4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/contributions/ContributionsFragment.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxODoxMDoyNVrOFxQ3TQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxODoxNTo0NFrOFyehTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIwMDg0NQ==", "bodyText": "This seems to be code used during development. Would it be useful to keep this in production too?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r387200845", "createdAt": "2020-03-03T18:10:25Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/ContributionsFragment.java", "diffHunk": "@@ -528,6 +528,15 @@ public void onLocationChangedMedium(LatLng latLng) {\n         updateClosestNearbyCardViewInfo();\n     }\n \n+    @Override\n+    public void changeDialogState(boolean enableDialog) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQzMjEzMQ==", "bodyText": "This seems to be code used during development. Would it be useful to keep this in production too?\n\nCan you please explain more about this comment? Are some classes development specific only? If so, I didn't know that was the case.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r388432131", "createdAt": "2020-03-05T17:03:04Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/ContributionsFragment.java", "diffHunk": "@@ -528,6 +528,15 @@ public void onLocationChangedMedium(LatLng latLng) {\n         updateClosestNearbyCardViewInfo();\n     }\n \n+    @Override\n+    public void changeDialogState(boolean enableDialog) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIwMDg0NQ=="}, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ2NTIzMA==", "bodyText": "Sorry for not being clear. AFAIK, there's no development specific class. What I actually meant to ask was: Is it worth retaining this log prints which just captures whether or not the dialog is enabled? Would it help us somewhere? If not, it can just be removed, right?\nAnyways, I suppose it doesn't matter anymore as you're planning to remove this state. \ud83d\ude42", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r388465230", "createdAt": "2020-03-05T18:00:07Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/ContributionsFragment.java", "diffHunk": "@@ -528,6 +528,15 @@ public void onLocationChangedMedium(LatLng latLng) {\n         updateClosestNearbyCardViewInfo();\n     }\n \n+    @Override\n+    public void changeDialogState(boolean enableDialog) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIwMDg0NQ=="}, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ3MzE2NQ==", "bodyText": "What I actually meant to ask was: Is it worth retaining these log prints which just captures whether or not the dialog is enabled? Would it help us somewhere?\n\nPoint noted \ud83e\udd13\n\nAnyways, I suppose it doesn't matter anymore as you're planning to remove this state.\n\nYup", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r388473165", "createdAt": "2020-03-05T18:15:44Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/ContributionsFragment.java", "diffHunk": "@@ -528,6 +528,15 @@ public void onLocationChangedMedium(LatLng latLng) {\n         updateClosestNearbyCardViewInfo();\n     }\n \n+    @Override\n+    public void changeDialogState(boolean enableDialog) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIwMDg0NQ=="}, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5ODc5NzQyOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxODozMToyMFrOFxRi-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMToxNjoxOVrOFzjIpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIxMjAyNg==", "bodyText": "There's an unintended consequence of handling the null state of curLatLng this way, I suppose. Consider this, the location is on and is in \"High Accuracy mode\" but the device has not yet been located. In this case tapping on the \"Locate me\" icon shows the the \"Turn on location?\" dialog each time I tap on it. So, it looks like we get null in curLatLng for more cases than you mentioned. This app behaviour is not ideal and should be corrected.\nNote that the app behaviour I describe is accurate, but I'm speculating that I'm observing the behaviour as a consequence of curLatLng being null. I haven't confirmed this. So, there's a possibility that I'm observing the behaviour for different reasons. Anyways, can you look into how to fix this?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r387212026", "createdAt": "2020-03-03T18:31:20Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1235,7 +1239,12 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            showLocationNullDialog();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA1Mzk1Mg==", "bodyText": "Hi @sivaraam!  I am actually busy working on a project and would most likely be able to continue the discussion and make the changes in a day or two. I apologize for the delay.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r388053952", "createdAt": "2020-03-05T02:58:03Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1235,7 +1239,12 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            showLocationNullDialog();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIxMjAyNg=="}, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ5NDg1OQ==", "bodyText": "There's an unintended consequence of handling the null state of curLatLng this way, I suppose. Consider this, the location is on and is in \"High Accuracy mode\" but the device has not yet been located. In this case tapping on the \"Locate me\" icon shows the the \"Turn on location?\" dialog each time I tap on it. So, it looks like we get null in curLatLng for more cases than you mentioned. This app behaviour is not ideal and should be corrected.\n\nI agree. I tried to reproduce this behaviour just now and I was able to do it by turning my internet off and location set to High Accuracy.\nIn order to deal with this NULL state, one choice is we don't show the Dialog when location is NULL ie when location is not available since we already get a toast for that. I think this actually makes sense since the Dialog is to prompt the user to enable location in case it's off and not when it's NULL. Any suggestions?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r388494859", "createdAt": "2020-03-05T18:56:19Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1235,7 +1239,12 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            showLocationNullDialog();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIxMjAyNg=="}, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2NzQ5OQ==", "bodyText": "There's an unintended consequence of handling the null state of curLatLng this way, I suppose. Consider this, the location is on and is in \"High Accuracy mode\" but the device has not yet been located. In this case tapping on the \"Locate me\" icon shows the the \"Turn on location?\" dialog each time I tap on it. So, it looks like we get null in curLatLng for more cases than you mentioned. This app behaviour is not ideal and should be corrected.\n\nI agree. I tried to reproduce this behaviour just now and I was able to do it by turning my internet off and location set to High Accuracy.\nIn order to deal with this NULL state, one choice is we don't show the Dialog when location is NULL ie when location is not available since we already get a toast for that. I think this actually makes sense since the Dialog is to prompt the user to enable location in case it's off and not when it's NULL. Any suggestions?\n\nWe can check if the internet is enabled or not as a listener is slready set up in the app but I am afraid that this will be a messy way to handle this since the same conditions can occur due to different reasons which we might not be able to foresee now. What is your opinion @sivaraam ?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r389567499", "createdAt": "2020-03-09T10:14:12Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1235,7 +1239,12 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            showLocationNullDialog();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIxMjAyNg=="}, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2ODgzOQ==", "bodyText": "Also, I know that this PR and its issue have been pending for too long now but I just want to make sure that we do this right because otherwise, it could cost us more time afterwards. So, thanks for the patience.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r389568839", "createdAt": "2020-03-09T10:16:50Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1235,7 +1239,12 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            showLocationNullDialog();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIxMjAyNg=="}, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU5MzAzMA==", "bodyText": "Any suggestions?\n\nI'm sorry. I totally missed this comment. Feel free to ping me when I haven't responded within a reasonable amount of time.\n\none choice is we don't show the Dialog when location is NULL ie when location is not available since we already get a toast for that. I think this actually makes sense since the Dialog is to prompt the user to enable location in case it's off and not when it's NULL\n\nI'm still not sure in what all cases we get NULL here. Is there any case other than \"location in device only mode\" and \"location is in high accuracy mode but device not yet been found precisely\" for which we get NULL?\nIn contrast, if Nearby doesn't work in \"device only mode\" wouldn't it be better to show the dialog when location is set to \"device only mode\". Can you check if there is a reliable way to identify if the location is in \"device only mode\"? I suppose the Play Services API could help us here but we decided not to use it so I think we would have to find another way, if available. Or we might have to re-consider and re-discuss about that decision.\n\nWe can check if the internet is enabled or not as a listener is slready set up in the app but I am afraid that this will be a messy way to handle this ...\n\nYeah, it's messy indeed.\n\n... since the same conditions can occur due to different reasons which we might not be able to foresee now.\n\nExactly. You observed this when you turned off the internet but when I observed this my device's internet was not turned off. It just took some time to get the accurate location of the device in my case (and this happens a lot for me). When I tap on the \"Locate me\" button in the meanwhile I see the pop-up.\n\n... I just want to make sure that we do this right because otherwise, it could cost us more time afterwards.\n\nPerfect! It's always better to do things right than to rush them and regret when it bites us later.\n\nSo, thanks for the patience.\n\nActually, thanks a lot to you for patiently listening to feedback and improvising the PR! It's appreciated. \ud83d\ude42", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r389593030", "createdAt": "2020-03-09T11:06:26Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1235,7 +1239,12 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            showLocationNullDialog();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIxMjAyNg=="}, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU5NjYwNA==", "bodyText": "I'm sorry. I totally missed this comment. Feel free to ping me when I haven't responded within a reasonable amount of time.\n\nI will keep that in mind :)\n\nIs there any case other than \"location in device only mode\" and \"location is in high accuracy mode but device not yet been found precisely\" for which we get NULL?\n\nOther than the internet off case I mentioned above, I don't know. I didn't find any other case but I am sure there are more circumstances that can cause this.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r389596604", "createdAt": "2020-03-09T11:14:33Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1235,7 +1239,12 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            showLocationNullDialog();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIxMjAyNg=="}, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU5NzM0OQ==", "bodyText": "Actually, thanks a lot to you for patiently listening to feedback and improvising the PR! It's appreciated.\n\nI am just trying to learn from you guys as fast as possible! \ud83e\udd13", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r389597349", "createdAt": "2020-03-09T11:16:19Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1235,7 +1239,12 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            showLocationNullDialog();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIxMjAyNg=="}, "originalCommit": {"oid": "0777cb032da0218585684471d4c55f425b7ab916"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNDI2NTkzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMTowNzoyOVrOFzi5lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMToyMDoyNVrOFzjPnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU5MzQ5Mg==", "bodyText": "As we don't handle the NULL case separately anymore, this comment would be misleading and can be removed.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r389593492", "createdAt": "2020-03-09T11:07:29Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1235,7 +1237,12 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            showEnableLocationDialog();\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // location is not null but it is not enabled. So, user should be prompted", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30650ec770957d9b4f6d93ebaad6efaf835694ea"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU5OTEzNQ==", "bodyText": "Done!", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r389599135", "createdAt": "2020-03-09T11:20:25Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1235,7 +1237,12 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            showEnableLocationDialog();\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // location is not null but it is not enabled. So, user should be prompted", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU5MzQ5Mg=="}, "originalCommit": {"oid": "30650ec770957d9b4f6d93ebaad6efaf835694ea"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNjI1NTg0OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxOToyNDo1NlrOFz2Olw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwODo1MjowOVrOF1VvlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw==", "bodyText": "Ok. I think I've managed to figure out a way to show the dialog only when appropriate.\nTry this:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (curLatLng == null) {\n          \n          \n            \n                        return;\n          \n          \n            \n                    } else if (!locationManager.isLocationEnabled()) {\n          \n          \n            \n                        // Location is not set to High Accuracy.\n          \n          \n            \n                        // Let's prompt the user using a dialog box.\n          \n          \n            \n                        showEnableLocationDialog();\n          \n          \n            \n                    }\n          \n          \n            \n                    if (curLatLng == null) {\n          \n          \n            \n                        if (!locationManager.isLocationEnabled()) {\n          \n          \n            \n                            // Location is not set to High Accuracy.\n          \n          \n            \n                            // Let's prompt the user using a dialog box.\n          \n          \n            \n                            showEnableLocationDialog();\n          \n          \n            \n                        }\n          \n          \n            \n            \n          \n          \n            \n                        return;\n          \n          \n            \n                    }\n          \n      \n    \n    \n  \n\nLet me know if this works fine.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r389910167", "createdAt": "2020-03-09T19:24:56Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyMDIxNg==", "bodyText": "Ignore my previous comment. I think a more appropriate place to make the change in would be the NearbyParentFragmentPresenter. We shouldn't have any concerns about handling the null case if we make the change there. To be clear, I'm not suggesting to do the change there to avoid the null handling but it really does seem to be appropriate place to do the change. Changing it here has some other unintended consequences.\nI'll let you figure out the appropriate place to change there, though. \ud83d\ude09", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390120216", "createdAt": "2020-03-10T06:46:57Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIzNzc3NA==", "bodyText": "I think a more appropriate place to make the change in would be the NearbyParentFragmentPresenter.\n\nWait a second. Don't we need to check the location state when the Locate Me button is pressed? And since we are using the MVP architecture, the only way to do that is in the  View section and NearbyParentFragment is the view.\nWe can't do this in the presenter if we want to stick to MVP architecture and even if we do it, it will be more complex than doing that in View.\nThese are just my thoughts according to what I know. That being said, like always, I could be wrong.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390237774", "createdAt": "2020-03-10T11:02:05Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI1NjQ0NA==", "bodyText": "I can't speak to this implementation much but if the View has logic in it then it is not a View. A View tells the Presenter something happened and then it is the Presenter's responsibility to figure out what the view should do, this may entail some updates to the Model", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390256444", "createdAt": "2020-03-10T11:42:22Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI1OTY4Mw==", "bodyText": "But when the user presses Locate Me button, the method ReCenterMap checks screen orientation and also checks if the location is not null. All this is done in NearbyParentFragment and not in its presenter NearbyParentFragmentPresenter. Am  I missing something?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390259683", "createdAt": "2020-03-10T11:49:09Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI2MTIzNA==", "bodyText": "Also, can you tell me which class will be called the View of the Presenter NearbyParentFragmentPresenter? Is it NearbyParentFragment or NearbyParentFragmentContract or any other class? I haven't worked with the MVP architecture before, so I apologize for the trouble.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390261234", "createdAt": "2020-03-10T11:52:39Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI2Mjc5Mw==", "bodyText": "A bad design decision, they happen for many reasons and sometimes even good ones. The presenter should only call recenter if the location was not null, it should also probably construct those CameraPosition objects.\nCalling things Views/Presenters/Model doesn't make them actually adhere to the rules.\nNowadays I prefer MVI because of explicit predictable state modelling but that is neither here nor there.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390262793", "createdAt": "2020-03-10T11:56:01Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI2Mzk3OA==", "bodyText": "And the presenter should not be setting clickListeners, the primary things you do in a view is render and set clickListeners, that should be it. The dumber the view the happier your life", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390263978", "createdAt": "2020-03-10T11:58:33Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI2NjA2Mw==", "bodyText": "A bad design decision, they happen for many reasons and sometimes even good ones.\n\nI agree. Sometimes, rules have to be broken as no rule/theory/architecture can satisfy all conditions.\n\nThe presenter should only call recenter if the location was not null, it should also probably construct those CameraPosition objects.\n\nMaybe we can open a new issue for it.\n\nNowadays I prefer MVI because of explicit predictable state modelling but that is neither here nor there.\n\nThanks, I will check MVI out. Intents seem great.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390266063", "createdAt": "2020-03-10T12:03:09Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI2NjMzMw==", "bodyText": "The dumber the view the happier your life\n\nI will keep that in mind.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390266333", "createdAt": "2020-03-10T12:03:40Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI2NjkyMQ==", "bodyText": "This article isn't bad. I haven't done MVP in years so I don't have immediate access to a great resource.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390266921", "createdAt": "2020-03-10T12:04:57Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI2NzUyOQ==", "bodyText": "This article isn't bad. I haven't done MVP in years so I don't have immediate access to a great resource.\n\nThanks, I will check it out :)", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390267529", "createdAt": "2020-03-10T12:06:15Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI3MDkyNA==", "bodyText": "Sorry, your comments weren't showing up for me .\n\nAlso, can you tell me which class will be called the View of the Presenter NearbyParentFragmentPresenter? Is it NearbyParentFragment or NearbyParentFragmentContract or any other class?\n\n*Contract are typically where people put all the methods that the View/Presenter/Model will call. These contracts are interfaces that should describe easily what a screen does. The concrete instances are the implementations of your M/V/P, I think it is ctrl+alt+b to go to implementations of an interface in AS. Here it is NearbyParentFragment because it implements Contract.View\n\nMaybe we can open a new issue for it.\n\nI wouldn't worry about it for now, sometimes it is better to let sleeping dogs lie. Hopefully at some point it can be addressed but I doubt it is a priority", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390270924", "createdAt": "2020-03-10T12:13:11Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE2OTI4Ng==", "bodyText": "I wouldn't worry about it for now, sometimes it is better to let sleeping dogs  lie. Hopefully at some point it can be addressed but I doubt it is a priority\n\nGood point but wouldn't be nice if we let people know that there's a dog lying here? \ud83d\ude09\nBy which I mean wouldn't it be nice if we open an issue just to note that there's this issue with the way things are right now and we would have to fix them some time in the future... before the dog wakes up.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r391169286", "createdAt": "2020-03-11T18:13:15Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ3NTA5Mg==", "bodyText": "NearbyParentFragment is 1456 lines long, there are other problems that are way more major than  \"This method should adhere more to the architecture\". By all means create the issue, I just have never seen these issues get resolved piecemeal", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r391475092", "createdAt": "2020-03-12T08:52:09Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1236,6 +1238,10 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n             return;\n+        } else if (!locationManager.isLocationEnabled()) {\n+            // Location is not set to High Accuracy.\n+            // Let's prompt the user using a dialog box.\n+            showEnableLocationDialog();\n         }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDE2Nw=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNjI1NjU3OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxOToyNToxMFrOFz2PDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMToyNToxOFrOF0K4EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDI4Ng==", "bodyText": "These strings should be moved to strings.xml. \"Yes\" and \"No\" should already be there.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r389910286", "createdAt": "2020-03-09T19:25:10Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1265,6 +1271,23 @@ public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         mapBox.animateCamera(CameraUpdateFactory.newCameraPosition(position), 1000);\n     }\n \n+    private void showEnableLocationDialog() {\n+        // This dialog box prompts the user to set the location to High Accuracy\n+        DialogUtil.showAlertDialog(getActivity(), \"Turn on location?\", \"Nearby needs location enabled to work properly\",\n+                \"Yes\", \"No\",  this::openLocationSettings, null);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0ODQ2NQ==", "bodyText": "Done", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390248465", "createdAt": "2020-03-10T11:25:18Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1265,6 +1271,23 @@ public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         mapBox.animateCamera(CameraUpdateFactory.newCameraPosition(position), 1000);\n     }\n \n+    private void showEnableLocationDialog() {\n+        // This dialog box prompts the user to set the location to High Accuracy\n+        DialogUtil.showAlertDialog(getActivity(), \"Turn on location?\", \"Nearby needs location enabled to work properly\",\n+                \"Yes\", \"No\",  this::openLocationSettings, null);\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDI4Ng=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNjI1OTY5OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxOToyNjowN1rOFz2Q8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMToxMzo0M1rOF0Kj8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDc3MA==", "bodyText": "Should we be saying GPS instead of location as that's what we're looking for? \ud83e\udd14", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r389910770", "createdAt": "2020-03-09T19:26:07Z", "author": {"login": "sivaraam"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -596,4 +596,7 @@ Upload your first media by tapping on the add button.</string>\n   <string name=\"wallpaper_set_unsuccessfully\">Something went wrong. Could not set the wallpaper</string>\n   <string name=\"setting_wallpaper_dialog_title\">Set as Wallpaper</string>\n   <string name=\"setting_wallpaper_dialog_message\">Setting Wallpaper. Please wait\u2026</string>\n+\n+  <string name=\"cannot_open_location_settings\">Could not open location settings. Please turn location on manually</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0MzMxMg==", "bodyText": "Yeah but the settings page that will open will be of Location. We could show this instead:Failed to open location settings. Please turn on location and set it to High Accuracy.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r390243312", "createdAt": "2020-03-10T11:13:43Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -596,4 +596,7 @@ Upload your first media by tapping on the add button.</string>\n   <string name=\"wallpaper_set_unsuccessfully\">Something went wrong. Could not set the wallpaper</string>\n   <string name=\"setting_wallpaper_dialog_title\">Set as Wallpaper</string>\n   <string name=\"setting_wallpaper_dialog_message\">Setting Wallpaper. Please wait\u2026</string>\n+\n+  <string name=\"cannot_open_location_settings\">Could not open location settings. Please turn location on manually</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkxMDc3MA=="}, "originalCommit": {"oid": "a5dd3f9f2c7a12f3da98d1b6d6eaabcf71007c7d"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyNDMyODg1OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxODo0MTo1MFrOF1EFpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNjoyOTozNVrOF2KVow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE4NTgzMA==", "bodyText": "I just wanted to share another thing I've been wondering about the usage of the word \"High Accuracy\" for some time now. Apologies before hand if I'm being overly pedantic. Personally, due to the diversity of Android devices out there I don't think we could even use \"High Accuracy\" reliably. For instance, my device reads out the parameters it uses in each location mode:\n\nPixel has a totally different approach:\n\nSo, I'm not sure if that would be a best choice.\nThat said, I don't think we could do anything better about it too. Let me know if there are better suggestions.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r391185830", "createdAt": "2020-03-11T18:41:50Z", "author": {"login": "sivaraam"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -596,4 +596,9 @@ Upload your first media by tapping on the add button.</string>\n   <string name=\"wallpaper_set_unsuccessfully\">Something went wrong. Could not set the wallpaper</string>\n   <string name=\"setting_wallpaper_dialog_title\">Set as Wallpaper</string>\n   <string name=\"setting_wallpaper_dialog_message\">Setting Wallpaper. Please wait\u2026</string>\n+\n+  <string name=\"cannot_open_location_settings\">Failed to open location settings. Please turn on location and set it to High Accuracy</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "831f303bd24d9a99c12fad888d1898a48e4a1f30"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI0ODExOQ==", "bodyText": "I just wanted to share another thing I've been wondering about the usage of the word \"High Accuracy\" for some time now. Apologies before hand if I'm being overly pedantic. Personally, due to the diversity of Android devices out there I don't think we could even use \"High Accuracy\" reliably. For instance, my device reads out the parameters it uses in each location mode:\nPixel has a totally different approach:\nSo, I'm not sure if that would be a best choice.\nThat said, I don't think we could do anything better about it too. Let me know if there are better suggestions.\n\nYes, this is a valid point. Also, if we show a long and descriptive toast, it will soon disappear before they can read all of it. Using Play Services would have simplified this problem but that's not an option sadly.\nI will let you know if anything good comes to mind.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r392248119", "createdAt": "2020-03-13T14:05:36Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -596,4 +596,9 @@ Upload your first media by tapping on the add button.</string>\n   <string name=\"wallpaper_set_unsuccessfully\">Something went wrong. Could not set the wallpaper</string>\n   <string name=\"setting_wallpaper_dialog_title\">Set as Wallpaper</string>\n   <string name=\"setting_wallpaper_dialog_message\">Setting Wallpaper. Please wait\u2026</string>\n+\n+  <string name=\"cannot_open_location_settings\">Failed to open location settings. Please turn on location and set it to High Accuracy</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE4NTgzMA=="}, "originalCommit": {"oid": "831f303bd24d9a99c12fad888d1898a48e4a1f30"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjMzNjgwMw==", "bodyText": "@sivaraam How does this look? Can we replace the Please set location mode to High Accuracy with the above-shown toast?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r392336803", "createdAt": "2020-03-13T16:29:35Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -596,4 +596,9 @@ Upload your first media by tapping on the add button.</string>\n   <string name=\"wallpaper_set_unsuccessfully\">Something went wrong. Could not set the wallpaper</string>\n   <string name=\"setting_wallpaper_dialog_title\">Set as Wallpaper</string>\n   <string name=\"setting_wallpaper_dialog_message\">Setting Wallpaper. Please wait\u2026</string>\n+\n+  <string name=\"cannot_open_location_settings\">Failed to open location settings. Please turn on location and set it to High Accuracy</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE4NTgzMA=="}, "originalCommit": {"oid": "831f303bd24d9a99c12fad888d1898a48e4a1f30"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyNDMzMDU3OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxODo0MjoyNVrOF1EG3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxODo0MjoyNVrOF1EG3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE4NjE0MA==", "bodyText": "Kindly move these strings to strings.xml too.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r391186140", "createdAt": "2020-03-11T18:42:25Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1265,6 +1277,25 @@ public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         mapBox.animateCamera(CameraUpdateFactory.newCameraPosition(position), 1000);\n     }\n \n+    @Override\n+    public void showGPSOffDialog() {\n+        // This dialog box prompts the user to set the location to High Accuracy\n+        DialogUtil.showAlertDialog(getActivity(), \"Turn on location?\", \"Nearby needs location enabled to work properly\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "831f303bd24d9a99c12fad888d1898a48e4a1f30"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNjY2MzEyOnYy", "diffSide": "LEFT", "path": ".idea/codeStyles/Project.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToxNTozMFrOF248UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNTozNTo0M1rOF2504A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwMDM2OQ==", "bodyText": "revert changes to this file please", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393100369", "createdAt": "2020-03-16T15:15:30Z", "author": {"login": "macgills"}, "path": ".idea/codeStyles/Project.xml", "diffHunk": "@@ -47,31 +47,9 @@\n       <option name=\"SPACE_BEFORE_SUPERCLASS_COLON\" value=\"false\" />\n     </Objective-C>\n     <Objective-C-extensions>\n-      <option name=\"GENERATE_INSTANCE_VARIABLES_FOR_PROPERTIES\" value=\"ASK\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExNDg0OA==", "bodyText": "I can't understand how these files changed. I will revert these. Sorry for the trouble", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393114848", "createdAt": "2020-03-16T15:35:43Z", "author": {"login": "aryan-earth"}, "path": ".idea/codeStyles/Project.xml", "diffHunk": "@@ -47,31 +47,9 @@\n       <option name=\"SPACE_BEFORE_SUPERCLASS_COLON\" value=\"false\" />\n     </Objective-C>\n     <Objective-C-extensions>\n-      <option name=\"GENERATE_INSTANCE_VARIABLES_FOR_PROPERTIES\" value=\"ASK\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwMDM2OQ=="}, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNjY2NDYwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToxNTo1MFrOF249SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToxNTo1MFrOF249SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwMDYxNg==", "bodyText": "revert this change", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393100616", "createdAt": "2020-03-16T15:15:50Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -213,7 +212,7 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\n     @Override\n     public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n         super.onViewCreated(view, savedInstanceState);\n-        isDarkTheme = systemThemeUtils.isDeviceInNightMode();\n+        isDarkTheme = applicationKvStore.getBoolean(\"theme\", false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNjY2NTYxOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToxNjowNFrOF2494w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToxNjowNFrOF2494w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwMDc3MQ==", "bodyText": "revert this change", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393100771", "createdAt": "2020-03-16T15:16:04Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -229,8 +228,8 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat\n                 UiSettings uiSettings = mapBoxMap.getUiSettings();\n                 uiSettings.setCompassGravity(Gravity.BOTTOM | Gravity.LEFT);\n                 uiSettings.setCompassMargins(12, 0, 0, 24);\n-                uiSettings.setLogoEnabled(true);\n-                uiSettings.setAttributionEnabled(true);\n+                uiSettings.setLogoEnabled(false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNjY3MDI0OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToxNzowNVrOF25Aqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToyNDo1M1rOF25WcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwMTQ4Mg==", "bodyText": "this log is not in keeping with the name of this method, which one is happening here? Slightly or significantly?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393101482", "createdAt": "2020-03-16T15:17:05Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -911,7 +910,7 @@ public void onLocationChangedSignificantly(fr.free.nrw.commons.location.LatLng l\n \n     @Override\n     public void onLocationChangedSlightly(fr.free.nrw.commons.location.LatLng latLng) {\n-        Timber.d(\"Location slightly changed\");\n+        Timber.d(\"Location significantly changed\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwNzA1Ng==", "bodyText": "Slightly. I have fixed it. Thanks", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393107056", "createdAt": "2020-03-16T15:24:53Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -911,7 +910,7 @@ public void onLocationChangedSignificantly(fr.free.nrw.commons.location.LatLng l\n \n     @Override\n     public void onLocationChangedSlightly(fr.free.nrw.commons.location.LatLng latLng) {\n-        Timber.d(\"Location slightly changed\");\n+        Timber.d(\"Location significantly changed\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwMTQ4Mg=="}, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNjY3ODg3OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToxOTowOFrOF25GOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNTozODozMlrOF258mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwMjkwNw==", "bodyText": "The user of locationManager needs to know the correct strings to give this method for it to be able to work. A method isNetworkProviderEnabled would be better from an API perspective, or if this method accepted an Enum", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393102907", "createdAt": "2020-03-16T15:19:08Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1238,6 +1237,9 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            if (!locationManager.isProviderEnabled(\"network\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwODQ0OA==", "bodyText": "So, instead of isProviderEnabled in LocationServiceManager, I should add a method isNetworkProviderEnabled? Should I also add one for GPS?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393108448", "createdAt": "2020-03-16T15:26:47Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1238,6 +1237,9 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            if (!locationManager.isProviderEnabled(\"network\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwMjkwNw=="}, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExMzA0Ng==", "bodyText": "Yes or create an enum\nenum class LocationProvider{\nGPS(\"gps\"), Network(\"network\")\n}\n\nsetProvider(LocationProvider locationProvider){\nreturn locationManager.isProviderEnabled(locationProvider.getProvider());\n\nEnums are generally better for api design as you don't have to add a new method per LocationProvider, just a new case of Enum.\nHere it is probably overkill as there are only the 2 providers if memory serves. Also there are definitely constants for these and you shouldn't be using raw strings", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393113046", "createdAt": "2020-03-16T15:33:07Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1238,6 +1237,9 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            if (!locationManager.isProviderEnabled(\"network\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwMjkwNw=="}, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExNjgyNw==", "bodyText": "Enums seem neat. I will keep those in mind for future implementations but you are also right that it's overkill here for just two providers.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393116827", "createdAt": "2020-03-16T15:38:32Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1238,6 +1237,9 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            if (!locationManager.isProviderEnabled(\"network\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwMjkwNw=="}, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNjY4NjMzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNToyMDo1M1rOF25LDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNTozNTo1M1rOF251bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwNDE0MQ==", "bodyText": "We should never catch Exception, if you need to catch an exception catch the one that is actually thrown.\nYou probably don't need to catch an Exception here, you could resolve the intent", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393104141", "createdAt": "2020-03-16T15:20:53Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1268,6 +1270,27 @@ public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         mapBox.animateCamera(CameraUpdateFactory.newCameraPosition(position), 1000);\n     }\n \n+    @Override\n+    public void showLocationOffDialog() {\n+        // This creates a dialog box that prompts the user to enable location\n+        DialogUtil\n+            .showAlertDialog(getActivity(), getString(R.string.ask_to_turn_location_on), getString(R.string.nearby_needs_location),\n+                getString(R.string.yes), getString(R.string.no),  this::openLocationSettings, null);\n+    }\n+\n+    @Override\n+    public void openLocationSettings() {\n+        // This method opens the location settings of the device along with a followup toast.\n+        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\n+        try {\n+            getContext().startActivity(intent);\n+            Toast.makeText(getContext(), R.string.set_location_mode_high_accuracy, Toast.LENGTH_LONG).show();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 108}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExMjExMw==", "bodyText": "The try/catch clause was added because Android Studio was warning me that startActivity may produce a Null Pointer Exception but you are right. Let's resolve the intent.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393112113", "createdAt": "2020-03-16T15:31:49Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1268,6 +1270,27 @@ public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         mapBox.animateCamera(CameraUpdateFactory.newCameraPosition(position), 1000);\n     }\n \n+    @Override\n+    public void showLocationOffDialog() {\n+        // This creates a dialog box that prompts the user to enable location\n+        DialogUtil\n+            .showAlertDialog(getActivity(), getString(R.string.ask_to_turn_location_on), getString(R.string.nearby_needs_location),\n+                getString(R.string.yes), getString(R.string.no),  this::openLocationSettings, null);\n+    }\n+\n+    @Override\n+    public void openLocationSettings() {\n+        // This method opens the location settings of the device along with a followup toast.\n+        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\n+        try {\n+            getContext().startActivity(intent);\n+            Toast.makeText(getContext(), R.string.set_location_mode_high_accuracy, Toast.LENGTH_LONG).show();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwNDE0MQ=="}, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 108}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzExNDk4OQ==", "bodyText": "The NPE is because getContext is potentially null, a fragment only has a valid context after onAttach and it is removed from a context in onDetach", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393114989", "createdAt": "2020-03-16T15:35:53Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1268,6 +1270,27 @@ public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         mapBox.animateCamera(CameraUpdateFactory.newCameraPosition(position), 1000);\n     }\n \n+    @Override\n+    public void showLocationOffDialog() {\n+        // This creates a dialog box that prompts the user to enable location\n+        DialogUtil\n+            .showAlertDialog(getActivity(), getString(R.string.ask_to_turn_location_on), getString(R.string.nearby_needs_location),\n+                getString(R.string.yes), getString(R.string.no),  this::openLocationSettings, null);\n+    }\n+\n+    @Override\n+    public void openLocationSettings() {\n+        // This method opens the location settings of the device along with a followup toast.\n+        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\n+        try {\n+            getContext().startActivity(intent);\n+            Toast.makeText(getContext(), R.string.set_location_mode_high_accuracy, Toast.LENGTH_LONG).show();\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEwNDE0MQ=="}, "originalCommit": {"oid": "53279a74a77f54f2820e700ea2a4c4308510643b"}, "originalPosition": 108}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNzAwODU0OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjozNjoyNVrOF28Y6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjo0OTowMFrOF2853w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1Njg0Mg==", "bodyText": "These should be constants or enums", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393156842", "createdAt": "2020-03-16T16:36:25Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "diffHunk": "@@ -214,8 +215,12 @@ public void onProviderDisabled(String provider) {\n         Timber.d(\"Provider %s disabled\", provider);\n     }\n \n-    public boolean isProviderEnabled(String provider) {\n-        return locationManager.isProviderEnabled(provider);\n+    public boolean isNetworkProviderEnabled() {\n+        return locationManager.isProviderEnabled(String.valueOf(R.string.network_provider));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE2MzI2MA==", "bodyText": "I am able to understand what you mean by enums but the constants part is confusing me. I am sorry but can you please explain it to me? Are you referring that I create a String variable in LocationManager with a final attribute like this:\nprivate final String NETWORK_PROVIDER = \"network\";", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393163260", "createdAt": "2020-03-16T16:45:48Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "diffHunk": "@@ -214,8 +215,12 @@ public void onProviderDisabled(String provider) {\n         Timber.d(\"Provider %s disabled\", provider);\n     }\n \n-    public boolean isProviderEnabled(String provider) {\n-        return locationManager.isProviderEnabled(provider);\n+    public boolean isNetworkProviderEnabled() {\n+        return locationManager.isProviderEnabled(String.valueOf(R.string.network_provider));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1Njg0Mg=="}, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE2Mzk4Mw==", "bodyText": "eg LocationManager.GPS_PROVIDER", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393163983", "createdAt": "2020-03-16T16:46:56Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "diffHunk": "@@ -214,8 +215,12 @@ public void onProviderDisabled(String provider) {\n         Timber.d(\"Provider %s disabled\", provider);\n     }\n \n-    public boolean isProviderEnabled(String provider) {\n-        return locationManager.isProviderEnabled(provider);\n+    public boolean isNetworkProviderEnabled() {\n+        return locationManager.isProviderEnabled(String.valueOf(R.string.network_provider));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1Njg0Mg=="}, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE2NDQ5Nw==", "bodyText": "Enums or StringDefs would be better, constants like the one you mentioned are fine, if you put them in string files, they will be localized and we don't want that right?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393164497", "createdAt": "2020-03-16T16:47:50Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "diffHunk": "@@ -214,8 +215,12 @@ public void onProviderDisabled(String provider) {\n         Timber.d(\"Provider %s disabled\", provider);\n     }\n \n-    public boolean isProviderEnabled(String provider) {\n-        return locationManager.isProviderEnabled(provider);\n+    public boolean isNetworkProviderEnabled() {\n+        return locationManager.isProviderEnabled(String.valueOf(R.string.network_provider));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1Njg0Mg=="}, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE2NDk3NA==", "bodyText": "Oh! Now I got it. Thank you :)", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393164974", "createdAt": "2020-03-16T16:48:34Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "diffHunk": "@@ -214,8 +215,12 @@ public void onProviderDisabled(String provider) {\n         Timber.d(\"Provider %s disabled\", provider);\n     }\n \n-    public boolean isProviderEnabled(String provider) {\n-        return locationManager.isProviderEnabled(provider);\n+    public boolean isNetworkProviderEnabled() {\n+        return locationManager.isProviderEnabled(String.valueOf(R.string.network_provider));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1Njg0Mg=="}, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE2NTI3OQ==", "bodyText": "The constants already exist in the framework, so just use those @glitch101", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393165279", "createdAt": "2020-03-16T16:49:00Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/location/LocationServiceManager.java", "diffHunk": "@@ -214,8 +215,12 @@ public void onProviderDisabled(String provider) {\n         Timber.d(\"Provider %s disabled\", provider);\n     }\n \n-    public boolean isProviderEnabled(String provider) {\n-        return locationManager.isProviderEnabled(provider);\n+    public boolean isNetworkProviderEnabled() {\n+        return locationManager.isProviderEnabled(String.valueOf(R.string.network_provider));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1Njg0Mg=="}, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNzAxMTUzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjozNzowN1rOF28azg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjo0MDozNlrOF28j0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1NzMyNg==", "bodyText": "Is this related with this PR?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393157326", "createdAt": "2020-03-16T16:37:07Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -228,8 +231,8 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat\n                 UiSettings uiSettings = mapBoxMap.getUiSettings();\n                 uiSettings.setCompassGravity(Gravity.BOTTOM | Gravity.LEFT);\n                 uiSettings.setCompassMargins(12, 0, 0, 24);\n-                uiSettings.setLogoEnabled(false);\n-                uiSettings.setAttributionEnabled(false);\n+                uiSettings.setLogoEnabled(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1OTYzNQ==", "bodyText": "No. I guess I mixed these up while updating my fork. These have been reverted.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393159635", "createdAt": "2020-03-16T16:40:36Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -228,8 +231,8 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat\n                 UiSettings uiSettings = mapBoxMap.getUiSettings();\n                 uiSettings.setCompassGravity(Gravity.BOTTOM | Gravity.LEFT);\n                 uiSettings.setCompassMargins(12, 0, 0, 24);\n-                uiSettings.setLogoEnabled(false);\n-                uiSettings.setAttributionEnabled(false);\n+                uiSettings.setLogoEnabled(true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1NzMyNg=="}, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNzAxMzI4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjozNzozM1rOF28b7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjo0MTozM1rOF28mpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1NzYxNA==", "bodyText": "Un related, revert changes", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393157614", "createdAt": "2020-03-16T16:37:33Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -823,10 +826,10 @@ public void animateFABs() {\n     }\n \n     private void showFABs() {\n-            NearbyFABUtils.addAnchorToBigFABs(fabPlus, bottomSheetDetails.getId());\n-            fabPlus.show();\n-            NearbyFABUtils.addAnchorToSmallFABs(fabGallery, getView().findViewById(R.id.empty_view).getId());\n-            NearbyFABUtils.addAnchorToSmallFABs(fabCamera, getView().findViewById(R.id.empty_view1).getId());\n+        NearbyFABUtils.addAnchorToBigFABs(fabPlus, bottomSheetDetails.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE2MDM1OA==", "bodyText": "These have been reverted too. Thanks \ud83d\ude04", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393160358", "createdAt": "2020-03-16T16:41:33Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -823,10 +826,10 @@ public void animateFABs() {\n     }\n \n     private void showFABs() {\n-            NearbyFABUtils.addAnchorToBigFABs(fabPlus, bottomSheetDetails.getId());\n-            fabPlus.show();\n-            NearbyFABUtils.addAnchorToSmallFABs(fabGallery, getView().findViewById(R.id.empty_view).getId());\n-            NearbyFABUtils.addAnchorToSmallFABs(fabCamera, getView().findViewById(R.id.empty_view1).getId());\n+        NearbyFABUtils.addAnchorToBigFABs(fabPlus, bottomSheetDetails.getId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1NzYxNA=="}, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNzAxNDg1OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjozNzo1N1rOF28c7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjozNzo1N1rOF28c7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1Nzg2OQ==", "bodyText": "Remove this", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393157869", "createdAt": "2020-03-16T16:37:57Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1289,6 +1292,7 @@ public void openLocationSettings() {\n             Toast.makeText(getContext(), R.string.cannot_open_location_settings, Toast.LENGTH_LONG).show();\n             Timber.e(e);\n         }\n+//        PackageManager packageManager = getActivity().getPackageManager();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNzAxNTc2OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/values/strings.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjozODoxMFrOF28diw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjozODoxMFrOF28diw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1ODAyNw==", "bodyText": "Remove these from strings, use constants or enums", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393158027", "createdAt": "2020-03-16T16:38:10Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -607,5 +607,7 @@ Upload your first media by tapping on the add button.</string>\n   <string name=\"set_location_mode_high_accuracy\">Please make sure that location is set to both GPS and mobile networks</string>\n   <string name=\"ask_to_turn_location_on\">Turn on location?</string>\n   <string name=\"nearby_needs_location\">Nearby needs location enabled to work properly</string>\n+  <string name=\"gps_provider\">gps</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNzAxNjg3OnYy", "diffSide": "RIGHT", "path": ".idea/codeStyles/Project.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjozODoyNlrOF28ePA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjozODoyNlrOF28ePA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1ODIwNA==", "bodyText": "Revert the changes in this file", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393158204", "createdAt": "2020-03-16T16:38:26Z", "author": {"login": "ashishkumar468"}, "path": ".idea/codeStyles/Project.xml", "diffHunk": "@@ -47,9 +47,31 @@\n       <option name=\"SPACE_BEFORE_SUPERCLASS_COLON\" value=\"false\" />\n     </Objective-C>\n     <Objective-C-extensions>\n+      <option name=\"GENERATE_INSTANCE_VARIABLES_FOR_PROPERTIES\" value=\"ASK\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55fb9487268efd0c17523d51206f8694f1be5dc4"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MTQ0MDg5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxODoxMzowNFrOF3oVFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxOTozODoyMFrOF3rMlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3Njc1Ng==", "bodyText": "Just like I expected this sort of brings us back to the unintended behaviour that I described before. When I have the location mode set to \"GPS only\" and tap on the \"Locate me\" icon before the device is located I see the dialog. I thought we didn't want that.\nIn the following screenshot, note the location icon in the notification area indicating GPS is on.\n\nThe following fixes this issue:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (!locationManager.isNetworkProviderEnabled()) {\n          \n          \n            \n                        if (!(locationManager.isNetworkProviderEnabled() || locationManager.isGPSProviderEnabled())) {", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393876756", "createdAt": "2020-03-17T18:13:04Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1238,6 +1241,9 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            if (!locationManager.isNetworkProviderEnabled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b67324df8772169b5c63301e561a83e57a375e1"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg5Nzk3OQ==", "bodyText": "When I have the location mode set to \"GPS only\" and tap on the \"Locate me\" icon before the device is located I see the dialog. I thought we didn't want that.\n\nNo, we do want that. Nearby cannot locate you without mobile network provider but it can locate you without GPS provider. Before the device is located and it is on GPS only, it can't locate the device because mobile provider is not enabled hence the dialog.\nEdit: You can try and disable the dialog and then you can observe that if your location is at GPS only, Nearby will not be able to determine your location. At least this is the behaviour I observed in my device.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393897979", "createdAt": "2020-03-17T18:48:53Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1238,6 +1241,9 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            if (!locationManager.isNetworkProviderEnabled()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3Njc1Ng=="}, "originalCommit": {"oid": "0b67324df8772169b5c63301e561a83e57a375e1"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzkxMzIxMQ==", "bodyText": "No, we do want that.\n\nI bet we don't. I'll explain the reason for why I'm stressing this in the end.\nAnyways, I see some misunderstanding here. Let me try to clarify. Previously, when I mentioned Nearby works fine with \"GPS only\" I meant it works for me in all cases. So, it works for me even if it's the first time. Of course, it takes time depending on where you are. It's quick when you're outdoors. It takes time when you're inside a building as it's hard to find the satellites when you're indoors. As I said before, Nearby only wants the location to be enabled. Nothing more than that. If you observe otherwise, then it's an issue we should look into. Try going outdoors and observe if your device is located by Nearby when the location is in \"GPS only\". Let me know how this goes.\nComing to the reason about why we don't want to show the dialog whenever the network provider is disabled. Some privacy conscious people would prefer always to use \"GPS only\" mode for the Location as there's some controversy about privacy issues associated with what we call the network provider. It's a valid claim. If we show the dialog when the location is in \"GPS only\" mode and the network provider is disabled, then there's a chance those people might misinterpret this. It's best if we just avoid this.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393913211", "createdAt": "2020-03-17T19:17:54Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1238,6 +1241,9 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            if (!locationManager.isNetworkProviderEnabled()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3Njc1Ng=="}, "originalCommit": {"oid": "0b67324df8772169b5c63301e561a83e57a375e1"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzkyMzczMg==", "bodyText": "Try going outdoors and observe if your device is located by Nearby when the location is in \"GPS only\". Let me know how this goes.\n\nYou are right! I tested Nearby with GPS only from my roof and it worked! I should have tested it outdoors :(\nEdit: I have committed your changes.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393923732", "createdAt": "2020-03-17T19:38:20Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1238,6 +1241,9 @@ private void setMapMarkerActions(Marker selectedMarker) {\n     @Override\n     public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         if (curLatLng == null) {\n+            if (!locationManager.isNetworkProviderEnabled()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3Njc1Ng=="}, "originalCommit": {"oid": "0b67324df8772169b5c63301e561a83e57a375e1"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MTU0NDg0OnYy", "diffSide": "RIGHT", "path": "app/src/main/res/values/strings.xml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxODo0MjowOFrOF3pYyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxOTo1MToxNFrOF3rmsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg5NDA5MA==", "bodyText": "Just a few points about the strings:\n\nIt would be great if we could make both consistent. We use \"High Accuracy\" in the failed message but explicitly mention the location providers in the other one.\nAre we not asking for more than what's required here? We just need the location turned on, right? So can't we just get away with showing the toast corresponding to 'set_location_mode_high_accuracy'? Or if we really need to show the toast it would be nice we re-phrase the string as: \"Please turn on location. For best results, choose the High Accuracy mode.\"", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393894090", "createdAt": "2020-03-17T18:42:08Z", "author": {"login": "sivaraam"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -602,4 +602,10 @@ Upload your first media by tapping on the add button.</string>\n   <string name=\"theme_default_name\">Default</string>\n   <string name=\"theme_dark_name\">Dark</string>\n   <string name=\"theme_light_name\">Light</string>\n+\n+  <string name=\"cannot_open_location_settings\">Failed to open location settings. Please turn on location and set it to High Accuracy</string>\n+  <string name=\"set_location_mode_high_accuracy\">Please make sure that location is set to both GPS and mobile networks</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b67324df8772169b5c63301e561a83e57a375e1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzkwNDA3Ng==", "bodyText": "Are we not asking for more than what's required here? We just need the location turned on, right? So can't we just get away with showing the toast corresponding to 'set_location_mode_high_accuracy'?\n\n\nIf we show the toast corresponding to set_location_mode_high_accuracy and let's say that somehow the app failed to open the location settings then I am sure that it will definitely confuse the user if we just say to them Please make sure that location is set to both GPS and mobile networks because they just clicked on a button on a dialog that was gonna open the settings for them. But, that's just my view and I am open to ideas :)\n\nOr if we really need to show the toast it would be nice we re-phrase the string as: \"Please turn on location. For best results, choose the High Accuracy mode.\"\n\nThis looks good and shouldn't we also add Failed to open location settings in its beginning?", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393904076", "createdAt": "2020-03-17T19:00:02Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -602,4 +602,10 @@ Upload your first media by tapping on the add button.</string>\n   <string name=\"theme_default_name\">Default</string>\n   <string name=\"theme_dark_name\">Dark</string>\n   <string name=\"theme_light_name\">Light</string>\n+\n+  <string name=\"cannot_open_location_settings\">Failed to open location settings. Please turn on location and set it to High Accuracy</string>\n+  <string name=\"set_location_mode_high_accuracy\">Please make sure that location is set to both GPS and mobile networks</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg5NDA5MA=="}, "originalCommit": {"oid": "0b67324df8772169b5c63301e561a83e57a375e1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzkxNjgwOQ==", "bodyText": "If we show the toast corresponding to set_location_mode_high_accuracy and let's say that somehow the app failed to open the location settings then I am sure that it will definitely confuse the user if we just say to them Please make sure that location is set to both GPS and mobile networks because they just clicked on a button on a dialog that was gonna open the settings for them. But\n\nWait. That shouldn't happen, right? You show the set_location_mode_high_accuracy toast only when you are able to open the location settings and the cannot_open_location_settings toast when you aren't able to open the location settings. What am I missing? \ud83e\udd14\n\n\nOr if we really need to show the toast it would be nice we re-phrase the string as: \"Please turn on location. For best results, choose the High Accuracy mode.\"\n\nThis looks good and shouldn't we also add Failed to open location settings in its beginning?\n\nOh! Apologies for the confusion. That was an alternative suggestion for the set_location_mode_high_accuracy string.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393916809", "createdAt": "2020-03-17T19:24:57Z", "author": {"login": "sivaraam"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -602,4 +602,10 @@ Upload your first media by tapping on the add button.</string>\n   <string name=\"theme_default_name\">Default</string>\n   <string name=\"theme_dark_name\">Dark</string>\n   <string name=\"theme_light_name\">Light</string>\n+\n+  <string name=\"cannot_open_location_settings\">Failed to open location settings. Please turn on location and set it to High Accuracy</string>\n+  <string name=\"set_location_mode_high_accuracy\">Please make sure that location is set to both GPS and mobile networks</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg5NDA5MA=="}, "originalCommit": {"oid": "0b67324df8772169b5c63301e561a83e57a375e1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzkzMDQxNg==", "bodyText": "Since we now know that Nearby works with any location mode(my bad), we could just say For best results, choose the High Accuracy mode.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r393930416", "createdAt": "2020-03-17T19:51:14Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -602,4 +602,10 @@ Upload your first media by tapping on the add button.</string>\n   <string name=\"theme_default_name\">Default</string>\n   <string name=\"theme_dark_name\">Dark</string>\n   <string name=\"theme_light_name\">Light</string>\n+\n+  <string name=\"cannot_open_location_settings\">Failed to open location settings. Please turn on location and set it to High Accuracy</string>\n+  <string name=\"set_location_mode_high_accuracy\">Please make sure that location is set to both GPS and mobile networks</string>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg5NDA5MA=="}, "originalCommit": {"oid": "0b67324df8772169b5c63301e561a83e57a375e1"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0MzAwNzg0OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNjozMjo1MVrOF33y3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMToyNjoyNlrOF4AvOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEzMDE0MA==", "bodyText": "Looks like you've forgot to update this after updating the strings file.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        Toast.makeText(getContext(), R.string.set_location_mode_high_accuracy, Toast.LENGTH_LONG).show();\n          \n          \n            \n                        Toast.makeText(getContext(), R.string.recommend_high_accuracy_mode, Toast.LENGTH_LONG).show();", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r394130140", "createdAt": "2020-03-18T06:32:51Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1268,6 +1274,28 @@ public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         mapBox.animateCamera(CameraUpdateFactory.newCameraPosition(position), 1000);\n     }\n \n+    @Override\n+    public void showLocationOffDialog() {\n+        // This creates a dialog box that prompts the user to enable location\n+        DialogUtil\n+            .showAlertDialog(getActivity(), getString(R.string.ask_to_turn_location_on), getString(R.string.nearby_needs_location),\n+                getString(R.string.yes), getString(R.string.no),  this::openLocationSettings, null);\n+    }\n+\n+    @Override\n+    public void openLocationSettings() {\n+        // This method opens the location settings of the device along with a followup toast.\n+        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\n+        PackageManager packageManager = getActivity().getPackageManager();\n+\n+        if (intent.resolveActivity(packageManager)!= null) {\n+            startActivity(intent);\n+            Toast.makeText(getContext(), R.string.set_location_mode_high_accuracy, Toast.LENGTH_LONG).show();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7282c63b59f912af8e53c474fad1132d12062405"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIwOTE4MQ==", "bodyText": "Looks like you've forgot to update this after updating the strings file.\n\nAh! I am sorry. I was just too excited last night to get this PR merged since it's practically my first PR to any open source project.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r394209181", "createdAt": "2020-03-18T09:29:43Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1268,6 +1274,28 @@ public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         mapBox.animateCamera(CameraUpdateFactory.newCameraPosition(position), 1000);\n     }\n \n+    @Override\n+    public void showLocationOffDialog() {\n+        // This creates a dialog box that prompts the user to enable location\n+        DialogUtil\n+            .showAlertDialog(getActivity(), getString(R.string.ask_to_turn_location_on), getString(R.string.nearby_needs_location),\n+                getString(R.string.yes), getString(R.string.no),  this::openLocationSettings, null);\n+    }\n+\n+    @Override\n+    public void openLocationSettings() {\n+        // This method opens the location settings of the device along with a followup toast.\n+        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\n+        PackageManager packageManager = getActivity().getPackageManager();\n+\n+        if (intent.resolveActivity(packageManager)!= null) {\n+            startActivity(intent);\n+            Toast.makeText(getContext(), R.string.set_location_mode_high_accuracy, Toast.LENGTH_LONG).show();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEzMDE0MA=="}, "originalCommit": {"oid": "7282c63b59f912af8e53c474fad1132d12062405"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIzNTI5MA==", "bodyText": "It's totally understandable. I still distinctly remember how it felt when I had my first ever open source patch accepted. It was like flying the air \u2708\ufe0f. Ironically the patch was a change to the antigravity python module \ud83d\ude04\nAnyways, congratulation on your first PR! \ud83c\udf89  Well done.", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r394235290", "createdAt": "2020-03-18T10:12:46Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1268,6 +1274,28 @@ public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         mapBox.animateCamera(CameraUpdateFactory.newCameraPosition(position), 1000);\n     }\n \n+    @Override\n+    public void showLocationOffDialog() {\n+        // This creates a dialog box that prompts the user to enable location\n+        DialogUtil\n+            .showAlertDialog(getActivity(), getString(R.string.ask_to_turn_location_on), getString(R.string.nearby_needs_location),\n+                getString(R.string.yes), getString(R.string.no),  this::openLocationSettings, null);\n+    }\n+\n+    @Override\n+    public void openLocationSettings() {\n+        // This method opens the location settings of the device along with a followup toast.\n+        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\n+        PackageManager packageManager = getActivity().getPackageManager();\n+\n+        if (intent.resolveActivity(packageManager)!= null) {\n+            startActivity(intent);\n+            Toast.makeText(getContext(), R.string.set_location_mode_high_accuracy, Toast.LENGTH_LONG).show();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEzMDE0MA=="}, "originalCommit": {"oid": "7282c63b59f912af8e53c474fad1132d12062405"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI3NjY2NQ==", "bodyText": "Ironically the patch was a change to the antigravity python module smile\n\nXKCD, wow. A man of culture \ud83d\udc4f", "url": "https://github.com/commons-app/apps-android-commons/pull/3438#discussion_r394276665", "createdAt": "2020-03-18T11:26:26Z", "author": {"login": "aryan-earth"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1268,6 +1274,28 @@ public void recenterMap(fr.free.nrw.commons.location.LatLng curLatLng) {\n         mapBox.animateCamera(CameraUpdateFactory.newCameraPosition(position), 1000);\n     }\n \n+    @Override\n+    public void showLocationOffDialog() {\n+        // This creates a dialog box that prompts the user to enable location\n+        DialogUtil\n+            .showAlertDialog(getActivity(), getString(R.string.ask_to_turn_location_on), getString(R.string.nearby_needs_location),\n+                getString(R.string.yes), getString(R.string.no),  this::openLocationSettings, null);\n+    }\n+\n+    @Override\n+    public void openLocationSettings() {\n+        // This method opens the location settings of the device along with a followup toast.\n+        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\n+        PackageManager packageManager = getActivity().getPackageManager();\n+\n+        if (intent.resolveActivity(packageManager)!= null) {\n+            startActivity(intent);\n+            Toast.makeText(getContext(), R.string.set_location_mode_high_accuracy, Toast.LENGTH_LONG).show();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEzMDE0MA=="}, "originalCommit": {"oid": "7282c63b59f912af8e53c474fad1132d12062405"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4161, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}