{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNTMzMjgy", "number": 3326, "title": "Fixes: #3179 Make category search non case-sensitive", "bodyText": "Fix Category search being case sensitive\nFixes #3179  Make category search non case-sensitive\nChanged the string being sent to the MW api call to lower case.\nTested from the MW api fuzzy search url that the category suggestions would deliver the desired results no matter what case you sent in the api call so to fix the issue api call has been converted to lower case.\nAdditionally Javadocs have been added to the CategoryItem file.", "createdAt": "2020-01-16T09:09:22Z", "url": "https://github.com/commons-app/apps-android-commons/pull/3326", "merged": true, "mergeCommit": {"oid": "afdeaae0757d4d7773921169eb65d3ba9916834a"}, "closed": true, "closedAt": "2020-01-29T03:38:08Z", "author": {"login": "kbhardwaj123"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb62dVVgFqTM0Mzc2MjM4Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-9gQ4gFqTM0OTg0NTI4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNzYyMzg3", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#pullrequestreview-343762387", "createdAt": "2020-01-16T09:09:26Z", "commit": {"oid": "7bee1103084651c4ef0c55a3f8a829d244b95693"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MDE0MjA0", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#pullrequestreview-345014204", "createdAt": "2020-01-19T17:07:01Z", "commit": {"oid": "7bee1103084651c4ef0c55a3f8a829d244b95693"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNzowNzowMlrOFfPv4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQxNzowODo1M1rOFfPwZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwODE5NQ==", "bodyText": "Don\u2019t change CategoryClient directly. Change the top layer method that is passing the filter value. In this case it would be the corresponding fragment.", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#discussion_r368308195", "createdAt": "2020-01-19T17:07:02Z", "author": {"login": "maskaravivek"}, "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryClient.java", "diffHunk": "@@ -30,14 +30,15 @@ public CategoryClient(CategoryInterface CategoryInterface) {\n \n     /**\n      * Searches for categories containing the specified string.\n+     * It will be converted to Lower Case as the server performs Case-insensitive search.\n      *\n      * @param filter    The string to be searched\n      * @param itemLimit How many results are returned\n      * @param offset    Starts returning items from the nth result. If offset is 9, the response starts with the 9th item of the search result\n      * @return\n      */\n     public Observable<String> searchCategories(String filter, int itemLimit, int offset) {\n-        return responseToCategoryName(CategoryInterface.searchCategories(filter, itemLimit, offset));\n+        return responseToCategoryName(CategoryInterface.searchCategories(filter.toLowerCase(), itemLimit, offset));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bee1103084651c4ef0c55a3f8a829d244b95693"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwODI1Mw==", "bodyText": "Same as above", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#discussion_r368308253", "createdAt": "2020-01-19T17:07:52Z", "author": {"login": "maskaravivek"}, "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryClient.java", "diffHunk": "@@ -55,14 +56,15 @@ public CategoryClient(CategoryInterface CategoryInterface) {\n \n     /**\n      * Searches for categories starting with the specified string.\n+     * It will be converted to Lower Case as the server performs Case-insensitive search.\n      *\n      * @param prefix    The prefix to be searched\n      * @param itemLimit How many results are returned\n      * @param offset    Starts returning items from the nth result. If offset is 9, the response starts with the 9th item of the search result\n      * @return\n      */\n     public Observable<String> searchCategoriesForPrefix(String prefix, int itemLimit, int offset) {\n-        return responseToCategoryName(CategoryInterface.searchCategoriesForPrefix(prefix, itemLimit, offset));\n+        return responseToCategoryName(CategoryInterface.searchCategoriesForPrefix(prefix.toLowerCase(), itemLimit, offset));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bee1103084651c4ef0c55a3f8a829d244b95693"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMwODMyNQ==", "bodyText": "Are the java doc changes in this class related to the PR? If not it would be great if you could create another PR for it", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#discussion_r368308325", "createdAt": "2020-01-19T17:08:53Z", "author": {"login": "maskaravivek"}, "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryItem.java", "diffHunk": "@@ -3,6 +3,10 @@\n import android.os.Parcel;\n import android.os.Parcelable;\n \n+/**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bee1103084651c4ef0c55a3f8a829d244b95693"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6992ebbd26284118fd99c9b69f016073a0f82c37", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/6992ebbd26284118fd99c9b69f016073a0f82c37", "committedDate": "2020-01-19T12:12:31Z", "message": "CategoryItem: reverting javadoc changes"}, "afterCommit": {"oid": "5b05c97ec3d77e7900bad40edc95e188ccacb5d1", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/5b05c97ec3d77e7900bad40edc95e188ccacb5d1", "committedDate": "2020-01-19T13:53:47Z", "message": "CategoryItem: reverting javadoc changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1NTAzODMw", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#pullrequestreview-345503830", "createdAt": "2020-01-20T19:40:53Z", "commit": {"oid": "6272442bde8e67e3b3e3538ff7375577dc22ccd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxOTo0MDo1M1rOFfn0Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxOTo0MDo1M1rOFfn0Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODcwMjU1OQ==", "bodyText": "Please undo whitespace changes from this file.", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#discussion_r368702559", "createdAt": "2020-01-20T19:40:53Z", "author": {"login": "maskaravivek"}, "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryItem.java", "diffHunk": "@@ -3,6 +3,7 @@\n import android.os.Parcel;\n import android.os.Parcelable;\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6272442bde8e67e3b3e3538ff7375577dc22ccd8"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e58b8cc42fbb69f8044aeb7926732c81cec45f6a", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/e58b8cc42fbb69f8044aeb7926732c81cec45f6a", "committedDate": "2020-01-20T21:24:24Z", "message": "CategoryItem: fix whitespaces"}, "afterCommit": {"oid": "2fb891d846c9837d677e8aa9478add4d57498a19", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/2fb891d846c9837d677e8aa9478add4d57498a19", "committedDate": "2020-01-21T11:33:29Z", "message": "CategoryItem: fix whitespaces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b8adab61bc14f101905ee9e676c86d7a2b1a4ef", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/0b8adab61bc14f101905ee9e676c86d7a2b1a4ef", "committedDate": "2020-01-22T13:36:45Z", "message": "CategoryClient: fix category search case-sensitivity by converting to lower case as MW api is inherently case-sensitive, the results obtained will be same"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75469266197c1d2c5296a6e615860f4262a5905e", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/75469266197c1d2c5296a6e615860f4262a5905e", "committedDate": "2020-01-22T13:36:45Z", "message": "CategoryItem: reverting javadoc changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "514864abe3d6bd722e23bd49c4d525d34e046af0", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/514864abe3d6bd722e23bd49c4d525d34e046af0", "committedDate": "2020-01-22T13:36:45Z", "message": "CategoriesModel: make category search case-insensitive"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f742c349e8b908f136c290e619dae91f13a92a58", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/f742c349e8b908f136c290e619dae91f13a92a58", "committedDate": "2020-01-22T13:36:46Z", "message": "CategoryItem: fix whitespaces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c36b4822d88bfb282cf129a5b976243bae9e5ad1", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/c36b4822d88bfb282cf129a5b976243bae9e5ad1", "committedDate": "2020-01-22T13:36:46Z", "message": "Add tests for case-insensitivity"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2fb891d846c9837d677e8aa9478add4d57498a19", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/2fb891d846c9837d677e8aa9478add4d57498a19", "committedDate": "2020-01-21T11:33:29Z", "message": "CategoryItem: fix whitespaces"}, "afterCommit": {"oid": "c36b4822d88bfb282cf129a5b976243bae9e5ad1", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/c36b4822d88bfb282cf129a5b976243bae9e5ad1", "committedDate": "2020-01-22T13:36:46Z", "message": "Add tests for case-insensitivity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8e229212d6a9cb5c33930e39696087dd971766c", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/c8e229212d6a9cb5c33930e39696087dd971766c", "committedDate": "2020-01-22T17:58:34Z", "message": "CategoryClientTest: add more test cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2ODM3NTI0", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#pullrequestreview-346837524", "createdAt": "2020-01-22T19:17:46Z", "commit": {"oid": "d0fe2a2ea32e6270eace23522942db2ada6dc9bf"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb422b5d7f7cd498c60190fa9297e53fbb5a49d9", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/fb422b5d7f7cd498c60190fa9297e53fbb5a49d9", "committedDate": "2020-01-22T19:21:00Z", "message": "CategoryClientTest: fix travis ci test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0fe2a2ea32e6270eace23522942db2ada6dc9bf", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/d0fe2a2ea32e6270eace23522942db2ada6dc9bf", "committedDate": "2020-01-22T18:46:01Z", "message": "CategoryClientTest: travis ci test failed"}, "afterCommit": {"oid": "fb422b5d7f7cd498c60190fa9297e53fbb5a49d9", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/fb422b5d7f7cd498c60190fa9297e53fbb5a49d9", "committedDate": "2020-01-22T19:21:00Z", "message": "CategoryClientTest: fix travis ci test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b85e3464ff8abd542d8ddef92fcf896fa59bbcc7", "author": {"user": {"login": "kbhardwaj123", "name": "Kshitij Bhardwaj"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/b85e3464ff8abd542d8ddef92fcf896fa59bbcc7", "committedDate": "2020-01-23T12:14:17Z", "message": "CategoriesModelTest: changes mage to CategoriesModel and tested"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODQ1Mjg2", "url": "https://github.com/commons-app/apps-android-commons/pull/3326#pullrequestreview-349845286", "createdAt": "2020-01-29T03:37:41Z", "commit": {"oid": "b85e3464ff8abd542d8ddef92fcf896fa59bbcc7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 475, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}