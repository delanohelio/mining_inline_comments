{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMjg2MzUz", "number": 3569, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjoyMDoyMlrODqWlYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMTo0MzozNFrODqwSzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzM2ODAwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadModel.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjoyMDoyMlrOF6C6Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzoxOTo1MFrOF6FADQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQwOTQxOQ==", "bodyText": "It would be better if you could pass along this data, setting/retrieving a value in sharedprefences is a bit surprising", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r396409419", "createdAt": "2020-03-23T12:20:22Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadModel.java", "diffHunk": "@@ -205,6 +205,7 @@ public void updateUploadItem(int index, UploadItem uploadItem) {\n         UploadItem uploadItem1 = items.get(index);\n         uploadItem1.setDescriptions(uploadItem.descriptions);\n         uploadItem1.setTitle(uploadItem.title);\n+        store.putString(\"Title\", uploadItem.place.getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd17de7ccb45380f359a8ce17cd9789ee63a8bcd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQyMTIwMg==", "bodyText": "@macgills Can you please elaborate:-)\nshowSuccessToast method in WikiEditService class uses sharedpreference to retrieve the value for title. If not set it uses default, that's why i set the value when item is uploaded.", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r396421202", "createdAt": "2020-03-23T12:42:04Z", "author": {"login": "318anushka"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadModel.java", "diffHunk": "@@ -205,6 +205,7 @@ public void updateUploadItem(int index, UploadItem uploadItem) {\n         UploadItem uploadItem1 = items.get(index);\n         uploadItem1.setDescriptions(uploadItem.descriptions);\n         uploadItem1.setTitle(uploadItem.title);\n+        store.putString(\"Title\", uploadItem.place.getName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQwOTQxOQ=="}, "originalCommit": {"oid": "fd17de7ccb45380f359a8ce17cd9789ee63a8bcd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ0MzY2MQ==", "bodyText": "Yeah, whoever did that just shouldn't have. We shouldn't use shared preferences to communicate data unless it is actually a preference of the app/user.\nAdd wikiItemName as a parameter to showSuccessToast() and keep adding it up the chain of methods until you have access to it.\nI still have no idea what half these fields are or aren't so I can't comment if place.name() is a wikiItemName", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r396443661", "createdAt": "2020-03-23T13:19:50Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadModel.java", "diffHunk": "@@ -205,6 +205,7 @@ public void updateUploadItem(int index, UploadItem uploadItem) {\n         UploadItem uploadItem1 = items.get(index);\n         uploadItem1.setDescriptions(uploadItem.descriptions);\n         uploadItem1.setTitle(uploadItem.title);\n+        store.putString(\"Title\", uploadItem.place.getName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQwOTQxOQ=="}, "originalCommit": {"oid": "fd17de7ccb45380f359a8ce17cd9789ee63a8bcd"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MTAwNjIxOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/contributions/Contribution.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowNjo0OVrOF6mxmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTo1Mjo0NFrOF6oicQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5NzAxOA==", "bodyText": "If you add a field to contribution you have to add it to the parcelable methods as well or you break the contract", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r396997018", "createdAt": "2020-03-24T09:06:49Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/Contribution.java", "diffHunk": "@@ -68,6 +68,7 @@ public Contribution createFromParcel(Parcel parcel) {\n     public String decimalCoords;\n     public boolean isMultiple;\n     public String wikiDataEntityId;\n+    public String wikiItemName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "082d321053fac9e77b9022037aba1647cd929332"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzAyMDQ1Nw==", "bodyText": "I have a doubt. why isn't wikiDataEntityId added to parcelable method", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r397020457", "createdAt": "2020-03-24T09:43:55Z", "author": {"login": "318anushka"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/Contribution.java", "diffHunk": "@@ -68,6 +68,7 @@ public Contribution createFromParcel(Parcel parcel) {\n     public String decimalCoords;\n     public boolean isMultiple;\n     public String wikiDataEntityId;\n+    public String wikiItemName;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5NzAxOA=="}, "originalCommit": {"oid": "082d321053fac9e77b9022037aba1647cd929332"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzAyNDI3Nw==", "bodyText": "The Parcelable interface comes with some necessities for a class to implement, you must be able to write the object to a parcel and you must be able to read from a Parcel.\nSee the example\nRelevant lines\n     public void writeToParcel(Parcel out, int flags) {\n         out.writeInt(mData);\n     }\n\n     private MyParcelable(Parcel in) {\n         mData = in.readInt();\n     }", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r397024277", "createdAt": "2020-03-24T09:50:08Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/Contribution.java", "diffHunk": "@@ -68,6 +68,7 @@ public Contribution createFromParcel(Parcel parcel) {\n     public String decimalCoords;\n     public boolean isMultiple;\n     public String wikiDataEntityId;\n+    public String wikiItemName;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5NzAxOA=="}, "originalCommit": {"oid": "082d321053fac9e77b9022037aba1647cd929332"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzAyNTkwNQ==", "bodyText": "why isn't wikiDataEntityId added to parcelable method\n\nProbably someone messed up because it is difficult to see from a small change that this class is parcelable. You would have to know it off the top of your head", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r397025905", "createdAt": "2020-03-24T09:52:44Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/Contribution.java", "diffHunk": "@@ -68,6 +68,7 @@ public Contribution createFromParcel(Parcel parcel) {\n     public String decimalCoords;\n     public boolean isMultiple;\n     public String wikiDataEntityId;\n+    public String wikiItemName;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5NzAxOA=="}, "originalCommit": {"oid": "082d321053fac9e77b9022037aba1647cd929332"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MTAyMTgxOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/wikidata/WikidataEditService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOToxMTowOVrOF6m7WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTo0NDoyMlrOF6oOVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5OTUxMg==", "bodyText": "no need to assign this to a variable", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r396999512", "createdAt": "2020-03-24T09:11:09Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/wikidata/WikidataEditService.java", "diffHunk": "@@ -119,8 +119,8 @@ private void handleClaimResult(String wikidataEntityId, String revisionId) {\n     /**\n      * Show a success toast when the edit is made successfully\n      */\n-    private void showSuccessToast() {\n-        String title = directKvStore.getString(\"Title\", \"\");\n+    private void showSuccessToast(String wikiItemName) {\n+        String title = wikiItemName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "082d321053fac9e77b9022037aba1647cd929332"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzAyMDc1Ng==", "bodyText": "yes will directly pass it", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r397020756", "createdAt": "2020-03-24T09:44:22Z", "author": {"login": "318anushka"}, "path": "app/src/main/java/fr/free/nrw/commons/wikidata/WikidataEditService.java", "diffHunk": "@@ -119,8 +119,8 @@ private void handleClaimResult(String wikidataEntityId, String revisionId) {\n     /**\n      * Show a success toast when the edit is made successfully\n      */\n-    private void showSuccessToast() {\n-        String title = directKvStore.getString(\"Title\", \"\");\n+    private void showSuccessToast(String wikiItemName) {\n+        String title = wikiItemName;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5OTUxMg=="}, "originalCommit": {"oid": "082d321053fac9e77b9022037aba1647cd929332"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MTU4MDI4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadService.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMTo0MzozNFrOF6sciQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMjo1NDoyOVrOF6u2Pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA4OTkyOQ==", "bodyText": "I don't think you need to null check this, or at least not here.\ncreateClaimWithLogging already null checks the p18 and wikidatEntityId, all fields that are only present when the contribution has an associated place ie was uploaded from Nearby or we detected it was Nearby Place from the associated image data.", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r397089929", "createdAt": "2020-03-24T11:43:34Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadService.java", "diffHunk": "@@ -278,10 +278,11 @@ private void uploadContribution(Contribution contribution) {\n                         showFailedNotification(contribution);\n                     } else {\n                         String canonicalFilename = \"File:\" + uploadResult.getFilename();\n+                        String wikiItemName = contribution.getWikiItemName()!=null?contribution.getWikiItemName():\"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09c2344907e402ed6cfffb82a8e6dd7ec0a448f1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA5MDc4Nw==", "bodyText": "It would be much nicer if we expressed Contribution & ContributionWithAssociatedWikidataItem as types (preferably better named ones too) instead of the current scenario. Far out of scope of this ticket, just me musing", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r397090787", "createdAt": "2020-03-24T11:45:18Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadService.java", "diffHunk": "@@ -278,10 +278,11 @@ private void uploadContribution(Contribution contribution) {\n                         showFailedNotification(contribution);\n                     } else {\n                         String canonicalFilename = \"File:\" + uploadResult.getFilename();\n+                        String wikiItemName = contribution.getWikiItemName()!=null?contribution.getWikiItemName():\"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA4OTkyOQ=="}, "originalCommit": {"oid": "09c2344907e402ed6cfffb82a8e6dd7ec0a448f1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEwODAxOQ==", "bodyText": "Sorry, Test cases \ud83d\ude05\nhave to edit test file to pass values.", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r397108019", "createdAt": "2020-03-24T12:16:51Z", "author": {"login": "318anushka"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadService.java", "diffHunk": "@@ -278,10 +278,11 @@ private void uploadContribution(Contribution contribution) {\n                         showFailedNotification(contribution);\n                     } else {\n                         String canonicalFilename = \"File:\" + uploadResult.getFilename();\n+                        String wikiItemName = contribution.getWikiItemName()!=null?contribution.getWikiItemName():\"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA4OTkyOQ=="}, "originalCommit": {"oid": "09c2344907e402ed6cfffb82a8e6dd7ec0a448f1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEyNjk5MQ==", "bodyText": "@macgills  Done :-)", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r397126991", "createdAt": "2020-03-24T12:50:39Z", "author": {"login": "318anushka"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadService.java", "diffHunk": "@@ -278,10 +278,11 @@ private void uploadContribution(Contribution contribution) {\n                         showFailedNotification(contribution);\n                     } else {\n                         String canonicalFilename = \"File:\" + uploadResult.getFilename();\n+                        String wikiItemName = contribution.getWikiItemName()!=null?contribution.getWikiItemName():\"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA4OTkyOQ=="}, "originalCommit": {"oid": "09c2344907e402ed6cfffb82a8e6dd7ec0a448f1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEyOTI3OQ==", "bodyText": "Good work", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r397129279", "createdAt": "2020-03-24T12:54:29Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadService.java", "diffHunk": "@@ -278,10 +278,11 @@ private void uploadContribution(Contribution contribution) {\n                         showFailedNotification(contribution);\n                     } else {\n                         String canonicalFilename = \"File:\" + uploadResult.getFilename();\n+                        String wikiItemName = contribution.getWikiItemName()!=null?contribution.getWikiItemName():\"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA4OTkyOQ=="}, "originalCommit": {"oid": "09c2344907e402ed6cfffb82a8e6dd7ec0a448f1"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4236, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}