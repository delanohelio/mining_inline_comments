{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1NTMyMTY3", "number": 3674, "title": "Converted Config Utils to Kotlin", "bodyText": "Description\nFixes #3673\nTests performed\nTested betaDebug on Google Pixel 2 with API level 29.", "createdAt": "2020-04-18T17:26:36Z", "url": "https://github.com/commons-app/apps-android-commons/pull/3674", "merged": true, "mergeCommit": {"oid": "22c20687f3a8e5e8170a924c03b25e1307ea8877"}, "closed": true, "closedAt": "2020-04-21T12:23:02Z", "author": {"login": "madhurgupta10"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcY5RUNAH2gAyNDA1NTMyMTY3OjcwZjViMGMzYzZkNGFkZWM2MDMxMGY0YzU2NGU0ZmEyYTlhZGQzNWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZwehNAFqTM5NzE2NDI0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b", "author": {"user": {"login": "madhurgupta10", "name": "Madhur Gupta"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/70f5b0c3c6d4adec60310f4c564e4fa2a9add35b", "committedDate": "2020-04-18T17:23:46Z", "message": "Converted Config Utils to Kotlin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTMzNzE5", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#pullrequestreview-395933719", "createdAt": "2020-04-18T17:26:40Z", "commit": {"oid": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MjE2OTYz", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#pullrequestreview-396216963", "createdAt": "2020-04-20T07:51:29Z", "commit": {"oid": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MjYzODQz", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#pullrequestreview-396263843", "createdAt": "2020-04-20T08:57:29Z", "commit": {"oid": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODo1NzoyOVrOGIKQlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODo1NzoyOVrOGIKQlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIwOTg3OQ==", "bodyText": "this doesn't need to be a get() as it doesn't need to be evaluated every time someone accesses it", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#discussion_r411209879", "createdAt": "2020-04-20T08:57:29Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/utils/ConfigUtils.kt", "diffHunk": "@@ -0,0 +1,32 @@\n+package fr.free.nrw.commons.utils\n+\n+import android.content.Context\n+import android.content.pm.PackageManager\n+import fr.free.nrw.commons.BuildConfig\n+import java.util.*\n+\n+object ConfigUtils {\n+    @JvmStatic\n+    val isBetaFlavour: Boolean\n+        get() = BuildConfig.FLAVOR == \"beta\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MjY2NDAw", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#pullrequestreview-396266400", "createdAt": "2020-04-20T09:00:50Z", "commit": {"oid": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwOTowMDo1MFrOGIKZrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwOTowMDo1MFrOGIKZrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIxMjIwNw==", "bodyText": "Could be rewritten to use kotlin string interpolation", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#discussion_r411212207", "createdAt": "2020-04-20T09:00:50Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/utils/ConfigUtils.kt", "diffHunk": "@@ -0,0 +1,32 @@\n+package fr.free.nrw.commons.utils\n+\n+import android.content.Context\n+import android.content.pm.PackageManager\n+import fr.free.nrw.commons.BuildConfig\n+import java.util.*\n+\n+object ConfigUtils {\n+    @JvmStatic\n+    val isBetaFlavour: Boolean\n+        get() = BuildConfig.FLAVOR == \"beta\"\n+\n+    @JvmStatic\n+    private fun getVersionName(context: Context): String {\n+        return try {\n+            context.packageManager\n+                .getPackageInfo(context.packageName, 0).versionName\n+        } catch (e: PackageManager.NameNotFoundException) {\n+            BuildConfig.VERSION_NAME\n+        }\n+    }\n+\n+    @JvmStatic\n+    fun getVersionNameWithSha(context: Context): String {\n+        return String.format(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MjY3MTE3", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#pullrequestreview-396267117", "createdAt": "2020-04-20T09:01:52Z", "commit": {"oid": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwOTowMTo1MlrOGIKcLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwOTowMTo1MlrOGIKcLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIxMjg0Ng==", "bodyText": "Might be nicer as an extension function on context", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#discussion_r411212846", "createdAt": "2020-04-20T09:01:52Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/utils/ConfigUtils.kt", "diffHunk": "@@ -0,0 +1,32 @@\n+package fr.free.nrw.commons.utils\n+\n+import android.content.Context\n+import android.content.pm.PackageManager\n+import fr.free.nrw.commons.BuildConfig\n+import java.util.*\n+\n+object ConfigUtils {\n+    @JvmStatic\n+    val isBetaFlavour: Boolean\n+        get() = BuildConfig.FLAVOR == \"beta\"\n+\n+    @JvmStatic\n+    private fun getVersionName(context: Context): String {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae127c9f5d13e81051b0183f7a7517f2e2f18e74", "author": {"user": {"login": "madhurgupta10", "name": "Madhur Gupta"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/ae127c9f5d13e81051b0183f7a7517f2e2f18e74", "committedDate": "2020-04-20T19:04:59Z", "message": "Changes made as per suggestion"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MTA2Mjg3", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#pullrequestreview-397106287", "createdAt": "2020-04-21T08:32:11Z", "commit": {"oid": "ae127c9f5d13e81051b0183f7a7517f2e2f18e74"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwODozMjoxMVrOGI5hDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwODozMjoxMVrOGI5hDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTk4NDE0MA==", "bodyText": "this can be omitted in both extension functions", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#discussion_r411984140", "createdAt": "2020-04-21T08:32:11Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/utils/ConfigUtils.kt", "diffHunk": "@@ -3,30 +3,22 @@ package fr.free.nrw.commons.utils\n import android.content.Context\n import android.content.pm.PackageManager\n import fr.free.nrw.commons.BuildConfig\n-import java.util.*\n \n object ConfigUtils {\n     @JvmStatic\n-    val isBetaFlavour: Boolean\n-        get() = BuildConfig.FLAVOR == \"beta\"\n+    val isBetaFlavour: Boolean = BuildConfig.FLAVOR == \"beta\"\n \n     @JvmStatic\n-    private fun getVersionName(context: Context): String {\n+    private fun Context.getVersionName(): String {\n         return try {\n-            context.packageManager\n-                .getPackageInfo(context.packageName, 0).versionName\n+            this.packageManager.getPackageInfo(this.packageName, 0).versionName", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae127c9f5d13e81051b0183f7a7517f2e2f18e74"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3e5b79c5bd744a30eb8c9210ca21a90080cd626", "author": {"user": {"login": "madhurgupta10", "name": "Madhur Gupta"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/f3e5b79c5bd744a30eb8c9210ca21a90080cd626", "committedDate": "2020-04-21T09:29:34Z", "message": "Omitted this"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MTY0MjQ2", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#pullrequestreview-397164246", "createdAt": "2020-04-21T09:42:58Z", "commit": {"oid": "f3e5b79c5bd744a30eb8c9210ca21a90080cd626"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 582, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}