{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NzczNjky", "number": 3913, "title": "Bugfix/categories search", "bodyText": "Description (required)\nFixes #3734, Refer #3179\nWhat changes did you make and why?\n\nRemoved toLowerCase in categorySearch()\n\nTests performed (required)\nTested betaDebug with Api 27", "createdAt": "2020-08-29T12:56:01Z", "url": "https://github.com/commons-app/apps-android-commons/pull/3913", "merged": true, "mergeCommit": {"oid": "4109d230230a88895fa15d13b477dbcf54185527"}, "closed": true, "closedAt": "2020-08-31T16:00:37Z", "author": {"login": "ashishkumar468"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcypNaNgH2gAyNDc1NzczNjkyOjhmMGVjNTI0ODk0Zjc0ZmMwNThhODYxNzZmNmU4YTQ4YmY3NzhkYjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEFIbmAFqTQ3ODIzNTczMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8f0ec524894f74fc058a86176f6e8a48bf778db1", "author": {"user": {"login": "ashishkumar468", "name": "Ashish"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/8f0ec524894f74fc058a86176f6e8a48bf778db1", "committedDate": "2020-07-07T17:23:03Z", "message": "Fixes #3734\n* Donot ignore case while searching categories"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a807c58dea979e7b459515159e189911ee63660", "author": {"user": {"login": "ashishkumar468", "name": "Ashish"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/0a807c58dea979e7b459515159e189911ee63660", "committedDate": "2020-08-30T07:51:08Z", "message": "Fixed test-cases to ensure search terms are passed as it is to the CategoryClient"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c8e0268aa740464a0267111c94c8950d3be28c5", "author": {"user": {"login": "ashishkumar468", "name": "Ashish"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/2c8e0268aa740464a0267111c94c8950d3be28c5", "committedDate": "2020-08-30T07:53:11Z", "message": "Used a First_Char_Caps title list term just to ensure test case tests as intended"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10a0436c3c4e940737a3584d0c04ee69ae093e5c", "author": {"user": {"login": "ashishkumar468", "name": "Ashish"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/10a0436c3c4e940737a3584d0c04ee69ae093e5c", "committedDate": "2020-08-30T08:04:57Z", "message": "Fixed searchAll with empty term test case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MjA5MjM1", "url": "https://github.com/commons-app/apps-android-commons/pull/3913#pullrequestreview-478209235", "createdAt": "2020-08-30T14:40:41Z", "commit": {"oid": "0a807c58dea979e7b459515159e189911ee63660"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNDo0MDo0MlrOHJjVnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMFQxNDo0MDo0MlrOHJjVnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc3ODIwNQ==", "bodyText": "Given the fact that the first title character is case insensitive in MediaWiki [ref], I don't think this test would help us catch bugs that we want it to catch. A safe case would be to have a set of test cases with search queries like:\n\nTEST\ntest\nTest Category", "url": "https://github.com/commons-app/apps-android-commons/pull/3913#discussion_r479778205", "createdAt": "2020-08-30T14:40:42Z", "author": {"login": "sivaraam"}, "path": "app/src/test/kotlin/fr/free/nrw/commons/category/CategoriesModelTest.kt", "diffHunk": "@@ -27,26 +30,39 @@ class CategoriesModelTest {\n         MockitoAnnotations.initMocks(this)\n     }\n \n-    // Test Case for verifying that Categories search (MW api calls) are case-insensitive\n+    // Test Case for verifying that Categories search (MW api calls)\n     @Test\n     fun searchAllFoundCaseTest() {\n         val categoriesModel = CategoriesModel(categoryClient, mock(), mock())\n \n         val expectedList = listOf(\"Test\")\n-        whenever(categoryClient.searchCategoriesForPrefix(\"tes\", 25))\n+        whenever(\n+            categoryClient.searchCategoriesForPrefix(\n+                ArgumentMatchers.anyString(),\n+                ArgumentMatchers.anyInt(),\n+                ArgumentMatchers.anyInt()\n+            )\n+        )\n             .thenReturn(Single.just(expectedList))\n \n         // Checking if both return \"Test\"\n         val expectedItems = expectedList.map { CategoryItem(it, false) }\n-        categoriesModel.searchAll(\"tes\", emptyList(), emptyList())\n+        var categoryTerm = \"Test\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a807c58dea979e7b459515159e189911ee63660"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MjM1NzMy", "url": "https://github.com/commons-app/apps-android-commons/pull/3913#pullrequestreview-478235732", "createdAt": "2020-08-30T21:31:40Z", "commit": {"oid": "10a0436c3c4e940737a3584d0c04ee69ae093e5c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 537, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}