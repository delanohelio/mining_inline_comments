{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNTg1ODc5", "number": 4082, "title": "Make sure exif is added if exists and not addet if null or 0.0", "bodyText": "Description (required)\nFixes #3684 and #4016 by making sure adding the coordinate if exists and avoiding adding it if 0.0, 0.0.", "createdAt": "2020-12-07T11:04:57Z", "url": "https://github.com/commons-app/apps-android-commons/pull/4082", "merged": true, "mergeCommit": {"oid": "3aa7a13ec5550d2b3240785b7bae822445dd274d"}, "closed": true, "closedAt": "2020-12-09T17:18:11Z", "author": {"login": "neslihanturan"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjzZPpgH2gAyNTMzNTg1ODc5OjQxNGQzMGY0ZTkxM2FiYzI2MmYxZWJjNGM2NGYwNTA1MTQyODIzOGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdke6gfAFqTU0ODE5MDM3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "414d30f4e913abc262f1ebc4c64f05051428238d", "author": {"user": {"login": "neslihanturan", "name": "neslihanturan"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/414d30f4e913abc262f1ebc4c64f05051428238d", "committedDate": "2020-12-07T10:57:19Z", "message": "Make sure exif is added if exists and not addet if null or 0.0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTcyOTk0", "url": "https://github.com/commons-app/apps-android-commons/pull/4082#pullrequestreview-546172994", "createdAt": "2020-12-07T14:00:53Z", "commit": {"oid": "414d30f4e913abc262f1ebc4c64f05051428238d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDowMDo1M1rOIAoFIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDowMDo1M1rOIAoFIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUyNzU4NA==", "bodyText": "Should we set imageCoordsExists = true here? (or move the one on line 48 to line 60)", "url": "https://github.com/commons-app/apps-android-commons/pull/4082#discussion_r537527584", "createdAt": "2020-12-07T14:00:53Z", "author": {"login": "domdomegg"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/ImageCoordinates.kt", "diffHunk": "@@ -34,20 +34,28 @@ class ImageCoordinates internal constructor(exif: ExifInterface?) {\n         //If image has no EXIF data and user has enabled GPS setting, get user's location\n         //Always return null as a temporary fix for #1599\n         if (exif != null) {\n-            val latitude = exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE)\n-            val latitudeRef = exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE_REF)\n-            val longitude = exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE)\n-            val longitudeRef = exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF)\n-            if (latitude != null && longitude != null && latitudeRef != null && longitudeRef != null) {\n-                //If image has EXIF data, extract image coords\n-                imageCoordsExists = true\n-                Timber.d(\"EXIF data has location info\")\n-                decLatitude =\n-                    if (ExifInterface.LATITUDE_NORTH == latitudeRef) convertToDegree(latitude)\n-                    else 0 - convertToDegree(latitude)\n-                decLongitude =\n-                    if (ExifInterface.LONGITUDE_EAST == longitudeRef) convertToDegree(longitude)\n-                    else 0 - convertToDegree(longitude)\n+            val latAndLong = exif.latLong\n+            if (latAndLong != null) {\n+                decLatitude = latAndLong[0]\n+                decLongitude = latAndLong[1]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "414d30f4e913abc262f1ebc4c64f05051428238d"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4aa0f215160fb800a823a04767603785d0187df", "author": {"user": {"login": "neslihanturan", "name": "neslihanturan"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/b4aa0f215160fb800a823a04767603785d0187df", "committedDate": "2020-12-09T12:17:36Z", "message": "Move boolean to bottom to cover both cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTkwMzcz", "url": "https://github.com/commons-app/apps-android-commons/pull/4082#pullrequestreview-548190373", "createdAt": "2020-12-09T13:39:34Z", "commit": {"oid": "b4aa0f215160fb800a823a04767603785d0187df"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 477, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}