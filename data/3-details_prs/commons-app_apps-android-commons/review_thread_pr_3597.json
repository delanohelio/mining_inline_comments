{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MjQ5Njg5", "number": 3597, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwOTo1ODoyNlrODvDfbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwOTo1OTowM1rODvDgfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNjY2ODYwOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwOTo1ODoyN1rOGBQWYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxMzo0OToxNlrOGBYmoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk2OTYzNA==", "bodyText": "does finishTask work too? I never want to have to think about task affinity", "url": "https://github.com/commons-app/apps-android-commons/pull/3597#discussion_r403969634", "createdAt": "2020-04-06T09:58:27Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "diffHunk": "@@ -86,7 +86,11 @@ public void onBackPressed() {\n         if (pager.getCurrentItem() != 0) {\n             pager.setCurrentItem(pager.getCurrentItem() - 1, true);\n         } else {\n-            finish();\n+            if(defaultKvStore.getBoolean(\"firstrun\",true)){\n+                finishAffinity();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c03b327dad077c3db8df5c509858f1c23640b87"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA3MjUwNA==", "bodyText": "On app resume, loginActivity keeps calling WelcomeActivity if firstrun is set true. So it's kinda stuck in loop and that's why finish() doesn't work.\nfinishAndRemoveTask?", "url": "https://github.com/commons-app/apps-android-commons/pull/3597#discussion_r404072504", "createdAt": "2020-04-06T13:03:03Z", "author": {"login": "318anushka"}, "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "diffHunk": "@@ -86,7 +86,11 @@ public void onBackPressed() {\n         if (pager.getCurrentItem() != 0) {\n             pager.setCurrentItem(pager.getCurrentItem() - 1, true);\n         } else {\n-            finish();\n+            if(defaultKvStore.getBoolean(\"firstrun\",true)){\n+                finishAffinity();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk2OTYzNA=="}, "originalCommit": {"oid": "3c03b327dad077c3db8df5c509858f1c23640b87"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA4Mzg4MA==", "bodyText": "finishTask()/finishAndRemoveTask() whatever works and doesn't mention affinities", "url": "https://github.com/commons-app/apps-android-commons/pull/3597#discussion_r404083880", "createdAt": "2020-04-06T13:20:01Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "diffHunk": "@@ -86,7 +86,11 @@ public void onBackPressed() {\n         if (pager.getCurrentItem() != 0) {\n             pager.setCurrentItem(pager.getCurrentItem() - 1, true);\n         } else {\n-            finish();\n+            if(defaultKvStore.getBoolean(\"firstrun\",true)){\n+                finishAffinity();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk2OTYzNA=="}, "originalCommit": {"oid": "3c03b327dad077c3db8df5c509858f1c23640b87"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA5NTg2MA==", "bodyText": "it requires min api 21 so i am using moveTaskToBack() instead", "url": "https://github.com/commons-app/apps-android-commons/pull/3597#discussion_r404095860", "createdAt": "2020-04-06T13:37:07Z", "author": {"login": "318anushka"}, "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "diffHunk": "@@ -86,7 +86,11 @@ public void onBackPressed() {\n         if (pager.getCurrentItem() != 0) {\n             pager.setCurrentItem(pager.getCurrentItem() - 1, true);\n         } else {\n-            finish();\n+            if(defaultKvStore.getBoolean(\"firstrun\",true)){\n+                finishAffinity();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk2OTYzNA=="}, "originalCommit": {"oid": "3c03b327dad077c3db8df5c509858f1c23640b87"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA5ODYwOA==", "bodyText": "hmmm that moves us even further from what we want to express. I guess finishAffinity  is best here, it at least has the word finish in it", "url": "https://github.com/commons-app/apps-android-commons/pull/3597#discussion_r404098608", "createdAt": "2020-04-06T13:40:49Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "diffHunk": "@@ -86,7 +86,11 @@ public void onBackPressed() {\n         if (pager.getCurrentItem() != 0) {\n             pager.setCurrentItem(pager.getCurrentItem() - 1, true);\n         } else {\n-            finish();\n+            if(defaultKvStore.getBoolean(\"firstrun\",true)){\n+                finishAffinity();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk2OTYzNA=="}, "originalCommit": {"oid": "3c03b327dad077c3db8df5c509858f1c23640b87"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEwMjMwNg==", "bodyText": "Exactly, or there is one more solution creating new intent and setting flag  FLAG_ACTIVITY_CLEAR_TOP", "url": "https://github.com/commons-app/apps-android-commons/pull/3597#discussion_r404102306", "createdAt": "2020-04-06T13:45:51Z", "author": {"login": "318anushka"}, "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "diffHunk": "@@ -86,7 +86,11 @@ public void onBackPressed() {\n         if (pager.getCurrentItem() != 0) {\n             pager.setCurrentItem(pager.getCurrentItem() - 1, true);\n         } else {\n-            finish();\n+            if(defaultKvStore.getBoolean(\"firstrun\",true)){\n+                finishAffinity();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk2OTYzNA=="}, "originalCommit": {"oid": "3c03b327dad077c3db8df5c509858f1c23640b87"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEwNDg2NQ==", "bodyText": "Or Welcome could be started for result, a cancel could be read as a finish for login,\npros: very explicit\ncons: way too much code.\nLets keep finishAffinity. it is easy to get rid of if minds change later.", "url": "https://github.com/commons-app/apps-android-commons/pull/3597#discussion_r404104865", "createdAt": "2020-04-06T13:49:16Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "diffHunk": "@@ -86,7 +86,11 @@ public void onBackPressed() {\n         if (pager.getCurrentItem() != 0) {\n             pager.setCurrentItem(pager.getCurrentItem() - 1, true);\n         } else {\n-            finish();\n+            if(defaultKvStore.getBoolean(\"firstrun\",true)){\n+                finishAffinity();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk2OTYzNA=="}, "originalCommit": {"oid": "3c03b327dad077c3db8df5c509858f1c23640b87"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwNjY3MTMzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQwOTo1OTowM1rOGBQX-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxMzoxODo1M1rOGBXRig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk3MDA0MA==", "bodyText": "we could call super here instead", "url": "https://github.com/commons-app/apps-android-commons/pull/3597#discussion_r403970040", "createdAt": "2020-04-06T09:59:03Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "diffHunk": "@@ -86,7 +86,11 @@ public void onBackPressed() {\n         if (pager.getCurrentItem() != 0) {\n             pager.setCurrentItem(pager.getCurrentItem() - 1, true);\n         } else {\n-            finish();\n+            if(defaultKvStore.getBoolean(\"firstrun\",true)){\n+                finishAffinity();\n+            } else{\n+                finish();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c03b327dad077c3db8df5c509858f1c23640b87"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA3Mzk0OQ==", "bodyText": "instead of finish right?", "url": "https://github.com/commons-app/apps-android-commons/pull/3597#discussion_r404073949", "createdAt": "2020-04-06T13:05:15Z", "author": {"login": "318anushka"}, "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "diffHunk": "@@ -86,7 +86,11 @@ public void onBackPressed() {\n         if (pager.getCurrentItem() != 0) {\n             pager.setCurrentItem(pager.getCurrentItem() - 1, true);\n         } else {\n-            finish();\n+            if(defaultKvStore.getBoolean(\"firstrun\",true)){\n+                finishAffinity();\n+            } else{\n+                finish();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk3MDA0MA=="}, "originalCommit": {"oid": "3c03b327dad077c3db8df5c509858f1c23640b87"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA4MzA4Mg==", "bodyText": "yes because it is the default behaviour of onBackpressed", "url": "https://github.com/commons-app/apps-android-commons/pull/3597#discussion_r404083082", "createdAt": "2020-04-06T13:18:53Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/WelcomeActivity.java", "diffHunk": "@@ -86,7 +86,11 @@ public void onBackPressed() {\n         if (pager.getCurrentItem() != 0) {\n             pager.setCurrentItem(pager.getCurrentItem() - 1, true);\n         } else {\n-            finish();\n+            if(defaultKvStore.getBoolean(\"firstrun\",true)){\n+                finishAffinity();\n+            } else{\n+                finish();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk3MDA0MA=="}, "originalCommit": {"oid": "3c03b327dad077c3db8df5c509858f1c23640b87"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4385, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}