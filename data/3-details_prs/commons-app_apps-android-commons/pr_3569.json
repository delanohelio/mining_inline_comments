{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMjg2MzUz", "number": 3569, "title": "Wiki itemname displaying in toast", "bodyText": "Description (required)\nItem name was not displayed on toast when an image is uploaded and linked to wikidata entity.\nFixes #2882 Item name not filled in toast\nWhat changes did you make and why?\nadded the place name which is linked to wikidata item in sharedPreferences in UploadModel class\nto display toast in WikiDataEditService class.\nTests performed (required)\nTested ProdDebug on OnePlus 5 with API level 28.\nScreenshots (for UI changes only)", "createdAt": "2020-03-23T10:11:43Z", "url": "https://github.com/commons-app/apps-android-commons/pull/3569", "merged": true, "mergeCommit": {"oid": "8cb4e28a9782dcf269fbd0dea9feafaacc785fa4"}, "closed": true, "closedAt": "2020-03-24T12:54:38Z", "author": {"login": "318anushka"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQbUbMgH2gAyMzkyMjg2MzUzOmZkMTdkZTdjY2I0NTM4MGYzNTlhOGNlMTdjZDk3ODllZTYzYThiY2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQybK2AFqTM4MDI3ODE2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fd17de7ccb45380f359a8ce17cd9789ee63a8bcd", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/fd17de7ccb45380f359a8ce17cd9789ee63a8bcd", "committedDate": "2020-03-23T09:58:37Z", "message": "Wiki itemname displaying in toast"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5Mjg3OTIw", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#pullrequestreview-379287920", "createdAt": "2020-03-23T10:11:47Z", "commit": {"oid": "fd17de7ccb45380f359a8ce17cd9789ee63a8bcd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5Mzc2Mzgy", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#pullrequestreview-379376382", "createdAt": "2020-03-23T12:20:22Z", "commit": {"oid": "fd17de7ccb45380f359a8ce17cd9789ee63a8bcd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjoyMDoyMlrOF6C6Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjoyMDoyMlrOF6C6Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQwOTQxOQ==", "bodyText": "It would be better if you could pass along this data, setting/retrieving a value in sharedprefences is a bit surprising", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r396409419", "createdAt": "2020-03-23T12:20:22Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadModel.java", "diffHunk": "@@ -205,6 +205,7 @@ public void updateUploadItem(int index, UploadItem uploadItem) {\n         UploadItem uploadItem1 = items.get(index);\n         uploadItem1.setDescriptions(uploadItem.descriptions);\n         uploadItem1.setTitle(uploadItem.title);\n+        store.putString(\"Title\", uploadItem.place.getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd17de7ccb45380f359a8ce17cd9789ee63a8bcd"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93090c1588413cdb2d75389b2b793d062ed9d041", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/93090c1588413cdb2d75389b2b793d062ed9d041", "committedDate": "2020-03-23T16:27:22Z", "message": "Wikidata label displaying in toast"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "082d321053fac9e77b9022037aba1647cd929332", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/082d321053fac9e77b9022037aba1647cd929332", "committedDate": "2020-03-24T08:23:37Z", "message": "Wikidata label displaying in toast"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMTE0Nzg3", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#pullrequestreview-380114787", "createdAt": "2020-03-24T09:06:49Z", "commit": {"oid": "082d321053fac9e77b9022037aba1647cd929332"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowNjo0OVrOF6mxmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOTowNjo0OVrOF6mxmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5NzAxOA==", "bodyText": "If you add a field to contribution you have to add it to the parcelable methods as well or you break the contract", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r396997018", "createdAt": "2020-03-24T09:06:49Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/Contribution.java", "diffHunk": "@@ -68,6 +68,7 @@ public Contribution createFromParcel(Parcel parcel) {\n     public String decimalCoords;\n     public boolean isMultiple;\n     public String wikiDataEntityId;\n+    public String wikiItemName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "082d321053fac9e77b9022037aba1647cd929332"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMTE3OTAw", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#pullrequestreview-380117900", "createdAt": "2020-03-24T09:11:09Z", "commit": {"oid": "082d321053fac9e77b9022037aba1647cd929332"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOToxMTowOVrOF6m7WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwOToxMTowOVrOF6m7WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5OTUxMg==", "bodyText": "no need to assign this to a variable", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r396999512", "createdAt": "2020-03-24T09:11:09Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/wikidata/WikidataEditService.java", "diffHunk": "@@ -119,8 +119,8 @@ private void handleClaimResult(String wikidataEntityId, String revisionId) {\n     /**\n      * Show a success toast when the edit is made successfully\n      */\n-    private void showSuccessToast() {\n-        String title = directKvStore.getString(\"Title\", \"\");\n+    private void showSuccessToast(String wikiItemName) {\n+        String title = wikiItemName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "082d321053fac9e77b9022037aba1647cd929332"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8076f9aa6d8a50350ec779a1001b45b204d98b5", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/d8076f9aa6d8a50350ec779a1001b45b204d98b5", "committedDate": "2020-03-24T10:28:02Z", "message": "wikiItemName added to parcelable methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09c2344907e402ed6cfffb82a8e6dd7ec0a448f1", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/09c2344907e402ed6cfffb82a8e6dd7ec0a448f1", "committedDate": "2020-03-24T11:28:20Z", "message": "Wikidata label displayed in toast"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMjI5NTYw", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#pullrequestreview-380229560", "createdAt": "2020-03-24T11:43:34Z", "commit": {"oid": "09c2344907e402ed6cfffb82a8e6dd7ec0a448f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMTo0MzozNFrOF6sciQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMTo0MzozNFrOF6sciQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA4OTkyOQ==", "bodyText": "I don't think you need to null check this, or at least not here.\ncreateClaimWithLogging already null checks the p18 and wikidatEntityId, all fields that are only present when the contribution has an associated place ie was uploaded from Nearby or we detected it was Nearby Place from the associated image data.", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#discussion_r397089929", "createdAt": "2020-03-24T11:43:34Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadService.java", "diffHunk": "@@ -278,10 +278,11 @@ private void uploadContribution(Contribution contribution) {\n                         showFailedNotification(contribution);\n                     } else {\n                         String canonicalFilename = \"File:\" + uploadResult.getFilename();\n+                        String wikiItemName = contribution.getWikiItemName()!=null?contribution.getWikiItemName():\"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09c2344907e402ed6cfffb82a8e6dd7ec0a448f1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "823e4c1ca2391338460dd235066dde283d6579b9", "author": {"user": {"login": "318anushka", "name": null}}, "url": "https://github.com/commons-app/apps-android-commons/commit/823e4c1ca2391338460dd235066dde283d6579b9", "committedDate": "2020-03-24T12:38:43Z", "message": "Wikidata label displayed in toast"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMjc4MTY1", "url": "https://github.com/commons-app/apps-android-commons/pull/3569#pullrequestreview-380278165", "createdAt": "2020-03-24T12:53:48Z", "commit": {"oid": "823e4c1ca2391338460dd235066dde283d6579b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 461, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}