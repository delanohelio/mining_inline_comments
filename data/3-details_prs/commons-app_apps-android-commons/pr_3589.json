{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0OTM0NDQw", "number": 3589, "title": "Fixed issue #3195 ordering contribution list", "bodyText": "Description (required)\nFixes #3195 Ordering problem contributions list\nWhat changes did you make and why?\nOrdering is done with dateUploaded. Changed the date pattern stored to timestamp to help with the irregularities with ordering.\nTests performed\nTested betadebug on Huawei p20 lite API 28\nScreenshots showing what changed", "createdAt": "2020-03-27T19:31:58Z", "url": "https://github.com/commons-app/apps-android-commons/pull/3589", "merged": true, "mergeCommit": {"oid": "80530663a1b9ffa52a69b5990dfe765b713047e5"}, "closed": true, "closedAt": "2020-04-06T11:54:52Z", "author": {"login": "isnirp"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcR1602gFqTM4MzE0NjIzMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcU9XqEgFqTM4ODE3NjE5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMTQ2MjMy", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-383146232", "createdAt": "2020-03-27T19:32:01Z", "commit": {"oid": "8732decd62da129bfdb9bbbb91c1dd262b8641da"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzEzNzc3", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-383313777", "createdAt": "2020-03-28T13:36:38Z", "commit": {"oid": "0cee6b9c026f8ef65be48f37ca63129002f0b55f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMzozNjozOFrOF9JhMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMzozNjozOFrOF9JhMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY2MzQwOQ==", "bodyText": "I think sorting using the upload date (dateUploaded) would be more appropriate here. It's my understanding that creation date is the date of creation of the media (image) while the upload date is the date of uploading the media. Correct me if I'm wrong.", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#discussion_r399663409", "createdAt": "2020-03-28T13:36:38Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/ContributionComparator.java", "diffHunk": "@@ -0,0 +1,11 @@\n+package fr.free.nrw.commons.contributions;\n+\n+import java.util.Comparator;\n+\n+public class ContributionComparator implements Comparator<Contribution> {\n+\n+    @Override\n+    public int compare(Contribution c1, Contribution c2) {\n+        return c1.dateCreated.compareTo(c2.dateCreated);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0cee6b9c026f8ef65be48f37ca63129002f0b55f"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "955945387b5a7e5d7fc93d8de12d7382686fce8b", "author": {"user": {"login": "isnirp", "name": "Prince Amankwah"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/955945387b5a7e5d7fc93d8de12d7382686fce8b", "committedDate": "2020-03-28T15:18:01Z", "message": "issue-#3195: order contribution list refactored"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0cee6b9c026f8ef65be48f37ca63129002f0b55f", "author": {"user": {"login": "isnirp", "name": "Prince Amankwah"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/0cee6b9c026f8ef65be48f37ca63129002f0b55f", "committedDate": "2020-03-27T21:49:41Z", "message": "Revert \"issue-#3567:about screen logos visible in dark theme\"\n\nThis reverts commit 133b33be3d889bc057d8019209b0b9529fdd92f8."}, "afterCommit": {"oid": "955945387b5a7e5d7fc93d8de12d7382686fce8b", "author": {"user": {"login": "isnirp", "name": "Prince Amankwah"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/955945387b5a7e5d7fc93d8de12d7382686fce8b", "committedDate": "2020-03-28T15:18:01Z", "message": "issue-#3195: order contribution list refactored"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzM3MjA4", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-383337208", "createdAt": "2020-03-28T18:26:36Z", "commit": {"oid": "955945387b5a7e5d7fc93d8de12d7382686fce8b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxODoyNjozNlrOF9LXOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxODoyNjozNlrOF9LXOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY5MzYyNg==", "bodyText": "I'm not really sure if this would happen practically but I believe there might chance of c1.dateUploaded being null (just as Android Studio suggests). To add to the suspicion, the dateUploaded field itself seems to be marked as @Nullable. So, I think it might be better to handle the possible null. I'll defer the decision to the other reviewers, though.", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#discussion_r399693626", "createdAt": "2020-03-28T18:26:36Z", "author": {"login": "sivaraam"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/ContributionComparator.java", "diffHunk": "@@ -0,0 +1,11 @@\n+package fr.free.nrw.commons.contributions;\n+\n+import java.util.Comparator;\n+\n+public class ContributionComparator implements Comparator<Contribution> {\n+\n+  @Override\n+  public int compare(Contribution c1, Contribution c2) {\n+    return c1.dateUploaded.compareTo(c2.dateUploaded);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "955945387b5a7e5d7fc93d8de12d7382686fce8b"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MTAxOTM0", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-386101934", "createdAt": "2020-04-02T04:35:30Z", "commit": {"oid": "a1ce4083f0af04bc6325b49b6caffaf753cc01bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNDozNTozMFrOF_a-Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNDozNTozMFrOF_a-Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjA0NjU2Mg==", "bodyText": "Now that we are saving HH:MM: ss as well, the getter of the dateUploaded in the Media class needs to be modified, so that it only returns yyyy-MM-dd for existing components who needed it in this format", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#discussion_r402046562", "createdAt": "2020-04-02T04:35:30Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadService.java", "diffHunk": "@@ -285,7 +286,7 @@ private void uploadContribution(Contribution contribution) {\n                         contribution.setFilename(canonicalFilename);\n                         contribution.setImageUrl(uploadResult.getImageinfo().getOriginalUrl());\n                         contribution.setState(Contribution.STATE_COMPLETED);\n-                        contribution.setDateUploaded(CommonsDateUtil.getIso8601DateFormatShort()\n+                        contribution.setDateUploaded(CommonsDateUtil.getIso8601DateFormatTimestamp()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1ce4083f0af04bc6325b49b6caffaf753cc01bc"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MTMzODQ1", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-386133845", "createdAt": "2020-04-02T06:20:31Z", "commit": {"oid": "208e278ccc87b14e2c448ac58d7842893f6cdd3f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNjoyMDozMVrOF_cvzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNjoyMDozMVrOF_cvzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjA3NTU5Nw==", "bodyText": "Why not directly return CommonsDateUtil.getIso8601DateFormatShort().parse(dateUploaded.getTimestamp()) or null if dateUploaded is null?", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#discussion_r402075597", "createdAt": "2020-04-02T06:20:31Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/Media.java", "diffHunk": "@@ -347,7 +347,14 @@ public void setDateCreated(Date date) {\n      */\n     public @Nullable\n     Date getDateUploaded() {\n-        return dateUploaded;\n+      String date = CommonsDateUtil.getIso8601DateFormatShort().format(dateUploaded);\n+      Date uploadDate = dateUploaded;\n+      try {\n+        uploadDate = CommonsDateUtil.getIso8601DateFormatShort().parse(date);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "208e278ccc87b14e2c448ac58d7842893f6cdd3f"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MjU4NTE0", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-386258514", "createdAt": "2020-04-02T09:33:56Z", "commit": {"oid": "208e278ccc87b14e2c448ac58d7842893f6cdd3f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwOTozMzo1NlrOF_jFFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwOTozMzo1NlrOF_jFFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE3OTM1MQ==", "bodyText": "Can you revert this?", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#discussion_r402179351", "createdAt": "2020-04-02T09:33:56Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/contributions/ContributionsListFragment.java", "diffHunk": "@@ -21,6 +21,7 @@\n import com.google.android.material.floatingactionbutton.FloatingActionButton;\n \n import java.util.ArrayList;\n+import java.util.Collections;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "208e278ccc87b14e2c448ac58d7842893f6cdd3f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MjU4NjI2", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-386258626", "createdAt": "2020-04-02T09:34:06Z", "commit": {"oid": "208e278ccc87b14e2c448ac58d7842893f6cdd3f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwOTozNDowNlrOF_jFfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwOTozNDowNlrOF_jFfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE3OTQ1NA==", "bodyText": "Please revert this", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#discussion_r402179454", "createdAt": "2020-04-02T09:34:06Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadService.java", "diffHunk": "@@ -8,6 +8,7 @@\n import android.net.Uri;\n import android.os.Bundle;\n \n+import android.util.Log;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "208e278ccc87b14e2c448ac58d7842893f6cdd3f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2MjU4OTE2", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-386258916", "createdAt": "2020-04-02T09:34:30Z", "commit": {"oid": "208e278ccc87b14e2c448ac58d7842893f6cdd3f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwOTozNDozMFrOF_jGhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwOTozNDozMFrOF_jGhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE3OTcxOA==", "bodyText": "Please add java docs", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#discussion_r402179718", "createdAt": "2020-04-02T09:34:30Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/utils/CommonsDateUtil.java", "diffHunk": "@@ -20,4 +20,10 @@ public static SimpleDateFormat getIso8601DateFormatShort() {\n         simpleDateFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n         return simpleDateFormat;\n     }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "208e278ccc87b14e2c448ac58d7842893f6cdd3f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2Mjg2NDc2", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-386286476", "createdAt": "2020-04-02T10:12:39Z", "commit": {"oid": "f03cd1d30eacbcbd9f7b53b422c23200c96c99ea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NDIxNzU2", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-386421756", "createdAt": "2020-04-02T13:25:16Z", "commit": {"oid": "f03cd1d30eacbcbd9f7b53b422c23200c96c99ea"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzoyNToxN1rOF_rCWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzoyNjoxMFrOF_rEwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMwOTcyMQ==", "bodyText": "Please revert unnecessary changes, they makes it harder to review the code.", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#discussion_r402309721", "createdAt": "2020-04-02T13:25:17Z", "author": {"login": "neslihanturan"}, "path": "app/src/main/java/fr/free/nrw/commons/Media.java", "diffHunk": "@@ -347,7 +347,7 @@ public void setDateCreated(Date date) {\n      */\n     public @Nullable\n     Date getDateUploaded() {\n-        return dateUploaded;\n+      return dateUploaded;\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f03cd1d30eacbcbd9f7b53b422c23200c96c99ea"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxMDMzNw==", "bodyText": "Please add what does this return value means too", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#discussion_r402310337", "createdAt": "2020-04-02T13:26:10Z", "author": {"login": "neslihanturan"}, "path": "app/src/main/java/fr/free/nrw/commons/utils/CommonsDateUtil.java", "diffHunk": "@@ -20,4 +20,10 @@ public static SimpleDateFormat getIso8601DateFormatShort() {\n         simpleDateFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n         return simpleDateFormat;\n     }\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE3OTcxOA=="}, "originalCommit": {"oid": "208e278ccc87b14e2c448ac58d7842893f6cdd3f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f941a4e1d0e883fd53beb440ed721d41982a41c", "author": {"user": {"login": "isnirp", "name": "Prince Amankwah"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/9f941a4e1d0e883fd53beb440ed721d41982a41c", "committedDate": "2020-04-03T05:13:25Z", "message": "issue-#3195: ordered contribution list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f03cd1d30eacbcbd9f7b53b422c23200c96c99ea", "author": {"user": {"login": "isnirp", "name": "Prince Amankwah"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/f03cd1d30eacbcbd9f7b53b422c23200c96c99ea", "committedDate": "2020-04-02T10:07:26Z", "message": "issue-#3195: change format of getDateUploaded refactored"}, "afterCommit": {"oid": "9f941a4e1d0e883fd53beb440ed721d41982a41c", "author": {"user": {"login": "isnirp", "name": "Prince Amankwah"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/9f941a4e1d0e883fd53beb440ed721d41982a41c", "committedDate": "2020-04-03T05:13:25Z", "message": "issue-#3195: ordered contribution list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MTc2MTky", "url": "https://github.com/commons-app/apps-android-commons/pull/3589#pullrequestreview-388176192", "createdAt": "2020-04-06T11:54:37Z", "commit": {"oid": "9f941a4e1d0e883fd53beb440ed721d41982a41c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 643, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}