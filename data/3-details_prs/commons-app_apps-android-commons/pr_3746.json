{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2Nzg5OTE3", "number": 3746, "title": "Nearby: make list resize and display message when empty", "bodyText": "Description\nMake the list of nearby places resize up to its old size, depending on the content. Handle the empty case by displaying a message.\nFixes #3727\nWhat changes did you make and why?\n\nMade the list wrap-content and wrapped it in a transparent layout of fixed size (the old size).\nAdded a textview with a message to be displayed when the list is empty.\n\nTests performed\nTested betaDebug on Pixel XL with API level 29.\nScreenshots\nList at full size\n\nList resized\n\nMessage displayed when list is empty", "createdAt": "2020-05-12T15:09:30Z", "url": "https://github.com/commons-app/apps-android-commons/pull/3746", "merged": true, "mergeCommit": {"oid": "7084fd2535502ae44de4e0689c58c4648d2d86c0"}, "closed": true, "closedAt": "2020-05-19T12:43:50Z", "author": {"login": "CloeARiva"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgk_SVAH2gAyNDE2Nzg5OTE3OjZiZjM0MGE4YTY4Mjc4MmJiMGMzNTZlY2Y3YjE5M2YxNDc2Y2EyZDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABciz14TgFqTQxNDQwNTAwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6bf340a8a682782bb0c356ecf7b193f1476ca2d4", "author": {"user": {"login": "CloeARiva", "name": "Cloe Riva"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/6bf340a8a682782bb0c356ecf7b193f1476ca2d4", "committedDate": "2020-05-12T14:17:22Z", "message": "Nearby: make list resize and display message when empty"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMTQyOTYy", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#pullrequestreview-410142962", "createdAt": "2020-05-12T15:09:34Z", "commit": {"oid": "6bf340a8a682782bb0c356ecf7b193f1476ca2d4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a", "author": {"user": {"login": "CloeARiva", "name": "Cloe Riva"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/0275a9bcb2716bff7d098ea5cb8e2d219b86a34a", "committedDate": "2020-05-12T15:50:11Z", "message": "refactored and renamed for clarity"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjM2NzU2", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#pullrequestreview-411636756", "createdAt": "2020-05-14T09:42:15Z", "commit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo0MjoxNVrOGVUWvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo0MjoxNVrOGVUWvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAwNjc4Mw==", "bodyText": "A ternary would look nice here and avoid repeating noResultsView.setVisibility(", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#discussion_r425006783", "createdAt": "2020-05-14T09:42:15Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -626,6 +627,11 @@ public void centerMapToPlace(Place place) {\n     @Override\n     public void updateListFragment(List<Place> placeList) {\n         adapterFactory.updateAdapterData(placeList, (RVRendererAdapter<Place>) rvNearbyList.getAdapter());\n+        if (placeList.size() <= 0) {\n+            noResultsView.setVisibility(View.VISIBLE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjQ2Njc4", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#pullrequestreview-411646678", "createdAt": "2020-05-14T09:54:46Z", "commit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo1NDo0NlrOGVU1QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo1NDo0NlrOGVU1QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAxNDU5Mg==", "bodyText": "RelativeLayout doesn't have orientation.\nThis relativelayout can probably be deleted, the root relativelayout can just be used.", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#discussion_r425014592", "createdAt": "2020-05-14T09:54:46Z", "author": {"login": "macgills"}, "path": "app/src/main/res/layout/bottom_sheet_nearby.xml", "diffHunk": "@@ -4,13 +4,33 @@\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\"\n     android:orientation=\"vertical\"\n+    android:gravity=\"bottom\"\n     app:behavior_hideable=\"true\"\n     android:visibility=\"visible\"\n     app:layout_behavior=\"@string/bottom_sheet_behavior\"\n-    android:background=\"@android:color/white\">\n+    android:background=\"@android:color/transparent\">\n+\n+    <RelativeLayout\n+      android:layout_width=\"match_parent\"\n+      android:layout_height=\"wrap_content\"\n+      android:orientation=\"vertical\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjQ3NTg2", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#pullrequestreview-411647586", "createdAt": "2020-05-14T09:55:48Z", "commit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo1NTo0OVrOGVU4PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo1NTo0OVrOGVU4PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAxNTM1Nw==", "bodyText": "setting both paddingVertical and paddingHorizontal to the same value can be simplified to just setting padding", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#discussion_r425015357", "createdAt": "2020-05-14T09:55:49Z", "author": {"login": "macgills"}, "path": "app/src/main/res/layout/bottom_sheet_nearby.xml", "diffHunk": "@@ -4,13 +4,33 @@\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\"\n     android:orientation=\"vertical\"\n+    android:gravity=\"bottom\"\n     app:behavior_hideable=\"true\"\n     android:visibility=\"visible\"\n     app:layout_behavior=\"@string/bottom_sheet_behavior\"\n-    android:background=\"@android:color/white\">\n+    android:background=\"@android:color/transparent\">\n+\n+    <RelativeLayout\n+      android:layout_width=\"match_parent\"\n+      android:layout_height=\"wrap_content\"\n+      android:orientation=\"vertical\"\n+      android:background=\"@android:color/white\">\n+\n+    <TextView\n+      android:id=\"@+id/no_results_message\"\n+      android:layout_width=\"match_parent\"\n+      android:layout_height=\"wrap_content\"\n+      android:paddingVertical=\"50dp\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjQ4MzMw", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#pullrequestreview-411648330", "createdAt": "2020-05-14T09:56:40Z", "commit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo1Njo0MFrOGVU6Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo1Njo0MFrOGVU6Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAxNTg5OQ==", "bodyText": "centerVertical+centerHorizontal can be simplified to centerInParent", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#discussion_r425015899", "createdAt": "2020-05-14T09:56:40Z", "author": {"login": "macgills"}, "path": "app/src/main/res/layout/bottom_sheet_nearby.xml", "diffHunk": "@@ -4,13 +4,33 @@\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\"\n     android:orientation=\"vertical\"\n+    android:gravity=\"bottom\"\n     app:behavior_hideable=\"true\"\n     android:visibility=\"visible\"\n     app:layout_behavior=\"@string/bottom_sheet_behavior\"\n-    android:background=\"@android:color/white\">\n+    android:background=\"@android:color/transparent\">\n+\n+    <RelativeLayout\n+      android:layout_width=\"match_parent\"\n+      android:layout_height=\"wrap_content\"\n+      android:orientation=\"vertical\"\n+      android:background=\"@android:color/white\">\n+\n+    <TextView\n+      android:id=\"@+id/no_results_message\"\n+      android:layout_width=\"match_parent\"\n+      android:layout_height=\"wrap_content\"\n+      android:paddingVertical=\"50dp\"\n+      android:paddingHorizontal=\"50dp\"\n+      android:layout_centerHorizontal=\"true\"\n+      android:layout_centerVertical=\"true\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjUwMTU3", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#pullrequestreview-411650157", "createdAt": "2020-05-14T09:59:01Z", "commit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo1OTowMVrOGVU_7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo1OTowMVrOGVU_7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAxNzMyNQ==", "bodyText": "I don't think layout_gravity works in this scenario, can probably be deleted", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#discussion_r425017325", "createdAt": "2020-05-14T09:59:01Z", "author": {"login": "macgills"}, "path": "app/src/main/res/layout/bottom_sheet_nearby.xml", "diffHunk": "@@ -4,13 +4,33 @@\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\"\n     android:orientation=\"vertical\"\n+    android:gravity=\"bottom\"\n     app:behavior_hideable=\"true\"\n     android:visibility=\"visible\"\n     app:layout_behavior=\"@string/bottom_sheet_behavior\"\n-    android:background=\"@android:color/white\">\n+    android:background=\"@android:color/transparent\">\n+\n+    <RelativeLayout\n+      android:layout_width=\"match_parent\"\n+      android:layout_height=\"wrap_content\"\n+      android:orientation=\"vertical\"\n+      android:background=\"@android:color/white\">\n+\n+    <TextView\n+      android:id=\"@+id/no_results_message\"\n+      android:layout_width=\"match_parent\"\n+      android:layout_height=\"wrap_content\"\n+      android:paddingVertical=\"50dp\"\n+      android:paddingHorizontal=\"50dp\"\n+      android:layout_centerHorizontal=\"true\"\n+      android:layout_centerVertical=\"true\"\n+      android:layout_gravity=\"center\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0275a9bcb2716bff7d098ea5cb8e2d219b86a34a"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c8f246e31c7a94292ce24fdc191397d7c96b59d", "author": {"user": {"login": "CloeARiva", "name": "Cloe Riva"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/0c8f246e31c7a94292ce24fdc191397d7c96b59d", "committedDate": "2020-05-14T12:35:52Z", "message": "refactoring and simplifying based on comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53a8ca60d429250230ab7a1946da0d326ee54302", "author": {"user": {"login": "CloeARiva", "name": "Cloe Riva"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/53a8ca60d429250230ab7a1946da0d326ee54302", "committedDate": "2020-05-14T12:36:35Z", "message": "refactoring and simplifying based on comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "beb7952a0770d713b50da9ad14e08c7ca80e429e", "author": {"user": {"login": "CloeARiva", "name": "Cloe Riva"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/beb7952a0770d713b50da9ad14e08c7ca80e429e", "committedDate": "2020-05-19T11:05:29Z", "message": "removing vertical orientation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NDA1MDA4", "url": "https://github.com/commons-app/apps-android-commons/pull/3746#pullrequestreview-414405008", "createdAt": "2020-05-19T12:43:31Z", "commit": {"oid": "beb7952a0770d713b50da9ad14e08c7ca80e429e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 605, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}