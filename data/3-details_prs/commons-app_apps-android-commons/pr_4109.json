{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxMDgwMTk4", "number": 4109, "title": "Fixed issue with \"Copy previous captions & descriptions\".", "bodyText": "Description (required)\nFixes #4037\nWhat changes did you make and why?\nAdded a condition, after clicking \"copy previous captions & description\", to check whether the language code from the previous upload is null or not, and if it is not null then simply provided the same language code for the current upload.\nTests performed (required)\nTested on Pixel 2 with API level 29", "createdAt": "2020-12-16T11:02:18Z", "url": "https://github.com/commons-app/apps-android-commons/pull/4109", "merged": true, "mergeCommit": {"oid": "5bdb21cb3ee7e9e290761dd97a1501ca437925c3"}, "closed": true, "closedAt": "2020-12-27T10:48:58Z", "author": {"login": "Pratham2305"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmsoHkAH2gAyNTQxMDgwMTk4OjI2ODI5YjJiNzVlOGNlYTg0ZmFiMzU3YjNlZjA5OTFkOGVkNzUyZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdqPQkuAFqTU1ODkxOTU3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "26829b2b75e8cea84fab357b3ef0991d8ed752d0", "author": {"user": {"login": "Pratham2305", "name": "Pratham Pahariya"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/26829b2b75e8cea84fab357b3ef0991d8ed752d0", "committedDate": "2020-12-16T10:46:00Z", "message": "Fixed issue with \"Copy previous captions & descriptions\"."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNzY2MjI3", "url": "https://github.com/commons-app/apps-android-commons/pull/4109#pullrequestreview-553766227", "createdAt": "2020-12-16T14:54:54Z", "commit": {"oid": "26829b2b75e8cea84fab357b3ef0991d8ed752d0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNDo1NDo1NFrOIHJUuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNDo1NToyNFrOIHJWSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDM2MzcwNA==", "bodyText": "Would you mind adding a comment line before this block, to explain in what circumstances it is reached, and what the code does? Thanks!", "url": "https://github.com/commons-app/apps-android-commons/pull/4109#discussion_r544363704", "createdAt": "2020-12-16T14:54:54Z", "author": {"login": "nicolas-raoul"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java", "diffHunk": "@@ -179,12 +179,17 @@ public void onNothingSelected(AdapterView<?> adapterView) {\n                     // If user has chosen a default language from settings activity savedLanguageValue is not null\n                     spinnerDescriptionLanguages.setSelection(languagesAdapter.getIndexOfLanguageCode(savedLanguageValue));\n                 } else {\n-                    if (position == 0) {\n-                        int defaultLocaleIndex = languagesAdapter\n-                                .getIndexOfUserDefaultLocale(spinnerDescriptionLanguages.getContext());\n-                        spinnerDescriptionLanguages.setSelection(defaultLocaleIndex, true);\n+                    if(uploadMediaDetails.get(position).getLanguageCode() != null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26829b2b75e8cea84fab357b3ef0991d8ed752d0"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDM2NDEwNw==", "bodyText": "Very minor style detail: Please add a space before true. Thanks!", "url": "https://github.com/commons-app/apps-android-commons/pull/4109#discussion_r544364107", "createdAt": "2020-12-16T14:55:24Z", "author": {"login": "nicolas-raoul"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/UploadMediaDetailAdapter.java", "diffHunk": "@@ -179,12 +179,17 @@ public void onNothingSelected(AdapterView<?> adapterView) {\n                     // If user has chosen a default language from settings activity savedLanguageValue is not null\n                     spinnerDescriptionLanguages.setSelection(languagesAdapter.getIndexOfLanguageCode(savedLanguageValue));\n                 } else {\n-                    if (position == 0) {\n-                        int defaultLocaleIndex = languagesAdapter\n-                                .getIndexOfUserDefaultLocale(spinnerDescriptionLanguages.getContext());\n-                        spinnerDescriptionLanguages.setSelection(defaultLocaleIndex, true);\n+                    if(uploadMediaDetails.get(position).getLanguageCode() != null){\n+                        spinnerDescriptionLanguages.setSelection(languagesAdapter\n+                            .getIndexOfLanguageCode(uploadMediaDetails.get(position).getLanguageCode()),true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26829b2b75e8cea84fab357b3ef0991d8ed752d0"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e01833cfc03d1fe782c07c41581719a971adabfc", "author": {"user": {"login": "Pratham2305", "name": "Pratham Pahariya"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/e01833cfc03d1fe782c07c41581719a971adabfc", "committedDate": "2020-12-16T16:15:08Z", "message": "Added comments and also fixed the styling issue."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4OTE5NTc1", "url": "https://github.com/commons-app/apps-android-commons/pull/4109#pullrequestreview-558919575", "createdAt": "2020-12-27T10:48:44Z", "commit": {"oid": "e01833cfc03d1fe782c07c41581719a971adabfc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 498, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}