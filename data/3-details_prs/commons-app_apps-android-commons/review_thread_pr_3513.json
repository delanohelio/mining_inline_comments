{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3OTk3Mjk4", "number": 3513, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMDoyMjozNFrODoRD8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMjo1NzozM1rODvjGtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNTQ5MTY5OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/media/MediaDetailFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMDoyMjozNFrOF2tc0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMDoyMjozNFrOF2tc0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjkxMjA4MA==", "bodyText": "you don't need to create a variable just return dm.widthPixels", "url": "https://github.com/commons-app/apps-android-commons/pull/3513#discussion_r392912080", "createdAt": "2020-03-16T10:22:34Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/media/MediaDetailFragment.java", "diffHunk": "@@ -243,13 +246,22 @@ private void displayMediaDetails() {\n \n     private void updateAspectRatio(ImageInfo imageInfo) {\n         if (imageInfo != null) {\n-            int finalHeight = (scrollView.getWidth()*imageInfo.getHeight()) / imageInfo.getWidth();\n+            int screenWidth = getScreenWidth(getContext());\n+            int finalHeight = (screenWidth*imageInfo.getHeight()) / imageInfo.getWidth();\n             ViewGroup.LayoutParams params = image.getLayoutParams();\n             params.height = finalHeight;\n             image.setLayoutParams(params);\n         }\n     }\n \n+    private int getScreenWidth(Context context) {\n+        DisplayMetrics dm = new DisplayMetrics();\n+        WindowManager windowManager = (WindowManager) context.getSystemService(WINDOW_SERVICE);\n+        windowManager.getDefaultDisplay().getMetrics(dm);\n+        int width = dm.widthPixels;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88a8a52e63b31c37057c2e013fa9144d5909d693"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMTg0ODIyOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/media/MediaDetailFragment.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMjo1NzozM1rOGCCO6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMzoxNjo0N1rOGCDB7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc4NjkyMA==", "bodyText": "This should be the only new import I think", "url": "https://github.com/commons-app/apps-android-commons/pull/3513#discussion_r404786920", "createdAt": "2020-04-07T12:57:33Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/media/MediaDetailFragment.java", "diffHunk": "@@ -9,11 +9,14 @@\n import android.os.Bundle;\n import android.text.Editable;\n import android.text.TextWatcher;\n+import android.util.DisplayMetrics;\n import android.util.TypedValue;\n import android.view.LayoutInflater;\n import android.view.View;\n import android.view.ViewGroup;\n import android.view.ViewTreeObserver;\n+import android.view.ViewTreeObserver.OnGlobalLayoutListener;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39dcc10519bb92ac603fa858fec4b9857687028d"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc4ODcxOA==", "bodyText": "no it shows error otherwise, both imports would be required", "url": "https://github.com/commons-app/apps-android-commons/pull/3513#discussion_r404788718", "createdAt": "2020-04-07T13:00:05Z", "author": {"login": "kbhardwaj123"}, "path": "app/src/main/java/fr/free/nrw/commons/media/MediaDetailFragment.java", "diffHunk": "@@ -9,11 +9,14 @@\n import android.os.Bundle;\n import android.text.Editable;\n import android.text.TextWatcher;\n+import android.util.DisplayMetrics;\n import android.util.TypedValue;\n import android.view.LayoutInflater;\n import android.view.View;\n import android.view.ViewGroup;\n import android.view.ViewTreeObserver;\n+import android.view.ViewTreeObserver.OnGlobalLayoutListener;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc4NjkyMA=="}, "originalCommit": {"oid": "39dcc10519bb92ac603fa858fec4b9857687028d"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5ODEzOQ==", "bodyText": "The other imports, press ctrl+alt+o and turn these options on", "url": "https://github.com/commons-app/apps-android-commons/pull/3513#discussion_r404798139", "createdAt": "2020-04-07T13:14:11Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/media/MediaDetailFragment.java", "diffHunk": "@@ -9,11 +9,14 @@\n import android.os.Bundle;\n import android.text.Editable;\n import android.text.TextWatcher;\n+import android.util.DisplayMetrics;\n import android.util.TypedValue;\n import android.view.LayoutInflater;\n import android.view.View;\n import android.view.ViewGroup;\n import android.view.ViewTreeObserver;\n+import android.view.ViewTreeObserver.OnGlobalLayoutListener;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc4NjkyMA=="}, "originalCommit": {"oid": "39dcc10519bb92ac603fa858fec4b9857687028d"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5OTk4Mw==", "bodyText": "Oh I'll fix those asap", "url": "https://github.com/commons-app/apps-android-commons/pull/3513#discussion_r404799983", "createdAt": "2020-04-07T13:16:47Z", "author": {"login": "kbhardwaj123"}, "path": "app/src/main/java/fr/free/nrw/commons/media/MediaDetailFragment.java", "diffHunk": "@@ -9,11 +9,14 @@\n import android.os.Bundle;\n import android.text.Editable;\n import android.text.TextWatcher;\n+import android.util.DisplayMetrics;\n import android.util.TypedValue;\n import android.view.LayoutInflater;\n import android.view.View;\n import android.view.ViewGroup;\n import android.view.ViewTreeObserver;\n+import android.view.ViewTreeObserver.OnGlobalLayoutListener;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc4NjkyMA=="}, "originalCommit": {"oid": "39dcc10519bb92ac603fa858fec4b9857687028d"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4196, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}