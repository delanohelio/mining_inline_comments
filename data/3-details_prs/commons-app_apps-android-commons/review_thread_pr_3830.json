{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NjcxNzMx", "number": 3830, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwODoxMTowOFrOEHeDog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODozMTo0NFrOEIRTKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MjY3OTM4OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/upload/mediaDetails/UploadMediaDetailFragment.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwODoxMTowOFrOGm2LsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwODoxMTowOFrOGm2LsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM4NjgwMA==", "bodyText": "Can we use a SimpleDraweeView and .setImageURI to avoid manual bounds decoding?", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r443386800", "createdAt": "2020-06-22T08:11:08Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/mediaDetails/UploadMediaDetailFragment.java", "diffHunk": "@@ -284,7 +296,15 @@ public void onImageProcessed(UploadItem uploadItem, Place place) {\n         }\n \n         descriptions = uploadItem.getDescriptions();\n-        photoViewBackgroundImage.setImageURI(uploadItem.getMediaUri());\n+        compositeDisposable\n+            .add(downSampleImage(uploadItem.getContentUri())\n+                .subscribeOn(Schedulers.io())\n+                .observeOn(AndroidSchedulers.mainThread())\n+                .subscribe(bitmap -> {\n+                    if (null != bitmap) {\n+                        photoViewBackgroundImage.setImageBitmap(bitmap);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6b1b686dfa0a392321832d7aea7d3f470ed0e03"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MDk0MDI5OnYy", "diffSide": "LEFT", "path": "app/src/main/res/layout/fragment_upload_media_detail_fragment.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNzo1MzoxOFrOGoG-GA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODoxNDoxOVrOGoHrxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcxMDQyNA==", "bodyText": "I believe this was the last usage of PhotoView, we could remove the dependency", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r444710424", "createdAt": "2020-06-24T07:53:18Z", "author": {"login": "macgills"}, "path": "app/src/main/res/layout/fragment_upload_media_detail_fragment.xml", "diffHunk": "@@ -6,11 +6,12 @@\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\">\n \n-    <com.github.chrisbanes.photoview.PhotoView", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f23331682fab46a9e22dea0293e36fa736b9116"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcyMjExOQ==", "bodyText": "@macgills Fair point removed this", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r444722119", "createdAt": "2020-06-24T08:14:19Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/res/layout/fragment_upload_media_detail_fragment.xml", "diffHunk": "@@ -6,11 +6,12 @@\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\">\n \n-    <com.github.chrisbanes.photoview.PhotoView", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcxMDQyNA=="}, "originalCommit": {"oid": "4f23331682fab46a9e22dea0293e36fa736b9116"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MDk0ODkzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/media/zoomControllers/zoomable/ZoomableDraweeView.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwNzo1NTozMlrOGoHDaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODoyMjoxMVrOGoH9EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcxMTc4NA==", "bodyText": "was this too long to fit on 1 line?", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r444711784", "createdAt": "2020-06-24T07:55:32Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/media/zoomControllers/zoomable/ZoomableDraweeView.java", "diffHunk": "@@ -73,9 +74,18 @@ public void onTransformChanged(Matrix transform) {\n                 }\n \n                 @Override\n-                public void onTransformEnd(Matrix transform) {}\n+                public void onTransformEnd(Matrix transform) {\n+                    if (null != transformationListener) {\n+                        transformationListener.onTransformationEnd();\n+                    }\n+                }\n             };\n \n+    public void setTransformationListener(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f23331682fab46a9e22dea0293e36fa736b9116"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcyMDg3Nw==", "bodyText": "Actually yes :P", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r444720877", "createdAt": "2020-06-24T08:12:06Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/media/zoomControllers/zoomable/ZoomableDraweeView.java", "diffHunk": "@@ -73,9 +74,18 @@ public void onTransformChanged(Matrix transform) {\n                 }\n \n                 @Override\n-                public void onTransformEnd(Matrix transform) {}\n+                public void onTransformEnd(Matrix transform) {\n+                    if (null != transformationListener) {\n+                        transformationListener.onTransformationEnd();\n+                    }\n+                }\n             };\n \n+    public void setTransformationListener(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcxMTc4NA=="}, "originalCommit": {"oid": "4f23331682fab46a9e22dea0293e36fa736b9116"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcyMzMyOQ==", "bodyText": "Ohh, sorry, do you mean trying the if, without the braces?", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r444723329", "createdAt": "2020-06-24T08:16:29Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/media/zoomControllers/zoomable/ZoomableDraweeView.java", "diffHunk": "@@ -73,9 +74,18 @@ public void onTransformChanged(Matrix transform) {\n                 }\n \n                 @Override\n-                public void onTransformEnd(Matrix transform) {}\n+                public void onTransformEnd(Matrix transform) {\n+                    if (null != transformationListener) {\n+                        transformationListener.onTransformationEnd();\n+                    }\n+                }\n             };\n \n+    public void setTransformationListener(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcxMTc4NA=="}, "originalCommit": {"oid": "4f23331682fab46a9e22dea0293e36fa736b9116"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcyNjU0NA==", "bodyText": "no, I meant this line. you could shorten the parameter name but it is not necessary", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r444726544", "createdAt": "2020-06-24T08:22:11Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/media/zoomControllers/zoomable/ZoomableDraweeView.java", "diffHunk": "@@ -73,9 +74,18 @@ public void onTransformChanged(Matrix transform) {\n                 }\n \n                 @Override\n-                public void onTransformEnd(Matrix transform) {}\n+                public void onTransformEnd(Matrix transform) {\n+                    if (null != transformationListener) {\n+                        transformationListener.onTransformationEnd();\n+                    }\n+                }\n             };\n \n+    public void setTransformationListener(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcxMTc4NA=="}, "originalCommit": {"oid": "4f23331682fab46a9e22dea0293e36fa736b9116"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MTA3NDk3OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/upload/mediaDetails/UploadMediaDetailFragment.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODozMTo0NFrOGoITVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODo1MDozNlrOGoI-hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDczMjI0Ng==", "bodyText": "needs more space to adhere to codestyle, also can we rename this method? the Ll I am guessing stands for LinearLayout but it just looks so fugly", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r444732246", "createdAt": "2020-06-24T08:31:44Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/mediaDetails/UploadMediaDetailFragment.java", "diffHunk": "@@ -401,6 +413,9 @@ public void onRlContainerTitleClicked() {\n      * @param shouldExpand\n      */\n     private void expandCollapseLlMediaDetail(boolean shouldExpand){\n+        if(isExpanded==shouldExpand){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9c01b609842fdf32ad64099d4c4c3379f8e855c"}, "originalPosition": 106}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDczNDEyOA==", "bodyText": "Hmm, can you suggest a better name?", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r444734128", "createdAt": "2020-06-24T08:34:57Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/mediaDetails/UploadMediaDetailFragment.java", "diffHunk": "@@ -401,6 +413,9 @@ public void onRlContainerTitleClicked() {\n      * @param shouldExpand\n      */\n     private void expandCollapseLlMediaDetail(boolean shouldExpand){\n+        if(isExpanded==shouldExpand){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDczMjI0Ng=="}, "originalCommit": {"oid": "e9c01b609842fdf32ad64099d4c4c3379f8e855c"}, "originalPosition": 106}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0MjMzNQ==", "bodyText": "just getting rid of the Ll is fine I would think", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r444742335", "createdAt": "2020-06-24T08:49:04Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/mediaDetails/UploadMediaDetailFragment.java", "diffHunk": "@@ -401,6 +413,9 @@ public void onRlContainerTitleClicked() {\n      * @param shouldExpand\n      */\n     private void expandCollapseLlMediaDetail(boolean shouldExpand){\n+        if(isExpanded==shouldExpand){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDczMjI0Ng=="}, "originalCommit": {"oid": "e9c01b609842fdf32ad64099d4c4c3379f8e855c"}, "originalPosition": 106}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0MzMwMA==", "bodyText": "@macgills  Done :)", "url": "https://github.com/commons-app/apps-android-commons/pull/3830#discussion_r444743300", "createdAt": "2020-06-24T08:50:36Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/mediaDetails/UploadMediaDetailFragment.java", "diffHunk": "@@ -401,6 +413,9 @@ public void onRlContainerTitleClicked() {\n      * @param shouldExpand\n      */\n     private void expandCollapseLlMediaDetail(boolean shouldExpand){\n+        if(isExpanded==shouldExpand){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDczMjI0Ng=="}, "originalCommit": {"oid": "e9c01b609842fdf32ad64099d4c4c3379f8e855c"}, "originalPosition": 106}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4366, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}