{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNTg1ODc5", "number": 4082, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDowMDo1M1rOFBywMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDowMDo1M1rOFBywMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDI0NDMzOnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/upload/ImageCoordinates.kt", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDowMDo1M1rOIAoFIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMjoxODoxOFrOICRwcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUyNzU4NA==", "bodyText": "Should we set imageCoordsExists = true here? (or move the one on line 48 to line 60)", "url": "https://github.com/commons-app/apps-android-commons/pull/4082#discussion_r537527584", "createdAt": "2020-12-07T14:00:53Z", "author": {"login": "domdomegg"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/ImageCoordinates.kt", "diffHunk": "@@ -34,20 +34,28 @@ class ImageCoordinates internal constructor(exif: ExifInterface?) {\n         //If image has no EXIF data and user has enabled GPS setting, get user's location\n         //Always return null as a temporary fix for #1599\n         if (exif != null) {\n-            val latitude = exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE)\n-            val latitudeRef = exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE_REF)\n-            val longitude = exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE)\n-            val longitudeRef = exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF)\n-            if (latitude != null && longitude != null && latitudeRef != null && longitudeRef != null) {\n-                //If image has EXIF data, extract image coords\n-                imageCoordsExists = true\n-                Timber.d(\"EXIF data has location info\")\n-                decLatitude =\n-                    if (ExifInterface.LATITUDE_NORTH == latitudeRef) convertToDegree(latitude)\n-                    else 0 - convertToDegree(latitude)\n-                decLongitude =\n-                    if (ExifInterface.LONGITUDE_EAST == longitudeRef) convertToDegree(longitude)\n-                    else 0 - convertToDegree(longitude)\n+            val latAndLong = exif.latLong\n+            if (latAndLong != null) {\n+                decLatitude = latAndLong[0]\n+                decLongitude = latAndLong[1]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "414d30f4e913abc262f1ebc4c64f05051428238d"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTI1ODk5Mg==", "bodyText": "Agreed, thanks a lot @domdomegg !", "url": "https://github.com/commons-app/apps-android-commons/pull/4082#discussion_r539258992", "createdAt": "2020-12-09T12:18:18Z", "author": {"login": "neslihanturan"}, "path": "app/src/main/java/fr/free/nrw/commons/upload/ImageCoordinates.kt", "diffHunk": "@@ -34,20 +34,28 @@ class ImageCoordinates internal constructor(exif: ExifInterface?) {\n         //If image has no EXIF data and user has enabled GPS setting, get user's location\n         //Always return null as a temporary fix for #1599\n         if (exif != null) {\n-            val latitude = exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE)\n-            val latitudeRef = exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE_REF)\n-            val longitude = exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE)\n-            val longitudeRef = exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF)\n-            if (latitude != null && longitude != null && latitudeRef != null && longitudeRef != null) {\n-                //If image has EXIF data, extract image coords\n-                imageCoordsExists = true\n-                Timber.d(\"EXIF data has location info\")\n-                decLatitude =\n-                    if (ExifInterface.LATITUDE_NORTH == latitudeRef) convertToDegree(latitude)\n-                    else 0 - convertToDegree(latitude)\n-                decLongitude =\n-                    if (ExifInterface.LONGITUDE_EAST == longitudeRef) convertToDegree(longitude)\n-                    else 0 - convertToDegree(longitude)\n+            val latAndLong = exif.latLong\n+            if (latAndLong != null) {\n+                decLatitude = latAndLong[0]\n+                decLongitude = latAndLong[1]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUyNzU4NA=="}, "originalCommit": {"oid": "414d30f4e913abc262f1ebc4c64f05051428238d"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4251, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}