{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NDYzNjA3", "number": 3686, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNzo1MDoyN1rOD1pIKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNzo1MjowOVrOD1pK3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NTc0OTU0OnYy", "diffSide": "RIGHT", "path": ".idea/codeStyles/codeStyleConfig.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNzo1MDoyN1rOGLLHiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwODoyMjo0MVrOGLMTfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM2OTY3NQ==", "bodyText": "https://youtrack.jetbrains.com/issue/IDEA-207303#focus=streamItem-27-3299338.0-0 so I think this comment has the solution to this line appearing", "url": "https://github.com/commons-app/apps-android-commons/pull/3686#discussion_r414369675", "createdAt": "2020-04-24T07:50:27Z", "author": {"login": "macgills"}, "path": ".idea/codeStyles/codeStyleConfig.xml", "diffHunk": "@@ -1,5 +1,6 @@\n <component name=\"ProjectCodeStyleConfiguration\">\n   <state>\n     <option name=\"USE_PER_PROJECT_SETTINGS\" value=\"true\" />\n+    <option name=\"PREFERRED_PROJECT_CODE_STYLE\" value=\"Default\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0f4e182c0ddadd7754c0deb1b48ca60d456fbd8"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM4OTExOQ==", "bodyText": "Thanks, fixing this", "url": "https://github.com/commons-app/apps-android-commons/pull/3686#discussion_r414389119", "createdAt": "2020-04-24T08:22:41Z", "author": {"login": "ashishkumar468"}, "path": ".idea/codeStyles/codeStyleConfig.xml", "diffHunk": "@@ -1,5 +1,6 @@\n <component name=\"ProjectCodeStyleConfiguration\">\n   <state>\n     <option name=\"USE_PER_PROJECT_SETTINGS\" value=\"true\" />\n+    <option name=\"PREFERRED_PROJECT_CODE_STYLE\" value=\"Default\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM2OTY3NQ=="}, "originalCommit": {"oid": "f0f4e182c0ddadd7754c0deb1b48ca60d456fbd8"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NTc1NjQ1OnYy", "diffSide": "RIGHT", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNzo1MjowOVrOGLLLfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMDo0NDozOFrOGLRxfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM3MDY4Nw==", "bodyText": "I would expect zero changes to this file, if we just remove the state restoration in CheckboxTriState that is the minimal change to solve this issue", "url": "https://github.com/commons-app/apps-android-commons/pull/3686#discussion_r414370687", "createdAt": "2020-04-24T07:52:09Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -118,8 +118,9 @@\n \n public class NearbyParentFragment extends CommonsDaggerSupportFragment\n         implements NearbyParentFragmentContract.View,\n-        WikidataEditListener.WikidataP18EditListener, LocationUpdateListener {\n+        WikidataEditListener.WikidataP18EditListener, LocationUpdateListener ,CheckBoxTriStates.Callback{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0f4e182c0ddadd7754c0deb1b48ca60d456fbd8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM4ODgxNQ==", "bodyText": "@macgills  We have removed the manual state restoration thing, but the android system also restores the view right so if we don't set the callback in such cases, it will throw an NPE, right?", "url": "https://github.com/commons-app/apps-android-commons/pull/3686#discussion_r414388815", "createdAt": "2020-04-24T08:22:12Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -118,8 +118,9 @@\n \n public class NearbyParentFragment extends CommonsDaggerSupportFragment\n         implements NearbyParentFragmentContract.View,\n-        WikidataEditListener.WikidataP18EditListener, LocationUpdateListener {\n+        WikidataEditListener.WikidataP18EditListener, LocationUpdateListener ,CheckBoxTriStates.Callback{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM3MDY4Nw=="}, "originalCommit": {"oid": "f0f4e182c0ddadd7754c0deb1b48ca60d456fbd8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM5NTEzNg==", "bodyText": "This is called on master after onViewCreated\ncheckBoxTriStates.setCallback((o, state, b, b1) -> presenter.filterByMarkerType(o,state,b,b1));\n\nThere was an internal problem where the checkbox will throw an NPE if you don't set a click listener to it and it processes a click event, that should not be the case. That problem arose because the state restoration was happening before the click listener was set and your version of state restoration didn't use the isRestoring flag to prevent the state restoration being interpreted as human input.", "url": "https://github.com/commons-app/apps-android-commons/pull/3686#discussion_r414395136", "createdAt": "2020-04-24T08:32:10Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -118,8 +118,9 @@\n \n public class NearbyParentFragment extends CommonsDaggerSupportFragment\n         implements NearbyParentFragmentContract.View,\n-        WikidataEditListener.WikidataP18EditListener, LocationUpdateListener {\n+        WikidataEditListener.WikidataP18EditListener, LocationUpdateListener ,CheckBoxTriStates.Callback{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM3MDY4Nw=="}, "originalCommit": {"oid": "f0f4e182c0ddadd7754c0deb1b48ca60d456fbd8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM5NjAxNg==", "bodyText": "I am still halfway through my morning coffee, that wasn't a great explanation...\nI'll perk up in a bit if you have any questions", "url": "https://github.com/commons-app/apps-android-commons/pull/3686#discussion_r414396016", "createdAt": "2020-04-24T08:33:33Z", "author": {"login": "macgills"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -118,8 +118,9 @@\n \n public class NearbyParentFragment extends CommonsDaggerSupportFragment\n         implements NearbyParentFragmentContract.View,\n-        WikidataEditListener.WikidataP18EditListener, LocationUpdateListener {\n+        WikidataEditListener.WikidataP18EditListener, LocationUpdateListener ,CheckBoxTriStates.Callback{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM3MDY4Nw=="}, "originalCommit": {"oid": "f0f4e182c0ddadd7754c0deb1b48ca60d456fbd8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ3ODcxOQ==", "bodyText": "Fair point, done", "url": "https://github.com/commons-app/apps-android-commons/pull/3686#discussion_r414478719", "createdAt": "2020-04-24T10:44:38Z", "author": {"login": "ashishkumar468"}, "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -118,8 +118,9 @@\n \n public class NearbyParentFragment extends CommonsDaggerSupportFragment\n         implements NearbyParentFragmentContract.View,\n-        WikidataEditListener.WikidataP18EditListener, LocationUpdateListener {\n+        WikidataEditListener.WikidataP18EditListener, LocationUpdateListener ,CheckBoxTriStates.Callback{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM3MDY4Nw=="}, "originalCommit": {"oid": "f0f4e182c0ddadd7754c0deb1b48ca60d456fbd8"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4333, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}