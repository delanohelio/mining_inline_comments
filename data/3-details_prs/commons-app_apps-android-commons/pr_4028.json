{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5MDkwMjkz", "number": 4028, "title": "fixes Progress Bar Visibility change with Orientation Change and login process terminated (#4001)", "bodyText": "Description (required)\nFixes #4001\nWhat changes did you make and why?\nBug is due to the restart of LoginActivity on the configuration change\n\nOverrides the onSaveInstanceState method and onRestoreInstanceState method in LoginActivity.java\nIn onSaveInstanceState save\u00a0 ProgressDailog state or visiblity and text of TextView(errorMessage)\nIn onRestoreInstanceState restore All saved Data\n\nTests performed (required)\nTested prodDebug on Redmi Y3 level 29\nScreenshots (for UI changes only)", "createdAt": "2020-11-11T10:04:15Z", "url": "https://github.com/commons-app/apps-android-commons/pull/4028", "merged": true, "mergeCommit": {"oid": "9375a8ba11353b9837db0f60e49d40122d69e26a"}, "closed": true, "closedAt": "2020-11-23T17:41:03Z", "author": {"login": "Prince-kushwaha"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbK8ZwgH2gAyNTE5MDkwMjkzOjFhOTJiMTdlMzc2MWQ4OTk3MjM5ZmRhZjIxNjA0NjhkYjM5MmNlMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdetjupgH2gAyNTE5MDkwMjkzOjRkNDMwODA2NjhhZjQ1YjVkYTc5YzY1ZTg4ZmMwNzRmNjY3OTdiMTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1a92b17e3761d8997239fdaf2160468db392ce24", "author": {"user": {"login": "Prince-kushwaha", "name": "Prince kushwaha"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/1a92b17e3761d8997239fdaf2160468db392ce24", "committedDate": "2020-11-10T15:18:13Z", "message": "fixes #4001\n* Overrides the onSaveInstanceState method and onRestoreInstanceState method in LoginActivity.java\n* In onSaveInstanceState save  ProgressDailog state or visiblity and text of TextView(errorMessage)\n* In onRestoreInstanceState restore All saved Data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f99b5813ccb45aed3d989bcab3e900f26ff051d", "author": {"user": {"login": "Prince-kushwaha", "name": "Prince kushwaha"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/2f99b5813ccb45aed3d989bcab3e900f26ff051d", "committedDate": "2020-11-14T01:03:30Z", "message": "Update the commit -https://github.com/commons-app/apps-android-commons/pull/4028/commits/1a92b17e3761d8997239fdaf2160468db392ce24"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNTI2MDQ2", "url": "https://github.com/commons-app/apps-android-commons/pull/4028#pullrequestreview-532526046", "createdAt": "2020-11-17T16:02:09Z", "commit": {"oid": "2f99b5813ccb45aed3d989bcab3e900f26ff051d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNjowMjowOVrOH08h1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNjowMjozOFrOH08jSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI3OTcwMg==", "bodyText": "Could you look into the formatting please? There are random whitespaces where they should not exist.", "url": "https://github.com/commons-app/apps-android-commons/pull/4028#discussion_r525279702", "createdAt": "2020-11-17T16:02:09Z", "author": {"login": "misaochan"}, "path": "app/src/main/java/fr/free/nrw/commons/auth/LoginActivity.java", "diffHunk": "@@ -456,4 +459,48 @@ public static void startYourself(Context context) {\n         Intent intent = new Intent(context, LoginActivity.class);\n         context.startActivity(intent);\n     }\n+\n+    @Override\n+    protected void onSaveInstanceState(Bundle outState) {\n+        // if progressDialog is visible during the configuration change  then store state as  true else false so that\n+        // we maintain visiblity of progressDailog after configuration change\n+        if(progressDialog!=null&&progressDialog.isShowing()){\n+            outState.putBoolean(Save_progressDailog,true);\n+        }else{\n+            outState.putBoolean(Save_progressDailog,false);\n+        }\n+\n+        outState.putString(Save_errorMessage,errorMessage.getText().toString()); //Save the errorMessage\n+        outState.putString(Save_username,getUsername()); // Save the username\n+        outState.putString(Save_password,getPassword()); // Save thte password\n+    }\n+\n+    private String getUsername() {\n+        return usernameEdit.getText().toString();\n+    }\n+    private String getPassword(){\n+        return  passwordEdit.getText().toString();\n+  }\n+\n+    @Override\n+    protected void onRestoreInstanceState(final Bundle savedInstanceState) {\n+        super.onRestoreInstanceState(savedInstanceState);\n+\n+        usernameEdit.setText(savedInstanceState.getString(Save_username));\n+        passwordEdit.setText(savedInstanceState.getString(Save_password));\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f99b5813ccb45aed3d989bcab3e900f26ff051d"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI4MDA3NQ==", "bodyText": "Please refer to codestyle, there should be whitespaces here and in other else statements.", "url": "https://github.com/commons-app/apps-android-commons/pull/4028#discussion_r525280075", "createdAt": "2020-11-17T16:02:38Z", "author": {"login": "misaochan"}, "path": "app/src/main/java/fr/free/nrw/commons/auth/LoginActivity.java", "diffHunk": "@@ -456,4 +459,48 @@ public static void startYourself(Context context) {\n         Intent intent = new Intent(context, LoginActivity.class);\n         context.startActivity(intent);\n     }\n+\n+    @Override\n+    protected void onSaveInstanceState(Bundle outState) {\n+        // if progressDialog is visible during the configuration change  then store state as  true else false so that\n+        // we maintain visiblity of progressDailog after configuration change\n+        if(progressDialog!=null&&progressDialog.isShowing()){\n+            outState.putBoolean(Save_progressDailog,true);\n+        }else{\n+            outState.putBoolean(Save_progressDailog,false);\n+        }\n+\n+        outState.putString(Save_errorMessage,errorMessage.getText().toString()); //Save the errorMessage\n+        outState.putString(Save_username,getUsername()); // Save the username\n+        outState.putString(Save_password,getPassword()); // Save thte password\n+    }\n+\n+    private String getUsername() {\n+        return usernameEdit.getText().toString();\n+    }\n+    private String getPassword(){\n+        return  passwordEdit.getText().toString();\n+  }\n+\n+    @Override\n+    protected void onRestoreInstanceState(final Bundle savedInstanceState) {\n+        super.onRestoreInstanceState(savedInstanceState);\n+\n+        usernameEdit.setText(savedInstanceState.getString(Save_username));\n+        passwordEdit.setText(savedInstanceState.getString(Save_password));\n+\n+\n+        if(savedInstanceState.getBoolean(Save_progressDailog)){\n+            performLogin();\n+        }\n+\n+        String errorMessage=savedInstanceState.getString(Save_errorMessage);\n+\n+        if(sessionManager.isUserLoggedIn()){\n+            showMessage(R.string.login_success, R.color.primaryDarkColor);\n+        }else{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f99b5813ccb45aed3d989bcab3e900f26ff051d"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e26b1a2ffe1b3743280ec3fc557971e81d1c90c", "author": {"user": {"login": "Prince-kushwaha", "name": "Prince kushwaha"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/9e26b1a2ffe1b3743280ec3fc557971e81d1c90c", "committedDate": "2020-11-19T09:54:45Z", "message": "formatting the codechanges"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NDEzMjI2", "url": "https://github.com/commons-app/apps-android-commons/pull/4028#pullrequestreview-535413226", "createdAt": "2020-11-20T13:10:05Z", "commit": {"oid": "9e26b1a2ffe1b3743280ec3fc557971e81d1c90c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d43080668af45b5da79c65e88fc074f66797b19", "author": {"user": {"login": "Prince-kushwaha", "name": "Prince kushwaha"}}, "url": "https://github.com/commons-app/apps-android-commons/commit/4d43080668af45b5da79c65e88fc074f66797b19", "committedDate": "2020-11-21T15:19:43Z", "message": "reformated the codechange"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 562, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}