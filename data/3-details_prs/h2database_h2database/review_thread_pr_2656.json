{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyODE3NjMx", "number": 2656, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjoxNjo1NVrOD_bY6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjozNzozN1rOD_bnfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3ODM1NjI3OnYy", "diffSide": "RIGHT", "path": "h2/src/main/org/h2/server/pg/PgServer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjoxNjo1NVrOGaFk1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjozNDo1MFrOGaF5Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAwNzUxMQ==", "bodyText": "Where these strings came from? The real PostgreSQL returns smallint[], integer[], and character varying[] from its format_type() function.", "url": "https://github.com/h2database/h2database/pull/2656#discussion_r430007511", "createdAt": "2020-05-25T16:16:55Z", "author": {"login": "katzyn"}, "path": "h2/src/main/org/h2/server/pg/PgServer.java", "diffHunk": "@@ -339,8 +340,12 @@ public static String formatType(int pgType) {\n         case PG_TYPE_FLOAT8:\n             valueType = Value.DOUBLE;\n             break;\n+        case PG_TYPE_INT2_ARRAY:\n+            return \"_int2\";\n+        case PG_TYPE_INT4_ARRAY:\n+            return \"_int4\";\n         case PG_TYPE_VARCHAR_ARRAY:\n-            return \"character varying[]\";\n+            return \"_varchar\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "856d4c62e60246d59d0c17b4305276915382ab3f"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxMjcxMA==", "bodyText": "I thought they came from pg_type.typname :-P", "url": "https://github.com/h2database/h2database/pull/2656#discussion_r430012710", "createdAt": "2020-05-25T16:34:50Z", "author": {"login": "auntyellow"}, "path": "h2/src/main/org/h2/server/pg/PgServer.java", "diffHunk": "@@ -339,8 +340,12 @@ public static String formatType(int pgType) {\n         case PG_TYPE_FLOAT8:\n             valueType = Value.DOUBLE;\n             break;\n+        case PG_TYPE_INT2_ARRAY:\n+            return \"_int2\";\n+        case PG_TYPE_INT4_ARRAY:\n+            return \"_int4\";\n         case PG_TYPE_VARCHAR_ARRAY:\n-            return \"character varying[]\";\n+            return \"_varchar\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAwNzUxMQ=="}, "originalCommit": {"oid": "856d4c62e60246d59d0c17b4305276915382ab3f"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3ODM5MzU3OnYy", "diffSide": "RIGHT", "path": "h2/src/main/org/h2/mode/PgCatalogTable.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjozNzozN1rOGaF8WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjozNzozN1rOGaF8WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxMzUyOA==", "bodyText": "I think all array types should be grouped together. VARCHAR ARRAY can be defined there too and code in lines 556\u2013572 can skip Value.ARRAY to avoid duplicate definition.", "url": "https://github.com/h2database/h2database/pull/2656#discussion_r430013528", "createdAt": "2020-05-25T16:37:37Z", "author": {"login": "katzyn"}, "path": "h2/src/main/org/h2/mode/PgCatalogTable.java", "diffHunk": "@@ -81,6 +81,16 @@\n \n     private static final int META_TABLE_TYPE_COUNT = PG_USER + 1;\n \n+    private static final Object[][] PG_EXTRA_TYPES = {\n+            { 18, \"char\", 1, 0 },\n+            { 19, \"name\", 64, 18 },\n+            { 22, \"int2vector\", -1, 21 },\n+            { 24, \"regproc\", 4, 0 },\n+            { PgServer.PG_TYPE_INT2_ARRAY, \"_int2\", -1, PgServer.PG_TYPE_INT2 },\n+            { PgServer.PG_TYPE_INT4_ARRAY, \"_int4\", -1, PgServer.PG_TYPE_INT4 },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adc8c69bc52d4283a7daae0a4bc41e81d298968d"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2191, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}