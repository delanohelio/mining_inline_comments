{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMDY2ODAy", "number": 2601, "title": "Add field SLEEP_SINCE to session and INFORMATION_SCHEMA.SESSIONS table", "bodyText": "This PR adds a new feature that allows to monitor and detect idle sessions.\nWhenever a statement completes this timestamp  is set to the current time.\nIn combination with a heartbeat implemented on the connection, stale clients can be detected and removed using the abort_session() function implemented in PR #2195.", "createdAt": "2020-05-04T16:54:01Z", "url": "https://github.com/h2database/h2database/pull/2601", "merged": true, "mergeCommit": {"oid": "8138ff3d8ee95811e13befdbd8cfbd39b4a86012"}, "closed": true, "closedAt": "2020-05-07T02:58:21Z", "author": {"login": "cbvms123"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceBpG8gH2gAyNDEzMDY2ODAyOjgzMjI1OTUwOWU3OTJlODBjNDVhNzc5M2FhYzMwMmEzYjE4NTE1NjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcevreVAH2gAyNDEzMDY2ODAyOjkzYzJhOTJlYzQ3YTc1NWQzNmVlZjRlNWIwYjU2OGI0N2QwMWQ2ZDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "832259509e792e80c45a7793aac302a3b1851566", "author": {"user": null}, "url": "https://github.com/h2database/h2database/commit/832259509e792e80c45a7793aac302a3b1851566", "committedDate": "2020-05-04T15:58:37Z", "message": "Add field SLEEP_SINCE to session and INFORMATION_SCHEMA.SESSIONS table\n\n; Conflicts:\n;\th2/src/main/org/h2/engine/Session.java\n;\th2/src/main/org/h2/table/MetaTable.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NDc5MDg3", "url": "https://github.com/h2database/h2database/pull/2601#pullrequestreview-405479087", "createdAt": "2020-05-05T03:54:57Z", "commit": {"oid": "832259509e792e80c45a7793aac302a3b1851566"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMzo1NDo1N1rOGQZolg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMzo1NDo1N1rOGQZolg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTg1MDM5MA==", "bodyText": "Maybe I'm wrong, but it looks like there is no need for two fields, a single shared filed may be used to store timestamp of last change. Session knows its state (see Session.state), so current meaning of the field can be easily determined.", "url": "https://github.com/h2database/h2database/pull/2601#discussion_r419850390", "createdAt": "2020-05-05T03:54:57Z", "author": {"login": "katzyn"}, "path": "h2/src/main/org/h2/engine/Session.java", "diffHunk": "@@ -173,6 +174,7 @@ public boolean equals(Object obj) {\n     private final ValueTimestampTimeZone sessionStart;\n     private ValueTimestampTimeZone transactionStart;\n     private ValueTimestampTimeZone currentCommandStart;\n+    private ValueTimestampTimeZone sleepStateSince;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "832259509e792e80c45a7793aac302a3b1851566"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e56f04634ca0488b07189bb9ece7812b3d6d3b38", "author": {"user": null}, "url": "https://github.com/h2database/h2database/commit/e56f04634ca0488b07189bb9ece7812b3d6d3b38", "committedDate": "2020-05-06T06:45:01Z", "message": "Share field for start and end time of command"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbffd526f2cc3a4f46c3e37fcd3692b70176aee2", "author": {"user": null}, "url": "https://github.com/h2database/h2database/commit/dbffd526f2cc3a4f46c3e37fcd3692b70176aee2", "committedDate": "2020-05-06T06:52:41Z", "message": "Rename field and getter to reflect dual use of value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93c2a92ec47a755d36eef4e5b0b568b47d01d6d5", "author": {"user": null}, "url": "https://github.com/h2database/h2database/commit/93c2a92ec47a755d36eef4e5b0b568b47d01d6d5", "committedDate": "2020-05-06T21:36:50Z", "message": "Update changelog"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3861, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}