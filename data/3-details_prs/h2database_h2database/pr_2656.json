{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyODE3NjMx", "number": 2656, "title": "add `_int2` and `_int4` for PgServer", "bodyText": "DBeaver can edit rows now :-)", "createdAt": "2020-05-25T16:05:55Z", "url": "https://github.com/h2database/h2database/pull/2656", "merged": true, "mergeCommit": {"oid": "c8440c07b67afc0403061b27889ba656b3539b69"}, "closed": true, "closedAt": "2020-05-26T02:15:46Z", "author": {"login": "auntyellow"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckyfbMAFqTQxNzc5OTI3Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcky_DmgH2gAyNDIyODE3NjMxOjFmZDhiMWQyNzNjOWExOTkzYTY4Yjg4MzVjYTIzNmJhMGZlNzhhNGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3Nzk5Mjc3", "url": "https://github.com/h2database/h2database/pull/2656#pullrequestreview-417799277", "createdAt": "2020-05-25T16:16:55Z", "commit": {"oid": "856d4c62e60246d59d0c17b4305276915382ab3f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjoxNjo1NVrOGaFk1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjoxNjo1NVrOGaFk1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAwNzUxMQ==", "bodyText": "Where these strings came from? The real PostgreSQL returns smallint[], integer[], and character varying[] from its format_type() function.", "url": "https://github.com/h2database/h2database/pull/2656#discussion_r430007511", "createdAt": "2020-05-25T16:16:55Z", "author": {"login": "katzyn"}, "path": "h2/src/main/org/h2/server/pg/PgServer.java", "diffHunk": "@@ -339,8 +340,12 @@ public static String formatType(int pgType) {\n         case PG_TYPE_FLOAT8:\n             valueType = Value.DOUBLE;\n             break;\n+        case PG_TYPE_INT2_ARRAY:\n+            return \"_int2\";\n+        case PG_TYPE_INT4_ARRAY:\n+            return \"_int4\";\n         case PG_TYPE_VARCHAR_ARRAY:\n-            return \"character varying[]\";\n+            return \"_varchar\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "856d4c62e60246d59d0c17b4305276915382ab3f"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adc8c69bc52d4283a7daae0a4bc41e81d298968d", "author": {"user": {"login": "auntyellow", "name": null}}, "url": "https://github.com/h2database/h2database/commit/adc8c69bc52d4283a7daae0a4bc41e81d298968d", "committedDate": "2020-05-25T16:30:45Z", "message": "add `_int2` and `_int4` for PgServer\n\nDBeaver can edit rows now :-)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "856d4c62e60246d59d0c17b4305276915382ab3f", "author": {"user": {"login": "auntyellow", "name": null}}, "url": "https://github.com/h2database/h2database/commit/856d4c62e60246d59d0c17b4305276915382ab3f", "committedDate": "2020-05-25T15:54:58Z", "message": "add `_int2` and `_int4`\n\nDBeaver can edit rows now :-)"}, "afterCommit": {"oid": "adc8c69bc52d4283a7daae0a4bc41e81d298968d", "author": {"user": {"login": "auntyellow", "name": null}}, "url": "https://github.com/h2database/h2database/commit/adc8c69bc52d4283a7daae0a4bc41e81d298968d", "committedDate": "2020-05-25T16:30:45Z", "message": "add `_int2` and `_int4` for PgServer\n\nDBeaver can edit rows now :-)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3ODA2MzA1", "url": "https://github.com/h2database/h2database/pull/2656#pullrequestreview-417806305", "createdAt": "2020-05-25T16:37:36Z", "commit": {"oid": "adc8c69bc52d4283a7daae0a4bc41e81d298968d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjozNzozN1rOGaF8WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNjozNzozN1rOGaF8WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxMzUyOA==", "bodyText": "I think all array types should be grouped together. VARCHAR ARRAY can be defined there too and code in lines 556\u2013572 can skip Value.ARRAY to avoid duplicate definition.", "url": "https://github.com/h2database/h2database/pull/2656#discussion_r430013528", "createdAt": "2020-05-25T16:37:37Z", "author": {"login": "katzyn"}, "path": "h2/src/main/org/h2/mode/PgCatalogTable.java", "diffHunk": "@@ -81,6 +81,16 @@\n \n     private static final int META_TABLE_TYPE_COUNT = PG_USER + 1;\n \n+    private static final Object[][] PG_EXTRA_TYPES = {\n+            { 18, \"char\", 1, 0 },\n+            { 19, \"name\", 64, 18 },\n+            { 22, \"int2vector\", -1, 21 },\n+            { 24, \"regproc\", 4, 0 },\n+            { PgServer.PG_TYPE_INT2_ARRAY, \"_int2\", -1, PgServer.PG_TYPE_INT2 },\n+            { PgServer.PG_TYPE_INT4_ARRAY, \"_int4\", -1, PgServer.PG_TYPE_INT4 },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adc8c69bc52d4283a7daae0a4bc41e81d298968d"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fd8b1d273c9a1993a68b8835ca236ba0fe78a4b", "author": {"user": {"login": "auntyellow", "name": null}}, "url": "https://github.com/h2database/h2database/commit/1fd8b1d273c9a1993a68b8835ca236ba0fe78a4b", "committedDate": "2020-05-25T16:51:29Z", "message": "group array types together in `pg_type`"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3885, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}