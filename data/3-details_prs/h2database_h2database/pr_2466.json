{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NzI3MTM5", "number": 2466, "title": "Add partial support for the mysql COLLATE and CHARACTER syntax", "bodyText": "Add support to parse the mysql COLLATE and CHARACTER keywords during\ntable creation, column definition or table alteration. Also add the\nsupport for UTF8MB4_BIN mysqlcharset.\nThis PR doesn't add support for column collation, but merely make it\npossible to use mysql scripts that uses those keyword without giving an\nerror.", "createdAt": "2020-02-23T16:57:25Z", "url": "https://github.com/h2database/h2database/pull/2466", "merged": true, "mergeCommit": {"oid": "3292dfb2906fa5e6c686a020cf01a6c86637a687"}, "closed": true, "closedAt": "2020-02-26T04:32:56Z", "author": {"login": "Drahakar"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHNvl1ABqjMwNjM2MzU3MTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcH9drvgBqjMwNzE5MTQ2NDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f3db364be8a3127c974756da7c4de5b5fb2e317", "author": {"user": {"login": "Drahakar", "name": null}}, "url": "https://github.com/h2database/h2database/commit/3f3db364be8a3127c974756da7c4de5b5fb2e317", "committedDate": "2020-02-23T16:41:15Z", "message": "Add partial support for the mysql COLLATE and CHARACTER syntax\n\nAdd support to parse the mysql COLLATE and CHARACTER keywords during\ntable creation, column definition or table alteration. Also add the\nsupport for UTF8MB4_BIN mysqlcharset.\n\nThis PR doesn't add support for column collation, but merely make it\npossible to use mysql scripts that uses those keyword without giving an\nerror."}, "afterCommit": {"oid": "1f359b8ccc9ec0c2cdeea6d5b887d11fbacf7752", "author": {"user": {"login": "Drahakar", "name": null}}, "url": "https://github.com/h2database/h2database/commit/1f359b8ccc9ec0c2cdeea6d5b887d11fbacf7752", "committedDate": "2020-02-23T19:04:00Z", "message": "Add partial support for the mysql COLLATE and CHARACTER syntax\n\nAdd support to parse the mysql COLLATE and CHARACTER keywords during\ntable creation, column definition or table alteration. Also add the\nsupport for UTF8MB4_BIN mysqlcharset.\n\nThis PR doesn't add support for column collation, but merely make it\npossible to use mysql scripts that uses those keyword without giving an\nerror."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMTQ5NDkx", "url": "https://github.com/h2database/h2database/pull/2466#pullrequestreview-363149491", "createdAt": "2020-02-24T02:30:44Z", "commit": {"oid": "1f359b8ccc9ec0c2cdeea6d5b887d11fbacf7752"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwMjozMDo0NFrOFtUl4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwMjozNTowMVrOFtUn-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA2NzYxOQ==", "bodyText": "if (database.getMode().getEnum() == ModeEnum.MySQL) {\n\u2026\n}", "url": "https://github.com/h2database/h2database/pull/2466#discussion_r383067619", "createdAt": "2020-02-24T02:30:44Z", "author": {"login": "katzyn"}, "path": "h2/src/main/org/h2/command/Parser.java", "diffHunk": "@@ -6001,6 +6001,13 @@ private Column parseColumnForTable(String columnName, boolean defaultNullable) {\n             int value = readNonNegativeInt();\n             column.setSelectivity(value);\n         }\n+        if (readIf(\"CHARACTER\")) {\n+            readIf(SET);\n+            readMySQLCharset();\n+        }\n+        if (readIf(\"COLLATE\")) {\n+            readMySQLCharset();\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f359b8ccc9ec0c2cdeea6d5b887d11fbacf7752"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA2ODE1Mw==", "bodyText": "if (!readIf(\"UTF8\") && !readIf(\"UTF8MB4\")) {\n    read(\"UTF8MB4_BIN\");\n}\nor something like it.", "url": "https://github.com/h2database/h2database/pull/2466#discussion_r383068153", "createdAt": "2020-02-24T02:35:01Z", "author": {"login": "katzyn"}, "path": "h2/src/main/org/h2/command/Parser.java", "diffHunk": "@@ -9106,9 +9116,9 @@ private void parseCreateTableMySQLTableOptions(CreateTable command) {\n \n     private void readMySQLCharset() {\n         readIf(EQUAL);\n-        if (!readIf(\"UTF8\")) {\n-            read(\"UTF8MB4\");\n-        }\n+        readIf(\"UTF8\");\n+        readIf(\"UTF8MB4\");\n+        readIf(\"UTF8MB4_BIN\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f359b8ccc9ec0c2cdeea6d5b887d11fbacf7752"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "787322a6d7f94d2617550eabcd5572d3c7f9eba6", "author": {"user": {"login": "Drahakar", "name": null}}, "url": "https://github.com/h2database/h2database/commit/787322a6d7f94d2617550eabcd5572d3c7f9eba6", "committedDate": "2020-02-26T02:39:23Z", "message": "Add partial support for the mysql COLLATE and CHARACTER statements\n\nAdd support to parse the mysql COLLATE and CHARACTER statements during\ntable creation, column definition or table alteration. Also add the\nsupport for UTF8MB4_BIN mysqlcharset.\n\nThis PR doesn't add support for column collation, but merely make it\npossible to use mysql scripts that uses those keyword without giving an\nerror."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f359b8ccc9ec0c2cdeea6d5b887d11fbacf7752", "author": {"user": {"login": "Drahakar", "name": null}}, "url": "https://github.com/h2database/h2database/commit/1f359b8ccc9ec0c2cdeea6d5b887d11fbacf7752", "committedDate": "2020-02-23T19:04:00Z", "message": "Add partial support for the mysql COLLATE and CHARACTER syntax\n\nAdd support to parse the mysql COLLATE and CHARACTER keywords during\ntable creation, column definition or table alteration. Also add the\nsupport for UTF8MB4_BIN mysqlcharset.\n\nThis PR doesn't add support for column collation, but merely make it\npossible to use mysql scripts that uses those keyword without giving an\nerror."}, "afterCommit": {"oid": "787322a6d7f94d2617550eabcd5572d3c7f9eba6", "author": {"user": {"login": "Drahakar", "name": null}}, "url": "https://github.com/h2database/h2database/commit/787322a6d7f94d2617550eabcd5572d3c7f9eba6", "committedDate": "2020-02-26T02:39:23Z", "message": "Add partial support for the mysql COLLATE and CHARACTER statements\n\nAdd support to parse the mysql COLLATE and CHARACTER statements during\ntable creation, column definition or table alteration. Also add the\nsupport for UTF8MB4_BIN mysqlcharset.\n\nThis PR doesn't add support for column collation, but merely make it\npossible to use mysql scripts that uses those keyword without giving an\nerror."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3831, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}