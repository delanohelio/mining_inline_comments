{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1Nzg4NTA0", "number": 2451, "title": "Add some PostgreSQL compatibility features mentioned in issue #2450", "bodyText": "SET client_min_messages\nSET client_encoding\nSHOW ssl\nset_config()\npg_relation_size()\nobj_description()\ncolumn \"pg_catalog\".\"proargtypes\"\n::regclass (use function alias \"pg_get_oid\" when DATABASE_TO_LOWER=TRUE)", "createdAt": "2020-02-16T05:13:16Z", "url": "https://github.com/h2database/h2database/pull/2451", "merged": true, "mergeCommit": {"oid": "fe8f7edf787bbfe680a8c4fa143c5566fc7493f4"}, "closed": true, "closedAt": "2020-02-16T12:42:55Z", "author": {"login": "auntyellow"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEyrC7gFqTM1OTM4MjQ0Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcE3Jd_ABqjMwNDE0OTUxMzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MzgyNDQy", "url": "https://github.com/h2database/h2database/pull/2451#pullrequestreview-359382442", "createdAt": "2020-02-16T06:14:04Z", "commit": {"oid": "677fa595e7e120768a7a7351605eaad870f1d2d9"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQwNjoxNDowNFrOFqR6-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQwNjoyMjowM1rOFqR8PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg3ODEzNw==", "bodyText": "Please, merge changes from the master branch and use \"'off' SSL\" here.", "url": "https://github.com/h2database/h2database/pull/2451#discussion_r379878137", "createdAt": "2020-02-16T06:14:04Z", "author": {"login": "katzyn"}, "path": "h2/src/main/org/h2/command/Parser.java", "diffHunk": "@@ -1568,6 +1568,9 @@ private Prepared parseShow() {\n         } else if (readIf(\"SERVER_ENCODING\")) {\n             // for PostgreSQL compatibility\n             buff.append(\"'UTF8' AS SERVER_ENCODING FROM DUAL\");\n+        } else if (readIf(\"SSL\")) {\n+            // for PostgreSQL compatibility\n+            buff.append(\"'off' AS SSL FROM DUAL\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "677fa595e7e120768a7a7351605eaad870f1d2d9"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg3ODI4NQ==", "bodyText": "database.sysIdentifier() should be used here, but I'm not sure about the whole such replacement with this function. It doesn't have any real implementation and it isn't defined when PG server is not in use.", "url": "https://github.com/h2database/h2database/pull/2451#discussion_r379878285", "createdAt": "2020-02-16T06:17:08Z", "author": {"login": "katzyn"}, "path": "h2/src/main/org/h2/command/Parser.java", "diffHunk": "@@ -4657,7 +4660,8 @@ private Expression readTerm() {\n                 read(DOT);\n             }\n             if (readIf(\"REGCLASS\")) {\n-                FunctionAlias f = findFunctionAlias(database.getMainSchema().getName(), \"PG_GET_OID\");\n+                FunctionAlias f = findFunctionAlias(database.getMainSchema().getName(),\n+                        identifiersToUpper ? \"PG_GET_OID\" : \"pg_get_oid\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "677fa595e7e120768a7a7351605eaad870f1d2d9"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg3ODQ2MA==", "bodyText": "int array or some other normal data type should be used here.", "url": "https://github.com/h2database/h2database/pull/2451#discussion_r379878460", "createdAt": "2020-02-16T06:22:03Z", "author": {"login": "katzyn"}, "path": "h2/src/main/org/h2/server/pg/pg_catalog.sql", "diffHunk": "@@ -149,6 +149,7 @@ create table pg_catalog.pg_proc(\n     oid int,\n     proname varchar_ignorecase,\n     prorettype int,\n+    proargtypes array,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "677fa595e7e120768a7a7351605eaad870f1d2d9"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5Mzk1NDEy", "url": "https://github.com/h2database/h2database/pull/2451#pullrequestreview-359395412", "createdAt": "2020-02-16T11:00:12Z", "commit": {"oid": "3bb92b8cd7ce38a7cd1bb6c47c746c327544dd97"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMTowMDoxM1rOFqS5Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxMTowMDoxM1rOFqS5Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5NDA1OQ==", "bodyText": "You can't add this configuration file that easy. You need to adjust generation of Windows and ZIP distributions too, because they are currently packaged with another wrapper. It's better to do it in a separate pull request.\nSee also #2410.", "url": "https://github.com/h2database/h2database/pull/2451#discussion_r379894059", "createdAt": "2020-02-16T11:00:13Z", "author": {"login": "katzyn"}, "path": "h2/service/wrapper.conf", "diffHunk": "@@ -1,101 +1,101 @@\n-#********************************************************************\r\n-# Wrapper Properties\r\n-#********************************************************************\r\n-# Java Application\r\n-wrapper.java.command=java\r\n-\r\n-# Java Main class.  This class must implement the WrapperListener interface\r\n-#  or guarantee that the WrapperManager class is initialized.  Helper\r\n-#  classes are provided to do this for you.  See the Integration section\r\n-#  of the documentation for details.\r\n-wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp\r\n-\r\n-# Java Classpath (include wrapper.jar)  Add class path elements as\r\n-#  needed starting from 1\r\n-wrapper.java.classpath.1=wrapper.jar\r\n-wrapper.java.classpath.2=../bin/h2.jar\r\n-wrapper.java.classpath.3=%H2DRIVERS%\r\n-wrapper.java.classpath.4=%CLASSPATH%\r\n-\r\n-# Java Library Path (location of Wrapper.DLL or libwrapper.so)\r\n-wrapper.java.library.path.1=\r\n-\r\n-# Java Additional Parameters\r\n-#wrapper.java.additional.1=\r\n-\r\n-# Initial Java Heap Size (in MB)\r\n-#wrapper.java.initmemory=16\r\n-\r\n-# Maximum Java Heap Size (in MB)\r\n-#wrapper.java.maxmemory=64\r\n-\r\n-# Application parameters.  Add parameters as needed starting from 1\r\n-wrapper.app.parameter.1=org.h2.tools.Server\r\n-wrapper.app.parameter.2=-tcp\r\n-wrapper.app.parameter.3=-web\r\n-\r\n-#********************************************************************\r\n-# Wrapper Logging Properties\r\n-#********************************************************************\r\n-# Format of output for the console.  (See docs for formats)\r\n-wrapper.console.format=PM\r\n-\r\n-# Log Level for console output.  (See docs for log levels)\r\n-wrapper.console.loglevel=INFO\r\n-\r\n-# Log file to use for wrapper output logging.\r\n-wrapper.logfile=wrapper.log\r\n-\r\n-# Format of output for the log file.  (See docs for formats)\r\n-wrapper.logfile.format=LPTM\r\n-\r\n-# Log Level for log file output.  (See docs for log levels)\r\n-wrapper.logfile.loglevel=INFO\r\n-\r\n-# Maximum size that the log file will be allowed to grow to before\r\n-#  the log is rolled. Size is specified in bytes.  The default value\r\n-#  of 0, disables log rolling.  May abbreviate with the 'k' (kb) or\r\n-#  'm' (mb) suffix.  For example: 10m = 10 megabytes.\r\n-wrapper.logfile.maxsize=0\r\n-\r\n-# Maximum number of rolled log files which will be allowed before old\r\n-#  files are deleted.  The default value of 0 implies no limit.\r\n-wrapper.logfile.maxfiles=0\r\n-\r\n-# Log Level for sys/event log output.  (See docs for log levels)\r\n-wrapper.syslog.loglevel=NONE\r\n-\r\n-#********************************************************************\r\n-# Wrapper Windows Properties\r\n-#********************************************************************\r\n-# Title to use when running as a console\r\n-wrapper.console.title=H2 Console\r\n-\r\n-#********************************************************************\r\n-# Wrapper Windows NT/2000/XP Service Properties\r\n-#********************************************************************\r\n-# WARNING - Do not modify any of these properties when an application\r\n-#  using this configuration file has been installed as a service.\r\n-#  Please uninstall the service before modifying this section.  The\r\n-#  service can then be reinstalled.\r\n-\r\n-# Name of the service\r\n-wrapper.ntservice.name=H2DatabaseService\r\n-\r\n-# Display name of the service\r\n-wrapper.ntservice.displayname=H2 Database Engine Service\r\n-\r\n-# Description of the service\r\n-wrapper.ntservice.description=H2 Database Engine Service (TCP Server and H2 Console Web-Application)\r\n-\r\n-# Service dependencies.  Add dependencies as needed starting from 1\r\n-wrapper.ntservice.dependency.1=\r\n-\r\n-# Mode in which the service is installed.  AUTO_START or DEMAND_START\r\n-wrapper.ntservice.starttype=AUTO_START\r\n-\r\n-# Allow the service to interact with the desktop.\r\n-wrapper.ntservice.interactive=false\r\n-\r\n-# wrapper.ntservice.account=\r\n-# wrapper.ntservice.password=  \r\n+#********************************************************************\n+# Wrapper Properties\n+#********************************************************************\n+# Java Application", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bb92b8cd7ce38a7cd1bb6c47c746c327544dd97"}, "originalPosition": 105}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be4a72e4ae268839ed2f3a67ccf26d3cc5b7d021", "author": {"user": {"login": "auntyellow", "name": null}}, "url": "https://github.com/h2database/h2database/commit/be4a72e4ae268839ed2f3a67ccf26d3cc5b7d021", "committedDate": "2020-02-16T11:24:18Z", "message": "Add some PostgreSQL compatibility features mentioned in issue #2450\n\nSET client_min_messages\nSET client_encoding\nSHOW ssl\nset_config()\npg_relation_size()\nobj_description()\ncolumn \"pg_catalog\".\"proargtypes\"\n::regclass (use function alias \"pg_get_oid\" when DATABASE_TO_LOWER=TRUE)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3bb92b8cd7ce38a7cd1bb6c47c746c327544dd97", "author": {"user": {"login": "auntyellow", "name": null}}, "url": "https://github.com/h2database/h2database/commit/3bb92b8cd7ce38a7cd1bb6c47c746c327544dd97", "committedDate": "2020-02-16T10:48:58Z", "message": "Merge remote-tracking branch 'h2database/master' into pg\n\nConflicts:\n\th2/src/main/org/h2/command/Parser.java"}, "afterCommit": {"oid": "be4a72e4ae268839ed2f3a67ccf26d3cc5b7d021", "author": {"user": {"login": "auntyellow", "name": null}}, "url": "https://github.com/h2database/h2database/commit/be4a72e4ae268839ed2f3a67ccf26d3cc5b7d021", "committedDate": "2020-02-16T11:24:18Z", "message": "Add some PostgreSQL compatibility features mentioned in issue #2450\n\nSET client_min_messages\nSET client_encoding\nSHOW ssl\nset_config()\npg_relation_size()\nobj_description()\ncolumn \"pg_catalog\".\"proargtypes\"\n::regclass (use function alias \"pg_get_oid\" when DATABASE_TO_LOWER=TRUE)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3828, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}