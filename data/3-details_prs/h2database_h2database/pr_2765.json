{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxNzgwNTA4", "number": 2765, "title": "Fixes for issues in FileEncrypt, TestFileSystem.testConcurrent() and with PAGE_SIZE", "bodyText": "Closes #2757.\n@andreitokar", "createdAt": "2020-07-18T07:46:51Z", "url": "https://github.com/h2database/h2database/pull/2765", "merged": true, "mergeCommit": {"oid": "dbb27935d351062794d4f5e964039f358373b033"}, "closed": true, "closedAt": "2020-07-18T12:34:02Z", "author": {"login": "katzyn"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2B1STAH2gAyNDUxNzgwNTA4OmI0ZWUzZjE4MmQ3YTEwYTQyMjdjZjE3ZDdiNGYxNTYzYjAyYTc0NWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2HSDlgFqTQ1MTA1MjY1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b4ee3f182d7a10a4227cf17d7b4f1563b02a745e", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/b4ee3f182d7a10a4227cf17d7b4f1563b02a745e", "committedDate": "2020-07-18T05:46:06Z", "message": "Fix race in FileEncrypt.init()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffba3a683baca82959e4e14ca82917d6d69b0c8b", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/ffba3a683baca82959e4e14ca82917d6d69b0c8b", "committedDate": "2020-07-18T06:32:46Z", "message": "Chain some methods in FileEncrypt and simplify writeFully()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd8c0e3c299f7e3aea093b22ea6ffbfbd9bfc780", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/fd8c0e3c299f7e3aea093b22ea6ffbfbd9bfc780", "committedDate": "2020-07-18T06:43:05Z", "message": "Synchronize page access in TestFileSystem.testConcurrent()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58a9940542f44abd39515ce67b21c636dc00ddcd", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/58a9940542f44abd39515ce67b21c636dc00ddcd", "committedDate": "2020-07-18T06:49:29Z", "message": "Really test visibility of concurrent changes in testConcurrent()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db1a6e57426b25edcb11c0b998a46d36ad5d4c2c", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/db1a6e57426b25edcb11c0b998a46d36ad5d4c2c", "committedDate": "2020-07-18T07:17:52Z", "message": "Require PAGE_SIZE to be a multiple of 4096 for encrypted databases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2e27868ae2e47dd7e14a8a5ee944dd11363eadf", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/c2e27868ae2e47dd7e14a8a5ee944dd11363eadf", "committedDate": "2020-07-18T07:43:42Z", "message": "Update changelog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDUyMDI1", "url": "https://github.com/h2database/h2database/pull/2765#pullrequestreview-451052025", "createdAt": "2020-07-18T11:52:43Z", "commit": {"oid": "c2e27868ae2e47dd7e14a8a5ee944dd11363eadf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMTo1Mjo0M1rOGznyag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMTo1Mjo0M1rOGznyag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc4MjQ0Mg==", "bodyText": "why XTS instance has to be passed on as result / local variable? existing field will do just fine", "url": "https://github.com/h2database/h2database/pull/2765#discussion_r456782442", "createdAt": "2020-07-18T11:52:43Z", "author": {"login": "andreitokar"}, "path": "h2/src/main/org/h2/store/fs/encrypt/FileEncrypt.java", "diffHunk": "@@ -73,9 +73,19 @@ public FileEncrypt(String name, byte[] encryptionKey, FileChannel base) {\n         this.encryptionKey = encryptionKey;\n     }\n \n-    private void init() throws IOException {\n+    private XTS init() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2e27868ae2e47dd7e14a8a5ee944dd11363eadf"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDUyMjgy", "url": "https://github.com/h2database/h2database/pull/2765#pullrequestreview-451052282", "createdAt": "2020-07-18T11:57:37Z", "commit": {"oid": "c2e27868ae2e47dd7e14a8a5ee944dd11363eadf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMDUyNjU4", "url": "https://github.com/h2database/h2database/pull/2765#pullrequestreview-451052658", "createdAt": "2020-07-18T12:06:25Z", "commit": {"oid": "c2e27868ae2e47dd7e14a8a5ee944dd11363eadf"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMjowNjoyNVrOGzn2ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xOFQxMjowNjoyNVrOGzn2ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc4MzUxOA==", "bodyText": "Actually IMHO, @little-pan change (final field) is more appropriate. How often this object is created? How likely, that it won't be used afterwards, so lazy initialization pays off?", "url": "https://github.com/h2database/h2database/pull/2765#discussion_r456783518", "createdAt": "2020-07-18T12:06:25Z", "author": {"login": "andreitokar"}, "path": "h2/src/main/org/h2/store/fs/encrypt/FileEncrypt.java", "diffHunk": "@@ -73,9 +73,19 @@ public FileEncrypt(String name, byte[] encryptionKey, FileChannel base) {\n         this.encryptionKey = encryptionKey;\n     }\n \n-    private void init() throws IOException {\n+    private XTS init() throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc4MjQ0Mg=="}, "originalCommit": {"oid": "c2e27868ae2e47dd7e14a8a5ee944dd11363eadf"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4277, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}