{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NDQ4MDI4", "number": 2714, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOToxODo1OFrOEHUDHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOToyMTo1M1rOEHUDqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTAzOTY2OnYy", "diffSide": "RIGHT", "path": "h2/src/main/org/h2/pagestore/PageInputStream.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOToxODo1OFrOGmn9Bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOToyMjozMFrOGmn92Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1MzY3MQ==", "bodyText": "no, that's not right, because we assign to trunk inside the if block", "url": "https://github.com/h2database/h2database/pull/2714#discussion_r443153671", "createdAt": "2020-06-20T19:18:58Z", "author": {"login": "grandinj"}, "path": "h2/src/main/org/h2/pagestore/PageInputStream.java", "diffHunk": "@@ -101,8 +101,7 @@ private void fillBuffer() {\n                     endOfFile = true;\n                     return;\n                 }\n-            }\n-            if (trunk != null) {\n+            } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa0607e248b850362eb7d99f730c230c64664477"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1Mzg4MQ==", "bodyText": "Oops. I agree. Will revert this.", "url": "https://github.com/h2database/h2database/pull/2714#discussion_r443153881", "createdAt": "2020-06-20T19:22:30Z", "author": {"login": "turbanoff"}, "path": "h2/src/main/org/h2/pagestore/PageInputStream.java", "diffHunk": "@@ -101,8 +101,7 @@ private void fillBuffer() {\n                     endOfFile = true;\n                     return;\n                 }\n-            }\n-            if (trunk != null) {\n+            } else {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1MzY3MQ=="}, "originalCommit": {"oid": "aa0607e248b850362eb7d99f730c230c64664477"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTAzOTg3OnYy", "diffSide": "RIGHT", "path": "h2/src/main/org/h2/security/auth/ConfigProperties.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOToxOTo0MVrOGmn9Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOToyODo1M1rOGmn_LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1MzY5OQ==", "bodyText": "wrong", "url": "https://github.com/h2database/h2database/pull/2714#discussion_r443153699", "createdAt": "2020-06-20T19:19:41Z", "author": {"login": "grandinj"}, "path": "h2/src/main/org/h2/security/auth/ConfigProperties.java", "diffHunk": "@@ -28,7 +28,7 @@ public ConfigProperties(PropertyConfig... configProperties) {\n \n     public ConfigProperties(Collection<PropertyConfig> configProperties) {\n         properties = new HashMap<>();\n-        if (properties != null) {\n+        if (configProperties != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa0607e248b850362eb7d99f730c230c64664477"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1Mzk2Ng==", "bodyText": "Can you please elaborate? As I can see properties definitely can't be null here (it was just initialized as new HashMap<>()).\nSo it doesn't make sense to check it.\nAlso I found that in this constructor - it's possible to pass null as configProperties\n    public ConfigProperties(PropertyConfig... configProperties) {\n        this(configProperties == null ? null : Arrays.asList(configProperties));\n    }\n\nI believe my proposed fix is correct", "url": "https://github.com/h2database/h2database/pull/2714#discussion_r443153966", "createdAt": "2020-06-20T19:24:29Z", "author": {"login": "turbanoff"}, "path": "h2/src/main/org/h2/security/auth/ConfigProperties.java", "diffHunk": "@@ -28,7 +28,7 @@ public ConfigProperties(PropertyConfig... configProperties) {\n \n     public ConfigProperties(Collection<PropertyConfig> configProperties) {\n         properties = new HashMap<>();\n-        if (properties != null) {\n+        if (configProperties != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1MzY5OQ=="}, "originalCommit": {"oid": "aa0607e248b850362eb7d99f730c230c64664477"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1NDIyMA==", "bodyText": "Sorry, you are correct", "url": "https://github.com/h2database/h2database/pull/2714#discussion_r443154220", "createdAt": "2020-06-20T19:28:53Z", "author": {"login": "grandinj"}, "path": "h2/src/main/org/h2/security/auth/ConfigProperties.java", "diffHunk": "@@ -28,7 +28,7 @@ public ConfigProperties(PropertyConfig... configProperties) {\n \n     public ConfigProperties(Collection<PropertyConfig> configProperties) {\n         properties = new HashMap<>();\n-        if (properties != null) {\n+        if (configProperties != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1MzY5OQ=="}, "originalCommit": {"oid": "aa0607e248b850362eb7d99f730c230c64664477"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2MTA0MTA3OnYy", "diffSide": "RIGHT", "path": "h2/src/main/org/h2/tools/Recover.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOToyMTo1M1rOGmn9rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMFQxOToyOToxNFrOGmn_OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1MzgzNw==", "bodyText": "Also wrong.\nAt this point I stopped checking - please don't just routinely accept warnings from such tools. You need to carefully analyse the surrounding code and then determine if the warning is valid - such tools often produce false positives.", "url": "https://github.com/h2database/h2database/pull/2714#discussion_r443153837", "createdAt": "2020-06-20T19:21:53Z", "author": {"login": "grandinj"}, "path": "h2/src/main/org/h2/tools/Recover.java", "diffHunk": "@@ -1031,8 +1031,6 @@ private void dumpPageLogStream(PrintWriter writer, int logKey,\n                 int sessionId = in.readVarInt();\n                 String transaction = in.readString();\n                 writer.println(\"-- prepare commit \" + sessionId + \" \" + transaction);\n-            } else if (x == PageLog.NOOP) {\n-                // nothing to do\n             } else if (x == PageLog.CHECKPOINT) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa0607e248b850362eb7d99f730c230c64664477"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1NDA5Ng==", "bodyText": "Also wrong.\n\nCan you please explain why?\nAs I can see x is already compared with PageLog.NOOP in if-else-if chain. See - https://github.com/h2database/h2database/blob/master/h2/src/main/org/h2/tools/Recover.java#L899\nSo it doesn't make sense to check it again.", "url": "https://github.com/h2database/h2database/pull/2714#discussion_r443154096", "createdAt": "2020-06-20T19:26:32Z", "author": {"login": "turbanoff"}, "path": "h2/src/main/org/h2/tools/Recover.java", "diffHunk": "@@ -1031,8 +1031,6 @@ private void dumpPageLogStream(PrintWriter writer, int logKey,\n                 int sessionId = in.readVarInt();\n                 String transaction = in.readString();\n                 writer.println(\"-- prepare commit \" + sessionId + \" \" + transaction);\n-            } else if (x == PageLog.NOOP) {\n-                // nothing to do\n             } else if (x == PageLog.CHECKPOINT) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1MzgzNw=="}, "originalCommit": {"oid": "aa0607e248b850362eb7d99f730c230c64664477"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1NDIzMw==", "bodyText": "Yeah, you are right", "url": "https://github.com/h2database/h2database/pull/2714#discussion_r443154233", "createdAt": "2020-06-20T19:29:14Z", "author": {"login": "grandinj"}, "path": "h2/src/main/org/h2/tools/Recover.java", "diffHunk": "@@ -1031,8 +1031,6 @@ private void dumpPageLogStream(PrintWriter writer, int logKey,\n                 int sessionId = in.readVarInt();\n                 String transaction = in.readString();\n                 writer.println(\"-- prepare commit \" + sessionId + \" \" + transaction);\n-            } else if (x == PageLog.NOOP) {\n-                // nothing to do\n             } else if (x == PageLog.CHECKPOINT) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzE1MzgzNw=="}, "originalCommit": {"oid": "aa0607e248b850362eb7d99f730c230c64664477"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2105, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}