{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MTg3MzY2", "number": 2415, "title": "Use safe custom UUID deserialization", "bodyText": "Conversion from JAVA_OBJECT to UUID is reimplemented in a secure way.\nInsecure conversions from JAVA_OBJECT to ENUM and to GEOMETRY that were introduced not so long time ago are removed. They don't look like something useful. JTS geometries are converted to ValueGeometry by default, so this conversion is not used by H2GIS. Conversions to ENUM supported only the Integer and String values; they are also converted to ValueInt and ValueVarchar by default. There is a way to create a ValueJavaObject explicitly, but I don't think that somebody really use this way just to cause a data type conversion later.", "createdAt": "2020-01-26T06:40:57Z", "url": "https://github.com/h2database/h2database/pull/2415", "merged": true, "mergeCommit": {"oid": "bbf6dabde7ea8e072c1da20ab50fadc3b98dc908"}, "closed": true, "closedAt": "2020-01-26T13:19:39Z", "author": {"login": "katzyn"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-CKaYgH2gAyMzY3MTg3MzY2OmE1MzNjMGYwZDQyMDk0NTlhOWRlZjE0MjdmNTExNWFiZmVkN2U3NDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-HAuvABqjI5Nzk4Njk2NTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a533c0f0d4209459a9def1427f5115abfed7e745", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/a533c0f0d4209459a9def1427f5115abfed7e745", "committedDate": "2020-01-26T06:29:25Z", "message": "Remove short-lived conversions from JAVA_OBJECT to ENUM and GEOMETRY"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2d996baa6fc1a0eefb1525695f5f82c14baf331", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/e2d996baa6fc1a0eefb1525695f5f82c14baf331", "committedDate": "2020-01-26T06:30:01Z", "message": "Use safe custom UUID deserialization"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzcwNjI5", "url": "https://github.com/h2database/h2database/pull/2415#pullrequestreview-348370629", "createdAt": "2020-01-26T10:31:11Z", "commit": {"oid": "a533c0f0d4209459a9def1427f5115abfed7e745"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxMDozMToxMVrOFhzVVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxMDozMToxMVrOFhzVVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk4ODM3Mg==", "bodyText": "if\nsetObject(foo, enum or geometry, Types.OTHER)\nno longer works, that is an API change, and will quite likely break some client code", "url": "https://github.com/h2database/h2database/pull/2415#discussion_r370988372", "createdAt": "2020-01-26T10:31:11Z", "author": {"login": "grandinj"}, "path": "h2/src/test/org/h2/test/jdbc/TestResultSet.java", "diffHunk": "@@ -1949,13 +1949,7 @@ private void testEnum() throws SQLException {\n         prep.setObject(2, \"D\", Types.VARCHAR);\n         prep.executeUpdate();\n         prep.setInt(1, 5);\n-        prep.setObject(2, \"E\", Types.OTHER);\n-        prep.executeUpdate();\n-        prep.setInt(1, 6);\n-        prep.setObject(2, 5, Types.OTHER);\n-        prep.executeUpdate();\n-        prep.setInt(1, 7);\n-        prep.setObject(2, 6, Types.INTEGER);\n+        prep.setObject(2, 4, Types.INTEGER);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a533c0f0d4209459a9def1427f5115abfed7e745"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzcwNjk0", "url": "https://github.com/h2database/h2database/pull/2415#pullrequestreview-348370694", "createdAt": "2020-01-26T10:32:54Z", "commit": {"oid": "e2d996baa6fc1a0eefb1525695f5f82c14baf331"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxMDozMjo1NFrOFhzVog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxMDozMjo1NFrOFhzVog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk4ODQ1MA==", "bodyText": "best to document the reason for this, something like\n\"to avoid a security hole with a malicously crafted serialised object\"", "url": "https://github.com/h2database/h2database/pull/2415#discussion_r370988450", "createdAt": "2020-01-26T10:32:54Z", "author": {"login": "grandinj"}, "path": "h2/src/main/org/h2/util/JdbcUtils.java", "diffHunk": "@@ -415,6 +421,25 @@ public static Object deserialize(byte[] data, JavaObjectSerializer javaObjectSer\n         }\n     }\n \n+    /**\n+     * De-serialize the byte array to a UUID object.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2d996baa6fc1a0eefb1525695f5f82c14baf331"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bcbf49f6e8ffcce125c01bee8f8f7b0c4906170", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/2bcbf49f6e8ffcce125c01bee8f8f7b0c4906170", "committedDate": "2020-01-26T11:04:17Z", "message": "Add some javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cff5529e897cf414ca9d58d698798e34e870930", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/6cff5529e897cf414ca9d58d698798e34e870930", "committedDate": "2020-01-26T12:08:13Z", "message": "Restore test and correct OTHER / JAVA_OBJECT mappings"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "049e57355f373fa0463bd2216727491a431f5bc9", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/049e57355f373fa0463bd2216727491a431f5bc9", "committedDate": "2020-01-26T11:42:25Z", "message": "Restore test and correct OTHER / JAVA_OBJECT mappings"}, "afterCommit": {"oid": "6cff5529e897cf414ca9d58d698798e34e870930", "author": {"user": {"login": "katzyn", "name": "Evgenij Ryazanov"}}, "url": "https://github.com/h2database/h2database/commit/6cff5529e897cf414ca9d58d698798e34e870930", "committedDate": "2020-01-26T12:08:13Z", "message": "Restore test and correct OTHER / JAVA_OBJECT mappings"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3911, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}