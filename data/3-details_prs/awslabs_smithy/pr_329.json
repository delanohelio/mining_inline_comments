{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NTE4Mjky", "number": 329, "title": "Adds security to individual operations", "bodyText": "We previously weren't adding security to individual operations if the\noperation differend from the security of the operation differed from the\nservice because of an applied authorizer trait.\nIssue #, if available:\nDescription of changes:\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-03-27T02:36:14Z", "url": "https://github.com/awslabs/smithy/pull/329", "merged": true, "mergeCommit": {"oid": "56dd4c07bacf3c1af90feb919b93870f1a7f7e4a"}, "closed": true, "closedAt": "2020-03-27T17:21:21Z", "author": {"login": "mtdowling"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRzblcgFqTM4MzAyMjM1Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRz7I-gFqTM4MzA1MDc3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMDIyMzUy", "url": "https://github.com/awslabs/smithy/pull/329#pullrequestreview-383022352", "createdAt": "2020-03-27T16:37:18Z", "commit": {"oid": "f434db76a841c062bea1d96985d159c8f7b0f2ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNjozNzoxOFrOF85IyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNjozNzoxOFrOF85IyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTM5NTAxNg==", "bodyText": "s/only auth security/only add security", "url": "https://github.com/awslabs/smithy/pull/329#discussion_r399395016", "createdAt": "2020-03-27T16:37:18Z", "author": {"login": "kstich"}, "path": "smithy-aws-apigateway-openapi/src/main/java/software/amazon/smithy/aws/apigateway/openapi/AddAuthorizers.java", "diffHunk": "@@ -79,6 +83,25 @@\n                 .orElse(requirement);\n     }\n \n+    @Override\n+    public OperationObject updateOperation(Context context, OperationShape shape, OperationObject operation) {\n+        ServiceShape service = context.getService();\n+        AuthorizerIndex authorizerIndex = context.getModel().getKnowledge(AuthorizerIndex.class);\n+\n+        // Get the resolved security schemes of the service and operation, and\n+        // only auth security if it's different than the service.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f434db76a841c062bea1d96985d159c8f7b0f2ed"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "767167bbf9806d32607f15abc74ecd0c2e3c3212", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/767167bbf9806d32607f15abc74ecd0c2e3c3212", "committedDate": "2020-03-27T16:48:02Z", "message": "Adds security to individual operations\n\nWe previously weren't adding security to individual operations if the\noperation differend from the security of the operation differed from the\nservice because of an applied authorizer trait."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f434db76a841c062bea1d96985d159c8f7b0f2ed", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/f434db76a841c062bea1d96985d159c8f7b0f2ed", "committedDate": "2020-03-27T02:34:44Z", "message": "Adds security to individual operations\n\nWe previously weren't adding security to individual operations if the\noperation differend from the security of the operation differed from the\nservice because of an applied authorizer trait."}, "afterCommit": {"oid": "767167bbf9806d32607f15abc74ecd0c2e3c3212", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/767167bbf9806d32607f15abc74ecd0c2e3c3212", "committedDate": "2020-03-27T16:48:02Z", "message": "Adds security to individual operations\n\nWe previously weren't adding security to individual operations if the\noperation differend from the security of the operation differed from the\nservice because of an applied authorizer trait."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMDUwNzcz", "url": "https://github.com/awslabs/smithy/pull/329#pullrequestreview-383050773", "createdAt": "2020-03-27T17:12:33Z", "commit": {"oid": "767167bbf9806d32607f15abc74ecd0c2e3c3212"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2345, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}