{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNDg0NzEy", "number": 674, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMzowMzowNFrOFGcCqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMzoxMDo0M1rOFGcL6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMjk1MjA4OnYy", "diffSide": "RIGHT", "path": "smithy-openapi/src/main/java/software/amazon/smithy/openapi/fromsmithy/protocols/AbstractRestProtocol.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMzowMzowNFrOIHdB1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoyMToxNVrOIHe9tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY4NjU1MQ==", "bodyText": "This would probably work better as a real if statement now that the ternary is so complex.", "url": "https://github.com/awslabs/smithy/pull/674#discussion_r544686551", "createdAt": "2020-12-16T23:03:04Z", "author": {"login": "kstich"}, "path": "smithy-openapi/src/main/java/software/amazon/smithy/openapi/fromsmithy/protocols/AbstractRestProtocol.java", "diffHunk": "@@ -138,7 +138,11 @@ abstract Schema createDocumentSchema(\n \n             // Greedy labels in OpenAPI need to include the label in the generated parameter.\n             // For example, given \"/{foo+}\", the parameter name must be \"foo+\".\n-            String name = label.isGreedyLabel() ? label.getContent() + \"+\" : label.getContent();\n+            // Some vendors/tooling, require the \"+\" suffix be excluded in the generated parameter.\n+            // If required, the setRemoveGreedyParameterSuffix config option should be set to `true`.\n+            // When this option is enabled, given \"/{foo+}\", the parameter name will be \"foo\".\n+            String name = (label.isGreedyLabel() && !context.getConfig().getRemoveGreedyParameterSuffix())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "958c9a8e12994e69b6a8f2e4022605b88787a42e"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxODI2Mw==", "bodyText": "Addressed in ee69c1c.", "url": "https://github.com/awslabs/smithy/pull/674#discussion_r544718263", "createdAt": "2020-12-17T00:21:15Z", "author": {"login": "srchase"}, "path": "smithy-openapi/src/main/java/software/amazon/smithy/openapi/fromsmithy/protocols/AbstractRestProtocol.java", "diffHunk": "@@ -138,7 +138,11 @@ abstract Schema createDocumentSchema(\n \n             // Greedy labels in OpenAPI need to include the label in the generated parameter.\n             // For example, given \"/{foo+}\", the parameter name must be \"foo+\".\n-            String name = label.isGreedyLabel() ? label.getContent() + \"+\" : label.getContent();\n+            // Some vendors/tooling, require the \"+\" suffix be excluded in the generated parameter.\n+            // If required, the setRemoveGreedyParameterSuffix config option should be set to `true`.\n+            // When this option is enabled, given \"/{foo+}\", the parameter name will be \"foo\".\n+            String name = (label.isGreedyLabel() && !context.getConfig().getRemoveGreedyParameterSuffix())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY4NjU1MQ=="}, "originalCommit": {"oid": "958c9a8e12994e69b6a8f2e4022605b88787a42e"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMjk1NDE1OnYy", "diffSide": "RIGHT", "path": "smithy-openapi/src/main/java/software/amazon/smithy/openapi/OpenApiConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMzowMzo0N1rOIHdDBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoyMTozNFrOIHe-Ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY4Njg1Mw==", "bodyText": "This should have a guide update, since it's a new option.", "url": "https://github.com/awslabs/smithy/pull/674#discussion_r544686853", "createdAt": "2020-12-16T23:03:47Z", "author": {"login": "kstich"}, "path": "smithy-openapi/src/main/java/software/amazon/smithy/openapi/OpenApiConfig.java", "diffHunk": "@@ -218,6 +219,14 @@ public void setForbidGreedyLabels(boolean forbidGreedyLabels) {\n         this.forbidGreedyLabels = forbidGreedyLabels;\n     }\n \n+    public boolean getRemoveGreedyParameterSuffix() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "958c9a8e12994e69b6a8f2e4022605b88787a42e"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxODM3MA==", "bodyText": "Addressed in ee69c1c.", "url": "https://github.com/awslabs/smithy/pull/674#discussion_r544718370", "createdAt": "2020-12-17T00:21:34Z", "author": {"login": "srchase"}, "path": "smithy-openapi/src/main/java/software/amazon/smithy/openapi/OpenApiConfig.java", "diffHunk": "@@ -218,6 +219,14 @@ public void setForbidGreedyLabels(boolean forbidGreedyLabels) {\n         this.forbidGreedyLabels = forbidGreedyLabels;\n     }\n \n+    public boolean getRemoveGreedyParameterSuffix() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY4Njg1Mw=="}, "originalCommit": {"oid": "958c9a8e12994e69b6a8f2e4022605b88787a42e"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMjk3MjM1OnYy", "diffSide": "RIGHT", "path": "smithy-aws-apigateway-openapi/src/main/java/software/amazon/smithy/aws/apigateway/openapi/AddDefaultRestConfigSettings.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMzowOTozN1rOIHdNbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoyMToyMVrOIHe93g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY4OTUxOA==", "bodyText": "This should probably link to their API docs showing that greedy labels are not suffixed for REST: https://docs.aws.amazon.com/apigateway/latest/developerguide/setup-http-integrations.html\nConsider a \"this is counter to the default, like for HTTP APIs, ...\" that links to those docs too: https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-integrations-http.html", "url": "https://github.com/awslabs/smithy/pull/674#discussion_r544689518", "createdAt": "2020-12-16T23:09:37Z", "author": {"login": "kstich"}, "path": "smithy-aws-apigateway-openapi/src/main/java/software/amazon/smithy/aws/apigateway/openapi/AddDefaultRestConfigSettings.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.smithy.aws.apigateway.openapi;\n+\n+import java.util.List;\n+import software.amazon.smithy.model.Model;\n+import software.amazon.smithy.openapi.OpenApiConfig;\n+import software.amazon.smithy.utils.ListUtils;\n+\n+/**\n+ * REST APIs require that name parameters for greedy labels are not suffixed with \"+\".", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "958c9a8e12994e69b6a8f2e4022605b88787a42e"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxODMwMg==", "bodyText": "Addressed in ee69c1c.", "url": "https://github.com/awslabs/smithy/pull/674#discussion_r544718302", "createdAt": "2020-12-17T00:21:21Z", "author": {"login": "srchase"}, "path": "smithy-aws-apigateway-openapi/src/main/java/software/amazon/smithy/aws/apigateway/openapi/AddDefaultRestConfigSettings.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.smithy.aws.apigateway.openapi;\n+\n+import java.util.List;\n+import software.amazon.smithy.model.Model;\n+import software.amazon.smithy.openapi.OpenApiConfig;\n+import software.amazon.smithy.utils.ListUtils;\n+\n+/**\n+ * REST APIs require that name parameters for greedy labels are not suffixed with \"+\".", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY4OTUxOA=="}, "originalCommit": {"oid": "958c9a8e12994e69b6a8f2e4022605b88787a42e"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMjk3NTc5OnYy", "diffSide": "RIGHT", "path": "smithy-openapi/src/main/java/software/amazon/smithy/openapi/OpenApiConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQyMzoxMDo0M1rOIHdPVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoyMToyN1rOIHe-BA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY5MDAwNA==", "bodyText": "This should have javadoc.", "url": "https://github.com/awslabs/smithy/pull/674#discussion_r544690004", "createdAt": "2020-12-16T23:10:43Z", "author": {"login": "kstich"}, "path": "smithy-openapi/src/main/java/software/amazon/smithy/openapi/OpenApiConfig.java", "diffHunk": "@@ -218,6 +219,14 @@ public void setForbidGreedyLabels(boolean forbidGreedyLabels) {\n         this.forbidGreedyLabels = forbidGreedyLabels;\n     }\n \n+    public boolean getRemoveGreedyParameterSuffix() {\n+        return removeGreedyParameterSuffix;\n+    }\n+\n+    public void setRemoveGreedyParameterSuffix(boolean removeGreedyParameterSuffix) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "958c9a8e12994e69b6a8f2e4022605b88787a42e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxODM0MA==", "bodyText": "Addressed in ee69c1c.", "url": "https://github.com/awslabs/smithy/pull/674#discussion_r544718340", "createdAt": "2020-12-17T00:21:27Z", "author": {"login": "srchase"}, "path": "smithy-openapi/src/main/java/software/amazon/smithy/openapi/OpenApiConfig.java", "diffHunk": "@@ -218,6 +219,14 @@ public void setForbidGreedyLabels(boolean forbidGreedyLabels) {\n         this.forbidGreedyLabels = forbidGreedyLabels;\n     }\n \n+    public boolean getRemoveGreedyParameterSuffix() {\n+        return removeGreedyParameterSuffix;\n+    }\n+\n+    public void setRemoveGreedyParameterSuffix(boolean removeGreedyParameterSuffix) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY5MDAwNA=="}, "originalCommit": {"oid": "958c9a8e12994e69b6a8f2e4022605b88787a42e"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3601, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}