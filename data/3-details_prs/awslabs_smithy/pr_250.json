{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxMTk3MDIy", "number": 250, "title": "Add AWS query protocol tests", "bodyText": "Issue #, if available:\nDescription of changes:\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-01-09T22:49:18Z", "url": "https://github.com/awslabs/smithy/pull/250", "merged": true, "mergeCommit": {"oid": "4d3504a156dcf72119707794bd03afc3b7b29b0d"}, "closed": true, "closedAt": "2020-01-13T19:39:57Z", "author": {"login": "mtdowling"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6A7QyAFqTM0MjA1ODUxNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6BrMKgFqTM0MjA5MDUwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMDU4NTE3", "url": "https://github.com/awslabs/smithy/pull/250#pullrequestreview-342058517", "createdAt": "2020-01-13T18:46:54Z", "commit": {"oid": "0d4fe5d9bd321313d5a33de4872f01de404227de"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxODo0Njo1NFrOFdAy_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxODo0Njo1NFrOFdAy_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk2NjA3Nw==", "bodyText": "Closing tags for </myMap> should be </KVP> for both traits (below) applied to this operation.", "url": "https://github.com/awslabs/smithy/pull/250#discussion_r365966077", "createdAt": "2020-01-13T18:46:54Z", "author": {"login": "kstich"}, "path": "smithy-aws-protocol-tests/model/query/xml-maps.smithy", "diffHunk": "@@ -0,0 +1,211 @@\n+// This file defines test cases that serialize maps in XML payloads.\n+\n+$version: \"0.5.0\"\n+\n+namespace aws.protocols.tests.query\n+\n+use aws.protocols.tests.shared#FooEnumMap\n+use aws.protocols.tests.shared#GreetingStruct\n+use smithy.test#httpResponseTests\n+\n+/// The example tests basic map serialization.\n+operation XmlMaps() -> XmlMapsOutput\n+\n+apply XmlMaps @httpResponseTests([\n+    {\n+        id: \"QueryXmlMaps\",\n+        description: \"Serializes XML maps\",\n+        protocol: \"aws.query\",\n+        code: 200,\n+        body: \"\"\"\n+              <XmlMapsResponse xmlns=\"https://example.com/\">\n+                  <XmlMapsResult>\n+                      <myMap>\n+                          <entry>\n+                              <key>foo</key>\n+                              <value>\n+                                  <hi>there</hi>\n+                              </value>\n+                          </entry>\n+                          <entry>\n+                              <key>baz</key>\n+                              <value>\n+                                  <hi>bye</hi>\n+                              </value>\n+                          </entry>\n+                      </myMap>\n+                  </XmlMapsResult>\n+              </XmlMapsResponse>\n+              \"\"\",\n+        bodyMediaType: \"application/xml\",\n+        headers: {\n+            \"Content-Type\": \"text/xml\"\n+        },\n+        params: {\n+            myMap: {\n+                foo: {\n+                    hi: \"there\"\n+                },\n+                baz: {\n+                    hi: \"bye\"\n+                }\n+            }\n+        }\n+    }\n+])\n+\n+structure XmlMapsOutput {\n+    myMap: XmlMapsOutputMap,\n+}\n+\n+map XmlMapsOutputMap {\n+    key: String,\n+    value: GreetingStruct\n+}\n+\n+// This example tests maps with @xmlName on members.\n+operation XmlMapsXmlName() -> XmlMapsXmlNameOutput\n+\n+apply XmlMapsXmlName @httpResponseTests([\n+    {\n+        id: \"QueryQueryXmlMapsXmlName\",\n+        description: \"Serializes XML lists\",\n+        protocol: \"aws.query\",\n+        code: 200,\n+        body: \"\"\"\n+              <XmlMapsXmlNameResponse xmlns=\"https://example.com/\">\n+                  <XmlMapsXmlNameResult>\n+                      <myMap>\n+                          <entry>\n+                              <Name>foo</Name>\n+                              <Setting>\n+                                  <hi>there</hi>\n+                              </Setting>\n+                          </entry>\n+                          <entry>\n+                              <Name>baz</Name>\n+                              <Setting>\n+                                  <hi>bye</hi>\n+                              </Setting>\n+                          </entry>\n+                      </myMap>\n+                  </XmlMapsXmlNameResult>\n+              </XmlMapsXmlNameResponse>\n+              \"\"\",\n+        bodyMediaType: \"application/xml\",\n+        headers: {\n+            \"Content-Type\": \"text/xml\"\n+        },\n+        params: {\n+            myMap: {\n+                foo: {\n+                    hi: \"there\"\n+                },\n+                baz: {\n+                    hi: \"bye\"\n+                }\n+            }\n+        }\n+    }\n+])\n+\n+structure XmlMapsXmlNameOutput {\n+    myMap: XmlMapsXmlNameOutputMap,\n+}\n+\n+map XmlMapsXmlNameOutputMap {\n+    @xmlName(\"Attribute\")\n+    key: String,\n+\n+    @xmlName(\"Setting\")\n+    value: GreetingStruct\n+}\n+\n+/// Flattened maps\n+operation FlattenedXmlMap() -> FlattenedXmlMapOutput\n+\n+apply FlattenedXmlMap @httpResponseTests([\n+    {\n+        id: \"QueryQueryFlattenedXmlMap\",\n+        description: \"Serializes flattened XML maps in responses\",\n+        protocol: \"aws.query\",\n+        code: 200,\n+        body: \"\"\"\n+              <FlattenedXmlMapResponse xmlns=\"https://example.com/\">\n+                  <FlattenedXmlMapResult>\n+                      <myMap>\n+                          <key>foo</key>\n+                          <value>Foo</value>\n+                      </myMap>\n+                      <myMap>\n+                          <key>baz</key>\n+                          <value>Baz</value>\n+                      </myMap>\n+                  </FlattenedXmlMapResult>\n+              </FlattenedXmlMapResponse>\"\"\",\n+        bodyMediaType: \"application/xml\",\n+        headers: {\n+            \"Content-Type\": \"text/xml\"\n+        },\n+        params: {\n+            myMap: {\n+                foo: \"Foo\",\n+                baz: \"Baz\"\n+            }\n+        }\n+    }\n+])\n+\n+structure FlattenedXmlMapOutput {\n+    @xmlFlattened\n+    myMap: FooEnumMap,\n+}\n+\n+/// Flattened maps with @xmlName\n+operation FlattenedXmlMapWithXmlName() -> FlattenedXmlMapWithXmlNameOutput", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d4fe5d9bd321313d5a33de4872f01de404227de"}, "originalPosition": 165}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d4fe5d9bd321313d5a33de4872f01de404227de", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/0d4fe5d9bd321313d5a33de4872f01de404227de", "committedDate": "2020-01-09T22:48:16Z", "message": "Add AWS query protocol tests"}, "afterCommit": {"oid": "2ed228970c992bce2c39c05f82b74cbcf22247d6", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/2ed228970c992bce2c39c05f82b74cbcf22247d6", "committedDate": "2020-01-13T19:33:46Z", "message": "Add AWS query protocol tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ed228970c992bce2c39c05f82b74cbcf22247d6", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/2ed228970c992bce2c39c05f82b74cbcf22247d6", "committedDate": "2020-01-13T19:33:46Z", "message": "Add AWS query protocol tests"}, "afterCommit": {"oid": "31bc9a5ee9af49e7eedf3c5368c1cd73c9808b94", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/31bc9a5ee9af49e7eedf3c5368c1cd73c9808b94", "committedDate": "2020-01-13T19:36:02Z", "message": "Add AWS query protocol tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c482c24fcf5cad4b2f8eb7e226a3f88b32a6dde8", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/c482c24fcf5cad4b2f8eb7e226a3f88b32a6dde8", "committedDate": "2020-01-13T19:38:47Z", "message": "Add AWS query protocol tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31bc9a5ee9af49e7eedf3c5368c1cd73c9808b94", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/31bc9a5ee9af49e7eedf3c5368c1cd73c9808b94", "committedDate": "2020-01-13T19:36:02Z", "message": "Add AWS query protocol tests"}, "afterCommit": {"oid": "c482c24fcf5cad4b2f8eb7e226a3f88b32a6dde8", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/c482c24fcf5cad4b2f8eb7e226a3f88b32a6dde8", "committedDate": "2020-01-13T19:38:47Z", "message": "Add AWS query protocol tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMDkwNTA4", "url": "https://github.com/awslabs/smithy/pull/250#pullrequestreview-342090508", "createdAt": "2020-01-13T19:39:37Z", "commit": {"oid": "c482c24fcf5cad4b2f8eb7e226a3f88b32a6dde8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2301, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}