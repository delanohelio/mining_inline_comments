{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0NTYyODA1", "number": 263, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwMDoyNDozM1rODaBVOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwMDozMDoxN1rODaBYtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4NjExMzg1OnYy", "diffSide": "RIGHT", "path": "smithy-cli/src/main/java/software/amazon/smithy/cli/Cli.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwMDoyNDozM1rOFgvhiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwMDoyNDozM1rOFgvhiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg3NzM4NA==", "bodyText": "Nitpick, but this should be named something like ansiColorsSupported", "url": "https://github.com/awslabs/smithy/pull/263#discussion_r369877384", "createdAt": "2020-01-23T00:24:33Z", "author": {"login": "JordonPhillips"}, "path": "smithy-cli/src/main/java/software/amazon/smithy/cli/Cli.java", "diffHunk": "@@ -148,37 +149,96 @@ public void run(String[] args) {\n         }\n     }\n \n-    private void configureLogging(String[] args) {\n-        if (configureLogging && !hasArgument(args, QUIET_LOGS)) {\n-            Handler handler = getConsoleHandler();\n-            if (hasArgument(args, DEBUG)) {\n-                handler.setFormatter(new DebugFormatter());\n-                handler.setLevel(Level.ALL);\n-                // Configure logging level of all loggers.\n-                Logger rootLogger = LogManager.getLogManager().getLogger(\"\");\n-                rootLogger.setLevel(Level.ALL);\n-                for (Handler h : rootLogger.getHandlers()) {\n-                    h.setLevel(Level.ALL);\n-                }\n-            } else {\n-                handler.setFormatter(new BasicFormatter());\n-                handler.setLevel(Level.WARNING);\n-            }\n-        }\n+    /**\n+     * Configures a custom STDOUT printer.\n+     *\n+     * @param printer Consumer responsible for writing to STDOUT.\n+     */\n+    public static void setStdout(Consumer<String> printer) {\n+        out = printer;\n+    }\n+\n+    /**\n+     * Configures a custom STDERR printer.\n+     *\n+     * @param printer Consumer responsible for writing to STDERR.\n+     */\n+    public static void setStderr(Consumer<String> printer) {\n+        err = printer;\n+    }\n+\n+    /**\n+     * Write a line of text to the configured STDOUT.\n+     *\n+     * @param message Message to write.\n+     */\n+    public static void stdout(Object message) {\n+        out.accept(String.valueOf(message));\n+    }\n+\n+    /**\n+     * Write a line of text to the configured STDERR.\n+     *\n+     * @param message Message to write.\n+     */\n+    public static void stderr(Object message) {\n+        err.accept(String.valueOf(message));\n     }\n \n-    private static Handler getConsoleHandler() {\n+    /**\n+     * Explicitly configures whether or not to use ANSI colors.\n+     *\n+     * @param useAnsiColors Set to true or false to enable/disable.\n+     */\n+    public static void setUseAnsiColors(boolean useAnsiColors) {\n+        Cli.useAnsiColors = useAnsiColors;\n+    }\n+\n+    /**\n+     * Does a really simple check to see if ANSI colors are supported.\n+     *\n+     * @return Returns true if ANSI probably works.\n+     */\n+    private static boolean useAnsi() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dbae1ffebb259f60f0e225cf93499273ba0e7a6"}, "originalPosition": 155}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4NjEyMjc2OnYy", "diffSide": "RIGHT", "path": "smithy-cli/src/main/java/software/amazon/smithy/cli/Cli.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwMDozMDoxN1rOFgvnHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwMDozMDoxN1rOFgvnHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg3ODgxNA==", "bodyText": "This should probably be Cli.stderr(", "url": "https://github.com/awslabs/smithy/pull/263#discussion_r369878814", "createdAt": "2020-01-23T00:30:17Z", "author": {"login": "JordonPhillips"}, "path": "smithy-cli/src/main/java/software/amazon/smithy/cli/Cli.java", "diffHunk": "@@ -309,4 +368,28 @@ public synchronized String format(LogRecord r) {\n                    + r.getMessage() + System.lineSeparator();\n         }\n     }\n+\n+    /**\n+     * Logs messages to the CLI's redirect stderr.\n+     */\n+    private static final class CliLogHandler extends Handler {\n+        private final Formatter formatter;\n+\n+        CliLogHandler(Formatter formatter) {\n+            this.formatter = formatter;\n+        }\n+\n+        @Override\n+        public void publish(LogRecord record) {\n+            if (isLoggable(record)) {\n+                Cli.err.accept(formatter.format(record));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dbae1ffebb259f60f0e225cf93499273ba0e7a6"}, "originalPosition": 273}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3832, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}