{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4MzU5NDYz", "number": 553, "title": "Fix TopologicalIndex", "bodyText": "This commit fixes a bug in TopologicalIndex where some forms of\nrecursion weren't detected, which resulted in a stack overflow. This was\nbecause directly recursive shapes were found, but transitively recursive\nshapes were not (shapes that are recursive on themselves, but enter into\na cycle because they reference recursive shapes). To address this,\nTopologicalIndex was rewritten to just implement a DFS rather than try\nto reuse PathFinder.\nIssue #, if available:\nDescription of changes:\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-09-03T05:10:12Z", "url": "https://github.com/awslabs/smithy/pull/553", "merged": true, "mergeCommit": {"oid": "d8eb214b7ba2e740d608c7091bcd6abccc4319fe"}, "closed": true, "closedAt": "2020-09-03T18:20:55Z", "author": {"login": "mtdowling"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFTrj7AFqTQ4MjAyODU4Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFUynxgFqTQ4MjA5MTYzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMDI4NTgy", "url": "https://github.com/awslabs/smithy/pull/553#pullrequestreview-482028582", "createdAt": "2020-09-03T16:52:08Z", "commit": {"oid": "3615c8f5f86a82d83121334e54b64d58992d5dae"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNjo1MjowOVrOHMvZNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNjo1MjoyNlrOHMvZ-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEyMTQ2Mw==", "bodyText": "Looks like this is a public interface break.", "url": "https://github.com/awslabs/smithy/pull/553#discussion_r483121463", "createdAt": "2020-09-03T16:52:09Z", "author": {"login": "kstich"}, "path": "smithy-model/src/main/java/software/amazon/smithy/model/selector/PathFinder.java", "diffHunk": "@@ -125,16 +124,14 @@ public static PathFinder create(Model model) {\n \n     /**\n      * Finds all of the possible paths from the {@code startingShape} to the\n-     * the {@code targetShape}.\n+     * the any in the set of {@code targetShapes}.\n      *\n      * @param startingShape Starting shape to find the paths from.\n-     * @param targetShape The shape to try to find a path to.\n+     * @param targetShapes The shapes to try to find a path to.\n      * @return Returns the list of matching paths.\n      */\n-    public List<Path> search(ToShapeId startingShape, ToShapeId targetShape) {\n-        return searchFromShapeToSet(\n-                startingShape,\n-                model.getShape(targetShape.toShapeId()).map(Collections::singleton).orElse(Collections.emptySet()));\n+    public List<Path> search(ToShapeId startingShape, Collection<Shape> targetShapes) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3615c8f5f86a82d83121334e54b64d58992d5dae"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEyMTY1OQ==", "bodyText": "This sentence doesn't read correctly.", "url": "https://github.com/awslabs/smithy/pull/553#discussion_r483121659", "createdAt": "2020-09-03T16:52:26Z", "author": {"login": "kstich"}, "path": "smithy-model/src/main/java/software/amazon/smithy/model/selector/PathFinder.java", "diffHunk": "@@ -125,16 +124,14 @@ public static PathFinder create(Model model) {\n \n     /**\n      * Finds all of the possible paths from the {@code startingShape} to the\n-     * the {@code targetShape}.\n+     * the any in the set of {@code targetShapes}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3615c8f5f86a82d83121334e54b64d58992d5dae"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19c40cbdf690bdad137eb205d700041ed205ef9f", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/19c40cbdf690bdad137eb205d700041ed205ef9f", "committedDate": "2020-09-03T18:00:40Z", "message": "Fix TopologicalIndex\n\nThis commit fixes a bug in TopologicalIndex where some forms of\nrecursion weren't detected, which resulted in a stack overflow. This was\nbecause directly recursive shapes were found, but transitively recursive\nshapes were not (shapes that are recursive on themselves, but enter into\na cycle because they reference recursive shapes). To address this,\nTopologicalIndex was rewritten to just implement a DFS rather than try\nto reuse PathFinder."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3615c8f5f86a82d83121334e54b64d58992d5dae", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/3615c8f5f86a82d83121334e54b64d58992d5dae", "committedDate": "2020-09-03T05:08:23Z", "message": "Fix TopologicalIndex\n\nThis commit fixes a bug in TopologicalIndex where some forms of\nrecursion weren't detected, which resulted in a stack overflow. This was\nbecause directly recursive shapes were found, but transitively recursive\nshapes were not (shapes that are recursive on themselves, but enter into\na cycle because they reference recursive shapes). To address this,\nTopologicalIndex was rewritten to just implement a DFS rather than try\nto reuse PathFinder."}, "afterCommit": {"oid": "19c40cbdf690bdad137eb205d700041ed205ef9f", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/19c40cbdf690bdad137eb205d700041ed205ef9f", "committedDate": "2020-09-03T18:00:40Z", "message": "Fix TopologicalIndex\n\nThis commit fixes a bug in TopologicalIndex where some forms of\nrecursion weren't detected, which resulted in a stack overflow. This was\nbecause directly recursive shapes were found, but transitively recursive\nshapes were not (shapes that are recursive on themselves, but enter into\na cycle because they reference recursive shapes). To address this,\nTopologicalIndex was rewritten to just implement a DFS rather than try\nto reuse PathFinder."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMDkxMzYz", "url": "https://github.com/awslabs/smithy/pull/553#pullrequestreview-482091363", "createdAt": "2020-09-03T18:19:51Z", "commit": {"oid": "19c40cbdf690bdad137eb205d700041ed205ef9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMDkxNjM0", "url": "https://github.com/awslabs/smithy/pull/553#pullrequestreview-482091634", "createdAt": "2020-09-03T18:20:15Z", "commit": {"oid": "19c40cbdf690bdad137eb205d700041ed205ef9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2240, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}