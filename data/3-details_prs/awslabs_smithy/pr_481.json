{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzMTI2MTEy", "number": 481, "title": "Update opinionated protocol tests to not describe optional behavior", "bodyText": "Removes the protocol tests for HTTP Prefix Header deserialization, deserializing to an empty map vs null value. Null vs empty map will be SDK implementation specific distinction. If there was a way to model empty as an expectation that would encompass both null and empty but initialized map this test would be more portable.\nUpdates the empty input output serialization protocol test to expect empty payload not empty JSON object as the serialized result. It doesn't look like the REST-JSON protocol should be serializing empty JSON object when no members are serialized.\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-07-02T00:54:09Z", "url": "https://github.com/awslabs/smithy/pull/481", "merged": true, "mergeCommit": {"oid": "986b3895f54eecfc4db3a5a147de6ec0c0c45029"}, "closed": true, "closedAt": "2020-07-06T23:01:28Z", "author": {"login": "jasdel"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcx1LFlgFqTQ0MjY0NjQyOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyZY9VgFqTQ0MzQ1Njk4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjQ2NDI4", "url": "https://github.com/awslabs/smithy/pull/481#pullrequestreview-442646428", "createdAt": "2020-07-05T04:41:36Z", "commit": {"oid": "381e9567b7bfa890f382fbf51efb49b057bb1567"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQwNDo0MTozNlrOGs_qOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQwNDo0MzoyMVrOGs_qkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgzMzUyOQ==", "bodyText": "Nit: we use \"Json\" everywhere else in these tests, so \"RestJsonEmptyInputAndEmptyJsonObjectOutput\"", "url": "https://github.com/awslabs/smithy/pull/481#discussion_r449833529", "createdAt": "2020-07-05T04:41:36Z", "author": {"login": "mtdowling"}, "path": "smithy-aws-protocol-tests/model/restJson1/empty-input-output.smithy", "diffHunk": "@@ -83,20 +83,28 @@ apply EmptyInputAndEmptyOutput @httpRequestTests([\n         protocol: restJson1,\n         method: \"POST\",\n         uri: \"/EmptyInputAndEmptyOutput\",\n-        body: \"{}\",\n+        body: \"\",\n         bodyMediaType: \"application/json\"\n     },\n ])\n \n apply EmptyInputAndEmptyOutput @httpResponseTests([\n     {\n         id: \"RestJsonEmptyInputAndEmptyOutput\",\n-        documentation: \"Empty output serializes no payload\",\n+        documentation: \"Empty output deserializes no payload\",\n         protocol: restJson1,\n         code: 200,\n         body: \"\",\n         bodyMediaType: \"application/json\"\n     },\n+    {\n+        id: \"RestJsonEmptyInputAndEmptyJSONObjectOutput\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "381e9567b7bfa890f382fbf51efb49b057bb1567"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgzMzU5Nw==", "bodyText": "not an issue, just a clarification: these tests are about serializing requests and responses. They aren't meant to be oriented towards clients or servers, but rather just about how messages are serialized. So a service should be able to take these tests and make sure the service is implemented correctly. That's why I used the word serialized here instead of deseralize.", "url": "https://github.com/awslabs/smithy/pull/481#discussion_r449833597", "createdAt": "2020-07-05T04:42:53Z", "author": {"login": "mtdowling"}, "path": "smithy-aws-protocol-tests/model/restJson1/empty-input-output.smithy", "diffHunk": "@@ -83,20 +83,28 @@ apply EmptyInputAndEmptyOutput @httpRequestTests([\n         protocol: restJson1,\n         method: \"POST\",\n         uri: \"/EmptyInputAndEmptyOutput\",\n-        body: \"{}\",\n+        body: \"\",\n         bodyMediaType: \"application/json\"\n     },\n ])\n \n apply EmptyInputAndEmptyOutput @httpResponseTests([\n     {\n         id: \"RestJsonEmptyInputAndEmptyOutput\",\n-        documentation: \"Empty output serializes no payload\",\n+        documentation: \"Empty output deserializes no payload\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "381e9567b7bfa890f382fbf51efb49b057bb1567"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgzMzYxOQ==", "bodyText": "\ud83d\udc4d we found out that this test was incorrectly copied from the RPC protocols.", "url": "https://github.com/awslabs/smithy/pull/481#discussion_r449833619", "createdAt": "2020-07-05T04:43:21Z", "author": {"login": "mtdowling"}, "path": "smithy-aws-protocol-tests/model/restJson1/empty-input-output.smithy", "diffHunk": "@@ -83,20 +83,28 @@ apply EmptyInputAndEmptyOutput @httpRequestTests([\n         protocol: restJson1,\n         method: \"POST\",\n         uri: \"/EmptyInputAndEmptyOutput\",\n-        body: \"{}\",\n+        body: \"\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "381e9567b7bfa890f382fbf51efb49b057bb1567"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0153c5446349fdb6354ca6512647a7affe32c5e1", "author": {"user": {"login": "jasdel", "name": "Jason Del Ponte"}}, "url": "https://github.com/awslabs/smithy/commit/0153c5446349fdb6354ca6512647a7affe32c5e1", "committedDate": "2020-07-06T17:08:48Z", "message": "Update opinionated protocol tests to not describe optional behavior\n\nRemoves the protocol tests for HTTP Prefix Header deserialization,\ndeserializing to an empty map vs null value. Null vs empty map will be\nSDK implementation specific distinction. If there was a way to model\n`empty` as an expectation that would encompass both null and empty but\ninitialized map this test would be more portable.\n\nUpdates the empty input output serialization protocol test to expect\nempty payload not empty JSON object as the serialized result. It doesn't\nlook like the REST-JSON protocol should be serializing empty JSON\nobject when no members are serialized."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ff4c45fcd078ed71b275dea61f8296ee2bbba63", "author": {"user": {"login": "jasdel", "name": "Jason Del Ponte"}}, "url": "https://github.com/awslabs/smithy/commit/7ff4c45fcd078ed71b275dea61f8296ee2bbba63", "committedDate": "2020-07-06T17:08:48Z", "message": "add test for empty json object deserialize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8a4ffe8b04b39f8dd03597e3ba0250c593fbcc6", "author": {"user": {"login": "jasdel", "name": "Jason Del Ponte"}}, "url": "https://github.com/awslabs/smithy/commit/b8a4ffe8b04b39f8dd03597e3ba0250c593fbcc6", "committedDate": "2020-07-06T17:08:48Z", "message": "fixup unique test case name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "254f730a43253a0fcf8ff256555073189842f08c", "author": {"user": {"login": "jasdel", "name": "Jason Del Ponte"}}, "url": "https://github.com/awslabs/smithy/commit/254f730a43253a0fcf8ff256555073189842f08c", "committedDate": "2020-07-06T21:53:07Z", "message": "fixup PR feedback"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "381e9567b7bfa890f382fbf51efb49b057bb1567", "author": {"user": {"login": "jasdel", "name": "Jason Del Ponte"}}, "url": "https://github.com/awslabs/smithy/commit/381e9567b7bfa890f382fbf51efb49b057bb1567", "committedDate": "2020-07-02T23:10:29Z", "message": "fixup unique test case name"}, "afterCommit": {"oid": "254f730a43253a0fcf8ff256555073189842f08c", "author": {"user": {"login": "jasdel", "name": "Jason Del Ponte"}}, "url": "https://github.com/awslabs/smithy/commit/254f730a43253a0fcf8ff256555073189842f08c", "committedDate": "2020-07-06T21:53:07Z", "message": "fixup PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQzNDU2OTgw", "url": "https://github.com/awslabs/smithy/pull/481#pullrequestreview-443456980", "createdAt": "2020-07-06T22:57:11Z", "commit": {"oid": "254f730a43253a0fcf8ff256555073189842f08c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2199, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}