{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNTQxNjI2", "number": 413, "title": "Remove non-idiomatic ShapeVisitor builder", "bodyText": "We previously had a builder that could create a ShapeVisitor from a\nbunch of closures. This is actually not very idiomatic Java when\ncompared to just implementing an anonymous class that implements\nShapeVisitor.Default.\nIssue #, if available:\nDescription of changes:\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-05-03T03:19:36Z", "url": "https://github.com/awslabs/smithy/pull/413", "merged": true, "mergeCommit": {"oid": "41d93b65bbbce096ce2fe97ee4cc04749b5d6632"}, "closed": true, "closedAt": "2020-05-04T16:45:58Z", "author": {"login": "mtdowling"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdiLWFgH2gAyNDEyNTQxNjI2Ojk0N2FhYTQ2ZGYwN2MxYTQ0MmM4YmQ2NTUzY2U2NTAzNWQ1NzBkZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceBkTVAFqTQwNTExNTE2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "947aaa46df07c1a442c8bd6553ce65035d570df6", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/947aaa46df07c1a442c8bd6553ce65035d570df6", "committedDate": "2020-05-03T03:19:03Z", "message": "Remove non-idiomatic ShapeVisitor builder\n\nWe previously had a builder that could create a ShapeVisitor from a\nbunch of closures. This is actually not very idiomatic Java when\ncompared to just implementing an anonymous class that implements\nShapeVisitor.Default."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MTE1MTYz", "url": "https://github.com/awslabs/smithy/pull/413#pullrequestreview-405115163", "createdAt": "2020-05-04T15:48:27Z", "commit": {"oid": "947aaa46df07c1a442c8bd6553ce65035d570df6"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNTo0ODoyN1rOGQGerw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxNTo0ODoyN1rOGQGerw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTUzNjU1OQ==", "bodyText": "The expansion on this to be NumberShape means a few more shape types will be validated: byte, double, and the Big* numbers. Seems like that would be intended but calling out in case.", "url": "https://github.com/awslabs/smithy/pull/413#discussion_r419536559", "createdAt": "2020-05-04T15:48:27Z", "author": {"login": "kstich"}, "path": "smithy-linters/src/main/java/software/amazon/smithy/linters/ShouldHaveUsedTimestampValidator.java", "diffHunk": "@@ -111,15 +108,27 @@ private ShouldHaveUsedTimestampValidator(Config config) {\n \n     @Override\n     public List<ValidationEvent> validate(Model model) {\n-        ShapeVisitor<List<ValidationEvent>> visitor = Shape.<List<ValidationEvent>>visitor()\n-                .when(StringShape.class, s -> validateSimpleShape(s, patterns))\n-                .when(ShortShape.class, s -> validateSimpleShape(s, patterns))\n-                .when(IntegerShape.class, s -> validateSimpleShape(s, patterns))\n-                .when(LongShape.class, s -> validateSimpleShape(s, patterns))\n-                .when(FloatShape.class, s -> validateSimpleShape(s, patterns))\n-                .when(StructureShape.class, shape -> validateStructure(shape, model, patterns))\n-                .when(UnionShape.class, shape -> validateUnion(shape, model, patterns))\n-                .orElse(ListUtils.of());\n+        ShapeVisitor<List<ValidationEvent>> visitor = new ShapeVisitor.Default<List<ValidationEvent>>() {\n+            @Override\n+            protected List<ValidationEvent> getDefault(Shape shape) {\n+                if (shape.isStringShape() || shape instanceof NumberShape) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "947aaa46df07c1a442c8bd6553ce65035d570df6"}, "originalPosition": 48}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2280, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}