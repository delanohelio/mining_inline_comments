{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3MDA2MTIy", "number": 626, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QwODoyNToyN1rOE2VUtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzo0MTo1NlrOE3dOcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1NDA3OTI1OnYy", "diffSide": "RIGHT", "path": "smithy-model/src/test/resources/software/amazon/smithy/model/errorfiles/validators/http-uri-conflict-validator.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QwODoyNToyN1rOHvGivQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMzo1NToyNVrOHwGSEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTE1MjMxNw==", "bodyText": "?", "url": "https://github.com/awslabs/smithy/pull/626#discussion_r519152317", "createdAt": "2020-11-07T08:25:27Z", "author": {"login": "mtdowling"}, "path": "smithy-model/src/test/resources/software/amazon/smithy/model/errorfiles/validators/http-uri-conflict-validator.json", "diffHunk": "@@ -315,6 +333,120 @@\n                     }\n                 }\n             }\n+        },\n+        \"ns.foo#EndpointPrefixDeconflicts1\": {\n+            \"type\": \"operation\",\n+            \"traits\": {\n+                \"smithy.api#http\": {\n+                    \"uri\": \"/endpoint-prefix\",\n+                    \"method\": \"PUT\"\n+                },\n+                \"smithy.api#endpoint\": {\n+                    \"hostPrefix\": \"prefix.\"\n+                },\n+                \"smithy.api#idempotent\": {}\n+            }\n+        },\n+        \"ns.foo#EndpointPrefixDeconflicts2\": {\n+            \"type\": \"operation\",\n+            \"traits\": {\n+                \"smithy.api#http\": {\n+                    \"uri\": \"/endpoint-prefix\",\n+                    \"method\": \"PUT\"\n+                },\n+                \"smithy.api#idempotent\": {}\n+            }\n+        },\n+        \"ns.foo#PatternDeconflicts1\": {\n+            \"type\": \"operation\",\n+            \"traits\": {\n+                \"smithy.api#http\": {\n+                    \"uri\": \"/endpoint-prefix-pattern-deconflicts\",\n+                    \"method\": \"PUT\"\n+                },\n+                \"smithy.api#endpoint\": {\n+                    \"hostPrefix\": \"label.\"\n+                },\n+                \"smithy.api#idempotent\": {}\n+            }\n+        },\n+        \"ns.foo#PatternDeconflicts2\": {\n+            \"type\": \"operation\",\n+            \"traits\": {\n+                \"smithy.api#http\": {\n+                    \"uri\": \"/endpoint-prefix-pattern-deconflicts\",\n+                    \"method\": \"PUT\"\n+                },\n+                \"smithy.api#endpoint\": {\n+                    \"hostPrefix\": \"{HostLabel}.\"\n+                },\n+                \"smithy.api#idempotent\": {}\n+            },\n+            \"input\": {\n+                \"target\": \"ns.foo#HostLabelInputWithPattern\"\n+            }\n+        },\n+        \"ns.foo#HostLabelInputWithPattern\": {\n+            \"type\": \"structure\",\n+            \"members\": {\n+                \"HostLabel\": {\n+                    \"target\": \"smithy.api#String\",\n+                    \"traits\": {\n+                        \"smithy.api#hostLabel\": {},\n+                        \"smithy.api#pattern\": \"foo\",\n+                        \"smithy.api#required\": {}\n+                    }\n+                }\n+            }\n+        },\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e362e673da917ac0dc071850186ee7ce5a97928"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE5NjYyNg==", "bodyText": "whoops haha i put in that extra space to make it easier for me to compartmentalize my change but forgot to remove it", "url": "https://github.com/awslabs/smithy/pull/626#discussion_r520196626", "createdAt": "2020-11-09T23:55:25Z", "author": {"login": "JordonPhillips"}, "path": "smithy-model/src/test/resources/software/amazon/smithy/model/errorfiles/validators/http-uri-conflict-validator.json", "diffHunk": "@@ -315,6 +333,120 @@\n                     }\n                 }\n             }\n+        },\n+        \"ns.foo#EndpointPrefixDeconflicts1\": {\n+            \"type\": \"operation\",\n+            \"traits\": {\n+                \"smithy.api#http\": {\n+                    \"uri\": \"/endpoint-prefix\",\n+                    \"method\": \"PUT\"\n+                },\n+                \"smithy.api#endpoint\": {\n+                    \"hostPrefix\": \"prefix.\"\n+                },\n+                \"smithy.api#idempotent\": {}\n+            }\n+        },\n+        \"ns.foo#EndpointPrefixDeconflicts2\": {\n+            \"type\": \"operation\",\n+            \"traits\": {\n+                \"smithy.api#http\": {\n+                    \"uri\": \"/endpoint-prefix\",\n+                    \"method\": \"PUT\"\n+                },\n+                \"smithy.api#idempotent\": {}\n+            }\n+        },\n+        \"ns.foo#PatternDeconflicts1\": {\n+            \"type\": \"operation\",\n+            \"traits\": {\n+                \"smithy.api#http\": {\n+                    \"uri\": \"/endpoint-prefix-pattern-deconflicts\",\n+                    \"method\": \"PUT\"\n+                },\n+                \"smithy.api#endpoint\": {\n+                    \"hostPrefix\": \"label.\"\n+                },\n+                \"smithy.api#idempotent\": {}\n+            }\n+        },\n+        \"ns.foo#PatternDeconflicts2\": {\n+            \"type\": \"operation\",\n+            \"traits\": {\n+                \"smithy.api#http\": {\n+                    \"uri\": \"/endpoint-prefix-pattern-deconflicts\",\n+                    \"method\": \"PUT\"\n+                },\n+                \"smithy.api#endpoint\": {\n+                    \"hostPrefix\": \"{HostLabel}.\"\n+                },\n+                \"smithy.api#idempotent\": {}\n+            },\n+            \"input\": {\n+                \"target\": \"ns.foo#HostLabelInputWithPattern\"\n+            }\n+        },\n+        \"ns.foo#HostLabelInputWithPattern\": {\n+            \"type\": \"structure\",\n+            \"members\": {\n+                \"HostLabel\": {\n+                    \"target\": \"smithy.api#String\",\n+                    \"traits\": {\n+                        \"smithy.api#hostLabel\": {},\n+                        \"smithy.api#pattern\": \"foo\",\n+                        \"smithy.api#required\": {}\n+                    }\n+                }\n+            }\n+        },\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTE1MjMxNw=="}, "originalCommit": {"oid": "4e362e673da917ac0dc071850186ee7ce5a97928"}, "originalPosition": 95}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTgwOTE2OnYy", "diffSide": "RIGHT", "path": "smithy-model/src/main/java/software/amazon/smithy/model/pattern/SmithyPattern.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzoyMToxNlrOHwzdtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzo0Mzo0OVrOHwz-Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzNjg4Ng==", "bodyText": "Can we just return a map and state that the map maintains order?", "url": "https://github.com/awslabs/smithy/pull/626#discussion_r520936886", "createdAt": "2020-11-10T23:21:16Z", "author": {"login": "mtdowling"}, "path": "smithy-model/src/main/java/software/amazon/smithy/model/pattern/SmithyPattern.java", "diffHunk": "@@ -111,6 +113,43 @@ public boolean equals(Object other) {\n         return other instanceof SmithyPattern && pattern.equals(((SmithyPattern) other).pattern);\n     }\n \n+    /**\n+     * Gets a list of explicitly conflicting label segments between this\n+     * pattern and another.\n+     *\n+     * @param otherPattern SmithyPattern to check against.\n+     * @return A list of Segment Pairs where each pair represents a conflict\n+     *     and where the left side of the Pair is a segment from this pattern.\n+     */\n+    public List<Pair<Segment, Segment>> getConflictingLabelSegments(SmithyPattern otherPattern) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14ab195f7dba1f31ba38ae890d4d377ffa4842f8"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk0NTIzMQ==", "bodyText": "Yes, but this was an exiting method from UriPattern so it's gonna get ugly. Pushed the change in a separate commit, enjoy", "url": "https://github.com/awslabs/smithy/pull/626#discussion_r520945231", "createdAt": "2020-11-10T23:43:49Z", "author": {"login": "JordonPhillips"}, "path": "smithy-model/src/main/java/software/amazon/smithy/model/pattern/SmithyPattern.java", "diffHunk": "@@ -111,6 +113,43 @@ public boolean equals(Object other) {\n         return other instanceof SmithyPattern && pattern.equals(((SmithyPattern) other).pattern);\n     }\n \n+    /**\n+     * Gets a list of explicitly conflicting label segments between this\n+     * pattern and another.\n+     *\n+     * @param otherPattern SmithyPattern to check against.\n+     * @return A list of Segment Pairs where each pair represents a conflict\n+     *     and where the left side of the Pair is a segment from this pattern.\n+     */\n+    public List<Pair<Segment, Segment>> getConflictingLabelSegments(SmithyPattern otherPattern) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzNjg4Ng=="}, "originalCommit": {"oid": "14ab195f7dba1f31ba38ae890d4d377ffa4842f8"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTg1OTcwOnYy", "diffSide": "RIGHT", "path": "smithy-model/src/main/java/software/amazon/smithy/model/validation/validators/HttpUriConflictValidator.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzo0MTo1NlrOHwz7iQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzo0MTo1NlrOHwz7iQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk0NDUyMQ==", "bodyText": "Personal nit: I'd replace this with good old-fashioned looking Java. Maybe it's because the indentation implies that the Optional composition doesn't wrap the streaming composition.", "url": "https://github.com/awslabs/smithy/pull/626#discussion_r520944521", "createdAt": "2020-11-10T23:41:56Z", "author": {"login": "mtdowling"}, "path": "smithy-model/src/main/java/software/amazon/smithy/model/validation/validators/HttpUriConflictValidator.java", "diffHunk": "@@ -159,6 +197,16 @@ private boolean isAllowableConflict(Model model, OperationShape operation, Opera\n                 .collect(Collectors.toMap(Pair::getLeft, Pair::getRight));\n     }\n \n+    private Map<String, Pattern> getHostLabelPatterns(Model model, OperationShape operation) {\n+        return OperationIndex.of(model).getInput(operation)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14ab195f7dba1f31ba38ae890d4d377ffa4842f8"}, "originalPosition": 125}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3650, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}