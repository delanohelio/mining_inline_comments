{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MTMzMjc5", "number": 496, "title": "Add protocol tests for Aws Json 1.0", "bodyText": "This adds basic protocol tests for AWS JSON 1.0. In the future there will be a full set of tests, but for now there are only tests that cover the cases where it differs from 1.1, namely errors and content type.\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-07-14T21:54:33Z", "url": "https://github.com/awslabs/smithy/pull/496", "merged": true, "mergeCommit": {"oid": "8ee2fd31997e7fcc23fedbcfd44a29479b25d9d9"}, "closed": true, "closedAt": "2020-07-16T17:30:35Z", "author": {"login": "JordonPhillips"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc09PPaAH2gAyNDQ5MTMzMjc5OjJkMmI2NmEyOTcxNDQwYmY0MjcwMTYyYWY1MTAxMDIzYjdlYjc0NWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1is5mgFqTQ1MDA2NDAwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2d2b66a2971440bf4270162af5101023b7eb745b", "author": {"user": {"login": "JordonPhillips", "name": "Jordon Phillips"}}, "url": "https://github.com/awslabs/smithy/commit/2d2b66a2971440bf4270162af5101023b7eb745b", "committedDate": "2020-07-14T21:51:00Z", "message": "Add protocol tests for Aws Json 1.0\n\nThis adds basic protocol tests for AWS JSON 1.0. In the future there\nwill be a full set of tests, but for now there are only tests that\ncover the cases where it differs from 1.1, namely errors and content\ntype."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53b9bb6fa3b8fb6575e1098cd818f6aebc7cc618", "author": {"user": {"login": "JordonPhillips", "name": "Jordon Phillips"}}, "url": "https://github.com/awslabs/smithy/commit/53b9bb6fa3b8fb6575e1098cd818f6aebc7cc618", "committedDate": "2020-07-15T23:18:09Z", "message": "Add expected params for json rpc tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5OTg1NDk0", "url": "https://github.com/awslabs/smithy/pull/496#pullrequestreview-449985494", "createdAt": "2020-07-16T15:53:06Z", "commit": {"oid": "53b9bb6fa3b8fb6575e1098cd818f6aebc7cc618"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNTo1MzowN1rOGyxbjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNTo1MzowN1rOGyxbjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTg5MTg1Mw==", "bodyText": "Case is missing documentation.", "url": "https://github.com/awslabs/smithy/pull/496#discussion_r455891853", "createdAt": "2020-07-16T15:53:07Z", "author": {"login": "kstich"}, "path": "smithy-aws-protocol-tests/model/awsJson1_0/errors.smithy", "diffHunk": "@@ -0,0 +1,248 @@\n+// This file defines test cases that test error serialization.\n+\n+$version: \"1.0\"\n+\n+namespace aws.protocoltests.json10\n+\n+use aws.protocols#awsJson1_0\n+use smithy.test#httpRequestTests\n+use smithy.test#httpResponseTests\n+\n+/// This operation has three possible return values:\n+///\n+/// 1. A successful response in the form of GreetingWithErrorsOutput\n+/// 2. An InvalidGreeting error.\n+/// 3. A ComplexError error.\n+///\n+/// Implementations must be able to successfully take a response and\n+/// properly deserialize successful and error responses.\n+@idempotent\n+operation GreetingWithErrors {\n+    output: GreetingWithErrorsOutput,\n+    errors: [InvalidGreeting, ComplexError, FooError]\n+}\n+\n+structure GreetingWithErrorsOutput {\n+    greeting: String,\n+}\n+\n+/// This error is thrown when an invalid greeting value is provided.\n+@error(\"client\")\n+structure InvalidGreeting {\n+    Message: String,\n+}\n+\n+apply InvalidGreeting @httpResponseTests([\n+    {\n+        id: \"AwsJson10InvalidGreetingError\",\n+        documentation: \"Parses simple JSON errors\",\n+        protocol: awsJson1_0,\n+        params: {\n+            Message: \"Hi\"\n+        },\n+        code: 400,\n+        headers: {\n+            \"Content-Type\": \"application/x-amz-json-1.0\"\n+        },\n+        body: \"\"\"\n+              {\n+                  \"__type\": \"aws.protocoltests.json10#InvalidGreeting\",\n+                  \"Message\": \"Hi\"\n+              }\"\"\",\n+        bodyMediaType: \"application/json\",\n+    },\n+])\n+\n+/// This error is thrown when a request is invalid.\n+@error(\"client\")\n+structure ComplexError {\n+    TopLevel: String,\n+    Nested: ComplexNestedErrorData,\n+}\n+\n+structure ComplexNestedErrorData {\n+    @jsonName(\"Fooooo\")\n+    Foo: String,\n+}\n+\n+apply ComplexError @httpResponseTests([\n+    {\n+        id: \"AwsJson10ComplexError\",\n+        documentation: \"Parses a complex error with no message member\",\n+        protocol: awsJson1_0,\n+        params: {\n+            TopLevel: \"Top level\",\n+            Nested: {\n+                Foo: \"bar\"\n+            }\n+        },\n+        code: 400,\n+        headers: {\n+            \"Content-Type\": \"application/x-amz-json-1.0\"\n+        },\n+        body: \"\"\"\n+              {\n+                  \"__type\": \"aws.protocoltests.json10#ComplexError\",\n+                  \"TopLevel\": \"Top level\",\n+                  \"Nested\": {\n+                      \"Fooooo\": \"bar\"\n+                  }\n+              }\"\"\",\n+        bodyMediaType: \"application/json\",\n+    },\n+    {\n+        id: \"AwsJson10EmptyComplexError\",\n+        protocol: awsJson1_0,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53b9bb6fa3b8fb6575e1098cd818f6aebc7cc618"}, "originalPosition": 95}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d4b6e4d8b87154f1a8ee5bb536203eee276c2d5", "author": {"user": {"login": "JordonPhillips", "name": "Jordon Phillips"}}, "url": "https://github.com/awslabs/smithy/commit/9d4b6e4d8b87154f1a8ee5bb536203eee276c2d5", "committedDate": "2020-07-16T17:13:53Z", "message": "Add more json1.0 protocol test documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5942ee199c58e2d9f5b998bb3d42911555983dd9", "author": {"user": {"login": "JordonPhillips", "name": "Jordon Phillips"}}, "url": "https://github.com/awslabs/smithy/commit/5942ee199c58e2d9f5b998bb3d42911555983dd9", "committedDate": "2020-07-16T17:06:24Z", "message": "Add more json1.0 protocol test documentation"}, "afterCommit": {"oid": "9d4b6e4d8b87154f1a8ee5bb536203eee276c2d5", "author": {"user": {"login": "JordonPhillips", "name": "Jordon Phillips"}}, "url": "https://github.com/awslabs/smithy/commit/9d4b6e4d8b87154f1a8ee5bb536203eee276c2d5", "committedDate": "2020-07-16T17:13:53Z", "message": "Add more json1.0 protocol test documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMDY0MDA0", "url": "https://github.com/awslabs/smithy/pull/496#pullrequestreview-450064004", "createdAt": "2020-07-16T17:29:54Z", "commit": {"oid": "9d4b6e4d8b87154f1a8ee5bb536203eee276c2d5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2209, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}