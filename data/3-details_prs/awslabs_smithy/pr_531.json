{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NjIzMjUx", "number": 531, "title": "Make internal a trait and not just a tag", "bodyText": "We've been using the \"internal\" tag to indicate that something is\ninternal only and should not be exposed to external consumers of a model\n(i.e., people that don't work at the same company as the service team).\nThe original motivation for using tags and not traits was that there are\nmore dimensions to filtering shapes out of models than just internal vs\nexternal. However, the internal/external split is so common that it\nmakes sense to make it a trait, which is more configurable and less\nbased on convention. Tags can still be used for filtering things out of\nmodels (for example, an operation could be tagged so that it is only\nexposed to a particular customer).\nThere are other cases where we migrated away from tags and moved to\ntraits like the aws.api#controlPlane and aws.api#dataPlane traits.\nTo support this change, a SmithyBuild transform was added that removes\nshapes marked as internal. Note that this does not perform tree shaking\nsince like other transforms, tree shaking is performed by a dedicated\ntransform.\nIssue #, if available:\nDescription of changes:\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-08-18T16:58:52Z", "url": "https://github.com/awslabs/smithy/pull/531", "merged": true, "mergeCommit": {"oid": "60af09937babe327f4a61735aaa9f9af0e4fbeea"}, "closed": true, "closedAt": "2020-08-18T20:31:13Z", "author": {"login": "mtdowling"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAJz-UgH2gAyNDY5NjIzMjUxOjk1Y2ExZmEzZmMzMWE1YzhiZDdlZTkyMzc4Y2IyZGY1MTg5YzE4YWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdALyrsgFqTQ2OTc0MDUzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "95ca1fa3fc31a5c8bd7ee92378cb2df5189c18aa", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/95ca1fa3fc31a5c8bd7ee92378cb2df5189c18aa", "committedDate": "2020-08-18T16:43:09Z", "message": "Make internal a trait and not just a tag\n\nWe've been using the \"internal\" tag to indicate that something is\ninternal only and should not be exposed to external consumers of a model\n(i.e., people that don't work at the same company as the service team).\nThe original motivation for using tags and not traits was that there are\nmore dimensions to filtering shapes out of models than just internal vs\nexternal. However, the internal/external split is so common that it\nmakes sense to make it a trait, which is more configurable and less\nbased on convention. Tags can still be used for filtering things out of\nmodels (for example, an operation could be tagged so that it is only\nexposed to a particular customer).\n\nThere are other cases where we migrated away from tags and moved to\ntraits like the `aws.api#controlPlane` and `aws.api#dataPlane` traits.\n\nTo support this change, a SmithyBuild transform was added that removes\nshapes marked as internal. Note that this does not perform tree shaking\nsince like other transforms, tree shaking is performed by a dedicated\ntransform."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5Njg4NzE0", "url": "https://github.com/awslabs/smithy/pull/531#pullrequestreview-469688714", "createdAt": "2020-08-18T17:47:43Z", "commit": {"oid": "95ca1fa3fc31a5c8bd7ee92378cb2df5189c18aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzo0Nzo0M1rOHCfeGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNzo0Nzo0M1rOHCfeGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM3NDgwOQ==", "bodyText": "Should this be a list of traits instead? All the ByTag transformers take lists, for reference.", "url": "https://github.com/awslabs/smithy/pull/531#discussion_r472374809", "createdAt": "2020-08-18T17:47:43Z", "author": {"login": "kstich"}, "path": "docs/source/1.0/guides/building-models/build-config.rst", "diffHunk": "@@ -287,6 +287,47 @@ the :ref:`tags trait <tags-trait>`.\n     This transformer does not remove shapes from the prelude.\n \n \n+.. _excludeShapesByTrait-transform:\n+\n+excludeShapesByTrait\n+--------------------\n+\n+Removes shapes if they are marked with a specific trait.\n+\n+.. list-table::\n+    :header-rows: 1\n+    :widths: 10 20 70\n+\n+    * - Property\n+      - Type\n+      - Description\n+    * - trait\n+      - ``string``", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95ca1fa3fc31a5c8bd7ee92378cb2df5189c18aa"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4516cd8d8771e5cf8a5b3e3b651553624181cd0a", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/4516cd8d8771e5cf8a5b3e3b651553624181cd0a", "committedDate": "2020-08-18T18:30:13Z", "message": "Make trait -> traits to accept a list"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "719a3ee6d2b5eab04b0b8691f4f9d4a3b9fc63e4", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/719a3ee6d2b5eab04b0b8691f4f9d4a3b9fc63e4", "committedDate": "2020-08-18T18:28:10Z", "message": "Make trait -> traits to accept a list"}, "afterCommit": {"oid": "4516cd8d8771e5cf8a5b3e3b651553624181cd0a", "author": {"user": {"login": "mtdowling", "name": "Michael Dowling"}}, "url": "https://github.com/awslabs/smithy/commit/4516cd8d8771e5cf8a5b3e3b651553624181cd0a", "committedDate": "2020-08-18T18:30:13Z", "message": "Make trait -> traits to accept a list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NzQwNTMz", "url": "https://github.com/awslabs/smithy/pull/531#pullrequestreview-469740533", "createdAt": "2020-08-18T19:01:33Z", "commit": {"oid": "4516cd8d8771e5cf8a5b3e3b651553624181cd0a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2226, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}