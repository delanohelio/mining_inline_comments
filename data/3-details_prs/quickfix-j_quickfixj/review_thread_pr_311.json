{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2MjUxMjAw", "number": 311, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNTowMToyOVrOEff0Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNTo1MjoxMFrOEfhWcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNDYyNjIzOnYy", "diffSide": "RIGHT", "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNTowMToyOVrOHLzczw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNzo0NzozN1rOHL6gFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEzOTM0Mw==", "bodyText": "Trivial: I think it should be \"are\".", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482139343", "createdAt": "2020-09-02T15:01:29Z", "author": {"login": "the-thing"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -134,6 +142,19 @@ private void generateFieldClasses(Task task) throws ParserConfigurationException\n                     Map<String, String> parameters = new HashMap<>();\n                     parameters.put(\"fieldName\", fieldName);\n                     parameters.put(\"fieldPackage\", task.getFieldPackage());\n+                    String utcTimestampPrecision = task.getUtcTimestampPrecision();\n+                    if (utcTimestampPrecision != null) {\n+                        String utcTimestampPrecisionParameterName = \"utcTimestampPrecision\";\n+                        if (!UTC_TIMESTAMP_PRECISION_ALLOWED_VALUES.contains(utcTimestampPrecision)) {\n+                            throw new CodeGenerationException(new IllegalArgumentException(String.format(\n+                                \"Allowed values for parameter %s is %s. Supplied value: \\\"%s\\\".\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI1NDg2OQ==", "bodyText": "Fixed in ce5f595.", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482254869", "createdAt": "2020-09-02T17:47:37Z", "author": {"login": "simenflatby"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -134,6 +142,19 @@ private void generateFieldClasses(Task task) throws ParserConfigurationException\n                     Map<String, String> parameters = new HashMap<>();\n                     parameters.put(\"fieldName\", fieldName);\n                     parameters.put(\"fieldPackage\", task.getFieldPackage());\n+                    String utcTimestampPrecision = task.getUtcTimestampPrecision();\n+                    if (utcTimestampPrecision != null) {\n+                        String utcTimestampPrecisionParameterName = \"utcTimestampPrecision\";\n+                        if (!UTC_TIMESTAMP_PRECISION_ALLOWED_VALUES.contains(utcTimestampPrecision)) {\n+                            throw new CodeGenerationException(new IllegalArgumentException(String.format(\n+                                \"Allowed values for parameter %s is %s. Supplied value: \\\"%s\\\".\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEzOTM0Mw=="}, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNDYzNzcxOnYy", "diffSide": "RIGHT", "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNTowMzoxMVrOHLzkiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxODoxMjo1OVrOHL7Y2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE0MTMyMQ==", "bodyText": "Not sure how often this method is used, but this does not seem correct.", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482141321", "createdAt": "2020-09-02T15:03:11Z", "author": {"login": "the-thing"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -447,6 +477,7 @@ public static void main(String[] args) {\n                 task.setMessagePackage(\"quickfix.\" + version.toLowerCase());\n                 task.setOutputBaseDirectory(new File(args[2]));\n                 task.setFieldPackage(\"quickfix.field\");\n+                task.setUtcTimestampPrecision(task.utcTimestampPrecision);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI1NjE5OQ==", "bodyText": "Hi @the-thing. Can you please elaborate? I did not understand what is wrong here.", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482256199", "createdAt": "2020-09-02T17:49:53Z", "author": {"login": "simenflatby"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -447,6 +477,7 @@ public static void main(String[] args) {\n                 task.setMessagePackage(\"quickfix.\" + version.toLowerCase());\n                 task.setOutputBaseDirectory(new File(args[2]));\n                 task.setFieldPackage(\"quickfix.field\");\n+                task.setUtcTimestampPrecision(task.utcTimestampPrecision);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE0MTMyMQ=="}, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI1ODEwNQ==", "bodyText": "Aren't you reassining the same field task.utcTimestampPrecision = task.utcTimestampPrecision?", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482258105", "createdAt": "2020-09-02T17:53:08Z", "author": {"login": "the-thing"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -447,6 +477,7 @@ public static void main(String[] args) {\n                 task.setMessagePackage(\"quickfix.\" + version.toLowerCase());\n                 task.setOutputBaseDirectory(new File(args[2]));\n                 task.setFieldPackage(\"quickfix.field\");\n+                task.setUtcTimestampPrecision(task.utcTimestampPrecision);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE0MTMyMQ=="}, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI1ODY2OA==", "bodyText": "Ah, I see now that this looks stupid\ud83d\ude02. Sets the value to it self... I'm not familiar with the usage of this main method, so maybe one of you could suggest a solution?", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482258668", "createdAt": "2020-09-02T17:54:11Z", "author": {"login": "simenflatby"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -447,6 +477,7 @@ public static void main(String[] args) {\n                 task.setMessagePackage(\"quickfix.\" + version.toLowerCase());\n                 task.setOutputBaseDirectory(new File(args[2]));\n                 task.setFieldPackage(\"quickfix.field\");\n+                task.setUtcTimestampPrecision(task.utcTimestampPrecision);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE0MTMyMQ=="}, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI1OTg4Mw==", "bodyText": "I believe this methods is used when you want to run code generation locally from IDE etc.. I would follow the same pattern as e.g. overwrite/orderedFields/useDecimal. Create an option, get an option or default value, set it.", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482259883", "createdAt": "2020-09-02T17:56:18Z", "author": {"login": "the-thing"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -447,6 +477,7 @@ public static void main(String[] args) {\n                 task.setMessagePackage(\"quickfix.\" + version.toLowerCase());\n                 task.setOutputBaseDirectory(new File(args[2]));\n                 task.setFieldPackage(\"quickfix.field\");\n+                task.setUtcTimestampPrecision(task.utcTimestampPrecision);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE0MTMyMQ=="}, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI2MTQwOA==", "bodyText": "OK. Thank you. I will have a look at it.", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482261408", "createdAt": "2020-09-02T17:58:50Z", "author": {"login": "simenflatby"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -447,6 +477,7 @@ public static void main(String[] args) {\n                 task.setMessagePackage(\"quickfix.\" + version.toLowerCase());\n                 task.setOutputBaseDirectory(new File(args[2]));\n                 task.setFieldPackage(\"quickfix.field\");\n+                task.setUtcTimestampPrecision(task.utcTimestampPrecision);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE0MTMyMQ=="}, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI2OTQwMg==", "bodyText": "Suggestion in e1b5bee. Created the getOption(String key, String defaultValue) in case someone want to change the default value to something other than null later. I will check back to see if you have any feedback tomorrow.", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482269402", "createdAt": "2020-09-02T18:12:59Z", "author": {"login": "simenflatby"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -447,6 +477,7 @@ public static void main(String[] args) {\n                 task.setMessagePackage(\"quickfix.\" + version.toLowerCase());\n                 task.setOutputBaseDirectory(new File(args[2]));\n                 task.setFieldPackage(\"quickfix.field\");\n+                task.setUtcTimestampPrecision(task.utcTimestampPrecision);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE0MTMyMQ=="}, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNDg3NzMxOnYy", "diffSide": "RIGHT", "path": "quickfixj-codegenerator/src/main/resources/org/quickfixj/codegenerator/Fields.xsl", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNTo1MjoxMFrOHL16lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNzo0ODoxMVrOHL6hTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE3OTczNA==", "bodyText": "Trivial. In the generated classes there is an empty line here. Not sure which xsl part generates this.", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482179734", "createdAt": "2020-09-02T15:52:10Z", "author": {"login": "the-thing"}, "path": "quickfixj-codegenerator/src/main/resources/org/quickfixj/codegenerator/Fields.xsl", "diffHunk": "@@ -87,6 +95,17 @@ public class <xsl:value-of select=\"@name\"/> extends <xsl:call-template name=\"get\n \t\tsuper(<xsl:value-of select=\"@number\"/>, new <xsl:value-of select=\"$dataType\"/>(data));\n \t}\n \t</xsl:if>\n+\n+    <xsl:choose>\n+        <xsl:when test=\"$utcTimestampPrecision\">\n+            <xsl:if test=\"@type='UTCTIMESTAMP' or @type='UTCTIME' or @type='UTCTIMEONLY'\">\n+    @Override\n+    protected UtcTimestampPrecision getDefaultUtcTimestampPrecision() {\n+        return UtcTimestampPrecision.<xsl:value-of select=\"$utcTimestampPrecision\"/>;\n+    }\n+            </xsl:if>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjI1NTE4Mg==", "bodyText": "Fixed in 95c1373.", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482255182", "createdAt": "2020-09-02T17:48:11Z", "author": {"login": "simenflatby"}, "path": "quickfixj-codegenerator/src/main/resources/org/quickfixj/codegenerator/Fields.xsl", "diffHunk": "@@ -87,6 +95,17 @@ public class <xsl:value-of select=\"@name\"/> extends <xsl:call-template name=\"get\n \t\tsuper(<xsl:value-of select=\"@number\"/>, new <xsl:value-of select=\"$dataType\"/>(data));\n \t}\n \t</xsl:if>\n+\n+    <xsl:choose>\n+        <xsl:when test=\"$utcTimestampPrecision\">\n+            <xsl:if test=\"@type='UTCTIMESTAMP' or @type='UTCTIME' or @type='UTCTIMEONLY'\">\n+    @Override\n+    protected UtcTimestampPrecision getDefaultUtcTimestampPrecision() {\n+        return UtcTimestampPrecision.<xsl:value-of select=\"$utcTimestampPrecision\"/>;\n+    }\n+            </xsl:if>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE3OTczNA=="}, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2128, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}