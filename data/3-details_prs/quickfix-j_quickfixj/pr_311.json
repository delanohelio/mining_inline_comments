{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2MjUxMjAw", "number": 311, "title": "Set UtcTimestampPrecision in codegenerator", "bodyText": "Fixes #310\nAdded support for setting a default UtcTimestampPrecision in the\nquickfixj-codegenerator Maven plugin. The default applies to the\nfollowing classes and their generated sub classes.\n\nUtcTimeField\nUtcTimeOnlyField\nUtcTimeStampField", "createdAt": "2020-08-31T11:57:59Z", "url": "https://github.com/quickfix-j/quickfixj/pull/311", "merged": true, "mergeCommit": {"oid": "6a127d845449bdf481d7956e9de33797acf94983"}, "closed": true, "closedAt": "2020-09-24T12:03:22Z", "author": {"login": "simenflatby"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdERbLKAH2gAyNDc2MjUxMjAwOjQwMzJkZjg2OTU4ZGI0YWI5YWVmZTU4OTQ3MTAzNjMwNDQ4ODAyNzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdL_9q_gFqTQ5NTQ5NTk3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4032df86958db4ab9aefe5894710363044880271", "author": {"user": null}, "url": "https://github.com/quickfix-j/quickfixj/commit/4032df86958db4ab9aefe5894710363044880271", "committedDate": "2020-08-31T11:51:00Z", "message": "ref #310 - Set UtcTimestampPrecision in generator\n\nAdded support for setting a default UtcTimestampPrecision in the\nquickfixj-codegenerator Maven plugin. The default applies to the\nfollowing classes and their generated sub classes.\n- UtcTimeField\n- UtcTimeOnlyField\n- UtcTimeStampField"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwOTEzMTIz", "url": "https://github.com/quickfix-j/quickfixj/pull/311#pullrequestreview-480913123", "createdAt": "2020-09-02T15:01:29Z", "commit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNTowMToyOVrOHLzczw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNTo1MjoxMFrOHL16lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjEzOTM0Mw==", "bodyText": "Trivial: I think it should be \"are\".", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482139343", "createdAt": "2020-09-02T15:01:29Z", "author": {"login": "the-thing"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -134,6 +142,19 @@ private void generateFieldClasses(Task task) throws ParserConfigurationException\n                     Map<String, String> parameters = new HashMap<>();\n                     parameters.put(\"fieldName\", fieldName);\n                     parameters.put(\"fieldPackage\", task.getFieldPackage());\n+                    String utcTimestampPrecision = task.getUtcTimestampPrecision();\n+                    if (utcTimestampPrecision != null) {\n+                        String utcTimestampPrecisionParameterName = \"utcTimestampPrecision\";\n+                        if (!UTC_TIMESTAMP_PRECISION_ALLOWED_VALUES.contains(utcTimestampPrecision)) {\n+                            throw new CodeGenerationException(new IllegalArgumentException(String.format(\n+                                \"Allowed values for parameter %s is %s. Supplied value: \\\"%s\\\".\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE0MTMyMQ==", "bodyText": "Not sure how often this method is used, but this does not seem correct.", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482141321", "createdAt": "2020-09-02T15:03:11Z", "author": {"login": "the-thing"}, "path": "quickfixj-codegenerator/src/main/java/org/quickfixj/codegenerator/MessageCodeGenerator.java", "diffHunk": "@@ -447,6 +477,7 @@ public static void main(String[] args) {\n                 task.setMessagePackage(\"quickfix.\" + version.toLowerCase());\n                 task.setOutputBaseDirectory(new File(args[2]));\n                 task.setFieldPackage(\"quickfix.field\");\n+                task.setUtcTimestampPrecision(task.utcTimestampPrecision);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE3OTczNA==", "bodyText": "Trivial. In the generated classes there is an empty line here. Not sure which xsl part generates this.", "url": "https://github.com/quickfix-j/quickfixj/pull/311#discussion_r482179734", "createdAt": "2020-09-02T15:52:10Z", "author": {"login": "the-thing"}, "path": "quickfixj-codegenerator/src/main/resources/org/quickfixj/codegenerator/Fields.xsl", "diffHunk": "@@ -87,6 +95,17 @@ public class <xsl:value-of select=\"@name\"/> extends <xsl:call-template name=\"get\n \t\tsuper(<xsl:value-of select=\"@number\"/>, new <xsl:value-of select=\"$dataType\"/>(data));\n \t}\n \t</xsl:if>\n+\n+    <xsl:choose>\n+        <xsl:when test=\"$utcTimestampPrecision\">\n+            <xsl:if test=\"@type='UTCTIMESTAMP' or @type='UTCTIME' or @type='UTCTIMEONLY'\">\n+    @Override\n+    protected UtcTimestampPrecision getDefaultUtcTimestampPrecision() {\n+        return UtcTimestampPrecision.<xsl:value-of select=\"$utcTimestampPrecision\"/>;\n+    }\n+            </xsl:if>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4032df86958db4ab9aefe5894710363044880271"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce5f595346c622671dc741ea09c6242ef5a7e81b", "author": {"user": null}, "url": "https://github.com/quickfix-j/quickfixj/commit/ce5f595346c622671dc741ea09c6242ef5a7e81b", "committedDate": "2020-09-02T16:17:03Z", "message": "ref #310 - Fixed typo: \"is\" -> \"are\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95c1373e1968d968e3002751c931d501c3d9c0f3", "author": {"user": null}, "url": "https://github.com/quickfix-j/quickfixj/commit/95c1373e1968d968e3002751c931d501c3d9c0f3", "committedDate": "2020-09-02T17:33:28Z", "message": "ref #310 - Removes excess empty lines\n\nRemoves excess empty lines from generated files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1bb5fc45a007aac7f21d6ebdbf0b3254361228c", "author": {"user": null}, "url": "https://github.com/quickfix-j/quickfixj/commit/e1bb5fc45a007aac7f21d6ebdbf0b3254361228c", "committedDate": "2020-09-02T17:45:15Z", "message": "ref #310 - Don't use ctor with precision\n\nIt is not nesesary to use the constructor with\nUtcTimestampPrecision. It is set as a default anyways."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1b5bee92c8aeb4893e5f5a77936499dc78a7a71", "author": {"user": null}, "url": "https://github.com/quickfix-j/quickfixj/commit/e1b5bee92c8aeb4893e5f5a77936499dc78a7a71", "committedDate": "2020-09-02T18:08:57Z", "message": "ref #310 - Set precision in main\n\nWhen running main method, Set utcTimestampPrecision to value from\nproperty \"generator.utcTimestampPrecision\", otherwise null."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNTcyNDg2", "url": "https://github.com/quickfix-j/quickfixj/pull/311#pullrequestreview-481572486", "createdAt": "2020-09-03T07:37:20Z", "commit": {"oid": "e1b5bee92c8aeb4893e5f5a77936499dc78a7a71"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NDk1OTc0", "url": "https://github.com/quickfix-j/quickfixj/pull/311#pullrequestreview-495495974", "createdAt": "2020-09-24T12:01:47Z", "commit": {"oid": "e1b5bee92c8aeb4893e5f5a77936499dc78a7a71"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3123, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}