{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NTUzMTcw", "number": 264, "title": "QFJ-905 - adding support for MULTIPLECHARVALUE", "bodyText": "Changes\n\nadded support for MULTIPLECHARVALUE\n\nThere is a discrapency between wiki and actual FIXML schema \"fixml-datatypes\". The regex in the schema considers all white spaces to be a valid separator, while FIX wiki states that characters should be separated by single space.\nI used single space since quickfix.DataDictionary#isFieldValue alerady expects single space character`.\nValidation does not care about same character repeated more than once.\nhttp://fixwiki.org/fixwiki/MultipleCharValueDataType\nhttps://www.fixtrading.org/standards/fixml/", "createdAt": "2020-03-11T08:41:09Z", "url": "https://github.com/quickfix-j/quickfixj/pull/264", "merged": true, "mergeCommit": {"oid": "e704b38305bc8833a52477ad56ec5d2f540d6d78"}, "closed": true, "closedAt": "2020-03-23T22:16:42Z", "author": {"login": "the-thing"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMXa-LgH2gAyMzg2NTUzMTcwOmI0NDdmYTJkMDliNmI4Mzc5ZWRiMTU4OTU2ZTJiMGYzMmZjMGMzYTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQlwOdAFqTM3OTg1ODE3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b447fa2d09b6b8379edb158956e2b0f32fc0c3a5", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/b447fa2d09b6b8379edb158956e2b0f32fc0c3a5", "committedDate": "2020-03-10T19:10:27Z", "message": "QFJ-905 - adding support for MULTIPLECHARVALUE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b51aefef17fc3089fdc0d84e4f950fc185aba0a6", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/b51aefef17fc3089fdc0d84e4f950fc185aba0a6", "committedDate": "2020-03-17T12:06:10Z", "message": "QFJ-905 changed wildcard imports to single class imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NDQxMDg0", "url": "https://github.com/quickfix-j/quickfixj/pull/264#pullrequestreview-376441084", "createdAt": "2020-03-17T22:11:38Z", "commit": {"oid": "b51aefef17fc3089fdc0d84e4f950fc185aba0a6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMjoxMTozOVrOF3v22w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMjoxMTozOVrOF3v22w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAwMDA5MQ==", "bodyText": "I am asking myself if we could use String.join() or respectively StringJoiner here.  We can also pass a delimiter there and hence would not need the loop and the code would be cleaner. What do you think?", "url": "https://github.com/quickfix-j/quickfixj/pull/264#discussion_r394000091", "createdAt": "2020-03-17T22:11:39Z", "author": {"login": "chrjohn"}, "path": "quickfixj-core/src/main/java/quickfix/field/converter/CharArrayConverter.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package quickfix.field.converter;\n+\n+import quickfix.FieldConvertError;\n+\n+/**\n+ * Converts between character array and string.\n+ */\n+public class CharArrayConverter {\n+\n+    private static final String CHAR_ARRAY_REGEX = \"[A-Za-z0-9]( [A-Za-z0-9])*\";\n+\n+    public static String convert(char... chars) {\n+        if (chars.length == 0) {\n+            throw new IllegalArgumentException(\"empty character array\");\n+        }\n+\n+        StringBuilder builder = new StringBuilder(chars.length * 2 - 1);\n+        builder.append(chars[0]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b51aefef17fc3089fdc0d84e4f950fc185aba0a6"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NDQ3MDkz", "url": "https://github.com/quickfix-j/quickfixj/pull/264#pullrequestreview-376447093", "createdAt": "2020-03-17T22:24:47Z", "commit": {"oid": "b51aefef17fc3089fdc0d84e4f950fc185aba0a6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMjoyNDo0N1rOF3wLWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QyMjoyNDo0N1rOF3wLWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDAwNTMzOA==", "bodyText": "We could use a Matcher here and re-use the Pattern. OTOH this would not be thread-safe anymore and we would need synchronization or ThreadLocal. Probably not worth to be changed.", "url": "https://github.com/quickfix-j/quickfixj/pull/264#discussion_r394005338", "createdAt": "2020-03-17T22:24:47Z", "author": {"login": "chrjohn"}, "path": "quickfixj-core/src/main/java/quickfix/field/converter/CharArrayConverter.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package quickfix.field.converter;\n+\n+import quickfix.FieldConvertError;\n+\n+/**\n+ * Converts between character array and string.\n+ */\n+public class CharArrayConverter {\n+\n+    private static final String CHAR_ARRAY_REGEX = \"[A-Za-z0-9]( [A-Za-z0-9])*\";\n+\n+    public static String convert(char... chars) {\n+        if (chars.length == 0) {\n+            throw new IllegalArgumentException(\"empty character array\");\n+        }\n+\n+        StringBuilder builder = new StringBuilder(chars.length * 2 - 1);\n+        builder.append(chars[0]);\n+\n+        for (int i = 1; i < chars.length; i++) {\n+            builder.append(' ').append(chars[i]);\n+        }\n+\n+        return builder.toString();\n+    }\n+\n+    public static char[] convert(String value) throws FieldConvertError {\n+        if (!value.matches(CHAR_ARRAY_REGEX)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b51aefef17fc3089fdc0d84e4f950fc185aba0a6"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3OTMxNjk2", "url": "https://github.com/quickfix-j/quickfixj/pull/264#pullrequestreview-377931696", "createdAt": "2020-03-19T17:17:43Z", "commit": {"oid": "b51aefef17fc3089fdc0d84e4f950fc185aba0a6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNzoxNzo0M1rOF44jdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNzoxNzo0M1rOF44jdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTE5MTE1OQ==", "bodyText": "I think this regex needs to be changed to comply to the definition as per the FIX spec of character since it would not match punctuation: https://fiximate.fixtrading.org/en/FIX.5.0SP2_EP255/fix_datatypes.html\n\nSingle character value, can include any alphanumeric character or punctuation except the delimiter. All char fields are case sensitive (i.e. m != M).\n\nTBH there seems to be no field which has a char value which would not match that regex. However, I think we should adhere to the spec here.", "url": "https://github.com/quickfix-j/quickfixj/pull/264#discussion_r395191159", "createdAt": "2020-03-19T17:17:43Z", "author": {"login": "chrjohn"}, "path": "quickfixj-core/src/main/java/quickfix/field/converter/CharArrayConverter.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package quickfix.field.converter;\n+\n+import quickfix.FieldConvertError;\n+\n+/**\n+ * Converts between character array and string.\n+ */\n+public class CharArrayConverter {\n+\n+    private static final String CHAR_ARRAY_REGEX = \"[A-Za-z0-9]( [A-Za-z0-9])*\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b51aefef17fc3089fdc0d84e4f950fc185aba0a6"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bc58074b1d18396d6aa8d0f343ffbcf9ea15fd1", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/8bc58074b1d18396d6aa8d0f343ffbcf9ea15fd1", "committedDate": "2020-03-19T20:43:37Z", "message": "QFJ-905 added non whitespace character matching"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27cf39863f430ffe70d37c037d6e23aa87c2a360", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/27cf39863f430ffe70d37c037d6e23aa87c2a360", "committedDate": "2020-03-19T20:11:57Z", "message": "QFJ-905 added non whitespace character matching"}, "afterCommit": {"oid": "8bc58074b1d18396d6aa8d0f343ffbcf9ea15fd1", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/8bc58074b1d18396d6aa8d0f343ffbcf9ea15fd1", "committedDate": "2020-03-19T20:43:37Z", "message": "QFJ-905 added non whitespace character matching"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5ODU4MTcx", "url": "https://github.com/quickfix-j/quickfixj/pull/264#pullrequestreview-379858171", "createdAt": "2020-03-23T22:08:02Z", "commit": {"oid": "8bc58074b1d18396d6aa8d0f343ffbcf9ea15fd1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3092, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}