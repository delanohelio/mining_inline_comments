{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MTEzMzg2", "number": 322, "title": "Fixed FIX message XML conversion", "bodyText": "This should fix quickfix.MessageTest#shouldConvertToXmlWhenDataDictionaryLoadedWithExternalDTD failing in #319\nWhen using INDENT it is mandatory to specify indent-amount as well, otherwise the generated XML will not be indented properly.\n\n  \n    \n      quickfixj/quickfixj-core/src/main/java/quickfix/Message.java\n    \n    \n         Line 346\n      in\n      83c0c98\n    \n    \n    \n    \n\n        \n          \n           serializer.setOutputProperty(OutputKeys.INDENT, \"yes\"); \n        \n    \n  \n\n\nHowever, this is not that case in Java 11 anymore. It seems to be using default indent-amount equal to 4, when not explicitly defined.\nChanges\n\nadded indent-amount so the formatting is the same on Java 8/11/15. We are breaking backwards compatibility here as Java 8 will convert FIX messages with indent from now on.\ntest slightly adjusted to pass on different Java versions", "createdAt": "2020-10-19T16:31:45Z", "url": "https://github.com/quickfix-j/quickfixj/pull/322", "merged": true, "mergeCommit": {"oid": "9df0fe1334b56449a448a985b80df77acae3813b"}, "closed": true, "closedAt": "2021-09-01T08:32:43Z", "author": {"login": "the-thing"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUXKOFABqjM4OTgxNzE5NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABexrQ9PgH2gAyNTA2MTEzMzg2OmQ0OThkNzc3YjFlNmUxNGQ4NWIwMjgyNjM3ZmIwNWZjYTFhOWQyMTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d07c74e4b9a2bdecc81aa10c4e14ec9e3a505d9", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/9d07c74e4b9a2bdecc81aa10c4e14ec9e3a505d9", "committedDate": "2020-10-19T15:46:44Z", "message": "added indent-amount xml transformer property"}, "afterCommit": {"oid": "4702a84a79faf260856e8b352fc589d615ef0176", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/4702a84a79faf260856e8b352fc589d615ef0176", "committedDate": "2020-10-20T11:33:45Z", "message": "added indent-amount xml transformer property"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4702a84a79faf260856e8b352fc589d615ef0176", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/4702a84a79faf260856e8b352fc589d615ef0176", "committedDate": "2020-10-20T11:33:45Z", "message": "added indent-amount xml transformer property"}, "afterCommit": {"oid": "274ab5c3732bceb0668e308346fb764e5c0192f4", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/274ab5c3732bceb0668e308346fb764e5c0192f4", "committedDate": "2020-10-22T10:02:53Z", "message": "FIX message XML indent can be chosen by flag"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0Njk0MTc2", "url": "https://github.com/quickfix-j/quickfixj/pull/322#pullrequestreview-514694176", "createdAt": "2020-10-22T12:56:34Z", "commit": {"oid": "99a955b40a7545cf3ade2fe836b8e4e060ebfe4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxMjo1NjozNVrOHmgXIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxMjo1NjozNVrOHmgXIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDEzODE0Ng==", "bodyText": "I know it does not make any sense, but to be backward compatible we need to set OutputKeys.INDENT, \"yes\" without setting the indent-amount, right?", "url": "https://github.com/quickfix-j/quickfixj/pull/322#discussion_r510138146", "createdAt": "2020-10-22T12:56:35Z", "author": {"login": "chrjohn"}, "path": "quickfixj-core/src/main/java/quickfix/Message.java", "diffHunk": "@@ -377,6 +377,8 @@ public String toXML(DataDictionary dataDictionary, boolean indent) {\n             if (indent) {\n                 serializer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n                 serializer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\", \"4\");\n+            } else {\n+                serializer.setOutputProperty(OutputKeys.INDENT, \"no\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99a955b40a7545cf3ade2fe836b8e4e060ebfe4b"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c8ce7b95841f71e66188040c38bc201574ae7f79", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/c8ce7b95841f71e66188040c38bc201574ae7f79", "committedDate": "2020-10-22T13:59:06Z", "message": "FIX message XML indent can be chosen by flag"}, "afterCommit": {"oid": "da3a0638ebc1e8bd2cf1a34745ef9b4031374ef4", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/da3a0638ebc1e8bd2cf1a34745ef9b4031374ef4", "committedDate": "2020-10-28T15:09:10Z", "message": "- added indent-amount xml transformer property\n\n- FIX message XML indent can be chosen by flag"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da3a0638ebc1e8bd2cf1a34745ef9b4031374ef4", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/da3a0638ebc1e8bd2cf1a34745ef9b4031374ef4", "committedDate": "2020-10-28T15:09:10Z", "message": "- added indent-amount xml transformer property\n\n- FIX message XML indent can be chosen by flag"}, "afterCommit": {"oid": "5c345fbaf7626cc9c8d302583933c010abe6417d", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/5c345fbaf7626cc9c8d302583933c010abe6417d", "committedDate": "2020-12-09T11:03:47Z", "message": "- added indent-amount xml transformer property\n\n- FIX message XML indent can be chosen by flag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c089126834a8177baeec0150f71b73bcbe4264e", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/9c089126834a8177baeec0150f71b73bcbe4264e", "committedDate": "2020-12-23T09:08:04Z", "message": "- added indent-amount xml transformer property\n\n- FIX message XML indent can be chosen by flag"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5c345fbaf7626cc9c8d302583933c010abe6417d", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/5c345fbaf7626cc9c8d302583933c010abe6417d", "committedDate": "2020-12-09T11:03:47Z", "message": "- added indent-amount xml transformer property\n\n- FIX message XML indent can be chosen by flag"}, "afterCommit": {"oid": "9c089126834a8177baeec0150f71b73bcbe4264e", "author": {"user": {"login": "the-thing", "name": "Marcin L"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/9c089126834a8177baeec0150f71b73bcbe4264e", "committedDate": "2020-12-23T09:08:04Z", "message": "- added indent-amount xml transformer property\n\n- FIX message XML indent can be chosen by flag"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjUzNjM1MDA2", "url": "https://github.com/quickfix-j/quickfixj/pull/322#pullrequestreview-653635006", "createdAt": "2021-05-06T16:07:02Z", "commit": {"oid": "9c089126834a8177baeec0150f71b73bcbe4264e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wNlQxNjowNzowMlrOJWfVrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNS0wNlQxNjowNzowMlrOJWfVrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU2MTkwMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * probably not sufficient for production use, but it more intended\n          \n          \n            \n                 * probably not sufficient for production use, but is more intended", "url": "https://github.com/quickfix-j/quickfixj/pull/322#discussion_r627561902", "createdAt": "2021-05-06T16:07:02Z", "author": {"login": "chrjohn"}, "path": "quickfixj-core/src/main/java/quickfix/Message.java", "diffHunk": "@@ -316,7 +316,24 @@ public boolean trailerHasGroup(Group group) {\n      * @see #toXML(DataDictionary)\n      */\n     public String toXML() {\n-        return toXML(null);\n+        return toXML(false);\n+    }\n+\n+    /**\n+     * Converts the message into a simple XML format. This format is\n+     * probably not sufficient for production use, but it more intended", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c089126834a8177baeec0150f71b73bcbe4264e"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e10b1d054dfc2b338baef4701cf12a3430ddd4b", "author": {"user": {"login": "chrjohn", "name": "Christoph John"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/9e10b1d054dfc2b338baef4701cf12a3430ddd4b", "committedDate": "2021-05-06T16:07:50Z", "message": "Update quickfixj-core/src/main/java/quickfix/Message.java\r\n\r\nfixed small typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjUzNjM4MDQ0", "url": "https://github.com/quickfix-j/quickfixj/pull/322#pullrequestreview-653638044", "createdAt": "2021-05-06T16:10:00Z", "commit": {"oid": "9e10b1d054dfc2b338baef4701cf12a3430ddd4b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a20ad413c43475aa98a2901fed47c653bce937c1", "author": {"user": {"login": "chrjohn", "name": "Christoph John"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/a20ad413c43475aa98a2901fed47c653bce937c1", "committedDate": "2021-08-06T09:32:49Z", "message": "fixed typos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d498d777b1e6e14d85b0282637fb05fca1a9d214", "author": {"user": {"login": "chrjohn", "name": "Christoph John"}}, "url": "https://github.com/quickfix-j/quickfixj/commit/d498d777b1e6e14d85b0282637fb05fca1a9d214", "committedDate": "2021-08-06T09:35:07Z", "message": "Merge branch 'master' into test_whitespace_replacement"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3131, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}