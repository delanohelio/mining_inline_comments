{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MDA3MzQ1", "number": 277, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxMjoxMzoxM1rODsadKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxOTo0NDozNlrODs08GA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3ODk3Mzg0OnYy", "diffSide": "RIGHT", "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxMjoxMzoxM1rOF9RMDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxNTozNzowN1rOF9Suag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc4OTA3MA==", "bodyText": "I would log the remote peer address being set.", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r399789070", "createdAt": "2020-03-29T12:13:13Z", "author": {"login": "the-thing"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +58,20 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        IoSession session = parent.getSession();\r\n+        SocketAddress remoteAddress = session.getRemoteAddress();\r\n+\r\n+        if(remoteAddress instanceof InetSocketAddress) {\r\n+            // activate the SNI support in the JSSE SSLEngine\r\n+            log.info(\"activating TLS SNI support\");\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7395c5d9ed1811eb07637a6acf0a812edbdb83fa"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgxMzI0NA==", "bodyText": "debug or info ?", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r399813244", "createdAt": "2020-03-29T15:29:34Z", "author": {"login": "youurayy"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +58,20 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        IoSession session = parent.getSession();\r\n+        SocketAddress remoteAddress = session.getRemoteAddress();\r\n+\r\n+        if(remoteAddress instanceof InetSocketAddress) {\r\n+            // activate the SNI support in the JSSE SSLEngine\r\n+            log.info(\"activating TLS SNI support\");\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc4OTA3MA=="}, "originalCommit": {"oid": "7395c5d9ed1811eb07637a6acf0a812edbdb83fa"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgxNDI1MA==", "bodyText": "I would keep the current info and just added the param.", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r399814250", "createdAt": "2020-03-29T15:37:07Z", "author": {"login": "the-thing"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +58,20 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        IoSession session = parent.getSession();\r\n+        SocketAddress remoteAddress = session.getRemoteAddress();\r\n+\r\n+        if(remoteAddress instanceof InetSocketAddress) {\r\n+            // activate the SNI support in the JSSE SSLEngine\r\n+            log.info(\"activating TLS SNI support\");\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc4OTA3MA=="}, "originalCommit": {"oid": "7395c5d9ed1811eb07637a6acf0a812edbdb83fa"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MzMxMTYzOnYy", "diffSide": "RIGHT", "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxOTo0NDoxNVrOF95etA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDoxNzo1MlrOF96mNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0OTIwNA==", "bodyText": "No need for +, you can use the argument", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r400449204", "createdAt": "2020-03-30T19:44:15Z", "author": {"login": "the-thing"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +59,26 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        if (useSNI) {\r\n+            IoSession session = parent.getSession();\r\n+            SocketAddress remoteAddress = session.getRemoteAddress();\r\n+\r\n+            if (remoteAddress instanceof InetSocketAddress) {\r\n+                // activate the SNI support in the JSSE SSLEngine\r\n+                log.info(\"activating TLS SNI support for peer address: \" + remoteAddress);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "acf00c10073b4e91ab24fa92225253b2da895173"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ1NDQzMQ==", "bodyText": "That doesn't seem to be the style established in the project (or, I don't understand what you mean by \"argument\")", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r400454431", "createdAt": "2020-03-30T19:53:48Z", "author": {"login": "youurayy"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +59,26 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        if (useSNI) {\r\n+            IoSession session = parent.getSession();\r\n+            SocketAddress remoteAddress = session.getRemoteAddress();\r\n+\r\n+            if (remoteAddress instanceof InetSocketAddress) {\r\n+                // activate the SNI support in the JSSE SSLEngine\r\n+                log.info(\"activating TLS SNI support for peer address: \" + remoteAddress);\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0OTIwNA=="}, "originalCommit": {"oid": "acf00c10073b4e91ab24fa92225253b2da895173"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ1NzY4Mg==", "bodyText": "I think it is mixed, depends which class you look at e.g. quickfix.mina.SingleThreadedEventHandlingStrategy#blockInThread. If you keep + I will not complain.", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r400457682", "createdAt": "2020-03-30T19:59:55Z", "author": {"login": "the-thing"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +59,26 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        if (useSNI) {\r\n+            IoSession session = parent.getSession();\r\n+            SocketAddress remoteAddress = session.getRemoteAddress();\r\n+\r\n+            if (remoteAddress instanceof InetSocketAddress) {\r\n+                // activate the SNI support in the JSSE SSLEngine\r\n+                log.info(\"activating TLS SNI support for peer address: \" + remoteAddress);\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0OTIwNA=="}, "originalCommit": {"oid": "acf00c10073b4e91ab24fa92225253b2da895173"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ2NzUwOQ==", "bodyText": "Changed.", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r400467509", "createdAt": "2020-03-30T20:17:52Z", "author": {"login": "youurayy"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +59,26 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        if (useSNI) {\r\n+            IoSession session = parent.getSession();\r\n+            SocketAddress remoteAddress = session.getRemoteAddress();\r\n+\r\n+            if (remoteAddress instanceof InetSocketAddress) {\r\n+                // activate the SNI support in the JSSE SSLEngine\r\n+                log.info(\"activating TLS SNI support for peer address: \" + remoteAddress);\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0OTIwNA=="}, "originalCommit": {"oid": "acf00c10073b4e91ab24fa92225253b2da895173"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MzMxMjg4OnYy", "diffSide": "RIGHT", "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxOTo0NDozNlrOF95fdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDoyMDozOVrOF96sUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0OTM5OA==", "bodyText": "This can be combined with  below if statement.", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r400449398", "createdAt": "2020-03-30T19:44:36Z", "author": {"login": "the-thing"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +59,26 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        if (useSNI) {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "acf00c10073b4e91ab24fa92225253b2da895173"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ1Mjg3Mw==", "bodyText": "Yes it can, but it will diminish the clarity of intent.", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r400452873", "createdAt": "2020-03-30T19:51:04Z", "author": {"login": "youurayy"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +59,26 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        if (useSNI) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0OTM5OA=="}, "originalCommit": {"oid": "acf00c10073b4e91ab24fa92225253b2da895173"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ2MDc1NQ==", "bodyText": "I mean, the check on the enabling parameter is at a different \"logical level\" than the safety instanceof check, and mixing them may confuse code readers due to this. I can change if you insist.", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r400460755", "createdAt": "2020-03-30T20:05:32Z", "author": {"login": "youurayy"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +59,26 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        if (useSNI) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0OTM5OA=="}, "originalCommit": {"oid": "acf00c10073b4e91ab24fa92225253b2da895173"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ2NDcxNA==", "bodyText": "also, the remoteAddress local variable is introduced is introduced within the if (useSNI) { block, so to have it participate in the top-most condition would require a hacky style, e.g. if (useSNI && ((remoteAddress = session.getRemoteAddress()) instanceof InetSocketAddress)) {.\nSimilarly for the session local variable.", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r400464714", "createdAt": "2020-03-30T20:12:50Z", "author": {"login": "youurayy"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +59,26 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        if (useSNI) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0OTM5OA=="}, "originalCommit": {"oid": "acf00c10073b4e91ab24fa92225253b2da895173"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ2OTA3Mg==", "bodyText": "I see the address. Keep it then.", "url": "https://github.com/quickfix-j/quickfixj/pull/277#discussion_r400469072", "createdAt": "2020-03-30T20:20:39Z", "author": {"login": "the-thing"}, "path": "quickfixj-core/src/main/java/quickfix/mina/ssl/SSLFilter.java", "diffHunk": "@@ -49,4 +59,26 @@ public void setEnabledCipherSuites(String[] cipherSuites) {\n     public void setCipherSuites(String[] cipherSuites) {\r\n         super.setEnabledCipherSuites(cipherSuites);\r\n     }\r\n+\r\n+    @Override\r\n+    public void onPreAdd(IoFilterChain parent, String name, NextFilter nextFilter)\r\n+        throws SSLException {\r\n+\r\n+        if (useSNI) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0OTM5OA=="}, "originalCommit": {"oid": "acf00c10073b4e91ab24fa92225253b2da895173"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2108, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}