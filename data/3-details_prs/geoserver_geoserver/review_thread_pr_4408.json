{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MDY0NDY4", "number": 4408, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMDo0MTowOVrOEeQJZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMDo0MTowOVrOEeQJZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMTU3Mjg3OnYy", "diffSide": "RIGHT", "path": "src/wfs/src/main/java/org/geoserver/wfs/GetFeature.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMDo0MTowOVrOHJzZKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQwNToxOTo1OVrOHKjU5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA0MTI1Nw==", "bodyText": "Won't this go NPE if otherSrsStr is null? Unless configured it will be missing and thus null no?", "url": "https://github.com/geoserver/geoserver/pull/4408#discussion_r480041257", "createdAt": "2020-08-31T10:41:09Z", "author": {"login": "aaime"}, "path": "src/wfs/src/main/java/org/geoserver/wfs/GetFeature.java", "diffHunk": "@@ -589,20 +590,29 @@ public FeatureCollectionResponse run(GetFeatureRequest request) throws WFSExcept\n                                         .getConnectionParameters()\n                                         .get(WFSDataStoreFactory.USEDEFAULTSRS.key)\n                                         .toString())) {\n-                            String otherSRS =\n-                                    (String) meta.getMetadata().get(FeatureTypeInfo.OTHER_SRS);\n+\n                             if (query.getSrsName() != null) {\n-                                if (otherSRS.contains(query.getSrsName().toString())) {\n-                                    if (hints == null) hints = new Hints();\n-                                    try {\n-                                        hints.put(\n-                                                ResourcePool.MAP_CRS,\n-                                                CRS.decode(query.getSrsName().toString()));\n-                                    } catch (NoSuchAuthorityCodeException ne) {\n-                                        LOGGER.log(Level.SEVERE, ne.getMessage(), ne);\n-                                    } catch (FactoryException e) {\n-                                        LOGGER.log(Level.SEVERE, e.getMessage(), e);\n+                                String otherSrsStr =\n+                                        (String) meta.getMetadata().get(FeatureTypeInfo.OTHER_SRS);\n+                                // create list of other srs\n+                                List<String> otherSRSList = Arrays.asList(otherSrsStr.split(\",\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6cc1f8f46c6648831b31ad86e26bcbed92c4b6ad"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDgyNjU5Ng==", "bodyText": "@aaime\nPlease see line 585, this block will not execute if otherSrsStr is NULL in first place.", "url": "https://github.com/geoserver/geoserver/pull/4408#discussion_r480826596", "createdAt": "2020-09-01T05:19:59Z", "author": {"login": "imranrajjad"}, "path": "src/wfs/src/main/java/org/geoserver/wfs/GetFeature.java", "diffHunk": "@@ -589,20 +590,29 @@ public FeatureCollectionResponse run(GetFeatureRequest request) throws WFSExcept\n                                         .getConnectionParameters()\n                                         .get(WFSDataStoreFactory.USEDEFAULTSRS.key)\n                                         .toString())) {\n-                            String otherSRS =\n-                                    (String) meta.getMetadata().get(FeatureTypeInfo.OTHER_SRS);\n+\n                             if (query.getSrsName() != null) {\n-                                if (otherSRS.contains(query.getSrsName().toString())) {\n-                                    if (hints == null) hints = new Hints();\n-                                    try {\n-                                        hints.put(\n-                                                ResourcePool.MAP_CRS,\n-                                                CRS.decode(query.getSrsName().toString()));\n-                                    } catch (NoSuchAuthorityCodeException ne) {\n-                                        LOGGER.log(Level.SEVERE, ne.getMessage(), ne);\n-                                    } catch (FactoryException e) {\n-                                        LOGGER.log(Level.SEVERE, e.getMessage(), e);\n+                                String otherSrsStr =\n+                                        (String) meta.getMetadata().get(FeatureTypeInfo.OTHER_SRS);\n+                                // create list of other srs\n+                                List<String> otherSRSList = Arrays.asList(otherSrsStr.split(\",\"));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA0MTI1Nw=="}, "originalCommit": {"oid": "6cc1f8f46c6648831b31ad86e26bcbed92c4b6ad"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3927, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}