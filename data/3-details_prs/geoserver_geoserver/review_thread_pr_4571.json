{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxODcxNDQ1", "number": 4571, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMTowOTozN1rOE5zrfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyOToyOVrOE8RIgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MDUxMDA1OnYy", "diffSide": "RIGHT", "path": "src/community/ogcapi/ogcapi-core/src/main/java/org/geoserver/api/APIFilterParser.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMTowOTozN1rOH0gbhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODoyMzozMFrOH4aBzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxOTMzNA==", "bodyText": "Not part of the change, but liters doesn't make sense in this sentence. Maybe geometry reference?", "url": "https://github.com/geoserver/geoserver/pull/4571#discussion_r524819334", "createdAt": "2020-11-17T01:09:37Z", "author": {"login": "bradh"}, "path": "src/community/ogcapi/ogcapi-core/src/main/java/org/geoserver/api/APIFilterParser.java", "diffHunk": "@@ -17,35 +19,53 @@\n \n     private static final FilterFactory2 FF = CommonFactoryFinder.getFilterFactory2();\n     public static String CQL_TEXT = \"cql-text\";\n+    public static String CQL_OBJECT = \"cql-object\";\n \n     /**\n-     * Parses the filter over the supported filter languages (right now, only {@link #CQL_TEXT}) and\n-     * defaults the geometry liters in spatial filters to CRS84\n+     * Parses the filter over the supported filter languages (right now, only {@link #CQL_TEXT} and\n+     * {@link #CQL_OBJECT}) and defaults the geometry liters in spatial filters to CRS84", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ede5675601da8415379afc6418a4dd7431e53211"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4NTg1NQ==", "bodyText": "It's a typo, was supposed to be literals.", "url": "https://github.com/geoserver/geoserver/pull/4571#discussion_r528785855", "createdAt": "2020-11-23T15:28:01Z", "author": {"login": "aaime"}, "path": "src/community/ogcapi/ogcapi-core/src/main/java/org/geoserver/api/APIFilterParser.java", "diffHunk": "@@ -17,35 +19,53 @@\n \n     private static final FilterFactory2 FF = CommonFactoryFinder.getFilterFactory2();\n     public static String CQL_TEXT = \"cql-text\";\n+    public static String CQL_OBJECT = \"cql-object\";\n \n     /**\n-     * Parses the filter over the supported filter languages (right now, only {@link #CQL_TEXT}) and\n-     * defaults the geometry liters in spatial filters to CRS84\n+     * Parses the filter over the supported filter languages (right now, only {@link #CQL_TEXT} and\n+     * {@link #CQL_OBJECT}) and defaults the geometry liters in spatial filters to CRS84", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxOTMzNA=="}, "originalCommit": {"oid": "ede5675601da8415379afc6418a4dd7431e53211"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkwODc0OQ==", "bodyText": "fixed", "url": "https://github.com/geoserver/geoserver/pull/4571#discussion_r528908749", "createdAt": "2020-11-23T18:23:30Z", "author": {"login": "turingtestfail"}, "path": "src/community/ogcapi/ogcapi-core/src/main/java/org/geoserver/api/APIFilterParser.java", "diffHunk": "@@ -17,35 +19,53 @@\n \n     private static final FilterFactory2 FF = CommonFactoryFinder.getFilterFactory2();\n     public static String CQL_TEXT = \"cql-text\";\n+    public static String CQL_OBJECT = \"cql-object\";\n \n     /**\n-     * Parses the filter over the supported filter languages (right now, only {@link #CQL_TEXT}) and\n-     * defaults the geometry liters in spatial filters to CRS84\n+     * Parses the filter over the supported filter languages (right now, only {@link #CQL_TEXT} and\n+     * {@link #CQL_OBJECT}) and defaults the geometry liters in spatial filters to CRS84", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxOTMzNA=="}, "originalCommit": {"oid": "ede5675601da8415379afc6418a4dd7431e53211"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MDUxMTIzOnYy", "diffSide": "RIGHT", "path": "src/community/ogcapi/ogcapi-core/src/main/java/org/geoserver/api/APIFilterParser.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMToxMDowNlrOH0gcJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODoyMzozN1rOH4aCEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxOTQ5Mw==", "bodyText": "is -> are?", "url": "https://github.com/geoserver/geoserver/pull/4571#discussion_r524819493", "createdAt": "2020-11-17T01:10:06Z", "author": {"login": "bradh"}, "path": "src/community/ogcapi/ogcapi-core/src/main/java/org/geoserver/api/APIFilterParser.java", "diffHunk": "@@ -17,35 +19,53 @@\n \n     private static final FilterFactory2 FF = CommonFactoryFinder.getFilterFactory2();\n     public static String CQL_TEXT = \"cql-text\";\n+    public static String CQL_OBJECT = \"cql-object\";\n \n     /**\n-     * Parses the filter over the supported filter languages (right now, only {@link #CQL_TEXT}) and\n-     * defaults the geometry liters in spatial filters to CRS84\n+     * Parses the filter over the supported filter languages (right now, only {@link #CQL_TEXT} and\n+     * {@link #CQL_OBJECT}) and defaults the geometry liters in spatial filters to CRS84\n      */\n     public Filter parse(String filter, String filterLang) {\n         if (filter == null) {\n             return null;\n         }\n \n-        // right now there is a spec only for cql-text, will be extended when more languages are\n+        // right now there is a spec only for cql-text and cql-object, will be extended when more\n+        // languages are\n         // recognized (could have its own extension point too, if we want to allow easy extension\n         // with new custom languages)\n-        if (filterLang != null && !filterLang.equals(CQL_TEXT)) {\n+        if (filterLang != null\n+                && (!filterLang.equals(CQL_TEXT) && !filterLang.equals(CQL_OBJECT))) {\n             throw new InvalidParameterValueException(\n-                    \"Only supported filter-lang at the moment is \"\n+                    \"Only supported filter-lang options at the moment is \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ede5675601da8415379afc6418a4dd7431e53211"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkwODgxOA==", "bodyText": "fixed", "url": "https://github.com/geoserver/geoserver/pull/4571#discussion_r528908818", "createdAt": "2020-11-23T18:23:37Z", "author": {"login": "turingtestfail"}, "path": "src/community/ogcapi/ogcapi-core/src/main/java/org/geoserver/api/APIFilterParser.java", "diffHunk": "@@ -17,35 +19,53 @@\n \n     private static final FilterFactory2 FF = CommonFactoryFinder.getFilterFactory2();\n     public static String CQL_TEXT = \"cql-text\";\n+    public static String CQL_OBJECT = \"cql-object\";\n \n     /**\n-     * Parses the filter over the supported filter languages (right now, only {@link #CQL_TEXT}) and\n-     * defaults the geometry liters in spatial filters to CRS84\n+     * Parses the filter over the supported filter languages (right now, only {@link #CQL_TEXT} and\n+     * {@link #CQL_OBJECT}) and defaults the geometry liters in spatial filters to CRS84\n      */\n     public Filter parse(String filter, String filterLang) {\n         if (filter == null) {\n             return null;\n         }\n \n-        // right now there is a spec only for cql-text, will be extended when more languages are\n+        // right now there is a spec only for cql-text and cql-object, will be extended when more\n+        // languages are\n         // recognized (could have its own extension point too, if we want to allow easy extension\n         // with new custom languages)\n-        if (filterLang != null && !filterLang.equals(CQL_TEXT)) {\n+        if (filterLang != null\n+                && (!filterLang.equals(CQL_TEXT) && !filterLang.equals(CQL_OBJECT))) {\n             throw new InvalidParameterValueException(\n-                    \"Only supported filter-lang at the moment is \"\n+                    \"Only supported filter-lang options at the moment is \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxOTQ5Mw=="}, "originalCommit": {"oid": "ede5675601da8415379afc6418a4dd7431e53211"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjI5ODU3OnYy", "diffSide": "RIGHT", "path": "src/community/ogcapi/ogcapi-core/src/main/java/org/geoserver/api/APIFilterParser.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyNzozNlrOH4SgmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODoyMzo0NVrOH4aCWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4NTU2MA==", "bodyText": "According to spec, should be \"cql-json\":\nhttps://github.com/opengeospatial/ogcapi-features/blob/master/extensions/cql/standard/clause_6_filter.adoc#parameter-filter-lang\nLooks like", "url": "https://github.com/geoserver/geoserver/pull/4571#discussion_r528785560", "createdAt": "2020-11-23T15:27:36Z", "author": {"login": "aaime"}, "path": "src/community/ogcapi/ogcapi-core/src/main/java/org/geoserver/api/APIFilterParser.java", "diffHunk": "@@ -17,35 +19,53 @@\n \n     private static final FilterFactory2 FF = CommonFactoryFinder.getFilterFactory2();\n     public static String CQL_TEXT = \"cql-text\";\n+    public static String CQL_OBJECT = \"cql-object\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ede5675601da8415379afc6418a4dd7431e53211"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkwODg5MA==", "bodyText": "fixed", "url": "https://github.com/geoserver/geoserver/pull/4571#discussion_r528908890", "createdAt": "2020-11-23T18:23:45Z", "author": {"login": "turingtestfail"}, "path": "src/community/ogcapi/ogcapi-core/src/main/java/org/geoserver/api/APIFilterParser.java", "diffHunk": "@@ -17,35 +19,53 @@\n \n     private static final FilterFactory2 FF = CommonFactoryFinder.getFilterFactory2();\n     public static String CQL_TEXT = \"cql-text\";\n+    public static String CQL_OBJECT = \"cql-object\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4NTU2MA=="}, "originalCommit": {"oid": "ede5675601da8415379afc6418a4dd7431e53211"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxNjMwNzIzOnYy", "diffSide": "RIGHT", "path": "src/community/ogcapi/dggs/dggs-clickhouse/src/test/java/org/geotools/dggs/clickhouse/ClickHouseGeometrylessOnlineTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxNToyOToyOVrOH4SmJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QxODoyMzo1NVrOH4aCpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4Njk4MQ==", "bodyText": "This part conflicts with master, cannot merge because of it.", "url": "https://github.com/geoserver/geoserver/pull/4571#discussion_r528786981", "createdAt": "2020-11-23T15:29:29Z", "author": {"login": "aaime"}, "path": "src/community/ogcapi/dggs/dggs-clickhouse/src/test/java/org/geotools/dggs/clickhouse/ClickHouseGeometrylessOnlineTest.java", "diffHunk": "@@ -28,7 +28,7 @@ protected JDBCGeometrylessTestSetup createTestSetup() {\n     }\n \n     protected HashMap createDataStoreFactoryParams() throws Exception {\n-        HashMap params = super.createDataStoreFactoryParams();\n+        HashMap params = new HashMap(super.createDataStoreFactoryParams());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ede5675601da8415379afc6418a4dd7431e53211"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODkwODk2NQ==", "bodyText": "fixed", "url": "https://github.com/geoserver/geoserver/pull/4571#discussion_r528908965", "createdAt": "2020-11-23T18:23:55Z", "author": {"login": "turingtestfail"}, "path": "src/community/ogcapi/dggs/dggs-clickhouse/src/test/java/org/geotools/dggs/clickhouse/ClickHouseGeometrylessOnlineTest.java", "diffHunk": "@@ -28,7 +28,7 @@ protected JDBCGeometrylessTestSetup createTestSetup() {\n     }\n \n     protected HashMap createDataStoreFactoryParams() throws Exception {\n-        HashMap params = super.createDataStoreFactoryParams();\n+        HashMap params = new HashMap(super.createDataStoreFactoryParams());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc4Njk4MQ=="}, "originalCommit": {"oid": "ede5675601da8415379afc6418a4dd7431e53211"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3849, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}