{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MTM0MTg0", "number": 4397, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMjoxNjo0MVrOEMdgUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMjoxNjo0MVrOEMdgUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxNTAxNzc5OnYy", "diffSide": "RIGHT", "path": "src/web/core/src/main/java/org/geoserver/web/wicket/CRSPanel.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMjoxNjo0MVrOGulSqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxMzo0MDo0MlrOGuokfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng==", "bodyText": "This looks messy, the text field now returns ids prefixed in some cases, but not in others? Can always you return the srs  with a prefix instead of duplicating prefixing logic around?", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451498666", "createdAt": "2020-07-08T12:16:41Z", "author": {"login": "aaime"}, "path": "src/web/core/src/main/java/org/geoserver/web/wicket/CRSPanel.java", "diffHunk": "@@ -267,6 +268,11 @@ String toSRS(CoordinateReferenceSystem crs) {\n         try {\n             if (crs != null) {\n                 Integer epsgCode = CRS.lookupEpsgCode(crs, false);\n+                String srs = srsTextField.getModelObject();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "428892d4fecc901cfc6534c48bafd5ac3601f6b7"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTUyODUyMA==", "bodyText": "If I understood correctly, I should always return \"EPSG:XXXX\" even if it was initially an URN OGC?", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451528520", "createdAt": "2020-07-08T13:05:23Z", "author": {"login": "imranrajjad"}, "path": "src/web/core/src/main/java/org/geoserver/web/wicket/CRSPanel.java", "diffHunk": "@@ -267,6 +268,11 @@ String toSRS(CoordinateReferenceSystem crs) {\n         try {\n             if (crs != null) {\n                 Integer epsgCode = CRS.lookupEpsgCode(crs, false);\n+                String srs = srsTextField.getModelObject();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng=="}, "originalCommit": {"oid": "428892d4fecc901cfc6534c48bafd5ac3601f6b7"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU0NDk0Mw==", "bodyText": "No, I just mean it would seem better if the text field either contained \"EPSG:XYZW\" or \"urn.....::XYZW\" but not just \"XYZW\", the prefixing logic I'm seeing seems to be caring for the last case.", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451544943", "createdAt": "2020-07-08T13:29:46Z", "author": {"login": "aaime"}, "path": "src/web/core/src/main/java/org/geoserver/web/wicket/CRSPanel.java", "diffHunk": "@@ -267,6 +268,11 @@ String toSRS(CoordinateReferenceSystem crs) {\n         try {\n             if (crs != null) {\n                 Integer epsgCode = CRS.lookupEpsgCode(crs, false);\n+                String srs = srsTextField.getModelObject();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng=="}, "originalCommit": {"oid": "428892d4fecc901cfc6534c48bafd5ac3601f6b7"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU1MDIyNA==", "bodyText": "ok now I understood, so if its not a URN , we simply return the srs string if it is already prefixed with EPSG:", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451550224", "createdAt": "2020-07-08T13:37:38Z", "author": {"login": "imranrajjad"}, "path": "src/web/core/src/main/java/org/geoserver/web/wicket/CRSPanel.java", "diffHunk": "@@ -267,6 +268,11 @@ String toSRS(CoordinateReferenceSystem crs) {\n         try {\n             if (crs != null) {\n                 Integer epsgCode = CRS.lookupEpsgCode(crs, false);\n+                String srs = srsTextField.getModelObject();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng=="}, "originalCommit": {"oid": "428892d4fecc901cfc6534c48bafd5ac3601f6b7"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU1MTA2Mw==", "bodyText": "so the condition\nsrs != null && srs.startsWith(BasicResourceConfig.URN_OGC_PREFIX)\nwill become\nsrs != null && (srs.startsWith(BasicResourceConfig.URN_OGC_PREFIX) || srs.startsWith(\"EPSG:\"))", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451551063", "createdAt": "2020-07-08T13:38:51Z", "author": {"login": "imranrajjad"}, "path": "src/web/core/src/main/java/org/geoserver/web/wicket/CRSPanel.java", "diffHunk": "@@ -267,6 +268,11 @@ String toSRS(CoordinateReferenceSystem crs) {\n         try {\n             if (crs != null) {\n                 Integer epsgCode = CRS.lookupEpsgCode(crs, false);\n+                String srs = srsTextField.getModelObject();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng=="}, "originalCommit": {"oid": "428892d4fecc901cfc6534c48bafd5ac3601f6b7"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU1MjM4Mw==", "bodyText": "Yep. Uniform handling for the two cases (including a dedicated constant for the \"EPSG\" prefix):", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451552383", "createdAt": "2020-07-08T13:40:42Z", "author": {"login": "aaime"}, "path": "src/web/core/src/main/java/org/geoserver/web/wicket/CRSPanel.java", "diffHunk": "@@ -267,6 +268,11 @@ String toSRS(CoordinateReferenceSystem crs) {\n         try {\n             if (crs != null) {\n                 Integer epsgCode = CRS.lookupEpsgCode(crs, false);\n+                String srs = srsTextField.getModelObject();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng=="}, "originalCommit": {"oid": "428892d4fecc901cfc6534c48bafd5ac3601f6b7"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3923, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}