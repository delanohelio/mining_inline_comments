{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MzY0MTI5", "number": 4449, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNDozNjowMlrOEWPWlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxOToyNjowMlrOEXWc2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNzU1NjcxOnYy", "diffSide": "RIGHT", "path": "src/community/jdbcconfig/src/main/java/org/geoserver/jdbcconfig/internal/ConfigDatabase.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNDozNjowMlrOG9cWwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODoyNzowMVrOHEOEiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4MDg5OA==", "bodyText": "Is it correct to remove the \" - 1\" here?  If localPropertyName is \"a.b.c.d\", then the backPropName values should be \"a.b.c\", \"a.b\" and \"a\".", "url": "https://github.com/geoserver/geoserver/pull/4449#discussion_r467080898", "createdAt": "2020-08-07T14:36:02Z", "author": {"login": "sikeoka"}, "path": "src/community/jdbcconfig/src/main/java/org/geoserver/jdbcconfig/internal/ConfigDatabase.java", "diffHunk": "@@ -677,8 +677,8 @@ private Info lookUpRelatedObject(\n         String[] steps = localPropertyName.split(\"\\\\.\");\n         // Step back through ancestor property references If starting at a.b.c.d, then look at\n         // a.b.c, then a.b, then a\n-        for (int i = steps.length - 1; i >= 0; i--) {\n-            String backPropName = Strings.join(\".\", Arrays.copyOfRange(steps, 0, i));\n+        for (int len = steps.length; len > 0; len--) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03858d5ca2f481dacb79bd68539217c2b7479bc4"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI0MTMyMw==", "bodyText": "Hey, as far as I can see, it's doing exactly the same than before:\nInstead of\nString backPropName = Strings.join(\".\", Arrays.copyOfRange(steps, 0, i));\nit does:\nString backPropName = Arrays.stream(steps).limit(len).collect(Collectors.joining(\".\"));\nThe key being Stream.limit(), which for the left-most step must be 1, not 0.", "url": "https://github.com/geoserver/geoserver/pull/4449#discussion_r468241323", "createdAt": "2020-08-10T23:31:26Z", "author": {"login": "groldan"}, "path": "src/community/jdbcconfig/src/main/java/org/geoserver/jdbcconfig/internal/ConfigDatabase.java", "diffHunk": "@@ -677,8 +677,8 @@ private Info lookUpRelatedObject(\n         String[] steps = localPropertyName.split(\"\\\\.\");\n         // Step back through ancestor property references If starting at a.b.c.d, then look at\n         // a.b.c, then a.b, then a\n-        for (int i = steps.length - 1; i >= 0; i--) {\n-            String backPropName = Strings.join(\".\", Arrays.copyOfRange(steps, 0, i));\n+        for (int len = steps.length; len > 0; len--) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4MDg5OA=="}, "originalCommit": {"oid": "03858d5ca2f481dacb79bd68539217c2b7479bc4"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgwNTM2MQ==", "bodyText": "Running the old code on \"a.b.c.d\" would get [ \"a.b.c\", \"a.b\", \"a\", \"\" ] while your code gets [ \"a.b.c.d\", \"a.b.c\", \"a.b\", \"a\" ].  The empty string in the old code is useless and shouldn't be there.  Adding back the \"- 1\" to your changes gets the desired result of [ \"a.b.c\", \"a.b\", \"a\" ].", "url": "https://github.com/geoserver/geoserver/pull/4449#discussion_r468805361", "createdAt": "2020-08-11T19:10:36Z", "author": {"login": "sikeoka"}, "path": "src/community/jdbcconfig/src/main/java/org/geoserver/jdbcconfig/internal/ConfigDatabase.java", "diffHunk": "@@ -677,8 +677,8 @@ private Info lookUpRelatedObject(\n         String[] steps = localPropertyName.split(\"\\\\.\");\n         // Step back through ancestor property references If starting at a.b.c.d, then look at\n         // a.b.c, then a.b, then a\n-        for (int i = steps.length - 1; i >= 0; i--) {\n-            String backPropName = Strings.join(\".\", Arrays.copyOfRange(steps, 0, i));\n+        for (int len = steps.length; len > 0; len--) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4MDg5OA=="}, "originalCommit": {"oid": "03858d5ca2f481dacb79bd68539217c2b7479bc4"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4Njg4OQ==", "bodyText": "you're correct. Should be fixed now, thanks.", "url": "https://github.com/geoserver/geoserver/pull/4449#discussion_r474186889", "createdAt": "2020-08-20T18:27:01Z", "author": {"login": "groldan"}, "path": "src/community/jdbcconfig/src/main/java/org/geoserver/jdbcconfig/internal/ConfigDatabase.java", "diffHunk": "@@ -677,8 +677,8 @@ private Info lookUpRelatedObject(\n         String[] steps = localPropertyName.split(\"\\\\.\");\n         // Step back through ancestor property references If starting at a.b.c.d, then look at\n         // a.b.c, then a.b, then a\n-        for (int i = steps.length - 1; i >= 0; i--) {\n-            String backPropName = Strings.join(\".\", Arrays.copyOfRange(steps, 0, i));\n+        for (int len = steps.length; len > 0; len--) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4MDg5OA=="}, "originalCommit": {"oid": "03858d5ca2f481dacb79bd68539217c2b7479bc4"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyOTIwNTM5OnYy", "diffSide": "LEFT", "path": "src/community/jdbcconfig/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxOToyNjowMlrOG_GG5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODoyOTo0N1rOHEOKng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgxMzU0MQ==", "bodyText": "This isn't really relevant to this PR but if you are going to remove the dependency in the pom, you should also remove it from the release assembly:\nhttps://github.com/geoserver/geoserver/blob/master/src/community/release/ext-jdbcconfig.xml#L13", "url": "https://github.com/geoserver/geoserver/pull/4449#discussion_r468813541", "createdAt": "2020-08-11T19:26:02Z", "author": {"login": "sikeoka"}, "path": "src/community/jdbcconfig/pom.xml", "diffHunk": "@@ -54,11 +54,6 @@\n       <groupId>org.apache.commons</groupId>\n       <artifactId>commons-lang3</artifactId>\n     </dependency>\n-    <dependency>\n-      <!-- blazing fast LZW compression/decompression -->\n-      <groupId>com.ning</groupId>\n-      <artifactId>compress-lzf</artifactId>\n-    </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "134062c29fd637806d7667d02d3cefb68753e6eb"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4ODQ0Ng==", "bodyText": "good catch. Amended the commits to have both changes.", "url": "https://github.com/geoserver/geoserver/pull/4449#discussion_r474188446", "createdAt": "2020-08-20T18:29:47Z", "author": {"login": "groldan"}, "path": "src/community/jdbcconfig/pom.xml", "diffHunk": "@@ -54,11 +54,6 @@\n       <groupId>org.apache.commons</groupId>\n       <artifactId>commons-lang3</artifactId>\n     </dependency>\n-    <dependency>\n-      <!-- blazing fast LZW compression/decompression -->\n-      <groupId>com.ning</groupId>\n-      <artifactId>compress-lzf</artifactId>\n-    </dependency>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgxMzU0MQ=="}, "originalCommit": {"oid": "134062c29fd637806d7667d02d3cefb68753e6eb"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3891, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}