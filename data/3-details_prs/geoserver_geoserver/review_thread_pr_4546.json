{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4ODM5Mjk5", "number": 4546, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowMTo1OFrOEx_-WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowNjo1MlrOEyAGpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODYzODMyOnYy", "diffSide": "RIGHT", "path": "doc/en/user/source/geowebcache/webadmin/defaults.rst", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowMTo1OFrOHoZiiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODozMTowNVrOHowZ2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyMzUyOQ==", "bodyText": "Nice to see docs! Maybe an update to the screenshot above would help too.", "url": "https://github.com/geoserver/geoserver/pull/4546#discussion_r512123529", "createdAt": "2020-10-26T17:01:58Z", "author": {"login": "aaime"}, "path": "doc/en/user/source/geowebcache/webadmin/defaults.rst", "diffHunk": "@@ -31,6 +31,11 @@ With direct integration, tile caching is enabled for all standard WMS requests t\n \r\n This setting is disabled by default. When enabling this option, it is a good idea to also turn on :ref:`gwc_webadmin_diskquotas` as well, to prevent unbounded growth of the stored tiles.\r\n \r\n+Explicitly require TILED Parameter\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8de109781b3b5e18455e07e0a6b4e5bff2802d04"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ5ODEzNg==", "bodyText": "I have updated that image", "url": "https://github.com/geoserver/geoserver/pull/4546#discussion_r512498136", "createdAt": "2020-10-27T08:31:05Z", "author": {"login": "ianturton"}, "path": "doc/en/user/source/geowebcache/webadmin/defaults.rst", "diffHunk": "@@ -31,6 +31,11 @@ With direct integration, tile caching is enabled for all standard WMS requests t\n \r\n This setting is disabled by default. When enabling this option, it is a good idea to also turn on :ref:`gwc_webadmin_diskquotas` as well, to prevent unbounded growth of the stored tiles.\r\n \r\n+Explicitly require TILED Parameter\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyMzUyOQ=="}, "originalCommit": {"oid": "8de109781b3b5e18455e07e0a6b4e5bff2802d04"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODY0MDI5OnYy", "diffSide": "RIGHT", "path": "doc/en/user/source/geowebcache/webadmin/defaults.rst", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowMjoyNVrOHoZj1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowMjoyNVrOHoZj1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyMzg2Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When this parameter is checked direct integration requires that the ``tiled=true`` parameter be set in all requests that will be cached. If this parameter is unchecked all incoming requests will be considered for caching, the request must still conform to all required parameters.\n          \n          \n            \n            When this parameter is checked direct WMS integration requires that the ``tiled=true`` parameter be set in all requests that will be cached. If this parameter is unchecked all incoming requests will be considered for caching, the request must still conform to all required parameters.", "url": "https://github.com/geoserver/geoserver/pull/4546#discussion_r512123862", "createdAt": "2020-10-26T17:02:25Z", "author": {"login": "aaime"}, "path": "doc/en/user/source/geowebcache/webadmin/defaults.rst", "diffHunk": "@@ -31,6 +31,11 @@ With direct integration, tile caching is enabled for all standard WMS requests t\n \r\n This setting is disabled by default. When enabling this option, it is a good idea to also turn on :ref:`gwc_webadmin_diskquotas` as well, to prevent unbounded growth of the stored tiles.\r\n \r\n+Explicitly require TILED Parameter\r\n+``````````````````````````````````\r\n+When this parameter is checked direct integration requires that the ``tiled=true`` parameter be set in all requests that will be cached. If this parameter is unchecked all incoming requests will be considered for caching, the request must still conform to all required parameters.\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8de109781b3b5e18455e07e0a6b4e5bff2802d04"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODY0ODM2OnYy", "diffSide": "RIGHT", "path": "src/gwc/src/main/java/org/geoserver/gwc/config/GWCConfig.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowNDoxM1rOHoZopQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowNDoxM1rOHoZopQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyNTA5Mw==", "bodyText": "Wondering, is this object stored using XStream? I have vague memories that XStream dodges the normal construction mechanism and ends up ignoring field initializers too. I would give it a look.\nBelieve that normally we use Boolean object wrapper, and in the getter, if null, return the desired default value... at least, that's what we do for CatalogInfo objects :-D", "url": "https://github.com/geoserver/geoserver/pull/4546#discussion_r512125093", "createdAt": "2020-10-26T17:04:13Z", "author": {"login": "aaime"}, "path": "src/gwc/src/main/java/org/geoserver/gwc/config/GWCConfig.java", "diffHunk": "@@ -28,6 +28,8 @@\n \n     private boolean directWMSIntegrationEnabled;\n \n+    private boolean requireTiledParameter = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8de109781b3b5e18455e07e0a6b4e5bff2802d04"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODY1MzIxOnYy", "diffSide": "RIGHT", "path": "src/gwc/src/test/java/org/geoserver/gwc/wms/CachingExtendedCapabilitiesProviderTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowNToyMFrOHoZrnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowNToyMFrOHoZrnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyNTg1Mg==", "bodyText": "Leftover print?", "url": "https://github.com/geoserver/geoserver/pull/4546#discussion_r512125852", "createdAt": "2020-10-26T17:05:20Z", "author": {"login": "aaime"}, "path": "src/gwc/src/test/java/org/geoserver/gwc/wms/CachingExtendedCapabilitiesProviderTest.java", "diffHunk": "@@ -122,6 +122,24 @@ public void testTileSets() throws Exception {\n         assertXpathExists(tileSetPath + \"[1]/Format\", dom);\n         assertXpathExists(tileSetPath + \"[1]/Layers\", dom);\n         assertXpathExists(tileSetPath + \"[1]/Styles\", dom);\n+\n+        // Test RequireTiledParameter==false\n+        GWC.get().getConfig().setDirectWMSIntegrationEnabled(true);\n+        GWC.get().getConfig().setRequireTiledParameter(false);\n+        dom = dom(get(\"wms?request=getCapabilities&version=1.1.1\"), false);\n+        print(dom);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8de109781b3b5e18455e07e0a6b4e5bff2802d04"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODY1NzU0OnYy", "diffSide": "RIGHT", "path": "src/gwc/src/test/java/org/geoserver/gwc/wms/CachingExtendedCapabilitiesProviderTest.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowNjoyMVrOHoZuPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODo1OTo1OVrOHoxhMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyNjUyNw==", "bodyText": "Confused, if the new setting affecting capabilities results at all?", "url": "https://github.com/geoserver/geoserver/pull/4546#discussion_r512126527", "createdAt": "2020-10-26T17:06:21Z", "author": {"login": "aaime"}, "path": "src/gwc/src/test/java/org/geoserver/gwc/wms/CachingExtendedCapabilitiesProviderTest.java", "diffHunk": "@@ -122,6 +122,24 @@ public void testTileSets() throws Exception {\n         assertXpathExists(tileSetPath + \"[1]/Format\", dom);\n         assertXpathExists(tileSetPath + \"[1]/Layers\", dom);\n         assertXpathExists(tileSetPath + \"[1]/Styles\", dom);\n+\n+        // Test RequireTiledParameter==false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8de109781b3b5e18455e07e0a6b4e5bff2802d04"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUwMDI4NQ==", "bodyText": "Direct Integration makes changes by adding in TileSets if tiled=true is sent, so I matched that. I suspect that no one actually uses that feature as it would need hand coding on the client side, but it seemed safest to match the existing behaviour", "url": "https://github.com/geoserver/geoserver/pull/4546#discussion_r512500285", "createdAt": "2020-10-27T08:34:38Z", "author": {"login": "ianturton"}, "path": "src/gwc/src/test/java/org/geoserver/gwc/wms/CachingExtendedCapabilitiesProviderTest.java", "diffHunk": "@@ -122,6 +122,24 @@ public void testTileSets() throws Exception {\n         assertXpathExists(tileSetPath + \"[1]/Format\", dom);\n         assertXpathExists(tileSetPath + \"[1]/Layers\", dom);\n         assertXpathExists(tileSetPath + \"[1]/Styles\", dom);\n+\n+        // Test RequireTiledParameter==false", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyNjUyNw=="}, "originalCommit": {"oid": "8de109781b3b5e18455e07e0a6b4e5bff2802d04"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUxNjQwMg==", "bodyText": "Oh, I see... hum, that grows the capablities document quite a bit though. I also believe that nobody is really using that feature, the idea here is to use the cache just because clients happen to align to the grid. @simboss what do you think?", "url": "https://github.com/geoserver/geoserver/pull/4546#discussion_r512516402", "createdAt": "2020-10-27T08:59:59Z", "author": {"login": "aaime"}, "path": "src/gwc/src/test/java/org/geoserver/gwc/wms/CachingExtendedCapabilitiesProviderTest.java", "diffHunk": "@@ -122,6 +122,24 @@ public void testTileSets() throws Exception {\n         assertXpathExists(tileSetPath + \"[1]/Format\", dom);\n         assertXpathExists(tileSetPath + \"[1]/Layers\", dom);\n         assertXpathExists(tileSetPath + \"[1]/Styles\", dom);\n+\n+        // Test RequireTiledParameter==false", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyNjUyNw=="}, "originalCommit": {"oid": "8de109781b3b5e18455e07e0a6b4e5bff2802d04"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODY1OTU3OnYy", "diffSide": "RIGHT", "path": "src/web/gwc/src/main/resources/GeoServerApplication.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowNjo1MlrOHoZvjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzowNjo1MlrOHoZvjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyNjg2MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            GWCSettingsPage.requireTiledParameter.title= When set to true, explicitly require TILED Parameter, otherwise accept all requests for tiling\n          \n          \n            \n            GWCSettingsPage.requireTiledParameter.title= When set to true, explicitly require TILED Parameter, otherwise consider all requests for tile caching", "url": "https://github.com/geoserver/geoserver/pull/4546#discussion_r512126861", "createdAt": "2020-10-26T17:06:52Z", "author": {"login": "aaime"}, "path": "src/web/gwc/src/main/resources/GeoServerApplication.properties", "diffHunk": "@@ -7,6 +7,8 @@ GWC.diskQuotaLoadFailed = Loading quota store failed, the disk quota subsystem i\n GWCSettingsPage.description                = Configure the global settings for the embedded GeoWebCache\n GWCSettingsPage.enableWMSIntegration       = Enable direct integration with GeoServer WMS\n GWCSettingsPage.enableWMSIntegration.title = Allows the regular WMS to serve cached content. When this option is enabled, use tiled=true for GetCapabilities in the GeoServer WMS to include the WMS-C VendorSpecificCapabilities\n+GWCSettingsPage.requireTiledParameter      = Explicitly require TILED Parameter\n+GWCSettingsPage.requireTiledParameter.title= When set to true, explicitly require TILED Parameter, otherwise accept all requests for tiling", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8de109781b3b5e18455e07e0a6b4e5bff2802d04"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3829, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}