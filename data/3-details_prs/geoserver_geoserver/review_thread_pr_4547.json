{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5NTcxNTY2", "number": 4547, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjo1Nzo1N1rOEx_3Zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzo1Njo1MVrOEyBYmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODYyMDU1OnYy", "diffSide": "RIGHT", "path": "src/main/src/main/java/org/geoserver/system/status/MetricInfo.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjo1Nzo1N1rOHoZXcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjo1OToxOFrOHoZbIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyMDY4OA==", "bodyText": "should this just be removed from the enum?", "url": "https://github.com/geoserver/geoserver/pull/4547#discussion_r512120688", "createdAt": "2020-10-26T16:57:57Z", "author": {"login": "mprins"}, "path": "src/main/src/main/java/org/geoserver/system/status/MetricInfo.java", "diffHunk": "@@ -18,7 +18,7 @@\n     LOGICAL_CPUS(\"CPU\", 101, \"Number of logical CPUs\"),\n     RUNNING_PROCESS(\"CPU\", 102, \"Number of running process\"),\n     RUNNING_THREADS(\"CPU\", 103, \"Number of running threads\"),\n-    CPU_LOAD(\"CPU\", 104, \"CPU average load\", \"%\"),\n+    // removed from OSHI    CPU_LOAD(\"CPU\", 104, \"CPU average load\", \"%\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b74175830e6e96273690e8bece86a8be6f4fb76a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyMTYzMg==", "bodyText": "Yep please", "url": "https://github.com/geoserver/geoserver/pull/4547#discussion_r512121632", "createdAt": "2020-10-26T16:59:18Z", "author": {"login": "aaime"}, "path": "src/main/src/main/java/org/geoserver/system/status/MetricInfo.java", "diffHunk": "@@ -18,7 +18,7 @@\n     LOGICAL_CPUS(\"CPU\", 101, \"Number of logical CPUs\"),\n     RUNNING_PROCESS(\"CPU\", 102, \"Number of running process\"),\n     RUNNING_THREADS(\"CPU\", 103, \"Number of running threads\"),\n-    CPU_LOAD(\"CPU\", 104, \"CPU average load\", \"%\"),\n+    // removed from OSHI    CPU_LOAD(\"CPU\", 104, \"CPU average load\", \"%\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyMDY4OA=="}, "originalCommit": {"oid": "b74175830e6e96273690e8bece86a8be6f4fb76a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODg1NjY2OnYy", "diffSide": "RIGHT", "path": "src/main/src/main/java/org/geoserver/system/status/MetricInfo.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzo1Mzo0N1rOHobqlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzo1Mzo0N1rOHobqlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE1ODM1OQ==", "bodyText": "What was removed was OSHI tracking its own ticks here. You could keep track of the ticks yourself imilar to how you do for PER_CPU_LOAD and keep this.", "url": "https://github.com/geoserver/geoserver/pull/4547#discussion_r512158359", "createdAt": "2020-10-26T17:53:47Z", "author": {"login": "dbwiddis"}, "path": "src/main/src/main/java/org/geoserver/system/status/MetricInfo.java", "diffHunk": "@@ -18,7 +18,7 @@\n     LOGICAL_CPUS(\"CPU\", 101, \"Number of logical CPUs\"),\n     RUNNING_PROCESS(\"CPU\", 102, \"Number of running process\"),\n     RUNNING_THREADS(\"CPU\", 103, \"Number of running threads\"),\n-    CPU_LOAD(\"CPU\", 104, \"CPU average load\", \"%\"),\n+    // 104 removed from OSHI", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7025a5011f58e6b5a59724383a493632667b649c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwODg2OTM4OnYy", "diffSide": "LEFT", "path": "src/main/src/main/java/org/geoserver/system/status/OSHISystemInfoCollector.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzo1Njo1MVrOHobyUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNzo1OToxM1rOHob4YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE2MDMzNw==", "bodyText": "Rather than removing this entirely you could use an oldTicks value (like you do below on line 194 for per-CPU) and pass to the getSystemCpuLoadBetweenTicks() method.  Alternately you could duplicate the per-cpu logic and sum up the arrays to get a system average.", "url": "https://github.com/geoserver/geoserver/pull/4547#discussion_r512160337", "createdAt": "2020-10-26T17:56:51Z", "author": {"login": "dbwiddis"}, "path": "src/main/src/main/java/org/geoserver/system/status/OSHISystemInfoCollector.java", "diffHunk": "@@ -184,22 +187,11 @@ public OSHISystemInfoCollector() {\n                         si = Collections.singletonList(mv);\n                         break;\n                     }\n-                case CPU_LOAD:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7025a5011f58e6b5a59724383a493632667b649c"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE2MTg4OQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/geoserver/geoserver/pull/4547#discussion_r512161889", "createdAt": "2020-10-26T17:59:13Z", "author": {"login": "mprins"}, "path": "src/main/src/main/java/org/geoserver/system/status/OSHISystemInfoCollector.java", "diffHunk": "@@ -184,22 +187,11 @@ public OSHISystemInfoCollector() {\n                         si = Collections.singletonList(mv);\n                         break;\n                     }\n-                case CPU_LOAD:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE2MDMzNw=="}, "originalCommit": {"oid": "7025a5011f58e6b5a59724383a493632667b649c"}, "originalPosition": 79}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3832, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}