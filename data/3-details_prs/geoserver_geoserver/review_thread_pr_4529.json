{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NjE4ODUw", "number": 4529, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNjo1ODowN1rOEsfyPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNjo1ODowN1rOEsfyPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MDkzNTY0OnYy", "diffSide": "RIGHT", "path": "src/web/demo/src/main/java/org/geoserver/web/demo/PreviewLayer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNjo1ODowN1rOHfxUwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODoyMjo1NlrOHf0DLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA3NjAzMw==", "bodyText": "This looks correct, I am not sure why the previous implementation wanted to do a new layer lookup?", "url": "https://github.com/geoserver/geoserver/pull/4529#discussion_r503076033", "createdAt": "2020-10-12T06:58:07Z", "author": {"login": "jodygarnett"}, "path": "src/web/demo/src/main/java/org/geoserver/web/demo/PreviewLayer.java", "diffHunk": "@@ -339,10 +339,9 @@ private String findFeatureTypeGmlVersion(AttributeType featureType) {\n      * @param serviceName \"WFS\" or \"WMS\"\n      */\n     public boolean hasServiceSupport(String serviceName) {\n-        LayerInfo linfo = GeoServerApplication.get().getCatalog().getLayerByName(this.getName());\n-        if (linfo != null && linfo.getResource() != null && serviceName != null) {\n+        if (layerInfo != null && layerInfo.getResource() != null && serviceName != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a79e3490047db321b731a5361174dd164e65975"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEyMDY4Ng==", "bodyText": "Refactor happened last year, this bit of code was moved from another class that did not have the layerInfo field, but just the name: https://github.com/geoserver/geoserver/pull/3521/files", "url": "https://github.com/geoserver/geoserver/pull/4529#discussion_r503120686", "createdAt": "2020-10-12T08:22:56Z", "author": {"login": "aaime"}, "path": "src/web/demo/src/main/java/org/geoserver/web/demo/PreviewLayer.java", "diffHunk": "@@ -339,10 +339,9 @@ private String findFeatureTypeGmlVersion(AttributeType featureType) {\n      * @param serviceName \"WFS\" or \"WMS\"\n      */\n     public boolean hasServiceSupport(String serviceName) {\n-        LayerInfo linfo = GeoServerApplication.get().getCatalog().getLayerByName(this.getName());\n-        if (linfo != null && linfo.getResource() != null && serviceName != null) {\n+        if (layerInfo != null && layerInfo.getResource() != null && serviceName != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA3NjAzMw=="}, "originalCommit": {"oid": "1a79e3490047db321b731a5361174dd164e65975"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3820, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}