{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwMjEzODM4", "number": 4444, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNDowMTo0MlrOEUniQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNDowMTo0MlrOEUniQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMDU0NzIyOnYy", "diffSide": "RIGHT", "path": "src/community/wfs-templating/src/main/java/org/geoserver/wfstemplating/expressions/XpathFunction.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNDowMTo0MlrOG66vrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxMzo1MTowMVrOG-PbnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQzMzA2OA==", "bodyText": "A class that's both a Function and a PropertyName is, I believe, something we haven't seen before. Seems pretty similar to \"FilterFunction_property\" down in Geotools, which also allows to dynamically reference a property, and which has received special treatment to work with the various visitors correctly.\nNow, this is just an output format, so there is no data access and the many DuplicatingFilterVisitor subclasses being involved into it. If it actually adds something (namespaces for example?) then I would clearly document it as something specific to this module, that should not be used anywhere else, and point people to \"FilterFunction_property\" for general usage. As another option, the existing \"FilterFunction_property\" function could be expanded to support what's missing here.", "url": "https://github.com/geoserver/geoserver/pull/4444#discussion_r464433068", "createdAt": "2020-08-03T14:01:42Z", "author": {"login": "aaime"}, "path": "src/community/wfs-templating/src/main/java/org/geoserver/wfstemplating/expressions/XpathFunction.java", "diffHunk": "@@ -0,0 +1,67 @@\n+package org.geoserver.wfstemplating.expressions;\n+\n+import static org.geotools.filter.capability.FunctionNameImpl.parameter;\n+\n+import org.geotools.filter.AttributeExpressionImpl;\n+import org.geotools.filter.FunctionExpressionImpl;\n+import org.geotools.filter.capability.FunctionNameImpl;\n+import org.opengis.filter.capability.FunctionName;\n+import org.opengis.filter.expression.ExpressionVisitor;\n+import org.opengis.filter.expression.PropertyName;\n+import org.xml.sax.helpers.NamespaceSupport;\n+\n+public class XpathFunction extends FunctionExpressionImpl implements PropertyName {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d37604ed7506e865ebeff53cd3725daa5d62de68"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzkxNzcyNQ==", "bodyText": "@aaime thanks for your point I've updated the documentation pointing the FilterFunction_property", "url": "https://github.com/geoserver/geoserver/pull/4444#discussion_r467917725", "createdAt": "2020-08-10T13:51:01Z", "author": {"login": "taba90"}, "path": "src/community/wfs-templating/src/main/java/org/geoserver/wfstemplating/expressions/XpathFunction.java", "diffHunk": "@@ -0,0 +1,67 @@\n+package org.geoserver.wfstemplating.expressions;\n+\n+import static org.geotools.filter.capability.FunctionNameImpl.parameter;\n+\n+import org.geotools.filter.AttributeExpressionImpl;\n+import org.geotools.filter.FunctionExpressionImpl;\n+import org.geotools.filter.capability.FunctionNameImpl;\n+import org.opengis.filter.capability.FunctionName;\n+import org.opengis.filter.expression.ExpressionVisitor;\n+import org.opengis.filter.expression.PropertyName;\n+import org.xml.sax.helpers.NamespaceSupport;\n+\n+public class XpathFunction extends FunctionExpressionImpl implements PropertyName {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQzMzA2OA=="}, "originalCommit": {"oid": "d37604ed7506e865ebeff53cd3725daa5d62de68"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3888, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}