{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczODA0MTg3", "number": 6252, "title": "Fix #4374 menuButton: Add support for submenus", "bodyText": "This PR add submenus support to menuButton component. Fixes #4374\nExample (source: https://github.com/maruTA-bis5/primefaces-test/tree/menubutton-submenu)", "createdAt": "2020-08-26T10:15:41Z", "url": "https://github.com/primefaces/primefaces/pull/6252", "merged": true, "mergeCommit": {"oid": "f098f08a7392e260725a3e453631d428f41874f5"}, "closed": true, "closedAt": "2020-09-02T08:46:12Z", "author": {"login": "maruTA-bis5"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCowy3gH2gAyNDczODA0MTg3OjIwZWNmNTQ3Yzc2ZjcxOWQ5MzEwNmQ0M2NiNjkxYmYxOWVkODljMjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDAtLIgFqTQ3NjczODIxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "20ecf547c76f719d93106d43cb691bf19ed89c27", "author": {"user": {"login": "maruTA-bis5", "name": "Takayuki Maruyama"}}, "url": "https://github.com/primefaces/primefaces/commit/20ecf547c76f719d93106d43cb691bf19ed89c27", "committedDate": "2020-08-26T09:54:35Z", "message": "Fix #4374 menuButton: Add support for submenus"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1Mzk0Nzkz", "url": "https://github.com/primefaces/primefaces/pull/6252#pullrequestreview-475394793", "createdAt": "2020-08-26T11:25:56Z", "commit": {"oid": "20ecf547c76f719d93106d43cb691bf19ed89c27"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMToyNTo1N1rOHHHrCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMToyNTo1N1rOHHHrCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzIyNzc4NA==", "bodyText": "Not sure why you moved this out of the init method?  Usually initialization of values like this is done in the init method.", "url": "https://github.com/primefaces/primefaces/pull/6252#discussion_r477227784", "createdAt": "2020-08-26T11:25:57Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/menu/menu.menubutton.js", "diffHunk": "@@ -54,6 +75,14 @@ PrimeFaces.widget.MenuButton = PrimeFaces.widget.BaseWidget.extend({\n      * @private\n      */\n     bindEvents: function() {\n+        this.menuId = this.jqId + '_menu';\n+        this.button = this.jq.children('button');\n+        this.menu = this.jq.children('.ui-menu');\n+        this.menuitems = this.jq.find('.ui-menuitem');\n+        this.cfg.disabled = this.button.is(':disabled');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20ecf547c76f719d93106d43cb691bf19ed89c27"}, "originalPosition": 64}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a255bb02bec977990c6ddb53098985b6e081408", "author": {"user": {"login": "maruTA-bis5", "name": "Takayuki Maruyama"}}, "url": "https://github.com/primefaces/primefaces/commit/6a255bb02bec977990c6ddb53098985b6e081408", "committedDate": "2020-08-27T00:33:09Z", "message": "remove meaningless initialziation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0347d94ac35ee27e7ed6950f63dfcc42dcce06fb", "author": {"user": {"login": "maruTA-bis5", "name": "Takayuki Maruyama"}}, "url": "https://github.com/primefaces/primefaces/commit/0347d94ac35ee27e7ed6950f63dfcc42dcce06fb", "committedDate": "2020-08-27T00:42:59Z", "message": "move initialization of values into init method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NjE0NDgx", "url": "https://github.com/primefaces/primefaces/pull/6252#pullrequestreview-476614481", "createdAt": "2020-08-27T11:10:44Z", "commit": {"oid": "0347d94ac35ee27e7ed6950f63dfcc42dcce06fb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMToxMDo0NFrOHILZ2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMToxMDo0NFrOHILZ2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODMzNzQ5Nw==", "bodyText": "You can remove the @OverRide and @inheritdoc here as now that you have renamed the method its no longer overriding the parent.", "url": "https://github.com/primefaces/primefaces/pull/6252#discussion_r478337497", "createdAt": "2020-08-27T11:10:44Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/menu/menu.menubutton.js", "diffHunk": "@@ -35,11 +35,37 @@ PrimeFaces.widget.MenuButton = PrimeFaces.widget.BaseWidget.extend({\n         this.cfg.disabled = this.button.is(':disabled');\n \n         if(!this.cfg.disabled) {\n-            this.bindEvents();\n+            this.bindButtonEvents();\n             PrimeFaces.utils.registerDynamicOverlay(this, this.menu, this.id + '_menu');\n         }\n     },\n \n+    /**\n+     * @override\n+     * @inheritdoc\n+     * @param {JQuery} menuitem \n+     * @param {JQuery} submenu \n+     */\n+    showSubmenu: function(menuitem, submenu) {\n+        var pos = {\n+            my: 'left top',\n+            at: 'right top',\n+            of: menuitem,\n+            collision: 'flipfit'\n+        };\n+\n+        //avoid queuing multiple runs\n+        if(this.timeoutId) {\n+            clearTimeout(this.timeoutId);\n+        }\n+\n+        this.timeoutId = setTimeout(function () {\n+           submenu.css('z-index', PrimeFaces.nextZindex())\n+                  .show()\n+                  .position(pos)\n+        }, this.cfg.delay);\n+    },\n+\n     /**\n      * @override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0347d94ac35ee27e7ed6950f63dfcc42dcce06fb"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NzM4MjE5", "url": "https://github.com/primefaces/primefaces/pull/6252#pullrequestreview-476738219", "createdAt": "2020-08-27T13:48:15Z", "commit": {"oid": "0347d94ac35ee27e7ed6950f63dfcc42dcce06fb"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMzo0ODoxNlrOHIRNbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMzo0ODoxNlrOHIRNbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQzMjYyMQ==", "bodyText": "sorry the way the review looks the code folding confused me. I see it in the raw file now.", "url": "https://github.com/primefaces/primefaces/pull/6252#discussion_r478432621", "createdAt": "2020-08-27T13:48:16Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/menu/menu.menubutton.js", "diffHunk": "@@ -35,11 +35,37 @@ PrimeFaces.widget.MenuButton = PrimeFaces.widget.BaseWidget.extend({\n         this.cfg.disabled = this.button.is(':disabled');\n \n         if(!this.cfg.disabled) {\n-            this.bindEvents();\n+            this.bindButtonEvents();\n             PrimeFaces.utils.registerDynamicOverlay(this, this.menu, this.id + '_menu');\n         }\n     },\n \n+    /**\n+     * @override\n+     * @inheritdoc\n+     * @param {JQuery} menuitem \n+     * @param {JQuery} submenu \n+     */\n+    showSubmenu: function(menuitem, submenu) {\n+        var pos = {\n+            my: 'left top',\n+            at: 'right top',\n+            of: menuitem,\n+            collision: 'flipfit'\n+        };\n+\n+        //avoid queuing multiple runs\n+        if(this.timeoutId) {\n+            clearTimeout(this.timeoutId);\n+        }\n+\n+        this.timeoutId = setTimeout(function () {\n+           submenu.css('z-index', PrimeFaces.nextZindex())\n+                  .show()\n+                  .position(pos)\n+        }, this.cfg.delay);\n+    },\n+\n     /**\n      * @override", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODMzNzQ5Nw=="}, "originalCommit": {"oid": "0347d94ac35ee27e7ed6950f63dfcc42dcce06fb"}, "originalPosition": 46}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2830, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}