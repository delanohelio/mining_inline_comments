{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNTU2MTI5", "number": 5715, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoyNjo1N1rODp45lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowODo1OFrODqVLvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjUwNDU1OnYy", "diffSide": "RIGHT", "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoyNjo1N1rOF5V6qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDozODo0M1rOF5WZiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY3MjIzMg==", "bodyText": "Brace indent issue. on line 118", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r395672232", "createdAt": "2020-03-20T14:26:57Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -109,6 +111,22 @@\n                 $.extend(this.options.locale, this.options.userLocale);\n             }\n \n+            if(this.options.showWeek && !this.options.weekCalculator) {\n+                var sundayIndex = this.getSundayIndex();\n+                if(sundayIndex == 0) {\n+                    this.options.weekCalculator = this.calculateWeekNumber_sundayFirst;\n+            \t}\n+                else if(sundayIndex == 1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY4MDEzNg==", "bodyText": "Fixed with the next commit", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r395680136", "createdAt": "2020-03-20T14:38:43Z", "author": {"login": "fanste"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -109,6 +111,22 @@\n                 $.extend(this.options.locale, this.options.userLocale);\n             }\n \n+            if(this.options.showWeek && !this.options.weekCalculator) {\n+                var sundayIndex = this.getSundayIndex();\n+                if(sundayIndex == 0) {\n+                    this.options.weekCalculator = this.calculateWeekNumber_sundayFirst;\n+            \t}\n+                else if(sundayIndex == 1) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY3MjIzMg=="}, "originalCommit": null, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjUxMTUxOnYy", "diffSide": "RIGHT", "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDoyODozNlrOF5V_IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNDo0NToxNFrOF5Wp9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY3MzM3Ng==", "bodyText": "Feel like there has to be a way to refactor the above 3 methods as there is a lot of duplicate code expecially around yearStart and WeekNo.", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r395673376", "createdAt": "2020-03-20T14:28:36Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -1292,9 +1319,42 @@\n             return dayNamesHtml;\n         },\n \n+        calculateWeekNumber_iso8601: function(d) {\n+        \td = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));\n+            var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+            var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+            return weekNo;\n+        },\n+\n+        calculateWeekNumber_sundayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 3 - d.getUTCDay());\n+            var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+            var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+            return weekNo;\n+        },\n+\n+        calculateWeekNumber_saturdayFirst: function (d) {\n+        \td = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() - ((d.getUTCDay() + 6) % 7));\n+            var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+            var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+            return weekNo;\n+        },\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY4NDM0Mg==", "bodyText": "I thought about it, but the only solution I could think of seemed somehow wrong. Anyway, I refactored it.", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r395684342", "createdAt": "2020-03-20T14:45:14Z", "author": {"login": "fanste"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -1292,9 +1319,42 @@\n             return dayNamesHtml;\n         },\n \n+        calculateWeekNumber_iso8601: function(d) {\n+        \td = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));\n+            var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+            var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+            return weekNo;\n+        },\n+\n+        calculateWeekNumber_sundayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 3 - d.getUTCDay());\n+            var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+            var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+            return weekNo;\n+        },\n+\n+        calculateWeekNumber_saturdayFirst: function (d) {\n+        \td = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() - ((d.getUTCDay() + 6) % 7));\n+            var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+            var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+            return weekNo;\n+        },\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY3MzM3Ng=="}, "originalCommit": null, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MjcwNTgyOnYy", "diffSide": "RIGHT", "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNToxNTozOVrOF5X7zQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzo1OToxN1rOF6Gqmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNTI5Mw==", "bodyText": "Why not put this method right below the 3 methods using it?", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r395705293", "createdAt": "2020-03-20T15:15:39Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -17,6 +17,12 @@\n     }\n }(function ($) {\n \n+    function calculateWeekNumber(d) {\n+        var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+        var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+        return weekNo;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f1146b3b351a0e89201edec75cda5cb844922ea"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk3NzI3Ng==", "bodyText": "I don't think that it would be a good idea to invoke the calculation method with the this scope. So I can't add the common method to the widget because then I have to invoke it with this.\nAt least that is my understanding, but I have to test it.", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r395977276", "createdAt": "2020-03-21T09:27:17Z", "author": {"login": "fanste"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -17,6 +17,12 @@\n     }\n }(function ($) {\n \n+    function calculateWeekNumber(d) {\n+        var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+        var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+        return weekNo;\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNTI5Mw=="}, "originalCommit": {"oid": "7f1146b3b351a0e89201edec75cda5cb844922ea"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk5MTU0Mg==", "bodyText": "yeah and if you consider it a private method of the widget you can name it with an underscore so _calculateWeekNumber that is how other widgets do methods like these as internal helper methods..", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r395991542", "createdAt": "2020-03-21T13:11:42Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -17,6 +17,12 @@\n     }\n }(function ($) {\n \n+    function calculateWeekNumber(d) {\n+        var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+        var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+        return weekNo;\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNTI5Mw=="}, "originalCommit": {"oid": "7f1146b3b351a0e89201edec75cda5cb844922ea"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM0ODc1Mg==", "bodyText": "Also, why UTC? could you please remove UTC format?\nhttps://github.com/primefaces/primereact/blob/master/src/components/calendar/Calendar.js#L1586\ngetWeekNumber(date) {\n        let checkDate = new Date(date.getTime());\n        checkDate.setDate(checkDate.getDate() + 4 - ( checkDate.getDay() || 7 ));\n        let time = checkDate.getTime();\n        checkDate.setMonth( 0 );\n        checkDate.setDate( 1 );\n        return Math.floor( Math.round((time - checkDate.getTime()) / 86400000 ) / 7 ) + 1;\n    }", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r396348752", "createdAt": "2020-03-23T10:28:38Z", "author": {"login": "mertsincan"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -17,6 +17,12 @@\n     }\n }(function ($) {\n \n+    function calculateWeekNumber(d) {\n+        var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+        var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+        return weekNo;\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNTI5Mw=="}, "originalCommit": {"oid": "7f1146b3b351a0e89201edec75cda5cb844922ea"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ3MDkzOA==", "bodyText": "I used UTC because there are multiple reports on the web (e.g. SO, edit from 2017) that not using UTC may result in incorrect weeks. Additionally I refactored the week calculation a bit based on code from moment.js (which also uses UTC) to really fix non-ISO8601 calendar views (and issue #1052).", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r396470938", "createdAt": "2020-03-23T13:59:17Z", "author": {"login": "fanste"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -17,6 +17,12 @@\n     }\n }(function ($) {\n \n+    function calculateWeekNumber(d) {\n+        var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n+        var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);\n+        return weekNo;\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTcwNTI5Mw=="}, "originalCommit": {"oid": "7f1146b3b351a0e89201edec75cda5cb844922ea"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NDM5Njk2OnYy", "diffSide": "RIGHT", "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwODozOToyNVrOF5oWww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzo1MTo0M1rOF6GVOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk3NDMzOQ==", "bodyText": "please add ui-state-disabled", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r395974339", "createdAt": "2020-03-21T08:39:25Z", "author": {"login": "christophs78"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -1293,9 +1326,36 @@\n             return dayNamesHtml;\n         },\n \n+        calculateWeekNumber_iso8601: function(d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));\n+            return calculateWeekNumber(d);\n+        },\n+\n+        calculateWeekNumber_sundayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 3 - d.getUTCDay());\n+            return calculateWeekNumber(d);\n+        },\n+\n+        calculateWeekNumber_saturdayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() - ((d.getUTCDay() + 6) % 7));\n+            return calculateWeekNumber(d);\n+        },\n+\n         renderWeek: function (weekDates) {\n             var weekHtml = '';\n \n+            if(this.options.showWeek) {\n+                var date = weekDates[0],\n+                    cellClass = date.otherMonth && !this.options.showOtherMonths ? ' ui-datepicker-other-month-hidden' : '';\n+\n+                weekHtml += '<td class=\"ui-datepicker-week-col' + cellClass + '\">' + ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f1146b3b351a0e89201edec75cda5cb844922ea"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI3NTM5Ng==", "bodyText": "I have implemeted it the same ways a jquery did it. What is your intention adding this CSS class? When I add ui-state-disabled, selecting of the week number is still allowed but it is/may be rendered nearly unreadable (due to some disabled styling like opacity)", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r396275396", "createdAt": "2020-03-23T08:22:15Z", "author": {"login": "fanste"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -1293,9 +1326,36 @@\n             return dayNamesHtml;\n         },\n \n+        calculateWeekNumber_iso8601: function(d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));\n+            return calculateWeekNumber(d);\n+        },\n+\n+        calculateWeekNumber_sundayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 3 - d.getUTCDay());\n+            return calculateWeekNumber(d);\n+        },\n+\n+        calculateWeekNumber_saturdayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() - ((d.getUTCDay() + 6) % 7));\n+            return calculateWeekNumber(d);\n+        },\n+\n         renderWeek: function (weekDates) {\n             var weekHtml = '';\n \n+            if(this.options.showWeek) {\n+                var date = weekDates[0],\n+                    cellClass = date.otherMonth && !this.options.showOtherMonths ? ' ui-datepicker-other-month-hidden' : '';\n+\n+                weekHtml += '<td class=\"ui-datepicker-week-col' + cellClass + '\">' + ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk3NDMzOQ=="}, "originalCommit": {"oid": "7f1146b3b351a0e89201edec75cda5cb844922ea"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMxMjY2OQ==", "bodyText": "IMO we should use PrimeNG and PrimeReact as reference.\nhttps://primefaces.org/primeng/showcase/#/calendar\nhttps://primefaces.org/primereact/showcase/#/calendar\nBoth use ui-state-disabled.\nAs far as i know PrimeTek uses the (almost) same base SASS for all themes independent of technology. So it would make sense to render the same code like PrimeNG/PrimeReact/PrimeVue.\n@mertsincan: Do you want to add something?", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r396312669", "createdAt": "2020-03-23T09:28:35Z", "author": {"login": "christophs78"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -1293,9 +1326,36 @@\n             return dayNamesHtml;\n         },\n \n+        calculateWeekNumber_iso8601: function(d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));\n+            return calculateWeekNumber(d);\n+        },\n+\n+        calculateWeekNumber_sundayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 3 - d.getUTCDay());\n+            return calculateWeekNumber(d);\n+        },\n+\n+        calculateWeekNumber_saturdayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() - ((d.getUTCDay() + 6) % 7));\n+            return calculateWeekNumber(d);\n+        },\n+\n         renderWeek: function (weekDates) {\n             var weekHtml = '';\n \n+            if(this.options.showWeek) {\n+                var date = weekDates[0],\n+                    cellClass = date.otherMonth && !this.options.showOtherMonths ? ' ui-datepicker-other-month-hidden' : '';\n+\n+                weekHtml += '<td class=\"ui-datepicker-week-col' + cellClass + '\">' + ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk3NDMzOQ=="}, "originalCommit": {"oid": "7f1146b3b351a0e89201edec75cda5cb844922ea"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM0Mjk3NA==", "bodyText": "Hi,\nDOM structure can be like;\n<td class=\"ui-datepicker-weeknumber\">\n     <span class=\"ui-state-disabled\">13</span>\n</td>", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r396342974", "createdAt": "2020-03-23T10:18:47Z", "author": {"login": "mertsincan"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -1293,9 +1326,36 @@\n             return dayNamesHtml;\n         },\n \n+        calculateWeekNumber_iso8601: function(d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));\n+            return calculateWeekNumber(d);\n+        },\n+\n+        calculateWeekNumber_sundayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 3 - d.getUTCDay());\n+            return calculateWeekNumber(d);\n+        },\n+\n+        calculateWeekNumber_saturdayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() - ((d.getUTCDay() + 6) % 7));\n+            return calculateWeekNumber(d);\n+        },\n+\n         renderWeek: function (weekDates) {\n             var weekHtml = '';\n \n+            if(this.options.showWeek) {\n+                var date = weekDates[0],\n+                    cellClass = date.otherMonth && !this.options.showOtherMonths ? ' ui-datepicker-other-month-hidden' : '';\n+\n+                weekHtml += '<td class=\"ui-datepicker-week-col' + cellClass + '\">' + ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk3NDMzOQ=="}, "originalCommit": {"oid": "7f1146b3b351a0e89201edec75cda5cb844922ea"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ2NTQ2NQ==", "bodyText": "OK, I will change the DOM structure as requested.", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r396465465", "createdAt": "2020-03-23T13:51:43Z", "author": {"login": "fanste"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -1293,9 +1326,36 @@\n             return dayNamesHtml;\n         },\n \n+        calculateWeekNumber_iso8601: function(d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));\n+            return calculateWeekNumber(d);\n+        },\n+\n+        calculateWeekNumber_sundayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() + 3 - d.getUTCDay());\n+            return calculateWeekNumber(d);\n+        },\n+\n+        calculateWeekNumber_saturdayFirst: function (d) {\n+            d = new Date(Date.UTC(d.year, d.month, d.day));\n+            d.setUTCDate(d.getUTCDate() - ((d.getUTCDay() + 6) % 7));\n+            return calculateWeekNumber(d);\n+        },\n+\n         renderWeek: function (weekDates) {\n             var weekHtml = '';\n \n+            if(this.options.showWeek) {\n+                var date = weekDates[0],\n+                    cellClass = date.otherMonth && !this.options.showOtherMonths ? ' ui-datepicker-other-month-hidden' : '';\n+\n+                weekHtml += '<td class=\"ui-datepicker-week-col' + cellClass + '\">' + ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk3NDMzOQ=="}, "originalCommit": {"oid": "7f1146b3b351a0e89201edec75cda5cb844922ea"}, "originalPosition": 90}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzEzODU1OnYy", "diffSide": "RIGHT", "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowODo1OFrOF6Anqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMzo1MzozNlrOF6GaXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3MTg4Mw==", "bodyText": "I think you can remove this if statement. Users can calculate week numbers using a custom weekCalculator function;\nfunction myWeekCalculator(date) {\n    ...\n    return weekNo;\n}\n\n<p:datePicker weekCalculator=\"myWeekCalculator\"", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r396371883", "createdAt": "2020-03-23T11:08:58Z", "author": {"login": "mertsincan"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -110,6 +112,22 @@\n                 $.extend(this.options.locale, this.options.userLocale);\n             }\n \n+            if(this.options.showWeek && !this.options.weekCalculator) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0411b22d4d21144257c5cffa7d7f556fd4bfdd"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ2Njc4Mw==", "bodyText": "No I can't remove it. This if checks if a custom week calculator is provided or if some internal defaults have to be configured. But only if showWeek is enabled. If the user provides a custom week calculator I don't have to check if the internals are correctly configured because it is totally up to the user.", "url": "https://github.com/primefaces/primefaces/pull/5715#discussion_r396466783", "createdAt": "2020-03-23T13:53:36Z", "author": {"login": "fanste"}, "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -110,6 +112,22 @@\n                 $.extend(this.options.locale, this.options.userLocale);\n             }\n \n+            if(this.options.showWeek && !this.options.weekCalculator) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3MTg4Mw=="}, "originalCommit": {"oid": "5c0411b22d4d21144257c5cffa7d7f556fd4bfdd"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2098, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}