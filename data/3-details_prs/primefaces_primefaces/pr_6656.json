{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MDExNzgy", "number": 6656, "title": "Fix #6575 - Datatable : Clean up selection", "bodyText": "Centralize selection code into SelectionFeature\nKeep selection state in view scope, and no longer request scope\n\nNo breaking changes", "createdAt": "2020-12-13T20:06:44Z", "url": "https://github.com/primefaces/primefaces/pull/6656", "merged": true, "mergeCommit": {"oid": "07578cab8e28440cef1636091084921a8cf562dc"}, "closed": true, "closedAt": "2021-01-12T13:31:49Z", "author": {"login": "Rapster"}, "timelineItems": {"totalCount": 39, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmGPVMAFqTU1MTM5NDEwOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvOIm-gH2gAyNTM5MDExNzgyOjg1YjdlODAxNjgxMjNmYTE5NWZmYTQ2YTJiZDdiYjBhZmNmZTU2YmY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMzk0MTA4", "url": "https://github.com/primefaces/primefaces/pull/6656#pullrequestreview-551394108", "createdAt": "2020-12-14T14:02:31Z", "commit": {"oid": "39e3407ff6ca30dfe3b5b21cc08e1814236a8603"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDowMjozMVrOIFR35g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDowMjozMVrOIFR35g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQwNjYzMA==", "bodyText": "@tandraschko @melloware I remember you guys faced an issue with this code recently, but I can't recall what it was... Can you remind me what was the issue number?", "url": "https://github.com/primefaces/primefaces/pull/6656#discussion_r542406630", "createdAt": "2020-12-14T14:02:31Z", "author": {"login": "Rapster"}, "path": "src/main/java/org/primefaces/component/datatable/DataTable.java", "diffHunk": "@@ -294,18 +297,6 @@ public void processValidators(FacesContext context) {\n         }\n     }\n \n-    @Override\n-    public void processUpdates(FacesContext context) {\n-        super.processUpdates(context);\n-\n-        ValueExpression selectionVE = getValueExpression(PropertyKeys.selection.toString());\n-\n-        if (selectionVE != null) {\n-            selectionVE.setValue(context.getELContext(), getLocalSelection());\n-            setSelection(null);\n-        }\n-    }\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39e3407ff6ca30dfe3b5b21cc08e1814236a8603"}, "originalPosition": 68}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39e3407ff6ca30dfe3b5b21cc08e1814236a8603", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/39e3407ff6ca30dfe3b5b21cc08e1814236a8603", "committedDate": "2020-12-13T20:11:46Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}, "afterCommit": {"oid": "1dda17dc688f85055ddbbbf9432ffa4aec9d88d4", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/1dda17dc688f85055ddbbbf9432ffa4aec9d88d4", "committedDate": "2020-12-19T00:36:25Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "115a4e0e338a0c896648f651eaa8d3a0f6e73b63", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/115a4e0e338a0c896648f651eaa8d3a0f6e73b63", "committedDate": "2020-12-19T22:33:45Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}, "afterCommit": {"oid": "43f58e9d2cc03d53165370b3cbb5c5b132480546", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/43f58e9d2cc03d53165370b3cbb5c5b132480546", "committedDate": "2020-12-21T23:30:23Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df2db07e9861511244b6dda82178ddea5159820b", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/df2db07e9861511244b6dda82178ddea5159820b", "committedDate": "2020-12-27T16:47:17Z", "message": "Fix #6575 - DataTable: selection gets lost after update only"}, "afterCommit": {"oid": "77f06bc1769855b1bf31ee920c42c656dc4084c2", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/77f06bc1769855b1bf31ee920c42c656dc4084c2", "committedDate": "2020-12-27T19:33:45Z", "message": "fix merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e13815ae5abb2c9eb334664ead7431abd4337d61", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/e13815ae5abb2c9eb334664ead7431abd4337d61", "committedDate": "2020-12-29T15:44:41Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ea632228564a62c461fc857ee60a97b133b9a87", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/3ea632228564a62c461fc857ee60a97b133b9a87", "committedDate": "2020-12-29T15:44:42Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d5637f9c225bc0bb3350a649b980f2de8abc5f6", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/9d5637f9c225bc0bb3350a649b980f2de8abc5f6", "committedDate": "2020-12-29T15:44:43Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46ef5d86cc64610a9c4ea2119e38305f23bec255", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/46ef5d86cc64610a9c4ea2119e38305f23bec255", "committedDate": "2020-12-29T15:44:44Z", "message": "Fix #6575 - DataTable: selection gets lost after update only"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cea0514a68a714edf74533ac6a37e2f862ab278", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/4cea0514a68a714edf74533ac6a37e2f862ab278", "committedDate": "2020-12-29T15:44:45Z", "message": "fix merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85ea0cf49e922debd7453dc76f14b65110a5f7ea", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/85ea0cf49e922debd7453dc76f14b65110a5f7ea", "committedDate": "2020-12-29T15:44:45Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfe32377c02c93d7a3f7f39d161a4d1abf9de004", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/dfe32377c02c93d7a3f7f39d161a4d1abf9de004", "committedDate": "2020-12-29T15:44:46Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1f617d39f066563ecf216919c5fd27fd4578b3b", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/b1f617d39f066563ecf216919c5fd27fd4578b3b", "committedDate": "2020-12-29T16:43:02Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d1613b3b7391f810b1f1e54ba3293fbcb040f605", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/d1613b3b7391f810b1f1e54ba3293fbcb040f605", "committedDate": "2020-12-28T10:26:30Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}, "afterCommit": {"oid": "b1f617d39f066563ecf216919c5fd27fd4578b3b", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/b1f617d39f066563ecf216919c5fd27fd4578b3b", "committedDate": "2020-12-29T16:43:02Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75ec52474a25dae7a5289d8dcc73afbeea2fb662", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/75ec52474a25dae7a5289d8dcc73afbeea2fb662", "committedDate": "2020-12-29T17:05:40Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec822e0bd0e59c66464060150c381b6900054a68", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/ec822e0bd0e59c66464060150c381b6900054a68", "committedDate": "2020-12-31T00:24:11Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5112d147bd89191ae942d43ef0fcc4cf4938147", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/c5112d147bd89191ae942d43ef0fcc4cf4938147", "committedDate": "2020-12-31T00:28:35Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1d8864fe2addad5542dddf2771a90bf5c900246", "author": {"user": {"login": "melloware", "name": "Melloware"}}, "url": "https://github.com/primefaces/primefaces/commit/a1d8864fe2addad5542dddf2771a90bf5c900246", "committedDate": "2021-01-04T16:12:00Z", "message": "Merge branch 'master' into fix-6575v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c02cf417da62f8550258b940b7510f57f67e1f2", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/2c02cf417da62f8550258b940b7510f57f67e1f2", "committedDate": "2021-01-04T18:05:18Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16ad626fd5669f903c1eff7dd0303f2d6fa5d78f", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/16ad626fd5669f903c1eff7dd0303f2d6fa5d78f", "committedDate": "2021-01-04T18:05:19Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aadf493a0c963a9d6a39b36d858f7c71c2f9f952", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/aadf493a0c963a9d6a39b36d858f7c71c2f9f952", "committedDate": "2021-01-04T18:05:21Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc7012d8326688aa1a1dbf9e53c2afaa4799945c", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/fc7012d8326688aa1a1dbf9e53c2afaa4799945c", "committedDate": "2021-01-04T18:05:22Z", "message": "Fix #6575 - DataTable: selection gets lost after update only"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "218cd5ccafa3e8b14369136080dd651eeab35f0a", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/218cd5ccafa3e8b14369136080dd651eeab35f0a", "committedDate": "2021-01-04T18:05:22Z", "message": "fix merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "830b65fec611f819246f3c995d54adebe6d8d269", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/830b65fec611f819246f3c995d54adebe6d8d269", "committedDate": "2021-01-04T18:05:23Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fefa49ef1e0c911af5849de2f9c1af536eb3691a", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/fefa49ef1e0c911af5849de2f9c1af536eb3691a", "committedDate": "2021-01-04T18:05:24Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79c83e482f70e70415fe3da001eeeee9fad11904", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/79c83e482f70e70415fe3da001eeeee9fad11904", "committedDate": "2021-01-04T18:05:25Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b56a03096e4454aa365c6efae885e40e7c1d1be", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/0b56a03096e4454aa365c6efae885e40e7c1d1be", "committedDate": "2021-01-04T18:05:26Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6ec4fe2517e64c501c329c3f7e5d90ed44f0b3e", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/a6ec4fe2517e64c501c329c3f7e5d90ed44f0b3e", "committedDate": "2021-01-04T18:05:27Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f7f6e4f273e1a1a95ec6e605a8e808571545a40", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/4f7f6e4f273e1a1a95ec6e605a8e808571545a40", "committedDate": "2021-01-04T18:05:28Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c23c48c7ce16068f23ef2c336dc722c4c501ab9d", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/c23c48c7ce16068f23ef2c336dc722c4c501ab9d", "committedDate": "2021-01-04T18:33:21Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79855ea277b79a68ca99688a988cc5bdb3e0033c", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/79855ea277b79a68ca99688a988cc5bdb3e0033c", "committedDate": "2021-01-04T18:34:14Z", "message": "Merge branch 'fix-6575v2' of https://github.com/Rapster/primefaces into fix-6575v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "187ff040dd63f95638575e9c5f6dd4dd4547d44b", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/187ff040dd63f95638575e9c5f6dd4dd4547d44b", "committedDate": "2021-01-04T18:36:10Z", "message": "Fix #6575 - DataTable: selection gets lost after update only (but not processed)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxNTk2Njkw", "url": "https://github.com/primefaces/primefaces/pull/6656#pullrequestreview-561596690", "createdAt": "2021-01-05T08:32:01Z", "commit": {"oid": "187ff040dd63f95638575e9c5f6dd4dd4547d44b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwODozMjowMVrOIOOOUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwODozMjowMVrOIOOOUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTc4NDAxNg==", "bodyText": "Why did you change all this features?\nIn the past we always decodde SelectionFeature, just if selection is enabled and indepdent if the current request is a selection request.\nSo in each request the SelectionFeature was called and decoded if the _selection param is available", "url": "https://github.com/primefaces/primefaces/pull/6656#discussion_r551784016", "createdAt": "2021-01-05T08:32:01Z", "author": {"login": "tandraschko"}, "path": "src/main/java/org/primefaces/component/datatable/feature/ScrollFeature.java", "diffHunk": "@@ -82,7 +78,7 @@ public void encode(FacesContext context, DataTableRenderer renderer, DataTable t\n \n     @Override\n     public boolean shouldDecode(FacesContext context, DataTable table) {\n-        return false;\n+        return table.isScrollingRequest(context) && table.isSelectionEnabled();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "187ff040dd63f95638575e9c5f6dd4dd4547d44b"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "028a320471a59d198610edceacf8d59ed4b4a059", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/028a320471a59d198610edceacf8d59ed4b4a059", "committedDate": "2021-01-09T00:27:58Z", "message": "Fix #6575 - DataTable: clean up selection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c593691355dc6416e30774457c611555ba6349ee", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/c593691355dc6416e30774457c611555ba6349ee", "committedDate": "2021-01-09T10:23:17Z", "message": "DataTable: clean up selection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00316a24a466301f033fb60ca27be0255dd2e7c5", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/00316a24a466301f033fb60ca27be0255dd2e7c5", "committedDate": "2021-01-09T10:32:02Z", "message": "DataTable: clean up selection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aef6fa79703481b6c9002617c55c553decd5bb4a", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/aef6fa79703481b6c9002617c55c553decd5bb4a", "committedDate": "2021-01-10T21:11:20Z", "message": "DataTable: clean up selection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4d49e8cd91df2cad656fb8ee628ef88439df244", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/a4d49e8cd91df2cad656fb8ee628ef88439df244", "committedDate": "2021-01-10T21:14:15Z", "message": "DataTable: clean up selection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce0889225784a6c1ac386114dcb5da5976751ab9", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/ce0889225784a6c1ac386114dcb5da5976751ab9", "committedDate": "2021-01-11T22:17:33Z", "message": "DataTable: clean up selection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85b7e80168123fa195ffa46a2bd7bb0afcfe56bf", "author": {"user": {"login": "Rapster", "name": "S\u00e9bastien Lepage"}}, "url": "https://github.com/primefaces/primefaces/commit/85b7e80168123fa195ffa46a2bd7bb0afcfe56bf", "committedDate": "2021-01-11T22:19:45Z", "message": "DataTable: clean up selection"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2720, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}