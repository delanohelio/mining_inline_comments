{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI5OTEwNDE2", "number": 6007, "title": "Implement #5987: TabView: add multiViewState to keep activeIndex across views", "bodyText": "", "createdAt": "2020-06-07T09:37:33Z", "url": "https://github.com/primefaces/primefaces/pull/6007", "merged": true, "mergeCommit": {"oid": "1edbb201b3af20eaa12cdf20a0459076053511e1"}, "closed": true, "closedAt": "2020-06-10T16:25:50Z", "author": {"login": "christophs78"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoXjeWgH2gAyNDI5OTEwNDE2OmU2ZmZlNDdiYWRiY2IzNzZjYWUzMWYyOTIyMWFhMWQ3MDcyZmM3ZWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpB9R8gFqTQyNTg1MTE0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e6ffe47badbcb376cae31f29221aa1d7072fc7ed", "author": {"user": {"login": "christophs78", "name": "Christoph Stra\u00dfer"}}, "url": "https://github.com/primefaces/primefaces/commit/e6ffe47badbcb376cae31f29221aa1d7072fc7ed", "committedDate": "2020-06-05T19:09:37Z", "message": "Implement #5987: TabView: add multiViewState to keep activeIndex across views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba3d6591a83804e8dcc0568c489fda3984157244", "author": {"user": {"login": "christophs78", "name": "Christoph Stra\u00dfer"}}, "url": "https://github.com/primefaces/primefaces/commit/ba3d6591a83804e8dcc0568c489fda3984157244", "committedDate": "2020-06-06T05:44:04Z", "message": "Implement #5987: TabView: add multiViewState to keep activeIndex across views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c594d39b28394ef32c4239609452e20ed031b9f", "author": {"user": {"login": "christophs78", "name": "Christoph Stra\u00dfer"}}, "url": "https://github.com/primefaces/primefaces/commit/8c594d39b28394ef32c4239609452e20ed031b9f", "committedDate": "2020-06-06T10:50:04Z", "message": "Implement #5987: TabView: add multiViewState to keep activeIndex across views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b30eb8ab191e3826b26769cd4461d5183c3e3a4", "author": {"user": {"login": "christophs78", "name": "Christoph Stra\u00dfer"}}, "url": "https://github.com/primefaces/primefaces/commit/2b30eb8ab191e3826b26769cd4461d5183c3e3a4", "committedDate": "2020-06-06T11:23:40Z", "message": "Implement #5987: TabView: add multiViewState to keep activeIndex across views"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7040fcf7ded9631cf71faf6f5446a82e0f4dbbda", "author": {"user": {"login": "christophs78", "name": "Christoph Stra\u00dfer"}}, "url": "https://github.com/primefaces/primefaces/commit/7040fcf7ded9631cf71faf6f5446a82e0f4dbbda", "committedDate": "2020-06-07T09:35:39Z", "message": "Implement #5987: TabView: add multiViewState to keep activeIndex across views"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1ODA3NjMx", "url": "https://github.com/primefaces/primefaces/pull/6007#pullrequestreview-425807631", "createdAt": "2020-06-07T10:41:13Z", "commit": {"oid": "7040fcf7ded9631cf71faf6f5446a82e0f4dbbda"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxMDo0MToxNFrOGgIpSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxMDo0MToxNFrOGgIpSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM0OTI1Nw==", "bodyText": "@blutorange : Is it right this way? IntelliJ had not been happy because it thought cfg does not contain multiViewState.", "url": "https://github.com/primefaces/primefaces/pull/6007#discussion_r436349257", "createdAt": "2020-06-07T10:41:14Z", "author": {"login": "christophs78"}, "path": "src/main/resources/META-INF/resources/primefaces/tabview/tabview.js", "diffHunk": "@@ -58,6 +58,7 @@\n  * @prop {boolean} cfg.scrollable When enabled, tab headers can be scrolled horizontally instead of wrapping.\n  * @prop {number} cfg.selected The currently selected tab.\n  * @prop {number} cfg.tabindex Position of the element in the tabbing order.\n+ * @prop {boolean} cfg.multiViewState Whether to keep TabView state across views.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7040fcf7ded9631cf71faf6f5446a82e0f4dbbda"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1ODA3OTI5", "url": "https://github.com/primefaces/primefaces/pull/6007#pullrequestreview-425807929", "createdAt": "2020-06-07T10:45:50Z", "commit": {"oid": "7040fcf7ded9631cf71faf6f5446a82e0f4dbbda"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxMDo0NTo1MFrOGgIqjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wN1QxMDo0NTo1MFrOGgIqjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM0OTU4Mw==", "bodyText": "For dynamic=\"true\" we have activeIndex on the server. Also when tabview includes tabChange-Ajax-Event.\nThis tries to send activeIndex-updates to the server for the other usecases. Is there a other (better) way to do this. (At least this way seems to work.)\nAnd i have to remove the comment afterwards.", "url": "https://github.com/primefaces/primefaces/pull/6007#discussion_r436349583", "createdAt": "2020-06-07T10:45:50Z", "author": {"login": "christophs78"}, "path": "src/main/resources/META-INF/resources/primefaces/tabview/tabview.js", "diffHunk": "@@ -459,8 +461,36 @@ PrimeFaces.widget.TabView = PrimeFaces.widget.DeferredWidget.extend({\n         else {\n             this.show(newPanel);\n \n-            if(this.hasBehavior('tabChange') && !silent) {\n-                this.fireTabChangeEvent(newPanel);\n+            if (!silent) {\n+                if (this.hasBehavior('tabChange')) {\n+                    this.fireTabChangeEvent(newPanel);\n+                }\n+                else if (this.cfg.multiViewState) {\n+                    var options = {\n+                        source: this.id,\n+                        partialSubmit: true,\n+                        /*\n+                        TODO: How to set partialSubmitFilter to only send and process activeIndex-hidden-field to the server?\n+                        partialSubmitFilter: \"@none\",\n+                        partialSubmitFilter: \":input:hidden\",\n+                        partialSubmitFilter: \"@form:\" + this.id + '_activeIndex',\n+                        partialSubmitFilter: \":\" + this.cfg.formId + \":\" + this.id + '_activeIndex',\n+                        partialSubmitFilter: \"@form:\" + this.id + '_activeIndex',\n+                        partialSubmitFilter: this.id + '_activeIndex',\n+\n+                        process: \"@none\",\n+                        process: this.id + '_activeIndex',\n+                         */\n+                        partialSubmitFilter: this.id + '_activeIndex',\n+                        process: this.id,\n+                        ignoreAutoUpdate: true,\n+                        params: [\n+                            {name: this.id + '_activeIndex', value: this.getActiveIndex()}\n+                        ]\n+                    };\n+\n+                    PrimeFaces.ajax.Request.handle(options);\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7040fcf7ded9631cf71faf6f5446a82e0f4dbbda"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9dd7147c6cb5e6904f3e37710f9a59ab4ba9ed2", "author": {"user": {"login": "christophs78", "name": "Christoph Stra\u00dfer"}}, "url": "https://github.com/primefaces/primefaces/commit/d9dd7147c6cb5e6904f3e37710f9a59ab4ba9ed2", "committedDate": "2020-06-07T14:32:04Z", "message": "Implement #5987: TabView: add multiViewState to keep activeIndex across views"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1ODUxMTQx", "url": "https://github.com/primefaces/primefaces/pull/6007#pullrequestreview-425851141", "createdAt": "2020-06-07T20:33:49Z", "commit": {"oid": "d9dd7147c6cb5e6904f3e37710f9a59ab4ba9ed2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2856, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}