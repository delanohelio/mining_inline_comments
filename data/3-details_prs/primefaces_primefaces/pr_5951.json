{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyMzM0MzQz", "number": 5951, "title": "FileUpload - fix issues with allowTypes, fileLimit, sizeLimit and templateMessage for simple mode", "bodyText": "Hi, this PR is intended to fix issue #5941\n\nfix default invalidSizeMessage for simple mode\nfix no support for fileLimit and allowTypes validation on simple mode\nfix no support for templateMessage on simple mode\nFurthermore, docs were updated with proper default value for invalidSizeMessage, invalidFileMessage and fileLimitMessage.", "createdAt": "2020-05-23T22:22:04Z", "url": "https://github.com/primefaces/primefaces/pull/5951", "merged": true, "mergeCommit": {"oid": "fbe038c9146e1dc406abcc5c7e2a5af1a11b2b19"}, "closed": true, "closedAt": "2020-05-25T16:38:53Z", "author": {"login": "doleron"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcj0kcVAH2gAyNDIyMzM0MzQzOmU4YWZiYTEyZGZhYWY1ZGJiYzg0NTM3NzIwMGRiMjUwODliZjljMTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABckc1STAFqTQxNzM2NjUwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e8afba12dfaaf5dbbc845377200db25089bf9c18", "author": {"user": {"login": "doleron", "name": null}}, "url": "https://github.com/primefaces/primefaces/commit/e8afba12dfaaf5dbbc845377200db25089bf9c18", "committedDate": "2020-05-22T16:08:18Z", "message": "validating/formating for both simple/advanced modes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10612ae22942b40446a3d6c2146d974dbf5580d9", "author": {"user": {"login": "doleron", "name": null}}, "url": "https://github.com/primefaces/primefaces/commit/10612ae22942b40446a3d6c2146d974dbf5580d9", "committedDate": "2020-05-23T21:06:46Z", "message": "invalidSizeMessage, invalidFileMessage & fileLimitMessage default values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "689df79d394d0e01978e2a7dd833223ac366e87a", "author": {"user": {"login": "doleron", "name": null}}, "url": "https://github.com/primefaces/primefaces/commit/689df79d394d0e01978e2a7dd833223ac366e87a", "committedDate": "2020-05-23T21:25:42Z", "message": "add disabled to simple mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "556a00d0b8f2a478d5fa9573738550654387bb2b", "author": {"user": {"login": "doleron", "name": null}}, "url": "https://github.com/primefaces/primefaces/commit/556a00d0b8f2a478d5fa9573738550654387bb2b", "committedDate": "2020-05-23T22:25:54Z", "message": "Merge branch 'master' into PF-5941"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzUxNDg1", "url": "https://github.com/primefaces/primefaces/pull/5951#pullrequestreview-417351485", "createdAt": "2020-05-24T11:55:55Z", "commit": {"oid": "556a00d0b8f2a478d5fa9573738550654387bb2b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMTo1NTo1NlrOGZudGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxMTo1NTo1NlrOGZudGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyODY5OA==", "bodyText": "Why did you remove the EscapeUtils around invalidSize messsage?", "url": "https://github.com/primefaces/primefaces/pull/5951#discussion_r429628698", "createdAt": "2020-05-24T11:55:56Z", "author": {"login": "melloware"}, "path": "src/main/java/org/primefaces/component/fileupload/FileUploadRenderer.java", "diffHunk": "@@ -95,21 +87,27 @@ protected void encodeScript(FacesContext context, FileUpload fileUpload) throws\n                     .callback(\"onAdd\", \"function(file, callback)\", fileUpload.getOnAdd())\n                     .callback(\"onstart\", \"function()\", fileUpload.getOnstart())\n                     .callback(\"onerror\", \"function()\", fileUpload.getOnerror())\n-                    .callback(\"onvalidationfailure\", \"function(msg)\", fileUpload.getOnvalidationfailure())\n                     .callback(\"oncancel\", \"function()\", fileUpload.getOncancel())\n                     .callback(\"oncomplete\", \"function(args)\", fileUpload.getOncomplete());\n \n-            String allowTypes = fileUpload.getAllowTypes();\n-\n-            if (allowTypes != null) {\n-                wb.append(\",allowTypes:\").append(allowTypes);\n-            }\n         }\n         else {\n             wb.init(\"SimpleFileUpload\", fileUpload.resolveWidgetVar(context), clientId)\n-                    .attr(\"skinSimple\", fileUpload.isSkinSimple(), false)\n-                    .attr(\"maxFileSize\", fileUpload.getSizeLimit(), Long.MAX_VALUE)\n-                    .attr(\"invalidSizeMessage\", EscapeUtils.forJavaScript(fileUpload.getInvalidSizeMessage()), null);\n+                    .attr(\"skinSimple\", fileUpload.isSkinSimple(), false);\n+        }\n+\n+        wb.attr(\"disabled\", fileUpload.isDisabled(), false)\n+                .attr(\"invalidSizeMessage\", fileUpload.getInvalidSizeMessage(), null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "556a00d0b8f2a478d5fa9573738550654387bb2b"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66f986857959a89fd3defdf095f20be385b76a14", "author": {"user": {"login": "doleron", "name": null}}, "url": "https://github.com/primefaces/primefaces/commit/66f986857959a89fd3defdf095f20be385b76a14", "committedDate": "2020-05-24T14:37:39Z", "message": "junit test forJavascript on null input"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fc1d1a2a954338276fbd7b612a0952170c97cd7", "author": {"user": {"login": "doleron", "name": null}}, "url": "https://github.com/primefaces/primefaces/commit/8fc1d1a2a954338276fbd7b612a0952170c97cd7", "committedDate": "2020-05-24T14:39:02Z", "message": "tests for WidgetBuilder.attr() js escape and default value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39f4a7bcc9153492d3123fc93847a314b80bf56c", "author": {"user": {"login": "doleron", "name": null}}, "url": "https://github.com/primefaces/primefaces/commit/39f4a7bcc9153492d3123fc93847a314b80bf56c", "committedDate": "2020-05-24T14:39:19Z", "message": "Merge branch 'PF-5941' of https://github.com/doleron/primefaces.git into PF-5941"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzY2NTA2", "url": "https://github.com/primefaces/primefaces/pull/5951#pullrequestreview-417366506", "createdAt": "2020-05-24T15:02:54Z", "commit": {"oid": "39f4a7bcc9153492d3123fc93847a314b80bf56c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2835, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}