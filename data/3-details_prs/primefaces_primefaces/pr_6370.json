{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0NzczMjAy", "number": 6370, "title": "Fix #5014: Wrong calculation of width for scrollable tables", "bodyText": "if box-sizing is border-box", "createdAt": "2020-09-29T11:52:05Z", "url": "https://github.com/primefaces/primefaces/pull/6370", "merged": true, "mergeCommit": {"oid": "fbc4736c317d2b07eac85d386de68d351d771e2c"}, "closed": true, "closedAt": "2021-02-22T08:34:14Z", "author": {"login": "fanste"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNmzqEAH2gAyNDk0NzczMjAyOmE1N2FkYzhhMmNjYzAzOWVkMzY2YjBiOTY5MmUwOTc3ZjdhNGM5ZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd5goIhgH2gAyNDk0NzczMjAyOjVlZDFmOGUxMGIyZWE4OGViNmUxMDA5N2I2ZTJlZGZjZGE5NjFhNjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a57adc8a2ccc039ed366b0b9692e0977f7a4c9d6", "author": {"user": {"login": "fanste", "name": null}}, "url": "https://github.com/primefaces/primefaces/commit/a57adc8a2ccc039ed366b0b9692e0977f7a4c9d6", "committedDate": "2020-09-29T11:51:04Z", "message": "Fix primefaces#5014: Wrong calculation of width for scrollable tables\n\nif box-sizing is border-box"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4Mzk1MTQ4", "url": "https://github.com/primefaces/primefaces/pull/6370#pullrequestreview-498395148", "createdAt": "2020-09-29T12:04:39Z", "commit": {"oid": "a57adc8a2ccc039ed366b0b9692e0977f7a4c9d6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMjowNDozOVrOHZpzEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxMjowNDo0NVrOHZpzTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjY2MTI2Ng==", "bodyText": "indenting issue", "url": "https://github.com/primefaces/primefaces/pull/6370#discussion_r496661266", "createdAt": "2020-09-29T12:04:39Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/datatable/datatable.js", "diffHunk": "@@ -1560,14 +1560,46 @@ PrimeFaces.widget.DataTable = PrimeFaces.widget.DeferredWidget.extend({\n      */\n     setOuterWidth: function(element, width) {\n         if (element.css('box-sizing') === 'border-box') { // Github issue: #5014\n-            var diff = element.outerWidth() - element.width();\n-            element.width(parseFloat(width) - diff);\n+            element.outerWidth(width);\n         }\n         else {\n             element.width(width);\n         }\n     },\n \n+    getColumnWidthInfo: function(col, isIncludeResizeableState) {\n+        var width, isOuterWidth;\n+\n+    \tif(isIncludeResizeableState && this.cfg.multiViewState && this.resizableStateHolder && this.resizableStateHolder.attr('value')) {\n+    \t\twidth = $this.findColWidthInResizableState(col.attr('id'));\n+    \t\tisOuterWidth = false;\n+        }\n+\n+        if(!width) {\n+        \twidth = col[0].style.width;\n+        \tisOuterWidth = width && (col.css('box-sizing') === 'border-box');\n+        }\n+\n+        if(!width) {\n+            width = col.width();\n+            isOuterWidth = false;\n+        }\n+\n+        return {\n+        \twidth: width,\n+            isOuterWidth: isOuterWidth", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a57adc8a2ccc039ed366b0b9692e0977f7a4c9d6"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjY2MTMyNg==", "bodyText": "indenting issue", "url": "https://github.com/primefaces/primefaces/pull/6370#discussion_r496661326", "createdAt": "2020-09-29T12:04:45Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/datatable/datatable.js", "diffHunk": "@@ -1560,14 +1560,46 @@ PrimeFaces.widget.DataTable = PrimeFaces.widget.DeferredWidget.extend({\n      */\n     setOuterWidth: function(element, width) {\n         if (element.css('box-sizing') === 'border-box') { // Github issue: #5014\n-            var diff = element.outerWidth() - element.width();\n-            element.width(parseFloat(width) - diff);\n+            element.outerWidth(width);\n         }\n         else {\n             element.width(width);\n         }\n     },\n \n+    getColumnWidthInfo: function(col, isIncludeResizeableState) {\n+        var width, isOuterWidth;\n+\n+    \tif(isIncludeResizeableState && this.cfg.multiViewState && this.resizableStateHolder && this.resizableStateHolder.attr('value')) {\n+    \t\twidth = $this.findColWidthInResizableState(col.attr('id'));\n+    \t\tisOuterWidth = false;\n+        }\n+\n+        if(!width) {\n+        \twidth = col[0].style.width;\n+        \tisOuterWidth = width && (col.css('box-sizing') === 'border-box');\n+        }\n+\n+        if(!width) {\n+            width = col.width();\n+            isOuterWidth = false;\n+        }\n+\n+        return {\n+        \twidth: width,\n+            isOuterWidth: isOuterWidth\n+        };\n+    },\n+\n+    applyWidthInfo: function(element, widthInfo) {\n+        if(widthInfo.isOuterWidth) {\n+\t        element.outerWidth(widthInfo.width);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a57adc8a2ccc039ed366b0b9692e0977f7a4c9d6"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53076a37ad199a7734a9ef857cbecdb13915994e", "author": {"user": {"login": "fanste", "name": null}}, "url": "https://github.com/primefaces/primefaces/commit/53076a37ad199a7734a9ef857cbecdb13915994e", "committedDate": "2020-09-29T12:10:43Z", "message": "Fix indention"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NDE5NjAz", "url": "https://github.com/primefaces/primefaces/pull/6370#pullrequestreview-498419603", "createdAt": "2020-09-29T12:35:56Z", "commit": {"oid": "53076a37ad199a7734a9ef857cbecdb13915994e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMjQxNTM5", "url": "https://github.com/primefaces/primefaces/pull/6370#pullrequestreview-500241539", "createdAt": "2020-10-01T11:13:29Z", "commit": {"oid": "53076a37ad199a7734a9ef857cbecdb13915994e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMToxMzoyOVrOHbFl6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMToxMzozOFrOHbFmLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODE2NTIyNw==", "bodyText": "Can you add JSDOC to this method and test that the build works with mvn clean package -Pjsdoc please?", "url": "https://github.com/primefaces/primefaces/pull/6370#discussion_r498165227", "createdAt": "2020-10-01T11:13:29Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/datatable/datatable.js", "diffHunk": "@@ -1560,14 +1560,46 @@ PrimeFaces.widget.DataTable = PrimeFaces.widget.DeferredWidget.extend({\n      */\n     setOuterWidth: function(element, width) {\n         if (element.css('box-sizing') === 'border-box') { // Github issue: #5014\n-            var diff = element.outerWidth() - element.width();\n-            element.width(parseFloat(width) - diff);\n+            element.outerWidth(width);\n         }\n         else {\n             element.width(width);\n         }\n     },\n \n+    getColumnWidthInfo: function(col, isIncludeResizeableState) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53076a37ad199a7734a9ef857cbecdb13915994e"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODE2NTI5NA==", "bodyText": "JSDoc", "url": "https://github.com/primefaces/primefaces/pull/6370#discussion_r498165294", "createdAt": "2020-10-01T11:13:38Z", "author": {"login": "melloware"}, "path": "src/main/resources/META-INF/resources/primefaces/datatable/datatable.js", "diffHunk": "@@ -1560,14 +1560,46 @@ PrimeFaces.widget.DataTable = PrimeFaces.widget.DeferredWidget.extend({\n      */\n     setOuterWidth: function(element, width) {\n         if (element.css('box-sizing') === 'border-box') { // Github issue: #5014\n-            var diff = element.outerWidth() - element.width();\n-            element.width(parseFloat(width) - diff);\n+            element.outerWidth(width);\n         }\n         else {\n             element.width(width);\n         }\n     },\n \n+    getColumnWidthInfo: function(col, isIncludeResizeableState) {\n+        var width, isOuterWidth;\n+\n+        if(isIncludeResizeableState && this.cfg.multiViewState && this.resizableStateHolder && this.resizableStateHolder.attr('value')) {\n+            width = $this.findColWidthInResizableState(col.attr('id'));\n+            isOuterWidth = false;\n+        }\n+\n+        if(!width) {\n+            width = col[0].style.width;\n+            isOuterWidth = width && (col.css('box-sizing') === 'border-box');\n+        }\n+\n+        if(!width) {\n+            width = col.width();\n+            isOuterWidth = false;\n+        }\n+\n+        return {\n+            width: width,\n+            isOuterWidth: isOuterWidth\n+        };\n+    },\n+\n+    applyWidthInfo: function(element, widthInfo) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53076a37ad199a7734a9ef857cbecdb13915994e"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7eebbb6f63ad55554d452d47e8937877aa315ccd", "author": {"user": {"login": "fanste", "name": null}}, "url": "https://github.com/primefaces/primefaces/commit/7eebbb6f63ad55554d452d47e8937877aa315ccd", "committedDate": "2020-10-13T12:14:10Z", "message": "Add JSDoc for new width-info methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3Mzc2NDEw", "url": "https://github.com/primefaces/primefaces/pull/6370#pullrequestreview-507376410", "createdAt": "2020-10-13T12:26:14Z", "commit": {"oid": "7eebbb6f63ad55554d452d47e8937877aa315ccd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d83b8a048aa3398c1807063c86f2d2c088adfab", "author": {"user": {"login": "melloware", "name": "Melloware"}}, "url": "https://github.com/primefaces/primefaces/commit/1d83b8a048aa3398c1807063c86f2d2c088adfab", "committedDate": "2021-01-05T20:58:21Z", "message": "Merge branch 'master' into patch-5014"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fca3076695ae83a361c8d231a6469f8b6eacbb15", "author": {"user": {"login": "melloware", "name": "Melloware"}}, "url": "https://github.com/primefaces/primefaces/commit/fca3076695ae83a361c8d231a6469f8b6eacbb15", "committedDate": "2021-01-05T21:01:41Z", "message": "Update datatable.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ed1f8e10b2ea88eb6e10097b6e2edfcda961a68", "author": {"user": {"login": "melloware", "name": "Melloware"}}, "url": "https://github.com/primefaces/primefaces/commit/5ed1f8e10b2ea88eb6e10097b6e2edfcda961a68", "committedDate": "2021-02-12T21:31:43Z", "message": "Merge branch 'master' into patch-5014"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2790, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}