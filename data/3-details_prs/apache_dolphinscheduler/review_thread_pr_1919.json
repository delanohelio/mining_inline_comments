{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyODM0OTgz", "number": 1919, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwNTo1MTo0MVrODeVp7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwNTo1NjoyNVrODeVr-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMTM4NjY5OnYy", "diffSide": "RIGHT", "path": "dolphinscheduler-common/src/main/java/org/apache/dolphinscheduler/common/utils/ScriptRunner.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwNTo1MTo0MVrOFnazZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwNjo0NjoxMFrOFnbffA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg3NzkyNg==", "bodyText": "why change this place,if change this,Whether execute success when upgrade in mysql ?", "url": "https://github.com/apache/dolphinscheduler/pull/1919#discussion_r376877926", "createdAt": "2020-02-10T05:51:41Z", "author": {"login": "lgcareer"}, "path": "dolphinscheduler-common/src/main/java/org/apache/dolphinscheduler/common/utils/ScriptRunner.java", "diffHunk": "@@ -169,13 +169,13 @@ private void runScript(Connection conn, Reader reader) throws IOException, SQLEx\n                             if (stopOnError && rs != null) {\n                                 ResultSetMetaData md = rs.getMetaData();\n                                 int cols = md.getColumnCount();\n-                                for (int i = 0; i < cols; i++) {\n+                                for (int i = 1; i < cols; i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3f55118fe0109cba40a277d901156fdd5bcba0c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg3OTEzMw==", "bodyText": "because in pgsql: The number of columns starts from \"1\" and cannot start from \"0\".\ni have test this modify in mysql-5.6 and pg-9.6", "url": "https://github.com/apache/dolphinscheduler/pull/1919#discussion_r376879133", "createdAt": "2020-02-10T05:58:19Z", "author": {"login": "Eights-Li"}, "path": "dolphinscheduler-common/src/main/java/org/apache/dolphinscheduler/common/utils/ScriptRunner.java", "diffHunk": "@@ -169,13 +169,13 @@ private void runScript(Connection conn, Reader reader) throws IOException, SQLEx\n                             if (stopOnError && rs != null) {\n                                 ResultSetMetaData md = rs.getMetaData();\n                                 int cols = md.getColumnCount();\n-                                for (int i = 0; i < cols; i++) {\n+                                for (int i = 1; i < cols; i++) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg3NzkyNg=="}, "originalCommit": {"oid": "f3f55118fe0109cba40a277d901156fdd5bcba0c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg4OTIxMg==", "bodyText": "OK,It's great!", "url": "https://github.com/apache/dolphinscheduler/pull/1919#discussion_r376889212", "createdAt": "2020-02-10T06:46:10Z", "author": {"login": "lgcareer"}, "path": "dolphinscheduler-common/src/main/java/org/apache/dolphinscheduler/common/utils/ScriptRunner.java", "diffHunk": "@@ -169,13 +169,13 @@ private void runScript(Connection conn, Reader reader) throws IOException, SQLEx\n                             if (stopOnError && rs != null) {\n                                 ResultSetMetaData md = rs.getMetaData();\n                                 int cols = md.getColumnCount();\n-                                for (int i = 0; i < cols; i++) {\n+                                for (int i = 1; i < cols; i++) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg3NzkyNg=="}, "originalCommit": {"oid": "f3f55118fe0109cba40a277d901156fdd5bcba0c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMTM5MTk1OnYy", "diffSide": "RIGHT", "path": "sql/upgrade/1.2.2_schema/mysql/dolphinscheduler_dml.sql", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwNTo1NjoyNVrOFna2tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQwNjowMjoyMVrOFna63A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg3ODc3Mw==", "bodyText": "the follow sqls are all execute sql fo QUARTZ,they are already exist in version 1.2.0,So nedd not execute again", "url": "https://github.com/apache/dolphinscheduler/pull/1919#discussion_r376878773", "createdAt": "2020-02-10T05:56:25Z", "author": {"login": "lgcareer"}, "path": "sql/upgrade/1.2.2_schema/mysql/dolphinscheduler_dml.sql", "diffHunk": "@@ -0,0 +1,25 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+SET sql_mode=(SELECT REPLACE(@@sql_mode,'ONLY_FULL_GROUP_BY',''));\n+SET FOREIGN_KEY_CHECKS=0;\n+UPDATE QRTZ_CRON_TRIGGERS SET SCHED_NAME='DolphinScheduler' WHERE SCHED_NAME='EasyScheduler';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3f55118fe0109cba40a277d901156fdd5bcba0c"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg3OTgzNg==", "bodyText": "thx, i will modify it~", "url": "https://github.com/apache/dolphinscheduler/pull/1919#discussion_r376879836", "createdAt": "2020-02-10T06:02:21Z", "author": {"login": "Eights-Li"}, "path": "sql/upgrade/1.2.2_schema/mysql/dolphinscheduler_dml.sql", "diffHunk": "@@ -0,0 +1,25 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+SET sql_mode=(SELECT REPLACE(@@sql_mode,'ONLY_FULL_GROUP_BY',''));\n+SET FOREIGN_KEY_CHECKS=0;\n+UPDATE QRTZ_CRON_TRIGGERS SET SCHED_NAME='DolphinScheduler' WHERE SCHED_NAME='EasyScheduler';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg3ODc3Mw=="}, "originalCommit": {"oid": "f3f55118fe0109cba40a277d901156fdd5bcba0c"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3435, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}