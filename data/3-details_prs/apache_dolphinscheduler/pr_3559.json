{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNjU1NDc4", "number": 3559, "title": "[Improvement][alert]   Optimize alarm information", "bodyText": "Tips\n\nThanks very much for contributing to Apache DolphinScheduler.\nPlease review https://dolphinscheduler.apache.org/en-us/community/index.html before opening a pull request.\n\nWhat is the purpose of the pull request\nOptimize alarm information\nComplete the alarm message through the entity class\nOptimize the host information and remove the ZK path", "createdAt": "2020-08-20T04:56:46Z", "url": "https://github.com/apache/dolphinscheduler/pull/3559", "merged": true, "mergeCommit": {"oid": "2ba529a96c9d100cea090a145737b3971d4406b4"}, "closed": true, "closedAt": "2020-08-25T03:10:45Z", "author": {"login": "felix-thinkingdata"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAWfY_AH2gAyNDcwNjU1NDc4OmIxZDFlNjM1ZWFjYmE1OTE1M2E2ZDk1M2Y2OTI5Y2FlYjA4ZDBkNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCOYfHAFqTQ3NDEwNDAzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b1d1e635eacba59153a6d953f6929caeb08d0d73", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/b1d1e635eacba59153a6d953f6929caeb08d0d73", "committedDate": "2020-08-19T07:29:26Z", "message": "#3299  Json string parsing problem caused by non-standard json format."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5445786e7884fb6642a7ccfa89abebf584c744bd", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/5445786e7884fb6642a7ccfa89abebf584c744bd", "committedDate": "2020-08-19T07:42:50Z", "message": "#3299  Json string parsing problem caused by non-standard json format."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2375aa203af09c9ba20eb6c52d8991c1ad377f6", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/d2375aa203af09c9ba20eb6c52d8991c1ad377f6", "committedDate": "2020-08-19T07:44:35Z", "message": "#3299  Json string parsing problem caused by non-standard json format. fix  code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56653556d7f715c7d9d168edd7c584ae6a5de681", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/56653556d7f715c7d9d168edd7c584ae6a5de681", "committedDate": "2020-08-19T08:04:37Z", "message": "#3299  Json string parsing problem caused by non-standard json format. fix  code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "040c5d67c0dd0adb8e16a303b5ee34eba21621a5", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/040c5d67c0dd0adb8e16a303b5ee34eba21621a5", "committedDate": "2020-08-20T04:45:10Z", "message": "Optimize alarm information"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8abbda2ba1f56b2a543a3133307b192d9246f1bd", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/8abbda2ba1f56b2a543a3133307b192d9246f1bd", "committedDate": "2020-08-20T04:54:55Z", "message": "Merge branch 'dev' into Json\n\n# Conflicts:\n#\tdolphinscheduler-dao/src/main/java/org/apache/dolphinscheduler/dao/AlertDao.java\n#\tdolphinscheduler-server/src/main/java/org/apache/dolphinscheduler/server/utils/AlertManager.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47f3f506e62b7221843acc9720f95acd26ee60c8", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/47f3f506e62b7221843acc9720f95acd26ee60c8", "committedDate": "2020-08-20T05:00:45Z", "message": "fix code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "065ddf493b6d596ebb3a427dd1ffaa049457b1d3", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/065ddf493b6d596ebb3a427dd1ffaa049457b1d3", "committedDate": "2020-08-20T05:02:41Z", "message": "add license"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fcadb6902d74a6d149b5077b08fe355a00f0043", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/8fcadb6902d74a6d149b5077b08fe355a00f0043", "committedDate": "2020-08-20T05:36:23Z", "message": "fix code smell"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDk5Njcz", "url": "https://github.com/apache/dolphinscheduler/pull/3559#pullrequestreview-472099673", "createdAt": "2020-08-21T02:16:17Z", "commit": {"oid": "8fcadb6902d74a6d149b5077b08fe355a00f0043"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwMjoxNjoxOFrOHEZPnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwMjoyNDoxMVrOHEZXLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM2OTk0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        .replaceAll(\"\\\\{corpId\\\\}\", ENTERPRISE_WE_CHAT_CORP_ID)\n          \n          \n            \n                        .replaceAll(\"\\\\{secret\\\\}\", ENTERPRISE_WE_CHAT_SECRET);\n          \n          \n            \n                        .replaceAll(\"\\\\{corpId}\", ENTERPRISE_WE_CHAT_CORP_ID)\n          \n          \n            \n                        .replaceAll(\"\\\\{secret}\", ENTERPRISE_WE_CHAT_SECRET);\n          \n      \n    \n    \n  \n\nPlease change the other part of replaceAll.", "url": "https://github.com/apache/dolphinscheduler/pull/3559#discussion_r474369948", "createdAt": "2020-08-21T02:16:18Z", "author": {"login": "yangyichao-mango"}, "path": "dolphinscheduler-alert/src/main/java/org/apache/dolphinscheduler/alert/utils/EnterpriseWeChatUtils.java", "diffHunk": "@@ -48,8 +55,8 @@\n \n     private static final String ENTERPRISE_WE_CHAT_TOKEN_URL = PropertyUtils.getString(Constants.ENTERPRISE_WECHAT_TOKEN_URL);\n     private static final String ENTERPRISE_WE_CHAT_TOKEN_URL_REPLACE = ENTERPRISE_WE_CHAT_TOKEN_URL == null ? null : ENTERPRISE_WE_CHAT_TOKEN_URL\n-    .replaceAll(\"\\\\{corpId\\\\}\", ENTERPRISE_WE_CHAT_CORP_ID)\n-    .replaceAll(\"\\\\{secret\\\\}\", ENTERPRISE_WE_CHAT_SECRET);\n+            .replaceAll(\"\\\\{corpId\\\\}\", ENTERPRISE_WE_CHAT_CORP_ID)\n+            .replaceAll(\"\\\\{secret\\\\}\", ENTERPRISE_WE_CHAT_SECRET);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fcadb6902d74a6d149b5077b08fe355a00f0043"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM3MTEwMA==", "bodyText": "Is it better to match the logger?\nFor excample: debug, info, warning, error", "url": "https://github.com/apache/dolphinscheduler/pull/3559#discussion_r474371100", "createdAt": "2020-08-21T02:20:57Z", "author": {"login": "yangyichao-mango"}, "path": "dolphinscheduler-common/src/main/java/org/apache/dolphinscheduler/common/enums/AlertWarnLevel.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.dolphinscheduler.common.enums;\n+\n+public enum AlertWarnLevel {\n+\n+    MIDDLE,SERIOUS", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fcadb6902d74a6d149b5077b08fe355a00f0043"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM3MTg4Nw==", "bodyText": "Is this file changes related with this pr?\nIf not related, please revert.", "url": "https://github.com/apache/dolphinscheduler/pull/3559#discussion_r474371887", "createdAt": "2020-08-21T02:24:11Z", "author": {"login": "yangyichao-mango"}, "path": "dolphinscheduler-server/src/main/java/org/apache/dolphinscheduler/server/registry/ZookeeperNodeManager.java", "diffHunk": "@@ -38,33 +35,37 @@\n import java.util.concurrent.locks.Lock;\n import java.util.concurrent.locks.ReentrantLock;\n \n-import static org.apache.dolphinscheduler.common.Constants.DEFAULT_WORKER_GROUP;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.InitializingBean;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Service;\n \n /**\n- *  zookeeper node manager\n+ * zookeeper node manager", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fcadb6902d74a6d149b5077b08fe355a00f0043"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5aeba114f02db7eb0b281f860a9303284beb19c7", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/5aeba114f02db7eb0b281f860a9303284beb19c7", "committedDate": "2020-08-21T05:14:58Z", "message": "Update dolphinscheduler-alert/src/main/java/org/apache/dolphinscheduler/alert/utils/EnterpriseWeChatUtils.java\n\nCo-authored-by: Yichao Yang <1048262223@qq.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d61c977e1b864fc45c471d14a8dcf611e5f8a3d", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/6d61c977e1b864fc45c471d14a8dcf611e5f8a3d", "committedDate": "2020-08-24T03:50:52Z", "message": "fix code smell"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b01ea02329eee226ac70ae0ad3878fc7037ceb7b", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/b01ea02329eee226ac70ae0ad3878fc7037ceb7b", "committedDate": "2020-08-24T05:17:09Z", "message": "fix code smell"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cff96b59306252369145fd1378a2c1596b62bc8", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/5cff96b59306252369145fd1378a2c1596b62bc8", "committedDate": "2020-08-24T06:03:14Z", "message": "\u4fee\u6539ut \u548creplace\u95ee\u9898\u3002"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fdc01595e7ae78731fdadfca603ea859e39efc4", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/1fdc01595e7ae78731fdadfca603ea859e39efc4", "committedDate": "2020-08-24T06:19:06Z", "message": "\u4fee\u6539ut"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MTA0MDM0", "url": "https://github.com/apache/dolphinscheduler/pull/3559#pullrequestreview-474104034", "createdAt": "2020-08-25T03:10:30Z", "commit": {"oid": "1fdc01595e7ae78731fdadfca603ea859e39efc4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1753, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}