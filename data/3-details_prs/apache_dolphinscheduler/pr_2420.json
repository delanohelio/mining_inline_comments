{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyOTkyNzQx", "number": 2420, "title": "1\uff0cno worker condition , master will while ture wait for worker startup 2\uff0cworker response task status sync wait for result", "bodyText": "Tips\n\nThanks very much for contributing to Apache DolphinScheduler.\nPlease review https://dolphinscheduler.apache.org/en-us/community/index.html before opening a pull request.\n\nWhat is the purpose of the pull request\n(For example: This pull request adds checkstyle plugin.)\nBrief change log\n(for example:)\n\nAdd maven-checkstyle-plugin to root pom.xml\n\nVerify this pull request\n(Please pick either of the following options)\nThis pull request is code cleanup without any test coverage.\n(or)\nThis pull request is already covered by existing tests, such as (please describe tests).\n(or)\nThis change added tests and can be verified as follows:\n(example:)\n\nAdded dolphinscheduler-dao tests for end-to-end.\nAdded CronUtilsTest to verify the change.\nManually verified the change by testing locally.", "createdAt": "2020-04-14T06:24:36Z", "url": "https://github.com/apache/dolphinscheduler/pull/2420", "merged": true, "mergeCommit": {"oid": "96835ebda2d4f9c5aa13b39bdd1e90f5d702b2f6"}, "closed": true, "closedAt": "2020-04-15T08:19:43Z", "author": {"login": "qiaozhanwei"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXJ-SLgH2gAyNDAyOTkyNzQxOmNmOTE3ZTkwOWRjNTkwMWJkNjIyMDc1NDY4MWU4Zjg2MGYyY2M0YzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXzrfSAFqTM5MzU1NDI3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cf917e909dc5901bd6220754681e8f860f2cc4c2", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/cf917e909dc5901bd6220754681e8f860f2cc4c2", "committedDate": "2020-04-13T07:43:31Z", "message": "dispatch task fail will set task status failed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a27507a10ec91810f80a0f18f63a7e38f918f8f", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/1a27507a10ec91810f80a0f18f63a7e38f918f8f", "committedDate": "2020-04-14T05:46:31Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95d58a295d58a3e5240a464e54b8e30445672034", "author": {"user": {"login": "qiaozhanwei", "name": "qiaozhanwei"}}, "url": "https://github.com/apache/dolphinscheduler/commit/95d58a295d58a3e5240a464e54b8e30445672034", "committedDate": "2020-04-14T06:30:48Z", "message": "Merge branch 'dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "349dd18c7d28a8064a00dd1defd4401720bcb785", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/349dd18c7d28a8064a00dd1defd4401720bcb785", "committedDate": "2020-04-14T06:36:31Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "facb043b451d6eae29f52bbd373397f908d1bf81", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/facb043b451d6eae29f52bbd373397f908d1bf81", "committedDate": "2020-04-14T06:36:50Z", "message": "Merge remote-tracking branch 'origin/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7bbc5f2ed256202bfefbdf3046483bf012b7bbd", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/a7bbc5f2ed256202bfefbdf3046483bf012b7bbd", "committedDate": "2020-04-14T08:15:59Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d79562dd7a70269e491f6eaf372c37b96879735", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/1d79562dd7a70269e491f6eaf372c37b96879735", "committedDate": "2020-04-14T08:38:20Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cd1ce6a6340f1edad960dc6a16ea48680005c76", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/1cd1ce6a6340f1edad960dc6a16ea48680005c76", "committedDate": "2020-04-14T08:44:13Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c6b0f297095669a3f8d4baec31d1c8c6786782d", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/0c6b0f297095669a3f8d4baec31d1c8c6786782d", "committedDate": "2020-04-14T09:42:15Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33ec332a2fc20cc0c0e0b2837f4b85be00742562", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/33ec332a2fc20cc0c0e0b2837f4b85be00742562", "committedDate": "2020-04-14T10:07:32Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd1003f897cebdaa38f6b79038bdb0bc410b7b5c", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/bd1003f897cebdaa38f6b79038bdb0bc410b7b5c", "committedDate": "2020-04-14T10:40:54Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a25f2e8c53f6de32e1168d731726dbcbe876acee", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/a25f2e8c53f6de32e1168d731726dbcbe876acee", "committedDate": "2020-04-15T06:56:27Z", "message": "Merge remote-tracking branch 'remotes/upstream/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f29f45e4fcb38c3163a0458054202154b843089d", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/f29f45e4fcb38c3163a0458054202154b843089d", "committedDate": "2020-04-15T07:33:02Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNTMyMDIz", "url": "https://github.com/apache/dolphinscheduler/pull/2420#pullrequestreview-393532023", "createdAt": "2020-04-15T07:47:20Z", "commit": {"oid": "f29f45e4fcb38c3163a0458054202154b843089d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNTM0MzI5", "url": "https://github.com/apache/dolphinscheduler/pull/2420#pullrequestreview-393534329", "createdAt": "2020-04-15T07:50:51Z", "commit": {"oid": "f29f45e4fcb38c3163a0458054202154b843089d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwNzo1MDo1MVrOGFt4XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwNzo1MDo1MVrOGFt4XA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY0Nzc3Mg==", "bodyText": "when error\uff0c should sleep(200~1000).", "url": "https://github.com/apache/dolphinscheduler/pull/2420#discussion_r408647772", "createdAt": "2020-04-15T07:50:51Z", "author": {"login": "Technoboy-"}, "path": "dolphinscheduler-server/src/main/java/org/apache/dolphinscheduler/server/master/consumer/TaskPriorityQueueConsumer.java", "diffHunk": "@@ -114,13 +114,19 @@ public void run() {\n     private Boolean dispatch(int taskInstanceId){\n         TaskExecutionContext context = getTaskExecutionContext(taskInstanceId);\n         ExecutionContext executionContext = new ExecutionContext(context.toCommand(), ExecutorType.WORKER, context.getWorkerGroup());\n-        try {\n-            return dispatcher.dispatch(executionContext);\n-        } catch (ExecuteException e) {\n-            logger.error(\"execute exception\", e);\n-            return false;\n-        }\n+        Boolean result = false;\n+        while (Stopper.isRunning()){\n+            try {\n+                result =  dispatcher.dispatch(executionContext);\n+            } catch (ExecuteException e) {\n+                logger.error(\"dispatch error\",e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f29f45e4fcb38c3163a0458054202154b843089d"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3eb306d7602d3a7f253862a284614bf898c8d4c", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/f3eb306d7602d3a7f253862a284614bf898c8d4c", "committedDate": "2020-04-15T08:01:45Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc84b83111bad392f684fa01d0515f1a42fdb3d7", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/bc84b83111bad392f684fa01d0515f1a42fdb3d7", "committedDate": "2020-04-15T08:02:55Z", "message": "1\uff0cno worker condition , master will while ture wait for worker startup\n2\uff0cworker response task status sync wait for result"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNTU0Mjc0", "url": "https://github.com/apache/dolphinscheduler/pull/2420#pullrequestreview-393554274", "createdAt": "2020-04-15T08:19:00Z", "commit": {"oid": "bc84b83111bad392f684fa01d0515f1a42fdb3d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2030, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}