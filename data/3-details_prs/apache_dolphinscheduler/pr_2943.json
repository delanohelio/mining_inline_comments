{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyMTQ4ODgw", "number": 2943, "title": "Sqoop task optimization", "bodyText": "What is the purpose of the pull request\n#2917 #2763\nsqoop task optimization\nBrief change log\n\nAdd CUSTOM and TAMELATE job for sqoop task\nsupport hadoop params like mr job name, etc\nsuooprt sqoop advanced params like --direct & --fetch-size, etc\nAdd sqoop task front-end selection box cascade display\nfix bug : java map fields and hive map fields generate error\n\nVerify this pull request\n\n/server/worker/task/sqoop/SqoopTaskTest.java", "createdAt": "2020-06-10T01:35:48Z", "url": "https://github.com/apache/dolphinscheduler/pull/2943", "merged": true, "mergeCommit": {"oid": "a7fd0a523c0901ce9a831078abf94c9873e4ee09"}, "closed": true, "closedAt": "2020-06-11T03:45:01Z", "author": {"login": "Eights-Li"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpiU57gH2gAyNDMyMTQ4ODgwOmM4ZjI4YWIyYmE4NjVhNDAwNjM0ODZjYTA4NzllZjE4MzM0MjA4NmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqF657AFqTQyODU3MjQ4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c8f28ab2ba865a40063486ca0879ef183342086d", "author": {"user": {"login": "Eights-Li", "name": "Yelli"}}, "url": "https://github.com/apache/dolphinscheduler/commit/c8f28ab2ba865a40063486ca0879ef183342086d", "committedDate": "2020-06-09T10:16:35Z", "message": "sqoop task optimization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50da6951fc09b436eabf3fc2ab6338f325c32fd5", "author": {"user": {"login": "Eights-Li", "name": "Yelli"}}, "url": "https://github.com/apache/dolphinscheduler/commit/50da6951fc09b436eabf3fc2ab6338f325c32fd5", "committedDate": "2020-06-09T10:39:29Z", "message": "sqoop front-end optimization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d83d797d3b2df8b16e94355925bc371a09c91c8", "author": {"user": {"login": "Eights-Li", "name": "Yelli"}}, "url": "https://github.com/apache/dolphinscheduler/commit/5d83d797d3b2df8b16e94355925bc371a09c91c8", "committedDate": "2020-06-10T01:11:17Z", "message": "modify sqoop task UT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "822addac30278303674cc9468bdef631a69ab33a", "author": {"user": {"login": "Eights-Li", "name": "Yelli"}}, "url": "https://github.com/apache/dolphinscheduler/commit/822addac30278303674cc9468bdef631a69ab33a", "committedDate": "2020-06-10T02:43:22Z", "message": "add sqoop task UT to pom"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a64c2b383e4def27bd4eb90f1e1df3fe26ab54c8", "author": {"user": {"login": "Eights-Li", "name": "Yelli"}}, "url": "https://github.com/apache/dolphinscheduler/commit/a64c2b383e4def27bd4eb90f1e1df3fe26ab54c8", "committedDate": "2020-06-10T02:44:51Z", "message": "Merge branch 'dev' of https://github.com/apache/incubator-dolphinscheduler into dev"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3OTgxMDYx", "url": "https://github.com/apache/dolphinscheduler/pull/2943#pullrequestreview-427981061", "createdAt": "2020-06-10T12:00:51Z", "commit": {"oid": "a64c2b383e4def27bd4eb90f1e1df3fe26ab54c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMjowMDo1MlrOGhxiAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxMjowMDo1MlrOGhxiAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA2NzcxNA==", "bodyText": "If return null, I see the follow-up code, the task will eventually be judged as successful.", "url": "https://github.com/apache/dolphinscheduler/pull/2943#discussion_r438067714", "createdAt": "2020-06-10T12:00:52Z", "author": {"login": "wen-hemin"}, "path": "dolphinscheduler-server/src/main/java/org/apache/dolphinscheduler/server/worker/task/sqoop/generator/SqoopJobGenerator.java", "diffHunk": "@@ -62,14 +63,23 @@ private void createSqoopJobGenerator(String sourceType,String targetType){\n      * @return\n      */\n     public String generateSqoopJob(SqoopParameters sqoopParameters,TaskExecutionContext taskExecutionContext){\n-        createSqoopJobGenerator(sqoopParameters.getSourceType(),sqoopParameters.getTargetType());\n-        if(sourceGenerator == null || targetGenerator == null){\n-            return null;\n+\n+        String sqoopScripts = \"\";\n+\n+        if (SqoopJobType.TEMPLATE.getDescp().equals(sqoopParameters.getJobType())) {\n+            createSqoopJobGenerator(sqoopParameters.getSourceType(),sqoopParameters.getTargetType());\n+            if(sourceGenerator == null || targetGenerator == null){\n+                return null;\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a64c2b383e4def27bd4eb90f1e1df3fe26ab54c8"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a420644aa3232de564725ceaf7f6b194ac53feb0", "author": {"user": {"login": "Eights-Li", "name": "Yelli"}}, "url": "https://github.com/apache/dolphinscheduler/commit/a420644aa3232de564725ceaf7f6b194ac53feb0", "committedDate": "2020-06-10T14:20:01Z", "message": "sqoop task source type or target type is null throw exception"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NTcyNDg1", "url": "https://github.com/apache/dolphinscheduler/pull/2943#pullrequestreview-428572485", "createdAt": "2020-06-11T03:44:46Z", "commit": {"oid": "a420644aa3232de564725ceaf7f6b194ac53feb0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1999, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}