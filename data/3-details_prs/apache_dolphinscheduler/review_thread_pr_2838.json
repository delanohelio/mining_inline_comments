{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MzAxMzEx", "number": 2838, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMjo1NjoyMlrOEAvU0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMjo1NjoyMlrOEAvU0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MjEwODM0OnYy", "diffSide": "RIGHT", "path": "dolphinscheduler-dao/src/main/java/org/apache/dolphinscheduler/dao/upgrade/DolphinSchedulerManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMjo1NjoyMlrOGcNMeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwOToxNjo1M1rOGcVJ0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIyOTQ5Ng==", "bodyText": "Hi,why remove to this place,it will run more one times", "url": "https://github.com/apache/dolphinscheduler/pull/2838#discussion_r432229496", "createdAt": "2020-05-29T02:56:22Z", "author": {"login": "lgcareer"}, "path": "dolphinscheduler-dao/src/main/java/org/apache/dolphinscheduler/dao/upgrade/DolphinSchedulerManager.java", "diffHunk": "@@ -112,11 +112,12 @@ public void upgradeDolphinScheduler() throws Exception{\n             for(String schemaDir : schemaList) {\n                 schemaVersion = schemaDir.split(\"_\")[0];\n                 if(SchemaUtils.isAGreatVersion(schemaVersion , version)) {\n-\n-                    logger.info(\"upgrade DolphinScheduler metadata version from \" + version + \" to \" + schemaVersion);\n-\n+                    logger.info(\"upgrade DolphinScheduler metadata version from {} to {}\", version, schemaVersion);\n                     logger.info(\"Begin upgrading DolphinScheduler's table structure\");\n                     upgradeDao.upgradeDolphinScheduler(schemaDir);\n+                    if (upgradeDao.isExistsTable(\"t_ds_worker_group\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e021e0031de76bfa36830e66a11f46b70a611c8e"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM1OTg5MA==", "bodyText": "Yes, need according to ds-version to exec upgrade worker group", "url": "https://github.com/apache/dolphinscheduler/pull/2838#discussion_r432359890", "createdAt": "2020-05-29T09:16:53Z", "author": {"login": "Eights-Li"}, "path": "dolphinscheduler-dao/src/main/java/org/apache/dolphinscheduler/dao/upgrade/DolphinSchedulerManager.java", "diffHunk": "@@ -112,11 +112,12 @@ public void upgradeDolphinScheduler() throws Exception{\n             for(String schemaDir : schemaList) {\n                 schemaVersion = schemaDir.split(\"_\")[0];\n                 if(SchemaUtils.isAGreatVersion(schemaVersion , version)) {\n-\n-                    logger.info(\"upgrade DolphinScheduler metadata version from \" + version + \" to \" + schemaVersion);\n-\n+                    logger.info(\"upgrade DolphinScheduler metadata version from {} to {}\", version, schemaVersion);\n                     logger.info(\"Begin upgrading DolphinScheduler's table structure\");\n                     upgradeDao.upgradeDolphinScheduler(schemaDir);\n+                    if (upgradeDao.isExistsTable(\"t_ds_worker_group\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIyOTQ5Ng=="}, "originalCommit": {"oid": "e021e0031de76bfa36830e66a11f46b70a611c8e"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3485, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}