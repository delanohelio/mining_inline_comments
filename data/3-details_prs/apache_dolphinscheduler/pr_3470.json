{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2NDcwNzc5", "number": 3470, "title": "[Bug-3466][Worker]Fix zookeeper path end with / character error", "bodyText": "What is the purpose of the pull request\nThis pull request fix zookeeper path end with / character error #3466\nBrief change log\nVerify this pull request", "createdAt": "2020-08-12T02:42:37Z", "url": "https://github.com/apache/dolphinscheduler/pull/3470", "merged": true, "mergeCommit": {"oid": "a7a1156ff1002031c87c29bd737d8f9f0488cea1"}, "closed": true, "closedAt": "2020-08-12T09:16:44Z", "author": {"login": "zixi0825"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-CKo2gH2gAyNDY2NDcwNzc5OmU2ZmRmZTk5MWFiY2I5NTEyZDIzNGJlMmNjYWM2ZTAzZDg3MThjMzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-H0hAgFqTQ2NTczNTMxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e6fdfe991abcb9512d234be2ccac6e03d8718c34", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/e6fdfe991abcb9512d234be2ccac6e03d8718c34", "committedDate": "2020-08-12T02:40:49Z", "message": "fix zk path error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NTgwOTgx", "url": "https://github.com/apache/dolphinscheduler/pull/3470#pullrequestreview-465580981", "createdAt": "2020-08-12T04:21:26Z", "commit": {"oid": "e6fdfe991abcb9512d234be2ccac6e03d8718c34"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NjQ3NTEw", "url": "https://github.com/apache/dolphinscheduler/pull/3470#pullrequestreview-465647510", "createdAt": "2020-08-12T07:14:16Z", "commit": {"oid": "e6fdfe991abcb9512d234be2ccac6e03d8718c34"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzoxNDoxNlrOG_Us3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzoxNDoxNlrOG_Us3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1MjYzOQ==", "bodyText": "@CalvinKirs Please check if remove this SLASH, will the weight load balance produce error?\nI understand that ZK path is only used to distinguish workers. We only need to use host and port to uniquely determine a worker. If we add weight information, the following situations may occur:\nds/worker/default/122.2.2.2:1:100\nds/worker/default/122.2.2.2:1:200\nSo will it better to add the weight to heartbeatinfo, not in the zk path?", "url": "https://github.com/apache/dolphinscheduler/pull/3470#discussion_r469052639", "createdAt": "2020-08-12T07:14:16Z", "author": {"login": "yangyichao-mango"}, "path": "dolphinscheduler-server/src/main/java/org/apache/dolphinscheduler/server/worker/registry/WorkerRegistry.java", "diffHunk": "@@ -152,7 +152,7 @@ public void unRegistry() {\n             // trim and lower case is need\n             workerZkPathBuilder.append(workGroup.trim().toLowerCase()).append(SLASH);\n             workerZkPathBuilder.append(address);\n-            workerZkPathBuilder.append(weight).append(SLASH);\n+            workerZkPathBuilder.append(weight);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6fdfe991abcb9512d234be2ccac6e03d8718c34"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NzIwNTY2", "url": "https://github.com/apache/dolphinscheduler/pull/3470#pullrequestreview-465720566", "createdAt": "2020-08-12T08:55:24Z", "commit": {"oid": "e6fdfe991abcb9512d234be2ccac6e03d8718c34"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NzM1MzEx", "url": "https://github.com/apache/dolphinscheduler/pull/3470#pullrequestreview-465735311", "createdAt": "2020-08-12T09:15:18Z", "commit": {"oid": "e6fdfe991abcb9512d234be2ccac6e03d8718c34"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwOToxNToxOFrOG_Y3yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwOToxNToxOFrOG_Y3yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTEyMDk3MQ==", "bodyText": "@yangyichao-mango Yes, I also think it's better to separate them", "url": "https://github.com/apache/dolphinscheduler/pull/3470#discussion_r469120971", "createdAt": "2020-08-12T09:15:18Z", "author": {"login": "gabrywu"}, "path": "dolphinscheduler-server/src/main/java/org/apache/dolphinscheduler/server/worker/registry/WorkerRegistry.java", "diffHunk": "@@ -152,7 +152,7 @@ public void unRegistry() {\n             // trim and lower case is need\n             workerZkPathBuilder.append(workGroup.trim().toLowerCase()).append(SLASH);\n             workerZkPathBuilder.append(address);\n-            workerZkPathBuilder.append(weight).append(SLASH);\n+            workerZkPathBuilder.append(weight);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1MjYzOQ=="}, "originalCommit": {"oid": "e6fdfe991abcb9512d234be2ccac6e03d8718c34"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1738, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}