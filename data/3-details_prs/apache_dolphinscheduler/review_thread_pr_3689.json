{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxNzQ4MDEx", "number": 3689, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo1Njo1N1rOEhUDJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo1Njo1N1rOEhUDJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMzY2OTQ4OnYy", "diffSide": "RIGHT", "path": "sql/dolphinscheduler_mysql.sql", "isResolved": false, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNTo1Njo1N1rOHOj11w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNjo1NjoxNVrOHZdchg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyOTMzNQ==", "bodyText": "Why need to use utf8 to replace utd8mb4?", "url": "https://github.com/apache/dolphinscheduler/pull/3689#discussion_r485029335", "createdAt": "2020-09-08T15:56:57Z", "author": {"login": "yangyichao-mango"}, "path": "sql/dolphinscheduler_mysql.sql", "diffHunk": "@@ -248,7 +248,7 @@ CREATE TABLE `QRTZ_TRIGGERS` (\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_STATE`),\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE_GRP` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_GROUP`,`TRIGGER_STATE`),\n   CONSTRAINT `QRTZ_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`) REFERENCES `QRTZ_JOB_DETAILS` (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`)\n-) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc45490d02e1e641e7d75ab12ea66bcdc5b40527"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI5NzU2MA==", "bodyText": "https://www.cnblogs.com/cuiqq/p/11045487.html\nI read this post and didn't quite understand the need to change the coding format.", "url": "https://github.com/apache/dolphinscheduler/pull/3689#discussion_r485297560", "createdAt": "2020-09-09T02:17:54Z", "author": {"login": "felix-thinkingdata"}, "path": "sql/dolphinscheduler_mysql.sql", "diffHunk": "@@ -248,7 +248,7 @@ CREATE TABLE `QRTZ_TRIGGERS` (\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_STATE`),\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE_GRP` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_GROUP`,`TRIGGER_STATE`),\n   CONSTRAINT `QRTZ_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`) REFERENCES `QRTZ_JOB_DETAILS` (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`)\n-) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyOTMzNQ=="}, "originalCommit": {"oid": "dc45490d02e1e641e7d75ab12ea66bcdc5b40527"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMwMjY5Mw==", "bodyText": "I checked the qrtz related tables and will not write 4-byte Unicode. Utf8mb4 encoding will cause the index of qrtz related tables to exceed the default value of MySQL, which will cause many users to fail to create tables.", "url": "https://github.com/apache/dolphinscheduler/pull/3689#discussion_r485302693", "createdAt": "2020-09-09T02:37:41Z", "author": {"login": "JinyLeeChina"}, "path": "sql/dolphinscheduler_mysql.sql", "diffHunk": "@@ -248,7 +248,7 @@ CREATE TABLE `QRTZ_TRIGGERS` (\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_STATE`),\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE_GRP` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_GROUP`,`TRIGGER_STATE`),\n   CONSTRAINT `QRTZ_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`) REFERENCES `QRTZ_JOB_DETAILS` (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`)\n-) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyOTMzNQ=="}, "originalCommit": {"oid": "dc45490d02e1e641e7d75ab12ea66bcdc5b40527"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMzNzcyNA==", "bodyText": "I checked the qrtz related tables and will not write 4-byte Unicode. Utf8mb4 encoding will cause the index of qrtz related tables to exceed the default value of MySQL, which will cause many users to fail to create tables.\n\n\nWhich version of your mysql?", "url": "https://github.com/apache/dolphinscheduler/pull/3689#discussion_r485337724", "createdAt": "2020-09-09T04:56:00Z", "author": {"login": "yangyichao-mango"}, "path": "sql/dolphinscheduler_mysql.sql", "diffHunk": "@@ -248,7 +248,7 @@ CREATE TABLE `QRTZ_TRIGGERS` (\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_STATE`),\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE_GRP` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_GROUP`,`TRIGGER_STATE`),\n   CONSTRAINT `QRTZ_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`) REFERENCES `QRTZ_JOB_DETAILS` (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`)\n-) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyOTMzNQ=="}, "originalCommit": {"oid": "dc45490d02e1e641e7d75ab12ea66bcdc5b40527"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTU2NzAwNQ==", "bodyText": "Version 5.6, I think there are many users of this version of MySQL, we should be compatible", "url": "https://github.com/apache/dolphinscheduler/pull/3689#discussion_r485567005", "createdAt": "2020-09-09T12:21:10Z", "author": {"login": "JinyLeeChina"}, "path": "sql/dolphinscheduler_mysql.sql", "diffHunk": "@@ -248,7 +248,7 @@ CREATE TABLE `QRTZ_TRIGGERS` (\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_STATE`),\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE_GRP` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_GROUP`,`TRIGGER_STATE`),\n   CONSTRAINT `QRTZ_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`) REFERENCES `QRTZ_JOB_DETAILS` (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`)\n-) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyOTMzNQ=="}, "originalCommit": {"oid": "dc45490d02e1e641e7d75ab12ea66bcdc5b40527"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ1Nzg0NQ==", "bodyText": "Hi,we should discuss first,the utf8mb4 is suggested to use in mysql.You can see the article below.\nhttps://medium.com/@adamhooper/in-mysql-never-use-utf8-use-utf8mb4-11761243e434\nI saw the error you pointed Index column size too large. The maximum column size is 767 bytes.The another article give a method to resolve it.\nhttps://www.jianshu.com/p/5c0cce24189b", "url": "https://github.com/apache/dolphinscheduler/pull/3689#discussion_r496457845", "createdAt": "2020-09-29T06:54:16Z", "author": {"login": "lgcareer"}, "path": "sql/dolphinscheduler_mysql.sql", "diffHunk": "@@ -248,7 +248,7 @@ CREATE TABLE `QRTZ_TRIGGERS` (\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_STATE`),\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE_GRP` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_GROUP`,`TRIGGER_STATE`),\n   CONSTRAINT `QRTZ_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`) REFERENCES `QRTZ_JOB_DETAILS` (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`)\n-) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyOTMzNQ=="}, "originalCommit": {"oid": "dc45490d02e1e641e7d75ab12ea66bcdc5b40527"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ1ODg4Ng==", "bodyText": "I will send a email in the dev list,we can discuss it which charset we need to choose.", "url": "https://github.com/apache/dolphinscheduler/pull/3689#discussion_r496458886", "createdAt": "2020-09-29T06:56:15Z", "author": {"login": "lgcareer"}, "path": "sql/dolphinscheduler_mysql.sql", "diffHunk": "@@ -248,7 +248,7 @@ CREATE TABLE `QRTZ_TRIGGERS` (\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_STATE`),\n   KEY `IDX_QRTZ_T_NFT_ST_MISFIRE_GRP` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_GROUP`,`TRIGGER_STATE`),\n   CONSTRAINT `QRTZ_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`) REFERENCES `QRTZ_JOB_DETAILS` (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`)\n-) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAyOTMzNQ=="}, "originalCommit": {"oid": "dc45490d02e1e641e7d75ab12ea66bcdc5b40527"}, "originalPosition": 95}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3306, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}