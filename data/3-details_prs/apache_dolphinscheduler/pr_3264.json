{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0NTI0MDI0", "number": 3264, "title": "[Fix-3262][common]   When you request the URL through applicationID to get the application status, you cannot get it if Kerberos authentication is enabled ", "bodyText": "[Bug][dolphinscheduler-common] When you request the URL through applicationID to get the application status, you cannot get it if Kerberos authentication is enabled #3262\nTips\nThanks very much for contributing to Apache DolphinScheduler.\nPlease review https://dolphinscheduler.apache.org/en-us/community/index.html before opening a pull request.\nWhat is the purpose of the pull request\nfix #3262", "createdAt": "2020-07-21T13:58:09Z", "url": "https://github.com/apache/dolphinscheduler/pull/3264", "merged": true, "mergeCommit": {"oid": "5584f0cb4d27e3ae64ec28c65a8669b38c75d188"}, "closed": true, "closedAt": "2020-08-10T07:18:02Z", "author": {"login": "felix-thinkingdata"}, "timelineItems": {"totalCount": 46, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyyF2GAH2gAyNDU0NTI0MDI0Ojc5ZDUxZmZjYjU5NGIyN2Y5MmM3ZTUzMjY2YjBkZTU1YTdhNGQ3NDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9c7ZggFqTQ2NDAwMTExOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "79d51ffcb594b27f92c7e53266b0de55a7a4d743", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/79d51ffcb594b27f92c7e53266b0de55a7a4d743", "committedDate": "2020-07-08T03:43:56Z", "message": "fix bug #3165   get resource.storage.type value   toUpperCase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ec281ef6846d6f41a7da87ab6831ece82db08b8", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/4ec281ef6846d6f41a7da87ab6831ece82db08b8", "committedDate": "2020-07-08T04:16:01Z", "message": "Merge branch 'dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df871c4199a646612770a0f00afc6945011f87a4", "author": {"user": {"login": "dailidong", "name": "lidongdai"}}, "url": "https://github.com/apache/dolphinscheduler/commit/df871c4199a646612770a0f00afc6945011f87a4", "committedDate": "2020-07-09T10:00:14Z", "message": "Merge branch 'dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24b418ca66f69684eebcbbae358e9b42e6b7c898", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/24b418ca66f69684eebcbbae358e9b42e6b7c898", "committedDate": "2020-07-10T06:10:02Z", "message": "fix bug #3176  optimize Gets the value of this property \u201cresource.storage.type\u201d"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c1c915d81160a97387823dcefa363e9cbe2e005", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/3c1c915d81160a97387823dcefa363e9cbe2e005", "committedDate": "2020-07-10T06:28:32Z", "message": "Merge branch 'dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4669a5e63ad7ae301447d872eb9d2dd96527c3bb", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/4669a5e63ad7ae301447d872eb9d2dd96527c3bb", "committedDate": "2020-07-10T07:43:54Z", "message": "Merge branch 'apache/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fc0251189d6bc3b69f132584600ad16bedda62e", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/9fc0251189d6bc3b69f132584600ad16bedda62e", "committedDate": "2020-07-13T04:03:52Z", "message": "Merge branch 'apache/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee257982dc12fd4119713f8284b919f6ad6c5f71", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/ee257982dc12fd4119713f8284b919f6ad6c5f71", "committedDate": "2020-07-15T11:01:45Z", "message": "Merge branch 'github-local/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34ef99ebdfbe1d8914259fdd907579a368623f6e", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/34ef99ebdfbe1d8914259fdd907579a368623f6e", "committedDate": "2020-07-21T13:22:10Z", "message": "fix When you request the URL through applicationID to get the application status, you cannot get it if Kerberos authentication is enabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aade38b4f483a769ad979f5e6463ca5867e08076", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/aade38b4f483a769ad979f5e6463ca5867e08076", "committedDate": "2020-07-21T13:27:45Z", "message": "Merge branch 'github-local/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3cf9d95b0e2862ca9e7eadbbf31edb23175bbd0", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/d3cf9d95b0e2862ca9e7eadbbf31edb23175bbd0", "committedDate": "2020-07-21T13:39:01Z", "message": "fix When you request the URL through applicationID to get the application status, you cannot get it if Kerberos authentication is enabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85f17994a65526a4170c9cddc647551ef99ba00e", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/85f17994a65526a4170c9cddc647551ef99ba00e", "committedDate": "2020-07-21T13:39:28Z", "message": "fix When you request the URL through applicationID to get the application status, you cannot get it if Kerberos authentication is enabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63dd34563000310af7dfbe22c0d8b4b1942ead70", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/63dd34563000310af7dfbe22c0d8b4b1942ead70", "committedDate": "2020-07-21T13:54:32Z", "message": "fix miss"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7612e85de57dc9d0f7dd7fb40931ce448e9775f4", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/7612e85de57dc9d0f7dd7fb40931ce448e9775f4", "committedDate": "2020-07-22T03:27:04Z", "message": "add KerberosHttpClient fix  kerberos bug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0a368cb8a98da48e2ef97246fcb1854713efec5", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/e0a368cb8a98da48e2ef97246fcb1854713efec5", "committedDate": "2020-07-22T03:48:15Z", "message": "fix map init"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff77096cf8f7b6802cfb0af13471bd0764f3e624", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/ff77096cf8f7b6802cfb0af13471bd0764f3e624", "committedDate": "2020-07-22T04:12:17Z", "message": "Merge branch 'github-local/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eef16555bd6022a0a943b5c8870124df5d0556e8", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/eef16555bd6022a0a943b5c8870124df5d0556e8", "committedDate": "2020-07-22T04:29:07Z", "message": "add juint test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0408a0af7431a34f6952249360411e0f93fa79fb", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/0408a0af7431a34f6952249360411e0f93fa79fb", "committedDate": "2020-07-22T05:35:50Z", "message": "Extraction of public methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "baf3b48b182dea13c902c78b011ec3262429f61f", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/baf3b48b182dea13c902c78b011ec3262429f61f", "committedDate": "2020-07-22T05:55:47Z", "message": "Extraction of public methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "764c49e637ac04b3d3b879201a2f09f459b10565", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/764c49e637ac04b3d3b879201a2f09f459b10565", "committedDate": "2020-07-22T06:02:39Z", "message": "Fix code quality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d40db6504b9600639a8fd9f595a5c41f072026dc", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/d40db6504b9600639a8fd9f595a5c41f072026dc", "committedDate": "2020-07-22T06:20:25Z", "message": "Fix code quality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d8b919ca6ee9937153358e47df83a98b49349dd", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/9d8b919ca6ee9937153358e47df83a98b49349dd", "committedDate": "2020-07-22T06:38:35Z", "message": "Fix code quality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67affb863cace23c2354b90a9c4702f0579e3199", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/67affb863cace23c2354b90a9c4702f0579e3199", "committedDate": "2020-07-22T06:42:33Z", "message": "Fix code quality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a35e2a4cb951328fcb65f3dd7821765b89f1098", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/5a35e2a4cb951328fcb65f3dd7821765b89f1098", "committedDate": "2020-07-22T06:59:39Z", "message": "Fix code quality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22868554064065057cc56f50c7de2fdded802741", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/22868554064065057cc56f50c7de2fdded802741", "committedDate": "2020-07-22T08:02:19Z", "message": "Fix code quality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbe8746fec992fa71532a2c1d57f22702815359e", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/cbe8746fec992fa71532a2c1d57f22702815359e", "committedDate": "2020-07-22T08:36:10Z", "message": "Fix code quality"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "764d3f233811a0f2b556beed26271dc7dd729a4a", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/764d3f233811a0f2b556beed26271dc7dd729a4a", "committedDate": "2020-07-22T09:10:08Z", "message": "rebuild test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMjU3MzM2", "url": "https://github.com/apache/dolphinscheduler/pull/3264#pullrequestreview-453257336", "createdAt": "2020-07-22T12:13:43Z", "commit": {"oid": "764d3f233811a0f2b556beed26271dc7dd729a4a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjoxMzo0M1rOG1fpYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjoxMzo0M1rOG1fpYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc0NjIwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tboolean kerberState =PropertyUtils.getBoolean(Constants.HADOOP_SECURITY_AUTHENTICATION_STARTUP_STATE, false);\n          \n          \n            \n            \t\tboolean kerberState = PropertyUtils.getBoolean(Constants.HADOOP_SECURITY_AUTHENTICATION_STARTUP_STATE, false);", "url": "https://github.com/apache/dolphinscheduler/pull/3264#discussion_r458746209", "createdAt": "2020-07-22T12:13:43Z", "author": {"login": "yangyichao-mango"}, "path": "dolphinscheduler-common/src/main/java/org/apache/dolphinscheduler/common/utils/HttpUtils.java", "diffHunk": "@@ -33,66 +33,88 @@\n  * http utils\n  */\n public class HttpUtils {\n-\t\n-\t\n+\n+\n \tpublic static final Logger logger = LoggerFactory.getLogger(HttpUtils.class);\n \n \t/**\n \t * get http request content\n+\t *\n \t * @param url url\n \t * @return http get request response content\n \t */\n \tpublic static String get(String url){\n-\t\tCloseableHttpClient httpclient = HttpClients.createDefault();\n+\t\tboolean kerberState =PropertyUtils.getBoolean(Constants.HADOOP_SECURITY_AUTHENTICATION_STARTUP_STATE, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "764d3f233811a0f2b556beed26271dc7dd729a4a"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21ecc8c4db30c37ee55fc9871f2346bf3e75b660", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/21ecc8c4db30c37ee55fc9871f2346bf3e75b660", "committedDate": "2020-07-22T14:44:02Z", "message": "Merge branch 'github-local/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cb0289959c235dbd669ee28460747a484add1ec", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/6cb0289959c235dbd669ee28460747a484add1ec", "committedDate": "2020-07-23T08:37:57Z", "message": "rebuild test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0ODMwOTc1", "url": "https://github.com/apache/dolphinscheduler/pull/3264#pullrequestreview-454830975", "createdAt": "2020-07-24T12:01:32Z", "commit": {"oid": "6cb0289959c235dbd669ee28460747a484add1ec"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "841d18e78599ac7a68d20555296afc17bf0e5771", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/841d18e78599ac7a68d20555296afc17bf0e5771", "committedDate": "2020-07-27T07:17:20Z", "message": "check style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cd1ab0397eebcc0bd66c88b256ac96a53da7f76", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/5cd1ab0397eebcc0bd66c88b256ac96a53da7f76", "committedDate": "2020-07-27T07:19:23Z", "message": "check style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8103c7587c6ce4d6ce4b0b421f9b5c5a1ab1e829", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/8103c7587c6ce4d6ce4b0b421f9b5c5a1ab1e829", "committedDate": "2020-07-27T07:20:28Z", "message": "check style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3aebb7c749dd025c5cd954a38a0f8338fa6efca6", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/3aebb7c749dd025c5cd954a38a0f8338fa6efca6", "committedDate": "2020-07-27T07:30:40Z", "message": "Merge branch 'github-local/dev' into dev"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NzIxNTQ4", "url": "https://github.com/apache/dolphinscheduler/pull/3264#pullrequestreview-455721548", "createdAt": "2020-07-27T12:10:09Z", "commit": {"oid": "3aebb7c749dd025c5cd954a38a0f8338fa6efca6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxMjoxMDowOVrOG3ftTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxMjoxMDowOVrOG3ftTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDM2Ng==", "bodyText": "Hi~,\nBecause KERBER is only used for HADOOP_SECURITY_AUTHENTICATION, which belongs to a specific business logic. Therefore, the judgment of kerberstate suggests that it should be implemented in the business logic class not uilts class, and it is recommended to write a new get method specifically used to return KerberosHttpclient.\nFor example: If the user sets kerberstate to true, then when we use httputils.get in other places, a new kerberhttpclient will appear instead of a closed ablehttpclient.\n\n\u56e0\u4e3akerber\u53ea\u7528\u4e8eHADOOP_SECURITY_AUTHENTICATION\uff0c\u5176\u5c5e\u4e8e\u4e00\u79cd\u7279\u5b9a\u7684\u4e1a\u52a1\u903b\u8f91\u3002\u6240\u4ee5kerberState\u7684\u5224\u65ad\u5efa\u8bae\u4e0d\u8981\u653e\u5728utils\u4e2d\uff0c\u5e94\u8be5\u653e\u5728\u4e1a\u52a1\u903b\u8f91\u7c7b\u4e2d\uff0c\u5e76\u4e14\u5efa\u8bae\u518d\u65b0\u5199\u4e00\u4e2aget\u65b9\u6cd5\u4e13\u95e8\u7528\u4e8e\u8fd4\u56deKerberosHttpClient\u3002\n\u4e3e\u4f8b\uff1a\u5982\u679c\u7528\u6237\u8bbe\u7f6e\u4e86kerberState\u4e3atrue\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u5176\u4ed6\u5730\u65b9\u7528\u5230HttpUtils.get\u65f6\uff0c\u4e5f\u4f1a\u51fa\u73b0\u65b0\u5efa\u4e00\u4e2akerberHttpClient\uff0c\u800c\u4e0d\u662fCloseableHttpClient\u3002\nIf you have any question or suggestion, please put forward~", "url": "https://github.com/apache/dolphinscheduler/pull/3264#discussion_r460844366", "createdAt": "2020-07-27T12:10:09Z", "author": {"login": "yangyichao-mango"}, "path": "dolphinscheduler-common/src/main/java/org/apache/dolphinscheduler/common/utils/HttpUtils.java", "diffHunk": "@@ -33,66 +33,86 @@\n  * http utils\n  */\n public class HttpUtils {\n-\t\n-\t\n-\tpublic static final Logger logger = LoggerFactory.getLogger(HttpUtils.class);\n \n-\t/**\n-\t * get http request content\n-\t * @param url url\n-\t * @return http get request response content\n-\t */\n-\tpublic static String get(String url){\n-\t\tCloseableHttpClient httpclient = HttpClients.createDefault();\n+    public static final Logger logger = LoggerFactory.getLogger(HttpUtils.class);\n \n-\t\tHttpGet httpget = new HttpGet(url);\n-\t\t/** set timeout\u3001request time\u3001socket timeout */\n-\t\tRequestConfig requestConfig = RequestConfig.custom().setConnectTimeout(Constants.HTTP_CONNECT_TIMEOUT)\n-\t\t\t\t.setConnectionRequestTimeout(Constants.HTTP_CONNECTION_REQUEST_TIMEOUT)\n-\t\t\t\t.setSocketTimeout(Constants.SOCKET_TIMEOUT)\n-\t\t\t\t.setRedirectsEnabled(true)\n-\t\t\t\t.build();\n-\t\thttpget.setConfig(requestConfig);\n-\t\tString responseContent = null;\n-\t\tCloseableHttpResponse response = null;\n+    /**\n+     * get http request content\n+     *\n+     * @param url url\n+     * @return http get request response content\n+     */\n+    public static String get(String url) {\n+\tboolean kerberState = PropertyUtils.getBoolean(Constants.HADOOP_SECURITY_AUTHENTICATION_STARTUP_STATE, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3aebb7c749dd025c5cd954a38a0f8338fa6efca6"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NzIyNDcw", "url": "https://github.com/apache/dolphinscheduler/pull/3264#pullrequestreview-455722470", "createdAt": "2020-07-27T12:11:37Z", "commit": {"oid": "3aebb7c749dd025c5cd954a38a0f8338fa6efca6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxMjoxMTozN1rOG3fwJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxMjoxMTozN1rOG3fwJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NTA5Mw==", "bodyText": "Hi~,\nI have fixed the github action oom, please revert these changes.", "url": "https://github.com/apache/dolphinscheduler/pull/3264#discussion_r460845093", "createdAt": "2020-07-27T12:11:37Z", "author": {"login": "yangyichao-mango"}, "path": "pom.xml", "diffHunk": "@@ -807,9 +808,9 @@\n                         <!--<include>**/server/master/register/MasterRegistryTest.java</include>-->\n                         <include>**/server/master/AlertManagerTest.java</include>\n                         <include>**/server/master/MasterCommandTest.java</include>\n-                        <include>**/server/master/DependentTaskTest.java</include>\n+                        <!--<include>**/server/master/DependentTaskTest.java</include>-->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3aebb7c749dd025c5cd954a38a0f8338fa6efca6"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2d1cdb7ddac3893538226c58d15cc4e290b5707", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/d2d1cdb7ddac3893538226c58d15cc4e290b5707", "committedDate": "2020-07-28T05:12:34Z", "message": "revert UT POM"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4a5afd5a6bfc4472c1345670c12153bada854eb", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/a4a5afd5a6bfc4472c1345670c12153bada854eb", "committedDate": "2020-07-28T06:16:36Z", "message": "Kerberos judgment goes up to hadoopUtils"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2NTU2MTcw", "url": "https://github.com/apache/dolphinscheduler/pull/3264#pullrequestreview-456556170", "createdAt": "2020-07-28T11:52:48Z", "commit": {"oid": "a4a5afd5a6bfc4472c1345670c12153bada854eb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMTo1Mjo0OVrOG4JCDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxMTo1Mjo0OVrOG4JCDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTUyMTQyMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public KerberosHttpClient(String principal, String keyTabLocation) {\n          \n          \n            \n            \tsuper();\n          \n          \n            \n            \tthis.principal = principal;\n          \n          \n            \n            \tthis.keyTabLocation = keyTabLocation;\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                public KerberosHttpClient(String principal, String keyTabLocation, boolean isDebug) {\n          \n          \n            \n            \tthis(principal, keyTabLocation);\n          \n          \n            \n            \tif (isDebug) {\n          \n          \n            \n            \t    System.setProperty(\"sun.security.spnego.debug\", \"true\");\n          \n          \n            \n            \t    System.setProperty(\"sun.security.krb5.debug\", \"true\");\n          \n          \n            \n            \t}\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                public KerberosHttpClient(String principal, String keyTabLocation, String krb5Location, boolean isDebug) {\n          \n          \n            \n            \tthis(principal, keyTabLocation, isDebug);\n          \n          \n            \n            \tSystem.setProperty(\"java.security.krb5.conf\", krb5Location);\n          \n          \n            \n                }\n          \n          \n            \n                public KerberosHttpClient(String principal, String keyTabLocation) {\n          \n          \n            \n                    this(principal, keyTabLocation, false);\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                public KerberosHttpClient(String principal, String keyTabLocation, boolean isDebug) {\n          \n          \n            \n            \tthis(principal, keyTabLocation, StringUtils.EMPTY, false);\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                public KerberosHttpClient(String principal, String keyTabLocation, String krb5Location, boolean isDebug) {\n          \n          \n            \n                  this.principal = principal;\n          \n          \n            \n            \tthis.keyTabLocation = keyTabLocation;\n          \n          \n            \n            \tif (StringUtils.isNotEmpty(krb5Location)) {\n          \n          \n            \n            \t    System.setProperty(\"java.security.krb5.conf\", krb5Location);\n          \n          \n            \n            \t}\n          \n          \n            \n            \tif (isDebug) {\n          \n          \n            \n            \t    System.setProperty(\"sun.security.spnego.debug\", \"true\");\n          \n          \n            \n            \t    System.setProperty(\"sun.security.krb5.debug\", \"true\");\n          \n          \n            \n            \t}\n          \n          \n            \n                }", "url": "https://github.com/apache/dolphinscheduler/pull/3264#discussion_r461521420", "createdAt": "2020-07-28T11:52:49Z", "author": {"login": "yangyichao-mango"}, "path": "dolphinscheduler-common/src/main/java/org/apache/dolphinscheduler/common/utils/KerberosHttpClient.java", "diffHunk": "@@ -0,0 +1,156 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.dolphinscheduler.common.utils;\n+\n+import org.apache.dolphinscheduler.common.Constants;\n+import org.apache.http.auth.AuthSchemeProvider;\n+import org.apache.http.auth.AuthScope;\n+import org.apache.http.auth.Credentials;\n+import org.apache.http.client.config.AuthSchemes;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.config.Lookup;\n+import org.apache.http.config.RegistryBuilder;\n+import org.apache.http.impl.auth.SPNegoSchemeFactory;\n+import org.apache.http.impl.client.BasicCredentialsProvider;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClientBuilder;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import javax.security.auth.Subject;\n+import javax.security.auth.kerberos.KerberosPrincipal;\n+import javax.security.auth.login.AppConfigurationEntry;\n+import javax.security.auth.login.Configuration;\n+import javax.security.auth.login.LoginContext;\n+import javax.security.auth.login.LoginException;\n+import java.security.Principal;\n+import java.security.PrivilegedAction;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.Map;\n+import java.util.Set;\n+\n+/**\n+ * kerberos http client\n+ */\n+public class KerberosHttpClient {\n+\n+    public static final Logger logger = LoggerFactory.getLogger(KerberosHttpClient.class);\n+\n+    private String principal;\n+    private String keyTabLocation;\n+\n+    public KerberosHttpClient(String principal, String keyTabLocation) {\n+\tsuper();\n+\tthis.principal = principal;\n+\tthis.keyTabLocation = keyTabLocation;\n+    }\n+\n+    public KerberosHttpClient(String principal, String keyTabLocation, boolean isDebug) {\n+\tthis(principal, keyTabLocation);\n+\tif (isDebug) {\n+\t    System.setProperty(\"sun.security.spnego.debug\", \"true\");\n+\t    System.setProperty(\"sun.security.krb5.debug\", \"true\");\n+\t}\n+    }\n+\n+    public KerberosHttpClient(String principal, String keyTabLocation, String krb5Location, boolean isDebug) {\n+\tthis(principal, keyTabLocation, isDebug);\n+\tSystem.setProperty(\"java.security.krb5.conf\", krb5Location);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4a5afd5a6bfc4472c1345670c12153bada854eb"}, "originalPosition": 74}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "050e09ba11d0360ef57de98542120d6d3b2978a5", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/050e09ba11d0360ef57de98542120d6d3b2978a5", "committedDate": "2020-07-30T13:07:14Z", "message": "Merge branch 'dev' into mergeHttpClient"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04eef3833af9b6d55f9e94a26030dfc11e6769ae", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/04eef3833af9b6d55f9e94a26030dfc11e6769ae", "committedDate": "2020-07-30T15:31:43Z", "message": "fix merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d11daa52995753921fce31d538d97045a9df52c", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/0d11daa52995753921fce31d538d97045a9df52c", "committedDate": "2020-07-30T15:44:33Z", "message": "Remove connection pool shutdown"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29298605480a74fe0b1f81c0cfbb8862ae4d93bf", "author": {"user": {"login": "felix-thinkingdata", "name": "felix.wang"}}, "url": "https://github.com/apache/dolphinscheduler/commit/29298605480a74fe0b1f81c0cfbb8862ae4d93bf", "committedDate": "2020-08-04T10:14:21Z", "message": "Merge branch 'github-local/dev' into mergeHttpClient"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzODQzNDU2", "url": "https://github.com/apache/dolphinscheduler/pull/3264#pullrequestreview-463843456", "createdAt": "2020-08-09T05:05:10Z", "commit": {"oid": "29298605480a74fe0b1f81c0cfbb8862ae4d93bf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MDAxMTE4", "url": "https://github.com/apache/dolphinscheduler/pull/3264#pullrequestreview-464001118", "createdAt": "2020-08-10T07:17:41Z", "commit": {"oid": "29298605480a74fe0b1f81c0cfbb8862ae4d93bf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1785, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}