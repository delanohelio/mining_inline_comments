{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MzAxMzEx", "number": 2838, "title": "fix table not exist when init db metadata", "bodyText": "What is the purpose of the pull request\n#2835 fix init db metadata error\nBrief change log\n\nModify DolphinSchedulerManager\nModify UpgradeDao\n\nVerify this pull request\n\nthis pr have tested in mysql5.6 & pg 11.2", "createdAt": "2020-05-28T07:28:38Z", "url": "https://github.com/apache/dolphinscheduler/pull/2838", "merged": true, "mergeCommit": {"oid": "28e28caebd388f4c3d1b2093f809e8ff339f684f"}, "closed": true, "closedAt": "2020-05-29T13:51:20Z", "author": {"login": "Eights-Li"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcln2rXAH2gAyNDI0MzAxMzExOjg4NGYyNjQwMjA0Mjc1OTIxZDBlZjM4ZTI3N2RjODJkZjAyMTRmYjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmCg_dgH2gAyNDI0MzAxMzExOjAxMjQ1MDZkNTFhODhiMzcwNTFlYWYxZWYzMGMxNjM5NzZjYzI5ZjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "884f2640204275921d0ef38e277dc82df0214fb9", "author": {"user": {"login": "Eights-Li", "name": "Yelli"}}, "url": "https://github.com/apache/dolphinscheduler/commit/884f2640204275921d0ef38e277dc82df0214fb9", "committedDate": "2020-05-28T06:27:18Z", "message": "fix table not exist when init db metadata"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd8cfe9145e353f7a6eacd89708a4ccd4e9e283b", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/dd8cfe9145e353f7a6eacd89708a4ccd4e9e283b", "committedDate": "2020-05-28T07:36:39Z", "message": "Merge remote-tracking branch 'upstream/dev-1.3.0' into dev-1.3.0-cdh5.16.2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e021e0031de76bfa36830e66a11f46b70a611c8e", "author": {"user": {"login": "Eights-Li", "name": "Yelli"}}, "url": "https://github.com/apache/dolphinscheduler/commit/e021e0031de76bfa36830e66a11f46b70a611c8e", "committedDate": "2020-05-28T07:47:03Z", "message": "fix db init error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNjIwODkz", "url": "https://github.com/apache/dolphinscheduler/pull/2838#pullrequestreview-420620893", "createdAt": "2020-05-29T02:56:22Z", "commit": {"oid": "e021e0031de76bfa36830e66a11f46b70a611c8e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMjo1NjoyMlrOGcNMeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQwMjo1NjoyMlrOGcNMeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIyOTQ5Ng==", "bodyText": "Hi,why remove to this place,it will run more one times", "url": "https://github.com/apache/dolphinscheduler/pull/2838#discussion_r432229496", "createdAt": "2020-05-29T02:56:22Z", "author": {"login": "lgcareer"}, "path": "dolphinscheduler-dao/src/main/java/org/apache/dolphinscheduler/dao/upgrade/DolphinSchedulerManager.java", "diffHunk": "@@ -112,11 +112,12 @@ public void upgradeDolphinScheduler() throws Exception{\n             for(String schemaDir : schemaList) {\n                 schemaVersion = schemaDir.split(\"_\")[0];\n                 if(SchemaUtils.isAGreatVersion(schemaVersion , version)) {\n-\n-                    logger.info(\"upgrade DolphinScheduler metadata version from \" + version + \" to \" + schemaVersion);\n-\n+                    logger.info(\"upgrade DolphinScheduler metadata version from {} to {}\", version, schemaVersion);\n                     logger.info(\"Begin upgrading DolphinScheduler's table structure\");\n                     upgradeDao.upgradeDolphinScheduler(schemaDir);\n+                    if (upgradeDao.isExistsTable(\"t_ds_worker_group\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e021e0031de76bfa36830e66a11f46b70a611c8e"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a88f6f2c6de89dac7617e334e59c280fb7d45845", "author": {"user": {"login": "Eights-Li", "name": "Yelli"}}, "url": "https://github.com/apache/dolphinscheduler/commit/a88f6f2c6de89dac7617e334e59c280fb7d45845", "committedDate": "2020-05-29T09:04:23Z", "message": "fix ds-1.3.0 init db"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0124506d51a88b37051eaf1ef30c163976cc29f1", "author": {"user": {"login": "Eights-Li", "name": "Yelli"}}, "url": "https://github.com/apache/dolphinscheduler/commit/0124506d51a88b37051eaf1ef30c163976cc29f1", "committedDate": "2020-05-29T13:31:03Z", "message": "init db modify process instance json"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1969, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}