{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzMDE3NjE4", "number": 3825, "title": "[Improvement-3767][api] Task instance supports query by process instance name", "bodyText": "What is the purpose of the pull request\n#3767\nTask instances support query by process instance name. At present, when there are many instances on the task instance page, it is inconvenient to find a certain process instance. After improvement, you can query according to the process instance name on the task instance page.\nBrief change log\nTaskInstance/index.vue adds workflow instance name query box\nTaskInstanceController.queryTaskListPaging() added new input parameter processInstanceName\nVerify this pull request\nThis change added tests and can be verified as follows:\n\nManually verified the change by testing locally.\n\n\n##\u62c9\u53d6\u8bf7\u6c42\u7684\u76ee\u7684\u662f\u4ec0\u4e48\n\u4efb\u52a1\u5b9e\u4f8b\u652f\u6301\u6309\u5de5\u4f5c\u6d41\u5b9e\u4f8b\u540d\u67e5\u8be2\uff0c\u76ee\u524d\u5728\u4efb\u52a1\u5b9e\u4f8b\u9875\u9762\u5b58\u5728\u5f88\u591a\u5b9e\u4f8b\u7684\u65f6\u5019\uff0c\u67e5\u627e\u67d0\u4e00\u4e2a\u5de5\u4f5c\u6d41\u5b9e\u4f8b\u5f88\u4e0d\u65b9\u4fbf\uff0c\u6539\u8fdb\u540e\u53ef\u4ee5\u5728\u4efb\u52a1\u5b9e\u4f8b\u9875\u9762\u6839\u636e\u5de5\u4f5c\u6d41\u5b9e\u4f8b\u540d\u67e5\u8be2\n##\u7b80\u8981\u66f4\u6539\u65e5\u5fd7\nTaskInstance/index.vue \u589e\u52a0 \u5de5\u4f5c\u6d41\u5b9e\u4f8b\u540d\u79f0\u67e5\u8be2\u6846\nTaskInstanceController.queryTaskListPaging()\u65b0\u589e\u5165\u53c2processInstanceName\n##\u9a8c\u8bc1\u6b64\u62c9\u53d6\u8bf7\u6c42\n\u6b64\u66f4\u6539\u589e\u52a0\u4e86\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u8fdb\u884c\u5982\u4e0b\u9a8c\u8bc1\uff1a\n-\u901a\u8fc7\u672c\u5730\u6d4b\u8bd5\u624b\u52a8\u9a8c\u8bc1\u66f4\u6539\u3002", "createdAt": "2020-09-25T11:42:40Z", "url": "https://github.com/apache/dolphinscheduler/pull/3825", "merged": true, "mergeCommit": {"oid": "1eecbb1ef7d35c7d1363b1bcafc3367bb25caa8a"}, "closed": true, "closedAt": "2020-11-16T12:07:07Z", "author": {"login": "zhuangchong"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMUANBgH2gAyNDkzMDE3NjE4OjI1YjY1ZjMwYjJkNmJiMGYxOTkyZDJiYmQzMmE2OThkOTg5M2Y0OTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdfmFSFgFqTUzNzI4MDM0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "25b65f30b2d6bb0f1992d2bbd32a698d9893f497", "author": {"user": {"login": "zhuangchong", "name": "Kerwin"}}, "url": "https://github.com/apache/dolphinscheduler/commit/25b65f30b2d6bb0f1992d2bbd32a698d9893f497", "committedDate": "2020-09-25T11:22:39Z", "message": "Task instance supports query by process instance name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7b8c6a60ce4ae12010802da5038cbf00c1f4099", "author": {"user": {"login": "zhuangchong", "name": "Kerwin"}}, "url": "https://github.com/apache/dolphinscheduler/commit/c7b8c6a60ce4ae12010802da5038cbf00c1f4099", "committedDate": "2020-09-25T11:49:10Z", "message": "add test code checkstyle."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0afd0dedc336315a6d433a22906bd5e671c1674f", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/0afd0dedc336315a6d433a22906bd5e671c1674f", "committedDate": "2020-09-26T03:59:28Z", "message": "add test param."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50a85ffd4d149a5581efad3bbae3df675b9bc22a", "author": {"user": null}, "url": "https://github.com/apache/dolphinscheduler/commit/50a85ffd4d149a5581efad3bbae3df675b9bc22a", "committedDate": "2020-09-27T23:50:52Z", "message": "resolve the sonar duplication check."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06710298fd42c4364684c85624e6484b02c3b5f3", "author": {"user": {"login": "zhuangchong", "name": "Kerwin"}}, "url": "https://github.com/apache/dolphinscheduler/commit/06710298fd42c4364684c85624e6484b02c3b5f3", "committedDate": "2020-09-28T01:24:51Z", "message": "solve logger single-line string exceeds 200 characters."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9551730863c3da5962a8a2b43028395c48f5f47", "author": {"user": {"login": "zhuangchong", "name": "Kerwin"}}, "url": "https://github.com/apache/dolphinscheduler/commit/f9551730863c3da5962a8a2b43028395c48f5f47", "committedDate": "2020-09-29T03:54:25Z", "message": "resolve the sonar check."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5MDk4MDc1", "url": "https://github.com/apache/dolphinscheduler/pull/3825#pullrequestreview-499098075", "createdAt": "2020-09-30T05:42:15Z", "commit": {"oid": "f9551730863c3da5962a8a2b43028395c48f5f47"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddd7445b3b1756cf63842953b9de76516eb8b452", "author": {"user": {"login": "zhuangchong", "name": "Kerwin"}}, "url": "https://github.com/apache/dolphinscheduler/commit/ddd7445b3b1756cf63842953b9de76516eb8b452", "committedDate": "2020-10-14T05:21:57Z", "message": "Resolve code conflicts."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e74ec1fc528b09453903cd0b8e2556baa5cf6ee", "author": {"user": {"login": "zhuangchong", "name": "Kerwin"}}, "url": "https://github.com/apache/dolphinscheduler/commit/0e74ec1fc528b09453903cd0b8e2556baa5cf6ee", "committedDate": "2020-10-14T05:24:34Z", "message": "Merge branch 'dev' into dev-imp-api-taskinstance-query"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MzA4OTMx", "url": "https://github.com/apache/dolphinscheduler/pull/3825#pullrequestreview-509308931", "createdAt": "2020-10-15T12:10:15Z", "commit": {"oid": "0e74ec1fc528b09453903cd0b8e2556baa5cf6ee"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMDc3OTYz", "url": "https://github.com/apache/dolphinscheduler/pull/3825#pullrequestreview-531077963", "createdAt": "2020-11-16T08:29:46Z", "commit": {"oid": "0e74ec1fc528b09453903cd0b8e2556baa5cf6ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMjYwNDkz", "url": "https://github.com/apache/dolphinscheduler/pull/3825#pullrequestreview-531260493", "createdAt": "2020-11-16T12:06:51Z", "commit": {"oid": "0e74ec1fc528b09453903cd0b8e2556baa5cf6ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MjgwMzQy", "url": "https://github.com/apache/dolphinscheduler/pull/3825#pullrequestreview-537280342", "createdAt": "2020-11-24T09:11:02Z", "commit": {"oid": "0e74ec1fc528b09453903cd0b8e2556baa5cf6ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwOToxMTowM1rOH4zRHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwOToxMTowM1rOH4zRHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTMyMjI3MA==", "bodyText": "if taskName is null ,will throw\njava.lang.NullPointerException: null", "url": "https://github.com/apache/dolphinscheduler/pull/3825#discussion_r529322270", "createdAt": "2020-11-24T09:11:03Z", "author": {"login": "felix-thinkingdata"}, "path": "dolphinscheduler-api/src/main/java/org/apache/dolphinscheduler/api/controller/TaskInstanceController.java", "diffHunk": "@@ -95,11 +110,20 @@ public Result queryTaskListPaging(@ApiIgnore @RequestAttribute(value = Constants\n                                       @RequestParam(\"pageNo\") Integer pageNo,\n                                       @RequestParam(\"pageSize\") Integer pageSize) {\n \n-        logger.info(\"query task instance list, project name:{},process instance:{}, search value:{},task name:{}, executor name: {},state type:{}, host:{}, start:{}, end:{}\",\n-                projectName, processInstanceId, searchVal, taskName, executorName, stateType, host, startTime, endTime);\n+        logger.info(\"query task instance list, projectName:{}, processInstanceId:{}, processInstanceName:{}, search value:{}, taskName:{}, executorName: {}, stateType:{}, host:{}, start:{}, end:{}\",\n+                StringUtils.replaceNRTtoUnderline(projectName),\n+                processInstanceId,\n+                StringUtils.replaceNRTtoUnderline(processInstanceName),\n+                StringUtils.replaceNRTtoUnderline(searchVal),\n+                StringUtils.replaceNRTtoUnderline(taskName),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e74ec1fc528b09453903cd0b8e2556baa5cf6ee"}, "originalPosition": 74}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1720, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}