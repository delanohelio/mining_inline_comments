{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzODc4NjA4", "number": 4015, "title": "[Fix][api] Fix build parameter error of sqlserver when create.", "bodyText": "Fix jdbcUrl splicing error of SQLServer.", "createdAt": "2020-11-02T08:07:06Z", "url": "https://github.com/apache/dolphinscheduler/pull/4015", "merged": true, "mergeCommit": {"oid": "89f1e93bcf936b527856f658e33fe38ead5ec8b9"}, "closed": true, "closedAt": "2020-11-15T11:56:38Z", "author": {"login": "yh2388"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoPczCgH2gAyNTEzODc4NjA4OmE5OWJmNDI4ODc5N2VkMzQ2NWNjN2FjMzYyNzU3NDc3ZDAyOTM4YTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcq6Q3AFqTUzMDc3MjQwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a99bf4288797ed3465cc7ac362757477d02938a1", "author": {"user": {"login": "yh2388", "name": "t1mon"}}, "url": "https://github.com/apache/dolphinscheduler/commit/a99bf4288797ed3465cc7ac362757477d02938a1", "committedDate": "2020-06-05T09:43:05Z", "message": "Merge branch 'dev-1.3.0' of https://github.com/apache/incubator-dolphinscheduler into dev-1.3.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e446af58863d2cc3a462eb318c82c3ff374367eb", "author": {"user": {"login": "yh2388", "name": "t1mon"}}, "url": "https://github.com/apache/dolphinscheduler/commit/e446af58863d2cc3a462eb318c82c3ff374367eb", "committedDate": "2020-10-21T07:08:20Z", "message": "Merge remote-tracking branch 'upstream/dev' into fix-3962"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4af9d53a8b963218212d5b491b814625a2f6b4d", "author": {"user": {"login": "yh2388", "name": "t1mon"}}, "url": "https://github.com/apache/dolphinscheduler/commit/c4af9d53a8b963218212d5b491b814625a2f6b4d", "committedDate": "2020-10-21T07:26:26Z", "message": "[fix-#3962][api] Avoid ClassCastException for LoggerService.queryLog()."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "176ef58d2f7d7b6806bc0a06d201bde3dab7ed7e", "author": {"user": {"login": "yh2388", "name": "t1mon"}}, "url": "https://github.com/apache/dolphinscheduler/commit/176ef58d2f7d7b6806bc0a06d201bde3dab7ed7e", "committedDate": "2020-11-02T08:01:05Z", "message": "Merge remote-tracking branch 'upstream/dev' into fix-sqlserver-params"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7efd84aefb4a5426de56f4b5c3e03dd87167d555", "author": {"user": {"login": "yh2388", "name": "t1mon"}}, "url": "https://github.com/apache/dolphinscheduler/commit/7efd84aefb4a5426de56f4b5c3e03dd87167d555", "committedDate": "2020-11-02T08:03:47Z", "message": "[Fix][api] Fix build parameter error of sqlserver when create."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzOTkzNTEy", "url": "https://github.com/apache/dolphinscheduler/pull/4015#pullrequestreview-523993512", "createdAt": "2020-11-05T07:46:39Z", "commit": {"oid": "7efd84aefb4a5426de56f4b5c3e03dd87167d555"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwNzo0NjozOVrOHt26Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwNzo0NjozOVrOHt26Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzg0NzU3OQ==", "bodyText": "Do you mind removing the following constants? I think using '==' is better, after all, the 'type' variable is Enum\npublic static final String MYSQL = \"MYSQL\";\npublic static final String POSTGRESQL = \"POSTGRESQL\";\npublic static final String HIVE = \"HIVE\";\npublic static final String SPARK = \"SPARK\";\npublic static final String CLICKHOUSE = \"CLICKHOUSE\";\npublic static final String ORACLE = \"ORACLE\";\npublic static final String SQLSERVER = \"SQLSERVER\";\npublic static final String DB2 = \"DB2\";\npublic static final String PRESTO = \"PRESTO\";", "url": "https://github.com/apache/dolphinscheduler/pull/4015#discussion_r517847579", "createdAt": "2020-11-05T07:46:39Z", "author": {"login": "gabrywu"}, "path": "dolphinscheduler-api/src/main/java/org/apache/dolphinscheduler/api/service/DataSourceService.java", "diffHunk": "@@ -499,7 +499,13 @@ public String buildParameter(DbType type, String host,\n \n         String address = buildAddress(type, host, port, connectType);\n         Map<String, Object> parameterMap = new LinkedHashMap<String, Object>(6);\n-        String jdbcUrl = address + \"/\" + database;\n+        String jdbcUrl;\n+        if (DbType.SQLSERVER == type) {\n+            jdbcUrl = address + \";databaseName=\" + database;\n+        } else {\n+            jdbcUrl = address + \"/\" + database;\n+        }\n+\n         if (Constants.ORACLE.equals(type.name())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7efd84aefb4a5426de56f4b5c3e03dd87167d555"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4Njk1MTY5", "url": "https://github.com/apache/dolphinscheduler/pull/4015#pullrequestreview-528695169", "createdAt": "2020-11-12T02:43:51Z", "commit": {"oid": "7efd84aefb4a5426de56f4b5c3e03dd87167d555"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwNzcyNDA5", "url": "https://github.com/apache/dolphinscheduler/pull/4015#pullrequestreview-530772409", "createdAt": "2020-11-15T07:06:46Z", "commit": {"oid": "7efd84aefb4a5426de56f4b5c3e03dd87167d555"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2346, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}