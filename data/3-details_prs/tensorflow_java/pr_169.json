{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NTE2NDA3", "number": 169, "title": "Nicer error messages for mode-forbidden ops", "bodyText": "Adds a way to forbid ops in ExecutionEnviroments, uses it to forbid Placeholder, Variable, and Assign in eager mode.  As far as I know there's no way to detect ahead of time whether an op is forbidden, so this list will have to be added to as people run into mode-specific ops.  These three are likely to be the most common though.\nFixes #155 and fixes #154.", "createdAt": "2020-12-09T22:55:39Z", "url": "https://github.com/tensorflow/java/pull/169", "merged": true, "mergeCommit": {"oid": "e4a11b3ce3a7efd12f06be5e6ea15dd87006faa7"}, "closed": true, "closedAt": "2021-01-02T15:22:31Z", "author": {"login": "rnett"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdr6caBAFqTU2MDU5MjUxOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdsOw1jgFqTU2MDY0MDk0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNTkyNTE4", "url": "https://github.com/tensorflow/java/pull/169#pullrequestreview-560592518", "createdAt": "2021-01-01T15:41:30Z", "commit": {"oid": "f90d8924f12ff64af036332ba9f6a369a12242a1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxNTo0MTozMFrOINQ6jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxNTo0MTozMFrOINQ6jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc3OTUzNA==", "bodyText": "can you please add a space after if and also wrap the throw statement in a block {...}? This is more in line with the Google Java Style Guide that we follow in this project.", "url": "https://github.com/tensorflow/java/pull/169#discussion_r550779534", "createdAt": "2021-01-01T15:41:30Z", "author": {"login": "karllessard"}, "path": "tensorflow-core/tensorflow-core-api/src/main/java/org/tensorflow/EagerOperationBuilder.java", "diffHunk": "@@ -55,6 +55,9 @@\n final class EagerOperationBuilder implements OperationBuilder {\n \n   EagerOperationBuilder(EagerSession session, String type, String name) {\n+    if(!session.isOpEnabled(type))\n+      throw new IllegalArgumentException(\"Op \" + type + \" is not valid in eager mode.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f90d8924f12ff64af036332ba9f6a369a12242a1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNTkyNTQ3", "url": "https://github.com/tensorflow/java/pull/169#pullrequestreview-560592547", "createdAt": "2021-01-01T15:42:11Z", "commit": {"oid": "f90d8924f12ff64af036332ba9f6a369a12242a1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxNTo0MjoxMVrOINQ6yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxNTo0MjoxMVrOINQ6yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc3OTU5NQ==", "bodyText": "same comment as here", "url": "https://github.com/tensorflow/java/pull/169#discussion_r550779595", "createdAt": "2021-01-01T15:42:11Z", "author": {"login": "karllessard"}, "path": "tensorflow-core/tensorflow-core-api/src/main/java/org/tensorflow/GraphOperationBuilder.java", "diffHunk": "@@ -57,6 +57,9 @@\n public final class GraphOperationBuilder implements OperationBuilder {\n \n   GraphOperationBuilder(Graph graph, String type, String name) {\n+    if(!graph.isOpEnabled(type))\n+      throw new IllegalArgumentException(\"Op \" + type + \" is not valid in graph mode.\");\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f90d8924f12ff64af036332ba9f6a369a12242a1"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a42ed5b0c0198b43d1c2d0bdcf79fd87f5774ca8", "author": {"user": {"login": "rnett", "name": "Ryan Nett"}}, "url": "https://github.com/tensorflow/java/commit/a42ed5b0c0198b43d1c2d0bdcf79fd87f5774ca8", "committedDate": "2021-01-01T23:44:03Z", "message": "start fobbiden ops checks\n\nSigned-off-by: Ryan Nett <rnett@calpoly.edu>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "463036dbcd41628290947245a850ee526a93d6db", "author": {"user": {"login": "rnett", "name": "Ryan Nett"}}, "url": "https://github.com/tensorflow/java/commit/463036dbcd41628290947245a850ee526a93d6db", "committedDate": "2021-01-01T23:45:43Z", "message": "fix style\n\nSigned-off-by: Ryan Nett <rnett@calpoly.edu>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f90d8924f12ff64af036332ba9f6a369a12242a1", "author": {"user": {"login": "rnett", "name": "Ryan Nett"}}, "url": "https://github.com/tensorflow/java/commit/f90d8924f12ff64af036332ba9f6a369a12242a1", "committedDate": "2020-12-09T02:56:02Z", "message": "start fobbiden ops checks\n\nSigned-off-by: Ryan Nett <rnett@calpoly.edu>"}, "afterCommit": {"oid": "463036dbcd41628290947245a850ee526a93d6db", "author": {"user": {"login": "rnett", "name": "Ryan Nett"}}, "url": "https://github.com/tensorflow/java/commit/463036dbcd41628290947245a850ee526a93d6db", "committedDate": "2021-01-01T23:45:43Z", "message": "fix style\n\nSigned-off-by: Ryan Nett <rnett@calpoly.edu>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d2dcf604d45c609141db0b9f5118455675b6e74", "author": {"user": {"login": "rnett", "name": "Ryan Nett"}}, "url": "https://github.com/tensorflow/java/commit/6d2dcf604d45c609141db0b9f5118455675b6e74", "committedDate": "2021-01-01T23:48:49Z", "message": "move checks to builder method\n\nSigned-off-by: Ryan Nett <rnett@calpoly.edu>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNjQwOTQy", "url": "https://github.com/tensorflow/java/pull/169#pullrequestreview-560640942", "createdAt": "2021-01-02T15:21:55Z", "commit": {"oid": "6d2dcf604d45c609141db0b9f5118455675b6e74"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3471, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}