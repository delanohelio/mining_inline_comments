{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2OTExMjg4", "number": 89, "title": "Draft: Java API to use tf.function available on SavedModel.", "bodyText": "Python models that contain tf.function is inconvenient to be consumed by Java clients.\nThis proposal provides an API to\n(a) Invoke a tf.function, given the signature name\n(b) Retrieve the node name in the graph corresponding to a tf.function\nTBD: Unit tests before this change is ready to merge.", "createdAt": "2020-07-27T05:38:59Z", "url": "https://github.com/tensorflow/java/pull/89", "merged": true, "mergeCommit": {"oid": "d845856240ce2a729ee0656f1c12cce5b615f450"}, "closed": true, "closedAt": "2020-07-28T02:41:39Z", "author": {"login": "Shajan"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc47F9cgH2gAyNDU2OTExMjg4OjU5ZjI0M2YzZWRmNDZmZGU4MzY4N2RlMWNiNDI2NjA4ZTc3ZGVhM2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6DrVKAFqTQ1ODY0MTA5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "59f243f3edf46fde83687de1cb426608e77dea3d", "author": {"user": null}, "url": "https://github.com/tensorflow/java/commit/59f243f3edf46fde83687de1cb426608e77dea3d", "committedDate": "2020-07-27T05:36:45Z", "message": "Draft: Java API to use tf.function available on SavedModel.\n\nPython models that contain tf.function is inconvenient to be consumed by Java clients.\nThis proposal provides an API to\n(a) Invoke a tf.function, given the signature name\n(b) Retrieve the node name in the graph corresponding to a tf.function"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MjYzNDEz", "url": "https://github.com/tensorflow/java/pull/89#pullrequestreview-456263413", "createdAt": "2020-07-28T02:41:17Z", "commit": {"oid": "59f243f3edf46fde83687de1cb426608e77dea3d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NjQxMDk3", "url": "https://github.com/tensorflow/java/pull/89#pullrequestreview-458641097", "createdAt": "2020-07-30T18:10:43Z", "commit": {"oid": "59f243f3edf46fde83687de1cb426608e77dea3d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODoxMDo0M1rOG5uUBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODoxMDo0M1rOG5uUBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4MDgwNQ==", "bodyText": "Read through this change, and I believe the following API design would be both cleaner and more intuitive to use.  Wdyt?\n\nUpdate Loader and add withSignature(String... signatures).\nUpdate Loader.load() to also construct TfFunctions corresponding to the specified signatures.\nSignatureToNodeName can become private and not exposed to end user, preferrably living inside TfFunction as private.\nTfFunction should not have a reference to the session. Let SavedModelBundle manage the session (which it already does).  TfFunction can become a pure data class.\nAdd SavedModelBundle.call(String signature, Map<String, Tensor<?>> inputs, Map<String, Tensor<?>> outputs) to SavedModelBundle.   TfFunction can become private and not exposed to end user as well.\n\nWhat do you think about the above proposed API design?", "url": "https://github.com/tensorflow/java/pull/89#discussion_r463180805", "createdAt": "2020-07-30T18:10:43Z", "author": {"login": "yzhuang"}, "path": "tensorflow-core/tensorflow-core-api/src/main/java/org/tensorflow/SavedModelBundle.java", "diffHunk": "@@ -94,6 +98,101 @@ private Loader(String exportDir) {\n     private RunOptions runOptions = null;\n   }\n \n+  /**\n+   * SignatureToNodeName finds the node names in the {@link Graph} corresponding to the\n+   * input / output parameters of a <a\n+   * href=\"https://www.tensorflow.org/api_docs/python/tf/function\">tf.function</a>\n+   */\n+  public static final class SignatureToNodeName {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59f243f3edf46fde83687de1cb426608e77dea3d"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3450, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}