{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNTA0Mzc0", "number": 140, "title": "Added unit tests for the rca.framework.api.contexts package", "bodyText": "Issue #, if available: 51\nDescription of changes: Added unit tests for the rca.framework.api.contexts package\nTests:\nCode coverage percentage for this patch: 100%\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-04-09T15:51:45Z", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140", "merged": true, "mergeCommit": {"oid": "9a1b830ae6d59efa0689d5054fcc43c93679aa88"}, "closed": true, "closedAt": "2020-04-24T17:49:47Z", "author": {"login": "sidheart"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXoC76gBqjMyMzI0MzQyOTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABca1OzXgFqTQwMDE1MjQ2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "651fa07e1f5712c9cd1ed1c9b4838a610d5c492d", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/651fa07e1f5712c9cd1ed1c9b4838a610d5c492d", "committedDate": "2020-04-09T15:50:38Z", "message": "Added unit tests for the rca.framework.api.contexts package"}, "afterCommit": {"oid": "635669bdd8a34aae1545df5ea38017be1eb1df1d", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/635669bdd8a34aae1545df5ea38017be1eb1df1d", "committedDate": "2020-04-14T18:45:33Z", "message": "Added unit tests for the rca.framework.api.contexts package"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMDkxMjU1", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#pullrequestreview-400091255", "createdAt": "2020-04-24T16:21:25Z", "commit": {"oid": "635669bdd8a34aae1545df5ea38017be1eb1df1d"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNjoyMToyNVrOGLfWLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNjoyMjozM1rOGLfZBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcwMTEwMw==", "bodyText": "final maybe ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414701103", "createdAt": "2020-04-24T16:21:25Z", "author": {"login": "yojs"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "diffHunk": "@@ -15,9 +15,34 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core;\n \n-public abstract class GenericContext {\n-  // TODO\n-  // The GenericContext class currently has only one derived class ResourceContext.\n-  // We are expecting to add more different types of context and some abstract methods can be added\n-  // here\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.Resources;\n+\n+public class GenericContext {\n+    protected Resources.State state;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "635669bdd8a34aae1545df5ea38017be1eb1df1d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcwMTgzMQ==", "bodyText": "If we have getState(), then should we just make state private ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414701831", "createdAt": "2020-04-24T16:22:33Z", "author": {"login": "yojs"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "diffHunk": "@@ -15,9 +15,34 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core;\n \n-public abstract class GenericContext {\n-  // TODO\n-  // The GenericContext class currently has only one derived class ResourceContext.\n-  // We are expecting to add more different types of context and some abstract methods can be added\n-  // here\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.Resources;\n+\n+public class GenericContext {\n+    protected Resources.State state;\n+\n+    public GenericContext(Resources.State state) {\n+        this.state = state;\n+    }\n+\n+    public Resources.State getState() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "635669bdd8a34aae1545df5ea38017be1eb1df1d"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/4936bc3c3b43375f00d41efaa87ae088f831272c", "committedDate": "2020-04-24T16:39:30Z", "message": "Added unit tests for the rca.framework.api.contexts package"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "635669bdd8a34aae1545df5ea38017be1eb1df1d", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/635669bdd8a34aae1545df5ea38017be1eb1df1d", "committedDate": "2020-04-14T18:45:33Z", "message": "Added unit tests for the rca.framework.api.contexts package"}, "afterCommit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c", "author": {"user": null}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/4936bc3c3b43375f00d41efaa87ae088f831272c", "committedDate": "2020-04-24T16:39:30Z", "message": "Added unit tests for the rca.framework.api.contexts package"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMTIxMTAw", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#pullrequestreview-400121100", "createdAt": "2020-04-24T17:03:23Z", "commit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowMzoyM1rOGLg8tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowMzoyM1rOGLg8tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNzM1MA==", "bodyText": "let's not remove this subclass. This CONSTANTS class defines the SQL schema and we might have multiple columns in the future", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414727350", "createdAt": "2020-04-24T17:03:23Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/contexts/ResourceContext.java", "diffHunk": "@@ -53,33 +40,23 @@ public static ResourceContext generic() {\n   public ResourceContextMessage buildContextMessage() {\n     final ResourceContextMessage.Builder contextMessageBuilder = ResourceContextMessage\n         .newBuilder();\n-    contextMessageBuilder.setState(state.ordinal());\n+    contextMessageBuilder.setState(getState().ordinal());\n     return contextMessageBuilder.build();\n   }\n \n   public static ResourceContext buildResourceContextFromMessage(ResourceContextMessage message) {\n     return new ResourceContext(Resources.State.values()[message.getState()]);\n   }\n \n-  @Override\n-  public String toString() {\n-    return this.state.toString();\n-  }\n-\n   public List<Field<?>> getSqlSchema() {\n     List<Field<?>> schemaList = new ArrayList<>();\n-    schemaList.add(DSL.field(DSL.name(SQL_SCHEMA_CONSTANTS.STATE_COL_NAME), String.class));\n+    schemaList.add(DSL.field(DSL.name(STATE_COL_NAME), String.class));\n     return schemaList;\n   }\n \n   public List<Object> getSqlValue() {\n     List<Object> valueList = new ArrayList<>();\n-    valueList.add(this.state.toString());\n+    valueList.add(getState().toString());\n     return valueList;\n   }\n-\n-  public static class SQL_SCHEMA_CONSTANTS {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMTIyOTE5", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#pullrequestreview-400122919", "createdAt": "2020-04-24T17:06:08Z", "commit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowNjowOVrOGLhC_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowNjowOVrOGLhC_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyODk1Ng==", "bodyText": "let's keep this class as an abstract class. I don't think we need to move everything into this base class as we might have something completely different in SymptomContext.java", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414728956", "createdAt": "2020-04-24T17:06:09Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "diffHunk": "@@ -15,9 +15,34 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core;\n \n-public abstract class GenericContext {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMTIzOTMx", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#pullrequestreview-400123931", "createdAt": "2020-04-24T17:07:34Z", "commit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowNzozNFrOGLhGOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowNzozNFrOGLhGOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyOTc4NA==", "bodyText": "This class is more like a placeholder because what needs to be defines here is still not very clear. So let's keep this as is.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414729784", "createdAt": "2020-04-24T17:07:34Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/contexts/SymptomContext.java", "diffHunk": "@@ -19,23 +19,11 @@\n import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core.GenericContext;\n \n public class SymptomContext extends GenericContext {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b5227fafe799b94a4b571c02ff9e728289a5daf", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/0b5227fafe799b94a4b571c02ff9e728289a5daf", "committedDate": "2020-04-24T17:26:44Z", "message": "Made GenericContext abstract and restored SQL schema class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMTUyNDYy", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#pullrequestreview-400152462", "createdAt": "2020-04-24T17:49:15Z", "commit": {"oid": "0b5227fafe799b94a4b571c02ff9e728289a5daf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1198, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}