{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2ODMwOTU5", "number": 447, "title": "Add the PersistableSlidingWindow class", "bodyText": "Add the PersistableSlidingWindow class\nFixes #: N/A\nDescription of changes:\n\nA PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss.\n\nTests:\n\nPersistableSlidingWindowTest\n\nIf new tests are added, how long do the new ones take to complete\n\nTest time is negligible\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-10-02T10:49:05Z", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447", "merged": true, "mergeCommit": {"oid": "af1a66c289d722637b357498d82b94b8d0c5dc63"}, "closed": true, "closedAt": "2020-10-06T23:48:59Z", "author": {"login": "sidheart"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOjwZhgBqjM4MzM0MjkwOTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQBJDYgFqTUwMzQzMTY4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ea49a1208652fe8c36c54a25dd0e9ec31e24cf8", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/9ea49a1208652fe8c36c54a25dd0e9ec31e24cf8", "committedDate": "2020-10-02T10:36:31Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}, "afterCommit": {"oid": "cce6115e62a01ea5d493b871c96699c065c11b4a", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/cce6115e62a01ea5d493b871c96699c065c11b4a", "committedDate": "2020-10-02T10:51:28Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMjIwNjE3", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#pullrequestreview-501220617", "createdAt": "2020-10-02T15:10:28Z", "commit": {"oid": "cce6115e62a01ea5d493b871c96699c065c11b4a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNToxMDoyOFrOHbxXzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNToxMDoyOFrOHbxXzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg4MjUwOA==", "bodyText": "Is this functionally correct? IIUC, this expects timestampDiff to be in SECONDS, converts it to timeUnit and compares it against bucketSizeMs which is in milliseconds.\nIs timeUnit guaranteed to be in ms? Is timestampDiff guaranteed to be in seconds?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#discussion_r498882508", "createdAt": "2020-10-02T15:10:28Z", "author": {"login": "vigyasharma"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/aggregators/PersistableSlidingWindow.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.aggregators;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.persistence.FileRotate;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import java.io.BufferedWriter;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.io.Writer;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.concurrent.TimeUnit;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.commons.io.LineIterator;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+/**\n+ * PersistableSlidingWindow is a SlidingWindow which can have its data written to and read from disk\n+ *\n+ * <p>The sliding window retains data for slidingWindowSizeInSeconds and aggregates values into time\n+ * buckets of width bucketSizeInSeconds. For example if slidingWindowSizeInSeconds is 86400 (1 day)\n+ * and bucketSizeInSeconds is 3600 (1 hr) then there will be at most 25 data points in the sliding window\n+ * at any given time. It's 25 and not 24 because the oldest datapoints are removed lazily based on\n+ * arrival time. This shouldn't impact most consumers of this data structure.\n+ *\n+ * <p>The data contained in this sliding window is effectively a time series. Consumers may extend this\n+ * class and define more complex aggregations or analytics functions.\n+ */\n+public class PersistableSlidingWindow extends SlidingWindow<SlidingWindowData> {\n+  private static final Logger LOG = LogManager.getLogger(PersistableSlidingWindow.class);\n+  private static final ObjectMapper objectMapper = new ObjectMapper();\n+\n+  protected static final String SEPARATOR = \"\\n\";\n+\n+  private Path pathToFile;\n+\n+  protected SlidingWindowData aggregatedData;\n+  protected final double bucketSizeMs;\n+\n+  public PersistableSlidingWindow(int slidingWindowSize,\n+                                  int bucketSize,\n+                                  TimeUnit timeUnit,\n+                                  Path filePath) {\n+    super(slidingWindowSize, timeUnit);\n+    this.bucketSizeMs = timeUnit.toMillis(bucketSize);\n+    this.pathToFile = filePath;\n+    try {\n+      if (Files.exists(pathToFile)) {\n+        loadFromFile(pathToFile);\n+      } else {\n+        Files.createFile(pathToFile);\n+      }\n+    } catch (IOException e) {\n+      LOG.error(\"Couldn't create file {} to perform young generation tuning\", pathToFile, e);\n+      throw new IllegalArgumentException(\"Couldn't create or read a file at \" + filePath);\n+    }\n+  }\n+\n+  @Override\n+  public void next(SlidingWindowData slidingWindowData) {\n+    if (aggregatedData == null) {\n+      aggregatedData = new SlidingWindowData(slidingWindowData.getTimeStamp(), slidingWindowData.getValue());\n+      return;\n+    }\n+    long timestampDiff = slidingWindowData.getTimeStamp() - aggregatedData.getTimeStamp();\n+    if (timeUnit.convert(timestampDiff, TimeUnit.SECONDS) > bucketSizeMs) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce6115e62a01ea5d493b871c96699c065c11b4a"}, "originalPosition": 83}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMjMzNTA4", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#pullrequestreview-501233508", "createdAt": "2020-10-02T15:26:12Z", "commit": {"oid": "cce6115e62a01ea5d493b871c96699c065c11b4a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNToyNjoxM1rOHbx79Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNToyNjoxM1rOHbx79Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg5MTc2NQ==", "bodyText": "This class is doing two things, it is providing a persistable sliding window, and it is aggregating (deduping) data points within a bucketization window.\nHow about we split these responsibilities and have this class focus only on persisting?\nRe: the bucketization piece, I have a few more comments - I suppose the motivation for this is to act like an alarm breach monitor which gets set when some thresholds are hit, and unset on a different criteria. This can be used in deciders then, to figure out when an action is relevant (alarm unhealthy) and irrelevant (alarm healthy).\nAs such, it may be read more often than an issue gets added (next being called) and the sliding window should get updated on each read.\nAgain, we can move this to a separate PR/class and focus this one primarily on persistence as I see most of the code here pertains to persisting data.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#discussion_r498891765", "createdAt": "2020-10-02T15:26:13Z", "author": {"login": "vigyasharma"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/aggregators/PersistableSlidingWindow.java", "diffHunk": "@@ -0,0 +1,134 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.aggregators;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.persistence.FileRotate;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import java.io.BufferedWriter;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.io.Writer;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.concurrent.TimeUnit;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.commons.io.LineIterator;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+/**\n+ * PersistableSlidingWindow is a SlidingWindow which can have its data written to and read from disk\n+ *\n+ * <p>The sliding window retains data for slidingWindowSizeInSeconds and aggregates values into time\n+ * buckets of width bucketSizeInSeconds. For example if slidingWindowSizeInSeconds is 86400 (1 day)\n+ * and bucketSizeInSeconds is 3600 (1 hr) then there will be at most 25 data points in the sliding window\n+ * at any given time. It's 25 and not 24 because the oldest datapoints are removed lazily based on\n+ * arrival time. This shouldn't impact most consumers of this data structure.\n+ *\n+ * <p>The data contained in this sliding window is effectively a time series. Consumers may extend this\n+ * class and define more complex aggregations or analytics functions.\n+ */\n+public class PersistableSlidingWindow extends SlidingWindow<SlidingWindowData> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cce6115e62a01ea5d493b871c96699c065c11b4a"}, "originalPosition": 46}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cce6115e62a01ea5d493b871c96699c065c11b4a", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/cce6115e62a01ea5d493b871c96699c065c11b4a", "committedDate": "2020-10-02T10:51:28Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}, "afterCommit": {"oid": "67b248349be0b0069733d805f82bd8ef2c3c2b35", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/67b248349be0b0069733d805f82bd8ef2c3c2b35", "committedDate": "2020-10-02T15:47:18Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67b248349be0b0069733d805f82bd8ef2c3c2b35", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/67b248349be0b0069733d805f82bd8ef2c3c2b35", "committedDate": "2020-10-02T15:47:18Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}, "afterCommit": {"oid": "9ad509e36e6b6bad00f49d2c8b613df89cfe695a", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/9ad509e36e6b6bad00f49d2c8b613df89cfe695a", "committedDate": "2020-10-02T16:28:20Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNDEwMjM1", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#pullrequestreview-501410235", "createdAt": "2020-10-02T19:56:45Z", "commit": {"oid": "9ad509e36e6b6bad00f49d2c8b613df89cfe695a"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxOTo1Njo0NVrOHb57xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxOTo1Njo0NVrOHb57xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTAyMjc5MQ==", "bodyText": "Is this still relevant? if not, please remove", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#discussion_r499022791", "createdAt": "2020-10-02T19:56:45Z", "author": {"login": "vigyasharma"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/aggregators/PersistableSlidingWindow.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.aggregators;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.persistence.FileRotate;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import java.io.BufferedWriter;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Iterator;\n+import java.util.concurrent.TimeUnit;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.commons.io.LineIterator;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+/**\n+ * PersistableSlidingWindow is a SlidingWindow which can have its data written to and read from disk\n+ *\n+ * <p>The sliding window retains data for slidingWindowSizeInSeconds and aggregates values into time\n+ * buckets of width bucketSizeInSeconds. For example if slidingWindowSizeInSeconds is 86400 (1 day)\n+ * and bucketSizeInSeconds is 3600 (1 hr) then there will be at most 25 data points in the sliding window\n+ * at any given time. It's 25 and not 24 because the oldest datapoints are removed lazily based on\n+ * arrival time. This shouldn't impact most consumers of this data structure.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ad509e36e6b6bad00f49d2c8b613df89cfe695a"}, "originalPosition": 41}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ad509e36e6b6bad00f49d2c8b613df89cfe695a", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/9ad509e36e6b6bad00f49d2c8b613df89cfe695a", "committedDate": "2020-10-02T16:28:20Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}, "afterCommit": {"oid": "3dd429c3f97e4aedd2e24790f30727ab3229e9bc", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/3dd429c3f97e4aedd2e24790f30727ab3229e9bc", "committedDate": "2020-10-02T20:27:02Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3dd429c3f97e4aedd2e24790f30727ab3229e9bc", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/3dd429c3f97e4aedd2e24790f30727ab3229e9bc", "committedDate": "2020-10-02T20:27:02Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}, "afterCommit": {"oid": "2700c244aa0746324bc142c42ce634e4e34ed218", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/2700c244aa0746324bc142c42ce634e4e34ed218", "committedDate": "2020-10-02T20:30:24Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNDg5NzA0", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#pullrequestreview-501489704", "createdAt": "2020-10-02T23:08:51Z", "commit": {"oid": "2700c244aa0746324bc142c42ce634e4e34ed218"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQyMzowODo1MVrOHb9rvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQyMzoyMTozM1rOHb90tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA4NDIyMg==", "bodyText": "do we want to make rotateFile() synchronized ?\nAnd can we refactor FileRotate class to make it more generic instead of using static to expose its method directly ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#discussion_r499084222", "createdAt": "2020-10-02T23:08:51Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/aggregators/PersistableSlidingWindow.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.aggregators;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.persistence.FileRotate;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import java.io.BufferedWriter;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Iterator;\n+import java.util.concurrent.TimeUnit;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.commons.io.LineIterator;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+/**\n+ * PersistableSlidingWindow is a SlidingWindow which can have its data written to and read from disk\n+ */\n+public class PersistableSlidingWindow extends SlidingWindow<SlidingWindowData> {\n+  private static final Logger LOG = LogManager.getLogger(PersistableSlidingWindow.class);\n+  private static final ObjectMapper objectMapper = new ObjectMapper();\n+\n+  protected static final String SEPARATOR = \"\\n\";\n+\n+  private Path pathToFile;\n+\n+  public PersistableSlidingWindow(int slidingWindowSize,\n+                                  TimeUnit timeUnit,\n+                                  Path filePath) {\n+    super(slidingWindowSize, timeUnit);\n+    this.pathToFile = filePath;\n+    try {\n+      if (Files.exists(pathToFile)) {\n+        load(pathToFile);\n+      } else {\n+        Files.createFile(pathToFile);\n+      }\n+    } catch (IOException e) {\n+      LOG.error(\"Couldn't create file {} to perform young generation tuning\", pathToFile, e);\n+      throw new IllegalArgumentException(\"Couldn't create or read a file at \" + filePath);\n+    }\n+  }\n+\n+  /**\n+   * Loads the SlidingWindowData contained in the given path into this PersistableSlidingWindow\n+   * @param path The path to the file containing the SlidingWindow data\n+   * @throws IOException If there is an error reading the file\n+   */\n+  protected void load(Path path) throws IOException {\n+    LineIterator it = FileUtils.lineIterator(path.toFile(), \"UTF-8\");\n+    try {\n+      while (it.hasNext()) {\n+        String line = it.nextLine();\n+        SlidingWindowData data = objectMapper.readValue(line, SlidingWindowData.class);\n+        next(data);\n+      }\n+    } finally {\n+      LineIterator.closeQuietly(it);\n+    }\n+  }\n+\n+  /**\n+   * Writes the contents of this SlidingWindow into the path provided during construction\n+   *\n+   * <p>This write occurs in 2 stages, it writes to a temporary file, then replaces the actual data\n+   * file with the contents of the temporary file\n+   *\n+   * @throws IOException If there is a CRUD error with the files involved\n+   */\n+  protected void write() throws IOException {\n+    String tmpFile = pathToFile.toString() + RandomStringUtils.randomAlphanumeric(32);\n+    Path tmpPath = Paths.get(tmpFile);\n+    Files.createFile(Paths.get(tmpFile));\n+    BufferedWriter writer = new BufferedWriter(new FileWriter(tmpFile, false));\n+    Iterator<SlidingWindowData> it = windowDeque.descendingIterator();\n+    while (it.hasNext()) {\n+      writer.write(objectMapper.writeValueAsString(it.next()));\n+      writer.write(SEPARATOR);\n+    }\n+    // write to temporary file\n+    writer.flush();\n+    // atomic rotate\n+    FileRotate.rotateFile(tmpPath, pathToFile);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2700c244aa0746324bc142c42ce634e4e34ed218"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA4NjUxOA==", "bodyText": "should we do this check within the constructor itself ? I think it would make more sense to perform this check during writing operation.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#discussion_r499086518", "createdAt": "2020-10-02T23:21:33Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/aggregators/PersistableSlidingWindow.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.aggregators;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.persistence.FileRotate;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import java.io.BufferedWriter;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Iterator;\n+import java.util.concurrent.TimeUnit;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.commons.io.LineIterator;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+/**\n+ * PersistableSlidingWindow is a SlidingWindow which can have its data written to and read from disk\n+ */\n+public class PersistableSlidingWindow extends SlidingWindow<SlidingWindowData> {\n+  private static final Logger LOG = LogManager.getLogger(PersistableSlidingWindow.class);\n+  private static final ObjectMapper objectMapper = new ObjectMapper();\n+\n+  protected static final String SEPARATOR = \"\\n\";\n+\n+  private Path pathToFile;\n+\n+  public PersistableSlidingWindow(int slidingWindowSize,\n+                                  TimeUnit timeUnit,\n+                                  Path filePath) {\n+    super(slidingWindowSize, timeUnit);\n+    this.pathToFile = filePath;\n+    try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2700c244aa0746324bc142c42ce634e4e34ed218"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNDY2NTcx", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#pullrequestreview-501466571", "createdAt": "2020-10-02T21:50:53Z", "commit": {"oid": "2700c244aa0746324bc142c42ce634e4e34ed218"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQyMTo1MDo1M1rOHb8hDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQyMzozNzoxMFrOHb-AGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA2NTEwMg==", "bodyText": "nit: We should use File.separator for compatibility.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#discussion_r499065102", "createdAt": "2020-10-02T21:50:53Z", "author": {"login": "ktkrg"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/aggregators/PersistableSlidingWindow.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.aggregators;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.persistence.FileRotate;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import java.io.BufferedWriter;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Iterator;\n+import java.util.concurrent.TimeUnit;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.commons.io.LineIterator;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+/**\n+ * PersistableSlidingWindow is a SlidingWindow which can have its data written to and read from disk\n+ */\n+public class PersistableSlidingWindow extends SlidingWindow<SlidingWindowData> {\n+  private static final Logger LOG = LogManager.getLogger(PersistableSlidingWindow.class);\n+  private static final ObjectMapper objectMapper = new ObjectMapper();\n+\n+  protected static final String SEPARATOR = \"\\n\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2700c244aa0746324bc142c42ce634e4e34ed218"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA4OTQzNQ==", "bodyText": "any reason why we're writing in the reverse sequential order? Won't this bring back the sliding window in the reverse order after a load?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#discussion_r499089435", "createdAt": "2020-10-02T23:37:10Z", "author": {"login": "ktkrg"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/aggregators/PersistableSlidingWindow.java", "diffHunk": "@@ -0,0 +1,103 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.aggregators;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.persistence.FileRotate;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import java.io.BufferedWriter;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Iterator;\n+import java.util.concurrent.TimeUnit;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.commons.io.LineIterator;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+/**\n+ * PersistableSlidingWindow is a SlidingWindow which can have its data written to and read from disk\n+ */\n+public class PersistableSlidingWindow extends SlidingWindow<SlidingWindowData> {\n+  private static final Logger LOG = LogManager.getLogger(PersistableSlidingWindow.class);\n+  private static final ObjectMapper objectMapper = new ObjectMapper();\n+\n+  protected static final String SEPARATOR = \"\\n\";\n+\n+  private Path pathToFile;\n+\n+  public PersistableSlidingWindow(int slidingWindowSize,\n+                                  TimeUnit timeUnit,\n+                                  Path filePath) {\n+    super(slidingWindowSize, timeUnit);\n+    this.pathToFile = filePath;\n+    try {\n+      if (Files.exists(pathToFile)) {\n+        load(pathToFile);\n+      } else {\n+        Files.createFile(pathToFile);\n+      }\n+    } catch (IOException e) {\n+      LOG.error(\"Couldn't create file {} to perform young generation tuning\", pathToFile, e);\n+      throw new IllegalArgumentException(\"Couldn't create or read a file at \" + filePath);\n+    }\n+  }\n+\n+  /**\n+   * Loads the SlidingWindowData contained in the given path into this PersistableSlidingWindow\n+   * @param path The path to the file containing the SlidingWindow data\n+   * @throws IOException If there is an error reading the file\n+   */\n+  protected void load(Path path) throws IOException {\n+    LineIterator it = FileUtils.lineIterator(path.toFile(), \"UTF-8\");\n+    try {\n+      while (it.hasNext()) {\n+        String line = it.nextLine();\n+        SlidingWindowData data = objectMapper.readValue(line, SlidingWindowData.class);\n+        next(data);\n+      }\n+    } finally {\n+      LineIterator.closeQuietly(it);\n+    }\n+  }\n+\n+  /**\n+   * Writes the contents of this SlidingWindow into the path provided during construction\n+   *\n+   * <p>This write occurs in 2 stages, it writes to a temporary file, then replaces the actual data\n+   * file with the contents of the temporary file\n+   *\n+   * @throws IOException If there is a CRUD error with the files involved\n+   */\n+  protected void write() throws IOException {\n+    String tmpFile = pathToFile.toString() + RandomStringUtils.randomAlphanumeric(32);\n+    Path tmpPath = Paths.get(tmpFile);\n+    Files.createFile(Paths.get(tmpFile));\n+    BufferedWriter writer = new BufferedWriter(new FileWriter(tmpFile, false));\n+    Iterator<SlidingWindowData> it = windowDeque.descendingIterator();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2700c244aa0746324bc142c42ce634e4e34ed218"}, "originalPosition": 93}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2700c244aa0746324bc142c42ce634e4e34ed218", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/2700c244aa0746324bc142c42ce634e4e34ed218", "committedDate": "2020-10-02T20:30:24Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}, "afterCommit": {"oid": "491cc48308aaef7ca6d785d16c893c6a78a072f4", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/491cc48308aaef7ca6d785d16c893c6a78a072f4", "committedDate": "2020-10-05T21:30:04Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "491cc48308aaef7ca6d785d16c893c6a78a072f4", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/491cc48308aaef7ca6d785d16c893c6a78a072f4", "committedDate": "2020-10-05T21:30:04Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}, "afterCommit": {"oid": "bfb9184c3e55484a115a3461756246513ed4155e", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/bfb9184c3e55484a115a3461756246513ed4155e", "committedDate": "2020-10-05T23:52:30Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10e47b907ec8a19c7025c9e66238bb4bb9bb87e4", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/10e47b907ec8a19c7025c9e66238bb4bb9bb87e4", "committedDate": "2020-10-06T16:19:02Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bfb9184c3e55484a115a3461756246513ed4155e", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/bfb9184c3e55484a115a3461756246513ed4155e", "committedDate": "2020-10-05T23:52:30Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}, "afterCommit": {"oid": "10e47b907ec8a19c7025c9e66238bb4bb9bb87e4", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/10e47b907ec8a19c7025c9e66238bb4bb9bb87e4", "committedDate": "2020-10-06T16:19:02Z", "message": "Add the PersistableSlidingWindow class\n\n- A PersistableSlidingWindow is a sliding window that aggregates data\ninto buckets and can be written to and read from the disk. This makes it\nsuitable for retaining data over large spans of time requiring too much\nmemory or being susceptible to node loss."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMTgwNTMw", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#pullrequestreview-503180530", "createdAt": "2020-10-06T17:05:16Z", "commit": {"oid": "10e47b907ec8a19c7025c9e66238bb4bb9bb87e4"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNzowNToxNlrOHdRkQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNzowNToxNlrOHdRkQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ1ODU2Mg==", "bodyText": "Do we really need to wrap this into an IllegalArgumentException? We could leave this as the checked IOException. It will ensure that callers handle it gracefully.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#discussion_r500458562", "createdAt": "2020-10-06T17:05:16Z", "author": {"login": "vigyasharma"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/aggregators/PersistableSlidingWindow.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.aggregators;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.persistence.FileRotate;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import java.io.BufferedWriter;\n+import java.io.FileWriter;\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.Iterator;\n+import java.util.concurrent.TimeUnit;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.commons.io.LineIterator;\n+import org.apache.commons.lang3.RandomStringUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+/**\n+ * PersistableSlidingWindow is a SlidingWindow which can have its data written to and read from disk\n+ */\n+public class PersistableSlidingWindow extends SlidingWindow<SlidingWindowData> {\n+  private static final Logger LOG = LogManager.getLogger(PersistableSlidingWindow.class);\n+  private static final ObjectMapper objectMapper = new ObjectMapper();\n+\n+  private Path pathToFile;\n+\n+  public PersistableSlidingWindow(int slidingWindowSize,\n+                                  TimeUnit timeUnit,\n+                                  Path filePath) {\n+    super(slidingWindowSize, timeUnit);\n+    this.pathToFile = filePath;\n+    try {\n+      if (Files.exists(pathToFile)) {\n+        load(pathToFile);\n+      }\n+    } catch (IOException e) {\n+      LOG.error(\"Couldn't create file {} to perform young generation tuning\", pathToFile, e);\n+      throw new IllegalArgumentException(\"Couldn't create or read a file at \" + filePath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10e47b907ec8a19c7025c9e66238bb4bb9bb87e4"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e67248918802b2c44927c32f04d58eae84856e1", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/7e67248918802b2c44927c32f04d58eae84856e1", "committedDate": "2020-10-06T18:23:27Z", "message": "Change PersistableSlidingWindow to not throw on construction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNDA4MTQ0", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#pullrequestreview-503408144", "createdAt": "2020-10-06T22:38:18Z", "commit": {"oid": "7e67248918802b2c44927c32f04d58eae84856e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNDMxNjg3", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/447#pullrequestreview-503431687", "createdAt": "2020-10-06T23:39:49Z", "commit": {"oid": "7e67248918802b2c44927c32f04d58eae84856e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 948, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}