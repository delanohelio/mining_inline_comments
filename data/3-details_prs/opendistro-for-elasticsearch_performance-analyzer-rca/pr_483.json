{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3MjY2MTg4", "number": 483, "title": "Adjust resizable queue lower bounds to align with the default capacity(200/1000) suggested by ES", "bodyText": "Fixes #:\nDescription of changes:\nOur queue related performance experiments indicate that downsizing of the write queue could potentially increase heap pressure when a lot of rejection occurs within a short amount of time. So this PR will adjust the default queue lower bound back to the default queue capacity used by ES. This would at least guarantee that our resizable queue does not introduce extra heap pressure when compared with the vanilla ES.\nSo now for the write queue, the lower/upper bounds are [200/1000]\nand for search queue, the lower/upper bounds are [1000/2000]\nTests:\nupdate UT as well so that the UTs are independent of the actual values being set for queue's lower/upper bounds\nIf new tests are added, how long do the new ones take to complete\nn/a\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-10-21T05:43:31Z", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/483", "merged": true, "mergeCommit": {"oid": "202a8a6b0c1a98b57f2b76aae6bc2219f16c48f9"}, "closed": true, "closedAt": "2020-10-22T17:21:44Z", "author": {"login": "rguo-aws"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUmmZPgH2gAyNTA3MjY2MTg4OjkzNTQ3ZmUxYTliZTFiOGY4MTdmNTFmNWQ2ZTFhYWY3ZDUxMWFkZmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdU4KIMAFqTUxNDMwODAwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "93547fe1a9be1b8f817f51f5d6e1aaf7d511adfd", "author": {"user": {"login": "rguo-aws", "name": "Ruizhen Guo"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/93547fe1a9be1b8f817f51f5d6e1aaf7d511adfd", "committedDate": "2020-10-21T05:34:03Z", "message": "Adjust resizable queue lower bounds to align with the default capacity(200/1000) in ES"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2a8716fe5f0e76932be37afc86489e16de2a57d", "author": {"user": {"login": "rguo-aws", "name": "Ruizhen Guo"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/b2a8716fe5f0e76932be37afc86489e16de2a57d", "committedDate": "2020-10-21T17:31:00Z", "message": "Update ITs to reflect changes made for queue capacity lower bounds"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MjY3NTg2", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/483#pullrequestreview-514267586", "createdAt": "2020-10-21T23:51:50Z", "commit": {"oid": "b2a8716fe5f0e76932be37afc86489e16de2a57d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MzA3OTc4", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/483#pullrequestreview-514307978", "createdAt": "2020-10-22T02:01:22Z", "commit": {"oid": "b2a8716fe5f0e76932be37afc86489e16de2a57d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMjowMToyM1rOHmN2xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQwMjowMToyM1rOHmN2xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgzNDk1MQ==", "bodyText": "Do we need to add all of these configurations? Wont just changing the default queue lower bounds suffice?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/483#discussion_r509834951", "createdAt": "2020-10-22T02:01:23Z", "author": {"login": "vigyasharma"}, "path": "pa_config/rca_idle_master.conf", "diffHunk": "@@ -109,22 +109,49 @@\n   // Default Values are added in the config specific file as well\n   // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n-    // Decreasing order of priority for the type of workload we can expect on the cluster.\n-    // Priority order in the list goes from most expected to the lease expected workload type.\n     \"workload-type\": {\n-      \"priority-order\": [\"ingest\", \"search\"]\n+      \"prefer-ingest\": true,\n+      \"prefer-search\": true\n     },\n     // Decreasing order of priority for the type of cache which is expected to be consumed more.\n     // Priority order in the list goes from most used to the lease used cache type.\n     \"cache-type\": {\n       \"priority-order\": [\"fielddata-cache\", \"shard-request-cache\", \"query-cache\", \"bitset-filter-cache\"]\n     },\n-    // cache decider - Needs to be updated as per the performance test results\n-    \"cache-bounds\": {\n-      \"field-data-cache-upper-bound\" : 0.4,\n-      \"shard-request-cache-upper-bound\" : 0.05\n+    \"old-gen-decision-policy-config\": {\n+      \"queue-bucket-size\" : 20,\n+      \"old-gen-threshold-level-one\" : 0.6,\n+      \"old-gen-threshold-level-two\" : 0.75,\n+      \"old-gen-threshold-level-three\" : 0.9\n     }\n   },\n+  // Action Configurations", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2a8716fe5f0e76932be37afc86489e16de2a57d"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MzA4MDA5", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/483#pullrequestreview-514308009", "createdAt": "2020-10-22T02:01:28Z", "commit": {"oid": "b2a8716fe5f0e76932be37afc86489e16de2a57d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 796, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}