{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMjQ2NDk3", "number": 205, "title": "Prepare RCA to work with the Integration Test framework", "bodyText": "Issue #, if available: 22\nDescription of changes: Modified the enablePaAndRca task to properly execute in stages. PA is enabled, then RCA is enabled. Previously this task would not always properly enable the two components.\nAlso modified gradle task logic to use a specified path to the docker-compose program if an environment variable is set. This allows the ES cluster to spin up on local machines as well as on the Github Actions CI runner.\nTests: N/A\nCode coverage percentage for this patch: N/A\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-05-19T16:58:28Z", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/205", "merged": true, "mergeCommit": {"oid": "6745b9321cfc3538d552862d37d8dc689e21170d"}, "closed": true, "closedAt": "2020-05-20T23:28:07Z", "author": {"login": "sidheart"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgW1-4AH2gAyNDIwMjQ2NDk3OmJlOTcwNDk2OGE3MzQ5MDM1ZmZkMmQ4ZGE2MWQ4ZTZmOWRkYTYxYTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjRpbUAFqTQxNTc4MTc5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "be9704968a7349035ffd2d8da61d8e6f9dda61a6", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/be9704968a7349035ffd2d8da61d8e6f9dda61a6", "committedDate": "2020-05-11T21:48:32Z", "message": "Make enablePaAndRca actually work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "160b17f62619c593924f4ff3e9c2d1c1c4a70af3", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/160b17f62619c593924f4ff3e9c2d1c1c4a70af3", "committedDate": "2020-05-15T04:21:55Z", "message": "Make enablePaAndRca actually work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb3ff967308fe11f53e6ce6e6b916ff177ba2dc3", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/eb3ff967308fe11f53e6ce6e6b916ff177ba2dc3", "committedDate": "2020-05-15T17:45:58Z", "message": "docker-compose needs to work with Github Actions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6208109bdd5e75b75fd9775e3fddab2cee2ef031", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/6208109bdd5e75b75fd9775e3fddab2cee2ef031", "committedDate": "2020-05-15T17:47:54Z", "message": "Merge pull request #6 from sidheart/sid-it-framework-redux\n\nSid it framework redux"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1371dc8ad30cf566cab97b0d4e1bc2154cc4f6d", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/f1371dc8ad30cf566cab97b0d4e1bc2154cc4f6d", "committedDate": "2020-05-15T17:56:30Z", "message": "Add gradle info and debug flags to workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "845993efc3c6b74aa79f4f8134e733ae53d2c4a9", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/845993efc3c6b74aa79f4f8134e733ae53d2c4a9", "committedDate": "2020-05-15T18:00:01Z", "message": "Gradle Workflow add stacktrace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2e61f5746704d99835a78bcefa5747186dac044", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/b2e61f5746704d99835a78bcefa5747186dac044", "committedDate": "2020-05-15T18:07:13Z", "message": "Modify printComposeLocation dependency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c839c2972194872a860a4970f59650bd2765be2f", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/c839c2972194872a860a4970f59650bd2765be2f", "committedDate": "2020-05-15T18:19:37Z", "message": "Comment out printComposeLocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77638e9318808247f36129efc5951885176147e0", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/77638e9318808247f36129efc5951885176147e0", "committedDate": "2020-05-15T21:43:18Z", "message": "Merge pull request #7 from sidheart/sid-it-framework-redux\n\nAdd gradle info and debug flags to workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe568a8aaba119d5aa9e81de8bbe7c3cbb179619", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/fe568a8aaba119d5aa9e81de8bbe7c3cbb179619", "committedDate": "2020-05-18T16:44:34Z", "message": "Fix testReadFromWire race condition in WireHopperTest (#202)\n\nThe subscription manager's list of subscribers for a given node could\r\npreviously change between 2 assertions. This has been fixed by saving\r\nthe list into a variable."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1417424ec4f3cd59e9f6618fc82d253e5e3e3d23", "author": {"user": {"login": "aditjind", "name": "Aditya Jindal"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/1417424ec4f3cd59e9f6618fc82d253e5e3e3d23", "committedDate": "2020-05-18T16:44:34Z", "message": "Adding the Shard Size Metric as a part of the Node Stats (#201)\n\nCo-authored-by: Aditya Jindal <aditjind@amazon.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd586085d4ade1148b88597787b707e44e0df4a6", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/cd586085d4ade1148b88597787b707e44e0df4a6", "committedDate": "2020-05-19T16:42:43Z", "message": "Fix testReadFromWire race condition in WireHopperTest (#202)\n\nThe subscription manager's list of subscribers for a given node could\r\npreviously change between 2 assertions. This has been fixed by saving\r\nthe list into a variable."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bbe165d137b7e4a3163fb8544974548661f819a", "author": {"user": {"login": "aditjind", "name": "Aditya Jindal"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/7bbe165d137b7e4a3163fb8544974548661f819a", "committedDate": "2020-05-19T16:42:43Z", "message": "Adding the Shard Size Metric as a part of the Node Stats (#201)\n\nCo-authored-by: Aditya Jindal <aditjind@amazon.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "653fd8c5492380270bacc7aafb3cac84ce9f76e2", "author": {"user": {"login": "khushbr", "name": "Khushboo Rajput"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/653fd8c5492380270bacc7aafb3cac84ce9f76e2", "committedDate": "2020-05-19T16:42:43Z", "message": "Updating the ThreadList.java to use Java Annotations instead of Checker Framework (#203)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12169a5b9ba24068af6b9fc12085827371e670a4", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/12169a5b9ba24068af6b9fc12085827371e670a4", "committedDate": "2020-05-19T16:42:43Z", "message": "Cleanup, working enablePaAndRca and Github Actions compatibility"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cef0b62a78b30608d911bf24becf8f2e4517cac8", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/cef0b62a78b30608d911bf24becf8f2e4517cac8", "committedDate": "2020-05-19T16:53:06Z", "message": "Merge pull request #8 from sidheart/sid-it-framework-redux\n\nSid it framework redux"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0642068429abc4ec55a4b8e0e2d0ac41607f5eb8", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/0642068429abc4ec55a4b8e0e2d0ac41607f5eb8", "committedDate": "2020-05-19T16:59:28Z", "message": "Make enablePaAndRca actually work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d527c708c0f8d140887cd3bc0e106c04fe4c3cf0", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/d527c708c0f8d140887cd3bc0e106c04fe4c3cf0", "committedDate": "2020-05-19T16:59:28Z", "message": "docker-compose needs to work with Github Actions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75e48325d31861177c74c9fe19a4342dbd6b98e5", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/75e48325d31861177c74c9fe19a4342dbd6b98e5", "committedDate": "2020-05-19T16:59:28Z", "message": "Add gradle info and debug flags to workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae3a8082ec72abbcd454a23a547f3e4843301db2", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/ae3a8082ec72abbcd454a23a547f3e4843301db2", "committedDate": "2020-05-19T16:59:28Z", "message": "Gradle Workflow add stacktrace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9d781b81b18a8e4ce897225400b1eb978726c35", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/b9d781b81b18a8e4ce897225400b1eb978726c35", "committedDate": "2020-05-19T16:59:28Z", "message": "Modify printComposeLocation dependency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f49dbc34fe85e7063d8feddfd780f79e8432eff", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/4f49dbc34fe85e7063d8feddfd780f79e8432eff", "committedDate": "2020-05-19T16:59:28Z", "message": "Comment out printComposeLocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62ecfc76e8a40bbe837c88f0dce0753c1ce2b5d0", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/62ecfc76e8a40bbe837c88f0dce0753c1ce2b5d0", "committedDate": "2020-05-19T16:59:28Z", "message": "Cleanup, working enablePaAndRca and Github Actions compatibility"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "12169a5b9ba24068af6b9fc12085827371e670a4", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/12169a5b9ba24068af6b9fc12085827371e670a4", "committedDate": "2020-05-19T16:42:43Z", "message": "Cleanup, working enablePaAndRca and Github Actions compatibility"}, "afterCommit": {"oid": "62ecfc76e8a40bbe837c88f0dce0753c1ce2b5d0", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/62ecfc76e8a40bbe837c88f0dce0753c1ce2b5d0", "committedDate": "2020-05-19T16:59:28Z", "message": "Cleanup, working enablePaAndRca and Github Actions compatibility"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NzM3ODA4", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/205#pullrequestreview-415737808", "createdAt": "2020-05-20T21:46:31Z", "commit": {"oid": "62ecfc76e8a40bbe837c88f0dce0753c1ce2b5d0"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMTo0NjozMVrOGYe9Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMTo0NzowOFrOGYe-UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODMyNjIzMQ==", "bodyText": "Should We add a comment explaining the rationale for the sleep ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/205#discussion_r428326231", "createdAt": "2020-05-20T21:46:31Z", "author": {"login": "yojs"}, "path": "build.gradle", "diffHunk": "@@ -508,12 +523,25 @@ task unzipPerfTop(type: Copy) {\n     enabled = !file(perfTopBin).exists()\n }\n \n-task enablePaAndRca(type: Exec) {\n+task enablePa(type: Exec) {\n     dependsOn(waitForES)\n+    doFirst {\n+        sleep(5000)\n+    }\n     commandLine('curl', 'localhost:9200/_opendistro/_performanceanalyzer/cluster/config', '-H',\n             'Content-Type: application/json', '-d', '{\"enabled\": true}')\n+    doLast {\n+        sleep(5000)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62ecfc76e8a40bbe837c88f0dce0753c1ce2b5d0"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODMyNjQ4MQ==", "bodyText": "Should we call it enableRca ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/205#discussion_r428326481", "createdAt": "2020-05-20T21:47:08Z", "author": {"login": "yojs"}, "path": "build.gradle", "diffHunk": "@@ -508,12 +523,25 @@ task unzipPerfTop(type: Copy) {\n     enabled = !file(perfTopBin).exists()\n }\n \n-task enablePaAndRca(type: Exec) {\n+task enablePa(type: Exec) {\n     dependsOn(waitForES)\n+    doFirst {\n+        sleep(5000)\n+    }\n     commandLine('curl', 'localhost:9200/_opendistro/_performanceanalyzer/cluster/config', '-H',\n             'Content-Type: application/json', '-d', '{\"enabled\": true}')\n+    doLast {\n+        sleep(5000)\n+    }\n+}\n+\n+task enablePaAndRca(type: Exec) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62ecfc76e8a40bbe837c88f0dce0753c1ce2b5d0"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81b326fa357419003e3bd05c25a91a67e68d3dfd", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/81b326fa357419003e3bd05c25a91a67e68d3dfd", "committedDate": "2020-05-20T22:22:59Z", "message": "Rename enablePaAndRca to enableRca and add comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f50180f3b539588656474aeee23d375a31d24a38", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/f50180f3b539588656474aeee23d375a31d24a38", "committedDate": "2020-05-20T22:25:22Z", "message": "Merge branch 'master' into odfe-it-framework-release"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12e959c4aaf85de95ecd7e03307b5e2a8ba75ba7", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/12e959c4aaf85de95ecd7e03307b5e2a8ba75ba7", "committedDate": "2020-05-20T22:26:59Z", "message": "Merge pull request #9 from sidheart/odfe-it-framework-release\n\nOdfe it framework release"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c3ed33ceb643438179cde7d75e0568a6b6d3d4f", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/1c3ed33ceb643438179cde7d75e0568a6b6d3d4f", "committedDate": "2020-05-20T22:36:47Z", "message": "Renamed enablePaAndRca to enableRca and added comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e050eec0b8a913beb6cfb69da269bd8b889ad201", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/e050eec0b8a913beb6cfb69da269bd8b889ad201", "committedDate": "2020-05-20T22:38:52Z", "message": "Merge branch 'master' into sid-it-framework-redux"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NzY2MjY0", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/205#pullrequestreview-415766264", "createdAt": "2020-05-20T22:47:04Z", "commit": {"oid": "e050eec0b8a913beb6cfb69da269bd8b889ad201"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NzgxNzkz", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/205#pullrequestreview-415781793", "createdAt": "2020-05-20T23:27:04Z", "commit": {"oid": "e050eec0b8a913beb6cfb69da269bd8b889ad201"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1007, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}