{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwODMxMzQ3", "number": 462, "title": "Add operational metrics for batch metrics api", "bodyText": "Fixes #:\nN/A\nDescription of changes:\n\nREADER_METRICSDB_ACCESS_ERRORS: errors accessing metricsdb files\nMETRICSDB_FILE_SIZE: size of generated metricsdb files\nBATCH_METRICS_ENABLED: whether or not batch metrics is enabled\nBATCH_METRICS_HTTP_CLIENT_ERROR: number of bad batch metrics requests\nBATCH_METRICS_HTTP_HOST_ERROR: number of batch metrics requests where\nthe host ran into errors\nBATCH_METRICS_HTTP_SUCCESS: number of successful batch metrics\nrequests\nBATCH_METRICS_EXCEEDED_MAX_DATAPOINTS: requests where the user\nrequested for more datapoints than the hardcoded limit of 100800\nBATCH_METRICS_QUERY_PROCESSING_TIME: amount of time required to\nprocess batch metrics requests\nBATCH_METRICS_NUM_METRICSDB_FILES: number of metricsdb files within\nthe batch metrics retention period\nBATCH_METRICS_DATA_SIZE: amount of data batch metrics is storing\n\nTests:\n\nManually tested that stats get emitted\n\nIf new tests are added, how long do the new ones take to complete\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-10-09T21:35:07Z", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/462", "merged": true, "mergeCommit": {"oid": "f83a0c551451bb41dcf61c0038988e523583218a"}, "closed": true, "closedAt": "2020-10-15T01:32:13Z", "author": {"login": "ricardolstephen"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQ9Q9_AFqTUwNjAwMzk3Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSnhI7AFqTUwODg3Njg2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDAzOTcy", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/462#pullrequestreview-506003972", "createdAt": "2020-10-09T21:40:57Z", "commit": {"oid": "b677d2a3a15cd764e526435404522c768236a0af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTo0MDo1N1rOHfZVmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTo0MDo1N1rOHfZVmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4MzAzMw==", "bodyText": "Can we use the new format ?\nFor an example please see this", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/462#discussion_r502683033", "createdAt": "2020-10-09T21:40:57Z", "author": {"login": "yojs"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/collectors/StatExceptionCode.java", "diffHunk": "@@ -45,6 +45,8 @@\n   RCA_SCHEDULER_THREAD_STOPPED(\"RcaSchedulerThreadStopped\"),\n   JVM_THREAD_ID_NO_LONGER_EXISTS(\"JVM_THREAD_ID_NO_LONGER_EXISTS\"),\n   ES_REQUEST_INTERCEPTOR_ERROR(\"ES_REQUEST_INTERCEPTOR_ERROR\"),\n+  METRICSDB_ACCESS_ERROR(\"METRICSDB_ACCESS_ERROR\"),\n+  EXCEEDED_BATCH_METRICS_MAX_DATAPOINTS(\"EXCEEDED_BATCH_METRICS_MAX_DATAPOINTS\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b677d2a3a15cd764e526435404522c768236a0af"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDA3MjY5", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/462#pullrequestreview-506007269", "createdAt": "2020-10-09T21:51:10Z", "commit": {"oid": "b677d2a3a15cd764e526435404522c768236a0af"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDMzMTE4", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/462#pullrequestreview-506033118", "createdAt": "2020-10-09T23:14:32Z", "commit": {"oid": "b677d2a3a15cd764e526435404522c768236a0af"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10f05fb960c0294c686d1c6d43f5c97a8d979b26", "author": {"user": {"login": "ricardolstephen", "name": "Ricardo L. Stephen"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/10f05fb960c0294c686d1c6d43f5c97a8d979b26", "committedDate": "2020-10-12T22:08:35Z", "message": "Add operational metrics for batch metrics api\n\n* READER_METRICSDB_ACCESS_ERRORS: errors accessing metricsdb files\n* METRICSDB_FILE_SIZE: size of generated metricsdb files\n* BATCH_METRICS_ENABLED: whether or not batch metrics is enabled\n* BATCH_METRICS_HTTP_CLIENT_ERROR: number of bad batch metrics requests\n* BATCH_METRICS_HTTP_HOST_ERROR: number of batch metrics requests where\n    the host ran into errors\n* BATCH_METRICS_HTTP_SUCCESS: number of successful batch metrics\n    requests\n* BATCH_METRICS_EXCEEDED_MAX_DATAPOINTS: requests where the user\n    requested for more datapoints than the hardcoded limit of 100800\n* BATCH_METRICS_QUERY_PROCESSING_TIME: amount of time required to\n    process batch metrics requests\n* BATCH_METRICS_NUM_METRICSDB_FILES: number of metricsdb files within\n    the batch metrics retention period\n* BATCH_METRICS_DATA_SIZE: amount of data batch metrics is storing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b677d2a3a15cd764e526435404522c768236a0af", "author": {"user": {"login": "ricardolstephen", "name": "Ricardo L. Stephen"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/b677d2a3a15cd764e526435404522c768236a0af", "committedDate": "2020-10-09T21:26:43Z", "message": "Add operational metrics for batch metrics api\n\n- METRICSDB_ACCESS_ERROR stat exception for errors accessing (locate,\n  connect to, delete) metricsdb files.\n- EXCEEDED_BATCH_METRICS_MAX_DATAPOINTS stat exception for if the user\n  requested more datapoints than the hardcoded limit of 100800."}, "afterCommit": {"oid": "c54bd56f96b03a62a42d218a54f5754479c9e041", "author": {"user": {"login": "ricardolstephen", "name": "Ricardo L. Stephen"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/c54bd56f96b03a62a42d218a54f5754479c9e041", "committedDate": "2020-10-12T21:54:02Z", "message": "."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c54bd56f96b03a62a42d218a54f5754479c9e041", "author": {"user": {"login": "ricardolstephen", "name": "Ricardo L. Stephen"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/c54bd56f96b03a62a42d218a54f5754479c9e041", "committedDate": "2020-10-12T21:54:02Z", "message": "."}, "afterCommit": {"oid": "10f05fb960c0294c686d1c6d43f5c97a8d979b26", "author": {"user": {"login": "ricardolstephen", "name": "Ricardo L. Stephen"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/10f05fb960c0294c686d1c6d43f5c97a8d979b26", "committedDate": "2020-10-12T22:08:35Z", "message": "Add operational metrics for batch metrics api\n\n* READER_METRICSDB_ACCESS_ERRORS: errors accessing metricsdb files\n* METRICSDB_FILE_SIZE: size of generated metricsdb files\n* BATCH_METRICS_ENABLED: whether or not batch metrics is enabled\n* BATCH_METRICS_HTTP_CLIENT_ERROR: number of bad batch metrics requests\n* BATCH_METRICS_HTTP_HOST_ERROR: number of batch metrics requests where\n    the host ran into errors\n* BATCH_METRICS_HTTP_SUCCESS: number of successful batch metrics\n    requests\n* BATCH_METRICS_EXCEEDED_MAX_DATAPOINTS: requests where the user\n    requested for more datapoints than the hardcoded limit of 100800\n* BATCH_METRICS_QUERY_PROCESSING_TIME: amount of time required to\n    process batch metrics requests\n* BATCH_METRICS_NUM_METRICSDB_FILES: number of metricsdb files within\n    the batch metrics retention period\n* BATCH_METRICS_DATA_SIZE: amount of data batch metrics is storing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a96338507f0c25b00ee7003ee3166d532b86cfb6", "author": {"user": {"login": "ricardolstephen", "name": "Ricardo L. Stephen"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/a96338507f0c25b00ee7003ee3166d532b86cfb6", "committedDate": "2020-10-12T22:35:06Z", "message": "Fix checkstyle issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3OTAxMDkz", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/462#pullrequestreview-507901093", "createdAt": "2020-10-13T23:40:02Z", "commit": {"oid": "a96338507f0c25b00ee7003ee3166d532b86cfb6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4ODc2ODYw", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/462#pullrequestreview-508876860", "createdAt": "2020-10-15T01:30:22Z", "commit": {"oid": "a96338507f0c25b00ee7003ee3166d532b86cfb6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 980, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}