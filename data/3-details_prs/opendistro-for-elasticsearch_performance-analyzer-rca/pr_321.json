{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5MzkzNjUz", "number": 321, "title": "Fix failures in ResourceHeatMapGraphTest", "bodyText": "Issue #: #322\nDescription of changes:\nWhen ResourceHeatMapGraphTest was run after\nPerformanceAnalyzerWebServerTest, we noticed connection refused\nexceptions that didn't happen when the tests were run in isolation.\nThis commit makes sure that PerformanceAnalyzerWebServerTest cleans up\nafter itself so that subsequent tests will run as expected.\nTests:\n\nPerformanceAnalyzerWebServerTest\nResourceHeatMapGraphTest\n\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-07-30T16:53:04Z", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/321", "merged": true, "mergeCommit": {"oid": "b6032452ab1b18db85c1908a9b878c3a9db93616"}, "closed": true, "closedAt": "2020-07-30T20:24:20Z", "author": {"login": "sidheart"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6ChrSgH2gAyNDU5MzkzNjUzOjc3ZDBiM2Q0MzM5OGQ3NzBjMjE3NTY0OGY0OWQ3ZDhhMDlkZWZiNjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6FleigFqTQ1ODcyOTUxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "77d0b3d43398d770c2175648f49d7d8a09defb63", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/77d0b3d43398d770c2175648f49d7d8a09defb63", "committedDate": "2020-07-30T16:50:17Z", "message": "Fix failures in ResourceHeatMapGraphTest\n\nWhen ResourceHeatMapGraphTest was run after\nPerformanceAnalyzerWebServerTest, we noticed connection refused\nexceptions that didn't happen when the tests were run in isolation.\n\nThis commit makes sure that PerformanceAnalyzerWebServerTest cleans up\nafter itself so that subsequent tests will run as expected."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NTk3NTg2", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/321#pullrequestreview-458597586", "createdAt": "2020-07-30T17:10:14Z", "commit": {"oid": "77d0b3d43398d770c2175648f49d7d8a09defb63"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzoxMDoxNFrOG5sN6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzoxMDoxNFrOG5sN6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE0NjQ3Mw==", "bodyText": "Are we trying to restore oldBindHost to some default value here? If so, should it be done in setUp() ?\nSame for others.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/321#discussion_r463146473", "createdAt": "2020-07-30T17:10:14Z", "author": {"login": "vigyasharma"}, "path": "src/test/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/PerformanceAnalyzerWebServerTest.java", "diffHunk": "@@ -70,9 +70,13 @@ public void tearDown() {\n         // Unset all SSL settings\n         if (oldBindHost != null) {\n             PluginSettings.instance().overrideProperty(PerformanceAnalyzerWebServer.WEBSERVICE_BIND_HOST_NAME, oldBindHost);\n+        } else {\n+            PluginSettings.instance().overrideProperty(PerformanceAnalyzerWebServer.WEBSERVICE_BIND_HOST_NAME, \"localhost\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d0b3d43398d770c2175648f49d7d8a09defb63"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NTk4NDA2", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/321#pullrequestreview-458598406", "createdAt": "2020-07-30T17:11:20Z", "commit": {"oid": "77d0b3d43398d770c2175648f49d7d8a09defb63"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NTk5NTYy", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/321#pullrequestreview-458599562", "createdAt": "2020-07-30T17:12:56Z", "commit": {"oid": "77d0b3d43398d770c2175648f49d7d8a09defb63"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzoxMjo1NlrOG5sTtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzoxMjo1NlrOG5sTtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE0Nzk1OA==", "bodyText": "Why is this sleep needed?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/321#discussion_r463147958", "createdAt": "2020-07-30T17:12:56Z", "author": {"login": "vigyasharma"}, "path": "src/test/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/ResourceHeatMapGraphTest.java", "diffHunk": "@@ -151,6 +150,12 @@ public static void shutdown() {\n     clientServers.getHttpServer().stop(0);\n     clientServers.getNetServer().stop();\n     clientServers.getNetClient().stop();\n+\n+    try {\n+      Thread.sleep(1000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77d0b3d43398d770c2175648f49d7d8a09defb63"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5182ca55c2ab8a76d895f46ae23204d3befdc95", "author": {"user": {"login": "sidheart", "name": "Sid Narayan"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/d5182ca55c2ab8a76d895f46ae23204d3befdc95", "committedDate": "2020-07-30T17:24:33Z", "message": "Remove Assert.fail() calls from ResourceHeatMapGraphTest\n\nCalls to Assert.fail() obscure the actual Exception in our testing logs.\n\nThis commit removes the fail() calls and simply throws instead."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NzIyOTQ4", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/321#pullrequestreview-458722948", "createdAt": "2020-07-30T20:13:47Z", "commit": {"oid": "d5182ca55c2ab8a76d895f46ae23204d3befdc95"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NzI5NTE0", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/321#pullrequestreview-458729514", "createdAt": "2020-07-30T20:24:09Z", "commit": {"oid": "d5182ca55c2ab8a76d895f46ae23204d3befdc95"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 839, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}