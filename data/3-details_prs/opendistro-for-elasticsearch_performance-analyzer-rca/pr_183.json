{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMzQwMTEz", "number": 183, "title": "Reader UT coverage bumped to 80%", "bodyText": "Enabled tests which were disabled and not flaky\n\n\nChanged the file reading format in the MetricProcessor Tests\n\n\nRefactored the class MetricsParser which is not used anymore.\n\n\nIssue #, if available:  #174\nDescription of changes:\nTests:\nCode coverage percentage for this patch: 80%\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-05-05T07:00:22Z", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/183", "merged": true, "mergeCommit": {"oid": "d87901abe92f7b196670a05d6c618c10e77d3941"}, "closed": true, "closedAt": "2020-05-11T19:40:48Z", "author": {"login": "aditjind"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceN6BUgH2gAyNDEzMzQwMTEzOmVlMWJhZjljZTU4MWY1NTMyMDQxOThkZjhhZjIyOTY3ZmYwNWQyYjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgVAcagFqTQwOTQ3MzE1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ee1baf9ce581f553204198df8af22967ff05d2b9", "author": {"user": {"login": "aditjind", "name": "Aditya Jindal"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/ee1baf9ce581f553204198df8af22967ff05d2b9", "committedDate": "2020-05-05T06:15:57Z", "message": "Reader UT coverage bumped to 80%\n\n* Enabled tests which were disabled and not flaky\n\n* Changed the file reading format in the MetricProcessor Tests\n\n* Refactored the class MetricsParser which is not used anymore."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2OTAzNjI0", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/183#pullrequestreview-406903624", "createdAt": "2020-05-06T19:02:17Z", "commit": {"oid": "ee1baf9ce581f553204198df8af22967ff05d2b9"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxOTowMjoxOFrOGRhPJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwMTo0ODo0N1rOGRrgww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTAyMzUyNA==", "bodyText": "Maybe instead of adding to the selected includes, we should remove the include list ? That will put the entire repo through coverage validation (modulo the excludes).", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/183#discussion_r421023524", "createdAt": "2020-05-06T19:02:18Z", "author": {"login": "yojs"}, "path": "build.gradle", "diffHunk": "@@ -123,7 +123,8 @@ jacocoTestReport {\n         classDirectories.from = files(classDirectories.files.collect {\n             fileTree(dir: it,\n                     include: [\n-                            '**/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/**'\n+                            '**/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/**',\n+                            '**/com/amazon/opendistro/elasticsearch/performanceanalyzer/reader/**'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee1baf9ce581f553204198df8af22967ff05d2b9"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE5MTg3NQ==", "bodyText": "Why are we not using MetricsParesr.extractEntryData ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/183#discussion_r421191875", "createdAt": "2020-05-07T01:48:47Z", "author": {"login": "yojs"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/reader/ReaderMetricsProcessor.java", "diffHunk": "@@ -739,6 +737,29 @@ public void emitNodeMetrics(long currWindowStartTime, MetricsDB metricsDB) throw\n     }\n   }\n \n+  /**\n+   * An example value is this: current_time:1566413987194 StartTime:1566413987194 ItemCount:359\n+   * IndexName:nyc_taxis ShardID:25 Primary:true Each pair is separated by new line and the key and\n+   * value within each pair is separated by \":\" This function just parses the string and generates\n+   * the map as such.\n+   *\n+   * @param eventValue The value input to the helper function.\n+   * @return Returns a map of key value pairs\n+   */\n+  static Map<String, String> extractEntryData(String eventValue) {\n+    String[] lines = eventValue.split(System.lineSeparator());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee1baf9ce581f553204198df8af22967ff05d2b9"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6f4c99f36f67a9e34287b2f262a3e6de3c5d3f7", "author": {"user": {"login": "aditjind", "name": "Aditya Jindal"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/b6f4c99f36f67a9e34287b2f262a3e6de3c5d3f7", "committedDate": "2020-05-08T07:14:53Z", "message": "Updating to Generate UTs Coverage Report for all packages"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTc4Mzc0", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/183#pullrequestreview-408578374", "createdAt": "2020-05-08T23:30:11Z", "commit": {"oid": "b6f4c99f36f67a9e34287b2f262a3e6de3c5d3f7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMzozMDoxMVrOGS2Y8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMzozMDoxMVrOGS2Y8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQxODY3Mg==", "bodyText": "nit: Maybe make this an instance variable, or initialize this in before() so that you don't have to do this on every test case.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/183#discussion_r422418672", "createdAt": "2020-05-08T23:30:11Z", "author": {"login": "ktkrg"}, "path": "src/test/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/reader/ReaderMetricsProcessorTests.java", "diffHunk": "@@ -44,39 +44,52 @@ public ReaderMetricsProcessorTests() throws SQLException, ClassNotFoundException\n     super();\n   }\n \n-  // Disabled on purpose\n-  // @Test\n-  public void testReaderMetricsProcessor() throws Exception {\n-    String rootLocation = \"build/private/test_resources/dev/shm\";\n+  @Test\n+  public void testReaderMetricsProcessorFrequently() throws Exception {\n+    String rootLocation = \"build/resources/test/reader/\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6f4c99f36f67a9e34287b2f262a3e6de3c5d3f7"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTc4NzQx", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/183#pullrequestreview-408578741", "createdAt": "2020-05-08T23:31:49Z", "commit": {"oid": "b6f4c99f36f67a9e34287b2f262a3e6de3c5d3f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ef3e9a990df58ed6fbea1ce1714f075a8388c57", "author": {"user": {"login": "aditjind", "name": "Aditya Jindal"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/9ef3e9a990df58ed6fbea1ce1714f075a8388c57", "committedDate": "2020-05-11T10:30:15Z", "message": "Addressing CR Comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NDczMTUx", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/183#pullrequestreview-409473151", "createdAt": "2020-05-11T19:40:09Z", "commit": {"oid": "9ef3e9a990df58ed6fbea1ce1714f075a8388c57"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 990, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}