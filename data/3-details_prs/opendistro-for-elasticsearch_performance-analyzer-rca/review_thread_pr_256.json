{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NTMxNTAx", "number": 256, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMTo0Mjo0MVrOEKVTeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMjoxOTowM1rOEKVq2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjcwMjY2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/HotResourceSummary.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMTo0Mjo0MVrOGrT_yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNzo0ODoyNVrOGrvr4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA2OTU3OQ==", "bodyText": "Should we also add theResourceMetricName here?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448069579", "createdAt": "2020-07-01T01:42:41Z", "author": {"login": "khushbr"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/HotResourceSummary.java", "diffHunk": "@@ -166,14 +164,14 @@ public static HotResourceSummary buildHotResourceSummaryFromMessage(HotResourceS\n   @Override\n   public String toString() {\n     return new StringBuilder()\n-        .append(ResourceTypeUtil.getResourceTypeName(this.resourceType))\n+        .append(ResourceUtil.getResourceTypeName(resource))\n+        .append(\" \")\n+        .append(ResourceUtil.getResourceTypeUnit(resource))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyMzIzNA==", "bodyText": "Done, renamed to theResourceMetricName", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448523234", "createdAt": "2020-07-01T17:48:25Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/HotResourceSummary.java", "diffHunk": "@@ -166,14 +164,14 @@ public static HotResourceSummary buildHotResourceSummaryFromMessage(HotResourceS\n   @Override\n   public String toString() {\n     return new StringBuilder()\n-        .append(ResourceTypeUtil.getResourceTypeName(this.resourceType))\n+        .append(ResourceUtil.getResourceTypeName(resource))\n+        .append(\" \")\n+        .append(ResourceUtil.getResourceTypeUnit(resource))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA2OTU3OQ=="}, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 87}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjcxNzk1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/ResourceUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMTo1MjowOFrOGrUIzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNzo1NjowOVrOGrv7zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3MTg4NA==", "bodyText": "It would be good to add documentation around how Resource is a factor of ResourceEnum and MetricEnum  with linking to the .proto file", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448071884", "createdAt": "2020-07-01T01:52:08Z", "author": {"login": "khushbr"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/ResourceUtil.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.summaries;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.AdditionalFields;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.MetricEnum;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.PANetworking;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.Resource;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceEnum;\n+\n+/**\n+ * A utility class to parse and build grpc ResourceType\n+ */\n+public class ResourceUtil {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyNzMwOQ==", "bodyText": "done, added a javadoc to explain the Resource message and its enums", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448527309", "createdAt": "2020-07-01T17:56:09Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/ResourceUtil.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.summaries;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.AdditionalFields;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.MetricEnum;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.PANetworking;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.Resource;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceEnum;\n+\n+/**\n+ * A utility class to parse and build grpc ResourceType\n+ */\n+public class ResourceUtil {\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3MTg4NA=="}, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjczNTQwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/ResourceUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMjowMjo1OVrOGrUTbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNzo1Njo0OVrOGrv9HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3NDYwNg==", "bodyText": "The function name here getResourceTypeUnit doesn't convey that it is returning resourceMetric information. Consider renaming it.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448074606", "createdAt": "2020-07-01T02:02:59Z", "author": {"login": "khushbr"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/ResourceUtil.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.summaries;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.AdditionalFields;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.MetricEnum;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.PANetworking;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.Resource;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceEnum;\n+\n+/**\n+ * A utility class to parse and build grpc ResourceType\n+ */\n+public class ResourceUtil {\n+\n+  // JVM resource\n+  public static Resource OLD_GEN_HEAP_USAGE = Resource.newBuilder()\n+      .setResource(ResourceEnum.OLD_GEN)\n+      .setMetric(MetricEnum.HEAP_USAGE).build();\n+  public static Resource YOUNG_GEN_PROMOTION_RATE = Resource.newBuilder()\n+      .setResource(ResourceEnum.YOUNG_GEN)\n+      .setMetric(MetricEnum.PROMOTION_RATE).build();\n+\n+  // hardware resource\n+  public static Resource CPU_USAGE = Resource.newBuilder()\n+      .setResource(ResourceEnum.CPU)\n+      .setMetric(MetricEnum.CPU_USAGE).build();\n+  public static Resource IO_TOTAL_THROUGHPUT = Resource.newBuilder()\n+      .setResource(ResourceEnum.IO)\n+      .setMetric(MetricEnum.TOTAL_THROUGHPUT).build();\n+  public static Resource IO_TOTAL_SYS_CALLRATE = Resource.newBuilder()\n+      .setResource(ResourceEnum.IO)\n+      .setMetric(MetricEnum.TOTAL_SYS_CALLRATE).build();\n+\n+  // thread pool\n+  public static Resource WRITE_QUEUE_REJECTION = Resource.newBuilder()\n+      .setResource(ResourceEnum.WRITE_THREADPOOL)\n+      .setMetric(MetricEnum.QUEUE_REJECTION).build();\n+  public static Resource SEARCH_QUEUE_REJECTION = Resource.newBuilder()\n+      .setResource(ResourceEnum.SEARCH_THREADPOOL)\n+      .setMetric(MetricEnum.QUEUE_REJECTION).build();\n+\n+  /**\n+   * Read the resourceType name from the ResourceType object\n+   * @param resource grpc Resource object\n+   * @return resource type name\n+   */\n+  public static String getResourceTypeName(Resource resource) {\n+    return resource.getResource().getValueDescriptor().getOptions()\n+          .getExtension(PANetworking.additionalFields).getName();\n+  }\n+\n+  /**\n+   * Read the resourceType unit type from the ResourceType object\n+   * @param resource grpc ResourceType object\n+   * @return resource unit type\n+   */\n+  public static String getResourceTypeUnit(Resource resource) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyNzY0NA==", "bodyText": "done, renamed to getResourceMetricName", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448527644", "createdAt": "2020-07-01T17:56:49Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/ResourceUtil.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ *  permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.summaries;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.AdditionalFields;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.MetricEnum;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.PANetworking;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.Resource;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceEnum;\n+\n+/**\n+ * A utility class to parse and build grpc ResourceType\n+ */\n+public class ResourceUtil {\n+\n+  // JVM resource\n+  public static Resource OLD_GEN_HEAP_USAGE = Resource.newBuilder()\n+      .setResource(ResourceEnum.OLD_GEN)\n+      .setMetric(MetricEnum.HEAP_USAGE).build();\n+  public static Resource YOUNG_GEN_PROMOTION_RATE = Resource.newBuilder()\n+      .setResource(ResourceEnum.YOUNG_GEN)\n+      .setMetric(MetricEnum.PROMOTION_RATE).build();\n+\n+  // hardware resource\n+  public static Resource CPU_USAGE = Resource.newBuilder()\n+      .setResource(ResourceEnum.CPU)\n+      .setMetric(MetricEnum.CPU_USAGE).build();\n+  public static Resource IO_TOTAL_THROUGHPUT = Resource.newBuilder()\n+      .setResource(ResourceEnum.IO)\n+      .setMetric(MetricEnum.TOTAL_THROUGHPUT).build();\n+  public static Resource IO_TOTAL_SYS_CALLRATE = Resource.newBuilder()\n+      .setResource(ResourceEnum.IO)\n+      .setMetric(MetricEnum.TOTAL_SYS_CALLRATE).build();\n+\n+  // thread pool\n+  public static Resource WRITE_QUEUE_REJECTION = Resource.newBuilder()\n+      .setResource(ResourceEnum.WRITE_THREADPOOL)\n+      .setMetric(MetricEnum.QUEUE_REJECTION).build();\n+  public static Resource SEARCH_QUEUE_REJECTION = Resource.newBuilder()\n+      .setResource(ResourceEnum.SEARCH_THREADPOOL)\n+      .setMetric(MetricEnum.QUEUE_REJECTION).build();\n+\n+  /**\n+   * Read the resourceType name from the ResourceType object\n+   * @param resource grpc Resource object\n+   * @return resource type name\n+   */\n+  public static String getResourceTypeName(Resource resource) {\n+    return resource.getResource().getValueDescriptor().getOptions()\n+          .getExtension(PANetworking.additionalFields).getName();\n+  }\n+\n+  /**\n+   * Read the resourceType unit type from the ResourceType object\n+   * @param resource grpc ResourceType object\n+   * @return resource unit type\n+   */\n+  public static String getResourceTypeUnit(Resource resource) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3NDYwNg=="}, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5MjczNzE3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/HotResourceSummary.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMjowNDowNVrOGrUUeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMjowNDowNVrOGrUUeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3NDg3NA==", "bodyText": "There is a disconnect between column name and the getter function name. We should rename one of the two.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448074874", "createdAt": "2020-07-01T02:04:05Z", "author": {"login": "khushbr"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/summaries/HotResourceSummary.java", "diffHunk": "@@ -223,14 +221,14 @@ public String getTableName() {\n   public JsonElement toJson() {\n     JsonObject summaryObj = new JsonObject();\n     summaryObj.addProperty(SQL_SCHEMA_CONSTANTS.RESOURCE_TYPE_COL_NAME,\n-        ResourceTypeUtil.getResourceTypeName(this.resourceType));\n+        ResourceUtil.getResourceTypeName(this.resource));\n+    summaryObj.addProperty(SQL_SCHEMA_CONSTANTS.RESOURCE_METRIC_COL_NAME,\n+        ResourceUtil.getResourceTypeUnit(this.resource));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 135}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5Mjc0Njk5OnYy", "diffSide": "RIGHT", "path": "src/main/proto/inter_node_rpc_service.proto", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMjowOTo0M1rOGrUaCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMjowOTo0M1rOGrUaCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3NjI5Ng==", "bodyText": "We should rename either message Resource or the ResourceEnum resource. resourceSummary.getResource().getResource() isn't very readable.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448076296", "createdAt": "2020-07-01T02:09:43Z", "author": {"login": "khushbr"}, "path": "src/main/proto/inter_node_rpc_service.proto", "diffHunk": "@@ -48,40 +48,50 @@ message ResourceContextMessage {\n /*\n   Enum for different resource type\n */\n-message ResourceTypeOptions {\n-  string resourceTypeName = 1;\n-  string resourceTypeUnit = 2;\n+message AdditionalFields {\n+  string name = 1;\n+  string description = 2;\n }\n \n extend google.protobuf.EnumValueOptions {\n-  ResourceTypeOptions resourceTypeOptions = 50000;\n+  AdditionalFields additional_fields = 50000;\n }\n \n-enum JvmEnum {\n-  OLD_GEN = 0 [(resourceTypeOptions).resourceTypeName = \"old gen\", (resourceTypeOptions).resourceTypeUnit = \"heap usage in percentage\"];\n-  YOUNG_GEN = 1 [(resourceTypeOptions).resourceTypeName = \"young gen\", (resourceTypeOptions).resourceTypeUnit = \"promotion rate in mb/s\"];\n-}\n+enum ResourceEnum {\n+  // JVM\n+  OLD_GEN = 0 [(additional_fields).name = \"old gen\"];\n+  YOUNG_GEN = 1 [(additional_fields).name = \"young gen\"];\n+\n+  // hardware\n+  CPU = 2 [(additional_fields).name = \"cpu usage\"];\n+  IO = 3 [(additional_fields).name = \"IO\"];\n \n-enum HardwareEnum {\n-  CPU = 0 [(resourceTypeOptions).resourceTypeName = \"cpu usage\", (resourceTypeOptions).resourceTypeUnit = \"cpu usage in percentage\"];\n-  IO_TOTAL_THROUGHPUT = 1 [(resourceTypeOptions).resourceTypeName = \"IO total throughput\", (resourceTypeOptions).resourceTypeUnit = \"number of bytes read/written per second\"];\n-  IO_TOTAL_SYS_CALLRATE = 2 [(resourceTypeOptions).resourceTypeName = \"IO total sys callrate\", (resourceTypeOptions).resourceTypeUnit = \"read and write system calls per second\"];\n+  // threadpool\n+  WRITE_THREADPOOL = 4 [(additional_fields).name = \"write threadpool\"];\n+  SEARCH_THREADPOOL = 5 [(additional_fields).name = \"search threadpool\"];\n }\n \n-enum ThreadPoolEnum {\n-  WRITE_QUEUE = 0 [(resourceTypeOptions).resourceTypeName = \"write queue\", (resourceTypeOptions).resourceTypeUnit = \"rejection period in second\"];\n-  SEARCH_QUEUE = 1 [(resourceTypeOptions).resourceTypeName = \"search queue\", (resourceTypeOptions).resourceTypeUnit = \"rejection period in second\"];\n+enum MetricEnum {\n+  // JVM\n+  HEAP_USAGE = 0 [(additional_fields).name = \"heap usage\", (additional_fields).description = \"memory usage in percentage\"];\n+  PROMOTION_RATE = 1 [(additional_fields).name = \"promotion rate\", (additional_fields).description = \"mb/s\"];\n+  MINOR_GC = 2 [(additional_fields).name = \"minor gc\", (additional_fields).description = \"time in percentage\"];\n+\n+  // hardware\n+  CPU_USAGE = 3 [(additional_fields).name = \"cpu usage\", (additional_fields).description = \"num of cores\"];\n+  TOTAL_THROUGHPUT = 4 [(additional_fields).name = \"total throughput\", (additional_fields).description = \"number of bytes read/written per second\"];\n+  TOTAL_SYS_CALLRATE = 5 [(additional_fields).name = \"total sys callrate\", (additional_fields).description = \"read and write system calls per second\"];\n+\n+  // threadpool\n+  QUEUE_REJECTION = 6 [(additional_fields).name = \"queue rejection\", (additional_fields).description = \"rejection period in second\"];\n }\n \n /*\n   message for resource type Enum\n */\n-message ResourceType {\n-    oneof resource_type_oneof {\n-      JvmEnum JVM = 1;\n-      HardwareEnum hardware_resource_type = 2;\n-      ThreadPoolEnum thread_pool = 3;\n-    }\n+message Resource {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5Mjc1OTU4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/hotheap/HighHeapUsageYoungGenRca.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMjoxNzowNFrOGrUhSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNzo1NzoyOFrOGrv-mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3ODE1Mg==", "bodyText": "Unused imports ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448078152", "createdAt": "2020-07-01T02:17:04Z", "author": {"login": "khushbr"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/hotheap/HighHeapUsageYoungGenRca.java", "diffHunk": "@@ -18,12 +18,13 @@\n import static com.amazon.opendistro.elasticsearch.performanceanalyzer.metrics.AllMetrics.GCType.OLD_GEN;\n import static com.amazon.opendistro.elasticsearch.performanceanalyzer.metrics.AllMetrics.GCType.TOT_YOUNG_GC;\n import static com.amazon.opendistro.elasticsearch.performanceanalyzer.metrics.AllMetrics.HeapDimension.MEM_TYPE;\n+import static com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.summaries.ResourceUtil.YOUNG_GEN_PROMOTION_RATE;\n \n import com.amazon.opendistro.elasticsearch.performanceanalyzer.PerformanceAnalyzerApp;\n-import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.JvmEnum;\n-import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceType;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.MetricEnum;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.Resource;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceEnum;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyODAyNA==", "bodyText": "thanks for pointing this out. removed.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448528024", "createdAt": "2020-07-01T17:57:28Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/hotheap/HighHeapUsageYoungGenRca.java", "diffHunk": "@@ -18,12 +18,13 @@\n import static com.amazon.opendistro.elasticsearch.performanceanalyzer.metrics.AllMetrics.GCType.OLD_GEN;\n import static com.amazon.opendistro.elasticsearch.performanceanalyzer.metrics.AllMetrics.GCType.TOT_YOUNG_GC;\n import static com.amazon.opendistro.elasticsearch.performanceanalyzer.metrics.AllMetrics.HeapDimension.MEM_TYPE;\n+import static com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.summaries.ResourceUtil.YOUNG_GEN_PROMOTION_RATE;\n \n import com.amazon.opendistro.elasticsearch.performanceanalyzer.PerformanceAnalyzerApp;\n-import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.JvmEnum;\n-import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceType;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.MetricEnum;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.Resource;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceEnum;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3ODE1Mg=="}, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5Mjc2MDkzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/hotshard/HotShardClusterRca.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMjoxNzo1MFrOGrUiFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNzo1Nzo1MlrOGrv_ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3ODM1OA==", "bodyText": "Unused imports ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448078358", "createdAt": "2020-07-01T02:17:50Z", "author": {"login": "khushbr"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/hotshard/HotShardClusterRca.java", "diffHunk": "@@ -15,8 +15,9 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.store.rca.hotshard;\n \n-import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.HardwareEnum;\n-import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceType;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.MetricEnum;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.Resource;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceEnum;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyODIyOQ==", "bodyText": "removed", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448528229", "createdAt": "2020-07-01T17:57:52Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/hotshard/HotShardClusterRca.java", "diffHunk": "@@ -15,8 +15,9 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.store.rca.hotshard;\n \n-import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.HardwareEnum;\n-import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceType;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.MetricEnum;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.Resource;\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.grpc.ResourceEnum;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3ODM1OA=="}, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5Mjc2MjUwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/hotshard/HotShardClusterRca.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwMjoxOTowM1rOGrUjBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNzo1ODo0MVrOGrwBJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3ODU5Nw==", "bodyText": "let's also rename the resourceType here.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448078597", "createdAt": "2020-07-01T02:19:03Z", "author": {"login": "khushbr"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/hotshard/HotShardClusterRca.java", "diffHunk": "@@ -138,7 +140,7 @@ private double getThresholdValue(Map<NodeShardKey, Double> perIndexShardInfo, do\n      *\n      */\n     private void findHotShardAndCreateSummary(Table<String, NodeShardKey, Double> resourceInfoTable, double thresholdInPercentage,\n-                                              List<HotResourceSummary> hotResourceSummaryList, ResourceType resourceType) {\n+                                              List<HotResourceSummary> hotResourceSummaryList, Resource resourceType) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyODY3Nw==", "bodyText": "done", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/256#discussion_r448528677", "createdAt": "2020-07-01T17:58:41Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/hotshard/HotShardClusterRca.java", "diffHunk": "@@ -138,7 +140,7 @@ private double getThresholdValue(Map<NodeShardKey, Double> perIndexShardInfo, do\n      *\n      */\n     private void findHotShardAndCreateSummary(Table<String, NodeShardKey, Double> resourceInfoTable, double thresholdInPercentage,\n-                                              List<HotResourceSummary> hotResourceSummaryList, ResourceType resourceType) {\n+                                              List<HotResourceSummary> hotResourceSummaryList, Resource resourceType) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA3ODU5Nw=="}, "originalCommit": {"oid": "4e0e7893d6f529a6db06dc4f013f3abd00dc4981"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2508, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}