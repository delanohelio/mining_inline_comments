{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMTM2NTE1", "number": 231, "title": "Setting the Healthy/Unhealhy Context for Temp Profile Dimensions RCAs", "bodyText": "Description of changes: Minor Refactoring and setting the Resource context of RCAs. Context is based on a hardcoded RCA threshold. If the heat calculated along that dimension is greater than the threshold we mark the RCA as unhealthy otherwise we mark it as healthy.\nTests: Manual Testing done on Docker.\nCode coverage percentage for this patch: Unchanged\nBy submitting this pull request, I confirm that my contribution is made under the terms of the Apache 2.0 license.", "createdAt": "2020-06-11T14:55:56Z", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/231", "merged": true, "mergeCommit": {"oid": "7b8596fc223576f1efb5c7bc7f807ade2459807f"}, "closed": true, "closedAt": "2020-06-11T23:40:24Z", "author": {"login": "aditjind"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqPbLnAH2gAyNDMzMTM2NTE1OjI5ZTZiNThlY2U1ZTYyYTA3Mjk5ZDg2MTg1OTc3ZGY3YmRjZDFmZmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqXA3mAFqTQyOTM1Mjk5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "29e6b58ece5e62a07299d86185977df7bdcd1ffa", "author": {"user": {"login": "aditjind", "name": "Aditya Jindal"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/29e6b58ece5e62a07299d86185977df7bdcd1ffa", "committedDate": "2020-06-11T14:49:10Z", "message": "Setting the Healthy/Unhealhy Context for Temperature Profile Dimensions RCAs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fa741c5295f98901644162fddc57b3984be968d", "author": {"user": {"login": "aditjind", "name": "Aditya Jindal"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/7fa741c5295f98901644162fddc57b3984be968d", "committedDate": "2020-06-11T15:05:56Z", "message": "Checkstyle Errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MjI1NjY4", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/231#pullrequestreview-429225668", "createdAt": "2020-06-11T19:36:40Z", "commit": {"oid": "7fa741c5295f98901644162fddc57b3984be968d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxOTozNjo0MFrOGir4Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxOTozNjo0MFrOGir4Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAyMzY3NQ==", "bodyText": "we should use snake case for static variables", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/231#discussion_r439023675", "createdAt": "2020-06-11T19:36:40Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/ElasticSearchAnalysisGraph.java", "diffHunk": "@@ -88,13 +88,16 @@\n public class ElasticSearchAnalysisGraph extends AnalysisGraph {\n \n   private static final Logger LOG = LogManager.getLogger(ElasticSearchAnalysisGraph.class);\n+  private static final int rcaPeriod = 12;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fa741c5295f98901644162fddc57b3984be968d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MjI2NzA3", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/231#pullrequestreview-429226707", "createdAt": "2020-06-11T19:38:25Z", "commit": {"oid": "7fa741c5295f98901644162fddc57b3984be968d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxOTozODoyNVrOGir7nA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxOTozODoyNVrOGir7nA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAyNDU0MA==", "bodyText": "Ideally we should remove this argument in constructor and fix the value to 5 seconds in base class. Joydeep wanted us to refactor this long time ago", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/231#discussion_r439024540", "createdAt": "2020-06-11T19:38:25Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/ElasticSearchAnalysisGraph.java", "diffHunk": "@@ -88,13 +88,16 @@\n public class ElasticSearchAnalysisGraph extends AnalysisGraph {\n \n   private static final Logger LOG = LogManager.getLogger(ElasticSearchAnalysisGraph.class);\n+  private static final int rcaPeriod = 12;\n+  private static final int evaluationIntervalSeconds = 5;\n+\n \n   @Override\n   public void construct() {\n-    Metric heapUsed = new Heap_Used(5);\n-    Metric gcEvent = new GC_Collection_Event(5);\n-    Metric heapMax = new Heap_Max(5);\n-    Metric gc_Collection_Time = new GC_Collection_Time(5);\n+    Metric heapUsed = new Heap_Used(evaluationIntervalSeconds);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fa741c5295f98901644162fddc57b3984be968d"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a276233edc3946634767d953a872b8ae82e025ef", "author": {"user": {"login": "aditjind", "name": "Aditya Jindal"}}, "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/a276233edc3946634767d953a872b8ae82e025ef", "committedDate": "2020-06-11T22:14:12Z", "message": "Moving the Static Variables to Camel Case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MzMzNDQ4", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/231#pullrequestreview-429333448", "createdAt": "2020-06-11T22:22:46Z", "commit": {"oid": "a276233edc3946634767d953a872b8ae82e025ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MzUyOTk3", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/231#pullrequestreview-429352997", "createdAt": "2020-06-11T23:09:15Z", "commit": {"oid": "a276233edc3946634767d953a872b8ae82e025ef"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMzowOToxNVrOGixr4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMzozNzo0OFrOGiyLzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTExODgxNw==", "bodyText": "Thank You for making this change.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/231#discussion_r439118817", "createdAt": "2020-06-11T23:09:15Z", "author": {"login": "khushbr"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/ElasticSearchAnalysisGraph.java", "diffHunk": "@@ -88,13 +88,16 @@\n public class ElasticSearchAnalysisGraph extends AnalysisGraph {\n \n   private static final Logger LOG = LogManager.getLogger(ElasticSearchAnalysisGraph.class);\n+  private static final int RCA_PERIOD = 12;\n+  private static final int EVALUATION_INTERVAL_SECONDS = 5;\n+\n \n   @Override\n   public void construct() {\n-    Metric heapUsed = new Heap_Used(5);\n-    Metric gcEvent = new GC_Collection_Event(5);\n-    Metric heapMax = new Heap_Max(5);\n-    Metric gc_Collection_Time = new GC_Collection_Time(5);\n+    Metric heapUsed = new Heap_Used(EVALUATION_INTERVAL_SECONDS);\n+    Metric gcEvent = new GC_Collection_Event(EVALUATION_INTERVAL_SECONDS);\n+    Metric heapMax = new Heap_Max(EVALUATION_INTERVAL_SECONDS);\n+    Metric gc_Collection_Time = new GC_Collection_Time(EVALUATION_INTERVAL_SECONDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a276233edc3946634767d953a872b8ae82e025ef"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEyNjk5MA==", "bodyText": "nit: Consider moving this to line 79 and add the context information as well.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/231#discussion_r439126990", "createdAt": "2020-06-11T23:37:48Z", "author": {"login": "khushbr"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/store/rca/temperature/dimension/CpuUtilDimensionTemperatureRca.java", "diffHunk": "@@ -62,12 +64,18 @@ public void generateFlowUnitListFromWire(FlowUnitOperationArgWrapper args) {\n \n     @Override\n     public DimensionalTemperatureFlowUnit operate() {\n-        DimensionalTemperatureFlowUnit flowUnit = DimensionalTemperatureCalculator.getTemperatureForDimension(\n+        DimensionalTemperatureFlowUnit cpuUtilTemperatureFlowUnit = DimensionalTemperatureCalculator.getTemperatureForDimension(\n                 shardStore,\n                 TemperatureVector.Dimension.CPU_Utilization,\n                 CPU_UTIL_BY_SHARD,\n                 AVG_CPU_UTIL_BY_SHARD, CPU_UTIL_SHARD_INDEPENDENT, CPU_UTIL_PEAK_USAGE,\n                 THRESHOLD_NORMALIZED_VAL_FOR_HEAT_ZONE_ASSIGNMENT);\n-        return flowUnit;\n+        LOG.info(\"CPU Utilization temperature calculated: {}\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a276233edc3946634767d953a872b8ae82e025ef"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1038, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}