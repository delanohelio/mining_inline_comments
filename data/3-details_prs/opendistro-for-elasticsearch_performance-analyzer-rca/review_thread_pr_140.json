{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNTA0Mzc0", "number": 140, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNjoyMToyNVrOD12mSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowNzozNFrOD13vRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3Nzk1NjU4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNjoyMToyNVrOGLfWLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNjo0MDoyOVrOGLgFNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcwMTEwMw==", "bodyText": "final maybe ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414701103", "createdAt": "2020-04-24T16:21:25Z", "author": {"login": "yojs"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "diffHunk": "@@ -15,9 +15,34 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core;\n \n-public abstract class GenericContext {\n-  // TODO\n-  // The GenericContext class currently has only one derived class ResourceContext.\n-  // We are expecting to add more different types of context and some abstract methods can be added\n-  // here\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.Resources;\n+\n+public class GenericContext {\n+    protected Resources.State state;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "635669bdd8a34aae1545df5ea38017be1eb1df1d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcxMzE0MA==", "bodyText": "Done", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414713140", "createdAt": "2020-04-24T16:40:29Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "diffHunk": "@@ -15,9 +15,34 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core;\n \n-public abstract class GenericContext {\n-  // TODO\n-  // The GenericContext class currently has only one derived class ResourceContext.\n-  // We are expecting to add more different types of context and some abstract methods can be added\n-  // here\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.Resources;\n+\n+public class GenericContext {\n+    protected Resources.State state;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcwMTEwMw=="}, "originalCommit": {"oid": "635669bdd8a34aae1545df5ea38017be1eb1df1d"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3Nzk2MTQzOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNjoyMjozM1rOGLfZBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNjo0MDoyM1rOGLgE-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcwMTgzMQ==", "bodyText": "If we have getState(), then should we just make state private ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414701831", "createdAt": "2020-04-24T16:22:33Z", "author": {"login": "yojs"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "diffHunk": "@@ -15,9 +15,34 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core;\n \n-public abstract class GenericContext {\n-  // TODO\n-  // The GenericContext class currently has only one derived class ResourceContext.\n-  // We are expecting to add more different types of context and some abstract methods can be added\n-  // here\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.Resources;\n+\n+public class GenericContext {\n+    protected Resources.State state;\n+\n+    public GenericContext(Resources.State state) {\n+        this.state = state;\n+    }\n+\n+    public Resources.State getState() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "635669bdd8a34aae1545df5ea38017be1eb1df1d"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcxMzA4MQ==", "bodyText": "Done", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414713081", "createdAt": "2020-04-24T16:40:23Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "diffHunk": "@@ -15,9 +15,34 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core;\n \n-public abstract class GenericContext {\n-  // TODO\n-  // The GenericContext class currently has only one derived class ResourceContext.\n-  // We are expecting to add more different types of context and some abstract methods can be added\n-  // here\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.api.Resources;\n+\n+public class GenericContext {\n+    protected Resources.State state;\n+\n+    public GenericContext(Resources.State state) {\n+        this.state = state;\n+    }\n+\n+    public Resources.State getState() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcwMTgzMQ=="}, "originalCommit": {"oid": "635669bdd8a34aae1545df5ea38017be1eb1df1d"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODEyNzU5OnYy", "diffSide": "LEFT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/contexts/ResourceContext.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowMzoyM1rOGLg8tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzoyODo0NlrOGLh5Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNzM1MA==", "bodyText": "let's not remove this subclass. This CONSTANTS class defines the SQL schema and we might have multiple columns in the future", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414727350", "createdAt": "2020-04-24T17:03:23Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/contexts/ResourceContext.java", "diffHunk": "@@ -53,33 +40,23 @@ public static ResourceContext generic() {\n   public ResourceContextMessage buildContextMessage() {\n     final ResourceContextMessage.Builder contextMessageBuilder = ResourceContextMessage\n         .newBuilder();\n-    contextMessageBuilder.setState(state.ordinal());\n+    contextMessageBuilder.setState(getState().ordinal());\n     return contextMessageBuilder.build();\n   }\n \n   public static ResourceContext buildResourceContextFromMessage(ResourceContextMessage message) {\n     return new ResourceContext(Resources.State.values()[message.getState()]);\n   }\n \n-  @Override\n-  public String toString() {\n-    return this.state.toString();\n-  }\n-\n   public List<Field<?>> getSqlSchema() {\n     List<Field<?>> schemaList = new ArrayList<>();\n-    schemaList.add(DSL.field(DSL.name(SQL_SCHEMA_CONSTANTS.STATE_COL_NAME), String.class));\n+    schemaList.add(DSL.field(DSL.name(STATE_COL_NAME), String.class));\n     return schemaList;\n   }\n \n   public List<Object> getSqlValue() {\n     List<Object> valueList = new ArrayList<>();\n-    valueList.add(this.state.toString());\n+    valueList.add(getState().toString());\n     return valueList;\n   }\n-\n-  public static class SQL_SCHEMA_CONSTANTS {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0MjgyMg==", "bodyText": "Restored subclass", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414742822", "createdAt": "2020-04-24T17:28:46Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/contexts/ResourceContext.java", "diffHunk": "@@ -53,33 +40,23 @@ public static ResourceContext generic() {\n   public ResourceContextMessage buildContextMessage() {\n     final ResourceContextMessage.Builder contextMessageBuilder = ResourceContextMessage\n         .newBuilder();\n-    contextMessageBuilder.setState(state.ordinal());\n+    contextMessageBuilder.setState(getState().ordinal());\n     return contextMessageBuilder.build();\n   }\n \n   public static ResourceContext buildResourceContextFromMessage(ResourceContextMessage message) {\n     return new ResourceContext(Resources.State.values()[message.getState()]);\n   }\n \n-  @Override\n-  public String toString() {\n-    return this.state.toString();\n-  }\n-\n   public List<Field<?>> getSqlSchema() {\n     List<Field<?>> schemaList = new ArrayList<>();\n-    schemaList.add(DSL.field(DSL.name(SQL_SCHEMA_CONSTANTS.STATE_COL_NAME), String.class));\n+    schemaList.add(DSL.field(DSL.name(STATE_COL_NAME), String.class));\n     return schemaList;\n   }\n \n   public List<Object> getSqlValue() {\n     List<Object> valueList = new ArrayList<>();\n-    valueList.add(this.state.toString());\n+    valueList.add(getState().toString());\n     return valueList;\n   }\n-\n-  public static class SQL_SCHEMA_CONSTANTS {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyNzM1MA=="}, "originalCommit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODEzODA0OnYy", "diffSide": "LEFT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowNjowOVrOGLhC_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzoyOTozNlrOGLh7IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyODk1Ng==", "bodyText": "let's keep this class as an abstract class. I don't think we need to move everything into this base class as we might have something completely different in SymptomContext.java", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414728956", "createdAt": "2020-04-24T17:06:09Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "diffHunk": "@@ -15,9 +15,34 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core;\n \n-public abstract class GenericContext {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0MzMyOA==", "bodyText": "Done", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414743328", "createdAt": "2020-04-24T17:29:36Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/GenericContext.java", "diffHunk": "@@ -15,9 +15,34 @@\n \n package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core;\n \n-public abstract class GenericContext {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyODk1Ng=="}, "originalCommit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODE0MzQxOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/contexts/SymptomContext.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzowNzozNFrOGLhGOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzoyOToyN1rOGLh6wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyOTc4NA==", "bodyText": "This class is more like a placeholder because what needs to be defines here is still not very clear. So let's keep this as is.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414729784", "createdAt": "2020-04-24T17:07:34Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/contexts/SymptomContext.java", "diffHunk": "@@ -19,23 +19,11 @@\n import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core.GenericContext;\n \n public class SymptomContext extends GenericContext {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc0MzIzNA==", "bodyText": "I've only taken out common parts, if we need to change the logic in the future overriding should be possible", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/140#discussion_r414743234", "createdAt": "2020-04-24T17:29:27Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/api/contexts/SymptomContext.java", "diffHunk": "@@ -19,23 +19,11 @@\n import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core.GenericContext;\n \n public class SymptomContext extends GenericContext {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDcyOTc4NA=="}, "originalCommit": {"oid": "4936bc3c3b43375f00d41efaa87ae088f831272c"}, "originalPosition": 3}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2614, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}