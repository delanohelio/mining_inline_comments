{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzMjMxNzgy", "number": 340, "reviewThreads": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNzo1OToyOFrOEVhOBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMjowMzo1NlrOEZSH5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwOTk5ODE0OnYy", "diffSide": "RIGHT", "path": "pa_config/rca.conf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNzo1OToyOFrOG8UolQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxOTo0NDoxMFrOG9ByoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwNTgxMw==", "bodyText": "I'm pretty sure you need commas between these JSON objects", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r465905813", "createdAt": "2020-08-05T17:59:28Z", "author": {"login": "sidheart"}, "path": "pa_config/rca.conf", "diffHunk": "@@ -87,8 +87,22 @@\n   ],\n \n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\":[\n+        \"ingest\",\n+        \"search\"\n+      ]\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY0NTY2NQ==", "bodyText": "Yes thanks for catching that. Added a UT as well.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r466645665", "createdAt": "2020-08-06T19:44:10Z", "author": {"login": "aditjind"}, "path": "pa_config/rca.conf", "diffHunk": "@@ -87,8 +87,22 @@\n   ],\n \n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\":[\n+        \"ingest\",\n+        \"search\"\n+      ]\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwNTgxMw=="}, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwOTk5OTI4OnYy", "diffSide": "RIGHT", "path": "pa_config/rca_idle_master.conf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNzo1OTo0NVrOG8UpRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxOTo0NDoxNlrOG9By4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwNTk4OA==", "bodyText": "Commas, see above", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r465905988", "createdAt": "2020-08-05T17:59:45Z", "author": {"login": "sidheart"}, "path": "pa_config/rca_idle_master.conf", "diffHunk": "@@ -98,8 +98,22 @@\n   ],\n \n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\":[\n+        \"ingest\",\n+        \"search\"\n+      ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY0NTczMA==", "bodyText": "done", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r466645730", "createdAt": "2020-08-06T19:44:16Z", "author": {"login": "aditjind"}, "path": "pa_config/rca_idle_master.conf", "diffHunk": "@@ -98,8 +98,22 @@\n   ],\n \n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\":[\n+        \"ingest\",\n+        \"search\"\n+      ]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwNTk4OA=="}, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDAwMDQ5OnYy", "diffSide": "RIGHT", "path": "pa_config/rca_master.conf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODowMDowMlrOG8UqAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxOTo0NDozNFrOG9Bzdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwNjE3OQ==", "bodyText": "Add commas between objects", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r465906179", "createdAt": "2020-08-05T18:00:02Z", "author": {"login": "sidheart"}, "path": "pa_config/rca_master.conf", "diffHunk": "@@ -98,8 +98,22 @@\n   ],\n \n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY0NTg3OQ==", "bodyText": "done", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r466645879", "createdAt": "2020-08-06T19:44:34Z", "author": {"login": "aditjind"}, "path": "pa_config/rca_master.conf", "diffHunk": "@@ -98,8 +98,22 @@\n   ],\n \n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwNjE3OQ=="}, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDAwNDg0OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/Decider.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODowMToyMFrOG8Ustg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxOTo1ODoxMlrOG9CO7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwNjg3MA==", "bodyText": "Needs null checks", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r465906870", "createdAt": "2020-08-05T18:01:20Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/Decider.java", "diffHunk": "@@ -90,4 +95,31 @@ public void handleNodeMuted() {\n \n   @Override\n   public abstract Decision operate();\n+\n+  /**\n+   * read threshold values from rca.conf\n+   *\n+   * @param conf RcaConf object\n+   */\n+  @Override\n+  public void readRcaConf(RcaConf conf) {\n+    configObj = conf.getDeciderConfig();\n+  }\n+\n+  public double getFieldDataCacheUpperBound() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxMDkxOA==", "bodyText": "(on configObj)", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r465910918", "createdAt": "2020-08-05T18:09:18Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/Decider.java", "diffHunk": "@@ -90,4 +95,31 @@ public void handleNodeMuted() {\n \n   @Override\n   public abstract Decision operate();\n+\n+  /**\n+   * read threshold values from rca.conf\n+   *\n+   * @param conf RcaConf object\n+   */\n+  @Override\n+  public void readRcaConf(RcaConf conf) {\n+    configObj = conf.getDeciderConfig();\n+  }\n+\n+  public double getFieldDataCacheUpperBound() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwNjg3MA=="}, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY1MjkxMA==", "bodyText": "Right! Added.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r466652910", "createdAt": "2020-08-06T19:58:12Z", "author": {"login": "aditjind"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/Decider.java", "diffHunk": "@@ -90,4 +95,31 @@ public void handleNodeMuted() {\n \n   @Override\n   public abstract Decision operate();\n+\n+  /**\n+   * read threshold values from rca.conf\n+   *\n+   * @param conf RcaConf object\n+   */\n+  @Override\n+  public void readRcaConf(RcaConf conf) {\n+    configObj = conf.getDeciderConfig();\n+  }\n+\n+  public double getFieldDataCacheUpperBound() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwNjg3MA=="}, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDAyNDQ3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/configs/DeciderConfig.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODowNzozMVrOG8U47g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDowODowNFrOG9ChUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwOTk5OA==", "bodyText": "It seems like these are written and then never read. Are we doing this on purpose? Will this only be configurable in the future?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r465909998", "createdAt": "2020-08-05T18:07:31Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/configs/DeciderConfig.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.configs;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core.RcaConf;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class DeciderConfig {\n+\n+    public static final String CACHE_BOUNDS_CONFIG_NAME = \"cache-bounds\";\n+    public static final String CACHE_CONFIG_NAME = \"cache-type\";\n+    public static final String WORKLOAD_CONFIG_NAME = \"workload-type\";\n+    public static final String PRIORITY_ORDER_CONFIG_NAME = \"priority-order\";\n+    public static final String FIELD_DATA_CACHE_UPPER_BOUND = \"field-data-cache-upper-bound\";\n+    public static final String SHARD_REQUEST_CACHE_UPPER_BOUND = \"shard-request-cache-upper-bound\";\n+    private static final double DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND = 0.4;\n+    private static final double DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND = 0.05;\n+    // Defaults based on prioritising Stability over performance.\n+    private static final List<String> DEFAULT_WORKLOAD_PRIORITY = Arrays.asList(\"ingest\", \"search\");\n+    private static final List<String> DEFAULT_CACHE_PRIORITY = Arrays.asList(\"read-heavy\", \"write-heavy\");\n+\n+    public Double fieldDataCacheUpperBound;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxMDc2Mg==", "bodyText": "Nvm, I see what's happening here. Can you follow the Java standard practice and make these private and add getters for them?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r465910762", "createdAt": "2020-08-05T18:09:00Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/configs/DeciderConfig.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.configs;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core.RcaConf;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class DeciderConfig {\n+\n+    public static final String CACHE_BOUNDS_CONFIG_NAME = \"cache-bounds\";\n+    public static final String CACHE_CONFIG_NAME = \"cache-type\";\n+    public static final String WORKLOAD_CONFIG_NAME = \"workload-type\";\n+    public static final String PRIORITY_ORDER_CONFIG_NAME = \"priority-order\";\n+    public static final String FIELD_DATA_CACHE_UPPER_BOUND = \"field-data-cache-upper-bound\";\n+    public static final String SHARD_REQUEST_CACHE_UPPER_BOUND = \"shard-request-cache-upper-bound\";\n+    private static final double DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND = 0.4;\n+    private static final double DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND = 0.05;\n+    // Defaults based on prioritising Stability over performance.\n+    private static final List<String> DEFAULT_WORKLOAD_PRIORITY = Arrays.asList(\"ingest\", \"search\");\n+    private static final List<String> DEFAULT_CACHE_PRIORITY = Arrays.asList(\"read-heavy\", \"write-heavy\");\n+\n+    public Double fieldDataCacheUpperBound;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwOTk5OA=="}, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY1NzYxNg==", "bodyText": "Have added for the ones which are not being used currently as well.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r466657616", "createdAt": "2020-08-06T20:08:04Z", "author": {"login": "aditjind"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/configs/DeciderConfig.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.configs;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core.RcaConf;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class DeciderConfig {\n+\n+    public static final String CACHE_BOUNDS_CONFIG_NAME = \"cache-bounds\";\n+    public static final String CACHE_CONFIG_NAME = \"cache-type\";\n+    public static final String WORKLOAD_CONFIG_NAME = \"workload-type\";\n+    public static final String PRIORITY_ORDER_CONFIG_NAME = \"priority-order\";\n+    public static final String FIELD_DATA_CACHE_UPPER_BOUND = \"field-data-cache-upper-bound\";\n+    public static final String SHARD_REQUEST_CACHE_UPPER_BOUND = \"shard-request-cache-upper-bound\";\n+    private static final double DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND = 0.4;\n+    private static final double DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND = 0.05;\n+    // Defaults based on prioritising Stability over performance.\n+    private static final List<String> DEFAULT_WORKLOAD_PRIORITY = Arrays.asList(\"ingest\", \"search\");\n+    private static final List<String> DEFAULT_CACHE_PRIORITY = Arrays.asList(\"read-heavy\", \"write-heavy\");\n+\n+    public Double fieldDataCacheUpperBound;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkwOTk5OA=="}, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDAzMzU4OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/Decider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODoxMDoyMFrOG8U-sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDoxNToyOVrOG9CvOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxMTQ3NQ==", "bodyText": "Left a comment on DeciderConfig as well. Please use private members + getters for this", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r465911475", "createdAt": "2020-08-05T18:10:20Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/Decider.java", "diffHunk": "@@ -90,4 +95,31 @@ public void handleNodeMuted() {\n \n   @Override\n   public abstract Decision operate();\n+\n+  /**\n+   * read threshold values from rca.conf\n+   *\n+   * @param conf RcaConf object\n+   */\n+  @Override\n+  public void readRcaConf(RcaConf conf) {\n+    configObj = conf.getDeciderConfig();\n+  }\n+\n+  public double getFieldDataCacheUpperBound() {\n+    return configObj.fieldDataCacheUpperBound;\n+  }\n+\n+  public double getShardRequestCacheUpperBound() {\n+    return configObj.shardRequestCacheUpperBound;\n+  }\n+\n+  public List<String> getWorkLoadPriority() {\n+    return configObj.workloadPriorityOrder;\n+  }\n+\n+  public List<String> getCachePriority() {\n+    return configObj.cachePriorityOrder;\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY2MTE3Nw==", "bodyText": "Done", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r466661177", "createdAt": "2020-08-06T20:15:29Z", "author": {"login": "aditjind"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/Decider.java", "diffHunk": "@@ -90,4 +95,31 @@ public void handleNodeMuted() {\n \n   @Override\n   public abstract Decision operate();\n+\n+  /**\n+   * read threshold values from rca.conf\n+   *\n+   * @param conf RcaConf object\n+   */\n+  @Override\n+  public void readRcaConf(RcaConf conf) {\n+    configObj = conf.getDeciderConfig();\n+  }\n+\n+  public double getFieldDataCacheUpperBound() {\n+    return configObj.fieldDataCacheUpperBound;\n+  }\n+\n+  public double getShardRequestCacheUpperBound() {\n+    return configObj.shardRequestCacheUpperBound;\n+  }\n+\n+  public List<String> getWorkLoadPriority() {\n+    return configObj.workloadPriorityOrder;\n+  }\n+\n+  public List<String> getCachePriority() {\n+    return configObj.cachePriorityOrder;\n+  }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxMTQ3NQ=="}, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDAzOTc2OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/CacheHealthDecider.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODoxMjowN1rOG8VClw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDoyMzozMFrOG9C-9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxMjQ3MQ==", "bodyText": "Add a comment on why we're always going with the default here instead of allowing overrides.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r465912471", "createdAt": "2020-08-05T18:12:07Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/CacheHealthDecider.java", "diffHunk": "@@ -69,8 +70,8 @@ public CacheHealthDecider(\n             .put(ResourceEnum.FIELD_DATA_CACHE, fieldDataCacheClusterRca)\n             .build();\n \n-    this.fieldDataCacheSizeUpperBound = CacheDeciderConfig.DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND;\n-    this.shardRequestCacheSizeUpperBound = CacheDeciderConfig.DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND;\n+    this.fieldDataCacheSizeUpperBound = getDefaultShardRequestCacheUpperBound();\n+    this.shardRequestCacheSizeUpperBound = getDefaultFieldDataCacheUpperBound();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxNTQzMQ==", "bodyText": "These fields also make certain calls in this class super misleading. e.g. line 167 on this file has a call to getFieldDataCacheUpperBound(), but that calls Decider#getFieldDataCacheUpperBound which reads the value from a configObj and not this field right? What's the purpose of these fields?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r465915431", "createdAt": "2020-08-05T18:17:52Z", "author": {"login": "sidheart"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/CacheHealthDecider.java", "diffHunk": "@@ -69,8 +70,8 @@ public CacheHealthDecider(\n             .put(ResourceEnum.FIELD_DATA_CACHE, fieldDataCacheClusterRca)\n             .build();\n \n-    this.fieldDataCacheSizeUpperBound = CacheDeciderConfig.DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND;\n-    this.shardRequestCacheSizeUpperBound = CacheDeciderConfig.DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND;\n+    this.fieldDataCacheSizeUpperBound = getDefaultShardRequestCacheUpperBound();\n+    this.shardRequestCacheSizeUpperBound = getDefaultFieldDataCacheUpperBound();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxMjQ3MQ=="}, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY2NTIwNw==", "bodyText": "I am not sure on the purpose of these fields. I have removed these fields as the the default value would be added in case the config is not read from the file.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r466665207", "createdAt": "2020-08-06T20:23:30Z", "author": {"login": "aditjind"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/CacheHealthDecider.java", "diffHunk": "@@ -69,8 +70,8 @@ public CacheHealthDecider(\n             .put(ResourceEnum.FIELD_DATA_CACHE, fieldDataCacheClusterRca)\n             .build();\n \n-    this.fieldDataCacheSizeUpperBound = CacheDeciderConfig.DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND;\n-    this.shardRequestCacheSizeUpperBound = CacheDeciderConfig.DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND;\n+    this.fieldDataCacheSizeUpperBound = getDefaultShardRequestCacheUpperBound();\n+    this.shardRequestCacheSizeUpperBound = getDefaultFieldDataCacheUpperBound();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkxMjQ3MQ=="}, "originalCommit": {"oid": "b5166ee66e58f4e75aa2f029f9e04ee38089bdf5"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxOTE0OTUxOnYy", "diffSide": "RIGHT", "path": "pa_config/rca_idle_master.conf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMzo1MjozOFrOG9roRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozMzo1OFrOG_Tmmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMzMTE0Mw==", "bodyText": "Correct me if I am wrong but I assume this indicates the upper bound in percentage ? And why do we want to change it from 0.4 -> 10.4 ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r467331143", "createdAt": "2020-08-07T23:52:38Z", "author": {"login": "rguo-aws"}, "path": "pa_config/rca_idle_master.conf", "diffHunk": "@@ -97,11 +97,21 @@\n     \"ClusterTemperatureRca\"\n   ],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]\n+    },\n     // cache decider - Needs to be updated as per the performance test results\n-    \"cache-decider-config\": {\n-      \"field-data-cache-upper-bound\" : 0.4,\n-      \"shard-request-cache-upper-bound\" : 0.05\n+    \"cache-bounds\": {\n+      \"field-data-cache-upper-bound\" : 10.4,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzNDY1MA==", "bodyText": "Good catch. I had modified the values for the UT config and by mistake forgot to modify the defaults here. Updated.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469034650", "createdAt": "2020-08-12T06:33:58Z", "author": {"login": "aditjind"}, "path": "pa_config/rca_idle_master.conf", "diffHunk": "@@ -97,11 +97,21 @@\n     \"ClusterTemperatureRca\"\n   ],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]\n+    },\n     // cache decider - Needs to be updated as per the performance test results\n-    \"cache-decider-config\": {\n-      \"field-data-cache-upper-bound\" : 0.4,\n-      \"shard-request-cache-upper-bound\" : 0.05\n+    \"cache-bounds\": {\n+      \"field-data-cache-upper-bound\" : 10.4,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMzMTE0Mw=="}, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxOTE1Nzg1OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/configs/DeciderConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QyMzo1OToyMlrOG9rsvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozMDo1OVrOG_TiJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMzMjI4NA==", "bodyText": "Any reason to create getter for the json field name defined in rca.conf ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r467332284", "createdAt": "2020-08-07T23:59:22Z", "author": {"login": "rguo-aws"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/configs/DeciderConfig.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.configs;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core.RcaConf;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class DeciderConfig {\n+\n+    private static final String CACHE_BOUNDS_CONFIG_NAME = \"cache-bounds\";\n+    private static final String CACHE_CONFIG_NAME = \"cache-type\";\n+    private static final String WORKLOAD_CONFIG_NAME = \"workload-type\";\n+    private static final String PRIORITY_ORDER_CONFIG_NAME = \"priority-order\";\n+    private static final String FIELD_DATA_CACHE_UPPER_BOUND_NAME = \"field-data-cache-upper-bound\";\n+    private static final String SHARD_REQUEST_CACHE_UPPER_BOUND_NAME = \"shard-request-cache-upper-bound\";\n+    private static final double DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND = 0.4;\n+    private static final double DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND = 0.05;\n+    // Defaults based on prioritising Stability over performance.\n+    private static final List<String> DEFAULT_WORKLOAD_PRIORITY = Arrays.asList(\"ingest\", \"search\");\n+    private static final List<String> DEFAULT_CACHE_PRIORITY = Arrays.asList(\"read-heavy\", \"write-heavy\");\n+\n+    private Double fieldDataCacheUpperBound;\n+    private Double shardRequestCacheUpperBound;\n+    private List<String> cachePriorityOrder;\n+    private List<String> workloadPriorityOrder;\n+\n+    public DeciderConfig(final RcaConf rcaConf) {\n+        fieldDataCacheUpperBound = rcaConf.readDeciderConfig(CACHE_BOUNDS_CONFIG_NAME,\n+                FIELD_DATA_CACHE_UPPER_BOUND_NAME, Double.class);\n+        shardRequestCacheUpperBound = rcaConf.readDeciderConfig(CACHE_BOUNDS_CONFIG_NAME,\n+                SHARD_REQUEST_CACHE_UPPER_BOUND_NAME, Double.class);\n+        cachePriorityOrder = rcaConf.readDeciderConfig(CACHE_CONFIG_NAME,\n+                PRIORITY_ORDER_CONFIG_NAME, List.class);\n+        workloadPriorityOrder = rcaConf.readDeciderConfig(WORKLOAD_CONFIG_NAME,\n+                PRIORITY_ORDER_CONFIG_NAME, List.class);\n+        if (fieldDataCacheUpperBound == null) {\n+            fieldDataCacheUpperBound = DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND;\n+        }\n+        if (shardRequestCacheUpperBound == null) {\n+            shardRequestCacheUpperBound = DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND;\n+        }\n+        if (cachePriorityOrder == null) {\n+            cachePriorityOrder = DEFAULT_CACHE_PRIORITY;\n+        }\n+        if (workloadPriorityOrder == null) {\n+            workloadPriorityOrder = DEFAULT_WORKLOAD_PRIORITY;\n+        }\n+    }\n+\n+    public Double getFieldDataCacheUpperBound() {\n+        return fieldDataCacheUpperBound;\n+    }\n+\n+    public Double getShardRequestCacheUpperBound() {\n+        return shardRequestCacheUpperBound;\n+    }\n+\n+    public List<String> getCachePriorityOrder() {\n+        return cachePriorityOrder;\n+    }\n+\n+    public List<String> getWorkloadPriorityOrder() {\n+        return workloadPriorityOrder;\n+    }\n+\n+    public static List<String> getDefaultWorkloadPriority() {\n+        return DEFAULT_WORKLOAD_PRIORITY;\n+    }\n+\n+    public static List<String> getDefaultCachePriority() {\n+        return DEFAULT_CACHE_PRIORITY;\n+    }\n+\n+    public static Double getDefaultShardRequestCacheUpperBound() {\n+        return DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND;\n+    }\n+\n+    public static Double getDefaultFieldDataCacheUpperBound() {\n+        return DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND;\n+    }\n+\n+    public static String getCacheBoundsConfigName() {\n+        return CACHE_BOUNDS_CONFIG_NAME;\n+    }\n+\n+    public static String getCacheConfigName() {\n+        return CACHE_CONFIG_NAME;\n+    }\n+\n+    public static String getWorkloadConfigName() {\n+        return WORKLOAD_CONFIG_NAME;\n+    }\n+\n+    public static String getPriorityOrderConfigName() {\n+        return PRIORITY_ORDER_CONFIG_NAME;\n+    }\n+\n+    public static String getFieldDataCacheUpperBoundName() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 113}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzMzUxMQ==", "bodyText": "I have created getters for all the private fields. We don't need them now but maybe if want to re-use the variables in some other module, it would be nice to keep it here.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469033511", "createdAt": "2020-08-12T06:30:59Z", "author": {"login": "aditjind"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/configs/DeciderConfig.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.configs;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core.RcaConf;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class DeciderConfig {\n+\n+    private static final String CACHE_BOUNDS_CONFIG_NAME = \"cache-bounds\";\n+    private static final String CACHE_CONFIG_NAME = \"cache-type\";\n+    private static final String WORKLOAD_CONFIG_NAME = \"workload-type\";\n+    private static final String PRIORITY_ORDER_CONFIG_NAME = \"priority-order\";\n+    private static final String FIELD_DATA_CACHE_UPPER_BOUND_NAME = \"field-data-cache-upper-bound\";\n+    private static final String SHARD_REQUEST_CACHE_UPPER_BOUND_NAME = \"shard-request-cache-upper-bound\";\n+    private static final double DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND = 0.4;\n+    private static final double DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND = 0.05;\n+    // Defaults based on prioritising Stability over performance.\n+    private static final List<String> DEFAULT_WORKLOAD_PRIORITY = Arrays.asList(\"ingest\", \"search\");\n+    private static final List<String> DEFAULT_CACHE_PRIORITY = Arrays.asList(\"read-heavy\", \"write-heavy\");\n+\n+    private Double fieldDataCacheUpperBound;\n+    private Double shardRequestCacheUpperBound;\n+    private List<String> cachePriorityOrder;\n+    private List<String> workloadPriorityOrder;\n+\n+    public DeciderConfig(final RcaConf rcaConf) {\n+        fieldDataCacheUpperBound = rcaConf.readDeciderConfig(CACHE_BOUNDS_CONFIG_NAME,\n+                FIELD_DATA_CACHE_UPPER_BOUND_NAME, Double.class);\n+        shardRequestCacheUpperBound = rcaConf.readDeciderConfig(CACHE_BOUNDS_CONFIG_NAME,\n+                SHARD_REQUEST_CACHE_UPPER_BOUND_NAME, Double.class);\n+        cachePriorityOrder = rcaConf.readDeciderConfig(CACHE_CONFIG_NAME,\n+                PRIORITY_ORDER_CONFIG_NAME, List.class);\n+        workloadPriorityOrder = rcaConf.readDeciderConfig(WORKLOAD_CONFIG_NAME,\n+                PRIORITY_ORDER_CONFIG_NAME, List.class);\n+        if (fieldDataCacheUpperBound == null) {\n+            fieldDataCacheUpperBound = DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND;\n+        }\n+        if (shardRequestCacheUpperBound == null) {\n+            shardRequestCacheUpperBound = DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND;\n+        }\n+        if (cachePriorityOrder == null) {\n+            cachePriorityOrder = DEFAULT_CACHE_PRIORITY;\n+        }\n+        if (workloadPriorityOrder == null) {\n+            workloadPriorityOrder = DEFAULT_WORKLOAD_PRIORITY;\n+        }\n+    }\n+\n+    public Double getFieldDataCacheUpperBound() {\n+        return fieldDataCacheUpperBound;\n+    }\n+\n+    public Double getShardRequestCacheUpperBound() {\n+        return shardRequestCacheUpperBound;\n+    }\n+\n+    public List<String> getCachePriorityOrder() {\n+        return cachePriorityOrder;\n+    }\n+\n+    public List<String> getWorkloadPriorityOrder() {\n+        return workloadPriorityOrder;\n+    }\n+\n+    public static List<String> getDefaultWorkloadPriority() {\n+        return DEFAULT_WORKLOAD_PRIORITY;\n+    }\n+\n+    public static List<String> getDefaultCachePriority() {\n+        return DEFAULT_CACHE_PRIORITY;\n+    }\n+\n+    public static Double getDefaultShardRequestCacheUpperBound() {\n+        return DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND;\n+    }\n+\n+    public static Double getDefaultFieldDataCacheUpperBound() {\n+        return DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND;\n+    }\n+\n+    public static String getCacheBoundsConfigName() {\n+        return CACHE_BOUNDS_CONFIG_NAME;\n+    }\n+\n+    public static String getCacheConfigName() {\n+        return CACHE_CONFIG_NAME;\n+    }\n+\n+    public static String getWorkloadConfigName() {\n+        return WORKLOAD_CONFIG_NAME;\n+    }\n+\n+    public static String getPriorityOrderConfigName() {\n+        return PRIORITY_ORDER_CONFIG_NAME;\n+    }\n+\n+    public static String getFieldDataCacheUpperBoundName() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMzMjI4NA=="}, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 113}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxOTE2NDY0OnYy", "diffSide": "RIGHT", "path": "pa_config/rca.conf", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwMDowNDo0NVrOG9rwhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNjowNDoxMVrOHBvFTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMzMzI1Mg==", "bodyText": "a high level question is how do we plan to use this cache priority in decider. I understand the purpose of having cache is to accelerate reading. So what should decider do if write heavy is specified here?\nAnd if customer wants to prioritized fielddata cache over shard request cache, how should they set it in config  ?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r467333252", "createdAt": "2020-08-08T00:04:45Z", "author": {"login": "rguo-aws"}, "path": "pa_config/rca.conf", "diffHunk": "@@ -86,11 +86,21 @@\n     \"ClusterTemperatureRca\"\n   ],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzNzQ1OQ==", "bodyText": "The assumption here is customer doesn't know in detail about the field data cache and the shard request cache. So customer is going to provide the inputs in terms of there workload priority and cache type priority. Our deciders then in turn would change these variables into the prioritising Field data cache over shard request cache.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469037459", "createdAt": "2020-08-12T06:40:45Z", "author": {"login": "aditjind"}, "path": "pa_config/rca.conf", "diffHunk": "@@ -86,11 +86,21 @@\n     \"ClusterTemperatureRca\"\n   ],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMzMzI1Mg=="}, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ0NzczNw==", "bodyText": "Caches are different from queues and don't easily map to workload types. From what i know, all caches help with some form of read traffic in ES. Indexing has a separate indexing buffer.\nFor caches, customers will have to call out the priority wrt. specific cache names - field-data-cache, shard-request-cache etc. A read/write heavy cluster does not provide data on relative cache priorities.\nThese caches are public documentation so customers would know about it, but it would still be an advanced setting.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469447737", "createdAt": "2020-08-12T18:10:40Z", "author": {"login": "vigyasharma"}, "path": "pa_config/rca.conf", "diffHunk": "@@ -86,11 +86,21 @@\n     \"ClusterTemperatureRca\"\n   ],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMzMzI1Mg=="}, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTUyODAzOQ==", "bodyText": "So do you suggest we should remove the read-heavy / write-heavy input altogether? If we don't want to use this for cache then the other things we needed it for can be derived from workload (search/ingest) type?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r471528039", "createdAt": "2020-08-17T14:43:39Z", "author": {"login": "aditjind"}, "path": "pa_config/rca.conf", "diffHunk": "@@ -86,11 +86,21 @@\n     \"ClusterTemperatureRca\"\n   ],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMzMzI1Mg=="}, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU2OTAyMA==", "bodyText": "My suggestion is to directly input cache priorities, i.e. relevant caches for the customer from most imp to least imp (or vice versa). You can think of what the config key should be, but values will contain actual cache names.\nSomething like -\n\"cache-priority\": [\"fielddata-cache\", \n                   \"shard-request-cache\", \n                   \"query-cache\", \n                   \"bitset-filter-cache\"]\nWe cannot derive this from workload (search/ingest) types.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r471569020", "createdAt": "2020-08-17T15:44:24Z", "author": {"login": "vigyasharma"}, "path": "pa_config/rca.conf", "diffHunk": "@@ -86,11 +86,21 @@\n     \"ClusterTemperatureRca\"\n   ],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMzMzI1Mg=="}, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU4MjAzMA==", "bodyText": "Right! I have updated the default values to specific caches. The output we wanted to derive from read-heavy / write-heavy can be taken from search / ingest as well but we do need the explicit cache priority.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r471582030", "createdAt": "2020-08-17T16:04:11Z", "author": {"login": "aditjind"}, "path": "pa_config/rca.conf", "diffHunk": "@@ -86,11 +86,21 @@\n     \"ClusterTemperatureRca\"\n   ],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMzMzI1Mg=="}, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyOTI3OTkyOnYy", "diffSide": "RIGHT", "path": "src/test/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/RcaConfTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxOTo0OToxNVrOG_G0fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjoyODo1NlrOG_TfCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgyNTIxNQ==", "bodyText": "0.4 and 0.05? Any reason why we are using 10.4 and 10.05?", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r468825215", "createdAt": "2020-08-11T19:49:15Z", "author": {"login": "sruti1312"}, "path": "src/test/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/RcaConfTest.java", "diffHunk": "@@ -63,20 +64,14 @@ public void testReadRcaConfig() {\n \n   @Test\n   public void testReadDeciderConfig() {\n-    final Double fieldDataCacheUpperBound =\n-        rcaConf.readDeciderConfig(\n-            CacheDeciderConfig.CONFIG_NAME,\n-            CacheDeciderConfig.RCA_CONF_KEY_CONSTANTS.FIELD_DATA_CACHE_UPPER_BOUND,\n-            Double.class);\n-    Assert.assertNotNull(fieldDataCacheUpperBound);\n-    Assert.assertEquals(CacheDeciderConfig.DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND, fieldDataCacheUpperBound, 0.01);\n-\n-    final Double shardRequestCacheUpperBound =\n-        rcaConf.readDeciderConfig(\n-            CacheDeciderConfig.CONFIG_NAME,\n-            CacheDeciderConfig.RCA_CONF_KEY_CONSTANTS.SHARD_REQUEST_CACHE_UPPER_BOUND,\n-            Double.class);\n-    Assert.assertNotNull(shardRequestCacheUpperBound);\n-    Assert.assertEquals(CacheDeciderConfig.DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND, shardRequestCacheUpperBound, 0.01);\n+    DeciderConfig configObj = new DeciderConfig(rcaConf);\n+    Assert.assertNotNull(configObj.getCachePriorityOrder());\n+    Assert.assertNotNull(configObj.getWorkloadPriorityOrder());\n+    Assert.assertNotNull(configObj.getFieldDataCacheUpperBound());\n+    Assert.assertNotNull(configObj.getShardRequestCacheUpperBound());\n+    Assert.assertEquals(Arrays.asList(\"test-read-heavy\", \"test-write-heavy\"), configObj.getCachePriorityOrder());\n+    Assert.assertEquals(10.4, configObj.getFieldDataCacheUpperBound(), 0.01);\n+    Assert.assertEquals(10.05, configObj.getShardRequestCacheUpperBound(), 0.01);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzMjcxNQ==", "bodyText": "I have updated the values in the tmp config files so as to assert the reading from the config is working as expected.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469032715", "createdAt": "2020-08-12T06:28:56Z", "author": {"login": "aditjind"}, "path": "src/test/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/framework/core/RcaConfTest.java", "diffHunk": "@@ -63,20 +64,14 @@ public void testReadRcaConfig() {\n \n   @Test\n   public void testReadDeciderConfig() {\n-    final Double fieldDataCacheUpperBound =\n-        rcaConf.readDeciderConfig(\n-            CacheDeciderConfig.CONFIG_NAME,\n-            CacheDeciderConfig.RCA_CONF_KEY_CONSTANTS.FIELD_DATA_CACHE_UPPER_BOUND,\n-            Double.class);\n-    Assert.assertNotNull(fieldDataCacheUpperBound);\n-    Assert.assertEquals(CacheDeciderConfig.DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND, fieldDataCacheUpperBound, 0.01);\n-\n-    final Double shardRequestCacheUpperBound =\n-        rcaConf.readDeciderConfig(\n-            CacheDeciderConfig.CONFIG_NAME,\n-            CacheDeciderConfig.RCA_CONF_KEY_CONSTANTS.SHARD_REQUEST_CACHE_UPPER_BOUND,\n-            Double.class);\n-    Assert.assertNotNull(shardRequestCacheUpperBound);\n-    Assert.assertEquals(CacheDeciderConfig.DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND, shardRequestCacheUpperBound, 0.01);\n+    DeciderConfig configObj = new DeciderConfig(rcaConf);\n+    Assert.assertNotNull(configObj.getCachePriorityOrder());\n+    Assert.assertNotNull(configObj.getWorkloadPriorityOrder());\n+    Assert.assertNotNull(configObj.getFieldDataCacheUpperBound());\n+    Assert.assertNotNull(configObj.getShardRequestCacheUpperBound());\n+    Assert.assertEquals(Arrays.asList(\"test-read-heavy\", \"test-write-heavy\"), configObj.getCachePriorityOrder());\n+    Assert.assertEquals(10.4, configObj.getFieldDataCacheUpperBound(), 0.01);\n+    Assert.assertEquals(10.05, configObj.getShardRequestCacheUpperBound(), 0.01);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgyNTIxNQ=="}, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyOTI5NDYzOnYy", "diffSide": "RIGHT", "path": "pa_config/rca_master.conf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxOTo1Mzo0NFrOG_G9oA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozMzoyNFrOG_TlrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgyNzU1Mg==", "bodyText": "What are your thoughts on having one more level. Like all cache related config bounded together. Pro might be it becomes more manageable.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r468827552", "createdAt": "2020-08-11T19:53:44Z", "author": {"login": "sruti1312"}, "path": "pa_config/rca_master.conf", "diffHunk": "@@ -97,11 +97,21 @@\n     \"ClusterTemperatureRca\"\n   ],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]\n+    },\n     // cache decider - Needs to be updated as per the performance test results\n-    \"cache-decider-config\": {\n-      \"field-data-cache-upper-bound\" : 0.4,\n-      \"shard-request-cache-upper-bound\" : 0.05\n+    \"cache-bounds\": {\n+      \"field-data-cache-upper-bound\" : 10.4,\n+      \"shard-request-cache-upper-bound\" : 10.05", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzNDQxMw==", "bodyText": "We don't anticipate any more configs just now. So I will be more tilted to keep it just like this. I agree if too many configs are available then it would be nice to club similar of them together.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469034413", "createdAt": "2020-08-12T06:33:24Z", "author": {"login": "aditjind"}, "path": "pa_config/rca_master.conf", "diffHunk": "@@ -97,11 +97,21 @@\n     \"ClusterTemperatureRca\"\n   ],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]\n+    },\n     // cache decider - Needs to be updated as per the performance test results\n-    \"cache-decider-config\": {\n-      \"field-data-cache-upper-bound\" : 0.4,\n-      \"shard-request-cache-upper-bound\" : 0.05\n+    \"cache-bounds\": {\n+      \"field-data-cache-upper-bound\" : 10.4,\n+      \"shard-request-cache-upper-bound\" : 10.05", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgyNzU1Mg=="}, "originalCommit": {"oid": "75b62e36596d199d2878955fd6a1430a46b32a1b"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMzMwOTIwOnYy", "diffSide": "RIGHT", "path": "pa_config/rca_master.conf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxODoxNjo0MlrOG_tBXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMjowNDo1MVrOG_0dAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ1MTEwMw==", "bodyText": "We should move default values to code and pick overrides from rca.conf. This can be a separate PR/task.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469451103", "createdAt": "2020-08-12T18:16:42Z", "author": {"login": "vigyasharma"}, "path": "pa_config/rca_master.conf", "diffHunk": "@@ -102,9 +102,19 @@\n   \"muted-deciders\": [],\n   \"muted-actions\": [],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]\n+    },\n     // cache decider - Needs to be updated as per the performance test results\n-    \"cache-decider-config\": {\n+    \"cache-bounds\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b881aa46e3fd53eef9141bf1e16890c58874adcc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3Mjg2NA==", "bodyText": "This is how it is happening currently. We read the overrides only from the rca.conf and default values are hard coded. Currently default and overridden values are the same.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469572864", "createdAt": "2020-08-12T22:04:51Z", "author": {"login": "aditjind"}, "path": "pa_config/rca_master.conf", "diffHunk": "@@ -102,9 +102,19 @@\n   \"muted-deciders\": [],\n   \"muted-actions\": [],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    \"cache-type\": {\n+      \"priority-order\": [\"read-heavy\", \"write-heavy\"]\n+    },\n     // cache decider - Needs to be updated as per the performance test results\n-    \"cache-decider-config\": {\n+    \"cache-bounds\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ1MTEwMw=="}, "originalCommit": {"oid": "b881aa46e3fd53eef9141bf1e16890c58874adcc"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMzMzMTc5OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/configs/DeciderConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxODoyMzowNlrOG_tPmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMjowOTo1NFrOG_0kkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ1NDc0NA==", "bodyText": "We can split cache bounds and queue bounds into their respective config objects. They will still get read from the decider base class so all deciders have it. But this will help organize the overall structure. (QueueConfig will get passed to ModifyQueueAction etc. )\nWe can do this as a separate PR.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469454744", "createdAt": "2020-08-12T18:23:06Z", "author": {"login": "vigyasharma"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/configs/DeciderConfig.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.configs;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core.RcaConf;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class DeciderConfig {\n+\n+    private static final String CACHE_BOUNDS_CONFIG_NAME = \"cache-bounds\";\n+    private static final String CACHE_CONFIG_NAME = \"cache-type\";\n+    private static final String WORKLOAD_CONFIG_NAME = \"workload-type\";\n+    private static final String PRIORITY_ORDER_CONFIG_NAME = \"priority-order\";\n+    private static final String FIELD_DATA_CACHE_UPPER_BOUND_NAME = \"field-data-cache-upper-bound\";\n+    private static final String SHARD_REQUEST_CACHE_UPPER_BOUND_NAME = \"shard-request-cache-upper-bound\";\n+    private static final double DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND = 0.4;\n+    private static final double DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND = 0.05;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b881aa46e3fd53eef9141bf1e16890c58874adcc"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3NDgwMg==", "bodyText": "So as suggested cache bounds / queue bounds etc. should be read as a single object from the config file? This can be done when the queue related configs are added in the config file.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469574802", "createdAt": "2020-08-12T22:09:54Z", "author": {"login": "aditjind"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/configs/DeciderConfig.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.configs;\n+\n+import com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.framework.core.RcaConf;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class DeciderConfig {\n+\n+    private static final String CACHE_BOUNDS_CONFIG_NAME = \"cache-bounds\";\n+    private static final String CACHE_CONFIG_NAME = \"cache-type\";\n+    private static final String WORKLOAD_CONFIG_NAME = \"workload-type\";\n+    private static final String PRIORITY_ORDER_CONFIG_NAME = \"priority-order\";\n+    private static final String FIELD_DATA_CACHE_UPPER_BOUND_NAME = \"field-data-cache-upper-bound\";\n+    private static final String SHARD_REQUEST_CACHE_UPPER_BOUND_NAME = \"shard-request-cache-upper-bound\";\n+    private static final double DEFAULT_FIELD_DATA_CACHE_UPPER_BOUND = 0.4;\n+    private static final double DEFAULT_SHARD_REQUEST_CACHE_UPPER_BOUND = 0.05;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ1NDc0NA=="}, "originalCommit": {"oid": "b881aa46e3fd53eef9141bf1e16890c58874adcc"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMzM1NDE2OnYy", "diffSide": "RIGHT", "path": "pa_config/rca_idle_master.conf", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxODoyOToyM1rOG_tdgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQyMjoxMDo1OVrOG_0mLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ1ODMwNA==", "bodyText": "Minor: Consider rewording to make the ordering more clear. It should be clear that the list goes from most used to least used cache. (Same for workload priority).", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469458304", "createdAt": "2020-08-12T18:29:23Z", "author": {"login": "vigyasharma"}, "path": "pa_config/rca_idle_master.conf", "diffHunk": "@@ -102,9 +102,19 @@\n   \"muted-deciders\": [],\n   \"muted-actions\": [],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b881aa46e3fd53eef9141bf1e16890c58874adcc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU3NTIxNQ==", "bodyText": "done", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469575215", "createdAt": "2020-08-12T22:10:59Z", "author": {"login": "aditjind"}, "path": "pa_config/rca_idle_master.conf", "diffHunk": "@@ -102,9 +102,19 @@\n   \"muted-deciders\": [],\n   \"muted-actions\": [],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ1ODMwNA=="}, "originalCommit": {"oid": "b881aa46e3fd53eef9141bf1e16890c58874adcc"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMzM1NzI3OnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/Decider.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxODozMDoxNFrOG_tfYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxODozMDoxNFrOG_tfYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ1ODc4NQ==", "bodyText": "Good decision keeping them in base class. These will be required by multiple deciders.", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r469458785", "createdAt": "2020-08-12T18:30:14Z", "author": {"login": "vigyasharma"}, "path": "src/main/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/decisionmaker/deciders/Decider.java", "diffHunk": "@@ -91,4 +101,31 @@ public void handleNodeMuted() {\n \n   @Override\n   public abstract Decision operate();\n+\n+  /**\n+   * read threshold values from rca.conf\n+   *\n+   * @param conf RcaConf object\n+   */\n+  @Override\n+  public void readRcaConf(RcaConf conf) {\n+    configObj = conf.getDeciderConfig();\n+  }\n+\n+  public double getFieldDataCacheUpperBound() {\n+    return configObj != null ? configObj.getFieldDataCacheUpperBound() : getDefaultFieldDataCacheUpperBound();\n+  }\n+\n+  public double getShardRequestCacheUpperBound() {\n+    return configObj != null ? configObj.getShardRequestCacheUpperBound() : getDefaultShardRequestCacheUpperBound();\n+  }\n+\n+  public List<String> getWorkLoadPriority() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b881aa46e3fd53eef9141bf1e16890c58874adcc"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTQ2NjY5OnYy", "diffSide": "RIGHT", "path": "pa_config/rca.conf", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMjowMzowM1rOHCAsng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMjowMzowM1rOHCAsng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg3MDYyMg==", "bodyText": "nit: least*", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r471870622", "createdAt": "2020-08-18T02:03:03Z", "author": {"login": "sruti1312"}, "path": "pa_config/rca.conf", "diffHunk": "@@ -91,9 +91,21 @@\n   \"muted-deciders\": [],\n   \"muted-actions\": [],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    // Priority order in the list goes from most expected to the lease expected workload type.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49821d3c6b1c255aedafa755e7d154ca2058e9dc"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTQ2Nzg4OnYy", "diffSide": "RIGHT", "path": "pa_config/rca.conf", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMjowMzo1NlrOHCAtYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMjowMzo1NlrOHCAtYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg3MDgxOA==", "bodyText": "same*", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/340#discussion_r471870818", "createdAt": "2020-08-18T02:03:56Z", "author": {"login": "sruti1312"}, "path": "pa_config/rca.conf", "diffHunk": "@@ -91,9 +91,21 @@\n   \"muted-deciders\": [],\n   \"muted-actions\": [],\n \n+  // Default Values are added in the config specific file as well\n+  // Modify them as well whenever changing the default values (DeciderConfig.java)\n   \"decider-config-settings\": {\n+    // Decreasing order of priority for the type of workload we can expect on the cluster.\n+    // Priority order in the list goes from most expected to the lease expected workload type.\n+    \"workload-type\": {\n+      \"priority-order\": [\"ingest\", \"search\"]\n+    },\n+    // Decreasing order of priority for the type of cache which is expected to be consumed more.\n+    // Priority order in the list goes from most used to the lease used cache type.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49821d3c6b1c255aedafa755e7d154ca2058e9dc"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2340, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}