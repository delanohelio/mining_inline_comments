{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNTk2NDcx", "number": 1314, "title": "Bugfix/issue 1282", "bodyText": "Fixes #1282\nThis PR is [ready] for review.\nRisk\nThis PR makes [minor] API changes.\nTesting Plan\n\nTested to ensure video streaming still behaves as expected on SYNC 3\nNeed Ford to test to ensure issue is resolved on High Res Ford/Lincoln\n\nUnit Tests\nAdded unit tests to ensure scaling is set appropriately for high and low red displays as well as Ford/Lincoln vs other vehicle makes\nSummary\nISdl now has a getRegisterAppInterfaceResponse Method so we can access the response in the manager classes, this allows us to pass the vehicle make to the VideoStreamingParameters.\nThis required a change to the VideoStreamingParameters.update API, The original api has been depricated and the updated API has been implemented", "createdAt": "2020-03-20T15:33:21Z", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1314", "merged": true, "mergeCommit": {"oid": "53546c688857d50be382320f9746946fc570ac05"}, "closed": true, "closedAt": "2020-04-03T18:57:31Z", "author": {"login": "RHenigan"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPRBVBgH2gAyMzkxNTk2NDcxOmU1MDRjMDM3MzY3MGNlZmI3ZWY5MmVkNTA3MDgwNjU5N2I1NWEyYzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQlOD7gFqTM3OTgzNzUyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e504c0373670cefb7ef92ed5070806597b55a2c3", "author": {"user": {"login": "RHenigan", "name": "Robert Henigan"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/e504c0373670cefb7ef92ed5070806597b55a2c3", "committedDate": "2020-03-19T19:24:47Z", "message": "Scale Workaround for High Res Ford/Linc displays"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a98ffb54b4d9ce4476f8468b4c91778afb29e0b", "author": {"user": {"login": "RHenigan", "name": "Robert Henigan"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/6a98ffb54b4d9ce4476f8468b4c91778afb29e0b", "committedDate": "2020-03-19T19:57:39Z", "message": "Resolve VideoStreamManagerTests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94e8fd8d6e2fcd9af831f052c2e110ff2d2e757a", "author": {"user": {"login": "RHenigan", "name": "Robert Henigan"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/94e8fd8d6e2fcd9af831f052c2e110ff2d2e757a", "committedDate": "2020-03-19T20:44:11Z", "message": "Implement getRegisterAppInterfaceResponse for SE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc7240533a10167e1d1879af1b124d6e9683cc96", "author": {"user": {"login": "RHenigan", "name": "Robert Henigan"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/cc7240533a10167e1d1879af1b124d6e9683cc96", "committedDate": "2020-03-20T14:33:56Z", "message": "Add tests for Ford High Res"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b14a393969a4d12ea637f1d108c6d84f815041a", "author": {"user": {"login": "RHenigan", "name": "Robert Henigan"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/0b14a393969a4d12ea637f1d108c6d84f815041a", "committedDate": "2020-03-20T15:32:45Z", "message": "Update parameter comments for update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5NjY5NTI4", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1314#pullrequestreview-379669528", "createdAt": "2020-03-23T17:41:40Z", "commit": {"oid": "0b14a393969a4d12ea637f1d108c6d84f815041a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNzo0MTo0MVrOF6QvYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxODoxNzoxNFrOF6SKtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjYzNjAwMA==", "bodyText": "It is possible that VehicleType and Make can be null, need to check for Null", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1314#discussion_r396636000", "createdAt": "2020-03-23T17:41:41Z", "author": {"login": "JulianKast"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/video/VideoStreamManager.java", "diffHunk": "@@ -176,10 +177,10 @@ public void onNotified(RPCNotification notification) {\n \t};\n \n \t// MANAGER APIs\n-\n \tpublic VideoStreamManager(ISdl internalInterface){\n \t\tsuper(internalInterface);\n \n+\t\tvehicleMake = internalInterface.getRegisterAppInterfaceResponse().getVehicleType().getMake();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b14a393969a4d12ea637f1d108c6d84f815041a"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY1OTM4MA==", "bodyText": "vehicleMake can be null here if you check for null in VideoStreamManager and don't set it.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1314#discussion_r396659380", "createdAt": "2020-03-23T18:17:14Z", "author": {"login": "JulianKast"}, "path": "base/src/main/java/com/smartdevicelink/streaming/video/VideoStreamingParameters.java", "diffHunk": "@@ -131,9 +131,52 @@ public void update(VideoStreamingParameters params){\n      * Update the values contained in the capability that should have been returned through the SystemCapabilityManager.\n      * This update will use the most preferred streaming format from the module.\n      * @param capability the video streaming capability returned from the SystemCapabilityManager\n+     * @param vehicleMake the vehicle make from the RegisterAppInterfaceResponse\n      * @see com.smartdevicelink.proxy.SystemCapabilityManager\n      * @see VideoStreamingCapability\n      */\n+    public void update(VideoStreamingCapability capability, String vehicleMake){\n+        if(capability.getMaxBitrate()!=null){ this.bitrate = capability.getMaxBitrate() * 1000; } // NOTE: the unit of maxBitrate in getSystemCapability is kbps.\n+        double scale = DEFAULT_SCALE;\n+        if(capability.getScale() != null) { scale = capability.getScale(); }\n+        ImageResolution resolution = capability.getPreferredResolution();\n+        if(resolution!=null){\n+\n+            if((vehicleMake.contains(\"Ford\") || vehicleMake.contains(\"Lincoln\")) && ((resolution.getResolutionHeight()!=null && resolution.getResolutionHeight() > 800) || (resolution.getResolutionWidth() !=null && resolution.getResolutionWidth() > 800))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b14a393969a4d12ea637f1d108c6d84f815041a"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c5c4c18d32fef734880b4280f905903aacfa6cd", "author": {"user": {"login": "RHenigan", "name": "Robert Henigan"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/9c5c4c18d32fef734880b4280f905903aacfa6cd", "committedDate": "2020-03-23T20:21:16Z", "message": "Add null checks for vehicle type and make"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5ODM3NTI3", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1314#pullrequestreview-379837527", "createdAt": "2020-03-23T21:30:43Z", "commit": {"oid": "9c5c4c18d32fef734880b4280f905903aacfa6cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2136, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}