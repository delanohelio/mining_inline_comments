{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NDMyMjg3", "number": 1582, "title": "Refactor FileManager to use queues ", "bodyText": "Fixes #1572  & #1580\nThis PR is ready for review.\nRisk\nThis PR makes no API changes.\nTesting Plan\n\n I have verified that I have not introduced new warnings in this PR (or explain why below)\n I have run the unit tests with this PR\n I have tested this PR against Core and verified behavior (if applicable, if not applicable, explain why below).\n I have tested Android, and Java SE\n\nUnit Tests\nUnit tests have been updated to test the new FileManager\nCore Tests\n\n Test uploading a file using all variations for SdlFile constructors\n Test uploading a file, then confirm that RemoteFileNames and BytesAvailable are updated correctly\n Test uploading a persistent file that make sure it stays between ignition cycles\n Test uploading a file that exists and has override = false\n Test uploading a file that exists and has override = true\n  Test uploading a file when HMI level is NONE\n Test uploading a static icon file\n Test uploading an artwork\n Test uploading multiple files\n Test uploading multiple artworks\n Test uploading file bigger than MTU size (more than 131072 bytes)\n Test deleting a file\n Test deleting multiple files\n Test hasUploadedFile()\n Test fileRetryCount & artworkRetryCount\n Test ScreenManager basic features and confirm they still work\n Test with javaSE\n\nCore version tested against : 7.0.0\nSummary\nThis PR refactors FilesManager to:\n\nSplit the code into multiple operations and run the operations using transaction queues\nUpdate sending big files logic to split the data into multiple RPCs if the data size exceeds the MTU site\n\nTasks Remaining:\n\n Refactor FileManager\n Smoke tests all changes\n Update unit tests\n\nCLA\n\n I have signed the CLA", "createdAt": "2020-12-09T20:05:22Z", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1582", "merged": true, "mergeCommit": {"oid": "2d958713f4a3593598992beea0d771bd95f250c2"}, "closed": true, "closedAt": "2021-01-07T19:54:20Z", "author": {"login": "bilal-alsharifi"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkkZjSAH2gAyNTM1NDMyMjg3OjJmZTFjMTE4MTkzYjJhZmRiNTBmZjgxYTBkMThiNzEyZWVlZDcwZjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdt5pkMgFqTU2Mzc4MTk4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2fe1c118193b2afdb50ff81a0d18b712eeed70f8", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/2fe1c118193b2afdb50ff81a0d18b712eeed70f8", "committedDate": "2020-12-09T20:03:00Z", "message": "Refactor FileManager to use queues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "207b4546328bbb360151816b305c5d654e3ea076", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/207b4546328bbb360151816b305c5d654e3ea076", "committedDate": "2020-12-09T20:03:49Z", "message": "Merge branch 'develop' into feature/file_manager_refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5173ec77206da3ca1a3929bf14ff6196bdd0dc3e", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/5173ec77206da3ca1a3929bf14ff6196bdd0dc3e", "committedDate": "2020-12-09T22:12:05Z", "message": "Update logs and comments in FileManager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acfaaa784cd358bc68f33ec8c0809253fb817a66", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/acfaaa784cd358bc68f33ec8c0809253fb817a66", "committedDate": "2020-12-09T22:18:17Z", "message": "Update comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82a203f6a0677eb6778c17057efade4c8e496d02", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/82a203f6a0677eb6778c17057efade4c8e496d02", "committedDate": "2020-12-10T15:53:33Z", "message": "remove unnecessary public modifiers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc64920d5171e7264b9d381fab1e59e1ef571228", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/bc64920d5171e7264b9d381fab1e59e1ef571228", "committedDate": "2020-12-10T16:02:05Z", "message": "Simplify logic in DeleteFileOperation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89048b5bff2e871d7b19322428883eaf5ca0f7b3", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/89048b5bff2e871d7b19322428883eaf5ca0f7b3", "committedDate": "2020-12-10T16:02:26Z", "message": "Simplify logic in ListFilesOperation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82047ad8ed98b5a00f59c1e6b88dbfc9e3bac6ea", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/82047ad8ed98b5a00f59c1e6b88dbfc9e3bac6ea", "committedDate": "2020-12-10T18:55:09Z", "message": "Cleanup code in UploadFileOperation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "238d4469e72103b82c19ddac5042d7cc343074a7", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/238d4469e72103b82c19ddac5042d7cc343074a7", "committedDate": "2020-12-10T19:37:39Z", "message": "Cleanup code in BaseFileManager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8b5ef26de395f929420a4303fb6e167f2c62c8c", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/a8b5ef26de395f929420a4303fb6e167f2c62c8c", "committedDate": "2020-12-10T19:48:13Z", "message": "Add mssing getMtu method to Isdl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e8a7d2b952961ab4f44bd28119453c7f6679325", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/1e8a7d2b952961ab4f44bd28119453c7f6679325", "committedDate": "2020-12-14T14:35:32Z", "message": "Merge branch 'develop' into feature/file_manager_refactor\n\n# Conflicts:\n#\tbase/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1520d6b8e1bca45c0be15afa7d4326e206fa1474", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/1520d6b8e1bca45c0be15afa7d4326e206fa1474", "committedDate": "2020-12-14T16:03:08Z", "message": "Fix testFileUploadSuccess() test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "971e8ff0f5f12a1563a41226adfcad919aadc8db", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/971e8ff0f5f12a1563a41226adfcad919aadc8db", "committedDate": "2020-12-14T16:05:59Z", "message": "Reuse createISdlMock() in all fileManager tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98d4b3a8cd2e957ac2d36e789d5845da4b69914f", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/98d4b3a8cd2e957ac2d36e789d5845da4b69914f", "committedDate": "2020-12-14T18:38:38Z", "message": "Fix issues in openInputStreamWithFile()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4fb92d3a51b7517ee2ca40657474e6fb2513975", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/a4fb92d3a51b7517ee2ca40657474e6fb2513975", "committedDate": "2020-12-14T18:40:45Z", "message": "Partially fix FileManager unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "faa8f1e2dd9f19c2e6a4d521cef6652a536575e1", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/faa8f1e2dd9f19c2e6a4d521cef6652a536575e1", "committedDate": "2020-12-14T18:58:41Z", "message": "Fix more fileManager unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "535fcf8f8ce6e30ee11d33005a9f67209f380e80", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/535fcf8f8ce6e30ee11d33005a9f67209f380e80", "committedDate": "2020-12-14T19:36:12Z", "message": "Fx more FileManager unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5d1969d4f06b14d93ee75804e52a2d5581e6aed", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/a5d1969d4f06b14d93ee75804e52a2d5581e6aed", "committedDate": "2020-12-14T20:10:28Z", "message": "Fx more FileManager unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f10eeda7232e9c9e54090d860eeda7285d48045c", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/f10eeda7232e9c9e54090d860eeda7285d48045c", "committedDate": "2020-12-14T20:33:55Z", "message": "Fx more FileManager unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63b3d683eea54e5a0849e66cc75a41287a69e063", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/63b3d683eea54e5a0849e66cc75a41287a69e063", "committedDate": "2020-12-14T20:44:10Z", "message": "Fx more FileManager unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1d52d9e6dc1aae68735c9a04ed2999beb8c077f", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/b1d52d9e6dc1aae68735c9a04ed2999beb8c077f", "committedDate": "2020-12-14T20:48:54Z", "message": "Reformat code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c538f70e13f9a44fa2294eebdb1917175d550b9", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/2c538f70e13f9a44fa2294eebdb1917175d550b9", "committedDate": "2020-12-16T16:06:12Z", "message": "Update comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a91536e89c27310ecc0087aae327c7828823115", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/5a91536e89c27310ecc0087aae327c7828823115", "committedDate": "2020-12-16T21:43:51Z", "message": "Merge branch 'develop' into feature/file_manager_refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11a80c269f9f33cdca03faa9764477477d07fa3f", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/11a80c269f9f33cdca03faa9764477477d07fa3f", "committedDate": "2020-12-17T18:36:40Z", "message": "Fix the logic that breaks large files into multiple PutFiles"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyMTIwMDU3", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1582#pullrequestreview-562120057", "createdAt": "2021-01-05T20:47:40Z", "commit": {"oid": "11a80c269f9f33cdca03faa9764477477d07fa3f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQyMDo0Nzo0MFrOIOms8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QxNDoxNjoxOVrOIPuAng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjE4NTA3Mw==", "bodyText": "Should we print this out using the debug tool? if we are just uploading one file, nothing gets printed to the logs and it just returns false.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1582#discussion_r552185073", "createdAt": "2021-01-05T20:47:40Z", "author": {"login": "JulianKast"}, "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "diffHunk": "@@ -320,94 +356,90 @@ public void onResponse(int correlationId, RPCResponse response) {\n      * @param listener called when core responds to the attempt to upload the file\n      */\n     public void uploadFile(@NonNull final SdlFile file, final CompletionListener listener) {\n-        if (file.isStaticIcon()) {\n-            DebugTool.logWarning(TAG, String.format(\"%s is a static icon and doesn't need to be uploaded\", file.getName()));\n-            listener.onComplete(true);\n-            return;\n-        }\n-        if (!file.getOverwrite() && hasUploadedFile(file)) {\n-            DebugTool.logWarning(TAG, String.format(\"%s has already been uploaded and the overwrite property is set to false. It will not be uploaded again\", file.getName()));\n-            listener.onComplete(true);\n-            return;\n-        }\n-        PutFile putFile = createPutFile(file);\n-        putFile.setOnRPCResponseListener(new OnRPCResponseListener() {\n+        uploadFilePrivate(file, new FileManagerCompletionListener() {\n             @Override\n-            public void onResponse(int correlationId, RPCResponse response) {\n-                PutFileResponse putFileResponse = (PutFileResponse) response;\n-                if (putFileResponse.getSuccess()) {\n-                    bytesAvailable = putFileResponse.getSpaceAvailable() != null ? putFileResponse.getSpaceAvailable() : SPACE_AVAILABLE_MAX_VALUE;\n-                    remoteFiles.add(file.getName());\n-                    uploadedEphemeralFileNames.add(file.getName());\n-                    if (listener != null) {\n-                        listener.onComplete(true);\n-                    }\n-                } else {\n-                    if (shouldReUploadFile(file.getName(), file.getType())) {\n-                        uploadFile(file, listener);\n-                    } else if (listener != null) {\n-                        listener.onComplete(false);\n-                    }\n+            public void onComplete(boolean success, int bytesAvailable, Collection<String> fileNames, String errorMessage) {\n+                if (listener != null) {\n+                    listener.onComplete(success);\n                 }\n             }\n         });\n-        internalInterface.sendRPC(putFile);\n     }\n \n-    /**\n-     * Check to see if file can be re-uploaded\n-     *\n-     * @param fileName a String that represents an SdlFile's name\n-     * @param fileType an instances of FileType that represents a type of File\n-     * @return true or false depending on if file with given type and name can be re-uploaded\n-     */\n-    private boolean shouldReUploadFile(String fileName, FileType fileType) {\n-        if (!failedFileUploadsIndex.containsKey(fileName)) {\n-            if (FileType.GRAPHIC_JPEG.equals(fileType) ||\n-                    FileType.GRAPHIC_BMP.equals(fileType) ||\n-                    FileType.GRAPHIC_PNG.equals(fileType)) {\n-                failedFileUploadsIndex.put(fileName, fileManagerConfig.getArtworkRetryCount());\n-            } else {\n-                failedFileUploadsIndex.put(fileName, fileManagerConfig.getFileRetryCount());\n+    private void uploadFilePrivate(@NonNull final SdlFile file, final FileManagerCompletionListener listener) {\n+        if (file == null) {\n+            if (listener != null) {\n+                listener.onComplete(false, bytesAvailable, null, \"The file upload was canceled. The data for the file is missing.\");\n             }\n+            return;\n         }\n-        Integer fileRetryValue = failedFileUploadsIndex.get(fileName);\n-        if (fileRetryValue != null && fileRetryValue > 0) {\n-            failedFileUploadsIndex.put(fileName, fileRetryValue - 1);\n-            return true;\n-        }\n-        return false;\n-    }\n \n-    /**\n-     * Attempts to upload a list of SdlFiles to core\n-     *\n-     * @param files    list of SdlFiles with file name and one of A) fileData, B) Uri, or C) resourceID set\n-     * @param listener callback that is called once core responds to all upload requests\n-     */\n-    public void uploadFiles(@NonNull List<? extends SdlFile> files, final MultipleFileCompletionListener listener) {\n-        if (files.isEmpty()) {\n+        if (file.isStaticIcon()) {\n+            if (listener != null) {\n+                listener.onComplete(false, bytesAvailable, null, \"The file upload was canceled. The file is a static icon, which cannot be uploaded.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11a80c269f9f33cdca03faa9764477477d07fa3f"}, "originalPosition": 567}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjg4NTkyMA==", "bodyText": "If we hit here do we want to be trying to upload the file still? Currently, it will try to still upload and will try multiple times if the file type allows for multiple retry attempts.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1582#discussion_r552885920", "createdAt": "2021-01-06T18:22:54Z", "author": {"login": "JulianKast"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/file/FileManager.java", "diffHunk": "@@ -81,100 +70,33 @@ public FileManager(ISdl internalInterface, Context context, FileManagerConfig fi\n         this.context = new WeakReference<>(context);\n     }\n \n-    /**\n-     * Creates and returns a PutFile request that would upload a given SdlFile\n-     *\n-     * @param file SdlFile with fileName and one of A) fileData, B) Uri, or C) resourceID set\n-     * @return a valid PutFile request if SdlFile contained a fileName and sufficient data\n-     */\n     @Override\n-    PutFile createPutFile(@NonNull final SdlFile file) {\n-        PutFile putFile = new PutFile();\n-        if (file.getName() == null) {\n-            throw new IllegalArgumentException(\"You must specify an file name in the SdlFile\");\n-        } else {\n-            putFile.setSdlFileName(file.getName());\n+    InputStream openInputStreamWithFile(@NonNull SdlFile file) {\n+        InputStream inputStream = null;\n+\n+        if (context.get() == null) {\n+            DebugTool.logError(TAG, \"Context is null. Cannot open file input stream!\");\n+            return null;\n         }\n \n         if (file.getResourceId() > 0) {\n-            // Use resource id to upload file\n-            byte[] contents = contentsOfResource(file.getResourceId());\n-            if (contents != null) {\n-                putFile.setFileData(contents);\n-            } else {\n-                throw new IllegalArgumentException(\"Resource file id was empty\");\n+            try {\n+                inputStream = context.get().getResources().openRawResource(file.getResourceId());\n+            } catch (Resources.NotFoundException e) {\n+                DebugTool.logError(TAG, \"File cannot be found.\");\n             }\n         } else if (file.getUri() != null) {\n-            // Use URI to upload file\n-            byte[] contents = contentsOfUri(file.getUri());\n-            if (contents != null) {\n-                putFile.setFileData(contents);\n-            } else {\n-                throw new IllegalArgumentException(\"Uri was empty\");\n+            try {\n+                inputStream = context.get().getContentResolver().openInputStream(file.getUri());\n+            } catch (FileNotFoundException e) {\n+                DebugTool.logError(TAG, String.format(\"File at %s cannot be found.\", file.getUri()));\n             }\n         } else if (file.getFileData() != null) {\n-            // Use file data (raw bytes) to upload file\n-            putFile.setFileData(file.getFileData());\n+            inputStream = new ByteArrayInputStream(file.getFileData());\n         } else {\n-            throw new IllegalArgumentException(\"The SdlFile to upload does \" +\n-                    \"not specify its resourceId, Uri, or file data\");\n-        }\n-\n-        if (file.getType() != null) {\n-            putFile.setFileType(file.getType());\n-        }\n-        putFile.setPersistentFile(file.isPersistent());\n-\n-        return putFile;\n-    }\n-\n-    /**\n-     * Helper method to take resource files and turn them into byte arrays\n-     *\n-     * @param resource Resource file id\n-     * @return Resulting byte array\n-     */\n-    private byte[] contentsOfResource(int resource) {\n-        InputStream is = null;\n-        try {\n-            is = context.get().getResources().openRawResource(resource);\n-            return contentsOfInputStream(is);\n-        } catch (Resources.NotFoundException e) {\n-            DebugTool.logError(TAG, \"Can't read from resource\", e);\n-            return null;\n-        } finally {\n-            if (is != null) {\n-                try {\n-                    is.close();\n-                } catch (IOException e) {\n-                    e.printStackTrace();\n-                }\n-            }\n+            DebugTool.logError(TAG, \"The SdlFile to upload does not specify its resourceId, Uri, or file data\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11a80c269f9f33cdca03faa9764477477d07fa3f"}, "originalPosition": 126}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjg5MjMxNw==", "bodyText": "Should we add a check like this in BaseFileManager, but instead of the throw, have it print an error to the log and return before UploadFileOperation is created.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1582#discussion_r552892317", "createdAt": "2021-01-06T18:35:01Z", "author": {"login": "JulianKast"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/file/FileManager.java", "diffHunk": "@@ -81,100 +70,33 @@ public FileManager(ISdl internalInterface, Context context, FileManagerConfig fi\n         this.context = new WeakReference<>(context);\n     }\n \n-    /**\n-     * Creates and returns a PutFile request that would upload a given SdlFile\n-     *\n-     * @param file SdlFile with fileName and one of A) fileData, B) Uri, or C) resourceID set\n-     * @return a valid PutFile request if SdlFile contained a fileName and sufficient data\n-     */\n     @Override\n-    PutFile createPutFile(@NonNull final SdlFile file) {\n-        PutFile putFile = new PutFile();\n-        if (file.getName() == null) {\n-            throw new IllegalArgumentException(\"You must specify an file name in the SdlFile\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11a80c269f9f33cdca03faa9764477477d07fa3f"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk1MzQ3Mg==", "bodyText": "At the top of this file, we should update the copyright year", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1582#discussion_r552953472", "createdAt": "2021-01-06T20:47:01Z", "author": {"login": "JulianKast"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/file/FileManager.java", "diffHunk": "@@ -34,34 +34,23 @@\n \n import android.content.Context;\n import android.content.res.Resources;\n-import android.net.Uri;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11a80c269f9f33cdca03faa9764477477d07fa3f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzM1MTU0Mw==", "bodyText": "There are some unused imports in here.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1582#discussion_r553351543", "createdAt": "2021-01-07T14:13:16Z", "author": {"login": "JulianKast"}, "path": "javaSE/javaSE/src/main/java/com/smartdevicelink/managers/file/FileManager.java", "diffHunk": "@@ -41,24 +41,14 @@\n import com.smartdevicelink.util.DebugTool;\n import com.smartdevicelink.util.FileUtls;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11a80c269f9f33cdca03faa9764477477d07fa3f"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzM1MzM3NA==", "bodyText": "Do you mean to have all this extra space between file and its description in the JavaDoscs? I think the autoFormatter does this and I noticed this throughout this PR.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1582#discussion_r553353374", "createdAt": "2021-01-07T14:16:19Z", "author": {"login": "JulianKast"}, "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "diffHunk": "@@ -431,40 +463,60 @@ public void uploadArtworks(List<SdlArtwork> files, final MultipleFileCompletionL\n     }\n \n     /**\n-     * Check if an SdlFile has been uploaded to core\n+     * Checks if an artwork needs to be uploaded to Core. The artwork should not be sent to Core if\n+     * the artwork is already on Core or if the artwork is not on Core after the maximum number of\n+     * repeated upload attempts has been reached.\n      *\n-     * @param file SdlFile\n-     * @return boolean that tells whether file has been uploaded to core (true) or not (false)\n+     * @param file                   The file to be uploaded to Core", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11a80c269f9f33cdca03faa9764477477d07fa3f"}, "originalPosition": 661}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f64e43dc02722b48d0ae211eaa3eac0a49d0f4d8", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/f64e43dc02722b48d0ae211eaa3eac0a49d0f4d8", "committedDate": "2021-01-07T15:23:12Z", "message": "Add log message when file upload failes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e9d421efa41635fb9f26276a69d5cf6f1e9f0b1", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/5e9d421efa41635fb9f26276a69d5cf6f1e9f0b1", "committedDate": "2021-01-07T15:45:55Z", "message": "Remove unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c4a24d3b3e82a5b6c8299aa8b3b10f224cb64f2", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/6c4a24d3b3e82a5b6c8299aa8b3b10f224cb64f2", "committedDate": "2021-01-07T15:53:58Z", "message": "Merge branch 'develop' into feature/file_manager_refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2076d116208214d92424e2f652337ecab0104e16", "author": {"user": {"login": "bilal-alsharifi", "name": "Bilal Alsharifi"}}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/2076d116208214d92424e2f652337ecab0104e16", "committedDate": "2021-01-07T16:04:44Z", "message": "Add check to make sure file name is not null"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzNzgxOTg3", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1582#pullrequestreview-563781987", "createdAt": "2021-01-07T19:53:49Z", "commit": {"oid": "2076d116208214d92424e2f652337ecab0104e16"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2032, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}