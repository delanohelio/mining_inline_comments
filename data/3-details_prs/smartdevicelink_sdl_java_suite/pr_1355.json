{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMzI3MjE5", "number": 1355, "title": "iOS alignment/lock screen", "bodyText": "Fixes #1342\nThis PR is ready for review.\nRisk\nThis PR makes no API changes.\nTesting Plan\n\n I have verified that I have not introduced new warnings in this PR (or explain why below)\n I have run the unit tests with this PR\n I have tested this PR against Core and verified behavior (if applicable, if not applicable, explain why below).\n I have tested Android, Java SE, and Java EE\n\nCore Tests\nEnable Driver distraction when testing to get the lock screen to appear.\nSummary\nChange the LockScreen icon to match iOS. Calculates color contrast to change icon color and text to white or black.\nCLA\n\n I have signed the CLA", "createdAt": "2020-05-19T19:44:13Z", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355", "merged": true, "mergeCommit": {"oid": "230737e50c21d7de5e25f8fdb3ac1a8c77d06aff"}, "closed": true, "closedAt": "2020-05-29T16:47:40Z", "author": {"login": "JulianKast"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABci5y5EgH2gAyNDIwMzI3MjE5OmEyZjRkNGQ3ZWM1YzdlM2I4NGU4MzI5M2UxYTU0YTE1MjhhNzM5ZDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclcEX-AFqTQxOTQwOTIxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a2f4d4d7ec5c7e3b84e83293e1a54a1528a739d5", "author": {"user": null}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/a2f4d4d7ec5c7e3b84e83293e1a54a1528a739d5", "committedDate": "2020-05-19T19:39:41Z", "message": "Changes LocScreen Icon to align with iOS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01020dbf402f4200f257e6a09b0256a9409411ee", "author": {"user": null}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/01020dbf402f4200f257e6a09b0256a9409411ee", "committedDate": "2020-05-19T20:52:10Z", "message": "Fixed issue with TextColor for warning message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa501a41a2b296963b0d62686c31047d106f6701", "author": {"user": null}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/fa501a41a2b296963b0d62686c31047d106f6701", "committedDate": "2020-05-19T20:54:04Z", "message": "Fixed Formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38324c820fb86cb842e0b42a886db5afb0f8b6fa", "author": {"user": null}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/38324c820fb86cb842e0b42a886db5afb0f8b6fa", "committedDate": "2020-05-20T21:08:13Z", "message": "Updated Icon scaling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NDA5MjE3", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#pullrequestreview-419409217", "createdAt": "2020-05-27T16:35:14Z", "commit": {"oid": "38324c820fb86cb842e0b42a886db5afb0f8b6fa"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjozNToxNFrOGbTY7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjo0MDoxNFrOGbTpdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4MjQxNA==", "bodyText": "Do we typically reference stack overflow in the code like this?", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r431282414", "createdAt": "2020-05-27T16:35:14Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "diffHunk": "@@ -158,19 +168,85 @@ public void initializeActivity(Intent intent){\n \t\t\t\tString warningMsg = intent.getStringExtra(KEY_LOCKSCREEN_WARNING_MSG);\n \t\t\t\tif (mIsDismissible) {\n \t\t\t\t\tsetLockscreenWarningMessage(warningMsg);\n+\t\t\t\t} else if (!useWhiteIconAndTextColor) {\n+\t\t\t\t\tsetTextColorBlack();\n \t\t\t\t}\n \t\t\t}\n \t\t}\n \t}\n \n-\tprivate void changeBackgroundColor(int customColor) {\n+\t/**\n+\t *  Sets the lockScreen logo\n+\t */\n+\tprivate void setSdlLogo() {\n+\t\tImageView lockScreen_iv = findViewById(R.id.lockscreen_image);\n+\t\tDrawable sdlIcon = getResources().getDrawable(R.drawable.sdl_lockscreen_icon);\n+\t\t// Checks color contrast and determines if the logo should be black or white\n+\t\tif (useWhiteIconAndTextColor) {\n+\t\t\tint color = Color.parseColor(\"#ffffff\");\n+\n+\t\t\tint red = (color & 0xFF0000) / 0xFFFF;\n+\t\t\tint green = (color & 0xFF00) / 0xFF;\n+\t\t\tint blue = color & 0xFF;\n+\n+\t\t\tfloat[] matrix = {0, 0, 0, 0, red,\n+\t\t\t\t\t0, 0, 0, 0, green,\n+\t\t\t\t\t0, 0, 0, 0, blue,\n+\t\t\t\t\t0, 0, 0, 1, 0};\n+\n+\t\t\tColorFilter colorFilter = new ColorMatrixColorFilter(matrix);\n+\t\t\tsdlIcon.setColorFilter(colorFilter);\n+\t\t}\n+\t\tlockScreen_iv.setImageDrawable(sdlIcon);\n+\t}\n+\n+\t/**\n+\t * Changes the text color to white on the lockScreen\n+\t */\n+\tprivate void setTextColorBlack() {\n+\t\tTextView tv = findViewById(R.id.lockscreen_text);\n+\t\ttv.setTextColor(Color.parseColor(\"#000000\"));\n+\t}\n+\n+\t/**\n+\t *  Calculates the contrast of the background to determine if the Icon and Text color\n+\t *  should be white or black\n+\t * @return True if Background and Icon should be white, False if black\n+\t */\n+\tprivate boolean shouldUseWhiteForegroundForBackgroundColor() {\n+\t\tfloat r = Color.red(backgroundColor) / 255f;\n+\t\tfloat b = Color.blue(backgroundColor) / 255f;\n+\t\tfloat g = Color.green(backgroundColor) / 255f;\n+\n+\t\t// http://stackoverflow.com/a/3943023", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38324c820fb86cb842e0b42a886db5afb0f8b6fa"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4NjY0Ng==", "bodyText": "Should \"#394e60\" be some sort of magic number? or maybe we can name backgroundColor something like defaultBackgroundColor", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r431286646", "createdAt": "2020-05-27T16:40:14Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "diffHunk": "@@ -64,6 +69,9 @@\n \tprivate static final int MIN_SWIPE_DISTANCE = 200;\n \tprivate boolean mIsDismissible;\n \tprivate GestureDetector mGestureDetector;\n+\tprivate int backgroundColor = Color.parseColor(\"#394e60\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38324c820fb86cb842e0b42a886db5afb0f8b6fa"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2162, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}