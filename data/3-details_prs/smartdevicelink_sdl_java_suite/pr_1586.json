{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2MjQyNjQ3", "number": 1586, "title": "Override Clone, Equals, and hashcode for RPCStruct", "bodyText": "Fixes #116\nThis PR is [ready] for review.\nRisk\nThis PR makes [minor] API changes.\nTesting Plan\n\n I have verified that I have not introduced new warnings in this PR (or explain why below)\n I have run the unit tests with this PR\n I have tested this PR against Core and verified behavior (if applicable, if not applicable, explain why below).\n I have tested Android, Java SE, and Java EE\n\nUnit Tests\nAdded Unit tests to RPCStructTests to verify new method behaviors\nSummary\nThis PR adds methods to the RPCStruct class to override the Clone, Equals, and hashCode methods.\nRPCStruct now implements Clonable and the clone() method will create a deepCopy of RPCStruct when called.\nequals() is now overriden and can be used to compare two RPCStruct objects\nhashCode() will return the hashCode of the store in the RPCStruct\nCLA\n\n I have signed the CLA", "createdAt": "2020-12-10T20:40:54Z", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1586", "merged": true, "mergeCommit": {"oid": "06bbf7e3733a55b99ddd4d1ba2ce2b51c76b000a"}, "closed": true, "closedAt": "2021-01-07T16:58:36Z", "author": {"login": "RHenigan"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk42exAH2gAyNTM2MjQyNjQ3OmExMDQyNTE4NDJlNmVmZTM3Y2FjZDBlODJhZjdjOGMyNjhkMDc1M2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtM12BAH2gAyNTM2MjQyNjQ3OmMzYTkwNTdjZGIwNDAzZDk3NDc3YjMyZmJlYjVmMjcwZWQzNTY1ZTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a104251842e6efe37cacd0e82af7c8c268d0753d", "author": {"user": null}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/a104251842e6efe37cacd0e82af7c8c268d0753d", "committedDate": "2020-12-10T19:52:42Z", "message": "Add copy, equals and hashcode methods to rpcstruct"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NjU2MzEz", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1586#pullrequestreview-556656313", "createdAt": "2020-12-21T20:52:00Z", "commit": {"oid": "a104251842e6efe37cacd0e82af7c8c268d0753d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMDo1MjowMFrOIJlkqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMDo1MjowMFrOIJlkqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkyMzY4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        clone.setBulkData(_bulkData);\n          \n          \n            \n                        clone.setBulkData(_bulkData);\n          \n          \n            \n                        clone.store = (Hashtable<String, Object>) store.clone();", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1586#discussion_r546923689", "createdAt": "2020-12-21T20:52:00Z", "author": {"login": "JulianKast"}, "path": "base/src/main/java/com/smartdevicelink/proxy/RPCStruct.java", "diffHunk": "@@ -375,4 +378,43 @@ public Long getLong(String key) {\n         }\r\n         return null;\r\n     }\r\n+\r\n+    @Override\r\n+    public RPCStruct clone() {\r\n+        try {\r\n+            RPCStruct clone = (RPCStruct) super.clone();\r\n+            clone.setPayloadProtected(protectedPayload);\r\n+            clone.setBulkData(_bulkData);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a104251842e6efe37cacd0e82af7c8c268d0753d"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxNzk1NzU0", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1586#pullrequestreview-561795754", "createdAt": "2021-01-05T13:42:16Z", "commit": {"oid": "a104251842e6efe37cacd0e82af7c8c268d0753d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQxMzo0MjoxNlrOIOXppQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQxMzo0NTozNVrOIOXxGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTkzODQ2OQ==", "bodyText": "Can you add some JavaDocs method headers to added mehtods", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1586#discussion_r551938469", "createdAt": "2021-01-05T13:42:16Z", "author": {"login": "JulianKast"}, "path": "base/src/main/java/com/smartdevicelink/proxy/RPCStruct.java", "diffHunk": "@@ -375,4 +378,43 @@ public Long getLong(String key) {\n         }\r\n         return null;\r\n     }\r\n+\r\n+    @Override\r\n+    public RPCStruct clone() {\r\n+        try {\r\n+            RPCStruct clone = (RPCStruct) super.clone();\r\n+            clone.setPayloadProtected(protectedPayload);\r\n+            clone.setBulkData(_bulkData);\r\n+            return clone;\r\n+        } catch (CloneNotSupportedException e) {\r\n+            DebugTool.logError(\"RPCStruct\", \"Failed to clone: \" + e);\r\n+            return null;\r\n+        }\r\n+    }\r\n+\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a104251842e6efe37cacd0e82af7c8c268d0753d"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTkzOTE2NQ==", "bodyText": "Should we also copy the store?", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1586#discussion_r551939165", "createdAt": "2021-01-05T13:43:25Z", "author": {"login": "JulianKast"}, "path": "base/src/main/java/com/smartdevicelink/proxy/RPCStruct.java", "diffHunk": "@@ -375,4 +378,43 @@ public Long getLong(String key) {\n         }\r\n         return null;\r\n     }\r\n+\r\n+    @Override\r\n+    public RPCStruct clone() {\r\n+        try {\r\n+            RPCStruct clone = (RPCStruct) super.clone();\r\n+            clone.setPayloadProtected(protectedPayload);\r\n+            clone.setBulkData(_bulkData);\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkyMzY4OQ=="}, "originalCommit": {"oid": "a104251842e6efe37cacd0e82af7c8c268d0753d"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTk0MDM3Ng==", "bodyText": "It might be better if you created another object here and used that to compare instead of hard coding a number.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1586#discussion_r551940376", "createdAt": "2021-01-05T13:45:35Z", "author": {"login": "JulianKast"}, "path": "android/sdl_android/src/androidTest/java/com/smartdevicelink/test/proxy/RPCStructTests.java", "diffHunk": "@@ -183,4 +184,61 @@ public void testGetDouble() {\n             fail(e.getMessage());\n         }\n     }\n+\n+    public void testClone() {\n+        Hashtable<String, Object> map = new Hashtable<>();\n+        String key = \"test\";\n+        Integer value = 42;\n+        map.put(key, value);\n+\n+        RPCStruct rpcStruct = new RPCStruct(map);\n+        rpcStruct.setPayloadProtected(true);\n+        RPCStruct rpcClone = rpcStruct.clone();\n+\n+        assertEquals(rpcStruct.getStore().get(\"test\"), rpcClone.getStore().get(\"test\"));\n+        assertTrue(rpcClone.isPayloadProtected());\n+    }\n+\n+    public void testHashCode() {\n+        Hashtable<String, Object> map = new Hashtable<>();\n+        String key = \"test\";\n+        Integer value = 42;\n+        map.put(key, value);\n+\n+        RPCStruct rpcStruct = new RPCStruct(map);\n+\n+        Hashtable<String, Object> map2 = new Hashtable<>();\n+        String key2 = \"test2\";\n+        Integer value2 = 24;\n+        map2.put(key2, value2);\n+\n+        RPCStruct rpcStruct2 = new RPCStruct(map2);\n+\n+        assertEquals(rpcStruct.hashCode(), 3556536);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a104251842e6efe37cacd0e82af7c8c268d0753d"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3a9057cdb0403d97477b32fbeb5f270ed3565e9", "author": {"user": null}, "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/c3a9057cdb0403d97477b32fbeb5f270ed3565e9", "committedDate": "2021-01-05T15:41:30Z", "message": "Fix Review feedback (add javadocs)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2036, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}