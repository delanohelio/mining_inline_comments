{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NDg2ODI3", "number": 1303, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoxMToyN1rODmq99A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxODo0ODo1NlrODmz78A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODc2NDY4OnYy", "diffSide": "RIGHT", "path": "javaSE/src/main/java/com/smartdevicelink/managers/file/filetypes/SdlFile.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoxMToyN1rOF0OE5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoxMToyN1rOF0OE5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDMwMDkwMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public boolean isOverwrite() {\n          \n          \n            \n                public boolean getOverwrite() {", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1303#discussion_r390300903", "createdAt": "2020-03-10T13:11:27Z", "author": {"login": "bilal-alsharifi"}, "path": "javaSE/src/main/java/com/smartdevicelink/managers/file/filetypes/SdlFile.java", "diffHunk": "@@ -185,4 +187,20 @@ public void setStaticIcon(boolean staticIcon) {\n     public boolean isStaticIcon() {\n         return isStaticIcon;\n     }\n+\n+    /**\n+     * Gets the overwrite property for an SdlFile by default its set to true\n+     * @return a boolean value that indicates if a file can be overwritten.\n+     */\n+    public boolean isOverwrite() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "738af48f45a92ac568a075a8ef44a4e31a68f11d"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODc2NTg3OnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/file/filetypes/SdlFile.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoxMTo0NFrOF0OFqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoxMTo0NFrOF0OFqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDMwMTA5Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public boolean isOverwrite() {\n          \n          \n            \n                public boolean getOverwrite() {", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1303#discussion_r390301097", "createdAt": "2020-03-10T13:11:44Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/file/filetypes/SdlFile.java", "diffHunk": "@@ -219,4 +221,20 @@ public void setStaticIcon(boolean staticIcon) {\n     public boolean isStaticIcon() {\n         return isStaticIcon;\n     }\n+\n+    /**\n+     * Gets the overwrite property for an SdlFile by default its set to true\n+     * @return a boolean value that indicates if a file can be overwritten.\n+     */\n+    public boolean isOverwrite() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "738af48f45a92ac568a075a8ef44a4e31a68f11d"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTI1NzYxOnYy", "diffSide": "RIGHT", "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNDo1OTozMlrOF0S2Lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNDo1OTozMlrOF0S2Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM3OTA1NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tLog.w(TAG, \"Files that have already uploaded and have an Overwrite property set to false will not be re-Upload\");\n          \n          \n            \n            \t\t\t\tLog.w(TAG, String.format(\"%s has already been uploaded and the overwrite property is set to false. It will not be uploaded again\", file.getName()));", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1303#discussion_r390379054", "createdAt": "2020-03-10T14:59:32Z", "author": {"login": "bilal-alsharifi"}, "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "diffHunk": "@@ -392,13 +402,23 @@ public void uploadFiles(@NonNull List<? extends SdlFile> files, final MultipleFi\n \t\t}\n \t\tfinal List<PutFile> putFileRequests = new ArrayList<>();\n \t\tfor (SdlFile file : files) {\n-\t\t\tif (!file.isStaticIcon()) {\n-\t\t\t\tputFileRequests.add(createPutFile(file));\n+\t\t\tif (file.isStaticIcon()) {\n+\t\t\t\tLog.w(TAG, \"Static icons don't need to be uploaded\");\n+\t\t\t\tcontinue;\n \t\t\t}\n+\t\t\t// In sdl_ios: HAX: [#827](https://github.com/smartdevicelink/sdl_ios/issues/827) Older versions of Core had a bug where list files would cache incorrectly.\n+\t\t\t// This led to attempted uploads failing due to the system thinking they were already there when they were not.\n+\t\t\tif (!file.isPersistent() && !hasUploadedFile(file)) {\n+\t\t\t\tfile.setOverwrite(true);\n+\t\t\t}\n+\t\t\tif (!file.isOverwrite() && hasUploadedFile(file)) {\n+\t\t\t\tLog.w(TAG, \"Files that have already uploaded and have an Overwrite property set to false will not be re-Upload\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "738af48f45a92ac568a075a8ef44a4e31a68f11d"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTI1ODc3OnYy", "diffSide": "RIGHT", "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNDo1OTo1MlrOF0S3Bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNDo1OTo1MlrOF0S3Bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM3OTI3MQ==", "bodyText": "it is better to print the name to know which file exactly is not being uploaded.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tLog.w(TAG, \"Static icons don't need to be uploaded\");\n          \n          \n            \n            \t\t\t\tLog.w(TAG, String.format(\"%s is a static icon and doesn't need to be uploaded\", file.getName()));", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1303#discussion_r390379271", "createdAt": "2020-03-10T14:59:52Z", "author": {"login": "bilal-alsharifi"}, "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "diffHunk": "@@ -392,13 +402,23 @@ public void uploadFiles(@NonNull List<? extends SdlFile> files, final MultipleFi\n \t\t}\n \t\tfinal List<PutFile> putFileRequests = new ArrayList<>();\n \t\tfor (SdlFile file : files) {\n-\t\t\tif (!file.isStaticIcon()) {\n-\t\t\t\tputFileRequests.add(createPutFile(file));\n+\t\t\tif (file.isStaticIcon()) {\n+\t\t\t\tLog.w(TAG, \"Static icons don't need to be uploaded\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "738af48f45a92ac568a075a8ef44a4e31a68f11d"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTI2NzA3OnYy", "diffSide": "RIGHT", "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTowMTozMlrOF0S8Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNTowMzozNlrOF0TCWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM4MDU5OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tLog.w(TAG, \"Files that have already uploaded and have an Overwrite property set to false will not be re-Upload\");\n          \n          \n            \n            \t\t\tLog.w(TAG, String.format(\"%s has already been uploaded and the overwrite property is set to false. It will not be uploaded again\", file.getName()));", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1303#discussion_r390380599", "createdAt": "2020-03-10T15:01:32Z", "author": {"login": "bilal-alsharifi"}, "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "diffHunk": "@@ -329,6 +329,16 @@ public void uploadFile(@NonNull final SdlFile file, final CompletionListener lis\n \t\t\tlistener.onComplete(true);\n \t\t\treturn;\n \t\t}\n+\t\t// In sdl_ios: HAX: [#827](https://github.com/smartdevicelink/sdl_ios/issues/827) Older versions of Core had a bug where list files would cache incorrectly.\n+\t\t// This led to attempted uploads failing due to the system thinking they were already there when they were not.\n+\t\tif (!file.isPersistent() && !hasUploadedFile(file)) {\n+\t\t\tfile.setOverwrite(true);\n+\t\t}\n+\t\tif (!file.isOverwrite() && hasUploadedFile(file)) {\n+\t\t\tLog.w(TAG, \"Files that have already uploaded and have an Overwrite property set to false will not be re-Upload\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "738af48f45a92ac568a075a8ef44a4e31a68f11d"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM4MjE3MQ==", "bodyText": "Can we also update the static icon warning message to show the file name?", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1303#discussion_r390382171", "createdAt": "2020-03-10T15:03:36Z", "author": {"login": "bilal-alsharifi"}, "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "diffHunk": "@@ -329,6 +329,16 @@ public void uploadFile(@NonNull final SdlFile file, final CompletionListener lis\n \t\t\tlistener.onComplete(true);\n \t\t\treturn;\n \t\t}\n+\t\t// In sdl_ios: HAX: [#827](https://github.com/smartdevicelink/sdl_ios/issues/827) Older versions of Core had a bug where list files would cache incorrectly.\n+\t\t// This led to attempted uploads failing due to the system thinking they were already there when they were not.\n+\t\tif (!file.isPersistent() && !hasUploadedFile(file)) {\n+\t\t\tfile.setOverwrite(true);\n+\t\t}\n+\t\tif (!file.isOverwrite() && hasUploadedFile(file)) {\n+\t\t\tLog.w(TAG, \"Files that have already uploaded and have an Overwrite property set to false will not be re-Upload\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM4MDU5OQ=="}, "originalCommit": {"oid": "738af48f45a92ac568a075a8ef44a4e31a68f11d"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMDIzNDA4OnYy", "diffSide": "RIGHT", "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxODo0ODo1NlrOF0ceQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxODo0ODo1NlrOF0ceQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDUzNjc2OA==", "bodyText": "In java suite, this not necessary since we are covering that case in hasUploadedFile(). So that if statement can be removed. This also applies to uploadFiles()", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1303#discussion_r390536768", "createdAt": "2020-03-10T18:48:56Z", "author": {"login": "bilal-alsharifi"}, "path": "base/src/main/java/com/smartdevicelink/managers/file/BaseFileManager.java", "diffHunk": "@@ -329,6 +329,16 @@ public void uploadFile(@NonNull final SdlFile file, final CompletionListener lis\n \t\t\tlistener.onComplete(true);\n \t\t\treturn;\n \t\t}\n+\t\t// In sdl_ios: HAX: [#827](https://github.com/smartdevicelink/sdl_ios/issues/827) Older versions of Core had a bug where list files would cache incorrectly.\n+\t\t// This led to attempted uploads failing due to the system thinking they were already there when they were not.\n+\t\tif (!file.isPersistent() && !hasUploadedFile(file)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21450c41b8bcbf95d826a2aa8687bd195e85862d"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4352, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}