{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NDE4MzM0", "number": 1347, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoxOTo1N1rOD9fFig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODowNzoxMVrOD96ecA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1Nzk5MDUwOnYy", "diffSide": "RIGHT", "path": "android/hello_sdl_android/src/main/java/com/sdl/hellosdlandroid/SdlReceiver.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoxOTo1N1rOGXAmxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMToyNzo0MFrOGXIEVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4MDM1Nw==", "bodyText": "unused import", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426780357", "createdAt": "2020-05-18T17:19:57Z", "author": {"login": "bilal-alsharifi"}, "path": "android/hello_sdl_android/src/main/java/com/sdl/hellosdlandroid/SdlReceiver.java", "diffHunk": "@@ -1,12 +1,15 @@\n package com.sdl.hellosdlandroid;\n \n+import android.Manifest;\n import android.content.Context;\n import android.content.Intent;\n import android.os.Build;\n import android.util.Log;\n \n import com.smartdevicelink.transport.SdlBroadcastReceiver;\n import com.smartdevicelink.transport.SdlRouterService;\n+import com.smartdevicelink.util.AndroidTools;\n+import com.smartdevicelink.util.DebugTool;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwMjYxMw==", "bodyText": "updated", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426902613", "createdAt": "2020-05-18T21:27:40Z", "author": {"login": "RHenigan"}, "path": "android/hello_sdl_android/src/main/java/com/sdl/hellosdlandroid/SdlReceiver.java", "diffHunk": "@@ -1,12 +1,15 @@\n package com.sdl.hellosdlandroid;\n \n+import android.Manifest;\n import android.content.Context;\n import android.content.Intent;\n import android.os.Build;\n import android.util.Log;\n \n import com.smartdevicelink.transport.SdlBroadcastReceiver;\n import com.smartdevicelink.transport.SdlRouterService;\n+import com.smartdevicelink.util.AndroidTools;\n+import com.smartdevicelink.util.DebugTool;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4MDM1Nw=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODAyMjY1OnYy", "diffSide": "LEFT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzoyOTozNFrOGXA7mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMToyOTowNVrOGXIG2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4NTY4OA==", "bodyText": "Can we remove that change if it only changes the location of the method in the same file? to make it easier to track the actual changes.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426785688", "createdAt": "2020-05-18T17:29:34Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterService.java", "diffHunk": "@@ -1484,37 +1484,14 @@ private void enterForeground(String content, long chronometerLength, boolean ong\n \t\t\t\t}\n \t\t\t\treturn;\n \t\t\t}\n-\t\t\tsafeStartForeground(FOREGROUND_SERVICE_ID, notification);\n+\n+\t\t\tsafeStartForeground(FOREGROUND_SERVICE_ID, builder.build());\n \t\t\tisForeground = true;\n \n \t\t}\n  \n     }\n \n-\t/**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwMzI1OA==", "bodyText": "Moved back, I had put it back to the wrong place after I had originally gotten rid of it.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426903258", "createdAt": "2020-05-18T21:29:05Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterService.java", "diffHunk": "@@ -1484,37 +1484,14 @@ private void enterForeground(String content, long chronometerLength, boolean ong\n \t\t\t\t}\n \t\t\t\treturn;\n \t\t\t}\n-\t\t\tsafeStartForeground(FOREGROUND_SERVICE_ID, notification);\n+\n+\t\t\tsafeStartForeground(FOREGROUND_SERVICE_ID, builder.build());\n \t\t\tisForeground = true;\n \n \t\t}\n  \n     }\n \n-\t/**", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4NTY4OA=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODAzOTEwOnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzozNDoxOVrOGXBFnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMToyOToyN1rOGXIHdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4ODI1Mg==", "bodyText": "Is there a reason for changing the param from notification to builder.build()? as the notification will already be built at this point.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426788252", "createdAt": "2020-05-18T17:34:19Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterService.java", "diffHunk": "@@ -1484,37 +1484,14 @@ private void enterForeground(String content, long chronometerLength, boolean ong\n \t\t\t\t}\n \t\t\t\treturn;\n \t\t\t}\n-\t\t\tsafeStartForeground(FOREGROUND_SERVICE_ID, notification);\n+\n+\t\t\tsafeStartForeground(FOREGROUND_SERVICE_ID, builder.build());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwMzQxNA==", "bodyText": "This was a mistake, thanks for catching it", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426903414", "createdAt": "2020-05-18T21:29:27Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterService.java", "diffHunk": "@@ -1484,37 +1484,14 @@ private void enterForeground(String content, long chronometerLength, boolean ong\n \t\t\t\t}\n \t\t\t\treturn;\n \t\t\t}\n-\t\t\tsafeStartForeground(FOREGROUND_SERVICE_ID, notification);\n+\n+\t\t\tsafeStartForeground(FOREGROUND_SERVICE_ID, builder.build());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4ODI1Mg=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODA2OTI4OnYy", "diffSide": "RIGHT", "path": "android/hello_sdl_android/src/main/java/com/sdl/hellosdlandroid/SdlService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0MzozOVrOGXBYkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMToyOTozNFrOGXIHqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5MzEwNg==", "bodyText": "unused import", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426793106", "createdAt": "2020-05-18T17:43:39Z", "author": {"login": "bilal-alsharifi"}, "path": "android/hello_sdl_android/src/main/java/com/sdl/hellosdlandroid/SdlService.java", "diffHunk": "@@ -6,6 +6,7 @@\n import android.app.NotificationManager;\n import android.app.Service;\n import android.content.Context;\n+import android.content.ContextWrapper;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwMzQ2NQ==", "bodyText": "updated", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426903465", "createdAt": "2020-05-18T21:29:34Z", "author": {"login": "RHenigan"}, "path": "android/hello_sdl_android/src/main/java/com/sdl/hellosdlandroid/SdlService.java", "diffHunk": "@@ -6,6 +6,7 @@\n import android.app.NotificationManager;\n import android.app.Service;\n import android.content.Context;\n+import android.content.ContextWrapper;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5MzEwNg=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODA3ODU1OnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNzo0NjoxNFrOGXBeNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMToyOTo0N1rOGXIIEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5NDU0OQ==", "bodyText": "unused import", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426794549", "createdAt": "2020-05-18T17:46:14Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -44,6 +47,8 @@\n import android.graphics.Bitmap;\n import android.graphics.BitmapFactory;\n import android.os.BatteryManager;\n+import android.os.Build;\n+import android.support.v4.app.NotificationCompat;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwMzU2OA==", "bodyText": "updated", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426903568", "createdAt": "2020-05-18T21:29:47Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -44,6 +47,8 @@\n import android.graphics.Bitmap;\n import android.graphics.BitmapFactory;\n import android.os.BatteryManager;\n+import android.os.Build;\n+import android.support.v4.app.NotificationCompat;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc5NDU0OQ=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODE0MTI5OnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxODowNDo1NlrOGXCFqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTozMDo1NVrOGXIJ7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgwNDY1MQ==", "bodyText": "unused import", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426804651", "createdAt": "2020-05-18T18:04:56Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -57,7 +62,12 @@\n import java.util.HashMap;\n import java.util.List;\n \n+import static com.smartdevicelink.transport.TransportConstants.SDL_NOTIFICATION_CHANNEL_ID;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwNDA0NQ==", "bodyText": "updated", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426904045", "createdAt": "2020-05-18T21:30:55Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -57,7 +62,12 @@\n import java.util.HashMap;\n import java.util.List;\n \n+import static com.smartdevicelink.transport.TransportConstants.SDL_NOTIFICATION_CHANNEL_ID;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgwNDY1MQ=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODE0MTk1OnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxODowNTowNlrOGXCGCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMToyOTo1NVrOGXIIOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgwNDc0Ng==", "bodyText": "unused variable", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426804746", "createdAt": "2020-05-18T18:05:06Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -57,7 +62,12 @@\n import java.util.HashMap;\n import java.util.List;\n \n+import static com.smartdevicelink.transport.TransportConstants.SDL_NOTIFICATION_CHANNEL_ID;\n+\n public class AndroidTools {\n+\n+\tpublic static final String SDL_NOTIFICATION_CHANNEL_ID \t\t\t\t\t\t= \"sdl_notification_channel\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwMzYxMQ==", "bodyText": "updated", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426903611", "createdAt": "2020-05-18T21:29:55Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -57,7 +62,12 @@\n import java.util.HashMap;\n import java.util.List;\n \n+import static com.smartdevicelink.transport.TransportConstants.SDL_NOTIFICATION_CHANNEL_ID;\n+\n public class AndroidTools {\n+\n+\tpublic static final String SDL_NOTIFICATION_CHANNEL_ID \t\t\t\t\t\t= \"sdl_notification_channel\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgwNDc0Ng=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODIyMzY5OnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterStatusProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxODozMDo1M1rOGXC5mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTozMToyOVrOGXIK1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxNzk0Ng==", "bodyText": "We should reuse the static function\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tint permission = context.checkPermission(Manifest.permission.FOREGROUND_SERVICE, android.os.Process.myPid(), android.os.Process.myUid());\n          \n          \n            \n            \t\t\tif (permission != -1) {\n          \n          \n            \n            \t\t\t\tAndroidTools.safeStartForegroundService(context, bindingIntent);\n          \n          \n            \n            \t\t\t} else {\n          \n          \n            \n            \t\t\t\tDebugTool.logError(\"Foreground Permissions Not Enabled: will not start foreground permissions\");\n          \n          \n            \n            \t\t\t}\n          \n          \n            \n            \t\t\tAndroidTools.safeStartForegroundService(context, bindingIntent);", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426817946", "createdAt": "2020-05-18T18:30:53Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterStatusProvider.java", "diffHunk": "@@ -134,8 +136,12 @@ private boolean bindToService(){\n \t\t}else {\n \t\t\tbindingIntent.putExtra(FOREGROUND_EXTRA, true);\n \t\t\tSdlBroadcastReceiver.setForegroundExceptionHandler(); //Prevent ANR in case the OS takes too long to start the service\n-\t\t\tcontext.startForegroundService(bindingIntent);\n-\n+\t\t\tint permission = context.checkPermission(Manifest.permission.FOREGROUND_SERVICE, android.os.Process.myPid(), android.os.Process.myUid());\n+\t\t\tif (permission != -1) {\n+\t\t\t\tAndroidTools.safeStartForegroundService(context, bindingIntent);\n+\t\t\t} else {\n+\t\t\t\tDebugTool.logError(\"Foreground Permissions Not Enabled: will not start foreground permissions\");\n+\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwNDI3OQ==", "bodyText": "updated", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426904279", "createdAt": "2020-05-18T21:31:29Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/transport/SdlRouterStatusProvider.java", "diffHunk": "@@ -134,8 +136,12 @@ private boolean bindToService(){\n \t\t}else {\n \t\t\tbindingIntent.putExtra(FOREGROUND_EXTRA, true);\n \t\t\tSdlBroadcastReceiver.setForegroundExceptionHandler(); //Prevent ANR in case the OS takes too long to start the service\n-\t\t\tcontext.startForegroundService(bindingIntent);\n-\n+\t\t\tint permission = context.checkPermission(Manifest.permission.FOREGROUND_SERVICE, android.os.Process.myPid(), android.os.Process.myUid());\n+\t\t\tif (permission != -1) {\n+\t\t\t\tAndroidTools.safeStartForegroundService(context, bindingIntent);\n+\t\t\t} else {\n+\t\t\t\tDebugTool.logError(\"Foreground Permissions Not Enabled: will not start foreground permissions\");\n+\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxNzk0Ng=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODIzMDkyOnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxODozMzoxNlrOGXC-NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNDoyMDo0OVrOGXiwlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxOTEyNQ==", "bodyText": "This function is not needed and should be removed as it already exists in the RS class. Adding new public APIs should always be avoided when possible.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426819125", "createdAt": "2020-05-18T18:33:16Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -191,4 +201,60 @@ public static Bitmap downloadImage(String urlStr) throws IOException {\n \t\tbis.close();\n \t\treturn result;\n \t}\n+\n+\t/**\n+\t * This is a wrapper around the startForeground method. In the case that the notification\n+\t * is null, or a notification was unable to be created we will still attempt to call the\n+\t * startForeground method in hopes that Android will not throw the System Exception. In the\n+\t * event that the user is on Android 28+ it will check the FOREGROUND_SERVICE permissions\n+\t * before trying to call startForeground.\n+\t * @param service a service instance\n+\t * @param context a context instance\n+\t * @param id notification channel id\n+\t * @param notification the notification to display when in the foreground\n+\t */\n+\tpublic static void safeStartForeground(Service service, Context context, int id, Notification notification){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwNDM3MQ==", "bodyText": "removed", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426904371", "createdAt": "2020-05-18T21:31:41Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -191,4 +201,60 @@ public static Bitmap downloadImage(String urlStr) throws IOException {\n \t\tbis.close();\n \t\treturn result;\n \t}\n+\n+\t/**\n+\t * This is a wrapper around the startForeground method. In the case that the notification\n+\t * is null, or a notification was unable to be created we will still attempt to call the\n+\t * startForeground method in hopes that Android will not throw the System Exception. In the\n+\t * event that the user is on Android 28+ it will check the FOREGROUND_SERVICE permissions\n+\t * before trying to call startForeground.\n+\t * @param service a service instance\n+\t * @param context a context instance\n+\t * @param id notification channel id\n+\t * @param notification the notification to display when in the foreground\n+\t */\n+\tpublic static void safeStartForeground(Service service, Context context, int id, Notification notification){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxOTEyNQ=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwNDY3NA==", "bodyText": "to investigate if this logic is needed in SdlRouterService implementation", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426904674", "createdAt": "2020-05-18T21:32:23Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -191,4 +201,60 @@ public static Bitmap downloadImage(String urlStr) throws IOException {\n \t\tbis.close();\n \t\treturn result;\n \t}\n+\n+\t/**\n+\t * This is a wrapper around the startForeground method. In the case that the notification\n+\t * is null, or a notification was unable to be created we will still attempt to call the\n+\t * startForeground method in hopes that Android will not throw the System Exception. In the\n+\t * event that the user is on Android 28+ it will check the FOREGROUND_SERVICE permissions\n+\t * before trying to call startForeground.\n+\t * @param service a service instance\n+\t * @param context a context instance\n+\t * @param id notification channel id\n+\t * @param notification the notification to display when in the foreground\n+\t */\n+\tpublic static void safeStartForeground(Service service, Context context, int id, Notification notification){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxOTEyNQ=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMzOTkyNQ==", "bodyText": "According to android documentation startForeground startForeground will not actually put the service in the started state, startService or startForegroundService needs to be called first which will verify the permissions", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r427339925", "createdAt": "2020-05-19T14:20:49Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -191,4 +201,60 @@ public static Bitmap downloadImage(String urlStr) throws IOException {\n \t\tbis.close();\n \t\treturn result;\n \t}\n+\n+\t/**\n+\t * This is a wrapper around the startForeground method. In the case that the notification\n+\t * is null, or a notification was unable to be created we will still attempt to call the\n+\t * startForeground method in hopes that Android will not throw the System Exception. In the\n+\t * event that the user is on Android 28+ it will check the FOREGROUND_SERVICE permissions\n+\t * before trying to call startForeground.\n+\t * @param service a service instance\n+\t * @param context a context instance\n+\t * @param id notification channel id\n+\t * @param notification the notification to display when in the foreground\n+\t */\n+\tpublic static void safeStartForeground(Service service, Context context, int id, Notification notification){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxOTEyNQ=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODIzOTA4OnYy", "diffSide": "RIGHT", "path": "android/hello_sdl_android/src/main/java/com/sdl/hellosdlandroid/SdlService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxODozNTo1N1rOGXDDRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTozMjo1MVrOGXINSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgyMDQyMQ==", "bodyText": "This change should be reverted back as the flow will not reach this phase if the permission is not added && the Android version is P or above. Also, the AndroidTools import should be removed.", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426820421", "createdAt": "2020-05-18T18:35:57Z", "author": {"login": "bilal-alsharifi"}, "path": "android/hello_sdl_android/src/main/java/com/sdl/hellosdlandroid/SdlService.java", "diffHunk": "@@ -105,7 +107,11 @@ public void enterForeground() {\n \t\t\t\t\t\t.setContentTitle(\"Connected through SDL\")\n \t\t\t\t\t\t.setSmallIcon(R.drawable.ic_sdl)\n \t\t\t\t\t\t.build();\n-\t\t\t\tstartForeground(FOREGROUND_SERVICE_ID, serviceNotification);\n+\t\t\t\ttry {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwNDkwNg==", "bodyText": "updated", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426904906", "createdAt": "2020-05-18T21:32:51Z", "author": {"login": "RHenigan"}, "path": "android/hello_sdl_android/src/main/java/com/sdl/hellosdlandroid/SdlService.java", "diffHunk": "@@ -105,7 +107,11 @@ public void enterForeground() {\n \t\t\t\t\t\t.setContentTitle(\"Connected through SDL\")\n \t\t\t\t\t\t.setSmallIcon(R.drawable.ic_sdl)\n \t\t\t\t\t\t.build();\n-\t\t\t\tstartForeground(FOREGROUND_SERVICE_ID, serviceNotification);\n+\t\t\t\ttry {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgyMDQyMQ=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1ODI5MjEzOnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxODo1MzowMVrOGXDlQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTozMzowNVrOGXINxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgyOTEyMw==", "bodyText": "This needs some modifications:\n\nIt should check the permission when Android >= P (currently it checks if Android < P)\nIt should still throw the exception in debug mode to let developers know that they are missing the permission\nAdd RequiresApi annotation as the method should only be used for Android O and above\n\n@RequiresApi(api = Build.VERSION_CODES.O)\npublic static ComponentName safeStartForegroundService(Context context, Intent intent) {\n    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {\n        boolean inDebugMode = (0 != (context.getApplicationInfo().flags & ApplicationInfo.FLAG_DEBUGGABLE));\n        boolean permissionGranted = PackageManager.PERMISSION_GRANTED == context.checkPermission(Manifest.permission.FOREGROUND_SERVICE, android.os.Process.myPid(), android.os.Process.myUid());\n        if (inDebugMode || permissionGranted) {\n            return context.startForegroundService(intent);\n        } else {\n            DebugTool.logError(\"App missing FOREGROUND_SERVICE Permissions\");\n        }\n    } else if (Build.VERSION.SDK_INT == Build.VERSION_CODES.O) {\n        return context.startForegroundService(intent);\n    } else if (Build.VERSION.SDK_INT < Build.VERSION_CODES.O) {\n        DebugTool.logError(\"startForegroundService() call requires Android Oreo or newer\");\n    }\n    return null;\n}", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426829123", "createdAt": "2020-05-18T18:53:01Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -191,4 +201,60 @@ public static Bitmap downloadImage(String urlStr) throws IOException {\n \t\tbis.close();\n \t\treturn result;\n \t}\n+\n+\t/**\n+\t * This is a wrapper around the startForeground method. In the case that the notification\n+\t * is null, or a notification was unable to be created we will still attempt to call the\n+\t * startForeground method in hopes that Android will not throw the System Exception. In the\n+\t * event that the user is on Android 28+ it will check the FOREGROUND_SERVICE permissions\n+\t * before trying to call startForeground.\n+\t * @param service a service instance\n+\t * @param context a context instance\n+\t * @param id notification channel id\n+\t * @param notification the notification to display when in the foreground\n+\t */\n+\tpublic static void safeStartForeground(Service service, Context context, int id, Notification notification){\n+\t\tint permission = PackageManager.PERMISSION_GRANTED;\n+\t\tif (Build.VERSION.SDK_INT < Build.VERSION_CODES.P) {\n+\t\t\tpermission = context.checkPermission(Manifest.permission.FOREGROUND_SERVICE, android.os.Process.myPid(), android.os.Process.myUid());\n+\t\t}\n+\t\ttry{\n+\t\t\tif (permission != PackageManager.PERMISSION_DENIED) {\n+\t\t\t\tservice.startForeground(id, notification);\n+\t\t\t\tDebugTool.logInfo(\"Entered the foreground - \" + System.currentTimeMillis());\n+\t\t\t} else {\n+\t\t\t\tDebugTool.logError(\"App missing FOREGROUND_SERVICE Permissions\");\n+\t\t\t}\n+\t\t}catch (Exception e){\n+\t\t\tDebugTool.logError(\"Unable to start service in foreground\", e);\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * This is a wrapper around the startForegroundService method. In the\n+\t * event that the user is on Android 28+ it will check the FOREGROUND_SERVICE permissions\n+\t * before trying to call startForegroundService.\n+\t * @param context a context instance\n+\t * @param intent the foreground service intent\n+\t * @return a ComponentName, an identifier for the started service, will return null is service\n+\t * was unable to start\n+\t */\n+\tpublic static ComponentName safeStartForegroundService(Context context, Intent intent){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwNTAzMQ==", "bodyText": "Changes made", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r426905031", "createdAt": "2020-05-18T21:33:05Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -191,4 +201,60 @@ public static Bitmap downloadImage(String urlStr) throws IOException {\n \t\tbis.close();\n \t\treturn result;\n \t}\n+\n+\t/**\n+\t * This is a wrapper around the startForeground method. In the case that the notification\n+\t * is null, or a notification was unable to be created we will still attempt to call the\n+\t * startForeground method in hopes that Android will not throw the System Exception. In the\n+\t * event that the user is on Android 28+ it will check the FOREGROUND_SERVICE permissions\n+\t * before trying to call startForeground.\n+\t * @param service a service instance\n+\t * @param context a context instance\n+\t * @param id notification channel id\n+\t * @param notification the notification to display when in the foreground\n+\t */\n+\tpublic static void safeStartForeground(Service service, Context context, int id, Notification notification){\n+\t\tint permission = PackageManager.PERMISSION_GRANTED;\n+\t\tif (Build.VERSION.SDK_INT < Build.VERSION_CODES.P) {\n+\t\t\tpermission = context.checkPermission(Manifest.permission.FOREGROUND_SERVICE, android.os.Process.myPid(), android.os.Process.myUid());\n+\t\t}\n+\t\ttry{\n+\t\t\tif (permission != PackageManager.PERMISSION_DENIED) {\n+\t\t\t\tservice.startForeground(id, notification);\n+\t\t\t\tDebugTool.logInfo(\"Entered the foreground - \" + System.currentTimeMillis());\n+\t\t\t} else {\n+\t\t\t\tDebugTool.logError(\"App missing FOREGROUND_SERVICE Permissions\");\n+\t\t\t}\n+\t\t}catch (Exception e){\n+\t\t\tDebugTool.logError(\"Unable to start service in foreground\", e);\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * This is a wrapper around the startForegroundService method. In the\n+\t * event that the user is on Android 28+ it will check the FOREGROUND_SERVICE permissions\n+\t * before trying to call startForegroundService.\n+\t * @param context a context instance\n+\t * @param intent the foreground service intent\n+\t * @return a ComponentName, an identifier for the started service, will return null is service\n+\t * was unable to start\n+\t */\n+\tpublic static ComponentName safeStartForegroundService(Context context, Intent intent){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgyOTEyMw=="}, "originalCommit": {"oid": "2607bdd8e6aae1043512429572ae61461232c7e1"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MjQxMzQ5OnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzo1MDozMFrOGXr4BA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNzo1MDozMFrOGXr4BA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ4OTI4NA==", "bodyText": "I have just learned that there are two versions of Android O (VERSION_CODES.O= 26 & VERSION_CODES.O_MR1 = 27) and they both don't require the foreground permission. So I updated the code accordingly\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t} else if (Build.VERSION.SDK_INT == Build.VERSION_CODES.O) {\n          \n          \n            \n            \t\t\treturn context.startForegroundService(intent);\n          \n          \n            \n            \t\t} else if (Build.VERSION.SDK_INT < Build.VERSION_CODES.O) {\n          \n          \n            \n            \t\t\tDebugTool.logError(\"startForegroundService() call requires Android Oreo or newer\");\n          \n          \n            \n            \t\t}\n          \n          \n            \n            \t\t} else if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {\n          \n          \n            \n            \t\t\treturn context.startForegroundService(intent);\n          \n          \n            \n            \t\t}", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r427489284", "createdAt": "2020-05-19T17:50:30Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -191,4 +196,31 @@ public static Bitmap downloadImage(String urlStr) throws IOException {\n \t\tbis.close();\n \t\treturn result;\n \t}\n+\n+\t/**\n+\t * This is a wrapper around the startForegroundService method. In the\n+\t * event that the user is on Android 28+ it will check the FOREGROUND_SERVICE permissions\n+\t * before trying to call startForegroundService.\n+\t * @param context a context instance\n+\t * @param intent the foreground service intent\n+\t * @return a ComponentName, an identifier for the started service, will return null is service\n+\t * was unable to start\n+\t */\n+\t@RequiresApi(api = Build.VERSION_CODES.O)\n+\tpublic static ComponentName safeStartForegroundService(Context context, Intent intent) {\n+\t\tif (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {\n+\t\t\tboolean inDebugMode = (0 != (context.getApplicationInfo().flags & ApplicationInfo.FLAG_DEBUGGABLE));\n+\t\t\tboolean permissionGranted = PackageManager.PERMISSION_GRANTED == context.checkPermission(Manifest.permission.FOREGROUND_SERVICE, android.os.Process.myPid(), android.os.Process.myUid());\n+\t\t\tif (inDebugMode || permissionGranted) {\n+\t\t\t\treturn context.startForegroundService(intent);\n+\t\t\t} else {\n+\t\t\t\tDebugTool.logError(\"App missing FOREGROUND_SERVICE Permissions\");\n+\t\t\t}\n+\t\t} else if (Build.VERSION.SDK_INT == Build.VERSION_CODES.O) {\n+\t\t\treturn context.startForegroundService(intent);\n+\t\t} else if (Build.VERSION.SDK_INT < Build.VERSION_CODES.O) {\n+\t\t\tDebugTool.logError(\"startForegroundService() call requires Android Oreo or newer\");\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8d3bfc7559e123048e532bbe937fcd0518a22e2"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MjQ3NzkyOnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODowNzoxMVrOGXsg6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODowNzoxMVrOGXsg6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ5OTc1NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tDebugTool.logError(\"App missing FOREGROUND_SERVICE Permissions\");\n          \n          \n            \n            \t\t\t\tDebugTool.logError(\"App is missing FOREGROUND_SERVICE Permission. Sdl will not work.\");", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1347#discussion_r427499755", "createdAt": "2020-05-19T18:07:11Z", "author": {"login": "bilal-alsharifi"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/util/AndroidTools.java", "diffHunk": "@@ -191,4 +196,29 @@ public static Bitmap downloadImage(String urlStr) throws IOException {\n \t\tbis.close();\n \t\treturn result;\n \t}\n+\n+\t/**\n+\t * This is a wrapper around the startForegroundService method. In the\n+\t * event that the user is on Android 28+ it will check the FOREGROUND_SERVICE permissions\n+\t * before trying to call startForegroundService.\n+\t * @param context a context instance\n+\t * @param intent the foreground service intent\n+\t * @return a ComponentName, an identifier for the started service, will return null is service\n+\t * was unable to start\n+\t */\n+\t@RequiresApi(api = Build.VERSION_CODES.O)\n+\tpublic static ComponentName safeStartForegroundService(Context context, Intent intent) {\n+\t\tif (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {\n+\t\t\tboolean inDebugMode = (0 != (context.getApplicationInfo().flags & ApplicationInfo.FLAG_DEBUGGABLE));\n+\t\t\tboolean permissionGranted = PackageManager.PERMISSION_GRANTED == context.checkPermission(Manifest.permission.FOREGROUND_SERVICE, android.os.Process.myPid(), android.os.Process.myUid());\n+\t\t\tif (inDebugMode || permissionGranted) {\n+\t\t\t\treturn context.startForegroundService(intent);\n+\t\t\t} else {\n+\t\t\t\tDebugTool.logError(\"App missing FOREGROUND_SERVICE Permissions\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a88586083a9fdc41038ec0c0b86202331621e43f"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4390, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}