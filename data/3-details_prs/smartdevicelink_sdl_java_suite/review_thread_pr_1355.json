{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMzI3MjE5", "number": 1355, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjozNToxNFrOEALoyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjo0MDoxNFrOEALypw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NjI2MTIzOnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjozNToxNFrOGbTY7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNzoyNDoyN1rOGbVXsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4MjQxNA==", "bodyText": "Do we typically reference stack overflow in the code like this?", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r431282414", "createdAt": "2020-05-27T16:35:14Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "diffHunk": "@@ -158,19 +168,85 @@ public void initializeActivity(Intent intent){\n \t\t\t\tString warningMsg = intent.getStringExtra(KEY_LOCKSCREEN_WARNING_MSG);\n \t\t\t\tif (mIsDismissible) {\n \t\t\t\t\tsetLockscreenWarningMessage(warningMsg);\n+\t\t\t\t} else if (!useWhiteIconAndTextColor) {\n+\t\t\t\t\tsetTextColorBlack();\n \t\t\t\t}\n \t\t\t}\n \t\t}\n \t}\n \n-\tprivate void changeBackgroundColor(int customColor) {\n+\t/**\n+\t *  Sets the lockScreen logo\n+\t */\n+\tprivate void setSdlLogo() {\n+\t\tImageView lockScreen_iv = findViewById(R.id.lockscreen_image);\n+\t\tDrawable sdlIcon = getResources().getDrawable(R.drawable.sdl_lockscreen_icon);\n+\t\t// Checks color contrast and determines if the logo should be black or white\n+\t\tif (useWhiteIconAndTextColor) {\n+\t\t\tint color = Color.parseColor(\"#ffffff\");\n+\n+\t\t\tint red = (color & 0xFF0000) / 0xFFFF;\n+\t\t\tint green = (color & 0xFF00) / 0xFF;\n+\t\t\tint blue = color & 0xFF;\n+\n+\t\t\tfloat[] matrix = {0, 0, 0, 0, red,\n+\t\t\t\t\t0, 0, 0, 0, green,\n+\t\t\t\t\t0, 0, 0, 0, blue,\n+\t\t\t\t\t0, 0, 0, 1, 0};\n+\n+\t\t\tColorFilter colorFilter = new ColorMatrixColorFilter(matrix);\n+\t\t\tsdlIcon.setColorFilter(colorFilter);\n+\t\t}\n+\t\tlockScreen_iv.setImageDrawable(sdlIcon);\n+\t}\n+\n+\t/**\n+\t * Changes the text color to white on the lockScreen\n+\t */\n+\tprivate void setTextColorBlack() {\n+\t\tTextView tv = findViewById(R.id.lockscreen_text);\n+\t\ttv.setTextColor(Color.parseColor(\"#000000\"));\n+\t}\n+\n+\t/**\n+\t *  Calculates the contrast of the background to determine if the Icon and Text color\n+\t *  should be white or black\n+\t * @return True if Background and Icon should be white, False if black\n+\t */\n+\tprivate boolean shouldUseWhiteForegroundForBackgroundColor() {\n+\t\tfloat r = Color.red(backgroundColor) / 255f;\n+\t\tfloat b = Color.blue(backgroundColor) / 255f;\n+\t\tfloat g = Color.green(backgroundColor) / 255f;\n+\n+\t\t// http://stackoverflow.com/a/3943023", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38324c820fb86cb842e0b42a886db5afb0f8b6fa"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMxNDg2NA==", "bodyText": "This code was pulled from IOS and minor changes were made to convert to Java. Since IOS has it, I left it", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r431314864", "createdAt": "2020-05-27T17:24:27Z", "author": {"login": "JulianKast"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "diffHunk": "@@ -158,19 +168,85 @@ public void initializeActivity(Intent intent){\n \t\t\t\tString warningMsg = intent.getStringExtra(KEY_LOCKSCREEN_WARNING_MSG);\n \t\t\t\tif (mIsDismissible) {\n \t\t\t\t\tsetLockscreenWarningMessage(warningMsg);\n+\t\t\t\t} else if (!useWhiteIconAndTextColor) {\n+\t\t\t\t\tsetTextColorBlack();\n \t\t\t\t}\n \t\t\t}\n \t\t}\n \t}\n \n-\tprivate void changeBackgroundColor(int customColor) {\n+\t/**\n+\t *  Sets the lockScreen logo\n+\t */\n+\tprivate void setSdlLogo() {\n+\t\tImageView lockScreen_iv = findViewById(R.id.lockscreen_image);\n+\t\tDrawable sdlIcon = getResources().getDrawable(R.drawable.sdl_lockscreen_icon);\n+\t\t// Checks color contrast and determines if the logo should be black or white\n+\t\tif (useWhiteIconAndTextColor) {\n+\t\t\tint color = Color.parseColor(\"#ffffff\");\n+\n+\t\t\tint red = (color & 0xFF0000) / 0xFFFF;\n+\t\t\tint green = (color & 0xFF00) / 0xFF;\n+\t\t\tint blue = color & 0xFF;\n+\n+\t\t\tfloat[] matrix = {0, 0, 0, 0, red,\n+\t\t\t\t\t0, 0, 0, 0, green,\n+\t\t\t\t\t0, 0, 0, 0, blue,\n+\t\t\t\t\t0, 0, 0, 1, 0};\n+\n+\t\t\tColorFilter colorFilter = new ColorMatrixColorFilter(matrix);\n+\t\t\tsdlIcon.setColorFilter(colorFilter);\n+\t\t}\n+\t\tlockScreen_iv.setImageDrawable(sdlIcon);\n+\t}\n+\n+\t/**\n+\t * Changes the text color to white on the lockScreen\n+\t */\n+\tprivate void setTextColorBlack() {\n+\t\tTextView tv = findViewById(R.id.lockscreen_text);\n+\t\ttv.setTextColor(Color.parseColor(\"#000000\"));\n+\t}\n+\n+\t/**\n+\t *  Calculates the contrast of the background to determine if the Icon and Text color\n+\t *  should be white or black\n+\t * @return True if Background and Icon should be white, False if black\n+\t */\n+\tprivate boolean shouldUseWhiteForegroundForBackgroundColor() {\n+\t\tfloat r = Color.red(backgroundColor) / 255f;\n+\t\tfloat b = Color.blue(backgroundColor) / 255f;\n+\t\tfloat g = Color.green(backgroundColor) / 255f;\n+\n+\t\t// http://stackoverflow.com/a/3943023", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4MjQxNA=="}, "originalCommit": {"oid": "38324c820fb86cb842e0b42a886db5afb0f8b6fa"}, "originalPosition": 105}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NjI4NjQ3OnYy", "diffSide": "RIGHT", "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjo0MDoxNFrOGbTpdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjo0MToyMFrOGckK4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4NjY0Ng==", "bodyText": "Should \"#394e60\" be some sort of magic number? or maybe we can name backgroundColor something like defaultBackgroundColor", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r431286646", "createdAt": "2020-05-27T16:40:14Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "diffHunk": "@@ -64,6 +69,9 @@\n \tprivate static final int MIN_SWIPE_DISTANCE = 200;\n \tprivate boolean mIsDismissible;\n \tprivate GestureDetector mGestureDetector;\n+\tprivate int backgroundColor = Color.parseColor(\"#394e60\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38324c820fb86cb842e0b42a886db5afb0f8b6fa"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMxNTY4OQ==", "bodyText": "\"394e60\" is the default color, That can be changed if a custom color is set in initialzeActivity(). Before it was set in the XML but due to limitations with having to support older version of Android, I had to put it in the activity. Since the variable can be either a custom color or the default I think leaving it as backgroundColor is appropriate", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r431315689", "createdAt": "2020-05-27T17:25:43Z", "author": {"login": "JulianKast"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "diffHunk": "@@ -64,6 +69,9 @@\n \tprivate static final int MIN_SWIPE_DISTANCE = 200;\n \tprivate boolean mIsDismissible;\n \tprivate GestureDetector mGestureDetector;\n+\tprivate int backgroundColor = Color.parseColor(\"#394e60\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4NjY0Ng=="}, "originalCommit": {"oid": "38324c820fb86cb842e0b42a886db5afb0f8b6fa"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjYwNTkyMA==", "bodyText": "Agreed, I was missing some of the context", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r432605920", "createdAt": "2020-05-29T16:41:20Z", "author": {"login": "RHenigan"}, "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "diffHunk": "@@ -64,6 +69,9 @@\n \tprivate static final int MIN_SWIPE_DISTANCE = 200;\n \tprivate boolean mIsDismissible;\n \tprivate GestureDetector mGestureDetector;\n+\tprivate int backgroundColor = Color.parseColor(\"#394e60\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4NjY0Ng=="}, "originalCommit": {"oid": "38324c820fb86cb842e0b42a886db5afb0f8b6fa"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4399, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}