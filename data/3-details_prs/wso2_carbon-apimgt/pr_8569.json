{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNjg4MDUy", "number": 8569, "title": "[Front Port] Fix UI tryout issue when gateway environment name is renamed", "bodyText": "NOTE!\n\nShould apply this PR also\n#8608\n\nfix wso2/product-apim#8094\nFront port: wso2-support/carbon-apimgt#2069\nPurpose\n\nCorrect gateway environment not found exception in store REST API\nHandle invalid state of API's gateway environment\nHandle server error in dev-portal UI\nSelect a valid gateway environment when creating an API from OpenAPI, GraphQL and Sample\n\nSamples\n\nGET | {{storeHost}}/api/am/store/v1/apis/{{api-id}}/swagger?environmentName=staging\n\n{\n    \"code\": 404,\n    \"message\": \"Not Found\",\n    \"description\": \"Gateway environment 'staging' not found\",\n    \"moreInfo\": \"\",\n    \"error\": []\n}\n\nGET | {{storeHost}}/api/am/store/v1/apis/{{api-id}}/swagger\n\n200 OK\n\n\nGET | {{storeHost}}/api/am/store/v1/apis/{{api-id}}/swagger?environmentName=dev\n\n200 OK", "createdAt": "2020-05-25T10:56:08Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8569", "merged": true, "mergeCommit": {"oid": "bef574c125e3fe306a05941438c7431a43461f73"}, "closed": true, "closedAt": "2020-05-26T04:31:13Z", "author": {"login": "renuka-fernando"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckt91_AFqTQxNzYzMzk4OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcltFp1gFqTQyMDA1OTg3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NjMzOTg5", "url": "https://github.com/wso2/carbon-apimgt/pull/8569#pullrequestreview-417633989", "createdAt": "2020-05-25T11:00:38Z", "commit": {"oid": "6815d36e44d7fe6367a347a961dac0ef7af0d625"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89625f20f9ed7ec14b4dbf118bd85241d56decc0", "author": {"user": {"login": "renuka-fernando", "name": "Renuka Piyumal Fernando"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/89625f20f9ed7ec14b4dbf118bd85241d56decc0", "committedDate": "2020-05-25T11:25:49Z", "message": "Fix UI tryout issue when gateway environment name is renamed\nwso2/product-apim#8094"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6815d36e44d7fe6367a347a961dac0ef7af0d625", "author": {"user": {"login": "renuka-fernando", "name": "Renuka Piyumal Fernando"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/6815d36e44d7fe6367a347a961dac0ef7af0d625", "committedDate": "2020-05-25T10:48:59Z", "message": "Fix UI tryout issue when gateway environment name is renamed\nwso2/product-apim#8094"}, "afterCommit": {"oid": "89625f20f9ed7ec14b4dbf118bd85241d56decc0", "author": {"user": {"login": "renuka-fernando", "name": "Renuka Piyumal Fernando"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/89625f20f9ed7ec14b4dbf118bd85241d56decc0", "committedDate": "2020-05-25T11:25:49Z", "message": "Fix UI tryout issue when gateway environment name is renamed\nwso2/product-apim#8094"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTYzMTIz", "url": "https://github.com/wso2/carbon-apimgt/pull/8569#pullrequestreview-417963123", "createdAt": "2020-05-26T04:31:01Z", "commit": {"oid": "89625f20f9ed7ec14b4dbf118bd85241d56decc0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMDU5ODc1", "url": "https://github.com/wso2/carbon-apimgt/pull/8569#pullrequestreview-420059875", "createdAt": "2020-05-28T12:33:11Z", "commit": {"oid": "89625f20f9ed7ec14b4dbf118bd85241d56decc0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMjozMzoxMVrOGby94w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMjozMzoxMVrOGby94w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc5OTc3OQ==", "bodyText": "This is fixed with removing defaultMessage={serverError} in #8597", "url": "https://github.com/wso2/carbon-apimgt/pull/8569#discussion_r431799779", "createdAt": "2020-05-28T12:33:11Z", "author": {"login": "renuka-fernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.store.feature/src/main/resources/devportal/source/src/app/components/Apis/Details/ApiConsole/ApiConsole.jsx", "diffHunk": "@@ -308,20 +305,26 @@ class ApiConsole extends React.Component {\n     render() {\n         const { classes } = this.props;\n         const {\n-            api, notFound, swagger, securitySchemeType, selectedEnvironment, labels, environments, scopes,\n+            api, serverError, swagger, securitySchemeType, selectedEnvironment, labels, environments, scopes,\n             username, password, productionAccessToken, sandboxAccessToken, selectedKeyType,\n         } = this.state;\n         const user = AuthManager.getUser();\n         const downloadSwagger = JSON.stringify({ ...swagger });\n         const downloadLink = 'data:text/json;charset=utf-8, ' + encodeURIComponent(downloadSwagger);\n         const fileName = 'swagger.json';\n \n+        if (serverError) {\n+            return (\n+                <Typography variant='h4' className={classes.titleSub}>\n+                    <FormattedMessage id='Apis.Details.ApiConsole.ApiConsole.error' defaultMessage={serverError} />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89625f20f9ed7ec14b4dbf118bd85241d56decc0"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2795, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}