{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NDA2Njg2", "number": 8510, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwODoxMzoyMFrOD8xpXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwODoxMzoyMFrOD8xpXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1MDU0NTU4OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/EndpointRegistryImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwODoxMzoyMFrOGV66SA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwODoxMzoyMFrOGV66SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTYzODQ3Mg==", "bodyText": "I think when the registry name already exists in DB, it will throw 500, internal server error response. If so we need to change it to 409 Resource already exists", "url": "https://github.com/wso2/carbon-apimgt/pull/8510#discussion_r425638472", "createdAt": "2020-05-15T08:13:20Z", "author": {"login": "vithu30"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/EndpointRegistryImpl.java", "diffHunk": "@@ -191,10 +191,29 @@ public void deleteEndpointRegistryEntry(String entryId) throws APIManagementExce\n     /**\n      * {@inheritDoc}\n      */\n-    public void updateEndpointRegistry(String registryId, EndpointRegistryInfo endpointRegistryInfo) throws\n-            APIManagementException {\n+    public void updateEndpointRegistry(String registryId, String registryName, EndpointRegistryInfo\n+            endpointRegistryInfo) throws APIManagementException {\n+\n+        String tenantDomain = MultitenantUtils\n+                .getTenantDomain(APIUtil.replaceEmailDomainBack(endpointRegistryInfo.getOwner()));\n+        int tenantId;\n+        try {\n+            tenantId = ServiceReferenceHolder.getInstance().getRealmService().getTenantManager()\n+                    .getTenantId(tenantDomain);\n+            // if another registry with the updated name already exists, fail the operation.\n+            if (!registryName.equals(endpointRegistryInfo.getName()) &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83899f911b7cb36d32e88ee348338a2c27c5d57"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3390, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}