{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MTQyNTE4", "number": 8970, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDoxNjozN1rOENwRjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDoxOToyMVrOENwVQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyODU3ODcxOnYy", "diffSide": "RIGHT", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/TenantTheme/UploadTheme.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDoxNjozN1rOGwiRAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDozOTozNFrOGwjA8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0NjI0Mw==", "bodyText": "Do we need to initialize the state with an empty string ?", "url": "https://github.com/wso2/carbon-apimgt/pull/8970#discussion_r453546243", "createdAt": "2020-07-13T10:16:37Z", "author": {"login": "tmkasun"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/TenantTheme/UploadTheme.jsx", "diffHunk": "@@ -94,20 +115,47 @@ const useStyles = makeStyles((theme) => ({\n function UploadTheme() {\n     const classes = useStyles();\n     const [themeFile, setThemeFile] = useState([]);\n+    const [fileName, setFileName] = useState('');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a5d0e72dbb8fdfd52f83f045e10e21c71ba42b"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1ODUxMw==", "bodyText": "Fixed with 2d41afa", "url": "https://github.com/wso2/carbon-apimgt/pull/8970#discussion_r453558513", "createdAt": "2020-07-13T10:39:34Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/TenantTheme/UploadTheme.jsx", "diffHunk": "@@ -94,20 +115,47 @@ const useStyles = makeStyles((theme) => ({\n function UploadTheme() {\n     const classes = useStyles();\n     const [themeFile, setThemeFile] = useState([]);\n+    const [fileName, setFileName] = useState('');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0NjI0Mw=="}, "originalCommit": {"oid": "42a5d0e72dbb8fdfd52f83f045e10e21c71ba42b"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyODU4MzgyOnYy", "diffSide": "RIGHT", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/TenantTheme/UploadTheme.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDoxNzo1N1rOGwiT8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDoyMDowN1rOGwiYVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0Njk5Mw==", "bodyText": "Why do we need to remove the first character?", "url": "https://github.com/wso2/carbon-apimgt/pull/8970#discussion_r453546993", "createdAt": "2020-07-13T10:17:57Z", "author": {"login": "tmkasun"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/TenantTheme/UploadTheme.jsx", "diffHunk": "@@ -94,20 +115,47 @@ const useStyles = makeStyles((theme) => ({\n function UploadTheme() {\n     const classes = useStyles();\n     const [themeFile, setThemeFile] = useState([]);\n+    const [fileName, setFileName] = useState('');\n     const [isFileAccepted, setIsFileAccepted] = useState(false);\n-    const [isUplaodUnsuccessful, setIsUploadUnsuccessful] = useState(false);\n-\n+    const [isUploadUnsuccessful, setIsUploadUnsuccessful] = useState(false);\n+    const intl = useIntl();\n+    const restApi = new API();\n \n     const onDrop = (acceptedFile) => {\n         setIsFileAccepted(true);\n         setThemeFile(acceptedFile[0]);\n     };\n \n+    useEffect(() => {\n+        const tenantThemeContent = restApi.exportTenantTheme();\n+        tenantThemeContent.then((response) => {\n+            const tenantFileName = response.headers['content-disposition'].split('filename=')[1];\n+            setFileName(tenantFileName.slice(1, -1));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a5d0e72dbb8fdfd52f83f045e10e21c71ba42b"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0ODExOA==", "bodyText": "fileName comes as filename=\"test1.com\" so need to remove the \"", "url": "https://github.com/wso2/carbon-apimgt/pull/8970#discussion_r453548118", "createdAt": "2020-07-13T10:20:07Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/TenantTheme/UploadTheme.jsx", "diffHunk": "@@ -94,20 +115,47 @@ const useStyles = makeStyles((theme) => ({\n function UploadTheme() {\n     const classes = useStyles();\n     const [themeFile, setThemeFile] = useState([]);\n+    const [fileName, setFileName] = useState('');\n     const [isFileAccepted, setIsFileAccepted] = useState(false);\n-    const [isUplaodUnsuccessful, setIsUploadUnsuccessful] = useState(false);\n-\n+    const [isUploadUnsuccessful, setIsUploadUnsuccessful] = useState(false);\n+    const intl = useIntl();\n+    const restApi = new API();\n \n     const onDrop = (acceptedFile) => {\n         setIsFileAccepted(true);\n         setThemeFile(acceptedFile[0]);\n     };\n \n+    useEffect(() => {\n+        const tenantThemeContent = restApi.exportTenantTheme();\n+        tenantThemeContent.then((response) => {\n+            const tenantFileName = response.headers['content-disposition'].split('filename=')[1];\n+            setFileName(tenantFileName.slice(1, -1));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0Njk5Mw=="}, "originalCommit": {"oid": "42a5d0e72dbb8fdfd52f83f045e10e21c71ba42b"}, "originalPosition": 76}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyODU4ODE5OnYy", "diffSide": "RIGHT", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/TenantTheme/UploadTheme.jsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDoxOToyMVrOGwiWxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMDozOToyMVrOGwjAdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0NzcxNw==", "bodyText": "We can simplify this as\ntenantThemeContent.then(Utils.forceDownload)\n\nno need to create a lambda/arrow function there", "url": "https://github.com/wso2/carbon-apimgt/pull/8970#discussion_r453547717", "createdAt": "2020-07-13T10:19:21Z", "author": {"login": "tmkasun"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/TenantTheme/UploadTheme.jsx", "diffHunk": "@@ -94,20 +115,47 @@ const useStyles = makeStyles((theme) => ({\n function UploadTheme() {\n     const classes = useStyles();\n     const [themeFile, setThemeFile] = useState([]);\n+    const [fileName, setFileName] = useState('');\n     const [isFileAccepted, setIsFileAccepted] = useState(false);\n-    const [isUplaodUnsuccessful, setIsUploadUnsuccessful] = useState(false);\n-\n+    const [isUploadUnsuccessful, setIsUploadUnsuccessful] = useState(false);\n+    const intl = useIntl();\n+    const restApi = new API();\n \n     const onDrop = (acceptedFile) => {\n         setIsFileAccepted(true);\n         setThemeFile(acceptedFile[0]);\n     };\n \n+    useEffect(() => {\n+        const tenantThemeContent = restApi.exportTenantTheme();\n+        tenantThemeContent.then((response) => {\n+            const tenantFileName = response.headers['content-disposition'].split('filename=')[1];\n+            setFileName(tenantFileName.slice(1, -1));\n+        });\n+    }, []);\n+\n+    /**\n+     * Downloads Tenant Theme ZIP file.\n+     *\n+     */\n+    const handleDownloadTenantTheme = () => {\n+        const tenantThemeContent = restApi.exportTenantTheme();\n+        tenantThemeContent.then((response) => {\n+            Utils.forceDownload(response);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42a5d0e72dbb8fdfd52f83f045e10e21c71ba42b"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1ODM5MA==", "bodyText": "Fixed with 2d41afa", "url": "https://github.com/wso2/carbon-apimgt/pull/8970#discussion_r453558390", "createdAt": "2020-07-13T10:39:21Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/TenantTheme/UploadTheme.jsx", "diffHunk": "@@ -94,20 +115,47 @@ const useStyles = makeStyles((theme) => ({\n function UploadTheme() {\n     const classes = useStyles();\n     const [themeFile, setThemeFile] = useState([]);\n+    const [fileName, setFileName] = useState('');\n     const [isFileAccepted, setIsFileAccepted] = useState(false);\n-    const [isUplaodUnsuccessful, setIsUploadUnsuccessful] = useState(false);\n-\n+    const [isUploadUnsuccessful, setIsUploadUnsuccessful] = useState(false);\n+    const intl = useIntl();\n+    const restApi = new API();\n \n     const onDrop = (acceptedFile) => {\n         setIsFileAccepted(true);\n         setThemeFile(acceptedFile[0]);\n     };\n \n+    useEffect(() => {\n+        const tenantThemeContent = restApi.exportTenantTheme();\n+        tenantThemeContent.then((response) => {\n+            const tenantFileName = response.headers['content-disposition'].split('filename=')[1];\n+            setFileName(tenantFileName.slice(1, -1));\n+        });\n+    }, []);\n+\n+    /**\n+     * Downloads Tenant Theme ZIP file.\n+     *\n+     */\n+    const handleDownloadTenantTheme = () => {\n+        const tenantThemeContent = restApi.exportTenantTheme();\n+        tenantThemeContent.then((response) => {\n+            Utils.forceDownload(response);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0NzcxNw=="}, "originalCommit": {"oid": "42a5d0e72dbb8fdfd52f83f045e10e21c71ba42b"}, "originalPosition": 87}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3164, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}