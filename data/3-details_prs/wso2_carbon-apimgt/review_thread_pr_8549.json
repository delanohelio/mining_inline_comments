{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMjg2MTQ1", "number": 8549, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTowOTo0OFrOD-j0zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTowOTo0OFrOD-j0zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2OTI1MjYyOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/admin/v1/impl/ThrottlingApiServiceImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTowOTo0OFrOGYu-vA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNToxNTozMVrOGY2-IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU4ODczMg==", "bodyText": "Don't we need to throw 404 - handleResourceNotFoundError within else part to handle the case if the condition does not exist", "url": "https://github.com/wso2/carbon-apimgt/pull/8549#discussion_r428588732", "createdAt": "2020-05-21T11:09:48Z", "author": {"login": "vithu30"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/admin/v1/impl/ThrottlingApiServiceImpl.java", "diffHunk": "@@ -979,6 +987,48 @@ public Response throttlingBlacklistConditionIdDelete(String conditionId, String\n         return null;\n     }\n \n+    /**\n+     * Updates an existing condition status of a blocking condition\n+     *\n+     * @param conditionId       Id of the block condition\n+     * @param body              content to update\n+     * @param contentType       Content-Type header\n+     * @param ifMatch           If-Match header value\n+     * @param ifUnmodifiedSince If-Unmodified-Since header value\n+     * @return 200 response if successful\n+     */\n+    @Override\n+    public Response throttlingBlacklistConditionIdPatch(String conditionId, BlockingConditionStatusDTO body,\n+                                                        String contentType, String ifMatch, String ifUnmodifiedSince,\n+                                                        MessageContext messageContext) {\n+        try {\n+            APIProvider apiProvider = RestApiUtil.getLoggedInUserProvider();\n+            String username = RestApiUtil.getLoggedInUsername();\n+\n+            //This will give BlockConditionNotFoundException if there's no block condition exists with UUID\n+            BlockConditionsDTO existingCondition = apiProvider.getBlockConditionByUUID(conditionId);\n+            if (!RestApiAdminUtils.isBlockConditionAccessibleToUser(username, existingCondition)) {\n+                RestApiUtil.handleAuthorizationFailure(RestApiConstants.RESOURCE_BLOCK_CONDITION, conditionId, log);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13fc6762fe81c9ef5b0e1a69f8bfeff2b1a227ca"}, "originalPosition": 112}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODcxOTY0OQ==", "bodyText": "404 - handleResourceNotFoundError is handled in the catch block", "url": "https://github.com/wso2/carbon-apimgt/pull/8549#discussion_r428719649", "createdAt": "2020-05-21T15:15:31Z", "author": {"login": "Meruja"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/admin/v1/impl/ThrottlingApiServiceImpl.java", "diffHunk": "@@ -979,6 +987,48 @@ public Response throttlingBlacklistConditionIdDelete(String conditionId, String\n         return null;\n     }\n \n+    /**\n+     * Updates an existing condition status of a blocking condition\n+     *\n+     * @param conditionId       Id of the block condition\n+     * @param body              content to update\n+     * @param contentType       Content-Type header\n+     * @param ifMatch           If-Match header value\n+     * @param ifUnmodifiedSince If-Unmodified-Since header value\n+     * @return 200 response if successful\n+     */\n+    @Override\n+    public Response throttlingBlacklistConditionIdPatch(String conditionId, BlockingConditionStatusDTO body,\n+                                                        String contentType, String ifMatch, String ifUnmodifiedSince,\n+                                                        MessageContext messageContext) {\n+        try {\n+            APIProvider apiProvider = RestApiUtil.getLoggedInUserProvider();\n+            String username = RestApiUtil.getLoggedInUsername();\n+\n+            //This will give BlockConditionNotFoundException if there's no block condition exists with UUID\n+            BlockConditionsDTO existingCondition = apiProvider.getBlockConditionByUUID(conditionId);\n+            if (!RestApiAdminUtils.isBlockConditionAccessibleToUser(username, existingCondition)) {\n+                RestApiUtil.handleAuthorizationFailure(RestApiConstants.RESOURCE_BLOCK_CONDITION, conditionId, log);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODU4ODczMg=="}, "originalCommit": {"oid": "13fc6762fe81c9ef5b0e1a69f8bfeff2b1a227ca"}, "originalPosition": 112}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3431, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}