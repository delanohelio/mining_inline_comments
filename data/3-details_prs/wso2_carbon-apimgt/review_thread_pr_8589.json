{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MjMwOTUy", "number": 8589, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMzo1NToyMFrOEAWdiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMzo1NToyMFrOEAWdiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4ODAzNDY3OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/impl/EndpointRegistryImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMzo1NToyMFrOGbkyLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDoxMjoxOFrOGblAgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU2NzQwNg==", "bodyText": "Rather than checking for the existence and then creating the Registry, can't we simply fetch the registry and then create it if it's null?", "url": "https://github.com/wso2/carbon-apimgt/pull/8589#discussion_r431567406", "createdAt": "2020-05-28T03:55:20Z", "author": {"login": "jaadds"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/impl/EndpointRegistryImpl.java", "diffHunk": "@@ -113,24 +119,35 @@ public void deleteEndpointRegistry(String registryUUID) throws EndpointRegistryE\n     /**\n      * Returns details of all Endpoint Registries belong to a given tenant\n      *\n-     * @param name         Registry name\n-     * @param sortBy       Name of the sorting field\n-     * @param sortOrder    Order of sorting (asc or desc)\n-     * @param limit        Limit\n-     * @param offset       Offset\n      * @param tenantDomain\n      * @return A list of EndpointRegistryInfo objects\n      * @throws EndpointRegistryException if failed to get details of an Endpoint Registries\n      */\n-    public List<EndpointRegistryInfo> getEndpointRegistries(String name, String sortBy, String sortOrder,\n-                                                            int limit, int offset,\n-                                                            String tenantDomain) throws EndpointRegistryException {\n+    public List<EndpointRegistryInfo> getEndpointRegistries(String tenantDomain) throws EndpointRegistryException {\n \n         int tenantId;\n         try {\n             tenantId = ServiceReferenceHolder.getInstance().getRealmService().getTenantManager()\n                     .getTenantId(tenantDomain);\n-            return registryDAO.getEndpointRegistries(name, sortBy, sortOrder, limit, offset, tenantId);\n+            // Create the default registry if no registry found\n+            if (!registryDAO.isEndpointRegistryTypeExists(EndpointRegistryConstants.REGISTRY_TYPE_WSO2, tenantId) &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c21b7b834baace0284794e8da9a2b0fc875cc15e"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3MTA3NA==", "bodyText": "Fixed", "url": "https://github.com/wso2/carbon-apimgt/pull/8589#discussion_r431571074", "createdAt": "2020-05-28T04:12:18Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/impl/EndpointRegistryImpl.java", "diffHunk": "@@ -113,24 +119,35 @@ public void deleteEndpointRegistry(String registryUUID) throws EndpointRegistryE\n     /**\n      * Returns details of all Endpoint Registries belong to a given tenant\n      *\n-     * @param name         Registry name\n-     * @param sortBy       Name of the sorting field\n-     * @param sortOrder    Order of sorting (asc or desc)\n-     * @param limit        Limit\n-     * @param offset       Offset\n      * @param tenantDomain\n      * @return A list of EndpointRegistryInfo objects\n      * @throws EndpointRegistryException if failed to get details of an Endpoint Registries\n      */\n-    public List<EndpointRegistryInfo> getEndpointRegistries(String name, String sortBy, String sortOrder,\n-                                                            int limit, int offset,\n-                                                            String tenantDomain) throws EndpointRegistryException {\n+    public List<EndpointRegistryInfo> getEndpointRegistries(String tenantDomain) throws EndpointRegistryException {\n \n         int tenantId;\n         try {\n             tenantId = ServiceReferenceHolder.getInstance().getRealmService().getTenantManager()\n                     .getTenantId(tenantDomain);\n-            return registryDAO.getEndpointRegistries(name, sortBy, sortOrder, limit, offset, tenantId);\n+            // Create the default registry if no registry found\n+            if (!registryDAO.isEndpointRegistryTypeExists(EndpointRegistryConstants.REGISTRY_TYPE_WSO2, tenantId) &&", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU2NzQwNg=="}, "originalCommit": {"oid": "c21b7b834baace0284794e8da9a2b0fc875cc15e"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3467, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}