{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1OTA0NDQ2", "number": 8618, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxOTowNDoyMFrOEB4fpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwODowNzo0M1rOEa2XeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDA5NjM5OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/DefinitionValidator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxOTowNDoyMFrOGeAGCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNDoxMjoxMFrOGeLZnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDExMjAwOQ==", "bodyText": "Throw the Exceptions from the method signatures.", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434112009", "createdAt": "2020-06-02T19:04:20Z", "author": {"login": "jaadds"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/DefinitionValidator.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.apimgt.impl.endpoint.registry.util;\n+\n+import java.net.URL;\n+\n+/**\n+ * An API Definition Validator Interface\n+ */\n+public interface DefinitionValidator {\n+\n+    boolean validate(URL definitionUrl);\n+\n+    boolean validate(byte[] definition);\n+\n+    boolean validate(String definition);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5NzI0NA==", "bodyText": "Fixed in 169ace7", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434297244", "createdAt": "2020-06-03T04:12:10Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/DefinitionValidator.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.apimgt.impl.endpoint.registry.util;\n+\n+import java.net.URL;\n+\n+/**\n+ * An API Definition Validator Interface\n+ */\n+public interface DefinitionValidator {\n+\n+    boolean validate(URL definitionUrl);\n+\n+    boolean validate(byte[] definition);\n+\n+    boolean validate(String definition);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDExMjAwOQ=="}, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDA5NzQ2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/EndpointRegistryUtil.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxOTowNDozN1rOGeAGpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNDoxMzozM1rOGeLa0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDExMjE2NQ==", "bodyText": "Let the exception come through the validation.", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434112165", "createdAt": "2020-06-02T19:04:37Z", "author": {"login": "jaadds"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/EndpointRegistryUtil.java", "diffHunk": "@@ -32,4 +46,24 @@ public static void raiseResourceAlreadyExistsException(String msg) throws\n         throw new EndpointRegistryResourceAlreadyExistsException(msg);\n     }\n \n+    public static boolean isValidDefinition(URL definitionURL, String definitionType)\n+            throws DefinitionValidationException {\n+        DefinitionValidator definitionValidator = definitionValidatorMap.get(definitionType);\n+        if (definitionValidator != null) {\n+            return definitionValidator.validate(definitionURL);\n+        }\n+        throw new DefinitionValidationException(\"No Definition Validator found for the given definition type: '\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5NzU1Mw==", "bodyText": "throw new DefinitionValidationException(No Definition Validator found for...) is thrown if definitionValidator is null. So, cannot throw from validate method", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434297553", "createdAt": "2020-06-03T04:13:33Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/EndpointRegistryUtil.java", "diffHunk": "@@ -32,4 +46,24 @@ public static void raiseResourceAlreadyExistsException(String msg) throws\n         throw new EndpointRegistryResourceAlreadyExistsException(msg);\n     }\n \n+    public static boolean isValidDefinition(URL definitionURL, String definitionType)\n+            throws DefinitionValidationException {\n+        DefinitionValidator definitionValidator = definitionValidatorMap.get(definitionType);\n+        if (definitionValidator != null) {\n+            return definitionValidator.validate(definitionURL);\n+        }\n+        throw new DefinitionValidationException(\"No Definition Validator found for the given definition type: '\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDExMjE2NQ=="}, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDA5ODk1OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/GraphQLDefinitionValidator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxOTowNTowNFrOGeAHoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNDoxNDoxMVrOGeLbYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDExMjQxNg==", "bodyText": "Rather than capturing and logging this, throw a ValidationException.", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434112416", "createdAt": "2020-06-02T19:05:04Z", "author": {"login": "jaadds"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/GraphQLDefinitionValidator.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.apimgt.impl.endpoint.registry.util;\n+\n+import graphql.schema.GraphQLSchema;\n+import graphql.schema.idl.SchemaParser;\n+import graphql.schema.idl.TypeDefinitionRegistry;\n+import graphql.schema.idl.UnExecutableSchemaGenerator;\n+import graphql.schema.idl.errors.SchemaProblem;\n+import graphql.schema.validation.SchemaValidationError;\n+import graphql.schema.validation.SchemaValidator;\n+import org.apache.commons.io.IOUtils;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+\n+import java.io.IOException;\n+import java.net.URL;\n+import java.util.Set;\n+\n+/**\n+ * This class provides the functionality of validating GraphQL definitions\n+ */\n+public class GraphQLDefinitionValidator implements DefinitionValidator {\n+    private static final Log log = LogFactory.getLog(GraphQLDefinitionValidator.class);\n+\n+    @Override\n+    public boolean validate(URL definitionUrl) {\n+        boolean isValid = false;\n+        try {\n+            String definitionContent = IOUtils.toString(definitionUrl.openStream());\n+            isValid = validate(definitionContent);\n+        } catch (IOException e) {\n+            log.error(\"Error in reading content in the definition URL: \" + definitionUrl, e);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5NzY5Ng==", "bodyText": "Fixed in 169ace7", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434297696", "createdAt": "2020-06-03T04:14:11Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/GraphQLDefinitionValidator.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.apimgt.impl.endpoint.registry.util;\n+\n+import graphql.schema.GraphQLSchema;\n+import graphql.schema.idl.SchemaParser;\n+import graphql.schema.idl.TypeDefinitionRegistry;\n+import graphql.schema.idl.UnExecutableSchemaGenerator;\n+import graphql.schema.idl.errors.SchemaProblem;\n+import graphql.schema.validation.SchemaValidationError;\n+import graphql.schema.validation.SchemaValidator;\n+import org.apache.commons.io.IOUtils;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+\n+import java.io.IOException;\n+import java.net.URL;\n+import java.util.Set;\n+\n+/**\n+ * This class provides the functionality of validating GraphQL definitions\n+ */\n+public class GraphQLDefinitionValidator implements DefinitionValidator {\n+    private static final Log log = LogFactory.getLog(GraphQLDefinitionValidator.class);\n+\n+    @Override\n+    public boolean validate(URL definitionUrl) {\n+        boolean isValid = false;\n+        try {\n+            String definitionContent = IOUtils.toString(definitionUrl.openStream());\n+            isValid = validate(definitionContent);\n+        } catch (IOException e) {\n+            log.error(\"Error in reading content in the definition URL: \" + definitionUrl, e);\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDExMjQxNg=="}, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTIzMDc5OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/EndpointRegistryUtil.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMzo0OTo0OFrOGeLHJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNDoxNDoyMFrOGeLbfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5MjUxNw==", "bodyText": "let's add java docs", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434292517", "createdAt": "2020-06-03T03:49:48Z", "author": {"login": "fazlan-nazeem"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/EndpointRegistryUtil.java", "diffHunk": "@@ -32,4 +46,24 @@ public static void raiseResourceAlreadyExistsException(String msg) throws\n         throw new EndpointRegistryResourceAlreadyExistsException(msg);\n     }\n \n+    public static boolean isValidDefinition(URL definitionURL, String definitionType)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5NzcyNQ==", "bodyText": "Fixed in 169ace7", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434297725", "createdAt": "2020-06-03T04:14:20Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/EndpointRegistryUtil.java", "diffHunk": "@@ -32,4 +46,24 @@ public static void raiseResourceAlreadyExistsException(String msg) throws\n         throw new EndpointRegistryResourceAlreadyExistsException(msg);\n     }\n \n+    public static boolean isValidDefinition(URL definitionURL, String definitionType)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5MjUxNw=="}, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTIzMTA1OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/EndpointRegistryUtil.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMzo1MDowMFrOGeLHTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNDoxNDoyOFrOGeLbpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5MjU1OA==", "bodyText": "javadocs here", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434292558", "createdAt": "2020-06-03T03:50:00Z", "author": {"login": "fazlan-nazeem"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/EndpointRegistryUtil.java", "diffHunk": "@@ -32,4 +46,24 @@ public static void raiseResourceAlreadyExistsException(String msg) throws\n         throw new EndpointRegistryResourceAlreadyExistsException(msg);\n     }\n \n+    public static boolean isValidDefinition(URL definitionURL, String definitionType)\n+            throws DefinitionValidationException {\n+        DefinitionValidator definitionValidator = definitionValidatorMap.get(definitionType);\n+        if (definitionValidator != null) {\n+            return definitionValidator.validate(definitionURL);\n+        }\n+        throw new DefinitionValidationException(\"No Definition Validator found for the given definition type: '\"\n+                + definitionType + \"'\");\n+    }\n+\n+    public static boolean isValidDefinition(byte[] definitionContent, String definitionType)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5Nzc2NQ==", "bodyText": "Fixed in 169ace7", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434297765", "createdAt": "2020-06-03T04:14:28Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/EndpointRegistryUtil.java", "diffHunk": "@@ -32,4 +46,24 @@ public static void raiseResourceAlreadyExistsException(String msg) throws\n         throw new EndpointRegistryResourceAlreadyExistsException(msg);\n     }\n \n+    public static boolean isValidDefinition(URL definitionURL, String definitionType)\n+            throws DefinitionValidationException {\n+        DefinitionValidator definitionValidator = definitionValidatorMap.get(definitionType);\n+        if (definitionValidator != null) {\n+            return definitionValidator.validate(definitionURL);\n+        }\n+        throw new DefinitionValidationException(\"No Definition Validator found for the given definition type: '\"\n+                + definitionType + \"'\");\n+    }\n+\n+    public static boolean isValidDefinition(byte[] definitionContent, String definitionType)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5MjU1OA=="}, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTIzMjY2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/GraphQLDefinitionValidator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMzo1MDo1NFrOGeLILA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNDoxMzo1OFrOGeLbMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5Mjc4MA==", "bodyText": "shouldn't an exception be thrown in here?", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434292780", "createdAt": "2020-06-03T03:50:54Z", "author": {"login": "fazlan-nazeem"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/GraphQLDefinitionValidator.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.apimgt.impl.endpoint.registry.util;\n+\n+import graphql.schema.GraphQLSchema;\n+import graphql.schema.idl.SchemaParser;\n+import graphql.schema.idl.TypeDefinitionRegistry;\n+import graphql.schema.idl.UnExecutableSchemaGenerator;\n+import graphql.schema.idl.errors.SchemaProblem;\n+import graphql.schema.validation.SchemaValidationError;\n+import graphql.schema.validation.SchemaValidator;\n+import org.apache.commons.io.IOUtils;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+\n+import java.io.IOException;\n+import java.net.URL;\n+import java.util.Set;\n+\n+/**\n+ * This class provides the functionality of validating GraphQL definitions\n+ */\n+public class GraphQLDefinitionValidator implements DefinitionValidator {\n+    private static final Log log = LogFactory.getLog(GraphQLDefinitionValidator.class);\n+\n+    @Override\n+    public boolean validate(URL definitionUrl) {\n+        boolean isValid = false;\n+        try {\n+            String definitionContent = IOUtils.toString(definitionUrl.openStream());\n+            isValid = validate(definitionContent);\n+        } catch (IOException e) {\n+            log.error(\"Error in reading content in the definition URL: \" + definitionUrl, e);\n+        }\n+        return isValid;\n+    }\n+\n+    @Override\n+    public boolean validate(byte[] definition) {\n+        String definitionContent = new String(definition);\n+        return validate(definitionContent);\n+    }\n+\n+    @Override\n+    public boolean validate(String definition) {\n+        boolean isValid = false;\n+        try {\n+            SchemaParser schemaParser = new SchemaParser();\n+            TypeDefinitionRegistry typeRegistry = schemaParser.parse(definition);\n+            GraphQLSchema graphQLSchema = UnExecutableSchemaGenerator.makeUnExecutableSchema(typeRegistry);\n+            SchemaValidator schemaValidation = new SchemaValidator();\n+            Set<SchemaValidationError> validationErrors = schemaValidation.validateSchema(graphQLSchema);\n+            isValid = (validationErrors.toArray().length == 0);\n+        } catch (SchemaProblem e) {\n+            log.error(\"Unable to parse the GraphQL definition\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5NzY0OA==", "bodyText": "Fixed in 169ace7", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r434297648", "createdAt": "2020-06-03T04:13:58Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/util/GraphQLDefinitionValidator.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.carbon.apimgt.impl.endpoint.registry.util;\n+\n+import graphql.schema.GraphQLSchema;\n+import graphql.schema.idl.SchemaParser;\n+import graphql.schema.idl.TypeDefinitionRegistry;\n+import graphql.schema.idl.UnExecutableSchemaGenerator;\n+import graphql.schema.idl.errors.SchemaProblem;\n+import graphql.schema.validation.SchemaValidationError;\n+import graphql.schema.validation.SchemaValidator;\n+import org.apache.commons.io.IOUtils;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+\n+import java.io.IOException;\n+import java.net.URL;\n+import java.util.Set;\n+\n+/**\n+ * This class provides the functionality of validating GraphQL definitions\n+ */\n+public class GraphQLDefinitionValidator implements DefinitionValidator {\n+    private static final Log log = LogFactory.getLog(GraphQLDefinitionValidator.class);\n+\n+    @Override\n+    public boolean validate(URL definitionUrl) {\n+        boolean isValid = false;\n+        try {\n+            String definitionContent = IOUtils.toString(definitionUrl.openStream());\n+            isValid = validate(definitionContent);\n+        } catch (IOException e) {\n+            log.error(\"Error in reading content in the definition URL: \" + definitionUrl, e);\n+        }\n+        return isValid;\n+    }\n+\n+    @Override\n+    public boolean validate(byte[] definition) {\n+        String definitionContent = new String(definition);\n+        return validate(definitionContent);\n+    }\n+\n+    @Override\n+    public boolean validate(String definition) {\n+        boolean isValid = false;\n+        try {\n+            SchemaParser schemaParser = new SchemaParser();\n+            TypeDefinitionRegistry typeRegistry = schemaParser.parse(definition);\n+            GraphQLSchema graphQLSchema = UnExecutableSchemaGenerator.makeUnExecutableSchema(typeRegistry);\n+            SchemaValidator schemaValidation = new SchemaValidator();\n+            Set<SchemaValidationError> validationErrors = schemaValidation.validateSchema(graphQLSchema);\n+            isValid = (validationErrors.toArray().length == 0);\n+        } catch (SchemaProblem e) {\n+            log.error(\"Unable to parse the GraphQL definition\", e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5Mjc4MA=="}, "originalCommit": {"oid": "9af9a71b58b717323533f1604c2b2d5756916e80"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTQ0MjQ2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.api/src/main/java/org/wso2/carbon/apimgt/api/endpoint/registry/api/DefinitionValidationException.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNTo0OTowOVrOHBaePg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwNjowNzoxM1rOHIqrQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI0NDM1MA==", "bodyText": "class comments?", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r471244350", "createdAt": "2020-08-17T05:49:09Z", "author": {"login": "TanyaM"}, "path": "components/apimgt/org.wso2.carbon.apimgt.api/src/main/java/org/wso2/carbon/apimgt/api/endpoint/registry/api/DefinitionValidationException.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.wso2.carbon.apimgt.api.endpoint.registry.api;\n+\n+public class DefinitionValidationException extends EndpointRegistryException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3c01ec3425a723761d230d1b822371a58578411"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg0OTg1OQ==", "bodyText": "Fixed in https://github.com/wso2-enterprise/service-catalog/commit/c3c2dccc31ebfa9b0106c8ff86414c8aad454b08", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r478849859", "createdAt": "2020-08-28T06:07:13Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.api/src/main/java/org/wso2/carbon/apimgt/api/endpoint/registry/api/DefinitionValidationException.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.wso2.carbon.apimgt.api.endpoint.registry.api;\n+\n+public class DefinitionValidationException extends EndpointRegistryException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI0NDM1MA=="}, "originalCommit": {"oid": "f3c01ec3425a723761d230d1b822371a58578411"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2NTg5MTc3OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/constants/EndpointRegistryConstants.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwODowNzo0M1rOHEhR1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwODo0NToyNFrOHIxKgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUwMTU4OQ==", "bodyText": "Do we need these spaces between every line?", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r474501589", "createdAt": "2020-08-21T08:07:43Z", "author": {"login": "chashikajw"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/constants/EndpointRegistryConstants.java", "diffHunk": "@@ -69,5 +69,14 @@\n     public static final String DEFAULT_REGISTRY_NAME = \"Default Registry\";\n \n     public static final String SYSTEM_USER_NAME = \"SYSTEM_USER\";\n+\n+    public static final String DEFINITION_TYPE_OAS = \"OAS\";\n+\n+    public static final String DEFINITION_TYPE_WSDL1 = \"WSDL1\";\n+\n+    public static final String DEFINITION_TYPE_WSDL2 = \"WSDL2\";\n+\n+    public static final String DEFINITION_TYPE_GQL_SDL = \"GQL_SDL\";\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3c01ec3425a723761d230d1b822371a58578411"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODk1NjE2Mg==", "bodyText": "Fixed in https://github.com/wso2-enterprise/service-catalog/pull/73", "url": "https://github.com/wso2/carbon-apimgt/pull/8618#discussion_r478956162", "createdAt": "2020-08-28T08:45:24Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/endpoint/registry/constants/EndpointRegistryConstants.java", "diffHunk": "@@ -69,5 +69,14 @@\n     public static final String DEFAULT_REGISTRY_NAME = \"Default Registry\";\n \n     public static final String SYSTEM_USER_NAME = \"SYSTEM_USER\";\n+\n+    public static final String DEFINITION_TYPE_OAS = \"OAS\";\n+\n+    public static final String DEFINITION_TYPE_WSDL1 = \"WSDL1\";\n+\n+    public static final String DEFINITION_TYPE_WSDL2 = \"WSDL2\";\n+\n+    public static final String DEFINITION_TYPE_GQL_SDL = \"GQL_SDL\";\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDUwMTU4OQ=="}, "originalCommit": {"oid": "f3c01ec3425a723761d230d1b822371a58578411"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3310, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}