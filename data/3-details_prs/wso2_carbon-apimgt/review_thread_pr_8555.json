{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxODE0MTUx", "number": 8555, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNToxNToxOVrOD_NHNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzo0NjozMVrOD_O8ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjAxNzE4OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNToxNToxOVrOGZvjwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzowMjoxNFrOGaRFaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0Njc4NQ==", "bodyText": "These Events need to send after subscription approved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429646785", "createdAt": "2020-05-24T15:15:19Z", "author": {"login": "tharindu1st"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -3188,6 +3195,12 @@ public void removeSubscription(SubscribedAPI subscription) throws APIManagementE\n                         + \") removed from app \" + appName;\n                 log.debug(logMessage);\n             }\n+\n+            SubscriptionEvent subscriptionEvent = new SubscriptionEvent(UUID.randomUUID().toString(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5MjEwOQ==", "bodyText": "resolved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430192109", "createdAt": "2020-05-26T06:53:10Z", "author": {"login": "CrowleyRajapakse"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -3188,6 +3195,12 @@ public void removeSubscription(SubscribedAPI subscription) throws APIManagementE\n                         + \") removed from app \" + appName;\n                 log.debug(logMessage);\n             }\n+\n+            SubscriptionEvent subscriptionEvent = new SubscriptionEvent(UUID.randomUUID().toString(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0Njc4NQ=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5NjA3Mw==", "bodyText": "still not fixed", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430196073", "createdAt": "2020-05-26T07:02:14Z", "author": {"login": "tharindu1st"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -3188,6 +3195,12 @@ public void removeSubscription(SubscribedAPI subscription) throws APIManagementE\n                         + \") removed from app \" + appName;\n                 log.debug(logMessage);\n             }\n+\n+            SubscriptionEvent subscriptionEvent = new SubscriptionEvent(UUID.randomUUID().toString(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0Njc4NQ=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjAxNzQ0OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxNToxNTo0MVrOGZvj7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjo1MzoyMVrOGaQ2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0NjgzMA==", "bodyText": "same goes here as well", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429646830", "createdAt": "2020-05-24T15:15:41Z", "author": {"login": "tharindu1st"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -3408,6 +3421,12 @@ public int addApplication(Application application, String userId)\n             Thread recommendationThread = new Thread(extractor);\n             recommendationThread.start();\n         }\n+\n+        ApplicationEvent applicationEvent = new ApplicationEvent(UUID.randomUUID().toString(), System.currentTimeMillis()\n+                , APIConstants.EventType.APPLICATION_CREATE.name(), tenantId, applicationId, application.getName(), application.getTokenType(),\n+                application.getTier());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5MjE4Mw==", "bodyText": "resolved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430192183", "createdAt": "2020-05-26T06:53:21Z", "author": {"login": "CrowleyRajapakse"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -3408,6 +3421,12 @@ public int addApplication(Application application, String userId)\n             Thread recommendationThread = new Thread(extractor);\n             recommendationThread.start();\n         }\n+\n+        ApplicationEvent applicationEvent = new ApplicationEvent(UUID.randomUUID().toString(), System.currentTimeMillis()\n+                , APIConstants.EventType.APPLICATION_CREATE.name(), tenantId, applicationId, application.getName(), application.getTokenType(),\n+                application.getTier());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0NjgzMA=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjI5MTg0OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzowNToxMFrOGZx0Vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjo1Mjo0NlrOGaQ1SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4Mzc5OQ==", "bodyText": "change * to exact class names", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429683799", "createdAt": "2020-05-24T23:05:10Z", "author": {"login": "isharac"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -85,6 +85,7 @@\n import org.wso2.carbon.apimgt.impl.dto.TierPermissionDTO;\n import org.wso2.carbon.apimgt.impl.dto.WorkflowDTO;\n import org.wso2.carbon.apimgt.impl.factory.KeyManagerHolder;\n+import org.wso2.carbon.apimgt.impl.notifier.events.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5MTk0NA==", "bodyText": "resolved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430191944", "createdAt": "2020-05-26T06:52:46Z", "author": {"login": "CrowleyRajapakse"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -85,6 +85,7 @@\n import org.wso2.carbon.apimgt.impl.dto.TierPermissionDTO;\n import org.wso2.carbon.apimgt.impl.dto.WorkflowDTO;\n import org.wso2.carbon.apimgt.impl.factory.KeyManagerHolder;\n+import org.wso2.carbon.apimgt.impl.notifier.events.*;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4Mzc5OQ=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjMwMDQwOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzoyMDoxN1rOGZx5Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjo1MjoyMlrOGaQ0jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NTAxMQ==", "bodyText": "this event has to go to completeApplicationRegistration", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429685011", "createdAt": "2020-05-24T23:20:17Z", "author": {"login": "isharac"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -3906,6 +3936,11 @@ else if (APIConstants.API_KEY_TYPE_SANDBOX.equals(tokenType)) { // if\n             APIUtil.logAuditMessage(APIConstants.AuditLogConstants.APPLICATION, appLogObject.toString(),\n                     APIConstants.AuditLogConstants.UPDATED, this.username);\n \n+            ApplicationRegistrationEvent applicationRegistrationEvent = new ApplicationRegistrationEvent(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5MTc1OQ==", "bodyText": "resolved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430191759", "createdAt": "2020-05-26T06:52:22Z", "author": {"login": "CrowleyRajapakse"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -3906,6 +3936,11 @@ else if (APIConstants.API_KEY_TYPE_SANDBOX.equals(tokenType)) { // if\n             APIUtil.logAuditMessage(APIConstants.AuditLogConstants.APPLICATION, appLogObject.toString(),\n                     APIConstants.AuditLogConstants.UPDATED, this.username);\n \n+            ApplicationRegistrationEvent applicationRegistrationEvent = new ApplicationRegistrationEvent(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NTAxMQ=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjMwMDQ5OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzoyMDozM1rOGZx5Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjo1MjozNFrOGaQ08g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NTAyNw==", "bodyText": "this as well", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429685027", "createdAt": "2020-05-24T23:20:33Z", "author": {"login": "isharac"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -4050,6 +4085,12 @@ else if (APIConstants.API_KEY_TYPE_SANDBOX.equals(tokenType)) {\n             appLogObject.put(\"Generated keys for application\", application.getName());\n             APIUtil.logAuditMessage(APIConstants.AuditLogConstants.APPLICATION, appLogObject.toString(),\n                     APIConstants.AuditLogConstants.UPDATED, this.username);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5MTg1OA==", "bodyText": "resolved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430191858", "createdAt": "2020-05-26T06:52:34Z", "author": {"login": "CrowleyRajapakse"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -4050,6 +4085,12 @@ else if (APIConstants.API_KEY_TYPE_SANDBOX.equals(tokenType)) {\n             appLogObject.put(\"Generated keys for application\", application.getName());\n             APIUtil.logAuditMessage(APIConstants.AuditLogConstants.APPLICATION, appLogObject.toString(),\n                     APIConstants.AuditLogConstants.UPDATED, this.username);\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NTAyNw=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 95}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjMwMjEzOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/internal/APIManagerComponent.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzoyMzoxN1rOGZx6Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjo1MTo1M1rOGaQztg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NTI2Mg==", "bodyText": "change to absolute imports", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429685262", "createdAt": "2020-05-24T23:23:17Z", "author": {"login": "isharac"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/internal/APIManagerComponent.java", "diffHunk": "@@ -49,6 +49,8 @@\n import org.wso2.carbon.apimgt.impl.factory.KeyManagerHolder;\n import org.wso2.carbon.apimgt.impl.factory.SQLConstantManagerFactory;\n import org.wso2.carbon.apimgt.impl.handlers.UserPostSelfRegistrationHandler;\n+import org.wso2.carbon.apimgt.impl.notifier.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5MTU0Mg==", "bodyText": "resolved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430191542", "createdAt": "2020-05-26T06:51:53Z", "author": {"login": "CrowleyRajapakse"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/internal/APIManagerComponent.java", "diffHunk": "@@ -49,6 +49,8 @@\n import org.wso2.carbon.apimgt.impl.factory.KeyManagerHolder;\n import org.wso2.carbon.apimgt.impl.factory.SQLConstantManagerFactory;\n import org.wso2.carbon.apimgt.impl.handlers.UserPostSelfRegistrationHandler;\n+import org.wso2.carbon.apimgt.impl.notifier.*;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NTI2Mg=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjMwMzcwOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/internal/APIManagerComponent.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzoyNTo1NVrOGZx68w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjo1MTo0M1rOGaQzbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NTQ5MQ==", "bodyText": "we can merge these two lines\nbundleContext.registerService(Notifier.class.getName(), new SubscriptionsNotifier(), null);", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429685491", "createdAt": "2020-05-24T23:25:55Z", "author": {"login": "isharac"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/internal/APIManagerComponent.java", "diffHunk": "@@ -169,6 +172,19 @@ protected void activate(ComponentContext componentContext) throws Exception {\n             bundleContext.registerService(Axis2ConfigurationContextObserver.class.getName(), tenantLoadMessageSender, null);\n             KeyMgtConfigDeployer keyMgtConfigDeployer = new KeyMgtConfigDeployer();\n             bundleContext.registerService(Axis2ConfigurationContextObserver.class.getName(), keyMgtConfigDeployer, null);\n+\n+            //Registering Notifiers\n+            Notifier subscriptionsNotifier = new SubscriptionsNotifier();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5MTQ3MA==", "bodyText": "resolved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430191470", "createdAt": "2020-05-26T06:51:43Z", "author": {"login": "CrowleyRajapakse"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/internal/APIManagerComponent.java", "diffHunk": "@@ -169,6 +172,19 @@ protected void activate(ComponentContext componentContext) throws Exception {\n             bundleContext.registerService(Axis2ConfigurationContextObserver.class.getName(), tenantLoadMessageSender, null);\n             KeyMgtConfigDeployer keyMgtConfigDeployer = new KeyMgtConfigDeployer();\n             bundleContext.registerService(Axis2ConfigurationContextObserver.class.getName(), keyMgtConfigDeployer, null);\n+\n+            //Registering Notifiers\n+            Notifier subscriptionsNotifier = new SubscriptionsNotifier();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NTQ5MQ=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjMwNjg5OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/internal/APIManagerComponent.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzozMDo1NVrOGZx8lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjo1MTozMlrOGaQzEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NTkwOA==", "bodyText": "shouldn't this be removeNotifiers?", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429685908", "createdAt": "2020-05-24T23:30:55Z", "author": {"login": "isharac"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/internal/APIManagerComponent.java", "diffHunk": "@@ -731,5 +747,25 @@ private void setupAccessTokenGenerator(){\n             ServiceReferenceHolder.getInstance().setAccessTokenGenerator(accessTokenGenerator);\n         }\n     }\n+\n+    @Reference(\n+            name = \"notifier.component\",\n+            service = Notifier.class,\n+            cardinality = ReferenceCardinality.MULTIPLE,\n+            policy = ReferencePolicy.DYNAMIC,\n+            unbind = \"removeNotifier\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5MTM3Ng==", "bodyText": "resolved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430191376", "createdAt": "2020-05-26T06:51:32Z", "author": {"login": "CrowleyRajapakse"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/internal/APIManagerComponent.java", "diffHunk": "@@ -731,5 +747,25 @@ private void setupAccessTokenGenerator(){\n             ServiceReferenceHolder.getInstance().setAccessTokenGenerator(accessTokenGenerator);\n         }\n     }\n+\n+    @Reference(\n+            name = \"notifier.component\",\n+            service = Notifier.class,\n+            cardinality = ReferenceCardinality.MULTIPLE,\n+            policy = ReferencePolicy.DYNAMIC,\n+            unbind = \"removeNotifier\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NTkwOA=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjMwOTAzOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/notifier/events/APIEvent.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzozNDoyMVrOGZx9mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzozNDoyMVrOGZx9mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NjE3MA==", "bodyText": "Shall we change this to builder pattern?", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429686170", "createdAt": "2020-05-24T23:34:21Z", "author": {"login": "isharac"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/notifier/events/APIEvent.java", "diffHunk": "@@ -0,0 +1,123 @@\n+package org.wso2.carbon.apimgt.impl.notifier.events;\n+\n+import java.util.Objects;\n+\n+public class APIEvent extends Event {\n+\n+    private String apiName;\n+    private int apiId;\n+    private String apiVersion;\n+    private String apiContext;\n+    private String apiProvider;\n+    private String apiType;\n+    private String apiStatus;\n+\n+    public APIEvent(String eventId, long timestamp, String type, int tenantId, String apiName, int apiId,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjMxMTg2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/notifier/events/ApplicationEvent.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzozODo0M1rOGZx-_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjo1MToyMFrOGaQyxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NjUyNQ==", "bodyText": "We need the group_id as well.", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429686525", "createdAt": "2020-05-24T23:38:43Z", "author": {"login": "isharac"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/notifier/events/ApplicationEvent.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package org.wso2.carbon.apimgt.impl.notifier.events;\n+\n+import java.util.Objects;\n+\n+public class ApplicationEvent extends Event {\n+    private int applicationId;\n+    private String applicationName;\n+    private String tokenType;\n+    private String applicationPolicy;\n+\n+    public ApplicationEvent(String eventId, long timestamp, String type, int tenantId,int applicationId,\n+                            String applicationName, String tokenType, String applicationPolicy) {\n+        this.eventId = eventId;\n+        this.timeStamp = timestamp;\n+        this.type = type;\n+        this.tenantId = tenantId;\n+        this.applicationId = applicationId;\n+        this.applicationName = applicationName;\n+        this.tokenType = tokenType;\n+        this.applicationPolicy = applicationPolicy;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5MTMwMw==", "bodyText": "resolved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430191303", "createdAt": "2020-05-26T06:51:20Z", "author": {"login": "CrowleyRajapakse"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/notifier/events/ApplicationEvent.java", "diffHunk": "@@ -0,0 +1,84 @@\n+package org.wso2.carbon.apimgt.impl.notifier.events;\n+\n+import java.util.Objects;\n+\n+public class ApplicationEvent extends Event {\n+    private int applicationId;\n+    private String applicationName;\n+    private String tokenType;\n+    private String applicationPolicy;\n+\n+    public ApplicationEvent(String eventId, long timestamp, String type, int tenantId,int applicationId,\n+                            String applicationName, String tokenType, String applicationPolicy) {\n+        this.eventId = eventId;\n+        this.timeStamp = timestamp;\n+        this.type = type;\n+        this.tenantId = tenantId;\n+        this.applicationId = applicationId;\n+        this.applicationName = applicationName;\n+        this.tokenType = tokenType;\n+        this.applicationPolicy = applicationPolicy;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NjUyNQ=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NjMxNzE3OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/utils/APIUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQyMzo0NjozMVrOGZyBuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNjo1MToxMVrOGaQyjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NzIyNQ==", "bodyText": "need the space after the .", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r429687225", "createdAt": "2020-05-24T23:46:31Z", "author": {"login": "isharac"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/utils/APIUtil.java", "diffHunk": "@@ -539,6 +535,23 @@ public static void updateAPIProductDependencies(API api, Registry registry) thro\n         }\n     }\n \n+    /**\n+     * This method used to send Notifications\n+     *\n+     * @param event        Event object\n+     * @param notifierType eventType\n+     */\n+    public static void sendNotification(org.wso2.carbon.apimgt.impl.notifier.events.Event event, String notifierType) {\n+        List<Notifier> notifierList = ServiceReferenceHolder.getInstance().getNotifiersMap().get(notifierType);\n+        notifierList.forEach((notifier) -> {\n+            try {\n+                notifier.publishEvent(event);\n+            } catch (NotifierException e) {\n+                log.error(\"Error when publish \" + event + \" through notifier:\" + notifierType + \" .Error:\" + e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5MTI0NQ==", "bodyText": "resolved", "url": "https://github.com/wso2/carbon-apimgt/pull/8555#discussion_r430191245", "createdAt": "2020-05-26T06:51:11Z", "author": {"login": "CrowleyRajapakse"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/utils/APIUtil.java", "diffHunk": "@@ -539,6 +535,23 @@ public static void updateAPIProductDependencies(API api, Registry registry) thro\n         }\n     }\n \n+    /**\n+     * This method used to send Notifications\n+     *\n+     * @param event        Event object\n+     * @param notifierType eventType\n+     */\n+    public static void sendNotification(org.wso2.carbon.apimgt.impl.notifier.events.Event event, String notifierType) {\n+        List<Notifier> notifierList = ServiceReferenceHolder.getInstance().getNotifiersMap().get(notifierType);\n+        notifierList.forEach((notifier) -> {\n+            try {\n+                notifier.publishEvent(event);\n+            } catch (NotifierException e) {\n+                log.error(\"Error when publish \" + event + \" through notifier:\" + notifierType + \" .Error:\" + e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY4NzIyNQ=="}, "originalCommit": {"oid": "82c3e214a4f10e24d7ac461141ac9fbb3eae9f3a"}, "originalPosition": 54}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3445, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}