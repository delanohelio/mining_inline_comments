{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MDY0OTc3", "number": 8387, "title": "Modify exceptions when importing/exporting API thumbnail icon from UI", "bodyText": "Purpose\nChange the exception handling when importing/exporting API thumbnail icon from UI.\nFixes: wso2/product-apim-tooling#216\nGoals\n\nChange the generic exception to specific ones.\nJustify the need more using comments\n\nApproach\n\nString mimeType = URLConnection.guessContentTypeFromName(fileName) decides the mimetype for image extensions such as .jpg, .jpeg, .png, .gif, .bmp. But if the file type is .json URLConnection returns null.\nSo, used JsonParser which will identify whether it is a valid .json file or not.\nIf it is not an image or not a JSON file then the exception should be handled without breaking the flow. (In here the thumbnail will not get imported, but the API will get successfully imported without the thumbnail)\n\nRelated PRs\n\n#8384\nwso2-support/carbon-apimgt#1929\n\nTest environment\n\nJDK 1.8.0_241\nUbuntu 18.04.4 LTS", "createdAt": "2020-03-28T08:29:09Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8387", "merged": true, "mergeCommit": {"oid": "8ebce865c77aca61b0c81190dea3e47594ff9711"}, "closed": true, "closedAt": "2020-03-28T10:24:50Z", "author": {"login": "wasuradananjith"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcR97gYAH2gAyMzk1MDY0OTc3OmM3MjQ1MmI2NzM5MjllNjM3Mjk1NWJlZDg2OWM2ZGZkZWE3NzJmMDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSCr9ugFqTM4MzMwMTIzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c72452b673929e6372955bed869c6dfdea772f08", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/c72452b673929e6372955bed869c6dfdea772f08", "committedDate": "2020-03-28T04:52:00Z", "message": "change api thumbnail based exception handling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6a0ffb777de54739691b9688ef85a3d0fd3f97c", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/f6a0ffb777de54739691b9688ef85a3d0fd3f97c", "committedDate": "2020-03-28T05:10:37Z", "message": "remove wildcard import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMjk0NzMx", "url": "https://github.com/wso2/carbon-apimgt/pull/8387#pullrequestreview-383294731", "createdAt": "2020-03-28T08:31:37Z", "commit": {"oid": "f6a0ffb777de54739691b9688ef85a3d0fd3f97c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzAwNzIz", "url": "https://github.com/wso2/carbon-apimgt/pull/8387#pullrequestreview-383300723", "createdAt": "2020-03-28T10:16:32Z", "commit": {"oid": "f6a0ffb777de54739691b9688ef85a3d0fd3f97c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMDoxNjozMlrOF9IanQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMDoxNjozMlrOF9IanQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY0NTM0MQ==", "bodyText": "Shall we use } catch (JsonParseException | FileNotFoundException e) {", "url": "https://github.com/wso2/carbon-apimgt/pull/8387#discussion_r399645341", "createdAt": "2020-03-28T10:16:32Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/importexport/utils/APIImportUtil.java", "diffHunk": "@@ -531,8 +532,13 @@ private static void updateAPIWithThumbnail(File imageFile, API importedApi, APIP\n                 // Check whether the icon is in .json format (UI icons are stored as .json)\n                 new JsonParser().parse(new FileReader(imageFile));\n                 mimeType = APIConstants.APPLICATION_JSON_MEDIA_TYPE;\n-            } catch (Exception e) {\n-                log.error(\"Failed to read the file. \", e);\n+            } catch (JsonParseException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6a0ffb777de54739691b9688ef85a3d0fd3f97c"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzAxMjM1", "url": "https://github.com/wso2/carbon-apimgt/pull/8387#pullrequestreview-383301235", "createdAt": "2020-03-28T10:24:33Z", "commit": {"oid": "f6a0ffb777de54739691b9688ef85a3d0fd3f97c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2881, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}