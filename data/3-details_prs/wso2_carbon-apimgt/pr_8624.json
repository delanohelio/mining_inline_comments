{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MzQyNTQ0", "number": 8624, "title": "Add mapping between APIs and Servcie catalog entries", "bodyText": "When API is created by selecting an endpoint from service catalog, an entry will be added to table called AM_API_ENDPOINT_REG_ENTRY_MAPPING.", "createdAt": "2020-06-02T04:28:51Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8624", "merged": true, "mergeCommit": {"oid": "bc7ab1b375581232e93f4178ecc63e7675a44146"}, "closed": true, "closedAt": "2020-06-02T05:19:59Z", "author": {"login": "vithu30"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcm6VjBAH2gAyNDI2MzQyNTQ0OjJlYzBlYTk3YjlkN2UyNDM1YzI0ZjdkODI0NTZjNTExZjQ3YTRiMWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnN4uNgFqTQyMjM0ODg4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2ec0ea97b9d7e2435c24f7d82456c511f47a4b1b", "author": {"user": {"login": "vithu30", "name": "Vithursa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/2ec0ea97b9d7e2435c24f7d82456c511f47a4b1b", "committedDate": "2020-06-01T06:33:14Z", "message": "Add initial impl for mapping between API and reg_entry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ff311428f65ae03c476dba0c89c2cc521f32802", "author": {"user": {"login": "vithu30", "name": "Vithursa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/8ff311428f65ae03c476dba0c89c2cc521f32802", "committedDate": "2020-06-02T04:27:00Z", "message": "Add endpoint registry entry, API mapping table"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMzQzNTA5", "url": "https://github.com/wso2/carbon-apimgt/pull/8624#pullrequestreview-422343509", "createdAt": "2020-06-02T05:02:27Z", "commit": {"oid": "8ff311428f65ae03c476dba0c89c2cc521f32802"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNTowMjoyN1rOGdiI3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNTowMjoyN1rOGdiI3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYyMTIxNA==", "bodyText": "Going forward, production endpoint and sandbox endpoint can be attached to two different registry entries. So we cannot add this unique constraint, as there can be two rows with the same combination of the same entry is used for both endpoints.", "url": "https://github.com/wso2/carbon-apimgt/pull/8624#discussion_r433621214", "createdAt": "2020-06-02T05:02:27Z", "author": {"login": "fazlan-nazeem"}, "path": "features/apimgt/org.wso2.carbon.apimgt.core.feature/src/main/resources/sql/h2.sql", "diffHunk": "@@ -1863,4 +1863,12 @@ CREATE TABLE IF NOT EXISTS ENDPOINT_REG_ENTRY (\n   FOREIGN KEY (REG_ID) REFERENCES ENDPOINT_REG (ID) ON DELETE CASCADE\n );\n \n+CREATE TABLE IF NOT EXISTS AM_API_ENDPOINT_REG_ENTRY_MAPPING (\n+    API_ID INTEGER NOT NULL,\n+    REG_NAME VARCHAR(255) NOT NULL,\n+    ENTRY_NAME VARCHAR(255) NOT NULL,\n+    ENTRY_VERSION VARCHAR(30),\n+    UNIQUE (API_ID, REG_NAME, ENTRY_NAME, ENTRY_VERSION),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ff311428f65ae03c476dba0c89c2cc521f32802"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMzQ4ODgz", "url": "https://github.com/wso2/carbon-apimgt/pull/8624#pullrequestreview-422348883", "createdAt": "2020-06-02T05:19:51Z", "commit": {"oid": "8ff311428f65ae03c476dba0c89c2cc521f32802"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2686, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}