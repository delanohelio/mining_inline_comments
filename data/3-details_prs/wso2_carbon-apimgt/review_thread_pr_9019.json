{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0ODY3NTU5", "number": 9019, "reviewThreads": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjoxNzozOFrOERBRhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxMjoyNzoxNVrOEoDhfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MjgyMTE3OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/InMemoryAPIDeployer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjoxNzozOFrOG1fxqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjoyMjoyNFrOG1f7UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc0ODMzMA==", "bodyText": "Do we need these escapes?", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458748330", "createdAt": "2020-07-22T12:17:38Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/InMemoryAPIDeployer.java", "diffHunk": "@@ -72,15 +73,24 @@ public boolean deployAPI(String apiId, String gatewayLabel) {\n                     if (gatewayRuntimeArtifact != null) {\n                         GatewayAPIDTO gatewayAPIDTO = new Gson().fromJson(gatewayRuntimeArtifact, GatewayAPIDTO.class);\n                         apiGatewayAdmin.deployAPI(gatewayAPIDTO);\n+                        if (debugEnabled) {\n+                            log.debug(\"API with \" + apiId + \" is deployed in gateway with the label of \" + gatewayLabel);\n+                        }\n                         return true;\n                     } else {\n-                        log.error(\"Error retrieving artifacts for API \" + apiId + \". Storage returned null\");\n+                        String msg = \"Error retrieving artifacts for API \" + apiId + \". Storage returned null\";\n+                        log.error(msg);\n+                        throw new ArtifactSynchronizerException(msg);\n                     }\n                 } catch (IOException | ArtifactSynchronizerException e) {\n-                    log.error(\"Error deploying \" + apiId + \" in Gateway\", e);\n+                    String msg = \"\\\"Error deploying \\\" + apiId + \\\" in Gateway\\\"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1MDgwMA==", "bodyText": "Fixed ae94c47", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458750800", "createdAt": "2020-07-22T12:22:24Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/InMemoryAPIDeployer.java", "diffHunk": "@@ -72,15 +73,24 @@ public boolean deployAPI(String apiId, String gatewayLabel) {\n                     if (gatewayRuntimeArtifact != null) {\n                         GatewayAPIDTO gatewayAPIDTO = new Gson().fromJson(gatewayRuntimeArtifact, GatewayAPIDTO.class);\n                         apiGatewayAdmin.deployAPI(gatewayAPIDTO);\n+                        if (debugEnabled) {\n+                            log.debug(\"API with \" + apiId + \" is deployed in gateway with the label of \" + gatewayLabel);\n+                        }\n                         return true;\n                     } else {\n-                        log.error(\"Error retrieving artifacts for API \" + apiId + \". Storage returned null\");\n+                        String msg = \"Error retrieving artifacts for API \" + apiId + \". Storage returned null\";\n+                        log.error(msg);\n+                        throw new ArtifactSynchronizerException(msg);\n                     }\n                 } catch (IOException | ArtifactSynchronizerException e) {\n-                    log.error(\"Error deploying \" + apiId + \" in Gateway\", e);\n+                    String msg = \"\\\"Error deploying \\\" + apiId + \\\" in Gateway\\\"\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc0ODMzMA=="}, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2Mjg0MjkxOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjoyNDoxNlrOG1f_QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjo0Njo0MFrOG1gxUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1MTgwOA==", "bodyText": "Since this is a lable, shall we change the debug message to the label. Also can we just print the environment? This is the environment object?", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458751808", "createdAt": "2020-07-22T12:24:16Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -679,6 +695,9 @@ private void addEndpoints(API api, APITemplateBuilder builder, GatewayAPIDTO gat\n         if (api.getGatewayLabels() != null) {\n             for (Label label : api.getGatewayLabels()) {\n                 Environment environment = getEnvironmentFromLabel(label);\n+                if (debugEnabled) {\n+                    log.debug(api.getId() + \"removing from the environment of \" + environment);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 131}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1NjIyMw==", "bodyText": "Also, you might need to add a space between apiID and debug message.", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458756223", "createdAt": "2020-07-22T12:31:58Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -679,6 +695,9 @@ private void addEndpoints(API api, APITemplateBuilder builder, GatewayAPIDTO gat\n         if (api.getGatewayLabels() != null) {\n             for (Label label : api.getGatewayLabels()) {\n                 Environment environment = getEnvironmentFromLabel(label);\n+                if (debugEnabled) {\n+                    log.debug(api.getId() + \"removing from the environment of \" + environment);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1MTgwOA=="}, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 131}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2NDYyNA==", "bodyText": "29a2e4b", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458764624", "createdAt": "2020-07-22T12:46:40Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -679,6 +695,9 @@ private void addEndpoints(API api, APITemplateBuilder builder, GatewayAPIDTO gat\n         if (api.getGatewayLabels() != null) {\n             for (Label label : api.getGatewayLabels()) {\n                 Environment environment = getEnvironmentFromLabel(label);\n+                if (debugEnabled) {\n+                    log.debug(api.getId() + \"removing from the environment of \" + environment);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1MTgwOA=="}, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 131}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2Mjg0NTY2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjoyNTowM1rOG1gA9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjo0NjozNVrOG1gxGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1MjI0Nw==", "bodyText": "you can't print the environment object. Print the environment name from the for loop.", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458752247", "createdAt": "2020-07-22T12:25:03Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -671,6 +684,9 @@ private void addEndpoints(API api, APITemplateBuilder builder, GatewayAPIDTO gat\n                 if (environment == null) {\n                     continue;\n                 }\n+                if (debugEnabled) {\n+                    log.debug(api.getId() + \"removing from the environment of \" + environment);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 121}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2NDU2OQ==", "bodyText": "29a2e4b", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458764569", "createdAt": "2020-07-22T12:46:35Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -671,6 +684,9 @@ private void addEndpoints(API api, APITemplateBuilder builder, GatewayAPIDTO gat\n                 if (environment == null) {\n                     continue;\n                 }\n+                if (debugEnabled) {\n+                    log.debug(api.getId() + \"removing from the environment of \" + environment);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1MjI0Nw=="}, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 121}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2Mjg1NTEzOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjoyNzo0MVrOG1gG0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjo0NjozMlrOG1gw_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1Mzc0NQ==", "bodyText": "We can't print the environment object. Print the environment name", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458753745", "createdAt": "2020-07-22T12:27:41Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -137,6 +137,9 @@ public synchronized static APIGatewayManager getInstance() {\n                 if (environment == null) {\n                     continue;\n                 }\n+                if (debugEnabled) {\n+                    log.debug(api.getId() + \"publishing to the environment of \" + environment);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2NDU0Mw==", "bodyText": "29a2e4b", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458764543", "createdAt": "2020-07-22T12:46:32Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -137,6 +137,9 @@ public synchronized static APIGatewayManager getInstance() {\n                 if (environment == null) {\n                     continue;\n                 }\n+                if (debugEnabled) {\n+                    log.debug(api.getId() + \"publishing to the environment of \" + environment);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1Mzc0NQ=="}, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2Mjg1NzM1OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjoyODoyMVrOG1gIMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjo0NjoyOFrOG1gw4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1NDA5Nw==", "bodyText": "Since this is a label, change the debug message to label. Change the environment object to environment name", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458754097", "createdAt": "2020-07-22T12:28:21Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -145,6 +148,9 @@ public synchronized static APIGatewayManager getInstance() {\n         if (api.getGatewayLabels() != null) {\n             for (Label label : api.getGatewayLabels()) {\n                 Environment environment = getEnvironmentFromLabel(label);\n+                if (debugEnabled) {\n+                    log.debug(api.getId() + \" publishing to the environment of \" + environment);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2NDUxMw==", "bodyText": "29a2e4b", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458764513", "createdAt": "2020-07-22T12:46:28Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -145,6 +148,9 @@ public synchronized static APIGatewayManager getInstance() {\n         if (api.getGatewayLabels() != null) {\n             for (Label label : api.getGatewayLabels()) {\n                 Environment environment = getEnvironmentFromLabel(label);\n+                if (debugEnabled) {\n+                    log.debug(api.getId() + \" publishing to the environment of \" + environment);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1NDA5Nw=="}, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2Mjg2NDU0OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/listeners/GatewayJMSMessageListener.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjozMDoxOVrOG1gMkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMzo0NjozM1rOG1jK7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1NTIxNg==", "bodyText": "Shall we handle this before?  in handleNotificationMessage method?", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458755216", "createdAt": "2020-07-22T12:30:19Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/listeners/GatewayJMSMessageListener.java", "diffHunk": "@@ -93,12 +98,13 @@ public void onMessage(Message message) {\n             } else {\n                 log.warn(\"Dropping the empty/null event received through jms receiver\");\n             }\n-        } catch (JMSException e) {\n+        } catch (JMSException | ArtifactSynchronizerException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2MjA5OA==", "bodyText": "Yes we are handling https://github.com/wso2/carbon-apimgt/pull/9019/files#diff-838be8956ccd306ac34942d1c83642fcR106", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458762098", "createdAt": "2020-07-22T12:42:23Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/listeners/GatewayJMSMessageListener.java", "diffHunk": "@@ -93,12 +98,13 @@ public void onMessage(Message message) {\n             } else {\n                 log.warn(\"Dropping the empty/null event received through jms receiver\");\n             }\n-        } catch (JMSException e) {\n+        } catch (JMSException | ArtifactSynchronizerException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1NTIxNg=="}, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgwMzk0OA==", "bodyText": "Since this method is shared by lot of other features, better to capture the ArtifactSynchronizerException in previous method.", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458803948", "createdAt": "2020-07-22T13:46:33Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/listeners/GatewayJMSMessageListener.java", "diffHunk": "@@ -93,12 +98,13 @@ public void onMessage(Message message) {\n             } else {\n                 log.warn(\"Dropping the empty/null event received through jms receiver\");\n             }\n-        } catch (JMSException e) {\n+        } catch (JMSException | ArtifactSynchronizerException e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1NTIxNg=="}, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2Mjg3MTc4OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjozMjoxNFrOG1gRDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjo0NjoxNlrOG1gwYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1NjM2Nw==", "bodyText": "add a space after api id", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458756367", "createdAt": "2020-07-22T12:32:14Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -730,6 +749,9 @@ private void addEndpoints(API api, APITemplateBuilder builder, GatewayAPIDTO gat\n                 artifactSaver.saveArtifact(new Gson().toJson(gatewayAPIDTO), environment.getName(),\n                         APIConstants.GatewayArtifactSynchronizer.GATEWAY_INSTRUCTION_REMOVE);\n                 removedGateways.add(environment.getName());\n+                if (debugEnabled) {\n+                    log.debug(\"Status of \" + api.getId() + \"has been updated to DB\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 154}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2NDM4NQ==", "bodyText": "0c06b11", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458764385", "createdAt": "2020-07-22T12:46:16Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -730,6 +749,9 @@ private void addEndpoints(API api, APITemplateBuilder builder, GatewayAPIDTO gat\n                 artifactSaver.saveArtifact(new Gson().toJson(gatewayAPIDTO), environment.getName(),\n                         APIConstants.GatewayArtifactSynchronizer.GATEWAY_INSTRUCTION_REMOVE);\n                 removedGateways.add(environment.getName());\n+                if (debugEnabled) {\n+                    log.debug(\"Status of \" + api.getId() + \"has been updated to DB\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1NjM2Nw=="}, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 154}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2Mjg3NDEwOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/utils/APIUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjozMjo1NFrOG1gShA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMjo0NDozOFrOG1gsXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1Njc0MA==", "bodyText": "Typo and add a space", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458756740", "createdAt": "2020-07-22T12:32:54Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/utils/APIUtil.java", "diffHunk": "@@ -589,7 +590,16 @@ public static CloseableHttpResponse executeHTTPRequest(HttpRequestBase method, H\n                 }\n             }\n         } while (retry);\n-        return httpResponse;\n+\n+        if (httpResponse.getStatusLine().getStatusCode() == 200) {\n+            return httpResponse;\n+        } else {\n+            httpResponse.close();\n+            String errorMessage = EntityUtils.toString(httpResponse.getEntity(),\n+                    APIConstants.DigestAuthConstants.CHARSET);\n+            throw new ArtifactSynchronizerException(errorMessage + \"Eevnthub status code is:\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2MzM1OA==", "bodyText": "29a2e4b", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458763358", "createdAt": "2020-07-22T12:44:38Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/utils/APIUtil.java", "diffHunk": "@@ -589,7 +590,16 @@ public static CloseableHttpResponse executeHTTPRequest(HttpRequestBase method, H\n                 }\n             }\n         } while (retry);\n-        return httpResponse;\n+\n+        if (httpResponse.getStatusLine().getStatusCode() == 200) {\n+            return httpResponse;\n+        } else {\n+            httpResponse.close();\n+            String errorMessage = EntityUtils.toString(httpResponse.getEntity(),\n+                    APIConstants.DigestAuthConstants.CHARSET);\n+            throw new ArtifactSynchronizerException(errorMessage + \"Eevnthub status code is:\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc1Njc0MA=="}, "originalCommit": {"oid": "e9ae44f6923017fe021caa8f14a9e08034111fd5"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MzE2MzM2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/listeners/GatewayJMSMessageListener.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMzo0NTozM1rOG1jIIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDoyNzozOFrOG1lBzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgwMzIzNA==", "bodyText": "Without throwing this exception from here, shall we add a try catch block and capture the exception inside this method", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458803234", "createdAt": "2020-07-22T13:45:33Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/listeners/GatewayJMSMessageListener.java", "diffHunk": "@@ -93,12 +98,13 @@ public void onMessage(Message message) {\n             } else {\n                 log.warn(\"Dropping the empty/null event received through jms receiver\");\n             }\n-        } catch (JMSException e) {\n+        } catch (JMSException | ArtifactSynchronizerException e) {\n             log.error(\"JMSException occurred when processing the received message \", e);\n         }\n     }\n \n-    private void handleNotificationMessage(String eventType, long timestamp, String encodedEvent) {\n+    private void handleNotificationMessage(String eventType, long timestamp, String encodedEvent)\n+            throws ArtifactSynchronizerException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c06b11bd310c530687fc3d64bf68b9097a1201d"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzNDM4MA==", "bodyText": "6b56e3e", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458834380", "createdAt": "2020-07-22T14:27:38Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/listeners/GatewayJMSMessageListener.java", "diffHunk": "@@ -93,12 +98,13 @@ public void onMessage(Message message) {\n             } else {\n                 log.warn(\"Dropping the empty/null event received through jms receiver\");\n             }\n-        } catch (JMSException e) {\n+        } catch (JMSException | ArtifactSynchronizerException e) {\n             log.error(\"JMSException occurred when processing the received message \", e);\n         }\n     }\n \n-    private void handleNotificationMessage(String eventType, long timestamp, String encodedEvent) {\n+    private void handleNotificationMessage(String eventType, long timestamp, String encodedEvent)\n+            throws ArtifactSynchronizerException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgwMzIzNA=="}, "originalCommit": {"oid": "0c06b11bd310c530687fc3d64bf68b9097a1201d"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MzE3NDA2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxMzo0Nzo1N1rOG1jOxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDoyNzozNVrOG1lBpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgwNDkzMg==", "bodyText": "Change the debug message to API with api ID is publishing to gateway with label", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458804932", "createdAt": "2020-07-22T13:47:57Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -145,6 +149,10 @@ public synchronized static APIGatewayManager getInstance() {\n         if (api.getGatewayLabels() != null) {\n             for (Label label : api.getGatewayLabels()) {\n                 Environment environment = getEnvironmentFromLabel(label);\n+                if (debugEnabled) {\n+                    log.debug(\"API with \" + api.getId() + \" and label \" + label + \" is publishing to the \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c06b11bd310c530687fc3d64bf68b9097a1201d"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzNDM0MQ==", "bodyText": "6b56e3e", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458834341", "createdAt": "2020-07-22T14:27:35Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -145,6 +149,10 @@ public synchronized static APIGatewayManager getInstance() {\n         if (api.getGatewayLabels() != null) {\n             for (Label label : api.getGatewayLabels()) {\n                 Environment environment = getEnvironmentFromLabel(label);\n+                if (debugEnabled) {\n+                    log.debug(\"API with \" + api.getId() + \" and label \" + label + \" is publishing to the \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgwNDkzMg=="}, "originalCommit": {"oid": "0c06b11bd310c530687fc3d64bf68b9097a1201d"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2MzM4MTU2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDozMTo0OFrOG1lOKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDozNjowNlrOG1lapw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzNzU0NQ==", "bodyText": "removing?", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458837545", "createdAt": "2020-07-22T14:31:48Z", "author": {"login": "1akshitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -137,6 +137,10 @@ public synchronized static APIGatewayManager getInstance() {\n                 if (environment == null) {\n                     continue;\n                 }\n+                if (debugEnabled) {\n+                    log.debug(\"API with \" + api.getId() + \" is removing from the environment of \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b56e3e82804d8002c3efac4f6c5e1de4286823d"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg0MDc0Mw==", "bodyText": "33db9c9", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r458840743", "createdAt": "2020-07-22T14:36:06Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIGatewayManager.java", "diffHunk": "@@ -137,6 +137,10 @@ public synchronized static APIGatewayManager getInstance() {\n                 if (environment == null) {\n                     continue;\n                 }\n+                if (debugEnabled) {\n+                    log.debug(\"API with \" + api.getId() + \" is removing from the environment of \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzNzU0NQ=="}, "originalCommit": {"oid": "6b56e3e82804d8002c3efac4f6c5e1de4286823d"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNDM2MjIwOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/InMemoryAPIDeployer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxMjoyNzoxNVrOHY7TLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQxOTowOToxNVrOIOjseg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5OTQzOQ==", "bodyText": "Better if we can check whether debug is enabled before logging this.", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r495899439", "createdAt": "2020-09-28T12:27:15Z", "author": {"login": "isuruh15"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/InMemoryAPIDeployer.java", "diffHunk": "@@ -200,16 +236,22 @@ public GatewayAPIDTO getAPIArtifact(String apiId, String gatewayLabel) {\n      *@param tenantDomain - Tenant Domain of the API\n      * @return Map that contains the UUID and label of the API\n      */\n-    public Map <String, String> getGatewayAPIAttributes(String apiName, String version, String tenantDomain) {\n+    public Map <String, String> getGatewayAPIAttributes(String apiName, String version, String tenantDomain)\n+            throws  ArtifactSynchronizerException {\n         Map<String, String> apiAttributes = null;\n         if (artifactRetriever != null) {\n             try {\n                 apiAttributes = artifactRetriever.retrieveAttributes(apiName, version, tenantDomain);\n+                log.debug(\"API Attributes retrieved for \" + apiName + \"  from storage\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33db9c95aae321571063de252285271a8381ca02"}, "originalPosition": 166}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjEzNTgwMg==", "bodyText": "Fixed #9546", "url": "https://github.com/wso2/carbon-apimgt/pull/9019#discussion_r552135802", "createdAt": "2021-01-05T19:09:15Z", "author": {"login": "Sarangan0219"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/InMemoryAPIDeployer.java", "diffHunk": "@@ -200,16 +236,22 @@ public GatewayAPIDTO getAPIArtifact(String apiId, String gatewayLabel) {\n      *@param tenantDomain - Tenant Domain of the API\n      * @return Map that contains the UUID and label of the API\n      */\n-    public Map <String, String> getGatewayAPIAttributes(String apiName, String version, String tenantDomain) {\n+    public Map <String, String> getGatewayAPIAttributes(String apiName, String version, String tenantDomain)\n+            throws  ArtifactSynchronizerException {\n         Map<String, String> apiAttributes = null;\n         if (artifactRetriever != null) {\n             try {\n                 apiAttributes = artifactRetriever.retrieveAttributes(apiName, version, tenantDomain);\n+                log.debug(\"API Attributes retrieved for \" + apiName + \"  from storage\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5OTQzOQ=="}, "originalCommit": {"oid": "33db9c95aae321571063de252285271a8381ca02"}, "originalPosition": 166}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3102, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}