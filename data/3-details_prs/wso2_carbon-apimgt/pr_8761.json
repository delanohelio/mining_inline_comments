{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MDU4MDQ4", "number": 8761, "title": "fixing #8362", "bodyText": "", "createdAt": "2020-06-16T08:30:19Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8761", "merged": true, "mergeCommit": {"oid": "02fc80690d465a2fe3c4d075f4119a112774c93a"}, "closed": true, "closedAt": "2020-06-26T11:44:50Z", "author": {"login": "hasuniea"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrw21pAH2gAyNDM1MDU4MDQ4OjVhMDZhMDNmZjU4MzM1NmQ2ZmEzNzc2NTYxNWM5NTViNDYxMGU0YTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu_2MsgFqTQzODE1MDY2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5a06a03ff583356d6fa37765615c955b4610e4a0", "author": {"user": {"login": "hasuniea", "name": "Hasunie"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/5a06a03ff583356d6fa37765615c955b4610e4a0", "committedDate": "2020-06-16T08:20:10Z", "message": "fixing #8362"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTk4ODYy", "url": "https://github.com/wso2/carbon-apimgt/pull/8761#pullrequestreview-434598862", "createdAt": "2020-06-22T04:40:42Z", "commit": {"oid": "5a06a03ff583356d6fa37765615c955b4610e4a0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNDo0MDo0MlrOGmxuZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNDo0MDo0MlrOGmxuZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMxMzc2Ng==", "bodyText": "shouldn't the subscription call happen if api.lifeCycleStatus.toLowerCase() !== 'prototyped') ?", "url": "https://github.com/wso2/carbon-apimgt/pull/8761#discussion_r443313766", "createdAt": "2020-06-22T04:40:42Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.store.feature/src/main/resources/devportal/source/src/app/components/Apis/Details/ApiConsole/TryOutController.jsx", "diffHunk": "@@ -124,39 +124,52 @@ function TryOutController(props) {\n         let keys;\n         let selectedKeyTypes = 'PRODUCTION';\n         let accessToken;\n-        const promiseSubscriptions = restApi.getSubscriptions(apiID);\n-        promiseSubscriptions.then((subscriptionsResponse) => {\n-            if (subscriptionsResponse !== null) {\n-                subscriptionsList = subscriptionsResponse.obj.list.filter((item) => item.status === 'UNBLOCKED'\n-                || item.status === 'PROD_ONLY_BLOCKED');\n+        if (!api.lifeCycleStatus && api.lifeCycleStatus.toLowerCase() === 'prototyped') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a06a03ff583356d6fa37765615c955b4610e4a0"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NjAwODcz", "url": "https://github.com/wso2/carbon-apimgt/pull/8761#pullrequestreview-434600873", "createdAt": "2020-06-22T04:48:30Z", "commit": {"oid": "5a06a03ff583356d6fa37765615c955b4610e4a0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNDo0ODozMFrOGmx0Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNDo0ODozMFrOGmx0Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMxNTI5NQ==", "bodyText": "shouldn't the subscription call happen if api.lifeCycleStatus.toLowerCase() !== 'prototyped') ?", "url": "https://github.com/wso2/carbon-apimgt/pull/8761#discussion_r443315295", "createdAt": "2020-06-22T04:48:30Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.store.feature/src/main/resources/devportal/source/src/app/components/Apis/Details/ApiConsole/TryOutController.jsx", "diffHunk": "@@ -169,77 +182,68 @@ function TryOutController(props) {\n                     }\n                     setSelectedKeyType(selectedKeyType, false);\n                 }\n-            } else {\n-                setSelectedApplication(newSelectedApplication);\n-                setSubscriptions(subscriptionsList);\n-                setKeys(keys);\n-                setSelectedEnvironment(selectedEnvironment, false);\n-                if (selectedKeyType === 'PRODUCTION') {\n-                    setProductionAccessToken(accessToken);\n-                } else {\n-                    setSandboxAccessToken(accessToken);\n-                }\n-                setSelectedKeyType(selectedKeyType, false);\n-            }\n-        }).catch((error) => {\n-            if (process.env.NODE_ENV !== 'production') {\n-                console.error(error);\n-            }\n-            const { status } = error;\n-            if (status === 404) {\n-                setNotFound(true);\n-            }\n-        });\n-        const promisedKeyManagers = restApi.getKeyManagers();\n-        promisedKeyManagers\n-            .then((response) => {\n-                const responseKeyManagerList = [];\n-                response.body.list.map((item) => responseKeyManagerList.push(item));\n-                setKeyManagers(responseKeyManagerList);\n-            })\n-            .catch((error) => {\n+            }).catch((error) => {\n                 if (process.env.NODE_ENV !== 'production') {\n-                    console.log(error);\n+                    console.error(error);\n                 }\n                 const { status } = error;\n                 if (status === 404) {\n                     setNotFound(true);\n                 }\n             });\n+            const promisedKeyManagers = restApi.getKeyManagers();\n+            promisedKeyManagers\n+                .then((response) => {\n+                    const responseKeyManagerList = [];\n+                    response.body.list.map((item) => responseKeyManagerList.push(item));\n+                    setKeyManagers(responseKeyManagerList);\n+                })\n+                .catch((error) => {\n+                    if (process.env.NODE_ENV !== 'production') {\n+                        console.log(error);\n+                    }\n+                    const { status } = error;\n+                    if (status === 404) {\n+                        setNotFound(true);\n+                    }\n+                });\n+        }\n     }, []);\n \n \n     /**\n      * Generate access token\n      * */\n     function generateAccessToken() {\n-        setIsUpdating(true);\n-        const applicationPromise = Application.get(selectedApplication);\n-        applicationPromise\n-            .then((application) => application.generateToken(\n-                selectedKeyManager,\n-                selectedKeyType,\n-                3600,\n-                scopes,\n-            ))\n-            .then((response) => {\n-                console.log('token generated successfully ' + response);\n-                setShowToken(false);\n-                if (selectedKeyType === 'PRODUCTION') {\n-                    setProductionAccessToken(response.accessToken);\n-                } else {\n-                    setSandboxAccessToken(response.accessToken);\n-                }\n-                setIsUpdating(false);\n-            })\n-            .catch((error) => {\n-                console.error(error);\n-                const { status } = error;\n-                if (status === 404) {\n-                    setNotFound(true);\n-                }\n-                setIsUpdating(false);\n-            });\n+        if (!api.lifeCycleStatus && api.lifeCycleStatus.toLowerCase() === 'prototyped') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a06a03ff583356d6fa37765615c955b4610e4a0"}, "originalPosition": 179}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8ca7586d1fdc2c4203f90a7ffaec0f782c0c7fa", "author": {"user": {"login": "hasuniea", "name": "Hasunie"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/c8ca7586d1fdc2c4203f90a7ffaec0f782c0c7fa", "committedDate": "2020-06-25T10:45:16Z", "message": "adding testKey improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fea7851599d37e200fdde4e88a5c2e2eab3881a9", "author": {"user": {"login": "hasuniea", "name": "Hasunie"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/fea7851599d37e200fdde4e88a5c2e2eab3881a9", "committedDate": "2020-06-26T05:57:49Z", "message": "fixing prototype state issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25fc86a94b997dd540ec92f850bcdf09b0164c18", "author": {"user": {"login": "hasuniea", "name": "Hasunie"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/25fc86a94b997dd540ec92f850bcdf09b0164c18", "committedDate": "2020-06-26T07:28:21Z", "message": "removed logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27933d3acfd80bff82074810077ec9679c0351be", "author": {"user": {"login": "hasuniea", "name": "Hasunie"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/27933d3acfd80bff82074810077ec9679c0351be", "committedDate": "2020-06-26T07:41:27Z", "message": "fixing loging issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTM0ODAx", "url": "https://github.com/wso2/carbon-apimgt/pull/8761#pullrequestreview-438134801", "createdAt": "2020-06-26T09:05:47Z", "commit": {"oid": "27933d3acfd80bff82074810077ec9679c0351be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3c637c881ef3074513bb7fead6e41ff21dda32e", "author": {"user": {"login": "hasuniea", "name": "Hasunie"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/b3c637c881ef3074513bb7fead6e41ff21dda32e", "committedDate": "2020-06-26T09:15:10Z", "message": "fixing merge conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTUwNjY2", "url": "https://github.com/wso2/carbon-apimgt/pull/8761#pullrequestreview-438150666", "createdAt": "2020-06-26T09:29:49Z", "commit": {"oid": "b3c637c881ef3074513bb7fead6e41ff21dda32e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2655, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}