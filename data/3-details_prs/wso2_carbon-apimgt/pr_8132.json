{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4OTc3NDU2", "number": 8132, "title": "Button from the Publisher UI to Download APIs", "bodyText": "This pull request contains a button from the Publisher UI to Download A directory of an API.", "createdAt": "2020-01-30T09:50:10Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8132", "merged": true, "mergeCommit": {"oid": "aceeae2183e174f0cfceb576647d5e29c1265694"}, "closed": true, "closedAt": "2020-01-31T11:31:41Z", "author": {"login": "VimukthiMayadunne"}, "timelineItems": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8aiObAH2gAyMzY4OTc3NDU2OmY1MWU3Y2I2YWFhMmUxNzZhYjc5ZGRkNjI1MWRkMzcwZjdiY2FiZGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_teaJAFqTM1MTQ0Njk0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f51e7cb6aaa2e176ab79ddd6251dd370f7bcabdc", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/f51e7cb6aaa2e176ab79ddd6251dd370f7bcabdc", "committedDate": "2020-01-21T05:45:18Z", "message": "Adding ExportApi to publisher v1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de22e91edd44456047b4307ef8096fc1c9547134", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/de22e91edd44456047b4307ef8096fc1c9547134", "committedDate": "2020-01-22T09:24:43Z", "message": "Creatinng a button in the Frontend"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94f8a4293cb60efbaaa4a070dd5921e5cace2750", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/94f8a4293cb60efbaaa4a070dd5921e5cace2750", "committedDate": "2020-01-22T09:27:58Z", "message": "Exporting an API as a zip file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b4c6d43fdb49d0ad2fcbc328a1d113e7e92eec4", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/3b4c6d43fdb49d0ad2fcbc328a1d113e7e92eec4", "committedDate": "2020-01-23T03:51:12Z", "message": "Adding apim:create to scopes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b34ad77796e10b243dabaf3487ee7956d078935", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/7b34ad77796e10b243dabaf3487ee7956d078935", "committedDate": "2020-01-23T09:51:36Z", "message": "Minor Changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "280893e6b20485a00ffd0e821794a6a330d04094", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/280893e6b20485a00ffd0e821794a6a330d04094", "committedDate": "2020-01-23T09:53:39Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt into importApi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccdaeae0de3d81b375aa6b3f0cc8d1e7d475cd04", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/ccdaeae0de3d81b375aa6b3f0cc8d1e7d475cd04", "committedDate": "2020-01-24T04:23:06Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt into importApi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a77185d7026b6c1f86660017d583a37e4539543", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/5a77185d7026b6c1f86660017d583a37e4539543", "committedDate": "2020-01-24T08:38:58Z", "message": "Minor Changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "831cd479295c7ae2da33f3871f0d71a32ac4f4c0", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/831cd479295c7ae2da33f3871f0d71a32ac4f4c0", "committedDate": "2020-01-24T09:14:24Z", "message": "Adding jsdocs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68d50777e10b7ef6b01c48ef154beb530fd74fd3", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/68d50777e10b7ef6b01c48ef154beb530fd74fd3", "committedDate": "2020-01-27T11:06:34Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt into importApi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9482205d79076942380e95bee375481c3c0d9cc", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/a9482205d79076942380e95bee375481c3c0d9cc", "committedDate": "2020-01-28T04:02:35Z", "message": "minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "796daa34486d7c42d5f35aaa58ffa14ce978724c", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/796daa34486d7c42d5f35aaa58ffa14ce978724c", "committedDate": "2020-01-28T09:11:49Z", "message": "Creating ExportApi class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25aeff6969605965642599a79e16497e11d3ddbe", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/25aeff6969605965642599a79e16497e11d3ddbe", "committedDate": "2020-01-29T06:58:16Z", "message": "Changing Visibility"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75b8a1f40693be10d2671f1d1c2a894de2fe836a", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/75b8a1f40693be10d2671f1d1c2a894de2fe836a", "committedDate": "2020-01-30T08:02:54Z", "message": "Moving Busiines logic to the impl layer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce943f787a9b92e3a7c1e071b5d05c6506e67bc0", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/ce943f787a9b92e3a7c1e071b5d05c6506e67bc0", "committedDate": "2020-01-30T08:08:35Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt into importApi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b472dc1a182571cd0ef21a8476233930c09edec", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/9b472dc1a182571cd0ef21a8476233930c09edec", "committedDate": "2020-01-30T14:13:45Z", "message": "Intorducing UUID as a query parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63faf060efce6da3b561a01303ae85c64405c4fa", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/63faf060efce6da3b561a01303ae85c64405c4fa", "committedDate": "2020-01-30T14:14:53Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt into importApi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fb20e797e7609a20d534bad0fc7ba1212869ead", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/4fb20e797e7609a20d534bad0fc7ba1212869ead", "committedDate": "2020-01-30T16:04:17Z", "message": "Removing UUID as query param"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "758a2291ec69d8747e52941f8e14026d7616a4e2", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/758a2291ec69d8747e52941f8e14026d7616a4e2", "committedDate": "2020-01-31T01:05:05Z", "message": "minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e17a61c7f1df1c5cbeb2f17879eafc76f9be5e1", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/1e17a61c7f1df1c5cbeb2f17879eafc76f9be5e1", "committedDate": "2020-01-31T05:29:02Z", "message": "Introdusing UUID as a query param"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c9be698787feb125a4ea5faf797ddc9c0f52d59", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/9c9be698787feb125a4ea5faf797ddc9c0f52d59", "committedDate": "2020-01-31T06:22:28Z", "message": "Code formating"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36415195e605fd76c5c7f886b4af158a3fa0be9f", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/36415195e605fd76c5c7f886b4af158a3fa0be9f", "committedDate": "2020-01-31T06:23:45Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt into importApi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27ddf2a5412106d415666878af1f98a805ba40c8", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/27ddf2a5412106d415666878af1f98a805ba40c8", "committedDate": "2020-01-31T07:59:34Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt into importApi"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMzY3MjY2", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#pullrequestreview-351367266", "createdAt": "2020-01-31T09:02:04Z", "commit": {"oid": "27ddf2a5412106d415666878af1f98a805ba40c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwOTowMjowNFrOFkFACw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwOTowMjowNFrOFkFACw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM3NDk4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        RestApiUtil.handleBadRequest(\"None of 'name', 'version' or 'provider' should not be null\", log);\n          \n          \n            \n                        RestApiUtil.handleBadRequest(\"'name', 'version' or 'provider' should not be null\", log);", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#discussion_r373374987", "createdAt": "2020-01-31T09:02:04Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "diffHunk": "@@ -0,0 +1,136 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.wso2.carbon.apimgt.rest.api.util.impl;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n+import org.wso2.carbon.apimgt.api.APIProvider;\n+import org.wso2.carbon.apimgt.api.model.APIIdentifier;\n+import org.wso2.carbon.apimgt.impl.importexport.APIImportExportException;\n+import org.wso2.carbon.apimgt.impl.importexport.ExportFormat;\n+import org.wso2.carbon.apimgt.impl.importexport.utils.APIExportUtil;\n+import org.wso2.carbon.apimgt.impl.utils.APIUtil;\n+import org.wso2.carbon.apimgt.rest.api.util.RestApiConstants;\n+import org.wso2.carbon.apimgt.rest.api.util.utils.RestApiUtil;\n+import org.wso2.carbon.utils.multitenancy.MultitenantUtils;\n+\n+import javax.ws.rs.core.Response;\n+import java.io.File;\n+\n+public class ExportApiUtil {\n+    private static final Log log = LogFactory.getLog(ExportApiUtil.class);\n+    private static final String APPLICATION_EXPORT_DIR_PREFIX = \"exported-app-archives-\";\n+    private static final String DEFAULT_APPLICATION_EXPORT_DIR = \"exported-application\";\n+    private static final String PRODUCTION = \"PRODUCTION\";\n+    private static final String SANDBOX = \"SANDBOX\";\n+\n+    /**\n+     * Exports an API from API Manager for a given API ID. Meta information, API icon, documentation, WSDL\n+     * and sequences are exported. This service generates a zipped archive which contains all the above mentioned\n+     * resources for a given API.\n+     *\n+     * @param name           Name of the API that needs to be exported\n+     * @param version        Version of the API that needs to be exported\n+     * @param providerName   Provider name of the API that needs to be exported\n+     * @param format         Format of output documents. Can be YAML or JSON\n+     * @param preserveStatus Preserve API status on export\n+     * @return Zipped file containing exported API\n+     */\n+\n+    public Response exportApiByParams(String name, String version, String providerName, String format, Boolean preserveStatus) {\n+        ExportFormat exportFormat;\n+        String userName;\n+        APIIdentifier apiIdentifier;\n+        APIProvider apiProvider;\n+        String apiDomain;\n+        String apiRequesterDomain;\n+        File file;\n+        //If not specified status is preserved by default\n+        boolean isStatusPreserved = preserveStatus == null || preserveStatus;\n+\n+        if (name == null || version == null || providerName == null) {\n+            RestApiUtil.handleBadRequest(\"None of 'name', 'version' or 'provider' should not be null\", log);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27ddf2a5412106d415666878af1f98a805ba40c8"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMzY3ODAw", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#pullrequestreview-351367800", "createdAt": "2020-01-31T09:03:04Z", "commit": {"oid": "27ddf2a5412106d415666878af1f98a805ba40c8"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwOTowMzowNFrOFkFBbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwOTowNzo0MVrOFkFIFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM3NTM0MA==", "bodyText": "Remove unused constants", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#discussion_r373375340", "createdAt": "2020-01-31T09:03:04Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "diffHunk": "@@ -0,0 +1,136 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.wso2.carbon.apimgt.rest.api.util.impl;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.wso2.carbon.apimgt.api.APIManagementException;\n+import org.wso2.carbon.apimgt.api.APIProvider;\n+import org.wso2.carbon.apimgt.api.model.APIIdentifier;\n+import org.wso2.carbon.apimgt.impl.importexport.APIImportExportException;\n+import org.wso2.carbon.apimgt.impl.importexport.ExportFormat;\n+import org.wso2.carbon.apimgt.impl.importexport.utils.APIExportUtil;\n+import org.wso2.carbon.apimgt.impl.utils.APIUtil;\n+import org.wso2.carbon.apimgt.rest.api.util.RestApiConstants;\n+import org.wso2.carbon.apimgt.rest.api.util.utils.RestApiUtil;\n+import org.wso2.carbon.utils.multitenancy.MultitenantUtils;\n+\n+import javax.ws.rs.core.Response;\n+import java.io.File;\n+\n+public class ExportApiUtil {\n+    private static final Log log = LogFactory.getLog(ExportApiUtil.class);\n+    private static final String APPLICATION_EXPORT_DIR_PREFIX = \"exported-app-archives-\";\n+    private static final String DEFAULT_APPLICATION_EXPORT_DIR = \"exported-application\";\n+    private static final String PRODUCTION = \"PRODUCTION\";\n+    private static final String SANDBOX = \"SANDBOX\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27ddf2a5412106d415666878af1f98a805ba40c8"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM3NTgwNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    - APIs (Individual)\n          \n          \n            \n                    - Import Export", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#discussion_r373375806", "createdAt": "2020-01-31T09:04:16Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/resources/publisher-api.yaml", "diffHunk": "@@ -3569,6 +3569,94 @@ paths:\n           schema:\n             $ref: '#/definitions/Error'\n \n+  ######################################################\n+  # Export Resource API\n+  ######################################################\n+  '/apis/export':\n+    #--------------------------------------------------------\n+    # Get an API as a Zip File\n+    #--------------------------------------------------------\n+    get:\n+      security:\n+        - OAuth2Security:\n+            - apim:api_publish\n+            - apim:api_create\n+      produces:\n+        - application/zip\n+      x-wso2-curl: \"curl -k -H \\\"Authorization: Bearer ae4eae22-3f65-387b-a171-d37eaa366fa8\\\" -X GET https://localhost:9443/api/am/publisher/v1/export/api?name=PizzaShackAPI&version=1.0.0&providerName=admin > exportAPI.zip\"\n+      x-wso2-request: |\n+        GET https://localhost:9443/api/am/publisher/v1/export/api?name=SampleAPI&version=1.0.0&providerName=admin\n+        Authorization: Bearer ae4eae22-3f65-387b-a171-d37eaa366fa8\n+      x-wso2-response: \"HTTP/1.1 200 OK\\n Connection: keep-alive\\n  Content-Disposition: attachment; filename=\\\"exported-api.zip\\\"\\n  Content-Type: application/zip\"\n+      summary: Export an API\n+      description: |\n+        This operation can be used to export the details of a particular API as a zip file.\n+      parameters:\n+        - in: query\n+          name: apiId\n+          required: false\n+          type: string\n+          description: UUID of the API\n+        - name: name\n+          in: query\n+          description: |\n+            API Name\n+          required: false\n+          type: string\n+        - name: version\n+          in: query\n+          description: |\n+            Version of the API\n+          required: false\n+          type: string\n+        - name: providerName\n+          in: query\n+          description: |\n+            Provider name of the API\n+          required: false\n+          type: string\n+        - name: format\n+          in: query\n+          description: |\n+            Format of output documents. Can be YAML or JSON.\n+          type: string\n+          enum:\n+            - JSON\n+            - YAML\n+          required: false\n+        - name: preserveStatus\n+          in: query\n+          description: |\n+            Preserve API Status on export\n+          required: false\n+          type: boolean\n+      tags:\n+        - APIs (Individual)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27ddf2a5412106d415666878af1f98a805ba40c8"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM3NzA0NA==", "bodyText": "Can we remove async here?", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#discussion_r373377044", "createdAt": "2020-01-31T09:07:41Z", "author": {"login": "malinthaprasan"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/components/APIDetailsTopMenu.jsx", "diffHunk": "@@ -59,13 +66,52 @@ const styles = (theme) => ({\n         textOverflow: 'ellipsis',\n         whiteSpace: 'nowrap',\n     },\n+    downloadApi: {\n+        display: 'flex',\n+        flexDirection: 'column',\n+        textAlign: 'center',\n+        justifyContent: 'center',\n+        cursor: 'pointer',\n+        height: 70,\n+        color: theme.palette.getContrastText(theme.palette.background.paper),\n+    },\n+    downloadApiFlex: {\n+        display: 'flex',\n+        flexDirection: 'column',\n+    },\n });\n \n+\n const APIDetailsTopMenu = (props) => {\n     const {\n         classes, theme, api, isAPIProduct, imageUpdate,\n     } = props;\n     const isVisibleInStore = ['PROTOTYPED', 'PUBLISHED'].includes(api.lifeCycleStatus);\n+    /**\n+ * The component for advanced endpoint configurations.\n+ * @param {string} name The name of the\n+ * @param {string} version Version of the API\n+ * @param {string} provider Provider of the API\n+ * @param {string} format Weather to recive files in YALM of JSON format\n+ * @returns {zip} Zpi file containing the API directory.\n+ */\n+    async function exportAPI() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27ddf2a5412106d415666878af1f98a805ba40c8"}, "originalPosition": 67}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2cfcc1cdb910a92d88d3327deb11fc369a990a9", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/b2cfcc1cdb910a92d88d3327deb11fc369a990a9", "committedDate": "2020-01-31T09:33:02Z", "message": "Minor Changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4cf3893d9090895e23a637f7f4f085bda6d955b", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/f4cf3893d9090895e23a637f7f4f085bda6d955b", "committedDate": "2020-01-31T09:45:31Z", "message": "Removing Async function"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNDA5NzAz", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#pullrequestreview-351409703", "createdAt": "2020-01-31T10:19:14Z", "commit": {"oid": "f4cf3893d9090895e23a637f7f4f085bda6d955b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxMDoxOToxNFrOFkG-2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxMDoxOToxNFrOFkG-2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQwNzQ1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Download API\n          \n          \n            \n                            <FormattedMessage\n          \n          \n            \n                                id='Apis.Details.APIDetailsTopMenu.download.api'\n          \n          \n            \n                                defaultMessage='Download API'\n          \n          \n            \n                            />", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#discussion_r373407451", "createdAt": "2020-01-31T10:19:14Z", "author": {"login": "malinthaprasan"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/components/APIDetailsTopMenu.jsx", "diffHunk": "@@ -135,7 +180,26 @@ const APIDetailsTopMenu = (props) => {\n                     </Typography>\n                 </a>\n             )}\n+            {/* Page error banner */}\n+            {/* end of Page error banner */}\n             {isAPIProduct ? null : <CreateNewVersionButton buttonClass={classes.viewInStoreLauncher} api={api} />}\n+            {(isDownlodable) && <VerticalDivider height={70} />}\n+            <div className={classes.downloadApi}>\n+                {(isDownlodable) && (\n+                    <a\n+                        onClick={exportAPI}\n+                        onKeyDown='null'\n+                        className={classes.downloadApiFlex}\n+                    >\n+                        <div>\n+                            <CloudDownloadRounded />\n+                        </div>\n+                        <Typography variant='caption' align='left'>\n+                    Download API", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4cf3893d9090895e23a637f7f4f085bda6d955b"}, "originalPosition": 105}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNDExOTEw", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#pullrequestreview-351411910", "createdAt": "2020-01-31T10:23:12Z", "commit": {"oid": "f4cf3893d9090895e23a637f7f4f085bda6d955b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxMDoyMzoxMlrOFkHFVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxMDoyMzoxMlrOFkHFVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQwOTEwOQ==", "bodyText": "typo: downloding -> downloading\nAlso, we need to use internationalization.\nCheck GeneralConfiguration.jsx.\n                    Alert.error(intl.formatMessage({\n                        id: 'Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.error',\n                        defaultMessage: 'Something went wrong while adding the certificate.',\n                    }));\n\ninclude intl in props,\nuse injectIntl like below:\nexport default injectIntl(withStyles(styles)(GeneralConfiguration));", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#discussion_r373409109", "createdAt": "2020-01-31T10:23:12Z", "author": {"login": "malinthaprasan"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/components/APIDetailsTopMenu.jsx", "diffHunk": "@@ -59,13 +66,51 @@ const styles = (theme) => ({\n         textOverflow: 'ellipsis',\n         whiteSpace: 'nowrap',\n     },\n+    downloadApi: {\n+        display: 'flex',\n+        flexDirection: 'column',\n+        textAlign: 'center',\n+        justifyContent: 'center',\n+        cursor: 'pointer',\n+        height: 70,\n+        color: theme.palette.getContrastText(theme.palette.background.paper),\n+    },\n+    downloadApiFlex: {\n+        display: 'flex',\n+        flexDirection: 'column',\n+    },\n });\n \n+\n const APIDetailsTopMenu = (props) => {\n     const {\n         classes, theme, api, isAPIProduct, imageUpdate,\n     } = props;\n     const isVisibleInStore = ['PROTOTYPED', 'PUBLISHED'].includes(api.lifeCycleStatus);\n+    /**\n+ * The component for advanced endpoint configurations.\n+ * @param {string} name The name of the\n+ * @param {string} version Version of the API\n+ * @param {string} provider Provider of the API\n+ * @param {string} format Weather to recive files in YALM of JSON format\n+ * @returns {zip} Zpi file containing the API directory.\n+ */\n+    function exportAPI() {\n+        const restApi = new API();\n+        return restApi.exportApi(api.id).then((zipFile) => {\n+            return Utils.forceDownload(zipFile);\n+        }).catch((error) => {\n+            if (error.response) {\n+                Alert.error(error.response.body.description);\n+            } else {\n+                const message = 'Something went wrong while downloding the API';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4cf3893d9090895e23a637f7f4f085bda6d955b"}, "originalPosition": 75}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e2ac466360ae7603cb0f3e62ba00406b4fc6e3d", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/7e2ac466360ae7603cb0f3e62ba00406b4fc6e3d", "committedDate": "2020-01-31T10:49:35Z", "message": "UI code formating"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ee8c394667cf612e844aec8a8c840a7afbf86ce", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/8ee8c394667cf612e844aec8a8c840a7afbf86ce", "committedDate": "2020-01-31T10:59:45Z", "message": "UI code formating"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ed96f90d5c0df86aac74f426c80e1477006ac3e", "author": {"user": {"login": "VimukthiMayadunne", "name": "Vimukthi Mayadunne"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/4ed96f90d5c0df86aac74f426c80e1477006ac3e", "committedDate": "2020-01-31T11:01:12Z", "message": "UI code formating"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNDQ2OTQw", "url": "https://github.com/wso2/carbon-apimgt/pull/8132#pullrequestreview-351446940", "createdAt": "2020-01-31T11:31:06Z", "commit": {"oid": "4ed96f90d5c0df86aac74f426c80e1477006ac3e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2970, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}