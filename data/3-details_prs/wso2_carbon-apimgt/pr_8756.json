{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0ODE2MjM0", "number": 8756, "title": "Added search and reformated the workflow pending requests UI for admin dashboard", "bodyText": "", "createdAt": "2020-06-15T21:33:56Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8756", "merged": true, "mergeCommit": {"oid": "e6e9e382814ee7d6b2cdbd07a966471f0f59c3ed"}, "closed": true, "closedAt": "2020-06-29T12:44:40Z", "author": {"login": "SahanHerath"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqR-4LAH2gAyNDM0ODE2MjM0OjIyNTA3NDQyYmM3NjIwNzUyZWE0ZGI3NzAwYTA3ODM1ZmExZTkyYTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcv_cvWAFqTQzOTA1MDUwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "22507442bc7620752ea4db7700a07835fa1e92a1", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/22507442bc7620752ea4db7700a07835fa1e92a1", "committedDate": "2020-06-11T17:47:58Z", "message": "added untracked files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72b516a3c049e90d078e459f62c45e75a83f736b", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/72b516a3c049e90d078e459f62c45e75a83f736b", "committedDate": "2020-06-11T17:49:35Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd105562e74a2e1673ad9c3520e474d95883d2df", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/cd105562e74a2e1673ad9c3520e474d95883d2df", "committedDate": "2020-06-15T19:25:40Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "857a78ea0514dc97ec2d56135ea3eda6ec256360", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/857a78ea0514dc97ec2d56135ea3eda6ec256360", "committedDate": "2020-06-15T20:21:50Z", "message": "Updated the reformatted the workflow pending request UI for admin dashboard addded search for tables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "578c47c0ae04623b2700ed763f7c09a4fd43b9aa", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/578c47c0ae04623b2700ed763f7c09a4fd43b9aa", "committedDate": "2020-06-16T19:50:27Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da3055b2ca127d19fb88a80ab229ef3c0392b0b3", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/da3055b2ca127d19fb88a80ab229ef3c0392b0b3", "committedDate": "2020-06-16T21:30:00Z", "message": "updated test dbscripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3030f10662f418edf6dde17407bc1c3a6f711920", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/3030f10662f418edf6dde17407bc1c3a6f711920", "committedDate": "2020-06-17T07:26:46Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "563b8a126afca95c26240d97d453eb3e353d8668", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/563b8a126afca95c26240d97d453eb3e353d8668", "committedDate": "2020-06-17T07:31:36Z", "message": "object destructuring in apicall()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b226676508b4cff04320d2cb7062dee7ad80b0ee", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/b226676508b4cff04320d2cb7062dee7ad80b0ee", "committedDate": "2020-06-18T03:15:31Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27b2b41ac0954f7ccf01c49a35b89c6bebff5e91", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/27b2b41ac0954f7ccf01c49a35b89c6bebff5e91", "committedDate": "2020-06-18T22:08:17Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee1992442022a8a9aa13081887f082ad87714a0a", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/ee1992442022a8a9aa13081887f082ad87714a0a", "committedDate": "2020-06-19T05:55:20Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62bb8811f0b48fd6ea9fe36032621e434e5dc36e", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/62bb8811f0b48fd6ea9fe36032621e434e5dc36e", "committedDate": "2020-06-19T05:59:41Z", "message": "Added debug logs and change description for workflow request rejection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c52924ba7f1ad04120cd713524ad3d54cc2383b", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/1c52924ba7f1ad04120cd713524ad3d54cc2383b", "committedDate": "2020-06-25T16:53:08Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "committedDate": "2020-06-25T21:37:05Z", "message": "Changes in ApplicationCreation.jsx and WorkflowConstants.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MDM5NzIx", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#pullrequestreview-438039721", "createdAt": "2020-06-26T06:20:29Z", "commit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoyMDozMFrOGpVBTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoyNTowM1rOGpVG0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTE5OA==", "bodyText": "Shall we Internationalise the static message?", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989198", "createdAt": "2020-06-26T06:20:30Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/APIStateChange.jsx", "diffHunk": "@@ -97,10 +91,22 @@ function ListLabels() {\n         return restApi\n             .workflowsGet('AM_API_STATE')\n             .then((result) => {\n-                const workflowlist = result.body.list;\n-                return (workflowlist);\n+                const workflowlist = result.body.list.map((obj) => {\n+                    return {\n+                        description: obj.description,\n+                        api: obj.properties.apiName + '-' + obj.properties.apiVersion,\n+                        action: obj.properties.action,\n+                        currentState: obj.properties.currentState,\n+                        apiProvider: obj.properties.currentState,\n+                        referenceId: obj.referenceId,\n+                        createdTime: obj.createdTime,\n+                        properties: obj.properties,\n+                    };\n+                });\n+                return workflowlist;\n             })\n             .catch((error) => {\n+                Alert.error('Unable to get workflow pending requests for API State Change', error.message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTQwNg==", "bodyText": "Internationalize the static message", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989406", "createdAt": "2020-06-26T06:21:11Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/APIStateChange.jsx", "diffHunk": "@@ -113,8 +119,8 @@ function ListLabels() {\n             setData(LocalData);\n         })\n             .catch((e) => {\n-                Alert.error('Unable to fetch data ' + e);\n-                console.error('Unable to fetch data ' + e);\n+                Alert.error('Unable to fetch data. ', e.message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTU2Mw==", "bodyText": "Internationalise these texts", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989563", "createdAt": "2020-06-26T06:21:44Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/APIStateChange.jsx", "diffHunk": "@@ -123,10 +129,13 @@ function ListLabels() {\n     }, []);\n \n     const updateStatus = (referenceId, value) => {\n-        const body = {};\n-        body.status = value;\n-        body.attributes = {};\n-        body.description = 'Approve workflow request.';\n+        const body = { status: value, attributes: {}, description: '' };\n+        if (value === 'APPROVED') {\n+            body.description = 'Approve workflow request.';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTY0Ng==", "bodyText": "Internationalise static message", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989646", "createdAt": "2020-06-26T06:21:58Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/APIStateChange.jsx", "diffHunk": "@@ -141,7 +150,7 @@ function ListLabels() {\n             .catch((error) => {\n                 const { response } = error;\n                 if (response.body) {\n-                    response.body.description = 'Unable to complete API state change approve/reject process';\n+                    Alert.error('Unable to complete API state change approve/reject process. ', error.message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTc2MA==", "bodyText": "Internationalise static message", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989760", "createdAt": "2020-06-26T06:22:23Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -102,10 +95,21 @@ function ListLabels() {\n         return restApi\n             .workflowsGet('AM_APPLICATION_CREATION')\n             .then((result) => {\n-                const workflowlist = result.body.list;\n-                return (workflowlist);\n+                const workflowlist = result.body.list.map((obj) => {\n+                    return {\n+                        description: obj.description,\n+                        applicationName: obj.properties.applicationName,\n+                        applicationTier: obj.properties.applicationTier,\n+                        userName: obj.properties.userName,\n+                        referenceId: obj.referenceId,\n+                        createdTime: obj.createdTime,\n+                        properties: obj.properties,\n+                    };\n+                });\n+                return workflowlist;\n             })\n             .catch((error) => {\n+                Alert.error('Unable to get workflow pending requests for Application Creation', error.message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTgzNg==", "bodyText": "Internationalise static message", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989836", "createdAt": "2020-06-26T06:22:37Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -118,8 +122,8 @@ function ListLabels() {\n             setData(LocalData);\n         })\n             .catch((e) => {\n-                Alert.error('Unable to fetch data ' + e);\n-                console.error('Unable to fetch data ' + e);\n+                Alert.error('Unable to fetch data. ', e.message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDExNg==", "bodyText": "Why are we showing a static error and the error from backend as well?", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445990116", "createdAt": "2020-06-26T06:23:25Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/APIStateChange.jsx", "diffHunk": "@@ -113,8 +119,8 @@ function ListLabels() {\n             setData(LocalData);\n         })\n             .catch((e) => {\n-                Alert.error('Unable to fetch data ' + e);\n-                console.error('Unable to fetch data ' + e);\n+                Alert.error('Unable to fetch data. ', e.message);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTQwNg=="}, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDM1OQ==", "bodyText": "Why are we showing a static error and error from backend as well? Check these in other places as well", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445990359", "createdAt": "2020-06-26T06:24:19Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -102,10 +95,21 @@ function ListLabels() {\n         return restApi\n             .workflowsGet('AM_APPLICATION_CREATION')\n             .then((result) => {\n-                const workflowlist = result.body.list;\n-                return (workflowlist);\n+                const workflowlist = result.body.list.map((obj) => {\n+                    return {\n+                        description: obj.description,\n+                        applicationName: obj.properties.applicationName,\n+                        applicationTier: obj.properties.applicationTier,\n+                        userName: obj.properties.userName,\n+                        referenceId: obj.referenceId,\n+                        createdTime: obj.createdTime,\n+                        properties: obj.properties,\n+                    };\n+                });\n+                return workflowlist;\n             })\n             .catch((error) => {\n+                Alert.error('Unable to get workflow pending requests for Application Creation', error.message);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTc2MA=="}, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDQzNA==", "bodyText": "same here", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445990434", "createdAt": "2020-06-26T06:24:30Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -146,7 +153,7 @@ function ListLabels() {\n             .catch((error) => {\n                 const { response } = error;\n                 if (response.body) {\n-                    response.body.description = 'Unable to complete application creation approve/reject process';\n+                    Alert.error('Unable to complete application creation approve/reject process. ', error.message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDUyMw==", "bodyText": "Shall we remove commented code?", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445990523", "createdAt": "2020-06-26T06:24:49Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -228,24 +227,29 @@ function ListLabels() {\n             }),\n             options: {\n                 sort: false,\n-                customBodyRender: (value, tableMeta) => {\n-                    const dataRow = data[tableMeta.rowIndex];\n-                    const { properties } = dataRow;\n-                    return (\n-                        <div>\n-                            {properties.applicationTier}\n-                        </div>\n-                    );\n-                },\n+                filter: true,\n             },\n         },\n         {\n-            name: 'creater',\n+            name: 'userName',\n             label: intl.formatMessage({\n-                id: 'Workflow.ApplicationCreation.table.header.Creater',\n+                id: 'Workflow.ApplicationCreation.table.header.userName',\n                 defaultMessage: 'Created by',\n             }),\n             options: {\n+                sort: false,\n+                /* customSort: (data1, colIndex, order) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 166}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDYxMQ==", "bodyText": "Remove extra line", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445990611", "createdAt": "2020-06-26T06:25:03Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -332,6 +334,7 @@ function ListLabels() {\n \n     const columns = [\n         ...columProps,\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28"}, "originalPosition": 194}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eed3d4f0debaad839fcf6ba799444acc796bec02", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/eed3d4f0debaad839fcf6ba799444acc796bec02", "committedDate": "2020-06-26T14:26:00Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c884f83b4edd225595a5103e269b524c323ea8c", "author": {"user": {"login": "SahanHerath", "name": "Sahan Herath"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/9c884f83b4edd225595a5103e269b524c323ea8c", "committedDate": "2020-06-26T14:30:40Z", "message": "updated static messages for errors and alerts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MDUwNTAy", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#pullrequestreview-439050502", "createdAt": "2020-06-29T11:35:56Z", "commit": {"oid": "9c884f83b4edd225595a5103e269b524c323ea8c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2651, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}