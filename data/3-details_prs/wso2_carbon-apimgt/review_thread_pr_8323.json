{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0Nzg5NDUz", "number": 8323, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNDoyNlrODlxrmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNjoyMTo0NlrODmjt6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTM3ODgxOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.api/src/main/java/org/wso2/carbon/apimgt/api/model/APIResourceMediationPolicy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNDoyNlrOFy2v6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNDoyNlrOFy2v6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg3MDEyMA==", "bodyText": "Add class comment", "url": "https://github.com/wso2/carbon-apimgt/pull/8323#discussion_r388870120", "createdAt": "2020-03-06T12:14:26Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.api/src/main/java/org/wso2/carbon/apimgt/api/model/APIResourceMediationPolicy.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package org.wso2.carbon.apimgt.api.model;\n+\n+public class APIResourceMediationPolicy {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1537f61fda368c57f6fcfc728ce6106f8c7c78b9"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTM3OTIxOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.api/src/main/java/org/wso2/carbon/apimgt/api/model/APIResourceMediationPolicy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNDozNlrOFy2wKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNDozNlrOFy2wKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg3MDE4NQ==", "bodyText": "Add license header", "url": "https://github.com/wso2/carbon-apimgt/pull/8323#discussion_r388870185", "createdAt": "2020-03-06T12:14:36Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.api/src/main/java/org/wso2/carbon/apimgt/api/model/APIResourceMediationPolicy.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package org.wso2.carbon.apimgt.api.model;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1537f61fda368c57f6fcfc728ce6106f8c7c78b9"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTM4MDM5OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/definitions/OAS3Parser.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNTowMVrOFy2w0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNTowMVrOFy2w0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg3MDM1NA==", "bodyText": "Use single imports instead of wildcard imports", "url": "https://github.com/wso2/carbon-apimgt/pull/8323#discussion_r388870354", "createdAt": "2020-03-06T12:15:01Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/definitions/OAS3Parser.java", "diffHunk": "@@ -60,11 +59,7 @@\n import org.wso2.carbon.apimgt.api.APIManagementException;\n import org.wso2.carbon.apimgt.api.ErrorItem;\n import org.wso2.carbon.apimgt.api.ExceptionCodes;\n-import org.wso2.carbon.apimgt.api.model.API;\n-import org.wso2.carbon.apimgt.api.model.APIProduct;\n-import org.wso2.carbon.apimgt.api.model.Scope;\n-import org.wso2.carbon.apimgt.api.model.SwaggerData;\n-import org.wso2.carbon.apimgt.api.model.URITemplate;\n+import org.wso2.carbon.apimgt.api.model.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1537f61fda368c57f6fcfc728ce6106f8c7c78b9"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTM4MTY4OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/definitions/OAS3Parser.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNTozMFrOFy2xjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNTozMFrOFy2xjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg3MDU0MQ==", "bodyText": "Define and use constants", "url": "https://github.com/wso2/carbon-apimgt/pull/8323#discussion_r388870541", "createdAt": "2020-03-06T12:15:30Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/definitions/OAS3Parser.java", "diffHunk": "@@ -149,14 +159,52 @@ public String generateExample(String apiDefinition) {\n                         }\n                         if (applicationJson == null && applicationXml == null) {\n                             setDefaultGeneratedResponse(genCode);\n+\n                         }\n                     }\n                 }\n                 genCode.append(responseSection);\n-                op.addExtension(\"x-mediation-script\", genCode);\n+                String finalGenCode = genCode.toString();\n+                apiResourceMediationPolicyObject.setContent(finalGenCode);\n+                op.addExtension(APIConstants.SWAGGER_X_MEDIATION_SCRIPT, genCode);\n+                apiResourceMediationPolicyList.add(apiResourceMediationPolicyObject);\n             }\n+\n+            checkAndSetEmptyScope(swagger);\n+            returnMap.put(\"SWAGGER\", Json.pretty(swagger));\n+            returnMap.put(\"policyList\", apiResourceMediationPolicyList);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1537f61fda368c57f6fcfc728ce6106f8c7c78b9"}, "originalPosition": 90}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTM4MzUxOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/publisher/v1/utils/mappings/APIMappingUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNjowOFrOFy2ynw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNjowOFrOFy2ynw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg3MDgxNQ==", "bodyText": "Use single imports", "url": "https://github.com/wso2/carbon-apimgt/pull/8323#discussion_r388870815", "createdAt": "2020-03-06T12:16:08Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/publisher/v1/utils/mappings/APIMappingUtil.java", "diffHunk": "@@ -32,21 +32,7 @@\n import org.wso2.carbon.apimgt.api.ErrorHandler;\n import org.wso2.carbon.apimgt.api.ExceptionCodes;\n import org.wso2.carbon.apimgt.api.WorkflowStatus;\n-import org.wso2.carbon.apimgt.api.model.API;\n-import org.wso2.carbon.apimgt.api.model.APICategory;\n-import org.wso2.carbon.apimgt.api.model.APIIdentifier;\n-import org.wso2.carbon.apimgt.api.model.APIProduct;\n-import org.wso2.carbon.apimgt.api.model.APIProductIdentifier;\n-import org.wso2.carbon.apimgt.api.model.APIProductResource;\n-import org.wso2.carbon.apimgt.api.model.APIStatus;\n-import org.wso2.carbon.apimgt.api.model.APIStateChangeResponse;\n-import org.wso2.carbon.apimgt.api.model.CORSConfiguration;\n-import org.wso2.carbon.apimgt.api.model.Label;\n-import org.wso2.carbon.apimgt.api.model.LifeCycleEvent;\n-import org.wso2.carbon.apimgt.api.model.ResourcePath;\n-import org.wso2.carbon.apimgt.api.model.Scope;\n-import org.wso2.carbon.apimgt.api.model.Tier;\n-import org.wso2.carbon.apimgt.api.model.URITemplate;\n+import org.wso2.carbon.apimgt.api.model.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1537f61fda368c57f6fcfc728ce6106f8c7c78b9"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTM4NDI2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/publisher/v1/utils/mappings/APIMappingUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNjoyM1rOFy2zBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNjoyM1rOFy2zBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg3MDkxOQ==", "bodyText": "Method comments", "url": "https://github.com/wso2/carbon-apimgt/pull/8323#discussion_r388870919", "createdAt": "2020-03-06T12:16:23Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/publisher/v1/utils/mappings/APIMappingUtil.java", "diffHunk": "@@ -268,6 +254,39 @@ public static API fromDTOtoAPI(APIDTO dto, String provider) throws APIManagement\n         return model;\n     }\n \n+    /**\n+     *\n+     *\n+     * @param mockPayloads\n+     * @return\n+     * @throws APIManagementException\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1537f61fda368c57f6fcfc728ce6106f8c7c78b9"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTM4NDkzOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/publisher/v1/utils/mappings/APIMappingUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNjozNVrOFy2zaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNjozNVrOFy2zaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg3MTAxNw==", "bodyText": "Add proper method comments", "url": "https://github.com/wso2/carbon-apimgt/pull/8323#discussion_r388871017", "createdAt": "2020-03-06T12:16:35Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/java/org/wso2/carbon/apimgt/rest/api/publisher/v1/utils/mappings/APIMappingUtil.java", "diffHunk": "@@ -268,6 +254,39 @@ public static API fromDTOtoAPI(APIDTO dto, String provider) throws APIManagement\n         return model;\n     }\n \n+    /**\n+     *\n+     *\n+     * @param mockPayloads\n+     * @return\n+     * @throws APIManagementException\n+     */\n+    public static MockResponsePayloadListDTO fromMockPayloadsToListDTO (List<APIResourceMediationPolicy> mockPayloads)\n+            throws APIManagementException {\n+\n+        MockResponsePayloadListDTO mockResponsePayloadListDTO = new MockResponsePayloadListDTO();\n+        List<MockResponsePayloadInfoDTO> mockResponsePayloadInfoDTOS = mockResponsePayloadListDTO.getList();\n+        for (APIResourceMediationPolicy apiResourceMediationPolicy : mockPayloads){\n+            mockResponsePayloadInfoDTOS.add(fromMockPayloadToDTO(apiResourceMediationPolicy));\n+        }\n+        return mockResponsePayloadListDTO;\n+    }\n+\n+    /**\n+     *\n+     *\n+     * @param model\n+     * @return\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1537f61fda368c57f6fcfc728ce6106f8c7c78b9"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwOTM4NjI0OnYy", "diffSide": "RIGHT", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/Endpoints/Prototype/GenericResource.jsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNzoxNVrOFy20Rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxMjoxNzoxNVrOFy20Rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODg3MTIzOQ==", "bodyText": "Remove", "url": "https://github.com/wso2/carbon-apimgt/pull/8323#discussion_r388871239", "createdAt": "2020-03-06T12:17:15Z", "author": {"login": "malinthaprasan"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/Endpoints/Prototype/GenericResource.jsx", "diffHunk": "@@ -79,10 +87,18 @@ function GenericResource(props) {\n                 backgroundColor: Utils.hexToRGBA(chipColor, 0.1),\n                 border: `${chipColor} 1px solid`,\n             },\n+            scriptResetButton: {\n+                display: 'flex',\n+                justifyContent: 'space-between',\n+                marginBottom: '10px',\n+            },\n+\n         };\n     });\n \n     const classes = useStyles();\n+    console.log(originalScript);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1537f61fda368c57f6fcfc728ce6106f8c7c78b9"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxNzU3NjczOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/resources/publisher-api.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNjoyMTo0NlrOF0CrCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNjo0NDo1M1rOF0DA8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDExNDA1OA==", "bodyText": "Changed by mistake?", "url": "https://github.com/wso2/carbon-apimgt/pull/8323#discussion_r390114058", "createdAt": "2020-03-10T06:21:46Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/resources/publisher-api.yaml", "diffHunk": "@@ -8995,7 +9053,7 @@ definitions:\n   ThreatProtectionPolicy:\n     title: \"Threat Protection Policy Schema\"\n     required:\n-      - name\n+      - nameresource", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2433e78cac66f999ecd97606ef0266e73f964d91"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDExOTY2Ng==", "bodyText": "Yes, fixed", "url": "https://github.com/wso2/carbon-apimgt/pull/8323#discussion_r390119666", "createdAt": "2020-03-10T06:44:53Z", "author": {"login": "VinulaUthsara"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/resources/publisher-api.yaml", "diffHunk": "@@ -8995,7 +9053,7 @@ definitions:\n   ThreatProtectionPolicy:\n     title: \"Threat Protection Policy Schema\"\n     required:\n-      - name\n+      - nameresource", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDExNDA1OA=="}, "originalCommit": {"oid": "2433e78cac66f999ecd97606ef0266e73f964d91"}, "originalPosition": 89}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2830, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}