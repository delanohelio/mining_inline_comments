{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NjMxMzUx", "number": 8396, "title": "Add Google Analytics config reading functionality through a local entry", "bodyText": "Fix wso2/product-apim#1694\n\n\nAdd ga-config as a local entry to the gateway when the API is published\n\n\nUpdate local entry when the ga-config.xml resource in the registry is updated\n\n\nRead ga-config from the local entry inside the APIMgtGoogleAnalyticsTrackingHandler to avoid the registry DB dependency in the Gateway\n\n\nSet handler property of APIMgtGoogleAnalyticsTrackingHandler in the synapse config as below\n<property name=\"configKey\" value=\"ga-config-key\"/>", "createdAt": "2020-04-06T13:04:37Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8396", "merged": true, "mergeCommit": {"oid": "c530c18bab04fd518f1a858bb3aeb1d4d6dd090d"}, "closed": true, "closedAt": "2020-04-17T06:36:46Z", "author": {"login": "ChamodDamitha"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcV3lA7ABqjMyMTcxNTEzNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5FojRgFqTQ1NjAwNzI4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7838d1f0a322365636e2abae17b339b085f309a8", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/7838d1f0a322365636e2abae17b339b085f309a8", "committedDate": "2020-04-09T07:33:38Z", "message": "Remove registry handler temporarily"}, "afterCommit": {"oid": "8966db6188cf10bc61872e75bf4378e9eae780e7", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/8966db6188cf10bc61872e75bf4378e9eae780e7", "committedDate": "2020-04-09T07:42:46Z", "message": "Remove registry handler temporarily"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21e3e61ecd45caf5ba950e308dd7212f3edf41c7", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/21e3e61ecd45caf5ba950e308dd7212f3edf41c7", "committedDate": "2020-04-09T09:03:05Z", "message": "Add Google Analytics config reading functionality through a local entry"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8966db6188cf10bc61872e75bf4378e9eae780e7", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/8966db6188cf10bc61872e75bf4378e9eae780e7", "committedDate": "2020-04-09T07:42:46Z", "message": "Remove registry handler temporarily"}, "afterCommit": {"oid": "90a698d8901396f30149603240b7661667ab363e", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/90a698d8901396f30149603240b7661667ab363e", "committedDate": "2020-04-09T10:00:28Z", "message": "Remove registry handler temporarily"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "90a698d8901396f30149603240b7661667ab363e", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/90a698d8901396f30149603240b7661667ab363e", "committedDate": "2020-04-09T10:00:28Z", "message": "Remove registry handler temporarily"}, "afterCommit": {"oid": "d88f6d7932f925f0539ab1924a450dfd926233de", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/d88f6d7932f925f0539ab1924a450dfd926233de", "committedDate": "2020-04-09T12:49:59Z", "message": "Remove registry handler temporarily"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTI5MTg5", "url": "https://github.com/wso2/carbon-apimgt/pull/8396#pullrequestreview-390929189", "createdAt": "2020-04-09T16:04:18Z", "commit": {"oid": "d88f6d7932f925f0539ab1924a450dfd926233de"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNjowNDoxOVrOGDfVLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNjowNDoxOVrOGDfVLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxMjIzNw==", "bodyText": "@ChamodDamitha  this contains backward incompatible change shall we fix this with backward compatibility", "url": "https://github.com/wso2/carbon-apimgt/pull/8396#discussion_r406312237", "createdAt": "2020-04-09T16:04:19Z", "author": {"login": "tharindu1st"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/handlers/analytics/APIMgtGoogleAnalyticsTrackingHandler.java", "diffHunk": "@@ -83,40 +80,25 @@ public boolean handleRequest(MessageContext msgCtx) {\n             span = Util.startSpan(APIMgtGatewayConstants.GOOGLE_ANALYTICS_HANDLER, responseLatencySpan, tracer);\n         }\n         try {\n-            if (configKey == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d88f6d7932f925f0539ab1924a450dfd926233de"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d88f6d7932f925f0539ab1924a450dfd926233de", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/d88f6d7932f925f0539ab1924a450dfd926233de", "committedDate": "2020-04-09T12:49:59Z", "message": "Remove registry handler temporarily"}, "afterCommit": {"oid": "3608de762efba53bdaa8986d656fd7e012a79bd1", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/3608de762efba53bdaa8986d656fd7e012a79bd1", "committedDate": "2020-04-09T17:35:56Z", "message": "Remove registry handler temporarily"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3608de762efba53bdaa8986d656fd7e012a79bd1", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/3608de762efba53bdaa8986d656fd7e012a79bd1", "committedDate": "2020-04-09T17:35:56Z", "message": "Remove registry handler temporarily"}, "afterCommit": {"oid": "192d0e5ffce5886a637c5d00a35f7f64c8e4f708", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/192d0e5ffce5886a637c5d00a35f7f64c8e4f708", "committedDate": "2020-04-09T17:45:23Z", "message": "Remove registry handler temporarily"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "192d0e5ffce5886a637c5d00a35f7f64c8e4f708", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/192d0e5ffce5886a637c5d00a35f7f64c8e4f708", "committedDate": "2020-04-09T17:45:23Z", "message": "Remove registry handler temporarily"}, "afterCommit": {"oid": "34aac577440d80b4fbbb7bec043d39217bde6828", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/34aac577440d80b4fbbb7bec043d39217bde6828", "committedDate": "2020-04-09T17:50:30Z", "message": "Remove registry handler temporarily"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "34aac577440d80b4fbbb7bec043d39217bde6828", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/34aac577440d80b4fbbb7bec043d39217bde6828", "committedDate": "2020-04-09T17:50:30Z", "message": "Remove registry handler temporarily"}, "afterCommit": {"oid": "383241c5b2e9e7fb0830de8bcaea8c829267d460", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/383241c5b2e9e7fb0830de8bcaea8c829267d460", "committedDate": "2020-04-10T07:40:53Z", "message": "Remove registry handler temporarily"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4a8b6427c2fa548ab37e13159a97fa2b16de703", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/b4a8b6427c2fa548ab37e13159a97fa2b16de703", "committedDate": "2020-04-15T05:14:57Z", "message": "Remove registry handler temporarily"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "383241c5b2e9e7fb0830de8bcaea8c829267d460", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/383241c5b2e9e7fb0830de8bcaea8c829267d460", "committedDate": "2020-04-10T07:40:53Z", "message": "Remove registry handler temporarily"}, "afterCommit": {"oid": "b4a8b6427c2fa548ab37e13159a97fa2b16de703", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/b4a8b6427c2fa548ab37e13159a97fa2b16de703", "committedDate": "2020-04-15T05:14:57Z", "message": "Remove registry handler temporarily"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNjExNjc3", "url": "https://github.com/wso2/carbon-apimgt/pull/8396#pullrequestreview-393611677", "createdAt": "2020-04-15T09:35:39Z", "commit": {"oid": "b4a8b6427c2fa548ab37e13159a97fa2b16de703"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwOTozNTo0MFrOGFxrDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQwOTozNTo0MFrOGFxrDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODcwOTkwMw==", "bodyText": "shall we rename this method to a more meaningfull one?", "url": "https://github.com/wso2/carbon-apimgt/pull/8396#discussion_r408709903", "createdAt": "2020-04-15T09:35:40Z", "author": {"login": "chamilaadhi"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/utils/APIUtil.java", "diffHunk": "@@ -7192,6 +7192,22 @@ public static JSONObject getTenantRESTAPIScopeRoleMappingsConfig(String tenantDo\n         return restAPIConfigJSON;\n     }\n \n+    public static String getGAConfig(String tenantDomain) throws APIManagementException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4a8b6427c2fa548ab37e13159a97fa2b16de703"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fd33c763cbbfef45b043bcde6286d6151ffe990", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/4fd33c763cbbfef45b043bcde6286d6151ffe990", "committedDate": "2020-04-16T09:17:42Z", "message": "Add ga-config local entry update functionality on registry resource update"}, "afterCommit": {"oid": "b438fa386770bab90c990c838bdea1c0e23ab270", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/b438fa386770bab90c990c838bdea1c0e23ab270", "committedDate": "2020-04-16T09:33:27Z", "message": "Add ga-config local entry update functionality on registry resource update"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b438fa386770bab90c990c838bdea1c0e23ab270", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/b438fa386770bab90c990c838bdea1c0e23ab270", "committedDate": "2020-04-16T09:33:27Z", "message": "Add ga-config local entry update functionality on registry resource update"}, "afterCommit": {"oid": "ea26265243cb3d2c6c5f3e4cfc943b3c03247770", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/ea26265243cb3d2c6c5f3e4cfc943b3c03247770", "committedDate": "2020-04-16T09:38:29Z", "message": "Add ga-config local entry update functionality on registry resource update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cd51f7c59e37796351ce175ee15bb98fdfef58e", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/2cd51f7c59e37796351ce175ee15bb98fdfef58e", "committedDate": "2020-04-16T11:12:49Z", "message": "Add ga-config local entry update functionality on registry resource update"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea26265243cb3d2c6c5f3e4cfc943b3c03247770", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/ea26265243cb3d2c6c5f3e4cfc943b3c03247770", "committedDate": "2020-04-16T09:38:29Z", "message": "Add ga-config local entry update functionality on registry resource update"}, "afterCommit": {"oid": "2cd51f7c59e37796351ce175ee15bb98fdfef58e", "author": {"user": {"login": "ChamodDamitha", "name": "Chamod Damitha Samarajeewa"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/2cd51f7c59e37796351ce175ee15bb98fdfef58e", "committedDate": "2020-04-16T11:12:49Z", "message": "Add ga-config local entry update functionality on registry resource update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0ODM0OTQ0", "url": "https://github.com/wso2/carbon-apimgt/pull/8396#pullrequestreview-394834944", "createdAt": "2020-04-16T17:09:10Z", "commit": {"oid": "2cd51f7c59e37796351ce175ee15bb98fdfef58e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MDA3Mjgw", "url": "https://github.com/wso2/carbon-apimgt/pull/8396#pullrequestreview-456007280", "createdAt": "2020-07-27T17:53:35Z", "commit": {"oid": "2cd51f7c59e37796351ce175ee15bb98fdfef58e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzo1MzozNVrOG3tQ4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzo1MzozNVrOG3tQ4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA2NjQ2Ng==", "bodyText": "Can we use a constang for \"configKey\" as well, since its used in many places", "url": "https://github.com/wso2/carbon-apimgt/pull/8396#discussion_r461066466", "createdAt": "2020-07-27T17:53:35Z", "author": {"login": "shilmyhasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIProviderImpl.java", "diffHunk": "@@ -2535,7 +2535,7 @@ private APITemplateBuilder getAPITemplateBuilder(API api) throws APIManagementEx\n                     , Collections.<String, String>emptyMap());\n \n             properties = new HashMap<String, String>();\n-            properties.put(\"configKey\", \"gov:\" + APIConstants.GA_CONFIGURATION_LOCATION);\n+            properties.put(\"configKey\", APIConstants.GA_CONF_KEY);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cd51f7c59e37796351ce175ee15bb98fdfef58e"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2885, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}