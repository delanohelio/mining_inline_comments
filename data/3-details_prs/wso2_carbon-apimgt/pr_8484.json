{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MDc0NjEw", "number": 8484, "title": "Fetch specific registry entry", "bodyText": "", "createdAt": "2020-05-11T12:31:00Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8484", "merged": true, "mergeCommit": {"oid": "f5d7ce90675cca9e16c8527db721829bc5cc5e43"}, "closed": true, "closedAt": "2020-05-11T14:18:42Z", "author": {"login": "fazlan-nazeem"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgO2wIAH2gAyNDE2MDc0NjEwOmFkOTJmNTlmNDcxMjg5NDIyNTMxZGMwMzM5NjQxNWNlNWI2OTRiODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgQZUuAFqTQwOTIxNTkyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ad92f59f471289422531dc03396415ce5b694b82", "author": {"user": {"login": "fazlan-nazeem", "name": "Fazlan Nazeem"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/ad92f59f471289422531dc03396415ce5b694b82", "committedDate": "2020-05-11T12:30:08Z", "message": "Fetch specific registry entry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6", "author": {"user": {"login": "fazlan-nazeem", "name": "Fazlan Nazeem"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/7f91ee9fc9e0e956de72c988aa98998e7fbc63a6", "committedDate": "2020-05-11T12:31:46Z", "message": "Fix syntax issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MTMzNjAw", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#pullrequestreview-409133600", "createdAt": "2020-05-11T12:40:55Z", "commit": {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjo0MDo1NlrOGTae5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjo0MDo1NlrOGTae5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMDAyMA==", "bodyText": "Shouldn't we verify the existence of the registry before getting the entry? Otherwise, this might work when querying using wrong registry id and correct entry id.\nOr else, we should change the resource without requiring the registry id right?", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423010020", "createdAt": "2020-05-11T12:40:56Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "diffHunk": "@@ -143,14 +143,20 @@ public Response deleteRegistry(String registryId, MessageContext messageContext)\n \n     @Override\n     public Response getRegistryEntryByUuid(String registryId, String entryId, MessageContext messageContext) {\n-        RegistryEntryDTO registryEntry = new RegistryEntryDTO();\n-        registryEntry.setEntryName(\"Pizzashack-endpoint\");\n-        registryEntry.setMetadata(\"{ \\\"mutualTLS\\\" : true }\");\n-        registryEntry.setDefinitionType(RegistryEntryDTO.DefinitionTypeEnum.OAS);\n-        registryEntry.setDefinitionUrl(\"http://localhost/pizzashack?swagger.json\");\n-        registryEntry.setServiceType(RegistryEntryDTO.ServiceTypeEnum.REST);\n-        registryEntry.setServiceUrl(\"http://localhost/pizzashack\");\n-        return Response.ok().entity(registryEntry).build();\n+        EndpointRegistry registryProvider = new EndpointRegistryImpl();\n+        EndpointRegistryEntry endpointRegistryEntry = null;\n+        try {\n+            endpointRegistryEntry = registryProvider.getEndpointRegistryEntryByUUID(entryId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MTM1NTI4", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#pullrequestreview-409135528", "createdAt": "2020-05-11T12:43:45Z", "commit": {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjo0Mzo0NVrOGTak4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjo0Mzo0NVrOGTak4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMTU1NA==", "bodyText": "registryId should be replaced entryId ?", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423011554", "createdAt": "2020-05-11T12:43:45Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "diffHunk": "@@ -143,14 +143,20 @@ public Response deleteRegistry(String registryId, MessageContext messageContext)\n \n     @Override\n     public Response getRegistryEntryByUuid(String registryId, String entryId, MessageContext messageContext) {\n-        RegistryEntryDTO registryEntry = new RegistryEntryDTO();\n-        registryEntry.setEntryName(\"Pizzashack-endpoint\");\n-        registryEntry.setMetadata(\"{ \\\"mutualTLS\\\" : true }\");\n-        registryEntry.setDefinitionType(RegistryEntryDTO.DefinitionTypeEnum.OAS);\n-        registryEntry.setDefinitionUrl(\"http://localhost/pizzashack?swagger.json\");\n-        registryEntry.setServiceType(RegistryEntryDTO.ServiceTypeEnum.REST);\n-        registryEntry.setServiceUrl(\"http://localhost/pizzashack\");\n-        return Response.ok().entity(registryEntry).build();\n+        EndpointRegistry registryProvider = new EndpointRegistryImpl();\n+        EndpointRegistryEntry endpointRegistryEntry = null;\n+        try {\n+            endpointRegistryEntry = registryProvider.getEndpointRegistryEntryByUUID(entryId);\n+            if (endpointRegistryEntry == null) {\n+                RestApiUtil.handleResourceNotFoundError(\"Endpoint registry entry with the id: \" + entryId +\n+                        \" is not found\", log);\n+            }\n+        } catch (APIManagementException e) {\n+            RestApiUtil.handleInternalServerError(\"Error while fetching endpoint registry entry: \"\n+                    + registryId, e, log);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63176f1e5492cc773b9a2eaf454bf74ffb95ba20", "author": {"user": {"login": "fazlan-nazeem", "name": "Fazlan Nazeem"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/63176f1e5492cc773b9a2eaf454bf74ffb95ba20", "committedDate": "2020-05-11T13:18:46Z", "message": "Validate by registryId"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cca315e6e4bd768dd75f20dff710460c88ccafe", "author": {"user": {"login": "fazlan-nazeem", "name": "Fazlan Nazeem"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/8cca315e6e4bd768dd75f20dff710460c88ccafe", "committedDate": "2020-05-11T13:21:27Z", "message": "remove unwanted file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MjE1OTI1", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#pullrequestreview-409215925", "createdAt": "2020-05-11T14:17:48Z", "commit": {"oid": "8cca315e6e4bd768dd75f20dff710460c88ccafe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2843, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}