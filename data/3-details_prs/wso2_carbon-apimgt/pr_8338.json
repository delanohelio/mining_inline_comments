{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2NjY4Mzg0", "number": 8338, "title": "Changed recommendations and Tenant config Cache", "bodyText": "Changed the recommendations cache and tenant config cache get methods. Previously, APIUtil.getCache(cacheManagerName,  cacheName, modifiedExp,accessExp) was used to get cache and this might give errors in expiry times.\nChanged the two configs to standard approach with two different methods to create and get the cache in CacheProvider.", "createdAt": "2020-03-11T12:45:53Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8338", "merged": true, "mergeCommit": {"oid": "f67469a27fe948affc37a2a806d9619f453031f9"}, "closed": true, "closedAt": "2020-03-12T05:14:57Z", "author": {"login": "1akshitha"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMkn0fgH2gAyMzg2NjY4Mzg0OjcxMzMyMzE3MWJkOTlhZmFiMTNjNTBmMmM3M2JiNTUzYjMyMTkzZmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM0owMgFqTM3MzI4MjU3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "713323171bd99afab13c50f2c73bb553b32193fe", "author": {"user": {"login": "1akshitha", "name": "Lakshitha Gunasekara"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/713323171bd99afab13c50f2c73bb553b32193fe", "committedDate": "2020-03-11T10:33:15Z", "message": "Changed recommendations and Tenant config Cache\n\nPreviously when getting the both cached, a method in APIUtil was used.\nCache creation and get cache were written in same method and this might\nlead to several issues as errors in expiry times. With this change, cache\nis created separately at server start and tenant creation.\n\nSigned-off-by: Lakshitha Gunasekara <lakshitha.gunasekara@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNzMzODg4", "url": "https://github.com/wso2/carbon-apimgt/pull/8338#pullrequestreview-372733888", "createdAt": "2020-03-11T13:00:21Z", "commit": {"oid": "713323171bd99afab13c50f2c73bb553b32193fe"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMzowMDoyMVrOF011Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMzowMDoyMVrOF011Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk1MjI0Ng==", "bodyText": "make new method to abstract apiutil.getTenantConfig", "url": "https://github.com/wso2/carbon-apimgt/pull/8338#discussion_r390952246", "createdAt": "2020-03-11T13:00:21Z", "author": {"login": "tharindu1st"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIConsumerImpl.java", "diffHunk": "@@ -5777,12 +5778,8 @@ public boolean isRecommendationEnabled(String tenantDomain) {\n                 return true;\n             } else {\n                 try {\n-                    org.json.JSONObject tenantConfig = null;\n-                    Cache tenantConfigCache = APIUtil.getCache(\n-                            APIConstants.API_MANAGER_CACHE_MANAGER,\n-                            APIConstants.TENANT_CONFIG_CACHE_NAME,\n-                            APIConstants.TENANT_CONFIG_CACHE_MODIFIED_EXPIRY,\n-                            APIConstants.TENANT_CONFIG_CACHE_ACCESS_EXPIRY);\n+                    org.json.JSONObject tenantConfig;\n+                    Cache tenantConfigCache = CacheProvider.getTenantConfigCache();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "713323171bd99afab13c50f2c73bb553b32193fe"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02012f810088365630142057860d0a697e632d26", "author": {"user": {"login": "1akshitha", "name": "Lakshitha Gunasekara"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/02012f810088365630142057860d0a697e632d26", "committedDate": "2020-03-11T16:48:44Z", "message": "Introduce a cache to getTenantconfig method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b5181a3e421b6ce5db3fdeec271ce9b46bcb1fe", "author": {"user": {"login": "1akshitha", "name": "Lakshitha Gunasekara"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/5b5181a3e421b6ce5db3fdeec271ce9b46bcb1fe", "committedDate": "2020-03-11T18:48:31Z", "message": "minor fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMjgyNTc3", "url": "https://github.com/wso2/carbon-apimgt/pull/8338#pullrequestreview-373282577", "createdAt": "2020-03-12T05:12:45Z", "commit": {"oid": "5b5181a3e421b6ce5db3fdeec271ce9b46bcb1fe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2860, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}