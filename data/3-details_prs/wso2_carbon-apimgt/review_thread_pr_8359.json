{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5MDc0NTg3", "number": 8359, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODo1NjoyNVrODoPQOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNDo0Nzo0NlrODo9-hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNTE5NTQ3OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODo1NjoyNVrOF2qmeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODo1NjoyNVrOF2qmeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg2NTQwMA==", "bodyText": "Please fix the small formatting issue here (line 77 and 83). Space required between ) and {", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r392865400", "createdAt": "2020-03-16T08:56:25Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "diffHunk": "@@ -60,19 +60,35 @@ public Response exportApiByParams(String name, String version, String providerNa\n         //If not specified status is preserved by default\n         boolean isStatusPreserved = preserveStatus == null || preserveStatus;\n \n-        if (name == null || version == null || providerName == null) {\n-            RestApiUtil.handleBadRequest(\"'name', 'version' or 'provider' should not be null\", log);\n+        if (name == null || version == null) {\n+            RestApiUtil.handleBadRequest(\"'name' or 'version' should not be null\", log);\n         }\n \n         try {\n             //Default export format is YAML\n             exportFormat = StringUtils.isNotEmpty(format) ? ExportFormat.valueOf(format.toUpperCase()) :\n                     ExportFormat.YAML;\n \n+            // Get currently logged in user's username and the domain\n             userName = RestApiUtil.getLoggedInUsername();\n+            apiRequesterDomain = RestApiUtil.getLoggedInUserTenantDomain();\n+\n+            // If provider name is not given\n+            if (providerName.isEmpty()){\n+                // Retrieve the provider who is in same tenant domain and who owns the same API (by comparing\n+                // API name and the version)\n+                providerName = APIUtil.getAPIProviderFromAPINameVersionTenant(name, version, apiRequesterDomain);\n+\n+                // If there is no provider in current domain, the API cannot be exported\n+                if (providerName == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f9ddf280270c9679cac2a2b9b55e2a6c2c1bf08"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNTIwNzE5OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODo1OTo1N1rOF2qtlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOTo1MjoxOVrOF2sdeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg2NzIyMw==", "bodyText": "Shall we use StringUtils.isBlank - [1] here?\n[1] http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#isBlank(java.lang.String)", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r392867223", "createdAt": "2020-03-16T08:59:57Z", "author": {"login": "vithu30"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "diffHunk": "@@ -60,19 +60,35 @@ public Response exportApiByParams(String name, String version, String providerNa\n         //If not specified status is preserved by default\n         boolean isStatusPreserved = preserveStatus == null || preserveStatus;\n \n-        if (name == null || version == null || providerName == null) {\n-            RestApiUtil.handleBadRequest(\"'name', 'version' or 'provider' should not be null\", log);\n+        if (name == null || version == null) {\n+            RestApiUtil.handleBadRequest(\"'name' or 'version' should not be null\", log);\n         }\n \n         try {\n             //Default export format is YAML\n             exportFormat = StringUtils.isNotEmpty(format) ? ExportFormat.valueOf(format.toUpperCase()) :\n                     ExportFormat.YAML;\n \n+            // Get currently logged in user's username and the domain\n             userName = RestApiUtil.getLoggedInUsername();\n+            apiRequesterDomain = RestApiUtil.getLoggedInUserTenantDomain();\n+\n+            // If provider name is not given\n+            if (providerName.isEmpty()){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f9ddf280270c9679cac2a2b9b55e2a6c2c1bf08"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg5NTg2Ng==", "bodyText": "+1 to use StringUtils.isBlank", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r392895866", "createdAt": "2020-03-16T09:52:19Z", "author": {"login": "prasa7"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "diffHunk": "@@ -60,19 +60,35 @@ public Response exportApiByParams(String name, String version, String providerNa\n         //If not specified status is preserved by default\n         boolean isStatusPreserved = preserveStatus == null || preserveStatus;\n \n-        if (name == null || version == null || providerName == null) {\n-            RestApiUtil.handleBadRequest(\"'name', 'version' or 'provider' should not be null\", log);\n+        if (name == null || version == null) {\n+            RestApiUtil.handleBadRequest(\"'name' or 'version' should not be null\", log);\n         }\n \n         try {\n             //Default export format is YAML\n             exportFormat = StringUtils.isNotEmpty(format) ? ExportFormat.valueOf(format.toUpperCase()) :\n                     ExportFormat.YAML;\n \n+            // Get currently logged in user's username and the domain\n             userName = RestApiUtil.getLoggedInUsername();\n+            apiRequesterDomain = RestApiUtil.getLoggedInUserTenantDomain();\n+\n+            // If provider name is not given\n+            if (providerName.isEmpty()){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg2NzIyMw=="}, "originalCommit": {"oid": "4f9ddf280270c9679cac2a2b9b55e2a6c2c1bf08"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNTI4MDg1OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin/src/gen/java/org/wso2/carbon/apimgt/rest/api/admin/ExportApi.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOToyMjozNVrOF2rbig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOTo0Mjo0OFrOF2sITA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg3ODk4Ng==", "bodyText": "Please fix the small formatting issue", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r392878986", "createdAt": "2020-03-16T09:22:35Z", "author": {"login": "HiranyaKavishani"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin/src/gen/java/org/wso2/carbon/apimgt/rest/api/admin/ExportApi.java", "diffHunk": "@@ -40,11 +40,11 @@\n \n     public Response exportApiGet(@ApiParam(value = \"API Name\\n\",required=true) @QueryParam(\"name\")  String name,\n     @ApiParam(value = \"Version of the API\\n\",required=true) @QueryParam(\"version\")  String version,\n-    @ApiParam(value = \"Provider name of the API\\n\",required=true) @QueryParam(\"providerName\")  String providerName,\n     @ApiParam(value = \"Format of output documents. Can be YAML or JSON.\\n\",required=true, allowableValues=\"{values=[JSON, YAML]}\") @QueryParam(\"format\")  String format,\n+    @ApiParam(value = \"Provider name of the API\\n\") @QueryParam(\"providerName\")  String providerName,\n     @ApiParam(value = \"Preserve API Status on export\\n\") @QueryParam(\"preserveStatus\")  Boolean preserveStatus)\n     {\n-    return delegate.exportApiGet(name,version,providerName,format,preserveStatus);\n+    return delegate.exportApiGet(name,version,format,providerName,preserveStatus);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f9ddf280270c9679cac2a2b9b55e2a6c2c1bf08"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg4NDQyNQ==", "bodyText": "This file was automatically generated by sagger2cxf. Is it okay to change an automatically generated file like this?", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r392884425", "createdAt": "2020-03-16T09:32:12Z", "author": {"login": "wasuradananjith"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin/src/gen/java/org/wso2/carbon/apimgt/rest/api/admin/ExportApi.java", "diffHunk": "@@ -40,11 +40,11 @@\n \n     public Response exportApiGet(@ApiParam(value = \"API Name\\n\",required=true) @QueryParam(\"name\")  String name,\n     @ApiParam(value = \"Version of the API\\n\",required=true) @QueryParam(\"version\")  String version,\n-    @ApiParam(value = \"Provider name of the API\\n\",required=true) @QueryParam(\"providerName\")  String providerName,\n     @ApiParam(value = \"Format of output documents. Can be YAML or JSON.\\n\",required=true, allowableValues=\"{values=[JSON, YAML]}\") @QueryParam(\"format\")  String format,\n+    @ApiParam(value = \"Provider name of the API\\n\") @QueryParam(\"providerName\")  String providerName,\n     @ApiParam(value = \"Preserve API Status on export\\n\") @QueryParam(\"preserveStatus\")  Boolean preserveStatus)\n     {\n-    return delegate.exportApiGet(name,version,providerName,format,preserveStatus);\n+    return delegate.exportApiGet(name,version,format,providerName,preserveStatus);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg3ODk4Ng=="}, "originalCommit": {"oid": "4f9ddf280270c9679cac2a2b9b55e2a6c2c1bf08"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg5MDQ0NA==", "bodyText": "Then we don't need", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r392890444", "createdAt": "2020-03-16T09:42:48Z", "author": {"login": "HiranyaKavishani"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin/src/gen/java/org/wso2/carbon/apimgt/rest/api/admin/ExportApi.java", "diffHunk": "@@ -40,11 +40,11 @@\n \n     public Response exportApiGet(@ApiParam(value = \"API Name\\n\",required=true) @QueryParam(\"name\")  String name,\n     @ApiParam(value = \"Version of the API\\n\",required=true) @QueryParam(\"version\")  String version,\n-    @ApiParam(value = \"Provider name of the API\\n\",required=true) @QueryParam(\"providerName\")  String providerName,\n     @ApiParam(value = \"Format of output documents. Can be YAML or JSON.\\n\",required=true, allowableValues=\"{values=[JSON, YAML]}\") @QueryParam(\"format\")  String format,\n+    @ApiParam(value = \"Provider name of the API\\n\") @QueryParam(\"providerName\")  String providerName,\n     @ApiParam(value = \"Preserve API Status on export\\n\") @QueryParam(\"preserveStatus\")  Boolean preserveStatus)\n     {\n-    return delegate.exportApiGet(name,version,providerName,format,preserveStatus);\n+    return delegate.exportApiGet(name,version,format,providerName,preserveStatus);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg3ODk4Ng=="}, "originalCommit": {"oid": "4f9ddf280270c9679cac2a2b9b55e2a6c2c1bf08"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNTI4Mzk2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin/src/gen/java/org/wso2/carbon/apimgt/rest/api/admin/ExportApiService.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOToyMzoyMlrOF2rdZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOTo0MjozNlrOF2sHyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg3OTQ2MA==", "bodyText": "Please fix the small formatting issue", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r392879460", "createdAt": "2020-03-16T09:23:22Z", "author": {"login": "HiranyaKavishani"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin/src/gen/java/org/wso2/carbon/apimgt/rest/api/admin/ExportApiService.java", "diffHunk": "@@ -14,7 +14,7 @@\n import javax.ws.rs.core.Response;\n \n public abstract class ExportApiService {\n-    public abstract Response exportApiGet(String name,String version,String providerName,String format,Boolean preserveStatus);\n+    public abstract Response exportApiGet(String name,String version,String format,String providerName,Boolean preserveStatus);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f9ddf280270c9679cac2a2b9b55e2a6c2c1bf08"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg4NDczMw==", "bodyText": "This file was automatically generated by sagger2cxf. Is it okay to change an automatically generated file like this?", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r392884733", "createdAt": "2020-03-16T09:32:48Z", "author": {"login": "wasuradananjith"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin/src/gen/java/org/wso2/carbon/apimgt/rest/api/admin/ExportApiService.java", "diffHunk": "@@ -14,7 +14,7 @@\n import javax.ws.rs.core.Response;\n \n public abstract class ExportApiService {\n-    public abstract Response exportApiGet(String name,String version,String providerName,String format,Boolean preserveStatus);\n+    public abstract Response exportApiGet(String name,String version,String format,String providerName,Boolean preserveStatus);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg3OTQ2MA=="}, "originalCommit": {"oid": "4f9ddf280270c9679cac2a2b9b55e2a6c2c1bf08"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg5MDMxNQ==", "bodyText": "Then we don't need", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r392890315", "createdAt": "2020-03-16T09:42:36Z", "author": {"login": "HiranyaKavishani"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin/src/gen/java/org/wso2/carbon/apimgt/rest/api/admin/ExportApiService.java", "diffHunk": "@@ -14,7 +14,7 @@\n import javax.ws.rs.core.Response;\n \n public abstract class ExportApiService {\n-    public abstract Response exportApiGet(String name,String version,String providerName,String format,Boolean preserveStatus);\n+    public abstract Response exportApiGet(String name,String version,String format,String providerName,Boolean preserveStatus);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg3OTQ2MA=="}, "originalCommit": {"oid": "4f9ddf280270c9679cac2a2b9b55e2a6c2c1bf08"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNTM5NzE4OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOTo1NDo0M1rOF2siiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOTo1NDo0M1rOF2siiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg5NzE2Mw==", "bodyText": "Shall We print the context information (name and version) in the log message", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r392897163", "createdAt": "2020-03-16T09:54:43Z", "author": {"login": "prasa7"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "diffHunk": "@@ -60,19 +60,35 @@ public Response exportApiByParams(String name, String version, String providerNa\n         //If not specified status is preserved by default\n         boolean isStatusPreserved = preserveStatus == null || preserveStatus;\n \n-        if (name == null || version == null || providerName == null) {\n-            RestApiUtil.handleBadRequest(\"'name', 'version' or 'provider' should not be null\", log);\n+        if (name == null || version == null) {\n+            RestApiUtil.handleBadRequest(\"'name' or 'version' should not be null\", log);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f9ddf280270c9679cac2a2b9b55e2a6c2c1bf08"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0Mjg1MDYzOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNDo0Nzo0NlrOF32Pvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNDo0Nzo0NlrOF32Pvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEwNDc2Nw==", "bodyText": "Do we need this info log?", "url": "https://github.com/wso2/carbon-apimgt/pull/8359#discussion_r394104767", "createdAt": "2020-03-18T04:47:46Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.util/src/main/java/org/wso2/carbon/apimgt/rest/api/util/impl/ExportApiUtil.java", "diffHunk": "@@ -60,19 +60,38 @@ public Response exportApiByParams(String name, String version, String providerNa\n         //If not specified status is preserved by default\n         boolean isStatusPreserved = preserveStatus == null || preserveStatus;\n \n-        if (name == null || version == null || providerName == null) {\n-            RestApiUtil.handleBadRequest(\"'name', 'version' or 'provider' should not be null\", log);\n+        // Print context information (name and version of the API) in the log\n+        log.info(\"API name: \"+ name + \", version: \"+ version);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a4d1253af2109fc8811b4c525f85330807373e2"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2699, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}