{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MDc0NjEw", "number": 8484, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjo0MDo1NlrOD7ONGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjo0Mzo0NVrOD7OQ3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNDI1MzA2OnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjo0MDo1NlrOGTae5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzoyMTo1M1rOGTb9lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMDAyMA==", "bodyText": "Shouldn't we verify the existence of the registry before getting the entry? Otherwise, this might work when querying using wrong registry id and correct entry id.\nOr else, we should change the resource without requiring the registry id right?", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423010020", "createdAt": "2020-05-11T12:40:56Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "diffHunk": "@@ -143,14 +143,20 @@ public Response deleteRegistry(String registryId, MessageContext messageContext)\n \n     @Override\n     public Response getRegistryEntryByUuid(String registryId, String entryId, MessageContext messageContext) {\n-        RegistryEntryDTO registryEntry = new RegistryEntryDTO();\n-        registryEntry.setEntryName(\"Pizzashack-endpoint\");\n-        registryEntry.setMetadata(\"{ \\\"mutualTLS\\\" : true }\");\n-        registryEntry.setDefinitionType(RegistryEntryDTO.DefinitionTypeEnum.OAS);\n-        registryEntry.setDefinitionUrl(\"http://localhost/pizzashack?swagger.json\");\n-        registryEntry.setServiceType(RegistryEntryDTO.ServiceTypeEnum.REST);\n-        registryEntry.setServiceUrl(\"http://localhost/pizzashack\");\n-        return Response.ok().entity(registryEntry).build();\n+        EndpointRegistry registryProvider = new EndpointRegistryImpl();\n+        EndpointRegistryEntry endpointRegistryEntry = null;\n+        try {\n+            endpointRegistryEntry = registryProvider.getEndpointRegistryEntryByUUID(entryId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMzk5NQ==", "bodyText": "correct. will fix it.", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423013995", "createdAt": "2020-05-11T12:47:58Z", "author": {"login": "fazlan-nazeem"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "diffHunk": "@@ -143,14 +143,20 @@ public Response deleteRegistry(String registryId, MessageContext messageContext)\n \n     @Override\n     public Response getRegistryEntryByUuid(String registryId, String entryId, MessageContext messageContext) {\n-        RegistryEntryDTO registryEntry = new RegistryEntryDTO();\n-        registryEntry.setEntryName(\"Pizzashack-endpoint\");\n-        registryEntry.setMetadata(\"{ \\\"mutualTLS\\\" : true }\");\n-        registryEntry.setDefinitionType(RegistryEntryDTO.DefinitionTypeEnum.OAS);\n-        registryEntry.setDefinitionUrl(\"http://localhost/pizzashack?swagger.json\");\n-        registryEntry.setServiceType(RegistryEntryDTO.ServiceTypeEnum.REST);\n-        registryEntry.setServiceUrl(\"http://localhost/pizzashack\");\n-        return Response.ok().entity(registryEntry).build();\n+        EndpointRegistry registryProvider = new EndpointRegistryImpl();\n+        EndpointRegistryEntry endpointRegistryEntry = null;\n+        try {\n+            endpointRegistryEntry = registryProvider.getEndpointRegistryEntryByUUID(entryId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMDAyMA=="}, "originalCommit": {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAzNDI2Mg==", "bodyText": "fixed", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423034262", "createdAt": "2020-05-11T13:21:53Z", "author": {"login": "fazlan-nazeem"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "diffHunk": "@@ -143,14 +143,20 @@ public Response deleteRegistry(String registryId, MessageContext messageContext)\n \n     @Override\n     public Response getRegistryEntryByUuid(String registryId, String entryId, MessageContext messageContext) {\n-        RegistryEntryDTO registryEntry = new RegistryEntryDTO();\n-        registryEntry.setEntryName(\"Pizzashack-endpoint\");\n-        registryEntry.setMetadata(\"{ \\\"mutualTLS\\\" : true }\");\n-        registryEntry.setDefinitionType(RegistryEntryDTO.DefinitionTypeEnum.OAS);\n-        registryEntry.setDefinitionUrl(\"http://localhost/pizzashack?swagger.json\");\n-        registryEntry.setServiceType(RegistryEntryDTO.ServiceTypeEnum.REST);\n-        registryEntry.setServiceUrl(\"http://localhost/pizzashack\");\n-        return Response.ok().entity(registryEntry).build();\n+        EndpointRegistry registryProvider = new EndpointRegistryImpl();\n+        EndpointRegistryEntry endpointRegistryEntry = null;\n+        try {\n+            endpointRegistryEntry = registryProvider.getEndpointRegistryEntryByUUID(entryId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMDAyMA=="}, "originalCommit": {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNDI2MjcwOnYy", "diffSide": "RIGHT", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMjo0Mzo0NVrOGTak4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMzoyMjowNVrOGTb-IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMTU1NA==", "bodyText": "registryId should be replaced entryId ?", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423011554", "createdAt": "2020-05-11T12:43:45Z", "author": {"login": "ChamodDamitha"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "diffHunk": "@@ -143,14 +143,20 @@ public Response deleteRegistry(String registryId, MessageContext messageContext)\n \n     @Override\n     public Response getRegistryEntryByUuid(String registryId, String entryId, MessageContext messageContext) {\n-        RegistryEntryDTO registryEntry = new RegistryEntryDTO();\n-        registryEntry.setEntryName(\"Pizzashack-endpoint\");\n-        registryEntry.setMetadata(\"{ \\\"mutualTLS\\\" : true }\");\n-        registryEntry.setDefinitionType(RegistryEntryDTO.DefinitionTypeEnum.OAS);\n-        registryEntry.setDefinitionUrl(\"http://localhost/pizzashack?swagger.json\");\n-        registryEntry.setServiceType(RegistryEntryDTO.ServiceTypeEnum.REST);\n-        registryEntry.setServiceUrl(\"http://localhost/pizzashack\");\n-        return Response.ok().entity(registryEntry).build();\n+        EndpointRegistry registryProvider = new EndpointRegistryImpl();\n+        EndpointRegistryEntry endpointRegistryEntry = null;\n+        try {\n+            endpointRegistryEntry = registryProvider.getEndpointRegistryEntryByUUID(entryId);\n+            if (endpointRegistryEntry == null) {\n+                RestApiUtil.handleResourceNotFoundError(\"Endpoint registry entry with the id: \" + entryId +\n+                        \" is not found\", log);\n+            }\n+        } catch (APIManagementException e) {\n+            RestApiUtil.handleInternalServerError(\"Error while fetching endpoint registry entry: \"\n+                    + registryId, e, log);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAzNDQwMQ==", "bodyText": "yes, fixed.", "url": "https://github.com/wso2/carbon-apimgt/pull/8484#discussion_r423034401", "createdAt": "2020-05-11T13:22:05Z", "author": {"login": "fazlan-nazeem"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.endpoint.registry/src/main/java/org/wso2/carbon/apimgt/rest/api/endpoint/registry/impl/RegistriesApiServiceImpl.java", "diffHunk": "@@ -143,14 +143,20 @@ public Response deleteRegistry(String registryId, MessageContext messageContext)\n \n     @Override\n     public Response getRegistryEntryByUuid(String registryId, String entryId, MessageContext messageContext) {\n-        RegistryEntryDTO registryEntry = new RegistryEntryDTO();\n-        registryEntry.setEntryName(\"Pizzashack-endpoint\");\n-        registryEntry.setMetadata(\"{ \\\"mutualTLS\\\" : true }\");\n-        registryEntry.setDefinitionType(RegistryEntryDTO.DefinitionTypeEnum.OAS);\n-        registryEntry.setDefinitionUrl(\"http://localhost/pizzashack?swagger.json\");\n-        registryEntry.setServiceType(RegistryEntryDTO.ServiceTypeEnum.REST);\n-        registryEntry.setServiceUrl(\"http://localhost/pizzashack\");\n-        return Response.ok().entity(registryEntry).build();\n+        EndpointRegistry registryProvider = new EndpointRegistryImpl();\n+        EndpointRegistryEntry endpointRegistryEntry = null;\n+        try {\n+            endpointRegistryEntry = registryProvider.getEndpointRegistryEntryByUUID(entryId);\n+            if (endpointRegistryEntry == null) {\n+                RestApiUtil.handleResourceNotFoundError(\"Endpoint registry entry with the id: \" + entryId +\n+                        \" is not found\", log);\n+            }\n+        } catch (APIManagementException e) {\n+            RestApiUtil.handleInternalServerError(\"Error while fetching endpoint registry entry: \"\n+                    + registryId, e, log);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMTU1NA=="}, "originalCommit": {"oid": "7f91ee9fc9e0e956de72c988aa98998e7fbc63a6"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3512, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}