{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NTcxMDI0", "number": 8214, "title": "Improvements for API resources defining UI", "bodyText": "This PR fixes wso2/product-apim#6629\nThe scope wizard should be removed when security is disabled - done\nParam add button should be highlighted - done", "createdAt": "2020-02-18T11:44:13Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8214", "merged": true, "mergeCommit": {"oid": "6fa20f7dd65d064af860cf14bbacd29fa71127ca"}, "closed": true, "closedAt": "2020-02-21T07:01:07Z", "author": {"login": "isuruh15"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFGqioAH2gAyMzc2NTcxMDI0OmYxMTg5MDk1Mzk1YWFlOGJkY2Q2ZjJiMmE1MzgzOTZhYzQ0ODUzYTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGaGnRgFqTM2MjQyODcwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f1189095395aae8bdcd6f2b2a538396ac44853a4", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/f1189095395aae8bdcd6f2b2a538396ac44853a4", "committedDate": "2020-02-17T05:41:36Z", "message": "mandated https when mutual ssl enabled-react"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79ab8bf59c43b0ad8a2c14617a9dc13c27674c26", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/79ab8bf59c43b0ad8a2c14617a9dc13c27674c26", "committedDate": "2020-02-17T05:41:36Z", "message": "Fixed linting errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88b5a6cbac29a4da402018f7801067ddc1981450", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/88b5a6cbac29a4da402018f7801067ddc1981450", "committedDate": "2020-02-17T08:07:55Z", "message": "fixed single line import-review suggestion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e33f812c789f1724e0a018bbbb7a7d7ff8dd275", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/4e33f812c789f1724e0a018bbbb7a7d7ff8dd275", "committedDate": "2020-02-17T09:38:23Z", "message": "modified label of operation scope selection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af6d03f0eba1e3a289baa801621aaa1289c1b1dc", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/af6d03f0eba1e3a289baa801621aaa1289c1b1dc", "committedDate": "2020-02-17T11:21:02Z", "message": "added conditional rendering to operation scope dropdown"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7c7c94364f0697f453dc3d86300be7b02dcef36", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/b7c7c94364f0697f453dc3d86300be7b02dcef36", "committedDate": "2020-02-18T11:11:07Z", "message": "add parameter button highlight"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37e1cca66d7558c35939db9ac3ca39f9a42b26d6", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/37e1cca66d7558c35939db9ac3ca39f9a42b26d6", "committedDate": "2020-02-18T11:35:49Z", "message": "improvements for API resources defining UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjkyMDUz", "url": "https://github.com/wso2/carbon-apimgt/pull/8214#pullrequestreview-360292053", "createdAt": "2020-02-18T12:18:24Z", "commit": {"oid": "37e1cca66d7558c35939db9ac3ca39f9a42b26d6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMjoxODoyNFrOFrANjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMjoxODoyNFrOFrANjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYzNjU1Nw==", "bodyText": "Add localization for all rendering texts. Follow the wiki https://github.com/wso2/carbon-apimgt/wiki/How-internationalization-(i18n)-works-in-API-Manager-React-Apps", "url": "https://github.com/wso2/carbon-apimgt/pull/8214#discussion_r380636557", "createdAt": "2020-02-18T12:18:24Z", "author": {"login": "menakaj"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/Resources/components/operationComponents/OperationGovernance.jsx", "diffHunk": "@@ -152,58 +152,60 @@ rate limiting per operation\n             <Grid item md={6} />\n             <Grid item md={1} />\n             <Grid item md={5}>\n-                <TextField\n-                    id='operation_scope'\n-                    select\n-                    disabled={disableUpdate}\n-                    fullWidth\n-                    label='Operation scope'\n-                    value={getOperationScopes(operation, spec)[0]}\n-                    onChange={({ target: { value } }) => operationsDispatcher({\n-                        action: 'scopes',\n-                        data: { target, verb, value: [value] },\n-                    })}\n-                    helperText='Select a scope to control permissions to this operation'\n-                    margin='dense'\n-                    variant='outlined'\n-                >\n-                    <MenuItem\n-                        value=''\n-                        dense\n+                { operation['x-auth-type'] && operation['x-auth-type'].toLowerCase() !== 'none' ? (\n+                    <TextField\n+                        id='operation_scope'\n+                        select\n+                        disabled={disableUpdate}\n+                        fullWidth\n+                        label={api.scopes.length !== 0 ? 'Operation scope' : 'No scope available'}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e1cca66d7558c35939db9ac3ca39f9a42b26d6"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjkyMjU3", "url": "https://github.com/wso2/carbon-apimgt/pull/8214#pullrequestreview-360292257", "createdAt": "2020-02-18T12:18:44Z", "commit": {"oid": "37e1cca66d7558c35939db9ac3ca39f9a42b26d6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMjoxODo0NVrOFrAOJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMjoxODo0NVrOFrAOJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYzNjcwOQ==", "bodyText": "Add localization", "url": "https://github.com/wso2/carbon-apimgt/pull/8214#discussion_r380636709", "createdAt": "2020-02-18T12:18:45Z", "author": {"login": "menakaj"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/Resources/components/operationComponents/OperationGovernance.jsx", "diffHunk": "@@ -152,58 +152,60 @@ rate limiting per operation\n             <Grid item md={6} />\n             <Grid item md={1} />\n             <Grid item md={5}>\n-                <TextField\n-                    id='operation_scope'\n-                    select\n-                    disabled={disableUpdate}\n-                    fullWidth\n-                    label='Operation scope'\n-                    value={getOperationScopes(operation, spec)[0]}\n-                    onChange={({ target: { value } }) => operationsDispatcher({\n-                        action: 'scopes',\n-                        data: { target, verb, value: [value] },\n-                    })}\n-                    helperText='Select a scope to control permissions to this operation'\n-                    margin='dense'\n-                    variant='outlined'\n-                >\n-                    <MenuItem\n-                        value=''\n-                        dense\n+                { operation['x-auth-type'] && operation['x-auth-type'].toLowerCase() !== 'none' ? (\n+                    <TextField\n+                        id='operation_scope'\n+                        select\n+                        disabled={disableUpdate}\n+                        fullWidth\n+                        label={api.scopes.length !== 0 ? 'Operation scope' : 'No scope available'}\n+                        value={getOperationScopes(operation, spec)[0]}\n+                        onChange={({ target: { value } }) => operationsDispatcher({\n+                            action: 'scopes',\n+                            data: { target, verb, value: [value] },\n+                        })}\n+                        helperText='Select a scope to control permissions to this operation'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e1cca66d7558c35939db9ac3ca39f9a42b26d6"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjkyNTUx", "url": "https://github.com/wso2/carbon-apimgt/pull/8214#pullrequestreview-360292551", "createdAt": "2020-02-18T12:19:14Z", "commit": {"oid": "37e1cca66d7558c35939db9ac3ca39f9a42b26d6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMjoxOToxNFrOFrAPKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMjoxOToxNFrOFrAPKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYzNjk3MQ==", "bodyText": "Add Localization", "url": "https://github.com/wso2/carbon-apimgt/pull/8214#discussion_r380636971", "createdAt": "2020-02-18T12:19:14Z", "author": {"login": "menakaj"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/Resources/components/operationComponents/OperationGovernance.jsx", "diffHunk": "@@ -152,58 +152,60 @@ rate limiting per operation\n             <Grid item md={6} />\n             <Grid item md={1} />\n             <Grid item md={5}>\n-                <TextField\n-                    id='operation_scope'\n-                    select\n-                    disabled={disableUpdate}\n-                    fullWidth\n-                    label='Operation scope'\n-                    value={getOperationScopes(operation, spec)[0]}\n-                    onChange={({ target: { value } }) => operationsDispatcher({\n-                        action: 'scopes',\n-                        data: { target, verb, value: [value] },\n-                    })}\n-                    helperText='Select a scope to control permissions to this operation'\n-                    margin='dense'\n-                    variant='outlined'\n-                >\n-                    <MenuItem\n-                        value=''\n-                        dense\n+                { operation['x-auth-type'] && operation['x-auth-type'].toLowerCase() !== 'none' ? (\n+                    <TextField\n+                        id='operation_scope'\n+                        select\n+                        disabled={disableUpdate}\n+                        fullWidth\n+                        label={api.scopes.length !== 0 ? 'Operation scope' : 'No scope available'}\n+                        value={getOperationScopes(operation, spec)[0]}\n+                        onChange={({ target: { value } }) => operationsDispatcher({\n+                            action: 'scopes',\n+                            data: { target, verb, value: [value] },\n+                        })}\n+                        helperText='Select a scope to control permissions to this operation'\n+                        margin='dense'\n+                        variant='outlined'\n                     >\n+                        <MenuItem\n+                            value=''\n+                            dense\n+                        >\n                         None\n-                    </MenuItem>\n-                    {api.scopes.length !== 0\n-                        ? api.scopes.map((scope) => (\n-                            <MenuItem\n-                                key={scope.name}\n-                                value={scope.name}\n-                                dense\n-                            >\n-                                {scope.name}\n-                            </MenuItem>\n-                        )) : (\n-                            <Link to={`/apis/${api.id}/scopes/create`} target='_blank'>\n+                        </MenuItem>\n+                        {api.scopes.length !== 0\n+                            ? api.scopes.map((scope) => (\n                                 <MenuItem\n-                                    key='Create New Scope'\n-                                    value='Create New Scope'\n+                                    key={scope.name}\n+                                    value={scope.name}\n                                     dense\n                                 >\n-                                Create New Scope\n+                                    {scope.name}\n                                 </MenuItem>\n-                            </Link>\n-                        )}\n-                </TextField>\n+                            )) : (\n+                                <Link to={`/apis/${api.id}/scopes/create`} target='_blank'>\n+                                    <MenuItem\n+                                        key='Create New Scope'\n+                                        value='Create New Scope'\n+                                        dense\n+                                    >\n+                                Create New Scope", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e1cca66d7558c35939db9ac3ca39f9a42b26d6"}, "originalPosition": 78}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eeb0c85b49eac20bf8c8fe2717531aab51e810f0", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/eeb0c85b49eac20bf8c8fe2717531aab51e810f0", "committedDate": "2020-02-19T09:37:13Z", "message": "added i18n to OperationGovernance section"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNDI4NzA1", "url": "https://github.com/wso2/carbon-apimgt/pull/8214#pullrequestreview-362428705", "createdAt": "2020-02-21T06:54:23Z", "commit": {"oid": "eeb0c85b49eac20bf8c8fe2717531aab51e810f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3006, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}