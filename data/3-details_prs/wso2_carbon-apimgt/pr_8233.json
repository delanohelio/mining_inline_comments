{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NDE4NDA5", "number": 8233, "title": "Enable publishing capability when mutual SSL is selected as the only security scheme", "bodyText": "In publisher portal, user can publish a created API which doesn't have any application layer security and only having mutual SSL as security scheme.\nFixes wso2/product-apim#7522", "createdAt": "2020-02-21T18:41:34Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8233", "merged": true, "mergeCommit": {"oid": "d11ac50f7248d9e99e36a5c249369c8c0b41d5ab"}, "closed": true, "closedAt": "2020-03-04T11:02:32Z", "author": {"login": "isuruh15"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGb30ZAH2gAyMzc4NDE4NDA5OmRiNGEzMDc4NzdmMGM5NDk4OTViYzFlYWZiMzlkNDA2NWU3ZGNhNjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKU19jAFqTM2ODY4NTY4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "db4a307877f0c949895bc1eafb39d4065e7dca62", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/db4a307877f0c949895bc1eafb39d4065e7dca62", "committedDate": "2020-02-21T08:58:02Z", "message": "added info message to transports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29b234ef0c38b4ca58994a1795b8825a8da8c7d2", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/29b234ef0c38b4ca58994a1795b8825a8da8c7d2", "committedDate": "2020-02-21T18:22:56Z", "message": "enable publishing when mutual ssl is the only security scheme"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMTc1ODUy", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#pullrequestreview-363175852", "createdAt": "2020-02-24T05:37:03Z", "commit": {"oid": "29b234ef0c38b4ca58994a1795b8825a8da8c7d2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwNTozNzowNFrOFtWD0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwNTozNzowNFrOFtWD0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA5MTY2NQ==", "bodyText": "Shall we take this value from apiSecurityConstants", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383091665", "createdAt": "2020-02-24T05:37:04Z", "author": {"login": "tmkasun"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycleUpdate.jsx", "diffHunk": "@@ -194,7 +194,7 @@ class LifeCycleUpdate extends Component {\n                     displayName,\n                     disabled:\n                         api.endpointConfig == null\n-                        || api.policies.length === 0\n+                        || (api.policies.length === 0 && !api.securityScheme.includes('mutualssl_mandatory'))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29b234ef0c38b4ca58994a1795b8825a8da8c7d2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMTgwNzYz", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#pullrequestreview-363180763", "createdAt": "2020-02-24T06:05:37Z", "commit": {"oid": "29b234ef0c38b4ca58994a1795b8825a8da8c7d2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwNjowNTozN1rOFtWVVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwNjowNTozN1rOFtWVVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA5NjE0OA==", "bodyText": "Publish button should be disabled if the certificate is not provided as well if mutual SSL is enabled. We need to check for this condition.", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383096148", "createdAt": "2020-02-24T06:05:37Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycleUpdate.jsx", "diffHunk": "@@ -194,7 +194,7 @@ class LifeCycleUpdate extends Component {\n                     displayName,\n                     disabled:\n                         api.endpointConfig == null\n-                        || api.policies.length === 0\n+                        || (api.policies.length === 0 && !api.securityScheme.includes('mutualssl_mandatory'))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA5MTY2NQ=="}, "originalCommit": {"oid": "29b234ef0c38b4ca58994a1795b8825a8da8c7d2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8c0b7cbd112f95041fee811c0f7b815e5b306cd", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/a8c0b7cbd112f95041fee811c0f7b815e5b306cd", "committedDate": "2020-02-25T09:18:44Z", "message": "validated requirements for publish an API in Lifecycle tab"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/84f39c9f319e0c32654f2df83ab68b0a0980a2d9", "committedDate": "2020-02-25T09:46:36Z", "message": "removed expressions which are repeatedly evaluating and assigned to a single variable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MDA0NTUw", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#pullrequestreview-364004550", "createdAt": "2020-02-25T09:52:33Z", "commit": {"oid": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwOTo1MjozM1rOFt_dVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwOTo1MzozMlrOFt_fmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc2OTk0MA==", "bodyText": "Let's remove this extra line", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383769940", "createdAt": "2020-02-25T09:52:33Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycle.jsx", "diffHunk": "@@ -30,6 +30,7 @@ import ApiContext from 'AppComponents/Apis/Details/components/ApiContext';\n import LifeCycleUpdate from './LifeCycleUpdate';\n import LifeCycleHistory from './LifeCycleHistory';\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc3MDA3NA==", "bodyText": "Lets remove this extra line", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383770074", "createdAt": "2020-02-25T09:52:49Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycle.jsx", "diffHunk": "@@ -84,6 +86,7 @@ class LifeCycle extends Component {\n         this.setState({ checkList });\n     };\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc3MDQwNA==", "bodyText": "Let's remove this extra line", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383770404", "createdAt": "2020-02-25T09:53:20Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycle.jsx", "diffHunk": "@@ -98,11 +101,14 @@ class LifeCycle extends Component {\n \n         const promisedLcHistory = this.api.getLcHistory(id);\n         // const promised_labels = this.api.labels();\n-        Promise.all([promisedAPI, promisedLcState, promisedLcHistory])\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc3MDUyMQ==", "bodyText": "Shall we remove this commented line if its not needed?", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383770521", "createdAt": "2020-02-25T09:53:32Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycle.jsx", "diffHunk": "@@ -98,11 +101,14 @@ class LifeCycle extends Component {\n \n         const promisedLcHistory = this.api.getLcHistory(id);\n         // const promised_labels = this.api.labels();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a460f3391f1225645a1326798ab884c39ecd19dc", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/a460f3391f1225645a1326798ab884c39ecd19dc", "committedDate": "2020-02-25T10:57:37Z", "message": "removed unnecessary spaces and comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NjI2NjYw", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#pullrequestreview-364626660", "createdAt": "2020-02-26T05:11:33Z", "commit": {"oid": "a460f3391f1225645a1326798ab884c39ecd19dc"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNToxMTozM1rOFuedKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNToxMzoxMlrOFueecw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3NzgwMg==", "bodyText": "Shall we remove this extra line?", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r384277802", "createdAt": "2020-02-26T05:11:33Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/CheckboxLabels.jsx", "diffHunk": "@@ -120,22 +121,46 @@ export default function CheckboxLabels(props) {\n                                 <LaunchIcon style={{ marginLeft: '2px' }} color='primary' fontSize='small' />\n                             </Link>\n                         </Grid>\n-                        <Grid xs={12} className={classes.grid}>\n-                            {isTierAvailable ? (\n-                                <CheckIcon className={classes.iconTrue} />\n-                            ) : (\n-                                <CloseIcon className={classes.iconFalse} />\n+\n+                        <>\n+                            {isAppLayerSecurityMandatory && (\n+                                <Grid xs={12} className={classes.grid}>\n+                                    {isBusinessPlanAvailable ? (\n+                                        <CheckIcon className={classes.iconTrue} />\n+                                    ) : (\n+                                        <CloseIcon className={classes.iconFalse} />\n+                                    )}\n+                                    <Typography>\n+                                        <FormattedMessage\n+                                            id='Apis.Details.LifeCycle.CheckboxLabels.business.plans.selected'\n+                                            defaultMessage='Business Plan(s) selected'\n+                                        />\n+                                    </Typography>\n+                                    <Link to={'/apis/' + api.id + '/subscriptions'}>\n+                                        <LaunchIcon style={{ marginLeft: '2px' }} color='primary' fontSize='small' />\n+                                    </Link>\n+                                </Grid>\n                             )}\n-                            <Typography>\n-                                <FormattedMessage\n-                                    id='Apis.Details.LifeCycle.CheckboxLabels.business.plans.selected'\n-                                    defaultMessage='Business Plan(s) selected'\n-                                />\n-                            </Typography>\n-                            <Link to={'/apis/' + api.id + '/subscriptions'}>\n-                                <LaunchIcon style={{ marginLeft: '2px' }} color='primary' fontSize='small' />\n-                            </Link>\n-                        </Grid>\n+                            {isMutualSSLEnabled && (\n+                                <Grid xs={12} className={classes.grid}>\n+                                    {isCertAvailable ? (\n+                                        <CheckIcon className={classes.iconTrue} />\n+                                    ) : (\n+                                        <CloseIcon className={classes.iconFalse} />\n+                                    )}\n+                                    <Typography>\n+                                        <FormattedMessage\n+                                            id='Apis.Details.LifeCycle.CheckboxLabels.cert.provided'\n+                                            defaultMessage='Certificate provided'\n+                                        />\n+                                    </Typography>\n+                                    <Link to={'/apis/' + api.id + '/runtime-configuration'}>\n+                                        <LaunchIcon style={{ marginLeft: '2px' }} color='primary' fontSize='small' />\n+                                    </Link>\n+                                </Grid>\n+                            ) }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a460f3391f1225645a1326798ab884c39ecd19dc"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3Nzk0MA==", "bodyText": "Shall we remove this extra line?", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r384277940", "createdAt": "2020-02-26T05:12:09Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/CheckboxLabels.jsx", "diffHunk": "@@ -120,22 +121,46 @@ export default function CheckboxLabels(props) {\n                                 <LaunchIcon style={{ marginLeft: '2px' }} color='primary' fontSize='small' />\n                             </Link>\n                         </Grid>\n-                        <Grid xs={12} className={classes.grid}>\n-                            {isTierAvailable ? (\n-                                <CheckIcon className={classes.iconTrue} />\n-                            ) : (\n-                                <CloseIcon className={classes.iconFalse} />\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a460f3391f1225645a1326798ab884c39ecd19dc"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3ODEzMQ==", "bodyText": "Remove extra line", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r384278131", "createdAt": "2020-02-26T05:13:12Z", "author": {"login": "kavishkafernando"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycleUpdate.jsx", "diffHunk": "@@ -152,13 +154,14 @@ class LifeCycleUpdate extends Component {\n         this.updateLCStateOfAPI(apiUUID, action);\n     }\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a460f3391f1225645a1326798ab884c39ecd19dc"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a85ae45c82e41e3b6aee5e55ab6b1f90daa160a", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/5a85ae45c82e41e3b6aee5e55ab6b1f90daa160a", "committedDate": "2020-02-26T05:45:33Z", "message": "removed extra newlines"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0ODI1NjMz", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#pullrequestreview-364825633", "createdAt": "2020-02-26T11:32:54Z", "commit": {"oid": "5a85ae45c82e41e3b6aee5e55ab6b1f90daa160a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4Njg1Njgx", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#pullrequestreview-368685681", "createdAt": "2020-03-04T11:02:22Z", "commit": {"oid": "5a85ae45c82e41e3b6aee5e55ab6b1f90daa160a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3010, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}