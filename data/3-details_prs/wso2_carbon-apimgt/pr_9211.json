{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMzYwNjI1", "number": 9211, "title": "Add Update Capability for API Policies", "bodyText": "Problem\nFixes wso2/product-apim#9086 , wso2/product-apim#9007, wso2/product-apim#9143\nAn identity column defined as GENERATED ALWAYS cannot be allowed to provide an explicit value for db2.\nSolution\nCurrently, When updating API rate limiting Policies we are deleting the entry from AM_API_THROTTLE_POLICY table which subsequently deletes the entries from other referenced tables due to foreign key constraints. Then we add the updated entry with the POLICY_ID of the deleted record.\nIn this fix, we change the workflow to update the API policy information only instead of adding and deleting in AM_API_THROTTLE_POLICY. Then we need to delete the entry from AM_CONDITION_GROUP and add it again.", "createdAt": "2020-08-19T18:55:39Z", "url": "https://github.com/wso2/carbon-apimgt/pull/9211", "merged": true, "mergeCommit": {"oid": "f48a836dcbd925885c9f995e38a33f7c5ebe8460"}, "closed": true, "closedAt": "2020-08-20T09:11:36Z", "author": {"login": "Sarangan0219"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAW8UjAH2gAyNDcwMzYwNjI1OmQ3OGZlZTBhOWU0NzNiYjYzMjFmOWUzNDQ2OTc3MzQ0ODU1YTA4NzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtFKEYgFqTU2MTU0Njg2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d78fee0a9e473bb6321f9e3446977344855a0874", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/d78fee0a9e473bb6321f9e3446977344855a0874", "committedDate": "2020-08-19T08:01:02Z", "message": "Add update methods for api Policy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35c9483b3ea4812a849575c348102180aedb74e2", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/35c9483b3ea4812a849575c348102180aedb74e2", "committedDate": "2020-08-19T18:00:49Z", "message": "Refine code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e971726f2428e47a6a3bfafa26cfd1895f31cd7f", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/e971726f2428e47a6a3bfafa26cfd1895f31cd7f", "committedDate": "2020-08-19T18:02:51Z", "message": "Remove unwanted methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d1e7b67e3c7f9b88bb78904651b03eaab67e70c", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/0d1e7b67e3c7f9b88bb78904651b03eaab67e70c", "committedDate": "2020-08-19T18:04:19Z", "message": "Remove unwanted queries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1788459dc274d1c9e95773443995d58c5c7ffbc8", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/1788459dc274d1c9e95773443995d58c5c7ffbc8", "committedDate": "2020-08-19T18:42:55Z", "message": "Refine Code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24c7808a51f98927d3ae08c0f11edbb943ce4215", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/24c7808a51f98927d3ae08c0f11edbb943ce4215", "committedDate": "2020-08-19T18:45:43Z", "message": "Remove unwanted queries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "527d760a98cb02cd90164e39397df5bd0996a44c", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/527d760a98cb02cd90164e39397df5bd0996a44c", "committedDate": "2020-08-19T19:11:23Z", "message": "Update method Description"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMjQ5MDA2", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#pullrequestreview-471249006", "createdAt": "2020-08-20T05:02:53Z", "commit": {"oid": "527d760a98cb02cd90164e39397df5bd0996a44c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNTowMjo1M1rOHDptaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNTowMjo1M1rOHDptaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzU5MTE0NQ==", "bodyText": "Lets use try with resources statement for creating Connection, PreparedStatement and ResultSet objects so that they will be auto closed on exit, without the need to manage them manually.", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#discussion_r473591145", "createdAt": "2020-08-20T05:02:53Z", "author": {"login": "uvindra"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/ApiMgtDAO.java", "diffHunk": "@@ -10517,49 +10517,118 @@ private void addAPIPolicy(APIPolicy policy, Connection conn) throws SQLException\n     /**\n      * Update a API level throttling policy to database.\n      * <p>\n-     * policy will be inserted with that policy Id.\n+     * If condition group already exists for the policy, that condition Group will be deleted and condition Group will\n+     * be inserted to the database with old POLICY_ID.\n      * </p>\n      *\n      * @param policy policy object defining the throttle policy\n-     * @throws SQLException\n+     * @throws APIManagementException\n      */\n-    private void updateAPIPolicy(APIPolicy policy, Connection conn) throws SQLException {\n-        ResultSet resultSet = null;\n-        PreparedStatement policyStatement = null;\n-        String addQuery = SQLConstants.ThrottleSQLConstants.INSERT_API_POLICY_WITH_ID_SQL;\n-        int policyId = policy.getPolicyId();\n-\n+    public APIPolicy updateAPIPolicy(APIPolicy policy) throws APIManagementException {\n+        Connection connection = null;\n+        PreparedStatement updateStatement = null;\n+        PreparedStatement deleteStatement = null ;\n+        PreparedStatement selectStatement = null;\n+        String updateQuery;\n+        int policyId = 0;\n         try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "527d760a98cb02cd90164e39397df5bd0996a44c"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cea946a138945713c9af8c793cc218167525382f", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/cea946a138945713c9af8c793cc218167525382f", "committedDate": "2020-08-20T05:26:24Z", "message": "use try with resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e37cabc6b88b47586e44dd06001f42a8a9fac298", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/e37cabc6b88b47586e44dd06001f42a8a9fac298", "committedDate": "2020-08-20T05:29:14Z", "message": "Refine imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac69c0fa8a7c202a9d45ac30e24258f8a757a95a", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/ac69c0fa8a7c202a9d45ac30e24258f8a757a95a", "committedDate": "2020-08-20T06:42:34Z", "message": "Address review Comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMjg3MzI3", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#pullrequestreview-471287327", "createdAt": "2020-08-20T06:41:35Z", "commit": {"oid": "e37cabc6b88b47586e44dd06001f42a8a9fac298"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNjo0MTozNVrOHDtogA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNjo0MTozNVrOHDtogA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzY1NTQyNA==", "bodyText": "move Prepared statements to the places using with try resource", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#discussion_r473655424", "createdAt": "2020-08-20T06:41:35Z", "author": {"login": "tharindu1st"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/ApiMgtDAO.java", "diffHunk": "@@ -10517,49 +10517,105 @@ private void addAPIPolicy(APIPolicy policy, Connection conn) throws SQLException\n     /**\n      * Update a API level throttling policy to database.\n      * <p>\n-     * policy will be inserted with that policy Id.\n+     * If condition group already exists for the policy, that condition Group will be deleted and condition Group will\n+     * be inserted to the database with old POLICY_ID.\n      * </p>\n      *\n      * @param policy policy object defining the throttle policy\n-     * @throws SQLException\n+     * @throws APIManagementException\n      */\n-    private void updateAPIPolicy(APIPolicy policy, Connection conn) throws SQLException {\n-        ResultSet resultSet = null;\n-        PreparedStatement policyStatement = null;\n-        String addQuery = SQLConstants.ThrottleSQLConstants.INSERT_API_POLICY_WITH_ID_SQL;\n-        int policyId = policy.getPolicyId();\n+    public APIPolicy updateAPIPolicy(APIPolicy policy) throws APIManagementException {\n+        PreparedStatement updateStatement = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e37cabc6b88b47586e44dd06001f42a8a9fac298"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f84c89555026d4a88bd5a2ea1618ab9771ed4518", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/f84c89555026d4a88bd5a2ea1618ab9771ed4518", "committedDate": "2020-08-20T06:50:35Z", "message": "Address review Comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31a317949d5bfe926cc4dcdbc670648ac4656c11", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/31a317949d5bfe926cc4dcdbc670648ac4656c11", "committedDate": "2020-08-20T06:51:13Z", "message": "remove newlines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bf06fb069776e6cf86f5cd588a819bf8d989366", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/2bf06fb069776e6cf86f5cd588a819bf8d989366", "committedDate": "2020-08-20T07:40:01Z", "message": "Remove mandoty constraint for description"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9798d20e92d815ceb26391aff89a027114313fb2", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/9798d20e92d815ceb26391aff89a027114313fb2", "committedDate": "2020-08-20T07:56:02Z", "message": "Add Roll back to transaction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMzYzNzk5", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#pullrequestreview-471363799", "createdAt": "2020-08-20T08:12:52Z", "commit": {"oid": "9798d20e92d815ceb26391aff89a027114313fb2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMzY5ODg0", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#pullrequestreview-471369884", "createdAt": "2020-08-20T08:21:36Z", "commit": {"oid": "9798d20e92d815ceb26391aff89a027114313fb2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxNTQ1NDE2", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#pullrequestreview-561545416", "createdAt": "2021-01-05T06:40:20Z", "commit": {"oid": "9798d20e92d815ceb26391aff89a027114313fb2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNjo0MDoyMVrOIOLvcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNjo0MDoyMVrOIOLvcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTc0MzM0NQ==", "bodyText": "Shall we fix the spaces here?\nselectStatement .setString(", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#discussion_r551743345", "createdAt": "2021-01-05T06:40:21Z", "author": {"login": "tharikaGitHub"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/ApiMgtDAO.java", "diffHunk": "@@ -10517,49 +10517,104 @@ private void addAPIPolicy(APIPolicy policy, Connection conn) throws SQLException\n     /**\n      * Update a API level throttling policy to database.\n      * <p>\n-     * policy will be inserted with that policy Id.\n+     * If condition group already exists for the policy, that condition Group will be deleted and condition Group will\n+     * be inserted to the database with old POLICY_ID.\n      * </p>\n      *\n      * @param policy policy object defining the throttle policy\n-     * @throws SQLException\n+     * @throws APIManagementException\n      */\n-    private void updateAPIPolicy(APIPolicy policy, Connection conn) throws SQLException {\n-        ResultSet resultSet = null;\n-        PreparedStatement policyStatement = null;\n-        String addQuery = SQLConstants.ThrottleSQLConstants.INSERT_API_POLICY_WITH_ID_SQL;\n-        int policyId = policy.getPolicyId();\n-\n-        try {\n-            Statement st = conn.createStatement();\n-            String driverName = conn.getMetaData().getDriverName();\n-            if (driverName.contains(\"MS SQL\") || driverName.contains(\"Microsoft\")) {\n-                st.executeUpdate(\"SET IDENTITY_INSERT AM_API_THROTTLE_POLICY ON\");\n+    public APIPolicy updateAPIPolicy(APIPolicy policy) throws APIManagementException {\n+        String updateQuery;\n+        int policyId = 0;\n+        String selectQuery;\n+        if (policy != null) {\n+            if (!StringUtils.isBlank(policy.getPolicyName()) && policy.getTenantId() != -1) {\n+                selectQuery = SQLConstants.ThrottleSQLConstants.GET_API_POLICY_ID_SQL;\n+                updateQuery = SQLConstants.ThrottleSQLConstants.UPDATE_API_POLICY_SQL;\n+            } else if (!StringUtils.isBlank(policy.getUUID())) {\n+                selectQuery = SQLConstants.ThrottleSQLConstants.GET_API_POLICY_ID_BY_UUID_SQL;\n+                updateQuery = ThrottleSQLConstants.UPDATE_API_POLICY_BY_UUID_SQL;\n+            } else {\n+                String errorMsg = \"Policy object doesn't contain mandatory parameters. At least UUID or Name,Tenant Id\"\n+                                + \" should be provided. Name: \" + policy.getPolicyName()\n+                                + \", Tenant Id: \" + policy.getTenantId() + \", UUID: \" + policy.getUUID();\n+                log.error(errorMsg);\n+                throw new APIManagementException(errorMsg);\n             }\n-            String dbProductName = conn.getMetaData().getDatabaseProductName();\n-            policyStatement = conn.prepareStatement(addQuery,\n-                    new String[]{DBUtils.getConvertedAutoGeneratedColumnName(dbProductName, \"POLICY_ID\")});\n-            setCommonParametersForPolicy(policyStatement, policy);\n-            policyStatement.setString(12, policy.getUserLevel());\n-            policyStatement.setBoolean(10, true);\n-            policyStatement.setInt(13, policyId);\n-            int updatedRawCount = policyStatement.executeUpdate();\n+        } else {\n+            String errorMsg = \"Provided Policy to update is null\";\n+            log.error(errorMsg);\n+            throw new APIManagementException(errorMsg);\n+        }\n \n-            if (driverName.contains(\"MS SQL\") || driverName.contains(\"Microsoft\")) {\n-                st.executeUpdate(\"SET IDENTITY_INSERT AM_API_THROTTLE_POLICY OFF\");\n-            }\n+        try (Connection connection = APIMgtDBUtil.getConnection()) {\n+            connection.setAutoCommit(false);\n+            try ( PreparedStatement selectStatement = connection.prepareStatement(selectQuery);\n+                  PreparedStatement deleteStatement = connection.prepareStatement(SQLConstants\n+                          .ThrottleSQLConstants.DELETE_CONDITION_GROUP_SQL);\n+                  PreparedStatement updateStatement = connection.prepareStatement(updateQuery)) {\n+                if (selectQuery.equals(SQLConstants.ThrottleSQLConstants.GET_API_POLICY_ID_SQL)) {\n+                    selectStatement .setString(1, policy.getPolicyName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9798d20e92d815ceb26391aff89a027114313fb2"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxNTQ2MzE3", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#pullrequestreview-561546317", "createdAt": "2021-01-05T06:42:45Z", "commit": {"oid": "9798d20e92d815ceb26391aff89a027114313fb2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNjo0Mjo0NVrOIOLyAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNjo0Mjo0NVrOIOLyAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTc0NDAwMg==", "bodyText": "These string concatenations are unnecessary. We can create a single string out of this.", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#discussion_r551744002", "createdAt": "2021-01-05T06:42:45Z", "author": {"login": "tharikaGitHub"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/dao/constants/SQLConstants.java", "diffHunk": "@@ -3183,9 +3183,26 @@\n \t\t\t\t+ \" DEFAULT_QUOTA, DEFAULT_QUOTA_UNIT, DEFAULT_UNIT_TIME, DEFAULT_TIME_UNIT, \\n\"\n \t\t\t\t+ \" IS_DEPLOYED, UUID, APPLICABLE_LEVEL, POLICY_ID) \\n\" + \"VALUES (?,?,?,?,?, ?,?,?,?,? ,?,?,?)\";\n \n-\t\tpublic static final String UPDATE_POLICY_SQL = \"UPDATE AM_API_THROTTLE_POLICY \" + \"SET \" + \"NAME = ?,\" + \"DISPLAY_NAME = ?,\"\n-\t\t\t\t+ \" TYPE = ?,\" + \"TENANT_ID = ?,\" + \"APPLICABLE_LEVEL = ? ,\" + \"DESCRIPTION = ? ,\"\n-\t\t\t\t+ \" DEFAULT_QUOTA_TYPE = ? ,\" + \"DEFAULT_QUOTA = ?,\" + \"DEFAULT_UNIT_TIME = ? \" + \" WHERE POLICY_ID = ?\";\n+\n+        public static final String UPDATE_API_POLICY_BY_UUID_SQL = \"UPDATE AM_API_THROTTLE_POLICY \" + \"SET \"\n+                + \"DISPLAY_NAME = ?,\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9798d20e92d815ceb26391aff89a027114313fb2"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxNTQ2ODYx", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#pullrequestreview-561546861", "createdAt": "2021-01-05T06:44:20Z", "commit": {"oid": "9798d20e92d815ceb26391aff89a027114313fb2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNjo0NDoyMVrOIOLz2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNjo0NDoyMVrOIOLz2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTc0NDQ3Mw==", "bodyText": "The case check for 'description' field can be removed entirely.", "url": "https://github.com/wso2/carbon-apimgt/pull/9211#discussion_r551744473", "createdAt": "2021-01-05T06:44:21Z", "author": {"login": "tharikaGitHub"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Throttling/Advanced/AddEdit.jsx", "diffHunk": "@@ -163,6 +163,7 @@ function AddEdit(props) {\n                 }\n                 break;\n             case 'description':\n+                break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9798d20e92d815ceb26391aff89a027114313fb2"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2502, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}