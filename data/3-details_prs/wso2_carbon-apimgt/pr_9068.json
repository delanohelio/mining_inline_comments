{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3MzA0Nzkx", "number": 9068, "title": "Introduce Cache to keep ParsedSignedJWT", "bodyText": "", "createdAt": "2020-07-27T17:37:01Z", "url": "https://github.com/wso2/carbon-apimgt/pull/9068", "merged": true, "mergeCommit": {"oid": "2f731604a1a0a58a993e2e35f62e27cc2c278a2e"}, "closed": true, "closedAt": "2020-07-27T17:43:19Z", "author": {"login": "tharindu1st"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5Fbz2AFqTQ1NTk5NzM2Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5FeniABqjM1OTA5NDc0MzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTk3MzYy", "url": "https://github.com/wso2/carbon-apimgt/pull/9068#pullrequestreview-455997362", "createdAt": "2020-07-27T17:39:40Z", "commit": {"oid": "93f68f016e7d3f0f325edc16b14f45be14f611ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTk4NjM2", "url": "https://github.com/wso2/carbon-apimgt/pull/9068#pullrequestreview-455998636", "createdAt": "2020-07-27T17:41:35Z", "commit": {"oid": "93f68f016e7d3f0f325edc16b14f45be14f611ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzo0MTozNVrOG3s15Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzo0MTozNVrOG3s15Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1OTU1Nw==", "bodyText": "Formatting issue", "url": "https://github.com/wso2/carbon-apimgt/pull/9068#discussion_r461059557", "createdAt": "2020-07-27T17:41:35Z", "author": {"login": "mushthaq33"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/handlers/security/oauth/OAuthAuthenticator.java", "diffHunk": "@@ -279,9 +283,9 @@ public AuthenticationResponse authenticate(MessageContext synCtx) {\n             info = new APIKeyValidationInfoDTO();\n             info.setAuthorized(false);\n             info.setValidationStatus(900906);\n-        } else if (apiKey == null || apiContext == null || apiVersion == null) {\n+        } else if (accessToken == null || apiContext == null || apiVersion == null) {\n             if(log.isDebugEnabled()){\n-                if(apiKey == null){\n+                if(accessToken == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93f68f016e7d3f0f325edc16b14f45be14f611ee"}, "originalPosition": 72}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTk4Nzc2", "url": "https://github.com/wso2/carbon-apimgt/pull/9068#pullrequestreview-455998776", "createdAt": "2020-07-27T17:41:47Z", "commit": {"oid": "93f68f016e7d3f0f325edc16b14f45be14f611ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzo0MTo0N1rOG3s2UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNzo0MTo0N1rOG3s2UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1OTY2NA==", "bodyText": "Formatting issue", "url": "https://github.com/wso2/carbon-apimgt/pull/9068#discussion_r461059664", "createdAt": "2020-07-27T17:41:47Z", "author": {"login": "mushthaq33"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/handlers/security/oauth/OAuthAuthenticator.java", "diffHunk": "@@ -577,4 +581,23 @@ protected APIKeyValidator getAPIKeyValidator() {\n     public int getPriority() {\n         return 10;\n     }\n+\n+    private SignedJWT getSignedJwt(String accessToken) throws ParseException {\n+\n+        String signature = accessToken.split(\"\\\\.\")[2];\n+        SignedJWT signedJWT = null;\n+        Cache gatewaySignedJWTParseCache = CacheProvider.getGatewaySignedJWTParseCache();\n+        if (gatewaySignedJWTParseCache != null) {\n+            Object cachedEntry = gatewaySignedJWTParseCache.get(signature);\n+            if (cachedEntry != null) {\n+                signedJWT = (SignedJWT) cachedEntry;\n+            }else{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93f68f016e7d3f0f325edc16b14f45be14f611ee"}, "originalPosition": 108}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93f68f016e7d3f0f325edc16b14f45be14f611ee", "author": {"user": {"login": "tharindu1st", "name": "Tharindu Dasun Dharmarathna"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/93f68f016e7d3f0f325edc16b14f45be14f611ee", "committedDate": "2020-07-27T17:36:00Z", "message": "Introduce Cache to keep ParsedSignedJWT"}, "afterCommit": {"oid": "39b43f9166980ff6d6cda46be1851e6d3f3f0353", "author": {"user": {"login": "tharindu1st", "name": "Tharindu Dasun Dharmarathna"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/39b43f9166980ff6d6cda46be1851e6d3f3f0353", "committedDate": "2020-07-27T17:41:39Z", "message": "Introduce Cache to keep ParsedSignedJWT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e339c737b78b5669f404ea9873da4ddd1819a8f", "author": {"user": {"login": "tharindu1st", "name": "Tharindu Dasun Dharmarathna"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/8e339c737b78b5669f404ea9873da4ddd1819a8f", "committedDate": "2020-07-27T17:42:27Z", "message": "Introduce Cache to keep ParsedSignedJWT"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39b43f9166980ff6d6cda46be1851e6d3f3f0353", "author": {"user": {"login": "tharindu1st", "name": "Tharindu Dasun Dharmarathna"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/39b43f9166980ff6d6cda46be1851e6d3f3f0353", "committedDate": "2020-07-27T17:41:39Z", "message": "Introduce Cache to keep ParsedSignedJWT"}, "afterCommit": {"oid": "8e339c737b78b5669f404ea9873da4ddd1819a8f", "author": {"user": {"login": "tharindu1st", "name": "Tharindu Dasun Dharmarathna"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/8e339c737b78b5669f404ea9873da4ddd1819a8f", "committedDate": "2020-07-27T17:42:27Z", "message": "Introduce Cache to keep ParsedSignedJWT"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2539, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}