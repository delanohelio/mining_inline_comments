{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyOTEzMDg5", "number": 8300, "title": "Modified response of OAS/Swagger validation in API creation", "bodyText": "fixes wso2/product-apim#7397", "createdAt": "2020-03-03T12:06:16Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8300", "merged": true, "mergeCommit": {"oid": "06f979050afcadcec03a2864a1e01c0030b27652"}, "closed": true, "closedAt": "2020-05-05T06:18:10Z", "author": {"login": "isuruh15"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKA2VEAH2gAyMzgyOTEzMDg5OjU2Y2M0ZGMwM2Y3MjI2ZWI1ZTZmZmRlNjlmYzgyNTcyMjJiOTVjYjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceN62DgFqTQwNTUxNTE1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "56cc4dc03f7226eb5e6ffde69fc8257222b95cb7", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/56cc4dc03f7226eb5e6ffde69fc8257222b95cb7", "committedDate": "2020-03-03T11:44:40Z", "message": "modified response of OAS/Swagger validation in API creation. To Use OAS/Swagger Servers/Host parameter to populate endpoint URL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f91d5423c33c3e178ad441582dd623039b6fed9a", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/f91d5423c33c3e178ad441582dd623039b6fed9a", "committedDate": "2020-03-03T11:44:40Z", "message": "modified response of OAS/Swagger validation in API creation. To Use OAS/Swagger Servers/Host parameter to populate endpoint URL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddb9971bebeb4d576e0d556d58707138875cd7b6", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/ddb9971bebeb4d576e0d556d58707138875cd7b6", "committedDate": "2020-03-03T11:56:59Z", "message": "modified response of OAS/Swagger validation in API creation. To Use OAS/Swagger Servers/Host parameter to populate endpoint URL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NjM1Mzg2", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#pullrequestreview-368635386", "createdAt": "2020-03-04T09:50:15Z", "commit": {"oid": "ddb9971bebeb4d576e0d556d58707138875cd7b6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTo1MDoxNVrOFxmd8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTo1MDoxNVrOFxmd8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU1NDgwMQ==", "bodyText": "This may cause null pointer exception, ArrayIndexOutofBound exception if the servers are not defined.\nNeed to check whether the openAPI.getServers() method for null.", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#discussion_r387554801", "createdAt": "2020-03-04T09:50:15Z", "author": {"login": "menakaj"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/definitions/OAS3Parser.java", "diffHunk": "@@ -506,7 +507,8 @@ public APIDefinitionValidationResponse validateAPIDefinition(String apiDefinitio\n             OpenAPI openAPI = parseAttemptForV3.getOpenAPI();\n             io.swagger.v3.oas.models.info.Info info = openAPI.getInfo();\n             OASParserUtil.updateValidationResponseAsSuccess(validationResponse, apiDefinition, openAPI.getOpenapi(),\n-                    info.getTitle(), info.getVersion(), null, info.getDescription());\n+                    info.getTitle(), info.getVersion(), null, info.getDescription(),\n+                    openAPI.getServers().get(0).getUrl());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddb9971bebeb4d576e0d556d58707138875cd7b6"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41ae626b1d124549970b73844c4cf03699c98c62", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/41ae626b1d124549970b73844c4cf03699c98c62", "committedDate": "2020-03-04T10:00:28Z", "message": "Added condition to avoid possible error scenario - ArrayIndexOutofBounds"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NzI2NTE2", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#pullrequestreview-368726516", "createdAt": "2020-03-04T12:12:02Z", "commit": {"oid": "41ae626b1d124549970b73844c4cf03699c98c62"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjoxMjowMlrOFxq2ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMjoxMjowMlrOFxq2ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYyNjYzNA==", "bodyText": "Shouldn't we check null and empty both? Below is also a valid one.\nservers:\n  []", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#discussion_r387626634", "createdAt": "2020-03-04T12:12:02Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/definitions/OAS3Parser.java", "diffHunk": "@@ -506,7 +507,8 @@ public APIDefinitionValidationResponse validateAPIDefinition(String apiDefinitio\n             OpenAPI openAPI = parseAttemptForV3.getOpenAPI();\n             io.swagger.v3.oas.models.info.Info info = openAPI.getInfo();\n             OASParserUtil.updateValidationResponseAsSuccess(validationResponse, apiDefinition, openAPI.getOpenapi(),\n-                    info.getTitle(), info.getVersion(), null, info.getDescription());\n+                    info.getTitle(), info.getVersion(), null, info.getDescription(),\n+                    openAPI.getServers()==null ? null : openAPI.getServers().get(0).getUrl());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41ae626b1d124549970b73844c4cf03699c98c62"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a86233e8f248ff4097675b3c73bc6c154fff9a13", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/a86233e8f248ff4097675b3c73bc6c154fff9a13", "committedDate": "2020-03-05T04:55:47Z", "message": "handled empty input array"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDM3ODc3", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#pullrequestreview-370037877", "createdAt": "2020-03-06T01:55:13Z", "commit": {"oid": "a86233e8f248ff4097675b3c73bc6c154fff9a13"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMTo1NToxM1rOFyq1BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMTo1NToxM1rOFyq1BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY3NDgyMQ==", "bodyText": "Let's return all the endpoints from the REST API side and take one from the UI. It is better to have some sort of a way to select one of those endpoints or provide a different one in the UI.", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#discussion_r388674821", "createdAt": "2020-03-06T01:55:13Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/resources/publisher-api.yaml", "diffHunk": "@@ -8879,6 +8879,9 @@ definitions:\n           openAPIVersion:\n             type: string\n             example: \"3.0.0\"\n+          endpoint:\n+            type: string\n+            example: \"https://localhost:9443/am/sample/pizzashack/v1/api/\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a86233e8f248ff4097675b3c73bc6c154fff9a13"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1817a801e03cfb84af9c5dcf4833b2d66c48ff93", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/1817a801e03cfb84af9c5dcf4833b2d66c48ff93", "committedDate": "2020-03-06T11:41:10Z", "message": "added multiple servers to the response"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1ODEyNjQ1", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#pullrequestreview-385812645", "createdAt": "2020-04-01T17:46:52Z", "commit": {"oid": "1817a801e03cfb84af9c5dcf4833b2d66c48ff93"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NTE1MTU5", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#pullrequestreview-405515159", "createdAt": "2020-05-05T06:16:51Z", "commit": {"oid": "1817a801e03cfb84af9c5dcf4833b2d66c48ff93"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2956, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}