{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwMzg0ODIz", "number": 8851, "title": "GraphQL QueryAnalysis enable with API key", "bodyText": "", "createdAt": "2020-06-26T05:13:37Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8851", "merged": true, "mergeCommit": {"oid": "0b16fa110391374ec4149d5e040fe398303c5cb9"}, "closed": true, "closedAt": "2020-06-26T11:02:27Z", "author": {"login": "rasika1995"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuwDxtAH2gAyNDQwMzg0ODIzOjYzM2QwNmU3YTdhN2JiMWZiZTZiZTkzMjUwNzQ0NjIzN2EzNzhhZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvBKzvAFqTQzODIwNTA2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "633d06e7a7a7bb1fbe6be932507446237a378ada", "author": {"user": {"login": "rasika1995", "name": null}}, "url": "https://github.com/wso2/carbon-apimgt/commit/633d06e7a7a7bb1fbe6be932507446237a378ada", "committedDate": "2020-06-25T15:06:10Z", "message": "change made to APIKeyGenerator to validate GraphQL Queries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28f30edfe6146199c73509b80c8b135e4a7a4b54", "author": {"user": {"login": "rasika1995", "name": null}}, "url": "https://github.com/wso2/carbon-apimgt/commit/28f30edfe6146199c73509b80c8b135e4a7a4b54", "committedDate": "2020-06-26T03:03:20Z", "message": "added isSliderBarOpen user selection to the local store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64c7b197bfa7fd5ff358fe5828ea4b50acf5cb81", "author": {"user": {"login": "rasika1995", "name": null}}, "url": "https://github.com/wso2/carbon-apimgt/commit/64c7b197bfa7fd5ff358fe5828ea4b50acf5cb81", "committedDate": "2020-06-26T03:05:45Z", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt into test1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04941156e5cb77a91ca9ccaf198168eb4bdf3042", "author": {"user": {"login": "rasika1995", "name": null}}, "url": "https://github.com/wso2/carbon-apimgt/commit/04941156e5cb77a91ca9ccaf198168eb4bdf3042", "committedDate": "2020-06-26T03:51:53Z", "message": "change index file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f490fe529b83a81b5710e8af8be4be3eee79d69b", "author": {"user": {"login": "rasika1995", "name": null}}, "url": "https://github.com/wso2/carbon-apimgt/commit/f490fe529b83a81b5710e8af8be4be3eee79d69b", "committedDate": "2020-06-26T06:34:06Z", "message": "change made to GraphQLQueryAnalysisHandler"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MDUwMTEz", "url": "https://github.com/wso2/carbon-apimgt/pull/8851#pullrequestreview-438050113", "createdAt": "2020-06-26T06:45:48Z", "commit": {"oid": "f490fe529b83a81b5710e8af8be4be3eee79d69b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjo0NTo0OFrOGpVi0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjo0NTo0OFrOGpVi0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5Nzc3Nw==", "bodyText": "isn't \"graphQLMaxComplexity\" and \"graphQLMaxDepth\" string used in multiple places? if so can you add it to a string constant class and reuse?", "url": "https://github.com/wso2/carbon-apimgt/pull/8851#discussion_r445997777", "createdAt": "2020-06-26T06:45:48Z", "author": {"login": "fazlan-nazeem"}, "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/utils/GatewayUtils.java", "diffHunk": "@@ -735,6 +736,12 @@ public static AuthenticationContext generateAuthenticationContext(String tokenSi\n                                 .equals(subscriptionTierObj.getAsString(APIConstants.JwtTokenConstants.QUOTA_TYPE))) {\n                     authContext.setIsContentAware(true);;\n                 }\n+                if (APIConstants.GRAPHQL_API.equals(synCtx.getProperty(APIConstants.API_TYPE))) {\n+                    Integer graphQLMaxDepth = (int) (long) subscriptionTierObj.get(\"graphQLMaxDepth\");\n+                    Integer graphQLMaxComplexity = (int) (long) subscriptionTierObj.get(\"graphQLMaxComplexity\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f490fe529b83a81b5710e8af8be4be3eee79d69b"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2442e2a22186a968e62d69047c06b2a544c33018", "author": {"user": {"login": "rasika1995", "name": null}}, "url": "https://github.com/wso2/carbon-apimgt/commit/2442e2a22186a968e62d69047c06b2a544c33018", "committedDate": "2020-06-26T07:36:42Z", "message": "fixed comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjA1MDY0", "url": "https://github.com/wso2/carbon-apimgt/pull/8851#pullrequestreview-438205064", "createdAt": "2020-06-26T11:02:14Z", "commit": {"oid": "2442e2a22186a968e62d69047c06b2a544c33018"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2609, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}