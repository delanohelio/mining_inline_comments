{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MjI4NjQw", "number": 9504, "title": "Fix permission list not updating issue in subscription policies", "bodyText": "Fixes wso2/product-apim#9596", "createdAt": "2020-12-14T07:48:36Z", "url": "https://github.com/wso2/carbon-apimgt/pull/9504", "merged": true, "mergeCommit": {"oid": "8fe437251c0fc319c64307f21c86852f85937837"}, "closed": true, "closedAt": "2020-12-15T09:24:27Z", "author": {"login": "menakaj"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmDJMhgFqTU1MTIzMjU2MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmW23mAFqTU1MjI1Mjk5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMjMyNTYw", "url": "https://github.com/wso2/carbon-apimgt/pull/9504#pullrequestreview-551232560", "createdAt": "2020-12-14T10:26:07Z", "commit": {"oid": "f260e52f4a231e2c3e84520fd9fa6a2bb2e1a56d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMTI3NTYw", "url": "https://github.com/wso2/carbon-apimgt/pull/9504#pullrequestreview-552127560", "createdAt": "2020-12-15T05:58:11Z", "commit": {"oid": "8ef7e18046a72a4217dae4a3ded4760dab08ae94"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMjEwNDUy", "url": "https://github.com/wso2/carbon-apimgt/pull/9504#pullrequestreview-552210452", "createdAt": "2020-12-15T08:31:55Z", "commit": {"oid": "8ef7e18046a72a4217dae4a3ded4760dab08ae94"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwODozMTo1NVrOIF-1oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwODozMTo1NVrOIF-1oQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzE0MzMyOQ==", "bodyText": "roles: (result.body.permissions === null)\n? 'Internal/everyone' : result.body.permissions.roles && result.body.permissions.roles.join(','),\n@menakaj please validate the above fix", "url": "https://github.com/wso2/carbon-apimgt/pull/9504#discussion_r543143329", "createdAt": "2020-12-15T08:31:55Z", "author": {"login": "isharac"}, "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Throttling/Subscription/AddEdit.jsx", "diffHunk": "@@ -239,8 +239,10 @@ function AddEdit(props) {\n                     customAttributes: setCustomAttributes(result.body.customAttributes),\n                     stopOnQuotaReach: result.body.stopOnQuotaReach,\n                     permissions: {\n-                        roles: 'Internal/everyone',\n-                        permissionStatus: 'ALLOW',\n+                        permissionStatus: (result.body.permissions === null)\n+                            ? 'ALLOW' : result.body.permissions.permissionType,\n+                        roles: (result.body.permissions === null)\n+                            ? 'Internal/everyone' : result.body.permissions.roles.join(','),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ef7e18046a72a4217dae4a3ded4760dab08ae94"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41d91fc9a10a0b1b25286335dc16b2fa4d45e227", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/41d91fc9a10a0b1b25286335dc16b2fa4d45e227", "committedDate": "2020-12-15T09:19:14Z", "message": "Fix permission list not updating issue in subscription policies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8a45e91e490677dc0f0d8ccd2e56549c12c338f", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/f8a45e91e490677dc0f0d8ccd2e56549c12c338f", "committedDate": "2020-12-15T09:19:20Z", "message": "Fix eslint issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7abe8cde75057bd6e9e0aa4efb898c33342bb041", "author": {"user": {"login": "menakaj", "name": "Menaka Jayawardena"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/7abe8cde75057bd6e9e0aa4efb898c33342bb041", "committedDate": "2020-12-15T09:19:20Z", "message": "Add null check to the permissions.roles"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMjUyOTk2", "url": "https://github.com/wso2/carbon-apimgt/pull/9504#pullrequestreview-552252996", "createdAt": "2020-12-15T09:24:12Z", "commit": {"oid": "7abe8cde75057bd6e9e0aa4efb898c33342bb041"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3042, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}