{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NDgwNzI4", "number": 8210, "title": "Added privilege checking before publishing the sample API.", "bodyText": "Fixes wso2/product-apim#7464", "createdAt": "2020-02-18T08:29:06Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8210", "merged": true, "mergeCommit": {"oid": "9995f27dc8a71e31f4c9fc6dc7eca3f961395655"}, "closed": true, "closedAt": "2020-02-20T08:28:12Z", "author": {"login": "RakhithaRR"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFcfzbgH2gAyMzc2NDgwNzI4OjA0YzhiMjQyZWY2OGYxYjcxZDA2ODhmOTg4Y2MzMDI2MDgxMDEyMGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtZiW_gFqTU2MjM1MzA3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "04c8b242ef68f1b71d0688f988cc30260810120c", "author": {"user": {"login": "RakhithaRR", "name": "Rakhitha Ranathunge"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/04c8b242ef68f1b71d0688f988cc30260810120c", "committedDate": "2020-02-18T07:07:47Z", "message": "Added privilege checking before publishing the sample API."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjY3NDUw", "url": "https://github.com/wso2/carbon-apimgt/pull/8210#pullrequestreview-360267450", "createdAt": "2020-02-18T11:35:18Z", "commit": {"oid": "04c8b242ef68f1b71d0688f988cc30260810120c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMTozNToxOFrOFq_DWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMTozNToxOFrOFq_DWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYxNzU2MA==", "bodyText": "Do not add new line after }.\nif (){\n} else {\n}", "url": "https://github.com/wso2/carbon-apimgt/pull/8210#discussion_r380617560", "createdAt": "2020-02-18T11:35:18Z", "author": {"login": "menakaj"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Listing/SampleAPI/SampleAPI.jsx", "diffHunk": "@@ -98,21 +98,34 @@ class SampleAPI extends Component {\n             console.error(error);\n             Alert.error(error);\n         });\n-        swaggerUpdatePromise.then((sampleAPI) => {\n-            sampleAPI.publish()\n-                .then(() => {\n-                    this.setState({ published: true, api: sampleAPI });\n-                    Alert.info(intl.formatMessage({\n-                        id: 'Apis.Listing.SampleAPI.SampleAPI.created',\n-                        defaultMessage: 'Sample PizzaShackAPI API created successfully',\n-                    }));\n-                })\n-                .catch((error) => {\n-                    console.error(error);\n-                    this.setState({ deploying: false });\n-                    Alert.error(error);\n-                });\n-        });\n+        if(!AuthManager.isNotPublisher()) {\n+            swaggerUpdatePromise.then((sampleAPI) => {\n+                sampleAPI.publish()\n+                    .then(() => {\n+                        this.setState({ published: true, api: sampleAPI }); \n+                        Alert.info(intl.formatMessage({\n+                            id: 'Apis.Listing.SampleAPI.SampleAPI.created',\n+                            defaultMessage: 'Sample PizzaShackAPI API created successfully',\n+                        }));\n+                    })\n+                    .catch((error) => {\n+                        this.setState({ deploying: false });\n+                        Alert.error(error);\n+                    });\n+            });\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04c8b242ef68f1b71d0688f988cc30260810120c"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39c0fc667dab22aeca023ed813d454b84325c925", "author": {"user": {"login": "RakhithaRR", "name": "Rakhitha Ranathunge"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/39c0fc667dab22aeca023ed813d454b84325c925", "committedDate": "2020-02-18T11:45:14Z", "message": "Fixed - removed extra newline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "432d9444a6a59cb628caab8bb6a9e813768b0d0f", "author": {"user": {"login": "RakhithaRR", "name": "Rakhitha Ranathunge"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/432d9444a6a59cb628caab8bb6a9e813768b0d0f", "committedDate": "2020-02-18T11:50:28Z", "message": "Merge remote-tracking branch 'upstream/master' into creator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjgxMDE3", "url": "https://github.com/wso2/carbon-apimgt/pull/8210#pullrequestreview-360281017", "createdAt": "2020-02-18T11:58:53Z", "commit": {"oid": "39c0fc667dab22aeca023ed813d454b84325c925"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMTo1ODo1M1rOFq_s3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMTo1ODo1M1rOFq_s3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYyODE5MA==", "bodyText": "Add space before else. } else {", "url": "https://github.com/wso2/carbon-apimgt/pull/8210#discussion_r380628190", "createdAt": "2020-02-18T11:58:53Z", "author": {"login": "menakaj"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Listing/SampleAPI/SampleAPI.jsx", "diffHunk": "@@ -113,8 +113,7 @@ class SampleAPI extends Component {\n                         Alert.error(error);\n                     });\n             });\n-        }\n-        else {\n+        }else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39c0fc667dab22aeca023ed813d454b84325c925"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1976ef288a885324e02b8ebd67197891e305a678", "author": {"user": {"login": "RakhithaRR", "name": "Rakhitha Ranathunge"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/1976ef288a885324e02b8ebd67197891e305a678", "committedDate": "2020-02-19T04:14:55Z", "message": "Fixed eslint issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNzA0OTIx", "url": "https://github.com/wso2/carbon-apimgt/pull/8210#pullrequestreview-361704921", "createdAt": "2020-02-20T08:22:10Z", "commit": {"oid": "1976ef288a885324e02b8ebd67197891e305a678"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyMzUzMDc1", "url": "https://github.com/wso2/carbon-apimgt/pull/8210#pullrequestreview-562353075", "createdAt": "2021-01-06T06:28:53Z", "commit": {"oid": "1976ef288a885324e02b8ebd67197891e305a678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQwNjoyODo1M1rOIOzbnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQwNjoyODo1M1rOIOzbnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjM5MzYzMQ==", "bodyText": "catch doesn't seem to be indented properly", "url": "https://github.com/wso2/carbon-apimgt/pull/8210#discussion_r552393631", "createdAt": "2021-01-06T06:28:53Z", "author": {"login": "praminda"}, "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Listing/SampleAPI/SampleAPI.jsx", "diffHunk": "@@ -98,21 +98,33 @@ class SampleAPI extends Component {\n             console.error(error);\n             Alert.error(error);\n         });\n-        swaggerUpdatePromise.then((sampleAPI) => {\n-            sampleAPI.publish()\n-                .then(() => {\n-                    this.setState({ published: true, api: sampleAPI });\n-                    Alert.info(intl.formatMessage({\n-                        id: 'Apis.Listing.SampleAPI.SampleAPI.created',\n-                        defaultMessage: 'Sample PizzaShackAPI API created successfully',\n-                    }));\n-                })\n+        if (!AuthManager.isNotPublisher()) {\n+            swaggerUpdatePromise.then((sampleAPI) => {\n+                sampleAPI.publish()\n+                    .then(() => {\n+                        this.setState({ published: true, api: sampleAPI });\n+                        Alert.info(intl.formatMessage({\n+                            id: 'Apis.Listing.SampleAPI.SampleAPI.created',\n+                            defaultMessage: 'Sample PizzaShackAPI API created successfully',\n+                        }));\n+                    })\n+                    .catch((error) => {\n+                        this.setState({ deploying: false });\n+                        Alert.error(error);\n+                    });\n+            });\n+        } else {\n+            swaggerUpdatePromise.then((sampleApi) => {\n+                this.setState({ published: true, api: sampleApi });\n+                Alert.info(intl.formatMessage({\n+                    id: 'Apis.Listing.SampleAPI.SampleAPI.created',\n+                    defaultMessage: 'Sample PizzaShackAPI API created successfully',\n+                }));\n+            })\n                 .catch((error) => {\n-                    console.error(error);\n-                    this.setState({ deploying: false });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1976ef288a885324e02b8ebd67197891e305a678"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3004, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}