{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MzY3MDcx", "number": 8944, "title": "Modifying Admin v1 REST APIs to eliminate the limitations stated in wso2/product-apim-tooling#335", "bodyText": "Purpose\nFixes: wso2/product-apim-tooling#335\nGoals\nModify Admin v1 REST APIs to perform the tasks risen from wso2/product-apim-tooling#335\nApproach\n\nUpdated Admin v1 GET /applications: resource by adding a new optional parameter as name.\nAdded a new resource as Admin v1 DELETE /applications/{applicationId}: which allows to delete an application for the user's who has apim:admin or apim:app_import_export scope.\n\nFor further clarification, refer Mail: [Architecture] [APIM] Improving the functionality to delete applications using the API Controller by considering the -o (--owner) flag\nUser stories\n\n\nBelow cURL requests can be sent to retrieve applications using the modified  Admin v1 GET /applications: resource.\nExample 1\ncurl -X GET \"https://localhost:9443/api/am/admin/v1/applications?user=subscriber&name=testapp\" -H \"accept: application/json\" -H \"Authorization: Bearer 434c0df4-0943-3aa1-a55b-55e04a112bdc\" -k\n\nThis will retrieve the \"testapp\" which belongs to \"subscriber\".\nExample 2\ncurl -X GET \"https://localhost:9443/api/am/admin/v1/applications?name=testapp\" -H \"accept: application/json\" -H \"Authorization: Bearer 434c0df4-0943-3aa1-a55b-55e04a112bdc\" -k\n\nThis will retrieve the \"testapp\" which belongs to the currently logged in user.\n\n\nBelow cURL request can be sent to delete an application specified by the applicationId which belongs to the same user or belongs to another user, using the newly added  Admin v1 DELETE /applications/{applicationId}: resource.\nExample\ncurl -X DELETE \"https://localhost:9443/api/am/admin/v1/applications/edc4f9ee-93fb-4863-bb8d-9de956e6ea9c\" -H \"accept: application/json\" -H \"Authorization: Bearer 434c0df4-0943-3aa1-a55b-55e04a112bdc\" -k\n\nThis will delete the application specified by \"edc4f9ee-93fb-4863-bb8d-9de956e6ea9c\".\n\n\nDocumentation\nDocumentation changes should be done especially in the API Controller related docs.\nRelated PRs\nwso2/product-apim-tooling#394\nTest environment\n\nJDK 1.8.0_251\nUbuntu 20.04 LTS", "createdAt": "2020-07-07T12:01:50Z", "url": "https://github.com/wso2/carbon-apimgt/pull/8944", "merged": true, "mergeCommit": {"oid": "4ea93cb7f139b6172622595a747487f3db59834b"}, "closed": true, "closedAt": "2020-07-14T06:00:10Z", "author": {"login": "wasuradananjith"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyo1YIABqjM1MjEzODk4NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvExE3AFqTU2NTI2NjM5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b976e4c5b7efffdea5cf96af487c96fb3cdb69fb", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/b976e4c5b7efffdea5cf96af487c96fb3cdb69fb", "committedDate": "2020-07-07T10:32:28Z", "message": "Add Admin v1 DELETE /applications/{applicationId} to delete app"}, "afterCommit": {"oid": "1f62593e6defa304696ba468565dbc7a0e176019", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/1f62593e6defa304696ba468565dbc7a0e176019", "committedDate": "2020-07-07T15:21:47Z", "message": "Add Admin v1 DELETE /applications/{applicationId} to delete app"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f62593e6defa304696ba468565dbc7a0e176019", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/1f62593e6defa304696ba468565dbc7a0e176019", "committedDate": "2020-07-07T15:21:47Z", "message": "Add Admin v1 DELETE /applications/{applicationId} to delete app"}, "afterCommit": {"oid": "22d1d6421d629cf629af1e09e42ce0f872f33f7a", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/22d1d6421d629cf629af1e09e42ce0f872f33f7a", "committedDate": "2020-07-09T09:27:37Z", "message": "Add Admin v1 DELETE /applications/{applicationId} to delete app"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "64ea3916d0f5ac2969e029fccc47a5193e4e97e5", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/64ea3916d0f5ac2969e029fccc47a5193e4e97e5", "committedDate": "2020-07-09T09:45:06Z", "message": "Remove unnecessary comments"}, "afterCommit": {"oid": "c03c0551d37ed45e9f8495a215c1f93c2fa06296", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/c03c0551d37ed45e9f8495a215c1f93c2fa06296", "committedDate": "2020-07-09T10:35:07Z", "message": "Change comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MTk5NDgw", "url": "https://github.com/wso2/carbon-apimgt/pull/8944#pullrequestreview-447199480", "createdAt": "2020-07-13T12:22:29Z", "commit": {"oid": "c03c0551d37ed45e9f8495a215c1f93c2fa06296"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMjoyMjoyOVrOGwmJ9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxMjoyMjoyOVrOGwmJ9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzYwOTk3NA==", "bodyText": "shall we use x-examples format?", "url": "https://github.com/wso2/carbon-apimgt/pull/8944#discussion_r453609974", "createdAt": "2020-07-13T12:22:29Z", "author": {"login": "malinthaprasan"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin.v1/src/main/resources/admin-api.yaml", "diffHunk": "@@ -1893,7 +1899,61 @@ paths:\n           schema:\n             $ref: '#/definitions/Error'\n \n+######################################################\n+# The \"Individual Application\" resource APIs\n+######################################################\n+  /applications/{applicationId}:\n \n+    #-----------------------------------------------------\n+    # Delete a certain application\n+    #-----------------------------------------------------\n+    delete:\n+      security:\n+        - OAuth2Security:\n+            - apim:admin\n+            - apim:app_import_export\n+      x-wso2-curl: \"curl -k -H \\\"Authorization: Bearer ae4eae22-3f65-387b-a171-d37eaa366fa8\\\" -X DELETE \\\"https://localhost:9443/api/am/admin/v1/applications/367a2361-8db5-4140-8133-c6c8dc7fa0c4\\\"\"\n+      x-wso2-request: |\n+        DELETE https://localhost:9443/api/am/admin/v1/applications/367a2361-8db5-4140-8133-c6c8dc7fa0c4\n+        Authorization: Bearer ae4eae22-3f65-387b-a171-d37eaa366fa8\n+      x-wso2-response: \"HTTP/1.1 200 OK\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c03c0551d37ed45e9f8495a215c1f93c2fa06296"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9207e34138475f5ad2422fd6a92ec16e06152117", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/9207e34138475f5ad2422fd6a92ec16e06152117", "committedDate": "2020-07-14T04:01:23Z", "message": "Modify Admin v1 GET /applications to search by application name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "178775e4586e268aa8aabd1e4087cfe9e8859d5a", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/178775e4586e268aa8aabd1e4087cfe9e8859d5a", "committedDate": "2020-07-14T04:01:23Z", "message": "Add Admin v1 DELETE /applications/{applicationId} to delete app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4b76858b80e10cd349f43277ea6126fe3a12752", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/d4b76858b80e10cd349f43277ea6126fe3a12752", "committedDate": "2020-07-14T04:01:23Z", "message": "Change comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56f2666d4b27a53e20ab00c5df24ea16452e6c63", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/56f2666d4b27a53e20ab00c5df24ea16452e6c63", "committedDate": "2020-07-14T04:51:37Z", "message": "Add x-examples to DELETE /applications in admin v1"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c03c0551d37ed45e9f8495a215c1f93c2fa06296", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/c03c0551d37ed45e9f8495a215c1f93c2fa06296", "committedDate": "2020-07-09T10:35:07Z", "message": "Change comments"}, "afterCommit": {"oid": "56f2666d4b27a53e20ab00c5df24ea16452e6c63", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/carbon-apimgt/commit/56f2666d4b27a53e20ab00c5df24ea16452e6c63", "committedDate": "2020-07-14T04:51:37Z", "message": "Add x-examples to DELETE /applications in admin v1"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3Nzg5OTY5", "url": "https://github.com/wso2/carbon-apimgt/pull/8944#pullrequestreview-447789969", "createdAt": "2020-07-14T05:08:08Z", "commit": {"oid": "56f2666d4b27a53e20ab00c5df24ea16452e6c63"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1MjY2Mzkx", "url": "https://github.com/wso2/carbon-apimgt/pull/8944#pullrequestreview-565266391", "createdAt": "2021-01-11T11:24:54Z", "commit": {"oid": "56f2666d4b27a53e20ab00c5df24ea16452e6c63"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQxMToyNDo1NFrOIRRUfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQxMToyNDo1NFrOIRRUfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDk4MDQ3OA==", "bodyText": "Don't we need a new line eof?", "url": "https://github.com/wso2/carbon-apimgt/pull/8944#discussion_r554980478", "createdAt": "2021-01-11T11:24:54Z", "author": {"login": "Meruja"}, "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.admin.v1/src/main/resources/docs/examples/applications/applications.yaml", "diffHunk": "@@ -0,0 +1,13 @@\n+delete:\n+  - id: deleteApplication\n+  - request:\n+      method: DELETE\n+      url: https://localhost:9443/api/am/admin/v1/applications/367a2361-8db5-4140-8133-c6c8dc7fa0c4\n+      headers: |\n+        Authorization: Bearer ae4eae22-3f65-387b-a171-d37eaa366fa8\n+    response:\n+      status:\n+        code: 200\n+        msg: OK\n+      headers: |\n+        Content-Type: application/json", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56f2666d4b27a53e20ab00c5df24ea16452e6c63"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2560, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}