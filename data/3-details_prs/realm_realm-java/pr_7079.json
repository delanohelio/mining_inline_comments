{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4NDI2MTcw", "number": 7079, "title": "Add retry custom confirmation logic", "bodyText": "This PR request allows the users to call a custom confirmation function to validate their registration.", "createdAt": "2020-09-03T07:37:31Z", "url": "https://github.com/realm/realm-java/pull/7079", "merged": true, "mergeCommit": {"oid": "d150f48619ca72ff86285cf5a178cc24561bec45"}, "closed": true, "closedAt": "2020-09-16T12:18:28Z", "author": {"login": "clementetb"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFLhZ9AH2gAyNDc4NDI2MTcwOjkzNTg3ZTBiMzBiMmM2NzAwM2JlYzgyOGEyMjFiNjk1Y2Y3MTg5YzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJaeMgAH2gAyNDc4NDI2MTcwOjk1NTJlNTVjN2FmOWQzMmM5ZjNhOWJjMTc3MzI1Y2RmN2RmNGZiZGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "93587e0b30b2c67003bec828a221b695cf7189c0", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/93587e0b30b2c67003bec828a221b695cf7189c0", "committedDate": "2020-09-03T07:32:18Z", "message": "Add retry custom confirmation logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "316cbaff7047cc3fad90389893c9a44dc5fba569", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/316cbaff7047cc3fad90389893c9a44dc5fba569", "committedDate": "2020-09-03T09:00:24Z", "message": "Bump object store head"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7169911ed2f69bbc9fa17b3ed80b95100e654974", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/7169911ed2f69bbc9fa17b3ed80b95100e654974", "committedDate": "2020-09-03T14:55:34Z", "message": "Rename call custom confirmation function"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMzAyMTk0", "url": "https://github.com/realm/realm-java/pull/7079#pullrequestreview-483302194", "createdAt": "2020-09-07T07:25:44Z", "commit": {"oid": "7169911ed2f69bbc9fa17b3ed80b95100e654974"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzoyNTo0NFrOHNzKWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzoyNjozN1rOHNzMIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzMTc3MA==", "bodyText": "Don't we usually include a test for these validations?", "url": "https://github.com/realm/realm-java/pull/7079#discussion_r484231770", "createdAt": "2020-09-07T07:25:44Z", "author": {"login": "rorbech"}, "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/auth/EmailPasswordAuth.java", "diffHunk": "@@ -145,6 +146,19 @@ public void resendConfirmationEmail(String email) throws AppException {\n         ResultHandler.handleResult(null, error);\n     }\n \n+    /**\n+     * Retries the custom confirmation function on a user for a given email.\n+     *\n+     * @param email the email of the user.\n+     * @throws AppException if the server failed to confirm the user.\n+     */\n+    public void retryCustomConfirmation(String email) throws AppException {\n+        Util.checkEmpty(email, \"email\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7169911ed2f69bbc9fa17b3ed80b95100e654974"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzMjIyNg==", "bodyText": "Any particular reason that we do not have an async variant of this?", "url": "https://github.com/realm/realm-java/pull/7079#discussion_r484232226", "createdAt": "2020-09-07T07:26:37Z", "author": {"login": "rorbech"}, "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/auth/EmailPasswordAuth.java", "diffHunk": "@@ -145,6 +146,19 @@ public void resendConfirmationEmail(String email) throws AppException {\n         ResultHandler.handleResult(null, error);\n     }\n \n+    /**\n+     * Retries the custom confirmation function on a user for a given email.\n+     *\n+     * @param email the email of the user.\n+     * @throws AppException if the server failed to confirm the user.\n+     */\n+    public void retryCustomConfirmation(String email) throws AppException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7169911ed2f69bbc9fa17b3ed80b95100e654974"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8d5d0e4bb13042ca0d3da3d52c3856772cf89bd", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/d8d5d0e4bb13042ca0d3da3d52c3856772cf89bd", "committedDate": "2020-09-07T08:09:18Z", "message": "Add missing test cases and async function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69eb6ac0b7fe090bcc8453c982cf2b6306cf5231", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/69eb6ac0b7fe090bcc8453c982cf2b6306cf5231", "committedDate": "2020-09-07T08:25:31Z", "message": "Test threading cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTA2ODAz", "url": "https://github.com/realm/realm-java/pull/7079#pullrequestreview-483506803", "createdAt": "2020-09-07T12:11:03Z", "commit": {"oid": "69eb6ac0b7fe090bcc8453c982cf2b6306cf5231"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjoxMTowM1rOHN9AWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QxMjoxMTowM1rOHN9AWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDM5MzA1MQ==", "bodyText": "We should make sure we call this method the same across SDK's. Right now it doesn't seem to be documented on the website (most likely because the old SDK did not have it).\nEspecially since it is described as rerunning the registration. This makes me wonder if we should rename this to rerunCustomConfirmationFunction since it already ran once when registering and reword the javadoc appropriately?", "url": "https://github.com/realm/realm-java/pull/7079#discussion_r484393051", "createdAt": "2020-09-07T12:11:03Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/auth/EmailPasswordAuth.java", "diffHunk": "@@ -164,6 +165,38 @@ public Void run() throws AppException {\n         }.start();\n     }\n \n+    /**\n+     * Calls the custom confirmation function on a user for a given email.\n+     *\n+     * @param email the email of the user.\n+     * @throws AppException if the server failed to confirm the user.\n+     */\n+    public void callCustomConfirmationFunction(String email) throws AppException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69eb6ac0b7fe090bcc8453c982cf2b6306cf5231"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "149684697f2e8ab497661f8147cfbef4823df85a", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/149684697f2e8ab497661f8147cfbef4823df85a", "committedDate": "2020-09-10T13:33:57Z", "message": "Rename custom confirmation method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59bff0786cb04b453c8776176579ac985b79f1dc", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/59bff0786cb04b453c8776176579ac985b79f1dc", "committedDate": "2020-09-11T12:24:16Z", "message": "Fix integration test cases, they were not calling the custom confirmation function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83c05519a0e5c4dbbd86a971fd52262c0afa9623", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/83c05519a0e5c4dbbd86a971fd52262c0afa9623", "committedDate": "2020-09-12T03:38:06Z", "message": "Update changelog file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NDU4NjE0", "url": "https://github.com/realm/realm-java/pull/7079#pullrequestreview-487458614", "createdAt": "2020-09-14T06:49:48Z", "commit": {"oid": "83c05519a0e5c4dbbd86a971fd52262c0afa9623"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NTg3ODA2", "url": "https://github.com/realm/realm-java/pull/7079#pullrequestreview-487587806", "createdAt": "2020-09-14T09:43:03Z", "commit": {"oid": "83c05519a0e5c4dbbd86a971fd52262c0afa9623"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7ec0fae24a2e6ab484170d3435d78f78f51df12", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/d7ec0fae24a2e6ab484170d3435d78f78f51df12", "committedDate": "2020-09-16T09:58:17Z", "message": "Merge branch 'v10' into ct/custom-confirm-call\n\n# Conflicts:\n#\tCHANGELOG.md\n#\trealm/realm-library/src/main/cpp/object-store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9552e55c7af9d32c9f3a9bc177325cdf7df4fbda", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/9552e55c7af9d32c9f3a9bc177325cdf7df4fbda", "committedDate": "2020-09-16T11:13:04Z", "message": "Fix tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2350, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}