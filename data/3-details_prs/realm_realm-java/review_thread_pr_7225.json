{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwODU5MjYx", "number": 7225, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwOTowMzoxNFrOE_hGMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwODowNDoyMVrOFCyP9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MDM4MDAyOnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/auth/GoogleAuthType.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwOTowMzoxNFrOH9QwLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwOTowMzoxNFrOH9QwLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk5OTY2MQ==", "bodyText": "We need public API docs for this, including each enum type + missing license headers", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r533999661", "createdAt": "2020-12-02T09:03:14Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/auth/GoogleAuthType.java", "diffHunk": "@@ -0,0 +1,6 @@\n+package io.realm.mongodb.auth;\n+\n+public enum GoogleAuthType {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fad3c94f42855836d35ab70a94f0ce69855a5ff4"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1MDM4NzQ4OnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/Credentials.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwOTowNDo1MVrOH9Q0bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwOTowNDo1MVrOH9Q0bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDAwMDc1MA==", "bodyText": "We should probably just rename this to token as the type is determined by the enum?", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r534000750", "createdAt": "2020-12-02T09:04:51Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/objectServer/java/io/realm/mongodb/Credentials.java", "diffHunk": "@@ -150,17 +152,33 @@ public static Credentials facebook(String accessToken) {\n     }\n \n     /**\n-     * Creates credentials representing a login using a Google Authorization Code.\n+     * Creates credentials representing a login using a Google access token of a given {@link GoogleAuthType}.\n+     * <p>\n+     * This provider must be enabled on MongoDB Realm to work.\n+     *\n+     * @param accessToken the access token returned when logging in to Google.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fad3c94f42855836d35ab70a94f0ce69855a5ff4"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3MzExMDczOnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/internal/network/LoggingInterceptorTest.kt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwOTozODo1NFrOIAd5EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwOTozODo1NFrOIAd5EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzM2MDY1Ng==", "bodyText": "There is an assertFailsWithErrorCode for this pattern. There is still no functionality to match the error though, so you will still have to inspect the error message with .also { e -> e.message.contains} or similar.", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r537360656", "createdAt": "2020-12-07T09:38:54Z", "author": {"login": "rorbech"}, "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/internal/network/LoggingInterceptorTest.kt", "diffHunk": "@@ -204,22 +205,55 @@ class LoggingInterceptorTest {\n     }\n \n     @Test\n-    fun googleTokenLogin_obfuscation() {\n+    fun googleTokenLogin_authCode_obfuscation() {\n         app = TestApp { builder ->\n             builder.httpLogObfuscator(HttpLogObfuscator(LOGIN_FEATURE, AppConfiguration.loginObfuscators))\n         }\n         testLogger = getLogger()\n         val token = \"google-token\"\n \n         try {\n-            app.login(Credentials.google(token))\n+            app.login(Credentials.google(token, GoogleAuthType.AUTH_CODE))\n         } catch (error: AppException) {\n             Assert.assertEquals(ErrorCode.INVALID_SESSION, error.errorCode)\n         } finally {\n             assertMessageExists(\"\"\"\"authCode\":\"***\"\"\"\")\n         }\n     }\n \n+\n+    @Test\n+    fun googleTokenLogin_idToken_noObfuscation() {\n+        app = TestApp()\n+        testLogger = getLogger()\n+        val token = \"google-token\"\n+\n+        try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84d42dcf5f42f41a32275262dc42de147eef41f4"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NDU4NTUwOnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNzo0Nzo1NVrOICGv9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwODoxMTo1NVrOICHo9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA3ODY0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## 10.1.0 (2020-10-23)\n          \n          \n            \n            ## 10.1.0 (2020-11-23)", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r539078644", "createdAt": "2020-12-09T07:47:55Z", "author": {"login": "rorbech"}, "path": "CHANGELOG.md", "diffHunk": "@@ -46,6 +56,11 @@\n * APIs are backwards compatible with all previous release of realm-java in the 10.x.y series.\n * Realm Studio 10.0.0 or above is required to open Realms created by this version.\n \n+### Internal\n+* Updated to Realm Sync: 10.1.3.\n+* Updated to Realm Core: 10.1.3.\n+* Updated to Object Store commit: fc6daca61133aa9601e4cb34fbeb9ec7569e162e.\n+\n \n ## 10.1.0 (2020-10-23)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65ff78d72e064107a9fb0b397011b107191d4dbb"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA4NTQ1Ng==", "bodyText": "Seems like master hasn't been merged. Shouldn't we do that on a minor release? Don't know how many changes there are though.", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r539085456", "createdAt": "2020-12-09T08:00:43Z", "author": {"login": "rorbech"}, "path": "CHANGELOG.md", "diffHunk": "@@ -46,6 +56,11 @@\n * APIs are backwards compatible with all previous release of realm-java in the 10.x.y series.\n * Realm Studio 10.0.0 or above is required to open Realms created by this version.\n \n+### Internal\n+* Updated to Realm Sync: 10.1.3.\n+* Updated to Realm Core: 10.1.3.\n+* Updated to Object Store commit: fc6daca61133aa9601e4cb34fbeb9ec7569e162e.\n+\n \n ## 10.1.0 (2020-10-23)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA3ODY0NA=="}, "originalCommit": {"oid": "65ff78d72e064107a9fb0b397011b107191d4dbb"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA5MzIzOA==", "bodyText": "I guess this wasn't the release PR, sorry.", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r539093238", "createdAt": "2020-12-09T08:11:55Z", "author": {"login": "rorbech"}, "path": "CHANGELOG.md", "diffHunk": "@@ -46,6 +56,11 @@\n * APIs are backwards compatible with all previous release of realm-java in the 10.x.y series.\n * Realm Studio 10.0.0 or above is required to open Realms created by this version.\n \n+### Internal\n+* Updated to Realm Sync: 10.1.3.\n+* Updated to Realm Core: 10.1.3.\n+* Updated to Object Store commit: fc6daca61133aa9601e4cb34fbeb9ec7569e162e.\n+\n \n ## 10.1.0 (2020-10-23)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA3ODY0NA=="}, "originalCommit": {"oid": "65ff78d72e064107a9fb0b397011b107191d4dbb"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NDU4OTQzOnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNzo0OTowOFrOICGyQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwNzo0OTowOFrOICGyQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA3OTIzMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * [RealmApp] Added `Credentials.google(token: String, authType: GoogleAuthType)`, as MongoDB Realm support multiple ways of logging in Google Accounts.\n          \n          \n            \n            * [RealmApp] Added `Credentials.google(token: String, authType: GoogleAuthType)`, as MongoDB Realm now supports multiple ways of logging into Google Accounts.", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r539079233", "createdAt": "2020-12-09T07:49:08Z", "author": {"login": "rorbech"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,19 +1,29 @@\n-## 10.1.3 (YYYY-MM-DD)\n+## 10.2.0 (2020-12-02)\n+\n+### Deprecated\n+* [RealmApp] `Credentials.google(authenticationCode: String)`. Use `Credentials.google(token: String, authType: GoogleAuthType)` instead.\n \n ### Breaking Changes\n * None.\n \n ### Enhancements\n-* None.\n+* [RealmApp] Added `Credentials.google(token: String, authType: GoogleAuthType)`, as MongoDB Realm support multiple ways of logging in Google Accounts.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65ff78d72e064107a9fb0b397011b107191d4dbb"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NDY0MDI3OnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwODowMjozMFrOICHOhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwOToxNDowNlrOICKKIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA4NjQ3MQ==", "bodyText": "A bit convoluted. Tried to rephrase but failed as I was a bit worried that I changed the meaning. Maybe just re-read to verify.", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r539086471", "createdAt": "2020-12-09T08:02:30Z", "author": {"login": "rorbech"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,19 +1,29 @@\n-## 10.1.3 (YYYY-MM-DD)\n+## 10.2.0 (2020-12-02)\n+\n+### Deprecated\n+* [RealmApp] `Credentials.google(authenticationCode: String)`. Use `Credentials.google(token: String, authType: GoogleAuthType)` instead.\n \n ### Breaking Changes\n * None.\n \n ### Enhancements\n-* None.\n+* [RealmApp] Added `Credentials.google(token: String, authType: GoogleAuthType)`, as MongoDB Realm support multiple ways of logging in Google Accounts.\n \n ### Fixes\n+* [RealmApp] Bug that would prevent eventual consistency during conflict resolution. Affected clients would experience data divergence and potentially consistency errors as a result if they experienced conflict resolution between cycles of Create-Erase-Create for objects with primary keys.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65ff78d72e064107a9fb0b397011b107191d4dbb"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTEyMzQyOA==", "bodyText": "This is a copy from the Sync changelog. I agree it is a bit convoluted, but so was the error, so not sure there is much we can do to rephrase it \ud83e\udd14", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r539123428", "createdAt": "2020-12-09T08:58:37Z", "author": {"login": "cmelchior"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,19 +1,29 @@\n-## 10.1.3 (YYYY-MM-DD)\n+## 10.2.0 (2020-12-02)\n+\n+### Deprecated\n+* [RealmApp] `Credentials.google(authenticationCode: String)`. Use `Credentials.google(token: String, authType: GoogleAuthType)` instead.\n \n ### Breaking Changes\n * None.\n \n ### Enhancements\n-* None.\n+* [RealmApp] Added `Credentials.google(token: String, authType: GoogleAuthType)`, as MongoDB Realm support multiple ways of logging in Google Accounts.\n \n ### Fixes\n+* [RealmApp] Bug that would prevent eventual consistency during conflict resolution. Affected clients would experience data divergence and potentially consistency errors as a result if they experienced conflict resolution between cycles of Create-Erase-Create for objects with primary keys.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA4NjQ3MQ=="}, "originalCommit": {"oid": "65ff78d72e064107a9fb0b397011b107191d4dbb"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTEzNDQ5OA==", "bodyText": "Heh. I didn't even get that this was actually the protocol 2 snippet.", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r539134498", "createdAt": "2020-12-09T09:14:06Z", "author": {"login": "rorbech"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,19 +1,29 @@\n-## 10.1.3 (YYYY-MM-DD)\n+## 10.2.0 (2020-12-02)\n+\n+### Deprecated\n+* [RealmApp] `Credentials.google(authenticationCode: String)`. Use `Credentials.google(token: String, authType: GoogleAuthType)` instead.\n \n ### Breaking Changes\n * None.\n \n ### Enhancements\n-* None.\n+* [RealmApp] Added `Credentials.google(token: String, authType: GoogleAuthType)`, as MongoDB Realm support multiple ways of logging in Google Accounts.\n \n ### Fixes\n+* [RealmApp] Bug that would prevent eventual consistency during conflict resolution. Affected clients would experience data divergence and potentially consistency errors as a result if they experienced conflict resolution between cycles of Create-Erase-Create for objects with primary keys.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA4NjQ3MQ=="}, "originalCommit": {"oid": "65ff78d72e064107a9fb0b397011b107191d4dbb"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NDY0NzU4OnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwODowNDoyMVrOICHSeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwODowNDoyMVrOICHSeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA4NzQ4MQ==", "bodyText": "I guess we should also included the Sync protocol 2 snippet", "url": "https://github.com/realm/realm-java/pull/7225#discussion_r539087481", "createdAt": "2020-12-09T08:04:21Z", "author": {"login": "rorbech"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,19 +1,29 @@\n-## 10.1.3 (YYYY-MM-DD)\n+## 10.2.0 (2020-12-02)\n+\n+### Deprecated\n+* [RealmApp] `Credentials.google(authenticationCode: String)`. Use `Credentials.google(token: String, authType: GoogleAuthType)` instead.\n \n ### Breaking Changes\n * None.\n \n ### Enhancements\n-* None.\n+* [RealmApp] Added `Credentials.google(token: String, authType: GoogleAuthType)`, as MongoDB Realm support multiple ways of logging in Google Accounts.\n \n ### Fixes\n+* [RealmApp] Bug that would prevent eventual consistency during conflict resolution. Affected clients would experience data divergence and potentially consistency errors as a result if they experienced conflict resolution between cycles of Create-Erase-Create for objects with primary keys.\n+* Complementary fix for missed edge case in https://github.com/realm/realm-java/pull/7220 where KAPT crash if we process a RealmObject referencing a type in RealmList defined in another module. (Issue [#7213](https://github.com/realm/realm-java/issues/7213), since v10.0.0).\n * Clean up JNI references to prevent crash from JNI reference table overflow (Issue [#7217](https://github.com/realm/realm-java/issues/7217))\n \n ### Compatibility\n * File format: Generates Realms with format v20. Unsynced Realms will be upgraded from Realm Java 2.0 and later. Synced Realms can only be read and upgraded if created with Realm Java v10.0.0-BETA.1.\n * APIs are backwards compatible with all previous release of realm-java in the 10.x.y series.\n * Realm Studio 10.0.0 or above is required to open Realms created by this version.\n \n+### Internal\n+* Updated to Realm Sync: 10.1.4.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65ff78d72e064107a9fb0b397011b107191d4dbb"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 391, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}