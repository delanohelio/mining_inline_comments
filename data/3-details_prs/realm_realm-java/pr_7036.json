{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4ODc3Njk2", "number": 7036, "title": "Upgrade to latest Build Tools and Gradle", "bodyText": "Closes #6934\nThis should ideally fix the problem with including the firebase dependency. This is checked by adding that to the MongoDB example even though it isn't currently used.\nFindBugs is replaced by SpotBugs in Gradle 6, but the API/Usage is largely the same\nTODO\n\n Align names in dependencies.list (remove _VERSION)\n Re-enable SpotBugs on CI in JenkinksFile\n Check that releasing SNAPSHOTs still work (ojoUpload task)\n JavaDoc seems to be broken\n Add Firebase dependency to MongoDB Realm test project.\n Enable PMD and checkstyle.", "createdAt": "2020-08-17T14:43:48Z", "url": "https://github.com/realm/realm-java/pull/7036", "merged": true, "mergeCommit": {"oid": "4aa94b1cde481d5d42c81ce0bf1ee7a170aa2636"}, "closed": true, "closedAt": "2020-08-25T11:57:15Z", "author": {"login": "cmelchior"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_xKx5AH2gAyNDY4ODc3Njk2OmM3MDgxYTU5ZmFkZGJlMjMwMzJkN2ZkYjVlZTBkMjAwMTczYTk0NjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCTqSQAH2gAyNDY4ODc3Njk2OjE4ZGU0OWQzMWIxNDExNGU5MGQ4ZDJiNTVhYzkzYjQ0YjI4MmFlMTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c7081a59faddbe23032d7fdb5ee0d200173a9460", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/c7081a59faddbe23032d7fdb5ee0d200173a9460", "committedDate": "2020-08-17T12:00:26Z", "message": "Bump all dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1fc3e52c0afaf0194d82bf18160905654d86806", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/e1fc3e52c0afaf0194d82bf18160905654d86806", "committedDate": "2020-08-17T14:50:54Z", "message": "Merge branch 'v10' into cm/upgrade-build-tools-4.0\n\n# Conflicts:\n#\tdependencies.list\n#\trealm/gradle/wrapper/gradle-wrapper.properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64771ca25dcf08888d66acf383993f6749ecba37", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/64771ca25dcf08888d66acf383993f6749ecba37", "committedDate": "2020-08-18T13:48:01Z", "message": "Align names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef53c96dea39a9501b1997a8822fe49359273dd3", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/ef53c96dea39a9501b1997a8822fe49359273dd3", "committedDate": "2020-08-19T13:04:43Z", "message": "Configure spotbugs and enable it on jenkins"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNTc2NTQ1", "url": "https://github.com/realm/realm-java/pull/7036#pullrequestreview-470576545", "createdAt": "2020-08-19T15:30:34Z", "commit": {"oid": "ef53c96dea39a9501b1997a8822fe49359273dd3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNTozMDozNVrOHDM4-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNTozMDozNVrOHDM4-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzExODk2OA==", "bodyText": "There also seem to be spotbugsBase and spotBugsObjectServer. Not 100% sure what Main covers?", "url": "https://github.com/realm/realm-java/pull/7036#discussion_r473118968", "createdAt": "2020-08-19T15:30:35Z", "author": {"login": "cmelchior"}, "path": "Jenkinsfile", "diffHunk": "@@ -183,9 +183,16 @@ def runBuild(abiFilter, instrumentationTestTarget) {\n     },\n     'Static code analysis' : {\n       try {\n-        gradle('realm', \"findbugs ${abiFilter}\") // FIXME Renable pmd and checkstyle\n+        gradle('realm', \"spotbugsMain ${abiFilter}\") // FIXME Renable pmd and checkstyle", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef53c96dea39a9501b1997a8822fe49359273dd3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab8c95a50a7c5e4a28c0e7292045d005a4186afd", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/ab8c95a50a7c5e4a28c0e7292045d005a4186afd", "committedDate": "2020-08-20T08:34:08Z", "message": "merge v10"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9451bae6cd145c5c1233b492e59d0726ea276794", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/9451bae6cd145c5c1233b492e59d0726ea276794", "committedDate": "2020-08-20T08:51:17Z", "message": "Try fix jenkins javadoc build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10fd05b31f89b1b9167f3a3745bf7284a98b9450", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/10fd05b31f89b1b9167f3a3745bf7284a98b9450", "committedDate": "2020-08-20T17:32:36Z", "message": "Fix check task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f41a5b9c33623206856a19ed5d3ccb6564294787", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/f41a5b9c33623206856a19ed5d3ccb6564294787", "committedDate": "2020-08-20T18:44:33Z", "message": "Extract rxjava versioning into dependencies.list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a9f358c2e69496d459dfe099715fe8cc32fb9b4", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/8a9f358c2e69496d459dfe099715fe8cc32fb9b4", "committedDate": "2020-08-20T18:46:50Z", "message": "Bump multidex library"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "447a1728f76f6f8281d53cf170be2f8d9cf0aa81", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/447a1728f76f6f8281d53cf170be2f8d9cf0aa81", "committedDate": "2020-08-20T18:47:28Z", "message": "Remove max gradle workers limit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba0de9e1d6da6e88825425de1640d817bc4eee40", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/ba0de9e1d6da6e88825425de1640d817bc4eee40", "committedDate": "2020-08-20T19:20:04Z", "message": "Fix rxjava version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63a998f6b735d98460123eac72d4b1f230b84284", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/63a998f6b735d98460123eac72d4b1f230b84284", "committedDate": "2020-08-20T19:30:35Z", "message": "Use spotbugs annotations instead of findbugs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74298fb054e23d1c601fd35a4b4a5cf6c24728ef", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/74298fb054e23d1c601fd35a4b4a5cf6c24728ef", "committedDate": "2020-08-21T15:28:03Z", "message": "Merge branch 'v10' into cm/upgrade-build-tools-4.0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMTYwMzkx", "url": "https://github.com/realm/realm-java/pull/7036#pullrequestreview-473160391", "createdAt": "2020-08-24T06:49:49Z", "commit": {"oid": "74298fb054e23d1c601fd35a4b4a5cf6c24728ef"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNjo0OTo0OVrOHFWrIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNzowNToxM1rOHFXEHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM3NjQxOA==", "bodyText": "Not sure how long time it takes, but I guess javadoc could be generated in parallel.", "url": "https://github.com/realm/realm-java/pull/7036#discussion_r475376418", "createdAt": "2020-08-24T06:49:49Z", "author": {"login": "rorbech"}, "path": "Jenkinsfile", "diffHunk": "@@ -175,7 +175,7 @@ try {\n def runBuild(abiFilter, instrumentationTestTarget) {\n \n   stage('Build') {\n-    sh \"chmod +x gradlew && ./gradlew assemble javadoc ${abiFilter} --stacktrace\"\n+    sh \"chmod +x gradlew && ./gradlew assemble ${abiFilter} --stacktrace && ./gradlew javadoc ${abiFilter} --stacktrace\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74298fb054e23d1c601fd35a4b4a5cf6c24728ef"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM3NzA1Ng==", "bodyText": "Might want to strip the version here too, or is gradle to dangerous to use as variable name?", "url": "https://github.com/realm/realm-java/pull/7036#discussion_r475377056", "createdAt": "2020-08-24T06:51:19Z", "author": {"login": "rorbech"}, "path": "dependencies.list", "diffHunk": "@@ -1,21 +1,26 @@\n # Realm Sync release used by Realm Java (This includes Realm Core)\n # https://github.com/realm/realm-sync/releases\n-REALM_SYNC_VERSION=10.0.0-beta.6\n+REALM_SYNC=10.0.0-beta.6\n REALM_SYNC_SHA256=824192a67e7ded59d33707265f78c8d5546b1fef473e9ee5ecff8a5bc9f8506e\n \n # Version of MongoDB Realm used by integration tests\n # See https://github.com/realm/ci/packages/147854 for available versions\n-MONGODB_REALM_SERVER_VERSION=2020-08-17\n+MONGODB_REALM_SERVER=2020-08-17\n \n # Common Android settings across projects\n-GRADLE_BUILD_TOOLS=3.6.1\n+GRADLE_BUILD_TOOLS=4.0.0\n ANDROID_BUILD_TOOLS=29.0.3\n+KOTLIN=1.3.72\n \n # Common classpath dependencies\n-gradleVersion=5.6.4\n+gradleVersion=6.5", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74298fb054e23d1c601fd35a4b4a5cf6c24728ef"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM3ODM4OQ==", "bodyText": "Is this used for anything? Gradle version is given by gradle-wrapper.properties. If this is just for an overview of dependencies, maybe just put a pointer to the file. Alternatively we should maybe verify this version against the executing gradle version.", "url": "https://github.com/realm/realm-java/pull/7036#discussion_r475378389", "createdAt": "2020-08-24T06:54:48Z", "author": {"login": "rorbech"}, "path": "dependencies.list", "diffHunk": "@@ -1,21 +1,26 @@\n # Realm Sync release used by Realm Java (This includes Realm Core)\n # https://github.com/realm/realm-sync/releases\n-REALM_SYNC_VERSION=10.0.0-beta.6\n+REALM_SYNC=10.0.0-beta.6\n REALM_SYNC_SHA256=824192a67e7ded59d33707265f78c8d5546b1fef473e9ee5ecff8a5bc9f8506e\n \n # Version of MongoDB Realm used by integration tests\n # See https://github.com/realm/ci/packages/147854 for available versions\n-MONGODB_REALM_SERVER_VERSION=2020-08-17\n+MONGODB_REALM_SERVER=2020-08-17\n \n # Common Android settings across projects\n-GRADLE_BUILD_TOOLS=3.6.1\n+GRADLE_BUILD_TOOLS=4.0.0\n ANDROID_BUILD_TOOLS=29.0.3\n+KOTLIN=1.3.72\n \n # Common classpath dependencies\n-gradleVersion=5.6.4\n+gradleVersion=6.5", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74298fb054e23d1c601fd35a4b4a5cf6c24728ef"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM4MjgxMw==", "bodyText": "As far as I remember there are some of the types from this library that is actually part of our API (Decoder, CodecRegistry, etc)...at least for the sync flavor, in which case it would be more correct to have this as an api dependency.", "url": "https://github.com/realm/realm-java/pull/7036#discussion_r475382813", "createdAt": "2020-08-24T07:05:13Z", "author": {"login": "rorbech"}, "path": "realm/realm-library/build.gradle", "diffHunk": "@@ -217,22 +218,19 @@ dependencies {\n     api \"io.realm:realm-annotations:${version}\"\n     implementation 'com.google.code.findbugs:jsr305:3.0.2'\n     implementation 'com.getkeepsafe.relinker:relinker:1.4.0'\n-    implementation \"org.mongodb:bson:${properties.getProperty('BSON_DEPENDENCY_VERSION')}\"\n-    implementation('io.reactivex.rxjava2:rxandroid:2.1.1') {\n+    implementation \"org.mongodb:bson:${properties.getProperty('BSON_DEPENDENCY')}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74298fb054e23d1c601fd35a4b4a5cf6c24728ef"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMjAwNjM4", "url": "https://github.com/realm/realm-java/pull/7036#pullrequestreview-473200638", "createdAt": "2020-08-24T07:57:18Z", "commit": {"oid": "74298fb054e23d1c601fd35a4b4a5cf6c24728ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70d3b0ff620db8fb871f1e465600b08e650b9eed", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/70d3b0ff620db8fb871f1e465600b08e650b9eed", "committedDate": "2020-08-24T10:24:21Z", "message": "Parallelize javadoc generation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ca896060e7a1ebe09b54334e7f21e3956eab9e3", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/8ca896060e7a1ebe09b54334e7f21e3956eab9e3", "committedDate": "2020-08-24T10:47:09Z", "message": "Improve gradle upgrade"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa096e4155c02875021170df3a5de81d267b9530", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/fa096e4155c02875021170df3a5de81d267b9530", "committedDate": "2020-08-24T11:05:40Z", "message": "Set bson library as API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99ae6e1a090729166a88804f86b0383b8cb4a2f5", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/99ae6e1a090729166a88804f86b0383b8cb4a2f5", "committedDate": "2020-08-24T11:32:33Z", "message": "Reenable PMD and check style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f3f9805664b4cc21bffcc6147eee4d593d03bbf", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/4f3f9805664b4cc21bffcc6147eee4d593d03bbf", "committedDate": "2020-08-24T12:29:56Z", "message": "Add pmd command in Jenkins static code analysis step"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee3b93560f2b71d580d367b1552d82d327c17c68", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/ee3b93560f2b71d580d367b1552d82d327c17c68", "committedDate": "2020-08-24T13:17:38Z", "message": "Enable checkstyle step"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "622057711f42b83f2efb363d45172e5809a4106f", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/622057711f42b83f2efb363d45172e5809a4106f", "committedDate": "2020-08-24T13:55:58Z", "message": "Clean up checkstyle rules\nSuppress VisibilityModifier rule"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNTI2NzIz", "url": "https://github.com/realm/realm-java/pull/7036#pullrequestreview-473526723", "createdAt": "2020-08-24T14:10:48Z", "commit": {"oid": "622057711f42b83f2efb363d45172e5809a4106f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bab52ca1b6cbde5c70d5a3b0a1b06a0bbc3e034c", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/bab52ca1b6cbde5c70d5a3b0a1b06a0bbc3e034c", "committedDate": "2020-08-25T09:14:10Z", "message": "Merge branch 'v10' into cm/upgrade-build-tools-4.0\n\n# Conflicts:\n#\tdependencies.list\n#\trealm/realm-library/src/objectServer/java/io/realm/internal/network/OkHttpNetworkTransport.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18de49d31b14114e90d8d2b55ac93b44b282ae15", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/18de49d31b14114e90d8d2b55ac93b44b282ae15", "committedDate": "2020-08-25T09:19:28Z", "message": "Bump objectstore reference"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2317, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}