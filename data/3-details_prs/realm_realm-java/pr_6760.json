{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwODkyNjQx", "number": 6760, "title": "Upgrade to Sync 10.0.0-alpha.1. Disable all Sync builds", "bodyText": "This upgrade to latest Core + Sync relase, but due to a bug in the Sync release it doesn't work. So all Sync builds have been disabled.\nMerging this PR should unblock embedded objects (#6730) and the new datatypes though (#6721)\nNote there are also a few changes to how AccessTokens are exposed. This is a temporary solution that will be fixed in the RealmApp PR (#6757 )", "createdAt": "2020-02-27T14:56:39Z", "url": "https://github.com/realm/realm-java/pull/6760", "merged": true, "mergeCommit": {"oid": "9cb7b8617a61717fd557a016ce371cbff9b4134a"}, "closed": true, "closedAt": "2020-02-28T14:08:55Z", "author": {"login": "cmelchior"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIccp5gH2gAyMzgwODkyNjQxOmI0MjRlNGNlMjcxOGRlNTE5YmY5ZWMzYmI3ODdiMjY5MDNjOGY1Yzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIwepwAFqTM2NjQxOTU2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b424e4ce2718de519bf9ec3bb787b26903c8f5c8", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/b424e4ce2718de519bf9ec3bb787b26903c8f5c8", "committedDate": "2020-02-27T14:46:07Z", "message": "Upgrade to Sync 10.0.0-alpha.1. Disable all Sync builds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ffac1e258e4e76d2a3000c0bbdcdc917bcd0d9e", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/4ffac1e258e4e76d2a3000c0bbdcdc917bcd0d9e", "committedDate": "2020-02-27T15:20:56Z", "message": "Disable objectServer example"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "446789a838036b2dc61b141ebf6ddc7031e8bab8", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/446789a838036b2dc61b141ebf6ddc7031e8bab8", "committedDate": "2020-02-27T16:07:32Z", "message": "Disable more examples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb6e5c37693bb512f1fbb6f2cdee7a1c5c0b18fc", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/fb6e5c37693bb512f1fbb6f2cdee7a1c5c0b18fc", "committedDate": "2020-02-27T16:50:31Z", "message": "Annotation processor unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5467b15bd2009425e96589e77818dd88f1ca8eec", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/5467b15bd2009425e96589e77818dd88f1ca8eec", "committedDate": "2020-02-28T08:36:55Z", "message": "Fix more tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d186a41222d7c8ac7aa970b60a6f78e4a0cd593b", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/d186a41222d7c8ac7aa970b60a6f78e4a0cd593b", "committedDate": "2020-02-28T08:43:30Z", "message": "Disable broken unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20bdea97f36c606ac0822179a07db0bdce9d1bab", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/20bdea97f36c606ac0822179a07db0bdce9d1bab", "committedDate": "2020-02-28T09:54:36Z", "message": "Fix more tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2Mjc5Nzkx", "url": "https://github.com/realm/realm-java/pull/6760#pullrequestreview-366279791", "createdAt": "2020-02-28T09:59:47Z", "commit": {"oid": "20bdea97f36c606ac0822179a07db0bdce9d1bab"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwOTo1OTo0N1rOFvvdMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMDoxOTozOVrOFvwCyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYwNDkxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // String, short, int, long and must only be present one time.\n          \n          \n            \n                // String, short, int and long must only be present one time.", "url": "https://github.com/realm/realm-java/pull/6760#discussion_r385604914", "createdAt": "2020-02-28T09:59:47Z", "author": {"login": "nhachicha"}, "path": "realm/realm-annotations-processor/src/main/java/io/realm/processor/ClassMetaData.kt", "diffHunk": "@@ -698,7 +698,9 @@ class ClassMetaData(env: ProcessingEnvironment, typeMirrors: TypeMirrors, privat\n     }\n \n     // The field has the @PrimaryKey annotation. It is only valid for\n-    // String, short, int, long and must only be present one time\n+    // String, short, int, long and must only be present one time.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20bdea97f36c606ac0822179a07db0bdce9d1bab"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYwNTEwNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // From Core 6 primary keys are not indexed pr default anymore as\n          \n          \n            \n                // From Core 6 primary keys are not indexed by default anymore as", "url": "https://github.com/realm/realm-java/pull/6760#discussion_r385605107", "createdAt": "2020-02-28T10:00:13Z", "author": {"login": "nhachicha"}, "path": "realm/realm-annotations-processor/src/main/java/io/realm/processor/ClassMetaData.kt", "diffHunk": "@@ -698,7 +698,9 @@ class ClassMetaData(env: ProcessingEnvironment, typeMirrors: TypeMirrors, privat\n     }\n \n     // The field has the @PrimaryKey annotation. It is only valid for\n-    // String, short, int, long and must only be present one time\n+    // String, short, int, long and must only be present one time.\n+    // From Core 6 primary keys are not indexed pr default anymore as", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20bdea97f36c606ac0822179a07db0bdce9d1bab"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYwODg3Nw==", "bodyText": "Actually in Core 6 String primary keys don\u2019t need an Index, and in Core 10 none of the primary keys do", "url": "https://github.com/realm/realm-java/pull/6760#discussion_r385608877", "createdAt": "2020-02-28T10:07:36Z", "author": {"login": "nhachicha"}, "path": "realm/realm-annotations-processor/src/main/java/io/realm/processor/ClassMetaData.kt", "diffHunk": "@@ -698,7 +698,9 @@ class ClassMetaData(env: ProcessingEnvironment, typeMirrors: TypeMirrors, privat\n     }\n \n     // The field has the @PrimaryKey annotation. It is only valid for\n-    // String, short, int, long and must only be present one time\n+    // String, short, int, long and must only be present one time.\n+    // From Core 6 primary keys are not indexed pr default anymore as", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYwNTEwNw=="}, "originalCommit": {"oid": "20bdea97f36c606ac0822179a07db0bdce9d1bab"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxMjQwNQ==", "bodyText": "we're passing twice the refresh token as a parameter? \u2639\ufe0f  shouldn't the second parameter be the access_token?", "url": "https://github.com/realm/realm-java/pull/6760#discussion_r385612405", "createdAt": "2020-02-28T10:14:58Z", "author": {"login": "nhachicha"}, "path": "realm/realm-library/src/main/cpp/io_realm_RealmFileUserStore.cpp", "diffHunk": "@@ -68,12 +68,13 @@ JNIEXPORT jstring JNICALL Java_io_realm_RealmFileUserStore_nativeGetUser(JNIEnv*\n }\n \n JNIEXPORT void JNICALL Java_io_realm_RealmFileUserStore_nativeUpdateOrCreateUser(JNIEnv* env, jclass,\n-                                                                                 jstring j_user_id, jstring json_token,\n+                                                                                 jstring j_user_id,\n+                                                                                 jstring j_refresh_json_token,\n                                                                                  jstring j_auth_url)\n {\n     try {\n-        JStringAccessor user_json_token(env, json_token); // throws\n-        SyncManager::shared().get_user(create_sync_user_identifier(env, j_user_id, j_auth_url), user_json_token);\n+        JStringAccessor refresh_json_token(env, j_refresh_json_token); // throws\n+        SyncManager::shared().get_user(create_sync_user_identifier(env, j_user_id, j_auth_url), refresh_json_token, refresh_json_token);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20bdea97f36c606ac0822179a07db0bdce9d1bab"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYxNDUzOQ==", "bodyText": "what happens if the access_token is expired?", "url": "https://github.com/realm/realm-java/pull/6760#discussion_r385614539", "createdAt": "2020-02-28T10:19:39Z", "author": {"login": "nhachicha"}, "path": "realm/realm-library/src/main/cpp/io_realm_internal_OsRealmConfig.cpp", "diffHunk": "@@ -346,7 +346,8 @@ JNIEXPORT jstring JNICALL Java_io_realm_internal_OsRealmConfig_nativeCreateAndSe\n         if (!user) {\n             JStringAccessor realm_auth_url(env, j_auth_url);\n             JStringAccessor refresh_token(env, j_refresh_token);\n-            user = SyncManager::shared().get_user(sync_user_identifier, refresh_token);\n+            JStringAccessor access_token(env, j_access_token);\n+            user = SyncManager::shared().get_user(sync_user_identifier, refresh_token, access_token);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20bdea97f36c606ac0822179a07db0bdce9d1bab"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c83b8e093a1d3cb6b59ba037e38f27ecd8f2a71", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/2c83b8e093a1d3cb6b59ba037e38f27ecd8f2a71", "committedDate": "2020-02-28T11:23:31Z", "message": "Javadoc fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NDE5NTY3", "url": "https://github.com/realm/realm-java/pull/6760#pullrequestreview-366419567", "createdAt": "2020-02-28T14:06:25Z", "commit": {"oid": "2c83b8e093a1d3cb6b59ba037e38f27ecd8f2a71"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2436, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}