{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4NzA5MzIy", "number": 7035, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwOTo0MDo1OVrOEY-QGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwOTo0MDo1OVrOEY-QGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NjIxMjExOnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/admin/ServerAdmin.kt", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwOTo0MDo1OVrOHBhp5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwOTo1Mjo1OVrOHBiC9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM2MjAyMg==", "bodyText": "Interesting and good catch \ud83c\udf89 . I wonder why it even worked in the first place before? And why it was only flaky?", "url": "https://github.com/realm/realm-java/pull/7035#discussion_r471362022", "createdAt": "2020-08-17T09:40:59Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/admin/ServerAdmin.kt", "diffHunk": "@@ -80,10 +81,18 @@ class ServerAdmin {\n         result = JSONObject(executeRequest(builder))\n         groupId = (result.getJSONArray(\"roles\")[0] as JSONObject).getString(\"group_id\")\n \n-        // Get Internal App Id\n+        // Get Internal App Id of the requested app\n+        val appId = this.app.configuration.appId\n         builder = Request.Builder().url(\"$baseUrl/groups/$groupId/apps\").get()\n-        result = JSONArray(executeRequest(builder))[0] as JSONObject\n-        appId = result.getString(\"_id\")\n+        val response = JSONArray(executeRequest(builder))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd67e9ec71f8b0b480f0878d71c04b88403f7d41"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM2MzQ3MA==", "bodyText": "Because with two apps the first one is sometimes the right one \ud83d\ude04 Maybe they are sorted by generated ids o.a.", "url": "https://github.com/realm/realm-java/pull/7035#discussion_r471363470", "createdAt": "2020-08-17T09:43:43Z", "author": {"login": "rorbech"}, "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/admin/ServerAdmin.kt", "diffHunk": "@@ -80,10 +81,18 @@ class ServerAdmin {\n         result = JSONObject(executeRequest(builder))\n         groupId = (result.getJSONArray(\"roles\")[0] as JSONObject).getString(\"group_id\")\n \n-        // Get Internal App Id\n+        // Get Internal App Id of the requested app\n+        val appId = this.app.configuration.appId\n         builder = Request.Builder().url(\"$baseUrl/groups/$groupId/apps\").get()\n-        result = JSONArray(executeRequest(builder))[0] as JSONObject\n-        appId = result.getString(\"_id\")\n+        val response = JSONArray(executeRequest(builder))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM2MjAyMg=="}, "originalCommit": {"oid": "bd67e9ec71f8b0b480f0878d71c04b88403f7d41"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM2NTA0NA==", "bodyText": "Doh, ofcourse \ud83d\udc4d", "url": "https://github.com/realm/realm-java/pull/7035#discussion_r471365044", "createdAt": "2020-08-17T09:46:43Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/admin/ServerAdmin.kt", "diffHunk": "@@ -80,10 +81,18 @@ class ServerAdmin {\n         result = JSONObject(executeRequest(builder))\n         groupId = (result.getJSONArray(\"roles\")[0] as JSONObject).getString(\"group_id\")\n \n-        // Get Internal App Id\n+        // Get Internal App Id of the requested app\n+        val appId = this.app.configuration.appId\n         builder = Request.Builder().url(\"$baseUrl/groups/$groupId/apps\").get()\n-        result = JSONArray(executeRequest(builder))[0] as JSONObject\n-        appId = result.getString(\"_id\")\n+        val response = JSONArray(executeRequest(builder))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM2MjAyMg=="}, "originalCommit": {"oid": "bd67e9ec71f8b0b480f0878d71c04b88403f7d41"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM2NjE1Ng==", "bodyText": "The tricky parts is why it was almost only happening on CI?", "url": "https://github.com/realm/realm-java/pull/7035#discussion_r471366156", "createdAt": "2020-08-17T09:48:53Z", "author": {"login": "rorbech"}, "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/admin/ServerAdmin.kt", "diffHunk": "@@ -80,10 +81,18 @@ class ServerAdmin {\n         result = JSONObject(executeRequest(builder))\n         groupId = (result.getJSONArray(\"roles\")[0] as JSONObject).getString(\"group_id\")\n \n-        // Get Internal App Id\n+        // Get Internal App Id of the requested app\n+        val appId = this.app.configuration.appId\n         builder = Request.Builder().url(\"$baseUrl/groups/$groupId/apps\").get()\n-        result = JSONArray(executeRequest(builder))[0] as JSONObject\n-        appId = result.getString(\"_id\")\n+        val response = JSONArray(executeRequest(builder))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM2MjAyMg=="}, "originalCommit": {"oid": "bd67e9ec71f8b0b480f0878d71c04b88403f7d41"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM2ODQzOQ==", "bodyText": "Yup, I guess it is a timing issue that just surfaces there. Also, we would need to understand what the server uses for sorting when returning those apps. Maybe it is just based on how the data is stored in MongoDB instead of a specific sorting.", "url": "https://github.com/realm/realm-java/pull/7035#discussion_r471368439", "createdAt": "2020-08-17T09:52:59Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/admin/ServerAdmin.kt", "diffHunk": "@@ -80,10 +81,18 @@ class ServerAdmin {\n         result = JSONObject(executeRequest(builder))\n         groupId = (result.getJSONArray(\"roles\")[0] as JSONObject).getString(\"group_id\")\n \n-        // Get Internal App Id\n+        // Get Internal App Id of the requested app\n+        val appId = this.app.configuration.appId\n         builder = Request.Builder().url(\"$baseUrl/groups/$groupId/apps\").get()\n-        result = JSONArray(executeRequest(builder))[0] as JSONObject\n-        appId = result.getString(\"_id\")\n+        val response = JSONArray(executeRequest(builder))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM2MjAyMg=="}, "originalCommit": {"oid": "bd67e9ec71f8b0b480f0878d71c04b88403f7d41"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 479, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}