{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3ODM5MTQy", "number": 7146, "title": "RJAVA-564: Use monorepo", "bodyText": "", "createdAt": "2020-10-05T13:04:18Z", "url": "https://github.com/realm/realm-java/pull/7146", "merged": true, "mergeCommit": {"oid": "65130524043b17acdf0aabaa3c36d0361c2c96fb"}, "closed": true, "closedAt": "2020-11-09T12:08:07Z", "author": {"login": "fealebenpae"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPjbXYAH2gAyNDk3ODM5MTQyOjY2ZjFkYmQ2MmMzNjVlZTM4MWEzNTdmMWVhMmM2YTY3ZjJiMzI1NDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdayal_AH2gAyNDk3ODM5MTQyOjQ1NzM1ZDUwMmYyOTg1NDI4YTVlMWMwYzBjYWZkZjkwM2ZhYTE3MzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "66f1dbd62c365ee381a357f1ea2c6a67f2b32542", "author": {"user": {"login": "fealebenpae", "name": "Yavor Georgiev"}}, "url": "https://github.com/realm/realm-java/commit/66f1dbd62c365ee381a357f1ea2c6a67f2b32542", "committedDate": "2020-10-05T13:02:40Z", "message": "Use monorepo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df6d9aa67453c0457e59d99bcee7207a9fda9ad9", "author": {"user": {"login": "fealebenpae", "name": "Yavor Georgiev"}}, "url": "https://github.com/realm/realm-java/commit/df6d9aa67453c0457e59d99bcee7207a9fda9ad9", "committedDate": "2020-10-05T13:17:01Z", "message": "Use newer CMake"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "526ca4d878646aa94255d236a5cceea423f2629a", "author": {"user": {"login": "fealebenpae", "name": "Yavor Georgiev"}}, "url": "https://github.com/realm/realm-java/commit/526ca4d878646aa94255d236a5cceea423f2629a", "committedDate": "2020-10-08T10:15:39Z", "message": "use latest monorepo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cbf1222328fd3ebbdee71dfe85289fa4ee57829", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/1cbf1222328fd3ebbdee71dfe85289fa4ee57829", "committedDate": "2020-10-08T12:37:35Z", "message": "Point to right cmake version\nJenkins to use right cmake version\nFix imports and executables linking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4051a96d541a259657b1711fea4787881713cfa7", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/4051a96d541a259657b1711fea4787881713cfa7", "committedDate": "2020-10-08T12:40:25Z", "message": "Fix cmake url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "500a052e926ee17119d12adca1a6a9dd43bf7570", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/500a052e926ee17119d12adca1a6a9dd43bf7570", "committedDate": "2020-10-08T12:51:01Z", "message": "Add ninja-build package to docker image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea9d79a2f51885723507e1ded6ddbf8660ae1555", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/ea9d79a2f51885723507e1ded6ddbf8660ae1555", "committedDate": "2020-10-08T15:02:32Z", "message": "Add new cmake instructions to readme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c82847e3c4f51e01da745442892f897db25edfb6", "author": {"user": {"login": "fealebenpae", "name": "Yavor Georgiev"}}, "url": "https://github.com/realm/realm-java/commit/c82847e3c4f51e01da745442892f897db25edfb6", "committedDate": "2020-10-12T19:47:27Z", "message": "don\u2019t worry about realm-core\u2019s command-line targets"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNTYxNDI1", "url": "https://github.com/realm/realm-java/pull/7146#pullrequestreview-511561425", "createdAt": "2020-10-19T09:12:44Z", "commit": {"oid": "c82847e3c4f51e01da745442892f897db25edfb6"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwOToxMjo0NFrOHkFBXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwOToxMjo0NFrOHkFBXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU5MzA1Mw==", "bodyText": "@fealebenpae Any idea about a timeline when these are available?", "url": "https://github.com/realm/realm-java/pull/7146#discussion_r507593053", "createdAt": "2020-10-19T09:12:44Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/main/cpp/CMakeLists.txt", "diffHunk": "@@ -131,32 +130,19 @@ create_javah(TARGET jni_headers\n     DEPENDS ${classes_PATH}\n )\n \n-include(RealmCore)\n-use_realm_core(${build_SYNC} \"${REALM_CORE_DIST_DIR}\" \"${CORE_SOURCE_PATH}\")\n-\n-# Download OpenSSL lib\n-# FIXME Read the openssl version from core when the core/sync release has that information.\n-set(openssl_VERSION \"1.1.1b\")\n-set(openssl_FILENAME \"openssl.tgz\")\n-set(openssl_URL \"https://static.realm.io/downloads/openssl/${openssl_VERSION}/Android/${ANDROID_ABI}/${openssl_FILENAME}\")\n-\n-message(STATUS \"Downloading OpenSSL...\")\n-file(DOWNLOAD \"${openssl_URL}\" \"${PROJECT_BINARY_DIR}/${openssl_FILENAME}\")\n-\n-message(STATUS \"Uncompressing OpenSSL: ${PROJECT_BINARY_DIR}/${openssl_FILENAME}\")\n-execute_process(COMMAND ${CMAKE_COMMAND} -E tar xfz \"${openssl_FILENAME}\" WORKING_DIRECTORY \"${PROJECT_BINARY_DIR}\")\n-message(STATUS \"Importing OpenSSL...\")\n-include(${PROJECT_BINARY_DIR}/lib/cmake/OpenSSL/OpenSSLConfig.cmake)\n-get_target_property(openssl_include_DIR OpenSSL::Crypto INTERFACE_INCLUDE_DIRECTORIES)\n-get_target_property(crypto_LIB OpenSSL::Crypto IMPORTED_LOCATION)\n-get_target_property(ssl_LIB OpenSSL::SSL IMPORTED_LOCATION)\n+option(REALM_JAVA_BUILD_CORE_FROM_SOURCE \"Build Realm Core from source, as opposed to downloading prebuilt binaries\" ON)\n+if(REALM_JAVA_BUILD_CORE_FROM_SOURCE)\n+    set(REALM_BUILD_LIB_ONLY ON)\n+    add_subdirectory(realm-core)\n+else()\n+    message(FATAL_ERROR \"TODO: Implement downloading monorepo release artifacts\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c82847e3c4f51e01da745442892f897db25edfb6"}, "originalPosition": 71}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3521d39fc3a25a0adc11e33a35a7789fe7ab4b35", "author": {"user": {"login": "fealebenpae", "name": "Yavor Georgiev"}}, "url": "https://github.com/realm/realm-java/commit/3521d39fc3a25a0adc11e33a35a7789fe7ab4b35", "committedDate": "2020-10-19T13:03:23Z", "message": "use latest monorepo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "894f9d7e7b7a007d37d6aa36e29fcd300d7f6941", "author": {"user": {"login": "fealebenpae", "name": "Yavor Georgiev"}}, "url": "https://github.com/realm/realm-java/commit/894f9d7e7b7a007d37d6aa36e29fcd300d7f6941", "committedDate": "2020-10-19T14:04:39Z", "message": "Merge remote-tracking branch 'origin/master' into yg/monorepo-submodule\n\n# Conflicts:\n#\trealm/realm-library/src/main/cpp/object-store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2b36c0665b27b7a546e20877f88b92a9394ce6c", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/d2b36c0665b27b7a546e20877f88b92a9394ce6c", "committedDate": "2020-10-19T14:50:15Z", "message": "Add support for LTO. It is enabled by default for release builds, but can be opted out of."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cc6fe7983735cbb9a92425fd9fae982f5dd0f6a", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/2cc6fe7983735cbb9a92425fd9fae982f5dd0f6a", "committedDate": "2020-10-19T14:50:22Z", "message": "Merge branch 'yg/monorepo-submodule' of https://github.com/realm/realm-java into yg/monorepo-submodule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bb4771e159d1b4c21ded020a37c123e55b471de", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/8bb4771e159d1b4c21ded020a37c123e55b471de", "committedDate": "2020-10-19T14:53:10Z", "message": "Rename abiFilter to indicate it support multiple flags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0af4cea4efd0b2d3ac2122ae3f3559c225f481f", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/f0af4cea4efd0b2d3ac2122ae3f3559c225f481f", "committedDate": "2020-10-21T13:52:09Z", "message": "Set an optimization level, it is required when enabling LTO."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd14172c23ff3f7780f336d69bdc44d85347740e", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/bd14172c23ff3f7780f336d69bdc44d85347740e", "committedDate": "2020-10-21T13:54:03Z", "message": "Bump core commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "059fa64a0fd9118180ffc85e9249c20126ec58ae", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/059fa64a0fd9118180ffc85e9249c20126ec58ae", "committedDate": "2020-11-02T11:28:26Z", "message": "Bump monorepo core version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8399695b7f3d336daa62a4024fde2706e6f5d7f5", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/8399695b7f3d336daa62a4024fde2706e6f5d7f5", "committedDate": "2020-11-06T13:54:41Z", "message": "Merge branch 'support-new-datatypes' into yg/monorepo-submodule\n\n# Conflicts:\n#\trealm/realm-library/src/main/cpp/io_realm_internal_objectstore_OsMongoClient.cpp\n#\trealm/realm-library/src/main/cpp/io_realm_internal_objectstore_OsMongoCollection.cpp\n#\trealm/realm-library/src/main/cpp/io_realm_internal_objectstore_OsMongoDatabase.cpp\n#\trealm/realm-library/src/main/cpp/io_realm_internal_objectstore_OsWatchStream.cpp\n#\trealm/realm-library/src/main/cpp/io_realm_mongodb_mongo_iterable_AggregateIterable.cpp\n#\trealm/realm-library/src/main/cpp/io_realm_mongodb_mongo_iterable_FindIterable.cpp\n#\trealm/realm-library/src/main/cpp/object-store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f22b545199b82c61234a5d9b39c288f4fe0f66a7", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/f22b545199b82c61234a5d9b39c288f4fe0f66a7", "committedDate": "2020-11-06T20:24:26Z", "message": "rollback mongodb realm server version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b735438dd06a9efb5afdae57d974f15aaa633289", "author": {"user": {"login": "clementetb", "name": null}}, "url": "https://github.com/realm/realm-java/commit/b735438dd06a9efb5afdae57d974f15aaa633289", "committedDate": "2020-11-09T09:08:48Z", "message": "Fix checkstyle step in Jenkins file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45735d502f2985428a5e1c0c0cafdf903faa1736", "author": {"user": {"login": "fealebenpae", "name": "Yavor Georgiev"}}, "url": "https://github.com/realm/realm-java/commit/45735d502f2985428a5e1c0c0cafdf903faa1736", "committedDate": "2020-11-09T10:43:34Z", "message": "remove the gradle logic to download core\n\nthis should be moved to CMake"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2392, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}