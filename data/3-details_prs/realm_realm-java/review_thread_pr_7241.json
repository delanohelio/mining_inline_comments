{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MzQ3OTc3", "number": 7241, "reviewThreads": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTowODo1M1rOFDhpFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxNTowODozMlrOFMjVfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MjQxMjM2OnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/main/cpp/CMakeLists.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTowODo1M1rOIDN7vA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTowODo1M1rOIDN7vA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI0NDkyNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                add_subdirectory(realm-core)\n          \n          \n            \n                add_subdirectory(realm-core EXCLUDE_FROM_ALL)\n          \n      \n    \n    \n  \n\nThis is something I should have suggested sooner - this option causes any targets defined in realm-core to not be included in the default ALL target generated by CMake. Only targets explicitly referenced (like Realm::Storage, Realm::Sync, and Realm::ObjectStore) will be built.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r540244924", "createdAt": "2020-12-10T15:08:53Z", "author": {"login": "fealebenpae"}, "path": "realm/realm-library/src/main/cpp/CMakeLists.txt", "diffHunk": "@@ -130,12 +131,43 @@ create_javah(TARGET jni_headers\n     DEPENDS ${classes_PATH}\n )\n \n-option(REALM_JAVA_BUILD_CORE_FROM_SOURCE \"Build Realm Core from source, as opposed to downloading prebuilt binaries\" ON)\n-if(REALM_JAVA_BUILD_CORE_FROM_SOURCE)\n+# Check if user defined download location\n+if(NOT DEFINED ENV{REALM_CORE_DOWNLOAD_DIR})\n+    set(REALM_CORE_DOWNLOAD_DIR ${CMAKE_BINARY_DIR})\n+else()\n+    set(REALM_CORE_DOWNLOAD_DIR $ENV{REALM_CORE_DOWNLOAD_DIR})\n+endif()\n+\n+if(REALM_JAVA_BUILD_CORE_FROM_SOURCE OR NOT REALM_ENABLE_SYNC)\n+    message(STATUS \"Building Realm Core from source...\")\n+\n     set(REALM_BUILD_LIB_ONLY ON)\n     add_subdirectory(realm-core)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87664eb1b9fff36950c7885bd5d0acaed971200b"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MjQxMzc5OnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/main/cpp/CMakeLists.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTowOTowOFrOIDN8jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTowOTowOFrOIDN8jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI0NTEzNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                message(STATUS \"Using prebuild Realm Core.\")\n          \n          \n            \n                message(STATUS \"Using prebuilt Realm Core.\")\n          \n      \n    \n    \n  \n\ntypo", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r540245134", "createdAt": "2020-12-10T15:09:08Z", "author": {"login": "fealebenpae"}, "path": "realm/realm-library/src/main/cpp/CMakeLists.txt", "diffHunk": "@@ -130,12 +131,43 @@ create_javah(TARGET jni_headers\n     DEPENDS ${classes_PATH}\n )\n \n-option(REALM_JAVA_BUILD_CORE_FROM_SOURCE \"Build Realm Core from source, as opposed to downloading prebuilt binaries\" ON)\n-if(REALM_JAVA_BUILD_CORE_FROM_SOURCE)\n+# Check if user defined download location\n+if(NOT DEFINED ENV{REALM_CORE_DOWNLOAD_DIR})\n+    set(REALM_CORE_DOWNLOAD_DIR ${CMAKE_BINARY_DIR})\n+else()\n+    set(REALM_CORE_DOWNLOAD_DIR $ENV{REALM_CORE_DOWNLOAD_DIR})\n+endif()\n+\n+if(REALM_JAVA_BUILD_CORE_FROM_SOURCE OR NOT REALM_ENABLE_SYNC)\n+    message(STATUS \"Building Realm Core from source...\")\n+\n     set(REALM_BUILD_LIB_ONLY ON)\n     add_subdirectory(realm-core)\n else()\n-    message(FATAL_ERROR \"TODO: Implement downloading monorepo release artifacts\")\n+    message(STATUS \"Using prebuild Realm Core.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87664eb1b9fff36950c7885bd5d0acaed971200b"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MjQxNzg5OnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/main/cpp/CMakeLists.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTowOTo1MFrOIDN-0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTowOTo1MFrOIDN-0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI0NTcxMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    file(DOWNLOAD \"http://static.realm.io/downloads/core/${core_filename}.tar.gz\" \"${REALM_CORE_DOWNLOAD_DIR}/${core_filename}.tar.gz\")\n          \n          \n            \n                    file(DOWNLOAD \"https://static.realm.io/downloads/core/${core_filename}.tar.gz\" \"${REALM_CORE_DOWNLOAD_DIR}/${core_filename}.tar.gz\")\n          \n      \n    \n    \n  \n\nLet's try HTTPS.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r540245712", "createdAt": "2020-12-10T15:09:50Z", "author": {"login": "fealebenpae"}, "path": "realm/realm-library/src/main/cpp/CMakeLists.txt", "diffHunk": "@@ -130,12 +131,43 @@ create_javah(TARGET jni_headers\n     DEPENDS ${classes_PATH}\n )\n \n-option(REALM_JAVA_BUILD_CORE_FROM_SOURCE \"Build Realm Core from source, as opposed to downloading prebuilt binaries\" ON)\n-if(REALM_JAVA_BUILD_CORE_FROM_SOURCE)\n+# Check if user defined download location\n+if(NOT DEFINED ENV{REALM_CORE_DOWNLOAD_DIR})\n+    set(REALM_CORE_DOWNLOAD_DIR ${CMAKE_BINARY_DIR})\n+else()\n+    set(REALM_CORE_DOWNLOAD_DIR $ENV{REALM_CORE_DOWNLOAD_DIR})\n+endif()\n+\n+if(REALM_JAVA_BUILD_CORE_FROM_SOURCE OR NOT REALM_ENABLE_SYNC)\n+    message(STATUS \"Building Realm Core from source...\")\n+\n     set(REALM_BUILD_LIB_ONLY ON)\n     add_subdirectory(realm-core)\n else()\n-    message(FATAL_ERROR \"TODO: Implement downloading monorepo release artifacts\")\n+    message(STATUS \"Using prebuild Realm Core.\")\n+\n+    # CMAKE_INTERPROCEDURAL_OPTIMIZATION is not compatible with binary artifacts.\n+    set(CMAKE_INTERPROCEDURAL_OPTIMIZATION OFF)\n+\n+    execute_process(COMMAND \"${CMAKE_COMMAND}\" \"-E\" \"environment\")\n+    set(core_filename \"realm-${CMAKE_BUILD_TYPE}-v${DEP_REALM_CORE}-Android-${CMAKE_ANDROID_ARCH_ABI}-devel\")\n+\n+    # Use cached resources if possible\n+    if(NOT EXISTS \"${REALM_CORE_DOWNLOAD_DIR}/${core_filename}.tar.gz\")\n+        message(STATUS \"Downloading ${core_filename}...\")\n+        file(DOWNLOAD \"http://static.realm.io/downloads/core/${core_filename}.tar.gz\" \"${REALM_CORE_DOWNLOAD_DIR}/${core_filename}.tar.gz\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87664eb1b9fff36950c7885bd5d0acaed971200b"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxOTMzNjk2OnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/androidTest/java/io/realm/ManagedOrderedRealmCollectionTests.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozMToyM1rOIG784w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwOTowMDo0N1rOIHrQHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE0NDYxMQ==", "bodyText": "Is this still a problem? At least the comments in the issue seems to indicate it has been fixed?\nIf it hasn't been fixed, how critical is it?", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r544144611", "createdAt": "2020-12-16T09:31:23Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTest/java/io/realm/ManagedOrderedRealmCollectionTests.java", "diffHunk": "@@ -113,6 +114,7 @@\n  */\n \n @RunWith(Parameterized.class)\n+@Ignore(\"Tests crash due to bug in core, see https://jira.mongodb.org/browse/RCORE-435\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9c7ea21b41796fc9349fac8f85e9c23fe69b49d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDMzNzk3Mg==", "bodyText": "It has been fixed but hasn't been released yet. It is on the core develop branch.\nThe issue crashes the test process, and it would crash any app. We shouldn't release without fixing the issue.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r544337972", "createdAt": "2020-12-16T14:23:49Z", "author": {"login": "clementetb"}, "path": "realm/realm-library/src/androidTest/java/io/realm/ManagedOrderedRealmCollectionTests.java", "diffHunk": "@@ -113,6 +114,7 @@\n  */\n \n @RunWith(Parameterized.class)\n+@Ignore(\"Tests crash due to bug in core, see https://jira.mongodb.org/browse/RCORE-435\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE0NDYxMQ=="}, "originalCommit": {"oid": "e9c7ea21b41796fc9349fac8f85e9c23fe69b49d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDkxOTU4Mg==", "bodyText": "Okay, in that case, I would put this PR on hold until we can get a fix from Core. But otherwise I would say this PR is ready to be merge.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r544919582", "createdAt": "2020-12-17T09:00:47Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTest/java/io/realm/ManagedOrderedRealmCollectionTests.java", "diffHunk": "@@ -113,6 +114,7 @@\n  */\n \n @RunWith(Parameterized.class)\n+@Ignore(\"Tests crash due to bug in core, see https://jira.mongodb.org/browse/RCORE-435\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE0NDYxMQ=="}, "originalCommit": {"oid": "e9c7ea21b41796fc9349fac8f85e9c23fe69b49d"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxOTM0MDQyOnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/androidTest/java/io/realm/RealmJsonTests.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozMTo1OVrOIG7-ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozMTo1OVrOIG7-ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE0NTA4Mg==", "bodyText": "Is this still relevant?", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r544145082", "createdAt": "2020-12-16T09:31:59Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTest/java/io/realm/RealmJsonTests.java", "diffHunk": "@@ -75,6 +75,7 @@\n import static org.junit.Assume.assumeThat;\n \n @RunWith(AndroidJUnit4.class)\n+@Ignore(\"Tests crash due to bug in core, see https://jira.mongodb.org/browse/RCORE-435\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9c7ea21b41796fc9349fac8f85e9c23fe69b49d"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxOTM0MjE1OnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/androidTest/java/io/realm/RealmResultsTests.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozMjoxN1rOIG7_qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozMjoxN1rOIG7_qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE0NTMyMw==", "bodyText": "Same?", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r544145323", "createdAt": "2020-12-16T09:32:17Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTest/java/io/realm/RealmResultsTests.java", "diffHunk": "@@ -68,6 +68,7 @@\n import static org.junit.Assert.fail;\n \n @RunWith(AndroidJUnit4.class)\n+@Ignore(\"Tests crash due to bug in core, see https://jira.mongodb.org/browse/RCORE-435\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9c7ea21b41796fc9349fac8f85e9c23fe69b49d"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxOTM0Mjc4OnYy", "diffSide": "RIGHT", "path": "realm/realm-library/src/androidTest/java/io/realm/RealmTests.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozMjoyMlrOIG7_-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozMjoyMlrOIG7_-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE0NTQwMQ==", "bodyText": "Same?", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r544145401", "createdAt": "2020-12-16T09:32:22Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTest/java/io/realm/RealmTests.java", "diffHunk": "@@ -135,6 +135,7 @@\n \n \n @RunWith(AndroidJUnit4.class)\n+@Ignore(\"Tests crash due to bug in core, see https://jira.mongodb.org/browse/RCORE-435\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9c7ea21b41796fc9349fac8f85e9c23fe69b49d"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxOTM3MzM2OnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozODo0MlrOIG8R6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozODo0MlrOIG8R6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE0OTk5Mw==", "bodyText": "We normally leave this out if nothing here.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r544149993", "createdAt": "2020-12-16T09:38:42Z", "author": {"login": "cmelchior"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,3 +1,25 @@\n+## 10.3.0 (YYYY-MM-DD)\n+\n+### Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9c7ea21b41796fc9349fac8f85e9c23fe69b49d"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxOTM3NDI5OnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozODo1M1rOIG8SaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozODo1M1rOIG8SaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE1MDEyMA==", "bodyText": "We normally leave this section out if nothing here.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r544150120", "createdAt": "2020-12-16T09:38:53Z", "author": {"login": "cmelchior"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,3 +1,25 @@\n+## 10.3.0 (YYYY-MM-DD)\n+\n+### Deprecated\n+* None.\n+\n+### Breaking Changes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9c7ea21b41796fc9349fac8f85e9c23fe69b49d"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxOTM3NDg4OnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozODo1OVrOIG8SxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQwOTozODo1OVrOIG8SxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE1MDIxMw==", "bodyText": "Copy the section from previous releases here.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r544150213", "createdAt": "2020-12-16T09:38:59Z", "author": {"login": "cmelchior"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,3 +1,25 @@\n+## 10.3.0 (YYYY-MM-DD)\n+\n+### Deprecated\n+* None.\n+\n+### Breaking Changes\n+* None.\n+\n+### Enhancements\n+* None.\n+\n+### Fixes\n+* None.\n+\n+### Compatibility\n+* None.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9c7ea21b41796fc9349fac8f85e9c23fe69b49d"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNjEwNjk2OnYy", "diffSide": "RIGHT", "path": "Jenkinsfile", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwNzozOTowN1rOIJO4nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwNzozOTowN1rOIJO4nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjU1MTk2NQ==", "bodyText": "For traceability/reproducability etc. I would assume that it safest to do release from the prebuilts. Is it safe to to the release from locally build cores? Or don't we get the benefits of optimizations unless we build it?", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r546551965", "createdAt": "2020-12-21T07:39:07Z", "author": {"login": "rorbech"}, "path": "Jenkinsfile", "diffHunk": "@@ -91,6 +91,7 @@ try {\n           //  But still build all ABI's and run all types of tests. \n           useEmulator = true\n           emulatorImage = \"system-images;android-29;default;x86\"\n+          buildFlags = \"-PenableLTO=true -PbuildCore=true\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e034aa039277cff95f7d375934aa0567b581bea"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNjExMzQyOnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwNzo0MjowOFrOIJO8dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwNzo0MjowOFrOIJO8dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjU1Mjk1MA==", "bodyText": "Isn't this download automatically when we specify the ndkVersion through the Android Gradle Plugin.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r546552950", "createdAt": "2020-12-21T07:42:08Z", "author": {"login": "rorbech"}, "path": "README.md", "diffHunk": "@@ -66,34 +66,24 @@ In case you don't want to use the precompiled version, you can build Realm yours\n ### Prerequisites\n \n  * Download the [**JDK 8**](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) from Oracle and install it.\n- * The latest stable version of Android Studio. Currently [3.6.2](https://developer.android.com/studio/).\n- * Download & install the Android SDK **Build-Tools 28.0.3**, **Android Pie (API 28)** (for example through Android Studio\u2019s **Android SDK Manager**).\n+ * The latest stable version of Android Studio. Currently [4.1.1](https://developer.android.com/studio/).\n+ * Download & install the Android SDK **Build-Tools 29.0.3**, **Android Pie (API 29)** (for example through Android Studio\u2019s **Android SDK Manager**).\n  * Install CMake version 3.18.2 and build Ninja.\n- * Install the NDK (currently r21) from the SDK Manager in Android Studio or using the [website](https://developer.android.com/ndk/downloads). If downloaded \n-You may unzip the file wherever you choose.  For macOS, a suggested location is `~/Library`.  The download will unzip as the directory `android-ndk-r21`.\n+ * Install the NDK (Side-by-side) **21.0.6113669** from the SDK Manager in Android Studio. Remember to check `\u2611  Show package details` in the manager to display all available versions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e034aa039277cff95f7d375934aa0567b581bea"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNjExNzk3OnYy", "diffSide": "RIGHT", "path": "README.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwNzo0NDoxMlrOIJO_JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwNzo0NDoxMlrOIJO_JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjU1MzYzNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * If you'd like to specify the location in which to store the archives of Realm Core, define the `REALM_CORE_DOWNLOAD_DIR` environment variable. It enables caching core release artifacts.\n          \n          \n            \n             * If you'd like to specify the location in which to store the archives of Realm Core, define the `REALM_CORE_DOWNLOAD_DIR` environment variable. It enables caching of downloaded core release artifacts.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r546553636", "createdAt": "2020-12-21T07:44:12Z", "author": {"login": "rorbech"}, "path": "README.md", "diffHunk": "@@ -66,34 +66,24 @@ In case you don't want to use the precompiled version, you can build Realm yours\n ### Prerequisites\n \n  * Download the [**JDK 8**](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) from Oracle and install it.\n- * The latest stable version of Android Studio. Currently [3.6.2](https://developer.android.com/studio/).\n- * Download & install the Android SDK **Build-Tools 28.0.3**, **Android Pie (API 28)** (for example through Android Studio\u2019s **Android SDK Manager**).\n+ * The latest stable version of Android Studio. Currently [4.1.1](https://developer.android.com/studio/).\n+ * Download & install the Android SDK **Build-Tools 29.0.3**, **Android Pie (API 29)** (for example through Android Studio\u2019s **Android SDK Manager**).\n  * Install CMake version 3.18.2 and build Ninja.\n- * Install the NDK (currently r21) from the SDK Manager in Android Studio or using the [website](https://developer.android.com/ndk/downloads). If downloaded \n-You may unzip the file wherever you choose.  For macOS, a suggested location is `~/Library`.  The download will unzip as the directory `android-ndk-r21`.\n+ * Install the NDK (Side-by-side) **21.0.6113669** from the SDK Manager in Android Studio. Remember to check `\u2611  Show package details` in the manager to display all available versions.\n \n- * If you will be building with Android Studio, you will need to tell it to use the correct NDK.  If you installed it using the SDK Manager, it will automatically be detected. Otherwise, you need to define the variable `ndk.dir` in `realm/local.properties` and assign it the full pathname of the directory that you unzipped above.  Note that there is a `local.properites` in the root directory that is *not* the one that needs to be edited.\n+ * Add the Android home environment variable to your profile:\n \n     ```\n-    ndk.dir=/Users/<username>/Library/android-sdk/ndk/21.0.6113669\n-\n-    ```\n-\n- * Add two environment variables to your profile (presuming you installed the NDK using the SDK Manager):\n-\n-    ```\n-    export ANDROID_HOME=~/Library/android-sdk\n-    export ANDROID_NDK_HOME=~/Library/android-sdk/ndk/21.0.6113669\n+    export ANDROID_HOME=~/Library/Android/sdk\n     ```\n \n- * If you are launching Android Studio from the macOS Finder, you should also run the following two commands:\n+ * If you are launching Android Studio from the macOS Finder, you should also run the following command:\n \n     ```\n     launchctl setenv ANDROID_HOME \"$ANDROID_HOME\"\n-    launchctl setenv ANDROID_NDK_HOME \"$ANDROID_NDK_HOME\"\n     ```\n \n- * If you'd like to specify the location in which to store the archives of Realm Core, define the `REALM_CORE_DOWNLOAD_DIR` environment variable. It enables you to keep Core's archive when executing `git clean -xfd`.\n+ * If you'd like to specify the location in which to store the archives of Realm Core, define the `REALM_CORE_DOWNLOAD_DIR` environment variable. It enables caching core release artifacts.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e034aa039277cff95f7d375934aa0567b581bea"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ4Njc2NTQwOnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxMzo0Njo0M1rOIQSjIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxMzo0Njo0M1rOIQSjIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzk1MjAzMg==", "bodyText": "We should probably add a comment about https://jira.mongodb.org/browse/HELP-21241. Maybe something like * [RealmApp] Sometimes getting Index out of range error when integrating a remote Sync changeset into the local Realm\nIt is a bit vague, but not sure I can come up with something more specific that doesn't involve writing 10s of lines of text.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r553952032", "createdAt": "2021-01-08T13:46:43Z", "author": {"login": "cmelchior"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,3 +1,21 @@\n+## 10.3.0 (YYYY-MM-DD)\n+\n+### Enhancements\n+* None.\n+\n+### Fixes\n+* None.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f41646819c928a6da8702146b6f31cee84a50bd"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ4Njk0NzYzOnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxNDozOTowOFrOIQUSiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxNDozOTowOFrOIQUSiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzk4MDU1Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * [RealmApp] Integrating a remote Sync changeset into the local Realm could result on an `Index out of range error`.\n          \n          \n            \n            * [RealmApp] Integrating a remote Sync changeset into the local Realm could result in an `Index out of range error`.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r553980553", "createdAt": "2021-01-08T14:39:08Z", "author": {"login": "cmelchior"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,3 +1,22 @@\n+## 10.3.0 (YYYY-MM-DD)\n+\n+### Enhancements\n+* None.\n+\n+### Fixes\n+* [RealmApp] Integrating a remote Sync changeset into the local Realm could result on an `Index out of range error`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d88faf6fcc9a5a419e3a24bdbcc4a2bcd92a2"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ4Njk0OTA0OnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxNDozOToyOFrOIQUTVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxNDozOToyOFrOIQUTVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzk4MDc1OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Change notifications not fired when removing and adding an object with the same PK within a transaction (Issue [#7098](https://github.com/realm/realm-java/issues/7098)).\n          \n          \n            \n            * Change notifications not firing when removing and adding an object with the same primary key within a transaction (Issue [#7098](https://github.com/realm/realm-java/issues/7098)).", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r553980758", "createdAt": "2021-01-08T14:39:28Z", "author": {"login": "cmelchior"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,3 +1,22 @@\n+## 10.3.0 (YYYY-MM-DD)\n+\n+### Enhancements\n+* None.\n+\n+### Fixes\n+* [RealmApp] Integrating a remote Sync changeset into the local Realm could result on an `Index out of range error`.\n+* Change notifications not fired when removing and adding an object with the same PK within a transaction (Issue [#7098](https://github.com/realm/realm-java/issues/7098)).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "427d88faf6fcc9a5a419e3a24bdbcc4a2bcd92a2"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ4NzA2MTc0OnYy", "diffSide": "RIGHT", "path": "CHANGELOG.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxNTowODozMlrOIQVYZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxNTowODozMlrOIQVYZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzk5ODQzOA==", "bodyText": "It looks like the Core release has a few other fixes we should also mention. Sorry for not catching this earlier. https://github.com/realm/realm-core/blob/master/CHANGELOG.md#1033-release-notes\nI would propose changing it to this:\n* [RealmApp] Integrating a remote Sync changeset into the local Realm could result in an `Index out of range error`.\n* Change notifications not firing when removing and adding an object with the same primary key within a transaction (Issue [#7098](https://github.com/realm/realm-java/issues/7098)).\n* Race condition which would lead to \"uncaught exception in notifier thread: N5realm15InvalidTableRefE: transaction_ended\" and a crash when the source Realm was closed or invalidated at a very specific time during the first run of a collection notifier (Core issue [#3761](https://github.com/realm/realm-core/issues/3761), since v7.0.0).\n* Deleting and recreating objects with embedded objects could fail (Core issue [#4240](https://github.com/realm/realm-core/pull/4240), since v10.0.0)\n\nBut feel free to do that after CI has run, no reason to retrigger it for a doc update.", "url": "https://github.com/realm/realm-java/pull/7241#discussion_r553998438", "createdAt": "2021-01-08T15:08:32Z", "author": {"login": "cmelchior"}, "path": "CHANGELOG.md", "diffHunk": "@@ -1,3 +1,22 @@\n+## 10.3.0 (YYYY-MM-DD)\n+\n+### Enhancements\n+* None.\n+\n+### Fixes\n+* [RealmApp] Integrating a remote Sync changeset into the local Realm could result in an `Index out of range error`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb4a3c2495e4f74a6cfa252873e026bfaa6c912b"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 401, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}