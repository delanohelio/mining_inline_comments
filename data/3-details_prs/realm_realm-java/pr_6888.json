{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NTE2ODI0", "number": 6888, "title": "Rework MongoDB package layout", "bodyText": "Moves all classes related to MongoDB to separate package hierarchy and strips Realm from names.\nEntities created from App and User is split into abstract implementation and actual package private implementation in io.realm.mongodb to keep internals and constructors out of the public API.\nExposures to resolve previously package private access:\n\nRealm.getApplicationContext() instead of package proctected BaseRealm.applicationContext to avoid making BaseRealm public\n\nExposure reworks to resolve package private access for test:\n\nMove Sync test to io.realm.mongodb.sync for access to\n\nProgressContructor\nSyncConfiguration.schema\nClientResyncMode\n\n\n\nTODOs\n\n Hide User.osUser\n Hide App.nativePtr - needs MongoClient abstraction in same package\n Fix package access generally for test either by:\n\nMoving test and test util classes to the corresponding package\nCreating test only extension methods in the correct package to expose the protected methods to test as in SyncExt.kt", "createdAt": "2020-05-30T20:15:51Z", "url": "https://github.com/realm/realm-java/pull/6888", "merged": true, "mergeCommit": {"oid": "edfe6000b9348dfefe240d7c6362bcc3ae337f75"}, "closed": true, "closedAt": "2020-06-03T10:23:50Z", "author": {"login": "rorbech"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmBjd9gH2gAyNDI1NTE2ODI0OjAyMjVlNDE5Zjk3MDQ3NDM2MDZhMjAwZWE0ZWI4NGY3ZTkyNmU4YmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnlVErAH2gAyNDI1NTE2ODI0OjUxZmEzZjhiZDYyMDBkOTNiYzdiZGM5NzlhM2JiMjE0YWQyZDczNWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0225e419f9704743606a200ea4eb84f7e926e8bb", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/0225e419f9704743606a200ea4eb84f7e926e8bb", "committedDate": "2020-05-29T12:23:51Z", "message": "First brute rearranging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "002c519a8cb50d10cba866b5e93f393537f6fe4a", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/002c519a8cb50d10cba866b5e93f393537f6fe4a", "committedDate": "2020-05-30T09:21:49Z", "message": "Strip Realm from MongoDB classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9568da3fa26291d778ee1750212c8e7d2d5d4aa", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/f9568da3fa26291d778ee1750212c8e7d2d5d4aa", "committedDate": "2020-05-30T09:21:55Z", "message": "Fix JNI linking after restructuring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9afd52800ec4075b60d0d275375672462c310baa", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/9afd52800ec4075b60d0d275375672462c310baa", "committedDate": "2020-05-30T09:21:55Z", "message": "Documentation update and FIXMEs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27b22076a6b683e11251b5a6fa0b3798a9b0e026", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/27b22076a6b683e11251b5a6fa0b3798a9b0e026", "committedDate": "2020-05-30T09:22:59Z", "message": "Trying to update test to mongodb structure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec5883528d7d3aca1321b5d3ce79eaa544a5cab5", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/ec5883528d7d3aca1321b5d3ce79eaa544a5cab5", "committedDate": "2020-05-30T09:44:38Z", "message": "Merge branch 'v10' into cr/mongodb-restructuring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23c25d4b5f614648dd8ac06e68bc47b629000a73", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/23c25d4b5f614648dd8ac06e68bc47b629000a73", "committedDate": "2020-05-30T13:12:19Z", "message": "fixup! Fix JNI linking after restructuring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89b9f882710c890d6c7638aadea9fb3b0c80b152", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/89b9f882710c890d6c7638aadea9fb3b0c80b152", "committedDate": "2020-05-30T13:13:04Z", "message": "Fix examples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3566a2f90e53ae779599c7bc180ed065b8110c48", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/3566a2f90e53ae779599c7bc180ed065b8110c48", "committedDate": "2020-05-30T15:53:01Z", "message": "Fix test without resolving all API leaks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2ada90a34ed91b6a3db34a1e965ca37c2288d94", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/d2ada90a34ed91b6a3db34a1e965ca37c2288d94", "committedDate": "2020-05-30T17:15:45Z", "message": "Fix build errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de6d5ad39c0e18a660e6ad075f34a70291d58241", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/de6d5ad39c0e18a660e6ad075f34a70291d58241", "committedDate": "2020-05-30T20:06:15Z", "message": "Fix recovery error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNDk5OTYw", "url": "https://github.com/realm/realm-java/pull/6888#pullrequestreview-421499960", "createdAt": "2020-05-31T14:27:30Z", "commit": {"oid": "de6d5ad39c0e18a660e6ad075f34a70291d58241"}, "state": "APPROVED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNDoyNzozMFrOGc5VEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0zMVQxNDozNjowN1rOGc5X9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1MjU5NQ==", "bodyText": "What does this do?", "url": "https://github.com/realm/realm-java/pull/6888#discussion_r432952595", "createdAt": "2020-05-31T14:27:30Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/mongodb/AppExt.kt", "diffHunk": "@@ -13,28 +13,32 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n-package io.realm\n+package io.realm.mongodb\n \n+import io.realm.BaseRealmExt\n import io.realm.admin.ServerAdmin\n+import io.realm.test_clear\n+import io.realm.mongodb.sync.test_reset\n \n /**\n  * Resets the Realm Application and delete all local state.\n  *\n  * Trying to access any Sync or Realm App API's after this has been called has undefined\n  * behavior.\n  */\n-fun RealmApp.close() {\n+fun App.close() {\n     ServerAdmin().deleteAllUsers()\n-    this.syncManager.reset()\n-    RealmApp.CREATED = false\n-    BaseRealm.applicationContext = null // Required for Realm.init() to work\n+    this.syncManager.test_reset()\n+    this.networkTransport.resetHeaders()\n+    App.CREATED = false\n+    BaseRealmExt.test_clear()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de6d5ad39c0e18a660e6ad075f34a70291d58241"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1MjY3OQ==", "bodyText": "Schema has a public list of classes, probably we can just look them up through that instead", "url": "https://github.com/realm/realm-java/pull/6888#discussion_r432952679", "createdAt": "2020-05-31T14:28:31Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/mongodb/sync/SessionTests.kt", "diffHunk": "@@ -211,7 +217,8 @@ class SessionTests {\n \n                     // opening a Dynamic Realm should also work\n                     DynamicRealm.getInstance(backupRealmConfiguration).use { dynamicRealm ->\n-                        dynamicRealm.schema.checkHasTable(StringOnly.CLASS_NAME, \"Dynamic Realm should contains \" + StringOnly.CLASS_NAME)\n+                        // FIXME How to get access to dynamicRealm.schme.checkHasTable\n+//                        dynamicRealm.schema.checkHasTable(StringOnly.CLASS_NAME, \"Dynamic Realm should contains \" + StringOnly.CLASS_NAME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de6d5ad39c0e18a660e6ad075f34a70291d58241"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1Mjg4NQ==", "bodyText": "if it isn't public, it probably should be.", "url": "https://github.com/realm/realm-java/pull/6888#discussion_r432952885", "createdAt": "2020-05-31T14:31:12Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/mongodb/sync/SyncConfigurationTests.kt", "diffHunk": "@@ -163,7 +168,8 @@ class SyncConfigurationTests {\n                     }\n                 })\n                 .build()\n-        assertNotNull(config.initialDataTransaction)\n+        // FIXME How to verify this without access to initialDataTransaction\n+//        assertNotNull(config.initialDataTransaction)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de6d5ad39c0e18a660e6ad075f34a70291d58241"}, "originalPosition": 149}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1MjkxMA==", "bodyText": "testReset? test_reset() looks very c++.", "url": "https://github.com/realm/realm-java/pull/6888#discussion_r432952910", "createdAt": "2020-05-31T14:31:34Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/mongodb/sync/SyncExt.kt", "diffHunk": "@@ -0,0 +1,22 @@\n+/*\n+ * Copyright 2020 Realm Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.realm.mongodb.sync\n+\n+// Helper to expose package protected methods for testing purpose\n+fun Sync.test_reset() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de6d5ad39c0e18a660e6ad075f34a70291d58241"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1MzE0Mg==", "bodyText": "We mostly use this to check that people called Realm.init() as it loaded the native code and make sure we have a reference to getFilesDir.\nIf we must make it public, it would make most sense to have it on Realm I think.", "url": "https://github.com/realm/realm-java/pull/6888#discussion_r432953142", "createdAt": "2020-05-31T14:34:04Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/main/java/io/realm/BaseRealm.java", "diffHunk": "@@ -147,6 +147,14 @@ public void onInit(OsSharedRealm sharedRealm) {\n         this.shouldCloseSharedRealm = false;\n     }\n \n+    // FIXME Could we put this in Realm.getApplicationContext() only. Do not know why this lives\n+    //  on BaseRealm as it is never initialized/used for DynamicRealm, so might as well just\n+    //  be on Realm.\n+    // FIXME Review public exposure - Needed from <X>Configuration.Builder. Can we expose this? Alternatively required as argument to <X>Configruation.Builders\n+    public static Context getApplicationContext() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de6d5ad39c0e18a660e6ad075f34a70291d58241"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1MzI2Mw==", "bodyText": "Having this public feels problematic. What classes need to call this that don't live in io.realm ?", "url": "https://github.com/realm/realm-java/pull/6888#discussion_r432953263", "createdAt": "2020-05-31T14:35:23Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/main/java/io/realm/DynamicRealm.java", "diffHunk": "@@ -333,7 +333,8 @@ public DynamicRealm freeze() {\n      *\n      * @param version the schema version to be set.\n      */\n-    void setVersion(long version) {\n+    // FIXME Review public exposure - Test only can be hidden by extension functions\n+    public void setVersion(long version) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de6d5ad39c0e18a660e6ad075f34a70291d58241"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1MzMzNQ==", "bodyText": "Probably doesn't hurt, although it does bloat the public API for very little value.", "url": "https://github.com/realm/realm-java/pull/6888#discussion_r432953335", "createdAt": "2020-05-31T14:36:07Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/main/java/io/realm/RealmConfiguration.java", "diffHunk": "@@ -435,7 +435,8 @@ public String toString() {\n      * @return {@code true} if RxJava dependency exist, {@code false} otherwise.\n      */\n     @SuppressWarnings(\"LiteralClassName\")\n-    static synchronized boolean isRxJavaAvailable() {\n+    // FIXME Review public exposure - Needed from SyncConfiguration.Builder can we expose this?\n+    public static synchronized boolean isRxJavaAvailable() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de6d5ad39c0e18a660e6ad075f34a70291d58241"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10aa6a4f32974d3ffcbda5599052086ead75a9d6", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/10aa6a4f32974d3ffcbda5599052086ead75a9d6", "committedDate": "2020-06-02T06:48:05Z", "message": "Convert utility classes to Kotlin after moving it to Kotlin source set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7be833022a12581d9e6e48d8eabee7f4a5ebfd3f", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/7be833022a12581d9e6e48d8eabee7f4a5ebfd3f", "committedDate": "2020-06-02T07:36:09Z", "message": "Move Request to internal mongodb package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71da6bf316144852ee3ca2e85ed7560bc062b9f5", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/71da6bf316144852ee3ca2e85ed7560bc062b9f5", "committedDate": "2020-06-02T07:37:11Z", "message": "Move isRxJavaAvailable to internal Utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cf48ea0a174aeb369fd67d4ea134df10dfbe85b", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/9cf48ea0a174aeb369fd67d4ea134df10dfbe85b", "committedDate": "2020-06-02T07:58:41Z", "message": "Revert \"Convert utility classes to Kotlin after moving it to Kotlin source set\"\n\nThis reverts commit 10aa6a4f32974d3ffcbda5599052086ead75a9d6."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f58feb9168136a9303bfbe96e141d6475631e3be", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/f58feb9168136a9303bfbe96e141d6475631e3be", "committedDate": "2020-06-02T08:05:33Z", "message": "Hide App.networkTransport"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d29f7a9f454f5e8b837da9d1d93dc8d63bbf577", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/9d29f7a9f454f5e8b837da9d1d93dc8d63bbf577", "committedDate": "2020-06-02T10:47:27Z", "message": "Hide App.nativePtr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d987c06fa6855aa4761fe50a63ee43b10467b46", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/6d987c06fa6855aa4761fe50a63ee43b10467b46", "committedDate": "2020-06-02T10:47:28Z", "message": "Resolve public exposure of DynamicRealm.setVersion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8948c6fd5963e5e4905e38305a1b4b775036a50a", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/8948c6fd5963e5e4905e38305a1b4b775036a50a", "committedDate": "2020-06-02T10:47:28Z", "message": "Rename test extension methods uniformly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4306c5942dd2c0a9759a32ddedc24a0f3d9ea41e", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/4306c5942dd2c0a9759a32ddedc24a0f3d9ea41e", "committedDate": "2020-06-02T10:47:28Z", "message": "Reworked bypassed asserts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b20f667736a514e5b79fe5e346ef2c64b05db2d8", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/b20f667736a514e5b79fe5e346ef2c64b05db2d8", "committedDate": "2020-06-02T10:47:28Z", "message": "Documentation updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3e32464e75195be28675c4d7b5ece948e1da5fd", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/b3e32464e75195be28675c4d7b5ece948e1da5fd", "committedDate": "2020-06-02T10:56:23Z", "message": "Leave Java test utils in Java source set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "610e15285a9d72d6e076626ff1ae02063bf0cdf2", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/610e15285a9d72d6e076626ff1ae02063bf0cdf2", "committedDate": "2020-06-02T12:27:23Z", "message": "Add public Realm.getApplicationContext()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22a99303bc6d241464b08e3c7730ca777e44a721", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/22a99303bc6d241464b08e3c7730ca777e44a721", "committedDate": "2020-06-02T12:40:10Z", "message": "Add Java test utils source to kotlin-extension android test source set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e5d12f2d6418d13b0ad04854a86451a8907c2f6", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/8e5d12f2d6418d13b0ad04854a86451a8907c2f6", "committedDate": "2020-06-02T13:05:08Z", "message": "Fix BaseRealmExt->RealmExt renaming errors for kotlin-extension tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDgxMjIw", "url": "https://github.com/realm/realm-java/pull/6888#pullrequestreview-423081220", "createdAt": "2020-06-02T21:47:56Z", "commit": {"oid": "8e5d12f2d6418d13b0ad04854a86451a8907c2f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaa2dba54b1ee66178ea3c261b7a0825323a0a2a", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/aaa2dba54b1ee66178ea3c261b7a0825323a0a2a", "committedDate": "2020-06-03T08:16:37Z", "message": "Merge branch 'v10' into cr/mongodb-restructuring\n\n# Conflicts:\n#\trealm/realm-library/src/objectServer/java/io/realm/mongodb/functions/Functions.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMzI1MzI5", "url": "https://github.com/realm/realm-java/pull/6888#pullrequestreview-423325329", "createdAt": "2020-06-03T08:21:59Z", "commit": {"oid": "aaa2dba54b1ee66178ea3c261b7a0825323a0a2a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwODoyMTo1OVrOGeRPBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwODozMTo0MVrOGeRmjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM5MjgzNw==", "bodyText": "Since this now lives in internal, it is perfectly fine to have public constructors. So this FIXME can probably just be removed", "url": "https://github.com/realm/realm-java/pull/6888#discussion_r434392837", "createdAt": "2020-06-03T08:21:59Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/objectServer/java/io/realm/internal/mongodb/Request.java", "diffHunk": "@@ -0,0 +1,97 @@\n+/*\n+ * Copyright 2020 Realm Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.realm.internal.mongodb;\n+\n+import java.util.concurrent.Future;\n+import java.util.concurrent.ThreadPoolExecutor;\n+\n+import javax.annotation.Nullable;\n+\n+import io.realm.RealmAsyncTask;\n+import io.realm.internal.RealmNotifier;\n+import io.realm.internal.android.AndroidCapabilities;\n+import io.realm.internal.android.AndroidRealmNotifier;\n+import io.realm.internal.async.RealmAsyncTaskImpl;\n+import io.realm.log.RealmLog;\n+import io.realm.mongodb.App;\n+import io.realm.mongodb.ErrorCode;\n+import io.realm.mongodb.ObjectServerError;\n+\n+// Class wrapping requests made against MongoDB Realm. Is also responsible for calling with success/error on the\n+// correct thread.\n+public abstract class Request<T> {\n+    @Nullable\n+    private final App.Callback<T> callback;\n+    private final RealmNotifier handler;\n+    private final ThreadPoolExecutor networkPoolExecutor;\n+\n+    // FIXME Made public to use in Functions. Consider reworking when App, User is moved", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aaa2dba54b1ee66178ea3c261b7a0825323a0a2a"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM5ODg2MA==", "bodyText": "Not 100% sure I understand why adding this is better than just renaming the schema method?", "url": "https://github.com/realm/realm-java/pull/6888#discussion_r434398860", "createdAt": "2020-06-03T08:31:41Z", "author": {"login": "cmelchior"}, "path": "realm/realm-library/src/syncTestUtils/kotlin/io/realm/mongodb/sync/SyncConfigurationExt.kt", "diffHunk": "@@ -16,8 +16,13 @@\n \n package io.realm.mongodb.sync\n \n+import io.realm.RealmModel\n import io.realm.internal.OsRealmConfig\n \n-fun SyncConfiguration.Builder.test_sessionStopPolicy(policy: OsRealmConfig.SyncSessionStopPolicy): SyncConfiguration.Builder {\n+fun SyncConfiguration.Builder.testSchema(firstClass: Class<out RealmModel>, vararg x: Class<out RealmModel> ) : SyncConfiguration.Builder {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aaa2dba54b1ee66178ea3c261b7a0825323a0a2a"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51fa3f8bd6200d93bc7bdc979a3bb214ad2d735e", "author": {"user": {"login": "rorbech", "name": "Claus R\u00f8rbech"}}, "url": "https://github.com/realm/realm-java/commit/51fa3f8bd6200d93bc7bdc979a3bb214ad2d735e", "committedDate": "2020-06-03T08:38:38Z", "message": "Remove deprecated FIXME"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2570, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}