{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4MzA5ODU1", "number": 6776, "title": "Fix ProgressListeners for Core 6", "bodyText": "Closes #6764\n\nThis should remove the last known bug for Core 6.\nCleaned up the changelog preparing for release.\nAlso found the bug with our RxJava tests. It turned out to reveal a true issue. Apparently, the async queries are so fast on my emulator and device that it resolved correctly before the subscription triggered, but on CI, we attempted to subscribe to a still-pending object which failed.", "createdAt": "2020-03-14T13:46:05Z", "url": "https://github.com/realm/realm-java/pull/6776", "merged": true, "mergeCommit": {"oid": "15424125c8c7ce0c092b7c87ee49c9d50ece2723"}, "closed": true, "closedAt": "2020-03-19T13:25:08Z", "author": {"login": "cmelchior"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNlKZ6gH2gAyMzg4MzA5ODU1Ojk3ZjE3YzBiZmE3NjNhZDQzMzRlYTUzZTI5NThkMmRiMjg0NTIxMjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPLg9RAFqTM3NzY5NDEyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "97f17c0bfa763ad4334ea53e2958d2db28452120", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/97f17c0bfa763ad4334ea53e2958d2db28452120", "committedDate": "2020-03-14T13:44:57Z", "message": "Fix progress listeners"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce64f7b6210f89410f4af181240145b446c1ff36", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/ce64f7b6210f89410f4af181240145b446c1ff36", "committedDate": "2020-03-14T18:38:28Z", "message": "Add debug logging to tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c78abec9fc915afbfdb9c6e29224b33ad5d5a556", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/c78abec9fc915afbfdb9c6e29224b33ad5d5a556", "committedDate": "2020-03-14T18:40:39Z", "message": "More logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59336dbab8ce2a02704b80529ddc211f62905ae8", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/59336dbab8ce2a02704b80529ddc211f62905ae8", "committedDate": "2020-03-14T20:02:16Z", "message": "More logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzUzNzYx", "url": "https://github.com/realm/realm-java/pull/6776#pullrequestreview-374753761", "createdAt": "2020-03-14T21:00:26Z", "commit": {"oid": "ce64f7b6210f89410f4af181240145b446c1ff36"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQyMTowMDoyN1rOF2bjbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQyMTowMDoyN1rOF2bjbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYxODg2Mw==", "bodyText": "Should be local", "url": "https://github.com/realm/realm-java/pull/6776#discussion_r392618863", "createdAt": "2020-03-14T21:00:27Z", "author": {"login": "Zhuinden"}, "path": "realm/realm-library/src/androidTest/java/io/realm/RxJavaTests.java", "diffHunk": "@@ -99,6 +99,8 @@ private void disposeSuccessfulTest(BaseRealm testRealm) {\n                 @Override\n                 public void run() {\n                     // Wait for Subscription to dispose of external resources\n+                    RealmLog.error(\"Global: \" + Realm.getGlobalInstanceCount(testRealm.getConfiguration()));\n+                    RealmLog.error(\"Local: \" + Realm.getGlobalInstanceCount(testRealm.getConfiguration()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce64f7b6210f89410f4af181240145b446c1ff36"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3749ae993b82eca082338f175e51b811376616d8", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/3749ae993b82eca082338f175e51b811376616d8", "committedDate": "2020-03-14T21:23:58Z", "message": "More debug logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78314cd858b1992ac5c3da709b1e00e71b504810", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/78314cd858b1992ac5c3da709b1e00e71b504810", "committedDate": "2020-03-14T22:44:48Z", "message": "Fix wrong object test. PendingRows are invalid. Check Realm instead."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9c36d153bb70bd6ed67e138cc2e67c8bd49c579", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/f9c36d153bb70bd6ed67e138cc2e67c8bd49c579", "committedDate": "2020-03-15T10:53:34Z", "message": "Fix broken unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7432181d8f2dbf81617d05cd5fdb9d51a9a42ddd", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/7432181d8f2dbf81617d05cd5fdb9d51a9a42ddd", "committedDate": "2020-03-15T13:09:17Z", "message": "Fix test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0Nzk4NDEw", "url": "https://github.com/realm/realm-java/pull/6776#pullrequestreview-374798410", "createdAt": "2020-03-15T13:17:38Z", "commit": {"oid": "7432181d8f2dbf81617d05cd5fdb9d51a9a42ddd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQxMzoxNzozOFrOF2e2yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQxMzoxNzozOFrOF2e2yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY3Mjk2OQ==", "bodyText": "Is it not possible to use Realm.refresh() here?", "url": "https://github.com/realm/realm-java/pull/6776#discussion_r392672969", "createdAt": "2020-03-15T13:17:38Z", "author": {"login": "Zhuinden"}, "path": "realm/realm-library/src/androidTest/java/io/realm/RxJavaTests.java", "diffHunk": "@@ -247,8 +247,17 @@ public void findFirstAsync_emittedOnSubscribe() {\n         final AllTypes asyncObj = realm.where(AllTypes.class).findFirstAsync();\n         subscription = asyncObj.<AllTypes>asFlowable().subscribe(rxObject -> {\n             assertTrue(rxObject.isFrozen());\n+            // Because the subscription is run asynchronously. There is a chance\n+            // the query resolved before the subscription triggers.\n+            // This means it is not deterministic what state is first emitted here.\n+            // It can either be a fully loaded object or one that is still loading.\n             assertFalse(rxObject.isValid());\n-            assertFalse(rxObject.isLoaded());\n+            if (rxObject.isLoaded()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7432181d8f2dbf81617d05cd5fdb9d51a9a42ddd"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb40a6ee040a8ac91e509617936b8363aa08b2b8", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/cb40a6ee040a8ac91e509617936b8363aa08b2b8", "committedDate": "2020-03-15T13:55:43Z", "message": "Ups, forgot to remove assert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ed83c9deea35502e8a4624674c38b0e8e998648", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/1ed83c9deea35502e8a4624674c38b0e8e998648", "committedDate": "2020-03-15T14:27:22Z", "message": "Other test fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "272c64f9f0e003dda375310c4618e5135612aa9f", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/272c64f9f0e003dda375310c4618e5135612aa9f", "committedDate": "2020-03-15T17:17:26Z", "message": "Fix stupid"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bbab5037db30fc71154139c7a4c3413f31118c3", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/7bbab5037db30fc71154139c7a4c3413f31118c3", "committedDate": "2020-03-17T19:27:41Z", "message": "Bump test timeouts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "438e6ed68428cd0985413c43aa03f1464b47b475", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/438e6ed68428cd0985413c43aa03f1464b47b475", "committedDate": "2020-03-18T07:22:37Z", "message": "Use async transaction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d36760408c28c10a5fe27d644769c3f064da318", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/1d36760408c28c10a5fe27d644769c3f064da318", "committedDate": "2020-03-18T10:18:24Z", "message": "Disable tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e814a0c1cd145f20c43b113d0bb04fd10c9f445", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/6e814a0c1cd145f20c43b113d0bb04fd10c9f445", "committedDate": "2020-03-19T10:26:59Z", "message": "Fix ROS not starting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b996c13be5b0f0b20eaa50445aed2b08144396a8", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/b996c13be5b0f0b20eaa50445aed2b08144396a8", "committedDate": "2020-03-19T11:38:20Z", "message": "Fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53c54136b83433e127e8ef1f28201eb7d1f3297a", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/53c54136b83433e127e8ef1f28201eb7d1f3297a", "committedDate": "2020-03-19T12:23:37Z", "message": "Update build tools used by Docker on Jenkins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6325f73ca536d54d786beb93d1d655675c3cd150", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/6325f73ca536d54d786beb93d1d655675c3cd150", "committedDate": "2020-03-19T12:30:26Z", "message": "Fix Jenkins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0e4ac1757de1d0dbe0a45d8b475420a89edaf40", "author": {"user": {"login": "cmelchior", "name": "Christian Melchior"}}, "url": "https://github.com/realm/realm-java/commit/f0e4ac1757de1d0dbe0a45d8b475420a89edaf40", "committedDate": "2020-03-19T12:32:33Z", "message": "Use Android-29"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3Njk0MTIx", "url": "https://github.com/realm/realm-java/pull/6776#pullrequestreview-377694121", "createdAt": "2020-03-19T12:59:54Z", "commit": {"oid": "f0e4ac1757de1d0dbe0a45d8b475420a89edaf40"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2443, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}