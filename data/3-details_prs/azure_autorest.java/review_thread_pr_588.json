{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1ODY5Mzgz", "number": 588, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODowMDo1NVrODzmPEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODo1MDozNlrODznkDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NDMwNDE2OnYy", "diffSide": "RIGHT", "path": "javagen/src/main/java/com/azure/autorest/model/clientmodel/ListType.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODowMDo1NVrOGIIBig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODowMDo1NVrOGIIBig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTE3MzI1OA==", "bodyText": "To generate this compositeIndexes().forEach(e -> e.forEach(e1 -> e1.validate()));\nProbably not a good fix. Any suggestion?", "url": "https://github.com/Azure/autorest.java/pull/588#discussion_r411173258", "createdAt": "2020-04-20T08:00:55Z", "author": {"login": "weidongxu-microsoft"}, "path": "javagen/src/main/java/com/azure/autorest/model/clientmodel/ListType.java", "diffHunk": "@@ -30,10 +30,19 @@ public void addImportsTo(Set<String> imports, boolean includeImplementationImpor\n         super.addImportsTo(imports, includeImplementationImports);\n     }\n \n+    @Override\n     public String validate(String expression) {\n-        String elementValidation = getElementType().validate(\"e\");\n+        return validate(expression, 0);\n+    }\n+\n+    @Override\n+    public String validate(String expression, int depth) {\n+        String var = depth == 0 ? \"e\" : \"e\" + depth;\n+        String elementValidation = getElementType() instanceof GenericType\n+                ? ((GenericType) getElementType()).validate(var, ++depth)\n+                : getElementType().validate(var);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1eea26019ee58c39dad530ee27b5fb9f796a9375"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NDUyMTczOnYy", "diffSide": "RIGHT", "path": "javagen/src/main/java/com/azure/autorest/template/ModelTemplate.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODo1MDozN1rOGIJ-wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwODo1MDozN1rOGIJ-wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIwNTMxNA==", "bodyText": "For support this exception through ClientLogger.\n            throw logger\n                .logExceptionAsError(\n                    new IllegalArgumentException(\n                        \"Missing required property keyName in model StorageAccountRegenerateKeyParameters\"));", "url": "https://github.com/Azure/autorest.java/pull/588#discussion_r411205314", "createdAt": "2020-04-20T08:50:37Z", "author": {"login": "weidongxu-microsoft"}, "path": "javagen/src/main/java/com/azure/autorest/template/ModelTemplate.java", "diffHunk": "@@ -252,20 +261,36 @@ public final void write(ClientModel model, JavaFile javaFile) {\n \n     private void addPropertyValidations(JavaClass classBlock, ClientModel model, JavaSettings settings) {\n         if (settings.shouldClientSideValidations()) {\n-            if (model.getParentModelName() != null) {\n+            boolean validateOnParent = this.validateOnParentModel(model.getParentModelName());\n+\n+            // javadoc\n+            classBlock.javadocComment(settings.getMaximumJavadocCommentWidth(), (comment) -> {\n+                comment.description(\"Validates the instance.\");\n+\n+                comment.methodThrows(\"IllegalArgumentException\", \"thrown if the instance is not valid\");\n+            });\n+\n+            if (validateOnParent) {\n                 classBlock.annotation(\"Override\");\n             }\n             classBlock.publicMethod(\"void validate()\", methodBlock -> {\n-                if (model.getParentModelName() != null) {\n+                if (validateOnParent) {\n                     methodBlock.line(\"super.validate();\");\n                 }\n                 for (ClientModelProperty property : model.getProperties()) {\n                     String validation = property.getClientType().validate(property.getGetterName() + \"()\");\n                     if (property.isRequired() && !property.getIsReadOnly() && !property.getIsConstant() && !(property.getClientType() instanceof PrimitiveType)) {\n                         JavaIfBlock nullCheck = methodBlock.ifBlock(String.format(\"%s() == null\", property.getGetterName()), ifBlock -> {\n-                            ifBlock.line(String.format(\n-                                    \"throw new IllegalArgumentException(\\\"Missing required property %s in model %s\\\");\",\n-                                    property.getName(), model.getName()));\n+                            final String errorMessage = String.format(\"\\\"Missing required property %s in model %s\\\"\", property.getName(), model.getName());\n+                            if (settings.shouldClientLogger()) {\n+                                ifBlock.line(String.format(\n+                                        \"throw logger.logExceptionAsError(new IllegalArgumentException(%s));\",\n+                                        errorMessage));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d62fdff2e2d7d63193401a7acd82d315c4ed87eb"}, "originalPosition": 72}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3082, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}