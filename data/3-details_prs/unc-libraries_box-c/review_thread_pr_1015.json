{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0NTAwMjU4", "number": 1015, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNTowMDoyMlrOEF-qmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNTowMDoyMlrOEF-qmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NzA1MDQ4OnYy", "diffSide": "RIGHT", "path": "static/js/admin/src/action/AjaxCallbackAction.js", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNTowMDoyMlrOGkfnwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxODozNjoxNlrOGkoWMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkyMDAwMQ==", "bodyText": "Why does the behavior of the select_all button need to be redefined here? It is already defined here to do the exact same thing:\nhttps://github.com/UNC-Libraries/Carolina-Digital-Repository/blob/fcrepo4/static/js/admin/src/ResultTableView.js#L397", "url": "https://github.com/UNC-Libraries/box-c/pull/1015#discussion_r440920001", "createdAt": "2020-06-16T15:00:22Z", "author": {"login": "bbpennel"}, "path": "static/js/admin/src/action/AjaxCallbackAction.js", "diffHunk": "@@ -125,9 +125,21 @@ define('AjaxCallbackAction', [ 'jquery', 'jquery-ui', 'RemoteStateChangeMonitor'\n \t\t\t\t\top.context.target.setState(\"idle\");\n \t\t\t\top.complete(data);\n \t\t\t}\n-\t\t}).fail(function(data) {\n-\t\t\top.alertHandler.alertHandler('error', textStatus + \", \" + error);\n-\t\t\tconsole.error(textStatus, error);\n+\n+\t\t\t// Trigger unchecking all checked objects when action completes\n+\t\t\t$(\".select_all\").trigger('click', function(){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "747cfd4004e9a53c7dd8822b8433b325c1f4fa4b"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk2NTU3OQ==", "bodyText": "In the init method it's only bound to the select_all checkbox. So, the user needs to manually click the checkbox for it to run. Maybe we can break it out into a helper?", "url": "https://github.com/UNC-Libraries/box-c/pull/1015#discussion_r440965579", "createdAt": "2020-06-16T15:59:59Z", "author": {"login": "lfarrell"}, "path": "static/js/admin/src/action/AjaxCallbackAction.js", "diffHunk": "@@ -125,9 +125,21 @@ define('AjaxCallbackAction', [ 'jquery', 'jquery-ui', 'RemoteStateChangeMonitor'\n \t\t\t\t\top.context.target.setState(\"idle\");\n \t\t\t\top.complete(data);\n \t\t\t}\n-\t\t}).fail(function(data) {\n-\t\t\top.alertHandler.alertHandler('error', textStatus + \", \" + error);\n-\t\t\tconsole.error(textStatus, error);\n+\n+\t\t\t// Trigger unchecking all checked objects when action completes\n+\t\t\t$(\".select_all\").trigger('click', function(){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkyMDAwMQ=="}, "originalCommit": {"oid": "747cfd4004e9a53c7dd8822b8433b325c1f4fa4b"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk4NTI2Mw==", "bodyText": "Not sure I follow, its being called on the same selector in both cases, $(\".select_all\"). Could we update ResultTableView to cover both cases? It'd be nice to be able to trigger an \"unselect all\" event/action without having to go through hitting the checkbox, but that may not be practical\nI guess this version does have one difference, which is var checkbox = $(this).children(\"input\").prop(\"checked\", false); I'm kind of unclear on what that's doing right before toggling the checkbox", "url": "https://github.com/UNC-Libraries/box-c/pull/1015#discussion_r440985263", "createdAt": "2020-06-16T16:30:11Z", "author": {"login": "bbpennel"}, "path": "static/js/admin/src/action/AjaxCallbackAction.js", "diffHunk": "@@ -125,9 +125,21 @@ define('AjaxCallbackAction', [ 'jquery', 'jquery-ui', 'RemoteStateChangeMonitor'\n \t\t\t\t\top.context.target.setState(\"idle\");\n \t\t\t\top.complete(data);\n \t\t\t}\n-\t\t}).fail(function(data) {\n-\t\t\top.alertHandler.alertHandler('error', textStatus + \", \" + error);\n-\t\t\tconsole.error(textStatus, error);\n+\n+\t\t\t// Trigger unchecking all checked objects when action completes\n+\t\t\t$(\".select_all\").trigger('click', function(){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkyMDAwMQ=="}, "originalCommit": {"oid": "747cfd4004e9a53c7dd8822b8433b325c1f4fa4b"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA2Mjk2MA==", "bodyText": "I reduced it a bit. resultObjects and and selectionUpdated only seem to be in scope when wrapped in an event.", "url": "https://github.com/UNC-Libraries/box-c/pull/1015#discussion_r441062960", "createdAt": "2020-06-16T18:36:16Z", "author": {"login": "lfarrell"}, "path": "static/js/admin/src/action/AjaxCallbackAction.js", "diffHunk": "@@ -125,9 +125,21 @@ define('AjaxCallbackAction', [ 'jquery', 'jquery-ui', 'RemoteStateChangeMonitor'\n \t\t\t\t\top.context.target.setState(\"idle\");\n \t\t\t\top.complete(data);\n \t\t\t}\n-\t\t}).fail(function(data) {\n-\t\t\top.alertHandler.alertHandler('error', textStatus + \", \" + error);\n-\t\t\tconsole.error(textStatus, error);\n+\n+\t\t\t// Trigger unchecking all checked objects when action completes\n+\t\t\t$(\".select_all\").trigger('click', function(){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkyMDAwMQ=="}, "originalCommit": {"oid": "747cfd4004e9a53c7dd8822b8433b325c1f4fa4b"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 623, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}