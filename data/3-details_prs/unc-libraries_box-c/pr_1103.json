{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNDM4MDI3", "number": 1103, "title": "Check patron roles instead of princ roles when adding patron-settings tag", "bodyText": "https://jira.lib.unc.edu/browse/BXC-2815", "createdAt": "2020-10-14T14:58:18Z", "url": "https://github.com/UNC-Libraries/box-c/pull/1103", "merged": true, "mergeCommit": {"oid": "7e16a78b51276ffa44f8489a93cf2b46b69711d7"}, "closed": true, "closedAt": "2020-10-22T15:50:20Z", "author": {"login": "lfarrell"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUbKIAgFqTUxMjkwMzg2NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVDJlrAFqTUxNDgxMzk0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEyOTAzODY0", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#pullrequestreview-512903864", "createdAt": "2020-10-20T16:09:40Z", "commit": {"oid": "9343fbddfabc1b03728a29feccf3bd39a8492bb5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxNjowOTo0MFrOHlF9EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxNjoxNDowMlrOHlGNcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODY1NjkxMw==", "bodyText": "After checking in with Julie about this, the tag should only appear if the patron permissions are set to something other than the default.\nFor folders/works/files, the default would be either objPatronRoles.size() == 0 OR the authenticated and everyone groups both set to canViewOriginals.\nFor collections, it has to work a little different, we would show patron-settings if objPatronRoles.size() < 2, or eitherauthenticated or everyone groups had any value other than canViewOriginals.\nAnd we can skip this tag altogether for Units.", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#discussion_r508656913", "createdAt": "2020-10-20T16:09:40Z", "author": {"login": "bbpennel"}, "path": "solr-ingest/src/main/java/edu/unc/lib/dl/data/ingest/solr/filter/SetAccessStatusFilter.java", "diffHunk": "@@ -105,7 +106,7 @@ public void setObjectAclFactory(ObjectAclFactory oaf) {\n             status.add(FacetConstants.PUBLIC_ACCESS);\n         }\n \n-        if (objPrincRoles.size() > 0) {\n+        if (objPatronRoles.size() > 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9343fbddfabc1b03728a29feccf3bd39a8492bb5"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODY2MTEwNw==", "bodyText": "Will probably want to add a test or two to verify that collections get the right patron-settings tag", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#discussion_r508661107", "createdAt": "2020-10-20T16:14:02Z", "author": {"login": "bbpennel"}, "path": "solr-ingest/src/test/java/edu/unc/lib/dl/data/ingest/solr/filter/SetAccessStatusFilterTest.java", "diffHunk": "@@ -17,6 +17,7 @@\n \n import static edu.unc.lib.dl.acl.util.AccessPrincipalConstants.AUTHENTICATED_PRINC;\n import static edu.unc.lib.dl.acl.util.AccessPrincipalConstants.PUBLIC_PRINC;\n+import static java.util.Arrays.asList;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9343fbddfabc1b03728a29feccf3bd39a8492bb5"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "97a7ffc6cd9fdbbe54e0c189ddcf083b242bacf4", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/97a7ffc6cd9fdbbe54e0c189ddcf083b242bacf4", "committedDate": "2020-10-21T18:15:18Z", "message": "Don't add patron settings if obj type defaults are set"}, "afterCommit": {"oid": "0863a738575a4bee7ba1dfa884024f5ee53bb3c2", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/0863a738575a4bee7ba1dfa884024f5ee53bb3c2", "committedDate": "2020-10-21T18:48:39Z", "message": "Don't add patron settings if obj type defaults are set"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0863a738575a4bee7ba1dfa884024f5ee53bb3c2", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/0863a738575a4bee7ba1dfa884024f5ee53bb3c2", "committedDate": "2020-10-21T18:48:39Z", "message": "Don't add patron settings if obj type defaults are set"}, "afterCommit": {"oid": "c4db2adad17a975f124a3420f39e0b4a6853e48a", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/c4db2adad17a975f124a3420f39e0b4a6853e48a", "committedDate": "2020-10-21T20:16:16Z", "message": "Don't add patron settings if obj type defaults are set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afdeb6463f8df2aa9bcffdb7a4f0829f782f5b52", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/afdeb6463f8df2aa9bcffdb7a4f0829f782f5b52", "committedDate": "2020-10-21T20:20:32Z", "message": "Check patron roles instead of princ roles when adding patron-settings tag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff1596765f5c9856ef9c07833b595c82ae8654b9", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/ff1596765f5c9856ef9c07833b595c82ae8654b9", "committedDate": "2020-10-21T20:20:32Z", "message": "Don't add patron settings if obj type defaults are set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f85f1e7cfceebb1fb47935ccc24421a58272baa4", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/f85f1e7cfceebb1fb47935ccc24421a58272baa4", "committedDate": "2020-10-21T20:31:56Z", "message": "Fix issue when only one role is returned"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4db2adad17a975f124a3420f39e0b4a6853e48a", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/c4db2adad17a975f124a3420f39e0b4a6853e48a", "committedDate": "2020-10-21T20:16:16Z", "message": "Don't add patron settings if obj type defaults are set"}, "afterCommit": {"oid": "f85f1e7cfceebb1fb47935ccc24421a58272baa4", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/f85f1e7cfceebb1fb47935ccc24421a58272baa4", "committedDate": "2020-10-21T20:31:56Z", "message": "Fix issue when only one role is returned"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MTk1NTk5", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#pullrequestreview-514195599", "createdAt": "2020-10-21T21:21:43Z", "commit": {"oid": "f85f1e7cfceebb1fb47935ccc24421a58272baa4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMToyMTo0M1rOHmGLEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQyMTozMDoyOFrOHmGnjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTcwOTA3Mg==", "bodyText": "you should do contentObj instanceof AdminUnit instead of retrieving the types and comparing them", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#discussion_r509709072", "createdAt": "2020-10-21T21:21:43Z", "author": {"login": "bbpennel"}, "path": "solr-ingest/src/main/java/edu/unc/lib/dl/data/ingest/solr/filter/SetAccessStatusFilter.java", "diffHunk": "@@ -105,13 +108,45 @@ public void setObjectAclFactory(ObjectAclFactory oaf) {\n             status.add(FacetConstants.PUBLIC_ACCESS);\n         }\n \n-        if (objPrincRoles.size() > 0) {\n+        if (addPatronSettings(dip.getContentObject())) {\n             status.add(FacetConstants.PATRON_SETTINGS);\n         }\n \n         return status;\n     }\n \n+    private boolean addPatronSettings(ContentObject contentObj) {\n+        List<String> objTypes = contentObj.getTypes();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f85f1e7cfceebb1fb47935ccc24421a58272baa4"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTcwOTk3MA==", "bodyText": "you can pass the contentObj in instead of rescType, then do contentObj instanceof CollectionObject. Might make sense at some point to add a method to ContentObject to getResourceType or something, which would return the ResourceType. But we probably don't need that here.", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#discussion_r509709970", "createdAt": "2020-10-21T21:22:51Z", "author": {"login": "bbpennel"}, "path": "solr-ingest/src/main/java/edu/unc/lib/dl/data/ingest/solr/filter/SetAccessStatusFilter.java", "diffHunk": "@@ -105,13 +108,45 @@ public void setObjectAclFactory(ObjectAclFactory oaf) {\n             status.add(FacetConstants.PUBLIC_ACCESS);\n         }\n \n-        if (objPrincRoles.size() > 0) {\n+        if (addPatronSettings(dip.getContentObject())) {\n             status.add(FacetConstants.PATRON_SETTINGS);\n         }\n \n         return status;\n     }\n \n+    private boolean addPatronSettings(ContentObject contentObj) {\n+        List<String> objTypes = contentObj.getTypes();\n+        ResourceType objType = ResourceType.getResourceTypeForUris(objTypes);\n+        if (objType == null || objType.equals(Cdr.AdminUnit.getURI())) {\n+            return false;\n+        }\n+\n+        return hasPatronSettings(contentObj.getPid(), objType);\n+    }\n+\n+    private boolean hasPatronSettings(PID pid, ResourceType rescType) {\n+        List<RoleAssignment> objPatronRoles = objAclFactory.getPatronRoleAssignments(pid);\n+        int numRoles = objPatronRoles.size();\n+        boolean isCollection = rescType.equals(Cdr.Collection.getLocalName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f85f1e7cfceebb1fb47935ccc24421a58272baa4"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTcxMjIwMg==", "bodyText": "I'd suggest giving the method a name that indicates that it is evaluating a condition rather than actually performing an addition. Maybe needsPatronSettingsStatus, or merge it with hasPatronSettings", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#discussion_r509712202", "createdAt": "2020-10-21T21:25:52Z", "author": {"login": "bbpennel"}, "path": "solr-ingest/src/main/java/edu/unc/lib/dl/data/ingest/solr/filter/SetAccessStatusFilter.java", "diffHunk": "@@ -105,13 +108,45 @@ public void setObjectAclFactory(ObjectAclFactory oaf) {\n             status.add(FacetConstants.PUBLIC_ACCESS);\n         }\n \n-        if (objPrincRoles.size() > 0) {\n+        if (addPatronSettings(dip.getContentObject())) {\n             status.add(FacetConstants.PATRON_SETTINGS);\n         }\n \n         return status;\n     }\n \n+    private boolean addPatronSettings(ContentObject contentObj) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f85f1e7cfceebb1fb47935ccc24421a58272baa4"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTcxMjU4NA==", "bodyText": "you can remove the inner parens", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#discussion_r509712584", "createdAt": "2020-10-21T21:26:16Z", "author": {"login": "bbpennel"}, "path": "solr-ingest/src/main/java/edu/unc/lib/dl/data/ingest/solr/filter/SetAccessStatusFilter.java", "diffHunk": "@@ -105,13 +108,45 @@ public void setObjectAclFactory(ObjectAclFactory oaf) {\n             status.add(FacetConstants.PUBLIC_ACCESS);\n         }\n \n-        if (objPrincRoles.size() > 0) {\n+        if (addPatronSettings(dip.getContentObject())) {\n             status.add(FacetConstants.PATRON_SETTINGS);\n         }\n \n         return status;\n     }\n \n+    private boolean addPatronSettings(ContentObject contentObj) {\n+        List<String> objTypes = contentObj.getTypes();\n+        ResourceType objType = ResourceType.getResourceTypeForUris(objTypes);\n+        if (objType == null || objType.equals(Cdr.AdminUnit.getURI())) {\n+            return false;\n+        }\n+\n+        return hasPatronSettings(contentObj.getPid(), objType);\n+    }\n+\n+    private boolean hasPatronSettings(PID pid, ResourceType rescType) {\n+        List<RoleAssignment> objPatronRoles = objAclFactory.getPatronRoleAssignments(pid);\n+        int numRoles = objPatronRoles.size();\n+        boolean isCollection = rescType.equals(Cdr.Collection.getLocalName());\n+\n+        if ((!isCollection && numRoles == 0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f85f1e7cfceebb1fb47935ccc24421a58272baa4"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTcxMzM1Mg==", "bodyText": "getURI() already returns a string", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#discussion_r509713352", "createdAt": "2020-10-21T21:27:08Z", "author": {"login": "bbpennel"}, "path": "solr-ingest/src/main/java/edu/unc/lib/dl/data/ingest/solr/filter/SetAccessStatusFilter.java", "diffHunk": "@@ -105,13 +108,45 @@ public void setObjectAclFactory(ObjectAclFactory oaf) {\n             status.add(FacetConstants.PUBLIC_ACCESS);\n         }\n \n-        if (objPrincRoles.size() > 0) {\n+        if (addPatronSettings(dip.getContentObject())) {\n             status.add(FacetConstants.PATRON_SETTINGS);\n         }\n \n         return status;\n     }\n \n+    private boolean addPatronSettings(ContentObject contentObj) {\n+        List<String> objTypes = contentObj.getTypes();\n+        ResourceType objType = ResourceType.getResourceTypeForUris(objTypes);\n+        if (objType == null || objType.equals(Cdr.AdminUnit.getURI())) {\n+            return false;\n+        }\n+\n+        return hasPatronSettings(contentObj.getPid(), objType);\n+    }\n+\n+    private boolean hasPatronSettings(PID pid, ResourceType rescType) {\n+        List<RoleAssignment> objPatronRoles = objAclFactory.getPatronRoleAssignments(pid);\n+        int numRoles = objPatronRoles.size();\n+        boolean isCollection = rescType.equals(Cdr.Collection.getLocalName());\n+\n+        if ((!isCollection && numRoles == 0)) {\n+            return false;\n+        } else if (isCollection && numRoles < 2) {\n+            return true;\n+        }\n+\n+        String canViewOrig = canViewOriginals.getURI().toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f85f1e7cfceebb1fb47935ccc24421a58272baa4"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTcxNjM2Ng==", "bodyText": "I'd suggest iterating through the list of roles and returning false if any of them aren't canViewOriginal. There will probably be more than 2 groups in the future, and should have the same affect.", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#discussion_r509716366", "createdAt": "2020-10-21T21:30:28Z", "author": {"login": "bbpennel"}, "path": "solr-ingest/src/main/java/edu/unc/lib/dl/data/ingest/solr/filter/SetAccessStatusFilter.java", "diffHunk": "@@ -105,13 +108,45 @@ public void setObjectAclFactory(ObjectAclFactory oaf) {\n             status.add(FacetConstants.PUBLIC_ACCESS);\n         }\n \n-        if (objPrincRoles.size() > 0) {\n+        if (addPatronSettings(dip.getContentObject())) {\n             status.add(FacetConstants.PATRON_SETTINGS);\n         }\n \n         return status;\n     }\n \n+    private boolean addPatronSettings(ContentObject contentObj) {\n+        List<String> objTypes = contentObj.getTypes();\n+        ResourceType objType = ResourceType.getResourceTypeForUris(objTypes);\n+        if (objType == null || objType.equals(Cdr.AdminUnit.getURI())) {\n+            return false;\n+        }\n+\n+        return hasPatronSettings(contentObj.getPid(), objType);\n+    }\n+\n+    private boolean hasPatronSettings(PID pid, ResourceType rescType) {\n+        List<RoleAssignment> objPatronRoles = objAclFactory.getPatronRoleAssignments(pid);\n+        int numRoles = objPatronRoles.size();\n+        boolean isCollection = rescType.equals(Cdr.Collection.getLocalName());\n+\n+        if ((!isCollection && numRoles == 0)) {\n+            return false;\n+        } else if (isCollection && numRoles < 2) {\n+            return true;\n+        }\n+\n+        String canViewOrig = canViewOriginals.getURI().toString();\n+        UserRole roleOne = objPatronRoles.get(0).getRole();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f85f1e7cfceebb1fb47935ccc24421a58272baa4"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b50dce62b1ed230176e4c693e6707f60dc12c85d", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/b50dce62b1ed230176e4c693e6707f60dc12c85d", "committedDate": "2020-10-22T13:55:44Z", "message": "* Combine patron setting check methods\n* Update tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0NzU5NzEw", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#pullrequestreview-514759710", "createdAt": "2020-10-22T14:00:47Z", "commit": {"oid": "b50dce62b1ed230176e4c693e6707f60dc12c85d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNDowMDo0N1rOHmjSSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNDowMDo0N1rOHmjSSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDE4NjA1Ng==", "bodyText": "canViewOriginals.getURI() should be sufficient since it returns a string", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#discussion_r510186056", "createdAt": "2020-10-22T14:00:47Z", "author": {"login": "bbpennel"}, "path": "solr-ingest/src/main/java/edu/unc/lib/dl/data/ingest/solr/filter/SetAccessStatusFilter.java", "diffHunk": "@@ -108,43 +108,35 @@ public void setObjectAclFactory(ObjectAclFactory oaf) {\n             status.add(FacetConstants.PUBLIC_ACCESS);\n         }\n \n-        if (addPatronSettings(dip.getContentObject())) {\n+        if (hasPatronSettings(dip.getContentObject())) {\n             status.add(FacetConstants.PATRON_SETTINGS);\n         }\n \n         return status;\n     }\n \n-    private boolean addPatronSettings(ContentObject contentObj) {\n-        List<String> objTypes = contentObj.getTypes();\n-        ResourceType objType = ResourceType.getResourceTypeForUris(objTypes);\n-        if (objType == null || objType.equals(Cdr.AdminUnit.getURI())) {\n+    private boolean hasPatronSettings(ContentObject contentObj) {\n+        if (contentObj instanceof AdminUnit) {\n             return false;\n         }\n \n-        return hasPatronSettings(contentObj.getPid(), objType);\n-    }\n-\n-    private boolean hasPatronSettings(PID pid, ResourceType rescType) {\n-        List<RoleAssignment> objPatronRoles = objAclFactory.getPatronRoleAssignments(pid);\n+        List<RoleAssignment> objPatronRoles = objAclFactory.getPatronRoleAssignments(contentObj.getPid());\n         int numRoles = objPatronRoles.size();\n-        boolean isCollection = rescType.equals(Cdr.Collection.getLocalName());\n+        boolean isCollection = contentObj instanceof CollectionObject;\n \n-        if ((!isCollection && numRoles == 0)) {\n+        if (!isCollection && numRoles == 0) {\n             return false;\n         } else if (isCollection && numRoles < 2) {\n             return true;\n         }\n \n-        String canViewOrig = canViewOriginals.getURI().toString();\n-        UserRole roleOne = objPatronRoles.get(0).getRole();\n-\n-        if (numRoles > 1) {\n-            UserRole roleTwo = objPatronRoles.get(1).getRole();\n-            return (!roleOne.equals(canViewOrig) || !roleTwo.equals(canViewOrig));\n+        for (RoleAssignment role : objPatronRoles) {\n+            if (!role.getRole().equals(canViewOriginals.getURI().toString())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b50dce62b1ed230176e4c693e6707f60dc12c85d"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e668ab1a29d5144ba392413732ef6b2454b0f94", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/2e668ab1a29d5144ba392413732ef6b2454b0f94", "committedDate": "2020-10-22T14:13:33Z", "message": "Update role check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0ODEzOTQ5", "url": "https://github.com/UNC-Libraries/box-c/pull/1103#pullrequestreview-514813949", "createdAt": "2020-10-22T14:49:50Z", "commit": {"oid": "2e668ab1a29d5144ba392413732ef6b2454b0f94"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2171, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}