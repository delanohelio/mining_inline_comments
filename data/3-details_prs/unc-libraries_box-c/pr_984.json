{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzNjA3Njcw", "number": 984, "title": "BXC-2647 - Fix move operation", "bodyText": "https://jira.lib.unc.edu/browse/BXC-2647\n\nFixes to move action in admin ui to fix error and cause refreshing/clearing of moved items\nRefactor of ContentPathFactory to pull parent info from fedora rather than triple store. Solr indexing after move operations was happening before the triple store was updated almost every time, resulting in needing to reindex objects for the move operation to appear complete.", "createdAt": "2020-05-05T16:02:02Z", "url": "https://github.com/UNC-Libraries/box-c/pull/984", "merged": true, "mergeCommit": {"oid": "70db652656e06d4755a1bf08d03b5b5a691b208e"}, "closed": true, "closedAt": "2020-05-08T12:03:35Z", "author": {"login": "bbpennel"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceUpemgH2gAyNDEzNjA3NjcwOmE3N2ZkMjFmYzQxZGUwMzM1MWI3NjQzMmQ4ZjI0MjFlNzViOTgxOTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfDzh4AH2gAyNDEzNjA3NjcwOmM4YmIxZjEzYjFhMDhhYjY3MTY3MGQyOGQ5M2QzNjA4ODAxODg4MjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a77fd21fc41de03351b76432d8f2421e75b98192", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/a77fd21fc41de03351b76432d8f2421e75b98192", "committedDate": "2020-05-05T14:07:13Z", "message": "Refactor ContentPathFactory to pull child to parent relations directly from fedora rather than waiting for the triple store to be updated to avoid timing issues which were preventing moves from indexing consistently."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c929a757cb42d973dbc3b1629b526e28b092db6a", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/c929a757cb42d973dbc3b1629b526e28b092db6a", "committedDate": "2020-05-05T15:52:38Z", "message": "Update move action, removing defunct moveMonitor reference and using the refresh action. Update refresh action to have a post update hook and overridable refresh message"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed6752d017a3437a83079403919b05eea3f8a456", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/ed6752d017a3437a83079403919b05eea3f8a456", "committedDate": "2020-05-05T16:43:59Z", "message": "Increase wait time"}, "afterCommit": {"oid": "3c2368a80025d09d2e8d4de4b875a2a4afc5561b", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/3c2368a80025d09d2e8d4de4b875a2a4afc5561b", "committedDate": "2020-05-05T18:41:15Z", "message": "Increase wait time"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c2368a80025d09d2e8d4de4b875a2a4afc5561b", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/3c2368a80025d09d2e8d4de4b875a2a4afc5561b", "committedDate": "2020-05-05T18:41:15Z", "message": "Increase wait time"}, "afterCommit": {"oid": "9308408a9912b00cde9ab5dae119c31246b3c394", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/9308408a9912b00cde9ab5dae119c31246b3c394", "committedDate": "2020-05-05T18:52:46Z", "message": "Increase wait time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "354e9e38b4ef7db2f5d9e95ba2d3d6dc0e1c4885", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/354e9e38b4ef7db2f5d9e95ba2d3d6dc0e1c4885", "committedDate": "2020-05-05T21:03:16Z", "message": "Increase wait time"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9308408a9912b00cde9ab5dae119c31246b3c394", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/9308408a9912b00cde9ab5dae119c31246b3c394", "committedDate": "2020-05-05T18:52:46Z", "message": "Increase wait time"}, "afterCommit": {"oid": "354e9e38b4ef7db2f5d9e95ba2d3d6dc0e1c4885", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/354e9e38b4ef7db2f5d9e95ba2d3d6dc0e1c4885", "committedDate": "2020-05-05T21:03:16Z", "message": "Increase wait time"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3ODAyMTg1", "url": "https://github.com/UNC-Libraries/box-c/pull/984#pullrequestreview-407802185", "createdAt": "2020-05-07T20:13:58Z", "commit": {"oid": "354e9e38b4ef7db2f5d9e95ba2d3d6dc0e1c4885"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMDoxMzo1OFrOGSOk1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMDoxMzo1OFrOGSOk1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc2NjM1Nw==", "bodyText": "Why has the time increased?", "url": "https://github.com/UNC-Libraries/box-c/pull/984#discussion_r421766357", "createdAt": "2020-05-07T20:13:58Z", "author": {"login": "lfarrell"}, "path": "services-camel/src/test/java/edu/unc/lib/dl/services/camel/solrUpdate/SolrUpdateProcessorIT.java", "diffHunk": "@@ -117,7 +117,7 @@ public void testReindexAcls() throws Exception {\n \n         processor.process(exchange);\n \n-        assertTrue(notify.matches(3l, TimeUnit.SECONDS));\n+        assertTrue(notify.matches(6l, TimeUnit.SECONDS));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "354e9e38b4ef7db2f5d9e95ba2d3d6dc0e1c4885"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3ODAzNTg5", "url": "https://github.com/UNC-Libraries/box-c/pull/984#pullrequestreview-407803589", "createdAt": "2020-05-07T20:16:08Z", "commit": {"oid": "354e9e38b4ef7db2f5d9e95ba2d3d6dc0e1c4885"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMDoxNjowOFrOGSOo9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMDoxNjowOFrOGSOo9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc2NzQxNQ==", "bodyText": "Arrow function syntax doesn't work in IE11, alas.", "url": "https://github.com/UNC-Libraries/box-c/pull/984#discussion_r421767415", "createdAt": "2020-05-07T20:16:08Z", "author": {"login": "lfarrell"}, "path": "static/js/admin/src/action/MoveObjectsAction.js", "diffHunk": "@@ -26,14 +28,25 @@ define('MoveObjectsAction', ['jquery'], function($) {\n \t\t\tcontentType: \"application/json; charset=utf-8\",\n \t\t\tdataType: \"json\",\n \t\t}).done(function(data) {\n-\t\t\taction.context.view.moveMonitor.addMove(data.id, moveData.moved, destTitle);\n-\t\t\t\n \t\t\taction.context.alertHandler.alertHandler(\"message\", \"Started moving \" + action.context.targets.length \n \t\t\t\t\t+ \" object\" + (action.context.targets.length > 1? \"s\" : \"\") \n \t\t\t\t\t+ \" to \" + destTitle);\n+\t\t\t\n+\t\t\taction.context.targets.forEach(moved => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "354e9e38b4ef7db2f5d9e95ba2d3d6dc0e1c4885"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8bb1f13b1a08ab671670d28d93d360880188823", "author": {"user": {"login": "bbpennel", "name": "Ben Pennell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/c8bb1f13b1a08ab671670d28d93d360880188823", "committedDate": "2020-05-07T21:03:44Z", "message": "Remove => to make ie happy"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2362, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}