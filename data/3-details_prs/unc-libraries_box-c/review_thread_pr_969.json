{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwODgzNTc3", "number": 969, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNjo0Mzo1NlrOD4H2pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNzoyMDoxNlrOD4Ipjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwMTc1NTI2OnYy", "diffSide": "RIGHT", "path": "Makefile", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNjo0Mzo1NlrOGOxnxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxODoxMjoyNVrOGO0ygg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE0NjI0Ng==", "bodyText": "Just checking, but is the case now that we don't need to change behaviors depending on the deploy type for the permissions editor js, but do still need to for the css?", "url": "https://github.com/UNC-Libraries/box-c/pull/969#discussion_r418146246", "createdAt": "2020-04-30T16:43:56Z", "author": {"login": "bbpennel"}, "path": "Makefile", "diffHunk": "@@ -14,18 +14,13 @@ endif\n \n \tcat /dev/null > static/js/vue-permissions.js\n \n-ifeq ($(DEPLOY_TYPE), prod)\n-\tcat static/js/admin/vue-permissions-editor/dist/js/chunk-vendors*.js > static/js/vue-permissions.js\n-endif\n+\tcat static/js/admin/vue-permissions-editor/dist/js/chunk-vendors*js > static/js/vue-permissions.js\n+\n \n \t# Add new line so app*.js doesn't get commented out\n \techo >> static/js/vue-permissions.js\n \n-ifeq ($(DEPLOY_TYPE), prod)\n-\tcat static/js/admin/vue-permissions-editor/dist/js/app*.js >> static/js/vue-permissions.js\n-else\n-\tcat static/js/admin/vue-permissions-editor/dist/app.js >> static/js/vue-permissions.js\n-endif\n+\tcat static/js/admin/vue-permissions-editor/dist/js/app*js >> static/js/vue-permissions.js", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ead054709c84446be4ad78f5aaa5cea1ed5f656c"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE5ODE0Ng==", "bodyText": "Correct, the JS files should be the same now across deployment types. In the dev build the css still get bundled into the JS files.", "url": "https://github.com/UNC-Libraries/box-c/pull/969#discussion_r418198146", "createdAt": "2020-04-30T18:12:25Z", "author": {"login": "lfarrell"}, "path": "Makefile", "diffHunk": "@@ -14,18 +14,13 @@ endif\n \n \tcat /dev/null > static/js/vue-permissions.js\n \n-ifeq ($(DEPLOY_TYPE), prod)\n-\tcat static/js/admin/vue-permissions-editor/dist/js/chunk-vendors*.js > static/js/vue-permissions.js\n-endif\n+\tcat static/js/admin/vue-permissions-editor/dist/js/chunk-vendors*js > static/js/vue-permissions.js\n+\n \n \t# Add new line so app*.js doesn't get commented out\n \techo >> static/js/vue-permissions.js\n \n-ifeq ($(DEPLOY_TYPE), prod)\n-\tcat static/js/admin/vue-permissions-editor/dist/js/app*.js >> static/js/vue-permissions.js\n-else\n-\tcat static/js/admin/vue-permissions-editor/dist/app.js >> static/js/vue-permissions.js\n-endif\n+\tcat static/js/admin/vue-permissions-editor/dist/js/app*js >> static/js/vue-permissions.js", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE0NjI0Ng=="}, "originalCommit": {"oid": "ead054709c84446be4ad78f5aaa5cea1ed5f656c"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwMTgzODExOnYy", "diffSide": "RIGHT", "path": "static/js/vue-cdr-access/src/components/browseSearch.vue", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNzowNzoyMlrOGOydUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxODoxNzoxM1rOGO09PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE1OTk1Mg==", "bodyText": "what triggers NavigationDuplicated errors? Something like clicking twice on a link?", "url": "https://github.com/UNC-Libraries/box-c/pull/969#discussion_r418159952", "createdAt": "2020-04-30T17:07:22Z", "author": {"login": "bbpennel"}, "path": "static/js/vue-cdr-access/src/components/browseSearch.vue", "diffHunk": "@@ -41,7 +41,12 @@\n         methods: {\n             getResults() {\n                 let update_params = { anywhere: encodeURIComponent(this.search_query) };\n-                this.$router.push({ name: 'displayRecords', query: this.urlParams(update_params) });\n+                this.$router.push({ name: 'displayRecords', query: this.urlParams(update_params) })\n+                    .catch((e) => {\n+                        if (e.name !== 'NavigationDuplicated') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ead054709c84446be4ad78f5aaa5cea1ed5f656c"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIwMDg5Mw==", "bodyText": "I think that or trying to redirect to the same url you're at. If I read the ticket mentioned in the commit correctly, it shouldn't give this error if you update parameters. It's possible that doesn't include parameters's specified via the ?. It might only refer to params in the route, like :uuid in our case. Not catching the error doesn't break anything, but it does throw a bunch of warnings in the tests.", "url": "https://github.com/UNC-Libraries/box-c/pull/969#discussion_r418200893", "createdAt": "2020-04-30T18:17:13Z", "author": {"login": "lfarrell"}, "path": "static/js/vue-cdr-access/src/components/browseSearch.vue", "diffHunk": "@@ -41,7 +41,12 @@\n         methods: {\n             getResults() {\n                 let update_params = { anywhere: encodeURIComponent(this.search_query) };\n-                this.$router.push({ name: 'displayRecords', query: this.urlParams(update_params) });\n+                this.$router.push({ name: 'displayRecords', query: this.urlParams(update_params) })\n+                    .catch((e) => {\n+                        if (e.name !== 'NavigationDuplicated') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE1OTk1Mg=="}, "originalCommit": {"oid": "ead054709c84446be4ad78f5aaa5cea1ed5f656c"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwMTg4NTU5OnYy", "diffSide": "RIGHT", "path": "static/js/vue-cdr-access/tests/unit/modalMetadata.spec.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNzoyMDoxNlrOGOy7Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxODoxNDoyNVrOGO028A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE2NzYwNg==", "bodyText": "Real dean is getting prettified!", "url": "https://github.com/UNC-Libraries/box-c/pull/969#discussion_r418167606", "createdAt": "2020-04-30T17:20:16Z", "author": {"login": "bbpennel"}, "path": "static/js/vue-cdr-access/tests/unit/modalMetadata.spec.js", "diffHunk": "@@ -9,7 +10,7 @@ localVue.use(VueRouter);\n \n const updated_uuid = 'c03a4bd7-25f4-4a6c-a68d-fedc4251b680';\n const title = 'Test Collection';\n-const response = `<table><tbody><tr><th>Creator</th> <td><p>Real Dean</p></td></tr></tbody></table>`;\n+const response = pretty(`<table><tbody><tr><th>Creator</th><td><p>Real Dean</p></td></tr></tbody></table>`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ead054709c84446be4ad78f5aaa5cea1ed5f656c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE5OTI4MA==", "bodyText": "Yeah, vue test utils changed how they return HTML. It used to have no spaces, but they switched to formatting the HTML with the pretty package before returning it.", "url": "https://github.com/UNC-Libraries/box-c/pull/969#discussion_r418199280", "createdAt": "2020-04-30T18:14:25Z", "author": {"login": "lfarrell"}, "path": "static/js/vue-cdr-access/tests/unit/modalMetadata.spec.js", "diffHunk": "@@ -9,7 +10,7 @@ localVue.use(VueRouter);\n \n const updated_uuid = 'c03a4bd7-25f4-4a6c-a68d-fedc4251b680';\n const title = 'Test Collection';\n-const response = `<table><tbody><tr><th>Creator</th> <td><p>Real Dean</p></td></tr></tbody></table>`;\n+const response = pretty(`<table><tbody><tr><th>Creator</th><td><p>Real Dean</p></td></tr></tbody></table>`);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE2NzYwNg=="}, "originalCommit": {"oid": "ead054709c84446be4ad78f5aaa5cea1ed5f656c"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 771, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}