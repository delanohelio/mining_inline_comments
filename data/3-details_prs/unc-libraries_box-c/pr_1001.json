{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MTMwNzk1", "number": 1001, "title": "Make sure id is lowercase for migrations.", "bodyText": "", "createdAt": "2020-05-29T14:13:34Z", "url": "https://github.com/UNC-Libraries/box-c/pull/1001", "merged": true, "mergeCommit": {"oid": "44b58360acad8e397d902c9aa060ce6776c2e33b"}, "closed": true, "closedAt": "2020-06-08T17:43:07Z", "author": {"login": "lfarrell"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmC-dNAH2gAyNDI1MTMwNzk1OmQ3ZGI4MDllNmRmNTQ5NDk0NjIwNDAwYzcwN2M3ZjFkZjY0ZjZiMzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpUEnNgFqTQyNjQ2OTYxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d7db809e6df549494620400c707c7f1df64f6b31", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/d7db809e6df549494620400c707c7f1df64f6b31", "committedDate": "2020-05-29T14:03:14Z", "message": "Make sure id is lowercase."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dd0c0ad72f7f2f7e02af14e6953e99692ca4c4b", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/5dd0c0ad72f7f2f7e02af14e6953e99692ca4c4b", "committedDate": "2020-05-29T14:52:40Z", "message": "Add test for uppercase uuids"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "180d9d277c334d19f9abf4b6035cc9f0f14dc7d5", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/180d9d277c334d19f9abf4b6035cc9f0f14dc7d5", "committedDate": "2020-05-29T18:20:28Z", "message": "Allow uppercase UUIDs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb1ea7690263a85b819cb12b6b8dee9f00409f1e", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/fb1ea7690263a85b819cb12b6b8dee9f00409f1e", "committedDate": "2020-06-01T14:33:26Z", "message": "Transform bxc3 pids to lowercase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxOTIxNDM2", "url": "https://github.com/UNC-Libraries/box-c/pull/1001#pullrequestreview-421921436", "createdAt": "2020-06-01T15:06:51Z", "commit": {"oid": "fb1ea7690263a85b819cb12b6b8dee9f00409f1e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNTowNjo1MVrOGdN96Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNToxMDowMlrOGdOFHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI5MDcyOQ==", "bodyText": "this line can be removed", "url": "https://github.com/UNC-Libraries/box-c/pull/1001#discussion_r433290729", "createdAt": "2020-06-01T15:06:51Z", "author": {"login": "bbpennel"}, "path": "migration-util/src/main/java/edu/unc/lib/dcr/migration/deposit/DepositRecordTransformer.java", "diffHunk": "@@ -152,6 +153,7 @@ protected void compute() {\n     }\n \n     private boolean isDepositRecord(Resource bxc3Resc) {\n+        PIDs.get(bxc3Resc.toString().toLowerCase());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb1ea7690263a85b819cb12b6b8dee9f00409f1e"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI5MTEzNg==", "bodyText": "The behavior of this method is very specific to RELS-EXT now, so it should probably be renamed to convertRelsExtToStream", "url": "https://github.com/UNC-Libraries/box-c/pull/1001#discussion_r433291136", "createdAt": "2020-06-01T15:07:33Z", "author": {"login": "bbpennel"}, "path": "migration-util/src/main/java/edu/unc/lib/dcr/migration/fcrepo3/FoxmlDocumentHelpers.java", "diffHunk": "@@ -130,7 +131,25 @@ public static String getFoxmlPid(Document foxml) {\n     public static InputStream convertElementToStream(Element el) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb1ea7690263a85b819cb12b6b8dee9f00409f1e"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI5MjU3Mg==", "bodyText": "For the sake of consistency, use getId() instead of getUUID(), since you are doing that for the other lowercase calls.", "url": "https://github.com/UNC-Libraries/box-c/pull/1001#discussion_r433292572", "createdAt": "2020-06-01T15:10:02Z", "author": {"login": "bbpennel"}, "path": "migration-util/src/main/java/edu/unc/lib/dcr/migration/deposit/DepositRecordTransformationService.java", "diffHunk": "@@ -75,7 +75,8 @@ public int perform(Path pidListPath, String destLocId) {\n     }\n \n     public PID getTransformedPid(PID originalPid) {\n-        return generateIds ? pidMinter.mintDepositRecordPid() : originalPid;\n+        return generateIds ? pidMinter.mintDepositRecordPid() : PIDs.get(DEPOSIT_RECORD_BASE,\n+                originalPid.getUUID().toLowerCase());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb1ea7690263a85b819cb12b6b8dee9f00409f1e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d89b02944912c54956612546b944f3559c53aa45", "author": {"user": {"login": "lfarrell", "name": "Dean Farrell"}}, "url": "https://github.com/UNC-Libraries/box-c/commit/d89b02944912c54956612546b944f3559c53aa45", "committedDate": "2020-06-08T12:52:32Z", "message": "Rename methods and remove redundant code lines"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NDY5NjE0", "url": "https://github.com/UNC-Libraries/box-c/pull/1001#pullrequestreview-426469614", "createdAt": "2020-06-08T17:40:07Z", "commit": {"oid": "d89b02944912c54956612546b944f3559c53aa45"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2208, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}