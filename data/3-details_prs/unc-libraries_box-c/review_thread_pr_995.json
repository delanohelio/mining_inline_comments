{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNzgyNDc3", "number": 995, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxOTozNjoyNlrOD_DaDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxOTozNjoyNlrOD_DaDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NDQyNzAzOnYy", "diffSide": "RIGHT", "path": "static/js/admin/src/AbstractFileUploadForm.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxOTozNjoyNlrOGZh7hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxOTozNjoyNlrOGZh7hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQyMzQ5Mg==", "bodyText": "this message doesn't match the size elsewhere", "url": "https://github.com/UNC-Libraries/box-c/pull/995#discussion_r429423492", "createdAt": "2020-05-22T19:36:26Z", "author": {"login": "bbpennel"}, "path": "static/js/admin/src/AbstractFileUploadForm.js", "diffHunk": "@@ -24,20 +24,29 @@ define('AbstractFileUploadForm', [ 'jquery', 'jquery-ui', 'underscore', 'Abstrac\n \tAbstractFileUploadForm.prototype.open = function(resultObject) {\n \t\tvar dialogBox = new ModalCreate(this.options);\n \t\tvar formContents = dialogBox.formContents(resultObject);\n+\t\tvar errors = [];\n+\t\tvar maxFileSize = 1610612736; // 1.5gb\n \t\tvar self = this;\n \t\tthis.closed = false;\n \t\t\n \t\tthis.dialog = $(\"<div class='containingDialog'>\" + formContents + \"</div>\");\n \t\tthis.$form = this.dialog.first();\n \t\tthis.dialog.dialog = dialogBox.modalDialog(this.dialog, self);\n \t\t\n-\t\t$(\"input[type='file']\", this.$form).change(function(){\n+\t\t$(\"input[type='file']\", this.$form).change(function() {\n+\t\t\terrors = []; // reset errors on change\n \t\t\tself.ingestFile = this.files[0];\n \t\t\tif (self.ingestFile) {\n+\t\t\t\tvar fileSize = self.ingestFile.size\n+\n+\t\t\t\tif (fileSize > maxFileSize) {\n+\t\t\t\t\terrors.push(\"The uploaded file is too large. The maximum allowed file size is: 500mb\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33b362c335f55a66b5a150c3fcb1c826a973ae7b"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 797, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}