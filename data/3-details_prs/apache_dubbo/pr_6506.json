{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NDIxMDM1", "number": 6506, "title": "[optimization] optimise export logic for RegistryProtocol and polish related code", "bodyText": "What is the purpose of the change\noptimise export logic for RegistryProtocol and polish related code\nBrief changelog\nRegistryProtocol.java\nCommonConstants.java\nStringUtils.java\nDubboBeanDefinitionParser.java\nRegistryProtocol.java\nVerifying this change\nThe RegistryProtocol's implementation may be adjusted many times by different person, some logic is redundant\u3002For example\uff0cin export method, Registry object is repeatedly acquired\uff0cAlthough It is guaranteed not to be repeatedly generated by AbstractRegistryFactory , but It is really a bit inelegant.\nIn addition to the above adjustments, Some abbreviation have been corrected\uff08e.g. Configed to Configured\uff09,Some variable name have been adjusted\uff08e.g. HIDE_KEY_PREFIX to  HIDDEN_KEY_PREFIX\uff09.", "createdAt": "2020-07-23T00:34:05Z", "url": "https://github.com/apache/dubbo/pull/6506", "merged": true, "mergeCommit": {"oid": "283c079786716d9dd571ad0d99fc9ad50f44f010"}, "closed": true, "closedAt": "2021-03-28T07:54:29Z", "author": {"login": "yiocio"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3j9MXAH2gAyNDU1NDIxMDM1OmFjZGFjNDdkOTBlYTU5ZTMzNmY1MmI1ZDAzZTYxNWU1ZWEwY2NkZTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeHfTcOgFqTYyMjcyOTM1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "acdac47d90ea59e336f52b5d03e615e5ea0ccde9", "author": {"user": null}, "url": "https://github.com/apache/dubbo/commit/acdac47d90ea59e336f52b5d03e615e5ea0ccde9", "committedDate": "2020-07-23T00:05:26Z", "message": "refactor RegistryProtocol in slight and fix-up some word spelling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84944e50b341d4a08f4af9fd4509c4812e0f285c", "author": {"user": {"login": "yiocio", "name": "yuancong"}}, "url": "https://github.com/apache/dubbo/commit/84944e50b341d4a08f4af9fd4509c4812e0f285c", "committedDate": "2021-03-16T01:29:50Z", "message": "Merge pull request #1 from apache/master\n\nsync the latest dubbo source code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5d955ff6e84f8d6eca38a3940cd86cece9d1f39", "author": {"user": {"login": "yiocio", "name": "yuancong"}}, "url": "https://github.com/apache/dubbo/commit/d5d955ff6e84f8d6eca38a3940cd86cece9d1f39", "committedDate": "2021-03-16T03:48:50Z", "message": "Merge branch 'master' into refactor-registry-protocol\n\n# Conflicts:\n#\tdubbo-registry/dubbo-registry-api/src/main/java/org/apache/dubbo/registry/integration/RegistryProtocol.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be717ea5bb58f0ec713fcb4923daa3fc5e2c4d7c", "author": {"user": {"login": "yiocio", "name": "yuancong"}}, "url": "https://github.com/apache/dubbo/commit/be717ea5bb58f0ec713fcb4923daa3fc5e2c4d7c", "committedDate": "2021-03-16T04:02:49Z", "message": "reslove confilcts with the latest master branch."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3822e42ae15d8330628ea6687f4538ff0d484002", "author": {"user": {"login": "yiocio", "name": "yuancong"}}, "url": "https://github.com/apache/dubbo/commit/3822e42ae15d8330628ea6687f4538ff0d484002", "committedDate": "2021-03-19T15:40:41Z", "message": "normalize comment format for RegistryProtocol"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE3MDg4OTc2", "url": "https://github.com/apache/dubbo/pull/6506#pullrequestreview-617088976", "createdAt": "2021-03-22T01:01:28Z", "commit": {"oid": "3822e42ae15d8330628ea6687f4538ff0d484002"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yMlQwMTowMToyOFrOI6pnvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0yMlQwMTowMToyOFrOI6pnvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODM3MDIzNw==", "bodyText": "Could you please describe why you change this line", "url": "https://github.com/apache/dubbo/pull/6506#discussion_r598370237", "createdAt": "2021-03-22T01:01:28Z", "author": {"login": "AlbumenJ"}, "path": "dubbo-registry/dubbo-registry-api/src/main/java/org/apache/dubbo/registry/integration/RegistryProtocol.java", "diffHunk": "@@ -214,7 +215,7 @@ private void registerStatedUrl(URL registryUrl, URL registeredProviderUrl, boole\n         // decide if we need to delay publish\n         boolean register = providerUrl.getParameter(REGISTER_KEY, true);\n         if (register) {\n-            register(registryUrl, registeredProviderUrl);\n+            registry.register(registeredProviderUrl);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3822e42ae15d8330628ea6687f4538ff0d484002"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "393f4f7dea219bf2d04fece08e88557e4254fd84", "author": {"user": {"login": "yiocio", "name": "yuancong"}}, "url": "https://github.com/apache/dubbo/commit/393f4f7dea219bf2d04fece08e88557e4254fd84", "committedDate": "2021-03-26T00:37:57Z", "message": "remove the private register method for RegistryProtocol"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjIyNzI5MzUz", "url": "https://github.com/apache/dubbo/pull/6506#pullrequestreview-622729353", "createdAt": "2021-03-28T07:54:09Z", "commit": {"oid": "393f4f7dea219bf2d04fece08e88557e4254fd84"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2080, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}