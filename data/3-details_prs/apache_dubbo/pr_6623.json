{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5NDk3MTA3", "number": 6623, "title": "Feat: add life cycle probe in dubbo-qos", "bodyText": "What is the purpose of the change\n\nadd livenessProbe, readinessProbe, startupProbe SPIs in dubbo-qos\nadd Bootstarp impl for readinessProbe, startupProbe\nadd provider register check for readinessProbe", "createdAt": "2020-08-18T13:25:26Z", "url": "https://github.com/apache/dubbo/pull/6623", "merged": true, "mergeCommit": {"oid": "8315042be517243ee72941f771fd219c6ffc9c19"}, "closed": true, "closedAt": "2020-08-31T16:05:22Z", "author": {"login": "AlbumenJ"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9i-JdgH2gAyNDY5NDk3MTA3OjFlYjczNDM5MzIzMjRkOTU4ZGE2OWQ2MDFlMzYyMWUxMDBmY2Y5Zjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdC8muQgH2gAyNDY5NDk3MTA3OmY3ZmViZmY5ZWNjMzIyZDViMDk2NTZjNmE2MGE4MDI4NzhmN2Y1YWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1eb7343932324d958da69d601e3621e100fcf9f9", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/1eb7343932324d958da69d601e3621e100fcf9f9", "committedDate": "2020-08-10T14:20:07Z", "message": "feat: add port modification of MetadataService, add ServiceIntance Metadata fetch interface to MetadataService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6c892c89f238618f24793cee106c0453d0be3ca", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/b6c892c89f238618f24793cee106c0453d0be3ca", "committedDate": "2020-08-10T14:24:27Z", "message": "fix: remove unnecessary wrap"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4173a769b7ff43f9bf71bb71d656ea15a2f523a1", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/4173a769b7ff43f9bf71bb71d656ea15a2f523a1", "committedDate": "2020-08-10T14:44:36Z", "message": "style: pretty warn message when port not specified in consumer side"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa222a2f85f1dce3f4d1aa1b35be293298da8f5c", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/fa222a2f85f1dce3f4d1aa1b35be293298da8f5c", "committedDate": "2020-08-12T08:44:09Z", "message": "fix: remove reconnect method of MetadataService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2cf3508271fdc260b293fe5f15600bd6835c2af", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/b2cf3508271fdc260b293fe5f15600bd6835c2af", "committedDate": "2020-08-12T11:03:37Z", "message": "fix: add SUBSCRIBED_SERVICE_NAMES_KEY support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee1e58a97f2e3e041bb21f867678d32229af059d", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/ee1e58a97f2e3e041bb21f867678d32229af059d", "committedDate": "2020-08-13T06:26:43Z", "message": "feat: add http code support for qos-http"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71aaee01002a81916937e5afdd42ec9f2131acbb", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/71aaee01002a81916937e5afdd42ec9f2131acbb", "committedDate": "2020-08-13T06:27:15Z", "message": "feat: modify ready to startup indicate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0b700e447bd2f1eb2fa52b5b58f3ddea777102a", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/e0b700e447bd2f1eb2fa52b5b58f3ddea777102a", "committedDate": "2020-08-13T06:27:25Z", "message": "Merge branch '3.0-k8s' into 3.0-k8sprobe"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f27c56a1e566da2dbcafbd2a120496c5dea32e8", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/8f27c56a1e566da2dbcafbd2a120496c5dea32e8", "committedDate": "2020-08-18T12:27:49Z", "message": "Merge branch '3.0-k8s' into 3.0-k8sprobe"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8137b0cbeef88107072442a0eefc84954155c5ef", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/8137b0cbeef88107072442a0eefc84954155c5ef", "committedDate": "2020-08-18T12:58:27Z", "message": "feat: introduce k8s probe"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91d67b7cfc7f75982a3f0b5a3c554daa4635b10a", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/91d67b7cfc7f75982a3f0b5a3c554daa4635b10a", "committedDate": "2020-08-18T13:21:05Z", "message": "feat: polish comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89695573b00e74f6b6d9c5ba7329d400b133e85f", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/89695573b00e74f6b6d9c5ba7329d400b133e85f", "committedDate": "2020-08-21T13:56:46Z", "message": "fix: spi file error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f28b6b08885e8a580aeaa192173a40e39d04382", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/8f28b6b08885e8a580aeaa192173a40e39d04382", "committedDate": "2020-08-21T14:04:49Z", "message": "fix: spi file error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NDQ4MDEy", "url": "https://github.com/apache/dubbo/pull/6623#pullrequestreview-476448012", "createdAt": "2020-08-27T07:18:49Z", "commit": {"oid": "8f28b6b08885e8a580aeaa192173a40e39d04382"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwNzoxODo1MFrOHIDgqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwNzoxODo1MFrOHIDgqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODIwODE2OQ==", "bodyText": "I didn't find the definition of this class.", "url": "https://github.com/apache/dubbo/pull/6623#discussion_r478208169", "createdAt": "2020-08-27T07:18:50Z", "author": {"login": "chickenlj"}, "path": "dubbo-plugin/dubbo-qos/src/main/resources/META-INF/dubbo/internal/org.apache.dubbo.qos.probe.ReadinessProbe", "diffHunk": "@@ -0,0 +1,2 @@\n+bootstrap = org.apache.dubbo.qos.probe.impl.BootstrapReadinessProbe", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f28b6b08885e8a580aeaa192173a40e39d04382"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NDQ4Njc0", "url": "https://github.com/apache/dubbo/pull/6623#pullrequestreview-476448674", "createdAt": "2020-08-27T07:19:54Z", "commit": {"oid": "8f28b6b08885e8a580aeaa192173a40e39d04382"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwNzoxOTo1NFrOHIDiyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwNzoxOTo1NFrOHIDiyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODIwODcxNQ==", "bodyText": "I think checking whether ServiceInstance has been registered would be enough.", "url": "https://github.com/apache/dubbo/pull/6623#discussion_r478208715", "createdAt": "2020-08-27T07:19:54Z", "author": {"login": "chickenlj"}, "path": "dubbo-plugin/dubbo-qos/src/main/java/org/apache/dubbo/qos/probe/impl/ProviderReadinessProbe.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.dubbo.qos.probe.impl;\n+\n+import org.apache.dubbo.qos.probe.ReadinessProbe;\n+import org.apache.dubbo.rpc.model.ApplicationModel;\n+import org.apache.dubbo.rpc.model.ProviderModel;\n+import org.apache.dubbo.rpc.model.ServiceRepository;\n+\n+import java.util.Collection;\n+import java.util.List;\n+\n+public class ProviderReadinessProbe implements ReadinessProbe {\n+    private static ServiceRepository serviceRepository = ApplicationModel.getServiceRepository();\n+\n+    @Override\n+    public boolean check() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f28b6b08885e8a580aeaa192173a40e39d04382"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c1c6810b905446ceb9d96e89ec838e1d3092a94", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/0c1c6810b905446ceb9d96e89ec838e1d3092a94", "committedDate": "2020-08-27T07:57:14Z", "message": "fix: add activate extension support, fix name error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7febff9ecc322d5b09656c6a60a802878f7f5ab", "author": {"user": {"login": "AlbumenJ", "name": "Albumen Kevin"}}, "url": "https://github.com/apache/dubbo/commit/f7febff9ecc322d5b09656c6a60a802878f7f5ab", "committedDate": "2020-08-27T09:01:41Z", "message": "fix: add activate extension support"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2260, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}