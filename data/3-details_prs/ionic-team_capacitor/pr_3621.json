{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MzkxNjE1", "number": 3621, "title": "Permissions improvements", "bodyText": "Changes:\n\nIntroduces new @CapacitorPlugin annotation to replace @NativePlugin that allows a developer to pick an alias for a permission. Aliases are optional (otherwise you have to use the raw Android permission string). Aliases can be the same for two different permissions, for example: Manifest.permission.ACCESS_COARSE_LOCATION and Manifest.permission.ACCESS_FINE_LOCATION can be given an alias \"location\". All permissions mapped to a single alias must be granted for the helper methods to report back a fully granted state. If one is false, all are considered false. If this is not desirable, then multiple aliases are probably more suited for the use case.\nBackwards compatible with @NativePlugin\nPlugins should define their own constants for request and permission codes, and not use constants from within core (removed).\ncheckPermissions and requestPermissions are available on the parent Plugin class to fit the standard request plan. requestPermissions existed before in Android and needs to be extended by the Plugin and return the payload. A new helper called getPermissionStates  will get a snapshot of the current permission states for easy returning by the plugin developer, example:\nCapacitor now caches the Android permission state for \"denied\" when it is detected that the user denied a permission and selected \"Never ask again\".\n\n@Override\n    protected void handleRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n        super.handleRequestPermissionsResult(requestCode, permissions, grantResults);\n\n        // .. some custom logic\n        \n        savedCall.resolve(getPermissionStates());\n        savedCall.release(bridge);\n    }", "createdAt": "2020-09-28T20:44:42Z", "url": "https://github.com/ionic-team/capacitor/pull/3621", "merged": true, "mergeCommit": {"oid": "eec61a6d8d8edfe94aea1a361787d1e6c736e20d"}, "closed": true, "closedAt": "2020-10-30T18:06:47Z", "author": {"login": "carlpoole"}, "timelineItems": {"totalCount": 75, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-mZgFAH2gAyNDk0MzkxNjE1OjMyMDNmMGExY2MxMzJmYzg5OTllNmZkOWNkYjQzODhjZmM1MDlhNmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXquIxAFqTUyMDkxNjc4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3203f0a1cc132fc8999e6fd9cdb4388cfc509a6b", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/3203f0a1cc132fc8999e6fd9cdb4388cfc509a6b", "committedDate": "2020-08-13T20:53:38Z", "message": "Removed android"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d675b812f0dd5eaf61359134aec8a5a9b037fc4e", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/d675b812f0dd5eaf61359134aec8a5a9b037fc4e", "committedDate": "2020-08-24T19:59:43Z", "message": "Merged in main"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b551235bc732e5d0975af3603f11584d5397570f", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/b551235bc732e5d0975af3603f11584d5397570f", "committedDate": "2020-08-24T22:29:32Z", "message": "Removed more"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45b246cb8dfd6773e0ac47faf688e5184f25ae44", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/45b246cb8dfd6773e0ac47faf688e5184f25ae44", "committedDate": "2020-08-25T18:32:26Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ba5cd846eafcc14a76fbae51d88d913195b5606", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/0ba5cd846eafcc14a76fbae51d88d913195b5606", "committedDate": "2020-09-08T20:54:58Z", "message": "Added registration mechanism for a geolocation plugin to hook on to permission requst from browser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b1503894dc3ab4a706afaf6d7feb9277161d64b", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/8b1503894dc3ab4a706afaf6d7feb9277161d64b", "committedDate": "2020-09-08T20:55:25Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "befcd420e2a83ee6d831eb41b279a53e0b6a481c", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/befcd420e2a83ee6d831eb41b279a53e0b6a481c", "committedDate": "2020-09-08T21:09:26Z", "message": "import cleanup/fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "813288c13d34c42dfa96e717cbd0fbc53453d16c", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/813288c13d34c42dfa96e717cbd0fbc53453d16c", "committedDate": "2020-09-08T21:09:44Z", "message": "prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b4ad70099f27dd2449173cbc01381ff1221dcb4", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/6b4ad70099f27dd2449173cbc01381ff1221dcb4", "committedDate": "2020-09-08T21:10:01Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "550356795c2f2e22428288fee35a549da516c571", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/550356795c2f2e22428288fee35a549da516c571", "committedDate": "2020-09-10T17:53:30Z", "message": "Changed to use an interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "082e1a04884b13025aa3b435a3333677ff72faab", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/082e1a04884b13025aa3b435a3333677ff72faab", "committedDate": "2020-09-10T17:59:06Z", "message": "mistaken removal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1c8816c338ed52646466b4573fd803f36293c51", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/b1c8816c338ed52646466b4573fd803f36293c51", "committedDate": "2020-09-10T18:17:13Z", "message": "add method on Plugin class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c51d78526002d170ba95d23d98dcef50a9ded98", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/0c51d78526002d170ba95d23d98dcef50a9ded98", "committedDate": "2020-09-17T20:48:55Z", "message": "Exploring permissions changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "563f59a382bea92e2c7cb0edae903f2180080402", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/563f59a382bea92e2c7cb0edae903f2180080402", "committedDate": "2020-09-17T20:51:06Z", "message": "Cleanup from some different work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55b8add1960e5db9c6363278a269e00081f3ad48", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/55b8add1960e5db9c6363278a269e00081f3ad48", "committedDate": "2020-09-17T21:07:02Z", "message": "Registration with new annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a47531b7397f21eab37ce3335466bbe69f2be34c", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/a47531b7397f21eab37ce3335466bbe69f2be34c", "committedDate": "2020-09-17T22:42:10Z", "message": "Changed back handleRequestPermissionsResult method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c88e9a20bf9b5ead5e8ca43abca97470d6872733", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/c88e9a20bf9b5ead5e8ca43abca97470d6872733", "committedDate": "2020-09-17T22:53:09Z", "message": "New helper with checkPermissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a44cb2ea27656742ae0ce3922cd76efae5e3aa1", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/2a44cb2ea27656742ae0ce3922cd76efae5e3aa1", "committedDate": "2020-09-18T21:16:10Z", "message": "rename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a30defdd10122577b0ae4bba7dcce7bf61a4a310", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/a30defdd10122577b0ae4bba7dcce7bf61a4a310", "committedDate": "2020-09-23T21:39:21Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14593727040c7f1d5727c3d17748598807813735", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/14593727040c7f1d5727c3d17748598807813735", "committedDate": "2020-09-23T21:48:27Z", "message": "undoing permission work so it can be handled in core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d7b444c73539b5a57a1d7449e96bd630bb35300", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/5d7b444c73539b5a57a1d7449e96bd630bb35300", "committedDate": "2020-09-23T21:59:49Z", "message": "Added new methods for checking permissions in the WebChromeClient"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3db9216ca273e44a831e9d153375b3db14e89468", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/3db9216ca273e44a831e9d153375b3db14e89468", "committedDate": "2020-09-23T22:02:54Z", "message": "putting this back..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ce95e78a7bff4884fe942c719568cabafd1f7a6", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/0ce95e78a7bff4884fe942c719568cabafd1f7a6", "committedDate": "2020-09-23T22:25:17Z", "message": "Replacing removed import statements that were necessary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66cae3fffa3f00492b7695b7c4ff4919fc6e2a58", "author": {"user": {"login": "jcesarmobile", "name": "jcesarmobile"}}, "url": "https://github.com/ionic-team/capacitor/commit/66cae3fffa3f00492b7695b7c4ff4919fc6e2a58", "committedDate": "2020-09-24T12:17:34Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2aa0d43db2c248bc2d5ba16a24d64f1c3593f7aa", "author": {"user": {"login": "jcesarmobile", "name": "jcesarmobile"}}, "url": "https://github.com/ionic-team/capacitor/commit/2aa0d43db2c248bc2d5ba16a24d64f1c3593f7aa", "committedDate": "2020-09-24T12:30:48Z", "message": "fmt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f3cf572b3867c3b89b4f4327aec70092c0346ff", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/6f3cf572b3867c3b89b4f4327aec70092c0346ff", "committedDate": "2020-09-24T21:44:53Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c75c32ac27a3d49942bce019fc2ca2e59da2ee9", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/8c75c32ac27a3d49942bce019fc2ca2e59da2ee9", "committedDate": "2020-09-24T21:50:22Z", "message": "Merge branch 'main' into permissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e0b24e5238177c49670fcb80cc79638db4fdbe7", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/1e0b24e5238177c49670fcb80cc79638db4fdbe7", "committedDate": "2020-09-28T20:57:08Z", "message": "Removed permissions code constant class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3OTc0MzU1", "url": "https://github.com/ionic-team/capacitor/pull/3621#pullrequestreview-497974355", "createdAt": "2020-09-28T23:57:45Z", "commit": {"oid": "1e0b24e5238177c49670fcb80cc79638db4fdbe7"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMzo1Nzo0NVrOHZTq6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMzo1OTo1M1rOHZTtQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI5ODcyOQ==", "bodyText": "Is there any way to document what should be used instead?", "url": "https://github.com/ionic-team/capacitor/pull/3621#discussion_r496298729", "createdAt": "2020-09-28T23:57:45Z", "author": {"login": "imhoffd"}, "path": "android/capacitor/src/main/java/com/getcapacitor/NativePlugin.java", "diffHunk": "@@ -7,6 +7,7 @@\n  * Base annotation for all Plugins\n  */\n @Retention(RetentionPolicy.RUNTIME)\n+@Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e0b24e5238177c49670fcb80cc79638db4fdbe7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI5OTMzMQ==", "bodyText": "Since we have the opportunity, would it make sense to create an annotation namespace for this class and for CapacitorPlugin?\nImports would look like this:\nimport com.getcapacitor.annotation.CapacitorPlugin;\nimport com.getcapacitor.annotation.Permission;", "url": "https://github.com/ionic-team/capacitor/pull/3621#discussion_r496299331", "createdAt": "2020-09-28T23:59:53Z", "author": {"login": "imhoffd"}, "path": "android/capacitor/src/main/java/com/getcapacitor/Permission.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package com.getcapacitor;\n+\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+\n+/**\n+ * Permission annotation for use with @CapacitorPlugin\n+ */\n+@Retention(RetentionPolicy.RUNTIME)\n+public @interface Permission {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e0b24e5238177c49670fcb80cc79638db4fdbe7"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09a9f89bed3ef47d152bc1e8c86bd6c112265119", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/09a9f89bed3ef47d152bc1e8c86bd6c112265119", "committedDate": "2020-09-29T16:19:09Z", "message": "Relocated annotations to own package, added deprecation doc to NativePlugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1201faccc148786887cbdad6068bad93824f7c30", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/1201faccc148786887cbdad6068bad93824f7c30", "committedDate": "2020-09-29T16:20:41Z", "message": "Merge branch 'main' into permissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f03e463cef42dc6f222424eca78da9a6f6c4a66b", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/f03e463cef42dc6f222424eca78da9a6f6c4a66b", "committedDate": "2020-09-29T22:49:31Z", "message": "bridge calls new premission callback if using new annotation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d960fb166197d27651c80f91b99b08022d1b344", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/6d960fb166197d27651c80f91b99b08022d1b344", "committedDate": "2020-10-05T20:39:19Z", "message": "Added rationale status check ability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3aa58a9906c6eff449c2c58e0e60deb015a67c34", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/3aa58a9906c6eff449c2c58e0e60deb015a67c34", "committedDate": "2020-10-05T22:42:16Z", "message": "Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76f853a5f4873b8623da6f4592844fab54386978", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/76f853a5f4873b8623da6f4592844fab54386978", "committedDate": "2020-10-05T22:44:24Z", "message": "Merge branch 'permissions' of github.com:ionic-team/capacitor into permissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54df41cbeca3facca6dfd911184a0c57ef276468", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/54df41cbeca3facca6dfd911184a0c57ef276468", "committedDate": "2020-10-05T22:45:05Z", "message": "Merge branch 'main' into permissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fde1a74cc45bbc5dec312ee22fa6a81b4b8ca3db", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/fde1a74cc45bbc5dec312ee22fa6a81b4b8ca3db", "committedDate": "2020-10-06T19:20:45Z", "message": "Modified to allow for multiple different permissions with the same alias in a plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57aa04db1ca772ca14070bae9848c55cfb6199c5", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/57aa04db1ca772ca14070bae9848c55cfb6199c5", "committedDate": "2020-10-06T20:31:12Z", "message": "Added typescript for the new permissions methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cd937f36c8a241784e347c9b0c48f627d09d780", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/7cd937f36c8a241784e347c9b0c48f627d09d780", "committedDate": "2020-10-06T20:49:21Z", "message": "Resolve errors for now in outstanding plugins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56f828d6677f53f49871a618d40079665150a660", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/56f828d6677f53f49871a618d40079665150a660", "committedDate": "2020-10-07T19:40:20Z", "message": "Merge branch 'main' into permissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46b9327a0c6cecd8439fbee0cff6417d7fdf030f", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/46b9327a0c6cecd8439fbee0cff6417d7fdf030f", "committedDate": "2020-10-14T20:19:27Z", "message": "removed rationale method and plugin level permission types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3519c9a3d9e6e2517db68955ed81ebc0ba14e889", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/3519c9a3d9e6e2517db68955ed81ebc0ba14e889", "committedDate": "2020-10-14T20:22:54Z", "message": "Merged in main, addressed formatting complaints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51bf6e2e477b478cb9642f3381a738e400fc77d0", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/51bf6e2e477b478cb9642f3381a738e400fc77d0", "committedDate": "2020-10-14T20:29:06Z", "message": "merging in remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "981b117292981aea2224b0cdb953817cc742df35", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/981b117292981aea2224b0cdb953817cc742df35", "committedDate": "2020-10-14T20:36:50Z", "message": "removed permissions method, fixed format complaints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ecb605f8ebdc917672bc4b8b2c3953396ecff1e", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/1ecb605f8ebdc917672bc4b8b2c3953396ecff1e", "committedDate": "2020-10-14T20:42:56Z", "message": "geolocation permission code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bc83aa50d5799f455901e1527b0a5bf46bdf22c", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/2bc83aa50d5799f455901e1527b0a5bf46bdf22c", "committedDate": "2020-10-15T19:50:44Z", "message": "Merge in main"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "836895cef6a9278aeb11ae5cf17154d8a1ab2a2b", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/836895cef6a9278aeb11ae5cf17154d8a1ab2a2b", "committedDate": "2020-10-15T20:11:50Z", "message": "Removed iOS Geolocation code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1ffccc7729997ab7ca97ceba574f83e17827e45", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/d1ffccc7729997ab7ca97ceba574f83e17827e45", "committedDate": "2020-10-15T20:23:24Z", "message": "Merged in remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2571236b1731e6da4c472ddc27caa6e3577e262f", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/2571236b1731e6da4c472ddc27caa6e3577e262f", "committedDate": "2020-10-16T14:14:07Z", "message": "Merge branch 'main' into permissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a973f6ca2337fa8058bed9b29584cf8d42d2a13", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/4a973f6ca2337fa8058bed9b29584cf8d42d2a13", "committedDate": "2020-10-16T15:25:20Z", "message": "Added proper request callback for web browser permission requests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77955d67bff48b70632701000d840aafd7f2c5cc", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/77955d67bff48b70632701000d840aafd7f2c5cc", "committedDate": "2020-10-16T15:25:59Z", "message": "Merge branch 'permissions' of github.com:ionic-team/capacitor into permissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a511010e2a77423b1cb69662de0a1603b447c64f", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/a511010e2a77423b1cb69662de0a1603b447c64f", "committedDate": "2020-10-16T15:27:08Z", "message": "Merged in remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb96b88749492085d085421fec0a0e4b1833ce04", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/cb96b88749492085d085421fec0a0e4b1833ce04", "committedDate": "2020-10-22T18:14:14Z", "message": "Merged in main"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b550ce0a691696fa844cba6cb7a164eda21d829", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/2b550ce0a691696fa844cba6cb7a164eda21d829", "committedDate": "2020-10-22T20:44:27Z", "message": "Refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6a7dedfcbc8a1b2faf8ce01c26ab36d076f1fde", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/e6a7dedfcbc8a1b2faf8ce01c26ab36d076f1fde", "committedDate": "2020-10-23T19:25:56Z", "message": "Merge branch 'main' into permissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d89b037e70ecd0f4b206d26c4decb64a1a48e2d", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/6d89b037e70ecd0f4b206d26c4decb64a1a48e2d", "committedDate": "2020-10-23T20:42:01Z", "message": "Added PermissionHelper static class to share methods between Plugin and BridgeWebChromeClient"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5e2e62c9deb7cc0e349d75ad4e9d94e4f3b8da4", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/a5e2e62c9deb7cc0e349d75ad4e9d94e4f3b8da4", "committedDate": "2020-10-23T21:49:28Z", "message": "Added sharedprefs for plugin state caching."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "867e5bdf6f25f40a1e875d1e610e4e030989713d", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/867e5bdf6f25f40a1e875d1e610e4e030989713d", "committedDate": "2020-10-26T14:41:07Z", "message": "Undo formatting that was done for some reason"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "faee1c39d5612271eae9e263c56b2555899081be", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/faee1c39d5612271eae9e263c56b2555899081be", "committedDate": "2020-10-27T20:03:49Z", "message": "Merge branch 'main' into permissions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MjIyMjE5", "url": "https://github.com/ionic-team/capacitor/pull/3621#pullrequestreview-518222219", "createdAt": "2020-10-27T23:24:35Z", "commit": {"oid": "faee1c39d5612271eae9e263c56b2555899081be"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMzoyNDozNVrOHpUjLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMzoyODowM1rOHpUnWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA5MDM0OQ==", "bodyText": "[any] = 1-tuple whose element is of type any\nany[] = array of any\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              requestPermissions(): Promise<{ results: [any] }> {\n          \n          \n            \n              requestPermissions(): Promise<{ results: any[] }> {", "url": "https://github.com/ionic-team/capacitor/pull/3621#discussion_r513090349", "createdAt": "2020-10-27T23:24:35Z", "author": {"login": "imhoffd"}, "path": "core/src/web/local-notifications.ts", "diffHunk": "@@ -133,7 +132,7 @@ export class LocalNotificationsPluginWeb\n     });\n   }\n \n-  requestPermissions(): Promise<PermissionsRequestResult> {\n+  requestPermissions(): Promise<{ results: [any] }> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faee1c39d5612271eae9e263c56b2555899081be"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA5MTQxNw==", "bodyText": "Not sure if this was intentional? Does it need to be wrapped in <p></p> tags?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * <p> Use {@link CapacitorPlugin} instead\n          \n          \n            \n             * Use {@link CapacitorPlugin} instead", "url": "https://github.com/ionic-team/capacitor/pull/3621#discussion_r513091417", "createdAt": "2020-10-27T23:28:03Z", "author": {"login": "imhoffd"}, "path": "android/capacitor/src/main/java/com/getcapacitor/NativePlugin.java", "diffHunk": "@@ -1,12 +1,16 @@\n package com.getcapacitor;\n \n+import com.getcapacitor.annotation.CapacitorPlugin;\n import java.lang.annotation.Retention;\n import java.lang.annotation.RetentionPolicy;\n \n /**\n  * Base annotation for all Plugins\n+ * @deprecated\n+ * <p> Use {@link CapacitorPlugin} instead", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faee1c39d5612271eae9e263c56b2555899081be"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ec6d2beaac21037d1c67af16a15aaf027b5d794", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/6ec6d2beaac21037d1c67af16a15aaf027b5d794", "committedDate": "2020-10-28T03:47:16Z", "message": "fix incorrect tuple\n\nCo-authored-by: Dan Imhoff <dwieeb@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b75ff486367f6a2c269ea224987ec4d80f7bd258", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/b75ff486367f6a2c269ea224987ec4d80f7bd258", "committedDate": "2020-10-28T15:59:55Z", "message": "Added prompt-with-rationale state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11a79372ee37e1e08567738dad20791a52415a20", "author": {"user": {"login": "jcesarmobile", "name": "jcesarmobile"}}, "url": "https://github.com/ionic-team/capacitor/commit/11a79372ee37e1e08567738dad20791a52415a20", "committedDate": "2020-10-28T18:20:36Z", "message": "merge main"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4OTgxMzE1", "url": "https://github.com/ionic-team/capacitor/pull/3621#pullrequestreview-518981315", "createdAt": "2020-10-28T18:45:31Z", "commit": {"oid": "11a79372ee37e1e08567738dad20791a52415a20"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxODo0NTozMlrOHp4pCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxODo0NTozMlrOHp4pCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY4MTY3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import android.webkit.WebChromeClient;\n          \n      \n    \n    \n  \n\nnot used", "url": "https://github.com/ionic-team/capacitor/pull/3621#discussion_r513681672", "createdAt": "2020-10-28T18:45:32Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/Bridge.java", "diffHunk": "@@ -13,8 +13,10 @@\n import android.os.Handler;\n import android.os.HandlerThread;\n import android.webkit.ValueCallback;\n+import android.webkit.WebChromeClient;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11a79372ee37e1e08567738dad20791a52415a20"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4OTgzMDg5", "url": "https://github.com/ionic-team/capacitor/pull/3621#pullrequestreview-518983089", "createdAt": "2020-10-28T18:47:44Z", "commit": {"oid": "11a79372ee37e1e08567738dad20791a52415a20"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxODo0Nzo0NVrOHp4uaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQxODo0Nzo0NVrOHp4uaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY4MzA0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                static final int FILE_CHOOSER = 9007;\n          \n          \n            \n                static final int FILE_CHOOSER_IMAGE_CAPTURE = 9008;\n          \n          \n            \n                static final int FILE_CHOOSER_VIDEO_CAPTURE = 9009;\n          \n          \n            \n                static final int FILE_CHOOSER_CAMERA_PERMISSION = 9010;\n          \n          \n            \n                static final int GET_USER_MEDIA_PERMISSIONS = 9011;\n          \n          \n            \n                static final int GEOLOCATION_REQUEST_PERMISSIONS = 9004;\n          \n          \n            \n                static final int FILE_CHOOSER = 9001;\n          \n          \n            \n                static final int FILE_CHOOSER_IMAGE_CAPTURE = 9002;\n          \n          \n            \n                static final int FILE_CHOOSER_VIDEO_CAPTURE = 9003;\n          \n          \n            \n                static final int FILE_CHOOSER_CAMERA_PERMISSION = 9004;\n          \n          \n            \n                static final int GET_USER_MEDIA_PERMISSIONS = 9005;\n          \n          \n            \n                static final int GEOLOCATION_REQUEST_PERMISSIONS = 9006;\n          \n      \n    \n    \n  \n\nbetter put codes in order for making easier to spot which ones are available in case we need to add more", "url": "https://github.com/ionic-team/capacitor/pull/3621#discussion_r513683048", "createdAt": "2020-10-28T18:47:45Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/BridgeWebChromeClient.java", "diffHunk": "@@ -39,13 +39,12 @@\n  */\n public class BridgeWebChromeClient extends WebChromeClient {\n \n-    static final int FILE_CHOOSER = PluginRequestCodes.FILE_CHOOSER;\n-    static final int FILE_CHOOSER_IMAGE_CAPTURE = PluginRequestCodes.FILE_CHOOSER_IMAGE_CAPTURE;\n-    static final int FILE_CHOOSER_VIDEO_CAPTURE = PluginRequestCodes.FILE_CHOOSER_VIDEO_CAPTURE;\n-    static final int FILE_CHOOSER_CAMERA_PERMISSION = PluginRequestCodes.FILE_CHOOSER_CAMERA_PERMISSION;\n-    static final int GET_USER_MEDIA_PERMISSIONS = PluginRequestCodes.GET_USER_MEDIA_PERMISSIONS;\n-    static final int GEOLOCATION_REQUEST_PERMISSIONS = PluginRequestCodes.GEOLOCATION_REQUEST_PERMISSIONS;\n-    static final String[] geoPermissions = { Manifest.permission.ACCESS_COARSE_LOCATION, Manifest.permission.ACCESS_FINE_LOCATION };\n+    static final int FILE_CHOOSER = 9007;\n+    static final int FILE_CHOOSER_IMAGE_CAPTURE = 9008;\n+    static final int FILE_CHOOSER_VIDEO_CAPTURE = 9009;\n+    static final int FILE_CHOOSER_CAMERA_PERMISSION = 9010;\n+    static final int GET_USER_MEDIA_PERMISSIONS = 9011;\n+    static final int GEOLOCATION_REQUEST_PERMISSIONS = 9004;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11a79372ee37e1e08567738dad20791a52415a20"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03e448bfd7240cfe15482cff9922427aef3f1e1a", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/03e448bfd7240cfe15482cff9922427aef3f1e1a", "committedDate": "2020-10-29T15:15:11Z", "message": "Added error when no valid permission or alias provided"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d916c0e32014ad1265781aeb2458ee5d44ce8271", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/d916c0e32014ad1265781aeb2458ee5d44ce8271", "committedDate": "2020-10-29T15:15:34Z", "message": "Merge branch 'permissions' of github.com:ionic-team/capacitor into permissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cc6c82fefd3e1e841ecc5ca317c510d3719c527", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/8cc6c82fefd3e1e841ecc5ca317c510d3719c527", "committedDate": "2020-10-29T15:23:45Z", "message": "remove unused import\n\nCo-authored-by: jcesarmobile <jcesarmobile@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMDUyMzk2", "url": "https://github.com/ionic-team/capacitor/pull/3621#pullrequestreview-520052396", "createdAt": "2020-10-29T20:25:02Z", "commit": {"oid": "8cc6c82fefd3e1e841ecc5ca317c510d3719c527"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "819a890a48457adf0dec55174d3851d1b81805f2", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/819a890a48457adf0dec55174d3851d1b81805f2", "committedDate": "2020-10-29T23:11:05Z", "message": "Restored permission codes class temporarily for later cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79817fa2d4ea3063115b05f6719ae4abd8ec8e3f", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/79817fa2d4ea3063115b05f6719ae4abd8ec8e3f", "committedDate": "2020-10-29T23:11:25Z", "message": "Merge branch 'permissions' of github.com:ionic-team/capacitor into permissions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwODAwNDQy", "url": "https://github.com/ionic-team/capacitor/pull/3621#pullrequestreview-520800442", "createdAt": "2020-10-30T15:48:22Z", "commit": {"oid": "79817fa2d4ea3063115b05f6719ae4abd8ec8e3f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNzQ0Njc0", "url": "https://github.com/ionic-team/capacitor/pull/3621#pullrequestreview-520744674", "createdAt": "2020-10-30T14:51:21Z", "commit": {"oid": "79817fa2d4ea3063115b05f6719ae4abd8ec8e3f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNDo1MToyMlrOHrSg6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNTowNjo1N1rOHrTR8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE1NDE1Mg==", "bodyText": "The private hasPermissions should probably also be moved to the PermissionHelper", "url": "https://github.com/ionic-team/capacitor/pull/3621#discussion_r515154152", "createdAt": "2020-10-30T14:51:22Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/BridgeWebChromeClient.java", "diffHunk": "@@ -333,7 +334,7 @@ public void onRequestPermissionResult(int requestCode, String[] permissions, int\n \n     private boolean isMediaCaptureSupported() {\n         String[] permissions = { Manifest.permission.CAMERA };\n-        return hasPermissions(permissions) || !hasDefinedPermission(Manifest.permission.CAMERA);\n+        return hasPermissions(permissions) || !PermissionHelper.hasDefinedPermission(bridge.getContext(), Manifest.permission.CAMERA);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79817fa2d4ea3063115b05f6719ae4abd8ec8e3f"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE2NjcwNw==", "bodyText": "add what should be used instead.", "url": "https://github.com/ionic-team/capacitor/pull/3621#discussion_r515166707", "createdAt": "2020-10-30T15:06:57Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/Plugin.java", "diffHunk": "@@ -449,15 +525,18 @@ public void requestPermissions(PluginCall call) {\n      * Handle request permissions result. A plugin can override this to handle the result\n      * themselves, or this method will handle the result for our convenient requestPermissions\n      * call.\n+     * @deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79817fa2d4ea3063115b05f6719ae4abd8ec8e3f"}, "originalPosition": 303}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb367bcabe524128ddc717e36b19f06795da51c2", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/fb367bcabe524128ddc717e36b19f06795da51c2", "committedDate": "2020-10-30T17:53:54Z", "message": "moved hasPermissions to PerissionHelper, and added more context to permissions callback methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwOTE2Nzgy", "url": "https://github.com/ionic-team/capacitor/pull/3621#pullrequestreview-520916782", "createdAt": "2020-10-30T18:03:54Z", "commit": {"oid": "fb367bcabe524128ddc717e36b19f06795da51c2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1063, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}