{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0NDE5NjQ3", "number": 3309, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxODoyMToyOFrOEQvlyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNzo0NDoyMlrOER6WdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTkyMzk0OnYy", "diffSide": "RIGHT", "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/camera/ImageUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxODoyMToyOFrOG1EZIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwNzowODo0MlrOG1Vgpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5OTY4Mw==", "bodyText": "Will this be a breaking change? You've added a new parameter to this public method in the Android platform. Will calls such as ImageUtils.resize(bitmap, 100, 100) continue to work?\nYou can mitigate this by adding the following method:\n  public static Bitmap resize(Bitmap bitmap, final int width, final int height) {\n    resize(bitmap, width, height, false);\n  }", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r458299683", "createdAt": "2020-07-21T18:21:28Z", "author": {"login": "imhoffd"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/camera/ImageUtils.java", "diffHunk": "@@ -17,6 +17,21 @@\n \n public class ImageUtils {\n \n+  /**\n+   * Resize an image to the given width and height considering the preserveAspectRatio flag.\n+   * @param bitmap\n+   * @param width\n+   * @param height\n+   * @param preserveAspectRatio\n+   * @return a new, scaled Bitmap\n+   */\n+  public static Bitmap resize(Bitmap bitmap, final int width, final int height, final boolean preserveAspectRatio) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79863659188fcd59bd219a004f37e2226abf0bcb"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU4MDEzNA==", "bodyText": "Actually I think it's not. There's only one call of this static method and it's here. But I've added an overload anyway. \ud83d\udc4d\ud83c\udffd", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r458580134", "createdAt": "2020-07-22T07:08:42Z", "author": {"login": "iphilgood"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/camera/ImageUtils.java", "diffHunk": "@@ -17,6 +17,21 @@\n \n public class ImageUtils {\n \n+  /**\n+   * Resize an image to the given width and height considering the preserveAspectRatio flag.\n+   * @param bitmap\n+   * @param width\n+   * @param height\n+   * @param preserveAspectRatio\n+   * @return a new, scaled Bitmap\n+   */\n+  public static Bitmap resize(Bitmap bitmap, final int width, final int height, final boolean preserveAspectRatio) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI5OTY4Mw=="}, "originalCommit": {"oid": "79863659188fcd59bd219a004f37e2226abf0bcb"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTkzNTQwOnYy", "diffSide": "RIGHT", "path": "core/src/core-plugin-definitions.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxODoyNDo0OVrOG1EgYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxODoyNDo0OVrOG1EgYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMTUzOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Wheter to preserve the aspect ratio of the image.\n          \n          \n            \n               * If the this flag is true the width and height will be used as max values\n          \n          \n            \n               * and the aspect ratio will be preserved\n          \n          \n            \n               * Default: false\n          \n          \n            \n               * Whether to preserve the aspect ratio of the image.\n          \n          \n            \n               * If this flag is true, the width and height will be used as max values\n          \n          \n            \n               * and the aspect ratio will be preserved.\n          \n          \n            \n               * Default: false", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r458301539", "createdAt": "2020-07-21T18:24:49Z", "author": {"login": "imhoffd"}, "path": "core/src/core-plugin-definitions.ts", "diffHunk": "@@ -321,6 +321,13 @@ export interface CameraOptions {\n    * The height of the saved image\n    */\n   height?: number;\n+  /**\n+   * Wheter to preserve the aspect ratio of the image.\n+   * If the this flag is true the width and height will be used as max values\n+   * and the aspect ratio will be preserved\n+   * Default: false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79863659188fcd59bd219a004f37e2226abf0bcb"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODIzNTU3OnYy", "diffSide": "RIGHT", "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Camera.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNjo1OTo1MlrOG2Tdfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxMToyMjoyOFrOG2r2KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NTEzNA==", "bodyText": "This is not related to the aspect ratio PR, please, keep separate fixes in separate PRs so they can be evaluated independently and the git history have proper information about this change.\nAlso, instead of using UUID, you can get the image name from the path, it should be unique too since is generated from the timeStamp of when the picture was taken", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r459595134", "createdAt": "2020-07-23T16:59:52Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Camera.java", "diffHunk": "@@ -341,7 +343,12 @@ private void returnResult(PluginCall call, Bitmap bitmap, Uri u) {\n     if (saveToGallery && (imageEditedFileSavePath != null || imageFileSavePath != null)) {\n       try {\n         String fileToSave = imageEditedFileSavePath != null ? imageEditedFileSavePath : imageFileSavePath;\n-        MediaStore.Images.Media.insertImage(getActivity().getContentResolver(), fileToSave, \"\", \"\");\n+        MediaStore.Images.Media.insertImage(\n+            getActivity().getContentResolver(),\n+            fileToSave,\n+            \"IMG_\" + UUID.randomUUID().toString(),\n+            \"\"\n+        );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bd7192d91f59ca19d26de5af09aff3945ad1aa3"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTYxNDA0MA==", "bodyText": "I noticed on iOS it prompted for a permission to save to my albums when I clicked on the new button. Can we make sure this also isn't happening on iOS?\nnevermind!", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r459614040", "createdAt": "2020-07-23T17:32:16Z", "author": {"login": "imhoffd"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Camera.java", "diffHunk": "@@ -341,7 +343,12 @@ private void returnResult(PluginCall call, Bitmap bitmap, Uri u) {\n     if (saveToGallery && (imageEditedFileSavePath != null || imageFileSavePath != null)) {\n       try {\n         String fileToSave = imageEditedFileSavePath != null ? imageEditedFileSavePath : imageFileSavePath;\n-        MediaStore.Images.Media.insertImage(getActivity().getContentResolver(), fileToSave, \"\", \"\");\n+        MediaStore.Images.Media.insertImage(\n+            getActivity().getContentResolver(),\n+            fileToSave,\n+            \"IMG_\" + UUID.randomUUID().toString(),\n+            \"\"\n+        );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NTEzNA=="}, "originalCommit": {"oid": "9bd7192d91f59ca19d26de5af09aff3945ad1aa3"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk5NDY2NQ==", "bodyText": "@jcesarmobile you're right. I'm going to create a separate PR for this fix.", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r459994665", "createdAt": "2020-07-24T11:22:28Z", "author": {"login": "iphilgood"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Camera.java", "diffHunk": "@@ -341,7 +343,12 @@ private void returnResult(PluginCall call, Bitmap bitmap, Uri u) {\n     if (saveToGallery && (imageEditedFileSavePath != null || imageFileSavePath != null)) {\n       try {\n         String fileToSave = imageEditedFileSavePath != null ? imageEditedFileSavePath : imageFileSavePath;\n-        MediaStore.Images.Media.insertImage(getActivity().getContentResolver(), fileToSave, \"\", \"\");\n+        MediaStore.Images.Media.insertImage(\n+            getActivity().getContentResolver(),\n+            fileToSave,\n+            \"IMG_\" + UUID.randomUUID().toString(),\n+            \"\"\n+        );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NTEzNA=="}, "originalCommit": {"oid": "9bd7192d91f59ca19d26de5af09aff3945ad1aa3"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2ODI0NDIyOnYy", "diffSide": "RIGHT", "path": "core/src/core-plugin-definitions.ts", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxNzowMjowN1rOG2Ti5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNjoxMTo0NlrOG21YxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NjUxOA==", "bodyText": "Aspect ratio is already respected if only height or width is passed, so this should make more clear that is for when both height and width are passed", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r459596518", "createdAt": "2020-07-23T17:02:07Z", "author": {"login": "jcesarmobile"}, "path": "core/src/core-plugin-definitions.ts", "diffHunk": "@@ -321,6 +321,13 @@ export interface CameraOptions {\n    * The height of the saved image\n    */\n   height?: number;\n+  /**\n+   * Whether to preserve the aspect ratio of the image.\n+   * If this flag is true, the width and height will be used as max values\n+   * and the aspect ratio will be preserved.\n+   * Default: false\n+   */\n+  preserveAspectRatio?: boolean;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bd7192d91f59ca19d26de5af09aff3945ad1aa3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk2MTkzOQ==", "bodyText": "I'd suggest a name like legacyPreserveAspectRatio since this is more of a bug than a feature. That will make it more obvious that this will be removed in 3.0.", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r459961939", "createdAt": "2020-07-24T10:00:18Z", "author": {"login": "sandstrom"}, "path": "core/src/core-plugin-definitions.ts", "diffHunk": "@@ -321,6 +321,13 @@ export interface CameraOptions {\n    * The height of the saved image\n    */\n   height?: number;\n+  /**\n+   * Whether to preserve the aspect ratio of the image.\n+   * If this flag is true, the width and height will be used as max values\n+   * and the aspect ratio will be preserved.\n+   * Default: false\n+   */\n+  preserveAspectRatio?: boolean;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NjUxOA=="}, "originalCommit": {"oid": "9bd7192d91f59ca19d26de5af09aff3945ad1aa3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk5NTAzNA==", "bodyText": "So what I'm supposed to do now? \ud83d\ude05 Leave it like that? Update the comment? Rename the flag?", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r459995034", "createdAt": "2020-07-24T11:23:31Z", "author": {"login": "iphilgood"}, "path": "core/src/core-plugin-definitions.ts", "diffHunk": "@@ -321,6 +321,13 @@ export interface CameraOptions {\n    * The height of the saved image\n    */\n   height?: number;\n+  /**\n+   * Whether to preserve the aspect ratio of the image.\n+   * If this flag is true, the width and height will be used as max values\n+   * and the aspect ratio will be preserved.\n+   * Default: false\n+   */\n+  preserveAspectRatio?: boolean;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NjUxOA=="}, "originalCommit": {"oid": "9bd7192d91f59ca19d26de5af09aff3945ad1aa3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDAxOTM5NQ==", "bodyText": "The name itself probably isn't that important. Could just leave it as-is and clarify in the comment (that's probably what jcesarmobile ment).\nPerhaps something like this?\n  /**\n   * Whether to preserve the aspect ratio of the image.\n   * If this flag is true, the width and height will be used as max values\n   * and the aspect ratio will be preserved. This is only relevant when\n   * both a width and height is passed. When only width or height is provided\n   * the aspect ratio is always preserved (and this option is a no-op).\n   * \n   * A future major version will change this behavior to be default,\n   * and may also remove this option altogether.\n   * Default: false\n   */", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r460019395", "createdAt": "2020-07-24T12:23:40Z", "author": {"login": "sandstrom"}, "path": "core/src/core-plugin-definitions.ts", "diffHunk": "@@ -321,6 +321,13 @@ export interface CameraOptions {\n    * The height of the saved image\n    */\n   height?: number;\n+  /**\n+   * Whether to preserve the aspect ratio of the image.\n+   * If this flag is true, the width and height will be used as max values\n+   * and the aspect ratio will be preserved.\n+   * Default: false\n+   */\n+  preserveAspectRatio?: boolean;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NjUxOA=="}, "originalCommit": {"oid": "9bd7192d91f59ca19d26de5af09aff3945ad1aa3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDEwNzU5MQ==", "bodyText": "Thank you @sandstrom. I think your comment describes it very well. What do you think @dwieeb?", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r460107591", "createdAt": "2020-07-24T14:59:35Z", "author": {"login": "iphilgood"}, "path": "core/src/core-plugin-definitions.ts", "diffHunk": "@@ -321,6 +321,13 @@ export interface CameraOptions {\n    * The height of the saved image\n    */\n   height?: number;\n+  /**\n+   * Whether to preserve the aspect ratio of the image.\n+   * If this flag is true, the width and height will be used as max values\n+   * and the aspect ratio will be preserved.\n+   * Default: false\n+   */\n+  preserveAspectRatio?: boolean;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NjUxOA=="}, "originalCommit": {"oid": "9bd7192d91f59ca19d26de5af09aff3945ad1aa3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE1MDk4MA==", "bodyText": "Agreed, that's perfect.", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r460150980", "createdAt": "2020-07-24T16:11:46Z", "author": {"login": "imhoffd"}, "path": "core/src/core-plugin-definitions.ts", "diffHunk": "@@ -321,6 +321,13 @@ export interface CameraOptions {\n    * The height of the saved image\n    */\n   height?: number;\n+  /**\n+   * Whether to preserve the aspect ratio of the image.\n+   * If this flag is true, the width and height will be used as max values\n+   * and the aspect ratio will be preserved.\n+   * Default: false\n+   */\n+  preserveAspectRatio?: boolean;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NjUxOA=="}, "originalCommit": {"oid": "9bd7192d91f59ca19d26de5af09aff3945ad1aa3"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MjE3MjY4OnYy", "diffSide": "RIGHT", "path": "core/src/core-plugin-definitions.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNzo0NDoyMlrOG24TNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNzo0NDoyMlrOG24TNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE5ODcxMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * both a width and height is passed. When only width or height is provided\n          \n          \n            \n               * both a width and height are passed. When only width or height is provided", "url": "https://github.com/ionic-team/capacitor/pull/3309#discussion_r460198711", "createdAt": "2020-07-24T17:44:22Z", "author": {"login": "jcesarmobile"}, "path": "core/src/core-plugin-definitions.ts", "diffHunk": "@@ -321,6 +321,18 @@ export interface CameraOptions {\n    * The height of the saved image\n    */\n   height?: number;\n+  /**\n+   * Whether to preserve the aspect ratio of the image.\n+   * If this flag is true, the width and height will be used as max values\n+   * and the aspect ratio will be preserved. This is only relevant when\n+   * both a width and height is passed. When only width or height is provided", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4869ef8b9e7a8f67ccfa8350ff3e00e8facf10fc"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3482, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}