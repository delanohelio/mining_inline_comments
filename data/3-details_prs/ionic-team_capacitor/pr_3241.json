{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3NjQ3OTA3", "number": 3241, "title": "Plugin Template updates", "bodyText": "These changes are for Capacitor 2.3. See planned changes to the plugin template for Capacitor 3 here: #3267\nYou can see a list of files the CLI generates from this PR here: https://github.com/ionic-team/capacitor-plugins/pull/1/files\nresolves #3228", "createdAt": "2020-07-10T21:16:48Z", "url": "https://github.com/ionic-team/capacitor/pull/3241", "merged": true, "mergeCommit": {"oid": "97a5b9ab0b151363c44783fb673805a0d69d464a"}, "closed": true, "closedAt": "2020-07-16T18:39:53Z", "author": {"login": "imhoffd"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczTuV3AH2gAyNDQ3NjQ3OTA3OmI3ZTYyMjIwYzhiMjI0NWQ2ZmUxODY1ODM0MzQ0NTI5NTAyNjEyYTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1jrZmgFqTQ1MDExMzc1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b7e62220c8b2245d6fe1865834344529502612a5", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/b7e62220c8b2245d6fe1865834344529502612a5", "committedDate": "2020-07-09T18:55:02Z", "message": "more clear examples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9a63e0063a311023c66ebdc8b11ec27e2b8767b", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/a9a63e0063a311023c66ebdc8b11ec27e2b8767b", "committedDate": "2020-07-09T18:55:16Z", "message": "fix whitespace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e097bf73037b89d722c1ae4937fb3c238e2ff716", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/e097bf73037b89d722c1ae4937fb3c238e2ff716", "committedDate": "2020-07-10T22:04:19Z", "message": "lock in typescript version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3feb678acbc94e3aa18b155161052af66774a781", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/3feb678acbc94e3aa18b155161052af66774a781", "committedDate": "2020-07-10T22:08:34Z", "message": "tsconfig cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c5804595aca13600c5a90e7f0086a0d684c55ae", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/4c5804595aca13600c5a90e7f0086a0d684c55ae", "committedDate": "2020-07-10T22:37:03Z", "message": "rollup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77ec74db4c112400be1e7cd075d926143da7c999", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/77ec74db4c112400be1e7cd075d926143da7c999", "committedDate": "2020-07-10T22:51:06Z", "message": "newlines"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NTcwMjA5", "url": "https://github.com/ionic-team/capacitor/pull/3241#pullrequestreview-447570209", "createdAt": "2020-07-13T20:18:17Z", "commit": {"oid": "4c5804595aca13600c5a90e7f0086a0d684c55ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMDoxODoxOFrOGw4SUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMDoxODoxOFrOGw4SUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkwNzAyNA==", "bodyText": "The swift version can be bumped since 5.1 is the oldest version supported by Xcode 11.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              s.swift_version = '5.0'\n          \n          \n            \n              s.swift_version = '5.1'", "url": "https://github.com/ionic-team/capacitor/pull/3241#discussion_r453907024", "createdAt": "2020-07-13T20:18:18Z", "author": {"login": "ikeith"}, "path": "cli/src/tasks/new-plugin.ts", "diffHunk": "@@ -167,24 +167,24 @@ async function createIosPlugin(config: Config, pluginPath: string, domain: strin\n }\n \n function generatePodspec(config: Config, answers: NewPluginAnswers) {\n-  return `\n-  require 'json'\n-\n-  package = JSON.parse(File.read(File.join(__dir__, 'package.json')))\n-\n-  Pod::Spec.new do |s|\n-    s.name = '${fixName(answers.name)}'\n-    s.version = package['version']\n-    s.summary = package['description']\n-    s.license = package['license']\n-    s.homepage = package['repository']['url']\n-    s.author = package['author']\n-    s.source = { :git => package['repository']['url'], :tag => s.version.to_s }\n-    s.source_files = 'ios/Plugin/**/*.{swift,h,m,c,cc,mm,cpp}'\n-    s.ios.deployment_target  = '${config.ios.minVersion}'\n-    s.dependency 'Capacitor'\n-    s.swift_version = '5.0'\n-  end`;\n+  return `require 'json'\n+\n+package = JSON.parse(File.read(File.join(__dir__, 'package.json')))\n+\n+Pod::Spec.new do |s|\n+  s.name = '${fixName(answers.name)}'\n+  s.version = package['version']\n+  s.summary = package['description']\n+  s.license = package['license']\n+  s.homepage = package['repository']['url']\n+  s.author = package['author']\n+  s.source = { :git => package['repository']['url'], :tag => s.version.to_s }\n+  s.source_files = 'ios/Plugin/**/*.{swift,h,m,c,cc,mm,cpp}'\n+  s.ios.deployment_target  = '${config.ios.minVersion}'\n+  s.dependency 'Capacitor'\n+  s.swift_version = '5.0'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c5804595aca13600c5a90e7f0086a0d684c55ae"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f7f9c39f13762c1ccf9395794b2f48bff638601", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/6f7f9c39f13762c1ccf9395794b2f48bff638601", "committedDate": "2020-07-13T21:06:26Z", "message": "implement prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "240df53ebef94b6057141d0cc647540862c5f9c0", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/240df53ebef94b6057141d0cc647540862c5f9c0", "committedDate": "2020-07-13T21:20:35Z", "message": "Update cli/src/tasks/new-plugin.ts\n\nCo-authored-by: Ian Keith <iankeith@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be5ab92ac891d0ec26c6370bcdbdc708745f790d", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/be5ab92ac891d0ec26c6370bcdbdc708745f790d", "committedDate": "2020-07-13T23:04:52Z", "message": "implement swiftlint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69e7d5a7f7254076d2603da0039ac12f194072b5", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/69e7d5a7f7254076d2603da0039ac12f194072b5", "committedDate": "2020-07-14T18:11:36Z", "message": "Merge branch 'master' into plugin-template-updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a", "committedDate": "2020-07-14T21:46:46Z", "message": "Merge branch 'master' into plugin-template-updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NDkxNzE0", "url": "https://github.com/ionic-team/capacitor/pull/3241#pullrequestreview-448491714", "createdAt": "2020-07-14T21:50:19Z", "commit": {"oid": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NDk5MTE2", "url": "https://github.com/ionic-team/capacitor/pull/3241#pullrequestreview-448499116", "createdAt": "2020-07-14T22:04:57Z", "commit": {"oid": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MDQ2MDYw", "url": "https://github.com/ionic-team/capacitor/pull/3241#pullrequestreview-449046060", "createdAt": "2020-07-15T14:58:11Z", "commit": {"oid": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNDo1ODoxMVrOGyCTqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNDo1ODoxMVrOGyCTqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTExOTc4Nw==", "bodyText": "isn't too much example?", "url": "https://github.com/ionic-team/capacitor/pull/3241#discussion_r455119787", "createdAt": "2020-07-15T14:58:11Z", "author": {"login": "jcesarmobile"}, "path": "cli/src/tasks/new-plugin.ts", "diffHunk": "@@ -46,19 +46,19 @@ export async function newPlugin(config: Config) {\n     {\n       type: 'input',\n       name: 'name',\n-      message: 'Plugin NPM name (kebab-case):',\n+      message: 'Plugin npm name (kebab-case. ex: capacitor-plugin-example):',\n       validate: requiredInput\n     },\n     {\n       type: 'input',\n       name: 'domain',\n-      message: 'Plugin id (domain-style syntax. ex: com.example.plugin)',\n+      message: 'Plugin id (domain-style syntax. ex: com.example.plugins.example)',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MDQ3ODQ2", "url": "https://github.com/ionic-team/capacitor/pull/3241#pullrequestreview-449047846", "createdAt": "2020-07-15T14:59:57Z", "commit": {"oid": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNDo1OTo1N1rOGyCYaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNDo1OTo1N1rOGyCYaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEyMTAwMw==", "bodyText": "since you are wrapping everything with '', shouldn't src be wrapped too?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    src: 'ios',\n          \n          \n            \n                    'src': 'ios',", "url": "https://github.com/ionic-team/capacitor/pull/3241#discussion_r455121003", "createdAt": "2020-07-15T14:59:57Z", "author": {"login": "jcesarmobile"}, "path": "cli/src/tasks/new-plugin.ts", "diffHunk": "@@ -221,47 +221,61 @@ function generateAndroidManifest(domain: string, pluginPath: string) {\n \n function generatePackageJSON(answers: NewPluginAnswers, cliVersion: string) {\n   return {\n-    name: answers.name,\n-    version: '0.0.1',\n-    description: answers.description,\n-    main: 'dist/esm/index.js',\n-    types: 'dist/esm/index.d.ts',\n-    scripts: {\n-      'build': 'npm run clean && tsc',\n+    'name': answers.name,\n+    'version': '0.0.1',\n+    'description': answers.description,\n+    'main': 'dist/plugin.js',\n+    'module': 'dist/esm/index.js',\n+    'types': 'dist/esm/index.d.ts',\n+    'scripts': {\n+      'lint': 'npm run prettier -- --check && npm run swiftlint -- lint',\n+      'prettier': 'prettier \"**/*.{css,html,ts,js,java}\"',\n+      'swiftlint': 'swiftlint',\n+      'build': 'npm run clean && tsc && rollup -c rollup.config.js',\n       'clean': 'rimraf ./dist',\n       'watch': 'tsc --watch',\n       'prepublishOnly': 'npm run build'\n     },\n-    author: answers.author,\n-    license: answers.license,\n-    dependencies: {\n-      '@capacitor/core': `^${cliVersion}`\n-    },\n-    devDependencies: {\n-      'rimraf': '^3.0.0',\n-      'typescript': '^3.2.4',\n+    'author': answers.author,\n+    'license': answers.license,\n+    'devDependencies': {\n+      '@capacitor/android': `^${cliVersion}`,\n+      '@capacitor/core': `^${cliVersion}`,\n       '@capacitor/ios': `^${cliVersion}`,\n-      '@capacitor/android': `^${cliVersion}`\n+      '@ionic/prettier-config': '^1.0.0',\n+      '@ionic/swiftlint-config': '^1.0.0',\n+      '@rollup/plugin-node-resolve': '^8.1.0',\n+      'prettier': '^2.0.5',\n+      'prettier-plugin-java': '^0.8.0',\n+      'rimraf': '^3.0.0',\n+      'rollup': '^2.21.0',\n+      'swiftlint': '^0.39.4',\n+      'typescript': '~3.8.3'\n+    },\n+    'peerDependencies': {\n+      '@capacitor/core': `^${cliVersion}`\n     },\n-    files: [\n+    'files': [\n       'dist/',\n       'ios/',\n       'android/',\n       `${fixName(answers.name)}.podspec`\n     ],\n-    keywords: [\n+    'keywords': [\n       'capacitor',\n       'plugin',\n       'native'\n     ],\n-    capacitor: {\n-      ios: {\n+    'capacitor': {\n+      'ios': {\n         src: 'ios',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a"}, "originalPosition": 137}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MDQ5MjMy", "url": "https://github.com/ionic-team/capacitor/pull/3241#pullrequestreview-449049232", "createdAt": "2020-07-15T15:01:27Z", "commit": {"oid": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNTowMToyN1rOGyCcVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxNTowMToyN1rOGyCcVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEyMjAwNg==", "bodyText": "Not related to the PR itself, but if the () is not really needed (tested and seems to work fine without it), we should probably remove it from all our core plugins, they all have it", "url": "https://github.com/ionic-team/capacitor/pull/3241#discussion_r455122006", "createdAt": "2020-07-15T15:01:27Z", "author": {"login": "jcesarmobile"}, "path": "plugin-template/android/Plugin.java", "diffHunk": "@@ -6,10 +6,10 @@\n import com.getcapacitor.PluginCall;\n import com.getcapacitor.PluginMethod;\n \n-@NativePlugin()\n+@NativePlugin", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f38bed2e2d28300586be9da25f181e8d7e8f918c", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/f38bed2e2d28300586be9da25f181e8d7e8f918c", "committedDate": "2020-07-15T16:03:44Z", "message": "wrap src with single quotes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5db61c7f4a9cc526904a457d9a2759f1fd812ae4", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/5db61c7f4a9cc526904a457d9a2759f1fd812ae4", "committedDate": "2020-07-15T16:03:44Z", "message": "use mycompany for domain name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77c9391b4b13c3cee8bcbe86bb660105d8910d60", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/77c9391b4b13c3cee8bcbe86bb660105d8910d60", "committedDate": "2020-07-16T18:12:44Z", "message": "update swiftlint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTEzNzUx", "url": "https://github.com/ionic-team/capacitor/pull/3241#pullrequestreview-450113751", "createdAt": "2020-07-16T18:38:09Z", "commit": {"oid": "77c9391b4b13c3cee8bcbe86bb660105d8910d60"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1211, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}