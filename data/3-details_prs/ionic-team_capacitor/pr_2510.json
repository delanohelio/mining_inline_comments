{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyNzk3MjY4", "number": 2510, "title": "Formatting MessageHandler", "bodyText": "Second contribution \ud83d\udc4b!\nNo functional changes here, I simplified the check if we're a cordovaPlugin, javascriptError or anything else.\nI also extracted the predicates that checks if the types (null, cordova, js error) to help make the postMessage a little easier to read.\nReplaced new Runnable with a Lambda and the // Only eval the JS code if this is a valid callback id comment with a clear variable name.\nMoved both public methods to the top of the file and the private methods at the bottom.", "createdAt": "2020-03-03T07:54:44Z", "url": "https://github.com/ionic-team/capacitor/pull/2510", "merged": true, "mergeCommit": {"oid": "befe79899c47f1646d75aa19991f6e3fa93db6f7"}, "closed": true, "closedAt": "2020-06-24T18:47:14Z", "author": {"login": "imjacobclark"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJ9f0jAH2gAyMzgyNzk3MjY4Ojk0M2IzZDQwYmM0ZTc0N2EzMGY4OWUxMzExOTQzMzUwMmM2NDdjNmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuc81JgH2gAyMzgyNzk3MjY4OjdkYWY5ZWRmY2YxYzcwYzhlYjBkYjY5MTRhM2FkMTlhZjI3ZTMxYTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "943b3d40bc4e747a30f89e13119433502c647c6a", "author": {"user": {"login": "imjacobclark", "name": "Jacob Clark"}}, "url": "https://github.com/ionic-team/capacitor/commit/943b3d40bc4e747a30f89e13119433502c647c6a", "committedDate": "2020-03-03T07:50:22Z", "message": "Formatting MessageHandler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "534c253ec63e0e872ba65a929dbdf5bf2b175a6b", "author": {"user": {"login": "imjacobclark", "name": "Jacob Clark"}}, "url": "https://github.com/ionic-team/capacitor/commit/534c253ec63e0e872ba65a929dbdf5bf2b175a6b", "committedDate": "2020-06-23T22:54:47Z", "message": "Merge branch 'master' of github.com:ionic-team/capacitor into formatting-message-handler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d51b443ebfa58720ad21b07ace4d8ba308948a5", "author": {"user": {"login": "imjacobclark", "name": "Jacob Clark"}}, "url": "https://github.com/ionic-team/capacitor/commit/8d51b443ebfa58720ad21b07ace4d8ba308948a5", "committedDate": "2020-06-23T22:56:22Z", "message": "Drop gradle files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d86fd278400c6e057e9cf31e3f9aca9a7b47a1c", "author": {"user": {"login": "imjacobclark", "name": "Jacob Clark"}}, "url": "https://github.com/ionic-team/capacitor/commit/6d86fd278400c6e057e9cf31e3f9aca9a7b47a1c", "committedDate": "2020-06-23T22:56:44Z", "message": "Drop gradle files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NzMyMTY5", "url": "https://github.com/ionic-team/capacitor/pull/2510#pullrequestreview-436732169", "createdAt": "2020-06-24T14:57:42Z", "commit": {"oid": "6d86fd278400c6e057e9cf31e3f9aca9a7b47a1c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo1Nzo0MlrOGoWGxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo1Nzo0MlrOGoWGxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1ODQwNg==", "bodyText": "Did you mean to use the new isJavaScriptError bool here?", "url": "https://github.com/ionic-team/capacitor/pull/2510#discussion_r444958406", "createdAt": "2020-06-24T14:57:42Z", "author": {"login": "carlpoole"}, "path": "android/capacitor/src/main/java/com/getcapacitor/MessageHandler.java", "diffHunk": "@@ -35,40 +35,36 @@ public void postMessage(String jsonStr) {\n \n       String type = postData.getString(\"type\");\n \n-      if (type != null && type.equals(\"cordova\")) {\n-        String callbackId = postData.getString(\"callbackId\");\n+      boolean typeIsNotNull = type != null;\n+      boolean isCordovaPlugin = typeIsNotNull && type.equals(\"cordova\");\n+      boolean isJavaScriptError = typeIsNotNull && type.equals(\"js.error\");\n+\n+      String callbackId = postData.getString(\"callbackId\");\n+\n+      if (isCordovaPlugin) {\n         String service = postData.getString(\"service\");\n         String action = postData.getString(\"action\");\n         String actionArgs = postData.getString(\"actionArgs\");\n-        Logger.verbose(Logger.tags(\"Plugin\"), \"To native (Cordova plugin): callbackId: \" + callbackId + \", service: \" + service +\n-          \", action: \" + action + \", actionArgs: \" + actionArgs);\n+\n+        Logger.verbose(Logger.tags(\"Plugin\"), \"To native (Cordova plugin): callbackId: \" + callbackId + \", service: \" + service + \", action: \" + action + \", actionArgs: \" + actionArgs);\n+\n         this.callCordovaPluginMethod(callbackId, service, action, actionArgs);\n       } else if (type != null && type.equals(\"js.error\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d86fd278400c6e057e9cf31e3f9aca9a7b47a1c"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7daf9edfcf1c70c8eb0db6914a3ad19af27e31a1", "author": {"user": {"login": "imjacobclark", "name": "Jacob Clark"}}, "url": "https://github.com/ionic-team/capacitor/commit/7daf9edfcf1c70c8eb0db6914a3ad19af27e31a1", "committedDate": "2020-06-24T16:50:23Z", "message": "Update MessageHandler.java"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1298, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}