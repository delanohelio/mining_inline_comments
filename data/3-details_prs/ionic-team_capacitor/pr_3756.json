{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0NDA0OTQz", "number": 3756, "title": "feat(cli): support TS/JS config files", "bodyText": "Devs can now have capacitor.config.ts (or capacitor.config.js) files, for example:\nimport { CapacitorConfig } from '@capacitor/cli';\n\nconst config: CapacitorConfig = {\n  appId: 'com.capacitorjs.testapp',\n  appName: 'capacitor-testapp',\n  bundledWebRuntime: false,\n  webDir: 'build',\n  plugins: {\n    SplashScreen: {\n      launchShowDuration: 0,\n    },\n  },\n};\n\nexport = config;\ndepends on #3755\nresolves #3141", "createdAt": "2020-11-03T00:12:14Z", "url": "https://github.com/ionic-team/capacitor/pull/3756", "merged": true, "mergeCommit": {"oid": "a52775fb635a5cbcccf2dcaa955ad12804ad5986"}, "closed": true, "closedAt": "2020-11-09T21:08:50Z", "author": {"login": "imhoffd"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYp2ubAH2gAyNTE0NDA0OTQzOmFmYjIxYWRiYzYyMThiMjgwOWRlOWViMTRlNDgyZmY5NTJjMzA4MGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb4YxgAFqTUyOTQ2MDQ4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "afb21adbc6218b2809de9eb14e482ff952c3080b", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/afb21adbc6218b2809de9eb14e482ff952c3080b", "committedDate": "2020-11-02T19:37:18Z", "message": "feat(cli): STUDIO_PATH environment variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1e7f666f3e8ec21a5e4585f5ed345e24d52156c", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/e1e7f666f3e8ec21a5e4585f5ed345e24d52156c", "committedDate": "2020-11-02T19:58:29Z", "message": "check before opening"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf26a4b246aa841637a10e6983fefc62fa20a61e", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/cf26a4b246aa841637a10e6983fefc62fa20a61e", "committedDate": "2020-11-02T23:01:35Z", "message": "use config for config file name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c96aa186f666c197ec0bce5cf7612019c709b3b9", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/c96aa186f666c197ec0bce5cf7612019c709b3b9", "committedDate": "2020-11-02T23:21:23Z", "message": "split out extConfig stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d54128741092c616b5eac450231d8ec994e9fd73", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/d54128741092c616b5eac450231d8ec994e9fd73", "committedDate": "2020-11-02T23:44:39Z", "message": "load js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d0e5c1bbc5c8d78a043998f96bce317244f5a40", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/7d0e5c1bbc5c8d78a043998f96bce317244f5a40", "committedDate": "2020-11-02T23:56:19Z", "message": "copy = write json from loaded config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a47e914b0bfcbaf8923fa6d00fcab260301f0a1", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/8a47e914b0bfcbaf8923fa6d00fcab260301f0a1", "committedDate": "2020-11-03T00:02:44Z", "message": "init for non-json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e9860588760cc59e17e5cfac5b958b4e2fa82a1", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/5e9860588760cc59e17e5cfac5b958b4e2fa82a1", "committedDate": "2020-11-03T16:32:25Z", "message": "Merge branch 'main' into dynamic-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76264f27f6be0eba8f9886a61c8354d30cace188", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/76264f27f6be0eba8f9886a61c8354d30cace188", "committedDate": "2020-11-03T16:35:54Z", "message": "revert the help output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9462e6a7ae5b171dae7fa6473fcb36659efb83d8", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/9462e6a7ae5b171dae7fa6473fcb36659efb83d8", "committedDate": "2020-11-03T20:22:27Z", "message": "support TS files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "859c0effe837ee88bfc2c1e30add8f2c85a6e276", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/859c0effe837ee88bfc2c1e30add8f2c85a6e276", "committedDate": "2020-11-03T20:48:44Z", "message": "expose CapacitorConfig type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2eb9c376b80eb6949ffd15bc8abad874b8266a2", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/c2eb9c376b80eb6949ffd15bc8abad874b8266a2", "committedDate": "2020-11-03T20:56:41Z", "message": "internalize readonly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7861b808e034f32068c4df03400f334786e8531f", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/7861b808e034f32068c4df03400f334786e8531f", "committedDate": "2020-11-03T21:53:51Z", "message": "document all the things"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b3b2bddb1affaff7228d250b69fcb3adb20bdeb", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/4b3b2bddb1affaff7228d250b69fcb3adb20bdeb", "committedDate": "2020-11-03T21:57:32Z", "message": "undo core change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99d920600bde3654daf80fa97df17cd2f5f0f4ca", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/99d920600bde3654daf80fa97df17cd2f5f0f4ca", "committedDate": "2020-11-05T18:31:31Z", "message": "Merge branch 'main' into dynamic-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed8d1fab06f0f1dfc0f8367e9fb1a22cb8879f91", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/ed8d1fab06f0f1dfc0f8367e9fb1a22cb8879f91", "committedDate": "2020-11-08T22:56:00Z", "message": "Merge branch 'main' into dynamic-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "859ed8a9b97f126c399f66952a06722fed134d15", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/859ed8a9b97f126c399f66952a06722fed134d15", "committedDate": "2020-11-09T18:17:05Z", "message": "use accurate versions for since tags"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NTU0ODU5", "url": "https://github.com/ionic-team/capacitor/pull/3756#pullrequestreview-526554859", "createdAt": "2020-11-09T18:54:23Z", "commit": {"oid": "859ed8a9b97f126c399f66952a06722fed134d15"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22b9138cd4d634d4a3a1ee79421b1dc97cab4245", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/22b9138cd4d634d4a3a1ee79421b1dc97cab4245", "committedDate": "2020-11-09T18:55:22Z", "message": "small typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NTMzNjIx", "url": "https://github.com/ionic-team/capacitor/pull/3756#pullrequestreview-526533621", "createdAt": "2020-11-09T18:26:03Z", "commit": {"oid": "859ed8a9b97f126c399f66952a06722fed134d15"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxODoyNjowM1rOHv71HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxOTowMDozNlrOHv9E6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAyNTM3Mw==", "bodyText": "this is only set if the preference is set, if not set then it uses the webview default value. According to this, on iOS 10 and newer it's true", "url": "https://github.com/ionic-team/capacitor/pull/3756#discussion_r520025373", "createdAt": "2020-11-09T18:26:03Z", "author": {"login": "jcesarmobile"}, "path": "cli/src/declarations.ts", "diffHunk": "@@ -0,0 +1,341 @@\n+export interface CapacitorConfig {\n+  /**\n+   * The Package ID of your app.\n+   *\n+   * Package IDs (aka Bundle ID in iOS and Application ID in Android) are\n+   * unique identifiers for apps. They must be in reverse domain name notation,\n+   * generally representing a domain name that you or your company owns.\n+   *\n+   * @since 1.0.0\n+   */\n+  appId?: string;\n+\n+  /**\n+   * The human-friendly name of your app.\n+   *\n+   * This should be what you'd see in the App Store, but can be changed after\n+   * within each native platform after it is generated.\n+   *\n+   * @since 1.0.0\n+   */\n+  appName?: string;\n+\n+  /**\n+   * The directory of your compiled web assets.\n+   *\n+   * This directory should contain the final `index.html` of your app.\n+   *\n+   * @since 1.0.0\n+   */\n+  webDir?: string;\n+\n+  /**\n+   * Whether to copy the Capacitor runtime bundle or not.\n+   *\n+   * If your app is using a bundler, this should be `false`. If you added\n+   * `capacitor.js` as a script in your `index.html` file, this should be\n+   * `true`.\n+   *\n+   * @since 1.0.0\n+   * @default false\n+   */\n+  bundledWebRuntime?: boolean;\n+\n+  /**\n+   * Hide or show the native logs for iOS and Android.\n+   *\n+   * @since 2.1.0\n+   * @default false\n+   */\n+  hideLogs?: boolean;\n+\n+  /**\n+   * User agent of Capacitor Web View.\n+   *\n+   * @since 1.4.0\n+   */\n+  overrideUserAgent?: string;\n+\n+  /**\n+   * String to append to the original user agent of Capacitor Web View.\n+   *\n+   * This is disregarded if `overrideUserAgent` is used.\n+   *\n+   * @since 1.4.0\n+   */\n+  appendUserAgent?: string;\n+\n+  /**\n+   * Background color of the Capacitor Web View.\n+   *\n+   * @since 1.1.0\n+   */\n+  backgroundColor?: string;\n+\n+  android?: {\n+    /**\n+     * Specify a custom path to the native Android project.\n+     *\n+     * @since 3.0.0\n+     * @default android\n+     */\n+    path?: string;\n+\n+    /**\n+     * User agent of Capacitor Web View on Android.\n+     *\n+     * Overrides global `overrideUserAgent` option.\n+     *\n+     * @since 1.4.0\n+     */\n+    overrideUserAgent?: string;\n+\n+    /**\n+     * String to append to the original user agent of Capacitor Web View for Android.\n+     *\n+     * Overrides global `appendUserAgent` option.\n+     *\n+     * This is disregarded if `overrideUserAgent` is used.\n+     *\n+     * @since 1.4.0\n+     */\n+    appendUserAgent?: string;\n+\n+    /**\n+     * Background color of the Capacitor Web View for Android.\n+     *\n+     * Overrides global `backgroundColor` option.\n+     *\n+     * @since 1.1.0\n+     */\n+    backgroundColor?: string;\n+\n+    /**\n+     * Enable mixed content in the Capacitor Web View for Android.\n+     *\n+     * [Mixed\n+     * content](https://developer.mozilla.org/en-US/docs/Web/Security/Mixed_content)\n+     * is disabled by default for security. During development, you may need to\n+     * enable it to allow the Web View to load files from different schemes.\n+     *\n+     * **This is not intended for use in production.**\n+     *\n+     * @since 1.0.0\n+     * @default false\n+     */\n+    allowMixedContent?: boolean;\n+\n+    /**\n+     * This enables a simpler keyboard which may have some limitations.\n+     *\n+     * This will capture JS keys using an alternative\n+     * [`InputConnection`](https://developer.android.com/reference/android/view/inputmethod/InputConnection).\n+     *\n+     * @since 1.0.0\n+     * @default false\n+     */\n+    captureInput?: boolean;\n+\n+    /**\n+     * Always enable debuggable web content.\n+     *\n+     * This is automatically enabled during development.\n+     *\n+     * @since 1.0.0\n+     * @default false\n+     */\n+    webContentsDebuggingEnabled?: boolean;\n+\n+    /**\n+     * Hide or show the native logs for Android.\n+     *\n+     * Overrides global `hideLogs` option.\n+     *\n+     * @since 2.1.0\n+     * @default false\n+     */\n+    hideLogs?: boolean;\n+  };\n+\n+  ios?: {\n+    /**\n+     * Specify a custom path to the native iOS project.\n+     *\n+     * @since 3.0.0\n+     * @default ios\n+     */\n+    path?: string;\n+\n+    /**\n+     * User agent of Capacitor Web View on iOS.\n+     *\n+     * Overrides global `overrideUserAgent` option.\n+     *\n+     * @since 1.4.0\n+     */\n+    overrideUserAgent?: string;\n+\n+    /**\n+     * String to append to the original user agent of Capacitor Web View for iOS.\n+     *\n+     * Overrides global `appendUserAgent` option.\n+     *\n+     * This is disregarded if `overrideUserAgent` is used.\n+     *\n+     * @since 1.4.0\n+     */\n+    appendUserAgent?: string;\n+\n+    /**\n+     * Background color of the Capacitor Web View for iOS.\n+     *\n+     * Overrides global `backgroundColor` option.\n+     *\n+     * @since 1.1.0\n+     */\n+    backgroundColor?: string;\n+\n+    /**\n+     * Configure the scroll view's content inset adjustment behavior.\n+     *\n+     * This will set the\n+     * [`contentInsetAdjustmentBehavior`](https://developer.apple.com/documentation/uikit/uiscrollview/2902261-contentinsetadjustmentbehavior)\n+     * property on the Web View's\n+     * [`UIScrollView`](https://developer.apple.com/documentation/uikit/uiscrollview).\n+     *\n+     * @since 2.0.0\n+     * @default never\n+     */\n+    contentInset?: 'automatic' | 'scrollableAxes' | 'never' | 'always';\n+\n+    /**\n+     * Configure the Swift version to be used in Cordova plugins.\n+     *\n+     * @since 1.0.0\n+     * @default 5.1\n+     */\n+    cordovaSwiftVersion?: string;\n+\n+    /**\n+     * Configure the minimum iOS version supported.\n+     *\n+     * @since 1.0.0\n+     * @default 11.0\n+     */\n+    minVersion?: string;\n+\n+    /**\n+     * Configure custom linker flags for compiling Cordova plugins.\n+     *\n+     * @since 1.0.0\n+     * @default []\n+     */\n+    cordovaLinkerFlags?: string[];\n+\n+    /**\n+     * Allow destination previews when pressing on links.\n+     *\n+     * @since 2.0.0\n+     * @default false\n+     */\n+    allowsLinkPreview?: boolean;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "859ed8a9b97f126c399f66952a06722fed134d15"}, "originalPosition": 241}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDAzODcwMA==", "bodyText": "Since there is already a common confusion about the android package name and the application ID, I think we should not use package ID here, better use App ID.", "url": "https://github.com/ionic-team/capacitor/pull/3756#discussion_r520038700", "createdAt": "2020-11-09T18:49:14Z", "author": {"login": "jcesarmobile"}, "path": "cli/src/declarations.ts", "diffHunk": "@@ -0,0 +1,341 @@\n+export interface CapacitorConfig {\n+  /**\n+   * The Package ID of your app.\n+   *\n+   * Package IDs (aka Bundle ID in iOS and Application ID in Android) are", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "859ed8a9b97f126c399f66952a06722fed134d15"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0MTI3Mg==", "bodyText": "More like the opposite, if you set it to true, then you have to add capacitor.js to the index.html.\nShould be reworded to something like\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * If your app is using a bundler, this should be `false`. If you added\n          \n          \n            \n               * `capacitor.js` as a script in your `index.html` file, this should be\n          \n          \n            \n               * `true`.\n          \n          \n            \n               * If your app is using a bundler, this should be `false`. If not using a bundler\n          \n          \n            \n               * set this to true, then Capacitor will create a `capacitor.js` file that you'll need to add as \n          \n          \n            \n               * a script in your `index.html` file.", "url": "https://github.com/ionic-team/capacitor/pull/3756#discussion_r520041272", "createdAt": "2020-11-09T18:53:26Z", "author": {"login": "jcesarmobile"}, "path": "cli/src/declarations.ts", "diffHunk": "@@ -0,0 +1,341 @@\n+export interface CapacitorConfig {\n+  /**\n+   * The Package ID of your app.\n+   *\n+   * Package IDs (aka Bundle ID in iOS and Application ID in Android) are\n+   * unique identifiers for apps. They must be in reverse domain name notation,\n+   * generally representing a domain name that you or your company owns.\n+   *\n+   * @since 1.0.0\n+   */\n+  appId?: string;\n+\n+  /**\n+   * The human-friendly name of your app.\n+   *\n+   * This should be what you'd see in the App Store, but can be changed after\n+   * within each native platform after it is generated.\n+   *\n+   * @since 1.0.0\n+   */\n+  appName?: string;\n+\n+  /**\n+   * The directory of your compiled web assets.\n+   *\n+   * This directory should contain the final `index.html` of your app.\n+   *\n+   * @since 1.0.0\n+   */\n+  webDir?: string;\n+\n+  /**\n+   * Whether to copy the Capacitor runtime bundle or not.\n+   *\n+   * If your app is using a bundler, this should be `false`. If you added\n+   * `capacitor.js` as a script in your `index.html` file, this should be\n+   * `true`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "859ed8a9b97f126c399f66952a06722fed134d15"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0NDQ3NQ==", "bodyText": "since init doesn't work if a .ts or .js file is present, I don't think this needs to be changed", "url": "https://github.com/ionic-team/capacitor/pull/3756#discussion_r520044475", "createdAt": "2020-11-09T18:58:37Z", "author": {"login": "jcesarmobile"}, "path": "cli/src/tasks/init.ts", "diffHunk": "@@ -38,7 +48,7 @@ export async function initCommand(\n     const cordova = await getCordovaPreferences(config);\n \n     await runTask(\n-      `Creating ${c.strong('capacitor.config.json')} in ${c.input(\n+      `Creating ${c.strong(config.app.extConfigName)} in ${c.input(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22b9138cd4d634d4a3a1ee79421b1dc97cab4245"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0NDczNA==", "bodyText": "same, init only works with the .json file", "url": "https://github.com/ionic-team/capacitor/pull/3756#discussion_r520044734", "createdAt": "2020-11-09T18:59:00Z", "author": {"login": "jcesarmobile"}, "path": "cli/src/tasks/init.ts", "diffHunk": "@@ -62,8 +72,8 @@ export async function initCommand(\n   }\n }\n \n-function printNextSteps() {\n-  logSuccess(`${c.strong('capacitor.config.json')} created!`);\n+function printNextSteps(config: Config) {\n+  logSuccess(`${c.strong(config.app.extConfigName)} created!`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22b9138cd4d634d4a3a1ee79421b1dc97cab4245"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA0NTgwMw==", "bodyText": "init only works on .json files, don't need to change this", "url": "https://github.com/ionic-team/capacitor/pull/3756#discussion_r520045803", "createdAt": "2020-11-09T19:00:36Z", "author": {"login": "jcesarmobile"}, "path": "cli/src/cordova.ts", "diffHunk": "@@ -527,7 +527,7 @@ export async function getCordovaPreferences(config: Config): Promise<any> {\n     const answers = await logPrompt(\n       `${c.strong(\n         `Cordova preferences can be automatically ported to ${c.strong(\n-          'capacitor.config.json',\n+          config.app.extConfigName,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22b9138cd4d634d4a3a1ee79421b1dc97cab4245"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cbc24de8f3add52b805b7871681ec556767c6be", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/5cbc24de8f3add52b805b7871681ec556767c6be", "committedDate": "2020-11-09T19:13:26Z", "message": "document scrollEnabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a50c492b47ed3080fb918df9a05e918982747218", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/a50c492b47ed3080fb918df9a05e918982747218", "committedDate": "2020-11-09T19:13:44Z", "message": "reword bundle option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f74789f9769b2c14085d67db1f37168de606efa8", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/f74789f9769b2c14085d67db1f37168de606efa8", "committedDate": "2020-11-09T19:14:07Z", "message": "clarify default option on allowsLinkPreview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2473a48bcc0744f2243e9e038b3c6f7bac06b037", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/2473a48bcc0744f2243e9e038b3c6f7bac06b037", "committedDate": "2020-11-09T19:37:57Z", "message": "app id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NjAyNDYz", "url": "https://github.com/ionic-team/capacitor/pull/3756#pullrequestreview-526602463", "createdAt": "2020-11-09T19:52:18Z", "commit": {"oid": "2473a48bcc0744f2243e9e038b3c6f7bac06b037"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NDYwNDg3", "url": "https://github.com/ionic-team/capacitor/pull/3756#pullrequestreview-529460487", "createdAt": "2020-11-12T20:14:55Z", "commit": {"oid": "2473a48bcc0744f2243e9e038b3c6f7bac06b037"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQyMDoxNDo1NlrOHyMZAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQyMDoxNDo1NlrOHyMZAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM5Mzg1Ng==", "bodyText": "I think it'd be quite useful to optionally support exporting a () => Promise<ExternalConfig> instead of just ExternalConfig.\nWould you accept a pull request?", "url": "https://github.com/ionic-team/capacitor/pull/3756#discussion_r522393856", "createdAt": "2020-11-12T20:14:56Z", "author": {"login": "buschtoens"}, "path": "cli/src/config.ts", "diffHunk": "@@ -57,6 +54,86 @@ export async function loadConfig(): Promise<Config> {\n   return config;\n }\n \n+type ExtConfigPairs = Pick<\n+  AppConfig,\n+  'extConfigType' | 'extConfigName' | 'extConfigFilePath' | 'extConfig'\n+>;\n+\n+async function loadExtConfigTS(\n+  rootDir: string,\n+  extConfigName: string,\n+  extConfigFilePath: string,\n+): Promise<ExtConfigPairs> {\n+  try {\n+    const tsPath = resolveNode(rootDir, 'typescript');\n+\n+    if (!tsPath) {\n+      logFatal(\n+        'Could not find installation of TypeScript.\\n' +\n+          `To use ${c.strong(\n+            extConfigName,\n+          )} files, you must install TypeScript in your project, e.g. w/ ${c.input(\n+            'npm install -D typescript',\n+          )}`,\n+      );\n+    }\n+\n+    const ts = require(tsPath); // eslint-disable-line @typescript-eslint/no-var-requires\n+\n+    return {\n+      extConfigType: 'ts',\n+      extConfigName,\n+      extConfigFilePath: extConfigFilePath,\n+      extConfig: requireTS(ts, extConfigFilePath) as any,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2473a48bcc0744f2243e9e038b3c6f7bac06b037"}, "originalPosition": 104}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1086, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}