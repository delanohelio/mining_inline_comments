{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzMjY4NjAz", "number": 2337, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzo1NDoxNVrODblCUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNDozODowOFrODbl_vA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjQ0OTQ2OnYy", "diffSide": "RIGHT", "path": "ios/Capacitor/Capacitor/Plugins/Toast.swift", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzo1NDoxNVrOFjJIOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzo1NDoxNVrOFjJIOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM5NDA0Mg==", "bodyText": "With this change, bottom is a bit lower than before, better keep the old code. It looks a bit bad, specially on notch devices, the toast is too close to the gesture bar.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    y = vc.view.bounds.size.height - height - topBottomOffset\n          \n          \n            \n                    y = vc.view.bounds.size.height - height - (height/2)", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372394042", "createdAt": "2020-01-29T13:54:15Z", "author": {"login": "jcesarmobile"}, "path": "ios/Capacitor/Capacitor/Plugins/Toast.swift", "diffHunk": "@@ -34,11 +35,25 @@ public class CAPToastPlugin : CAPPlugin {\n       let minWidth = min(maxSizeTitle.width, expectedSizeTitle.width)\n       let minHeight = min(maxSizeTitle.height, expectedSizeTitle.height)\n       expectedSizeTitle = CGSize(width: minWidth, height: minHeight)\n+        \n+      let topBottomOffset: CGFloat = 20\n+      let height = expectedSizeTitle.height+32\n+      let y: CGFloat\n+      if (position == \"top\") {\n+        y = topBottomOffset\n+      } else if (position == \"center\") {\n+        y = (vc.view.bounds.size.height/2) - (height/2)\n+      } else if (position == \"bottom\") {\n+        y = vc.view.bounds.size.height - height - topBottomOffset", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2170d8effbeeffb4b23c0cd9973abc7e71a41d1"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjQ1NTY3OnYy", "diffSide": "RIGHT", "path": "ios/Capacitor/Capacitor/Plugins/Toast.swift", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzo1NjowOFrOFjJMJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxMzo1NjowOFrOFjJMJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjM5NTA0NQ==", "bodyText": "increase the size a bit, to 40 I think, with 20 a small portion of the toast appears under the notch\nalso, as I recommended to change the bottom code, you no longer need the topBottomOffset variable, you can just set the y value on line 43", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372395045", "createdAt": "2020-01-29T13:56:08Z", "author": {"login": "jcesarmobile"}, "path": "ios/Capacitor/Capacitor/Plugins/Toast.swift", "diffHunk": "@@ -34,11 +35,25 @@ public class CAPToastPlugin : CAPPlugin {\n       let minWidth = min(maxSizeTitle.width, expectedSizeTitle.width)\n       let minHeight = min(maxSizeTitle.height, expectedSizeTitle.height)\n       expectedSizeTitle = CGSize(width: minWidth, height: minHeight)\n+        \n+      let topBottomOffset: CGFloat = 20", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2170d8effbeeffb4b23c0cd9973abc7e71a41d1"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjU4NDQ2OnYy", "diffSide": "RIGHT", "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Toast.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNDozMjoxNFrOFjKb_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxODowNDo0NVrOFjSOgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQxNTQ4NQ==", "bodyText": "This also changes the behaviour, so I wouldn't do anything if set to bottom, to keep the old behaviour.", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372415485", "createdAt": "2020-01-29T14:32:14Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Toast.java", "diffHunk": "@@ -23,7 +30,22 @@ public void show(PluginCall call) {\n       duration = android.widget.Toast.LENGTH_LONG;\n     }\n \n+\n     android.widget.Toast toast = android.widget.Toast.makeText(getContext(), text, duration);\n+\n+    String position = call.getString(\"position\", \"bottom\");\n+\n+    if(\"top\".equals(position)) {\n+      toast.setGravity(GRAVITY_TOP, 0, BASE_TOP_BOTTOM_OFFSET);\n+    } else  if(\"bottom\".equals(position)) {\n+      toast.setGravity(GRAVITY_BOTTOM, 0, BASE_TOP_BOTTOM_OFFSET);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2170d8effbeeffb4b23c0cd9973abc7e71a41d1"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ4MDg4Nw==", "bodyText": "Is it not weird to have a margin at the top but no at bottom? IIRC on android the toast sticks to the bottom, I found it not as pretty as with a little margin.", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372480887", "createdAt": "2020-01-29T16:14:01Z", "author": {"login": "veloce"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Toast.java", "diffHunk": "@@ -23,7 +30,22 @@ public void show(PluginCall call) {\n       duration = android.widget.Toast.LENGTH_LONG;\n     }\n \n+\n     android.widget.Toast toast = android.widget.Toast.makeText(getContext(), text, duration);\n+\n+    String position = call.getString(\"position\", \"bottom\");\n+\n+    if(\"top\".equals(position)) {\n+      toast.setGravity(GRAVITY_TOP, 0, BASE_TOP_BOTTOM_OFFSET);\n+    } else  if(\"bottom\".equals(position)) {\n+      toast.setGravity(GRAVITY_BOTTOM, 0, BASE_TOP_BOTTOM_OFFSET);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQxNTQ4NQ=="}, "originalCommit": {"oid": "e2170d8effbeeffb4b23c0cd9973abc7e71a41d1"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ5Nzc0Nw==", "bodyText": "I don't know if it's weird or not, but this PR changes the previous behaviour, moving the default toast position.", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372497747", "createdAt": "2020-01-29T16:40:27Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Toast.java", "diffHunk": "@@ -23,7 +30,22 @@ public void show(PluginCall call) {\n       duration = android.widget.Toast.LENGTH_LONG;\n     }\n \n+\n     android.widget.Toast toast = android.widget.Toast.makeText(getContext(), text, duration);\n+\n+    String position = call.getString(\"position\", \"bottom\");\n+\n+    if(\"top\".equals(position)) {\n+      toast.setGravity(GRAVITY_TOP, 0, BASE_TOP_BOTTOM_OFFSET);\n+    } else  if(\"bottom\".equals(position)) {\n+      toast.setGravity(GRAVITY_BOTTOM, 0, BASE_TOP_BOTTOM_OFFSET);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQxNTQ4NQ=="}, "originalCommit": {"oid": "e2170d8effbeeffb4b23c0cd9973abc7e71a41d1"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU0MzEwNA==", "bodyText": "Ok I changed it, and put also 40 as top offset.", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372543104", "createdAt": "2020-01-29T18:04:45Z", "author": {"login": "veloce"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Toast.java", "diffHunk": "@@ -23,7 +30,22 @@ public void show(PluginCall call) {\n       duration = android.widget.Toast.LENGTH_LONG;\n     }\n \n+\n     android.widget.Toast toast = android.widget.Toast.makeText(getContext(), text, duration);\n+\n+    String position = call.getString(\"position\", \"bottom\");\n+\n+    if(\"top\".equals(position)) {\n+      toast.setGravity(GRAVITY_TOP, 0, BASE_TOP_BOTTOM_OFFSET);\n+    } else  if(\"bottom\".equals(position)) {\n+      toast.setGravity(GRAVITY_BOTTOM, 0, BASE_TOP_BOTTOM_OFFSET);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQxNTQ4NQ=="}, "originalCommit": {"oid": "e2170d8effbeeffb4b23c0cd9973abc7e71a41d1"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjYwNjY4OnYy", "diffSide": "RIGHT", "path": "core/src/web/toast.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNDozODowOFrOFjKppw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNDozODowOFrOFjKppw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQxODk4Mw==", "bodyText": "Since web toast doesn't really support the position, better not to add code that might look like it's implemented but broken\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                toast.position = options.position;", "url": "https://github.com/ionic-team/capacitor/pull/2337#discussion_r372418983", "createdAt": "2020-01-29T14:38:08Z", "author": {"login": "jcesarmobile"}, "path": "core/src/web/toast.ts", "diffHunk": "@@ -18,6 +18,7 @@ export class ToastPluginWeb extends WebPlugin implements ToastPlugin {\n     const toast = document.createElement('pwa-toast') as any;\n     toast.duration = duration;\n     toast.message = options.text;\n+    toast.position = options.position;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2170d8effbeeffb4b23c0cd9973abc7e71a41d1"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3588, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}