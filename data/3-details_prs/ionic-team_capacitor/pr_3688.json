{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0MjA2NjY5", "number": 3688, "title": "chore(iOS): Updating project build", "bodyText": "This branch updates the project structure so it no longer requires CocoaPods to build independently:\n\nThe CapacitorCordova .xcodeproj has been updated to compile all files and add a modulemap (and clean up some small compiler warnings).\nThe Capacitor project has been similarly updated and its Podfile has been removed.\nThe individual podspecs have been updated to reflect the project configuration, such that directly building the project(s) and importing them through CocoaPods should match.\nThe Capacitor project can now run a test scheme.", "createdAt": "2020-10-15T15:52:14Z", "url": "https://github.com/ionic-team/capacitor/pull/3688", "merged": true, "mergeCommit": {"oid": "2f319c24def9475f8186fd0ef9f9dba8278ade9e"}, "closed": true, "closedAt": "2020-10-22T18:09:46Z", "author": {"login": "ikeith"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSy5HvgH2gAyNTA0MjA2NjY5OmRmYzQzMDZkNDhkNzY2MDhhODRkYzY4ODI4NzU2NjViNzI2YTRmNzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVF7L4gFqTUxNDk4ODczMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dfc4306d48d76608a84dc6882875665b726a4f78", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/dfc4306d48d76608a84dc6882875665b726a4f78", "committedDate": "2020-10-15T14:45:31Z", "message": "Minor cleanup to eliminate compiler warnings in Capacitor Cordova project"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1df74d6c6a3e4409b27690e3a2d0bdb3e22728b9", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/1df74d6c6a3e4409b27690e3a2d0bdb3e22728b9", "committedDate": "2020-10-15T14:45:54Z", "message": "Support direct building of the capacitor framework. Added modulemaps, updated umbrella headers, updated project settings, removed Capacitor project's Podfile. Updated respective podspecs to match."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "413af81a62174710655db6e29c0465087da10bb8", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/413af81a62174710655db6e29c0465087da10bb8", "committedDate": "2020-10-15T14:47:02Z", "message": "Removing unneeded pod install step so build will work."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5338f02c2baf466949de285cf3553a942d94276f", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/5338f02c2baf466949de285cf3553a942d94276f", "committedDate": "2020-10-15T14:52:06Z", "message": "Cleanup from cherry-picking commits"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a40a6ab6d1511187b58b0302a9021f7e1e02753", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/8a40a6ab6d1511187b58b0302a9021f7e1e02753", "committedDate": "2020-10-15T15:28:18Z", "message": "Deleted exclusion of removed file."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5ODg0ODQ5", "url": "https://github.com/ionic-team/capacitor/pull/3688#pullrequestreview-509884849", "createdAt": "2020-10-15T23:40:34Z", "commit": {"oid": "8a40a6ab6d1511187b58b0302a9021f7e1e02753"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMzo0MDozNFrOHifJVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMzo0MDozNFrOHifJVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkyMzkyNg==", "bodyText": "Why not CapacitorCordova?", "url": "https://github.com/ionic-team/capacitor/pull/3688#discussion_r505923926", "createdAt": "2020-10-15T23:40:34Z", "author": {"login": "imhoffd"}, "path": "ios/CapacitorCordova/CapacitorCordova/Info.plist", "diffHunk": "@@ -4,6 +4,8 @@\n <dict>\n \t<key>CFBundleDevelopmentRegion</key>\n \t<string>$(DEVELOPMENT_LANGUAGE)</string>\n+\t<key>CFBundleDisplayName</key>\n+\t<string>Cordova</string>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a40a6ab6d1511187b58b0302a9021f7e1e02753"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5ODg0OTQ1", "url": "https://github.com/ionic-team/capacitor/pull/3688#pullrequestreview-509884945", "createdAt": "2020-10-15T23:40:43Z", "commit": {"oid": "8a40a6ab6d1511187b58b0302a9021f7e1e02753"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d15ab9fdb5b7b71578bfa0e0b10eea4a7324de54", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/d15ab9fdb5b7b71578bfa0e0b10eea4a7324de54", "committedDate": "2020-10-16T16:48:25Z", "message": "Merge branch 'main' into ios-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28f1eed110f3795cd47e00efea7bf2e02074615e", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/28f1eed110f3795cd47e00efea7bf2e02074615e", "committedDate": "2020-10-16T19:34:26Z", "message": "Reworked CAPLog to prevent race condition between it and CAPConfig."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d92dd0fc2825ec92638d1b481f832856d5a9f24", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/3d92dd0fc2825ec92638d1b481f832856d5a9f24", "committedDate": "2020-10-16T19:42:11Z", "message": "Adding empty application shell to host framework for unit tests."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNzU5MTA1", "url": "https://github.com/ionic-team/capacitor/pull/3688#pullrequestreview-510759105", "createdAt": "2020-10-16T19:52:17Z", "commit": {"oid": "3d92dd0fc2825ec92638d1b481f832856d5a9f24"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxOTo1MjoxN1rOHjN8cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxOTo1MjoxN1rOHjN8cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjY5MDY3NA==", "bodyText": "This is a stop-gap fix as I don't think this is really the best way to solve the problem. Ultimately, I think the enableLogging flag should be set externally, probably by CAPBridgeViewController at the point of entry, rather than letting CAPLog load a configuration. That will be the best way to handle things for an embedded context where the configuration might be programmatically changed. But that can addressed when CAPConfig is redone and the view controller is refactored.", "url": "https://github.com/ionic-team/capacitor/pull/3688#discussion_r506690674", "createdAt": "2020-10-16T19:52:17Z", "author": {"login": "ikeith"}, "path": "ios/Capacitor/Capacitor/CAPLog.swift", "diffHunk": "@@ -1,19 +1,26 @@\n public class CAPLog {\n-\n-    public static let config = CAPConfig()\n-\n+    public static var enableLogging: Bool = true\n+    \n+    private static var oneTimeConfigCheck: () -> () = {\n+        // `dispatch_once` is not available since Swift 3. but, since static properties are implicitly lazy,\n+        // this code will only execute once which is sufficient for our needs here. but since we need to do an\n+        // async dispatch, there is a window of time where the default value will be valid before the config\n+        // value(s) can be loaded.\n+        DispatchQueue.main.async {\n+            let config = CAPConfig()\n+            if let configFlag = (config.getValue(\"ios.hideLogs\") as? Bool) ?? (config.getValue(\"hideLogs\") as? Bool) {\n+                enableLogging = !configFlag\n+            }\n+        }\n+        return {}\n+    }()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d92dd0fc2825ec92638d1b481f832856d5a9f24"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6598cf6c557bc045be2e6d16a32c19b445b93732", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/6598cf6c557bc045be2e6d16a32c19b445b93732", "committedDate": "2020-10-19T21:15:36Z", "message": "Merge branch 'main' into ios-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0e5e24c968a906fa8fff5280d696a8749419e8f", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/a0e5e24c968a906fa8fff5280d696a8749419e8f", "committedDate": "2020-10-19T21:28:37Z", "message": "Removing reference to deleted file."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fb3deb7791a894bb42fa098648dc39f954abfe6", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/7fb3deb7791a894bb42fa098648dc39f954abfe6", "committedDate": "2020-10-19T23:00:03Z", "message": "Merge branch 'main' into ios-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4495117f5ce440857491b57debf8c3d2434298be", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/4495117f5ce440857491b57debf8c3d2434298be", "committedDate": "2020-10-20T18:24:10Z", "message": "Merge branch 'main' into ios-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d44d62b3fe4cb1c55905f51369f8ca8c143e98ff", "author": {"user": {"login": "jcesarmobile", "name": "jcesarmobile"}}, "url": "https://github.com/ionic-team/capacitor/commit/d44d62b3fe4cb1c55905f51369f8ca8c143e98ff", "committedDate": "2020-10-21T10:13:38Z", "message": "Merge branch 'main' into ios-build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9e996985c0c692bc4e10f27b5521a78dcda333c", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/b9e996985c0c692bc4e10f27b5521a78dcda333c", "committedDate": "2020-10-21T17:16:30Z", "message": "Removing deleted file reference."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0ODY2MTk1", "url": "https://github.com/ionic-team/capacitor/pull/3688#pullrequestreview-514866195", "createdAt": "2020-10-22T15:40:33Z", "commit": {"oid": "b9e996985c0c692bc4e10f27b5521a78dcda333c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTo0MDozM1rOHmoDFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTo0MDozM1rOHmoDFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI2NDA4Nw==", "bodyText": "Why is the file excluded?\nCan it just be removed if not needed?", "url": "https://github.com/ionic-team/capacitor/pull/3688#discussion_r510264087", "createdAt": "2020-10-22T15:40:33Z", "author": {"login": "jcesarmobile"}, "path": "ios/Capacitor.podspec", "diffHunk": "@@ -11,6 +11,8 @@ Pod::Spec.new do |s|\n   s.authors = { 'Ionic Team' => 'hi@ionicframework.com' }\n   s.source = { :git => 'https://github.com/ionic-team/capacitor.git', :tag => s.version.to_s }\n   s.source_files = 'Capacitor/Capacitor/*.{swift,h,m}', 'Capacitor/Capacitor/Plugins/*.{swift,h,m}', 'Capacitor/Capacitor/Plugins/**/*.{swift,h,m}'\n+  s.exclude_files = 'Capacitor/Capacitor/Plugins/DefaultPlugins.h'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b9e996985c0c692bc4e10f27b5521a78dcda333c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a861aed261d6d91d6260be0b2842d7aab4486d8", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/4a861aed261d6d91d6260be0b2842d7aab4486d8", "committedDate": "2020-10-22T17:48:29Z", "message": "Removing DefaultPlugins.h."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a317f0f398a136453cc3a533261ab631bb4b881", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/2a317f0f398a136453cc3a533261ab631bb4b881", "committedDate": "2020-10-22T17:49:16Z", "message": "Revert \"Reworked CAPLog to prevent race condition between it and CAPConfig.\"\n\nThis reverts commit 28f1eed110f3795cd47e00efea7bf2e02074615e."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1567b1c380431fd295bf099c9d43dd6472ba3f4d", "author": {"user": {"login": "ikeith", "name": "Ian Keith"}}, "url": "https://github.com/ionic-team/capacitor/commit/1567b1c380431fd295bf099c9d43dd6472ba3f4d", "committedDate": "2020-10-22T17:54:56Z", "message": "Added dummy config file to the tests host app to work around race condition between CAPLog and CAPConfig."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0OTg4NzMz", "url": "https://github.com/ionic-team/capacitor/pull/3688#pullrequestreview-514988733", "createdAt": "2020-10-22T18:03:49Z", "commit": {"oid": "1567b1c380431fd295bf099c9d43dd6472ba3f4d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1077, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}