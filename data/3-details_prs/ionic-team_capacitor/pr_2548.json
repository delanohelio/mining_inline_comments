{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MTkwMzg5", "number": 2548, "title": "feat(android): added configurable icon color for local notifications", "bodyText": "Good day,\nI was finding that I needed to customize quite a few things with android local notifications so I decided to put my first PR in to see how it goes.\nThis PR adds the ability to set an icon color in android.  You can do it with the plugin definition or globally in the config.\nIf this is something the community is interested in... i have already done something similar to make the notification expandable and can put that PR in at some point in the future as well.", "createdAt": "2020-03-10T15:07:43Z", "url": "https://github.com/ionic-team/capacitor/pull/2548", "merged": true, "mergeCommit": {"oid": "0bfa0bfeb7607e987b1a497bc8f5e0b64e9ca17d"}, "closed": true, "closedAt": "2020-03-17T19:16:00Z", "author": {"login": "andysousa"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMT3EPgH2gAyMzg2MTkwMzg5OmIxZWM4Y2JmMjhiYzIzYWEzYTNmMDVkNDY4Zjg2NjhkMzk5ZjY1ZTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOnsHFAFqTM3NjMzMjE2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b1ec8cbf28bc23aa3a3f05d468f8668d399f65e9", "author": {"user": null}, "url": "https://github.com/ionic-team/capacitor/commit/b1ec8cbf28bc23aa3a3f05d468f8668d399f65e9", "committedDate": "2020-03-10T15:01:31Z", "message": "added configurable icon color for android local notifications"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "627cf9718877b925d048d75cb743c5b6260f52c3", "author": {"user": null}, "url": "https://github.com/ionic-team/capacitor/commit/627cf9718877b925d048d75cb743c5b6260f52c3", "committedDate": "2020-03-10T18:06:43Z", "message": "updated the api documentation for webpage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NTExNTEy", "url": "https://github.com/ionic-team/capacitor/pull/2548#pullrequestreview-375511512", "createdAt": "2020-03-16T19:10:43Z", "commit": {"oid": "627cf9718877b925d048d75cb743c5b6260f52c3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxOToxMDo0M1rOF3CVRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxOToxMjoyNlrOF3CYyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI1NDIxMw==", "bodyText": "this crash if the color is not valid, put it inside a try catch (check other plugins like Browser or Statusbar)", "url": "https://github.com/ionic-team/capacitor/pull/2548#discussion_r393254213", "createdAt": "2020-03-16T19:10:43Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/notification/LocalNotificationManager.java", "diffHunk": "@@ -174,6 +175,12 @@ private void buildNotification(NotificationManagerCompat notificationManager, Lo\n     mBuilder.setOnlyAlertOnce(true);\n \n     mBuilder.setSmallIcon(localNotification.getSmallIcon(context));\n+\n+    String iconColor = localNotification.getIconColor();\n+    if (iconColor != null) {\n+      mBuilder.setColor(Color.parseColor(iconColor));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "627cf9718877b925d048d75cb743c5b6260f52c3"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI1NDM3MQ==", "bodyText": "can you properly align this?", "url": "https://github.com/ionic-team/capacitor/pull/2548#discussion_r393254371", "createdAt": "2020-03-16T19:10:59Z", "author": {"login": "jcesarmobile"}, "path": "core/src/core-plugin-definitions.ts", "diffHunk": "@@ -1033,6 +1033,10 @@ export interface LocalNotification {\n    * If set, it overrides default icon from capacitor.config.json\n    */\n   smallIcon?: string;\n+      /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "627cf9718877b925d048d75cb743c5b6260f52c3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI1NTExNQ==", "bodyText": "since they are optional, don't add them to the sample, or if you add them, do it with a real value and not null.\nIn this case, null crash the app (see my previous try catch comment)", "url": "https://github.com/ionic-team/capacitor/pull/2548#discussion_r393255115", "createdAt": "2020-03-16T19:12:26Z", "author": {"login": "jcesarmobile"}, "path": "site/docs-md/apis/local-notifications/index.md", "diffHunk": "@@ -33,7 +33,9 @@ LocalNotifications.schedule({\n       sound: null,\n       attachments: null,\n       actionTypeId: \"\",\n-      extra: null\n+      extra: null,\n+      smallIcon: null,\n+      iconColor: null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "627cf9718877b925d048d75cb743c5b6260f52c3"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2403ed4fcd6f5c1b54b0160fa3c000993779fa70", "author": {"user": null}, "url": "https://github.com/ionic-team/capacitor/commit/2403ed4fcd6f5c1b54b0160fa3c000993779fa70", "committedDate": "2020-03-16T19:30:35Z", "message": "catch exception for bad color string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1OTM1MzA2", "url": "https://github.com/ionic-team/capacitor/pull/2548#pullrequestreview-375935306", "createdAt": "2020-03-17T11:07:39Z", "commit": {"oid": "2403ed4fcd6f5c1b54b0160fa3c000993779fa70"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMTowNzozOVrOF3XduQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMTowNzozOVrOF3XduQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYwMDQ0MQ==", "bodyText": "For consistency, better use the same error message as Status Bar plugin\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    call.error(\"The iconColor string was not able to be parsed.  Please provide a valid string hexidecimal color code.\", ex);\n          \n          \n            \n                    call.error(\"Invalid color provided. Must be a hex string (ex: #ff0000\");", "url": "https://github.com/ionic-team/capacitor/pull/2548#discussion_r393600441", "createdAt": "2020-03-17T11:07:39Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/notification/LocalNotificationManager.java", "diffHunk": "@@ -174,6 +175,17 @@ private void buildNotification(NotificationManagerCompat notificationManager, Lo\n     mBuilder.setOnlyAlertOnce(true);\n \n     mBuilder.setSmallIcon(localNotification.getSmallIcon(context));\n+\n+    String iconColor = localNotification.getIconColor();\n+    if (iconColor != null) {\n+      try {\n+        mBuilder.setColor(Color.parseColor(iconColor));\n+      } catch (Exception ex) {\n+        call.error(\"The iconColor string was not able to be parsed.  Please provide a valid string hexidecimal color code.\", ex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2403ed4fcd6f5c1b54b0160fa3c000993779fa70"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96418553c00763221e5a1635720ecd91b5e42005", "author": {"user": null}, "url": "https://github.com/ionic-team/capacitor/commit/96418553c00763221e5a1635720ecd91b5e42005", "committedDate": "2020-03-17T17:25:58Z", "message": "PR feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MzMyMTYx", "url": "https://github.com/ionic-team/capacitor/pull/2548#pullrequestreview-376332161", "createdAt": "2020-03-17T19:15:30Z", "commit": {"oid": "96418553c00763221e5a1635720ecd91b5e42005"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1237, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}