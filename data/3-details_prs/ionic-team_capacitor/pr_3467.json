{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczMzYxMTgw", "number": 3467, "title": "chore: remove Geolocation plugin", "bodyText": "", "createdAt": "2020-08-25T17:45:15Z", "url": "https://github.com/ionic-team/capacitor/pull/3467", "merged": true, "mergeCommit": {"oid": "62daefebf16ef692c291218d8ef8e78fbe0cfcd5"}, "closed": true, "closedAt": "2020-10-21T09:53:44Z", "author": {"login": "carlpoole"}, "timelineItems": {"totalCount": 38, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-mZgFAH2gAyNDczMzYxMTgwOjMyMDNmMGExY2MxMzJmYzg5OTllNmZkOWNkYjQzODhjZmM1MDlhNmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUqTusgFqTUxMzUwMjk3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3203f0a1cc132fc8999e6fd9cdb4388cfc509a6b", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/3203f0a1cc132fc8999e6fd9cdb4388cfc509a6b", "committedDate": "2020-08-13T20:53:38Z", "message": "Removed android"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d675b812f0dd5eaf61359134aec8a5a9b037fc4e", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/d675b812f0dd5eaf61359134aec8a5a9b037fc4e", "committedDate": "2020-08-24T19:59:43Z", "message": "Merged in main"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b551235bc732e5d0975af3603f11584d5397570f", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/b551235bc732e5d0975af3603f11584d5397570f", "committedDate": "2020-08-24T22:29:32Z", "message": "Removed more"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45b246cb8dfd6773e0ac47faf688e5184f25ae44", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/45b246cb8dfd6773e0ac47faf688e5184f25ae44", "committedDate": "2020-08-25T18:32:26Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ba5cd846eafcc14a76fbae51d88d913195b5606", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/0ba5cd846eafcc14a76fbae51d88d913195b5606", "committedDate": "2020-09-08T20:54:58Z", "message": "Added registration mechanism for a geolocation plugin to hook on to permission requst from browser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b1503894dc3ab4a706afaf6d7feb9277161d64b", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/8b1503894dc3ab4a706afaf6d7feb9277161d64b", "committedDate": "2020-09-08T20:55:25Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NDkwOTgx", "url": "https://github.com/ionic-team/capacitor/pull/3467#pullrequestreview-484490981", "createdAt": "2020-09-08T21:02:42Z", "commit": {"oid": "8b1503894dc3ab4a706afaf6d7feb9277161d64b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMTowMjo0MlrOHOt6xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMTowMjo0MlrOHOt6xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE5NDQzOQ==", "bodyText": "@dwieeb I added this method to the bridge so that it's possible to provide a Geolocation plugin for the onGeolocationPermissionsShowPrompt method in BridgeWebChromeClient to use. I'm unsure if we want to leave it at this, or make this method available on the Plugin class instead so that plugins don't need to touch the Bridge to do this. Thoughts?", "url": "https://github.com/ionic-team/capacitor/pull/3467#discussion_r485194439", "createdAt": "2020-09-08T21:02:42Z", "author": {"login": "carlpoole"}, "path": "android/capacitor/src/main/java/com/getcapacitor/Bridge.java", "diffHunk": "@@ -883,4 +883,8 @@ public BridgeWebViewClient getWebViewClient() {\n     public void setWebViewClient(BridgeWebViewClient client) {\n         this.webViewClient = client;\n     }\n+\n+    public void registerGeolocationPlugin(Plugin geolocationPlugin) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8b1503894dc3ab4a706afaf6d7feb9277161d64b"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "befcd420e2a83ee6d831eb41b279a53e0b6a481c", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/befcd420e2a83ee6d831eb41b279a53e0b6a481c", "committedDate": "2020-09-08T21:09:26Z", "message": "import cleanup/fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "813288c13d34c42dfa96e717cbd0fbc53453d16c", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/813288c13d34c42dfa96e717cbd0fbc53453d16c", "committedDate": "2020-09-08T21:09:44Z", "message": "prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b4ad70099f27dd2449173cbc01381ff1221dcb4", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/6b4ad70099f27dd2449173cbc01381ff1221dcb4", "committedDate": "2020-09-08T21:10:01Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "550356795c2f2e22428288fee35a549da516c571", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/550356795c2f2e22428288fee35a549da516c571", "committedDate": "2020-09-10T17:53:30Z", "message": "Changed to use an interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "082e1a04884b13025aa3b435a3333677ff72faab", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/082e1a04884b13025aa3b435a3333677ff72faab", "committedDate": "2020-09-10T17:59:06Z", "message": "mistaken removal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1c8816c338ed52646466b4573fd803f36293c51", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/b1c8816c338ed52646466b4573fd803f36293c51", "committedDate": "2020-09-10T18:17:13Z", "message": "add method on Plugin class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a30defdd10122577b0ae4bba7dcce7bf61a4a310", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/a30defdd10122577b0ae4bba7dcce7bf61a4a310", "committedDate": "2020-09-23T21:39:21Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14593727040c7f1d5727c3d17748598807813735", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/14593727040c7f1d5727c3d17748598807813735", "committedDate": "2020-09-23T21:48:27Z", "message": "undoing permission work so it can be handled in core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d7b444c73539b5a57a1d7449e96bd630bb35300", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/5d7b444c73539b5a57a1d7449e96bd630bb35300", "committedDate": "2020-09-23T21:59:49Z", "message": "Added new methods for checking permissions in the WebChromeClient"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3db9216ca273e44a831e9d153375b3db14e89468", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/3db9216ca273e44a831e9d153375b3db14e89468", "committedDate": "2020-09-23T22:02:54Z", "message": "putting this back..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ce95e78a7bff4884fe942c719568cabafd1f7a6", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/0ce95e78a7bff4884fe942c719568cabafd1f7a6", "committedDate": "2020-09-23T22:25:17Z", "message": "Replacing removed import statements that were necessary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66cae3fffa3f00492b7695b7c4ff4919fc6e2a58", "author": {"user": {"login": "jcesarmobile", "name": "jcesarmobile"}}, "url": "https://github.com/ionic-team/capacitor/commit/66cae3fffa3f00492b7695b7c4ff4919fc6e2a58", "committedDate": "2020-09-24T12:17:34Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2aa0d43db2c248bc2d5ba16a24d64f1c3593f7aa", "author": {"user": {"login": "jcesarmobile", "name": "jcesarmobile"}}, "url": "https://github.com/ionic-team/capacitor/commit/2aa0d43db2c248bc2d5ba16a24d64f1c3593f7aa", "committedDate": "2020-09-24T12:30:48Z", "message": "fmt"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NjA0ODMy", "url": "https://github.com/ionic-team/capacitor/pull/3467#pullrequestreview-495604832", "createdAt": "2020-09-24T14:00:26Z", "commit": {"oid": "2aa0d43db2c248bc2d5ba16a24d64f1c3593f7aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDowMDoyNlrOHXcYIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDowMDoyNlrOHXcYIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0NDIyNA==", "bodyText": "Shouldn't use the same request code that is used on Geolocation plugin, the codes are used to identify who called the permission prompt, so if the Geolocation plugin is installed it could cause an undesired callback.", "url": "https://github.com/ionic-team/capacitor/pull/3467#discussion_r494344224", "createdAt": "2020-09-24T14:00:26Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/BridgeWebChromeClient.java", "diffHunk": "@@ -37,12 +38,14 @@\n  * WebView instance.\n  */\n public class BridgeWebChromeClient extends WebChromeClient {\n-    private Bridge bridge;\n     static final int FILE_CHOOSER = PluginRequestCodes.FILE_CHOOSER;\n     static final int FILE_CHOOSER_IMAGE_CAPTURE = PluginRequestCodes.FILE_CHOOSER_IMAGE_CAPTURE;\n     static final int FILE_CHOOSER_VIDEO_CAPTURE = PluginRequestCodes.FILE_CHOOSER_VIDEO_CAPTURE;\n     static final int FILE_CHOOSER_CAMERA_PERMISSION = PluginRequestCodes.FILE_CHOOSER_CAMERA_PERMISSION;\n     static final int GET_USER_MEDIA_PERMISSIONS = PluginRequestCodes.GET_USER_MEDIA_PERMISSIONS;\n+    static final int GEOLOCATION_REQUEST_PERMISSIONS = PluginRequestCodes.GEOLOCATION_REQUEST_PERMISSIONS;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2aa0d43db2c248bc2d5ba16a24d64f1c3593f7aa"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NjEwNTk5", "url": "https://github.com/ionic-team/capacitor/pull/3467#pullrequestreview-495610599", "createdAt": "2020-09-24T14:06:03Z", "commit": {"oid": "2aa0d43db2c248bc2d5ba16a24d64f1c3593f7aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDowNjowM1rOHXco1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNDowNjowM1rOHXco1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM0ODUwMQ==", "bodyText": "This should only be called with the second param as true if the permissions are accepted, otherwise it should prompt for the permission and this shouldn't be called until the user accept (and pass true) or deny (and pass false).", "url": "https://github.com/ionic-team/capacitor/pull/3467#discussion_r494348501", "createdAt": "2020-09-24T14:06:03Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/BridgeWebChromeClient.java", "diffHunk": "@@ -261,11 +264,11 @@ public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermiss\n         // Set that we want geolocation perms for this origin\n         callback.invoke(origin, true, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2aa0d43db2c248bc2d5ba16a24d64f1c3593f7aa"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f3cf572b3867c3b89b4f4327aec70092c0346ff", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/6f3cf572b3867c3b89b4f4327aec70092c0346ff", "committedDate": "2020-09-24T21:44:53Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bc83aa50d5799f455901e1527b0a5bf46bdf22c", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/2bc83aa50d5799f455901e1527b0a5bf46bdf22c", "committedDate": "2020-10-15T19:50:44Z", "message": "Merge in main"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "836895cef6a9278aeb11ae5cf17154d8a1ab2a2b", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/836895cef6a9278aeb11ae5cf17154d8a1ab2a2b", "committedDate": "2020-10-15T20:11:50Z", "message": "Removed iOS Geolocation code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a973f6ca2337fa8058bed9b29584cf8d42d2a13", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/4a973f6ca2337fa8058bed9b29584cf8d42d2a13", "committedDate": "2020-10-16T15:25:20Z", "message": "Added proper request callback for web browser permission requests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "318aa519e6ef4ff611da6b8173bf8e96f0904556", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/318aa519e6ef4ff611da6b8173bf8e96f0904556", "committedDate": "2020-10-16T15:33:11Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdfe9257dc875de96b589fc920daa22d03f2ea53", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/fdfe9257dc875de96b589fc920daa22d03f2ea53", "committedDate": "2020-10-19T16:06:15Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd4c97d31bfa2b9c61aadd14c3e34f2f8a12df3a", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/cd4c97d31bfa2b9c61aadd14c3e34f2f8a12df3a", "committedDate": "2020-10-19T17:43:47Z", "message": "Merged in main"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d411ebc94b46e6dc0d26e592207ae767e4791f3", "author": {"user": {"login": "imhoffd", "name": "Dan Imhoff"}}, "url": "https://github.com/ionic-team/capacitor/commit/1d411ebc94b46e6dc0d26e592207ae767e4791f3", "committedDate": "2020-10-19T22:59:47Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ce7e7db0c93142e6403ec642fae527d0aef0928", "author": {"user": {"login": "jcesarmobile", "name": "jcesarmobile"}}, "url": "https://github.com/ionic-team/capacitor/commit/8ce7e7db0c93142e6403ec642fae527d0aef0928", "committedDate": "2020-10-20T14:48:11Z", "message": "Merge branch 'main' into remove-geolocation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3ceaddcea9e979d31515c1b05ec3d56372f868c", "author": {"user": {"login": "jcesarmobile", "name": "jcesarmobile"}}, "url": "https://github.com/ionic-team/capacitor/commit/a3ceaddcea9e979d31515c1b05ec3d56372f868c", "committedDate": "2020-10-20T17:21:55Z", "message": "fmt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bfb989da96b07d94d382b30ae679c58f2cdbbfe", "author": {"user": {"login": "jcesarmobile", "name": "jcesarmobile"}}, "url": "https://github.com/ionic-team/capacitor/commit/5bfb989da96b07d94d382b30ae679c58f2cdbbfe", "committedDate": "2020-10-20T17:49:44Z", "message": "remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fec082403aa44acf137613105903840503b17702", "author": {"user": {"login": "jcesarmobile", "name": "jcesarmobile"}}, "url": "https://github.com/ionic-team/capacitor/commit/fec082403aa44acf137613105903840503b17702", "committedDate": "2020-10-20T18:08:02Z", "message": "remove ECLAIR check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMDA0NDE1", "url": "https://github.com/ionic-team/capacitor/pull/3467#pullrequestreview-513004415", "createdAt": "2020-10-20T18:11:10Z", "commit": {"oid": "fec082403aa44acf137613105903840503b17702"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxODoxMToxMFrOHlK00g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxODoxMToxMFrOHlK00g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODczNjcyMg==", "bodyText": "the code should be unique, if you use the same on the geolocation plugin then only one of them will receive the response", "url": "https://github.com/ionic-team/capacitor/pull/3467#discussion_r508736722", "createdAt": "2020-10-20T18:11:10Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/Bridge.java", "diffHunk": "@@ -687,6 +687,11 @@ public void startActivityForPluginWithResult(PluginCall call, Intent intent, int\n      */\n \n     public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n+        if (requestCode == BridgeWebChromeClient.GEOLOCATION_REQUEST_PERMISSIONS) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fec082403aa44acf137613105903840503b17702"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMDA2MjEz", "url": "https://github.com/ionic-team/capacitor/pull/3467#pullrequestreview-513006213", "createdAt": "2020-10-20T18:13:26Z", "commit": {"oid": "fec082403aa44acf137613105903840503b17702"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05dd7301242dc2ea296654070cef5cae5213b909", "author": {"user": {"login": "carlpoole", "name": "Carl Poole"}}, "url": "https://github.com/ionic-team/capacitor/commit/05dd7301242dc2ea296654070cef5cae5213b909", "committedDate": "2020-10-20T20:13:07Z", "message": "Switched to cordova plugin method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNTAyOTc3", "url": "https://github.com/ionic-team/capacitor/pull/3467#pullrequestreview-513502977", "createdAt": "2020-10-21T09:53:17Z", "commit": {"oid": "05dd7301242dc2ea296654070cef5cae5213b909"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1163, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}