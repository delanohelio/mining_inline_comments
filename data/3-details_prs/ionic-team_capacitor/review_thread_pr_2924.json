{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3OTU0NTM0", "number": 2924, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozMjozNFrOEEUqew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozMjozNFrOEEUqew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTY4MzE1OnYy", "diffSide": "RIGHT", "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Keyboard.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozMjozNFrOGh3w7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDozMjozNFrOGh3w7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE2OTgzNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          screenHeight = rootViewHeight - stableInsetBottom;\n          \n          \n            \n                          screenHeight = rootViewHeight;\n          \n          \n            \n                          resultBottom = resultBottom + stableInsetBottom;\n          \n      \n    \n    \n  \n\nI think it makes more sense to add stableInsetBottom to resultBottom instead of substract it from rootViewHeight.\nThe result is the same, but it's better code legibility to add bottom to bottom.", "url": "https://github.com/ionic-team/capacitor/pull/2924#discussion_r438169837", "createdAt": "2020-06-10T14:32:34Z", "author": {"login": "jcesarmobile"}, "path": "android/capacitor/src/main/java/com/getcapacitor/plugin/Keyboard.java", "diffHunk": "@@ -54,18 +55,19 @@ public void onGlobalLayout() {\n             // cache properties for later use\n             int rootViewHeight = rootView.getRootView().getHeight();\n             int resultBottom = r.bottom;\n-\n-            // calculate screen height differently for android versions >= 21: Lollipop 5.x, Marshmallow 6.x\n-            //http://stackoverflow.com/a/29257533/3642890 beware of nexus 5\n             int screenHeight;\n \n-            if (Build.VERSION.SDK_INT >= 21) {\n+            if (Build.VERSION.SDK_INT >= 23) {\n+              WindowInsets windowInsets = rootView.getRootWindowInsets();\n+              int stableInsetBottom = windowInsets.getStableInsetBottom();\n+              screenHeight = rootViewHeight - stableInsetBottom;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "626f856256cd89bcfca410d495d0a3064d85dbb0"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3550, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}