{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MDkwMDkx", "number": 2725, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoxOTozNFrODmrJ9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoyMjo1NVrODmrPCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODc5NTQzOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/src/main/java/org/odpi/openmetadata/adapters/eventbus/topic/kafka/KafkaOpenMetadataEventProducer.java.orig", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoxOTozNFrOF0OYPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoxOTozNFrOF0OYPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDMwNTg1Mw==", "bodyText": "Do we need this file?  I would have expected that we would let Git manage the change history for us, rather than having .orig files scattered around (?)", "url": "https://github.com/odpi/egeria/pull/2725#discussion_r390305853", "createdAt": "2020-03-10T13:19:34Z", "author": {"login": "cmgrote"}, "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/src/main/java/org/odpi/openmetadata/adapters/eventbus/topic/kafka/KafkaOpenMetadataEventProducer.java.orig", "diffHunk": "@@ -0,0 +1,548 @@\n+/* SPDX-License-Identifier: Apache 2.0 */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f058d25bf77acccd4e9c4618c6c4016f8f1a7fe"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODgwMDYzOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/src/main/java/org/odpi/openmetadata/adapters/eventbus/topic/kafka/KafkaOpenMetadataEventProducer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoyMDo1M1rOF0Obbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNjo1NjozOVrOF1AC6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDMwNjY3MQ==", "bodyText": "Formatting isn't following the convention already present in the code:\nif (producer == null)\n{\n   // ...\n}", "url": "https://github.com/odpi/egeria/pull/2725#discussion_r390306671", "createdAt": "2020-03-10T13:20:53Z", "author": {"login": "cmgrote"}, "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/src/main/java/org/odpi/openmetadata/adapters/eventbus/topic/kafka/KafkaOpenMetadataEventProducer.java", "diffHunk": "@@ -99,6 +100,10 @@ private void publishEvent(String event) throws ConnectorCheckedException\n         boolean                  eventSent = false;\n         long                     eventRetryCount = 0;\n \n+        if( producer == null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f058d25bf77acccd4e9c4618c6c4016f8f1a7fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTExOTU5NA==", "bodyText": "If I can be super-picky (sorry!) I'd suggest the conditionals should be:\nif (producer == null)\n{\n   // ...\n}\nAt the moment all the if ... statements look more like function calls with the ( coming immediately after if without any space in-between, and instead a space between the ( and the variable used for comparison -- just looks messy...", "url": "https://github.com/odpi/egeria/pull/2725#discussion_r391119594", "createdAt": "2020-03-11T16:56:39Z", "author": {"login": "cmgrote"}, "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/src/main/java/org/odpi/openmetadata/adapters/eventbus/topic/kafka/KafkaOpenMetadataEventProducer.java", "diffHunk": "@@ -99,6 +100,10 @@ private void publishEvent(String event) throws ConnectorCheckedException\n         boolean                  eventSent = false;\n         long                     eventRetryCount = 0;\n \n+        if( producer == null){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDMwNjY3MQ=="}, "originalCommit": {"oid": "0f058d25bf77acccd4e9c4618c6c4016f8f1a7fe"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODgwODQyOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/src/main/java/org/odpi/openmetadata/adapters/eventbus/topic/kafka/KafkaOpenMetadataEventProducer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoyMjo1NVrOF0OgNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMzoyMjo1NVrOF0OgNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDMwNzg5Mg==", "bodyText": "I don't think we need to log an error here given that we're throwing an exception in the lines immediately following?", "url": "https://github.com/odpi/egeria/pull/2725#discussion_r390307892", "createdAt": "2020-03-10T13:22:55Z", "author": {"login": "cmgrote"}, "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/src/main/java/org/odpi/openmetadata/adapters/eventbus/topic/kafka/KafkaOpenMetadataEventProducer.java", "diffHunk": "@@ -119,7 +124,11 @@ private void publishEvent(String event) throws ConnectorCheckedException\n                 if( !isExceptionRetryable(error)) {\n                     /* kafka thinks this isn't a retryable problem */\n                     /* so let the caller try */\n-                    log.error(\"Exception in sendEvent \" + error.toString());\n+\n+                    producer.close();\n+                    producer = null;\n+\n+                    log.error(\"Execution Exception closed producer \");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0f058d25bf77acccd4e9c4618c6c4016f8f1a7fe"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2423, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}