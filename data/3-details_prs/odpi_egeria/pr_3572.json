{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwNDc2Nzkx", "number": 3572, "title": "# Changed to java.util.concurrent Collections and removed unnecessary syncs.", "bodyText": "Changed synchronized collections to java.util.concurrent Collections.  That collections have atomic methods that more effective and better performance.", "createdAt": "2020-09-05T07:57:30Z", "url": "https://github.com/odpi/egeria/pull/3572", "merged": true, "mergeCommit": {"oid": "4f8a9f9a151b23741d8b2e50db355bd438ac54b2"}, "closed": true, "closedAt": "2020-12-18T09:25:50Z", "author": {"login": "immmus"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdF0--FAH2gAyNDgwNDc2NzkxOjZlYjcxYWI5MzI3NjQyNjk5ZGNkZGYxZjY1MTU2OWQ0MGNkZDRiNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnUMmqgH2gAyNDgwNDc2NzkxOmFkYTY3NzNjNjU3M2Q0YmE5NTdiMWQzNmU3NDYzNDhmNGMyNjg5YTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6eb71ab9327642699dcddf1f651569d40cdd4b59", "author": {"user": {"login": "immmus", "name": "Ilya Ksenofontov"}}, "url": "https://github.com/odpi/egeria/commit/6eb71ab9327642699dcddf1f651569d40cdd4b59", "committedDate": "2020-09-05T07:50:42Z", "message": "# Changed to java.util.concurrent Collections and removed unnecessary syncs.\n\nSigned-off-by: immmus <fonto.trg@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNzMzNDk4", "url": "https://github.com/odpi/egeria/pull/3572#pullrequestreview-490733498", "createdAt": "2020-09-17T15:41:36Z", "commit": {"oid": "6eb71ab9327642699dcddf1f651569d40cdd4b59"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNDgzMDQy", "url": "https://github.com/odpi/egeria/pull/3572#pullrequestreview-491483042", "createdAt": "2020-09-18T13:50:13Z", "commit": {"oid": "6eb71ab9327642699dcddf1f651569d40cdd4b59"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMzo1MDoxM1rOHUOAhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMzo1MDoxM1rOHUOAhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk2MzA3OA==", "bodyText": "why change a specific import to a wildcard ?", "url": "https://github.com/odpi/egeria/pull/3572#discussion_r490963078", "createdAt": "2020-09-18T13:50:13Z", "author": {"login": "wbittles"}, "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/src/main/java/org/odpi/openmetadata/adapters/eventbus/topic/kafka/KafkaOpenMetadataEventConsumer.java", "diffHunk": "@@ -3,14 +3,14 @@\n package org.odpi.openmetadata.adapters.eventbus.topic.kafka;\r\n \r\n import java.time.Duration;\r\n-import java.util.ArrayDeque;\r\n import java.util.Collection;\r\n import java.util.Collections;\r\n import java.util.HashMap;\r\n import java.util.Map;\r\n import java.util.Properties;\r\n import java.util.Queue;\r\n-import java.util.concurrent.TimeUnit;\r\n+import java.util.concurrent.*;\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eb71ab9327642699dcddf1f651569d40cdd4b59"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNDg5NjMz", "url": "https://github.com/odpi/egeria/pull/3572#pullrequestreview-491489633", "createdAt": "2020-09-18T13:56:42Z", "commit": {"oid": "6eb71ab9327642699dcddf1f651569d40cdd4b59"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMzo1Njo0M1rOHUORbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMzo1Njo0M1rOHUORbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk2NzQwNw==", "bodyText": "If the intention of this change is to modernise the code, then should these calls to currentTimeMillis() not be replaced with the more modern time classes, especially as duration is used below", "url": "https://github.com/odpi/egeria/pull/3572#discussion_r490967407", "createdAt": "2020-09-18T13:56:43Z", "author": {"login": "wbittles"}, "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/src/main/java/org/odpi/openmetadata/adapters/eventbus/topic/kafka/KafkaOpenMetadataEventConsumer.java", "diffHunk": "@@ -142,7 +141,7 @@ public void run()\n                 \r\n             \t//if we are close to the timeout, force a poll to avoid having the consumer\r\n             \t//be marked as dead because we have not polled often enough\r\n-            \tboolean pollRequired = System.currentTimeMillis() > maxNextPollTimestampToAvoidConsumerTimeout;\r\n+            \tfinal boolean pollRequired = System.currentTimeMillis() > maxNextPollTimestampToAvoidConsumerTimeout;\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eb71ab9327642699dcddf1f651569d40cdd4b59"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNDkzMDMz", "url": "https://github.com/odpi/egeria/pull/3572#pullrequestreview-491493033", "createdAt": "2020-09-18T14:00:27Z", "commit": {"oid": "6eb71ab9327642699dcddf1f651569d40cdd4b59"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNDowMDoyOFrOHUObBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNDowMDoyOFrOHUObBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk2OTg2MA==", "bodyText": "If it's faster , do we still need this mapToCheck HashMap, it would be far more efficient not to actually make a copy.\nIt would be useful to understand any problem with locking the unprocessedEventQueues", "url": "https://github.com/odpi/egeria/pull/3572#discussion_r490969860", "createdAt": "2020-09-18T14:00:28Z", "author": {"login": "wbittles"}, "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/src/main/java/org/odpi/openmetadata/adapters/eventbus/topic/kafka/KafkaOpenMetadataEventConsumer.java", "diffHunk": "@@ -338,20 +334,10 @@ private boolean checkForFullyProcessedMessages() {\n         }\r\n         log.info(\"Checking for fully processed messages whose offsets need to be committed\");\r\n \r\n-        Map<TopicPartition, Queue<KafkaIncomingEvent>> mapToCheck = null;\r\n-        \r\n-        //Make a copy to minimize the amount of time we need to spent\r\n-        //holding a lock on the map.  If we do not synchronize here, a\r\n-        //concurrent modification exception will be thrown if an\r\n-        //attempt is made to update the map while we are iterating though it\r\n-        synchronized(unprocessedEventQueues) {\r\n-            mapToCheck = new HashMap<TopicPartition, Queue<KafkaIncomingEvent>>(unprocessedEventQueues);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eb71ab9327642699dcddf1f651569d40cdd4b59"}, "originalPosition": 137}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eee91cf8a0d43f88970c9d30b437e5e43a812e35", "author": {"user": {"login": "immmus", "name": "Ilya Ksenofontov"}}, "url": "https://github.com/odpi/egeria/commit/eee91cf8a0d43f88970c9d30b437e5e43a812e35", "committedDate": "2020-09-19T18:21:53Z", "message": "# removed import wildcard\n\nSigned-off-by: immmus <fonto.trg@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef066197cd53a059789cd25ccbdcaa79d52566ab", "author": {"user": {"login": "immmus", "name": "Ilya Ksenofontov"}}, "url": "https://github.com/odpi/egeria/commit/ef066197cd53a059789cd25ccbdcaa79d52566ab", "committedDate": "2020-09-19T18:26:10Z", "message": "# Made variables final\n\nSigned-off-by: immmus <fonto.trg@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d464f433c59fa5f3378d739c2855c8e56f256a1c", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/d464f433c59fa5f3378d739c2855c8e56f256a1c", "committedDate": "2020-12-07T16:41:32Z", "message": "#3572 resolve conflicts\n\nSigned-off-by: Nigel Jones <nigel.l.jones+git@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb381db5b11b9ee9355445d919ad2d934ea2d3d8", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/cb381db5b11b9ee9355445d919ad2d934ea2d3d8", "committedDate": "2020-12-07T16:53:41Z", "message": "Merge branch 'master' of https://github.com/odpi/egeria into immmus-kafka_connector_concurrency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d39bbea225bf4e61b586543f73dd60596cfcffb2", "author": {"user": {"login": "immmus", "name": "Ilya Ksenofontov"}}, "url": "https://github.com/odpi/egeria/commit/d39bbea225bf4e61b586543f73dd60596cfcffb2", "committedDate": "2020-12-08T07:30:06Z", "message": "Merge branch 'master' into kafka_connector_concurrency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62a961cc7226df2345144109ba5eedeace6312e8", "author": {"user": {"login": "bogdan-sava", "name": "Bogdan Sava"}}, "url": "https://github.com/odpi/egeria/commit/62a961cc7226df2345144109ba5eedeace6312e8", "committedDate": "2020-12-11T08:04:37Z", "message": "Merge branch 'master' into kafka_connector_concurrency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afeaaf3e60174e89008c19b43c0727a736982033", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/afeaaf3e60174e89008c19b43c0727a736982033", "committedDate": "2020-12-11T14:33:49Z", "message": "Merge branch 'master' into kafka_connector_concurrency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "686ab2556a5f1ab2c5e310b89160a6902a54724f", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/686ab2556a5f1ab2c5e310b89160a6902a54724f", "committedDate": "2020-12-14T11:17:40Z", "message": "Merge branch 'master' into kafka_connector_concurrency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e55091b7cc49d31abbcdb155fb77f236fa5136d9", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/e55091b7cc49d31abbcdb155fb77f236fa5136d9", "committedDate": "2020-12-16T22:13:58Z", "message": "Merge branch 'master' into kafka_connector_concurrency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ada6773c6573d4ba957b1d36e746348f4c2689a3", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/ada6773c6573d4ba957b1d36e746348f4c2689a3", "committedDate": "2020-12-18T08:52:09Z", "message": "Merge branch 'master' into kafka_connector_concurrency"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3953, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}