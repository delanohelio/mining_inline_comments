{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0MjM3OTkz", "number": 3893, "title": "Add static content server to fix ui server chassis in k8s environment", "bodyText": "Adds new docker image (egeria-static UI) for static content serving\n\n\nCurrently build as part of egeria\ndoes a git pull from egeria-ui\n\nThis is a tactical approach - we really need to create a package and/or docker image within the egeria-ui project, but this will\nbe dependent on adding additional pipelines, so for immediate benefit here we have something that at least works\n\nAdds static content server to k8s chart\n\nAdds a new deployment for the above within our lab environment to act as an example\n\nConfigures egeria ui\nAdds in reference to static content server so requests routed successfully\n\ndocker-compose - still to do/evaluate\ndocs\n.. may be in seperate PRs so we can validate the end to end process including build first\nSee #3884", "createdAt": "2020-10-15T16:42:49Z", "url": "https://github.com/odpi/egeria/pull/3893", "merged": true, "mergeCommit": {"oid": "275c8b76790625dde52f5e09dfb3fbc7671b9923"}, "closed": true, "closedAt": "2020-10-16T13:21:02Z", "author": {"login": "planetf1"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSdzb3AH2gAyNTA0MjM3OTkzOjJlN2Q2ZGY1OTk1ZTZjMTdkYzY5ZjM2ZDczNDY5OWRiM2U5YzcyN2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTGElXAFqTUxMDQ0OTQ0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2e7d6df5995e6c17dc69f36d734699db3e9c727d", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/2e7d6df5995e6c17dc69f36d734699db3e9c727d", "committedDate": "2020-10-14T14:11:18Z", "message": "#3884 add static content server for polymer UI\n\nSigned-off-by: Nigel Jones <nigel.l.jones+git@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac771274f9c17c1ce75148d5863f78b5a383c4eb", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/ac771274f9c17c1ce75148d5863f78b5a383c4eb", "committedDate": "2020-10-14T15:24:03Z", "message": "#3884 Add docker build from git of egeria-ui component\n\nSigned-off-by: Nigel Jones <nigel.l.jones+git@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef2ec91c3bf05c3f6086c9309397c0023249e46f", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/ef2ec91c3bf05c3f6086c9309397c0023249e46f", "committedDate": "2020-10-14T15:56:34Z", "message": "#3884 add static content server to lab helm chart\n\nSigned-off-by: Nigel Jones <nigel.l.jones+git@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e2ffe6505b8382b43907fe8b7d2ce0c00fa1a1b", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/4e2ffe6505b8382b43907fe8b7d2ce0c00fa1a1b", "committedDate": "2020-10-14T16:37:22Z", "message": "Merge branch 'master' of https://github.com/odpi/egeria into issue3884"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19c0057fe1a090ac39689863cedb1ee4d47c5763", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/19c0057fe1a090ac39689863cedb1ee4d47c5763", "committedDate": "2020-10-14T17:50:00Z", "message": "#3884 add static server to lab helm chart\n;\n\nSigned-off-by: Nigel Jones <nigel.l.jones+git@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "929c8e4321b8c03cc3f2ad5587df153a18607bd5", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/929c8e4321b8c03cc3f2ad5587df153a18607bd5", "committedDate": "2020-10-15T13:16:09Z", "message": "#3884 remove explicit polymer install - no longer needed\n\nSigned-off-by: Nigel Jones <nigel.l.jones+git@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be66eae8157d0283e3879f0ff882a8f4407dce09", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/be66eae8157d0283e3879f0ff882a8f4407dce09", "committedDate": "2020-10-15T13:20:53Z", "message": "#3884 Switch source of content for egeria ui static from dev to prod\n\nSigned-off-by: Nigel Jones <nigel.l.jones+git@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0a4d80c30001e5c36f10f05a0d355166c60a37d", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/b0a4d80c30001e5c36f10f05a0d355166c60a37d", "committedDate": "2020-10-15T16:36:35Z", "message": "Merge branch 'master' of https://github.com/odpi/egeria into issue3884"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwMjAyMjYw", "url": "https://github.com/odpi/egeria/pull/3893#pullrequestreview-510202260", "createdAt": "2020-10-16T07:02:20Z", "commit": {"oid": "b0a4d80c30001e5c36f10f05a0d355166c60a37d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwNzowMjoyMFrOHiqJyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwNzowMjoyMFrOHiqJyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjEwNDI2Nw==", "bodyText": "@planetf1 why is maven needed for this?", "url": "https://github.com/odpi/egeria/pull/3893#discussion_r506104267", "createdAt": "2020-10-16T07:02:20Z", "author": {"login": "sarbull"}, "path": "open-metadata-resources/open-metadata-deployment/docker/egeria-uistatic/pom.xml", "diffHunk": "@@ -0,0 +1,146 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!-- SPDX-License-Identifier: Apache-2.0 -->\n+<!-- Copyright Contributors to the ODPi Egeria project. -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+    <parent>\n+        <artifactId>open-metadata-docker</artifactId>\n+        <groupId>org.odpi.egeria</groupId>\n+        <version>2.4-SNAPSHOT</version>\n+    </parent>\n+\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <scm>\n+        <connection>scm:git:git://github.com/odpi/egeria.git</connection>\n+        <developerConnection>scm:git:ssh://github.com/odpi/egeria.git</developerConnection>\n+        <url>http://github.com/odpi/egeria/tree/master</url>\n+    </scm>\n+\n+    <name>Docker image - Configuration</name>\n+    <description>\n+        Samples, Helm charts to configure Egeria and associated components such as docker image build scripts\n+    </description>\n+\n+    <artifactId>open-metadata-docker-uistatic</artifactId>\n+\n+    <packaging>pom</packaging>\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>pl.project13.maven</groupId>\n+                <artifactId>git-commit-id-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>get git version info</id>\n+                        <goals>\n+                            <goal>revision</goal>\n+                        </goals>\n+                        <phase>initialize</phase>\n+                    </execution>\n+                </executions>\n+                <configuration>\n+                    <dotGitDirectory>${maven.multiModuleProjectDirectory}/.git</dotGitDirectory>\n+                    <prefix>git</prefix>\n+                    <dateFormatTimeZone>UTC</dateFormatTimeZone>\n+                    <skipPoms>false</skipPoms>\n+                </configuration>\n+            </plugin>\n+\n+            <!-- Setup the docker build.\n+                 Note - bound to 'install' phase as deploy causes push of maven artifacts\n+            -->\n+            <plugin>\n+                <groupId>com.spotify</groupId>\n+                <artifactId>dockerfile-maven-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>build-and-tag-latest</id>\n+                        <phase>install</phase>\n+                        <goals>\n+                            <goal>build</goal>\n+                        </goals>\n+                        <configuration>\n+                            <tag>${project.version}</tag>\n+                        </configuration>\n+                    </execution>\n+                    <execution>\n+                        <id>tag-version</id>\n+                        <phase>install</phase>\n+                        <goals>\n+                            <goal>tag</goal>\n+                        </goals>\n+                        <configuration>\n+                            <tag>${project.version}</tag>\n+                        </configuration>\n+                    </execution>\n+\n+                    <execution>\n+                        <id>push-version</id>\n+                        <phase>install</phase>\n+                        <goals>\n+                            <goal>push</goal>\n+                        </goals>\n+                        <configuration>\n+                            <tag>${project.version}</tag>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+                <configuration>\n+                    <repository>${docker.registry}/${docker.repo}/egeria-uistatic</repository>\n+                    <buildArgs>\n+                        <VCS_REF>${git.commit.id.describe}</VCS_REF>\n+                        <VCS_DATE>${git.commit.time}</VCS_DATE>\n+                        <BUILD_TIME>${git.build.time}</BUILD_TIME>\n+                        <VCS_ORIGIN>${git.remote.origin.url}</VCS_ORIGIN>\n+                    </buildArgs>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n+    <profiles>\n+        <profile>\n+            <id>tag-latest</id>\n+            <activation>\n+                <property>\n+                    <name>docker.taglatest</name>\n+                </property>\n+            </activation>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>com.spotify</groupId>\n+                        <artifactId>dockerfile-maven-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>tag-latest</id>\n+                                <phase>install</phase>\n+                                <goals>\n+                                    <goal>tag</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <tag>latest</tag>\n+                                </configuration>\n+                            </execution>\n+                            <execution>\n+                                <id>push-latest</id>\n+                                <phase>install</phase>\n+                                <goals>\n+                                    <goal>push</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <tag>latest</tag>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n+    </profiles>\n+\n+</project>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0a4d80c30001e5c36f10f05a0d355166c60a37d"}, "originalPosition": 146}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "120fa415fb85c3ca33abe160030c540c69caac1e", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/120fa415fb85c3ca33abe160030c540c69caac1e", "committedDate": "2020-10-16T11:16:33Z", "message": "#3884 correct zuul proxy url configuratino in odpi-egeria-lab chart\n\nSigned-off-by: Nigel Jones <nigel.l.jones+git@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2809c14a15b9fc4d4be7fad1b1e07f8595819fa", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/e2809c14a15b9fc4d4be7fad1b1e07f8595819fa", "committedDate": "2020-10-16T12:29:55Z", "message": "#3884 Add static content for egeria ui to docker compose\n\nSigned-off-by: Nigel Jones <nigel.l.jones+git@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b216e9c75545959364dc263c98f612c8c7631d21", "author": {"user": {"login": "planetf1", "name": "Nigel Jones"}}, "url": "https://github.com/odpi/egeria/commit/b216e9c75545959364dc263c98f612c8c7631d21", "committedDate": "2020-10-16T12:30:36Z", "message": "Merge branch 'master' of https://github.com/odpi/egeria into issue3884"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDI3NTMy", "url": "https://github.com/odpi/egeria/pull/3893#pullrequestreview-510427532", "createdAt": "2020-10-16T12:36:59Z", "commit": {"oid": "e2809c14a15b9fc4d4be7fad1b1e07f8595819fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMjozNzowMFrOHi6VeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMjozNzowMFrOHi6VeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjM2OTQwMA==", "bodyText": "is this ok?", "url": "https://github.com/odpi/egeria/pull/3893#discussion_r506369400", "createdAt": "2020-10-16T12:37:00Z", "author": {"login": "sarbull"}, "path": "open-metadata-resources/open-metadata-deployment/compose/tutorials/.env", "diffHunk": "@@ -4,7 +4,7 @@\n # Version of egeria to use\n egeria_version=2.4-SNAPSHOT\n # Override if you wish to use images other than from docker hub odpi/egeria etc\n-egeria_repo=odpi\n+egeria_repo=planetf1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2809c14a15b9fc4d4be7fad1b1e07f8595819fa"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDQ5NDQ5", "url": "https://github.com/odpi/egeria/pull/3893#pullrequestreview-510449449", "createdAt": "2020-10-16T13:06:13Z", "commit": {"oid": "b216e9c75545959364dc263c98f612c8c7631d21"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzowNjoxM1rOHi7x3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxMzowNjoxM1rOHi7x3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjM5MzA1NA==", "bodyText": "should have the HTTPS port also", "url": "https://github.com/odpi/egeria/pull/3893#discussion_r506393054", "createdAt": "2020-10-16T13:06:13Z", "author": {"login": "sarbull"}, "path": "open-metadata-resources/open-metadata-deployment/docker/egeria-uistatic/dist/nginx.conf", "diffHunk": "@@ -0,0 +1,15 @@\n+# SPDX-License-Identifier: Apache-2.0\n+# Copyright Contributors to the Egeria project\n+\n+server {\n+    listen 80;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b216e9c75545959364dc263c98f612c8c7631d21"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3832, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}