{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3NTA5NDI2", "number": 3925, "title": "#3928 Adding parent and children rest calls to subject area omas.", "bodyText": "", "createdAt": "2020-10-21T12:46:50Z", "url": "https://github.com/odpi/egeria/pull/3925", "merged": true, "mergeCommit": {"oid": "7e2d239965b329a7a688832222f12abe8c53b1fe"}, "closed": true, "closedAt": "2020-10-23T14:57:09Z", "author": {"login": "davidradl"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSvXXgAH2gAyNTA3NTA5NDI2OjI1M2U3YTg3ZTlkNmIxYjdiMzAzZjFkZGE3NmQxYWE1NzJmYTE1N2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVXdtrgH2gAyNTA3NTA5NDI2OjIzNzliNDJhYzA3ZjRjZmU0YTdlMGNiYTk1Mzg4MDY2ZDdmYmE4NWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "253e7a87e9d6b1b7b303f1dda76d1aa572fa157f", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/253e7a87e9d6b1b7b303f1dda76d1aa572fa157f", "committedDate": "2020-10-15T10:38:56Z", "message": "git3524 new paging requests\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "003b85db421fef540b6e898fd5c84e16cecf915f", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/003b85db421fef540b6e898fd5c84e16cecf915f", "committedDate": "2020-10-15T15:48:32Z", "message": "git3524 fix null pointers with paging\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c68fd670760e6002888ae6cbeafc2baef2240c4", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/4c68fd670760e6002888ae6cbeafc2baef2240c4", "committedDate": "2020-10-16T09:01:41Z", "message": "git3524 fix loop\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b36cea9fc80fa15a129a732c89b89ab4568aa598", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/b36cea9fc80fa15a129a732c89b89ab4568aa598", "committedDate": "2020-10-16T09:05:49Z", "message": "Merge branch 'master' of https://github.com/odpi/egeria into git3524"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04cefb6cff1b69436d641cc8e9eb6124dddf571e", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/04cefb6cff1b69436d641cc8e9eb6124dddf571e", "committedDate": "2020-10-16T10:59:41Z", "message": "git3524 correct compare of effectivity times in FVT\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63f35c8e3187f3c808bde64693978f3c79949374", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/63f35c8e3187f3c808bde64693978f3c79949374", "committedDate": "2020-10-16T13:12:44Z", "message": "git3524 add more FVT tests\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6aac0534f308c9efbf3406a4e299a3ae10b43ded", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/6aac0534f308c9efbf3406a4e299a3ae10b43ded", "committedDate": "2020-10-19T10:32:53Z", "message": "git3524 fix up server to completely fillout objects\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "015b2ac1772cebe122f8cc1d1e254666e5705495", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/015b2ac1772cebe122f8cc1d1e254666e5705495", "committedDate": "2020-10-19T10:43:32Z", "message": "git3524 fix bug in getting term categories\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b520aca31bd7a82fdcd8c266e077eca32bf2e5eb", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/b520aca31bd7a82fdcd8c266e077eca32bf2e5eb", "committedDate": "2020-10-19T10:43:53Z", "message": "Merge branch 'master' of https://github.com/odpi/egeria into git3524"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9eac568f91fae3f3daa94ece6e0914db8893aef", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/c9eac568f91fae3f3daa94ece6e0914db8893aef", "committedDate": "2020-10-19T13:42:30Z", "message": "Merge branch 'master' into git3524"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e60cf5560d9d3114b8860ca5bc558792b2719da", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/2e60cf5560d9d3114b8860ca5bc558792b2719da", "committedDate": "2020-10-21T10:49:44Z", "message": "git3524 parent children glossary author fix\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54add0c7141e678f91b66ecb3fe77283743b4400", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/54add0c7141e678f91b66ecb3fe77283743b4400", "committedDate": "2020-10-21T12:07:18Z", "message": "git3524 address review comments\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c713bf6c6aaac145c6f52b93f17eeb511e2fc66c", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/c713bf6c6aaac145c6f52b93f17eeb511e2fc66c", "committedDate": "2020-10-21T12:47:50Z", "message": "Merge branch 'master' of https://github.com/odpi/egeria into git3524-2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNzExMjEw", "url": "https://github.com/odpi/egeria/pull/3925#pullrequestreview-513711210", "createdAt": "2020-10-21T13:52:58Z", "commit": {"oid": "c713bf6c6aaac145c6f52b93f17eeb511e2fc66c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxMzo1Mjo1OFrOHltkMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxMzo1MzoyNFrOHltmWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMwNTkwNw==", "bodyText": "Remove please package org.odpi.openmetadata.commonservices.ffdc.exceptions.", "url": "https://github.com/odpi/egeria/pull/3925#discussion_r509305907", "createdAt": "2020-10-21T13:52:58Z", "author": {"login": "immmus"}, "path": "open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaHandler.java", "diffHunk": "@@ -133,25 +141,102 @@ CategorySummary getCategorySummary(String restAPIName,\n                                                    Class<? extends INodeMapper<T>> mapperClass,\n                                                    String methodName) throws SubjectAreaCheckedException,\n                                                                              PropertyServerException,\n-                                                                             UserNotAuthorizedException\n-    {\n+                                                                             UserNotAuthorizedException, org.odpi.openmetadata.commonservices.ffdc.exceptions.InvalidParameterException {\n         List<EntityDetail> entityDetails = null;\n         List<T> foundEntities = null;\n+\n+        if (findRequest.getPageSize() == null) {\n+            findRequest.setPageSize(invalidParameterHandler.getMaxPagingSize());\n+        }\n+        invalidParameterHandler.validatePaging(findRequest.getStartingFrom(), findRequest.getPageSize(), methodName);\n         if (findRequest.getSearchCriteria() == null) {\n             entityDetails = oMRSAPIHelper.getEntitiesByType(methodName, userId, typeEntityName, findRequest);\n         } else {\n             entityDetails = oMRSAPIHelper.findEntitiesByPropertyValue(methodName, userId, typeEntityName, findRequest);\n         }\n         if (entityDetails != null) {\n-            INodeMapper<T> iNodeMapper = mappersFactory.get(mapperClass);\n-            foundEntities = new ArrayList<>();\n-            for (EntityDetail entityDetail : entityDetails) {\n-                foundEntities.add(iNodeMapper.map(entityDetail));\n-            }\n+            foundEntities = convertOmrsToOmas(entityDetails, mapperClass);\n         }\n         return foundEntities;\n     }\n \n+    /**\n+     * Get the related nodes from end 1 of a given type of relationship\n+     * @param methodName           name of the method being called.\n+     * @param userId               unique identifier for requesting user, under which the request is performed\n+     * @param guid                 guid\n+     * @param relationshipTypeName relationship type name\n+     * @param mapperClass          mapper class used to get the type name of the Node to return\n+     * @param startingFrom         retrieve items starting from this location\n+     * @param pageSize             maximum size of the returned items\n+     * @return response containing the the related Nodes if there are any\n+     */\n+    public <T extends Node> SubjectAreaOMASAPIResponse<T> getRelatedNodesForEnd1(String methodName,\n+                                                                                 String userId,\n+                                                                                 String guid,\n+                                                                                 String relationshipTypeName,\n+                                                                                 Class<? extends INodeMapper<T>> mapperClass,\n+                                                                                 Integer startingFrom,\n+                                                                                 Integer pageSize) {\n+        SubjectAreaOMASAPIResponse<T> response = new SubjectAreaOMASAPIResponse<>();\n+\n+        try {\n+            if (pageSize == null) {\n+               pageSize = maxPageSize;\n+            }\n+            invalidParameterHandler.validatePaging(startingFrom, pageSize, methodName);\n+            final INodeMapper<T> mapper = mappersFactory.get(mapperClass);\n+            List<EntityDetail> entityDetails= oMRSAPIHelper.callGetEntitiesForRelationshipEnd1(\n+                        methodName, userId, guid, mapper.getTypeName(), relationshipTypeName, startingFrom, pageSize);\n+            if (entityDetails != null) {\n+                for (EntityDetail entityDetail : entityDetails) {\n+                    response.addResult(mapper.map(entityDetail));\n+                }\n+            }\n+        } catch (UserNotAuthorizedException | SubjectAreaCheckedException | PropertyServerException | org.odpi.openmetadata.commonservices.ffdc.exceptions.InvalidParameterException e) {\n+            response.setExceptionInfo(e, className);\n+        }\n+        return response;\n+    }\n+    /**\n+     * Get the related nodes from end 2 of a given type of relationship\n+     * @param methodName           name of the method being called.\n+     * @param userId               unique identifier for requesting user, under which the request is performed\n+     * @param guid                 guid\n+     * @param relationshipTypeName relationship type name\n+     * @param mapperClass          mapper class used to get the type name of the Node to return\n+     * @param startingFrom         retrieve items starting from this location\n+     * @param pageSize             maximum size of the returned items\n+     * @return response containing the the related Nodes if there are any\n+     */\n+    public <T extends Node> SubjectAreaOMASAPIResponse<T> getRelatedNodesForEnd2(String methodName,\n+                                                                                 String userId,\n+                                                                                 String guid,\n+                                                                                 String relationshipTypeName,\n+                                                                                 Class<? extends INodeMapper<T>> mapperClass,\n+                                                                                 Integer startingFrom,\n+                                                                                 Integer pageSize) {\n+        SubjectAreaOMASAPIResponse<T> response = new SubjectAreaOMASAPIResponse<>();\n+\n+        try {\n+            if (pageSize == null) {\n+                pageSize = maxPageSize;\n+            }\n+            invalidParameterHandler.validatePaging(startingFrom, pageSize, methodName);\n+            final INodeMapper<T> mapper = mappersFactory.get(mapperClass);\n+            List<EntityDetail> entityDetails = oMRSAPIHelper.callGetEntitiesForRelationshipEnd2(\n+                   methodName, userId, guid, mapper.getTypeName(), relationshipTypeName, startingFrom, pageSize);\n+            if (entityDetails != null) {\n+                for (EntityDetail entityDetail : entityDetails) {\n+                    response.addResult(mapper.map(entityDetail));\n+                }\n+            }\n+        } catch (UserNotAuthorizedException | SubjectAreaCheckedException | PropertyServerException | org.odpi.openmetadata.commonservices.ffdc.exceptions.InvalidParameterException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c713bf6c6aaac145c6f52b93f17eeb511e2fc66c"}, "originalPosition": 143}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMwNjE1Ng==", "bodyText": "Remove please package org.odpi.openmetadata.commonservices.ffdc.exceptions.", "url": "https://github.com/odpi/egeria/pull/3925#discussion_r509306156", "createdAt": "2020-10-21T13:53:09Z", "author": {"login": "immmus"}, "path": "open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaHandler.java", "diffHunk": "@@ -168,10 +253,15 @@ CategorySummary getCategorySummary(String restAPIName,\n     {\n         SubjectAreaOMASAPIResponse<Line> response = new SubjectAreaOMASAPIResponse<>();\n         try {\n+            if (findRequest.getPageSize() == null) {\n+                findRequest.setPageSize(invalidParameterHandler.getMaxPagingSize());\n+            }\n+            invalidParameterHandler.validatePaging(findRequest.getStartingFrom(), findRequest.getPageSize(), methodName);\n             response.addAllResults(getAllLineForEntity(methodName, userId, guid, findRequest));\n-        } catch (UserNotAuthorizedException | SubjectAreaCheckedException | PropertyServerException e) {\n+        } catch (UserNotAuthorizedException | SubjectAreaCheckedException | PropertyServerException | org.odpi.openmetadata.commonservices.ffdc.exceptions.InvalidParameterException  e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c713bf6c6aaac145c6f52b93f17eeb511e2fc66c"}, "originalPosition": 162}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMwNjMwNA==", "bodyText": "Remove please package org.odpi.openmetadata.commonservices.ffdc.exceptions.", "url": "https://github.com/odpi/egeria/pull/3925#discussion_r509306304", "createdAt": "2020-10-21T13:53:16Z", "author": {"login": "immmus"}, "path": "open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaHandler.java", "diffHunk": "@@ -193,7 +283,11 @@ CategorySummary getCategorySummary(String restAPIName,\n                                            String entityGuid,\n                                            FindRequest findRequest) throws SubjectAreaCheckedException,\n                                                                            PropertyServerException,\n-                                                                           UserNotAuthorizedException {\n+                                                                           UserNotAuthorizedException, org.odpi.openmetadata.commonservices.ffdc.exceptions.InvalidParameterException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c713bf6c6aaac145c6f52b93f17eeb511e2fc66c"}, "originalPosition": 174}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMwNjQ1OQ==", "bodyText": "Remove please package org.odpi.openmetadata.commonservices.ffdc.exceptions.", "url": "https://github.com/odpi/egeria/pull/3925#discussion_r509306459", "createdAt": "2020-10-21T13:53:24Z", "author": {"login": "immmus"}, "path": "open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaProjectHandler.java", "diffHunk": "@@ -155,7 +156,7 @@ public SubjectAreaProjectHandler(OMRSAPIHelper oMRSAPIHelper) {\n             } else {\n                 return response;\n             }\n-        } catch (SubjectAreaCheckedException | PropertyServerException | UserNotAuthorizedException e) {\n+        } catch (SubjectAreaCheckedException | PropertyServerException | UserNotAuthorizedException | org.odpi.openmetadata.commonservices.ffdc.exceptions.InvalidParameterException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c713bf6c6aaac145c6f52b93f17eeb511e2fc66c"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0ODY1MDQy", "url": "https://github.com/odpi/egeria/pull/3925#pullrequestreview-514865042", "createdAt": "2020-10-22T15:39:21Z", "commit": {"oid": "08642e57cae5cdcd171cd0677edd1404034a7324"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTozOToyMVrOHmn_sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTozOToyMVrOHmn_sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI2MzIxOQ==", "bodyText": "I really don't like how methods like this are written. But, unfortunately, I do not have time to show you how I would have done it ...\nI am very sorry about this ...", "url": "https://github.com/odpi/egeria/pull/3925#discussion_r510263219", "createdAt": "2020-10-22T15:39:21Z", "author": {"login": "immmus"}, "path": "open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaCategoryHandler.java", "diffHunk": "@@ -423,4 +412,95 @@ private void updateAttributes(Category currentCategory, Category newTerm) {\n \n         return response;\n     }\n+\n+    /**\n+     * Get the terms that are categorized by this Category\n+     *\n+     * @param userId       unique identifier for requesting user, under which the request is performed\n+     * @param guid         guid of the category to get terms\n+     * @param termHandler term handler\n+     * @param startingFrom initial position in the stored list.\n+     * @param pageSize     maximum number of definitions to return on this call.\n+     * @return A list of terms is categorized by this Category\n+     * when not successful the following Exception responses can occur\n+     * <ul>\n+     * <li> UserNotAuthorizedException           the requesting user is not authorized to issue this request.</li>\n+     * <li> InvalidParameterException            one of the parameters is null or invalid.</li>\n+     * <li> PropertyServerException              Property server exception. </li>\n+     * </ul>\n+     * */\n+    public SubjectAreaOMASAPIResponse<Term> getCategorizedTerms(String userId, String guid, SubjectAreaTermHandler termHandler, int startingFrom, Integer pageSize) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08642e57cae5cdcd171cd0677edd1404034a7324"}, "originalPosition": 155}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acebcf76835b7bba99808a479b53904bd81d6303", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/acebcf76835b7bba99808a479b53904bd81d6303", "committedDate": "2020-10-23T09:07:21Z", "message": "git3524 correct javadoc\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2c34663411d8eec1d1817d13d661b2cd16cb957", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/b2c34663411d8eec1d1817d13d661b2cd16cb957", "committedDate": "2020-10-22T16:32:56Z", "message": "Merge branch 'master' into git3524-2"}, "afterCommit": {"oid": "acebcf76835b7bba99808a479b53904bd81d6303", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/acebcf76835b7bba99808a479b53904bd81d6303", "committedDate": "2020-10-23T09:07:21Z", "message": "git3524 correct javadoc\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06a2d6aba3027a064c335c707f243a8cff0ae685", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/06a2d6aba3027a064c335c707f243a8cff0ae685", "committedDate": "2020-10-23T09:28:14Z", "message": "Merge branch 'master' into git3524-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d389dcc83c1ad6a1418df21cf3b2f771455482ed", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/d389dcc83c1ad6a1418df21cf3b2f771455482ed", "committedDate": "2020-10-23T13:39:58Z", "message": "Merge branch 'master' into git3524-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1edc5d8fc1c90e12e1fbd1ea3708fd38fbecb692", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/1edc5d8fc1c90e12e1fbd1ea3708fd38fbecb692", "committedDate": "2020-10-23T13:52:35Z", "message": "Merge branch 'master' into git3524-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2379b42ac07f4cfe4a7e0cba95388066d7fba85a", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/2379b42ac07f4cfe4a7e0cba95388066d7fba85a", "committedDate": "2020-10-23T14:29:55Z", "message": "Merge branch 'master' into git3524-2"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3840, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}