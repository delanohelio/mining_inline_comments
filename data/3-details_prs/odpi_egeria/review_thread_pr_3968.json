{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwNjE3MTc3", "number": 3968, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwOTo1MzoxMVrOEyQ--A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwOTo1MzozNVrOEyQ_lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMTQyNTIwOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/main/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/graph/LineageGraphConnectorHelper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwOTo1MzoxMVrOHoznSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwOTo1MzoxMVrOHoznSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU1MDcyOA==", "bodyText": "Lets remove e.printStackTrace();", "url": "https://github.com/odpi/egeria/pull/3968#discussion_r512550728", "createdAt": "2020-10-27T09:53:11Z", "author": {"login": "lpalashevski"}, "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/main/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/graph/LineageGraphConnectorHelper.java", "diffHunk": "@@ -113,17 +119,32 @@ public LineageGraphConnectorHelper(GraphTraversalSource graphTraversalSource) {\n             return Optional.empty();\n         }\n         String edgeLabel = edgeLabelOptional.get();\n-\n-        Graph sourceGraph = (Graph)\n-                g.V().has(PROPERTY_KEY_ENTITY_GUID, guid).\n-                        until(inE(edgeLabel).count().is(0)).\n-                        repeat((Traversal) inE(edgeLabel).subgraph(\"subGraph\").outV().simplePath()).\n-                        cap(\"subGraph\").next();\n-\n-        List<Vertex> sourcesList = g.V().has(PROPERTY_KEY_ENTITY_GUID, guid).\n-                until(inE(edgeLabel).count().is(0)).\n-                repeat(inE(edgeLabel).outV().simplePath()).\n-                dedup().toList();\n+        Graph sourceGraph = null;\n+        List<Vertex> sourcesList = null;\n+\n+        try {\n+            sourceGraph = (Graph)\n+                    g.V().has(PROPERTY_KEY_ENTITY_GUID, guid).\n+                            until(inE(edgeLabel).count().is(0)).\n+                            repeat((Traversal) inE(edgeLabel).subgraph(\"subGraph\").outV().simplePath()).\n+                            cap(\"subGraph\").next();\n+\n+            sourcesList = g.V().has(PROPERTY_KEY_ENTITY_GUID, guid).\n+                    until(inE(edgeLabel).count().is(0)).\n+                    repeat(inE(edgeLabel).outV().simplePath()).\n+                    dedup().toList();\n+\n+            if(supportingTransactions){\n+                g.tx().commit();\n+            }\n+        }catch (Exception e){\n+            if(supportingTransactions) {\n+                g.tx().rollback();\n+            }\n+            log.error(\"Exception while querying ultimate source horizontal lineage of guid \" + guid + \". Executed rollback.\");\n+            log.error(\"Message: \" + e.getMessage());\n+            e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87f248613b714cf433d7ada044c8adbfcaf78d5b"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxMTQyNjc4OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/main/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/graph/LineageGraphConnectorHelper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwOTo1MzozNVrOHozoUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwOTo1MzozNVrOHozoUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU1MDk5NQ==", "bodyText": "same here, lets remove e.printStackTrace() from all related methods", "url": "https://github.com/odpi/egeria/pull/3968#discussion_r512550995", "createdAt": "2020-10-27T09:53:35Z", "author": {"login": "lpalashevski"}, "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/main/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/graph/LineageGraphConnectorHelper.java", "diffHunk": "@@ -142,17 +163,32 @@ public LineageGraphConnectorHelper(GraphTraversalSource graphTraversalSource) {\n             return Optional.empty();\n         }\n         String edgeLabel = edgeLabelOptional.get();\n-\n-        Graph destinationGraph = (Graph)\n-                g.V().has(PROPERTY_KEY_ENTITY_GUID, guid)\n-                        .until(outE(edgeLabel).count().is(0))\n-                        .repeat((Traversal) outE(edgeLabel).subgraph(\"subGraph\").inV().simplePath())\n-                        .cap(\"subGraph\").next();\n-\n-        List<Vertex> destinationsList = g.V().has(PROPERTY_KEY_ENTITY_GUID, guid).\n-                until(outE(edgeLabel).count().is(0)).\n-                repeat(outE(edgeLabel).inV().simplePath()).\n-                dedup().toList();\n+        Graph destinationGraph = null;\n+        List<Vertex> destinationsList = null;\n+\n+        try{\n+            destinationGraph = (Graph)\n+                    g.V().has(PROPERTY_KEY_ENTITY_GUID, guid)\n+                            .until(outE(edgeLabel).count().is(0))\n+                            .repeat((Traversal) outE(edgeLabel).subgraph(\"subGraph\").inV().simplePath())\n+                            .cap(\"subGraph\").next();\n+\n+            destinationsList = g.V().has(PROPERTY_KEY_ENTITY_GUID, guid).\n+                    until(outE(edgeLabel).count().is(0)).\n+                    repeat(outE(edgeLabel).inV().simplePath()).\n+                    dedup().toList();\n+\n+            if(supportingTransactions){\n+                g.tx().commit();\n+            }\n+        }catch (Exception e){\n+            if(supportingTransactions) {\n+                g.tx().rollback();\n+            }\n+            log.error(\"Exception while querying ultimate destination horizontal lineage of guid \" + guid + \". Executed rollback.\");\n+            log.error(\"Message: \" + e.getMessage());\n+            e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87f248613b714cf433d7ada044c8adbfcaf78d5b"}, "originalPosition": 117}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2505, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}