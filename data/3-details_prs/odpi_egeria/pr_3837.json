{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMDIyOTQ3", "number": 3837, "title": "Git3753 at Categories as a sub-object of Term", "bodyText": "", "createdAt": "2020-10-08T15:50:32Z", "url": "https://github.com/odpi/egeria/pull/3837", "merged": true, "mergeCommit": {"oid": "8f226d8f21fadfbd0a777fa8df22a58d973a9818"}, "closed": true, "closedAt": "2020-10-12T09:41:39Z", "author": {"login": "davidradl"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP4F_0AH2gAyNTAwMDIyOTQ3OmY5NzVlNGY2NTcwMzk5NTU2YTVlODNjNmMzZDdhM2QzMTFhMTE3YmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdRwNNQgH2gAyNTAwMDIyOTQ3Ojk2NmRmYjI4MGNjYmExMTAwZjMyYTMzOTA5MDkzNmYwZDVhYTc3ZTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f975e4f6570399556a5e83c6c3d7a3d311a117bf", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/f975e4f6570399556a5e83c6c3d7a3d311a117bf", "committedDate": "2020-10-06T13:07:20Z", "message": "git3753 add in basic categories support\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e773f1d0d968d7e6bee3e3e12664efdf9a17357", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/5e773f1d0d968d7e6bee3e3e12664efdf9a17357", "committedDate": "2020-10-06T14:09:57Z", "message": "git3753 fix up so the existing Subject Area OMAS FVT tests succeed\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0df869d4a1f01bd71d01213ed43c764faff7b0f5", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/0df869d4a1f01bd71d01213ed43c764faff7b0f5", "committedDate": "2020-10-06T21:13:34Z", "message": "Merge branch 'master' of https://github.com/odpi/egeria into git3753"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a659beb533842a4995c2b4d3e5c0d82d90f1cfd4", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/a659beb533842a4995c2b4d3e5c0d82d90f1cfd4", "committedDate": "2020-10-08T14:30:37Z", "message": "git3753 add term categories\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a24f7c516761c8d5984400a1bfca786ddbbc7ff", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/0a24f7c516761c8d5984400a1bfca786ddbbc7ff", "committedDate": "2020-10-08T14:33:33Z", "message": "git3753 remove debug lines\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "271ec8be2f4e455d1378b7d83b1b9b827ade2929", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/271ec8be2f4e455d1378b7d83b1b9b827ade2929", "committedDate": "2020-10-08T14:34:53Z", "message": "git3753 remove more debug lines\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5224e0bc0ea58f81a251bcd88d8aec6eb0d18fd0", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/5224e0bc0ea58f81a251bcd88d8aec6eb0d18fd0", "committedDate": "2020-10-08T15:07:10Z", "message": "git3753 fix bug in test case\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fee3c8eb8eff91eb011767b741d7dd0b91d5f81c", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/fee3c8eb8eff91eb011767b741d7dd0b91d5f81c", "committedDate": "2020-10-08T15:47:12Z", "message": "git3753 add SubjectAreaDefinition testing\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f64be83909d546abedf69b61d06733515631ac5b", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/f64be83909d546abedf69b61d06733515631ac5b", "committedDate": "2020-10-08T15:47:48Z", "message": "Merge branch 'master' of https://github.com/odpi/egeria into git3753"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c707911e06d7b2721627d862c1017c0708a1a09e", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/c707911e06d7b2721627d862c1017c0708a1a09e", "committedDate": "2020-10-09T09:14:23Z", "message": "Merge branch 'master' into git3753"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MTY0NzU0", "url": "https://github.com/odpi/egeria/pull/3837#pullrequestreview-506164754", "createdAt": "2020-10-11T10:18:38Z", "commit": {"oid": "c707911e06d7b2721627d862c1017c0708a1a09e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMDoxODozOFrOHfmTMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMDoyMToyOFrOHfmUZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg5NTQxMQ==", "bodyText": "Could you split all of this big logic on a few methods? Otherwise this method is very big and hard to read", "url": "https://github.com/odpi/egeria/pull/3837#discussion_r502895411", "createdAt": "2020-10-11T10:18:38Z", "author": {"login": "immmus"}, "path": "open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaTermHandler.java", "diffHunk": "@@ -295,17 +387,60 @@ private void setGlossary(String userId, Term term, String methodName) throws Sub\n                             oMRSAPIHelper.callOMRSDeClassifyEntity(methodName, userId, guid, deClassifyName);\n                         }\n                     }\n+\n+                    List<CategorySummary> suppliedCategories = suppliedTerm.getCategories();\n+                    if (suppliedCategories==null && !isReplace) {\n+                        // in the update case with null categories supplied then do not change anything.\n+                    } else {\n+                        Set<String> deleteCategorizationGuidSet = new HashSet<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c707911e06d7b2721627d862c1017c0708a1a09e"}, "originalPosition": 239}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg5NTUyMw==", "bodyText": "Please make these fields to final.", "url": "https://github.com/odpi/egeria/pull/3837#discussion_r502895523", "createdAt": "2020-10-11T10:19:43Z", "author": {"login": "immmus"}, "path": "open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaTermHandler.java", "diffHunk": "@@ -38,6 +40,9 @@\n  */\n public class SubjectAreaTermHandler extends SubjectAreaHandler {\n     private static final String className = SubjectAreaTermHandler.class.getName();\n+    private TermAnchorMapper termAnchorMapper;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c707911e06d7b2721627d862c1017c0708a1a09e"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg5NTcxOA==", "bodyText": "Please move this logic to another method.", "url": "https://github.com/odpi/egeria/pull/3837#discussion_r502895718", "createdAt": "2020-10-11T10:21:28Z", "author": {"login": "immmus"}, "path": "open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/handlers/SubjectAreaTermHandler.java", "diffHunk": "@@ -95,17 +104,34 @@ public SubjectAreaTermHandler(OMRSAPIHelper oMRSAPIHelper) {\n                 TermMapper termMapper = mappersFactory.get(TermMapper.class);\n                 EntityDetail termEntityDetail = termMapper.map(suppliedTerm);\n                 GlossarySummary suppliedGlossary = suppliedTerm.getGlossary();\n+                List<CategorySummary> suppliedCategorysummaries = suppliedTerm.getCategories();\n \n                 String glossaryGuid = validateGlossarySummaryDuringCreation(userId, methodName, suppliedGlossary);\n+                validateCategoriesDuringCreation(userId,methodName,suppliedCategorysummaries);\n                 createdTermGuid = oMRSAPIHelper.callOMRSAddEntity(methodName, userId, termEntityDetail);\n                 if (createdTermGuid != null) {\n                     TermAnchor termAnchor = new TermAnchor();\n                     termAnchor.getEnd1().setNodeGuid(glossaryGuid);\n                     termAnchor.getEnd2().setNodeGuid(createdTermGuid);\n-                    TermAnchorMapper termAnchorMapper = mappersFactory.get(TermAnchorMapper.class);\n+\n                     Relationship relationship = termAnchorMapper.map(termAnchor);\n                     oMRSAPIHelper.callOMRSAddRelationship(methodName, userId, relationship);\n                     response = getTermByGuid(userId, createdTermGuid);\n+                    if (response.getRelatedHTTPCode() == 200) {\n+                        if (suppliedCategorysummaries != null && suppliedCategorysummaries.size() >0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c707911e06d7b2721627d862c1017c0708a1a09e"}, "originalPosition": 72}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MTY1NTkx", "url": "https://github.com/odpi/egeria/pull/3837#pullrequestreview-506165591", "createdAt": "2020-10-11T10:29:20Z", "commit": {"oid": "c707911e06d7b2721627d862c1017c0708a1a09e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMDoyOToyMVrOHfmXgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMDoyOToyMVrOHfmXgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjg5NjUxNQ==", "bodyText": "This method is not used. Please remove it.", "url": "https://github.com/odpi/egeria/pull/3837#discussion_r502896515", "createdAt": "2020-10-11T10:29:21Z", "author": {"login": "immmus"}, "path": "open-metadata-implementation/access-services/subject-area/subject-area-server/src/main/java/org/odpi/openmetadata/accessservices/subjectarea/utilities/SubjectAreaUtils.java", "diffHunk": "@@ -151,6 +151,19 @@ public static GlossarySummary extractGlossarySummaryFromGlossary(Glossary glossa\n         extractNodeSummary(glossary, line, glossarySummary);\n         return glossarySummary;\n     }\n+    /**\n+     * Extract category Summary\n+     *\n+     * @param category the category that is to be summarised\n+     * @param line     the line to the category, which feeds part of the node summary\n+     * @return Category Summary or null\n+     */\n+    public static CategorySummary extractGlossarySummaryFromGlossary(Category category, Line line) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c707911e06d7b2721627d862c1017c0708a1a09e"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebc85e47b07b2e8b1fceb563b4ff6c6ec6aad887", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/ebc85e47b07b2e8b1fceb563b4ff6c6ec6aad887", "committedDate": "2020-10-12T08:26:53Z", "message": "Merge branch 'master' of https://github.com/odpi/egeria into git3753"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e42b40607c9805d66f7e0025f5849d398b3c62ca", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/e42b40607c9805d66f7e0025f5849d398b3c62ca", "committedDate": "2020-10-12T08:27:15Z", "message": "Merge branch 'git3753' of https://github.com/davidradl/egeria into git3753"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "966dfb280ccba1100f32a339090936f0d5aa77e4", "author": {"user": {"login": "davidradl", "name": "David Radley"}}, "url": "https://github.com/odpi/egeria/commit/966dfb280ccba1100f32a339090936f0d5aa77e4", "committedDate": "2020-10-12T09:03:49Z", "message": "#3753 Amend after review feedback\n\nSigned-off-by: David Radley <david_radley@uk.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3859, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}