{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3MDA2NDY0", "number": 3386, "reviewThreads": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoxMDozOFrOES1H_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMToxMTowNFrOETomPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTgwMjIwOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-spring/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/server/spring/AssetLineageResource.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoxMDozOFrOG4Od7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNDoxNjo1NFrOG6KNag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYxMDQ3Ng==", "bodyText": "Generally rest api focusses on a noun (the resource) and a verb - only convention, but just stands out as a slightly odd name (minor)", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461610476", "createdAt": "2020-07-28T14:10:38Z", "author": {"login": "planetf1"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-spring/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/server/spring/AssetLineageResource.java", "diffHunk": "@@ -5,18 +5,33 @@\n import io.swagger.v3.oas.annotations.ExternalDocumentation;\n import io.swagger.v3.oas.annotations.tags.Tag;\n import org.odpi.openmetadata.accessservices.assetlineage.server.AssetLineageRestServices;\n+import org.odpi.openmetadata.commonservices.ffdc.rest.GUIDListResponse;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.PathVariable;\n import org.springframework.web.bind.annotation.RequestMapping;\n import org.springframework.web.bind.annotation.RestController;\n \n \n @RestController\n @RequestMapping(\"/servers/{serverName}/open-metadata/access-services/asset-lineage/users/{userId}/\")\n \n-@Tag(name=\"Asset Lineage OMAS\", description=\"The Asset Lineage OMAS provides services to query the lineage of business terms and data assets.\", externalDocs=@ExternalDocumentation(description=\"Asset Lineage Open Metadata Access Service (OMAS)\",url=\"https://egeria.odpi.org/open-metadata-implementation/access-services/asset-lineage/\"))\n+@Tag(name = \"Asset Lineage OMAS\", description = \"The Asset Lineage OMAS provides services to query the lineage of business terms and data assets.\", externalDocs = @ExternalDocumentation(description = \"Asset Lineage Open Metadata Access Service (OMAS)\", url = \"https://egeria.odpi.org/open-metadata-implementation/access-services/asset-lineage/\"))\n public class AssetLineageResource {\n \n     private final AssetLineageRestServices restAPI = new AssetLineageRestServices();\n \n-\n-\n+    /**\n+     * Scan the cohort based on the given entity type\n+     *\n+     * @param serverName name of server instance to call\n+     * @param userId     the name of the calling user\n+     * @param entityType the name of the relationship type\n+     * @return a list of unique identifiers (guids) of the available entities with the given type provided as a response\n+     */\n+    @GetMapping(path = \"/initial-load-by-entity-type/{entityType}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkyNjg5NQ==", "bodyText": "@planetf1 agreed. Initial load and a get seems odd. How about a method name of getEntityGuids or getEntityGuidsByType.\nOn the url I would expect a segment with the name of the resource followed by a resource identifier. The urldoes not following this pattern. In this scheme I would expect the the entityType to be a query param not in the url. I suggest  /entity-guids?entityType={entityType}", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462926895", "createdAt": "2020-07-30T11:19:20Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-spring/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/server/spring/AssetLineageResource.java", "diffHunk": "@@ -5,18 +5,33 @@\n import io.swagger.v3.oas.annotations.ExternalDocumentation;\n import io.swagger.v3.oas.annotations.tags.Tag;\n import org.odpi.openmetadata.accessservices.assetlineage.server.AssetLineageRestServices;\n+import org.odpi.openmetadata.commonservices.ffdc.rest.GUIDListResponse;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.PathVariable;\n import org.springframework.web.bind.annotation.RequestMapping;\n import org.springframework.web.bind.annotation.RestController;\n \n \n @RestController\n @RequestMapping(\"/servers/{serverName}/open-metadata/access-services/asset-lineage/users/{userId}/\")\n \n-@Tag(name=\"Asset Lineage OMAS\", description=\"The Asset Lineage OMAS provides services to query the lineage of business terms and data assets.\", externalDocs=@ExternalDocumentation(description=\"Asset Lineage Open Metadata Access Service (OMAS)\",url=\"https://egeria.odpi.org/open-metadata-implementation/access-services/asset-lineage/\"))\n+@Tag(name = \"Asset Lineage OMAS\", description = \"The Asset Lineage OMAS provides services to query the lineage of business terms and data assets.\", externalDocs = @ExternalDocumentation(description = \"Asset Lineage Open Metadata Access Service (OMAS)\", url = \"https://egeria.odpi.org/open-metadata-implementation/access-services/asset-lineage/\"))\n public class AssetLineageResource {\n \n     private final AssetLineageRestServices restAPI = new AssetLineageRestServices();\n \n-\n-\n+    /**\n+     * Scan the cohort based on the given entity type\n+     *\n+     * @param serverName name of server instance to call\n+     * @param userId     the name of the calling user\n+     * @param entityType the name of the relationship type\n+     * @return a list of unique identifiers (guids) of the available entities with the given type provided as a response\n+     */\n+    @GetMapping(path = \"/initial-load-by-entity-type/{entityType}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYxMDQ3Ng=="}, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzYzNTczNA==", "bodyText": "I agree that we can improve the action name for this endpoint. However, this is not regular get resource endpoint that returns result but a trigger to a processing operation that will in turn publish the results as events. It is more like action command endpoint. In its nature it is more close to async call but I am not sure if this is important for the naming/design convention. In absence of @danielaotelea  I suggest to change the name to something like /triggerInitialLoadByType/{entityType} or /initialLoadByType/{entityType}", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r463635734", "createdAt": "2020-07-31T14:12:59Z", "author": {"login": "lpalashevski"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-spring/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/server/spring/AssetLineageResource.java", "diffHunk": "@@ -5,18 +5,33 @@\n import io.swagger.v3.oas.annotations.ExternalDocumentation;\n import io.swagger.v3.oas.annotations.tags.Tag;\n import org.odpi.openmetadata.accessservices.assetlineage.server.AssetLineageRestServices;\n+import org.odpi.openmetadata.commonservices.ffdc.rest.GUIDListResponse;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.PathVariable;\n import org.springframework.web.bind.annotation.RequestMapping;\n import org.springframework.web.bind.annotation.RestController;\n \n \n @RestController\n @RequestMapping(\"/servers/{serverName}/open-metadata/access-services/asset-lineage/users/{userId}/\")\n \n-@Tag(name=\"Asset Lineage OMAS\", description=\"The Asset Lineage OMAS provides services to query the lineage of business terms and data assets.\", externalDocs=@ExternalDocumentation(description=\"Asset Lineage Open Metadata Access Service (OMAS)\",url=\"https://egeria.odpi.org/open-metadata-implementation/access-services/asset-lineage/\"))\n+@Tag(name = \"Asset Lineage OMAS\", description = \"The Asset Lineage OMAS provides services to query the lineage of business terms and data assets.\", externalDocs = @ExternalDocumentation(description = \"Asset Lineage Open Metadata Access Service (OMAS)\", url = \"https://egeria.odpi.org/open-metadata-implementation/access-services/asset-lineage/\"))\n public class AssetLineageResource {\n \n     private final AssetLineageRestServices restAPI = new AssetLineageRestServices();\n \n-\n-\n+    /**\n+     * Scan the cohort based on the given entity type\n+     *\n+     * @param serverName name of server instance to call\n+     * @param userId     the name of the calling user\n+     * @param entityType the name of the relationship type\n+     * @return a list of unique identifiers (guids) of the available entities with the given type provided as a response\n+     */\n+    @GetMapping(path = \"/initial-load-by-entity-type/{entityType}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYxMDQ3Ng=="}, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzYzNzg2Ng==", "bodyText": "or maybe /publishEntitiesByType/{entityType} ?", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r463637866", "createdAt": "2020-07-31T14:16:54Z", "author": {"login": "lpalashevski"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-spring/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/server/spring/AssetLineageResource.java", "diffHunk": "@@ -5,18 +5,33 @@\n import io.swagger.v3.oas.annotations.ExternalDocumentation;\n import io.swagger.v3.oas.annotations.tags.Tag;\n import org.odpi.openmetadata.accessservices.assetlineage.server.AssetLineageRestServices;\n+import org.odpi.openmetadata.commonservices.ffdc.rest.GUIDListResponse;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.PathVariable;\n import org.springframework.web.bind.annotation.RequestMapping;\n import org.springframework.web.bind.annotation.RestController;\n \n \n @RestController\n @RequestMapping(\"/servers/{serverName}/open-metadata/access-services/asset-lineage/users/{userId}/\")\n \n-@Tag(name=\"Asset Lineage OMAS\", description=\"The Asset Lineage OMAS provides services to query the lineage of business terms and data assets.\", externalDocs=@ExternalDocumentation(description=\"Asset Lineage Open Metadata Access Service (OMAS)\",url=\"https://egeria.odpi.org/open-metadata-implementation/access-services/asset-lineage/\"))\n+@Tag(name = \"Asset Lineage OMAS\", description = \"The Asset Lineage OMAS provides services to query the lineage of business terms and data assets.\", externalDocs = @ExternalDocumentation(description = \"Asset Lineage Open Metadata Access Service (OMAS)\", url = \"https://egeria.odpi.org/open-metadata-implementation/access-services/asset-lineage/\"))\n public class AssetLineageResource {\n \n     private final AssetLineageRestServices restAPI = new AssetLineageRestServices();\n \n-\n-\n+    /**\n+     * Scan the cohort based on the given entity type\n+     *\n+     * @param serverName name of server instance to call\n+     * @param userId     the name of the calling user\n+     * @param entityType the name of the relationship type\n+     * @return a list of unique identifiers (guids) of the available entities with the given type provided as a response\n+     */\n+    @GetMapping(path = \"/initial-load-by-entity-type/{entityType}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYxMDQ3Ng=="}, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTgyMjAxOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/pom.xml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoxMzo0NVrOG4OpPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQxNToxOTowNFrOG6MX-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYxMzM3Mw==", "bodyText": "I note this is only required at runtime. At some point (but not for this PR) we should revisit what maven artifacts really are dependencies we want to capture / have as hard dependencies, always, and which are just down to specific configurations - in which case it's more a deployment activity (and helps to reduce explosion of dependencies). Here I can see we are adding to classpath so that we get the config we want (and files below support this) which is fine for now", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461613373", "createdAt": "2020-07-28T14:13:45Z", "author": {"login": "planetf1"}, "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/pom.xml", "diffHunk": "@@ -91,18 +86,28 @@\n         </dependency>\n \n \n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter-api</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n         <!-- berkeley & lucene aren't compile dependencies, so need exception for maven dependency plugin -->\n         <dependency>\n             <groupId>org.janusgraph</groupId>\n             <artifactId>janusgraph-berkeleyje</artifactId>\n         </dependency>\n+        <!-- https://mvnrepository.com/artifact/org.janusgraph/janusgraph-inmemory -->\n+        <dependency>\n+            <groupId>org.janusgraph</groupId>\n+            <artifactId>janusgraph-inmemory</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY1MTAwNQ==", "bodyText": "@marius-patrascu Let's check if we need to scope the dependency since this is only used during build/test cycle.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r463651005", "createdAt": "2020-07-31T14:40:03Z", "author": {"login": "lpalashevski"}, "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/pom.xml", "diffHunk": "@@ -91,18 +86,28 @@\n         </dependency>\n \n \n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter-api</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n         <!-- berkeley & lucene aren't compile dependencies, so need exception for maven dependency plugin -->\n         <dependency>\n             <groupId>org.janusgraph</groupId>\n             <artifactId>janusgraph-berkeleyje</artifactId>\n         </dependency>\n+        <!-- https://mvnrepository.com/artifact/org.janusgraph/janusgraph-inmemory -->\n+        <dependency>\n+            <groupId>org.janusgraph</groupId>\n+            <artifactId>janusgraph-inmemory</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYxMzM3Mw=="}, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY3MzMzNw==", "bodyText": "Yes if only used by test, it would be good to scope to that.\nIf you do make this change it would be really nice if you could explain the change & how the inmemory dependency is used, as I'm in the process of adding a gradle build (poc) which will need changes in the 'build.gradle'.  Currently the inmemory repo is not actually referenced there, and the build runs (with default tests) but perhaps not all testcases or running. It's easier to keep changes in sync as the poms get updated\nBut this isn't a blocker - otherwise can do once the maven change is made, as there's a long way to go on the gradle side.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r463673337", "createdAt": "2020-07-31T15:19:04Z", "author": {"login": "planetf1"}, "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/pom.xml", "diffHunk": "@@ -91,18 +86,28 @@\n         </dependency>\n \n \n+        <dependency>\n+            <groupId>org.junit.jupiter</groupId>\n+            <artifactId>junit-jupiter-api</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+\n         <!-- berkeley & lucene aren't compile dependencies, so need exception for maven dependency plugin -->\n         <dependency>\n             <groupId>org.janusgraph</groupId>\n             <artifactId>janusgraph-berkeleyje</artifactId>\n         </dependency>\n+        <!-- https://mvnrepository.com/artifact/org.janusgraph/janusgraph-inmemory -->\n+        <dependency>\n+            <groupId>org.janusgraph</groupId>\n+            <artifactId>janusgraph-inmemory</artifactId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYxMzM3Mw=="}, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTgzNjgxOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/main/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/factory/GraphGremlinBase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoxNTo0MVrOG4OxbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoxNTo0MVrOG4OxbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYxNTQ2OQ==", "bodyText": "I think this should be debug -- same for other instances", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461615469", "createdAt": "2020-07-28T14:15:41Z", "author": {"login": "planetf1"}, "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/main/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/factory/GraphGremlinBase.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/* SPDX-License-Identifier: Apache-2.0 */\n+/* Copyright Contributors to the ODPi Egeria project. */\n+package org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.factory;\n+\n+import org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversalSource;\n+import org.apache.tinkerpop.gremlin.structure.Graph;\n+import org.apache.tinkerpop.gremlin.structure.util.GraphFactory;\n+import org.odpi.openmetadata.frameworks.connectors.properties.ConnectionProperties;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Map;\n+\n+\n+public class GraphGremlinBase {\n+\n+    private static final Logger log = LoggerFactory.getLogger(GraphGremlinBase.class);\n+\n+    protected Graph graph;\n+    protected GraphTraversalSource g;\n+    protected boolean supportingTransactions;\n+    protected Map<String,Object> properties;\n+\n+\n+    /**\n+     * Constructs a graph using the given properties.\n+     * @param connectionProperties the properties coming from the request\n+     */\n+    public GraphGremlinBase(ConnectionProperties connectionProperties){\n+        this.properties = connectionProperties.getConfigurationProperties();\n+    }\n+\n+\n+    /**\n+     * Opens the graph instance. If the graph instance does not exist, a new\n+     * graph instance will be initialized.\n+     */\n+    public GraphTraversalSource openGraph() {\n+        log.info(\"Trying to open the graph\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTg0MjUwOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/main/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/factory/IndexingFactory.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoxNjozMlrOG4O00Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoxNjozMlrOG4O00Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYxNjMzNw==", "bodyText": "looks like debug to me? Any essential info should be audit log", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461616337", "createdAt": "2020-07-28T14:16:32Z", "author": {"login": "planetf1"}, "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/main/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/factory/IndexingFactory.java", "diffHunk": "@@ -26,13 +30,23 @@\n      * @param propertyKeyName - the property name that is stored in the graph\n      * @param unique - if the propery name is unique or not\n      * @param graph - graph instance to create the indexes\n+     * @param type - type\n      */\n     protected void createCompositeIndexForProperty(String propertyName,\n                                                    String propertyKeyName,\n                                                    boolean unique,\n                                                    JanusGraph graph,\n                                                    Class type) {\n-        String indexName = \"vertexIndexComposite\" + propertyKeyName;\n+\n+        String indexName = null;\n+        if(Vertex.class.equals(type)){\n+            indexName = \"vertexIndexComposite\" + propertyKeyName;\n+        }\n+        else if (Edge.class.equals(type)){\n+            indexName = \"edgeIndexComposite\" + propertyKeyName;\n+\n+        }\n+\n         log.info(\"INDEX to be created {}\", indexName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTg1MDI5OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/main/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/graph/LineageGraphConnector.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoxNzo1MFrOG4O5Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoxNzo1MFrOG4O5Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYxNzUwNw==", "bodyText": "debug is fine, but for operational this needs to return to caller via exceptions & admin via audit events... I'l leave this as a general point and not comment further on other occurrances in the PR. The error handling here too shouldn't be based on ha", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461617507", "createdAt": "2020-07-28T14:17:50Z", "author": {"login": "planetf1"}, "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/main/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/graph/LineageGraphConnector.java", "diffHunk": "@@ -0,0 +1,753 @@\n+/* SPDX-License-Identifier: Apache-2.0 */\n+/* Copyright Contributors to the ODPi Egeria project. */\n+package org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.graph;\n+\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversalSource;\n+import org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.__;\n+import org.apache.tinkerpop.gremlin.structure.Column;\n+import org.apache.tinkerpop.gremlin.structure.Edge;\n+import org.apache.tinkerpop.gremlin.structure.Graph;\n+import org.apache.tinkerpop.gremlin.structure.Vertex;\n+import org.odpi.openmetadata.accessservices.assetlineage.model.GraphContext;\n+import org.odpi.openmetadata.accessservices.assetlineage.model.LineageEntity;\n+import org.odpi.openmetadata.accessservices.assetlineage.model.LineageRelationship;\n+import org.odpi.openmetadata.governanceservers.openlineage.ffdc.OpenLineageException;\n+import org.odpi.openmetadata.governanceservers.openlineage.ffdc.OpenLineageServerErrorCode;\n+import org.odpi.openmetadata.governanceservers.openlineage.graph.LineageGraphConnectorBase;\n+import org.odpi.openmetadata.governanceservers.openlineage.model.LineageVerticesAndEdges;\n+import org.odpi.openmetadata.governanceservers.openlineage.model.Scope;\n+import org.odpi.openmetadata.governanceservers.openlineage.responses.LineageResponse;\n+import org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.factory.GraphFactory;\n+import org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.model.JanusConnectorErrorCode;\n+import org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.model.ffdc.JanusConnectorException;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.NoSuchElementException;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+\n+import static org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.__.addE;\n+import static org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.__.addV;\n+import static org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.__.bothE;\n+import static org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.__.hasLabel;\n+import static org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.__.inE;\n+import static org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.__.inV;\n+import static org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.__.or;\n+import static org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.__.outV;\n+import static org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.__.unfold;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.ASSET_SCHEMA_TYPE;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.ATTRIBUTE_FOR_SCHEMA;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.DATA_FILE;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.LINEAGE_MAPPING;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.NESTED_SCHEMA_ATTRIBUTE;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.PORT_DELEGATION;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.PORT_IMPLEMENTATION;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.PORT_SCHEMA;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.PROCESS;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.PROCESS_PORT;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.RELATIONAL_COLUMN;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.RELATIONAL_TABLE;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.TABULAR_COLUMN;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.EDGE_LABEL_CLASSIFICATION;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.EDGE_LABEL_COLUMN_DATA_FLOW;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.EDGE_LABEL_INCLUDED_IN;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.EDGE_LABEL_TABLE_DATA_FLOW;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.NODE_LABEL_SUB_PROCESS;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_DISPLAY_NAME;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_ENTITY_CREATED_BY;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_ENTITY_CREATE_TIME;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_ENTITY_GUID;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_ENTITY_NODE_ID;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_ENTITY_UPDATED_BY;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_ENTITY_UPDATE_TIME;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_ENTITY_VERSION;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_INSTANCEPROP_DISPLAY_NAME;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_LABEL;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_METADATA_ID;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_PREFIX_ELEMENT;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_PREFIX_INSTANCE_PROPERTY;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_PROCESS_LINEAGE_COMPLETED_FLAG;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_RELATIONSHIP_GUID;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_NAME_PORT_TYPE;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_NAME_PROCESS_LINEAGE_COMPLETED_FLAG;\n+\n+public class LineageGraphConnector extends LineageGraphConnectorBase {\n+\n+    private static final Logger log = LoggerFactory.getLogger(LineageGraphConnector.class);\n+    private LineageGraphConnectorHelper helper;\n+    private GraphTraversalSource g;\n+    private GraphFactory graphFactory;\n+\n+    /**\n+     * Instantiates the graph based on the configuration passed.\n+     */\n+    public void initializeGraphDB() throws OpenLineageException {\n+\n+        try {\n+            graphFactory = new GraphFactory();\n+            this.g = graphFactory.openGraph(connectionProperties.getConnectorType().getConnectorProviderClassName(), connectionProperties);\n+            if (g == null) {\n+                log.error(\"The graphTraversal is empty connection with the graph is not established\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 97}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTg4Njc2OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/test/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/maingraph/LineageGraphConnectorHelperTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoyNTo0MlrOG4PQiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoyNTo0MlrOG4PQiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYyMzQzMg==", "bodyText": "How heavy are these tests? If they require additional components to start, we should run them as functional tests rather than unit tests -- ie using failsafe not surefire. Both in terms of build reliability and performance. All this would really need is a change in test case name - convention is IT.java ie 'GraphIT.java' like our FVTs -- the tests then run in the integration test lifecycle phase. (also possible to change in maven pom, but going by convention is easier). perhaps not needed if tests reliable/quick", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461623432", "createdAt": "2020-07-28T14:25:42Z", "author": {"login": "planetf1"}, "path": "open-metadata-implementation/adapters/open-connectors/governance-daemon-connectors/open-lineage-connectors/open-lineage-janus-connector/src/test/java/org/odpi/openmetadata/openconnectors/governancedaemonconnectors/openlineageconnectors/janusconnector/maingraph/LineageGraphConnectorHelperTest.java", "diffHunk": "@@ -0,0 +1,310 @@\n+/* SPDX-License-Identifier: Apache-2.0 */\n+/* Copyright Contributors to the ODPi Egeria project. */\n+package org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.maingraph;\n+\n+import org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversalSource;\n+import org.apache.tinkerpop.gremlin.structure.Graph;\n+import org.apache.tinkerpop.gremlin.structure.Vertex;\n+import org.janusgraph.core.JanusGraph;\n+import org.janusgraph.core.JanusGraphFactory;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.odpi.openmetadata.governanceservers.openlineage.model.LineageVertex;\n+import org.odpi.openmetadata.governanceservers.openlineage.model.LineageVerticesAndEdges;\n+import org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.graph.LineageGraphConnectorHelper;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.DATA_FILE;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.PROCESS;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.RELATIONAL_TABLE;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.Constants.TABULAR_COLUMN;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.EDGE_LABEL_COLUMN_DATA_FLOW;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.EDGE_LABEL_RELATED_TERM;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.EDGE_LABEL_SEMANTIC_ASSIGNMENT;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.EDGE_LABEL_TABLE_DATA_FLOW;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.NODE_LABEL_GLOSSARYTERM;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.NODE_LABEL_SUB_PROCESS;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_ENTITY_GUID;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_KEY_ENTITY_NODE_ID;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_VALUE_NODE_ID_CONDENSED_DESTINATION;\n+import static org.odpi.openmetadata.openconnectors.governancedaemonconnectors.openlineageconnectors.janusconnector.utils.GraphConstants.PROPERTY_VALUE_NODE_ID_CONDENSED_SOURCE;\n+\n+public class LineageGraphConnectorHelperTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTkwNDk2OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/governance-servers/data-engine-proxy-services/data-engine-proxy-connector/src/main/java/org/odpi/openmetadata/governanceservers/dataengineproxy/connectors/DataEngineConnectorBase.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoyOToyN1rOG4PbxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDoyOToyN1rOG4PbxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYyNjMwOA==", "bodyText": "again this needs full handling", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461626308", "createdAt": "2020-07-28T14:29:27Z", "author": {"login": "planetf1"}, "path": "open-metadata-implementation/governance-servers/data-engine-proxy-services/data-engine-proxy-connector/src/main/java/org/odpi/openmetadata/governanceservers/dataengineproxy/connectors/DataEngineConnectorBase.java", "diffHunk": "@@ -61,6 +61,17 @@ public void setChangesLastSynced(Date time) {\n         }\n     }\n \n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public Date getOldestChangeSince(Date time) {\n+        if (requiresPolling()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTkyMDQwOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/governance-servers/data-engine-proxy-services/data-engine-proxy-services-server/README.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDozMjozMVrOG4PlXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDozMjozMVrOG4PlXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYyODc2Ng==", "bodyText": "Good to have this explanation. Looks very prudent", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461628766", "createdAt": "2020-07-28T14:32:31Z", "author": {"login": "planetf1"}, "path": "open-metadata-implementation/governance-servers/data-engine-proxy-services/data-engine-proxy-services-server/README.md", "diffHunk": "@@ -23,6 +23,42 @@ The sequence of changes is important to ensure that we build up the information\n bottom up, so that necessary pre-requisites for various relationships can be created via\n the Data Engine OMAS before attempting to create the relationships themselves.\n \n+## Proxy polling configuration\n+\n+The polling done by the proxy can be optimized through the following settings:\n+\n+- `pollIntervalInSeconds` defines how many seconds to sleep between polling intervals (and defaults\n+    to one minute (`60` seconds))\n+- `batchWindowInSeconds` defines the maximum span through which changes will be searched. This defaults\n+    to one day (`86400` seconds).\n+\n+Based on these settings, the polling operates as follows:\n+\n+1. Retrieves the last synchronization date from the connector (using its `getChangesLastSynced` method).\n+1. Retrieves the oldest change since (1) using the connector's `getOldestChangeSince` method.\n+    1. If there are changes, calculates a change window as the date and time from (2) + the `batchWindowInSeconds`.\n+    1. If there are not changes, retains the date and time retrieved from (1).\n+1. Calculates the current date and time.\n+    1. If there are changes, determines the lesser of this and (2i).\n+    1. If there are not changes, retains the current date and time.\n+1. Retrieves changes (in the order specified above) where (2) < change <= (4).\n+\n+These settings and logic ensure that:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTkyOTQyOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/governance-servers/data-engine-proxy-services/data-engine-proxy-services-server/src/main/java/org/odpi/openmetadata/governanceservers/dataengineproxy/auditlog/DataEngineProxyAuditCode.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDozNDoxMFrOG4Pqrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDozNDoxMFrOG4Pqrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYzMDEyNg==", "bodyText": "would this result in an audit log every 60s? I wonder if that makes it quite noisy - though maybe that's ok given we can control destination/filter", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461630126", "createdAt": "2020-07-28T14:34:10Z", "author": {"login": "planetf1"}, "path": "open-metadata-implementation/governance-servers/data-engine-proxy-services/data-engine-proxy-services-server/src/main/java/org/odpi/openmetadata/governanceservers/dataengineproxy/auditlog/DataEngineProxyAuditCode.java", "diffHunk": "@@ -66,11 +61,17 @@\n             \"The user is not authorized for the Data Engine OMAS operation: {0}\",\n             \"The system is unable to process the operation due to the user not being authorized to do so.\",\n             \"Check your OMAS configuration and user authorizations.\"),\n-    UNKNOWN_ERROR(\"DATA-ENGINE-PROXY-0012\",\n-            OMRSAuditLogRecordSeverity.EXCEPTION,\n-            \"An unknown error occurred\",\n-            \"The system is unable to process the operation due to an unknown runtime error.\",\n-            \"Check your OMAS configuration and server logs to troubleshoot.\"),\n+    POLLING_TYPE_START(\"DATA-ENGINE-PROXY-0012\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTk2MzI5OnYy", "diffSide": "RIGHT", "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/README.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo0MDoyN1rOG4P_Cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo0MDoyN1rOG4P_Cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYzNTMzOQ==", "bodyText": "might be worth mentioning the major version at least", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461635339", "createdAt": "2020-07-28T14:40:27Z", "author": {"login": "planetf1"}, "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/README.md", "diffHunk": "@@ -0,0 +1,166 @@\n+<!-- SPDX-License-Identifier: Apache-2.0 -->\n+<!-- Copyright Contributors to the ODPi Egeria project. -->\n+\n+# ODPi Egeria ansible playbooks\n+\n+## Introduction\n+\n+Ansible playbook suite for deploying and managing ODPi Egeria OMAG based applications on native Linux environments. Currently it is tested on RedHat Enterprise Linux distribution.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTk3NDAwOnYy", "diffSide": "RIGHT", "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/README.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo0MjoyM1rOG4QFXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo0MjoyM1rOG4QFXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYzNjk1OA==", "bodyText": "we build a distribution and expect to run in that format. Specifically we place additional libs in server/lib. That may change, and also we place .p12 files in the assembly. For the docker image we extract the assembly an used, so just a heads up this will need maint updates as packaging changes (which may well happen soon)", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461636958", "createdAt": "2020-07-28T14:42:23Z", "author": {"login": "planetf1"}, "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/README.md", "diffHunk": "@@ -0,0 +1,166 @@\n+<!-- SPDX-License-Identifier: Apache-2.0 -->\n+<!-- Copyright Contributors to the ODPi Egeria project. -->\n+\n+# ODPi Egeria ansible playbooks\n+\n+## Introduction\n+\n+Ansible playbook suite for deploying and managing ODPi Egeria OMAG based applications on native Linux environments. Currently it is tested on RedHat Enterprise Linux distribution.\n+\n+### Playbooks\n+\n+Two main playbooks grouping logical sequence of tasks form the related roles.\n+\n+- `sites.yml` - deploy OMAG server application on site and configure it via admin-service.\n+\n+- `sites_cleanup.yml` - un-deploy/clean-up OMAG server application form site.\n+\n+Everything is configurable via set of variables representing one logical application group (i.e. OMAG server profile). For more advanced deployment configurations host groups can be used to configure/deploy multiple instances of OMAG server applications in integrated mode. See configuration and variables section or examples for more details below.\n+\n+>PRIVILEGE ESCALATION: \n+>With the current version of the playbooks it is assumed that the ansible user can do privilege escalation / sudo to manage system level changes like creating systemd configuration files and controlling (start/stop/restart) the service units. For long term the playbooks will be improved so this will become optional so the system changes can be done beforehand by system admins if needed.\n+\n+## Usage\n+\n+#### Deploy\n+\n+``` ansible-playbook site.yml -i inventories/sample -e target=omagserver1``` \n+\n+\n+This will trigger sequence of tasks to install, configure and start OMAG server instances on the target groups described as `omagserver1` under inventory.\n+\n+There is also an option to separately execute sequences by adding following self descriptive tags: `install`,`configure`,`start`.\n+\n+``` ansible-playbook site_cleanup.yml -i inventories/sample -e target=omagserver1 -t install,configure```\n+\n+This will install and configure the OMAG application but it will not start it.\n+\n+#### Un-deploy\n+\n+``` ansible-playbook site_cleanup.yml -i inventories/sample -e target=omagserver1```\n+\n+This will invoke sequence of tasks and remove all the files, logs and service related to the specific server application instance on the target systems described in the inventory as `omagserver1`.\n+\n+>Note that the target is just another input variable mapped to hosts so you can also assign multiple targets as comma separated list like `omagserver1`,`omagserver2` or use the predefined group `all`.\n+\n+## Roles\n+\n+### egeria-omag-server\n+\n+**Deployment** is handled by `egeria-omag-server` role. This is configurable role that will download all the artifacts needed to configure and start egeria OMAG server application. Once this role has been executed against target, specific version of the core Egeria application `server-chassis-spring.jar` will be installed on the pre-configured location. If configured additional Egeria plug-in libraries will be also installed and loaded. One example is `egeria-connector-ibm-information-server-package.jar` if available in the configuration will be downloaded under `libs` folder in the home install directory. System service with pre-configured application name will be also configured and started for you. See role specific configuration and variable section for more details.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTk4MDA1OnYy", "diffSide": "RIGHT", "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/README.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo0MzozM1rOG4QJJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo0MzozM1rOG4QJJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYzNzkyNg==", "bodyText": "may want to change these defaults to be 2.2-SNAPSHOT & also update ports to current standards ie 9443 & https", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461637926", "createdAt": "2020-07-28T14:43:33Z", "author": {"login": "planetf1"}, "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/README.md", "diffHunk": "@@ -0,0 +1,166 @@\n+<!-- SPDX-License-Identifier: Apache-2.0 -->\n+<!-- Copyright Contributors to the ODPi Egeria project. -->\n+\n+# ODPi Egeria ansible playbooks\n+\n+## Introduction\n+\n+Ansible playbook suite for deploying and managing ODPi Egeria OMAG based applications on native Linux environments. Currently it is tested on RedHat Enterprise Linux distribution.\n+\n+### Playbooks\n+\n+Two main playbooks grouping logical sequence of tasks form the related roles.\n+\n+- `sites.yml` - deploy OMAG server application on site and configure it via admin-service.\n+\n+- `sites_cleanup.yml` - un-deploy/clean-up OMAG server application form site.\n+\n+Everything is configurable via set of variables representing one logical application group (i.e. OMAG server profile). For more advanced deployment configurations host groups can be used to configure/deploy multiple instances of OMAG server applications in integrated mode. See configuration and variables section or examples for more details below.\n+\n+>PRIVILEGE ESCALATION: \n+>With the current version of the playbooks it is assumed that the ansible user can do privilege escalation / sudo to manage system level changes like creating systemd configuration files and controlling (start/stop/restart) the service units. For long term the playbooks will be improved so this will become optional so the system changes can be done beforehand by system admins if needed.\n+\n+## Usage\n+\n+#### Deploy\n+\n+``` ansible-playbook site.yml -i inventories/sample -e target=omagserver1``` \n+\n+\n+This will trigger sequence of tasks to install, configure and start OMAG server instances on the target groups described as `omagserver1` under inventory.\n+\n+There is also an option to separately execute sequences by adding following self descriptive tags: `install`,`configure`,`start`.\n+\n+``` ansible-playbook site_cleanup.yml -i inventories/sample -e target=omagserver1 -t install,configure```\n+\n+This will install and configure the OMAG application but it will not start it.\n+\n+#### Un-deploy\n+\n+``` ansible-playbook site_cleanup.yml -i inventories/sample -e target=omagserver1```\n+\n+This will invoke sequence of tasks and remove all the files, logs and service related to the specific server application instance on the target systems described in the inventory as `omagserver1`.\n+\n+>Note that the target is just another input variable mapped to hosts so you can also assign multiple targets as comma separated list like `omagserver1`,`omagserver2` or use the predefined group `all`.\n+\n+## Roles\n+\n+### egeria-omag-server\n+\n+**Deployment** is handled by `egeria-omag-server` role. This is configurable role that will download all the artifacts needed to configure and start egeria OMAG server application. Once this role has been executed against target, specific version of the core Egeria application `server-chassis-spring.jar` will be installed on the pre-configured location. If configured additional Egeria plug-in libraries will be also installed and loaded. One example is `egeria-connector-ibm-information-server-package.jar` if available in the configuration will be downloaded under `libs` folder in the home install directory. System service with pre-configured application name will be also configured and started for you. See role specific configuration and variable section for more details.\n+\n+The sequence of tasks: \n+- downloading the application artifacts; \n+- creating the application structure on the filesystem;\n+- downloading additional libraries;\n+- copying application properties/configuration files and \n+- creating system service and starting up. \n+\n+\n+### egeria-omag-server-admin\n+\n+**Administration** is handled by `egeria-omag-server-admin` role. It looks up for specific `admin_omag_*` set of configuration variables and calls server admin REST API endpoints to create/update the configuration documents for each Egeria component. See role specific configuration and variable section for more details.\n+\n+The sequence of tasks:\n+- Configure servers - uses `admin_omag_server_config` dictionary variable;\n+- Configure repositories - uses `admin_omag_repo_config` dictionary variable;\n+- Enable access services - uses `admin_omag_access_services_config` dictionary variable;\n+- Start server instance - uses `admin_omag_server_startup` list.\n+\n+Each of these sequences depends on the presence of of specific var. If not present or empty the specific configuration phase is skipped.\n+\n+>Currently the roles are embedded and maintained into this project. Once they get more stable and mature can be also available via ansible-galaxy for other ansible projects using Egeria.\n+\n+## Configuration and variables\n+\n+### egeria-omag-server\n+\n+`atr_artifactory_base` - Source Artifactory url. Default: `https://odpi.jfrog.io/odpi`\n+\n+`atr_repository` - Source Artifactory repository. Default: `egeria-snapshot-local`\n+\n+`home_dir` - Target server home directory (installation base). Default: `/opt/odpi/egeria`\n+\n+`app_host` - Application host address or dns name on the target server.\n+\n+`app_port` - Application port on the target server.\n+\n+`app_name` - Application name. Also used for systemd service name.\n+\n+`app_version`- Version of the egeria core executable (jar).\n+\n+`app_version_suffix` - Version suffix (helps for testing snapshot versions). <!--#TODO: add more details-->\n+\n+`app_force_replace` - Forces overwriting the destination artifacts. Useful for development and testing especially when snapshot versions are rebuilt.\n+\n+`app_extra_libs` - Additional egeria plugin library (i.e. connectors).\n+\n+`app_configs`-  Location of the application configuration files to be applied on the target server. <!--#TODO: add more details-->\n+\n+\n+### egeria-omag-server-admin\n+\n+`admin_omag_server_config` - OMAG Server core configuration object. \n+It can be used to define multiple server configurations (different logical servers). See Examples for details.\n+\n+<!--\n+#TODO: add more details on how mode works and possible options\n+-->\n+\n+`admin_omag_repo_config` - OMRS, repositories configuration object. You can define multiple repository configurations for servers. See Examples for details.\n+\n+`admin_omag_access_services_config` - OMAS, access services configuration object. You can define multiple access services to be enabled per server or simply enable 'all' available. See Examples for details.\n+\n+`admin_omag_server_startup` - List of services to initialize after configuration is performed. See Examples for details.\n+\n+\n+## Examples\n+\n+**Example A.** OMAG Server with Asset Catalog OMAS and Local Graph Repository\n+\n+```\n+app_port: 8080", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 122}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MTk5OTIyOnYy", "diffSide": "RIGHT", "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/roles/egeria-omag-server/defaults/main.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo0NzowNlrOG4QUzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo0NzowNlrOG4QUzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY0MDkwOQ==", "bodyText": "version/ports etc -- occurs below also. will not refer to", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461640909", "createdAt": "2020-07-28T14:47:06Z", "author": {"login": "planetf1"}, "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/roles/egeria-omag-server/defaults/main.yml", "diffHunk": "@@ -0,0 +1,74 @@\n+---\n+# SPDX-License-Identifier: Apache-2.0\n+# Copyright Contributors to the ODPi Egeria project.\n+\n+app_name: 'server-chassis-spring'\n+app_version: '1.5-SNAPSHOT'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MjAyMTk3OnYy", "diffSide": "RIGHT", "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/roles/egeria-omag-server/templates/app_service.j2", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1MToyMVrOG4QijQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNDo1MToyMVrOG4QijQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY0NDQyOQ==", "bodyText": "may be some call for running java at alt locations (tho this may be more in dev)", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461644429", "createdAt": "2020-07-28T14:51:21Z", "author": {"login": "planetf1"}, "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/roles/egeria-omag-server/templates/app_service.j2", "diffHunk": "@@ -0,0 +1,47 @@\n+# SPDX-License-Identifier: Apache-2.0\n+# Copyright Contributors to the ODPi Egeria project.\n+\n+[Unit]\n+Description={{ app_name }}-{{ app_version }} service\n+After=network.target\n+\n+[Service]\n+\n+UMask=0027\n+User={{ app_user }}\n+Group={{ app_group }}\n+\n+{% if app_service_environment %}\n+{% for k, v in app_service_environment.items() %}\n+Environment=\"{{ k }}={{ v }}\"\n+{% endfor %}\n+{% endif %}\n+\n+WorkingDirectory={{ app_work_dir }}\n+\n+ExecStartPre=/bin/sh -c \"rm -fR {{ app_tmp_dir }}/*\"\n+ExecStart=/bin/sh -c \"/usr/bin/java\\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MjIxMjU5OnYy", "diffSide": "RIGHT", "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/README.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNTozMToyNFrOG4SYNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNTozMToyNFrOG4SYNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY3NDU1MQ==", "bodyText": "up on line 16 site.yml is used (typo) (note not testing - just visual review)", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r461674551", "createdAt": "2020-07-28T15:31:24Z", "author": {"login": "planetf1"}, "path": "open-metadata-resources/open-metadata-deployment/ansible-egeria/README.md", "diffHunk": "@@ -0,0 +1,166 @@\n+<!-- SPDX-License-Identifier: Apache-2.0 -->\n+<!-- Copyright Contributors to the ODPi Egeria project. -->\n+\n+# ODPi Egeria ansible playbooks\n+\n+## Introduction\n+\n+Ansible playbook suite for deploying and managing ODPi Egeria OMAG based applications on native Linux environments. Currently it is tested on RedHat Enterprise Linux distribution.\n+\n+### Playbooks\n+\n+Two main playbooks grouping logical sequence of tasks form the related roles.\n+\n+- `sites.yml` - deploy OMAG server application on site and configure it via admin-service.\n+\n+- `sites_cleanup.yml` - un-deploy/clean-up OMAG server application form site.\n+\n+Everything is configurable via set of variables representing one logical application group (i.e. OMAG server profile). For more advanced deployment configurations host groups can be used to configure/deploy multiple instances of OMAG server applications in integrated mode. See configuration and variables section or examples for more details below.\n+\n+>PRIVILEGE ESCALATION: \n+>With the current version of the playbooks it is assumed that the ansible user can do privilege escalation / sudo to manage system level changes like creating systemd configuration files and controlling (start/stop/restart) the service units. For long term the playbooks will be improved so this will become optional so the system changes can be done beforehand by system admins if needed.\n+\n+## Usage\n+\n+#### Deploy\n+\n+``` ansible-playbook site.yml -i inventories/sample -e target=omagserver1``` \n+\n+\n+This will trigger sequence of tasks to install, configure and start OMAG server instances on the target groups described as `omagserver1` under inventory.\n+\n+There is also an option to separately execute sequences by adding following self descriptive tags: `install`,`configure`,`start`.\n+\n+``` ansible-playbook site_cleanup.yml -i inventories/sample -e target=omagserver1 -t install,configure```\n+\n+This will install and configure the OMAG application but it will not start it.\n+\n+#### Un-deploy\n+\n+``` ansible-playbook site_cleanup.yml -i inventories/sample -e target=omagserver1```\n+\n+This will invoke sequence of tasks and remove all the files, logs and service related to the specific server application instance on the target systems described in the inventory as `omagserver1`.\n+\n+>Note that the target is just another input variable mapped to hosts so you can also assign multiple targets as comma separated list like `omagserver1`,`omagserver2` or use the predefined group `all`.\n+\n+## Roles\n+\n+### egeria-omag-server\n+\n+**Deployment** is handled by `egeria-omag-server` role. This is configurable role that will download all the artifacts needed to configure and start egeria OMAG server application. Once this role has been executed against target, specific version of the core Egeria application `server-chassis-spring.jar` will be installed on the pre-configured location. If configured additional Egeria plug-in libraries will be also installed and loaded. One example is `egeria-connector-ibm-information-server-package.jar` if available in the configuration will be downloaded under `libs` folder in the home install directory. System service with pre-configured application name will be also configured and started for you. See role specific configuration and variable section for more details.\n+\n+The sequence of tasks: \n+- downloading the application artifacts; \n+- creating the application structure on the filesystem;\n+- downloading additional libraries;\n+- copying application properties/configuration files and \n+- creating system service and starting up. \n+\n+\n+### egeria-omag-server-admin\n+\n+**Administration** is handled by `egeria-omag-server-admin` role. It looks up for specific `admin_omag_*` set of configuration variables and calls server admin REST API endpoints to create/update the configuration documents for each Egeria component. See role specific configuration and variable section for more details.\n+\n+The sequence of tasks:\n+- Configure servers - uses `admin_omag_server_config` dictionary variable;\n+- Configure repositories - uses `admin_omag_repo_config` dictionary variable;\n+- Enable access services - uses `admin_omag_access_services_config` dictionary variable;\n+- Start server instance - uses `admin_omag_server_startup` list.\n+\n+Each of these sequences depends on the presence of of specific var. If not present or empty the specific configuration phase is skipped.\n+\n+>Currently the roles are embedded and maintained into this project. Once they get more stable and mature can be also available via ansible-galaxy for other ansible projects using Egeria.\n+\n+## Configuration and variables\n+\n+### egeria-omag-server\n+\n+`atr_artifactory_base` - Source Artifactory url. Default: `https://odpi.jfrog.io/odpi`\n+\n+`atr_repository` - Source Artifactory repository. Default: `egeria-snapshot-local`\n+\n+`home_dir` - Target server home directory (installation base). Default: `/opt/odpi/egeria`\n+\n+`app_host` - Application host address or dns name on the target server.\n+\n+`app_port` - Application port on the target server.\n+\n+`app_name` - Application name. Also used for systemd service name.\n+\n+`app_version`- Version of the egeria core executable (jar).\n+\n+`app_version_suffix` - Version suffix (helps for testing snapshot versions). <!--#TODO: add more details-->\n+\n+`app_force_replace` - Forces overwriting the destination artifacts. Useful for development and testing especially when snapshot versions are rebuilt.\n+\n+`app_extra_libs` - Additional egeria plugin library (i.e. connectors).\n+\n+`app_configs`-  Location of the application configuration files to be applied on the target server. <!--#TODO: add more details-->\n+\n+\n+### egeria-omag-server-admin\n+\n+`admin_omag_server_config` - OMAG Server core configuration object. \n+It can be used to define multiple server configurations (different logical servers). See Examples for details.\n+\n+<!--\n+#TODO: add more details on how mode works and possible options\n+-->\n+\n+`admin_omag_repo_config` - OMRS, repositories configuration object. You can define multiple repository configurations for servers. See Examples for details.\n+\n+`admin_omag_access_services_config` - OMAS, access services configuration object. You can define multiple access services to be enabled per server or simply enable 'all' available. See Examples for details.\n+\n+`admin_omag_server_startup` - List of services to initialize after configuration is performed. See Examples for details.\n+\n+\n+## Examples\n+\n+**Example A.** OMAG Server with Asset Catalog OMAS and Local Graph Repository\n+\n+```\n+app_port: 8080\n+app_host: localhost\n+app_name: egeria_omas\n+app_version: 1.6-SNAPSHOT\n+app_version_suffix: 1.6-SNAPSHOT\n+app_extra_libs:\n+app_configs:\n+admin_omag_server_config:\n+  omas-server:\n+    mode: server-chassis\n+    url: \"http://{{ app_host }}:{{ app_port }}\"\n+    user: admin\n+    cohort: mycohort\n+    cohort_topic: mytopic\n+    consumer: kafkaserver:9092\n+    producer: kafkaserver:9092\n+    auditlog_destination: slf4j\n+    auditlog_severity: []    \n+admin_omag_repo_config:\n+  omas-server:\n+    mode: local-graph-repository\n+admin_omag_access_services_config:\n+  omas-server:\n+    # all:\n+    asset-catalog:\n+      body: \n+        supportedTypesForSearch:\n+          - Asset\n+          - RelationalColumn \n+admin_omag_server_startup:\n+- omas-server\n+```\n+\n+Check out the sample configuration `inventories/sample/hosts.yml` and adjust ansible_ vars to so you can connect to your target environment.\n+To deploy,configure and start the sample configuration run following command:\n+\n+```\n+ansible-playbook sites.yml -i inventories/sample -e target=omagserver1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 159}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDE0Mzk4OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-api/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/event/AssetLineageEventType.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo0MDozOVrOG5dtjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwODoxNjoxMFrOG7_KGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkwODgxNQ==", "bodyText": "why is there no NEW_ENTITY_EVENT?", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462908815", "createdAt": "2020-07-30T10:40:39Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-api/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/event/AssetLineageEventType.java", "diffHunk": "@@ -17,21 +17,22 @@\n  * passed to the Asset Lineage OMAS at start up (a null value here means all zones).\n  */\n \n-@JsonAutoDetect(getterVisibility=PUBLIC_ONLY, setterVisibility=PUBLIC_ONLY, fieldVisibility=NONE)\n+@JsonAutoDetect(getterVisibility = PUBLIC_ONLY, setterVisibility = PUBLIC_ONLY, fieldVisibility = NONE)\n @JsonInclude(JsonInclude.Include.NON_NULL)\n-@JsonIgnoreProperties(ignoreUnknown=true)\n+@JsonIgnoreProperties(ignoreUnknown = true)\n public enum AssetLineageEventType implements Serializable {\n \n-    PROCESS_CONTEXT_EVENT                   (0, \"ProcessContextEvent\", \"Has the full context for a Process\"),\n-    TECHNICAL_ELEMENT_CONTEXT_EVENT         (1, \"TechnicalElementContextEvent\", \"Has the full context for a technical element\"),\n-    CLASSIFICATION_CONTEXT_EVENT            (2, \"ClassificationContextEvent\", \"Has the full context for a classified element\"),\n-    UPDATE_ENTITY_EVENT                     (3, \"UpdateEvent\", \"Has the entity that is being updated\"),\n-    DELETE_ENTITY_EVENT                     (4, \"DeleteEvent\", \"Has the entity to be deleted\"),\n-    NEW_RELATIONSHIP_EVENT                  (5, \"NewRelationship\", \"Has the relationship that is being created\"),\n-    UPDATE_RELATIONSHIP_EVENT               (6, \"UpdateRelationship\", \"Has the relationship that is being updated\"),\n-    DELETE_RELATIONSHIP_EVENT               (7, \"DeleteRelationship\", \"Has the relationship to be deleted\"),\n-    DECLASSIFIED_ENTITY_EVENT               (8, \"DeclassifiedEntityEvent\", \"All relevant lineage classifications for this entity have been removed\"),\n-    UNKNOWN_ASSET_LINEAGE_EVENT             (100, \"UnknownAssetLineageEvent\", \"An AssetLineage OMAS event that is not recognized by the local handlers.\");\n+    PROCESS_CONTEXT_EVENT(0, \"ProcessContextEvent\", \"Has the full context for a Process\"),\n+    TECHNICAL_ELEMENT_CONTEXT_EVENT(1, \"TechnicalElementContextEvent\", \"Has the full context for a technical element\"),\n+    CLASSIFICATION_CONTEXT_EVENT(2, \"ClassificationContextEvent\", \"Has the full context for a classified element\"),\n+    UPDATE_ENTITY_EVENT(3, \"UpdateEvent\", \"Has the entity that is being updated\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk2NzM1Mw==", "bodyText": "AssetLineageEventType contains the event types that will be published to OLS by AL OMAS.\nIt listens on NEW_ENTITY_EVENTS in AssetLineageOMRSTopicListener and it creates the whole context for the new entity\n\nPROCESS_CONTEXT_EVENT containing the new process with all its lineage involved entities and relationships\nTECHNICAL_ELEMENT_CONTEXT_EVENT containing the whole asset context for the new TabularColumn/RelationalColumn\nThere is an issue open for sending more granular events to OLS - #3221, but this needs more investigations and will be handled in a future release", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r464967353", "createdAt": "2020-08-04T10:56:11Z", "author": {"login": "popa-raluca"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-api/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/event/AssetLineageEventType.java", "diffHunk": "@@ -17,21 +17,22 @@\n  * passed to the Asset Lineage OMAS at start up (a null value here means all zones).\n  */\n \n-@JsonAutoDetect(getterVisibility=PUBLIC_ONLY, setterVisibility=PUBLIC_ONLY, fieldVisibility=NONE)\n+@JsonAutoDetect(getterVisibility = PUBLIC_ONLY, setterVisibility = PUBLIC_ONLY, fieldVisibility = NONE)\n @JsonInclude(JsonInclude.Include.NON_NULL)\n-@JsonIgnoreProperties(ignoreUnknown=true)\n+@JsonIgnoreProperties(ignoreUnknown = true)\n public enum AssetLineageEventType implements Serializable {\n \n-    PROCESS_CONTEXT_EVENT                   (0, \"ProcessContextEvent\", \"Has the full context for a Process\"),\n-    TECHNICAL_ELEMENT_CONTEXT_EVENT         (1, \"TechnicalElementContextEvent\", \"Has the full context for a technical element\"),\n-    CLASSIFICATION_CONTEXT_EVENT            (2, \"ClassificationContextEvent\", \"Has the full context for a classified element\"),\n-    UPDATE_ENTITY_EVENT                     (3, \"UpdateEvent\", \"Has the entity that is being updated\"),\n-    DELETE_ENTITY_EVENT                     (4, \"DeleteEvent\", \"Has the entity to be deleted\"),\n-    NEW_RELATIONSHIP_EVENT                  (5, \"NewRelationship\", \"Has the relationship that is being created\"),\n-    UPDATE_RELATIONSHIP_EVENT               (6, \"UpdateRelationship\", \"Has the relationship that is being updated\"),\n-    DELETE_RELATIONSHIP_EVENT               (7, \"DeleteRelationship\", \"Has the relationship to be deleted\"),\n-    DECLASSIFIED_ENTITY_EVENT               (8, \"DeclassifiedEntityEvent\", \"All relevant lineage classifications for this entity have been removed\"),\n-    UNKNOWN_ASSET_LINEAGE_EVENT             (100, \"UnknownAssetLineageEvent\", \"An AssetLineage OMAS event that is not recognized by the local handlers.\");\n+    PROCESS_CONTEXT_EVENT(0, \"ProcessContextEvent\", \"Has the full context for a Process\"),\n+    TECHNICAL_ELEMENT_CONTEXT_EVENT(1, \"TechnicalElementContextEvent\", \"Has the full context for a technical element\"),\n+    CLASSIFICATION_CONTEXT_EVENT(2, \"ClassificationContextEvent\", \"Has the full context for a classified element\"),\n+    UPDATE_ENTITY_EVENT(3, \"UpdateEvent\", \"Has the entity that is being updated\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkwODgxNQ=="}, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTU1Mzk0Ng==", "bodyText": "AssetLineageEventType contains the event types that will be published to OLS by AL OMAS.\nIt listens on NEW_ENTITY_EVENTS in AssetLineageOMRSTopicListener and it creates the whole context for the new entity\n\nPROCESS_CONTEXT_EVENT containing the new process with all its lineage involved entities and relationships\nTECHNICAL_ELEMENT_CONTEXT_EVENT containing the whole asset context for the new TabularColumn/RelationalColumn\nThere is an issue open for sending more granular events to OLS - #3221, but this needs more investigations and will be handled in a future release\n\n\nMakes sense- thanks for the explanation. I suggest adding comments along these lines, to help readers of the code.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r465553946", "createdAt": "2020-08-05T08:16:10Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-api/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/event/AssetLineageEventType.java", "diffHunk": "@@ -17,21 +17,22 @@\n  * passed to the Asset Lineage OMAS at start up (a null value here means all zones).\n  */\n \n-@JsonAutoDetect(getterVisibility=PUBLIC_ONLY, setterVisibility=PUBLIC_ONLY, fieldVisibility=NONE)\n+@JsonAutoDetect(getterVisibility = PUBLIC_ONLY, setterVisibility = PUBLIC_ONLY, fieldVisibility = NONE)\n @JsonInclude(JsonInclude.Include.NON_NULL)\n-@JsonIgnoreProperties(ignoreUnknown=true)\n+@JsonIgnoreProperties(ignoreUnknown = true)\n public enum AssetLineageEventType implements Serializable {\n \n-    PROCESS_CONTEXT_EVENT                   (0, \"ProcessContextEvent\", \"Has the full context for a Process\"),\n-    TECHNICAL_ELEMENT_CONTEXT_EVENT         (1, \"TechnicalElementContextEvent\", \"Has the full context for a technical element\"),\n-    CLASSIFICATION_CONTEXT_EVENT            (2, \"ClassificationContextEvent\", \"Has the full context for a classified element\"),\n-    UPDATE_ENTITY_EVENT                     (3, \"UpdateEvent\", \"Has the entity that is being updated\"),\n-    DELETE_ENTITY_EVENT                     (4, \"DeleteEvent\", \"Has the entity to be deleted\"),\n-    NEW_RELATIONSHIP_EVENT                  (5, \"NewRelationship\", \"Has the relationship that is being created\"),\n-    UPDATE_RELATIONSHIP_EVENT               (6, \"UpdateRelationship\", \"Has the relationship that is being updated\"),\n-    DELETE_RELATIONSHIP_EVENT               (7, \"DeleteRelationship\", \"Has the relationship to be deleted\"),\n-    DECLASSIFIED_ENTITY_EVENT               (8, \"DeclassifiedEntityEvent\", \"All relevant lineage classifications for this entity have been removed\"),\n-    UNKNOWN_ASSET_LINEAGE_EVENT             (100, \"UnknownAssetLineageEvent\", \"An AssetLineage OMAS event that is not recognized by the local handlers.\");\n+    PROCESS_CONTEXT_EVENT(0, \"ProcessContextEvent\", \"Has the full context for a Process\"),\n+    TECHNICAL_ELEMENT_CONTEXT_EVENT(1, \"TechnicalElementContextEvent\", \"Has the full context for a technical element\"),\n+    CLASSIFICATION_CONTEXT_EVENT(2, \"ClassificationContextEvent\", \"Has the full context for a classified element\"),\n+    UPDATE_ENTITY_EVENT(3, \"UpdateEvent\", \"Has the entity that is being updated\"),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkwODgxNQ=="}, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDE1NjM2OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-api/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/model/LineageRelationship.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo0NDo1MFrOG5d1Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo0NDo1MFrOG5d1Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkxMDczOQ==", "bodyText": "I am wondering why these are called first and second entity. I assume there is a direction to this relationship, maybe changing to something like sourceEntity and TargetEntity or downStreamEntity and upstreamEntity. If there is no direction to the relationship - I wonder why.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462910739", "createdAt": "2020-07-30T10:44:50Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-api/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/model/LineageRelationship.java", "diffHunk": "@@ -8,43 +8,45 @@\n  * The lineage relationship represents the a lineage relationship in the lineage graph with self contained properties.\n  */\n public class LineageRelationship extends LineageEntity {\n-    private String firstEndGUID;\n-    private String secondEndGUID;\n+\n+    private LineageEntity firstEntity;\n+    private LineageEntity secondEntity;\n \n     /**\n-     * Gets the guid for the first end of the relationship\n+     * Gets the entity for the first end of the relationship\n      *\n      * @return the guid\n      */\n-    public String getFirstEndGUID() {\n-        return firstEndGUID;\n+    public LineageEntity getFirstEntity() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDE2NDk5OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/GlossaryHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo0NzozNVrOG5d6HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMDo1NzoxOFrOG7bY1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkxMjAyOA==", "bodyText": "I am unsure what this method is called addLineageClassificationToContext. It does not seem to involve Classification. Maybe addMeaningToContext. Meaning being haw we often refer to Glossary terms.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462912028", "createdAt": "2020-07-30T10:47:35Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/GlossaryHandler.java", "diffHunk": "@@ -75,57 +80,65 @@ public GlossaryHandler(InvalidParameterHandler invalidParameterHandler, OMRSRepo\n             getGlossary(userId, vertex.getGuid(), vertex.getTypeDefName());\n \n         return graph.getNeighbors();\n+    }\n+\n+    public Map<String, Set<GraphContext>> buildGlossaryTermContext(String userId, EntityDetail glossaryTerm) throws OCFCheckedExceptionBase {\n+        String methodName = \"buildGlossaryTermContext\";\n+        invalidParameterHandler.validateGUID(glossaryTerm.getGUID(), GUID_PARAMETER, methodName);\n+\n+        AssetContext glossaryContext = new AssetContext();\n+\n+        List<Relationship> semanticAssignments = getSemanticAssignments(userId, glossaryTerm.getGUID(), glossaryTerm.getType().getTypeDefName(), methodName);\n+        if (CollectionUtils.isEmpty(semanticAssignments)) {\n+            return null;\n+        }\n \n+        addSemanticAssignmentToContext(userId, glossaryTerm, glossaryContext, semanticAssignments.toArray(new Relationship[0]));\n+        handlerHelper.addLineageClassificationToContext(glossaryTerm, glossaryContext);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk2Nzg5NA==", "bodyText": "The method addLineageClassificationToContext adds the classifications of an entity to the context. It is not specific to a type - in this place it is called for a glossaryTerm, but it is also called when building the context for a process or an asset.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r464967894", "createdAt": "2020-08-04T10:57:18Z", "author": {"login": "popa-raluca"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/GlossaryHandler.java", "diffHunk": "@@ -75,57 +80,65 @@ public GlossaryHandler(InvalidParameterHandler invalidParameterHandler, OMRSRepo\n             getGlossary(userId, vertex.getGuid(), vertex.getTypeDefName());\n \n         return graph.getNeighbors();\n+    }\n+\n+    public Map<String, Set<GraphContext>> buildGlossaryTermContext(String userId, EntityDetail glossaryTerm) throws OCFCheckedExceptionBase {\n+        String methodName = \"buildGlossaryTermContext\";\n+        invalidParameterHandler.validateGUID(glossaryTerm.getGUID(), GUID_PARAMETER, methodName);\n+\n+        AssetContext glossaryContext = new AssetContext();\n+\n+        List<Relationship> semanticAssignments = getSemanticAssignments(userId, glossaryTerm.getGUID(), glossaryTerm.getType().getTypeDefName(), methodName);\n+        if (CollectionUtils.isEmpty(semanticAssignments)) {\n+            return null;\n+        }\n \n+        addSemanticAssignmentToContext(userId, glossaryTerm, glossaryContext, semanticAssignments.toArray(new Relationship[0]));\n+        handlerHelper.addLineageClassificationToContext(glossaryTerm, glossaryContext);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkxMjAyOA=="}, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDE3MTUwOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/GlossaryHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo0OTo1MVrOG5d-KA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo0OTo1MVrOG5d-KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkxMzA2NA==", "bodyText": "The comment indicates that it is retrieving (not there is no return)\nThe method starts with get but is not a getter.\nThe method name getGlossary mismatches the comment which is talking about semantic assignments (which are relationships", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462913064", "createdAt": "2020-07-30T10:49:51Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/GlossaryHandler.java", "diffHunk": "@@ -75,57 +80,65 @@ public GlossaryHandler(InvalidParameterHandler invalidParameterHandler, OMRSRepo\n             getGlossary(userId, vertex.getGuid(), vertex.getTypeDefName());\n \n         return graph.getNeighbors();\n+    }\n+\n+    public Map<String, Set<GraphContext>> buildGlossaryTermContext(String userId, EntityDetail glossaryTerm) throws OCFCheckedExceptionBase {\n+        String methodName = \"buildGlossaryTermContext\";\n+        invalidParameterHandler.validateGUID(glossaryTerm.getGUID(), GUID_PARAMETER, methodName);\n+\n+        AssetContext glossaryContext = new AssetContext();\n+\n+        List<Relationship> semanticAssignments = getSemanticAssignments(userId, glossaryTerm.getGUID(), glossaryTerm.getType().getTypeDefName(), methodName);\n+        if (CollectionUtils.isEmpty(semanticAssignments)) {\n+            return null;\n+        }\n \n+        addSemanticAssignmentToContext(userId, glossaryTerm, glossaryContext, semanticAssignments.toArray(new Relationship[0]));\n+        handlerHelper.addLineageClassificationToContext(glossaryTerm, glossaryContext);\n+\n+        return glossaryContext.getNeighbors();\n     }\n \n     /**\n-     * Retrieves semantic assignments for an asset\n+     * Retrieves semantic assignments for a Glossary Term\n      *\n-     * @param userId      userId\n-     * @param assetGuid   guid of the asset that has been created.\n-     * @param typeDefName the typeName of the asset.\n-     * @return Glossary Term retrieved from the property server\n+     * @param userId           userId\n+     * @param glossaryTermGUID guid of the glossary term\n+     * @param typeDefName      the typeName of the asset.\n      */\n-    private void getGlossary(String userId, String assetGuid, String typeDefName) throws OCFCheckedExceptionBase {\n+    private void getGlossary(String userId, String glossaryTermGUID, String typeDefName) throws OCFCheckedExceptionBase {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDE3Njg1OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/GlossaryHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo1MTozOFrOG5eBag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo1MTozOFrOG5eBag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkxMzg5OA==", "bodyText": "I suggest that there is a log entry if you find more than one semantic assignment associated with an asset.\nAs you are sending in only one semantic assignment - I wonder why you send a one element array rather than just the element.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462913898", "createdAt": "2020-07-30T10:51:38Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/GlossaryHandler.java", "diffHunk": "@@ -75,57 +80,65 @@ public GlossaryHandler(InvalidParameterHandler invalidParameterHandler, OMRSRepo\n             getGlossary(userId, vertex.getGuid(), vertex.getTypeDefName());\n \n         return graph.getNeighbors();\n+    }\n+\n+    public Map<String, Set<GraphContext>> buildGlossaryTermContext(String userId, EntityDetail glossaryTerm) throws OCFCheckedExceptionBase {\n+        String methodName = \"buildGlossaryTermContext\";\n+        invalidParameterHandler.validateGUID(glossaryTerm.getGUID(), GUID_PARAMETER, methodName);\n+\n+        AssetContext glossaryContext = new AssetContext();\n+\n+        List<Relationship> semanticAssignments = getSemanticAssignments(userId, glossaryTerm.getGUID(), glossaryTerm.getType().getTypeDefName(), methodName);\n+        if (CollectionUtils.isEmpty(semanticAssignments)) {\n+            return null;\n+        }\n \n+        addSemanticAssignmentToContext(userId, glossaryTerm, glossaryContext, semanticAssignments.toArray(new Relationship[0]));\n+        handlerHelper.addLineageClassificationToContext(glossaryTerm, glossaryContext);\n+\n+        return glossaryContext.getNeighbors();\n     }\n \n     /**\n-     * Retrieves semantic assignments for an asset\n+     * Retrieves semantic assignments for a Glossary Term\n      *\n-     * @param userId      userId\n-     * @param assetGuid   guid of the asset that has been created.\n-     * @param typeDefName the typeName of the asset.\n-     * @return Glossary Term retrieved from the property server\n+     * @param userId           userId\n+     * @param glossaryTermGUID guid of the glossary term\n+     * @param typeDefName      the typeName of the asset.\n      */\n-    private void getGlossary(String userId, String assetGuid, String typeDefName) throws OCFCheckedExceptionBase {\n+    private void getGlossary(String userId, String glossaryTermGUID, String typeDefName) throws OCFCheckedExceptionBase {\n         final String methodName = \"getGlossary\";\n \n-        String typeGuid = handlerHelper.getTypeName(userId, SEMANTIC_ASSIGNMENT);\n-        List<Relationship> semanticAssignments = repositoryHandler.getRelationshipsByType(userId,\n-                assetGuid,\n-                typeDefName,\n-                typeGuid,\n-                SEMANTIC_ASSIGNMENT,\n-                methodName);\n+        EntityDetail glossaryTerm = repositoryHandler.getEntityByGUID(userId, glossaryTermGUID, \"guid\", typeDefName, methodName);\n+        handlerHelper.addLineageClassificationToContext(glossaryTerm, graph);\n \n-        if (semanticAssignments == null)\n-            return;\n+        List<Relationship> semanticAssignments = getSemanticAssignments(userId, glossaryTermGUID, typeDefName, methodName);\n+        if (semanticAssignments == null) return;\n \n-        addSemanticAssignmentToContext(userId, semanticAssignments.toArray(new Relationship[0]));\n+        addSemanticAssignmentToContext(userId, glossaryTerm, graph, semanticAssignments.toArray(new Relationship[0]));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 104}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDE5NzQ2OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ProcessContextHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo1ODoxNlrOG5eOGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo1ODoxNlrOG5eOGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkxNzE0NA==", "bodyText": "I am not sure where the Asset has been created here?", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462917144", "createdAt": "2020-07-30T10:58:16Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ProcessContextHandler.java", "diffHunk": "@@ -46,46 +58,37 @@\n     public ProcessContextHandler(InvalidParameterHandler invalidParameterHandler,\n                                  OMRSRepositoryHelper repositoryHelper,\n                                  RepositoryHandler repositoryHandler,\n-                                 List<String> supportedZones) {\n+                                 AssetContextHandler assetContextHandler,\n+                                 List<String> supportedZones,\n+                                 List<String> lineageClassificationTypes) {\n         this.invalidParameterHandler = invalidParameterHandler;\n-        this.repositoryHandler = repositoryHandler;\n-        this.handlerHelper = new HandlerHelper(invalidParameterHandler, repositoryHelper, repositoryHandler);\n+        this.handlerHelper = new HandlerHelper(invalidParameterHandler, repositoryHelper, repositoryHandler, lineageClassificationTypes);\n+        this.assetContextHandler = assetContextHandler;\n         this.supportedZones = supportedZones;\n+        this.superTypesRetriever = new SuperTypesRetriever(repositoryHelper);\n     }\n \n     /**\n      * Retrieves the full context for a Process\n      *\n-     * @param userId      String - userId of user making request.\n-     * @param processGuid guid of the asset that has been created\n+     * @param userId  String - userId of user making request.\n+     * @param process the asset that has been created", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDIwMDU4OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ProcessContextHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo1OToxNVrOG5eP9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMDo1OToxNVrOG5eP9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkxNzYyMA==", "bodyText": "I am not sure what parent mean here", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462917620", "createdAt": "2020-07-30T10:59:15Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ProcessContextHandler.java", "diffHunk": "@@ -122,41 +124,62 @@ private boolean hasEntitiesLinkedWithProcessPort(String userId, EntityDetail ent\n         }\n \n         return hasRelationshipBasedOnType(entityDetails, userId);\n-\n     }\n \n \n     /**\n      * Retrieves the relationships of an Entity\n      *\n      * @param userId           String - userId of user making request.\n-     * @param guid             guid of parent entity\n+     * @param startEntity      parent entity", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 128}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDIyMzI4OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ProcessContextHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMTowNjo1NVrOG5eeFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMTowNjo1NVrOG5eeFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkyMTIzNw==", "bodyText": "I am unsure what an End Relationship is and how it relates to the code.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462921237", "createdAt": "2020-07-30T11:06:55Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/handlers/ProcessContextHandler.java", "diffHunk": "@@ -189,10 +212,8 @@ private boolean hasRelationshipBasedOnType(List<EntityDetail> entityDetails, Str\n     private boolean hasEndRelationship(List<EntityDetail> entityDetails, String userId) throws OCFCheckedExceptionBase {\n         List<EntityDetail> result = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 193}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDIyODA2OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/outtopic/AssetLineagePublisher.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMTowODo0MFrOG5ehHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMTowODo0MFrOG5ehHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkyMjAxMg==", "bodyText": "comments indicating what this is trying to do would be helpful.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462922012", "createdAt": "2020-07-30T11:08:40Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/outtopic/AssetLineagePublisher.java", "diffHunk": "@@ -83,26 +83,44 @@ public void publishProcessContext(EntityDetail entityDetail) throws OCFCheckedEx\n \n     public void publishAssetContext(EntityDetail entityDetail) throws OCFCheckedExceptionBase, JsonProcessingException {\n         String technicalGuid = entityDetail.getGUID();\n-        AssetContext assetContext = this.assetContextHandler.getAssetContext(serverUserName, technicalGuid, entityDetail.getType().getTypeDefName());\n+        AssetContext assetContext = this.assetContextHandler.getAssetContext(serverUserName, entityDetail);\n+\n         Map<String, Set<GraphContext>> context = this.glossaryHandler.getGlossaryTerm(technicalGuid, serverUserName, assetContext, this.superTypesRetriever);\n         LineageEvent event = new LineageEvent();\n-        if (!context.isEmpty())\n+        if (!context.isEmpty()) {\n             event.setAssetContext(context);\n-        else\n+        } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDIzMTkyOnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/server/AssetLineageRestServices.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMTowOTo1NVrOG5ejVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMTowOTo1NVrOG5ejVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkyMjU4MQ==", "bodyText": "The code seems to related to initial load - not scanning the cohort.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462922581", "createdAt": "2020-07-30T11:09:55Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/server/AssetLineageRestServices.java", "diffHunk": "@@ -24,5 +43,58 @@ public AssetLineageRestServices() {\n         instanceHandler.registerAccessService();\n     }\n \n+    /**\n+     * Scan the cohort for Glossary Terms available", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDIzNTQ4OnYy", "diffSide": "RIGHT", "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/server/AssetLineageRestServices.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMToxMTowNFrOG5eldQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMToxMTowNFrOG5eldQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkyMzEyNQ==", "bodyText": "I suggest explicitly checking for Asset and erroring if you get something else.", "url": "https://github.com/odpi/egeria/pull/3386#discussion_r462923125", "createdAt": "2020-07-30T11:11:04Z", "author": {"login": "davidradl"}, "path": "open-metadata-implementation/access-services/asset-lineage/asset-lineage-server/src/main/java/org/odpi/openmetadata/accessservices/assetlineage/server/AssetLineageRestServices.java", "diffHunk": "@@ -24,5 +43,58 @@ public AssetLineageRestServices() {\n         instanceHandler.registerAccessService();\n     }\n \n+    /**\n+     * Scan the cohort for Glossary Terms available\n+     * Publish the context for each Glossary Term on OMAS out Topic\n+     *\n+     * @param serverName name of server instance to call\n+     * @param userId     the name of the calling user\n+     * @return a list of unique identifiers (guids) of the available Glossary Terms as a response\n+     */\n+    public GUIDListResponse initialLoadByEntityType(String serverName, String userId, String entityType) {\n+        GUIDListResponse response = new GUIDListResponse();\n+\n+        String methodName = \"initialLoadByRelationshipType\";\n+        try {\n+            AssetContextHandler assetContextHandler = instanceHandler.getAssetContextHandler(userId, serverName, methodName);\n+            List<EntityDetail> entitiesByTypeName = assetContextHandler.getEntitiesByTypeName(userId, entityType);\n+            if (CollectionUtils.isEmpty(entitiesByTypeName)) {\n+                return response;\n+            }\n \n+            AssetLineagePublisher publisher = instanceHandler.getAssetLineagePublisher(userId, serverName, methodName);\n+            if (publisher == null) {\n+                log.debug(\"Asset Lineage Publisher is not available. \" +\n+                        \"The context event for {} could not be published on the Asset Lineage OMAS Out Topic.\", entityType);\n+                return response;\n+            }\n+            publishEntitiesContext(entityType, entitiesByTypeName, publisher);\n+\n+            response.setGUIDs(entitiesByTypeName.stream().map(InstanceHeader::getGUID).collect(Collectors.toList()));\n+        } catch (InvalidParameterException e) {\n+            restExceptionHandler.captureInvalidParameterException(response, e);\n+        } catch (UserNotAuthorizedException e) {\n+            restExceptionHandler.captureUserNotAuthorizedException(response, e);\n+        } catch (PropertyServerException e) {\n+            restExceptionHandler.capturePropertyServerException(response, e);\n+        }\n+\n+        return response;\n+    }\n+\n+    private void publishEntitiesContext(String typeName, List<EntityDetail> entitiesByType, AssetLineagePublisher publisher) {\n+        entitiesByType.forEach(entityDetail -> {\n+            try {\n+                if (GLOSSARY_TERM.equals(typeName)) {\n+                    publisher.publishGlossaryContext(entityDetail);\n+                } else if (PROCESS.equals(typeName)) {\n+                    publisher.publishProcessContext(entityDetail);\n+                } else {\n+                    publisher.publishAssetContext(entityDetail);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98c387a030664b4b0d4db694ce715c7fee030afe"}, "originalPosition": 87}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2619, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}