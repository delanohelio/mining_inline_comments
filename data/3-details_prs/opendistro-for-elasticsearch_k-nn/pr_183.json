{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3NDQ0NTE5", "number": 183, "title": "Flaky rest test case fix", "bodyText": "Issue #, if available:\n#178\nDescription of changes:\nIntroduce clearing of the cache after each rest test case runs. Currently, we do this by bouncing a random setting. However, in the future, we should replace this with the clear cache API.\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-07-27T22:58:00Z", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/183", "merged": true, "mergeCommit": {"oid": "88109c84468e218de49eaf9cf36af77736977575"}, "closed": true, "closedAt": "2020-07-28T16:30:58Z", "author": {"login": "jmazanec15"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5JhqogH2gAyNDU3NDQ0NTE5OmM0ZmFkNmEzOTMwOWZkYTliYzQ3YjllN2RiMTI5ZGZhOWMwZDRlODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5Q3-PgFqTQ1NjM1MjExNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c4fad6a39309fda9bc47b9e7db129dfa9c0d4e81", "author": {"user": {"login": "jmazanec15", "name": "Jack Mazanec"}}, "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/c4fad6a39309fda9bc47b9e7db129dfa9c0d4e81", "committedDate": "2020-07-27T22:25:41Z", "message": "clean up cache after each test case runs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2937626ae2c95257f7712f3db972086538d8ea7", "author": {"user": {"login": "jmazanec15", "name": "Jack Mazanec"}}, "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/a2937626ae2c95257f7712f3db972086538d8ea7", "committedDate": "2020-07-27T22:36:15Z", "message": "clean up cache after test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0924310c84bd8e9fea9009194383f1de9e069db", "author": {"user": {"login": "jmazanec15", "name": "Jack Mazanec"}}, "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/c0924310c84bd8e9fea9009194383f1de9e069db", "committedDate": "2020-07-27T23:01:07Z", "message": "switch to clean cache from after to before"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MzAxMzA5", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/183#pullrequestreview-456301309", "createdAt": "2020-07-28T04:54:44Z", "commit": {"oid": "c0924310c84bd8e9fea9009194383f1de9e069db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDo1NDo0NVrOG38lKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwNDo1NDo0NVrOG38lKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNzQxNg==", "bodyText": "Thanks for the comment here. Please create an issue so that it would be easy to track and get back", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/183#discussion_r461317416", "createdAt": "2020-07-28T04:54:45Z", "author": {"login": "vamshin"}, "path": "src/test/java/com/amazon/opendistroforelasticsearch/knn/KNNRestTestCase.java", "diffHunk": "@@ -413,4 +420,16 @@ protected String getIndexSettingByName(String indexName, String settingName) thr\n                         .get(\"settings\");\n         return (String)settings.get(settingName);\n     }\n+\n+    /**\n+     * Clear cache\n+     *\n+     * This function is a temporary workaround. Right now, we do not have a way of clearing the cache except by deleting\n+     * an index or changing k-NN settings. That being said, this function bounces a random k-NN setting in order to\n+     * clear the cache.\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0924310c84bd8e9fea9009194383f1de9e069db"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MzUyMTE3", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/183#pullrequestreview-456352117", "createdAt": "2020-07-28T06:59:23Z", "commit": {"oid": "c0924310c84bd8e9fea9009194383f1de9e069db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1258, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}