{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNTI0NzY1", "number": 73, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjo0Mzo1OVrODp8NtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwMDoyNjozOVrODqC7xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MzA0NzU2OnYy", "diffSide": "RIGHT", "path": ".github/workflows/CD.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjo0Mzo1OVrOF5bYpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzowNToxMVrOF5cIuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc2MTgzMQ==", "bodyText": "So, this will basically trigger whenever we create a tag that starts in v for releases correct?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r395761831", "createdAt": "2020-03-20T16:43:59Z", "author": {"login": "jmazanec15"}, "path": ".github/workflows/CD.yml", "diffHunk": "@@ -0,0 +1,42 @@\n+name: Build and Release k-NN\n+on:\n+  push:\n+    tags: \n+      - v*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a35e5fdc4589eff094f60d91e468018334f71f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc3NDEzOQ==", "bodyText": "Yes", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r395774139", "createdAt": "2020-03-20T17:05:11Z", "author": {"login": "rishabh6788"}, "path": ".github/workflows/CD.yml", "diffHunk": "@@ -0,0 +1,42 @@\n+name: Build and Release k-NN\n+on:\n+  push:\n+    tags: \n+      - v*", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc2MTgzMQ=="}, "originalCommit": {"oid": "c2a35e5fdc4589eff094f60d91e468018334f71f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MzA1MjIzOnYy", "diffSide": "RIGHT", "path": ".github/workflows/CD.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjo0NToxOFrOF5bbpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzowNzo0MlrOF5cOFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc2MjU5Ng==", "bodyText": "build buildDeb buildRpm  can be build release.", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r395762596", "createdAt": "2020-03-20T16:45:18Z", "author": {"login": "jmazanec15"}, "path": ".github/workflows/CD.yml", "diffHunk": "@@ -0,0 +1,42 @@\n+name: Build and Release k-NN\n+on:\n+  push:\n+    tags: \n+      - v*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Release k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Configure AWS\n+        uses: aws-actions/configure-aws-credentials@v1\n+        with:\n+          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n+          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n+          aws-region: us-east-1\n+      \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build buildDeb buildRpm --console=plain -Dbuild.snapshot=false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a35e5fdc4589eff094f60d91e468018334f71f"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc3NTUxMA==", "bodyText": "will update this.", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r395775510", "createdAt": "2020-03-20T17:07:42Z", "author": {"login": "rishabh6788"}, "path": ".github/workflows/CD.yml", "diffHunk": "@@ -0,0 +1,42 @@\n+name: Build and Release k-NN\n+on:\n+  push:\n+    tags: \n+      - v*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Release k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Configure AWS\n+        uses: aws-actions/configure-aws-credentials@v1\n+        with:\n+          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n+          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n+          aws-region: us-east-1\n+      \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build buildDeb buildRpm --console=plain -Dbuild.snapshot=false", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc2MjU5Ng=="}, "originalCommit": {"oid": "c2a35e5fdc4589eff094f60d91e468018334f71f"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MzA2MjY1OnYy", "diffSide": "RIGHT", "path": ".github/workflows/CI.yml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjo0ODowOVrOF5biTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzoxNjozMlrOF5chuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc2NDMwMw==", "bodyText": "Does sleep 15 ever produce errors when the cluster isn't ready after 15 seconds?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r395764303", "createdAt": "2020-03-20T16:48:09Z", "author": {"login": "jmazanec15"}, "path": ".github/workflows/CI.yml", "diffHunk": "@@ -0,0 +1,59 @@\n+name: Build and Test k-NN\n+on:\n+  push:\n+    branches:\n+      - master\n+      - opendistro-*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Test k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build\n+          ls -ltr build/distributions/\n+          \n+      - name: Pull and Run Docker\n+        run: |\n+          plugin=`ls build/distributions/*.zip`\n+          version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-3`\n+          plugin_version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-4`\n+          echo $version\n+          cd ..\n+          \n+          if docker pull opendistroforelasticsearch/opendistroforelasticsearch:$version\n+          then\n+            echo \"FROM opendistroforelasticsearch/opendistroforelasticsearch:$version\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro_security ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro_security; fi\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro-knn ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro-knn; fi\" >> Dockerfile\n+            echo \"ADD k-NN/build/distributions/opendistro-knn-$plugin_version.zip /tmp/\" >> Dockerfile\n+            echo \"RUN /usr/share/elasticsearch/bin/elasticsearch-plugin install --batch file:/tmp/opendistro-knn-$plugin_version.zip\" >> Dockerfile\n+            \n+            docker build -t odfe-knn:test .\n+          fi\n+          \n+      - name: Run Docker Image\n+        run: |\n+          cd ..\n+          docker run -p 9200:9200 -d -p 9600:9600 -e \"discovery.type=single-node\" odfe-knn:test\n+          sleep 15", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a35e5fdc4589eff094f60d91e468018334f71f"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc3NTI3OA==", "bodyText": "No. This is for the cluster to initialize and get ready.", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r395775278", "createdAt": "2020-03-20T17:07:18Z", "author": {"login": "rishabh6788"}, "path": ".github/workflows/CI.yml", "diffHunk": "@@ -0,0 +1,59 @@\n+name: Build and Test k-NN\n+on:\n+  push:\n+    branches:\n+      - master\n+      - opendistro-*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Test k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build\n+          ls -ltr build/distributions/\n+          \n+      - name: Pull and Run Docker\n+        run: |\n+          plugin=`ls build/distributions/*.zip`\n+          version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-3`\n+          plugin_version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-4`\n+          echo $version\n+          cd ..\n+          \n+          if docker pull opendistroforelasticsearch/opendistroforelasticsearch:$version\n+          then\n+            echo \"FROM opendistroforelasticsearch/opendistroforelasticsearch:$version\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro_security ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro_security; fi\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro-knn ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro-knn; fi\" >> Dockerfile\n+            echo \"ADD k-NN/build/distributions/opendistro-knn-$plugin_version.zip /tmp/\" >> Dockerfile\n+            echo \"RUN /usr/share/elasticsearch/bin/elasticsearch-plugin install --batch file:/tmp/opendistro-knn-$plugin_version.zip\" >> Dockerfile\n+            \n+            docker build -t odfe-knn:test .\n+          fi\n+          \n+      - name: Run Docker Image\n+        run: |\n+          cd ..\n+          docker run -p 9200:9200 -d -p 9600:9600 -e \"discovery.type=single-node\" odfe-knn:test\n+          sleep 15", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc2NDMwMw=="}, "originalCommit": {"oid": "c2a35e5fdc4589eff094f60d91e468018334f71f"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc4MDUzOQ==", "bodyText": "Sorry, what I meant to ask is 15 second sleep always enough time?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r395780539", "createdAt": "2020-03-20T17:16:32Z", "author": {"login": "jmazanec15"}, "path": ".github/workflows/CI.yml", "diffHunk": "@@ -0,0 +1,59 @@\n+name: Build and Test k-NN\n+on:\n+  push:\n+    branches:\n+      - master\n+      - opendistro-*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Test k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build\n+          ls -ltr build/distributions/\n+          \n+      - name: Pull and Run Docker\n+        run: |\n+          plugin=`ls build/distributions/*.zip`\n+          version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-3`\n+          plugin_version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-4`\n+          echo $version\n+          cd ..\n+          \n+          if docker pull opendistroforelasticsearch/opendistroforelasticsearch:$version\n+          then\n+            echo \"FROM opendistroforelasticsearch/opendistroforelasticsearch:$version\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro_security ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro_security; fi\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro-knn ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro-knn; fi\" >> Dockerfile\n+            echo \"ADD k-NN/build/distributions/opendistro-knn-$plugin_version.zip /tmp/\" >> Dockerfile\n+            echo \"RUN /usr/share/elasticsearch/bin/elasticsearch-plugin install --batch file:/tmp/opendistro-knn-$plugin_version.zip\" >> Dockerfile\n+            \n+            docker build -t odfe-knn:test .\n+          fi\n+          \n+      - name: Run Docker Image\n+        run: |\n+          cd ..\n+          docker run -p 9200:9200 -d -p 9600:9600 -e \"discovery.type=single-node\" odfe-knn:test\n+          sleep 15", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc2NDMwMw=="}, "originalCommit": {"oid": "c2a35e5fdc4589eff094f60d91e468018334f71f"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MzA2NzY5OnYy", "diffSide": "RIGHT", "path": ".github/workflows/CI.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNjo0OTozNVrOF5blhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzowNzoxNVrOF5cNFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc2NTEyNQ==", "bodyText": "Is the purpose of this line to check that the cluster is running?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r395765125", "createdAt": "2020-03-20T16:49:35Z", "author": {"login": "jmazanec15"}, "path": ".github/workflows/CI.yml", "diffHunk": "@@ -0,0 +1,59 @@\n+name: Build and Test k-NN\n+on:\n+  push:\n+    branches:\n+      - master\n+      - opendistro-*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Test k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build\n+          ls -ltr build/distributions/\n+          \n+      - name: Pull and Run Docker\n+        run: |\n+          plugin=`ls build/distributions/*.zip`\n+          version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-3`\n+          plugin_version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-4`\n+          echo $version\n+          cd ..\n+          \n+          if docker pull opendistroforelasticsearch/opendistroforelasticsearch:$version\n+          then\n+            echo \"FROM opendistroforelasticsearch/opendistroforelasticsearch:$version\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro_security ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro_security; fi\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro-knn ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro-knn; fi\" >> Dockerfile\n+            echo \"ADD k-NN/build/distributions/opendistro-knn-$plugin_version.zip /tmp/\" >> Dockerfile\n+            echo \"RUN /usr/share/elasticsearch/bin/elasticsearch-plugin install --batch file:/tmp/opendistro-knn-$plugin_version.zip\" >> Dockerfile\n+            \n+            docker build -t odfe-knn:test .\n+          fi\n+          \n+      - name: Run Docker Image\n+        run: |\n+          cd ..\n+          docker run -p 9200:9200 -d -p 9600:9600 -e \"discovery.type=single-node\" odfe-knn:test\n+          sleep 15\n+          curl -XGET http://localhost:9200/_cat/plugins", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a35e5fdc4589eff094f60d91e468018334f71f"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc3NTI1NQ==", "bodyText": "Yes, to test whether ES is up and running.", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r395775255", "createdAt": "2020-03-20T17:07:15Z", "author": {"login": "rishabh6788"}, "path": ".github/workflows/CI.yml", "diffHunk": "@@ -0,0 +1,59 @@\n+name: Build and Test k-NN\n+on:\n+  push:\n+    branches:\n+      - master\n+      - opendistro-*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Test k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build\n+          ls -ltr build/distributions/\n+          \n+      - name: Pull and Run Docker\n+        run: |\n+          plugin=`ls build/distributions/*.zip`\n+          version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-3`\n+          plugin_version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-4`\n+          echo $version\n+          cd ..\n+          \n+          if docker pull opendistroforelasticsearch/opendistroforelasticsearch:$version\n+          then\n+            echo \"FROM opendistroforelasticsearch/opendistroforelasticsearch:$version\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro_security ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro_security; fi\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro-knn ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro-knn; fi\" >> Dockerfile\n+            echo \"ADD k-NN/build/distributions/opendistro-knn-$plugin_version.zip /tmp/\" >> Dockerfile\n+            echo \"RUN /usr/share/elasticsearch/bin/elasticsearch-plugin install --batch file:/tmp/opendistro-knn-$plugin_version.zip\" >> Dockerfile\n+            \n+            docker build -t odfe-knn:test .\n+          fi\n+          \n+      - name: Run Docker Image\n+        run: |\n+          cd ..\n+          docker run -p 9200:9200 -d -p 9600:9600 -e \"discovery.type=single-node\" odfe-knn:test\n+          sleep 15\n+          curl -XGET http://localhost:9200/_cat/plugins", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc2NTEyNQ=="}, "originalCommit": {"oid": "c2a35e5fdc4589eff094f60d91e468018334f71f"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NDE0ODUzOnYy", "diffSide": "RIGHT", "path": ".github/workflows/CI.yml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMVQwMDoyNjozOVrOF5mVmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDo0NDo1NVrOF6IskA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk0MTI3Mw==", "bodyText": "Why do we need to remove security plugin?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r395941273", "createdAt": "2020-03-21T00:26:39Z", "author": {"login": "vamshin"}, "path": ".github/workflows/CI.yml", "diffHunk": "@@ -0,0 +1,59 @@\n+name: Build and Test k-NN\n+on:\n+  push:\n+    branches:\n+      - master\n+      - opendistro-*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Test k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build\n+          ls -ltr build/distributions/\n+          \n+      - name: Pull and Run Docker\n+        run: |\n+          plugin=`ls build/distributions/*.zip`\n+          version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-3`\n+          plugin_version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-4`\n+          echo $version\n+          cd ..\n+          \n+          if docker pull opendistroforelasticsearch/opendistroforelasticsearch:$version\n+          then\n+            echo \"FROM opendistroforelasticsearch/opendistroforelasticsearch:$version\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro_security ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro_security; fi\" >> Dockerfile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3031c5603f478eb73c07fbc7b80d6fb58f6c1577"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5MzQyNA==", "bodyText": "The ESRestTest Client uses http by default. Need to disable the security plugin to call the rest api over http.", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r396093424", "createdAt": "2020-03-22T13:25:34Z", "author": {"login": "rishabh6788"}, "path": ".github/workflows/CI.yml", "diffHunk": "@@ -0,0 +1,59 @@\n+name: Build and Test k-NN\n+on:\n+  push:\n+    branches:\n+      - master\n+      - opendistro-*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Test k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build\n+          ls -ltr build/distributions/\n+          \n+      - name: Pull and Run Docker\n+        run: |\n+          plugin=`ls build/distributions/*.zip`\n+          version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-3`\n+          plugin_version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-4`\n+          echo $version\n+          cd ..\n+          \n+          if docker pull opendistroforelasticsearch/opendistroforelasticsearch:$version\n+          then\n+            echo \"FROM opendistroforelasticsearch/opendistroforelasticsearch:$version\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro_security ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro_security; fi\" >> Dockerfile", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk0MTI3Mw=="}, "originalCommit": {"oid": "3031c5603f478eb73c07fbc7b80d6fb58f6c1577"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjIzMzQxNQ==", "bodyText": "Lets add it as a comment.", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r396233415", "createdAt": "2020-03-23T06:25:58Z", "author": {"login": "vamshin"}, "path": ".github/workflows/CI.yml", "diffHunk": "@@ -0,0 +1,59 @@\n+name: Build and Test k-NN\n+on:\n+  push:\n+    branches:\n+      - master\n+      - opendistro-*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Test k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build\n+          ls -ltr build/distributions/\n+          \n+      - name: Pull and Run Docker\n+        run: |\n+          plugin=`ls build/distributions/*.zip`\n+          version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-3`\n+          plugin_version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-4`\n+          echo $version\n+          cd ..\n+          \n+          if docker pull opendistroforelasticsearch/opendistroforelasticsearch:$version\n+          then\n+            echo \"FROM opendistroforelasticsearch/opendistroforelasticsearch:$version\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro_security ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro_security; fi\" >> Dockerfile", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk0MTI3Mw=="}, "originalCommit": {"oid": "3031c5603f478eb73c07fbc7b80d6fb58f6c1577"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUwNDIwOA==", "bodyText": "Added.", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/73#discussion_r396504208", "createdAt": "2020-03-23T14:44:55Z", "author": {"login": "rishabh6788"}, "path": ".github/workflows/CI.yml", "diffHunk": "@@ -0,0 +1,59 @@\n+name: Build and Test k-NN\n+on:\n+  push:\n+    branches:\n+      - master\n+      - opendistro-*\n+\n+jobs:\n+  Build-k-NN:\n+    strategy:\n+      matrix:\n+        java: [12]\n+\n+    name: Build and Test k-NN Plugin\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout k-NN\n+        uses: actions/checkout@v1\n+        \n+      - name: Setup Java ${{ matrix.java }}\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: ${{ matrix.java }}\n+      \n+      - name: Run build\n+        run: |\n+          ./gradlew build\n+          ls -ltr build/distributions/\n+          \n+      - name: Pull and Run Docker\n+        run: |\n+          plugin=`ls build/distributions/*.zip`\n+          version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-3`\n+          plugin_version=`echo $plugin|awk -F- '{print $3}'| cut -d. -f 1-4`\n+          echo $version\n+          cd ..\n+          \n+          if docker pull opendistroforelasticsearch/opendistroforelasticsearch:$version\n+          then\n+            echo \"FROM opendistroforelasticsearch/opendistroforelasticsearch:$version\" >> Dockerfile\n+            echo \"RUN if [ -d /usr/share/elasticsearch/plugins/opendistro_security ]; then /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro_security; fi\" >> Dockerfile", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk0MTI3Mw=="}, "originalCommit": {"oid": "3031c5603f478eb73c07fbc7b80d6fb58f6c1577"}, "originalPosition": 42}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2724, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}