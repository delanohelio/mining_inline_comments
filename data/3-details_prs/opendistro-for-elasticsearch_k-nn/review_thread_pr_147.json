{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4OTc3NDUx", "number": 147, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo1MzoxMVrOEIZxWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNToyMToyNFrOEIzwpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MjQ2Mjk4OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo1MzoxMVrOGoV5yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo1MzoxMVrOGoV5yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1NTA4Mg==", "bodyText": "Why is this commented out?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r444955082", "createdAt": "2020-06-24T14:53:11Z", "author": {"login": "jmazanec15"}, "path": "build.gradle", "diffHunk": "@@ -40,7 +40,7 @@ plugins {\n     id 'java-library'\n     id 'nebula.ospackage' version \"8.3.0\" apply false\n     id 'idea'\n-    id 'jacoco'\n+    //id 'jacoco'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c84ee0e4437e958b752b7e04e30a3c2ab2f614e2"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MjQ2NDEzOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo1MzozMFrOGoV6kQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNjozNToxOVrOGoaKUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1NTI4MQ==", "bodyText": "Why is this commented out?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r444955281", "createdAt": "2020-06-24T14:53:30Z", "author": {"login": "jmazanec15"}, "path": "build.gradle", "diffHunk": "@@ -52,12 +52,12 @@ def integTestDependOnJniLib = false\n if (!usingRemoteCluster) {\n     integTestDependOnJniLib = true\n     if (!usingMultiNode) {\n-        apply from: 'build-tools/knnplugin-coverage.gradle'\n+       // apply from: 'build-tools/knnplugin-coverage.gradle'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c84ee0e4437e958b752b7e04e30a3c2ab2f614e2"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAyNDg0OQ==", "bodyText": "Good catch. Forgot to fix the jacoco. Its WIP", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445024849", "createdAt": "2020-06-24T16:35:19Z", "author": {"login": "vamshin"}, "path": "build.gradle", "diffHunk": "@@ -52,12 +52,12 @@ def integTestDependOnJniLib = false\n if (!usingRemoteCluster) {\n     integTestDependOnJniLib = true\n     if (!usingMultiNode) {\n-        apply from: 'build-tools/knnplugin-coverage.gradle'\n+       // apply from: 'build-tools/knnplugin-coverage.gradle'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1NTI4MQ=="}, "originalCommit": {"oid": "c84ee0e4437e958b752b7e04e30a3c2ab2f614e2"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MjQ2NjE3OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo1NDowMFrOGoV76w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNjozNDo1MVrOGoaJRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1NTYyNw==", "bodyText": "Because this is just upgrading ES version, ODFE version does not need to be bumped up.", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r444955627", "createdAt": "2020-06-24T14:54:00Z", "author": {"login": "jmazanec15"}, "path": "build.gradle", "diffHunk": "@@ -52,12 +52,12 @@ def integTestDependOnJniLib = false\n if (!usingRemoteCluster) {\n     integTestDependOnJniLib = true\n     if (!usingMultiNode) {\n-        apply from: 'build-tools/knnplugin-coverage.gradle'\n+       // apply from: 'build-tools/knnplugin-coverage.gradle'\n     }\n }\n \n ext {\n-    opendistroVersion = '1.8.0'\n+    opendistroVersion = '1.9.0'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c84ee0e4437e958b752b7e04e30a3c2ab2f614e2"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAyNDU4MQ==", "bodyText": "makes sense. Will revert it.", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445024581", "createdAt": "2020-06-24T16:34:51Z", "author": {"login": "vamshin"}, "path": "build.gradle", "diffHunk": "@@ -52,12 +52,12 @@ def integTestDependOnJniLib = false\n if (!usingRemoteCluster) {\n     integTestDependOnJniLib = true\n     if (!usingMultiNode) {\n-        apply from: 'build-tools/knnplugin-coverage.gradle'\n+       // apply from: 'build-tools/knnplugin-coverage.gradle'\n     }\n }\n \n ext {\n-    opendistroVersion = '1.8.0'\n+    opendistroVersion = '1.9.0'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1NTYyNw=="}, "originalCommit": {"oid": "c84ee0e4437e958b752b7e04e30a3c2ab2f614e2"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MjQ2NzQ0OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo1NDoxOFrOGoV8xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo1NDoxOFrOGoV8xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1NTg0Ng==", "bodyText": "Is this WIP?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r444955846", "createdAt": "2020-06-24T14:54:18Z", "author": {"login": "jmazanec15"}, "path": "build.gradle", "diffHunk": "@@ -75,11 +75,11 @@ allprojects {\n }\n \n \n-jacoco {\n-    toolVersion = \"0.8.5\"\n-}\n-\n-check.dependsOn jacocoTestReport\n+//jacoco {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c84ee0e4437e958b752b7e04e30a3c2ab2f614e2"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3MjQ3MzMzOnYy", "diffSide": "LEFT", "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/KNNVectorFieldMapper.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNDo1NTozMVrOGoWAeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNjozMzo1MlrOGoaHAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1Njc5Mg==", "bodyText": "Why can we remove this?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r444956792", "createdAt": "2020-06-24T14:55:31Z", "author": {"login": "jmazanec15"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/KNNVectorFieldMapper.java", "diffHunk": "@@ -49,7 +48,7 @@\n /**\n  * Field Mapper for KNN vector type.\n  */\n-public class KNNVectorFieldMapper extends FieldMapper implements ArrayValueMapperParser {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c84ee0e4437e958b752b7e04e30a3c2ab2f614e2"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAyNDAwMA==", "bodyText": "ArrayValueMapperParser is removed in ES version 7.8. So refactored around that", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445024000", "createdAt": "2020-06-24T16:33:52Z", "author": {"login": "vamshin"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/KNNVectorFieldMapper.java", "diffHunk": "@@ -49,7 +48,7 @@\n /**\n  * Field Mapper for KNN vector type.\n  */\n-public class KNNVectorFieldMapper extends FieldMapper implements ArrayValueMapperParser {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1Njc5Mg=="}, "originalCommit": {"oid": "c84ee0e4437e958b752b7e04e30a3c2ab2f614e2"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NjcwOTQ0OnYy", "diffSide": "RIGHT", "path": "build-tools/knnplugin-coverage.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNToxODo0NFrOGo_now==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNTo1MTozOVrOGpA_2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzODU2Mw==", "bodyText": "Just curious, what does this do?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445638563", "createdAt": "2020-06-25T15:18:44Z", "author": {"login": "jmazanec15"}, "path": "build-tools/knnplugin-coverage.gradle", "diffHunk": "@@ -74,7 +74,7 @@ allprojects{\n         jacocoTestReport.dependsOn integTest.runner\n \n         testClusters.integTest {\n-            jvmArgs \" ${dummyIntegTest.jacoco.getAsJvmArg()}\"\n+            jvmArgs \" ${dummyIntegTest.jacoco.getAsJvmArg()}\".replace('javaagent:','javaagent:/')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbe6e5526989784dc00d5d836388b480ac7571a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY2MTE0Nw==", "bodyText": "Fixes jacocoagent path to work with gradle 6.5 for integration tests", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445661147", "createdAt": "2020-06-25T15:51:39Z", "author": {"login": "vamshin"}, "path": "build-tools/knnplugin-coverage.gradle", "diffHunk": "@@ -74,7 +74,7 @@ allprojects{\n         jacocoTestReport.dependsOn integTest.runner\n \n         testClusters.integTest {\n-            jvmArgs \" ${dummyIntegTest.jacoco.getAsJvmArg()}\"\n+            jvmArgs \" ${dummyIntegTest.jacoco.getAsJvmArg()}\".replace('javaagent:','javaagent:/')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzODU2Mw=="}, "originalCommit": {"oid": "bbe6e5526989784dc00d5d836388b480ac7571a0"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NjcxMTY5OnYy", "diffSide": "LEFT", "path": "build.gradle", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNToxOToxN1rOGo_pIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjoxMDoyNlrOGpBw7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzODk0Nw==", "bodyText": "Why was this removed?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445638947", "createdAt": "2020-06-25T15:19:17Z", "author": {"login": "jmazanec15"}, "path": "build.gradle", "diffHunk": "@@ -209,8 +209,7 @@ forbiddenPatterns {\n // see https://github.com/elastic/elasticsearch/blob/323f312bbc829a63056a79ebe45adced5099f6e6/buildSrc/src/main/java/org/elasticsearch/gradle/precommit/TestingConventionsTasks.java\n // enable testingConventions check will cause errors like:  \"Classes ending with [Tests] must subclass [LuceneTestCase]\"\n testingConventions.enabled = false\n-licenseHeaders.enabled = true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbe6e5526989784dc00d5d836388b480ac7571a0"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY2MTI5MA==", "bodyText": "this was a duplicate", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445661290", "createdAt": "2020-06-25T15:51:53Z", "author": {"login": "vamshin"}, "path": "build.gradle", "diffHunk": "@@ -209,8 +209,7 @@ forbiddenPatterns {\n // see https://github.com/elastic/elasticsearch/blob/323f312bbc829a63056a79ebe45adced5099f6e6/buildSrc/src/main/java/org/elasticsearch/gradle/precommit/TestingConventionsTasks.java\n // enable testingConventions check will cause errors like:  \"Classes ending with [Tests] must subclass [LuceneTestCase]\"\n testingConventions.enabled = false\n-licenseHeaders.enabled = true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzODk0Nw=="}, "originalCommit": {"oid": "bbe6e5526989784dc00d5d836388b480ac7571a0"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3MzcwOA==", "bodyText": "Oh cool", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445673708", "createdAt": "2020-06-25T16:10:26Z", "author": {"login": "jmazanec15"}, "path": "build.gradle", "diffHunk": "@@ -209,8 +209,7 @@ forbiddenPatterns {\n // see https://github.com/elastic/elasticsearch/blob/323f312bbc829a63056a79ebe45adced5099f6e6/buildSrc/src/main/java/org/elasticsearch/gradle/precommit/TestingConventionsTasks.java\n // enable testingConventions check will cause errors like:  \"Classes ending with [Tests] must subclass [LuceneTestCase]\"\n testingConventions.enabled = false\n-licenseHeaders.enabled = true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzODk0Nw=="}, "originalCommit": {"oid": "bbe6e5526989784dc00d5d836388b480ac7571a0"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NjcxMzU2OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNToxOTo0NlrOGo_qbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNToxOTo0NlrOGo_qbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTYzOTI3Ng==", "bodyText": "Nice, will save us some trouble", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445639276", "createdAt": "2020-06-25T15:19:46Z", "author": {"login": "jmazanec15"}, "path": "build.gradle", "diffHunk": "@@ -231,7 +230,7 @@ afterEvaluate {\n         dirMode 0755\n \n         requires('elasticsearch-oss', versions.elasticsearch, EQUAL)\n-        requires(\"opendistro-knnlib\",  \"1.8.0.0\",  EQUAL)\n+        requires(\"opendistro-knnlib\",  \"${opendistroVersion}.0\",  EQUAL)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbe6e5526989784dc00d5d836388b480ac7571a0"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NjcyMTAwOnYy", "diffSide": "RIGHT", "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/KNNVectorFieldMapper.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNToyMToyNFrOGo_vUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjoxMTowN1rOGpByvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY0MDUzMQ==", "bodyText": "Curious, what does this do?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445640531", "createdAt": "2020-06-25T15:21:24Z", "author": {"login": "jmazanec15"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/KNNVectorFieldMapper.java", "diffHunk": "@@ -235,6 +234,11 @@ public Query termQuery(Object value, QueryShardContext context) {\n         }\n     }\n \n+    @Override\n+    public final boolean parsesArrayValue() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbe6e5526989784dc00d5d836388b480ac7571a0"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY2MTc3OQ==", "bodyText": "It tells the parser to expect array. Otherwise, it treats as a single value and fails validating the vector with respect to number of dimensions", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445661779", "createdAt": "2020-06-25T15:52:41Z", "author": {"login": "vamshin"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/KNNVectorFieldMapper.java", "diffHunk": "@@ -235,6 +234,11 @@ public Query termQuery(Object value, QueryShardContext context) {\n         }\n     }\n \n+    @Override\n+    public final boolean parsesArrayValue() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY0MDUzMQ=="}, "originalCommit": {"oid": "bbe6e5526989784dc00d5d836388b480ac7571a0"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3NDE3NQ==", "bodyText": "Oh interesting. Thanks", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/147#discussion_r445674175", "createdAt": "2020-06-25T16:11:07Z", "author": {"login": "jmazanec15"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/KNNVectorFieldMapper.java", "diffHunk": "@@ -235,6 +234,11 @@ public Query termQuery(Object value, QueryShardContext context) {\n         }\n     }\n \n+    @Override\n+    public final boolean parsesArrayValue() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY0MDUzMQ=="}, "originalCommit": {"oid": "bbe6e5526989784dc00d5d836388b480ac7571a0"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2770, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}