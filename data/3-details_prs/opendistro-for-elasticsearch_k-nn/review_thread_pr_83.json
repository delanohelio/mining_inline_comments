{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NzgzODYy", "number": 83, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNDozODo0MVrODv1FWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQyMzoxMTowNVrODwMpjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNDc5Mzg3OnYy", "diffSide": "RIGHT", "path": "jni/CMakeLists.txt", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNDozODo0MVrOGCeuIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNzoyNzozNVrOGC5fSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI1MzY2Ng==", "bodyText": "Probably need ${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib/similarity_search", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/83#discussion_r405253666", "createdAt": "2020-04-08T04:38:41Z", "author": {"login": "chenqi0805"}, "path": "jni/CMakeLists.txt", "diffHunk": "@@ -0,0 +1,56 @@\n+#\n+#   Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+#\n+#   Licensed under the Apache License, Version 2.0 (the \"License\").\n+#   You may not use this file except in compliance with the License.\n+#   A copy of the License is located at\n+#\n+#       http://www.apache.org/licenses/LICENSE-2.0\n+#\n+#   or in the \"license\" file accompanying this file. This file is distributed\n+#   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+#   express or implied. See the License for the specific language governing\n+#   permissions and limitations under the License.\n+#\n+\n+cmake_minimum_required(VERSION 2.8)\n+\n+project(KNNIndexV1_7_3_6)\n+\n+set(CMAKE_CXX_STANDARD 11)\n+set(CMAKE_CXX_STANDARD_REQUIRED True)\n+\n+# Target Library to be built\n+set(KNN_INDEX KNNIndexV1_7_3_6)\n+\n+# Check if similarity search exists\n+find_path(NMS_REPO_DIR NAMES similarity_search PATHS ${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib REQUIRED)\n+\n+# If not, pull the updated submodule\n+if (NOT EXISTS ${NMS_REPO_DIR})\n+    message(STATUS \"Could not find nmslib. Pulling updated submodule.\")\n+    execute_process(COMMAND git submodule update --init -- external/nmslib WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})\n+endif ()\n+\n+# Add the subdirectory so it is possible to use its targets\n+add_subdirectory(external/nmslib/similarity_search)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19eee61e86576c509af99ee33e82ef70f330f7b4"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY5MjIzNA==", "bodyText": "Good catch. Updated thanks!", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/83#discussion_r405692234", "createdAt": "2020-04-08T17:27:35Z", "author": {"login": "jmazanec15"}, "path": "jni/CMakeLists.txt", "diffHunk": "@@ -0,0 +1,56 @@\n+#\n+#   Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+#\n+#   Licensed under the Apache License, Version 2.0 (the \"License\").\n+#   You may not use this file except in compliance with the License.\n+#   A copy of the License is located at\n+#\n+#       http://www.apache.org/licenses/LICENSE-2.0\n+#\n+#   or in the \"license\" file accompanying this file. This file is distributed\n+#   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+#   express or implied. See the License for the specific language governing\n+#   permissions and limitations under the License.\n+#\n+\n+cmake_minimum_required(VERSION 2.8)\n+\n+project(KNNIndexV1_7_3_6)\n+\n+set(CMAKE_CXX_STANDARD 11)\n+set(CMAKE_CXX_STANDARD_REQUIRED True)\n+\n+# Target Library to be built\n+set(KNN_INDEX KNNIndexV1_7_3_6)\n+\n+# Check if similarity search exists\n+find_path(NMS_REPO_DIR NAMES similarity_search PATHS ${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib REQUIRED)\n+\n+# If not, pull the updated submodule\n+if (NOT EXISTS ${NMS_REPO_DIR})\n+    message(STATUS \"Could not find nmslib. Pulling updated submodule.\")\n+    execute_process(COMMAND git submodule update --init -- external/nmslib WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})\n+endif ()\n+\n+# Add the subdirectory so it is possible to use its targets\n+add_subdirectory(external/nmslib/similarity_search)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI1MzY2Ng=="}, "originalCommit": {"oid": "19eee61e86576c509af99ee33e82ef70f330f7b4"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxODY1NDg3OnYy", "diffSide": "RIGHT", "path": "jni/CMakeLists.txt", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQyMzoxMTowNVrOGDEHMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODo0MToxNlrOGDk49A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg2NjI4OQ==", "bodyText": "I find out that .dylib will facilitate debugging jni code. Specifically, one can use \"attach to process\" in C++ IDE to successfully attach to jps. For .jnilib it will not work for unknown reason. Maybe it is worth building an extra shared library on macOS to facilitate development?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/83#discussion_r405866289", "createdAt": "2020-04-08T23:11:05Z", "author": {"login": "chenqi0805"}, "path": "jni/CMakeLists.txt", "diffHunk": "@@ -0,0 +1,56 @@\n+#\n+#   Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+#\n+#   Licensed under the Apache License, Version 2.0 (the \"License\").\n+#   You may not use this file except in compliance with the License.\n+#   A copy of the License is located at\n+#\n+#       http://www.apache.org/licenses/LICENSE-2.0\n+#\n+#   or in the \"license\" file accompanying this file. This file is distributed\n+#   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+#   express or implied. See the License for the specific language governing\n+#   permissions and limitations under the License.\n+#\n+\n+cmake_minimum_required(VERSION 2.8)\n+\n+project(KNNIndexV1_7_3_6)\n+\n+set(CMAKE_CXX_STANDARD 11)\n+set(CMAKE_CXX_STANDARD_REQUIRED True)\n+\n+# Target Library to be built\n+set(KNN_INDEX KNNIndexV1_7_3_6)\n+\n+# Check if similarity search exists\n+find_path(NMS_REPO_DIR NAMES similarity_search PATHS ${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib REQUIRED)\n+\n+# If not, pull the updated submodule\n+if (NOT EXISTS ${NMS_REPO_DIR})\n+    message(STATUS \"Could not find nmslib. Pulling updated submodule.\")\n+    execute_process(COMMAND git submodule update --init -- external/nmslib WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})\n+endif ()\n+\n+# Add the subdirectory so it is possible to use its targets\n+add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib/similarity_search)\n+\n+# Set OS specific variables\n+if (${CMAKE_SYSTEM_NAME} STREQUAL Darwin)\n+    set(JVM_OS_TYPE darwin)\n+    set(LIB_EXT .jnilib)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "801534aff21a8069b18a98919a0bb62b2c7de63f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg5MTUyMg==", "bodyText": "Interesting, that would help development. It may be out of the scope of this PR, but is worth investigating. Could you create an issue for it?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/83#discussion_r405891522", "createdAt": "2020-04-09T00:34:11Z", "author": {"login": "jmazanec15"}, "path": "jni/CMakeLists.txt", "diffHunk": "@@ -0,0 +1,56 @@\n+#\n+#   Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+#\n+#   Licensed under the Apache License, Version 2.0 (the \"License\").\n+#   You may not use this file except in compliance with the License.\n+#   A copy of the License is located at\n+#\n+#       http://www.apache.org/licenses/LICENSE-2.0\n+#\n+#   or in the \"license\" file accompanying this file. This file is distributed\n+#   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+#   express or implied. See the License for the specific language governing\n+#   permissions and limitations under the License.\n+#\n+\n+cmake_minimum_required(VERSION 2.8)\n+\n+project(KNNIndexV1_7_3_6)\n+\n+set(CMAKE_CXX_STANDARD 11)\n+set(CMAKE_CXX_STANDARD_REQUIRED True)\n+\n+# Target Library to be built\n+set(KNN_INDEX KNNIndexV1_7_3_6)\n+\n+# Check if similarity search exists\n+find_path(NMS_REPO_DIR NAMES similarity_search PATHS ${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib REQUIRED)\n+\n+# If not, pull the updated submodule\n+if (NOT EXISTS ${NMS_REPO_DIR})\n+    message(STATUS \"Could not find nmslib. Pulling updated submodule.\")\n+    execute_process(COMMAND git submodule update --init -- external/nmslib WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})\n+endif ()\n+\n+# Add the subdirectory so it is possible to use its targets\n+add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib/similarity_search)\n+\n+# Set OS specific variables\n+if (${CMAKE_SYSTEM_NAME} STREQUAL Darwin)\n+    set(JVM_OS_TYPE darwin)\n+    set(LIB_EXT .jnilib)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg2NjI4OQ=="}, "originalCommit": {"oid": "801534aff21a8069b18a98919a0bb62b2c7de63f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTkwMDc0Mw==", "bodyText": "#87", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/83#discussion_r405900743", "createdAt": "2020-04-09T01:08:58Z", "author": {"login": "chenqi0805"}, "path": "jni/CMakeLists.txt", "diffHunk": "@@ -0,0 +1,56 @@\n+#\n+#   Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+#\n+#   Licensed under the Apache License, Version 2.0 (the \"License\").\n+#   You may not use this file except in compliance with the License.\n+#   A copy of the License is located at\n+#\n+#       http://www.apache.org/licenses/LICENSE-2.0\n+#\n+#   or in the \"license\" file accompanying this file. This file is distributed\n+#   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+#   express or implied. See the License for the specific language governing\n+#   permissions and limitations under the License.\n+#\n+\n+cmake_minimum_required(VERSION 2.8)\n+\n+project(KNNIndexV1_7_3_6)\n+\n+set(CMAKE_CXX_STANDARD 11)\n+set(CMAKE_CXX_STANDARD_REQUIRED True)\n+\n+# Target Library to be built\n+set(KNN_INDEX KNNIndexV1_7_3_6)\n+\n+# Check if similarity search exists\n+find_path(NMS_REPO_DIR NAMES similarity_search PATHS ${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib REQUIRED)\n+\n+# If not, pull the updated submodule\n+if (NOT EXISTS ${NMS_REPO_DIR})\n+    message(STATUS \"Could not find nmslib. Pulling updated submodule.\")\n+    execute_process(COMMAND git submodule update --init -- external/nmslib WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})\n+endif ()\n+\n+# Add the subdirectory so it is possible to use its targets\n+add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib/similarity_search)\n+\n+# Set OS specific variables\n+if (${CMAKE_SYSTEM_NAME} STREQUAL Darwin)\n+    set(JVM_OS_TYPE darwin)\n+    set(LIB_EXT .jnilib)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg2NjI4OQ=="}, "originalCommit": {"oid": "801534aff21a8069b18a98919a0bb62b2c7de63f"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwMzMxNg==", "bodyText": "Thanks!", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/83#discussion_r406403316", "createdAt": "2020-04-09T18:41:16Z", "author": {"login": "jmazanec15"}, "path": "jni/CMakeLists.txt", "diffHunk": "@@ -0,0 +1,56 @@\n+#\n+#   Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+#\n+#   Licensed under the Apache License, Version 2.0 (the \"License\").\n+#   You may not use this file except in compliance with the License.\n+#   A copy of the License is located at\n+#\n+#       http://www.apache.org/licenses/LICENSE-2.0\n+#\n+#   or in the \"license\" file accompanying this file. This file is distributed\n+#   on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+#   express or implied. See the License for the specific language governing\n+#   permissions and limitations under the License.\n+#\n+\n+cmake_minimum_required(VERSION 2.8)\n+\n+project(KNNIndexV1_7_3_6)\n+\n+set(CMAKE_CXX_STANDARD 11)\n+set(CMAKE_CXX_STANDARD_REQUIRED True)\n+\n+# Target Library to be built\n+set(KNN_INDEX KNNIndexV1_7_3_6)\n+\n+# Check if similarity search exists\n+find_path(NMS_REPO_DIR NAMES similarity_search PATHS ${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib REQUIRED)\n+\n+# If not, pull the updated submodule\n+if (NOT EXISTS ${NMS_REPO_DIR})\n+    message(STATUS \"Could not find nmslib. Pulling updated submodule.\")\n+    execute_process(COMMAND git submodule update --init -- external/nmslib WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})\n+endif ()\n+\n+# Add the subdirectory so it is possible to use its targets\n+add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/external/nmslib/similarity_search)\n+\n+# Set OS specific variables\n+if (${CMAKE_SYSTEM_NAME} STREQUAL Darwin)\n+    set(JVM_OS_TYPE darwin)\n+    set(LIB_EXT .jnilib)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg2NjI4OQ=="}, "originalCommit": {"oid": "801534aff21a8069b18a98919a0bb62b2c7de63f"}, "originalPosition": 41}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2733, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}