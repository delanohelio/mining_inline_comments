{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyMjM2MjQ2", "number": 236, "title": "Fix PostingsFormat in KNN Codec", "bodyText": "Issue #, if available:\n#227\nDescription of changes:\nElasticsearch initiates PostingsFormat based on the MapperService. For KNNCodec, we do not pass MapperService and the PostingsFormat deviates from underlying format for the current Lucene version. Because of this some of the terms that use PostingsFormat could have incompatibility. For example  #227.\nUpdated KNNCodec to rely on the right PostingsFormat used by underlying Codec of Elasticsearch.\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-09-24T07:09:18Z", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/236", "merged": true, "mergeCommit": {"oid": "c113a81038b182b304de2eed743dc073d61c54cd"}, "closed": true, "closedAt": "2020-10-14T21:12:04Z", "author": {"login": "vamshin"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdL7njMAH2gAyNDkyMjM2MjQ2OjQ4ZDZmNWUzOGJmOGViMmZiYzk4ZDFmMTcwMmRkMmI0NWMxNWQyMzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSigcggFqTUwODY2OTQ5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "48d6f5e38bf8eb2fbc98d1f1702dd2b45c15d236", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/48d6f5e38bf8eb2fbc98d1f1702dd2b45c15d236", "committedDate": "2020-09-24T06:58:00Z", "message": "postings list fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83286bdbe3e345759281125adea4304783494909", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/83286bdbe3e345759281125adea4304783494909", "committedDate": "2020-09-24T06:58:26Z", "message": "Merge branch 'master' into master-suggest-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db15bb8ae682427227b33cd6494ec5ae6e19ec2c", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/db15bb8ae682427227b33cd6494ec5ae6e19ec2c", "committedDate": "2020-09-24T07:08:40Z", "message": "fix Postings Format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7af6bf466a7dbb7af69667f5827bd9ac12198a47", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/7af6bf466a7dbb7af69667f5827bd9ac12198a47", "committedDate": "2020-09-24T07:14:13Z", "message": "remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62b7bd5ba5c2b8c9879338884a16b227242832a2", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/62b7bd5ba5c2b8c9879338884a16b227242832a2", "committedDate": "2020-09-24T07:23:39Z", "message": "postings list fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2OTA0MTk0", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/236#pullrequestreview-496904194", "createdAt": "2020-09-25T22:55:21Z", "commit": {"oid": "62b7bd5ba5c2b8c9879338884a16b227242832a2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQyMjo1NToyMVrOHYWnvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQyMjo1Njo1OFrOHYWrjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTI5ODQ5NQ==", "bodyText": "Why declare is here?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/236#discussion_r495298495", "createdAt": "2020-09-25T22:55:21Z", "author": {"login": "jmazanec15"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/codec/KNN86Codec/KNN86Codec.java", "diffHunk": "@@ -82,9 +82,17 @@ public DocValuesFormat docValuesFormat() {\n      * approach of manually overriding.\n      */\n \n+    PostingsFormat postingsFormat = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62b7bd5ba5c2b8c9879338884a16b227242832a2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTI5OTQ3MA==", "bodyText": "Why is  this string empty?", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/236#discussion_r495299470", "createdAt": "2020-09-25T22:56:58Z", "author": {"login": "jmazanec15"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/plugin/KNNCodecService.java", "diffHunk": "@@ -45,4 +47,8 @@ public Codec codec(String name) {\n         }\n         return codec;\n     }\n+\n+    public void setPostingsFormat(PostingsFormat postingsFormat) {\n+        ((KNN86Codec)codec(\"\")).setPostingsFormat(postingsFormat);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62b7bd5ba5c2b8c9879338884a16b227242832a2"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bd838253350ef7a4da1959ff9355c4f8f5b8ce5", "author": {"user": {"login": "vamshin", "name": "Vamshi Vijay Nakkirtha"}}, "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/8bd838253350ef7a4da1959ff9355c4f8f5b8ce5", "committedDate": "2020-09-29T23:02:32Z", "message": "incoporated comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjY5NDky", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/236#pullrequestreview-508669492", "createdAt": "2020-10-14T19:40:05Z", "commit": {"oid": "8bd838253350ef7a4da1959ff9355c4f8f5b8ce5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1275, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}