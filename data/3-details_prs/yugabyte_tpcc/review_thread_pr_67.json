{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxODU5ODAy", "number": 67, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzo1OTowMlrOFG1XJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOToyMTo0OVrOFG3fyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzEwMDUyOnYy", "diffSide": "RIGHT", "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzo1OTowMlrOIIB3tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOTozNToyOVrOIIFm7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5MDE2NQ==", "bodyText": "The problem with this code is that the discrepancy between the properties set using the Properties and that are already present in the connection string.\nDo you know what takes precedence in that case?", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545290165", "createdAt": "2020-12-17T17:59:02Z", "author": {"login": "psudheer21"}, "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "diffHunk": "@@ -136,8 +136,11 @@ public void createDataSource() throws SQLException {\n               props.put(\"dataSource.sslcert\", workConf.getSslCert());\n               props.put(\"dataSource.sslkey\", workConf.getSslKey());\n             }\n-\n+            \n             HikariConfig config = new HikariConfig(props);\n+            if (workConf.getJdbcURL().length()>0) {\n+              config.setJdbcUrl(workConf.getJdbcURL());\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMyODAxOA==", "bodyText": "does it matter? This would be a user input problem. if the user sets inconsistent properties, they'd get an error.\nBased on my understanding of the hikari code, it looks to me that the properties set via code override the ones already in the jdbcUrl connection string.", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545328018", "createdAt": "2020-12-17T18:56:42Z", "author": {"login": "raffaelespazzoli"}, "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "diffHunk": "@@ -136,8 +136,11 @@ public void createDataSource() throws SQLException {\n               props.put(\"dataSource.sslcert\", workConf.getSslCert());\n               props.put(\"dataSource.sslkey\", workConf.getSslKey());\n             }\n-\n+            \n             HikariConfig config = new HikariConfig(props);\n+            if (workConf.getJdbcURL().length()>0) {\n+              config.setJdbcUrl(workConf.getJdbcURL());\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5MDE2NQ=="}, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM1MTQwNA==", "bodyText": "If it does override, i believe we should be good with this change,", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545351404", "createdAt": "2020-12-17T19:35:29Z", "author": {"login": "psudheer21"}, "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "diffHunk": "@@ -136,8 +136,11 @@ public void createDataSource() throws SQLException {\n               props.put(\"dataSource.sslcert\", workConf.getSslCert());\n               props.put(\"dataSource.sslkey\", workConf.getSslKey());\n             }\n-\n+            \n             HikariConfig config = new HikariConfig(props);\n+            if (workConf.getJdbcURL().length()>0) {\n+              config.setJdbcUrl(workConf.getJdbcURL());\n+            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5MDE2NQ=="}, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzQ0NTU1OnYy", "diffSide": "RIGHT", "path": "src/com/oltpbenchmark/WorkloadConfiguration.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOToyMDozOVrOIIFDiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoxOTo0NVrOIIknpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM0MjM0Nw==", "bodyText": "remove.", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545342347", "createdAt": "2020-12-17T19:20:39Z", "author": {"login": "psudheer21"}, "path": "src/com/oltpbenchmark/WorkloadConfiguration.java", "diffHunk": "@@ -425,4 +434,6 @@ public String toString() {\n     } // FOR\n     return StringUtil.formatMaps(m);\n   }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1OTQ5NA==", "bodyText": "fixed", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545859494", "createdAt": "2020-12-18T14:19:45Z", "author": {"login": "raffaelespazzoli"}, "path": "src/com/oltpbenchmark/WorkloadConfiguration.java", "diffHunk": "@@ -425,4 +434,6 @@ public String toString() {\n     } // FOR\n     return StringUtil.formatMaps(m);\n   }\n+\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM0MjM0Nw=="}, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzQ0NjYxOnYy", "diffSide": "RIGHT", "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOToyMDo1NFrOIIFEHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoyMDoxMVrOIIkonA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM0MjQ5NQ==", "bodyText": "nit: remove spaces.", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545342495", "createdAt": "2020-12-17T19:20:54Z", "author": {"login": "psudheer21"}, "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "diffHunk": "@@ -136,8 +136,11 @@ public void createDataSource() throws SQLException {\n               props.put(\"dataSource.sslcert\", workConf.getSslCert());\n               props.put(\"dataSource.sslkey\", workConf.getSslKey());\n             }\n-\n+            ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg1OTc0MA==", "bodyText": "fixed", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545859740", "createdAt": "2020-12-18T14:20:11Z", "author": {"login": "raffaelespazzoli"}, "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "diffHunk": "@@ -136,8 +136,11 @@ public void createDataSource() throws SQLException {\n               props.put(\"dataSource.sslcert\", workConf.getSslCert());\n               props.put(\"dataSource.sslkey\", workConf.getSslKey());\n             }\n-\n+            ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM0MjQ5NQ=="}, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNzQ1MDM0OnYy", "diffSide": "RIGHT", "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOToyMTo0OVrOIIFGUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxNDoyMDo1N1rOIIkqcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM0MzA1Ng==", "bodyText": "nit: alignment", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545343056", "createdAt": "2020-12-17T19:21:49Z", "author": {"login": "psudheer21"}, "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "diffHunk": "@@ -155,11 +158,15 @@ public final Connection makeConnection() throws SQLException {\n         }\n \n         int r = dataSourceCounter.getAndIncrement() % workConf.getNodes().size();\n-\n-        String connectStr = String.format(\"jdbc:postgresql://%s:%d/%s\",\n-                                          workConf.getNodes().get(r),\n-                                          workConf.getPort(),\n-                                          workConf.getDBName());\n+        String connectStr = null;\n+        if (workConf.getJdbcURL().length()>0) {\n+            connectStr=workConf.getJdbcURL();\n+        } else {\n+            connectStr = String.format(\"jdbc:postgresql://%s:%d/%s\",\n+                                            workConf.getNodes().get(r),\n+                                            workConf.getPort(),\n+                                            workConf.getDBName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg2MDIwOQ==", "bodyText": "I didn't touch this, but tried to fix it anyway.", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545860209", "createdAt": "2020-12-18T14:20:57Z", "author": {"login": "raffaelespazzoli"}, "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "diffHunk": "@@ -155,11 +158,15 @@ public final Connection makeConnection() throws SQLException {\n         }\n \n         int r = dataSourceCounter.getAndIncrement() % workConf.getNodes().size();\n-\n-        String connectStr = String.format(\"jdbc:postgresql://%s:%d/%s\",\n-                                          workConf.getNodes().get(r),\n-                                          workConf.getPort(),\n-                                          workConf.getDBName());\n+        String connectStr = null;\n+        if (workConf.getJdbcURL().length()>0) {\n+            connectStr=workConf.getJdbcURL();\n+        } else {\n+            connectStr = String.format(\"jdbc:postgresql://%s:%d/%s\",\n+                                            workConf.getNodes().get(r),\n+                                            workConf.getPort(),\n+                                            workConf.getDBName());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM0MzA1Ng=="}, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 752, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}