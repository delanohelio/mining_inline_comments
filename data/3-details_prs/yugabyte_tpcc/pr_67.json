{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxODU5ODAy", "number": 67, "title": "added support for jdbcURL parameter", "bodyText": "Summary:\nEnabling support for the full jdbcURL to be specified in the config file.\nThis unlock the full potential of whichever driver is being used.\nThe jdbc URL can be specified this way:\n<jdbcURL>jdbc:postgresql://localhost/test?user=fred&password=secret&ssl=true</jdbcURL>\nWhen a parameter is passed both on the URL and as config property, the latter will take precedence.\nReviewers:\npsudheer21", "createdAt": "2020-12-17T13:18:55Z", "url": "https://github.com/yugabyte/tpcc/pull/67", "merged": true, "mergeCommit": {"oid": "d2d4a0acafa205fc8326886fee4eaf1ecd630c5d"}, "closed": true, "closedAt": "2021-01-12T14:03:29Z", "author": {"login": "raffaelespazzoli"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnH3lmAFqTU1NDg1Mjc5OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvbbeDgBqjQxOTU5Njc1MDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0ODUyNzk4", "url": "https://github.com/yugabyte/tpcc/pull/67#pullrequestreview-554852798", "createdAt": "2020-12-17T17:59:02Z", "commit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzo1OTowMlrOIIB3tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNzo1OTowMlrOIIB3tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5MDE2NQ==", "bodyText": "The problem with this code is that the discrepancy between the properties set using the Properties and that are already present in the connection string.\nDo you know what takes precedence in that case?", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545290165", "createdAt": "2020-12-17T17:59:02Z", "author": {"login": "psudheer21"}, "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "diffHunk": "@@ -136,8 +136,11 @@ public void createDataSource() throws SQLException {\n               props.put(\"dataSource.sslcert\", workConf.getSslCert());\n               props.put(\"dataSource.sslkey\", workConf.getSslKey());\n             }\n-\n+            \n             HikariConfig config = new HikariConfig(props);\n+            if (workConf.getJdbcURL().length()>0) {\n+              config.setJdbcUrl(workConf.getJdbcURL());\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0OTE0NTE5", "url": "https://github.com/yugabyte/tpcc/pull/67#pullrequestreview-554914519", "createdAt": "2020-12-17T19:20:38Z", "commit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOToyMDozOVrOIIFDiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxOToyMTo0OVrOIIFGUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM0MjM0Nw==", "bodyText": "remove.", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545342347", "createdAt": "2020-12-17T19:20:39Z", "author": {"login": "psudheer21"}, "path": "src/com/oltpbenchmark/WorkloadConfiguration.java", "diffHunk": "@@ -425,4 +434,6 @@ public String toString() {\n     } // FOR\n     return StringUtil.formatMaps(m);\n   }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM0MjQ5NQ==", "bodyText": "nit: remove spaces.", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545342495", "createdAt": "2020-12-17T19:20:54Z", "author": {"login": "psudheer21"}, "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "diffHunk": "@@ -136,8 +136,11 @@ public void createDataSource() throws SQLException {\n               props.put(\"dataSource.sslcert\", workConf.getSslCert());\n               props.put(\"dataSource.sslkey\", workConf.getSslKey());\n             }\n-\n+            ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTM0MzA1Ng==", "bodyText": "nit: alignment", "url": "https://github.com/yugabyte/tpcc/pull/67#discussion_r545343056", "createdAt": "2020-12-17T19:21:49Z", "author": {"login": "psudheer21"}, "path": "src/com/oltpbenchmark/api/BenchmarkModule.java", "diffHunk": "@@ -155,11 +158,15 @@ public final Connection makeConnection() throws SQLException {\n         }\n \n         int r = dataSourceCounter.getAndIncrement() % workConf.getNodes().size();\n-\n-        String connectStr = String.format(\"jdbc:postgresql://%s:%d/%s\",\n-                                          workConf.getNodes().get(r),\n-                                          workConf.getPort(),\n-                                          workConf.getDBName());\n+        String connectStr = null;\n+        if (workConf.getJdbcURL().length()>0) {\n+            connectStr=workConf.getJdbcURL();\n+        } else {\n+            connectStr = String.format(\"jdbc:postgresql://%s:%d/%s\",\n+                                            workConf.getNodes().get(r),\n+                                            workConf.getPort(),\n+                                            workConf.getDBName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "666685c571aaf126e595f605bfc09bfa215d427a"}, "originalPosition": 29}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "220106b589262e7cfd9403688309e2ea85714d7d", "author": {"user": {"login": "raffaelespazzoli", "name": null}}, "url": "https://github.com/yugabyte/tpcc/commit/220106b589262e7cfd9403688309e2ea85714d7d", "committedDate": "2020-12-18T14:23:32Z", "message": "fix formatting issues"}, "afterCommit": {"oid": "adac90c5457df8fe388e4ada82305d45d7e46c69", "author": {"user": {"login": "raffaelespazzoli", "name": null}}, "url": "https://github.com/yugabyte/tpcc/commit/adac90c5457df8fe388e4ada82305d45d7e46c69", "committedDate": "2020-12-19T20:19:17Z", "message": "Enabling support for the full jdbcURL to be specified in the config file."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6729cd2a737b461a842372e968bd8d6a7ffaf34f", "author": {"user": {"login": "raffaelespazzoli", "name": null}}, "url": "https://github.com/yugabyte/tpcc/commit/6729cd2a737b461a842372e968bd8d6a7ffaf34f", "committedDate": "2021-01-12T13:44:54Z", "message": "Enabling support for the full jdbcURL to be specified in the config file."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "adac90c5457df8fe388e4ada82305d45d7e46c69", "author": {"user": {"login": "raffaelespazzoli", "name": null}}, "url": "https://github.com/yugabyte/tpcc/commit/adac90c5457df8fe388e4ada82305d45d7e46c69", "committedDate": "2020-12-19T20:19:17Z", "message": "Enabling support for the full jdbcURL to be specified in the config file."}, "afterCommit": {"oid": "6729cd2a737b461a842372e968bd8d6a7ffaf34f", "author": {"user": {"login": "raffaelespazzoli", "name": null}}, "url": "https://github.com/yugabyte/tpcc/commit/6729cd2a737b461a842372e968bd8d6a7ffaf34f", "committedDate": "2021-01-12T13:44:54Z", "message": "Enabling support for the full jdbcURL to be specified in the config file."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 494, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}