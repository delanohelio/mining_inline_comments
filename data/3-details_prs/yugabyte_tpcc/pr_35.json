{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1Nzk5ODgx", "number": 35, "title": "Limit the number of connections to 200 per node.", "bodyText": "Reviewers:\nNeha, Karthik", "createdAt": "2020-07-08T00:34:48Z", "url": "https://github.com/yugabyte/tpcc/pull/35", "merged": true, "mergeCommit": {"oid": "e805af08fd483a96ffad05c80610ba8fd36f4006"}, "closed": true, "closedAt": "2020-07-09T21:39:39Z", "author": {"login": "psudheer21"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyzmQ_gFqTQ0NDQyMzAyNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABczWATqAFqTQ0NTk4NDc0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDIzMDI1", "url": "https://github.com/yugabyte/tpcc/pull/35#pullrequestreview-444423025", "createdAt": "2020-07-08T05:29:10Z", "commit": {"oid": "1d7435f4b525adffca431043a76636fc1dd2d1e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNToyOToxMFrOGuYqAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNToyOToxMFrOGuYqAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI5MTY0OA==", "bodyText": "We should make this a parameter, say something like maxConnectionsPerNode, so that it becomes easy to change this on the fly. Similar for connectionTimeoutMillis below.", "url": "https://github.com/yugabyte/tpcc/pull/35#discussion_r451291648", "createdAt": "2020-07-08T05:29:10Z", "author": {"login": "rkarthik007"}, "path": "src/com/oltpbenchmark/DBWorkload.java", "diffHunk": "@@ -264,7 +266,8 @@ public static void main(String[] args) throws Exception {\n             if (xmlConfig.containsKey(\"numDBConnections\")) {\n                 wrkld.setNumDBConnections(xmlConfig.getInt(\"numDBConnections\"));\n             } else {\n-                wrkld.setNumDBConnections(numWarehouses);\n+                // We use a max of 200 connections per node so as to not overwhelm the DB cluster.\n+                wrkld.setNumDBConnections(min(numWarehouses, wrkld.getNodes().size() * 200));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d7435f4b525adffca431043a76636fc1dd2d1e6"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf978b65c502cbd3338d426d5175e0f9421b8c7e", "author": {"user": {"login": "psudheer21", "name": "Sudheer Ponnemkunnath Rammohan"}}, "url": "https://github.com/yugabyte/tpcc/commit/cf978b65c502cbd3338d426d5175e0f9421b8c7e", "committedDate": "2020-07-08T18:04:40Z", "message": "Limit the number of connections to 200 per node.\n\nReviewers:\nNeha, Karthik"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d7435f4b525adffca431043a76636fc1dd2d1e6", "author": {"user": {"login": "psudheer21", "name": "Sudheer Ponnemkunnath Rammohan"}}, "url": "https://github.com/yugabyte/tpcc/commit/1d7435f4b525adffca431043a76636fc1dd2d1e6", "committedDate": "2020-07-08T00:33:28Z", "message": "Limit the number of connections to 200 per node.\n\nReviewers:\nNeha, Karthik"}, "afterCommit": {"oid": "cf978b65c502cbd3338d426d5175e0f9421b8c7e", "author": {"user": {"login": "psudheer21", "name": "Sudheer Ponnemkunnath Rammohan"}}, "url": "https://github.com/yugabyte/tpcc/commit/cf978b65c502cbd3338d426d5175e0f9421b8c7e", "committedDate": "2020-07-08T18:04:40Z", "message": "Limit the number of connections to 200 per node.\n\nReviewers:\nNeha, Karthik"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1OTg0NzQw", "url": "https://github.com/yugabyte/tpcc/pull/35#pullrequestreview-445984740", "createdAt": "2020-07-09T21:34:05Z", "commit": {"oid": "cf978b65c502cbd3338d426d5175e0f9421b8c7e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMTozNDowNVrOGvimAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMTozNDowNVrOGvimAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjUwMzA0MA==", "bodyText": "Sync'd offline with Sudheer. Since we already have a param to control numDBConnections, we don't need another one for maxConnectionsPerNode", "url": "https://github.com/yugabyte/tpcc/pull/35#discussion_r452503040", "createdAt": "2020-07-09T21:34:05Z", "author": {"login": "ndeodhar"}, "path": "src/com/oltpbenchmark/DBWorkload.java", "diffHunk": "@@ -264,7 +266,8 @@ public static void main(String[] args) throws Exception {\n             if (xmlConfig.containsKey(\"numDBConnections\")) {\n                 wrkld.setNumDBConnections(xmlConfig.getInt(\"numDBConnections\"));\n             } else {\n-                wrkld.setNumDBConnections(numWarehouses);\n+                // We use a max of 200 connections per node so as to not overwhelm the DB cluster.\n+                wrkld.setNumDBConnections(min(numWarehouses, wrkld.getNodes().size() * 200));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI5MTY0OA=="}, "originalCommit": {"oid": "1d7435f4b525adffca431043a76636fc1dd2d1e6"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 471, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}