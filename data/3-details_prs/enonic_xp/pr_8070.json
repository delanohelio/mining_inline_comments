{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MDQyMTc4", "number": 8070, "title": "Implement lib-project", "bodyText": "", "createdAt": "2020-05-11T11:24:32Z", "url": "https://github.com/enonic/xp/pull/8070", "merged": true, "mergeCommit": {"oid": "27b01d5a99580875d9a5731f887e04240c0add72"}, "closed": true, "closedAt": "2020-05-13T17:18:56Z", "author": {"login": "vbradnitski"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgN_IjgBqjMzMjI1MzUxNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcg73-kAFqTQxMTEyMTA2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e86a803ddf4310bcf3831d38e9787d545e1dbab4", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/e86a803ddf4310bcf3831d38e9787d545e1dbab4", "committedDate": "2020-05-11T11:23:43Z", "message": "Implement lib-project #8068"}, "afterCommit": {"oid": "8f540db4415d0e36ba3e8059bf359ac38dd9b672", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/8f540db4415d0e36ba3e8059bf359ac38dd9b672", "committedDate": "2020-05-11T11:29:02Z", "message": "Implement lib-project #8068"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6b80ea40fd6568f95efd9d2c91b7614be1b4504", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/e6b80ea40fd6568f95efd9d2c91b7614be1b4504", "committedDate": "2020-05-12T13:42:57Z", "message": "Implement lib-project #8068"}, "afterCommit": {"oid": "a1739c5a7aaa0a155bb434378ee1376874451f37", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/a1739c5a7aaa0a155bb434378ee1376874451f37", "committedDate": "2020-05-12T13:44:10Z", "message": "Implement lib-project #8068"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a1739c5a7aaa0a155bb434378ee1376874451f37", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/a1739c5a7aaa0a155bb434378ee1376874451f37", "committedDate": "2020-05-12T13:44:10Z", "message": "Implement lib-project #8068"}, "afterCommit": {"oid": "c0e0d71429a64412ebd3e8dc7019120e01b1e861", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/c0e0d71429a64412ebd3e8dc7019120e01b1e861", "committedDate": "2020-05-12T14:09:55Z", "message": "Implement lib-project #8068"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0e0d71429a64412ebd3e8dc7019120e01b1e861", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/c0e0d71429a64412ebd3e8dc7019120e01b1e861", "committedDate": "2020-05-12T14:09:55Z", "message": "Implement lib-project #8068"}, "afterCommit": {"oid": "9bc19a452490475b52761a34beb9c19a49e6221b", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/9bc19a452490475b52761a34beb9c19a49e6221b", "committedDate": "2020-05-12T14:20:17Z", "message": "Implement lib-project #8068"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMTIzNDYw", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-410123460", "createdAt": "2020-05-12T14:50:51Z", "commit": {"oid": "9bc19a452490475b52761a34beb9c19a49e6221b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9bc19a452490475b52761a34beb9c19a49e6221b", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/9bc19a452490475b52761a34beb9c19a49e6221b", "committedDate": "2020-05-12T14:20:17Z", "message": "Implement lib-project #8068"}, "afterCommit": {"oid": "dcfdda46188b2dc4ee8cdeafd70c99942a2005a9", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/dcfdda46188b2dc4ee8cdeafd70c99942a2005a9", "committedDate": "2020-05-12T15:17:50Z", "message": "Implement lib-project #8068"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dcfdda46188b2dc4ee8cdeafd70c99942a2005a9", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/dcfdda46188b2dc4ee8cdeafd70c99942a2005a9", "committedDate": "2020-05-12T15:17:50Z", "message": "Implement lib-project #8068"}, "afterCommit": {"oid": "1d2f087972fe13ba91ee014ac4cb3b7ec1c1c4be", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/1d2f087972fe13ba91ee014ac4cb3b7ec1c1c4be", "committedDate": "2020-05-12T15:20:14Z", "message": "Implement lib-project #8068"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNjE4MTI2", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-410618126", "createdAt": "2020-05-13T06:22:12Z", "commit": {"oid": "1d2f087972fe13ba91ee014ac4cb3b7ec1c1c4be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "22d137b118cecf694c2c087a732268a9cc4cc9d5", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/22d137b118cecf694c2c087a732268a9cc4cc9d5", "committedDate": "2020-05-13T12:15:30Z", "message": "Implement lib-project #8068\nfix"}, "afterCommit": {"oid": "c0a5a5c93b18c0624e6bc813437c6e305924187c", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/c0a5a5c93b18c0624e6bc813437c6e305924187c", "committedDate": "2020-05-13T15:25:48Z", "message": "Implement lib-project #8068"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/9b568d3e383365b4ed6f99be98321d86d7c8f9fb", "committedDate": "2020-05-13T16:51:42Z", "message": "Implement lib-project #8068"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0a5a5c93b18c0624e6bc813437c6e305924187c", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/c0a5a5c93b18c0624e6bc813437c6e305924187c", "committedDate": "2020-05-13T15:25:48Z", "message": "Implement lib-project #8068"}, "afterCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/9b568d3e383365b4ed6f99be98321d86d7c8f9fb", "committedDate": "2020-05-13T16:51:42Z", "message": "Implement lib-project #8068"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwNzg2", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120786", "createdAt": "2020-05-13T16:56:54Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NFrOGU67TA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NFrOGU67TA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDE1Ng==", "bodyText": "Issue found: 'project' used outside of binding context.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590156", "createdAt": "2020-05-13T16:56:54Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwODAz", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120803", "createdAt": "2020-05-13T16:56:55Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NVrOGU67XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NVrOGU67XA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDE3Mg==", "bodyText": "Issue found: 'projectLib' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590172", "createdAt": "2020-05-13T16:56:55Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'description': 'Some exciting content is stored here',\n+    'language': 'no',\n+    'permissions': {\n+        'owner': [\n+            'user:mystore:user1'\n+        ],\n+        'editor': [\n+            'user:mystore:user2'\n+        ],\n+        'author': [\n+            'user:mystore:user3'\n+        ],\n+        'contributor': [\n+            'user:mystore:user4'\n+        ],\n+        'viewer': [\n+            'user:mystore:user5'\n+        ]\n+    },\n+    readAccess: {\n+        'public': false\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwODE5", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120819", "createdAt": "2020-05-13T16:56:56Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NlrOGU67Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NlrOGU67Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDE3OQ==", "bodyText": "Issue found: Missing semicolon.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590179", "createdAt": "2020-05-13T16:56:56Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/modify.js", "diffHunk": "@@ -0,0 +1,44 @@\n+// BEGIN\n+// Modifies an existing content project\n+var projectLib = require('/lib/xp/project');\n+\n+var project = projectLib.modify({\n+    id: 'my-project',\n+    displayName: 'New project name',\n+    description: 'New project description',\n+    language: 'en'\n+});\n+// END\n+\n+// BEGIN\n+// Modifies an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var modifyProject = function () {\n+    return projectLib.modify({\n+        id: 'my-project',\n+        displayName: 'New project name',\n+        description: 'New project description',\n+        language: 'en'\n+    });\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwODMw", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120830", "createdAt": "2020-05-13T16:56:57Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1N1rOGU67bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1N1rOGU67bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDE4OA==", "bodyText": "Issue found: 'log' is not defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590188", "createdAt": "2020-05-13T16:56:57Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwODUx", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120851", "createdAt": "2020-05-13T16:56:58Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1OFrOGU67gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1OFrOGU67gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDIwOQ==", "bodyText": "Issue found: 'project' used outside of binding context.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590209", "createdAt": "2020-05-13T16:56:58Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'description': 'Some exciting content is stored here',\n+    'language': 'no',\n+    'permissions': {\n+        'owner': [\n+            'user:mystore:user1'\n+        ],\n+        'editor': [\n+            'user:mystore:user2'\n+        ],\n+        'author': [\n+            'user:mystore:user3'\n+        ],\n+        'contributor': [\n+            'user:mystore:user4'\n+        ],\n+        'viewer': [\n+            'user:mystore:user5'\n+        ]\n+    },\n+    readAccess: {\n+        'public': false\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var createProject = function () {\n+    return projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+}\n+\n+var project = contextLib.run({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 93}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwODY1", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120865", "createdAt": "2020-05-13T16:56:59Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1OVrOGU67hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1OVrOGU67hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDIxNQ==", "bodyText": "Issue found: Missing semicolon.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590215", "createdAt": "2020-05-13T16:56:59Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "diffHunk": "@@ -0,0 +1,28 @@\n+// BEGIN\n+// Deletes an existing content project\n+var projectLib = require('/lib/xp/project');\n+var result = projectLib.delete({\n+    id: 'my-project'\n+});\n+// END\n+\n+// BEGIN\n+// Deletes an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var deleteProject = function () {\n+    return projectLib.delete({\n+        id: 'my-project'\n+    });\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwODgz", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120883", "createdAt": "2020-05-13T16:57:00Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMFrOGU67kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMFrOGU67kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDIyNg==", "bodyText": "Issue found: Variable Assigned to Object Injection Sink", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590226", "createdAt": "2020-05-13T16:57:00Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/project.js", "diffHunk": "@@ -0,0 +1,200 @@\n+/**\n+ * Functions to manage Content Projects.\n+ *\n+ * @example\n+ * var projectLib = require('/lib/xp/project');\n+ *\n+ * @module project\n+ */\n+\n+/* global __ */\n+\n+function required(params, name) {\n+    var value = params[name];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwOTAy", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120902", "createdAt": "2020-05-13T16:57:01Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMVrOGU67qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMVrOGU67qQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDI0OQ==", "bodyText": "Issue found: Missing semicolon.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590249", "createdAt": "2020-05-13T16:57:01Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'description': 'Some exciting content is stored here',\n+    'language': 'no',\n+    'permissions': {\n+        'owner': [\n+            'user:mystore:user1'\n+        ],\n+        'editor': [\n+            'user:mystore:user2'\n+        ],\n+        'author': [\n+            'user:mystore:user3'\n+        ],\n+        'contributor': [\n+            'user:mystore:user4'\n+        ],\n+        'viewer': [\n+            'user:mystore:user5'\n+        ]\n+    },\n+    readAccess: {\n+        'public': false\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var createProject = function () {\n+    return projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 91}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwOTEy", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120912", "createdAt": "2020-05-13T16:57:02Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMlrOGU67sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMlrOGU67sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDI1OA==", "bodyText": "Issue found: Strings must use singlequote.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590258", "createdAt": "2020-05-13T16:57:02Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "diffHunk": "@@ -0,0 +1,28 @@\n+// BEGIN\n+// Deletes an existing content project\n+var projectLib = require('/lib/xp/project');\n+var result = projectLib.delete({\n+    id: 'my-project'\n+});\n+// END\n+\n+// BEGIN\n+// Deletes an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var deleteProject = function () {\n+    return projectLib.delete({\n+        id: 'my-project'\n+    });\n+}\n+\n+var result = contextLib.run({\n+    principals: [\"role:system.admin\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwOTQw", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120940", "createdAt": "2020-05-13T16:57:04Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNFrOGU67xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNFrOGU67xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDI3Ng==", "bodyText": "Issue found: 'result' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590276", "createdAt": "2020-05-13T16:57:04Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "diffHunk": "@@ -0,0 +1,28 @@\n+// BEGIN\n+// Deletes an existing content project\n+var projectLib = require('/lib/xp/project');\n+var result = projectLib.delete({\n+    id: 'my-project'\n+});\n+// END\n+\n+// BEGIN\n+// Deletes an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var deleteProject = function () {\n+    return projectLib.delete({\n+        id: 'my-project'\n+    });\n+}\n+\n+var result = contextLib.run({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwOTYw", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120960", "createdAt": "2020-05-13T16:57:05Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNVrOGU672A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNVrOGU672A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDI5Ng==", "bodyText": "Issue found: 'expected' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590296", "createdAt": "2020-05-13T16:57:05Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwOTc0", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120974", "createdAt": "2020-05-13T16:57:06Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNlrOGU674w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNlrOGU674w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDMwNw==", "bodyText": "Issue found: 'project' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590307", "createdAt": "2020-05-13T16:57:06Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIwOTg2", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411120986", "createdAt": "2020-05-13T16:57:07Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowN1rOGU677Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowN1rOGU677Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDMxNw==", "bodyText": "Issue found: Strings must use singlequote.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590317", "createdAt": "2020-05-13T16:57:07Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'description': 'Some exciting content is stored here',\n+    'language': 'no',\n+    'permissions': {\n+        'owner': [\n+            'user:mystore:user1'\n+        ],\n+        'editor': [\n+            'user:mystore:user2'\n+        ],\n+        'author': [\n+            'user:mystore:user3'\n+        ],\n+        'contributor': [\n+            'user:mystore:user4'\n+        ],\n+        'viewer': [\n+            'user:mystore:user5'\n+        ]\n+    },\n+    readAccess: {\n+        'public': false\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var createProject = function () {\n+    return projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+}\n+\n+var project = contextLib.run({\n+    principals: [\"role:system.admin\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 94}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIxMDAz", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411121003", "createdAt": "2020-05-13T16:57:08Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowOFrOGU67-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowOFrOGU67-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDMzMA==", "bodyText": "Issue found: 'projectLib' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590330", "createdAt": "2020-05-13T16:57:08Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/modify.js", "diffHunk": "@@ -0,0 +1,44 @@\n+// BEGIN\n+// Modifies an existing content project\n+var projectLib = require('/lib/xp/project');\n+\n+var project = projectLib.modify({\n+    id: 'my-project',\n+    displayName: 'New project name',\n+    description: 'New project description',\n+    language: 'en'\n+});\n+// END\n+\n+// BEGIN\n+// Modifies an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIxMDE5", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411121019", "createdAt": "2020-05-13T16:57:09Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowOVrOGU68Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowOVrOGU68Ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDMzOA==", "bodyText": "Issue found: 'project' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590338", "createdAt": "2020-05-13T16:57:09Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/modify.js", "diffHunk": "@@ -0,0 +1,44 @@\n+// BEGIN\n+// Modifies an existing content project\n+var projectLib = require('/lib/xp/project');\n+\n+var project = projectLib.modify({\n+    id: 'my-project',\n+    displayName: 'New project name',\n+    description: 'New project description',\n+    language: 'en'\n+});\n+// END\n+\n+// BEGIN\n+// Modifies an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var modifyProject = function () {\n+    return projectLib.modify({\n+        id: 'my-project',\n+        displayName: 'New project name',\n+        description: 'New project description',\n+        language: 'en'\n+    });\n+}\n+\n+var project = contextLib.run({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIxMDMz", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411121033", "createdAt": "2020-05-13T16:57:10Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMFrOGU68EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMFrOGU68EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDM1Mw==", "bodyText": "Issue found: 'projectLib' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590353", "createdAt": "2020-05-13T16:57:10Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "diffHunk": "@@ -0,0 +1,28 @@\n+// BEGIN\n+// Deletes an existing content project\n+var projectLib = require('/lib/xp/project');\n+var result = projectLib.delete({\n+    id: 'my-project'\n+});\n+// END\n+\n+// BEGIN\n+// Deletes an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIxMDQ4", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411121048", "createdAt": "2020-05-13T16:57:11Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMVrOGU68Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMVrOGU68Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDM2Mg==", "bodyText": "Issue found: Unexpected use of undefined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590362", "createdAt": "2020-05-13T16:57:11Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/project.js", "diffHunk": "@@ -0,0 +1,200 @@\n+/**\n+ * Functions to manage Content Projects.\n+ *\n+ * @example\n+ * var projectLib = require('/lib/xp/project');\n+ *\n+ * @module project\n+ */\n+\n+/* global __ */\n+\n+function required(params, name) {\n+    var value = params[name];\n+    if (value === undefined) {\n+        throw 'Parameter \\'' + name + '\\' is required';\n+    }\n+\n+    return value;\n+}\n+\n+function nullOrValue(value) {\n+    if (value === undefined) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTIxMDY4", "url": "https://github.com/enonic/xp/pull/8070#pullrequestreview-411121068", "createdAt": "2020-05-13T16:57:12Z", "commit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMlrOGU68Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMlrOGU68Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDM3MQ==", "bodyText": "Issue found: 'project' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590371", "createdAt": "2020-05-13T16:57:12Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'description': 'Some exciting content is stored here',\n+    'language': 'no',\n+    'permissions': {\n+        'owner': [\n+            'user:mystore:user1'\n+        ],\n+        'editor': [\n+            'user:mystore:user2'\n+        ],\n+        'author': [\n+            'user:mystore:user3'\n+        ],\n+        'contributor': [\n+            'user:mystore:user4'\n+        ],\n+        'viewer': [\n+            'user:mystore:user5'\n+        ]\n+    },\n+    readAccess: {\n+        'public': false\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var createProject = function () {\n+    return projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+}\n+\n+var project = contextLib.run({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 93}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4530, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}