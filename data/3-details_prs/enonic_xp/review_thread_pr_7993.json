{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3MDU5NDE5", "number": 7993, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjoxOToyN1rODtmzkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjoxOToyN1rODtmzkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5MTQ4MzA3OnYy", "diffSide": "RIGHT", "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/rest/resource/project/ApplyProjectLanguageCommand.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjoxOToyN1rOF_IWyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjoxOToyN1rOF_IWyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc0MTUxNQ==", "bodyText": "requireNonNullElse is better", "url": "https://github.com/enonic/xp/pull/7993#discussion_r401741515", "createdAt": "2020-04-01T16:19:27Z", "author": {"login": "rymsha"}, "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/rest/resource/project/ApplyProjectLanguageCommand.java", "diffHunk": "@@ -0,0 +1,80 @@\n+package com.enonic.xp.admin.impl.rest.resource.project;\n+\n+import java.util.Locale;\n+\n+import com.enonic.xp.content.Content;\n+import com.enonic.xp.content.ContentPath;\n+import com.enonic.xp.content.UpdateContentParams;\n+import com.enonic.xp.context.Context;\n+import com.enonic.xp.context.ContextAccessor;\n+import com.enonic.xp.security.User;\n+\n+public final class ApplyProjectLanguageCommand\n+    extends AbstractProjectRootCommand\n+{\n+    private final Locale language;\n+\n+    private ApplyProjectLanguageCommand( final Builder builder )\n+    {\n+        super( builder );\n+        this.language = builder.language;\n+    }\n+\n+    public static Builder create()\n+    {\n+        return new Builder();\n+    }\n+\n+    public Locale execute()\n+    {\n+        return doUpdateLanguage();\n+    }\n+\n+    private Locale doUpdateLanguage()\n+    {\n+        return projectRepoContext.callWith( () -> {\n+            final Content root = this.contentService.getByPath( ContentPath.ROOT );\n+\n+            final UpdateContentParams params = new UpdateContentParams().\n+                contentId( root.getId() ).\n+                modifier( getCurrentUser().getKey() ).\n+                editor( edit -> edit.language = this.language );\n+\n+            return this.contentService.update( params ).\n+                getLanguage();\n+        } );\n+    }\n+\n+    private User getCurrentUser()\n+    {\n+        final Context context = ContextAccessor.current();\n+        return context.getAuthInfo().getUser() != null ? context.getAuthInfo().getUser() : User.ANONYMOUS;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46601fcb4100baf8832330df05b13743b7693912"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1036, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}