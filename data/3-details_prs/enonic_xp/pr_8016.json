{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxODE1OTU1", "number": 8016, "title": "Project language update fails on null #8014", "bodyText": "", "createdAt": "2020-04-10T08:35:06Z", "url": "https://github.com/enonic/xp/pull/8016", "merged": true, "mergeCommit": {"oid": "16dfb8b3bab15f59b174f22ba5bea3b67816c0e3"}, "closed": true, "closedAt": "2020-04-14T12:40:56Z", "author": {"login": "vbradnitski"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWSHgDAFqTM5MTQ3NzA5OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXiz-agFqTM5Mjg4NTQzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDc3MDk4", "url": "https://github.com/enonic/xp/pull/8016#pullrequestreview-391477098", "createdAt": "2020-04-10T14:38:54Z", "commit": {"oid": "dab44ad24a3ae4ab43a45a91c853617d40c3fa4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNTQ0NTMz", "url": "https://github.com/enonic/xp/pull/8016#pullrequestreview-391544533", "createdAt": "2020-04-10T16:50:19Z", "commit": {"oid": "dab44ad24a3ae4ab43a45a91c853617d40c3fa4f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjo1MDoxOVrOGD_xZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjo1OTowNFrOGEAAYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg0Mzc1MQ==", "bodyText": "!isBlank()", "url": "https://github.com/enonic/xp/pull/8016#discussion_r406843751", "createdAt": "2020-04-10T16:50:19Z", "author": {"login": "rymsha"}, "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/rest/resource/project/json/ModifyLanguageParamsJson.java", "diffHunk": "@@ -17,7 +18,10 @@\n     ModifyLanguageParamsJson( @JsonProperty(\"name\") final String name, @JsonProperty(\"language\") final String language )\n     {\n         this.name = ProjectName.from( name );\n-        this.language = Locale.forLanguageTag( language );\n+        this.language = Optional.ofNullable( language ).\n+            filter( lang -> !lang.trim().isEmpty() ).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dab44ad24a3ae4ab43a45a91c853617d40c3fa4f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg0NDc3Ng==", "bodyText": "To improve readability return optional from doApplyLanguage", "url": "https://github.com/enonic/xp/pull/8016#discussion_r406844776", "createdAt": "2020-04-10T16:52:45Z", "author": {"login": "rymsha"}, "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/rest/resource/project/ProjectResource.java", "diffHunk": "@@ -97,8 +97,9 @@ public ProjectJson modify( final MultipartForm form )\n     @Path(\"modifyLanguage\")\n     public String modifyLanguage( final ModifyLanguageParamsJson params )\n     {\n-        return doApplyLanguage( params.getName(), params.getLanguage() ).\n-            toLanguageTag();\n+        return Optional.ofNullable( doApplyLanguage( params.getName(), params.getLanguage() ) ).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dab44ad24a3ae4ab43a45a91c853617d40c3fa4f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg0NTc1Ng==", "bodyText": "getters to class of itself look very suspicions. What was wrong with direct field access?", "url": "https://github.com/enonic/xp/pull/8016#discussion_r406845756", "createdAt": "2020-04-10T16:55:03Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/content/Content.java", "diffHunk": "@@ -444,31 +444,31 @@ protected Builder()\n \n         protected Builder( final Content source )\n         {\n-            this.id = source.id;\n-            this.valid = source.valid;\n-            this.parentPath = source.parentPath;\n-            this.name = source.name;\n-            this.type = source.type;\n-            this.data = source.data != null ? source.data.copy() : null;\n-            this.attachments = source.attachments;\n-            this.extraDatas = source.extraDatas != null ? source.extraDatas.copy() : null;\n-            this.displayName = source.displayName;\n-            this.owner = source.owner;\n-            this.createdTime = source.createdTime;\n-            this.modifiedTime = source.modifiedTime;\n-            this.creator = source.creator;\n-            this.modifier = source.modifier;\n-            this.hasChildren = source.hasChildren;\n-            this.page = source.page != null ? source.page.copy() : null;\n-            this.thumbnail = source.thumbnail;\n-            this.childOrder = source.childOrder;\n-            this.permissions = source.permissions;\n-            this.inheritPermissions = source.inheritPermissions;\n-            this.language = source.language;\n-            this.contentState = source.contentState;\n-            this.publishInfo = source.publishInfo;\n-            this.processedReferences = ContentIds.create().addAll( source.processedReferences );\n-            this.workflowInfo = source.workflowInfo;\n+            this.id = source.getId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dab44ad24a3ae4ab43a45a91c853617d40c3fa4f"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg0NzU4NQ==", "bodyText": "this is not exact conversion. Exact one is !nullToEmpty( owner ).isBlank()\nBut why do we need this null guard? What cand of caller tries to add null owner/editor/author/...?", "url": "https://github.com/enonic/xp/pull/8016#discussion_r406847585", "createdAt": "2020-04-10T16:59:04Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/project/ProjectPermissions.java", "diffHunk": "@@ -105,7 +103,7 @@ private Builder( final ProjectPermissions source )\n \n         public Builder addOwner( final String owner )\n         {\n-            if ( StringUtils.isNotBlank( owner ) )\n+            if ( owner != null )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dab44ad24a3ae4ab43a45a91c853617d40c3fa4f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7594beaacc457e19ea79776bf871f6f4b67725c", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/c7594beaacc457e19ea79776bf871f6f4b67725c", "committedDate": "2020-04-14T11:09:20Z", "message": "Project language update fails on null #8014"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dab44ad24a3ae4ab43a45a91c853617d40c3fa4f", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/dab44ad24a3ae4ab43a45a91c853617d40c3fa4f", "committedDate": "2020-04-09T15:10:47Z", "message": "Project language update fails on null #8014"}, "afterCommit": {"oid": "c7594beaacc457e19ea79776bf871f6f4b67725c", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/c7594beaacc457e19ea79776bf871f6f4b67725c", "committedDate": "2020-04-14T11:09:20Z", "message": "Project language update fails on null #8014"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyODg1NDM5", "url": "https://github.com/enonic/xp/pull/8016#pullrequestreview-392885439", "createdAt": "2020-04-14T12:39:53Z", "commit": {"oid": "c7594beaacc457e19ea79776bf871f6f4b67725c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4522, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}