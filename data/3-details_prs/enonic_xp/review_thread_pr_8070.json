{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2MDQyMTc4", "number": 8070, "reviewThreads": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NFrOD8J4eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMlrOD8J5Bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMDY2OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NFrOGU67TA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NFrOGU67TA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDE1Ng==", "bodyText": "Issue found: 'project' used outside of binding context.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590156", "createdAt": "2020-05-13T16:56:54Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMDczOnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NVrOGU67XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NVrOGU67XA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDE3Mg==", "bodyText": "Issue found: 'projectLib' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590172", "createdAt": "2020-05-13T16:56:55Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'description': 'Some exciting content is stored here',\n+    'language': 'no',\n+    'permissions': {\n+        'owner': [\n+            'user:mystore:user1'\n+        ],\n+        'editor': [\n+            'user:mystore:user2'\n+        ],\n+        'author': [\n+            'user:mystore:user3'\n+        ],\n+        'contributor': [\n+            'user:mystore:user4'\n+        ],\n+        'viewer': [\n+            'user:mystore:user5'\n+        ]\n+    },\n+    readAccess: {\n+        'public': false\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMDgwOnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/modify.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NlrOGU67Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1NlrOGU67Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDE3OQ==", "bodyText": "Issue found: Missing semicolon.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590179", "createdAt": "2020-05-13T16:56:56Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/modify.js", "diffHunk": "@@ -0,0 +1,44 @@\n+// BEGIN\n+// Modifies an existing content project\n+var projectLib = require('/lib/xp/project');\n+\n+var project = projectLib.modify({\n+    id: 'my-project',\n+    displayName: 'New project name',\n+    description: 'New project description',\n+    language: 'en'\n+});\n+// END\n+\n+// BEGIN\n+// Modifies an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var modifyProject = function () {\n+    return projectLib.modify({\n+        id: 'my-project',\n+        displayName: 'New project name',\n+        description: 'New project description',\n+        language: 'en'\n+    });\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMDg2OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1N1rOGU67bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1N1rOGU67bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDE4OA==", "bodyText": "Issue found: 'log' is not defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590188", "createdAt": "2020-05-13T16:56:57Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMDk5OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1OFrOGU67gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1OFrOGU67gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDIwOQ==", "bodyText": "Issue found: 'project' used outside of binding context.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590209", "createdAt": "2020-05-13T16:56:58Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'description': 'Some exciting content is stored here',\n+    'language': 'no',\n+    'permissions': {\n+        'owner': [\n+            'user:mystore:user1'\n+        ],\n+        'editor': [\n+            'user:mystore:user2'\n+        ],\n+        'author': [\n+            'user:mystore:user3'\n+        ],\n+        'contributor': [\n+            'user:mystore:user4'\n+        ],\n+        'viewer': [\n+            'user:mystore:user5'\n+        ]\n+    },\n+    readAccess: {\n+        'public': false\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var createProject = function () {\n+    return projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+}\n+\n+var project = contextLib.run({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 93}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTA0OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1OVrOGU67hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1Njo1OVrOGU67hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDIxNQ==", "bodyText": "Issue found: Missing semicolon.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590215", "createdAt": "2020-05-13T16:56:59Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "diffHunk": "@@ -0,0 +1,28 @@\n+// BEGIN\n+// Deletes an existing content project\n+var projectLib = require('/lib/xp/project');\n+var result = projectLib.delete({\n+    id: 'my-project'\n+});\n+// END\n+\n+// BEGIN\n+// Deletes an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var deleteProject = function () {\n+    return projectLib.delete({\n+        id: 'my-project'\n+    });\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTExOnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/project.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMFrOGU67kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMFrOGU67kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDIyNg==", "bodyText": "Issue found: Variable Assigned to Object Injection Sink", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590226", "createdAt": "2020-05-13T16:57:00Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/project.js", "diffHunk": "@@ -0,0 +1,200 @@\n+/**\n+ * Functions to manage Content Projects.\n+ *\n+ * @example\n+ * var projectLib = require('/lib/xp/project');\n+ *\n+ * @module project\n+ */\n+\n+/* global __ */\n+\n+function required(params, name) {\n+    var value = params[name];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTI5OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMVrOGU67qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMVrOGU67qQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDI0OQ==", "bodyText": "Issue found: Missing semicolon.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590249", "createdAt": "2020-05-13T16:57:01Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'description': 'Some exciting content is stored here',\n+    'language': 'no',\n+    'permissions': {\n+        'owner': [\n+            'user:mystore:user1'\n+        ],\n+        'editor': [\n+            'user:mystore:user2'\n+        ],\n+        'author': [\n+            'user:mystore:user3'\n+        ],\n+        'contributor': [\n+            'user:mystore:user4'\n+        ],\n+        'viewer': [\n+            'user:mystore:user5'\n+        ]\n+    },\n+    readAccess: {\n+        'public': false\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var createProject = function () {\n+    return projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 91}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTM0OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMlrOGU67sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowMlrOGU67sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDI1OA==", "bodyText": "Issue found: Strings must use singlequote.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590258", "createdAt": "2020-05-13T16:57:02Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "diffHunk": "@@ -0,0 +1,28 @@\n+// BEGIN\n+// Deletes an existing content project\n+var projectLib = require('/lib/xp/project');\n+var result = projectLib.delete({\n+    id: 'my-project'\n+});\n+// END\n+\n+// BEGIN\n+// Deletes an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var deleteProject = function () {\n+    return projectLib.delete({\n+        id: 'my-project'\n+    });\n+}\n+\n+var result = contextLib.run({\n+    principals: [\"role:system.admin\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTQ3OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNFrOGU67xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNFrOGU67xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDI3Ng==", "bodyText": "Issue found: 'result' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590276", "createdAt": "2020-05-13T16:57:04Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "diffHunk": "@@ -0,0 +1,28 @@\n+// BEGIN\n+// Deletes an existing content project\n+var projectLib = require('/lib/xp/project');\n+var result = projectLib.delete({\n+    id: 'my-project'\n+});\n+// END\n+\n+// BEGIN\n+// Deletes an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var deleteProject = function () {\n+    return projectLib.delete({\n+        id: 'my-project'\n+    });\n+}\n+\n+var result = contextLib.run({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTY0OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNVrOGU672A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNVrOGU672A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDI5Ng==", "bodyText": "Issue found: 'expected' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590296", "createdAt": "2020-05-13T16:57:05Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTcxOnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNlrOGU674w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowNlrOGU674w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDMwNw==", "bodyText": "Issue found: 'project' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590307", "createdAt": "2020-05-13T16:57:06Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTc1OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowN1rOGU677Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowN1rOGU677Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDMxNw==", "bodyText": "Issue found: Strings must use singlequote.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590317", "createdAt": "2020-05-13T16:57:07Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'description': 'Some exciting content is stored here',\n+    'language': 'no',\n+    'permissions': {\n+        'owner': [\n+            'user:mystore:user1'\n+        ],\n+        'editor': [\n+            'user:mystore:user2'\n+        ],\n+        'author': [\n+            'user:mystore:user3'\n+        ],\n+        'contributor': [\n+            'user:mystore:user4'\n+        ],\n+        'viewer': [\n+            'user:mystore:user5'\n+        ]\n+    },\n+    readAccess: {\n+        'public': false\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var createProject = function () {\n+    return projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+}\n+\n+var project = contextLib.run({\n+    principals: [\"role:system.admin\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 94}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTg0OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/modify.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowOFrOGU67-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowOFrOGU67-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDMzMA==", "bodyText": "Issue found: 'projectLib' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590330", "createdAt": "2020-05-13T16:57:08Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/modify.js", "diffHunk": "@@ -0,0 +1,44 @@\n+// BEGIN\n+// Modifies an existing content project\n+var projectLib = require('/lib/xp/project');\n+\n+var project = projectLib.modify({\n+    id: 'my-project',\n+    displayName: 'New project name',\n+    description: 'New project description',\n+    language: 'en'\n+});\n+// END\n+\n+// BEGIN\n+// Modifies an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTg4OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/modify.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowOVrOGU68Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzowOVrOGU68Ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDMzOA==", "bodyText": "Issue found: 'project' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590338", "createdAt": "2020-05-13T16:57:09Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/modify.js", "diffHunk": "@@ -0,0 +1,44 @@\n+// BEGIN\n+// Modifies an existing content project\n+var projectLib = require('/lib/xp/project');\n+\n+var project = projectLib.modify({\n+    id: 'my-project',\n+    displayName: 'New project name',\n+    description: 'New project description',\n+    language: 'en'\n+});\n+// END\n+\n+// BEGIN\n+// Modifies an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var modifyProject = function () {\n+    return projectLib.modify({\n+        id: 'my-project',\n+        displayName: 'New project name',\n+        description: 'New project description',\n+        language: 'en'\n+    });\n+}\n+\n+var project = contextLib.run({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMTk2OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMFrOGU68EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMFrOGU68EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDM1Mw==", "bodyText": "Issue found: 'projectLib' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590353", "createdAt": "2020-05-13T16:57:10Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/delete.js", "diffHunk": "@@ -0,0 +1,28 @@\n+// BEGIN\n+// Deletes an existing content project\n+var projectLib = require('/lib/xp/project');\n+var result = projectLib.delete({\n+    id: 'my-project'\n+});\n+// END\n+\n+// BEGIN\n+// Deletes an existing content project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMjAxOnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/project.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMVrOGU68Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMVrOGU68Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDM2Mg==", "bodyText": "Issue found: Unexpected use of undefined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590362", "createdAt": "2020-05-13T16:57:11Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/project.js", "diffHunk": "@@ -0,0 +1,200 @@\n+/**\n+ * Functions to manage Content Projects.\n+ *\n+ * @example\n+ * var projectLib = require('/lib/xp/project');\n+ *\n+ * @module project\n+ */\n+\n+/* global __ */\n+\n+function required(params, name) {\n+    var value = params[name];\n+    if (value === undefined) {\n+        throw 'Parameter \\'' + name + '\\' is required';\n+    }\n+\n+    return value;\n+}\n+\n+function nullOrValue(value) {\n+    if (value === undefined) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDAzMjA2OnYy", "diffSide": "RIGHT", "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMlrOGU68Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNjo1NzoxMlrOGU68Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU5MDM3MQ==", "bodyText": "Issue found: 'project' is already defined.", "url": "https://github.com/enonic/xp/pull/8070#discussion_r424590371", "createdAt": "2020-05-13T16:57:12Z", "author": {"login": "jsi"}, "path": "modules/lib/lib-project/src/main/resources/lib/xp/examples/project/create.js", "diffHunk": "@@ -0,0 +1,96 @@\n+// BEGIN\n+// Creates a Content Project with minimal properties\n+var projectLib = require('/lib/xp/project');\n+try {\n+    var project = projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+} catch (e) {\n+    log.error('Failed to create a project: ' + e);\n+}\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'permissions': [],\n+    'readAccess': {\n+        'public': true\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project with extended properties\n+var projectLib = require('/lib/xp/project');\n+var project = projectLib.create({\n+    id: 'my-project',\n+    displayName: 'My Content Project',\n+    description: 'Some exciting content is stored here',\n+    language: 'no',\n+    permissions: {\n+        owner: ['user:mystore:user1'],\n+        editor: ['user:mystore:user2'],\n+        author: ['user:mystore:user3'],\n+        contributor: ['user:mystore:user4'],\n+        viewer: ['user:mystore:user5']\n+    },\n+    readAccess: {\n+        public: false\n+    }\n+});\n+// END\n+\n+// BEGIN\n+var expected = {\n+    'id': 'my-project',\n+    'displayName': 'My Content Project',\n+    'description': 'Some exciting content is stored here',\n+    'language': 'no',\n+    'permissions': {\n+        'owner': [\n+            'user:mystore:user1'\n+        ],\n+        'editor': [\n+            'user:mystore:user2'\n+        ],\n+        'author': [\n+            'user:mystore:user3'\n+        ],\n+        'contributor': [\n+            'user:mystore:user4'\n+        ],\n+        'viewer': [\n+            'user:mystore:user5'\n+        ]\n+    },\n+    readAccess: {\n+        'public': false\n+    }\n+};\n+// END\n+\n+// BEGIN\n+// Creates a Content Project inside context with `system.admin` role\n+var projectLib = require('/lib/xp/project');\n+var contextLib = require('/lib/xp/context');\n+\n+var createProject = function () {\n+    return projectLib.create({\n+        id: 'my-project',\n+        displayName: 'My Content Project',\n+        readAccess: {\n+            public: true\n+        }\n+    });\n+}\n+\n+var project = contextLib.run({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b568d3e383365b4ed6f99be98321d86d7c8f9fb"}, "originalPosition": 93}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1057, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}