{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNzMyODU1", "number": 8531, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDo1Njo1M1rOFB0jvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjowNjo1MVrOFB2zXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDU0MDEzOnYy", "diffSide": "RIGHT", "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/rest/resource/content/json/UpdateContentJson.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDo1Njo1M1rOIAqwog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDo1Njo1M1rOIAqwog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU3MTQ5MA==", "bodyText": "Do we use this field at all? We should not, probably as we should not trust the caller.", "url": "https://github.com/enonic/xp/pull/8531#discussion_r537571490", "createdAt": "2020-12-07T14:56:53Z", "author": {"login": "rymsha"}, "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/rest/resource/content/json/UpdateContentJson.java", "diffHunk": "@@ -59,10 +60,14 @@\n         final PropertyTree contentData = PropertyTreeJson.fromJson( propertyArrayJsonList );\n         final ExtraDatas extraDatas = parseExtradata( extraDataJsonList );\n \n+        final PrincipalKey modifier = ContextAccessor.current().getAuthInfo().getUser() != null\n+            ? ContextAccessor.current().getAuthInfo().getUser().getKey()\n+            : PrincipalKey.ofAnonymous();\n+\n         this.updateContentParams = new UpdateContentParams().\n             requireValid( Boolean.parseBoolean( requireValid ) ).\n             contentId( ContentId.from( contentId ) ).\n-            modifier( PrincipalKey.ofAnonymous() ).\n+            modifier( modifier ).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4f93091f8a1149d1f3ce0b4e4f6f22e353df8df3"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3NDkwNzgwOnYy", "diffSide": "RIGHT", "path": "modules/core/core-api/src/main/java/com/enonic/xp/content/UpdateContentParams.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjowNjo1MVrOIAuJtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNjowOTo0MFrOIAuSyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyNzA2MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    this.modifier = modifier;", "url": "https://github.com/enonic/xp/pull/8531#discussion_r537627060", "createdAt": "2020-12-07T16:06:51Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/content/UpdateContentParams.java", "diffHunk": "@@ -40,6 +40,7 @@ public UpdateContentParams contentId( final ContentId contentId )\n         return this;\n     }\n \n+    @Deprecated\n     public UpdateContentParams modifier( final PrincipalKey modifier )\n     {\n         this.modifier = modifier;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "871899a6641de0f01a69884652a34db7c05c2038"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyOTM4NA==", "bodyText": "And all unused private fields should be deleted as well", "url": "https://github.com/enonic/xp/pull/8531#discussion_r537629384", "createdAt": "2020-12-07T16:09:40Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/content/UpdateContentParams.java", "diffHunk": "@@ -40,6 +40,7 @@ public UpdateContentParams contentId( final ContentId contentId )\n         return this;\n     }\n \n+    @Deprecated\n     public UpdateContentParams modifier( final PrincipalKey modifier )\n     {\n         this.modifier = modifier;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYyNzA2MA=="}, "originalCommit": {"oid": "871899a6641de0f01a69884652a34db7c05c2038"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 934, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}