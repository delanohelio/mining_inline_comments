{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NDIwODM2", "number": 8313, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNDoxMTozMFrOEdw-xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNDoxMTozMFrOEdw-xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NjQ2NjYzOnYy", "diffSide": "RIGHT", "path": "modules/core/core-repo/src/main/java/com/enonic/xp/repo/impl/elasticsearch/snapshot/SnapshotServiceImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNDoxMTozMFrOHJH9xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxNToyMTo0MVrOHJKsNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMyOTczMg==", "bodyText": "We are slowly getting away from Guava. We don't use Iterables class (almost) anywhere else.\nlist.get( list.size() - 1 ) is not perfect but good enough alternative.\nIt would be also good to check if size is not 0 and throw exception with clear message: \"No snapshots found\" for ex.", "url": "https://github.com/enonic/xp/pull/8313#discussion_r479329732", "createdAt": "2020-08-28T14:11:30Z", "author": {"login": "rymsha"}, "path": "modules/core/core-repo/src/main/java/com/enonic/xp/repo/impl/elasticsearch/snapshot/SnapshotServiceImpl.java", "diffHunk": "@@ -96,15 +98,29 @@ public RestoreResult restore( final RestoreParams restoreParams )\n     private RestoreResult doRestore( final RestoreParams restoreParams )\n     {\n         checkSnapshotRepository();\n-        validateSnapshot( restoreParams.getSnapshotName() );\n+\n+        String snapshotName;\n+\n+        if ( restoreParams.isLatest() )\n+        {\n+            final SnapshotResult snapshotResult = Iterables.getLast( list() );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de805860d29c27f58cf141f985aaabe28ac162c1"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTM3NDM5MA==", "bodyText": "solved", "url": "https://github.com/enonic/xp/pull/8313#discussion_r479374390", "createdAt": "2020-08-28T15:21:41Z", "author": {"login": "anatol-sialitski"}, "path": "modules/core/core-repo/src/main/java/com/enonic/xp/repo/impl/elasticsearch/snapshot/SnapshotServiceImpl.java", "diffHunk": "@@ -96,15 +98,29 @@ public RestoreResult restore( final RestoreParams restoreParams )\n     private RestoreResult doRestore( final RestoreParams restoreParams )\n     {\n         checkSnapshotRepository();\n-        validateSnapshot( restoreParams.getSnapshotName() );\n+\n+        String snapshotName;\n+\n+        if ( restoreParams.isLatest() )\n+        {\n+            final SnapshotResult snapshotResult = Iterables.getLast( list() );", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMyOTczMg=="}, "originalCommit": {"oid": "de805860d29c27f58cf141f985aaabe28ac162c1"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1005, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}