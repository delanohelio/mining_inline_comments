{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMjEzNjA1", "number": 8102, "title": "Project creation locks in cluster environment #8100", "bodyText": "", "createdAt": "2020-05-19T15:59:44Z", "url": "https://github.com/enonic/xp/pull/8102", "merged": true, "mergeCommit": {"oid": "1b8584c5e835cf31fedf9d7cfa71f904e99f836a"}, "closed": true, "closedAt": "2020-05-22T06:13:48Z", "author": {"login": "vbradnitski"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABci2s8IAFqTQxNDU5ODA1Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjdkG1gFqTQxNjEzNzY5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NTk4MDUy", "url": "https://github.com/enonic/xp/pull/8102#pullrequestreview-414598052", "createdAt": "2020-05-19T16:02:30Z", "commit": {"oid": "58871e3eabffa1dcbbe402b8f4b5a514b9287e18"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNjowMjozMVrOGXnjFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNjowMjozMVrOGXnjFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQxODM5MA==", "bodyText": "switch them. checking boolean is faster than checking isMaster", "url": "https://github.com/enonic/xp/pull/8102#discussion_r427418390", "createdAt": "2020-05-19T16:02:31Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/init/Initializer.java", "diffHunk": "@@ -17,19 +17,22 @@\n \n     private final long initializationCheckMaxCount;\n \n+    private final boolean forceInitialization;\n+\n     protected Initializer( final Builder builder )\n     {\n         this.initializationCheckPeriod =\n             builder.initializationCheckPeriod == null ? INITIALIZATION_CHECK_PERIOD : builder.initializationCheckPeriod;\n         this.initializationCheckMaxCount =\n             builder.initializationCheckMaxCount == null ? INITIALIZATION_CHECK_MAX_COUNT : builder.initializationCheckMaxCount;\n+        this.forceInitialization = builder.forceInitialization;\n     }\n \n     public void initialize()\n     {\n         while ( true )\n         {\n-            if ( isMaster() )\n+            if ( isMaster() || this.forceInitialization )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58871e3eabffa1dcbbe402b8f4b5a514b9287e18"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58871e3eabffa1dcbbe402b8f4b5a514b9287e18", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/58871e3eabffa1dcbbe402b8f4b5a514b9287e18", "committedDate": "2020-05-19T15:58:47Z", "message": "Project creation locks in cluster environment #8100"}, "afterCommit": {"oid": "2e244ab265b4b263258424b9c3c624eaa0f01269", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/2e244ab265b4b263258424b9c3c624eaa0f01269", "committedDate": "2020-05-19T16:07:36Z", "message": "Project creation locks in cluster environment #8100"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "162b6eb2ded5c8aa358201f6280fade379e6ab19", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/162b6eb2ded5c8aa358201f6280fade379e6ab19", "committedDate": "2020-05-20T11:50:10Z", "message": "Project creation locks in cluster environment #8100"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2e244ab265b4b263258424b9c3c624eaa0f01269", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/2e244ab265b4b263258424b9c3c624eaa0f01269", "committedDate": "2020-05-19T16:07:36Z", "message": "Project creation locks in cluster environment #8100"}, "afterCommit": {"oid": "162b6eb2ded5c8aa358201f6280fade379e6ab19", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/162b6eb2ded5c8aa358201f6280fade379e6ab19", "committedDate": "2020-05-20T11:50:10Z", "message": "Project creation locks in cluster environment #8100"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1MjY1MzMw", "url": "https://github.com/enonic/xp/pull/8102#pullrequestreview-415265330", "createdAt": "2020-05-20T12:08:47Z", "commit": {"oid": "162b6eb2ded5c8aa358201f6280fade379e6ab19"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NDgwOTU5", "url": "https://github.com/enonic/xp/pull/8102#pullrequestreview-415480959", "createdAt": "2020-05-20T15:54:37Z", "commit": {"oid": "162b6eb2ded5c8aa358201f6280fade379e6ab19"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2MTM3Njkz", "url": "https://github.com/enonic/xp/pull/8102#pullrequestreview-416137693", "createdAt": "2020-05-21T13:20:07Z", "commit": {"oid": "162b6eb2ded5c8aa358201f6280fade379e6ab19"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4548, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}