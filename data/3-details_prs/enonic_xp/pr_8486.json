{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxNzkzMjA0", "number": 8486, "title": "Distributable tasks (second iteration)", "bodyText": "", "createdAt": "2020-11-16T16:53:37Z", "url": "https://github.com/enonic/xp/pull/8486", "merged": true, "mergeCommit": {"oid": "84aac25d01a230974d6c7743ee38aca6ea190b9b"}, "closed": true, "closedAt": "2020-11-18T14:15:22Z", "author": {"login": "rymsha"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddU_CwABqjQwMDQxMDQ0OTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddtkGiAFqTUzMzQwOTA1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "470060e8b0c01236ffe91566ae17ea2182bcf272", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/470060e8b0c01236ffe91566ae17ea2182bcf272", "committedDate": "2020-11-16T16:47:44Z", "message": "save"}, "afterCommit": {"oid": "3c8c27c4986c9eafcf911a0395609a306913083f", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/3c8c27c4986c9eafcf911a0395609a306913083f", "committedDate": "2020-11-17T08:07:45Z", "message": "save"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c8c27c4986c9eafcf911a0395609a306913083f", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/3c8c27c4986c9eafcf911a0395609a306913083f", "committedDate": "2020-11-17T08:07:45Z", "message": "save"}, "afterCommit": {"oid": "7c2b1a0c5315e1256ef453d12110fa24c6eb3337", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/7c2b1a0c5315e1256ef453d12110fa24c6eb3337", "committedDate": "2020-11-17T08:22:31Z", "message": "save"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c2b1a0c5315e1256ef453d12110fa24c6eb3337", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/7c2b1a0c5315e1256ef453d12110fa24c6eb3337", "committedDate": "2020-11-17T08:22:31Z", "message": "save"}, "afterCommit": {"oid": "a0ab1f70c42de3afe839a802496b9cc8a76c62da", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/a0ab1f70c42de3afe839a802496b9cc8a76c62da", "committedDate": "2020-11-17T10:17:43Z", "message": "save"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a0ab1f70c42de3afe839a802496b9cc8a76c62da", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/a0ab1f70c42de3afe839a802496b9cc8a76c62da", "committedDate": "2020-11-17T10:17:43Z", "message": "save"}, "afterCommit": {"oid": "f190073a1b451646596759359b6de02fab59fdaf", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/f190073a1b451646596759359b6de02fab59fdaf", "committedDate": "2020-11-17T11:43:31Z", "message": "save"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b25ee7e9d3011d07f685456027b3d61b4d46d6c9", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/b25ee7e9d3011d07f685456027b3d61b4d46d6c9", "committedDate": "2020-11-17T13:24:51Z", "message": "save"}, "afterCommit": {"oid": "86f5cfb0f637167d1d4e5a4d23588a414f099210", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/86f5cfb0f637167d1d4e5a4d23588a414f099210", "committedDate": "2020-11-17T14:39:39Z", "message": "Distributable tasks (second iteration) #8486"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNDk1ODc2", "url": "https://github.com/enonic/xp/pull/8486#pullrequestreview-532495876", "createdAt": "2020-11-17T15:34:26Z", "commit": {"oid": "86f5cfb0f637167d1d4e5a4d23588a414f099210"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTozNDoyNlrOH07H-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTozNDoyNlrOH07H-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1NjY5Ng==", "bodyText": "rename to data", "url": "https://github.com/enonic/xp/pull/8486#discussion_r525256696", "createdAt": "2020-11-17T15:34:26Z", "author": {"login": "anatol-sialitski"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/task/SubmitTaskParams.java", "diffHunk": "@@ -46,8 +38,6 @@ public static Builder create()\n \n         private PropertyTree config;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86f5cfb0f637167d1d4e5a4d23588a414f099210"}, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "86f5cfb0f637167d1d4e5a4d23588a414f099210", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/86f5cfb0f637167d1d4e5a4d23588a414f099210", "committedDate": "2020-11-17T14:39:39Z", "message": "Distributable tasks (second iteration) #8486"}, "afterCommit": {"oid": "bede5b4247a3e20ed978985fa49c11fd55404202", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/bede5b4247a3e20ed978985fa49c11fd55404202", "committedDate": "2020-11-17T15:37:04Z", "message": "Distributable tasks (second iteration) #8486"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNTEyNDA3", "url": "https://github.com/enonic/xp/pull/8486#pullrequestreview-532512407", "createdAt": "2020-11-17T15:49:29Z", "commit": {"oid": "bede5b4247a3e20ed978985fa49c11fd55404202"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTo0OToyOVrOH0751Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTo0OToyOVrOH0751Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI2OTQ2MQ==", "bodyText": "final, in order to uniform :)", "url": "https://github.com/enonic/xp/pull/8486#discussion_r525269461", "createdAt": "2020-11-17T15:49:29Z", "author": {"login": "anatol-sialitski"}, "path": "modules/core/core-task/src/main/java/com/enonic/xp/impl/task/script/NamedTaskScriptFactoryImpl.java", "diffHunk": "@@ -24,16 +25,29 @@\n \n     private final TaskDescriptorService taskDescriptorService;\n \n+    private final PropertyTreeMarshallerService propertyTreeMarshallerService;\n+\n     @Activate\n     public NamedTaskScriptFactoryImpl( @Reference final PortalScriptService scriptService,\n-                                       @Reference final TaskDescriptorService taskDescriptorService )\n+                                       @Reference final TaskDescriptorService taskDescriptorService,\n+                                       @Reference PropertyTreeMarshallerService propertyTreeMarshallerService )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bede5b4247a3e20ed978985fa49c11fd55404202"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bede5b4247a3e20ed978985fa49c11fd55404202", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/bede5b4247a3e20ed978985fa49c11fd55404202", "committedDate": "2020-11-17T15:37:04Z", "message": "Distributable tasks (second iteration) #8486"}, "afterCommit": {"oid": "7d023809eb6f0139c2d613004f91281abc0c4c8e", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/7d023809eb6f0139c2d613004f91281abc0c4c8e", "committedDate": "2020-11-17T15:52:38Z", "message": "Distributable tasks (second iteration) #8486"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNTIwNTc5", "url": "https://github.com/enonic/xp/pull/8486#pullrequestreview-532520579", "createdAt": "2020-11-17T15:57:05Z", "commit": {"oid": "7d023809eb6f0139c2d613004f91281abc0c4c8e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d023809eb6f0139c2d613004f91281abc0c4c8e", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/7d023809eb6f0139c2d613004f91281abc0c4c8e", "committedDate": "2020-11-17T15:52:38Z", "message": "Distributable tasks (second iteration) #8486"}, "afterCommit": {"oid": "f9438d5ea50f8385360deae400a92a8766ee53cd", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/f9438d5ea50f8385360deae400a92a8766ee53cd", "committedDate": "2020-11-18T07:53:54Z", "message": "Distributable tasks (second iteration) #8486"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzMjU1OTgz", "url": "https://github.com/enonic/xp/pull/8486#pullrequestreview-533255983", "createdAt": "2020-11-18T09:32:48Z", "commit": {"oid": "f9438d5ea50f8385360deae400a92a8766ee53cd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwOTozMjo0OFrOH1kwbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQwOTozMjo0OFrOH1kwbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTkzODc5Ng==", "bodyText": "LinkedHashMap", "url": "https://github.com/enonic/xp/pull/8486#discussion_r525938796", "createdAt": "2020-11-18T09:32:48Z", "author": {"login": "rymsha"}, "path": "modules/lib/lib-content/src/main/java/com/enonic/xp/lib/content/BaseContentHandler.java", "diffHunk": "@@ -145,13 +139,12 @@ PropertyTree createPropertyTree( final Map<String, Object> value, final ContentT\n             return null;\n         }\n \n-        final ObjectNode root = createJson( value );\n-\n-        if ( root.has( ContentPropertyNames.SITECONFIG ) )\n+        if ( value.containsKey( ContentPropertyNames.SITECONFIG ) )\n         {\n-            root.remove( ContentPropertyNames.SITECONFIG );\n+            Map<String, Object> newValue = new HashMap<>( value );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9438d5ea50f8385360deae400a92a8766ee53cd"}, "originalPosition": 118}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "165b18842a7785a93e7d570212ba8b586f45f69f", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/165b18842a7785a93e7d570212ba8b586f45f69f", "committedDate": "2020-11-18T09:48:23Z", "message": "Distributable tasks (second iteration) #8486"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9438d5ea50f8385360deae400a92a8766ee53cd", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/f9438d5ea50f8385360deae400a92a8766ee53cd", "committedDate": "2020-11-18T07:53:54Z", "message": "Distributable tasks (second iteration) #8486"}, "afterCommit": {"oid": "165b18842a7785a93e7d570212ba8b586f45f69f", "author": {"user": {"login": "rymsha", "name": "Sergey Rymsha"}}, "url": "https://github.com/enonic/xp/commit/165b18842a7785a93e7d570212ba8b586f45f69f", "committedDate": "2020-11-18T09:48:23Z", "message": "Distributable tasks (second iteration) #8486"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzNDA5MDU0", "url": "https://github.com/enonic/xp/pull/8486#pullrequestreview-533409054", "createdAt": "2020-11-18T12:46:12Z", "commit": {"oid": "165b18842a7785a93e7d570212ba8b586f45f69f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4403, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}