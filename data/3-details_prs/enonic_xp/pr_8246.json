{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1MDYxNjY3", "number": 8246, "title": "POC: inherited filed should affect data inheritance, but not path #8217", "bodyText": "", "createdAt": "2020-07-22T11:35:21Z", "url": "https://github.com/enonic/xp/pull/8246", "merged": true, "mergeCommit": {"oid": "ab8e03541fd39a64ecb7fcb39b951d9c64dc1fc3"}, "closed": true, "closedAt": "2020-07-23T14:26:22Z", "author": {"login": "vbradnitski"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3acdYABqjM1NzU2NjA0NzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3wPS6AFqTQ1NDE4NDIzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "317299a6d52ce70fde77762290795524011fed04", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/317299a6d52ce70fde77762290795524011fed04", "committedDate": "2020-07-22T11:20:20Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}, "afterCommit": {"oid": "8488dffe1ea745929652a977c67ec51651016f5e", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/8488dffe1ea745929652a977c67ec51651016f5e", "committedDate": "2020-07-22T13:00:17Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8488dffe1ea745929652a977c67ec51651016f5e", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/8488dffe1ea745929652a977c67ec51651016f5e", "committedDate": "2020-07-22T13:00:17Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}, "afterCommit": {"oid": "9c8a3170e97525ecf4e5a7e0864b607f7074eda2", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/9c8a3170e97525ecf4e5a7e0864b607f7074eda2", "committedDate": "2020-07-22T13:09:16Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMzc1NTk0", "url": "https://github.com/enonic/xp/pull/8246#pullrequestreview-453375594", "createdAt": "2020-07-22T14:30:42Z", "commit": {"oid": "9c8a3170e97525ecf4e5a7e0864b607f7074eda2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDozMDo0MlrOG1lK4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNDo0NDoxOFrOG1lyuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzNjcwNg==", "bodyText": "Use stream.distinct", "url": "https://github.com/enonic/xp/pull/8246#discussion_r458836706", "createdAt": "2020-07-22T14:30:42Z", "author": {"login": "rymsha"}, "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/json/content/ContentSummaryJson.java", "diffHunk": "@@ -44,7 +48,7 @@ public ContentSummaryJson( final Content content, final ContentIconUrlResolver i\n         this.thumbnailJson = content.hasThumbnail() ? new ThumbnailJson( content.getThumbnail() ) : null;\n         this.isSite = content.isSite();\n         this.isPage = content.hasPage();\n-        this.inherited = content.isInherited();\n+        this.inherit = new ArrayList( new TreeSet( content.getInherit() ) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c8a3170e97525ecf4e5a7e0864b607f7074eda2"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzODQ5Ng==", "bodyText": "Collection instead of Set", "url": "https://github.com/enonic/xp/pull/8246#discussion_r458838496", "createdAt": "2020-07-22T14:33:07Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/content/CreateContentParams.java", "diffHunk": "@@ -378,9 +380,12 @@ public Builder createSiteTemplateFolder( final boolean createSiteTemplateFolder\n             return this;\n         }\n \n-        public Builder inherited( final boolean inherited )\n+        public Builder inherit( final Set<ContentInheritType> inherit )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c8a3170e97525ecf4e5a7e0864b607f7074eda2"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg0MzIwMg==", "bodyText": "use Enum::name as it is guaranteed to be stable", "url": "https://github.com/enonic/xp/pull/8246#discussion_r458843202", "createdAt": "2020-07-22T14:39:25Z", "author": {"login": "rymsha"}, "path": "modules/core/core-content/src/main/java/com/enonic/xp/core/impl/content/serializer/ContentDataSerializer.java", "diffHunk": "@@ -242,6 +246,17 @@ private void addWorkflowInfo( final PropertySet contentAsData, final WorkflowInf\n         }\n     }\n \n+    private void addInherit( final PropertySet contentAsData, final Set<ContentInheritType> inherit )\n+    {\n+        if ( inherit != null )\n+        {\n+            contentAsData.ifNotNull().addStrings( INHERIT, inherit.\n+                stream().\n+                map( Enum::toString ).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c8a3170e97525ecf4e5a7e0864b607f7074eda2"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg0NjkwNw==", "bodyText": "Immutable EnumSet", "url": "https://github.com/enonic/xp/pull/8246#discussion_r458846907", "createdAt": "2020-07-22T14:44:18Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/content/Content.java", "diffHunk": "@@ -416,7 +418,7 @@ public int hashCode()\n \n         protected boolean hasChildren;\n \n-        protected boolean inherited;\n+        protected ImmutableSet.Builder<ContentInheritType> inherit = ImmutableSet.builder();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c8a3170e97525ecf4e5a7e0864b607f7074eda2"}, "originalPosition": 64}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c8a3170e97525ecf4e5a7e0864b607f7074eda2", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/9c8a3170e97525ecf4e5a7e0864b607f7074eda2", "committedDate": "2020-07-22T13:09:16Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}, "afterCommit": {"oid": "9cac97200534edbc0d5ada0062cf2302bc945f24", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/9cac97200534edbc0d5ada0062cf2302bc945f24", "committedDate": "2020-07-23T09:05:42Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9cac97200534edbc0d5ada0062cf2302bc945f24", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/9cac97200534edbc0d5ada0062cf2302bc945f24", "committedDate": "2020-07-23T09:05:42Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}, "afterCommit": {"oid": "9c830b7b9d68d6ea0003a5d56cd2681dea7876fd", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/9c830b7b9d68d6ea0003a5d56cd2681dea7876fd", "committedDate": "2020-07-23T10:17:37Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MDM0ODY3", "url": "https://github.com/enonic/xp/pull/8246#pullrequestreview-454034867", "createdAt": "2020-07-23T11:15:23Z", "commit": {"oid": "9c830b7b9d68d6ea0003a5d56cd2681dea7876fd"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMToxNToyM1rOG2GGUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMToxODoxMlrOG2GLPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3NjIwOA==", "bodyText": "Why do you need null check?", "url": "https://github.com/enonic/xp/pull/8246#discussion_r459376208", "createdAt": "2020-07-23T11:15:23Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/content/CreateContentParams.java", "diffHunk": "@@ -378,9 +381,12 @@ public Builder createSiteTemplateFolder( final boolean createSiteTemplateFolder\n             return this;\n         }\n \n-        public Builder inherited( final boolean inherited )\n+        public Builder inherit( final Collection<ContentInheritType> inherit )\n         {\n-            this.inherited = inherited;\n+            if ( inherit != null )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c830b7b9d68d6ea0003a5d56cd2681dea7876fd"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3NjQxMg==", "bodyText": "Allow Collection", "url": "https://github.com/enonic/xp/pull/8246#discussion_r459376412", "createdAt": "2020-07-23T11:15:49Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/content/CreateContentTranslatorParams.java", "diffHunk": "@@ -387,9 +389,12 @@ public Builder workflowInfo( final WorkflowInfo workflowInfo )\n             return this;\n         }\n \n-        public Builder inherited( final boolean inherited )\n+        public Builder inherit( final Set<ContentInheritType> inherit )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c830b7b9d68d6ea0003a5d56cd2681dea7876fd"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3NjUyOQ==", "bodyText": "Why would you need null check?", "url": "https://github.com/enonic/xp/pull/8246#discussion_r459376529", "createdAt": "2020-07-23T11:16:05Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/content/CreateContentTranslatorParams.java", "diffHunk": "@@ -387,9 +389,12 @@ public Builder workflowInfo( final WorkflowInfo workflowInfo )\n             return this;\n         }\n \n-        public Builder inherited( final boolean inherited )\n+        public Builder inherit( final Set<ContentInheritType> inherit )\n         {\n-            this.inherited = inherited;\n+            if ( inherit != null )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c830b7b9d68d6ea0003a5d56cd2681dea7876fd"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3NzQ2OQ==", "bodyText": "It differs from CreateContentParams.\nThere inherit is an immutable final field set from a builder.", "url": "https://github.com/enonic/xp/pull/8246#discussion_r459377469", "createdAt": "2020-07-23T11:18:12Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/content/UpdateContentParams.java", "diffHunk": "@@ -26,7 +27,7 @@\n \n     private boolean requireValid;\n \n-    private boolean inherited = false;\n+    private Set<ContentInheritType> inherit = Set.of();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c830b7b9d68d6ea0003a5d56cd2681dea7876fd"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cace5e74620dde44c233cf391cf4da5a47e85aa4", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/cace5e74620dde44c233cf391cf4da5a47e85aa4", "committedDate": "2020-07-23T14:08:45Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c830b7b9d68d6ea0003a5d56cd2681dea7876fd", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/9c830b7b9d68d6ea0003a5d56cd2681dea7876fd", "committedDate": "2020-07-23T10:17:37Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}, "afterCommit": {"oid": "cace5e74620dde44c233cf391cf4da5a47e85aa4", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/cace5e74620dde44c233cf391cf4da5a47e85aa4", "committedDate": "2020-07-23T14:08:45Z", "message": "POC: inherited filed should affect data inheritance, but not path #8217"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MTg0MjMx", "url": "https://github.com/enonic/xp/pull/8246#pullrequestreview-454184231", "createdAt": "2020-07-23T14:24:04Z", "commit": {"oid": "cace5e74620dde44c233cf391cf4da5a47e85aa4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4443, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}