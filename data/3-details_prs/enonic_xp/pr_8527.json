{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNDI3NDU1", "number": 8527, "title": "Return all projects layers in /list API #8413", "bodyText": "", "createdAt": "2020-12-04T10:06:35Z", "url": "https://github.com/enonic/xp/pull/8527", "merged": true, "mergeCommit": {"oid": "be25407e1d078bd3b9135643a4319b775be0ea5c"}, "closed": true, "closedAt": "2020-12-08T12:47:17Z", "author": {"login": "vbradnitski"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdi1nqWgFqTU0NDg0MDQzMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkJdYmgFqTU0NzE5NDc5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0ODQwNDMw", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-544840430", "createdAt": "2020-12-04T10:35:42Z", "commit": {"oid": "f0d8553e79f24ef373eaec0b86cf01360457686d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMDozNTo0MlrOH_K51Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMDo1ODoyOFrOH_Lxnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjAwMDk4MQ==", "bodyText": "Change to findFirst() so when we support multi-inheritance first project will be returned", "url": "https://github.com/enonic/xp/pull/8527#discussion_r536000981", "createdAt": "2020-12-04T10:35:42Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/project/Projects.java", "diffHunk": "@@ -39,6 +39,14 @@ public static Projects from( Repositories repositories )\n             build();\n     }\n \n+    public Project get( final ProjectName name )\n+    {\n+        return this.stream().\n+            filter( project -> project.getName().equals( name ) ).\n+            findAny().", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0d8553e79f24ef373eaec0b86cf01360457686d"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjAxNTI2Mw==", "bodyText": "I think we need graph method in projectService. This one does not follow spec #8413 (comment)", "url": "https://github.com/enonic/xp/pull/8527#discussion_r536015263", "createdAt": "2020-12-04T10:58:28Z", "author": {"login": "rymsha"}, "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/rest/resource/project/ProjectResource.java", "diffHunk": "@@ -184,6 +192,47 @@ public ProjectJson get( final @QueryParam(\"name\") String projectNameValue )\n         return doCreateJson( this.projectService.get( projectName ) );\n     }\n \n+    @GET\n+    @Path(\"getTree\")\n+    public List<ProjectParentJson> getTree( final @QueryParam(\"name\") String projectNameValue )\n+    {\n+        final List<Project> result = new ArrayList<>();\n+        final Projects projects = adminContext().callWith( () -> this.projectService.list() );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0d8553e79f24ef373eaec0b86cf01360457686d"}, "originalPosition": 48}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f0d8553e79f24ef373eaec0b86cf01360457686d", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/f0d8553e79f24ef373eaec0b86cf01360457686d", "committedDate": "2020-12-04T10:01:06Z", "message": "Return all projects layers in /list API #8413"}, "afterCommit": {"oid": "804a741c21595ec0b1ce246c34cadb95b5a29a76", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/804a741c21595ec0b1ce246c34cadb95b5a29a76", "committedDate": "2020-12-07T10:16:58Z", "message": "Return all projects layers in /list API #8413"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "804a741c21595ec0b1ce246c34cadb95b5a29a76", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/804a741c21595ec0b1ce246c34cadb95b5a29a76", "committedDate": "2020-12-07T10:16:58Z", "message": "Return all projects layers in /list API #8413"}, "afterCommit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/f4c8a6db2166fdcaa56183edfa78fb3d0e87c608", "committedDate": "2020-12-07T10:40:51Z", "message": "Return all projects layers in /list API #8413"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MDI0Nzc3", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-546024777", "createdAt": "2020-12-07T10:41:15Z", "commit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMDo0MToxNVrOIAgeRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMDo0NzowOVrOIAguIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQwMjk1MA==", "bodyText": "Is it OK to extend lmmutavleList here?", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537402950", "createdAt": "2020-12-07T10:41:15Z", "author": {"login": "rymsha"}, "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/rest/resource/project/json/ProjectGraphJson.java", "diffHunk": "@@ -0,0 +1,19 @@\n+package com.enonic.xp.admin.impl.rest.resource.project.json;\n+\n+import java.util.stream.Collectors;\n+\n+import com.google.common.collect.ImmutableList;\n+\n+import com.enonic.xp.project.ProjectGraph;\n+import com.enonic.xp.support.AbstractImmutableEntityList;\n+\n+public final class ProjectGraphJson\n+    extends AbstractImmutableEntityList<ProjectGraphEntryJson>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQwNDUxMA==", "bodyText": "Utility methods don't belong to here.", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537404510", "createdAt": "2020-12-07T10:43:33Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/project/Projects.java", "diffHunk": "@@ -39,6 +39,14 @@ public static Projects from( Repositories repositories )\n             build();\n     }\n \n+    public Project get( final ProjectName name )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQwNjAzMA==", "bodyText": "It has multiple parents in graph", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537406030", "createdAt": "2020-12-07T10:45:40Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/project/ProjectGraphEntry.java", "diffHunk": "@@ -0,0 +1,105 @@\n+package com.enonic.xp.project;\n+\n+import java.util.Objects;\n+\n+import com.google.common.base.Preconditions;\n+\n+import com.enonic.xp.annotation.PublicApi;\n+\n+@PublicApi\n+public final class ProjectGraphEntry\n+{\n+    private final ProjectName name;\n+\n+    private final ProjectName parent;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQwNjM5Nw==", "bodyText": "This is service responsibility to convert", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537406397", "createdAt": "2020-12-07T10:46:13Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/project/ProjectGraphEntry.java", "diffHunk": "@@ -0,0 +1,105 @@\n+package com.enonic.xp.project;\n+\n+import java.util.Objects;\n+\n+import com.google.common.base.Preconditions;\n+\n+import com.enonic.xp.annotation.PublicApi;\n+\n+@PublicApi\n+public final class ProjectGraphEntry\n+{\n+    private final ProjectName name;\n+\n+    private final ProjectName parent;\n+\n+    private ProjectGraphEntry( Builder builder )\n+    {\n+        this.name = builder.name;\n+        this.parent = builder.parent;\n+    }\n+\n+    public static Builder create()\n+    {\n+        return new Builder();\n+    }\n+\n+    public static ProjectGraphEntry from( final Project project )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQwNzAwOQ==", "bodyText": "I'm not sure we need equality methods in this class", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537407009", "createdAt": "2020-12-07T10:47:09Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/project/ProjectGraphEntry.java", "diffHunk": "@@ -0,0 +1,105 @@\n+package com.enonic.xp.project;\n+\n+import java.util.Objects;\n+\n+import com.google.common.base.Preconditions;\n+\n+import com.enonic.xp.annotation.PublicApi;\n+\n+@PublicApi\n+public final class ProjectGraphEntry\n+{\n+    private final ProjectName name;\n+\n+    private final ProjectName parent;\n+\n+    private ProjectGraphEntry( Builder builder )\n+    {\n+        this.name = builder.name;\n+        this.parent = builder.parent;\n+    }\n+\n+    public static Builder create()\n+    {\n+        return new Builder();\n+    }\n+\n+    public static ProjectGraphEntry from( final Project project )\n+    {\n+        if ( project == null )\n+        {\n+            return null;\n+        }\n+\n+        return ProjectGraphEntry.create().\n+            name( project.getName() ).\n+            parent( project.getParent() ).\n+            build();\n+    }\n+\n+    public ProjectName getName()\n+    {\n+        return name;\n+    }\n+\n+    public ProjectName getParent()\n+    {\n+        return parent;\n+    }\n+\n+    @Override\n+    public boolean equals( final Object o )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTE1MzM4", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-546115338", "createdAt": "2020-12-07T12:47:27Z", "commit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMjo0NzoyN1rOIAlJ_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMjo0NzoyN1rOIAlJ_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ3OTY3Nw==", "bodyText": "delete", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537479677", "createdAt": "2020-12-07T12:47:27Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/project/ProjectGraph.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package com.enonic.xp.project;\n+\n+import java.util.Collection;\n+\n+import com.google.common.base.MoreObjects;\n+import com.google.common.collect.ImmutableList;\n+\n+import com.enonic.xp.annotation.PublicApi;\n+import com.enonic.xp.support.AbstractImmutableEntityList;\n+\n+@PublicApi\n+public final class ProjectGraph\n+    extends AbstractImmutableEntityList<ProjectGraphEntry>\n+{\n+    private ProjectGraph( final Builder builder )\n+    {\n+        super( builder.projects.build() );\n+    }\n+\n+    public static ProjectGraph empty()\n+    {\n+        return create().build();\n+    }\n+\n+\n+    public static Builder create()\n+    {\n+        return new Builder();\n+    }\n+\n+    @Override\n+    public String toString()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTE4OTQy", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-546118942", "createdAt": "2020-12-07T12:52:20Z", "commit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMjo1MjoyMVrOIAlWGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMjo1MjoyMVrOIAlWGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ4Mjc3Ng==", "bodyText": "no need", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537482776", "createdAt": "2020-12-07T12:52:21Z", "author": {"login": "rymsha"}, "path": "modules/core/core-project/src/main/java/com/enonic/xp/core/impl/project/ProjectServiceImpl.java", "diffHunk": "@@ -252,6 +260,53 @@ public Projects list()\n         } );\n     }\n \n+    @Override\n+    public ProjectGraph graph( final ProjectName projectName )\n+    {\n+        final List<Project> result = new ArrayList<>();\n+\n+        final Project targetProject = this.get( projectName );\n+\n+        if ( targetProject == null )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTI1Mjg3", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-546125287", "createdAt": "2020-12-07T13:00:47Z", "commit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMzowMDo0OFrOIAlrAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMzowMDo0OFrOIAlrAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ4ODEzMA==", "bodyText": "do it in graph", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537488130", "createdAt": "2020-12-07T13:00:48Z", "author": {"login": "rymsha"}, "path": "modules/core/core-project/src/main/java/com/enonic/xp/core/impl/project/ProjectServiceImpl.java", "diffHunk": "@@ -260,12 +315,25 @@ private Projects doList()\n     @Override\n     public Project get( final ProjectName projectName )\n     {\n-        return callWithGetContext( () -> doGet( projectName ), projectName );\n+        try", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608"}, "originalPosition": 84}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f4c8a6db2166fdcaa56183edfa78fb3d0e87c608", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/f4c8a6db2166fdcaa56183edfa78fb3d0e87c608", "committedDate": "2020-12-07T10:40:51Z", "message": "Return all projects layers in /list API #8413"}, "afterCommit": {"oid": "a8a0d12be89efd792bb1c9613ed340265e1463e6", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/a8a0d12be89efd792bb1c9613ed340265e1463e6", "committedDate": "2020-12-07T18:51:54Z", "message": "Return all projects layers in /list API #8413"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTQzNTI5", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-546543529", "createdAt": "2020-12-07T21:17:17Z", "commit": {"oid": "a8a0d12be89efd792bb1c9613ed340265e1463e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMToxNzoxOFrOIA7GPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMToxNzoxOFrOIA7GPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzgzOTE2NQ==", "bodyText": "Static import helps", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537839165", "createdAt": "2020-12-07T21:17:18Z", "author": {"login": "rymsha"}, "path": "modules/itest/itest-core/src/test/java/com/enonic/xp/core/project/ProjectServiceImplTest.java", "diffHunk": "@@ -807,6 +810,37 @@ void modify_default_project_permissions()\n         } );\n     }\n \n+    @Test\n+    void graph()\n+    {\n+        final Project project1 = ADMIN_CONTEXT.callWith( () -> doCreateProject( ProjectName.from( \"project1\" ), null, true, null ) );\n+        final Project project2 =\n+            ADMIN_CONTEXT.callWith( () -> doCreateProject( ProjectName.from( \"project2\" ), null, true, project1.getName() ) );\n+        final Project project3 =\n+            ADMIN_CONTEXT.callWith( () -> doCreateProject( ProjectName.from( \"project3\" ), null, true, project2.getName() ) );\n+        final Project project4 =\n+            ADMIN_CONTEXT.callWith( () -> doCreateProject( ProjectName.from( \"project4\" ), null, true, project2.getName() ) );\n+        final Project project5 =\n+            ADMIN_CONTEXT.callWith( () -> doCreateProject( ProjectName.from( \"project5\" ), null, true, project4.getName() ) );\n+\n+        final ProjectGraph graph1 = ADMIN_CONTEXT.callWith( () -> projectService.graph( project1.getName() ) );\n+\n+        assertEquals( 5, graph1.getSize() );\n+        assertThat( graph1.getList() ).\n+            extracting( \"name\", \"parent\" ).\n+            containsExactly( Tuple.tuple( project1.getName(), null ), Tuple.tuple( project2.getName(), project1.getName() ),\n+                             Tuple.tuple( project4.getName(), project2.getName() ), Tuple.tuple( project3.getName(), project2.getName() ),\n+                             Tuple.tuple( project5.getName(), project4.getName() ) );\n+\n+        final ProjectGraph graph2 = ADMIN_CONTEXT.callWith( () -> projectService.graph( project4.getName() ) );\n+\n+        assertEquals( 4, graph2.getSize() );\n+        assertThat( graph2.getList() ).\n+            extracting( \"name\", \"parent\" ).\n+            containsExactly( Tuple.tuple( project1.getName(), null ), Tuple.tuple( project2.getName(), project1.getName() ),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a0d12be89efd792bb1c9613ed340265e1463e6"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTQ1MjE4", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-546545218", "createdAt": "2020-12-07T21:19:51Z", "commit": {"oid": "a8a0d12be89efd792bb1c9613ed340265e1463e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMToxOTo1MlrOIA7LwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMToxOTo1MlrOIA7LwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzg0MDU3Nw==", "bodyText": "Don't we want exception here?", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537840577", "createdAt": "2020-12-07T21:19:52Z", "author": {"login": "rymsha"}, "path": "modules/core/core-project/src/main/java/com/enonic/xp/core/impl/project/ProjectServiceImpl.java", "diffHunk": "@@ -435,6 +504,14 @@ private BufferedImage scaleWidth( final BufferedImage source, final int sizeInt\n         return ImageHelper.getScaledInstance( source, newWidth.intValue(), newHeight.intValue() );\n     }\n \n+    private Project getProject( final Projects projects, final ProjectName name )\n+    {\n+        return projects.stream().\n+            filter( project -> project.getName().equals( name ) ).\n+            findFirst().\n+            orElse( null );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a0d12be89efd792bb1c9613ed340265e1463e6"}, "originalPosition": 102}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTQ3NjU2", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-546547656", "createdAt": "2020-12-07T21:23:27Z", "commit": {"oid": "a8a0d12be89efd792bb1c9613ed340265e1463e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMToyMzoyOFrOIA7UWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMToyMzoyOFrOIA7UWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzg0Mjc3Nw==", "bodyText": "Don't use guava when not necessarily, please. Unmodifiable list works here just fine", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537842777", "createdAt": "2020-12-07T21:23:28Z", "author": {"login": "rymsha"}, "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/rest/resource/project/json/ProjectGraphJson.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package com.enonic.xp.admin.impl.rest.resource.project.json;\n+\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+import com.google.common.collect.ImmutableList;\n+\n+import com.enonic.xp.project.ProjectGraph;\n+\n+public final class ProjectGraphJson\n+{\n+    private final List<ProjectGraphEntryJson> entries;\n+\n+    public ProjectGraphJson( final ProjectGraph projectGraph )\n+    {\n+        this.entries = projectGraph != null ? ImmutableList.copyOf( projectGraph.stream().", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a0d12be89efd792bb1c9613ed340265e1463e6"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTQ4NDEw", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-546548410", "createdAt": "2020-12-07T21:24:32Z", "commit": {"oid": "a8a0d12be89efd792bb1c9613ed340265e1463e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMToyNDozMlrOIA7W5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QyMToyNDozMlrOIA7W5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzg0MzQyOA==", "bodyText": "Never used? Not needed.", "url": "https://github.com/enonic/xp/pull/8527#discussion_r537843428", "createdAt": "2020-12-07T21:24:32Z", "author": {"login": "rymsha"}, "path": "modules/core/core-api/src/main/java/com/enonic/xp/project/ProjectGraph.java", "diffHunk": "@@ -0,0 +1,42 @@\n+package com.enonic.xp.project;\n+\n+import com.google.common.collect.ImmutableList;\n+\n+import com.enonic.xp.annotation.PublicApi;\n+import com.enonic.xp.support.AbstractImmutableEntityList;\n+\n+@PublicApi\n+public final class ProjectGraph\n+    extends AbstractImmutableEntityList<ProjectGraphEntry>\n+{\n+    private ProjectGraph( final Builder builder )\n+    {\n+        super( builder.projects.build() );\n+    }\n+\n+    public static ProjectGraph empty()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a0d12be89efd792bb1c9613ed340265e1463e6"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "166362b4d47aa64c5b9312be1b0cfd80bd517082", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/166362b4d47aa64c5b9312be1b0cfd80bd517082", "committedDate": "2020-12-08T09:21:03Z", "message": "Return all projects layers in /list API #8413"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8a0d12be89efd792bb1c9613ed340265e1463e6", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/a8a0d12be89efd792bb1c9613ed340265e1463e6", "committedDate": "2020-12-07T18:51:54Z", "message": "Return all projects layers in /list API #8413"}, "afterCommit": {"oid": "166362b4d47aa64c5b9312be1b0cfd80bd517082", "author": {"user": {"login": "vbradnitski", "name": "Bradnitski Viachaslau"}}, "url": "https://github.com/enonic/xp/commit/166362b4d47aa64c5b9312be1b0cfd80bd517082", "committedDate": "2020-12-08T09:21:03Z", "message": "Return all projects layers in /list API #8413"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2OTUyMjQz", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-546952243", "createdAt": "2020-12-08T09:37:01Z", "commit": {"oid": "166362b4d47aa64c5b9312be1b0cfd80bd517082"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MTg0NjM4", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-547184638", "createdAt": "2020-12-08T12:25:19Z", "commit": {"oid": "166362b4d47aa64c5b9312be1b0cfd80bd517082"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMjoyNToyMFrOIBXu9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMjoyNToyMFrOIBXu9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODMwODM0Mg==", "bodyText": "I suggest to use tree instead off getTree, because get presents in the HTTP method", "url": "https://github.com/enonic/xp/pull/8527#discussion_r538308342", "createdAt": "2020-12-08T12:25:20Z", "author": {"login": "anatol-sialitski"}, "path": "modules/admin/admin-impl/src/main/java/com/enonic/xp/admin/impl/rest/resource/project/ProjectResource.java", "diffHunk": "@@ -184,6 +186,14 @@ public ProjectJson get( final @QueryParam(\"name\") String projectNameValue )\n         return doCreateJson( this.projectService.get( projectName ) );\n     }\n \n+    @GET\n+    @Path(\"getTree\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "166362b4d47aa64c5b9312be1b0cfd80bd517082"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MTk0Nzk1", "url": "https://github.com/enonic/xp/pull/8527#pullrequestreview-547194795", "createdAt": "2020-12-08T12:39:45Z", "commit": {"oid": "166362b4d47aa64c5b9312be1b0cfd80bd517082"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4367, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}