{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwODA3NTAx", "number": 3279, "title": "TRUNK-5813:  Replace all ExpectedException Rules and the @Test(expected..)", "bodyText": "\u2026d..)\n\n\n\nDescription of what I changed\n\n\nIssue I worked on\n\n\n\n\nsee https://issues.openmrs.org/browse/TRUNK-5813\nChecklist: I completed these to help reviewers :)\n\n\n\n\n My IDE is configured to follow the code style of this project.\nNo? Unsure? -> configure your IDE, format the code and add the changes with git add . && git commit --amend\n\n\n I have added tests to cover my changes. (If you refactored\nexisting code that was well tested you do not have to add tests)\nNo? -> write tests and add them to this commit git add . && git commit --amend\n\n\n I ran mvn clean package right before creating this pull request and\nadded all formatting changes to my commit.\nNo? -> execute above command\n\n\n All new and existing tests passed.\nNo? -> figure out why and add the fix to your commit. It is your responsibility to make sure your code works.\n\n\n My pull request is based on the latest changes of the master branch.\nNo? Unsure? -> execute command git pull --rebase upstream master", "createdAt": "2020-06-26T22:12:50Z", "url": "https://github.com/openmrs/openmrs-core/pull/3279", "merged": true, "mergeCommit": {"oid": "2d496e65424b809e894d19957941c6214449c316"}, "closed": true, "closedAt": "2020-07-05T18:02:51Z", "author": {"login": "achilep"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcva68NAFqTQzODY3NTk4OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyAk2qgFqTQ0MjY5NjAxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4Njc1OTg5", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-438675989", "createdAt": "2020-06-27T06:07:47Z", "commit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "state": "APPROVED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QxNjo0NzoxNFrOGp25qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yN1QxNjo1NToxOVrOGp28mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU0NDI5OA==", "bodyText": "you have a few small whitespace errors. we add a whitespace after the ,.\nso APIException exception = assertThrows(APIException.class ,()-> duration.addToDate(startDate, frequency));\nshould be APIException exception = assertThrows(APIException.class, ()-> duration.addToDate(startDate, frequency));\nand a whitespace is missing after the comma in ,is", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r446544298", "createdAt": "2020-06-27T16:47:14Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/DurationTest.java", "diffHunk": "@@ -98,18 +96,17 @@ public void addToDate_shouldFailWhenUnitIsRecurringAndFrequencyIsUnknown() throw\n \t\tDate startDate = createDateTime(\"2014-07-01 10:00:00\");\n \t\tOrderFrequency frequency = null;\n \t\t\n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(Matchers.is(Context.getMessageSourceService().getMessage(\"Duration.error.frequency.null\")));\n-\t\tduration.addToDate(startDate, frequency);\n+\t\tAPIException exception = assertThrows(APIException.class ,()-> duration.addToDate(startDate, frequency));\n+\t\tassertThat(exception.getMessage(),is(Context.getMessageSourceService().getMessage(\"Duration.error.frequency.null\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU0NDM3NQ==", "bodyText": "you might have this issue in a few lamdbas you added like () ->duration should be  () -> duration", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r446544375", "createdAt": "2020-06-27T16:48:04Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/DurationTest.java", "diffHunk": "@@ -98,18 +96,17 @@ public void addToDate_shouldFailWhenUnitIsRecurringAndFrequencyIsUnknown() throw\n \t\tDate startDate = createDateTime(\"2014-07-01 10:00:00\");\n \t\tOrderFrequency frequency = null;\n \t\t\n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(Matchers.is(Context.getMessageSourceService().getMessage(\"Duration.error.frequency.null\")));\n-\t\tduration.addToDate(startDate, frequency);\n+\t\tAPIException exception = assertThrows(APIException.class ,()-> duration.addToDate(startDate, frequency));\n+\t\tassertThat(exception.getMessage(),is(Context.getMessageSourceService().getMessage(\"Duration.error.frequency.null\")));\n \t}\n \t\n \t@Test\n \tpublic void addToDate_shouldFailWhenUnitIsUnknown() throws ParseException {\n \t\tDuration duration = new Duration(3, \"J\");\n \t\t\n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(Matchers.is(Context.getMessageSourceService().getMessage(\"Duration.unknown.code\", new Object[] { \"J\" }, null)));\n-\t\tduration.addToDate(createDateTime(\"2014-07-01 10:00:00\"), null);\n+\t\t\n+\t\tAPIException exception = assertThrows(APIException.class,() ->duration.addToDate(createDateTime(\"2014-07-01 10:00:00\"), null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU0NDQ2OA==", "bodyText": ", ()-> order should be , () -> order", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r446544468", "createdAt": "2020-06-27T16:49:30Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/OrderTest.java", "diffHunk": "@@ -521,10 +520,8 @@ public void isDiscontinued_shouldFailIfDateStoppedIsAfterAutoExpireDate() throws\n \t\torder.setDateActivated(DateUtils.parseDate(\"2014-11-01 11:11:10\", DATE_FORMAT));\n \t\torder.setAutoExpireDate(DateUtils.parseDate(\"2014-11-01 11:11:11\", DATE_FORMAT));\n \t\tOrderUtilTest.setDateStopped(order, DateUtils.parseDate(\"2014-11-01 11:11:12\", DATE_FORMAT));\n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(\n-\t\t    Context.getMessageSourceService().getMessage(\"Order.error.invalidDateStoppedAndAutoExpireDate\"));\n-\t\torder.isDiscontinued(DateUtils.parseDate(\"2014-11-01 11:11:13\", DATE_FORMAT));\n+\t\tAPIException exception = assertThrows(APIException.class, ()-> order.isDiscontinued(DateUtils.parseDate(\"2014-11-01 11:11:13\", DATE_FORMAT)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU0NDU5Mg==", "bodyText": "please remove this import import static org.openmrs.api.context.Context.getConceptService;", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r446544592", "createdAt": "2020-06-27T16:50:51Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/aop/AuthorizationAdviceTest.java", "diffHunk": "@@ -16,6 +16,8 @@\n import static org.hamcrest.MatcherAssert.assertThat;\n import static org.hamcrest.Matchers.containsInAnyOrder;\n import static org.hamcrest.Matchers.empty;\n+import static org.junit.Assert.assertThrows;\n+import static org.openmrs.api.context.Context.getConceptService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU0NTA1MQ==", "bodyText": "When you hardcode the locale like \"\\\"en_GB\\\" in an assertion it might be that the test fails on another machine that has a different locale set.\nAbove we get it using LocaleUtility.getDefaultLocale().toString(). One option would be to use that in the assertion and string concatenate it with the rest of the message.\nI think we should not have that much logic in this assertion. I would rather only partially match and thus use a matcher like containsString or startsWith.", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r446545051", "createdAt": "2020-06-27T16:55:19Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/AdministrationServiceTest.java", "diffHunk": "@@ -443,23 +440,21 @@ public void saveGlobalProperty_shouldFailIfGivenAllowedLocaleListDoesNotContainD\n \t\tassertThat(\"localeList contains default locale but should not for this test case\", localeList,\n \t\t\tnot(containsString(LocaleUtility.getDefaultLocale().toString())));\n \n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(\"can not be removed from allowed locales list because it is the default locale\");\n \t\t\n-\t\tadminService.saveGlobalProperty(\n-\t\t\tnew GlobalProperty(OpenmrsConstants.GLOBAL_PROPERTY_LOCALE_ALLOWED_LIST, localeList));\n+\t\tAPIException exception = assertThrows(APIException.class , () -> adminService.saveGlobalProperty(\n+\t\t\tnew GlobalProperty(OpenmrsConstants.GLOBAL_PROPERTY_LOCALE_ALLOWED_LIST, localeList)));\n+\t\tassertThat(exception.getMessage(),is(\"\\\"en_GB\\\" can not be removed from allowed locales list because it is the default locale\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NzExMTA2", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-438711106", "createdAt": "2020-06-27T17:03:35Z", "commit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4OTEzNzIx", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-438913721", "createdAt": "2020-06-29T06:21:58Z", "commit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwNjoyMTo1OVrOGqGSig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwNjoyNzoyMlrOGqGZ_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc5NjQyNg==", "bodyText": "please check all the lambdas for whitespaces, so they are in this format assertThrows(APIException.class, () -> yyy", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r446796426", "createdAt": "2020-06-29T06:21:59Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/ConceptServiceTest.java", "diffHunk": "@@ -616,9 +613,9 @@ public void getConceptByMapping_shouldNotReturnRetiredConcept() {\n \t\t\n \t}\n \t\n-\t@Test(expected = APIException.class)\n+\t@Test\n \tpublic void getConceptByMapping_shouldThrowExceptionIfTwoConceptsHaveSameMapping() {\n-\t\tconceptService.getConceptByMapping(\"127689\", \"Some Standardized Terminology\");\n+\t\tassertThrows(APIException.class, ()-> conceptService.getConceptByMapping(\"127689\", \"Some Standardized Terminology\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc5Njc3NA==", "bodyText": "no whitespace before the ,", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r446796774", "createdAt": "2020-06-29T06:22:57Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/ConceptServiceTest.java", "diffHunk": "@@ -1143,9 +1140,8 @@ public void getConceptSourceByUniqueId_shouldReturnNullIfGivenAnEmptyString() {\n \t@Test\n \tpublic void getConceptSourceByUniqueId_shouldFailIfGivenNull() {\n \n-\t\texpectedException.expect(IllegalArgumentException.class);\n-\t\texpectedException.expectMessage(\"uniqueId is required\");\n-\t\tconceptService.getConceptSourceByUniqueId(null);\n+\t\tIllegalArgumentException exception = assertThrows(IllegalArgumentException.class , () -> conceptService.getConceptSourceByUniqueId(null));\n+\t\tassertThat(exception.getMessage() , is(\"uniqueId is required\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc5ODMzNQ==", "bodyText": "I assume\nContext.getEncounterService().getEncounter(encounter.getId())\nthrows an exception. So we do not need to assert that the return value is null since it will not return anything.\nYou can thus remove the commented line and the call to assertNull in the assertThrows", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r446798335", "createdAt": "2020-06-29T06:27:22Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/EncounterServiceTest.java", "diffHunk": "@@ -2528,7 +2531,8 @@ public void getEncounter_shouldFailIfUserIsNotAllowedToViewEncounterByGivenId()\n \t\t// have to add privilege in order to be able to call getEncounter(Integer) method\n \t\tContext.addProxyPrivilege(PrivilegeConstants.GET_ENCOUNTERS);\n \t\t\n-\t\tassertNull(Context.getEncounterService().getEncounter(encounter.getId()));\n+\t\t//assertNull(Context.getEncounterService().getEncounter(encounter.getId()));\n+\t\tassertThrows(APIException.class,() -> assertNull(Context.getEncounterService().getEncounter(encounter.getId())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 202}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMjgwODIy", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-440280822", "createdAt": "2020-06-30T18:28:50Z", "commit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxODoyODo1MFrOGrJTog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxODozMDo1OVrOGrJYXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg5NDQzNA==", "bodyText": "You need to remove the line validator.validate(concept, errors);\nSince it is failing the test at https://travis-ci.org/github/openmrs/openmrs-core/jobs/702528088#L2893\nI made the mistake some time back and added this line e4cb346#diff-1f3fc20c6e60d3bf5fcdda09c14456c2R374\nThe test is making sure that if you validate a concept with a duplicate name the validation fails. It will throw a DuplicateConceptNameException which it does on the call to validate.\nThe call validator.validate(concept, errors); throws this exception but since its not in the assertThrows it fails the test. The () -> validator.validate(anotherConcept, errors) in your assertThrows is testing exactly that and is enough for us to make sure validate works as expected in this case.", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r447894434", "createdAt": "2020-06-30T18:28:50Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/validator/ConceptValidatorTest.java", "diffHunk": "@@ -368,11 +357,9 @@ public void validate_shouldFailIfThereIsADuplicateUnretiredConceptNameInTheSameL\n \t\tanotherConcept.getFullySpecifiedName(en).setName(duplicateName);\n \t\tErrors errors = new BindException(anotherConcept, \"concept\");\n \t\t\n-\t\texpectedException.expect(DuplicateConceptNameException.class);\n-\t\texpectedException\n-\t\t        .expectMessage(\"'\" + duplicateName + \"' is a duplicate name in locale '\" + en + \"'\");\n \t\tvalidator.validate(concept, errors);\n-\t\tvalidator.validate(anotherConcept, errors);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg5NTUwOQ==", "bodyText": "please check the whitespaces something seems to have gone wrong in your changes.\nassertThrows (IllegalArgumentException.class ,() -> validator.validate(null, errors));\nshould be\nassertThrows(IllegalArgumentException.class, () -> validator.validate(null, errors));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r447895509", "createdAt": "2020-06-30T18:30:43Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/validator/ConditionValidatorTest.java", "diffHunk": "@@ -51,16 +51,15 @@ public void setUp(){\n \n \t@Test\n \tpublic void shouldFailIfGivenNull(){\n-\t\texpectedException.expect(IllegalArgumentException.class);\n-\t\texpectedException.expectMessage(NULL_ERROR_MESSAGE);\n-\t\tvalidator.validate(null, errors);\n+\t\tIllegalArgumentException exception = assertThrows (IllegalArgumentException.class ,() -> validator.validate(null, errors));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg5NTY0NA==", "bodyText": "same here", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r447895644", "createdAt": "2020-06-30T18:30:59Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/validator/ConditionValidatorTest.java", "diffHunk": "@@ -51,16 +51,15 @@ public void setUp(){\n \n \t@Test\n \tpublic void shouldFailIfGivenNull(){\n-\t\texpectedException.expect(IllegalArgumentException.class);\n-\t\texpectedException.expectMessage(NULL_ERROR_MESSAGE);\n-\t\tvalidator.validate(null, errors);\n+\t\tIllegalArgumentException exception = assertThrows (IllegalArgumentException.class ,() -> validator.validate(null, errors));\n+\t\tassertThat(exception.getMessage(),is(NULL_ERROR_MESSAGE));\n \t}\n \n \t@Test\n \tpublic void shouldFailIfGivenInstanceOfClassOtherThanCondition(){\n-\t\texpectedException.expect(IllegalArgumentException.class);\n-\t\texpectedException.expectMessage(INCOMPATIBLE_ERROR_MESSAGE);\n-\t\tvalidator.validate(new Cohort(), errors);\n+\t\n+\t\tIllegalArgumentException exception = assertThrows (IllegalArgumentException.class ,() -> validator.validate(new Cohort(), errors));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744"}, "originalPosition": 58}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b1ae519770454ee8b68fad112f8b8bbedd0e744", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/2b1ae519770454ee8b68fad112f8b8bbedd0e744", "committedDate": "2020-06-26T22:09:23Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/34d90b56f8adaebe4eb7c84b3f70febc045fe148", "committedDate": "2020-06-30T23:35:19Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNTYxNTg3", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-440561587", "createdAt": "2020-07-01T05:47:13Z", "commit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNTo0NzoxM1rOGrXmMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNTo0NzoxM1rOGrXmMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEyODU2Mw==", "bodyText": "@achilep these above look like formatting changes", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448128563", "createdAt": "2020-07-01T05:47:13Z", "author": {"login": "gitcliff"}, "path": "api/src/test/java/org/openmrs/api/EncounterServiceTest.java", "diffHunk": "@@ -50,29 +73,6 @@\n import org.openmrs.util.OpenmrsConstants;\n import org.openmrs.util.PrivilegeConstants;\n \n-import java.lang.reflect.Field;\n-import java.text.DateFormat;\n-import java.text.ParseException;\n-import java.text.SimpleDateFormat;\n-import java.util.ArrayList;\n-import java.util.Arrays;\n-import java.util.Calendar;\n-import java.util.Collections;\n-import java.util.Date;\n-import java.util.HashMap;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.Set;\n-import java.util.TreeSet;\n-\n-import static org.junit.Assert.assertEquals;\n-import static org.junit.Assert.assertFalse;\n-import static org.junit.Assert.assertNotNull;\n-import static org.junit.Assert.assertNotSame;\n-import static org.junit.Assert.assertNull;\n-import static org.junit.Assert.assertSame;\n-import static org.junit.Assert.assertTrue;\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNTgwODc5", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-440580879", "createdAt": "2020-07-01T06:33:55Z", "commit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNjozMzo1NlrOGrYjqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwNjo1Mzo0MlrOGrZElg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NDI5Ng==", "bodyText": "should be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows(APIException.class , () -> allergies.confirmNoKnownAllergies());\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> allergies.confirmNoKnownAllergies());\n          \n      \n    \n    \n  \n\nWe do not put whitespaces before the comma.", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448144296", "createdAt": "2020-07-01T06:33:56Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -143,16 +145,16 @@ public void shouldConfirmNoKnownAllergies(){\n \t/**\n \t * @see {@link Allergies#confirmNoKnownAllergies()}\n \t */\n-\t@Test(expected = APIException.class)\n+\t@Test\n \tpublic void shouldThrowAnErrorWhenTryingConfirmNoKnowAllergiesWhileAllergiesIsNotEmpty(){\n \t\tallergies.add(new Allergy());\n-\t\tallergies.confirmNoKnownAllergies();\n+\t\tassertThrows(APIException.class , () -> allergies.confirmNoKnownAllergies());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NDcwMg==", "bodyText": "should be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows( APIException.class, () -> allergies.add(allergy2));\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> allergies.add(allergy2));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448144702", "createdAt": "2020-07-01T06:34:58Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -162,7 +164,7 @@ public void add_shouldNotAllowDuplicateCodedAllergen(){\n \t\tallergy2.setAllergen(new Allergen(null, concept, null));\n \t\t\n \t\tallergies.add(allergy1);\n-\t\tallergies.add(allergy2);\n+\t\tassertThrows( APIException.class, () -> allergies.add(allergy2));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NTA2OQ==", "bodyText": "should be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows( APIException.class, () -> allergies.add(allergy2));\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> allergies.add(allergy2));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448145069", "createdAt": "2020-07-01T06:35:53Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -194,7 +196,7 @@ public void add_shouldNotAllowDuplicateNonCodedAllergen(){\n \t\tallergy2.setAllergen(new Allergen(null, concept, \"OTHER VALUE\"));\n \t\t\n \t\tallergies.add(allergy1);\n-\t\tallergies.add(allergy2);\n+\t\tassertThrows( APIException.class, () -> allergies.add(allergy2));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NTMzMg==", "bodyText": "should be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows(APIException.class, ()-> allergies.addAll(allergies));\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> allergies.addAll(allergies));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448145332", "createdAt": "2020-07-01T06:36:30Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -294,13 +296,13 @@ public void addAll_shouldNotAllowDuplicateCodedAllergen(){\n \t\tallergies.add(allergy1);\n \t\tallergies.add(allergy2);\n \t\t\n-\t\tallergies.addAll(allergies);\n+\t\tassertThrows(APIException.class, ()-> allergies.addAll(allergies));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 106}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NTQyOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows(APIException.class, ()-> allergies.addAll(allergies));\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> allergies.addAll(allergies));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448145428", "createdAt": "2020-07-01T06:36:44Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -311,14 +313,14 @@ public void addAll_shouldAllowNonDuplicateCodedAllergen(){\n \t\tAllergies allergies = new Allergies();\n \t\tallergies.add(allergy1);\n \t\tallergies.add(allergy2);\n-\t\t\n-\t\tallergies.addAll(allergies);\n+\n+\t\tassertThrows(APIException.class, ()-> allergies.addAll(allergies));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NTU1Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows(APIException.class, ()-> allergies.addAll(allergies));\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> allergies.addAll(allergies));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448145556", "createdAt": "2020-07-01T06:37:02Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -351,14 +353,14 @@ public void addAll_shouldAllowNonDuplicateNonCodedAllergen(){\n \t\tAllergies allergies = new Allergies();\n \t\tallergies.add(allergy1);\n \t\tallergies.add(allergy2);\n-\t\t\n-\t\tallergies.addAll(allergies);\n+\n+\t\tassertThrows(APIException.class, ()-> allergies.addAll(allergies));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 160}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NjIwNQ==", "bodyText": "You will need to look at all your assertThrows it seems that you have whitespace issues in a lot of them.\nWhats important to remember are the following\n\nno whitespace before the comma\nno whitespace after ( before the Exception\nand a lambda should look like () -> yyy", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448146205", "createdAt": "2020-07-01T06:38:26Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -351,14 +353,14 @@ public void addAll_shouldAllowNonDuplicateNonCodedAllergen(){\n \t\tAllergies allergies = new Allergies();\n \t\tallergies.add(allergy1);\n \t\tallergies.add(allergy2);\n-\t\t\n-\t\tallergies.addAll(allergies);\n+\n+\t\tassertThrows(APIException.class, ()-> allergies.addAll(allergies));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NTU1Ng=="}, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 160}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NzQ4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows(RuntimeException.class , () -> obs.setValueAsString(null));\n          \n          \n            \n            \t\tassertThrows(RuntimeException.class, () -> obs.setValueAsString(null));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448147486", "createdAt": "2020-07-01T06:41:07Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/ObsTest.java", "diffHunk": "@@ -317,19 +318,19 @@ public void isComplex_shouldReturnTrueIfTheConceptIsComplex() throws Exception {\n \t/**\n \t * @see Obs#setValueAsString(String)\n \t */\n-\t@Test(expected = RuntimeException.class)\n+\t@Test\n \tpublic void setValueAsString_shouldFailIfTheValueOfTheStringIsEmpty() throws Exception {\n \t\tObs obs = new Obs();\n-\t\tobs.setValueAsString(\"\");\n+\t\tassertThrows(RuntimeException.class, () -> obs.setValueAsString(\"\"));\n \t}\n \t\n \t/**\n \t * @see Obs#setValueAsString(String)\n \t */\n-\t@Test(expected = RuntimeException.class)\n+\t@Test\n \tpublic void setValueAsString_shouldFailIfTheValueOfTheStringIsNull() throws Exception {\n \t\tObs obs = new Obs();\n-\t\tobs.setValueAsString(null);\n+\t\tassertThrows(RuntimeException.class , () -> obs.setValueAsString(null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0ODYyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tAPIException exception = assertThrows(APIException.class, () -> order.isDiscontinued(DateUtils.parseDate(\"2014-11-01 11:11:13\", DATE_FORMAT)));\n          \n          \n            \n            \t    assertThat(exception.getMessage(), is(Context.getMessageSourceService().getMessage(\"Order.error.invalidDateStoppedAndAutoExpireDate\")));\n          \n          \n            \n            \t\tAPIException exception = assertThrows(APIException.class, () -> order.isDiscontinued(DateUtils.parseDate(\"2014-11-01 11:11:13\", DATE_FORMAT)));\n          \n          \n            \n            \t        assertThat(exception.getMessage(), is(Context.getMessageSourceService().getMessage(\"Order.error.invalidDateStoppedAndAutoExpireDate\")));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448148623", "createdAt": "2020-07-01T06:43:54Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/OrderTest.java", "diffHunk": "@@ -521,10 +520,8 @@ public void isDiscontinued_shouldFailIfDateStoppedIsAfterAutoExpireDate() throws\n \t\torder.setDateActivated(DateUtils.parseDate(\"2014-11-01 11:11:10\", DATE_FORMAT));\n \t\torder.setAutoExpireDate(DateUtils.parseDate(\"2014-11-01 11:11:11\", DATE_FORMAT));\n \t\tOrderUtilTest.setDateStopped(order, DateUtils.parseDate(\"2014-11-01 11:11:12\", DATE_FORMAT));\n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(\n-\t\t    Context.getMessageSourceService().getMessage(\"Order.error.invalidDateStoppedAndAutoExpireDate\"));\n-\t\torder.isDiscontinued(DateUtils.parseDate(\"2014-11-01 11:11:13\", DATE_FORMAT));\n+\t\tAPIException exception = assertThrows(APIException.class, () -> order.isDiscontinued(DateUtils.parseDate(\"2014-11-01 11:11:13\", DATE_FORMAT)));\n+\t    assertThat(exception.getMessage(), is(Context.getMessageSourceService().getMessage(\"Order.error.invalidDateStoppedAndAutoExpireDate\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0OTM5NQ==", "bodyText": "why did you delete the concept and the call to saveConcept?\nit seems to me that this could be the reason for the failing test at https://travis-ci.org/github/openmrs/openmrs-core/jobs/703726180#L3173", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448149395", "createdAt": "2020-07-01T06:45:47Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/aop/AuthorizationAdviceTest.java", "diffHunk": "@@ -61,7 +60,6 @@ public void before_shouldNotifyListenersAboutCheckedPrivileges() {\n \t\tlistener1.hasPrivileges.clear();\n \t\tlistener2.hasPrivileges.clear();\n \t\t\n-\t\tContext.getConceptService().saveConcept(concept);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE1MDYwMw==", "bodyText": "When you hardcode the locale like \"\\\"en_GB\\\" in an assertion it might be that the test fails on another machine that has a different locale set.\nAbove we get it using LocaleUtility.getDefaultLocale().toString(). One option would be to use that in the assertion and string concatenate it with the rest of the message.\nI think we should not have that much logic in this assertion. I would rather only partially match and thus use a matcher like containsString or startsWith to make sure that the message contains \"can not be removed from allowed locales list because it is the default locale\"", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448150603", "createdAt": "2020-07-01T06:48:42Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/AdministrationServiceTest.java", "diffHunk": "@@ -443,23 +440,21 @@ public void saveGlobalProperty_shouldFailIfGivenAllowedLocaleListDoesNotContainD\n \t\tassertThat(\"localeList contains default locale but should not for this test case\", localeList,\n \t\t\tnot(containsString(LocaleUtility.getDefaultLocale().toString())));\n \n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(\"can not be removed from allowed locales list because it is the default locale\");\n \t\t\n-\t\tadminService.saveGlobalProperty(\n-\t\t\tnew GlobalProperty(OpenmrsConstants.GLOBAL_PROPERTY_LOCALE_ALLOWED_LIST, localeList));\n+\t\tAPIException exception = assertThrows(APIException.class , () -> adminService.saveGlobalProperty(\n+\t\t\tnew GlobalProperty(OpenmrsConstants.GLOBAL_PROPERTY_LOCALE_ALLOWED_LIST, localeList)));\n+\t\tassertThat(exception.getMessage(), is(\"\\\"en_GB\\\" can not be removed from allowed locales list because it is the default locale\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE1MDk2Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tAPIException exception = assertThrows(APIException.class ,() -> adminService.saveGlobalProperty(\n          \n          \n            \n            \t\tAPIException exception = assertThrows(APIException.class, () -> adminService.saveGlobalProperty(", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448150967", "createdAt": "2020-07-01T06:49:36Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/AdministrationServiceTest.java", "diffHunk": "@@ -443,23 +440,21 @@ public void saveGlobalProperty_shouldFailIfGivenAllowedLocaleListDoesNotContainD\n \t\tassertThat(\"localeList contains default locale but should not for this test case\", localeList,\n \t\t\tnot(containsString(LocaleUtility.getDefaultLocale().toString())));\n \n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(\"can not be removed from allowed locales list because it is the default locale\");\n \t\t\n-\t\tadminService.saveGlobalProperty(\n-\t\t\tnew GlobalProperty(OpenmrsConstants.GLOBAL_PROPERTY_LOCALE_ALLOWED_LIST, localeList));\n+\t\tAPIException exception = assertThrows(APIException.class , () -> adminService.saveGlobalProperty(\n+\t\t\tnew GlobalProperty(OpenmrsConstants.GLOBAL_PROPERTY_LOCALE_ALLOWED_LIST, localeList)));\n+\t\tassertThat(exception.getMessage(), is(\"\\\"en_GB\\\" can not be removed from allowed locales list because it is the default locale\"));\n \t}\n \n \t@Test\n \tpublic void saveGlobalProperty_shouldFailIfDefaultLocaleNotInAllowedLocaleList() {\n \n \t\tLocale defaultLocale = new Locale(\"fr\");\n \n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(\"is not in allowed locales list\");\n \n-\t\tadminService.saveGlobalProperty(\n-\t\t\tnew GlobalProperty(OpenmrsConstants.GLOBAL_PROPERTY_DEFAULT_LOCALE, defaultLocale.toString()));\n+\t\tAPIException exception = assertThrows(APIException.class ,() -> adminService.saveGlobalProperty(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE1MTEyOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows(APIException.class,() -> adminService.validate(null, errors));\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> adminService.validate(null, errors));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448151129", "createdAt": "2020-07-01T06:49:57Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/AdministrationServiceTest.java", "diffHunk": "@@ -633,10 +628,10 @@ public void getSearchLocales_shouldIncludeUsersProficientLocales() {\n \t\tassertFalse(\"pl\", searchLocales.contains(new Locale(\"pl\")));\n \t}\n \t\n-\t@Test(expected = APIException.class)\n+\t@Test\n \tpublic void validate_shouldThrowThrowAPIExceptionIfTheInputIsNull() {\n \t\tBindException errors = new BindException(new Object(), \"\");\n-\t\tadminService.validate(null, errors);\n+\t\tassertThrows(APIException.class,() -> adminService.validate(null, errors));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE1MTMxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows(APIException.class,() -> conceptService.getConceptByMapping(\"127689\", \"Some Standardized Terminology\"));\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> conceptService.getConceptByMapping(\"127689\", \"Some Standardized Terminology\"));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448151317", "createdAt": "2020-07-01T06:50:24Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/ConceptServiceTest.java", "diffHunk": "@@ -616,9 +613,9 @@ public void getConceptByMapping_shouldNotReturnRetiredConcept() {\n \t\t\n \t}\n \t\n-\t@Test(expected = APIException.class)\n+\t@Test\n \tpublic void getConceptByMapping_shouldThrowExceptionIfTwoConceptsHaveSameMapping() {\n-\t\tconceptService.getConceptByMapping(\"127689\", \"Some Standardized Terminology\");\n+\t\tassertThrows(APIException.class,() -> conceptService.getConceptByMapping(\"127689\", \"Some Standardized Terminology\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE1MjAxMw==", "bodyText": "yes this formatting is correct", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448152013", "createdAt": "2020-07-01T06:52:03Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/EncounterServiceTest.java", "diffHunk": "@@ -50,29 +73,6 @@\n import org.openmrs.util.OpenmrsConstants;\n import org.openmrs.util.PrivilegeConstants;\n \n-import java.lang.reflect.Field;\n-import java.text.DateFormat;\n-import java.text.ParseException;\n-import java.text.SimpleDateFormat;\n-import java.util.ArrayList;\n-import java.util.Arrays;\n-import java.util.Calendar;\n-import java.util.Collections;\n-import java.util.Date;\n-import java.util.HashMap;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.Set;\n-import java.util.TreeSet;\n-\n-import static org.junit.Assert.assertEquals;\n-import static org.junit.Assert.assertFalse;\n-import static org.junit.Assert.assertNotNull;\n-import static org.junit.Assert.assertNotSame;\n-import static org.junit.Assert.assertNull;\n-import static org.junit.Assert.assertSame;\n-import static org.junit.Assert.assertTrue;\n-", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEyODU2Mw=="}, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE1MjI5Nw==", "bodyText": "please remove the newline", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448152297", "createdAt": "2020-07-01T06:52:40Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/EncounterServiceTest.java", "diffHunk": "@@ -1679,9 +1680,10 @@ public void getEncountersByPatient_shouldIncludeVoidedEncountersInTheReturnedLis\n \t/**\n \t * @see EncounterService#getEncountersByPatient(String,boolean)\n \t */\n-\t@Test(expected = IllegalArgumentException.class)\n+\t@Test\n \tpublic void getEncountersByPatient_shouldThrowErrorIfGivenNullParameter() {\n-\t\tContext.getEncounterService().getEncountersByPatient(null, false);\n+\t\tassertThrows(IllegalArgumentException.class, () -> Context.getEncounterService().getEncountersByPatient(null, false));\n+\t\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 142}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE1MjcyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows( EncounterTypeLockedException.class, () -> encounterService.retireEncounterType(encounterType, \"reason\"));\n          \n          \n            \n            \t\tassertThrows(EncounterTypeLockedException.class, () -> encounterService.retireEncounterType(encounterType, \"reason\"));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448152726", "createdAt": "2020-07-01T06:53:42Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/EncounterServiceTest.java", "diffHunk": "@@ -2843,13 +2847,13 @@ public void retireEncounterType_shouldThrowErrorWhenTryingToRetireEncounterTypeW\n \t\tEncounterType encounterType = Context.getEncounterService().getEncounterType(1);\n \t\tAssert.assertNotNull(encounterType);\n \t\t\n-\t\tencounterService.retireEncounterType(encounterType, \"reason\");\n+\t\tassertThrows( EncounterTypeLockedException.class, () -> encounterService.retireEncounterType(encounterType, \"reason\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148"}, "originalPosition": 331}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "34d90b56f8adaebe4eb7c84b3f70febc045fe148", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/34d90b56f8adaebe4eb7c84b3f70febc045fe148", "committedDate": "2020-06-30T23:35:19Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "0586c206fb60d6b454c852377b14422d2901d650", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/0586c206fb60d6b454c852377b14422d2901d650", "committedDate": "2020-07-01T22:32:10Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMjQ4MjEx", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-441248211", "createdAt": "2020-07-01T23:02:47Z", "commit": {"oid": "0586c206fb60d6b454c852377b14422d2901d650"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMzowMjo0N1rOGr4AAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMzowMjo0N1rOGr4AAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY1OTQ1OQ==", "bodyText": "please @teleivo  this classs is failling because of this two expression:\nmessageSourceService.getMessage(messageKey)) does not return messageKey when it is call .\n @Mock\nprivate MessageSourceService messageSourceService;\n\n\nwhen(messageSourceService.getMessage(messageKey)).thenReturn(messageKey);", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r448659459", "createdAt": "2020-07-01T23:02:47Z", "author": {"login": "achilep"}, "path": "api/src/test/java/org/openmrs/module/ModuleFileParserUnitTest.java", "diffHunk": "@@ -67,9 +67,7 @@\n \n \tprivate static DocumentBuilder documentBuilder;\n \n-\t@Rule\n-\tpublic ExpectedException expectedException = ExpectedException.none();\n-\n+\t\n \t@Rule\n \tpublic TemporaryFolder temporaryFolder = new TemporaryFolder();\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0586c206fb60d6b454c852377b14422d2901d650"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxOTI1NTUy", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-441925552", "createdAt": "2020-07-02T18:18:55Z", "commit": {"oid": "0586c206fb60d6b454c852377b14422d2901d650"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxODoxODo1NVrOGsYlZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxODoxODo1NVrOGsYlZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE5MzMxNw==", "bodyText": "this is the problem :)\nwhenGettingMessageFromMessageSourceServiceWithKeyReturnSameKey sets up the mock. if you look at what it does its basically\n\tprivate void whenGettingMessageFromMessageSourceServiceWithKeyReturnSameKey(String messageKey) {\n\t\twhen(messageSourceService.getMessage(messageKey)).thenReturn(messageKey);\n\t}\nThe messageKey like \"Module.error.invalidFileExtension will actually be passed to the getMessage in the implementation, which is why we are using it inside the Mockito when and just to make it simple in our assertion we also use it in setting up the return value of the mock thenReturn.\nSince you changed the messageKey the mock is never called with \"Module.error.invalidFileExtension Module: unknownmodule.jar\" in the implementation and so it returns null (which is the default) :)\nSo what you need to do is leave the messageKey values as they were before your changes. Then in the assertion use assertThat(exception.getMessage(), startsWith(messageKey)); (why see my comment before) and the tests will pass.", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449193317", "createdAt": "2020-07-02T18:18:55Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/module/ModuleFileParserUnitTest.java", "diffHunk": "@@ -166,31 +160,28 @@ public void parse_shouldFailIfModuleFileIsNull() {\n \t\tString messageKey = \"Module.error.fileCannotBeNull\";\n \t\twhenGettingMessageFromMessageSourceServiceWithKeyReturnSameKey(messageKey);\n \n-\t\texpectModuleExceptionWithMessage(messageKey);\n-\n-\t\tparser.parse((File) null);\n+\t\tModuleException exception =assertThrows(ModuleException.class, () -> parser.parse((File) null));\n+\t\tassertThat(exception.getMessage(), is(messageKey));\n \t}\n \n \t@Test\n \tpublic void parse_shouldFailIfModuleFileHasInvalidExtension() {\n \n-\t\tString messageKey = \"Module.error.invalidFileExtension\";\n+\t\tString messageKey = \"Module.error.invalidFileExtension Module: unknownmodule.jar\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0586c206fb60d6b454c852377b14422d2901d650"}, "originalPosition": 82}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0586c206fb60d6b454c852377b14422d2901d650", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/0586c206fb60d6b454c852377b14422d2901d650", "committedDate": "2020-07-01T22:32:10Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "dee61becdfe9742b2d75769f27a7a53464daab9c", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/dee61becdfe9742b2d75769f27a7a53464daab9c", "committedDate": "2020-07-02T19:29:15Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dee61becdfe9742b2d75769f27a7a53464daab9c", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/dee61becdfe9742b2d75769f27a7a53464daab9c", "committedDate": "2020-07-02T19:29:15Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "965dc5b4f3b057cf17a60a4a4b01ee4dc9d32977", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/965dc5b4f3b057cf17a60a4a4b01ee4dc9d32977", "committedDate": "2020-07-02T20:13:28Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "965dc5b4f3b057cf17a60a4a4b01ee4dc9d32977", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/965dc5b4f3b057cf17a60a4a4b01ee4dc9d32977", "committedDate": "2020-07-02T20:13:28Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/2539973a8c83e30965399288b404dd75c620913e", "committedDate": "2020-07-03T06:35:25Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNDIwMjcx", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-442420271", "createdAt": "2020-07-03T13:39:59Z", "commit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QxMzozOTo1OVrOGswvhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQwMzo0NToyMlrOGs5qLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU4OTEyNA==", "bodyText": "I think this line should not be removed", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449589124", "createdAt": "2020-07-03T13:39:59Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -330,15 +332,13 @@ public void addAll_shouldNotAllowDuplicateNonCodedAllergen(){\n \t\t\n \t\tAllergies allergies = new Allergies();\n \t\tallergies.add(allergy1);\n-\t\tallergies.add(allergy2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 139}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU4OTY2OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows(APIException.class, () -> allergies.add(allergy2));\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> allergies.addAll(allergies));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449589668", "createdAt": "2020-07-03T13:41:12Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -330,15 +332,13 @@ public void addAll_shouldNotAllowDuplicateNonCodedAllergen(){\n \t\t\n \t\tAllergies allergies = new Allergies();\n \t\tallergies.add(allergy1);\n-\t\tallergies.add(allergy2);\n-\t\t\n-\t\tallergies.addAll(allergies);\n+\t\tassertThrows(APIException.class, () -> allergies.add(allergy2));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 142}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU4OTgxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows(APIException.class, ()-> allergies.addAll(0, allergies));\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> allergies.addAll(0, allergies));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449589817", "createdAt": "2020-07-03T13:41:33Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -369,14 +369,14 @@ public void addAll2_shouldNotAllowDuplicateCodedAllergen(){\n \t\tAllergies allergies = new Allergies();\n \t\tallergies.add(allergy1);\n \t\tallergies.add(allergy2);\n-\t\t\n-\t\tallergies.addAll(0, allergies);\n+\n+\t\tassertThrows(APIException.class, ()-> allergies.addAll(0, allergies));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 178}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU4OTg4NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThrows(APIException.class, ()-> allergies.addAll(0, allergies));\n          \n          \n            \n            \t\tassertThrows(APIException.class, () -> allergies.addAll(0, allergies));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449589885", "createdAt": "2020-07-03T13:41:44Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -387,14 +387,14 @@ public void addAll2_shouldAllowNonDuplicateCodedAllergen(){\n \t\tAllergies allergies = new Allergies();\n \t\tallergies.add(allergy1);\n \t\tallergies.add(allergy2);\n-\t\t\n-\t\tallergies.addAll(0, allergies);\n+\n+\t\tassertThrows(APIException.class, ()-> allergies.addAll(0, allergies));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 196}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczMzYxNg==", "bodyText": "The last statement in the tests testing exceptions with @Test(expected = xxx) should be the ones throwing the exception. It can happen that they are not throwing an exception and that this was hidden from us by a statement before that was throwing the exception. If that is the case assertThrows should now highlight such cases.", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449733616", "createdAt": "2020-07-04T03:18:21Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -330,15 +332,13 @@ public void addAll_shouldNotAllowDuplicateNonCodedAllergen(){\n \t\t\n \t\tAllergies allergies = new Allergies();\n \t\tallergies.add(allergy1);\n-\t\tallergies.add(allergy2);\n-\t\t\n-\t\tallergies.addAll(allergies);\n+\t\tassertThrows(APIException.class, () -> allergies.add(allergy2));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU4OTY2OA=="}, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 142}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczMzk0Nw==", "bodyText": "Please check again the rest of the lambdas. All the lambdas should look like , () ->", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449733947", "createdAt": "2020-07-04T03:24:09Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -387,14 +387,14 @@ public void addAll2_shouldAllowNonDuplicateCodedAllergen(){\n \t\tAllergies allergies = new Allergies();\n \t\tallergies.add(allergy1);\n \t\tallergies.add(allergy2);\n-\t\t\n-\t\tallergies.addAll(0, allergies);\n+\n+\t\tassertThrows(APIException.class, ()-> allergies.addAll(0, allergies));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU4OTg4NQ=="}, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 196}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDE1OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tassertThat(exception.getMessage(), containsString(\" can not be removed from allowed locales list because it is the default locale\"));\n          \n          \n            \n            \t\tassertThat(exception.getMessage(), containsString(\"can not be removed from allowed locales list because it is the default locale\"));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734159", "createdAt": "2020-07-04T03:27:32Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/AdministrationServiceTest.java", "diffHunk": "@@ -443,23 +439,21 @@ public void saveGlobalProperty_shouldFailIfGivenAllowedLocaleListDoesNotContainD\n \t\tassertThat(\"localeList contains default locale but should not for this test case\", localeList,\n \t\t\tnot(containsString(LocaleUtility.getDefaultLocale().toString())));\n \n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(\"can not be removed from allowed locales list because it is the default locale\");\n \t\t\n-\t\tadminService.saveGlobalProperty(\n-\t\t\tnew GlobalProperty(OpenmrsConstants.GLOBAL_PROPERTY_LOCALE_ALLOWED_LIST, localeList));\n+\t\tAPIException exception = assertThrows(APIException.class , () -> adminService.saveGlobalProperty(\n+\t\t\tnew GlobalProperty(OpenmrsConstants.GLOBAL_PROPERTY_LOCALE_ALLOWED_LIST, localeList)));\n+\t\tassertThat(exception.getMessage(), containsString(\" can not be removed from allowed locales list because it is the default locale\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDQ4Nw==", "bodyText": "remove newline", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734487", "createdAt": "2020-07-04T03:32:52Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/EncounterServiceTest.java", "diffHunk": "@@ -2595,13 +2597,14 @@ public void voidEncounter_shouldFailfIfUserIsNotSupposedToEditEncountersOfTypeOf\n \t\t// have to add privilege in order to be able to call voidEncounter(Encounter,String) method\n \t\tContext.addProxyPrivilege(PrivilegeConstants.EDIT_ENCOUNTERS);\n \t\t\n-\t\tContext.getEncounterService().voidEncounter(encounter, \"test\");\n+\t\tassertThrows(APIException.class, () -> Context.getEncounterService().voidEncounter(encounter, \"test\"));\n+\t\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 235}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDU3MQ==", "bodyText": "remove newline", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734571", "createdAt": "2020-07-04T03:34:41Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/ObsServiceTest.java", "diffHunk": "@@ -82,9 +81,7 @@\n \t@Autowired\n \tprivate ObsService obsService;\n \n-\t@Rule\n-\tpublic ExpectedException expectedException = ExpectedException.none();\n-\n+\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDU5MA==", "bodyText": "tab missing", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734590", "createdAt": "2020-07-04T03:34:55Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/ObsServiceTest.java", "diffHunk": "@@ -105,10 +102,9 @@ public void shouldGetRevisedObs() {\n \n \t@Test\n \tpublic void shouldReturnAPIExceptionWhenObsIsNull(){\n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(Context.getMessageSourceService().getMessage(\"Obs.error.cannot.be.null\"));\n \t\tObsService os = Context.getObsService();\n-\t\tos.saveObs(null,\"Null Obs\");\n+\t\tAPIException exception = assertThrows(APIException.class, () -> os.saveObs(null,\"Null Obs\"));\n+        assertThat(exception.getMessage(), is(Context.getMessageSourceService().getMessage(\"Obs.error.cannot.be.null\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDY4Nw==", "bodyText": "remove newline", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734687", "createdAt": "2020-07-04T03:36:26Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/ObsServiceTest.java", "diffHunk": "@@ -1472,13 +1468,14 @@ public void unvoidObs_shouldUnsetVoidedBitOnGivenObs() {\n \t/**\n \t * @see ObsService#voidObs(Obs,String)\n \t */\n-\t@Test(expected = IllegalArgumentException.class)\n+\t@Test\n \tpublic void voidObs_shouldFailIfReasonParameterIsEmpty() {\n \t\tObsService obsService = Context.getObsService();\n \t\t\n \t\tObs obs = obsService.getObs(7);\n+\n+\t\tassertThrows(IllegalArgumentException.class, () -> obsService.voidObs(obs, \"\"));\n \t\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDc0Mg==", "bodyText": "use matcher containsString with \"failed to validate with reason:\" like you did in other tests", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734742", "createdAt": "2020-07-04T03:37:24Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -208,9 +205,8 @@ public void saveOrder_shouldNotSaveOrderIfOrderDoesntValidate() {\n \t\tOrder order = new Order();\n \t\torder.setPatient(null);\n \t\torder.setOrderer(null);\n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(\"failed to validate with reason:\");\n-\t\torderService.saveOrder(order, null);\n+\t\tAPIException exception = assertThrows(APIException.class, () -> orderService.saveOrder(order, null));\n+\t\tassertThat(exception.getMessage(), is(\"'Order. orderId: null patient: null concept: null care setting: null' failed to validate with reason: concept: No Concepts found - Invalid Concept Id, patient: Cannot be empty or null, encounter: Cannot be empty or null, orderer: Cannot be empty or null\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDc3Ng==", "bodyText": "tab missing", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734776", "createdAt": "2020-07-04T03:38:11Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -759,9 +753,8 @@ public void discontinueOrder_shouldFailForADiscontinuationOrder() {\n \t\tOrder discontinuationOrder = orderService.getOrder(26);\n \t\tassertEquals(Action.DISCONTINUE, discontinuationOrder.getAction());\n \t\tEncounter encounter = encounterService.getEncounter(3);\n-\t\texpectedException.expect(CannotStopDiscontinuationOrderException.class);\n-\t\texpectedException.expectMessage(mss.getMessage(\"Order.action.cannot.discontinue\"));\n-\t\torderService.discontinueOrder(discontinuationOrder, \"Test if I can discontinue this\", null, null, encounter);\n+\t\tCannotStopDiscontinuationOrderException exception = assertThrows(CannotStopDiscontinuationOrderException.class, () -> orderService.discontinueOrder(discontinuationOrder, \"Test if I can discontinue this\", null, null, encounter));\n+\t   assertThat(exception.getMessage(), is(mss.getMessage(\"Order.action.cannot.discontinue\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDgyOQ==", "bodyText": "tab missing", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734829", "createdAt": "2020-07-04T03:39:29Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -898,9 +888,8 @@ public void saveOrder_shouldFailIfConceptInPreviousOrderDoesNotMatchThisConcept(\n \t\tassertFalse(previousOrder.getConcept().equals(newConcept));\n \t\torder.setConcept(newConcept);\n \t\t\n-\t\texpectedException.expect(EditedOrderDoesNotMatchPreviousException.class);\n-\t\texpectedException.expectMessage(\"The orderable of the previous order and the new one order don't match\");\n-\t\torderService.saveOrder(order, null);\n+\t\tEditedOrderDoesNotMatchPreviousException exception = assertThrows(EditedOrderDoesNotMatchPreviousException.class, () -> orderService.saveOrder(order, null));\n+\t    assertThat(exception.getMessage(), is(\"The orderable of the previous order and the new one order don't match\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 132}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDg1Mg==", "bodyText": "tab missing", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734852", "createdAt": "2020-07-04T03:39:56Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -931,9 +919,8 @@ public void discontinueOrder_shouldFailIfDiscontinueDateIsInTheFuture() {\n \t\tOrder orderToDiscontinue = orderService.getActiveOrders(Context.getPatientService().getPatient(2), null,\n \t\t    orderService.getCareSetting(1), null).get(0);\n \t\tEncounter encounter = encounterService.getEncounter(3);\n-\t\texpectedException.expect(IllegalArgumentException.class);\n-\t\texpectedException.expectMessage(\"Discontinue date cannot be in the future\");\n-\t\torderService.discontinueOrder(orderToDiscontinue, \"Testing\", cal.getTime(), null, encounter);\n+\t\tIllegalArgumentException exception = assertThrows(IllegalArgumentException.class, () -> orderService.discontinueOrder(orderToDiscontinue, \"Testing\", cal.getTime(), null, encounter));\n+\t  assertThat(exception.getMessage(), is(\"Discontinue date cannot be in the future\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 156}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDg3Mw==", "bodyText": "same", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734873", "createdAt": "2020-07-04T03:40:02Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -991,9 +978,8 @@ public void saveOrder_shouldFailIfTheExistingDrugOrderMatchesTheConceptAndNotDru\n \t\torder.setDrug(discontinuationOrderDrug);\n \t\torder.setOrderReasonNonCoded(\"Discontinue this\");\n \t\t\n-\t\texpectedException.expect(EditedOrderDoesNotMatchPreviousException.class);\n-\t\texpectedException.expectMessage(\"The orderable of the previous order and the new one order don't match\");\n-\t\torderService.saveOrder(order, null);\n+\t\tEditedOrderDoesNotMatchPreviousException exception = assertThrows(EditedOrderDoesNotMatchPreviousException.class, () -> orderService.saveOrder(order, null));\n+\t   assertThat(exception.getMessage(), is(\"The orderable of the previous order and the new one order don't match\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 168}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNDkyNw==", "bodyText": "remove newline and indent next line since there is a tab missing", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449734927", "createdAt": "2020-07-04T03:40:35Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -1048,9 +1034,9 @@ public void discontinueOrder_shouldFailForAStoppedOrder() {\n \t\tOrder orderToDiscontinue = orderService.getOrder(1);\n \t\tEncounter encounter = encounterService.getEncounter(3);\n \t\tassertNotNull(orderToDiscontinue.getDateStopped());\n-\t\texpectedException.expect(CannotStopInactiveOrderException.class);\n-\t\texpectedException.expectMessage(mss.getMessage(\"Order.cannot.discontinue.inactive\"));\n-\t\torderService.discontinueOrder(orderToDiscontinue, Context.getConceptService().getConcept(1), null, null, encounter);\n+\t\tCannotStopInactiveOrderException exception = assertThrows(CannotStopInactiveOrderException.class, () -> orderService.discontinueOrder(orderToDiscontinue, Context.getConceptService().getConcept(1), null, null, encounter));\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 180}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNTExMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tAPIException exception = assertThrows( APIException.class, () -> orderService.saveOrder(revision, null));\n          \n          \n            \n            \t\tAPIException exception = assertThrows(APIException.class, () -> orderService.saveOrder(revision, null));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449735110", "createdAt": "2020-07-04T03:44:16Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -1695,9 +1672,8 @@ public void saveOrder_shouldFailForRevisionOrderIfAnActiveDrugOrderForTheSameCon\n \t\trevision.setEncounter(encounterService.getEncounter(6));\n \t\trevision.setOrderer(providerService.getProvider(1));\n \t\t\n-\t\texpectedException.expect(APIException.class);\n-\t\texpectedException.expectMessage(\"Order.cannot.have.more.than.one\");\n-\t\torderService.saveOrder(revision, null);\n+\t\tAPIException exception = assertThrows( APIException.class, () -> orderService.saveOrder(revision, null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 315}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNTEyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tAmbiguousOrderException exception = assertThrows( AmbiguousOrderException.class, () -> orderService.saveOrder(drugOrder, null));;\n          \n          \n            \n            \t\tAmbiguousOrderException exception = assertThrows(AmbiguousOrderException.class, () -> orderService.saveOrder(drugOrder, null));;", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449735124", "createdAt": "2020-07-04T03:44:26Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -1771,9 +1747,8 @@ public void saveOrder_shouldFailIfAnActiveDrugOrderForTheSameConceptAndCareSetti\n \t\tdrugOrder.setQuantityUnits(duplicateOrder.getQuantityUnits());\n \t\tdrugOrder.setNumRefills(duplicateOrder.getNumRefills());\n \t\t\n-\t\texpectedException.expect(AmbiguousOrderException.class);\n-\t\texpectedException.expectMessage(\"Order.cannot.have.more.than.one\");\n-\t\torderService.saveOrder(drugOrder, null);\n+\t\tAmbiguousOrderException exception = assertThrows( AmbiguousOrderException.class, () -> orderService.saveOrder(drugOrder, null));;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 327}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNTE0NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tAmbiguousOrderException exception = assertThrows( AmbiguousOrderException.class, () -> orderService.saveOrder(order, null));\n          \n          \n            \n            \t    assertThat(exception.getMessage(), is(\"Order.cannot.have.more.than.one\"));\n          \n          \n            \n            \t\tAmbiguousOrderException exception = assertThrows(AmbiguousOrderException.class, () -> orderService.saveOrder(order, null));\n          \n          \n            \n            \t        assertThat(exception.getMessage(), is(\"Order.cannot.have.more.than.one\"));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449735144", "createdAt": "2020-07-04T03:44:47Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -1899,9 +1874,8 @@ public void saveOrder_shouldThrowAmbiguousOrderExceptionIfAnActiveDrugOrderForTh\n \t\torder.setQuantityUnits(conceptService.getConcept(51));\n \t\torder.setNumRefills(2);\n \t\t\n-\t\texpectedException.expect(AmbiguousOrderException.class);\n-\t\texpectedException.expectMessage(\"Order.cannot.have.more.than.one\");\n-\t\torderService.saveOrder(order, null);\n+\t\tAmbiguousOrderException exception = assertThrows( AmbiguousOrderException.class, () -> orderService.saveOrder(order, null));\n+\t    assertThat(exception.getMessage(), is(\"Order.cannot.have.more.than.one\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 340}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNTIwMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tIllegalArgumentException exception = assertThrows ( IllegalArgumentException.class, () -> orderService.getOrders(null, null, null, false));\n          \n          \n            \n            \t\tIllegalArgumentException exception = assertThrows (IllegalArgumentException.class, () -> orderService.getOrders(null, null, null, false));", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449735202", "createdAt": "2020-07-04T03:45:11Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -2071,9 +2045,8 @@ public void getOrderTypeByName_shouldReturnTheOrderTypeThatMatchesTheSpecifiedNa\n \t */\n \t@Test\n \tpublic void getOrders_shouldFailIfPatientIsNull() {\n-\t\texpectedException.expect(IllegalArgumentException.class);\n-\t\texpectedException.expectMessage(\"Patient is required\");\n-\t\torderService.getOrders(null, null, null, false);\n+\t\tIllegalArgumentException exception = assertThrows ( IllegalArgumentException.class, () -> orderService.getOrders(null, null, null, false));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 351}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTczNTIxNQ==", "bodyText": "remove newline", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449735215", "createdAt": "2020-07-04T03:45:22Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/OrderServiceTest.java", "diffHunk": "@@ -2082,11 +2055,11 @@ public void getOrders_shouldFailIfPatientIsNull() {\n \t */\n \t@Test\n \tpublic void getOrders_shouldFailIfCareSettingIsNull() {\n-\t\texpectedException.expect(IllegalArgumentException.class);\n-\t\texpectedException.expectMessage(\"CareSetting is required\");\n-\t\torderService.getOrders(new Patient(), null, null, false);\n+\t\tIllegalArgumentException exception = assertThrows(IllegalArgumentException.class, () -> orderService.getOrders(new Patient(), null, null, false));\n+\t    assertThat(exception.getMessage(), is(\"CareSetting is required\"));\n \t}\n \t\n+\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e"}, "originalPosition": 367}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2539973a8c83e30965399288b404dd75c620913e", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/2539973a8c83e30965399288b404dd75c620913e", "committedDate": "2020-07-03T06:35:25Z", "message": "TRUNK-5813: Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "19b114ed2f99434829771ead3505c7a43e4d21ae", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/19b114ed2f99434829771ead3505c7a43e4d21ae", "committedDate": "2020-07-04T20:25:48Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19b114ed2f99434829771ead3505c7a43e4d21ae", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/19b114ed2f99434829771ead3505c7a43e4d21ae", "committedDate": "2020-07-04T20:25:48Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "480dd4c7d8fee82b3c2cb344ea79a71a8db7ac51", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/480dd4c7d8fee82b3c2cb344ea79a71a8db7ac51", "committedDate": "2020-07-04T22:53:34Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjQ1NTM1", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-442645535", "createdAt": "2020-07-05T04:05:02Z", "commit": {"oid": "480dd4c7d8fee82b3c2cb344ea79a71a8db7ac51"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjUxMTM1", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-442651135", "createdAt": "2020-07-05T06:42:46Z", "commit": {"oid": "480dd4c7d8fee82b3c2cb344ea79a71a8db7ac51"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQwNjo0Mjo0NlrOGtAIKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQwNjo0Mjo0NlrOGtAIKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MTE5NQ==", "bodyText": "i have this problem with this problem:", "url": "https://github.com/openmrs/openmrs-core/pull/3279#discussion_r449841195", "createdAt": "2020-07-05T06:42:46Z", "author": {"login": "achilep"}, "path": "api/src/test/java/org/openmrs/AllergiesTest.java", "diffHunk": "@@ -330,15 +332,14 @@ public void addAll_shouldNotAllowDuplicateNonCodedAllergen(){\n \t\t\n \t\tAllergies allergies = new Allergies();\n \t\tallergies.add(allergy1);\n-\t\tallergies.add(allergy2);\n-\t\t\n-\t\tallergies.addAll(allergies);\n+\t\tassertThrows(APIException.class, () -> allergies.add(allergy2));\n+\t\tassertThrows(APIException.class, () -> allergies.addAll(allergies));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "480dd4c7d8fee82b3c2cb344ea79a71a8db7ac51"}, "originalPosition": 143}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "480dd4c7d8fee82b3c2cb344ea79a71a8db7ac51", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/480dd4c7d8fee82b3c2cb344ea79a71a8db7ac51", "committedDate": "2020-07-04T22:53:34Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "c3c868926923c9207ddcb9ae33cb33e588ad49b3", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/c3c868926923c9207ddcb9ae33cb33e588ad49b3", "committedDate": "2020-07-05T06:54:56Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3c868926923c9207ddcb9ae33cb33e588ad49b3", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/c3c868926923c9207ddcb9ae33cb33e588ad49b3", "committedDate": "2020-07-05T06:54:56Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "fed983fa847c8091ff988bb5464a9e803ae7e268", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/fed983fa847c8091ff988bb5464a9e803ae7e268", "committedDate": "2020-07-05T07:19:18Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fed983fa847c8091ff988bb5464a9e803ae7e268", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/fed983fa847c8091ff988bb5464a9e803ae7e268", "committedDate": "2020-07-05T07:19:18Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "cd546748d74edfbe6991ba2a6a94c08d114102e6", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/cd546748d74edfbe6991ba2a6a94c08d114102e6", "committedDate": "2020-07-05T12:18:47Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd546748d74edfbe6991ba2a6a94c08d114102e6", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/cd546748d74edfbe6991ba2a6a94c08d114102e6", "committedDate": "2020-07-05T12:18:47Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "7a302d3ef3f4f7e81099f38980cff5e1c8060c15", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/7a302d3ef3f4f7e81099f38980cff5e1c8060c15", "committedDate": "2020-07-05T12:32:31Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f9b3a0d87112fa3c0b36236fb9591e8884f6b81", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/2f9b3a0d87112fa3c0b36236fb9591e8884f6b81", "committedDate": "2020-07-05T12:47:43Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7a302d3ef3f4f7e81099f38980cff5e1c8060c15", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/7a302d3ef3f4f7e81099f38980cff5e1c8060c15", "committedDate": "2020-07-05T12:32:31Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}, "afterCommit": {"oid": "2f9b3a0d87112fa3c0b36236fb9591e8884f6b81", "author": {"user": null}, "url": "https://github.com/openmrs/openmrs-core/commit/2f9b3a0d87112fa3c0b36236fb9591e8884f6b81", "committedDate": "2020-07-05T12:47:43Z", "message": "TRUNK-5813 Replace all ExpectedException Rules and the @Test(expected..)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjk2MDEw", "url": "https://github.com/openmrs/openmrs-core/pull/3279#pullrequestreview-442696010", "createdAt": "2020-07-05T18:02:33Z", "commit": {"oid": "2f9b3a0d87112fa3c0b36236fb9591e8884f6b81"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4638, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}