{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1OTI4ODY3", "number": 3550, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODoyOToyOVrOEhI4qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoxNjowNFrOEiMYeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTg0MDQxOnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODoyOToyOVrOHOSZOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODoyOToyOVrOHOSZOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc0MzQ4Mw==", "bodyText": "For the index name, can you prefix the table name as done in this file? https://github.com/openmrs/openmrs-core/blob/master/api/src/main/resources/org/openmrs/liquibase/snapshots/schema-only/liquibase-schema-only-1.9.x.xml", "url": "https://github.com/openmrs/openmrs-core/pull/3550#discussion_r484743483", "createdAt": "2020-09-08T08:29:29Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -233,7 +228,26 @@\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_creator_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"creator\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_changed_by_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"changed_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_voided_by_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"voided_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n-    </changeSet>   \n-    \n+    </changeSet>\n+\t\n+\t<changeSet id=\"2020-08-29-2200-TRUNK-5821\" author=\"miirochristopher\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onFailMessage=\"Index idx_order_number already exists.\">\n+\t\t\t<tableExists tableName=\"orders\"/>\n+\t\t</preConditions>\n+\t\t<comment>Adding index to order_number column in Orders table</comment>\n+\t\t<createIndex  indexName=\"idx_order_number\" tableName=\"orders\" unique=\"true\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd9b2e5d2728a509e3e8137ed255c4816c45e458"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzMTg0MzQzOnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODozMDowN1rOHOSa_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODozMDowN1rOHOSa_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc0MzkzNQ==", "bodyText": "Do we need to again specify the type?", "url": "https://github.com/openmrs/openmrs-core/pull/3550#discussion_r484743935", "createdAt": "2020-09-08T08:30:07Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -233,7 +228,26 @@\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_creator_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"creator\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_changed_by_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"changed_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_voided_by_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"voided_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n-    </changeSet>   \n-    \n+    </changeSet>\n+\t\n+\t<changeSet id=\"2020-08-29-2200-TRUNK-5821\" author=\"miirochristopher\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onFailMessage=\"Index idx_order_number already exists.\">\n+\t\t\t<tableExists tableName=\"orders\"/>\n+\t\t</preConditions>\n+\t\t<comment>Adding index to order_number column in Orders table</comment>\n+\t\t<createIndex  indexName=\"idx_order_number\" tableName=\"orders\" unique=\"true\">\n+\t\t\t<column   name=\"order_number\" type=\"varchar(50)\"/>\n+\t\t</createIndex>\n+\t</changeSet>\n+\t\n+\t<changeSet id=\"2020-08-30-100-TRUNK-5821\" author=\"miirochristopher\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onFailMessage=\"Index idx_accession_number already exists.\">\n+\t\t\t<tableExists tableName=\"orders\"/>\n+\t\t</preConditions>\n+\t\t<comment>Adding index to accession_number column in Orders table</comment>\n+\t\t<createIndex  indexName=\"idx_accession_number\"  tableName=\"orders\" unique=\"true\">\n+\t\t\t<column   name=\"accession_number\" type=\"varchar(255)\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd9b2e5d2728a509e3e8137ed255c4816c45e458"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0Mjg5OTEyOnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoxNjowNFrOHP7t4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoxNjowNFrOHP7t4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ2OTA5MQ==", "bodyText": "What happens when the index already exists?", "url": "https://github.com/openmrs/openmrs-core/pull/3550#discussion_r486469091", "createdAt": "2020-09-10T16:16:04Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -299,4 +299,25 @@\n \t\t<addForeignKeyConstraint constraintName=\"order_group_attribute_changed_by_fk\" baseTableName=\"order_group_attribute\" baseColumnNames=\"changed_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n \t\t<addForeignKeyConstraint constraintName=\"order_group_attribute_voided_by_fk\" baseTableName=\"order_group_attribute\" baseColumnNames=\"voided_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n \t</changeSet>\n+\n+\t<changeSet id=\"2020-08-29-2200-TRUNK-5821\" author=\"miirochristopher\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onFailMessage=\"Table orders does not exist or the index orders_order_number already exists.\">\n+\t\t\t<tableExists tableName=\"orders\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98aa84cb478b329fb411cac03e52becdef746b69"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1299, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}