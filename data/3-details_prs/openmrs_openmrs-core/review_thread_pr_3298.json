{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0OTc1MDg1", "number": 3298, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwODowMzo1M1rOEL959Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwODowMzo1M1rOEL959Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTg0MDUzOnYy", "diffSide": "RIGHT", "path": "api/src/test/java/org/openmrs/util/databasechange/Database1_9_7UpgradeIT.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwODowMzo1M1rOGtzbaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQyMDo0NDozOFrOGu4k5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY4MTcwNQ==", "bodyText": "I thought is and startsWith are different. Correct?", "url": "https://github.com/openmrs/openmrs-core/pull/3298#discussion_r450681705", "createdAt": "2020-07-07T08:03:53Z", "author": {"login": "dkayiwa"}, "path": "api/src/test/java/org/openmrs/util/databasechange/Database1_9_7UpgradeIT.java", "diffHunk": "@@ -247,7 +246,7 @@ public void shouldFailIfAnyDrugOrderFrequenciesNotMappedToConceptsAreFound() thr\n \t\tString errorMsgSubString1 = \"liquibase.exception.MigrationFailedException: Migration failed for change set liquibase-update-to-latest.xml::201401101647-TRUNK-4187::wyclif\";\n \t\t\n \t\tIOException exception = assertThrows(IOException.class, () -> upgradeTestUtil.upgrade());\n-\t\tassertThat(exception.getMessage(), is(errorMsgSubString1));\n+\t\tassertThat(exception.getMessage(), startsWith(errorMsgSubString1));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e15cf1d7e26f0f98a314fa1315174170979332af"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY4MjA1OQ==", "bodyText": "For instance: This is a vs This is a boy", "url": "https://github.com/openmrs/openmrs-core/pull/3298#discussion_r450682059", "createdAt": "2020-07-07T08:04:38Z", "author": {"login": "dkayiwa"}, "path": "api/src/test/java/org/openmrs/util/databasechange/Database1_9_7UpgradeIT.java", "diffHunk": "@@ -247,7 +246,7 @@ public void shouldFailIfAnyDrugOrderFrequenciesNotMappedToConceptsAreFound() thr\n \t\tString errorMsgSubString1 = \"liquibase.exception.MigrationFailedException: Migration failed for change set liquibase-update-to-latest.xml::201401101647-TRUNK-4187::wyclif\";\n \t\t\n \t\tIOException exception = assertThrows(IOException.class, () -> upgradeTestUtil.upgrade());\n-\t\tassertThat(exception.getMessage(), is(errorMsgSubString1));\n+\t\tassertThat(exception.getMessage(), startsWith(errorMsgSubString1));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY4MTcwNQ=="}, "originalCommit": {"oid": "e15cf1d7e26f0f98a314fa1315174170979332af"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDcwODIzNA==", "bodyText": "Yes they are :) is checks for equality as opposed to startsWith\nThe thing is that the expectedException.expectMessage() was doing a containsString so sometimes the string we expect was an exact match, sometimes in was not. In the former case using the is is fine, in the later we have to either use startsWith or containsString", "url": "https://github.com/openmrs/openmrs-core/pull/3298#discussion_r450708234", "createdAt": "2020-07-07T08:49:31Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/util/databasechange/Database1_9_7UpgradeIT.java", "diffHunk": "@@ -247,7 +246,7 @@ public void shouldFailIfAnyDrugOrderFrequenciesNotMappedToConceptsAreFound() thr\n \t\tString errorMsgSubString1 = \"liquibase.exception.MigrationFailedException: Migration failed for change set liquibase-update-to-latest.xml::201401101647-TRUNK-4187::wyclif\";\n \t\t\n \t\tIOException exception = assertThrows(IOException.class, () -> upgradeTestUtil.upgrade());\n-\t\tassertThat(exception.getMessage(), is(errorMsgSubString1));\n+\t\tassertThat(exception.getMessage(), startsWith(errorMsgSubString1));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY4MTcwNQ=="}, "originalCommit": {"oid": "e15cf1d7e26f0f98a314fa1315174170979332af"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE0NjAxNw==", "bodyText": "Is line 250 above also using expectedException.expectMessage()?", "url": "https://github.com/openmrs/openmrs-core/pull/3298#discussion_r451146017", "createdAt": "2020-07-07T21:12:02Z", "author": {"login": "dkayiwa"}, "path": "api/src/test/java/org/openmrs/util/databasechange/Database1_9_7UpgradeIT.java", "diffHunk": "@@ -247,7 +246,7 @@ public void shouldFailIfAnyDrugOrderFrequenciesNotMappedToConceptsAreFound() thr\n \t\tString errorMsgSubString1 = \"liquibase.exception.MigrationFailedException: Migration failed for change set liquibase-update-to-latest.xml::201401101647-TRUNK-4187::wyclif\";\n \t\t\n \t\tIOException exception = assertThrows(IOException.class, () -> upgradeTestUtil.upgrade());\n-\t\tassertThat(exception.getMessage(), is(errorMsgSubString1));\n+\t\tassertThat(exception.getMessage(), startsWith(errorMsgSubString1));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY4MTcwNQ=="}, "originalCommit": {"oid": "e15cf1d7e26f0f98a314fa1315174170979332af"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2MjkwMA==", "bodyText": "Not anymore. We are replacing the deprecated Junit 4 ExpectedException. Here you can see the first change d0871ee#diff-9715472d14ed569e3b08d1dfaafec969L251-R250 which failed since we used the is assertion but expectedException.expectMessage() does a containsString which in this case made a difference since errorMsgSubString1 is just a substring.", "url": "https://github.com/openmrs/openmrs-core/pull/3298#discussion_r451262900", "createdAt": "2020-07-08T03:35:51Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/util/databasechange/Database1_9_7UpgradeIT.java", "diffHunk": "@@ -247,7 +246,7 @@ public void shouldFailIfAnyDrugOrderFrequenciesNotMappedToConceptsAreFound() thr\n \t\tString errorMsgSubString1 = \"liquibase.exception.MigrationFailedException: Migration failed for change set liquibase-update-to-latest.xml::201401101647-TRUNK-4187::wyclif\";\n \t\t\n \t\tIOException exception = assertThrows(IOException.class, () -> upgradeTestUtil.upgrade());\n-\t\tassertThat(exception.getMessage(), is(errorMsgSubString1));\n+\t\tassertThat(exception.getMessage(), startsWith(errorMsgSubString1));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY4MTcwNQ=="}, "originalCommit": {"oid": "e15cf1d7e26f0f98a314fa1315174170979332af"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgxNDYzMQ==", "bodyText": "Oh i see!", "url": "https://github.com/openmrs/openmrs-core/pull/3298#discussion_r451814631", "createdAt": "2020-07-08T20:44:38Z", "author": {"login": "dkayiwa"}, "path": "api/src/test/java/org/openmrs/util/databasechange/Database1_9_7UpgradeIT.java", "diffHunk": "@@ -247,7 +246,7 @@ public void shouldFailIfAnyDrugOrderFrequenciesNotMappedToConceptsAreFound() thr\n \t\tString errorMsgSubString1 = \"liquibase.exception.MigrationFailedException: Migration failed for change set liquibase-update-to-latest.xml::201401101647-TRUNK-4187::wyclif\";\n \t\t\n \t\tIOException exception = assertThrows(IOException.class, () -> upgradeTestUtil.upgrade());\n-\t\tassertThat(exception.getMessage(), is(errorMsgSubString1));\n+\t\tassertThat(exception.getMessage(), startsWith(errorMsgSubString1));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDY4MTcwNQ=="}, "originalCommit": {"oid": "e15cf1d7e26f0f98a314fa1315174170979332af"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1386, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}