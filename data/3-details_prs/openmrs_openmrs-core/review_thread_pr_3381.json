{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyMDY1NTQ5", "number": 3381, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNDowNzo0NFrOEQM90Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzozNjo0N1rOEQoG5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NDI1MTA1OnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNDowNzo0NFrOG0OotQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxOTo1OToxMlrOG0dMzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQxODkzMw==", "bodyText": "Was this also in the ticket description?", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457418933", "createdAt": "2020-07-20T14:07:44Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -112,6 +112,25 @@\n \t\t\t\t\t\t\t\t referencedTableName=\"order_group\"\n \t\t\t\t\t\t\t\t referencedColumnNames=\"order_group_id\" />\n     </changeSet>\n+        \n+    <changeSet id=\"20190816-Trunk-5652\" author=\"gitacliff\">\n+\t\t<preConditions onFail=\"MARK_RAN\">\n+\t\t\t<not>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1ba366fa63456a0759fa1fad3f0815422f38f17"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUwMTcxMQ==", "bodyText": "@dkayiwa  the Preconditions element can be attached to  a changeset to control the execution of an update based on the state of the database and in this case its housing the <not> element just like in the all other changesets adding new columns to the order_group table", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457501711", "createdAt": "2020-07-20T15:36:12Z", "author": {"login": "gitcliff"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -112,6 +112,25 @@\n \t\t\t\t\t\t\t\t referencedTableName=\"order_group\"\n \t\t\t\t\t\t\t\t referencedColumnNames=\"order_group_id\" />\n     </changeSet>\n+        \n+    <changeSet id=\"20190816-Trunk-5652\" author=\"gitacliff\">\n+\t\t<preConditions onFail=\"MARK_RAN\">\n+\t\t\t<not>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQxODkzMw=="}, "originalCommit": {"oid": "f1ba366fa63456a0759fa1fad3f0815422f38f17"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUwNDM1Ng==", "bodyText": "I mean the entire changeset.", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457504356", "createdAt": "2020-07-20T15:39:20Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -112,6 +112,25 @@\n \t\t\t\t\t\t\t\t referencedTableName=\"order_group\"\n \t\t\t\t\t\t\t\t referencedColumnNames=\"order_group_id\" />\n     </changeSet>\n+        \n+    <changeSet id=\"20190816-Trunk-5652\" author=\"gitacliff\">\n+\t\t<preConditions onFail=\"MARK_RAN\">\n+\t\t\t<not>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQxODkzMw=="}, "originalCommit": {"oid": "f1ba366fa63456a0759fa1fad3f0815422f38f17"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY1NzU1MA==", "bodyText": "@dkayiwa i have made some changes ,,please review", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457657550", "createdAt": "2020-07-20T19:59:12Z", "author": {"login": "gitcliff"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -112,6 +112,25 @@\n \t\t\t\t\t\t\t\t referencedTableName=\"order_group\"\n \t\t\t\t\t\t\t\t referencedColumnNames=\"order_group_id\" />\n     </changeSet>\n+        \n+    <changeSet id=\"20190816-Trunk-5652\" author=\"gitacliff\">\n+\t\t<preConditions onFail=\"MARK_RAN\">\n+\t\t\t<not>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQxODkzMw=="}, "originalCommit": {"oid": "f1ba366fa63456a0759fa1fad3f0815422f38f17"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1NTgyNTgzOnYy", "diffSide": "LEFT", "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMDowNTo1OVrOG0daZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQwOToyMDowMVrOG0vfVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2MTAzMA==", "bodyText": "Do you need to touch this file in any way?", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457661030", "createdAt": "2020-07-20T20:05:59Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -112,7 +112,7 @@\n \t\t\t\t\t\t\t\t referencedTableName=\"order_group\"\n \t\t\t\t\t\t\t\t referencedColumnNames=\"order_group_id\" />\n     </changeSet>\n-    ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc2547525d927ddeeb8d8f7ede98e336e4017f03"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk1NzIwNg==", "bodyText": "i have fixed it,,thanks", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457957206", "createdAt": "2020-07-21T09:20:01Z", "author": {"login": "gitcliff"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -112,7 +112,7 @@\n \t\t\t\t\t\t\t\t referencedTableName=\"order_group\"\n \t\t\t\t\t\t\t\t referencedColumnNames=\"order_group_id\" />\n     </changeSet>\n-    ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2MTAzMA=="}, "originalCommit": {"oid": "fc2547525d927ddeeb8d8f7ede98e336e4017f03"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1ODQ5MTE0OnYy", "diffSide": "RIGHT", "path": "api/src/test/java/org/openmrs/util/DatabaseUpdaterDatabaseIT.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMjo0OTo1N1rOG02Xag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzozMDoyMVrOG04C9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA2OTg2Ng==", "bodyText": "What is in core is already 864. Can you increment this again?", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r458069866", "createdAt": "2020-07-21T12:49:57Z", "author": {"login": "dkayiwa"}, "path": "api/src/test/java/org/openmrs/util/DatabaseUpdaterDatabaseIT.java", "diffHunk": "@@ -29,7 +29,7 @@\n \t * \n \t * This constant needs to be updated when adding new Liquibase update files to openmrs-core.\n \t */\n-\tprivate static final int CHANGE_SET_COUNT_FOR_2_1_X = 863;\n+\tprivate static final int CHANGE_SET_COUNT_FOR_2_1_X = 864;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c110093ca77c51ad06e83cc05f239b39b65490d4"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA5NzM5OQ==", "bodyText": "@dkayiwa  I have incremented", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r458097399", "createdAt": "2020-07-21T13:30:21Z", "author": {"login": "gitcliff"}, "path": "api/src/test/java/org/openmrs/util/DatabaseUpdaterDatabaseIT.java", "diffHunk": "@@ -29,7 +29,7 @@\n \t * \n \t * This constant needs to be updated when adding new Liquibase update files to openmrs-core.\n \t */\n-\tprivate static final int CHANGE_SET_COUNT_FOR_2_1_X = 863;\n+\tprivate static final int CHANGE_SET_COUNT_FOR_2_1_X = 864;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA2OTg2Ng=="}, "originalCommit": {"oid": "c110093ca77c51ad06e83cc05f239b39b65490d4"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1ODY5Nzk3OnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/org/openmrs/api/db/hibernate/OrderGroup.hbm.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzozNjo0OFrOG04Umg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMzo1MjozNlrOG05CBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEwMTkxNA==", "bodyText": "This does not look like that in the commit that i linked in the ticket description.", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r458101914", "createdAt": "2020-07-21T13:36:48Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/resources/org/openmrs/api/db/hibernate/OrderGroup.hbm.xml", "diffHunk": "@@ -72,6 +72,12 @@\n \t\t    not-null=\"false\" column=\"parent_order_group\" />\n \t\t<many-to-one name=\"orderGroupReason\" class=\"org.openmrs.Concept\"\n \t\t    not-null=\"false\" column=\"order_group_reason\" />\n+\t\t <!-- one-to-many association to all nested orderGroups in this grouping -->\n+        <set name=\"nestedOrderGroups\" inverse=\"true\" cascade=\"delete\" order-by=\"order_group_id\"\n+            access=\"field\" batch-size=\"25\">\n+            <key column=\"order_group_id\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0ed0cc279388bfa9c9a13020d151d7494bab98c"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODExMzU0MA==", "bodyText": "i have fixed it", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r458113540", "createdAt": "2020-07-21T13:52:36Z", "author": {"login": "gitcliff"}, "path": "api/src/main/resources/org/openmrs/api/db/hibernate/OrderGroup.hbm.xml", "diffHunk": "@@ -72,6 +72,12 @@\n \t\t    not-null=\"false\" column=\"parent_order_group\" />\n \t\t<many-to-one name=\"orderGroupReason\" class=\"org.openmrs.Concept\"\n \t\t    not-null=\"false\" column=\"order_group_reason\" />\n+\t\t <!-- one-to-many association to all nested orderGroups in this grouping -->\n+        <set name=\"nestedOrderGroups\" inverse=\"true\" cascade=\"delete\" order-by=\"order_group_id\"\n+            access=\"field\" batch-size=\"25\">\n+            <key column=\"order_group_id\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEwMTkxNA=="}, "originalCommit": {"oid": "f0ed0cc279388bfa9c9a13020d151d7494bab98c"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1308, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}