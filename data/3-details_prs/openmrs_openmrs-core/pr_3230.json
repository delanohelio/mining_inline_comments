{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMwNzcwNDc4", "number": 3230, "title": "FM2-184: Set context classloader to be module's classloader.", "bodyText": "Description of what I changed\nExplicitly set the context classloader to be the module's classloader\nbefore calling willRefreshContext.\nIssue I worked on\nhttps://issues.openmrs.org/browse/FM2-184\nChecklist: I completed these to help reviewers :)\n\n\n My IDE is configured to follow the [code style]\n\n\n I have added tests to cover my changes. (If you refactored\nexisting code that was well tested you do not have to add tests)\nNo? -> I'm not sure how this can be unit tested, tbh.\n\n\n I ran mvn clean package right before creating this pull request and\nadded all formatting changes to my commit.\n\n\n All new and existing tests passed.\n\n\n My pull request is based on the latest changes of the master branch.", "createdAt": "2020-06-08T05:50:30Z", "url": "https://github.com/openmrs/openmrs-core/pull/3230", "merged": true, "mergeCommit": {"oid": "b86850d26c04c1a8ad2fba95583c4ef7bfe63e22"}, "closed": true, "closedAt": "2020-06-12T09:01:42Z", "author": {"login": "LeeBreisacher"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpJqvAAH2gAyNDMwNzcwNDc4OmI4ODIzYmNkYzY1ZTM0NTgyNmM5ZmI0M2Q1YTEyOTY4M2M4Njk1YmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpRHwTAFqTQyNjI4NTEwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b8823bcdc65e345826c9fb43d5a129683c8695ba", "author": {"user": {"login": "LeeBreisacher", "name": null}}, "url": "https://github.com/openmrs/openmrs-core/commit/b8823bcdc65e345826c9fb43d5a129683c8695ba", "committedDate": "2020-06-08T05:32:48Z", "message": "FM2-184 FHIR2 module breaks OpenMRS when datafilter module is loaded\n\nExplicitly set the context classloader to be the module's classloader\nbefore calling willRefreshContext."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2Mjg1MTA2", "url": "https://github.com/openmrs/openmrs-core/pull/3230#pullrequestreview-426285106", "createdAt": "2020-06-08T14:13:50Z", "commit": {"oid": "b8823bcdc65e345826c9fb43d5a129683c8695ba"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNDoxMzo1MFrOGggnUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNDoxMzo1MFrOGggnUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjc0MTk2OQ==", "bodyText": "How about doing it also for the rest of the call backs for the module activator?", "url": "https://github.com/openmrs/openmrs-core/pull/3230#discussion_r436741969", "createdAt": "2020-06-08T14:13:50Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/java/org/openmrs/module/ModuleUtil.java", "diffHunk": "@@ -858,6 +858,7 @@ public static AbstractRefreshableApplicationContext refreshApplicationContext(Ab\n \t\tfor (Module module : startedModules) {\n \t\t\ttry {\n \t\t\t\tif (module.getModuleActivator() != null) {\n+\t\t\t\t\tThread.currentThread().setContextClassLoader(ModuleFactory.getModuleClassLoader(module));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8823bcdc65e345826c9fb43d5a129683c8695ba"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4840, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}