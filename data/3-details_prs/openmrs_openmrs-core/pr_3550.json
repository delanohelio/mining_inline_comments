{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1OTI4ODY3", "number": 3550, "title": "TRUNK-5821: Adding indices to order_number and accession_number colum\u2026", "bodyText": "Adding indices to order_number and accession_number columns in the orders table.\nIssue I worked on\nsee https://issues.openmrs.org/browse/TRUNK-5821\nChecklist: I completed these to help reviewers :)\n\n My IDE is configured to follow the code style of this project.\n I have added tests to cover my changes.\n I ran mvn clean package right before creating this pull request and added all formatting changes to my commit.\n All new and existing tests passed.\n My pull request is based on the latest changes of the master branch.", "createdAt": "2020-08-30T15:55:22Z", "url": "https://github.com/openmrs/openmrs-core/pull/3550", "merged": true, "mergeCommit": {"oid": "ca3de9ae0ed7115eca4bc410b68d083aa0545544"}, "closed": true, "closedAt": "2020-09-11T12:33:06Z", "author": {"login": "miirochristopher"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEDpRwABqjM3MDc1NzQwODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHz4YlgH2gAyNDc1OTI4ODY3OjNlMTI2Y2YzYzg2MDVkZDc1MGFmYmFhOTQzYTA5OTEzYjIzZmU2YmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c886cce102943054c69ccfd7bf75f41d1eaa5569", "author": {"user": {"login": "miirochristopher", "name": "Christopher Miiro "}}, "url": "https://github.com/openmrs/openmrs-core/commit/c886cce102943054c69ccfd7bf75f41d1eaa5569", "committedDate": "2020-08-30T17:56:26Z", "message": "TRUNK-5821: Adding indices to order_number and accession_number columns in orders table with passing Database IT tests"}, "afterCommit": {"oid": "dd9b2e5d2728a509e3e8137ed255c4816c45e458", "author": {"user": {"login": "miirochristopher", "name": "Christopher Miiro "}}, "url": "https://github.com/openmrs/openmrs-core/commit/dd9b2e5d2728a509e3e8137ed255c4816c45e458", "committedDate": "2020-08-30T19:44:27Z", "message": "TRUNK-5821: Adding indices to order_number and accession_number columns in orders table with passing Database IT tests."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzOTA5ODI4", "url": "https://github.com/openmrs/openmrs-core/pull/3550#pullrequestreview-483909828", "createdAt": "2020-09-08T08:29:29Z", "commit": {"oid": "dd9b2e5d2728a509e3e8137ed255c4816c45e458"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODoyOToyOVrOHOSZOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODoyOToyOVrOHOSZOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc0MzQ4Mw==", "bodyText": "For the index name, can you prefix the table name as done in this file? https://github.com/openmrs/openmrs-core/blob/master/api/src/main/resources/org/openmrs/liquibase/snapshots/schema-only/liquibase-schema-only-1.9.x.xml", "url": "https://github.com/openmrs/openmrs-core/pull/3550#discussion_r484743483", "createdAt": "2020-09-08T08:29:29Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -233,7 +228,26 @@\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_creator_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"creator\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_changed_by_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"changed_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_voided_by_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"voided_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n-    </changeSet>   \n-    \n+    </changeSet>\n+\t\n+\t<changeSet id=\"2020-08-29-2200-TRUNK-5821\" author=\"miirochristopher\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onFailMessage=\"Index idx_order_number already exists.\">\n+\t\t\t<tableExists tableName=\"orders\"/>\n+\t\t</preConditions>\n+\t\t<comment>Adding index to order_number column in Orders table</comment>\n+\t\t<createIndex  indexName=\"idx_order_number\" tableName=\"orders\" unique=\"true\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd9b2e5d2728a509e3e8137ed255c4816c45e458"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzOTEwMzM2", "url": "https://github.com/openmrs/openmrs-core/pull/3550#pullrequestreview-483910336", "createdAt": "2020-09-08T08:30:06Z", "commit": {"oid": "dd9b2e5d2728a509e3e8137ed255c4816c45e458"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODozMDowN1rOHOSa_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQwODozMDowN1rOHOSa_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc0MzkzNQ==", "bodyText": "Do we need to again specify the type?", "url": "https://github.com/openmrs/openmrs-core/pull/3550#discussion_r484743935", "createdAt": "2020-09-08T08:30:07Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -233,7 +228,26 @@\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_creator_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"creator\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_changed_by_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"changed_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n         <addForeignKeyConstraint constraintName=\"order_set_attribute_voided_by_fk\" baseTableName=\"order_set_attribute\" baseColumnNames=\"voided_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n-    </changeSet>   \n-    \n+    </changeSet>\n+\t\n+\t<changeSet id=\"2020-08-29-2200-TRUNK-5821\" author=\"miirochristopher\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onFailMessage=\"Index idx_order_number already exists.\">\n+\t\t\t<tableExists tableName=\"orders\"/>\n+\t\t</preConditions>\n+\t\t<comment>Adding index to order_number column in Orders table</comment>\n+\t\t<createIndex  indexName=\"idx_order_number\" tableName=\"orders\" unique=\"true\">\n+\t\t\t<column   name=\"order_number\" type=\"varchar(50)\"/>\n+\t\t</createIndex>\n+\t</changeSet>\n+\t\n+\t<changeSet id=\"2020-08-30-100-TRUNK-5821\" author=\"miirochristopher\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onFailMessage=\"Index idx_accession_number already exists.\">\n+\t\t\t<tableExists tableName=\"orders\"/>\n+\t\t</preConditions>\n+\t\t<comment>Adding index to accession_number column in Orders table</comment>\n+\t\t<createIndex  indexName=\"idx_accession_number\"  tableName=\"orders\" unique=\"true\">\n+\t\t\t<column   name=\"accession_number\" type=\"varchar(255)\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd9b2e5d2728a509e3e8137ed255c4816c45e458"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd9b2e5d2728a509e3e8137ed255c4816c45e458", "author": {"user": {"login": "miirochristopher", "name": "Christopher Miiro "}}, "url": "https://github.com/openmrs/openmrs-core/commit/dd9b2e5d2728a509e3e8137ed255c4816c45e458", "committedDate": "2020-08-30T19:44:27Z", "message": "TRUNK-5821: Adding indices to order_number and accession_number columns in orders table with passing Database IT tests."}, "afterCommit": {"oid": "33290ea32bf358885bfc74acffd1353ac3837dfb", "author": {"user": {"login": "miirochristopher", "name": "Christopher Miiro "}}, "url": "https://github.com/openmrs/openmrs-core/commit/33290ea32bf358885bfc74acffd1353ac3837dfb", "committedDate": "2020-09-08T15:36:14Z", "message": "TRUNK-5821: Adding indices to order_number and accession_number columns in orders table."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "33290ea32bf358885bfc74acffd1353ac3837dfb", "author": {"user": {"login": "miirochristopher", "name": "Christopher Miiro "}}, "url": "https://github.com/openmrs/openmrs-core/commit/33290ea32bf358885bfc74acffd1353ac3837dfb", "committedDate": "2020-09-08T15:36:14Z", "message": "TRUNK-5821: Adding indices to order_number and accession_number columns in orders table."}, "afterCommit": {"oid": "98aa84cb478b329fb411cac03e52becdef746b69", "author": {"user": {"login": "miirochristopher", "name": "Christopher Miiro "}}, "url": "https://github.com/openmrs/openmrs-core/commit/98aa84cb478b329fb411cac03e52becdef746b69", "committedDate": "2020-09-10T10:39:41Z", "message": "TRUNK-5821: Adding indices to order_number and accession_number columns in the orders table."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTAwODU4", "url": "https://github.com/openmrs/openmrs-core/pull/3550#pullrequestreview-486100858", "createdAt": "2020-09-10T16:16:04Z", "commit": {"oid": "98aa84cb478b329fb411cac03e52becdef746b69"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoxNjowNFrOHP7t4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNjoxNjowNFrOHP7t4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ2OTA5MQ==", "bodyText": "What happens when the index already exists?", "url": "https://github.com/openmrs/openmrs-core/pull/3550#discussion_r486469091", "createdAt": "2020-09-10T16:16:04Z", "author": {"login": "dkayiwa"}, "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -299,4 +299,25 @@\n \t\t<addForeignKeyConstraint constraintName=\"order_group_attribute_changed_by_fk\" baseTableName=\"order_group_attribute\" baseColumnNames=\"changed_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n \t\t<addForeignKeyConstraint constraintName=\"order_group_attribute_voided_by_fk\" baseTableName=\"order_group_attribute\" baseColumnNames=\"voided_by\" referencedTableName=\"users\" referencedColumnNames=\"user_id\" />\n \t</changeSet>\n+\n+\t<changeSet id=\"2020-08-29-2200-TRUNK-5821\" author=\"miirochristopher\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onFailMessage=\"Table orders does not exist or the index orders_order_number already exists.\">\n+\t\t\t<tableExists tableName=\"orders\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "98aa84cb478b329fb411cac03e52becdef746b69"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7047a0d3816f12bc8ff20392afba8c6c4671a64a", "author": {"user": {"login": "miirochristopher", "name": "Christopher Miiro "}}, "url": "https://github.com/openmrs/openmrs-core/commit/7047a0d3816f12bc8ff20392afba8c6c4671a64a", "committedDate": "2020-09-11T08:59:52Z", "message": "TRUNK-5821: Adding indices to order_number and accession_number columns in orders table."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98aa84cb478b329fb411cac03e52becdef746b69", "author": {"user": {"login": "miirochristopher", "name": "Christopher Miiro "}}, "url": "https://github.com/openmrs/openmrs-core/commit/98aa84cb478b329fb411cac03e52becdef746b69", "committedDate": "2020-09-10T10:39:41Z", "message": "TRUNK-5821: Adding indices to order_number and accession_number columns in the orders table."}, "afterCommit": {"oid": "7047a0d3816f12bc8ff20392afba8c6c4671a64a", "author": {"user": {"login": "miirochristopher", "name": "Christopher Miiro "}}, "url": "https://github.com/openmrs/openmrs-core/commit/7047a0d3816f12bc8ff20392afba8c6c4671a64a", "committedDate": "2020-09-11T08:59:52Z", "message": "TRUNK-5821: Adding indices to order_number and accession_number columns in orders table."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e126cf3c8605dd750afbaa943a09913b23fe6bc", "author": {"user": {"login": "miirochristopher", "name": "Christopher Miiro "}}, "url": "https://github.com/openmrs/openmrs-core/commit/3e126cf3c8605dd750afbaa943a09913b23fe6bc", "committedDate": "2020-09-11T11:41:27Z", "message": "TRUNK-5821: Adding indices to order_number and accession_number columns in orders table."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4515, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}