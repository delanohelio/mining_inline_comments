{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MjM0OTk2", "number": 3300, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNzozNzowMVrOEMLVgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNzozNzowMVrOEMLVgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMjA0MDk3OnYy", "diffSide": "LEFT", "path": "api/src/test/java/org/openmrs/api/ConceptServiceTest.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxNzozNzowMVrOGuI4gA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxODozNjozMVrOGuK5UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAzMzIxNg==", "bodyText": "Why did you remove this line?\nFrom reading it I feel like its supposed to show that the existingConceptNameTag.getId() did not change. Thats why I believe it should stay. Unless you convince me it should not :)", "url": "https://github.com/openmrs/openmrs-core/pull/3300#discussion_r451033216", "createdAt": "2020-07-07T17:37:01Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/ConceptServiceTest.java", "diffHunk": "@@ -1251,13 +1246,12 @@ public void saveConceptNameTag_shouldNotSaveAConceptNameTagIfTagExists() {\n \t\tConceptNameTag secondNameTag = new ConceptNameTag();\n \t\tsecondNameTag.setTag(tag);\n \t\t\n-\t\tConceptNameTag existingConceptNameTag = conceptService.saveConceptNameTag(secondNameTag);\n-\t\t\n+\t\tassertThrows(Exception.class, () -> conceptService.saveConceptNameTag(secondNameTag));\n \t\tassertNull(secondNameTag.getId());\n-\t\tassertEquals(existingConceptNameTag.getId(), nameTag.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "186177306e8ceb7f70afd59990a1a55e8d218a3f"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA1OTU5NQ==", "bodyText": "the exception happen at with this method  :\n     ConceptNameTag existingConceptNameTag = conceptService.saveConceptNameTag(secondNameTag);\n\nif it has to stay , it will look like this\nassertThrows(Exception.class, () ->  assertEquals(conceptService.saveConceptNameTag(secondNameTag).getId(), nameTag.getId());", "url": "https://github.com/openmrs/openmrs-core/pull/3300#discussion_r451059595", "createdAt": "2020-07-07T18:24:04Z", "author": {"login": "achilep"}, "path": "api/src/test/java/org/openmrs/api/ConceptServiceTest.java", "diffHunk": "@@ -1251,13 +1246,12 @@ public void saveConceptNameTag_shouldNotSaveAConceptNameTagIfTagExists() {\n \t\tConceptNameTag secondNameTag = new ConceptNameTag();\n \t\tsecondNameTag.setTag(tag);\n \t\t\n-\t\tConceptNameTag existingConceptNameTag = conceptService.saveConceptNameTag(secondNameTag);\n-\t\t\n+\t\tassertThrows(Exception.class, () -> conceptService.saveConceptNameTag(secondNameTag));\n \t\tassertNull(secondNameTag.getId());\n-\t\tassertEquals(existingConceptNameTag.getId(), nameTag.getId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAzMzIxNg=="}, "originalCommit": {"oid": "186177306e8ceb7f70afd59990a1a55e8d218a3f"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA2NjE5Mw==", "bodyText": "Thats right but you already wrapped the conceptService.saveConceptNameTag(secondNameTag) in an assertThrows. The assertThrows allows to do assertions after it. That is the reason why for example assertNull(secondNameTag.getId()); is even possible. So it should also be possible to keep \t\tassertEquals(existingConceptNameTag.getId(), nameTag.getId()); in.\nthis is how I expect it to look like\n\tassertThrows(Exception.class, () -> conceptService.saveConceptNameTag(secondNameTag));\n\tassertNull(secondNameTag.getId());\n\tassertEquals(existingConceptNameTag.getId(), nameTag.getId());", "url": "https://github.com/openmrs/openmrs-core/pull/3300#discussion_r451066193", "createdAt": "2020-07-07T18:36:31Z", "author": {"login": "teleivo"}, "path": "api/src/test/java/org/openmrs/api/ConceptServiceTest.java", "diffHunk": "@@ -1251,13 +1246,12 @@ public void saveConceptNameTag_shouldNotSaveAConceptNameTagIfTagExists() {\n \t\tConceptNameTag secondNameTag = new ConceptNameTag();\n \t\tsecondNameTag.setTag(tag);\n \t\t\n-\t\tConceptNameTag existingConceptNameTag = conceptService.saveConceptNameTag(secondNameTag);\n-\t\t\n+\t\tassertThrows(Exception.class, () -> conceptService.saveConceptNameTag(secondNameTag));\n \t\tassertNull(secondNameTag.getId());\n-\t\tassertEquals(existingConceptNameTag.getId(), nameTag.getId());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAzMzIxNg=="}, "originalCommit": {"oid": "186177306e8ceb7f70afd59990a1a55e8d218a3f"}, "originalPosition": 96}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1388, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}