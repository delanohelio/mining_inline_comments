{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MzU5MDUy", "number": 280, "title": "chore: runtime build for linux, updated questdb.sh to use both \"runti\u2026", "bodyText": "\u2026me\" java and JAVA_HOME depending on where it is running from", "createdAt": "2020-05-13T13:22:12Z", "url": "https://github.com/questdb/questdb/pull/280", "merged": true, "mergeCommit": {"oid": "c95df2b45c5f12187a43bc2935d95d221f29bd5d"}, "closed": true, "closedAt": "2020-05-13T14:03:18Z", "author": {"login": "bluestreak01"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcg4wunAH2gAyNDE3MzU5MDUyOmRiOWQ0NWYwOTY2ZDBkMDU1NjY0MjdjNjU2OTJlYmZjOWU0NTYxODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcg5X-VAFqTQxMDk1NjYwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "db9d45f0966d0d05566427c65692ebfc9e456185", "author": {"user": {"login": "bluestreak01", "name": "Vlad Ilyushchenko"}}, "url": "https://github.com/questdb/questdb/commit/db9d45f0966d0d05566427c65692ebfc9e456185", "committedDate": "2020-05-13T13:19:34Z", "message": "chore: runtime build for linux, updated questdb.sh to use both \"runtime\" java and JAVA_HOME depending on where it is running from"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15b4d2649d720d249626b23fb2dbc75c29e2ab14", "author": {"user": {"login": "bluestreak01", "name": "Vlad Ilyushchenko"}}, "url": "https://github.com/questdb/questdb/commit/15b4d2649d720d249626b23fb2dbc75c29e2ab14", "committedDate": "2020-05-13T13:34:48Z", "message": "fix: removed hardcoded runtime name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwOTQyMDg2", "url": "https://github.com/questdb/questdb/pull/280#pullrequestreview-410942086", "createdAt": "2020-05-13T13:47:54Z", "commit": {"oid": "15b4d2649d720d249626b23fb2dbc75c29e2ab14"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzo0Nzo1NFrOGUyeGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzo0Nzo1NFrOGUyeGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ1MTYxMA==", "bodyText": "Before this change I was able to run ./questdb.sh ... even when JAVA_HOME was not set. The script now makes it mandatory. Should we just fallback to whatever default java binary we find on the system as a fallback?", "url": "https://github.com/questdb/questdb/pull/280#discussion_r424451610", "createdAt": "2020-05-13T13:47:54Z", "author": {"login": "mpsq"}, "path": "core/src/main/bin/questdb.sh", "diffHunk": "@@ -44,22 +44,30 @@ function export_pid {\n \n function export_java {\n \n-    if [ \"$JAVA_HOME\" = \"\" -a -e /usr/libexec/java_home ]; then\n-        JAVA_HOME=$(/usr/libexec/java_home -v 1.8)\n-    fi\n-\n-    # check that JAVA_HOME is defined\n-    if [ \"$JAVA_HOME\" = \"\" ]; then\n-        echo \"JAVA_HOME is undefined\"\n-        exit 55\n+    # check if this is our runtime\n+    if [ -f \"$BASE/java\" ]; then\n+        export JAVA=\"$BASE/java\"\n+    else\n+      if [ \"$JAVA_HOME\" = \"\" -a -e /usr/libexec/java_home ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15b4d2649d720d249626b23fb2dbc75c29e2ab14"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwOTU2NjAw", "url": "https://github.com/questdb/questdb/pull/280#pullrequestreview-410956600", "createdAt": "2020-05-13T14:02:26Z", "commit": {"oid": "15b4d2649d720d249626b23fb2dbc75c29e2ab14"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3312, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}