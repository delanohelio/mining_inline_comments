{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MzU5MDUy", "number": 280, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzo0Nzo1NFrOD8Ev-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzo0Nzo1NFrOD8Ev-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MzE4OTcxOnYy", "diffSide": "RIGHT", "path": "core/src/main/bin/questdb.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMzo0Nzo1NFrOGUyeGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNDowMjowN1rOGUzIRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ1MTYxMA==", "bodyText": "Before this change I was able to run ./questdb.sh ... even when JAVA_HOME was not set. The script now makes it mandatory. Should we just fallback to whatever default java binary we find on the system as a fallback?", "url": "https://github.com/questdb/questdb/pull/280#discussion_r424451610", "createdAt": "2020-05-13T13:47:54Z", "author": {"login": "mpsq"}, "path": "core/src/main/bin/questdb.sh", "diffHunk": "@@ -44,22 +44,30 @@ function export_pid {\n \n function export_java {\n \n-    if [ \"$JAVA_HOME\" = \"\" -a -e /usr/libexec/java_home ]; then\n-        JAVA_HOME=$(/usr/libexec/java_home -v 1.8)\n-    fi\n-\n-    # check that JAVA_HOME is defined\n-    if [ \"$JAVA_HOME\" = \"\" ]; then\n-        echo \"JAVA_HOME is undefined\"\n-        exit 55\n+    # check if this is our runtime\n+    if [ -f \"$BASE/java\" ]; then\n+        export JAVA=\"$BASE/java\"\n+    else\n+      if [ \"$JAVA_HOME\" = \"\" -a -e /usr/libexec/java_home ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15b4d2649d720d249626b23fb2dbc75c29e2ab14"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ2MjQwNw==", "bodyText": "Sorry, my mistake, this was not the case before -- this logic was not changed.", "url": "https://github.com/questdb/questdb/pull/280#discussion_r424462407", "createdAt": "2020-05-13T14:02:07Z", "author": {"login": "mpsq"}, "path": "core/src/main/bin/questdb.sh", "diffHunk": "@@ -44,22 +44,30 @@ function export_pid {\n \n function export_java {\n \n-    if [ \"$JAVA_HOME\" = \"\" -a -e /usr/libexec/java_home ]; then\n-        JAVA_HOME=$(/usr/libexec/java_home -v 1.8)\n-    fi\n-\n-    # check that JAVA_HOME is defined\n-    if [ \"$JAVA_HOME\" = \"\" ]; then\n-        echo \"JAVA_HOME is undefined\"\n-        exit 55\n+    # check if this is our runtime\n+    if [ -f \"$BASE/java\" ]; then\n+        export JAVA=\"$BASE/java\"\n+    else\n+      if [ \"$JAVA_HOME\" = \"\" -a -e /usr/libexec/java_home ]; then", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ1MTYxMA=="}, "originalCommit": {"oid": "15b4d2649d720d249626b23fb2dbc75c29e2ab14"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2270, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}