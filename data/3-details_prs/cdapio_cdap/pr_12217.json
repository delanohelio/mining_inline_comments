{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NTkxNTk4", "number": 12217, "title": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)", "bodyText": "JIRA: https://issues.cask.co/browse/CDAP-16871\nLet users configure widget-attributes for their widgets. Depending on the widget-type, it may carry different widget-attributes.\nCurrent Progress\n\nwidget-attributes changes based on the widget-type.\nUsers are able to configure widget-attributes of each widget.\nShow the JSON output including the widget-attributes.\n\nDialog that configure widget properties\n\nChanges are reflected in other components\n\nTODO (to be addressed)\n\nThere are some widgets (e.g. DLPCustomWidget) that haven't been implemented due to their complexities. I will be sure to discuss with @elfenheart and @ajainarayanan regarding this.\nI have stored key-value pairs (widget-type -> corresponding widget-attributes) in constants.ts to implement this feature. Also, there are some widget-attributes with multiple possible types, which I have dealt with by hardcoding. I will try to further address this.", "createdAt": "2020-05-28T16:14:02Z", "url": "https://github.com/cdapio/cdap/pull/12217", "merged": true, "mergeCommit": {"oid": "4d7f7371c7654147959aafbd9e67600591220a55"}, "closed": true, "closedAt": "2020-06-15T21:57:50Z", "author": {"login": "jennac3"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcly1QNABqjMzODQyNTk4NDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoAGugABqjM0MDc1NDAwMzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f4a927f0d771209d3575ea0fff3c0105c6a1c47", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/3f4a927f0d771209d3575ea0fff3c0105c6a1c47", "committedDate": "2020-05-28T15:52:56Z", "message": "[CDAP-16871] Configure widget-attributes for each property (widget JSON creator)"}, "afterCommit": {"oid": "32ec3b54dadc351e0ef5c43f04dc1ad2d3236978", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/32ec3b54dadc351e0ef5c43f04dc1ad2d3236978", "committedDate": "2020-05-28T16:24:19Z", "message": "[CDAP-16871] Configure widget-attributes for each property (widget JSON creator)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "32ec3b54dadc351e0ef5c43f04dc1ad2d3236978", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/32ec3b54dadc351e0ef5c43f04dc1ad2d3236978", "committedDate": "2020-05-28T16:24:19Z", "message": "[CDAP-16871] Configure widget-attributes for each property (widget JSON creator)"}, "afterCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/f1bba4bdece934742d490362160433532e4ba361", "committedDate": "2020-06-01T20:36:43Z", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMjIxMDE3", "url": "https://github.com/cdapio/cdap/pull/12217#pullrequestreview-423221017", "createdAt": "2020-06-03T05:07:26Z", "commit": {"oid": "f1bba4bdece934742d490362160433532e4ba361"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNTowNzoyNlrOGeMMZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNToxOToyNFrOGeMY-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMDI0Nw==", "bodyText": "These two imports can be combined.", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434310247", "createdAt": "2020-06-03T05:07:26Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput/index.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { withStyles } from '@material-ui/core';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMDkxMQ==", "bodyText": "Can we break this if..else condition blocks to single level? Too many levels makes it hard to read and grasp the logic right away.", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434310911", "createdAt": "2020-06-03T05:09:53Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput/index.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { withStyles } from '@material-ui/core';\n+import { StyleRules } from '@material-ui/core/styles';\n+import If from 'components/If';\n+import KeyValuePairs from 'components/KeyValuePairs';\n+import { COMMON_DELIMITER } from 'components/PluginJSONCreator/constants';\n+import PluginInput from 'components/PluginJSONCreator/Create/Content/PluginInput';\n+import * as React from 'react';\n+\n+export enum SupportedType {\n+  String = 'string',\n+  Number = 'number',\n+  ValueLabelPair = 'Value-Label pair',\n+  IDLabelPair = 'ID-Label pair',\n+}\n+\n+const styles = (): StyleRules => {\n+  return {\n+    typeSelectInput: {\n+      marginTop: '5px',\n+      marginBottom: '5px',\n+      width: '20%',\n+    },\n+  };\n+};\n+\n+export const processSupportedTypes = (types: string[]) => {\n+  const allTypes = new Set();\n+  types.forEach((type) => {\n+    switch (type) {\n+      case 'string[]':\n+        allTypes.add(SupportedType.String);\n+        break;\n+      case 'number[]':\n+        allTypes.add(SupportedType.Number);\n+        break;\n+      case 'IOption[]':\n+        allTypes.add(SupportedType.IDLabelPair);\n+        break;\n+      case 'IDropdownOption[]':\n+        allTypes.add(SupportedType.String);\n+        allTypes.add(SupportedType.Number);\n+        allTypes.add(SupportedType.ValueLabelPair);\n+        break;\n+      case 'ISelectOptions[]':\n+        allTypes.add(SupportedType.ValueLabelPair);\n+        break;\n+      case 'FilterOption[]':\n+        allTypes.add(SupportedType.String);\n+        allTypes.add(SupportedType.IDLabelPair);\n+        break;\n+      default:\n+        break;\n+    }\n+  });\n+  return allTypes;\n+};\n+\n+const AttributeMultipleValuesInputView = ({\n+  classes,\n+  supportedTypes,\n+  widgetToAttributes,\n+  setWidgetToAttributes,\n+  widgetID,\n+  field,\n+}) => {\n+  const cleanSupportedTypes = Array.from(processSupportedTypes(supportedTypes).values());\n+  const [selectedType, setSelectedType] = React.useState(null);\n+  const [currentInput, setCurrentInput] = React.useState(null);\n+\n+  React.useEffect(() => {\n+    const initialType = getInitialType();\n+    setSelectedType(initialType);\n+    setCurrentInput(getUpdatedCurrentInput(initialType));\n+  }, []);\n+\n+  function getInitialType() {\n+    const widgetAttributes = widgetToAttributes[widgetID][field];\n+    let newType;\n+    if (!widgetAttributes || widgetAttributes.length === 0) {\n+      newType = cleanSupportedTypes[0];\n+    } else if (widgetAttributes[0].value) {\n+      newType = SupportedType.ValueLabelPair;\n+    } else if (widgetAttributes[0].id) {\n+      newType = SupportedType.IDLabelPair;\n+    } else {\n+      newType = SupportedType.String;\n+    }\n+    return newType;\n+  }\n+\n+  function getUpdatedCurrentInput(newType) {\n+    const widgetAttributes = widgetToAttributes[widgetID][field];\n+    if (!newType) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361"}, "originalPosition": 109}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMTM1OA==", "bodyText": "I am not sure what this type is intended for? Can you add some comments about it. I am trying to understand how this is related to multiple-values input and what Value-Label pair and ID-Label pair mean here.", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434311358", "createdAt": "2020-06-03T05:11:34Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput/index.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { withStyles } from '@material-ui/core';\n+import { StyleRules } from '@material-ui/core/styles';\n+import If from 'components/If';\n+import KeyValuePairs from 'components/KeyValuePairs';\n+import { COMMON_DELIMITER } from 'components/PluginJSONCreator/constants';\n+import PluginInput from 'components/PluginJSONCreator/Create/Content/PluginInput';\n+import * as React from 'react';\n+\n+export enum SupportedType {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMTU5OA==", "bodyText": "Can this be a switch?", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434311598", "createdAt": "2020-06-03T05:12:32Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput/index.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { withStyles } from '@material-ui/core';\n+import { StyleRules } from '@material-ui/core/styles';\n+import If from 'components/If';\n+import KeyValuePairs from 'components/KeyValuePairs';\n+import { COMMON_DELIMITER } from 'components/PluginJSONCreator/constants';\n+import PluginInput from 'components/PluginJSONCreator/Create/Content/PluginInput';\n+import * as React from 'react';\n+\n+export enum SupportedType {\n+  String = 'string',\n+  Number = 'number',\n+  ValueLabelPair = 'Value-Label pair',\n+  IDLabelPair = 'ID-Label pair',\n+}\n+\n+const styles = (): StyleRules => {\n+  return {\n+    typeSelectInput: {\n+      marginTop: '5px',\n+      marginBottom: '5px',\n+      width: '20%',\n+    },\n+  };\n+};\n+\n+export const processSupportedTypes = (types: string[]) => {\n+  const allTypes = new Set();\n+  types.forEach((type) => {\n+    switch (type) {\n+      case 'string[]':\n+        allTypes.add(SupportedType.String);\n+        break;\n+      case 'number[]':\n+        allTypes.add(SupportedType.Number);\n+        break;\n+      case 'IOption[]':\n+        allTypes.add(SupportedType.IDLabelPair);\n+        break;\n+      case 'IDropdownOption[]':\n+        allTypes.add(SupportedType.String);\n+        allTypes.add(SupportedType.Number);\n+        allTypes.add(SupportedType.ValueLabelPair);\n+        break;\n+      case 'ISelectOptions[]':\n+        allTypes.add(SupportedType.ValueLabelPair);\n+        break;\n+      case 'FilterOption[]':\n+        allTypes.add(SupportedType.String);\n+        allTypes.add(SupportedType.IDLabelPair);\n+        break;\n+      default:\n+        break;\n+    }\n+  });\n+  return allTypes;\n+};\n+\n+const AttributeMultipleValuesInputView = ({\n+  classes,\n+  supportedTypes,\n+  widgetToAttributes,\n+  setWidgetToAttributes,\n+  widgetID,\n+  field,\n+}) => {\n+  const cleanSupportedTypes = Array.from(processSupportedTypes(supportedTypes).values());\n+  const [selectedType, setSelectedType] = React.useState(null);\n+  const [currentInput, setCurrentInput] = React.useState(null);\n+\n+  React.useEffect(() => {\n+    const initialType = getInitialType();\n+    setSelectedType(initialType);\n+    setCurrentInput(getUpdatedCurrentInput(initialType));\n+  }, []);\n+\n+  function getInitialType() {\n+    const widgetAttributes = widgetToAttributes[widgetID][field];\n+    let newType;\n+    if (!widgetAttributes || widgetAttributes.length === 0) {\n+      newType = cleanSupportedTypes[0];\n+    } else if (widgetAttributes[0].value) {\n+      newType = SupportedType.ValueLabelPair;\n+    } else if (widgetAttributes[0].id) {\n+      newType = SupportedType.IDLabelPair;\n+    } else {\n+      newType = SupportedType.String;\n+    }\n+    return newType;\n+  }\n+\n+  function getUpdatedCurrentInput(newType) {\n+    const widgetAttributes = widgetToAttributes[widgetID][field];\n+    if (!newType) {\n+      return '';\n+    } else if (newType === SupportedType.Number || newType === SupportedType.String) {\n+      return widgetAttributes ? widgetAttributes.join(COMMON_DELIMITER) : '';\n+    } else {\n+      if (widgetAttributes && widgetAttributes.length > 0) {\n+        return {\n+          pairs: widgetAttributes.map((keyvalue) => {\n+            if (keyvalue.id) {\n+              return {\n+                key: keyvalue.id,\n+                value: keyvalue.label,\n+              };\n+            } else {\n+              return {\n+                key: keyvalue.value,\n+                value: keyvalue.label,\n+              };\n+            }\n+          }),\n+        };\n+      } else {\n+        return { pairs: [{ key: '', value: '' }] };\n+      }\n+    }\n+  }\n+\n+  const switchInputType = (newType) => {\n+    setSelectedType(newType);\n+    setCurrentInput(getUpdatedCurrentInput(newType));\n+    setWidgetToAttributes((prevObjs) => ({\n+      ...prevObjs,\n+      [widgetID]: { ...prevObjs[widgetID], [field]: [] },\n+    }));\n+  };\n+\n+  const onAttributeChange = (newVal) => {\n+    setCurrentInput(newVal);\n+    setWidgetToAttributes((prevObjs) => ({\n+      ...prevObjs,\n+      [widgetID]: { ...prevObjs[widgetID], [field]: newVal.split(COMMON_DELIMITER) },\n+    }));\n+  };\n+\n+  const onKeyValueAttributeChange = (keyvalue, type: SupportedType) => {\n+    if (type === SupportedType.ValueLabelPair) {\n+      const keyvaluePairs = keyvalue.pairs.map((pair) => {\n+        return { value: pair.key, label: pair.value };\n+      });\n+      setWidgetToAttributes((prevObjs) => ({\n+        ...prevObjs,\n+        [widgetID]: { ...prevObjs[widgetID], [field]: keyvaluePairs },\n+      }));\n+    } else {\n+      const keyvaluePairs = keyvalue.pairs.map((pair) => {\n+        return { id: pair.key, label: pair.value };\n+      });\n+      setWidgetToAttributes((prevObjs) => ({\n+        ...prevObjs,\n+        [widgetID]: { ...prevObjs[widgetID], [field]: keyvaluePairs },\n+      }));\n+    }\n+  };\n+\n+  const renderAttributeMultipleValuesInput = () => {\n+    if (selectedType === SupportedType.ValueLabelPair) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361"}, "originalPosition": 174}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjM2NQ==", "bodyText": "Can we inverse the logic and have the switch outside of the if...else condition block?\nif (isMultipleInput) {\n  return (\n    <AttributeMultipleValuesInput\n      supportedTypes={supportedTypes}\n      widgetToAttributes={widgetToAttributes}\n      setWidgetToAttributes={setWidgetToAttributes}\n      widgetID={widgetID}\n      field={field}\n    />\n  );\n}\n\nswitch (fieldInfo.type) {\n  ...\n}", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434312365", "createdAt": "2020-06-03T05:15:13Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/index.tsx", "diffHunk": "@@ -0,0 +1,156 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import WidgetWrapper from 'components/ConfigurationGroup/WidgetWrapper';\n+import PluginInput from 'components/PluginJSONCreator/Create/Content/PluginInput';\n+import AttributeKeyValueInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeKeyValueInput';\n+import AttributeMultipleValuesInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput';\n+import * as React from 'react';\n+\n+const WidgetAttributeInput = ({\n+  field,\n+  fieldInfo,\n+  widgetToAttributes,\n+  setWidgetToAttributes,\n+  widgetID,\n+  widgetType,\n+}) => {\n+  const onAttributeChange = (newVal) => {\n+    setWidgetToAttributes((prevObjs) => ({\n+      ...prevObjs,\n+      [widgetID]: { ...prevObjs[widgetID], [field]: newVal },\n+    }));\n+  };\n+\n+  const renderAttributeInput = () => {\n+    if (!fieldInfo) {\n+      return;\n+    }\n+    const codeEditors = [\n+      'javascript-editor',\n+      'json-editor',\n+      'python-editor',\n+      'scala-editor',\n+      'sql-editor',\n+    ];\n+    if (field === 'default' && codeEditors.includes(widgetType)) {\n+      return (\n+        <WidgetWrapper\n+          widgetProperty={{\n+            field,\n+            name: field,\n+            'widget-type': widgetType,\n+            'widget-attributes': {},\n+          }}\n+          pluginProperty={{\n+            required: fieldInfo.required,\n+            name: 'code-editor',\n+          }}\n+          value={widgetToAttributes[widgetID][field]}\n+          onChange={onAttributeChange}\n+        />\n+      );\n+    }\n+\n+    const isMultipleInput = fieldInfo.type.includes('[]');\n+    const supportedTypes = fieldInfo.type.split('|');\n+    if (!isMultipleInput) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjY3Ng==", "bodyText": "All the cases seem to use the same component and same props. Can we have a helper function that will generate these props based on the field type and remove this switch entirely?", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434312676", "createdAt": "2020-06-03T05:16:15Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/index.tsx", "diffHunk": "@@ -0,0 +1,156 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import WidgetWrapper from 'components/ConfigurationGroup/WidgetWrapper';\n+import PluginInput from 'components/PluginJSONCreator/Create/Content/PluginInput';\n+import AttributeKeyValueInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeKeyValueInput';\n+import AttributeMultipleValuesInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput';\n+import * as React from 'react';\n+\n+const WidgetAttributeInput = ({\n+  field,\n+  fieldInfo,\n+  widgetToAttributes,\n+  setWidgetToAttributes,\n+  widgetID,\n+  widgetType,\n+}) => {\n+  const onAttributeChange = (newVal) => {\n+    setWidgetToAttributes((prevObjs) => ({\n+      ...prevObjs,\n+      [widgetID]: { ...prevObjs[widgetID], [field]: newVal },\n+    }));\n+  };\n+\n+  const renderAttributeInput = () => {\n+    if (!fieldInfo) {\n+      return;\n+    }\n+    const codeEditors = [\n+      'javascript-editor',\n+      'json-editor',\n+      'python-editor',\n+      'scala-editor',\n+      'sql-editor',\n+    ];\n+    if (field === 'default' && codeEditors.includes(widgetType)) {\n+      return (\n+        <WidgetWrapper\n+          widgetProperty={{\n+            field,\n+            name: field,\n+            'widget-type': widgetType,\n+            'widget-attributes': {},\n+          }}\n+          pluginProperty={{\n+            required: fieldInfo.required,\n+            name: 'code-editor',\n+          }}\n+          value={widgetToAttributes[widgetID][field]}\n+          onChange={onAttributeChange}\n+        />\n+      );\n+    }\n+\n+    const isMultipleInput = fieldInfo.type.includes('[]');\n+    const supportedTypes = fieldInfo.type.split('|');\n+    if (!isMultipleInput) {\n+      switch (fieldInfo.type) {\n+        case 'string':\n+          return (\n+            <PluginInput\n+              widgetType={'textbox'}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjc1OQ==", "bodyText": "nit: import from specific submodules.", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434312759", "createdAt": "2020-06-03T05:16:36Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/index.tsx", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { Dialog, DialogContent, DialogTitle, IconButton } from '@material-ui/core';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjg3Mw==", "bodyText": "As mentioned in other PRs, please avoid this. It will lead to regressions in unintended places tomorrow if we change anything here.", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434312873", "createdAt": "2020-06-03T05:17:09Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/index.tsx", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { Dialog, DialogContent, DialogTitle, IconButton } from '@material-ui/core';\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+import CloseIcon from '@material-ui/icons/Close';\n+import If from 'components/If';\n+import { h2Styles } from 'components/Markdown/MarkdownHeading';\n+import { WIDGET_TYPE_TO_ATTRIBUTES } from 'components/PluginJSONCreator/constants';\n+import WidgetAttributeInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput';\n+import WidgetInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetInput';\n+import { ICreateContext } from 'components/PluginJSONCreator/CreateContextConnect';\n+import * as React from 'react';\n+\n+const styles = (theme): StyleRules => {\n+  return {\n+    widgetAttributeInput: {\n+      '& > *': {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMzQ2Ng==", "bodyText": "We should use the standard modal we have within cdap. I don't believe we have this modal ported to css-in-js yet but it should be easy to add that. IT is a simple modal with dark blue backeground and white text for heading. Like this,", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434313466", "createdAt": "2020-06-03T05:19:24Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/index.tsx", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { Dialog, DialogContent, DialogTitle, IconButton } from '@material-ui/core';\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+import CloseIcon from '@material-ui/icons/Close';\n+import If from 'components/If';\n+import { h2Styles } from 'components/Markdown/MarkdownHeading';\n+import { WIDGET_TYPE_TO_ATTRIBUTES } from 'components/PluginJSONCreator/constants';\n+import WidgetAttributeInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput';\n+import WidgetInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetInput';\n+import { ICreateContext } from 'components/PluginJSONCreator/CreateContextConnect';\n+import * as React from 'react';\n+\n+const styles = (theme): StyleRules => {\n+  return {\n+    widgetAttributeInput: {\n+      '& > *': {\n+        width: '100%',\n+        marginTop: '10px',\n+        marginBottom: '10px',\n+      },\n+    },\n+    widgetAttributesTitle: {\n+      marginTop: '15px',\n+      marginBottom: '15px',\n+    },\n+    h2Title: {\n+      ...h2Styles(theme).root,\n+      marginBottom: '5px',\n+    },\n+  };\n+};\n+\n+interface IWidgetAttributesCollectionProps extends WithStyles<typeof styles>, ICreateContext {\n+  widgetAttributesOpen: boolean;\n+  onWidgetAttributesClose: () => void;\n+  widgetID: number;\n+}\n+\n+const WidgetAttributesCollectionView: React.FC<IWidgetAttributesCollectionProps> = ({\n+  classes,\n+  widgetAttributesOpen,\n+  onWidgetAttributesClose,\n+  widgetID,\n+  widgetToInfo,\n+  setWidgetToInfo,\n+  widgetToAttributes,\n+  setWidgetToAttributes,\n+}) => {\n+  const widget = widgetToInfo[widgetID];\n+  const widgetType = widget ? widget.widgetType : null;\n+  const attributeFields =\n+    widgetToAttributes && widgetToAttributes[widgetID]\n+      ? Object.keys(widgetToAttributes[widgetID])\n+      : [];\n+  return (\n+    <div>\n+      <Dialog", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361"}, "originalPosition": 72}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f1bba4bdece934742d490362160433532e4ba361", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/f1bba4bdece934742d490362160433532e4ba361", "committedDate": "2020-06-01T20:36:43Z", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)"}, "afterCommit": {"oid": "e0e661e4103791e61d809488fe45111bba142f47", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/e0e661e4103791e61d809488fe45111bba142f47", "committedDate": "2020-06-03T22:16:00Z", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e0e661e4103791e61d809488fe45111bba142f47", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/e0e661e4103791e61d809488fe45111bba142f47", "committedDate": "2020-06-03T22:16:00Z", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)"}, "afterCommit": {"oid": "93144cd795d1220c8fa062139d3f01a13babe544", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/93144cd795d1220c8fa062139d3f01a13babe544", "committedDate": "2020-06-03T22:20:08Z", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df6c85b9d2bdb7e9dbc8a0aaa5faa3c782d4d7e0", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/df6c85b9d2bdb7e9dbc8a0aaa5faa3c782d4d7e0", "committedDate": "2020-06-04T13:26:53Z", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63d36937192f3499531228fb3ef9c778510a93d5", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/63d36937192f3499531228fb3ef9c778510a93d5", "committedDate": "2020-06-04T13:37:20Z", "message": "address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "294db0ac5807397d4870a43c805c7db7ca3754bf", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/294db0ac5807397d4870a43c805c7db7ca3754bf", "committedDate": "2020-06-04T13:41:14Z", "message": "further fix additional stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a5a0186be7e6a10441920e56c9e70f2701cbdfb", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/8a5a0186be7e6a10441920e56c9e70f2701cbdfb", "committedDate": "2020-06-04T15:11:01Z", "message": "address comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "93144cd795d1220c8fa062139d3f01a13babe544", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/93144cd795d1220c8fa062139d3f01a13babe544", "committedDate": "2020-06-03T22:20:08Z", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)"}, "afterCommit": {"oid": "8a5a0186be7e6a10441920e56c9e70f2701cbdfb", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/8a5a0186be7e6a10441920e56c9e70f2701cbdfb", "committedDate": "2020-06-04T15:11:01Z", "message": "address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d7f7371c7654147959aafbd9e67600591220a55", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/4d7f7371c7654147959aafbd9e67600591220a55", "committedDate": "2020-06-04T15:50:12Z", "message": "address comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dffbb19130e9979febd5e41f0a8d263a568492fd", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/dffbb19130e9979febd5e41f0a8d263a568492fd", "committedDate": "2020-06-04T15:45:30Z", "message": "address comments"}, "afterCommit": {"oid": "4d7f7371c7654147959aafbd9e67600591220a55", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/4d7f7371c7654147959aafbd9e67600591220a55", "committedDate": "2020-06-04T15:50:12Z", "message": "address comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2089, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}