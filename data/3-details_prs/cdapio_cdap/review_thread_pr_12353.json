{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NTM4MjY1", "number": 12353, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMzo1OTozMFrOEGL1MA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODoxMzoxM1rOEGdgVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0OTIwNzUyOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMzo1OTozMFrOGk0yxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMTo1MzoxMFrOGlYtLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2Njg4Ng==", "bodyText": "Do we need to format the headers? Aren't these just column names?", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441266886", "createdAt": "2020-06-17T03:59:30Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "diffHunk": "@@ -121,7 +130,9 @@ const DataTableView: React.FC<IDataTableProps> = ({\n               <TableRow className={classes.row} key={`tr-${j}`}>\n                 {headers.map((fieldName, k) => {\n                   return (\n-                    <CustomTableCell key={`table-cell-${k}`}>{record[fieldName]}</CustomTableCell>\n+                    <CustomTableCell key={`table-cell-${k}`}>\n+                      {format(record[fieldName])}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ff6b418398405f1748e8da1d1c3a6a269b2e69"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU4NTk1NA==", "bodyText": "I thought there was a small chance the column names could also be objects, in the case of nested schemas.", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441585954", "createdAt": "2020-06-17T14:24:32Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "diffHunk": "@@ -121,7 +130,9 @@ const DataTableView: React.FC<IDataTableProps> = ({\n               <TableRow className={classes.row} key={`tr-${j}`}>\n                 {headers.map((fieldName, k) => {\n                   return (\n-                    <CustomTableCell key={`table-cell-${k}`}>{record[fieldName]}</CustomTableCell>\n+                    <CustomTableCell key={`table-cell-${k}`}>\n+                      {format(record[fieldName])}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2Njg4Ng=="}, "originalCommit": {"oid": "10ff6b418398405f1748e8da1d1c3a6a269b2e69"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0MzQwMA==", "bodyText": "Hhmm I am not sure if thats how nested schema column names would be. It will most likely be a single column whose values could be tables. We can leave this as is here until we manually verify nested schemas.", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441843400", "createdAt": "2020-06-17T21:25:48Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "diffHunk": "@@ -121,7 +130,9 @@ const DataTableView: React.FC<IDataTableProps> = ({\n               <TableRow className={classes.row} key={`tr-${j}`}>\n                 {headers.map((fieldName, k) => {\n                   return (\n-                    <CustomTableCell key={`table-cell-${k}`}>{record[fieldName]}</CustomTableCell>\n+                    <CustomTableCell key={`table-cell-${k}`}>\n+                      {format(record[fieldName])}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2Njg4Ng=="}, "originalCommit": {"oid": "10ff6b418398405f1748e8da1d1c3a6a269b2e69"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1NTI3OA==", "bodyText": "I will add a comment for context.", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441855278", "createdAt": "2020-06-17T21:53:10Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "diffHunk": "@@ -121,7 +130,9 @@ const DataTableView: React.FC<IDataTableProps> = ({\n               <TableRow className={classes.row} key={`tr-${j}`}>\n                 {headers.map((fieldName, k) => {\n                   return (\n-                    <CustomTableCell key={`table-cell-${k}`}>{record[fieldName]}</CustomTableCell>\n+                    <CustomTableCell key={`table-cell-${k}`}>\n+                      {format(record[fieldName])}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2Njg4Ng=="}, "originalCommit": {"oid": "10ff6b418398405f1748e8da1d1c3a6a269b2e69"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjEwMzI0OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODoxMzoxM1rOGlRcRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMjo1NzowNFrOGlaEfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczNjI2MQ==", "bodyText": "might have to test this with undefined and null values to make sure it renders ok", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441736261", "createdAt": "2020-06-17T18:13:13Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "diffHunk": "@@ -97,6 +97,13 @@ const DataTableView: React.FC<IDataTableProps> = ({\n     return msg;\n   };\n \n+  const format = (field: any) => {\n+    if (typeof field === 'object') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ff6b418398405f1748e8da1d1c3a6a269b2e69"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0NTA1OA==", "bodyText": "I think either should be ok as react can render both null and undefined. Although in this case it will render empty value and \"null\" as string", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441845058", "createdAt": "2020-06-17T21:29:28Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "diffHunk": "@@ -97,6 +97,13 @@ const DataTableView: React.FC<IDataTableProps> = ({\n     return msg;\n   };\n \n+  const format = (field: any) => {\n+    if (typeof field === 'object') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczNjI2MQ=="}, "originalCommit": {"oid": "10ff6b418398405f1748e8da1d1c3a6a269b2e69"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg3NzE0Ng==", "bodyText": "Both null and undefined get rendered as empty values because the backend returns undefined for both (even if the value was null in the original dataset).", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441877146", "createdAt": "2020-06-17T22:55:38Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "diffHunk": "@@ -97,6 +97,13 @@ const DataTableView: React.FC<IDataTableProps> = ({\n     return msg;\n   };\n \n+  const format = (field: any) => {\n+    if (typeof field === 'object') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczNjI2MQ=="}, "originalCommit": {"oid": "10ff6b418398405f1748e8da1d1c3a6a269b2e69"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg3NzYyOA==", "bodyText": "More specifically: For fields that have values of undefined or null, the backend doesn't return anything in the record for that field, so when the UI checks for the value of the field in that record, it returns \"undefined.\"", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441877628", "createdAt": "2020-06-17T22:57:04Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "diffHunk": "@@ -97,6 +97,13 @@ const DataTableView: React.FC<IDataTableProps> = ({\n     return msg;\n   };\n \n+  const format = (field: any) => {\n+    if (typeof field === 'object') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczNjI2MQ=="}, "originalCommit": {"oid": "10ff6b418398405f1748e8da1d1c3a6a269b2e69"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3281, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}