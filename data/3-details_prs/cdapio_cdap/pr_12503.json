{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NjY4MTA4", "number": 12503, "title": "[CDAP-16850] Adds error handling for schema editor", "bodyText": "Adds error handling to highlight errors in output schema during stage validation in pipelines\nAdds doc and aliases to fields in a record based on avro spec.\nReplace TextboxOnValium with Textbox for macro editor in output schema.", "createdAt": "2020-07-25T20:56:45Z", "url": "https://github.com/cdapio/cdap/pull/12503", "merged": true, "mergeCommit": {"oid": "9532695033c35bab0da0da6968d22c2a30442944"}, "closed": true, "closedAt": "2020-07-28T04:02:18Z", "author": {"login": "ajainarayanan"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5JMYVAFqTQ1NjE2NTgwNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5MQ6dABqjM1OTIyNDU2ODk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MTY1ODA3", "url": "https://github.com/cdapio/cdap/pull/12503#pullrequestreview-456165807", "createdAt": "2020-07-27T22:00:24Z", "commit": {"oid": "02d83c2f233e3cb08d32d1581781ec73dde19eae"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjowMDoyNFrOG31I1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjowMTozMlrOG31KvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NTQ3Ng==", "bodyText": "can if (typeProperties && typeProperties.doc) also work as well?", "url": "https://github.com/cdapio/cdap/pull/12503#discussion_r461195476", "createdAt": "2020-07-27T22:00:24Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/SchemaEditor/Context/SchemaGenerator.ts", "diffHunk": "@@ -235,6 +237,12 @@ function SchemaGenerator(schemaTree: INode) {\n       if (isFieldComplexType) {\n         field.type = generateSchemaFromComplexType(type, currentField, nullable);\n       }\n+      if (!isEmpty(typeProperties) && typeProperties.doc) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02d83c2f233e3cb08d32d1581781ec73dde19eae"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NTk2NQ==", "bodyText": "Could we add a comment explaining why we need such condition? Or could we possibly break it down into a function or const?", "url": "https://github.com/cdapio/cdap/pull/12503#discussion_r461195965", "createdAt": "2020-07-27T22:01:32Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/SchemaEditor/RowButtons/FieldAttributes/FieldAttributesPopoverButton.tsx", "diffHunk": "@@ -98,10 +103,15 @@ function FieldPropertiesPopoverButton({\n         }}\n       >\n         <fieldset className={classes.popoverContainer} disabled={disabled}>\n-          <If condition={!isFlatRowTypeComplex(type)}>\n-            <strong>No Attributes</strong>\n-          </If>\n-          <If condition={type === AvroSchemaTypesEnum.RECORD || type === AvroSchemaTypesEnum.ENUM}>\n+          <If\n+            condition={\n+              (type === AvroSchemaTypesEnum.RECORD ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02d83c2f233e3cb08d32d1581781ec73dde19eae"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MTY4MjQ3", "url": "https://github.com/cdapio/cdap/pull/12503#pullrequestreview-456168247", "createdAt": "2020-07-27T22:05:15Z", "commit": {"oid": "02d83c2f233e3cb08d32d1581781ec73dde19eae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MTcxMzQ0", "url": "https://github.com/cdapio/cdap/pull/12503#pullrequestreview-456171344", "createdAt": "2020-07-27T22:11:51Z", "commit": {"oid": "02d83c2f233e3cb08d32d1581781ec73dde19eae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjoxMTo1MVrOG31avw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjoxMTo1MVrOG31avw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIwMDA2Mw==", "bodyText": "What are the types of doc and aliases? aliases is an array, correct? Should they be copied here to avoid any issues from downstream mutations?", "url": "https://github.com/cdapio/cdap/pull/12503#discussion_r461200063", "createdAt": "2020-07-27T22:11:51Z", "author": {"login": "njbriggs"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/SchemaEditor/Context/SchemaGenerator.ts", "diffHunk": "@@ -235,6 +237,12 @@ function SchemaGenerator(schemaTree: INode) {\n       if (isFieldComplexType) {\n         field.type = generateSchemaFromComplexType(type, currentField, nullable);\n       }\n+      if (!isEmpty(typeProperties) && typeProperties.doc) {\n+        field.doc = typeProperties.doc;\n+      }\n+      if (!isEmpty(typeProperties) && typeProperties.aliases) {\n+        field.aliases = typeProperties.aliases;\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02d83c2f233e3cb08d32d1581781ec73dde19eae"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MTg1NTc1", "url": "https://github.com/cdapio/cdap/pull/12503#pullrequestreview-456185575", "createdAt": "2020-07-27T22:44:23Z", "commit": {"oid": "6932bd68b43ad0140790f607f3a6345d1428d359"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6932bd68b43ad0140790f607f3a6345d1428d359", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/6932bd68b43ad0140790f607f3a6345d1428d359", "committedDate": "2020-07-27T22:33:43Z", "message": "Addresses review comments"}, "afterCommit": {"oid": "49bda057a928c7191cca867122adeef975de8ea0", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/49bda057a928c7191cca867122adeef975de8ea0", "committedDate": "2020-07-28T01:35:08Z", "message": "Addresses review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bad4e2b59388d253b305632441be22501470db7", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/4bad4e2b59388d253b305632441be22501470db7", "committedDate": "2020-07-28T01:36:36Z", "message": "[CDAP-16850] Adds error handling for schema editor\n\n - Modifies schema editor to accept errors as input for handling errors during stage level validation\n - Fixes angular nodeconfig controller to pass on validation errors to schema editor\n - Adds the ability to add doc and aliases to fields in the record (valid avro spec)\n - Replaces TextboxOnValium with Textbox for macro editor in plugin schema editor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49bda057a928c7191cca867122adeef975de8ea0", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/49bda057a928c7191cca867122adeef975de8ea0", "committedDate": "2020-07-28T01:35:08Z", "message": "Addresses review comments"}, "afterCommit": {"oid": "4bad4e2b59388d253b305632441be22501470db7", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/4bad4e2b59388d253b305632441be22501470db7", "committedDate": "2020-07-28T01:36:36Z", "message": "[CDAP-16850] Adds error handling for schema editor\n\n - Modifies schema editor to accept errors as input for handling errors during stage level validation\n - Fixes angular nodeconfig controller to pass on validation errors to schema editor\n - Adds the ability to add doc and aliases to fields in the record (valid avro spec)\n - Replaces TextboxOnValium with Textbox for macro editor in plugin schema editor"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1864, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}