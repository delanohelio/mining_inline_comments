{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNzE1NDk1", "number": 12046, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMToyODo0NVrODwnoSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMTozMDoyOVrODwnpXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMzA3NTMwOnYy", "diffSide": "RIGHT", "path": "cdap-app-fabric/src/main/java/io/cdap/cdap/gateway/handlers/AppLifecycleHttpHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMToyODo0NVrOGDueBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMTozMjowMFrOGDugqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MDI2Mw==", "bodyText": "nit - I dont think we need this", "url": "https://github.com/cdapio/cdap/pull/12046#discussion_r406560263", "createdAt": "2020-04-10T01:28:45Z", "author": {"login": "yaojiefeng"}, "path": "cdap-app-fabric/src/main/java/io/cdap/cdap/gateway/handlers/AppLifecycleHttpHandler.java", "diffHunk": "@@ -391,7 +391,7 @@ public void updateApp(FullHttpRequest request, HttpResponder responder,\n    * ]\n    * }\n    * </pre>\n-   *\n+   * <p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04aeca5d86a93462532273e307298ba8fd81409a"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MDkzNg==", "bodyText": "Removed", "url": "https://github.com/cdapio/cdap/pull/12046#discussion_r406560936", "createdAt": "2020-04-10T01:32:00Z", "author": {"login": "MEseifan"}, "path": "cdap-app-fabric/src/main/java/io/cdap/cdap/gateway/handlers/AppLifecycleHttpHandler.java", "diffHunk": "@@ -391,7 +391,7 @@ public void updateApp(FullHttpRequest request, HttpResponder responder,\n    * ]\n    * }\n    * </pre>\n-   *\n+   * <p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MDI2Mw=="}, "originalCommit": {"oid": "04aeca5d86a93462532273e307298ba8fd81409a"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMzA3NzI1OnYy", "diffSide": "RIGHT", "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/app/services/http/AppFabricTestBase.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMToyOTo1MFrOGDufFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMTozODoyN1rOGDumAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MDUzMw==", "bodyText": "This might break unit test as some test might depend on the config, is this required for your unit test? If not lets not make this change", "url": "https://github.com/cdapio/cdap/pull/12046#discussion_r406560533", "createdAt": "2020-04-10T01:29:50Z", "author": {"login": "yaojiefeng"}, "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/app/services/http/AppFabricTestBase.java", "diffHunk": "@@ -530,7 +530,7 @@ protected HttpResponse deploy(Class<?> application, int expectedCode, @Nullable\n   }\n \n   protected HttpResponse deploy(Id.Application appId,\n-                                AppRequest<? extends Config> appRequest) throws Exception {\n+                                AppRequest<?> appRequest) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04aeca5d86a93462532273e307298ba8fd81409a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MTIyNg==", "bodyText": "This is needed for my test since I need to test with a configuration of type String which doesnt work with ? extends Config. I'm running all other tests that use this base to verify it didnt break them", "url": "https://github.com/cdapio/cdap/pull/12046#discussion_r406561226", "createdAt": "2020-04-10T01:33:23Z", "author": {"login": "MEseifan"}, "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/app/services/http/AppFabricTestBase.java", "diffHunk": "@@ -530,7 +530,7 @@ protected HttpResponse deploy(Class<?> application, int expectedCode, @Nullable\n   }\n \n   protected HttpResponse deploy(Id.Application appId,\n-                                AppRequest<? extends Config> appRequest) throws Exception {\n+                                AppRequest<?> appRequest) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MDUzMw=="}, "originalCommit": {"oid": "04aeca5d86a93462532273e307298ba8fd81409a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MjMwNw==", "bodyText": "ok, let's just ensure the bamboo build passes.", "url": "https://github.com/cdapio/cdap/pull/12046#discussion_r406562307", "createdAt": "2020-04-10T01:38:27Z", "author": {"login": "yaojiefeng"}, "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/app/services/http/AppFabricTestBase.java", "diffHunk": "@@ -530,7 +530,7 @@ protected HttpResponse deploy(Class<?> application, int expectedCode, @Nullable\n   }\n \n   protected HttpResponse deploy(Id.Application appId,\n-                                AppRequest<? extends Config> appRequest) throws Exception {\n+                                AppRequest<?> appRequest) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MDUzMw=="}, "originalCommit": {"oid": "04aeca5d86a93462532273e307298ba8fd81409a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMzA3ODA3OnYy", "diffSide": "RIGHT", "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/app/services/http/handlers/AppLifecycleHttpHandlerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMTozMDoyOVrOGDufkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQwMTozMzozNlrOGDuiEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MDY1Ng==", "bodyText": "just want to check - this test will fail without the fix right?", "url": "https://github.com/cdapio/cdap/pull/12046#discussion_r406560656", "createdAt": "2020-04-10T01:30:29Z", "author": {"login": "yaojiefeng"}, "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/app/services/http/handlers/AppLifecycleHttpHandlerTest.java", "diffHunk": "@@ -115,6 +115,43 @@ public void testAppWithConfig() throws Exception {\n     deleteArtifact(artifactId, 200);\n   }\n \n+  @Test\n+  public void testAppWithConfigurationString() throws Exception {\n+    Id.Application appId = Id.Application.from(Id.Namespace.DEFAULT, \"ConfigApp\");\n+    Id.Artifact artifactId = Id.Artifact.from(Id.Namespace.DEFAULT, \"appWithConfig\", \"1.0.0-SNAPSHOT\");\n+    HttpResponse response = addAppArtifact(artifactId, ConfigTestApp.class);\n+    Assert.assertEquals(200, response.getResponseCode());\n+\n+    ConfigTestApp.ConfigClass configuration = new ConfigTestApp.ConfigClass(\"abc\", \"def\");\n+    String configurationString = GSON.toJson(configuration);\n+    response = deploy(appId, new AppRequest<>(ArtifactSummary.from(artifactId.toArtifactId()), null, null, null, null,\n+                                              configurationString));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04aeca5d86a93462532273e307298ba8fd81409a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MTI5Nw==", "bodyText": "yes I removed the change and ran this test and it failed", "url": "https://github.com/cdapio/cdap/pull/12046#discussion_r406561297", "createdAt": "2020-04-10T01:33:36Z", "author": {"login": "MEseifan"}, "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/app/services/http/handlers/AppLifecycleHttpHandlerTest.java", "diffHunk": "@@ -115,6 +115,43 @@ public void testAppWithConfig() throws Exception {\n     deleteArtifact(artifactId, 200);\n   }\n \n+  @Test\n+  public void testAppWithConfigurationString() throws Exception {\n+    Id.Application appId = Id.Application.from(Id.Namespace.DEFAULT, \"ConfigApp\");\n+    Id.Artifact artifactId = Id.Artifact.from(Id.Namespace.DEFAULT, \"appWithConfig\", \"1.0.0-SNAPSHOT\");\n+    HttpResponse response = addAppArtifact(artifactId, ConfigTestApp.class);\n+    Assert.assertEquals(200, response.getResponseCode());\n+\n+    ConfigTestApp.ConfigClass configuration = new ConfigTestApp.ConfigClass(\"abc\", \"def\");\n+    String configurationString = GSON.toJson(configuration);\n+    response = deploy(appId, new AppRequest<>(ArtifactSummary.from(artifactId.toArtifactId()), null, null, null, null,\n+                                              configurationString));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjU2MDY1Ng=="}, "originalCommit": {"oid": "04aeca5d86a93462532273e307298ba8fd81409a"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2725, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}