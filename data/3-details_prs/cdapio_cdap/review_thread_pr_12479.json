{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0MDEyNDAx", "number": 12479, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoxMDowOFrOEQsf6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMjozNTowMVrOERPh8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQxNzM2OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/services/AlertStatus.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoxMDowOFrOG0_Y5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxOTo1NDozNFrOG1x6SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIxNzcwMA==", "bodyText": "We can capitalize strings to keep consistency", "url": "https://github.com/cdapio/cdap/pull/12479#discussion_r458217700", "createdAt": "2020-07-21T16:10:08Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/services/AlertStatus.ts", "diffHunk": "@@ -0,0 +1,24 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+// TO-DO(CDAP-17088): Move this to Alert component once it has been converted to TS\n+enum ALERT_STATUS {\n+  Success = 'success',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b07830e07d371966159792ed8c076ab94ac93ce"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA0NTQ0OA==", "bodyText": "This is coming from the expected props for the Alert component. I agree it looks a little funny, but we use the Alert component in a lot of places that would also need updating so I don't want to make a change to that in this PR. That said, I've noted the suggested improvement in ALERT_STATUS in the JIRA for the future typescript Alert component.", "url": "https://github.com/cdapio/cdap/pull/12479#discussion_r459045448", "createdAt": "2020-07-22T19:54:34Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/services/AlertStatus.ts", "diffHunk": "@@ -0,0 +1,24 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+// TO-DO(CDAP-17088): Move this to Alert component once it has been converted to TS\n+enum ALERT_STATUS {\n+  Success = 'success',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIxNzcwMA=="}, "originalCommit": {"oid": "5b07830e07d371966159792ed8c076ab94ac93ce"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg1OTQyNjQ0OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjoxMjoxN1rOG0_erA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMDoxMjozNlrOG1ygHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIxOTE4MA==", "bodyText": "Is it possible to define timerLabel in enums? (Pending, Running, Duration)", "url": "https://github.com/cdapio/cdap/pull/12479#discussion_r458219180", "createdAt": "2020-07-21T16:12:17Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = 'Duration';\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING && res.positionInWaitingQueue > 0) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;\n+      this.timerLabel = `${runsAheadInQueue} Pending`;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b07830e07d371966159792ed8c076ab94ac93ce"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA1NTEzMw==", "bodyText": "I can't add an enum here so I added the timer labels to global-constants.", "url": "https://github.com/cdapio/cdap/pull/12479#discussion_r459055133", "createdAt": "2020-07-22T20:12:36Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = 'Duration';\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING && res.positionInWaitingQueue > 0) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;\n+      this.timerLabel = `${runsAheadInQueue} Pending`;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIxOTE4MA=="}, "originalCommit": {"oid": "5b07830e07d371966159792ed8c076ab94ac93ce"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NDg5MDUzOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMTowMTowNlrOG10DUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTo1OTo1NlrOG16AZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA4MDUyOA==", "bodyText": "nit: the indentation seems a bit off here? I'm not sure if it's because of github UI!", "url": "https://github.com/cdapio/cdap/pull/12479#discussion_r459080528", "createdAt": "2020-07-22T21:01:06Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = this.GLOBALS.en.hydrator.preview.timerLabels.DURATION;\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING && res.positionInWaitingQueue > 0) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;\n+      this.timerLabel = `${runsAheadInQueue} ${this.GLOBALS.en.hydrator.preview.timerLabels.PENDING}`;\n+    } else if ([ WAITING, ACQUIRED, INIT, RUNNING ].includes(res.status) && this.loadingLabel !== 'Stopping') {\n+      this.timerLabel = this.GLOBALS.en.hydrator.preview.timerLabels.RUNNING;\n+      this.queueStatus = '';\n+    } else {\n+    this.timerLabel = this.GLOBALS.en.hydrator.preview.timerLabels.DURATION;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d4014397a4b5213e38cf3a84ad9b3c224e00318"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3ODA4Ng==", "bodyText": "good catch, fixed!", "url": "https://github.com/cdapio/cdap/pull/12479#discussion_r459178086", "createdAt": "2020-07-23T01:59:56Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = this.GLOBALS.en.hydrator.preview.timerLabels.DURATION;\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING && res.positionInWaitingQueue > 0) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;\n+      this.timerLabel = `${runsAheadInQueue} ${this.GLOBALS.en.hydrator.preview.timerLabels.PENDING}`;\n+    } else if ([ WAITING, ACQUIRED, INIT, RUNNING ].includes(res.status) && this.loadingLabel !== 'Stopping') {\n+      this.timerLabel = this.GLOBALS.en.hydrator.preview.timerLabels.RUNNING;\n+      this.queueStatus = '';\n+    } else {\n+    this.timerLabel = this.GLOBALS.en.hydrator.preview.timerLabels.DURATION;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA4MDUyOA=="}, "originalCommit": {"oid": "9d4014397a4b5213e38cf3a84ad9b3c224e00318"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NTE1Njk3OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQyMjozNTowMVrOG12lAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMjowMToxOFrOG16Bgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEyMTkyMQ==", "bodyText": "Would this be easier to read as minutes ? minutes : '--' or even minutes || '--'? It looks like we display -- for 0.", "url": "https://github.com/cdapio/cdap/pull/12479#discussion_r459121921", "createdAt": "2020-07-22T22:35:01Z", "author": {"login": "njbriggs"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d4014397a4b5213e38cf3a84ad9b3c224e00318"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3ODM3MA==", "bodyText": "Done", "url": "https://github.com/cdapio/cdap/pull/12479#discussion_r459178370", "createdAt": "2020-07-23T02:01:18Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTEyMTkyMQ=="}, "originalCommit": {"oid": "9d4014397a4b5213e38cf3a84ad9b3c224e00318"}, "originalPosition": 61}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3229, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}