{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1MDQzNzA5", "number": 12990, "title": "Fixing Capability management flaky test", "bodyText": "", "createdAt": "2020-12-23T21:50:35Z", "url": "https://github.com/cdapio/cdap/pull/12990", "merged": true, "mergeCommit": {"oid": "0deb4252cd942567c59c2273c7e1365df53488ec"}, "closed": true, "closedAt": "2020-12-23T23:50:23Z", "author": {"login": "pandyajay10"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdpGYLPAFqTU1ODI0NDM5Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpHNK1gFqTU1ODI2MTY5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MjQ0Mzk3", "url": "https://github.com/cdapio/cdap/pull/12990#pullrequestreview-558244397", "createdAt": "2020-12-23T21:53:58Z", "commit": {"oid": "16a90bf27dda8f7b4ac454853a6498e1792974f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMTo1Mzo1OFrOIK33hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMTo1Mzo1OFrOIK33hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODI3MjAwNA==", "bodyText": "Here I don't think we need to wait state to get stopped, we need to use other method to check for RUNNING since the program might not exist, at this time, the program should exist", "url": "https://github.com/cdapio/cdap/pull/12990#discussion_r548272004", "createdAt": "2020-12-23T21:53:58Z", "author": {"login": "yaojiefeng"}, "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/capability/CapabilityManagementServiceTest.java", "diffHunk": "@@ -207,6 +210,7 @@ public void testCapabilityRefresh() throws Exception {\n     CapabilityConfig disabledConfig = changeConfigStatus(config, CapabilityStatus.DISABLED);\n     writeConfigAsFile(externalConfigPath, disabledConfig.getCapability(), disabledConfig);\n     capabilityManagementService.runTask();\n+    waitState(programId, \"STOPPED\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16a90bf27dda8f7b4ac454853a6498e1792974f9"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MjQ0NDQx", "url": "https://github.com/cdapio/cdap/pull/12990#pullrequestreview-558244441", "createdAt": "2020-12-23T21:54:05Z", "commit": {"oid": "16a90bf27dda8f7b4ac454853a6498e1792974f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMTo1NDowNVrOIK34EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QyMTo1NDowNVrOIK34EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODI3MjE0NQ==", "bodyText": "Same here", "url": "https://github.com/cdapio/cdap/pull/12990#discussion_r548272145", "createdAt": "2020-12-23T21:54:05Z", "author": {"login": "yaojiefeng"}, "path": "cdap-app-fabric/src/test/java/io/cdap/cdap/internal/capability/CapabilityManagementServiceTest.java", "diffHunk": "@@ -341,6 +346,7 @@ public void testProgramStart() throws Exception {\n                                                            Collections.emptyList());\n     writeConfigAsFile(externalConfigPath, capability, disabledConfig);\n     capabilityManagementService.runTask();\n+    waitState(programId, \"STOPPED\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16a90bf27dda8f7b4ac454853a6498e1792974f9"}, "originalPosition": 44}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "16a90bf27dda8f7b4ac454853a6498e1792974f9", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/16a90bf27dda8f7b4ac454853a6498e1792974f9", "committedDate": "2020-12-23T21:48:25Z", "message": "Fixing flaky test"}, "afterCommit": {"oid": "b57312f79c7bd19c42b81fa2e48ba4107057732a", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/b57312f79c7bd19c42b81fa2e48ba4107057732a", "committedDate": "2020-12-23T21:57:34Z", "message": "Fixing flaky test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1", "committedDate": "2020-12-23T22:01:49Z", "message": "Fixing flaky test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b57312f79c7bd19c42b81fa2e48ba4107057732a", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/b57312f79c7bd19c42b81fa2e48ba4107057732a", "committedDate": "2020-12-23T21:57:34Z", "message": "Fixing flaky test"}, "afterCommit": {"oid": "d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1", "committedDate": "2020-12-23T22:01:49Z", "message": "Fixing flaky test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MjQ3MDQ0", "url": "https://github.com/cdapio/cdap/pull/12990#pullrequestreview-558247044", "createdAt": "2020-12-23T22:02:50Z", "commit": {"oid": "d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MjUwNTg4", "url": "https://github.com/cdapio/cdap/pull/12990#pullrequestreview-558250588", "createdAt": "2020-12-23T22:14:49Z", "commit": {"oid": "d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MjYxNjky", "url": "https://github.com/cdapio/cdap/pull/12990#pullrequestreview-558261692", "createdAt": "2020-12-23T22:51:51Z", "commit": {"oid": "d87076b2eece4d3a1f65cdf7a5eac7f97671a2a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1379, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}