{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0ODAwMjQz", "number": 11927, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNTo0ODoxMlrODl2Aow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMzozNDowNVrODl-PAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDA4ODAzOnYy", "diffSide": "RIGHT", "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/provisioner/Provisioner.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxNTo0ODoxMlrOFy9ejA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMDo0MDo1NFrOFzGzIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4MDM2NA==", "bodyText": "The second sentence is unnecessary.", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r388980364", "createdAt": "2020-03-06T15:48:12Z", "author": {"login": "chtyim"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/provisioner/Provisioner.java", "diffHunk": "@@ -141,4 +144,14 @@ default void initializeCluster(ProvisionerContext context, Cluster cluster) thro\n    */\n   Capabilities getCapabilities();\n \n+  /**\n+   * Returns {@link RuntimeJobManager} to launch and manage runtime job. This method should return a concrete instance\n+   * of runtime job manager.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExMTM5NA==", "bodyText": "Also should call out what's the default behavior.", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389111394", "createdAt": "2020-03-06T19:50:31Z", "author": {"login": "chtyim"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/provisioner/Provisioner.java", "diffHunk": "@@ -141,4 +144,14 @@ default void initializeCluster(ProvisionerContext context, Cluster cluster) thro\n    */\n   Capabilities getCapabilities();\n \n+  /**\n+   * Returns {@link RuntimeJobManager} to launch and manage runtime job. This method should return a concrete instance\n+   * of runtime job manager.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4MDM2NA=="}, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEzMzA5MQ==", "bodyText": "The second sentence is unnecessary.\n\nremoved\n\nAlso should call out what's the default behavior.\n\nyea its added in the return statement.", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389133091", "createdAt": "2020-03-06T20:40:54Z", "author": {"login": "CuriousVini"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/provisioner/Provisioner.java", "diffHunk": "@@ -141,4 +144,14 @@ default void initializeCluster(ProvisionerContext context, Cluster cluster) thro\n    */\n   Capabilities getCapabilities();\n \n+  /**\n+   * Returns {@link RuntimeJobManager} to launch and manage runtime job. This method should return a concrete instance\n+   * of runtime job manager.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk4MDM2NA=="}, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDkyMDAyOnYy", "diffSide": "RIGHT", "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJob.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTo1MTo1N1rOFzFhMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMDo1ODoyN1rOFzHRCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExMjExNA==", "bodyText": "The TwillRunnerService is not part of this interface API. Should better just say \"Represents a job that will be executed on a given runtime environment\".", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389112114", "createdAt": "2020-03-06T19:51:57Z", "author": {"login": "chtyim"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJob.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import org.apache.twill.api.TwillRunnerService;\n+\n+/**\n+ * Represents runtime job that will be submit job to {@link TwillRunnerService}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE0MDc0Nw==", "bodyText": "sounds good.", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389140747", "createdAt": "2020-03-06T20:58:27Z", "author": {"login": "CuriousVini"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJob.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import org.apache.twill.api.TwillRunnerService;\n+\n+/**\n+ * Represents runtime job that will be submit job to {@link TwillRunnerService}.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExMjExNA=="}, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDkyMjM2OnYy", "diffSide": "RIGHT", "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobEnvironment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTo1Mjo0OFrOFzFimw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMDo0MzowNVrOFzG2vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExMjQ3NQ==", "bodyText": "Can it be TwillRunner instead? The service expose the start and stop methods, meaning the caller of this method will be responsible for the lifecycle of the service. However, I believe in this case, it is the implementation who manage the lifecycle?", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389112475", "createdAt": "2020-03-06T19:52:48Z", "author": {"login": "chtyim"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobEnvironment.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import org.apache.twill.api.TwillRunner;\n+import org.apache.twill.api.TwillRunnerService;\n+import org.apache.twill.discovery.DiscoveryService;\n+import org.apache.twill.discovery.DiscoveryServiceClient;\n+\n+import java.util.Map;\n+\n+/**\n+ * Represents runtime job environment that provides information that is needed by the {@link RuntimeJob} to run the job.\n+ */\n+public interface RuntimeJobEnvironment {\n+  /**\n+   * Returns a {@link DiscoveryService} for service announcement purpose.\n+   */\n+  DiscoveryService getDiscoveryService();\n+\n+  /**\n+   * Returns a {@link DiscoveryServiceClient} for service discovery purpose.\n+   */\n+  DiscoveryServiceClient getDiscoveryServiceClient();\n+\n+  /**\n+   * Returns a {@link TwillRunnerService} for running {@link TwillRunner}.\n+   */\n+  TwillRunnerService getTwillRunnerService();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEzNDAxNQ==", "bodyText": "yea the lifecycle is managed by extension. So we can make it a runner.", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389134015", "createdAt": "2020-03-06T20:43:05Z", "author": {"login": "CuriousVini"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobEnvironment.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import org.apache.twill.api.TwillRunner;\n+import org.apache.twill.api.TwillRunnerService;\n+import org.apache.twill.discovery.DiscoveryService;\n+import org.apache.twill.discovery.DiscoveryServiceClient;\n+\n+import java.util.Map;\n+\n+/**\n+ * Represents runtime job environment that provides information that is needed by the {@link RuntimeJob} to run the job.\n+ */\n+public interface RuntimeJobEnvironment {\n+  /**\n+   * Returns a {@link DiscoveryService} for service announcement purpose.\n+   */\n+  DiscoveryService getDiscoveryService();\n+\n+  /**\n+   * Returns a {@link DiscoveryServiceClient} for service discovery purpose.\n+   */\n+  DiscoveryServiceClient getDiscoveryServiceClient();\n+\n+  /**\n+   * Returns a {@link TwillRunnerService} for running {@link TwillRunner}.\n+   */\n+  TwillRunnerService getTwillRunnerService();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExMjQ3NQ=="}, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDkzMDk5OnYy", "diffSide": "RIGHT", "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobEnvironment.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTo1NTo1NlrOFzFoBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMTowMToyMVrOFzHVnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExMzg2Mw==", "bodyText": "This is unclear, what are these properties?", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389113863", "createdAt": "2020-03-06T19:55:56Z", "author": {"login": "chtyim"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobEnvironment.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import org.apache.twill.api.TwillRunner;\n+import org.apache.twill.api.TwillRunnerService;\n+import org.apache.twill.discovery.DiscoveryService;\n+import org.apache.twill.discovery.DiscoveryServiceClient;\n+\n+import java.util.Map;\n+\n+/**\n+ * Represents runtime job environment that provides information that is needed by the {@link RuntimeJob} to run the job.\n+ */\n+public interface RuntimeJobEnvironment {\n+  /**\n+   * Returns a {@link DiscoveryService} for service announcement purpose.\n+   */\n+  DiscoveryService getDiscoveryService();\n+\n+  /**\n+   * Returns a {@link DiscoveryServiceClient} for service discovery purpose.\n+   */\n+  DiscoveryServiceClient getDiscoveryServiceClient();\n+\n+  /**\n+   * Returns a {@link TwillRunnerService} for running {@link TwillRunner}.\n+   */\n+  TwillRunnerService getTwillRunnerService();\n+\n+  /**\n+   * Returns properties to be available to {@link RuntimeJob}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE0MTkxNg==", "bodyText": "modified javadoc", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389141916", "createdAt": "2020-03-06T21:01:21Z", "author": {"login": "CuriousVini"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobEnvironment.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import org.apache.twill.api.TwillRunner;\n+import org.apache.twill.api.TwillRunnerService;\n+import org.apache.twill.discovery.DiscoveryService;\n+import org.apache.twill.discovery.DiscoveryServiceClient;\n+\n+import java.util.Map;\n+\n+/**\n+ * Represents runtime job environment that provides information that is needed by the {@link RuntimeJob} to run the job.\n+ */\n+public interface RuntimeJobEnvironment {\n+  /**\n+   * Returns a {@link DiscoveryService} for service announcement purpose.\n+   */\n+  DiscoveryService getDiscoveryService();\n+\n+  /**\n+   * Returns a {@link DiscoveryServiceClient} for service discovery purpose.\n+   */\n+  DiscoveryServiceClient getDiscoveryServiceClient();\n+\n+  /**\n+   * Returns a {@link TwillRunnerService} for running {@link TwillRunner}.\n+   */\n+  TwillRunnerService getTwillRunnerService();\n+\n+  /**\n+   * Returns properties to be available to {@link RuntimeJob}.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExMzg2Mw=="}, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDkzNDExOnYy", "diffSide": "RIGHT", "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobInfo.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTo1NzowM1rOFzFp5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTo1NzowM1rOFzFp5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExNDM0MQ==", "bodyText": "Call it getLocalizeFiles.", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389114341", "createdAt": "2020-03-06T19:57:03Z", "author": {"login": "chtyim"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobInfo.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import org.apache.twill.api.LocalFile;\n+import org.apache.twill.api.TwillRunnerService;\n+\n+import java.util.Collection;\n+\n+/**\n+ * Runtime job information. The instance of this interface will be provided to\n+ * {@link RuntimeJobManager#launch(RuntimeJobInfo)} with files to be localized and runtime job class implementation.\n+ */\n+public interface RuntimeJobInfo {\n+  /**\n+   * Returns a collection of files that are used to launch the job.\n+   */\n+  Collection<? extends LocalFile> getFilesToLocalize();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDkzNDY1OnYy", "diffSide": "RIGHT", "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobInfo.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTo1NzoxOFrOFzFqSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMTowMDowOFrOFzHTiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExNDQ0Mg==", "bodyText": "Unused import?", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389114442", "createdAt": "2020-03-06T19:57:18Z", "author": {"login": "chtyim"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobInfo.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import org.apache.twill.api.LocalFile;\n+import org.apache.twill.api.TwillRunnerService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEzNDU2NQ==", "bodyText": "not really, its added because we have a link to TwillRunnerService in javadoc of getRuntimeJobClass() method", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389134565", "createdAt": "2020-03-06T20:44:16Z", "author": {"login": "CuriousVini"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobInfo.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import org.apache.twill.api.LocalFile;\n+import org.apache.twill.api.TwillRunnerService;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExNDQ0Mg=="}, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE0MTM4Nw==", "bodyText": "changed javadoc description to not include link to TwillRunnerService", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389141387", "createdAt": "2020-03-06T21:00:08Z", "author": {"login": "CuriousVini"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobInfo.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import org.apache.twill.api.LocalFile;\n+import org.apache.twill.api.TwillRunnerService;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExNDQ0Mg=="}, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDkzNzM4OnYy", "diffSide": "RIGHT", "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTo1ODoxOFrOFzFsGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTo1ODoxOFrOFzFsGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExNDkwNw==", "bodyText": "Why stop and kill return Future while this one does not?", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389114907", "createdAt": "2020-03-06T19:58:18Z", "author": {"login": "chtyim"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobManager.java", "diffHunk": "@@ -0,0 +1,67 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * Runtime job manager to prepare and launch the job.\n+ */\n+public interface RuntimeJobManager {\n+  /**\n+   * This method uses runtime job information to launch the job.\n+   *\n+   * @param runtimeJobInfo runtime job information\n+   * @return unique runtime job id\n+   */\n+  RuntimeJobId launch(RuntimeJobInfo runtimeJobInfo) throws Exception;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDk0MTg5OnYy", "diffSide": "RIGHT", "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTo1OTo1N1rOFzFu_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTo1OTo1N1rOFzFu_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTExNTY0NA==", "bodyText": "Use the CompletionStage instead. Also, when this method throw Exception and when the returned future will fail? Why this method has to be async?", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389115644", "createdAt": "2020-03-06T19:59:57Z", "author": {"login": "chtyim"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobManager.java", "diffHunk": "@@ -0,0 +1,67 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.concurrent.CompletableFuture;\n+\n+/**\n+ * Runtime job manager to prepare and launch the job.\n+ */\n+public interface RuntimeJobManager {\n+  /**\n+   * This method uses runtime job information to launch the job.\n+   *\n+   * @param runtimeJobInfo runtime job information\n+   * @return unique runtime job id\n+   */\n+  RuntimeJobId launch(RuntimeJobInfo runtimeJobInfo) throws Exception;\n+\n+  /**\n+   * Gets job details. If the job does not exist, it should return empty job details.\n+   *\n+   * @param runtimeJobId runtime job id\n+   * @return runtime job details\n+   * @throws Exception thrown if any exception while getting job details\n+   */\n+  Optional<RuntimeJobDetail> getDetail(RuntimeJobId runtimeJobId) throws Exception;\n+\n+  /**\n+   * Provides all the jobs that are in running state. If there are no running jobs, it should return empty list.\n+   *\n+   * @return a list job details\n+   * @throws Exception thrown if any exception while getting list of running jobs\n+   */\n+  List<RuntimeJobDetail> list() throws Exception;\n+\n+  /**\n+   * Gracefully stops a running job. If the job is already in terminal status, then this method should be a no-op.\n+   *\n+   * @param runtimeJobId job to be stopped\n+   * @throws Exception thrown if any exception while stopping the job\n+   */\n+  CompletableFuture<RuntimeJobId> stop(RuntimeJobId runtimeJobId) throws Exception;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21176772f535324f32f77da876f6937d0dc13b7a"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTQzNTUyOnYy", "diffSide": "RIGHT", "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMzozNDowNVrOFzKerw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMDowNzoxMVrOFzK57g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE5MzM5MQ==", "bodyText": "What if the job doesn't exist? What will be the contract?", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389193391", "createdAt": "2020-03-06T23:34:05Z", "author": {"login": "chtyim"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobManager.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+/**\n+ * Runtime job manager to prepare and launch the job.\n+ */\n+public interface RuntimeJobManager {\n+  /**\n+   * This method uses runtime job information to launch the job.\n+   *\n+   * @param runtimeJobInfo runtime job information\n+   * @return unique runtime job id\n+   */\n+  RuntimeJobId launch(RuntimeJobInfo runtimeJobInfo) throws Exception;\n+\n+  /**\n+   * Gets job details. If the job does not exist, it should return empty job details.\n+   *\n+   * @param runtimeJobId runtime job id\n+   * @return runtime job details\n+   * @throws Exception thrown if any exception while getting job details\n+   */\n+  Optional<RuntimeJobDetail> getDetail(RuntimeJobId runtimeJobId) throws Exception;\n+\n+  /**\n+   * Provides all the jobs that are in running state. If there are no running jobs, it should return empty list.\n+   *\n+   * @return a list job details\n+   * @throws Exception thrown if any exception while getting list of running jobs\n+   */\n+  List<RuntimeJobDetail> list() throws Exception;\n+\n+  /**\n+   * Gracefully stops a running job. If the job is already in terminal status, then this method should be a no-op.\n+   *\n+   * @param runtimeJobId job to be stopped\n+   * @throws Exception thrown if any exception while stopping the job\n+   */\n+  void stop(RuntimeJobId runtimeJobId) throws Exception;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "891699202bf24438bc516316b0b3a32e948c8b81"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwMDM2Ng==", "bodyText": "that would be a no-op. This case can only happen if a job is deleted on remote cluster(by user manually). In that case, it is safe to assume the job reached terminal state before getting deleted.", "url": "https://github.com/cdapio/cdap/pull/11927#discussion_r389200366", "createdAt": "2020-03-07T00:07:11Z", "author": {"login": "CuriousVini"}, "path": "cdap-runtime-spi/src/main/java/io/cdap/cdap/runtime/spi/runtimejob/RuntimeJobManager.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package io.cdap.cdap.runtime.spi.runtimejob;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+/**\n+ * Runtime job manager to prepare and launch the job.\n+ */\n+public interface RuntimeJobManager {\n+  /**\n+   * This method uses runtime job information to launch the job.\n+   *\n+   * @param runtimeJobInfo runtime job information\n+   * @return unique runtime job id\n+   */\n+  RuntimeJobId launch(RuntimeJobInfo runtimeJobInfo) throws Exception;\n+\n+  /**\n+   * Gets job details. If the job does not exist, it should return empty job details.\n+   *\n+   * @param runtimeJobId runtime job id\n+   * @return runtime job details\n+   * @throws Exception thrown if any exception while getting job details\n+   */\n+  Optional<RuntimeJobDetail> getDetail(RuntimeJobId runtimeJobId) throws Exception;\n+\n+  /**\n+   * Provides all the jobs that are in running state. If there are no running jobs, it should return empty list.\n+   *\n+   * @return a list job details\n+   * @throws Exception thrown if any exception while getting list of running jobs\n+   */\n+  List<RuntimeJobDetail> list() throws Exception;\n+\n+  /**\n+   * Gracefully stops a running job. If the job is already in terminal status, then this method should be a no-op.\n+   *\n+   * @param runtimeJobId job to be stopped\n+   * @throws Exception thrown if any exception while stopping the job\n+   */\n+  void stop(RuntimeJobId runtimeJobId) throws Exception;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE5MzM5MQ=="}, "originalCommit": {"oid": "891699202bf24438bc516316b0b3a32e948c8b81"}, "originalPosition": 57}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3001, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}