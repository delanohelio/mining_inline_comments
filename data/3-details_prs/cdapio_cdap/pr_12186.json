{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5OTE4NjA2", "number": 12186, "title": "[CDAP-16839] Base implementation for virtual scrolling", "bodyText": "Base component to provide virtual scrolling for huge list in UI.\nThis should greatly help us minimize memory usage in rendering DOM for large lists\n\nJIRA: https://issues.cask.co/browse/CDAP-16839\nBuild: https://builds.cask.co/browse/CDAP-UDUT605-1\nNote:\n\nThis is just a POC. No code cleanup done,\nThose will come as subsequent PRs.", "createdAt": "2020-05-19T07:00:39Z", "url": "https://github.com/cdapio/cdap/pull/12186", "merged": true, "mergeCommit": {"oid": "0b46b117b23bbbf8d764e5715541116d02c43472"}, "closed": true, "closedAt": "2020-06-09T21:36:14Z", "author": {"login": "ajainarayanan"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABci7OK3gFqTQxNDgzMTM1MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcprGI4ABqjM0MjY3MTAwNjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0ODMxMzUx", "url": "https://github.com/cdapio/cdap/pull/12186#pullrequestreview-414831351", "createdAt": "2020-05-19T21:19:23Z", "commit": {"oid": "5e763e2ba7da146ba64bc0d1894833d943864658"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMToxOToyM1rOGXzBWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMToxOToyM1rOGXzBWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzYwNjM2MQ==", "bodyText": "Why is it call demo? Is it really just for demo or is actual prod code?", "url": "https://github.com/cdapio/cdap/pull/12186#discussion_r427606361", "createdAt": "2020-05-19T21:19:23Z", "author": {"login": "chtyim"}, "path": "cdap-ui/app/cdap/components/Home/index.js", "diffHunk": "@@ -185,6 +187,13 @@ export default class Home extends Component {\n           <Route path=\"/ns/:namespace/kitchen\" component={ConfigurationGroupKitchenSync} />\n           <Route path=\"/ns/:namespace/replication\" component={Replicator} />\n           <Route path=\"/ns/:namespace/lab\" component={Lab} />\n+          <Route\n+            exact\n+            path=\"/ns/:namespace/vs\"\n+            render={() => {\n+              return <VirtualScrollDemo />;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e763e2ba7da146ba64bc0d1894833d943864658"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDIzNDk5", "url": "https://github.com/cdapio/cdap/pull/12186#pullrequestreview-422023499", "createdAt": "2020-06-01T17:06:59Z", "commit": {"oid": "5e763e2ba7da146ba64bc0d1894833d943864658"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNzowNjo1OVrOGdStiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QyMjo1ODoxNlrOGewWdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2ODQ1Nw==", "bodyText": "Can you use components/Lab/ToggleExperiment to switch between this component and 404 page using cdap-common-experiment? So that this route won't be available to users unless they have the experiment enabled.", "url": "https://github.com/cdapio/cdap/pull/12186#discussion_r433368457", "createdAt": "2020-06-01T17:06:59Z", "author": {"login": "itsanudeep"}, "path": "cdap-ui/app/cdap/components/Home/index.js", "diffHunk": "@@ -185,6 +187,13 @@ export default class Home extends Component {\n           <Route path=\"/ns/:namespace/kitchen\" component={ConfigurationGroupKitchenSync} />\n           <Route path=\"/ns/:namespace/replication\" component={Replicator} />\n           <Route path=\"/ns/:namespace/lab\" component={Lab} />\n+          <Route\n+            exact\n+            path=\"/ns/:namespace/vs\"\n+            render={() => {\n+              return <VirtualScrollDemo />;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzYwNjM2MQ=="}, "originalCommit": {"oid": "5e763e2ba7da146ba64bc0d1894833d943864658"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2ODg4OQ==", "bodyText": "move this import to top of the page?", "url": "https://github.com/cdapio/cdap/pull/12186#discussion_r433368889", "createdAt": "2020-06-01T17:07:50Z", "author": {"login": "itsanudeep"}, "path": "cdap-ui/app/cdap/components/Home/index.js", "diffHunk": "@@ -94,6 +94,8 @@ const SecureKeys = Loadable({\n   loading: LoadingSVGCentered,\n });\n \n+import VirtualScrollDemo from 'components/VirtualScroll/demo';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e763e2ba7da146ba64bc0d1894833d943864658"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkwMTk3Ng==", "bodyText": "Is childrenUnderFold the number of rows that are in DOM but not in the viewport?", "url": "https://github.com/cdapio/cdap/pull/12186#discussion_r434901976", "createdAt": "2020-06-03T22:56:12Z", "author": {"login": "itsanudeep"}, "path": "cdap-ui/app/cdap/components/VirtualScroll/index.tsx", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import React, { memo, useMemo, useState, useEffect } from 'react';\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+import { useScroll } from 'components/VirtualScroll/useScroll';\n+\n+interface IVirtualScrollProps extends WithStyles<typeof styles> {\n+  renderList: (\n+    visibleNodeCount: number,\n+    startNode: number\n+  ) => React.ReactNode | Promise<React.ReactNode>;\n+  itemCount: number | (() => number);\n+  visibleChildCount: number;\n+  childHeight: number;\n+  childrenUnderFold: number;\n+  LoadingElement?: React.ReactNode;\n+}\n+const styles = (): StyleRules => {\n+  return {\n+    root: {\n+      overflow: 'auto',\n+    },\n+    viewport: {\n+      paddingTop: '1px',\n+      overflow: 'hidden',\n+      willChange: 'transform',\n+      position: 'relative',\n+    },\n+    loading: {\n+      position: 'absolute',\n+      background: 'purple',\n+      bottom: '0',\n+      height: '30px',\n+      color: 'white',\n+      width: '200px',\n+      marginLeft: '10px',\n+      textAlign: 'center',\n+    },\n+  };\n+};\n+\n+// VirtualScroll component\n+const VirtualScroll = ({\n+  renderList,\n+  itemCount,\n+  visibleChildCount,\n+  childHeight,\n+  childrenUnderFold,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e763e2ba7da146ba64bc0d1894833d943864658"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkwMjY0Nw==", "bodyText": "Do you have any plans to compare the performance of our implementation vs react-window or some other library that's available?", "url": "https://github.com/cdapio/cdap/pull/12186#discussion_r434902647", "createdAt": "2020-06-03T22:58:16Z", "author": {"login": "itsanudeep"}, "path": "cdap-ui/app/cdap/components/VirtualScroll/index.tsx", "diffHunk": "@@ -0,0 +1,123 @@\n+/*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e763e2ba7da146ba64bc0d1894833d943864658"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0OTEwNDg1", "url": "https://github.com/cdapio/cdap/pull/12186#pullrequestreview-424910485", "createdAt": "2020-06-04T23:49:07Z", "commit": {"oid": "f76eec2ac29461f8609b618c7d85069c52b7f656"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d23764f34899d9f078ddc43f46f7b8e8d07abbc4", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/d23764f34899d9f078ddc43f46f7b8e8d07abbc4", "committedDate": "2020-06-09T20:28:30Z", "message": "[CDAP-16839] Adds base implementation of virtual scroll"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f76eec2ac29461f8609b618c7d85069c52b7f656", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/f76eec2ac29461f8609b618c7d85069c52b7f656", "committedDate": "2020-06-04T23:35:37Z", "message": "Minor fixes to the way VirtualScroll is imported"}, "afterCommit": {"oid": "d23764f34899d9f078ddc43f46f7b8e8d07abbc4", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/d23764f34899d9f078ddc43f46f7b8e8d07abbc4", "committedDate": "2020-06-09T20:28:30Z", "message": "[CDAP-16839] Adds base implementation of virtual scroll"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2056, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}