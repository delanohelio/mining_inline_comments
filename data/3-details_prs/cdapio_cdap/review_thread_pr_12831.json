{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNzU5Mzkw", "number": 12831, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMToyMDo0MVrOEz91Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMToyMDo0MVrOEz91Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyOTI1OTIyOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/main.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMToyMDo0MVrOHrgzPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxOTowNDowMlrOHsR67w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM4ODIyMA==", "bodyText": "Long-term, should we show the message from the back end? Will it be localized? (No need to change for now)", "url": "https://github.com/cdapio/cdap/pull/12831#discussion_r515388220", "createdAt": "2020-10-30T21:20:41Z", "author": {"login": "njbriggs"}, "path": "cdap-ui/app/cdap/main.js", "diffHunk": "@@ -358,22 +357,35 @@ class CDAP extends Component {\n               </div>\n             </If>\n             <If condition={!this.state.isNamespaceFetchInFlight}>\n-              <If\n-                condition={this.state.pageLevelError && this.state.pageLevelError.errorCode === 404}\n-              >\n+              <If condition={isNamespaceNotFound}>\n                 <Page404 message={this.state.pageLevelError.message} />\n               </If>\n+              {/** We show authorization failure message when the specific namespace API returns 403 */}\n+              <If condition={isUserUnAuthorizedForNamespace}>\n+                <AuthorizationErrorMessage message={this.state.pageLevelError.message} />\n+              </If>\n               <If\n-                condition={this.state.pageLevelError && this.state.pageLevelError.errorCode !== 404}\n+                condition={\n+                  !isUserUnAuthorizedForNamespace &&\n+                  !isNamespaceNotFound &&\n+                  this.state.pageLevelError\n+                }\n               >\n                 <Page500\n                   message={this.state.pageLevelError.message}\n                   refreshFn={this.retrieveNamespace}\n                 />\n               </If>\n-\n+              {/**\n+               * We show authorization failure message when the backend return empty\n+               * namespace. This indicates the user has access to no namespace.\n+               */}\n               <If condition={!this.state.pageLevelError}>\n-                {this.state.authorizationFailed ? <AuthorizationErrorMessage /> : container}\n+                {this.state.authorizationFailed ? (\n+                  <AuthorizationErrorMessage message={this.state.pageLevelError.message} />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de2561f5ec97b139d1209958db0fb5feb06539c4"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjE5MzAwNw==", "bodyText": "Yeah as of now we don't have the message from backend. One possible way to do this would be to have a health API from backend that deterministically say that the backend is down and if not can send a message that UI can use. But as far as I can see the message will be from UI as it needs to have call-to-actions as well as other context for the user.", "url": "https://github.com/cdapio/cdap/pull/12831#discussion_r516193007", "createdAt": "2020-11-02T19:04:02Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/main.js", "diffHunk": "@@ -358,22 +357,35 @@ class CDAP extends Component {\n               </div>\n             </If>\n             <If condition={!this.state.isNamespaceFetchInFlight}>\n-              <If\n-                condition={this.state.pageLevelError && this.state.pageLevelError.errorCode === 404}\n-              >\n+              <If condition={isNamespaceNotFound}>\n                 <Page404 message={this.state.pageLevelError.message} />\n               </If>\n+              {/** We show authorization failure message when the specific namespace API returns 403 */}\n+              <If condition={isUserUnAuthorizedForNamespace}>\n+                <AuthorizationErrorMessage message={this.state.pageLevelError.message} />\n+              </If>\n               <If\n-                condition={this.state.pageLevelError && this.state.pageLevelError.errorCode !== 404}\n+                condition={\n+                  !isUserUnAuthorizedForNamespace &&\n+                  !isNamespaceNotFound &&\n+                  this.state.pageLevelError\n+                }\n               >\n                 <Page500\n                   message={this.state.pageLevelError.message}\n                   refreshFn={this.retrieveNamespace}\n                 />\n               </If>\n-\n+              {/**\n+               * We show authorization failure message when the backend return empty\n+               * namespace. This indicates the user has access to no namespace.\n+               */}\n               <If condition={!this.state.pageLevelError}>\n-                {this.state.authorizationFailed ? <AuthorizationErrorMessage /> : container}\n+                {this.state.authorizationFailed ? (\n+                  <AuthorizationErrorMessage message={this.state.pageLevelError.message} />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM4ODIyMA=="}, "originalCommit": {"oid": "de2561f5ec97b139d1209958db0fb5feb06539c4"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3112, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}