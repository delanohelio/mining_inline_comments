{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MTEyNzA4", "number": 12214, "title": "[CDAP-16863] Show the live JSON view (plugin JSON Creator)", "bodyText": "JIRA: https://issues.cask.co/browse/CDAP-16863\nAny changes that users make in the system will be reflected in the JSON view in real-time. This way, users will be able to see their current progress on creating the plugin JSON file.\n\nShow the JSON output in real-time\nEnable the toggle of the JSON viewer\n\n1st page (Basic Plugin Information)\n\n2nd page (Configuration Groups)", "createdAt": "2020-05-27T21:03:16Z", "url": "https://github.com/cdapio/cdap/pull/12214", "merged": true, "mergeCommit": {"oid": "603325394051ce39a1e190de1271b28d4af85082"}, "closed": true, "closedAt": "2020-06-15T22:52:01Z", "author": {"login": "jennac3"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnFuK2gBqjMzOTQ2MzIwMTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcroh-IABqjM0NDY0NzExODU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "64d7e54ec61112d7d783a5ed7e5ae992ba9920eb", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/64d7e54ec61112d7d783a5ed7e5ae992ba9920eb", "committedDate": "2020-05-27T20:51:21Z", "message": "[CDAP-16863] Show the live JSON view (widget JSON Creator)"}, "afterCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/b68b04d60ed094c0d97f4c5abbee24a782dadae3", "committedDate": "2020-06-01T19:48:52Z", "message": "[CDAP-16863] Show the live JSON view (plugin JSON Creator)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMjE4NDQ1", "url": "https://github.com/cdapio/cdap/pull/12214#pullrequestreview-423218445", "createdAt": "2020-06-03T04:58:53Z", "commit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNDo1ODo1M1rOGeMEIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNTowNDo1M1rOGeMJ8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwODEyOA==", "bodyText": "nit: I noticed this in the previous PR too. What does widgetToInfo mean? I can understand groupToWidgets as a map. If its a map of widget information may be just widgetInfo?", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r434308128", "createdAt": "2020-06-03T04:58:53Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/BasicPluginInfo/index.tsx", "diffHunk": "@@ -68,6 +75,19 @@ const BasicPluginInfoView: React.FC<ICreateContext & WithStyles<typeof styles>>\n \n   return (\n     <div>\n+      <JsonMenu\n+        pluginName={localPluginName}\n+        pluginType={localPluginType}\n+        displayName={localDisplayName}\n+        emitAlerts={localEmitAlerts}\n+        emitErrors={localEmitErrors}\n+        configurationGroups={configurationGroups}\n+        groupToInfo={groupToInfo}\n+        groupToWidgets={groupToWidgets}\n+        widgetToInfo={widgetToInfo}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwODMyMw==", "bodyText": "nit: import it from specific submodule rather than the core.", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r434308323", "createdAt": "2020-06-03T04:59:39Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/ClosedJsonMenu/index.tsx", "diffHunk": "@@ -0,0 +1,138 @@\n+/*\n+ * Copyright \u00a9 2018 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { Divider, IconButton, Tooltip } from '@material-ui/core';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwODYwMw==", "bodyText": "nit: Same here.", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r434308603", "createdAt": "2020-06-03T05:00:39Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/JsonLiveViewer/index.tsx", "diffHunk": "@@ -0,0 +1,152 @@\n+/*\n+ * Copyright \u00a9 2018 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { Button, Tooltip } from '@material-ui/core';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwODk0Ng==", "bodyText": "If all this component is doing is view/download the JSON can we pass that as one single prop? Do we need to pass it individually to combine them here and form the object?", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r434308946", "createdAt": "2020-06-03T05:02:04Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/JsonLiveViewer/index.tsx", "diffHunk": "@@ -0,0 +1,152 @@\n+/*\n+ * Copyright \u00a9 2018 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { Button, Tooltip } from '@material-ui/core';\n+import Drawer from '@material-ui/core/Drawer';\n+import List from '@material-ui/core/List';\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+import FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\n+import SaveAltIcon from '@material-ui/icons/SaveAlt';\n+import JsonEditorWidget from 'components/AbstractWidget/CodeEditorWidget/JsonEditorWidget';\n+import {\n+  downloadPluginJSON,\n+  getJSONConfig,\n+} from 'components/PluginJSONCreator/Create/Content/JsonMenu/utilities';\n+import { ICreateContext } from 'components/PluginJSONCreator/CreateContextConnect';\n+import * as React from 'react';\n+\n+const JSON_VIEWER_WIDTH = '600px';\n+\n+const styles = (theme): StyleRules => {\n+  return {\n+    jsonViewer: {\n+      zIndex: theme.zIndex.drawer,\n+      width: JSON_VIEWER_WIDTH,\n+    },\n+    jsonViewerPaper: {\n+      width: JSON_VIEWER_WIDTH,\n+      backgroundColor: theme.palette.white[50],\n+    },\n+    toolbar: {\n+      minHeight: '48px',\n+    },\n+    mainMenu: {\n+      borderTop: `1px solid ${theme.palette.grey['500']}`,\n+      paddingTop: theme.Spacing(1),\n+      paddingBottom: theme.Spacing(1),\n+    },\n+    jsonActionButtons: {\n+      padding: '5px',\n+      display: 'flex',\n+    },\n+    closeJSONViewerButon: {\n+      marginLeft: 'auto',\n+    },\n+    jsonViewerTooltip: {\n+      fontSize: '14px',\n+      backgroundColor: theme.palette.grey[500],\n+    },\n+  };\n+};\n+\n+const JsonLiveViewerView: React.FC<ICreateContext & WithStyles<typeof styles>> = ({\n+  classes,\n+  pluginName,\n+  pluginType,\n+  displayName,\n+  emitAlerts,\n+  emitErrors,\n+  configurationGroups,\n+  groupToInfo,\n+  groupToWidgets,\n+  widgetToInfo,\n+  jsonView,\n+  setJsonView,\n+}) => {\n+  const widgetJSONData = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwOTE1NA==", "bodyText": "Could this be static or is it just a placeholder for now? What happens on different browser heights?", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r434309154", "createdAt": "2020-06-03T05:02:49Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/JsonLiveViewer/index.tsx", "diffHunk": "@@ -0,0 +1,152 @@\n+/*\n+ * Copyright \u00a9 2018 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { Button, Tooltip } from '@material-ui/core';\n+import Drawer from '@material-ui/core/Drawer';\n+import List from '@material-ui/core/List';\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+import FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\n+import SaveAltIcon from '@material-ui/icons/SaveAlt';\n+import JsonEditorWidget from 'components/AbstractWidget/CodeEditorWidget/JsonEditorWidget';\n+import {\n+  downloadPluginJSON,\n+  getJSONConfig,\n+} from 'components/PluginJSONCreator/Create/Content/JsonMenu/utilities';\n+import { ICreateContext } from 'components/PluginJSONCreator/CreateContextConnect';\n+import * as React from 'react';\n+\n+const JSON_VIEWER_WIDTH = '600px';\n+\n+const styles = (theme): StyleRules => {\n+  return {\n+    jsonViewer: {\n+      zIndex: theme.zIndex.drawer,\n+      width: JSON_VIEWER_WIDTH,\n+    },\n+    jsonViewerPaper: {\n+      width: JSON_VIEWER_WIDTH,\n+      backgroundColor: theme.palette.white[50],\n+    },\n+    toolbar: {\n+      minHeight: '48px',\n+    },\n+    mainMenu: {\n+      borderTop: `1px solid ${theme.palette.grey['500']}`,\n+      paddingTop: theme.Spacing(1),\n+      paddingBottom: theme.Spacing(1),\n+    },\n+    jsonActionButtons: {\n+      padding: '5px',\n+      display: 'flex',\n+    },\n+    closeJSONViewerButon: {\n+      marginLeft: 'auto',\n+    },\n+    jsonViewerTooltip: {\n+      fontSize: '14px',\n+      backgroundColor: theme.palette.grey[500],\n+    },\n+  };\n+};\n+\n+const JsonLiveViewerView: React.FC<ICreateContext & WithStyles<typeof styles>> = ({\n+  classes,\n+  pluginName,\n+  pluginType,\n+  displayName,\n+  emitAlerts,\n+  emitErrors,\n+  configurationGroups,\n+  groupToInfo,\n+  groupToWidgets,\n+  widgetToInfo,\n+  jsonView,\n+  setJsonView,\n+}) => {\n+  const widgetJSONData = {\n+    pluginName,\n+    pluginType,\n+    displayName,\n+    emitAlerts,\n+    emitErrors,\n+    configurationGroups,\n+    groupToInfo,\n+    groupToWidgets,\n+    widgetToInfo,\n+  };\n+  const JSONConfig = getJSONConfig(widgetJSONData);\n+  const downloadDisabled = pluginName.length === 0 || pluginType.length === 0;\n+  return (\n+    <div>\n+      <Drawer\n+        open={jsonView}\n+        variant=\"persistent\"\n+        className={classes.jsonViewer}\n+        anchor=\"right\"\n+        disableEnforceFocus={true}\n+        ModalProps={{\n+          keepMounted: true,\n+        }}\n+        classes={{\n+          paper: classes.jsonViewerPaper,\n+        }}\n+        data-cy=\"navbar-drawer\"\n+      >\n+        <div className={classes.toolbar} />\n+        <List component=\"nav\" dense={true} className={classes.mainMenu}>\n+          <div className={classes.jsonActionButtons}>\n+            <Tooltip\n+              classes={{\n+                tooltip: classes.jsonViewerTooltip,\n+              }}\n+              title={\n+                downloadDisabled\n+                  ? 'Download is disabled until the required fields are filled in'\n+                  : 'Download Plugin JSON'\n+              }\n+            >\n+              <span>\n+                <Button\n+                  disabled={downloadDisabled}\n+                  onClick={() => downloadPluginJSON(widgetJSONData)}\n+                >\n+                  <SaveAltIcon />\n+                </Button>\n+              </span>\n+            </Tooltip>\n+            <Tooltip\n+              classes={{\n+                tooltip: classes.jsonViewerTooltip,\n+              }}\n+              title=\"Close JSON View\"\n+            >\n+              <Button className={classes.closeJSONViewerButon} onClick={() => setJsonView(false)}>\n+                <FullscreenExitIcon />\n+              </Button>\n+            </Tooltip>\n+          </div>\n+          <JsonEditorWidget\n+            rows={50}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3"}, "originalPosition": 142}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwOTE4MA==", "bodyText": "nit: 2020", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r434309180", "createdAt": "2020-06-03T05:02:57Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/index.tsx", "diffHunk": "@@ -0,0 +1,77 @@\n+/*\n+ * Copyright \u00a9 2018 Cask Data, Inc.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwOTIyOA==", "bodyText": "Same here.", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r434309228", "createdAt": "2020-06-03T05:03:05Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/JsonLiveViewer/index.tsx", "diffHunk": "@@ -0,0 +1,152 @@\n+/*\n+ * Copyright \u00a9 2018 Cask Data, Inc.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwOTI1Nw==", "bodyText": "Same here.", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r434309257", "createdAt": "2020-06-03T05:03:12Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/ClosedJsonMenu/index.tsx", "diffHunk": "@@ -0,0 +1,138 @@\n+/*\n+ * Copyright \u00a9 2018 Cask Data, Inc.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwOTYxNw==", "bodyText": "Is this being used anywhere?", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r434309617", "createdAt": "2020-06-03T05:04:53Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/constants.tsx", "diffHunk": "@@ -22,3 +22,5 @@ export const PluginTypes = Object.keys(GLOBALS.pluginTypeToLabel).filter(\n );\n \n export const WIDGET_TYPES = Object.keys(WIDGET_FACTORY);\n+\n+export const SPEC_VERSION = '1.5';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b68b04d60ed094c0d97f4c5abbee24a782dadae3", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/b68b04d60ed094c0d97f4c5abbee24a782dadae3", "committedDate": "2020-06-01T19:48:52Z", "message": "[CDAP-16863] Show the live JSON view (plugin JSON Creator)"}, "afterCommit": {"oid": "8ad1ccd8c6f601ea6a95a12feefbdde777576f16", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/8ad1ccd8c6f601ea6a95a12feefbdde777576f16", "committedDate": "2020-06-03T21:29:06Z", "message": "address comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ad1ccd8c6f601ea6a95a12feefbdde777576f16", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/8ad1ccd8c6f601ea6a95a12feefbdde777576f16", "committedDate": "2020-06-03T21:29:06Z", "message": "address comments"}, "afterCommit": {"oid": "7b15b8693a875a19af121303d141c768da79c689", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/7b15b8693a875a19af121303d141c768da79c689", "committedDate": "2020-06-03T21:34:30Z", "message": "address comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b15b8693a875a19af121303d141c768da79c689", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/7b15b8693a875a19af121303d141c768da79c689", "committedDate": "2020-06-03T21:34:30Z", "message": "address comments"}, "afterCommit": {"oid": "f93cae7486386216fc9fca39b93d621af11cf692", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/f93cae7486386216fc9fca39b93d621af11cf692", "committedDate": "2020-06-03T21:35:55Z", "message": "address comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e3026eff92f76726b1c5eb783761bb591618100", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/8e3026eff92f76726b1c5eb783761bb591618100", "committedDate": "2020-06-03T21:59:27Z", "message": "address comments"}, "afterCommit": {"oid": "72934dc2ebee2b31d0cee71fc284055718ef706d", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/72934dc2ebee2b31d0cee71fc284055718ef706d", "committedDate": "2020-06-03T22:47:55Z", "message": "adddress comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwOTg0Njgz", "url": "https://github.com/cdapio/cdap/pull/12214#pullrequestreview-430984683", "createdAt": "2020-06-15T20:52:32Z", "commit": {"oid": "756300b8e7a79a288720c7914cccbf68371362d8"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMDo1MjozMlrOGkCUzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMDo1Njo0NFrOGkCdGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ0MDAxMw==", "bodyText": "should be forEach", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r440440013", "createdAt": "2020-06-15T20:52:32Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/ConfigurationGroupsCollection/index.tsx", "diffHunk": "@@ -118,11 +126,11 @@ const ConfigurationGroupsCollectionView: React.FC<ICreateContext & WithStyles<ty\n       setLocalGroupToWidgets(restGroupToWidgets);\n \n       // Delete all the widget information that belong to the group\n-      const newWidgetToInfo = localWidgetToInfo;\n-      widgets.forEach((widget) => {\n-        delete newWidgetToInfo[widget];\n+      const newWidgetInfo = localWidgetInfo;\n+      widgets.map((widget) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "756300b8e7a79a288720c7914cccbf68371362d8"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ0MDg1OA==", "bodyText": "nit: erase the in --> required fields are filled", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r440440858", "createdAt": "2020-06-15T20:54:09Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/ClosedJsonMenu/index.tsx", "diffHunk": "@@ -0,0 +1,118 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import Divider from '@material-ui/core/Divider';\n+import Drawer from '@material-ui/core/Drawer';\n+import IconButton from '@material-ui/core/IconButton';\n+import List from '@material-ui/core/List';\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+import Tooltip from '@material-ui/core/Tooltip';\n+import CodeIcon from '@material-ui/icons/Code';\n+import GetAppIcon from '@material-ui/icons/GetApp';\n+import { downloadPluginJSON } from 'components/PluginJSONCreator/Create/Content/JsonMenu/utilities';\n+import { ICreateContext } from 'components/PluginJSONCreator/CreateContextConnect';\n+import * as React from 'react';\n+\n+const styles = (theme): StyleRules => {\n+  return {\n+    closedJsonMenu: {\n+      zIndex: theme.zIndex.drawer,\n+    },\n+    closedJsonMenuPaper: {\n+      backgroundColor: theme.palette.white[50],\n+    },\n+    toolbar: {\n+      minHeight: '48px',\n+    },\n+    mainMenu: {\n+      borderTop: `1px solid ${theme.palette.grey['500']}`,\n+      paddingTop: theme.Spacing(1),\n+      paddingBottom: theme.Spacing(1),\n+    },\n+    jsonCollapseActionButtons: {\n+      padding: '15px',\n+      flexDirection: 'column',\n+    },\n+    jsonViewerTooltip: {\n+      fontSize: '14px',\n+      backgroundColor: theme.palette.grey[500],\n+    },\n+  };\n+};\n+\n+const ClosedJsonMenuView: React.FC<ICreateContext & WithStyles<typeof styles>> = (\n+  widgetJSONData\n+) => {\n+  const { classes, pluginName, pluginType, jsonView, setJsonView } = widgetJSONData;\n+  const downloadDisabled = pluginName.length === 0 || pluginType.length === 0;\n+  return (\n+    <div>\n+      <Drawer\n+        open={!jsonView}\n+        variant=\"persistent\"\n+        className={classes.closedJsonMenu}\n+        anchor=\"right\"\n+        ModalProps={{\n+          keepMounted: true,\n+        }}\n+        classes={{\n+          paper: classes.closedJsonMenuPaper,\n+        }}\n+        data-cy=\"navbar-jsonViewer\"\n+      >\n+        <div className={classes.toolbar} />\n+        <List component=\"nav\" dense={true} className={classes.mainMenu}>\n+          <div className={classes.jsonCollapseActionButtons}>\n+            <Tooltip\n+              title=\"Open JSON View\"\n+              classes={{\n+                tooltip: classes.jsonViewerTooltip,\n+              }}\n+            >\n+              <IconButton onClick={() => setJsonView(true)}>\n+                <CodeIcon />\n+              </IconButton>\n+            </Tooltip>\n+            <Divider />\n+\n+            <Tooltip\n+              title={\n+                downloadDisabled\n+                  ? 'Download is disabled until the required fields are filled in'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "756300b8e7a79a288720c7914cccbf68371362d8"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ0MjEzNw==", "bodyText": "Can the liveviewer and closed json menu component be combined? It seemed like the contents are very similar", "url": "https://github.com/cdapio/cdap/pull/12214#discussion_r440442137", "createdAt": "2020-06-15T20:56:44Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/index.tsx", "diffHunk": "@@ -0,0 +1,77 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import If from 'components/If';\n+import ClosedJsonMenu from 'components/PluginJSONCreator/Create/Content/JsonMenu/ClosedJsonMenu';\n+import JsonLiveViewer from 'components/PluginJSONCreator/Create/Content/JsonMenu/JsonLiveViewer';\n+import {\n+  CreateContext,\n+  createContextConnect,\n+  ICreateContext,\n+} from 'components/PluginJSONCreator/CreateContextConnect';\n+import * as React from 'react';\n+\n+const JsonMenuView: React.FC<ICreateContext> = ({\n+  pluginName,\n+  pluginType,\n+  displayName,\n+  emitAlerts,\n+  emitErrors,\n+  configurationGroups,\n+  groupToInfo,\n+  groupToWidgets,\n+  widgetInfo,\n+  jsonView,\n+  setJsonView,\n+}) => {\n+  return (\n+    <div>\n+      <If condition={jsonView}>\n+        <JsonLiveViewer\n+          pluginName={pluginName}\n+          pluginType={pluginType}\n+          displayName={displayName}\n+          emitAlerts={emitAlerts}\n+          emitErrors={emitErrors}\n+          configurationGroups={configurationGroups}\n+          groupToInfo={groupToInfo}\n+          groupToWidgets={groupToWidgets}\n+          widgetInfo={widgetInfo}\n+          jsonView={jsonView}\n+          setJsonView={setJsonView}\n+        />\n+      </If>\n+      <If condition={!jsonView}>\n+        <ClosedJsonMenu", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "756300b8e7a79a288720c7914cccbf68371362d8"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMDEzMDQ1", "url": "https://github.com/cdapio/cdap/pull/12214#pullrequestreview-431013045", "createdAt": "2020-06-15T21:40:21Z", "commit": {"oid": "3bf70582adb90269403a017df0b84eed14a3181e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aa608146f6d7ebd0e799b5af96ef491d06ebff3d", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/aa608146f6d7ebd0e799b5af96ef491d06ebff3d", "committedDate": "2020-06-15T21:57:23Z", "message": "fix conflict"}, "afterCommit": {"oid": "d2db2752d6c0224678eaf935cae0212880771b86", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/d2db2752d6c0224678eaf935cae0212880771b86", "committedDate": "2020-06-15T22:29:04Z", "message": "[CDAP-16863] Show the live JSON view (plugin JSON Creator)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a17fea4f353c986fd9d885fb05233a424a40a1b3", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/a17fea4f353c986fd9d885fb05233a424a40a1b3", "committedDate": "2020-06-15T22:37:55Z", "message": "[CDAP-16863] Show the live JSON view (plugin JSON Creator)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea014a9c8696b3dbe5ce4a773a1f72d2d41195cf", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/ea014a9c8696b3dbe5ce4a773a1f72d2d41195cf", "committedDate": "2020-06-15T22:36:27Z", "message": "merge from develop"}, "afterCommit": {"oid": "a17fea4f353c986fd9d885fb05233a424a40a1b3", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/a17fea4f353c986fd9d885fb05233a424a40a1b3", "committedDate": "2020-06-15T22:37:55Z", "message": "[CDAP-16863] Show the live JSON view (plugin JSON Creator)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2086, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}