{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMDg0OTY1", "number": 12301, "title": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)", "bodyText": "Currently in the plugin JSON creator, only the output name is configurable by the user. Hence, we would like to expand more on the output fields.\nWe will be including schema-types, schema-default-type for explicit type of schema, and schema for the implicit schema.\nExplicit Schema\n\nImplicit Schema", "createdAt": "2020-06-11T13:36:48Z", "url": "https://github.com/cdapio/cdap/pull/12301", "merged": true, "mergeCommit": {"oid": "c5f7d91efaeec1ad13851fa2a6bbc169a5304bda"}, "closed": true, "closedAt": "2020-06-24T17:55:40Z", "author": {"login": "jennac3"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuMH-NABqjM0NzQ4MzQwMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcudrN5gBqjM0Nzg1OTMxNzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "03868ee1a77acb677b3fd2b63c7807d9db68c13c", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/03868ee1a77acb677b3fd2b63c7807d9db68c13c", "committedDate": "2020-06-11T13:36:25Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}, "afterCommit": {"oid": "ab9eb9aa7d9d9b278c0f08aaee148d69ede461d6", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/ab9eb9aa7d9d9b278c0f08aaee148d69ede461d6", "committedDate": "2020-06-23T21:11:46Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab9eb9aa7d9d9b278c0f08aaee148d69ede461d6", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/ab9eb9aa7d9d9b278c0f08aaee148d69ede461d6", "committedDate": "2020-06-23T21:11:46Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}, "afterCommit": {"oid": "76d293c2deefb93d839875fc7fb21f7bebf205e4", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/76d293c2deefb93d839875fc7fb21f7bebf205e4", "committedDate": "2020-06-24T03:05:21Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "76d293c2deefb93d839875fc7fb21f7bebf205e4", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/76d293c2deefb93d839875fc7fb21f7bebf205e4", "committedDate": "2020-06-24T03:05:21Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}, "afterCommit": {"oid": "ed8de2f4e861c16159896ec8dd401ef4938c44ee", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/ed8de2f4e861c16159896ec8dd401ef4938c44ee", "committedDate": "2020-06-24T03:10:15Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed8de2f4e861c16159896ec8dd401ef4938c44ee", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/ed8de2f4e861c16159896ec8dd401ef4938c44ee", "committedDate": "2020-06-24T03:10:15Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}, "afterCommit": {"oid": "9bae9df4ddf449c5dc7bd80e3acddaf307cf74b0", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/9bae9df4ddf449c5dc7bd80e3acddaf307cf74b0", "committedDate": "2020-06-24T03:13:33Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MzAxMjUz", "url": "https://github.com/cdapio/cdap/pull/12301#pullrequestreview-436301253", "createdAt": "2020-06-24T03:35:03Z", "commit": {"oid": "9bae9df4ddf449c5dc7bd80e3acddaf307cf74b0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMzozNTowM1rOGoByYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwMzozNTowM1rOGoByYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyNTUwNA==", "bodyText": "Question, should we also make outputLabel?", "url": "https://github.com/cdapio/cdap/pull/12301#discussion_r444625504", "createdAt": "2020-06-24T03:35:03Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/index.tsx", "diffHunk": "@@ -154,6 +169,10 @@ const JsonMenuView: React.FC<WithStyles<typeof styles>> = ({ classes }) => {\n     setWidgetInfo(newWidgetData.widgetInfo);\n     setWidgetToAttributes(newWidgetData.widgetToAttributes);\n     setOutputName(newWidgetData.outputName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bae9df4ddf449c5dc7bd80e3acddaf307cf74b0"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9bae9df4ddf449c5dc7bd80e3acddaf307cf74b0", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/9bae9df4ddf449c5dc7bd80e3acddaf307cf74b0", "committedDate": "2020-06-24T03:13:33Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}, "afterCommit": {"oid": "e4296b589db9410998b971deca73fec0c5fcf03a", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/e4296b589db9410998b971deca73fec0c5fcf03a", "committedDate": "2020-06-24T04:08:04Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2ODI5MDgx", "url": "https://github.com/cdapio/cdap/pull/12301#pullrequestreview-436829081", "createdAt": "2020-06-24T16:48:56Z", "commit": {"oid": "fcac3dea4db393911a5e0e5cd6ae3edf1445ded6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNjo0ODo1NlrOGoarCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNjo1NjoxMVrOGoa7rA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAzMzIyNw==", "bodyText": "no, I don't think we're showing output label", "url": "https://github.com/cdapio/cdap/pull/12301#discussion_r445033227", "createdAt": "2020-06-24T16:48:56Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/JsonMenu/index.tsx", "diffHunk": "@@ -154,6 +169,10 @@ const JsonMenuView: React.FC<WithStyles<typeof styles>> = ({ classes }) => {\n     setWidgetInfo(newWidgetData.widgetInfo);\n     setWidgetToAttributes(newWidgetData.widgetToAttributes);\n     setOutputName(newWidgetData.outputName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYyNTUwNA=="}, "originalCommit": {"oid": "9bae9df4ddf449c5dc7bd80e3acddaf307cf74b0"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAzNzQ4NA==", "bodyText": "debounce have to be defined outside the scope (ie. outside useEffect)", "url": "https://github.com/cdapio/cdap/pull/12301#discussion_r445037484", "createdAt": "2020-06-24T16:56:11Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/OutputPage/ImplicitSchemaDefiner/index.tsx", "diffHunk": "@@ -0,0 +1,97 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import Button from '@material-ui/core/Button';\n+import Alert from 'components/Alert';\n+import WidgetWrapper from 'components/ConfigurationGroup/WidgetWrapper';\n+import { useOutputState } from 'components/PluginJSONCreator/Create';\n+import debounce from 'lodash/debounce';\n+import * as React from 'react';\n+\n+export enum SchemaStatus {\n+  Normal = 'Normal',\n+  Success = 'SUCCESS',\n+  Failure = 'FAILURE',\n+}\n+\n+const ImplicitSchemaDefiner = () => {\n+  const { schema, setSchema } = useOutputState();\n+  const [localSchema, setLocalSchema] = React.useState(JSON.stringify(schema, undefined, 2));\n+\n+  const [schemaStatus, setSchemaStatus] = React.useState(SchemaStatus.Normal);\n+\n+  React.useEffect(() => {\n+    if (schemaStatus === SchemaStatus.Success) {\n+      // After a timeout for 500ms, reset schemaStatus to make a success Alert component disappear\n+      debounce(() => setSchemaStatus(SchemaStatus.Normal), 1500)();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcac3dea4db393911a5e0e5cd6ae3edf1445ded6"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2ODM3OTYy", "url": "https://github.com/cdapio/cdap/pull/12301#pullrequestreview-436837962", "createdAt": "2020-06-24T17:00:30Z", "commit": {"oid": "fcac3dea4db393911a5e0e5cd6ae3edf1445ded6"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNzowMDozMFrOGobF8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxNzowMDozMFrOGobF8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA0MDExNA==", "bodyText": "This is not needed. https://github.com/cdapio/cdap/blob/develop/cdap-ui/app/cdap/components/Alert/index.js#L23 We already have the logic to close the success message after 3 seconds in the Alert component", "url": "https://github.com/cdapio/cdap/pull/12301#discussion_r445040114", "createdAt": "2020-06-24T17:00:30Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/OutputPage/ImplicitSchemaDefiner/index.tsx", "diffHunk": "@@ -0,0 +1,97 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import Button from '@material-ui/core/Button';\n+import Alert from 'components/Alert';\n+import WidgetWrapper from 'components/ConfigurationGroup/WidgetWrapper';\n+import { useOutputState } from 'components/PluginJSONCreator/Create';\n+import debounce from 'lodash/debounce';\n+import * as React from 'react';\n+\n+export enum SchemaStatus {\n+  Normal = 'Normal',\n+  Success = 'SUCCESS',\n+  Failure = 'FAILURE',\n+}\n+\n+const ImplicitSchemaDefiner = () => {\n+  const { schema, setSchema } = useOutputState();\n+  const [localSchema, setLocalSchema] = React.useState(JSON.stringify(schema, undefined, 2));\n+\n+  const [schemaStatus, setSchemaStatus] = React.useState(SchemaStatus.Normal);\n+\n+  React.useEffect(() => {\n+    if (schemaStatus === SchemaStatus.Success) {\n+      // After a timeout for 500ms, reset schemaStatus to make a success Alert component disappear\n+      debounce(() => setSchemaStatus(SchemaStatus.Normal), 1500)();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fcac3dea4db393911a5e0e5cd6ae3edf1445ded6"}, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef46b42b4cb203e7dbc0c9acf3eb3c0e9379eb1b", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/ef46b42b4cb203e7dbc0c9acf3eb3c0e9379eb1b", "committedDate": "2020-06-24T17:00:44Z", "message": "address comments"}, "afterCommit": {"oid": "c4e25e8a94e51e4f8a014d28ba95648e35b57ee6", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/c4e25e8a94e51e4f8a014d28ba95648e35b57ee6", "committedDate": "2020-06-24T17:14:57Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5cfd86894d95b603a4ea657de07a16b3a48ad6d", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/f5cfd86894d95b603a4ea657de07a16b3a48ad6d", "committedDate": "2020-06-24T17:40:18Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f7b404d2d5b58f8332bac039cb07a81af53ac4ac", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/f7b404d2d5b58f8332bac039cb07a81af53ac4ac", "committedDate": "2020-06-24T17:39:15Z", "message": "onclose instead of debounce"}, "afterCommit": {"oid": "f5cfd86894d95b603a4ea657de07a16b3a48ad6d", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/f5cfd86894d95b603a4ea657de07a16b3a48ad6d", "committedDate": "2020-06-24T17:40:18Z", "message": "[CDAP-16938] Support more configurations for the output page (plugin JSON Creator)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2004, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}