{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwMzc3Nzkz", "number": 12466, "title": "[CDAP-16930] handling missing artifacts in studio and detail view", "bodyText": "Jira: https://issues.cask.co/browse/CDAP-16930\nPlugin artifacts could be missing from the pipeline either in the studio or in the detail view and currently we do not communicate this to the user in any form.\nThis PR\n\nAdds an error badge to the node indicating there's something wrong with the node in studio.\nDisables the properties button with a tooltip in studio and detail view.\nIf users try to deploy the pipeline with missing artifact, they would see an error banner.\nFixes an issue where we incorrectly populate pluginsMap (Jira: https://issues.cask.co/browse/CDAP-17042)", "createdAt": "2020-07-16T17:41:18Z", "url": "https://github.com/cdapio/cdap/pull/12466", "merged": true, "mergeCommit": {"oid": "580e88bac102381db28ae374b7c35ce12c41261f"}, "closed": true, "closedAt": "2020-07-29T16:53:25Z", "author": {"login": "itsanudeep"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1kELigFqTQ1MDEzMjY2OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc21iOwgBqjM1NjcxMjMwMTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTMyNjY4", "url": "https://github.com/cdapio/cdap/pull/12466#pullrequestreview-450132668", "createdAt": "2020-07-16T19:05:13Z", "commit": {"oid": "1ead4f4676e6f3c291d5cf29f1388f3915fe4a63"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxOTowNToxM1rOGy4koA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxOTowNToxM1rOGy4koA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAwODg2NA==", "bodyText": "Is this missing a leading /**?", "url": "https://github.com/cdapio/cdap/pull/12466#discussion_r456008864", "createdAt": "2020-07-16T19:05:13Z", "author": {"login": "njbriggs"}, "path": "cdap-ui/cypress/typings/index.d.ts", "diffHunk": "@@ -203,6 +203,13 @@ declare global {\n        */\n       assert_runtime_args_row: (row: number, key: string, value: string, macro?: boolean) => void;\n       compareSnapshot: (s: string) => any;\n+       * Deletes specified artifact via REST API", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ead4f4676e6f3c291d5cf29f1388f3915fe4a63"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMTMyOTE2", "url": "https://github.com/cdapio/cdap/pull/12466#pullrequestreview-450132916", "createdAt": "2020-07-16T19:05:38Z", "commit": {"oid": "1ead4f4676e6f3c291d5cf29f1388f3915fe4a63"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxOTowNTozOFrOGy4lYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxOTowNTozOFrOGy4lYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAwOTA1Ng==", "bodyText": "Why is this bind needed?", "url": "https://github.com/cdapio/cdap/pull/12466#discussion_r456009056", "createdAt": "2020-07-16T19:05:38Z", "author": {"login": "njbriggs"}, "path": "cdap-ui/app/hydrator/services/create/stores/config-store.js", "diffHunk": "@@ -664,7 +664,10 @@ class HydratorPlusPlusConfigStore {\n                 });\n               });\n           },\n-          (err) => console.log('ERROR fetching backend properties for nodes', err)\n+          ((err) => {\n+            console.log('ERROR fetching backend properties for nodes', err);\n+            this.validateState();\n+          }).bind(this)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ead4f4676e6f3c291d5cf29f1388f3915fe4a63"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNzM2NDU3", "url": "https://github.com/cdapio/cdap/pull/12466#pullrequestreview-450736457", "createdAt": "2020-07-17T15:06:49Z", "commit": {"oid": "1ead4f4676e6f3c291d5cf29f1388f3915fe4a63"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNTowNjo0OVrOGzWqQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNTowNjo0OVrOGzWqQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjUwMTgyNw==", "bodyText": "Probably want a version range, i.e. [6.1.3-SNAPSHOT, 6.3.0-SNAPSHOT]", "url": "https://github.com/cdapio/cdap/pull/12466#discussion_r456501827", "createdAt": "2020-07-17T15:06:49Z", "author": {"login": "yukiej"}, "path": "cdap-ui/cypress/fixtures/missing-artifact-pipeline.json", "diffHunk": "@@ -0,0 +1,149 @@\n+{\n+    \"artifact\": {\n+        \"name\": \"cdap-data-pipeline\",\n+        \"version\": \"6.1.3-SNAPSHOT\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ead4f4676e6f3c291d5cf29f1388f3915fe4a63"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ead4f4676e6f3c291d5cf29f1388f3915fe4a63", "author": {"user": {"login": "itsanudeep", "name": "Anudeep Katragadda"}}, "url": "https://github.com/cdapio/cdap/commit/1ead4f4676e6f3c291d5cf29f1388f3915fe4a63", "committedDate": "2020-07-16T17:40:04Z", "message": "handling missing artifacts in studio and detail view"}, "afterCommit": {"oid": "829a4a2fb45972f87a40f48bbb49b744fe435d2b", "author": {"user": {"login": "itsanudeep", "name": "Anudeep Katragadda"}}, "url": "https://github.com/cdapio/cdap/commit/829a4a2fb45972f87a40f48bbb49b744fe435d2b", "committedDate": "2020-07-17T16:29:36Z", "message": "handling missing artifacts in studio and detail view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwODc3MDEx", "url": "https://github.com/cdapio/cdap/pull/12466#pullrequestreview-450877011", "createdAt": "2020-07-17T18:36:25Z", "commit": {"oid": "829a4a2fb45972f87a40f48bbb49b744fe435d2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxODozNjoyNVrOGzdTYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxODozNjoyNVrOGzdTYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYxMDY1Ng==", "bodyText": "Nit: Maybe this can be a little more specific, i.e. \"creating a pipeline with a missing artifact\" ?", "url": "https://github.com/cdapio/cdap/pull/12466#discussion_r456610656", "createdAt": "2020-07-17T18:36:25Z", "author": {"login": "yukiej"}, "path": "cdap-ui/cypress/integration/pipeline.plugin.missing.spec.ts", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright \u00a9 2018 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the 'License'); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an 'AS IS' BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import{dataCy, loginIfRequired, getArtifactsPoll} from '../helpers';\n+\n+let headers = {};\n+\n+\n+describe('Creating a pipeline', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "829a4a2fb45972f87a40f48bbb49b744fe435d2b"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwODc3MjUy", "url": "https://github.com/cdapio/cdap/pull/12466#pullrequestreview-450877252", "createdAt": "2020-07-17T18:36:47Z", "commit": {"oid": "829a4a2fb45972f87a40f48bbb49b744fe435d2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwODgwOTQ1", "url": "https://github.com/cdapio/cdap/pull/12466#pullrequestreview-450880945", "createdAt": "2020-07-17T18:43:12Z", "commit": {"oid": "829a4a2fb45972f87a40f48bbb49b744fe435d2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06f6ea3b224615d38eabee53d72ded141aaced98", "author": {"user": {"login": "itsanudeep", "name": "Anudeep Katragadda"}}, "url": "https://github.com/cdapio/cdap/commit/06f6ea3b224615d38eabee53d72ded141aaced98", "committedDate": "2020-07-20T17:59:50Z", "message": "handling missing artifacts in studio and detail view"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "623eab8c2d37e65a56c2bde5db452691d0c26293", "author": {"user": {"login": "itsanudeep", "name": "Anudeep Katragadda"}}, "url": "https://github.com/cdapio/cdap/commit/623eab8c2d37e65a56c2bde5db452691d0c26293", "committedDate": "2020-07-20T17:11:43Z", "message": "test suite description"}, "afterCommit": {"oid": "06f6ea3b224615d38eabee53d72ded141aaced98", "author": {"user": {"login": "itsanudeep", "name": "Anudeep Katragadda"}}, "url": "https://github.com/cdapio/cdap/commit/06f6ea3b224615d38eabee53d72ded141aaced98", "committedDate": "2020-07-20T17:59:50Z", "message": "handling missing artifacts in studio and detail view"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1828, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}