{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwNzIxNzMz", "number": 11815, "title": "[CDAP-16198] Add Multi Row Integration Tests", "bodyText": "JIRA: https://issues.cask.co/browse/CDAP-16198\nBuild: https://builds.cask.co/browse/CDAP-UDUT485\nIT: https://builds.cask.co/browse/IT-UPD2101", "createdAt": "2020-01-09T00:59:18Z", "url": "https://github.com/cdapio/cdap/pull/11815", "merged": true, "mergeCommit": {"oid": "4e46ab57c2c9891a7774cced7f24f2680455e5a1"}, "closed": true, "closedAt": "2020-01-23T23:35:26Z", "author": {"login": "elfenheart"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4zhJTgFqTM0MDg5NDAxMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8_DoLABqjI5NzIwNjQ5NjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwODk0MDEz", "url": "https://github.com/cdapio/cdap/pull/11815#pullrequestreview-340894013", "createdAt": "2020-01-10T00:19:13Z", "commit": {"oid": "be10cbbf538f273026a76edf069fd1c880dba952"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDoxOToxM1rOFcHM2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQwMDoyMzo0N1rOFcHRIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyMjQyNw==", "bodyText": "Any reason why you're using className instead of data-cy here and in other places in this PR?", "url": "https://github.com/cdapio/cdap/pull/11815#discussion_r365022427", "createdAt": "2020-01-10T00:19:13Z", "author": {"login": "itsanudeep"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/AbstractMultiRowWidget/AbstractRow.tsx", "diffHunk": "@@ -87,26 +88,27 @@ export default class AbstractRow<\n   };\n \n   public render() {\n-    const { errors, value } = this.props;\n+    const { errors, value, dataCy, index } = this.props;\n     let errorMsg = null;\n     if (errors && value) {\n       const errorObj = errors.find((error: IErrorObj) => error.element === value);\n       if (errorObj) {\n         errorMsg = errorObj.msg;\n       }\n     }\n+\n     return (\n       <React.Fragment>\n-        <div className={this.props.classes.root}>\n+        <div className={this.props.classes.root} data-cy={`${index}`}>\n           {this.renderInput()}\n \n           <If condition={!this.props.disabled}>\n             <React.Fragment>\n-              <IconButton onClick={this.props.addRow}>\n+              <IconButton onClick={this.props.addRow} className=\"add-row\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be10cbbf538f273026a76edf069fd1c880dba952"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyMzUyMw==", "bodyText": "I like this function! \ud83d\ude04\nDo you think renaming this to something that says this is data-cy selector would be helpful? When I first read the function name earlier in this PR, I thought this would select a plugin property.", "url": "https://github.com/cdapio/cdap/pull/11815#discussion_r365023523", "createdAt": "2020-01-10T00:23:47Z", "author": {"login": "itsanudeep"}, "path": "cdap-ui/cypress/support/MultiRowWidgets/utilities.ts", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+export function propertySelector(property) {\n+  return `[data-cy=\"${property}\"]`;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be10cbbf538f273026a76edf069fd1c880dba952"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDM1NjUy", "url": "https://github.com/cdapio/cdap/pull/11815#pullrequestreview-341435652", "createdAt": "2020-01-10T21:37:31Z", "commit": {"oid": "be10cbbf538f273026a76edf069fd1c880dba952"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMTozNzozMlrOFcgtsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMTozNzo1NlrOFcguNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ0MDQzNA==", "bodyText": "@elfenheart I am adding this as a cypress command to be used across all the tests. https://github.com/cdapio/cdap/pull/11814/files#diff-3f1be9a94ccb41c3adcaa145f1dbdc11R420-R435. Do you mind waiting for my PR to use the cypress command?", "url": "https://github.com/cdapio/cdap/pull/11815#discussion_r365440434", "createdAt": "2020-01-10T21:37:32Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/cypress/support/MultiRowWidgets/utilities.ts", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+export function propertySelector(property) {\n+  return `[data-cy=\"${property}\"]`;\n+}\n+\n+export function rowSelector(property, index) {\n+  return `${propertySelector(property)} [data-cy=\"${index}\"]`;\n+}\n+\n+export function openPropertyModal() {\n+  // open plugin properties\n+  cy.get('[data-cy=\"plugin-node-Projection-transform-0\"] .node .node-configure-btn')\n+    .invoke('show')\n+    .click();\n+}\n+\n+export function getExportProperties(stageName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be10cbbf538f273026a76edf069fd1c880dba952"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ0MDU2NQ==", "bodyText": "This would also be a good cypress command. Almost all the pipeline studio tests will use this.", "url": "https://github.com/cdapio/cdap/pull/11815#discussion_r365440565", "createdAt": "2020-01-10T21:37:56Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/cypress/support/MultiRowWidgets/utilities.ts", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+export function propertySelector(property) {\n+  return `[data-cy=\"${property}\"]`;\n+}\n+\n+export function rowSelector(property, index) {\n+  return `${propertySelector(property)} [data-cy=\"${index}\"]`;\n+}\n+\n+export function openPropertyModal() {\n+  // open plugin properties", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be10cbbf538f273026a76edf069fd1c880dba952"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be10cbbf538f273026a76edf069fd1c880dba952", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/be10cbbf538f273026a76edf069fd1c880dba952", "committedDate": "2020-01-09T00:56:23Z", "message": "[CDAP-16198] Add Multi Row Integration Tests"}, "afterCommit": {"oid": "6460c7e1a91997a91a83354a4fd7d9beaed9b9fc", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/6460c7e1a91997a91a83354a4fd7d9beaed9b9fc", "committedDate": "2020-01-15T23:45:10Z", "message": "update cy selector in multi row widgets"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6460c7e1a91997a91a83354a4fd7d9beaed9b9fc", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/6460c7e1a91997a91a83354a4fd7d9beaed9b9fc", "committedDate": "2020-01-15T23:45:10Z", "message": "update cy selector in multi row widgets"}, "afterCommit": {"oid": "642d0f48ff3fece49159b6148337ec1d91cf18f0", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/642d0f48ff3fece49159b6148337ec1d91cf18f0", "committedDate": "2020-01-16T01:14:45Z", "message": "update cy selector in multi row widgets"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTQyNTQ5", "url": "https://github.com/cdapio/cdap/pull/11815#pullrequestreview-346942549", "createdAt": "2020-01-22T22:16:37Z", "commit": {"oid": "642d0f48ff3fece49159b6148337ec1d91cf18f0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f549f30b0262dd637f020a50d797df0dfadedb93", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/f549f30b0262dd637f020a50d797df0dfadedb93", "committedDate": "2020-01-23T00:18:12Z", "message": "[CDAP-16198] Add Multi Row Integration Tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "642d0f48ff3fece49159b6148337ec1d91cf18f0", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/642d0f48ff3fece49159b6148337ec1d91cf18f0", "committedDate": "2020-01-16T01:14:45Z", "message": "update cy selector in multi row widgets"}, "afterCommit": {"oid": "f549f30b0262dd637f020a50d797df0dfadedb93", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/f549f30b0262dd637f020a50d797df0dfadedb93", "committedDate": "2020-01-23T00:18:12Z", "message": "[CDAP-16198] Add Multi Row Integration Tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1361, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}