{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyOTYyODQ0", "number": 12433, "title": "[CDAP-17053] Add search functionality on secure keys (Secure Key Manager)", "bodyText": "Add search functionality in order to help users find a secure key more easily.", "createdAt": "2020-07-01T20:12:16Z", "url": "https://github.com/cdapio/cdap/pull/12433", "merged": true, "mergeCommit": {"oid": "06d888baef7a2b8ff009ef4e3b76fe7eaffa4a70"}, "closed": true, "closedAt": "2020-07-22T22:40:06Z", "author": {"login": "jennac3"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3dVItgFqTQ1MzQ3NzU0NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3ieEeABqjM1Nzc3NzM3Njg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNDc3NTQ0", "url": "https://github.com/cdapio/cdap/pull/12433#pullrequestreview-453477544", "createdAt": "2020-07-22T16:18:50Z", "commit": {"oid": "33a7b9fd2480d4adfa2caf4b8f94ba930e1d524e"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNjoxODo1MVrOG1p9lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNjoyMjoxMFrOG1qHmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkxNTIyMw==", "bodyText": "I don't think you need a copyToClipboard for description of the secure key. I think if you want to add this feature, it's better for the name, because that is what is going to be used in pipelines", "url": "https://github.com/cdapio/cdap/pull/12433#discussion_r458915223", "createdAt": "2020-07-22T16:18:51Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/SecureKeys/SecureKeyDetails/index.tsx", "diffHunk": "@@ -0,0 +1,168 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import * as React from 'react';\n+\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+\n+import ArrowBackIcon from '@material-ui/icons/ArrowBack';\n+import Button from '@material-ui/core/Button';\n+import Divider from '@material-ui/core/Divider';\n+import FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\n+import FormControl from '@material-ui/core/FormControl';\n+import IconButton from '@material-ui/core/IconButton';\n+import InputAdornment from '@material-ui/core/InputAdornment';\n+import Paper from '@material-ui/core/Paper';\n+import TextField from '@material-ui/core/TextField';\n+import classnames from 'classnames';\n+import { copyToClipBoard } from 'services/Clipboard';\n+\n+const styles = (theme): StyleRules => {\n+  return {\n+    secureKeysTitle: {\n+      paddingTop: theme.spacing(1),\n+    },\n+    divider: {\n+      width: '100vw',\n+    },\n+    secureKeyDetails: {\n+      margin: `${theme.Spacing(3)}px 0px`,\n+      border: `1px solid ${theme.palette.grey[300]}`,\n+      borderRadius: '6px',\n+      padding: theme.spacing(3),\n+      display: 'grid',\n+      gridTemplateColumns: 'repeat(4, 1fr)',\n+    },\n+    keyID: {\n+      gridColumnStart: '1',\n+      gridColumnEnd: '2',\n+    },\n+    details: {\n+      gridColumnStart: '2',\n+      gridColumnEnd: '5',\n+    },\n+    secureKeyActionButton: {\n+      margin: theme.spacing(1),\n+      float: 'right',\n+    },\n+    secureKeyInput: {\n+      margin: `${theme.Spacing(1)}px 0px`,\n+      whiteSpace: 'nowrap',\n+      wordWrap: 'normal',\n+      paddingRight: '12px',\n+      letterSpacing: '.00625em',\n+      fontSize: '1rem',\n+      lineHeight: '1.5rem',\n+    },\n+  };\n+};\n+\n+interface ISecureKeysDetailsProps extends WithStyles<typeof styles> {\n+  state: any;\n+  onBackButtonClick: () => void;\n+  openDeleteDialog: (index: number) => void;\n+  openEditDialog: (index: number) => void;\n+}\n+\n+const SecureKeysDetailsView: React.FC<ISecureKeysDetailsProps> = ({\n+  classes,\n+  state,\n+  onBackButtonClick,\n+  openDeleteDialog,\n+  openEditDialog,\n+}) => {\n+  const { secureKeys, activeKeyIndex } = state;\n+\n+  const keyMetadata = secureKeys.get(activeKeyIndex);\n+\n+  return (\n+    <div>\n+      <h1 className={classes.secureKeysTitle}>\n+        <IconButton onClick={onBackButtonClick}>\n+          <ArrowBackIcon />\n+        </IconButton>\n+        {keyMetadata.get('name')}\n+      </h1>\n+      <Divider className={classes.divider} />\n+      <Paper className={classes.secureKeyDetails} elevation={0}>\n+        <div className={classes.keyID}>{keyMetadata.get('name')}</div>\n+        <div className={classes.details}>\n+          <FormControl\n+            fullWidth\n+            className={classnames(classes.margin, classes.textField)}\n+            variant=\"outlined\"\n+          >\n+            <TextField\n+              type={'text'}\n+              value={keyMetadata.get('description')}\n+              variant=\"filled\"\n+              className={classes.secureKeyInput}\n+              InputProps={{\n+                readOnly: true,\n+                endAdornment: (\n+                  <InputAdornment position=\"end\">\n+                    <IconButton onClick={() => copyToClipBoard(keyMetadata.get('description'))}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33a7b9fd2480d4adfa2caf4b8f94ba930e1d524e"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkxNjYyNg==", "bodyText": "you might want to normalize the key and searchText first (ie. lower case them) so that the search is case insensitive", "url": "https://github.com/cdapio/cdap/pull/12433#discussion_r458916626", "createdAt": "2020-07-22T16:20:53Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/SecureKeys/SecureKeyList/index.tsx", "diffHunk": "@@ -93,25 +99,34 @@ interface ISecureKeyListProps extends WithStyles<typeof styles> {\n   state: any;\n   alertSuccess: () => void;\n   alertFailure: () => void;\n-  openDeleteDialog: (index: number) => void;\n   openEditDialog: (index: number) => void;\n+  openDeleteDialog: (index: number) => void;\n+  onSecureKeyDetailsClick: (index: number) => void;\n }\n \n const SecureKeyListView: React.FC<ISecureKeyListProps> = ({\n   classes,\n   state,\n   alertSuccess,\n   alertFailure,\n-  openDeleteDialog,\n   openEditDialog,\n+  openDeleteDialog,\n+  onSecureKeyDetailsClick,\n }) => {\n   const { secureKeys } = state;\n \n+  // used for filtering down secure keys\n+  const [searchText, setSearchText] = React.useState('');\n+\n   const [createDialogOpen, setCreateDialogOpen] = React.useState(false);\n \n+  const filteredSecureKeys = secureKeys.filter(\n+    (key) => key.get('name').includes(searchText) || key.get('description').includes(searchText)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33a7b9fd2480d4adfa2caf4b8f94ba930e1d524e"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkxNzc4Ng==", "bodyText": "I don't think you need a details view for secure keys. Can the detail view and the edit mode be combined? There's not a lot of information needed to be shown", "url": "https://github.com/cdapio/cdap/pull/12433#discussion_r458917786", "createdAt": "2020-07-22T16:22:10Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/SecureKeys/SecureKeyDetails/index.tsx", "diffHunk": "@@ -0,0 +1,168 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import * as React from 'react';\n+\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+\n+import ArrowBackIcon from '@material-ui/icons/ArrowBack';\n+import Button from '@material-ui/core/Button';\n+import Divider from '@material-ui/core/Divider';\n+import FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\n+import FormControl from '@material-ui/core/FormControl';\n+import IconButton from '@material-ui/core/IconButton';\n+import InputAdornment from '@material-ui/core/InputAdornment';\n+import Paper from '@material-ui/core/Paper';\n+import TextField from '@material-ui/core/TextField';\n+import classnames from 'classnames';\n+import { copyToClipBoard } from 'services/Clipboard';\n+\n+const styles = (theme): StyleRules => {\n+  return {\n+    secureKeysTitle: {\n+      paddingTop: theme.spacing(1),\n+    },\n+    divider: {\n+      width: '100vw',\n+    },\n+    secureKeyDetails: {\n+      margin: `${theme.Spacing(3)}px 0px`,\n+      border: `1px solid ${theme.palette.grey[300]}`,\n+      borderRadius: '6px',\n+      padding: theme.spacing(3),\n+      display: 'grid',\n+      gridTemplateColumns: 'repeat(4, 1fr)',\n+    },\n+    keyID: {\n+      gridColumnStart: '1',\n+      gridColumnEnd: '2',\n+    },\n+    details: {\n+      gridColumnStart: '2',\n+      gridColumnEnd: '5',\n+    },\n+    secureKeyActionButton: {\n+      margin: theme.spacing(1),\n+      float: 'right',\n+    },\n+    secureKeyInput: {\n+      margin: `${theme.Spacing(1)}px 0px`,\n+      whiteSpace: 'nowrap',\n+      wordWrap: 'normal',\n+      paddingRight: '12px',\n+      letterSpacing: '.00625em',\n+      fontSize: '1rem',\n+      lineHeight: '1.5rem',\n+    },\n+  };\n+};\n+\n+interface ISecureKeysDetailsProps extends WithStyles<typeof styles> {\n+  state: any;\n+  onBackButtonClick: () => void;\n+  openDeleteDialog: (index: number) => void;\n+  openEditDialog: (index: number) => void;\n+}\n+\n+const SecureKeysDetailsView: React.FC<ISecureKeysDetailsProps> = ({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33a7b9fd2480d4adfa2caf4b8f94ba930e1d524e"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNzE5OTI1", "url": "https://github.com/cdapio/cdap/pull/12433#pullrequestreview-453719925", "createdAt": "2020-07-22T22:08:33Z", "commit": {"oid": "cadce955ffef3c1a127420c2bb994a29a8794c61"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75c91900bbd8b056052efdf6ab47990218860c1e", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/75c91900bbd8b056052efdf6ab47990218860c1e", "committedDate": "2020-07-22T22:21:16Z", "message": "[CDAP-17053] Add search functionality on secure keys (Secure Key Manager)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cadce955ffef3c1a127420c2bb994a29a8794c61", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/cadce955ffef3c1a127420c2bb994a29a8794c61", "committedDate": "2020-07-22T18:50:58Z", "message": "address comments"}, "afterCommit": {"oid": "75c91900bbd8b056052efdf6ab47990218860c1e", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/75c91900bbd8b056052efdf6ab47990218860c1e", "committedDate": "2020-07-22T22:21:16Z", "message": "[CDAP-17053] Add search functionality on secure keys (Secure Key Manager)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1943, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}