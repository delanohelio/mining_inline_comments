{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNzM5ODEy", "number": 12881, "title": "[CDAP-17430] Replication table scatter plot graph", "bodyText": "JIRA: https://cdap.atlassian.net/browse/CDAP-17430\nBuild: https://builds.cask.co/browse/CDAP-UDUT890", "createdAt": "2020-12-04T19:28:30Z", "url": "https://github.com/cdapio/cdap/pull/12881", "merged": true, "mergeCommit": {"oid": "86ce5e8916da4b27816c6e43e2374e96bb3b240e"}, "closed": true, "closedAt": "2020-12-09T21:52:07Z", "author": {"login": "elfenheart"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdi-ielAFqTU0NTMwNDc0NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkS1ktgBqjQwODcyMzkzODU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MzA0NzQ1", "url": "https://github.com/cdapio/cdap/pull/12881#pullrequestreview-545304745", "createdAt": "2020-12-04T21:22:25Z", "commit": {"oid": "eaabbadb106e504faf129524d295d01702310c4c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQyMToyMjoyNVrOH_ieJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQyMToyMjoyNVrOH_ieJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM4NzEwOQ==", "bodyText": "Are any of these types shareable between the charting parsers? Is there a common data model that the back end is using?", "url": "https://github.com/cdapio/cdap/pull/12881#discussion_r536387109", "createdAt": "2020-12-04T21:22:25Z", "author": {"login": "njbriggs"}, "path": "cdap-ui/app/cdap/components/Replicator/Detail/TableScatterPlotGraph/parser.ts", "diffHunk": "@@ -0,0 +1,94 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+export interface ITableMetricsData {\n+  tableName: string;\n+  errors: number;\n+  eventsPerMin: number;\n+  latency: number;\n+}\n+\n+interface IMetricData {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eaabbadb106e504faf129524d295d01702310c4c"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MzIwNjk4", "url": "https://github.com/cdapio/cdap/pull/12881#pullrequestreview-545320698", "createdAt": "2020-12-04T21:48:45Z", "commit": {"oid": "eaabbadb106e504faf129524d295d01702310c4c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQyMTo0ODo0NlrOH_jNQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQyMTo0ODo0NlrOH_jNQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM5OTE3MA==", "bodyText": "Small optimization: d3.max takes an accessor. So that portion could be d3.max(data, (d) => d.eventsPerMin)", "url": "https://github.com/cdapio/cdap/pull/12881#discussion_r536399170", "createdAt": "2020-12-04T21:48:46Z", "author": {"login": "njbriggs"}, "path": "cdap-ui/app/cdap/components/Replicator/Detail/TableScatterPlotGraph/scatterPlot.ts", "diffHunk": "@@ -0,0 +1,185 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import * as d3 from 'd3';\n+import { ITableMetricsData } from 'components/Replicator/Detail/TableScatterPlotGraph/parser';\n+import numeral from 'numeral';\n+\n+export const COLOR_MAP = {\n+  active: '#0076DC',\n+  activeOutline: '#9FC0FB',\n+  inactive: '#999999',\n+  inactiveOutline: '#686868',\n+  axisColor: '#DDDDDD',\n+  legend: '#999999',\n+  tick: '#333333',\n+};\n+\n+export function renderScatterPlot(id: string, data: ITableMetricsData[], containerWidth: number) {\n+  if (containerWidth < 0) {\n+    return;\n+  }\n+  const containerHeight = 350;\n+\n+  const margin = {\n+    top: 10,\n+    bottom: 50,\n+    left: 60,\n+    right: 35,\n+  };\n+\n+  const width = containerWidth - margin.left - margin.right;\n+  const height = containerHeight - margin.top - margin.bottom;\n+\n+  const svg = d3\n+    .select(`#${id} > svg`)\n+    .attr('height', containerHeight)\n+    .attr('width', containerWidth);\n+\n+  // Clear out existing graph\n+  const groupId = 'replication-latency-graph-con13tainer';\n+  const groupElem = d3.select(`#${id} > svg > #${groupId}`);\n+  groupElem.remove();\n+\n+  // Start graph render\n+  const chart = svg\n+    .append('g')\n+    .attr('id', groupId)\n+    .attr('transform', `translate(${margin.left}, ${margin.top})`);\n+\n+  const GRAPH_BUFFER = 1.25;\n+  const MIN_VALUE = 1;\n+\n+  const xMax = Math.max(MIN_VALUE, d3.max(data.map((d) => d.eventsPerMin)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eaabbadb106e504faf129524d295d01702310c4c"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MzIyNTA0", "url": "https://github.com/cdapio/cdap/pull/12881#pullrequestreview-545322504", "createdAt": "2020-12-04T21:51:03Z", "commit": {"oid": "eaabbadb106e504faf129524d295d01702310c4c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eaabbadb106e504faf129524d295d01702310c4c", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/eaabbadb106e504faf129524d295d01702310c4c", "committedDate": "2020-12-04T19:26:49Z", "message": "[CDAP-17430] Replication table scatter plot graph"}, "afterCommit": {"oid": "0dab4453cc0b7f91dfed16c4b4b2d503f6f41d16", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/0dab4453cc0b7f91dfed16c4b4b2d503f6f41d16", "committedDate": "2020-12-08T23:30:17Z", "message": "[CDAP-17430] Replication table scatter plot graph"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "392c17edb59ca4ffc5cda550359fb82200c7bbd8", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/392c17edb59ca4ffc5cda550359fb82200c7bbd8", "committedDate": "2020-12-08T23:35:09Z", "message": "[CDAP-17430] Replication table scatter plot graph"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0dab4453cc0b7f91dfed16c4b4b2d503f6f41d16", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/0dab4453cc0b7f91dfed16c4b4b2d503f6f41d16", "committedDate": "2020-12-08T23:30:17Z", "message": "[CDAP-17430] Replication table scatter plot graph"}, "afterCommit": {"oid": "392c17edb59ca4ffc5cda550359fb82200c7bbd8", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/392c17edb59ca4ffc5cda550359fb82200c7bbd8", "committedDate": "2020-12-08T23:35:09Z", "message": "[CDAP-17430] Replication table scatter plot graph"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1382, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}