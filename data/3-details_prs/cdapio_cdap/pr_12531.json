{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4NzYxMDk2", "number": 12531, "title": "[CDAP-17010] Expose widget attributes in each widget class (Plugin JSON Creator)", "bodyText": "Exposed widget attributes in each widget class definition.\nFixed some of widgets error.", "createdAt": "2020-07-29T23:14:14Z", "url": "https://github.com/cdapio/cdap/pull/12531", "merged": true, "mergeCommit": {"oid": "b2614ff500320f39ec96643f0e888cf38ceda86c"}, "closed": true, "closedAt": "2020-08-06T20:19:45Z", "author": {"login": "jennac3"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6A-V3gFqTQ1ODQ4ODAxNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8U5NwABqjM2MzA1MDg4NTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NDg4MDE2", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-458488016", "createdAt": "2020-07-30T15:01:46Z", "commit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTowMTo0NlrOG5nF8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTowMTo0NlrOG5nF8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2MjUxNQ==", "bodyText": "Should \"native\" be here as well (see line 107)? I think it also needs to get added to ISelectWidgetProps (along with default?).", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463062515", "createdAt": "2020-07-30T15:01:46Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/FormInputs/Select/index.tsx", "diffHunk": "@@ -160,5 +161,13 @@ const CustomSelect: React.FC<ISelectProps> = ({\n };\n \n (CustomSelect as any).propTypes = WIDGET_PROPTYPES;\n+(CustomSelect as any).getWidgetAttributes = () => {\n+  return {\n+    options: { type: 'ISelectOptions[]|string[]|number[]', required: true },\n+    default: { type: 'string', required: false },\n+    dense: { type: 'boolean', required: false },\n+    inline: { type: 'boolean', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NDkwNDQ5", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-458490449", "createdAt": "2020-07-30T15:04:24Z", "commit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTowNDoyNVrOG5nNOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTowNDoyNVrOG5nNOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2NDM3OQ==", "bodyText": "Should default get added to ITextBoxWidgetProps?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463064379", "createdAt": "2020-07-30T15:04:25Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/FormInputs/TextBox/index.tsx", "diffHunk": "@@ -75,5 +75,14 @@ const TextBox: React.FC<ITextBoxProps> = ({\n   );\n };\n \n-export default React.memo(TextBox);\n+const TextBox = React.memo(TextBoxComponent);\n+\n (TextBox as any).propTypes = WIDGET_PROPTYPES;\n+(TextBox as any).getWidgetAttributes = () => {\n+  return {\n+    placeholder: { type: 'string', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NDk1MTk0", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-458495194", "createdAt": "2020-07-30T15:09:33Z", "commit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTowOTozM1rOG5nbIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTowOTozM1rOG5nbIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2NzkzNw==", "bodyText": "I don't see where we look for/use this?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463067937", "createdAt": "2020-07-30T15:09:33Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/KeyValueDropdownWidget/index.tsx", "diffHunk": "@@ -72,3 +74,12 @@ export default function KeyValueDropdownWidget(props) {\n }\n \n (KeyValueDropdownWidget as any).propTypes = WIDGET_PROPTYPES;\n+(KeyValueDropdownWidget as any).getWidgetAttributes = () => {\n+  return {\n+    'key-placeholder': { type: 'string', required: false },\n+    'value-placeholder': { type: 'string', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NDk3OTc5", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-458497979", "createdAt": "2020-07-30T15:12:24Z", "commit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxMjoyNVrOG5ni7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxMjoyNVrOG5ni7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2OTkzNQ==", "bodyText": "where do we use this?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463069935", "createdAt": "2020-07-30T15:12:25Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/KeyValueWidget/index.tsx", "diffHunk": "@@ -76,3 +78,13 @@ export default function KeyValueWidget(props) {\n   ...WIDGET_PROPTYPES,\n   isEncoded: PropTypes.bool,\n };\n+\n+(KeyValueWidget as any).getWidgetAttributes = () => {\n+  return {\n+    'key-placeholder': { type: 'string', required: false },\n+    'value-placeholder': { type: 'string', required: false },\n+    'kv-delimiter': { type: 'string', required: false },\n+    delimiter: { type: 'string', required: false },\n+    showDelimiter: { type: 'boolean', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NDk5NDQ4", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-458499448", "createdAt": "2020-07-30T15:13:53Z", "commit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxMzo1M1rOG5nm4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxMzo1M1rOG5nm4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3MDk0Nw==", "bodyText": "Where is this type defined?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463070947", "createdAt": "2020-07-30T15:13:53Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/MemorySelectWidget/index.js", "diffHunk": "@@ -38,3 +38,8 @@ export default function MemorySelectWidget({ ...props }) {\n \n MemorySelectWidget.propTypes = WIDGET_PROPTYPES;\n MemorySelectWidget.defaultProps = DEFAULT_WIDGET_PROPS;\n+MemorySelectWidget.getWidgetAttributes = () => {\n+  return {\n+    size: { type: 'Size', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NTAwMjgz", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-458500283", "createdAt": "2020-07-30T15:14:46Z", "commit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxNDo0NlrOG5npRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxNDo0NlrOG5npRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3MTU1Nw==", "bodyText": "it looks like this can also be a string?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463071557", "createdAt": "2020-07-30T15:14:46Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/MultipleValuesWidget/index.tsx", "diffHunk": "@@ -74,3 +76,11 @@ export default function MultipleValuesWidget(props) {\n }\n \n (MultipleValuesWidget as any).propTypes = WIDGET_PROPTYPES;\n+(MultipleValuesWidget as any).getWidgetAttributes = () => {\n+  return {\n+    placeholders: { type: 'string[]', required: false },\n+    'values-delimiter': { type: 'string', required: false },\n+    numValues: { type: 'number', required: true },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NTA0MTg2", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-458504186", "createdAt": "2020-07-30T15:18:27Z", "commit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxODoyN1rOG5n1IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxODoyN1rOG5n1IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3NDU5Mg==", "bodyText": "where do we check for/use this?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463074592", "createdAt": "2020-07-30T15:18:27Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/RadioGroupWidget/index.tsx", "diffHunk": "@@ -128,3 +128,10 @@ export default function RadioGroupWidget(props) {\n }\n \n (RadioGroupWidget as any).propTypes = WIDGET_PROPTYPES;\n+(RadioGroupWidget as any).getWidgetAttributes = () => {\n+  return {\n+    layout: { type: 'string', required: true },\n+    options: { type: 'IOption[]', required: true },\n+    default: { type: 'string', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NTEwMzEz", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-458510313", "createdAt": "2020-07-30T15:25:03Z", "commit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToyNTowM1rOG5oGzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToyNTowM1rOG5oGzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3OTExOA==", "bodyText": "It looks a little weird to have some of the imports before the license.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463079118", "createdAt": "2020-07-30T15:25:03Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/WranglerEditor/index.tsx", "diffHunk": "@@ -1,3 +1,16 @@\n+import * as React from 'react';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NTE4NDI3", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-458518427", "createdAt": "2020-07-30T15:33:32Z", "commit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTozMzozM1rOG5od2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTozMzozM1rOG5od2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA4NTAxNw==", "bodyText": "Why did we change this from empty string to undefined? Having it be set to undefined seems potentially ambiguous if we want to check for existence of the key in acc.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463085017", "createdAt": "2020-07-30T15:33:33Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/ConfigurationGroupPage/GroupPanel/WidgetCollection/WidgetPanel/WidgetInfoInput/index.tsx", "diffHunk": "@@ -70,12 +67,14 @@ const WidgetInfoInputView: React.FC<IWidgetInfoInputProps> = ({ classes, widgetI\n       setWidgetInfo(widgetInfo.setIn([widgetID, 'widgetType'], widgetType));\n \n       // Change widget-attributes so that it corresponds to the widget-type\n+      const comp = WIDGET_FACTORY[widgetType];\n+      const widgetAttributes = comp.getWidgetAttributes();\n       setWidgetToAttributes(\n         widgetToAttributes.set(\n           widgetID,\n           Map(\n-            Object.keys(WIDGET_TYPE_TO_ATTRIBUTES[widgetType]).reduce((acc, curr) => {\n-              acc[curr] = '';\n+            Object.keys(widgetAttributes).reduce((acc, curr) => {\n+              acc[curr] = undefined;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4NTE5MDE1", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-458519015", "createdAt": "2020-07-30T15:34:14Z", "commit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTozNDoxNFrOG5ofYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTozNDoxNFrOG5ofYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA4NTQxMQ==", "bodyText": "I would move this below the license.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463085411", "createdAt": "2020-07-30T15:34:14Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/SelectWithOptions/index.js", "diffHunk": "@@ -1,3 +1,4 @@\n+import { Input } from 'reactstrap';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d92188f81b1f76f31df6a594df58fa6d312e94e", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/7d92188f81b1f76f31df6a594df58fa6d312e94e", "committedDate": "2020-07-30T18:20:09Z", "message": "smalll fix"}, "afterCommit": {"oid": "d6dec4ede2e79555e3e684bfe608bf8938687a15", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/d6dec4ede2e79555e3e684bfe608bf8938687a15", "committedDate": "2020-07-30T18:20:42Z", "message": "small add"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b44384cf10d98d14ce5734762489422a69ac7a48", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/b44384cf10d98d14ce5734762489422a69ac7a48", "committedDate": "2020-07-31T02:01:10Z", "message": "fix"}, "afterCommit": {"oid": "0b3b547df764ae1d5059cb15ab875e4cd7ea4b18", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/0b3b547df764ae1d5059cb15ab875e4cd7ea4b18", "committedDate": "2020-07-31T02:04:56Z", "message": "address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjIwNDM3", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-460220437", "createdAt": "2020-08-03T17:41:49Z", "commit": {"oid": "0b3b547df764ae1d5059cb15ab875e4cd7ea4b18"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNDU1Mzc1", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-460455375", "createdAt": "2020-08-04T02:32:05Z", "commit": {"oid": "0b3b547df764ae1d5059cb15ab875e4cd7ea4b18"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMjozMjowNVrOG7O4JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMjozMzo1M1rOG7O59Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc2MjkxNg==", "bodyText": "keep this return statement, then the else block is not needed", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r464762916", "createdAt": "2020-08-04T02:32:05Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/AbstractMultiRowWidget/index.tsx", "diffHunk": "@@ -80,26 +81,27 @@ export default class AbstractMultiRowWidget<\n           autofocus: null,\n         },\n         () => {\n-          this.addRow(-1, false);\n+          if (!this.state.rows || this.state.rows.length === 0) {\n+            // adding a new empty row in case values are empty\n+            this.addRow(-1, false);\n+          }\n         }\n       );\n+    } else {\n+      const rows = [];\n \n-      return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b3b547df764ae1d5059cb15ab875e4cd7ea4b18"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc2MzM4MQ==", "bodyText": "not necessary. We're not going to support DLP widget for the JSON widget creator", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r464763381", "createdAt": "2020-08-04T02:33:53Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/DLPCustomWidget/index.tsx", "diffHunk": "@@ -85,3 +87,11 @@ export default function DLPWidget(props) {\n }\n \n (DLPWidget as any).propTypes = WIDGET_PROPTYPES;\n+(DLPWidget as any).getWidgetAttributes = () => {\n+  return {\n+    // TODO: Need to investigate 'transforms' more\n+    // transforms: { type: 'ITransformProp[]', required: true },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b3b547df764ae1d5059cb15ab875e4cd7ea4b18"}, "originalPosition": 31}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a78164dd3bc5c6efbf887bbfb63d8e4050ea303d", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/a78164dd3bc5c6efbf887bbfb63d8e4050ea303d", "committedDate": "2020-08-04T17:10:15Z", "message": "solve conflicts"}, "afterCommit": {"oid": "3244624cc172adaf9e8edb3eb258f41756386eca", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/3244624cc172adaf9e8edb3eb258f41756386eca", "committedDate": "2020-08-04T17:14:46Z", "message": "[CDAP-17010] Expose widget attributes in each widget class (Plugin JSON Creator)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3244624cc172adaf9e8edb3eb258f41756386eca", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/3244624cc172adaf9e8edb3eb258f41756386eca", "committedDate": "2020-08-04T17:14:46Z", "message": "[CDAP-17010] Expose widget attributes in each widget class (Plugin JSON Creator)"}, "afterCommit": {"oid": "f9d682813afb3ba6f95c58dcc7d702e933ae0a42", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/f9d682813afb3ba6f95c58dcc7d702e933ae0a42", "committedDate": "2020-08-04T17:17:34Z", "message": "[CDAP-17010] Expose widget attributes in each widget class (Plugin JSON Creator)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea0d005c58f879a98b0d820055041068d5addc7c", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/ea0d005c58f879a98b0d820055041068d5addc7c", "committedDate": "2020-08-05T18:56:23Z", "message": "dropzone css"}, "afterCommit": {"oid": "a1e3516ca0270ae08e57e7eaac2f0e22a62ba9ca", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/a1e3516ca0270ae08e57e7eaac2f0e22a62ba9ca", "committedDate": "2020-08-05T20:51:54Z", "message": "dropzone"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNzE4NDMw", "url": "https://github.com/cdapio/cdap/pull/12531#pullrequestreview-462718430", "createdAt": "2020-08-06T17:14:33Z", "commit": {"oid": "a1e3516ca0270ae08e57e7eaac2f0e22a62ba9ca"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzoxNDozNFrOG88swg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzoxNToyOFrOG88u0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU2MjI0Mg==", "bodyText": "this is a wrong usage for debounce, this should be a timeout.\nYou should debounce the entire callback of useEffect, and inside it have a timeout to set the loading to false", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r466562242", "createdAt": "2020-08-06T17:14:34Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/ConfigurationGroupPage/GroupPanel/WidgetCollection/WidgetAttributesPanel/index.tsx", "diffHunk": "@@ -71,14 +73,34 @@ const WidgetAttributesPanelView: React.FC<IWidgetAttributesPanelProps> = ({\n   // 'widgetToAttributes' will only be changed when user clicks on 'save' button or closes the dialog.\n   const [localWidgetToAttributes, setLocalWidgetToAttributes] = React.useState(widgetToAttributes);\n \n+  const [loading, setLoading] = React.useState(false);\n+\n+  // When widget attributes changes, show loading view for 500ms\n+  // This is in order to force rerender WidgetAttributeInput component\n+  const debouncedUpdate = debounce(() => {\n+    setLoading(false);\n+  }, 500);\n+\n+  React.useEffect(() => {\n+    // after a setTimeout for 500ms, set the loading state back to false\n+    setLoading(true);\n+    setLocalWidgetToAttributes(widgetToAttributes);\n+    debouncedUpdate();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1e3516ca0270ae08e57e7eaac2f0e22a62ba9ca"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU2Mjc3MA==", "bodyText": "same comment here regarding the debounce", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r466562770", "createdAt": "2020-08-06T17:15:28Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/PluginJSONMenu/LiveView/index.tsx", "diffHunk": "@@ -66,6 +68,20 @@ const LiveViewView: React.FC<ILiveViewProps> = ({\n   JSONFilename,\n   collapseLiveView,\n }) => {\n+  const [loading, setLoading] = React.useState(false);\n+\n+  // When JSONOutput changes, show loading view for 500ms\n+  // This is in order to force rerender LiveConfigurationGroup component\n+  const debouncedUpdate = debounce(() => {\n+    setLoading(false);\n+  }, 500);\n+\n+  React.useEffect(() => {\n+    // after a setTimeout for 500ms, set the loading state back to false\n+    setLoading(true);\n+    debouncedUpdate();\n+  }, [JSONOutput]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1e3516ca0270ae08e57e7eaac2f0e22a62ba9ca"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25fa090680a447873ef784e4b75c0668a84650a8", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/25fa090680a447873ef784e4b75c0668a84650a8", "committedDate": "2020-08-06T19:21:50Z", "message": "[CDAP-17010] Expose widget attributes in each widget class (Plugin JSON Creator)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1fde79954d5ad6e66e69cc96191e33e19c5dd951", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/1fde79954d5ad6e66e69cc96191e33e19c5dd951", "committedDate": "2020-08-06T18:59:20Z", "message": "correct timeout"}, "afterCommit": {"oid": "25fa090680a447873ef784e4b75c0668a84650a8", "author": {"user": {"login": "jennac3", "name": "Jenna Choi"}}, "url": "https://github.com/cdapio/cdap/commit/25fa090680a447873ef784e4b75c0668a84650a8", "committedDate": "2020-08-06T19:21:50Z", "message": "[CDAP-17010] Expose widget attributes in each widget class (Plugin JSON Creator)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1880, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}