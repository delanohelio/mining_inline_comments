{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0OTE1Nzkz", "number": 12606, "title": "[CDAP-16930] handling missing artifacts in studio and detail view", "bodyText": "Cherry-pick of #12466\nJira: https://issues.cask.co/browse/CDAP-16930\nPlugin artifacts could be missing from the pipeline either in the studio or in the detail view and currently we do not communicate this to the user in any form.\nThis PR\n\nAdds an error badge to the node indicating there's something wrong with the node in studio.\nDisables the properties button with a tooltip in studio and detail view.\nIf users try to deploy the pipeline with missing artifact, they would see an error banner.\nFixes an issue where we incorrectly populate pluginsMap (Jira: https://issues.cask.co/browse/CDAP-17042)", "createdAt": "2020-08-08T00:51:24Z", "url": "https://github.com/cdapio/cdap/pull/12606", "merged": true, "mergeCommit": {"oid": "64c11ab7d12c29fdf7ee38a3fe7edf07a24995e4"}, "closed": true, "closedAt": "2020-09-09T18:23:25Z", "author": {"login": "itsanudeep"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdG7RqGAFqTQ4NDM2MjY0OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHQKevABqjM3NDcxNDkzNzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MzYyNjQ5", "url": "https://github.com/cdapio/cdap/pull/12606#pullrequestreview-484362649", "createdAt": "2020-09-08T17:44:29Z", "commit": {"oid": "80c93def68cfe48c1946bbfdd347de572f8880c8"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54510395a723472ff75138210a7986cd7f3ce161", "author": {"user": {"login": "itsanudeep", "name": "Anudeep Katragadda"}}, "url": "https://github.com/cdapio/cdap/commit/54510395a723472ff75138210a7986cd7f3ce161", "committedDate": "2020-09-08T17:48:41Z", "message": "handling missing artifacts in studio and detail view"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80c93def68cfe48c1946bbfdd347de572f8880c8", "author": {"user": {"login": "itsanudeep", "name": "Anudeep Katragadda"}}, "url": "https://github.com/cdapio/cdap/commit/80c93def68cfe48c1946bbfdd347de572f8880c8", "committedDate": "2020-08-08T00:49:47Z", "message": "handling missing artifacts in studio and detail view"}, "afterCommit": {"oid": "54510395a723472ff75138210a7986cd7f3ce161", "author": {"user": {"login": "itsanudeep", "name": "Anudeep Katragadda"}}, "url": "https://github.com/cdapio/cdap/commit/54510395a723472ff75138210a7986cd7f3ce161", "committedDate": "2020-09-08T17:48:41Z", "message": "handling missing artifacts in studio and detail view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9925aad8caa8949fb6e584234c80c62f51b84360", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/9925aad8caa8949fb6e584234c80c62f51b84360", "committedDate": "2020-09-08T17:49:37Z", "message": "[CDAP-17175] Fix artifact not found when there are multiple version of the same plugin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MjQyNjgw", "url": "https://github.com/cdapio/cdap/pull/12606#pullrequestreview-485242680", "createdAt": "2020-09-09T17:24:28Z", "commit": {"oid": "45158334e93dac2cb98104d0aedadf360ced9718"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNzoyNDoyOFrOHPSZYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNzoyNDoyOFrOHPSZYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTc5MjA5Ng==", "bodyText": "const?", "url": "https://github.com/cdapio/cdap/pull/12606#discussion_r485792096", "createdAt": "2020-09-09T17:24:28Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/directives/dag-plus/my-dag-ctrl.js", "diffHunk": "@@ -1685,6 +1686,10 @@ angular.module(PKG.name + '.commons')\n \n     let subAvailablePlugins = AvailablePluginsStore.subscribe(() => {\n       vm.pluginsMap = AvailablePluginsStore.getState().plugins.pluginsMap;\n+      $scope.nodes.forEach(node => {\n+        let key = generatePluginMapKey(node);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45158334e93dac2cb98104d0aedadf360ced9718"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MjQ5NDU5", "url": "https://github.com/cdapio/cdap/pull/12606#pullrequestreview-485249459", "createdAt": "2020-09-09T17:33:37Z", "commit": {"oid": "45158334e93dac2cb98104d0aedadf360ced9718"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNzozMzozOFrOHPSumw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNzozMzozOFrOHPSumw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTc5NzUzMQ==", "bodyText": "Nit: license year should be updated", "url": "https://github.com/cdapio/cdap/pull/12606#discussion_r485797531", "createdAt": "2020-09-09T17:33:38Z", "author": {"login": "yukiej"}, "path": "cdap-ui/cypress/integration/pipeline.plugin.missing.spec.ts", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright \u00a9 2018 Cask Data, Inc.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45158334e93dac2cb98104d0aedadf360ced9718"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MjQ5ODE4", "url": "https://github.com/cdapio/cdap/pull/12606#pullrequestreview-485249818", "createdAt": "2020-09-09T17:34:07Z", "commit": {"oid": "45158334e93dac2cb98104d0aedadf360ced9718"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae5454defb9798f7ad1b540544f96f4e397fbe0a", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/ae5454defb9798f7ad1b540544f96f4e397fbe0a", "committedDate": "2020-09-09T18:04:27Z", "message": "[CDAP-171175] Fix artifacts not available in pipeline detail view"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "45158334e93dac2cb98104d0aedadf360ced9718", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/45158334e93dac2cb98104d0aedadf360ced9718", "committedDate": "2020-09-08T18:10:13Z", "message": "[CDAP-171175] Fix artifacts not available in pipeline detail view"}, "afterCommit": {"oid": "ae5454defb9798f7ad1b540544f96f4e397fbe0a", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/ae5454defb9798f7ad1b540544f96f4e397fbe0a", "committedDate": "2020-09-09T18:04:27Z", "message": "[CDAP-171175] Fix artifacts not available in pipeline detail view"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1792, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}