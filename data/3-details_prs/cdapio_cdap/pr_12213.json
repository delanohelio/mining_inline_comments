{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MDc4MDI5", "number": 12213, "title": "CDAP-16709 implement manual broadcasts", "bodyText": "Honor the broadcast flag set in the JoinDefinition when joining\nmultiple DataFrames. Added a small tweak to the join logic to\njoin all non-broadcasted datasets first in order to ensure that\nboth sides of the join are not broadcast, and to reduce the amount\nof data that is being shuffled in non-broadcast intermediate joins.", "createdAt": "2020-05-27T19:45:25Z", "url": "https://github.com/cdapio/cdap/pull/12213", "merged": true, "mergeCommit": {"oid": "48077761c422c5c4666f4ed3994f01b5e920ee52"}, "closed": true, "closedAt": "2020-05-28T23:56:43Z", "author": {"login": "albertshau"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclghozgBqjMzODAyMjU4NDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcl2d_tgFqTQyMDU1OTE4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "54dfff994eee35fa0f383c6af576722c39533004", "author": {"user": {"login": "albertshau", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/54dfff994eee35fa0f383c6af576722c39533004", "committedDate": "2020-05-27T19:42:58Z", "message": "CDAP-16709 implement manual broadcasts\n\nHonor the broadcast flag set in the JoinDefinition when joining\nmultiple DataFrames. Added a small tweak to the join logic to\njoin all non-broadcasted datasets first in order to ensure that\nboth sides of the join are not broadcast, and to reduce the amount\nof data that is being shuffled in non-broadcast intermediate joins."}, "afterCommit": {"oid": "e5a66dcac27756b467066bde358e5f177c83e54d", "author": {"user": {"login": "albertshau", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/e5a66dcac27756b467066bde358e5f177c83e54d", "committedDate": "2020-05-27T21:54:44Z", "message": "CDAP-16709 implement manual broadcasts\n\nHonor the broadcast flag set in the JoinDefinition when joining\nmultiple DataFrames. Added a small tweak to the join logic to\njoin all non-broadcasted datasets first in order to ensure that\nboth sides of the join are not broadcast, and to reduce the amount\nof data that is being shuffled in non-broadcast intermediate joins."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNDA4MjUx", "url": "https://github.com/cdapio/cdap/pull/12213#pullrequestreview-420408251", "createdAt": "2020-05-28T19:07:52Z", "commit": {"oid": "e5a66dcac27756b467066bde358e5f177c83e54d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxOTowNzo1MlrOGcCxaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxOTowNzo1MlrOGcCxaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjA1ODcyOQ==", "bodyText": "Is there any constant class we can use for these config?", "url": "https://github.com/cdapio/cdap/pull/12213#discussion_r432058729", "createdAt": "2020-05-28T19:07:52Z", "author": {"login": "yaojiefeng"}, "path": "cdap-app-templates/cdap-etl/hydrator-spark-core-base/src/main/java/io/cdap/cdap/etl/spark/batch/ETLSpark.java", "diffHunk": "@@ -95,6 +95,9 @@ public void initialize() throws Exception {\n \n     SparkConf sparkConf = new SparkConf();\n     sparkConf.set(\"spark.speculation\", \"false\");\n+    // turn off auto-broadcast by default until we better understand the implications and can set this to a\n+    // value that we are confident is safe.\n+    sparkConf.set(\"spark.sql.autoBroadcastJoinThreshold\", \"-1\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5a66dcac27756b467066bde358e5f177c83e54d"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e5a66dcac27756b467066bde358e5f177c83e54d", "author": {"user": {"login": "albertshau", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/e5a66dcac27756b467066bde358e5f177c83e54d", "committedDate": "2020-05-27T21:54:44Z", "message": "CDAP-16709 implement manual broadcasts\n\nHonor the broadcast flag set in the JoinDefinition when joining\nmultiple DataFrames. Added a small tweak to the join logic to\njoin all non-broadcasted datasets first in order to ensure that\nboth sides of the join are not broadcast, and to reduce the amount\nof data that is being shuffled in non-broadcast intermediate joins."}, "afterCommit": {"oid": "9064e40622c16cdc4756a80516594a4a2e2a24ec", "author": {"user": {"login": "albertshau", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/9064e40622c16cdc4756a80516594a4a2e2a24ec", "committedDate": "2020-05-28T20:28:19Z", "message": "CDAP-16709 implement manual broadcasts\n\nHonor the broadcast flag set in the JoinDefinition when joining\nmultiple DataFrames. Added a small tweak to the join logic to\njoin all non-broadcasted datasets first in order to ensure that\nboth sides of the join are not broadcast, and to reduce the amount\nof data that is being shuffled in non-broadcast intermediate joins."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65d9edc9377053b63ffde8ea2cb52346d16e6d80", "author": {"user": {"login": "albertshau", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/65d9edc9377053b63ffde8ea2cb52346d16e6d80", "committedDate": "2020-05-28T21:17:00Z", "message": "CDAP-16709 implement manual broadcasts\n\nHonor the broadcast flag set in the JoinDefinition when joining\nmultiple DataFrames. Added a small tweak to the join logic to\njoin all non-broadcasted datasets first in order to ensure that\nboth sides of the join are not broadcast, and to reduce the amount\nof data that is being shuffled in non-broadcast intermediate joins."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9064e40622c16cdc4756a80516594a4a2e2a24ec", "author": {"user": {"login": "albertshau", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/9064e40622c16cdc4756a80516594a4a2e2a24ec", "committedDate": "2020-05-28T20:28:19Z", "message": "CDAP-16709 implement manual broadcasts\n\nHonor the broadcast flag set in the JoinDefinition when joining\nmultiple DataFrames. Added a small tweak to the join logic to\njoin all non-broadcasted datasets first in order to ensure that\nboth sides of the join are not broadcast, and to reduce the amount\nof data that is being shuffled in non-broadcast intermediate joins."}, "afterCommit": {"oid": "65d9edc9377053b63ffde8ea2cb52346d16e6d80", "author": {"user": {"login": "albertshau", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/65d9edc9377053b63ffde8ea2cb52346d16e6d80", "committedDate": "2020-05-28T21:17:00Z", "message": "CDAP-16709 implement manual broadcasts\n\nHonor the broadcast flag set in the JoinDefinition when joining\nmultiple DataFrames. Added a small tweak to the join logic to\njoin all non-broadcasted datasets first in order to ensure that\nboth sides of the join are not broadcast, and to reduce the amount\nof data that is being shuffled in non-broadcast intermediate joins."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNTU5MTg1", "url": "https://github.com/cdapio/cdap/pull/12213#pullrequestreview-420559185", "createdAt": "2020-05-28T23:28:55Z", "commit": {"oid": "65d9edc9377053b63ffde8ea2cb52346d16e6d80"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2083, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}