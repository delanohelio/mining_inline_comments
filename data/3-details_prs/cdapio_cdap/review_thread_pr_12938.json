{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNTAzNjUy", "number": 12938, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoxMzowNFrOFGdRlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwMDoxNDo0NVrOFG9kzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMzE1NDE1OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/Replicator/Create/Content/Assessment/TablesAssessment/Mappings/index.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoxMzowNFrOIHexoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoyNzo0N1rOIHfHnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxNTE2OA==", "bodyText": "TIL: you can use ? to specify optional field without a type!. Nice, but looks like incomplete ternary operator or null coalescing \ud83d\ude04", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r544715168", "createdAt": "2020-12-17T00:13:04Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/Replicator/Create/Content/Assessment/TablesAssessment/Mappings/index.tsx", "diffHunk": "@@ -173,7 +176,7 @@ const MappingsView: React.FC<IMappingsProps> = ({\n   const [loading, setLoading] = React.useState(true);\n   const [rerunAssessment, setRerunAssessment] = React.useState(false);\n \n-  function assessTable() {\n+  function assessTable(updatedColumns?) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4319478719d24194e4ca9b695f886df3c4d4dd0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcyMDc5Nw==", "bodyText": "with the new null coalescing, the code make it seemed like the programmer is unsure about everything with question marks everywhere \ud83d\ude02", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r544720797", "createdAt": "2020-12-17T00:27:47Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/Replicator/Create/Content/Assessment/TablesAssessment/Mappings/index.tsx", "diffHunk": "@@ -173,7 +176,7 @@ const MappingsView: React.FC<IMappingsProps> = ({\n   const [loading, setLoading] = React.useState(true);\n   const [rerunAssessment, setRerunAssessment] = React.useState(false);\n \n-  function assessTable() {\n+  function assessTable(updatedColumns?) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxNTE2OA=="}, "originalCommit": {"oid": "b4319478719d24194e4ca9b695f886df3c4d4dd0"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMzE3Mzc5OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/Replicator/Detail/Monitoring/TableScatterPlotGraph/scatterPlot.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoyMDoxN1rOIHe8PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoyNjowNFrOIHfE0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxNzg4NQ==", "bodyText": "We can import the colors from colors.ts?", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r544717885", "createdAt": "2020-12-17T00:20:17Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/Replicator/Detail/Monitoring/TableScatterPlotGraph/scatterPlot.ts", "diffHunk": "@@ -24,6 +24,8 @@ export const COLOR_MAP = {\n   activeOutline: '#9FC0FB',\n   inactive: '#999999',\n   inactiveOutline: '#686868',\n+  error: '#D40001',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4319478719d24194e4ca9b695f886df3c4d4dd0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcyMDA4MQ==", "bodyText": "These are custom colors for the graphs. Once we settled on these colors variance for graphs, I will move them into colors.ts and have graph specific colors there", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r544720081", "createdAt": "2020-12-17T00:26:04Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/Replicator/Detail/Monitoring/TableScatterPlotGraph/scatterPlot.ts", "diffHunk": "@@ -24,6 +24,8 @@ export const COLOR_MAP = {\n   activeOutline: '#9FC0FB',\n   inactive: '#999999',\n   inactiveOutline: '#686868',\n+  error: '#D40001',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxNzg4NQ=="}, "originalCommit": {"oid": "b4319478719d24194e4ca9b695f886df3c4d4dd0"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyODQ0NTQ5OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/Replicator/Detail/Monitoring/Metrics/index.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwMDoxNDoyN1rOIIOB_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwMDoxNDoyN1rOIIOB_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQ4OTQwNg==", "bodyText": "Seems like there is a similar function added to the replication utility. May be merge them?", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r545489406", "createdAt": "2020-12-18T00:14:27Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/Replicator/Detail/Monitoring/Metrics/index.tsx", "diffHunk": "@@ -102,31 +124,65 @@ const MetricsView: React.FC<WithStyles<typeof styles>> = ({ classes }) => {\n     );\n   }, [timeRange, tables]);\n \n+  const parsedLatency = parseLatencySeconds(data.latency);\n+\n   return (\n     <div className={classes.root}>\n       <div className={`${classes.grid} ${classes.header}`}>\n         <div>Data replicated</div>\n-        <div>Throughput events per min</div>\n+        <div>Throughput</div>\n         <div>Avg latency</div>\n-        <div>Pipeline errors</div>\n+        <div>Errors</div>\n         <div>Total events</div>\n         <div>Inserts</div>\n         <div>Updates</div>\n         <div>Deletes</div>\n       </div>\n       <div className={`${classes.grid} ${classes.metricContent}`}>\n         <div>{data.dataReplicated}</div>\n-        <div>{data.eventsPerMin}</div>\n-        <div>{data.latency}</div>\n+        <div>{truncateNumber(data.eventsPerMin, PRECISION)}</div>\n+        <div>\n+          <span>{parsedLatency.minutes}</span>\n+          <span className={`${classes.latencyLabel} ${classes.marginRight}`}>min</span>\n+          <span>{parsedLatency.seconds}</span>\n+          <span className={classes.latencyLabel}>sec</span>\n+        </div>\n         <div className={classes.error}>{data.errors}</div>\n-        <div>{data.totalEvents}</div>\n-        <div>{data.inserts}</div>\n-        <div>{data.updates}</div>\n-        <div>{data.deletes}</div>\n+        <div>{formatNumberDisplay(data.totalEvents)}</div>\n+        <div>{formatNumberDisplay(data.inserts)}</div>\n+        <div>{formatNumberDisplay(data.updates)}</div>\n+        <div>{formatNumberDisplay(data.deletes)}</div>\n+      </div>\n+      <div className={`${classes.grid} ${classes.unit}`}>\n+        <div />\n+        <div>events/min</div>\n+        <div />\n+        <div />\n+        <div />\n+        <div />\n+        <div />\n+        <div />\n       </div>\n     </div>\n   );\n };\n \n+function parseLatencySeconds(latency) {\n+  const minutes = Math.floor(latency / ONE_MIN_SECONDS);\n+  const seconds = latency % ONE_MIN_SECONDS;\n+\n+  return {\n+    minutes,\n+    seconds,\n+  };\n+}\n+\n+function formatNumberDisplay(num) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0444e4d1fc4917fc32a41753e9ae7d9e15dd68df"}, "originalPosition": 120}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyODQ0NjIxOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/Replicator/Detail/TopPanel/ActionButtons/Configure/ConfigureModeless.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwMDoxNDo0NVrOIIOCaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwMDoxNDo0NVrOIIOCaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQ4OTUxMg==", "bodyText": "nit: remove?", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r545489512", "createdAt": "2020-12-18T00:14:45Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/Replicator/Detail/TopPanel/ActionButtons/Configure/ConfigureModeless.tsx", "diffHunk": "@@ -47,10 +49,21 @@ const styles = (theme): StyleRules => {\n       alignItems: 'center',\n       paddingLeft: '15px',\n     },\n-    content: {\n-      height: '400px',\n+    taskMemory: {\n+      width: '200px',\n+      margin: '15px 0 25px',\n+    },\n+    body: {\n       padding: '10px 15px',\n     },\n+    content: {\n+      height: '300px',\n+      // padding: '10px 15px',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0444e4d1fc4917fc32a41753e9ae7d9e15dd68df"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2577, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}