{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4MDUxOTY2", "number": 12113, "title": "[CDAP-16621] Remove export modal when exporting pipeline JSON", "bodyText": "JIRA: https://issues.cask.co/browse/CDAP-16621\nBuild: https://builds.cask.co/browse/CDAP-UDUT590\nRemoves export modal from listview (draft and deployed pipelines), pipeline details page, and Studio.\nWe currently need to show the pipeline JSON for some of the pipeline integration tests, so I've added a token that's set when we're running the integration tests (for pipeline studio and also the widgets). Also modified the cypress helper function that clicks and drags to select nodes to make it less flaky.", "createdAt": "2020-04-23T17:02:20Z", "url": "https://github.com/cdapio/cdap/pull/12113", "merged": true, "mergeCommit": {"oid": "bf3da94bc4e4f17168960647bc0db03f16bb17db"}, "closed": true, "closedAt": "2020-05-18T18:10:45Z", "author": {"login": "yukiej"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcagYqmgBqjMyNjYwNzQ2ODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcijutMABqjMzNDg0NzUyOTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af91a5b8415432626d4dd01fd3b76945b2bd6f15", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/af91a5b8415432626d4dd01fd3b76945b2bd6f15", "committedDate": "2020-04-23T17:01:34Z", "message": "WIP: Adding state to actions popover to allow closing\n\nUndo changes to pipeline export modal service"}, "afterCommit": {"oid": "cee0ee57cee9f73e78371894b75642c049d5686e", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/cee0ee57cee9f73e78371894b75642c049d5686e", "committedDate": "2020-04-23T17:31:12Z", "message": "Add state to actions popover to allow closing popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cee0ee57cee9f73e78371894b75642c049d5686e", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/cee0ee57cee9f73e78371894b75642c049d5686e", "committedDate": "2020-04-23T17:31:12Z", "message": "Add state to actions popover to allow closing popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component"}, "afterCommit": {"oid": "9ba0efeeb65651535f35cc7a2589eca04b08bb76", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/9ba0efeeb65651535f35cc7a2589eca04b08bb76", "committedDate": "2020-04-23T17:59:32Z", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ba0efeeb65651535f35cc7a2589eca04b08bb76", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/9ba0efeeb65651535f35cc7a2589eca04b08bb76", "committedDate": "2020-04-23T17:59:32Z", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}, "afterCommit": {"oid": "660e37b4911b2fdba7f44b692f2d2713de3ba0e6", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/660e37b4911b2fdba7f44b692f2d2713de3ba0e6", "committedDate": "2020-04-23T18:12:35Z", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "660e37b4911b2fdba7f44b692f2d2713de3ba0e6", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/660e37b4911b2fdba7f44b692f2d2713de3ba0e6", "committedDate": "2020-04-23T18:12:35Z", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}, "afterCommit": {"oid": "af48ba244105946bc0621e127248794d5805b4be", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/af48ba244105946bc0621e127248794d5805b4be", "committedDate": "2020-04-23T19:41:01Z", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af48ba244105946bc0621e127248794d5805b4be", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/af48ba244105946bc0621e127248794d5805b4be", "committedDate": "2020-04-23T19:41:01Z", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}, "afterCommit": {"oid": "9d26fe66d86a5cb769ee932d186d6f5640fa9ae9", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/9d26fe66d86a5cb769ee932d186d6f5640fa9ae9", "committedDate": "2020-04-23T19:57:07Z", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c46328d497574171a2c49e942e9354d7053f273", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/7c46328d497574171a2c49e942e9354d7053f273", "committedDate": "2020-04-23T20:23:50Z", "message": "Fix widget e2e tests to see pipeline export modal"}, "afterCommit": {"oid": "6d94b9a4abeaf5e8483372b95db631f0ecf46b7f", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/6d94b9a4abeaf5e8483372b95db631f0ecf46b7f", "committedDate": "2020-04-23T21:16:36Z", "message": "Fix widget e2e tests to see pipeline export modal"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d94b9a4abeaf5e8483372b95db631f0ecf46b7f", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/6d94b9a4abeaf5e8483372b95db631f0ecf46b7f", "committedDate": "2020-04-23T21:16:36Z", "message": "Fix widget e2e tests to see pipeline export modal"}, "afterCommit": {"oid": "69d7f4a8234978c239203b37f5a00438c4459c6d", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/69d7f4a8234978c239203b37f5a00438c4459c6d", "committedDate": "2020-04-23T21:35:44Z", "message": "Fix widget e2e tests to see pipeline export modal"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MTUwMzYy", "url": "https://github.com/cdapio/cdap/pull/12113#pullrequestreview-404150362", "createdAt": "2020-05-01T13:09:36Z", "commit": {"oid": "69d7f4a8234978c239203b37f5a00438c4459c6d"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxMzowOTozNlrOGPJRfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxMzoxNjo1NFrOGPJbEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUzMzc1Ng==", "bodyText": "This could be Window.Cypress check. That would help us confirm if we are running tests.", "url": "https://github.com/cdapio/cdap/pull/12113#discussion_r418533756", "createdAt": "2020-05-01T13:09:36Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PipelineDetails/PipelineDetailsTopPanel/PipelineDetailsDetailsActions/PipelineDetailsActionsButton/index.js", "diffHunk": "@@ -129,6 +130,18 @@ export default class PipelineDetailsActionsButton extends Component {\n     );\n   };\n \n+  handlePipelineExport = () => {\n+    if (window.sessionStorage.getItem('pipelineConfigTesting')) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69d7f4a8234978c239203b37f5a00438c4459c6d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUzNjIwOA==", "bodyText": "Can we make this generic like\ndownloadFile({fileContents, filename, onDownload }) {\n  ...\n}\n\nThis way it can be reused anywhere in UI", "url": "https://github.com/cdapio/cdap/pull/12113#discussion_r418536208", "createdAt": "2020-05-01T13:16:54Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/services/download-pipeline.js", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+ function DownloadPipeline(pipelineConfig, postExportCb) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69d7f4a8234978c239203b37f5a00438c4459c6d"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69d7f4a8234978c239203b37f5a00438c4459c6d", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/69d7f4a8234978c239203b37f5a00438c4459c6d", "committedDate": "2020-04-23T21:35:44Z", "message": "Fix widget e2e tests to see pipeline export modal"}, "afterCommit": {"oid": "6cb3efde6b5f7db024b6366a07d324a396739fa1", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/6cb3efde6b5f7db024b6366a07d324a396739fa1", "committedDate": "2020-05-04T19:07:35Z", "message": "Change to more generic download-file for reusability"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6cb3efde6b5f7db024b6366a07d324a396739fa1", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/6cb3efde6b5f7db024b6366a07d324a396739fa1", "committedDate": "2020-05-04T19:07:35Z", "message": "Change to more generic download-file for reusability"}, "afterCommit": {"oid": "ba58c54184e47214d2431b4e925da7b91a7af008", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/ba58c54184e47214d2431b4e925da7b91a7af008", "committedDate": "2020-05-14T00:51:10Z", "message": "Update check for when to show modal"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba58c54184e47214d2431b4e925da7b91a7af008", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/ba58c54184e47214d2431b4e925da7b91a7af008", "committedDate": "2020-05-14T00:51:10Z", "message": "Update check for when to show modal"}, "afterCommit": {"oid": "2fc8c1f36233250e9a10ccef4074938632546ac3", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/2fc8c1f36233250e9a10ccef4074938632546ac3", "committedDate": "2020-05-15T22:12:53Z", "message": "Only so export pipeline JSON modal when running Cypress tests\n\nModify test to get modal when running integration test\n\nShow export modal for canvas actions test\n\nShow export modal for pipeline test\n\nAdd alignment step when selecting multiple nodes with mousedown (plus automated linting changes)\n\nFactor out helper pipeline download function\n\nUpdate export in actions menu to directly download from deployed and draft list views\n\nAdd state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd6068213d7e1a7c31fc7437f4438ed825b1f170", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/fd6068213d7e1a7c31fc7437f4438ed825b1f170", "committedDate": "2020-05-18T17:56:53Z", "message": "Only so export pipeline JSON modal when running Cypress tests\n\nModify test to get modal when running integration test\n\nShow export modal for canvas actions test\n\nShow export modal for pipeline test\n\nAdd alignment step when selecting multiple nodes with mousedown (plus automated linting changes)\n\nFactor out helper pipeline download function\n\nUpdate export in actions menu to directly download from deployed and draft list views\n\nAdd state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2fc8c1f36233250e9a10ccef4074938632546ac3", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/2fc8c1f36233250e9a10ccef4074938632546ac3", "committedDate": "2020-05-15T22:12:53Z", "message": "Only so export pipeline JSON modal when running Cypress tests\n\nModify test to get modal when running integration test\n\nShow export modal for canvas actions test\n\nShow export modal for pipeline test\n\nAdd alignment step when selecting multiple nodes with mousedown (plus automated linting changes)\n\nFactor out helper pipeline download function\n\nUpdate export in actions menu to directly download from deployed and draft list views\n\nAdd state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}, "afterCommit": {"oid": "fd6068213d7e1a7c31fc7437f4438ed825b1f170", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/fd6068213d7e1a7c31fc7437f4438ed825b1f170", "committedDate": "2020-05-18T17:56:53Z", "message": "Only so export pipeline JSON modal when running Cypress tests\n\nModify test to get modal when running integration test\n\nShow export modal for canvas actions test\n\nShow export modal for pipeline test\n\nAdd alignment step when selecting multiple nodes with mousedown (plus automated linting changes)\n\nFactor out helper pipeline download function\n\nUpdate export in actions menu to directly download from deployed and draft list views\n\nAdd state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2183, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}