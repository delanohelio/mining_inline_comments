{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNzUxMDUw", "number": 12317, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNjo1NjoyMVrOEFnoEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNjo1NzoxOVrOEGBxfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MzI3NTcxOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/PreviewData/index.tsx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNjo1NjoyMVrOGj6vFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDo1MzoyM1rOGkfRhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMxNTY2OA==", "bodyText": "If the utility function is generic enough we need to pull it out. Its hard to track this change tomorrow if something changes in replicator.", "url": "https://github.com/cdapio/cdap/pull/12317#discussion_r440315668", "createdAt": "2020-06-15T16:56:21Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PreviewData/index.tsx", "diffHunk": "@@ -25,6 +25,11 @@ import { messageTextStyle } from 'components/PreviewData/Table';\n import PreviewTableContainer from 'components/PreviewData/TableContainer';\n import withStyles, { WithStyles } from '@material-ui/core/styles/withStyles';\n import ThemeWrapper from 'components/ThemeWrapper';\n+import T from 'i18n-react';\n+import { extractErrorMessage } from 'components/Replicator/utilities';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ac6fb7761542e2ff881c3bc78fdc03f9f3cec72"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyNzYwMQ==", "bodyText": "That's reasonable. Where would you suggest putting the utility function?", "url": "https://github.com/cdapio/cdap/pull/12317#discussion_r440527601", "createdAt": "2020-06-16T01:01:33Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/PreviewData/index.tsx", "diffHunk": "@@ -25,6 +25,11 @@ import { messageTextStyle } from 'components/PreviewData/Table';\n import PreviewTableContainer from 'components/PreviewData/TableContainer';\n import withStyles, { WithStyles } from '@material-ui/core/styles/withStyles';\n import ThemeWrapper from 'components/ThemeWrapper';\n+import T from 'i18n-react';\n+import { extractErrorMessage } from 'components/Replicator/utilities';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMxNTY2OA=="}, "originalCommit": {"oid": "0ac6fb7761542e2ff881c3bc78fdc03f9f3cec72"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkxNDMwOA==", "bodyText": "Moved to services/helpers, as per our conversation", "url": "https://github.com/cdapio/cdap/pull/12317#discussion_r440914308", "createdAt": "2020-06-16T14:53:23Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/PreviewData/index.tsx", "diffHunk": "@@ -25,6 +25,11 @@ import { messageTextStyle } from 'components/PreviewData/Table';\n import PreviewTableContainer from 'components/PreviewData/TableContainer';\n import withStyles, { WithStyles } from '@material-ui/core/styles/withStyles';\n import ThemeWrapper from 'components/ThemeWrapper';\n+import T from 'i18n-react';\n+import { extractErrorMessage } from 'components/Replicator/utilities';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMxNTY2OA=="}, "originalCommit": {"oid": "0ac6fb7761542e2ff881c3bc78fdc03f9f3cec72"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MzI4NTkxOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/PreviewData/index.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNjo1OToxM1rOGj61uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNjo1OToxM1rOGj61uA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMxNzM2OA==", "bodyText": "Since we are not sure where the error message will reside (error.response or errror.response.message) can we check if its an object and avoid rendering object in the DOM? It will break the entire app.", "url": "https://github.com/cdapio/cdap/pull/12317#discussion_r440317368", "createdAt": "2020-06-15T16:59:13Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PreviewData/index.tsx", "diffHunk": "@@ -97,26 +105,42 @@ const PreviewDataViewBase: React.FC<IPreviewDataViewProps> = ({\n   const tableData: ITableData = getTableData();\n \n   const loadingMsg = (cls) => (\n-    <div className={classes.headingContainer}>\n-      <Heading type={HeadingTypes.h3} label={'Fetching preview data'} className={cls.messageText} />\n+    <div className={cls.headingContainer}>\n+      <Heading\n+        type={HeadingTypes.h3}\n+        label={T.translate(`${I18N_PREFIX}.loading`)}\n+        className={cls.messageText}\n+      />\n       <LoadingSVGCentered />\n     </div>\n   );\n \n   const noPreviewDataMsg = (cls) => (\n-    <div className={classes.headingContainer}>\n+    <div className={cls.headingContainer}>\n+      <Heading\n+        type={HeadingTypes.h3}\n+        label={T.translate(`${I18N_PREFIX}.runPreview`)}\n+        className={cls.messageText}\n+      />\n+    </div>\n+  );\n+\n+  const errorMsg = (cls) => (\n+    <div className={classnames('text-danger', cls.headingContainer)}>\n       <Heading\n         type={HeadingTypes.h3}\n-        label={'Run preview to generate preview data.'}\n+        label={T.translate(`${I18N_PREFIX}.errorHeader`)}\n         className={cls.messageText}\n       />\n+      <span>{error}</span>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ac6fb7761542e2ff881c3bc78fdc03f9f3cec72"}, "originalPosition": 92}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NDUzMjUxOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/text/text-en.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMDoyMDoxM1rOGkG-eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwMTowMjo0NFrOGkHsJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUxNjIxNw==", "bodyText": "nit: sort", "url": "https://github.com/cdapio/cdap/pull/12317#discussion_r440516217", "createdAt": "2020-06-16T00:20:13Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/text/text-en.yaml", "diffHunk": "@@ -2410,7 +2410,10 @@ features:\n       viewNamespace: View pipelines in namespace\n     viewPipeline: View Pipeline\n   PreviewData:\n-    Table:\n+    loading: Fetching preview data\n+    errorHeader: Error fetching preview data. Please try re-running preview. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ac6fb7761542e2ff881c3bc78fdc03f9f3cec72"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyNzkxMQ==", "bodyText": "sorted!", "url": "https://github.com/cdapio/cdap/pull/12317#discussion_r440527911", "createdAt": "2020-06-16T01:02:44Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/text/text-en.yaml", "diffHunk": "@@ -2410,7 +2410,10 @@ features:\n       viewNamespace: View pipelines in namespace\n     viewPipeline: View Pipeline\n   PreviewData:\n-    Table:\n+    loading: Fetching preview data\n+    errorHeader: Error fetching preview data. Please try re-running preview. ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUxNjIxNw=="}, "originalCommit": {"oid": "0ac6fb7761542e2ff881c3bc78fdc03f9f3cec72"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NzU1OTY2OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/PreviewData/index.tsx", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNjo1NzoxOVrOGkksPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMDozMzoyMFrOGksIPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAwMzA2OQ==", "bodyText": "Can this use the extract error message?", "url": "https://github.com/cdapio/cdap/pull/12317#discussion_r441003069", "createdAt": "2020-06-16T16:57:19Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PreviewData/index.tsx", "diffHunk": "@@ -97,26 +105,42 @@ const PreviewDataViewBase: React.FC<IPreviewDataViewProps> = ({\n   const tableData: ITableData = getTableData();\n \n   const loadingMsg = (cls) => (\n-    <div className={classes.headingContainer}>\n-      <Heading type={HeadingTypes.h3} label={'Fetching preview data'} className={cls.messageText} />\n+    <div className={cls.headingContainer}>\n+      <Heading\n+        type={HeadingTypes.h3}\n+        label={T.translate(`${I18N_PREFIX}.loading`)}\n+        className={cls.messageText}\n+      />\n       <LoadingSVGCentered />\n     </div>\n   );\n \n   const noPreviewDataMsg = (cls) => (\n-    <div className={classes.headingContainer}>\n+    <div className={cls.headingContainer}>\n+      <Heading\n+        type={HeadingTypes.h3}\n+        label={T.translate(`${I18N_PREFIX}.runPreview`)}\n+        className={cls.messageText}\n+      />\n+    </div>\n+  );\n+\n+  const errorMsg = (cls) => (\n+    <div className={classnames('text-danger', cls.headingContainer)}>\n       <Heading\n         type={HeadingTypes.h3}\n-        label={'Run preview to generate preview data.'}\n+        label={T.translate(`${I18N_PREFIX}.errorHeader`)}\n         className={cls.messageText}\n       />\n+      <span>{typeof error === 'string' ? error : JSON.stringify(error)}</span>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5ae3a6dec69afdfff87d07dc383af81b9b36de6"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEyNDkyNw==", "bodyText": "Resolved offline.", "url": "https://github.com/cdapio/cdap/pull/12317#discussion_r441124927", "createdAt": "2020-06-16T20:33:20Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/PreviewData/index.tsx", "diffHunk": "@@ -97,26 +105,42 @@ const PreviewDataViewBase: React.FC<IPreviewDataViewProps> = ({\n   const tableData: ITableData = getTableData();\n \n   const loadingMsg = (cls) => (\n-    <div className={classes.headingContainer}>\n-      <Heading type={HeadingTypes.h3} label={'Fetching preview data'} className={cls.messageText} />\n+    <div className={cls.headingContainer}>\n+      <Heading\n+        type={HeadingTypes.h3}\n+        label={T.translate(`${I18N_PREFIX}.loading`)}\n+        className={cls.messageText}\n+      />\n       <LoadingSVGCentered />\n     </div>\n   );\n \n   const noPreviewDataMsg = (cls) => (\n-    <div className={classes.headingContainer}>\n+    <div className={cls.headingContainer}>\n+      <Heading\n+        type={HeadingTypes.h3}\n+        label={T.translate(`${I18N_PREFIX}.runPreview`)}\n+        className={cls.messageText}\n+      />\n+    </div>\n+  );\n+\n+  const errorMsg = (cls) => (\n+    <div className={classnames('text-danger', cls.headingContainer)}>\n       <Heading\n         type={HeadingTypes.h3}\n-        label={'Run preview to generate preview data.'}\n+        label={T.translate(`${I18N_PREFIX}.errorHeader`)}\n         className={cls.messageText}\n       />\n+      <span>{typeof error === 'string' ? error : JSON.stringify(error)}</span>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAwMzA2OQ=="}, "originalCommit": {"oid": "d5ae3a6dec69afdfff87d07dc383af81b9b36de6"}, "originalPosition": 92}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3394, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}