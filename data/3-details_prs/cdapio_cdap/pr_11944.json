{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1OTcwMjc3", "number": 11944, "title": "(CDAP-16243) Upgrade mechanism for System Apps managed by SystemAppManagementService", "bodyText": "Changes includes:\nStart SystemAppManagementService only after BootStrap steps are run due to dependency on metadata and load system artifacts steps.\nForce restart programs running for a system app when ENABLE_ step is run for it to make sure programs are running with latest system artifacts and arguments. This is safe to do as system apps are stateless and we already restart them while upgrading an instance of CDAP.\nTESTS: Tested using unit tests.\nBUILD: https://builds.cask.co/browse/CDAP-DUT7141-2\nRetrying again, previous revert #11942", "createdAt": "2020-03-10T07:07:49Z", "url": "https://github.com/cdapio/cdap/pull/11944", "merged": true, "mergeCommit": {"oid": "43072acad5a73ecc35f223f19d318881f414dcc4"}, "closed": true, "closedAt": "2020-03-11T00:00:53Z", "author": {"login": "pandyajay10"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMNC7KAH2gAyMzg1OTcwMjc3OjY4MDE5Yjg0NGYwNzQwMzA4YTg2MzdjNzI1ZTNiMTNkYThhNzk4MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMZfgmgH2gAyMzg1OTcwMjc3OmU5ZjVmOTczZGFlZjdiZmI4ZGIyNDBmNDUxOTliYWU0YTg5NmZmMzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "68019b844f0740308a8637c725e3b13da8a79816", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/68019b844f0740308a8637c725e3b13da8a79816", "committedDate": "2020-03-10T07:05:08Z", "message": "Support for system app upgrade"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a9042f46d523b05a755680900a8d6c56c722f86", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/8a9042f46d523b05a755680900a8d6c56c722f86", "committedDate": "2020-03-10T07:10:46Z", "message": "Fixing test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1711f400c0ee6ea7da7a9e8da1324e79603563a1", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/1711f400c0ee6ea7da7a9e8da1324e79603563a1", "committedDate": "2020-03-10T19:25:56Z", "message": "Add depedency of system app management service on bootstrap service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de151370638c769fa7087ac4827ba4112d028a93", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/de151370638c769fa7087ac4827ba4112d028a93", "committedDate": "2020-03-10T20:09:15Z", "message": "Checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f84ebe41952ab53e1ffa4dfd0c90b8f30c032edd", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/f84ebe41952ab53e1ffa4dfd0c90b8f30c032edd", "committedDate": "2020-03-10T20:13:21Z", "message": "Spell check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMzE5NjA5", "url": "https://github.com/cdapio/cdap/pull/11944#pullrequestreview-372319609", "createdAt": "2020-03-10T21:02:14Z", "commit": {"oid": "f84ebe41952ab53e1ffa4dfd0c90b8f30c032edd"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMTowMjoxNVrOF0g6pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMTowMjoxNVrOF0g6pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDYwOTU3Mg==", "bodyText": "private final", "url": "https://github.com/cdapio/cdap/pull/11944#discussion_r390609572", "createdAt": "2020-03-10T21:02:15Z", "author": {"login": "albertshau"}, "path": "cdap-app-fabric/src/main/java/io/cdap/cdap/internal/bootstrap/BootstrapService.java", "diffHunk": "@@ -51,16 +52,19 @@\n   private static final Logger SAMPLING_LOG = Loggers.sampling(LOG, LogSamplers.onceEvery(50));\n   private final BootstrapConfigProvider bootstrapConfigProvider;\n   private final BootstrapStore bootstrapStore;\n+  private SystemAppManagementService systemAppManagementService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f84ebe41952ab53e1ffa4dfd0c90b8f30c032edd"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9f5f973daef7bfb8db240f45199bae4a896ff32", "author": {"user": null}, "url": "https://github.com/cdapio/cdap/commit/e9f5f973daef7bfb8db240f45199bae4a896ff32", "committedDate": "2020-03-10T21:35:13Z", "message": "Final keyword"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2227, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}