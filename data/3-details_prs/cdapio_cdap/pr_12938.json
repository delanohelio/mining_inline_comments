{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNTAzNjUy", "number": 12938, "title": "[CDAP-17470] Replication address UX review", "bodyText": "JIRAs:\nhttps://cdap.atlassian.net/browse/CDAP-17432\nhttps://cdap.atlassian.net/browse/CDAP-17328\nhttps://cdap.atlassian.net/browse/CDAP-17470\nhttps://cdap.atlassian.net/browse/CDAP-17382\nhttps://cdap.atlassian.net/browse/CDAP-16814\nBuild: https://builds.cask.co/browse/CDAP-UDUT919", "createdAt": "2020-12-16T23:38:29Z", "url": "https://github.com/cdapio/cdap/pull/12938", "merged": true, "mergeCommit": {"oid": "a5de08235aa7ba05f80cbafd77f19f7449f00242"}, "closed": true, "closedAt": "2020-12-18T02:42:16Z", "author": {"login": "elfenheart"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdm4HNdgFqTU1NDE4NDU3Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnO3P_AFqTU1NTEzNTE0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MTg0NTc2", "url": "https://github.com/cdapio/cdap/pull/12938#pullrequestreview-554184576", "createdAt": "2020-12-17T00:08:55Z", "commit": {"oid": "b4319478719d24194e4ca9b695f886df3c4d4dd0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MTg2MTg1", "url": "https://github.com/cdapio/cdap/pull/12938#pullrequestreview-554186185", "createdAt": "2020-12-17T00:13:03Z", "commit": {"oid": "b4319478719d24194e4ca9b695f886df3c4d4dd0"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoxMzowNFrOIHexoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwMDoyMDoxN1rOIHe8PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxNTE2OA==", "bodyText": "TIL: you can use ? to specify optional field without a type!. Nice, but looks like incomplete ternary operator or null coalescing \ud83d\ude04", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r544715168", "createdAt": "2020-12-17T00:13:04Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/Replicator/Create/Content/Assessment/TablesAssessment/Mappings/index.tsx", "diffHunk": "@@ -173,7 +176,7 @@ const MappingsView: React.FC<IMappingsProps> = ({\n   const [loading, setLoading] = React.useState(true);\n   const [rerunAssessment, setRerunAssessment] = React.useState(false);\n \n-  function assessTable() {\n+  function assessTable(updatedColumns?) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4319478719d24194e4ca9b695f886df3c4d4dd0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxNzg4NQ==", "bodyText": "We can import the colors from colors.ts?", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r544717885", "createdAt": "2020-12-17T00:20:17Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/Replicator/Detail/Monitoring/TableScatterPlotGraph/scatterPlot.ts", "diffHunk": "@@ -24,6 +24,8 @@ export const COLOR_MAP = {\n   activeOutline: '#9FC0FB',\n   inactive: '#999999',\n   inactiveOutline: '#686868',\n+  error: '#D40001',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4319478719d24194e4ca9b695f886df3c4d4dd0"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b4319478719d24194e4ca9b695f886df3c4d4dd0", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/b4319478719d24194e4ca9b695f886df3c4d4dd0", "committedDate": "2020-12-16T23:33:53Z", "message": "[CDAP-17470] Replication address UX review"}, "afterCommit": {"oid": "5221d138aed1f6abdd7aec11e63a49d88ce5a2d5", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/5221d138aed1f6abdd7aec11e63a49d88ce5a2d5", "committedDate": "2020-12-17T06:34:07Z", "message": "[CDAP-17470] Replication address UX review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MDg3MjQz", "url": "https://github.com/cdapio/cdap/pull/12938#pullrequestreview-555087243", "createdAt": "2020-12-18T00:14:26Z", "commit": {"oid": "0444e4d1fc4917fc32a41753e9ae7d9e15dd68df"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwMDoxNDoyN1rOIIOB_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwMDoxNDo0NVrOIIOCaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQ4OTQwNg==", "bodyText": "Seems like there is a similar function added to the replication utility. May be merge them?", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r545489406", "createdAt": "2020-12-18T00:14:27Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/Replicator/Detail/Monitoring/Metrics/index.tsx", "diffHunk": "@@ -102,31 +124,65 @@ const MetricsView: React.FC<WithStyles<typeof styles>> = ({ classes }) => {\n     );\n   }, [timeRange, tables]);\n \n+  const parsedLatency = parseLatencySeconds(data.latency);\n+\n   return (\n     <div className={classes.root}>\n       <div className={`${classes.grid} ${classes.header}`}>\n         <div>Data replicated</div>\n-        <div>Throughput events per min</div>\n+        <div>Throughput</div>\n         <div>Avg latency</div>\n-        <div>Pipeline errors</div>\n+        <div>Errors</div>\n         <div>Total events</div>\n         <div>Inserts</div>\n         <div>Updates</div>\n         <div>Deletes</div>\n       </div>\n       <div className={`${classes.grid} ${classes.metricContent}`}>\n         <div>{data.dataReplicated}</div>\n-        <div>{data.eventsPerMin}</div>\n-        <div>{data.latency}</div>\n+        <div>{truncateNumber(data.eventsPerMin, PRECISION)}</div>\n+        <div>\n+          <span>{parsedLatency.minutes}</span>\n+          <span className={`${classes.latencyLabel} ${classes.marginRight}`}>min</span>\n+          <span>{parsedLatency.seconds}</span>\n+          <span className={classes.latencyLabel}>sec</span>\n+        </div>\n         <div className={classes.error}>{data.errors}</div>\n-        <div>{data.totalEvents}</div>\n-        <div>{data.inserts}</div>\n-        <div>{data.updates}</div>\n-        <div>{data.deletes}</div>\n+        <div>{formatNumberDisplay(data.totalEvents)}</div>\n+        <div>{formatNumberDisplay(data.inserts)}</div>\n+        <div>{formatNumberDisplay(data.updates)}</div>\n+        <div>{formatNumberDisplay(data.deletes)}</div>\n+      </div>\n+      <div className={`${classes.grid} ${classes.unit}`}>\n+        <div />\n+        <div>events/min</div>\n+        <div />\n+        <div />\n+        <div />\n+        <div />\n+        <div />\n+        <div />\n       </div>\n     </div>\n   );\n };\n \n+function parseLatencySeconds(latency) {\n+  const minutes = Math.floor(latency / ONE_MIN_SECONDS);\n+  const seconds = latency % ONE_MIN_SECONDS;\n+\n+  return {\n+    minutes,\n+    seconds,\n+  };\n+}\n+\n+function formatNumberDisplay(num) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0444e4d1fc4917fc32a41753e9ae7d9e15dd68df"}, "originalPosition": 120}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQ4OTUxMg==", "bodyText": "nit: remove?", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r545489512", "createdAt": "2020-12-18T00:14:45Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/Replicator/Detail/TopPanel/ActionButtons/Configure/ConfigureModeless.tsx", "diffHunk": "@@ -47,10 +49,21 @@ const styles = (theme): StyleRules => {\n       alignItems: 'center',\n       paddingLeft: '15px',\n     },\n-    content: {\n-      height: '400px',\n+    taskMemory: {\n+      width: '200px',\n+      margin: '15px 0 25px',\n+    },\n+    body: {\n       padding: '10px 15px',\n     },\n+    content: {\n+      height: '300px',\n+      // padding: '10px 15px',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0444e4d1fc4917fc32a41753e9ae7d9e15dd68df"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b5299b5860f7a1c82d34c64e89745a8afdba99a", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/0b5299b5860f7a1c82d34c64e89745a8afdba99a", "committedDate": "2020-12-18T00:49:12Z", "message": "[CDAP-17470] Replication address UX review"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0444e4d1fc4917fc32a41753e9ae7d9e15dd68df", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/0444e4d1fc4917fc32a41753e9ae7d9e15dd68df", "committedDate": "2020-12-17T23:59:39Z", "message": "add review"}, "afterCommit": {"oid": "0b5299b5860f7a1c82d34c64e89745a8afdba99a", "author": {"user": {"login": "elfenheart", "name": "Edwin Elia"}}, "url": "https://github.com/cdapio/cdap/commit/0b5299b5860f7a1c82d34c64e89745a8afdba99a", "committedDate": "2020-12-18T00:49:12Z", "message": "[CDAP-17470] Replication address UX review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MTM1MTQ3", "url": "https://github.com/cdapio/cdap/pull/12938#pullrequestreview-555135147", "createdAt": "2020-12-18T02:39:18Z", "commit": {"oid": "0b5299b5860f7a1c82d34c64e89745a8afdba99a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1434, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}