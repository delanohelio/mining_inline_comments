{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMDQyOTUw", "number": 12200, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNDoyNDo1OVrOEB_uAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNDoyNDo1OVrOEB_uAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNTI4MDAxOnYy", "diffSide": "RIGHT", "path": "cdap-ui/cypress/integration/pipeline.spec.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNDoyNDo1OVrOGeLk2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNDo0Mzo1N1rOGefPYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwMDEyMw==", "bodyText": "nit: it would be clear if the test case says either one or the other. Saying should run or not run preview doesn't say what this test case is testing :). May be split it into two test cases one starting preview after clicking yes and one not starting preview because user clicked no.", "url": "https://github.com/cdapio/cdap/pull/12200#discussion_r434300123", "createdAt": "2020-06-03T04:24:59Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/cypress/integration/pipeline.spec.ts", "diffHunk": "@@ -96,13 +112,88 @@ describe('Creating a pipeline', () => {\n       .find('.toggle-switch')\n       .click();\n     cy.get('@instrumentationDiv').contains('Off');\n+\n+    cy.contains('Pipeline alert').click();\n+    cy.contains('+').click();\n+    cy.contains('Send Email').click();\n+\n+    // enter sender, recipients, subject, message\n+\n+    cy.get('[data-cy=\"sender\"]').within(() => {\n+      cy.get('input')\n+        .scrollIntoView()\n+        .focus()\n+        .type(TEST_SENDER);\n+    });\n+    cy.get('[data-cy=\"recipients\"]').within(() => {\n+      cy.get('input').type(TEST_RECIPIENT);\n+    });\n+    cy.get('[data-cy=\"subject\"]').within(() => {\n+      cy.get('input').type(TEST_SUBJECT);\n+    });\n+    // validate and see error\n+    cy.get('[data-cy=\"validate-btn\"]').click();\n+\n+    cy.contains('error found').should('exist');\n+\n+    // Fix missing field to resolve error\n+    cy.get('[data-cy=\"message\"]').within(() => {\n+      cy.get('button').click();\n+    });\n+    // validate\n+    cy.get('[data-cy=\"validate-btn\"]').click();\n+    cy.wait(2000);\n+    cy.contains('error found').should('not.exist');\n+\n+    // click next\n+    cy.get('[data-cy=\"next-btn\"]').click();\n+\n+    // click confirm\n+    cy.get('[data-cy=\"confirm-btn\"]').click();\n+\n+    // See email alert\n+    cy.get('[data-cy=\"saved-alerts\"]').within(() => {\n+      cy.contains('Email').should('exist');\n+    });\n+\n     cy.get('[data-testid=config-apply-close]').click();\n+  });\n+  it('should run or not run Preview based on user action on postrun action modal', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf89c684af1fa106693aa79a93c6660bf7e0911"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDYyMjMwNQ==", "bodyText": "That makes a lot of sense! Have split into two tests :)", "url": "https://github.com/cdapio/cdap/pull/12200#discussion_r434622305", "createdAt": "2020-06-03T14:43:57Z", "author": {"login": "yukiej"}, "path": "cdap-ui/cypress/integration/pipeline.spec.ts", "diffHunk": "@@ -96,13 +112,88 @@ describe('Creating a pipeline', () => {\n       .find('.toggle-switch')\n       .click();\n     cy.get('@instrumentationDiv').contains('Off');\n+\n+    cy.contains('Pipeline alert').click();\n+    cy.contains('+').click();\n+    cy.contains('Send Email').click();\n+\n+    // enter sender, recipients, subject, message\n+\n+    cy.get('[data-cy=\"sender\"]').within(() => {\n+      cy.get('input')\n+        .scrollIntoView()\n+        .focus()\n+        .type(TEST_SENDER);\n+    });\n+    cy.get('[data-cy=\"recipients\"]').within(() => {\n+      cy.get('input').type(TEST_RECIPIENT);\n+    });\n+    cy.get('[data-cy=\"subject\"]').within(() => {\n+      cy.get('input').type(TEST_SUBJECT);\n+    });\n+    // validate and see error\n+    cy.get('[data-cy=\"validate-btn\"]').click();\n+\n+    cy.contains('error found').should('exist');\n+\n+    // Fix missing field to resolve error\n+    cy.get('[data-cy=\"message\"]').within(() => {\n+      cy.get('button').click();\n+    });\n+    // validate\n+    cy.get('[data-cy=\"validate-btn\"]').click();\n+    cy.wait(2000);\n+    cy.contains('error found').should('not.exist');\n+\n+    // click next\n+    cy.get('[data-cy=\"next-btn\"]').click();\n+\n+    // click confirm\n+    cy.get('[data-cy=\"confirm-btn\"]').click();\n+\n+    // See email alert\n+    cy.get('[data-cy=\"saved-alerts\"]').within(() => {\n+      cy.contains('Email').should('exist');\n+    });\n+\n     cy.get('[data-testid=config-apply-close]').click();\n+  });\n+  it('should run or not run Preview based on user action on postrun action modal', () => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwMDEyMw=="}, "originalCommit": {"oid": "5bf89c684af1fa106693aa79a93c6660bf7e0911"}, "originalPosition": 92}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2648, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}