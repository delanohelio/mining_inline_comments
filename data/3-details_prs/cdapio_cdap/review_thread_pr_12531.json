{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4NzYxMDk2", "number": 12531, "reviewThreads": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTowMTo0NlrOETuCPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzoxNToyOFrOEV6xyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTEyNjM2OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/AbstractWidget/FormInputs/Select/index.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTowMTo0NlrOG5nF8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzoxNDoxMlrOG5sWPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2MjUxNQ==", "bodyText": "Should \"native\" be here as well (see line 107)? I think it also needs to get added to ISelectWidgetProps (along with default?).", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463062515", "createdAt": "2020-07-30T15:01:46Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/FormInputs/Select/index.tsx", "diffHunk": "@@ -160,5 +161,13 @@ const CustomSelect: React.FC<ISelectProps> = ({\n };\n \n (CustomSelect as any).propTypes = WIDGET_PROPTYPES;\n+(CustomSelect as any).getWidgetAttributes = () => {\n+  return {\n+    options: { type: 'ISelectOptions[]|string[]|number[]', required: true },\n+    default: { type: 'string', required: false },\n+    dense: { type: 'boolean', required: false },\n+    inline: { type: 'boolean', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE0ODYwNw==", "bodyText": "Wow, good point! Will add native in both getWidgetAttributes and ISelectWidgetProps.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463148607", "createdAt": "2020-07-30T17:14:12Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/FormInputs/Select/index.tsx", "diffHunk": "@@ -160,5 +161,13 @@ const CustomSelect: React.FC<ISelectProps> = ({\n };\n \n (CustomSelect as any).propTypes = WIDGET_PROPTYPES;\n+(CustomSelect as any).getWidgetAttributes = () => {\n+  return {\n+    options: { type: 'ISelectOptions[]|string[]|number[]', required: true },\n+    default: { type: 'string', required: false },\n+    dense: { type: 'boolean', required: false },\n+    inline: { type: 'boolean', required: false },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2MjUxNQ=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTEzNzc2OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/AbstractWidget/FormInputs/TextBox/index.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTowNDoyNVrOG5nNOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODowNToyMFrOG5uIYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2NDM3OQ==", "bodyText": "Should default get added to ITextBoxWidgetProps?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463064379", "createdAt": "2020-07-30T15:04:25Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/FormInputs/TextBox/index.tsx", "diffHunk": "@@ -75,5 +75,14 @@ const TextBox: React.FC<ITextBoxProps> = ({\n   );\n };\n \n-export default React.memo(TextBox);\n+const TextBox = React.memo(TextBoxComponent);\n+\n (TextBox as any).propTypes = WIDGET_PROPTYPES;\n+(TextBox as any).getWidgetAttributes = () => {\n+  return {\n+    placeholder: { type: 'string', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NzgyNg==", "bodyText": "Done", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463177826", "createdAt": "2020-07-30T18:05:20Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/FormInputs/TextBox/index.tsx", "diffHunk": "@@ -75,5 +75,14 @@ const TextBox: React.FC<ITextBoxProps> = ({\n   );\n };\n \n-export default React.memo(TextBox);\n+const TextBox = React.memo(TextBoxComponent);\n+\n (TextBox as any).propTypes = WIDGET_PROPTYPES;\n+(TextBox as any).getWidgetAttributes = () => {\n+  return {\n+    placeholder: { type: 'string', required: false },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2NDM3OQ=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTE2MDE5OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/AbstractWidget/KeyValueDropdownWidget/index.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTowOTozM1rOG5nbIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzoxNzoxM1rOG5sdGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2NzkzNw==", "bodyText": "I don't see where we look for/use this?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463067937", "createdAt": "2020-07-30T15:09:33Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/KeyValueDropdownWidget/index.tsx", "diffHunk": "@@ -72,3 +74,12 @@ export default function KeyValueDropdownWidget(props) {\n }\n \n (KeyValueDropdownWidget as any).propTypes = WIDGET_PROPTYPES;\n+(KeyValueDropdownWidget as any).getWidgetAttributes = () => {\n+  return {\n+    'key-placeholder': { type: 'string', required: false },\n+    'value-placeholder': { type: 'string', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE1MDM2Mw==", "bodyText": "Yes! We wouldn't need value-placeholder since value field would be a dropdown.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463150363", "createdAt": "2020-07-30T17:17:13Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/KeyValueDropdownWidget/index.tsx", "diffHunk": "@@ -72,3 +74,12 @@ export default function KeyValueDropdownWidget(props) {\n }\n \n (KeyValueDropdownWidget as any).propTypes = WIDGET_PROPTYPES;\n+(KeyValueDropdownWidget as any).getWidgetAttributes = () => {\n+  return {\n+    'key-placeholder': { type: 'string', required: false },\n+    'value-placeholder': { type: 'string', required: false },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2NzkzNw=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTE3MzEzOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/AbstractWidget/KeyValueWidget/index.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxMjoyNVrOG5ni7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODoxMToxMFrOG5uU8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2OTkzNQ==", "bodyText": "where do we use this?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463069935", "createdAt": "2020-07-30T15:12:25Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/KeyValueWidget/index.tsx", "diffHunk": "@@ -76,3 +78,13 @@ export default function KeyValueWidget(props) {\n   ...WIDGET_PROPTYPES,\n   isEncoded: PropTypes.bool,\n };\n+\n+(KeyValueWidget as any).getWidgetAttributes = () => {\n+  return {\n+    'key-placeholder': { type: 'string', required: false },\n+    'value-placeholder': { type: 'string', required: false },\n+    'kv-delimiter': { type: 'string', required: false },\n+    delimiter: { type: 'string', required: false },\n+    showDelimiter: { type: 'boolean', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4MTA0MQ==", "bodyText": "I've included this because I've noticed that this is occasionally included in JSON configuration.\nhttps://github.com/cdapio/hydrator-plugins/blob/544519f394360fb7a045e6be02fe0afea4f40c27/core-plugins/widgets/Cube-batchsink.json#L32", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463181041", "createdAt": "2020-07-30T18:11:10Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/KeyValueWidget/index.tsx", "diffHunk": "@@ -76,3 +78,13 @@ export default function KeyValueWidget(props) {\n   ...WIDGET_PROPTYPES,\n   isEncoded: PropTypes.bool,\n };\n+\n+(KeyValueWidget as any).getWidgetAttributes = () => {\n+  return {\n+    'key-placeholder': { type: 'string', required: false },\n+    'value-placeholder': { type: 'string', required: false },\n+    'kv-delimiter': { type: 'string', required: false },\n+    delimiter: { type: 'string', required: false },\n+    showDelimiter: { type: 'boolean', required: false },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2OTkzNQ=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTE3OTQ2OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/AbstractWidget/MemorySelectWidget/index.js", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxMzo1M1rOG5nm4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzo1ODo1NVrOG5t5tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3MDk0Nw==", "bodyText": "Where is this type defined?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463070947", "createdAt": "2020-07-30T15:13:53Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/MemorySelectWidget/index.js", "diffHunk": "@@ -38,3 +38,8 @@ export default function MemorySelectWidget({ ...props }) {\n \n MemorySelectWidget.propTypes = WIDGET_PROPTYPES;\n MemorySelectWidget.defaultProps = DEFAULT_WIDGET_PROPS;\n+MemorySelectWidget.getWidgetAttributes = () => {\n+  return {\n+    size: { type: 'Size', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NDA3MA==", "bodyText": "I have defined it here! This change is included in this PR. \n  \n    \n      cdap/cdap-ui/app/cdap/components/ConfigurationGroup/WidgetWrapper/index.tsx\n    \n    \n         Line 88\n      in\n      c77629c\n    \n    \n    \n    \n\n        \n          \n           export enum Size {", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463174070", "createdAt": "2020-07-30T17:58:55Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/MemorySelectWidget/index.js", "diffHunk": "@@ -38,3 +38,8 @@ export default function MemorySelectWidget({ ...props }) {\n \n MemorySelectWidget.propTypes = WIDGET_PROPTYPES;\n MemorySelectWidget.defaultProps = DEFAULT_WIDGET_PROPS;\n+MemorySelectWidget.getWidgetAttributes = () => {\n+  return {\n+    size: { type: 'Size', required: false },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3MDk0Nw=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTE4MzQ5OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/AbstractWidget/MultipleValuesWidget/index.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxNDo0NlrOG5npRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODowMDozMlrOG5t92A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3MTU1Nw==", "bodyText": "it looks like this can also be a string?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463071557", "createdAt": "2020-07-30T15:14:46Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/MultipleValuesWidget/index.tsx", "diffHunk": "@@ -74,3 +76,11 @@ export default function MultipleValuesWidget(props) {\n }\n \n (MultipleValuesWidget as any).propTypes = WIDGET_PROPTYPES;\n+(MultipleValuesWidget as any).getWidgetAttributes = () => {\n+  return {\n+    placeholders: { type: 'string[]', required: false },\n+    'values-delimiter': { type: 'string', required: false },\n+    numValues: { type: 'number', required: true },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NTEyOA==", "bodyText": "Because this widget property numValues represents a number of values, we should render a number widget that configures this widget property. Therefore, it would be better to pass in number instead.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463175128", "createdAt": "2020-07-30T18:00:32Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/MultipleValuesWidget/index.tsx", "diffHunk": "@@ -74,3 +76,11 @@ export default function MultipleValuesWidget(props) {\n }\n \n (MultipleValuesWidget as any).propTypes = WIDGET_PROPTYPES;\n+(MultipleValuesWidget as any).getWidgetAttributes = () => {\n+  return {\n+    placeholders: { type: 'string[]', required: false },\n+    'values-delimiter': { type: 'string', required: false },\n+    numValues: { type: 'number', required: true },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3MTU1Nw=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTIwMjEzOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/AbstractWidget/RadioGroupWidget/index.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToxODoyN1rOG5n1IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODowODowOFrOG5uOMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3NDU5Mg==", "bodyText": "where do we check for/use this?", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463074592", "createdAt": "2020-07-30T15:18:27Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/RadioGroupWidget/index.tsx", "diffHunk": "@@ -128,3 +128,10 @@ export default function RadioGroupWidget(props) {\n }\n \n (RadioGroupWidget as any).propTypes = WIDGET_PROPTYPES;\n+(RadioGroupWidget as any).getWidgetAttributes = () => {\n+  return {\n+    layout: { type: 'string', required: true },\n+    options: { type: 'IOption[]', required: true },\n+    default: { type: 'string', required: false },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3OTMxMg==", "bodyText": "This is used to set the default value of radio-group widget when we render it via `ConfigurationGroup` component. If `default` is set to \"true\", it will select \"true\" as the following screenshot.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463179312", "createdAt": "2020-07-30T18:08:08Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/RadioGroupWidget/index.tsx", "diffHunk": "@@ -128,3 +128,10 @@ export default function RadioGroupWidget(props) {\n }\n \n (RadioGroupWidget as any).propTypes = WIDGET_PROPTYPES;\n+(RadioGroupWidget as any).getWidgetAttributes = () => {\n+  return {\n+    layout: { type: 'string', required: true },\n+    options: { type: 'IOption[]', required: true },\n+    default: { type: 'string', required: false },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3NDU5Mg=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTIzMDkzOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/AbstractWidget/WranglerEditor/index.tsx", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNToyNTowM1rOG5oGzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODowNDo1NlrOG5uHgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3OTExOA==", "bodyText": "It looks a little weird to have some of the imports before the license.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463079118", "createdAt": "2020-07-30T15:25:03Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/WranglerEditor/index.tsx", "diffHunk": "@@ -1,3 +1,16 @@\n+import * as React from 'react';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NTQxNQ==", "bodyText": "Whoops, will fix this!", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463175415", "createdAt": "2020-07-30T18:01:02Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/WranglerEditor/index.tsx", "diffHunk": "@@ -1,3 +1,16 @@\n+import * as React from 'react';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3OTExOA=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NzYwMQ==", "bodyText": "Resolved", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463177601", "createdAt": "2020-07-30T18:04:56Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/WranglerEditor/index.tsx", "diffHunk": "@@ -1,3 +1,16 @@\n+import * as React from 'react';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA3OTExOA=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTI2Njg4OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/ConfigurationGroupPage/GroupPanel/WidgetCollection/WidgetPanel/WidgetInfoInput/index.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTozMzozM1rOG5od2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODowNDoyM1rOG5uGNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA4NTAxNw==", "bodyText": "Why did we change this from empty string to undefined? Having it be set to undefined seems potentially ambiguous if we want to check for existence of the key in acc.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463085017", "createdAt": "2020-07-30T15:33:33Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/ConfigurationGroupPage/GroupPanel/WidgetCollection/WidgetPanel/WidgetInfoInput/index.tsx", "diffHunk": "@@ -70,12 +67,14 @@ const WidgetInfoInputView: React.FC<IWidgetInfoInputProps> = ({ classes, widgetI\n       setWidgetInfo(widgetInfo.setIn([widgetID, 'widgetType'], widgetType));\n \n       // Change widget-attributes so that it corresponds to the widget-type\n+      const comp = WIDGET_FACTORY[widgetType];\n+      const widgetAttributes = comp.getWidgetAttributes();\n       setWidgetToAttributes(\n         widgetToAttributes.set(\n           widgetID,\n           Map(\n-            Object.keys(WIDGET_TYPE_TO_ATTRIBUTES[widgetType]).reduce((acc, curr) => {\n-              acc[curr] = '';\n+            Object.keys(widgetAttributes).reduce((acc, curr) => {\n+              acc[curr] = undefined;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NzI3MQ==", "bodyText": "If we set the default value to be an empty string, this will cause errors in certain widgets. For instance, some widget attributes such as options should not be set to an empty string, since it should be an array. Previously, It has caused errors on certain widgets because this runs forEach or map on empty string.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463177271", "createdAt": "2020-07-30T18:04:23Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/ConfigurationGroupPage/GroupPanel/WidgetCollection/WidgetPanel/WidgetInfoInput/index.tsx", "diffHunk": "@@ -70,12 +67,14 @@ const WidgetInfoInputView: React.FC<IWidgetInfoInputProps> = ({ classes, widgetI\n       setWidgetInfo(widgetInfo.setIn([widgetID, 'widgetType'], widgetType));\n \n       // Change widget-attributes so that it corresponds to the widget-type\n+      const comp = WIDGET_FACTORY[widgetType];\n+      const widgetAttributes = comp.getWidgetAttributes();\n       setWidgetToAttributes(\n         widgetToAttributes.set(\n           widgetID,\n           Map(\n-            Object.keys(WIDGET_TYPE_TO_ATTRIBUTES[widgetType]).reduce((acc, curr) => {\n-              acc[curr] = '';\n+            Object.keys(widgetAttributes).reduce((acc, curr) => {\n+              acc[curr] = undefined;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA4NTAxNw=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MTI2OTMxOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/SelectWithOptions/index.js", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNTozNDoxNFrOG5ofYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxODowNDo1MVrOG5uHRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA4NTQxMQ==", "bodyText": "I would move this below the license.", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463085411", "createdAt": "2020-07-30T15:34:14Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/SelectWithOptions/index.js", "diffHunk": "@@ -1,3 +1,4 @@\n+import { Input } from 'reactstrap';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NTYxNw==", "bodyText": "Resolved", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463175617", "createdAt": "2020-07-30T18:01:25Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/SelectWithOptions/index.js", "diffHunk": "@@ -1,3 +1,4 @@\n+import { Input } from 'reactstrap';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA4NTQxMQ=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE3NzU0MQ==", "bodyText": "Done", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r463177541", "createdAt": "2020-07-30T18:04:51Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/SelectWithOptions/index.js", "diffHunk": "@@ -1,3 +1,4 @@\n+import { Input } from 'reactstrap';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA4NTQxMQ=="}, "originalCommit": {"oid": "c77629cc5271a0b2e42c01c5a1059979d406a9bf"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMjY4NjEzOnYy", "diffSide": "LEFT", "path": "cdap-ui/app/cdap/components/AbstractWidget/AbstractMultiRowWidget/index.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMjozMjowNVrOG7O4JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDo0OToxNFrOG7j-uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc2MjkxNg==", "bodyText": "keep this return statement, then the else block is not needed", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r464762916", "createdAt": "2020-08-04T02:32:05Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/AbstractMultiRowWidget/index.tsx", "diffHunk": "@@ -80,26 +81,27 @@ export default class AbstractMultiRowWidget<\n           autofocus: null,\n         },\n         () => {\n-          this.addRow(-1, false);\n+          if (!this.state.rows || this.state.rows.length === 0) {\n+            // adding a new empty row in case values are empty\n+            this.addRow(-1, false);\n+          }\n         }\n       );\n+    } else {\n+      const rows = [];\n \n-      return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b3b547df764ae1d5059cb15ab875e4cd7ea4b18"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwODY2NQ==", "bodyText": "Resolved", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r465108665", "createdAt": "2020-08-04T14:49:14Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/AbstractMultiRowWidget/index.tsx", "diffHunk": "@@ -80,26 +81,27 @@ export default class AbstractMultiRowWidget<\n           autofocus: null,\n         },\n         () => {\n-          this.addRow(-1, false);\n+          if (!this.state.rows || this.state.rows.length === 0) {\n+            // adding a new empty row in case values are empty\n+            this.addRow(-1, false);\n+          }\n         }\n       );\n+    } else {\n+      const rows = [];\n \n-      return;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc2MjkxNg=="}, "originalCommit": {"oid": "0b3b547df764ae1d5059cb15ab875e4cd7ea4b18"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMjY4OTMzOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/AbstractWidget/DLPCustomWidget/index.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMjozMzo1M1rOG7O59Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNDo0OToxOFrOG7j-2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc2MzM4MQ==", "bodyText": "not necessary. We're not going to support DLP widget for the JSON widget creator", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r464763381", "createdAt": "2020-08-04T02:33:53Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/DLPCustomWidget/index.tsx", "diffHunk": "@@ -85,3 +87,11 @@ export default function DLPWidget(props) {\n }\n \n (DLPWidget as any).propTypes = WIDGET_PROPTYPES;\n+(DLPWidget as any).getWidgetAttributes = () => {\n+  return {\n+    // TODO: Need to investigate 'transforms' more\n+    // transforms: { type: 'ITransformProp[]', required: true },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b3b547df764ae1d5059cb15ab875e4cd7ea4b18"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwODY5OQ==", "bodyText": "Resolved", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r465108699", "createdAt": "2020-08-04T14:49:18Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/DLPCustomWidget/index.tsx", "diffHunk": "@@ -85,3 +87,11 @@ export default function DLPWidget(props) {\n }\n \n (DLPWidget as any).propTypes = WIDGET_PROPTYPES;\n+(DLPWidget as any).getWidgetAttributes = () => {\n+  return {\n+    // TODO: Need to investigate 'transforms' more\n+    // transforms: { type: 'ITransformProp[]', required: true },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc2MzM4MQ=="}, "originalCommit": {"oid": "0b3b547df764ae1d5059cb15ab875e4cd7ea4b18"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNDE4MjIwOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/ConfigurationGroupPage/GroupPanel/WidgetCollection/WidgetAttributesPanel/index.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzoxNDozNFrOG88swg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzoxNDozNFrOG88swg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU2MjI0Mg==", "bodyText": "this is a wrong usage for debounce, this should be a timeout.\nYou should debounce the entire callback of useEffect, and inside it have a timeout to set the loading to false", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r466562242", "createdAt": "2020-08-06T17:14:34Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/ConfigurationGroupPage/GroupPanel/WidgetCollection/WidgetAttributesPanel/index.tsx", "diffHunk": "@@ -71,14 +73,34 @@ const WidgetAttributesPanelView: React.FC<IWidgetAttributesPanelProps> = ({\n   // 'widgetToAttributes' will only be changed when user clicks on 'save' button or closes the dialog.\n   const [localWidgetToAttributes, setLocalWidgetToAttributes] = React.useState(widgetToAttributes);\n \n+  const [loading, setLoading] = React.useState(false);\n+\n+  // When widget attributes changes, show loading view for 500ms\n+  // This is in order to force rerender WidgetAttributeInput component\n+  const debouncedUpdate = debounce(() => {\n+    setLoading(false);\n+  }, 500);\n+\n+  React.useEffect(() => {\n+    // after a setTimeout for 500ms, set the loading state back to false\n+    setLoading(true);\n+    setLocalWidgetToAttributes(widgetToAttributes);\n+    debouncedUpdate();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1e3516ca0270ae08e57e7eaac2f0e22a62ba9ca"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNDE4NTY4OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/PluginJSONMenu/LiveView/index.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzoxNToyOFrOG88u0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzoxNToyOFrOG88u0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU2Mjc3MA==", "bodyText": "same comment here regarding the debounce", "url": "https://github.com/cdapio/cdap/pull/12531#discussion_r466562770", "createdAt": "2020-08-06T17:15:28Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/PluginJSONMenu/LiveView/index.tsx", "diffHunk": "@@ -66,6 +68,20 @@ const LiveViewView: React.FC<ILiveViewProps> = ({\n   JSONFilename,\n   collapseLiveView,\n }) => {\n+  const [loading, setLoading] = React.useState(false);\n+\n+  // When JSONOutput changes, show loading view for 500ms\n+  // This is in order to force rerender LiveConfigurationGroup component\n+  const debouncedUpdate = debounce(() => {\n+    setLoading(false);\n+  }, 500);\n+\n+  React.useEffect(() => {\n+    // after a setTimeout for 500ms, set the loading state back to false\n+    setLoading(true);\n+    debouncedUpdate();\n+  }, [JSONOutput]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1e3516ca0270ae08e57e7eaac2f0e22a62ba9ca"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3275, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}