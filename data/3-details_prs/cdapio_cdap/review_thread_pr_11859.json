{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyOTc1OTkz", "number": 11859, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwMTo1ODoxOFrODeqvuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwMjowNDozM1rODeqy_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNDg0MjE5OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/Pagination/index.tsx", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwMTo1ODoxOFrOFn7taQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMzozOTozNlrOFrWZSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxNzA2NQ==", "bodyText": "should this be > 25?", "url": "https://github.com/cdapio/cdap/pull/11859#discussion_r377417065", "createdAt": "2020-02-11T01:58:18Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/Pagination/index.tsx", "diffHunk": "@@ -15,27 +15,20 @@\n  */\n \n import { connect } from 'react-redux';\n-import { Actions } from 'components/PipelineList/DeployedPipelineView/store';\n import PaginationView from 'components/PipelineList/PaginationView';\n-\n+import { setPage } from 'components/PipelineList/DeployedPipelineView/store/ActionCreator';\n const mapStateToProps = (state) => {\n   return {\n     currentPage: state.deployed.currentPage,\n     pageLimit: state.deployed.pageLimit,\n-    shouldDisplay: state.deployed.search.length === 0,\n+    shouldDisplay: state.deployed.filteredPipelines.length > 24,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "908e4e9aded7f9584ffe02c43f93c4f7441ecefa"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxOTk3MQ==", "bodyText": "Filtered pipelines will never be > 25.", "url": "https://github.com/cdapio/cdap/pull/11859#discussion_r377419971", "createdAt": "2020-02-11T02:13:06Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/Pagination/index.tsx", "diffHunk": "@@ -15,27 +15,20 @@\n  */\n \n import { connect } from 'react-redux';\n-import { Actions } from 'components/PipelineList/DeployedPipelineView/store';\n import PaginationView from 'components/PipelineList/PaginationView';\n-\n+import { setPage } from 'components/PipelineList/DeployedPipelineView/store/ActionCreator';\n const mapStateToProps = (state) => {\n   return {\n     currentPage: state.deployed.currentPage,\n     pageLimit: state.deployed.pageLimit,\n-    shouldDisplay: state.deployed.search.length === 0,\n+    shouldDisplay: state.deployed.filteredPipelines.length > 24,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxNzA2NQ=="}, "originalCommit": {"oid": "908e4e9aded7f9584ffe02c43f93c4f7441ecefa"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg0MzkzNQ==", "bodyText": "then do we need this property at all then? This is to show or hide the Pagination component, right?", "url": "https://github.com/cdapio/cdap/pull/11859#discussion_r377843935", "createdAt": "2020-02-11T19:17:05Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/Pagination/index.tsx", "diffHunk": "@@ -15,27 +15,20 @@\n  */\n \n import { connect } from 'react-redux';\n-import { Actions } from 'components/PipelineList/DeployedPipelineView/store';\n import PaginationView from 'components/PipelineList/PaginationView';\n-\n+import { setPage } from 'components/PipelineList/DeployedPipelineView/store/ActionCreator';\n const mapStateToProps = (state) => {\n   return {\n     currentPage: state.deployed.currentPage,\n     pageLimit: state.deployed.pageLimit,\n-    shouldDisplay: state.deployed.search.length === 0,\n+    shouldDisplay: state.deployed.filteredPipelines.length > 24,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxNzA2NQ=="}, "originalCommit": {"oid": "908e4e9aded7f9584ffe02c43f93c4f7441ecefa"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAwMDAwOQ==", "bodyText": "Have updated the search/pagination behavior. Have added comments to explain changes in code. Let me know if that is ok.", "url": "https://github.com/cdapio/cdap/pull/11859#discussion_r381000009", "createdAt": "2020-02-18T23:39:36Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/Pagination/index.tsx", "diffHunk": "@@ -15,27 +15,20 @@\n  */\n \n import { connect } from 'react-redux';\n-import { Actions } from 'components/PipelineList/DeployedPipelineView/store';\n import PaginationView from 'components/PipelineList/PaginationView';\n-\n+import { setPage } from 'components/PipelineList/DeployedPipelineView/store/ActionCreator';\n const mapStateToProps = (state) => {\n   return {\n     currentPage: state.deployed.currentPage,\n     pageLimit: state.deployed.pageLimit,\n-    shouldDisplay: state.deployed.search.length === 0,\n+    shouldDisplay: state.deployed.filteredPipelines.length > 24,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxNzA2NQ=="}, "originalCommit": {"oid": "908e4e9aded7f9584ffe02c43f93c4f7441ecefa"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzNDg1MDU1OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/index.tsx", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwMjowNDozM1rOFn7yOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMToyMDoxNlrOFoZhsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxODI5Ng==", "bodyText": "so where is the reset happening now?", "url": "https://github.com/cdapio/cdap/pull/11859#discussion_r377418296", "createdAt": "2020-02-11T02:04:33Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/index.tsx", "diffHunk": "@@ -50,7 +53,11 @@ const DeployedPipeline: React.FC = () => {\n   // on unmount\n   React.useEffect(() => {\n     return () => {\n-      reset();\n+      // (TODO): This is right now problematic.\n+      // React unmounts component everytime when incoming props change\n+      // Because this is FC there is no way to know if the parent component\n+      // changed the props or really unmounted.\n+      // reset();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "908e4e9aded7f9584ffe02c43f93c4f7441ecefa"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxOTkwMA==", "bodyText": "It is not. Thats why added the comment. We right now don't reset the store.", "url": "https://github.com/cdapio/cdap/pull/11859#discussion_r377419900", "createdAt": "2020-02-11T02:12:50Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/index.tsx", "diffHunk": "@@ -50,7 +53,11 @@ const DeployedPipeline: React.FC = () => {\n   // on unmount\n   React.useEffect(() => {\n     return () => {\n-      reset();\n+      // (TODO): This is right now problematic.\n+      // React unmounts component everytime when incoming props change\n+      // Because this is FC there is no way to know if the parent component\n+      // changed the props or really unmounted.\n+      // reset();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxODI5Ng=="}, "originalCommit": {"oid": "908e4e9aded7f9584ffe02c43f93c4f7441ecefa"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg0NDIwNw==", "bodyText": "that doesn't cause issue in navigating back and forth while staying in React components? such as existing search filter or sorting?", "url": "https://github.com/cdapio/cdap/pull/11859#discussion_r377844207", "createdAt": "2020-02-11T19:17:38Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/index.tsx", "diffHunk": "@@ -50,7 +53,11 @@ const DeployedPipeline: React.FC = () => {\n   // on unmount\n   React.useEffect(() => {\n     return () => {\n-      reset();\n+      // (TODO): This is right now problematic.\n+      // React unmounts component everytime when incoming props change\n+      // Because this is FC there is no way to know if the parent component\n+      // changed the props or really unmounted.\n+      // reset();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxODI5Ng=="}, "originalCommit": {"oid": "908e4e9aded7f9584ffe02c43f93c4f7441ecefa"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg5MzM3Ng==", "bodyText": "Search and sorting will exist but the pipelines won't.  I will have to reset but not erase the pipelines and filtered ones. Still trying it out.", "url": "https://github.com/cdapio/cdap/pull/11859#discussion_r377893376", "createdAt": "2020-02-11T20:56:46Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/index.tsx", "diffHunk": "@@ -50,7 +53,11 @@ const DeployedPipeline: React.FC = () => {\n   // on unmount\n   React.useEffect(() => {\n     return () => {\n-      reset();\n+      // (TODO): This is right now problematic.\n+      // React unmounts component everytime when incoming props change\n+      // Because this is FC there is no way to know if the parent component\n+      // changed the props or really unmounted.\n+      // reset();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxODI5Ng=="}, "originalCommit": {"oid": "908e4e9aded7f9584ffe02c43f93c4f7441ecefa"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzkwNTU4NQ==", "bodyText": "Fixed. Can you give it another review.", "url": "https://github.com/cdapio/cdap/pull/11859#discussion_r377905585", "createdAt": "2020-02-11T21:20:16Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/components/PipelineList/DeployedPipelineView/index.tsx", "diffHunk": "@@ -50,7 +53,11 @@ const DeployedPipeline: React.FC = () => {\n   // on unmount\n   React.useEffect(() => {\n     return () => {\n-      reset();\n+      // (TODO): This is right now problematic.\n+      // React unmounts component everytime when incoming props change\n+      // Because this is FC there is no way to know if the parent component\n+      // changed the props or really unmounted.\n+      // reset();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxODI5Ng=="}, "originalCommit": {"oid": "908e4e9aded7f9584ffe02c43f93c4f7441ecefa"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2915, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}