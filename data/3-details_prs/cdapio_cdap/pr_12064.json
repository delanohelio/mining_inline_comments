{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzOTEzMzQ2", "number": 12064, "title": "(CDAP-16590) Log all errors when a scheduled service failed", "bodyText": "", "createdAt": "2020-04-15T18:13:56Z", "url": "https://github.com/cdapio/cdap/pull/12064", "merged": true, "mergeCommit": {"oid": "3a132359a5e1688e77fc0c4e074be4941a04ce11"}, "closed": true, "closedAt": "2020-04-15T20:16:18Z", "author": {"login": "chtyim"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX8L2JgH2gAyNDAzOTEzMzQ2OjUyMjczMjNiNWMzNjJlNGNjYThlM2Y5NzcxZWUzNDk5MTQ4NTZiMGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX8faGgFqTM5NDAzMzM1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5227323b5c362e4cca8e3f9771ee349914856b0d", "author": {"user": {"login": "chtyim", "name": "Terence Yim"}}, "url": "https://github.com/cdapio/cdap/commit/5227323b5c362e4cca8e3f9771ee349914856b0d", "committedDate": "2020-04-15T18:13:35Z", "message": "(CDAP-16590) Log all errors when a scheduled service failed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MDIwNDIz", "url": "https://github.com/cdapio/cdap/pull/12064#pullrequestreview-394020423", "createdAt": "2020-04-15T18:16:59Z", "commit": {"oid": "5227323b5c362e4cca8e3f9771ee349914856b0d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MDI3MTIz", "url": "https://github.com/cdapio/cdap/pull/12064#pullrequestreview-394027123", "createdAt": "2020-04-15T18:26:18Z", "commit": {"oid": "5227323b5c362e4cca8e3f9771ee349914856b0d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxODoyNjoxOFrOGGGMeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxODoyNzo0MVrOGGGPfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA0NjEzNw==", "bodyText": "we can use t here as well", "url": "https://github.com/cdapio/cdap/pull/12064#discussion_r409046137", "createdAt": "2020-04-15T18:26:18Z", "author": {"login": "CuriousVini"}, "path": "cdap-common/src/main/java/io/cdap/cdap/common/service/AbstractRetryableScheduledService.java", "diffHunk": "@@ -160,15 +160,19 @@ protected final void runOneIteration() throws Exception {\n         delayMillis = runTask();\n         nonFailureStartTime = 0L;\n         failureCount = 0;\n-      } catch (Exception e) {\n-        logTaskFailure(e);\n+      } catch (Throwable t) {\n+        logTaskFailure(t);\n+        if (!(t instanceof Exception)) {\n+          throw t;\n+        }\n+        Exception e = (Exception) t;\n         if (!shouldRetry(e)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5227323b5c362e4cca8e3f9771ee349914856b0d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA0NjkwOA==", "bodyText": "usually we do not log and throw - cdapio/hydrator-plugins#1072 (comment)", "url": "https://github.com/cdapio/cdap/pull/12064#discussion_r409046908", "createdAt": "2020-04-15T18:27:41Z", "author": {"login": "CuriousVini"}, "path": "cdap-common/src/main/java/io/cdap/cdap/common/service/AbstractRetryableScheduledService.java", "diffHunk": "@@ -178,9 +182,9 @@ protected final void runOneIteration() throws Exception {\n         }\n         this.delayMillis = delayMillis;\n       }\n-    } catch (Exception e) {\n-      LOG.error(\"Aborting service {} due to non-retryable error\", getServiceName(), e);\n-      throw e;\n+    } catch (Throwable t) {\n+      LOG.error(\"Aborting service {} due to non-retryable error\", getServiceName(), t);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5227323b5c362e4cca8e3f9771ee349914856b0d"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MDMzMzU0", "url": "https://github.com/cdapio/cdap/pull/12064#pullrequestreview-394033354", "createdAt": "2020-04-15T18:34:57Z", "commit": {"oid": "5227323b5c362e4cca8e3f9771ee349914856b0d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2161, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}