{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0MDQ2NjM5", "number": 11863, "title": "[CDAP-16271] Fix dropdown in control center", "bodyText": "Before the library upgrade, we had reactstrap version 6.2.0. Issue was caused by breaking changes in v8.0.0 to use the new Context API. As a result, CustomDropdownMenu component wasn't getting context from Dropdown anymore.\nUpgraded reactstrap version from 8.2.0 to 8.4.0 to give CustomDropdownMenu access to DropdownContext.\nBuild: https://builds.cask.co/browse/CDAP-UDUT506", "createdAt": "2020-02-12T01:42:42Z", "url": "https://github.com/cdapio/cdap/pull/11863", "merged": true, "mergeCommit": {"oid": "7a26ee31264add2e92b1446a3d3f930f10025b8a"}, "closed": true, "closedAt": "2020-02-19T01:50:20Z", "author": {"login": "yukiej"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDrLIiABqjMwMzIwNjk0NjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFq6kEgBqjMwNDk1MjY1MTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cad1cc85d40f80879e80d2679e3f8f79fdbbf77c", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/cad1cc85d40f80879e80d2679e3f8f79fdbbf77c", "committedDate": "2020-02-12T16:48:55Z", "message": "Update how CustomDropdownMenu gets context"}, "afterCommit": {"oid": "48f1856e33505abfc705eb1da7265c29d815dea1", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/48f1856e33505abfc705eb1da7265c29d815dea1", "committedDate": "2020-02-12T19:05:31Z", "message": "Add basic control center e2e test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9a0b067644b4a4b282f9af481f9a88d1f51bf0c2", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/9a0b067644b4a4b282f9af481f9a88d1f51bf0c2", "committedDate": "2020-02-13T02:29:16Z", "message": "Add time for page loading and use native click"}, "afterCommit": {"oid": "cb017648f5bca0fe1686aadc985d3d488b34a205", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/cb017648f5bca0fe1686aadc985d3d488b34a205", "committedDate": "2020-02-13T17:34:21Z", "message": "Add basic control center e2e test\n\nAdd time for page loading and use native click"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MjY3OTIw", "url": "https://github.com/cdapio/cdap/pull/11863#pullrequestreview-359267920", "createdAt": "2020-02-14T23:09:35Z", "commit": {"oid": "cb017648f5bca0fe1686aadc985d3d488b34a205"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMzowOTozNVrOFqGFBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMzowOTozNVrOFqGFBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY4NDEwMQ==", "bodyText": "we should stop doing explicit waits. cy.get have an implicit wait until the element shows up. There is a timeout that you can override on the get method.", "url": "https://github.com/cdapio/cdap/pull/11863#discussion_r379684101", "createdAt": "2020-02-14T23:09:35Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/cypress/integration/controlcenter.spec.ts", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the 'License'); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an 'AS IS' BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import * as Helpers from '../helpers';\n+\n+let headers = {};\n+const testPipeline = `test_pipeline_${Date.now()}`;\n+\n+describe('Using control center to see and filter things', () => {\n+  before(() => {\n+    Helpers.loginIfRequired().then(() => {\n+      cy.getCookie('CDAP_Auth_Token').then((cookie) => {\n+        if (!cookie) {\n+          return;\n+        }\n+        headers = {\n+          Authorization: 'Bearer ' + cookie.value,\n+        };\n+      });\n+    });\n+  });\n+  before((done) => {\n+    // Deploy a pipeline to have a pipeline and some datasets to see\n+    Helpers.deployAndTestPipeline('fll_airport_pipeline2.json', testPipeline, done);\n+  });\n+  after(() => {\n+    // Delete the pipeline to clean up\n+    cy.cleanup_pipelines(headers, testPipeline);\n+  });\n+  it('allows users to open filter menu and filter out pipelines', () => {\n+    cy.visit('/cdap/ns/default/control');\n+    cy.wait(2000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb017648f5bca0fe1686aadc985d3d488b34a205"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNzUzNDM3", "url": "https://github.com/cdapio/cdap/pull/11863#pullrequestreview-360753437", "createdAt": "2020-02-18T23:42:43Z", "commit": {"oid": "31385a3d296ccf02cd2bd61c317a57730c9316bf"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMzo0Mjo0M1rOFrWdVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMzo0Mjo0M1rOFrWdVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAwMTA0Ng==", "bodyText": "nit: remove", "url": "https://github.com/cdapio/cdap/pull/11863#discussion_r381001046", "createdAt": "2020-02-18T23:42:43Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/cypress/helpers.ts", "diffHunk": "@@ -113,7 +113,8 @@ function deployAndTestPipeline(filename, pipelineName, done) {\n     .type(pipelineName)\n     .type('{enter}');\n   cy.get('[data-testid=deploy-pipeline]').click();\n-  cy.wait(10000);\n+  // cy.wait(10000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31385a3d296ccf02cd2bd61c317a57730c9316bf"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca5e28b8ea67b41290b9c66ab2d4d7a15fc97ab5", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/ca5e28b8ea67b41290b9c66ab2d4d7a15fc97ab5", "committedDate": "2020-02-18T23:54:56Z", "message": "Upgrade reactstrap to 8.4.0, update CustomDropdownMenu to use new Context API, and add basic e2e test for control center"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31385a3d296ccf02cd2bd61c317a57730c9316bf", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/31385a3d296ccf02cd2bd61c317a57730c9316bf", "committedDate": "2020-02-18T20:13:39Z", "message": "Remove second cy.wait and add comment/todo for first cy.wait"}, "afterCommit": {"oid": "ca5e28b8ea67b41290b9c66ab2d4d7a15fc97ab5", "author": {"user": {"login": "yukiej", "name": null}}, "url": "https://github.com/cdapio/cdap/commit/ca5e28b8ea67b41290b9c66ab2d4d7a15fc97ab5", "committedDate": "2020-02-18T23:54:56Z", "message": "Upgrade reactstrap to 8.4.0, update CustomDropdownMenu to use new Context API, and add basic e2e test for control center"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1254, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}