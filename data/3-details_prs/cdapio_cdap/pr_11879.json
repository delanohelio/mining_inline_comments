{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NDkzMzQ2", "number": 11879, "title": "[UI] Plugin configuration title + logviewer changes", "bodyText": "Removes classname from logviewer\nResets to not include system logs by default in logviewer\nMinor styling changes to plugin configuration title & subtitle\nMinor text change to pipeline context menu item\nFixes FileDnD component to use react-dropzone correctly. This is a regression from library upgrade,.\nAdded e2e for plugin upload wizard.\nUpgraded cypress to 4.0.2.\n\nJIRAs:\nhttps://issues.cask.co/browse/CDAP-16327\nhttps://issues.cask.co/browse/CDAP-16315\nE2E test: https://builds.cask.co/browse/IT-UPD2127-2\nBuild: https://builds.cask.co/browse/CDAP-UDUT532-1", "createdAt": "2020-02-21T22:07:50Z", "url": "https://github.com/cdapio/cdap/pull/11879", "merged": true, "mergeCommit": {"oid": "45ceb0d49f7b3274ef7030e0ff40b55277f0406b"}, "closed": true, "closedAt": "2020-03-11T04:12:50Z", "author": {"login": "ajainarayanan"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKLVLogFqTM2ODQwOTg3NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMbVVngH2gAyMzc4NDkzMzQ2OmRkMjhlOTU4MjI5ODRjZTgzNTg1ZDBkMzM4MTExMGVjZDBjOTI0ZDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NDA5ODc0", "url": "https://github.com/cdapio/cdap/pull/11879#pullrequestreview-368409874", "createdAt": "2020-03-03T23:51:11Z", "commit": {"oid": "471001a5814289005332011497a3d798b546a41f"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMzo1MToxMVrOFxa0-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMzo1NzoyMVrOFxa8pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NDA4OQ==", "bodyText": "nit: use StyleRules", "url": "https://github.com/cdapio/cdap/pull/11879#discussion_r387364089", "createdAt": "2020-03-03T23:51:11Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/Markdown/MarkdownHeading.tsx", "diffHunk": "@@ -19,6 +19,13 @@ import withStyles, { WithStyles } from '@material-ui/core/styles/withStyles';\n import Heading, { IHeadingProps } from 'components/Heading';\n import ThemeWrapper from 'components/ThemeWrapper';\n \n+export const h2Styles = (theme) => ({\n+  fontSize: '1.4rem !important',\n+  fontWeight: 'bold' as 'bold',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "471001a5814289005332011497a3d798b546a41f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NTEzNg==", "bodyText": "does this need to be in another hook? Can this be clubbed with the on-mount hook that initializes the selection instance?", "url": "https://github.com/cdapio/cdap/pull/11879#discussion_r387365136", "createdAt": "2020-03-03T23:54:29Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/components/SelectionBox/index.tsx", "diffHunk": "@@ -63,54 +63,48 @@ export default function SelectionBox(props: ISelectionBoxProps) {\n     );\n   }, []);\n \n-  React.useEffect(\n-    () => {\n-      if (!selection) {\n-        return;\n+  React.useEffect(() => {\n+    if (!selection) {\n+      return;\n+    }\n+    if (toggleSelection) {\n+      selection.enable();\n+    } else {\n+      selection.disable();\n+    }\n+  }, [toggleSelection]);\n+\n+  React.useEffect(() => {\n+    if (!selection) {\n+      return;\n+    }\n+\n+    selection.on('start', () => {\n+      if (onSelectionStart) {\n+        onSelectionStart();\n       }\n-      if (toggleSelection) {\n-        selection.enable();\n-      } else {\n-        selection.disable();\n+    });\n+    selection.on('move', ({ selected, changed: { added, removed } }) => {\n+      const selectedNodes = [];\n+      for (const el of selected) {\n+        selectedNodes.push(el.id);\n       }\n-    },\n-    [toggleSelection]\n-  );\n-\n-  React.useEffect(\n-    () => {\n-      if (!selection) {\n-        return;\n+      if (onSelectionMove && (added.length > 0 || removed.length > 0)) {\n+        onSelectionMove({ selected: selectedNodes });\n       }\n+    });\n+    selection.on('stop', () => {\n+      if (onSelectionEnd) {\n+        onSelectionEnd();\n+      }\n+    });\n \n-      selection.on('start', () => {\n-        if (onSelectionStart) {\n-          onSelectionStart();\n-        }\n-      });\n-      selection.on('move', ({ selected, changed: { added, removed } }) => {\n-        const selectedNodes = [];\n-        for (const el of selected) {\n-          selectedNodes.push(el.id);\n-        }\n-        if (onSelectionMove && (added.length > 0 || removed.length > 0)) {\n-          onSelectionMove({ selected: selectedNodes });\n-        }\n-      });\n-      selection.on('stop', () => {\n-        if (onSelectionEnd) {\n-          onSelectionEnd();\n-        }\n-      });\n-\n-      return () => {\n-        if (selection) {\n-          selection.destroy();\n-        }\n-      };\n-    },\n-    [selection]\n-  );\n+    return () => {\n+      if (selection) {\n+        selection.destroy();\n+      }\n+    };\n+  }, [selection]);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "471001a5814289005332011497a3d798b546a41f"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NTQ2OQ==", "bodyText": "nit: newline", "url": "https://github.com/cdapio/cdap/pull/11879#discussion_r387365469", "createdAt": "2020-03-03T23:55:32Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/cypress/fixtures/example-transform-1.1.0-SNAPSHOT.json", "diffHunk": "@@ -0,0 +1,10 @@\n+{\n+  \"properties\": {\n+    \"widgets.ExampleTransform-transform\": \"{\\n  \\\"outputs\\\": [{\\n    \\\"name\\\": \\\"schema\\\",\\n    \\\"widget-type\\\": \\\"schema\\\",\\n    \\\"label\\\": \\\"schema\\\"\\n  }],\\n  \\\"metadata\\\": {\\\"spec-version\\\": \\\"1.4\\\"},\\n  \\\"configuration-groups\\\": [{\\n    \\\"label\\\": \\\"Transform Configuration\\\",\\n    \\\"properties\\\": [\\n      {\\n        \\\"widget-type\\\": \\\"textbox\\\",\\n        \\\"name\\\": \\\"myOption\\\",\\n        \\\"label\\\": \\\"My Option\\\",\\n        \\\"widget-attributes\\\": {\\n          \\\"default\\\": \\\"an example default value\\\",\\n          \\\"width\\\": \\\"large\\\"\\n        }\\n      },\\n      {\\n        \\\"widget-type\\\": \\\"textbox\\\",\\n        \\\"name\\\": \\\"myOptionalOption\\\",\\n        \\\"label\\\": \\\"My Optional Option\\\",\\n        \\\"widget-attributes\\\": {\\\"width\\\": \\\"large\\\"}\\n      }\\n    ]\\n  }]\\n}\",\n+    \"doc.ExampleTransform-transform\": \"# Example Transform\\n\\nInsert documentation about your plugin in this file.\\nThe UI will display the contents in the reference section of your plugin,\\nassuming this file is named following a convention of ``[plugin-name]-transform.md``.\\nThe plugin name is case sensitive.\\n\\nFor examples of plugin documentation, see the\\n[Hydrator documentation](https://github.com/caskdata/hydrator-plugins/tree/develop/core-plugins/docs).\\n\"\n+  },\n+  \"parents\": [\n+    \"system:cdap-data-pipeline[6.0.0,10.0.0-SNAPSHOT)\",\n+    \"system:cdap-data-streams[6.0.0,10.0.0-SNAPSHOT)\"\n+  ]\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "471001a5814289005332011497a3d798b546a41f"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NjA1NA==", "bodyText": "do any of the stylings have to be updated to account for one less column?", "url": "https://github.com/cdapio/cdap/pull/11879#discussion_r387366054", "createdAt": "2020-03-03T23:57:21Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/directives/log-viewer/log-viewer.html", "diffHunk": "@@ -184,10 +179,6 @@\n                 </span>\n             </td>\n \n-            <td class=\"source\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "471001a5814289005332011497a3d798b546a41f"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "471001a5814289005332011497a3d798b546a41f", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/471001a5814289005332011497a3d798b546a41f", "committedDate": "2020-02-22T08:09:38Z", "message": "Removes unused routes from express"}, "afterCommit": {"oid": "ae056e63df8e88f2fa4e8f5382ec0e7e84fda877", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/ae056e63df8e88f2fa4e8f5382ec0e7e84fda877", "committedDate": "2020-03-04T06:18:37Z", "message": "Addressed review comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae056e63df8e88f2fa4e8f5382ec0e7e84fda877", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/ae056e63df8e88f2fa4e8f5382ec0e7e84fda877", "committedDate": "2020-03-04T06:18:37Z", "message": "Addressed review comments"}, "afterCommit": {"oid": "03e25567915ab6eb88315355cfad47fc714edc57", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/03e25567915ab6eb88315355cfad47fc714edc57", "committedDate": "2020-03-04T06:21:37Z", "message": "Addressed review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNjM3NDAw", "url": "https://github.com/cdapio/cdap/pull/11879#pullrequestreview-370637400", "createdAt": "2020-03-06T21:28:12Z", "commit": {"oid": "03e25567915ab6eb88315355cfad47fc714edc57"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "051f4e7ffb983fb771a9267dd2407f50b6bff1e2", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/051f4e7ffb983fb771a9267dd2407f50b6bff1e2", "committedDate": "2020-03-10T01:10:56Z", "message": "[CDAP-16327][CDAP-16315][UI] Plugin configuration title + logviewer changes\n\n - Removes classname column from logviewer + removes systemlogs to be included by default\n - Fixes usage of FileDnD after library upgrade\n - Fixes plugin configuration title & subtitle to be concise\n - Upgrades cypress to 4.0.2\n - Adds generic upload command to upload any file using upload wizard (react-dropzone)\n - Adds example jar and json files for testing upload\n - Adds plugin upload spec\n - Adds data-cy attributes to necessary files to test plugin upload wizard\n - Swaps react-cookie with universal-cookie in dll file to correctly build dll files\n - Builds dlls based on newly added package (universal-cookie)\n - Removes unused routes from express"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "03e25567915ab6eb88315355cfad47fc714edc57", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/03e25567915ab6eb88315355cfad47fc714edc57", "committedDate": "2020-03-04T06:21:37Z", "message": "Addressed review comments"}, "afterCommit": {"oid": "051f4e7ffb983fb771a9267dd2407f50b6bff1e2", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/051f4e7ffb983fb771a9267dd2407f50b6bff1e2", "committedDate": "2020-03-10T01:10:56Z", "message": "[CDAP-16327][CDAP-16315][UI] Plugin configuration title + logviewer changes\n\n - Removes classname column from logviewer + removes systemlogs to be included by default\n - Fixes usage of FileDnD after library upgrade\n - Fixes plugin configuration title & subtitle to be concise\n - Upgrades cypress to 4.0.2\n - Adds generic upload command to upload any file using upload wizard (react-dropzone)\n - Adds example jar and json files for testing upload\n - Adds plugin upload spec\n - Adds data-cy attributes to necessary files to test plugin upload wizard\n - Swaps react-cookie with universal-cookie in dll file to correctly build dll files\n - Builds dlls based on newly added package (universal-cookie)\n - Removes unused routes from express"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43f02fc351325a84c6e035e6149a132c35a61784", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/43f02fc351325a84c6e035e6149a132c35a61784", "committedDate": "2020-03-10T16:49:11Z", "message": "Upgrades cypress node packages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a89121aadc4f4575ae19a16395ee43d0ca40c3e", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/3a89121aadc4f4575ae19a16395ee43d0ca40c3e", "committedDate": "2020-03-10T21:20:08Z", "message": "Fixes context menu spec to look for right label"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd28e95822984ce83585d0d3381110ecd0c924d6", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/dd28e95822984ce83585d0d3381110ecd0c924d6", "committedDate": "2020-03-10T23:43:55Z", "message": "Increases timeout for checking pipeline succeeded status check to 12 mins"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1278, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}