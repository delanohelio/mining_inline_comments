{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyOTgxODM5", "number": 12434, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMzo1OToyN1rOEKstVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxODoxMjoxNVrOEN7qcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NjUzNzE2OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQyMzo1OToyN1rOGr4_1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxODoyMDoxM1rOGw0UtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY3NTc5Nw==", "bodyText": "I18n?", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r448675797", "createdAt": "2020-07-01T23:59:27Z", "author": {"login": "njbriggs"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = 'Duration';\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM2NjA3NQ==", "bodyText": "Good question - we don't have i18n for the angular app (just for the react side).", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r450366075", "createdAt": "2020-07-06T17:13:13Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = 'Duration';\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY3NTc5Nw=="}, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM3MjI4Mg==", "bodyText": "OK then. Is the plan to add I18n as components are converted to React?", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r450372282", "createdAt": "2020-07-06T17:25:07Z", "author": {"login": "njbriggs"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = 'Duration';\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY3NTc5Nw=="}, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM4ODYxNA==", "bodyText": "I believe so. @ajainarayanan might be able to add more context!", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r450388614", "createdAt": "2020-07-06T17:56:36Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = 'Duration';\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY3NTc5Nw=="}, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg0MjEwMQ==", "bodyText": "We don't have a complete story on i18n. We need to rethink how we do i18n. Right now we have a yaml file that we build and ship along with code which takes the away the benefit of i18n (since we can change the language. If we need to we then have to generate a new build). We will have to revisit i18n once we migrate the entirety of angular to react.", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r453842101", "createdAt": "2020-07-13T18:20:13Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = 'Duration';\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY3NTc5Nw=="}, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMzUwODE0OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/components/Alert/index.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMzozNDoyNFrOGuW4NA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxODoyNjozNlrOGwBM0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2MjUxNg==", "bodyText": "Could we have enum for this?", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r451262516", "createdAt": "2020-07-08T03:34:24Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/cdap/components/Alert/index.js", "diffHunk": "@@ -61,12 +58,16 @@ export default class Alert extends Component {\n         element,\n       });\n     }\n-    if (this.state.type === 'success') {\n-      clearTimeout(this.successTimeout);\n-      this.successTimeout = setTimeout(this.onClose, SUCCESS_CLOSE_TIMEOUT);\n-    }\n+    this.resetTimeout();\n   }\n \n+  resetTimeout = () => {\n+    if (this.state.type === 'success' || this.state.type === 'info') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwNDQ5Ng==", "bodyText": "Good idea, done!", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r453004496", "createdAt": "2020-07-10T18:26:36Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/Alert/index.js", "diffHunk": "@@ -61,12 +58,16 @@ export default class Alert extends Component {\n         element,\n       });\n     }\n-    if (this.state.type === 'success') {\n-      clearTimeout(this.successTimeout);\n-      this.successTimeout = setTimeout(this.onClose, SUCCESS_CLOSE_TIMEOUT);\n-    }\n+    this.resetTimeout();\n   }\n \n+  resetTimeout = () => {\n+    if (this.state.type === 'success' || this.state.type === 'info') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2MjUxNg=="}, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMzUwODI5OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/services/alert-on-valium/alert-on-valium.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMzozNDoyOVrOGuW4Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxODoyNjozMVrOGwBMrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2MjUzNA==", "bodyText": "Could we have enum for this?", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r451262534", "createdAt": "2020-07-08T03:34:29Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/services/alert-on-valium/alert-on-valium.js", "diffHunk": "@@ -19,14 +19,14 @@ angular.module(PKG.name + '.services')\n     var isAnAlertOpened = false,\n         alertObj;\n \n-    var SUCCESS_ALERT_DURATION = 4; // duration amount in seconds\n+    var SUCCESS_ALERT_DURATION = 3; // duration amount in seconds\n \n     function show(obj) {\n       if (alertObj) {\n         alertObj.hide();\n       }\n \n-      obj.duration = obj.type === 'success' ? SUCCESS_ALERT_DURATION : false;\n+      obj.duration = obj.type === 'success' || obj.type === 'info' ? SUCCESS_ALERT_DURATION : false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwNDQ2MA==", "bodyText": "Done!", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r453004460", "createdAt": "2020-07-10T18:26:31Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/services/alert-on-valium/alert-on-valium.js", "diffHunk": "@@ -19,14 +19,14 @@ angular.module(PKG.name + '.services')\n     var isAnAlertOpened = false,\n         alertObj;\n \n-    var SUCCESS_ALERT_DURATION = 4; // duration amount in seconds\n+    var SUCCESS_ALERT_DURATION = 3; // duration amount in seconds\n \n     function show(obj) {\n       if (alertObj) {\n         alertObj.hide();\n       }\n \n-      obj.duration = obj.type === 'success' ? SUCCESS_ALERT_DURATION : false;\n+      obj.duration = obj.type === 'success' || obj.type === 'info' ? SUCCESS_ALERT_DURATION : false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2MjUzNA=="}, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMzUxMDYwOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/hydrator/templates/create/toppanel.html", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMzozNTo0M1rOGuW5jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDo1MjozN1rOGwFT0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2Mjg2Mg==", "bodyText": "Is this intended to be \"{{HydratorPlusPlusTopPanelCtrl.queueStatus}}\"? Could it be perhaps {{HydratorPlusPlusTopPanelCtrl.queueStatus}} instead?", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r451262862", "createdAt": "2020-07-08T03:35:43Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/hydrator/templates/create/toppanel.html", "diffHunk": "@@ -232,12 +232,12 @@\n         </div>\n       </div>\n     </div>\n-    <div class=\"btn run-time\">\n+    <div class=\"btn run-time\" title=\"{{HydratorPlusPlusTopPanelCtrl.queueStatus}}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwNDM1OQ==", "bodyText": "Since the expression is being used for an attribute, we need double quotes around it.", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r453004359", "createdAt": "2020-07-10T18:26:19Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/hydrator/templates/create/toppanel.html", "diffHunk": "@@ -232,12 +232,12 @@\n         </div>\n       </div>\n     </div>\n-    <div class=\"btn run-time\">\n+    <div class=\"btn run-time\" title=\"{{HydratorPlusPlusTopPanelCtrl.queueStatus}}\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2Mjg2Mg=="}, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA3MTgyNA==", "bodyText": "Ah I see! Thanks for clarifying it :)", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r453071824", "createdAt": "2020-07-10T20:52:37Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/hydrator/templates/create/toppanel.html", "diffHunk": "@@ -232,12 +232,12 @@\n         </div>\n       </div>\n     </div>\n-    <div class=\"btn run-time\">\n+    <div class=\"btn run-time\" title=\"{{HydratorPlusPlusTopPanelCtrl.queueStatus}}\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2Mjg2Mg=="}, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMzUxMzY4OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMzozNzowOVrOGuW7Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDo1MzowNFrOGwFUbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2MzI4Ng==", "bodyText": "Could we use PREVIEW_STATUS for 'Running' and 'Duration'?", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r451263286", "createdAt": "2020-07-08T03:37:09Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = 'Duration';\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;\n+      this.timerLabel = `${runsAheadInQueue} Pending`;\n+    } else if ([ ACQUIRED, INIT, RUNNING ].includes(res.status) && this.loadingLabel !== 'Stopping') {\n+      this.timerLabel = 'Running';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk5NzA5MA==", "bodyText": "That is an interesting idea! I'm not sure it makes sense to use PREVIEW_STATUS for the timer labels, since they sometimes don't correlate and \"Duration\" is not a preview status.", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r452997090", "createdAt": "2020-07-10T18:10:29Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = 'Duration';\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;\n+      this.timerLabel = `${runsAheadInQueue} Pending`;\n+    } else if ([ ACQUIRED, INIT, RUNNING ].includes(res.status) && this.loadingLabel !== 'Stopping') {\n+      this.timerLabel = 'Running';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2MzI4Ng=="}, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA3MTk4Mg==", "bodyText": "Alrighty!", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r453071982", "createdAt": "2020-07-10T20:53:04Z", "author": {"login": "jennac3"}, "path": "cdap-ui/app/hydrator/controllers/create/toppanel-ctrl.js", "diffHunk": "@@ -294,10 +304,36 @@ class HydratorPlusPlusTopPanelCtrl {\n     seconds = seconds < 10 ? '0' + seconds : seconds;\n     minutes = minutes < 10 ? '0' + minutes : minutes;\n \n+    this.setDisplayDuration(minutes, seconds);\n+  }\n+\n+  setDisplayDuration(minutes, seconds) {\n     this.displayDuration = {\n-      minutes: minutes,\n-      seconds: seconds\n-    };\n+      minutes: !minutes ? '--' : minutes,\n+      seconds: !seconds ? '--' : seconds,\n+    }\n+  }\n+\n+  updateTimerLabelAndTitle(res) {\n+    // set default\n+    if (!res) {\n+      this.timerLabel = 'Duration';\n+      this.queueStatus = '';\n+      return;\n+    }\n+\n+    const { WAITING, ACQUIRED, INIT, RUNNING } = window.CaskCommon.PREVIEW_STATUS;\n+    if (res.status === WAITING) {\n+      const runsAheadInQueue = res.positionInWaitingQueue;\n+      this.queueStatus = `${runsAheadInQueue} ${runsAheadInQueue === 1? 'run' : 'runs'} ahead in queue`;\n+      this.timerLabel = `${runsAheadInQueue} Pending`;\n+    } else if ([ ACQUIRED, INIT, RUNNING ].includes(res.status) && this.loadingLabel !== 'Stopping') {\n+      this.timerLabel = 'Running';", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2MzI4Ng=="}, "originalCommit": {"oid": "fe105311b2585a874aa13141fe0566bd6c32bff5"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzMDQ0NDY1OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/services/AlertStatus.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxODoxMjoxNVrOGw0Ctw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNToxNTowNVrOGzW93w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgzNzQ5NQ==", "bodyText": "Since this is purely used in Alert component can we co-locate this with Alert component?\nWould be better if we convert the Alert to typescript and add the enum to the same class as a static variable. That way components using Alert don't need to import this as an extra they can just use it as a static variable.", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r453837495", "createdAt": "2020-07-13T18:12:15Z", "author": {"login": "ajainarayanan"}, "path": "cdap-ui/app/cdap/services/AlertStatus.ts", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+enum ALERT_STATUS {\n+  Success = 'success',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9767acc48d9dcfef882291d9a64bda0ce40e6c6"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjUwNjg0Nw==", "bodyText": "As we discussed, I've created a JIRA and TO DO comment to track converting the component to TS in a separate PR.", "url": "https://github.com/cdapio/cdap/pull/12434#discussion_r456506847", "createdAt": "2020-07-17T15:15:05Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/services/AlertStatus.ts", "diffHunk": "@@ -0,0 +1,23 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+enum ALERT_STATUS {\n+  Success = 'success',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzgzNzQ5NQ=="}, "originalCommit": {"oid": "f9767acc48d9dcfef882291d9a64bda0ce40e6c6"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3330, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}