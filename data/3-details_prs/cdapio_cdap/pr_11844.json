{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxMDM0MDU3", "number": 11844, "title": "[CDAP-14284] Adds pan/zoom feature to pipeline canvas.", "bodyText": "Note:\n\nThis change was branched off from #11839. Hence the redundant commits.\nOnce the condition/splitter plugin PR is merge this PR should only have 2 commits and a minimal set of changes.", "createdAt": "2020-02-04T20:25:15Z", "url": "https://github.com/cdapio/cdap/pull/11844", "merged": true, "mergeCommit": {"oid": "0aec200eadf5dee89954e20513ddba26b40963da"}, "closed": true, "closedAt": "2020-06-16T00:14:29Z", "author": {"login": "ajainarayanan"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpnQjGgFqTQyNzMxNDc5Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrplkTABqjM0NDY2NDQwNjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MzE0Nzk2", "url": "https://github.com/cdapio/cdap/pull/11844#pullrequestreview-427314796", "createdAt": "2020-06-09T16:01:18Z", "commit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjowMToyMFrOGhRpow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjowMToyMFrOGhRpow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU0NTM3OQ==", "bodyText": "Should this be equals instead of not equals?", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437545379", "createdAt": "2020-06-09T16:01:20Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/DAG/DAGProvider.tsx", "diffHunk": "@@ -66,8 +69,11 @@ export class DAGProvider extends React.Component<any, IDagProviderState> {\n     });\n   };\n   private removeNode = (nodeId: string) => {\n+    const newNodes = this.state.nodes.delete(\n+      this.state.nodes.findIndex((node: INode) => node.get('id') !== nodeId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MzE1MjIx", "url": "https://github.com/cdapio/cdap/pull/11844#pullrequestreview-427315221", "createdAt": "2020-06-09T16:01:46Z", "commit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjowMTo0NlrOGhRq3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjowMTo0NlrOGhRq3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU0NTY5NQ==", "bodyText": "Same as above - should these be equals instead of not equals?", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437545695", "createdAt": "2020-06-09T16:01:46Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/DAG/DAGProvider.tsx", "diffHunk": "@@ -86,31 +92,48 @@ export class DAGProvider extends React.Component<any, IDagProviderState> {\n     });\n   };\n   private removeConnection = (connectionObj: IConnection) => {\n-    const newConnections = this.state.connections.filter(\n-      (connection: IConnection) =>\n-        connection.get('from') !== connectionObj.get('from') &&\n-        connection.get('to') !== connectionObj.get('to')\n-    ) as List<IConnection>;\n+    const newConnections = this.state.connections.delete(\n+      this.state.connections.findIndex(\n+        (connection: IConnection) =>\n+          connection.get('from') !== connectionObj.get('from') &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MzM4NjQx", "url": "https://github.com/cdapio/cdap/pull/11844#pullrequestreview-427338641", "createdAt": "2020-06-09T16:28:24Z", "commit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjoyODoyNFrOGhSunQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjoyODoyNFrOGhSunQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2MzAzNw==", "bodyText": "Can we get the color from theme.palette here too? And same for the other colors in these styles.", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437563037", "createdAt": "2020-06-09T16:28:24Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/DAG/Nodes/SplitterNode/PortPopover.tsx", "diffHunk": "@@ -0,0 +1,171 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import * as React from 'react';\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+import { IEndPointArgs } from 'components/DAG/DAGRenderer';\n+import { IPort } from 'components/DAG/Nodes/SplitterNode';\n+import { AbstractNode } from 'components/DAG/Nodes/AbstractNode';\n+import { endpointCircle, endpointCaret } from 'components/DAG/Nodes/utilities';\n+import xorWith from 'lodash/xorWith';\n+import isEqual from 'lodash/isEqual';\n+import isEmpty from 'lodash/isEmpty';\n+\n+const styles = (theme): StyleRules => {\n+  const endpointCircleStyles = endpointCircle(theme);\n+  return {\n+    endpointCircle: {\n+      ...endpointCircleStyles.root,\n+    },\n+    regularEndpointCircle: {\n+      ...endpointCircleStyles.regularEndpointCircle,\n+    },\n+    endpointCaret: {\n+      ...endpointCaret(theme).root,\n+    },\n+    root: {\n+      display: 'block',\n+      backgroundColor: theme.palette.grey[500],\n+    },\n+    portContainer: {\n+      display: 'block',\n+      backgroundColor: '#dbdbdb',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MzQyMjky", "url": "https://github.com/cdapio/cdap/pull/11844#pullrequestreview-427342292", "createdAt": "2020-06-09T16:32:45Z", "commit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozMjo0NVrOGhS4_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozMjo0NVrOGhS4_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NTY5NQ==", "bodyText": "Where do these numbers come from? Maybe we can elaborate with a comment.", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437565695", "createdAt": "2020-06-09T16:32:45Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/DAG/Nodes/utilities.ts", "diffHunk": "@@ -108,6 +108,10 @@ const endpointCircle = (theme): StyleRules => {\n       bottom: `-${ENDPOINT_RADIUS}px`,\n       left: `${ENDPOINT_RADIUS * 7}px`,\n     },\n+    conditionNoEndpointCircle: {\n+      bottom: `-${ENDPOINT_RADIUS}px`,\n+      left: `${105 / 2 - 7}px`,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MzQzMTUx", "url": "https://github.com/cdapio/cdap/pull/11844#pullrequestreview-427343151", "createdAt": "2020-06-09T16:33:52Z", "commit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozMzo1MlrOGhS7Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozMzo1MlrOGhS7Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NjI5OQ==", "bodyText": "colors from theme.palette?", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437566299", "createdAt": "2020-06-09T16:33:52Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/DAG/index.tsx", "diffHunk": "@@ -48,11 +52,14 @@ const registerTypes = {\n   endpoints: {},\n };\n \n-const styles = () => {\n+const styles = (): StyleRules => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3MzQ1MDA4", "url": "https://github.com/cdapio/cdap/pull/11844#pullrequestreview-427345008", "createdAt": "2020-06-09T16:36:10Z", "commit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozNjoxMFrOGhTBEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNjozNjoxMFrOGhTBEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2Nzc2MA==", "bodyText": "Are there any limits on the values of zoom?", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437567760", "createdAt": "2020-06-09T16:36:10Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/components/DAG/index.tsx", "diffHunk": "@@ -111,6 +170,97 @@ class DAG extends React.PureComponent<IDAGProps> {\n       {label}\n     </Button>\n   );\n+\n+  public zoomIn = () => {\n+    this.setState({\n+      zoom: this.state.zoom + 0.1,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df"}, "originalPosition": 122}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad90804a141cf94cfa6c80940b2154bf1566b4df", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/ad90804a141cf94cfa6c80940b2154bf1566b4df", "committedDate": "2020-02-04T20:21:54Z", "message": "Adds react-pan-zoom package"}, "afterCommit": {"oid": "3bffea11e48d072fff9e9bdee9ebadef617c627d", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/3bffea11e48d072fff9e9bdee9ebadef617c627d", "committedDate": "2020-06-10T17:41:07Z", "message": "Address review comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3bffea11e48d072fff9e9bdee9ebadef617c627d", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/3bffea11e48d072fff9e9bdee9ebadef617c627d", "committedDate": "2020-06-10T17:41:07Z", "message": "Address review comments"}, "afterCommit": {"oid": "95e590479088c30705a25f3d460080d66bd310d5", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/95e590479088c30705a25f3d460080d66bd310d5", "committedDate": "2020-06-10T18:05:34Z", "message": "Address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwODMyMjA0", "url": "https://github.com/cdapio/cdap/pull/11844#pullrequestreview-430832204", "createdAt": "2020-06-15T17:03:49Z", "commit": {"oid": "95e590479088c30705a25f3d460080d66bd310d5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1084ac3fa86ea8040142d0a36ac56564e810c69e", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/1084ac3fa86ea8040142d0a36ac56564e810c69e", "committedDate": "2020-06-15T23:51:34Z", "message": "Initial version of pan & zoom from react-pan-zoom npm package"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95e590479088c30705a25f3d460080d66bd310d5", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/95e590479088c30705a25f3d460080d66bd310d5", "committedDate": "2020-06-10T18:05:34Z", "message": "Address review comments"}, "afterCommit": {"oid": "1084ac3fa86ea8040142d0a36ac56564e810c69e", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/1084ac3fa86ea8040142d0a36ac56564e810c69e", "committedDate": "2020-06-15T23:51:34Z", "message": "Initial version of pan & zoom from react-pan-zoom npm package"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1226, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}