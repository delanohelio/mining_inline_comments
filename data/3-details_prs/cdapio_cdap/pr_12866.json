{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1MDI1MTMw", "number": 12866, "title": "[CDAP-17413] Fixes joiner in-memory input stages to show correct value when input stages change", "bodyText": "JIRA - https://cdap.atlassian.net/browse/CDAP-17413", "createdAt": "2020-11-21T00:38:30Z", "url": "https://github.com/cdapio/cdap/pull/12866", "merged": true, "mergeCommit": {"oid": "f6974e9cda3ae8b4b03f410c78332be0411616b4"}, "closed": true, "closedAt": "2020-12-13T19:17:27Z", "author": {"login": "ajainarayanan"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeg6V3gH2gAyNTI1MDI1MTMwOjM2MDdhYjA5ZTk3MWYwOThjZjBiNDQxNzFkZmVmZWM0OGIzYTg3YWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdk8gjPAFqTU0OTcwOTc2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3607ab09e971f098cf0b44171dfefec48b3a87ad", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/3607ab09e971f098cf0b44171dfefec48b3a87ad", "committedDate": "2020-11-21T00:35:39Z", "message": "[CDAP-17413] Fixes joiner in-memory input stages to show correct value when input stages change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2ODcxMTI2", "url": "https://github.com/cdapio/cdap/pull/12866#pullrequestreview-536871126", "createdAt": "2020-11-23T21:48:05Z", "commit": {"oid": "3607ab09e971f098cf0b44171dfefec48b3a87ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMTo0ODowNVrOH4grBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMTo0ODowNVrOH4grBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAxNzYwNA==", "bodyText": "Is there some store where this should be validated? Seems odd to call back when rendering.", "url": "https://github.com/cdapio/cdap/pull/12866#discussion_r529017604", "createdAt": "2020-11-23T21:48:05Z", "author": {"login": "njbriggs"}, "path": "cdap-ui/app/cdap/components/AbstractWidget/MultiStageSelector/index.tsx", "diffHunk": "@@ -72,13 +72,36 @@ const MultiStageSelectorBase: React.FC<IMultiStageSelectorProps> = ({\n       </div>\n     );\n   }\n+  const validatedValue = value\n+    .toString()\n+    .split(',')\n+    .filter((stage) => {\n+      return inputStages.find((s) => s.id === stage);\n+    })\n+    .join(',');\n+  if (validatedValue !== value) {\n+    /**\n+     * This will happen when the user configured the plugin (say joiner)\n+     * with initial two stages and then later drop one of those stages.\n+     *\n+     * Now the previously selected input stages are no longer valid.\n+     * The validatedValue will only have stages that are still input to joiner\n+     * and will update the value of the plugin automatically.\n+     *\n+     * If not for this we will show only valid stages but the actual plugin property\n+     * will have all the stages.\n+     */\n+    onChange(validatedValue);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3607ab09e971f098cf0b44171dfefec48b3a87ad"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NzA5NzY0", "url": "https://github.com/cdapio/cdap/pull/12866#pullrequestreview-549709764", "createdAt": "2020-12-11T00:08:22Z", "commit": {"oid": "3607ab09e971f098cf0b44171dfefec48b3a87ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1481, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}