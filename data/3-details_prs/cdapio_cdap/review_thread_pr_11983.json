{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwODE3MDUy", "number": 11983, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxOTozMjo0M1rODppibQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyNTo0MFrODprsqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0OTk4NzY1OnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/cdap/services/datasource/index.js", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxOTozMjo0M1rOF49b5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMTowMTo0OFrOF5AQ2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI3MTE0MQ==", "bodyText": "why do we have to pass in this.bindings? i think just passing this.bindings[hash] is good enough, or even just the hash", "url": "https://github.com/cdapio/cdap/pull/11983#discussion_r395271141", "createdAt": "2020-03-19T19:32:43Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/cdap/services/datasource/index.js", "diffHunk": "@@ -89,7 +89,7 @@ export default class Datasource {\n         delete this.bindings[hash];\n       } else {\n         if (this.bindings[hash] && this.bindings[hash].type === 'POLL') {\n-          this.bindings[hash].resource.interval = this.startClientPoll(hash, this.bindings[hash].resource.intervalTime);\n+          this.bindings[hash].resource.interval = this.startClientPoll(hash, this.bindings, this.bindings[hash].resource.intervalTime);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b5d9ff149ed69b9ecef2c0d274d01a53e475032"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI5ODEzOA==", "bodyText": "We need access to bindings[resourceId].resource for the socket requests. @ajainarayanan is there any context I'm missing here?", "url": "https://github.com/cdapio/cdap/pull/11983#discussion_r395298138", "createdAt": "2020-03-19T20:23:25Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/services/datasource/index.js", "diffHunk": "@@ -89,7 +89,7 @@ export default class Datasource {\n         delete this.bindings[hash];\n       } else {\n         if (this.bindings[hash] && this.bindings[hash].type === 'POLL') {\n-          this.bindings[hash].resource.interval = this.startClientPoll(hash, this.bindings[hash].resource.intervalTime);\n+          this.bindings[hash].resource.interval = this.startClientPoll(hash, this.bindings, this.bindings[hash].resource.intervalTime);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI3MTE0MQ=="}, "originalCommit": {"oid": "6b5d9ff149ed69b9ecef2c0d274d01a53e475032"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMxNzQ2Nw==", "bodyText": "Actually you are right, we only need the hash. Have made changes accordingly!", "url": "https://github.com/cdapio/cdap/pull/11983#discussion_r395317467", "createdAt": "2020-03-19T21:01:48Z", "author": {"login": "yukiej"}, "path": "cdap-ui/app/cdap/services/datasource/index.js", "diffHunk": "@@ -89,7 +89,7 @@ export default class Datasource {\n         delete this.bindings[hash];\n       } else {\n         if (this.bindings[hash] && this.bindings[hash].type === 'POLL') {\n-          this.bindings[hash].resource.interval = this.startClientPoll(hash, this.bindings[hash].resource.intervalTime);\n+          this.bindings[hash].resource.interval = this.startClientPoll(hash, this.bindings, this.bindings[hash].resource.intervalTime);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI3MTE0MQ=="}, "originalCommit": {"oid": "6b5d9ff149ed69b9ecef2c0d274d01a53e475032"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MDM0MTUyOnYy", "diffSide": "RIGHT", "path": "cdap-ui/app/services/cask-angular-socket-datasource/datasource.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyNTo0MFrOF5A81w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMTo0MDozMlrOF5BW4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMyODcyNw==", "bodyText": "Need to make the same change as the one in React", "url": "https://github.com/cdapio/cdap/pull/11983#discussion_r395328727", "createdAt": "2020-03-19T21:25:40Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/services/cask-angular-socket-datasource/datasource.js", "diffHunk": "@@ -211,7 +211,7 @@ var socketDataSource = angular.module(PKG.name+'.services');\n         Object.keys(bindings)\n           .filter(resourceId => bindings[resourceId].type === 'POLL')\n           .forEach(resourceId => {\n-            bindings[resourceId].resource.interval = startClientPoll(resourceId, bindings[resourceId].resource);\n+            bindings[resourceId].resource.interval = startClientPoll(resourceId, bindings, bindings[resourceId].resource);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6866f9e844950b3ee132c64dc80e80d1e1df40c3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMzNTM5Mw==", "bodyText": "disregard", "url": "https://github.com/cdapio/cdap/pull/11983#discussion_r395335393", "createdAt": "2020-03-19T21:40:32Z", "author": {"login": "elfenheart"}, "path": "cdap-ui/app/services/cask-angular-socket-datasource/datasource.js", "diffHunk": "@@ -211,7 +211,7 @@ var socketDataSource = angular.module(PKG.name+'.services');\n         Object.keys(bindings)\n           .filter(resourceId => bindings[resourceId].type === 'POLL')\n           .forEach(resourceId => {\n-            bindings[resourceId].resource.interval = startClientPoll(resourceId, bindings[resourceId].resource);\n+            bindings[resourceId].resource.interval = startClientPoll(resourceId, bindings, bindings[resourceId].resource);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMyODcyNw=="}, "originalCommit": {"oid": "6866f9e844950b3ee132c64dc80e80d1e1df40c3"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2858, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}