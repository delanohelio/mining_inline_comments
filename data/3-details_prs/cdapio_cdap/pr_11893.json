{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMDMzMjUy", "number": 11893, "title": "Fixes asserting \"Dashboard\" feature doesn't exist in navbar", "bodyText": "Long version:\n\nPreviously we used to show the page even before we fetch any namespaces\nThis allowed quickly to assert the non-existance of \"Dashboard\" feature in navbar as it won't be there in the light theme.\nThis was ok as we didn't load the HomeAction screen before asserting for Dashboard feature non-existance\n(meaning we check if the page contains \"Dashboard\" text. This won't be present as we don't wait for everything to be loaded)\nNow we changed that behavior to show a loading icon for the entire page until the namespace is fetched.\nThis way when we get the anything in the page, we made sure everything is loaded.\nThis caused the failure of test case because the HomeAction link actually has a \"Dashboard\" link\n\nFix:\n\nFix was to set the right subject (navbar) before checking if \"Dashboard\" exists.\n\nE2E test: https://builds.cask.co/browse/IT-UPD2121-1", "createdAt": "2020-02-26T06:30:45Z", "url": "https://github.com/cdapio/cdap/pull/11893", "merged": true, "mergeCommit": {"oid": "29f99056bfbb23613456a8532b411c1cbb14ab65"}, "closed": true, "closedAt": "2020-02-29T00:04:53Z", "author": {"login": "ajainarayanan"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcILSDWgFqTM2NTE0OTcwOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcI46VygFqTM2Njc0OTI4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MTQ5NzA4", "url": "https://github.com/cdapio/cdap/pull/11893#pullrequestreview-365149708", "createdAt": "2020-02-26T18:46:09Z", "commit": {"oid": "a200f4471e90a561356782ed0e9f669afc3e4c18"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad393432e8cb4483b59456f78535a904a607384b", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/ad393432e8cb4483b59456f78535a904a607384b", "committedDate": "2020-02-28T23:51:39Z", "message": "Fixes asserting \"Dashboard\" feature doesn't exist in navbar\n\nLong version:\n- Previously we used to show the page even before we fetch any namespaces\n- This allowed quickly to assert the non-existance of \"Dashboard\" feature in navbar as it won't be there in the light theme.\n- This was ok as we didn't load the HomeAction screen before asserting for Dashboard feature non-existance\n    (meaning we check if the page contains \"Dashboard\" text. This won't be present as we don't wait for everything to be loaded)\n- Now we changed that behavior to show a loading icon for the entire page until the namespace is fetched.\n- This way when we get the anything in the page, we made sure everything is loaded.\n- This caused the failure of test case because the HomeAction link actually has a \"Dashboard\" link\n\nFix:\n- Fix was to set the right subject (navbar) before checking if \"Dashboard\" exists."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a200f4471e90a561356782ed0e9f669afc3e4c18", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/a200f4471e90a561356782ed0e9f669afc3e4c18", "committedDate": "2020-02-26T06:29:20Z", "message": "Fixes asserting \"Dashboard\" feature doesn't exist in navbar\n\nLong version:\n- Previously we used to show the page even before we fetch any namespaces\n- This allowed quickly to assert the non-existance of \"Dashboard\" feature in navbar as it won't be there in the light theme.\n- This was ok as we didn't load the HomeAction screen before asserting for Dashboard feature non-existance\n    (meaning we check if the page contains \"Dashboard\" text. This won't be present as we don't wait for everything to be loaded)\n- Now we changed that behavior to show a loading icon for the entire page until the namespace is fetched.\n- This way when we get the anything in the page, we made sure everything is loaded.\n- This caused the failure of test case because the HomeAction link actually has a \"Dashboard\" link\n\nFix:\n- Fix was to set the right subject (navbar) before checking if \"Dashboard\" exists."}, "afterCommit": {"oid": "ad393432e8cb4483b59456f78535a904a607384b", "author": {"user": {"login": "ajainarayanan", "name": "Ajai"}}, "url": "https://github.com/cdapio/cdap/commit/ad393432e8cb4483b59456f78535a904a607384b", "committedDate": "2020-02-28T23:51:39Z", "message": "Fixes asserting \"Dashboard\" feature doesn't exist in navbar\n\nLong version:\n- Previously we used to show the page even before we fetch any namespaces\n- This allowed quickly to assert the non-existance of \"Dashboard\" feature in navbar as it won't be there in the light theme.\n- This was ok as we didn't load the HomeAction screen before asserting for Dashboard feature non-existance\n    (meaning we check if the page contains \"Dashboard\" text. This won't be present as we don't wait for everything to be loaded)\n- Now we changed that behavior to show a loading icon for the entire page until the namespace is fetched.\n- This way when we get the anything in the page, we made sure everything is loaded.\n- This caused the failure of test case because the HomeAction link actually has a \"Dashboard\" link\n\nFix:\n- Fix was to set the right subject (navbar) before checking if \"Dashboard\" exists."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzQ5MjQx", "url": "https://github.com/cdapio/cdap/pull/11893#pullrequestreview-366749241", "createdAt": "2020-02-28T23:55:42Z", "commit": {"oid": "ad393432e8cb4483b59456f78535a904a607384b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQyMzo1NTo0MlrOFwF-Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQyMzo1NTo0MlrOFwF-Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk3MzgwMg==", "bodyText": "nit: missing closing double paren", "url": "https://github.com/cdapio/cdap/pull/11893#discussion_r385973802", "createdAt": "2020-02-28T23:55:42Z", "author": {"login": "yukiej"}, "path": "cdap-ui/cypress/integration/navbar.spec.ts", "diffHunk": "@@ -94,7 +94,7 @@ describe('Navbar tests', () => {\n     });\n   });\n   it('Should have right features enabled/disabled in light theme', () => {\n-    cy.contains(Theme.featureNames.dashboard).should('not.exist');\n+    cy.get(`[data-cy=\"${Theme.featureNames.dashboard}`).should('not.exist');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad393432e8cb4483b59456f78535a904a607384b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzQ5Mjgy", "url": "https://github.com/cdapio/cdap/pull/11893#pullrequestreview-366749282", "createdAt": "2020-02-28T23:55:53Z", "commit": {"oid": "ad393432e8cb4483b59456f78535a904a607384b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1298, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}