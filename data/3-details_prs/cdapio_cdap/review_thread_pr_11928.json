{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0ODY2ODU0", "number": 11928, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMDoxMDowMFrODl-hwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMDoxNDo0OFrODl-kCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTQ4MzUyOnYy", "diffSide": "RIGHT", "path": "cdap-data-fabric/src/test/java/io/cdap/cdap/data2/metadata/lineage/field/FieldLineageInfoTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMDoxMDowMFrOFzK8QQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMDoxMDowMFrOFzK8QQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwMDk2MQ==", "bodyText": "nit: indentation", "url": "https://github.com/cdapio/cdap/pull/11928#discussion_r389200961", "createdAt": "2020-03-07T00:10:00Z", "author": {"login": "albertshau"}, "path": "cdap-data-fabric/src/test/java/io/cdap/cdap/data2/metadata/lineage/field/FieldLineageInfoTest.java", "diffHunk": "@@ -590,6 +591,35 @@ public void testMultiPathFieldLineage() {\n     Assert.assertEquals(expectedOperations, outgoingOperations);\n   }\n \n+  @Test\n+  public void testNonCycle() {\n+    EndPoint readEndPoint = EndPoint.of(\"ns\", \"src\");\n+    EndPoint writeEndPoint = EndPoint.of(\"ns\", \"dest\");\n+\n+    ReadOperation read = new ReadOperation(\"read\", \"read\", readEndPoint, \"a\", \"b\");\n+    TransformOperation combine = new TransformOperation(\"combine\", \"combine\",\n+                                                          Arrays.asList(InputField.of(\"read\", \"a\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "514065dbf829d87c47bd15eba19e86104f1a214d"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTQ4OTM3OnYy", "diffSide": "RIGHT", "path": "cdap-data-fabric/src/test/java/io/cdap/cdap/data2/metadata/lineage/field/FieldLineageInfoTest.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMDoxNDo0OFrOFzK_3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMjoxNToxN1rOFzMAbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwMTg4Ng==", "bodyText": "can you add a test for if the generated field comes from the sink? More specifically, something like:\nread a, b -> write a, b, c\nThis can happen if the sink always adds additional data. For example, something can write an additional 'updated_time' field or something like that.", "url": "https://github.com/cdapio/cdap/pull/11928#discussion_r389201886", "createdAt": "2020-03-07T00:14:48Z", "author": {"login": "albertshau"}, "path": "cdap-data-fabric/src/test/java/io/cdap/cdap/data2/metadata/lineage/field/FieldLineageInfoTest.java", "diffHunk": "@@ -590,6 +591,35 @@ public void testMultiPathFieldLineage() {\n     Assert.assertEquals(expectedOperations, outgoingOperations);\n   }\n \n+  @Test\n+  public void testNonCycle() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "514065dbf829d87c47bd15eba19e86104f1a214d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNzQyMQ==", "bodyText": "This kind of operation cannot be defined like this, if you like at the contract of WriteOperation: https://github.com/cdapio/cdap/blob/develop/cdap-api/src/main/java/io/cdap/cdap/api/lineage/field/WriteOperation.java#L40, the write operation can only take a list of input fields, so in order to generate c. The above operation will must look something like:\nread [a,b],\ntransform [] -> [c],\nwrite [read.a, read.b, transform.c]\nThis kind of scenario is already added in this unit test.", "url": "https://github.com/cdapio/cdap/pull/11928#discussion_r389217421", "createdAt": "2020-03-07T02:04:49Z", "author": {"login": "yaojiefeng"}, "path": "cdap-data-fabric/src/test/java/io/cdap/cdap/data2/metadata/lineage/field/FieldLineageInfoTest.java", "diffHunk": "@@ -590,6 +591,35 @@ public void testMultiPathFieldLineage() {\n     Assert.assertEquals(expectedOperations, outgoingOperations);\n   }\n \n+  @Test\n+  public void testNonCycle() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwMTg4Ng=="}, "originalCommit": {"oid": "514065dbf829d87c47bd15eba19e86104f1a214d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNzU0Mg==", "bodyText": "To be more clear, if a sink adds a column, then that sink will need to emit that generate transform, and then add the write operation.", "url": "https://github.com/cdapio/cdap/pull/11928#discussion_r389217542", "createdAt": "2020-03-07T02:05:59Z", "author": {"login": "yaojiefeng"}, "path": "cdap-data-fabric/src/test/java/io/cdap/cdap/data2/metadata/lineage/field/FieldLineageInfoTest.java", "diffHunk": "@@ -590,6 +591,35 @@ public void testMultiPathFieldLineage() {\n     Assert.assertEquals(expectedOperations, outgoingOperations);\n   }\n \n+  @Test\n+  public void testNonCycle() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwMTg4Ng=="}, "originalCommit": {"oid": "514065dbf829d87c47bd15eba19e86104f1a214d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxODQxMw==", "bodyText": "I see, \ud83d\udc4d", "url": "https://github.com/cdapio/cdap/pull/11928#discussion_r389218413", "createdAt": "2020-03-07T02:15:17Z", "author": {"login": "albertshau"}, "path": "cdap-data-fabric/src/test/java/io/cdap/cdap/data2/metadata/lineage/field/FieldLineageInfoTest.java", "diffHunk": "@@ -590,6 +591,35 @@ public void testMultiPathFieldLineage() {\n     Assert.assertEquals(expectedOperations, outgoingOperations);\n   }\n \n+  @Test\n+  public void testNonCycle() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwMTg4Ng=="}, "originalCommit": {"oid": "514065dbf829d87c47bd15eba19e86104f1a214d"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3003, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}