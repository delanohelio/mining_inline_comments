{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0OTI5MTgy", "number": 163, "title": "FM2-157: Update PersonDAO and Service", "bodyText": "https://issues.openmrs.org/browse/FM2-157\nSince i encountered new changes and it let my current PR  to have unneccesary merge conflicts i decided to create this PR to make it more clear\ncc @ibacher  @robbyoconnor  @tendomart", "createdAt": "2020-05-07T21:28:26Z", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163", "merged": true, "mergeCommit": {"oid": "0761882ef055dc1f30fe30b67732373f4a5893b0"}, "closed": true, "closedAt": "2020-05-13T13:44:16Z", "author": {"login": "sherrif10"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgJzhmgFqTQwODg5MjI1Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcg5GvygFqTQxMDkzNzgwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4ODkyMjU2", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#pullrequestreview-408892256", "createdAt": "2020-05-11T06:31:23Z", "commit": {"oid": "a0ecf9cb92bdfb1dbcc7051e137025f2c45c6884"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjozMToyM1rOGTOTYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQwNjozMToyM1rOGTOTYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgxMDQ2Nw==", "bodyText": "There's a duplication of the license header. Also, this file shouldn't be in this PR.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r422810467", "createdAt": "2020-05-11T06:31:23Z", "author": {"login": "corneliouzbett"}, "path": "omod/src/test/java/org/openmrs/module/fhir2/providers/ObservationFhirResourceProviderTest.java", "diffHunk": "@@ -1,3 +1,12 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0ecf9cb92bdfb1dbcc7051e137025f2c45c6884"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4a84e2c87bfa9d266dd2b514c53b8463f4422c2", "author": {"user": {"login": "ibacher", "name": "Ian"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/b4a84e2c87bfa9d266dd2b514c53b8463f4422c2", "committedDate": "2020-05-12T15:02:48Z", "message": "ForwardingFilter now allows the slash to be omitted"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMzI3MDQw", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#pullrequestreview-410327040", "createdAt": "2020-05-12T18:48:23Z", "commit": {"oid": "4c40f622b04e8185b78d02b710eca86e2f3c7981"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxODo0ODoyM1rOGUUSkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxODo0OTo0M1rOGUUVqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzEzOQ==", "bodyText": "This should be dao.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r423957139", "createdAt": "2020-05-12T18:48:23Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/impl/FhirPersonServiceImpl.java", "diffHunk": "@@ -17,38 +17,42 @@\n import ca.uhn.fhir.rest.param.StringOrListParam;\n import ca.uhn.fhir.rest.param.TokenOrListParam;\n import lombok.AccessLevel;\n+import lombok.Getter;\n import lombok.Setter;\n import org.hl7.fhir.r4.model.Person;\n import org.openmrs.module.fhir2.api.FhirPersonService;\n+import org.openmrs.module.fhir2.api.dao.FhirDao;\n import org.openmrs.module.fhir2.api.dao.FhirPersonDao;\n+import org.openmrs.module.fhir2.api.translators.OpenmrsFhirTranslator;\n import org.openmrs.module.fhir2.api.translators.PersonTranslator;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n import org.springframework.transaction.annotation.Transactional;\n \n @Component\n @Transactional\n+@Getter(AccessLevel.PROTECTED)\n @Setter(AccessLevel.PACKAGE)\n-public class FhirPersonServiceImpl implements FhirPersonService {\n+public class FhirPersonServiceImpl extends BaseFhirService<Person, org.openmrs.Person> implements FhirPersonService {\n \t\n \t@Autowired\n-\tprivate FhirPersonDao fhirPersonDao;\n+\tprivate FhirPersonDao Dao;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c40f622b04e8185b78d02b710eca86e2f3c7981"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzM5NA==", "bodyText": "You should be able to remove this function altogether", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r423957394", "createdAt": "2020-05-12T18:48:50Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/impl/FhirPersonServiceImpl.java", "diffHunk": "@@ -17,38 +17,42 @@\n import ca.uhn.fhir.rest.param.StringOrListParam;\n import ca.uhn.fhir.rest.param.TokenOrListParam;\n import lombok.AccessLevel;\n+import lombok.Getter;\n import lombok.Setter;\n import org.hl7.fhir.r4.model.Person;\n import org.openmrs.module.fhir2.api.FhirPersonService;\n+import org.openmrs.module.fhir2.api.dao.FhirDao;\n import org.openmrs.module.fhir2.api.dao.FhirPersonDao;\n+import org.openmrs.module.fhir2.api.translators.OpenmrsFhirTranslator;\n import org.openmrs.module.fhir2.api.translators.PersonTranslator;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n import org.springframework.transaction.annotation.Transactional;\n \n @Component\n @Transactional\n+@Getter(AccessLevel.PROTECTED)\n @Setter(AccessLevel.PACKAGE)\n-public class FhirPersonServiceImpl implements FhirPersonService {\n+public class FhirPersonServiceImpl extends BaseFhirService<Person, org.openmrs.Person> implements FhirPersonService {\n \t\n \t@Autowired\n-\tprivate FhirPersonDao fhirPersonDao;\n+\tprivate FhirPersonDao Dao;\n \t\n \t@Autowired\n-\tprivate PersonTranslator personTranslator;\n+\tprivate PersonTranslator translator;\n \t\n \t@Override\n \t@Transactional(readOnly = true)\n-\tpublic Person getPersonByUuid(String uuid) {\n-\t\treturn personTranslator.toFhirResource(fhirPersonDao.getPersonByUuid(uuid));\n+\tpublic Person get(String uuid) {\n+\t\treturn translator.toFhirResource(Dao.get(uuid));\n \t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c40f622b04e8185b78d02b710eca86e2f3c7981"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzcxMg==", "bodyText": "Why did you rename this?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r423957712", "createdAt": "2020-05-12T18:49:20Z", "author": {"login": "ibacher"}, "path": "api/src/test/java/org/openmrs/module/fhir2/api/impl/FhirPersonServiceImplTest.java", "diffHunk": "@@ -79,7 +79,7 @@\n \tprivate org.openmrs.Person person;\n \t\n \t@Mock\n-\tprivate FhirPersonDao dao;\n+\tprivate FhirPersonDao fhirPersonDao;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c40f622b04e8185b78d02b710eca86e2f3c7981"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzkyOQ==", "bodyText": "Please remove this from this PR.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r423957929", "createdAt": "2020-05-12T18:49:43Z", "author": {"login": "ibacher"}, "path": "omod/src/test/java/org/openmrs/module/fhir2/providers/ObservationFhirResourceProviderTest.java", "diffHunk": "@@ -3,7 +3,6 @@\n  * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n  * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n  * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n- *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c40f622b04e8185b78d02b710eca86e2f3c7981"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "978f12ee02a231193c1b6d70594cd179954d2948", "author": {"user": {"login": "sherrif10", "name": "MAGEMBE SHARIF"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/978f12ee02a231193c1b6d70594cd179954d2948", "committedDate": "2020-05-12T20:16:51Z", "message": "FM2-157 Update: PersonDAO and Service\n\nhttps://issues.openmrs.org/browse/FM2-157"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d06a0d7b34b235e8e055b5350d057c6f124b435c", "author": {"user": {"login": "sherrif10", "name": "MAGEMBE SHARIF"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/d06a0d7b34b235e8e055b5350d057c6f124b435c", "committedDate": "2020-05-12T20:18:25Z", "message": "Merge branch 'master' into FM2-157"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8faca5b3575f22689b5fdc37e1b81b42d32d0dff", "author": {"user": {"login": "ibacher", "name": "Ian"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/8faca5b3575f22689b5fdc37e1b81b42d32d0dff", "committedDate": "2020-05-13T13:22:32Z", "message": "Revert ObservationFhirResourceProviderTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff987063de2c23975ce394e95f2105b7a1e304b0", "author": {"user": {"login": "ibacher", "name": "Ian"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/ff987063de2c23975ce394e95f2105b7a1e304b0", "committedDate": "2020-05-13T13:22:41Z", "message": "Revert config.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0803d022cc7995037428457691af6d40d10efe3b", "author": {"user": {"login": "ibacher", "name": "Ian"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/0803d022cc7995037428457691af6d40d10efe3b", "committedDate": "2020-05-13T13:23:00Z", "message": "Merge branch 'master' into FM2-157"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwOTM3ODAx", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#pullrequestreview-410937801", "createdAt": "2020-05-13T13:43:37Z", "commit": {"oid": "0803d022cc7995037428457691af6d40d10efe3b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4311, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}