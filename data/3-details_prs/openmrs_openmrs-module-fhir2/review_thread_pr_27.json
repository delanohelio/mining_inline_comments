{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzMTY2Njcy", "number": 27, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNToyNTozMFrODYNi3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxOTowMToyNlrODYR4kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NzE0MzM1OnYy", "diffSide": "RIGHT", "path": "api/src/test/java/org/openmrs/module/fhir2/api/translators/impl/LocationTelecomTranslatorImplTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNToyNTozMFrOFd8E6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNToyNTozMFrOFd8E6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkzNzMyMg==", "bodyText": "Prefer this, It's more readable\nassertThat(contactPoint.getId(), notNullValue())\nassertThat(contactPoint.getId(), equalTo(LOCATION_ATTRIBUTE_UUID))", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/27#discussion_r366937322", "createdAt": "2020-01-15T15:25:30Z", "author": {"login": "corneliouzbett"}, "path": "api/src/test/java/org/openmrs/module/fhir2/api/translators/impl/LocationTelecomTranslatorImplTest.java", "diffHunk": "@@ -0,0 +1,167 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.translators.impl;\n+\n+import org.hl7.fhir.r4.model.ContactPoint;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.runners.MockitoJUnitRunner;\n+import org.openmrs.LocationAttribute;\n+import org.openmrs.LocationAttributeType;\n+import org.openmrs.api.LocationService;\n+import org.openmrs.module.fhir2.FhirConstants;\n+import org.openmrs.module.fhir2.api.FhirGlobalPropertyService;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.mockito.Mockito.when;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public class LocationTelecomTranslatorImplTest {\n+\t\n+\tprivate static final String CONTACT_POINT_ID = \"c0938432-1691-11df-97a5-7038c432aabf\";\n+\t\n+\tprivate static final String CONTACT_POINT_VALUE = \"Pipeline\";\n+\t\n+\tprivate static final String LOCATION_ATTRIBUTE_UUID = \"c0938432-1691-11df-97a5-7038c432abcd\";\n+\t\n+\tprivate static final String LOCATION_ATTRIBUTE_VALUE = \"Neiya street\";\n+\t\n+\tprivate static final String LOCATION_ATTRIBUTE_TYPE_UUID = \"abcde432-1691-11df-97a5-7038c432abcd\";\n+\t\n+\tprivate static final String LOCATION_ATTRIBUTE_TYPE_NAME = \"street name\";\n+\t\n+\tprivate static final String TEST_LOCATION_ATTRIBUTE_UUID = \"c0938432-1691-1111-97a5-7038c432abcd\";\n+\t\n+\tprivate static final String TEST_LOCATION_ATTRIBUTE_VALUE = \"Ngeria street\";\n+\t\n+\t@Mock\n+\tprivate LocationService locationService;\n+\t\n+\t@Mock\n+\tprivate FhirGlobalPropertyService propertyService;\n+\t\n+\tprivate LocationTelecomTranslatorImpl translator;\n+\t\n+\tprivate LocationAttribute locationAttribute;\n+\t\n+\tprivate ContactPoint contactPoint;\n+\t\n+\t@Before\n+\tpublic void setup() {\n+\t\ttranslator = new LocationTelecomTranslatorImpl();\n+\t\ttranslator.setLocationService(locationService);\n+\t\ttranslator.setGlobalPropertyService(propertyService);\n+\t\t\n+\t\tlocationAttribute = new LocationAttribute();\n+\t\tcontactPoint = new ContactPoint();\n+\t}\n+\t\n+\t@Test\n+\tpublic void toFhirResource_shouldTranslateUuidToId() {\n+\t\tlocationAttribute.setUuid(LOCATION_ATTRIBUTE_UUID);\n+\t\tlocationAttribute.setValue(LOCATION_ATTRIBUTE_VALUE);\n+\t\tcontactPoint = translator.toFhirResource(locationAttribute);\n+\t\tassertNotNull(contactPoint.getId());\n+\t\tassertEquals(contactPoint.getId(), LOCATION_ATTRIBUTE_UUID);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed5af414628a06c6a87b5460fd75603670199b52"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NzE1MzEwOnYy", "diffSide": "RIGHT", "path": "api/src/test/java/org/openmrs/module/fhir2/api/translators/impl/LocationTelecomTranslatorImplTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNToyNzo1MFrOFd8K1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNToyNzo1MFrOFd8K1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjkzODgzNw==", "bodyText": "assertThat(locationAttribute.getUuid(), notNullValue())", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/27#discussion_r366938837", "createdAt": "2020-01-15T15:27:50Z", "author": {"login": "corneliouzbett"}, "path": "api/src/test/java/org/openmrs/module/fhir2/api/translators/impl/LocationTelecomTranslatorImplTest.java", "diffHunk": "@@ -0,0 +1,167 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.translators.impl;\n+\n+import org.hl7.fhir.r4.model.ContactPoint;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.runners.MockitoJUnitRunner;\n+import org.openmrs.LocationAttribute;\n+import org.openmrs.LocationAttributeType;\n+import org.openmrs.api.LocationService;\n+import org.openmrs.module.fhir2.FhirConstants;\n+import org.openmrs.module.fhir2.api.FhirGlobalPropertyService;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.mockito.Mockito.when;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public class LocationTelecomTranslatorImplTest {\n+\t\n+\tprivate static final String CONTACT_POINT_ID = \"c0938432-1691-11df-97a5-7038c432aabf\";\n+\t\n+\tprivate static final String CONTACT_POINT_VALUE = \"Pipeline\";\n+\t\n+\tprivate static final String LOCATION_ATTRIBUTE_UUID = \"c0938432-1691-11df-97a5-7038c432abcd\";\n+\t\n+\tprivate static final String LOCATION_ATTRIBUTE_VALUE = \"Neiya street\";\n+\t\n+\tprivate static final String LOCATION_ATTRIBUTE_TYPE_UUID = \"abcde432-1691-11df-97a5-7038c432abcd\";\n+\t\n+\tprivate static final String LOCATION_ATTRIBUTE_TYPE_NAME = \"street name\";\n+\t\n+\tprivate static final String TEST_LOCATION_ATTRIBUTE_UUID = \"c0938432-1691-1111-97a5-7038c432abcd\";\n+\t\n+\tprivate static final String TEST_LOCATION_ATTRIBUTE_VALUE = \"Ngeria street\";\n+\t\n+\t@Mock\n+\tprivate LocationService locationService;\n+\t\n+\t@Mock\n+\tprivate FhirGlobalPropertyService propertyService;\n+\t\n+\tprivate LocationTelecomTranslatorImpl translator;\n+\t\n+\tprivate LocationAttribute locationAttribute;\n+\t\n+\tprivate ContactPoint contactPoint;\n+\t\n+\t@Before\n+\tpublic void setup() {\n+\t\ttranslator = new LocationTelecomTranslatorImpl();\n+\t\ttranslator.setLocationService(locationService);\n+\t\ttranslator.setGlobalPropertyService(propertyService);\n+\t\t\n+\t\tlocationAttribute = new LocationAttribute();\n+\t\tcontactPoint = new ContactPoint();\n+\t}\n+\t\n+\t@Test\n+\tpublic void toFhirResource_shouldTranslateUuidToId() {\n+\t\tlocationAttribute.setUuid(LOCATION_ATTRIBUTE_UUID);\n+\t\tlocationAttribute.setValue(LOCATION_ATTRIBUTE_VALUE);\n+\t\tcontactPoint = translator.toFhirResource(locationAttribute);\n+\t\tassertNotNull(contactPoint.getId());\n+\t\tassertEquals(contactPoint.getId(), LOCATION_ATTRIBUTE_UUID);\n+\t}\n+\t\n+\t@Test\n+\tpublic void toFhirResource_shouldTranslateValueToContactPointValue() {\n+\t\tlocationAttribute.setUuid(LOCATION_ATTRIBUTE_UUID);\n+\t\tlocationAttribute.setValue(LOCATION_ATTRIBUTE_VALUE);\n+\t\tcontactPoint = translator.toFhirResource(locationAttribute);\n+\t\tassertNotNull(contactPoint.getValue());\n+\t\tassertEquals(contactPoint.getValue(), LOCATION_ATTRIBUTE_VALUE);\n+\t}\n+\t\n+\t@Test\n+\tpublic void toOpenmrsType_shouldTranslateIdToUuid() {\n+\t\tcontactPoint.setId(CONTACT_POINT_ID);\n+\t\tcontactPoint.setValue(CONTACT_POINT_VALUE);\n+\t\tlocationAttribute = translator.toOpenmrsType(contactPoint);\n+\t\tassertNotNull(locationAttribute.getUuid());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed5af414628a06c6a87b5460fd75603670199b52"}, "originalPosition": 92}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2NzE3MDQ1OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/LocationTranslatorImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNTozMjowNFrOFd8VlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxNTozMjowNFrOFd8VlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njk0MTU4OA==", "bodyText": "Declared but not used? You should probably remove this", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/27#discussion_r366941588", "createdAt": "2020-01-15T15:32:04Z", "author": {"login": "corneliouzbett"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/LocationTranslatorImpl.java", "diffHunk": "@@ -11,20 +11,45 @@\n \n import lombok.AccessLevel;\n import lombok.Setter;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.hl7.fhir.r4.model.ContactPoint;\n import org.hl7.fhir.r4.model.Location;\n+import org.openmrs.LocationAttribute;\n+import org.openmrs.LocationAttributeType;\n+import org.openmrs.api.LocationService;\n+import org.openmrs.module.fhir2.FhirConstants;\n+import org.openmrs.module.fhir2.api.FhirGlobalPropertyService;\n import org.openmrs.module.fhir2.api.translators.LocationAddressTranslator;\n+import org.openmrs.module.fhir2.api.translators.LocationTelecomTranslator;\n import org.openmrs.module.fhir2.api.translators.LocationTranslator;\n import org.springframework.stereotype.Component;\n \n import javax.inject.Inject;\n+import javax.validation.constraints.NotNull;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n \n @Component\n @Setter(AccessLevel.PACKAGE)\n public class LocationTranslatorImpl implements LocationTranslator {\n \t\n+\tprivate static Log log = LogFactory.getLog(LocationAddressTranslatorImpl.class);\n+\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed5af414628a06c6a87b5460fd75603670199b52"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2Nzg1NDI1OnYy", "diffSide": "RIGHT", "path": "omod/src/main/java/org/openmrs/module/fhir2/web/servlet/FhirRestServlet.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxOTowMToyNlrOFeDC-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNVQxOToxMToxOVrOFeDUPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA1MTUxMw==", "bodyText": "Can you remove this file from this PR? Thanks!", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/27#discussion_r367051513", "createdAt": "2020-01-15T19:01:26Z", "author": {"login": "ibacher"}, "path": "omod/src/main/java/org/openmrs/module/fhir2/web/servlet/FhirRestServlet.java", "diffHunk": "@@ -35,10 +35,10 @@\n public class FhirRestServlet extends RestfulServer {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a7f024502061f334ea923c8daca3bd7a4523804"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA1NTkzNA==", "bodyText": "done \ud83d\udc4d", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/27#discussion_r367055934", "createdAt": "2020-01-15T19:11:19Z", "author": {"login": "jecihjoy"}, "path": "omod/src/main/java/org/openmrs/module/fhir2/web/servlet/FhirRestServlet.java", "diffHunk": "@@ -35,10 +35,10 @@\n public class FhirRestServlet extends RestfulServer {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzA1MTUxMw=="}, "originalCommit": {"oid": "4a7f024502061f334ea923c8daca3bd7a4523804"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1200, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}