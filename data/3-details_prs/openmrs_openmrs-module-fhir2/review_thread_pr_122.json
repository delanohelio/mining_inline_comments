{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNDA0Nzc0", "number": 122, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNToyMDowOFrODqbKPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNToyODoxNlrODqbZvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1ODExNzczOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/CohortListEntryTranslatorImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNToyMDowOFrOF6KWAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxODo0OTozMFrOF6Td2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUzMTIwMg==", "bodyText": "You shouldn't be returning null. Instead\nthrow new NotImplementedException();", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/122#discussion_r396531202", "createdAt": "2020-03-23T15:20:08Z", "author": {"login": "corneliouzbett"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/CohortListEntryTranslatorImpl.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.translators.impl;\n+\n+import java.util.List;\n+\n+import org.hl7.fhir.r4.model.ListResource;\n+import org.openmrs.Cohort;\n+import org.openmrs.module.fhir2.api.translators.ListEntryTranslator;\n+import org.springframework.stereotype.Component;\n+\n+@Component\n+public class CohortListEntryTranslatorImpl implements ListEntryTranslator<Cohort> {\n+\t\n+\t@Override\n+\tpublic List<ListResource.ListEntryComponent> toFhirResource(Cohort cohort) {\n+\t\treturn null;\n+\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c61a154ee911b898c58b6d1dfad2725dfc2e2548"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY3ODEzOQ==", "bodyText": "The suppose of this class is only to create a base from which we can provided implementation in the other supported versions", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/122#discussion_r396678139", "createdAt": "2020-03-23T18:45:07Z", "author": {"login": "jecihjoy"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/CohortListEntryTranslatorImpl.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.translators.impl;\n+\n+import java.util.List;\n+\n+import org.hl7.fhir.r4.model.ListResource;\n+import org.openmrs.Cohort;\n+import org.openmrs.module.fhir2.api.translators.ListEntryTranslator;\n+import org.springframework.stereotype.Component;\n+\n+@Component\n+public class CohortListEntryTranslatorImpl implements ListEntryTranslator<Cohort> {\n+\t\n+\t@Override\n+\tpublic List<ListResource.ListEntryComponent> toFhirResource(Cohort cohort) {\n+\t\treturn null;\n+\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUzMTIwMg=="}, "originalCommit": {"oid": "c61a154ee911b898c58b6d1dfad2725dfc2e2548"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY4MDY2Ng==", "bodyText": "Then just use an interface instead", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/122#discussion_r396680666", "createdAt": "2020-03-23T18:49:30Z", "author": {"login": "corneliouzbett"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/CohortListEntryTranslatorImpl.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.translators.impl;\n+\n+import java.util.List;\n+\n+import org.hl7.fhir.r4.model.ListResource;\n+import org.openmrs.Cohort;\n+import org.openmrs.module.fhir2.api.translators.ListEntryTranslator;\n+import org.springframework.stereotype.Component;\n+\n+@Component\n+public class CohortListEntryTranslatorImpl implements ListEntryTranslator<Cohort> {\n+\t\n+\t@Override\n+\tpublic List<ListResource.ListEntryComponent> toFhirResource(Cohort cohort) {\n+\t\treturn null;\n+\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUzMTIwMg=="}, "originalCommit": {"oid": "c61a154ee911b898c58b6d1dfad2725dfc2e2548"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1ODEyNjE4OnYy", "diffSide": "RIGHT", "path": "api/src/test/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImplTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNToyMTo1NFrOF6KbYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNToyMTo1NFrOF6KbYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUzMjU3OA==", "bodyText": "one-liner\nassertThat(dao.getPatientById(0), nullValue());", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/122#discussion_r396532578", "createdAt": "2020-03-23T15:21:54Z", "author": {"login": "corneliouzbett"}, "path": "api/src/test/java/org/openmrs/module/fhir2/api/dao/impl/FhirPatientDaoImplTest.java", "diffHunk": "@@ -161,6 +161,22 @@ public void setup() throws Exception {\n \t\t}\n \t}\n \t\n+\t@Test\n+\tpublic void getPatientById_shouldRetrievePatientById() {\n+\t\tPatient result = dao.getPatientById(4);\n+\t\t\n+\t\tassertThat(result, notNullValue());\n+\t\tassertThat(result.getUuid(), equalTo(PATIENT_UUID));\n+\t\tassertThat(result.getId(), equalTo(4));\n+\t}\n+\t\n+\t@Test\n+\tpublic void getPatientById_shouldReturnNullIfPatientNotFound() {\n+\t\tPatient result = dao.getPatientById(0);\n+\t\t\n+\t\tassertThat(result, nullValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c61a154ee911b898c58b6d1dfad2725dfc2e2548"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1ODE1NzQxOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/ListTranslatorImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNToyODoxNlrOF6KvBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxODo0MTo0NFrOF6TMOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUzNzYwNw==", "bodyText": "It's preferred to use list.addEntry(listEntryComponent);", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/122#discussion_r396537607", "createdAt": "2020-03-23T15:28:16Z", "author": {"login": "corneliouzbett"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/ListTranslatorImpl.java", "diffHunk": "@@ -48,6 +54,8 @@ public ListResource toFhirResource(Cohort cohort) {\n \t\t\tlist.setStatus(ListResource.ListStatus.RETIRED);\n \t\t}\n \t\t\n+\t\tlist.setEntry(listEntryTranslator.toFhirResource(cohort));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c61a154ee911b898c58b6d1dfad2725dfc2e2548"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU0MjQxNQ==", "bodyText": "So your listEntryTranslator should return listEntryComponent instead of a list of listEntryComponent\nmodify your listEntryComponentTranslator::toFhirResource\nListResource.ListEntryComponent entry = new ListResource.ListEntryComponent();\nfor (CohortMembership member : cohort.getMemberships()) {\n\tif (!member.getVoided() && (member.getEndDate() == null || member.getEndDate().after(new Date()))) {\t\t\t \n                 entry.setItem(patientReferenceTranslator.toFhirResource(patientDao.getPatientById(member.getPatientId())));\n\t\t entry.setDate(member.getStartDate());\n\t\t}\n\t}\nreturn entry;", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/122#discussion_r396542415", "createdAt": "2020-03-23T15:34:26Z", "author": {"login": "corneliouzbett"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/ListTranslatorImpl.java", "diffHunk": "@@ -48,6 +54,8 @@ public ListResource toFhirResource(Cohort cohort) {\n \t\t\tlist.setStatus(ListResource.ListStatus.RETIRED);\n \t\t}\n \t\t\n+\t\tlist.setEntry(listEntryTranslator.toFhirResource(cohort));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUzNzYwNw=="}, "originalCommit": {"oid": "c61a154ee911b898c58b6d1dfad2725dfc2e2548"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY3NjE1NQ==", "bodyText": "I'm already returning a list after adding list entries so in this case list.setEntry() is the suitable method to use. The reason for returning a list is because I don't have an option of passing CohortMember to the translator since it doesn't exist in 2.0.5. This means I can only pass Cohort  and process all the items in one place hence returning a list", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/122#discussion_r396676155", "createdAt": "2020-03-23T18:41:44Z", "author": {"login": "jecihjoy"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/ListTranslatorImpl.java", "diffHunk": "@@ -48,6 +54,8 @@ public ListResource toFhirResource(Cohort cohort) {\n \t\t\tlist.setStatus(ListResource.ListStatus.RETIRED);\n \t\t}\n \t\t\n+\t\tlist.setEntry(listEntryTranslator.toFhirResource(cohort));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUzNzYwNw=="}, "originalCommit": {"oid": "c61a154ee911b898c58b6d1dfad2725dfc2e2548"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1140, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}