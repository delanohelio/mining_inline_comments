{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMTA1MjI5", "number": 235, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwNzo1NTozMlrOEJk8bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwNzo1ODo0NFrOEJlAxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NDc3OTMyOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/providers/r3/MedicationFhirResourceProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwNzo1NTozMlrOGqI4Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMTo1NDozN1rOGqNWxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjgzODgxOQ==", "bodyText": "import org.hl7.fhir.dstu3.model.OperationOutcome;", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/235#discussion_r446838819", "createdAt": "2020-06-29T07:55:32Z", "author": {"login": "corneliouzbett"}, "path": "api/src/main/java/org/openmrs/module/fhir2/providers/r3/MedicationFhirResourceProvider.java", "diffHunk": "@@ -22,8 +22,8 @@\n import org.hl7.fhir.convertors.conv30_40.Medication30_40;\n import org.hl7.fhir.dstu3.model.IdType;\n import org.hl7.fhir.dstu3.model.Medication;\n-import org.hl7.fhir.dstu3.model.OperationOutcome;\n import org.hl7.fhir.instance.model.api.IBaseResource;\n+import org.hl7.fhir.r4.model.OperationOutcome;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efe267ecf1f3fa5c01919d34074ac0507a2ac730"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjkxMjE5OA==", "bodyText": "done", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/235#discussion_r446912198", "createdAt": "2020-06-29T11:54:37Z", "author": {"login": "Akayeshmantha"}, "path": "api/src/main/java/org/openmrs/module/fhir2/providers/r3/MedicationFhirResourceProvider.java", "diffHunk": "@@ -22,8 +22,8 @@\n import org.hl7.fhir.convertors.conv30_40.Medication30_40;\n import org.hl7.fhir.dstu3.model.IdType;\n import org.hl7.fhir.dstu3.model.Medication;\n-import org.hl7.fhir.dstu3.model.OperationOutcome;\n import org.hl7.fhir.instance.model.api.IBaseResource;\n+import org.hl7.fhir.r4.model.OperationOutcome;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjgzODgxOQ=="}, "originalCommit": {"oid": "efe267ecf1f3fa5c01919d34074ac0507a2ac730"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NDc4MjI5OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/providers/r3/MedicationFhirResourceProvider.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwNzo1NjoyNVrOGqI5-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwNzo1NjoyNVrOGqI5-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjgzOTI4OQ==", "bodyText": "return OperationOutcome30_40.convertOperationOutcome(FhirProviderUtils.buildDelete(medication));", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/235#discussion_r446839289", "createdAt": "2020-06-29T07:56:25Z", "author": {"login": "corneliouzbett"}, "path": "api/src/main/java/org/openmrs/module/fhir2/providers/r3/MedicationFhirResourceProvider.java", "diffHunk": "@@ -87,9 +87,7 @@ public OperationOutcome deleteMedication(@IdParam @NotNull IdType id) {\n \t\tif (medication == null) {\n \t\t\tthrow new ResourceNotFoundException(\"Could not find medication to update with id \" + id.getIdPart());\n \t\t}\n-\t\tOperationOutcome retVal = new OperationOutcome();\n-\t\tretVal.setId(id.getIdPart());\n-\t\tretVal.getText().setDivAsString(\"Deleted successfully\");\n-\t\treturn retVal;\n+\t\t\n+\t\treturn FhirProviderUtils.buildDelete(medication);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efe267ecf1f3fa5c01919d34074ac0507a2ac730"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NDc5MDQ0OnYy", "diffSide": "RIGHT", "path": "api/src/test/java/org/openmrs/module/fhir2/providers/r3/MedicationFhirResourceProviderTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwNzo1ODo0NFrOGqI-2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwNzo1ODo0NFrOGqI-2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg0MDUzOA==", "bodyText": "Add more assertions i.e\nassertThat(result.getIssueFirstRep().getSeverity(), equalTo(OperationOutcome.IssueSeverity.INFORMATION));\nassertThat(result.getIssueFirstRep().getDetails().getCodingFirstRep().getCode(), equalTo(\"MSG_DELETED\"));", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/235#discussion_r446840538", "createdAt": "2020-06-29T07:58:44Z", "author": {"login": "corneliouzbett"}, "path": "api/src/test/java/org/openmrs/module/fhir2/providers/r3/MedicationFhirResourceProviderTest.java", "diffHunk": "@@ -213,22 +213,18 @@ public void searchForMedication_shouldReturnMatchingBundleOfMedicationByIngredie\n \t//\t}\n \t\n \t@Test\n-\tpublic void shouldDeleteMedication() {\n-\t\torg.hl7.fhir.r4.model.Medication med = medication;\n-\t\tmed.setStatus(org.hl7.fhir.r4.model.Medication.MedicationStatus.INACTIVE);\n-\t\t\n-\t\twhen(fhirMedicationService.delete(MEDICATION_UUID)).thenReturn(med);\n+\tpublic void deleteMedication_shouldDeleteRequestedMedication() {\n+\t\twhen(fhirMedicationService.delete(MEDICATION_UUID)).thenReturn(medication);\n \t\t\n \t\tOperationOutcome result = resourceProvider.deleteMedication(new IdType().setValue(MEDICATION_UUID));\n \t\tassertThat(result, CoreMatchers.notNullValue());\n-\t\tassertThat(result.getId(), equalTo(MEDICATION_UUID));\n+\t\tassertThat(result.getIssue(), notNullValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efe267ecf1f3fa5c01919d34074ac0507a2ac730"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1000, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}