{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4MzQ1MzU2", "number": 288, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNzoxNzo0N1rOEY7N2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODoyNDo1OFrOEap5YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTcxNDgxOnYy", "diffSide": "RIGHT", "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/MedicationRequest.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNzoxNzo0N1rOHBdDOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNzoxNzo0N1rOHBdDOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI4NjU4Nw==", "bodyText": "thanks @ShivanshRakesh how does the entire pr look to you @ibacher", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r471286587", "createdAt": "2020-08-17T07:17:47Z", "author": {"login": "HerbertYiga"}, "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/MedicationRequest.html", "diffHunk": "@@ -242,8 +244,14 @@\n                     <tr>\n                         <td>*</td>\n                         <td>\n-                            <th:block th:if=\"${resource.substitution.allowed}\"\n-                                      th:narrative=\"${resource.substitution.allowed}\"></th:block>\n+                            <th:block th:if=\"${fhirVersion} eq 'R4'\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e878224c82cb250b2c4faecbf92d894d2ed3ac92"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2Mzg0Mzc4OnYy", "diffSide": "RIGHT", "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODoyMzozMlrOHEN8ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODo1OToxOFrOHEPJbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDg5OQ==", "bodyText": "Are you sure about the logic here? R4 definitely has clinicalStatus and verificationStatus for AllergyIntolerance.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474184899", "createdAt": "2020-08-20T18:23:32Z", "author": {"login": "ibacher"}, "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "diffHunk": "@@ -40,22 +40,22 @@\n         <th:block th:unless=\"${fhirVersion} eq 'R4'\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e878224c82cb250b2c4faecbf92d894d2ed3ac92"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5MDM1Mw==", "bodyText": "@ibacher Yeah, but the type has been changed from code in R3 to CodableConcept in R4. Since code needs th:text, I had to separate out R3 and R4 here.\nThe part for R4 is there above in line 30.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474190353", "createdAt": "2020-08-20T18:33:14Z", "author": {"login": "ShivanshRakesh"}, "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "diffHunk": "@@ -40,22 +40,22 @@\n         <th:block th:unless=\"${fhirVersion} eq 'R4'\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDg5OQ=="}, "originalCommit": {"oid": "e878224c82cb250b2c4faecbf92d894d2ed3ac92"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5MTU3Ng==", "bodyText": "Ok... but I actually prefer for these kinds of things that we'd do \"${fhirVersion} eq 'DSTU3'\" rather than this as future versions of FHIR are going to be based on R4. In other words, this is treating R4 as the exceptional case where as it's DSTU3 support that's the exceptional case.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474191576", "createdAt": "2020-08-20T18:35:25Z", "author": {"login": "ibacher"}, "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "diffHunk": "@@ -40,22 +40,22 @@\n         <th:block th:unless=\"${fhirVersion} eq 'R4'\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDg5OQ=="}, "originalCommit": {"oid": "e878224c82cb250b2c4faecbf92d894d2ed3ac92"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5MzMwNQ==", "bodyText": "Okay, so I guess changing all R3->R4 diffs to \"${fhirVersion} eq 'DSTU3'\" would do right?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474193305", "createdAt": "2020-08-20T18:38:43Z", "author": {"login": "ShivanshRakesh"}, "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "diffHunk": "@@ -40,22 +40,22 @@\n         <th:block th:unless=\"${fhirVersion} eq 'R4'\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDg5OQ=="}, "originalCommit": {"oid": "e878224c82cb250b2c4faecbf92d894d2ed3ac92"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIwNDUyNA==", "bodyText": "Yes", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474204524", "createdAt": "2020-08-20T18:59:18Z", "author": {"login": "ibacher"}, "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "diffHunk": "@@ -40,22 +40,22 @@\n         <th:block th:unless=\"${fhirVersion} eq 'R4'\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDg5OQ=="}, "originalCommit": {"oid": "e878224c82cb250b2c4faecbf92d894d2ed3ac92"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2Mzg0ODY0OnYy", "diffSide": "RIGHT", "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODoyNDo1OFrOHEN_yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxODozNTo0OFrOHEOXrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NTY3NQ==", "bodyText": "assertedDate is only available in R3. R5 and beyond presumably use the R4 property names by default.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474185675", "createdAt": "2020-08-20T18:24:58Z", "author": {"login": "ibacher"}, "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "diffHunk": "@@ -81,13 +81,13 @@\n             <td>Onset:</td>\n             <td th:narrative=\"${resource.onset}\"></td>\n         </tr>\n-        <th:block th:if=\"${fhirVersion} eq 'DSTU3'\">\n+        <th:block th:unless=\"${fhirVersion} eq 'R4'\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e878224c82cb250b2c4faecbf92d894d2ed3ac92"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5MTc4OA==", "bodyText": "Okay so I will change it back to th:if=\"${fhirVersion} eq 'DSTU3'\".", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474191788", "createdAt": "2020-08-20T18:35:48Z", "author": {"login": "ShivanshRakesh"}, "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "diffHunk": "@@ -81,13 +81,13 @@\n             <td>Onset:</td>\n             <td th:narrative=\"${resource.onset}\"></td>\n         </tr>\n-        <th:block th:if=\"${fhirVersion} eq 'DSTU3'\">\n+        <th:block th:unless=\"${fhirVersion} eq 'R4'\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NTY3NQ=="}, "originalCommit": {"oid": "e878224c82cb250b2c4faecbf92d894d2ed3ac92"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 846, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}