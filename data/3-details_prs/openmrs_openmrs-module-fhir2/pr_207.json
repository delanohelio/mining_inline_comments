{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzOTcxMDI2", "number": 207, "title": "FM2-207: Create default narratives for Encounter, Observation and Location", "bodyText": "Description of what I changed\nAdded OpenMRS Narratives for the following resources:\n\nEncounter\nObservation\nLocation\n\nIssue I worked on\n\n\n\n\nsee https://issues.openmrs.org/browse/FM2-207\nChecklist: I completed these to help reviewers :)\n\n\n My IDE is configured to follow the code style of this project.\n\n\n I have added tests to cover my changes. (If you refactored\nexisting code that was well tested you do not have to add tests)\n\n\n I ran mvn clean package right before creating this pull request and\nadded all formatting changes to my commit.\n\n\n All new and existing tests passed.\n\n\n My pull request is based on the latest changes of the master branch.", "createdAt": "2020-06-13T07:18:36Z", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/207", "merged": true, "mergeCommit": {"oid": "58038466e61d81c4a7b81e5315425d047129fb4a"}, "closed": true, "closedAt": "2020-06-29T16:53:49Z", "author": {"login": "ShivanshRakesh"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcriroHgBqjM0NDUwNTU3NjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwD_njgFqTQzOTMzMDIxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1cb2b4b0240ebab0a043c2640566a1765904b8cf", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/1cb2b4b0240ebab0a043c2640566a1765904b8cf", "committedDate": "2020-06-13T07:15:05Z", "message": "FM2-194: Created OpenMRS Narratives for Encounter, Observation, Location"}, "afterCommit": {"oid": "053237b0e4f76afa5bbbd2f9c9af9c1c103f9f40", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/053237b0e4f76afa5bbbd2f9c9af9c1c103f9f40", "committedDate": "2020-06-15T15:48:54Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "053237b0e4f76afa5bbbd2f9c9af9c1c103f9f40", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/053237b0e4f76afa5bbbd2f9c9af9c1c103f9f40", "committedDate": "2020-06-15T15:48:54Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}, "afterCommit": {"oid": "96d9494e96551a27b55bf54341afa6fde90aea98", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/96d9494e96551a27b55bf54341afa6fde90aea98", "committedDate": "2020-06-15T16:24:33Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96d9494e96551a27b55bf54341afa6fde90aea98", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/96d9494e96551a27b55bf54341afa6fde90aea98", "committedDate": "2020-06-15T16:24:33Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}, "afterCommit": {"oid": "c1c297c4d7f2fde7aa155bd5382d93d0144d906e", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/c1c297c4d7f2fde7aa155bd5382d93d0144d906e", "committedDate": "2020-06-15T17:23:59Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c1c297c4d7f2fde7aa155bd5382d93d0144d906e", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/c1c297c4d7f2fde7aa155bd5382d93d0144d906e", "committedDate": "2020-06-15T17:23:59Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}, "afterCommit": {"oid": "85dea48aca9b3e3f130d0e7af33ee249a6262c95", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/85dea48aca9b3e3f130d0e7af33ee249a6262c95", "committedDate": "2020-06-15T17:48:17Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85dea48aca9b3e3f130d0e7af33ee249a6262c95", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/85dea48aca9b3e3f130d0e7af33ee249a6262c95", "committedDate": "2020-06-15T17:48:17Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}, "afterCommit": {"oid": "a8860cc3bf3b5824311cf9d6ad941e74bbae6f4e", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/a8860cc3bf3b5824311cf9d6ad941e74bbae6f4e", "committedDate": "2020-06-16T06:27:10Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8860cc3bf3b5824311cf9d6ad941e74bbae6f4e", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/a8860cc3bf3b5824311cf9d6ad941e74bbae6f4e", "committedDate": "2020-06-16T06:27:10Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}, "afterCommit": {"oid": "fc18ef38123f0c07e715ce27df280973e49c0409", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/fc18ef38123f0c07e715ce27df280973e49c0409", "committedDate": "2020-06-19T03:41:51Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc18ef38123f0c07e715ce27df280973e49c0409", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/fc18ef38123f0c07e715ce27df280973e49c0409", "committedDate": "2020-06-19T03:41:51Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}, "afterCommit": {"oid": "5989f3397a44c7d6d5216ea4d4872a50238d3a37", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/5989f3397a44c7d6d5216ea4d4872a50238d3a37", "committedDate": "2020-06-23T05:10:56Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NDQ2NjM1", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/207#pullrequestreview-435446635", "createdAt": "2020-06-23T05:16:07Z", "commit": {"oid": "5989f3397a44c7d6d5216ea4d4872a50238d3a37"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwNToxNjowN1rOGnZi-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwNToxNjowN1rOGnZi-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzk2NjIwMQ==", "bodyText": "I guess this file got changed due to autoformat.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/207#discussion_r443966201", "createdAt": "2020-06-23T05:16:07Z", "author": {"login": "ShivanshRakesh"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/dao/impl/FhirRelatedPersonDaoImpl.java", "diffHunk": "@@ -90,18 +90,15 @@\n \t\t\tcriteria.add(and(eq(\"pn.voided\", false), or(\n \t\t\t    and(eq(\"pn.preferred\", true),\n \t\t\t        Subqueries.propertyEq(\"pn.personNameId\",\n-\t\t\t            DetachedCriteria.forClass(PersonName.class, \"pn1\")\n-\t\t\t\t\t            .add(eq(\"pn1.preferred\", true))\n+\t\t\t            DetachedCriteria.forClass(PersonName.class, \"pn1\").add(eq(\"pn1.preferred\", true))\n \t\t\t                    .add(sqlRestriction(String.format(\"pn1_.person_id = %s.person_a\", \"this_\")))\n \t\t\t                    .setProjection(Projections.min(\"pn1.personNameId\")))),\n-\t\t\t    and(Subqueries.notExists(DetachedCriteria.forClass(PersonName.class, \"pn2\")\n-\t\t\t\t\t\t\t    .add(eq(\"pn2.preferred\", true))\n+\t\t\t    and(Subqueries.notExists(DetachedCriteria.forClass(PersonName.class, \"pn2\").add(eq(\"pn2.preferred\", true))\n \t\t\t            // WARNING this is fragile\n \t\t\t            .add(sqlRestriction(String.format(\"pn2_.person_id = %s.person_a\", \"this_\")))\n \t\t\t            .setProjection(Projections.id())),\n \t\t\t        Subqueries.propertyEq(\"pn.personNameId\",\n-\t\t\t            DetachedCriteria.forClass(PersonName.class, \"pn3\")\n-\t\t\t\t\t            .add(eq(\"pn3.preferred\", false))\n+\t\t\t            DetachedCriteria.forClass(PersonName.class, \"pn3\").add(eq(\"pn3.preferred\", false))\n \t\t\t                    // WARNING this is fragile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5989f3397a44c7d6d5216ea4d4872a50238d3a37"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "070b5b1163ab0f85f9bd30cfa407a6ed3aacf5a5", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/070b5b1163ab0f85f9bd30cfa407a6ed3aacf5a5", "committedDate": "2020-06-25T13:45:35Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5989f3397a44c7d6d5216ea4d4872a50238d3a37", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/5989f3397a44c7d6d5216ea4d4872a50238d3a37", "committedDate": "2020-06-23T05:10:56Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}, "afterCommit": {"oid": "070b5b1163ab0f85f9bd30cfa407a6ed3aacf5a5", "author": {"user": {"login": "ShivanshRakesh", "name": "Shivansh Rakesh"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/070b5b1163ab0f85f9bd30cfa407a6ed3aacf5a5", "committedDate": "2020-06-25T13:45:35Z", "message": "FM2-207: Create default narratives for resources (Encounter, Observation, Location)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MzMwMjE1", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/207#pullrequestreview-439330215", "createdAt": "2020-06-29T16:53:39Z", "commit": {"oid": "070b5b1163ab0f85f9bd30cfa407a6ed3aacf5a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4067, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}