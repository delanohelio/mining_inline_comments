{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0NzI1Njgz", "number": 305, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTozMTo1MVrOE6E5Ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTozNDozOVrOE6FAkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MzMzMDI2OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PatientTranslatorImpl.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTozMTo1MVrOH068Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QwODo0MDo1OVrOH4Dg8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1MzcwMg==", "bodyText": "What happens if the birthdate is not estimated?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r525253702", "createdAt": "2020-11-17T15:31:51Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PatientTranslatorImpl.java", "diffHunk": "@@ -79,8 +82,26 @@ public Patient toFhirResource(@Nonnull org.openmrs.Patient openmrsPatient) {\n \t\t\n \t\tPatient patient = new Patient();\n \t\tpatient.setId(openmrsPatient.getUuid());\n-\t\tpatient.setBirthDate(openmrsPatient.getBirthdate());\n \t\tpatient.setActive(!openmrsPatient.getVoided());\n+\t\tpatient.setBirthDate(openmrsPatient.getBirthdate());\n+\t\t\n+\t\tif (openmrsPatient.getBirthdateEstimated() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQ4NTIyMg==", "bodyText": "it will set the birthday as usual. it will alter only if birthday is estimated.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r528485222", "createdAt": "2020-11-23T06:04:32Z", "author": {"login": "theanandankit"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PatientTranslatorImpl.java", "diffHunk": "@@ -79,8 +82,26 @@ public Patient toFhirResource(@Nonnull org.openmrs.Patient openmrsPatient) {\n \t\t\n \t\tPatient patient = new Patient();\n \t\tpatient.setId(openmrsPatient.getUuid());\n-\t\tpatient.setBirthDate(openmrsPatient.getBirthdate());\n \t\tpatient.setActive(!openmrsPatient.getVoided());\n+\t\tpatient.setBirthDate(openmrsPatient.getBirthdate());\n+\t\t\n+\t\tif (openmrsPatient.getBirthdateEstimated() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1MzcwMg=="}, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODUzOTg5MQ==", "bodyText": "I have put all this in if else statement. it will check whether the birthday is estimated or not and according to this we will set the birthday.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r528539891", "createdAt": "2020-11-23T08:40:59Z", "author": {"login": "theanandankit"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PatientTranslatorImpl.java", "diffHunk": "@@ -79,8 +82,26 @@ public Patient toFhirResource(@Nonnull org.openmrs.Patient openmrsPatient) {\n \t\t\n \t\tPatient patient = new Patient();\n \t\tpatient.setId(openmrsPatient.getUuid());\n-\t\tpatient.setBirthDate(openmrsPatient.getBirthdate());\n \t\tpatient.setActive(!openmrsPatient.getVoided());\n+\t\tpatient.setBirthDate(openmrsPatient.getBirthdate());\n+\t\t\n+\t\tif (openmrsPatient.getBirthdateEstimated() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1MzcwMg=="}, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MzMzNTYyOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PersonTranslatorImpl.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTozMjoyNFrOH06_jQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QwODo0MToyM1rOH4Dh1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1NDU0MQ==", "bodyText": "Doesn't this potentially set birthdate twice?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r525254541", "createdAt": "2020-11-17T15:32:24Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PersonTranslatorImpl.java", "diffHunk": "@@ -69,6 +72,23 @@\n \t\tperson.setActive(!openmrsPerson.getVoided());\n \t\tperson.setBirthDate(openmrsPerson.getBirthdate());\n \t\t\n+\t\tif (openmrsPerson.getBirthdateEstimated() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQ4NjEyOA==", "bodyText": "Initially it will set the birthday as usual but if the birthday is estimated then it will set the new birthday as expected.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r528486128", "createdAt": "2020-11-23T06:08:41Z", "author": {"login": "theanandankit"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PersonTranslatorImpl.java", "diffHunk": "@@ -69,6 +72,23 @@\n \t\tperson.setActive(!openmrsPerson.getVoided());\n \t\tperson.setBirthDate(openmrsPerson.getBirthdate());\n \t\t\n+\t\tif (openmrsPerson.getBirthdateEstimated() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1NDU0MQ=="}, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODU0MDExOQ==", "bodyText": "I have put all this in if else statement. it will check whether the birthday is estimated or not and according to this we will set the birthday.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r528540119", "createdAt": "2020-11-23T08:41:23Z", "author": {"login": "theanandankit"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PersonTranslatorImpl.java", "diffHunk": "@@ -69,6 +72,23 @@\n \t\tperson.setActive(!openmrsPerson.getVoided());\n \t\tperson.setBirthDate(openmrsPerson.getBirthdate());\n \t\t\n+\t\tif (openmrsPerson.getBirthdateEstimated() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1NDU0MQ=="}, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MzM0NTc0OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PersonTranslatorImpl.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTozMzo1MlrOH07GWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QwODo0MjoyM1rOH4DkCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1NjI4Mg==", "bodyText": "Instead of using Calendar can we change this to use the java.time package classes?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r525256282", "createdAt": "2020-11-17T15:33:52Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PersonTranslatorImpl.java", "diffHunk": "@@ -69,6 +72,23 @@\n \t\tperson.setActive(!openmrsPerson.getVoided());\n \t\tperson.setBirthDate(openmrsPerson.getBirthdate());\n \t\t\n+\t\tif (openmrsPerson.getBirthdateEstimated() != null) {\n+\t\t\tif (openmrsPerson.getBirthdateEstimated()) {\n+\t\t\t\tDateType dateType = new DateType();\n+\t\t\t\tCalendar calendar = Calendar.getInstance();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODQ4Njg3Ng==", "bodyText": "@ibacher thank. i will change this.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r528486876", "createdAt": "2020-11-23T06:11:50Z", "author": {"login": "theanandankit"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PersonTranslatorImpl.java", "diffHunk": "@@ -69,6 +72,23 @@\n \t\tperson.setActive(!openmrsPerson.getVoided());\n \t\tperson.setBirthDate(openmrsPerson.getBirthdate());\n \t\t\n+\t\tif (openmrsPerson.getBirthdateEstimated() != null) {\n+\t\t\tif (openmrsPerson.getBirthdateEstimated()) {\n+\t\t\t\tDateType dateType = new DateType();\n+\t\t\t\tCalendar calendar = Calendar.getInstance();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1NjI4Mg=="}, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODU0MDY4MQ==", "bodyText": "changed the calendar to java.time package classes.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r528540681", "createdAt": "2020-11-23T08:42:23Z", "author": {"login": "theanandankit"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PersonTranslatorImpl.java", "diffHunk": "@@ -69,6 +72,23 @@\n \t\tperson.setActive(!openmrsPerson.getVoided());\n \t\tperson.setBirthDate(openmrsPerson.getBirthdate());\n \t\t\n+\t\tif (openmrsPerson.getBirthdateEstimated() != null) {\n+\t\t\tif (openmrsPerson.getBirthdateEstimated()) {\n+\t\t\t\tDateType dateType = new DateType();\n+\t\t\t\tCalendar calendar = Calendar.getInstance();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1NjI4Mg=="}, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MzM0NzQ4OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PractitionerTranslatorUserImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTozNDoxNlrOH07HkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QwODo0MjoyOVrOH4DkPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1NjU5Mw==", "bodyText": "Instead of using Calendar can we change this to use the java.time package classes?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r525256593", "createdAt": "2020-11-17T15:34:16Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PractitionerTranslatorUserImpl.java", "diffHunk": "@@ -54,7 +58,27 @@ public Practitioner toFhirResource(@Nonnull User user) {\n \t\tpractitioner.addIdentifier(userIdentifier);\n \t\t\n \t\tif (user.getPerson() != null) {\n+\t\t\t\n+\t\t\tif (user.getPerson().getBirthdateEstimated() != null) {\n+\t\t\t\tif (user.getPerson().getBirthdateEstimated()) {\n+\t\t\t\t\tDateType dateType = new DateType();\n+\t\t\t\t\tCalendar calendar = Calendar.getInstance();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODU0MDczNQ==", "bodyText": "changed the calendar to java.time package classes.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r528540735", "createdAt": "2020-11-23T08:42:29Z", "author": {"login": "theanandankit"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/PractitionerTranslatorUserImpl.java", "diffHunk": "@@ -54,7 +58,27 @@ public Practitioner toFhirResource(@Nonnull User user) {\n \t\tpractitioner.addIdentifier(userIdentifier);\n \t\t\n \t\tif (user.getPerson() != null) {\n+\t\t\t\n+\t\t\tif (user.getPerson().getBirthdateEstimated() != null) {\n+\t\t\t\tif (user.getPerson().getBirthdateEstimated()) {\n+\t\t\t\t\tDateType dateType = new DateType();\n+\t\t\t\t\tCalendar calendar = Calendar.getInstance();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1NjU5Mw=="}, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MzM0OTI5OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/RelatedPersonTranslatorImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTozNDozOVrOH07IwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QwODo0MjozOVrOH4DkjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1Njg5Ng==", "bodyText": "Instead of using Calendar can we change this to use the java.time package classes?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r525256896", "createdAt": "2020-11-17T15:34:39Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/RelatedPersonTranslatorImpl.java", "diffHunk": "@@ -62,9 +65,26 @@ public RelatedPerson toFhirResource(@Nonnull Relationship relationship) {\n \t\t\n \t\tPerson omrsRelatedPerson = relationship.getPersonA();\n \t\tRelatedPerson relatedPerson = new RelatedPerson();\n-\t\t\n-\t\trelatedPerson.setId(relationship.getUuid());\n \t\trelatedPerson.setBirthDate(omrsRelatedPerson.getBirthdate());\n+\t\trelatedPerson.setId(relationship.getUuid());\n+\t\t\n+\t\tif (omrsRelatedPerson.getBirthdateEstimated() != null) {\n+\t\t\tif (omrsRelatedPerson.getBirthdateEstimated()) {\n+\t\t\t\tDateType dateType = new DateType();\n+\t\t\t\tCalendar calendar = Calendar.getInstance();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODU0MDgxMg==", "bodyText": "changed the calendar to java.time package classes.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/305#discussion_r528540812", "createdAt": "2020-11-23T08:42:39Z", "author": {"login": "theanandankit"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/RelatedPersonTranslatorImpl.java", "diffHunk": "@@ -62,9 +65,26 @@ public RelatedPerson toFhirResource(@Nonnull Relationship relationship) {\n \t\t\n \t\tPerson omrsRelatedPerson = relationship.getPersonA();\n \t\tRelatedPerson relatedPerson = new RelatedPerson();\n-\t\t\n-\t\trelatedPerson.setId(relationship.getUuid());\n \t\trelatedPerson.setBirthDate(omrsRelatedPerson.getBirthdate());\n+\t\trelatedPerson.setId(relationship.getUuid());\n+\t\t\n+\t\tif (omrsRelatedPerson.getBirthdateEstimated() != null) {\n+\t\t\tif (omrsRelatedPerson.getBirthdateEstimated()) {\n+\t\t\t\tDateType dateType = new DateType();\n+\t\t\t\tCalendar calendar = Calendar.getInstance();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI1Njg5Ng=="}, "originalCommit": {"oid": "3d8cbf31e0a8b510e6f30a37a14a7f9d3683e851"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 872, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}