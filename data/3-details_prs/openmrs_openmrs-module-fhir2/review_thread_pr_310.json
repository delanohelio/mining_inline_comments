{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzODc0MTM5", "number": 310, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTowMzo1MVrOFDheUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQxNDo0NjoyN1rOFVOgNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM5MjM4NDgyOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/DurationUnitTranslatorImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTowMzo1MVrOIDNrzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxNTowMzo1MVrOIDNrzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI0MDg0Ng==", "bodyText": "So these aren't actually what the UUIDs for these concepts would look like in practice. If you look at the concepts as displayed on openconceptlab.org, you'll see an \"External ID\". That (at least for CIEL) corresponds to the UUID as it would exist in the OpenMRS concept dictionary. For example, CIEL:1822 (Hour) has an external id of \"1822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" (this is actually the pattern for CIEL concept UUIDs: the concept id padded with As to reach 36 characters).\nThat said, I don't want to have concept ids hard-coded in the translator like this. I'd prefer if we did something closer to what we have for ObservationCategoryMap which maps between the FHIR Observation Category terminology set and OpenMRS concept classes. This support requires a few different components:\n\n\nWe have a translator, ObservationCategoryTranslator and a corresponding implementation which adds the observation category to the FHIR resource.\n\n\nWe have a simple table that stores mappings between OpenMRS concept classes and the FHIR Observation Category. This table is defined by this class.\n\n\nFinally, we have this simple class which defines the lookups to get the category given the concept class UUID and to get the concept class UUID using the category.\n\n\nThe flexibility afforded by this model is that we're able to map arbitrary OpenMRS concept dictionaries (not all of which use the CIEL concepts) to the corresponding FHIR terminology. Does that make some kind of sense?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/310#discussion_r540240846", "createdAt": "2020-12-10T15:03:51Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/DurationUnitTranslatorImpl.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package org.openmrs.module.fhir2.api.translators.impl;\n+\n+import org.hl7.fhir.r4.model.Timing;\n+import org.openmrs.DrugOrder;\n+import org.openmrs.module.fhir2.api.translators.DurationUnitTranslator;\n+\n+import javax.annotation.Nonnull;\n+\n+public class DurationUnitTranslatorImpl implements DurationUnitTranslator {\n+\n+\t@Override\n+\tpublic Timing.UnitsOfTime toFhirResource(@Nonnull DrugOrder drugOrder) {\n+\n+\t\tString unitUUID = drugOrder.getDurationUnits().getUuid();\n+\n+\t\tswitch (unitUUID) {\n+\n+\t\t\tcase \"162583\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56eecb3ccb7da28b2f8b389957443d5057ee7d1d"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODAxMjQ4OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/DurationUnitTranslatorImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDozNTowM1rOIFTYrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDozNTowM1rOIFTYrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQzMTQwNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tif (drugOrder.getDurationUnits().getUuid() == null) {\n          \n          \n            \n            \t\tif (drugOrder.getDurationUnits() == null || drugOrder.getDurationUnits().getUuid() == null) {", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/310#discussion_r542431407", "createdAt": "2020-12-14T14:35:03Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/DurationUnitTranslatorImpl.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+\n+package org.openmrs.module.fhir2.api.translators.impl;\n+\n+import javax.annotation.Nonnull;\n+\n+import org.hl7.fhir.r4.model.Timing;\n+import org.openmrs.DrugOrder;\n+import org.openmrs.module.fhir2.api.mappings.DurationUnitMap;\n+import org.openmrs.module.fhir2.api.translators.DurationUnitTranslator;\n+import org.springframework.beans.factory.annotation.Autowired;\n+\n+public class DurationUnitTranslatorImpl implements DurationUnitTranslator {\n+\t\n+\t@Autowired\n+\tprivate DurationUnitMap durationUnitMap;\n+\t\n+\t@Override\n+\tpublic Timing.UnitsOfTime toFhirResource(@Nonnull DrugOrder drugOrder) {\n+\t\t\n+\t\tif (drugOrder.getDurationUnits().getUuid() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f85eb6909a1ce0b740c52b3bd4b5e61de9565d9"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODAzNzA0OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/mappings/DurationUnitMap.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0MDowNlrOIFTnPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0MDowNlrOIFTnPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQzNTEzMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\treturn (Timing.UnitsOfTime) sessionFactory.getCurrentSession().createCriteria(FhirDurationUnitMap.class)\n          \n          \n            \n            \t\t\treturn sessionFactory.getCurrentSession().createCriteria(FhirDurationUnitMap.class,  Timing.UnitsOfTime.class)", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/310#discussion_r542435132", "createdAt": "2020-12-14T14:40:06Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/mappings/DurationUnitMap.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.mappings;\n+\n+import static org.hibernate.criterion.Restrictions.eq;\n+\n+import javax.annotation.Nonnull;\n+\n+import lombok.extern.slf4j.Slf4j;\n+import org.hibernate.HibernateException;\n+import org.hibernate.SessionFactory;\n+import org.hibernate.criterion.Projections;\n+import org.hl7.fhir.r4.model.Timing;\n+import org.openmrs.module.fhir2.model.FhirDurationUnitMap;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.beans.factory.annotation.Qualifier;\n+import org.springframework.stereotype.Component;\n+\n+@Component\n+@Slf4j\n+public class DurationUnitMap {\n+\t\n+\t@Autowired\n+\t@Qualifier(\"sessionFactory\")\n+\tprivate SessionFactory sessionFactory;\n+\t\n+\tpublic Timing.UnitsOfTime getDurationUnit(@Nonnull String conceptUuid) {\n+\t\t\n+\t\ttry {\n+\t\t\treturn (Timing.UnitsOfTime) sessionFactory.getCurrentSession().createCriteria(FhirDurationUnitMap.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f85eb6909a1ce0b740c52b3bd4b5e61de9565d9"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODA0OTI3OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/mappings/DurationUnitMap.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0MjozMlrOIFTubw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0MjozMlrOIFTubw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQzNjk3NQ==", "bodyText": "I don't love swallowing random exceptions like this; I think I'd rather tend to fail the operation (i.e. just throw the exception) with the possible exception of NonUniqueResultException. That we can do something useful with if we catch it.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/310#discussion_r542436975", "createdAt": "2020-12-14T14:42:32Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/mappings/DurationUnitMap.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.mappings;\n+\n+import static org.hibernate.criterion.Restrictions.eq;\n+\n+import javax.annotation.Nonnull;\n+\n+import lombok.extern.slf4j.Slf4j;\n+import org.hibernate.HibernateException;\n+import org.hibernate.SessionFactory;\n+import org.hibernate.criterion.Projections;\n+import org.hl7.fhir.r4.model.Timing;\n+import org.openmrs.module.fhir2.model.FhirDurationUnitMap;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.beans.factory.annotation.Qualifier;\n+import org.springframework.stereotype.Component;\n+\n+@Component\n+@Slf4j\n+public class DurationUnitMap {\n+\t\n+\t@Autowired\n+\t@Qualifier(\"sessionFactory\")\n+\tprivate SessionFactory sessionFactory;\n+\t\n+\tpublic Timing.UnitsOfTime getDurationUnit(@Nonnull String conceptUuid) {\n+\t\t\n+\t\ttry {\n+\t\t\treturn (Timing.UnitsOfTime) sessionFactory.getCurrentSession().createCriteria(FhirDurationUnitMap.class)\n+\t\t\t        .createAlias(\"concept\", \"c\").add(eq(\"c.uuid\", conceptUuid))\n+\t\t\t        .setProjection(Projections.property(\"unit_of_time\")).uniqueResult();\n+\t\t}\n+\t\tcatch (HibernateException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f85eb6909a1ce0b740c52b3bd4b5e61de9565d9"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODA1NTc4OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/DurationUnitTranslator.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0Mzo0M1rOIFTyPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0Mzo0M1rOIFTyPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQzNzk1MA==", "bodyText": "Should this map between the DrugOrder or the Concept? If we define this to take a concept then it could be more generally useful, if we need these mappings in other places.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/310#discussion_r542437950", "createdAt": "2020-12-14T14:43:43Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/DurationUnitTranslator.java", "diffHunk": "@@ -0,0 +1,21 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.api.translators;\n+\n+import javax.annotation.Nonnull;\n+\n+import org.hl7.fhir.r4.model.Timing;\n+import org.openmrs.DrugOrder;\n+\n+public interface DurationUnitTranslator extends ToFhirTranslator<DrugOrder, Timing.UnitsOfTime> {\n+\t\n+\t@Override\n+\tTiming.UnitsOfTime toFhirResource(@Nonnull DrugOrder drugOrder);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f85eb6909a1ce0b740c52b3bd4b5e61de9565d9"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODA2ODgwOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/org/openmrs/module/fhir2/model/FhirDurationUnitMap.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0NjoyMlrOIFT5xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0NjoyMlrOIFT5xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQzOTg3Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t@JoinColumn(nullable = false, name = \"concept_uuid\")\n          \n          \n            \n            \t@JoinColumn(nullable = false, name = \"concept_id\")", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/310#discussion_r542439877", "createdAt": "2020-12-14T14:46:22Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/model/FhirDurationUnitMap.java", "diffHunk": "@@ -0,0 +1,90 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */\n+package org.openmrs.module.fhir2.model;\n+\n+import javax.persistence.Column;\n+import javax.persistence.Entity;\n+import javax.persistence.EnumType;\n+import javax.persistence.Enumerated;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.JoinColumn;\n+import javax.persistence.ManyToOne;\n+import javax.persistence.Table;\n+\n+import java.util.Date;\n+import java.util.UUID;\n+\n+import lombok.Data;\n+import lombok.EqualsAndHashCode;\n+import org.hibernate.search.annotations.Field;\n+import org.hl7.fhir.r4.model.Timing;\n+import org.openmrs.Auditable;\n+import org.openmrs.Concept;\n+import org.openmrs.Retireable;\n+import org.openmrs.User;\n+\n+@Data\n+@EqualsAndHashCode(onlyExplicitlyIncluded = true, callSuper = false)\n+@Entity\n+@Table(name = \"fhir_duration_unit_map\")\n+public class FhirDurationUnitMap implements Auditable, Retireable {\n+\t\n+\t@EqualsAndHashCode.Include\n+\t@Id\n+\t@GeneratedValue(strategy = GenerationType.AUTO)\n+\t@Column(name = \"duration_unit_map_id\")\n+\tprivate Integer id;\n+\t\n+\t@ManyToOne(optional = false)\n+\t@JoinColumn(nullable = false, name = \"concept_uuid\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f85eb6909a1ce0b740c52b3bd4b5e61de9565d9"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODA3NTkxOnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/liquibase.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0NzozOFrOIFT94A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0NzozOFrOIFT94A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0MDkyOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '162583AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1733AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1734AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '162583AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1733AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1734AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/310#discussion_r542440928", "createdAt": "2020-12-14T14:47:38Z", "author": {"login": "ibacher"}, "path": "api/src/main/resources/liquibase.xml", "diffHunk": "@@ -696,4 +696,237 @@\n         ]]>\n         </sql>\n     </changeSet>\n+\n+\t<changeSet id=\"add_fhir_duration_unit_map_20200930\" author=\"ankit\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onError=\"WARN\">\n+\t\t\t<not>\n+\t\t\t\t<tableExists tableName=\"fhir_duration_unit_map\"/>\n+\t\t\t</not>\n+\t\t</preConditions>\n+\t\t<createTable tableName=\"fhir_duration_unit_map\">\n+\t\t\t<column name=\"duration_unit_map_id\" type=\"int\" autoIncrement=\"true\">\n+\t\t\t\t<constraints primaryKey=\"true\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"concept_id\" type=\"int\"/>\n+\t\t\t<column name=\"unit_of_time\" type=\"varchar(20)\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"creator\" type=\"int\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"date_created\" type=\"datetime\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"changed_by\" type=\"int\"/>\n+\t\t\t<column name=\"date_changed\" type=\"datetime\"/>\n+\t\t\t<column name=\"retired\" type=\"boolean\" defaultValueBoolean=\"false\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"retired_by\" type=\"int\"/>\n+\t\t\t<column name=\"date_retired\" type=\"datetime\"/>\n+\t\t\t<column name=\"retired_reason\" type=\"varchar(255)\" defaultValue=\"null\"/>\n+\t\t\t<column name=\"uuid\" type=\"char(36)\">\n+\t\t\t\t<constraints nullable=\"false\" unique=\"true\"/>\n+\t\t\t</column>\n+\t\t</createTable>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_creator\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"creator\"\n+\t\t                         referencedTableName=\"users\" referencedColumnNames=\"user_id\"/>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_changed_by\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"changed_by\"\n+\t\t                         referencedTableName=\"users\" referencedColumnNames=\"user_id\"/>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_retired_by\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"retired_by\"\n+\t\t                         referencedTableName=\"users\" referencedColumnNames=\"user_id\"/>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_concept\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"concept_id\"\n+\t\t                         referencedTableName=\"concept\" referencedColumnNames=\"concept_id\"/>\n+\t\t<createIndex tableName=\"fhir_duration_unit_map\"\n+\t\t             indexName=\"fhir_duration_unit_map_unit_of_time\">\n+\t\t\t<column name=\"unit_of_time\"/>\n+\t\t</createIndex>\n+\t</changeSet>\n+\n+\t<changeSet id=\"add_default_duration_unit_20200930\" author=\"ankit\" dbms=\"mysql,mariadb\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onError=\"WARN\">\n+\t\t\t<and>\n+\t\t\t\t<tableExists tableName=\"fhir_duration_unit_map\"/>\n+\t\t\t\t<sqlCheck expectedResult=\"0\">\n+\t\t\t\t\tselect count(*) from fhir_duration_unit_map\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '162583AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1733AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1734AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f85eb6909a1ce0b740c52b3bd4b5e61de9565d9"}, "originalPosition": 90}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwODA4MjM4OnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/liquibase.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0ODo1N1rOIFUBtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNDo0ODo1N1rOIFUBtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0MTkwOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '162583AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1733AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1734AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '162583AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1733AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>\n          \n          \n            \n            \t\t\t\t<sqlCheck expectedResult=\"1\">\n          \n          \n            \n            \t\t\t\t\tselect 1 from concept where uuid = '1734AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n          \n          \n            \n            \t\t\t\t</sqlCheck>", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/310#discussion_r542441908", "createdAt": "2020-12-14T14:48:57Z", "author": {"login": "ibacher"}, "path": "api/src/main/resources/liquibase.xml", "diffHunk": "@@ -696,4 +696,237 @@\n         ]]>\n         </sql>\n     </changeSet>\n+\n+\t<changeSet id=\"add_fhir_duration_unit_map_20200930\" author=\"ankit\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onError=\"WARN\">\n+\t\t\t<not>\n+\t\t\t\t<tableExists tableName=\"fhir_duration_unit_map\"/>\n+\t\t\t</not>\n+\t\t</preConditions>\n+\t\t<createTable tableName=\"fhir_duration_unit_map\">\n+\t\t\t<column name=\"duration_unit_map_id\" type=\"int\" autoIncrement=\"true\">\n+\t\t\t\t<constraints primaryKey=\"true\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"concept_id\" type=\"int\"/>\n+\t\t\t<column name=\"unit_of_time\" type=\"varchar(20)\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"creator\" type=\"int\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"date_created\" type=\"datetime\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"changed_by\" type=\"int\"/>\n+\t\t\t<column name=\"date_changed\" type=\"datetime\"/>\n+\t\t\t<column name=\"retired\" type=\"boolean\" defaultValueBoolean=\"false\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"retired_by\" type=\"int\"/>\n+\t\t\t<column name=\"date_retired\" type=\"datetime\"/>\n+\t\t\t<column name=\"retired_reason\" type=\"varchar(255)\" defaultValue=\"null\"/>\n+\t\t\t<column name=\"uuid\" type=\"char(36)\">\n+\t\t\t\t<constraints nullable=\"false\" unique=\"true\"/>\n+\t\t\t</column>\n+\t\t</createTable>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_creator\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"creator\"\n+\t\t                         referencedTableName=\"users\" referencedColumnNames=\"user_id\"/>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_changed_by\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"changed_by\"\n+\t\t                         referencedTableName=\"users\" referencedColumnNames=\"user_id\"/>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_retired_by\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"retired_by\"\n+\t\t                         referencedTableName=\"users\" referencedColumnNames=\"user_id\"/>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_concept\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"concept_id\"\n+\t\t                         referencedTableName=\"concept\" referencedColumnNames=\"concept_id\"/>\n+\t\t<createIndex tableName=\"fhir_duration_unit_map\"\n+\t\t             indexName=\"fhir_duration_unit_map_unit_of_time\">\n+\t\t\t<column name=\"unit_of_time\"/>\n+\t\t</createIndex>\n+\t</changeSet>\n+\n+\t<changeSet id=\"add_default_duration_unit_20200930\" author=\"ankit\" dbms=\"mysql,mariadb\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onError=\"WARN\">\n+\t\t\t<and>\n+\t\t\t\t<tableExists tableName=\"fhir_duration_unit_map\"/>\n+\t\t\t\t<sqlCheck expectedResult=\"0\">\n+\t\t\t\t\tselect count(*) from fhir_duration_unit_map\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '162583AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1733AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1734AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t</and>\n+\t\t</preConditions>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'S', 1, now(), uuid()\n+            from concept\n+            where uuid = '162583AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'MIN', 1, now(), uuid()\n+            from concept\n+            where uuid = '1733AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'H', 1, now(), uuid()\n+            from concept\n+            where uuid = '1822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'D', 1, now(), uuid()\n+            from concept\n+            where uuid = '1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'WK', 1, now(), uuid()\n+            from concept\n+            where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'MO', 1, now(), uuid()\n+            from concept\n+            where uuid = '1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'A' ,1, now(), uuid()\n+            from concept\n+            where uuid = '1734AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t</changeSet>\n+\n+\t<changeSet id=\"add_default_duration_unit_20200930\" author=\"ankit\" dbms=\"postgresql\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onError=\"WARN\">\n+\t\t\t<and>\n+\t\t\t\t<tableExists tableName=\"fhir_duration_unit_map\"/>\n+\t\t\t\t<sqlCheck expectedResult=\"0\">\n+\t\t\t\t\tselect count(*) from fhir_duration_unit_map\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '162583AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1733AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1734AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f85eb6909a1ce0b740c52b3bd4b5e61de9565d9"}, "originalPosition": 179}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzU3ODAxOTE5OnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/liquibase.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQxNDo0NjoxM1rOIdkkxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQxNDo0NjoxM1rOIdkkxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Nzg3ODg1Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t<changeSet id=\"add_fhir_duration_unit_map_20200930\" author=\"ibacher\">\n          \n          \n            \n            \t<changeSet id=\"add_fhir_duration_unit_map_20200930\" author=\"theanandakit\">", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/310#discussion_r567878853", "createdAt": "2021-02-01T14:46:13Z", "author": {"login": "ibacher"}, "path": "api/src/main/resources/liquibase.xml", "diffHunk": "@@ -696,4 +696,223 @@\n         ]]>\n         </sql>\n     </changeSet>\n+\n+\t<changeSet id=\"add_fhir_duration_unit_map_20200930\" author=\"ibacher\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f1394f5636f673b48d17f5dc10d4f65a01ca29"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzU3ODAyMDM5OnYy", "diffSide": "RIGHT", "path": "api/src/main/resources/liquibase.xml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQxNDo0NjoyN1rOIdklfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQxNDo0NjoyN1rOIdklfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2Nzg3OTAzNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t<changeSet id=\"add_default_duration_unit_20200930\" author=\"ibacher\" dbms=\"postgresql\">\n          \n          \n            \n            \t<changeSet id=\"add_default_duration_unit_20200930\" author=\"theanandakit\" dbms=\"postgresql\">", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/310#discussion_r567879036", "createdAt": "2021-02-01T14:46:27Z", "author": {"login": "ibacher"}, "path": "api/src/main/resources/liquibase.xml", "diffHunk": "@@ -696,4 +696,223 @@\n         ]]>\n         </sql>\n     </changeSet>\n+\n+\t<changeSet id=\"add_fhir_duration_unit_map_20200930\" author=\"ibacher\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onError=\"WARN\">\n+\t\t\t<not>\n+\t\t\t\t<tableExists tableName=\"fhir_duration_unit_map\"/>\n+\t\t\t</not>\n+\t\t</preConditions>\n+\t\t<createTable tableName=\"fhir_duration_unit_map\">\n+\t\t\t<column name=\"duration_unit_map_id\" type=\"int\" autoIncrement=\"true\">\n+\t\t\t\t<constraints primaryKey=\"true\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"concept_id\" type=\"int\"/>\n+\t\t\t<column name=\"unit_of_time\" type=\"varchar(20)\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"creator\" type=\"int\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"date_created\" type=\"datetime\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"changed_by\" type=\"int\"/>\n+\t\t\t<column name=\"date_changed\" type=\"datetime\"/>\n+\t\t\t<column name=\"retired\" type=\"boolean\" defaultValueBoolean=\"false\">\n+\t\t\t\t<constraints nullable=\"false\"/>\n+\t\t\t</column>\n+\t\t\t<column name=\"retired_by\" type=\"int\"/>\n+\t\t\t<column name=\"date_retired\" type=\"datetime\"/>\n+\t\t\t<column name=\"retired_reason\" type=\"varchar(255)\" defaultValue=\"null\"/>\n+\t\t\t<column name=\"uuid\" type=\"char(36)\">\n+\t\t\t\t<constraints nullable=\"false\" unique=\"true\"/>\n+\t\t\t</column>\n+\t\t</createTable>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_creator\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"creator\"\n+\t\t                         referencedTableName=\"users\" referencedColumnNames=\"user_id\"/>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_changed_by\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"changed_by\"\n+\t\t                         referencedTableName=\"users\" referencedColumnNames=\"user_id\"/>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_retired_by\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"retired_by\"\n+\t\t                         referencedTableName=\"users\" referencedColumnNames=\"user_id\"/>\n+\t\t<addForeignKeyConstraint constraintName=\"fhir_duration_unit_map_concept\"\n+\t\t                         baseTableName=\"fhir_duration_unit_map\" baseColumnNames=\"concept_id\"\n+\t\t                         referencedTableName=\"concept\" referencedColumnNames=\"concept_id\"/>\n+\t\t<createIndex tableName=\"fhir_duration_unit_map\"\n+\t\t             indexName=\"fhir_duration_unit_map_unit_of_time\">\n+\t\t\t<column name=\"unit_of_time\"/>\n+\t\t</createIndex>\n+\t</changeSet>\n+\n+\t<changeSet id=\"add_default_duration_unit_20200930\" author=\"ibacher\" dbms=\"mysql,mariadb\">\n+\t\t<preConditions onFail=\"MARK_RAN\" onError=\"WARN\">\n+\t\t\t<and>\n+                <tableExists tableName=\"concept\"/>\n+\t\t\t\t<tableExists tableName=\"fhir_duration_unit_map\"/>\n+\t\t\t\t<sqlCheck expectedResult=\"0\">\n+\t\t\t\t\tselect count(*) from fhir_duration_unit_map\n+\t\t\t\t</sqlCheck>\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '162583AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1733AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\t\t\t\t<sqlCheck expectedResult=\"1\">\n+\t\t\t\t\tselect 1 from concept where uuid = '1734AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+\t\t\t\t</sqlCheck>\n+\t\t\t</and>\n+\t\t</preConditions>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'S', 1, now(), uuid()\n+            from concept\n+            where uuid = '162583AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'MIN', 1, now(), uuid()\n+            from concept\n+            where uuid = '1733AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'H', 1, now(), uuid()\n+            from concept\n+            where uuid = '1822AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'D', 1, now(), uuid()\n+            from concept\n+            where uuid = '1072AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'WK', 1, now(), uuid()\n+            from concept\n+            where uuid = '1073AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'MO', 1, now(), uuid()\n+            from concept\n+            where uuid = '1074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t\t<sql><![CDATA[\n+            insert into fhir_duration_unit_map (concept_id, unit_of_time, creator, date_created, uuid)\n+            select concept_id, 'A' ,1, now(), uuid()\n+            from concept\n+            where uuid = '1734AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'\n+        ]]>\n+\t\t</sql>\n+\t</changeSet>\n+\n+\t<changeSet id=\"add_default_duration_unit_20200930\" author=\"ibacher\" dbms=\"postgresql\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f1394f5636f673b48d17f5dc10d4f65a01ca29"}, "originalPosition": 137}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 881, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}