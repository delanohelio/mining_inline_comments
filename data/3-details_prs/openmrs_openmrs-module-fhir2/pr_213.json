{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MzkyMzk3", "number": 213, "title": "FM2-229: Update Task resource to support paging", "bodyText": "Description of what I changed\n\n\nUpdate Task resource to return paged search results.\nIssue I worked on\n\n\n\n\nsee https://issues.openmrs.org/browse/FM2-229\nChecklist: I completed these to help reviewers :)\n\n\n\n\n My IDE is configured to follow the code style of this project.\nNo? Unsure? -> configure your IDE, format the code and add the changes with git add . && git commit --amend\n\n\n I have added tests to cover my changes. (If you refactored\nexisting code that was well tested you do not have to add tests)\nNo? -> write tests and add them to this commit git add . && git commit --amend\n\n\n I ran mvn clean package right before creating this pull request and\nadded all formatting changes to my commit.\nNo? -> execute above command\n\n\n All new and existing tests passed.\nNo? -> figure out why and add the fix to your commit. It is your responsibility to make sure your code works.\n\n\n My pull request is based on the latest changes of the master branch.\nNo? Unsure? -> execute command git pull --rebase upstream master", "createdAt": "2020-06-16T18:21:29Z", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/213", "merged": true, "mergeCommit": {"oid": "f98f8c7bc276f39d6a72deb540c40f48ecfb3b89"}, "closed": true, "closedAt": "2020-06-18T20:12:30Z", "author": {"login": "varung-31"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsDZk0AFqTQzMjA3MjkxOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsQeC_gFqTQzMjc3ODc3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMDcyOTE4", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/213#pullrequestreview-432072918", "createdAt": "2020-06-17T05:41:24Z", "commit": {"oid": "a1f495f0c57a9e1309ca39575e3f2c09a62fdede"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwNTo0MToyNFrOGk2WpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwNTo1NDo1MFrOGk2naw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI5MjQ1Mw==", "bodyText": "These changes aren't part of Task resource. You should move to a different commit, PR", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/213#discussion_r441292453", "createdAt": "2020-06-17T05:41:24Z", "author": {"login": "corneliouzbett"}, "path": "api-2.2/src/main/java/org/openmrs/module/fhir2/api/dao/impl/FhirConditionDaoImpl_2_2.java", "diffHunk": "@@ -151,7 +151,7 @@ protected void setupSearchParams(Criteria criteria, SearchParameterMap theParams\n \t\t\t\tcase FhirConstants.CODED_SEARCH_HANDLER:\n \t\t\t\t\tentry.getValue().forEach(param -> handleCode(criteria, (TokenAndListParam) param.getParam()));\n \t\t\t\t\tbreak;\n-\t\t\t\tcase FhirConstants.CONDITION_CLINICAL_STATUS_HANDLER:\n+\t\t\t\tcase FhirConstants.STATUS_SEARCH_HANDLER:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1f495f0c57a9e1309ca39575e3f2c09a62fdede"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI5MjU1OA==", "bodyText": "Ditto", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/213#discussion_r441292558", "createdAt": "2020-06-17T05:41:42Z", "author": {"login": "corneliouzbett"}, "path": "api-2.2/src/main/java/org/openmrs/module/fhir2/api/impl/FhirConditionServiceImpl_2_2.java", "diffHunk": "@@ -57,7 +57,7 @@ public IBundleProvider searchConditions(ReferenceAndListParam patientParam, Toke\n \t\tSearchParameterMap theParams = new SearchParameterMap()\n \t\t        .addParameter(FhirConstants.PATIENT_REFERENCE_SEARCH_HANDLER, patientParam)\n \t\t        .addParameter(FhirConstants.CODED_SEARCH_HANDLER, code)\n-\t\t        .addParameter(FhirConstants.CONDITION_CLINICAL_STATUS_HANDLER, clinicalStatus)\n+\t\t        .addParameter(FhirConstants.STATUS_SEARCH_HANDLER, clinicalStatus)\n \t\t        .addParameter(FhirConstants.QUANTITY_SEARCH_HANDLER, onsetAge)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1f495f0c57a9e1309ca39575e3f2c09a62fdede"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI5NTU5NA==", "bodyText": "Also, remove this formatting changes from this PR", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/213#discussion_r441295594", "createdAt": "2020-06-17T05:51:11Z", "author": {"login": "corneliouzbett"}, "path": "api/src/test/java/org/openmrs/module/fhir2/providers/r3/ConditionFhirR3ResourceProviderTest.java", "diffHunk": "@@ -178,36 +178,36 @@ public void searchConditions_shouldReturnConditionReturnedByService() {\n \t\tassertThat(resultList.size(), greaterThanOrEqualTo(1));\n \t\tassertThat(resultList.iterator().next().fhirType(), equalTo(FhirConstants.CONDITION));\n \t}\n-\n+\t\n \t@Test\n \tpublic void searchConditions_shouldReturnConditionReturnedByServiceWhenPatientIsNull() {\n \t\tReferenceAndListParam subjectReference = new ReferenceAndListParam();\n \t\tsubjectReference.addValue(new ReferenceOrListParam().add(new ReferenceParam(Patient.SP_GIVEN, \"subject name\")));\n-\n+\t\t\n \t\tTokenAndListParam codeList = new TokenAndListParam();\n \t\tcodeList.addValue(new TokenOrListParam().add(new TokenParam(\"test code\")));\n-\n+\t\t\n \t\tTokenAndListParam clinicalList = new TokenAndListParam();\n \t\tclinicalList.addValue(new TokenOrListParam().add(new TokenParam(\"test clinical\")));\n-\n+\t\t\n \t\tDateRangeParam onsetDate = new DateRangeParam().setLowerBound(\"lower date\").setUpperBound(\"upper date\");\n-\n+\t\t\n \t\tQuantityAndListParam onsetAge = new QuantityAndListParam();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1f495f0c57a9e1309ca39575e3f2c09a62fdede"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI5Njc0Nw==", "bodyText": "I guess you forgot about this. You should probably remove", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/213#discussion_r441296747", "createdAt": "2020-06-17T05:54:50Z", "author": {"login": "corneliouzbett"}, "path": "api/src/test/java/org/openmrs/module/fhir2/providers/r3/TaskFhirResourceProviderTest.java", "diffHunk": "@@ -170,25 +188,24 @@ public void getTaskHistoryByWithWrongId_shouldThrowResourceNotFoundException() {\n \t//\t\tresourceProvider.updateTask(new IdType().setValue(WRONG_TASK_UUID), wrongTask);\n \t//\t}\n \t\n-\t//TODO ERROR\n-\t//\t@Test\n-\t//\tpublic void searchTasks_shouldReturnMatchingTasks() {\n-\t//\t\tList<org.hl7.fhir.r4.model.Task> tasks = new ArrayList<>();\n-\t//\t\ttasks.add(task);\n-\t//\n-\t//\t\twhen(taskService.searchForTasks(any(), any(), any(), any())).thenReturn(tasks);\n-\t//\n-\t//\t\tTokenOrListParam status = new TokenOrListParam();\n-\t//\t\tTokenParam statusToken = new TokenParam();\n-\t//\t\tstatusToken.setValue(\"ACCEPTED\");\n-\t//\t\tstatus.add(statusToken);\n-\t//\n-\t//\t\tBundle results = resourceProvider.searchTasks(null, null, status, null);\n-\t//\n-\t//\t\tassertThat(results, notNullValue());\n-\t//\t\tassertThat(results.getTotal(), equalTo(1));\n-\t//\t\tassertThat(results.getEntry(), notNullValue());\n-\t//\t\tassertThat(results.getEntry().get(0).getResource().fhirType(), equalTo(\"Task\"));\n-\t//\t\tassertThat(results.getEntry().get(0).getResource().getId(), equalTo(TASK_UUID));\n-\t//\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1f495f0c57a9e1309ca39575e3f2c09a62fdede"}, "originalPosition": 82}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daa53f3f2087a6c1775c3d1c12a469feb3c85a9a", "author": {"user": {"login": "varung-31", "name": "Varun Gupta"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/daa53f3f2087a6c1775c3d1c12a469feb3c85a9a", "committedDate": "2020-06-17T17:36:45Z", "message": "FM2-229: Update Task resource to support paging"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a1f495f0c57a9e1309ca39575e3f2c09a62fdede", "author": {"user": {"login": "varung-31", "name": "Varun Gupta"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/a1f495f0c57a9e1309ca39575e3f2c09a62fdede", "committedDate": "2020-06-16T18:17:04Z", "message": "FM2-229: Update Task resource to support paging"}, "afterCommit": {"oid": "daa53f3f2087a6c1775c3d1c12a469feb3c85a9a", "author": {"user": {"login": "varung-31", "name": "Varun Gupta"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/daa53f3f2087a6c1775c3d1c12a469feb3c85a9a", "committedDate": "2020-06-17T17:36:45Z", "message": "FM2-229: Update Task resource to support paging"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNzc4Nzc2", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/213#pullrequestreview-432778776", "createdAt": "2020-06-17T21:10:03Z", "commit": {"oid": "daa53f3f2087a6c1775c3d1c12a469feb3c85a9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4074, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}