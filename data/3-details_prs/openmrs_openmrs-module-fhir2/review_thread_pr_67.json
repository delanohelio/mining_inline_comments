{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MzUxODMy", "number": 67, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxMzo1Njo0MVrODf5ZPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxMzo1Njo0MVrODf5ZPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0NzcyNzk5OnYy", "diffSide": "RIGHT", "path": "api-2.2/src/main/java/org/openmrs/module/fhir2/api/translators/impl/ConditionVerificationStatusTranslatorImpl_2_2.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxMzo1Njo0MVrOFp3TYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNTozMzoxMVrOFp6hgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ0MjAxOQ==", "bodyText": "We should probably normalize the case here, i.e., codeableConcept.getCoding().get(0).getCode().toUpperCase()", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/67#discussion_r379442019", "createdAt": "2020-02-14T13:56:41Z", "author": {"login": "ibacher"}, "path": "api-2.2/src/main/java/org/openmrs/module/fhir2/api/translators/impl/ConditionVerificationStatusTranslatorImpl_2_2.java", "diffHunk": "@@ -26,28 +26,29 @@ public CodeableConcept toFhirResource(ConditionVerificationStatus verificationSt\n \t\tif (verificationStatus == null) {\n \t\t\treturn null;\n \t\t}\n-\t\treturn this.setVerificationStatus(verificationStatus.toString());\n+\t\treturn new CodeableConcept().addCoding(addVerificationStatusCoding(verificationStatus.toString()));\n \t}\n \t\n \t@Override\n \tpublic ConditionVerificationStatus toOpenmrsType(CodeableConcept codeableConcept) {\n-\t\treturn codeableConcept.getCoding().stream().filter(coding -> coding.getSystem().equals(FhirConstants.OPENMRS_URI))\n-\t\t        .map(this::getVerificationStatus).findFirst().get();\n-\t}\n-\t\n-\tprivate CodeableConcept setVerificationStatus(String text) {\n-\t\tCodeableConcept codeableConcept = new CodeableConcept();\n-\t\tcodeableConcept.addCoding().setCode(text).setDisplay(text).setSystem(FhirConstants.OPENMRS_URI);\n-\t\treturn codeableConcept;\n-\t}\n-\t\n-\tprivate ConditionVerificationStatus getVerificationStatus(Coding coding) {\n-\t\tswitch (coding.getCode().trim().toLowerCase()) {\n-\t\t\tcase \"confirmed\":\n+\t\tif (codeableConcept.getCoding().isEmpty()) {\n+\t\t\treturn null;\n+\t\t}\n+\t\tswitch (codeableConcept.getCoding().get(0).getCode()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c714b00d04d66b821aa4e5f09b4282a9517cf385"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ5NDc4Nw==", "bodyText": "Absolutely!\u2705", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/67#discussion_r379494787", "createdAt": "2020-02-14T15:33:11Z", "author": {"login": "corneliouzbett"}, "path": "api-2.2/src/main/java/org/openmrs/module/fhir2/api/translators/impl/ConditionVerificationStatusTranslatorImpl_2_2.java", "diffHunk": "@@ -26,28 +26,29 @@ public CodeableConcept toFhirResource(ConditionVerificationStatus verificationSt\n \t\tif (verificationStatus == null) {\n \t\t\treturn null;\n \t\t}\n-\t\treturn this.setVerificationStatus(verificationStatus.toString());\n+\t\treturn new CodeableConcept().addCoding(addVerificationStatusCoding(verificationStatus.toString()));\n \t}\n \t\n \t@Override\n \tpublic ConditionVerificationStatus toOpenmrsType(CodeableConcept codeableConcept) {\n-\t\treturn codeableConcept.getCoding().stream().filter(coding -> coding.getSystem().equals(FhirConstants.OPENMRS_URI))\n-\t\t        .map(this::getVerificationStatus).findFirst().get();\n-\t}\n-\t\n-\tprivate CodeableConcept setVerificationStatus(String text) {\n-\t\tCodeableConcept codeableConcept = new CodeableConcept();\n-\t\tcodeableConcept.addCoding().setCode(text).setDisplay(text).setSystem(FhirConstants.OPENMRS_URI);\n-\t\treturn codeableConcept;\n-\t}\n-\t\n-\tprivate ConditionVerificationStatus getVerificationStatus(Coding coding) {\n-\t\tswitch (coding.getCode().trim().toLowerCase()) {\n-\t\t\tcase \"confirmed\":\n+\t\tif (codeableConcept.getCoding().isEmpty()) {\n+\t\t\treturn null;\n+\t\t}\n+\t\tswitch (codeableConcept.getCoding().get(0).getCode()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ0MjAxOQ=="}, "originalCommit": {"oid": "c714b00d04d66b821aa4e5f09b4282a9517cf385"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1246, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}