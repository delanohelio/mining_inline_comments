{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMTc5ODAy", "number": 154, "title": "FM2-154: Update MedicationRequest Dao and service", "bodyText": "link:https://issues.openmrs.org/browse/FM2-154", "createdAt": "2020-04-28T15:06:54Z", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/154", "merged": true, "mergeCommit": {"oid": "75b13622fd321d0e0205d5a384b546dd104d6c93"}, "closed": true, "closedAt": "2020-05-05T12:23:34Z", "author": {"login": "gitcliff"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccIpHtgBqjMyODE3MDc3NTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceTKO5gFqTQwNTczNDU3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b43de1ab0c47e2ca30380b266cfe1ccc41778de1", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/b43de1ab0c47e2ca30380b266cfe1ccc41778de1", "committedDate": "2020-04-28T14:55:36Z", "message": "Update MedicationRequest Dao and service"}, "afterCommit": {"oid": "05628016c2e68c9c6526505e983ac3608785a573", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/05628016c2e68c9c6526505e983ac3608785a573", "committedDate": "2020-04-28T18:56:44Z", "message": "Update MedicationRequest Dao and service"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05628016c2e68c9c6526505e983ac3608785a573", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/05628016c2e68c9c6526505e983ac3608785a573", "committedDate": "2020-04-28T18:56:44Z", "message": "Update MedicationRequest Dao and service"}, "afterCommit": {"oid": "3ce6fdcd8c2dede62463cf619536987d9f5b6a34", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/3ce6fdcd8c2dede62463cf619536987d9f5b6a34", "committedDate": "2020-04-30T10:00:57Z", "message": "FM2-154:Update MedicationRequest Dao and service"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3ce6fdcd8c2dede62463cf619536987d9f5b6a34", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/3ce6fdcd8c2dede62463cf619536987d9f5b6a34", "committedDate": "2020-04-30T10:00:57Z", "message": "FM2-154:Update MedicationRequest Dao and service"}, "afterCommit": {"oid": "c367dac2ba284657f587368755580382e2af469f", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/c367dac2ba284657f587368755580382e2af469f", "committedDate": "2020-04-30T10:33:56Z", "message": "FM2-154:Update MedicationRequest Dao and service"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c8224707b4c20f76a67d6434c7e55b5d38f7f67", "author": {"user": {"login": "ibacher", "name": "Ian"}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/1c8224707b4c20f76a67d6434c7e55b5d38f7f67", "committedDate": "2020-04-30T18:03:16Z", "message": "Formatting"}, "afterCommit": {"oid": "c367dac2ba284657f587368755580382e2af469f", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/c367dac2ba284657f587368755580382e2af469f", "committedDate": "2020-04-30T10:33:56Z", "message": "FM2-154:Update MedicationRequest Dao and service"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNzU5OTg0", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/154#pullrequestreview-403759984", "createdAt": "2020-04-30T18:09:15Z", "commit": {"oid": "c367dac2ba284657f587368755580382e2af469f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxODowOToxNVrOGO0rsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxODoxMDowNVrOGO0thQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE5NjQwMg==", "bodyText": "You shouldn't need to define this method. Just rename medicationRequestTranslator to translator", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/154#discussion_r418196402", "createdAt": "2020-04-30T18:09:15Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/impl/FhirMedicationRequestServiceImpl.java", "diffHunk": "@@ -29,7 +35,7 @@\n \tprivate FhirMedicationRequestDao dao;\n \t\n \t@Override\n-\tpublic MedicationRequest getMedicationRequestByUuid(String uuid) {\n-\t\treturn medicationRequestTranslator.toFhirResource(dao.getMedicationRequestByUuid(uuid));\n+\tprotected OpenmrsFhirTranslator<DrugOrder, MedicationRequest> getTranslator() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c367dac2ba284657f587368755580382e2af469f"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE5NjYxNQ==", "bodyText": "I'm not sure why you changed the interface type here?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/154#discussion_r418196615", "createdAt": "2020-04-30T18:09:37Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/MedicationRequestTranslator.java", "diffHunk": "@@ -12,7 +12,7 @@\n import org.hl7.fhir.r4.model.MedicationRequest;\n import org.openmrs.DrugOrder;\n \n-public interface MedicationRequestTranslator extends ToFhirTranslator<DrugOrder, MedicationRequest>, UpdatableOpenmrsTranslator<DrugOrder, MedicationRequest> {\n+public interface MedicationRequestTranslator extends ToFhirTranslator<DrugOrder, MedicationRequest>, OpenmrsFhirUpdatableTranslator<DrugOrder, MedicationRequest> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c367dac2ba284657f587368755580382e2af469f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE5Njg2OQ==", "bodyText": "I don't think we actually want this method.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/154#discussion_r418196869", "createdAt": "2020-04-30T18:10:05Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/translators/impl/MedicationRequestTranslatorImpl.java", "diffHunk": "@@ -67,6 +69,11 @@ public MedicationRequest toFhirResource(DrugOrder drugOrder) {\n \t\treturn medicationRequest;\n \t}\n \t\n+\t@Override\n+\tpublic DrugOrder toOpenmrsType(MedicationRequest medicationRequest) {\n+\t\treturn toOpenmrsType(new DrugOrder(), medicationRequest);\n+\t}\n+\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c367dac2ba284657f587368755580382e2af469f"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c367dac2ba284657f587368755580382e2af469f", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/c367dac2ba284657f587368755580382e2af469f", "committedDate": "2020-04-30T10:33:56Z", "message": "FM2-154:Update MedicationRequest Dao and service"}, "afterCommit": {"oid": "2cd47bbe3cbc6b49adc227f63a52b828688582c1", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/2cd47bbe3cbc6b49adc227f63a52b828688582c1", "committedDate": "2020-05-01T07:08:25Z", "message": "FM2-154:Update MedicationRequest Dao and service"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzM0Mjcz", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/154#pullrequestreview-404334273", "createdAt": "2020-05-01T18:50:29Z", "commit": {"oid": "2cd47bbe3cbc6b49adc227f63a52b828688582c1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxODo1MDoyOVrOGPSbJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxODo1MToxNlrOGPScbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4MzY4Nw==", "bodyText": "This also shouldn't be necessary. You can tweak the AccessLevel of the @Setter annotation above if this needs to be protected or public.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/154#discussion_r418683687", "createdAt": "2020-05-01T18:50:29Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/impl/FhirMedicationRequestServiceImpl.java", "diffHunk": "@@ -9,27 +9,31 @@\n  */\n package org.openmrs.module.fhir2.api.impl;\n \n-import lombok.AccessLevel;\n-import lombok.Setter;\n import org.hl7.fhir.r4.model.MedicationRequest;\n import org.openmrs.module.fhir2.api.FhirMedicationRequestService;\n import org.openmrs.module.fhir2.api.dao.FhirMedicationRequestDao;\n import org.openmrs.module.fhir2.api.translators.MedicationRequestTranslator;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n \n+import lombok.AccessLevel;\n+import lombok.Getter;\n+import lombok.Setter;\n+\n @Component\n @Setter(AccessLevel.PACKAGE)\n-public class FhirMedicationRequestServiceImpl implements FhirMedicationRequestService {\n+@Getter(AccessLevel.PROTECTED)\n+public class FhirMedicationRequestServiceImpl extends BaseFhirService<MedicationRequest, org.openmrs.DrugOrder> implements FhirMedicationRequestService {\n \t\n \t@Autowired\n-\tprivate MedicationRequestTranslator medicationRequestTranslator;\n+\tprivate MedicationRequestTranslator translator;\n \t\n \t@Autowired\n \tprivate FhirMedicationRequestDao dao;\n-\t\n-\t@Override\n-\tpublic MedicationRequest getMedicationRequestByUuid(String uuid) {\n-\t\treturn medicationRequestTranslator.toFhirResource(dao.getMedicationRequestByUuid(uuid));\n+\n+\tpublic void setMedicationRequestTranslator(MedicationRequestTranslator translator) {\n+\t\tthis.translator = translator;\n \t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cd47bbe3cbc6b49adc227f63a52b828688582c1"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4Mzk4Mg==", "bodyText": "Can you add a blank new line before this?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/154#discussion_r418683982", "createdAt": "2020-05-01T18:51:12Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/dao/FhirMedicationRequestDao.java", "diffHunk": "@@ -13,8 +13,8 @@\n \n import org.openmrs.DrugOrder;\n \n-public interface FhirMedicationRequestDao {\n-\t\n-\tDrugOrder getMedicationRequestByUuid(@NotNull String uuid);\n+public interface FhirMedicationRequestDao extends FhirDao<DrugOrder>{\n+\t@Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cd47bbe3cbc6b49adc227f63a52b828688582c1"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4NDAxMw==", "bodyText": "Can you add a blank new line before this?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/154#discussion_r418684013", "createdAt": "2020-05-01T18:51:16Z", "author": {"login": "ibacher"}, "path": "api/src/main/java/org/openmrs/module/fhir2/api/FhirMedicationRequestService.java", "diffHunk": "@@ -13,8 +13,8 @@\n \n import org.hl7.fhir.r4.model.MedicationRequest;\n \n-public interface FhirMedicationRequestService {\n-\t\n-\tMedicationRequest getMedicationRequestByUuid(@NotNull String uuid);\n+public interface FhirMedicationRequestService extends FhirService<MedicationRequest>{\n+\t@Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cd47bbe3cbc6b49adc227f63a52b828688582c1"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c27eedacdef6b2f4c6726639f78a6b123ca28fe7", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/c27eedacdef6b2f4c6726639f78a6b123ca28fe7", "committedDate": "2020-05-04T19:15:25Z", "message": "FM2-154:Update MedicationRequest Dao and service"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2cd47bbe3cbc6b49adc227f63a52b828688582c1", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/2cd47bbe3cbc6b49adc227f63a52b828688582c1", "committedDate": "2020-05-01T07:08:25Z", "message": "FM2-154:Update MedicationRequest Dao and service"}, "afterCommit": {"oid": "c27eedacdef6b2f4c6726639f78a6b123ca28fe7", "author": {"user": {"login": "gitcliff", "name": null}}, "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/c27eedacdef6b2f4c6726639f78a6b123ca28fe7", "committedDate": "2020-05-04T19:15:25Z", "message": "FM2-154:Update MedicationRequest Dao and service"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NzM0NTcz", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/154#pullrequestreview-405734573", "createdAt": "2020-05-05T12:23:11Z", "commit": {"oid": "c27eedacdef6b2f4c6726639f78a6b123ca28fe7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4290, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}