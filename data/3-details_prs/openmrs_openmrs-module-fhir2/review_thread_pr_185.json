{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzODk1MzUx", "number": 185, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNzoxMjoyMFrOEAMjsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNzoxMjoyMFrOEAMjsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NjQxMjAzOnYy", "diffSide": "RIGHT", "path": "omod/src/main/java/org/openmrs/module/fhir2/providers/EncounterFhirResourceProvider.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNzoxMjoyMVrOGbU8Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNzozNzowN1rOGbpKZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMwNzgyNw==", "bodyText": "@reagan-meant I don't think that we should do this here.\ncc @ibacher", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/185#discussion_r431307827", "createdAt": "2020-05-27T17:12:21Z", "author": {"login": "VaishSiddharth"}, "path": "omod/src/main/java/org/openmrs/module/fhir2/providers/EncounterFhirResourceProvider.java", "diffHunk": "@@ -69,7 +69,12 @@ public Bundle searchEncounter(@OptionalParam(name = Encounter.SP_DATE) DateRange\n \t                Practitioner.SP_GIVEN, Practitioner.SP_FAMILY,\n \t                Practitioner.SP_NAME }, targetTypes = Practitioner.class) ReferenceParam participantReference,\n \t        @OptionalParam(name = Encounter.SP_SUBJECT, chainWhitelist = { \"\", Patient.SP_IDENTIFIER, Patient.SP_GIVEN,\n-\t                Patient.SP_FAMILY, Patient.SP_NAME }, targetTypes = Patient.class) ReferenceParam subjectReference) {\n+\t\t\t\t\tPatient.SP_FAMILY, Patient.SP_NAME }, targetTypes = Patient.class) ReferenceParam subjectReference,\n+\t\t\t@OptionalParam(name = Encounter.SP_PATIENT, chainWhitelist = { \"\", Patient.SP_IDENTIFIER, Patient.SP_GIVEN,\n+\t                Patient.SP_FAMILY, Patient.SP_NAME }, targetTypes = Patient.class) ReferenceParam patientReference) {\n+\t\t\t\t\t\tif(patientReference != null){\n+\t\t\t\t\t\t\tsubjectReference = patientReference;\n+\t\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50dcba1c852372f16c6528c97406ec1edb992d7f"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQwMjM3NQ==", "bodyText": "Actually, this is explicitly what we do want to have happen. The patient search parameter is a sub-set of the subject search parameter where the subject is a Patient. So the patient parameter is more exact than the subject parameter. I suppose the other thing we could do is throw an exception here.", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/185#discussion_r431402375", "createdAt": "2020-05-27T19:47:47Z", "author": {"login": "ibacher"}, "path": "omod/src/main/java/org/openmrs/module/fhir2/providers/EncounterFhirResourceProvider.java", "diffHunk": "@@ -69,7 +69,12 @@ public Bundle searchEncounter(@OptionalParam(name = Encounter.SP_DATE) DateRange\n \t                Practitioner.SP_GIVEN, Practitioner.SP_FAMILY,\n \t                Practitioner.SP_NAME }, targetTypes = Practitioner.class) ReferenceParam participantReference,\n \t        @OptionalParam(name = Encounter.SP_SUBJECT, chainWhitelist = { \"\", Patient.SP_IDENTIFIER, Patient.SP_GIVEN,\n-\t                Patient.SP_FAMILY, Patient.SP_NAME }, targetTypes = Patient.class) ReferenceParam subjectReference) {\n+\t\t\t\t\tPatient.SP_FAMILY, Patient.SP_NAME }, targetTypes = Patient.class) ReferenceParam subjectReference,\n+\t\t\t@OptionalParam(name = Encounter.SP_PATIENT, chainWhitelist = { \"\", Patient.SP_IDENTIFIER, Patient.SP_GIVEN,\n+\t                Patient.SP_FAMILY, Patient.SP_NAME }, targetTypes = Patient.class) ReferenceParam patientReference) {\n+\t\t\t\t\t\tif(patientReference != null){\n+\t\t\t\t\t\t\tsubjectReference = patientReference;\n+\t\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMwNzgyNw=="}, "originalCommit": {"oid": "50dcba1c852372f16c6528c97406ec1edb992d7f"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTYzOTE0MA==", "bodyText": "@ibacher what would be the potential cause the exception?", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/185#discussion_r431639140", "createdAt": "2020-05-28T07:37:07Z", "author": {"login": "reagan-meant"}, "path": "omod/src/main/java/org/openmrs/module/fhir2/providers/EncounterFhirResourceProvider.java", "diffHunk": "@@ -69,7 +69,12 @@ public Bundle searchEncounter(@OptionalParam(name = Encounter.SP_DATE) DateRange\n \t                Practitioner.SP_GIVEN, Practitioner.SP_FAMILY,\n \t                Practitioner.SP_NAME }, targetTypes = Practitioner.class) ReferenceParam participantReference,\n \t        @OptionalParam(name = Encounter.SP_SUBJECT, chainWhitelist = { \"\", Patient.SP_IDENTIFIER, Patient.SP_GIVEN,\n-\t                Patient.SP_FAMILY, Patient.SP_NAME }, targetTypes = Patient.class) ReferenceParam subjectReference) {\n+\t\t\t\t\tPatient.SP_FAMILY, Patient.SP_NAME }, targetTypes = Patient.class) ReferenceParam subjectReference,\n+\t\t\t@OptionalParam(name = Encounter.SP_PATIENT, chainWhitelist = { \"\", Patient.SP_IDENTIFIER, Patient.SP_GIVEN,\n+\t                Patient.SP_FAMILY, Patient.SP_NAME }, targetTypes = Patient.class) ReferenceParam patientReference) {\n+\t\t\t\t\t\tif(patientReference != null){\n+\t\t\t\t\t\t\tsubjectReference = patientReference;\n+\t\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMwNzgyNw=="}, "originalCommit": {"oid": "50dcba1c852372f16c6528c97406ec1edb992d7f"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 905, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}