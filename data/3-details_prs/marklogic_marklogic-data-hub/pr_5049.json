{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0NTI4MjAx", "number": 5049, "title": "DHFPROD-6327: Fixing unconverted reduce matcher", "bodyText": "Description\nAlso tweaked some trace logging - xdmp:to-json-string seems more useful, as it produces a JSON string that can then be easily copied/pasted into an editor and formatted for analysis.\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Code passes ESLint tests\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-12-23T03:01:22Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/5049", "merged": true, "mergeCommit": {"oid": "f761a347e52a4babdae67c425e2cd79c0c8f4b2e"}, "closed": true, "closedAt": "2021-01-06T15:36:02Z", "author": {"login": "rjrudin"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdo2Mi9gBqjQxNDI0ODMxNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtPQ7zAFqTU2MjAzMTY2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18b8eed1b960be1cd630fbbf3d7269fa0eb185ef", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/18b8eed1b960be1cd630fbbf3d7269fa0eb185ef", "committedDate": "2020-12-23T03:00:47Z", "message": "DHFPROD-6327: Fixing unconverted reduce matcher\n\nNot sure if this is the right fix, but it does fix the defect reported in this issue.\n\nHowever, see the comment in reduceTestLib.sjs. If both the JaneTurner and JackTurner docs exist, the reduce doesn't seem to have any impact."}, "afterCommit": {"oid": "0c01e26ea87830dc7fa209e2161977ba08696f72", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/0c01e26ea87830dc7fa209e2161977ba08696f72", "committedDate": "2020-12-23T03:02:40Z", "message": "DHFPROD-6327: Fixing unconverted reduce matcher\n\nNot sure if this is the right fix, but it does fix the defect reported in this issue.\n\nHowever, see the comment in reduceTestLib.sjs. If both the JaneTurner and JackTurner docs exist, the reduce doesn't seem to have any impact."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NzM4ODgx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/5049#pullrequestreview-559738881", "createdAt": "2020-12-29T23:34:07Z", "commit": {"oid": "0c01e26ea87830dc7fa209e2161977ba08696f72"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQyMzozNDowN1rOIMac7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQyMzozNDowN1rOIMac7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTg4NzIxNQ==", "bodyText": "This should be map:get(\"propertyTitle\")", "url": "https://github.com/marklogic/marklogic-data-hub/pull/5049#discussion_r549887215", "createdAt": "2020-12-29T23:34:07Z", "author": {"login": "ryanjdew"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/com.marklogic.smart-mastering/matcher-impl/helper-impl.xqy", "diffHunk": "@@ -143,7 +143,7 @@ declare function helper-impl:property-name-to-qname($match-options as item(), $f\n       let $qname :=\n         if (fn:exists($property-info)) then\n           let $namespace := fn:string($property-info => map:get(\"namespace\"))\n-          return fn:QName($namespace, helper-impl:NCName-compatible($property-info => map:get(\"entityTitle\")))\n+          return fn:QName($namespace, helper-impl:NCName-compatible($property-info => map:get(\"propertyPath\")))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c01e26ea87830dc7fa209e2161977ba08696f72"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c01e26ea87830dc7fa209e2161977ba08696f72", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/0c01e26ea87830dc7fa209e2161977ba08696f72", "committedDate": "2020-12-23T03:02:40Z", "message": "DHFPROD-6327: Fixing unconverted reduce matcher\n\nNot sure if this is the right fix, but it does fix the defect reported in this issue.\n\nHowever, see the comment in reduceTestLib.sjs. If both the JaneTurner and JackTurner docs exist, the reduce doesn't seem to have any impact."}, "afterCommit": {"oid": "4033e4b98ebaa2cd77831c619f7fa89919a8a070", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/4033e4b98ebaa2cd77831c619f7fa89919a8a070", "committedDate": "2020-12-30T14:29:32Z", "message": "DHFPROD-6327: Fixing unconverted reduce matcher\n\nNot sure if this is the right fix, but it does fix the defect reported in this issue.\n\nHowever, see the comment in reduceTestLib.sjs. If both the JaneTurner and JackTurner docs exist, the reduce doesn't seem to have any impact."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b140101e7ffb7eacf33ecf90e6552f5587784abc", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b140101e7ffb7eacf33ecf90e6552f5587784abc", "committedDate": "2020-12-30T16:43:54Z", "message": "DHFPROD-6327: Fixing unconverted reduce matcher\n\nAlso tweaked some trace logging - xdmp:to-json-string seems more useful, as it produces a JSON string that can then be easily copied/pasted into an editor and formatted for analysis."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4033e4b98ebaa2cd77831c619f7fa89919a8a070", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/4033e4b98ebaa2cd77831c619f7fa89919a8a070", "committedDate": "2020-12-30T14:29:32Z", "message": "DHFPROD-6327: Fixing unconverted reduce matcher\n\nNot sure if this is the right fix, but it does fix the defect reported in this issue.\n\nHowever, see the comment in reduceTestLib.sjs. If both the JaneTurner and JackTurner docs exist, the reduce doesn't seem to have any impact."}, "afterCommit": {"oid": "b140101e7ffb7eacf33ecf90e6552f5587784abc", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b140101e7ffb7eacf33ecf90e6552f5587784abc", "committedDate": "2020-12-30T16:43:54Z", "message": "DHFPROD-6327: Fixing unconverted reduce matcher\n\nAlso tweaked some trace logging - xdmp:to-json-string seems more useful, as it produces a JSON string that can then be easily copied/pasted into an editor and formatted for analysis."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwMTYxNDYw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/5049#pullrequestreview-560161460", "createdAt": "2020-12-30T18:44:38Z", "commit": {"oid": "b140101e7ffb7eacf33ecf90e6552f5587784abc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyMDMxNjY5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/5049#pullrequestreview-562031669", "createdAt": "2021-01-05T18:30:54Z", "commit": {"oid": "b140101e7ffb7eacf33ecf90e6552f5587784abc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1453, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}