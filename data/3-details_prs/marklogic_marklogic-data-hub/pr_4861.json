{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwODAyMTU3", "number": 4861, "title": "DHFPROD-6174: added existing step confirmation in Run Tile", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-11-13T19:20:11Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4861", "merged": true, "mergeCommit": {"oid": "badb53fbf06f08c4781937f9de0bd63ddbefd61f"}, "closed": true, "closedAt": "2020-11-17T22:34:42Z", "author": {"login": "jyangML"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddIhc2gFqTUzMTUzNzc5Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABddhYFogFqTUzMjg2OTIyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNTM3Nzkz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4861#pullrequestreview-531537793", "createdAt": "2020-11-16T17:19:09Z", "commit": {"oid": "df2a3fd327049f1ee0379a067e7f7c4fb7b8143e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNzoxOToxMFrOH0JN8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNzozNjozMFrOH0J9XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQzOTAyNg==", "bodyText": "@MLjyang, let's make the styling here consistent with what's in the other confirmation boxes (the styling was updated recently). Use bold styling instead of quotes:", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4861#discussion_r524439026", "createdAt": "2020-11-16T17:19:10Z", "author": {"login": "wooldridge"}, "path": "marklogic-data-hub-central/ui/src/components/flows/flows.tsx", "diffHunk": "@@ -323,7 +331,15 @@ const Flows: React.FC<Props> = (props) => {\n             onCancel={() => onCancel()}\n             width={350}\n         >\n-            <div style={{fontSize: '16px', padding: '10px'}}>Are you sure you want to add step \"{stepName}\" to flow \"{flowName}\"?</div>\n+            <div style={{fontSize: '16px', padding: '10px'}}>\n+                {\n+                    isStepInFlow(stepName, flowName)\n+                    ?\n+                    <p>The step \"{stepName}\" is already in the flow \"{flowName}\". Would you like to add another instance?</p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df2a3fd327049f1ee0379a067e7f7c4fb7b8143e"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQ1MTE2NQ==", "bodyText": "Can we move these styles into a CSS class? You may need to apply the class via flows.scss (instead of flows.module.scss) in order to override what's applied by Ant Design.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4861#discussion_r524451165", "createdAt": "2020-11-16T17:36:30Z", "author": {"login": "wooldridge"}, "path": "marklogic-data-hub-central/ui/src/components/flows/flows.tsx", "diffHunk": "@@ -323,7 +331,15 @@ const Flows: React.FC<Props> = (props) => {\n             onCancel={() => onCancel()}\n             width={350}\n         >\n-            <div style={{fontSize: '16px', padding: '10px'}}>Are you sure you want to add step \"{stepName}\" to flow \"{flowName}\"?</div>\n+            <div style={{fontSize: '16px', padding: '10px'}}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df2a3fd327049f1ee0379a067e7f7c4fb7b8143e"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df2a3fd327049f1ee0379a067e7f7c4fb7b8143e", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/df2a3fd327049f1ee0379a067e7f7c4fb7b8143e", "committedDate": "2020-11-13T14:33:03Z", "message": "DHFPROD-6174: added existing step confirmation in Run Tile"}, "afterCommit": {"oid": "358e48566860116b1de9720114d8d476a9c25141", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/358e48566860116b1de9720114d8d476a9c25141", "committedDate": "2020-11-16T22:15:30Z", "message": "DHFPROD-6174: added existing step confirmation in Run Tile"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "358e48566860116b1de9720114d8d476a9c25141", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/358e48566860116b1de9720114d8d476a9c25141", "committedDate": "2020-11-16T22:15:30Z", "message": "DHFPROD-6174: added existing step confirmation in Run Tile"}, "afterCommit": {"oid": "f5cb59ecb0a6febdd5c248948122610e567fe4d0", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/f5cb59ecb0a6febdd5c248948122610e567fe4d0", "committedDate": "2020-11-16T22:16:10Z", "message": "DHFPROD-6174: added existing step confirmation in Run Tile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxOTA0NzI1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4861#pullrequestreview-531904725", "createdAt": "2020-11-16T23:26:08Z", "commit": {"oid": "f5cb59ecb0a6febdd5c248948122610e567fe4d0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzoyNjowOFrOH0b5sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMzoyNjozN1rOH0b7pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc0NTEzOQ==", "bodyText": "Instead of creating a new Matcher function, you can use 'getSubElements', ex:\n        expect(await(waitForElement(() => getByText((content, node) => {\n            return getSubElements(content, node,`Are you sure you to add step ${data.steps.data['ingestionSteps'][0].name} to flow ${data.flows.data[0].name}?`);\n        })))).toBeInTheDocument();\n\nPlease try using that and removing the snippet creating a new function.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4861#discussion_r524745139", "createdAt": "2020-11-16T23:26:08Z", "author": {"login": "briantang"}, "path": "marklogic-data-hub-central/ui/src/pages/Run.test.tsx", "diffHunk": "@@ -775,7 +790,7 @@ describe('Verify Add Step function', () => {\n         fireEvent.click(step);\n \n         // Click to confirm the add in the dialog\n-        expect(getByText(`Are you sure you want to add step \"${data.steps.data['ingestionSteps'][0].name}\" to flow \"${data.flows.data[0].name}\"?`)).toBeInTheDocument();\n+        expect(getByTextWithMarkup(`Are you sure you want to add step ${data.steps.data['ingestionSteps'][0].name} to flow ${data.flows.data[0].name}?`)).toBeInTheDocument();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5cb59ecb0a6febdd5c248948122610e567fe4d0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc0NTYzOA==", "bodyText": "Same situation here. Everything else looks good!", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4861#discussion_r524745638", "createdAt": "2020-11-16T23:26:37Z", "author": {"login": "briantang"}, "path": "marklogic-data-hub-central/ui/src/pages/Run.test.tsx", "diffHunk": "@@ -830,7 +860,7 @@ describe('Verify Add Step function', () => {\n         fireEvent.click(step);\n \n         // Click to confirm the add in the dialog\n-        expect(getByText(`Are you sure you want to add step \"${data.steps.data['ingestionSteps'][0].name}\" to flow \"${data.flows.data[0].name}\"?`)).toBeInTheDocument();\n+        expect(getByTextWithMarkup(`Are you sure you want to add step ${data.steps.data['ingestionSteps'][0].name} to flow ${data.flows.data[0].name}?`)).toBeInTheDocument();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5cb59ecb0a6febdd5c248948122610e567fe4d0"}, "originalPosition": 58}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f5cb59ecb0a6febdd5c248948122610e567fe4d0", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/f5cb59ecb0a6febdd5c248948122610e567fe4d0", "committedDate": "2020-11-16T22:16:10Z", "message": "DHFPROD-6174: added existing step confirmation in Run Tile"}, "afterCommit": {"oid": "5c95ed492b806d0e2336d0c8baca8df6dc93994b", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/5c95ed492b806d0e2336d0c8baca8df6dc93994b", "committedDate": "2020-11-17T15:03:29Z", "message": "DHFPROD-6174: added existing step confirmation in Run Tile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee21fc2986d18ce8e83b6f57e1e517fed11ca439", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/ee21fc2986d18ce8e83b6f57e1e517fed11ca439", "committedDate": "2020-11-17T15:04:22Z", "message": "DHFPROD-6174: added existing step confirmation in Run Tile"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5c95ed492b806d0e2336d0c8baca8df6dc93994b", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/5c95ed492b806d0e2336d0c8baca8df6dc93994b", "committedDate": "2020-11-17T15:03:29Z", "message": "DHFPROD-6174: added existing step confirmation in Run Tile"}, "afterCommit": {"oid": "ee21fc2986d18ce8e83b6f57e1e517fed11ca439", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/ee21fc2986d18ce8e83b6f57e1e517fed11ca439", "committedDate": "2020-11-17T15:04:22Z", "message": "DHFPROD-6174: added existing step confirmation in Run Tile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNTc3MTgy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4861#pullrequestreview-532577182", "createdAt": "2020-11-17T16:51:12Z", "commit": {"oid": "ee21fc2986d18ce8e83b6f57e1e517fed11ca439"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNzczOTc0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4861#pullrequestreview-532773974", "createdAt": "2020-11-17T20:14:52Z", "commit": {"oid": "ee21fc2986d18ce8e83b6f57e1e517fed11ca439"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyODY5MjIy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4861#pullrequestreview-532869222", "createdAt": "2020-11-17T22:34:13Z", "commit": {"oid": "ee21fc2986d18ce8e83b6f57e1e517fed11ca439"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1670, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}