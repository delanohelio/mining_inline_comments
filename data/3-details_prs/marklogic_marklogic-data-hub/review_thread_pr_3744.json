{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNzg2NDk1", "number": 3744, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNTo0NToyOFrODqpneQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMjowNjowM1rODqwwZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MDQ4NjMzOnYy", "diffSide": "RIGHT", "path": "azure/flow-runner-function/src/main/java/com/marklogic/dhf/azure/FunctionDhfFlow.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNTo0NToyOFrOF6htBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNjozNDowN1rOF6iiJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjkxMzkyNw==", "bodyText": "\"error\" seems like the better logging level here", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3744#discussion_r396913927", "createdAt": "2020-03-24T05:45:28Z", "author": {"login": "srinathgit"}, "path": "azure/flow-runner-function/src/main/java/com/marklogic/dhf/azure/FunctionDhfFlow.java", "diffHunk": "@@ -38,20 +38,25 @@ public HttpResponseMessage run(\n         } else {\n             // Write the name to the message queue.\n             msg.setValue(name);\n-\n-            runFlow();\n-            return request.createResponseBuilder(HttpStatus.OK).body(\"Hello, \" + name).build();\n+            String runFlowMessage = \"Flow <\" + name + \"> successfully executed.\"; //default message\n+            try {\n+                runFlow(name);\n+            } catch (Exception ex) {\n+                context.getLogger().info(\"Exception caught: \" + ex.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f146825e65a3966d3841eca0da2dc01beb068037"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjkyNzUyNw==", "bodyText": "Good point. User would never see this message as it will be logged at the azure apps backend. But nonetheless, changed to \"severe\" to honor the semantics.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3744#discussion_r396927527", "createdAt": "2020-03-24T06:34:07Z", "author": {"login": "vgouraba"}, "path": "azure/flow-runner-function/src/main/java/com/marklogic/dhf/azure/FunctionDhfFlow.java", "diffHunk": "@@ -38,20 +38,25 @@ public HttpResponseMessage run(\n         } else {\n             // Write the name to the message queue.\n             msg.setValue(name);\n-\n-            runFlow();\n-            return request.createResponseBuilder(HttpStatus.OK).body(\"Hello, \" + name).build();\n+            String runFlowMessage = \"Flow <\" + name + \"> successfully executed.\"; //default message\n+            try {\n+                runFlow(name);\n+            } catch (Exception ex) {\n+                context.getLogger().info(\"Exception caught: \" + ex.getMessage());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjkxMzkyNw=="}, "originalCommit": {"oid": "f146825e65a3966d3841eca0da2dc01beb068037"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MDQ5MDc4OnYy", "diffSide": "RIGHT", "path": "azure/flow-runner-function/src/main/java/com/marklogic/dhf/azure/FunctionDhfFlow.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNTo0ODoxOFrOF6hvvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNjowNzowMFrOF6iDWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjkxNDYyMQ==", "bodyText": "'RunFlowResponse' object.toString() returns a JSON string which provides details of every step that ran in the flow, along with the stats. Will that be more useful to the user ?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3744#discussion_r396914621", "createdAt": "2020-03-24T05:48:18Z", "author": {"login": "srinathgit"}, "path": "azure/flow-runner-function/src/main/java/com/marklogic/dhf/azure/FunctionDhfFlow.java", "diffHunk": "@@ -38,20 +38,25 @@ public HttpResponseMessage run(\n         } else {\n             // Write the name to the message queue.\n             msg.setValue(name);\n-\n-            runFlow();\n-            return request.createResponseBuilder(HttpStatus.OK).body(\"Hello, \" + name).build();\n+            String runFlowMessage = \"Flow <\" + name + \"> successfully executed.\"; //default message", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f146825e65a3966d3841eca0da2dc01beb068037"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjkxOTY0Mg==", "bodyText": "As part of this Jira, we are not actually running a valid flow. I plan to providing a valid/correct response as part of the next Jira 4532. As part of the current Jira 4531, we are always returning HTTP 200 with a status message (in this case it will always be exception message).", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3744#discussion_r396919642", "createdAt": "2020-03-24T06:07:00Z", "author": {"login": "vgouraba"}, "path": "azure/flow-runner-function/src/main/java/com/marklogic/dhf/azure/FunctionDhfFlow.java", "diffHunk": "@@ -38,20 +38,25 @@ public HttpResponseMessage run(\n         } else {\n             // Write the name to the message queue.\n             msg.setValue(name);\n-\n-            runFlow();\n-            return request.createResponseBuilder(HttpStatus.OK).body(\"Hello, \" + name).build();\n+            String runFlowMessage = \"Flow <\" + name + \"> successfully executed.\"; //default message", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjkxNDYyMQ=="}, "originalCommit": {"oid": "f146825e65a3966d3841eca0da2dc01beb068037"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MTY1MzQ5OnYy", "diffSide": "RIGHT", "path": "azure/flow-runner-function/README.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMjowNToxOFrOF6tKSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNzoxOTozNVrOF66_HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEwMTY0Mg==", "bodyText": "Small nit - can you name is \"data-hub-sample\" instead of \"dhf-sample\"? We try to use \"data-hub\" instead of \"dhf\" wherever possible.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3744#discussion_r397101642", "createdAt": "2020-03-24T12:05:18Z", "author": {"login": "rjrudin"}, "path": "azure/flow-runner-function/README.md", "diffHunk": "@@ -34,7 +34,7 @@ Then deploy your function (this can take many seconds to finish):\n \n Then get your HTTP trigger URL and test the endpoint - your URL should be similar to what's shown below:\n \n-    curl -w \"\\n\" https://az-functions-20200227122602814.azurewebsites.net/api/HttpExampleDhfFlow --data flowNameDoesntMatterYet\n+    curl -w \"\\n\" https://az-functions-dhf-sample-v1.azurewebsites.net/api/HttpExampleDhfFlow --data flowNameDoesntMatterYet", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25c8a846d3af4a0052739b072a7968b22ec8a5fe"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMyODE1Nw==", "bodyText": "Sure. Done.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3744#discussion_r397328157", "createdAt": "2020-03-24T17:19:35Z", "author": {"login": "vgouraba"}, "path": "azure/flow-runner-function/README.md", "diffHunk": "@@ -34,7 +34,7 @@ Then deploy your function (this can take many seconds to finish):\n \n Then get your HTTP trigger URL and test the endpoint - your URL should be similar to what's shown below:\n \n-    curl -w \"\\n\" https://az-functions-20200227122602814.azurewebsites.net/api/HttpExampleDhfFlow --data flowNameDoesntMatterYet\n+    curl -w \"\\n\" https://az-functions-dhf-sample-v1.azurewebsites.net/api/HttpExampleDhfFlow --data flowNameDoesntMatterYet", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEwMTY0Mg=="}, "originalCommit": {"oid": "25c8a846d3af4a0052739b072a7968b22ec8a5fe"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MTY1NjA1OnYy", "diffSide": "RIGHT", "path": "azure/flow-runner-function/src/main/java/com/marklogic/dhf/azure/FunctionDhfFlow.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMjowNjowM1rOF6tL-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNzoxOTo1NlrOF67ACQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEwMjA3NQ==", "bodyText": "Same thing, can you do DataHubFlow? Or - just rename this in the next JIRA ticket. Either approach is fine.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3744#discussion_r397102075", "createdAt": "2020-03-24T12:06:03Z", "author": {"login": "rjrudin"}, "path": "azure/flow-runner-function/src/main/java/com/marklogic/dhf/azure/FunctionDhfFlow.java", "diffHunk": "@@ -18,9 +18,9 @@\n  */\n public class FunctionDhfFlow {\n     /**\n-     * This function listens at endpoint \"/api/HttpExample\". Two ways to invoke it using \"curl\" command in bash:\n-     * 1. curl -d \"HTTP Body\" {your host}/api/HttpExample\n-     * 2. curl \"{your host}/api/HttpExample?name=HTTP%20Query\"\n+     * This function listens at endpoint \"/api/HttpExampleDhfFlow\". Two ways to invoke it using \"curl\" command in bash:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25c8a846d3af4a0052739b072a7968b22ec8a5fe"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMyODM5Mw==", "bodyText": "Sure. Done.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3744#discussion_r397328393", "createdAt": "2020-03-24T17:19:56Z", "author": {"login": "vgouraba"}, "path": "azure/flow-runner-function/src/main/java/com/marklogic/dhf/azure/FunctionDhfFlow.java", "diffHunk": "@@ -18,9 +18,9 @@\n  */\n public class FunctionDhfFlow {\n     /**\n-     * This function listens at endpoint \"/api/HttpExample\". Two ways to invoke it using \"curl\" command in bash:\n-     * 1. curl -d \"HTTP Body\" {your host}/api/HttpExample\n-     * 2. curl \"{your host}/api/HttpExample?name=HTTP%20Query\"\n+     * This function listens at endpoint \"/api/HttpExampleDhfFlow\". Two ways to invoke it using \"curl\" command in bash:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEwMjA3NQ=="}, "originalCommit": {"oid": "25c8a846d3af4a0052739b072a7968b22ec8a5fe"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3508, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}