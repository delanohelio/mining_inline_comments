{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MzA4NjYw", "number": 3508, "title": "DHFPROD-4222:Create endpoints for getting all flows, all steps in a flow", "bodyText": "Create endpoints for getting all flows, all steps in a flow", "createdAt": "2020-01-27T04:37:58Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3508", "merged": true, "mergeCommit": {"oid": "c133073b35540dd029fc7d12a6ca10359c2b5831"}, "closed": true, "closedAt": "2020-01-27T21:50:09Z", "author": {"login": "srinathgit"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-c6CVAFqTM0ODY2MzIyOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-j4O-AFqTM0ODk5NzY5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NjYzMjI5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3508#pullrequestreview-348663229", "createdAt": "2020-01-27T13:33:51Z", "commit": {"oid": "b795cd0de81138bae215262c190e61aca0af3aee"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMzozMzo1MVrOFiCxEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMzozNTo1NVrOFiC0vA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTI0MTIzNQ==", "bodyText": "Shouldn't this method be on FlowManager? FlowManager has knowledge of how to read files and get flow names, so I think it should know how to return a list of flows as well (and sort them too).", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3508#discussion_r371241235", "createdAt": "2020-01-27T13:33:51Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/curation/services/FlowManagerService.java", "diffHunk": "@@ -100,6 +99,30 @@ public void deleteFlow(String flowName) {\n         flowManager.deleteFlow(flowName);\n     }\n \n+    public List<Flow> getFlows() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b795cd0de81138bae215262c190e61aca0af3aee"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTI0MjE3Mg==", "bodyText": "What's the point of having separate Step and StepModel classes? This seems confusing and is unnecessary work of having to translate between the two.\nAlso, couldn't a \"getFlow\" method just return a JsonNode, in which case this method isn't even needed?\nIsn't life a lot easier if we just pass JSON around??", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3508#discussion_r371242172", "createdAt": "2020-01-27T13:35:55Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/curation/services/FlowManagerService.java", "diffHunk": "@@ -100,6 +99,30 @@ public void deleteFlow(String flowName) {\n         flowManager.deleteFlow(flowName);\n     }\n \n+    public List<Flow> getFlows() {\n+        List<String> flowNames = flowManager.getFlowNames();\n+        List<Flow> flows = new ArrayList<>();\n+        flowNames.forEach((flowName)->{\n+            flows.add(getFlow(flowName));\n+        });\n+        Collections.sort(flows, (a, b) -> a.getName().compareTo(b.getName()));\n+        return flows;\n+    }\n+\n+    public List<StepModel> getSteps(String flowName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b795cd0de81138bae215262c190e61aca0af3aee"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a0e75643ff85d816c6ba2032f2568036f9a38e3", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/8a0e75643ff85d816c6ba2032f2568036f9a38e3", "committedDate": "2020-01-27T19:27:32Z", "message": "DHFPROD-4222:Create endpoints for getting all flows, all steps in a flow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b795cd0de81138bae215262c190e61aca0af3aee", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b795cd0de81138bae215262c190e61aca0af3aee", "committedDate": "2020-01-27T04:37:26Z", "message": "DHFPROD-4222:Create endpoints for getting all flows, all steps in a flow"}, "afterCommit": {"oid": "8a0e75643ff85d816c6ba2032f2568036f9a38e3", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/8a0e75643ff85d816c6ba2032f2568036f9a38e3", "committedDate": "2020-01-27T19:27:32Z", "message": "DHFPROD-4222:Create endpoints for getting all flows, all steps in a flow"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTMyNjAx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3508#pullrequestreview-348932601", "createdAt": "2020-01-27T19:53:30Z", "commit": {"oid": "8a0e75643ff85d816c6ba2032f2568036f9a38e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTM3NDA0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3508#pullrequestreview-348937404", "createdAt": "2020-01-27T20:01:12Z", "commit": {"oid": "8a0e75643ff85d816c6ba2032f2568036f9a38e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTgxMjAw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3508#pullrequestreview-348981200", "createdAt": "2020-01-27T21:18:14Z", "commit": {"oid": "8a0e75643ff85d816c6ba2032f2568036f9a38e3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMToxODoxNVrOFiRylw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMToxODoxNVrOFiRylw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ4NzM4Mw==", "bodyText": "I don't understand why the UI doesn't know anything about a step definition. \"Step\" and \"Step Definition\" are distinct concepts in the DHF domain model; a client should understand both of them.\nIs \"StepModel\" really a synonym for \"StepDefinition\"? If so, can StepModel be renamed to StepDefinition?\nI think the core problem here is if someone looks at the Step and StepModel classes, there's no way to know why they both exist. Perhaps the immediate solution is class comments to explain what concept each class represents, and in the StepModel case, why it differs from Step. Those can be in a separate PR; I'll stand down on this point for now.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3508#discussion_r371487383", "createdAt": "2020-01-27T21:18:15Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/curation/services/FlowManagerService.java", "diffHunk": "@@ -100,6 +99,30 @@ public void deleteFlow(String flowName) {\n         flowManager.deleteFlow(flowName);\n     }\n \n+    public List<Flow> getFlows() {\n+        List<String> flowNames = flowManager.getFlowNames();\n+        List<Flow> flows = new ArrayList<>();\n+        flowNames.forEach((flowName)->{\n+            flows.add(getFlow(flowName));\n+        });\n+        Collections.sort(flows, (a, b) -> a.getName().compareTo(b.getName()));\n+        return flows;\n+    }\n+\n+    public List<StepModel> getSteps(String flowName) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTI0MjE3Mg=="}, "originalCommit": {"oid": "b795cd0de81138bae215262c190e61aca0af3aee"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTk3Njk3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3508#pullrequestreview-348997697", "createdAt": "2020-01-27T21:46:20Z", "commit": {"oid": "8a0e75643ff85d816c6ba2032f2568036f9a38e3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2386, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}