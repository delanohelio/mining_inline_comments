{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1MzY2MTgy", "number": 3927, "title": "DHFPROD-4224: Start export of search results directly from the table \u2026", "bodyText": "\u2026viz. in the UI\nIncludes DHFPROD-4223: Select a saved query to begin file export\nDescription\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-05-08T18:24:24Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927", "merged": true, "mergeCommit": {"oid": "66900cac843e189280f6d0d315df789bb11d4e8b"}, "closed": true, "closedAt": "2020-05-11T18:55:45Z", "author": {"login": "timur-isangulov"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfWMeGABqjMzMTc5NzIzNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgaz-vAFqTQwOTY1NTkzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "88a76445de83b3855f8bbb0e4d48ffdd5d477dad", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/88a76445de83b3855f8bbb0e4d48ffdd5d477dad", "committedDate": "2020-05-08T18:22:22Z", "message": "DHFPROD-4224: Start export of search results directly from the table viz. in the UI"}, "afterCommit": {"oid": "943638bc3ecae18d037bbee09a3f476ec60767bd", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/943638bc3ecae18d037bbee09a3f476ec60767bd", "committedDate": "2020-05-08T18:28:43Z", "message": "DHFPROD-4224: Start export of search results directly from the table viz. in the UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5Mjg4MTg5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#pullrequestreview-409288189", "createdAt": "2020-05-11T15:34:39Z", "commit": {"oid": "943638bc3ecae18d037bbee09a3f476ec60767bd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "943638bc3ecae18d037bbee09a3f476ec60767bd", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/943638bc3ecae18d037bbee09a3f476ec60767bd", "committedDate": "2020-05-08T18:28:43Z", "message": "DHFPROD-4224: Start export of search results directly from the table viz. in the UI"}, "afterCommit": {"oid": "dd78a9a0efda05990ce3a8082d7f5e50ad628a3f", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/dd78a9a0efda05990ce3a8082d7f5e50ad628a3f", "committedDate": "2020-05-11T16:13:51Z", "message": "DHFPROD-4224: Start export of search results directly from the table viz. in the UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5Mzg1MTE3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#pullrequestreview-409385117", "createdAt": "2020-05-11T17:35:59Z", "commit": {"oid": "dd78a9a0efda05990ce3a8082d7f5e50ad628a3f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5Mzg4NTEw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#pullrequestreview-409388510", "createdAt": "2020-05-11T17:40:38Z", "commit": {"oid": "dd78a9a0efda05990ce3a8082d7f5e50ad628a3f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c9af824e4e8a5d9745c6aa03971af47a60657ec", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/6c9af824e4e8a5d9745c6aa03971af47a60657ec", "committedDate": "2020-05-11T18:01:10Z", "message": "DHFPROD-4224: Start export of search results directly from the table viz. in the UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10c31dd559172a15231d7bb98b3509bfc616b39b", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/10c31dd559172a15231d7bb98b3509bfc616b39b", "committedDate": "2020-05-11T18:00:09Z", "message": "DHFPROD-4224: Start export of search results directly from the table viz. in the UI"}, "afterCommit": {"oid": "6c9af824e4e8a5d9745c6aa03971af47a60657ec", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/6c9af824e4e8a5d9745c6aa03971af47a60657ec", "committedDate": "2020-05-11T18:01:10Z", "message": "DHFPROD-4224: Start export of search results directly from the table viz. in the UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NDA1NDYz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#pullrequestreview-409405463", "createdAt": "2020-05-11T18:03:48Z", "commit": {"oid": "6c9af824e4e8a5d9745c6aa03971af47a60657ec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NDA1OTEx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#pullrequestreview-409405911", "createdAt": "2020-05-11T18:04:26Z", "commit": {"oid": "6c9af824e4e8a5d9745c6aa03971af47a60657ec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjUzMjM5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#pullrequestreview-409653239", "createdAt": "2020-05-12T02:16:53Z", "commit": {"oid": "6c9af824e4e8a5d9745c6aa03971af47a60657ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMjoxNjo1M1rOGTztcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMjoxNjo1M1rOGTztcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQyMzM0NQ==", "bodyText": "We can remove this test, since it is being verified in line 38 and it is better there since there are assertions following the click event. This test with 1 line of click can be deleted as it adds no value.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#discussion_r423423345", "createdAt": "2020-05-12T02:16:53Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/query-export/query-export-modal/query-export-modal.test.tsx", "diffHunk": "@@ -0,0 +1,74 @@\n+import React from 'react';\n+import { fireEvent, render } from \"@testing-library/react\";\n+import QueryExportModal from './query-export-modal';\n+\n+\n+describe('Query Export Component', () => {\n+\n+  let columns = ['id', 'firstName', 'lastName', 'age']\n+\n+  test('Verify Query Export Modal Dialog renders', () => {\n+    const { getByTestId, getByText } = render(<QueryExportModal exportModalVisibility={true} columns={columns} />);\n+    expect(getByTestId('query-export-form')).toBeInTheDocument();\n+    expect(getByText('Rows:')).toBeInTheDocument();\n+    expect(getByText('All')).toBeInTheDocument();\n+    expect(getByText('Limited set of the first rows returned')).toBeInTheDocument();\n+    expect(getByText('Export to a CSV file containing the columns of data currently displayed.')).toBeInTheDocument();\n+  });\n+\n+  test('Verify able to select All rows', () => {\n+    const { getByText } = render(<QueryExportModal exportModalVisibility={true} columns={columns} />);\n+    fireEvent.click(getByText('All'));\n+  });\n+\n+  test('Verify able to select Limited number of rows', () => {\n+    const { getByText } = render(<QueryExportModal exportModalVisibility={true} columns={columns} />);\n+    fireEvent.click(getByText('Limited set of the first rows returned'));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c9af824e4e8a5d9745c6aa03971af47a60657ec"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjU0MTU3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#pullrequestreview-409654157", "createdAt": "2020-05-12T02:19:53Z", "commit": {"oid": "6c9af824e4e8a5d9745c6aa03971af47a60657ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMjoxOTo1NFrOGTzwcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMjoxOTo1NFrOGTzwcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQyNDExMw==", "bodyText": "Is this expected to be selected by default? Assertion in line 35 doesnt seem to have a click event. If it is supposed to be selected by default, then this one line test again adds no value. There are no assertions here so it will always pass the click event and fail only if \"All\" is missing from the dom. I would recommend deleting this test.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#discussion_r423424113", "createdAt": "2020-05-12T02:19:54Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/query-export/query-export-modal/query-export-modal.test.tsx", "diffHunk": "@@ -0,0 +1,74 @@\n+import React from 'react';\n+import { fireEvent, render } from \"@testing-library/react\";\n+import QueryExportModal from './query-export-modal';\n+\n+\n+describe('Query Export Component', () => {\n+\n+  let columns = ['id', 'firstName', 'lastName', 'age']\n+\n+  test('Verify Query Export Modal Dialog renders', () => {\n+    const { getByTestId, getByText } = render(<QueryExportModal exportModalVisibility={true} columns={columns} />);\n+    expect(getByTestId('query-export-form')).toBeInTheDocument();\n+    expect(getByText('Rows:')).toBeInTheDocument();\n+    expect(getByText('All')).toBeInTheDocument();\n+    expect(getByText('Limited set of the first rows returned')).toBeInTheDocument();\n+    expect(getByText('Export to a CSV file containing the columns of data currently displayed.')).toBeInTheDocument();\n+  });\n+\n+  test('Verify able to select All rows', () => {\n+    const { getByText } = render(<QueryExportModal exportModalVisibility={true} columns={columns} />);\n+    fireEvent.click(getByText('All'));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c9af824e4e8a5d9745c6aa03971af47a60657ec"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjU1OTM0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#pullrequestreview-409655934", "createdAt": "2020-05-12T02:25:58Z", "commit": {"oid": "6c9af824e4e8a5d9745c6aa03971af47a60657ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMjoyNTo1OFrOGTz2Uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwMjoyNTo1OFrOGTz2Uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQyNTYxOQ==", "bodyText": "Some of the assertions in this test is being tested again in test 4 - line 29. I will again getting rid of this test and asserting for elements within functional tests which really test something.\nThis test is only asserting checkboxes are present in the dom. Line 14 from this test is repeated in line 37 (test 4). So if \"All\" is missing in the dom both the test will fail with same reason and it adds to the maintenance of fixing same failures in multiple places. If there was a different action being performed to assert this, then it would make sense. Otherwise this is just duplicative.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3927#discussion_r423425619", "createdAt": "2020-05-12T02:25:58Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/query-export/query-export-modal/query-export-modal.test.tsx", "diffHunk": "@@ -0,0 +1,74 @@\n+import React from 'react';\n+import { fireEvent, render } from \"@testing-library/react\";\n+import QueryExportModal from './query-export-modal';\n+\n+\n+describe('Query Export Component', () => {\n+\n+  let columns = ['id', 'firstName', 'lastName', 'age']\n+\n+  test('Verify Query Export Modal Dialog renders', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c9af824e4e8a5d9745c6aa03971af47a60657ec"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2875, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}