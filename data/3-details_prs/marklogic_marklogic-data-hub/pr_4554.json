{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MjQ4MTcy", "number": 4554, "title": "DHFPROD-5863: Detail page renders merged xml documents", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-09-11T16:33:48Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554", "merged": true, "mergeCommit": {"oid": "536b2a9fe7b4af41a4765d7d2e8618d26864455d"}, "closed": true, "closedAt": "2020-09-16T19:33:39Z", "author": {"login": "rahulvudutala"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdH6lHEAFqTQ4NzA2ODY1OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJfjXDAFqTQ4OTgyOTM5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MDY4NjU5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#pullrequestreview-487068659", "createdAt": "2020-09-11T19:27:11Z", "commit": {"oid": "e33f7c87de646a245e25271ac9c5a58055c8b966"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxOToyNzoxMVrOHQrMZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxOToyODozMlrOHQrOTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI0Njk0OA==", "bodyText": "Let's move the xmlString to UI/src/assets/mock-data folder, may be under 'common.data.ts' or some other appropriate file and then import here so you can use it in multiple places. It makes the tests look cleaner.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#discussion_r487246948", "createdAt": "2020-09-11T19:27:11Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/xml-view/xml-view.test.tsx", "diffHunk": "@@ -0,0 +1,20 @@\n+import {getByText, render} from \"@testing-library/react\";\n+import XmlView from \"../xml-view/xml-view\";\n+import React from \"react\";\n+\n+describe(\"XML view detail component - RTL\", () => {\n+    test('Rendering xml document with es namespace in instance document', () => {\n+        const xmlString = \"<Document><content><es:envelope xmlns:es=\\\"http://marklogic.com/entity-services\\\"><es:instance><Person><fname xsi:type=\\\"xs:string\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\">Alexandra</fname></Person></es:instance></es:envelope></content></Document>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e33f7c87de646a245e25271ac9c5a58055c8b966"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI0NzQzNw==", "bodyText": "Similar changes here as mentioned earlier.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#discussion_r487247437", "createdAt": "2020-09-11T19:28:32Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/xml-view/xml-view.test.tsx", "diffHunk": "@@ -0,0 +1,20 @@\n+import {getByText, render} from \"@testing-library/react\";\n+import XmlView from \"../xml-view/xml-view\";\n+import React from \"react\";\n+\n+describe(\"XML view detail component - RTL\", () => {\n+    test('Rendering xml document with es namespace in instance document', () => {\n+        const xmlString = \"<Document><content><es:envelope xmlns:es=\\\"http://marklogic.com/entity-services\\\"><es:instance><Person><fname xsi:type=\\\"xs:string\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\">Alexandra</fname></Person></es:instance></es:envelope></content></Document>\";\n+        const {  getByTestId, getByText } = render(<XmlView document={xmlString}/>);\n+        expect(getByTestId(\"xml-document\")).toBeInTheDocument();\n+        expect(getByText(\"Alexandra\")).toBeInTheDocument();\n+    });\n+\n+    test('Rendering xml document with no namespace in instance document', () => {\n+        const xmlString = \"<Document><content><envelope xmlns:es=\\\"http://marklogic.com/entity-services\\\"><instance><Person><fname xsi:type=\\\"xs:string\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\">Alexandra</fname></Person></instance></envelope></content></Document>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e33f7c87de646a245e25271ac9c5a58055c8b966"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e33f7c87de646a245e25271ac9c5a58055c8b966", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/e33f7c87de646a245e25271ac9c5a58055c8b966", "committedDate": "2020-09-11T16:32:32Z", "message": "DHFPROD-5863: Detail page renders merged xml documents"}, "afterCommit": {"oid": "65385c8d3db71af7b414afdef832d43c4875c131", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/65385c8d3db71af7b414afdef832d43c4875c131", "committedDate": "2020-09-11T21:18:28Z", "message": "DHFPROD-5863: Detail page renders merged xml documents"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65385c8d3db71af7b414afdef832d43c4875c131", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/65385c8d3db71af7b414afdef832d43c4875c131", "committedDate": "2020-09-11T21:18:28Z", "message": "DHFPROD-5863: Detail page renders merged xml documents"}, "afterCommit": {"oid": "858a9d22c53149456c779dd17ccc79a051ac0a17", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/858a9d22c53149456c779dd17ccc79a051ac0a17", "committedDate": "2020-09-15T19:50:02Z", "message": "DHFPROD-5863: Detail page renders merged xml documents\n\nDHFPROD-5863: e2e test for the bug"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "858a9d22c53149456c779dd17ccc79a051ac0a17", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/858a9d22c53149456c779dd17ccc79a051ac0a17", "committedDate": "2020-09-15T19:50:02Z", "message": "DHFPROD-5863: Detail page renders merged xml documents\n\nDHFPROD-5863: e2e test for the bug"}, "afterCommit": {"oid": "cecaf3be51db9c15cdce74a3026c9ee0c5c02542", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/cecaf3be51db9c15cdce74a3026c9ee0c5c02542", "committedDate": "2020-09-15T21:30:44Z", "message": "DHFPROD-5863: Detail page renders merged xml documents\n\nDHFPROD-5863: e2e test for the bug"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cecaf3be51db9c15cdce74a3026c9ee0c5c02542", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/cecaf3be51db9c15cdce74a3026c9ee0c5c02542", "committedDate": "2020-09-15T21:30:44Z", "message": "DHFPROD-5863: Detail page renders merged xml documents\n\nDHFPROD-5863: e2e test for the bug"}, "afterCommit": {"oid": "14efa813fce496f54de9e500d304d66d7ae157ef", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/14efa813fce496f54de9e500d304d66d7ae157ef", "committedDate": "2020-09-16T00:27:03Z", "message": "DHFPROD-5863: Detail page renders merged xml documents\n\nDHFPROD-5863: e2e test for the bug\n\nFix failing unit and e2e test. Committing package-lock.json as well"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cad1cf2d3f4f31dc52c639770a1da956645202e2", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/cad1cf2d3f4f31dc52c639770a1da956645202e2", "committedDate": "2020-09-16T14:11:26Z", "message": "DHFPROD-5863: Detail page renders merged xml documents\n\nDHFPROD-5863: e2e test for the bug\n\nFix failing unit and e2e test. Committing package-lock.json as well"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14efa813fce496f54de9e500d304d66d7ae157ef", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/14efa813fce496f54de9e500d304d66d7ae157ef", "committedDate": "2020-09-16T00:27:03Z", "message": "DHFPROD-5863: Detail page renders merged xml documents\n\nDHFPROD-5863: e2e test for the bug\n\nFix failing unit and e2e test. Committing package-lock.json as well"}, "afterCommit": {"oid": "cad1cf2d3f4f31dc52c639770a1da956645202e2", "author": {"user": {"login": "rahulvudutala", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/cad1cf2d3f4f31dc52c639770a1da956645202e2", "committedDate": "2020-09-16T14:11:26Z", "message": "DHFPROD-5863: Detail page renders merged xml documents\n\nDHFPROD-5863: e2e test for the bug\n\nFix failing unit and e2e test. Committing package-lock.json as well"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5NzM1OTIz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#pullrequestreview-489735923", "createdAt": "2020-09-16T15:18:07Z", "commit": {"oid": "cad1cf2d3f4f31dc52c639770a1da956645202e2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNToxODowN1rOHS19eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNToxODowN1rOHS19eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUyMDUwNQ==", "bodyText": "removed getSelectedFacet to reuse existing locators. getSelectedFacet didnt work for null check of an element since it was using contains to match target element.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#discussion_r489520505", "createdAt": "2020-09-16T15:18:07Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/e2e/cypress/support/pages/browse.tsx", "diffHunk": "@@ -144,8 +144,13 @@ class BrowsePage {\n     return cy.get('[data-cy=selected-facet-block]');\n   }\n \n-  getSelectedFacet(facet: string) {\n-    return cy.get('#selected-facets > button').contains(facet);\n+  computeStartDateOfTheWeek() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cad1cf2d3f4f31dc52c639770a1da956645202e2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5ODAzNDQ1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#pullrequestreview-489803445", "createdAt": "2020-09-16T16:33:58Z", "commit": {"oid": "cad1cf2d3f4f31dc52c639770a1da956645202e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5ODI3MTk0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#pullrequestreview-489827194", "createdAt": "2020-09-16T17:05:12Z", "commit": {"oid": "cad1cf2d3f4f31dc52c639770a1da956645202e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5ODI4NTk3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#pullrequestreview-489828597", "createdAt": "2020-09-16T17:07:06Z", "commit": {"oid": "cad1cf2d3f4f31dc52c639770a1da956645202e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5ODI5Mzk3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#pullrequestreview-489829397", "createdAt": "2020-09-16T17:08:14Z", "commit": {"oid": "cad1cf2d3f4f31dc52c639770a1da956645202e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2039, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}