{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NzIyOTYx", "number": 4962, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMToxODoxN1rOFCmbkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMzozODoxMFrOFC7bFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4MjcxMTIwOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/step.sjs", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMToxODoxN1rOIB2nyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQwMTo1MDowMFrOIB-ecg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgxNDQwOQ==", "bodyText": "@srinathgit  Can you test one more thing - see what happens if the step module is present but has a compilation error in it. I think we may get the same error, in which case we really ought to include \"e.stack\" at the end of the message - e.g. \"; cause: ${e.stack}\".", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#discussion_r538814409", "createdAt": "2020-12-08T21:18:17Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/step.sjs", "diffHunk": "@@ -116,7 +116,7 @@ class Step {\n     try {\n       stepModule = this.hubUtils.retrieveModuleLibrary(moduleUri);\n     } catch (e) {\n-      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read permission to this module.`);\n+      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read and execute permission to this module`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e8eebd91c13648752e9dd77874b66b1a6efcee"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk0MzA5MA==", "bodyText": "We cannot have the same message if there is compilation error right ? I have changed the message to\n`Unable to run module: ${moduleUri}; cause: ${e.stack}`\n\nLet me know if that's ok.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#discussion_r538943090", "createdAt": "2020-12-09T01:50:00Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/step.sjs", "diffHunk": "@@ -116,7 +116,7 @@ class Step {\n     try {\n       stepModule = this.hubUtils.retrieveModuleLibrary(moduleUri);\n     } catch (e) {\n-      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read permission to this module.`);\n+      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read and execute permission to this module`);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgxNDQwOQ=="}, "originalCommit": {"oid": "75e8eebd91c13648752e9dd77874b66b1a6efcee"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4NjE1MDYwOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/step.sjs", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMzozODoxMFrOICVAmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMzozODoxMFrOICVAmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMxMjI4Mw==", "bodyText": "That looks good to me.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#discussion_r539312283", "createdAt": "2020-12-09T13:38:10Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/step.sjs", "diffHunk": "@@ -116,7 +116,10 @@ class Step {\n     try {\n       stepModule = this.hubUtils.retrieveModuleLibrary(moduleUri);\n     } catch (e) {\n-      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read permission to this module.`);\n+      if(e.stack && e.stack.includes(\"XDMP-MODNOTFOUND\")){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09ea88c3d270b6ceaeaac8d62d1e4adddd68d4bd"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3028, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}