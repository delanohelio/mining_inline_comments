{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0OTk3MDk0", "number": 4820, "title": "DHFPROD-6138: Set columns for join table to nullable to avoid error w\u2026", "bodyText": "\u2026ith PII fields\nDescription\nIf the join property is PII then there will be an error on the mapping step when applying the TDE index if the column isn't nullable.\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-11-03T21:19:46Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4820", "merged": true, "mergeCommit": {"oid": "c6e2cf803664a42236b26e8c3fd04218637d3cc1"}, "closed": true, "closedAt": "2020-11-04T16:49:46Z", "author": {"login": "ryanjdew"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZA6PCgFqTUyMjkyMDc5NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZEQ1agFqTUyMzAwMjM3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTIwNzk0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4820#pullrequestreview-522920794", "createdAt": "2020-11-03T22:28:57Z", "commit": {"oid": "5dcffaa7dd577c3e5b116507e65d666da39c2838"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTM2Nzg4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4820#pullrequestreview-522936788", "createdAt": "2020-11-03T23:02:02Z", "commit": {"oid": "5dcffaa7dd577c3e5b116507e65d666da39c2838"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMzowMjowM1rOHtDjDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMzowMjowM1rOHtDjDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzAwNjA5Mg==", "bodyText": "Can you slim this down to the minimum needed to reproduce the problem? I'm guessing just the customerId and billing, and then you can drop Zip from Address? Or is Zip needed?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4820#discussion_r517006092", "createdAt": "2020-11-03T23:02:03Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/test/ml-modules/root/test/suites/data-hub/5/impl/hub-entities/generateTDE.sjs", "diffHunk": "@@ -0,0 +1,92 @@\n+const hent = require(\"/data-hub/5/impl/hub-entities.xqy\");\n+const test = require(\"/test/test-helper.xqy\");\n+\n+function generateTdeWithViewJoin() {\n+    const input =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5dcffaa7dd577c3e5b116507e65d666da39c2838"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf5c37b65cabc60164e8638862c0ca973f46b796", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/bf5c37b65cabc60164e8638862c0ca973f46b796", "committedDate": "2020-11-04T00:46:28Z", "message": "DHFPROD-6138: Set columns for join table to nullable to avoid error with PII fields"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5dcffaa7dd577c3e5b116507e65d666da39c2838", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/5dcffaa7dd577c3e5b116507e65d666da39c2838", "committedDate": "2020-11-03T21:14:35Z", "message": "DHFPROD-6138: Set columns for join table to nullable to avoid error with PII fields"}, "afterCommit": {"oid": "bf5c37b65cabc60164e8638862c0ca973f46b796", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/bf5c37b65cabc60164e8638862c0ca973f46b796", "committedDate": "2020-11-04T00:46:28Z", "message": "DHFPROD-6138: Set columns for join table to nullable to avoid error with PII fields"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMDAyMzcy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4820#pullrequestreview-523002372", "createdAt": "2020-11-04T02:23:21Z", "commit": {"oid": "bf5c37b65cabc60164e8638862c0ca973f46b796"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1605, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}