{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMTgwNTI2", "number": 3912, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMToxNDo1M1rOD5KuqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMjozOTo0MVrOD5y-hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMjcxMjA5OnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub-central/ui/src/App.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMToxNDo1M1rOGQSd3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMToyMjozN1rOGQSssA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczMjk1OA==", "bodyText": "This was '/api/environment/project' earlier. Should this be project-info now?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r419732958", "createdAt": "2020-05-04T21:14:53Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/App.tsx", "diffHunk": "@@ -77,6 +77,16 @@ const App: React.FC<Props> = ({history, location}) => {\n \n   }, [user]);\n \n+  useEffect(() => {\n+    // On route change...\n+    axios.get('/api/environment/project-info')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50d1523a0f43484c70cb7d8a024040dd4b56b313"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczNjc1Mg==", "bodyText": "yeah I believe this snippet is meant for route change (which I had removed in my earlier PR).  It should just call a valid endpoint. If user is logged out due to session expiry, this will enable the page to be redirected to login page. @wooldridge can you please confirm if that is the case", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r419736752", "createdAt": "2020-05-04T21:22:37Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub-central/ui/src/App.tsx", "diffHunk": "@@ -77,6 +77,16 @@ const App: React.FC<Props> = ({history, location}) => {\n \n   }, [user]);\n \n+  useEffect(() => {\n+    // On route change...\n+    axios.get('/api/environment/project-info')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczMjk1OA=="}, "originalCommit": {"oid": "50d1523a0f43484c70cb7d8a024040dd4b56b313"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxOTMwNjMwOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub-central/ui/src/util/environment.tsx", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMjozOTo0MVrOGRQ_xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNjo0Njo0MVrOGRcBwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc1NzQ0Nw==", "bodyText": "When would this be called? I don't understand the concept of \"reset environment\" in HC on DHS, as the user has no control over the environment.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r420757447", "createdAt": "2020-05-06T12:39:41Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-central/ui/src/util/environment.tsx", "diffHunk": "@@ -32,4 +30,8 @@ export function getEnvironment():any {\n     }\n }\n \n-export default { setEnvironment, getEnvironment };\n+export function resetEnvironment() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73f6ef58d55ec8c428ed5e4016609f47d3e5af8a"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg2MzIwNQ==", "bodyText": "The function resetEnvironment() ensures the project name header link (currently hardcoded to \"Data Hub Project\") in the UI is not displayed when user logs out.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r420863205", "createdAt": "2020-05-06T15:02:23Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub-central/ui/src/util/environment.tsx", "diffHunk": "@@ -32,4 +30,8 @@ export function getEnvironment():any {\n     }\n }\n \n-export default { setEnvironment, getEnvironment };\n+export function resetEnvironment() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc1NzQ0Nw=="}, "originalCommit": {"oid": "73f6ef58d55ec8c428ed5e4016609f47d3e5af8a"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg5MDY0OA==", "bodyText": "That name will soon be the DHS service name, which is intended to be a meaningful identifier to the user. I think it makes sense to have that displayed in the login page so the user knows which DHS instance they're logging into. Seems like a requirements question, check with @sbayatpur .", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r420890648", "createdAt": "2020-05-06T15:38:12Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-central/ui/src/util/environment.tsx", "diffHunk": "@@ -32,4 +30,8 @@ export function getEnvironment():any {\n     }\n }\n \n-export default { setEnvironment, getEnvironment };\n+export function resetEnvironment() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc1NzQ0Nw=="}, "originalCommit": {"oid": "73f6ef58d55ec8c428ed5e4016609f47d3e5af8a"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDkzODE3OA==", "bodyText": "Yeah, that's a different story that will probably taken up next sprint. In this PR, I am just adding back the snippet I had removed inadvertently in my previous PR for removing unwanted code from HC", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r420938178", "createdAt": "2020-05-06T16:46:41Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub-central/ui/src/util/environment.tsx", "diffHunk": "@@ -32,4 +30,8 @@ export function getEnvironment():any {\n     }\n }\n \n-export default { setEnvironment, getEnvironment };\n+export function resetEnvironment() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc1NzQ0Nw=="}, "originalCommit": {"oid": "73f6ef58d55ec8c428ed5e4016609f47d3e5af8a"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4095, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}