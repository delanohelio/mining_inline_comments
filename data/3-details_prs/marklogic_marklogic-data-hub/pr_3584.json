{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1Njg0NzE5", "number": 3584, "title": "DHFPROD-4310: Cleanup data sets when load data config is deleted", "bodyText": "", "createdAt": "2020-02-15T06:18:28Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3584", "merged": true, "mergeCommit": {"oid": "dac44d3c67873fac167aef0c6131dcfe8aada8fe"}, "closed": true, "closedAt": "2020-02-18T22:20:17Z", "author": {"login": "ryanjdew"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEl5dvAFqTM1OTM1MDg3MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFpIBBAFqTM2MDY5OTEyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MzUwODcx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3584#pullrequestreview-359350871", "createdAt": "2020-02-15T15:30:56Z", "commit": {"oid": "a638f5fe910e67935c6c2cfbd04b6054827cac89"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxNTozMDo1NlrOFqPehA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQxNTozMDo1NlrOFqPehA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTgzODA4NA==", "bodyText": "I'm wondering if this should really rethrow the error. If a dataset cannot be deleted, how much of a problem is that? And the user wouldn't really be able to do anything about it, right? I'm wondering if this should just be logged at the \"warn\" level.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3584#discussion_r379838084", "createdAt": "2020-02-15T15:30:56Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/curation/controllers/LoadDataController.java", "diffHunk": "@@ -139,4 +133,19 @@ private void enrichLoadData(ObjectNode loadDataConfig) {\n         loadDataConfig.put(\"fileCount\", fileCount);\n         loadDataConfig.put(\"filesNeedReuploaded\", fileCount == 0);\n     }\n+\n+    private void deleteDataSetDirectory(String artifactName) {\n+        Path dataSetDirectoryPath = dataSetDirectory(artifactName);\n+        if (dataSetDirectoryPath.toFile().exists()) {\n+            try {\n+                FileUtils.deleteDirectory(dataSetDirectoryPath.toFile());\n+            } catch (IOException e) {\n+                throw new RuntimeException(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a638f5fe910e67935c6c2cfbd04b6054827cac89"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MzUzMDc4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3584#pullrequestreview-359353078", "createdAt": "2020-02-15T16:18:45Z", "commit": {"oid": "a638f5fe910e67935c6c2cfbd04b6054827cac89"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df5abcd01ed390d4b8e7d2109a29843e4e1a5a44", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/df5abcd01ed390d4b8e7d2109a29843e4e1a5a44", "committedDate": "2020-02-18T17:55:42Z", "message": "DHFPROD-4310: Cleanup data sets when load data config is deleted"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a638f5fe910e67935c6c2cfbd04b6054827cac89", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/a638f5fe910e67935c6c2cfbd04b6054827cac89", "committedDate": "2020-02-15T06:14:58Z", "message": "DHFPROD-4310: Cleanup data sets when load data config is deleted"}, "afterCommit": {"oid": "df5abcd01ed390d4b8e7d2109a29843e4e1a5a44", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/df5abcd01ed390d4b8e7d2109a29843e4e1a5a44", "committedDate": "2020-02-18T17:55:42Z", "message": "DHFPROD-4310: Cleanup data sets when load data config is deleted"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNjQ4MzU3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3584#pullrequestreview-360648357", "createdAt": "2020-02-18T20:26:27Z", "commit": {"oid": "df5abcd01ed390d4b8e7d2109a29843e4e1a5a44"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNjk5MTI0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3584#pullrequestreview-360699124", "createdAt": "2020-02-18T21:50:34Z", "commit": {"oid": "df5abcd01ed390d4b8e7d2109a29843e4e1a5a44"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2193, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}