{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3NTUzMjE3", "number": 4396, "title": "DHFPROD-5391: Improper position of spinner in explorer tile results view", "bodyText": "Description\nIncludes DHFPROD-5383: Collapse/Expand carets in Explorer are backwards\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-08-13T18:09:44Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4396", "merged": true, "mergeCommit": {"oid": "3ac13e3cb6295b9b5df6fc5aa6a07fc3ed4ca54f"}, "closed": true, "closedAt": "2020-08-13T22:25:08Z", "author": {"login": "timur-isangulov"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-kHH6gBqjM2NTMyOTE1MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-nTpwgFqTQ2NzE1ODY0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58f3a554348379284604ad3b1f0cd5ca75e5313b", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/58f3a554348379284604ad3b1f0cd5ca75e5313b", "committedDate": "2020-08-13T18:06:29Z", "message": "DHFPROD-5391: Improper position of spinner in explorer tile results view"}, "afterCommit": {"oid": "4ad650b32d74eace05edefd05a4a75609e84502e", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/4ad650b32d74eace05edefd05a4a75609e84502e", "committedDate": "2020-08-13T18:13:18Z", "message": "DHFPROD-5391: Improper position of spinner in explorer tile results view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MDIyNTMx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4396#pullrequestreview-467022531", "createdAt": "2020-08-13T18:22:58Z", "commit": {"oid": "4ad650b32d74eace05edefd05a4a75609e84502e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxODoyMjo1OVrOHAYJYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxODoyNjo1NFrOHAYRng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1NzY2NQ==", "bodyText": "I think we can remove beforeEach and the enzyme test lines 35-51, since the RTL test below verifies the same test better.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4396#discussion_r470157665", "createdAt": "2020-08-13T18:22:59Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/sidebar/sidebar.test.tsx", "diffHunk": "@@ -4,47 +4,70 @@ import Sidebar from './sidebar';\n import { entityFromJSON, entityParser } from '../../util/data-conversion';\n import modelResponse from '../../assets/mock-data/model-response';\n import searchPayloadFacets from '../../assets/mock-data/search-payload-facets';\n+import { render, fireEvent } from '@testing-library/react';\n+\n \n describe(\"Sidebar component\", () => {\n-    let wrapper;\n-    const parsedModelData = entityFromJSON(modelResponse);\n-    const entityDefArray = entityParser(parsedModelData);\n-\n-    describe('All Entities Dropdown Option', () => {\n-      beforeEach(() => {\n-        wrapper = shallow(\n-          <Sidebar\n-            entityDefArray={entityDefArray}\n-            facets={searchPayloadFacets}\n-            selectedEntities={[]}\n-            facetRender = {jest.fn()}\n-            checkFacetRender = {jest.fn()}\n-          />\n-        )\n-      });\n+  let wrapper;\n+  const parsedModelData = entityFromJSON(modelResponse);\n+  const entityDefArray = entityParser(parsedModelData);\n \n-      it('should render only Hub Properties Panel', () => {\n-        expect(wrapper.exists('#hub-properties')).toBe(true);\n-        expect(wrapper.exists('#entity-properties')).toBe(false);\n-      });\n+  describe('All Entities Dropdown Option', () => {\n+    beforeEach(() => {\n+      wrapper = shallow(\n+        <Sidebar\n+          entityDefArray={entityDefArray}\n+          facets={searchPayloadFacets}\n+          selectedEntities={[]}\n+          facetRender={jest.fn()}\n+          checkFacetRender={jest.fn()}\n+        />\n+      )\n     });\n \n-    describe('An Entity is selected', () => {\n-      beforeEach(() => {\n-        wrapper = shallow(\n-          <Sidebar\n-            entityDefArray={entityDefArray}\n-            facets={searchPayloadFacets}\n-            selectedEntities={['Customer']}\n-            facetRender = {jest.fn()}\n-            checkFacetRender = {jest.fn()}\n-          />\n-        )\n-      });\n+    it('should render only Hub Properties Panel', () => {\n+      expect(wrapper.exists('#hub-properties')).toBe(true);\n+      expect(wrapper.exists('#entity-properties')).toBe(false);\n+    });\n+  });\n \n-      it('should render both Entity and Hub Properties panel', () => {\n-        expect(wrapper.exists('#hub-properties')).toBe(true);\n-        expect(wrapper.exists('#entity-properties')).toBe(true);\n-      });\n+  describe('An Entity is selected', () => {\n+    beforeEach(() => {\n+      wrapper = shallow(\n+        <Sidebar\n+          entityDefArray={entityDefArray}\n+          facets={searchPayloadFacets}\n+          selectedEntities={['Customer']}\n+          facetRender={jest.fn()}\n+          checkFacetRender={jest.fn()}\n+        />\n+      )\n     });\n+\n+    it('should render both Entity and Hub Properties panel', () => {\n+      expect(wrapper.exists('#hub-properties')).toBe(true);\n+      expect(wrapper.exists('#entity-properties')).toBe(true);\n+    });\n+  });\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ad650b32d74eace05edefd05a4a75609e84502e"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1OTc3NA==", "bodyText": "We can delete this suite as well lines 15-32. and the suite below with enzyme test.\nThe 2 tests here is when an entity is selected and when All Entities is selected and I think we can have 2 tests in 1 describe, than having 2 describes within a describe.\n@timur-isangulov can you pls clean this up a little and add an RTL test for All entities similar to your RTL test for Customer.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4396#discussion_r470159774", "createdAt": "2020-08-13T18:26:54Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/sidebar/sidebar.test.tsx", "diffHunk": "@@ -4,47 +4,70 @@ import Sidebar from './sidebar';\n import { entityFromJSON, entityParser } from '../../util/data-conversion';\n import modelResponse from '../../assets/mock-data/model-response';\n import searchPayloadFacets from '../../assets/mock-data/search-payload-facets';\n+import { render, fireEvent } from '@testing-library/react';\n+\n \n describe(\"Sidebar component\", () => {\n-    let wrapper;\n-    const parsedModelData = entityFromJSON(modelResponse);\n-    const entityDefArray = entityParser(parsedModelData);\n-\n-    describe('All Entities Dropdown Option', () => {\n-      beforeEach(() => {\n-        wrapper = shallow(\n-          <Sidebar\n-            entityDefArray={entityDefArray}\n-            facets={searchPayloadFacets}\n-            selectedEntities={[]}\n-            facetRender = {jest.fn()}\n-            checkFacetRender = {jest.fn()}\n-          />\n-        )\n-      });\n+  let wrapper;\n+  const parsedModelData = entityFromJSON(modelResponse);\n+  const entityDefArray = entityParser(parsedModelData);\n \n-      it('should render only Hub Properties Panel', () => {\n-        expect(wrapper.exists('#hub-properties')).toBe(true);\n-        expect(wrapper.exists('#entity-properties')).toBe(false);\n-      });\n+  describe('All Entities Dropdown Option', () => {\n+    beforeEach(() => {\n+      wrapper = shallow(\n+        <Sidebar\n+          entityDefArray={entityDefArray}\n+          facets={searchPayloadFacets}\n+          selectedEntities={[]}\n+          facetRender={jest.fn()}\n+          checkFacetRender={jest.fn()}\n+        />\n+      )\n     });\n \n-    describe('An Entity is selected', () => {\n-      beforeEach(() => {\n-        wrapper = shallow(\n-          <Sidebar\n-            entityDefArray={entityDefArray}\n-            facets={searchPayloadFacets}\n-            selectedEntities={['Customer']}\n-            facetRender = {jest.fn()}\n-            checkFacetRender = {jest.fn()}\n-          />\n-        )\n-      });\n+    it('should render only Hub Properties Panel', () => {\n+      expect(wrapper.exists('#hub-properties')).toBe(true);\n+      expect(wrapper.exists('#entity-properties')).toBe(false);\n+    });\n+  });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ad650b32d74eace05edefd05a4a75609e84502e"}, "originalPosition": 61}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3498f84a0e1d8b9f6aae78052bedf7ab82002dfb", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3498f84a0e1d8b9f6aae78052bedf7ab82002dfb", "committedDate": "2020-08-13T19:52:54Z", "message": "DHFPROD-5391: Improper position of spinner in explorer tile results view"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ad650b32d74eace05edefd05a4a75609e84502e", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/4ad650b32d74eace05edefd05a4a75609e84502e", "committedDate": "2020-08-13T18:13:18Z", "message": "DHFPROD-5391: Improper position of spinner in explorer tile results view"}, "afterCommit": {"oid": "3498f84a0e1d8b9f6aae78052bedf7ab82002dfb", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3498f84a0e1d8b9f6aae78052bedf7ab82002dfb", "committedDate": "2020-08-13T19:52:54Z", "message": "DHFPROD-5391: Improper position of spinner in explorer tile results view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MTQ0Njc0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4396#pullrequestreview-467144674", "createdAt": "2020-08-13T21:30:16Z", "commit": {"oid": "3498f84a0e1d8b9f6aae78052bedf7ab82002dfb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MTU4NjQz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4396#pullrequestreview-467158643", "createdAt": "2020-08-13T21:57:09Z", "commit": {"oid": "3498f84a0e1d8b9f6aae78052bedf7ab82002dfb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2306, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}