{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3NTY3Nzk4", "number": 3861, "title": "DHFPROD-4197: Create manage queries view", "bodyText": "Description\nIncludes Manage Query modal, list, update and delete queries for stories DHFPROD-3649, DHFPROD-4197, DHFPROD-4293, DHFPROD-3650, DHFPROD-4194, DHFPROD-3649.\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-04-22T21:53:43Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861", "merged": true, "mergeCommit": {"oid": "642d52bd733b174dea94fff8d87c5ff562466c58"}, "closed": true, "closedAt": "2020-04-23T20:47:57Z", "author": {"login": "timur-isangulov"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaPqx8gBqjMyNjI2MTkwNDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcagQkDAFqTM5OTMxNjc0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b1e6c9340941efa115dee738244c26f96c134a5", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/9b1e6c9340941efa115dee738244c26f96c134a5", "committedDate": "2020-04-22T21:57:42Z", "message": "DHFPROD-4197: removed commented code"}, "afterCommit": {"oid": "c2d73454c188ee47e43c682a3ad190516d0ccd66", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/c2d73454c188ee47e43c682a3ad190516d0ccd66", "committedDate": "2020-04-22T22:02:50Z", "message": "DHFPROD-4197: Create manage queries view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NjM2MzUy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#pullrequestreview-398636352", "createdAt": "2020-04-22T22:32:23Z", "commit": {"oid": "c2d73454c188ee47e43c682a3ad190516d0ccd66"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMjozMjoyM1rOGKOj_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMjozMjoyM1rOGKOj_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM3NzUzMw==", "bodyText": "@timur-isangulov, I see there are two useEffects in this file, Any reason for using two useEffects calling the same function ?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413377533", "createdAt": "2020-04-22T22:32:23Z", "author": {"login": "Sanjeevani19"}, "path": "marklogic-data-hub-central/ui/src/components/queries/managing/manage-query.tsx", "diffHunk": "@@ -0,0 +1,224 @@\n+import React, { useState, useEffect, useContext } from 'react';\n+import { Modal, Button, Table } from 'antd';\n+import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n+import { faPencilAlt, faFileExport, faLink, faTrashAlt, faListOl } from \"@fortawesome/free-solid-svg-icons\";\n+import { UserContext } from '../../../util/user-context';\n+import { queryDateConverter } from '../../../util/date-conversion';\n+import EditQueryDialog from './edit-query-dialog/edit-query-dialog'\n+import { SearchContext } from '../../../util/search-context';\n+import styles from './manage-query.module.scss';\n+import { fetchQueries, updateQuery, removeQuery } from '../../../api/queries'\n+\n+\n+const QueryModal: React.FC = () => {\n+\n+    const [queries, setQueries] = useState([]);\n+    const { handleError, resetSessionTime } = useContext(UserContext);\n+    const { applyQuery } = useContext(SearchContext);\n+    const [mainModalVisibility, setMainModalVisibility] = useState(false);\n+    const [editModalVisibility, setEditModalVisibility] = useState(false);\n+    const [deleteModalVisibility, setDeleteModalVisibility] = useState(false);\n+    const [selectedQuery, setSelectedQuery] = useState({});\n+    const [queryName, setQueryName] = useState('');\n+    const data = new Array();\n+\n+    useEffect(() => {\n+        getQueries();\n+    }, []);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2d73454c188ee47e43c682a3ad190516d0ccd66"}, "originalPosition": 28}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2d73454c188ee47e43c682a3ad190516d0ccd66", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/c2d73454c188ee47e43c682a3ad190516d0ccd66", "committedDate": "2020-04-22T22:02:50Z", "message": "DHFPROD-4197: Create manage queries view"}, "afterCommit": {"oid": "3f59eea3991081c09a0552925b28b1a0dcf72caf", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3f59eea3991081c09a0552925b28b1a0dcf72caf", "committedDate": "2020-04-22T22:52:10Z", "message": "DHFPROD-4197: Create manage queries view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NjQ3Nzgy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#pullrequestreview-398647782", "createdAt": "2020-04-22T22:58:26Z", "commit": {"oid": "3f59eea3991081c09a0552925b28b1a0dcf72caf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMjo1ODoyNlrOGKPQow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMjo1ODoyNlrOGKPQow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM4ODk2Mw==", "bodyText": "@timur-isangulov , I don't see any integration or unit tests for edit or deleting a query, Any reason for that ?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413388963", "createdAt": "2020-04-22T22:58:26Z", "author": {"login": "Sanjeevani19"}, "path": "marklogic-data-hub-central/ui/e2e/cypress/support/components/query/edit-queries-modal.tsx", "diffHunk": "@@ -0,0 +1,6 @@\n+class EditQuery {\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f59eea3991081c09a0552925b28b1a0dcf72caf"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NjUzMDM1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#pullrequestreview-398653035", "createdAt": "2020-04-22T23:11:47Z", "commit": {"oid": "3f59eea3991081c09a0552925b28b1a0dcf72caf"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5Mjc0NDgz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#pullrequestreview-399274483", "createdAt": "2020-04-23T16:31:12Z", "commit": {"oid": "3f59eea3991081c09a0552925b28b1a0dcf72caf"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNjozMToxMlrOGKxRUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNjo1MjowN1rOGKyMcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk0NjE5Mw==", "bodyText": "This alert color should be applied globally at the theme level.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413946193", "createdAt": "2020-04-23T16:31:12Z", "author": {"login": "brucean52"}, "path": "marklogic-data-hub-central/ui/src/App.scss", "diffHunk": "@@ -145,3 +145,11 @@ div#error-list div.ant-collapse div.ant-collapse-item div.ant-collapse-content d\n   background: #44499C;\n   color: #fff;\n }\n+\n+.has-error .ant-input, .has-error .ant-input:focus{\n+  border-color: #B32424;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f59eea3991081c09a0552925b28b1a0dcf72caf"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk2MTMzMQ==", "bodyText": "MMM should be MM", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413961331", "createdAt": "2020-04-23T16:52:07Z", "author": {"login": "brucean52"}, "path": "marklogic-data-hub-central/ui/src/util/date-conversion.tsx", "diffHunk": "@@ -8,3 +8,7 @@ export const relativeTimeConverter = (date:string) => {\n   return moment(date).fromNow();\n }\n \n+export const queryDateConverter = (date:string) => {\n+  return moment(date).format(\"DD-MMM-YY HH:mm\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f59eea3991081c09a0552925b28b1a0dcf72caf"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "321c5df1b83e214a97162d240a4aa44eb8b72008", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/321c5df1b83e214a97162d240a4aa44eb8b72008", "committedDate": "2020-04-23T17:18:33Z", "message": "DHFPROD-4197: Create manage queries view"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f59eea3991081c09a0552925b28b1a0dcf72caf", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3f59eea3991081c09a0552925b28b1a0dcf72caf", "committedDate": "2020-04-22T22:52:10Z", "message": "DHFPROD-4197: Create manage queries view"}, "afterCommit": {"oid": "321c5df1b83e214a97162d240a4aa44eb8b72008", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/321c5df1b83e214a97162d240a4aa44eb8b72008", "committedDate": "2020-04-23T17:18:33Z", "message": "DHFPROD-4197: Create manage queries view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MzE1MDQ4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#pullrequestreview-399315048", "createdAt": "2020-04-23T17:21:03Z", "commit": {"oid": "321c5df1b83e214a97162d240a4aa44eb8b72008"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MzE2NzQ4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#pullrequestreview-399316748", "createdAt": "2020-04-23T17:23:10Z", "commit": {"oid": "321c5df1b83e214a97162d240a4aa44eb8b72008"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3087, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}