{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNTgwODQy", "number": 3984, "title": "DHFPROD-4671: Add hub-central-load-reader role", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-05-21T20:54:27Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984", "merged": true, "mergeCommit": {"oid": "f8f789ce67ef2dd611d68c334c2b0dcfcf9d7841"}, "closed": true, "closedAt": "2020-05-27T16:51:01Z", "author": {"login": "ryanjdew"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjntnMgFqTQxNjU4Mzc4Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABclcJFugFqTQxOTQxOTY0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NTgzNzgy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-416583782", "createdAt": "2020-05-22T00:53:59Z", "commit": {"oid": "b3c8ddbd97a125c9dd41ba3761a387e32c7892bd"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMDo1Mzo1OVrOGZHc7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMTowOTozMFrOGZHrIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4OTY3Ng==", "bodyText": "No need to change, but just for future reference, you can do loginAsTestUserWithRoles(\"hub-central-load-reader\")", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#discussion_r428989676", "createdAt": "2020-05-22T00:53:59Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-central/src/test/java/com/marklogic/hub/central/controllers/steps/IngestionStepControllerTest.java", "diffHunk": "@@ -46,4 +53,39 @@ void getIngestionSteps() throws Exception {\n                 assertEquals(\"secondStep\", array.get(1).get(\"name\").asText());\n             });\n     }\n+\n+    @Test\n+    void permittedReadUser() throws Exception {\n+        installReferenceModelProject();\n+        postJson(PATH + \"/firstStep\", newDefaultIngestionStep(\"firstStep\"));\n+\n+        setTestUserRoles(\"hub-central-load-reader\");\n+\n+        loginAsTestUser();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3c8ddbd97a125c9dd41ba3761a387e32c7892bd"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MjEwNw==", "bodyText": "I think you can just do getJson here?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#discussion_r428992107", "createdAt": "2020-05-22T01:04:08Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-central/src/test/java/com/marklogic/hub/central/controllers/steps/IngestionStepControllerTest.java", "diffHunk": "@@ -46,4 +53,39 @@ void getIngestionSteps() throws Exception {\n                 assertEquals(\"secondStep\", array.get(1).get(\"name\").asText());\n             });\n     }\n+\n+    @Test\n+    void permittedReadUser() throws Exception {\n+        installReferenceModelProject();\n+        postJson(PATH + \"/firstStep\", newDefaultIngestionStep(\"firstStep\"));\n+\n+        setTestUserRoles(\"hub-central-load-reader\");\n+\n+        loginAsTestUser();\n+\n+        mockMvc.perform(get(PATH + \"/{stepName}\", \"firstStep\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3c8ddbd97a125c9dd41ba3761a387e32c7892bd"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MjY1Mg==", "bodyText": "Just an FYI, there's a verifyRequestIsForbidden helper method coming in the 4820 PR. I'll see if I can get that merged into develop tomorrow so you can use it.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#discussion_r428992652", "createdAt": "2020-05-22T01:06:33Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-central/src/test/java/com/marklogic/hub/central/controllers/steps/IngestionStepControllerTest.java", "diffHunk": "@@ -46,4 +53,39 @@ void getIngestionSteps() throws Exception {\n                 assertEquals(\"secondStep\", array.get(1).get(\"name\").asText());\n             });\n     }\n+\n+    @Test\n+    void permittedReadUser() throws Exception {\n+        installReferenceModelProject();\n+        postJson(PATH + \"/firstStep\", newDefaultIngestionStep(\"firstStep\"));\n+\n+        setTestUserRoles(\"hub-central-load-reader\");\n+\n+        loginAsTestUser();\n+\n+        mockMvc.perform(get(PATH + \"/{stepName}\", \"firstStep\")\n+                .contentType(MediaType.APPLICATION_JSON)\n+                .session(mockHttpSession))\n+                .andDo(result -> {\n+                    MockHttpServletResponse response = result.getResponse();\n+                    assertEquals(HttpStatus.OK.value(), response.getStatus());\n+                });\n+    }\n+\n+    @Test\n+    void forbiddenReadUser() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3c8ddbd97a125c9dd41ba3761a387e32c7892bd"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MjgzMQ==", "bodyText": "The 4820 PR will also do this automatically for you.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#discussion_r428992831", "createdAt": "2020-05-22T01:07:23Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubProjectImpl.java", "diffHunk": "@@ -369,15 +367,16 @@ public Path getCustomMappingFunctionsDir() {\n         writeRoleFile(rolesDir, \"data-hub-common.json\");\n         writeRoleFile(rolesDir, \"data-hub-common-writer.json\");\n         writeRoleFile(rolesDir, \"data-hub-security-internal.json\");\n-        writeRoleFile(rolesDir, \"data-hub-load-data-reader.json\");\n-        writeRoleFile(rolesDir, \"data-hub-load-data-writer.json\");\n+        writeRoleFile(rolesDir, \"data-hub-load-reader.json\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3c8ddbd97a125c9dd41ba3761a387e32c7892bd"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MzMxNA==", "bodyText": "Shouldn't this be \"data-hub-ingestion-reader\" for consistency with \"data-hub-mapping-reader\"? I think \"hub-central-load-reader\" is fine since HC wants to use the term \"load\", but for core DH, I think we should stay with \"ingestion\" for consistency with existing core DH capabilities.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#discussion_r428993314", "createdAt": "2020-05-22T01:09:30Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/hub-internal-config/security/roles/data-hub-load-reader.json", "diffHunk": "@@ -1,4 +1,4 @@\n {\n-  \"role-name\": \"data-hub-load-data-reader\",\n+  \"role-name\": \"data-hub-load-reader\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3c8ddbd97a125c9dd41ba3761a387e32c7892bd"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NDcwODkx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-418470891", "createdAt": "2020-05-26T16:27:02Z", "commit": {"oid": "b3c8ddbd97a125c9dd41ba3761a387e32c7892bd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxNjoyNzowMlrOGamabA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxNjoyNzowMlrOGamabA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU0NTUxNg==", "bodyText": "Cypress tests only test explorer for now, so its ok to not update developer and operator users. There also is an open PR with which Cypress tests can run with any roles, just like we set roles to a user in core HC tests.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#discussion_r430545516", "createdAt": "2020-05-26T16:27:02Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/e2e/cypress/fixtures/users/developer.json", "diffHunk": "@@ -2,5 +2,5 @@\n     \"user-name\": \"dh-dev\",\n     \"description\": \"A data hub dev user\",\n     \"password\": \"dh-dev\",\n-    \"role\": [\"data-hub-developer\", \"hub-central-entity-exporter\", \"hub-central-mapping-reader\", \"hub-central-mapping-writer\"]\n+    \"role\": [\"data-hub-developer\", \"hub-central-entity-exporter\", \"hub-central-load-reader\", \"hub-central-mapping-reader\", \"hub-central-mapping-writer\"]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3c8ddbd97a125c9dd41ba3761a387e32c7892bd"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3c8ddbd97a125c9dd41ba3761a387e32c7892bd", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b3c8ddbd97a125c9dd41ba3761a387e32c7892bd", "committedDate": "2020-05-21T20:52:30Z", "message": "DHFPROD-4671: Add hub-central-load-reader role"}, "afterCommit": {"oid": "1a06dafa3532db6e74d93e5e1f8626712ad8551f", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/1a06dafa3532db6e74d93e5e1f8626712ad8551f", "committedDate": "2020-05-26T17:29:39Z", "message": "DHFPROD-4671: Add hub-central-load-reader role"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NTUzMDk1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-418553095", "createdAt": "2020-05-26T18:09:53Z", "commit": {"oid": "1a06dafa3532db6e74d93e5e1f8626712ad8551f"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODowOTo1M1rOGaqVXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODowOTo1M1rOGaqVXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYwOTc1Nw==", "bodyText": "In the UI work, we typically use JSON as the default case. Can we have setupMockAPIs use the loads object (the JSON version) for /api/steps/ingestion instead of loadsXML? That will also make the test data more consistent since the flows test data has a step with a sourceFormat of 'json'.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#discussion_r430609757", "createdAt": "2020-05-26T18:09:53Z", "author": {"login": "wooldridge"}, "path": "marklogic-data-hub-central/ui/src/config/bench.config.ts", "diffHunk": "@@ -347,6 +347,25 @@ const loadsXML = {\"data\" :\n   \"status\" :200\n };\n \n+const setupMockAPIs = (axiosMock) => {\n+  return axiosMock.get['mockImplementation']((url) => {\n+    switch (url) {\n+      case '/api/flows':\n+        return Promise.resolve(flows)\n+      case '/api/models/primaryEntityTypes':\n+        return Promise.resolve(primaryEntityTypes)\n+      case '/api/steps/ingestion':\n+        return Promise.resolve(loadsXML)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a06dafa3532db6e74d93e5e1f8626712ad8551f"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a06dafa3532db6e74d93e5e1f8626712ad8551f", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/1a06dafa3532db6e74d93e5e1f8626712ad8551f", "committedDate": "2020-05-26T17:29:39Z", "message": "DHFPROD-4671: Add hub-central-load-reader role"}, "afterCommit": {"oid": "fd5b9dc7c5db7b0edfc7dd114ff294bf7ccee5c8", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/fd5b9dc7c5db7b0edfc7dd114ff294bf7ccee5c8", "committedDate": "2020-05-26T19:02:24Z", "message": "DHFPROD-4671: Add hub-central-load-reader role"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NTk2MjA4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-418596208", "createdAt": "2020-05-26T19:10:05Z", "commit": {"oid": "fd5b9dc7c5db7b0edfc7dd114ff294bf7ccee5c8"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NjEzOTkx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-418613991", "createdAt": "2020-05-26T19:30:38Z", "commit": {"oid": "fd5b9dc7c5db7b0edfc7dd114ff294bf7ccee5c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOTozMDozOFrOGatG0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOTozMDozOFrOGatG0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY1NTE4Ng==", "bodyText": "This is ok now, but for future tests, lets just do click, since successful click validates that the item was in the document.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#discussion_r430655186", "createdAt": "2020-05-26T19:30:38Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/pages/LoadData.test.tsx", "diffHunk": "@@ -0,0 +1,84 @@\n+import React, {useContext} from 'react';\n+import { render, fireEvent, waitForElement, cleanup } from '@testing-library/react'\n+import '@testing-library/jest-dom/extend-expect'\n+import TilesView from './TilesView';\n+import {AuthoritiesContext, AuthoritiesService} from '../util/authorities';\n+import axiosMock from 'axios';\n+import curateData from '../config/bench.config';\n+import authorities from '../config/authorities.config';\n+import data from \"../config/bench.config\";\n+import LoadData from \"./LoadData\";\n+\n+jest.mock('axios');\n+\n+describe('LoadData component', () => {\n+  test('Verify LoadData component cannot edit with only readIngestion authority', async () => {\n+      const authorityService = new AuthoritiesService();\n+      authorityService.setAuthorities(['readIngestion']);\n+\n+      await curateData.setupMockAPIs(axiosMock);\n+\n+      const { getByText, getByTitle, getByLabelText, getByTestId } = render(<AuthoritiesContext.Provider value={authorityService}><LoadData/></AuthoritiesContext.Provider>);\n+\n+      expect(await(waitForElement(() => getByTitle('table')))).toBeInTheDocument();\n+\n+      // Check for steps to be populated\n+      expect(axiosMock.get).toBeCalledWith('/api/steps/ingestion');\n+      expect(getByText('loadXML')).toBeInTheDocument();\n+\n+      // Check table layout\n+      const tableMenuItem = getByTitle('table');\n+      expect(tableMenuItem).toBeInTheDocument();\n+      await fireEvent.click(tableMenuItem);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd5b9dc7c5db7b0edfc7dd114ff294bf7ccee5c8"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NjIzOTQ4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-418623948", "createdAt": "2020-05-26T19:42:21Z", "commit": {"oid": "fd5b9dc7c5db7b0edfc7dd114ff294bf7ccee5c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOTo0MjoyMVrOGatqLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOTo0MjoyMVrOGatqLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY2NDIzOQ==", "bodyText": "just like update here, can we add assertions for create(Add New) and delete as well for both readIngestion and writeIngestion.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#discussion_r430664239", "createdAt": "2020-05-26T19:42:21Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/pages/LoadData.test.tsx", "diffHunk": "@@ -0,0 +1,84 @@\n+import React, {useContext} from 'react';\n+import { render, fireEvent, waitForElement, cleanup } from '@testing-library/react'\n+import '@testing-library/jest-dom/extend-expect'\n+import TilesView from './TilesView';\n+import {AuthoritiesContext, AuthoritiesService} from '../util/authorities';\n+import axiosMock from 'axios';\n+import curateData from '../config/bench.config';\n+import authorities from '../config/authorities.config';\n+import data from \"../config/bench.config\";\n+import LoadData from \"./LoadData\";\n+\n+jest.mock('axios');\n+\n+describe('LoadData component', () => {\n+  test('Verify LoadData component cannot edit with only readIngestion authority', async () => {\n+      const authorityService = new AuthoritiesService();\n+      authorityService.setAuthorities(['readIngestion']);\n+\n+      await curateData.setupMockAPIs(axiosMock);\n+\n+      const { getByText, getByTitle, getByLabelText, getByTestId } = render(<AuthoritiesContext.Provider value={authorityService}><LoadData/></AuthoritiesContext.Provider>);\n+\n+      expect(await(waitForElement(() => getByTitle('table')))).toBeInTheDocument();\n+\n+      // Check for steps to be populated\n+      expect(axiosMock.get).toBeCalledWith('/api/steps/ingestion');\n+      expect(getByText('loadXML')).toBeInTheDocument();\n+\n+      // Check table layout\n+      const tableMenuItem = getByTitle('table');\n+      expect(tableMenuItem).toBeInTheDocument();\n+      await fireEvent.click(tableMenuItem);\n+\n+      await fireEvent.click(getByTestId('loadXML-settings'));\n+      expect(await(waitForElement(() => getByText('Target Database:')))).toBeInTheDocument();\n+\n+      expect(getByText('Save')).toBeDisabled();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd5b9dc7c5db7b0edfc7dd114ff294bf7ccee5c8"}, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fd5b9dc7c5db7b0edfc7dd114ff294bf7ccee5c8", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/fd5b9dc7c5db7b0edfc7dd114ff294bf7ccee5c8", "committedDate": "2020-05-26T19:02:24Z", "message": "DHFPROD-4671: Add hub-central-load-reader role"}, "afterCommit": {"oid": "9689021f3ee50254dcd0930bd66d59682ac5ed2b", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/9689021f3ee50254dcd0930bd66d59682ac5ed2b", "committedDate": "2020-05-26T19:43:27Z", "message": "DHFPROD-4671: Add hub-central-load-reader role"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NjI0OTg2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-418624986", "createdAt": "2020-05-26T19:43:54Z", "commit": {"oid": "fd5b9dc7c5db7b0edfc7dd114ff294bf7ccee5c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOTo0NDo1NVrOGatvkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOTo0NDo1NVrOGatvkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY2NTYxOQ==", "bodyText": "Can we also add a test to verify readIngestion can not access Model, Curate and Run to ensure coverage per test plan.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#discussion_r430665619", "createdAt": "2020-05-26T19:44:55Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/pages/TilesView.test.tsx", "diffHunk": "@@ -82,25 +56,49 @@ describe('TilesView component', () => {\n         expect(getByText('Customer')).toBeInTheDocument();\n     });\n \n+    test('Verify Load tile displays from toolbar with readIngestion authority', async () => {\n+        const authorityService = new AuthoritiesService();\n+        authorityService.setAuthorities(['readIngestion']);\n+        const {getByLabelText, getByText, queryByText} = render(<AuthoritiesContext.Provider value={authorityService}><TilesView/></AuthoritiesContext.Provider>);\n+\n+        // Curate tile not shown initially\n+        expect(queryByText(\"icon-load\")).not.toBeInTheDocument();\n+        expect(queryByText(\"title-load\")).not.toBeInTheDocument();\n+\n+        await curateData.setupMockAPIs(axiosMock);\n+        fireEvent.click(getByLabelText(\"tool-load\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9689021f3ee50254dcd0930bd66d59682ac5ed2b"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dae0f38d865ccaa14bac8858862d50f15b600db0", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/dae0f38d865ccaa14bac8858862d50f15b600db0", "committedDate": "2020-05-26T22:05:46Z", "message": "DHFPROD-4671: Add hub-central-load-reader role"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9689021f3ee50254dcd0930bd66d59682ac5ed2b", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/9689021f3ee50254dcd0930bd66d59682ac5ed2b", "committedDate": "2020-05-26T19:43:27Z", "message": "DHFPROD-4671: Add hub-central-load-reader role"}, "afterCommit": {"oid": "dae0f38d865ccaa14bac8858862d50f15b600db0", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/dae0f38d865ccaa14bac8858862d50f15b600db0", "committedDate": "2020-05-26T22:05:46Z", "message": "DHFPROD-4671: Add hub-central-load-reader role"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzU1OTMx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-418755931", "createdAt": "2020-05-26T23:58:22Z", "commit": {"oid": "dae0f38d865ccaa14bac8858862d50f15b600db0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzU5MDM0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-418759034", "createdAt": "2020-05-27T00:07:49Z", "commit": {"oid": "dae0f38d865ccaa14bac8858862d50f15b600db0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MTE0OTkz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-419114993", "createdAt": "2020-05-27T11:51:56Z", "commit": {"oid": "dae0f38d865ccaa14bac8858862d50f15b600db0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NDE5NjQw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3984#pullrequestreview-419419640", "createdAt": "2020-05-27T16:48:33Z", "commit": {"oid": "dae0f38d865ccaa14bac8858862d50f15b600db0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2942, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}