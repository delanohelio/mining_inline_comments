{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwNTcwODQw", "number": 4227, "title": "DHFPROD-3671: Support more formats for parseDate and parseDateTime", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-07-16T22:38:29Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4227", "merged": true, "mergeCommit": {"oid": "37eccd93084939c93cf273f51bddd7a8619d7048"}, "closed": true, "closedAt": "2020-07-20T17:50:00Z", "author": {"login": "ryanjdew"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1ncbYgFqTQ1MDI3MjA0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc21JVAgFqTQ1MTgxNjc0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjcyMDQz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4227#pullrequestreview-450272043", "createdAt": "2020-07-16T23:01:25Z", "commit": {"oid": "ea107207802b0178865d632e53b174ae1bf0e895"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNjA0MTM3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4227#pullrequestreview-450604137", "createdAt": "2020-07-17T12:11:13Z", "commit": {"oid": "ea107207802b0178865d632e53b174ae1bf0e895"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMjoxMToxNFrOGzQksw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMjoxMToxNFrOGzQksw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQwMjA5OQ==", "bodyText": "The story mentions that every error should be of the form - \"Also, every Error result should be a message of \"The pattern '$pattern' cannot be applied to the value '$value'\".\" - is that possible to do - which includes not showing the XSLT path where it failed, which a commenter on the story described as \"user hostile\"?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4227#discussion_r456402099", "createdAt": "2020-07-17T12:11:14Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/mapping-functions/core.sjs", "diffHunk": "@@ -137,7 +138,11 @@ function parseDate(value, pattern) {\n     }\n   }\n   else {\n-    fn.error(null, \"The given date pattern (\" + pattern + \") is not supported.\");\n+    try {\n+      response = xs.date(xdmp.parseYymmdd(originalPattern, value));\n+    } catch(e) {\n+      fn.error(null, \"The given date pattern (\" + originalPattern + \") is not supported.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea107207802b0178865d632e53b174ae1bf0e895"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea107207802b0178865d632e53b174ae1bf0e895", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/ea107207802b0178865d632e53b174ae1bf0e895", "committedDate": "2020-07-16T22:36:33Z", "message": "DHFPROD-3671: Support more formats for parseDate and parseDateTime"}, "afterCommit": {"oid": "a9a0c3160057e59a5a5b43a99d2c299148bcda1c", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/a9a0c3160057e59a5a5b43a99d2c299148bcda1c", "committedDate": "2020-07-17T16:38:47Z", "message": "DHFPROD-3671: Support more formats for parseDate and parseDateTime"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwODIyNTc0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4227#pullrequestreview-450822574", "createdAt": "2020-07-17T17:08:18Z", "commit": {"oid": "a9a0c3160057e59a5a5b43a99d2c299148bcda1c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNzowODoxOFrOGzapLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNzowODoxOFrOGzapLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU2NzA4Nw==", "bodyText": "Should we still keep the earlier error message for the case when pattern is not supported.\nFor ex, if \"Mon YYYY DD\" is not supported and the value is \"Jan 2019 16\", the error message would say\nThe pattern 'Mon YYYY DD' cannot be applied to the value 'Jan 2019 16'\nThe value seems to match the pattern and we should probably say it is not supported(?)", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4227#discussion_r456567087", "createdAt": "2020-07-17T17:08:18Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/mapping-functions/core.sjs", "diffHunk": "@@ -137,24 +138,33 @@ function parseDate(value, pattern) {\n     }\n   }\n   else {\n-    fn.error(null, \"The given date pattern (\" + pattern + \") is not supported.\");\n+    try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9a0c3160057e59a5a5b43a99d2c299148bcda1c"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e350fd535009f6e534eddfb2e8279dcda4cac7eb", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/e350fd535009f6e534eddfb2e8279dcda4cac7eb", "committedDate": "2020-07-17T23:45:37Z", "message": "DHFPROD-3671: Support more formats for parseDate and parseDateTime"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a9a0c3160057e59a5a5b43a99d2c299148bcda1c", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/a9a0c3160057e59a5a5b43a99d2c299148bcda1c", "committedDate": "2020-07-17T16:38:47Z", "message": "DHFPROD-3671: Support more formats for parseDate and parseDateTime"}, "afterCommit": {"oid": "e350fd535009f6e534eddfb2e8279dcda4cac7eb", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/e350fd535009f6e534eddfb2e8279dcda4cac7eb", "committedDate": "2020-07-17T23:45:37Z", "message": "DHFPROD-3671: Support more formats for parseDate and parseDateTime"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxMTU5NDE2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4227#pullrequestreview-451159416", "createdAt": "2020-07-19T20:07:00Z", "commit": {"oid": "e350fd535009f6e534eddfb2e8279dcda4cac7eb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxODE2NzQ4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4227#pullrequestreview-451816748", "createdAt": "2020-07-20T17:33:09Z", "commit": {"oid": "e350fd535009f6e534eddfb2e8279dcda4cac7eb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2366, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}