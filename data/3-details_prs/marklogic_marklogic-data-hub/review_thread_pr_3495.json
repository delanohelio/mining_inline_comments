{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NjEwNzY3", "number": 3495, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowMzoxM1rODaW_dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDo0NDozOVrODbBHHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4OTY2MjYyOnYy", "diffSide": "RIGHT", "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/ConnectionAuthenticationToken.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowMzoxM1rOFhRaaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowMzoxM1rOFhRaaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQzMjYxNg==", "bodyText": "Do we need to add projDir as a security-related property?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370432616", "createdAt": "2020-01-24T01:03:13Z", "author": {"login": "hao1st"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/ConnectionAuthenticationToken.java", "diffHunk": "@@ -42,6 +42,7 @@\n     private final Object principal;\n     private boolean hasManagePrivileges = false;\n     private boolean stagingIsAccessible = false;\n+    private String projDir;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4OTY2MzgzOnYy", "diffSide": "RIGHT", "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/LoginLogoutHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowNDowNFrOFhRbKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowNDowNFrOFhRbKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQzMjgwOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    resp.put(\"projDir\", authenticationToken.getProjDir());\n          \n          \n            \n                    resp.put(\"projDir\", environmentService.getProjectDirectory());", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370432808", "createdAt": "2020-01-24T01:04:04Z", "author": {"login": "hao1st"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/LoginLogoutHandler.java", "diffHunk": "@@ -31,10 +33,15 @@\n     @Override\n     public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException {\n         ConnectionAuthenticationToken authenticationToken = (ConnectionAuthenticationToken)authentication;\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode resp = mapper.createObjectNode();\n+        resp.put(\"isInstalled\", authenticationToken.stagingIsAccessible());\n+        resp.put(\"hasManagePrivileges\", authenticationToken.hasManagePrivileges());\n+        resp.put(\"projDir\", authenticationToken.getProjDir());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4OTY2ODcyOnYy", "diffSide": "RIGHT", "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowNjoyN1rOFhRdxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowNjoyN1rOFhRdxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQzMzQ3Nw==", "bodyText": "This logic is repeated above. Seems like HubProject should have a \"getProjectName()\" method, assuming that project name should always equal the name of the directory?\nAlso, since getProjectDir returns a Path, it seems better to call toFile().getName() instead of messing around with Strings.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370433477", "createdAt": "2020-01-24T01:06:27Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "diffHunk": "@@ -122,4 +127,18 @@ public JsonNode reset() {\n         obj.put(\"reset\", true);\n         return obj;\n     }\n+\n+    @RequestMapping(value = \"/project-info\", method = RequestMethod.GET)\n+    @ResponseBody\n+    public JsonNode getProjectInfo(HttpSession session) {\n+        ObjectMapper objectMapper = new ObjectMapper();\n+        ObjectNode resp = objectMapper.createObjectNode();\n+        resp.put(\"dhfVersion\", versions.getHubVersion());\n+        String projDir = hubConfig.getHubProject().getProjectDir().toString();\n+        projDir = projDir.substring(projDir.lastIndexOf(File.separator)+1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4OTY3MzE5OnYy", "diffSide": "RIGHT", "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/MarkLogicAuthenticationManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowOToyM1rOFhRgZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwNDo0Mzo0MlrOFhT0DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQzNDE1MQ==", "bodyText": "This is really \"project name\", right? Not the project directory?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370434151", "createdAt": "2020-01-24T01:09:23Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/MarkLogicAuthenticationManager.java", "diffHunk": "@@ -113,8 +114,12 @@ public Authentication authenticate(Authentication authentication) throws Authent\n             stagingServerAccessible = dataServicesClient.checkConnection().isConnected();\n         } catch (Exception e) {\n         }\n+\n+        String projDir = environmentService.getProjectDirectory();\n+        projDir = projDir.substring(projDir.lastIndexOf(File.separator) + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3MTk0OQ==", "bodyText": "Yeah, but we don't have a \"project name\" currently. I talked to @ryanjdew  and he suggested that we use the project directory for now.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370471949", "createdAt": "2020-01-24T04:43:42Z", "author": {"login": "srinathgit"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/MarkLogicAuthenticationManager.java", "diffHunk": "@@ -113,8 +114,12 @@ public Authentication authenticate(Authentication authentication) throws Authent\n             stagingServerAccessible = dataServicesClient.checkConnection().isConnected();\n         } catch (Exception e) {\n         }\n+\n+        String projDir = environmentService.getProjectDirectory();\n+        projDir = projDir.substring(projDir.lastIndexOf(File.separator) + 1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQzNDE1MQ=="}, "originalCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MTE1NzY0OnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubProjectImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNDoyNTo0NVrOFhfQ0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxOTo0NDowOFrOFhofnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDY1OTUzNw==", "bodyText": "I commented on the JIRA ticket that I think we should get rid of this from the mockup. We don't have a concept of a \"Project Name\", and we shouldn't invent one during development. I think the requirement needs to be removed from the story.\nI can see an argument for the project directory, though I don't think that really needs to be there either.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370659537", "createdAt": "2020-01-24T14:25:45Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubProjectImpl.java", "diffHunk": "@@ -646,6 +646,11 @@ public void exportProject(File location) {\n         }\n     }\n \n+    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0558a11c2b8b1d6683661b57474f1f7b9183fc72"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDgxMDc4MA==", "bodyText": "I saw your comment and response from @sbayatpur on it. The suggestion from her is to use proj dir name for now. I think we can change it once she decides on 'Project Name'.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370810780", "createdAt": "2020-01-24T19:44:08Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubProjectImpl.java", "diffHunk": "@@ -646,6 +646,11 @@ public void exportProject(File location) {\n         }\n     }\n \n+    @Override", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDY1OTUzNw=="}, "originalCommit": {"oid": "0558a11c2b8b1d6683661b57474f1f7b9183fc72"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MTE1OTIwOnYy", "diffSide": "RIGHT", "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/LoginLogoutHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNDoyNjowOVrOFhfRsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNDoyNjowOVrOFhfRsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDY1OTc2MQ==", "bodyText": "If we keep this, should call this \"projectName\", not \"projDir\"", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370659761", "createdAt": "2020-01-24T14:26:09Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/LoginLogoutHandler.java", "diffHunk": "@@ -28,13 +32,21 @@\n \n public class LoginLogoutHandler implements AuthenticationSuccessHandler, LogoutSuccessHandler {\n \n+    @Autowired\n+    HubConfigSession hubConfig;\n+\n     @Override\n     public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException {\n         ConnectionAuthenticationToken authenticationToken = (ConnectionAuthenticationToken)authentication;\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode resp = mapper.createObjectNode();\n+        resp.put(\"isInstalled\", authenticationToken.stagingIsAccessible());\n+        resp.put(\"hasManagePrivileges\", authenticationToken.hasManagePrivileges());\n+        resp.put(\"projDir\", hubConfig.getHubProject().getProjectName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0558a11c2b8b1d6683661b57474f1f7b9183fc72"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MTE2NDM3OnYy", "diffSide": "RIGHT", "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNDoyNzo0N1rOFhfU3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNDoyNzo0N1rOFhfU3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDY2MDU3NQ==", "bodyText": "Let's spell these out, there's no benefit in shortening them - so \"projectName\" and \"projectPath\" (I think \"path\" is better than \"dir\" here, particularly because the output of getProjectDir is a Path (which means that method should really be called getProjectPath, but oh well)).", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370660575", "createdAt": "2020-01-24T14:27:47Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "diffHunk": "@@ -122,4 +126,16 @@ public JsonNode reset() {\n         obj.put(\"reset\", true);\n         return obj;\n     }\n+\n+    @RequestMapping(value = \"/project-info\", method = RequestMethod.GET)\n+    @ResponseBody\n+    public JsonNode getProjectInfo(HttpSession session) {\n+        ObjectMapper objectMapper = new ObjectMapper();\n+        ObjectNode resp = objectMapper.createObjectNode();\n+        resp.put(\"dhfVersion\", versions.getHubVersion());\n+        resp.put(\"projName\", hubConfig.getHubProject().getProjectName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0558a11c2b8b1d6683661b57474f1f7b9183fc72"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NTEyOTI1OnYy", "diffSide": "RIGHT", "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMzo0MzoyNFrOFiDCLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDo0NzowMVrOFiQ8HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTI0NTYxMw==", "bodyText": "What about tests for this? We'd at least want a smoke test to verify that there's not an e.g. obvious null-pointer exception.\nAlso, I think @hao1st  mentioned this too - based on the current design of oneui, couldn't HubProject be part of EnvironmentService? That would start removing one concern from HubConfig, which is overloaded with concerns right now. I think this would be a good move, as the HubProject is a global object that is part of the environment - it's not specific to a user.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r371245613", "createdAt": "2020-01-27T13:43:24Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "diffHunk": "@@ -122,4 +126,16 @@ public JsonNode reset() {\n         obj.put(\"reset\", true);\n         return obj;\n     }\n+\n+    @RequestMapping(value = \"/project-info\", method = RequestMethod.GET)\n+    @ResponseBody\n+    public JsonNode getProjectInfo(HttpSession session) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "347363ce930447a5010288e9b6b2caa399fe0220"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQxMzU1OQ==", "bodyText": "I will add a test .\nI don't think we can autowire HubProject in EnvironmentService. The first object created in one-ui is HubConfigSession and that is what we are using through out and that's why I had to access HubProject from HubConfigSession", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r371413559", "createdAt": "2020-01-27T18:41:46Z", "author": {"login": "srinathgit"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "diffHunk": "@@ -122,4 +126,16 @@ public JsonNode reset() {\n         obj.put(\"reset\", true);\n         return obj;\n     }\n+\n+    @RequestMapping(value = \"/project-info\", method = RequestMethod.GET)\n+    @ResponseBody\n+    public JsonNode getProjectInfo(HttpSession session) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTI0NTYxMw=="}, "originalCommit": {"oid": "347363ce930447a5010288e9b6b2caa399fe0220"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3MzQzNw==", "bodyText": "If HubProjectImpl is autowired in, then it's always available, right?\nI'll approve the PR, I just feel strongly that we need to stop using HubConfig, which is doing far too much, and use HubProject and a doesnt-yet-exist HubClient when possible.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r371473437", "createdAt": "2020-01-27T20:47:01Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "diffHunk": "@@ -122,4 +126,16 @@ public JsonNode reset() {\n         obj.put(\"reset\", true);\n         return obj;\n     }\n+\n+    @RequestMapping(value = \"/project-info\", method = RequestMethod.GET)\n+    @ResponseBody\n+    public JsonNode getProjectInfo(HttpSession session) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTI0NTYxMw=="}, "originalCommit": {"oid": "347363ce930447a5010288e9b6b2caa399fe0220"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NjU2MzUxOnYy", "diffSide": "RIGHT", "path": "one-ui/src/main/java/com/marklogic/hub/oneui/services/EnvironmentService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDo0NDozOVrOFiQ4Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDo0ODo1MlrOFiQ_Yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3MjM5NA==", "bodyText": "Couldn't you depend on HubProject instead, since that's not specific to a user?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r371472394", "createdAt": "2020-01-27T20:44:39Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/services/EnvironmentService.java", "diffHunk": "@@ -15,21 +15,29 @@\n  */\n package com.marklogic.hub.oneui.services;\n \n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import com.marklogic.hub.impl.Versions;\n import com.marklogic.hub.oneui.models.EnvironmentInfo;\n+import com.marklogic.hub.oneui.models.HubConfigSession;\n+import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Service;\n \n-import java.io.ByteArrayInputStream;\n-import java.io.ByteArrayOutputStream;\n-import java.io.IOException;\n-import java.io.ObjectInputStream;\n-import java.io.ObjectOutputStream;\n+import java.io.*;\n import java.nio.file.Path;\n import java.nio.file.Paths;\n import java.util.prefs.Preferences;\n \n @Service\n public class EnvironmentService {\n \n+    @Autowired\n+    private HubConfigSession hubConfig;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0fece52a39616ffccbd94005a4da5a2934716c5"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3NDI3NQ==", "bodyText": "No, I tried autowiring HubProject object here but its fields (projDir etc) are not populated and all are null and hence had to get the project from HubConfigSession", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r371474275", "createdAt": "2020-01-27T20:48:52Z", "author": {"login": "srinathgit"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/services/EnvironmentService.java", "diffHunk": "@@ -15,21 +15,29 @@\n  */\n package com.marklogic.hub.oneui.services;\n \n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import com.marklogic.hub.impl.Versions;\n import com.marklogic.hub.oneui.models.EnvironmentInfo;\n+import com.marklogic.hub.oneui.models.HubConfigSession;\n+import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Service;\n \n-import java.io.ByteArrayInputStream;\n-import java.io.ByteArrayOutputStream;\n-import java.io.IOException;\n-import java.io.ObjectInputStream;\n-import java.io.ObjectOutputStream;\n+import java.io.*;\n import java.nio.file.Path;\n import java.nio.file.Paths;\n import java.util.prefs.Preferences;\n \n @Service\n public class EnvironmentService {\n \n+    @Autowired\n+    private HubConfigSession hubConfig;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3MjM5NA=="}, "originalCommit": {"oid": "e0fece52a39616ffccbd94005a4da5a2934716c5"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3653, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}