{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2OTYzODc1", "number": 3856, "title": "DHFPROD-4720: Can now download user configuration files", "bodyText": "Added an \"all-artifacts\" project in core to support this.\nAdded our first use of \"Secured\" in HC, along with a pattern for how to verify that a user can or cannot access a Secured controller method.\nAlso removed a number of unused classes that aren't needed now that we're not checking if the user can install DH - ForbiddenException(LoginFailureHandler can assume that any failure is due to the user being unauthorized); ProjectDirectoryException (no more project); UIDeployListener (no more install); DataHubProjectUtils (no more upload). Also removed BadRequestException - CustomExceptionHandler wasn't doing anything with it, and it was being improperly thrown by MapSearchManager instead of the generic DataHubException (it shouldn't have been thrown there, since it was extending AuthenticationException).\nDescription\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-04-21T23:44:36Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3856", "merged": true, "mergeCommit": {"oid": "acc397b3252a9c7f64f7da6a377b1ef305f23bf1"}, "closed": true, "closedAt": "2020-04-23T01:43:26Z", "author": {"login": "rjrudin"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaLqpXgFqTM5ODQxMTgyMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaREYUgFqTM5ODY2NDQ4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NDExODIz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3856#pullrequestreview-398411823", "createdAt": "2020-04-22T17:23:39Z", "commit": {"oid": "9d06ef3a49ca924bd4478b7634433bc16658fbdf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNzoyMzozOVrOGKCC4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNzoyMzozOVrOGKCC4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE3MjQ1MA==", "bodyText": "How are we differentiating from a 400 Bad Request and a 500 internal server error in this case?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3856#discussion_r413172450", "createdAt": "2020-04-22T17:23:39Z", "author": {"login": "ryanjdew"}, "path": "marklogic-data-hub-central/src/main/java/com/marklogic/hub/central/managers/MapSearchManager.java", "diffHunk": "@@ -117,7 +117,7 @@ public StringHandle search(MapSearchQuery mapSearchQuery) {\n \n     public JsonNode sjsSearch(SJSSearchQuery SJSSearchQuery) {\n         if (SJSSearchQuery.sourceQuery == null && SJSSearchQuery.database == null) {\n-            throw new BadRequestException(\"Query requires database or sourceQuery\");\n+            throw new DataHubException(\"Query requires database or sourceQuery\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d06ef3a49ca924bd4478b7634433bc16658fbdf"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d06ef3a49ca924bd4478b7634433bc16658fbdf", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/9d06ef3a49ca924bd4478b7634433bc16658fbdf", "committedDate": "2020-04-21T23:44:26Z", "message": "DHFPROD-4720: Can now download user configuration files\n\nAdded an \"all-artifacts\" project in core to support this. \n\nAdded our first use of \"Secured\" in HC, along with a pattern for how to verify that a user can or cannot access a Secured controller method. \n\nAlso removed a number of unused classes that aren't needed now that we're not checking if the user can install DH - ForbiddenException(LoginFailureHandler can assume that any failure is due to the user being unauthorized); ProjectDirectoryException (no more project); UIDeployListener (no more install); DataHubProjectUtils (no more upload). Also removed BadRequestException - CustomExceptionHandler wasn't doing anything with it, and it was being improperly thrown by MapSearchManager instead of the generic DataHubException (it shouldn't have been thrown there, since it was extending AuthenticationException)."}, "afterCommit": {"oid": "ec4c8508e95f814cb362f7b1c51bad619573af6d", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/ec4c8508e95f814cb362f7b1c51bad619573af6d", "committedDate": "2020-04-22T22:13:11Z", "message": "DHFPROD-4720: Can now download user configuration files\n\nAdded an \"all-artifacts\" project in core to support this. \n\nAdded our first use of \"Secured\" in HC, along with a pattern for how to verify that a user can or cannot access a Secured controller method. \n\nAlso removed a number of unused classes that aren't needed now that we're not checking if the user can install DH - ForbiddenException(LoginFailureHandler can assume that any failure is due to the user being unauthorized); ProjectDirectoryException (no more project); UIDeployListener (no more install); DataHubProjectUtils (no more upload). Also removed BadRequestException - CustomExceptionHandler wasn't doing anything with it, and it was being improperly thrown by MapSearchManager instead of the generic DataHubException (it shouldn't have been thrown there, since it was extending AuthenticationException)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec4c8508e95f814cb362f7b1c51bad619573af6d", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/ec4c8508e95f814cb362f7b1c51bad619573af6d", "committedDate": "2020-04-22T22:13:11Z", "message": "DHFPROD-4720: Can now download user configuration files\n\nAdded an \"all-artifacts\" project in core to support this. \n\nAdded our first use of \"Secured\" in HC, along with a pattern for how to verify that a user can or cannot access a Secured controller method. \n\nAlso removed a number of unused classes that aren't needed now that we're not checking if the user can install DH - ForbiddenException(LoginFailureHandler can assume that any failure is due to the user being unauthorized); ProjectDirectoryException (no more project); UIDeployListener (no more install); DataHubProjectUtils (no more upload). Also removed BadRequestException - CustomExceptionHandler wasn't doing anything with it, and it was being improperly thrown by MapSearchManager instead of the generic DataHubException (it shouldn't have been thrown there, since it was extending AuthenticationException)."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NjM4NTk5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3856#pullrequestreview-398638599", "createdAt": "2020-04-22T22:37:21Z", "commit": {"oid": "ec4c8508e95f814cb362f7b1c51bad619573af6d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NjY0NDg0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3856#pullrequestreview-398664484", "createdAt": "2020-04-22T23:41:17Z", "commit": {"oid": "ec4c8508e95f814cb362f7b1c51bad619573af6d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3078, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}