{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMzIwMzMy", "number": 3752, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToyNTozMFrODrZ5ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToyNTozMFrODrZ5ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2ODM5NzEwOnYy", "diffSide": "RIGHT", "path": "one-ui/ui/src/components/load-data/new-data-load-dialog/new-data-load-dialog.test.tsx", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToyNTozMFrOF7u89Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxOTo0MDo0NVrOF8XeSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3OTU3Mw==", "bodyText": "This looks good @ryanjdew . Can we clear the mocks after a test is done?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3752#discussion_r398179573", "createdAt": "2020-03-25T21:25:30Z", "author": {"login": "bsrikan"}, "path": "one-ui/ui/src/components/load-data/new-data-load-dialog/new-data-load-dialog.test.tsx", "diffHunk": "@@ -1,9 +1,89 @@\n import React from 'react';\n-import { shallow } from 'enzyme';\n+import { act, render, fireEvent, waitForElement } from '@testing-library/react';\n+import '@testing-library/jest-dom/extend-expect';\n import NewDataLoadDialog from './new-data-load-dialog';\n+import {BrowserRouter} from \"react-router-dom\";\n+import axiosMock from 'axios'\n \n-describe('New/Edit data load component', () => {\n-  it('should render correctly', () => {\n-    shallow(<NewDataLoadDialog data/>);\n+jest.mock('axios');\n+\n+axiosMock.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+axiosMock.post.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+axiosMock.get.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83ff50fe84543bd22dbffd0ce2cfbf128216b77c"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIyOTU0MQ==", "bodyText": "@bsrikan Do you mean something like below to clear the counts?\nafterEach(() => {\n  jest.clearAllMocks();\n});", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3752#discussion_r398229541", "createdAt": "2020-03-25T23:22:09Z", "author": {"login": "ryanjdew"}, "path": "one-ui/ui/src/components/load-data/new-data-load-dialog/new-data-load-dialog.test.tsx", "diffHunk": "@@ -1,9 +1,89 @@\n import React from 'react';\n-import { shallow } from 'enzyme';\n+import { act, render, fireEvent, waitForElement } from '@testing-library/react';\n+import '@testing-library/jest-dom/extend-expect';\n import NewDataLoadDialog from './new-data-load-dialog';\n+import {BrowserRouter} from \"react-router-dom\";\n+import axiosMock from 'axios'\n \n-describe('New/Edit data load component', () => {\n-  it('should render correctly', () => {\n-    shallow(<NewDataLoadDialog data/>);\n+jest.mock('axios');\n+\n+axiosMock.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+axiosMock.post.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+axiosMock.get.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3OTU3Mw=="}, "originalCommit": {"oid": "83ff50fe84543bd22dbffd0ce2cfbf128216b77c"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODI1MzM3NA==", "bodyText": "Right. So it doesnt bleed into other tests that may use those mocks.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3752#discussion_r398253374", "createdAt": "2020-03-26T00:39:28Z", "author": {"login": "bsrikan"}, "path": "one-ui/ui/src/components/load-data/new-data-load-dialog/new-data-load-dialog.test.tsx", "diffHunk": "@@ -1,9 +1,89 @@\n import React from 'react';\n-import { shallow } from 'enzyme';\n+import { act, render, fireEvent, waitForElement } from '@testing-library/react';\n+import '@testing-library/jest-dom/extend-expect';\n import NewDataLoadDialog from './new-data-load-dialog';\n+import {BrowserRouter} from \"react-router-dom\";\n+import axiosMock from 'axios'\n \n-describe('New/Edit data load component', () => {\n-  it('should render correctly', () => {\n-    shallow(<NewDataLoadDialog data/>);\n+jest.mock('axios');\n+\n+axiosMock.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+axiosMock.post.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+axiosMock.get.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3OTU3Mw=="}, "originalCommit": {"oid": "83ff50fe84543bd22dbffd0ce2cfbf128216b77c"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0MzQ2NQ==", "bodyText": "@bsrikan Ok. Added the snippet above and rebased.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3752#discussion_r398843465", "createdAt": "2020-03-26T19:40:45Z", "author": {"login": "ryanjdew"}, "path": "one-ui/ui/src/components/load-data/new-data-load-dialog/new-data-load-dialog.test.tsx", "diffHunk": "@@ -1,9 +1,89 @@\n import React from 'react';\n-import { shallow } from 'enzyme';\n+import { act, render, fireEvent, waitForElement } from '@testing-library/react';\n+import '@testing-library/jest-dom/extend-expect';\n import NewDataLoadDialog from './new-data-load-dialog';\n+import {BrowserRouter} from \"react-router-dom\";\n+import axiosMock from 'axios'\n \n-describe('New/Edit data load component', () => {\n-  it('should render correctly', () => {\n-    shallow(<NewDataLoadDialog data/>);\n+jest.mock('axios');\n+\n+axiosMock.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+axiosMock.post.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+axiosMock.get.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3OTU3Mw=="}, "originalCommit": {"oid": "83ff50fe84543bd22dbffd0ce2cfbf128216b77c"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3516, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}