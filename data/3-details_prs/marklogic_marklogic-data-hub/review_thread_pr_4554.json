{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MjQ4MTcy", "number": 4554, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxOToyNzoxMVrOEiqjDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNToxODowN1rOEkGuoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0Nzg0MTQyOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub-central/ui/src/components/xml-view/xml-view.test.tsx", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxOToyNzoxMVrOHQrMZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQyMTowNjoxM1rOHQt3Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI0Njk0OA==", "bodyText": "Let's move the xmlString to UI/src/assets/mock-data folder, may be under 'common.data.ts' or some other appropriate file and then import here so you can use it in multiple places. It makes the tests look cleaner.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#discussion_r487246948", "createdAt": "2020-09-11T19:27:11Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/xml-view/xml-view.test.tsx", "diffHunk": "@@ -0,0 +1,20 @@\n+import {getByText, render} from \"@testing-library/react\";\n+import XmlView from \"../xml-view/xml-view\";\n+import React from \"react\";\n+\n+describe(\"XML view detail component - RTL\", () => {\n+    test('Rendering xml document with es namespace in instance document', () => {\n+        const xmlString = \"<Document><content><es:envelope xmlns:es=\\\"http://marklogic.com/entity-services\\\"><es:instance><Person><fname xsi:type=\\\"xs:string\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\">Alexandra</fname></Person></es:instance></es:envelope></content></Document>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e33f7c87de646a245e25271ac9c5a58055c8b966"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI4MDU4OA==", "bodyText": "The data is very specific to this test. Should the xmlString go into the UI/src/assets/mock-data folder", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#discussion_r487280588", "createdAt": "2020-09-11T20:41:09Z", "author": {"login": "rahulvudutala"}, "path": "marklogic-data-hub-central/ui/src/components/xml-view/xml-view.test.tsx", "diffHunk": "@@ -0,0 +1,20 @@\n+import {getByText, render} from \"@testing-library/react\";\n+import XmlView from \"../xml-view/xml-view\";\n+import React from \"react\";\n+\n+describe(\"XML view detail component - RTL\", () => {\n+    test('Rendering xml document with es namespace in instance document', () => {\n+        const xmlString = \"<Document><content><es:envelope xmlns:es=\\\"http://marklogic.com/entity-services\\\"><es:instance><Person><fname xsi:type=\\\"xs:string\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\">Alexandra</fname></Person></es:instance></es:envelope></content></Document>\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI0Njk0OA=="}, "originalCommit": {"oid": "e33f7c87de646a245e25271ac9c5a58055c8b966"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI5MDY1MQ==", "bodyText": "@rahulvudutala general guidelines here: https://wiki.marklogic.com/display/ENGINEERING/Writing+Data+Hub+Tests#WritingDataHubTests-RTLTests\nexport it in a file and import in the test even if its specific to a test. Later you might have to enhance it to reuse in another test.\nLets call it namespacedXMLInstance instance of xmlString.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#discussion_r487290651", "createdAt": "2020-09-11T21:06:13Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/xml-view/xml-view.test.tsx", "diffHunk": "@@ -0,0 +1,20 @@\n+import {getByText, render} from \"@testing-library/react\";\n+import XmlView from \"../xml-view/xml-view\";\n+import React from \"react\";\n+\n+describe(\"XML view detail component - RTL\", () => {\n+    test('Rendering xml document with es namespace in instance document', () => {\n+        const xmlString = \"<Document><content><es:envelope xmlns:es=\\\"http://marklogic.com/entity-services\\\"><es:instance><Person><fname xsi:type=\\\"xs:string\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\">Alexandra</fname></Person></es:instance></es:envelope></content></Document>\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI0Njk0OA=="}, "originalCommit": {"oid": "e33f7c87de646a245e25271ac9c5a58055c8b966"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0Nzg0NDUzOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub-central/ui/src/components/xml-view/xml-view.test.tsx", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxOToyODozMlrOHQrOTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxOToyODozMlrOHQrOTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI0NzQzNw==", "bodyText": "Similar changes here as mentioned earlier.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#discussion_r487247437", "createdAt": "2020-09-11T19:28:32Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/xml-view/xml-view.test.tsx", "diffHunk": "@@ -0,0 +1,20 @@\n+import {getByText, render} from \"@testing-library/react\";\n+import XmlView from \"../xml-view/xml-view\";\n+import React from \"react\";\n+\n+describe(\"XML view detail component - RTL\", () => {\n+    test('Rendering xml document with es namespace in instance document', () => {\n+        const xmlString = \"<Document><content><es:envelope xmlns:es=\\\"http://marklogic.com/entity-services\\\"><es:instance><Person><fname xsi:type=\\\"xs:string\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\">Alexandra</fname></Person></es:instance></es:envelope></content></Document>\";\n+        const {  getByTestId, getByText } = render(<XmlView document={xmlString}/>);\n+        expect(getByTestId(\"xml-document\")).toBeInTheDocument();\n+        expect(getByText(\"Alexandra\")).toBeInTheDocument();\n+    });\n+\n+    test('Rendering xml document with no namespace in instance document', () => {\n+        const xmlString = \"<Document><content><envelope xmlns:es=\\\"http://marklogic.com/entity-services\\\"><instance><Person><fname xsi:type=\\\"xs:string\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\">Alexandra</fname></Person></instance></envelope></content></Document>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e33f7c87de646a245e25271ac9c5a58055c8b966"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2Mjk0NDMyOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub-central/ui/e2e/cypress/support/pages/browse.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNToxODowN1rOHS19eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQxNToxODowN1rOHS19eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUyMDUwNQ==", "bodyText": "removed getSelectedFacet to reuse existing locators. getSelectedFacet didnt work for null check of an element since it was using contains to match target element.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4554#discussion_r489520505", "createdAt": "2020-09-16T15:18:07Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/e2e/cypress/support/pages/browse.tsx", "diffHunk": "@@ -144,8 +144,13 @@ class BrowsePage {\n     return cy.get('[data-cy=selected-facet-block]');\n   }\n \n-  getSelectedFacet(facet: string) {\n-    return cy.get('#selected-facets > button').contains(facet);\n+  computeStartDateOfTheWeek() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cad1cf2d3f4f31dc52c639770a1da956645202e2"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3326, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}