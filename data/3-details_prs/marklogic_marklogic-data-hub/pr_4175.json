{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyMjU4NjQw", "number": 4175, "title": "DHFPROD-4661: Verify custom steps can be run", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-06-30T19:52:17Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4175", "merged": true, "mergeCommit": {"oid": "cd9fdc428a63466c5ad9704c8293fb10fe6a350d"}, "closed": true, "closedAt": "2020-07-01T20:28:50Z", "author": {"login": "ryanjdew"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwehnbgFqTQ0MDQ1ODMwMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwvW4vgFqTQ0MTEzODY0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDU4MzAx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4175#pullrequestreview-440458301", "createdAt": "2020-06-30T23:46:04Z", "commit": {"oid": "b4ecfe70e3e5083e3dcad44907ebbd5c7a3e7a89"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMzo0NjowNFrOGrSJuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMzo0NzowMFrOGrSKxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAzOTM1Mg==", "bodyText": "Can you add a property to the step and confirm that it is available in 'options' in the module ?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4175#discussion_r448039352", "createdAt": "2020-06-30T23:46:04Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub-central/src/test/resources/test-projects/run-flow-test/modules/root/custom-modules/custom/testStep.sjs", "diffHunk": "@@ -0,0 +1,11 @@\n+'use strict';\n+\n+function main(content, options) {\n+    const valueObj = content.value.toObject();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4ecfe70e3e5083e3dcad44907ebbd5c7a3e7a89"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAzOTYyMg==", "bodyText": "Can this line 162 be removed as it seems to be duplicate of 159 ?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4175#discussion_r448039622", "createdAt": "2020-06-30T23:47:00Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub-central/src/test/java/com/marklogic/hub/central/controllers/FlowControllerTest.java", "diffHunk": "@@ -146,6 +145,46 @@ void test() throws Exception {\n             });\n     }\n \n+    @Test\n+    void testCustomStepRun() throws Exception {\n+        runAsDataHubDeveloper();\n+        installProjectInFolder(\"test-projects/run-flow-test\");\n+\n+        loginAsTestUserWithRoles(\"hub-central-step-runner\");\n+\n+        final String flowName = \"testFlow\";\n+        final String flowPath = PATH + \"/\" + flowName;\n+\n+        // Run the step\n+        flowController.setFlowRunnerConsumer((FlowRunner::awaitCompletion));\n+        MockMultipartFile file1 = new MockMultipartFile(\"files\",\"file1.json\", MediaType.APPLICATION_JSON, \"{\\\"name\\\": \\\"Joe\\\"}\".getBytes(StandardCharsets.UTF_8));\n+        MockMultipartFile file2 = new MockMultipartFile(\"files\",\"file2.json\", MediaType.APPLICATION_JSON, \"{\\\"name\\\": \\\"John\\\"}\".getBytes(StandardCharsets.UTF_8));\n+        flowController.setFlowRunnerConsumer((FlowRunner::awaitCompletion));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4ecfe70e3e5083e3dcad44907ebbd5c7a3e7a89"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93de599f766e7cfb6073afe00e100c5f0498d532", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/93de599f766e7cfb6073afe00e100c5f0498d532", "committedDate": "2020-07-01T19:15:30Z", "message": "DHFPROD-4661: Verify custom steps can be run"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b4ecfe70e3e5083e3dcad44907ebbd5c7a3e7a89", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b4ecfe70e3e5083e3dcad44907ebbd5c7a3e7a89", "committedDate": "2020-06-30T19:50:46Z", "message": "DHFPROD-4661: Verify custom steps can be run"}, "afterCommit": {"oid": "93de599f766e7cfb6073afe00e100c5f0498d532", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/93de599f766e7cfb6073afe00e100c5f0498d532", "committedDate": "2020-07-01T19:15:30Z", "message": "DHFPROD-4661: Verify custom steps can be run"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTM0ODYw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4175#pullrequestreview-441134860", "createdAt": "2020-07-01T19:18:32Z", "commit": {"oid": "93de599f766e7cfb6073afe00e100c5f0498d532"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTM4NjQ1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4175#pullrequestreview-441138645", "createdAt": "2020-07-01T19:24:59Z", "commit": {"oid": "93de599f766e7cfb6073afe00e100c5f0498d532"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2603, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}