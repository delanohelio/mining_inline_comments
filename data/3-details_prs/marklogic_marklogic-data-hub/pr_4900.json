{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2MTIwMDQ0", "number": 4900, "title": "DHFPROD-6290:Original gradle properties get reset if runAsUser() is called", "bodyText": "Description\nOriginal gradle properties get reset if runAsUser() is called. Once PR #4890 and this gets merged, most of the java tests should pass in DHS. No new tests needed, existing ones should pass.\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n[n/a ] Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-11-24T01:55:53Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4900", "merged": true, "mergeCommit": {"oid": "c7db1256f4800d55aee9a4b4362d2885ab982557"}, "closed": true, "closedAt": "2020-11-25T16:21:34Z", "author": {"login": "srinathgit"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfqEKlgFqTUzNzUwNzkxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdf-42lAFqTUzODUyNDc5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NTA3OTE0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4900#pullrequestreview-537507914", "createdAt": "2020-11-24T13:49:24Z", "commit": {"oid": "58b21ecde2fddc1410455d1741126e4091a9a77a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzo0OToyNFrOH5BqSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQxMzo0OToyNFrOH5BqSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU1ODA5MA==", "bodyText": "I think it would be better to construct a new Properties object and copy everything from \"props\" into it, then override mlUsername/mlPassword. That ensures we don't modify the set of Properties that were actually read from disk.\nGood catch though figuring this out.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4900#discussion_r529558090", "createdAt": "2020-11-24T13:49:24Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/test/java/com/marklogic/hub/HubTestBase.java", "diffHunk": "@@ -183,8 +184,10 @@ protected HubClient runAsDataHubOperator() {\n     @Override\n     protected HubClient runAsUser(String mlUsername, String mlPassword) {\n         hubClient = null;\n-\n-        applyMlUsernameAndMlPassword(mlUsername, mlPassword);\n+        Properties props = hubConfigInterceptor.getHubConfigObjectFactory().getGradleProperties();\n+        props.setProperty(\"mlUsername\", mlUsername);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58b21ecde2fddc1410455d1741126e4091a9a77a"}, "originalPosition": 15}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58b21ecde2fddc1410455d1741126e4091a9a77a", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/58b21ecde2fddc1410455d1741126e4091a9a77a", "committedDate": "2020-11-24T01:52:41Z", "message": "DHFPROD-6290:Original gradle properties get reset if runAsUser() is called"}, "afterCommit": {"oid": "feb8f3618a31f6ffc74d630f60ffda0bec70ed7e", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/feb8f3618a31f6ffc74d630f60ffda0bec70ed7e", "committedDate": "2020-11-24T18:01:23Z", "message": "DHFPROD-6290:Original gradle properties get reset if runAsUser() is called"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODQxNDIy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4900#pullrequestreview-537841422", "createdAt": "2020-11-24T19:33:36Z", "commit": {"oid": "feb8f3618a31f6ffc74d630f60ffda0bec70ed7e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MDU1NDMw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4900#pullrequestreview-538055430", "createdAt": "2020-11-24T23:47:10Z", "commit": {"oid": "feb8f3618a31f6ffc74d630f60ffda0bec70ed7e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b8f268d08bfbe74822c1ec14ed18a45f90918ef", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/4b8f268d08bfbe74822c1ec14ed18a45f90918ef", "committedDate": "2020-11-25T03:42:15Z", "message": "DHFPROD-6290:Set 'hubDhs' and 'hubSsl' when runAsUser() is called"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "feb8f3618a31f6ffc74d630f60ffda0bec70ed7e", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/feb8f3618a31f6ffc74d630f60ffda0bec70ed7e", "committedDate": "2020-11-24T18:01:23Z", "message": "DHFPROD-6290:Original gradle properties get reset if runAsUser() is called"}, "afterCommit": {"oid": "4b8f268d08bfbe74822c1ec14ed18a45f90918ef", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/4b8f268d08bfbe74822c1ec14ed18a45f90918ef", "committedDate": "2020-11-25T03:42:15Z", "message": "DHFPROD-6290:Set 'hubDhs' and 'hubSsl' when runAsUser() is called"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MTg3ODcy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4900#pullrequestreview-538187872", "createdAt": "2020-11-25T06:26:26Z", "commit": {"oid": "4b8f268d08bfbe74822c1ec14ed18a45f90918ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTI0Nzkz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4900#pullrequestreview-538524793", "createdAt": "2020-11-25T14:05:06Z", "commit": {"oid": "4b8f268d08bfbe74822c1ec14ed18a45f90918ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1720, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}