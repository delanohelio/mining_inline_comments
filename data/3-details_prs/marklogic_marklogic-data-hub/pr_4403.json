{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3Njc1NTk4", "number": 4403, "title": "DHFPROD-5565: Unauthorized user can view Model content via URL route,\u2026", "bodyText": "\u2026 DHFPROD-5619: disabled icon color\nDescription\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-08-13T23:07:31Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4403", "merged": true, "mergeCommit": {"oid": "85ee9aaa8ddbe256e087d54afe40927c37121d85"}, "closed": true, "closedAt": "2020-08-14T23:37:59Z", "author": {"login": "brucean52"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-oVODAFqTQ2NzE4ODg0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-8t3HgFqTQ2NzkxMjU2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MTg4ODQ2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4403#pullrequestreview-467188846", "createdAt": "2020-08-13T23:08:46Z", "commit": {"oid": "8525fd4d5bbb400e2c9e46b22559d42ae6b1f28e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QyMzowODo0NlrOHAgpww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QyMzowODo0NlrOHAgpww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5NzAyNw==", "bodyText": "Doing this to address this e2e test failure on windows.\n\nI believe this is due to toolbar component using inline style instead of CSS.\nhttps://reactjs.org/docs/faq-styling.html#are-inline-styles-bad", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4403#discussion_r470297027", "createdAt": "2020-08-13T23:08:46Z", "author": {"login": "brucean52"}, "path": "marklogic-data-hub-central/ui/e2e/cypress/integration/modeling/writer.spec.tsx", "diffHunk": "@@ -21,7 +21,7 @@ describe('Entity Modeling: Writer Role', () => {\n     cy.contains(Application.title);\n     console.log(Cypress.env('mlHost'));\n     cy.loginAsTestUserWithRoles(\"hub-central-entity-model-reader\", \"hub-central-entity-model-writer\", \"hub-central-saved-query-user\").withRequest()\n-    cy.waitUntil(() => toolbar.getModelToolbarIcon()).click();\n+    cy.waitUntil(() => toolbar.getModelToolbarIcon().should('have.css', 'cursor', 'pointer')).click();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8525fd4d5bbb400e2c9e46b22559d42ae6b1f28e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9126bef3a95bcea81f3ebadda8aecc32352c2ccb", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/9126bef3a95bcea81f3ebadda8aecc32352c2ccb", "committedDate": "2020-08-14T02:04:36Z", "message": "DHFPROD-5565: Unauthorized user can view Model content via URL route, DHFPROD-5619: disabled icon color"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8525fd4d5bbb400e2c9e46b22559d42ae6b1f28e", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/8525fd4d5bbb400e2c9e46b22559d42ae6b1f28e", "committedDate": "2020-08-13T23:05:42Z", "message": "DHFPROD-5565: Unauthorized user can view Model content via URL route, DHFPROD-5619: disabled icon color"}, "afterCommit": {"oid": "9126bef3a95bcea81f3ebadda8aecc32352c2ccb", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/9126bef3a95bcea81f3ebadda8aecc32352c2ccb", "committedDate": "2020-08-14T02:04:36Z", "message": "DHFPROD-5565: Unauthorized user can view Model content via URL route, DHFPROD-5619: disabled icon color"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3OTExMDk1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4403#pullrequestreview-467911095", "createdAt": "2020-08-14T22:48:11Z", "commit": {"oid": "9126bef3a95bcea81f3ebadda8aecc32352c2ccb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQyMjo0ODoxMlrOHBFLVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQyMjo0ODoxMlrOHBFLVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDg5NTQ0Ng==", "bodyText": "This is ok. Another example is use an authority for ex readRole who doesnt have rights to model tile. If setting all the authority to false is same as a user with hub-central-user role, then this test looks good.\nconst authorityService = new AuthoritiesService();\nauthorityService.setAuthorities(['readLoad']);", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4403#discussion_r470895446", "createdAt": "2020-08-14T22:48:12Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/pages/Modeling.test.tsx", "diffHunk": "@@ -85,6 +86,29 @@ describe(\"Modeling Page\", () => {\n     expect(getByLabelText(\"save-all\")).toBeDisabled();\n     expect(queryByLabelText('entity-modified-alert')).toBeNull();\n   });\n+\n+  test(\"Modeling: can not see data if user does not have entity model reader role\", async () => {\n+    mockPrimaryEntityType.mockResolvedValueOnce({ status: 200, data: getEntityTypes });\n+\n+    const { queryByText, queryByLabelText } = render(\n+      <AuthoritiesContext.Provider value={mockHCUserRolesService}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9126bef3a95bcea81f3ebadda8aecc32352c2ccb"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3OTEyMTUy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4403#pullrequestreview-467912152", "createdAt": "2020-08-14T22:52:03Z", "commit": {"oid": "9126bef3a95bcea81f3ebadda8aecc32352c2ccb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3OTEyNTY5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4403#pullrequestreview-467912569", "createdAt": "2020-08-14T22:53:47Z", "commit": {"oid": "9126bef3a95bcea81f3ebadda8aecc32352c2ccb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2318, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}