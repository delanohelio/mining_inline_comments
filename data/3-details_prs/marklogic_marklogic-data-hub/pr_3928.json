{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NDI2OTI0", "number": 3928, "title": "DHFPROD-4961:Fix the logic for fetching entities,setting targetEntityType and sourceContext", "bodyText": "Description\nFix the logic for fetching entities, setting targetEntityType and sourceContext. The existing tests should run fine. Additionally, this will require e2e which @bsrikan will add.\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-05-08T20:47:38Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3928", "merged": true, "mergeCommit": {"oid": "1ea0666d14a1c148645c226e5146c45758ba9eaf"}, "closed": true, "closedAt": "2020-05-13T19:48:56Z", "author": {"login": "srinathgit"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfYJAzAH2gAyNDE1NDI2OTI0Ojg2MWRlYmFmZDliZWU1Y2U2NjQ3M2VlNTdjMjRjYjhiYWQ5MjYwNzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcg-IrTgFqTQxMTIzODMzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "861debafd9bee5ce66473ee57c24cb8bad926078", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/861debafd9bee5ce66473ee57c24cb8bad926078", "committedDate": "2020-05-08T20:45:18Z", "message": "DHFPROD-4961:Fix the logic for fetching entities,setting targetEntityType and sourceContext"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTMwODg2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3928#pullrequestreview-408530886", "createdAt": "2020-05-08T21:12:51Z", "commit": {"oid": "861debafd9bee5ce66473ee57c24cb8bad926078"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMToxMjo1MlrOGSz48Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMToxMjo1MlrOGSz48Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM3NzcxMw==", "bodyText": "Is this based on the assumption that the entity title is the part of an entityTypeId that comes after the last slash? Would it be possible for the backend to provide this information instead?\nI'm leery of the UI having any knowledge of how to parse bits out of the entityTypeId. I'd like to consolidate all of that logic into entity-lib.sjs in the backend so that if any assumptions prove incorrect, we only have to change it in a single place in all of DHF.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3928#discussion_r422377713", "createdAt": "2020-05-08T21:12:52Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-central/ui/src/components/entities/mapping/mapping-card.tsx", "diffHunk": "@@ -500,27 +498,18 @@ const MappingCard: React.FC<Props> = (props) => {\n                 }\n                 nestedEntityData.push(propty);\n                 extractNestedEntityData(val.subProperties, propty.children, parentKey);\n-\n-                if(parentKey !== tempKey){\n-                    parentKey = tempKey;\n-                }\n+                parentKey = (parentKey.indexOf(\"/\")!=-1)?parentKey.substring(0,parentKey.lastIndexOf('/')):''", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "861debafd9bee5ce66473ee57c24cb8bad926078"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTY5MjQx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3928#pullrequestreview-408569241", "createdAt": "2020-05-08T22:53:33Z", "commit": {"oid": "861debafd9bee5ce66473ee57c24cb8bad926078"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4OTA1MDU3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3928#pullrequestreview-408905057", "createdAt": "2020-05-11T06:57:26Z", "commit": {"oid": "861debafd9bee5ce66473ee57c24cb8bad926078"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNjA1Nzcy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3928#pullrequestreview-410605772", "createdAt": "2020-05-13T05:52:43Z", "commit": {"oid": "861debafd9bee5ce66473ee57c24cb8bad926078"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNjI4NDE5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3928#pullrequestreview-410628419", "createdAt": "2020-05-13T06:43:07Z", "commit": {"oid": "861debafd9bee5ce66473ee57c24cb8bad926078"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMjM4MzM3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3928#pullrequestreview-411238337", "createdAt": "2020-05-13T19:35:15Z", "commit": {"oid": "861debafd9bee5ce66473ee57c24cb8bad926078"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2878, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}