{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MDIwMTI4", "number": 4822, "title": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view", "bodyText": "Description\n\nRun step functionality in Load TABLE view\nDesign has been verified by @jbelonoj\nWill create a duplicate PR towards develop after this one is merged\n\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-11-03T22:15:29Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822", "merged": true, "mergeCommit": {"oid": "34740dc54180d4856a4222e16f7b2557cc5164d3"}, "closed": true, "closedAt": "2020-11-04T16:48:55Z", "author": {"login": "briantang"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZA4IRgFqTUyMjkxOTYzNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZD9JpgFqTUyMjk5NTk5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTE5NjM1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#pullrequestreview-522919635", "createdAt": "2020-11-03T22:26:39Z", "commit": {"oid": "acc912857225443e903a827affbfec5f6c50e752"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "acc912857225443e903a827affbfec5f6c50e752", "author": {"user": {"login": "briantang", "name": "Brian Tang"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/acc912857225443e903a827affbfec5f6c50e752", "committedDate": "2020-11-03T22:13:20Z", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view"}, "afterCommit": {"oid": "3759c4dd99eab07bc3fe8d101adcaefc1c71d95b", "author": {"user": {"login": "briantang", "name": "Brian Tang"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3759c4dd99eab07bc3fe8d101adcaefc1c71d95b", "committedDate": "2020-11-03T22:29:00Z", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTE3NzM3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#pullrequestreview-522917737", "createdAt": "2020-11-03T22:22:59Z", "commit": {"oid": "acc912857225443e903a827affbfec5f6c50e752"}, "state": "DISMISSED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMjoyMjo1OVrOHtClgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QyMjozMTo0M1rOHtC0Fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5MDMzOA==", "bodyText": "Action is a click event but the comment says 'Hover over...'.\nLet's update the comments as well in such cases since they help to understand the related code better.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#discussion_r516990338", "createdAt": "2020-11-03T22:22:59Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/load/load-list.test.tsx", "diffHunk": "@@ -193,9 +193,9 @@ describe('Load data component', () => {\n     //Check if the list is rendered properly\n     expect(getByText('testLoadXML')).toBeInTheDocument();\n \n-    fireEvent.mouseOver(getByLabelText('testLoadXML-add-icon')); // Hover over the Add to Flow Icon to get more options\n+    fireEvent.click(getByLabelText('testLoadXML-add-icon')); // Hover over the Add to Flow Icon to get more options", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "acc912857225443e903a827affbfec5f6c50e752"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5MDYxNQ==", "bodyText": "same here. Update the misleading comment to match the click action.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#discussion_r516990615", "createdAt": "2020-11-03T22:23:37Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/load/load-list.test.tsx", "diffHunk": "@@ -233,9 +233,9 @@ describe('Load data component', () => {\n       </MemoryRouter>\n     )\n \n-    fireEvent.mouseOver(getByLabelText('testLoadXML-add-icon')); // Hover over the Add to Flow Icon to get more options\n+    fireEvent.click(getByLabelText('testLoadXML-add-icon')); // Hover over the Add to Flow Icon to get more options", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "acc912857225443e903a827affbfec5f6c50e752"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5MjkxMA==", "bodyText": "Can we shift the styles to its related module.scss file, to be consistent ?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#discussion_r516992910", "createdAt": "2020-11-03T22:29:01Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/load/load-list.tsx", "diffHunk": "@@ -135,13 +156,46 @@ const LoadList: React.FC<Props> = (props) => {\n         >\n             <div aria-label=\"add-step-confirmation\" style={{fontSize: '16px', padding: '10px'}}>\n                 { isStepInFlow(loadArtifactName, flowName) ?\n-                    <p aria-label=\"step-in-flow\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Add another instance of the step?</p> :\n-                    <p aria-label=\"step-not-in-flow\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong>?</p>\n+                    !addRun ? <p aria-label=\"step-in-flow\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Would you like to add another instance?</p> : <p aria-label=\"step-in-flow-run\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Would you like to add another instance and run it?</p>\n+                    : !addRun ? <p aria-label=\"step-not-in-flow\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong>?</p> : <p aria-label=\"step-not-in-flow-run\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong> and run it?</p> \n                 }\n             </div>\n         </Modal>\n     );\n \n+    const runMenu = (name) => (\n+        <Menu style={{right: '80px'}}>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "acc912857225443e903a827affbfec5f6c50e752"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5NDA3MQ==", "bodyText": "Same here. Let's move the css to module.scss file and just refer the classname here.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#discussion_r516994071", "createdAt": "2020-11-03T22:31:43Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/load/load-list.tsx", "diffHunk": "@@ -135,13 +156,46 @@ const LoadList: React.FC<Props> = (props) => {\n         >\n             <div aria-label=\"add-step-confirmation\" style={{fontSize: '16px', padding: '10px'}}>\n                 { isStepInFlow(loadArtifactName, flowName) ?\n-                    <p aria-label=\"step-in-flow\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Add another instance of the step?</p> :\n-                    <p aria-label=\"step-not-in-flow\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong>?</p>\n+                    !addRun ? <p aria-label=\"step-in-flow\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Would you like to add another instance?</p> : <p aria-label=\"step-in-flow-run\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Would you like to add another instance and run it?</p>\n+                    : !addRun ? <p aria-label=\"step-not-in-flow\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong>?</p> : <p aria-label=\"step-not-in-flow-run\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong> and run it?</p> \n                 }\n             </div>\n         </Modal>\n     );\n \n+    const runMenu = (name) => (\n+        <Menu style={{right: '80px'}}>\n+            <Menu.Item key=\"0\">\n+                { <Link data-testid=\"link\" id=\"tiles-run-add\" to={\n+                                        {pathname: '/tiles/run/add-run',\n+                                        state: {\n+                                            stepToAdd : name,\n+                                            stepDefinitionType : 'ingestion',\n+                                            existingFlow : false\n+                                        }}}><div className={styles.stepLink} data-testid={`${name}-run-toNewFlow`}>Run step in a new flow</div></Link>}\n+            </Menu.Item>\n+            <Menu.Item key=\"1\">\n+                <div className={styles.stepLinkExisting} data-testid={`${name}-run-toExistingFlow`}>Run step in an existing flow\n+                    <div className={styles.stepLinkSelect} onClick={(event) => { event.stopPropagation(); event.preventDefault(); }}>\n+                        <Select\n+                            style={{ width: '100%' }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3759c4dd99eab07bc3fe8d101adcaefc1c71d95b"}, "originalPosition": 95}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3759c4dd99eab07bc3fe8d101adcaefc1c71d95b", "author": {"user": {"login": "briantang", "name": "Brian Tang"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3759c4dd99eab07bc3fe8d101adcaefc1c71d95b", "committedDate": "2020-11-03T22:29:00Z", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view"}, "afterCommit": {"oid": "cb7ef30c27813b4325d474ee90711c25861fa1d9", "author": {"user": {"login": "briantang", "name": "Brian Tang"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/cb7ef30c27813b4325d474ee90711c25861fa1d9", "committedDate": "2020-11-03T22:33:04Z", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cb7ef30c27813b4325d474ee90711c25861fa1d9", "author": {"user": {"login": "briantang", "name": "Brian Tang"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/cb7ef30c27813b4325d474ee90711c25861fa1d9", "committedDate": "2020-11-03T22:33:04Z", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view"}, "afterCommit": {"oid": "0c3a5ffd5d401f83f0dfac523a9adf84191900ce", "author": {"user": {"login": "briantang", "name": "Brian Tang"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/0c3a5ffd5d401f83f0dfac523a9adf84191900ce", "committedDate": "2020-11-04T00:07:57Z", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37299c773fe8770ff1816d06010eff9cb068c654", "author": {"user": {"login": "briantang", "name": "Brian Tang"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/37299c773fe8770ff1816d06010eff9cb068c654", "committedDate": "2020-11-04T00:11:31Z", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c3a5ffd5d401f83f0dfac523a9adf84191900ce", "author": {"user": {"login": "briantang", "name": "Brian Tang"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/0c3a5ffd5d401f83f0dfac523a9adf84191900ce", "committedDate": "2020-11-04T00:07:57Z", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view"}, "afterCommit": {"oid": "37299c773fe8770ff1816d06010eff9cb068c654", "author": {"user": {"login": "briantang", "name": "Brian Tang"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/37299c773fe8770ff1816d06010eff9cb068c654", "committedDate": "2020-11-04T00:11:31Z", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTg4MjM3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#pullrequestreview-522988237", "createdAt": "2020-11-04T01:36:07Z", "commit": {"oid": "37299c773fe8770ff1816d06010eff9cb068c654"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyOTk1OTkx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#pullrequestreview-522995991", "createdAt": "2020-11-04T02:01:51Z", "commit": {"oid": "37299c773fe8770ff1816d06010eff9cb068c654"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1610, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}