{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NzIyOTYx", "number": 4962, "title": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions", "bodyText": "Description\nProvide info when main.sjs is not found or user doesn't required permissions\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-12-08T21:02:50Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962", "merged": true, "mergeCommit": {"oid": "979001b66f7e9114a3a20fd9880537ce09449045"}, "closed": true, "closedAt": "2020-12-10T01:50:07Z", "author": {"login": "srinathgit"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkQ4KWAFqTU0NzYzOTk1MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkjT_IgFqTU0ODQ5ODUwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NjM5OTUw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#pullrequestreview-547639950", "createdAt": "2020-12-08T21:18:17Z", "commit": {"oid": "75e8eebd91c13648752e9dd77874b66b1a6efcee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMToxODoxN1rOIB2nyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMToxODoxN1rOIB2nyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgxNDQwOQ==", "bodyText": "@srinathgit  Can you test one more thing - see what happens if the step module is present but has a compilation error in it. I think we may get the same error, in which case we really ought to include \"e.stack\" at the end of the message - e.g. \"; cause: ${e.stack}\".", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#discussion_r538814409", "createdAt": "2020-12-08T21:18:17Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/step.sjs", "diffHunk": "@@ -116,7 +116,7 @@ class Step {\n     try {\n       stepModule = this.hubUtils.retrieveModuleLibrary(moduleUri);\n     } catch (e) {\n-      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read permission to this module.`);\n+      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read and execute permission to this module`);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75e8eebd91c13648752e9dd77874b66b1a6efcee"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "75e8eebd91c13648752e9dd77874b66b1a6efcee", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/75e8eebd91c13648752e9dd77874b66b1a6efcee", "committedDate": "2020-12-08T21:00:59Z", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions"}, "afterCommit": {"oid": "83b07f8e06e9964c5207ffc26c423e4607ab25e6", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/83b07f8e06e9964c5207ffc26c423e4607ab25e6", "committedDate": "2020-12-09T01:50:06Z", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "83b07f8e06e9964c5207ffc26c423e4607ab25e6", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/83b07f8e06e9964c5207ffc26c423e4607ab25e6", "committedDate": "2020-12-09T01:50:06Z", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions"}, "afterCommit": {"oid": "98736bc18aa7fc85a86aab7ce3e6bf3a53e95d54", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/98736bc18aa7fc85a86aab7ce3e6bf3a53e95d54", "committedDate": "2020-12-09T02:14:34Z", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98736bc18aa7fc85a86aab7ce3e6bf3a53e95d54", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/98736bc18aa7fc85a86aab7ce3e6bf3a53e95d54", "committedDate": "2020-12-09T02:14:34Z", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions"}, "afterCommit": {"oid": "09ea88c3d270b6ceaeaac8d62d1e4adddd68d4bd", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/09ea88c3d270b6ceaeaac8d62d1e4adddd68d4bd", "committedDate": "2020-12-09T03:13:55Z", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MTg5MTc0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#pullrequestreview-548189174", "createdAt": "2020-12-09T13:38:10Z", "commit": {"oid": "09ea88c3d270b6ceaeaac8d62d1e4adddd68d4bd"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMzozODoxMFrOICVAmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMzozODoxMFrOICVAmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMxMjI4Mw==", "bodyText": "That looks good to me.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#discussion_r539312283", "createdAt": "2020-12-09T13:38:10Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/step.sjs", "diffHunk": "@@ -116,7 +116,10 @@ class Step {\n     try {\n       stepModule = this.hubUtils.retrieveModuleLibrary(moduleUri);\n     } catch (e) {\n-      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read permission to this module.`);\n+      if(e.stack && e.stack.includes(\"XDMP-MODNOTFOUND\")){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09ea88c3d270b6ceaeaac8d62d1e4adddd68d4bd"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b26cad28ae756972b6edb33c4fdf691893322425", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b26cad28ae756972b6edb33c4fdf691893322425", "committedDate": "2020-12-09T18:20:42Z", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09ea88c3d270b6ceaeaac8d62d1e4adddd68d4bd", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/09ea88c3d270b6ceaeaac8d62d1e4adddd68d4bd", "committedDate": "2020-12-09T03:13:55Z", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions"}, "afterCommit": {"oid": "b26cad28ae756972b6edb33c4fdf691893322425", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b26cad28ae756972b6edb33c4fdf691893322425", "committedDate": "2020-12-09T18:20:42Z", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NDgyMzQ4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#pullrequestreview-548482348", "createdAt": "2020-12-09T18:32:02Z", "commit": {"oid": "b26cad28ae756972b6edb33c4fdf691893322425"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NDk4NTAx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#pullrequestreview-548498501", "createdAt": "2020-12-09T18:47:01Z", "commit": {"oid": "b26cad28ae756972b6edb33c4fdf691893322425"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1548, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}