{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwNjAzMjI5", "number": 3437, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOTozNDo1NlrODWpc1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOTozNDo1NlrODWpc1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MDc0Mzg5OnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/cli/command/VerifyDhfInDhsCommand.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOTozNDo1NlrOFbhm_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQyMDowMzo1OFrOFbiXSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNjUyNg==", "bodyText": "@rjrudin can you please explain the change here and for flowOperator?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3437#discussion_r364406526", "createdAt": "2020-01-08T19:34:56Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/cli/command/VerifyDhfInDhsCommand.java", "diffHunk": "@@ -92,16 +99,17 @@ private void verifyModules() {\n             DocumentMetadataHandle metadata = documentManager.readMetadata(\"/com.marklogic.hub/config.sjs\", new DocumentMetadataHandle());\n             DocumentMetadataHandle.DocumentPermissions perms = metadata.getPermissions();\n \n-            Set<DocumentMetadataHandle.Capability> capabilities = perms.get(\"flowDeveloper\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.READ), \"Flow developer should be able to read modules\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.INSERT), \"Flow developer should be able to insert modules\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.EXECUTE), \"Flow developer should be able to execute modules\");\n+            Set<DocumentMetadataHandle.Capability> capabilities = perms.get(\"data-hub-module-reader\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8dbc1d8f5b2dee9eb4e35977bd1d9b153761bdb2"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQxODY3OA==", "bodyText": "The command is now using a permissions string of data-hub-module-reader,read,data-hub-module-reader,execute,data-hub-environment-manager,update,rest-extension-user,execute .", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3437#discussion_r364418678", "createdAt": "2020-01-08T20:03:27Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/cli/command/VerifyDhfInDhsCommand.java", "diffHunk": "@@ -92,16 +99,17 @@ private void verifyModules() {\n             DocumentMetadataHandle metadata = documentManager.readMetadata(\"/com.marklogic.hub/config.sjs\", new DocumentMetadataHandle());\n             DocumentMetadataHandle.DocumentPermissions perms = metadata.getPermissions();\n \n-            Set<DocumentMetadataHandle.Capability> capabilities = perms.get(\"flowDeveloper\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.READ), \"Flow developer should be able to read modules\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.INSERT), \"Flow developer should be able to insert modules\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.EXECUTE), \"Flow developer should be able to execute modules\");\n+            Set<DocumentMetadataHandle.Capability> capabilities = perms.get(\"data-hub-module-reader\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNjUyNg=="}, "originalCommit": {"oid": "8dbc1d8f5b2dee9eb4e35977bd1d9b153761bdb2"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQxODg4OA==", "bodyText": "We need a meeting with the DHS team to determine if they want to keep the flowOperator and flowDeveloper roles. If so, they'll need to adapt to inherit these new roles.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3437#discussion_r364418888", "createdAt": "2020-01-08T20:03:58Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/cli/command/VerifyDhfInDhsCommand.java", "diffHunk": "@@ -92,16 +99,17 @@ private void verifyModules() {\n             DocumentMetadataHandle metadata = documentManager.readMetadata(\"/com.marklogic.hub/config.sjs\", new DocumentMetadataHandle());\n             DocumentMetadataHandle.DocumentPermissions perms = metadata.getPermissions();\n \n-            Set<DocumentMetadataHandle.Capability> capabilities = perms.get(\"flowDeveloper\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.READ), \"Flow developer should be able to read modules\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.INSERT), \"Flow developer should be able to insert modules\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.EXECUTE), \"Flow developer should be able to execute modules\");\n+            Set<DocumentMetadataHandle.Capability> capabilities = perms.get(\"data-hub-module-reader\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNjUyNg=="}, "originalCommit": {"oid": "8dbc1d8f5b2dee9eb4e35977bd1d9b153761bdb2"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3619, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}