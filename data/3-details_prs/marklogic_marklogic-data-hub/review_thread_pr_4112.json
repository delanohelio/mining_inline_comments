{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NzA3MjU3", "number": 4112, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxOTozOTo1OVrOEG41nA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMjo0Njo0N1rOEHGpFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NjU4MTQwOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub-central/ui/src/components/header/system-info.test.tsx", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxOTo0MDowMFrOGl9n8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxNjo1NDo1OFrOGmbdVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ2MDE0NA==", "bodyText": "This is good. I would probably add systemInfoVisible: true, setSystemInfoVisible: jest.fn() in system-info.data.ts and use that here like so: {...data.environment}", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4112#discussion_r442460144", "createdAt": "2020-06-18T19:40:00Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/header/system-info.test.tsx", "diffHunk": "@@ -0,0 +1,60 @@\n+import React from 'react';\n+import {render, cleanup, } from \"@testing-library/react\";\n+import SystemInfo from './system-info';\n+import {AuthoritiesContext, AuthoritiesService} from \"../../util/authorities\";\n+import {BrowserRouter as Router} from \"react-router-dom\";\n+import data from '../../assets/mock-data/system-info.data';\n+\n+describe('Update data load settings component', () => {\n+\n+    afterEach(() => {\n+        cleanup();\n+    });\n+\n+    test('verify project info display, user with \"Download\" button enabled', async () => {\n+        const authorityService = new AuthoritiesService();\n+        authorityService.setAuthorities(['downloadProjectFiles']);\n+        const { getByText } = render(<Router><AuthoritiesContext.Provider value={authorityService}>\n+            <SystemInfo \n+                serviceName={data.environment.serviceName}\n+                dataHubVersion={data.environment.dataHubVersion}\n+                marklogicVersion={data.environment.marklogicVersion}\n+                systemInfoVisible={true} \n+                setSystemInfoVisible={jest.fn()}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af98d85e9c4973a934b57b7f4426cd56c450350a"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3MDI2NA==", "bodyText": "@bsrikan:\n\nCan we also pls update \"marklogic-data-hub-central/ui/e2e/cypress/support/commands.js\" to include systemInfo\n\nCan you do this? I haven't done anything with the e2e cypress stuff, not sure what you're looking for.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4112#discussion_r442670264", "createdAt": "2020-06-19T07:10:55Z", "author": {"login": "wooldridge"}, "path": "marklogic-data-hub-central/ui/src/components/header/system-info.test.tsx", "diffHunk": "@@ -0,0 +1,60 @@\n+import React from 'react';\n+import {render, cleanup, } from \"@testing-library/react\";\n+import SystemInfo from './system-info';\n+import {AuthoritiesContext, AuthoritiesService} from \"../../util/authorities\";\n+import {BrowserRouter as Router} from \"react-router-dom\";\n+import data from '../../assets/mock-data/system-info.data';\n+\n+describe('Update data load settings component', () => {\n+\n+    afterEach(() => {\n+        cleanup();\n+    });\n+\n+    test('verify project info display, user with \"Download\" button enabled', async () => {\n+        const authorityService = new AuthoritiesService();\n+        authorityService.setAuthorities(['downloadProjectFiles']);\n+        const { getByText } = render(<Router><AuthoritiesContext.Provider value={authorityService}>\n+            <SystemInfo \n+                serviceName={data.environment.serviceName}\n+                dataHubVersion={data.environment.dataHubVersion}\n+                marklogicVersion={data.environment.marklogicVersion}\n+                systemInfoVisible={true} \n+                setSystemInfoVisible={jest.fn()}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ2MDE0NA=="}, "originalCommit": {"oid": "af98d85e9c4973a934b57b7f4426cd56c450350a"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3MTAzOA==", "bodyText": "@bsrikan:\n\nThis is good. I would probably add systemInfoVisible: true, setSystemInfoVisible: jest.fn() in system-info.data.ts and use that here like so: {...data.environment}\n\nWould be nice for brevity, but I don't want to put those additional properties in the environment object since they aren't returned from the environment method in the app.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4112#discussion_r442671038", "createdAt": "2020-06-19T07:12:48Z", "author": {"login": "wooldridge"}, "path": "marklogic-data-hub-central/ui/src/components/header/system-info.test.tsx", "diffHunk": "@@ -0,0 +1,60 @@\n+import React from 'react';\n+import {render, cleanup, } from \"@testing-library/react\";\n+import SystemInfo from './system-info';\n+import {AuthoritiesContext, AuthoritiesService} from \"../../util/authorities\";\n+import {BrowserRouter as Router} from \"react-router-dom\";\n+import data from '../../assets/mock-data/system-info.data';\n+\n+describe('Update data load settings component', () => {\n+\n+    afterEach(() => {\n+        cleanup();\n+    });\n+\n+    test('verify project info display, user with \"Download\" button enabled', async () => {\n+        const authorityService = new AuthoritiesService();\n+        authorityService.setAuthorities(['downloadProjectFiles']);\n+        const { getByText } = render(<Router><AuthoritiesContext.Provider value={authorityService}>\n+            <SystemInfo \n+                serviceName={data.environment.serviceName}\n+                dataHubVersion={data.environment.dataHubVersion}\n+                marklogicVersion={data.environment.marklogicVersion}\n+                systemInfoVisible={true} \n+                setSystemInfoVisible={jest.fn()}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ2MDE0NA=="}, "originalCommit": {"oid": "af98d85e9c4973a934b57b7f4426cd56c450350a"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjk0ODk0OQ==", "bodyText": "Sure @wooldridge makes sense for test data props. I will update the endpoint for the cypress command support with the new endpoint.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4112#discussion_r442948949", "createdAt": "2020-06-19T16:54:58Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/header/system-info.test.tsx", "diffHunk": "@@ -0,0 +1,60 @@\n+import React from 'react';\n+import {render, cleanup, } from \"@testing-library/react\";\n+import SystemInfo from './system-info';\n+import {AuthoritiesContext, AuthoritiesService} from \"../../util/authorities\";\n+import {BrowserRouter as Router} from \"react-router-dom\";\n+import data from '../../assets/mock-data/system-info.data';\n+\n+describe('Update data load settings component', () => {\n+\n+    afterEach(() => {\n+        cleanup();\n+    });\n+\n+    test('verify project info display, user with \"Download\" button enabled', async () => {\n+        const authorityService = new AuthoritiesService();\n+        authorityService.setAuthorities(['downloadProjectFiles']);\n+        const { getByText } = render(<Router><AuthoritiesContext.Provider value={authorityService}>\n+            <SystemInfo \n+                serviceName={data.environment.serviceName}\n+                dataHubVersion={data.environment.dataHubVersion}\n+                marklogicVersion={data.environment.marklogicVersion}\n+                systemInfoVisible={true} \n+                setSystemInfoVisible={jest.fn()}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ2MDE0NA=="}, "originalCommit": {"oid": "af98d85e9c4973a934b57b7f4426cd56c450350a"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1ODgzOTgzOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub-central/ui/src/util/environment.tsx", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMjo0NTo0M1rOGmTiRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMjo0NTo0M1rOGmTiRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgxOTE0Mw==", "bodyText": "One thought I've had for the future is to standardize on (I think) \"system\" instead of using \"environment\" and \"system\" interchangeably, as having those separate terms raises the question of - What does each one mean? \"serviceName\" adds a little more confusion to because it implies there's the concept of a \"service\" that is separate from \"system\". Really, system = environment = service, so in the future, I think we'll simplify the naming here.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4112#discussion_r442819143", "createdAt": "2020-06-19T12:45:43Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-central/ui/src/util/environment.tsx", "diffHunk": "@@ -1,16 +1,15 @@\n import axios from 'axios';\n \n const defaultEnv = {\n-    projectName: '',\n+    serviceName: '',\n     dataHubVersion: '',\n     markLogicVersion: ''\n }\n \n export function setEnvironment()  {\n-    axios.get('/api/environment/project-info')\n+    axios.get('/api/environment/systemInfo')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af98d85e9c4973a934b57b7f4426cd56c450350a"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1ODg0MzA4OnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/VersionInfo.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMjo0Njo0N1rOGmTkYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMjo0Njo0N1rOGmTkYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgxOTY4MQ==", "bodyText": "I expect to rename this to SystemInfo in a future JIRA ticket as well, didn't want to increase the blast radius of this PR though. Also note that \"clusterName\" is appropriate here because this is a DHF class, and it doesn't know specifically about DHS, which is where the concept of \"serviceName\" exists.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4112#discussion_r442819681", "createdAt": "2020-06-19T12:46:47Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/VersionInfo.java", "diffHunk": "@@ -16,18 +16,21 @@\n \n     private String hubVersion;\n     private String markLogicVersion;\n+    private String clusterName;\n \n     public static VersionInfo newVersionInfo(HubClient hubClient) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af98d85e9c4973a934b57b7f4426cd56c450350a"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4078, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}