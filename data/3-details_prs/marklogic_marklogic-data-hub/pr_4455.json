{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxMTU3MTIz", "number": 4455, "title": "DHFPROD-5781: Selected facets display with the entity name when refreshing page.", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-08-20T18:18:25Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455", "merged": true, "mergeCommit": {"oid": "f5ef8f3164e7823e5ca5b6d2498c86c2085ebaae"}, "closed": true, "closedAt": "2020-08-24T16:25:14Z", "author": {"login": "timur-isangulov"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdA0il8gBqjM2NzY1ODg2NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBMdM7gFqTQ3Mjg0NzkxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2edb0fea58ba2ddf3c5dfa817903fb6d0a068e92", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/2edb0fea58ba2ddf3c5dfa817903fb6d0a068e92", "committedDate": "2020-08-20T18:16:39Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}, "afterCommit": {"oid": "bfd396d14d8e62f8df4f4fa36be936bdf7428a54", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/bfd396d14d8e62f8df4f4fa36be936bdf7428a54", "committedDate": "2020-08-20T18:29:49Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bfd396d14d8e62f8df4f4fa36be936bdf7428a54", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/bfd396d14d8e62f8df4f4fa36be936bdf7428a54", "committedDate": "2020-08-20T18:29:49Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}, "afterCommit": {"oid": "98b693a0767299c689d55d15f6c19652e196709b", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/98b693a0767299c689d55d15f6c19652e196709b", "committedDate": "2020-08-20T18:32:45Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98b693a0767299c689d55d15f6c19652e196709b", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/98b693a0767299c689d55d15f6c19652e196709b", "committedDate": "2020-08-20T18:32:45Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}, "afterCommit": {"oid": "0ed5c1d3f52a5557fe5aae557d43d4ecda4bee63", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/0ed5c1d3f52a5557fe5aae557d43d4ecda4bee63", "committedDate": "2020-08-20T18:34:20Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ed5c1d3f52a5557fe5aae557d43d4ecda4bee63", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/0ed5c1d3f52a5557fe5aae557d43d4ecda4bee63", "committedDate": "2020-08-20T18:34:20Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}, "afterCommit": {"oid": "3a9ad43e0db5778e15cbb1fd83bd878fb211154d", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3a9ad43e0db5778e15cbb1fd83bd878fb211154d", "committedDate": "2020-08-20T18:36:31Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxOTA1ODc0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455#pullrequestreview-471905874", "createdAt": "2020-08-20T19:11:19Z", "commit": {"oid": "3a9ad43e0db5778e15cbb1fd83bd878fb211154d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOToxMToxOVrOHEPgoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxOToxNTo1N1rOHEPqfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIxMDQ2NA==", "bodyText": "verify source view of the document test is already testing for browser refresh. Can we pls add couple of steps there to verify this instead.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455#discussion_r474210464", "createdAt": "2020-08-20T19:11:19Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/e2e/cypress/integration/explorer/scenarios.json.tsx", "diffHunk": "@@ -200,6 +200,23 @@ describe('json scenario for snippet on browse documents page', () => {\n     cy.contains('Show the processed data').should('be.visible');\n   });\n \n+  it('verify selected facet name persist after refreshing the page', () => {\n+    browsePage.selectEntity('Person');\n+    browsePage.getSelectedEntity().should('contain', 'Person');\n+    browsePage.getFacetItemCheckbox('fname', 'Alexandra').click();\n+    browsePage.getGreySelectedFacets('Alexandra').should('exist');\n+    browsePage.getFacetApplyButton().click();\n+    browsePage.getFacetItemCheckbox('fname', 'Alexandra').should('be.checked');\n+    browsePage.getFacetSearchSelectionCount('fname').should('contain', '1');\n+    cy.reload();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a9ad43e0db5778e15cbb1fd83bd878fb211154d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIxMjk5MA==", "bodyText": "Can we make use of data-testid when its available. I want to ultimately get rid of all data-cy, since data-testid can work both in e2e and RTL tests.\n\nAnd since this is a button, can you try if .contains(\"text\") work.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455#discussion_r474212990", "createdAt": "2020-08-20T19:15:57Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/e2e/cypress/support/pages/browse.tsx", "diffHunk": "@@ -140,6 +140,10 @@ class BrowsePage {\n     return cy.get('#selected-facets [data-cy=\"clear-' + facet + '\"]');\n   }\n \n+  getAppliedFacetName(facet: string) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a9ad43e0db5778e15cbb1fd83bd878fb211154d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6215fce9250b7ab179cebe991cd923938089fb4e", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/6215fce9250b7ab179cebe991cd923938089fb4e", "committedDate": "2020-08-20T23:04:49Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a9ad43e0db5778e15cbb1fd83bd878fb211154d", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3a9ad43e0db5778e15cbb1fd83bd878fb211154d", "committedDate": "2020-08-20T18:36:31Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}, "afterCommit": {"oid": "6215fce9250b7ab179cebe991cd923938089fb4e", "author": {"user": null}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/6215fce9250b7ab179cebe991cd923938089fb4e", "committedDate": "2020-08-20T23:04:49Z", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNzkzNTA4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455#pullrequestreview-472793508", "createdAt": "2020-08-21T20:14:36Z", "commit": {"oid": "6215fce9250b7ab179cebe991cd923938089fb4e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyODE3ODkx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455#pullrequestreview-472817891", "createdAt": "2020-08-21T21:02:45Z", "commit": {"oid": "6215fce9250b7ab179cebe991cd923938089fb4e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyODQ3OTE2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455#pullrequestreview-472847916", "createdAt": "2020-08-21T22:21:55Z", "commit": {"oid": "6215fce9250b7ab179cebe991cd923938089fb4e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2144, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}