{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5NzMyNDcz", "number": 3428, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQyMzo1NDo0MFrODWHnMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQyMzo1NDo0MFrODWHnMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0NTE5OTg2OnYy", "diffSide": "RIGHT", "path": "web/src/main/java/com/marklogic/hub/web/web/CurrentProjectController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQyMzo1NDo0MFrOFask0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQyMzo1NDo0MFrOFask0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzUzNzYxNw==", "bodyText": "I think for an exception like this - which is often true of warnings - we should just log the exception message, but not the full stacktrace. If we do the stacktrace for several exceptions, the user may thing something has gone horribly wrong when she sees several stacktraces being logged.\nSo for this, and generally for warnings, I recommend doing the following:\nlogger.warn(\"Unable to enable watcher server for directory: \" + dir.toString() + \"; cause: \" + ex.getMessage());", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3428#discussion_r363537617", "createdAt": "2020-01-06T23:54:40Z", "author": {"login": "rjrudin"}, "path": "web/src/main/java/com/marklogic/hub/web/web/CurrentProjectController.java", "diffHunk": "@@ -212,24 +217,33 @@ public String preInstallCheck() {\n         return jsonResponse;\n     }\n \n-    private void startProjectWatcher() throws IOException {\n-        String flowsDir = hubConfig.getFlowsDir().toString();\n-        String stepDefinitionsDir = hubConfig.getStepDefinitionsDir().toString();\n-        String entitiesDir = hubConfig.getHubEntitiesDir().toString();\n-        String mappingsDir = hubConfig.getHubMappingsDir().toString();\n+    private void startProjectWatcher() {\n+        File flowsDir = hubConfig.getFlowsDir().toFile();\n+        File stepDefinitionsDir = hubConfig.getStepDefinitionsDir().toFile();\n+        File entitiesDir = hubConfig.getHubEntitiesDir().toFile();\n+        File mappingsDir = hubConfig.getHubMappingsDir().toFile();\n         if (!watcherService.hasListener(this)) {\n-            watcherService.watch(flowsDir);\n-            watcherService.watch(stepDefinitionsDir);\n-            watcherService.watch(entitiesDir);\n-            watcherService.watch(mappingsDir);\n+            enableWatcherService(flowsDir);\n+            enableWatcherService(stepDefinitionsDir);\n+            enableWatcherService(entitiesDir);\n+            enableWatcherService(mappingsDir);\n             //watch ml-modules/root/custom-modules/ingestion|mapping|mastering dirs\n             for (StepDefinition.StepDefinitionType stepType : StepDefinition.StepDefinitionType.values()) {\n-                watcherService.watch(hubProject.getCustomModulesDir().resolve(stepType.toString().toLowerCase()).toString());\n+                enableWatcherService(hubProject.getCustomModulesDir().resolve(stepType.toString().toLowerCase()).toFile());\n             }\n             watcherService.addListener(this);\n         }\n     }\n \n+    private void enableWatcherService(File dir) {\n+        try{\n+            watcherService.watch(dir.toString());\n+        }\n+        catch (IOException ex){\n+            logger.warn(\"Unable to enable watcher service for \"+ dir.toString(), ex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc7460a16234b90e45ac9b13f4caf3c2a01c1784"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3613, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}