{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2OTE4NjQ0", "number": 4045, "title": "DHFPROD-5052: login e2e tests and refactoring of page object imports", "bodyText": "Description\nLogin e2e tests.\nRefactored how page objects were being imported\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-06-03T02:02:50Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4045", "merged": true, "mergeCommit": {"oid": "bf0ccba13048bc03d10fce3470bd2946c3d073b8"}, "closed": true, "closedAt": "2020-06-05T22:40:32Z", "author": {"login": "bsrikan"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnsKhvgFqTQyMzczNjM4NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoagk5AFqTQyNTY2NTE3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNzM2Mzg0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4045#pullrequestreview-423736384", "createdAt": "2020-06-03T16:36:27Z", "commit": {"oid": "b6d81697d95fdb9f7baf6a1ee7efde1473de8f26"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNzU1OTAy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4045#pullrequestreview-423755902", "createdAt": "2020-06-03T17:00:57Z", "commit": {"oid": "b6d81697d95fdb9f7baf6a1ee7efde1473de8f26"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNzowMDo1OFrOGelM7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNzowMDo1OFrOGelM7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcxOTk4MA==", "bodyText": "This is a half baked test. I will comment it out for now.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4045#discussion_r434719980", "createdAt": "2020-06-03T17:00:58Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/e2e/cypress/integration/authorization.spec.tsx", "diffHunk": "@@ -1,48 +1,172 @@\n /// <reference types=\"cypress\"/>\n \n-import LoginPage from '../support/pages/login';\n+import loginPage from '../support/pages/login';\n import { Application } from '../support/application.config';\n+import { toolbar, tiles, projectInfo } from '../support/components/common/index';\n \n-const loginPage = new LoginPage();\n \n describe('login', () => {\n   before(() => {\n     cy.visit('/');\n   });\n \n-  it('greets with Data Hub Central', () => {\n-    cy.contains(Application.title);\n+  after(() => {\n+    //resetting the test user back to only have 'hub-central-user' role\n+    cy.resetTestUser();\n   });\n \n-  it('has links to privacy statement/policies', () => {\n+  it('greets with Data Hub Central title and footer links', () => {\n+      cy.contains(Application.title);\n+\n       cy.contains('Policies');\n+      cy.contains('Terms and Conditions');\n   });\n \n-  it('has link to terms and conditions ', () => {\n-    cy.contains('Terms and Conditions');\n+  it('should verify all the error conditions for login', () => {\n+      //Verify username/password is required and login button is disabled\n+      loginPage.getUsername().type('{enter}').blur();\n+      loginPage.getPassword().type('{enter}').blur();\n+      cy.contains('Username is required');\n+      cy.contains('Password is required');\n+      loginPage.getLoginButton().should('be.disabled');\n+\n+      //Verify invalid credentials error message\n+      loginPage.getUsername().type('test');\n+      loginPage.getPassword().type('password');\n+      loginPage.getLoginButton().click();\n+      cy.contains('The username and password combination is not recognized by MarkLogic.');\n+\n+      //Verify admin cannot login\n+      loginPage.getUsername().clear();\n+      loginPage.getPassword().clear();\n+      loginPage.getUsername().type('admin');\n+      loginPage.getPassword().type('admin');\n+      loginPage.getLoginButton().click();\n+      cy.contains('User does not have the required permissions to run Data Hub.');\n+\n   });\n \n-  xit('has forgot password link', () => {\n-    loginPage.getforgotPasswordLink()\n-      .should('have.attr', 'href'); \n+  it('should verify auto logout after inactivity', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6d81697d95fdb9f7baf6a1ee7efde1473de8f26"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNzU2NTE2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4045#pullrequestreview-423756516", "createdAt": "2020-06-03T17:01:47Z", "commit": {"oid": "b6d81697d95fdb9f7baf6a1ee7efde1473de8f26"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNzowMTo0N1rOGelOqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNzowMTo0N1rOGelOqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcyMDQyNA==", "bodyText": "Realizing now that this test might not run in DHS. Will push a change.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4045#discussion_r434720424", "createdAt": "2020-06-03T17:01:47Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/e2e/cypress/integration/authorization.spec.tsx", "diffHunk": "@@ -1,48 +1,172 @@\n /// <reference types=\"cypress\"/>\n \n-import LoginPage from '../support/pages/login';\n+import loginPage from '../support/pages/login';\n import { Application } from '../support/application.config';\n+import { toolbar, tiles, projectInfo } from '../support/components/common/index';\n \n-const loginPage = new LoginPage();\n \n describe('login', () => {\n   before(() => {\n     cy.visit('/');\n   });\n \n-  it('greets with Data Hub Central', () => {\n-    cy.contains(Application.title);\n+  after(() => {\n+    //resetting the test user back to only have 'hub-central-user' role\n+    cy.resetTestUser();\n   });\n \n-  it('has links to privacy statement/policies', () => {\n+  it('greets with Data Hub Central title and footer links', () => {\n+      cy.contains(Application.title);\n+\n       cy.contains('Policies');\n+      cy.contains('Terms and Conditions');\n   });\n \n-  it('has link to terms and conditions ', () => {\n-    cy.contains('Terms and Conditions');\n+  it('should verify all the error conditions for login', () => {\n+      //Verify username/password is required and login button is disabled\n+      loginPage.getUsername().type('{enter}').blur();\n+      loginPage.getPassword().type('{enter}').blur();\n+      cy.contains('Username is required');\n+      cy.contains('Password is required');\n+      loginPage.getLoginButton().should('be.disabled');\n+\n+      //Verify invalid credentials error message\n+      loginPage.getUsername().type('test');\n+      loginPage.getPassword().type('password');\n+      loginPage.getLoginButton().click();\n+      cy.contains('The username and password combination is not recognized by MarkLogic.');\n+\n+      //Verify admin cannot login\n+      loginPage.getUsername().clear();\n+      loginPage.getPassword().clear();\n+      loginPage.getUsername().type('admin');\n+      loginPage.getPassword().type('admin');\n+      loginPage.getLoginButton().click();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6d81697d95fdb9f7baf6a1ee7efde1473de8f26"}, "originalPosition": 51}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b6d81697d95fdb9f7baf6a1ee7efde1473de8f26", "author": {"user": {"login": "bsrikan", "name": "Srikanth Balasubramanian"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b6d81697d95fdb9f7baf6a1ee7efde1473de8f26", "committedDate": "2020-06-03T02:00:57Z", "message": "DHFPROD-5052: login e2e tests and refactoring of page object imports"}, "afterCommit": {"oid": "3dde2c9b99624589a6de06f39cd0742a75f8ac7e", "author": {"user": {"login": "bsrikan", "name": "Srikanth Balasubramanian"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3dde2c9b99624589a6de06f39cd0742a75f8ac7e", "committedDate": "2020-06-03T17:49:25Z", "message": "DHFPROD-5052: login e2e tests and refactoring of page object imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzOTEzMDU3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4045#pullrequestreview-423913057", "createdAt": "2020-06-03T20:40:58Z", "commit": {"oid": "3dde2c9b99624589a6de06f39cd0742a75f8ac7e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdd9e8999e48065231b87e7f15b80def7f95f7ec", "author": {"user": {"login": "bsrikan", "name": "Srikanth Balasubramanian"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/fdd9e8999e48065231b87e7f15b80def7f95f7ec", "committedDate": "2020-06-05T19:37:20Z", "message": "DHFPROD-5052: login e2e tests and refactoring of page object imports"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3dde2c9b99624589a6de06f39cd0742a75f8ac7e", "author": {"user": {"login": "bsrikan", "name": "Srikanth Balasubramanian"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3dde2c9b99624589a6de06f39cd0742a75f8ac7e", "committedDate": "2020-06-03T17:49:25Z", "message": "DHFPROD-5052: login e2e tests and refactoring of page object imports"}, "afterCommit": {"oid": "fdd9e8999e48065231b87e7f15b80def7f95f7ec", "author": {"user": {"login": "bsrikan", "name": "Srikanth Balasubramanian"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/fdd9e8999e48065231b87e7f15b80def7f95f7ec", "committedDate": "2020-06-05T19:37:20Z", "message": "DHFPROD-5052: login e2e tests and refactoring of page object imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NjYzOTc1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4045#pullrequestreview-425663975", "createdAt": "2020-06-05T22:32:35Z", "commit": {"oid": "fdd9e8999e48065231b87e7f15b80def7f95f7ec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NjY1MTcz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4045#pullrequestreview-425665173", "createdAt": "2020-06-05T22:36:10Z", "commit": {"oid": "fdd9e8999e48065231b87e7f15b80def7f95f7ec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2704, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}