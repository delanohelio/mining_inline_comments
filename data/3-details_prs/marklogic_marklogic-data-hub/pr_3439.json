{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwNjM3MjQ1", "number": 3439, "title": "DHFPROD-3935: Fixing ValidateMappingTest", "bodyText": "It started failing because it was accessing adminHubConfig before ensuring it was initialized to use flow-developer as a user.\nPerhaps HubTestBase should be doing this before every test?? Otherwise there's the chance that one test modified adminHubConfig, and that bleeds over into the next test, causing an error.\nI also modified setupProjectForRunningTestFlow, as it was ignoring the HubConfig object being passed into it.", "createdAt": "2020-01-08T20:20:09Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3439", "merged": true, "mergeCommit": {"oid": "7cbf862cddc97beefe5ef5b5ae303a2f377b643b"}, "closed": true, "closedAt": "2020-01-08T23:54:58Z", "author": {"login": "rjrudin"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4bPogAH2gAyMzYwNjM3MjQ1OjI3NDZhNWM3M2Q0ZTk1M2I4ZjhkNDY2Yzk1MDY3MjM2OGUyOTZmYTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4ch5JgFqTM0MDE2NzA4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2746a5c73d4e953b8f8d466c950672368e296fa9", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/2746a5c73d4e953b8f8d466c950672368e296fa9", "committedDate": "2020-01-08T20:19:12Z", "message": "DHFPROD-3935: Fixing ValidateMappingTest\n\nIt started failing because it was accessing adminHubConfig before ensuring it was initialized to use flow-developer as a user.\n\nPerhaps HubTestBase should be doing this before every test?? Otherwise there's the chance that one test modified adminHubConfig, and that bleeds over into the next test, causing an error."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMTI5NDA5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3439#pullrequestreview-340129409", "createdAt": "2020-01-08T20:37:04Z", "commit": {"oid": "2746a5c73d4e953b8f8d466c950672368e296fa9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQyMDozNzowNFrOFbjJWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQyMDozNzowNFrOFbjJWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQzMTcwNQ==", "bodyText": "I wanted to ensure that \"data-hub-developer\" role can deploy artifacts and modules but missed to use this config in HubTestBase.setupProjectForRunningTestFlow().I think the method setupProjectForRunningTestFlow() can be changed to use that config so that we can test \"data-hub-developer\" role can deploy artifacts and modules\nJust an FYI, I added \"any-uri\" privilege to \"data-hub-developer\" so that it can deploy mappings and entities which are protected by uri privileges", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3439#discussion_r364431705", "createdAt": "2020-01-08T20:37:04Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub/src/test/java/com/marklogic/hub/flow/FlowRunWithDataHubOperatorTest.java", "diffHunk": "@@ -105,7 +105,7 @@ public void setupEach() throws Exception {\n         //Copy mapping functions\n         FileUtils.copyFileToDirectory(getResourceFile(\"flow-runner-test/mapping-functions/add-function.xqy\"),\n             adminHubConfig.getHubProject().getCustomMappingFunctionsDir().toFile());\n-        setupProjectForRunningTestFlow(getHubFlowRunnerConfig(\"test-data-hub-developer\", \"test-data-hub-developer\"));\n+        setupProjectForRunningTestFlow();\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2746a5c73d4e953b8f8d466c950672368e296fa9"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMTY1NjA1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3439#pullrequestreview-340165605", "createdAt": "2020-01-08T21:46:11Z", "commit": {"oid": "2746a5c73d4e953b8f8d466c950672368e296fa9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMTY3MDgw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3439#pullrequestreview-340167080", "createdAt": "2020-01-08T21:49:03Z", "commit": {"oid": "2746a5c73d4e953b8f8d466c950672368e296fa9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2325, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}