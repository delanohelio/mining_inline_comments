{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NjEwNzY3", "number": 3495, "title": "DHFPROD-3990:Display project information in UI", "bodyText": "DHFPROD-3990:Display project information in UI", "createdAt": "2020-01-23T23:09:17Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495", "merged": true, "mergeCommit": {"oid": "fd33d55c2350f091806207214187169b3cf5aa66"}, "closed": true, "closedAt": "2020-01-27T22:41:12Z", "author": {"login": "srinathgit"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9THJrgBqjI5NzU2NjUyNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-jtICAFqTM0ODk5MDY0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee235ab752b740f516648d85cda54f39b31e1e08", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/ee235ab752b740f516648d85cda54f39b31e1e08", "committedDate": "2020-01-23T23:09:12Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/46dd34a573b0f3ead2b6eaa571edad9e86875cf8", "committedDate": "2020-01-23T23:40:29Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NzA1NDc4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-347705478", "createdAt": "2020-01-24T01:06:27Z", "commit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowNjoyN1rOFhRdxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowOToyM1rOFhRgZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQzMzQ3Nw==", "bodyText": "This logic is repeated above. Seems like HubProject should have a \"getProjectName()\" method, assuming that project name should always equal the name of the directory?\nAlso, since getProjectDir returns a Path, it seems better to call toFile().getName() instead of messing around with Strings.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370433477", "createdAt": "2020-01-24T01:06:27Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "diffHunk": "@@ -122,4 +127,18 @@ public JsonNode reset() {\n         obj.put(\"reset\", true);\n         return obj;\n     }\n+\n+    @RequestMapping(value = \"/project-info\", method = RequestMethod.GET)\n+    @ResponseBody\n+    public JsonNode getProjectInfo(HttpSession session) {\n+        ObjectMapper objectMapper = new ObjectMapper();\n+        ObjectNode resp = objectMapper.createObjectNode();\n+        resp.put(\"dhfVersion\", versions.getHubVersion());\n+        String projDir = hubConfig.getHubProject().getProjectDir().toString();\n+        projDir = projDir.substring(projDir.lastIndexOf(File.separator)+1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQzNDE1MQ==", "bodyText": "This is really \"project name\", right? Not the project directory?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370434151", "createdAt": "2020-01-24T01:09:23Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/MarkLogicAuthenticationManager.java", "diffHunk": "@@ -113,8 +114,12 @@ public Authentication authenticate(Authentication authentication) throws Authent\n             stagingServerAccessible = dataServicesClient.checkConnection().isConnected();\n         } catch (Exception e) {\n         }\n+\n+        String projDir = environmentService.getProjectDirectory();\n+        projDir = projDir.substring(projDir.lastIndexOf(File.separator) + 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/46dd34a573b0f3ead2b6eaa571edad9e86875cf8", "committedDate": "2020-01-23T23:40:29Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "a6ca76f4561180a91789a967285a9f7b8da2d685", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/a6ca76f4561180a91789a967285a9f7b8da2d685", "committedDate": "2020-01-24T05:07:41Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NjkzNDA4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-347693408", "createdAt": "2020-01-24T00:22:57Z", "commit": {"oid": "ee235ab752b740f516648d85cda54f39b31e1e08"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowMzoxM1rOFhRaaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMTowNDowNFrOFhRbKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQzMjYxNg==", "bodyText": "Do we need to add projDir as a security-related property?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370432616", "createdAt": "2020-01-24T01:03:13Z", "author": {"login": "hao1st"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/ConnectionAuthenticationToken.java", "diffHunk": "@@ -42,6 +42,7 @@\n     private final Object principal;\n     private boolean hasManagePrivileges = false;\n     private boolean stagingIsAccessible = false;\n+    private String projDir;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQzMjgwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    resp.put(\"projDir\", authenticationToken.getProjDir());\n          \n          \n            \n                    resp.put(\"projDir\", environmentService.getProjectDirectory());", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370432808", "createdAt": "2020-01-24T01:04:04Z", "author": {"login": "hao1st"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/LoginLogoutHandler.java", "diffHunk": "@@ -31,10 +33,15 @@\n     @Override\n     public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException {\n         ConnectionAuthenticationToken authenticationToken = (ConnectionAuthenticationToken)authentication;\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode resp = mapper.createObjectNode();\n+        resp.put(\"isInstalled\", authenticationToken.stagingIsAccessible());\n+        resp.put(\"hasManagePrivileges\", authenticationToken.hasManagePrivileges());\n+        resp.put(\"projDir\", authenticationToken.getProjDir());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46dd34a573b0f3ead2b6eaa571edad9e86875cf8"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6ca76f4561180a91789a967285a9f7b8da2d685", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/a6ca76f4561180a91789a967285a9f7b8da2d685", "committedDate": "2020-01-24T05:07:41Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "0558a11c2b8b1d6683661b57474f1f7b9183fc72", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/0558a11c2b8b1d6683661b57474f1f7b9183fc72", "committedDate": "2020-01-24T06:49:17Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3OTg2Mzc0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-347986374", "createdAt": "2020-01-24T14:25:45Z", "commit": {"oid": "0558a11c2b8b1d6683661b57474f1f7b9183fc72"}, "state": "DISMISSED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNDoyNTo0NVrOFhfQ0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNDoyNzo0N1rOFhfU3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDY1OTUzNw==", "bodyText": "I commented on the JIRA ticket that I think we should get rid of this from the mockup. We don't have a concept of a \"Project Name\", and we shouldn't invent one during development. I think the requirement needs to be removed from the story.\nI can see an argument for the project directory, though I don't think that really needs to be there either.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370659537", "createdAt": "2020-01-24T14:25:45Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubProjectImpl.java", "diffHunk": "@@ -646,6 +646,11 @@ public void exportProject(File location) {\n         }\n     }\n \n+    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0558a11c2b8b1d6683661b57474f1f7b9183fc72"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDY1OTc2MQ==", "bodyText": "If we keep this, should call this \"projectName\", not \"projDir\"", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370659761", "createdAt": "2020-01-24T14:26:09Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/auth/LoginLogoutHandler.java", "diffHunk": "@@ -28,13 +32,21 @@\n \n public class LoginLogoutHandler implements AuthenticationSuccessHandler, LogoutSuccessHandler {\n \n+    @Autowired\n+    HubConfigSession hubConfig;\n+\n     @Override\n     public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException {\n         ConnectionAuthenticationToken authenticationToken = (ConnectionAuthenticationToken)authentication;\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode resp = mapper.createObjectNode();\n+        resp.put(\"isInstalled\", authenticationToken.stagingIsAccessible());\n+        resp.put(\"hasManagePrivileges\", authenticationToken.hasManagePrivileges());\n+        resp.put(\"projDir\", hubConfig.getHubProject().getProjectName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0558a11c2b8b1d6683661b57474f1f7b9183fc72"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDY2MDU3NQ==", "bodyText": "Let's spell these out, there's no benefit in shortening them - so \"projectName\" and \"projectPath\" (I think \"path\" is better than \"dir\" here, particularly because the output of getProjectDir is a Path (which means that method should really be called getProjectPath, but oh well)).", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r370660575", "createdAt": "2020-01-24T14:27:47Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "diffHunk": "@@ -122,4 +126,16 @@ public JsonNode reset() {\n         obj.put(\"reset\", true);\n         return obj;\n     }\n+\n+    @RequestMapping(value = \"/project-info\", method = RequestMethod.GET)\n+    @ResponseBody\n+    public JsonNode getProjectInfo(HttpSession session) {\n+        ObjectMapper objectMapper = new ObjectMapper();\n+        ObjectNode resp = objectMapper.createObjectNode();\n+        resp.put(\"dhfVersion\", versions.getHubVersion());\n+        resp.put(\"projName\", hubConfig.getHubProject().getProjectName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0558a11c2b8b1d6683661b57474f1f7b9183fc72"}, "originalPosition": 29}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0558a11c2b8b1d6683661b57474f1f7b9183fc72", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/0558a11c2b8b1d6683661b57474f1f7b9183fc72", "committedDate": "2020-01-24T06:49:17Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "d27f5cbb7589a76554bd7ea4f08b988778a34034", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/d27f5cbb7589a76554bd7ea4f08b988778a34034", "committedDate": "2020-01-24T19:40:30Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d27f5cbb7589a76554bd7ea4f08b988778a34034", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/d27f5cbb7589a76554bd7ea4f08b988778a34034", "committedDate": "2020-01-24T19:40:30Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "a1662a87f426c0f75734cf629f95861538114752", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/a1662a87f426c0f75734cf629f95861538114752", "committedDate": "2020-01-24T19:42:15Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a1662a87f426c0f75734cf629f95861538114752", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/a1662a87f426c0f75734cf629f95861538114752", "committedDate": "2020-01-24T19:42:15Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "9fca0877243ffb8d99b1d8da753e982ff34782c4", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/9fca0877243ffb8d99b1d8da753e982ff34782c4", "committedDate": "2020-01-24T21:05:23Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjM2MzU1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-348236355", "createdAt": "2020-01-24T21:31:33Z", "commit": {"oid": "9fca0877243ffb8d99b1d8da753e982ff34782c4"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9fca0877243ffb8d99b1d8da753e982ff34782c4", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/9fca0877243ffb8d99b1d8da753e982ff34782c4", "committedDate": "2020-01-24T21:05:23Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "eb2466f33713356a89c7d085047be6fe9a004fc5", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/eb2466f33713356a89c7d085047be6fe9a004fc5", "committedDate": "2020-01-24T22:58:45Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4Mjc1NjA5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-348275609", "createdAt": "2020-01-24T23:16:10Z", "commit": {"oid": "eb2466f33713356a89c7d085047be6fe9a004fc5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4Mjc4MTI3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-348278127", "createdAt": "2020-01-24T23:26:10Z", "commit": {"oid": "eb2466f33713356a89c7d085047be6fe9a004fc5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4Mjg0MTY4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-348284168", "createdAt": "2020-01-24T23:51:31Z", "commit": {"oid": "eb2466f33713356a89c7d085047be6fe9a004fc5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb2466f33713356a89c7d085047be6fe9a004fc5", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/eb2466f33713356a89c7d085047be6fe9a004fc5", "committedDate": "2020-01-24T22:58:45Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "45d9a5e85beed5a874bc68585e928a45eed2ea35", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/45d9a5e85beed5a874bc68585e928a45eed2ea35", "committedDate": "2020-01-26T21:26:02Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NDIyNTA3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-348422507", "createdAt": "2020-01-27T02:10:00Z", "commit": {"oid": "45d9a5e85beed5a874bc68585e928a45eed2ea35"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "45d9a5e85beed5a874bc68585e928a45eed2ea35", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/45d9a5e85beed5a874bc68585e928a45eed2ea35", "committedDate": "2020-01-26T21:26:02Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "347363ce930447a5010288e9b6b2caa399fe0220", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/347363ce930447a5010288e9b6b2caa399fe0220", "committedDate": "2020-01-27T04:41:08Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NjY5MjA2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-348669206", "createdAt": "2020-01-27T13:43:24Z", "commit": {"oid": "347363ce930447a5010288e9b6b2caa399fe0220"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMzo0MzoyNFrOFiDCLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMzo0MzoyNFrOFiDCLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTI0NTYxMw==", "bodyText": "What about tests for this? We'd at least want a smoke test to verify that there's not an e.g. obvious null-pointer exception.\nAlso, I think @hao1st  mentioned this too - based on the current design of oneui, couldn't HubProject be part of EnvironmentService? That would start removing one concern from HubConfig, which is overloaded with concerns right now. I think this would be a good move, as the HubProject is a global object that is part of the environment - it's not specific to a user.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r371245613", "createdAt": "2020-01-27T13:43:24Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/controllers/EnvironmentController.java", "diffHunk": "@@ -122,4 +126,16 @@ public JsonNode reset() {\n         obj.put(\"reset\", true);\n         return obj;\n     }\n+\n+    @RequestMapping(value = \"/project-info\", method = RequestMethod.GET)\n+    @ResponseBody\n+    public JsonNode getProjectInfo(HttpSession session) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "347363ce930447a5010288e9b6b2caa399fe0220"}, "originalPosition": 25}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "347363ce930447a5010288e9b6b2caa399fe0220", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/347363ce930447a5010288e9b6b2caa399fe0220", "committedDate": "2020-01-27T04:41:08Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "7cc5643ccc833f7e6344a8c92041054cf9061997", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/7cc5643ccc833f7e6344a8c92041054cf9061997", "committedDate": "2020-01-27T18:58:25Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0fece52a39616ffccbd94005a4da5a2934716c5", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/e0fece52a39616ffccbd94005a4da5a2934716c5", "committedDate": "2020-01-27T20:07:14Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7cc5643ccc833f7e6344a8c92041054cf9061997", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/7cc5643ccc833f7e6344a8c92041054cf9061997", "committedDate": "2020-01-27T18:58:25Z", "message": "DHFPROD-3990:Display project information in UI"}, "afterCommit": {"oid": "e0fece52a39616ffccbd94005a4da5a2934716c5", "author": {"user": {"login": "srinathgit", "name": "Srinath S"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/e0fece52a39616ffccbd94005a4da5a2934716c5", "committedDate": "2020-01-27T20:07:14Z", "message": "DHFPROD-3990:Display project information in UI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTYxOTIx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-348961921", "createdAt": "2020-01-27T20:44:38Z", "commit": {"oid": "e0fece52a39616ffccbd94005a4da5a2934716c5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDo0NDozOVrOFiQ4Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDo0NDozOVrOFiQ4Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ3MjM5NA==", "bodyText": "Couldn't you depend on HubProject instead, since that's not specific to a user?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#discussion_r371472394", "createdAt": "2020-01-27T20:44:39Z", "author": {"login": "rjrudin"}, "path": "one-ui/src/main/java/com/marklogic/hub/oneui/services/EnvironmentService.java", "diffHunk": "@@ -15,21 +15,29 @@\n  */\n package com.marklogic.hub.oneui.services;\n \n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import com.marklogic.hub.impl.Versions;\n import com.marklogic.hub.oneui.models.EnvironmentInfo;\n+import com.marklogic.hub.oneui.models.HubConfigSession;\n+import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Service;\n \n-import java.io.ByteArrayInputStream;\n-import java.io.ByteArrayOutputStream;\n-import java.io.IOException;\n-import java.io.ObjectInputStream;\n-import java.io.ObjectOutputStream;\n+import java.io.*;\n import java.nio.file.Path;\n import java.nio.file.Paths;\n import java.util.prefs.Preferences;\n \n @Service\n public class EnvironmentService {\n \n+    @Autowired\n+    private HubConfigSession hubConfig;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0fece52a39616ffccbd94005a4da5a2934716c5"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTYzMzQ3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-348963347", "createdAt": "2020-01-27T20:47:10Z", "commit": {"oid": "e0fece52a39616ffccbd94005a4da5a2934716c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTkwNjQz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3495#pullrequestreview-348990643", "createdAt": "2020-01-27T21:34:12Z", "commit": {"oid": "e0fece52a39616ffccbd94005a4da5a2934716c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2370, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}