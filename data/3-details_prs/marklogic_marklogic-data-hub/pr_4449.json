{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNTE2MzEw", "number": 4449, "title": "DHFPROD-5428: Reset URI nav in source mapping", "bodyText": "Reset URI index to 0 for source doc navigation when the mapping modal is closed. Next mapping modal opened will start at the first doc.\nAlso remove unused onOk() code for modal.\nScreencast: https://drive.google.com/file/d/10KCpDVYJxj4Eso9PdbRnVYr-ud_hKflu/view\nDescription\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-08-19T23:41:05Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4449", "merged": true, "mergeCommit": {"oid": "e871ebcb94c07caa05fea7ddab18a1558f757c60"}, "closed": true, "closedAt": "2020-08-21T19:38:00Z", "author": {"login": "wooldridge"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdA1VV_gFqTQ3MTkxNTM4NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBJNSSgFqTQ3MjcwNTQ5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxOTE1Mzg0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4449#pullrequestreview-471915384", "createdAt": "2020-08-20T19:25:31Z", "commit": {"oid": "06e8c433a310a47580525943411562cea6715408"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDE4OTE2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4449#pullrequestreview-472018916", "createdAt": "2020-08-20T22:07:58Z", "commit": {"oid": "06e8c433a310a47580525943411562cea6715408"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQyMjowNzo1OFrOHEU7_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQyMjowNzo1OFrOHEU7_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI5OTM4OA==", "bodyText": "This is a good test. Couple of nitpicky items:\n\nDo we need a separate test suite? We tried to test URI navigation and verify source table data, didnt work out at the time. If we are able to assert doc content on navigation, then we can keep this in a separate suite and add more tests later to assert source data.\nuriStart, uriNext, uriReset are really aliases to the same locator?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4449#discussion_r474299388", "createdAt": "2020-08-20T22:07:58Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/entities/mapping/source-entity-map/source-to-entity-map.test.tsx", "diffHunk": "@@ -1084,3 +1084,29 @@ describe('RTL Source Selector/Source Search tests', () => {\n     });\n });\n \n+describe('Source URI navigation', () => {\n+\n+    afterEach(cleanup);\n+\n+    test('Index resets on close of mapping',  async() => {\n+        const { getByLabelText, getByTestId } = render(<SourceToEntityMap {...data.mapProps}  mappingVisible={true}/>);\n+\n+        // URI index starts at 1\n+        let uriStart = within(getByLabelText('uriIndex'));\n+        expect(uriStart.getByText('1')).toBeInTheDocument();\n+\n+        // Click next, URI index is 2\n+        fireEvent.click(getByTestId('navigate-uris-right'));\n+        let uriNext = within(getByLabelText('uriIndex'));\n+        expect(uriNext.getByText('2')).toBeInTheDocument();\n+\n+        // Close mapping modal\n+        fireEvent.click(getByLabelText('icon: close'));\n+\n+        // URI index reset to 1\n+        let uriReset = within(getByLabelText('uriIndex'));\n+        expect(uriReset.getByText('1')).toBeInTheDocument();\n+    });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06e8c433a310a47580525943411562cea6715408"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "06e8c433a310a47580525943411562cea6715408", "author": {"user": {"login": "wooldridge", "name": "Mike Wooldridge"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/06e8c433a310a47580525943411562cea6715408", "committedDate": "2020-08-19T23:36:23Z", "message": "DHFPROD-5428: Reset URI nav in source mapping\n\nReset URI index to 0 for source doc navigation when the mapping modal is closed. Next mapping modal opened will start at the first doc.\n\nAlso remove unused onOk() code for modal."}, "afterCommit": {"oid": "6a39294b8301b7d1ff20831b4a66c83b92fc8a73", "author": {"user": {"login": "wooldridge", "name": "Mike Wooldridge"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/6a39294b8301b7d1ff20831b4a66c83b92fc8a73", "committedDate": "2020-08-21T18:03:18Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ced25b498a8701f3da3f789fc977d97e714c41d", "author": {"user": {"login": "wooldridge", "name": "Mike Wooldridge"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/0ced25b498a8701f3da3f789fc977d97e714c41d", "committedDate": "2020-08-21T18:27:05Z", "message": "DHFPROD-5428: Reset URI nav in source mapping\n\nReset URI index to 0 for source doc navigation when the mapping modal is closed. Next mapping modal opened will start at the first doc.\n\nAlso remove unused onOk() code for modal."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a39294b8301b7d1ff20831b4a66c83b92fc8a73", "author": {"user": {"login": "wooldridge", "name": "Mike Wooldridge"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/6a39294b8301b7d1ff20831b4a66c83b92fc8a73", "committedDate": "2020-08-21T18:03:18Z", "message": "WIP"}, "afterCommit": {"oid": "0ced25b498a8701f3da3f789fc977d97e714c41d", "author": {"user": {"login": "wooldridge", "name": "Mike Wooldridge"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/0ced25b498a8701f3da3f789fc977d97e714c41d", "committedDate": "2020-08-21T18:27:05Z", "message": "DHFPROD-5428: Reset URI nav in source mapping\n\nReset URI index to 0 for source doc navigation when the mapping modal is closed. Next mapping modal opened will start at the first doc.\n\nAlso remove unused onOk() code for modal."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNzAzMjQy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4449#pullrequestreview-472703242", "createdAt": "2020-08-21T18:30:51Z", "commit": {"oid": "0ced25b498a8701f3da3f789fc977d97e714c41d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNzA1NDk0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4449#pullrequestreview-472705494", "createdAt": "2020-08-21T18:34:49Z", "commit": {"oid": "0ced25b498a8701f3da3f789fc977d97e714c41d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2134, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}