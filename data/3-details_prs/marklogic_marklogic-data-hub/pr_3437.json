{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwNjAzMjI5", "number": 3437, "title": "DHFPROD-4073: dhsVerify now correctly verifies roles", "bodyText": "I also realized that we still don't want flow-developer-role, flow-operator-role, or data-hub-admin-role deployed to DHS, as those grant too many privileges and thus shouldn't be present.", "createdAt": "2020-01-08T18:50:08Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3437", "merged": true, "mergeCommit": {"oid": "647d825f2b543cf010e2cffe820a0f168696576a"}, "closed": true, "closedAt": "2020-01-09T00:43:52Z", "author": {"login": "rjrudin"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4Z3BmgH2gAyMzYwNjAzMjI5OjhkYmMxZDhmNWIyZGVlOWViNGUzNTk3N2JkMWQ5YjE1Mzc2MWJkYjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4fBi7AFqTM0MDIzMzQ2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8dbc1d8f5b2dee9eb4e35977bd1d9b153761bdb2", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/8dbc1d8f5b2dee9eb4e35977bd1d9b153761bdb2", "committedDate": "2020-01-08T18:42:25Z", "message": "DHFPROD-4073: dhsVerify now correctly verifies roles\n\nI also realized that we still don't want flow-developer-role, flow-operator-role, or data-hub-admin-role deployed to DHS, as those grant too many privileges and thus shouldn't be present."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMDkwNjg4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3437#pullrequestreview-340090688", "createdAt": "2020-01-08T19:25:54Z", "commit": {"oid": "8dbc1d8f5b2dee9eb4e35977bd1d9b153761bdb2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMDk1Nzk0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3437#pullrequestreview-340095794", "createdAt": "2020-01-08T19:34:55Z", "commit": {"oid": "8dbc1d8f5b2dee9eb4e35977bd1d9b153761bdb2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOTozNDo1NlrOFbhm_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxOTozNDo1NlrOFbhm_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNjUyNg==", "bodyText": "@rjrudin can you please explain the change here and for flowOperator?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3437#discussion_r364406526", "createdAt": "2020-01-08T19:34:56Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/cli/command/VerifyDhfInDhsCommand.java", "diffHunk": "@@ -92,16 +99,17 @@ private void verifyModules() {\n             DocumentMetadataHandle metadata = documentManager.readMetadata(\"/com.marklogic.hub/config.sjs\", new DocumentMetadataHandle());\n             DocumentMetadataHandle.DocumentPermissions perms = metadata.getPermissions();\n \n-            Set<DocumentMetadataHandle.Capability> capabilities = perms.get(\"flowDeveloper\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.READ), \"Flow developer should be able to read modules\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.INSERT), \"Flow developer should be able to insert modules\");\n-            verify(capabilities.contains(DocumentMetadataHandle.Capability.EXECUTE), \"Flow developer should be able to execute modules\");\n+            Set<DocumentMetadataHandle.Capability> capabilities = perms.get(\"data-hub-module-reader\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8dbc1d8f5b2dee9eb4e35977bd1d9b153761bdb2"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMjMzNDYx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3437#pullrequestreview-340233461", "createdAt": "2020-01-09T00:43:26Z", "commit": {"oid": "8dbc1d8f5b2dee9eb4e35977bd1d9b153761bdb2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2321, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}