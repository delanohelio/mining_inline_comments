{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3MDAwMDM5", "number": 4740, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxOTowMToyNVrOEv70bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowNjowN1rOEwRS9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4Njk4NjA3OnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub-spark-connector/src/test/java/com/marklogic/hub/spark/sql/sources/v2/Options.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxOTowMToyNVrOHlM1hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNzoxNToxMlrOHldbaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODc2OTY3MA==", "bodyText": "Don't we still need ingestEndpointState? Or is that not relevant at all to input-only endpoints?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#discussion_r508769670", "createdAt": "2020-10-20T19:01:25Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-spark-connector/src/test/java/com/marklogic/hub/spark/sql/sources/v2/Options.java", "diffHunk": "@@ -21,8 +21,7 @@\n     private String permissions;\n     private String sourceName;\n     private String sourceType;\n-    private JsonNode ingestWorkUnit;\n-    private JsonNode ingestEndpointState;\n+    private JsonNode ingestEndpointConstants;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c676f2518148ccf99243f3653e2d239b62f36820"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA0MTUxMw==", "bodyText": "Done.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#discussion_r509041513", "createdAt": "2020-10-21T07:15:12Z", "author": {"login": "anu3990"}, "path": "marklogic-data-hub-spark-connector/src/test/java/com/marklogic/hub/spark/sql/sources/v2/Options.java", "diffHunk": "@@ -21,8 +21,7 @@\n     private String permissions;\n     private String sourceName;\n     private String sourceType;\n-    private JsonNode ingestWorkUnit;\n-    private JsonNode ingestEndpointState;\n+    private JsonNode ingestEndpointConstants;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODc2OTY3MA=="}, "originalCommit": {"oid": "c676f2518148ccf99243f3653e2d239b62f36820"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MDUwMjE0OnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub-spark-connector/src/test/resources/custom-ingestion-endpoint/endpoint.api", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowNTozNFrOHluOyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowNTozNFrOHluOyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMxNjgwOA==", "bodyText": "This custom endpoint should still have endpointState in it; that's a critical part of verifying that if Ernie uses a custom endpoint, he can define both endpointState and endpointConstants in it.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#discussion_r509316808", "createdAt": "2020-10-21T14:05:34Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-spark-connector/src/test/resources/custom-ingestion-endpoint/endpoint.api", "diffHunk": "@@ -3,13 +3,7 @@\n     \"desc\": \"This is for testing a custom ingestion endpoint\",\n     \"params\": [\n         {\n-            \"name\": \"endpointState\",\n-            \"datatype\": \"jsonDocument\",\n-            \"multiple\": false,\n-            \"nullable\": true\n-        },\n-        {\n-            \"name\": \"workUnit\",\n+            \"name\": \"endpointConstants\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73d369ca34b830400e0e6b5665b2879ab5829d2b"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MDUwMzU4OnYy", "diffSide": "LEFT", "path": "marklogic-data-hub-spark-connector/src/test/resources/custom-ingestion-endpoint/endpoint.sjs", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowNTo1MFrOHluPsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowNTo1MFrOHluPsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMxNzA0MA==", "bodyText": "We still want to include this and test for it.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#discussion_r509317040", "createdAt": "2020-10-21T14:05:50Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-spark-connector/src/test/resources/custom-ingestion-endpoint/endpoint.sjs", "diffHunk": "@@ -20,13 +20,11 @@ declareUpdate();\n var endpointState;\n var input;\n \n-const state = fn.head(xdmp.fromJSON(endpointState));\n-const work = fn.head(xdmp.fromJSON(workUnit));\n+const work = fn.head(xdmp.fromJSON(endpointConstants));\n \n const doc = {\n   input: input,\n-  endpointState: state,\n-  workUnit: work", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73d369ca34b830400e0e6b5665b2879ab5829d2b"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MDUwNDg2OnYy", "diffSide": "LEFT", "path": "marklogic-data-hub-spark-connector/src/test/java/com/marklogic/hub/spark/sql/sources/v2/WriteDataViaCustomEndpointTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowNjowN1rOHluQig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowNjowN1rOHluQig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMxNzI1OA==", "bodyText": "We still want to verify that if Ernie has custom endpointState, his endpoint gets access to it.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#discussion_r509317258", "createdAt": "2020-10-21T14:06:07Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-spark-connector/src/test/java/com/marklogic/hub/spark/sql/sources/v2/WriteDataViaCustomEndpointTest.java", "diffHunk": "@@ -60,8 +60,7 @@ private void thenTheExpectedDocumentExists() {\n         assertEquals(\"apple\", doc.get(\"input\").get(\"fruitName\").asText(), message);\n         assertEquals(\"red\", doc.get(\"input\").get(\"fruitColor\").asText(), message);\n \n-        assertEquals(\"value\", doc.get(\"workUnit\").get(\"someString\").asText(), message);\n-        assertEquals(123, doc.get(\"workUnit\").get(\"someNumber\").asInt(), message);\n-        assertEquals(\"hello world\", doc.get(\"endpointState\").get(\"someState\").asText(), message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73d369ca34b830400e0e6b5665b2879ab5829d2b"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3155, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}