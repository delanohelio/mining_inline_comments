{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5NjkxNzkx", "number": 3536, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQyMDo1MDo1MFrODcWr9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxNDoxMDo0NVrODca8Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMDU4NDIxOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubProjectImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQyMDo1MDo1MFrOFkXlfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQyMDo1MDo1MFrOFkXlfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY3OTQ4NA==", "bodyText": "This would create roles but it seems incomplete as \"data-hub-operator/developer\" are not inheriting these roles. The load data artifact is not written with appropriate permissions.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#discussion_r373679484", "createdAt": "2020-01-31T20:50:50Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubProjectImpl.java", "diffHunk": "@@ -362,6 +362,11 @@ public Path getCustomMappingFunctionsDir() {\n             IOUtils.closeQuietly(is);\n         }\n \n+        //New 5.3.0 roles\n+        writeRoleFile(rolesDir, \"data-hub-load-data-reader.json\");\n+        writeRoleFile(rolesDir, \"data-hub-load-data-writer.json\");\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6378f414a276f505457148a7def4cf41e4147317"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMTI4MTAyOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/artifacts/loadData.mjs", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxNDoxMDo0NVrOFkd1ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQxNjozMjoyNlrOFkigsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc4MTkyMw==", "bodyText": "Is there a downside to use the roles directly as a string than as a constant?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#discussion_r373781923", "createdAt": "2020-02-01T14:10:45Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/artifacts/loadData.mjs", "diffHunk": "@@ -22,7 +22,7 @@ const dataHub = DataHubSingleton.instance();\n \n const collections = ['http://marklogic.com/data-hub/load-data-artifact'];\n const databases = [dataHub.config.STAGINGDATABASE, dataHub.config.FINALDATABASE];\n-const permissions = [xdmp.permission(dataHub.consts.DATA_HUB_DEVELOPER_ROLE, 'update'), xdmp.permission(dataHub.consts.DATA_HUB_OPERATOR_ROLE, 'read')];\n+const permissions = [xdmp.permission(dataHub.consts.DATA_HUB_LOAD_DATA_WRITE_ROLE, 'update'), xdmp.permission(dataHub.consts.DATA_HUB_LOAD_DATA_READ_ROLE, 'read')];\n const requiredProperties = ['name', 'sourceFormat', 'targetFormat'];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "900ec07119f0664a42a41215dabad8b9ad581bd4"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1ODQ4Mg==", "bodyText": "Just the benefit that if we ever make the role configurable in the future there would only be one pace to make that change on the server side.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#discussion_r373858482", "createdAt": "2020-02-02T16:32:26Z", "author": {"login": "ryanjdew"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/artifacts/loadData.mjs", "diffHunk": "@@ -22,7 +22,7 @@ const dataHub = DataHubSingleton.instance();\n \n const collections = ['http://marklogic.com/data-hub/load-data-artifact'];\n const databases = [dataHub.config.STAGINGDATABASE, dataHub.config.FINALDATABASE];\n-const permissions = [xdmp.permission(dataHub.consts.DATA_HUB_DEVELOPER_ROLE, 'update'), xdmp.permission(dataHub.consts.DATA_HUB_OPERATOR_ROLE, 'read')];\n+const permissions = [xdmp.permission(dataHub.consts.DATA_HUB_LOAD_DATA_WRITE_ROLE, 'update'), xdmp.permission(dataHub.consts.DATA_HUB_LOAD_DATA_READ_ROLE, 'read')];\n const requiredProperties = ['name', 'sourceFormat', 'targetFormat'];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc4MTkyMw=="}, "originalCommit": {"oid": "900ec07119f0664a42a41215dabad8b9ad581bd4"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3679, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}