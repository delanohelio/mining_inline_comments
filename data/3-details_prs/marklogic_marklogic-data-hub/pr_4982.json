{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2MjA5Mjk1", "number": 4982, "title": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View.", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-12-10T19:47:55Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982", "merged": true, "mergeCommit": {"oid": "955afb1b911c2ebcca8ccf5fea7d1fbfcd8ea248"}, "closed": true, "closedAt": "2020-12-12T02:41:23Z", "author": {"login": "timur-isangulov"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk40SJABqjQwOTY5NDgxMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlRkXAAFqTU1MDY2NTcwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f672905c77b6fb034cc0a34d4f3404a312fd6532", "author": {"user": {"login": "timur38", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/f672905c77b6fb034cc0a34d4f3404a312fd6532", "committedDate": "2020-12-10T19:46:22Z", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View"}, "afterCommit": {"oid": "f2e576697880ec0c6432fd98d35e6d3c877e6c81", "author": {"user": {"login": "timur38", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/f2e576697880ec0c6432fd98d35e6d3c877e6c81", "committedDate": "2020-12-10T19:50:00Z", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2e576697880ec0c6432fd98d35e6d3c877e6c81", "author": {"user": {"login": "timur38", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/f2e576697880ec0c6432fd98d35e6d3c877e6c81", "committedDate": "2020-12-10T19:50:00Z", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View"}, "afterCommit": {"oid": "28c0ba4d7665b12db53e2515dd4453e394c72eb1", "author": {"user": {"login": "timur38", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/28c0ba4d7665b12db53e2515dd4453e394c72eb1", "committedDate": "2020-12-10T20:01:45Z", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "28c0ba4d7665b12db53e2515dd4453e394c72eb1", "author": {"user": {"login": "timur38", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/28c0ba4d7665b12db53e2515dd4453e394c72eb1", "committedDate": "2020-12-10T20:01:45Z", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View"}, "afterCommit": {"oid": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6", "author": {"user": {"login": "timur38", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/c9d41c94f256ca439a6dd63c3f8300a85d3be6e6", "committedDate": "2020-12-10T20:02:39Z", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNDU5MzAw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#pullrequestreview-550459300", "createdAt": "2020-12-11T18:45:27Z", "commit": {"oid": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxODo0NToyN1rOIEFYnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxODo1ODowNVrOIEF3AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1MzQzOQ==", "bodyText": "It would be better if we place the custom response in a separate file, may be under \"assets/mock-data/explore/\" in a response file specifically for Non-Entity documents.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#discussion_r541153439", "createdAt": "2020-12-11T18:45:27Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/detail-page-non-entity/detail-page-non-entity.test.tsx", "diffHunk": "@@ -1,12 +1,62 @@\n import React from \"react\";\n-import {render} from \"@testing-library/react\";\n+import {render, fireEvent, waitForElement} from \"@testing-library/react\";\n import {BrowserRouter as Router} from \"react-router-dom\";\n import DetailPageNonEntity from \"./detail-page-non-entity\";\n import testData from \"../../assets/mock-data/explore/Non-entity-document-payload\";\n import userEvent from \"@testing-library/user-event\";\n+import axiosMock from \"axios\";\n+\n+jest.mock(\"axios\");\n \n describe(\"Detail page for non-entity view component\", () => {\n \n+  afterEach(() => {\n+    jest.clearAllMocks();\n+  });\n+\n+  const response =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1NzUzMg==", "bodyText": "Any axios call should be moved out to the /api folder (may be create a new file for explorer there ?) and then the function can be imported here, to follow similar code pattern as other components.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#discussion_r541157532", "createdAt": "2020-12-11T18:52:43Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/detail-page-non-entity/detail-page-non-entity.tsx", "diffHunk": "@@ -173,6 +174,34 @@ const DetailPageNonEntity = (props) => {\n     }\n   };\n \n+  const download = async () => {\n+    try {\n+      const response = await axios({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1OTIwMg==", "bodyText": "This can also be moved to the same \"non-entity-document-response.tsx\" file that we can create to store the previous response , as mentioned in my earlier comment", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#discussion_r541159202", "createdAt": "2020-12-11T18:55:38Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/record-view/record-view.test.tsx", "diffHunk": "@@ -3,9 +3,80 @@ import {render, fireEvent, waitForElement} from \"@testing-library/react\";\n import {entitySearch} from \"../../assets/mock-data/explore/entity-search\";\n import {BrowserRouter as Router} from \"react-router-dom\";\n import RecordCardView from \"./record-view\";\n+import axiosMock from \"axios\";\n+import {MemoryRouter} from \"react-router-dom\";\n+import {SearchContext} from \"../../util/search-context\";\n+\n+jest.mock(\"axios\");\n \n describe(\"Raw data card view component\", () => {\n \n+  const defaultSearchOptions = {\n+    query: \"\",\n+    entityTypeIds: [],\n+    nextEntityType: \"\",\n+    start: 1,\n+    pageNumber: 1,\n+    pageLength: 20,\n+    pageSize: 20,\n+    selectedFacets: {},\n+    maxRowsPerPage: 100,\n+    selectedQuery: \"select a query\",\n+    zeroState: false,\n+    manageQueryModal: false,\n+    selectedTableProperties: [],\n+    view: null,\n+    sortOrder: [],\n+    database: \"final\",\n+  };\n+\n+  const response =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE2MTIxNw==", "bodyText": "Same comment as above. Moving this axios call to /api folder would make it reusable at both the places.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#discussion_r541161217", "createdAt": "2020-12-11T18:58:05Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/record-view/record-view.tsx", "diffHunk": "@@ -133,6 +134,34 @@ const RecordCardView = (props) => {\n     return linkObject;\n   };\n \n+  const download = async (docUri) => {\n+    try {\n+      const response = await axios({", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69e5ab4dde46e335b17159eba88065d8e283cb9a", "author": {"user": {"login": "timur38", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/69e5ab4dde46e335b17159eba88065d8e283cb9a", "committedDate": "2020-12-11T20:02:05Z", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6", "author": {"user": {"login": "timur38", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/c9d41c94f256ca439a6dd63c3f8300a85d3be6e6", "committedDate": "2020-12-10T20:02:39Z", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View"}, "afterCommit": {"oid": "69e5ab4dde46e335b17159eba88065d8e283cb9a", "author": {"user": {"login": "timur38", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/69e5ab4dde46e335b17159eba88065d8e283cb9a", "committedDate": "2020-12-11T20:02:05Z", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNTQ1NDEz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#pullrequestreview-550545413", "createdAt": "2020-12-11T20:13:28Z", "commit": {"oid": "69e5ab4dde46e335b17159eba88065d8e283cb9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNjY1NzA0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#pullrequestreview-550665704", "createdAt": "2020-12-12T00:40:32Z", "commit": {"oid": "69e5ab4dde46e335b17159eba88065d8e283cb9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1560, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}