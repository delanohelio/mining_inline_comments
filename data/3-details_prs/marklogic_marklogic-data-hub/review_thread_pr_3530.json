{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5MjQ4MDQ4", "number": 3530, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQyMTo0Mzo0NVrODcEeXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQyMTo0Mzo0NVrODcEeXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNzYwMDMwOnYy", "diffSide": "RIGHT", "path": "Jenkinsfile", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQyMTo0Mzo0NVrOFj65Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwMDo1MzoxNVrOFj-pkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwOTQ0Mw==", "bodyText": "Can we use anything other than admin/admin to run the flow.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3530#discussion_r373209443", "createdAt": "2020-01-30T21:43:45Z", "author": {"login": "bsrikan"}, "path": "Jenkinsfile", "diffHunk": "@@ -534,11 +534,25 @@ pipeline{\n             stage('dh5-example'){\n                  agent { label 'dhfLinuxAgent'}\n                 steps{\n+                     sh 'cd $WORKSPACE/data-hub/examples/dh-5-example;repo=\"    maven {url \\'http://distro.marklogic.com/nexus/repository/maven-snapshots/\\'}\";sed -i \"/repositories {/a$repo\" build.gradle; '\n                      copyRPM 'Release','10.0-3'\n                      script{\n                         props = readProperties file:'data-hub/pipeline.properties';\n                         def dockerhost=setupMLDockerCluster 3\n-                        sh 'docker exec -u builder -i '+dockerhost+' /bin/sh -c \"export JAVA_HOME=`eval echo \"$JAVA_HOME_DIR\"`;export GRADLE_USER_HOME=$WORKSPACE$GRADLE_DIR;export M2_HOME=$MAVEN_HOME/bin;export PATH=$GRADLE_USER_HOME:$PATH:$MAVEN_HOME/bin;cd $WORKSPACE/data-hub/examples/dh-5-example;rm -rf $GRADLE_USER_HOME/caches;./gradlew clean;set +e;./gradlew -i hubInit -Ptesting=true;./gradlew -i mlDeploy -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_only-flow -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_mapping-flow -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_mapping_mastering-flow -Ptesting=true;\"'\n+                        sh '''\n+                            docker exec -u builder -i '''+dockerhost+''' /bin/sh -c \"export JAVA_HOME=`eval echo \"$JAVA_HOME_DIR\"`;\\\n+                            export GRADLE_USER_HOME=$WORKSPACE$GRADLE_DIR; \\\n+                            export M2_HOME=$MAVEN_HOME/bin; \\\n+                            export PATH=$GRADLE_USER_HOME:$PATH:$MAVEN_HOME/bin; \\\n+                            cd $WORKSPACE/data-hub/examples/dh-5-example; \\\n+                            rm -rf $GRADLE_USER_HOME/caches; \\\n+                            ./gradlew -i hubInit -Ptesting=true; \\\n+                            ./gradlew -i mlDeploy -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_only-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_mapping-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_mapping_mastering-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin;\n+                            \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7577ac66e62f65fad18cb3e45c81b6147b1d208e"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIxNDE2NQ==", "bodyText": "how can I do that? Instead of editing the gradle properties file. I'm passing the params.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3530#discussion_r373214165", "createdAt": "2020-01-30T21:54:24Z", "author": {"login": "SameeraPriyathamTadikonda"}, "path": "Jenkinsfile", "diffHunk": "@@ -534,11 +534,25 @@ pipeline{\n             stage('dh5-example'){\n                  agent { label 'dhfLinuxAgent'}\n                 steps{\n+                     sh 'cd $WORKSPACE/data-hub/examples/dh-5-example;repo=\"    maven {url \\'http://distro.marklogic.com/nexus/repository/maven-snapshots/\\'}\";sed -i \"/repositories {/a$repo\" build.gradle; '\n                      copyRPM 'Release','10.0-3'\n                      script{\n                         props = readProperties file:'data-hub/pipeline.properties';\n                         def dockerhost=setupMLDockerCluster 3\n-                        sh 'docker exec -u builder -i '+dockerhost+' /bin/sh -c \"export JAVA_HOME=`eval echo \"$JAVA_HOME_DIR\"`;export GRADLE_USER_HOME=$WORKSPACE$GRADLE_DIR;export M2_HOME=$MAVEN_HOME/bin;export PATH=$GRADLE_USER_HOME:$PATH:$MAVEN_HOME/bin;cd $WORKSPACE/data-hub/examples/dh-5-example;rm -rf $GRADLE_USER_HOME/caches;./gradlew clean;set +e;./gradlew -i hubInit -Ptesting=true;./gradlew -i mlDeploy -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_only-flow -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_mapping-flow -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_mapping_mastering-flow -Ptesting=true;\"'\n+                        sh '''\n+                            docker exec -u builder -i '''+dockerhost+''' /bin/sh -c \"export JAVA_HOME=`eval echo \"$JAVA_HOME_DIR\"`;\\\n+                            export GRADLE_USER_HOME=$WORKSPACE$GRADLE_DIR; \\\n+                            export M2_HOME=$MAVEN_HOME/bin; \\\n+                            export PATH=$GRADLE_USER_HOME:$PATH:$MAVEN_HOME/bin; \\\n+                            cd $WORKSPACE/data-hub/examples/dh-5-example; \\\n+                            rm -rf $GRADLE_USER_HOME/caches; \\\n+                            ./gradlew -i hubInit -Ptesting=true; \\\n+                            ./gradlew -i mlDeploy -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_only-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_mapping-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_mapping_mastering-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin;\n+                            \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwOTQ0Mw=="}, "originalCommit": {"oid": "7577ac66e62f65fad18cb3e45c81b6147b1d208e"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIzODUxMA==", "bodyText": "We can maintain a copy of gradle.properties to be used across examples. Paste that over to the project directory after hubinit, then mlDeploy as admin by passing credentials via params and run the flow, so mlUsername credentials in the gradle props file will be used.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3530#discussion_r373238510", "createdAt": "2020-01-30T22:56:04Z", "author": {"login": "bsrikan"}, "path": "Jenkinsfile", "diffHunk": "@@ -534,11 +534,25 @@ pipeline{\n             stage('dh5-example'){\n                  agent { label 'dhfLinuxAgent'}\n                 steps{\n+                     sh 'cd $WORKSPACE/data-hub/examples/dh-5-example;repo=\"    maven {url \\'http://distro.marklogic.com/nexus/repository/maven-snapshots/\\'}\";sed -i \"/repositories {/a$repo\" build.gradle; '\n                      copyRPM 'Release','10.0-3'\n                      script{\n                         props = readProperties file:'data-hub/pipeline.properties';\n                         def dockerhost=setupMLDockerCluster 3\n-                        sh 'docker exec -u builder -i '+dockerhost+' /bin/sh -c \"export JAVA_HOME=`eval echo \"$JAVA_HOME_DIR\"`;export GRADLE_USER_HOME=$WORKSPACE$GRADLE_DIR;export M2_HOME=$MAVEN_HOME/bin;export PATH=$GRADLE_USER_HOME:$PATH:$MAVEN_HOME/bin;cd $WORKSPACE/data-hub/examples/dh-5-example;rm -rf $GRADLE_USER_HOME/caches;./gradlew clean;set +e;./gradlew -i hubInit -Ptesting=true;./gradlew -i mlDeploy -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_only-flow -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_mapping-flow -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_mapping_mastering-flow -Ptesting=true;\"'\n+                        sh '''\n+                            docker exec -u builder -i '''+dockerhost+''' /bin/sh -c \"export JAVA_HOME=`eval echo \"$JAVA_HOME_DIR\"`;\\\n+                            export GRADLE_USER_HOME=$WORKSPACE$GRADLE_DIR; \\\n+                            export M2_HOME=$MAVEN_HOME/bin; \\\n+                            export PATH=$GRADLE_USER_HOME:$PATH:$MAVEN_HOME/bin; \\\n+                            cd $WORKSPACE/data-hub/examples/dh-5-example; \\\n+                            rm -rf $GRADLE_USER_HOME/caches; \\\n+                            ./gradlew -i hubInit -Ptesting=true; \\\n+                            ./gradlew -i mlDeploy -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_only-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_mapping-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_mapping_mastering-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin;\n+                            \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwOTQ0Mw=="}, "originalCommit": {"oid": "7577ac66e62f65fad18cb3e45c81b6147b1d208e"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI3MDkzMA==", "bodyText": "Copying gradle.properties file from marklogic-datahub and running the flows as flow developer.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3530#discussion_r373270930", "createdAt": "2020-01-31T00:53:15Z", "author": {"login": "SameeraPriyathamTadikonda"}, "path": "Jenkinsfile", "diffHunk": "@@ -534,11 +534,25 @@ pipeline{\n             stage('dh5-example'){\n                  agent { label 'dhfLinuxAgent'}\n                 steps{\n+                     sh 'cd $WORKSPACE/data-hub/examples/dh-5-example;repo=\"    maven {url \\'http://distro.marklogic.com/nexus/repository/maven-snapshots/\\'}\";sed -i \"/repositories {/a$repo\" build.gradle; '\n                      copyRPM 'Release','10.0-3'\n                      script{\n                         props = readProperties file:'data-hub/pipeline.properties';\n                         def dockerhost=setupMLDockerCluster 3\n-                        sh 'docker exec -u builder -i '+dockerhost+' /bin/sh -c \"export JAVA_HOME=`eval echo \"$JAVA_HOME_DIR\"`;export GRADLE_USER_HOME=$WORKSPACE$GRADLE_DIR;export M2_HOME=$MAVEN_HOME/bin;export PATH=$GRADLE_USER_HOME:$PATH:$MAVEN_HOME/bin;cd $WORKSPACE/data-hub/examples/dh-5-example;rm -rf $GRADLE_USER_HOME/caches;./gradlew clean;set +e;./gradlew -i hubInit -Ptesting=true;./gradlew -i mlDeploy -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_only-flow -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_mapping-flow -Ptesting=true;./gradlew hubRunFlow -PflowName=ingestion_mapping_mastering-flow -Ptesting=true;\"'\n+                        sh '''\n+                            docker exec -u builder -i '''+dockerhost+''' /bin/sh -c \"export JAVA_HOME=`eval echo \"$JAVA_HOME_DIR\"`;\\\n+                            export GRADLE_USER_HOME=$WORKSPACE$GRADLE_DIR; \\\n+                            export M2_HOME=$MAVEN_HOME/bin; \\\n+                            export PATH=$GRADLE_USER_HOME:$PATH:$MAVEN_HOME/bin; \\\n+                            cd $WORKSPACE/data-hub/examples/dh-5-example; \\\n+                            rm -rf $GRADLE_USER_HOME/caches; \\\n+                            ./gradlew -i hubInit -Ptesting=true; \\\n+                            ./gradlew -i mlDeploy -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_only-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_mapping-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin; \\\n+                            ./gradlew hubRunFlow -PflowName=ingestion_mapping_mastering-flow -Ptesting=true -PmlUsername=admin -PmlPassword=admin;\n+                            \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwOTQ0Mw=="}, "originalCommit": {"oid": "7577ac66e62f65fad18cb3e45c81b6147b1d208e"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3672, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}