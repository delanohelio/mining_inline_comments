{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5NjkxNzkx", "number": 3536, "title": "DHFPROD-3916: Adding load data roles", "bodyText": "DHFPROD-3916 talks about data-hub-load-data-reader and data-hub-load-data-writer roles to be able to update/view the load configuration in one-ui.\nThis PR is an attempt to create these new 5.3 roles.", "createdAt": "2020-01-31T17:40:30Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536", "merged": true, "mergeCommit": {"oid": "f5df8e8cc99b19e7515ef3a0c840077078fbc1fd"}, "closed": true, "closedAt": "2020-02-02T16:34:21Z", "author": {"login": "bsrikan"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_zE0ngFqTM1MTY3ODA0MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAHVnvAFqTM1MTg5NTI3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNjc4MDQx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#pullrequestreview-351678041", "createdAt": "2020-01-31T18:02:35Z", "commit": {"oid": "6378f414a276f505457148a7def4cf41e4147317"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNzM4MjQz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#pullrequestreview-351738243", "createdAt": "2020-01-31T19:49:40Z", "commit": {"oid": "6378f414a276f505457148a7def4cf41e4147317"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNzQxNzc2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#pullrequestreview-351741776", "createdAt": "2020-01-31T19:55:57Z", "commit": {"oid": "6378f414a276f505457148a7def4cf41e4147317"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNzY5NTU5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#pullrequestreview-351769559", "createdAt": "2020-01-31T20:50:50Z", "commit": {"oid": "6378f414a276f505457148a7def4cf41e4147317"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQyMDo1MDo1MFrOFkXlfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQyMDo1MDo1MFrOFkXlfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY3OTQ4NA==", "bodyText": "This would create roles but it seems incomplete as \"data-hub-operator/developer\" are not inheriting these roles. The load data artifact is not written with appropriate permissions.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#discussion_r373679484", "createdAt": "2020-01-31T20:50:50Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubProjectImpl.java", "diffHunk": "@@ -362,6 +362,11 @@ public Path getCustomMappingFunctionsDir() {\n             IOUtils.closeQuietly(is);\n         }\n \n+        //New 5.3.0 roles\n+        writeRoleFile(rolesDir, \"data-hub-load-data-reader.json\");\n+        writeRoleFile(rolesDir, \"data-hub-load-data-writer.json\");\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6378f414a276f505457148a7def4cf41e4147317"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "900ec07119f0664a42a41215dabad8b9ad581bd4", "author": {"user": {"login": "bsrikan", "name": "Srikanth Balasubramanian"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/900ec07119f0664a42a41215dabad8b9ad581bd4", "committedDate": "2020-02-01T05:45:54Z", "message": "DHFPROD-3916: Adding load data roles"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6378f414a276f505457148a7def4cf41e4147317", "author": {"user": {"login": "bsrikan", "name": "Srikanth Balasubramanian"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/6378f414a276f505457148a7def4cf41e4147317", "committedDate": "2020-01-31T15:01:19Z", "message": "DHFPROD-3916: Adding load data roles"}, "afterCommit": {"oid": "900ec07119f0664a42a41215dabad8b9ad581bd4", "author": {"user": {"login": "bsrikan", "name": "Srikanth Balasubramanian"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/900ec07119f0664a42a41215dabad8b9ad581bd4", "committedDate": "2020-02-01T05:45:54Z", "message": "DHFPROD-3916: Adding load data roles"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODY3NzY4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#pullrequestreview-351867768", "createdAt": "2020-02-01T05:55:24Z", "commit": {"oid": "900ec07119f0664a42a41215dabad8b9ad581bd4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODg2MDky", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#pullrequestreview-351886092", "createdAt": "2020-02-01T14:10:45Z", "commit": {"oid": "900ec07119f0664a42a41215dabad8b9ad581bd4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxNDoxMDo0NVrOFkd1ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxNDoxMDo0NVrOFkd1ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc4MTkyMw==", "bodyText": "Is there a downside to use the roles directly as a string than as a constant?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#discussion_r373781923", "createdAt": "2020-02-01T14:10:45Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/artifacts/loadData.mjs", "diffHunk": "@@ -22,7 +22,7 @@ const dataHub = DataHubSingleton.instance();\n \n const collections = ['http://marklogic.com/data-hub/load-data-artifact'];\n const databases = [dataHub.config.STAGINGDATABASE, dataHub.config.FINALDATABASE];\n-const permissions = [xdmp.permission(dataHub.consts.DATA_HUB_DEVELOPER_ROLE, 'update'), xdmp.permission(dataHub.consts.DATA_HUB_OPERATOR_ROLE, 'read')];\n+const permissions = [xdmp.permission(dataHub.consts.DATA_HUB_LOAD_DATA_WRITE_ROLE, 'update'), xdmp.permission(dataHub.consts.DATA_HUB_LOAD_DATA_READ_ROLE, 'read')];\n const requiredProperties = ['name', 'sourceFormat', 'targetFormat'];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "900ec07119f0664a42a41215dabad8b9ad581bd4"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODk1Mjcw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3536#pullrequestreview-351895270", "createdAt": "2020-02-01T17:39:02Z", "commit": {"oid": "900ec07119f0664a42a41215dabad8b9ad581bd4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2409, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}