{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3MDAwMDM5", "number": 4740, "title": "DHFPROD-6051: The connector should point to java-client-api version 5.3", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-10-20T18:12:53Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740", "merged": true, "mergeCommit": {"oid": "e8b65138f8bcfbb182bb59797e8c8842355c239d"}, "closed": true, "closedAt": "2020-10-22T00:47:00Z", "author": {"login": "anu3990"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUdyGAgFqTUxMzA0NDkzMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdU3EZTAFqTUxNDI4NTU4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMDQ0OTMx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#pullrequestreview-513044931", "createdAt": "2020-10-20T19:01:25Z", "commit": {"oid": "c676f2518148ccf99243f3653e2d239b62f36820"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxOTowMToyNVrOHlM1hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQxOTowMToyNVrOHlM1hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODc2OTY3MA==", "bodyText": "Don't we still need ingestEndpointState? Or is that not relevant at all to input-only endpoints?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#discussion_r508769670", "createdAt": "2020-10-20T19:01:25Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-spark-connector/src/test/java/com/marklogic/hub/spark/sql/sources/v2/Options.java", "diffHunk": "@@ -21,8 +21,7 @@\n     private String permissions;\n     private String sourceName;\n     private String sourceType;\n-    private JsonNode ingestWorkUnit;\n-    private JsonNode ingestEndpointState;\n+    private JsonNode ingestEndpointConstants;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c676f2518148ccf99243f3653e2d239b62f36820"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c676f2518148ccf99243f3653e2d239b62f36820", "author": {"user": {"login": "anu3990", "name": "Anushree Sinha"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/c676f2518148ccf99243f3653e2d239b62f36820", "committedDate": "2020-10-20T18:10:56Z", "message": "DHFPROD-6051: The connector should point to java-client-api version - 5.3"}, "afterCommit": {"oid": "73d369ca34b830400e0e6b5665b2879ab5829d2b", "author": {"user": {"login": "anu3990", "name": "Anushree Sinha"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/73d369ca34b830400e0e6b5665b2879ab5829d2b", "committedDate": "2020-10-21T07:10:23Z", "message": "DHFPROD-6051: The connector should point to java-client-api version - 5.3"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNzI1MzU4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#pullrequestreview-513725358", "createdAt": "2020-10-21T14:05:34Z", "commit": {"oid": "73d369ca34b830400e0e6b5665b2879ab5829d2b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowNTozNFrOHluOyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowNjowN1rOHluQig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMxNjgwOA==", "bodyText": "This custom endpoint should still have endpointState in it; that's a critical part of verifying that if Ernie uses a custom endpoint, he can define both endpointState and endpointConstants in it.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#discussion_r509316808", "createdAt": "2020-10-21T14:05:34Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-spark-connector/src/test/resources/custom-ingestion-endpoint/endpoint.api", "diffHunk": "@@ -3,13 +3,7 @@\n     \"desc\": \"This is for testing a custom ingestion endpoint\",\n     \"params\": [\n         {\n-            \"name\": \"endpointState\",\n-            \"datatype\": \"jsonDocument\",\n-            \"multiple\": false,\n-            \"nullable\": true\n-        },\n-        {\n-            \"name\": \"workUnit\",\n+            \"name\": \"endpointConstants\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73d369ca34b830400e0e6b5665b2879ab5829d2b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMxNzA0MA==", "bodyText": "We still want to include this and test for it.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#discussion_r509317040", "createdAt": "2020-10-21T14:05:50Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-spark-connector/src/test/resources/custom-ingestion-endpoint/endpoint.sjs", "diffHunk": "@@ -20,13 +20,11 @@ declareUpdate();\n var endpointState;\n var input;\n \n-const state = fn.head(xdmp.fromJSON(endpointState));\n-const work = fn.head(xdmp.fromJSON(workUnit));\n+const work = fn.head(xdmp.fromJSON(endpointConstants));\n \n const doc = {\n   input: input,\n-  endpointState: state,\n-  workUnit: work", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73d369ca34b830400e0e6b5665b2879ab5829d2b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMxNzI1OA==", "bodyText": "We still want to verify that if Ernie has custom endpointState, his endpoint gets access to it.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#discussion_r509317258", "createdAt": "2020-10-21T14:06:07Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub-spark-connector/src/test/java/com/marklogic/hub/spark/sql/sources/v2/WriteDataViaCustomEndpointTest.java", "diffHunk": "@@ -60,8 +60,7 @@ private void thenTheExpectedDocumentExists() {\n         assertEquals(\"apple\", doc.get(\"input\").get(\"fruitName\").asText(), message);\n         assertEquals(\"red\", doc.get(\"input\").get(\"fruitColor\").asText(), message);\n \n-        assertEquals(\"value\", doc.get(\"workUnit\").get(\"someString\").asText(), message);\n-        assertEquals(123, doc.get(\"workUnit\").get(\"someNumber\").asInt(), message);\n-        assertEquals(\"hello world\", doc.get(\"endpointState\").get(\"someState\").asText(), message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73d369ca34b830400e0e6b5665b2879ab5829d2b"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "067a2ecafdac9b7a1ddcd3afb869699437ee4875", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/067a2ecafdac9b7a1ddcd3afb869699437ee4875", "committedDate": "2020-10-21T17:09:20Z", "message": "Added tests to custom endpoint test\n\nFixed issue in HubDataWriter where the endpointState wasn't being passed. Also cleaned up DefaultSource a bit - we didn't need defaultEndpointConstants to be a class field"}, "afterCommit": {"oid": "bab561baec6b5e1e362233824cb84dce7c8b7f42", "author": {"user": {"login": "anu3990", "name": "Anushree Sinha"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/bab561baec6b5e1e362233824cb84dce7c8b7f42", "committedDate": "2020-10-21T17:27:15Z", "message": "DHFPROD-6051: The connector should point to java-client-api version - 5.3"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MDM2NTMx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#pullrequestreview-514036531", "createdAt": "2020-10-21T18:00:07Z", "commit": {"oid": "bab561baec6b5e1e362233824cb84dce7c8b7f42"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MDM4Mzgy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#pullrequestreview-514038382", "createdAt": "2020-10-21T18:02:34Z", "commit": {"oid": "bab561baec6b5e1e362233824cb84dce7c8b7f42"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81ff21919bf2b041a37c0fca0363d4213be9ee79", "author": {"user": {"login": "anu3990", "name": "Anushree Sinha"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/81ff21919bf2b041a37c0fca0363d4213be9ee79", "committedDate": "2020-10-21T21:21:12Z", "message": "DHFPROD-6051: The connector should point to java-client-api version - 5.3"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bab561baec6b5e1e362233824cb84dce7c8b7f42", "author": {"user": {"login": "anu3990", "name": "Anushree Sinha"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/bab561baec6b5e1e362233824cb84dce7c8b7f42", "committedDate": "2020-10-21T17:27:15Z", "message": "DHFPROD-6051: The connector should point to java-client-api version - 5.3"}, "afterCommit": {"oid": "81ff21919bf2b041a37c0fca0363d4213be9ee79", "author": {"user": {"login": "anu3990", "name": "Anushree Sinha"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/81ff21919bf2b041a37c0fca0363d4213be9ee79", "committedDate": "2020-10-21T21:21:12Z", "message": "DHFPROD-6051: The connector should point to java-client-api version - 5.3"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0Mjg1MTE4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#pullrequestreview-514285118", "createdAt": "2020-10-22T00:43:45Z", "commit": {"oid": "81ff21919bf2b041a37c0fca0363d4213be9ee79"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0Mjg1NTg1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4740#pullrequestreview-514285585", "createdAt": "2020-10-22T00:45:18Z", "commit": {"oid": "81ff21919bf2b041a37c0fca0363d4213be9ee79"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1765, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}