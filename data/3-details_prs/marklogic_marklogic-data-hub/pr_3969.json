{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NzczMjA2", "number": 3969, "title": "DHFPROD-4674: Add hub-central-writer role", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-05-18T22:26:42Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969", "merged": true, "mergeCommit": {"oid": "b608dda9d740ad919416cc7f9660c428334d1d60"}, "closed": true, "closedAt": "2020-05-20T00:20:53Z", "author": {"login": "ryanjdew"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcioFeAgFqTQxMzk5MzI4Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABci8-L0AFqTQxNDg4OTM1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTkzMjgy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#pullrequestreview-413993282", "createdAt": "2020-05-18T23:01:27Z", "commit": {"oid": "90facb1530c5af13f88787acc405da281828c0ca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMzowMToyN1rOGXKNfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMzowMToyN1rOGXKNfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkzNzcyNQ==", "bodyText": "Thoughts on using xdmp.securityAssert in the step endpoints? Would require conditionals on stepDefinitionType", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#discussion_r426937725", "createdAt": "2020-05-18T23:01:27Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/hub-internal-config/security/privileges/data-hub-write-mapping.json", "diffHunk": "@@ -0,0 +1,5 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90facb1530c5af13f88787acc405da281828c0ca"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTk5ODk4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#pullrequestreview-413999898", "createdAt": "2020-05-18T23:18:56Z", "commit": {"oid": "90facb1530c5af13f88787acc405da281828c0ca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMzoxODo1NlrOGXKjOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMzoxODo1NlrOGXKjOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk0MzI5MA==", "bodyText": "So even a hub-central-user can access Explore tile?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#discussion_r426943290", "createdAt": "2020-05-18T23:18:56Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/tiles/toolbar.tsx", "diffHunk": "@@ -12,23 +14,39 @@ interface Props {\n const Toolbar: React.FC<Props>  = (props) => {\n \n     const tiles = props.tiles; // config/tiles.config.ts\n+    const authorityService = useContext(AuthoritiesContext);\n+    const idToAuthoritiesNeeded = {\n+        load: () => authorityService.canReadLoadData(),\n+        model: () => authorityService.canReadEntityModel(),\n+        curate: () => authorityService.canReadMapping(),\n+        run: () => authorityService.canReadFlow(),\n+        explore: () => true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90facb1530c5af13f88787acc405da281828c0ca"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "90facb1530c5af13f88787acc405da281828c0ca", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/90facb1530c5af13f88787acc405da281828c0ca", "committedDate": "2020-05-18T22:25:17Z", "message": "DHFPROD-4674: Add hub-central-writer role"}, "afterCommit": {"oid": "c8d6f4cc54c7c56d653c45e43f48dd5a8d5f387b", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/c8d6f4cc54c7c56d653c45e43f48dd5a8d5f387b", "committedDate": "2020-05-18T23:24:19Z", "message": "DHFPROD-4674: Add hub-central-writer role"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c8d6f4cc54c7c56d653c45e43f48dd5a8d5f387b", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/c8d6f4cc54c7c56d653c45e43f48dd5a8d5f387b", "committedDate": "2020-05-18T23:24:19Z", "message": "DHFPROD-4674: Add hub-central-writer role"}, "afterCommit": {"oid": "30a7cd70d0f190e5017fd029ce35a2efea22ce84", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/30a7cd70d0f190e5017fd029ce35a2efea22ce84", "committedDate": "2020-05-19T00:35:40Z", "message": "DHFPROD-4674: Add hub-central-writer role"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30a7cd70d0f190e5017fd029ce35a2efea22ce84", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/30a7cd70d0f190e5017fd029ce35a2efea22ce84", "committedDate": "2020-05-19T00:35:40Z", "message": "DHFPROD-4674: Add hub-central-writer role"}, "afterCommit": {"oid": "5f81a10bd4f6a70ce614c9e3b0575e62a19ae93d", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/5f81a10bd4f6a70ce614c9e3b0575e62a19ae93d", "committedDate": "2020-05-19T01:25:18Z", "message": "DHFPROD-4674: Add hub-central-writer role\n\nDHFPROD-4674: enhancing test per test plan"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MDQxOTcz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#pullrequestreview-414041973", "createdAt": "2020-05-19T01:33:29Z", "commit": {"oid": "5f81a10bd4f6a70ce614c9e3b0575e62a19ae93d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MDU3NjYy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#pullrequestreview-414057662", "createdAt": "2020-05-19T02:25:14Z", "commit": {"oid": "5f81a10bd4f6a70ce614c9e3b0575e62a19ae93d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwMjoyNToxNFrOGXNmAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwMjoyNjowNVrOGXNm9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk5MzE1Mw==", "bodyText": "I think data-hub-developer should gain the data-hub:writeMapping privilege, which then means we don't have to modify these users or the cypress users that already have data-hub-developer. That privilege can then be used in xdmp.securityAssert calls in the DS endpoints.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#discussion_r426993153", "createdAt": "2020-05-19T02:25:14Z", "author": {"login": "rjrudin"}, "path": "examples/reference-entity-model/src/main/ml-config/security/users/hub-developer.json", "diffHunk": "@@ -4,6 +4,7 @@\n   \"password\": \"%%testPassword%%\",\n   \"role\": [\n     \"data-hub-developer\",\n-    \"hub-central-user\"\n+    \"hub-central-user\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f81a10bd4f6a70ce614c9e3b0575e62a19ae93d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk5MzM5Ng==", "bodyText": "I am wondering if this role should gain the data-hub:writeMapping privilege. Then we don't even need to modify data-hub-developer. It would seem surprising if this role doesn't inherit that privilege - thoughts?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#discussion_r426993396", "createdAt": "2020-05-19T02:26:05Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/hub-internal-config/security/roles/data-hub-mapping-writer.json", "diffHunk": "@@ -1,4 +1,5 @@\n {\n   \"role-name\": \"data-hub-mapping-writer\",\n-  \"description\": \"Permits updating mapping documents\"\n+  \"description\": \"Permits updating mapping documents\",\n+  \"privilege\": []", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f81a10bd4f6a70ce614c9e3b0575e62a19ae93d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NjkyOTQ2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#pullrequestreview-414692946", "createdAt": "2020-05-19T17:59:10Z", "commit": {"oid": "5f81a10bd4f6a70ce614c9e3b0575e62a19ae93d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44b3b28eaceee0bc85dacd67db184e9820a88b3c", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/44b3b28eaceee0bc85dacd67db184e9820a88b3c", "committedDate": "2020-05-19T22:11:12Z", "message": "DHFPROD-4674: Add hub-central-writer role"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5f81a10bd4f6a70ce614c9e3b0575e62a19ae93d", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/5f81a10bd4f6a70ce614c9e3b0575e62a19ae93d", "committedDate": "2020-05-19T01:25:18Z", "message": "DHFPROD-4674: Add hub-central-writer role\n\nDHFPROD-4674: enhancing test per test plan"}, "afterCommit": {"oid": "44b3b28eaceee0bc85dacd67db184e9820a88b3c", "author": {"user": {"login": "ryanjdew", "name": "Ryan Dew"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/44b3b28eaceee0bc85dacd67db184e9820a88b3c", "committedDate": "2020-05-19T22:11:12Z", "message": "DHFPROD-4674: Add hub-central-writer role"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0ODg4NTgx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#pullrequestreview-414888581", "createdAt": "2020-05-19T23:19:46Z", "commit": {"oid": "44b3b28eaceee0bc85dacd67db184e9820a88b3c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0ODg5MzU5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3969#pullrequestreview-414889359", "createdAt": "2020-05-19T23:21:44Z", "commit": {"oid": "44b3b28eaceee0bc85dacd67db184e9820a88b3c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2931, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}