{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExMTkzMTQ2", "number": 4779, "title": "DHFPROD-5997: Can now exclude items already processed by a step", "bodyText": "Description\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database.\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-10-28T00:18:58Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4779", "merged": true, "mergeCommit": {"oid": "e8699b2af0a933c817b2471debbcbbab37150314"}, "closed": true, "closedAt": "2020-10-28T16:43:24Z", "author": {"login": "rjrudin"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWy6Z8gBqjM5Mjg4ODAwODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXAVeagFqTUxODg3MDAxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2b69581f065e12f3f63f85dd422e17da11cec1b", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b2b69581f065e12f3f63f85dd422e17da11cec1b", "committedDate": "2020-10-28T00:17:17Z", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database."}, "afterCommit": {"oid": "2ed7805a559bc5b6a3f67fc0769d639ee2c98fbb", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/2ed7805a559bc5b6a3f67fc0769d639ee2c98fbb", "committedDate": "2020-10-28T01:02:30Z", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MzA0ODEw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4779#pullrequestreview-518304810", "createdAt": "2020-10-28T03:48:26Z", "commit": {"oid": "2ed7805a559bc5b6a3f67fc0769d639ee2c98fbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMzo0ODoyN1rOHpZBlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwMzo0ODoyN1rOHpZBlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE2MzY2OQ==", "bodyText": "Another option here is options.excludeAlreadyProcessed && xs.boolean(options.excludeAlreadyProcessed)", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4779#discussion_r513163669", "createdAt": "2020-10-28T03:48:27Z", "author": {"login": "ryanjdew"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/flow.sjs", "diffHunk": "@@ -139,6 +139,12 @@ class Flow {\n     let uris = null;\n     if (options.uris) {\n       uris = this.datahub.hubUtils.normalizeToArray(options.uris);\n+\n+      if (true === options.excludeAlreadyProcessed || \"true\" === options.excludeAlreadyProcessed) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ed7805a559bc5b6a3f67fc0769d639ee2c98fbb"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ed7805a559bc5b6a3f67fc0769d639ee2c98fbb", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/2ed7805a559bc5b6a3f67fc0769d639ee2c98fbb", "committedDate": "2020-10-28T01:02:30Z", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database."}, "afterCommit": {"oid": "5acef676cfc5d4c44e51526a1e37b0fd9d7f3fe1", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/5acef676cfc5d4c44e51526a1e37b0fd9d7f3fe1", "committedDate": "2020-10-28T12:42:27Z", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213", "committedDate": "2020-10-28T12:44:02Z", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5acef676cfc5d4c44e51526a1e37b0fd9d7f3fe1", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/5acef676cfc5d4c44e51526a1e37b0fd9d7f3fe1", "committedDate": "2020-10-28T12:42:27Z", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database."}, "afterCommit": {"oid": "f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213", "committedDate": "2020-10-28T12:44:02Z", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4ODY3Nzkw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4779#pullrequestreview-518867790", "createdAt": "2020-10-28T16:39:41Z", "commit": {"oid": "f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4ODY5ODc4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4779#pullrequestreview-518869878", "createdAt": "2020-10-28T16:40:49Z", "commit": {"oid": "f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4ODcwMDEx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4779#pullrequestreview-518870011", "createdAt": "2020-10-28T16:40:57Z", "commit": {"oid": "f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1826, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}