{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUyNzQ2Mzcw", "number": 4236, "title": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-07-19T20:03:18Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236", "merged": true, "mergeCommit": {"oid": "57d588d75b959e30a1427e67276c993078570733"}, "closed": true, "closedAt": "2020-07-22T22:33:53Z", "author": {"login": "AkshayBajajML"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2itA-ABqjM1NjMwNTcwMTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3iV3FAFqTQ1MzcyMTc5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "832504704968ac9fc41c0c075ba101d16ad9ade5", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/832504704968ac9fc41c0c075ba101d16ad9ade5", "committedDate": "2020-07-19T19:47:18Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}, "afterCommit": {"oid": "d8cfeb0421051c3fdd367a051aa99afe1d9f7ac5", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/d8cfeb0421051c3fdd367a051aa99afe1d9f7ac5", "committedDate": "2020-07-19T20:01:47Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d8cfeb0421051c3fdd367a051aa99afe1d9f7ac5", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/d8cfeb0421051c3fdd367a051aa99afe1d9f7ac5", "committedDate": "2020-07-19T20:01:47Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}, "afterCommit": {"oid": "b4c8857e05a8fd88aef4a78d4c3b8b9724530080", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b4c8857e05a8fd88aef4a78d4c3b8b9724530080", "committedDate": "2020-07-19T20:06:49Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b4c8857e05a8fd88aef4a78d4c3b8b9724530080", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b4c8857e05a8fd88aef4a78d4c3b8b9724530080", "committedDate": "2020-07-19T20:06:49Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}, "afterCommit": {"oid": "7f9bcb52adbf876eca35526be87d55de5b7dd0a3", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/7f9bcb52adbf876eca35526be87d55de5b7dd0a3", "committedDate": "2020-07-19T20:19:48Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxOTMxMDQy", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#pullrequestreview-451931042", "createdAt": "2020-07-20T20:22:20Z", "commit": {"oid": "7f9bcb52adbf876eca35526be87d55de5b7dd0a3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxOTc5NDcz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#pullrequestreview-451979473", "createdAt": "2020-07-20T21:41:33Z", "commit": {"oid": "7f9bcb52adbf876eca35526be87d55de5b7dd0a3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTo0MTozM1rOG0gRbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQyMTo0MTozM1rOG0gRbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcwNzg4Ng==", "bodyText": "@AkshayBajajML instead of having the name as callback function, could you name the function with what it exactly does", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#discussion_r457707886", "createdAt": "2020-07-20T21:41:33Z", "author": {"login": "Sanjeevani19"}, "path": "marklogic-data-hub-central/ui/src/components/sidebar/sidebar.tsx", "diffHunk": "@@ -380,15 +382,18 @@ const Sidebar: React.FC<Props> = (props) => {\n     borderBottom: 'none',\n     backgroundColor: '#F1F2F5'\n   }\n-\n+     const callback = (key) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f9bcb52adbf876eca35526be87d55de5b7dd0a3"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f9bcb52adbf876eca35526be87d55de5b7dd0a3", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/7f9bcb52adbf876eca35526be87d55de5b7dd0a3", "committedDate": "2020-07-19T20:19:48Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}, "afterCommit": {"oid": "936727465ff0305f3b9466ce45838285d1e8978d", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/936727465ff0305f3b9466ce45838285d1e8978d", "committedDate": "2020-07-21T18:16:20Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "936727465ff0305f3b9466ce45838285d1e8978d", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/936727465ff0305f3b9466ce45838285d1e8978d", "committedDate": "2020-07-21T18:16:20Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}, "afterCommit": {"oid": "63c1db7d276f9035f51a1607d067d4c141bf62fd", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/63c1db7d276f9035f51a1607d067d4c141bf62fd", "committedDate": "2020-07-21T18:22:20Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNzI5NzI2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#pullrequestreview-452729726", "createdAt": "2020-07-21T18:38:06Z", "commit": {"oid": "63c1db7d276f9035f51a1607d067d4c141bf62fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxODozODowNlrOG1E-EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxODozODowNlrOG1E-EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwOTEzNg==", "bodyText": "is it expected for hub-properties to be collapsed when an entity is selected?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#discussion_r458309136", "createdAt": "2020-07-21T18:38:06Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/sidebar/sidebar-rtl.test.tsx", "diffHunk": "@@ -35,12 +34,44 @@ describe(\"Sidebar createdOn face time window dropdown\", () => {\n             facetRender = {jest.fn()}\n             checkFacetRender = {jest.fn()}\n         />);\n-        userEvent.click(getByText('Hub Properties'));\n         expect(getByText(\"Select time\")).toBeInTheDocument();\n         userEvent.click(getByText('select time'));\n         expect(getByText(\"Custom\")).toBeInTheDocument();\n         fireEvent.click(getByText(\"Custom\"));\n         expect(getByPlaceholderText(\"Start date\")).toBeInTheDocument();\n         expect(getByPlaceholderText(\"End date\")).toBeInTheDocument();\n     });\n-});\n\\ No newline at end of file\n+\n+    test('Verify that hub properties is expanded by default', () => {\n+        const parsedModelData = entityFromJSON(modelResponse);\n+        const entityDefArray = entityParser(parsedModelData);\n+        const { getByText,querySelector } = render(<Sidebar\n+            entityDefArray={entityDefArray}\n+            facets={searchPayloadFacets}\n+            selectedEntities={[]}\n+            facetRender = {jest.fn()}\n+            checkFacetRender = {jest.fn()}\n+        />);\n+        expect(document.querySelector('#hub-properties div')).toHaveAttribute('aria-expanded','true');\n+        userEvent.click(getByText('Hub Properties'));\n+        expect(document.querySelector('#hub-properties div')).toHaveAttribute('aria-expanded','false');\n+    });\n+\n+    test('Verify that entity properties is expanded when entity is selected', () => {\n+        const parsedModelData = entityFromJSON(modelResponse);\n+        const entityDefArray = entityParser(parsedModelData);\n+        const { getByText,querySelector } = render(<Sidebar\n+            entityDefArray={entityDefArray}\n+            facets={searchPayloadFacets}\n+            selectedEntities={['Customer']}\n+            facetRender = {jest.fn()}\n+            checkFacetRender = {jest.fn()}\n+        />);\n+        expect(document.querySelector('#entity-properties div')).toHaveAttribute('aria-expanded','true');\n+        expect(document.querySelector('#hub-properties div')).toHaveAttribute('aria-expanded','false');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63c1db7d276f9035f51a1607d067d4c141bf62fd"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNzMzNzAw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#pullrequestreview-452733700", "createdAt": "2020-07-21T18:43:39Z", "commit": {"oid": "63c1db7d276f9035f51a1607d067d4c141bf62fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxODo0MzozOVrOG1FKgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxODo0MzozOVrOG1FKgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMxMjMyMw==", "bodyText": "entityProperties dont show up when \"All Entities\" is selected. So I think it is safe to say\nprops.selectedEntities.length === 0 ? setActiveKey(['hubProperties']) : setActiveKey(['entityProperties']);", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#discussion_r458312323", "createdAt": "2020-07-21T18:43:39Z", "author": {"login": "bsrikan"}, "path": "marklogic-data-hub-central/ui/src/components/sidebar/sidebar.tsx", "diffHunk": "@@ -44,9 +44,11 @@ const Sidebar: React.FC<Props> = (props) => {\n   let integers = ['int', 'integer', 'short', 'long'];\n   let decimals = ['decimal', 'double', 'float'];\n   const dateRangeOptions = ['Today', 'This Week', 'This Month', 'Custom'];\n+  const [activeKey, setActiveKey] = useState<any[]>([]);\n \n   useEffect(() => {\n     if (props.facets) {\n+      props.selectedEntities.length === 0 ? setActiveKey(['entityProperties','hubProperties']) : setActiveKey(['entityProperties']);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63c1db7d276f9035f51a1607d067d4c141bf62fd"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63c1db7d276f9035f51a1607d067d4c141bf62fd", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/63c1db7d276f9035f51a1607d067d4c141bf62fd", "committedDate": "2020-07-21T18:22:20Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}, "afterCommit": {"oid": "39e783eab653fbaeaa7121f030bb231679678f73", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/39e783eab653fbaeaa7121f030bb231679678f73", "committedDate": "2020-07-21T19:10:27Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNzU1NDIz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#pullrequestreview-452755423", "createdAt": "2020-07-21T19:14:53Z", "commit": {"oid": "39e783eab653fbaeaa7121f030bb231679678f73"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyODQ2MzYw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#pullrequestreview-452846360", "createdAt": "2020-07-21T21:34:36Z", "commit": {"oid": "39e783eab653fbaeaa7121f030bb231679678f73"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dc9e2abaab59213d6993dc32df06a64c1c0996d", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/1dc9e2abaab59213d6993dc32df06a64c1c0996d", "committedDate": "2020-07-22T18:52:21Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39e783eab653fbaeaa7121f030bb231679678f73", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/39e783eab653fbaeaa7121f030bb231679678f73", "committedDate": "2020-07-21T19:10:27Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}, "afterCommit": {"oid": "1dc9e2abaab59213d6993dc32df06a64c1c0996d", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/1dc9e2abaab59213d6993dc32df06a64c1c0996d", "committedDate": "2020-07-22T18:52:21Z", "message": "DHFPROD-5392: Make \"Hub Properties\" expanded by default in \"all entities\" results view side-pane under Explorer tile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNzE1OTI5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#pullrequestreview-453715929", "createdAt": "2020-07-22T22:00:30Z", "commit": {"oid": "1dc9e2abaab59213d6993dc32df06a64c1c0996d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNzIxNzkw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4236#pullrequestreview-453721790", "createdAt": "2020-07-22T22:12:34Z", "commit": {"oid": "1dc9e2abaab59213d6993dc32df06a64c1c0996d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2392, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}