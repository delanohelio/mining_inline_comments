{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3NzI0OTAw", "number": 4744, "title": "DHFPROD-6095: Fixing Spark connector so it runs on DHF 5.2.x", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-10-21T17:17:24Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4744", "merged": true, "mergeCommit": {"oid": "b01503167e836daf2e10883c3151a15f0357372e"}, "closed": true, "closedAt": "2020-10-22T19:14:00Z", "author": {"login": "rjrudin"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUwy4CAFqTUxMzk5ODQ2Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVFr6WAFqTUxNDk3NTYyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzOTk4NDYz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4744#pullrequestreview-513998463", "createdAt": "2020-10-21T17:26:35Z", "commit": {"oid": "b1a314d31f015d2124e3155cb8bcde27aee5eade"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNzoyNjozNVrOHl30tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNzoyNjozNVrOHl30tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ3Mzk3Mg==", "bodyText": "We will not be able to get temporal collections and the docs will be written to regular collections, but that's what happens in 5.2.x anyways but will this not ensure that writing temporal docs doesn't work for dh-operator in 5.3.0 as well ?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4744#discussion_r509473972", "createdAt": "2020-10-21T17:26:35Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/marklogic-data-hub-spark-connector/bulkIngester.sjs", "diffHunk": "@@ -30,22 +30,22 @@ const HubUtils = require(\"/data-hub/5/impl/hub-utils.sjs\");\n const state = fn.head(xdmp.fromJSON(endpointState));\n \n const temporal = require(\"/MarkLogic/temporal.xqy\");\n-const temporalLib = require(\"/data-hub/5/temporal/hub-temporal.sjs\");\n \n const work = fn.head(xdmp.fromJSON(workUnit));\n \n const uriPrefix = work.uriprefix != null ? work.uriprefix : \"\";\n \n const collections = work.collections != null ? work.collections.split(',') : [];\n-const temporalCollections = temporalLib.getTemporalCollections().toArray().reduce((acc, col) => {\n+\n+const temporalCollections = temporal.collections().toArray().reduce((acc, col) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1a314d31f015d2124e3155cb8bcde27aee5eade"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MDM1NTAw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4744#pullrequestreview-514035500", "createdAt": "2020-10-21T17:58:52Z", "commit": {"oid": "b1a314d31f015d2124e3155cb8bcde27aee5eade"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MjQxNTU4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4744#pullrequestreview-514241558", "createdAt": "2020-10-21T22:44:18Z", "commit": {"oid": "b1a314d31f015d2124e3155cb8bcde27aee5eade"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b1a314d31f015d2124e3155cb8bcde27aee5eade", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/b1a314d31f015d2124e3155cb8bcde27aee5eade", "committedDate": "2020-10-21T17:15:16Z", "message": "DHFPROD-6095: Fixing Spark connector so it runs on DHF 5.2.x"}, "afterCommit": {"oid": "49fd3292983e85cfee6ec813573e7f3d8e5a231a", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/49fd3292983e85cfee6ec813573e7f3d8e5a231a", "committedDate": "2020-10-22T13:02:52Z", "message": "DHFPROD-6095: Fixing Spark connector so it runs on DHF 5.2.x"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c81e27cd986cf0ba53087a306d610bda4bc03f92", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/c81e27cd986cf0ba53087a306d610bda4bc03f92", "committedDate": "2020-10-22T13:03:09Z", "message": "DHFPROD-6095: Fixing Spark connector so it runs on DHF 5.2.x"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49fd3292983e85cfee6ec813573e7f3d8e5a231a", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/49fd3292983e85cfee6ec813573e7f3d8e5a231a", "committedDate": "2020-10-22T13:02:52Z", "message": "DHFPROD-6095: Fixing Spark connector so it runs on DHF 5.2.x"}, "afterCommit": {"oid": "c81e27cd986cf0ba53087a306d610bda4bc03f92", "author": {"user": {"login": "rjrudin", "name": null}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/c81e27cd986cf0ba53087a306d610bda4bc03f92", "committedDate": "2020-10-22T13:03:09Z", "message": "DHFPROD-6095: Fixing Spark connector so it runs on DHF 5.2.x"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0OTM4NTc5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4744#pullrequestreview-514938579", "createdAt": "2020-10-22T17:00:35Z", "commit": {"oid": "c81e27cd986cf0ba53087a306d610bda4bc03f92"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0OTU3NjA4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4744#pullrequestreview-514957608", "createdAt": "2020-10-22T17:24:03Z", "commit": {"oid": "c81e27cd986cf0ba53087a306d610bda4bc03f92"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0OTc1NjI3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4744#pullrequestreview-514975627", "createdAt": "2020-10-22T17:47:08Z", "commit": {"oid": "c81e27cd986cf0ba53087a306d610bda4bc03f92"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1774, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}