{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NTAyMjU4", "number": 4105, "title": "DHFPROD-4970: add validate entity field to mapping step", "bodyText": "Description\nChecklist:\n- Note: do not change the below\n\n\nOwner:\n\n\n JIRA_ID included in all the commit messages\n\n\n PR title is in the format JIRA_ID:Title\n\n\n Rebase the branch with upstream\n\n\n Squashed all commits into a single commit\n\n\n Added Tests\n\n\nReviewer:\n\n\n Reviewed Tests", "createdAt": "2020-06-16T22:34:32Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105", "merged": true, "mergeCommit": {"oid": "36e214fb1e501034fb0297a7ba82fa5601829884"}, "closed": true, "closedAt": "2020-06-22T20:59:59Z", "author": {"login": "AkshayBajajML"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr9TGlABqjM0NTExNDI3Njc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcs7X8TAFqTQzNDM3NTk0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a39e53d4b009c8edc401bee44b63a4c37cc07743", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/a39e53d4b009c8edc401bee44b63a4c37cc07743", "committedDate": "2020-06-16T21:24:31Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}, "afterCommit": {"oid": "65b5461817b40cc28022fde94bbb0e28e00f8a41", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/65b5461817b40cc28022fde94bbb0e28e00f8a41", "committedDate": "2020-06-16T22:49:01Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxOTUxODA2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#pullrequestreview-431951806", "createdAt": "2020-06-16T23:08:15Z", "commit": {"oid": "65b5461817b40cc28022fde94bbb0e28e00f8a41"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMzowODoxNVrOGkwKGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMzowODoxNVrOGkwKGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE5MDkzOA==", "bodyText": "Can't we get the default value for 'validateEntity' from backend only, instead of UI figuring it out based on its value in the API response. We can set it in UI as well but we need to be sure that its value will be 'false' in the response only the first time when the step is created.\nIt will be a bit cleaner to just set its default value in backend where the settings object is created for any step. Then UI will only care about the its value in the GET response.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#discussion_r441190938", "createdAt": "2020-06-16T23:08:15Z", "author": {"login": "xnikhil08"}, "path": "marklogic-data-hub-central/ui/src/components/advanced-settings/advanced-settings-dialog.tsx", "diffHunk": "@@ -179,6 +185,7 @@ const AdvancedSettingsDialog = (props) => {\n           setTargetPermissions(response.data.permissions);\n           setTargetFormat(response.data.targetFormat);\n           setProvGranularity(response.data.provenanceGranularityLevel);\n+          response.data.validateEntity === false ? setValidateEntity(defaultValidateEntity):setValidateEntity(response.data.validateEntity) ;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65b5461817b40cc28022fde94bbb0e28e00f8a41"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxOTc2OTQ1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#pullrequestreview-431976945", "createdAt": "2020-06-17T00:22:05Z", "commit": {"oid": "65b5461817b40cc28022fde94bbb0e28e00f8a41"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65b5461817b40cc28022fde94bbb0e28e00f8a41", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/65b5461817b40cc28022fde94bbb0e28e00f8a41", "committedDate": "2020-06-16T22:49:01Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}, "afterCommit": {"oid": "75ab8f04a461d3d8e4ff3a2f95777de0d9ae3e9c", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/75ab8f04a461d3d8e4ff3a2f95777de0d9ae3e9c", "committedDate": "2020-06-17T22:28:28Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNDY0ODc3", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#pullrequestreview-433464877", "createdAt": "2020-06-18T16:43:29Z", "commit": {"oid": "75ab8f04a461d3d8e4ff3a2f95777de0d9ae3e9c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNjo0MzozMFrOGl3rkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNzowMTo0M1rOGl4Vew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2Mjc3MA==", "bodyText": "You shouldn't change these files. These are generated by running generateJsonSchema2Pojo gradle task . If you want this changed, you will have to update schema and run this task.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#discussion_r442362770", "createdAt": "2020-06-18T16:43:30Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub-central/src/main/java/com/marklogic/hub/central/schemas/StepSchema.java", "diffHunk": "@@ -81,32 +81,32 @@\n     private String stepDefinitionName;\n     /**\n      * Optional description fo the step\n-     * \n+     *\n      */\n     @JsonProperty(\"description\")\n     @JsonPropertyDescription(\"Optional description fo the step\")\n     private String description;\n     /**\n      * This is generated on the server-side\n-     * \n+     *\n      */\n     @JsonProperty(\"stepId\")\n     @JsonPropertyDescription(\"This is generated on the server-side\")\n     private String stepId;\n     /**\n      * Any properties in this object will be copied into the headers of each document processed by the step\n-     * \n+     *\n      */\n     @JsonProperty(\"headers\")\n     @JsonPropertyDescription(\"Any properties in this object will be copied into the headers of each document processed by the step\")\n     private Headers headers;\n     /**\n      * Applicable to mapping steps only\n-     * \n+     *\n      */\n     @JsonProperty(\"validateEntity\")\n     @JsonPropertyDescription(\"Applicable to mapping steps only\")\n-    private Boolean validateEntity;\n+    private String validateEntity;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75ab8f04a461d3d8e4ff3a2f95777de0d9ae3e9c"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2MzIzMw==", "bodyText": "same comment as earlier for all the edits made in this file", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#discussion_r442363233", "createdAt": "2020-06-18T16:44:17Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub-central/src/main/java/com/marklogic/hub/central/schemas/StepSchema.java", "diffHunk": "@@ -332,19 +332,19 @@ public void setHeaders(Headers headers) {\n \n     /**\n      * Applicable to mapping steps only\n-     * \n+     *\n      */\n     @JsonProperty(\"validateEntity\")\n-    public Boolean getValidateEntity() {\n+    public String getValidateEntity() {\n         return validateEntity;\n     }\n \n     /**\n      * Applicable to mapping steps only\n-     * \n+     *\n      */\n     @JsonProperty(\"validateEntity\")\n-    public void setValidateEntity(Boolean validateEntity) {\n+    public void setValidateEntity(String validateEntity) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75ab8f04a461d3d8e4ff3a2f95777de0d9ae3e9c"}, "originalPosition": 288}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM3MTU3Nw==", "bodyText": "Can you add a test to ensure that tooltip shows up fine in the UI ?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#discussion_r442371577", "createdAt": "2020-06-18T16:58:16Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub-central/ui/src/components/advanced-settings/advanced-settings-dialog.test.tsx", "diffHunk": "@@ -137,6 +142,13 @@ describe('Advanced Step Settings dialog', () => {\n     fireEvent.select(provOptions[1]);\n     expect(getByText('Off')).toBeInTheDocument();\n \n+    //Verifying entity validation options select field\n+    fireEvent.click(getByText('Do not validate'));\n+    const entValOptions = getAllByTestId('entityValOpts').map(li => li);\n+    expect(entValOptions.map(li => li.textContent).toString()).toEqual('Do not validate,Store validation errors in entity headers,Skip documents with validation  errors');\n+    fireEvent.select(provOptions[1]);\n+    expect(getByText('Store validation errors in entity headers')).toBeInTheDocument();\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75ab8f04a461d3d8e4ff3a2f95777de0d9ae3e9c"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM3MzQ5OQ==", "bodyText": "I am not sure if \"notValidate\" sounds good for the value of this property.\n@ryanjdew , @rjrudin,\nIs this value good ? , if not, any suggestions for the value for this property ? How does \"none\" sound like ?", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#discussion_r442373499", "createdAt": "2020-06-18T17:01:43Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub/src/main/resources/hub-internal-artifacts/step-definitions/mapping/marklogic/entity-services-mapping.step.json", "diffHunk": "@@ -15,7 +15,7 @@\n       \"default-mapping\",\n       \"mdm-content\"\n     ],\n-    \"validateEntity\": false,\n+    \"validateEntity\": \"notValidate\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75ab8f04a461d3d8e4ff3a2f95777de0d9ae3e9c"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "75ab8f04a461d3d8e4ff3a2f95777de0d9ae3e9c", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/75ab8f04a461d3d8e4ff3a2f95777de0d9ae3e9c", "committedDate": "2020-06-17T22:28:28Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}, "afterCommit": {"oid": "3dba38f20e3a27778e9713dbf7903a0fc9a346a6", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3dba38f20e3a27778e9713dbf7903a0fc9a346a6", "committedDate": "2020-06-18T20:05:34Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjgxMTgw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#pullrequestreview-433681180", "createdAt": "2020-06-18T22:09:55Z", "commit": {"oid": "3dba38f20e3a27778e9713dbf7903a0fc9a346a6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMjowOTo1NlrOGmB2mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQyMjowOTo1NlrOGmB2mQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUyOTQzMw==", "bodyText": "You will have to update the data type in schema json file and the run 'generateJsonSchema2Pojo' task , so that it's updated from Boolean to String", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#discussion_r442529433", "createdAt": "2020-06-18T22:09:56Z", "author": {"login": "srinathgit"}, "path": "marklogic-data-hub-central/src/main/java/com/marklogic/hub/central/schemas/StepSchema.java", "diffHunk": "@@ -332,7 +332,7 @@ public void setHeaders(Headers headers) {\n \n     /**\n      * Applicable to mapping steps only\n-     * \n+     *\n      */\n     @JsonProperty(\"validateEntity\")\n     public Boolean getValidateEntity() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3dba38f20e3a27778e9713dbf7903a0fc9a346a6"}, "originalPosition": 271}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3dba38f20e3a27778e9713dbf7903a0fc9a346a6", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/3dba38f20e3a27778e9713dbf7903a0fc9a346a6", "committedDate": "2020-06-18T20:05:34Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}, "afterCommit": {"oid": "becd28be5530a8602e18d904f3f6444a86496797", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/becd28be5530a8602e18d904f3f6444a86496797", "committedDate": "2020-06-18T23:43:41Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MzQ2ODY2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#pullrequestreview-434346866", "createdAt": "2020-06-19T21:20:45Z", "commit": {"oid": "becd28be5530a8602e18d904f3f6444a86496797"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78380b1a3f4f3b77149040f3e8fbc744e4cd547f", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/78380b1a3f4f3b77149040f3e8fbc744e4cd547f", "committedDate": "2020-06-19T22:54:20Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "becd28be5530a8602e18d904f3f6444a86496797", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/becd28be5530a8602e18d904f3f6444a86496797", "committedDate": "2020-06-18T23:43:41Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}, "afterCommit": {"oid": "78380b1a3f4f3b77149040f3e8fbc744e4cd547f", "author": {"user": {"login": "AkshayBajajML", "name": "Akshay Bajaj"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/78380b1a3f4f3b77149040f3e8fbc744e4cd547f", "committedDate": "2020-06-19T22:54:20Z", "message": "DHFPROD-4970: Add Validate entity field to Mapping step"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MzczNjk1", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#pullrequestreview-434373695", "createdAt": "2020-06-19T22:58:04Z", "commit": {"oid": "78380b1a3f4f3b77149040f3e8fbc744e4cd547f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0Mzc1OTQw", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4105#pullrequestreview-434375940", "createdAt": "2020-06-19T23:09:18Z", "commit": {"oid": "78380b1a3f4f3b77149040f3e8fbc744e4cd547f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2803, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}