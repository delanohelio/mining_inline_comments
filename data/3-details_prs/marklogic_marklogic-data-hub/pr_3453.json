{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNjExNDUx", "number": 3453, "title": "DHFPROD-4160: Fixes #3451 by changing and query to or.", "bodyText": "Fixes #3451.", "createdAt": "2020-01-10T20:32:34Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3453", "merged": true, "mergeCommit": {"oid": "2bdacc09b0e0c582996de8dd0a75ee78cc7edc9f"}, "closed": true, "closedAt": "2020-01-21T22:38:13Z", "author": {"login": "crism"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5E7KLgFqTM0MTQxNTgxOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8ooO8AFqTM0NjIyNzM1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNDE1ODE4", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3453#pullrequestreview-341415818", "createdAt": "2020-01-10T20:52:51Z", "commit": {"oid": "149e3271dda819adf739783427f786aef342f0f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMDo1Mjo1MVrOFcf0HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQyMDo1Mjo1MVrOFcf0HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyNTY5Mw==", "bodyText": "@ryanjdew I don't know enough to know the impact here. Thoughts?\nI see that the code prior to the latest change was this:\nreturn\n        if (fn:count($queries) gt 1) then\n          helper-impl:group-queries-by-scope($queries, cts:and-query#1)\n        else\n          $queries\n\nAnd is now this:\nreturn\n        let $queries := if (fn:count($queries) gt 1) then\n          helper-impl:group-queries-by-scope($queries, cts:and-query#1)\n        else\n          $queries\n        return\n          if (fn:count($queries) gt 1) then\n            cts:and-query($queries)\n          else\n            $queries\n\nSo this looks like a new line of code. I just don't know whether \"or\" or \"and\" is the right choice here.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3453#discussion_r365425693", "createdAt": "2020-01-10T20:52:51Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/com.marklogic.smart-mastering/matcher-impl/matcher-impl.xqy", "diffHunk": "@@ -303,7 +303,7 @@ declare function match-impl:find-document-matches-by-options(\n           $queries\n         return\n           if (fn:count($queries) gt 1) then\n-            cts:and-query($queries)\n+            cts:or-query($queries)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "149e3271dda819adf739783427f786aef342f0f3"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "149e3271dda819adf739783427f786aef342f0f3", "author": {"user": {"login": "crism", "name": "Chris Maden"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/149e3271dda819adf739783427f786aef342f0f3", "committedDate": "2020-01-10T20:28:10Z", "message": "Fixes #3451 by changing and query to or."}, "afterCommit": {"oid": "4cc523d690b72e264ddf8cb4708a8f626b0503d3", "author": {"user": {"login": "crism", "name": "Chris Maden"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/4cc523d690b72e264ddf8cb4708a8f626b0503d3", "committedDate": "2020-01-17T20:04:06Z", "message": "DHFPROD-4160: Fixes #3451 by changing and query to or."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4cc523d690b72e264ddf8cb4708a8f626b0503d3", "author": {"user": {"login": "crism", "name": "Chris Maden"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/4cc523d690b72e264ddf8cb4708a8f626b0503d3", "committedDate": "2020-01-17T20:04:06Z", "message": "DHFPROD-4160: Fixes #3451 by changing and query to or."}, "afterCommit": {"oid": "11e7c8073ea2b8074d00a6b001353dcc939651f5", "author": {"user": {"login": "crism", "name": "Chris Maden"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/11e7c8073ea2b8074d00a6b001353dcc939651f5", "committedDate": "2020-01-17T20:12:57Z", "message": "DHFPROD-4160: Fixes #3451 by changing and query to or."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "11e7c8073ea2b8074d00a6b001353dcc939651f5", "author": {"user": {"login": "crism", "name": "Chris Maden"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/11e7c8073ea2b8074d00a6b001353dcc939651f5", "committedDate": "2020-01-17T20:12:57Z", "message": "DHFPROD-4160: Fixes #3451 by changing and query to or."}, "afterCommit": {"oid": "d2fccf0d3ebb998f763ff37a7427477a85abed9a", "author": {"user": {"login": "crism", "name": "Chris Maden"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/d2fccf0d3ebb998f763ff37a7427477a85abed9a", "committedDate": "2020-01-17T20:14:05Z", "message": "DHFPROD-4160: Fixes #3451 by changing and query to or."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0OTA1MDk0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3453#pullrequestreview-344905094", "createdAt": "2020-01-18T00:23:01Z", "commit": {"oid": "edbf5057d46a327be8d6db320e4bd8133cfe47b0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1NTY3MDMx", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3453#pullrequestreview-345567031", "createdAt": "2020-01-20T23:10:36Z", "commit": {"oid": "fdf9a2f7e0f98cb60514204f567901f357e645ee"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da60324e9314fd0d3db8824fe6a74a0b4a01fdcd", "author": {"user": {"login": "crism", "name": "Chris Maden"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/da60324e9314fd0d3db8824fe6a74a0b4a01fdcd", "committedDate": "2020-01-21T20:03:21Z", "message": "DHFPROD-4160: Fixes #3451 by changing and query to or."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fdf9a2f7e0f98cb60514204f567901f357e645ee", "author": {"user": {"login": "crism", "name": "Chris Maden"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/fdf9a2f7e0f98cb60514204f567901f357e645ee", "committedDate": "2020-01-20T17:28:45Z", "message": "Merge branch 'develop' into bugfix/issue-3451"}, "afterCommit": {"oid": "da60324e9314fd0d3db8824fe6a74a0b4a01fdcd", "author": {"user": {"login": "crism", "name": "Chris Maden"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/da60324e9314fd0d3db8824fe6a74a0b4a01fdcd", "committedDate": "2020-01-21T20:03:21Z", "message": "DHFPROD-4160: Fixes #3451 by changing and query to or."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MTU2MDk2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3453#pullrequestreview-346156096", "createdAt": "2020-01-21T20:05:11Z", "commit": {"oid": "fdf9a2f7e0f98cb60514204f567901f357e645ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MjI3MzU2", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3453#pullrequestreview-346227356", "createdAt": "2020-01-21T22:10:32Z", "commit": {"oid": "da60324e9314fd0d3db8824fe6a74a0b4a01fdcd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2335, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}