{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5ODkzMDA2", "number": 3614, "title": "DHFPROD-4308: add/modify test cases for mapping artifact api ", "bodyText": "", "createdAt": "2020-02-26T00:00:20Z", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614", "merged": true, "mergeCommit": {"oid": "592334c8dd0222c1b5e6e915ac1bae01d2219e91"}, "closed": true, "closedAt": "2020-02-26T15:02:50Z", "author": {"login": "SameeraPriyathamTadikonda"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH19E9AH2gAyMzc5ODkzMDA2OmZjZTdkNTYxMTIxNjg0ZjE4YjQzNDM0YjkwYzQ2NmJmN2NlOWFiMmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIGFcPgFqTM2NDg2NTk4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fce7d561121684f18b43434b90c466bf7ce9ab2e", "author": {"user": {"login": "hao1st", "name": "Hao Liu"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/fce7d561121684f18b43434b90c466bf7ce9ab2e", "committedDate": "2020-02-25T17:55:14Z", "message": "DHFPROD-4308: add/modify test cases for mapping artifact api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e33a5360c797777aa4fc1989591053b4711c8a9f", "author": {"user": {"login": "hao1st", "name": "Hao Liu"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/e33a5360c797777aa4fc1989591053b4711c8a9f", "committedDate": "2020-02-25T17:55:14Z", "message": "DHFPROD-4308: rename from getEntityNames to getEntityTitles"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NTc1OTAz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614#pullrequestreview-364575903", "createdAt": "2020-02-26T01:52:35Z", "commit": {"oid": "e33a5360c797777aa4fc1989591053b4711c8a9f"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NTg0NzA5", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614#pullrequestreview-364584709", "createdAt": "2020-02-26T02:22:45Z", "commit": {"oid": "e33a5360c797777aa4fc1989591053b4711c8a9f"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwMjoyMjo0NlrOFucScw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwMjoyNToxMVrOFucU5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI0MjI5MQ==", "bodyText": "This is fine here - just an FYI, we'll soon have a library for functions pertaining to entity models, and this will be refactored to use that library.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614#discussion_r384242291", "createdAt": "2020-02-26T02:22:46Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/artifacts/core.sjs", "diffHunk": "@@ -249,7 +249,7 @@ function deleteArtifactSettings(artifactType, artifactName, artifactVersion = 'l\n     return { success: true };\n }\n \n-function getEntityNames() {\n+function getEntityTitles() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e33a5360c797777aa4fc1989591053b4711c8a9f"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI0Mjg1Nw==", "bodyText": "You don't need to do this - just toss the content into a file under ./test-data/entities in the test file directory, and then call hub-test:load-entities($test:CALLER_FILE) (search for references to that for an example).\nThough I did notice you're writing to staging - any reason for that? We usually run the unit tests against the final app server.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614#discussion_r384242857", "createdAt": "2020-02-26T02:24:55Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/test/ml-modules/root/test/suites/data-hub/5/data-services/artifacts/suiteSetup.sjs", "diffHunk": "@@ -0,0 +1,35 @@\n+const DataHubSingleton = require('/data-hub/5/datahub-singleton.sjs');\n+const dataHub = DataHubSingleton.instance();\n+\n+const permissions = [xdmp.permission('data-hub-entity-model-writer', 'update'), xdmp.permission('data-hub-entity-model-reader', 'read')];\n+\n+dataHub.hubUtils.writeDocument('/entities/TestEntity-NoMappingConfig', {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e33a5360c797777aa4fc1989591053b4711c8a9f"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI0MjkxNw==", "bodyText": "Don't need to do this either, just call hub-test:delete-artifacts($test:CALLER_FILE)", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614#discussion_r384242917", "createdAt": "2020-02-26T02:25:11Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/test/ml-modules/root/test/suites/data-hub/5/data-services/artifacts/suiteTeardown.sjs", "diffHunk": "@@ -0,0 +1,5 @@\n+const DataHubSingleton = require('/data-hub/5/datahub-singleton.sjs');\n+const dataHub = DataHubSingleton.instance();\n+\n+dataHub.hubUtils.deleteDocument('/entities/TestEntity-NoMappingConfig', dataHub.config.STAGINGDATABASE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e33a5360c797777aa4fc1989591053b4711c8a9f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8423c504220ddb333f675a38206c764c6c441d34", "author": {"user": {"login": "hao1st", "name": "Hao Liu"}}, "url": "https://github.com/marklogic/marklogic-data-hub/commit/8423c504220ddb333f675a38206c764c6c441d34", "committedDate": "2020-02-26T06:16:19Z", "message": "DHFPROD-4308: load test data from files and xquery util"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NjY4NzEz", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614#pullrequestreview-364668713", "createdAt": "2020-02-26T07:25:49Z", "commit": {"oid": "8423c504220ddb333f675a38206c764c6c441d34"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0ODY1OTg0", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614#pullrequestreview-364865984", "createdAt": "2020-02-26T12:42:51Z", "commit": {"oid": "8423c504220ddb333f675a38206c764c6c441d34"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2246, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}