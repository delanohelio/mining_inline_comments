{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4Nzc1MTYx", "number": 3870, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjo1ODoxM1rOD1_I6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwMjo0ODo0MVrOD2dScg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3OTM1NTkzOnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubProjectImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjo1ODoxM1rOGLr9EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMjo1ODoxM1rOGLr9EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwNzY2NA==", "bodyText": "Can we test for this file?\ntestInit() in HubProjectTest already performs such a test.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3870#discussion_r414907664", "createdAt": "2020-04-24T22:58:13Z", "author": {"login": "akshaysonvane"}, "path": "marklogic-data-hub/src/main/java/com/marklogic/hub/impl/HubProjectImpl.java", "diffHunk": "@@ -371,6 +371,7 @@ public Path getCustomMappingFunctionsDir() {\n         writeRoleFile(rolesDir, \"data-hub-saved-query-reader.json\");\n         writeRoleFile(rolesDir, \"data-hub-saved-query-writer.json\");\n         writeRoleFile(rolesDir, \"hub-central-downloader.json\");\n+        writeRoleFile(rolesDir, \"hub-central-entity-exporter.json\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4cc7e7356559322ca822e1acfcecbf44f6db07f"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4NDI5NTU0OnYy", "diffSide": "RIGHT", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/security.sjs", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwMjo0ODo0MVrOGMOfvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNToyMjoyMFrOGMo8xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQ3MzU5OA==", "bodyText": "The middle tier endpoint for exporting should then have @secured(\"canExportEntityInstances\") on it. You can use setTestUserRoles to verify that a user with and without the role can access the endpoint.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3870#discussion_r415473598", "createdAt": "2020-04-27T02:48:41Z", "author": {"login": "rjrudin"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/security.sjs", "diffHunk": "@@ -43,6 +43,10 @@ class Security {\n       response.authorities.push('canManageSavedQuery');\n     }\n \n+    if (currentRoleNames.includes('hub-central-entity-exporter')) {\n+      response.authorities.push('canExportEntityInstances');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0608c7f7e66b4694c8e34ea41304f971207365a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUwMzkzNg==", "bodyText": "@akshaysonvane Can you add this in the PR #3862 as you are working on adding the endpoints.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3870#discussion_r415503936", "createdAt": "2020-04-27T04:36:52Z", "author": {"login": "rahulvudutala"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/security.sjs", "diffHunk": "@@ -43,6 +43,10 @@ class Security {\n       response.authorities.push('canManageSavedQuery');\n     }\n \n+    if (currentRoleNames.includes('hub-central-entity-exporter')) {\n+      response.authorities.push('canExportEntityInstances');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQ3MzU5OA=="}, "originalCommit": {"oid": "e0608c7f7e66b4694c8e34ea41304f971207365a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkwNzAxNQ==", "bodyText": "Yes, I'll add that.", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3870#discussion_r415907015", "createdAt": "2020-04-27T15:22:20Z", "author": {"login": "akshaysonvane"}, "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/security.sjs", "diffHunk": "@@ -43,6 +43,10 @@ class Security {\n       response.authorities.push('canManageSavedQuery');\n     }\n \n+    if (currentRoleNames.includes('hub-central-entity-exporter')) {\n+      response.authorities.push('canExportEntityInstances');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQ3MzU5OA=="}, "originalCommit": {"oid": "e0608c7f7e66b4694c8e34ea41304f971207365a"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3450, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}