{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNjc4NjYw", "number": 2752, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOTowNzo0OVrOEcfAWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMDowMToxOFrOEcgTnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4MzAzNTc4OnYy", "diffSide": "RIGHT", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOTowNzo0OVrOHHC-3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwNTozNDo0M1rOHH_ebg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MDk0MQ==", "bodyText": "create a issue to track cache clear in user name update (will be supported in future)", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r477150941", "createdAt": "2020-08-26T09:07:49Z", "author": {"login": "Buddhimah"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "diffHunk": "@@ -12147,6 +12153,11 @@ private void clearUserIDResolverCache(String userID, String userName, UserStore\n                 .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),\n                         RESOLVE_USER_ID_FROM_USER_NAME_CACHE_NAME, tenantId);\n         UserIdResolverCache.getInstance().clearCacheEntry(userID, RESOLVE_USER_NAME_FROM_USER_ID_CACHE_NAME, tenantId);\n+        UserIdResolverCache.getInstance()\n+                .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE2Nzc2OA==", "bodyText": "create an issue to replace usage of LIKE operator used method for getUser method use case", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r477167768", "createdAt": "2020-08-26T09:32:21Z", "author": {"login": "Buddhimah"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "diffHunk": "@@ -12147,6 +12153,11 @@ private void clearUserIDResolverCache(String userID, String userName, UserStore\n                 .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),\n                         RESOLVE_USER_ID_FROM_USER_NAME_CACHE_NAME, tenantId);\n         UserIdResolverCache.getInstance().clearCacheEntry(userID, RESOLVE_USER_NAME_FROM_USER_ID_CACHE_NAME, tenantId);\n+        UserIdResolverCache.getInstance()\n+                .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MDk0MQ=="}, "originalCommit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODEyODEyMg==", "bodyText": "wso2/product-is#9322", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r478128122", "createdAt": "2020-08-27T05:12:18Z", "author": {"login": "Buddhimah"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "diffHunk": "@@ -12147,6 +12153,11 @@ private void clearUserIDResolverCache(String userID, String userName, UserStore\n                 .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),\n                         RESOLVE_USER_ID_FROM_USER_NAME_CACHE_NAME, tenantId);\n         UserIdResolverCache.getInstance().clearCacheEntry(userID, RESOLVE_USER_NAME_FROM_USER_ID_CACHE_NAME, tenantId);\n+        UserIdResolverCache.getInstance()\n+                .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MDk0MQ=="}, "originalCommit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE0MjA2Mg==", "bodyText": "wso2/product-is#9323", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r478142062", "createdAt": "2020-08-27T05:34:43Z", "author": {"login": "Buddhimah"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "diffHunk": "@@ -12147,6 +12153,11 @@ private void clearUserIDResolverCache(String userID, String userName, UserStore\n                 .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),\n                         RESOLVE_USER_ID_FROM_USER_NAME_CACHE_NAME, tenantId);\n         UserIdResolverCache.getInstance().clearCacheEntry(userID, RESOLVE_USER_NAME_FROM_USER_ID_CACHE_NAME, tenantId);\n+        UserIdResolverCache.getInstance()\n+                .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MDk0MQ=="}, "originalCommit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "originalPosition": 90}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4MzI0ODkyOnYy", "diffSide": "RIGHT", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMDowMToxOFrOHHFC3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwNTowOToyMFrOHH-gVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE4NDczMw==", "bodyText": "Need a method comment, explaining what it supposed to do.", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r477184733", "createdAt": "2020-08-26T10:01:18Z", "author": {"login": "ruwanta"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "diffHunk": "@@ -12098,20 +12101,23 @@ public String getUserNameFromUserID(String userID) throws UserStoreException {\n             return ((AbstractUserStoreManager) userStore.getUserStoreManager())\n                     .getUserNameFromUserID(userStore.getDomainFreeUserId());\n         }\n+\n+        if (isUniqueUserIdEnabledInUserStore(userStore)) {\n+            return getUserNameFromCurrentUserStore(userID, userStore);\n+        } else {\n+            return userUniqueIDManger.getUser(userID, this).getDomainQualifiedUsername();\n+        }\n+    }\n+\n+    private String getUserNameFromCurrentUserStore(String userID, UserStore userStore) throws UserStoreException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODEyNjE2Ng==", "bodyText": "done", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r478126166", "createdAt": "2020-08-27T05:09:20Z", "author": {"login": "Buddhimah"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "diffHunk": "@@ -12098,20 +12101,23 @@ public String getUserNameFromUserID(String userID) throws UserStoreException {\n             return ((AbstractUserStoreManager) userStore.getUserStoreManager())\n                     .getUserNameFromUserID(userStore.getDomainFreeUserId());\n         }\n+\n+        if (isUniqueUserIdEnabledInUserStore(userStore)) {\n+            return getUserNameFromCurrentUserStore(userID, userStore);\n+        } else {\n+            return userUniqueIDManger.getUser(userID, this).getDomainQualifiedUsername();\n+        }\n+    }\n+\n+    private String getUserNameFromCurrentUserStore(String userID, UserStore userStore) throws UserStoreException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE4NDczMw=="}, "originalCommit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "originalPosition": 64}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2151, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}