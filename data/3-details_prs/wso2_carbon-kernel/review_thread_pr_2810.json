{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0NTEyMTA4", "number": 2810, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwOToxNTo0NVrOEuY4VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwOToxNjo1OFrOEuY6hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3MDc3NTg5OnYy", "diffSide": "RIGHT", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/jdbc/JDBCUserStoreManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwOToxNTo0NVrOHiwdlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwMzoxMjowMlrOHj5D0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIwNzYzNg==", "bodyText": "Can we add a comment here stating the reason for both logging and throwing the exception?", "url": "https://github.com/wso2/carbon-kernel/pull/2810#discussion_r506207636", "createdAt": "2020-10-16T09:15:45Z", "author": {"login": "mevan-karu"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/jdbc/JDBCUserStoreManager.java", "diffHunk": "@@ -1840,10 +1843,9 @@ public void doDeleteUser(String userName) throws UserStoreException {\n             }\n             dbConnection.commit();\n         } catch (SQLException e) {\n+            DatabaseUtil.rollBack(dbConnection);\n             String msg = \"Error occurred while deleting user : \" + userName;\n-            if (log.isDebugEnabled()) {\n-                log.debug(msg, e);\n-            }\n+            log.error(msg, e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c3ea485124a50a8c12d1a93229489d8b1cc2378"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzM5NzA3NQ==", "bodyText": "Fixed 66bfa20", "url": "https://github.com/wso2/carbon-kernel/pull/2810#discussion_r507397075", "createdAt": "2020-10-19T03:12:02Z", "author": {"login": "GANGANI"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/jdbc/JDBCUserStoreManager.java", "diffHunk": "@@ -1840,10 +1843,9 @@ public void doDeleteUser(String userName) throws UserStoreException {\n             }\n             dbConnection.commit();\n         } catch (SQLException e) {\n+            DatabaseUtil.rollBack(dbConnection);\n             String msg = \"Error occurred while deleting user : \" + userName;\n-            if (log.isDebugEnabled()) {\n-                log.debug(msg, e);\n-            }\n+            log.error(msg, e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIwNzYzNg=="}, "originalCommit": {"oid": "5c3ea485124a50a8c12d1a93229489d8b1cc2378"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3MDc4MTUwOnYy", "diffSide": "RIGHT", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/jdbc/JDBCUserStoreManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQwOToxNjo1OFrOHiwhTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwMzoxMTo1NVrOHj5Dcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIwODU5MQ==", "bodyText": "In here also, put a comment stating the reason.", "url": "https://github.com/wso2/carbon-kernel/pull/2810#discussion_r506208591", "createdAt": "2020-10-16T09:16:58Z", "author": {"login": "mevan-karu"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/jdbc/JDBCUserStoreManager.java", "diffHunk": "@@ -2568,10 +2576,9 @@ private void updateStringValuesToDatabase(Connection dbConnection, String sqlStm\n                 dbConnection.commit();\n             }\n         } catch (SQLException e) {\n+            DatabaseUtil.rollBack(dbConnection);\n             String msg = \"Error occurred while updating string values to database.\";\n-            if (log.isDebugEnabled()) {\n-                log.debug(msg, e);\n-            }\n+            log.error(msg, e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c3ea485124a50a8c12d1a93229489d8b1cc2378"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzM5Njk3OQ==", "bodyText": "Fixed 66bfa20", "url": "https://github.com/wso2/carbon-kernel/pull/2810#discussion_r507396979", "createdAt": "2020-10-19T03:11:55Z", "author": {"login": "GANGANI"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/jdbc/JDBCUserStoreManager.java", "diffHunk": "@@ -2568,10 +2576,9 @@ private void updateStringValuesToDatabase(Connection dbConnection, String sqlStm\n                 dbConnection.commit();\n             }\n         } catch (SQLException e) {\n+            DatabaseUtil.rollBack(dbConnection);\n             String msg = \"Error occurred while updating string values to database.\";\n-            if (log.isDebugEnabled()) {\n-                log.debug(msg, e);\n-            }\n+            log.error(msg, e);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIwODU5MQ=="}, "originalCommit": {"oid": "5c3ea485124a50a8c12d1a93229489d8b1cc2378"}, "originalPosition": 94}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2100, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}