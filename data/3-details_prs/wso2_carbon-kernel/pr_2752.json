{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNjc4NjYw", "number": 2752, "title": "Fixing performance issues in IS 5.11", "bodyText": "Purpose\n\nIntroduce a caching layer at UserUniqueIDManager to cache the user name\nAdd invalidation for above cache\nSince the UserUniqueIDManager class is only should be accessible from the abstract user store manager when the underlying user store does not support unique user id. In scenarios that underline user store natively support unique user id there should be a implementation to getUserNameFromUserID that implementation should be used to get user name from user id", "createdAt": "2020-08-20T05:56:15Z", "url": "https://github.com/wso2/carbon-kernel/pull/2752", "merged": true, "mergeCommit": {"oid": "5b5d5d367ec7cf3a33d64801994e17a3cdb532f2"}, "closed": true, "closedAt": "2020-08-27T05:39:05Z", "author": {"login": "Buddhimah"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdApo5mgH2gAyNDcwNjc4NjYwOmZjNzAwOTM5ODY0YTM2OTkyZWVlZjU4OGNmODQ4MGUxOWVmZmZkYjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdC5Y7XAFqTQ3NjM5MTQxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4", "author": {"user": {"login": "Buddhimah", "name": "Buddhima Udaranga"}}, "url": "https://github.com/wso2/carbon-kernel/commit/fc700939864a36992eeef588cf8480e19efffdb4", "committedDate": "2020-08-20T05:48:01Z", "message": "Fix performance issues 5.11"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1Mjk3NTc1", "url": "https://github.com/wso2/carbon-kernel/pull/2752#pullrequestreview-475297575", "createdAt": "2020-08-26T09:07:49Z", "commit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOTowNzo0OVrOHHC-3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOTowNzo0OVrOHHC-3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MDk0MQ==", "bodyText": "create a issue to track cache clear in user name update (will be supported in future)", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r477150941", "createdAt": "2020-08-26T09:07:49Z", "author": {"login": "Buddhimah"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "diffHunk": "@@ -12147,6 +12153,11 @@ private void clearUserIDResolverCache(String userID, String userName, UserStore\n                 .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),\n                         RESOLVE_USER_ID_FROM_USER_NAME_CACHE_NAME, tenantId);\n         UserIdResolverCache.getInstance().clearCacheEntry(userID, RESOLVE_USER_NAME_FROM_USER_ID_CACHE_NAME, tenantId);\n+        UserIdResolverCache.getInstance()\n+                .clearCacheEntry(UserCoreUtil.addDomainToName(userName, userStore.getDomainName()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "originalPosition": 90}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MzA4MDA0", "url": "https://github.com/wso2/carbon-kernel/pull/2752#pullrequestreview-475308004", "createdAt": "2020-08-26T09:19:55Z", "commit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MzM5MDMx", "url": "https://github.com/wso2/carbon-kernel/pull/2752#pullrequestreview-475339031", "createdAt": "2020-08-26T10:01:17Z", "commit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMDowMToxOFrOHHFC3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMDowMToxOFrOHHFC3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE4NDczMw==", "bodyText": "Need a method comment, explaining what it supposed to do.", "url": "https://github.com/wso2/carbon-kernel/pull/2752#discussion_r477184733", "createdAt": "2020-08-26T10:01:18Z", "author": {"login": "ruwanta"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java", "diffHunk": "@@ -12098,20 +12101,23 @@ public String getUserNameFromUserID(String userID) throws UserStoreException {\n             return ((AbstractUserStoreManager) userStore.getUserStoreManager())\n                     .getUserNameFromUserID(userStore.getDomainFreeUserId());\n         }\n+\n+        if (isUniqueUserIdEnabledInUserStore(userStore)) {\n+            return getUserNameFromCurrentUserStore(userID, userStore);\n+        } else {\n+            return userUniqueIDManger.getUser(userID, this).getDomainQualifiedUsername();\n+        }\n+    }\n+\n+    private String getUserNameFromCurrentUserStore(String userID, UserStore userStore) throws UserStoreException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc700939864a36992eeef588cf8480e19efffdb4"}, "originalPosition": 64}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53761d888bc5a3f43f33581d5a00f80df6bc6952", "author": {"user": {"login": "Buddhimah", "name": "Buddhima Udaranga"}}, "url": "https://github.com/wso2/carbon-kernel/commit/53761d888bc5a3f43f33581d5a00f80df6bc6952", "committedDate": "2020-08-27T05:08:30Z", "message": "Add method commment on newly introduced method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MzkxNDEw", "url": "https://github.com/wso2/carbon-kernel/pull/2752#pullrequestreview-476391410", "createdAt": "2020-08-27T05:16:54Z", "commit": {"oid": "53761d888bc5a3f43f33581d5a00f80df6bc6952"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2059, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}