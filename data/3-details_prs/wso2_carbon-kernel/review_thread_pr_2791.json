{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MjUzMzMw", "number": 2791, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDo1Nzo1OVrOEqrHbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDo1Nzo1OVrOEqrHbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTgyMDYzOnYy", "diffSide": "RIGHT", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/ldap/ReadWriteLDAPUserStoreManager.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDo1ODowMFrOHdA20A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNDoyMzowMlrOHdJlLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE4NDc4NA==", "bodyText": "Are we using the returning MEMBERSHIP_ATTRIBUTE attribute? If not, why do we request it?", "url": "https://github.com/wso2/carbon-kernel/pull/2791#discussion_r500184784", "createdAt": "2020-10-06T10:58:00Z", "author": {"login": "IsuraD"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/ldap/ReadWriteLDAPUserStoreManager.java", "diffHunk": "@@ -1458,6 +1458,41 @@ public void doUpdateRoleListOfUser(String userName, String[] deletedRoles, Strin\n         }\n     }\n \n+    /**\n+     * Resolves groupDN which is used in doUpdateRoleListOfUser method to modify the roles of the user.\n+     *\n+     * @param searchFilter Search filter.\n+     * @param role         Role to be assigned to a user.\n+     * @param context      LDAPRoleContext.\n+     * @return String groupDN.\n+     * @throws UserStoreException Error in resolving groupDN.\n+     */\n+    private String resolveGroupDN(String searchFilter, String role, LDAPRoleContext context) throws UserStoreException {\n+\n+        String roleSearchFilter = searchFilter.replace(\"?\", escapeSpecialCharactersForFilter(role));\n+        String membershipAttribute = realmConfig.getUserStoreProperty(LDAPConstants.MEMBERSHIP_ATTRIBUTE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a36a2f3a38be306bf763e7742c9bd13b662c750"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIwMzQ0MA==", "bodyText": "Yes we use that to search in the group base https://github.com/wso2/carbon-kernel/pull/2791/files#diff-25c6f9a57686933230222e3dff7b0601R1479", "url": "https://github.com/wso2/carbon-kernel/pull/2791#discussion_r500203440", "createdAt": "2020-10-06T11:33:40Z", "author": {"login": "sachiniWettasinghe"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/ldap/ReadWriteLDAPUserStoreManager.java", "diffHunk": "@@ -1458,6 +1458,41 @@ public void doUpdateRoleListOfUser(String userName, String[] deletedRoles, Strin\n         }\n     }\n \n+    /**\n+     * Resolves groupDN which is used in doUpdateRoleListOfUser method to modify the roles of the user.\n+     *\n+     * @param searchFilter Search filter.\n+     * @param role         Role to be assigned to a user.\n+     * @param context      LDAPRoleContext.\n+     * @return String groupDN.\n+     * @throws UserStoreException Error in resolving groupDN.\n+     */\n+    private String resolveGroupDN(String searchFilter, String role, LDAPRoleContext context) throws UserStoreException {\n+\n+        String roleSearchFilter = searchFilter.replace(\"?\", escapeSpecialCharactersForFilter(role));\n+        String membershipAttribute = realmConfig.getUserStoreProperty(LDAPConstants.MEMBERSHIP_ATTRIBUTE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE4NDc4NA=="}, "originalCommit": {"oid": "9a36a2f3a38be306bf763e7742c9bd13b662c750"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIwNjgxMA==", "bodyText": "The return is not used anyway ...", "url": "https://github.com/wso2/carbon-kernel/pull/2791#discussion_r500206810", "createdAt": "2020-10-06T11:40:01Z", "author": {"login": "IsuraD"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/ldap/ReadWriteLDAPUserStoreManager.java", "diffHunk": "@@ -1458,6 +1458,41 @@ public void doUpdateRoleListOfUser(String userName, String[] deletedRoles, Strin\n         }\n     }\n \n+    /**\n+     * Resolves groupDN which is used in doUpdateRoleListOfUser method to modify the roles of the user.\n+     *\n+     * @param searchFilter Search filter.\n+     * @param role         Role to be assigned to a user.\n+     * @param context      LDAPRoleContext.\n+     * @return String groupDN.\n+     * @throws UserStoreException Error in resolving groupDN.\n+     */\n+    private String resolveGroupDN(String searchFilter, String role, LDAPRoleContext context) throws UserStoreException {\n+\n+        String roleSearchFilter = searchFilter.replace(\"?\", escapeSpecialCharactersForFilter(role));\n+        String membershipAttribute = realmConfig.getUserStoreProperty(LDAPConstants.MEMBERSHIP_ATTRIBUTE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE4NDc4NA=="}, "originalCommit": {"oid": "9a36a2f3a38be306bf763e7742c9bd13b662c750"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDMyNzcyNw==", "bodyText": "Tested and fixed this with dedca0f", "url": "https://github.com/wso2/carbon-kernel/pull/2791#discussion_r500327727", "createdAt": "2020-10-06T14:23:02Z", "author": {"login": "sachiniWettasinghe"}, "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/ldap/ReadWriteLDAPUserStoreManager.java", "diffHunk": "@@ -1458,6 +1458,41 @@ public void doUpdateRoleListOfUser(String userName, String[] deletedRoles, Strin\n         }\n     }\n \n+    /**\n+     * Resolves groupDN which is used in doUpdateRoleListOfUser method to modify the roles of the user.\n+     *\n+     * @param searchFilter Search filter.\n+     * @param role         Role to be assigned to a user.\n+     * @param context      LDAPRoleContext.\n+     * @return String groupDN.\n+     * @throws UserStoreException Error in resolving groupDN.\n+     */\n+    private String resolveGroupDN(String searchFilter, String role, LDAPRoleContext context) throws UserStoreException {\n+\n+        String roleSearchFilter = searchFilter.replace(\"?\", escapeSpecialCharactersForFilter(role));\n+        String membershipAttribute = realmConfig.getUserStoreProperty(LDAPConstants.MEMBERSHIP_ATTRIBUTE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE4NDc4NA=="}, "originalCommit": {"oid": "9a36a2f3a38be306bf763e7742c9bd13b662c750"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2089, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}