{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0NDE0NzUw", "number": 2704, "title": "Add UM_HYBRID_GROUP_ROLE table", "bodyText": "Purpose\n\nResolves wso2/product-is#8373", "createdAt": "2020-06-15T09:39:03Z", "url": "https://github.com/wso2/carbon-kernel/pull/2704", "merged": true, "mergeCommit": {"oid": "70bd1c906315e936d946773740054a0433ae2d01"}, "closed": true, "closedAt": "2020-07-01T19:02:46Z", "author": {"login": "ashensw"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctoHrmAFqTQzNDU4MDA4Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwua0_gFqTQ0MTA5ODUzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTgwMDg3", "url": "https://github.com/wso2/carbon-kernel/pull/2704#pullrequestreview-434580087", "createdAt": "2020-06-22T03:17:15Z", "commit": {"oid": "8ece06730d4254e78e19e1e62f29dbae41bb2f6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMzoxNzoxNVrOGmw0IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMzoxNzoxNVrOGmw0IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI5ODg0OQ==", "bodyText": "We will have to look at execution plans and add necessary indexes and all for optimization.\nPlease create a task to track such and attend", "url": "https://github.com/wso2/carbon-kernel/pull/2704#discussion_r443298849", "createdAt": "2020-06-22T03:17:15Z", "author": {"login": "malithie"}, "path": "distribution/kernel/carbon-home/dbscripts/db2.sql", "diffHunk": "@@ -796,6 +796,17 @@ CREATE TABLE UM_HYBRID_USER_ROLE(\n     PRIMARY KEY(UM_ID,UM_TENANT_ID)\n )/\n \n+CREATE TABLE UM_HYBRID_GROUP_ROLE(\n+    UM_ID DECIMAL(31,0) NOT NULL,\n+    UM_GROUP_NAME VARCHAR(255) NOT NULL,\n+    UM_ROLE_ID DECIMAL(31,0) NOT NULL,\n+    UM_TENANT_ID DECIMAL(31,0) DEFAULT 0 NOT NULL,\n+    UM_DOMAIN_ID DECIMAL(31,0) DEFAULT 0 NOT NULL,\n+    UNIQUE(UM_GROUP_NAME,UM_ROLE_ID,UM_TENANT_ID),\n+    FOREIGN KEY(UM_ROLE_ID,UM_TENANT_ID) REFERENCES UM_HYBRID_ROLE(UM_ID,UM_TENANT_ID) ON DELETE CASCADE,\n+    PRIMARY KEY(UM_ID,UM_TENANT_ID)\n+)/\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ece06730d4254e78e19e1e62f29dbae41bb2f6b"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ece06730d4254e78e19e1e62f29dbae41bb2f6b", "author": {"user": {"login": "ashensw", "name": "Ashen Weerathunga"}}, "url": "https://github.com/wso2/carbon-kernel/commit/8ece06730d4254e78e19e1e62f29dbae41bb2f6b", "committedDate": "2020-06-15T09:38:27Z", "message": "Add UM_HYBRID_GROUP_ROLE table"}, "afterCommit": {"oid": "a65f7ccbae43675e9d2f6166240d68cffee03f4b", "author": {"user": {"login": "ashensw", "name": "Ashen Weerathunga"}}, "url": "https://github.com/wso2/carbon-kernel/commit/a65f7ccbae43675e9d2f6166240d68cffee03f4b", "committedDate": "2020-07-01T08:56:56Z", "message": "Add UM_HYBRID_GROUP_ROLE table"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a65f7ccbae43675e9d2f6166240d68cffee03f4b", "author": {"user": {"login": "ashensw", "name": "Ashen Weerathunga"}}, "url": "https://github.com/wso2/carbon-kernel/commit/a65f7ccbae43675e9d2f6166240d68cffee03f4b", "committedDate": "2020-07-01T08:56:56Z", "message": "Add UM_HYBRID_GROUP_ROLE table"}, "afterCommit": {"oid": "b205ade8db7d1e0f281db1a0630a72d1ae94a72f", "author": {"user": {"login": "ashensw", "name": "Ashen Weerathunga"}}, "url": "https://github.com/wso2/carbon-kernel/commit/b205ade8db7d1e0f281db1a0630a72d1ae94a72f", "committedDate": "2020-07-01T08:58:55Z", "message": "Add UM_HYBRID_GROUP_ROLE table"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNjg0NTI0", "url": "https://github.com/wso2/carbon-kernel/pull/2704#pullrequestreview-440684524", "createdAt": "2020-07-01T09:06:25Z", "commit": {"oid": "b205ade8db7d1e0f281db1a0630a72d1ae94a72f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOTowNjoyNlrOGrddnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQwOTowNjoyNlrOGrddnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIyNDY3MQ==", "bodyText": "Any specific reason why we don't have foreign key references in this table?", "url": "https://github.com/wso2/carbon-kernel/pull/2704#discussion_r448224671", "createdAt": "2020-07-01T09:06:26Z", "author": {"login": "mefarazath"}, "path": "distribution/kernel/carbon-home/dbscripts/mysql_cluster.sql", "diffHunk": "@@ -393,6 +393,16 @@ CREATE TABLE UM_HYBRID_USER_ROLE(\n             PRIMARY KEY (UM_ID, UM_TENANT_ID)\n )ENGINE NDB;\n \n+CREATE TABLE UM_HYBRID_GROUP_ROLE(\n+            UM_ID INTEGER NOT NULL AUTO_INCREMENT,\n+            UM_GROUP_NAME VARCHAR(255),\n+            UM_ROLE_ID INTEGER NOT NULL,\n+            UM_TENANT_ID INTEGER DEFAULT 0,\n+            UM_DOMAIN_ID INTEGER,\n+            UNIQUE (UM_GROUP_NAME, UM_ROLE_ID, UM_TENANT_ID, UM_DOMAIN_ID),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b205ade8db7d1e0f281db1a0630a72d1ae94a72f"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6755446bdd0b032e929d4544de87cdf24d3863dc", "author": {"user": {"login": "ashensw", "name": "Ashen Weerathunga"}}, "url": "https://github.com/wso2/carbon-kernel/commit/6755446bdd0b032e929d4544de87cdf24d3863dc", "committedDate": "2020-07-01T15:36:40Z", "message": "Add UM_HYBRID_GROUP_ROLE table"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b205ade8db7d1e0f281db1a0630a72d1ae94a72f", "author": {"user": {"login": "ashensw", "name": "Ashen Weerathunga"}}, "url": "https://github.com/wso2/carbon-kernel/commit/b205ade8db7d1e0f281db1a0630a72d1ae94a72f", "committedDate": "2020-07-01T08:58:55Z", "message": "Add UM_HYBRID_GROUP_ROLE table"}, "afterCommit": {"oid": "6755446bdd0b032e929d4544de87cdf24d3863dc", "author": {"user": {"login": "ashensw", "name": "Ashen Weerathunga"}}, "url": "https://github.com/wso2/carbon-kernel/commit/6755446bdd0b032e929d4544de87cdf24d3863dc", "committedDate": "2020-07-01T15:36:40Z", "message": "Add UM_HYBRID_GROUP_ROLE table"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMDk4NTMx", "url": "https://github.com/wso2/carbon-kernel/pull/2704#pullrequestreview-441098531", "createdAt": "2020-07-01T18:19:23Z", "commit": {"oid": "6755446bdd0b032e929d4544de87cdf24d3863dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2043, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}