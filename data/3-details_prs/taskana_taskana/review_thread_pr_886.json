{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4NjIyMDIy", "number": 886, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNTo0NjoxNFrODbnu4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNTo0OTowNVrODbnzZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjg5MTIyOnYy", "diffSide": "RIGHT", "path": "pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNTo0NjoxNFrOFjNW8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNjo0MzoxNFrOFjPjyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ2MzM0NQ==", "bodyText": "Just to understand: Since we use a different mockito version than provided by spring-boot we have to do this, right?", "url": "https://github.com/Taskana/taskana/pull/886#discussion_r372463345", "createdAt": "2020-01-29T15:46:14Z", "author": {"login": "mustaphazorgati"}, "path": "pom.xml", "diffHunk": "@@ -75,6 +75,9 @@\n \t\t<version.archunit>0.13.0</version.archunit>\n \t\t<version.mockito>3.2.4</version.mockito>\n \t\t<version.junit.mockito>3.2.4</version.junit.mockito>\n+    <!-- byte buddy 1.9.7+ is needed to solve dependency errors with spring mock tests see LdapClientTest -->\n+    <version.byte-buddy>1.9.7</version.byte-buddy>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2646d66349bb6d0ef0c64f62b77d27b6d938afda"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ5OTQwMw==", "bodyText": "more research is needed. it just works that way.", "url": "https://github.com/Taskana/taskana/pull/886#discussion_r372499403", "createdAt": "2020-01-29T16:43:14Z", "author": {"login": "benjamineckstein"}, "path": "pom.xml", "diffHunk": "@@ -75,6 +75,9 @@\n \t\t<version.archunit>0.13.0</version.archunit>\n \t\t<version.mockito>3.2.4</version.mockito>\n \t\t<version.junit.mockito>3.2.4</version.junit.mockito>\n+    <!-- byte buddy 1.9.7+ is needed to solve dependency errors with spring mock tests see LdapClientTest -->\n+    <version.byte-buddy>1.9.7</version.byte-buddy>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ2MzM0NQ=="}, "originalCommit": {"oid": "2646d66349bb6d0ef0c64f62b77d27b6d938afda"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjg5OTQxOnYy", "diffSide": "RIGHT", "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/ldap/LdapClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNTo0ODoxNVrOFjNcLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNTo0ODoxNVrOFjNcLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ2NDY4Nw==", "bodyText": "nice! I didn't know that Pattern.quote exists. awesome :)", "url": "https://github.com/Taskana/taskana/pull/886#discussion_r372464687", "createdAt": "2020-01-29T15:48:15Z", "author": {"login": "mustaphazorgati"}, "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/ldap/LdapClient.java", "diffHunk": "@@ -182,16 +185,22 @@ public AccessIdResource searchGroupByDn(final String name) {\n       throw new SystemException(\n           \"LdapClient was called but is not active due to missing configuration: \" + message);\n     }\n-\n+    // Obviously Spring LdapTemplate does have a inconsistency and always adds the base name to the\n+    // given DN.\n+    // https://stackoverflow.com/questions/55285743/spring-ldaptemplate-how-to-lookup-fully-qualified-dn-with-configured-base-dn\n+    // Therefore we have to remove the base name from the dn before performing the lookup\n+    // (?i) --> case insensitive replacement\n+    String nameWithoutBaseDn = name.replaceAll(\"(?i)\" + Pattern.quote(\",\" + baseDn), \"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2646d66349bb6d0ef0c64f62b77d27b6d938afda"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMjkwMjc2OnYy", "diffSide": "RIGHT", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/ldap/LdapClientTest.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNTo0OTowNVrOFjNePg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNjo0MzoyNFrOFjPkQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ2NTIxNA==", "bodyText": "can we please use the @ExtendWith(MockitoExtension.class) annotation?", "url": "https://github.com/Taskana/taskana/pull/886#discussion_r372465214", "createdAt": "2020-01-29T15:49:05Z", "author": {"login": "mustaphazorgati"}, "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/ldap/LdapClientTest.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package pro.taskana.ldap;\n+\n+import static org.mockito.Mockito.when;\n+\n+import org.junit.jupiter.api.Test;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+import org.springframework.core.env.Environment;\n+import org.springframework.ldap.core.LdapTemplate;\n+\n+class LdapClientTest {\n+\n+  @Mock Environment environment;\n+\n+  @Mock LdapTemplate ldapTemplate;\n+\n+  @InjectMocks LdapClient cut;\n+\n+  @Test\n+  void testLdap() {\n+\n+    MockitoAnnotations.initMocks(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2646d66349bb6d0ef0c64f62b77d27b6d938afda"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ2NTI5MQ==", "bodyText": "like we always do :)", "url": "https://github.com/Taskana/taskana/pull/886#discussion_r372465291", "createdAt": "2020-01-29T15:49:13Z", "author": {"login": "mustaphazorgati"}, "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/ldap/LdapClientTest.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package pro.taskana.ldap;\n+\n+import static org.mockito.Mockito.when;\n+\n+import org.junit.jupiter.api.Test;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+import org.springframework.core.env.Environment;\n+import org.springframework.ldap.core.LdapTemplate;\n+\n+class LdapClientTest {\n+\n+  @Mock Environment environment;\n+\n+  @Mock LdapTemplate ldapTemplate;\n+\n+  @InjectMocks LdapClient cut;\n+\n+  @Test\n+  void testLdap() {\n+\n+    MockitoAnnotations.initMocks(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ2NTIxNA=="}, "originalCommit": {"oid": "2646d66349bb6d0ef0c64f62b77d27b6d938afda"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ3Nzk3NQ==", "bodyText": "@benjamineckstein this is still not done :)", "url": "https://github.com/Taskana/taskana/pull/886#discussion_r372477975", "createdAt": "2020-01-29T16:09:07Z", "author": {"login": "mustaphazorgati"}, "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/ldap/LdapClientTest.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package pro.taskana.ldap;\n+\n+import static org.mockito.Mockito.when;\n+\n+import org.junit.jupiter.api.Test;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+import org.springframework.core.env.Environment;\n+import org.springframework.ldap.core.LdapTemplate;\n+\n+class LdapClientTest {\n+\n+  @Mock Environment environment;\n+\n+  @Mock LdapTemplate ldapTemplate;\n+\n+  @InjectMocks LdapClient cut;\n+\n+  @Test\n+  void testLdap() {\n+\n+    MockitoAnnotations.initMocks(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ2NTIxNA=="}, "originalCommit": {"oid": "2646d66349bb6d0ef0c64f62b77d27b6d938afda"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ5OTUyMA==", "bodyText": "done", "url": "https://github.com/Taskana/taskana/pull/886#discussion_r372499520", "createdAt": "2020-01-29T16:43:24Z", "author": {"login": "benjamineckstein"}, "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/ldap/LdapClientTest.java", "diffHunk": "@@ -0,0 +1,60 @@\n+package pro.taskana.ldap;\n+\n+import static org.mockito.Mockito.when;\n+\n+import org.junit.jupiter.api.Test;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+import org.springframework.core.env.Environment;\n+import org.springframework.ldap.core.LdapTemplate;\n+\n+class LdapClientTest {\n+\n+  @Mock Environment environment;\n+\n+  @Mock LdapTemplate ldapTemplate;\n+\n+  @InjectMocks LdapClient cut;\n+\n+  @Test\n+  void testLdap() {\n+\n+    MockitoAnnotations.initMocks(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ2NTIxNA=="}, "originalCommit": {"oid": "2646d66349bb6d0ef0c64f62b77d27b6d938afda"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4392, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}