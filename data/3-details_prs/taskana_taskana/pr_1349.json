{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1NTgwMDI1", "number": 1349, "title": "TSK-1355: Adjust all single() methods to use mybatis selectOne", "bodyText": "For the submitter:\n\n I updated the documentation and will supply links to the specific files\n I did not update the documentation\n I included a link to the SonarCloud branch analysis\n I added a description of changes on the current release notes\n I did not update the current release notes\n I put the ticket in review\n After integration of the pull request, I verified our bluemix test environment is not broken\n\nVerified by the reviewer:\n\n Commit message format \u2192 TSK-XXX: Your commit message.\n Submitter's update to documentation is sufficient\n SonarCloud analysis meets our standards\n Update of the current release notes reflects changes\n PR fulfills the ticket\n Edge cases and unwanted side effects are tested\n Readability", "createdAt": "2020-11-23T09:14:47Z", "url": "https://github.com/Taskana/taskana/pull/1349", "merged": true, "mergeCommit": {"oid": "92b49fc850a3bd4fff9ebb7da681da422ca06b67"}, "closed": true, "closedAt": "2021-01-25T14:59:49Z", "author": {"login": "gitgoodjhe"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdxXsaVgFqTU3MDU0NDM3Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdzoNpggFqTU3NTQ3OTY4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcwNTQ0Mzc3", "url": "https://github.com/Taskana/taskana/pull/1349#pullrequestreview-570544377", "createdAt": "2021-01-18T14:35:14Z", "commit": {"oid": "b4587e8d0329b7bf41bcca9073a90b61bfc6e69f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOFQxNDozNToxNFrOIVrykg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOFQxNDozNToxNFrOIVrykg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTYwODQ2Ng==", "bodyText": "I think, we should document this Exception in the JavaDoc of the API, shouldn't we?", "url": "https://github.com/Taskana/taskana/pull/1349#discussion_r559608466", "createdAt": "2021-01-18T14:35:14Z", "author": {"login": "holgerhagen"}, "path": "history/taskana-simplehistory-provider/src/test/java/acceptance/query/QueryClassificationHistoryAccTest.java", "diffHunk": "@@ -96,17 +98,31 @@ void should_ReturnEmptyList_When_ProvidingWrongContraints() {\n   @Test\n   void should_ReturnSingleHistoryEvent_When_UsingSingleMethod() {\n     ClassificationHistoryEvent single =\n-        historyService.createClassificationHistoryQuery().userIdIn(\"peter\").single();\n+        historyService\n+            .createClassificationHistoryQuery()\n+            .userIdIn(\"peter\")\n+            .classificationIdIn(\"CLI:000000000000000000000000000000000001\")\n+            .single();\n     assertThat(single.getEventType()).isEqualTo(ClassificationHistoryEventType.CREATED.getName());\n \n     single =\n         historyService\n             .createClassificationHistoryQuery()\n             .eventTypeIn(ClassificationHistoryEventType.CREATED.getName(), \"xy\")\n+            .classificationIdIn(\"CLI:000000000000000000000000000000000001\")\n             .single();\n     assertThat(single.getUserId()).isEqualTo(\"peter\");\n   }\n \n+  @Test\n+  void should_ThrowException_When_SingleMethodRetrievesMoreThanOneEventFromDatabase() {\n+\n+    ClassificationHistoryQuery query =\n+        getHistoryService().createClassificationHistoryQuery().userIdIn(\"peter\");\n+\n+    assertThatThrownBy(() -> query.single()).isInstanceOf(TooManyResultsException.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4587e8d0329b7bf41bcca9073a90b61bfc6e69f"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7579e414aae0902f2fbfb9ab03fa921257513014", "author": {"user": {"login": "gitgoodjhe", "name": null}}, "url": "https://github.com/Taskana/taskana/commit/7579e414aae0902f2fbfb9ab03fa921257513014", "committedDate": "2021-01-20T07:28:44Z", "message": "TSK-1355: Adjust all single() methods to use mybatis selectOne"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d81f542c011903db1c220b4ef023d5db09e11d25", "author": {"user": {"login": "gitgoodjhe", "name": null}}, "url": "https://github.com/Taskana/taskana/commit/d81f542c011903db1c220b4ef023d5db09e11d25", "committedDate": "2021-01-20T07:28:44Z", "message": "TSK-1355: Review Findings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc1NDc5Njg0", "url": "https://github.com/Taskana/taskana/pull/1349#pullrequestreview-575479684", "createdAt": "2021-01-25T14:58:29Z", "commit": {"oid": "d81f542c011903db1c220b4ef023d5db09e11d25"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4584, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}