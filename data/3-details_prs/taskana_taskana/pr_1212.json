{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNDE1Mjg5", "number": 1212, "title": "TSK-1085: Hateoas self-links which contain variables are not working \u2026", "bodyText": "\u2026for Paged representationmodels\n\n\nremove Aspect\n\n\nremove PageLinks\n\n\nremove AbstractRessourcesAssembler\n\n\nupdate TaskanaPagingAssembler\n\n\nupdate *Assembler implementing TaskanaPagingAssembler for self-links\n\n\nupdate unit-test and test \"href-self\" part of json\n\n\nfix checkstyl-finding", "createdAt": "2020-08-05T14:19:15Z", "url": "https://github.com/Taskana/taskana/pull/1212", "merged": true, "mergeCommit": {"oid": "d0ae7f2150701fe96a1042ed086e4dad9a718524"}, "closed": true, "closedAt": "2020-08-12T14:11:20Z", "author": {"login": "nkolytschew"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8OLfzAFqTQ2MjQyODIzNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-MBHcAFqTQ2NTk1MzQ4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDI4MjM1", "url": "https://github.com/Taskana/taskana/pull/1212#pullrequestreview-462428235", "createdAt": "2020-08-06T11:21:17Z", "commit": {"oid": "8374780a1e1a0d8367f1be5f5060d93a36591bc0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMToyMToxN1rOG8vUlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMToyNzoxMFrOG8vfGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM0MzA2Mg==", "bodyText": "Why do we add the metadata twice and do not simply get it from the model?", "url": "https://github.com/Taskana/taskana/pull/1212#discussion_r466343062", "createdAt": "2020-08-06T11:21:17Z", "author": {"login": "holgerhagen"}, "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/task/rest/assembler/TaskCommentRepresentationModelAssembler.java", "diffHunk": "@@ -70,9 +68,9 @@ public TaskanaPagedModelKeys getProperty() {\n   }\n \n   @Override\n-  @PageLinks(Mapping.URL_TASK_COMMENTS)\n   public TaskanaPagedModel<TaskCommentRepresentationModel> toPageModel(\n       Iterable<TaskComment> taskComments, PageMetadata pageMetadata) {\n-    return TaskanaPagingAssembler.super.toPageModel(taskComments, pageMetadata);\n+    return addLinksToPageResource(\n+        TaskanaPagingAssembler.super.toPageModel(taskComments, pageMetadata), pageMetadata);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8374780a1e1a0d8367f1be5f5060d93a36591bc0"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM0MzUxMg==", "bodyText": "I understand that we do not change the history events to the representation model structure in this PR? Is there a ticket for it to do it later on?", "url": "https://github.com/Taskana/taskana/pull/1212#discussion_r466343512", "createdAt": "2020-08-06T11:22:20Z", "author": {"login": "holgerhagen"}, "path": "history/taskana-simplehistory-rest-spring/src/main/java/pro/taskana/simplehistory/rest/assembler/TaskHistoryEventListResourceAssembler.java", "diffHunk": "@@ -4,53 +4,57 @@\n \n import java.util.ArrayList;\n import java.util.List;\n+import java.util.Map;\n+import javax.servlet.http.HttpServletRequest;\n import org.springframework.hateoas.IanaLinkRelations;\n import org.springframework.hateoas.Link;\n import org.springframework.hateoas.PagedModel.PageMetadata;\n+import org.springframework.web.context.request.RequestContextHolder;\n+import org.springframework.web.context.request.ServletRequestAttributes;\n+import org.springframework.web.servlet.support.ServletUriComponentsBuilder;\n+import org.springframework.web.util.UriComponentsBuilder;\n \n-import pro.taskana.resource.rest.AbstractRessourcesAssembler;\n import pro.taskana.simplehistory.impl.HistoryEventImpl;\n import pro.taskana.simplehistory.rest.TaskHistoryEventController;\n import pro.taskana.simplehistory.rest.models.TaskHistoryEventListResource;\n import pro.taskana.simplehistory.rest.models.TaskHistoryEventRepresentationModel;\n \n /** Mapper to convert from a list of HistoryEventImpl to a TaskHistoryEventResource. */\n-public class TaskHistoryEventListResourceAssembler extends AbstractRessourcesAssembler {\n+public class TaskHistoryEventListResourceAssembler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8374780a1e1a0d8367f1be5f5060d93a36591bc0"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM0NTc1NQ==", "bodyText": "would addLinksToPage'd'Resource be the better name?", "url": "https://github.com/Taskana/taskana/pull/1212#discussion_r466345755", "createdAt": "2020-08-06T11:27:10Z", "author": {"login": "holgerhagen"}, "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/common/rest/assembler/TaskanaPagingAssembler.java", "diffHunk": "@@ -25,4 +33,46 @@\n   default TaskanaPagedModel<D> toPageModel(Iterable<T> entities) {\n     return toPageModel(entities, null);\n   }\n+\n+  default TaskanaPagedModel<D> addLinksToPageResource(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8374780a1e1a0d8367f1be5f5060d93a36591bc0"}, "originalPosition": 24}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8374780a1e1a0d8367f1be5f5060d93a36591bc0", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/8374780a1e1a0d8367f1be5f5060d93a36591bc0", "committedDate": "2020-08-05T14:14:32Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\n* remove Aspect\n* remove PageLinks\n* remove AbstractRessourcesAssembler\n* update TaskanaPagingAssembler\n* update *Assembler implementing TaskanaPagingAssembler for self-links\n\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}, "afterCommit": {"oid": "6ddb2c113432e75c8c54adb18b294120a455811f", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/6ddb2c113432e75c8c54adb18b294120a455811f", "committedDate": "2020-08-12T09:43:55Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\n* remove Aspect\n* remove PageLinks\n* remove AbstractRessourcesAssembler\n* update TaskanaPagingAssembler\n* update *Assembler implementing TaskanaPagingAssembler for self-links\n\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ddb2c113432e75c8c54adb18b294120a455811f", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/6ddb2c113432e75c8c54adb18b294120a455811f", "committedDate": "2020-08-12T09:43:55Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\n* remove Aspect\n* remove PageLinks\n* remove AbstractRessourcesAssembler\n* update TaskanaPagingAssembler\n* update *Assembler implementing TaskanaPagingAssembler for self-links\n\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}, "afterCommit": {"oid": "a100f8824152ea3b2cf256e577db78ffa813075e", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/a100f8824152ea3b2cf256e577db78ffa813075e", "committedDate": "2020-08-12T09:47:54Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\n* remove Aspect\n* remove PageLinks\n* remove AbstractRessourcesAssembler\n* update TaskanaPagingAssembler\n* update *Assembler implementing TaskanaPagingAssembler for self-links\n\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1ODQ4NDQ1", "url": "https://github.com/Taskana/taskana/pull/1212#pullrequestreview-465848445", "createdAt": "2020-08-12T12:10:15Z", "commit": {"oid": "a100f8824152ea3b2cf256e577db78ffa813075e"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a100f8824152ea3b2cf256e577db78ffa813075e", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/a100f8824152ea3b2cf256e577db78ffa813075e", "committedDate": "2020-08-12T09:47:54Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\n* remove Aspect\n* remove PageLinks\n* remove AbstractRessourcesAssembler\n* update TaskanaPagingAssembler\n* update *Assembler implementing TaskanaPagingAssembler for self-links\n\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}, "afterCommit": {"oid": "39f037bcaeb685ff0d0c032f081b9a9bdc6c67e4", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/39f037bcaeb685ff0d0c032f081b9a9bdc6c67e4", "committedDate": "2020-08-12T13:49:32Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\n* remove Aspect\n* remove PageLinks\n* remove AbstractRessourcesAssembler\n* update TaskanaPagingAssembler\n* update *Assembler implementing TaskanaPagingAssembler for self-links\n\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "604b0a7dec956e7d3473baa80fc5f07499e659dc", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/604b0a7dec956e7d3473baa80fc5f07499e659dc", "committedDate": "2020-08-12T13:55:16Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\n* remove Aspect\n* remove PageLinks\n* remove AbstractRessourcesAssembler\n* update TaskanaPagingAssembler\n* update *Assembler implementing TaskanaPagingAssembler for self-links\n\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39f037bcaeb685ff0d0c032f081b9a9bdc6c67e4", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/39f037bcaeb685ff0d0c032f081b9a9bdc6c67e4", "committedDate": "2020-08-12T13:49:32Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\n* remove Aspect\n* remove PageLinks\n* remove AbstractRessourcesAssembler\n* update TaskanaPagingAssembler\n* update *Assembler implementing TaskanaPagingAssembler for self-links\n\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}, "afterCommit": {"oid": "604b0a7dec956e7d3473baa80fc5f07499e659dc", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/604b0a7dec956e7d3473baa80fc5f07499e659dc", "committedDate": "2020-08-12T13:55:16Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\n* remove Aspect\n* remove PageLinks\n* remove AbstractRessourcesAssembler\n* update TaskanaPagingAssembler\n* update *Assembler implementing TaskanaPagingAssembler for self-links\n\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1OTUzNDgy", "url": "https://github.com/Taskana/taskana/pull/1212#pullrequestreview-465953482", "createdAt": "2020-08-12T14:09:28Z", "commit": {"oid": "604b0a7dec956e7d3473baa80fc5f07499e659dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4464, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}