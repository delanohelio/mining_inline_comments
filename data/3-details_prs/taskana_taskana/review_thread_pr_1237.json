{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMTU1NTc2", "number": 1237, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDozMDowMlrOEbgbsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMTowNjoxNVrOEbhKdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Mjc4Mzg2OnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDozMDowMlrOHFeeKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMjoxNjo1OVrOHFhrxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUwNDE3MQ==", "bodyText": "What do you think about unifying the names for better understanding? I like engineConfigurationMock - maybe we can add 'mock' in the end of every mock? workbasketReadStateMock or something like that? (I mean renaming in the mock-store.ts file)", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475504171", "createdAt": "2020-08-24T10:30:02Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 134}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU1NjY2NA==", "bodyText": "yes", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475556664", "createdAt": "2020-08-24T12:16:43Z", "author": {"login": "cnguyen-de"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUwNDE3MQ=="}, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 134}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU1NjgwNw==", "bodyText": "I'll rename them", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475556807", "createdAt": "2020-08-24T12:16:59Z", "author": {"login": "cnguyen-de"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUwNDE3MQ=="}, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 134}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MjgxNzYyOnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDozNzo0OFrOHFe0Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMjoxNzozOFrOHFhs9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUwOTc4Nw==", "bodyText": "I thought we don't want to test code which is executed every time. Was that by accident or did you have a reason? You don't have to change anything - I just want to understand.", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475509787", "createdAt": "2020-08-24T10:37:48Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 171}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU1NzExMQ==", "bodyText": "just want to have 100% in jest coverage although this test doesn't matter much", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475557111", "createdAt": "2020-08-24T12:17:38Z", "author": {"login": "cnguyen-de"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUwOTc4Nw=="}, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 171}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MjgyMDI5OnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDozODo1MVrOHFe1uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzo1NjoyNFrOHFmFBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUxMDIwMA==", "bodyText": "This is not our naming convention.", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475510200", "createdAt": "2020-08-24T10:38:51Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);\n+  });\n+\n+  it('should submit if validatorService is true', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 174}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYyODgwNw==", "bodyText": "corrected", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475628807", "createdAt": "2020-08-24T13:56:24Z", "author": {"login": "cnguyen-de"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);\n+  });\n+\n+  it('should submit if validatorService is true', () => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUxMDIwMA=="}, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 174}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MjgyNTg3OnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDo0MDozM1rOHFe46g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzo1NjozOFrOHFmGFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUxMTAxOA==", "bodyText": "not our naming convention", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475511018", "createdAt": "2020-08-24T10:40:33Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);\n+  });\n+\n+  it('should submit if validatorService is true', () => {\n+    const formsValidatorService = TestBed.inject(FormsValidatorService);\n+    component.onSubmit();\n+    expect(formsValidatorService.formSubmitAttempt).toBe(true);\n+  });\n+\n+  it('should reset workbasket information when onUndo is called', () => {\n+    component.workbasketClone = selectedWorkbasket;\n+    const notificationService = TestBed.inject(NotificationService);\n+    const toastSpy = jest.spyOn(notificationService, 'showToast');\n+    component.onUndo();\n+    expect(toastSpy).toHaveBeenCalled();\n+    expect(component.workbasket).toMatchObject(component.workbasketClone);\n+  });\n+\n+  it('should save workbasket if workbasketId there', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 189}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYyOTA3OQ==", "bodyText": "corrected", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475629079", "createdAt": "2020-08-24T13:56:38Z", "author": {"login": "cnguyen-de"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);\n+  });\n+\n+  it('should submit if validatorService is true', () => {\n+    const formsValidatorService = TestBed.inject(FormsValidatorService);\n+    component.onSubmit();\n+    expect(formsValidatorService.formSubmitAttempt).toBe(true);\n+  });\n+\n+  it('should reset workbasket information when onUndo is called', () => {\n+    component.workbasketClone = selectedWorkbasket;\n+    const notificationService = TestBed.inject(NotificationService);\n+    const toastSpy = jest.spyOn(notificationService, 'showToast');\n+    component.onUndo();\n+    expect(toastSpy).toHaveBeenCalled();\n+    expect(component.workbasket).toMatchObject(component.workbasketClone);\n+  });\n+\n+  it('should save workbasket if workbasketId there', () => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUxMTAxOA=="}, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 189}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Mjg0OTEzOnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDo0ODo0OFrOHFfHFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzo1NzoyNlrOHFmKEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUxNDY0NQ==", "bodyText": "There is no async in the method declaration despite of the subscription.", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475514645", "createdAt": "2020-08-24T10:48:48Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);\n+  });\n+\n+  it('should submit if validatorService is true', () => {\n+    const formsValidatorService = TestBed.inject(FormsValidatorService);\n+    component.onSubmit();\n+    expect(formsValidatorService.formSubmitAttempt).toBe(true);\n+  });\n+\n+  it('should reset workbasket information when onUndo is called', () => {\n+    component.workbasketClone = selectedWorkbasket;\n+    const notificationService = TestBed.inject(NotificationService);\n+    const toastSpy = jest.spyOn(notificationService, 'showToast');\n+    component.onUndo();\n+    expect(toastSpy).toHaveBeenCalled();\n+    expect(component.workbasket).toMatchObject(component.workbasketClone);\n+  });\n+\n+  it('should save workbasket if workbasketId there', () => {\n+    component.workbasket = { ...selectedWorkbasket };\n+    component.workbasket.workbasketId = '1';\n+    component.action = ACTION.COPY;\n+    let actionDispatched = false;\n+    actions$.pipe(ofActionDispatched(UpdateWorkbasket)).subscribe(() => (actionDispatched = true));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 194}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYzMDA5Ng==", "bodyText": "corrected", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475630096", "createdAt": "2020-08-24T13:57:26Z", "author": {"login": "cnguyen-de"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);\n+  });\n+\n+  it('should submit if validatorService is true', () => {\n+    const formsValidatorService = TestBed.inject(FormsValidatorService);\n+    component.onSubmit();\n+    expect(formsValidatorService.formSubmitAttempt).toBe(true);\n+  });\n+\n+  it('should reset workbasket information when onUndo is called', () => {\n+    component.workbasketClone = selectedWorkbasket;\n+    const notificationService = TestBed.inject(NotificationService);\n+    const toastSpy = jest.spyOn(notificationService, 'showToast');\n+    component.onUndo();\n+    expect(toastSpy).toHaveBeenCalled();\n+    expect(component.workbasket).toMatchObject(component.workbasketClone);\n+  });\n+\n+  it('should save workbasket if workbasketId there', () => {\n+    component.workbasket = { ...selectedWorkbasket };\n+    component.workbasket.workbasketId = '1';\n+    component.action = ACTION.COPY;\n+    let actionDispatched = false;\n+    actions$.pipe(ofActionDispatched(UpdateWorkbasket)).subscribe(() => (actionDispatched = true));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUxNDY0NQ=="}, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 194}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Mjg1MDg0OnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDo0OToyMVrOHFfIDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDo0OToyMVrOHFfIDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUxNDg5NQ==", "bodyText": "There is no async in the method declaration despite of the subscription.", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475514895", "createdAt": "2020-08-24T10:49:21Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);\n+  });\n+\n+  it('should submit if validatorService is true', () => {\n+    const formsValidatorService = TestBed.inject(FormsValidatorService);\n+    component.onSubmit();\n+    expect(formsValidatorService.formSubmitAttempt).toBe(true);\n+  });\n+\n+  it('should reset workbasket information when onUndo is called', () => {\n+    component.workbasketClone = selectedWorkbasket;\n+    const notificationService = TestBed.inject(NotificationService);\n+    const toastSpy = jest.spyOn(notificationService, 'showToast');\n+    component.onUndo();\n+    expect(toastSpy).toHaveBeenCalled();\n+    expect(component.workbasket).toMatchObject(component.workbasketClone);\n+  });\n+\n+  it('should save workbasket if workbasketId there', () => {\n+    component.workbasket = { ...selectedWorkbasket };\n+    component.workbasket.workbasketId = '1';\n+    component.action = ACTION.COPY;\n+    let actionDispatched = false;\n+    actions$.pipe(ofActionDispatched(UpdateWorkbasket)).subscribe(() => (actionDispatched = true));\n+    component.onSave();\n+    expect(actionDispatched).toBe(true);\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should dispatch MarkWorkbasketforDeletion action when onRemoveConfirmed is called', () => {\n+    let actionDispatched = false;\n+    actions$.pipe(ofActionDispatched(MarkWorkbasketForDeletion)).subscribe(() => (actionDispatched = true));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 202}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Mjg1MjkyOnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDo0OTo1NlrOHFfJMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMzo1NzozOVrOHFmLGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUxNTE4NQ==", "bodyText": "not our naming convention", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475515185", "createdAt": "2020-08-24T10:49:56Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);\n+  });\n+\n+  it('should submit if validatorService is true', () => {\n+    const formsValidatorService = TestBed.inject(FormsValidatorService);\n+    component.onSubmit();\n+    expect(formsValidatorService.formSubmitAttempt).toBe(true);\n+  });\n+\n+  it('should reset workbasket information when onUndo is called', () => {\n+    component.workbasketClone = selectedWorkbasket;\n+    const notificationService = TestBed.inject(NotificationService);\n+    const toastSpy = jest.spyOn(notificationService, 'showToast');\n+    component.onUndo();\n+    expect(toastSpy).toHaveBeenCalled();\n+    expect(component.workbasket).toMatchObject(component.workbasketClone);\n+  });\n+\n+  it('should save workbasket if workbasketId there', () => {\n+    component.workbasket = { ...selectedWorkbasket };\n+    component.workbasket.workbasketId = '1';\n+    component.action = ACTION.COPY;\n+    let actionDispatched = false;\n+    actions$.pipe(ofActionDispatched(UpdateWorkbasket)).subscribe(() => (actionDispatched = true));\n+    component.onSave();\n+    expect(actionDispatched).toBe(true);\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should dispatch MarkWorkbasketforDeletion action when onRemoveConfirmed is called', () => {\n+    let actionDispatched = false;\n+    actions$.pipe(ofActionDispatched(MarkWorkbasketForDeletion)).subscribe(() => (actionDispatched = true));\n+    component.onRemoveConfirmed();\n+    expect(actionDispatched).toBe(true);\n+  });\n+\n+  it('should create new workbasket if workbasketId is undefined', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 207}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYzMDM2MQ==", "bodyText": "corrected", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475630361", "createdAt": "2020-08-24T13:57:39Z", "author": {"login": "cnguyen-de"}, "path": "web/src/app/administration/components/workbasket-information/workbasket-information.component.spec.ts", "diffHunk": "@@ -0,0 +1,213 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketInformationComponent } from './workbasket-information.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, ofActionDispatched, Store } from '@ngxs/store';\n+import { Observable, of } from 'rxjs';\n+import { FormsModule, ReactiveFormsModule } from '@angular/forms';\n+import { ICONTYPES } from '../../../shared/models/icon-types';\n+import { MapValuesPipe } from '../../../shared/pipes/map-values.pipe';\n+import { RemoveNoneTypePipe } from '../../../shared/pipes/remove-empty-type.pipe';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { SavingWorkbasketService } from '../../services/saving-workbaskets.service';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { FormsValidatorService } from '../../../shared/services/forms-validator/forms-validator.service';\n+import { NotificationService } from '../../../shared/services/notifications/notification.service';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { EngineConfigurationState } from '../../../shared/store/engine-configuration-store/engine-configuration.state';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { ClassificationCategoriesService } from '../../../shared/services/classification-categories/classification-categories.service';\n+import { ACTION } from '../../../shared/models/action';\n+import { TypeaheadModule } from 'ngx-bootstrap';\n+import { TypeAheadComponent } from '../../../shared/components/type-ahead/type-ahead.component';\n+import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n+import { MarkWorkbasketForDeletion, UpdateWorkbasket } from '../../../shared/store/workbasket-store/workbasket.actions';\n+import {\n+  selectedWorkbasket,\n+  engineConfigurationMock,\n+  workbasketReadState\n+} from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-shared-field-error-display', template: '' })\n+class FieldErrorDisplayStub {\n+  @Input() displayError: boolean;\n+  @Input() errorMessage: string;\n+  @Input() validationTrigger: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-icon-type', template: '' })\n+class IconTypeStub {\n+  @Input() type: ICONTYPES = ICONTYPES.ALL;\n+  @Input() text: string;\n+}\n+\n+const triggerWorkbasketSavedFn = jest.fn().mockReturnValue(true);\n+const workbasketServiceMock = jest.fn().mockImplementation(\n+  (): Partial<WorkbasketService> => ({\n+    triggerWorkBasketSaved: triggerWorkbasketSavedFn,\n+    updateWorkbasket: jest.fn().mockReturnValue(of(true)),\n+    markWorkbasketForDeletion: jest.fn().mockReturnValue(of(true)),\n+    createWorkbasket: jest.fn().mockReturnValue(of({ ...selectedWorkbasket }))\n+  })\n+);\n+\n+const isFieldValidFn = jest.fn().mockReturnValue(true);\n+const validateFormInformationFn = jest.fn().mockImplementation((): Promise<any> => Promise.resolve(true));\n+const formValidatorServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<FormsValidatorService> => ({\n+    isFieldValid: isFieldValidFn,\n+    validateInputOverflow: jest.fn(),\n+    validateFormInformation: validateFormInformationFn,\n+    get inputOverflowObservable(): Observable<Map<string, boolean>> {\n+      return of(new Map<string, boolean>());\n+    }\n+  })\n+);\n+\n+const showDialogFn = jest.fn().mockReturnValue(true);\n+const notificationServiceSpy = jest.fn().mockImplementation(\n+  (): Partial<NotificationService> => ({\n+    showDialog: showDialogFn,\n+    showToast: showDialogFn,\n+    triggerError: showDialogFn\n+  })\n+);\n+\n+describe('WorkbasketInformationComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketInformationComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketInformationComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        FormsModule,\n+        HttpClientTestingModule,\n+        MatSnackBarModule,\n+        MatDialogModule,\n+        NgxsModule.forRoot([EngineConfigurationState, WorkbasketState]),\n+        TypeaheadModule.forRoot(),\n+        ReactiveFormsModule,\n+        RouterTestingModule.withRoutes([]),\n+        BrowserAnimationsModule\n+      ],\n+      declarations: [\n+        WorkbasketInformationComponent,\n+        SpinnerStub,\n+        FieldErrorDisplayStub,\n+        IconTypeStub,\n+        TypeAheadComponent,\n+        MapValuesPipe,\n+        RemoveNoneTypePipe\n+      ],\n+      providers: [\n+        { provide: WorkbasketService, useClass: workbasketServiceMock },\n+        { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n+        { provide: NotificationService, useClass: notificationServiceSpy },\n+        SavingWorkbasketService,\n+        RequestInProgressService,\n+        DomainService,\n+        SelectedRouteService,\n+        ClassificationCategoriesService\n+      ]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketInformationComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    store.reset({\n+      ...store.snapshot(),\n+      engineConfiguration: engineConfigurationMock,\n+      workbasket: workbasketReadState\n+    });\n+    component.workbasket = selectedWorkbasket;\n+\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display custom fields correctly', () => {\n+    const customFields = debugElement.nativeElement.getElementsByClassName('custom-fields');\n+    expect(customFields.length).toBe(3); //mock data has custom1->4 but engineConfig disables custom3 -> [1,2,4]\n+  });\n+\n+  it('should create clone of workbasket when workbasket value changes', () => {\n+    component.action = ACTION.READ;\n+    component.ngOnChanges();\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should display create badge message when action is CREATE', () => {\n+    component.action = ACTION.CREATE;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toMatch('Creating new workbasket');\n+  });\n+\n+  it('should display copy badge message when action is COPY', () => {\n+    component.action = ACTION.COPY;\n+    component.ngOnChanges();\n+    expect(component.badgeMessage).toContain(`Copying workbasket: ${component.workbasket.key}`);\n+  });\n+\n+  it('should set type variable in selectType', () => {\n+    const type = ICONTYPES.GROUP;\n+    component.selectType(type);\n+    expect(component.workbasket.type).toMatch(type);\n+  });\n+\n+  it('should submit if validatorService is true', () => {\n+    const formsValidatorService = TestBed.inject(FormsValidatorService);\n+    component.onSubmit();\n+    expect(formsValidatorService.formSubmitAttempt).toBe(true);\n+  });\n+\n+  it('should reset workbasket information when onUndo is called', () => {\n+    component.workbasketClone = selectedWorkbasket;\n+    const notificationService = TestBed.inject(NotificationService);\n+    const toastSpy = jest.spyOn(notificationService, 'showToast');\n+    component.onUndo();\n+    expect(toastSpy).toHaveBeenCalled();\n+    expect(component.workbasket).toMatchObject(component.workbasketClone);\n+  });\n+\n+  it('should save workbasket if workbasketId there', () => {\n+    component.workbasket = { ...selectedWorkbasket };\n+    component.workbasket.workbasketId = '1';\n+    component.action = ACTION.COPY;\n+    let actionDispatched = false;\n+    actions$.pipe(ofActionDispatched(UpdateWorkbasket)).subscribe(() => (actionDispatched = true));\n+    component.onSave();\n+    expect(actionDispatched).toBe(true);\n+    expect(component.workbasketClone).toMatchObject(component.workbasket);\n+  });\n+\n+  it('should dispatch MarkWorkbasketforDeletion action when onRemoveConfirmed is called', () => {\n+    let actionDispatched = false;\n+    actions$.pipe(ofActionDispatched(MarkWorkbasketForDeletion)).subscribe(() => (actionDispatched = true));\n+    component.onRemoveConfirmed();\n+    expect(actionDispatched).toBe(true);\n+  });\n+\n+  it('should create new workbasket if workbasketId is undefined', () => {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUxNTE4NQ=="}, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 207}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Mjg4MTQwOnYy", "diffSide": "LEFT", "path": "web/src/app/administration/components/workbasket-details/workbasket-details.component.html", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDo1ODo1NVrOHFfaQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMDo1ODo1NVrOHFfaQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUxOTU1NQ==", "bodyText": "You could also delete the variable showDetail in the ts file as it is no longer used.", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475519555", "createdAt": "2020-08-24T10:58:55Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-details/workbasket-details.component.html", "diffHunk": "@@ -2,11 +2,6 @@\n     <taskana-shared-spinner [isRunning]=\"requestInProgress\"></taskana-shared-spinner>\n     <div id=\"workbasket-details\" *ngIf=\"workbasket && !requestInProgress\">\n         <ul class=\"nav nav-tabs\" role=\"tablist\">\n-            <li *ngIf=\"showDetail\" class=\"visible-xs visible-sm hidden\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Mjg5MjE1OnYy", "diffSide": "LEFT", "path": "web/src/app/administration/components/workbasket-details/workbasket-details.component.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMTowMjozMlrOHFfgyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNDowMjozNVrOHFmgKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUyMTIyNw==", "bodyText": "Why do we not need this anymore?", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475521227", "createdAt": "2020-08-24T11:02:32Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-details/workbasket-details.component.ts", "diffHunk": "@@ -108,12 +97,6 @@ export class WorkbasketDetailsComponent implements OnInit, OnDestroy {\n     if (!workbasketIdSelected && this.action === ACTION.CREATE) {\n       // CREATE\n       this.workbasket = {};\n-      this.domainService\n-        .getSelectedDomain()\n-        .pipe(takeUntil(this.destroy$))\n-        .subscribe((domain) => {\n-          this.workbasket.domain = domain;\n-        });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYzNTc1NA==", "bodyText": "I'm gonna restore this part, will need to discuss together if we should remove it", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475635754", "createdAt": "2020-08-24T14:02:35Z", "author": {"login": "cnguyen-de"}, "path": "web/src/app/administration/components/workbasket-details/workbasket-details.component.ts", "diffHunk": "@@ -108,12 +97,6 @@ export class WorkbasketDetailsComponent implements OnInit, OnDestroy {\n     if (!workbasketIdSelected && this.action === ACTION.CREATE) {\n       // CREATE\n       this.workbasket = {};\n-      this.domainService\n-        .getSelectedDomain()\n-        .pipe(takeUntil(this.destroy$))\n-        .subscribe((domain) => {\n-          this.workbasket.domain = domain;\n-        });", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUyMTIyNw=="}, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3Mjg5OTgxOnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/workbasket-details/workbasket-details.component.spec.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMTowNTowMlrOHFfliA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMTowNTowMlrOHFfliA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUyMjQ0MA==", "bodyText": "This is not our naming convention", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475522440", "createdAt": "2020-08-24T11:05:02Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-details/workbasket-details.component.spec.ts", "diffHunk": "@@ -0,0 +1,163 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketDetailsComponent } from './workbasket-details.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, Store } from '@ngxs/store';\n+import { Observable } from 'rxjs';\n+import { Workbasket } from '../../../shared/models/workbasket';\n+import { ACTION } from '../../../shared/models/action';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { ImportExportService } from '../../services/import-export.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { selectedWorkbasket } from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-workbasket-information', template: '<div>i</div>' })\n+class WorkbasketInformationStub {\n+  @Input() workbasket: Workbasket;\n+  @Input() action: ACTION;\n+}\n+\n+@Component({ selector: 'taskana-administration-workbasket-access-items', template: '' })\n+class WorkbasketAccessItemsStub {\n+  @Input() workbasket: Workbasket;\n+  @Input() action: ACTION;\n+  @Input() active: string;\n+}\n+\n+@Component({ selector: 'taskana-administration-workbasket-distribution-targets', template: '' })\n+class WorkbasketDistributionTargetsStub {\n+  @Input() workbasket: Workbasket;\n+  @Input() action: ACTION;\n+  @Input() active: string;\n+}\n+\n+export const workbasketCopyState = {\n+  selectedWorkbasket,\n+  action: ACTION.COPY\n+};\n+\n+export const workbasketCreateState = {\n+  selectedWorkbasket,\n+  action: ACTION.CREATE\n+};\n+\n+export const workbasketReadState = {\n+  selectedWorkbasket,\n+  action: ACTION.READ\n+};\n+describe('WorkbasketDetailsComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketDetailsComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketDetailsComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        NgxsModule.forRoot([WorkbasketState]),\n+        HttpClientTestingModule,\n+        RouterTestingModule.withRoutes([]),\n+        MatSnackBarModule,\n+        MatDialogModule\n+      ],\n+      declarations: [\n+        WorkbasketDetailsComponent,\n+        SpinnerStub,\n+        WorkbasketAccessItemsStub,\n+        WorkbasketDistributionTargetsStub,\n+        WorkbasketInformationStub\n+      ],\n+      providers: [DomainService, ImportExportService, WorkbasketService, RequestInProgressService, SelectedRouteService]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketDetailsComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.debugElement.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display loading spinner while content loads', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 97}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MjkwMzU3OnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/workbasket-details/workbasket-details.component.spec.ts", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMTowNjoxNVrOHFfn1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxMTowNjoxNVrOHFfn1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUyMzAzMQ==", "bodyText": "I think you didn't mean 'copied workbasket' \ud83d\ude00", "url": "https://github.com/Taskana/taskana/pull/1237#discussion_r475523031", "createdAt": "2020-08-24T11:06:15Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-details/workbasket-details.component.spec.ts", "diffHunk": "@@ -0,0 +1,163 @@\n+import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { WorkbasketDetailsComponent } from './workbasket-details.component';\n+import { Component, DebugElement, Input } from '@angular/core';\n+import { Actions, NgxsModule, Store } from '@ngxs/store';\n+import { Observable } from 'rxjs';\n+import { Workbasket } from '../../../shared/models/workbasket';\n+import { ACTION } from '../../../shared/models/action';\n+import { WorkbasketState } from '../../../shared/store/workbasket-store/workbasket.state';\n+import { DomainService } from '../../../shared/services/domain/domain.service';\n+import { ImportExportService } from '../../services/import-export.service';\n+import { HttpClientTestingModule } from '@angular/common/http/testing';\n+import { WorkbasketService } from '../../../shared/services/workbasket/workbasket.service';\n+import { RouterTestingModule } from '@angular/router/testing';\n+import { RequestInProgressService } from '../../../shared/services/request-in-progress/request-in-progress.service';\n+import { SelectedRouteService } from '../../../shared/services/selected-route/selected-route';\n+import { MatSnackBarModule } from '@angular/material/snack-bar';\n+import { MatDialogModule } from '@angular/material/dialog';\n+import { selectedWorkbasket } from '../../../shared/store/mock-data/mock-store';\n+\n+@Component({ selector: 'taskana-shared-spinner', template: '' })\n+class SpinnerStub {\n+  @Input() isRunning: boolean;\n+}\n+\n+@Component({ selector: 'taskana-administration-workbasket-information', template: '<div>i</div>' })\n+class WorkbasketInformationStub {\n+  @Input() workbasket: Workbasket;\n+  @Input() action: ACTION;\n+}\n+\n+@Component({ selector: 'taskana-administration-workbasket-access-items', template: '' })\n+class WorkbasketAccessItemsStub {\n+  @Input() workbasket: Workbasket;\n+  @Input() action: ACTION;\n+  @Input() active: string;\n+}\n+\n+@Component({ selector: 'taskana-administration-workbasket-distribution-targets', template: '' })\n+class WorkbasketDistributionTargetsStub {\n+  @Input() workbasket: Workbasket;\n+  @Input() action: ACTION;\n+  @Input() active: string;\n+}\n+\n+export const workbasketCopyState = {\n+  selectedWorkbasket,\n+  action: ACTION.COPY\n+};\n+\n+export const workbasketCreateState = {\n+  selectedWorkbasket,\n+  action: ACTION.CREATE\n+};\n+\n+export const workbasketReadState = {\n+  selectedWorkbasket,\n+  action: ACTION.READ\n+};\n+describe('WorkbasketDetailsComponent', () => {\n+  let fixture: ComponentFixture<WorkbasketDetailsComponent>;\n+  let debugElement: DebugElement;\n+  let component: WorkbasketDetailsComponent;\n+  let store: Store;\n+  let actions$: Observable<any>;\n+\n+  beforeEach(async(() => {\n+    TestBed.configureTestingModule({\n+      imports: [\n+        NgxsModule.forRoot([WorkbasketState]),\n+        HttpClientTestingModule,\n+        RouterTestingModule.withRoutes([]),\n+        MatSnackBarModule,\n+        MatDialogModule\n+      ],\n+      declarations: [\n+        WorkbasketDetailsComponent,\n+        SpinnerStub,\n+        WorkbasketAccessItemsStub,\n+        WorkbasketDistributionTargetsStub,\n+        WorkbasketInformationStub\n+      ],\n+      providers: [DomainService, ImportExportService, WorkbasketService, RequestInProgressService, SelectedRouteService]\n+    }).compileComponents();\n+\n+    fixture = TestBed.createComponent(WorkbasketDetailsComponent);\n+    debugElement = fixture.debugElement;\n+    component = fixture.debugElement.componentInstance;\n+    store = TestBed.inject(Store);\n+    actions$ = TestBed.inject(Actions);\n+    fixture.detectChanges();\n+  }));\n+\n+  it('should create component', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should display loading spinner while content loads', () => {\n+    component.requestInProgress = true;\n+    fixture.detectChanges();\n+    const spinner = debugElement.nativeElement.querySelector('taskana-shared-spinner');\n+    expect(spinner).toBeTruthy();\n+    expect(spinner.style.display).toContain('');\n+  });\n+\n+  it('should render workbasket-details when workbasket exists and request is not in progress', () => {\n+    component.workbasket = { workbasketId: '1' };\n+    component.requestInProgress = false;\n+    fixture.detectChanges();\n+    const workbasketDetails = debugElement.nativeElement.querySelector('#workbasket-details');\n+    expect(workbasketDetails).toBeTruthy();\n+  });\n+\n+  it('should render information, access items and distribution targets components', () => {\n+    component.workbasket = { workbasketId: '1' };\n+    component.requestInProgress = false;\n+    fixture.detectChanges();\n+    const information = debugElement.nativeElement.querySelector('taskana-administration-workbasket-information');\n+    const accessItems = debugElement.nativeElement.querySelector('taskana-administration-workbasket-access-items');\n+    const distributionTargets = debugElement.nativeElement.querySelector(\n+      'taskana-administration-workbasket-distribution-targets'\n+    );\n+    expect(information).toBeTruthy();\n+    expect(accessItems).toBeTruthy();\n+    expect(distributionTargets).toBeTruthy();\n+  });\n+\n+  it('should render new workbasket when action is CREATE', () => {\n+    store.reset({\n+      ...store.snapshot(),\n+      workbasket: workbasketCreateState\n+    });\n+    fixture.detectChanges();\n+    expect(component.tabSelected).toMatch('information');\n+    expect(component.selectedId).toBeUndefined();\n+  });\n+\n+  it('should render copied workbasket when action is COPY', () => {\n+    store.reset({\n+      ...store.snapshot(),\n+      workbasket: workbasketCopyState\n+    });\n+    component.ngOnInit();\n+    fixture.detectChanges();\n+    expect(component.workbasketCopy).toEqual(component.workbasket);\n+  });\n+\n+  it('should render copied workbasket when action is READ', () => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bb4812c92d56ac1c3bd18909393f8b4f25bc0f8"}, "originalPosition": 147}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4157, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}