{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2MzAxNjEz", "number": 1354, "title": "TSK-1478: Move access items filter to front-end ", "bodyText": "For the submitter:\n\n I updated the documentation and will supply links to the specific files\n I did not update the documentation\n I included a link to the SonarCloud branch analysis\n I added a description of changes on the current release notes\n I did not update the current release notes\n I put the ticket in review\n After integration of the pull request, I verified our bluemix test environment is not broken\n\nVerified by the reviewer:\n\n Commit message format \u2192 TSK-XXX: Your commit message.\n Submitter's update to documentation is sufficient\n SonarCloud analysis meets our standards\n Update of the current release notes reflects changes\n PR fulfills the ticket\n Edge cases and unwanted side effects are tested\n Readability", "createdAt": "2020-11-24T08:25:49Z", "url": "https://github.com/Taskana/taskana/pull/1354", "merged": true, "mergeCommit": {"oid": "5ac12037bcf71e11b79d3650f49c0bc6fdf0bf57"}, "closed": true, "closedAt": "2020-12-10T13:30:57Z", "author": {"login": "Franzi321"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdflU3dAH2gAyNTI2MzAxNjEzOmIyYWUwN2M2NDk0NjI2ZjY3YmMxNTdjNDU4MjY2YjVjMjlmOGE3MzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkd7mHgH2gAyNTI2MzAxNjEzOjI2OTE1MTk3NDJmMWQzMGJkNzZkMTAzYTQyNWI1MTFjZmM5MjA5OWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b2ae07c6494626f67bc157c458266b5c29f8a733", "author": {"user": {"login": "Franzi321", "name": null}}, "url": "https://github.com/Taskana/taskana/commit/b2ae07c6494626f67bc157c458266b5c29f8a733", "committedDate": "2020-11-24T08:18:10Z", "message": "TSK-1478: Move filter to front-end"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15210b4c4bbfa0ba3029df2634525bdc0cefaa1f", "author": {"user": {"login": "Franzi321", "name": null}}, "url": "https://github.com/Taskana/taskana/commit/15210b4c4bbfa0ba3029df2634525bdc0cefaa1f", "committedDate": "2020-11-24T08:25:26Z", "message": "TSK-1478: remove unused variable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwODgzNTYw", "url": "https://github.com/Taskana/taskana/pull/1354#pullrequestreview-540883560", "createdAt": "2020-11-30T12:58:41Z", "commit": {"oid": "15210b4c4bbfa0ba3029df2634525bdc0cefaa1f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMjo1ODo0MlrOH75-ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxMzoxNjozNFrOH76nsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU3Nzg5Mw==", "bodyText": "It seems to me that this method is written much more complicated than it actually is. By removing the negation of the first two conditions, you can delete the whole 'else' in the end.\n    if (this.accessItemsForm.value.workbasketKeyFilter) {\n      this.accessItems = this.accessItems.filter((value) =>\n        value.workbasketKey.toLowerCase().includes(this.accessItemsForm.value.workbasketKeyFilter)\n      );\n    }\n    if (this.accessItemsForm.value.accessIdFilter) {\n      this.accessItems = this.accessItems.filter((value) =>\n        value.accessName.toLowerCase().includes(this.accessItemsForm.value.accessIdFilter)\n      );\n    }", "url": "https://github.com/Taskana/taskana/pull/1354#discussion_r532577893", "createdAt": "2020-11-30T12:58:42Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/access-items-management/access-items-management.component.ts", "diffHunk": "@@ -119,6 +111,29 @@ export class AccessItemsManagementComponent implements OnInit {\n     if (!this.accessItemsForm.value.accessIdFilter) {\n       this.accessItemsForm.addControl('accessIdFilter', new FormControl());\n     }\n+    this.accessItems = accessItems;\n+    if (this.accessItemsForm.value.workbasketKeyFilter || this.accessItemsForm.value.accessIdFilter) {\n+      this.filterAccessItems();\n+    }\n+  }\n+\n+  filterAccessItems() {\n+    if (!this.accessItemsForm.value.accessIdFilter) {\n+      this.accessItems = this.accessItems.filter((value) =>\n+        value.workbasketKey.toLowerCase().includes(this.accessItemsForm.value.workbasketKeyFilter)\n+      );\n+    } else if (!this.accessItemsForm.value.workbasketKeyFilter) {\n+      this.accessItems = this.accessItems.filter((value) =>\n+        value.accessName.toLowerCase().includes(this.accessItemsForm.value.accessIdFilter)\n+      );\n+    } else {\n+      this.accessItems = this.accessItems.filter((value) =>\n+        value.workbasketKey.toLowerCase().includes(this.accessItemsForm.value.workbasketKeyFilter)\n+      );\n+      this.accessItems = this.accessItems.filter((value) =>\n+        value.accessName.toLowerCase().includes(this.accessItemsForm.value.accessIdFilter)\n+      );\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15210b4c4bbfa0ba3029df2634525bdc0cefaa1f"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU4MjkwOA==", "bodyText": "Is it possible to determine a type?", "url": "https://github.com/Taskana/taskana/pull/1354#discussion_r532582908", "createdAt": "2020-11-30T13:07:09Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/access-items-management/access-items-management.component.ts", "diffHunk": "@@ -40,7 +39,7 @@ export class AccessItemsManagementComponent implements OnInit {\n     ['workbasket-key', 'Workbasket Key']\n   ]);\n   sortModel: Sorting = new Sorting('access-id', Direction.DESC);\n-  isGroup: boolean = false;\n+  accessItems: any[];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15210b4c4bbfa0ba3029df2634525bdc0cefaa1f"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU4ODQ2Ng==", "bodyText": "Now, the action GetAccessItems contains logic which is never used (the filter). In case we are sure that we don't need this again, the action GetAccessItems could be modified. We could also create a new ticket and modify this after the redesign.", "url": "https://github.com/Taskana/taskana/pull/1354#discussion_r532588466", "createdAt": "2020-11-30T13:16:34Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/access-items-management/access-items-management.component.ts", "diffHunk": "@@ -83,14 +81,7 @@ export class AccessItemsManagementComponent implements OnInit {\n   searchForAccessItemsWorkbaskets() {\n     this.removeFocus();\n     this.store\n-      .dispatch(\n-        new GetAccessItems(\n-          [this.accessId, ...this.groups],\n-          this.accessItemsForm ? this.accessItemsForm.value.accessIdFilter : undefined,\n-          this.accessItemsForm ? this.accessItemsForm.value.workbasketKeyFilter : undefined,\n-          this.sortModel\n-        )\n-      )\n+      .dispatch(new GetAccessItems([this.accessId, ...this.groups], '', '', this.sortModel))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15210b4c4bbfa0ba3029df2634525bdc0cefaa1f"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f056578ecc19851c794b8f789d7223da1dd36db6", "author": {"user": {"login": "Franzi321", "name": null}}, "url": "https://github.com/Taskana/taskana/commit/f056578ecc19851c794b8f789d7223da1dd36db6", "committedDate": "2020-12-04T08:17:43Z", "message": "TSK-1478: adapt requested changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d830ff75964d98424949b7df0ae9ccaf468b3380", "author": {"user": {"login": "Franzi321", "name": null}}, "url": "https://github.com/Taskana/taskana/commit/d830ff75964d98424949b7df0ae9ccaf468b3380", "committedDate": "2020-12-09T12:12:29Z", "message": "TSK-1478: remove unnecessary models"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "802c6781444fd72a9c6485706b2940c24dcf3635", "author": {"user": {"login": "sofie29", "name": "Sofie Hofmann"}}, "url": "https://github.com/Taskana/taskana/commit/802c6781444fd72a9c6485706b2940c24dcf3635", "committedDate": "2020-12-09T12:30:51Z", "message": "TSK-1316: Replaced local progress bars by global one\nTSK-1316: Replaced local progress bars by global one in workplace\nTSK-1316: Rework of progress-bar component\n\n\nTSK-1316: Renamed progress-bar component\n\n\nTSK-1316: Changed progress-bar mode\nTSK-1316: Updated tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecd18ecc2b327a932dee442eeefa557fc5e8a7f9", "author": {"user": {"login": "cnguyen-de", "name": "Chi Nguyen"}}, "url": "https://github.com/Taskana/taskana/commit/ecd18ecc2b327a932dee442eeefa557fc5e8a7f9", "committedDate": "2020-12-09T12:30:51Z", "message": "TSK-1412: Distribution targets MD (#1365)\n\n* TSK-1412: Refactor workbasket dual list to workbasket distribution targets list\r\n\r\n* TSK-1412: Refactor workbasket dual list to workbasket distribution targets list\r\n\r\n* TSK-1412: rework css layout to be more dynamic and resilient\r\n\r\n* TSK-1412: new list, new dialog, new action bar\r\n\r\n* TSK-1412: Refactor workbasket dual list to workbasket distribution targets list\r\n\r\n* TSK-1412: rework css layout to be more dynamic and resilient\r\n\r\n* TSK-1412: new list, new dialog, new action bar\r\n\r\n* TSK-1412: update new workbasket distribution target list to load data internally\r\n\r\n* TSK-1412: update distribution targets\r\n\r\n* TSK-1421: enable multiple selection\r\n\r\n* TSK-1412: Updated angular theme to match with taskana\r\n\r\n* TSK-1412: quick bug fixes\r\n\r\n* TSK-1412: Rework how workbasket distribution targets list behaves\r\n\r\n* TSK-1412: Update workbasket distribution target list to new design\r\n\r\n* TSK-1412: fixed filter function in distribution targets\r\n\r\n* TSK-1412: remove unused component, rename correct CSS names\r\n\r\n* TSK-1412: clean up code in workbasket distribution targets\r\n\r\n* TSK-1412: fix bugs, rename variables\r\n\r\n* TSK-1412: finalized jest tests\r\n\r\n* TSK-1412: fix all other jest tests\r\n\r\n* TSK-1412: disable devmode\r\n\r\n* TSK-1412: remove unused imports, add tooltips"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78f68f377459ab3fc4d6ea154fb18ba7f0dec59c", "author": {"user": {"login": "sofie29", "name": "Sofie Hofmann"}}, "url": "https://github.com/Taskana/taskana/commit/78f68f377459ab3fc4d6ea154fb18ba7f0dec59c", "committedDate": "2020-12-09T12:30:51Z", "message": "TSK-1477: Update workbasket information layout (#1364)\n\n* TSK-1477: Update workbasket information layout\r\n\r\n* TSK-1477: rearrange error message for description field\r\n\r\nCo-authored-by: Chi Nguyen <c.nguyen.prog@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91560a6bbc3af42752261646926eda12b53fdea5", "author": {"user": {"login": "sofie29", "name": "Sofie Hofmann"}}, "url": "https://github.com/Taskana/taskana/commit/91560a6bbc3af42752261646926eda12b53fdea5", "committedDate": "2020-12-09T12:30:51Z", "message": "TSK-1474: Update classification details layout (#1358)\n\nCo-authored-by: Chi Nguyen <c.nguyen.prog@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34a724fccb0762afe005453ff84a8390346f9aed", "author": {"user": {"login": "sofie29", "name": "Sofie Hofmann"}}, "url": "https://github.com/Taskana/taskana/commit/34a724fccb0762afe005453ff84a8390346f9aed", "committedDate": "2020-12-09T12:30:51Z", "message": "TSK-1473: Always display classification and workbasket filter (#1357)\n\n* TSK-1473: Always display classification and workbasket filter\r\n\r\n* TSK-1473: fix jest test\r\n\r\nCo-authored-by: Chi Nguyen <c.nguyen.prog@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2691519742f1d30bd76d103a425b511cfc92099a", "author": {"user": {"login": "cnguyen-de", "name": "Chi Nguyen"}}, "url": "https://github.com/Taskana/taskana/commit/2691519742f1d30bd76d103a425b511cfc92099a", "committedDate": "2020-12-09T12:30:51Z", "message": "TSK-1484: Fixed bug int page size is overflow and all workbaskets are requested (#1367)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4586, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}