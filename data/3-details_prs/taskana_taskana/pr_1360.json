{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxODc3NDQ1", "number": 1360, "title": "TSK-1476: Rework workbasket access items", "bodyText": "For the submitter:\n\n I updated the documentation and will supply links to the specific files\n I did not update the documentation\n I included a link to the SonarCloud branch analysis\n I added a description of changes on the current release notes\n I did not update the current release notes\n I put the ticket in review\n After integration of the pull request, I verified our bluemix test environment is not broken\n\nVerified by the reviewer:\n\n Commit message format \u2192 TSK-XXX: Your commit message.\n Submitter's update to documentation is sufficient\n SonarCloud analysis meets our standards\n Update of the current release notes reflects changes\n PR fulfills the ticket\n Edge cases and unwanted side effects are tested\n Readability", "createdAt": "2020-12-03T15:41:29Z", "url": "https://github.com/Taskana/taskana/pull/1360", "merged": true, "mergeCommit": {"oid": "f42f79ef69e50de412130d836cb79806639791d0"}, "closed": true, "closedAt": "2020-12-18T14:27:59Z", "author": {"login": "Franzi321"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjx-CvAFqTU0NTkyNTQ0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnYHYeAFqTU1NTQ4MjE0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1OTI1NDQw", "url": "https://github.com/Taskana/taskana/pull/1360#pullrequestreview-545925440", "createdAt": "2020-12-07T08:35:39Z", "commit": {"oid": "456b55a58aa2dcfba4d3d390f9b63529a24a9548"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwODozNTozOVrOIAbXag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwOToxNzoxNFrOIAc-iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMxOTI3NA==", "bodyText": "In the other refactored components, we use the matTooltip: <button mat-stroked-button matTooltip=\"Add new access\" ... It would be nice to have consistency \ud83d\ude42", "url": "https://github.com/Taskana/taskana/pull/1360#discussion_r537319274", "createdAt": "2020-12-07T08:35:39Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-access-items/workbasket-access-items.component.html", "diffHunk": "@@ -3,9 +3,20 @@\n \n \t<!-- ACCESS ITEMS -->\n \t<div class=\"workbasket-access-items\">\n-\t\t<form [formGroup]=\"AccessItemsForm\">\n-\t\t\t<table formArrayName=\"accessItemsGroups\" id=\"table-access-items\" class=\"workbasket-access-items__table table-striped\">\n-\n+\t\t<div class=\"workbasket-access-items__buttons\">\n+\t\t\t<button mat-stroked-button type=\"button\" class=\"workbasket-access-items__buttons-add-access\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "456b55a58aa2dcfba4d3d390f9b63529a24a9548"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMxOTYzMQ==", "bodyText": "see above", "url": "https://github.com/Taskana/taskana/pull/1360#discussion_r537319631", "createdAt": "2020-12-07T08:36:18Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-access-items/workbasket-access-items.component.html", "diffHunk": "@@ -3,9 +3,20 @@\n \n \t<!-- ACCESS ITEMS -->\n \t<div class=\"workbasket-access-items\">\n-\t\t<form [formGroup]=\"AccessItemsForm\">\n-\t\t\t<table formArrayName=\"accessItemsGroups\" id=\"table-access-items\" class=\"workbasket-access-items__table table-striped\">\n-\n+\t\t<div class=\"workbasket-access-items__buttons\">\n+\t\t\t<button mat-stroked-button type=\"button\" class=\"workbasket-access-items__buttons-add-access\"\n+\t\t\t\t(click)=\"addAccessItem()\" data-toggle=\"tooltip\" title=\"Add new access\">\n+\t\t\t\tAdd new access\n+\t\t\t\t<mat-icon color=\"green-blue\" aria-label=\"add new access\">add</mat-icon>\n+\t\t\t</button>\n+\t\t\t<button mat-stroked-button type=\"button\" class=\"workbasket-access-items__buttons-delete-access\"\n+\t\t\t\t(click)=\"deleteAccessItems()\" data-toggle=\"tooltip\" title=\"delete selected access\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "456b55a58aa2dcfba4d3d390f9b63529a24a9548"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMyMDEzOQ==", "bodyText": "class naming is not BEM convention", "url": "https://github.com/Taskana/taskana/pull/1360#discussion_r537320139", "createdAt": "2020-12-07T08:37:05Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-access-items/workbasket-access-items.component.html", "diffHunk": "@@ -3,9 +3,20 @@\n \n \t<!-- ACCESS ITEMS -->\n \t<div class=\"workbasket-access-items\">\n-\t\t<form [formGroup]=\"AccessItemsForm\">\n-\t\t\t<table formArrayName=\"accessItemsGroups\" id=\"table-access-items\" class=\"workbasket-access-items__table table-striped\">\n-\n+\t\t<div class=\"workbasket-access-items__buttons\">\n+\t\t\t<button mat-stroked-button type=\"button\" class=\"workbasket-access-items__buttons-add-access\"\n+\t\t\t\t(click)=\"addAccessItem()\" data-toggle=\"tooltip\" title=\"Add new access\">\n+\t\t\t\tAdd new access\n+\t\t\t\t<mat-icon color=\"green-blue\" aria-label=\"add new access\">add</mat-icon>\n+\t\t\t</button>\n+\t\t\t<button mat-stroked-button type=\"button\" class=\"workbasket-access-items__buttons-delete-access\"\n+\t\t\t\t(click)=\"deleteAccessItems()\" data-toggle=\"tooltip\" title=\"delete selected access\">\n+\t\t\t\tDelete selected access\n+\t\t\t\t<mat-icon color=\"green-blue\" aria-label=\"delete access\">delete</mat-icon>\n+\t\t\t</button>\n+\t\t</div>\n+\t\t<form [formGroup]=\"AccessItemsForm\" class=\"myForm\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "456b55a58aa2dcfba4d3d390f9b63529a24a9548"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMyOTAyNQ==", "bodyText": "I introduced these lines because of this ticket: https://taskana.atlassian.net/browse/TSK-1041. The table header should always be shown.", "url": "https://github.com/Taskana/taskana/pull/1360#discussion_r537329025", "createdAt": "2020-12-07T08:51:20Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-access-items/workbasket-access-items.component.scss", "diffHunk": "@@ -27,55 +88,17 @@ td > input[type='checkbox'] {\n   color: red;\n }\n \n-th {\n-  padding: 0.25rem;\n-  position: sticky;\n-  top: 0;\n-  z-index: 3;\n-  background: white;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "456b55a58aa2dcfba4d3d390f9b63529a24a9548"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMzMjE4MQ==", "bodyText": "For ng-deep, Webstorm shows the error: Unknown pseudo selector 'ng-deep'. This inspection detects unknown and inappropriate pseudo-classes and pseudo-elements.", "url": "https://github.com/Taskana/taskana/pull/1360#discussion_r537332181", "createdAt": "2020-12-07T08:56:17Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-access-items/workbasket-access-items.component.scss", "diffHunk": "@@ -27,55 +88,17 @@ td > input[type='checkbox'] {\n   color: red;\n }\n \n-th {\n-  padding: 0.25rem;\n-  position: sticky;\n-  top: 0;\n-  z-index: 3;\n-  background: white;\n-}\n-.workbasket-access-items__table {\n-  margin-top: 20px;\n-}\n-.workbasket-access-items__table thead th {\n-  vertical-align: bottom;\n-  border-bottom: 2px solid #dee2e6;\n-}\n-\n-.workbasket-access-items__table td,\n-.table th {\n-  padding: 0.5rem;\n-  vertical-align: middle;\n-  border-top: 1px solid #dee2e6;\n-}\n-\n-.workbasket-access-items__table > thead > tr > th {\n-  max-width: 150px;\n-  border-bottom: none;\n+::ng-deep .myForm .mat-form-field-wrapper {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "456b55a58aa2dcfba4d3d390f9b63529a24a9548"}, "originalPosition": 127}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzMzMzM0OA==", "bodyText": "Unused import FormControl", "url": "https://github.com/Taskana/taskana/pull/1360#discussion_r537333348", "createdAt": "2020-12-07T08:57:58Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-access-items/workbasket-access-items.component.ts", "diffHunk": "@@ -11,15 +11,14 @@ import {\n } from '@angular/core';\n import { Observable, Subject } from 'rxjs';\n import { Select, Store } from '@ngxs/store';\n-import { FormArray, FormBuilder, Validators } from '@angular/forms';\n+import { FormArray, FormBuilder, FormControl, Validators } from '@angular/forms';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "456b55a58aa2dcfba4d3d390f9b63529a24a9548"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzM0NTY3Mg==", "bodyText": "I think this ticket https://taskana.atlassian.net/browse/TSK-1044 should be part of the rework of the workbasket access items. We can also work on this ticket in a separate PR.", "url": "https://github.com/Taskana/taskana/pull/1360#discussion_r537345672", "createdAt": "2020-12-07T09:17:14Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/workbasket-access-items/workbasket-access-items.component.html", "diffHunk": "@@ -23,86 +34,101 @@\n \t\t\t\t\t</tr>\n \t\t\t\t</thead>\n \n-\n \t\t\t\t<tbody>\n-\t\t\t\t\t<tr *ngFor=\"let accessItem of accessItemsGroups.controls; let index = index;\" [formGroupName]=\"index\">\n+\t\t\t\t\t<tr *ngFor=\"let accessItem of accessItemsGroups?.controls; let index = index;\"\n+\t\t\t\t\t\t[formGroupName]=\"index\">\n \t\t\t\t\t\t<!-- REMOVE BUTTON -->\n \t\t\t\t\t\t<td>\n-\t\t\t\t\t\t\t<button mat-button type=\"button\" style=\"padding: 3px;\" (click)=\"remove(index)\" title=\"Remove\">\n-\t\t\t\t\t\t\t\t<span class=\"material-icons md-24 red\">clear</span>\n-\t\t\t\t\t\t\t</button>\n+\t\t\t\t\t\t\t<input class=\"workbasket-access-items__permission-checkbox\" type=\"checkbox\"\n+\t\t\t\t\t\t\t\taria-label=\"selectRow\" aria-labelledby=\"selectRow\" (change)=\"selectRow($event, index)\">\n \t\t\t\t\t\t</td>\n \n \t\t\t\t\t\t<!-- ACCESS ID -->\n \t\t\t\t\t\t<td *ngIf=\"(accessItemsCustomization$ | async)?.accessId.lookupField else accessIdInput\"\n-                class=\"workbasket-access-items__typeahead\"\n-                [ngClass]=\"{\t'has-warning': (accessItemsClone[index].accessId !== accessItem.value.accessId),\n+\t\t\t\t\t\t\tclass=\"workbasket-access-items__typeahead\" [ngClass]=\"{\t'has-warning': (accessItemsClone[index].accessId !== accessItem.value.accessId),\n                 \t\t\t\t\t\t\t'has-error': !accessItem.value.accessId }\">\n \n-\t\t\t\t\t\t\t<taskana-shared-type-ahead formControlName=\"accessId\" placeHolderMessage=\"* Access id is required\"\n-                                         [validationValue]=\"toggleValidationAccessIdMap.get(index)\"\n-                                         [displayError]=\"!isFieldValid('accessItem.value.accessId', index)\"\n-                                         (selectedItem)=\"accessItemSelected($event, index)\"\n-                                         (inputField)=\"focusNewInput($event)\">\n-              </taskana-shared-type-ahead>\n-            </td>\n+\t\t\t\t\t\t\t<taskana-shared-type-ahead formControlName=\"accessId\"\n+\t\t\t\t\t\t\t\tplaceHolderMessage=\"* Access id is required\"\n+\t\t\t\t\t\t\t\t[validationValue]=\"toggleValidationAccessIdMap.get(index)\"\n+\t\t\t\t\t\t\t\t[displayError]=\"!isFieldValid('accessItem.value.accessId', index)\"\n+\t\t\t\t\t\t\t\t(selectedItem)=\"accessItemSelected($event, index)\">\n+\t\t\t\t\t\t\t</taskana-shared-type-ahead>\n+\t\t\t\t\t\t</td>\n \n \t\t\t\t\t\t<ng-template #accessIdInput>\n \t\t\t\t\t\t\t<td>\n \t\t\t\t\t\t\t\t<div [ngClass]=\"{ 'has-warning': (accessItemsClone[index].accessId !== accessItem.value.accessId),\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  'has-error': !accessItem.value.accessId && formsValidatorService.formSubmitAttempt}\">\n-                  <input matInput type=\"text\" formControlName=\"accessId\"\n-                         placeholder=\"{{accessItem.invalid ? '* Access id is required': ''}}\"\n-                         [@validation]=\"toggleValidationAccessIdMap.get(index)\" #htmlInputElement>\n+\t\t\t\t\t\t\t\t\t<input matInput type=\"text\" formControlName=\"accessId\"\n+\t\t\t\t\t\t\t\t\t\tplaceholder=\"{{accessItem.invalid ? '* Access id is required': ''}}\"\n+\t\t\t\t\t\t\t\t\t\t[@validation]=\"toggleValidationAccessIdMap.get(index)\" #htmlInputElement>\n \t\t\t\t\t\t\t\t</div>\n \t\t\t\t\t\t\t</td>\n \t\t\t\t\t\t</ng-template>\n \n \t\t\t\t\t\t<!-- SELECT ALL -->\n \t\t\t\t\t\t<td>\n-                <input class=\"workbasket-access-items__permission-checkbox\" type=\"checkbox\"  id=\"checkbox-{{index}}-00\" (change)=\"checkAll(index, $event)\" aria-label=\"checkAll\" aria-labelledby=\"checkAll\">\n-            </td>\n+\t\t\t\t\t\t\t<input class=\"workbasket-access-items__permission-checkbox\" type=\"checkbox\"\n+\t\t\t\t\t\t\t\tid=\"checkbox-{{index}}-00\" (change)=\"checkAll(index, $event)\" aria-label=\"checkAll\"\n+\t\t\t\t\t\t\t\taria-labelledby=\"checkAll\">\n+\t\t\t\t\t\t</td>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "456b55a58aa2dcfba4d3d390f9b63529a24a9548"}, "originalPosition": 85}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c6f184b3f9beb6a4a7a36ba0b192ec5144fc748", "author": {"user": {"login": "Franzi321", "name": null}}, "url": "https://github.com/Taskana/taskana/commit/1c6f184b3f9beb6a4a7a36ba0b192ec5144fc748", "committedDate": "2020-12-18T13:19:45Z", "message": "TSK-1476: Rework Workbasket Access Items"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a641838bf6b5e63abaa2e15ed12fa119ea61b590", "author": {"user": {"login": "Franzi321", "name": null}}, "url": "https://github.com/Taskana/taskana/commit/a641838bf6b5e63abaa2e15ed12fa119ea61b590", "committedDate": "2020-12-18T13:22:26Z", "message": "TSK-1476: Rework Workbasket Access Items"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a3a4f1c11e68382f198647d6aeff9897a900130", "author": {"user": {"login": "Franzi321", "name": null}}, "url": "https://github.com/Taskana/taskana/commit/2a3a4f1c11e68382f198647d6aeff9897a900130", "committedDate": "2020-12-18T13:22:41Z", "message": "TSK-1476: update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1NDgyMTQ0", "url": "https://github.com/Taskana/taskana/pull/1360#pullrequestreview-555482144", "createdAt": "2020-12-18T13:26:04Z", "commit": {"oid": "2a3a4f1c11e68382f198647d6aeff9897a900130"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4587, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}