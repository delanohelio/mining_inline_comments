{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMzQxMDEz", "number": 1154, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNTo1Mjo0MFrOEJ8Ovw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODo0ODoxOVrOEJ_6zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4ODU5NDU1OnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/classification-overview/classification-overview.component.ts", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNTo1Mjo0MFrOGqstlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODoxMDo1MlrOGqw5Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQyNTk0Mg==", "bodyText": "what's the reason for this timeout? is this really necessary? If yes, please document the reason", "url": "https://github.com/Taskana/taskana/pull/1154#discussion_r447425942", "createdAt": "2020-06-30T05:52:40Z", "author": {"login": "mustaphazorgati"}, "path": "web/src/app/administration/components/classification-overview/classification-overview.component.ts", "diffHunk": "@@ -36,6 +37,7 @@ export class ClassificationOverviewComponent implements OnInit, OnDestroy {\n           if (this.routerParams.id) {\n             this.showDetail = true;\n             this.store.dispatch(new SelectClassification(this.routerParams.id));\n+            setTimeout(() => this.store.dispatch(new GetClassifications()), 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e03332d9c8d54b2324b4a7a6e9898eca3a8d67a5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQ5NDQ5MA==", "bodyText": "I changed this to a subscription. We have to wait for the first action to finish in order to get the classifications which belong to the new classification type.", "url": "https://github.com/Taskana/taskana/pull/1154#discussion_r447494490", "createdAt": "2020-06-30T08:10:52Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/classification-overview/classification-overview.component.ts", "diffHunk": "@@ -36,6 +37,7 @@ export class ClassificationOverviewComponent implements OnInit, OnDestroy {\n           if (this.routerParams.id) {\n             this.showDetail = true;\n             this.store.dispatch(new SelectClassification(this.routerParams.id));\n+            setTimeout(() => this.store.dispatch(new GetClassifications()), 0);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQyNTk0Mg=="}, "originalCommit": {"oid": "e03332d9c8d54b2324b4a7a6e9898eca3a8d67a5"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4ODU5NTczOnYy", "diffSide": "RIGHT", "path": "web/src/app/shared/store/classification-store/classification.state.ts", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNTo1MzoxOVrOGqsuVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwNTo1MzoxOVrOGqsuVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQyNjEzMg==", "bodyText": "Can't we just do this always within the patchState call above?", "url": "https://github.com/Taskana/taskana/pull/1154#discussion_r447426132", "createdAt": "2020-06-30T05:53:19Z", "author": {"login": "mustaphazorgati"}, "path": "web/src/app/shared/store/classification-store/classification.state.ts", "diffHunk": "@@ -53,6 +53,13 @@ export class ClassificationState implements NgxsAfterBootstrap {\n             selectedClassification,\n             action: ACTION.DEFAULT\n           });\n+\n+          // Change the type when entering a deep link and old / new types don't match\n+          if (selectedClassification.type !== ctx.getState().selectedClassificationType) {\n+            ctx.patchState({\n+              selectedClassificationType: selectedClassification.type\n+            });\n+          }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e03332d9c8d54b2324b4a7a6e9898eca3a8d67a5"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4OTE5ODg1OnYy", "diffSide": "RIGHT", "path": "web/src/app/administration/components/classification-overview/classification-overview.component.ts", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODo0ODoxOVrOGqyZzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOTowMzowNFrOGqy-2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUxOTE4Mw==", "bodyText": "@cnguyen-de is this pipe necessary? I don't think so.", "url": "https://github.com/Taskana/taskana/pull/1154#discussion_r447519183", "createdAt": "2020-06-30T08:48:19Z", "author": {"login": "mustaphazorgati"}, "path": "web/src/app/administration/components/classification-overview/classification-overview.component.ts", "diffHunk": "@@ -35,7 +36,9 @@ export class ClassificationOverviewComponent implements OnInit, OnDestroy {\n \n           if (this.routerParams.id) {\n             this.showDetail = true;\n-            this.store.dispatch(new SelectClassification(this.routerParams.id));\n+            this.store.dispatch(new SelectClassification(this.routerParams.id))\n+              .pipe(takeUntil(this.destroy$))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38cac2c08cda4201d1b3a93de05c70539d831a0f"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUyMjg1OQ==", "bodyText": "imo it can be removed. \"The observable would complete when the dispatched action's handling (and 'child' action handling) is completed. No unsubscription necessary.\"", "url": "https://github.com/Taskana/taskana/pull/1154#discussion_r447522859", "createdAt": "2020-06-30T08:53:52Z", "author": {"login": "cnguyen-de"}, "path": "web/src/app/administration/components/classification-overview/classification-overview.component.ts", "diffHunk": "@@ -35,7 +36,9 @@ export class ClassificationOverviewComponent implements OnInit, OnDestroy {\n \n           if (this.routerParams.id) {\n             this.showDetail = true;\n-            this.store.dispatch(new SelectClassification(this.routerParams.id));\n+            this.store.dispatch(new SelectClassification(this.routerParams.id))\n+              .pipe(takeUntil(this.destroy$))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUxOTE4Mw=="}, "originalCommit": {"oid": "38cac2c08cda4201d1b3a93de05c70539d831a0f"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUyMzQwMA==", "bodyText": "@sofie29 you can remove it then :)\nSorry for the double roundtrip", "url": "https://github.com/Taskana/taskana/pull/1154#discussion_r447523400", "createdAt": "2020-06-30T08:54:43Z", "author": {"login": "mustaphazorgati"}, "path": "web/src/app/administration/components/classification-overview/classification-overview.component.ts", "diffHunk": "@@ -35,7 +36,9 @@ export class ClassificationOverviewComponent implements OnInit, OnDestroy {\n \n           if (this.routerParams.id) {\n             this.showDetail = true;\n-            this.store.dispatch(new SelectClassification(this.routerParams.id));\n+            this.store.dispatch(new SelectClassification(this.routerParams.id))\n+              .pipe(takeUntil(this.destroy$))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUxOTE4Mw=="}, "originalCommit": {"oid": "38cac2c08cda4201d1b3a93de05c70539d831a0f"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUyODY2NA==", "bodyText": "removed", "url": "https://github.com/Taskana/taskana/pull/1154#discussion_r447528664", "createdAt": "2020-06-30T09:03:04Z", "author": {"login": "sofie29"}, "path": "web/src/app/administration/components/classification-overview/classification-overview.component.ts", "diffHunk": "@@ -35,7 +36,9 @@ export class ClassificationOverviewComponent implements OnInit, OnDestroy {\n \n           if (this.routerParams.id) {\n             this.showDetail = true;\n-            this.store.dispatch(new SelectClassification(this.routerParams.id));\n+            this.store.dispatch(new SelectClassification(this.routerParams.id))\n+              .pipe(takeUntil(this.destroy$))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUxOTE4Mw=="}, "originalCommit": {"oid": "38cac2c08cda4201d1b3a93de05c70539d831a0f"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4269, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}