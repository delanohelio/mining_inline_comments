{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNDE1Mjg5", "number": 1212, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMToyMToxN1rOEVyWLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMToyNzoxMFrOEVydBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMjgwNDMwOnYy", "diffSide": "RIGHT", "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/task/rest/assembler/TaskCommentRepresentationModelAssembler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMToyMToxN1rOG8vUlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxNzowOTo0MlrOG_BUKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM0MzA2Mg==", "bodyText": "Why do we add the metadata twice and do not simply get it from the model?", "url": "https://github.com/Taskana/taskana/pull/1212#discussion_r466343062", "createdAt": "2020-08-06T11:21:17Z", "author": {"login": "holgerhagen"}, "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/task/rest/assembler/TaskCommentRepresentationModelAssembler.java", "diffHunk": "@@ -70,9 +68,9 @@ public TaskanaPagedModelKeys getProperty() {\n   }\n \n   @Override\n-  @PageLinks(Mapping.URL_TASK_COMMENTS)\n   public TaskanaPagedModel<TaskCommentRepresentationModel> toPageModel(\n       Iterable<TaskComment> taskComments, PageMetadata pageMetadata) {\n-    return TaskanaPagingAssembler.super.toPageModel(taskComments, pageMetadata);\n+    return addLinksToPageResource(\n+        TaskanaPagingAssembler.super.toPageModel(taskComments, pageMetadata), pageMetadata);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8374780a1e1a0d8367f1be5f5060d93a36591bc0"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODczNTAxOA==", "bodyText": "You're right! Thank you!", "url": "https://github.com/Taskana/taskana/pull/1212#discussion_r468735018", "createdAt": "2020-08-11T17:09:42Z", "author": {"login": "nkolytschew"}, "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/task/rest/assembler/TaskCommentRepresentationModelAssembler.java", "diffHunk": "@@ -70,9 +68,9 @@ public TaskanaPagedModelKeys getProperty() {\n   }\n \n   @Override\n-  @PageLinks(Mapping.URL_TASK_COMMENTS)\n   public TaskanaPagedModel<TaskCommentRepresentationModel> toPageModel(\n       Iterable<TaskComment> taskComments, PageMetadata pageMetadata) {\n-    return TaskanaPagingAssembler.super.toPageModel(taskComments, pageMetadata);\n+    return addLinksToPageResource(\n+        TaskanaPagingAssembler.super.toPageModel(taskComments, pageMetadata), pageMetadata);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM0MzA2Mg=="}, "originalCommit": {"oid": "8374780a1e1a0d8367f1be5f5060d93a36591bc0"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMjgwNzE4OnYy", "diffSide": "RIGHT", "path": "history/taskana-simplehistory-rest-spring/src/main/java/pro/taskana/simplehistory/rest/assembler/TaskHistoryEventListResourceAssembler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMToyMjoyMFrOG8vWWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMToyMjoyMFrOG8vWWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM0MzUxMg==", "bodyText": "I understand that we do not change the history events to the representation model structure in this PR? Is there a ticket for it to do it later on?", "url": "https://github.com/Taskana/taskana/pull/1212#discussion_r466343512", "createdAt": "2020-08-06T11:22:20Z", "author": {"login": "holgerhagen"}, "path": "history/taskana-simplehistory-rest-spring/src/main/java/pro/taskana/simplehistory/rest/assembler/TaskHistoryEventListResourceAssembler.java", "diffHunk": "@@ -4,53 +4,57 @@\n \n import java.util.ArrayList;\n import java.util.List;\n+import java.util.Map;\n+import javax.servlet.http.HttpServletRequest;\n import org.springframework.hateoas.IanaLinkRelations;\n import org.springframework.hateoas.Link;\n import org.springframework.hateoas.PagedModel.PageMetadata;\n+import org.springframework.web.context.request.RequestContextHolder;\n+import org.springframework.web.context.request.ServletRequestAttributes;\n+import org.springframework.web.servlet.support.ServletUriComponentsBuilder;\n+import org.springframework.web.util.UriComponentsBuilder;\n \n-import pro.taskana.resource.rest.AbstractRessourcesAssembler;\n import pro.taskana.simplehistory.impl.HistoryEventImpl;\n import pro.taskana.simplehistory.rest.TaskHistoryEventController;\n import pro.taskana.simplehistory.rest.models.TaskHistoryEventListResource;\n import pro.taskana.simplehistory.rest.models.TaskHistoryEventRepresentationModel;\n \n /** Mapper to convert from a list of HistoryEventImpl to a TaskHistoryEventResource. */\n-public class TaskHistoryEventListResourceAssembler extends AbstractRessourcesAssembler {\n+public class TaskHistoryEventListResourceAssembler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8374780a1e1a0d8367f1be5f5060d93a36591bc0"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMjgyMTgyOnYy", "diffSide": "RIGHT", "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/common/rest/assembler/TaskanaPagingAssembler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMToyNzoxMFrOG8vfGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMToyNzoxMFrOG8vfGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM0NTc1NQ==", "bodyText": "would addLinksToPage'd'Resource be the better name?", "url": "https://github.com/Taskana/taskana/pull/1212#discussion_r466345755", "createdAt": "2020-08-06T11:27:10Z", "author": {"login": "holgerhagen"}, "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/common/rest/assembler/TaskanaPagingAssembler.java", "diffHunk": "@@ -25,4 +33,46 @@\n   default TaskanaPagedModel<D> toPageModel(Iterable<T> entities) {\n     return toPageModel(entities, null);\n   }\n+\n+  default TaskanaPagedModel<D> addLinksToPageResource(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8374780a1e1a0d8367f1be5f5060d93a36591bc0"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4141, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}