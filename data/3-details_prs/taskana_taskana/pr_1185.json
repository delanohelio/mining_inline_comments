{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0NzkxODc0", "number": 1185, "title": "TSK-1085: Hateoas self-links which contain variables are not working \u2026", "bodyText": "\u2026for Paged representationmodels\nBug Fix\n\nremove AbstractRessourcesAssembler.java\nupdate Aspect\nupdate unit-test and test \"href-self\" part of json", "createdAt": "2020-07-21T23:10:53Z", "url": "https://github.com/Taskana/taskana/pull/1185", "merged": true, "mergeCommit": {"oid": "5030415f17763f79d88a8348666b4bb58627bc21"}, "closed": true, "closedAt": "2020-08-05T13:53:42Z", "author": {"login": "nkolytschew"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3XJwBgBqjM1NzQ4MzM5OTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc74E5ngFqTQ2MTUwNzc0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2076e8e9f2add0743fce3d3b005ec8e5084c50a", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/e2076e8e9f2add0743fce3d3b005ec8e5084c50a", "committedDate": "2020-07-21T22:27:50Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json"}, "afterCommit": {"oid": "63bb46b11e452def85fc8a9dce0a4455ac8efbe1", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/63bb46b11e452def85fc8a9dce0a4455ac8efbe1", "committedDate": "2020-07-22T09:09:59Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "63bb46b11e452def85fc8a9dce0a4455ac8efbe1", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/63bb46b11e452def85fc8a9dce0a4455ac8efbe1", "committedDate": "2020-07-22T09:09:59Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}, "afterCommit": {"oid": "4de6bdbe5c676ba3029ebbee5d0b46909695542c", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/4de6bdbe5c676ba3029ebbee5d0b46909695542c", "committedDate": "2020-07-22T09:44:16Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4de6bdbe5c676ba3029ebbee5d0b46909695542c", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/4de6bdbe5c676ba3029ebbee5d0b46909695542c", "committedDate": "2020-07-22T09:44:16Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}, "afterCommit": {"oid": "fe4691f6cb148137cc7fb5c4e5a9d0b96049f960", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/fe4691f6cb148137cc7fb5c4e5a9d0b96049f960", "committedDate": "2020-07-22T09:56:54Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe4691f6cb148137cc7fb5c4e5a9d0b96049f960", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/fe4691f6cb148137cc7fb5c4e5a9d0b96049f960", "committedDate": "2020-07-22T09:56:54Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}, "afterCommit": {"oid": "e5107be6ac7d1d43c65e42910aaf34a97e95f22e", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/e5107be6ac7d1d43c65e42910aaf34a97e95f22e", "committedDate": "2020-07-23T09:21:08Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MDM3NTAx", "url": "https://github.com/Taskana/taskana/pull/1185#pullrequestreview-454037501", "createdAt": "2020-07-23T11:19:53Z", "commit": {"oid": "e5107be6ac7d1d43c65e42910aaf34a97e95f22e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMToxOTo1M1rOG2GOLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMToxOTo1M1rOG2GOLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3ODIyMg==", "bodyText": "Wouldn't it be better to refactor this assembler like the workbasket assembler and get rid of the old paging style?", "url": "https://github.com/Taskana/taskana/pull/1185#discussion_r459378222", "createdAt": "2020-07-23T11:19:53Z", "author": {"login": "holgerhagen"}, "path": "history/taskana-simplehistory-rest-spring/src/main/java/pro/taskana/simplehistory/rest/resource/TaskHistoryEventListResourceAssembler.java", "diffHunk": "@@ -4,56 +4,74 @@\n \n import java.util.ArrayList;\n import java.util.List;\n+import java.util.Map;\n+import javax.servlet.http.HttpServletRequest;\n import org.springframework.hateoas.IanaLinkRelations;\n import org.springframework.hateoas.Link;\n import org.springframework.hateoas.PagedModel.PageMetadata;\n+import org.springframework.web.context.request.RequestContextHolder;\n+import org.springframework.web.context.request.ServletRequestAttributes;\n+import org.springframework.web.servlet.support.ServletUriComponentsBuilder;\n+import org.springframework.web.util.UriComponentsBuilder;\n \n-import pro.taskana.resource.rest.AbstractRessourcesAssembler;\n+import pro.taskana.common.rest.models.PagedResources;\n import pro.taskana.simplehistory.impl.HistoryEventImpl;\n import pro.taskana.simplehistory.rest.TaskHistoryEventController;\n \n-/** Mapper to convert from a list of HistoryEventImpl to a TaskHistoryEventResource. */\n-public class TaskHistoryEventListResourceAssembler extends AbstractRessourcesAssembler {\n-\n-  public TaskHistoryEventListResource toResources(\n-      List<HistoryEventImpl> historyEvents, PageMetadata pageMetadata) {\n+/**\n+ * Mapper to convert from a list of HistoryEventImpl to a TaskHistoryEventResource.\n+ */\n+public class TaskHistoryEventListResourceAssembler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5107be6ac7d1d43c65e42910aaf34a97e95f22e"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MDkyMDI2", "url": "https://github.com/Taskana/taskana/pull/1185#pullrequestreview-454092026", "createdAt": "2020-07-23T12:45:33Z", "commit": {"oid": "e5107be6ac7d1d43c65e42910aaf34a97e95f22e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMjo0NTozM1rOG2I0cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMjo0NTozM1rOG2I0cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQyMDc4NA==", "bodyText": "please also remove this dependency ;)", "url": "https://github.com/Taskana/taskana/pull/1185#discussion_r459420784", "createdAt": "2020-07-23T12:45:33Z", "author": {"login": "mustaphazorgati"}, "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/resource/rest/AbstractRessourcesAssembler.java", "diffHunk": "@@ -1,68 +0,0 @@\n-package pro.taskana.resource.rest;\n-\n-import java.util.Map;\n-import javax.servlet.http.HttpServletRequest;\n-import org.springframework.hateoas.Link;\n-import org.springframework.hateoas.PagedModel.PageMetadata;\n-import org.springframework.web.context.request.RequestContextHolder;\n-import org.springframework.web.context.request.ServletRequestAttributes;\n-import org.springframework.web.servlet.support.ServletUriComponentsBuilder;\n-import org.springframework.web.util.UriComponentsBuilder;\n-\n-import pro.taskana.common.rest.models.PagedResources;\n-\n-/**\n- * Abstract resources assembler for taskana REST controller with pageable resources. This method is\n- * deprecated, it can be removed after fixing taskana-simple-history references\n- */\n-// TODO: @Deprecated\n-// TODO: please remove spring-webmvc dependency", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5107be6ac7d1d43c65e42910aaf34a97e95f22e"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3cc7dcb46ab223392b3bfeb23b5b56894cdf4ba", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/b3cc7dcb46ab223392b3bfeb23b5b56894cdf4ba", "committedDate": "2020-07-29T19:38:25Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e5107be6ac7d1d43c65e42910aaf34a97e95f22e", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/e5107be6ac7d1d43c65e42910aaf34a97e95f22e", "committedDate": "2020-07-23T09:21:08Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}, "afterCommit": {"oid": "b3cc7dcb46ab223392b3bfeb23b5b56894cdf4ba", "author": {"user": {"login": "nkolytschew", "name": "Nik"}}, "url": "https://github.com/Taskana/taskana/commit/b3cc7dcb46ab223392b3bfeb23b5b56894cdf4ba", "committedDate": "2020-07-29T19:38:25Z", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNTA3NzQ4", "url": "https://github.com/Taskana/taskana/pull/1185#pullrequestreview-461507748", "createdAt": "2020-08-05T09:47:39Z", "commit": {"oid": "b3cc7dcb46ab223392b3bfeb23b5b56894cdf4ba"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4453, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}