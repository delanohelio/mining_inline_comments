{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MDQ5NDc1", "number": 517, "title": "Notifications are not updated automatically(v8.0.3)", "bodyText": "Issue being fixed or feature implemented\n\n\n\nNMA-617\nFixed the issue with incorrect value of NotificationItemContact.getDate() causing the notifications count to not be updated.\n(this is a leftover after data formats change in platform)\nRelated PR's and Dependencies\n\n#513\n(merge directly to chain-sync-phase-3a or change base to evonet-develop)\nScreenshots / Videos\n\nHow Has This Been Tested?\n\n\n\n\n QA (Mobile Team)\n\nChecklist:\n\n\n I have performed a self-review of my own code and added comments where necessary\n I have added or updated relevant unit/integration/functional/e2e tests", "createdAt": "2020-10-01T07:55:37Z", "url": "https://github.com/dashevo/dash-wallet/pull/517", "merged": true, "mergeCommit": {"oid": "ac57701b8ea68f9ed5712f06acba20244534be4c"}, "closed": true, "closedAt": "2020-10-07T01:49:19Z", "author": {"login": "tomasz-ludek"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKJ-4_gH2gAyNDk2MDQ5NDc1OjFlZDY3ZjJjOTYyYWY2MGUwOTJkMDI0M2JhYmNlMmNlMTU0YmNkZjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQBmo8AH2gAyNDk2MDQ5NDc1OjdiMGMwNjk5MzYzYmZiZDM1MWZkOWMzZTZlZTJjZDE1Zjk3NTU5ZTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1ed67f2c962af60e092d0243babce2ce154bcdf0", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/1ed67f2c962af60e092d0243babce2ce154bcdf0", "committedDate": "2020-09-18T18:34:19Z", "message": "Use 0.15-SNAPSHOT for dpp, dashpay, dapi-client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1354fcad8fdb06104a5303fe84ce25ed9b42bd2a", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/1354fcad8fdb06104a5303fe84ce25ed9b42bd2a", "committedDate": "2020-09-19T01:58:36Z", "message": "Update for DPP 0.15, new dpns/dashpay contracts, database tables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9d262ea38241110aca09e3b5d25206154fa6f46", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/f9d262ea38241110aca09e3b5d25206154fa6f46", "committedDate": "2020-09-19T17:14:07Z", "message": "Set unique property on username"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1deafa3b404b19722ab479bda10ac489492ec1ff", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/1deafa3b404b19722ab479bda10ac489492ec1ff", "committedDate": "2020-09-22T22:19:02Z", "message": "Handle updated profiles from Platform and refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "090df0b4bd6fb6d3964fa5c8404f63af66b27d87", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/090df0b4bd6fb6d3964fa5c8404f63af66b27d87", "committedDate": "2020-09-24T15:58:49Z", "message": "BlockchainIdentityData:  Add userId field\n\nThis allows loading an identity before the credit funding\ntransaction is found."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5601c2525486b8b0ae8b2d07b29dc4a9c82af81", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/e5601c2525486b8b0ae8b2d07b29dc4a9c82af81", "committedDate": "2020-09-24T15:58:50Z", "message": "BlockchainState: Notification shows sync percentage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff9b5a7e42de88a5a8197f874c80744b21490613", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/ff9b5a7e42de88a5a8197f874c80744b21490613", "committedDate": "2020-09-24T15:58:50Z", "message": "BlockchainState: Notification shows sync percentage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db91501fa06211eca89dc7e7bb9d7aa44cef3892", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/db91501fa06211eca89dc7e7bb9d7aa44cef3892", "committedDate": "2020-09-24T15:58:50Z", "message": "Refactor database clear when restarting/wiping the app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "927595c9418a37bce0d6d6630224e2d1652de695", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/927595c9418a37bce0d6d6630224e2d1652de695", "committedDate": "2020-09-24T16:02:55Z", "message": "Check for identity before syncing chain."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "289be3cf59ae3d4417b2b310b54256a87cd2cf68", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/289be3cf59ae3d4417b2b310b54256a87cd2cf68", "committedDate": "2020-09-24T16:03:45Z", "message": "Add database json file and handle the cftx after the fact"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b5b1c88f387dd4c2fc19d3e184806fdac8b923d", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/4b5b1c88f387dd4c2fc19d3e184806fdac8b923d", "committedDate": "2020-09-25T18:33:47Z", "message": "catch profile fetching exception and fix getIdentityByPublicKey"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36b7be6b44b24a506783648c4eeeb58fb942c023", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/36b7be6b44b24a506783648c4eeeb58fb942c023", "committedDate": "2020-09-25T18:34:35Z", "message": "Change method of submitting bloom filters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1a8d002665d6365f421b5b67cf29dd9cb7a3d69", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/c1a8d002665d6365f421b5b67cf29dd9cb7a3d69", "committedDate": "2020-09-29T16:23:40Z", "message": "Fix recovery of passphrase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc9449946f8dfd05c38212706579e6d22a14952a", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/cc9449946f8dfd05c38212706579e6d22a14952a", "committedDate": "2020-09-29T16:37:21Z", "message": "Refactor DashPayProfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5964f05eb56c7d42d01f1e1b5d4d084f4f6d1c50", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/5964f05eb56c7d42d01f1e1b5d4d084f4f6d1c50", "committedDate": "2020-09-29T18:21:39Z", "message": "Merge branch 'evonet-develop' of https://github.com/dashevo/dash-wallet into dpp-0.15"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15f7ef210c3b2a4b710726c52c6f46a0350f60da", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/15f7ef210c3b2a4b710726c52c6f46a0350f60da", "committedDate": "2020-09-29T18:45:40Z", "message": "Merge branch 'dpp-0.15' of https://github.com/dashevo/dash-wallet into chain-sync-phase-3a"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "858f89f01c04abec252b520b13ffd642d7c7f46e", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/858f89f01c04abec252b520b13ffd642d7c7f46e", "committedDate": "2020-09-30T15:25:44Z", "message": "CreateIdentityService: remove commented code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bbc6bf4fb3f25285938415403ae3386297e3658", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/5bbc6bf4fb3f25285938415403ae3386297e3658", "committedDate": "2020-09-30T15:27:02Z", "message": "PlatformRepo: Fix loading of blockchainIdentity from Database"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66f955eca73ab75af529904f6b80e91a799994e5", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/66f955eca73ab75af529904f6b80e91a799994e5", "committedDate": "2020-09-30T15:27:56Z", "message": "ReceiveInfoView: Use observer to get profile information\n\nFixes crash"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b86ba48be297898cb5cee2e7d97971394f4fb20", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/1b86ba48be297898cb5cee2e7d97971394f4fb20", "committedDate": "2020-09-30T22:33:25Z", "message": "MoreFragment: Show the user profile only if the user has registered on PlatformRepo.kt\n\nThis resolves a crash when accessing the More menu before registring a username"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67bc825f3c23af4148ea4a932cabcec43150b9cc", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/67bc825f3c23af4148ea4a932cabcec43150b9cc", "committedDate": "2020-09-30T22:34:42Z", "message": "PlatformRepo: Modify blockchainIdentity creation depending user registration state"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "983529e01a4381dc89932979bb018a948a197c03", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/983529e01a4381dc89932979bb018a948a197c03", "committedDate": "2020-09-30T22:47:04Z", "message": "Merge branch 'evonet-develop' of https://github.com/dashevo/dash-wallet into chain-sync-phase-3a"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2930d3b0c962e434f042df9e467aadc5d5a86f2b", "author": {"user": {"login": "tomasz-ludek", "name": null}}, "url": "https://github.com/dashevo/dash-wallet/commit/2930d3b0c962e434f042df9e467aadc5d5a86f2b", "committedDate": "2020-10-01T07:52:39Z", "message": "Fixed the issue with incorrect value of NotificationItemContact.getDate() causing the notifications count to not be updated.\n(this is a leftover after data formats change in platform)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMDk3MjU5", "url": "https://github.com/dashevo/dash-wallet/pull/517#pullrequestreview-500097259", "createdAt": "2020-10-01T08:00:42Z", "commit": {"oid": "2930d3b0c962e434f042df9e467aadc5d5a86f2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwODowMDo0MlrOHa-4bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwODowMDo0MlrOHa-4bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA1NTI3OA==", "bodyText": "Based on the documentation of apply() method and lack of issues I suggest to use it over commit()\n\nYou don't need to worry about Android component lifecycles and their interaction with apply() writing to disk. The framework makes sure in-flight disk writes from apply() complete before switching states.\n\nsource: https://developer.android.com/reference/android/content/SharedPreferences.Editor#apply()", "url": "https://github.com/dashevo/dash-wallet/pull/517#discussion_r498055278", "createdAt": "2020-10-01T08:00:42Z", "author": {"login": "tomasz-ludek"}, "path": "common/src/main/java/org/dash/wallet/common/Configuration.java", "diffHunk": "@@ -441,6 +441,6 @@ public long getLastSeenNotificationTime() {\n     }\n \n     public void setPrefsLastSeenNotificationTime(long lastSeenNotificationTime) {\n-        prefs.edit().putLong(PREFS_LAST_SEEN_NOTIFICATION_TIME, lastSeenNotificationTime).commit();\n+        prefs.edit().putLong(PREFS_LAST_SEEN_NOTIFICATION_TIME, lastSeenNotificationTime).apply();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2930d3b0c962e434f042df9e467aadc5d5a86f2b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMDUxNzg0", "url": "https://github.com/dashevo/dash-wallet/pull/517#pullrequestreview-503051784", "createdAt": "2020-10-06T14:51:06Z", "commit": {"oid": "2930d3b0c962e434f042df9e467aadc5d5a86f2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b0c0699363bfbd351fd9c3e6ee2cd15f97559e2", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/7b0c0699363bfbd351fd9c3e6ee2cd15f97559e2", "committedDate": "2020-10-07T00:12:08Z", "message": "Merge branch 'evonet-develop' into notifications-count-update"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2833, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}