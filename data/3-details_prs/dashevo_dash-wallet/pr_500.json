{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3MTkxNzc1", "number": 500, "title": "NMA-595: Save backup file without PIN", "bodyText": "Issue being fixed or feature implemented\n\n\n\nNMA-595\nRemove the wallet password from the backup file since v7 passwords are not the same as the user's PIN.\nRelated PR's and Dependencies\n\nnone\nScreenshots / Videos\n\nnone\nHow Has This Been Tested?\n\n\n\n\n QA (Mobile Team)\n\nChecklist:\n\n\n I have performed a self-review of my own code and added comments where necessary\n I have added or updated relevant unit/integration/functional/e2e tests", "createdAt": "2020-09-01T16:14:59Z", "url": "https://github.com/dashevo/dash-wallet/pull/500", "merged": true, "mergeCommit": {"oid": "97879b9fdf07f021c7436ee6a54ce75c332f2a52"}, "closed": true, "closedAt": "2020-09-15T02:20:38Z", "author": {"login": "HashEngineering"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEpvPDAH2gAyNDc3MTkxNzc1OmUyOWJkNmQ0NzI3MzUxNWQ0ZTcyOGU2YjRjMGE0YzRhNzRkNTQzNmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdIuFVEgFqTQ4NzQ4MzY5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e29bd6d47273515d4e728e6b4c0a4c4a74d5436f", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/e29bd6d47273515d4e728e6b4c0a4c4a74d5436f", "committedDate": "2020-09-01T16:10:38Z", "message": "BackupWalletDialogFragment: Save backup file without PIN"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwNzEwMDM3", "url": "https://github.com/dashevo/dash-wallet/pull/500#pullrequestreview-480710037", "createdAt": "2020-09-02T11:02:59Z", "commit": {"oid": "e29bd6d47273515d4e728e6b4c0a4c4a74d5436f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMTowMjo1OVrOHLp_Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMTowMjo1OVrOHLp_Xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk4NDM1MA==", "bodyText": "This could (or rather should) be moved to BackupWalletDialogFragment.onCreate(...) as a one-time operation.", "url": "https://github.com/dashevo/dash-wallet/pull/500#discussion_r481984350", "createdAt": "2020-09-02T11:02:59Z", "author": {"login": "tomasz-ludek"}, "path": "wallet/src/de/schildbach/wallet/ui/BackupWalletDialogFragment.java", "diffHunk": "@@ -232,7 +248,39 @@ private void updateView() {\n         positiveButton.setEnabled(hasPassword && hasPasswordAgain);\n     }\n \n-    private void backupWallet(final String password) {\n+    private void backupWallet(final String backupPassword) {\n+        try {\n+            final Protos.Wallet walletProto = new WalletProtobufSerializer().walletToProto(wallet);\n+\n+            SecurityGuard securityGuard = new SecurityGuard();\n+            if (wallet.isEncrypted()) {\n+                String walletPassword = securityGuard.retrievePassword();\n+                backgroundThread = new HandlerThread(\"backgroundThread\", Process.THREAD_PRIORITY_BACKGROUND);\n+                backgroundThread.start();\n+                backgroundHandler = new Handler(backgroundThread.getLooper());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e29bd6d47273515d4e728e6b4c0a4c4a74d5436f"}, "originalPosition": 74}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e03147e597783a6ba624e5c53b9d6b44be3e4c0e", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/e03147e597783a6ba624e5c53b9d6b44be3e4c0e", "committedDate": "2020-09-02T14:48:20Z", "message": "BackupWalletDialogFragment: Move init background stuff to onCreateDialog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3NDgzNjk5", "url": "https://github.com/dashevo/dash-wallet/pull/500#pullrequestreview-487483699", "createdAt": "2020-09-14T07:30:05Z", "commit": {"oid": "e03147e597783a6ba624e5c53b9d6b44be3e4c0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2815, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}