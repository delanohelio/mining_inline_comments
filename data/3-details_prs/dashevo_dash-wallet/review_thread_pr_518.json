{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MzE4MTgz", "number": 518, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDo0ODoyNVrOEpqxLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDo0ODoyNVrOEpqxLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMTI3NzkxOnYy", "diffSide": "RIGHT", "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMDo0ODoyNVrOHbetyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQwMTo1NzowNFrOHbfekg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3Njg0MQ==", "bodyText": "Since 16 is used twice, it could be stored in a variable to ensure consistent usage through the code.", "url": "https://github.com/dashevo/dash-wallet/pull/518#discussion_r498576841", "createdAt": "2020-10-02T00:48:25Z", "author": {"login": "sambarboza"}, "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "diffHunk": "@@ -518,34 +518,36 @@ private void check() {\n                         }\n \n                         if (!connectTrustedPeerOnly) {\n+                            // First use the masternode list that is included\n                             try {\n-                                peers.addAll(\n-                                        Arrays.asList(normalPeerDiscovery.getPeers(services, timeoutValue, timeoutUnit)));\n+                                SimplifiedMasternodeList mnlist = org.bitcoinj.core.Context.get().masternodeListManager.getListAtChainTip();\n+                                MasternodePeerDiscovery discovery = new MasternodePeerDiscovery(mnlist);\n+                                peers.addAll(Arrays.asList(discovery.getPeers(services, timeoutValue, timeoutUnit)));\n                             } catch (PeerDiscoveryException x) {\n-                                //swallow and continue with another method of connection.\n-                                log.info(\"DNS peer discovery failed: \"+ x.getMessage());\n-                                if(x.getCause() != null)\n-                                    log.info(  \"cause:  \" + x.getCause().getMessage());\n+                                //swallow and continue with another method of connection\n+                                log.info(\"DMN List peer discovery failed: \"+ x.getMessage());\n                             }\n-                            if(peers.size() < 10) {\n-                                log.info(\"DNS peer discovery returned less than 10 nodes.  Adding DMN peers to the list to increase connections\");\n-                                try {\n-                                    SimplifiedMasternodeList mnlist = org.bitcoinj.core.Context.get().masternodeListManager.getListAtChainTip();\n-                                    MasternodePeerDiscovery discovery = new MasternodePeerDiscovery(mnlist);\n-                                    peers.addAll(Arrays.asList(discovery.getPeers(services, timeoutValue, timeoutUnit)));\n-                                } catch (PeerDiscoveryException x) {\n-                                    //swallow and continue with another method of connection\n-                                    log.info(\"DMN List peer discovery failed: \"+ x.getMessage());\n \n+                            if(peers.size() < 16) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50eaa04538929040a8f5aa0307160e731cd95a91"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU4ODQ0OA==", "bodyText": "Good Call.", "url": "https://github.com/dashevo/dash-wallet/pull/518#discussion_r498588448", "createdAt": "2020-10-02T01:52:02Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "diffHunk": "@@ -518,34 +518,36 @@ private void check() {\n                         }\n \n                         if (!connectTrustedPeerOnly) {\n+                            // First use the masternode list that is included\n                             try {\n-                                peers.addAll(\n-                                        Arrays.asList(normalPeerDiscovery.getPeers(services, timeoutValue, timeoutUnit)));\n+                                SimplifiedMasternodeList mnlist = org.bitcoinj.core.Context.get().masternodeListManager.getListAtChainTip();\n+                                MasternodePeerDiscovery discovery = new MasternodePeerDiscovery(mnlist);\n+                                peers.addAll(Arrays.asList(discovery.getPeers(services, timeoutValue, timeoutUnit)));\n                             } catch (PeerDiscoveryException x) {\n-                                //swallow and continue with another method of connection.\n-                                log.info(\"DNS peer discovery failed: \"+ x.getMessage());\n-                                if(x.getCause() != null)\n-                                    log.info(  \"cause:  \" + x.getCause().getMessage());\n+                                //swallow and continue with another method of connection\n+                                log.info(\"DMN List peer discovery failed: \"+ x.getMessage());\n                             }\n-                            if(peers.size() < 10) {\n-                                log.info(\"DNS peer discovery returned less than 10 nodes.  Adding DMN peers to the list to increase connections\");\n-                                try {\n-                                    SimplifiedMasternodeList mnlist = org.bitcoinj.core.Context.get().masternodeListManager.getListAtChainTip();\n-                                    MasternodePeerDiscovery discovery = new MasternodePeerDiscovery(mnlist);\n-                                    peers.addAll(Arrays.asList(discovery.getPeers(services, timeoutValue, timeoutUnit)));\n-                                } catch (PeerDiscoveryException x) {\n-                                    //swallow and continue with another method of connection\n-                                    log.info(\"DMN List peer discovery failed: \"+ x.getMessage());\n \n+                            if(peers.size() < 16) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3Njg0MQ=="}, "originalCommit": {"oid": "50eaa04538929040a8f5aa0307160e731cd95a91"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU4OTMzMA==", "bodyText": "Fixed here:  12d121d", "url": "https://github.com/dashevo/dash-wallet/pull/518#discussion_r498589330", "createdAt": "2020-10-02T01:57:04Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "diffHunk": "@@ -518,34 +518,36 @@ private void check() {\n                         }\n \n                         if (!connectTrustedPeerOnly) {\n+                            // First use the masternode list that is included\n                             try {\n-                                peers.addAll(\n-                                        Arrays.asList(normalPeerDiscovery.getPeers(services, timeoutValue, timeoutUnit)));\n+                                SimplifiedMasternodeList mnlist = org.bitcoinj.core.Context.get().masternodeListManager.getListAtChainTip();\n+                                MasternodePeerDiscovery discovery = new MasternodePeerDiscovery(mnlist);\n+                                peers.addAll(Arrays.asList(discovery.getPeers(services, timeoutValue, timeoutUnit)));\n                             } catch (PeerDiscoveryException x) {\n-                                //swallow and continue with another method of connection.\n-                                log.info(\"DNS peer discovery failed: \"+ x.getMessage());\n-                                if(x.getCause() != null)\n-                                    log.info(  \"cause:  \" + x.getCause().getMessage());\n+                                //swallow and continue with another method of connection\n+                                log.info(\"DMN List peer discovery failed: \"+ x.getMessage());\n                             }\n-                            if(peers.size() < 10) {\n-                                log.info(\"DNS peer discovery returned less than 10 nodes.  Adding DMN peers to the list to increase connections\");\n-                                try {\n-                                    SimplifiedMasternodeList mnlist = org.bitcoinj.core.Context.get().masternodeListManager.getListAtChainTip();\n-                                    MasternodePeerDiscovery discovery = new MasternodePeerDiscovery(mnlist);\n-                                    peers.addAll(Arrays.asList(discovery.getPeers(services, timeoutValue, timeoutUnit)));\n-                                } catch (PeerDiscoveryException x) {\n-                                    //swallow and continue with another method of connection\n-                                    log.info(\"DMN List peer discovery failed: \"+ x.getMessage());\n \n+                            if(peers.size() < 16) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3Njg0MQ=="}, "originalCommit": {"oid": "50eaa04538929040a8f5aa0307160e731cd95a91"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 592, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}