{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NTE2NjE1", "number": 434, "title": "Evonet search by username without profiles", "bodyText": "Issue being fixed or feature implemented\n\n\nUsername search - without profiles for now to keep it compatible with iOS.\nWhat was done?\n\n-- Created UserSearchActivity\n-- Removed UserSearch class and modified user search method to get the current userId from the local database.\nHow Has This Been Tested?\n\n\n\nBreaking Changes\n\n\nChecklist:\n\n\n I have performed a self-review of my own code\n I have commented my code, particularly in hard-to-understand areas\n I have added or updated relevant unit/integration/functional/e2e tests\n I have made corresponding changes to the documentation\n\nFor repository code-owners and collaborators only\n\n I have assigned this pull request to a milestone", "createdAt": "2020-06-04T00:15:00Z", "url": "https://github.com/dashevo/dash-wallet/pull/434", "merged": true, "mergeCommit": {"oid": "4a6d6bf18578529e46cfa222304fdb0792eb9fe0"}, "closed": true, "closedAt": "2020-06-04T21:47:56Z", "author": {"login": "sambarboza"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnyqBigH2gAyNDI3NTE2NjE1OmU1NjlmMWNmMzY3MGRiYzY0OTRkMzc2NDI4MjRmNDUxZDkwY2U4ZGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoFM2kgFqTQyNDg1ODQ5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e569f1cf3670dbc6494d37642824f451d90ce8dc", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/e569f1cf3670dbc6494d37642824f451d90ce8dc", "committedDate": "2020-06-04T00:10:17Z", "message": "User search layout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60eb3c26424413cf81583c2b77d0d983afbae636", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/60eb3c26424413cf81583c2b77d0d983afbae636", "committedDate": "2020-06-04T00:10:17Z", "message": "Basic search working with layout animation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88fb867a7a809e76bb579729d014963c812cffc6", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/88fb867a7a809e76bb579729d014963c812cffc6", "committedDate": "2020-06-04T00:10:17Z", "message": "UI Transitions and DashPayProfile inital layout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78d644644c2e99d0f224d89c66adf897f1db1c0b", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/78d644644c2e99d0f224d89c66adf897f1db1c0b", "committedDate": "2020-06-04T00:10:17Z", "message": "Layout adjustments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e535c4b66bc420b302be0a4770c52d79c71c79b", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/4e535c4b66bc420b302be0a4770c52d79c71c79b", "committedDate": "2020-06-04T00:10:17Z", "message": "Added loading animation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0ddf6705b7a554d9e93ab30f4d8d98f9957fc32", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/a0ddf6705b7a554d9e93ab30f4d8d98f9957fc32", "committedDate": "2020-06-04T00:10:17Z", "message": "Fixed loading animation behavior"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "870c4509509091e352e66bd9aed919b4148c540b", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/870c4509509091e352e66bd9aed919b4148c540b", "committedDate": "2020-06-04T00:10:17Z", "message": "Loading and No results icons centered"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "effb2ba83b0f78af6d45b7ec0060e5e31cce9118", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/effb2ba83b0f78af6d45b7ec0060e5e31cce9118", "committedDate": "2020-06-04T00:10:17Z", "message": "Search behavior improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6867cea8a7f2d6c6757cc938de317c372c60fec", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/b6867cea8a7f2d6c6757cc938de317c372c60fec", "committedDate": "2020-06-04T00:10:17Z", "message": "Code cleanup."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14e6bcd23a6b8fb1cc3b78c67dc8686645ffe1d0", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/14e6bcd23a6b8fb1cc3b78c67dc8686645ffe1d0", "committedDate": "2020-06-04T00:10:17Z", "message": "Adding dashPay profile data into current user search method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ce4e981e106464ce813f3ac9ebd33960f8cbdeb", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/6ce4e981e106464ce813f3ac9ebd33960f8cbdeb", "committedDate": "2020-06-04T00:11:19Z", "message": "Removing profile filtering, using userId from db."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MDY2MzE4", "url": "https://github.com/dashevo/dash-wallet/pull/434#pullrequestreview-424066318", "createdAt": "2020-06-04T02:51:18Z", "commit": {"oid": "6ce4e981e106464ce813f3ac9ebd33960f8cbdeb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMjo1MToxOVrOGe0BYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMjo1MToxOVrOGe0BYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk2Mjc4NA==", "bodyText": "I agree with this change, since I don't think we need a userId argument since it will always be  the current userId of the user's blockchainIdentity.", "url": "https://github.com/dashevo/dash-wallet/pull/434#discussion_r434962784", "createdAt": "2020-06-04T02:51:19Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/ui/dashpay/PlatformRepo.kt", "diffHunk": "@@ -86,19 +85,23 @@ class PlatformRepo(val walletApplication: WalletApplication) {\n      * gets all the name documents for usernames starting with text\n      *\n      * @param text The beginning of a username to search for\n-     * @param userId The current userId for which to search contacts\n      * @return\n      */\n-    fun searchUsernames(text: String, userId: String): Resource<List<UsernameSearchResult>> {\n+    suspend fun searchUsernames(text: String): Resource<List<UsernameSearchResult>> {\n         return try {\n+            val blockchainIdentity = blockchainIdentityDataDaoAsync.load()\n+            //We don't check for nullity here because if it's null, it'll be thrown, caputred below\n+            //and sent as a Resource.error\n+            val userId = blockchainIdentity!!.creditFundingTxId!!.toStringBase58()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ce4e981e106464ce813f3ac9ebd33960f8cbdeb"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a320f1b508fb6b5217b1d957be37d46eb4c5fdf", "author": {"user": {"login": "sambarboza", "name": "Sam B."}}, "url": "https://github.com/dashevo/dash-wallet/commit/5a320f1b508fb6b5217b1d957be37d46eb4c5fdf", "committedDate": "2020-06-04T21:00:59Z", "message": "Removing own user from search"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0ODU4NDk3", "url": "https://github.com/dashevo/dash-wallet/pull/434#pullrequestreview-424858497", "createdAt": "2020-06-04T21:46:37Z", "commit": {"oid": "5a320f1b508fb6b5217b1d957be37d46eb4c5fdf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2929, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}