{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NDYxNDYz", "number": 406, "title": "NMA-473 Payment Request from another app gets stuck on Transaction Result Screen", "bodyText": "Added SendCoinsInternalActivity being not exported version of SendCoinsActivity extended with ability to be authorised internally.\nClosing the app if it was launched by external Intent.", "createdAt": "2020-05-13T16:03:04Z", "url": "https://github.com/dashevo/dash-wallet/pull/406", "merged": true, "mergeCommit": {"oid": "b878467560114e91e99f9a7fef8d2b3ac83d233b"}, "closed": true, "closedAt": "2020-05-14T15:29:35Z", "author": {"login": "tomasz-ludek"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcg7FDxgH2gAyNDE3NDYxNDYzOmZjZWZhYzhmOWQ0NGU4MzE5NTgxODk3NzRjNGY0YjM5MjU1OTJiN2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchAMHagFqTQxMTMyOTE0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fcefac8f9d44e831958189774c4f4b3925592b7d", "author": {"user": {"login": "tomasz-ludek", "name": null}}, "url": "https://github.com/dashevo/dash-wallet/commit/fcefac8f9d44e831958189774c4f4b3925592b7d", "committedDate": "2020-05-13T16:01:35Z", "message": "Added SendCoinsInternalActivity being not exported version of SendCoinsActivity extended with ability to be authorised internally.\nFinishing the app if it was launched from external."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f902ce322403065dc61261a6581cd0bbabbe9d8", "author": {"user": {"login": "tomasz-ludek", "name": null}}, "url": "https://github.com/dashevo/dash-wallet/commit/8f902ce322403065dc61261a6581cd0bbabbe9d8", "committedDate": "2020-05-13T16:18:15Z", "message": "If started from the shortcut, the app is closed after finishing the action"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTYwNjI0", "url": "https://github.com/dashevo/dash-wallet/pull/406#pullrequestreview-411160624", "createdAt": "2020-05-13T17:48:54Z", "commit": {"oid": "8f902ce322403065dc61261a6581cd0bbabbe9d8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNzo0ODo1NFrOGU82DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNzo0ODo1NFrOGU82DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDYyMTU4MA==", "bodyText": "This part doesn't seem to work.\nWhen using the secondary app that makes a payment request, the last screen of the payment process is the Transaction Result screen with a \"Close\" button.  Clicking the close button appears to execute the \"else\" clause here rather than the first clause that will finish() the activity.", "url": "https://github.com/dashevo/dash-wallet/pull/406#discussion_r424621580", "createdAt": "2020-05-13T17:48:54Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/ui/TransactionResultActivity.kt", "diffHunk": "@@ -77,10 +83,16 @@ class TransactionResultActivity : AbstractWalletActivity() {\n             transactionResultViewBinder.bind(tx, payeeName, payeeVerifiedBy)\n             view_on_explorer.setOnClickListener { viewOnExplorer(tx) }\n             transaction_close_btn.setOnClickListener {\n-                if (intent.getBooleanExtra(EXTRA_USER_AUTHORIZED_RESULT_EXTRA, false)) {\n-                    startActivity(WalletActivity.createIntent(this))\n-                } else {\n-                    startActivity(LockScreenActivity.createIntentAsNewTask(this))\n+                when {\n+                    intent.action == Intent.ACTION_VIEW -> {\n+                        finish()\n+                    }\n+                    intent.getBooleanExtra(EXTRA_USER_AUTHORIZED_RESULT_EXTRA, false) -> {\n+                        startActivity(WalletActivity.createIntent(this))\n+                    }\n+                    else -> {\n+                        startActivity(LockScreenActivity.createIntentAsNewTask(this))\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f902ce322403065dc61261a6581cd0bbabbe9d8"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMTY2MDM4", "url": "https://github.com/dashevo/dash-wallet/pull/406#pullrequestreview-411166038", "createdAt": "2020-05-13T17:55:54Z", "commit": {"oid": "8f902ce322403065dc61261a6581cd0bbabbe9d8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzI5MTQ3", "url": "https://github.com/dashevo/dash-wallet/pull/406#pullrequestreview-411329147", "createdAt": "2020-05-13T21:58:49Z", "commit": {"oid": "8f902ce322403065dc61261a6581cd0bbabbe9d8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2902, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}