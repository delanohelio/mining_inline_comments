{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0MDk0Nzkw", "number": 491, "title": "Fix LockScreen Keyboard Placement", "bodyText": "Issue being fixed or feature implemented\n\n\n\nNMA-587\nLock Screen issues\n\nRemove overlap of PIN keyboard with navbar\nRemove gap for navbar on Krip Devices\n\nRelated PR's and Dependencies\n\nnone\nScreenshots / Videos\n\n\nHow Has This Been Tested?\n\n\n\n\n QA (Mobile Team)\n\nChecklist:\n\n\n I have performed a self-review of my own code and added comments where necessary\n I have added or updated relevant unit/integration/functional/e2e tests", "createdAt": "2020-08-26T18:58:14Z", "url": "https://github.com/dashevo/dash-wallet/pull/491", "merged": true, "mergeCommit": {"oid": "553005cfe6d3049d0bf3d3ba9c8d21895fcd9e1b"}, "closed": true, "closedAt": "2020-09-01T15:10:38Z", "author": {"login": "HashEngineering"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCuwdjgH2gAyNDc0MDk0NzkwOjViZThiNDA1YzY1ZTE3MzE2MGJkNjRhNDhmODRhZjFjMjIyMDgxY2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEldjbAFqTQ3OTYzNzExNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5be8b405c65e173160bd64a48f84af1c222081ce", "author": {"user": {"login": "tomasz-ludek", "name": null}}, "url": "https://github.com/dashevo/dash-wallet/commit/5be8b405c65e173160bd64a48f84af1c222081ce", "committedDate": "2020-08-26T16:53:39Z", "message": "Added additional checks to the LockScreenActivity.hasNavBar() method in order to avoid NavBar overlapping the keyboard on emulator and some devices.\nBased on https://stackoverflow.com/questions/16092431/check-for-navigation-bar/23181183"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "260956a8ef5a009053f784c3dc362c7dca3ddc00", "author": {"user": {"login": "tomasz-ludek", "name": null}}, "url": "https://github.com/dashevo/dash-wallet/commit/260956a8ef5a009053f784c3dc362c7dca3ddc00", "committedDate": "2020-08-26T16:54:04Z", "message": "Added additional checks to the LockScreenActivity.hasNavBar() method in order to avoid NavBar overlapping the keyboard on emulator and some devices."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22533129eff3624f458c8d0f378462e67ae68415", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/22533129eff3624f458c8d0f378462e67ae68415", "committedDate": "2020-08-26T18:55:08Z", "message": "Handle Krip Devices with hardware buttons"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1Nzc0NDM1", "url": "https://github.com/dashevo/dash-wallet/pull/491#pullrequestreview-475774435", "createdAt": "2020-08-26T19:00:15Z", "commit": {"oid": "22533129eff3624f458c8d0f378462e67ae68415"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOTowMDoxNVrOHHZg1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxOTowMDoxNVrOHHZg1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUyMDA4NQ==", "bodyText": "These models were chosen based on device images from Google Play that seem to clearly show that these devices have hardware buttons for back, etc.\nOnly the K5 was tested.", "url": "https://github.com/dashevo/dash-wallet/pull/491#discussion_r477520085", "createdAt": "2020-08-26T19:00:15Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/ui/LockScreenActivity.kt", "diffHunk": "@@ -120,8 +124,26 @@ class LockScreenActivity : SendCoinsQrActivity() {\n     }\n \n     private fun hasNavBar(): Boolean {\n+        val tm: TelephonyManager = getSystemService(Context.TELEPHONY_SERVICE) as TelephonyManager\n+        // emulator\n+        if (\"Android\" == tm.networkOperatorName || Build.FINGERPRINT.startsWith(\"generic\")) {\n+            return true\n+        }\n         val id: Int = resources.getIdentifier(\"config_showNavigationBar\", \"bool\", \"android\")\n-        return id > 0 && resources.getBoolean(id)\n+\n+        // Krip devices seem to incorrectly report config_showNavigationBar\n+        val isKripDeviceWithoutNavBar = Build.BRAND == \"KRIP\" && when (Build.MODEL) {\n+            \"K5\", \"K5c\", \"K5b\", \"K4m\", \"KRIP_K4\", \"K6\" -> true\n+            else -> false\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22533129eff3624f458c8d0f378462e67ae68415"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c81b4b4cf65ee4c226e06e6355d9d8e52f4077a", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/8c81b4b4cf65ee4c226e06e6355d9d8e52f4077a", "committedDate": "2020-08-31T19:02:50Z", "message": "Remove K6 from the list of Krip devices without on screen navbars"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NjM3MTE1", "url": "https://github.com/dashevo/dash-wallet/pull/491#pullrequestreview-479637115", "createdAt": "2020-09-01T11:11:42Z", "commit": {"oid": "8c81b4b4cf65ee4c226e06e6355d9d8e52f4077a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2803, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}