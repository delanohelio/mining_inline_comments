{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4ODk0Mjgy", "number": 523, "title": "DashPay: Fix bug preventing viewing contacts", "bodyText": "Issue being fixed or feature implemented\n\n\n\nA == should have been >= otherwise the contacts screen was not displayed even though there were contacts.\nRelated PR's and Dependencies\n\nNone\nScreenshots / Videos\n\nN/A\nHow Has This Been Tested?\n\n\n\n\n QA (Mobile Team)\n\nChecklist:\n\n\n I have performed a self-review of my own code and added comments where necessary\n I have added or updated relevant unit/integration/functional/e2e tests", "createdAt": "2020-10-06T23:44:47Z", "url": "https://github.com/dashevo/dash-wallet/pull/523", "merged": true, "mergeCommit": {"oid": "b8bf3c589ae2d3cc53696db5fbd7ee732afab578"}, "closed": true, "closedAt": "2020-10-07T22:48:31Z", "author": {"login": "HashEngineering"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQBKkEAH2gAyNDk4ODk0MjgyOjI1MjI2YjE3YjZmZDczNWQ4ODI1M2U1ODYzZWI2YjE1YmQ5MDk3NmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQKi2CAH2gAyNDk4ODk0MjgyOmU0OGRjMTljMDIyNzFiZGZkODY4NmI4NWNkNGRkODc3MzdiNDJkNjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "25226b17b6fd735d88253e5863eb6b15bd90976a", "author": {"user": {"login": "HashEngineering", "name": "Hash Engineering Solutions"}}, "url": "https://github.com/dashevo/dash-wallet/commit/25226b17b6fd735d88253e5863eb6b15bd90976a", "committedDate": "2020-10-06T23:41:28Z", "message": "Fix bug preventing viewing contacts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNDM0MDk1", "url": "https://github.com/dashevo/dash-wallet/pull/523#pullrequestreview-503434095", "createdAt": "2020-10-06T23:46:33Z", "commit": {"oid": "25226b17b6fd735d88253e5863eb6b15bd90976a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQyMzo0NjozM1rOHddr9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQyMzo0NjozM1rOHddr9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY1NzE0Mw==", "bodyText": "not sure why we need !! here, but the compiler complains about it.", "url": "https://github.com/dashevo/dash-wallet/pull/523#discussion_r500657143", "createdAt": "2020-10-06T23:46:33Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/ui/MainActivityViewModel.kt", "diffHunk": "@@ -40,7 +40,7 @@ class MainActivityViewModel(application: Application) : AndroidViewModel(applica\n     val canAffordIdentityCreationLiveData = CanAffordIdentityCreationLiveData(walletApplication)\n \n     val hasIdentity: Boolean\n-        get() = blockchainIdentity?.creationState == BlockchainIdentityData.CreationState.DONE\n+        get() = blockchainIdentity?.creationComplete!!", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25226b17b6fd735d88253e5863eb6b15bd90976a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNDM0NTA2", "url": "https://github.com/dashevo/dash-wallet/pull/523#pullrequestreview-503434506", "createdAt": "2020-10-06T23:47:38Z", "commit": {"oid": "25226b17b6fd735d88253e5863eb6b15bd90976a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQyMzo0NzozOVrOHddtcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQyMzo0NzozOVrOHddtcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY1NzUyMw==", "bodyText": "This getter could be used in other places instead of comparing to the value of DONE.", "url": "https://github.com/dashevo/dash-wallet/pull/523#discussion_r500657523", "createdAt": "2020-10-06T23:47:39Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/data/BlockchainIdentityBaseData.kt", "diffHunk": "@@ -30,4 +30,7 @@ data class BlockchainIdentityBaseData(val id: Int,\n         get() = creationState > BlockchainIdentityData.CreationState.NONE &&\n                 creationState < BlockchainIdentityData.CreationState.DONE &&\n                 creationStateErrorMessage == null\n+\n+    val creationComplete: Boolean\n+        get() = creationState >= BlockchainIdentityData.CreationState.DONE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25226b17b6fd735d88253e5863eb6b15bd90976a"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNjcyNjcw", "url": "https://github.com/dashevo/dash-wallet/pull/523#pullrequestreview-503672670", "createdAt": "2020-10-07T09:06:12Z", "commit": {"oid": "25226b17b6fd735d88253e5863eb6b15bd90976a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwOTowNjoxMlrOHdpwgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwOTowNjozNVrOHdpxVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg1NDkxNQ==", "bodyText": "This i due to the safe call operator ?. after blockchainIdentity. It would return null if blockchainIdentity is null. Your fix should be interpreted as (blockchainIdentity?.creationComplete)!! so that the not-null assertion operator !! refers to the whole result, not only to the creationComplete part.\nSafer solution, that will not cause NPE when getting the hasIdentity field for blockchainIdentity being null would be:\nval hasIdentity: Boolean\n    get() = blockchainIdentity?.creationComplete ?: false\n\nJava is more readable but less condensed:\nif (blockchainIdentity != null)\n    return blockchainIdentity.creationComplete\nelse\n    return false", "url": "https://github.com/dashevo/dash-wallet/pull/523#discussion_r500854915", "createdAt": "2020-10-07T09:06:12Z", "author": {"login": "tomasz-ludek"}, "path": "wallet/src/de/schildbach/wallet/ui/MainActivityViewModel.kt", "diffHunk": "@@ -40,7 +40,7 @@ class MainActivityViewModel(application: Application) : AndroidViewModel(applica\n     val canAffordIdentityCreationLiveData = CanAffordIdentityCreationLiveData(walletApplication)\n \n     val hasIdentity: Boolean\n-        get() = blockchainIdentity?.creationState == BlockchainIdentityData.CreationState.DONE\n+        get() = blockchainIdentity?.creationComplete!!", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY1NzE0Mw=="}, "originalCommit": {"oid": "25226b17b6fd735d88253e5863eb6b15bd90976a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg1NTEyNg==", "bodyText": "Good idea!", "url": "https://github.com/dashevo/dash-wallet/pull/523#discussion_r500855126", "createdAt": "2020-10-07T09:06:35Z", "author": {"login": "tomasz-ludek"}, "path": "wallet/src/de/schildbach/wallet/data/BlockchainIdentityBaseData.kt", "diffHunk": "@@ -30,4 +30,7 @@ data class BlockchainIdentityBaseData(val id: Int,\n         get() = creationState > BlockchainIdentityData.CreationState.NONE &&\n                 creationState < BlockchainIdentityData.CreationState.DONE &&\n                 creationStateErrorMessage == null\n+\n+    val creationComplete: Boolean\n+        get() = creationState >= BlockchainIdentityData.CreationState.DONE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY1NzUyMw=="}, "originalCommit": {"oid": "25226b17b6fd735d88253e5863eb6b15bd90976a"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e48dc19c02271bdfd8686b85cd4dd87737b42d65", "author": {"user": {"login": "tomasz-ludek", "name": null}}, "url": "https://github.com/dashevo/dash-wallet/commit/e48dc19c02271bdfd8686b85cd4dd87737b42d65", "committedDate": "2020-10-07T10:37:08Z", "message": "Avoid crash when getting the hasIdentity field for blockchainIdentity being null"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2845, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}