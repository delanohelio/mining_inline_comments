{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMzM5NjM3", "number": 342, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTo1MToyNlrODk1Dfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNTo0MTozNFrODnVtlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTQ0NTc0OnYy", "diffSide": "RIGHT", "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTo1MToyNlrOFxX3HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTo1MToyNlrOFxX3HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMxNTQ4NQ==", "bodyText": "The sporkManager.addEventlistener and related code was removed because this line in particular was causing crashes in some cases when the app was installed and run on new devices through the Google Firebase or the Prelaunch Report mechanism.\nSince sporks were not used for anything in the app, I removed this code on the master branch at e237a37 (#334)", "url": "https://github.com/dashevo/dash-wallet/pull/342#discussion_r387315485", "createdAt": "2020-03-03T21:51:26Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "diffHunk": "@@ -763,6 +764,8 @@ public void onCreate() {\n         application.getWallet().addCoinsSentEventListener(Threading.SAME_THREAD, walletEventListener);\n         application.getWallet().addChangeEventListener(Threading.SAME_THREAD, walletEventListener);\n \n+        application.getWallet().getContext().sporkManager.addEventListener(sporkUpdatedEventListener, Threading.SAME_THREAD);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d71f24a9e34b3c147fa29119b20e27675eb64ece"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTQ0NzMzOnYy", "diffSide": "RIGHT", "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTo1MTo1NFrOFxX4Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTo1MTo1NFrOFxX4Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMxNTczOA==", "bodyText": "Since sporks were not used for anything in the app, I removed this code on the master branch at e237a37 (#334)", "url": "https://github.com/dashevo/dash-wallet/pull/342#discussion_r387315738", "createdAt": "2020-03-03T21:51:54Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "diffHunk": "@@ -851,6 +854,8 @@ public void onDestroy() {\n         application.getWallet().removeCoinsSentEventListener(walletEventListener);\n         application.getWallet().removeCoinsReceivedEventListener(walletEventListener);\n \n+        application.getWallet().getContext().sporkManager.removeEventListener(sporkUpdatedEventListener);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d71f24a9e34b3c147fa29119b20e27675eb64ece"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5OTQ0Nzk3OnYy", "diffSide": "RIGHT", "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTo1MjowNVrOFxX4fQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMTo1MjowNVrOFxX4fQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMxNTgzNw==", "bodyText": "Since sporks were not used for anything in the app, I removed this code on the master branch at e237a37 (#334)", "url": "https://github.com/dashevo/dash-wallet/pull/342#discussion_r387315837", "createdAt": "2020-03-03T21:52:05Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/service/BlockchainServiceImpl.java", "diffHunk": "@@ -1037,4 +1042,14 @@ private int percentageSync() {\n     private void updateAppWidget() {\n         WalletBalanceWidgetProvider.updateWidgets(BlockchainServiceImpl.this, application.getWallet());\n     }\n+\n+    private SporkUpdatedEventListener sporkUpdatedEventListener = new SporkUpdatedEventListener() {\n+\n+        @Override\n+        public void onSporkUpdated(final SporkMessage sporkMessage) {\n+//            if (sporkMessage.getSporkID() == SporkManager.SPORK_22_PLATFORM_ENABLED) {\n+//                config.setShowJoinDashPay(true);\n+//            }\n+        }\n+    };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d71f24a9e34b3c147fa29119b20e27675eb64ece"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyNTc2NzkxOnYy", "diffSide": "RIGHT", "path": "wallet/src/de/schildbach/wallet/ui/WalletActivity.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNTo0MTozNFrOF1R2HA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNzowNDoxOVrOF1TKzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQxMTIyOA==", "bodyText": "Can we remove this line?", "url": "https://github.com/dashevo/dash-wallet/pull/342#discussion_r391411228", "createdAt": "2020-03-12T05:41:34Z", "author": {"login": "sambarboza"}, "path": "wallet/src/de/schildbach/wallet/ui/WalletActivity.java", "diffHunk": "@@ -1036,11 +1064,14 @@ public void onEvent(SyncProgressEvent event) {\n             TextView syncPercentageView = findViewById(R.id.sync_status_percentage);\n \n             syncPercentageView.setText(percentage + \"%\");\n-            if (percentage == 100) {\n+            syncComplete = (percentage == 100);\n+            if (syncComplete) {\n                 syncPercentageView.setTextColor(getResources().getColor(R.color.success_green));\n                 syncStatusTitle.setText(R.string.sync_status_sync_title);\n                 syncStatusMessage.setText(R.string.sync_status_sync_completed);\n                 showSyncPane(R.id.sync_status_pane, false);\n+                syncComplete = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "245b2876940f34a886d2b035facd564767f77f9f"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQzMjkxMA==", "bodyText": "Yeah, it doesn't make sense ;P\nStrange that Lint didn't warn me.\nRemoved, thanks!", "url": "https://github.com/dashevo/dash-wallet/pull/342#discussion_r391432910", "createdAt": "2020-03-12T07:04:19Z", "author": {"login": "tomasz-ludek"}, "path": "wallet/src/de/schildbach/wallet/ui/WalletActivity.java", "diffHunk": "@@ -1036,11 +1064,14 @@ public void onEvent(SyncProgressEvent event) {\n             TextView syncPercentageView = findViewById(R.id.sync_status_percentage);\n \n             syncPercentageView.setText(percentage + \"%\");\n-            if (percentage == 100) {\n+            syncComplete = (percentage == 100);\n+            if (syncComplete) {\n                 syncPercentageView.setTextColor(getResources().getColor(R.color.success_green));\n                 syncStatusTitle.setText(R.string.sync_status_sync_title);\n                 syncStatusMessage.setText(R.string.sync_status_sync_completed);\n                 showSyncPane(R.id.sync_status_pane, false);\n+                syncComplete = true;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQxMTIyOA=="}, "originalCommit": {"oid": "245b2876940f34a886d2b035facd564767f77f9f"}, "originalPosition": 87}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 709, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}