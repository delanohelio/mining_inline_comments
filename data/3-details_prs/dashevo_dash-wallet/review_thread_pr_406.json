{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NDYxNDYz", "number": 406, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNzo0ODo1NFrOD8LD3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNzo0ODo1NFrOD8LD3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0NDIyMzY0OnYy", "diffSide": "RIGHT", "path": "wallet/src/de/schildbach/wallet/ui/TransactionResultActivity.kt", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxNzo0ODo1NFrOGU82DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMTo1ODoyN1rOGVE_AA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDYyMTU4MA==", "bodyText": "This part doesn't seem to work.\nWhen using the secondary app that makes a payment request, the last screen of the payment process is the Transaction Result screen with a \"Close\" button.  Clicking the close button appears to execute the \"else\" clause here rather than the first clause that will finish() the activity.", "url": "https://github.com/dashevo/dash-wallet/pull/406#discussion_r424621580", "createdAt": "2020-05-13T17:48:54Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/ui/TransactionResultActivity.kt", "diffHunk": "@@ -77,10 +83,16 @@ class TransactionResultActivity : AbstractWalletActivity() {\n             transactionResultViewBinder.bind(tx, payeeName, payeeVerifiedBy)\n             view_on_explorer.setOnClickListener { viewOnExplorer(tx) }\n             transaction_close_btn.setOnClickListener {\n-                if (intent.getBooleanExtra(EXTRA_USER_AUTHORIZED_RESULT_EXTRA, false)) {\n-                    startActivity(WalletActivity.createIntent(this))\n-                } else {\n-                    startActivity(LockScreenActivity.createIntentAsNewTask(this))\n+                when {\n+                    intent.action == Intent.ACTION_VIEW -> {\n+                        finish()\n+                    }\n+                    intent.getBooleanExtra(EXTRA_USER_AUTHORIZED_RESULT_EXTRA, false) -> {\n+                        startActivity(WalletActivity.createIntent(this))\n+                    }\n+                    else -> {\n+                        startActivity(LockScreenActivity.createIntentAsNewTask(this))\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f902ce322403065dc61261a6581cd0bbabbe9d8"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDYzMDM2Mg==", "bodyText": "As we discussed on Slack the left button of the \"Hack\" app works in a hacky way so you should use the right button,", "url": "https://github.com/dashevo/dash-wallet/pull/406#discussion_r424630362", "createdAt": "2020-05-13T18:03:24Z", "author": {"login": "tomasz-ludek"}, "path": "wallet/src/de/schildbach/wallet/ui/TransactionResultActivity.kt", "diffHunk": "@@ -77,10 +83,16 @@ class TransactionResultActivity : AbstractWalletActivity() {\n             transactionResultViewBinder.bind(tx, payeeName, payeeVerifiedBy)\n             view_on_explorer.setOnClickListener { viewOnExplorer(tx) }\n             transaction_close_btn.setOnClickListener {\n-                if (intent.getBooleanExtra(EXTRA_USER_AUTHORIZED_RESULT_EXTRA, false)) {\n-                    startActivity(WalletActivity.createIntent(this))\n-                } else {\n-                    startActivity(LockScreenActivity.createIntentAsNewTask(this))\n+                when {\n+                    intent.action == Intent.ACTION_VIEW -> {\n+                        finish()\n+                    }\n+                    intent.getBooleanExtra(EXTRA_USER_AUTHORIZED_RESULT_EXTRA, false) -> {\n+                        startActivity(WalletActivity.createIntent(this))\n+                    }\n+                    else -> {\n+                        startActivity(LockScreenActivity.createIntentAsNewTask(this))\n+                    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDYyMTU4MA=="}, "originalCommit": {"oid": "8f902ce322403065dc61261a6581cd0bbabbe9d8"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc1NDk0NA==", "bodyText": "Yes, this code is working under normal circumstances.", "url": "https://github.com/dashevo/dash-wallet/pull/406#discussion_r424754944", "createdAt": "2020-05-13T21:58:27Z", "author": {"login": "HashEngineering"}, "path": "wallet/src/de/schildbach/wallet/ui/TransactionResultActivity.kt", "diffHunk": "@@ -77,10 +83,16 @@ class TransactionResultActivity : AbstractWalletActivity() {\n             transactionResultViewBinder.bind(tx, payeeName, payeeVerifiedBy)\n             view_on_explorer.setOnClickListener { viewOnExplorer(tx) }\n             transaction_close_btn.setOnClickListener {\n-                if (intent.getBooleanExtra(EXTRA_USER_AUTHORIZED_RESULT_EXTRA, false)) {\n-                    startActivity(WalletActivity.createIntent(this))\n-                } else {\n-                    startActivity(LockScreenActivity.createIntentAsNewTask(this))\n+                when {\n+                    intent.action == Intent.ACTION_VIEW -> {\n+                        finish()\n+                    }\n+                    intent.getBooleanExtra(EXTRA_USER_AUTHORIZED_RESULT_EXTRA, false) -> {\n+                        startActivity(WalletActivity.createIntent(this))\n+                    }\n+                    else -> {\n+                        startActivity(LockScreenActivity.createIntentAsNewTask(this))\n+                    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDYyMTU4MA=="}, "originalCommit": {"oid": "8f902ce322403065dc61261a6581cd0bbabbe9d8"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 649, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}