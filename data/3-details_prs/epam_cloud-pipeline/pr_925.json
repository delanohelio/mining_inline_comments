{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4NTI1MTY0", "number": 925, "title": "Issue 919 send notification only for certain statuses", "bodyText": "This PR related to #919\nIt proposes an implementation of that issue, to send notification only in case when status of a run has changed to only specific ones", "createdAt": "2020-01-29T12:15:50Z", "url": "https://github.com/epam/cloud-pipeline/pull/925", "merged": true, "mergeCommit": {"oid": "17bee4fb63ec2f4b667778381a9b6b269130bfa7"}, "closed": true, "closedAt": "2020-02-04T15:35:20Z", "author": {"login": "SilinPavel"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_EX-fAH2gAyMzY4NTI1MTY0Ojk4ODhiMDk0NTg3MjU5YmQ2NWY1YjFiOWZhMTQwOTg4Yzk5NTBiNmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBDXCUgFqTM1MzA3MzIyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9888b094587259bd65f5b1b9fa140988c9950b6e", "author": {"user": {"login": "SilinPavel", "name": "Pavel Silin"}}, "url": "https://github.com/epam/cloud-pipeline/commit/9888b094587259bd65f5b1b9fa140988c9950b6e", "committedDate": "2020-01-29T11:37:58Z", "message": "(issue #919) add statusesToInform field to NotificationSettings class, to be able to send notifications only for specified run statuses"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d06ef1dea9fb2e3428cf1180b407c34312d2291", "author": {"user": {"login": "SilinPavel", "name": "Pavel Silin"}}, "url": "https://github.com/epam/cloud-pipeline/commit/9d06ef1dea9fb2e3428cf1180b407c34312d2291", "committedDate": "2020-01-29T11:37:58Z", "message": "(issue #919) tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "196bcb095751f7fd609bd83f85cb463d0d3a0129", "author": {"user": {"login": "SilinPavel", "name": "Pavel Silin"}}, "url": "https://github.com/epam/cloud-pipeline/commit/196bcb095751f7fd609bd83f85cb463d0d3a0129", "committedDate": "2020-01-29T12:15:23Z", "message": "(issue #919) logging"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNDExNjQy", "url": "https://github.com/epam/cloud-pipeline/pull/925#pullrequestreview-351411642", "createdAt": "2020-01-31T10:22:43Z", "commit": {"oid": "196bcb095751f7fd609bd83f85cb463d0d3a0129"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyOTc0ODIy", "url": "https://github.com/epam/cloud-pipeline/pull/925#pullrequestreview-352974822", "createdAt": "2020-02-04T13:32:07Z", "commit": {"oid": "196bcb095751f7fd609bd83f85cb463d0d3a0129"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxMzozMjowN1rOFlUFZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxMzozMjowN1rOFlUFZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDY3MDY5Mw==", "bodyText": "If statuses are not defined we shall proceed with notification", "url": "https://github.com/epam/cloud-pipeline/pull/925#discussion_r374670693", "createdAt": "2020-02-04T13:32:07Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/manager/notification/NotificationManager.java", "diffHunk": "@@ -206,6 +208,14 @@ public void notifyRunStatusChanged(PipelineRun pipelineRun) {\n             return;\n         }\n \n+        final List<TaskStatus> runStatusesToReport = ListUtils.emptyIfNull(runStatusSettings.getStatusesToInform());\n+        if (CollectionUtils.isEmpty(runStatusesToReport) || !runStatusesToReport.contains(pipelineRun.getStatus())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "196bcb095751f7fd609bd83f85cb463d0d3a0129"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6771b316496c62421d3d695e78da9ef4277d08d", "author": {"user": {"login": "SilinPavel", "name": "Pavel Silin"}}, "url": "https://github.com/epam/cloud-pipeline/commit/e6771b316496c62421d3d695e78da9ef4277d08d", "committedDate": "2020-02-04T13:48:04Z", "message": "(issue #919) corrections on review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7d80f9d6fd9d59658b12e67d54928f3f66f0ece", "author": {"user": {"login": "SilinPavel", "name": "Pavel Silin"}}, "url": "https://github.com/epam/cloud-pipeline/commit/c7d80f9d6fd9d59658b12e67d54928f3f66f0ece", "committedDate": "2020-02-04T14:09:59Z", "message": "(issue #919) corrections on review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMDczMjI5", "url": "https://github.com/epam/cloud-pipeline/pull/925#pullrequestreview-353073229", "createdAt": "2020-02-04T15:34:53Z", "commit": {"oid": "c7d80f9d6fd9d59658b12e67d54928f3f66f0ece"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3864, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}