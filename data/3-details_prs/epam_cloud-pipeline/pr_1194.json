{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyMDQzNjQ2", "number": 1194, "title": "Issue #1192 API HA config improvements", "bodyText": "This PR is related to issue #1192\n\nUser's session is stored in the database, so the authentication will remain if leading pod is changed\nActive API pod name is added to the beginning of the API log entries\nEnvironment variable to look for pod name is configurable via application.properties", "createdAt": "2020-06-30T13:49:12Z", "url": "https://github.com/epam/cloud-pipeline/pull/1194", "merged": true, "mergeCommit": {"oid": "13c4c96ce5a33b456758443c73e58682028a7b78"}, "closed": true, "closedAt": "2020-07-01T15:40:14Z", "author": {"login": "Wedds"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvHbE7AH2gAyNDQyMDQzNjQ2OjkxMjM3ZGUxOGI4N2JkNWI3NzNjY2I5MjY4N2RkNmE5M2M4YmU4ZDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwqw8PgH2gAyNDQyMDQzNjQ2OmYyZTYwZDJjMjA4ZmQzYjgwNzAzZjI1MWU0NjQ5NjUxNWJkZGYxOTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "91237de18b87bd5b773ccb92687dd6a93c8be8d7", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/91237de18b87bd5b773ccb92687dd6a93c8be8d7", "committedDate": "2020-06-26T18:19:26Z", "message": "Issue #688 Check pod status instead of phase in alive check, add sigterm handler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f185760fe5af841538c6de84e2b01b114744fe00", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/f185760fe5af841538c6de84e2b01b114744fe00", "committedDate": "2020-06-29T10:13:27Z", "message": "Merge remote-tracking branch 'origin/develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab7c820a198d8ed54ebaf52a12c601fe2c99aeb7", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/ab7c820a198d8ed54ebaf52a12c601fe2c99aeb7", "committedDate": "2020-06-30T09:47:04Z", "message": "Merge remote-tracking branch 'origin/develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95ca52883e398c20b47e7fdd015f0962ac53e300", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/95ca52883e398c20b47e7fdd015f0962ac53e300", "committedDate": "2020-06-30T14:03:02Z", "message": "Merge remote-tracking branch 'origin/develop' into develop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecb89dc01d38b8f4bbf27b9978c735d7646a532e", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/ecb89dc01d38b8f4bbf27b9978c735d7646a532e", "committedDate": "2020-06-30T14:03:44Z", "message": "Issue #1192 Configure API to store session in the DB"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed0283ebb4ab721445e12843720b6cb3e20ad617", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/ed0283ebb4ab721445e12843720b6cb3e20ad617", "committedDate": "2020-06-30T14:03:45Z", "message": "Issue #1192 Configure environment variable to receive current pod name via application.properties  (API, ES_Agent)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "754c16564a00cb8d855fe06b03ee56bebced9897", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/754c16564a00cb8d855fe06b03ee56bebced9897", "committedDate": "2020-06-30T14:03:46Z", "message": "Issue #1192 Show API pod name in logs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4402d428bb70c44141561f78bacf84a329e96be", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/c4402d428bb70c44141561f78bacf84a329e96be", "committedDate": "2020-06-30T13:37:49Z", "message": "Issue #1192 Show API pod name in logs"}, "afterCommit": {"oid": "754c16564a00cb8d855fe06b03ee56bebced9897", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/754c16564a00cb8d855fe06b03ee56bebced9897", "committedDate": "2020-06-30T14:03:46Z", "message": "Issue #1192 Show API pod name in logs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20502ca1320530c8e3d3af4512d6bcadcd656da4", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/20502ca1320530c8e3d3af4512d6bcadcd656da4", "committedDate": "2020-07-01T12:06:05Z", "message": "Issue #1192 Obtain current pod name for HA once at API startup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwODk2ODE2", "url": "https://github.com/epam/cloud-pipeline/pull/1194#pullrequestreview-440896816", "createdAt": "2020-07-01T14:00:16Z", "commit": {"oid": "20502ca1320530c8e3d3af4512d6bcadcd656da4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNDowMDoxNlrOGrnKrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNDowMDoxNlrOGrnKrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM4MzY2Mw==", "bodyText": "Shouldn't we change env var name here as well?", "url": "https://github.com/epam/cloud-pipeline/pull/1194#discussion_r448383663", "createdAt": "2020-07-01T14:00:16Z", "author": {"login": "mzueva"}, "path": "api/src/main/resources/log4j2-spring.xml", "diffHunk": "@@ -18,12 +18,13 @@\n <Configuration monitorInterval=\"60\">\n     <Properties>\n         <Property name=\"log-path\">logs</Property>\n+        <Property name=\"cp-api-logger-hostname\">$${env:MY_POD_NAME:-cp-api-srv}</Property>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20502ca1320530c8e3d3af4512d6bcadcd656da4"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2e60d2c208fd3b80703f251e46496515bddf190", "author": {"user": {"login": "Wedds", "name": "Andrey Georgitsa"}}, "url": "https://github.com/epam/cloud-pipeline/commit/f2e60d2c208fd3b80703f251e46496515bddf190", "committedDate": "2020-07-01T14:03:55Z", "message": "Issue #1192 Update API pod name env var in logger settings"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3791, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}