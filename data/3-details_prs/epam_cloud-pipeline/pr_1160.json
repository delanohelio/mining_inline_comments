{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMzI2MDg0", "number": 1160, "title": "Add EPMCMBIBPC-2658, EPMCMBIBPC-2662 GlobalSearch tests", "bodyText": "Add EPMCMBIBPC-2658, EPMCMBIBPC-2662 to GlobalSearch tests", "createdAt": "2020-06-08T18:46:07Z", "url": "https://github.com/epam/cloud-pipeline/pull/1160", "merged": true, "mergeCommit": {"oid": "4ad0d0f31d48eb42f1d097edf09d83c7a050e835"}, "closed": true, "closedAt": "2020-06-10T18:19:26Z", "author": {"login": "maryvictol"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpT4IYgH2gAyNDMxMzI2MDg0OmM4M2Y5OGE0YzE3Y2EzNjU4YjA3NmUwMDI4OGI4OWQwYjFkMDRjNjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcp89NIABqjM0MzA2ODM1ODk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c83f98a4c17ca3658b076e00288b89d0b1d04c69", "author": {"user": {"login": "maryvictol", "name": "Mariia Tolstaia"}}, "url": "https://github.com/epam/cloud-pipeline/commit/c83f98a4c17ca3658b076e00288b89d0b1d04c69", "committedDate": "2020-06-08T17:26:29Z", "message": "Add EPMCMBIBPC-2658, EPMCMBIBPC-2662 GlobalSearch tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c", "author": {"user": {"login": "maryvictol", "name": "Mariia Tolstaia"}}, "url": "https://github.com/epam/cloud-pipeline/commit/65100a33f8e13e027c19269150c9a5c73945287c", "committedDate": "2020-06-08T18:54:43Z", "message": "Add EPMCMBIBPC-2658, EPMCMBIBPC-2662 GlobalSearch tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2OTY4MTE0", "url": "https://github.com/epam/cloud-pipeline/pull/1160#pullrequestreview-426968114", "createdAt": "2020-06-09T09:39:40Z", "commit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c"}, "state": "COMMENTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwOTozOTo0MVrOGhBYiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMDo0NjoyN1rOGhDpaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI3ODg1Ng==", "bodyText": "You can use selectValue(INSTANCE_TYPE, configurationNodeType) instead of setTypeValue method creation", "url": "https://github.com/epam/cloud-pipeline/pull/1160#discussion_r437278856", "createdAt": "2020-06-09T09:39:41Z", "author": {"login": "kamyshova"}, "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java", "diffHunk": "@@ -116,6 +124,101 @@ public void searchResultCancel() {\n                 .close();\n     }\n \n+    @Test\n+    @TestCase(value = {\"EPMCMBIBPC-2658\"})\n+    public void searchForPipeline() {\n+        library()\n+                .cd(folder)\n+                .clickOnDraftVersion(pipeline)\n+                .configurationTab()\n+                .editConfiguration(defaultProfile, profile ->\n+                        profile\n+                                .expandTab(EXEC_ENVIRONMENT)\n+                                .expandTab(ADVANCED_PANEL)\n+                                .clear(NAME).setValue(NAME,configurationName)\n+                                .clear(DISK).setValue(DISK,configurationDisk)\n+                                .setTypeValue(configurationNodeType)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI4MDQ4Mg==", "bodyText": "'hasText()' is deprecated. Let's use the 'text()' method instead", "url": "https://github.com/epam/cloud-pipeline/pull/1160#discussion_r437280482", "createdAt": "2020-06-09T09:42:23Z", "author": {"login": "kamyshova"}, "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java", "diffHunk": "@@ -116,6 +124,101 @@ public void searchResultCancel() {\n                 .close();\n     }\n \n+    @Test\n+    @TestCase(value = {\"EPMCMBIBPC-2658\"})\n+    public void searchForPipeline() {\n+        library()\n+                .cd(folder)\n+                .clickOnDraftVersion(pipeline)\n+                .configurationTab()\n+                .editConfiguration(defaultProfile, profile ->\n+                        profile\n+                                .expandTab(EXEC_ENVIRONMENT)\n+                                .expandTab(ADVANCED_PANEL)\n+                                .clear(NAME).setValue(NAME,configurationName)\n+                                .clear(DISK).setValue(DISK,configurationDisk)\n+                                .setTypeValue(configurationNodeType)\n+                                .sleep(2, SECONDS)\n+                                .click(SAVE)\n+                                .sleep(2, SECONDS)\n+                );\n+        home().sleep(2, MINUTES);\n+        search()\n+                .search(pipeline)\n+                .enter()\n+                .sleep(2, SECONDS)\n+                .ensureAll(GlobalSearchAO.disable, FOLDERS, RUNS, TOOLS, DATA, ISSUES)\n+                .ensureAll(enabled, PIPELINES)\n+                .ensure(PIPELINES, hasText(\"3 PIPELINES\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI5NjU2NQ==", "bodyText": "\"config.json\" is presented 4 times in the method. Let's introduce this to variable", "url": "https://github.com/epam/cloud-pipeline/pull/1160#discussion_r437296565", "createdAt": "2020-06-09T10:09:52Z", "author": {"login": "kamyshova"}, "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java", "diffHunk": "@@ -116,6 +124,101 @@ public void searchResultCancel() {\n                 .close();\n     }\n \n+    @Test\n+    @TestCase(value = {\"EPMCMBIBPC-2658\"})\n+    public void searchForPipeline() {\n+        library()\n+                .cd(folder)\n+                .clickOnDraftVersion(pipeline)\n+                .configurationTab()\n+                .editConfiguration(defaultProfile, profile ->\n+                        profile\n+                                .expandTab(EXEC_ENVIRONMENT)\n+                                .expandTab(ADVANCED_PANEL)\n+                                .clear(NAME).setValue(NAME,configurationName)\n+                                .clear(DISK).setValue(DISK,configurationDisk)\n+                                .setTypeValue(configurationNodeType)\n+                                .sleep(2, SECONDS)\n+                                .click(SAVE)\n+                                .sleep(2, SECONDS)\n+                );\n+        home().sleep(2, MINUTES);\n+        search()\n+                .search(pipeline)\n+                .enter()\n+                .sleep(2, SECONDS)\n+                .ensureAll(GlobalSearchAO.disable, FOLDERS, RUNS, TOOLS, DATA, ISSUES)\n+                .ensureAll(enabled, PIPELINES)\n+                .ensure(PIPELINES, hasText(\"3 PIPELINES\"))\n+                .validateCountSearchResults(3)\n+                .hover(SEARCH_RESULT)\n+                .openSearchResultItem(pipeline)\n+                .ensure(TITLE, hasText(pipeline))\n+                .ensure(HIGHLIGHTS, hasText(\"Found in name\"))\n+                .ensure(INFO, hasText(\"draft-\"))\n+                .parent()\n+                .openSearchResultItem(\"docs/README.md\")\n+                .ensure(TITLE, hasText(\"README.md\"))\n+                .ensure(HIGHLIGHTS, hasText(\"Found in pipelineName\"))\n+                .ensure(PREVIEW, hasText(\"Job definition\"))\n+                .parent()\n+                .openSearchResultItem(\"config.json\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwMTQ3Ng==", "bodyText": "As I can see from the test case description, \"EPMCMBIBPC-2662\" depends on \"EPMCMBIBPC-2658\". Shouldn't we make this test dependent on EPMCMBIBPC-2658?", "url": "https://github.com/epam/cloud-pipeline/pull/1160#discussion_r437301476", "createdAt": "2020-06-09T10:18:57Z", "author": {"login": "kamyshova"}, "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/GlobalSearchTest.java", "diffHunk": "@@ -116,6 +124,101 @@ public void searchResultCancel() {\n                 .close();\n     }\n \n+    @Test\n+    @TestCase(value = {\"EPMCMBIBPC-2658\"})\n+    public void searchForPipeline() {\n+        library()\n+                .cd(folder)\n+                .clickOnDraftVersion(pipeline)\n+                .configurationTab()\n+                .editConfiguration(defaultProfile, profile ->\n+                        profile\n+                                .expandTab(EXEC_ENVIRONMENT)\n+                                .expandTab(ADVANCED_PANEL)\n+                                .clear(NAME).setValue(NAME,configurationName)\n+                                .clear(DISK).setValue(DISK,configurationDisk)\n+                                .setTypeValue(configurationNodeType)\n+                                .sleep(2, SECONDS)\n+                                .click(SAVE)\n+                                .sleep(2, SECONDS)\n+                );\n+        home().sleep(2, MINUTES);\n+        search()\n+                .search(pipeline)\n+                .enter()\n+                .sleep(2, SECONDS)\n+                .ensureAll(GlobalSearchAO.disable, FOLDERS, RUNS, TOOLS, DATA, ISSUES)\n+                .ensureAll(enabled, PIPELINES)\n+                .ensure(PIPELINES, hasText(\"3 PIPELINES\"))\n+                .validateCountSearchResults(3)\n+                .hover(SEARCH_RESULT)\n+                .openSearchResultItem(pipeline)\n+                .ensure(TITLE, hasText(pipeline))\n+                .ensure(HIGHLIGHTS, hasText(\"Found in name\"))\n+                .ensure(INFO, hasText(\"draft-\"))\n+                .parent()\n+                .openSearchResultItem(\"docs/README.md\")\n+                .ensure(TITLE, hasText(\"README.md\"))\n+                .ensure(HIGHLIGHTS, hasText(\"Found in pipelineName\"))\n+                .ensure(PREVIEW, hasText(\"Job definition\"))\n+                .parent()\n+                .openSearchResultItem(\"config.json\")\n+                .ensure(TITLE, hasText(\"config.json\"))\n+                .ensure(DESCRIPTION, hasText(pipeline))\n+                .ensure(HIGHLIGHTS, hasText(\"Found in pipelineName\"))\n+                .ensure(PREVIEW, hasText(configurationDisk))\n+                .ensure(PREVIEW, hasText(configurationName))\n+                .ensure(PREVIEW, hasText(configurationNodeType.substring(0, configurationNodeType.indexOf(\" \"))))\n+                .parent()\n+                .moveToSearchResultItem(pipeline, () -> new PipelineLibraryContentAO(pipeline))\n+                .assertPipelineName(pipeline);\n+        search()\n+                .search(pipeline)\n+                .enter()\n+                .sleep(2, SECONDS)\n+                .moveToSearchResultItem(\"docs/README.md\", () -> new DocumentTabAO(pipeline))\n+                .shouldContainDocument(\"README.md\");\n+        search()\n+                .search(pipeline)\n+                .enter()\n+                .sleep(2, SECONDS)\n+                .moveToSearchResultItem(\"config.json\", () -> new PipelineCodeTabAO(pipeline))\n+                .ensure(byText(\"config.json\"), visible);\n+    }\n+\n+    @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwNTM3OQ==", "bodyText": "Line too long. Could you break the value up, please?", "url": "https://github.com/epam/cloud-pipeline/pull/1160#discussion_r437305379", "createdAt": "2020-06-09T10:26:11Z", "author": {"login": "kamyshova"}, "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java", "diffHunk": "@@ -143,8 +151,11 @@ public SelenideElement context() {\n                 entry(TITLE, context().find(byClassName(\"review__title\"))),\n                 entry(DESCRIPTION, context().find(byClassName(\"review__description\"))),\n                 entry(HIGHLIGHTS, context().find(byClassName(\"review__highlights\"))),\n-                entry(PREVIEW, context().find(byClassName(\"review__content-preview\")))\n+                entry(PREVIEW, context().find(byClassName(\"review__content-preview\"))),\n+                entry(INFO, context().find(byClassName(\"review__info\"))),\n+                entry(INFO_TAB, context().find(byClassName(\"review__run-table\")))\n         );\n+        private static Condition completed = Condition.or(\"finished\", LogAO.Status.SUCCESS.reached, LogAO.Status.STOPPED.reached, LogAO.Status.FAILURE.reached);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMxMTU0Nw==", "bodyText": "The same as above", "url": "https://github.com/epam/cloud-pipeline/pull/1160#discussion_r437311547", "createdAt": "2020-06-09T10:37:55Z", "author": {"login": "kamyshova"}, "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/GlobalSearchAO.java", "diffHunk": "@@ -163,5 +174,22 @@ public SelenideElement context() {\n         public Map<Primitive, SelenideElement> elements() {\n             return elements;\n         }\n+\n+        public SearchResultItemPreviewAO checkCompletedField() {\n+            ElementsCollection list = get(INFO_TAB).findAll(By.xpath(\".//tr\"));\n+            for (int i = 1; i < list.size(); i++) {\n+                list.get(i).shouldBe(completedFieldCorrespondStatus());\n+            }\n+            return this;\n+        }\n+\n+        private Condition completedFieldCorrespondStatus() {\n+            return new Condition(\"completed field correspond Status\") {\n+                @Override\n+                public boolean apply(final WebElement element) {\n+                    return $(element).find(By.xpath(\"./td[1]\")).has(completed) ? $(element).find(By.xpath(\"./td[4]\")).text().contains(\":\") : $(element).find(By.xpath(\"./td[4]\")).text().equals(\"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMxMjI2MA==", "bodyText": "Method 'setTypeValue(java.lang.String)' is never used. Are we sure we need this?", "url": "https://github.com/epam/cloud-pipeline/pull/1160#discussion_r437312260", "createdAt": "2020-06-09T10:39:20Z", "author": {"login": "kamyshova"}, "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/PipelineConfigurationTabAO.java", "diffHunk": "@@ -84,6 +87,20 @@ public PipelineConfigurationTabAO editConfiguration(final String profileName, fi\n         return this;\n     }\n \n+    public PipelineConfigurationTabAO setTypeValue(String type) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMxNDEwMA==", "bodyText": "Add a space between ',hasText(name)', please. And let's use the 'text()' method instead", "url": "https://github.com/epam/cloud-pipeline/pull/1160#discussion_r437314100", "createdAt": "2020-06-09T10:42:44Z", "author": {"login": "kamyshova"}, "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/PipelineLibraryContentAO.java", "diffHunk": "@@ -102,6 +104,10 @@ public PipelineLibraryContentAO assertVersion(String version) {\n         return ensure(FIRST_VERSION, text(version));\n     }\n \n+    public PipelineLibraryContentAO assertPipelineName(String name){\n+        return ensure(xpath(\"//div[@class = 'browser__item-header']//span\"),hasText(name));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMxNTk0NQ==", "bodyText": "There are ready methods for this. Use clickOnPipeline(pipeline).firstVersion().runPipeline() instead of this", "url": "https://github.com/epam/cloud-pipeline/pull/1160#discussion_r437315945", "createdAt": "2020-06-09T10:46:27Z", "author": {"login": "kamyshova"}, "path": "e2e/gui/src/test/java/com/epam/pipeline/autotests/ao/PipelineLibraryContentAO.java", "diffHunk": "@@ -132,6 +138,12 @@ public PipelineLibraryContentAO assertRunButtonIsDisplayed() {\n         return this;\n     }\n \n+    public PipelineRunFormAO clickRunButton() {\n+        sleep(5, SECONDS);\n+        $$(tagName(\"button\")).find(text(\"Run\")).shouldBe(visible).click();\n+        return new PipelineRunFormAO();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65100a33f8e13e027c19269150c9a5c73945287c"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6a807383e79c26af8f0481aa6e4994378a6074b", "author": {"user": {"login": "maryvictol", "name": "Mariia Tolstaia"}}, "url": "https://github.com/epam/cloud-pipeline/commit/d6a807383e79c26af8f0481aa6e4994378a6074b", "committedDate": "2020-06-10T14:26:24Z", "message": "update 2658, 2662 GlobalSearch tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8d50cdc7c24200f7b8c7875cf8d128b391f3cdd", "author": {"user": {"login": "maryvictol", "name": "Mariia Tolstaia"}}, "url": "https://github.com/epam/cloud-pipeline/commit/d8d50cdc7c24200f7b8c7875cf8d128b391f3cdd", "committedDate": "2020-06-10T14:35:09Z", "message": "update 2658, 2662 GlobalSearch tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fdda703fcaf85a6cb1699dacfe096ef7fa83254", "author": {"user": {"login": "kamyshova", "name": "Yulia Kamyshova"}}, "url": "https://github.com/epam/cloud-pipeline/commit/8fdda703fcaf85a6cb1699dacfe096ef7fa83254", "committedDate": "2020-06-10T16:11:43Z", "message": "ui_tests: licences were updated; minor style fix"}, "afterCommit": {"oid": "b3e52eb9eeb4ae8575e030e428b1dd1fddb4e22c", "author": {"user": {"login": "kamyshova", "name": "Yulia Kamyshova"}}, "url": "https://github.com/epam/cloud-pipeline/commit/b3e52eb9eeb4ae8575e030e428b1dd1fddb4e22c", "committedDate": "2020-06-10T16:16:16Z", "message": "ui_tests: licences were updated; minor style fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96024b2bf9c85bd583a4dccd59196b4b68dc1882", "author": {"user": {"login": "kamyshova", "name": "Yulia Kamyshova"}}, "url": "https://github.com/epam/cloud-pipeline/commit/96024b2bf9c85bd583a4dccd59196b4b68dc1882", "committedDate": "2020-06-10T17:17:52Z", "message": "ui_tests: licences were updated; minor style fix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3e52eb9eeb4ae8575e030e428b1dd1fddb4e22c", "author": {"user": {"login": "kamyshova", "name": "Yulia Kamyshova"}}, "url": "https://github.com/epam/cloud-pipeline/commit/b3e52eb9eeb4ae8575e030e428b1dd1fddb4e22c", "committedDate": "2020-06-10T16:16:16Z", "message": "ui_tests: licences were updated; minor style fix"}, "afterCommit": {"oid": "96024b2bf9c85bd583a4dccd59196b4b68dc1882", "author": {"user": {"login": "kamyshova", "name": "Yulia Kamyshova"}}, "url": "https://github.com/epam/cloud-pipeline/commit/96024b2bf9c85bd583a4dccd59196b4b68dc1882", "committedDate": "2020-06-10T17:17:52Z", "message": "ui_tests: licences were updated; minor style fix"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3850, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}