{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1ODA2NDk4", "number": 1596, "title": "issue #1590 work with limit mounts when it is 'none'", "bodyText": "Handle special case for MountLimits:  'none'", "createdAt": "2020-11-23T15:23:25Z", "url": "https://github.com/epam/cloud-pipeline/pull/1596", "merged": true, "mergeCommit": {"oid": "7661408fce2527d9105c1cf4018947ceb8c89a80"}, "closed": true, "closedAt": "2020-11-25T10:38:05Z", "author": {"login": "SilinPavel"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfmBbBAH2gAyNTI1ODA2NDk4OmI5Nzc3ZGRmMmYyNTQ3ZjgyOWM4ZGFlZDY4ZGNhM2E2ZGMxNTVhODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdf707hAH2gAyNTI1ODA2NDk4OmUzM2E4NWIzNGYzMmVhNDcwNWRhMTgwMDU4OGQyMmM1ZGY5ZWViYTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b9777ddf2f2547f829c8daed68dca3a6dc155a88", "author": {"user": {"login": "SilinPavel", "name": "Pavel Silin"}}, "url": "https://github.com/epam/cloud-pipeline/commit/b9777ddf2f2547f829c8daed68dca3a6dc155a88", "committedDate": "2020-11-24T09:06:50Z", "message": "issue #1590 work with limit mounts when it is 'none'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bd16ae99acc2cddcb42d508ea1d1a1a8795edea8", "author": {"user": {"login": "SilinPavel", "name": "Pavel Silin"}}, "url": "https://github.com/epam/cloud-pipeline/commit/bd16ae99acc2cddcb42d508ea1d1a1a8795edea8", "committedDate": "2020-11-23T15:04:38Z", "message": "issue #1590 work with limit mounts when it is 'none'"}, "afterCommit": {"oid": "b9777ddf2f2547f829c8daed68dca3a6dc155a88", "author": {"user": {"login": "SilinPavel", "name": "Pavel Silin"}}, "url": "https://github.com/epam/cloud-pipeline/commit/b9777ddf2f2547f829c8daed68dca3a6dc155a88", "committedDate": "2020-11-24T09:06:50Z", "message": "issue #1590 work with limit mounts when it is 'none'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MzQ4MTkz", "url": "https://github.com/epam/cloud-pipeline/pull/1596#pullrequestreview-538348193", "createdAt": "2020-11-25T10:20:17Z", "commit": {"oid": "b9777ddf2f2547f829c8daed68dca3a6dc155a88"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoyMDoxOFrOH5sh2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxMDoyMDoxOFrOH5sh2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI2MDQ0Mg==", "bodyText": "It is better to flip equals to prevent NPE :  LIMIT_MOUNTS_NONE.equalsIgnoreCase(limitMounts)", "url": "https://github.com/epam/cloud-pipeline/pull/1596#discussion_r530260442", "createdAt": "2020-11-25T10:20:18Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/manager/pipeline/PipelineRunManager.java", "diffHunk": "@@ -800,10 +802,15 @@ private boolean checkRunForSensitivity(final Map<String, PipeConfValueVO> parame\n         List<Long> datastorageIds = MapUtils.emptyIfNull(parameters).entrySet().stream()\n                 .filter(v -> v.getKey().equals(CP_CAP_LIMIT_MOUNTS))\n                 .map(Map.Entry::getValue)\n-                .flatMap(pipeConfValueVO -> Arrays.stream(\n-                        StringUtils.commaDelimitedListToStringArray(pipeConfValueVO.getValue()))\n+                .flatMap(pipeConfValueVO -> {\n+                            String limitMounts = pipeConfValueVO.getValue();\n+                            if (limitMounts.equalsIgnoreCase(LIMIT_MOUNTS_NONE)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b9777ddf2f2547f829c8daed68dca3a6dc155a88"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e33a85b34f32ea4705da1800588d22c5df9eeba0", "author": {"user": {"login": "SilinPavel", "name": "Pavel Silin"}}, "url": "https://github.com/epam/cloud-pipeline/commit/e33a85b34f32ea4705da1800588d22c5df9eeba0", "committedDate": "2020-11-25T10:31:06Z", "message": "issue #1590 review"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3743, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}