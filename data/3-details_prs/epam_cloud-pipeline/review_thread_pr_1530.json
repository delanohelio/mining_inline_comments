{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNDY1MDk3", "number": 1530, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwOTozNjoyNlrOEztvbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwOTo0MToxM1rOEzt2CQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNjYyMjUyOnYy", "diffSide": "RIGHT", "path": "deploy/docker/cp-billing-srv/config/application.properties", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwOTozNjoyNlrOHrHbwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwOTozNjoyNlrOHrHbwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk3MjYxMA==", "bodyText": "Could you also add env var to configure schedule?", "url": "https://github.com/epam/cloud-pipeline/pull/1530#discussion_r514972610", "createdAt": "2020-10-30T09:36:26Z", "author": {"login": "mzueva"}, "path": "deploy/docker/cp-billing-srv/config/application.properties", "diffHunk": "@@ -31,6 +31,7 @@ sync.submit.threads=1\n sync.billing.schedule=0 0 0 ? * *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76965bc319c3d1f854bf2896547b2a1b15947561"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNjYzOTQ1OnYy", "diffSide": "RIGHT", "path": "billing-report-agent/src/main/java/com/epam/pipeline/billingreportagent/service/impl/converter/StorageToBillingRequestConverter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwOTo0MToxM1rOHrHmYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwOTo0MToxM1rOHrHmYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk3NTMyOQ==", "bodyText": "Could you please make this behaviour configurable, by default we create documents only for current date, and optionally for the period", "url": "https://github.com/epam/cloud-pipeline/pull/1530#discussion_r514975329", "createdAt": "2020-10-30T09:41:13Z", "author": {"login": "mzueva"}, "path": "billing-report-agent/src/main/java/com/epam/pipeline/billingreportagent/service/impl/converter/StorageToBillingRequestConverter.java", "diffHunk": "@@ -97,10 +102,13 @@ public StorageToBillingRequestConverter(final AbstractEntityMapper<StorageBillin\n                                                          final LocalDateTime syncStart) {\n         final Long storageId = storageContainer.getEntity().getId();\n         final DataStorageType storageType = storageContainer.getEntity().getType();\n-        final LocalDate reportDate = syncStart.toLocalDate().minusDays(1);\n-        final String fullIndex = indexPrefix + parseDateToString(reportDate);\n         return requestSumAggregationForStorage(storageId, storageType)\n-            .map(searchResponse -> buildRequestFromAggregation(storageContainer, syncStart, searchResponse, fullIndex))\n+            .map(searchResponse -> Stream.iterate(previousSync.plusDays(1L), date -> date.plusDays(1))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76965bc319c3d1f854bf2896547b2a1b15947561"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 301, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}