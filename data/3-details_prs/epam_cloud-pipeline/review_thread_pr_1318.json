{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNjgxOTEw", "number": 1318, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDozMjoxNVrOEcGSVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOTowNTo0OVrOEce9aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3ODk4NTgxOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/com/epam/pipeline/controller/region/CloudRegionController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDozMjoxNVrOHGbA3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNjowODoyNlrOHGfTrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5NjA5Mw==", "bodyText": "Let's rename endpoint /billing -> /info", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476496093", "createdAt": "2020-08-25T14:32:15Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/controller/region/CloudRegionController.java", "diffHunk": "@@ -75,6 +76,19 @@\n         return Result.success(cloudRegionApiService.loadAll());\n     }\n \n+    @GetMapping(\"/billing\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU2NjQ0NQ==", "bodyText": "Done", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476566445", "createdAt": "2020-08-25T16:08:26Z", "author": {"login": "Wedds"}, "path": "api/src/main/java/com/epam/pipeline/controller/region/CloudRegionController.java", "diffHunk": "@@ -75,6 +76,19 @@\n         return Result.success(cloudRegionApiService.loadAll());\n     }\n \n+    @GetMapping(\"/billing\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5NjA5Mw=="}, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3ODk4NzQxOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/com/epam/pipeline/controller/user/UserController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDozMjozN1rOHGbB5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNjowODozMVrOHGfTzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5NjM1OQ==", "bodyText": "Let's rename /users/billing -> /users/info", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476496359", "createdAt": "2020-08-25T14:32:37Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/controller/user/UserController.java", "diffHunk": "@@ -218,6 +218,20 @@ public Result deleteUser(@PathVariable Long id) {\n         return Result.success(userApiService.loadUsers());\n     }\n \n+    @RequestMapping(value = \"/users/billing\", method = RequestMethod.GET)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU2NjQ3OA==", "bodyText": "Done", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476566478", "createdAt": "2020-08-25T16:08:31Z", "author": {"login": "Wedds"}, "path": "api/src/main/java/com/epam/pipeline/controller/user/UserController.java", "diffHunk": "@@ -218,6 +218,20 @@ public Result deleteUser(@PathVariable Long id) {\n         return Result.success(userApiService.loadUsers());\n     }\n \n+    @RequestMapping(value = \"/users/billing\", method = RequestMethod.GET)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5NjM1OQ=="}, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3ODk4OTM1OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/com/epam/pipeline/controller/user/UserController.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDozMzowMVrOHGbDHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNjowODozNlrOHGfUAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5NjY2OQ==", "bodyText": "@RequestMapping -> @GetMapping", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476496669", "createdAt": "2020-08-25T14:33:01Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/controller/user/UserController.java", "diffHunk": "@@ -218,6 +218,20 @@ public Result deleteUser(@PathVariable Long id) {\n         return Result.success(userApiService.loadUsers());\n     }\n \n+    @RequestMapping(value = \"/users/billing\", method = RequestMethod.GET)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU2NjUyOQ==", "bodyText": "Done", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476566529", "createdAt": "2020-08-25T16:08:36Z", "author": {"login": "Wedds"}, "path": "api/src/main/java/com/epam/pipeline/controller/user/UserController.java", "diffHunk": "@@ -218,6 +218,20 @@ public Result deleteUser(@PathVariable Long id) {\n         return Result.success(userApiService.loadUsers());\n     }\n \n+    @RequestMapping(value = \"/users/billing\", method = RequestMethod.GET)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5NjY2OQ=="}, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3ODk5NzkzOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/com/epam/pipeline/entity/billing/RegionForBilling.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDozNDo0MlrOHGbISg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNjowODo0MFrOHGfUPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5Nzk5NA==", "bodyText": "Let's rename RegionForBilling -> CloudRegionInfo", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476497994", "createdAt": "2020-08-25T14:34:42Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/entity/billing/RegionForBilling.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * Copyright 2017-2020 EPAM Systems, Inc. (https://www.epam.com/)\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.epam.pipeline.entity.billing;\n+\n+import com.epam.pipeline.entity.region.CloudProvider;\n+import lombok.Builder;\n+import lombok.Value;\n+\n+@Value\n+@Builder\n+public class RegionForBilling {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU2NjU5MA==", "bodyText": "Done", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476566590", "createdAt": "2020-08-25T16:08:40Z", "author": {"login": "Wedds"}, "path": "api/src/main/java/com/epam/pipeline/entity/billing/RegionForBilling.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * Copyright 2017-2020 EPAM Systems, Inc. (https://www.epam.com/)\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.epam.pipeline.entity.billing;\n+\n+import com.epam.pipeline.entity.region.CloudProvider;\n+import lombok.Builder;\n+import lombok.Value;\n+\n+@Value\n+@Builder\n+public class RegionForBilling {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5Nzk5NA=="}, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3ODk5OTMxOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/com/epam/pipeline/manager/region/CloudRegionApiService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDozNDo1N1rOHGbJIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNjowODo0NVrOHGfUbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5ODIxMQ==", "bodyText": "access for ROLE_USER", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476498211", "createdAt": "2020-08-25T14:34:57Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/manager/region/CloudRegionApiService.java", "diffHunk": "@@ -39,6 +40,11 @@\n         return cloudRegionManager.loadAll();\n     }\n \n+    @PreAuthorize(AclExpressions.FULL_BILLING_ACCESS)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU2NjYzOA==", "bodyText": "Done", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476566638", "createdAt": "2020-08-25T16:08:45Z", "author": {"login": "Wedds"}, "path": "api/src/main/java/com/epam/pipeline/manager/region/CloudRegionApiService.java", "diffHunk": "@@ -39,6 +40,11 @@\n         return cloudRegionManager.loadAll();\n     }\n \n+    @PreAuthorize(AclExpressions.FULL_BILLING_ACCESS)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5ODIxMQ=="}, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3OTAwMTcwOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/com/epam/pipeline/manager/user/UserApiService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNDozNToyNlrOHGbKhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNjowODo0OVrOHGfUmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5ODU2NA==", "bodyText": "access for ROLE_USER", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476498564", "createdAt": "2020-08-25T14:35:26Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/manager/user/UserApiService.java", "diffHunk": "@@ -110,6 +111,11 @@ public PipelineUser updateUserRoles(Long id, List<Long> roles) {\n         return new ArrayList<>(userManager.loadAllUsers());\n     }\n \n+    @PreAuthorize(FULL_BILLING_ACCESS)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU2NjY4MA==", "bodyText": "Done", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r476566680", "createdAt": "2020-08-25T16:08:49Z", "author": {"login": "Wedds"}, "path": "api/src/main/java/com/epam/pipeline/manager/user/UserApiService.java", "diffHunk": "@@ -110,6 +111,11 @@ public PipelineUser updateUserRoles(Long id, List<Long> roles) {\n         return new ArrayList<>(userManager.loadAllUsers());\n     }\n \n+    @PreAuthorize(FULL_BILLING_ACCESS)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ5ODU2NA=="}, "originalCommit": {"oid": "3620c553b9fd92225b6c9c50cf6e0a7ae1481793"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4MzAyNzE4OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/com/epam/pipeline/manager/region/CloudRegionApiService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOTowNToyOVrOHHC5bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOTowNToyOVrOHHC5bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE0OTU1MQ==", "bodyText": "We still need @PreAuthorize annotation here hasRole('ADMIN') OR hasRole('ROLE_USER')", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r477149551", "createdAt": "2020-08-26T09:05:29Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/manager/region/CloudRegionApiService.java", "diffHunk": "@@ -39,6 +40,10 @@\n         return cloudRegionManager.loadAll();\n     }\n \n+    public List<CloudRegionInfo> loadAllRegionsInfo() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "497e6e1de472a0b8f9509585cd7f781df07d955b"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4MzAyODI3OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/com/epam/pipeline/manager/user/UserApiService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOTowNTo0OVrOHHC6JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOTowNTo0OVrOHHC6JA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE0OTczMg==", "bodyText": "We still need @PreAuthorize annotation here hasRole('ADMIN') OR hasRole('ROLE_USER')", "url": "https://github.com/epam/cloud-pipeline/pull/1318#discussion_r477149732", "createdAt": "2020-08-26T09:05:49Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/manager/user/UserApiService.java", "diffHunk": "@@ -110,6 +111,10 @@ public PipelineUser updateUserRoles(Long id, List<Long> roles) {\n         return new ArrayList<>(userManager.loadAllUsers());\n     }\n \n+    public List<UserInfo> loadUsersInfo() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "497e6e1de472a0b8f9509585cd7f781df07d955b"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 362, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}