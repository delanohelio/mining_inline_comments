{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxOTY3ODYx", "number": 1133, "title": "Issue #1126: `pipe run` custom parameters parsing issue", "bodyText": "This PR provides fix for issue #1126\nThe issue was that some run parameters values were parsed incorrectly via pipe CLI. To fix it we should put all run parameters at the end of the command and specify -- before them.\nAlso, this PR provide style fixes for launch cmd: each options group (option name and value) should be placed at the new line.", "createdAt": "2020-05-22T14:59:01Z", "url": "https://github.com/epam/cloud-pipeline/pull/1133", "merged": true, "mergeCommit": {"oid": "e0ce98b2a3e41883c0b1aa53a11954534b2b38c7"}, "closed": true, "closedAt": "2020-05-22T15:24:23Z", "author": {"login": "ekazachkova"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjzQ5pgH2gAyNDIxOTY3ODYxOmE4MTFmYzYyNTVhNmJkOWI4Y2IzMDQ4NTAxYTZiMmNkMzdkNTk1NDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjz7SigFqTQxNjk5NjAxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a811fc6255a6bd9b8cb3048501a6b2cd37d59544", "author": {"user": {"login": "ekazachkova", "name": "Ekaterina Kazachkova"}}, "url": "https://github.com/epam/cloud-pipeline/commit/a811fc6255a6bd9b8cb3048501a6b2cd37d59544", "committedDate": "2020-05-22T14:37:03Z", "message": "Issue #1126: `pipe run` custom parameters parsing issue - fix for run parameters; each options group (option name + value) is separated by new line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2OTgyMjM2", "url": "https://github.com/epam/cloud-pipeline/pull/1133#pullrequestreview-416982236", "createdAt": "2020-05-22T15:04:17Z", "commit": {"oid": "a811fc6255a6bd9b8cb3048501a6b2cd37d59544"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNTowNDoxN1rOGZadqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNTowNDoxN1rOGZadqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTMwMTE2MA==", "bodyText": "If parameters are empty, we need to add '--' here as well", "url": "https://github.com/epam/cloud-pipeline/pull/1133#discussion_r429301160", "createdAt": "2020-05-22T15:04:17Z", "author": {"login": "mzueva"}, "path": "api/src/main/java/com/epam/pipeline/manager/pipeline/runner/PipeRunCmdBuilder.java", "diffHunk": "@@ -130,49 +133,50 @@ public PipeRunCmdBuilder config() {\n \n     public PipeRunCmdBuilder yes() {\n         if (startVO.isYes()) {\n-            cmd.add(\"-y\");\n+            addCmd(\"-y\");\n         }\n         return this;\n     }\n \n     public PipeRunCmdBuilder quite() {\n         if (startVO.isQuite()) {\n-            cmd.add(\"-q\");\n+            addCmd(\"-q\");\n         }\n         return this;\n     }\n \n     public PipeRunCmdBuilder sync() {\n         if (startVO.isSync()) {\n-            cmd.add(\"-s\");\n+            addCmd(\"-s\");\n         }\n         return this;\n     }\n \n     public PipeRunCmdBuilder parameters() {\n         if (startVO.isShowParams()) {\n-            cmd.add(\"-p\");\n+            addCmd(\"-p\");\n         }\n         return this;\n     }\n \n     public PipeRunCmdBuilder runParameters() {\n         if (MapUtils.isNotEmpty(runVO.getParams())) {\n+            addCmd(CMD_OPTIONS_DELIMITER);\n             final String parametersCommand = runVO.getParams().entrySet()\n                     .stream()\n                     .map(this::prepareParams)\n-                    .collect(Collectors.joining(WHITESPACE));\n+                    .collect(Collectors.joining(WHITESPACE + getNewLineIndicator() + WHITESPACE));\n             cmd.add(parametersCommand);\n         }\n         if (Objects.nonNull(runVO.getParentRunId())) {\n-            cmd.add(String.format(\"parent-id %d\", runVO.getParentRunId()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a811fc6255a6bd9b8cb3048501a6b2cd37d59544"}, "originalPosition": 81}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4bb0c9ceda8491cc3eb8462f9aa3caa96be9974", "author": {"user": {"login": "ekazachkova", "name": "Ekaterina Kazachkova"}}, "url": "https://github.com/epam/cloud-pipeline/commit/b4bb0c9ceda8491cc3eb8462f9aa3caa96be9974", "committedDate": "2020-05-22T15:19:59Z", "message": "Issue #1126: `pipe run` custom parameters parsing issue - fix for parent-id run parameter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2OTk2MDE0", "url": "https://github.com/epam/cloud-pipeline/pull/1133#pullrequestreview-416996014", "createdAt": "2020-05-22T15:23:21Z", "commit": {"oid": "b4bb0c9ceda8491cc3eb8462f9aa3caa96be9974"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3841, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}