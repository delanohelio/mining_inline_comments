{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMDIzMTgz", "number": 2129, "title": "#2122 fix for 2 step mapping and generics", "bodyText": "", "createdAt": "2020-06-28T08:33:52Z", "url": "https://github.com/mapstruct/mapstruct/pull/2129", "merged": true, "mergeCommit": {"oid": "971abc48c7ed176a0977be8e41903da2b21d6e9c"}, "closed": true, "closedAt": "2020-07-04T16:49:34Z", "author": {"login": "sjaakd"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvUuC1gH2gAyNDQxMDIzMTgzOjc3YTJlMDU0ZDg5NmY1ZjNkNTNiMGYxODdlYzk1ZDYwYWFmNTYxMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxqrFxgH2gAyNDQxMDIzMTgzOmFiYzJiMGQ1ZWFhZDAzNjZlZGYzYjk4ZTkwZDNmZjI2MTE2ZjllNTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "77a2e054d896f5f3d53b0f187ec95d60aaf56115", "author": {"user": {"login": "chris922", "name": "Christian Bandowski"}}, "url": "https://github.com/mapstruct/mapstruct/commit/77a2e054d896f5f3d53b0f187ec95d60aaf56115", "committedDate": "2020-06-27T09:48:55Z", "message": "Reproducer for #2122"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1a675c2531d423353bf6dc7e88d101335b99954", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/c1a675c2531d423353bf6dc7e88d101335b99954", "committedDate": "2020-06-28T08:33:08Z", "message": "#2122 wip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a11861257add540fe6f83041c28bb2b3fd4a7be6", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/a11861257add540fe6f83041c28bb2b3fd4a7be6", "committedDate": "2020-06-28T10:59:55Z", "message": "#2122 fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "726c283415174a0b7eee0a642ca3852383c5ae29", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/726c283415174a0b7eee0a642ca3852383c5ae29", "committedDate": "2020-06-28T12:55:14Z", "message": "#2122 extra test 1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00bf425f7237b6b245ec0926ec330096da02bd6d", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/00bf425f7237b6b245ec0926ec330096da02bd6d", "committedDate": "2020-06-28T17:50:12Z", "message": "#2122 refactor method to Type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ab01a28e52ad1d59b2cc4ccbddc0ea37f634bcf", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/2ab01a28e52ad1d59b2cc4ccbddc0ea37f634bcf", "committedDate": "2020-06-28T18:27:30Z", "message": "#2122 adding test for asignabillity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "884416e64b6860ad7ea7b1f304b1671b439a548e", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/884416e64b6860ad7ea7b1f304b1671b439a548e", "committedDate": "2020-06-28T21:18:49Z", "message": "#2122 adding test for parametertype nessting"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67e9d33c0c0d1d5fa7a279887d841d15425c4d69", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/67e9d33c0c0d1d5fa7a279887d841d15425c4d69", "committedDate": "2020-06-28T19:01:53Z", "message": "#2122 adding test for parametertype nessting"}, "afterCommit": {"oid": "884416e64b6860ad7ea7b1f304b1671b439a548e", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/884416e64b6860ad7ea7b1f304b1671b439a548e", "committedDate": "2020-06-28T21:18:49Z", "message": "#2122 adding test for parametertype nessting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ece885b866fa62d8a899a99254a87032b9b9e4c5", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/ece885b866fa62d8a899a99254a87032b9b9e4c5", "committedDate": "2020-07-04T09:56:17Z", "message": "#2133 reorg unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eee1f5c5bd958d1229278387c62ee41655b9a79", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/0eee1f5c5bd958d1229278387c62ee41655b9a79", "committedDate": "2020-07-04T10:17:07Z", "message": "#2133 type-conversion to method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8856e10f5d0a79464291631f1ea356994f1d8f16", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/8856e10f5d0a79464291631f1ea356994f1d8f16", "committedDate": "2020-07-04T10:37:06Z", "message": "#2133 method-to-typeconversion"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjE0MDk3", "url": "https://github.com/mapstruct/mapstruct/pull/2129#pullrequestreview-442614097", "createdAt": "2020-07-04T14:52:20Z", "commit": {"oid": "8856e10f5d0a79464291631f1ea356994f1d8f16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxNDo1MjoyMVrOGs8XMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxNDo1MjoyMVrOGs8XMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3OTUwNg==", "bodyText": "resolveToType already checks for isTypeVar(). You can directly do\nySourceType = ySourceType.resolveToType( targetType, methodYCandidate.getResultType() );", "url": "https://github.com/mapstruct/mapstruct/pull/2129#discussion_r449779506", "createdAt": "2020-07-04T14:52:21Z", "author": {"login": "filiphr"}, "path": "processor/src/main/java/org/mapstruct/ap/internal/processor/creation/MappingResolverImpl.java", "diffHunk": "@@ -426,29 +426,33 @@ private Assignment resolveViaMethodAndMethod(Type sourceType, Type targetType) {\n             // sourceMethod or builtIn that fits the signature B to C. Only then there is a match. If we have a match\n             // a nested method call can be called. so C = methodY( methodX (A) )\n             for ( Method methodYCandidate : methodYCandidates ) {\n-                if ( Object.class.getName()\n-                    .equals( methodYCandidate.getSourceParameters().get( 0 ).getType().getName() ) ) {\n+                Type ySourceType = methodYCandidate.getSourceParameters().get( 0 ).getType();\n+                if ( Object.class.getName().equals( ySourceType.getName() ) ) {\n                     //  java.lang.Object as intermediate result\n                     continue;\n                 }\n \n-                methodRefY =\n-                    resolveViaMethod( methodYCandidate.getSourceParameters().get( 0 ).getType(), targetType, true );\n+                if ( ySourceType.isTypeVar() ) {\n+                    ySourceType = ySourceType.resolveToType( targetType, methodYCandidate.getResultType() );\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8856e10f5d0a79464291631f1ea356994f1d8f16"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abc2b0d5eaad0366edf3b98e90d3ff26116f9e54", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/abc2b0d5eaad0366edf3b98e90d3ff26116f9e54", "committedDate": "2020-07-04T16:31:27Z", "message": "#2133 rework"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4540, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}