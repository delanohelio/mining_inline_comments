{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NDMxMTQ4", "number": 2191, "title": "#2174 Forged methods should inherit all thrown exceptions from their property mappings", "bodyText": "Fixes #2174", "createdAt": "2020-08-28T14:14:13Z", "url": "https://github.com/mapstruct/mapstruct/pull/2191", "merged": true, "mergeCommit": {"oid": "3ce9786cf654050d6146ba9305f7216fee163371"}, "closed": true, "closedAt": "2020-08-29T06:59:21Z", "author": {"login": "filiphr"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDV2y-AH2gAyNDc1NDMxMTQ4OjAxZGM4NTM1ZWE1NjE2MGQyODZkMTJlOWI2YWZiNDMyYzQ1NDU5YTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDj2VbAFqTQ3ODEwMzg3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "01dc8535ea56160d286d12e9b6afb432c45459a7", "author": {"user": {"login": "filiphr", "name": "Filip Hrisafov"}}, "url": "https://github.com/mapstruct/mapstruct/commit/01dc8535ea56160d286d12e9b6afb432c45459a7", "committedDate": "2020-08-28T14:26:52Z", "message": "#2174 Forged methods should inherit all thrown exceptions from their property mappings"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0114832c09dec686ee9f7a9b314a48455041415d", "author": {"user": {"login": "filiphr", "name": "Filip Hrisafov"}}, "url": "https://github.com/mapstruct/mapstruct/commit/0114832c09dec686ee9f7a9b314a48455041415d", "committedDate": "2020-08-28T14:13:31Z", "message": "#2174 Forged methods should inherit all thrown exceptions from their property mappings"}, "afterCommit": {"oid": "01dc8535ea56160d286d12e9b6afb432c45459a7", "author": {"user": {"login": "filiphr", "name": "Filip Hrisafov"}}, "url": "https://github.com/mapstruct/mapstruct/commit/01dc8535ea56160d286d12e9b6afb432c45459a7", "committedDate": "2020-08-28T14:26:52Z", "message": "#2174 Forged methods should inherit all thrown exceptions from their property mappings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTQwODM2", "url": "https://github.com/mapstruct/mapstruct/pull/2191#pullrequestreview-477940836", "createdAt": "2020-08-28T18:26:12Z", "commit": {"oid": "01dc8535ea56160d286d12e9b6afb432c45459a7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODoyNjoxMlrOHJQbPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODoyNjozOVrOHJQcBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ2ODM1MQ==", "bodyText": "would be interesting to see if 2 forged methods are called from the same method. E.g. a postal code and a PostalCodeNotFounException. Both should be added to the thrown clause", "url": "https://github.com/mapstruct/mapstruct/pull/2191#discussion_r479468351", "createdAt": "2020-08-28T18:26:12Z", "author": {"login": "sjaakd"}, "path": "processor/src/test/java/org/mapstruct/ap/test/bugs/_2174/UserMapper.java", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ * Copyright MapStruct Authors.\n+ *\n+ * Licensed under the Apache License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package org.mapstruct.ap.test.bugs._2174;\n+\n+import org.mapstruct.Mapper;\n+import org.mapstruct.Mapping;\n+import org.mapstruct.factory.Mappers;\n+\n+/**\n+ * @author Filip Hrisafov\n+ */\n+@Mapper\n+public interface UserMapper {\n+\n+    UserMapper INSTANCE = Mappers.getMapper( UserMapper.class );\n+\n+    @Mapping(target = \"address.city\", source = \"city\")\n+    User map(UserDto dto) throws CityNotFoundException;\n+\n+    default City mapCity(String city) throws CityNotFoundException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01dc8535ea56160d286d12e9b6afb432c45459a7"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ2ODU0OQ==", "bodyText": "and what about factory methods?", "url": "https://github.com/mapstruct/mapstruct/pull/2191#discussion_r479468549", "createdAt": "2020-08-28T18:26:39Z", "author": {"login": "sjaakd"}, "path": "processor/src/main/java/org/mapstruct/ap/internal/model/BeanMappingMethod.java", "diffHunk": "@@ -296,8 +296,18 @@ else if ( !method.isUpdateMethod() ) {\n                             existingVariableNames\n             );\n \n-            if (factoryMethod != null && method instanceof ForgedMethod ) {\n-                ( (ForgedMethod) method ).addThrownTypes( factoryMethod.getThrownTypes() );\n+            if ( method instanceof ForgedMethod ) {\n+                ForgedMethod forgedMethod = (ForgedMethod) method;\n+                if ( factoryMethod != null ) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01dc8535ea56160d286d12e9b6afb432c45459a7"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7111ff9d70740c41b0ce388fa9eac0554f31cea1", "author": {"user": {"login": "filiphr", "name": "Filip Hrisafov"}}, "url": "https://github.com/mapstruct/mapstruct/commit/7111ff9d70740c41b0ce388fa9eac0554f31cea1", "committedDate": "2020-08-29T06:19:48Z", "message": "Add multiple thrown exceptions by different property mappings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MTAzODc4", "url": "https://github.com/mapstruct/mapstruct/pull/2191#pullrequestreview-478103878", "createdAt": "2020-08-29T06:45:02Z", "commit": {"oid": "7111ff9d70740c41b0ce388fa9eac0554f31cea1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4569, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}