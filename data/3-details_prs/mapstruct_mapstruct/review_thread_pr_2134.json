{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0MTc4MzM5", "number": 2134, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxNDozNzoyNVrOELYt4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxNDozNzoyNVrOELYt4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwMzc0NzUzOnYy", "diffSide": "RIGHT", "path": "processor/src/main/java/org/mapstruct/ap/internal/model/BeanMappingMethod.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxNDozNzoyNVrOGs8Sog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxNDo0MDowMlrOGs8TVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODMzOA==", "bodyText": "This makes sense. However, doesn't it make more sense to construct the appropriate MappingMethodOptions when we create a new ForgedMethod instead?", "url": "https://github.com/mapstruct/mapstruct/pull/2134#discussion_r449778338", "createdAt": "2020-07-04T14:37:25Z", "author": {"login": "filiphr"}, "path": "processor/src/main/java/org/mapstruct/ap/internal/model/BeanMappingMethod.java", "diffHunk": "@@ -472,7 +472,10 @@ private void sortPropertyMappingsByDependencies() {\n         }\n \n         private Type getReturnTypeToConstructFromSelectionParameters(SelectionParameters selectionParams) {\n-            if ( selectionParams != null && selectionParams.getResultType() != null ) {\n+            // resultType only applies to method that actually has @BeanMapping annotation, never to forged methods\n+            if ( !( method instanceof ForgedMethod )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "504bc9f47ef58390b1f110e57696599644cc0315"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODQ4MA==", "bodyText": "I (of course \ud83d\ude04 looked on that option). But\n\nIts too much hassle\nThere might be actually a reason to carry down all options through the underlying forged methods.. You just have to be careful to use them and check whether they are really applicable", "url": "https://github.com/mapstruct/mapstruct/pull/2134#discussion_r449778480", "createdAt": "2020-07-04T14:39:38Z", "author": {"login": "sjaakd"}, "path": "processor/src/main/java/org/mapstruct/ap/internal/model/BeanMappingMethod.java", "diffHunk": "@@ -472,7 +472,10 @@ private void sortPropertyMappingsByDependencies() {\n         }\n \n         private Type getReturnTypeToConstructFromSelectionParameters(SelectionParameters selectionParams) {\n-            if ( selectionParams != null && selectionParams.getResultType() != null ) {\n+            // resultType only applies to method that actually has @BeanMapping annotation, never to forged methods\n+            if ( !( method instanceof ForgedMethod )", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODMzOA=="}, "originalCommit": {"oid": "504bc9f47ef58390b1f110e57696599644cc0315"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODUxOA==", "bodyText": "We had it like that some refactorings ago..", "url": "https://github.com/mapstruct/mapstruct/pull/2134#discussion_r449778518", "createdAt": "2020-07-04T14:40:02Z", "author": {"login": "sjaakd"}, "path": "processor/src/main/java/org/mapstruct/ap/internal/model/BeanMappingMethod.java", "diffHunk": "@@ -472,7 +472,10 @@ private void sortPropertyMappingsByDependencies() {\n         }\n \n         private Type getReturnTypeToConstructFromSelectionParameters(SelectionParameters selectionParams) {\n-            if ( selectionParams != null && selectionParams.getResultType() != null ) {\n+            // resultType only applies to method that actually has @BeanMapping annotation, never to forged methods\n+            if ( !( method instanceof ForgedMethod )", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3ODMzOA=="}, "originalCommit": {"oid": "504bc9f47ef58390b1f110e57696599644cc0315"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4225, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}