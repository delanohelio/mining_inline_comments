{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMzQwMTEz", "number": 2103, "title": "#2101 inherited properties need to be analysed against redefined properties when inheriting mappings", "bodyText": "Possibly need to add some unit test.. Although quite some testcases failed when I implemented it wrong \ud83d\ude04", "createdAt": "2020-05-21T13:02:32Z", "url": "https://github.com/mapstruct/mapstruct/pull/2103", "merged": true, "mergeCommit": {"oid": "1ce282362cba827d985bcb18a720708b5336c2e3"}, "closed": true, "closedAt": "2020-07-04T19:50:21Z", "author": {"login": "sjaakd"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjfIfpAH2gAyNDIxMzQwMTEzOjE4NjZkOTA5NDg5MDZkZjc0MjJjOTljZDBhYWMyMzQwMGU0MWUxOGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxtUbqgFqTQ0MjYyNzczMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1866d90948906df7422c99cd0aac23400e41e18c", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/1866d90948906df7422c99cd0aac23400e41e18c", "committedDate": "2020-05-21T15:09:46Z", "message": "#2101 reproducer"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4b420b73993da7710fd67a78c967675a54d1e80e", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/4b420b73993da7710fd67a78c967675a54d1e80e", "committedDate": "2020-05-21T13:02:13Z", "message": "#2101 reproducer"}, "afterCommit": {"oid": "1866d90948906df7422c99cd0aac23400e41e18c", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/1866d90948906df7422c99cd0aac23400e41e18c", "committedDate": "2020-05-21T15:09:46Z", "message": "#2101 reproducer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a137bed0c3d5a15007935f321469b809c635de7", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/2a137bed0c3d5a15007935f321469b809c635de7", "committedDate": "2020-07-04T12:26:21Z", "message": "#2101 removing nonused arg from method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2f42a477a7d4759417268594b7ad02748f5ab52", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/c2f42a477a7d4759417268594b7ad02748f5ab52", "committedDate": "2020-07-04T14:00:49Z", "message": "#2101 filtering solution"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4470711036ba00a9b80ff7244608bf3fb9b601fd", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/4470711036ba00a9b80ff7244608bf3fb9b601fd", "committedDate": "2020-07-04T14:42:32Z", "message": "#2101 new insights and additional test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjI1ODg0", "url": "https://github.com/mapstruct/mapstruct/pull/2103#pullrequestreview-442625884", "createdAt": "2020-07-04T18:53:16Z", "commit": {"oid": "4470711036ba00a9b80ff7244608bf3fb9b601fd"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxODo1MzoxNlrOGs9a0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxODo1MzoxNlrOGs9a0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc5NjgxOA==", "bodyText": "Streams are all OK, but we are going twice through the same mappings.\nWhy not defined the sets, then use a for-loop to iterate the mappings and add to the sets?", "url": "https://github.com/mapstruct/mapstruct/pull/2103#discussion_r449796818", "createdAt": "2020-07-04T18:53:16Z", "author": {"login": "filiphr"}, "path": "processor/src/main/java/org/mapstruct/ap/internal/model/source/MappingMethodOptions.java", "diffHunk": "@@ -177,13 +177,54 @@ public void applyInheritedOptions(SourceMethod templateMethod, boolean isInverse\n             }\n \n             // now add all (does not override duplicates and leaves original mappings)\n-            mappings.addAll( newMappings );\n+            addAllNonRedefined( newMappings );\n \n             // filter new mappings\n             filterNestedTargetIgnores( mappings );\n         }\n     }\n \n+    private void addAllNonRedefined(Set<MappingOptions> inheritedMappings) {\n+        Set<String> redefinedSources = mappings.stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4470711036ba00a9b80ff7244608bf3fb9b601fd"}, "originalPosition": 32}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4da669131a35cb44ea0df5327eaff82ccecf931c", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/4da669131a35cb44ea0df5327eaff82ccecf931c", "committedDate": "2020-07-04T19:20:15Z", "message": "#2101 rework"}, "afterCommit": {"oid": "7e1aa27f4f246cfbd375d5150f39bf2328aab269", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/7e1aa27f4f246cfbd375d5150f39bf2328aab269", "committedDate": "2020-07-04T19:22:35Z", "message": "#2101 rework"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2c1913f92b8f5582341a8ec8a7605ddd24cc3eb", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/f2c1913f92b8f5582341a8ec8a7605ddd24cc3eb", "committedDate": "2020-07-04T19:30:29Z", "message": "#2101 rework"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e1aa27f4f246cfbd375d5150f39bf2328aab269", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/7e1aa27f4f246cfbd375d5150f39bf2328aab269", "committedDate": "2020-07-04T19:22:35Z", "message": "#2101 rework"}, "afterCommit": {"oid": "f2c1913f92b8f5582341a8ec8a7605ddd24cc3eb", "author": {"user": null}, "url": "https://github.com/mapstruct/mapstruct/commit/f2c1913f92b8f5582341a8ec8a7605ddd24cc3eb", "committedDate": "2020-07-04T19:30:29Z", "message": "#2101 rework"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjI3NzMy", "url": "https://github.com/mapstruct/mapstruct/pull/2103#pullrequestreview-442627732", "createdAt": "2020-07-04T19:36:25Z", "commit": {"oid": "f2c1913f92b8f5582341a8ec8a7605ddd24cc3eb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4532, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}