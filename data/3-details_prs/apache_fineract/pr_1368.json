{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3NDY5MDg2", "number": 1368, "title": "Improve error handling if reporting service implementation is missing [FINERACT-1173]", "bodyText": "see FINERACT-1173 (for FINERACT-1127)", "createdAt": "2020-10-04T17:26:58Z", "url": "https://github.com/apache/fineract/pull/1368", "merged": true, "mergeCommit": {"oid": "b96061613b2987af14af1723ca362f9868ad5b0b"}, "closed": true, "closedAt": "2020-11-25T22:13:16Z", "author": {"login": "vorburger"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPTLGOgBqjM4Mzc4MDQ4NzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgF3qSAFqTUzODg3NjgwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5593098df9467796e1e84eee5a60e8281e83e167", "author": {"user": {"login": "vorburger", "name": "Michael Vorburger \u26d1\ufe0f"}}, "url": "https://github.com/apache/fineract/commit/5593098df9467796e1e84eee5a60e8281e83e167", "committedDate": "2020-10-04T17:25:59Z", "message": "Improve error handling if reporting service implementation is missing [FINERACT-1173]"}, "afterCommit": {"oid": "fc4fe9854ec869470bf2b99c180183c12975a219", "author": {"user": {"login": "vorburger", "name": "Michael Vorburger \u26d1\ufe0f"}}, "url": "https://github.com/apache/fineract/commit/fc4fe9854ec869470bf2b99c180183c12975a219", "committedDate": "2020-10-04T18:06:00Z", "message": "Improve error handling if reporting service implementation is missing [FINERACT-1173]"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNjQ2ODMx", "url": "https://github.com/apache/fineract/pull/1368#pullrequestreview-501646831", "createdAt": "2020-10-04T18:18:39Z", "commit": {"oid": "fc4fe9854ec869470bf2b99c180183c12975a219"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQxODoxODozOVrOHcJQhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQxODoxODozOVrOHcJQhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI3Mzg2Mw==", "bodyText": "Unfortunately based on my read of the code, I don't think this is quite right:\nAfter this change, we are bailing out if we can't find a reporting process service for the report type.\nPreviously, if we couldn't find one, we would continue to execute the \"hardcoded\" reporting process service in the same function below.\nI think continuing execution is the expected behaviour: for any report that is not of type Pentaho or SMS, the report_type is set to Table. But there is no ReportingProcessService with type Table, so therefore the logic in this function below is used to simply prepare the CSV / PDF file.\nIn other words: if we check this in, as far as I can see it would break any report that doesn't have a specific report handler configured.\nNow having said that, a good idea would be to create a \"Table\" type report handler and move the code from this function to that report handler. And after that we could assume that there's a handler for each type of report, and bail out if we can't find one.", "url": "https://github.com/apache/fineract/pull/1368#discussion_r499273863", "createdAt": "2020-10-04T18:18:39Z", "author": {"login": "ptuomola"}, "path": "fineract-provider/src/main/java/org/apache/fineract/infrastructure/dataqueries/api/RunreportsApiResource.java", "diffHunk": "@@ -124,12 +125,13 @@ public Response runReport(@PathParam(\"reportName\") @Parameter(description = \"rep\n             parameterTypeValue = \"report\";\n             String reportType = this.readExtraDataAndReportingService.getReportType(reportName, isSelfServiceUserReport);\n             ReportingProcessService reportingProcessService = this.reportingProcessServiceProvider.findReportingProcessService(reportType);\n-            if (reportingProcessService != null) {\n-                return reportingProcessService.processRequest(reportName, queryParams);\n+            if (reportingProcessService == null) {\n+                throw new PlatformServiceUnavailableException(\"err.msg.report.service.implementation.missing\",\n+                        ReportingProcessServiceProvider.SERVICE_MISSING + reportType, reportType);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc4fe9854ec869470bf2b99c180183c12975a219"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc4fe9854ec869470bf2b99c180183c12975a219", "author": {"user": {"login": "vorburger", "name": "Michael Vorburger \u26d1\ufe0f"}}, "url": "https://github.com/apache/fineract/commit/fc4fe9854ec869470bf2b99c180183c12975a219", "committedDate": "2020-10-04T18:06:00Z", "message": "Improve error handling if reporting service implementation is missing [FINERACT-1173]"}, "afterCommit": {"oid": "9258b875be4bc83b691c0194715f9f6efe5b1382", "author": {"user": {"login": "vorburger", "name": "Michael Vorburger \u26d1\ufe0f"}}, "url": "https://github.com/apache/fineract/commit/9258b875be4bc83b691c0194715f9f6efe5b1382", "committedDate": "2020-11-21T14:34:42Z", "message": "Improve error handling if reporting service implementation is missing [FINERACT-1173]"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8b1af8bf2567fdc113d991edf573e61e2411d2d", "author": {"user": {"login": "vorburger", "name": "Michael Vorburger \u26d1\ufe0f"}}, "url": "https://github.com/apache/fineract/commit/f8b1af8bf2567fdc113d991edf573e61e2411d2d", "committedDate": "2020-11-21T16:50:54Z", "message": "Fix flaky GET {entity}/{entityId}/images Content-Type bug (FINERACT-1265)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9258b875be4bc83b691c0194715f9f6efe5b1382", "author": {"user": {"login": "vorburger", "name": "Michael Vorburger \u26d1\ufe0f"}}, "url": "https://github.com/apache/fineract/commit/9258b875be4bc83b691c0194715f9f6efe5b1382", "committedDate": "2020-11-21T14:34:42Z", "message": "Improve error handling if reporting service implementation is missing [FINERACT-1173]"}, "afterCommit": {"oid": "c423ed94093f4c09b7d454468a3ee9b3308ee37d", "author": {"user": {"login": "vorburger", "name": "Michael Vorburger \u26d1\ufe0f"}}, "url": "https://github.com/apache/fineract/commit/c423ed94093f4c09b7d454468a3ee9b3308ee37d", "committedDate": "2020-11-21T17:13:14Z", "message": "Improve error handling if reporting service implementation is missing [FINERACT-1173]"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b44ec399b3f239c6da9170ac75ee23843872f9df", "author": {"user": {"login": "vorburger", "name": "Michael Vorburger \u26d1\ufe0f"}}, "url": "https://github.com/apache/fineract/commit/b44ec399b3f239c6da9170ac75ee23843872f9df", "committedDate": "2020-11-21T19:48:19Z", "message": "Improve error handling if reporting service implementation is missing [FINERACT-1173]"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c423ed94093f4c09b7d454468a3ee9b3308ee37d", "author": {"user": {"login": "vorburger", "name": "Michael Vorburger \u26d1\ufe0f"}}, "url": "https://github.com/apache/fineract/commit/c423ed94093f4c09b7d454468a3ee9b3308ee37d", "committedDate": "2020-11-21T17:13:14Z", "message": "Improve error handling if reporting service implementation is missing [FINERACT-1173]"}, "afterCommit": {"oid": "b44ec399b3f239c6da9170ac75ee23843872f9df", "author": {"user": {"login": "vorburger", "name": "Michael Vorburger \u26d1\ufe0f"}}, "url": "https://github.com/apache/fineract/commit/b44ec399b3f239c6da9170ac75ee23843872f9df", "committedDate": "2020-11-21T19:48:19Z", "message": "Improve error handling if reporting service implementation is missing [FINERACT-1173]"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MDE0MzA3", "url": "https://github.com/apache/fineract/pull/1368#pullrequestreview-536014307", "createdAt": "2020-11-21T22:51:50Z", "commit": {"oid": "b44ec399b3f239c6da9170ac75ee23843872f9df"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4ODc2ODA4", "url": "https://github.com/apache/fineract/pull/1368#pullrequestreview-538876808", "createdAt": "2020-11-25T22:13:08Z", "commit": {"oid": "b44ec399b3f239c6da9170ac75ee23843872f9df"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1748, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}