{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyMzYyNDkx", "number": 1271, "title": "FINERACT-1101 Swagger Codegen build using Gradle", "bodyText": "Description\nThis PR addresses FINERACT-1101 issue. Following were the problems earlier:\n\n\nLibrary generated by ./gradlew generateSwaggerCode was required to be build using mvn package only. If a user executed ./gradlew build, the build used to fail saying Could not determine java version from '11.0.8'. The issue was with the gradle-wrapper of the project. This is resolved by adding the Mustache Template for the gradle-wrapper.properties file.\n\n\nMoreover, mvn package also failed due to an error in maven-javadoc-plugin. It was using the version 2.10.4 and was failing because of that. Version 3.2.0 worked correctly. This is resolved by adding the Mustache template for the pom.xml file\n\n\nTo be able to use Mustache Templates, we needed swagger-codegen-cli version 3.0.21. But if we used version 3.0.21 to generate swagger code, it would fail throwing an error Missing OpenAPI File. This was because the generated OpenAPI file was invalid. This was preventing to use the Mustache Templates. This is resolved in this PR.\n\n\nUpdated the client.md file with necessary documentation\nChecklist\nPlease make sure these boxes are checked before submitting your pull request - thanks!\n\n\n Commit message starts with the issue number from https://issues.apache.org/jira/projects/FINERACT/. Ex: FINERACT-646 Pockets API.\n\n\n Coding conventions at https://cwiki.apache.org/confluence/display/FINERACT/Coding+Conventions have been followed.\n\n\n API documentation at fineract-provider/src/main/resources/static/api-docs/apiLive.htm has been updated with details of any API changes.\n\n\n Integration tests have been created/updated for verifying the changes made.\n\n\n All Integrations tests are passing with the new commits.\n\n\n Submission is not a \"code dump\".  (Large changes can be made \"in repository\" via a branch.  Ask on the list.)\n\n\nOur guidelines for code reviews is at https://cwiki.apache.org/confluence/display/FINERACT/Code+Review+Guide", "createdAt": "2020-08-24T08:46:05Z", "url": "https://github.com/apache/fineract/pull/1271", "merged": true, "mergeCommit": {"oid": "5d95a18c32a8fb2b572b78544985339d5f9c1691"}, "closed": true, "closedAt": "2020-08-25T21:52:59Z", "author": {"login": "Grandolf49"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdB-X36gH2gAyNDcyMzYyNDkxOjY4ODZmMTQyMGMyOWE3MDVhMmUzYWZjYTQ3MTE2N2ZiNzU4ZmQ1ZDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCeb4CgFqTQ3NDkzOTE3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6886f1420c29a705a2e3afca471167fb758fd5d8", "author": {"user": {"login": "Grandolf49", "name": "Chinmay Kulkarni"}}, "url": "https://github.com/apache/fineract/commit/6886f1420c29a705a2e3afca471167fb758fd5d8", "committedDate": "2020-08-24T08:31:21Z", "message": "FINERACT-1101 Swagger Codegen build using Gradle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb86d08e4ea97a9e1b1df04b63d5e75e9f452296", "author": {"user": {"login": "Grandolf49", "name": "Chinmay Kulkarni"}}, "url": "https://github.com/apache/fineract/commit/eb86d08e4ea97a9e1b1df04b63d5e75e9f452296", "committedDate": "2020-08-24T10:40:06Z", "message": "FINERACT-1101 Excluded Mustache templates from rat"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NTk4NDMx", "url": "https://github.com/apache/fineract/pull/1271#pullrequestreview-474598431", "createdAt": "2020-08-25T15:28:56Z", "commit": {"oid": "eb86d08e4ea97a9e1b1df04b63d5e75e9f452296"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNToyODo1NlrOHGdoBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxNToyOTowMFrOHGdoLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjUzODg4Nw==", "bodyText": "I think we usually just call it \"Apache Fineract\" (VS \"Fineract CN\"), not \"1.x\" (I think).\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               \"artifactDescription\": \"A Java and Retrofit2 based client library for Apache Fineract 1.x Platform\",\n          \n          \n            \n               \"artifactDescription\": \"A Java and Retrofit2 based client library for Apache Fineract Platform\",", "url": "https://github.com/apache/fineract/pull/1271#discussion_r476538887", "createdAt": "2020-08-25T15:28:56Z", "author": {"login": "vorburger"}, "path": "fineract-provider/config/swagger/config.json.template", "diffHunk": "@@ -5,6 +5,7 @@\n    \"invokerPackage\": \"org.apache.fineract.client\",\n    \"modelPackage\": \"org.apache.fineract.client.models\",\n    \"apiPackage\": \"org.apache.fineract.client.services\",\n+   \"artifactDescription\": \"A Java and Retrofit2 based client library for Apache Fineract 1.x Platform\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb86d08e4ea97a9e1b1df04b63d5e75e9f452296"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjUzODkyNw==", "bodyText": "the use of a particular commit here was probably an oversight, and you meant to use develop here, like in line 29? Actually, I wonder if you couldn't just use a relative path (like ...../fineract-provider/... you what I mean here?)\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The `resolve` task in [build.gradle](https://github.com/apache/fineract/blob/217e34ba9e4cf04ad7b82fc3a0f8f8e5f8de8042/fineract-provider/build.gradle#L212) file will generate the OpenAPI Spec File for the project. To make sure Swagger Codegen generates a correct library, it is important for the OpenAPI Spec file to be valid. Use [Swagger OpenAPI Validator](https://validator.swagger.io/) to validate the spec file.\n          \n          \n            \n            The `resolve` task in [build.gradle](https://github.com/apache/fineract/blob/develop/fineract-provider/build.gradle#L212) file will generate the OpenAPI Spec File for the project. To make sure Swagger Codegen generates a correct library, it is important for the OpenAPI Spec file to be valid. Use [Swagger OpenAPI Validator](https://validator.swagger.io/) to validate the spec file.", "url": "https://github.com/apache/fineract/pull/1271#discussion_r476538927", "createdAt": "2020-08-25T15:29:00Z", "author": {"login": "vorburger"}, "path": "docs/developers/swagger/client.md", "diffHunk": "@@ -7,20 +7,40 @@ Apache Fineract supports client code generation using [Swagger Codegen](https://\n \n In root directory of the project:\n \n-- Run `./gradlew build`\n+- Run `./gradlew resolve`\n - Run `./gradlew generateSwaggerCode`\n \n The client code will be generated under `build/swagger-code-fineract`\n \n-## Build API Client:\n+## Build API Client\n \n - Run `cd build/swagger-code-fineract`\n - Run `./gradlew build`\n \n-## Customize Code Generator:\n+Alternatively, if you have Maven installed on your system, you can also do:\n+\n+- Run `cd build/swagger-code-fineract`\n+- Run `mvn clean package`\n+\n+## Customize Generated Code\n \n Swagger Codegen provides several options to customize the generated code. [Here](https://openapi-generator.tech/docs/generators/java/) are the options available for customization.\n \n-- Open `fineract-provider/config/swagger/config.json`\n+- Open the [config.json.template](https://github.com/apache/fineract/blob/develop/fineract-provider/config/swagger/config.json.template) file\n - Customize options\n-- Build the project again as mentioned in **Generate API Client Code** section\n\\ No newline at end of file\n+- Build the project again as mentioned in **Generate API Client Code** section\n+  \n+## Customize using Mustache Templates\n+\n+Swagger Codegen uses Mustache Templates for generating the client library. For additional customizations you can add/edit custom templates inside the `fineract-provider/config/swagger/templates` folder. \n+\n+Make sure you are following the supported templates. Otherwise, the generated code will not build correctly.\n+\n+- [Java Mustache Templates](https://github.com/swagger-api/swagger-codegen/tree/master/modules/swagger-codegen/src/main/resources/Java)\n+- [Retrofit2 Mustache Templates](https://github.com/swagger-api/swagger-codegen/tree/master/modules/swagger-codegen/src/main/resources/Java/libraries/retrofit2)\n+\n+If you need to add templates for a specific library, you need to follow the same directory structure as present in the links above.\n+\n+## Validate OpenAPI Spec File\n+\n+The `resolve` task in [build.gradle](https://github.com/apache/fineract/blob/217e34ba9e4cf04ad7b82fc3a0f8f8e5f8de8042/fineract-provider/build.gradle#L212) file will generate the OpenAPI Spec File for the project. To make sure Swagger Codegen generates a correct library, it is important for the OpenAPI Spec file to be valid. Use [Swagger OpenAPI Validator](https://validator.swagger.io/) to validate the spec file.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb86d08e4ea97a9e1b1df04b63d5e75e9f452296"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1173d9f11bdca7248bbf4ed5199708bad6103a08", "author": {"user": {"login": "Grandolf49", "name": "Chinmay Kulkarni"}}, "url": "https://github.com/apache/fineract/commit/1173d9f11bdca7248bbf4ed5199708bad6103a08", "committedDate": "2020-08-25T16:19:53Z", "message": "Update fineract-provider/config/swagger/config.json.template\n\nCo-authored-by: Michael Vorburger \u26d1\ufe0f <mike@vorburger.ch>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea54a14e4de82803b90a71a6098372c11cf9f696", "author": {"user": {"login": "Grandolf49", "name": "Chinmay Kulkarni"}}, "url": "https://github.com/apache/fineract/commit/ea54a14e4de82803b90a71a6098372c11cf9f696", "committedDate": "2020-08-25T16:20:44Z", "message": "Update docs/developers/swagger/client.md\n\nCo-authored-by: Michael Vorburger \u26d1\ufe0f <mike@vorburger.ch>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0OTM5MTc4", "url": "https://github.com/apache/fineract/pull/1271#pullrequestreview-474939178", "createdAt": "2020-08-25T21:52:41Z", "commit": {"oid": "ea54a14e4de82803b90a71a6098372c11cf9f696"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1715, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}