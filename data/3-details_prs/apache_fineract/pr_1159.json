{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MDMwNjMx", "number": 1159, "title": "FINERACT-1066 Fixes: NullPointerException at SQLInjectionValidator.va\u2026", "bodyText": "This happened due to\n  if (searchParameters.isOrderByRequested()) {\n                sqlBuilder.append(\" order by \").append(searchParameters.getOrderBy()).append(' ').append(searchParameters.getSortOrder());\n                this.columnValidator.validateSqlInjection(sqlBuilder.toString(), searchParameters.getOrderBy(),\n                        searchParameters.getSortOrder());\n            }\n\n-> here, we checked if OrderBY was not null but did not check if sortorder was \"not null\".\nInstead of fixing it here, it is better to fix it in the called function (IMO).\nSince the function SQLvalidateinput can be called either from columnValidator or independently, I have added check for not null at both the places.", "createdAt": "2020-07-06T22:20:09Z", "url": "https://github.com/apache/fineract/pull/1159", "merged": true, "mergeCommit": {"oid": "37b8219a03827e45d24a890bf9fe8dd39b40e1f9"}, "closed": true, "closedAt": "2020-07-13T23:09:31Z", "author": {"login": "thesmallstar"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcylAKxABqjM1MjAxNzk2NDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0pwoNAFqTQ0NzY3MTU5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "56ff7ccc7f6adb54a68aa2088aeb3c4a50b33d68", "author": {"user": {"login": "thesmallstar", "name": "Manthan Surkar"}}, "url": "https://github.com/apache/fineract/commit/56ff7ccc7f6adb54a68aa2088aeb3c4a50b33d68", "committedDate": "2020-07-06T22:13:56Z", "message": "FINERACT-1006 Fixes: NullPointerException at SQLInjectionValidator.validateSQLInput()"}, "afterCommit": {"oid": "44057948b6ea7cdab4a062778af95928f9aa6f97", "author": {"user": {"login": "thesmallstar", "name": "Manthan Surkar"}}, "url": "https://github.com/apache/fineract/commit/44057948b6ea7cdab4a062778af95928f9aa6f97", "committedDate": "2020-07-07T12:27:37Z", "message": "FINERACT-1006 Fixes: NullPointerException at SQLInjectionValidator.validateSQLInput()"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44057948b6ea7cdab4a062778af95928f9aa6f97", "author": {"user": {"login": "thesmallstar", "name": "Manthan Surkar"}}, "url": "https://github.com/apache/fineract/commit/44057948b6ea7cdab4a062778af95928f9aa6f97", "committedDate": "2020-07-07T12:27:37Z", "message": "FINERACT-1006 Fixes: NullPointerException at SQLInjectionValidator.validateSQLInput()"}, "afterCommit": {"oid": "29cf7cd3ccf5d905edf3a821c958757498aa02d7", "author": {"user": {"login": "thesmallstar", "name": "Manthan Surkar"}}, "url": "https://github.com/apache/fineract/commit/29cf7cd3ccf5d905edf3a821c958757498aa02d7", "committedDate": "2020-07-09T09:12:28Z", "message": "FINERACT-1006 Fixes: NullPointerException at SQLInjectionValidator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjQ3ODMw", "url": "https://github.com/apache/fineract/pull/1159#pullrequestreview-447647830", "createdAt": "2020-07-13T22:15:33Z", "commit": {"oid": "29cf7cd3ccf5d905edf3a821c958757498aa02d7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjoxNTozM1rOGw8SHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QyMjoxNTozM1rOGw8SHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk3MjUxMQ==", "bodyText": "Why the \"double negation\" and not just if isBlank() ?", "url": "https://github.com/apache/fineract/pull/1159#discussion_r453972511", "createdAt": "2020-07-13T22:15:33Z", "author": {"login": "vorburger"}, "path": "fineract-provider/src/main/java/org/apache/fineract/infrastructure/security/utils/ColumnValidator.java", "diffHunk": "@@ -91,6 +92,9 @@ private void validateColumn(Map<String, Set<String>> tableColumnMap) {\n \n     public void validateSqlInjection(String schema, String... conditions) {\n         for (String condition : conditions) {\n+            if (!StringUtils.isNotBlank(condition)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29cf7cd3ccf5d905edf3a821c958757498aa02d7"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9ea3a4dedc0f5435c77e71a23b1cdd299adfe57", "author": {"user": {"login": "thesmallstar", "name": "Manthan Surkar"}}, "url": "https://github.com/apache/fineract/commit/f9ea3a4dedc0f5435c77e71a23b1cdd299adfe57", "committedDate": "2020-07-13T22:22:09Z", "message": "FINERACT-1006 Fixes: NullPointerException at SQLInjectionValidator"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29cf7cd3ccf5d905edf3a821c958757498aa02d7", "author": {"user": {"login": "thesmallstar", "name": "Manthan Surkar"}}, "url": "https://github.com/apache/fineract/commit/29cf7cd3ccf5d905edf3a821c958757498aa02d7", "committedDate": "2020-07-09T09:12:28Z", "message": "FINERACT-1006 Fixes: NullPointerException at SQLInjectionValidator"}, "afterCommit": {"oid": "f9ea3a4dedc0f5435c77e71a23b1cdd299adfe57", "author": {"user": {"login": "thesmallstar", "name": "Manthan Surkar"}}, "url": "https://github.com/apache/fineract/commit/f9ea3a4dedc0f5435c77e71a23b1cdd299adfe57", "committedDate": "2020-07-13T22:22:09Z", "message": "FINERACT-1006 Fixes: NullPointerException at SQLInjectionValidator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjcxNTk4", "url": "https://github.com/apache/fineract/pull/1159#pullrequestreview-447671598", "createdAt": "2020-07-13T23:09:22Z", "commit": {"oid": "f9ea3a4dedc0f5435c77e71a23b1cdd299adfe57"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1849, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}