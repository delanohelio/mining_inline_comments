{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMwNjI2ODM2", "number": 1006, "title": "FINERACT-822 add MissingCasesInEnumSwitch", "bodyText": "Base on changes requested in #989", "createdAt": "2020-06-08T02:52:09Z", "url": "https://github.com/apache/fineract/pull/1006", "merged": true, "mergeCommit": {"oid": "bbb3aad5060cb88f4396b8e55dbde2a761c2e435"}, "closed": true, "closedAt": "2020-07-15T08:35:28Z", "author": {"login": "percyashu"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpxJg3gFqTQyNjc3NzM5NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc05E2lABqjM1NDUwNzY3MTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2Nzc3Mzk1", "url": "https://github.com/apache/fineract/pull/1006#pullrequestreview-426777395", "createdAt": "2020-06-09T04:18:06Z", "commit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwNDoxODowNlrOGg4MsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMzozMjozNlrOGhjqSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEyODM2OQ==", "bodyText": "If you look in AccountNumberGenerator.generateAccountNumber(), it seems that we currently are not generating any prefix for SHARES type accounts. Similarly AccountNumberFormatEnumerations does not provide a prefix for SHARES accounts. So means there are currently no valid prefixes for SHARES accounts - and therefore returning an empty list (which was also existing behaviour) would seem to be the correct behaviour.\nTherefore to me this is therefore not a \"TODO\": returning the empty list is correct as the functionality stands. Of course we could implement account prefixes for SHARES accounts but that would not require just fixing this code, but all the other places as well...", "url": "https://github.com/apache/fineract/pull/1006#discussion_r437128369", "createdAt": "2020-06-09T04:18:06Z", "author": {"login": "ptuomola"}, "path": "fineract-provider/src/main/java/org/apache/fineract/infrastructure/accountnumberformat/data/AccountNumberFormatDataValidator.java", "diffHunk": "@@ -127,7 +130,9 @@ public void validateForCreate(final String json) {\n         case GROUP:\n             validAccountNumberPrefixes = AccountNumberFormatEnumerations.accountNumberPrefixesForGroups;\n             break;\n-        default:\n+        case SHARES:\n+            LOG.error(\"TODO Implement determineValidAccountNumberPrefixes for SHARES\");\n+            break;\n         }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEyODYyNQ==", "bodyText": "Same here as above - I don't think we need to log an error, I would just have a comment stating no prefixes for SHARES accounts:\ncase SHARES:\n// SHARES accounts have no prefix\nbreak;", "url": "https://github.com/apache/fineract/pull/1006#discussion_r437128625", "createdAt": "2020-06-09T04:19:19Z", "author": {"login": "ptuomola"}, "path": "fineract-provider/src/main/java/org/apache/fineract/infrastructure/accountnumberformat/service/AccountNumberFormatReadPlatformServiceImpl.java", "diffHunk": "@@ -145,7 +149,9 @@ public void determinePrefixTypesForAccounts(Map<String, List<EnumOptionData>> ac\n             case GROUP :\n                 accountNumberPrefixTypesSet = AccountNumberFormatEnumerations.accountNumberPrefixesForGroups;\n             break;\n-            default:\n+            case SHARES:\n+                LOG.error(\"TODO Implement determinePrefixTypesForAccounts for SHARES\");\n+            break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEyOTg0OA==", "bodyText": "I wonder if this enum value is actually used for anything? I can't find any reference to it in the Fineract code. The code that processes all the other repaymentRescheduleTypeOptions (e.g. WorkingDaysUtil.getOffSetDateIfNonWorkingDay()) does not have a case or any logic for this value.", "url": "https://github.com/apache/fineract/pull/1006#discussion_r437129848", "createdAt": "2020-06-09T04:25:04Z", "author": {"login": "ptuomola"}, "path": "fineract-provider/src/main/java/org/apache/fineract/organisation/workingdays/domain/WorkingDaysEnumerations.java", "diffHunk": "@@ -53,7 +53,10 @@ public static EnumOptionData repaymentRescheduleType(final RepaymentRescheduleTy\n                 optionData = new EnumOptionData(RepaymentRescheduleType.MOVE_TO_PREVIOUS_WORKING_DAY.getValue().longValue(),RepaymentRescheduleType.MOVE_TO_PREVIOUS_WORKING_DAY.getCode(),\n                         \"move to previous working day\");\n                 break;\n-            default:\n+            case MOVE_TO_NEXT_MEETING_DAY:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEzMTE5NQ==", "bodyText": "Is there a reason why we can't just return the optionData for WHOLE_TERM just like for all the other values?", "url": "https://github.com/apache/fineract/pull/1006#discussion_r437131195", "createdAt": "2020-06-09T04:30:43Z", "author": {"login": "ptuomola"}, "path": "fineract-provider/src/main/java/org/apache/fineract/portfolio/interestratechart/service/InterestRateChartEnumerations.java", "diffHunk": "@@ -52,7 +56,9 @@ public static EnumOptionData periodType(final PeriodFrequencyType type) {\n                 optionData = new EnumOptionData(PeriodFrequencyType.YEARS.getValue().longValue(),\n                         PeriodFrequencyType.YEARS.getCode(), \"Years\");\n             break;\n-            default:\n+            case WHOLE_TERM:\n+                LOG.error(\"TODO Implement repaymentPeriodFrequencyType for WHOLE_TERM\");\n+            break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgzMjIzNw==", "bodyText": "Looks like the whole repayment / interest rate calculation etc logic for WHOLE_TERM is missing in a number of functions.\nWhat we would need to work out is: is this intentional (i.e. the routines, without any handling for WHOLE_TERM, will still return the right value) or is this actually broken even now? I'd suggest trying this out e.g. through the community app to see if loan products with whole term interest actually work correctly in scenarios where these functions are called.\nIf they do, then the right thing to do would be to add a case that does nothing for WHOLE_TERM so we have made this behaviour explicit. If they don't work, then we should have an error message with a TO DO.", "url": "https://github.com/apache/fineract/pull/1006#discussion_r437832237", "createdAt": "2020-06-10T02:56:37Z", "author": {"login": "ptuomola"}, "path": "fineract-provider/src/main/java/org/apache/fineract/portfolio/loanaccount/domain/Loan.java", "diffHunk": "@@ -4501,7 +4505,9 @@ private LocalDate getMaxDateLimitForNewRepayment(final PeriodFrequencyType perio\n             break;\n             case INVALID:\n             break;\n-            default:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgzNzU1Ng==", "bodyText": "If you look in createNote(), you can see that we only create specific types of notes - i.e. a subset of the enum types available. So we should never get a note with one of these types. In my view, therefore I think it would be OK to have a default that returns \"INVALIDTYPE\" for any other type.", "url": "https://github.com/apache/fineract/pull/1006#discussion_r437837556", "createdAt": "2020-06-10T03:19:36Z", "author": {"login": "ptuomola"}, "path": "fineract-provider/src/main/java/org/apache/fineract/portfolio/note/api/NotesApiResource.java", "diffHunk": "@@ -228,7 +232,12 @@ private CommandWrapper getResourceDetails(final NoteType type, final Long resour\n                 resourceNameForPermissions = \"GROUPNOTE\";\n                 resourceDetails.withGroupId(resourceId);\n             break;\n-            default:\n+            case SHARE_ACCOUNT:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgzOTI2OA==", "bodyText": "As far as I can see, this case should never happen: we should not have a savings account with a charge type of PERCENT_OF_DISBURSEMENT_AMOUNT, as that just doesn't make sense (and is not even valid as set in validValuesForSavings()). So the behaviour for this case in these functions should be the same as for the other values that are not valid - e.g. PERCENT_OF_AMOUNT_AND_INTEREST", "url": "https://github.com/apache/fineract/pull/1006#discussion_r437839268", "createdAt": "2020-06-10T03:27:11Z", "author": {"login": "ptuomola"}, "path": "fineract-provider/src/main/java/org/apache/fineract/portfolio/savings/domain/SavingsAccountCharge.java", "diffHunk": "@@ -292,7 +296,9 @@ private void populateDerivedFields(final BigDecimal transactionAmount, final Big\n                 this.amountWaived = null;\n                 this.amountWrittenOff = null;\n             break;\n-            default:\n+            case PERCENT_OF_DISBURSEMENT_AMOUNT:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg0MDQ1Nw==", "bodyText": "I don't think a lockinPeriod of WHOLE_TERM makes sense functionally - so shouldn't the behaviour for this to be the same as for period INVALID?", "url": "https://github.com/apache/fineract/pull/1006#discussion_r437840457", "createdAt": "2020-06-10T03:32:36Z", "author": {"login": "ptuomola"}, "path": "fineract-provider/src/main/java/org/apache/fineract/portfolio/shareaccounts/serialization/ShareAccountDataSerializer.java", "diffHunk": "@@ -927,7 +931,9 @@ private LocalDate deriveLockinPeriodDuration(final Integer lockinPeriod, final P\n                 case YEARS:\n                     lockinDate = purchaseDate.plusYears(lockinPeriod) ;\n                     break ;\n-                default:\n+                case WHOLE_TERM:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MjYzNDUx", "url": "https://github.com/apache/fineract/pull/1006#pullrequestreview-429263451", "createdAt": "2020-06-11T20:24:25Z", "commit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a8b9d80dc29244abbe6da2a6c90d712e4741090", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/4a8b9d80dc29244abbe6da2a6c90d712e4741090", "committedDate": "2020-06-08T02:25:16Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}, "afterCommit": {"oid": "ca483e2b5faef53a78f94b15f653b300db7b1cc9", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/ca483e2b5faef53a78f94b15f653b300db7b1cc9", "committedDate": "2020-06-12T00:47:52Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca483e2b5faef53a78f94b15f653b300db7b1cc9", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/ca483e2b5faef53a78f94b15f653b300db7b1cc9", "committedDate": "2020-06-12T00:47:52Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}, "afterCommit": {"oid": "8a6fc4a6e5d586852df5b5a3abcdd2780bef28ea", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/8a6fc4a6e5d586852df5b5a3abcdd2780bef28ea", "committedDate": "2020-06-12T02:54:11Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a6fc4a6e5d586852df5b5a3abcdd2780bef28ea", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/8a6fc4a6e5d586852df5b5a3abcdd2780bef28ea", "committedDate": "2020-06-12T02:54:11Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}, "afterCommit": {"oid": "1a6d034bc3705a2173ace3e59078dc9b2cc38565", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/1a6d034bc3705a2173ace3e59078dc9b2cc38565", "committedDate": "2020-06-15T14:28:02Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e3f7d3048ffa68abe75481fd34ca8129a588b6c", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/6e3f7d3048ffa68abe75481fd34ca8129a588b6c", "committedDate": "2020-06-15T14:37:48Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}, "afterCommit": {"oid": "0cf3d84b7115ebb291c2166803d0c47163cc450c", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/0cf3d84b7115ebb291c2166803d0c47163cc450c", "committedDate": "2020-06-15T16:30:51Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0cf3d84b7115ebb291c2166803d0c47163cc450c", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/0cf3d84b7115ebb291c2166803d0c47163cc450c", "committedDate": "2020-06-15T16:30:51Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}, "afterCommit": {"oid": "4ad9244750a977a9d817f2b2bbf14e5f0593f81b", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/4ad9244750a977a9d817f2b2bbf14e5f0593f81b", "committedDate": "2020-06-20T10:36:39Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ad9244750a977a9d817f2b2bbf14e5f0593f81b", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/4ad9244750a977a9d817f2b2bbf14e5f0593f81b", "committedDate": "2020-06-20T10:36:39Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}, "afterCommit": {"oid": "80b62f8ce1494bb80c09675b7b13708eabc9438c", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/80b62f8ce1494bb80c09675b7b13708eabc9438c", "committedDate": "2020-06-20T10:50:08Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NDc0NDcx", "url": "https://github.com/apache/fineract/pull/1006#pullrequestreview-436474471", "createdAt": "2020-06-24T09:23:19Z", "commit": {"oid": "80b62f8ce1494bb80c09675b7b13708eabc9438c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOToyMzoxOVrOGoKJ1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOToyMzoxOVrOGoKJ1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2MjU4Mw==", "bodyText": "Can this whole term case be implemented? Or is it too complicated? Can we have an issue opened for it? How will the whole term case even work?", "url": "https://github.com/apache/fineract/pull/1006#discussion_r444762583", "createdAt": "2020-06-24T09:23:19Z", "author": {"login": "awasum"}, "path": "fineract-provider/src/main/java/org/apache/fineract/portfolio/loanaccount/loanschedule/domain/DefaultPaymentPeriodsInOneYearCalculator.java", "diffHunk": "@@ -45,7 +49,9 @@ public Integer calculate(final PeriodFrequencyType repaymentFrequencyType) {\n             case INVALID:\n                 paymentPeriodsInOneYear = Integer.valueOf(0);\n             break;\n-            default:\n+            case WHOLE_TERM:\n+                LOG.error(\"TODO Implement repaymentFrequencyType for WHOLE_TERM\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80b62f8ce1494bb80c09675b7b13708eabc9438c"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MTI3MTYw", "url": "https://github.com/apache/fineract/pull/1006#pullrequestreview-448127160", "createdAt": "2020-07-14T13:52:56Z", "commit": {"oid": "f95b303fe8b3169b1a43544882cd00c45eee24e4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d28fd33163241f23b689463242d0ce3a7fa4247", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/8d28fd33163241f23b689463242d0ce3a7fa4247", "committedDate": "2020-07-14T16:59:08Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f95b303fe8b3169b1a43544882cd00c45eee24e4", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/f95b303fe8b3169b1a43544882cd00c45eee24e4", "committedDate": "2020-07-03T15:23:33Z", "message": "Merge branch 'develop' into MissingCases"}, "afterCommit": {"oid": "8d28fd33163241f23b689463242d0ce3a7fa4247", "author": {"user": {"login": "percyashu", "name": "Percy Enoabane"}}, "url": "https://github.com/apache/fineract/commit/8d28fd33163241f23b689463242d0ce3a7fa4247", "committedDate": "2020-07-14T16:59:08Z", "message": "FINERACT-822 add MissingCasesInEnumSwitch"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1880, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}