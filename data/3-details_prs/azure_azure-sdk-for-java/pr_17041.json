{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzMzQ4NDI4", "number": 17041, "title": "Added collapsible GA and Preview in each artifact.", "bodyText": "Before click:\n\nAfter click:\n\nWill do some clean up on the js file.", "createdAt": "2020-10-31T01:09:47Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041", "merged": true, "mergeCommit": {"oid": "6955838cd94dba6d1b51fe806f0c1032c8485ccf"}, "closed": true, "closedAt": "2020-11-13T00:47:11Z", "author": {"login": "sima-zhu"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXwu4ygH2gAyNTEzMzQ4NDI4OmU1Mzc1ZGI3OGVkMjlmNjZmYzBiOTYyYWFhYjBmN2M1ZjFlMWY3NzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb7vpdAH2gAyNTEzMzQ4NDI4OjA3M2NiMWM2MzBiNjMwM2U3YjFkMTIyNDU2NDJmNTYzYWQxZDRlNjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e5375db78ed29f66fc0b962aaab0f7c5f1e1f773", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e5375db78ed29f66fc0b962aaab0f7c5f1e1f773", "committedDate": "2020-10-31T01:04:09Z", "message": "Added collapsible GA and Preview in each artifact."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3680e2d736b9ca0b043c99e71b6da063a7b56961", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3680e2d736b9ca0b043c99e71b6da063a7b56961", "committedDate": "2020-10-31T01:09:32Z", "message": "Added check on preview"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMDk5Nzk4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#pullrequestreview-521099798", "createdAt": "2020-10-31T01:10:53Z", "commit": {"oid": "3680e2d736b9ca0b043c99e71b6da063a7b56961"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQwMToxMDo1M1rOHrj08Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMVQwMToxMDo1M1rOHrj08Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQzNzgwOQ==", "bodyText": "For testing purpose, will revert the change once ready to merge", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#discussion_r515437809", "createdAt": "2020-10-31T01:10:53Z", "author": {"login": "sima-zhu"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -98,9 +98,9 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     $DocOutDir = \"${RepoRoot}/docfx_project\"\n \n     LogDebug \"Initializing Default DocFx Site...\"\n-    & $($DocFx) init -q -o \"${DocOutDir}\"\n+    #& $($DocFx) init -q -o \"${DocOutDir}\"\n     # The line below is used for testing in local\n-    #docfx init -q -o \"${DocOutDir}\"\n+    docfx init -q -o \"${DocOutDir}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3680e2d736b9ca0b043c99e71b6da063a7b56961"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69ffb6851dcfa1e58719fa7fe26d5b903c87cad8", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/69ffb6851dcfa1e58719fa7fe26d5b903c87cad8", "committedDate": "2020-11-10T18:15:12Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into followup_fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6abe141a6a77184b20b0cb9e3d9c1babf0d12b1", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f6abe141a6a77184b20b0cb9e3d9c1babf0d12b1", "committedDate": "2020-11-10T20:46:38Z", "message": "Make a change to the UI look"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f9c8197acf97d43132b014320a7c89b5b8eb8ed", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2f9c8197acf97d43132b014320a7c89b5b8eb8ed", "committedDate": "2020-11-10T20:51:07Z", "message": "Revert testing changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NDY2Mzgw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#pullrequestreview-528466380", "createdAt": "2020-11-11T19:20:44Z", "commit": {"oid": "2f9c8197acf97d43132b014320a7c89b5b8eb8ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxOToyMDo0NFrOHxa-7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxOToyMDo0NFrOHxa-7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU4NDM2NQ==", "bodyText": "If GA or preview is missing lets just not show that list item. Also lets not add any text just have the version link.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#discussion_r521584365", "createdAt": "2020-11-11T19:20:44Z", "author": {"login": "weshaggard"}, "path": "eng/docgeneration/templates/matthews/styles/main.js", "diffHunk": "@@ -78,24 +79,62 @@ function httpGetAsync(targetUrl, callback) {\n }\n \n function populateIndexList(selector, packageName) {\n-    url = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/versions\"\n-\n-    httpGetAsync(url, function (responseText) {\n-\n-        var publishedversions = document.createElement(\"ul\")\n+    var url = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/versions\"\n+    var latestGAUrl = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/latest-ga\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f9c8197acf97d43132b014320a7c89b5b8eb8ed"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NDY3MDc4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#pullrequestreview-528467078", "createdAt": "2020-11-11T19:21:51Z", "commit": {"oid": "2f9c8197acf97d43132b014320a7c89b5b8eb8ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxOToyMTo1MlrOHxbBKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxOToyMTo1MlrOHxbBKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU4NDkzNw==", "bodyText": "Lets see if we can make the other versions text align with the other list bullets.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#discussion_r521584937", "createdAt": "2020-11-11T19:21:52Z", "author": {"login": "weshaggard"}, "path": "eng/docgeneration/templates/matthews/styles/main.js", "diffHunk": "@@ -78,24 +79,62 @@ function httpGetAsync(targetUrl, callback) {\n }\n \n function populateIndexList(selector, packageName) {\n-    url = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/versions\"\n-\n-    httpGetAsync(url, function (responseText) {\n-\n-        var publishedversions = document.createElement(\"ul\")\n+    var url = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/versions\"\n+    var latestGAUrl = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/latest-ga\"\n+    var latestPreviewUrl = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/latest-preview\"\n+    var latestVersions = document.createElement(\"ul\")\n+    httpGetAsync(latestGAUrl, function (responseText) {\n         if (responseText) {\n-            options = responseText.match(/[^\\r\\n]+/g)\n-\n-            for (var i in options) {\n-                $(publishedversions).append('<li><a href=\"' + getPackageUrl(SELECTED_LANGUAGE, packageName, options[i]) + '\" target=\"_blank\">' + options[i] + '</a></li>')\n-            }\n+            version = responseText.match(/[^\\r\\n]+/g)\n+            $(latestVersions).append('<li><a href=\"' + getPackageUrl(SELECTED_LANGUAGE, packageName, version) + '\" target=\"_blank\">' + 'Latest GA Version: ' + version + '</a></li>')\n         }\n         else {\n-            $(publishedversions).append('<li>No discovered versions present in blob storage.</li>')\n+            $(latestVersions).append('<li>No latest GA versions found.</li>')\n+        }                \n+    })\n+    httpGetAsync(latestPreviewUrl, function (responseText) {\n+        if (responseText) {\n+            version = responseText.match(/[^\\r\\n]+/g)\n+            $(latestVersions).append('<li><a href=\"' + getPackageUrl(SELECTED_LANGUAGE, packageName, version) + '\" target=\"_blank\">' + 'Latest Preview Version: ' + version + '</a></li>')\n         }\n-\n-        $(selector).after(publishedversions)\n+        else {\n+            $(latestVersions).append('<li>No latest Preview versions found.</li>')\n+        }                \n     })\n+    var publishedVersions = $('<ul style=\"display: none;\"></ul>')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f9c8197acf97d43132b014320a7c89b5b8eb8ed"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d10c74198aad90842c30d177439a4c21766ef21", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5d10c74198aad90842c30d177439a4c21766ef21", "committedDate": "2020-11-12T23:36:06Z", "message": "adjust the version arrow position."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edda34232ac84af243c89d1ffaf1e3ec9082c7f6", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/edda34232ac84af243c89d1ffaf1e3ec9082c7f6", "committedDate": "2020-11-12T23:40:16Z", "message": "More adjustment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NjAwNDU3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#pullrequestreview-529600457", "createdAt": "2020-11-12T23:59:55Z", "commit": {"oid": "edda34232ac84af243c89d1ffaf1e3ec9082c7f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQyMzo1OTo1NVrOHyT66A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQyMzo1OTo1NVrOHyT66A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjUxNzIyNA==", "bodyText": "orthogonal but I'm curious why you don't just remove these and just pass docfx as a parameter?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#discussion_r522517224", "createdAt": "2020-11-12T23:59:55Z", "author": {"login": "weshaggard"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -134,9 +134,9 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     Copy-Item \"$($RepoRoot)/CONTRIBUTING.md\" -Destination \"${DocOutDir}/api/CONTRIBUTING.md\" -Force\n \n     LogDebug \"Building site...\"\n-    & $($DocFx) build \"${DocOutDir}/docfx.json\"\n+    #& $($DocFx) build \"${DocOutDir}/docfx.json\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edda34232ac84af243c89d1ffaf1e3ec9082c7f6"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NjAxMTE3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#pullrequestreview-529601117", "createdAt": "2020-11-13T00:01:43Z", "commit": {"oid": "edda34232ac84af243c89d1ffaf1e3ec9082c7f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "073cb1c630b6303e7b1d12245642f563ad1d4e65", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/073cb1c630b6303e7b1d12245642f563ad1d4e65", "committedDate": "2020-11-13T00:09:38Z", "message": "comment back the docfx command"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1633, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}