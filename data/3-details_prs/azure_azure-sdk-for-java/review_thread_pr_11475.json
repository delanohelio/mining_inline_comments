{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MDQ0MDAw", "number": 11475, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxOToyMzoxOVrOEAPpeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMjo1MjozOFrOEAV6hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NjkxODMzOnYy", "diffSide": "RIGHT", "path": "sdk/search/azure-search-documents/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxOToyMzoxOVrOGbZ7aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxOToyMzoxOVrOGbZ7aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM4OTU0NA==", "bodyText": "nit: Random extra characters", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431389544", "createdAt": "2020-05-27T19:23:19Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/pom.xml", "diffHunk": "@@ -105,10 +105,11 @@\n             <artifactId>maven-surefire-plugin</artifactId>\n             <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-surefire-plugin;external_dependency} -->\n             <configuration>\n-              <argLine>\n+              <argLine>earchIndexerAsyncClient", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fb484a2ff65360525155a32785daa1a7d5a72b3c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NzUwNTU0OnYy", "diffSide": "RIGHT", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo0NjoxOFrOGbfwZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo0NjoxOFrOGbfwZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ4NTAyOQ==", "bodyText": "Need to update the return Javadocs", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431485029", "createdAt": "2020-05-27T22:46:18Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "diffHunk": "@@ -162,7 +162,7 @@ public SearchIndexAsyncClient buildAsyncClient() {\n      * @return The updated SearchIndexClientBuilder object.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33946a5506d7974f083543535d3dcc732f145411"}, "originalPosition": 105}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NzUxMTM0OnYy", "diffSide": "RIGHT", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/indexes/SearchIndexClientBuilder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo0ODo1OFrOGbfz_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo0ODo1OFrOGbfz_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ4NTk0OA==", "bodyText": "Need to update Javadoc", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431485948", "createdAt": "2020-05-27T22:48:58Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/indexes/SearchIndexClientBuilder.java", "diffHunk": "@@ -0,0 +1,289 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.search.documents.indexes;\n+\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.search.documents.SearchServiceVersion;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help aid the configuration and instantiation of {@link\n+ * SearchIndexClient SearchServiceClients} and {@link SearchIndexAsyncClient SearchServiceAsyncClients}. Call {@link\n+ * #buildClient() buildClient} and {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of\n+ * the desired client.\n+ * <p>\n+ * The following information must be provided to successfully create a client.\n+ * <ul>\n+ *     <li>{@link #endpoint(String)}</li>\n+ *     <li>{@link #credential(AzureKeyCredential)} or {@link #pipeline(HttpPipeline)}</li>\n+ * </ul>\n+ */\n+@ServiceClientBuilder(serviceClients = {SearchIndexClient.class, SearchIndexAsyncClient.class})\n+public final class SearchIndexClientBuilder {\n+    private static final String API_KEY = \"api-key\";\n+\n+    /*\n+     * This header tells the service to return the request ID in the HTTP response. This is useful for correlating the\n+     * request sent to the response.\n+     */\n+    private static final String ECHO_REQUEST_ID_HEADER = \"return-client-request-id\";\n+\n+    private static final String SEARCH_PROPERTIES = \"azure-search-documents.properties\";\n+    private static final String NAME = \"name\";\n+    private static final String VERSION = \"version\";\n+\n+    private final ClientLogger logger = new ClientLogger(SearchIndexClientBuilder.class);\n+    private final List<HttpPipelinePolicy> policies = new ArrayList<>();\n+    private final HttpHeaders headers = new HttpHeaders().put(ECHO_REQUEST_ID_HEADER, \"true\");\n+\n+    private final String clientName;\n+    private final String clientVersion;\n+\n+    private AzureKeyCredential keyCredential;\n+    private SearchServiceVersion serviceVersion;\n+    private String endpoint;\n+    private HttpClient httpClient;\n+    private HttpPipeline httpPipeline;\n+    private HttpLogOptions httpLogOptions = new HttpLogOptions();\n+    private Configuration configuration;\n+    private RetryPolicy retryPolicy;\n+\n+    /**\n+     * Creates a builder instance that is able to configure and construct {@link SearchIndexClient\n+     * SearchServiceClients} and {@link SearchIndexAsyncClient SearchServiceAsyncClients}.\n+     */\n+    public SearchIndexClientBuilder() {\n+        Map<String, String> properties = CoreUtils.getProperties(SEARCH_PROPERTIES);\n+        clientName = properties.getOrDefault(NAME, \"UnknownName\");\n+        clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n+    }\n+\n+    /**\n+     * Creates a {@link SearchIndexClient} based on options set in the Builder. Every time {@code buildClient()} is\n+     * called a new instance of {@link SearchIndexClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline} and {@link #endpoint(String)\n+     * endpoint} are used to create the {@link SearchIndexClient client}. All other builder settings are ignored.\n+     *\n+     * @return A SearchServiceClient with the options set from the builder.\n+     * @throws NullPointerException If {@code endpoint} are {@code null}.\n+     */\n+    public SearchIndexClient buildClient() {\n+        return new SearchIndexClient(buildAsyncClient());\n+    }\n+\n+    /**\n+     * Creates a {@link SearchIndexAsyncClient} based on options set in the Builder. Every time {@code\n+     * buildAsyncClient()} is called a new instance of {@link SearchIndexAsyncClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline} and {@link #endpoint(String)\n+     * endpoint} are used to create the {@link SearchIndexAsyncClient client}. All other builder settings are\n+     * ignored.\n+     *\n+     * @return A SearchServiceAsyncClient with the options set from the builder.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33946a5506d7974f083543535d3dcc732f145411"}, "originalPosition": 107}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NzUxMTc4OnYy", "diffSide": "RIGHT", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/indexes/SearchIndexClientBuilder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo0OTowOVrOGbf0OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo0OTowOVrOGbf0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ4NjAwOQ==", "bodyText": "Need to update Javadoc", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431486009", "createdAt": "2020-05-27T22:49:09Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/indexes/SearchIndexClientBuilder.java", "diffHunk": "@@ -0,0 +1,289 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.search.documents.indexes;\n+\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.search.documents.SearchServiceVersion;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help aid the configuration and instantiation of {@link\n+ * SearchIndexClient SearchServiceClients} and {@link SearchIndexAsyncClient SearchServiceAsyncClients}. Call {@link\n+ * #buildClient() buildClient} and {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of\n+ * the desired client.\n+ * <p>\n+ * The following information must be provided to successfully create a client.\n+ * <ul>\n+ *     <li>{@link #endpoint(String)}</li>\n+ *     <li>{@link #credential(AzureKeyCredential)} or {@link #pipeline(HttpPipeline)}</li>\n+ * </ul>\n+ */\n+@ServiceClientBuilder(serviceClients = {SearchIndexClient.class, SearchIndexAsyncClient.class})\n+public final class SearchIndexClientBuilder {\n+    private static final String API_KEY = \"api-key\";\n+\n+    /*\n+     * This header tells the service to return the request ID in the HTTP response. This is useful for correlating the\n+     * request sent to the response.\n+     */\n+    private static final String ECHO_REQUEST_ID_HEADER = \"return-client-request-id\";\n+\n+    private static final String SEARCH_PROPERTIES = \"azure-search-documents.properties\";\n+    private static final String NAME = \"name\";\n+    private static final String VERSION = \"version\";\n+\n+    private final ClientLogger logger = new ClientLogger(SearchIndexClientBuilder.class);\n+    private final List<HttpPipelinePolicy> policies = new ArrayList<>();\n+    private final HttpHeaders headers = new HttpHeaders().put(ECHO_REQUEST_ID_HEADER, \"true\");\n+\n+    private final String clientName;\n+    private final String clientVersion;\n+\n+    private AzureKeyCredential keyCredential;\n+    private SearchServiceVersion serviceVersion;\n+    private String endpoint;\n+    private HttpClient httpClient;\n+    private HttpPipeline httpPipeline;\n+    private HttpLogOptions httpLogOptions = new HttpLogOptions();\n+    private Configuration configuration;\n+    private RetryPolicy retryPolicy;\n+\n+    /**\n+     * Creates a builder instance that is able to configure and construct {@link SearchIndexClient\n+     * SearchServiceClients} and {@link SearchIndexAsyncClient SearchServiceAsyncClients}.\n+     */\n+    public SearchIndexClientBuilder() {\n+        Map<String, String> properties = CoreUtils.getProperties(SEARCH_PROPERTIES);\n+        clientName = properties.getOrDefault(NAME, \"UnknownName\");\n+        clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n+    }\n+\n+    /**\n+     * Creates a {@link SearchIndexClient} based on options set in the Builder. Every time {@code buildClient()} is\n+     * called a new instance of {@link SearchIndexClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline} and {@link #endpoint(String)\n+     * endpoint} are used to create the {@link SearchIndexClient client}. All other builder settings are ignored.\n+     *\n+     * @return A SearchServiceClient with the options set from the builder.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33946a5506d7974f083543535d3dcc732f145411"}, "originalPosition": 92}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NzUxMjIzOnYy", "diffSide": "RIGHT", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/indexes/SearchIndexClientBuilder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo0OToyNFrOGbf0gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMjo0OToyNFrOGbf0gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ4NjA4MQ==", "bodyText": "Need to update Javadoc", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431486081", "createdAt": "2020-05-27T22:49:24Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/indexes/SearchIndexClientBuilder.java", "diffHunk": "@@ -0,0 +1,289 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.search.documents.indexes;\n+\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+import com.azure.search.documents.SearchServiceVersion;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help aid the configuration and instantiation of {@link\n+ * SearchIndexClient SearchServiceClients} and {@link SearchIndexAsyncClient SearchServiceAsyncClients}. Call {@link\n+ * #buildClient() buildClient} and {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of\n+ * the desired client.\n+ * <p>\n+ * The following information must be provided to successfully create a client.\n+ * <ul>\n+ *     <li>{@link #endpoint(String)}</li>\n+ *     <li>{@link #credential(AzureKeyCredential)} or {@link #pipeline(HttpPipeline)}</li>\n+ * </ul>\n+ */\n+@ServiceClientBuilder(serviceClients = {SearchIndexClient.class, SearchIndexAsyncClient.class})\n+public final class SearchIndexClientBuilder {\n+    private static final String API_KEY = \"api-key\";\n+\n+    /*\n+     * This header tells the service to return the request ID in the HTTP response. This is useful for correlating the\n+     * request sent to the response.\n+     */\n+    private static final String ECHO_REQUEST_ID_HEADER = \"return-client-request-id\";\n+\n+    private static final String SEARCH_PROPERTIES = \"azure-search-documents.properties\";\n+    private static final String NAME = \"name\";\n+    private static final String VERSION = \"version\";\n+\n+    private final ClientLogger logger = new ClientLogger(SearchIndexClientBuilder.class);\n+    private final List<HttpPipelinePolicy> policies = new ArrayList<>();\n+    private final HttpHeaders headers = new HttpHeaders().put(ECHO_REQUEST_ID_HEADER, \"true\");\n+\n+    private final String clientName;\n+    private final String clientVersion;\n+\n+    private AzureKeyCredential keyCredential;\n+    private SearchServiceVersion serviceVersion;\n+    private String endpoint;\n+    private HttpClient httpClient;\n+    private HttpPipeline httpPipeline;\n+    private HttpLogOptions httpLogOptions = new HttpLogOptions();\n+    private Configuration configuration;\n+    private RetryPolicy retryPolicy;\n+\n+    /**\n+     * Creates a builder instance that is able to configure and construct {@link SearchIndexClient\n+     * SearchServiceClients} and {@link SearchIndexAsyncClient SearchServiceAsyncClients}.\n+     */\n+    public SearchIndexClientBuilder() {\n+        Map<String, String> properties = CoreUtils.getProperties(SEARCH_PROPERTIES);\n+        clientName = properties.getOrDefault(NAME, \"UnknownName\");\n+        clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n+    }\n+\n+    /**\n+     * Creates a {@link SearchIndexClient} based on options set in the Builder. Every time {@code buildClient()} is\n+     * called a new instance of {@link SearchIndexClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline} and {@link #endpoint(String)\n+     * endpoint} are used to create the {@link SearchIndexClient client}. All other builder settings are ignored.\n+     *\n+     * @return A SearchServiceClient with the options set from the builder.\n+     * @throws NullPointerException If {@code endpoint} are {@code null}.\n+     */\n+    public SearchIndexClient buildClient() {\n+        return new SearchIndexClient(buildAsyncClient());\n+    }\n+\n+    /**\n+     * Creates a {@link SearchIndexAsyncClient} based on options set in the Builder. Every time {@code\n+     * buildAsyncClient()} is called a new instance of {@link SearchIndexAsyncClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline} and {@link #endpoint(String)\n+     * endpoint} are used to create the {@link SearchIndexAsyncClient client}. All other builder settings are\n+     * ignored.\n+     *\n+     * @return A SearchServiceAsyncClient with the options set from the builder.\n+     * @throws NullPointerException If {@code endpoint} are {@code null}.\n+     */\n+    public SearchIndexAsyncClient buildAsyncClient() {\n+        Objects.requireNonNull(endpoint, \"'endpoint' cannot be null.\");\n+\n+        SearchServiceVersion buildVersion = (serviceVersion == null)\n+            ? SearchServiceVersion.getLatest()\n+            : serviceVersion;\n+\n+        if (httpPipeline != null) {\n+            return new SearchIndexAsyncClient(endpoint, buildVersion, httpPipeline);\n+        }\n+\n+        Configuration buildConfiguration = (configuration == null)\n+            ? Configuration.getGlobalConfiguration()\n+            : configuration;\n+        final List<HttpPipelinePolicy> httpPipelinePolicies = new ArrayList<>();\n+        httpPipelinePolicies.add(new AddHeadersPolicy(headers));\n+        httpPipelinePolicies.add(new RequestIdPolicy());\n+\n+        HttpPolicyProviders.addBeforeRetryPolicies(httpPipelinePolicies);\n+        httpPipelinePolicies.add(retryPolicy == null ? new RetryPolicy() : retryPolicy);\n+\n+        httpPipelinePolicies.add(new AddDatePolicy());\n+        if (keyCredential != null) {\n+            this.policies.add(new AzureKeyCredentialPolicy(API_KEY, keyCredential));\n+        }\n+        httpPipelinePolicies.addAll(this.policies);\n+\n+        HttpPolicyProviders.addAfterRetryPolicies(httpPipelinePolicies);\n+\n+        httpPipelinePolicies.add(new UserAgentPolicy(httpLogOptions.getApplicationId(), clientName, clientVersion,\n+            buildConfiguration));\n+        httpPipelinePolicies.add(new HttpLoggingPolicy(httpLogOptions));\n+\n+        HttpPipeline buildPipeline = new HttpPipelineBuilder()\n+            .httpClient(httpClient)\n+            .policies(httpPipelinePolicies.toArray(new HttpPipelinePolicy[0]))\n+            .build();\n+\n+        return new SearchIndexAsyncClient(endpoint, buildVersion, buildPipeline);\n+    }\n+\n+    /**\n+     * Sets the service endpoint for the Azure Search instance.\n+     *\n+     * @param endpoint The URL of the Azure Search instance.\n+     * @return The updated SearchServiceClientBuilder object.\n+     * @throws IllegalArgumentException If {@code endpoint} is null or it cannot be parsed into a valid URL.\n+     */\n+    public SearchIndexClientBuilder endpoint(String endpoint) {\n+        try {\n+            new URL(endpoint);\n+        } catch (MalformedURLException ex) {\n+            throw logger.logExceptionAsWarning(new IllegalArgumentException(\"'endpoint' must be a valid URL\"));\n+        }\n+        this.endpoint = endpoint;\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the {@link AzureKeyCredential} used to authenticate HTTP requests.\n+     *\n+     * @param keyCredential The {@link AzureKeyCredential} used to authenticate HTTP requests.\n+     * @return The updated SearchServiceClientBuilder object.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33946a5506d7974f083543535d3dcc732f145411"}, "originalPosition": 172}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4Nzk0MDc5OnYy", "diffSide": "RIGHT", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMjo0OTozOFrOGbj4Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNDo0NDoxMlrOGblcgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU1MjYwMg==", "bodyText": "Does Search offer anonymous access? I thought a key would always need to be set.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431552602", "createdAt": "2020-05-28T02:49:38Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "diffHunk": "@@ -0,0 +1,311 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents;\n+\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help aid the configuration and instantiation of {@link SearchClient\n+ * SearchClients} and {@link SearchAsyncClient SearchAsyncClients}. Call {@link #buildClient()\n+ * buildClient} and {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of the desired\n+ * client.\n+ * <p>\n+ * The following information must be provided to successfully create a client.\n+ * <ul>\n+ *     <li>{@link #endpoint(String)}</li>\n+ *     <li>{@link #indexName(String)}</li>\n+ *     <li>{@link #credential(AzureKeyCredential)} or {@link #pipeline(HttpPipeline)}</li>\n+ * </ul>\n+ */\n+@ServiceClientBuilder(serviceClients = {SearchClient.class, SearchAsyncClient.class})\n+public final class SearchClientBuilder {\n+    private static final String API_KEY = \"api-key\";\n+\n+    /*\n+     * This header tells the service to return the request ID in the HTTP response. This is useful for correlating the\n+     * request sent to the response.\n+     */\n+    private static final String ECHO_REQUEST_ID_HEADER = \"return-client-request-id\";\n+\n+    private static final String SEARCH_PROPERTIES = \"azure-search-documents.properties\";\n+    private static final String NAME = \"name\";\n+    private static final String VERSION = \"version\";\n+\n+    private final ClientLogger logger = new ClientLogger(SearchClientBuilder.class);\n+    private final List<HttpPipelinePolicy> policies = new ArrayList<>();\n+    private final HttpHeaders headers = new HttpHeaders().put(ECHO_REQUEST_ID_HEADER, \"true\");\n+\n+    private final String clientName;\n+    private final String clientVersion;\n+\n+    private AzureKeyCredential keyCredential;\n+    private SearchServiceVersion serviceVersion;\n+    private String endpoint;\n+    private HttpClient httpClient;\n+    private HttpPipeline httpPipeline;\n+    private HttpLogOptions httpLogOptions = new HttpLogOptions();\n+    private Configuration configuration;\n+    private String indexName;\n+    private RetryPolicy retryPolicy;\n+\n+\n+    /**\n+     * Creates a builder instance that is able to configure and construct {@link SearchClient SearchClients}\n+     * and {@link SearchAsyncClient SearchAsyncClients}.\n+     */\n+    public SearchClientBuilder() {\n+        Map<String, String> properties = CoreUtils.getProperties(SEARCH_PROPERTIES);\n+        clientName = properties.getOrDefault(NAME, \"UnknownName\");\n+        clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n+    }\n+\n+    /**\n+     * Creates a {@link SearchClient} based on options set in the Builder. Every time {@code buildClient()} is\n+     * called a new instance of {@link SearchClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchClient buildClient() {\n+        return new SearchClient(buildAsyncClient());\n+    }\n+\n+    /**\n+     * Creates a {@link SearchAsyncClient} based on options set in the Builder. Every time\n+     * {@code buildAsyncClient()} is called a new instance of {@link SearchAsyncClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchAsyncClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchAsyncClient buildAsyncClient() {\n+        Objects.requireNonNull(indexName, \"'indexName' cannot be null.\");\n+        Objects.requireNonNull(endpoint, \"'endpoint' cannot be null.\");\n+\n+        SearchServiceVersion buildVersion = (serviceVersion == null)\n+            ? SearchServiceVersion.getLatest()\n+            : serviceVersion;\n+\n+        if (httpPipeline != null) {\n+            return new SearchAsyncClient(endpoint, indexName, buildVersion, httpPipeline);\n+        }\n+\n+        Configuration buildConfiguration = (configuration == null)\n+            ? Configuration.getGlobalConfiguration()\n+            : configuration;\n+\n+        // Closest to API goes first, closest to wire goes last.\n+        final List<HttpPipelinePolicy> httpPipelinePolicies = new ArrayList<>();\n+        httpPipelinePolicies.add(new AddHeadersPolicy(headers));\n+        httpPipelinePolicies.add(new RequestIdPolicy());\n+\n+        HttpPolicyProviders.addBeforeRetryPolicies(httpPipelinePolicies);\n+        httpPipelinePolicies.add(retryPolicy == null ? new RetryPolicy() : retryPolicy);\n+\n+        httpPipelinePolicies.add(new AddDatePolicy());\n+        if (keyCredential != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "431eefd1de728ca8488b91bf95d4d9ca41ae04e2"}, "originalPosition": 139}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3NjA2Mw==", "bodyText": "Missed the comments here. Will address these in a new PR.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431576063", "createdAt": "2020-05-28T04:34:32Z", "author": {"login": "sima-zhu"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "diffHunk": "@@ -0,0 +1,311 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents;\n+\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help aid the configuration and instantiation of {@link SearchClient\n+ * SearchClients} and {@link SearchAsyncClient SearchAsyncClients}. Call {@link #buildClient()\n+ * buildClient} and {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of the desired\n+ * client.\n+ * <p>\n+ * The following information must be provided to successfully create a client.\n+ * <ul>\n+ *     <li>{@link #endpoint(String)}</li>\n+ *     <li>{@link #indexName(String)}</li>\n+ *     <li>{@link #credential(AzureKeyCredential)} or {@link #pipeline(HttpPipeline)}</li>\n+ * </ul>\n+ */\n+@ServiceClientBuilder(serviceClients = {SearchClient.class, SearchAsyncClient.class})\n+public final class SearchClientBuilder {\n+    private static final String API_KEY = \"api-key\";\n+\n+    /*\n+     * This header tells the service to return the request ID in the HTTP response. This is useful for correlating the\n+     * request sent to the response.\n+     */\n+    private static final String ECHO_REQUEST_ID_HEADER = \"return-client-request-id\";\n+\n+    private static final String SEARCH_PROPERTIES = \"azure-search-documents.properties\";\n+    private static final String NAME = \"name\";\n+    private static final String VERSION = \"version\";\n+\n+    private final ClientLogger logger = new ClientLogger(SearchClientBuilder.class);\n+    private final List<HttpPipelinePolicy> policies = new ArrayList<>();\n+    private final HttpHeaders headers = new HttpHeaders().put(ECHO_REQUEST_ID_HEADER, \"true\");\n+\n+    private final String clientName;\n+    private final String clientVersion;\n+\n+    private AzureKeyCredential keyCredential;\n+    private SearchServiceVersion serviceVersion;\n+    private String endpoint;\n+    private HttpClient httpClient;\n+    private HttpPipeline httpPipeline;\n+    private HttpLogOptions httpLogOptions = new HttpLogOptions();\n+    private Configuration configuration;\n+    private String indexName;\n+    private RetryPolicy retryPolicy;\n+\n+\n+    /**\n+     * Creates a builder instance that is able to configure and construct {@link SearchClient SearchClients}\n+     * and {@link SearchAsyncClient SearchAsyncClients}.\n+     */\n+    public SearchClientBuilder() {\n+        Map<String, String> properties = CoreUtils.getProperties(SEARCH_PROPERTIES);\n+        clientName = properties.getOrDefault(NAME, \"UnknownName\");\n+        clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n+    }\n+\n+    /**\n+     * Creates a {@link SearchClient} based on options set in the Builder. Every time {@code buildClient()} is\n+     * called a new instance of {@link SearchClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchClient buildClient() {\n+        return new SearchClient(buildAsyncClient());\n+    }\n+\n+    /**\n+     * Creates a {@link SearchAsyncClient} based on options set in the Builder. Every time\n+     * {@code buildAsyncClient()} is called a new instance of {@link SearchAsyncClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchAsyncClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchAsyncClient buildAsyncClient() {\n+        Objects.requireNonNull(indexName, \"'indexName' cannot be null.\");\n+        Objects.requireNonNull(endpoint, \"'endpoint' cannot be null.\");\n+\n+        SearchServiceVersion buildVersion = (serviceVersion == null)\n+            ? SearchServiceVersion.getLatest()\n+            : serviceVersion;\n+\n+        if (httpPipeline != null) {\n+            return new SearchAsyncClient(endpoint, indexName, buildVersion, httpPipeline);\n+        }\n+\n+        Configuration buildConfiguration = (configuration == null)\n+            ? Configuration.getGlobalConfiguration()\n+            : configuration;\n+\n+        // Closest to API goes first, closest to wire goes last.\n+        final List<HttpPipelinePolicy> httpPipelinePolicies = new ArrayList<>();\n+        httpPipelinePolicies.add(new AddHeadersPolicy(headers));\n+        httpPipelinePolicies.add(new RequestIdPolicy());\n+\n+        HttpPolicyProviders.addBeforeRetryPolicies(httpPipelinePolicies);\n+        httpPipelinePolicies.add(retryPolicy == null ? new RetryPolicy() : retryPolicy);\n+\n+        httpPipelinePolicies.add(new AddDatePolicy());\n+        if (keyCredential != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU1MjYwMg=="}, "originalCommit": {"oid": "431eefd1de728ca8488b91bf95d4d9ca41ae04e2"}, "originalPosition": 139}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU3ODI0MQ==", "bodyText": "#11497", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431578241", "createdAt": "2020-05-28T04:44:12Z", "author": {"login": "sima-zhu"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "diffHunk": "@@ -0,0 +1,311 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents;\n+\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help aid the configuration and instantiation of {@link SearchClient\n+ * SearchClients} and {@link SearchAsyncClient SearchAsyncClients}. Call {@link #buildClient()\n+ * buildClient} and {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of the desired\n+ * client.\n+ * <p>\n+ * The following information must be provided to successfully create a client.\n+ * <ul>\n+ *     <li>{@link #endpoint(String)}</li>\n+ *     <li>{@link #indexName(String)}</li>\n+ *     <li>{@link #credential(AzureKeyCredential)} or {@link #pipeline(HttpPipeline)}</li>\n+ * </ul>\n+ */\n+@ServiceClientBuilder(serviceClients = {SearchClient.class, SearchAsyncClient.class})\n+public final class SearchClientBuilder {\n+    private static final String API_KEY = \"api-key\";\n+\n+    /*\n+     * This header tells the service to return the request ID in the HTTP response. This is useful for correlating the\n+     * request sent to the response.\n+     */\n+    private static final String ECHO_REQUEST_ID_HEADER = \"return-client-request-id\";\n+\n+    private static final String SEARCH_PROPERTIES = \"azure-search-documents.properties\";\n+    private static final String NAME = \"name\";\n+    private static final String VERSION = \"version\";\n+\n+    private final ClientLogger logger = new ClientLogger(SearchClientBuilder.class);\n+    private final List<HttpPipelinePolicy> policies = new ArrayList<>();\n+    private final HttpHeaders headers = new HttpHeaders().put(ECHO_REQUEST_ID_HEADER, \"true\");\n+\n+    private final String clientName;\n+    private final String clientVersion;\n+\n+    private AzureKeyCredential keyCredential;\n+    private SearchServiceVersion serviceVersion;\n+    private String endpoint;\n+    private HttpClient httpClient;\n+    private HttpPipeline httpPipeline;\n+    private HttpLogOptions httpLogOptions = new HttpLogOptions();\n+    private Configuration configuration;\n+    private String indexName;\n+    private RetryPolicy retryPolicy;\n+\n+\n+    /**\n+     * Creates a builder instance that is able to configure and construct {@link SearchClient SearchClients}\n+     * and {@link SearchAsyncClient SearchAsyncClients}.\n+     */\n+    public SearchClientBuilder() {\n+        Map<String, String> properties = CoreUtils.getProperties(SEARCH_PROPERTIES);\n+        clientName = properties.getOrDefault(NAME, \"UnknownName\");\n+        clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n+    }\n+\n+    /**\n+     * Creates a {@link SearchClient} based on options set in the Builder. Every time {@code buildClient()} is\n+     * called a new instance of {@link SearchClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchClient buildClient() {\n+        return new SearchClient(buildAsyncClient());\n+    }\n+\n+    /**\n+     * Creates a {@link SearchAsyncClient} based on options set in the Builder. Every time\n+     * {@code buildAsyncClient()} is called a new instance of {@link SearchAsyncClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchAsyncClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchAsyncClient buildAsyncClient() {\n+        Objects.requireNonNull(indexName, \"'indexName' cannot be null.\");\n+        Objects.requireNonNull(endpoint, \"'endpoint' cannot be null.\");\n+\n+        SearchServiceVersion buildVersion = (serviceVersion == null)\n+            ? SearchServiceVersion.getLatest()\n+            : serviceVersion;\n+\n+        if (httpPipeline != null) {\n+            return new SearchAsyncClient(endpoint, indexName, buildVersion, httpPipeline);\n+        }\n+\n+        Configuration buildConfiguration = (configuration == null)\n+            ? Configuration.getGlobalConfiguration()\n+            : configuration;\n+\n+        // Closest to API goes first, closest to wire goes last.\n+        final List<HttpPipelinePolicy> httpPipelinePolicies = new ArrayList<>();\n+        httpPipelinePolicies.add(new AddHeadersPolicy(headers));\n+        httpPipelinePolicies.add(new RequestIdPolicy());\n+\n+        HttpPolicyProviders.addBeforeRetryPolicies(httpPipelinePolicies);\n+        httpPipelinePolicies.add(retryPolicy == null ? new RetryPolicy() : retryPolicy);\n+\n+        httpPipelinePolicies.add(new AddDatePolicy());\n+        if (keyCredential != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU1MjYwMg=="}, "originalCommit": {"oid": "431eefd1de728ca8488b91bf95d4d9ca41ae04e2"}, "originalPosition": 139}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4Nzk0Mjk3OnYy", "diffSide": "RIGHT", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMjo1MTowMFrOGbj5sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMjo1MTowMFrOGbj5sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU1Mjk0Nw==", "bodyText": "Do we normally add the User-Agent at the end of the pipeline? I thought this normally was added when setting the request ID since it'll be static throughout the request/requests (if retried) being made.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431552947", "createdAt": "2020-05-28T02:51:00Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "diffHunk": "@@ -0,0 +1,311 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents;\n+\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help aid the configuration and instantiation of {@link SearchClient\n+ * SearchClients} and {@link SearchAsyncClient SearchAsyncClients}. Call {@link #buildClient()\n+ * buildClient} and {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of the desired\n+ * client.\n+ * <p>\n+ * The following information must be provided to successfully create a client.\n+ * <ul>\n+ *     <li>{@link #endpoint(String)}</li>\n+ *     <li>{@link #indexName(String)}</li>\n+ *     <li>{@link #credential(AzureKeyCredential)} or {@link #pipeline(HttpPipeline)}</li>\n+ * </ul>\n+ */\n+@ServiceClientBuilder(serviceClients = {SearchClient.class, SearchAsyncClient.class})\n+public final class SearchClientBuilder {\n+    private static final String API_KEY = \"api-key\";\n+\n+    /*\n+     * This header tells the service to return the request ID in the HTTP response. This is useful for correlating the\n+     * request sent to the response.\n+     */\n+    private static final String ECHO_REQUEST_ID_HEADER = \"return-client-request-id\";\n+\n+    private static final String SEARCH_PROPERTIES = \"azure-search-documents.properties\";\n+    private static final String NAME = \"name\";\n+    private static final String VERSION = \"version\";\n+\n+    private final ClientLogger logger = new ClientLogger(SearchClientBuilder.class);\n+    private final List<HttpPipelinePolicy> policies = new ArrayList<>();\n+    private final HttpHeaders headers = new HttpHeaders().put(ECHO_REQUEST_ID_HEADER, \"true\");\n+\n+    private final String clientName;\n+    private final String clientVersion;\n+\n+    private AzureKeyCredential keyCredential;\n+    private SearchServiceVersion serviceVersion;\n+    private String endpoint;\n+    private HttpClient httpClient;\n+    private HttpPipeline httpPipeline;\n+    private HttpLogOptions httpLogOptions = new HttpLogOptions();\n+    private Configuration configuration;\n+    private String indexName;\n+    private RetryPolicy retryPolicy;\n+\n+\n+    /**\n+     * Creates a builder instance that is able to configure and construct {@link SearchClient SearchClients}\n+     * and {@link SearchAsyncClient SearchAsyncClients}.\n+     */\n+    public SearchClientBuilder() {\n+        Map<String, String> properties = CoreUtils.getProperties(SEARCH_PROPERTIES);\n+        clientName = properties.getOrDefault(NAME, \"UnknownName\");\n+        clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n+    }\n+\n+    /**\n+     * Creates a {@link SearchClient} based on options set in the Builder. Every time {@code buildClient()} is\n+     * called a new instance of {@link SearchClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchClient buildClient() {\n+        return new SearchClient(buildAsyncClient());\n+    }\n+\n+    /**\n+     * Creates a {@link SearchAsyncClient} based on options set in the Builder. Every time\n+     * {@code buildAsyncClient()} is called a new instance of {@link SearchAsyncClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchAsyncClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchAsyncClient buildAsyncClient() {\n+        Objects.requireNonNull(indexName, \"'indexName' cannot be null.\");\n+        Objects.requireNonNull(endpoint, \"'endpoint' cannot be null.\");\n+\n+        SearchServiceVersion buildVersion = (serviceVersion == null)\n+            ? SearchServiceVersion.getLatest()\n+            : serviceVersion;\n+\n+        if (httpPipeline != null) {\n+            return new SearchAsyncClient(endpoint, indexName, buildVersion, httpPipeline);\n+        }\n+\n+        Configuration buildConfiguration = (configuration == null)\n+            ? Configuration.getGlobalConfiguration()\n+            : configuration;\n+\n+        // Closest to API goes first, closest to wire goes last.\n+        final List<HttpPipelinePolicy> httpPipelinePolicies = new ArrayList<>();\n+        httpPipelinePolicies.add(new AddHeadersPolicy(headers));\n+        httpPipelinePolicies.add(new RequestIdPolicy());\n+\n+        HttpPolicyProviders.addBeforeRetryPolicies(httpPipelinePolicies);\n+        httpPipelinePolicies.add(retryPolicy == null ? new RetryPolicy() : retryPolicy);\n+\n+        httpPipelinePolicies.add(new AddDatePolicy());\n+        if (keyCredential != null) {\n+            this.policies.add(new AzureKeyCredentialPolicy(API_KEY, keyCredential));\n+        }\n+        httpPipelinePolicies.addAll(this.policies);\n+\n+        HttpPolicyProviders.addAfterRetryPolicies(httpPipelinePolicies);\n+\n+        httpPipelinePolicies.add(new UserAgentPolicy(httpLogOptions.getApplicationId(), clientName, clientVersion,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "431eefd1de728ca8488b91bf95d4d9ca41ae04e2"}, "originalPosition": 146}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4Nzk0NDI5OnYy", "diffSide": "RIGHT", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMjo1MjowNVrOGbj6mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMjo1MjowNVrOGbj6mQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU1MzE3Nw==", "bodyText": "Should update the exception message here as null with throw a different exception.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431553177", "createdAt": "2020-05-28T02:52:05Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "diffHunk": "@@ -0,0 +1,311 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents;\n+\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help aid the configuration and instantiation of {@link SearchClient\n+ * SearchClients} and {@link SearchAsyncClient SearchAsyncClients}. Call {@link #buildClient()\n+ * buildClient} and {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of the desired\n+ * client.\n+ * <p>\n+ * The following information must be provided to successfully create a client.\n+ * <ul>\n+ *     <li>{@link #endpoint(String)}</li>\n+ *     <li>{@link #indexName(String)}</li>\n+ *     <li>{@link #credential(AzureKeyCredential)} or {@link #pipeline(HttpPipeline)}</li>\n+ * </ul>\n+ */\n+@ServiceClientBuilder(serviceClients = {SearchClient.class, SearchAsyncClient.class})\n+public final class SearchClientBuilder {\n+    private static final String API_KEY = \"api-key\";\n+\n+    /*\n+     * This header tells the service to return the request ID in the HTTP response. This is useful for correlating the\n+     * request sent to the response.\n+     */\n+    private static final String ECHO_REQUEST_ID_HEADER = \"return-client-request-id\";\n+\n+    private static final String SEARCH_PROPERTIES = \"azure-search-documents.properties\";\n+    private static final String NAME = \"name\";\n+    private static final String VERSION = \"version\";\n+\n+    private final ClientLogger logger = new ClientLogger(SearchClientBuilder.class);\n+    private final List<HttpPipelinePolicy> policies = new ArrayList<>();\n+    private final HttpHeaders headers = new HttpHeaders().put(ECHO_REQUEST_ID_HEADER, \"true\");\n+\n+    private final String clientName;\n+    private final String clientVersion;\n+\n+    private AzureKeyCredential keyCredential;\n+    private SearchServiceVersion serviceVersion;\n+    private String endpoint;\n+    private HttpClient httpClient;\n+    private HttpPipeline httpPipeline;\n+    private HttpLogOptions httpLogOptions = new HttpLogOptions();\n+    private Configuration configuration;\n+    private String indexName;\n+    private RetryPolicy retryPolicy;\n+\n+\n+    /**\n+     * Creates a builder instance that is able to configure and construct {@link SearchClient SearchClients}\n+     * and {@link SearchAsyncClient SearchAsyncClients}.\n+     */\n+    public SearchClientBuilder() {\n+        Map<String, String> properties = CoreUtils.getProperties(SEARCH_PROPERTIES);\n+        clientName = properties.getOrDefault(NAME, \"UnknownName\");\n+        clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n+    }\n+\n+    /**\n+     * Creates a {@link SearchClient} based on options set in the Builder. Every time {@code buildClient()} is\n+     * called a new instance of {@link SearchClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchClient buildClient() {\n+        return new SearchClient(buildAsyncClient());\n+    }\n+\n+    /**\n+     * Creates a {@link SearchAsyncClient} based on options set in the Builder. Every time\n+     * {@code buildAsyncClient()} is called a new instance of {@link SearchAsyncClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchAsyncClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchAsyncClient buildAsyncClient() {\n+        Objects.requireNonNull(indexName, \"'indexName' cannot be null.\");\n+        Objects.requireNonNull(endpoint, \"'endpoint' cannot be null.\");\n+\n+        SearchServiceVersion buildVersion = (serviceVersion == null)\n+            ? SearchServiceVersion.getLatest()\n+            : serviceVersion;\n+\n+        if (httpPipeline != null) {\n+            return new SearchAsyncClient(endpoint, indexName, buildVersion, httpPipeline);\n+        }\n+\n+        Configuration buildConfiguration = (configuration == null)\n+            ? Configuration.getGlobalConfiguration()\n+            : configuration;\n+\n+        // Closest to API goes first, closest to wire goes last.\n+        final List<HttpPipelinePolicy> httpPipelinePolicies = new ArrayList<>();\n+        httpPipelinePolicies.add(new AddHeadersPolicy(headers));\n+        httpPipelinePolicies.add(new RequestIdPolicy());\n+\n+        HttpPolicyProviders.addBeforeRetryPolicies(httpPipelinePolicies);\n+        httpPipelinePolicies.add(retryPolicy == null ? new RetryPolicy() : retryPolicy);\n+\n+        httpPipelinePolicies.add(new AddDatePolicy());\n+        if (keyCredential != null) {\n+            this.policies.add(new AzureKeyCredentialPolicy(API_KEY, keyCredential));\n+        }\n+        httpPipelinePolicies.addAll(this.policies);\n+\n+        HttpPolicyProviders.addAfterRetryPolicies(httpPipelinePolicies);\n+\n+        httpPipelinePolicies.add(new UserAgentPolicy(httpLogOptions.getApplicationId(), clientName, clientVersion,\n+            buildConfiguration));\n+        httpPipelinePolicies.add(new HttpLoggingPolicy(httpLogOptions));\n+\n+        HttpPipeline buildPipeline = new HttpPipelineBuilder()\n+            .httpClient(httpClient)\n+            .policies(httpPipelinePolicies.toArray(new HttpPipelinePolicy[0]))\n+            .build();\n+\n+        return new SearchAsyncClient(endpoint, indexName, buildVersion, buildPipeline);\n+    }\n+\n+    /**\n+     * Sets the service endpoint for the Azure Search instance.\n+     *\n+     * @param endpoint The URL of the Azure Search instance.\n+     * @return The updated SearchClientBuilder object.\n+     * @throws IllegalArgumentException If {@code endpoint} is null or it cannot be parsed into a valid URL.\n+     */\n+    public SearchClientBuilder endpoint(String endpoint) {\n+        try {\n+            new URL(endpoint);\n+        } catch (MalformedURLException ex) {\n+            throw logger.logExceptionAsWarning(new IllegalArgumentException(\"'endpoint' must be a valid URL\"));\n+        }\n+        this.endpoint = endpoint;\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the {@link AzureKeyCredential} used to authenticate HTTP requests.\n+     *\n+     * @param keyCredential The {@link AzureKeyCredential} used to authenticate HTTP requests.\n+     * @return The updated SearchClientBuilder object.\n+     * @throws NullPointerException If {@code keyCredential} is {@code null}.\n+     * @throws IllegalArgumentException If {@link AzureKeyCredential#getKey()} is {@code null} or empty.\n+     */\n+    public SearchClientBuilder credential(AzureKeyCredential keyCredential) {\n+        if (keyCredential == null) {\n+            throw logger.logExceptionAsError(new NullPointerException(\"'keyCredential' cannot be null.\"));\n+        }\n+        if (CoreUtils.isNullOrEmpty(keyCredential.getKey())) {\n+            throw logger.logExceptionAsError(\n+                new IllegalArgumentException(\"'keyCredential' cannot have a null or empty API key.\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "431eefd1de728ca8488b91bf95d4d9ca41ae04e2"}, "originalPosition": 189}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4Nzk0NTAyOnYy", "diffSide": "RIGHT", "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMjo1MjozOFrOGbj7Hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwMjo1MjozOFrOGbj7Hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU1MzMxMQ==", "bodyText": "Should we look into updating other methods which use Objects.requireNonNull to log their error?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11475#discussion_r431553311", "createdAt": "2020-05-28T02:52:38Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/SearchClientBuilder.java", "diffHunk": "@@ -0,0 +1,311 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents;\n+\n+import com.azure.core.annotation.ServiceClientBuilder;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.HttpPipeline;\n+import com.azure.core.http.HttpPipelineBuilder;\n+import com.azure.core.http.policy.AddDatePolicy;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpLogOptions;\n+import com.azure.core.http.policy.HttpLoggingPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.policy.HttpPolicyProviders;\n+import com.azure.core.http.policy.RequestIdPolicy;\n+import com.azure.core.http.policy.RetryPolicy;\n+import com.azure.core.http.policy.UserAgentPolicy;\n+import com.azure.core.util.Configuration;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.core.util.logging.ClientLogger;\n+\n+import java.net.MalformedURLException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * This class provides a fluent builder API to help aid the configuration and instantiation of {@link SearchClient\n+ * SearchClients} and {@link SearchAsyncClient SearchAsyncClients}. Call {@link #buildClient()\n+ * buildClient} and {@link #buildAsyncClient() buildAsyncClient} respectively to construct an instance of the desired\n+ * client.\n+ * <p>\n+ * The following information must be provided to successfully create a client.\n+ * <ul>\n+ *     <li>{@link #endpoint(String)}</li>\n+ *     <li>{@link #indexName(String)}</li>\n+ *     <li>{@link #credential(AzureKeyCredential)} or {@link #pipeline(HttpPipeline)}</li>\n+ * </ul>\n+ */\n+@ServiceClientBuilder(serviceClients = {SearchClient.class, SearchAsyncClient.class})\n+public final class SearchClientBuilder {\n+    private static final String API_KEY = \"api-key\";\n+\n+    /*\n+     * This header tells the service to return the request ID in the HTTP response. This is useful for correlating the\n+     * request sent to the response.\n+     */\n+    private static final String ECHO_REQUEST_ID_HEADER = \"return-client-request-id\";\n+\n+    private static final String SEARCH_PROPERTIES = \"azure-search-documents.properties\";\n+    private static final String NAME = \"name\";\n+    private static final String VERSION = \"version\";\n+\n+    private final ClientLogger logger = new ClientLogger(SearchClientBuilder.class);\n+    private final List<HttpPipelinePolicy> policies = new ArrayList<>();\n+    private final HttpHeaders headers = new HttpHeaders().put(ECHO_REQUEST_ID_HEADER, \"true\");\n+\n+    private final String clientName;\n+    private final String clientVersion;\n+\n+    private AzureKeyCredential keyCredential;\n+    private SearchServiceVersion serviceVersion;\n+    private String endpoint;\n+    private HttpClient httpClient;\n+    private HttpPipeline httpPipeline;\n+    private HttpLogOptions httpLogOptions = new HttpLogOptions();\n+    private Configuration configuration;\n+    private String indexName;\n+    private RetryPolicy retryPolicy;\n+\n+\n+    /**\n+     * Creates a builder instance that is able to configure and construct {@link SearchClient SearchClients}\n+     * and {@link SearchAsyncClient SearchAsyncClients}.\n+     */\n+    public SearchClientBuilder() {\n+        Map<String, String> properties = CoreUtils.getProperties(SEARCH_PROPERTIES);\n+        clientName = properties.getOrDefault(NAME, \"UnknownName\");\n+        clientVersion = properties.getOrDefault(VERSION, \"UnknownVersion\");\n+    }\n+\n+    /**\n+     * Creates a {@link SearchClient} based on options set in the Builder. Every time {@code buildClient()} is\n+     * called a new instance of {@link SearchClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchClient buildClient() {\n+        return new SearchClient(buildAsyncClient());\n+    }\n+\n+    /**\n+     * Creates a {@link SearchAsyncClient} based on options set in the Builder. Every time\n+     * {@code buildAsyncClient()} is called a new instance of {@link SearchAsyncClient} is created.\n+     * <p>\n+     * If {@link #pipeline(HttpPipeline) pipeline} is set, then only the {@code pipeline}, {@link #endpoint(String)\n+     * endpoint}, and {@link #indexName(String) indexName} are used to create the {@link SearchAsyncClient client}.\n+     * All other builder settings are ignored.\n+     *\n+     * @return A SearchClient with the options set from the builder.\n+     * @throws NullPointerException If {@code indexName} or {@code endpoint} are {@code null}.\n+     */\n+    public SearchAsyncClient buildAsyncClient() {\n+        Objects.requireNonNull(indexName, \"'indexName' cannot be null.\");\n+        Objects.requireNonNull(endpoint, \"'endpoint' cannot be null.\");\n+\n+        SearchServiceVersion buildVersion = (serviceVersion == null)\n+            ? SearchServiceVersion.getLatest()\n+            : serviceVersion;\n+\n+        if (httpPipeline != null) {\n+            return new SearchAsyncClient(endpoint, indexName, buildVersion, httpPipeline);\n+        }\n+\n+        Configuration buildConfiguration = (configuration == null)\n+            ? Configuration.getGlobalConfiguration()\n+            : configuration;\n+\n+        // Closest to API goes first, closest to wire goes last.\n+        final List<HttpPipelinePolicy> httpPipelinePolicies = new ArrayList<>();\n+        httpPipelinePolicies.add(new AddHeadersPolicy(headers));\n+        httpPipelinePolicies.add(new RequestIdPolicy());\n+\n+        HttpPolicyProviders.addBeforeRetryPolicies(httpPipelinePolicies);\n+        httpPipelinePolicies.add(retryPolicy == null ? new RetryPolicy() : retryPolicy);\n+\n+        httpPipelinePolicies.add(new AddDatePolicy());\n+        if (keyCredential != null) {\n+            this.policies.add(new AzureKeyCredentialPolicy(API_KEY, keyCredential));\n+        }\n+        httpPipelinePolicies.addAll(this.policies);\n+\n+        HttpPolicyProviders.addAfterRetryPolicies(httpPipelinePolicies);\n+\n+        httpPipelinePolicies.add(new UserAgentPolicy(httpLogOptions.getApplicationId(), clientName, clientVersion,\n+            buildConfiguration));\n+        httpPipelinePolicies.add(new HttpLoggingPolicy(httpLogOptions));\n+\n+        HttpPipeline buildPipeline = new HttpPipelineBuilder()\n+            .httpClient(httpClient)\n+            .policies(httpPipelinePolicies.toArray(new HttpPipelinePolicy[0]))\n+            .build();\n+\n+        return new SearchAsyncClient(endpoint, indexName, buildVersion, buildPipeline);\n+    }\n+\n+    /**\n+     * Sets the service endpoint for the Azure Search instance.\n+     *\n+     * @param endpoint The URL of the Azure Search instance.\n+     * @return The updated SearchClientBuilder object.\n+     * @throws IllegalArgumentException If {@code endpoint} is null or it cannot be parsed into a valid URL.\n+     */\n+    public SearchClientBuilder endpoint(String endpoint) {\n+        try {\n+            new URL(endpoint);\n+        } catch (MalformedURLException ex) {\n+            throw logger.logExceptionAsWarning(new IllegalArgumentException(\"'endpoint' must be a valid URL\"));\n+        }\n+        this.endpoint = endpoint;\n+        return this;\n+    }\n+\n+    /**\n+     * Sets the {@link AzureKeyCredential} used to authenticate HTTP requests.\n+     *\n+     * @param keyCredential The {@link AzureKeyCredential} used to authenticate HTTP requests.\n+     * @return The updated SearchClientBuilder object.\n+     * @throws NullPointerException If {@code keyCredential} is {@code null}.\n+     * @throws IllegalArgumentException If {@link AzureKeyCredential#getKey()} is {@code null} or empty.\n+     */\n+    public SearchClientBuilder credential(AzureKeyCredential keyCredential) {\n+        if (keyCredential == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "431eefd1de728ca8488b91bf95d4d9ca41ae04e2"}, "originalPosition": 184}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4074, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}