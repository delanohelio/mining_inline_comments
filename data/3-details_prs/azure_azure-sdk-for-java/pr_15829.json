{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NjM4MDQ1", "number": 15829, "title": "[FR] Added business card features", "bodyText": "Adding a new feature of Business Card recognition .\n\nImplementation\nTest\nSamples\nCodesnippet\nJavaDoc\nCHANGELOG\nREADME\nfixes: #15830\n\nAlso refactoring a few tests to stay consistency cross same test purpose.", "createdAt": "2020-09-30T16:35:51Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829", "merged": true, "mergeCommit": {"oid": "3a37c043f59e30c6d2b0d174b6cb89b4671d56c5"}, "closed": true, "closedAt": "2020-10-15T01:36:47Z", "author": {"login": "mssfang"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdN_atxgH2gAyNDk1NjM4MDQ1OmU1MTc1MTJjM2E1MjJmOWQ1MmE2ODllOGEwYTc4NTQ3MjZiZjMyNzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSnagHgH2gAyNDk1NjM4MDQ1OjRkYWI3MjI2ODViY2I0NGZiZTMyYjc4OGRjNDY4YzdmOGMwNzIyOGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e517512c3a522f9d52a689e8a0a7854726bf3277", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e517512c3a522f9d52a689e8a0a7854726bf3277", "committedDate": "2020-09-30T16:31:27Z", "message": "added business card features"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7", "committedDate": "2020-09-30T16:57:50Z", "message": "checkstyle issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMzE1MjY1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-501315265", "createdAt": "2020-10-02T17:22:52Z", "commit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzoyMjo1M1rOHb1mEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzoyMzo0OVrOHb1n0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk1MTY5Ng==", "bodyText": "can you include the dfault value is US", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r498951696", "createdAt": "2020-10-02T17:22:53Z", "author": {"login": "iscai-msft"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/RecognizeBusinessCardsOptions.java", "diffHunk": "@@ -0,0 +1,106 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer.models;\n+\n+import com.azure.core.annotation.Fluent;\n+\n+import java.time.Duration;\n+\n+/**\n+ * Options that may be passed when using recognize receipt APIs on Form Recognizer client.\n+ */\n+@Fluent\n+public final class RecognizeBusinessCardsOptions {\n+    private static final Duration DEFAULT_POLL_INTERVAL = Duration.ofSeconds(5);\n+    private FormContentType contentType;\n+    private boolean includeFieldElements;\n+    private Duration pollInterval = DEFAULT_POLL_INTERVAL;\n+    private String locale;\n+\n+    /**\n+     * Get the type of the form. Supported Media types including .pdf, .jpg, .png or .tiff type file stream.\n+     *\n+     * @return the {@code contentType} value.\n+     */\n+    public FormContentType getContentType() {\n+        return contentType;\n+    }\n+\n+    /**\n+     * Get the boolean which specifies if to include form element references in the result.\n+     *\n+     * @return the {@code includeFieldElements} value.\n+     */\n+    public boolean isFieldElementsIncluded() {\n+        return includeFieldElements;\n+    }\n+\n+    /**\n+     * Get the duration between each poll for the operation status. If none is specified, a default of\n+     * 5 seconds is used.\n+     *\n+     * @return the {@code pollInterval} value.\n+     */\n+    public Duration getPollInterval() {\n+        return pollInterval;\n+    }\n+\n+    /**\n+     * Set the type of the form. Supported Media types including .pdf, .jpg, .png or .tiff type file stream.\n+     *\n+     * @param contentType the provided form content type.\n+     *\n+     * @return the updated {@code RecognizeBusinessCardOptions} value.\n+     */\n+    public RecognizeBusinessCardsOptions setContentType(final FormContentType contentType) {\n+        this.contentType = contentType;\n+        return this;\n+    }\n+\n+    /**\n+     * Set the boolean which specifies if to include form element references in the result.\n+     *\n+     * @param includeFieldElements the boolean to specify if to include form element references in the result.\n+     *\n+     * @return the updated {@code RecognizeBusinessCardOptions} value.\n+     */\n+    public RecognizeBusinessCardsOptions setFieldElementsIncluded(final boolean includeFieldElements) {\n+        this.includeFieldElements = includeFieldElements;\n+        return this;\n+    }\n+\n+    /**\n+     * Set the duration between each poll for the operation status. If none is specified, a default of\n+     * 5 seconds is used.\n+     *\n+     * @param pollInterval the duration to specify between each poll for the operation status.\n+     *\n+     * @return the updated {@code RecognizeBusinessCardOptions} value.\n+     */\n+    public RecognizeBusinessCardsOptions setPollInterval(final Duration pollInterval) {\n+        this.pollInterval = pollInterval == null ? DEFAULT_POLL_INTERVAL : pollInterval;\n+        return this;\n+    }\n+\n+    /**\n+     * Get the locale value.\n+     *\n+     * @return the locale value.\n+     */\n+    public String getLocale() {\n+        return locale;\n+    }\n+\n+    /**\n+     * Set the locale value.\n+     *\n+     * @param locale the locale value.\n+     *\n+     * @return the locale value.\n+     */\n+    public RecognizeBusinessCardsOptions setLocale(final String locale) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk1MjE0NQ==", "bodyText": "nit: this looks like it's using recognizeBusinessCardFromUrl, can you make that the name of this sample?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r498952145", "createdAt": "2020-10-02T17:23:49Z", "author": {"login": "iscai-msft"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/ReadmeSamples.java", "diffHunk": "@@ -196,6 +196,86 @@ public void recognizeReceipt() {\n         }\n     }\n \n+    public void recognizeBusinessCard() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNTI2MzYz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-502526363", "createdAt": "2020-10-06T01:32:28Z", "commit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwMTozMjoyOFrOHczCbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwMTozMjoyOFrOHczCbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTk1ODM4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Recognize data from a USA sales receipts using a prebuilt model. Business card fields recognized by the service\n          \n          \n            \n            Recognize data from business cards using a prebuilt model. Business card fields recognized by the service", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r499958381", "createdAt": "2020-10-06T01:32:28Z", "author": {"login": "kristapratico"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -313,11 +313,96 @@ for (int i = 0; i < receiptPageResults.size(); i++) {\n }\n ```\n \n+### Recognize business cards\n+Recognize data from a USA sales receipts using a prebuilt model. Business card fields recognized by the service", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8c5b716174ba591a2ef261c5d822ea7906f55806", "committedDate": "2020-10-06T16:24:04Z", "message": "Update sdk/formrecognizer/azure-ai-formrecognizer/README.md\n\nCo-authored-by: Krista Pratico <krpratic@microsoft.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMTQ3MDU3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-503147057", "createdAt": "2020-10-06T16:25:25Z", "commit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMjY3MzI4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-503267328", "createdAt": "2020-10-06T18:55:23Z", "commit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxODo1NToyM1rOHdVrwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxODo1NToyM1rOHdVrwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUyNjAxNw==", "bodyText": "I think it will be better if we point to https://docs.microsoft.com/en-us/azure/cognitive-services/form-recognizer/concept-business-cards?#fields-extracted\nI will expect this page to get updated instead of us updating the reference of the link every time there is a new preview/stable version", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500526017", "createdAt": "2020-10-06T18:55:23Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -313,11 +313,96 @@ for (int i = 0; i < receiptPageResults.size(); i++) {\n }\n ```\n \n+### Recognize business cards\n+Recognize data from business cards using a prebuilt model. Business card fields recognized by the service\n+can be found [here][service_recognize_business_card].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMjgzNDE3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-503283417", "createdAt": "2020-10-06T19:18:03Z", "commit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "state": "COMMENTED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxOToxODowM1rOHdWcbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxOTo0OTo1NlrOHdXeRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUzODQ3Ng==", "bodyText": "NIT: line 78 says Recognizes receipt data from documents should be Recognizes form data from documents", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500538476", "createdAt": "2020-10-06T19:18:03Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/FormRecognizerClient.java", "diffHunk": "@@ -88,7 +90,7 @@\n      * @param context Additional context that is passed through the HTTP pipeline during the service call.\n      *\n      * @return A {@link SyncPoller} to poll the progress of the recognize custom form operation until it has completed,\n-     * has failed, or has been cancelled. The completed operation returns a List of {@link RecognizedForm}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUzOTQ2NA==", "bodyText": "following what you had before, consider adding  Recognizes business card data...", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500539464", "createdAt": "2020-10-06T19:19:45Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/FormRecognizerClient.java", "diffHunk": "@@ -357,7 +359,114 @@\n     public SyncPoller<FormRecognizerOperationResult, List<RecognizedForm>>\n         beginRecognizeReceipts(InputStream receipt, long length,\n         RecognizeReceiptsOptions recognizeReceiptsOptions, Context context) {\n-        Flux<ByteBuffer> buffer = Utility.toFluxByteBuffer(receipt);\n+        Flux<ByteBuffer> buffer = toFluxByteBuffer(receipt);\n         return client.beginRecognizeReceipts(buffer, length, recognizeReceiptsOptions, context).getSyncPoller();\n     }\n+\n+    /**\n+     * Recognizes business card data from document using optical character recognition (OCR) and a prebuilt\n+     * business card trained model.\n+     * <p>The service does not support cancellation of the long running operation and returns with an\n+     * error message indicating absence of cancellation support</p>\n+     * See <a href=\"https://aka.ms/formrecognizer/businesscardfields\">here</a> for fields found on a business card.\n+     *\n+     * <p><strong>Code sample</strong></p>\n+     * {@codesnippet com.azure.ai.formrecognizer.FormRecognizerClient.beginRecognizeBusinessCardsFromUrl#string}\n+     *\n+     * @param businessCardUrl The source URL to the input business card.\n+     *\n+     * @return A {@link SyncPoller} to poll the progress of the recognize business card operation until it has\n+     * completed, has failed, or has been cancelled. The completed operation returns a list of {@link RecognizedForm}.\n+     * @throws FormRecognizerException If recognize operation fails and the {@link AnalyzeOperationResult} returned with\n+     * an {@link OperationStatus#FAILED}.\n+     * @throws NullPointerException If {@code businessCardUrl} is null.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public SyncPoller<FormRecognizerOperationResult, List<RecognizedForm>> beginRecognizeBusinessCardsFromUrl(\n+        String businessCardUrl) {\n+        return beginRecognizeBusinessCardsFromUrl(businessCardUrl, null, Context.NONE);\n+    }\n+\n+    /**\n+     * Recognizes business card data from documents using optical character recognition (OCR) and a\n+     * prebuilt business card trained model.\n+     * <p>The service does not support cancellation of the long running operation and returns with an\n+     * error message indicating absence of cancellation support</p>\n+     * See <a href=\"https://aka.ms/formrecognizer/businesscardfields\">here</a> for fields found on a business card.\n+     *\n+     * <p><strong>Code sample</strong></p>\n+     * {@codesnippet com.azure.ai.formrecognizer.FormRecognizerClient.beginRecognizeBusinessCardsFromUrl#string-RecognizeBusinessCardsOptions-Context}\n+     *\n+     * @param businessCardUrl The source URL to the input business card.\n+     * @param recognizeBusinessCardsOptions The additional configurable {@link RecognizeBusinessCardsOptions options}\n+     * that may be passed when analyzing a business card.\n+     * @param context Additional context that is passed through the HTTP pipeline during the service call.\n+     *\n+     * @return A {@link SyncPoller} to poll the progress of the recognize business card operation until it has\n+     * completed, has failed, or has been cancelled. The completed operation returns a list of {@link RecognizedForm}.\n+     * @throws FormRecognizerException If recognize operation fails and the {@link AnalyzeOperationResult} returned with\n+     * an {@link OperationStatus#FAILED}.\n+     * @throws NullPointerException If {@code businessCardUrl} is null.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public SyncPoller<FormRecognizerOperationResult, List<RecognizedForm>> beginRecognizeBusinessCardsFromUrl(\n+        String businessCardUrl, RecognizeBusinessCardsOptions recognizeBusinessCardsOptions, Context context) {\n+        return client.beginRecognizeBusinessCardsFromUrl(businessCardUrl, recognizeBusinessCardsOptions, context)\n+                   .getSyncPoller();\n+    }\n+\n+    /**\n+     * Recognizes data from the provided document data using optical character recognition (OCR)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 217}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUzOTU2MQ==", "bodyText": "same in other places", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500539561", "createdAt": "2020-10-06T19:19:55Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/FormRecognizerClient.java", "diffHunk": "@@ -357,7 +359,114 @@\n     public SyncPoller<FormRecognizerOperationResult, List<RecognizedForm>>\n         beginRecognizeReceipts(InputStream receipt, long length,\n         RecognizeReceiptsOptions recognizeReceiptsOptions, Context context) {\n-        Flux<ByteBuffer> buffer = Utility.toFluxByteBuffer(receipt);\n+        Flux<ByteBuffer> buffer = toFluxByteBuffer(receipt);\n         return client.beginRecognizeReceipts(buffer, length, recognizeReceiptsOptions, context).getSyncPoller();\n     }\n+\n+    /**\n+     * Recognizes business card data from document using optical character recognition (OCR) and a prebuilt\n+     * business card trained model.\n+     * <p>The service does not support cancellation of the long running operation and returns with an\n+     * error message indicating absence of cancellation support</p>\n+     * See <a href=\"https://aka.ms/formrecognizer/businesscardfields\">here</a> for fields found on a business card.\n+     *\n+     * <p><strong>Code sample</strong></p>\n+     * {@codesnippet com.azure.ai.formrecognizer.FormRecognizerClient.beginRecognizeBusinessCardsFromUrl#string}\n+     *\n+     * @param businessCardUrl The source URL to the input business card.\n+     *\n+     * @return A {@link SyncPoller} to poll the progress of the recognize business card operation until it has\n+     * completed, has failed, or has been cancelled. The completed operation returns a list of {@link RecognizedForm}.\n+     * @throws FormRecognizerException If recognize operation fails and the {@link AnalyzeOperationResult} returned with\n+     * an {@link OperationStatus#FAILED}.\n+     * @throws NullPointerException If {@code businessCardUrl} is null.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public SyncPoller<FormRecognizerOperationResult, List<RecognizedForm>> beginRecognizeBusinessCardsFromUrl(\n+        String businessCardUrl) {\n+        return beginRecognizeBusinessCardsFromUrl(businessCardUrl, null, Context.NONE);\n+    }\n+\n+    /**\n+     * Recognizes business card data from documents using optical character recognition (OCR) and a\n+     * prebuilt business card trained model.\n+     * <p>The service does not support cancellation of the long running operation and returns with an\n+     * error message indicating absence of cancellation support</p>\n+     * See <a href=\"https://aka.ms/formrecognizer/businesscardfields\">here</a> for fields found on a business card.\n+     *\n+     * <p><strong>Code sample</strong></p>\n+     * {@codesnippet com.azure.ai.formrecognizer.FormRecognizerClient.beginRecognizeBusinessCardsFromUrl#string-RecognizeBusinessCardsOptions-Context}\n+     *\n+     * @param businessCardUrl The source URL to the input business card.\n+     * @param recognizeBusinessCardsOptions The additional configurable {@link RecognizeBusinessCardsOptions options}\n+     * that may be passed when analyzing a business card.\n+     * @param context Additional context that is passed through the HTTP pipeline during the service call.\n+     *\n+     * @return A {@link SyncPoller} to poll the progress of the recognize business card operation until it has\n+     * completed, has failed, or has been cancelled. The completed operation returns a list of {@link RecognizedForm}.\n+     * @throws FormRecognizerException If recognize operation fails and the {@link AnalyzeOperationResult} returned with\n+     * an {@link OperationStatus#FAILED}.\n+     * @throws NullPointerException If {@code businessCardUrl} is null.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public SyncPoller<FormRecognizerOperationResult, List<RecognizedForm>> beginRecognizeBusinessCardsFromUrl(\n+        String businessCardUrl, RecognizeBusinessCardsOptions recognizeBusinessCardsOptions, Context context) {\n+        return client.beginRecognizeBusinessCardsFromUrl(businessCardUrl, recognizeBusinessCardsOptions, context)\n+                   .getSyncPoller();\n+    }\n+\n+    /**\n+     * Recognizes data from the provided document data using optical character recognition (OCR)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUzOTQ2NA=="}, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 217}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU0MzkxNQ==", "bodyText": "Not sure I follow. How will this affect what we already shipped?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500543915", "createdAt": "2020-10-06T19:27:59Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/Transforms.java", "diffHunk": "@@ -282,8 +281,21 @@ private static FormField setFormField(String name, FieldData valueData, FieldVal\n             default:\n                 throw LOGGER.logExceptionAsError(new RuntimeException(\"FieldValue Type not supported\"));\n         }\n-        return new FormField(name, null, valueData, value,\n-            setDefaultConfidenceValue(fieldValue.getConfidence()));\n+\n+        FieldData labelData = null;\n+        // if 'name' is same as the raw field value text, it means this FormField is not a label.\n+        // Otherwise, the FormField is for label, which might have label data, such as bounding box values.\n+        if (name != null && name.equals(fieldValue.getText())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU0NzM5Nw==", "bodyText": "from what I can see the method that calls setFormField  is always setting valueData but here you are assigning it again", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500547397", "createdAt": "2020-10-06T19:34:35Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/Transforms.java", "diffHunk": "@@ -282,8 +281,21 @@ private static FormField setFormField(String name, FieldData valueData, FieldVal\n             default:\n                 throw LOGGER.logExceptionAsError(new RuntimeException(\"FieldValue Type not supported\"));\n         }\n-        return new FormField(name, null, valueData, value,\n-            setDefaultConfidenceValue(fieldValue.getConfidence()));\n+\n+        FieldData labelData = null;\n+        // if 'name' is same as the raw field value text, it means this FormField is not a label.\n+        // Otherwise, the FormField is for label, which might have label data, such as bounding box values.\n+        if (name != null && name.equals(fieldValue.getText())) {\n+            valueData = new FieldData(name, toBoundingBox(fieldValue.getBoundingBox()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU0NzU2Nw==", "bodyText": "we should be consistent and only have a place where this logic happens or debbuging later will be a problem", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500547567", "createdAt": "2020-10-06T19:34:55Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/Transforms.java", "diffHunk": "@@ -282,8 +281,21 @@ private static FormField setFormField(String name, FieldData valueData, FieldVal\n             default:\n                 throw LOGGER.logExceptionAsError(new RuntimeException(\"FieldValue Type not supported\"));\n         }\n-        return new FormField(name, null, valueData, value,\n-            setDefaultConfidenceValue(fieldValue.getConfidence()));\n+\n+        FieldData labelData = null;\n+        // if 'name' is same as the raw field value text, it means this FormField is not a label.\n+        // Otherwise, the FormField is for label, which might have label data, such as bounding box values.\n+        if (name != null && name.equals(fieldValue.getText())) {\n+            valueData = new FieldData(name, toBoundingBox(fieldValue.getBoundingBox()),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU0NzM5Nw=="}, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU1MDQ4Nw==", "bodyText": "I wonder if we should create another link for the supported locales and add it to the docstings here to help users.\nCurrently the supported locales for business cards are here (no ms.docs link :( ): https://westus2.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-1/operations/AnalyzeBusinessCardAsync", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500550487", "createdAt": "2020-10-06T19:40:29Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/RecognizeBusinessCardsOptions.java", "diffHunk": "@@ -0,0 +1,106 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer.models;\n+\n+import com.azure.core.annotation.Fluent;\n+\n+import java.time.Duration;\n+\n+/**\n+ * Options that may be passed when using recognize receipt APIs on Form Recognizer client.\n+ */\n+@Fluent\n+public final class RecognizeBusinessCardsOptions {\n+    private static final Duration DEFAULT_POLL_INTERVAL = Duration.ofSeconds(5);\n+    private FormContentType contentType;\n+    private boolean includeFieldElements;\n+    private Duration pollInterval = DEFAULT_POLL_INTERVAL;\n+    private String locale;\n+\n+    /**\n+     * Get the type of the form. Supported Media types including .pdf, .jpg, .png or .tiff type file stream.\n+     *\n+     * @return the {@code contentType} value.\n+     */\n+    public FormContentType getContentType() {\n+        return contentType;\n+    }\n+\n+    /**\n+     * Get the boolean which specifies if to include form element references in the result.\n+     *\n+     * @return the {@code includeFieldElements} value.\n+     */\n+    public boolean isFieldElementsIncluded() {\n+        return includeFieldElements;\n+    }\n+\n+    /**\n+     * Get the duration between each poll for the operation status. If none is specified, a default of\n+     * 5 seconds is used.\n+     *\n+     * @return the {@code pollInterval} value.\n+     */\n+    public Duration getPollInterval() {\n+        return pollInterval;\n+    }\n+\n+    /**\n+     * Set the type of the form. Supported Media types including .pdf, .jpg, .png or .tiff type file stream.\n+     *\n+     * @param contentType the provided form content type.\n+     *\n+     * @return the updated {@code RecognizeBusinessCardOptions} value.\n+     */\n+    public RecognizeBusinessCardsOptions setContentType(final FormContentType contentType) {\n+        this.contentType = contentType;\n+        return this;\n+    }\n+\n+    /**\n+     * Set the boolean which specifies if to include form element references in the result.\n+     *\n+     * @param includeFieldElements the boolean to specify if to include form element references in the result.\n+     *\n+     * @return the updated {@code RecognizeBusinessCardOptions} value.\n+     */\n+    public RecognizeBusinessCardsOptions setFieldElementsIncluded(final boolean includeFieldElements) {\n+        this.includeFieldElements = includeFieldElements;\n+        return this;\n+    }\n+\n+    /**\n+     * Set the duration between each poll for the operation status. If none is specified, a default of\n+     * 5 seconds is used.\n+     *\n+     * @param pollInterval the duration to specify between each poll for the operation status.\n+     *\n+     * @return the updated {@code RecognizeBusinessCardOptions} value.\n+     */\n+    public RecognizeBusinessCardsOptions setPollInterval(final Duration pollInterval) {\n+        this.pollInterval = pollInterval == null ? DEFAULT_POLL_INTERVAL : pollInterval;\n+        return this;\n+    }\n+\n+    /**\n+     * Get the locale value.\n+     *\n+     * @return the locale value.\n+     */\n+    public String getLocale() {\n+        return locale;\n+    }\n+\n+    /**\n+     * Set the locale value.\n+     *\n+     * @param locale the locale value.\n+     *\n+     * @return the locale value.\n+     */\n+    public RecognizeBusinessCardsOptions setLocale(final String locale) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk1MTY5Ng=="}, "originalCommit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU1MzI5NA==", "bodyText": "not sure if this comment adds value here as it appears again in line 568 where you actually get the result", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500553294", "createdAt": "2020-10-06T19:45:49Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -555,4 +556,360 @@ public void beginRecognizeReceiptsWithOptions() throws IOException {\n             });\n         // END: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeReceipts#Flux-long-RecognizeReceiptsOptions\n     }\n+\n+    /**\n+     * Code snippet for {@link FormRecognizerAsyncClient#beginRecognizeBusinessCardsFromUrl(String)}\n+     */\n+    public void beginRecognizeBusinessCardsFromUrl() {\n+        // BEGIN: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl#string\n+        String businessCardUrl = \"{file_source_url}\";\n+        // if training polling operation completed, retrieve the final result.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU1MzU4Mw==", "bodyText": "NIT: formatting?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500553583", "createdAt": "2020-10-06T19:46:21Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -555,4 +556,360 @@ public void beginRecognizeReceiptsWithOptions() throws IOException {\n             });\n         // END: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeReceipts#Flux-long-RecognizeReceiptsOptions\n     }\n+\n+    /**\n+     * Code snippet for {@link FormRecognizerAsyncClient#beginRecognizeBusinessCardsFromUrl(String)}\n+     */\n+    public void beginRecognizeBusinessCardsFromUrl() {\n+        // BEGIN: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl#string\n+        String businessCardUrl = \"{file_source_url}\";\n+        // if training polling operation completed, retrieve the final result.\n+        formRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl(businessCardUrl)\n+            // if training polling operation completed, retrieve the final result.\n+            .flatMap(AsyncPollResponse::getFinalResult)\n+            .subscribe(recognizedBusinessCards -> {\n+                for (int i = 0; i < recognizedBusinessCards.size(); i++) {\n+                    RecognizedForm recognizedForm = recognizedBusinessCards.get(i);\n+                    Map<String, FormField> recognizedFields = recognizedForm.getFields();\n+                    System.out.printf(\"----------- Recognized Business Card page %d -----------%n\", i);\n+                    FormField contactNames = recognizedFields.get(\"ContactNames\");\n+                    if (contactNames != null) {\n+                        if (FieldValueType.LIST == contactNames.getValue().getValueType()) {\n+                            List<FormField> businessCardItems = contactNames.getValue().asList();\n+                            businessCardItems.stream()\n+                                .filter(businessCardItem -> FieldValueType.MAP == businessCardItem.getValue()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU1NDg0NQ==", "bodyText": "shouldn't be an url. Maybe something like what you have on receipt local/file_path/fileName.jpg ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500554845", "createdAt": "2020-10-06T19:48:58Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -555,4 +556,360 @@ public void beginRecognizeReceiptsWithOptions() throws IOException {\n             });\n         // END: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeReceipts#Flux-long-RecognizeReceiptsOptions\n     }\n+\n+    /**\n+     * Code snippet for {@link FormRecognizerAsyncClient#beginRecognizeBusinessCardsFromUrl(String)}\n+     */\n+    public void beginRecognizeBusinessCardsFromUrl() {\n+        // BEGIN: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl#string\n+        String businessCardUrl = \"{file_source_url}\";\n+        // if training polling operation completed, retrieve the final result.\n+        formRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl(businessCardUrl)\n+            // if training polling operation completed, retrieve the final result.\n+            .flatMap(AsyncPollResponse::getFinalResult)\n+            .subscribe(recognizedBusinessCards -> {\n+                for (int i = 0; i < recognizedBusinessCards.size(); i++) {\n+                    RecognizedForm recognizedForm = recognizedBusinessCards.get(i);\n+                    Map<String, FormField> recognizedFields = recognizedForm.getFields();\n+                    System.out.printf(\"----------- Recognized Business Card page %d -----------%n\", i);\n+                    FormField contactNames = recognizedFields.get(\"ContactNames\");\n+                    if (contactNames != null) {\n+                        if (FieldValueType.LIST == contactNames.getValue().getValueType()) {\n+                            List<FormField> businessCardItems = contactNames.getValue().asList();\n+                            businessCardItems.stream()\n+                                .filter(businessCardItem -> FieldValueType.MAP == businessCardItem.getValue()\n+                                                                                      .getValueType())\n+                                .map(formField -> formField.getValue().asMap())\n+                                .forEach(formFieldMap -> formFieldMap.forEach((key, formField) -> {\n+                                    if (\"FirstName\".equals(key)) {\n+                                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                            String firstName = formField.getValue().asString();\n+                                            System.out.printf(\"First Name: %s, confidence: %.2f%n\",\n+                                                firstName, contactNames.getConfidence());\n+                                        }\n+                                    }\n+                                    if (\"LastName\".equals(key)) {\n+                                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                            String lastName = formField.getValue().asString();\n+                                            System.out.printf(\"Last Name: %s, confidence: %.2f%n\",\n+                                                lastName, contactNames.getConfidence());\n+                                        }\n+                                    }\n+                                }));\n+                        }\n+                    }\n+                    FormField jobTitles = recognizedFields.get(\"JobTitles\");\n+                    if (jobTitles != null) {\n+                        if (FieldValueType.LIST == jobTitles.getValue().getValueType()) {\n+                            List<FormField> jobTitlesItems = jobTitles.getValue().asList();\n+                            jobTitlesItems.stream().forEach(formField -> {\n+                                if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                    String jobTitle = formField.getValue().asString();\n+                                    System.out.printf(\"Job Title: %s, confidence: %.2f%n\",\n+                                        jobTitle, jobTitles.getConfidence());\n+                                }\n+                            });\n+                        }\n+                    }\n+                    FormField addresses = recognizedFields.get(\"Addresses\");\n+                    if (addresses != null) {\n+                        if (FieldValueType.LIST == addresses.getValue().getValueType()) {\n+                            List<FormField> addressesItems = addresses.getValue().asList();\n+                            addressesItems.stream().forEach(formField -> {\n+                                if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                    String address = formField.getValue().asString();\n+                                    System.out.printf(\"Address: %s, confidence: %.2f%n\", address,\n+                                        addresses.getConfidence());\n+                                }\n+                            });\n+                        }\n+                    }\n+                    FormField companyName = recognizedFields.get(\"CompanyNames\");\n+                    if (companyName != null) {\n+                        if (FieldValueType.LIST == companyName.getValue().getValueType()) {\n+                            List<FormField> companyNameItems = companyName.getValue().asList();\n+                            companyNameItems.stream().forEach(formField -> {\n+                                if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                    String companyNameValue = formField.getValue().asString();\n+                                    System.out.printf(\"Company name: %s, confidence: %.2f%n\", companyNameValue,\n+                                        companyName.getConfidence());\n+                                }\n+                            });\n+                        }\n+                    }\n+                }\n+            });\n+        // END: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl#string\n+    }\n+\n+    /**\n+     * Code snippet for\n+     * {@link FormRecognizerAsyncClient#beginRecognizeBusinessCardsFromUrl(String, RecognizeBusinessCardsOptions)}\n+     */\n+    public void beginRecognizeBusinessCardsFromUrlWithOptions() {\n+        // BEGIN: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl#string-RecognizeBusinessCardsOptions\n+        String businessCardUrl = \"{file_source_url}\";\n+        boolean includeFieldElements = true;\n+        // if training polling operation completed, retrieve the final result.\n+        formRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl(businessCardUrl,\n+            new RecognizeBusinessCardsOptions()\n+                .setFieldElementsIncluded(includeFieldElements)\n+                .setPollInterval(Duration.ofSeconds(5)))\n+            .flatMap(AsyncPollResponse::getFinalResult)\n+            .subscribe(recognizedBusinessCards -> {\n+                for (int i = 0; i < recognizedBusinessCards.size(); i++) {\n+                    RecognizedForm recognizedBusinessCard = recognizedBusinessCards.get(i);\n+                    Map<String, FormField> recognizedFields = recognizedBusinessCard.getFields();\n+                    System.out.printf(\"----------- Recognized Business Card page %d -----------%n\", i);\n+                    FormField contactNames = recognizedFields.get(\"ContactNames\");\n+                    if (contactNames != null) {\n+                        if (FieldValueType.LIST == contactNames.getValue().getValueType()) {\n+                            List<FormField> businessCardItems = contactNames.getValue().asList();\n+                            businessCardItems.stream()\n+                                .filter(businessCardItem -> FieldValueType.MAP == businessCardItem.getValue()\n+                                                                                      .getValueType())\n+                                .map(formField -> formField.getValue().asMap())\n+                                .forEach(formFieldMap -> formFieldMap.forEach((key, formField) -> {\n+                                    if (\"FirstName\".equals(key)) {\n+                                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                            String firstName = formField.getValue().asString();\n+                                            System.out.printf(\"First Name: %s, confidence: %.2f%n\",\n+                                                firstName, contactNames.getConfidence());\n+                                        }\n+                                    }\n+                                    if (\"LastName\".equals(key)) {\n+                                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                            String lastName = formField.getValue().asString();\n+                                            System.out.printf(\"Last Name: %s, confidence: %.2f%n\",\n+                                                lastName, contactNames.getConfidence());\n+                                        }\n+                                    }\n+                                }));\n+                        }\n+                    }\n+                    FormField jobTitles = recognizedFields.get(\"JobTitles\");\n+                    if (jobTitles != null) {\n+                        if (FieldValueType.LIST == jobTitles.getValue().getValueType()) {\n+                            List<FormField> jobTitlesItems = jobTitles.getValue().asList();\n+                            jobTitlesItems.stream().forEach(formField -> {\n+                                if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                    String jobTitle = formField.getValue().asString();\n+                                    System.out.printf(\"Job Title: %s, confidence: %.2f%n\",\n+                                        jobTitle, jobTitles.getConfidence());\n+                                }\n+                            });\n+                        }\n+                    }\n+                    FormField addresses = recognizedFields.get(\"Addresses\");\n+                    if (addresses != null) {\n+                        if (FieldValueType.LIST == addresses.getValue().getValueType()) {\n+                            List<FormField> addressesItems = addresses.getValue().asList();\n+                            addressesItems.stream().forEach(formField -> {\n+                                if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                    String address = formField.getValue().asString();\n+                                    System.out.printf(\"Address: %s, confidence: %.2f%n\", address,\n+                                        addresses.getConfidence());\n+                                }\n+                            });\n+                        }\n+                    }\n+                    FormField companyName = recognizedFields.get(\"CompanyNames\");\n+                    if (companyName != null) {\n+                        if (FieldValueType.LIST == companyName.getValue().getValueType()) {\n+                            List<FormField> companyNameItems = companyName.getValue().asList();\n+                            companyNameItems.stream().forEach(formField -> {\n+                                if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                    String companyNameValue = formField.getValue().asString();\n+                                    System.out.printf(\"Company name: %s, confidence: %.2f%n\", companyNameValue,\n+                                        companyName.getConfidence());\n+                                }\n+                            });\n+                        }\n+                    }\n+                }\n+            });\n+        // END: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl#string-RecognizeBusinessCardsOptions\n+    }\n+\n+    /**\n+     * Code snippet for {@link FormRecognizerAsyncClient#beginRecognizeBusinessCards(Flux, long)}\n+     *\n+     * @throws IOException Exception thrown when there is an error in reading all the bytes from the File.\n+     */\n+    public void beginRecognizeBusinessCards() throws IOException {\n+        // BEGIN: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCards#Flux-long\n+        File businessCard = new File(\"{file_source_url}\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 194}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU1NTMzMg==", "bodyText": "NIT: formatting?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r500555332", "createdAt": "2020-10-06T19:49:56Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerClientJavaDocCodeSnippets.java", "diffHunk": "@@ -523,4 +524,341 @@ public void beginRecognizeReceiptsWithOptions() throws IOException {\n         }\n         // END: com.azure.ai.formrecognizer.FormRecognizerClient.beginRecognizeReceipts#InputStream-long-RecognizeReceiptsOptions-Context\n     }\n+\n+    /**\n+     * Code snippet for {@link FormRecognizerClient#beginRecognizeBusinessCardsFromUrl(String)}\n+     */\n+    public void beginRecognizeBusinessCardsFromUrl() {\n+        // BEGIN: com.azure.ai.formrecognizer.FormRecognizerClient.beginRecognizeBusinessCardsFromUrl#string\n+        String businessCardUrl = \"{file_source_url}\";\n+        formRecognizerClient.beginRecognizeBusinessCardsFromUrl(businessCardUrl)\n+            .getFinalResult()\n+            .forEach(recognizedBusinessCard -> {\n+                Map<String, FormField> recognizedFields = recognizedBusinessCard.getFields();\n+                FormField contactNames = recognizedFields.get(\"ContactNames\");\n+                if (contactNames != null) {\n+                    if (FieldValueType.LIST == contactNames.getValue().getValueType()) {\n+                        List<FormField> businessCardItems = contactNames.getValue().asList();\n+                        businessCardItems.stream()\n+                            .filter(businessCardItem -> FieldValueType.MAP == businessCardItem.getValue()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c5b716174ba591a2ef261c5d822ea7906f55806"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6adc03ad27ee671c2a1f0d41c6929fd11c61254f", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6adc03ad27ee671c2a1f0d41c6929fd11c61254f", "committedDate": "2020-10-06T22:56:49Z", "message": "some NIT updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6c38503fc5197eabdd87acac22b479f2a796ee0", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b6c38503fc5197eabdd87acac22b479f2a796ee0", "committedDate": "2020-10-07T15:31:49Z", "message": "address feedbacks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef15403db049f49b6d2d262cabb642d31d12c442", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ef15403db049f49b6d2d262cabb642d31d12c442", "committedDate": "2020-10-07T15:32:09Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into FR-Impl-BusinessCard"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62a9813e3865325e975551f1605a4a272abce7f9", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/62a9813e3865325e975551f1605a4a272abce7f9", "committedDate": "2020-10-07T15:33:43Z", "message": "Merge branch 'FR-Impl-BusinessCard' of https://github.com/mssfang/azure-sdk-for-java into FR-Impl-BusinessCard"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNjU0NDk0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-500654494", "createdAt": "2020-10-01T19:29:03Z", "commit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxOToyOTowM1rOHbYF3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxOTozNjoxNlrOHbYS-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ2ODMxNw==", "bodyText": "USA sales receipts -> business cards. Need to confirm if they would be USA business cards", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r498468317", "createdAt": "2020-10-01T19:29:03Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -313,11 +313,96 @@ for (int i = 0; i < receiptPageResults.size(); i++) {\n }\n ```\n \n+### Recognize business cards\n+Recognize data from a USA sales receipts using a prebuilt model. Business card fields recognized by the service", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ2ODcxMw==", "bodyText": "Should we call this BusinessCardTypedRecognizeForm instead?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r498468713", "createdAt": "2020-10-01T19:29:53Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -313,11 +313,96 @@ for (int i = 0; i < receiptPageResults.size(); i++) {\n }\n ```\n \n+### Recognize business cards\n+Recognize data from a USA sales receipts using a prebuilt model. Business card fields recognized by the service\n+can be found [here][service_recognize_business_card].\n+See [StronglyTypedRecognizedForm][strongly_typed_sample] for a suggested approach to extract", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ2OTY1Mw==", "bodyText": "Should we consider removing this to keep the example a little concise since this goes on the readme section.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r498469653", "createdAt": "2020-10-01T19:31:57Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -313,11 +313,96 @@ for (int i = 0; i < receiptPageResults.size(); i++) {\n }\n ```\n \n+### Recognize business cards\n+Recognize data from a USA sales receipts using a prebuilt model. Business card fields recognized by the service\n+can be found [here][service_recognize_business_card].\n+See [StronglyTypedRecognizedForm][strongly_typed_sample] for a suggested approach to extract\n+information from business card.\n+\n+<!-- embedme ./src/samples/java/com/azure/ai/formrecognizer/ReadmeSamples.java#L200-L274-->\n+```java\n+String businessCardUrl =\n+    \"https://raw.githubusercontent.com/Azure/azure-sdk-for-java/master/sdk/formrecognizer\"\n+        + \"/azure-ai-formrecognizer/src/samples/java/sample-forms/businessCards/businessCard.jpg\";\n+\n+SyncPoller<FormRecognizerOperationResult, List<RecognizedForm>> analyzeBusinessCardPoller =\n+    formRecognizerClient.beginRecognizeBusinessCardsFromUrl(businessCardUrl);\n+\n+List<RecognizedForm> businessCardPageResults = analyzeBusinessCardPoller.getFinalResult();\n+\n+for (int i = 0; i < businessCardPageResults.size(); i++) {\n+    RecognizedForm recognizedForm = businessCardPageResults.get(i);\n+    Map<String, FormField> recognizedFields = recognizedForm.getFields();\n+    System.out.printf(\"----------- Recognized business card info for page %d -----------%n\", i);\n+    FormField contactNames = recognizedFields.get(\"ContactNames\");\n+    if (contactNames != null) {\n+        if (FieldValueType.LIST == contactNames.getValue().getValueType()) {\n+            List<FormField> businessCardItems = contactNames.getValue().asList();\n+            businessCardItems.stream()\n+                .filter(businessCardItem -> FieldValueType.MAP == businessCardItem.getValue().getValueType())\n+                .map(formField -> formField.getValue().asMap())\n+                .forEach(formFieldMap -> formFieldMap.forEach((key, formField) -> {\n+                    if (\"FirstName\".equals(key)) {\n+                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                            String firstName = formField.getValue().asString();\n+                            System.out.printf(\"First Name: %s, confidence: %.2f%n\",\n+                                firstName, contactNames.getConfidence());\n+                        }\n+                    }\n+                    if (\"LastName\".equals(key)) {\n+                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                            String lastName = formField.getValue().asString();\n+                            System.out.printf(\"Last Name: %s, confidence: %.2f%n\",\n+                                lastName, contactNames.getConfidence());\n+                        }\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ3MDk2OQ==", "bodyText": "For a list the labelData is null", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r498470969", "createdAt": "2020-10-01T19:34:44Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/Transforms.java", "diffHunk": "@@ -331,7 +346,7 @@ private static float setDefaultConfidenceValue(Float confidence) {\n      */\n     private static List<FormField> toFieldValueArray(List<FieldValue> valueArray, List<ReadResult> readResults) {\n         return valueArray.stream()\n-            .map(fieldValue -> setFormField(null, null, fieldValue, readResults))\n+            .map(fieldValue -> setFormField(fieldValue.getText(), null, fieldValue, readResults))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ3MTI3Nw==", "bodyText": "nit: business_card_url", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r498471277", "createdAt": "2020-10-01T19:35:23Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -555,4 +556,360 @@ public void beginRecognizeReceiptsWithOptions() throws IOException {\n             });\n         // END: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeReceipts#Flux-long-RecognizeReceiptsOptions\n     }\n+\n+    /**\n+     * Code snippet for {@link FormRecognizerAsyncClient#beginRecognizeBusinessCardsFromUrl(String)}\n+     */\n+    public void beginRecognizeBusinessCardsFromUrl() {\n+        // BEGIN: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl#string\n+        String businessCardUrl = \"{file_source_url}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ3MTY3NA==", "bodyText": "Consider removing to make the example short?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r498471674", "createdAt": "2020-10-01T19:36:16Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientJavaDocCodeSnippets.java", "diffHunk": "@@ -555,4 +556,360 @@ public void beginRecognizeReceiptsWithOptions() throws IOException {\n             });\n         // END: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeReceipts#Flux-long-RecognizeReceiptsOptions\n     }\n+\n+    /**\n+     * Code snippet for {@link FormRecognizerAsyncClient#beginRecognizeBusinessCardsFromUrl(String)}\n+     */\n+    public void beginRecognizeBusinessCardsFromUrl() {\n+        // BEGIN: com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl#string\n+        String businessCardUrl = \"{file_source_url}\";\n+        // if training polling operation completed, retrieve the final result.\n+        formRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl(businessCardUrl)\n+            // if training polling operation completed, retrieve the final result.\n+            .flatMap(AsyncPollResponse::getFinalResult)\n+            .subscribe(recognizedBusinessCards -> {\n+                for (int i = 0; i < recognizedBusinessCards.size(); i++) {\n+                    RecognizedForm recognizedForm = recognizedBusinessCards.get(i);\n+                    Map<String, FormField> recognizedFields = recognizedForm.getFields();\n+                    System.out.printf(\"----------- Recognized Business Card page %d -----------%n\", i);\n+                    FormField contactNames = recognizedFields.get(\"ContactNames\");\n+                    if (contactNames != null) {\n+                        if (FieldValueType.LIST == contactNames.getValue().getValueType()) {\n+                            List<FormField> businessCardItems = contactNames.getValue().asList();\n+                            businessCardItems.stream()\n+                                .filter(businessCardItem -> FieldValueType.MAP == businessCardItem.getValue()\n+                                                                                      .getValueType())\n+                                .map(formField -> formField.getValue().asMap())\n+                                .forEach(formFieldMap -> formFieldMap.forEach((key, formField) -> {\n+                                    if (\"FirstName\".equals(key)) {\n+                                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                            String firstName = formField.getValue().asString();\n+                                            System.out.printf(\"First Name: %s, confidence: %.2f%n\",\n+                                                firstName, contactNames.getConfidence());\n+                                        }\n+                                    }\n+                                    if (\"LastName\".equals(key)) {\n+                                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                            String lastName = formField.getValue().asString();\n+                                            System.out.printf(\"Last Name: %s, confidence: %.2f%n\",\n+                                                lastName, contactNames.getConfidence());\n+                                        }\n+                                    }\n+                                }));\n+                        }\n+                    }\n+                    FormField jobTitles = recognizedFields.get(\"JobTitles\");\n+                    if (jobTitles != null) {\n+                        if (FieldValueType.LIST == jobTitles.getValue().getValueType()) {\n+                            List<FormField> jobTitlesItems = jobTitles.getValue().asList();\n+                            jobTitlesItems.stream().forEach(formField -> {\n+                                if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                    String jobTitle = formField.getValue().asString();\n+                                    System.out.printf(\"Job Title: %s, confidence: %.2f%n\",\n+                                        jobTitle, jobTitles.getConfidence());\n+                                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04b1f7ade10228dbf25d7ac0a69e4cecbca0c0e7"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MDA2MjEw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-506006210", "createdAt": "2020-10-09T21:47:54Z", "commit": {"oid": "62a9813e3865325e975551f1605a4a272abce7f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTo0Nzo1NFrOHfZcFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQyMTo0Nzo1NFrOHfZcFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjY4NDY5Mw==", "bodyText": "out of curiosity, I imagine you are getting here either empty or null, right?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r502684693", "createdAt": "2020-10-09T21:47:54Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/RecognizeBusinessCard.java", "diffHunk": "@@ -0,0 +1,203 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer;\n+\n+import com.azure.ai.formrecognizer.models.FieldValueType;\n+import com.azure.ai.formrecognizer.models.FormField;\n+import com.azure.ai.formrecognizer.models.FormRecognizerOperationResult;\n+import com.azure.ai.formrecognizer.models.RecognizedForm;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.util.polling.SyncPoller;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.File;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.file.Files;\n+import java.util.List;\n+import java.util.Map;\n+\n+/**\n+ * Sample for recognizing business card information from a document given through a file.\n+ */\n+public class RecognizeBusinessCard {\n+\n+    /**\n+     * Main method to invoke this demo.\n+     *\n+     * @param args Unused. Arguments to the program.\n+     *\n+     * @throws IOException Exception thrown when there is an error in reading all the bytes from the File.\n+     */\n+    public static void main(final String[] args) throws IOException {\n+        // Instantiate a client that will be used to call the service.\n+        FormRecognizerClient client = new FormRecognizerClientBuilder()\n+                                          .credential(new AzureKeyCredential(\"{key}\"))\n+                                          .endpoint(\"https://{endpoint}.cognitiveservices.azure.com/\")\n+                                          .buildClient();\n+\n+        File sourceFile = new File(\"../formrecognizer/azure-ai-formrecognizer/src/samples/java/sample-forms/\"\n+                                       + \"businessCards/businessCard.jpg\");\n+        byte[] fileContent = Files.readAllBytes(sourceFile.toPath());\n+        InputStream targetStream = new ByteArrayInputStream(fileContent);\n+\n+        SyncPoller<FormRecognizerOperationResult, List<RecognizedForm>> analyzeBusinessCardPoller =\n+            client.beginRecognizeBusinessCards(targetStream, sourceFile.length());\n+\n+        List<RecognizedForm> businessCardPageResults = analyzeBusinessCardPoller.getFinalResult();\n+\n+        for (int i = 0; i < businessCardPageResults.size(); i++) {\n+            RecognizedForm recognizedForm = businessCardPageResults.get(i);\n+            Map<String, FormField> recognizedFields = recognizedForm.getFields();\n+            System.out.printf(\"----------- Recognized business card info for page %d -----------%n\", i);\n+            FormField contactNames = recognizedFields.get(\"ContactNames\");\n+            if (contactNames != null) {\n+                if (FieldValueType.LIST == contactNames.getValue().getValueType()) {\n+                    List<FormField> businessCardItems = contactNames.getValue().asList();\n+                    businessCardItems.stream()\n+                        .filter(businessCardItem -> FieldValueType.MAP == businessCardItem.getValue().getValueType())\n+                        .map(formField -> formField.getValue().asMap())\n+                        .forEach(formFieldMap -> formFieldMap.forEach((key, formField) -> {\n+                            if (\"FirstName\".equals(key)) {\n+                                if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                    String firstName = formField.getValue().asString();\n+                                    System.out.printf(\"First Name: %s, confidence: %.2f%n\",\n+                                        firstName, contactNames.getConfidence());\n+                                }\n+                            }\n+                            if (\"LastName\".equals(key)) {\n+                                if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                    String lastName = formField.getValue().asString();\n+                                    System.out.printf(\"Last Name: %s, confidence: %.2f%n\",\n+                                        lastName, contactNames.getConfidence());\n+                                }\n+                            }\n+                        }));\n+                }\n+            }\n+\n+            FormField jobTitles = recognizedFields.get(\"JobTitles\");\n+            if (jobTitles != null) {\n+                if (FieldValueType.LIST == jobTitles.getValue().getValueType()) {\n+                    List<FormField> jobTitlesItems = jobTitles.getValue().asList();\n+                    jobTitlesItems.stream().forEach(formField -> {\n+                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                            String jobTitle = formField.getValue().asString();\n+                            System.out.printf(\"Job Title: %s, confidence: %.2f%n\",\n+                                jobTitle, jobTitles.getConfidence());\n+                        }\n+                    });\n+                }\n+            }\n+\n+            FormField departments = recognizedFields.get(\"Departments\");\n+            if (departments != null) {\n+                if (FieldValueType.LIST == departments.getValue().getValueType()) {\n+                    List<FormField> departmentsItems = departments.getValue().asList();\n+                    departmentsItems.stream().forEach(formField -> {\n+                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                            String department = formField.getValue().asString();\n+                            System.out.printf(\"Department: %s, confidence: %.2f%n\",\n+                                department, departments.getConfidence());\n+                        }\n+                    });\n+                }\n+            }\n+\n+            FormField emails = recognizedFields.get(\"Emails\");\n+            if (emails != null) {\n+                if (FieldValueType.LIST == emails.getValue().getValueType()) {\n+                    List<FormField> emailsItems = emails.getValue().asList();\n+                    emailsItems.stream().forEach(formField -> {\n+                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                            String email = formField.getValue().asString();\n+                            System.out.printf(\"Email: %s, confidence: %.2f%n\", email, emails.getConfidence());\n+                        }\n+                    });\n+                }\n+            }\n+\n+            FormField websites = recognizedFields.get(\"Websites\");\n+            if (websites != null) {\n+                if (FieldValueType.LIST == websites.getValue().getValueType()) {\n+                    List<FormField> websitesItems = websites.getValue().asList();\n+                    websitesItems.stream().forEach(formField -> {\n+                        if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                            String website = formField.getValue().asString();\n+                            System.out.printf(\"Web site: %s, confidence: %.2f%n\",\n+                                website, websites.getConfidence());\n+                        }\n+                    });\n+                }\n+            }\n+\n+            FormField mobilePhones = recognizedFields.get(\"MobilePhones\");\n+            if (mobilePhones != null) {\n+                if (FieldValueType.LIST == mobilePhones.getValue().getValueType()) {\n+                    List<FormField> mobilePhonesItems = mobilePhones.getValue().asList();\n+                    mobilePhonesItems.stream().forEach(formField -> {\n+                        if (FieldValueType.PHONE_NUMBER == formField.getValue().getValueType()) {\n+                            String mobilePhoneNumber = formField.getValue().asPhoneNumber();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62a9813e3865325e975551f1605a4a272abce7f9"}, "originalPosition": 141}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6800142885abe3c5416ca9c76059752df485458", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f6800142885abe3c5416ca9c76059752df485458", "committedDate": "2020-10-13T21:14:48Z", "message": "address feedbacks and change to use APIKeyCredentila since AAD not working"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ca941908e952d64df5b77759742a12796075610", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4ca941908e952d64df5b77759742a12796075610", "committedDate": "2020-10-13T21:26:38Z", "message": "remove unused import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODg5NTQ0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-507889544", "createdAt": "2020-10-13T23:07:45Z", "commit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMzowNzo0NlrOHg8jjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMzoyMzowNFrOHg82sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMwODYyMw==", "bodyText": "I would recommend adding a simialr sample for businesscards.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504308623", "createdAt": "2020-10-13T23:07:46Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -313,11 +313,73 @@ for (int i = 0; i < receiptPageResults.size(); i++) {\n }\n ```\n \n+### Recognize business cards\n+Recognize data from business cards using a prebuilt model. Business card fields recognized by the service\n+can be found [here][service_recognize_business_card].\n+See [StronglyTypedRecognizedForm][strongly_typed_sample] for a suggested approach to extract\n+information from a business card. The given sample is for `receipt` but the same approach applies to `business card`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMwOTc4MA==", "bodyText": "thev -> the", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504309780", "createdAt": "2020-10-13T23:11:16Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClient.java", "diffHunk": "@@ -558,6 +559,167 @@\n         }\n     }\n \n+    /**\n+     * Recognizes business card data using optical character recognition (OCR) and a prebuilt business card trained\n+     * model.\n+     * <p>The service does not support cancellation of the long running operation and returns with an\n+     * error message indicating absence of cancellation support.</p>\n+     * See <a href=\"https://aka.ms/formrecognizer/businesscardfields\">here</a> for fields found on a business card.\n+     *\n+     * <p><strong>Code sample</strong></p>\n+     * {@codesnippet com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl#string}\n+     *\n+     * @param businessCardUrl The source URL to the input business card.\n+     *\n+     * @return A {@link PollerFlux} that polls the recognize business card operation until it has completed, has failed,\n+     * or has been cancelled. The completed operation returns a list of {@link RecognizedForm}.\n+     * @throws FormRecognizerException If recognize operation fails and the {@link AnalyzeOperationResult} returned with\n+     * an {@link OperationStatus#FAILED}.\n+     * @throws NullPointerException If {@code businessCardUrl} is null.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public PollerFlux<FormRecognizerOperationResult, List<RecognizedForm>> beginRecognizeBusinessCardsFromUrl(\n+        String businessCardUrl) {\n+        return beginRecognizeBusinessCardsFromUrl(businessCardUrl, null);\n+    }\n+\n+    /**\n+     * Recognizes business card data using optical character recognition (OCR) and a prebuilt business card trained\n+     * model.\n+     * <p>The service does not support cancellation of the long running operation and returns with an\n+     * error message indicating absence of cancellation support.</p>\n+     * See <a href=\"https://aka.ms/formrecognizer/businesscardfields\">here</a> for fields found on a business card.\n+     *\n+     * <p><strong>Code sample</strong></p>\n+     * {@codesnippet com.azure.ai.formrecognizer.FormRecognizerAsyncClient.beginRecognizeBusinessCardsFromUrl#string-RecognizeBusinessCardsOptions}\n+     *\n+     * @param businessCardUrl The source URL to the input business card.\n+     * @param recognizeBusinessCardsOptions The additional configurable {@link RecognizeBusinessCardsOptions options}\n+     * that may be passed when analyzing a business card.\n+     *\n+     * @return A {@link PollerFlux} that polls the recognize business card operation until it has completed, has failed,\n+     * or has been cancelled. The completed operation returns a list of {@link RecognizedForm}.\n+     * @throws FormRecognizerException If recognize operation fails and the {@link AnalyzeOperationResult} returned with\n+     * an {@link OperationStatus#FAILED}.\n+     * @throws NullPointerException If {@code businessCardUrl} is null.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public PollerFlux<FormRecognizerOperationResult, List<RecognizedForm>> beginRecognizeBusinessCardsFromUrl(\n+        String businessCardUrl, RecognizeBusinessCardsOptions recognizeBusinessCardsOptions) {\n+        return beginRecognizeBusinessCardsFromUrl(businessCardUrl, recognizeBusinessCardsOptions, Context.NONE);\n+    }\n+\n+    PollerFlux<FormRecognizerOperationResult, List<RecognizedForm>> beginRecognizeBusinessCardsFromUrl(\n+        String businessCardUrl, RecognizeBusinessCardsOptions recognizeBusinessCardsOptions, Context context) {\n+        try {\n+            Objects.requireNonNull(businessCardUrl, \"'businessCardUrl' is required and cannot be null.\");\n+\n+            recognizeBusinessCardsOptions = getRecognizeBusinessCardsOptions(recognizeBusinessCardsOptions);\n+            final boolean isFieldElementsIncluded = recognizeBusinessCardsOptions.isFieldElementsIncluded();\n+            return new PollerFlux<>(\n+                recognizeBusinessCardsOptions.getPollInterval(),\n+                urlActivationOperation(\n+                    () -> service.analyzeBusinessCardAsyncWithResponseAsync(isFieldElementsIncluded,\n+                        \"\", new SourcePath().setSource(businessCardUrl), context)\n+                              .map(response -> new FormRecognizerOperationResult(\n+                                  parseModelId(response.getDeserializedHeaders().getOperationLocation())))),\n+                pollingOperation(resultId -> service.getAnalyzeBusinessCardResultWithResponseAsync(resultId, context)),\n+                (activationResponse, pollingContext) -> monoError(logger,\n+                    new RuntimeException(\"Cancellation is not supported\")),\n+                fetchingOperation(resultId -> service.getAnalyzeBusinessCardResultWithResponseAsync(resultId, context))\n+                    .andThen(after -> after.map(modelSimpleResponse -> toRecognizedForm(\n+                        modelSimpleResponse.getValue().getAnalyzeResult(), isFieldElementsIncluded))\n+                                          .onErrorMap(Utility::mapToHttpResponseExceptionIfExist)));\n+        } catch (RuntimeException ex) {\n+            return PollerFlux.error(ex);\n+        }\n+    }\n+\n+    /**\n+     * Recognizes business card data using optical character recognition (OCR) and a prebuilt business card\n+     * trained model.\n+     * <p>The service does not support cancellation of the long running operation and returns with an\n+     * error message indicating absence of cancellation support.</p>\n+     * See <a href=\"https://aka.ms/formrecognizer/businesscardfields\">here</a> for fields found on a business card.\n+     *\n+     * Note that the {@code businessCard} passed must be replayable if retries are enabled (the default).\n+     * In other words, thev{@code Flux} must produce the same data each time it is subscribed to.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "originalPosition": 213}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMxMTQ2Nw==", "bodyText": "We don't need this check as whenever the fields value type == ARRAY it will always be set to null.\nWe could keep the comment for future reference.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504311467", "createdAt": "2020-10-13T23:16:14Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/Transforms.java", "diffHunk": "@@ -331,7 +334,16 @@ private static float setDefaultConfidenceValue(Float confidence) {\n      */\n     private static List<FormField> toFieldValueArray(List<FieldValue> valueArray, List<ReadResult> readResults) {\n         return valueArray.stream()\n-            .map(fieldValue -> setFormField(null, null, fieldValue, readResults))\n+            .map(fieldValue -> {\n+                FieldData valueData = null;\n+                // ARRAY has ho value data, such as bounding box.\n+                if (ARRAY != fieldValue.getType()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMxMTcxMg==", "bodyText": "business card API's", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504311712", "createdAt": "2020-10-13T23:17:00Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/RecognizeBusinessCardsOptions.java", "diffHunk": "@@ -0,0 +1,108 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer.models;\n+\n+import com.azure.core.annotation.Fluent;\n+\n+import java.time.Duration;\n+\n+/**\n+ * Options that may be passed when using recognize receipt APIs on Form Recognizer client.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMxMjEyNQ==", "bodyText": "Should this be firstName.getConfidence() ?\nSame comment for all samples/docsnippets.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504312125", "createdAt": "2020-10-13T23:18:30Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/FormRecognizerClientJavaDocCodeSnippets.java", "diffHunk": "@@ -523,4 +524,236 @@ public void beginRecognizeReceiptsWithOptions() throws IOException {\n         }\n         // END: com.azure.ai.formrecognizer.FormRecognizerClient.beginRecognizeReceipts#InputStream-long-RecognizeReceiptsOptions-Context\n     }\n+\n+    /**\n+     * Code snippet for {@link FormRecognizerClient#beginRecognizeBusinessCardsFromUrl(String)}\n+     */\n+    public void beginRecognizeBusinessCardsFromUrl() {\n+        // BEGIN: com.azure.ai.formrecognizer.FormRecognizerClient.beginRecognizeBusinessCardsFromUrl#string\n+        String businessCardUrl = \"{business_card_url}\";\n+        formRecognizerClient.beginRecognizeBusinessCardsFromUrl(businessCardUrl)\n+            .getFinalResult()\n+            .forEach(recognizedBusinessCard -> {\n+                Map<String, FormField> recognizedFields = recognizedBusinessCard.getFields();\n+                FormField contactNames = recognizedFields.get(\"ContactNames\");\n+                if (contactNames != null) {\n+                    if (FieldValueType.LIST == contactNames.getValue().getValueType()) {\n+                        List<FormField> businessCardItems = contactNames.getValue().asList();\n+                        businessCardItems.stream()\n+                            .filter(businessCardItem -> FieldValueType.MAP == businessCardItem.getValue()\n+                                                                                  .getValueType())\n+                            .map(formField -> formField.getValue().asMap())\n+                            .forEach(formFieldMap -> formFieldMap.forEach((key, formField) -> {\n+                                if (\"FirstName\".equals(key)) {\n+                                    if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                        String firstName = formField.getValue().asString();\n+                                        System.out.printf(\"First Name: %s, confidence: %.2f%n\",\n+                                            firstName, contactNames.getConfidence());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMxMjk4OQ==", "bodyText": "List<FormField> websiteList = websites.getValue().asList();\nwebsiteList.stream().forEach(websiteItem -> {\nif (FieldValueType.STRING == websiteItem.getValue().getValueType()) \nSimilar comment for other fields and all samples.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504312989", "createdAt": "2020-10-13T23:21:08Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/RecognizeBusinessCardFromUrlAsync.java", "diffHunk": "@@ -0,0 +1,218 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer;\n+\n+import com.azure.ai.formrecognizer.models.FieldValueType;\n+import com.azure.ai.formrecognizer.models.FormField;\n+import com.azure.ai.formrecognizer.models.FormRecognizerOperationResult;\n+import com.azure.ai.formrecognizer.models.RecognizedForm;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.util.polling.PollerFlux;\n+import reactor.core.publisher.Mono;\n+\n+import java.util.List;\n+import java.util.Map;\n+import java.util.concurrent.TimeUnit;\n+\n+/**\n+ * Asynchronous sample for recognizing business card information from an URL.\n+ */\n+public class RecognizeBusinessCardFromUrlAsync {\n+    /**\n+     * Main method to invoke this demo.\n+     *\n+     * @param args Unused. Arguments to the program.\n+     */\n+    public static void main(final String[] args) {\n+        // Instantiate a client that will be used to call the service.\n+        FormRecognizerAsyncClient client = new FormRecognizerClientBuilder()\n+                                               .credential(new AzureKeyCredential(\"{key}\"))\n+                                               .endpoint(\"https://{endpoint}.cognitiveservices.azure.com/\")\n+                                               .buildAsyncClient();\n+\n+        String businessCardUrl = \"https://raw.githubusercontent.com/Azure/azure-sdk-for-java/master/sdk/formrecognizer\"\n+                                     + \"/azure-ai-formrecognizer/src/samples/java/sample-forms/businessCards/businessCard.jpg\";\n+        PollerFlux<FormRecognizerOperationResult, List<RecognizedForm>> analyzeBusinessCardPoller =\n+            client.beginRecognizeBusinessCardsFromUrl(businessCardUrl);\n+\n+        Mono<List<RecognizedForm>> businessCardPageResultsMono =\n+            analyzeBusinessCardPoller\n+                .last()\n+                .flatMap(pollResponse -> {\n+                    if (pollResponse.getStatus().isComplete()) {\n+                        System.out.println(\"Polling completed successfully\");\n+                        // training completed successfully, retrieving final result.\n+                        return pollResponse.getFinalResult();\n+                    } else {\n+                        return Mono.error(new RuntimeException(\"Polling completed unsuccessfully with status:\"\n+                                                                   + pollResponse.getStatus()));\n+                    }\n+                });\n+\n+        businessCardPageResultsMono.subscribe(businessCardPageResults -> {\n+            for (int i = 0; i < businessCardPageResults.size(); i++) {\n+                RecognizedForm recognizedForm = businessCardPageResults.get(i);\n+                Map<String, FormField> recognizedFields = recognizedForm.getFields();\n+                System.out.printf(\"----------- Recognized business card info for page %d -----------%n\", i);\n+                FormField contactNames = recognizedFields.get(\"ContactNames\");\n+                if (contactNames != null) {\n+                    if (FieldValueType.LIST == contactNames.getValue().getValueType()) {\n+                        List<FormField> businessCardItems = contactNames.getValue().asList();\n+                        businessCardItems.stream()\n+                            .filter(businessCardItem -> FieldValueType.MAP == businessCardItem.getValue().getValueType())\n+                            .map(formField -> formField.getValue().asMap())\n+                            .forEach(formFieldMap -> formFieldMap.forEach((key, formField) -> {\n+                                if (\"FirstName\".equals(key)) {\n+                                    if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                        String firstName = formField.getValue().asString();\n+                                        System.out.printf(\"First Name: %s, confidence: %.2f%n\",\n+                                            firstName, contactNames.getConfidence());\n+                                    }\n+                                }\n+                                if (\"LastName\".equals(key)) {\n+                                    if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                        String lastName = formField.getValue().asString();\n+                                        System.out.printf(\"Last Name: %s, confidence: %.2f%n\",\n+                                            lastName, contactNames.getConfidence());\n+                                    }\n+                                }\n+                            }));\n+                    }\n+                }\n+\n+                FormField jobTitles = recognizedFields.get(\"JobTitles\");\n+                if (jobTitles != null) {\n+                    if (FieldValueType.LIST == jobTitles.getValue().getValueType()) {\n+                        List<FormField> jobTitlesItems = jobTitles.getValue().asList();\n+                        jobTitlesItems.stream().forEach(formField -> {\n+                            if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                String jobTitle = formField.getValue().asString();\n+                                System.out.printf(\"Job Title: %s, confidence: %.2f%n\",\n+                                    jobTitle, jobTitles.getConfidence());\n+                            }\n+                        });\n+                    }\n+                }\n+\n+                FormField departments = recognizedFields.get(\"Departments\");\n+                if (departments != null) {\n+                    if (FieldValueType.LIST == departments.getValue().getValueType()) {\n+                        List<FormField> departmentsItems = departments.getValue().asList();\n+                        departmentsItems.stream().forEach(formField -> {\n+                            if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                String department = formField.getValue().asString();\n+                                System.out.printf(\"Department: %s, confidence: %.2f%n\",\n+                                    department, departments.getConfidence());\n+                            }\n+                        });\n+                    }\n+                }\n+\n+                FormField emails = recognizedFields.get(\"Emails\");\n+                if (emails != null) {\n+                    if (FieldValueType.LIST == emails.getValue().getValueType()) {\n+                        List<FormField> emailsItems = emails.getValue().asList();\n+                        emailsItems.stream().forEach(formField -> {\n+                            if (FieldValueType.STRING == formField.getValue().getValueType()) {\n+                                String email = formField.getValue().asString();\n+                                System.out.printf(\"Email: %s, confidence: %.2f%n\", email, emails.getConfidence());\n+                            }\n+                        });\n+                    }\n+                }\n+\n+                FormField websites = recognizedFields.get(\"Websites\");\n+                if (websites != null) {\n+                    if (FieldValueType.LIST == websites.getValue().getValueType()) {\n+                        List<FormField> websitesItems = websites.getValue().asList();\n+                        websitesItems.stream().forEach(formField -> {\n+                            if (FieldValueType.STRING == formField.getValue().getValueType()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "originalPosition": 130}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMxMzM3NA==", "bodyText": "Can this be a list of fields and you loop over them to call validateFieldValueTransforms when testing?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504313374", "createdAt": "2020-10-13T23:22:29Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -99,6 +100,18 @@\n     static final String LOCAL_FILE_PATH = \"src/test/resources/sample_files/Test/\";\n     static final String ENCODED_EMPTY_SPACE = \"{\\\"source\\\":\\\"https://fakeuri.com/blank%20space\\\"}\";\n \n+    // Business Card fields\n+    static final String CONTACT_NAMES = \"ContactNames\";\n+    static final String JOB_TITLES = \"JobTitles\";\n+    static final String DEPARTMENTS = \"Departments\";\n+    static final String EMAILS = \"Emails\";\n+    static final String WEBSITES = \"Websites\";\n+    static final String MOBILE_PHONES = \"MobilePhones\";\n+    static final String OTHER_PHONES = \"OtherPhones\";\n+    static final String FAXES = \"Faxes\";\n+    static final String ADDRESSES = \"Addresses\";\n+    static final String COMPANY_NAMES = \"CompanyNames\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMxMzUyMQ==", "bodyText": "Why was this removed?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504313521", "createdAt": "2020-10-13T23:23:04Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -696,7 +818,6 @@ static void validateMultiPageDataLabeled(List<RecognizedForm> actualRecognizedFo\n                 assertNotNull(formField.getName());\n                 assertNotNull(formField.getValue());\n                 assertNotNull(formField.getValueData().getText());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "originalPosition": 210}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3OTI3MzA3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-507927307", "createdAt": "2020-10-14T01:06:06Z", "commit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwMTowNjowNlrOHg-mnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwMTowNjowNlrOHg-mnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDM0MjE3Mw==", "bodyText": "In response to this\nCould do something like,\nbusinessCardsFields.forEach(eachField -> \n     validateFieldValueTransforms(expectedReceiptFields.get(eachField), actualRecognizedBusinessCardFields.get(eachField), readResults, includeFieldElements))\nwhere businessCards = List.of(\"ContactNames\", \"MobilePhones\")\nSo you just have one constant related to business card fields rather than 10/12 loose ones!", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504342173", "createdAt": "2020-10-14T01:06:06Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -596,6 +659,56 @@ void validateRecognizedResult(List<RecognizedForm> actualFormList, boolean inclu\n         }\n     }\n \n+    // Business cards\n+    void validateBusinessCardDataFields(Map<String, FormField> actualRecognizedBusinessCardFields, boolean includeFieldElements) {\n+        final AnalyzeResult analyzeResult = getAnalyzeRawResponse().getAnalyzeResult();\n+        List<ReadResult> readResults = analyzeResult.getReadResults();\n+        DocumentResult documentResult = analyzeResult.getDocumentResults().get(0);\n+        Map<String, FieldValue> expectedReceiptFields = documentResult.getFields();\n+\n+        validateFieldValueTransforms(expectedReceiptFields.get(CONTACT_NAMES),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "originalPosition": 138}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3OTI4NjYy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-507928662", "createdAt": "2020-10-14T01:10:49Z", "commit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwMToxMDo0OVrOHg-rdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwMToxMDo0OVrOHg-rdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDM0MzQxMg==", "bodyText": "Is this updated to not use Default Credential because business cards endpoint is not working with AAD?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504343412", "createdAt": "2020-10-14T01:10:49Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientTestBase.java", "diffHunk": "@@ -106,7 +105,8 @@ FormTrainingClientBuilder getFormTrainingClientBuilder(HttpClient httpClient,\n         if (getTestMode() == TestMode.PLAYBACK) {\n             builder.credential(new AzureKeyCredential(INVALID_KEY));\n         } else {\n-            builder.credential(new DefaultAzureCredentialBuilder().build());\n+            builder.credential(new AzureKeyCredential(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ca941908e952d64df5b77759742a12796075610"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10cb7cbc8f7bcd80946e6292809781677a667cc2", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/10cb7cbc8f7bcd80946e6292809781677a667cc2", "committedDate": "2020-10-14T17:58:14Z", "message": "address feedbacks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjA1MDQx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-508605041", "createdAt": "2020-10-14T18:10:12Z", "commit": {"oid": "10cb7cbc8f7bcd80946e6292809781677a667cc2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODoxMDoxMlrOHhfHwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODoxMDoxMlrOHhfHwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg3NDk0NA==", "bodyText": "It will be good to also add that this version of the library now targets v2.1 of the service", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504874944", "createdAt": "2020-10-14T18:10:12Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/CHANGELOG.md", "diffHunk": "@@ -1,7 +1,8 @@\n # Release History\n \n ## 3.1.0-beta.1 (Unreleased)\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10cb7cbc8f7bcd80946e6292809781677a667cc2"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "812ea49029a6ab96dbdf1fc05a0fac5d28e09693", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/812ea49029a6ab96dbdf1fc05a0fac5d28e09693", "committedDate": "2020-10-14T18:17:23Z", "message": "fixes checkstyle error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjQwMzEx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-508640311", "createdAt": "2020-10-14T18:58:17Z", "commit": {"oid": "812ea49029a6ab96dbdf1fc05a0fac5d28e09693"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODo1ODoxOFrOHhg3hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODo1ODoxOFrOHhg3hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwMzU1OA==", "bodyText": "In which cases page here will be null?\nFor what I see in .NET, the ContactNames page is null so I am setting it to 1 because -1 sounds too weird. You should always have at least one page if you are here.\nI did create an issue to follow up on that with the service team and I initiated a thread for that.\nIf you are seeing more cases, please add to the conversation.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504903558", "createdAt": "2020-10-14T18:58:18Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/Transforms.java", "diffHunk": "@@ -331,7 +334,16 @@ private static float setDefaultConfidenceValue(Float confidence) {\n      */\n     private static List<FormField> toFieldValueArray(List<FieldValue> valueArray, List<ReadResult> readResults) {\n         return valueArray.stream()\n-            .map(fieldValue -> setFormField(null, null, fieldValue, readResults))\n+            .map(fieldValue -> {\n+                FieldData valueData = null;\n+                // ARRAY has ho value data, such as bounding box.\n+                if (ARRAY != fieldValue.getType()) {\n+                    valueData = new FieldData(fieldValue.getText(), toBoundingBox(fieldValue.getBoundingBox()),\n+                        fieldValue.getPage() == null ? -1 : fieldValue.getPage(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "812ea49029a6ab96dbdf1fc05a0fac5d28e09693"}, "originalPosition": 77}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjQ0NDUw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-508644450", "createdAt": "2020-10-14T19:03:58Z", "commit": {"oid": "812ea49029a6ab96dbdf1fc05a0fac5d28e09693"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxOTowMzo1OVrOHhhD6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxOTowMzo1OVrOHhhD6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwNjcyOQ==", "bodyText": "Something to consider, I see this in all Options classes.  Any reason why this is not set somewhere general int he library so the options can reference that value instead?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r504906729", "createdAt": "2020-10-14T19:03:59Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/RecognizeBusinessCardsOptions.java", "diffHunk": "@@ -0,0 +1,108 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer.models;\n+\n+import com.azure.core.annotation.Fluent;\n+\n+import java.time.Duration;\n+\n+/**\n+ * Options that may be passed when using recognize business card APIs on Form Recognizer client.\n+ */\n+@Fluent\n+public final class RecognizeBusinessCardsOptions {\n+    private static final Duration DEFAULT_POLL_INTERVAL = Duration.ofSeconds(5);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "812ea49029a6ab96dbdf1fc05a0fac5d28e09693"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjkwMDI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-508690025", "createdAt": "2020-10-14T20:08:38Z", "commit": {"oid": "812ea49029a6ab96dbdf1fc05a0fac5d28e09693"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "934ec83fc4b6ab78137a0901739bb14b848786e1", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/934ec83fc4b6ab78137a0901739bb14b848786e1", "committedDate": "2020-10-14T21:20:07Z", "message": "address feedbacks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ca7aabc222e58c8fdecd1fed2a35e7b7fe77bba", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3ca7aabc222e58c8fdecd1fed2a35e7b7fe77bba", "committedDate": "2020-10-14T21:24:42Z", "message": "checkstyle and -1 change to 1 for page num"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4ODIzMjI0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#pullrequestreview-508823224", "createdAt": "2020-10-14T22:46:19Z", "commit": {"oid": "3ca7aabc222e58c8fdecd1fed2a35e7b7fe77bba"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMjo0NjoxOVrOHhpAKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQyMjo0OTozMVrOHhpJLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTAzNjg0Mg==", "bodyText": "Just thinking about our variable names here, we should do this better\nFormField contactNamesFormField = recognizedFields.get(\"ContactNames\");\nif (contactNameFormField != null) {\n        if (FieldValueType.LIST == contactNamesFormField.getValue().getValueType()) {\n            List<FormField> contactNamesList= contactNames.getValue().asList();\n            contactNamesList.stream()\n                .filter(contactNameItem-> FieldValueType.MAP == contactNameItem.getValue().getValueType())\n                .map(eachContactName -> {\n                    System.out.printf(\"Contact name: %s%n\", eachContactName .getValueData().getText());\n                    return eachContactName .getValue().asMap();\n                })", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r505036842", "createdAt": "2020-10-14T22:46:19Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -313,11 +313,76 @@ for (int i = 0; i < receiptPageResults.size(); i++) {\n }\n ```\n \n+### Recognize business cards\n+Recognize data from business cards using a prebuilt model. Business card fields recognized by the service\n+can be found [here][service_recognize_business_card].\n+See [StronglyTypedRecognizedForm][strongly_typed_sample] for a suggested approach to extract\n+information from a business card. The given sample is for `receipt` but the same approach applies to `business card`.\n+\n+<!-- embedme ./src/samples/java/com/azure/ai/formrecognizer/ReadmeSamples.java#L200-L254-->\n+```java\n+String businessCardUrl =\n+    \"https://raw.githubusercontent.com/Azure/azure-sdk-for-java/master/sdk/formrecognizer\"\n+        + \"/azure-ai-formrecognizer/src/samples/java/sample-forms/businessCards/businessCard.jpg\";\n+\n+SyncPoller<FormRecognizerOperationResult, List<RecognizedForm>> analyzeBusinessCardPoller =\n+    formRecognizerClient.beginRecognizeBusinessCardsFromUrl(businessCardUrl);\n+\n+List<RecognizedForm> businessCardPageResults = analyzeBusinessCardPoller.getFinalResult();\n+\n+for (int i = 0; i < businessCardPageResults.size(); i++) {\n+    RecognizedForm recognizedForm = businessCardPageResults.get(i);\n+    Map<String, FormField> recognizedFields = recognizedForm.getFields();\n+    System.out.printf(\"----------- Recognized business card info for page %d -----------%n\", i);\n+    FormField contactNames = recognizedFields.get(\"ContactNames\");\n+    if (contactNames != null) {\n+        if (FieldValueType.LIST == contactNames.getValue().getValueType()) {\n+            List<FormField> businessCardItems = contactNames.getValue().asList();\n+            businessCardItems.stream()\n+                .filter(businessCardItem -> FieldValueType.MAP == businessCardItem.getValue().getValueType())\n+                .map(formField -> {\n+                    System.out.printf(\"Contact name: %s%n\", formField.getValueData().getText());\n+                    return formField.getValue().asMap();\n+                })", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ca7aabc222e58c8fdecd1fed2a35e7b7fe77bba"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTAzOTE0OQ==", "bodyText": ":)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15829#discussion_r505039149", "createdAt": "2020-10-14T22:49:31Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -596,6 +651,31 @@ void validateRecognizedResult(List<RecognizedForm> actualFormList, boolean inclu\n         }\n     }\n \n+    // Business cards\n+    void validateBusinessCardDataFields(Map<String, FormField> actualRecognizedBusinessCardFields, boolean includeFieldElements) {\n+        final AnalyzeResult analyzeResult = getAnalyzeRawResponse().getAnalyzeResult();\n+        List<ReadResult> readResults = analyzeResult.getReadResults();\n+        DocumentResult documentResult = analyzeResult.getDocumentResults().get(0);\n+        Map<String, FieldValue> expectedReceiptFields = documentResult.getFields();\n+\n+        BUSINESS_CARD_FIELDS.forEach(businessCardField ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ca7aabc222e58c8fdecd1fed2a35e7b7fe77bba"}, "originalPosition": 94}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f741e1fe767e536072d6d47c6943d97e6e3a6c6f", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f741e1fe767e536072d6d47c6943d97e6e3a6c6f", "committedDate": "2020-10-14T23:51:55Z", "message": "update verbose naming of contactNames"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d443cc2f711f2e5c381a2b977211821350623178", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d443cc2f711f2e5c381a2b977211821350623178", "committedDate": "2020-10-15T01:16:52Z", "message": "resolve conflict and added templ solution to walk around the checkstyle errors introduced in composited model feature"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dab722685bcb44fbe32b788dc468c7f8c07228f", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4dab722685bcb44fbe32b788dc468c7f8c07228f", "committedDate": "2020-10-15T01:23:07Z", "message": "Readme sample line updates"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3121, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}