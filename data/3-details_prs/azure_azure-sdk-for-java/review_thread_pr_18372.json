{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1OTYwOTcy", "number": 18372, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMzozMjoyNFrOFJq5Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMzozOToxOFrOFJq8bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1Njg0MjgzOnYy", "diffSide": "RIGHT", "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMzozMjoyNFrOIMGNhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwNToxMDoyMlrOIMHFdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NTU5MQ==", "bodyText": "Did we mention the Web API sample link somewhere above?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549555591", "createdAt": "2020-12-29T03:32:24Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "diffHunk": "@@ -48,68 +55,44 @@ We need to ensure that this [environment checklist][ready-to-run-checklist] is c\n </dependencies>\n ```\n \n-### Register your Web API\n-You can follow *azure-spring-boot-sample-active-directory-resource-server* sample to add `ResourceAccessGraph.read`, `ResourceAccessGraphCustomResources.read` scopes. \n-Convention current application id url is `api://sample-client-id`, ; the application id url of the sample *azure-spring-boot-sample-active-directory-resource-server* is `custom-client-id`.  \n-After adding as shown below:\n-\n-   ![API Permissions](resource/resource-server-obo-add-scope.png)\n-\n-### Add API permissions\n-The current Web API will access Graph API and Custom API. \n-\n-Sign in to the [Azure portal][azure-portal]. If you have access to multiple tenants, use the **Directory + subscription** filter  in the top menu to select the tenant containing your client app's registration.\n-\n-#### Add Graph API Permission\n-1. Select **Azure Active Directory** > **App registrations**, and then select your current sample application (not your web API).\n-\n-2. Select **API permissions** > **Add a permission** > **Microsoft APIs** > **Microsoft Graph** > **Delegated permissions**, select **User.Read**, select **Add permission** to complete the process.\n+### Configure your middle-tier Web API A\n+1. You can follow *Web API A* sample to add `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes. Convention current application id url is `api://xxxxx-xxxx-xxxxxx`.(**NOTE**: In the **Web API A** `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes should be added to the **Web APP**.)![API Permissions](docs/image-resource-server-obo-add-scope.png)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NTYyNA==", "bodyText": "Maybe Convention of current application id is better.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549555624", "createdAt": "2020-12-29T03:32:46Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "diffHunk": "@@ -48,68 +55,44 @@ We need to ensure that this [environment checklist][ready-to-run-checklist] is c\n </dependencies>\n ```\n \n-### Register your Web API\n-You can follow *azure-spring-boot-sample-active-directory-resource-server* sample to add `ResourceAccessGraph.read`, `ResourceAccessGraphCustomResources.read` scopes. \n-Convention current application id url is `api://sample-client-id`, ; the application id url of the sample *azure-spring-boot-sample-active-directory-resource-server* is `custom-client-id`.  \n-After adding as shown below:\n-\n-   ![API Permissions](resource/resource-server-obo-add-scope.png)\n-\n-### Add API permissions\n-The current Web API will access Graph API and Custom API. \n-\n-Sign in to the [Azure portal][azure-portal]. If you have access to multiple tenants, use the **Directory + subscription** filter  in the top menu to select the tenant containing your client app's registration.\n-\n-#### Add Graph API Permission\n-1. Select **Azure Active Directory** > **App registrations**, and then select your current sample application (not your web API).\n-\n-2. Select **API permissions** > **Add a permission** > **Microsoft APIs** > **Microsoft Graph** > **Delegated permissions**, select **User.Read**, select **Add permission** to complete the process.\n+### Configure your middle-tier Web API A\n+1. You can follow *Web API A* sample to add `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes. Convention current application id url is `api://xxxxx-xxxx-xxxxxx`.(**NOTE**: In the **Web API A** `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes should be added to the **Web APP**.)![API Permissions](docs/image-resource-server-obo-add-scope.png)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NTU5MQ=="}, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NTY5MQ==", "bodyText": "Why do we have a concept of Web APP here?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549555691", "createdAt": "2020-12-29T03:33:11Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "diffHunk": "@@ -48,68 +55,44 @@ We need to ensure that this [environment checklist][ready-to-run-checklist] is c\n </dependencies>\n ```\n \n-### Register your Web API\n-You can follow *azure-spring-boot-sample-active-directory-resource-server* sample to add `ResourceAccessGraph.read`, `ResourceAccessGraphCustomResources.read` scopes. \n-Convention current application id url is `api://sample-client-id`, ; the application id url of the sample *azure-spring-boot-sample-active-directory-resource-server* is `custom-client-id`.  \n-After adding as shown below:\n-\n-   ![API Permissions](resource/resource-server-obo-add-scope.png)\n-\n-### Add API permissions\n-The current Web API will access Graph API and Custom API. \n-\n-Sign in to the [Azure portal][azure-portal]. If you have access to multiple tenants, use the **Directory + subscription** filter  in the top menu to select the tenant containing your client app's registration.\n-\n-#### Add Graph API Permission\n-1. Select **Azure Active Directory** > **App registrations**, and then select your current sample application (not your web API).\n-\n-2. Select **API permissions** > **Add a permission** > **Microsoft APIs** > **Microsoft Graph** > **Delegated permissions**, select **User.Read**, select **Add permission** to complete the process.\n+### Configure your middle-tier Web API A\n+1. You can follow *Web API A* sample to add `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes. Convention current application id url is `api://xxxxx-xxxx-xxxxxx`.(**NOTE**: In the **Web API A** `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes should be added to the **Web APP**.)![API Permissions](docs/image-resource-server-obo-add-scope.png)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NTU5MQ=="}, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU2OTkwOA==", "bodyText": "Did we mention the Web API sample link somewhere above?\nYes. A link to a sample Web API already exists above.\nMaybe Convention of current application id is better.\nI agree with you.\nWhy do we have a concept of Web APP here?\nI want to tell users of this sample that they should configure their Web API A permissions in their web app.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549569908", "createdAt": "2020-12-29T05:10:22Z", "author": {"login": "ZhuXiaoBing-cn"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "diffHunk": "@@ -48,68 +55,44 @@ We need to ensure that this [environment checklist][ready-to-run-checklist] is c\n </dependencies>\n ```\n \n-### Register your Web API\n-You can follow *azure-spring-boot-sample-active-directory-resource-server* sample to add `ResourceAccessGraph.read`, `ResourceAccessGraphCustomResources.read` scopes. \n-Convention current application id url is `api://sample-client-id`, ; the application id url of the sample *azure-spring-boot-sample-active-directory-resource-server* is `custom-client-id`.  \n-After adding as shown below:\n-\n-   ![API Permissions](resource/resource-server-obo-add-scope.png)\n-\n-### Add API permissions\n-The current Web API will access Graph API and Custom API. \n-\n-Sign in to the [Azure portal][azure-portal]. If you have access to multiple tenants, use the **Directory + subscription** filter  in the top menu to select the tenant containing your client app's registration.\n-\n-#### Add Graph API Permission\n-1. Select **Azure Active Directory** > **App registrations**, and then select your current sample application (not your web API).\n-\n-2. Select **API permissions** > **Add a permission** > **Microsoft APIs** > **Microsoft Graph** > **Delegated permissions**, select **User.Read**, select **Add permission** to complete the process.\n+### Configure your middle-tier Web API A\n+1. You can follow *Web API A* sample to add `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes. Convention current application id url is `api://xxxxx-xxxx-xxxxxx`.(**NOTE**: In the **Web API A** `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes should be added to the **Web APP**.)![API Permissions](docs/image-resource-server-obo-add-scope.png)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NTU5MQ=="}, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1Njg0NDY4OnYy", "diffSide": "LEFT", "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMzozNDoxOFrOIMGOig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwNToxMjozMlrOIMHGpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NTg1MA==", "bodyText": "We don't need the Graph API permissions now?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549555850", "createdAt": "2020-12-29T03:34:18Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "diffHunk": "@@ -48,68 +55,44 @@ We need to ensure that this [environment checklist][ready-to-run-checklist] is c\n </dependencies>\n ```\n \n-### Register your Web API\n-You can follow *azure-spring-boot-sample-active-directory-resource-server* sample to add `ResourceAccessGraph.read`, `ResourceAccessGraphCustomResources.read` scopes. \n-Convention current application id url is `api://sample-client-id`, ; the application id url of the sample *azure-spring-boot-sample-active-directory-resource-server* is `custom-client-id`.  \n-After adding as shown below:\n-\n-   ![API Permissions](resource/resource-server-obo-add-scope.png)\n-\n-### Add API permissions\n-The current Web API will access Graph API and Custom API. \n-\n-Sign in to the [Azure portal][azure-portal]. If you have access to multiple tenants, use the **Directory + subscription** filter  in the top menu to select the tenant containing your client app's registration.\n-\n-#### Add Graph API Permission\n-1. Select **Azure Active Directory** > **App registrations**, and then select your current sample application (not your web API).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU3MDIxMg==", "bodyText": "I'm using photos instead of text description.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549570212", "createdAt": "2020-12-29T05:12:32Z", "author": {"login": "ZhuXiaoBing-cn"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "diffHunk": "@@ -48,68 +55,44 @@ We need to ensure that this [environment checklist][ready-to-run-checklist] is c\n </dependencies>\n ```\n \n-### Register your Web API\n-You can follow *azure-spring-boot-sample-active-directory-resource-server* sample to add `ResourceAccessGraph.read`, `ResourceAccessGraphCustomResources.read` scopes. \n-Convention current application id url is `api://sample-client-id`, ; the application id url of the sample *azure-spring-boot-sample-active-directory-resource-server* is `custom-client-id`.  \n-After adding as shown below:\n-\n-   ![API Permissions](resource/resource-server-obo-add-scope.png)\n-\n-### Add API permissions\n-The current Web API will access Graph API and Custom API. \n-\n-Sign in to the [Azure portal][azure-portal]. If you have access to multiple tenants, use the **Directory + subscription** filter  in the top menu to select the tenant containing your client app's registration.\n-\n-#### Add Graph API Permission\n-1. Select **Azure Active Directory** > **App registrations**, and then select your current sample application (not your web API).", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NTg1MA=="}, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1Njg0NjAxOnYy", "diffSide": "RIGHT", "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMzozNToxNVrOIMGPLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwNToxMzoyOVrOIMHHQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NjAxMw==", "bodyText": "Maybe we could remove the Sample here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549556013", "createdAt": "2020-12-29T03:35:15Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "diffHunk": "@@ -48,68 +55,44 @@ We need to ensure that this [environment checklist][ready-to-run-checklist] is c\n </dependencies>\n ```\n \n-### Register your Web API\n-You can follow *azure-spring-boot-sample-active-directory-resource-server* sample to add `ResourceAccessGraph.read`, `ResourceAccessGraphCustomResources.read` scopes. \n-Convention current application id url is `api://sample-client-id`, ; the application id url of the sample *azure-spring-boot-sample-active-directory-resource-server* is `custom-client-id`.  \n-After adding as shown below:\n-\n-   ![API Permissions](resource/resource-server-obo-add-scope.png)\n-\n-### Add API permissions\n-The current Web API will access Graph API and Custom API. \n-\n-Sign in to the [Azure portal][azure-portal]. If you have access to multiple tenants, use the **Directory + subscription** filter  in the top menu to select the tenant containing your client app's registration.\n-\n-#### Add Graph API Permission\n-1. Select **Azure Active Directory** > **App registrations**, and then select your current sample application (not your web API).\n-\n-2. Select **API permissions** > **Add a permission** > **Microsoft APIs** > **Microsoft Graph** > **Delegated permissions**, select **User.Read**, select **Add permission** to complete the process.\n+### Configure your middle-tier Web API A\n+1. You can follow *Web API A* sample to add `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes. Convention current application id url is `api://xxxxx-xxxx-xxxxxx`.(**NOTE**: In the **Web API A** `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes should be added to the **Web APP**.)![API Permissions](docs/image-resource-server-obo-add-scope.png)\n+2. Select **API permissions** > **Add a permission** > **My APIs**, select *Web API B* application name. ![Select MyAPIs](docs/image-select-myapis.png)\n+3. **Delegated permissions** is selected by default\uff0c Select **File** > **File.Read** permission, select **Add permission** to complete the process.![Add Permissions](docs/image-add-permissions.png)\n+4. Add **Web API B** permissions to **Web API A** and grant admin consent.![API Permissions](docs/image-add-grant-admin-consent.png)\n \n-#### Add Custom API Permission\n-\n-1. Select **Azure Active Directory** > **App registrations**, and then select your current sample application (not your web API).\n-\n-2. Select **API permissions** > **Add a permission** > **My APIs**, select *azure-spring-boot-sample-active-directory-resource-server* application name.\n-\n-3. **Delegated permissions** is selected by default\uff0c Select **File** > **File.Read** permission, select **Add permission** to complete the process.\n-\n-### Grant consent for your tenant\n-Respectively grant admin consent to the Graph and Custom permissions. After adding as shown below:\n-   ![API Permissions](resource/resource-server-obo-add-permissions.png)\n+See [OAuth 2.0 On-Behalf-Of flow] for more information about OBO.\n \n ## Examples\n-\n-### Configure application.yaml\n-\n+### Configure application.yml\n ```yaml\n azure:\n   activedirectory:\n     resource-server:\n       obo:\n         enabled: true\n-    client-id: [resource-server-application-client-id]\n-    client-secret: [resource-server-application-client-secret]\n-    tenant-id: [tenant-id-registered-by-application]\n-    app-id-uri: api://sample-client-id\n+    client-id: <Web-API-A-client-id>\n+    client-secret: <Web-API-A-client-secret>\n+    tenant-id: <tenant-id-registered-by-application>\n+    app-id-uri: <Web-API-A-app-id-url>\n     authorization:\n       graph:\n         scopes:\n           - https://graph.microsoft.com/User.Read\n       custom:\n         scopes:\n-          - api://custom-client-id/File.read\n+          - <Web-API-B-app-id-url>/File.Read\n ```\n \n-### Run with Maven \n-\n+### Run with Maven\n ```shell\n cd azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo\n mvn spring-boot:run\n ```\n \n-### Access the Web API\n-First, you need to obtain an access token to access Sample API.\n-- API will Only call Graph resource. \n+### Access the Web API A\n+First, you need to obtain an access token to access Sample Web API A.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 128}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU3MDM2OA==", "bodyText": "You are right.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549570368", "createdAt": "2020-12-29T05:13:29Z", "author": {"login": "ZhuXiaoBing-cn"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/README.md", "diffHunk": "@@ -48,68 +55,44 @@ We need to ensure that this [environment checklist][ready-to-run-checklist] is c\n </dependencies>\n ```\n \n-### Register your Web API\n-You can follow *azure-spring-boot-sample-active-directory-resource-server* sample to add `ResourceAccessGraph.read`, `ResourceAccessGraphCustomResources.read` scopes. \n-Convention current application id url is `api://sample-client-id`, ; the application id url of the sample *azure-spring-boot-sample-active-directory-resource-server* is `custom-client-id`.  \n-After adding as shown below:\n-\n-   ![API Permissions](resource/resource-server-obo-add-scope.png)\n-\n-### Add API permissions\n-The current Web API will access Graph API and Custom API. \n-\n-Sign in to the [Azure portal][azure-portal]. If you have access to multiple tenants, use the **Directory + subscription** filter  in the top menu to select the tenant containing your client app's registration.\n-\n-#### Add Graph API Permission\n-1. Select **Azure Active Directory** > **App registrations**, and then select your current sample application (not your web API).\n-\n-2. Select **API permissions** > **Add a permission** > **Microsoft APIs** > **Microsoft Graph** > **Delegated permissions**, select **User.Read**, select **Add permission** to complete the process.\n+### Configure your middle-tier Web API A\n+1. You can follow *Web API A* sample to add `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes. Convention current application id url is `api://xxxxx-xxxx-xxxxxx`.(**NOTE**: In the **Web API A** `ResourceAccessGraph.Read`, `ResourceAccessGraphCustomResources.Read` scopes should be added to the **Web APP**.)![API Permissions](docs/image-resource-server-obo-add-scope.png)\n+2. Select **API permissions** > **Add a permission** > **My APIs**, select *Web API B* application name. ![Select MyAPIs](docs/image-select-myapis.png)\n+3. **Delegated permissions** is selected by default\uff0c Select **File** > **File.Read** permission, select **Add permission** to complete the process.![Add Permissions](docs/image-add-permissions.png)\n+4. Add **Web API B** permissions to **Web API A** and grant admin consent.![API Permissions](docs/image-add-grant-admin-consent.png)\n \n-#### Add Custom API Permission\n-\n-1. Select **Azure Active Directory** > **App registrations**, and then select your current sample application (not your web API).\n-\n-2. Select **API permissions** > **Add a permission** > **My APIs**, select *azure-spring-boot-sample-active-directory-resource-server* application name.\n-\n-3. **Delegated permissions** is selected by default\uff0c Select **File** > **File.Read** permission, select **Add permission** to complete the process.\n-\n-### Grant consent for your tenant\n-Respectively grant admin consent to the Graph and Custom permissions. After adding as shown below:\n-   ![API Permissions](resource/resource-server-obo-add-permissions.png)\n+See [OAuth 2.0 On-Behalf-Of flow] for more information about OBO.\n \n ## Examples\n-\n-### Configure application.yaml\n-\n+### Configure application.yml\n ```yaml\n azure:\n   activedirectory:\n     resource-server:\n       obo:\n         enabled: true\n-    client-id: [resource-server-application-client-id]\n-    client-secret: [resource-server-application-client-secret]\n-    tenant-id: [tenant-id-registered-by-application]\n-    app-id-uri: api://sample-client-id\n+    client-id: <Web-API-A-client-id>\n+    client-secret: <Web-API-A-client-secret>\n+    tenant-id: <tenant-id-registered-by-application>\n+    app-id-uri: <Web-API-A-app-id-url>\n     authorization:\n       graph:\n         scopes:\n           - https://graph.microsoft.com/User.Read\n       custom:\n         scopes:\n-          - api://custom-client-id/File.read\n+          - <Web-API-B-app-id-url>/File.Read\n ```\n \n-### Run with Maven \n-\n+### Run with Maven\n ```shell\n cd azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo\n mvn spring-boot:run\n ```\n \n-### Access the Web API\n-First, you need to obtain an access token to access Sample API.\n-- API will Only call Graph resource. \n+### Access the Web API A\n+First, you need to obtain an access token to access Sample Web API A.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NjAxMw=="}, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 128}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1Njg1MTAzOnYy", "diffSide": "RIGHT", "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/src/main/java/com/azure/spring/sample/aad/controller/SampleController.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwMzozOToxOFrOIMGRqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwODo1MTozNFrOIMKQMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NjY1MA==", "bodyText": "Can we change this scope to Graph.Read?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549556650", "createdAt": "2020-12-29T03:39:18Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/src/main/java/com/azure/spring/sample/aad/controller/SampleController.java", "diffHunk": "@@ -41,7 +41,7 @@\n      * @return Response with graph data\n      */\n     @GetMapping(\"call-graph-only\")\n-    @PreAuthorize(\"hasAuthority('SCOPE_ResourceAccessGraph.read')\")\n+    @PreAuthorize(\"hasAuthority('SCOPE_ResourceAccessGraph.Read')\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NzE5NQ==", "bodyText": "Oh, I think we could call these scopes Obo.Graph.Read and Obo.File.Read?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549557195", "createdAt": "2020-12-29T03:43:37Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/src/main/java/com/azure/spring/sample/aad/controller/SampleController.java", "diffHunk": "@@ -41,7 +41,7 @@\n      * @return Response with graph data\n      */\n     @GetMapping(\"call-graph-only\")\n-    @PreAuthorize(\"hasAuthority('SCOPE_ResourceAccessGraph.read')\")\n+    @PreAuthorize(\"hasAuthority('SCOPE_ResourceAccessGraph.Read')\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NjY1MA=="}, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYyMTgxMA==", "bodyText": "Here I chose Obo.Graph.Read in the end.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18372#discussion_r549621810", "createdAt": "2020-12-29T08:51:34Z", "author": {"login": "ZhuXiaoBing-cn"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-active-directory-resource-server-obo/src/main/java/com/azure/spring/sample/aad/controller/SampleController.java", "diffHunk": "@@ -41,7 +41,7 @@\n      * @return Response with graph data\n      */\n     @GetMapping(\"call-graph-only\")\n-    @PreAuthorize(\"hasAuthority('SCOPE_ResourceAccessGraph.read')\")\n+    @PreAuthorize(\"hasAuthority('SCOPE_ResourceAccessGraph.Read')\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU1NjY1MA=="}, "originalCommit": {"oid": "9ba6c076633d22c26d981eac86e06a44399a9317"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1744, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}