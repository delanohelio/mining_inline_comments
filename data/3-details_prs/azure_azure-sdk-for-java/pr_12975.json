{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3MDM2Nzcy", "number": 12975, "title": "Updates prefetch algorithm and test updates.", "bodyText": "Updates prefetch algorithm to match .NET. Try to keep the queue full when 1/3 of the prefetch queue is gone.\nRemoves reference to parentConnection\nFixing tests for receiving messages from multiple sessions.\n\nFixes #12655", "createdAt": "2020-07-09T18:55:58Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12975", "merged": true, "mergeCommit": {"oid": "eadf80dbd89dd17a95e749e3b7622b0091da739c"}, "closed": true, "closedAt": "2020-07-10T07:56:23Z", "author": {"login": "conniey"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczTyJBgH2gAyNDQ3MDM2NzcyOmE1YjhlYjVhODI1Mzc0MDlkMTdiNmZlZjllNDgzZDgzY2U3ZjdmNjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczdw80AH2gAyNDQ3MDM2NzcyOjBhMzk0YWRhNTljZThmYzBlODI5NjY2ODM4YmQzNmQ0NTk3NWFmODg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a5b8eb5a82537409d17b6fef9e483d83ce7f7f68", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a5b8eb5a82537409d17b6fef9e483d83ce7f7f68", "committedDate": "2020-07-09T18:59:11Z", "message": "Remove parentConnection from linkProcessor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a4e3293fb48e72c998433c1c10fdd5c5e0cc7b9", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5a4e3293fb48e72c998433c1c10fdd5c5e0cc7b9", "committedDate": "2020-07-09T18:59:16Z", "message": "Split terminal signal in processor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f90312c933ffb4e0e9b5f41f956a4bd2e52dbc72", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f90312c933ffb4e0e9b5f41f956a4bd2e52dbc72", "committedDate": "2020-07-09T18:59:46Z", "message": "Fix build break from removing parentConnection."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88c0bbbc56f01d23e0961894f02ccaf64ab23d98", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/88c0bbbc56f01d23e0961894f02ccaf64ab23d98", "committedDate": "2020-07-09T18:59:51Z", "message": "Remove parentConnection from link processor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a25aa19ea3ed86e32571ca5423da753edec6b279", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a25aa19ea3ed86e32571ca5423da753edec6b279", "committedDate": "2020-07-09T18:59:51Z", "message": "Fixing test for receiving from multiple sessions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4089d5768f7d18722f2631a699c0c1de368d829a", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4089d5768f7d18722f2631a699c0c1de368d829a", "committedDate": "2020-07-09T18:59:51Z", "message": "Add comment for lock tokens on received messages."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25bf621d5667a5da3d1b301d77e240f182a17879", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/25bf621d5667a5da3d1b301d77e240f182a17879", "committedDate": "2020-07-09T18:59:52Z", "message": "Using prefetch buffer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27da3737882ed3a0917e535d5e509de598e7398f", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/27da3737882ed3a0917e535d5e509de598e7398f", "committedDate": "2020-07-09T18:38:42Z", "message": "Using prefetch buffer."}, "afterCommit": {"oid": "25bf621d5667a5da3d1b301d77e240f182a17879", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/25bf621d5667a5da3d1b301d77e240f182a17879", "committedDate": "2020-07-09T18:59:52Z", "message": "Using prefetch buffer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0d0370684b17d93348ed2e1ddbb71464ee1af05", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b0d0370684b17d93348ed2e1ddbb71464ee1af05", "committedDate": "2020-07-09T19:07:14Z", "message": "Add logic for emptyCreditListener when empty."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1OTAyODE5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12975#pullrequestreview-445902819", "createdAt": "2020-07-09T19:22:00Z", "commit": {"oid": "b0d0370684b17d93348ed2e1ddbb71464ee1af05"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxOToyMjowMFrOGveplw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxOToyMjowMFrOGveplw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQzODQyMw==", "bodyText": "This could be excessive in logs, should this be debug message ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12975#discussion_r452438423", "createdAt": "2020-07-09T19:22:00Z", "author": {"login": "hemanttanwar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/UnnamedSessionReceiver.java", "diffHunk": "@@ -101,9 +105,12 @@\n                     return;\n                 }\n \n-                final String token = CoreUtils.isNullOrEmpty(context.getMessage().getLockToken())\n-                    ? context.getMessage().getLockToken()\n+                final ServiceBusReceivedMessage message = context.getMessage();\n+                final String token = !CoreUtils.isNullOrEmpty(message.getLockToken())\n+                    ? message.getLockToken()\n                     : \"\";\n+\n+                logger.info(\"Received sessionId[{}] messageId[{}]\", context.getSessionId(), message.getMessageId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0d0370684b17d93348ed2e1ddbb71464ee1af05"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bc860b0c9edd33bb792d090acd0c3034ae2d238", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2bc860b0c9edd33bb792d090acd0c3034ae2d238", "committedDate": "2020-07-09T20:57:47Z", "message": "Fixing test breaks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "664788df59fee3f511488bc35bb1ad01f5858f97", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/664788df59fee3f511488bc35bb1ad01f5858f97", "committedDate": "2020-07-09T21:00:18Z", "message": "Fix checkstyles."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18e8ebfc4f535645e639af3f035e3fb3b36565fb", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/18e8ebfc4f535645e639af3f035e3fb3b36565fb", "committedDate": "2020-07-09T22:09:57Z", "message": "Pass prefetch into parameter when publishing."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a394ada59ce8fc0e829666838bd36d45975af88", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0a394ada59ce8fc0e829666838bd36d45975af88", "committedDate": "2020-07-10T06:36:56Z", "message": "Consider ReceiveMode when using prefetch so we continue to fetch."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2646, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}