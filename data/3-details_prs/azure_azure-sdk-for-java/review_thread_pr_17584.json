{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwOTExMTEx", "number": 17584, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMzowMzo0M1rOE6zbDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMzowMzo0M1rOE6zbDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwMDk1Mzc0OnYy", "diffSide": "RIGHT", "path": "eng/pipelines/templates/jobs/archetype-sdk-tests.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMzowMzo0M1rOH2F4sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOFQyMzo1ODowN1rOH2HIJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ4MTU4Nw==", "bodyText": "Was this broken before?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17584#discussion_r526481587", "createdAt": "2020-11-18T23:03:43Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-tests.yml", "diffHunk": "@@ -103,16 +109,36 @@ jobs:\n         parameters:\n           Artifacts: ${{parameters.Artifacts}}\n           AdditionalModules: ${{parameters.AdditionalModules}}\n+      \n+      - task: UsePythonVersion@0\n+        displayName: 'Use Python 3.6'\n+        inputs:\n+          versionSpec: '3.6'\n+        condition: and(succeeded(), eq(variables['TestFromSource'],'true'))\n+\n+      - task: PythonScript@0\n+        displayName: 'Set versions for source build'\n+        inputs:\n+          scriptPath: 'eng/versioning/set_versions.py'\n+          arguments: '--build-type client --pst'\n+        condition: and(succeeded(), eq(variables['TestFromSource'],'true'))\n+\n+      - task: PythonScript@0\n+        displayName: 'Update versions for source build'\n+        inputs:\n+          scriptPath: 'eng/versioning/update_versions.py'\n+          arguments: '--update-type library --build-type client --sr'\n+        condition: and(succeeded(), eq(variables['ShouldRunSourceTests'],'true'))\n \n       - task: Maven@3\n-        displayName: 'Build and Install, JDK Version: $(JavaBuildVersion)'\n+        displayName: 'Build and Install, JDK Version: $(JavaTestVersion)'\n         inputs:\n           mavenPomFile: pom.xml\n           goals: 'install'\n-          options: '$(DefaultOptions) -DskipTests -Dgpg.skip -Dmaven.javadoc.skip=true -Dcheckstyle.skip=true -Dspotbugs.skip=true -Drevapi.skip=true -pl $(ProjectList) -am'\n+          options: '$(DefaultOptions) -T 1C -DskipTests -Dgpg.skip -Dmaven.javadoc.skip=true -Dcheckstyle.skip=true -Dspotbugs.skip=true -Drevapi.skip=true -pl $(ProjectList) -am'\n           mavenOptions: '$(MemoryOptions) $(LoggingOptions)'\n           javaHomeOption: 'JDKVersion'\n-          jdkVersionOption: $(JavaBuildVersion)\n+          jdkVersionOption: $(JavaTestVersion)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7ce1f1f751488925e1b1fe7a2f9981acfad2f00"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjUwMTkyNw==", "bodyText": "We were always building with Java 11 which resulted in the Java 8 runs needing to compile twice as the compiler version changed. Unfortunately, I'm not explicitly certain on why this was done.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17584#discussion_r526501927", "createdAt": "2020-11-18T23:58:07Z", "author": {"login": "alzimmermsft"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-tests.yml", "diffHunk": "@@ -103,16 +109,36 @@ jobs:\n         parameters:\n           Artifacts: ${{parameters.Artifacts}}\n           AdditionalModules: ${{parameters.AdditionalModules}}\n+      \n+      - task: UsePythonVersion@0\n+        displayName: 'Use Python 3.6'\n+        inputs:\n+          versionSpec: '3.6'\n+        condition: and(succeeded(), eq(variables['TestFromSource'],'true'))\n+\n+      - task: PythonScript@0\n+        displayName: 'Set versions for source build'\n+        inputs:\n+          scriptPath: 'eng/versioning/set_versions.py'\n+          arguments: '--build-type client --pst'\n+        condition: and(succeeded(), eq(variables['TestFromSource'],'true'))\n+\n+      - task: PythonScript@0\n+        displayName: 'Update versions for source build'\n+        inputs:\n+          scriptPath: 'eng/versioning/update_versions.py'\n+          arguments: '--update-type library --build-type client --sr'\n+        condition: and(succeeded(), eq(variables['ShouldRunSourceTests'],'true'))\n \n       - task: Maven@3\n-        displayName: 'Build and Install, JDK Version: $(JavaBuildVersion)'\n+        displayName: 'Build and Install, JDK Version: $(JavaTestVersion)'\n         inputs:\n           mavenPomFile: pom.xml\n           goals: 'install'\n-          options: '$(DefaultOptions) -DskipTests -Dgpg.skip -Dmaven.javadoc.skip=true -Dcheckstyle.skip=true -Dspotbugs.skip=true -Drevapi.skip=true -pl $(ProjectList) -am'\n+          options: '$(DefaultOptions) -T 1C -DskipTests -Dgpg.skip -Dmaven.javadoc.skip=true -Dcheckstyle.skip=true -Dspotbugs.skip=true -Drevapi.skip=true -pl $(ProjectList) -am'\n           mavenOptions: '$(MemoryOptions) $(LoggingOptions)'\n           javaHomeOption: 'JDKVersion'\n-          jdkVersionOption: $(JavaBuildVersion)\n+          jdkVersionOption: $(JavaTestVersion)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ4MTU4Nw=="}, "originalCommit": {"oid": "c7ce1f1f751488925e1b1fe7a2f9981acfad2f00"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2856, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}