{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0Mzg0ODgw", "number": 8762, "title": "Add Azure Cli credentials to Identity", "bodyText": "", "createdAt": "2020-03-05T16:44:26Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8762", "merged": true, "mergeCommit": {"oid": "fffeab63674c6fcf54bb4fee9a01f438587c6f6b"}, "closed": true, "closedAt": "2020-03-10T16:03:39Z", "author": {"login": "g2vinay"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJyCLbAH2gAyMzg0Mzg0ODgwOjdhZjg4MjRkNDg4ZTdjZWFlYmI3ZDhlZWU0ODJjYWFkZjE2M2Q5ZGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMUXK7gH2gAyMzg0Mzg0ODgwOjhjYTdiYjEwOWFkNzA3ZWExMDUyOWQwYTc4ZTI5MzVmOGEyMmI2MzM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7af8824d488e7ceaebb7d8eee482caadf163d9df", "author": {"user": {"login": "FredGao-new", "name": "Fred Gao (MSFT)"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7af8824d488e7ceaebb7d8eee482caadf163d9df", "committedDate": "2020-03-02T18:29:02Z", "message": "Add CliCredential (#6842)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5f0b7474782ae4b7eab50302a4d90e6e97a8ebb", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b5f0b7474782ae4b7eab50302a4d90e6e97a8ebb", "committedDate": "2020-03-05T06:32:18Z", "message": "add safe working directory + checkstyle and spotbugs fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0abd6c93e242ff4fb30951da0a7453b34eea3c99", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0abd6c93e242ff4fb30951da0a7453b34eea3c99", "committedDate": "2020-03-05T16:24:00Z", "message": "redact cli token in error output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b3d1385e71e31dfc0caca1eb0b929ca3788e35f", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6b3d1385e71e31dfc0caca1eb0b929ca3788e35f", "committedDate": "2020-03-05T16:40:14Z", "message": "Merge remote-tracking branch 'upstream/master' into cli_credentials"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99fe46bcde837dd3dd3dfd2aa90ab8f6c4bca650", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/99fe46bcde837dd3dd3dfd2aa90ab8f6c4bca650", "committedDate": "2020-03-05T16:49:30Z", "message": "update identity client"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5Nzg3MDA5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8762#pullrequestreview-369787009", "createdAt": "2020-03-05T17:54:09Z", "commit": {"oid": "99fe46bcde837dd3dd3dfd2aa90ab8f6c4bca650"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDEzMDIw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8762#pullrequestreview-370013020", "createdAt": "2020-03-06T00:46:56Z", "commit": {"oid": "99fe46bcde837dd3dd3dfd2aa90ab8f6c4bca650"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNjA4OTc3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8762#pullrequestreview-370608977", "createdAt": "2020-03-06T20:33:48Z", "commit": {"oid": "99fe46bcde837dd3dd3dfd2aa90ab8f6c4bca650"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4599f5dee06ba61509f5e95e9a6c27bfdd6736d4", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4599f5dee06ba61509f5e95e9a6c27bfdd6736d4", "committedDate": "2020-03-09T05:16:49Z", "message": "update credential"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b357a43b6996e61bef0be9383d2bbfb724faa476", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b357a43b6996e61bef0be9383d2bbfb724faa476", "committedDate": "2020-03-09T21:24:49Z", "message": "add safe working dir logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f5c2fea9179475fc035d1ef120a553a1cf2b7c8", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5f5c2fea9179475fc035d1ef120a553a1cf2b7c8", "committedDate": "2020-03-09T22:23:20Z", "message": "Merge remote-tracking branch 'upstream/master' into cli_credentials"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNTcyNTg5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8762#pullrequestreview-371572589", "createdAt": "2020-03-09T22:32:25Z", "commit": {"oid": "5f5c2fea9179475fc035d1ef120a553a1cf2b7c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMjozMjoyNVrOFz7kxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQyMjozMjoyNVrOFz7kxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTk5Nzc2Nw==", "bodyText": "Here we need to validate the scope passed in doesn't contain any characters which could cause us to execute something unintended. See https://github.com/Azure/azure-sdk-for-net/blob/23cc9455cf501d6a65ce8faaedb27242b27c3b51/sdk/identity/Azure.Identity/src/ScopeUtilities.cs#L46-L54", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8762#discussion_r389997767", "createdAt": "2020-03-09T22:32:25Z", "author": {"login": "schaabs"}, "path": "sdk/identity/azure-identity/src/main/java/com/azure/identity/implementation/IdentityClient.java", "diffHunk": "@@ -122,6 +140,97 @@\n         }\n     }\n \n+    /**\n+     * Asynchronously acquire a token from Active Directory with Azure CLI.\n+     *\n+     * @param request the details of the token request\n+     * @return a Publisher that emits an AccessToken\n+     */\n+    public Mono<AccessToken> authenticateWithAzureCli(TokenRequestContext request) {\n+        String azCommand = \"az account get-access-token --output json --resource \";\n+\n+        StringBuilder command = new StringBuilder();\n+        command.append(azCommand);\n+        String scopes = ScopeUtil.scopesToResource(request.getScopes());\n+        command.append(scopes);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f5c2fea9179475fc035d1ef120a553a1cf2b7c8"}, "originalPosition": 72}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c97468642cf93c200e4800a440a4db77388dc4f1", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c97468642cf93c200e4800a440a4db77388dc4f1", "committedDate": "2020-03-10T00:16:40Z", "message": "add scope validation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNjIxODU1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8762#pullrequestreview-371621855", "createdAt": "2020-03-10T01:04:56Z", "commit": {"oid": "c97468642cf93c200e4800a440a4db77388dc4f1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "570701c552ac2933a0527a7f7001116ac49856f3", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/570701c552ac2933a0527a7f7001116ac49856f3", "committedDate": "2020-03-10T15:17:30Z", "message": "Merge remote-tracking branch 'upstream/master' into cli_credentials"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98cc23a85eca23e90614787a9d1b724032b5a281", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/98cc23a85eca23e90614787a9d1b724032b5a281", "committedDate": "2020-03-10T15:25:45Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ca7bb109ad707ea10529d0a78e2935f8a22b633", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8ca7bb109ad707ea10529d0a78e2935f8a22b633", "committedDate": "2020-03-10T15:36:35Z", "message": "update logic"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 896, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}