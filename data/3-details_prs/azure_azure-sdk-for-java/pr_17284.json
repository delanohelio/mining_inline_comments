{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3MDU4OTE2", "number": 17284, "title": "Applied arch board feedback for Key Vault Administration", "bodyText": "Changes:\n\nRemoving exposure of implementation (internal) package types.\nRenaming KeyVaultRoleAssignmentScope to KeyVaultRoleScope to be in line with other languages.\nRenaming the name to parameter to roleAssignmentName in  role assignment-related APIs, as well as its type from UUID to String.\nRenaming APIs for re-hydrating LRO types from getBackupOperation and getRestoreOperation to be overloads of the original operations beginBackup, beginRestore and beginSelectiveRestore that take a jobId. NOTE: I'm still not sure this is the right way to go since we have a similar operation in Key Vault Certificates that is named getCertificateOperation that has already been GA'd. Removed for the time being.\nAdding ServiceVersion support in the clients and their builders. Internally this will not be used until some changes in the code generation tool are applied.\nAnnotating read-only classes with @Immutable.\nAdding the \"allowed\" prefix to some KeyVaultPermission properties. NOTE: .NET uses \"allow\" and \"deny\" and Java uses \"allowed\" and \"denied\", not sure which one is better.\nChanging the type of startTime and endTime in KeyVaultLongRunningOperation from Long to OffsetDateTime.\nChanging the KeyVaultRoleScope enum from using URI to URL and adding an overload that accepts a String representation of a URL too.\nRemoving the use of KeyVaultRoleAssignmentProperties in clients' public APIs in favor of using the roleDefinitionId and servicePrincipalId String values directly.", "createdAt": "2020-11-07T02:25:48Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17284", "merged": true, "mergeCommit": {"oid": "0dc762a74cbc8435d9847be9b772cfc7997920a8"}, "closed": true, "closedAt": "2020-11-11T23:14:42Z", "author": {"login": "vcolin7"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZ_swlgH2gAyNTE3MDU4OTE2Ojg3YjA5ZTZmNThlN2NlYTk3ZjU2NmM2NTQwNmY1ZWRjN2MwMzc3NDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbkqrFgFqTUyODU0MDM3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "87b09e6f58e7cea97f566c65406f5edc7c037748", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/87b09e6f58e7cea97f566c65406f5edc7c037748", "committedDate": "2020-11-06T23:38:15Z", "message": "Removed exposure of implementation package and any usage of KeyVaultErrorException from public APIs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46089c81a924795e6ecfae0c426048f4185d7922", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/46089c81a924795e6ecfae0c426048f4185d7922", "committedDate": "2020-11-06T23:52:54Z", "message": "Renamed KeyVaultRoleAssignmentScope to KeyVaultRoleScope. Changed the name type from UUID to String in role assignment APIs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bb49f9fe930e1693b31b934950990c3b9d90837", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2bb49f9fe930e1693b31b934950990c3b9d90837", "committedDate": "2020-11-06T23:59:05Z", "message": "Renamed APIs for re-hydrating LROs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11ee6872725eb4d52999a4aa177aeb97db44b6f6", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/11ee6872725eb4d52999a4aa177aeb97db44b6f6", "committedDate": "2020-11-07T00:53:06Z", "message": "Added ServiceVersion support in the clients and their builders. Internally this will not be used until some changes in the code generation tool are applied."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66ab2cb6545b8288736f46362dec662fca877047", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/66ab2cb6545b8288736f46362dec662fca877047", "committedDate": "2020-11-07T00:55:09Z", "message": "Annotated read-only classes with @Immutable. Added the \"allowed\" prefix to some KeyVaultPermission properties. Change the type of `startTime` and `endTime` in KeyVaultLongRunningOperation from Long to OffsetDateTime."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cb2d97806db2ffde29209b89800219439d4d8a3", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9cb2d97806db2ffde29209b89800219439d4d8a3", "committedDate": "2020-11-07T01:13:23Z", "message": "Changed the KeyVaultRoleScope enum from using URI to URL and added an overload that takes a the string representation of a URL."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c36fc1793c45ae788361a0291e40baf10e882758", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c36fc1793c45ae788361a0291e40baf10e882758", "committedDate": "2020-11-07T01:20:37Z", "message": "Added overloads that allow passing a custom polling interval to LROs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dae4b876a3f71ea0c515470707cf52d101a7677", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4dae4b876a3f71ea0c515470707cf52d101a7677", "committedDate": "2020-11-07T02:14:25Z", "message": "Removed the use of KeyVaultRoleAssignmentProperties in clients' public APIs in favor of using the `roleDefinitionId` and `servicePrincipalId` values directly."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "103b3667fea5e83390eec18e23e23e8db11123d9", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/103b3667fea5e83390eec18e23e23e8db11123d9", "committedDate": "2020-11-07T03:18:13Z", "message": "Fixed Javadoc and test issues."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d1bba8f99d499c4582c56b86e785c6abe2ad53f", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2d1bba8f99d499c4582c56b86e785c6abe2ad53f", "committedDate": "2020-11-07T04:16:11Z", "message": "Fixed checkstyle issues."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NjQ2OTQw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17284#pullrequestreview-526646940", "createdAt": "2020-11-09T20:55:53Z", "commit": {"oid": "2d1bba8f99d499c4582c56b86e785c6abe2ad53f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDo1NTo1M1rOHwBRKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDo1NTo1M1rOHwBRKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDExNDQ3Mw==", "bodyText": "Curious - why did we remove the context that the name would be a UUID?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17284#discussion_r520114473", "createdAt": "2020-11-09T20:55:53Z", "author": {"login": "christothes"}, "path": "sdk/keyvault/azure-security-keyvault-administration/src/main/java/com/azure/security/keyvault/administration/KeyVaultAccessControlAsyncClient.java", "diffHunk": "@@ -273,165 +279,162 @@ public String getVaultUrl() {\n     }\n \n     /**\n-     * Creates a {@link KeyVaultRoleAssignment} with a randomly generated {@link UUID name}.\n+     * Creates a {@link KeyVaultRoleAssignment} with a randomly generated name.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d1bba8f99d499c4582c56b86e785c6abe2ad53f"}, "originalPosition": 203}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2Njg1NTU1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17284#pullrequestreview-526685555", "createdAt": "2020-11-09T21:54:28Z", "commit": {"oid": "2d1bba8f99d499c4582c56b86e785c6abe2ad53f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMTo1NDoyOFrOHwDH0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMTo1NDoyOFrOHwDH0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE0NDg0OQ==", "bodyText": "should this be a UUID? I believe the service call will fail if it isn't a valid UUID string value.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17284#discussion_r520144849", "createdAt": "2020-11-09T21:54:28Z", "author": {"login": "christothes"}, "path": "sdk/keyvault/azure-security-keyvault-administration/src/main/java/com/azure/security/keyvault/administration/KeyVaultAccessControlAsyncClient.java", "diffHunk": "@@ -273,165 +279,162 @@ public String getVaultUrl() {\n     }\n \n     /**\n-     * Creates a {@link KeyVaultRoleAssignment} with a randomly generated {@link UUID name}.\n+     * Creates a {@link KeyVaultRoleAssignment} with a randomly generated name.\n      *\n-     * @param roleScope The {@link KeyVaultRoleAssignmentScope roleScope} of the {@link KeyVaultRoleAssignment} to\n+     * @param roleScope The {@link KeyVaultRoleScope roleScope} of the {@link KeyVaultRoleAssignment} to\n      * create.\n-     * @param properties Properties for the {@link KeyVaultRoleAssignment}.\n+     * @param roleDefinitionId The {@link KeyVaultRoleDefinition role definition} ID for the role assignment.\n+     * @param principalId The principal ID assigned to the role. This maps to the ID inside the Active Directory.\n      * @return A {@link Mono} containing the created {@link KeyVaultRoleAssignment}.\n-     * @throws NullPointerException if the {@link KeyVaultRoleAssignmentScope roleScope} or\n-     * {@link KeyVaultRoleAssignmentProperties properties} are {@code null}.\n+     * @throws NullPointerException if the {@link KeyVaultRoleScope roleScope}, {@link String roleAssignmentName},\n+     * {@link String roleDefinitionId} or {@link String principalId} are {@code null}.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public Mono<KeyVaultRoleAssignment> createRoleAssignment(KeyVaultRoleAssignmentScope roleScope, KeyVaultRoleAssignmentProperties properties) {\n-        return createRoleAssignment(roleScope, UUID.randomUUID(), properties);\n+    public Mono<KeyVaultRoleAssignment> createRoleAssignment(KeyVaultRoleScope roleScope, String roleDefinitionId, String principalId) {\n+        return createRoleAssignment(roleScope, UUID.randomUUID().toString(), roleDefinitionId, principalId);\n     }\n \n     /**\n      * Creates a {@link KeyVaultRoleAssignment}.\n      *\n-     * @param roleScope The {@link KeyVaultRoleAssignmentScope roleScope} of the {@link KeyVaultRoleAssignment} to\n+     * @param roleScope The {@link KeyVaultRoleScope roleScope} of the {@link KeyVaultRoleAssignment} to\n      * create.\n-     * @param name The name used to create the {@link KeyVaultRoleAssignment}. It can be any valid UUID.\n-     * @param properties Properties for the {@link KeyVaultRoleAssignment}.\n+     * @param roleAssignmentName The roleAssignmentName used to create the {@link KeyVaultRoleAssignment}. It can be any", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d1bba8f99d499c4582c56b86e785c6abe2ad53f"}, "originalPosition": 232}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NzIyOTE1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17284#pullrequestreview-526722915", "createdAt": "2020-11-09T22:59:08Z", "commit": {"oid": "2d1bba8f99d499c4582c56b86e785c6abe2ad53f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMjo1OTowOFrOHwE-aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMjo1OTowOFrOHwE-aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE3NTIxMQ==", "bodyText": "Are these valid version strings? I believe the service doesn't currently enforce any, but will that always be true?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17284#discussion_r520175211", "createdAt": "2020-11-09T22:59:08Z", "author": {"login": "christothes"}, "path": "sdk/keyvault/azure-security-keyvault-administration/src/main/java/com/azure/security/keyvault/administration/KeyVaultAdministrationServiceVersion.java", "diffHunk": "@@ -0,0 +1,35 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.security.keyvault.administration;\n+\n+import com.azure.core.util.ServiceVersion;\n+\n+/**\n+ * The versions of Azure Key Vault Administration service supported by this client library.\n+ */\n+public enum KeyVaultAdministrationServiceVersion implements ServiceVersion {\n+    V7_0(\"7.0\"),\n+    V7_1(\"7.1\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d1bba8f99d499c4582c56b86e785c6abe2ad53f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NzI3OTk2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17284#pullrequestreview-526727996", "createdAt": "2020-11-09T23:09:39Z", "commit": {"oid": "2d1bba8f99d499c4582c56b86e785c6abe2ad53f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMzowOTozOVrOHwFO0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMzowOTozOVrOHwFO0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE3OTQxMA==", "bodyText": "I'm not sure if this conflicts with being idiomatic to Java, but the .NET guidelines specify that the operation should be hydrated from a previous operation via a public constructor rather than a parameter on the begin... method.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17284#discussion_r520179410", "createdAt": "2020-11-09T23:09:39Z", "author": {"login": "christothes"}, "path": "sdk/keyvault/azure-security-keyvault-administration/src/main/java/com/azure/security/keyvault/administration/KeyVaultBackupAsyncClient.java", "diffHunk": "@@ -406,33 +450,56 @@ private static LongRunningOperationStatus toLongRunningOperationStatus(String op\n     }\n \n     /**\n-     * Gets a pending {@link KeyVaultRestoreOperation full or selective restore operation} from the Key Vault.\n+     * Gets a pending {@link KeyVaultRestoreOperation full restore operation} from the Key Vault.\n+     *\n+     * @param jobId The operation identifier.\n+     * @throws NullPointerException if the {@code jobId} is null.\n+     * @return A {@link PollerFlux} polling on the {@link KeyVaultRestoreOperation restore operation} status.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public PollerFlux<KeyVaultRestoreOperation, Void> beginRestore(String jobId) {\n+        return beginRestore(jobId, getDefaultPollingInterval());\n+    }\n+\n+    /**\n+     * Gets a pending {@link KeyVaultRestoreOperation full restore operation} from the Key Vault.\n      *\n      * @param jobId The operation identifier.\n+     * @param pollingInterval The interval at which the operation status will be polled for.\n      * @throws NullPointerException if the {@code jobId} is null.\n      * @return A {@link PollerFlux} polling on the {@link KeyVaultRestoreOperation restore operation} status.\n      */\n     @ServiceMethod(returns = ReturnType.SINGLE)\n-    public PollerFlux<KeyVaultRestoreOperation, Void> getRestoreOperation(String jobId) {\n+    public PollerFlux<KeyVaultRestoreOperation, Void> beginRestore(String jobId, Duration pollingInterval) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d1bba8f99d499c4582c56b86e785c6abe2ad53f"}, "originalPosition": 267}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3b3072f1b2e0d541fecb3cce34cb796929c104a", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c3b3072f1b2e0d541fecb3cce34cb796929c104a", "committedDate": "2020-11-11T10:12:54Z", "message": "Applied arch board meeting and PR feedback:\n\n* Renamed parameters containing the 'Uri' suffix to 'Url'.\n* Changed the type of `startTime` and `endTime` in the constructor of KeyVaultLongRunningOperation and its subtypes from `Long` to `OffsetDateTime`.\n* Removed unnecessary versions from KeyVaultAdministrationServiceVersion.\n\nAdditional changes:\n\n* Renamed `scope` in KeyVaultRoleAssignment to `roleScope` to align with the access client APIs.\n* Polished Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33b05388461012b219909402a881a27180607571", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/33b05388461012b219909402a881a27180607571", "committedDate": "2020-11-11T10:18:49Z", "message": "Removed APIs to refresh LROs based on PR feedback."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08c01ce107024bedc6806f86e08568b515a0679e", "author": {"user": {"login": "vcolin7", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/08c01ce107024bedc6806f86e08568b515a0679e", "committedDate": "2020-11-11T11:18:38Z", "message": "Removed unused import in KeyVaultBackupAsyncClientTest."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NTQwMzc4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17284#pullrequestreview-528540378", "createdAt": "2020-11-11T21:16:23Z", "commit": {"oid": "08c01ce107024bedc6806f86e08568b515a0679e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 143, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}