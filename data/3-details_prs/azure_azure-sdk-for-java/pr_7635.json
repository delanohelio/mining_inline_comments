{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MTE5MDc4", "number": 7635, "title": "Update error and exception model design for Text Analytics", "bodyText": "This PR\n\nUpdates the error model for Text Analytics SDK to map to the InnerError returned from the service.\nCombine values from InnerErrorCodeValue and ErrorCodeValue to a single ErrorCodeValue class.\nThrow exceptions for single input methods when service returns a 200 OK but with a TextAnalyticsError\nThrow an exception when a success attribute is accessed on a TextAnalyticsError object.", "createdAt": "2020-01-22T23:50:39Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635", "merged": true, "mergeCommit": {"oid": "42e3e9056dce3461bba4020ac81e4e102ff2501a"}, "closed": true, "closedAt": "2020-01-31T19:25:16Z", "author": {"login": "samvaity"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9juFBgBqjI5NzgyNzIzMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_laBUAH2gAyMzY2MTE5MDc4OmJjODA4MmZkYjhhYTI2MWRhOTU4Y2NkODU4OWI5ZDFmMmI3N2FjMGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df0026d7180d478d71fe44aa4a8dd9b1e45e29f2", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/df0026d7180d478d71fe44aa4a8dd9b1e45e29f2", "committedDate": "2020-01-24T01:51:55Z", "message": "throw exception if success property accessed"}, "afterCommit": {"oid": "1d7cd2caab18a61c781375145871c94e2cf6136a", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1d7cd2caab18a61c781375145871c94e2cf6136a", "committedDate": "2020-01-24T19:01:07Z", "message": "throw exception if success property accessed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1829a66781c8e5111ed856d89a05306a500a034", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c1829a66781c8e5111ed856d89a05306a500a034", "committedDate": "2020-01-27T19:40:12Z", "message": "update error model"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0a3f65a2c41218c4416db14a53ff14e9e8d805d", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e0a3f65a2c41218c4416db14a53ff14e9e8d805d", "committedDate": "2020-01-27T19:41:30Z", "message": "Add custom exception for single input 200 ok error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc564d21eba50d192dfe51e1745a3617f5b7ae72", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fc564d21eba50d192dfe51e1745a3617f5b7ae72", "committedDate": "2020-01-27T19:41:34Z", "message": "update error code model name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "add9eba27901ccc6dfb2fe47948c6bf12626ad36", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/add9eba27901ccc6dfb2fe47948c6bf12626ad36", "committedDate": "2020-01-27T19:41:35Z", "message": "throw exception if success property accessed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6a70ce133e037125f016ac1d645150b09467052", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b6a70ce133e037125f016ac1d645150b09467052", "committedDate": "2020-01-27T19:50:38Z", "message": "update to function"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d7cd2caab18a61c781375145871c94e2cf6136a", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1d7cd2caab18a61c781375145871c94e2cf6136a", "committedDate": "2020-01-24T19:01:07Z", "message": "throw exception if success property accessed"}, "afterCommit": {"oid": "b6a70ce133e037125f016ac1d645150b09467052", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b6a70ce133e037125f016ac1d645150b09467052", "committedDate": "2020-01-27T19:50:38Z", "message": "update to function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15dce052089af2553f7976ded1deca82485f7298", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/15dce052089af2553f7976ded1deca82485f7298", "committedDate": "2020-01-27T20:58:08Z", "message": "remov unused imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDIwMDM5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-349020039", "createdAt": "2020-01-27T22:27:41Z", "commit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjoyNzo0MVrOFiTrLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjoyNzo0MVrOFiTrLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUxODI1Mg==", "bodyText": "I might be missing something, but what happens if no innerError is returned? Will the top level error code/message/target be used?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371518252", "createdAt": "2020-01-27T22:27:41Z", "author": {"login": "kristapratico"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/Transforms.java", "diffHunk": "@@ -67,9 +70,9 @@ static TextDocumentBatchStatistics toBatchStatistics(RequestStatistics statistic\n     static com.azure.ai.textanalytics.models.TextAnalyticsError toTextAnalyticsError(\n         TextAnalyticsError textAnalyticsError) {\n         return new com.azure.ai.textanalytics.models.TextAnalyticsError(\n-            ErrorCodeValue.fromString(textAnalyticsError.getCode().toString()), textAnalyticsError.getMessage(),\n-            textAnalyticsError.getTarget(), textAnalyticsError.getDetails() == null ? null\n-            : setErrors(textAnalyticsError.getDetails()));\n+            TextAnalyticsErrorCode.fromString(textAnalyticsError.getInnerError().getCode().toString()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDIyNjI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-349022625", "createdAt": "2020-01-27T22:32:43Z", "commit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjozMjo0M1rOFiTzKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjozMjo0M1rOFiTzKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyMDI5OA==", "bodyText": "Would it make sense to return the document id/error message in the exception message here?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371520298", "createdAt": "2020-01-27T22:32:43Z", "author": {"login": "kristapratico"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/DocumentResult.java", "diffHunk": "@@ -64,4 +66,15 @@ public TextAnalyticsError getError() {\n     public boolean isError() {\n         return isError;\n     }\n+\n+    /**\n+     * Throw a TextAnalyticsException if result has isError true and when a non-error property was accessed.\n+     */\n+    void throwExceptionIfError() {\n+        if (this.isError()) {\n+            throw logger.logExceptionAsError(new TextAnalyticsException(\n+                String.format(\"Error in accessing the property when %s returned with an error.\",\n+                    this.getClass()), null, null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDI4MzM0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-349028334", "createdAt": "2020-01-27T22:44:36Z", "commit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjo0NDozNlrOFiUFcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjo0NDozNlrOFiUFcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyNDk3OQ==", "bodyText": "Amqp?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371524979", "createdAt": "2020-01-27T22:44:36Z", "author": {"login": "kristapratico"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 1L;\n+\n+    private final String errorCodeValue;\n+    private final String target;\n+\n+    /**\n+     * Initializes a new instance of the AmqpException class.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDI5MzI0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-349029324", "createdAt": "2020-01-27T22:46:35Z", "commit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjo0NjozNVrOFiUIqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjo0NjozNVrOFiUIqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyNTgwMw==", "bodyText": "Passing in an empty string gives an invalid country hint error?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371525803", "createdAt": "2020-01-27T22:46:35Z", "author": {"login": "kristapratico"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/java/com/azure/ai/textanalytics/TextAnalyticsClientTest.java", "diffHunk": "@@ -124,15 +120,12 @@ public void detectLanguageFaultyText() {\n     }\n \n     /**\n-     * Verifies that an error document is returned for a text input with invalid country hint.\n-     * <p>\n-     * TODO: update error Model. #6559\n+     * Verifies that an TextAnalyticsException is thrown for a text input with invalid country hint.\n      */\n     @Test\n     public void detectLanguageInvalidCountryHint() {\n-        TextAnalyticsError expectedError = new TextAnalyticsError(ErrorCodeValue.INVALID_ARGUMENT, \"Invalid Country Hint.\", null, null);\n-        validateErrorDocument(client.detectLanguageWithResponse(\"Este es un document escrito en Espa\u00f1ol.\", \"en\", Context.NONE).getValue().getError(),\n-            expectedError);\n+        Exception exception = assertThrows(TextAnalyticsException.class, () -> client.detectLanguage(\"\"));\n+        assertTrue(exception.getMessage().equals(INVALID_COUNTRY_HINT_EXPECTED_EXCEPTION_MESSAGE));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 60}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDMxNDYz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-349031463", "createdAt": "2020-01-27T22:51:23Z", "commit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjo1MToyM1rOFiUPRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMzoxMzo1NVrOFiUtiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyNzQ5NA==", "bodyText": "What's the different between toTextAnalyticsException() and toTextAnalyticsError()? When is error used and when is exception used?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371527494", "createdAt": "2020-01-27T22:51:23Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/Transforms.java", "diffHunk": "@@ -87,21 +90,12 @@ static TextDocumentBatchStatistics toBatchStatistics(RequestStatistics statistic\n         return multiLanguageInputs;\n     }\n \n-    /**\n-     * Helper method to set error details on {@link TextAnalyticsError}.\n-     *\n-     * @param details about specific errors that led to this reported error.\n-     * @return the {@link TextAnalyticsError} returned by the SDK.\n-     */\n-    private static List<com.azure.ai.textanalytics.models.TextAnalyticsError> setErrors(\n-        List<TextAnalyticsError> details) {\n-        List<com.azure.ai.textanalytics.models.TextAnalyticsError> detailsList = new ArrayList<>();\n-        for (TextAnalyticsError error : details) {\n-            detailsList.add(new com.azure.ai.textanalytics.models.TextAnalyticsError(\n-                ErrorCodeValue.fromString(error.getCode().toString()),\n-                error.getMessage(),\n-                error.getTarget(), error.getDetails() == null ? null : setErrors(error.getDetails())));\n-        }\n-        return detailsList;\n+    static void toTextAnalyticsException(com.azure.ai.textanalytics.models.TextAnalyticsError error,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyNzkyMw==", "bodyText": "This piece of code is repeated in each of the error mappers. Avoid duplication and extract this out to a common method.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371527923", "createdAt": "2020-01-27T22:52:33Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/RecognizePiiEntityAsyncClient.java", "diffHunk": "@@ -54,7 +56,17 @@\n \n         return recognizeBatchPiiEntitiesWithResponse(\n             Collections.singletonList(new TextDocumentInput(\"0\", text, language)), null, context)\n-            .map(response -> new SimpleResponse<>(response, response.getValue().iterator().next()));\n+            .map(response -> {\n+                Iterator<RecognizePiiEntitiesResult> piiEntitiesResultIterator = response.getValue().iterator();\n+                RecognizePiiEntitiesResult piiEntitiesResult = null;\n+                if (response.getStatusCode() == 200 && piiEntitiesResultIterator.hasNext()) {\n+                    piiEntitiesResult = piiEntitiesResultIterator.next();\n+                    if (piiEntitiesResult.isError()) {\n+                        toTextAnalyticsException(piiEntitiesResult.getError(), logger);\n+                    }\n+                }\n+                return new SimpleResponse<>(response, piiEntitiesResult);\n+            });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyOTUwMw==", "bodyText": "This method always throws an exception, however, it's not clear from this code that the method ends here. I was assuming that it would still continue to return SimpleResponse before looking at toTextAnalyticsException() method.\nInstead, return the exception from toTextAnalyticsException() and change this to throw toTextAnalyticsException().", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371529503", "createdAt": "2020-01-27T22:57:11Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/RecognizeLinkedEntityAsyncClient.java", "diffHunk": "@@ -55,7 +57,17 @@\n \n         return recognizeBatchLinkedEntitiesWithResponse(\n             Collections.singletonList(new TextDocumentInput(\"0\", text, language)), null, context)\n-            .map(response -> new SimpleResponse<>(response, response.getValue().iterator().next()));\n+            .map(response -> {\n+                Iterator<RecognizeLinkedEntitiesResult> linkedEntitiesResultIterator = response.getValue().iterator();\n+                RecognizeLinkedEntitiesResult linkedEntitiesResult = null;\n+                if (response.getStatusCode() == 200 && linkedEntitiesResultIterator.hasNext()) {\n+                    linkedEntitiesResult = linkedEntitiesResultIterator.next();\n+                    if (linkedEntitiesResult.isError()) {\n+                        toTextAnalyticsException(linkedEntitiesResult.getError(), logger);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUzMDY1NQ==", "bodyText": "Use HttpUrlConnection.HTTP_OK instead of magic numbers.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371530655", "createdAt": "2020-01-27T23:00:36Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/RecognizeLinkedEntityAsyncClient.java", "diffHunk": "@@ -55,7 +57,17 @@\n \n         return recognizeBatchLinkedEntitiesWithResponse(\n             Collections.singletonList(new TextDocumentInput(\"0\", text, language)), null, context)\n-            .map(response -> new SimpleResponse<>(response, response.getValue().iterator().next()));\n+            .map(response -> {\n+                Iterator<RecognizeLinkedEntitiesResult> linkedEntitiesResultIterator = response.getValue().iterator();\n+                RecognizeLinkedEntitiesResult linkedEntitiesResult = null;\n+                if (response.getStatusCode() == 200 && linkedEntitiesResultIterator.hasNext()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUzMTMzMQ==", "bodyText": "Use Locale.ROOT instead of Locale.US", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371531331", "createdAt": "2020-01-27T23:02:42Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 1L;\n+\n+    private final String errorCodeValue;\n+    private final String target;\n+\n+    /**\n+     * Initializes a new instance of the AmqpException class.\n+     * @param message Text containing any supplementary details of the exception.\n+     * @param errorCodeValue The service returned error code value.\n+     * @param target The target for this exception.\n+     */\n+    public TextAnalyticsException(String message, String errorCodeValue, String target) {\n+        super(message);\n+        this.errorCodeValue = errorCodeValue;\n+        this.target = target;\n+    }\n+\n+    @Override\n+    public String getMessage() {\n+        String baseMessage = super.getMessage();\n+\n+        if (this.errorCodeValue == null) {\n+            return super.getMessage();\n+        } else {\n+            baseMessage = String.format(Locale.US, \"%s %s: {%s}\", baseMessage, \"ErrorCodeValue\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUzMjA1NQ==", "bodyText": "Is error guaranteed to have code or can getCode() result in NPE?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371532055", "createdAt": "2020-01-27T23:04:42Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/Transforms.java", "diffHunk": "@@ -87,21 +90,12 @@ static TextDocumentBatchStatistics toBatchStatistics(RequestStatistics statistic\n         return multiLanguageInputs;\n     }\n \n-    /**\n-     * Helper method to set error details on {@link TextAnalyticsError}.\n-     *\n-     * @param details about specific errors that led to this reported error.\n-     * @return the {@link TextAnalyticsError} returned by the SDK.\n-     */\n-    private static List<com.azure.ai.textanalytics.models.TextAnalyticsError> setErrors(\n-        List<TextAnalyticsError> details) {\n-        List<com.azure.ai.textanalytics.models.TextAnalyticsError> detailsList = new ArrayList<>();\n-        for (TextAnalyticsError error : details) {\n-            detailsList.add(new com.azure.ai.textanalytics.models.TextAnalyticsError(\n-                ErrorCodeValue.fromString(error.getCode().toString()),\n-                error.getMessage(),\n-                error.getTarget(), error.getDetails() == null ? null : setErrors(error.getDetails())));\n-        }\n-        return detailsList;\n+    static void toTextAnalyticsException(com.azure.ai.textanalytics.models.TextAnalyticsError error,\n+        ClientLogger logger) {\n+        String baseMessage = String.format(Locale.US, \"%s: {%s}, %s\",\n+            \"Status Code\", 200, error.getMessage());\n+        throw logger.logExceptionAsError(new TextAnalyticsException(baseMessage,\n+            error.getCode().toString(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUzNTI0MA==", "bodyText": "Generate the servialVersionUID instead of setting it to 1L", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371535240", "createdAt": "2020-01-27T23:13:55Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 1L;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15dce052089af2553f7976ded1deca82485f7298"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bb8260613d823ffefb8d89156a849368e7932ed", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3bb8260613d823ffefb8d89156a849368e7932ed", "committedDate": "2020-01-28T00:04:37Z", "message": "update review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "231df37e2437faf4e4b4bc22608368f90e688dbe", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/231df37e2437faf4e4b4bc22608368f90e688dbe", "committedDate": "2020-01-28T00:47:23Z", "message": "add tests for success property access exception"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/875b3aa92f23f63e123360f4a390a003cd638805", "committedDate": "2020-01-28T02:30:37Z", "message": "update to use generic function"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTUyNTY0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-349552564", "createdAt": "2020-01-28T17:11:47Z", "commit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "state": "COMMENTED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNzoxMTo0OFrOFitYFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNzoyMzo1NVrOFityvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTkzOTM0OQ==", "bodyText": "Was this a manual change or a regeneration change? If the former this will be overwritten next time the implementation layer is regenerated.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371939349", "createdAt": "2020-01-28T17:11:48Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/models/ErrorCodeValue.java", "diffHunk": "@@ -8,7 +8,7 @@\n import com.fasterxml.jackson.annotation.JsonValue;\n \n /**\n- * Defines values for ErrorCodeValue.\n+ * Defines values for TextAnalyticsErrorCode.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0MDYzMw==", "bodyText": "Should this accept a ClientLogger? Won't everything calling into this use the DocumentResult.class logger?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371940633", "createdAt": "2020-01-28T17:13:58Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/DocumentResult.java", "diffHunk": "@@ -64,4 +67,16 @@ public TextAnalyticsError getError() {\n     public boolean isError() {\n         return isError;\n     }\n+\n+    /**\n+     * Throw a {@link TextAnalyticsException} if result has isError true and when a non-error property was accessed.\n+     */\n+    void throwExceptionIfError() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0MjU0Nw==", "bodyText": "Should this be turned back into a TextAnalyticsErrorCode? Generally don't want to have to much loose string matching on error codes.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371942547", "createdAt": "2020-01-28T17:17:22Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 21436310107606058L;\n+\n+    private final String errorCodeValue;\n+    private final String target;\n+\n+    /**\n+     * Initializes a new instance of the TextAnalyticsException class.\n+     * @param message Text containing any additional details of the exception.\n+     * @param errorCodeValue The service returned error code value.\n+     * @param target The target for this exception.\n+     */\n+    public TextAnalyticsException(String message, String errorCodeValue, String target) {\n+        super(message);\n+        this.errorCodeValue = errorCodeValue;\n+        this.target = target;\n+    }\n+\n+    @Override\n+    public String getMessage() {\n+        String baseMessage = super.getMessage();\n+\n+        if (this.errorCodeValue == null) {\n+            return super.getMessage();\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"ErrorCodeValue\",\n+                errorCodeValue);\n+        }\n+\n+        if (this.target == null) {\n+            return baseMessage;\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"target\", target);\n+        }\n+\n+        return baseMessage;\n+    }\n+\n+    /**\n+     * Gets the target for this exception.\n+     *\n+     * @return The target for this exception.\n+     */\n+    public String getTarget() {\n+        return this.target;\n+    }\n+\n+    /**\n+     * Gets the String value of TextAnalyticsErrorCode for this exception.\n+     *\n+     * @return The String value of TextAnalyticsErrorCode for this exception.\n+     */\n+    public String getErrorCodeValue() {\n+        return errorCodeValue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0MzUwNg==", "bodyText": "Is it possible to have a target without an error code a vice-versa? This seems like it could be cleaned up to check that both aren't 'null' at once and do a full string formatting.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371943506", "createdAt": "2020-01-28T17:19:01Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 21436310107606058L;\n+\n+    private final String errorCodeValue;\n+    private final String target;\n+\n+    /**\n+     * Initializes a new instance of the TextAnalyticsException class.\n+     * @param message Text containing any additional details of the exception.\n+     * @param errorCodeValue The service returned error code value.\n+     * @param target The target for this exception.\n+     */\n+    public TextAnalyticsException(String message, String errorCodeValue, String target) {\n+        super(message);\n+        this.errorCodeValue = errorCodeValue;\n+        this.target = target;\n+    }\n+\n+    @Override\n+    public String getMessage() {\n+        String baseMessage = super.getMessage();\n+\n+        if (this.errorCodeValue == null) {\n+            return super.getMessage();\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"ErrorCodeValue\",\n+                errorCodeValue);\n+        }\n+\n+        if (this.target == null) {\n+            return baseMessage;\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"target\", target);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0Mzc3Mw==", "bodyText": "baseMessage could be returned here instead of retrieving it from the super class again.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371943773", "createdAt": "2020-01-28T17:19:31Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 21436310107606058L;\n+\n+    private final String errorCodeValue;\n+    private final String target;\n+\n+    /**\n+     * Initializes a new instance of the TextAnalyticsException class.\n+     * @param message Text containing any additional details of the exception.\n+     * @param errorCodeValue The service returned error code value.\n+     * @param target The target for this exception.\n+     */\n+    public TextAnalyticsException(String message, String errorCodeValue, String target) {\n+        super(message);\n+        this.errorCodeValue = errorCodeValue;\n+        this.target = target;\n+    }\n+\n+    @Override\n+    public String getMessage() {\n+        String baseMessage = super.getMessage();\n+\n+        if (this.errorCodeValue == null) {\n+            return super.getMessage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0Mzk3Mw==", "bodyText": "Let's make 'ErrorCodeValue` a constant", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371943973", "createdAt": "2020-01-28T17:19:50Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 21436310107606058L;\n+\n+    private final String errorCodeValue;\n+    private final String target;\n+\n+    /**\n+     * Initializes a new instance of the TextAnalyticsException class.\n+     * @param message Text containing any additional details of the exception.\n+     * @param errorCodeValue The service returned error code value.\n+     * @param target The target for this exception.\n+     */\n+    public TextAnalyticsException(String message, String errorCodeValue, String target) {\n+        super(message);\n+        this.errorCodeValue = errorCodeValue;\n+        this.target = target;\n+    }\n+\n+    @Override\n+    public String getMessage() {\n+        String baseMessage = super.getMessage();\n+\n+        if (this.errorCodeValue == null) {\n+            return super.getMessage();\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"ErrorCodeValue\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0NDA5Nw==", "bodyText": "Let's make target a constant", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371944097", "createdAt": "2020-01-28T17:20:04Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 21436310107606058L;\n+\n+    private final String errorCodeValue;\n+    private final String target;\n+\n+    /**\n+     * Initializes a new instance of the TextAnalyticsException class.\n+     * @param message Text containing any additional details of the exception.\n+     * @param errorCodeValue The service returned error code value.\n+     * @param target The target for this exception.\n+     */\n+    public TextAnalyticsException(String message, String errorCodeValue, String target) {\n+        super(message);\n+        this.errorCodeValue = errorCodeValue;\n+        this.target = target;\n+    }\n+\n+    @Override\n+    public String getMessage() {\n+        String baseMessage = super.getMessage();\n+\n+        if (this.errorCodeValue == null) {\n+            return super.getMessage();\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"ErrorCodeValue\",\n+                errorCodeValue);\n+        }\n+\n+        if (this.target == null) {\n+            return baseMessage;\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"target\", target);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0NDY1Mg==", "bodyText": "Actually, why isn't this in the format string?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371944652", "createdAt": "2020-01-28T17:21:05Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 21436310107606058L;\n+\n+    private final String errorCodeValue;\n+    private final String target;\n+\n+    /**\n+     * Initializes a new instance of the TextAnalyticsException class.\n+     * @param message Text containing any additional details of the exception.\n+     * @param errorCodeValue The service returned error code value.\n+     * @param target The target for this exception.\n+     */\n+    public TextAnalyticsException(String message, String errorCodeValue, String target) {\n+        super(message);\n+        this.errorCodeValue = errorCodeValue;\n+        this.target = target;\n+    }\n+\n+    @Override\n+    public String getMessage() {\n+        String baseMessage = super.getMessage();\n+\n+        if (this.errorCodeValue == null) {\n+            return super.getMessage();\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"ErrorCodeValue\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0Mzk3Mw=="}, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0NDY3Ng==", "bodyText": "Actually, why isn't this in the format string?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371944676", "createdAt": "2020-01-28T17:21:09Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 21436310107606058L;\n+\n+    private final String errorCodeValue;\n+    private final String target;\n+\n+    /**\n+     * Initializes a new instance of the TextAnalyticsException class.\n+     * @param message Text containing any additional details of the exception.\n+     * @param errorCodeValue The service returned error code value.\n+     * @param target The target for this exception.\n+     */\n+    public TextAnalyticsException(String message, String errorCodeValue, String target) {\n+        super(message);\n+        this.errorCodeValue = errorCodeValue;\n+        this.target = target;\n+    }\n+\n+    @Override\n+    public String getMessage() {\n+        String baseMessage = super.getMessage();\n+\n+        if (this.errorCodeValue == null) {\n+            return super.getMessage();\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"ErrorCodeValue\",\n+                errorCodeValue);\n+        }\n+\n+        if (this.target == null) {\n+            return baseMessage;\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"target\", target);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0NDA5Nw=="}, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0NDk5Mg==", "bodyText": "Could a StringBuilder be used instead of using two String.format calls?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371944992", "createdAt": "2020-01-28T17:21:45Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsException.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.exception.AzureException;\n+\n+import java.util.Locale;\n+\n+/**\n+ * General exception for Text Analytics related failures.\n+ */\n+public class TextAnalyticsException extends AzureException {\n+    private static final long serialVersionUID = 21436310107606058L;\n+\n+    private final String errorCodeValue;\n+    private final String target;\n+\n+    /**\n+     * Initializes a new instance of the TextAnalyticsException class.\n+     * @param message Text containing any additional details of the exception.\n+     * @param errorCodeValue The service returned error code value.\n+     * @param target The target for this exception.\n+     */\n+    public TextAnalyticsException(String message, String errorCodeValue, String target) {\n+        super(message);\n+        this.errorCodeValue = errorCodeValue;\n+        this.target = target;\n+    }\n+\n+    @Override\n+    public String getMessage() {\n+        String baseMessage = super.getMessage();\n+\n+        if (this.errorCodeValue == null) {\n+            return super.getMessage();\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"ErrorCodeValue\",\n+                errorCodeValue);\n+        }\n+\n+        if (this.target == null) {\n+            return baseMessage;\n+        } else {\n+            baseMessage = String.format(Locale.ROOT, \"%s %s: {%s}\", baseMessage, \"target\", target);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0NTY2Mg==", "bodyText": "Why do the other String.format changes use Locale.ROOT where this does not?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371945662", "createdAt": "2020-01-28T17:23:01Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/DocumentResult.java", "diffHunk": "@@ -64,4 +67,16 @@ public TextAnalyticsError getError() {\n     public boolean isError() {\n         return isError;\n     }\n+\n+    /**\n+     * Throw a {@link TextAnalyticsException} if result has isError true and when a non-error property was accessed.\n+     */\n+    void throwExceptionIfError() {\n+        if (this.isError()) {\n+            throw logger.logExceptionAsError(new TextAnalyticsException(\n+                String.format(\"Error in accessing the property on document id: %s, when %s returned with an error: %s\",\n+                    this.id, this.getClass().getSimpleName(), this.error.getMessage()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk0NjE3Mg==", "bodyText": "Since this is package private it won't be inherited by the subclasses, will this require any additional parameters to be passed?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r371946172", "createdAt": "2020-01-28T17:23:55Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/DocumentResult.java", "diffHunk": "@@ -64,4 +67,16 @@ public TextAnalyticsError getError() {\n     public boolean isError() {\n         return isError;\n     }\n+\n+    /**\n+     * Throw a {@link TextAnalyticsException} if result has isError true and when a non-error property was accessed.\n+     */\n+    void throwExceptionIfError() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NjUwMDU1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-349650055", "createdAt": "2020-01-28T19:40:55Z", "commit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTo0MDo1NVrOFiyDDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTo0MDo1NVrOFiyDDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAxNTg4NQ==", "bodyText": "Will this exception always be for 200 only?  A different exception is thrown for 4xx/5xx codes?\nIt's possible TA service could add another top-level error.  Does this exception type leave room to grow if they do?\nRight now they have just these top-level errors:\n      \"enum\": [\n        \"invalidRequest\", // 400\n        \"invalidArgument\", // 200\n        \"internalServerError\", // 500\n        \"serviceUnavailable\"  // 500\n      ],\n\nWhat exception type would we throw if they added another for 200?  Would you inherit from TextAnalyticsException or differentiate it another way?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r372015885", "createdAt": "2020-01-28T19:40:55Z", "author": {"login": "annelo-msft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/Transforms.java", "diffHunk": "@@ -88,20 +105,43 @@ static TextDocumentBatchStatistics toBatchStatistics(RequestStatistics statistic\n     }\n \n     /**\n-     * Helper method to set error details on {@link TextAnalyticsError}.\n+     * Convert the incoming input {@link com.azure.ai.textanalytics.models.TextAnalyticsError}\n+     * to a {@link TextAnalyticsException}.\n+     *\n+     * @param error the {@link com.azure.ai.textanalytics.models.TextAnalyticsError}.\n+     * @return the {@link TextAnalyticsException} to be thrown.\n+     */\n+    static TextAnalyticsException toTextAnalyticsException(com.azure.ai.textanalytics.models.TextAnalyticsError error) {\n+        String baseMessage = String.format(Locale.US, \"%s: {%s}, %s\",\n+            \"Status Code\", HttpURLConnection.HTTP_OK, error.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NjU1MDM1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-349655035", "createdAt": "2020-01-28T19:48:40Z", "commit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTo0ODo0MFrOFiySfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTo0ODo0MFrOFiySfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAxOTgzOQ==", "bodyText": "We have error code as a string in .NET rather than having an enum for it.  Not sure what the philosophy is on this on the Java side, but in .NET if we did expose this as an enum, we would want a service-specific name for it to avoid type name clashes down the line.  This is a candidate for a common library, but we're still operating under the assumption that we won't get there for TextAnalytics (this could change).", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r372019839", "createdAt": "2020-01-28T19:48:40Z", "author": {"login": "annelo-msft"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/models/ErrorCodeValue.java", "diffHunk": "@@ -8,7 +8,7 @@\n import com.fasterxml.jackson.annotation.JsonValue;\n \n /**\n- * Defines values for ErrorCodeValue.\n+ * Defines values for TextAnalyticsErrorCode.\n  */\n public enum ErrorCodeValue {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "875b3aa92f23f63e123360f4a390a003cd638805"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be5571b25e8f501b6f0b6fd5493ab7f56bdfa020", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/be5571b25e8f501b6f0b6fd5493ab7f56bdfa020", "committedDate": "2020-01-28T19:57:50Z", "message": "update to use class logger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94b394850d9d9b7b466d63560c81753fdf5f7422", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/94b394850d9d9b7b466d63560c81753fdf5f7422", "committedDate": "2020-01-28T21:16:27Z", "message": "update to use Locale.ROOT"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NzQ4ODcz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-349748873", "createdAt": "2020-01-28T22:25:49Z", "commit": {"oid": "94b394850d9d9b7b466d63560c81753fdf5f7422"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "628815d15808992cda741fd06d09cace9e4b1a07", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/628815d15808992cda741fd06d09cace9e4b1a07", "committedDate": "2020-01-29T19:36:36Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into update-error-model"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bab240370639c1322c374659fc9e6e2c890ddfa2", "committedDate": "2020-01-29T19:39:08Z", "message": "Remove status code from single error response exception"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNDQxNTAw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-350441500", "createdAt": "2020-01-29T21:36:57Z", "commit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNTQyNTU4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-350542558", "createdAt": "2020-01-30T01:57:54Z", "commit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQwMTo1Nzo1NFrOFjdZlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQwMjowNToxM1rOFjdfLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjcyNjE2Nw==", "bodyText": "ClientLogger doesn't have to be passed around. Use a ClientLogger that is created with the name of this class.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r372726167", "createdAt": "2020-01-30T01:57:54Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/Transforms.java", "diffHunk": "@@ -88,20 +104,40 @@ static TextDocumentBatchStatistics toBatchStatistics(RequestStatistics statistic\n     }\n \n     /**\n-     * Helper method to set error details on {@link TextAnalyticsError}.\n+     * Convert the incoming input {@link com.azure.ai.textanalytics.models.TextAnalyticsError}\n+     * to a {@link TextAnalyticsException}.\n+     *\n+     * @param error the {@link com.azure.ai.textanalytics.models.TextAnalyticsError}.\n+     * @return the {@link TextAnalyticsException} to be thrown.\n+     */\n+    static TextAnalyticsException toTextAnalyticsException(com.azure.ai.textanalytics.models.TextAnalyticsError error) {\n+        return new TextAnalyticsException(error.getMessage(),\n+            error.getCode().toString(),\n+            error.getTarget());\n+    }\n+\n+    /**\n+     * Convert the service returned model response {@link DocumentResultCollection} to a {@link SimpleResponse}.\n+     * If the response returned with an error, a {@link TextAnalyticsException} is thrown.\n+     *\n+     * @param response the {@link com.azure.ai.textanalytics.models.TextAnalyticsError}.\n+     * @param logger the {@link ClientLogger} used to log any exception.\n+     *\n+     * @return the {@link SimpleResponse}.\n      *\n-     * @param details about specific errors that led to this reported error.\n-     * @return the {@link TextAnalyticsError} returned by the SDK.\n+     * @throws com.azure.ai.textanalytics.models.TextAnalyticsException if the response returned with\n+     * an {@link com.azure.ai.textanalytics.models.TextAnalyticsError error}.\n      */\n-    private static List<com.azure.ai.textanalytics.models.TextAnalyticsError> setErrors(\n-        List<TextAnalyticsError> details) {\n-        List<com.azure.ai.textanalytics.models.TextAnalyticsError> detailsList = new ArrayList<>();\n-        for (TextAnalyticsError error : details) {\n-            detailsList.add(new com.azure.ai.textanalytics.models.TextAnalyticsError(\n-                ErrorCodeValue.fromString(error.getCode().toString()),\n-                error.getMessage(),\n-                error.getTarget(), error.getDetails() == null ? null : setErrors(error.getDetails())));\n+    static <T extends DocumentResult> Response<T> processSingleResponseErrorResult(\n+        Response<DocumentResultCollection<T>> response, ClientLogger logger) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjcyNjk1OA==", "bodyText": "This can now be made private", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r372726958", "createdAt": "2020-01-30T02:01:37Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/Transforms.java", "diffHunk": "@@ -88,20 +104,40 @@ static TextDocumentBatchStatistics toBatchStatistics(RequestStatistics statistic\n     }\n \n     /**\n-     * Helper method to set error details on {@link TextAnalyticsError}.\n+     * Convert the incoming input {@link com.azure.ai.textanalytics.models.TextAnalyticsError}\n+     * to a {@link TextAnalyticsException}.\n+     *\n+     * @param error the {@link com.azure.ai.textanalytics.models.TextAnalyticsError}.\n+     * @return the {@link TextAnalyticsException} to be thrown.\n+     */\n+    static TextAnalyticsException toTextAnalyticsException(com.azure.ai.textanalytics.models.TextAnalyticsError error) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjcyNzUzOA==", "bodyText": "Don't use a logger created in another class. For debugging purposes, we should know which class actually has the code that logged something.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r372727538", "createdAt": "2020-01-30T02:04:52Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/DocumentResult.java", "diffHunk": "@@ -64,4 +69,19 @@ public TextAnalyticsError getError() {\n     public boolean isError() {\n         return isError;\n     }\n+\n+    /**\n+     * Throw a {@link TextAnalyticsException} if result has isError true and when a non-error property was accessed.\n+     *\n+     * @param logger the {@link ClientLogger} used to log the exception.\n+     */\n+    void throwExceptionIfError(ClientLogger logger) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjcyNzU5OQ==", "bodyText": "Any reason why this generated code was deleted?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r372727599", "createdAt": "2020-01-30T02:05:13Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/ErrorCodeValue.java", "diffHunk": "@@ -1,71 +0,0 @@\n-// Copyright (c) Microsoft Corporation. All rights reserved.\n-// Licensed under the MIT License.\n-// Code generated by Microsoft (R) AutoRest Code Generator.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwOTkzNjA3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-350993607", "createdAt": "2020-01-30T17:09:44Z", "commit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNzowOTo0NFrOFjy5qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNzowOTo0NFrOFjy5qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA3ODQ0Mw==", "bodyText": "NIT: name a name", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r373078443", "createdAt": "2020-01-30T17:09:44Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsErrorCode.java", "diffHunk": "@@ -0,0 +1,88 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.util.ExpandableStringEnum;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+\n+/**\n+ * Defines values for TextAnalyticsErrorCode.\n+ */\n+public final class TextAnalyticsErrorCode extends ExpandableStringEnum<TextAnalyticsErrorCode> {\n+    /**\n+     * Enum value invalidRequest.\n+     */\n+    public static final TextAnalyticsErrorCode INVALID_REQUEST = fromString(\"invalidRequest\");\n+\n+    /**\n+     * Enum value invalidArgument.\n+     */\n+    public static final TextAnalyticsErrorCode INVALID_ARGUMENT = fromString(\"invalidArgument\");\n+\n+    /**\n+     * Enum value internalServerError.\n+     */\n+    public static final TextAnalyticsErrorCode INTERNAL_SERVER_ERROR = fromString(\"internalServerError\");\n+\n+    /**\n+     * Enum value serviceUnavailable.\n+     */\n+    public static final TextAnalyticsErrorCode SERVICE_UNAVAILABLE = fromString(\"serviceUnavailable\");\n+\n+    /**\n+     * Enum value invalidParameterValue.\n+     */\n+    public static final TextAnalyticsErrorCode INVALID_PARAMETER_VALUE = fromString(\"invalidParameterValue\");\n+\n+    /**\n+     * Enum value invalidRequestBodyFormat.\n+     */\n+    public static final TextAnalyticsErrorCode INVALID_REQUEST_BODY_FORMAT = fromString(\"invalidRequestBodyFormat\");\n+\n+    /**\n+     * Enum value emptyRequest.\n+     */\n+    public static final TextAnalyticsErrorCode EMPTY_REQUEST = fromString(\"emptyRequest\");\n+\n+    /**\n+     * Enum value missingInputRecords.\n+     */\n+    public static final TextAnalyticsErrorCode MISSING_INPUT_RECORDS = fromString(\"missingInputRecords\");\n+\n+    /**\n+     * Enum value invalidDocument.\n+     */\n+    public static final TextAnalyticsErrorCode INVALID_DOCUMENT = fromString(\"invalidDocument\");\n+\n+    /**\n+     * Enum value modelVersionIncorrect.\n+     */\n+    public static final TextAnalyticsErrorCode MODEL_VERSION_INCORRECT = fromString(\"modelVersionIncorrect\");\n+\n+    /**\n+     * Enum value invalidDocumentBatch.\n+     */\n+    public static final TextAnalyticsErrorCode INVALID_DOCUMENT_BATCH = fromString(\"invalidDocumentBatch\");\n+\n+    /**\n+     * Enum value unsupportedLanguageCode.\n+     */\n+    public static final TextAnalyticsErrorCode UNSUPPORTED_LANGUAGE_CODE = fromString(\"unsupportedLanguageCode\");\n+\n+    /**\n+     * Enum value invalidCountryHint.\n+     */\n+    public static final TextAnalyticsErrorCode INVALID_COUNTRY_HINT = fromString(\"invalidCountryHint\");\n+\n+    /**\n+     * Creates or finds a TextAnalyticsErrorCode from its string representation.\n+     *\n+     * @param name a name to look for.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2"}, "originalPosition": 81}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwOTk1NTIz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-350995523", "createdAt": "2020-01-30T17:12:29Z", "commit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNzoxMjozMFrOFjy_Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNzoxMjozMFrOFjy_Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA3OTkwNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Verifies that  an TextAnalyticsException is thrown when empty text is passed.\n          \n          \n            \n                 * Verifies that a TextAnalyticsException is thrown when empty text is passed.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r373079906", "createdAt": "2020-01-30T17:12:30Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/java/com/azure/ai/textanalytics/TextAnalyticsClientTest.java", "diffHunk": "@@ -110,14 +110,12 @@ public void detectLanguagesNullInput() {\n     }\n \n     /**\n-     * Verifies that the error result is returned when empty text is passed.\n+     * Verifies that  an TextAnalyticsException is thrown when empty text is passed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bab240370639c1322c374659fc9e6e2c890ddfa2"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c78c1a2cba0795a4548fc37915e239f1b215f0b", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5c78c1a2cba0795a4548fc37915e239f1b215f0b", "committedDate": "2020-01-30T22:07:05Z", "message": "update to use static logger"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d8b75d09776d607e1bf9598510d60bafd32908d2", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d8b75d09776d607e1bf9598510d60bafd32908d2", "committedDate": "2020-01-30T21:58:48Z", "message": "update to use static logger"}, "afterCommit": {"oid": "5c78c1a2cba0795a4548fc37915e239f1b215f0b", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5c78c1a2cba0795a4548fc37915e239f1b215f0b", "committedDate": "2020-01-30T22:07:05Z", "message": "update to use static logger"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMjQ4MDM3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#pullrequestreview-351248037", "createdAt": "2020-01-31T01:24:02Z", "commit": {"oid": "5c78c1a2cba0795a4548fc37915e239f1b215f0b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwMToyNDowMlrOFj_Fww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQwMToyNDowMlrOFj_Fww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI3ODE0Nw==", "bodyText": "nit: can use method reference instead\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        .map(response -> processSingleResponseErrorResult(response));\n          \n          \n            \n                        .map(Transforms::processSingleResponseErrorResult);", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7635#discussion_r373278147", "createdAt": "2020-01-31T01:24:02Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -55,7 +57,7 @@\n \n         return analyzeBatchSentimentWithResponse(\n             Collections.singletonList(new TextDocumentInput(\"0\", text, language)), null, context)\n-            .map(response -> new SimpleResponse<>(response, response.getValue().iterator().next()));\n+            .map(response -> processSingleResponseErrorResult(response));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c78c1a2cba0795a4548fc37915e239f1b215f0b"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc8082fdb8aa261da958ccd8589b9d1f2b77ac0d", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bc8082fdb8aa261da958ccd8589b9d1f2b77ac0d", "committedDate": "2020-01-31T02:07:04Z", "message": "use method reference"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 356, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}