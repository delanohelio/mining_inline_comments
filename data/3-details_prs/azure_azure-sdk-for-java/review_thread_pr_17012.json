{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzMTE1Njk4", "number": 17012, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNjo0NjozN1rOEz367w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNzozODo1NlrOEz5VQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyODI5MDM5OnYy", "diffSide": "RIGHT", "path": "eng/docgeneration/Generate-DocIndex.ps1", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNjo0NjozN1rOHrXYmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNzoxMDo0OFrOHrYUdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIzMzk0Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value | Sort Key) {\n          \n          \n            \n                    $artifact = $serviceMapping.Key\n          \n          \n            \n                    $serviceName = $serviceMapping.Value\n          \n          \n            \n                foreach ($artifact in ($tocContent.Keys | Sort-Object)) {\n          \n          \n            \n                    $serviceName = $tocContent[$artifact]\n          \n      \n    \n    \n  \n\nThis will sort all the packages but which cause them to be sorted on the individual service name.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17012#discussion_r515233947", "createdAt": "2020-10-30T16:46:37Z", "author": {"login": "weshaggard"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -109,7 +109,7 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     New-Item -Path $YmlPath -Name \"toc.yml\" -Force\n     $visitedService = @{}\n     # Sort and display toc service name by alphabetical order.\n-    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value) {\n+    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value | Sort Key) {\n         $artifact = $serviceMapping.Key\n         $serviceName = $serviceMapping.Value", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1d5786feb0a8c8b9283833382c71ba7cd8cc55e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0Mjc4NA==", "bodyText": "Right, toc.yml did not sort service name in the suggessted code.\nWe sort service name and write to toc.yml first, then we write the artifact into sdk.md file. So the best way is to sort the hashtable by value first and then sort by key.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17012#discussion_r515242784", "createdAt": "2020-10-30T17:00:25Z", "author": {"login": "sima-zhu"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -109,7 +109,7 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     New-Item -Path $YmlPath -Name \"toc.yml\" -Force\n     $visitedService = @{}\n     # Sort and display toc service name by alphabetical order.\n-    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value) {\n+    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value | Sort Key) {\n         $artifact = $serviceMapping.Key\n         $serviceName = $serviceMapping.Value", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIzMzk0Nw=="}, "originalCommit": {"oid": "d1d5786feb0a8c8b9283833382c71ba7cd8cc55e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0Mjg5MA==", "bodyText": "Actually if we depend on this to sort the service names as well we might want something closer to what you had.\nforeach ($serviceMapping in ($tocContent | Sort-Object Value, Key)) {", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17012#discussion_r515242890", "createdAt": "2020-10-30T17:00:37Z", "author": {"login": "weshaggard"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -109,7 +109,7 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     New-Item -Path $YmlPath -Name \"toc.yml\" -Force\n     $visitedService = @{}\n     # Sort and display toc service name by alphabetical order.\n-    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value) {\n+    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value | Sort Key) {\n         $artifact = $serviceMapping.Key\n         $serviceName = $serviceMapping.Value", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIzMzk0Nw=="}, "originalCommit": {"oid": "d1d5786feb0a8c8b9283833382c71ba7cd8cc55e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI0OTI2OQ==", "bodyText": "Done with the change.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17012#discussion_r515249269", "createdAt": "2020-10-30T17:10:48Z", "author": {"login": "sima-zhu"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -109,7 +109,7 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     New-Item -Path $YmlPath -Name \"toc.yml\" -Force\n     $visitedService = @{}\n     # Sort and display toc service name by alphabetical order.\n-    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value) {\n+    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value | Sort Key) {\n         $artifact = $serviceMapping.Key\n         $serviceName = $serviceMapping.Value", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIzMzk0Nw=="}, "originalCommit": {"oid": "d1d5786feb0a8c8b9283833382c71ba7cd8cc55e"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyODUyMTYxOnYy", "diffSide": "RIGHT", "path": "eng/docgeneration/Generate-DocIndex.ps1", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNzozODo1NlrOHrZpvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQyMjowMzoxNFrOHrhqPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3MTEwMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                foreach ($serviceMapping in ($tocContent.GetEnumerator() | Sort-Object Value, Key)) {\n          \n          \n            \n                foreach ($serviceMapping in ($tocContent | Sort-Object Value, Key)) {\n          \n      \n    \n    \n  \n\nI don't believe the explicit call to GetEnumerator() is needed.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17012#discussion_r515271103", "createdAt": "2020-10-30T17:38:56Z", "author": {"login": "weshaggard"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -100,16 +100,16 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     LogDebug \"Initializing Default DocFx Site...\"\n     & $($DocFx) init -q -o \"${DocOutDir}\"\n     # The line below is used for testing in local\n-    # docfx init -q -o \"${DocOutDir}\"\n+    #docfx init -q -o \"${DocOutDir}\"\n     LogDebug \"Copying template and configuration...\"\n     New-Item -Path \"${DocOutDir}\" -Name \"templates\" -ItemType \"directory\" -Force\n     Copy-Item \"${DocGenDir}/templates/*\" -Destination \"${DocOutDir}/templates\" -Force -Recurse\n     Copy-Item \"${DocGenDir}/docfx.json\" -Destination \"${DocOutDir}/\" -Force\n     $YmlPath = \"${DocOutDir}/api\"\n     New-Item -Path $YmlPath -Name \"toc.yml\" -Force\n     $visitedService = @{}\n-    # Sort and display toc service name by alphabetical order.\n-    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value) {\n+    # Sort and display toc service name by alphabetical order, and then sort artifact by order.\n+    foreach ($serviceMapping in ($tocContent.GetEnumerator() | Sort-Object Value, Key)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8adb39838609b6ead92fc124ddb0c983d9cc703"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3MjAzOQ==", "bodyText": "I tried in local. It is not working if not put getEnumerator(). Not sort in the right way, also not able to get the right $serviceMaping", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17012#discussion_r515272039", "createdAt": "2020-10-30T17:40:26Z", "author": {"login": "sima-zhu"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -100,16 +100,16 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     LogDebug \"Initializing Default DocFx Site...\"\n     & $($DocFx) init -q -o \"${DocOutDir}\"\n     # The line below is used for testing in local\n-    # docfx init -q -o \"${DocOutDir}\"\n+    #docfx init -q -o \"${DocOutDir}\"\n     LogDebug \"Copying template and configuration...\"\n     New-Item -Path \"${DocOutDir}\" -Name \"templates\" -ItemType \"directory\" -Force\n     Copy-Item \"${DocGenDir}/templates/*\" -Destination \"${DocOutDir}/templates\" -Force -Recurse\n     Copy-Item \"${DocGenDir}/docfx.json\" -Destination \"${DocOutDir}/\" -Force\n     $YmlPath = \"${DocOutDir}/api\"\n     New-Item -Path $YmlPath -Name \"toc.yml\" -Force\n     $visitedService = @{}\n-    # Sort and display toc service name by alphabetical order.\n-    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value) {\n+    # Sort and display toc service name by alphabetical order, and then sort artifact by order.\n+    foreach ($serviceMapping in ($tocContent.GetEnumerator() | Sort-Object Value, Key)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3MTEwMw=="}, "originalCommit": {"oid": "c8adb39838609b6ead92fc124ddb0c983d9cc703"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3MjQ4Ng==", "bodyText": "https://docs.microsoft.com/en-us/dotnet/api/system.collections.hashtable.getenumerator?view=netcore-3.1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17012#discussion_r515272486", "createdAt": "2020-10-30T17:41:12Z", "author": {"login": "sima-zhu"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -100,16 +100,16 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     LogDebug \"Initializing Default DocFx Site...\"\n     & $($DocFx) init -q -o \"${DocOutDir}\"\n     # The line below is used for testing in local\n-    # docfx init -q -o \"${DocOutDir}\"\n+    #docfx init -q -o \"${DocOutDir}\"\n     LogDebug \"Copying template and configuration...\"\n     New-Item -Path \"${DocOutDir}\" -Name \"templates\" -ItemType \"directory\" -Force\n     Copy-Item \"${DocGenDir}/templates/*\" -Destination \"${DocOutDir}/templates\" -Force -Recurse\n     Copy-Item \"${DocGenDir}/docfx.json\" -Destination \"${DocOutDir}/\" -Force\n     $YmlPath = \"${DocOutDir}/api\"\n     New-Item -Path $YmlPath -Name \"toc.yml\" -Force\n     $visitedService = @{}\n-    # Sort and display toc service name by alphabetical order.\n-    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value) {\n+    # Sort and display toc service name by alphabetical order, and then sort artifact by order.\n+    foreach ($serviceMapping in ($tocContent.GetEnumerator() | Sort-Object Value, Key)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3MTEwMw=="}, "originalCommit": {"oid": "c8adb39838609b6ead92fc124ddb0c983d9cc703"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3MjkzMQ==", "bodyText": "It returns iterable objects", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17012#discussion_r515272931", "createdAt": "2020-10-30T17:42:05Z", "author": {"login": "sima-zhu"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -100,16 +100,16 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     LogDebug \"Initializing Default DocFx Site...\"\n     & $($DocFx) init -q -o \"${DocOutDir}\"\n     # The line below is used for testing in local\n-    # docfx init -q -o \"${DocOutDir}\"\n+    #docfx init -q -o \"${DocOutDir}\"\n     LogDebug \"Copying template and configuration...\"\n     New-Item -Path \"${DocOutDir}\" -Name \"templates\" -ItemType \"directory\" -Force\n     Copy-Item \"${DocGenDir}/templates/*\" -Destination \"${DocOutDir}/templates\" -Force -Recurse\n     Copy-Item \"${DocGenDir}/docfx.json\" -Destination \"${DocOutDir}/\" -Force\n     $YmlPath = \"${DocOutDir}/api\"\n     New-Item -Path $YmlPath -Name \"toc.yml\" -Force\n     $visitedService = @{}\n-    # Sort and display toc service name by alphabetical order.\n-    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value) {\n+    # Sort and display toc service name by alphabetical order, and then sort artifact by order.\n+    foreach ($serviceMapping in ($tocContent.GetEnumerator() | Sort-Object Value, Key)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3MTEwMw=="}, "originalCommit": {"oid": "c8adb39838609b6ead92fc124ddb0c983d9cc703"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQwMjMwMA==", "bodyText": "OK I just double checked locally and your are correct. The normal iterator for hashtable is a little strange I guess that is why I usually just iterator over the Keys. However what you have here does work from my local testing so I'm good with it. It does allow for us to sort on both Key and Value.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17012#discussion_r515402300", "createdAt": "2020-10-30T22:03:14Z", "author": {"login": "weshaggard"}, "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -100,16 +100,16 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     LogDebug \"Initializing Default DocFx Site...\"\n     & $($DocFx) init -q -o \"${DocOutDir}\"\n     # The line below is used for testing in local\n-    # docfx init -q -o \"${DocOutDir}\"\n+    #docfx init -q -o \"${DocOutDir}\"\n     LogDebug \"Copying template and configuration...\"\n     New-Item -Path \"${DocOutDir}\" -Name \"templates\" -ItemType \"directory\" -Force\n     Copy-Item \"${DocGenDir}/templates/*\" -Destination \"${DocOutDir}/templates\" -Force -Recurse\n     Copy-Item \"${DocGenDir}/docfx.json\" -Destination \"${DocOutDir}/\" -Force\n     $YmlPath = \"${DocOutDir}/api\"\n     New-Item -Path $YmlPath -Name \"toc.yml\" -Force\n     $visitedService = @{}\n-    # Sort and display toc service name by alphabetical order.\n-    foreach ($serviceMapping in $tocContent.getEnumerator() | Sort Value) {\n+    # Sort and display toc service name by alphabetical order, and then sort artifact by order.\n+    foreach ($serviceMapping in ($tocContent.GetEnumerator() | Sort-Object Value, Key)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3MTEwMw=="}, "originalCommit": {"oid": "c8adb39838609b6ead92fc124ddb0c983d9cc703"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3802, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}