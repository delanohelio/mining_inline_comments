{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMTg0NTQy", "number": 15493, "title": "Add Release Notes collect changelog script Java", "bodyText": "This PR adds a script to collect changelog references and details for all the packages releasing in the given month to help when preparing the monthly release notes.\n\nThis script currently outputs all the entries for detailed changelogs. Should the release notes be a copy of the changelogs?\nConsider extracting only New Features and Key Bug Fixes?\nCurrently, it will need a manual intervention to parse out important content out of the detailed per package changelog notes.\nJava needs a special grouping for Spring packages to be Azure Spring Cloud or Azure Spring Boot. [Understand the grouping from Spring team]\nSpring team suggests keeping spring packages aggregation out of this and they will prepare the PR for release notes themselves.\n\nCloses: #15374", "createdAt": "2020-09-22T20:43:18Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15493", "merged": true, "mergeCommit": {"oid": "7403300c2a6df0fd309edf763c1d4074476fcd1f"}, "closed": true, "closedAt": "2020-09-28T21:43:39Z", "author": {"login": "samvaity"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLeGRIAH2gAyNDkxMTg0NTQyOjQ4ZTYyZDNkYjg3ZTI0ZTEzNzYwZjEzZjIxYTA2ZDFiMGY1ZGJjMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNb-mmAFqTQ5Nzk1OTk3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "48e62d3db87e24e13760f13f21a06d1b0f5dbc24", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/48e62d3db87e24e13760f13f21a06d1b0f5dbc24", "committedDate": "2020-09-22T20:34:24Z", "message": "add collect changelog java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0OTE0MDU4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15493#pullrequestreview-494914058", "createdAt": "2020-09-23T18:02:25Z", "commit": {"oid": "48e62d3db87e24e13760f13f21a06d1b0f5dbc24"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19b660bd7b952e3ffe44e08a9effbe000649bcb7", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/19b660bd7b952e3ffe44e08a9effbe000649bcb7", "committedDate": "2020-09-28T06:10:38Z", "message": "remove spring and resourcemanager directory changelogs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3OTU5OTc0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15493#pullrequestreview-497959974", "createdAt": "2020-09-28T23:14:03Z", "commit": {"oid": "19b660bd7b952e3ffe44e08a9effbe000649bcb7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMzoxNDowNFrOHZS3mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMzoxNDowNFrOHZS3mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI4NTU5Mg==", "bodyText": "Do you plan to call this manually and filter it down to just the set of packages you are interested in?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15493#discussion_r496285592", "createdAt": "2020-09-28T23:14:04Z", "author": {"login": "weshaggard"}, "path": "eng/scripts/Collect-Changelogs.ps1", "diffHunk": "@@ -0,0 +1,48 @@\n+[CmdletBinding()]\n+param(\n+  [Parameter(Mandatory=$true)]\n+  [ValidateRange(1, 12)]\n+  [int] $Month\n+)\n+\n+$repoRoot = Resolve-Path \"$PSScriptRoot/../..\";\n+. ${repoRoot}\\eng\\common\\scripts\\SemVer.ps1\n+. ${repoRoot}\\eng\\common\\scripts\\ChangeLog-Operations.ps1\n+$InstallNotes = \"\";\n+$ReleaseNotes = \"\";\n+\n+$date = Get-Date -Month $month -Format \"yyyy-MM\"\n+$date += \"-\\d\\d\"\n+\n+Get-ChildItem \"$repoRoot/sdk\" -Filter CHANGELOG.md -Recurse | Sort-Object -Property Name | % {\n+\n+    $changeLogEntries = Get-ChangeLogEntries -ChangeLogLocation $_\n+    $package = $_.Directory.Name\n+    $serviceDirectory = $_.Directory.Parent.Name\n+    if ($serviceDirectory -ne \"resourcemanager\" -and $serviceDirectory -ne \"spring\") {\n+        foreach ($changeLogEntry in $changeLogEntries.Values)\n+        {\n+            if ($changeLogEntry.ReleaseStatus -notmatch $date)\n+            {\n+\n+                continue;\n+            }\n+\n+            $version = $changeLogEntry.ReleaseVersion\n+            $githubAnchor = $changeLogEntry.ReleaseTitle.Replace(\"## \", \"\").Replace(\".\", \"\").Replace(\"(\", \"\").Replace(\")\", \"\").Replace(\" \", \"-\")\n+            $TextInfo = (Get-Culture).TextInfo\n+            $changelogTitle = $TextInfo.ToTitleCase($package.Replace(\"-\", \" \"))\n+\n+            $InstallNotes += \"<dependency>`n  <groupId>com.azure</groupId>`n  <artifactId>$package</artifactId>`n  <version>$version</version>`n</dependency>`n`n\";\n+            $ReleaseNotes += \"### $changelogTitle $version [Changelog](https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/$serviceDirectory/$package/CHANGELOG.md#$githubAnchor)`n\"\n+            $changeLogEntry.ReleaseContent | %{\n+\n+                $ReleaseNotes += $_.Replace(\"###\", \"####\")\n+                $ReleaseNotes += \"`n\"\n+            }\n+            $ReleaseNotes += \"`n\"\n+        }\n+    }\n+}\n+\n+return $InstallNotes, $ReleaseNotes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19b660bd7b952e3ffe44e08a9effbe000649bcb7"}, "originalPosition": 48}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3353, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}