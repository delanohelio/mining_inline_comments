{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NzEwNjcx", "number": 9057, "title": "Add event processor sample for Azure Stack usecase", "bodyText": "Azure Stack has an older version of Blob Storage and Track 2 Storage SDK only support newer versions. In order to use the blob checkpoint store with Event Processor, older version of storage has to be added as a header policy when creating the container client. This PR has a sample to demonstrate how this can be done.", "createdAt": "2020-03-13T10:46:48Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9057", "merged": true, "mergeCommit": {"oid": "5b6ec7eb4f3024aa9c5385429df63c1242f75ba2"}, "closed": true, "closedAt": "2020-03-16T07:35:56Z", "author": {"login": "srnagar"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNN9NLgH2gAyMzg3NzEwNjcxOmMwYTFiMTUyODdhYjE2ZmE2NGI1MGU5M2JlNTgwMGI5ZjFiODNiYTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOWu4AAFqTM3NTY0ODQyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c0a1b15287ab16fa64b50e93be5800b9f1b83ba9", "author": {"user": {"login": "srnagar", "name": "Srikanta"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c0a1b15287ab16fa64b50e93be5800b9f1b83ba9", "committedDate": "2020-03-13T10:42:43Z", "message": "Add event processor sample for Azure Stack usecase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MzQwNzAz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9057#pullrequestreview-374340703", "createdAt": "2020-03-13T14:24:13Z", "commit": {"oid": "c0a1b15287ab16fa64b50e93be5800b9f1b83ba9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNDoyNDoxNFrOF2Fmpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxNDoyNDoxNFrOF2Fmpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI1OTIzOQ==", "bodyText": "Nit: private to be consistent", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9057#discussion_r392259239", "createdAt": "2020-03-13T14:24:14Z", "author": {"login": "conniey"}, "path": "sdk/eventhubs/azure-messaging-eventhubs-checkpointstore-blob/src/samples/java/com/azure/messaging/eventhubs/checkpointstore/blob/EventProcessorWithOlderStorageVersion.java", "diffHunk": "@@ -0,0 +1,86 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.eventhubs.checkpointstore.blob;\n+\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.messaging.eventhubs.EventProcessorClient;\n+import com.azure.messaging.eventhubs.EventProcessorClientBuilder;\n+import com.azure.storage.blob.BlobContainerAsyncClient;\n+import com.azure.storage.blob.BlobContainerClientBuilder;\n+import java.util.concurrent.CountDownLatch;\n+\n+/**\n+ * This sample shows how to setup an Event Processor that uses an older version of blob storage service as\n+ * checkpoint store.\n+ */\n+public class EventProcessorWithOlderStorageVersion {\n+\n+    private static final String STORAGE_CONNECTION_STRING =\"\";\n+    private static final String SAS_TOKEN = \"\";\n+    private static final String CONTAINER_NAME = \"\";\n+\n+    private static final String EH_CONNECTION_STRING = \"\";\n+    private static final String CONSUMER_GROUP = \"\";\n+    public static final String EVENT_HUB_NAME = \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0a1b15287ab16fa64b50e93be5800b9f1b83ba9"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d292761a6495cdd9e85f8af6b579e8d4db21dbda", "author": {"user": {"login": "srnagar", "name": "Srikanta"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d292761a6495cdd9e85f8af6b579e8d4db21dbda", "committedDate": "2020-03-13T19:16:44Z", "message": "Address PR feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2b16f4a9eb9995b87b778a8b7880342c8a6c213", "author": {"user": {"login": "srnagar", "name": "Srikanta"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a2b16f4a9eb9995b87b778a8b7880342c8a6c213", "committedDate": "2020-03-13T19:41:06Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NjQ4NDI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9057#pullrequestreview-375648425", "createdAt": "2020-03-16T23:28:50Z", "commit": {"oid": "a2b16f4a9eb9995b87b778a8b7880342c8a6c213"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQyMzoyODo1MFrOF3JMNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQyMzoyODo1MFrOF3JMNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzM2NjU4MA==", "bodyText": "Consider adding more context to the situation on which a user will need to use this sample. Something like: The following sample can be used if the environment you are targeting supports a different version of Storage Blob SDK than those typically available on Azure. For example, if you are running Event Hubs on an Azure Stack Hub version 2002, the highest available version for the Storage service is version 2017-11-09. In this case, you will need to use the following code to change the Storage service API version to 2017-11-09. For more information on the Azure Storage service versions supported on Azure Stack Hub, please refer to docs.microsoft.com/en-us/azure-stack/user/azure-stack-acs-differences.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9057#discussion_r393366580", "createdAt": "2020-03-16T23:28:50Z", "author": {"login": "jfggdl"}, "path": "sdk/eventhubs/azure-messaging-eventhubs-checkpointstore-blob/src/samples/java/com/azure/messaging/eventhubs/checkpointstore/blob/EventProcessorWithOlderStorageVersion.java", "diffHunk": "@@ -0,0 +1,86 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.eventhubs.checkpointstore.blob;\n+\n+import com.azure.core.http.HttpHeaders;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.messaging.eventhubs.EventProcessorClient;\n+import com.azure.messaging.eventhubs.EventProcessorClientBuilder;\n+import com.azure.storage.blob.BlobContainerAsyncClient;\n+import com.azure.storage.blob.BlobContainerClientBuilder;\n+import java.util.concurrent.CountDownLatch;\n+\n+/**\n+ * This sample shows how to setup an Event Processor that uses an older version of blob storage service as\n+ * checkpoint store.\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2b16f4a9eb9995b87b778a8b7880342c8a6c213"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 823, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}