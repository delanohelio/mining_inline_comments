{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNTE5MzYz", "number": 15430, "title": "Update JSON Patch Functionality", "bodyText": "This PR updates JSON Patch functionality in azure-core-experimental.\n\nAdded support for JsonPatchDocument to accept a JsonSerializer during construction of the class.\nChanged value parameters from JSONified strings to Object.\nChanged handling of value parameters to allow for a JSON null to be serialized as the value to support all scenarios in JSON Patch.\nAdded JsonPatchDocumentSerializer and JsonPatchOperationSerializer to handle serialization of JsonPatchDocument and JsonPatchOperation.\nMade JsonPatchOperation and JsonPatchOperationKind public.\nAdded getJsonPatchOperations to JsonPatchDocument to get a read only list of operations in the document.", "createdAt": "2020-09-21T19:44:52Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15430", "merged": true, "mergeCommit": {"oid": "27fdfd68eb92dd927f38c39c71680a620976d43f"}, "closed": true, "closedAt": "2020-09-23T19:55:25Z", "author": {"login": "alzimmermsft"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLIxxAAH2gAyNDkwNTE5MzYzOjY5OTljOTY1NzMxNjVhNTRiZTVlZTFkYmY4NGMwMWE3Yjk3YWE2Yjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLw7IdAFqTQ5NDkzNDk5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6999c96573165a54be5ee1dbf84c01a7b97aa6b9", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6999c96573165a54be5ee1dbf84c01a7b97aa6b9", "committedDate": "2020-09-21T19:44:00Z", "message": "Release azure-core-experimental 1.0.0-beta.5"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "081e9a8daa6743bc5ef61c3a5fd5e5cfca61431c", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/081e9a8daa6743bc5ef61c3a5fd5e5cfca61431c", "committedDate": "2020-09-21T21:35:12Z", "message": "Merge branch 'master' into AzCore_ReleaseJsonPatchInExperimental"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34a49fcb7f6e57e1c035b01d66373c78f16ac1e9", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/34a49fcb7f6e57e1c035b01d66373c78f16ac1e9", "committedDate": "2020-09-21T22:58:43Z", "message": "Changed value to Object instead of JSON string, added getter for JSON Patch operations contained in the document"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4ac1199e7d8918b51ba3c71714e0199ab0ac3aa", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c4ac1199e7d8918b51ba3c71714e0199ab0ac3aa", "committedDate": "2020-09-21T23:25:24Z", "message": "Fix linting issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNzk0MDMx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15430#pullrequestreview-493794031", "createdAt": "2020-09-22T19:48:43Z", "commit": {"oid": "c4ac1199e7d8918b51ba3c71714e0199ab0ac3aa"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7720bceff35444d8965b5e8f99458e651985d94", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e7720bceff35444d8965b5e8f99458e651985d94", "committedDate": "2020-09-22T21:53:14Z", "message": "Merge branch 'master' into AzCore_ReleaseJsonPatchInExperimental"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28a0e5daf61c8073b198d9830c9ebbfbddb3fc90", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/28a0e5daf61c8073b198d9830c9ebbfbddb3fc90", "committedDate": "2020-09-22T23:39:34Z", "message": "Update JsonPatchDocument to accept JsonSerializer during construction, added support for null in add, replace, and test operations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzOTMwOTUz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15430#pullrequestreview-493930953", "createdAt": "2020-09-23T00:24:17Z", "commit": {"oid": "28a0e5daf61c8073b198d9830c9ebbfbddb3fc90"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwMDoyNDoxN1rOHWQwAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwMDoyNDoxN1rOHWQwAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzEwNTE1Mg==", "bodyText": "Can this return a List<JsonPatchOperation> instead?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15430#discussion_r493105152", "createdAt": "2020-09-23T00:24:17Z", "author": {"login": "srnagar"}, "path": "sdk/core/azure-core-experimental/src/main/java/com/azure/core/experimental/jsonpatch/JsonPatchDocument.java", "diffHunk": "@@ -22,15 +25,44 @@\n     private static final ObjectMapper MAPPER = ((JacksonAdapter) JacksonAdapter.createDefaultSerializerAdapter())\n         .serializer();\n \n+    private static final String ADD = \"add\";\n+    private static final String REMOVE = \"remove\";\n+    private static final String REPLACE = \"replace\";\n+    private static final String MOVE = \"move\";\n+    private static final String COPY = \"copy\";\n+    private static final String TEST = \"test\";\n+\n     private final ClientLogger logger = new ClientLogger(JsonPatchDocument.class);\n \n     private final List<JsonPatchOperation> operations;\n+    private final JsonSerializer serializer;\n \n     /**\n      * Creates a new JSON Patch document.\n      */\n     public JsonPatchDocument() {\n+        this(null);\n+    }\n+\n+    /**\n+     * Creates a new JSON Patch document.\n+     * <p>\n+     * If {@code serializer} isn't specified {@link JacksonAdapter} will be used.\n+     *\n+     * @param serializer The {@link JsonSerializer} that will be used to serialize patch operation values.\n+     */\n+    public JsonPatchDocument(JsonSerializer serializer) {\n         this.operations = new ArrayList<>();\n+        this.serializer = serializer;\n+    }\n+\n+    /**\n+     * Gets the JSON Patch operations in this document.\n+     *\n+     * @return The JSON Patch operations in this document.\n+     */\n+    public List<Object> getJsonPatchOperations() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28a0e5daf61c8073b198d9830c9ebbfbddb3fc90"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0449880fddebecaea0a5b534b0e3bda02294a3bb", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0449880fddebecaea0a5b534b0e3bda02294a3bb", "committedDate": "2020-09-23T17:06:00Z", "message": "Additional changes for JSON Patch support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0OTAxMzMx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15430#pullrequestreview-494901331", "createdAt": "2020-09-23T17:45:58Z", "commit": {"oid": "0449880fddebecaea0a5b534b0e3bda02294a3bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23857832273b82611154a7d300574ba8c0f5ad5a", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/23857832273b82611154a7d300574ba8c0f5ad5a", "committedDate": "2020-09-23T17:57:00Z", "message": "Fix possible exception in toString and suppress Checkstyles for having external dependencies in public API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0OTM0OTk2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15430#pullrequestreview-494934996", "createdAt": "2020-09-23T18:30:26Z", "commit": {"oid": "23857832273b82611154a7d300574ba8c0f5ad5a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxODozMDoyNlrOHW7U7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxODozMDoyNlrOHW7U7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzgwMjczMg==", "bodyText": "I think switching the behavior of this parameter based on ctor parameter might be a little confusing.\nImagine you were replacing some trivial properties in the beginning but now wanting to pass a serialized object into another property. Passing the serializer into ctor would change the behavior of all existing code.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15430#discussion_r493802732", "createdAt": "2020-09-23T18:30:26Z", "author": {"login": "pakrym"}, "path": "sdk/core/azure-core-experimental/src/main/java/com/azure/core/experimental/jsonpatch/JsonPatchDocument.java", "diffHunk": "@@ -65,19 +87,17 @@ public JsonPatchDocument appendAdd(String path, String rawJsonValue) {\n      *\n      * <p><strong>Code Samples</strong></p>\n      *\n-     * {@codesnippet com.azure.core.experimental.jsonpatch.JsonPatchDocument.appendReplace#String-String}\n+     * {@codesnippet com.azure.core.experimental.jsonpatch.JsonPatchDocument.appendReplace#String-Object}\n      *\n      * @param path The path to replace.\n-     * @param rawJsonValue The raw JSON value to use as the replacement.\n+     * @param value The value to use as the replacement.\n      * @return The updated JsonPatchDocument object.\n-     * @throws NullPointerException If {@code path} or {@code rawJsonValue} is null.\n+     * @throws NullPointerException If {@code path} is null.\n      */\n-    public JsonPatchDocument appendReplace(String path, String rawJsonValue) {\n+    public JsonPatchDocument appendReplace(String path, Object value) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23857832273b82611154a7d300574ba8c0f5ad5a"}, "originalPosition": 94}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3297, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}