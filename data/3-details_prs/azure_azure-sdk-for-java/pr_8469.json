{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5MjY5MDk2", "number": 8469, "title": "test on one resource group", "bodyText": "This is a follow up PR of live test setup.\nIn this PR, we are fetching the resource group from ARM. If somehow ARM resource group does not exist. We create the resource group using management plane.  (It is generally for customer use.)\nSince there is only one resource group for the entire tests, we do not delete resource group for every test. We depends on Remove resources step in pipeline.", "createdAt": "2020-02-24T22:43:33Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8469", "merged": true, "mergeCommit": {"oid": "057090ed59ebf77a82d4a0787b7dedac1a678cdc"}, "closed": true, "closedAt": "2020-02-26T21:31:12Z", "author": {"login": "sima-zhu"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH3zp0gH2gAyMzc5MjY5MDk2OmJiMDViYjEwOWY2YTIyYjUwYWVlOWEzOGY2NjMzNjkxZGZmMmYxNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcINgFMgFqTM2NTI1MTA2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bb05bb109f6a22b50aee9a38f6633691dff2f173", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bb05bb109f6a22b50aee9a38f6633691dff2f173", "committedDate": "2020-02-25T20:04:45Z", "message": "Added empty json"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "990d96c09ad6f505308d4583e8717f261c91b875", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/990d96c09ad6f505308d4583e8717f261c91b875", "committedDate": "2020-02-24T22:42:26Z", "message": "test on one resource group"}, "afterCommit": {"oid": "bb05bb109f6a22b50aee9a38f6633691dff2f173", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bb05bb109f6a22b50aee9a38f6633691dff2f173", "committedDate": "2020-02-25T20:04:45Z", "message": "Added empty json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cfc9c52dbfc386565a35f3ccc6e9a30407515f6", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9cfc9c52dbfc386565a35f3ccc6e9a30407515f6", "committedDate": "2020-02-25T20:11:44Z", "message": "add minimum set of json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cec52aa4323b591e755180140344368761f2d05", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2cec52aa4323b591e755180140344368761f2d05", "committedDate": "2020-02-25T20:34:55Z", "message": "some changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a1cac604727ce9c9f049b802655fc047adfc293", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8a1cac604727ce9c9f049b802655fc047adfc293", "committedDate": "2020-02-25T20:44:45Z", "message": "some changes on create resource"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NDQ2MzU5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8469#pullrequestreview-364446359", "createdAt": "2020-02-25T21:04:30Z", "commit": {"oid": "8a1cac604727ce9c9f049b802655fc047adfc293"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMTowNDozMFrOFuVH0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMTowODoxNVrOFuVO3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDEyNDg4MA==", "bodyText": "This isn't needed, this is only required when using secrets retrieved from KeyVault or the environment configuration doesn't match what is expected in the tests.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8469#discussion_r384124880", "createdAt": "2020-02-25T21:04:30Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/tests.yml", "diffHunk": "@@ -10,6 +10,7 @@ jobs:\n       MaxParallel: 3\n       EnvVars:\n         AZURE_TEST_MODE: LIVE\n+        AZURE_RESOURCEGROUP_NAME: ${AZURE_RESOURCEGROUP_NAME}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a1cac604727ce9c9f049b802655fc047adfc293"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDEyNjMyOQ==", "bodyText": "We may need to create a resource group name, will need to handle logic slightly differently here.\nWhen tests are running in an Azure Pipeline we should trust that the resource group name is associated to an existing resource group. If there isn't a resource group environment variable we need to create the resource group, this will be needed when running tests locally. Additionally, running tests locally could support using the environment variable for resource group but it shouldn't create the group, if it doesn't exist it is on the person running the tests but we need to document this well.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8469#discussion_r384126329", "createdAt": "2020-02-25T21:07:27Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/test/java/com/azure/search/test/environment/setup/AzureSearchResources.java", "diffHunk": "@@ -113,9 +115,10 @@ public void deleteService() {\n     /**\n      * Creates the Resource Group in Azure. This should be run at @BeforeAll\n      */\n-    public void createResourceGroup(TestResourceNamer testResourceNamer) {\n+    public void createResourceGroup() {\n         if (resourceGroup == null) {\n-            String resourceGroupName = testResourceNamer.randomName(RESOURCE_GROUP_NAME_PREFIX, 24);\n+            String resourceGroupName = Configuration.getGlobalConfiguration().get(AZURE_RESOURCEGROUP_NAME);\n+            //String resourceGroupName = testResourceNamer.randomName(RESOURCE_GROUP_NAME_PREFIX, 24);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a1cac604727ce9c9f049b802655fc047adfc293"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDEyNjY4Nw==", "bodyText": "Any particular reason we are adding a call the resource group creation but removing one to group deletion?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8469#discussion_r384126687", "createdAt": "2020-02-25T21:08:15Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/test/java/com/azure/search/SearchServiceTestBase.java", "diffHunk": "@@ -113,11 +113,12 @@\n     @BeforeAll\n     public static void beforeAll() {\n         initializeAzureResources();\n+        azureSearchResources.createResourceGroup();\n     }\n \n     @AfterAll\n     public static void afterAll() {\n-        azureSearchResources.deleteResourceGroup();\n+        //azureSearchResources.deleteResourceGroup();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a1cac604727ce9c9f049b802655fc047adfc293"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b15e2155608636a5515d9cfaa6d6d2c5df8bb8cd", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b15e2155608636a5515d9cfaa6d6d2c5df8bb8cd", "committedDate": "2020-02-25T21:31:28Z", "message": "change location for resource group"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bcaa4ea19423a3706ba2c9437e134f2afc150ee", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4bcaa4ea19423a3706ba2c9437e134f2afc150ee", "committedDate": "2020-02-25T21:32:30Z", "message": "Added location param"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00854147173b16a75ff7321bde7e4ee85815c1e4", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/00854147173b16a75ff7321bde7e4ee85815c1e4", "committedDate": "2020-02-25T21:37:44Z", "message": "revert the location"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e0195f8996657c0fa6f665bb59d78dc6fb09693", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5e0195f8996657c0fa6f665bb59d78dc6fb09693", "committedDate": "2020-02-25T22:15:23Z", "message": "Clean the code."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NTMxMzIw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8469#pullrequestreview-364531320", "createdAt": "2020-02-25T23:43:57Z", "commit": {"oid": "5e0195f8996657c0fa6f665bb59d78dc6fb09693"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMzo0Mzo1N1rOFuZa3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMzo0Mzo1N1rOFuZa3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE5NTI5Mw==", "bodyText": "Bug opened for this workaround: Azure/azure-sdk#1042", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8469#discussion_r384195293", "createdAt": "2020-02-25T23:43:57Z", "author": {"login": "danieljurek"}, "path": "sdk/search/test-resources.json", "diffHunk": "@@ -0,0 +1,8 @@\n+{\n+    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e0195f8996657c0fa6f665bb59d78dc6fb09693"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MjUxMDM1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8469#pullrequestreview-365251035", "createdAt": "2020-02-26T21:21:14Z", "commit": {"oid": "5e0195f8996657c0fa6f665bb59d78dc6fb09693"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MjUxMDY4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8469#pullrequestreview-365251068", "createdAt": "2020-02-26T21:21:17Z", "commit": {"oid": "5e0195f8996657c0fa6f665bb59d78dc6fb09693"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1017, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}