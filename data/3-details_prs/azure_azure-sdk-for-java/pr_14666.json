{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2NTQ2MDUw", "number": 14666, "title": "Add implementation and API design for ADT component APIs", "bodyText": "", "createdAt": "2020-08-31T21:17:26Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666", "merged": true, "mergeCommit": {"oid": "ed9952a0c3fef018ada36ab052c7a802a45127e9"}, "closed": true, "closedAt": "2020-09-01T19:18:15Z", "author": {"login": "timtay-microsoft"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdEbhy8gBqjM3MTIwOTUzMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEsUbUAFqTQ4MDA0MDg0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "450871c866ee4f6433f7810647ffddada239f653", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/450871c866ee4f6433f7810647ffddada239f653", "committedDate": "2020-08-31T21:44:03Z", "message": "to squash"}, "afterCommit": {"oid": "ef5226559855b42c918ede7f6e58e6ee61421ed0", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ef5226559855b42c918ede7f6e58e6ee61421ed0", "committedDate": "2020-08-31T23:35:15Z", "message": "Add implementation and API design for component APIs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5MTYxMjE5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#pullrequestreview-479161219", "createdAt": "2020-09-01T00:26:36Z", "commit": {"oid": "f2a140fd8764a25d7fdabbbe65c9e705cc66b837"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQwMDoyNjozN1rOHKPHlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQwMDoyNjozN1rOHKPHlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQ5NTUxMA==", "bodyText": "This will not be needed since you have the one with maximal overload below.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r480495510", "createdAt": "2020-09-01T00:26:37Z", "author": {"login": "bikamani"}, "path": "sdk/digitaltwins/azure-digitaltwins-core/API design.md", "diffHunk": "@@ -676,16 +676,181 @@ When updating a component, the patch string follows the below format\n </details>\n \n \n-<details>\n-<summary><b>APIs</b></summary>\n+<details><summary><b>Async APIs</b></summary>\n \n+These APIs are invoked via DigitalTwinsAsyncClient.\n \n ```java\n-TODO:\n+/**\n+ * Get a component of a digital twin.\n+ * @param digitalTwinId The Id of the digital twin to get the component from.\n+ * @param componentPath The path of the component on the digital twin to retrieve.\n+ * @return The application/json string representing the component of the digital twin.\n+ */\n+@ServiceMethod(returns = ReturnType.SINGLE)\n+public Mono<String> getComponent(String digitalTwinId, String componentPath)\n+\n+/**\n+ * Get a component of a digital twin.\n+ * @param digitalTwinId The Id of the digital twin to get the component from.\n+ * @param componentPath The path of the component on the digital twin to retrieve.\n+ * @return A {@link DigitalTwinsResponse} containing the application/json string representing the component of the digital twin.\n+ */\n+@ServiceMethod(returns = ReturnType.SINGLE)\n+public Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath)\n+\n+/**\n+ * Get a component of a digital twin.\n+ * @param digitalTwinId The Id of the digital twin to get the component from.\n+ * @param componentPath The path of the component on the digital twin to retrieve.\n+ * @param clazz The class to deserialize the application/json component into.\n+ * @param <T> The generic type to deserialize the component to.\n+ * @return The deserialized application/json object representing the component of the digital twin.\n+ */\n+@ServiceMethod(returns = ReturnType.SINGLE)\n+public <T> Mono<T> getComponent(String digitalTwinId, String componentPath, Class<T> clazz)\n+\n+/**\n+ * Get a component of a digital twin.\n+ * @param digitalTwinId The Id of the digital twin to get the component from.\n+ * @param componentPath The path of the component on the digital twin to retrieve.\n+ * @param clazz The class to deserialize the application/json component into.\n+ * @param <T> The generic type to deserialize the component to.\n+ * @return A {@link DigitalTwinsResponse} containing the deserialized application/json object representing the component of the digital twin.\n+ */\n+@ServiceMethod(returns = ReturnType.SINGLE)\n+public <T> Mono<DigitalTwinsResponse<T>> getComponentWithResponse(String digitalTwinId, String componentPath, Class<T> clazz)\n+\n+/**\n+ * Patch a component on a digital twin.\n+ * @param digitalTwinId The Id of the digital twin that has the component to patch.\n+ * @param componentPath The path of the component on the digital twin.\n+ * @param componentUpdateOperations The application json patch to apply to the component. See {@link com.azure.digitaltwins.core.util.UpdateOperationUtility} for building\n+ *                                  this argument.\n+ */\n+@ServiceMethod(returns = ReturnType.SINGLE)\n+public Mono<Void> updateComponent(String digitalTwinId, String componentPath, List<Object> componentUpdateOperations)\n+\n+/**\n+ * Patch a component on a digital twin.\n+ * @param digitalTwinId The Id of the digital twin that has the component to patch.\n+ * @param componentPath The path of the component on the digital twin.\n+ * @param componentUpdateOperations The application json patch to apply to the component. See {@link com.azure.digitaltwins.core.util.UpdateOperationUtility} for building\n+ *                                  this argument.\n+ * @param requestOptions The optional parameters for this request.\n+ * @return An empty Mono.\n+ */\n+@ServiceMethod(returns = ReturnType.SINGLE)\n+public Mono<Void> updateComponent(String digitalTwinId, String componentPath, List<Object> componentUpdateOperations, RequestOptions requestOptions)\n+\n+/**\n+ * Patch a component on a digital twin.\n+ * @param digitalTwinId The Id of the digital twin that has the component to patch.\n+ * @param componentPath The path of the component on the digital twin.\n+ * @param componentUpdateOperations The application json patch to apply to the component. See {@link com.azure.digitaltwins.core.util.UpdateOperationUtility} for building\n+ *                                  this argument.\n+ * @return A {@link DigitalTwinsResponse} containing an empty Mono.\n+ */\n+@ServiceMethod(returns = ReturnType.SINGLE)\n+public Mono<DigitalTwinsResponse<Void>> updateComponentWithResponse(String digitalTwinId, String componentPath, List<Object> componentUpdateOperations)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2a140fd8764a25d7fdabbbe65c9e705cc66b837"}, "originalPosition": 83}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae5efe5b661bbadeea885dd0d9a2001d9861e0eb", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ae5efe5b661bbadeea885dd0d9a2001d9861e0eb", "committedDate": "2020-09-01T17:54:51Z", "message": "to squash"}, "afterCommit": {"oid": "5699d2e296a2b1a3c34f1f1272ea49eb105b5d10", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5699d2e296a2b1a3c34f1f1272ea49eb105b5d10", "committedDate": "2020-09-01T17:56:39Z", "message": "Add implementation and API design for component APIs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "committedDate": "2020-09-01T17:58:21Z", "message": "Add implementation and API design for component APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5699d2e296a2b1a3c34f1f1272ea49eb105b5d10", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5699d2e296a2b1a3c34f1f1272ea49eb105b5d10", "committedDate": "2020-09-01T17:56:39Z", "message": "Add implementation and API design for component APIs"}, "afterCommit": {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2bff025a6aaf2f7577a21fb0668ddae626b54bf9", "committedDate": "2020-09-01T17:58:21Z", "message": "Add implementation and API design for component APIs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTkwNjA2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#pullrequestreview-479990606", "createdAt": "2020-09-01T18:01:40Z", "commit": {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowMTo0MFrOHLCK2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowMTo0MFrOHLCK2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMTkzMQ==", "bodyText": "can be a map instead", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481331931", "createdAt": "2020-09-01T18:01:40Z", "author": {"login": "abhipsaMisra"}, "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsAsyncClient.java", "diffHunk": "@@ -716,4 +717,118 @@ public HttpPipeline getHttpPipeline() {\n \n         return protocolLayer.getDigitalTwinModels().updateWithResponseAsync(modelId, updateOperation, context);\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<String> getComponent(String digitalTwinId, String componentPath) {\n+        return getComponentWithResponse(digitalTwinId, componentPath)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTkxNzE0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#pullrequestreview-479991714", "createdAt": "2020-09-01T18:03:16Z", "commit": {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowMzoxN1rOHLCOIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowMzoxN1rOHLCOIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMjc3MQ==", "bodyText": "We should add a log statement here, before returning the error.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481332771", "createdAt": "2020-09-01T18:03:17Z", "author": {"login": "abhipsaMisra"}, "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsAsyncClient.java", "diffHunk": "@@ -716,4 +717,118 @@ public HttpPipeline getHttpPipeline() {\n \n         return protocolLayer.getDigitalTwinModels().updateWithResponseAsync(modelId, updateOperation, context);\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<String> getComponent(String digitalTwinId, String componentPath) {\n+        return getComponentWithResponse(digitalTwinId, componentPath)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return A {@link DigitalTwinsResponse} containing the application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath) {\n+        return withContext(context -> getComponentWithResponse(digitalTwinId, componentPath, context));\n+    }\n+\n+    Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath, Context context) {\n+        return protocolLayer.getDigitalTwins().getComponentWithResponseAsync(digitalTwinId, componentPath, context)\n+            .flatMap(response -> {\n+                try {\n+                    String jsonResponse = mapper.writeValueAsString(response.getValue());\n+                    DigitalTwinsResponseHeaders twinHeaders = mapper.convertValue(response.getDeserializedHeaders(), DigitalTwinsResponseHeaders.class);\n+                    return Mono.just(new DigitalTwinsResponse<>(response.getRequest(), response.getStatusCode(), response.getHeaders(), jsonResponse, twinHeaders));\n+                } catch (JsonProcessingException e) {\n+                    return Mono.error(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTkyMTM4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#pullrequestreview-479992138", "createdAt": "2020-09-01T18:03:53Z", "commit": {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowMzo1M1rOHLCPXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowMzo1M1rOHLCPXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzMzA4Nw==", "bodyText": "this can also be .map", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481333087", "createdAt": "2020-09-01T18:03:53Z", "author": {"login": "abhipsaMisra"}, "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsAsyncClient.java", "diffHunk": "@@ -716,4 +717,118 @@ public HttpPipeline getHttpPipeline() {\n \n         return protocolLayer.getDigitalTwinModels().updateWithResponseAsync(modelId, updateOperation, context);\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<String> getComponent(String digitalTwinId, String componentPath) {\n+        return getComponentWithResponse(digitalTwinId, componentPath)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return A {@link DigitalTwinsResponse} containing the application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath) {\n+        return withContext(context -> getComponentWithResponse(digitalTwinId, componentPath, context));\n+    }\n+\n+    Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath, Context context) {\n+        return protocolLayer.getDigitalTwins().getComponentWithResponseAsync(digitalTwinId, componentPath, context)\n+            .flatMap(response -> {\n+                try {\n+                    String jsonResponse = mapper.writeValueAsString(response.getValue());\n+                    DigitalTwinsResponseHeaders twinHeaders = mapper.convertValue(response.getDeserializedHeaders(), DigitalTwinsResponseHeaders.class);\n+                    return Mono.just(new DigitalTwinsResponse<>(response.getRequest(), response.getStatusCode(), response.getHeaders(), jsonResponse, twinHeaders));\n+                } catch (JsonProcessingException e) {\n+                    return Mono.error(e);\n+                }\n+            });\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @param clazz The class to deserialize the application/json component into.\n+     * @param <T> The generic type to deserialize the component to.\n+     * @return The deserialized application/json object representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public <T> Mono<T> getComponent(String digitalTwinId, String componentPath, Class<T> clazz) {\n+        return getComponentWithResponse(digitalTwinId, componentPath, clazz)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTkzNjc2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#pullrequestreview-479993676", "createdAt": "2020-09-01T18:06:02Z", "commit": {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowNjowMlrOHLCUHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODowNjowMlrOHLCUHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzNDMwMw==", "bodyText": "Good point, I believe I've missed this check in the update relationship API, would you mind adding this there as well?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481334303", "createdAt": "2020-09-01T18:06:02Z", "author": {"login": "abhipsaMisra"}, "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsAsyncClient.java", "diffHunk": "@@ -716,4 +717,118 @@ public HttpPipeline getHttpPipeline() {\n \n         return protocolLayer.getDigitalTwinModels().updateWithResponseAsync(modelId, updateOperation, context);\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<String> getComponent(String digitalTwinId, String componentPath) {\n+        return getComponentWithResponse(digitalTwinId, componentPath)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return A {@link DigitalTwinsResponse} containing the application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath) {\n+        return withContext(context -> getComponentWithResponse(digitalTwinId, componentPath, context));\n+    }\n+\n+    Mono<DigitalTwinsResponse<String>> getComponentWithResponse(String digitalTwinId, String componentPath, Context context) {\n+        return protocolLayer.getDigitalTwins().getComponentWithResponseAsync(digitalTwinId, componentPath, context)\n+            .flatMap(response -> {\n+                try {\n+                    String jsonResponse = mapper.writeValueAsString(response.getValue());\n+                    DigitalTwinsResponseHeaders twinHeaders = mapper.convertValue(response.getDeserializedHeaders(), DigitalTwinsResponseHeaders.class);\n+                    return Mono.just(new DigitalTwinsResponse<>(response.getRequest(), response.getStatusCode(), response.getHeaders(), jsonResponse, twinHeaders));\n+                } catch (JsonProcessingException e) {\n+                    return Mono.error(e);\n+                }\n+            });\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @param clazz The class to deserialize the application/json component into.\n+     * @param <T> The generic type to deserialize the component to.\n+     * @return The deserialized application/json object representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public <T> Mono<T> getComponent(String digitalTwinId, String componentPath, Class<T> clazz) {\n+        return getComponentWithResponse(digitalTwinId, componentPath, clazz)\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));\n+    }\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @param clazz The class to deserialize the application/json component into.\n+     * @param <T> The generic type to deserialize the component to.\n+     * @return A {@link DigitalTwinsResponse} containing the deserialized application/json object representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public <T> Mono<DigitalTwinsResponse<T>> getComponentWithResponse(String digitalTwinId, String componentPath, Class<T> clazz) {\n+        return withContext(context -> getComponentWithResponse(digitalTwinId, componentPath, clazz, context));\n+    }\n+\n+    <T> Mono<DigitalTwinsResponse<T>> getComponentWithResponse(String digitalTwinId, String componentPath, Class<T> clazz, Context context) {\n+        return protocolLayer.getDigitalTwins().getComponentWithResponseAsync(digitalTwinId, componentPath, context)\n+            .flatMap(response -> {\n+                T genericResponse = mapper.convertValue(response.getValue(), clazz);\n+                DigitalTwinsResponseHeaders twinHeaders = mapper.convertValue(response.getDeserializedHeaders(), DigitalTwinsResponseHeaders.class);\n+                return Mono.just(new DigitalTwinsResponse<T>(response.getRequest(), response.getStatusCode(), response.getHeaders(), genericResponse, twinHeaders));\n+            });\n+    }\n+\n+    /**\n+     * Patch a component on a digital twin.\n+     * @param digitalTwinId The Id of the digital twin that has the component to patch.\n+     * @param componentPath The path of the component on the digital twin.\n+     * @param componentUpdateOperations The application json patch to apply to the component. See {@link com.azure.digitaltwins.core.util.UpdateOperationUtility} for building\n+     *                                  this argument.\n+     * @return An empty Mono.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Void> updateComponent(String digitalTwinId, String componentPath, List<Object> componentUpdateOperations) {\n+        return updateComponentWithResponse(digitalTwinId, componentPath, componentUpdateOperations, new UpdateComponentRequestOptions())\n+            .flatMap(response -> Mono.justOrEmpty(response.getValue()));\n+    }\n+\n+    /**\n+     * Patch a component on a digital twin.\n+     * @param digitalTwinId The Id of the digital twin that has the component to patch.\n+     * @param componentPath The path of the component on the digital twin.\n+     * @param componentUpdateOperations The application json patch to apply to the component. See {@link com.azure.digitaltwins.core.util.UpdateOperationUtility} for building\n+     *                                  this argument.\n+     * @param requestOptions The optional parameters for this request.\n+     * @return A {@link DigitalTwinsResponse} containing an empty Mono.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<DigitalTwinsResponse<Void>> updateComponentWithResponse(String digitalTwinId, String componentPath, List<Object> componentUpdateOperations, UpdateComponentRequestOptions requestOptions) {\n+        return withContext(context -> updateComponentWithResponse(digitalTwinId, componentPath, componentUpdateOperations, requestOptions, context));\n+    }\n+\n+    Mono<DigitalTwinsResponse<Void>> updateComponentWithResponse(String digitalTwinId, String componentPath, List<Object> componentUpdateOperations, UpdateComponentRequestOptions requestOptions, Context context) {\n+        String ifMatch = requestOptions != null ? requestOptions.getIfMatch() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2bff025a6aaf2f7577a21fb0668ddae626b54bf9"}, "originalPosition": 118}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c30ec743ff8983ce9043a0493af7ba18ce88c421", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c30ec743ff8983ce9043a0493af7ba18ce88c421", "committedDate": "2020-09-01T18:09:52Z", "message": "cr comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef022bb338b5e3660e310d2905691c357920ed67", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ef022bb338b5e3660e310d2905691c357920ed67", "committedDate": "2020-09-01T18:12:25Z", "message": "cr comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMDAwNDYx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#pullrequestreview-480000461", "createdAt": "2020-09-01T18:16:00Z", "commit": {"oid": "c30ec743ff8983ce9043a0493af7ba18ce88c421"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODoxNjowMFrOHLCovw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODoxNjowMFrOHLCovw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTMzOTU4Mw==", "bodyText": "We've been following the format where the async APIs call the async overloads, and the max overload API calls the PL.\nSimilarly, the sync APIs call the sync overloads, and the max overload sync API calls  the async API.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481339583", "createdAt": "2020-09-01T18:16:00Z", "author": {"login": "abhipsaMisra"}, "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsClient.java", "diffHunk": "@@ -381,4 +381,85 @@ public void decommissionModel(String modelId) {\n     public Response<Void> decommissionModelWithResponse(String modelId, Context context) {\n         return digitalTwinsAsyncClient.decommissionModelWithResponse(modelId, context).block();\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public String getComponent(String digitalTwinId, String componentPath) {\n+        return digitalTwinsAsyncClient.getComponent(digitalTwinId, componentPath).block();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c30ec743ff8983ce9043a0493af7ba18ce88c421"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMDAxMTk2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#pullrequestreview-480001196", "createdAt": "2020-09-01T18:17:03Z", "commit": {"oid": "c30ec743ff8983ce9043a0493af7ba18ce88c421"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODoxNzowM1rOHLCrCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODoxNzowM1rOHLCrCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MDE3MA==", "bodyText": "nit: this can be replaced by a method reference .map(DigitalTwinsResponse::getValue).", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481340170", "createdAt": "2020-09-01T18:17:03Z", "author": {"login": "abhipsaMisra"}, "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DigitalTwinsAsyncClient.java", "diffHunk": "@@ -716,4 +721,119 @@ public HttpPipeline getHttpPipeline() {\n \n         return protocolLayer.getDigitalTwinModels().updateWithResponseAsync(modelId, updateOperation, context);\n     }\n+\n+    //==================================================================================================================================================\n+    // Component APIs\n+    //==================================================================================================================================================\n+\n+    /**\n+     * Get a component of a digital twin.\n+     * @param digitalTwinId The Id of the digital twin to get the component from.\n+     * @param componentPath The path of the component on the digital twin to retrieve.\n+     * @return The application/json string representing the component of the digital twin.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<String> getComponent(String digitalTwinId, String componentPath) {\n+        return getComponentWithResponse(digitalTwinId, componentPath)\n+            .map(response -> response.getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c30ec743ff8983ce9043a0493af7ba18ce88c421"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMDAyOTU0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#pullrequestreview-480002954", "createdAt": "2020-09-01T18:19:34Z", "commit": {"oid": "ef022bb338b5e3660e310d2905691c357920ed67"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODoxOTozNVrOHLCwxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxODoxOTozNVrOHLCwxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM0MTYzNw==", "bodyText": "Would you mind adding a similar class for the update relationship request options as well, and changing the API signature to take in the new inherited type?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481341637", "createdAt": "2020-09-01T18:19:35Z", "author": {"login": "abhipsaMisra"}, "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/UpdateComponentRequestOptions.java", "diffHunk": "@@ -0,0 +1,16 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.digitaltwins.core;\n+\n+\n+import java.util.List;\n+\n+/**\n+ * Optional settings that are specific to calls to {@link DigitalTwinsClient#updateComponent(String, String, List)} and its overloads.\n+ */\n+public class UpdateComponentRequestOptions extends RequestOptions {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef022bb338b5e3660e310d2905691c357920ed67"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMDAzOTEw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#pullrequestreview-480003910", "createdAt": "2020-09-01T18:20:59Z", "commit": {"oid": "ef022bb338b5e3660e310d2905691c357920ed67"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa61af8b84482863e25414219adeacd8a128de8c", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fa61af8b84482863e25414219adeacd8a128de8c", "committedDate": "2020-09-01T18:25:47Z", "message": "cr comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e14195ef7a5d458ac1289080a0b5313d790b1dab", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e14195ef7a5d458ac1289080a0b5313d790b1dab", "committedDate": "2020-09-01T18:44:36Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45c8cf948a8321130e384c6c827820698404ecb6", "author": {"user": {"login": "timtay-microsoft", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/45c8cf948a8321130e384c6c827820698404ecb6", "committedDate": "2020-09-01T18:57:36Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMDQwODQz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#pullrequestreview-480040843", "createdAt": "2020-09-01T19:11:04Z", "commit": {"oid": "45c8cf948a8321130e384c6c827820698404ecb6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxOToxMTowNFrOHLEnXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQxOToxMTowNFrOHLEnXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM3MTk5Nw==", "bodyText": "Ah, is this because of the need for fluent getters and setters?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14666#discussion_r481371997", "createdAt": "2020-09-01T19:11:04Z", "author": {"login": "abhipsaMisra"}, "path": "sdk/digitaltwins/azure-digitaltwins-core/src/main/java/com/azure/digitaltwins/core/DeleteRelationshipRequestOptions.java", "diffHunk": "@@ -0,0 +1,21 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.digitaltwins.core;\n+\n+\n+import java.util.List;\n+\n+/**\n+ * Optional settings that are specific to calls to {@link DigitalTwinsClient#updateComponent(String, String, List)} and its overloads.\n+ */\n+public class DeleteRelationshipRequestOptions extends RequestOptions {\n+    // This class exists to be added to later if the deleteRelationship APIs get a new optional parameter in later service\n+    // API versions and so that we don't have to expose that new optional parameter for other APIs like deleteDigitalTwin\n+\n+    @Override\n+    public DeleteRelationshipRequestOptions setIfMatch(String ifMatch) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45c8cf948a8321130e384c6c827820698404ecb6"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4998, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}