{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1MjgzODQ1", "number": 14587, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzo0Mjo0NlrOEdv_jQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzo0NDoxNVrOEdwC5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NjMwNDc3OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzo0Mjo0N1rOHJGT2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzo0Mjo0N1rOHJGT2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMwMjYxOQ==", "bodyText": "I would throw instead of just logging it.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#discussion_r479302619", "createdAt": "2020-08-28T13:42:47Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -447,13 +439,18 @@ private static String getEntityPath(ClientLogger logger, MessagingEntityType ent\n                     new IllegalArgumentException(\"Unknown entity type: \" + entityType));\n         }\n \n-        return entityPath;\n-    }\n+        switch (subQueue) {\n+            case NONE:\n+            case TRANSFER_QUEUE:\n+                break;\n+            case DEAD_LETTER_QUEUE:\n+                entityPath += \"/$deadletterqueue\";\n+                break;\n+            default:\n+                logger.warning(\"Unsupported value of subqueue type {}.\", subQueue);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NjMwODc0OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzo0MzoyN1rOHJGWdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODoyNzozNFrOHJQdgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMwMzI4Nw==", "bodyText": "Why none? Don't we have some parameter user's set?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#discussion_r479303287", "createdAt": "2020-08-28T13:43:27Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -716,7 +713,8 @@ public ServiceBusSessionReceiverClientBuilder topicName(String topicName) {\n         public ServiceBusReceiverAsyncClient buildAsyncClient() {\n             final MessagingEntityType entityType = validateEntityPaths(logger, connectionStringEntityName, topicName,\n                 queueName);\n-            final String entityPath = getEntityPath(logger, entityType, queueName, topicName, subscriptionName);\n+            final String entityPath = getEntityPath(logger, entityType, queueName, topicName, subscriptionName,\n+                SubQueue.NONE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ2ODkzMQ==", "bodyText": "Any sub queue are accessed via non-session receiver, confirmed with dotnet also.\nThus we are not exposing subQueue() in session receiver builder. That is why I am passing NONE.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#discussion_r479468931", "createdAt": "2020-08-28T18:27:34Z", "author": {"login": "hemanttanwar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -716,7 +713,8 @@ public ServiceBusSessionReceiverClientBuilder topicName(String topicName) {\n         public ServiceBusReceiverAsyncClient buildAsyncClient() {\n             final MessagingEntityType entityType = validateEntityPaths(logger, connectionStringEntityName, topicName,\n                 queueName);\n-            final String entityPath = getEntityPath(logger, entityType, queueName, topicName, subscriptionName);\n+            final String entityPath = getEntityPath(logger, entityType, queueName, topicName, subscriptionName,\n+                SubQueue.NONE);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMwMzI4Nw=="}, "originalCommit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "originalPosition": 67}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NjMxMDc3OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/models/SubQueue.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzo0Mzo0OFrOHJGX0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzo0Mzo0OFrOHJGX0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMwMzYzNQ==", "bodyText": "nit: empty line.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#discussion_r479303635", "createdAt": "2020-08-28T13:43:48Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/models/SubQueue.java", "diffHunk": "@@ -0,0 +1,31 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus.models;\n+\n+import com.azure.messaging.servicebus.ServiceBusReceiverAsyncClient;\n+import com.azure.messaging.servicebus.ServiceBusReceiverClient;\n+\n+/**\n+ * Defines values for sub queue type.\n+ */\n+public enum SubQueue {\n+    /** Connect to the default entity (directly to the queue or subscription) **/\n+    NONE,\n+\n+    /**\n+     * Azure Service Bus queues and topic subscriptions provide a secondary subqueue, called a dead-letter queue (DLQ).\n+     * The dead-letter queue doesn't need to be explicitly created and can't be deleted or otherwise managed\n+     * independent of the main entity.\n+     * <p>\n+     * This is builder for creating  {@link ServiceBusReceiverClient} and {@link ServiceBusReceiverAsyncClient} to\n+     * consume dead-letter messages from Service Bus entity.\n+     */\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5NjMxMzM0OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzo0NDoxNVrOHJGZeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxODoyODoxMVrOHJQelg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMwNDA1OA==", "bodyText": "Tests?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#discussion_r479304058", "createdAt": "2020-08-28T13:44:15Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "diffHunk": "@@ -326,13 +326,14 @@ Azure Service Bus queues and topic subscriptions provide a secondary sub-queue,\n The dead-letter queue doesn't need to be explicitly created and can't be deleted or otherwise managed independent ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ2OTIwNg==", "bodyText": "added unit test ServiceBusClientBuilderTest.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#discussion_r479469206", "createdAt": "2020-08-28T18:28:11Z", "author": {"login": "hemanttanwar"}, "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "diffHunk": "@@ -326,13 +326,14 @@ Azure Service Bus queues and topic subscriptions provide a secondary sub-queue,\n The dead-letter queue doesn't need to be explicitly created and can't be deleted or otherwise managed independent ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMwNDA1OA=="}, "originalCommit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1464, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}