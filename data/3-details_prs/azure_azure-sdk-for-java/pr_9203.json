{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNjkyODY4", "number": 9203, "title": "Use custom serialization and deserialization to flatten regexFlags.", "bodyText": "Working on adding tests.", "createdAt": "2020-03-18T22:18:23Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203", "merged": true, "mergeCommit": {"oid": "55d9fa87fac5052b6012dcce1b5d972d952dec22"}, "closed": true, "closedAt": "2020-03-26T16:45:45Z", "author": {"login": "sima-zhu"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPAsg3AFqTM3NzMzNDg2Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRRFREAH2gAyMzkwNjkyODY4OmE5ZDMzZjIzZWMwMWY3MDIxYzEwMjljYWVlMzYyY2Q2Y2ZhYmNlZDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzM0ODY2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#pullrequestreview-377334866", "createdAt": "2020-03-19T00:23:34Z", "commit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMDoyMzozNFrOF4bvfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMDoyMzozNFrOF4bvfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDcxOTEwMg==", "bodyText": "This isn't marked as a Java file", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r394719102", "createdAt": "2020-03-19T00:23:34Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/util/RegexFlagsUtils", "diffHunk": "@@ -0,0 +1,24 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.util;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzQ2NDA2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#pullrequestreview-377346406", "createdAt": "2020-03-19T01:01:27Z", "commit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMTowMToyN1rOF4cYaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMTowMToyN1rOF4cYaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDcyOTU3Ng==", "bodyText": "This won't work as expected for a few reasons.\n\nIf regexFlags is null this will return \"null\".\nIf regexFlags has values it will result in \"[val1.toString(), val2.toString(), ...]\".\n\nThis would be a better option.\nif (CoreUtils.isNullOrEmpty(regexFlags)) {\n    return null;\n}\n\nreturn Arrays.stream(regexFlags)\n    .map(RegexFlags::toString)\n    .collect(Collectors.joining(\"|\"));", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r394729576", "createdAt": "2020-03-19T01:01:27Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/util/RegexFlagsUtils", "diffHunk": "@@ -0,0 +1,24 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.util;\n+\n+import com.azure.search.documents.models.RegexFlags;\n+import java.util.Arrays;\n+\n+/**\n+ * Utility class for {@link RegexFlags} complex operations.\n+ */\n+public final class RegexFlagsUtils {\n+\n+    /**\n+     * Combines a list of {@link RegexFlags} into one separated by \"|\".\n+     * E.g. {@code \"CANON_EQ|CASE_INSENSITIVE|COMMENTS\"}\n+     *\n+     * @param regexFlags A list a {@link RegexFlags} to combine.\n+     * @return New combined {@link RegexFlags} separated by vertical bar.\n+     */\n+    public static RegexFlags combineRegexFlags(RegexFlags... regexFlags) {\n+        return RegexFlags.fromString(String.join(\"|\", Arrays.deepToString(regexFlags)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzQ5MzYz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#pullrequestreview-377349363", "createdAt": "2020-03-19T01:05:02Z", "commit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMTowNTowMlrOF4ceVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMTowNjo1NVrOF4ciiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczMTA5Mw==", "bodyText": "I'm a bit worried that RegexFlags is an ExpandableStringEnum as this may grow unbounded with the number of permutations available and will remain in memory as it is backed by a static dictionary.\n@brjohnstmsft does the ordering of the regex flags matter? If not we should sort before joining as that reduces the number of possible combinations that will be stored in static memory.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r394731093", "createdAt": "2020-03-19T01:05:02Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/util/RegexFlagsUtils", "diffHunk": "@@ -0,0 +1,24 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.util;\n+\n+import com.azure.search.documents.models.RegexFlags;\n+import java.util.Arrays;\n+\n+/**\n+ * Utility class for {@link RegexFlags} complex operations.\n+ */\n+public final class RegexFlagsUtils {\n+\n+    /**\n+     * Combines a list of {@link RegexFlags} into one separated by \"|\".\n+     * E.g. {@code \"CANON_EQ|CASE_INSENSITIVE|COMMENTS\"}\n+     *\n+     * @param regexFlags A list a {@link RegexFlags} to combine.\n+     * @return New combined {@link RegexFlags} separated by vertical bar.\n+     */\n+    public static RegexFlags combineRegexFlags(RegexFlags... regexFlags) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczMTg2Ng==", "bodyText": "Would the service return a combined regex flag that a user may want to split up? If so should we offer a splitRegexFlags class that has this API shape:\npublic static RegexFlags[] splitRegexFlags(RegexFlags combinedRegexFlag)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r394731866", "createdAt": "2020-03-19T01:06:21Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/util/RegexFlagsUtils", "diffHunk": "@@ -0,0 +1,24 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.util;\n+\n+import com.azure.search.documents.models.RegexFlags;\n+import java.util.Arrays;\n+\n+/**\n+ * Utility class for {@link RegexFlags} complex operations.\n+ */\n+public final class RegexFlagsUtils {\n+\n+    /**\n+     * Combines a list of {@link RegexFlags} into one separated by \"|\".\n+     * E.g. {@code \"CANON_EQ|CASE_INSENSITIVE|COMMENTS\"}\n+     *\n+     * @param regexFlags A list a {@link RegexFlags} to combine.\n+     * @return New combined {@link RegexFlags} separated by vertical bar.\n+     */\n+    public static RegexFlags combineRegexFlags(RegexFlags... regexFlags) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczMjE2OA==", "bodyText": "Should add some tests that target RegexFlagsUtils directly.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r394732168", "createdAt": "2020-03-19T01:06:55Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/test/java/com/azure/search/documents/CustomAnalyzerSyncTests.java", "diffHunk": "@@ -313,6 +314,20 @@ public void canUseAllAnalysisComponentNames() {\n         assertCustomAnalysisComponentsEqual(index, createdIndex);\n     }\n \n+    @Test\n+    public void canUseCombinedRegexFlags() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MzkwMzI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#pullrequestreview-377390325", "createdAt": "2020-03-19T02:53:54Z", "commit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "state": "DISMISSED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMjo1Mzo1NFrOF4ea_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMjo1NDozNlrOF4ebdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2MzAwNw==", "bodyText": "The ordering shouldn't matter, but maybe we should consider modeling the flags properties of PatternAnalyzer and PatternTokenizer as collections instead of introducing this combining primitive? I believe @xirzec is taking this approach in TypeScript.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r394763007", "createdAt": "2020-03-19T02:53:54Z", "author": {"login": "brjohnstmsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/util/RegexFlagsUtils", "diffHunk": "@@ -0,0 +1,24 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.util;\n+\n+import com.azure.search.documents.models.RegexFlags;\n+import java.util.Arrays;\n+\n+/**\n+ * Utility class for {@link RegexFlags} complex operations.\n+ */\n+public final class RegexFlagsUtils {\n+\n+    /**\n+     * Combines a list of {@link RegexFlags} into one separated by \"|\".\n+     * E.g. {@code \"CANON_EQ|CASE_INSENSITIVE|COMMENTS\"}\n+     *\n+     * @param regexFlags A list a {@link RegexFlags} to combine.\n+     * @return New combined {@link RegexFlags} separated by vertical bar.\n+     */\n+    public static RegexFlags combineRegexFlags(RegexFlags... regexFlags) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczMTA5Mw=="}, "originalCommit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2MzEyNQ==", "bodyText": "Nobody has asked for this, but the scenario makes sense. It seems like one more reason to just model the appropriate properties as lists in the first place.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r394763125", "createdAt": "2020-03-19T02:54:36Z", "author": {"login": "brjohnstmsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/util/RegexFlagsUtils", "diffHunk": "@@ -0,0 +1,24 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.util;\n+\n+import com.azure.search.documents.models.RegexFlags;\n+import java.util.Arrays;\n+\n+/**\n+ * Utility class for {@link RegexFlags} complex operations.\n+ */\n+public final class RegexFlagsUtils {\n+\n+    /**\n+     * Combines a list of {@link RegexFlags} into one separated by \"|\".\n+     * E.g. {@code \"CANON_EQ|CASE_INSENSITIVE|COMMENTS\"}\n+     *\n+     * @param regexFlags A list a {@link RegexFlags} to combine.\n+     * @return New combined {@link RegexFlags} separated by vertical bar.\n+     */\n+    public static RegexFlags combineRegexFlags(RegexFlags... regexFlags) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczMTg2Ng=="}, "originalCommit": {"oid": "c0db5f2148a9ccf7c02b66e703f01e89e61f49e2"}, "originalPosition": 21}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24c648a71db4679cb080f16cbdf6a20fd0504540", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/24c648a71db4679cb080f16cbdf6a20fd0504540", "committedDate": "2020-03-20T17:21:38Z", "message": "Make regexflags changes on models"}, "afterCommit": {"oid": "26cff35cbe135c186c24b748f05afdea13bf77a8", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/26cff35cbe135c186c24b748f05afdea13bf77a8", "committedDate": "2020-03-20T17:24:45Z", "message": "Makes changes on model level"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "26cff35cbe135c186c24b748f05afdea13bf77a8", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/26cff35cbe135c186c24b748f05afdea13bf77a8", "committedDate": "2020-03-20T17:24:45Z", "message": "Makes changes on model level"}, "afterCommit": {"oid": "ea60845bcd3420951a87f9483070ec1086e3967e", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ea60845bcd3420951a87f9483070ec1086e3967e", "committedDate": "2020-03-20T17:27:31Z", "message": "Makes changes on model level"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea60845bcd3420951a87f9483070ec1086e3967e", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ea60845bcd3420951a87f9483070ec1086e3967e", "committedDate": "2020-03-20T17:27:31Z", "message": "Makes changes on model level"}, "afterCommit": {"oid": "0b6af4738b438a2eb087a560c2cd3b6bbc2167c3", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0b6af4738b438a2eb087a560c2cd3b6bbc2167c3", "committedDate": "2020-03-20T17:30:17Z", "message": "Makes changes on model level"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NjkzOTUz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#pullrequestreview-378693953", "createdAt": "2020-03-20T17:49:42Z", "commit": {"oid": "0b6af4738b438a2eb087a560c2cd3b6bbc2167c3"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzo0OTo0MlrOF5do1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzo1MDozOVrOF5dq7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc5ODc0Mg==", "bodyText": "This won't be null safe which is different behavior than before.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r395798742", "createdAt": "2020-03-20T17:49:42Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/models/PatternAnalyzer.java", "diffHunk": "@@ -112,8 +114,9 @@ public RegexFlags getFlags() {\n      * @param flags the flags value to set.\n      * @return the PatternAnalyzer object itself.\n      */\n-    public PatternAnalyzer setFlags(RegexFlags flags) {\n-        this.flags = flags;\n+    public PatternAnalyzer setFlags(Collection<RegexFlags> flags) {\n+        String newRegexFlags = flags.stream().map(RegexFlags::toString).collect(Collectors.joining(\"|\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b6af4738b438a2eb087a560c2cd3b6bbc2167c3"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc5OTI3Ng==", "bodyText": "This API may be better as setFlags(RegexFlags... flags).", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r395799276", "createdAt": "2020-03-20T17:50:39Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/models/PatternAnalyzer.java", "diffHunk": "@@ -112,8 +114,9 @@ public RegexFlags getFlags() {\n      * @param flags the flags value to set.\n      * @return the PatternAnalyzer object itself.\n      */\n-    public PatternAnalyzer setFlags(RegexFlags flags) {\n-        this.flags = flags;\n+    public PatternAnalyzer setFlags(Collection<RegexFlags> flags) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b6af4738b438a2eb087a560c2cd3b6bbc2167c3"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7cf527c0ab789407f10b03a2c0858656f3141bf", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b7cf527c0ab789407f10b03a2c0858656f3141bf", "committedDate": "2020-03-23T22:12:26Z", "message": "Make changes on swagger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "029df58698e395c90a2c0b3a13bd5b3967d5a224", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/029df58698e395c90a2c0b3a13bd5b3967d5a224", "committedDate": "2020-03-24T23:47:55Z", "message": "Initial draft for custom serializer and deserializer"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "54c67b4670fd83bcbd23b942934915b5456a9f05", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/54c67b4670fd83bcbd23b942934915b5456a9f05", "committedDate": "2020-03-20T18:03:25Z", "message": "Added json for playback"}, "afterCommit": {"oid": "029df58698e395c90a2c0b3a13bd5b3967d5a224", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/029df58698e395c90a2c0b3a13bd5b3967d5a224", "committedDate": "2020-03-24T23:47:55Z", "message": "Initial draft for custom serializer and deserializer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c776653a5bf9bdb8b9b4dc0aec1e845a1ea481ea", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c776653a5bf9bdb8b9b4dc0aec1e845a1ea481ea", "committedDate": "2020-03-25T14:24:12Z", "message": "Remove extra changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/00a05a646b789eae5ee1e785a607fd7bea1b6f91", "committedDate": "2020-03-25T14:37:27Z", "message": "Regen code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzEzMzQ2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#pullrequestreview-381313346", "createdAt": "2020-03-25T16:19:47Z", "commit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "state": "COMMENTED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjoxOTo0N1rOF7jMqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjo0MToyMlrOF7kMjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk4Njk4Ng==", "bodyText": "Why are we requiring dataformat.xml?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r397986986", "createdAt": "2020-03-25T16:19:47Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/module-info.java", "diffHunk": "@@ -5,12 +5,14 @@\n     requires transitive com.azure.core;\n     requires com.fasterxml.jackson.datatype.jsr310;\n     requires jakarta.activation;\n+    requires com.fasterxml.jackson.dataformat.xml;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk5MjY0OA==", "bodyText": "What happens if this is called directly instead of being called through serializeWithType? Is it missing the start and end object pieces?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r397992648", "createdAt": "2020-03-25T16:27:12Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternAnalyzerSerializer.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternAnalyzer;\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonGenerator;\n+import com.fasterxml.jackson.databind.JsonSerializer;\n+import com.fasterxml.jackson.databind.SerializerProvider;\n+import com.fasterxml.jackson.databind.jsontype.TypeSerializer;\n+import java.io.IOException;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom serializer for {@link PatternAnalyzer}, which flatten the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternAnalyzerSerializer extends JsonSerializer<PatternAnalyzer> {\n+    private static final String DELIMITER = \"|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     *\n+     * @param analyzer The {@link PatternAnalyzer} needs to serialize\n+     * @param gen Generator used to output resulting Json content\n+     * @param serializers Provider that can be used to get serializers for\n+     *   serializing Objects value contains, if any.\n+     * @param typeSer Type serializer to use for including type information\n+     * @throws IOException If IO operation error occurs.\n+     */\n+    @Override\n+    public void serializeWithType(PatternAnalyzer analyzer, JsonGenerator gen, SerializerProvider serializers,\n+        TypeSerializer typeSer) throws IOException {\n+        gen.writeStartObject();\n+        gen.writeStringField(typeSer.getPropertyName(), typeSer.getTypeIdResolver().idFromValue(analyzer));\n+        serialize(analyzer, gen, serializers);\n+        gen.writeEndObject();\n+    }\n+\n+    /**\n+     * {@inheritDoc}\n+     *\n+     * @param analyzer The {@link PatternAnalyzer} needs to serialize\n+     * @param jsonGenerator Generator used to output resulting Json content\n+     * @param serializerProvider Provider that can be used to get serializers for\n+     *   serializing Objects value contains, if any.\n+     * @throws IOException If IO operation error occurs.\n+     */\n+    @Override\n+    public void serialize(final PatternAnalyzer analyzer, final JsonGenerator jsonGenerator,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk5MzIxNA==", "bodyText": "Should any logic in here just be added into serialize and this acts as a proxy to serialize.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r397993214", "createdAt": "2020-03-25T16:27:55Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternAnalyzerSerializer.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternAnalyzer;\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonGenerator;\n+import com.fasterxml.jackson.databind.JsonSerializer;\n+import com.fasterxml.jackson.databind.SerializerProvider;\n+import com.fasterxml.jackson.databind.jsontype.TypeSerializer;\n+import java.io.IOException;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom serializer for {@link PatternAnalyzer}, which flatten the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternAnalyzerSerializer extends JsonSerializer<PatternAnalyzer> {\n+    private static final String DELIMITER = \"|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     *\n+     * @param analyzer The {@link PatternAnalyzer} needs to serialize\n+     * @param gen Generator used to output resulting Json content\n+     * @param serializers Provider that can be used to get serializers for\n+     *   serializing Objects value contains, if any.\n+     * @param typeSer Type serializer to use for including type information\n+     * @throws IOException If IO operation error occurs.\n+     */\n+    @Override\n+    public void serializeWithType(PatternAnalyzer analyzer, JsonGenerator gen, SerializerProvider serializers,\n+        TypeSerializer typeSer) throws IOException {\n+        gen.writeStartObject();\n+        gen.writeStringField(typeSer.getPropertyName(), typeSer.getTypeIdResolver().idFromValue(analyzer));\n+        serialize(analyzer, gen, serializers);\n+        gen.writeEndObject();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk5Mzg1OA==", "bodyText": "What happens if flattenFlags is null?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r397993858", "createdAt": "2020-03-25T16:28:48Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternAnalyzerDeserializer.java", "diffHunk": "@@ -0,0 +1,62 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternAnalyzer;\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternAnalyzer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternAnalyzerDeserializer extends JsonDeserializer<PatternAnalyzer> {\n+    private static final String DELIMITER = \"\\\\|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public PatternAnalyzer deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode root = mapper.readTree(p);\n+        JsonNode flattenFlags = root.get(\"flags\");\n+        List<RegexFlags> regexFlags = Arrays.stream(flattenFlags.asText().split(DELIMITER))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk5NTkwNQ==", "bodyText": "Does this need to live outside of the fields.hasNext() loop?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r397995905", "createdAt": "2020-03-25T16:31:32Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternAnalyzerDeserializer.java", "diffHunk": "@@ -0,0 +1,62 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternAnalyzer;\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternAnalyzer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternAnalyzerDeserializer extends JsonDeserializer<PatternAnalyzer> {\n+    private static final String DELIMITER = \"\\\\|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public PatternAnalyzer deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode root = mapper.readTree(p);\n+        JsonNode flattenFlags = root.get(\"flags\");\n+        List<RegexFlags> regexFlags = Arrays.stream(flattenFlags.asText().split(DELIMITER))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk5NzM0MA==", "bodyText": "What if stopwords is null?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r397997340", "createdAt": "2020-03-25T16:33:25Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternAnalyzerDeserializer.java", "diffHunk": "@@ -0,0 +1,62 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternAnalyzer;\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternAnalyzer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternAnalyzerDeserializer extends JsonDeserializer<PatternAnalyzer> {\n+    private static final String DELIMITER = \"\\\\|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public PatternAnalyzer deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode root = mapper.readTree(p);\n+        JsonNode flattenFlags = root.get(\"flags\");\n+        List<RegexFlags> regexFlags = Arrays.stream(flattenFlags.asText().split(DELIMITER))\n+            .map(RegexFlags::fromString).collect(Collectors.toList());\n+\n+        Iterator<Map.Entry<String, JsonNode>> fields = root.fields();\n+        PatternAnalyzer analyzer = new PatternAnalyzer();\n+        while (fields.hasNext()) {\n+            Map.Entry<String, JsonNode> field = fields.next();\n+            if (\"name\".equals(field.getKey())) {\n+                analyzer.setName(field.getValue().asText());\n+            } else if (\"pattern\".equals(field.getKey())) {\n+                analyzer.setPattern(field.getValue().asText());\n+            } else if (\"flags\".equals(field.getKey())) {\n+                analyzer.setFlags(regexFlags);\n+            } else if (\"lowercase\".equals(field.getKey())){\n+                analyzer.setLowerCaseTerms(field.getValue().asBoolean());\n+            } else if (\"stopwords\".equals(field.getKey())) {\n+                List<String> stopWords = new ArrayList<>();\n+                field.getValue().forEach(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk5ODY0OQ==", "bodyText": "Could this be done in a stream?\nanalyzer.setStopwords(field.getValue().stream()\n    .map(node -> node.asText()).collect(Collectors.toList()));", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r397998649", "createdAt": "2020-03-25T16:35:08Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternAnalyzerDeserializer.java", "diffHunk": "@@ -0,0 +1,62 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternAnalyzer;\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternAnalyzer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternAnalyzerDeserializer extends JsonDeserializer<PatternAnalyzer> {\n+    private static final String DELIMITER = \"\\\\|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public PatternAnalyzer deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode root = mapper.readTree(p);\n+        JsonNode flattenFlags = root.get(\"flags\");\n+        List<RegexFlags> regexFlags = Arrays.stream(flattenFlags.asText().split(DELIMITER))\n+            .map(RegexFlags::fromString).collect(Collectors.toList());\n+\n+        Iterator<Map.Entry<String, JsonNode>> fields = root.fields();\n+        PatternAnalyzer analyzer = new PatternAnalyzer();\n+        while (fields.hasNext()) {\n+            Map.Entry<String, JsonNode> field = fields.next();\n+            if (\"name\".equals(field.getKey())) {\n+                analyzer.setName(field.getValue().asText());\n+            } else if (\"pattern\".equals(field.getKey())) {\n+                analyzer.setPattern(field.getValue().asText());\n+            } else if (\"flags\".equals(field.getKey())) {\n+                analyzer.setFlags(regexFlags);\n+            } else if (\"lowercase\".equals(field.getKey())){\n+                analyzer.setLowerCaseTerms(field.getValue().asBoolean());\n+            } else if (\"stopwords\".equals(field.getKey())) {\n+                List<String> stopWords = new ArrayList<>();\n+                field.getValue().forEach(\n+                    jsonNode -> stopWords.add(jsonNode.asText())\n+                );\n+                analyzer.setStopwords(stopWords);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk5OTM1Ng==", "bodyText": "Does this need to be escaped?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r397999356", "createdAt": "2020-03-25T16:36:00Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternAnalyzerDeserializer.java", "diffHunk": "@@ -0,0 +1,62 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternAnalyzer;\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternAnalyzer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternAnalyzerDeserializer extends JsonDeserializer<PatternAnalyzer> {\n+    private static final String DELIMITER = \"\\\\|\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAwMDI3NQ==", "bodyText": "What is the output when analyzer is null?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r398000275", "createdAt": "2020-03-25T16:37:18Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternAnalyzerSerializer.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternAnalyzer;\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonGenerator;\n+import com.fasterxml.jackson.databind.JsonSerializer;\n+import com.fasterxml.jackson.databind.SerializerProvider;\n+import com.fasterxml.jackson.databind.jsontype.TypeSerializer;\n+import java.io.IOException;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom serializer for {@link PatternAnalyzer}, which flatten the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternAnalyzerSerializer extends JsonSerializer<PatternAnalyzer> {\n+    private static final String DELIMITER = \"|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     *\n+     * @param analyzer The {@link PatternAnalyzer} needs to serialize\n+     * @param gen Generator used to output resulting Json content\n+     * @param serializers Provider that can be used to get serializers for\n+     *   serializing Objects value contains, if any.\n+     * @param typeSer Type serializer to use for including type information\n+     * @throws IOException If IO operation error occurs.\n+     */\n+    @Override\n+    public void serializeWithType(PatternAnalyzer analyzer, JsonGenerator gen, SerializerProvider serializers,\n+        TypeSerializer typeSer) throws IOException {\n+        gen.writeStartObject();\n+        gen.writeStringField(typeSer.getPropertyName(), typeSer.getTypeIdResolver().idFromValue(analyzer));\n+        serialize(analyzer, gen, serializers);\n+        gen.writeEndObject();\n+    }\n+\n+    /**\n+     * {@inheritDoc}\n+     *\n+     * @param analyzer The {@link PatternAnalyzer} needs to serialize\n+     * @param jsonGenerator Generator used to output resulting Json content\n+     * @param serializerProvider Provider that can be used to get serializers for\n+     *   serializing Objects value contains, if any.\n+     * @throws IOException If IO operation error occurs.\n+     */\n+    @Override\n+    public void serialize(final PatternAnalyzer analyzer, final JsonGenerator jsonGenerator,\n+        final SerializerProvider serializerProvider) throws IOException {\n+        if (analyzer == null) {\n+            return;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAwMTk2NQ==", "bodyText": "Same questions as the other deserializer about flags being null and this needing to be outside of the JSON node loop.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r398001965", "createdAt": "2020-03-25T16:39:31Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternTokenizerDeserializer.java", "diffHunk": "@@ -0,0 +1,54 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternTokenizer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternTokenizerDeserializer extends JsonDeserializer<PatternTokenizer> {\n+    private static final String DELIMITER = \"\\\\|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public PatternTokenizer deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode root = mapper.readTree(p);\n+        JsonNode flattenFlags = root.get(\"flags\");\n+        List<RegexFlags> regexFlags = Arrays.stream(flattenFlags.asText().split(DELIMITER))\n+            .map(RegexFlags::fromString).collect(Collectors.toList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAwMzA2Ng==", "bodyText": "How does asInt() handle if getValue() is null? group is a nullable Integer type so it could come back as null from my understanding.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r398003066", "createdAt": "2020-03-25T16:40:58Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternTokenizerDeserializer.java", "diffHunk": "@@ -0,0 +1,54 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternTokenizer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternTokenizerDeserializer extends JsonDeserializer<PatternTokenizer> {\n+    private static final String DELIMITER = \"\\\\|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public PatternTokenizer deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode root = mapper.readTree(p);\n+        JsonNode flattenFlags = root.get(\"flags\");\n+        List<RegexFlags> regexFlags = Arrays.stream(flattenFlags.asText().split(DELIMITER))\n+            .map(RegexFlags::fromString).collect(Collectors.toList());\n+        Iterator<Map.Entry<String, JsonNode>> fields = root.fields();\n+        PatternTokenizer tokenizer = new PatternTokenizer();\n+        while (fields.hasNext()) {\n+            Map.Entry<String, JsonNode> field = fields.next();\n+            if (\"name\".equals(field.getKey())) {\n+                tokenizer.setName(field.getValue().asText());\n+            } else if (\"pattern\".equals(field.getKey())) {\n+                tokenizer.setPattern(field.getValue().asText());\n+            } else if (\"flags\".equals(field.getKey())) {\n+                tokenizer.setFlags(regexFlags);\n+            } else if (\"group\".equals(field.getKey())){\n+                tokenizer.setGroup(field.getValue().asInt());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAwMzM0MQ==", "bodyText": "Same questions.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r398003341", "createdAt": "2020-03-25T16:41:22Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/documents/implementation/util/CustomPatternTokenizerSerializer.java", "diffHunk": "@@ -0,0 +1,70 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonGenerator;\n+import com.fasterxml.jackson.databind.JsonSerializer;\n+import com.fasterxml.jackson.databind.SerializerProvider;\n+import com.fasterxml.jackson.databind.jsontype.TypeSerializer;\n+import java.io.IOException;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom serializer for {@link PatternTokenizer}, which flatten the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternTokenizerSerializer extends JsonSerializer<PatternTokenizer> {\n+    private static final String DELIMITER = \"|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     *\n+     * @param tokenizer The {@link PatternTokenizer} needs to serialize.\n+     * @param gen Generator used to output resulting Json content\n+     * @param serializers Provider that can be used to get serializers for\n+     *   serializing Objects value contains, if any.\n+     * @param typeSer Type serializer to use for including type information\n+     * @throws IOException if IO operation error occurs.\n+     */\n+    @Override\n+    public void serializeWithType(PatternTokenizer tokenizer, JsonGenerator gen, SerializerProvider serializers,\n+        TypeSerializer typeSer) throws IOException {\n+        gen.writeStartObject();\n+        gen.writeStringField(typeSer.getPropertyName(), typeSer.getTypeIdResolver().idFromValue(tokenizer));\n+        serialize(tokenizer, gen, serializers);\n+        gen.writeEndObject();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00a05a646b789eae5ee1e785a607fd7bea1b6f91"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eabadf3f3cfd85b45c1318b95334b84be75f2da6", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/eabadf3f3cfd85b45c1318b95334b84be75f2da6", "committedDate": "2020-03-25T17:01:07Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into regex_flags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7ba8b0eec5694e689f931a11494283fd49e069d", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c7ba8b0eec5694e689f931a11494283fd49e069d", "committedDate": "2020-03-25T17:28:10Z", "message": "Make changes for corner case checking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5385daf753272f626d708c69fbfe540a9c66659a", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5385daf753272f626d708c69fbfe540a9c66659a", "committedDate": "2020-03-25T19:38:13Z", "message": "Added more tests to cover corner cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff1d43438e0eb1a92bbf4c5892a341c10934dc5e", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ff1d43438e0eb1a92bbf4c5892a341c10934dc5e", "committedDate": "2020-03-25T20:07:11Z", "message": "Fixed linting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNjEzMzk0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#pullrequestreview-381613394", "createdAt": "2020-03-25T23:41:17Z", "commit": {"oid": "ff1d43438e0eb1a92bbf4c5892a341c10934dc5e"}, "state": "APPROVED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMzo0MToxN1rOF7yZoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMzo0ODozNVrOF7yi0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIzNjA2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(tokenizer.getName() != null) {\n          \n          \n            \n                    if (tokenizer.getName() != null) {", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r398236065", "createdAt": "2020-03-25T23:41:17Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/implementation/util/CustomPatternTokenizerSerializer.java", "diffHunk": "@@ -0,0 +1,67 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonGenerator;\n+import com.fasterxml.jackson.databind.JsonSerializer;\n+import com.fasterxml.jackson.databind.SerializerProvider;\n+import com.fasterxml.jackson.databind.jsontype.TypeSerializer;\n+import java.io.IOException;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom serializer for {@link PatternTokenizer}, which flatten the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternTokenizerSerializer extends JsonSerializer<PatternTokenizer> {\n+    private static final String DELIMITER = \"|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     *\n+     * @param tokenizer The {@link PatternTokenizer} needs to serialize.\n+     * @param gen Generator used to output resulting Json content\n+     * @param serializers Provider that can be used to get serializers for\n+     *   serializing Objects value contains, if any.\n+     * @param typeSer Type serializer to use for including type information\n+     * @throws IOException if IO operation error occurs.\n+     */\n+    @Override\n+    public void serializeWithType(PatternTokenizer tokenizer, JsonGenerator gen, SerializerProvider serializers,\n+        TypeSerializer typeSer) throws IOException {\n+        gen.writeStartObject();\n+        gen.writeStringField(typeSer.getPropertyName(), typeSer.getTypeIdResolver().idFromValue(tokenizer));\n+        serialize(tokenizer, gen, serializers);\n+        gen.writeEndObject();\n+    }\n+\n+    /**\n+     * {@inheritDoc}\n+     *\n+     * @param tokenizer The {@link PatternTokenizer} needs to serialize.\n+     * @param jsonGenerator Generator used to output resulting Json content\n+     * @param serializerProvider Provider that can be used to get serializers for\n+     *   serializing Objects value contains, if any.\n+     * @throws IOException if IO operation error occurs.\n+     */\n+    @Override\n+    public void serialize(final PatternTokenizer tokenizer, final JsonGenerator jsonGenerator,\n+        final SerializerProvider serializerProvider) throws IOException {\n+        if(tokenizer.getName() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff1d43438e0eb1a92bbf4c5892a341c10934dc5e"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIzNzA3OA==", "bodyText": "Could we use !field.getValue().isNull()?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r398237078", "createdAt": "2020-03-25T23:44:23Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/implementation/util/CustomPatternAnalyzerDeserializer.java", "diffHunk": "@@ -0,0 +1,61 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternAnalyzer;\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternAnalyzer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternAnalyzerDeserializer extends JsonDeserializer<PatternAnalyzer> {\n+    private static final String DELIMITER = \"\\\\|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public PatternAnalyzer deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode root = mapper.readTree(p);\n+\n+        Iterator<Map.Entry<String, JsonNode>> fields = root.fields();\n+        PatternAnalyzer analyzer = new PatternAnalyzer();\n+        while (fields.hasNext()) {\n+            Map.Entry<String, JsonNode> field = fields.next();\n+            if (\"name\".equals(field.getKey())) {\n+                analyzer.setName(field.getValue().asText());\n+            } else if (\"pattern\".equals(field.getKey())) {\n+                analyzer.setPattern(field.getValue().asText());\n+            } else if (\"flags\".equals(field.getKey()) && !\"null\".equals(field.getValue().asText())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff1d43438e0eb1a92bbf4c5892a341c10934dc5e"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIzODAwOQ==", "bodyText": "Do we have concern that asInt will return int's default of 0 if the JSON value is null?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r398238009", "createdAt": "2020-03-25T23:47:21Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/implementation/util/CustomPatternTokenizerDeserializer.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternTokenizer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternTokenizerDeserializer extends JsonDeserializer<PatternTokenizer> {\n+    private static final String DELIMITER = \"\\\\|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public PatternTokenizer deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode root = mapper.readTree(p);\n+        Iterator<Map.Entry<String, JsonNode>> fields = root.fields();\n+        PatternTokenizer tokenizer = new PatternTokenizer();\n+        while (fields.hasNext()) {\n+            Map.Entry<String, JsonNode> field = fields.next();\n+            if (\"name\".equals(field.getKey())) {\n+                tokenizer.setName(field.getValue().asText());\n+            } else if (\"pattern\".equals(field.getKey())) {\n+                tokenizer.setPattern(field.getValue().asText());\n+            } else if (\"flags\".equals(field.getKey()) && !\"null\".equals(field.getValue().asText())) {\n+                List<RegexFlags> regexFlags = Arrays.stream(field.getValue().asText().split(DELIMITER))\n+                    .map(RegexFlags::fromString).collect(Collectors.toList());\n+                tokenizer.setFlags(regexFlags);\n+            } else if (\"group\".equals(field.getKey())){\n+                tokenizer.setGroup(field.getValue().asInt());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff1d43438e0eb1a92bbf4c5892a341c10934dc5e"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIzODE5Nw==", "bodyText": "!field.getValue().isNull()", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r398238197", "createdAt": "2020-03-25T23:47:55Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/implementation/util/CustomPatternTokenizerDeserializer.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternTokenizer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternTokenizerDeserializer extends JsonDeserializer<PatternTokenizer> {\n+    private static final String DELIMITER = \"\\\\|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public PatternTokenizer deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode root = mapper.readTree(p);\n+        Iterator<Map.Entry<String, JsonNode>> fields = root.fields();\n+        PatternTokenizer tokenizer = new PatternTokenizer();\n+        while (fields.hasNext()) {\n+            Map.Entry<String, JsonNode> field = fields.next();\n+            if (\"name\".equals(field.getKey())) {\n+                tokenizer.setName(field.getValue().asText());\n+            } else if (\"pattern\".equals(field.getKey())) {\n+                tokenizer.setPattern(field.getValue().asText());\n+            } else if (\"flags\".equals(field.getKey()) && !\"null\".equals(field.getValue().asText())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff1d43438e0eb1a92bbf4c5892a341c10934dc5e"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIzODQxOA==", "bodyText": "Don't know if the service would return this.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9203#discussion_r398238418", "createdAt": "2020-03-25T23:48:35Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/implementation/util/CustomPatternTokenizerDeserializer.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.search.documents.implementation.util;\n+\n+import com.azure.search.documents.models.PatternTokenizer;\n+import com.azure.search.documents.models.RegexFlags;\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Custom deserializer for {@link PatternTokenizer}, which convert flatten string to the list of {@link RegexFlags}.\n+ */\n+public class CustomPatternTokenizerDeserializer extends JsonDeserializer<PatternTokenizer> {\n+    private static final String DELIMITER = \"\\\\|\";\n+\n+    /**\n+     * {@inheritDoc}\n+     */\n+    @Override\n+    public PatternTokenizer deserialize(final JsonParser p, final DeserializationContext ctxt) throws IOException {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode root = mapper.readTree(p);\n+        Iterator<Map.Entry<String, JsonNode>> fields = root.fields();\n+        PatternTokenizer tokenizer = new PatternTokenizer();\n+        while (fields.hasNext()) {\n+            Map.Entry<String, JsonNode> field = fields.next();\n+            if (\"name\".equals(field.getKey())) {\n+                tokenizer.setName(field.getValue().asText());\n+            } else if (\"pattern\".equals(field.getKey())) {\n+                tokenizer.setPattern(field.getValue().asText());\n+            } else if (\"flags\".equals(field.getKey()) && !\"null\".equals(field.getValue().asText())) {\n+                List<RegexFlags> regexFlags = Arrays.stream(field.getValue().asText().split(DELIMITER))\n+                    .map(RegexFlags::fromString).collect(Collectors.toList());\n+                tokenizer.setFlags(regexFlags);\n+            } else if (\"group\".equals(field.getKey())){\n+                tokenizer.setGroup(field.getValue().asInt());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIzODAwOQ=="}, "originalCommit": {"oid": "ff1d43438e0eb1a92bbf4c5892a341c10934dc5e"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9d33f23ec01f7021c1029caee362cd6cfabced8", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a9d33f23ec01f7021c1029caee362cd6cfabced8", "committedDate": "2020-03-26T00:36:56Z", "message": "Update sdk/search/azure-search-documents/src/main/java/com/azure/search/documents/implementation/util/CustomPatternTokenizerSerializer.java\n\nCo-Authored-By: Alan Zimmer <48699787+alzimmermsft@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 730, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}