{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NjUzNzg3", "number": 11156, "title": "Support AAD Authentication in Form Recognizer", "bodyText": "Added support for AAD authentication.\nfixes: #9252", "createdAt": "2020-05-13T22:51:47Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156", "merged": true, "mergeCommit": {"oid": "00494e1e1eb0271a0c66775531e7540446c1a523"}, "closed": true, "closedAt": "2020-06-04T00:42:02Z", "author": {"login": "mssfang"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchAqAgAH2gAyNDE3NjUzNzg3OjcxMTU0YzY3NzU1NmM2ZWM3OGU4OGJmMzk4MzY0ZjFiNmRhM2EzNGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnvFfkAH2gAyNDE3NjUzNzg3OjNjNmEyNjVlYjEzNTM4ZjIyYTE5ZTE0NzNjYzMzYTdkNjhkMjIyMzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/71154c677556c6ec78e88bf398364f1b6da3a34c", "committedDate": "2020-05-13T22:31:28Z", "message": "added AAD support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzU3OTE1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-411357915", "createdAt": "2020-05-13T23:03:35Z", "commit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMzowMzozNVrOGVGfkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMzoxNToyOVrOGVGutQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc3OTY2NQ==", "bodyText": "replace API key --> key", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r424779665", "createdAt": "2020-05-13T23:03:35Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -83,7 +85,7 @@ FormRecognizerClient formRecognizerClient = new FormRecognizerClientBuilder()\n ```\n The Azure Form Recognizer client library provides a way to **rotate the existing API key**.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc3OTg5OA==", "bodyText": "Should this be taking a dependency version rather than current?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r424779898", "createdAt": "2020-05-13T23:04:28Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -94,6 +96,41 @@ FormRecognizerClient formRecognizerClient = new FormRecognizerClientBuilder()\n credential.update(\"{new_key}\");\n ```\n \n+#### Create a Form Recognizer client using Microsoft identity platform (formerly Azure Active Directory)\n+\n+Azure SDK for Java supports an Azure Identity package, making it easy to get credentials from Microsoft identity\n+platform. First, add the package:\n+\n+[//]: # ({x-version-update-start;com.azure:azure-identity;current})", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4MDgyMA==", "bodyText": "Is there a new guidance to include Identity section in the README's?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r424780820", "createdAt": "2020-05-13T23:07:09Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -94,6 +96,41 @@ FormRecognizerClient formRecognizerClient = new FormRecognizerClientBuilder()\n credential.update(\"{new_key}\");\n ```\n \n+#### Create a Form Recognizer client using Microsoft identity platform (formerly Azure Active Directory)\n+\n+Azure SDK for Java supports an Azure Identity package, making it easy to get credentials from Microsoft identity\n+platform. First, add the package:\n+\n+[//]: # ({x-version-update-start;com.azure:azure-identity;current})\n+```xml\n+<dependency>\n+    <groupId>com.azure</groupId>\n+    <artifactId>azure-identity</artifactId>\n+    <version>1.0.3</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+All the implemented ways to request a credential can be found under the `com.azure.identity.credential` package. The", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4MTYxNg==", "bodyText": "Should this section be similar to the TextAnalytics section we have here - https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/textanalytics/azure-ai-textanalytics/README.md#option-2-create-textanalyticsclient-with-azure-active-directory-credential", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r424781616", "createdAt": "2020-05-13T23:09:30Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -94,6 +96,41 @@ FormRecognizerClient formRecognizerClient = new FormRecognizerClientBuilder()\n credential.update(\"{new_key}\");\n ```\n \n+#### Create a Form Recognizer client using Microsoft identity platform (formerly Azure Active Directory)\n+\n+Azure SDK for Java supports an Azure Identity package, making it easy to get credentials from Microsoft identity\n+platform. First, add the package:\n+\n+[//]: # ({x-version-update-start;com.azure:azure-identity;current})\n+```xml\n+<dependency>\n+    <groupId>com.azure</groupId>\n+    <artifactId>azure-identity</artifactId>\n+    <version>1.0.3</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+All the implemented ways to request a credential can be found under the `com.azure.identity.credential` package. The\n+sample below shows how to use an Azure Active Directory (AAD) application client secret to authorize with Azure Form\n+Recognizer.\n+\n+##### Authorizing with DefaultAzureCredential", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4MjI2NQ==", "bodyText": "this.tokenCredential = Objects.requireNonNull(tokenCredential, \"'tokenCredential' cannot be null.\");", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r424782265", "createdAt": "2020-05-13T23:11:29Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/FormRecognizerClientBuilder.java", "diffHunk": "@@ -232,6 +238,19 @@ public FormRecognizerClientBuilder credential(AzureKeyCredential apiKeyCredentia\n         return this;\n     }\n \n+    /**\n+     * Sets the {@link TokenCredential} used to authenticate HTTP requests.\n+     *\n+     * @param tokenCredential {@link TokenCredential} used to authenticate HTTP requests.\n+     * @return The updated {@link FormRecognizerClientBuilder} object.\n+     * @throws NullPointerException If {@code tokenCredential} is {@code null}.\n+     */\n+    public FormRecognizerClientBuilder credential(TokenCredential tokenCredential) {\n+        Objects.requireNonNull(tokenCredential, \"'tokenCredential' cannot be null.\");\n+        this.tokenCredential = tokenCredential;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4MjQxMw==", "bodyText": "nit: .build can be on the same line.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r424782413", "createdAt": "2020-05-13T23:11:55Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/samples/java/com/azure/ai/formrecognizer/ReadmeSamples.java", "diffHunk": "@@ -40,6 +42,18 @@ public void useAzureKeyCredentialSyncClient() {\n             .buildClient();\n     }\n \n+    /**\n+     * Code snippet for getting async client using AAD authentication.\n+     */\n+    public void useAadAsyncClient() {\n+        TokenCredential credential = new DefaultAzureCredentialBuilder()\n+            .build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4Mjg2MQ==", "bodyText": "use connection string --> use AzureKeyCredential", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r424782861", "createdAt": "2020-05-13T23:13:10Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/AadAuthenticationTest.java", "diffHunk": "@@ -0,0 +1,65 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer;\n+\n+import com.azure.ai.formrecognizer.models.CustomFormModelInfo;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.test.TestBase;\n+import com.azure.core.util.Configuration;\n+import com.azure.identity.DefaultAzureCredentialBuilder;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import static com.azure.ai.formrecognizer.FormTrainingClientTestBase.AZURE_FORM_RECOGNIZER_API_KEY;\n+import static com.azure.ai.formrecognizer.FormTrainingClientTestBase.AZURE_FORM_RECOGNIZER_ENDPOINT;\n+import static com.azure.ai.formrecognizer.TestUtils.DISPLAY_NAME_WITH_ARGUMENTS;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+/**\n+ * Test for using Azure Active Directory token credential.\n+ */\n+public class AadAuthenticationTest extends TestBase {\n+    private static FormTrainingClient client;\n+\n+    private void setup(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        final String endpoint = getEndpoint();\n+        if (interceptorManager.isPlaybackMode()) {\n+            // In playback mode use connection string because CI environment doesn't set up to support AAD", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4MzU0MQ==", "bodyText": "AAD Authentication tests could be a part of the FormRecognizerBuilderTest?\nDon't need to have two different client setups?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r424783541", "createdAt": "2020-05-13T23:15:29Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/AadAuthenticationTest.java", "diffHunk": "@@ -0,0 +1,65 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.formrecognizer;\n+\n+import com.azure.ai.formrecognizer.models.CustomFormModelInfo;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpClient;\n+import com.azure.core.test.TestBase;\n+import com.azure.core.util.Configuration;\n+import com.azure.identity.DefaultAzureCredentialBuilder;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.MethodSource;\n+\n+import static com.azure.ai.formrecognizer.FormTrainingClientTestBase.AZURE_FORM_RECOGNIZER_API_KEY;\n+import static com.azure.ai.formrecognizer.FormTrainingClientTestBase.AZURE_FORM_RECOGNIZER_ENDPOINT;\n+import static com.azure.ai.formrecognizer.TestUtils.DISPLAY_NAME_WITH_ARGUMENTS;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+/**\n+ * Test for using Azure Active Directory token credential.\n+ */\n+public class AadAuthenticationTest extends TestBase {\n+    private static FormTrainingClient client;\n+\n+    private void setup(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        final String endpoint = getEndpoint();\n+        if (interceptorManager.isPlaybackMode()) {\n+            // In playback mode use connection string because CI environment doesn't set up to support AAD\n+            client = new FormRecognizerClientBuilder()\n+                .credential(new AzureKeyCredential(getApiKey()))\n+                .endpoint(endpoint)\n+                .httpClient(interceptorManager.getPlaybackClient())\n+                .buildClient().getFormTrainingClient();\n+        } else {\n+            client = new FormRecognizerClientBuilder()\n+                .httpClient(httpClient)\n+                .credential(new DefaultAzureCredentialBuilder().build())\n+                .endpoint(endpoint)\n+                .addPolicy(interceptorManager.getRecordPolicy()) // Record\n+                .serviceVersion(serviceVersion)\n+                .buildClient().getFormTrainingClient();\n+        }\n+    }\n+\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void aadAuthenticationTest(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzYzMzU5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-411363359", "createdAt": "2020-05-13T23:17:59Z", "commit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMzoxNzo1OVrOGVGxrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMzoxNzo1OVrOGVGxrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4NDMwMg==", "bodyText": "nit: Added support for AAD Authentication", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r424784302", "createdAt": "2020-05-13T23:17:59Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/CHANGELOG.md", "diffHunk": "@@ -1,7 +1,7 @@\n # Release History\n \n ## 1.0.0-beta.3 (Unreleased)\n-\n+- Added AAD authentication support", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzY4MTA1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-411368105", "createdAt": "2020-05-13T23:30:39Z", "commit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMzozMDozOVrOGVHBbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMzozMDozOVrOGVHBbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4ODMzMw==", "bodyText": "The endpoint and key don't seem to be found under \"Quickstart\" anymore. You have to click on \"Keys and Endpoint\".", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r424788333", "createdAt": "2020-05-13T23:30:39Z", "author": {"login": "kristapratico"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -58,23 +58,25 @@ az cognitiveservices account create \\\n     --yes\n ```\n ### Authenticate the client\n-In order to interact with the Form Recognizer service, you will need to create an instance of the `FormRecognizerClient` \n-class. You will need an **endpoint** and an **key** to instantiate a client object, \n+In order to interact with the Form Recognizer service, you will need to create an instance of the Form Recognizer client,\n+both the asynchronous and synchronous clients can be created by using `FormRecognizerClientBuilder` invoking `buildClient()`\n+creates a synchronous client while `buildAsyncClient` creates its asynchronous counterpart. \n+\n+You will need an **endpoint** and a **key** to instantiate a client object, \n they can be found in the [Azure Portal][azure_portal] under the \"Quickstart\" in your created\n Form Recognizer resource. See the full details regarding [authentication][authentication] of Cognitive Services.\n \n-#### Get credentials\n-The `credential` parameter may be provided as a [`AzureKeyCredential`][azure_key_credential] from [azure-core][azure_core].\n-\n-##### Create FormRecognizerClient with AzureKeyCredential\n-To use AzureKeyCredential authentication, provide the [key][key] as a string to the [AzureKeyCredential][azure_key_credential]. This can be found in the [Azure Portal][azure_portal] \n-   under the \"Quickstart\" section or by running the following Azure CLI command:\n+#### Create a Form Recognizer client using AzureKeyCredential\n+To use `AzureKeyCredential` authentication, provide the [key][key] as a string to the [AzureKeyCredential][azure_key_credential]. \n+This key can be found in the [Azure Portal][azure_portal] under the \"Quickstart\" section in your created Form Recognizer", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMzI1Njcw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-412325670", "createdAt": "2020-05-15T03:37:22Z", "commit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMzozNzoyMlrOGV1Zig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMzozNzoyMlrOGV1Zig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU0ODE3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In order to interact with the Form Recognizer service, you will need to create an instance of the Form Recognizer client,\n          \n          \n            \n            In order to interact with the Form Recognizer service, you will need to create an instance of the Form Recognizer client.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r425548170", "createdAt": "2020-05-15T03:37:22Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -58,23 +58,25 @@ az cognitiveservices account create \\\n     --yes\n ```\n ### Authenticate the client\n-In order to interact with the Form Recognizer service, you will need to create an instance of the `FormRecognizerClient` \n-class. You will need an **endpoint** and an **key** to instantiate a client object, \n+In order to interact with the Form Recognizer service, you will need to create an instance of the Form Recognizer client,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMzI2Mjk5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-412326299", "createdAt": "2020-05-15T03:39:57Z", "commit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMzozOTo1N1rOGV1bgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMzozOTo1N1rOGV1bgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU0ODY3Mw==", "bodyText": "if we do need this section, could we point to the Azure Identity readme instead of saying here ho to add the package?\nAnother concern is that we are hard coding the version. Is that intentional? Only that version works with FR? how do we keep this version updated?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r425548673", "createdAt": "2020-05-15T03:39:57Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -94,6 +96,41 @@ FormRecognizerClient formRecognizerClient = new FormRecognizerClientBuilder()\n credential.update(\"{new_key}\");\n ```\n \n+#### Create a Form Recognizer client using Microsoft identity platform (formerly Azure Active Directory)\n+\n+Azure SDK for Java supports an Azure Identity package, making it easy to get credentials from Microsoft identity\n+platform. First, add the package:\n+\n+[//]: # ({x-version-update-start;com.azure:azure-identity;current})\n+```xml\n+<dependency>\n+    <groupId>com.azure</groupId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 57}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMzI2NjI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-412326625", "createdAt": "2020-05-15T03:41:10Z", "commit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMzo0MToxMFrOGV1cgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMzo0MToxMFrOGV1cgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU0ODkzMA==", "bodyText": "it will be good to delete en-us from all the links to docs.microsoft so that it resolves according to user location", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r425548930", "createdAt": "2020-05-15T03:41:10Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -336,6 +373,7 @@ When you submit a pull request, a CLA-bot will automatically determine whether y\n This project has adopted the [Microsoft Open Source Code of Conduct][coc]. For more information see the [Code of Conduct FAQ][coc_faq] or contact [opencode@microsoft.com][coc_contact] with any additional questions or comments.\n \n <!-- LINKS -->\n+[aad_authorization]: https://docs.microsoft.com/en-us/azure/cognitive-services/authentication#authenticate-with-azure-active-directory", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 145}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExODcxMjU1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-411871255", "createdAt": "2020-05-14T14:37:36Z", "commit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDozNzozNlrOGVfaAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxNDozNzozNlrOGVfaAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE4Nzg0Mg==", "bodyText": "nit: both the asynchronous and synchronous clients can be created by using FormRecognizerClientBuilder. Invoking buildClient() will create the synchronous client, while invoking buildAsyncClient() will create its asynchronous counterpart", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r425187842", "createdAt": "2020-05-14T14:37:36Z", "author": {"login": "iscai-msft"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -58,23 +58,25 @@ az cognitiveservices account create \\\n     --yes\n ```\n ### Authenticate the client\n-In order to interact with the Form Recognizer service, you will need to create an instance of the `FormRecognizerClient` \n-class. You will need an **endpoint** and an **key** to instantiate a client object, \n+In order to interact with the Form Recognizer service, you will need to create an instance of the Form Recognizer client,\n+both the asynchronous and synchronous clients can be created by using `FormRecognizerClientBuilder` invoking `buildClient()`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NTA1NDIy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-419505422", "createdAt": "2020-05-27T18:37:28Z", "commit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODozNzoyOFrOGbYKHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODozNzoyOFrOGbYKHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM2MDU0MA==", "bodyText": "Update test-resources json to support AAD too.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r431360540", "createdAt": "2020-05-27T18:37:28Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/resources/session-records/aadAuthenticationTest.json", "diffHunk": "@@ -0,0 +1,24 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f90c67165bc4e70aa82f27f965dcd937f0caeaee", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f90c67165bc4e70aa82f27f965dcd937f0caeaee", "committedDate": "2020-05-28T19:34:52Z", "message": "resolve conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f744ab1d7517382cac245f936d8ad4a9c0c1cb8", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1f744ab1d7517382cac245f936d8ad4a9c0c1cb8", "committedDate": "2020-05-29T04:44:22Z", "message": "address feedbacks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aacc161d72d7a7cfe9935fb759e1d0f9e24b41bf", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/aacc161d72d7a7cfe9935fb759e1d0f9e24b41bf", "committedDate": "2020-05-29T04:55:29Z", "message": "resolve conflict"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDkxNzM0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-421091734", "createdAt": "2020-05-29T16:08:09Z", "commit": {"oid": "aacc161d72d7a7cfe9935fb759e1d0f9e24b41bf"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjowODowOVrOGcjFkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjowOTo0MFrOGcjJDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU4ODE3Nw==", "bodyText": "In the future can you update the changelog in the PR you make the change?\ni.e., if you have a PR to rename parameter a to b, can you put the changelog change in that PR? Thanks!", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r432588177", "createdAt": "2020-05-29T16:08:09Z", "author": {"login": "iscai-msft"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/CHANGELOG.md", "diffHunk": "@@ -1,7 +1,16 @@\n # Release History\n \n ## 1.0.0-beta.3 (Unreleased)\n-- Added AAD authentication support\n+- Update FormRecognizer API calls to return a `List` instead of `IterableStream`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aacc161d72d7a7cfe9935fb759e1d0f9e24b41bf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU4OTA2OA==", "bodyText": "[credential][azure_identity_credential_type] is not resolving", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r432589068", "createdAt": "2020-05-29T16:09:40Z", "author": {"login": "iscai-msft"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -96,35 +101,37 @@ FormRecognizerClient formRecognizerClient = new FormRecognizerClientBuilder()\n credential.update(\"{new_key}\");\n ```\n \n-#### Create a Form Recognizer client using Microsoft identity platform (formerly Azure Active Directory)\n-\n+#### Create a Form Recognizer client with Azure Active Directory credential\n Azure SDK for Java supports an Azure Identity package, making it easy to get credentials from Microsoft identity\n-platform. First, add the package:\n+platform. \n+\n+Authentication with AAD requires some initial setup:\n+* Add the Azure Identity package\n \n-[//]: # ({x-version-update-start;com.azure:azure-identity;current})\n+[//]: # ({x-version-update-start;com.azure:azure-identity;dependency})\n ```xml\n <dependency>\n     <groupId>com.azure</groupId>\n     <artifactId>azure-identity</artifactId>\n-    <version>1.0.3</version>\n+    <version>1.0.6</version>\n </dependency>\n ```\n [//]: # ({x-version-update-end})\n+* [Register a new Azure Active Directory application][register_AAD_application]\n+* [Grant access][grant_access] to Form Recognizer by assigning the `\"Cognitive Services User\"` role to your service principal.\n \n-All the implemented ways to request a credential can be found under the `com.azure.identity.credential` package. The\n-sample below shows how to use an Azure Active Directory (AAD) application client secret to authorize with Azure Form\n-Recognizer.\n-\n-##### Authorizing with DefaultAzureCredential\n+After setup, you can choose which type of [credential][azure_identity_credential_type] from azure.identity to use. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aacc161d72d7a7cfe9935fb759e1d0f9e24b41bf"}, "originalPosition": 85}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDk3MDU1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-421097055", "createdAt": "2020-05-29T16:15:23Z", "commit": {"oid": "aacc161d72d7a7cfe9935fb759e1d0f9e24b41bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjoxNToyNFrOGcjVTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjoxNToyNFrOGcjVTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU5MjIwNw==", "bodyText": "nit: I can't comment on the line, but I notice the \"More sample code\" section is displaying the samples a little weirdly, i.e:\nRecognize receipts: RecognizeReceipts, (async)\nCan you get rid of the comma?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r432592207", "createdAt": "2020-05-29T16:15:24Z", "author": {"login": "iscai-msft"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -94,6 +101,43 @@ FormRecognizerClient formRecognizerClient = new FormRecognizerClientBuilder()\n credential.update(\"{new_key}\");\n ```\n \n+#### Create a Form Recognizer client with Azure Active Directory credential\n+Azure SDK for Java supports an Azure Identity package, making it easy to get credentials from Microsoft identity\n+platform. \n+\n+Authentication with AAD requires some initial setup:\n+* Add the Azure Identity package\n+\n+[//]: # ({x-version-update-start;com.azure:azure-identity;dependency})\n+```xml\n+<dependency>\n+    <groupId>com.azure</groupId>\n+    <artifactId>azure-identity</artifactId>\n+    <version>1.0.6</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+* [Register a new Azure Active Directory application][register_AAD_application]\n+* [Grant access][grant_access] to Form Recognizer by assigning the `\"Cognitive Services User\"` role to your service principal.\n+\n+After setup, you can choose which type of [credential][azure_identity_credential_type] from azure.identity to use. \n+As an example, [DefaultAzureCredential][wiki_identity] can be used to authenticate the client:\n+Set the values of the client ID, tenant ID, and client secret of the AAD application as environment variables: \n+AZURE_CLIENT_ID, AZURE_TENANT_ID, AZURE_CLIENT_SECRET. \n+\n+Authorization is easiest using [DefaultAzureCredential][wiki_identity]. It finds the best credential to use in its\n+running environment. For more information about using Azure Active Directory authorization with Form Recognizer, please\n+refer to [the associated documentation][aad_authorization].\n+\n+<!-- embedme ./src/samples/java/com/azure/ai/formrecognizer/ReadmeSamples.java#L51-L55 -->\n+```java\n+TokenCredential credential = new DefaultAzureCredentialBuilder().build();\n+FormRecognizerClient formRecognizerClient = new FormRecognizerClientBuilder()\n+    .endpoint(\"{endpoint}\")\n+    .credential(credential)\n+    .buildClient();\n+```\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aacc161d72d7a7cfe9935fb759e1d0f9e24b41bf"}, "originalPosition": 92}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd1786ea2df5b216cf21f74abcda47d1b05d4a49", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/dd1786ea2df5b216cf21f74abcda47d1b05d4a49", "committedDate": "2020-05-29T16:52:22Z", "message": "resolve conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "083b52ddfe5728932073b3301e31b7d51ca07358", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/083b52ddfe5728932073b3301e31b7d51ca07358", "committedDate": "2020-05-29T17:10:54Z", "message": "address iscai feedbacks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMTQ0MzE3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-421144317", "createdAt": "2020-05-29T17:20:14Z", "commit": {"oid": "083b52ddfe5728932073b3301e31b7d51ca07358"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNzoyMDoxNFrOGcljTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxOTo0NToxOFrOGcp7Fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjYyODU1Nw==", "bodyText": "Did we decide to include this section?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r432628557", "createdAt": "2020-05-29T17:20:14Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -94,6 +96,41 @@ FormRecognizerClient formRecognizerClient = new FormRecognizerClientBuilder()\n credential.update(\"{new_key}\");\n ```\n \n+#### Create a Form Recognizer client using Microsoft identity platform (formerly Azure Active Directory)\n+\n+Azure SDK for Java supports an Azure Identity package, making it easy to get credentials from Microsoft identity\n+platform. First, add the package:\n+\n+[//]: # ({x-version-update-start;com.azure:azure-identity;current})\n+```xml\n+<dependency>\n+    <groupId>com.azure</groupId>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU0ODY3Mw=="}, "originalCommit": {"oid": "71154c677556c6ec78e88bf398364f1b6da3a34c"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY5NjI1OQ==", "bodyText": "Are these changes part of the rebase?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r432696259", "createdAt": "2020-05-29T19:39:56Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -318,13 +361,13 @@ The following section provides several code snippets illustrating common pattern\n These code samples show common scenario operations with the Azure Form Recognizer client library.\n The async versions of the samples show asynchronous operations with Form Recognizer.\n \n-* Recognize receipts: [RecognizeReceipts][recognize_receipts], ([async][recognize_receipts_async])\n-* Recognize receipts from a URL: [RecognizeReceiptsFromUrl][recognize_receipts_from_url], ([async][recognize_receipts_from_url_async])\n-* Recognize content: [RecognizeContent][recognize_content], ([async][recognize_content_async])\n-* Recognize custom forms: [RecognizeCustomForms][recognize_custom_forms], ([async][recognize_custom_forms_async])\n-* Train a model without labels: [TrainModelWithoutLabels][train_unlabeled_model], ([async][train_unlabeled_model_async])\n-* Train a model with labels: [TrainModelWithLabels][train_labeled_model], ([async][train_labeled_model_async])\n-* Manage custom models: [ManageCustomModels][manage_custom_models], ([async_version][manage_custom_models_async])\n+* Recognize receipts: [RecognizeReceipts][recognize_receipts] ([async][recognize_receipts_async])\n+* Recognize receipts from a URL: [RecognizeReceiptsFromUrl][recognize_receipts_from_url] ([async][recognize_receipts_from_url_async])\n+* Recognize content: [RecognizeContent][recognize_content] ([async][recognize_content_async])\n+* Recognize custom forms: [RecognizeCustomForms][recognize_custom_forms] ([async][recognize_custom_forms_async])\n+* Train a model without labels: [TrainModelWithoutLabels][train_unlabeled_model] ([async][train_unlabeled_model_async])\n+* Train a model with labels: [TrainModelWithLabels][train_labeled_model] ([async][train_labeled_model_async])\n+* Manage custom models: [ManageCustomModels][manage_custom_models] ([async][manage_custom_models_async])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "083b52ddfe5728932073b3301e31b7d51ca07358"}, "originalPosition": 188}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY5ODY3NA==", "bodyText": "Add the credential in builder docs as well. Same as this", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r432698674", "createdAt": "2020-05-29T19:43:14Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/training/FormTrainingClientBuilder.java", "diffHunk": "@@ -242,6 +244,18 @@ public FormTrainingClientBuilder credential(AzureKeyCredential apiKeyCredential)\n         return this;\n     }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "083b52ddfe5728932073b3301e31b7d51ca07358"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY5OTg0OA==", "bodyText": "We will be using AAD for authentication in test setup?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r432699848", "createdAt": "2020-05-29T19:44:50Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -67,6 +73,23 @@\n     private static final String EXPECTED_MULTIPAGE_PHONE_NUMBER_VALUE = \"+15555555555\";\n     private static final String ITEMIZED_RECEIPT_VALUE = \"Itemized\";\n \n+    FormRecognizerClientBuilder getFormRecognizerClientBuilder(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        FormRecognizerClientBuilder builder = new FormRecognizerClientBuilder()\n+            .endpoint(getEndpoint())\n+            .httpClient(httpClient == null ? interceptorManager.getPlaybackClient() : httpClient)\n+            .httpLogOptions(new HttpLogOptions().setLogLevel(HttpLogDetailLevel.BODY_AND_HEADERS))\n+            .serviceVersion(serviceVersion)\n+            .addPolicy(interceptorManager.getRecordPolicy());\n+\n+        if (getTestMode() == TestMode.PLAYBACK) {\n+            builder.credential(new AzureKeyCredential(INVALID_KEY));\n+        } else {\n+            builder.credential(new DefaultAzureCredentialBuilder().build());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "083b52ddfe5728932073b3301e31b7d51ca07358"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcwMDE4Mg==", "bodyText": "If yes, should consider removing getApiKey() method.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r432700182", "createdAt": "2020-05-29T19:45:18Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -67,6 +73,23 @@\n     private static final String EXPECTED_MULTIPAGE_PHONE_NUMBER_VALUE = \"+15555555555\";\n     private static final String ITEMIZED_RECEIPT_VALUE = \"Itemized\";\n \n+    FormRecognizerClientBuilder getFormRecognizerClientBuilder(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        FormRecognizerClientBuilder builder = new FormRecognizerClientBuilder()\n+            .endpoint(getEndpoint())\n+            .httpClient(httpClient == null ? interceptorManager.getPlaybackClient() : httpClient)\n+            .httpLogOptions(new HttpLogOptions().setLogLevel(HttpLogDetailLevel.BODY_AND_HEADERS))\n+            .serviceVersion(serviceVersion)\n+            .addPolicy(interceptorManager.getRecordPolicy());\n+\n+        if (getTestMode() == TestMode.PLAYBACK) {\n+            builder.credential(new AzureKeyCredential(INVALID_KEY));\n+        } else {\n+            builder.credential(new DefaultAzureCredentialBuilder().build());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY5OTg0OA=="}, "originalCommit": {"oid": "083b52ddfe5728932073b3301e31b7d51ca07358"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d04924dd41dc2870e8adfd5a74c3499259085753", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d04924dd41dc2870e8adfd5a74c3499259085753", "committedDate": "2020-05-29T22:04:40Z", "message": "refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68d1868b69b82fc727340a155503dc087f7d79b3", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/68d1868b69b82fc727340a155503dc087f7d79b3", "committedDate": "2020-05-29T22:15:39Z", "message": "remove non-used json"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDkzNTg1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-422093585", "createdAt": "2020-06-01T18:47:53Z", "commit": {"oid": "68d1868b69b82fc727340a155503dc087f7d79b3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxODo0Nzo1M1rOGdV-eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxODo0Nzo1M1rOGdV-eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQyMTk0Ng==", "bodyText": "Consider adding an authentication sample like Python is doing.\n#11156 (comment)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r433421946", "createdAt": "2020-06-01T18:47:53Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/CHANGELOG.md", "diffHunk": "@@ -19,6 +19,7 @@\n - Rename parameter `useLabelFile` to `useTrainingLabels` on `beginTraining` method in FormTrainingClients\n - Replace parameters `filePrefix` and `includeSubFolders` with `TrainingFileFilter` model\n - Rename AccountProperties `count` and `limit` to `customModelCount` and `customModelLimit`\n+- Added support for AAD Authentication.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68d1868b69b82fc727340a155503dc087f7d79b3"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc653df7429ea3172dc5bdf11ae835753ad85b97", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bc653df7429ea3172dc5bdf11ae835753ad85b97", "committedDate": "2020-06-01T22:44:14Z", "message": "add api key back"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1472dbedc2b23b1495c3c8296e7b269dbf8df98a", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1472dbedc2b23b1495c3c8296e7b269dbf8df98a", "committedDate": "2020-06-02T18:39:19Z", "message": "add aad to training client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e887003429bc34ea2f338146701c6cab239f3f96", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e887003429bc34ea2f338146701c6cab239f3f96", "committedDate": "2020-06-02T19:06:34Z", "message": "add license title"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ee091032feca43731f736624f5ee9739a61be6b", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4ee091032feca43731f736624f5ee9739a61be6b", "committedDate": "2020-06-03T16:22:32Z", "message": "validate null of account properoty values instead of real value"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNzgzNzg4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#pullrequestreview-423783788", "createdAt": "2020-06-03T17:38:08Z", "commit": {"oid": "4ee091032feca43731f736624f5ee9739a61be6b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNzozODowOVrOGemgzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNzozOToxOFrOGemjLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc0MTQ1Mw==", "bodyText": "Keep these consistent with pattern used above, update to ([async])?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r434741453", "createdAt": "2020-06-03T17:38:09Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/README.md", "diffHunk": "@@ -318,13 +362,13 @@ The following section provides several code snippets illustrating common pattern\n These code samples show common scenario operations with the Azure Form Recognizer client library.\n The async versions of the samples show asynchronous operations with Form Recognizer.\n \n-* Recognize receipts: [RecognizeReceipts][recognize_receipts], ([async][recognize_receipts_async])\n-* Recognize receipts from a URL: [RecognizeReceiptsFromUrl][recognize_receipts_from_url], ([async][recognize_receipts_from_url_async])\n-* Recognize content: [RecognizeContent][recognize_content], ([async][recognize_content_async])\n-* Recognize custom forms: [RecognizeCustomForms][recognize_custom_forms], ([async][recognize_custom_forms_async])\n-* Train a model without labels: [TrainModelWithoutLabels][train_unlabeled_model], ([async][train_unlabeled_model_async])\n-* Train a model with labels: [TrainModelWithLabels][train_labeled_model], ([async][train_labeled_model_async])\n-* Manage custom models: [ManageCustomModels][manage_custom_models], ([async_version][manage_custom_models_async])\n+* Recognize receipts: [RecognizeReceipts][recognize_receipts] ([async][recognize_receipts_async])\n+* Recognize receipts from a URL: [RecognizeReceiptsFromUrl][recognize_receipts_from_url] ([async][recognize_receipts_from_url_async])\n+* Recognize content: [RecognizeContent][recognize_content] ([async][recognize_content_async])\n+* Recognize custom forms: [RecognizeCustomForms][recognize_custom_forms] ([async][recognize_custom_forms_async])\n+* Train a model without labels: [TrainModelWithoutLabels][train_unlabeled_model] ([async][train_unlabeled_model_async])\n+* Train a model with labels: [TrainModelWithLabels][train_labeled_model] ([async][train_labeled_model_async])\n+* Manage custom models: [ManageCustomModels][manage_custom_models] ([async_version][manage_custom_models_async])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ee091032feca43731f736624f5ee9739a61be6b"}, "originalPosition": 167}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc0MjA2Mg==", "bodyText": "Could you put a TODO note with the created isssue to track the inconsistent behavior we were seeing.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11156#discussion_r434742062", "createdAt": "2020-06-03T17:39:18Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientTestBase.java", "diffHunk": "@@ -85,9 +109,8 @@ private static void validateErrorData(List<ErrorInformation> expectedErrors,\n         }\n     }\n \n-    static void validateAccountProperties(AccountProperties expectedAccountProperties,\n-        AccountProperties actualAccountProperties) {\n-        assertEquals(expectedAccountProperties.getCustomModelLimit(), actualAccountProperties.getCustomModelLimit());\n+    static void validateAccountProperties(AccountProperties actualAccountProperties) {\n+        assertNotNull(actualAccountProperties.getCustomModelLimit());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ee091032feca43731f736624f5ee9739a61be6b"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70d6222b9e5fd473f87c1f7dbaf2f07c2872f86b", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/70d6222b9e5fd473f87c1f7dbaf2f07c2872f86b", "committedDate": "2020-06-03T19:53:15Z", "message": "hide model id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c6a265eb13538f22a19e1473cc33a7d68d22231", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3c6a265eb13538f22a19e1473cc33a7d68d22231", "committedDate": "2020-06-03T20:00:40Z", "message": "minor feedbacks"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4303, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}