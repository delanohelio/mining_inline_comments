{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0ODk3MjE5", "number": 13408, "title": "remove azure-core-test and prepare for folding resource manager test", "bodyText": "remove azure-core-test\n add azure profile\n add interface for IdentifierProvider/DelayProvider\n\nIdentiferProvider is to generate randome name/random uuid in some scenario without user input. We will need to run playback in tests to regenerate same values so we need to prepare TestIdentiferProvider in azure-core-test.\nDelayProvider is to help thread sleep in some scenario when it's required to wait some time for previous operation. We will need to skip unnecessary waiting when running playback. So TestDelayProvider will be in azure-core-test.", "createdAt": "2020-07-22T05:52:27Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408", "merged": true, "mergeCommit": {"oid": "75114f7bf728912c2891f8bb8704cdd493642f9b"}, "closed": true, "closedAt": "2020-08-03T08:13:25Z", "author": {"login": "xseeseesee"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3UPhFAH2gAyNDU0ODk3MjE5OjZjNDE0MTA1NGU5MmI5ZTI5Nzc2NjRlMTYwM2E1NGVmNTUwOGNhYjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6P1c9gH2gAyNDU0ODk3MjE5OmI3MzU2ZDEzZDAzZDFjZGFlZjZmZmI1MzRkNGFkNzNmMTk4Njg0MzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6c4141054e92b9e2977664e1603a54ef5508cab9", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6c4141054e92b9e2977664e1603a54ef5508cab9", "committedDate": "2020-07-22T05:46:58Z", "message": "remove dependency of azure-core-test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4808ee1bed66cbb3274c3157efb93866b6ba7e2d", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4808ee1bed66cbb3274c3157efb93866b6ba7e2d", "committedDate": "2020-07-22T05:47:40Z", "message": "add azure profile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cd5569d23151ce5f520746faaba29f3069cf4ca", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2cd5569d23151ce5f520746faaba29f3069cf4ca", "committedDate": "2020-07-23T05:02:44Z", "message": "add interface of providers for identifier/delay"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6047218132d28d340b6219a0420c2d9c88eeeb8b", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6047218132d28d340b6219a0420c2d9c88eeeb8b", "committedDate": "2020-07-23T05:04:11Z", "message": "update module-info"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NTkyNDg2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#pullrequestreview-454592486", "createdAt": "2020-07-24T01:27:37Z", "commit": {"oid": "6047218132d28d340b6219a0420c2d9c88eeeb8b"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwMToyNzozN1rOG2gtxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwMTozMTozMlrOG2gw9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxMjI5NA==", "bodyText": "This method appears only used in sample or test. So it appears not needed in core-mgmt. (worst case, disable the playback in sample, or set a date and let user change it when they run the sample).", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#discussion_r459812294", "createdAt": "2020-07-24T01:27:37Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/provider/IdentifierProvider.java", "diffHunk": "@@ -0,0 +1,31 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.core.management.provider;\n+\n+import java.time.OffsetDateTime;\n+\n+/**\n+ * The IdentifierProvider to help generate distinct values.\n+ */\n+public interface IdentifierProvider {\n+    /**\n+     * Get a random name.\n+     *\n+     * @param prefix the prefix to be used if possible\n+     * @param maxLen the max length for the random generated name\n+     * @return the random name\n+     */\n+    String randomName(String prefix, int maxLen);\n+\n+    /**\n+     * Create a random UUID.\n+     *\n+     * @return the UUID string.\n+     */\n+    String randomUuid();\n+\n+    /**\n+     * @return the current time offset.\n+     */\n+    OffsetDateTime dateTimeNow();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6047218132d28d340b6219a0420c2d9c88eeeb8b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxMjg3NQ==", "bodyText": "This one might be removed. Directly we only need getDelayDuration. This could be done by a helper method elsewhere.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#discussion_r459812875", "createdAt": "2020-07-24T01:30:26Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/provider/DelayProvider.java", "diffHunk": "@@ -0,0 +1,33 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.core.management.provider;\n+\n+import java.time.Duration;\n+\n+/**\n+ * The DelayProvider to help thread sleep.\n+ */\n+public interface DelayProvider {\n+\n+    /**\n+     * Thread sleep.\n+     *\n+     * @param milliseconds time for sleep\n+     */\n+    void sleep(int milliseconds);\n+\n+    /**\n+     * Get the retry timeout for long running operation.\n+     *\n+     * @return the timeout value.\n+     */\n+    Duration getLroRetryTimeout();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6047218132d28d340b6219a0420c2d9c88eeeb8b"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxMzEwOA==", "bodyText": "Simliarly, this is only Thread.sleep(getDelayDuration(Duration.ofMillis(milliseconds)).toMillis()), and can be in a helper method elsewhere.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#discussion_r459813108", "createdAt": "2020-07-24T01:31:32Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/provider/DelayProvider.java", "diffHunk": "@@ -0,0 +1,33 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.core.management.provider;\n+\n+import java.time.Duration;\n+\n+/**\n+ * The DelayProvider to help thread sleep.\n+ */\n+public interface DelayProvider {\n+\n+    /**\n+     * Thread sleep.\n+     *\n+     * @param milliseconds time for sleep\n+     */\n+    void sleep(int milliseconds);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6047218132d28d340b6219a0420c2d9c88eeeb8b"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "649f4645543fc787748f464b94dca04608a4a43d", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/649f4645543fc787748f464b94dca04608a4a43d", "committedDate": "2020-07-24T06:54:40Z", "message": "remove redundant methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NDA1MDAz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#pullrequestreview-455405003", "createdAt": "2020-07-26T23:32:48Z", "commit": {"oid": "649f4645543fc787748f464b94dca04608a4a43d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNlQyMzozMjo0OFrOG3QBDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNlQyMzozMjo0OFrOG3QBDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU4NzI3OQ==", "bodyText": "I would have expected these methods to be prefixed with 'get'", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#discussion_r460587279", "createdAt": "2020-07-26T23:32:48Z", "author": {"login": "JonathanGiles"}, "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/profile/AzureProfile.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.core.management.profile;\n+\n+import com.azure.core.management.AzureEnvironment;\n+import com.azure.core.util.Configuration;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Azure profile for client.\n+ */\n+public class AzureProfile {\n+\n+    private final String tenantId;\n+    private final String subscriptionId;\n+    private final AzureEnvironment environment;\n+\n+    /**\n+     * Creates AzureProfile instance with Azure environment. The global environment is {@link AzureEnvironment#AZURE}.\n+     * The tenant ID and subscription ID can be set via environment variables. The environment variables are expected\n+     * as below:\n+     * <ul>\n+     *     <li>{@link Configuration#PROPERTY_AZURE_TENANT_ID AZURE_TENANT_ID}</li>\n+     *     <li>{@link Configuration#PROPERTY_AZURE_SUBSCRIPTION_ID AZURE_SUBSCRIPTION_ID}</li>\n+     * </ul>\n+     *\n+     * @param environment the Azure environment\n+     */\n+    public AzureProfile(AzureEnvironment environment) {\n+        Objects.requireNonNull(environment);\n+        this.environment = environment;\n+        Configuration configuration = Configuration.getGlobalConfiguration();\n+        this.tenantId = configuration.get(Configuration.PROPERTY_AZURE_TENANT_ID);\n+        this.subscriptionId = configuration.get(Configuration.PROPERTY_AZURE_SUBSCRIPTION_ID);\n+    }\n+\n+    /**\n+     * Creates AzureProfile instance with tenant ID, subscription ID and Azure environment.\n+     * The global environment is {@link AzureEnvironment#AZURE}.\n+     *\n+     * @param tenantId the tenant ID required for Graph Rbac\n+     * @param subscriptionId the subscription ID required for resource management\n+     * @param environment the Azure environment\n+     */\n+    public AzureProfile(String tenantId, String subscriptionId, AzureEnvironment environment) {\n+        Objects.requireNonNull(environment);\n+        this.tenantId = tenantId;\n+        this.subscriptionId = subscriptionId;\n+        this.environment = environment;\n+    }\n+\n+    /**\n+     * Gets tenant ID.\n+     *\n+     * @return the tenant ID\n+     */\n+    public String tenantId() {\n+        return this.tenantId;\n+    }\n+\n+    /**\n+     * Gets subscription ID.\n+     *\n+     * @return the subscription ID\n+     */\n+    public String subscriptionId() {\n+        return this.subscriptionId;\n+    }\n+\n+    /**\n+     * Gets Azure environment.\n+     *\n+     * @return the Azure environment\n+     */\n+    public AzureEnvironment environment() {\n+        return environment;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "649f4645543fc787748f464b94dca04608a4a43d"}, "originalPosition": 78}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c6e2fc1bc6aa09396aa6129241ff2ace2670496", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1c6e2fc1bc6aa09396aa6129241ff2ace2670496", "committedDate": "2020-07-27T05:09:40Z", "message": "update getter for azure profile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9882c682c35b3a035283d24de261e6c7afef7bc8", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9882c682c35b3a035283d24de261e6c7afef7bc8", "committedDate": "2020-07-27T05:29:43Z", "message": "Merge branch 'master' into update-core-mgmt"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4ODYzOTQz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#pullrequestreview-458863943", "createdAt": "2020-07-31T01:26:17Z", "commit": {"oid": "9882c682c35b3a035283d24de261e6c7afef7bc8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7356d13d03d1cdaef6ffb534d4ad73f19868434", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b7356d13d03d1cdaef6ffb534d4ad73f19868434", "committedDate": "2020-07-31T08:20:39Z", "message": "update pom version"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1057, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}