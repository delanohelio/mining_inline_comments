{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MTMyMjM5", "number": 7638, "title": "Text Analytics ARM template for Live tests", "bodyText": "This PR introduces an ARM template for running live tests for Text Analytics client.\nThe pipeline will run ARM template and create common resources using the variables mentioned in the JSON. Then use the output environment variables for testing. This ARM template should also delete the unwanted resources after the pipeline is successfully completed.\nCloses: #7513", "createdAt": "2020-01-23T00:44:40Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638", "merged": true, "mergeCommit": {"oid": "370064fa8f95a70a483b17fb3533213b97565ecb"}, "closed": true, "closedAt": "2020-02-05T18:56:13Z", "author": {"login": "samvaity"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-5GEVgH2gAyMzY2MTMyMjM5OmI3NzIyMDQxMWZiZmEwZTNmYjBiMTMzNDU0OWIyNjdmM2FmNjQ5MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBaXU4gFqTM1MzkzODkxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b77220411fbfa0e3fb0b1334549b267f3af64916", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b77220411fbfa0e3fb0b1334549b267f3af64916", "committedDate": "2020-01-28T22:29:27Z", "message": "add test-resources for text analytics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef3cdd9591623c72f14e556e3ffeaea81b015312", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ef3cdd9591623c72f14e556e3ffeaea81b015312", "committedDate": "2020-01-23T00:39:31Z", "message": "add test-resources for text analytics"}, "afterCommit": {"oid": "68520a3c08fe16b3b431542d605b4aef198811c6", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/68520a3c08fe16b3b431542d605b4aef198811c6", "committedDate": "2020-01-28T22:31:52Z", "message": "fix for live tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9664b78ce9325aa3127484f82250d6fa027743b6", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9664b78ce9325aa3127484f82250d6fa027743b6", "committedDate": "2020-01-28T22:41:32Z", "message": "fix for live tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "68520a3c08fe16b3b431542d605b4aef198811c6", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/68520a3c08fe16b3b431542d605b4aef198811c6", "committedDate": "2020-01-28T22:31:52Z", "message": "fix for live tests"}, "afterCommit": {"oid": "9664b78ce9325aa3127484f82250d6fa027743b6", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9664b78ce9325aa3127484f82250d6fa027743b6", "committedDate": "2020-01-28T22:41:32Z", "message": "fix for live tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "649113abb87cb7ca72702722bef65b90c370fb87", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/649113abb87cb7ca72702722bef65b90c370fb87", "committedDate": "2020-01-28T22:52:05Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into arm-temp-ta"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "649113abb87cb7ca72702722bef65b90c370fb87", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/649113abb87cb7ca72702722bef65b90c370fb87", "committedDate": "2020-01-28T22:52:05Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into arm-temp-ta"}, "afterCommit": {"oid": "fb31579586ed95b79d4f0ff62d3d26f8b64e1ac1", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb31579586ed95b79d4f0ff62d3d26f8b64e1ac1", "committedDate": "2020-01-28T23:17:52Z", "message": "u"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb31579586ed95b79d4f0ff62d3d26f8b64e1ac1", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb31579586ed95b79d4f0ff62d3d26f8b64e1ac1", "committedDate": "2020-01-28T23:17:52Z", "message": "u"}, "afterCommit": {"oid": "4f99cdef70470cbd1bbe5d23d5f1ccb005b70ca1", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4f99cdef70470cbd1bbe5d23d5f1ccb005b70ca1", "committedDate": "2020-01-28T23:19:44Z", "message": "Code coverage in aggregate reports (#7734)\n\n* Drop in code coverage generation.\n\n* Set pom file location.\n\n* Increase job timeout.\n\n* Remove nio dependency for now."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "431f1b3fdb25f4517a9322966bb9ce5f5544bf6b", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/431f1b3fdb25f4517a9322966bb9ce5f5544bf6b", "committedDate": "2020-01-28T23:38:44Z", "message": "add subscription key in tests yml"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f99cdef70470cbd1bbe5d23d5f1ccb005b70ca1", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4f99cdef70470cbd1bbe5d23d5f1ccb005b70ca1", "committedDate": "2020-01-28T23:19:44Z", "message": "Code coverage in aggregate reports (#7734)\n\n* Drop in code coverage generation.\n\n* Set pom file location.\n\n* Increase job timeout.\n\n* Remove nio dependency for now."}, "afterCommit": {"oid": "431f1b3fdb25f4517a9322966bb9ce5f5544bf6b", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/431f1b3fdb25f4517a9322966bb9ce5f5544bf6b", "committedDate": "2020-01-28T23:38:44Z", "message": "add subscription key in tests yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "984c04a9702924be6b23b5a90dee2c106cc5b99c", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/984c04a9702924be6b23b5a90dee2c106cc5b99c", "committedDate": "2020-01-29T00:21:08Z", "message": "update with tests-resources"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMjg1MDA1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#pullrequestreview-350285005", "createdAt": "2020-01-29T17:21:03Z", "commit": {"oid": "984c04a9702924be6b23b5a90dee2c106cc5b99c"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzoyMTowM1rOFjQ2ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzoyMjo1M1rOFjQ6eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjUyMDYxMQ==", "bodyText": "You'll want to change this to the below, right now this is still looking at the value being loaded from the KeyVault.\nAZURE_TEXT_ANALYTICS_ENDPOINT: $(AZURE_TEXT_ANALYTICS_ENDPOINT)\nI may be mis-remembering this but @danieljurek mentioned that this may not need to be listed since the generated output uses the same name as the environment variable expected and it can automatically map the value.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r372520611", "createdAt": "2020-01-29T17:21:03Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/tests.yml", "diffHunk": "@@ -9,5 +9,6 @@ jobs:\n         AZURE_CLIENT_ID: $(aad-azure-sdk-test-client-id)\n         AZURE_CLIENT_SECRET: $(aad-azure-sdk-test-client-secret)\n         AZURE_TENANT_ID: $(aad-azure-sdk-test-tenant-id)\n-        AZURE_TEXT_ANALYTICS_ENDPOINT: $(java-textanalytics-sdk-endpoint)\n+        AZURE_TEXT_ANALYTICS_ENDPOINT: $(java-azure-textanalytics-sdk-endpoint)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "984c04a9702924be6b23b5a90dee2c106cc5b99c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjUyMTMxOQ==", "bodyText": "I believe @mssfang mentioned that East US needs to be used, do you know what location this will be? I think it may be West US or West US2 by default, @hemanttanwar could you verify.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r372521319", "createdAt": "2020-01-29T17:22:20Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/test-resources.json", "diffHunk": "@@ -0,0 +1,43 @@\n+{\n+    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+    \"contentVersion\": \"1.0.0.0\",\n+    \"parameters\": {\n+        \"baseName\": {\n+            \"type\": \"String\"\n+        },\n+        \"tenantId\": {\n+            \"type\": \"String\"\n+        },\n+        \"testApplicationOid\": {\n+            \"type\": \"String\"\n+        },\n+        \"endpointSuffix\": {\n+            \"defaultValue\": \"cognitiveservices.azure.com\",\n+            \"type\": \"String\"\n+        }\n+    },\n+    \"variables\": {\n+        \"location\": \"[resourceGroup().location]\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "984c04a9702924be6b23b5a90dee2c106cc5b99c"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjUyMTU5Mw==", "bodyText": "Should this value be output by the resource generator?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r372521593", "createdAt": "2020-01-29T17:22:53Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/tests.yml", "diffHunk": "@@ -9,5 +9,6 @@ jobs:\n         AZURE_CLIENT_ID: $(aad-azure-sdk-test-client-id)\n         AZURE_CLIENT_SECRET: $(aad-azure-sdk-test-client-secret)\n         AZURE_TENANT_ID: $(aad-azure-sdk-test-tenant-id)\n-        AZURE_TEXT_ANALYTICS_ENDPOINT: $(java-textanalytics-sdk-endpoint)\n+        AZURE_TEXT_ANALYTICS_ENDPOINT: $(java-azure-textanalytics-sdk-endpoint)\n+        AZURE_TEXT_ANALYTICS_SUBSCRIPTION_KEY: $(java-textanalytics-test-subscription-key)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "984c04a9702924be6b23b5a90dee2c106cc5b99c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c8beb01f6c0a063edb588de5833f87ebe317e52", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2c8beb01f6c0a063edb588de5833f87ebe317e52", "committedDate": "2020-01-30T20:21:22Z", "message": "working deployment file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da12c53fc55b8be527f3201387ae6755011cf705", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/da12c53fc55b8be527f3201387ae6755011cf705", "committedDate": "2020-01-30T22:27:04Z", "message": "add role assignments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9902ed33cd88769c120a6a6ef4441511bf964b36", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9902ed33cd88769c120a6a6ef4441511bf964b36", "committedDate": "2020-01-30T23:25:06Z", "message": "remove prim name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f08995d6c5b4e1962eb35d90247df0d1c850e5a", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6f08995d6c5b4e1962eb35d90247df0d1c850e5a", "committedDate": "2020-01-30T23:57:57Z", "message": "update endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54cf4829fa206285ca14cb16ffb9b5b68447105e", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/54cf4829fa206285ca14cb16ffb9b5b68447105e", "committedDate": "2020-01-31T01:11:20Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into arm-temp-ta"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5d8ced131201181c8db6ca36baf4791c1b32df6", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a5d8ced131201181c8db6ca36baf4791c1b32df6", "committedDate": "2020-02-03T22:38:32Z", "message": "update role id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd3f33667a1813a399cc7f0dfb45f7f888da2452", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cd3f33667a1813a399cc7f0dfb45f7f888da2452", "committedDate": "2020-02-03T23:37:27Z", "message": "update to latest api version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNjgxMjAw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#pullrequestreview-352681200", "createdAt": "2020-02-04T01:52:08Z", "commit": {"oid": "cd3f33667a1813a399cc7f0dfb45f7f888da2452"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQwMTo1MjowOFrOFlF4Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQwMTo1NToyOVrOFlF7QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQzNzk4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"description\": \"THe base resource name.\"\n          \n          \n            \n                            \"description\": \"The base resource name.\"", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r374437987", "createdAt": "2020-02-04T01:52:08Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/test-resources.json", "diffHunk": "@@ -0,0 +1,89 @@\n+{\n+    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+    \"contentVersion\": \"1.0.0.0\",\n+    \"parameters\": {\n+        \"baseName\": {\n+            \"type\": \"string\",\n+            \"defaultValue\": \"[resourceGroup().name]\",\n+            \"metadata\": {\n+                \"description\": \"THe base resource name.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd3f33667a1813a399cc7f0dfb45f7f888da2452"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQzODExNQ==", "bodyText": "nit: be consistent about using ID or id.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r374438115", "createdAt": "2020-02-04T01:52:43Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/test-resources.json", "diffHunk": "@@ -0,0 +1,89 @@\n+{\n+    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+    \"contentVersion\": \"1.0.0.0\",\n+    \"parameters\": {\n+        \"baseName\": {\n+            \"type\": \"string\",\n+            \"defaultValue\": \"[resourceGroup().name]\",\n+            \"metadata\": {\n+                \"description\": \"THe base resource name.\"\n+            }\n+        },\n+        \"testApplicationOid\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The principal to assign the role to. This is application object id.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd3f33667a1813a399cc7f0dfb45f7f888da2452"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQzODIzMQ==", "bodyText": "taRoleId -> textAnalyticsRoleId.\nIt makes it a lot easier for future people to reason about.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r374438231", "createdAt": "2020-02-04T01:53:15Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/test-resources.json", "diffHunk": "@@ -0,0 +1,89 @@\n+{\n+    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+    \"contentVersion\": \"1.0.0.0\",\n+    \"parameters\": {\n+        \"baseName\": {\n+            \"type\": \"string\",\n+            \"defaultValue\": \"[resourceGroup().name]\",\n+            \"metadata\": {\n+                \"description\": \"THe base resource name.\"\n+            }\n+        },\n+        \"testApplicationOid\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The principal to assign the role to. This is application object id.\"\n+            }\n+        },\n+        \"tenantId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The tenant ID to which the application and resources belong.\"\n+            }\n+        },\n+        \"testApplicationId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client ID used to run tests.\"\n+            }\n+        },\n+        \"testApplicationSecret\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client secret used to run tests.\"\n+            }\n+        }\n+    },\n+    \"variables\": {\n+        \"taRoleId\": \"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/a97b65f3-24c7-4388-baec-2e87135dc908')]\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd3f33667a1813a399cc7f0dfb45f7f888da2452"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQzODM2NQ==", "bodyText": "nit: missing new line.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r374438365", "createdAt": "2020-02-04T01:53:51Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/test-resources.json", "diffHunk": "@@ -0,0 +1,89 @@\n+{\n+    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+    \"contentVersion\": \"1.0.0.0\",\n+    \"parameters\": {\n+        \"baseName\": {\n+            \"type\": \"string\",\n+            \"defaultValue\": \"[resourceGroup().name]\",\n+            \"metadata\": {\n+                \"description\": \"THe base resource name.\"\n+            }\n+        },\n+        \"testApplicationOid\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The principal to assign the role to. This is application object id.\"\n+            }\n+        },\n+        \"tenantId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The tenant ID to which the application and resources belong.\"\n+            }\n+        },\n+        \"testApplicationId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client ID used to run tests.\"\n+            }\n+        },\n+        \"testApplicationSecret\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client secret used to run tests.\"\n+            }\n+        }\n+    },\n+    \"variables\": {\n+        \"taRoleId\": \"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/a97b65f3-24c7-4388-baec-2e87135dc908')]\"\n+    },\n+    \"resources\": [\n+        {\n+            \"type\": \"Microsoft.Authorization/roleAssignments\",\n+            \"apiVersion\": \"2018-09-01-preview\",\n+            \"name\": \"[guid(concat(variables('taRoleId'), parameters('baseName')))]\",\n+            \"dependsOn\": [\n+                \"[parameters('baseName')]\"\n+            ],\n+            \"properties\": {\n+                \"principalId\": \"[parameters('testApplicationOid')]\",\n+                \"roleDefinitionId\": \"[variables('taRoleId')]\"\n+            }\n+        },\n+        {\n+            \"type\": \"Microsoft.CognitiveServices/accounts\",\n+            \"name\": \"[parameters('baseName')]\",\n+            \"apiVersion\": \"2017-04-18\",\n+            \"sku\": {\n+                \"name\": \"S\"\n+            },\n+            \"kind\": \"TextAnalytics\",\n+            \"location\": \"[resourceGroup().location]\",\n+            \"properties\": {\n+                \"customSubDomainName\": \"[parameters('baseName')]\"\n+            }\n+        }\n+    ],\n+    \"outputs\": {\n+        \"AZURE_TENANT_ID\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('tenantId')]\"\n+        },\n+        \"AZURE_CLIENT_ID\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('testApplicationId')]\"\n+        },\n+        \"AZURE_CLIENT_SECRET\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('testApplicationSecret')]\"\n+        },\n+        \"AZURE_TEXT_ANALYTICS_SUBSCRIPTION_KEY\": {\n+            \"type\": \"string\",\n+            \"value\": \"[listKeys(resourceId('Microsoft.CognitiveServices/accounts', parameters('baseName')), '2017-04-18').key1]\"\n+        },\n+        \"AZURE_TEXT_ANALYTICS_ENDPOINT\": {\n+            \"type\": \"string\",\n+            \"value\": \"[concat('https://', parameters('baseName'), '.cognitiveservices.azure.com/')]\"\n+        }\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd3f33667a1813a399cc7f0dfb45f7f888da2452"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQzODU5NA==", "bodyText": "I would make this a variable in the template rather than creating it here. It makes it easier to follow because we just have to jump to the top of this script rather than ctrl+f through all our concats.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r374438594", "createdAt": "2020-02-04T01:54:57Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/test-resources.json", "diffHunk": "@@ -0,0 +1,89 @@\n+{\n+    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+    \"contentVersion\": \"1.0.0.0\",\n+    \"parameters\": {\n+        \"baseName\": {\n+            \"type\": \"string\",\n+            \"defaultValue\": \"[resourceGroup().name]\",\n+            \"metadata\": {\n+                \"description\": \"THe base resource name.\"\n+            }\n+        },\n+        \"testApplicationOid\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The principal to assign the role to. This is application object id.\"\n+            }\n+        },\n+        \"tenantId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The tenant ID to which the application and resources belong.\"\n+            }\n+        },\n+        \"testApplicationId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client ID used to run tests.\"\n+            }\n+        },\n+        \"testApplicationSecret\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client secret used to run tests.\"\n+            }\n+        }\n+    },\n+    \"variables\": {\n+        \"taRoleId\": \"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/a97b65f3-24c7-4388-baec-2e87135dc908')]\"\n+    },\n+    \"resources\": [\n+        {\n+            \"type\": \"Microsoft.Authorization/roleAssignments\",\n+            \"apiVersion\": \"2018-09-01-preview\",\n+            \"name\": \"[guid(concat(variables('taRoleId'), parameters('baseName')))]\",\n+            \"dependsOn\": [\n+                \"[parameters('baseName')]\"\n+            ],\n+            \"properties\": {\n+                \"principalId\": \"[parameters('testApplicationOid')]\",\n+                \"roleDefinitionId\": \"[variables('taRoleId')]\"\n+            }\n+        },\n+        {\n+            \"type\": \"Microsoft.CognitiveServices/accounts\",\n+            \"name\": \"[parameters('baseName')]\",\n+            \"apiVersion\": \"2017-04-18\",\n+            \"sku\": {\n+                \"name\": \"S\"\n+            },\n+            \"kind\": \"TextAnalytics\",\n+            \"location\": \"[resourceGroup().location]\",\n+            \"properties\": {\n+                \"customSubDomainName\": \"[parameters('baseName')]\"\n+            }\n+        }\n+    ],\n+    \"outputs\": {\n+        \"AZURE_TENANT_ID\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('tenantId')]\"\n+        },\n+        \"AZURE_CLIENT_ID\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('testApplicationId')]\"\n+        },\n+        \"AZURE_CLIENT_SECRET\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('testApplicationSecret')]\"\n+        },\n+        \"AZURE_TEXT_ANALYTICS_SUBSCRIPTION_KEY\": {\n+            \"type\": \"string\",\n+            \"value\": \"[listKeys(resourceId('Microsoft.CognitiveServices/accounts', parameters('baseName')), '2017-04-18').key1]\"\n+        },\n+        \"AZURE_TEXT_ANALYTICS_ENDPOINT\": {\n+            \"type\": \"string\",\n+            \"value\": \"[concat('https://', parameters('baseName'), '.cognitiveservices.azure.com/')]\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd3f33667a1813a399cc7f0dfb45f7f888da2452"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQzODcyMA==", "bodyText": "Use a variable for the API version so you don't have to use a string replace in the future for multiple places.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r374438720", "createdAt": "2020-02-04T01:55:29Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/test-resources.json", "diffHunk": "@@ -0,0 +1,89 @@\n+{\n+    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+    \"contentVersion\": \"1.0.0.0\",\n+    \"parameters\": {\n+        \"baseName\": {\n+            \"type\": \"string\",\n+            \"defaultValue\": \"[resourceGroup().name]\",\n+            \"metadata\": {\n+                \"description\": \"THe base resource name.\"\n+            }\n+        },\n+        \"testApplicationOid\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The principal to assign the role to. This is application object id.\"\n+            }\n+        },\n+        \"tenantId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The tenant ID to which the application and resources belong.\"\n+            }\n+        },\n+        \"testApplicationId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client ID used to run tests.\"\n+            }\n+        },\n+        \"testApplicationSecret\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client secret used to run tests.\"\n+            }\n+        }\n+    },\n+    \"variables\": {\n+        \"taRoleId\": \"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/a97b65f3-24c7-4388-baec-2e87135dc908')]\"\n+    },\n+    \"resources\": [\n+        {\n+            \"type\": \"Microsoft.Authorization/roleAssignments\",\n+            \"apiVersion\": \"2018-09-01-preview\",\n+            \"name\": \"[guid(concat(variables('taRoleId'), parameters('baseName')))]\",\n+            \"dependsOn\": [\n+                \"[parameters('baseName')]\"\n+            ],\n+            \"properties\": {\n+                \"principalId\": \"[parameters('testApplicationOid')]\",\n+                \"roleDefinitionId\": \"[variables('taRoleId')]\"\n+            }\n+        },\n+        {\n+            \"type\": \"Microsoft.CognitiveServices/accounts\",\n+            \"name\": \"[parameters('baseName')]\",\n+            \"apiVersion\": \"2017-04-18\",\n+            \"sku\": {\n+                \"name\": \"S\"\n+            },\n+            \"kind\": \"TextAnalytics\",\n+            \"location\": \"[resourceGroup().location]\",\n+            \"properties\": {\n+                \"customSubDomainName\": \"[parameters('baseName')]\"\n+            }\n+        }\n+    ],\n+    \"outputs\": {\n+        \"AZURE_TENANT_ID\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('tenantId')]\"\n+        },\n+        \"AZURE_CLIENT_ID\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('testApplicationId')]\"\n+        },\n+        \"AZURE_CLIENT_SECRET\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('testApplicationSecret')]\"\n+        },\n+        \"AZURE_TEXT_ANALYTICS_SUBSCRIPTION_KEY\": {\n+            \"type\": \"string\",\n+            \"value\": \"[listKeys(resourceId('Microsoft.CognitiveServices/accounts', parameters('baseName')), '2017-04-18').key1]\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd3f33667a1813a399cc7f0dfb45f7f888da2452"}, "originalPosition": 82}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8312d022525c0a0abf35c4d46382cb32af75634", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d8312d022525c0a0abf35c4d46382cb32af75634", "committedDate": "2020-02-04T19:00:01Z", "message": "update with variables and params"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMjY5NDMx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#pullrequestreview-353269431", "createdAt": "2020-02-04T20:13:12Z", "commit": {"oid": "d8312d022525c0a0abf35c4d46382cb32af75634"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQyMDoxMzoxMlrOFlh8wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQyMDoxMzoxMlrOFlh8wQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5Nzg1Nw==", "bodyText": "Let's continue to use the tests.yml to handle loading these, no need to output these here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r374897857", "createdAt": "2020-02-04T20:13:12Z", "author": {"login": "alzimmermsft"}, "path": "sdk/textanalytics/test-resources.json", "diffHunk": "@@ -0,0 +1,96 @@\n+{\n+    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+    \"contentVersion\": \"1.0.0.0\",\n+    \"parameters\": {\n+        \"baseName\": {\n+            \"type\": \"string\",\n+            \"defaultValue\": \"[resourceGroup().name]\",\n+            \"metadata\": {\n+                \"description\": \"The base resource name.\"\n+            }\n+        },\n+        \"endpointSuffix\": {\n+            \"defaultValue\": \".cognitiveservices.azure.com/\",\n+            \"type\": \"String\"\n+        },\n+        \"testApplicationOid\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The principal to assign the role to. This is application object id.\"\n+            }\n+        },\n+        \"tenantId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The tenant id to which the application and resources belong.\"\n+            }\n+        },\n+        \"testApplicationId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client id used to run tests.\"\n+            }\n+        },\n+        \"testApplicationSecret\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client secret used to run tests.\"\n+            }\n+        }\n+    },\n+    \"variables\": {\n+        \"authorizationApiVersion\": \"2018-09-01-preview\",\n+        \"textAnalyticsApiVersion\": \"2017-04-18\",\n+        \"azureTextAnalyticsUrl\": \"[concat('https://', parameters('baseName'), parameters('endpointSuffix'))]\",\n+        \"cognitiveServiceUserRoleId\": \"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/a97b65f3-24c7-4388-baec-2e87135dc908')]\"\n+    },\n+    \"resources\": [\n+        {\n+            \"type\": \"Microsoft.Authorization/roleAssignments\",\n+            \"apiVersion\": \"[variables('authorizationApiVersion')]\",\n+            \"name\": \"[guid(concat(variables('cognitiveServiceUserRoleId'), parameters('baseName')))]\",\n+            \"dependsOn\": [\n+                \"[parameters('baseName')]\"\n+            ],\n+            \"properties\": {\n+                \"principalId\": \"[parameters('testApplicationOid')]\",\n+                \"roleDefinitionId\": \"[variables('cognitiveServiceUserRoleId')]\"\n+            }\n+        },\n+        {\n+            \"type\": \"Microsoft.CognitiveServices/accounts\",\n+            \"name\": \"[parameters('baseName')]\",\n+            \"apiVersion\": \"[variables('textAnalyticsApiVersion')]\",\n+            \"sku\": {\n+                \"name\": \"S\"\n+            },\n+            \"kind\": \"TextAnalytics\",\n+            \"location\": \"[resourceGroup().location]\",\n+            \"properties\": {\n+                \"customSubDomainName\": \"[parameters('baseName')]\"\n+            }\n+        }\n+    ],\n+    \"outputs\": {\n+        \"AZURE_TENANT_ID\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('tenantId')]\"\n+        },\n+        \"AZURE_CLIENT_ID\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('testApplicationId')]\"\n+        },\n+        \"AZURE_CLIENT_SECRET\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('testApplicationSecret')]\"\n+        },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d8312d022525c0a0abf35c4d46382cb32af75634"}, "originalPosition": 86}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMzczOTM0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#pullrequestreview-353373934", "createdAt": "2020-02-04T23:23:13Z", "commit": {"oid": "d8312d022525c0a0abf35c4d46382cb32af75634"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNDc5Njg3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#pullrequestreview-353479687", "createdAt": "2020-02-05T05:52:03Z", "commit": {"oid": "d8312d022525c0a0abf35c4d46382cb32af75634"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwNTo1MjowM1rOFlsfOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwNTo1MjowM1rOFlsfOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA3MDUyMQ==", "bodyText": "As of now, I have used test-resources.json  to declare variables. Few other languages are also doing it. I think this is one think does not need to differ from other languages and have one common place for variables. So I will vote for keeping in this file.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#discussion_r375070521", "createdAt": "2020-02-05T05:52:03Z", "author": {"login": "hemanttanwar"}, "path": "sdk/textanalytics/test-resources.json", "diffHunk": "@@ -0,0 +1,96 @@\n+{\n+    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+    \"contentVersion\": \"1.0.0.0\",\n+    \"parameters\": {\n+        \"baseName\": {\n+            \"type\": \"string\",\n+            \"defaultValue\": \"[resourceGroup().name]\",\n+            \"metadata\": {\n+                \"description\": \"The base resource name.\"\n+            }\n+        },\n+        \"endpointSuffix\": {\n+            \"defaultValue\": \".cognitiveservices.azure.com/\",\n+            \"type\": \"String\"\n+        },\n+        \"testApplicationOid\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The principal to assign the role to. This is application object id.\"\n+            }\n+        },\n+        \"tenantId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The tenant id to which the application and resources belong.\"\n+            }\n+        },\n+        \"testApplicationId\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client id used to run tests.\"\n+            }\n+        },\n+        \"testApplicationSecret\": {\n+            \"type\": \"String\",\n+            \"metadata\": {\n+                \"description\": \"The application client secret used to run tests.\"\n+            }\n+        }\n+    },\n+    \"variables\": {\n+        \"authorizationApiVersion\": \"2018-09-01-preview\",\n+        \"textAnalyticsApiVersion\": \"2017-04-18\",\n+        \"azureTextAnalyticsUrl\": \"[concat('https://', parameters('baseName'), parameters('endpointSuffix'))]\",\n+        \"cognitiveServiceUserRoleId\": \"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/a97b65f3-24c7-4388-baec-2e87135dc908')]\"\n+    },\n+    \"resources\": [\n+        {\n+            \"type\": \"Microsoft.Authorization/roleAssignments\",\n+            \"apiVersion\": \"[variables('authorizationApiVersion')]\",\n+            \"name\": \"[guid(concat(variables('cognitiveServiceUserRoleId'), parameters('baseName')))]\",\n+            \"dependsOn\": [\n+                \"[parameters('baseName')]\"\n+            ],\n+            \"properties\": {\n+                \"principalId\": \"[parameters('testApplicationOid')]\",\n+                \"roleDefinitionId\": \"[variables('cognitiveServiceUserRoleId')]\"\n+            }\n+        },\n+        {\n+            \"type\": \"Microsoft.CognitiveServices/accounts\",\n+            \"name\": \"[parameters('baseName')]\",\n+            \"apiVersion\": \"[variables('textAnalyticsApiVersion')]\",\n+            \"sku\": {\n+                \"name\": \"S\"\n+            },\n+            \"kind\": \"TextAnalytics\",\n+            \"location\": \"[resourceGroup().location]\",\n+            \"properties\": {\n+                \"customSubDomainName\": \"[parameters('baseName')]\"\n+            }\n+        }\n+    ],\n+    \"outputs\": {\n+        \"AZURE_TENANT_ID\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('tenantId')]\"\n+        },\n+        \"AZURE_CLIENT_ID\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('testApplicationId')]\"\n+        },\n+        \"AZURE_CLIENT_SECRET\": {\n+            \"type\": \"String\",\n+            \"value\": \"[parameters('testApplicationSecret')]\"\n+        },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5Nzg1Nw=="}, "originalCommit": {"oid": "d8312d022525c0a0abf35c4d46382cb32af75634"}, "originalPosition": 86}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzOTM4OTEz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7638#pullrequestreview-353938913", "createdAt": "2020-02-05T18:23:01Z", "commit": {"oid": "d8312d022525c0a0abf35c4d46382cb32af75634"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 361, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}