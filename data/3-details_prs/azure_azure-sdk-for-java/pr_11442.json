{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNTI1NjUz", "number": 11442, "title": "Updated APIs with docs. Fixed few issues", "bodyText": "Updated APIs and docs with changes discussed in API review iteration meeting\nUpdated APIs for queryMetricsEnabled and quotaInfoEnabled\nFixed issue - #9053\nFixed issue - #9096\nFixed issue - #10493\nAlso addresses some comments from this issue : #11219", "createdAt": "2020-05-27T00:00:20Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442", "merged": true, "mergeCommit": {"oid": "bb07d3cdf421bfb821b974c16ffaa797b4473770"}, "closed": true, "closedAt": "2020-05-27T18:34:20Z", "author": {"login": "kushagraThapar"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclNsULgH2gAyNDIzNTI1NjUzOjE0YjZiYjc3ZDZlOGJkZjM0NTZhYmQ1ZDA5OWIxMTBjMDRkM2Y0OTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclc-IQgFqTQxOTQ2NjcwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "14b6bb77d6e8bdf3456abd5d099b110c04d3f494", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/14b6bb77d6e8bdf3456abd5d099b110c04d3f494", "committedDate": "2020-05-26T23:58:27Z", "message": "Updated APIs with docs. Fixed few issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/67fb20faf9ff2f31083f0704897255d9d7301dd5", "committedDate": "2020-05-27T06:19:11Z", "message": "Merge latest master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTMxNjE4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#pullrequestreview-418931618", "createdAt": "2020-05-27T07:39:16Z", "commit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzozOToxNlrOGa9ECQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzozOToxNlrOGa9ECQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkxNjYxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * This a synchronous client and is used to perform operations in a synchronous way\n          \n          \n            \n             * Calls to client API's are blocked for completion.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#discussion_r430916617", "createdAt": "2020-05-27T07:39:16Z", "author": {"login": "kirankumarkolli"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosClient.java", "diffHunk": "@@ -22,7 +22,7 @@\n \n /**\n  * Provides a client-side logical representation of the Azure Cosmos DB service.\n- * SyncClient is used to perform operations in a synchronous way\n+ * This a synchronous client and is used to perform operations in a synchronous way", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTMyMjY3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#pullrequestreview-418932267", "createdAt": "2020-05-27T07:40:09Z", "commit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo0MDowOVrOGa9F8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo0MDowOVrOGa9F8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkxNzEwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * By default, SESSION consistency level is used if none is provided.\n          \n          \n            \n             * By default, account consistency level is used if none is provided.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#discussion_r430917104", "createdAt": "2020-05-27T07:40:09Z", "author": {"login": "kirankumarkolli"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosClientBuilder.java", "diffHunk": "@@ -16,12 +16,13 @@\n /**\n  * Helper class to build CosmosAsyncClient {@link CosmosAsyncClient} and CosmosClient {@link CosmosClient}\n  * instances as logical representation of the Azure Cosmos database service.\n- *\n+ * <p>\n  * When building client, endpoint() and key() are mandatory APIs, without these the initialization will fail.\n- *\n+ * <p>\n  * Though consistencyLevel is not mandatory, but we strongly suggest to pay attention to this API when building client.\n- * By default, database account level consistency level is used if none is provided.\n- *\n+ * By default, SESSION consistency level is used if none is provided.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTMzMzYz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#pullrequestreview-418933363", "createdAt": "2020-05-27T07:41:48Z", "commit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo0MTo0OFrOGa9JgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo0MTo0OFrOGa9JgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkxODAxNw==", "bodyText": "Is it supposed to be non-public?\nIts in implementation, guess its okey.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#discussion_r430918017", "createdAt": "2020-05-27T07:41:48Z", "author": {"login": "kirankumarkolli"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/Conflict.java", "diffHunk": "@@ -42,7 +42,7 @@ public String getOperationKind() {\n      *\n      * @return the resource type.\n      */\n-    public String getResouceType() {\n+    public String getResourceType() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTM2NDIx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#pullrequestreview-418936421", "createdAt": "2020-05-27T07:46:15Z", "commit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo0NjoxNVrOGa9TPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzo0NjoxNVrOGa9TPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyMDUwOQ==", "bodyText": "Wow, that was a bug?\nIs PKrangeID always guaranteed in this code path?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#discussion_r430920509", "createdAt": "2020-05-27T07:46:15Z", "author": {"login": "kirankumarkolli"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/SessionTokenHelper.java", "diffHunk": "@@ -154,7 +154,8 @@ static boolean tryParse(String sessionToken, ValueHolder<ISessionToken> parsedSe\n     public static void validateAndRemoveSessionToken(RxDocumentServiceRequest request) {\n         String sessionToken = request.getHeaders().get(HttpConstants.HttpHeaders.SESSION_TOKEN);\n         if (!Strings.isNullOrEmpty(sessionToken)) {\n-            getLocalSessionToken(request, sessionToken, StringUtils.EMPTY);\n+            String partitionKeyRangeId = request.requestContext.resolvedPartitionKeyRange.getId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTM5NjMy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#pullrequestreview-418939632", "createdAt": "2020-05-27T07:50:42Z", "commit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MzkzOTg4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#pullrequestreview-419393988", "createdAt": "2020-05-27T16:19:17Z", "commit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjoxOToxN1rOGbSwWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNjoyMDowN1rOGbSyoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI3MjAyNw==", "bodyText": "this is for validation. Why this change is needed?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#discussion_r431272027", "createdAt": "2020-05-27T16:19:17Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/SessionTokenHelper.java", "diffHunk": "@@ -154,7 +154,8 @@ static boolean tryParse(String sessionToken, ValueHolder<ISessionToken> parsedSe\n     public static void validateAndRemoveSessionToken(RxDocumentServiceRequest request) {\n         String sessionToken = request.getHeaders().get(HttpConstants.HttpHeaders.SESSION_TOKEN);\n         if (!Strings.isNullOrEmpty(sessionToken)) {\n-            getLocalSessionToken(request, sessionToken, StringUtils.EMPTY);\n+            String partitionKeyRangeId = request.requestContext.resolvedPartitionKeyRange.getId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkyMDUwOQ=="}, "originalCommit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI3MjYwOQ==", "bodyText": "please add a unit test for the change. See PartitionKeyInternalTest for existing tests.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#discussion_r431272609", "createdAt": "2020-05-27T16:20:07Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/routing/PartitionKeyInternal.java", "diffHunk": "@@ -259,11 +259,14 @@ public void serialize(PartitionKeyInternal partitionKey, JsonGenerator writer, S\n                     return;\n                 }\n \n-                writer.writeStartArray();\n-                for (IPartitionKeyComponent componentValue : partitionKey.getComponents()) {\n-                    componentValue.jsonEncode(writer);\n+                //  PartitionKey.None has null components - which returns a null list\n+                if (partitionKey.getComponents() != null) {\n+                    writer.writeStartArray();\n+                    for (IPartitionKeyComponent componentValue : partitionKey.getComponents()) {\n+                        componentValue.jsonEncode(writer);\n+                    }\n+                    writer.writeEndArray();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67fb20faf9ff2f31083f0704897255d9d7301dd5"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "221e786fd7382b0d364d79b0059208dcb468a157", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/221e786fd7382b0d364d79b0059208dcb468a157", "committedDate": "2020-05-27T16:30:55Z", "message": "Code review comments. Added unit test for NONE Partition key serialization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62cfc4cefbedf2c40ce7d492f7f1cc52be899c4e", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/62cfc4cefbedf2c40ce7d492f7f1cc52be899c4e", "committedDate": "2020-05-27T17:05:29Z", "message": "Removed createDatabaseIfNotExists with databaseProperties argument. Added more docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cdc6515c4a27a4297944962ca3590f04a57e9ce", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4cdc6515c4a27a4297944962ca3590f04a57e9ce", "committedDate": "2020-05-27T17:45:37Z", "message": "Reverted the StringUtils.EMPTY change, removed empty check for IllegalStateException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NDY2NzA2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11442#pullrequestreview-419466706", "createdAt": "2020-05-27T17:46:29Z", "commit": {"oid": "4cdc6515c4a27a4297944962ca3590f04a57e9ce"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4070, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}