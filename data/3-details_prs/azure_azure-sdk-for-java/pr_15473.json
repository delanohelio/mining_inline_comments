{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNzM5MTkw", "number": 15473, "title": "mgmt add azure-resourcemanager-perf", "bodyText": "Prepare this module for performance tests according to Writing-Performance-Tests.\nPlease note:\n\nI expect this part would not be released in maven so just place the version starting 1.0.0-beta.1.\nFor easy authentication, add azure-resourcemanager-test for using AuthFile to setup the client.\nAzureResourceManagerTest is the base class. ResourceGroupTestBase is the class could help create/delete resource group when testing resource creation.\nFor now, the added tests as below:\n\n\nList subscriptions\nList tenants\nList resource groups\nCreate storage accounts\nCreate dns zones\n\nPlease feel free to suggest if any simple resources/operations could be added now or later.\nAdditionally, the format of test result would display as below:\n=== Results ===\nCompleted 66 operations in a weighted-average of 117.96s (0.56 ops/s, 1.787 s/op)", "createdAt": "2020-09-22T07:11:25Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15473", "merged": true, "mergeCommit": {"oid": "e87a5423e51eeabd88c8b6c5fc2744c7e4abd933"}, "closed": true, "closedAt": "2020-10-20T10:19:26Z", "author": {"login": "xseeseesee"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLScyMAH2gAyNDkwNzM5MTkwOjU1ZmEwZTIzZDVhMTI0NjA0ZGU1YThjM2I1ZTc5NmQ4ZTY1NTJlNDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUVjtiAH2gAyNDkwNzM5MTkwOjk1NTJiN2E4Yzk5OTAxYzFkYWRjNDYyNjllYzlkYjk2N2I3MzcwZjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "55fa0e23d5a124604de5a8c3b5e796d8e6552e47", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/55fa0e23d5a124604de5a8c3b5e796d8e6552e47", "committedDate": "2020-09-22T07:00:08Z", "message": "mgmt add azure-resourcemanager-perf"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjE3ODAz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15473#pullrequestreview-493217803", "createdAt": "2020-09-22T08:09:39Z", "commit": {"oid": "55fa0e23d5a124604de5a8c3b5e796d8e6552e47"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODowOTozOVrOHVuvIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODowOTozOVrOHVuvIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0Nzg3Mw==", "bodyText": "Do we need the test framework?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15473#discussion_r492547873", "createdAt": "2020-09-22T08:09:39Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/resourcemanager/azure-resourcemanager-perf/pom.xml", "diffHunk": "@@ -0,0 +1,71 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\n+  <parent>\n+    <groupId>com.azure</groupId>\n+    <artifactId>azure-client-sdk-parent</artifactId>\n+    <version>1.7.0</version> <!-- {x-version-update;com.azure:azure-client-sdk-parent;current} -->\n+    <relativePath>../../parents/azure-client-sdk-parent</relativePath>\n+  </parent>\n+\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <groupId>com.azure.resourcemanager</groupId>\n+  <artifactId>azure-resourcemanager-perf</artifactId>\n+  <version>1.0.0-beta.1</version> <!-- {x-version-update;com.azure.resourcemanager:azure-resourcemanager-perf;current} -->\n+  <packaging>jar</packaging>\n+\n+  <properties>\n+    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n+    <maven.compiler.source>1.8</maven.compiler.source>\n+    <maven.compiler.target>1.8</maven.compiler.target>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>com.azure.resourcemanager</groupId>\n+      <artifactId>azure-resourcemanager</artifactId>\n+      <version>2.0.0-beta.5</version> <!-- {x-version-update;com.azure.resourcemanager:azure-resourcemanager;current} -->\n+    </dependency>\n+    <dependency>\n+      <groupId>com.azure.resourcemanager</groupId>\n+      <artifactId>azure-resourcemanager-test</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55fa0e23d5a124604de5a8c3b5e796d8e6552e47"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjIzMTE3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15473#pullrequestreview-493223117", "createdAt": "2020-09-22T08:16:42Z", "commit": {"oid": "55fa0e23d5a124604de5a8c3b5e796d8e6552e47"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODoxNjo0MlrOHVvABg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODoxNjo0MlrOHVvABg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU1MjE5OA==", "bodyText": "How does data-plane prepare their test env?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15473#discussion_r492552198", "createdAt": "2020-09-22T08:16:42Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/resourcemanager/azure-resourcemanager-perf/src/main/java/com/azure/resourcemanager/perf/core/AzureResourceManagerTest.java", "diffHunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.resourcemanager.perf.core;\n+\n+import com.azure.core.management.AzureEnvironment;\n+import com.azure.core.management.profile.AzureProfile;\n+import com.azure.core.util.CoreUtils;\n+import com.azure.perf.test.core.PerfStressOptions;\n+import com.azure.perf.test.core.PerfStressTest;\n+import com.azure.resourcemanager.AzureResourceManager;\n+import com.azure.resourcemanager.test.utils.AuthFile;\n+\n+import java.io.File;\n+import java.io.IOException;\n+\n+public abstract class AzureResourceManagerTest<TOptions extends PerfStressOptions> extends PerfStressTest<TOptions> {\n+    protected final AzureResourceManager azureResourceManager;\n+    public AzureResourceManagerTest(TOptions options) throws IOException {\n+        super(options);\n+\n+        String authFilePath = System.getenv(\"AZURE_AUTH_LOCATION\");\n+        if (CoreUtils.isNullOrEmpty(authFilePath)) {\n+            System.out.println(\"Environment variable AZURE_AUTH_LOCATION must be set.\");\n+            System.exit(1);\n+        }\n+\n+        AuthFile authFile = AuthFile.parse(new File(authFilePath));\n+        AzureProfile profile = new AzureProfile(authFile.getTenantId(), authFile.getSubscriptionId(), AzureEnvironment.AZURE);\n+        azureResourceManager = AzureResourceManager.authenticate(authFile.getCredential(), profile).withDefaultSubscription();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55fa0e23d5a124604de5a8c3b5e796d8e6552e47"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjMzNzkz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15473#pullrequestreview-493233793", "createdAt": "2020-09-22T08:30:28Z", "commit": {"oid": "55fa0e23d5a124604de5a8c3b5e796d8e6552e47"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c778cc8b5b8b1c2cd2d4c09734d2f05d92f8fb7", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9c778cc8b5b8b1c2cd2d4c09734d2f05d92f8fb7", "committedDate": "2020-10-20T05:47:58Z", "message": "Merge branch 'master' into add-mgmt-perf-test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d49061a65b1239a69041ce95d09f633d47b45595", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d49061a65b1239a69041ce95d09f633d47b45595", "committedDate": "2020-10-20T09:22:52Z", "message": "update with latest azure resourcemanager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3e326551ff28ff00418d65d220249a43e15777d", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a3e326551ff28ff00418d65d220249a43e15777d", "committedDate": "2020-10-20T09:40:44Z", "message": "Merge branch 'master' into add-mgmt-perf-test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9552b7a8c99901c1dadc46269ec9db967b7370f2", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9552b7a8c99901c1dadc46269ec9db967b7370f2", "committedDate": "2020-10-20T09:42:44Z", "message": "update pom"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3332, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}