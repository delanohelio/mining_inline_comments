{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4ODM2ODIy", "number": 7083, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwMzo1ODoyMlrODVls9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMjo1Mjo0NVrODg4erg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzOTY0NDA1OnYy", "diffSide": "RIGHT", "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/EventHubProducerAsyncClient.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwMzo1ODoyMlrOFZ5hWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxODo1NDoyOVrOFaG6tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjcwMTE0NQ==", "bodyText": "Is there a constants class in the implementation package we can put this in, instead of triplicating the constant?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r362701145", "createdAt": "2020-01-03T03:58:22Z", "author": {"login": "conniey"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/EventHubProducerAsyncClient.java", "diffHunk": "@@ -93,6 +94,7 @@\n \n     private static final SendOptions DEFAULT_SEND_OPTIONS = new SendOptions();\n     private static final CreateBatchOptions DEFAULT_BATCH_OPTIONS = new CreateBatchOptions();\n+    private static final String AZ_NAMESPACE_VALUE = \"Microsoft.EventHub\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fca574e2d64ead3a9c8173c770c720d497190a1"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkyMDYzMA==", "bodyText": "added it to the client constants file.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r362920630", "createdAt": "2020-01-03T18:54:29Z", "author": {"login": "samvaity"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/EventHubProducerAsyncClient.java", "diffHunk": "@@ -93,6 +94,7 @@\n \n     private static final SendOptions DEFAULT_SEND_OPTIONS = new SendOptions();\n     private static final CreateBatchOptions DEFAULT_BATCH_OPTIONS = new CreateBatchOptions();\n+    private static final String AZ_NAMESPACE_VALUE = \"Microsoft.EventHub\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjcwMTE0NQ=="}, "originalCommit": {"oid": "5fca574e2d64ead3a9c8173c770c720d497190a1"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MDkwMTUyOnYy", "diffSide": "RIGHT", "path": "sdk/core/azure-core-tracing-opentelemetry/src/main/java/com/azure/core/tracing/opentelemetry/OpenTelemetryTracer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxNzoyMzo0NVrOFaFHaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxNzoyMzo0NVrOFaFHaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjg5MTExMw==", "bodyText": "Shouldn't the same constant from the interface this implements be usable instead of having it again?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r362891113", "createdAt": "2020-01-03T17:23:45Z", "author": {"login": "alzimmermsft"}, "path": "sdk/core/azure-core-tracing-opentelemetry/src/main/java/com/azure/core/tracing/opentelemetry/OpenTelemetryTracer.java", "diffHunk": "@@ -32,10 +32,11 @@\n     private static final Tracer TRACER = OpenTelemetry.getTracerFactory().get(\"Azure-OpenTelemetry\");\n \n     // standard attributes with AMQP request\n-    static final String COMPONENT = \"component\";\n     static final String MESSAGE_BUS_DESTINATION = \"message_bus.destination\";\n     static final String PEER_ENDPOINT = \"peer.address\";\n \n+    static final String AZ_NAMESPACE_KEY = \"az.namespace\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fca574e2d64ead3a9c8173c770c720d497190a1"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MTE5ODkzOnYy", "diffSide": "RIGHT", "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/implementation/ClientConstants.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTo0NzowM1rOFaH9UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTo0NzowM1rOFaH9UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkzNzY4MQ==", "bodyText": "nit: Can you add a comment/link to where this value came from so when we visit this in the future, we'll know where it was from.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r362937681", "createdAt": "2020-01-03T19:47:03Z", "author": {"login": "conniey"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/implementation/ClientConstants.java", "diffHunk": "@@ -7,6 +7,7 @@\n \n public final class ClientConstants {\n     public static final String AZURE_ACTIVE_DIRECTORY_SCOPE = \"https://eventhubs.azure.net/.default\";\n+    public static final String AZ_NAMESPACE_VALUE = \"Microsoft.EventHub\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb40ba59e6b52ec036930bdfe7361883ab019a7e"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MTIwMTEzOnYy", "diffSide": "RIGHT", "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/PartitionPumpManager.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTo0ODowN1rOFaH-zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTo0ODowN1rOFaH-zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkzODA2Mw==", "bodyText": "it would be easier to reason about if you chained .addData(NAMESPACE...) to the declaration above rather than here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r362938063", "createdAt": "2020-01-03T19:48:07Z", "author": {"login": "conniey"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/PartitionPumpManager.java", "diffHunk": "@@ -193,10 +195,9 @@ private Context startProcessTracingSpan(EventData eventData, String eventHubName\n             return Context.NONE;\n         }\n \n-        Context spanContext = tracerProvider.extractContext(diagnosticId.toString(), Context.NONE);\n-        Context entityContext = spanContext.addData(ENTITY_PATH_KEY, eventHubName);\n-\n-        return tracerProvider.startSpan(entityContext.addData(HOST_NAME_KEY, fullyQualifiedNamespace),\n+        Context spanContext = tracerProvider.extractContext(diagnosticId.toString(), Context.NONE)\n+            .addData(ENTITY_PATH_KEY, eventHubName).addData(HOST_NAME_KEY, fullyQualifiedNamespace);\n+        return tracerProvider.startSpan(spanContext.addData(AZ_NAMESPACE_KEY, AZ_NAMESPACE_VALUE),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb40ba59e6b52ec036930bdfe7361883ab019a7e"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MTIwNTA4OnYy", "diffSide": "RIGHT", "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/EventHubProducerAsyncClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTo0OTo1MlrOFaIBOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTo0OTo1MlrOFaIBOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkzODY4Mw==", "bodyText": "nit: It is a lot easier to understand all the method invocations by formatting it as:\nfinalSharedContext.addData(ENTITY_PATH_KEY, link.getEntityPath())\n    .addData(HOST_NAME_KEY, link.getHostname())\n    .addData(AZ_NAMESPACE_KEY, AZ_NAMESPACE_VALUE);\nSame comment as the ones below.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r362938683", "createdAt": "2020-01-03T19:49:52Z", "author": {"login": "conniey"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/EventHubProducerAsyncClient.java", "diffHunk": "@@ -425,10 +427,11 @@ public String getEventHubName() {\n         return getSendLink(batch.getPartitionId())\n             .flatMap(link -> {\n                 if (isTracingEnabled) {\n-                    Context entityContext = finalSharedContext.addData(ENTITY_PATH_KEY, link.getEntityPath());\n+                    Context entityContext = finalSharedContext.addData(ENTITY_PATH_KEY, link.getEntityPath())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb40ba59e6b52ec036930bdfe7361883ab019a7e"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MTIwNjcyOnYy", "diffSide": "RIGHT", "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/EventHubProducerAsyncClient.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxOTo1MDo1MFrOFaICXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QyMTo1OTo1NFrOFaKQdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkzODk3Mg==", "bodyText": "Did you add a unit test to ensure this AZ_NAMESPACE_KEY is set when sending an event?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r362938972", "createdAt": "2020-01-03T19:50:50Z", "author": {"login": "conniey"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/EventHubProducerAsyncClient.java", "diffHunk": "@@ -44,9 +44,11 @@\n import java.util.stream.Collector;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cb40ba59e6b52ec036930bdfe7361883ab019a7e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk3NTM0OQ==", "bodyText": "updated existing tests to assert if AZ_NAMESPACE_KEY set on sending an event.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r362975349", "createdAt": "2020-01-03T21:59:54Z", "author": {"login": "samvaity"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/EventHubProducerAsyncClient.java", "diffHunk": "@@ -44,9 +44,11 @@\n import java.util.stream.Collector;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjkzODk3Mg=="}, "originalCommit": {"oid": "cb40ba59e6b52ec036930bdfe7361883ab019a7e"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1MzI0Nzk3OnYy", "diffSide": "RIGHT", "path": "sdk/core/azure-core-tracing-opentelemetry/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxNToxODoxMFrOFb5XtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxNToxODoxMFrOFb5XtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDc5NTgyOA==", "bodyText": "This particular change isn't necessary. Libraries built within the same pipeline always use the current version of other libraries built within the same pipeline. Everything built within the core pipeline is already using the latest versions of other things within core. The changes to sdk/eventhubs/azure-messaging-eventhubs/pom.xml are correct, since eventhubs needs the latest, and unreleased, version of core and eventhubs is built within a separate pipeline.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r364795828", "createdAt": "2020-01-09T15:18:10Z", "author": {"login": "JimSuplizio"}, "path": "sdk/core/azure-core-tracing-opentelemetry/pom.xml", "diffHunk": "@@ -40,7 +40,7 @@\n     <dependency>\n       <groupId>com.azure</groupId>\n       <artifactId>azure-core</artifactId>\n-      <version>1.3.0-beta.1</version> <!-- {x-version-update;com.azure:azure-core;current} -->\n+      <version>1.3.0-beta.1</version> <!-- {x-version-update;unreleased_com.azure:azure-core;dependency} -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6eb62e4ec4d1ced59a1a133fad45c6824a78e88"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1ODA2MzgyOnYy", "diffSide": "RIGHT", "path": "sdk/eventhubs/azure-messaging-eventhubs/pom.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMjo1Mjo0NVrOFrVafg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMjo1NDo0NVrOFrVd4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk4MzkzNA==", "bodyText": "Just to make sure, there is an unreleased_com entry in the version_client.txt?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r380983934", "createdAt": "2020-02-18T22:52:45Z", "author": {"login": "conniey"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/pom.xml", "diffHunk": "@@ -37,7 +37,7 @@\n     <dependency>\n       <groupId>com.azure</groupId>\n       <artifactId>azure-core</artifactId>\n-      <version>1.2.0</version> <!-- {x-version-update;com.azure:azure-core;dependency} -->\n+      <version>1.3.0-beta.2</version> <!-- {x-version-update;unreleased_com.azure:azure-core;dependency} -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67ad012188e87a0c9eee1c5a3771b6631d4f028f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk4NDgwMg==", "bodyText": "yup, there is https://github.com/Azure/azure-sdk-for-java/blob/master/eng/versioning/version_client.txt#L40", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7083#discussion_r380984802", "createdAt": "2020-02-18T22:54:45Z", "author": {"login": "samvaity"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/pom.xml", "diffHunk": "@@ -37,7 +37,7 @@\n     <dependency>\n       <groupId>com.azure</groupId>\n       <artifactId>azure-core</artifactId>\n-      <version>1.2.0</version> <!-- {x-version-update;com.azure:azure-core;dependency} -->\n+      <version>1.3.0-beta.2</version> <!-- {x-version-update;unreleased_com.azure:azure-core;dependency} -->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk4MzkzNA=="}, "originalCommit": {"oid": "67ad012188e87a0c9eee1c5a3771b6631d4f028f"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 638, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}