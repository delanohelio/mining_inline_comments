{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NDAxNjc3", "number": 9609, "reviewThreads": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1NzoxOFrODr2WZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyNDoxNlrODr4bFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzA1ODI4OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderClient.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1NzoxOFrOF8b-Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1ODowMFrOF8b_dQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxNzE5MA==", "bodyText": "topic and queue? I don't think the same sender can publish to both. I would update this title to \"Send messages to a Service Bus resource\"", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398917190", "createdAt": "2020-03-26T21:57:18Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderClient.java", "diffHunk": "@@ -13,9 +13,17 @@\n  * A <b>synchronous</b> sender responsible for sending {@link ServiceBusMessage} to  specific queue or topic on\n  * Azure Service Bus.\n  *\n- * @see ServiceBusClientBuilder\n- * @see ServiceBusSenderAsyncClient See ServiceBusSenderAsyncClient to communicate with a Service Bus resource using\n- *     an asynchronous client.\n+ * <p><strong>Create an instance of sender</strong></p>\n+ * {@codesnippet com.azure.messaging.servicebus.servicebussenderclient.instantiation}\n+ *\n+ * <p><strong>Create a sender and send messages to Service Bus topic and queue</strong></p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9035b732d53185d7a7515b952c67787e839e8235"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxNzQ5Mw==", "bodyText": "You don't need to show client creation again. Should focus the snippet on creating the batch and assume the client exists.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398917493", "createdAt": "2020-03-26T21:58:00Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderClient.java", "diffHunk": "@@ -13,9 +13,17 @@\n  * A <b>synchronous</b> sender responsible for sending {@link ServiceBusMessage} to  specific queue or topic on\n  * Azure Service Bus.\n  *\n- * @see ServiceBusClientBuilder\n- * @see ServiceBusSenderAsyncClient See ServiceBusSenderAsyncClient to communicate with a Service Bus resource using\n- *     an asynchronous client.\n+ * <p><strong>Create an instance of sender</strong></p>\n+ * {@codesnippet com.azure.messaging.servicebus.servicebussenderclient.instantiation}\n+ *\n+ * <p><strong>Create a sender and send messages to Service Bus topic and queue</strong></p>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxNzE5MA=="}, "originalCommit": {"oid": "9035b732d53185d7a7515b952c67787e839e8235"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzA2MjAzOnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1ODo0MVrOF8cApQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1ODo0MVrOF8cApQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxNzc5Nw==", "bodyText": "Same comment as the one below", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398917797", "createdAt": "2020-03-26T21:58:41Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClient.java", "diffHunk": "@@ -48,6 +48,16 @@\n \n /**\n  * An <b>asynchronous</b> client to send messages to a Service Bus resource.\n+ *\n+ * <p><strong>Create an instance of sender</strong></p>\n+ * {@codesnippet com.azure.messaging.servicebus.servicebusasyncsenderclient.instantiation}\n+ *\n+ * <p><strong>Create a sender and send messages to Service Bus topic and queue</strong></p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9035b732d53185d7a7515b952c67787e839e8235"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzA2NDQxOnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1OToyNVrOF8cCDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1OToyNVrOF8cCDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxODE1Nw==", "bodyText": "Another one would be to do #instantiation with  credentials.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398918157", "createdAt": "2020-03-26T21:59:25Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java", "diffHunk": "@@ -0,0 +1,122 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.messaging.servicebus.models.CreateBatchOptions;\n+import reactor.core.Exceptions;\n+import reactor.core.publisher.Flux;\n+import reactor.core.publisher.Mono;\n+\n+import java.util.concurrent.atomic.AtomicReference;\n+\n+import static java.nio.charset.StandardCharsets.UTF_8;\n+\n+/**\n+ * Contains code snippets when generating javadocs through doclets for {@link ServiceBusSenderAsyncClient}.\n+ */\n+public class ServiceBusSenderAsyncClientJavaDocCodeSamples {\n+    private final ServiceBusClientBuilder builder = new ServiceBusClientBuilder()\n+        .connectionString(\"fake-string\");\n+\n+    /**\n+     * Code snippet demonstrating how to create an {@link ServiceBusSenderAsyncClient}.\n+     */\n+    public void instantiate() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncsenderclient.instantiation\n+        // The required parameter is a way to authenticate with Service Bus using credentials.\n+        // The connectionString provides a way to authenticate with Service Bus.\n+        ServiceBusSenderAsyncClient sender = new ServiceBusClientBuilder()\n+            .connectionString(\n+                \"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};SharedAccessKey={key}\")\n+            .buildSenderClientBuilder()\n+            .entityName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncsenderclient.instantiation\n+\n+        sender.close();\n+    }\n+\n+    /**\n+     * Code snippet demonstrating how to send a batch to Service Bus queue or topic.\n+     */\n+    public void sendBatch() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9035b732d53185d7a7515b952c67787e839e8235"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzA2NTQ4OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1OTo0N1rOF8cCuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1OTo0N1rOF8cCuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxODMzMQ==", "bodyText": "unneeded new line", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398918331", "createdAt": "2020-03-26T21:59:47Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java", "diffHunk": "@@ -0,0 +1,122 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.messaging.servicebus.models.CreateBatchOptions;\n+import reactor.core.Exceptions;\n+import reactor.core.publisher.Flux;\n+import reactor.core.publisher.Mono;\n+\n+import java.util.concurrent.atomic.AtomicReference;\n+\n+import static java.nio.charset.StandardCharsets.UTF_8;\n+\n+/**\n+ * Contains code snippets when generating javadocs through doclets for {@link ServiceBusSenderAsyncClient}.\n+ */\n+public class ServiceBusSenderAsyncClientJavaDocCodeSamples {\n+    private final ServiceBusClientBuilder builder = new ServiceBusClientBuilder()\n+        .connectionString(\"fake-string\");\n+\n+    /**\n+     * Code snippet demonstrating how to create an {@link ServiceBusSenderAsyncClient}.\n+     */\n+    public void instantiate() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncsenderclient.instantiation\n+        // The required parameter is a way to authenticate with Service Bus using credentials.\n+        // The connectionString provides a way to authenticate with Service Bus.\n+        ServiceBusSenderAsyncClient sender = new ServiceBusClientBuilder()\n+            .connectionString(\n+                \"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};SharedAccessKey={key}\")\n+            .buildSenderClientBuilder()\n+            .entityName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncsenderclient.instantiation\n+\n+        sender.close();\n+    }\n+\n+    /**\n+     * Code snippet demonstrating how to send a batch to Service Bus queue or topic.\n+     */\n+    public void sendBatch() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncsenderclient.createBatch\n+        // The required parameter is a way to authenticate with Service Bus using credentials.\n+        // The connectionString provides a way to authenticate with Service Bus.\n+        ServiceBusSenderAsyncClient sender = new ServiceBusClientBuilder()\n+            .connectionString(\n+                \"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};SharedAccessKey={key}\")\n+            .buildSenderClientBuilder()\n+            .entityName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+\n+        // Creating a batch without options set, will allow for automatic routing of events to any partition.\n+        sender.createBatch().flatMap(batch -> {\n+            batch.tryAdd(new ServiceBusMessage(\"test-1\".getBytes(UTF_8)));\n+            batch.tryAdd(new ServiceBusMessage(\"test-2\".getBytes(UTF_8)));\n+            return sender.send(batch);\n+        }).subscribe(unused -> {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9035b732d53185d7a7515b952c67787e839e8235"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzA2NjI4OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1OTo1OFrOF8cDKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTo1OTo1OFrOF8cDKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxODQ0MQ==", "bodyText": "\"QUEUE OR TOPIC NAME\"", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398918441", "createdAt": "2020-03-26T21:59:58Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java", "diffHunk": "@@ -0,0 +1,122 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.messaging.servicebus.models.CreateBatchOptions;\n+import reactor.core.Exceptions;\n+import reactor.core.publisher.Flux;\n+import reactor.core.publisher.Mono;\n+\n+import java.util.concurrent.atomic.AtomicReference;\n+\n+import static java.nio.charset.StandardCharsets.UTF_8;\n+\n+/**\n+ * Contains code snippets when generating javadocs through doclets for {@link ServiceBusSenderAsyncClient}.\n+ */\n+public class ServiceBusSenderAsyncClientJavaDocCodeSamples {\n+    private final ServiceBusClientBuilder builder = new ServiceBusClientBuilder()\n+        .connectionString(\"fake-string\");\n+\n+    /**\n+     * Code snippet demonstrating how to create an {@link ServiceBusSenderAsyncClient}.\n+     */\n+    public void instantiate() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncsenderclient.instantiation\n+        // The required parameter is a way to authenticate with Service Bus using credentials.\n+        // The connectionString provides a way to authenticate with Service Bus.\n+        ServiceBusSenderAsyncClient sender = new ServiceBusClientBuilder()\n+            .connectionString(\n+                \"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};SharedAccessKey={key}\")\n+            .buildSenderClientBuilder()\n+            .entityName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncsenderclient.instantiation\n+\n+        sender.close();\n+    }\n+\n+    /**\n+     * Code snippet demonstrating how to send a batch to Service Bus queue or topic.\n+     */\n+    public void sendBatch() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncsenderclient.createBatch\n+        // The required parameter is a way to authenticate with Service Bus using credentials.\n+        // The connectionString provides a way to authenticate with Service Bus.\n+        ServiceBusSenderAsyncClient sender = new ServiceBusClientBuilder()\n+            .connectionString(\n+                \"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};SharedAccessKey={key}\")\n+            .buildSenderClientBuilder()\n+            .entityName(\"<QUEUE-NAME>\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9035b732d53185d7a7515b952c67787e839e8235"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzA3MTMwOnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMjowMToyOVrOF8cGKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMjowMToyOVrOF8cGKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxOTIwOQ==", "bodyText": "is there a createBatch that takes an int parameter? I think the snippet text is wrong", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398919209", "createdAt": "2020-03-26T22:01:29Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java", "diffHunk": "@@ -0,0 +1,122 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.messaging.servicebus.models.CreateBatchOptions;\n+import reactor.core.Exceptions;\n+import reactor.core.publisher.Flux;\n+import reactor.core.publisher.Mono;\n+\n+import java.util.concurrent.atomic.AtomicReference;\n+\n+import static java.nio.charset.StandardCharsets.UTF_8;\n+\n+/**\n+ * Contains code snippets when generating javadocs through doclets for {@link ServiceBusSenderAsyncClient}.\n+ */\n+public class ServiceBusSenderAsyncClientJavaDocCodeSamples {\n+    private final ServiceBusClientBuilder builder = new ServiceBusClientBuilder()\n+        .connectionString(\"fake-string\");\n+\n+    /**\n+     * Code snippet demonstrating how to create an {@link ServiceBusSenderAsyncClient}.\n+     */\n+    public void instantiate() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncsenderclient.instantiation\n+        // The required parameter is a way to authenticate with Service Bus using credentials.\n+        // The connectionString provides a way to authenticate with Service Bus.\n+        ServiceBusSenderAsyncClient sender = new ServiceBusClientBuilder()\n+            .connectionString(\n+                \"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};SharedAccessKey={key}\")\n+            .buildSenderClientBuilder()\n+            .entityName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncsenderclient.instantiation\n+\n+        sender.close();\n+    }\n+\n+    /**\n+     * Code snippet demonstrating how to send a batch to Service Bus queue or topic.\n+     */\n+    public void sendBatch() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncsenderclient.createBatch\n+        // The required parameter is a way to authenticate with Service Bus using credentials.\n+        // The connectionString provides a way to authenticate with Service Bus.\n+        ServiceBusSenderAsyncClient sender = new ServiceBusClientBuilder()\n+            .connectionString(\n+                \"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};SharedAccessKey={key}\")\n+            .buildSenderClientBuilder()\n+            .entityName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+\n+        // Creating a batch without options set, will allow for automatic routing of events to any partition.\n+        sender.createBatch().flatMap(batch -> {\n+            batch.tryAdd(new ServiceBusMessage(\"test-1\".getBytes(UTF_8)));\n+            batch.tryAdd(new ServiceBusMessage(\"test-2\".getBytes(UTF_8)));\n+            return sender.send(batch);\n+        }).subscribe(unused -> {\n+\n+        },\n+            error -> System.err.println(\"Error occurred while sending batch:\" + error),\n+            () -> System.out.println(\"Send complete.\"));\n+        // END: com.azure.messaging.servicebus.servicebusasyncsenderclient.createBatch\n+\n+        sender.close();\n+    }\n+\n+\n+    /**\n+     * Code snippet demonstrating how to create a size-limited {@link ServiceBusMessageBatch} and send it.\n+     */\n+    public void batchSizeLimited() {\n+        final ServiceBusSenderAsyncClient sender = new ServiceBusClientBuilder()\n+            .buildSenderClientBuilder()\n+            .buildAsyncClient();\n+\n+        final ServiceBusMessage firstMessage = new ServiceBusMessage(\"92\".getBytes(UTF_8));\n+        firstMessage.getProperties().put(\"telemetry\", \"latency\");\n+        final ServiceBusMessage secondMessage = new ServiceBusMessage(\"98\".getBytes(UTF_8));\n+        secondMessage.getProperties().put(\"telemetry\", \"cpu-temperature\");\n+\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncsenderclient.createBatch#CreateBatchOptions-int", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9035b732d53185d7a7515b952c67787e839e8235"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzM5MTA0OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClientJavaDocCodeSamples.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyMDo0NVrOF8fD1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyMDo0NVrOF8fD1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2Nzc2NQ==", "bodyText": "nit: empty line.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398967765", "createdAt": "2020-03-27T00:20:45Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClientJavaDocCodeSamples.java", "diffHunk": "@@ -0,0 +1,140 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.identity.DefaultAzureCredentialBuilder;\n+import org.reactivestreams.Subscription;\n+import reactor.core.Disposable;\n+import reactor.core.publisher.BaseSubscriber;\n+\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import static java.nio.charset.StandardCharsets.UTF_8;\n+\n+/**\n+ * Code snippets demonstrating various {@link ServiceBusReceiverAsyncClient} scenarios.\n+ */\n+public class ServiceBusReceiverAsyncClientJavaDocCodeSamples {\n+\n+    private final ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+        .connectionString(\"fake-string\")\n+        .buildReceiverClientBuilder()\n+        .queueName(\"<QUEUE-NAME>\")\n+        .buildAsyncClient();\n+\n+    public void initialization() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiation\n+        // The required parameters is connectionString, a way to authenticate with Service Bus using credentials.\n+        ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+            .connectionString(\"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};\"\n+                + \"SharedAccessKey={key};EntityPath={eh-name}\")\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiation\n+\n+        consumer.close();\n+    }\n+\n+    public void instantiateWithDefaultCredential() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiateWithDefaultCredential\n+        // The required parameters is connectionString, a way to authenticate with Service Bus using credentials.\n+        ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+            .credential(\"<<fully-qualified-namespace>>\",\n+                new DefaultAzureCredentialBuilder().build())\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiateWithDefaultCredential\n+\n+        consumer.close();\n+    }\n+\n+    /**\n+     * Receives message from a queue or topic.\n+     */\n+    public void receive() {\n+        ServiceBusReceiverAsyncClient receiver = new ServiceBusClientBuilder()\n+            .connectionString(\"fake-string\")\n+            .buildReceiverClientBuilder()\n+            .buildAsyncClient();\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#message\n+\n+\n+        // Keep a reference to `subscription`. When the program is finished receiving messages, call\n+        // subscription.dispose(). This will stop fetching messages from the Service Bus.\n+        Disposable subscription = receiver.receive()\n+            .take(1)\n+            .subscribe(receivedMessage -> {\n+                String messageId = receivedMessage.getMessageId();\n+\n+                System.out.printf(\"Received message messageId %s%n\", messageId);\n+                System.out.printf(\"Contents of message as string: %s%n\", new String(receivedMessage.getBody(), UTF_8));\n+            }, error -> System.err.print(error.toString()));\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#message\n+\n+        // When program ends, or you're done receiving all messages.\n+        subscription.dispose();\n+    }\n+\n+    /**\n+     * Receives message with back pressure.\n+     */\n+    public void receiveBackpressure() {\n+\n+        ServiceBusReceiverAsyncClient receiver = new ServiceBusClientBuilder()\n+            .connectionString(\"fake-string\")\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#basesubscriber\n+        receiver.receive().subscribe(new BaseSubscriber<ServiceBusReceivedMessage>() {\n+            private static final int NUMBER_OF_MESSAGES = 5;\n+            private final AtomicInteger currentNumberOfMessages = new AtomicInteger();\n+\n+            @Override\n+            protected void hookOnSubscribe(Subscription subscription) {\n+                // Tell the Publisher we only want 5 message at a time.\n+                request(NUMBER_OF_MESSAGES);\n+            }\n+\n+            @Override\n+            protected void hookOnNext(ServiceBusReceivedMessage value) {\n+                // Process the ServiceBusReceivedMessage\n+\n+                // If the number of messages we have currently received is a multiple of 5, that means we have reached\n+                // the last message the Subscriber will provide to us. Invoking request(long) here, tells the Publisher\n+                // that the subscriber is ready to get more messages from upstream.\n+                if (currentNumberOfMessages.incrementAndGet() % 5 == 0) {\n+                    request(NUMBER_OF_MESSAGES);\n+                }\n+            }\n+        });\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#basesubscriber\n+    }\n+\n+    /**\n+     * Receives from all the messages.\n+     */\n+    public void receiveAll() {\n+        ServiceBusReceiverAsyncClient receiver = new ServiceBusClientBuilder()\n+            .connectionString(\"fake-string\")\n+            .buildReceiverClientBuilder()\n+            .buildAsyncClient();\n+\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#all\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7aafca1c0053a296ec7077341069b5dfbf303b34"}, "originalPosition": 128}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzM5MTYxOnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClientJavaDocCodeSamples.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyMTowNVrOF8fEKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyMTowNVrOF8fEKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2Nzg1MQ==", "bodyText": "you need to specify queueName or topicName + subscription.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398967851", "createdAt": "2020-03-27T00:21:05Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClientJavaDocCodeSamples.java", "diffHunk": "@@ -0,0 +1,140 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.identity.DefaultAzureCredentialBuilder;\n+import org.reactivestreams.Subscription;\n+import reactor.core.Disposable;\n+import reactor.core.publisher.BaseSubscriber;\n+\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import static java.nio.charset.StandardCharsets.UTF_8;\n+\n+/**\n+ * Code snippets demonstrating various {@link ServiceBusReceiverAsyncClient} scenarios.\n+ */\n+public class ServiceBusReceiverAsyncClientJavaDocCodeSamples {\n+\n+    private final ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+        .connectionString(\"fake-string\")\n+        .buildReceiverClientBuilder()\n+        .queueName(\"<QUEUE-NAME>\")\n+        .buildAsyncClient();\n+\n+    public void initialization() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiation\n+        // The required parameters is connectionString, a way to authenticate with Service Bus using credentials.\n+        ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+            .connectionString(\"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};\"\n+                + \"SharedAccessKey={key};EntityPath={eh-name}\")\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiation\n+\n+        consumer.close();\n+    }\n+\n+    public void instantiateWithDefaultCredential() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiateWithDefaultCredential\n+        // The required parameters is connectionString, a way to authenticate with Service Bus using credentials.\n+        ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+            .credential(\"<<fully-qualified-namespace>>\",\n+                new DefaultAzureCredentialBuilder().build())\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiateWithDefaultCredential\n+\n+        consumer.close();\n+    }\n+\n+    /**\n+     * Receives message from a queue or topic.\n+     */\n+    public void receive() {\n+        ServiceBusReceiverAsyncClient receiver = new ServiceBusClientBuilder()\n+            .connectionString(\"fake-string\")\n+            .buildReceiverClientBuilder()\n+            .buildAsyncClient();\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#message\n+\n+\n+        // Keep a reference to `subscription`. When the program is finished receiving messages, call\n+        // subscription.dispose(). This will stop fetching messages from the Service Bus.\n+        Disposable subscription = receiver.receive()\n+            .take(1)\n+            .subscribe(receivedMessage -> {\n+                String messageId = receivedMessage.getMessageId();\n+\n+                System.out.printf(\"Received message messageId %s%n\", messageId);\n+                System.out.printf(\"Contents of message as string: %s%n\", new String(receivedMessage.getBody(), UTF_8));\n+            }, error -> System.err.print(error.toString()));\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#message\n+\n+        // When program ends, or you're done receiving all messages.\n+        subscription.dispose();\n+    }\n+\n+    /**\n+     * Receives message with back pressure.\n+     */\n+    public void receiveBackpressure() {\n+\n+        ServiceBusReceiverAsyncClient receiver = new ServiceBusClientBuilder()\n+            .connectionString(\"fake-string\")\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#basesubscriber\n+        receiver.receive().subscribe(new BaseSubscriber<ServiceBusReceivedMessage>() {\n+            private static final int NUMBER_OF_MESSAGES = 5;\n+            private final AtomicInteger currentNumberOfMessages = new AtomicInteger();\n+\n+            @Override\n+            protected void hookOnSubscribe(Subscription subscription) {\n+                // Tell the Publisher we only want 5 message at a time.\n+                request(NUMBER_OF_MESSAGES);\n+            }\n+\n+            @Override\n+            protected void hookOnNext(ServiceBusReceivedMessage value) {\n+                // Process the ServiceBusReceivedMessage\n+\n+                // If the number of messages we have currently received is a multiple of 5, that means we have reached\n+                // the last message the Subscriber will provide to us. Invoking request(long) here, tells the Publisher\n+                // that the subscriber is ready to get more messages from upstream.\n+                if (currentNumberOfMessages.incrementAndGet() % 5 == 0) {\n+                    request(NUMBER_OF_MESSAGES);\n+                }\n+            }\n+        });\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#basesubscriber\n+    }\n+\n+    /**\n+     * Receives from all the messages.\n+     */\n+    public void receiveAll() {\n+        ServiceBusReceiverAsyncClient receiver = new ServiceBusClientBuilder()\n+            .connectionString(\"fake-string\")\n+            .buildReceiverClientBuilder()\n+            .buildAsyncClient();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7aafca1c0053a296ec7077341069b5dfbf303b34"}, "originalPosition": 125}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzM5MjM5OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClientJavaDocCodeSamples.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyMTozMlrOF8fElQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyMTozMlrOF8fElQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2Nzk1Nw==", "bodyText": "you need to specify queueName or topicName + subscription.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398967957", "createdAt": "2020-03-27T00:21:32Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClientJavaDocCodeSamples.java", "diffHunk": "@@ -0,0 +1,140 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.identity.DefaultAzureCredentialBuilder;\n+import org.reactivestreams.Subscription;\n+import reactor.core.Disposable;\n+import reactor.core.publisher.BaseSubscriber;\n+\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import static java.nio.charset.StandardCharsets.UTF_8;\n+\n+/**\n+ * Code snippets demonstrating various {@link ServiceBusReceiverAsyncClient} scenarios.\n+ */\n+public class ServiceBusReceiverAsyncClientJavaDocCodeSamples {\n+\n+    private final ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+        .connectionString(\"fake-string\")\n+        .buildReceiverClientBuilder()\n+        .queueName(\"<QUEUE-NAME>\")\n+        .buildAsyncClient();\n+\n+    public void initialization() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiation\n+        // The required parameters is connectionString, a way to authenticate with Service Bus using credentials.\n+        ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+            .connectionString(\"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};\"\n+                + \"SharedAccessKey={key};EntityPath={eh-name}\")\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiation\n+\n+        consumer.close();\n+    }\n+\n+    public void instantiateWithDefaultCredential() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiateWithDefaultCredential\n+        // The required parameters is connectionString, a way to authenticate with Service Bus using credentials.\n+        ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+            .credential(\"<<fully-qualified-namespace>>\",\n+                new DefaultAzureCredentialBuilder().build())\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiateWithDefaultCredential\n+\n+        consumer.close();\n+    }\n+\n+    /**\n+     * Receives message from a queue or topic.\n+     */\n+    public void receive() {\n+        ServiceBusReceiverAsyncClient receiver = new ServiceBusClientBuilder()\n+            .connectionString(\"fake-string\")\n+            .buildReceiverClientBuilder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7aafca1c0053a296ec7077341069b5dfbf303b34"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzM5Mzk2OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClientJavaDocCodeSamples.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyMjoyMFrOF8fFbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyMjoyMFrOF8fFbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2ODE3Mw==", "bodyText": "You need to dispose of consumer as well, like you did in other samples. (even if it doesn't appear in the snippet.)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398968173", "createdAt": "2020-03-27T00:22:20Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClientJavaDocCodeSamples.java", "diffHunk": "@@ -0,0 +1,140 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.identity.DefaultAzureCredentialBuilder;\n+import org.reactivestreams.Subscription;\n+import reactor.core.Disposable;\n+import reactor.core.publisher.BaseSubscriber;\n+\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import static java.nio.charset.StandardCharsets.UTF_8;\n+\n+/**\n+ * Code snippets demonstrating various {@link ServiceBusReceiverAsyncClient} scenarios.\n+ */\n+public class ServiceBusReceiverAsyncClientJavaDocCodeSamples {\n+\n+    private final ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+        .connectionString(\"fake-string\")\n+        .buildReceiverClientBuilder()\n+        .queueName(\"<QUEUE-NAME>\")\n+        .buildAsyncClient();\n+\n+    public void initialization() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiation\n+        // The required parameters is connectionString, a way to authenticate with Service Bus using credentials.\n+        ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+            .connectionString(\"Endpoint={fully-qualified-namespace};SharedAccessKeyName={policy-name};\"\n+                + \"SharedAccessKey={key};EntityPath={eh-name}\")\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiation\n+\n+        consumer.close();\n+    }\n+\n+    public void instantiateWithDefaultCredential() {\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiateWithDefaultCredential\n+        // The required parameters is connectionString, a way to authenticate with Service Bus using credentials.\n+        ServiceBusReceiverAsyncClient consumer = new ServiceBusClientBuilder()\n+            .credential(\"<<fully-qualified-namespace>>\",\n+                new DefaultAzureCredentialBuilder().build())\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiateWithDefaultCredential\n+\n+        consumer.close();\n+    }\n+\n+    /**\n+     * Receives message from a queue or topic.\n+     */\n+    public void receive() {\n+        ServiceBusReceiverAsyncClient receiver = new ServiceBusClientBuilder()\n+            .connectionString(\"fake-string\")\n+            .buildReceiverClientBuilder()\n+            .buildAsyncClient();\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#message\n+\n+\n+        // Keep a reference to `subscription`. When the program is finished receiving messages, call\n+        // subscription.dispose(). This will stop fetching messages from the Service Bus.\n+        Disposable subscription = receiver.receive()\n+            .take(1)\n+            .subscribe(receivedMessage -> {\n+                String messageId = receivedMessage.getMessageId();\n+\n+                System.out.printf(\"Received message messageId %s%n\", messageId);\n+                System.out.printf(\"Contents of message as string: %s%n\", new String(receivedMessage.getBody(), UTF_8));\n+            }, error -> System.err.print(error.toString()));\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#message\n+\n+        // When program ends, or you're done receiving all messages.\n+        subscription.dispose();\n+    }\n+\n+    /**\n+     * Receives message with back pressure.\n+     */\n+    public void receiveBackpressure() {\n+\n+        ServiceBusReceiverAsyncClient receiver = new ServiceBusClientBuilder()\n+            .connectionString(\"fake-string\")\n+            .buildReceiverClientBuilder()\n+            .queueName(\"<QUEUE-NAME>\")\n+            .buildAsyncClient();\n+\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#basesubscriber\n+        receiver.receive().subscribe(new BaseSubscriber<ServiceBusReceivedMessage>() {\n+            private static final int NUMBER_OF_MESSAGES = 5;\n+            private final AtomicInteger currentNumberOfMessages = new AtomicInteger();\n+\n+            @Override\n+            protected void hookOnSubscribe(Subscription subscription) {\n+                // Tell the Publisher we only want 5 message at a time.\n+                request(NUMBER_OF_MESSAGES);\n+            }\n+\n+            @Override\n+            protected void hookOnNext(ServiceBusReceivedMessage value) {\n+                // Process the ServiceBusReceivedMessage\n+\n+                // If the number of messages we have currently received is a multiple of 5, that means we have reached\n+                // the last message the Subscriber will provide to us. Invoking request(long) here, tells the Publisher\n+                // that the subscriber is ready to get more messages from upstream.\n+                if (currentNumberOfMessages.incrementAndGet() % 5 == 0) {\n+                    request(NUMBER_OF_MESSAGES);\n+                }\n+            }\n+        });\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#basesubscriber\n+    }\n+\n+    /**\n+     * Receives from all the messages.\n+     */\n+    public void receiveAll() {\n+        ServiceBusReceiverAsyncClient receiver = new ServiceBusClientBuilder()\n+            .connectionString(\"fake-string\")\n+            .buildReceiverClientBuilder()\n+            .buildAsyncClient();\n+\n+        // BEGIN: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#all\n+\n+        Disposable subscription = receiver.receive().subscribe(receivedMessage -> {\n+            String messageId = receivedMessage.getMessageId();\n+\n+            System.out.printf(\"Received message messageId %s%n\", messageId);\n+            System.out.printf(\"Contents of message as string: %s%n\", new String(receivedMessage.getBody(), UTF_8));\n+        });\n+\n+        // When program ends, or you're done receiving all messages.\n+        subscription.dispose();\n+        // END: com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#all\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7aafca1c0053a296ec7077341069b5dfbf303b34"}, "originalPosition": 139}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzM5NjYyOnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyMzozNlrOF8fG4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyMzozNlrOF8fG4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2ODU0NA==", "bodyText": "\"Receive a message from Service Bus resource\"", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398968544", "createdAt": "2020-03-27T00:23:36Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "diffHunk": "@@ -36,9 +37,25 @@\n  * An <b>asynchronous</b> receiver responsible for receiving {@link ServiceBusReceivedMessage} from a specific queue or\n  * topic on Azure Service Bus.\n  *\n+ * <p><strong>Create an instance of receiver</strong></p>\n+ * {@codesnippet com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiation}\n+ *\n+ * <p><strong>Create an instance of sender using default credential</strong></p>\n+ * {@codesnippet com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiateWithDefaultCredential}\n+ *\n+ * <p><strong>Create a sender and receive message from Service Bus resource</strong></p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7aafca1c0053a296ec7077341069b5dfbf303b34"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzM5Nzk5OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyNDoxNlrOF8fHnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QwMDoyNDoxNlrOF8fHnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2ODczMw==", "bodyText": "This is very similar to the one above. I don't think you need to show the \".take(1)\" example, and instead create with some receive message options like RECEIVE_AND_DELETE or auto renew lock.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9609#discussion_r398968733", "createdAt": "2020-03-27T00:24:16Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "diffHunk": "@@ -36,9 +37,25 @@\n  * An <b>asynchronous</b> receiver responsible for receiving {@link ServiceBusReceivedMessage} from a specific queue or\n  * topic on Azure Service Bus.\n  *\n+ * <p><strong>Create an instance of receiver</strong></p>\n+ * {@codesnippet com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiation}\n+ *\n+ * <p><strong>Create an instance of sender using default credential</strong></p>\n+ * {@codesnippet com.azure.messaging.servicebus.servicebusasyncreceiverclient.instantiateWithDefaultCredential}\n+ *\n+ * <p><strong>Create a sender and receive message from Service Bus resource</strong></p>\n+ * {@codesnippet com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#message}\n+ *\n+ * <p><strong>Create a sender and receive all the messages from Service Bus resource</strong></p>\n+ * {@codesnippet com.azure.messaging.servicebus.servicebusasyncreceiverclient.receive#all }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7aafca1c0053a296ec7077341069b5dfbf303b34"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2101, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}