{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0NTA1NzAw", "number": 10895, "title": "Move JsonSerializable/Resource to implementation", "bodyText": "", "createdAt": "2020-05-07T07:19:19Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895", "merged": true, "mergeCommit": {"oid": "ddf1ee7fd9b304ad45dc80966dc2f3f3d470cc97"}, "closed": true, "closedAt": "2020-05-11T21:21:44Z", "author": {"login": "xinlian12"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABce3_lBAH2gAyNDE0NTA1NzAwOjY4ZGZjYmU0MTI1MmMwZTk5OGU1ZTFlODg0MWZlYjM2ZGEzMWE0ZWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgUwwggFqTQwOTQ2MTk4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "68dfcbe41252c0e998e5e1e8841feb36da31a4ec", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/68dfcbe41252c0e998e5e1e8841feb36da31a4ec", "committedDate": "2020-05-07T07:18:02Z", "message": "Move JsonSerializable, Resource to implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MjExMTU2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#pullrequestreview-407211156", "createdAt": "2020-05-07T07:25:17Z", "commit": {"oid": "68dfcbe41252c0e998e5e1e8841feb36da31a4ec"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwNzoyNToxN1rOGRxs5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwNzoyNToxN1rOGRxs5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI5MzI4NA==", "bodyText": "classes in com.azure.cosmos.models are part of our public api.\nDoes ResourceWrapper have to be in com.azure.cosmos.models ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#discussion_r421293284", "createdAt": "2020-05-07T07:25:17Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/models/ResourceWrapper.java", "diffHunk": "@@ -0,0 +1,21 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.cosmos.models;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68dfcbe41252c0e998e5e1e8841feb36da31a4ec"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4e706a7efc2fe5b72dedcf0b927a581d0d28f7f", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c4e706a7efc2fe5b72dedcf0b927a581d0d28f7f", "committedDate": "2020-05-07T15:37:59Z", "message": "Merged master and resolved conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32b7988756ff2fe31318eda0d641df9bf9d67f0c", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/32b7988756ff2fe31318eda0d641df9bf9d67f0c", "committedDate": "2020-05-07T17:14:58Z", "message": "i# This is a combination of 2 commits.\n\na typo in previous PR\n\nfix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f1a654759c39d01dc6d4618a378c4059f438985", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5f1a654759c39d01dc6d4618a378c4059f438985", "committedDate": "2020-05-07T18:12:44Z", "message": "fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e8e569d3b5762fd84c793911028a98261263780", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1e8e569d3b5762fd84c793911028a98261263780", "committedDate": "2020-05-07T20:56:34Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26de27cb7620f8dafa6cb503641a83ac3ede5760", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/26de27cb7620f8dafa6cb503641a83ac3ede5760", "committedDate": "2020-05-08T21:54:58Z", "message": "fix for the populatePropertyBag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc443050b1aacc4a8d4c42124e79bb77a03c6051", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cc443050b1aacc4a8d4c42124e79bb77a03c6051", "committedDate": "2020-05-09T05:35:34Z", "message": "merge and resolve conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NzcyMTQz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#pullrequestreview-408772143", "createdAt": "2020-05-10T18:57:47Z", "commit": {"oid": "cc443050b1aacc4a8d4c42124e79bb77a03c6051"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQxODo1Nzo0OFrOGTGpNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMFQxOToxMTo0OFrOGTGvmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY4NDk4Mw==", "bodyText": "Since these API names got changed in CosmosContainerProperties, we should update them here too.\nsetAnalyticalStoreTimeToLiveInSeconds\nNot in this PR - since this is implementation change, we should do this in a follow up PR.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#discussion_r422684983", "createdAt": "2020-05-10T18:57:48Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/DocumentCollection.java", "diffHunk": "@@ -165,6 +163,45 @@ public void setDefaultTimeToLive(Integer timeToLive) {\n         }\n     }\n \n+    /**\n+     * Sets the analytical storage time to live in seconds for items in a container from the Azure Cosmos DB service.\n+     *\n+     * It is an optional property. A valid value must be either a nonzero positive integer, '-1', or 0.\n+     * By default, AnalyticalStorageTimeToLive is set to 0 meaning the analytical store is turned off for the container;\n+     * -1 means documents in analytical store never expire.\n+     * The unit of measurement is seconds. The maximum allowed value is 2147483647.\n+     *\n+     * @param timeToLive the analytical storage time to live in seconds.\n+     * @return the CosmosContainerProperties.\n+     */\n+    public void setAnalyticalStorageTimeToLiveInSeconds(Integer timeToLive) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc443050b1aacc4a8d4c42124e79bb77a03c6051"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY4NTM3MA==", "bodyText": "CosmosError is in models (public surface) - and is still extending internal types Resource and JsonSerializable. This is exposed using CosmosClientException which can lead to potential exposure of Jackson libraries.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#discussion_r422685370", "createdAt": "2020-05-10T19:01:05Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/models/CosmosError.java", "diffHunk": "@@ -4,6 +4,7 @@\n package com.azure.cosmos.models;\n \n import com.azure.cosmos.implementation.Constants;\n+import com.azure.cosmos.implementation.Resource;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc443050b1aacc4a8d4c42124e79bb77a03c6051"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY4NjA5NA==", "bodyText": "Having ResourceWrapper in public should be fine in my opinion if it is not leaking any Jackson libraries.\nNo need to do extra work through *BridgeInternals if not required.\n@moderakh  thoughts ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#discussion_r422686094", "createdAt": "2020-05-10T19:07:00Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/models/ResourceWrapper.java", "diffHunk": "@@ -0,0 +1,21 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.cosmos.models;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI5MzI4NA=="}, "originalCommit": {"oid": "68dfcbe41252c0e998e5e1e8841feb36da31a4ec"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY4NjYxNw==", "bodyText": "This is a cosmosdb management related library change, not ours :)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#discussion_r422686617", "createdAt": "2020-05-10T19:11:48Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/mgmt/src/main/java/com/azure/management/cosmosdb/DatabaseAccountListKeysResult.java", "diffHunk": "@@ -1,5 +1,6 @@\n // Copyright (c) Microsoft Corporation. All rights reserved.\n // Licensed under the MIT License.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc443050b1aacc4a8d4c42124e79bb77a03c6051"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5MzcxMTM3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#pullrequestreview-409371137", "createdAt": "2020-05-11T17:17:16Z", "commit": {"oid": "cc443050b1aacc4a8d4c42124e79bb77a03c6051"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNzoxNzoxN1rOGTlwoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNzoxNzoxN1rOGTlwoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE5NDc4NA==", "bodyText": "I am not sure yet if we should have JsonSerializableWrapper, but if we decide to go with JsonSerializable, then you could move this code to JsonSerializable and and here just have super(jsonStirng).", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#discussion_r423194784", "createdAt": "2020-05-11T17:17:17Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/models/CompositePath.java", "diffHunk": "@@ -26,7 +28,7 @@ public CompositePath() {\n      * @param jsonString the json string that represents the included path.\n      */\n     CompositePath(String jsonString) {\n-        super(jsonString);\n+        this.jsonSerializable = new JsonSerializable(jsonString);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc443050b1aacc4a8d4c42124e79bb77a03c6051"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5Mzg4NjUy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#pullrequestreview-409388652", "createdAt": "2020-05-11T17:40:48Z", "commit": {"oid": "cc443050b1aacc4a8d4c42124e79bb77a03c6051"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNzo0MDo0OFrOGTmnHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxNzo0MDo0OFrOGTmnHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzIwODczMg==", "bodyText": "We are validating these resources in RxDocumentClientImpl anyway, so we could skip these altogether? same for database too. Minor change, need not worry about this in this PR.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#discussion_r423208732", "createdAt": "2020-05-11T17:40:48Z", "author": {"login": "mbhaskar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosAsyncContainer.java", "diffHunk": "@@ -154,7 +154,7 @@ public String getId() {\n     public Mono<CosmosAsyncContainerResponse> replace(\n         CosmosContainerProperties containerProperties,\n         CosmosContainerRequestOptions options) {\n-        ModelBridgeInternal.validateResource(containerProperties);\n+        ModelBridgeInternal.validateResource(ModelBridgeInternal.getResourceFromResourceWrapper(containerProperties));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc443050b1aacc4a8d4c42124e79bb77a03c6051"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NDYxOTg0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10895#pullrequestreview-409461984", "createdAt": "2020-05-11T19:23:01Z", "commit": {"oid": "cc443050b1aacc4a8d4c42124e79bb77a03c6051"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4382, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}