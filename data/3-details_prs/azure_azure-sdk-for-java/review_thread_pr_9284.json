{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMzA3Njkw", "number": 9284, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzoyMToxMFrODp8_wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzoyMTo1NFrODp9AyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MzE3NTcwOnYy", "diffSide": "RIGHT", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Configuration.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzoyMToxMFrOF5cr3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxODowODoyNFrOF5eR9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc4MzEzNA==", "bodyText": "Do we need both BASE_CONFIGURATIONS and GLOBAL_CONFIGURATION? We can directly use the global configurations as the base when creating a new instance. Both of these should be immutable anyway.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9284#discussion_r395783134", "createdAt": "2020-03-20T17:21:10Z", "author": {"login": "srnagar"}, "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Configuration.java", "diffHunk": "@@ -120,22 +129,30 @@\n         PROPERTY_AZURE_TRACING_DISABLED,\n     };\n \n-    /**\n+    /*\n+     * The base set of configurations that is loaded at the start of the application. This will be used to pre-populate\n+     * all further Configurations created.\n+     */\n+    private static final Configuration BASE_CONFIGURATIONS = loadBaseConfiguration();\n+\n+    /*\n      * Gets the global configuration shared by all client libraries.\n      */\n-    private static final Configuration GLOBAL_CONFIGURATION = new Configuration();\n+    private static final Configuration GLOBAL_CONFIGURATION = BASE_CONFIGURATIONS.clone();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4447c77b3ac8ccc5fceafb4145231bbe665953d"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc5MTEwOQ==", "bodyText": "This is keeping inline with previous behavior where a Configuration would load the base set of Azure configurations on the first get call. Instead of loading these once per instance (worst case scenario) populate a static internal instance that gets copied into each new configuration.\nThe backing map for GLOBAL_CONFIGURATION is able to be mutated, the reference itself cannot be though.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9284#discussion_r395791109", "createdAt": "2020-03-20T17:35:27Z", "author": {"login": "alzimmermsft"}, "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Configuration.java", "diffHunk": "@@ -120,22 +129,30 @@\n         PROPERTY_AZURE_TRACING_DISABLED,\n     };\n \n-    /**\n+    /*\n+     * The base set of configurations that is loaded at the start of the application. This will be used to pre-populate\n+     * all further Configurations created.\n+     */\n+    private static final Configuration BASE_CONFIGURATIONS = loadBaseConfiguration();\n+\n+    /*\n      * Gets the global configuration shared by all client libraries.\n      */\n-    private static final Configuration GLOBAL_CONFIGURATION = new Configuration();\n+    private static final Configuration GLOBAL_CONFIGURATION = BASE_CONFIGURATIONS.clone();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc4MzEzNA=="}, "originalCommit": {"oid": "b4447c77b3ac8ccc5fceafb4145231bbe665953d"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTgwOTI2OA==", "bodyText": "Removed", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9284#discussion_r395809268", "createdAt": "2020-03-20T18:08:24Z", "author": {"login": "alzimmermsft"}, "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Configuration.java", "diffHunk": "@@ -120,22 +129,30 @@\n         PROPERTY_AZURE_TRACING_DISABLED,\n     };\n \n-    /**\n+    /*\n+     * The base set of configurations that is loaded at the start of the application. This will be used to pre-populate\n+     * all further Configurations created.\n+     */\n+    private static final Configuration BASE_CONFIGURATIONS = loadBaseConfiguration();\n+\n+    /*\n      * Gets the global configuration shared by all client libraries.\n      */\n-    private static final Configuration GLOBAL_CONFIGURATION = new Configuration();\n+    private static final Configuration GLOBAL_CONFIGURATION = BASE_CONFIGURATIONS.clone();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc4MzEzNA=="}, "originalCommit": {"oid": "b4447c77b3ac8ccc5fceafb4145231bbe665953d"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1MzE3ODMzOnYy", "diffSide": "RIGHT", "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Configuration.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzoyMTo1NFrOF5ctgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxNzoyMTo1NFrOF5ctgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc4MzU1Mg==", "bodyText": "nit:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private static final Configuration BASE_CONFIGURATIONS = loadBaseConfiguration();\n          \n          \n            \n                private static final Configuration BASE_CONFIGURATION = loadBaseConfiguration();", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9284#discussion_r395783552", "createdAt": "2020-03-20T17:21:54Z", "author": {"login": "srnagar"}, "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/Configuration.java", "diffHunk": "@@ -120,22 +129,30 @@\n         PROPERTY_AZURE_TRACING_DISABLED,\n     };\n \n-    /**\n+    /*\n+     * The base set of configurations that is loaded at the start of the application. This will be used to pre-populate\n+     * all further Configurations created.\n+     */\n+    private static final Configuration BASE_CONFIGURATIONS = loadBaseConfiguration();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4447c77b3ac8ccc5fceafb4145231bbe665953d"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 60, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}