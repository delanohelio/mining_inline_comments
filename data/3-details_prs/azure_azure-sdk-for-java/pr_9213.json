{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNzUwNTM0", "number": 9213, "title": "Cosmos api review iteration", "bodyText": "DONE =>\n\nUpdated ChangeFeedProcessorBuilder and CosmosClientBuilder to use builder pattern to set values\nMoved CosmosPagedIterable and CosmosPagedFlux to new util package\nMoved DatabaseAccount to implementation package\nRemoved public constructors from HashIndex and RangeIndex\nUpdated CosmosResourceType to capital enum values\nReduced scope of some public APIs to package-private or protected.\nRenamed public APIs to correct naming conventions (specially for boolean values)\n\nTODO =>\n\nJsonSerializable changes (a lot of APIs are still public, which should not be public)\nCheck if IndexKind enum is necessary or can be removed\nWhy SqlParameterList implements List interface", "createdAt": "2020-03-19T01:40:10Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9213", "merged": true, "mergeCommit": {"oid": "9b6a107ec1de3f1ac58ca660ddd430ea2152bb57"}, "closed": true, "closedAt": "2020-03-20T02:58:24Z", "author": {"login": "kushagraThapar"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPABtmgH2gAyMzkwNzUwNTM0OjU1MjMyYjU3ZjRjMjIyN2I5Y2Q2YjdkMDQ3OTYzMWM3ZWI1OTI1MGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPQTXngH2gAyMzkwNzUwNTM0OjBhNmJiNWYyMzY2NTRiMjc4ODVkODYwNTMzYzliZjI2ODk0ZmJiM2Y=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "55232b57f4c2227b9cd6b7d0479631c7eb59250e", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/55232b57f4c2227b9cd6b7d0479631c7eb59250e", "committedDate": "2020-03-18T23:36:49Z", "message": "Updated ChangedFeedProcessor and CosmosClientBuilder to update the public APIs to follow builder pattern.\nRemoved getters from CosmosClientBuilder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c8f373a0010da90da8693c1ec509e86550139f7", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1c8f373a0010da90da8693c1ec509e86550139f7", "committedDate": "2020-03-19T00:06:51Z", "message": "Moved CosmosPagedIterable and CosmosPagedFlux to util package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "912b1bdcb9201c4daf06bd3b153013551de301d9", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/912b1bdcb9201c4daf06bd3b153013551de301d9", "committedDate": "2020-03-19T00:52:02Z", "message": "Moved DatabaseAccount to implementation package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45430979a39967d981ae66bc44d387d1f7fd891d", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/45430979a39967d981ae66bc44d387d1f7fd891d", "committedDate": "2020-03-19T01:03:51Z", "message": "Removed public constructors from HashIndex, RangeIndex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e3ca23444a53c295176caf2225012f9e01ec181", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7e3ca23444a53c295176caf2225012f9e01ec181", "committedDate": "2020-03-19T01:12:48Z", "message": "Updated CosmosResourceType to upper case ENUM"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "129a3382bb1827e3030fcddddd4691cfff6e6292", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/129a3382bb1827e3030fcddddd4691cfff6e6292", "committedDate": "2020-03-19T01:30:52Z", "message": "Changed getMap from public to protected in JsonSerializable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df46f65e3e0ee16e1541c240ab8306b0843c5633", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/df46f65e3e0ee16e1541c240ab8306b0843c5633", "committedDate": "2020-03-19T02:07:51Z", "message": "Merge branch 'master' into cosmos_api_review_iteration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3Mzc4OTg2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9213#pullrequestreview-377378986", "createdAt": "2020-03-19T02:21:17Z", "commit": {"oid": "129a3382bb1827e3030fcddddd4691cfff6e6292"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMjoyMToxN1rOF4d5eA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMjoyMToxN1rOF4d5eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc1NDQyNA==", "bodyText": "If these methods are not public on builder, and we are not providing getters on the client, How can enduser get the config of the client after creating it?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9213#discussion_r394754424", "createdAt": "2020-03-19T02:21:17Z", "author": {"login": "mbhaskar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosClientBuilder.java", "diffHunk": "@@ -255,7 +255,7 @@ public CosmosClientBuilder setConsistencyLevel(ConsistencyLevel desiredConsisten\n      *\n      * @return the connection policy\n      */\n-    public ConnectionPolicy getConnectionPolicy() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "129a3382bb1827e3030fcddddd4691cfff6e6292"}, "originalPosition": 198}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3Mzg1OTc2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9213#pullrequestreview-377385976", "createdAt": "2020-03-19T02:41:47Z", "commit": {"oid": "df46f65e3e0ee16e1541c240ab8306b0843c5633"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3Mzk1MTk5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9213#pullrequestreview-377395199", "createdAt": "2020-03-19T03:12:16Z", "commit": {"oid": "df46f65e3e0ee16e1541c240ab8306b0843c5633"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMzoxMjoxN1rOF4eq-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMzoxMjoxN1rOF4eq-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2NzA5OQ==", "bodyText": "it looks like the ChangeFeedProcessorOptions still has setters. Should we rename those as well to be consistent with the other changes? BTW my preference is to prefix these using \"with\" but that's probably for a later SDK version :-)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9213#discussion_r394767099", "createdAt": "2020-03-19T03:12:17Z", "author": {"login": "milismsft"}, "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/rx/ChangeFeedProcessorTest.java", "diffHunk": "@@ -81,11 +81,11 @@ public void readFeedDocumentsStartFromBeginning() {\n             ChangeFeedProcessorTest.log.info(\"END processing from thread {}\", Thread.currentThread().getId());\n         }; \n         changeFeedProcessor = ChangeFeedProcessor.changeFeedProcessorBuilder()\n-            .setHostName(hostName)\n-            .setHandleChanges(itemConsumer)\n-            .setFeedContainer(createdFeedCollection)\n-            .setLeaseContainer(createdLeaseCollection)\n-            .setOptions(new ChangeFeedProcessorOptions()\n+            .hostName(hostName)\n+            .handleChanges(itemConsumer)\n+            .feedContainer(createdFeedCollection)\n+            .leaseContainer(createdLeaseCollection)\n+            .options(new ChangeFeedProcessorOptions()\n                 .setLeaseRenewInterval(Duration.ofSeconds(20))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df46f65e3e0ee16e1541c240ab8306b0843c5633"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDA1NDM3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9213#pullrequestreview-377405437", "createdAt": "2020-03-19T03:45:30Z", "commit": {"oid": "df46f65e3e0ee16e1541c240ab8306b0843c5633"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMzo0NTozMFrOF4fLbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwMzo0NTozMFrOF4fLbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc3NTQwNw==", "bodyText": "I feel we are going back and forth with removing set as prefix and then adding it back again and then removing it again. !!", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9213#discussion_r394775407", "createdAt": "2020-03-19T03:45:30Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/rx/ChangeFeedProcessorTest.java", "diffHunk": "@@ -81,11 +81,11 @@ public void readFeedDocumentsStartFromBeginning() {\n             ChangeFeedProcessorTest.log.info(\"END processing from thread {}\", Thread.currentThread().getId());\n         }; \n         changeFeedProcessor = ChangeFeedProcessor.changeFeedProcessorBuilder()\n-            .setHostName(hostName)\n-            .setHandleChanges(itemConsumer)\n-            .setFeedContainer(createdFeedCollection)\n-            .setLeaseContainer(createdLeaseCollection)\n-            .setOptions(new ChangeFeedProcessorOptions()\n+            .hostName(hostName)\n+            .handleChanges(itemConsumer)\n+            .feedContainer(createdFeedCollection)\n+            .leaseContainer(createdLeaseCollection)\n+            .options(new ChangeFeedProcessorOptions()\n                 .setLeaseRenewInterval(Duration.ofSeconds(20))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2NzA5OQ=="}, "originalCommit": {"oid": "df46f65e3e0ee16e1541c240ab8306b0843c5633"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c0c100f8fdfec8a53a2afdd50598425193deb95", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1c0c100f8fdfec8a53a2afdd50598425193deb95", "committedDate": "2020-03-19T04:00:09Z", "message": "Fixed DatabaseAccount spot bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDA5NjA1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9213#pullrequestreview-377409605", "createdAt": "2020-03-19T04:01:14Z", "commit": {"oid": "1c0c100f8fdfec8a53a2afdd50598425193deb95"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3052e674f7e352e1da02e82dd5d2ef5e0159d2ba", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3052e674f7e352e1da02e82dd5d2ef5e0159d2ba", "committedDate": "2020-03-19T05:50:08Z", "message": "Fixed CosmosAuthorizationTokenResolverTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDU1MjA5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9213#pullrequestreview-377455209", "createdAt": "2020-03-19T06:38:55Z", "commit": {"oid": "3052e674f7e352e1da02e82dd5d2ef5e0159d2ba"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0dd615e4a095593f2e04b295eba006e3c5f4684", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b0dd615e4a095593f2e04b295eba006e3c5f4684", "committedDate": "2020-03-19T07:58:24Z", "message": "Fixed Cosmos Resource Type enum change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac25901cb9e05474ba94312937970c41340866b5", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ac25901cb9e05474ba94312937970c41340866b5", "committedDate": "2020-03-19T16:32:58Z", "message": "Merge branch 'master' into cosmos_api_review_iteration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a6bb5f236654b27885d860533c9bf26894fbb3f", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0a6bb5f236654b27885d860533c9bf26894fbb3f", "committedDate": "2020-03-19T18:34:35Z", "message": "Merge branch 'master' into cosmos_api_review_iteration"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 738, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}