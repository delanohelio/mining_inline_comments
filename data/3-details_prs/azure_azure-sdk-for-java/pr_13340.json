{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzODQwMDU1", "number": 13340, "title": "Update OffsetDateTime Handling during Deserialization", "bodyText": "Fix #8266\nThis PR adds a new JsonDeserializer which will handle OffsetDateTime objects. This differs from current functionality as it will implicitly convert all date times missing time zone information to UTC. Previously, this would lead to a deserialization exception as the OffsetDateTime format expected contains time zone information.", "createdAt": "2020-07-20T21:08:51Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13340", "merged": true, "mergeCommit": {"oid": "935c531f88b74a3b56cefd41d9e1024c691fe1ff"}, "closed": true, "closedAt": "2020-07-22T18:31:30Z", "author": {"login": "alzimmermsft"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc24MD5gH2gAyNDUzODQwMDU1OmRhMTIxNzRlMDQyOTI0YjdmZTliMDQ2Y2YwNmEwMjhiYTkzYWI2MDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3e8PWAFqTQ1MzU2NzgzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "da12174e042924b7fe9b046cf06a028ba93ab605", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/da12174e042924b7fe9b046cf06a028ba93ab605", "committedDate": "2020-07-20T21:05:51Z", "message": "Add OffsetDateTime deserializer and update JacksonAdapter to use the new deserializer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMDY5MDg0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13340#pullrequestreview-452069084", "createdAt": "2020-07-21T01:43:25Z", "commit": {"oid": "da12174e042924b7fe9b046cf06a028ba93ab605"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNTM0MzYy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13340#pullrequestreview-453534362", "createdAt": "2020-07-22T17:29:27Z", "commit": {"oid": "da12174e042924b7fe9b046cf06a028ba93ab605"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNzoyOToyN1rOG1s09g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNzoyOToyN1rOG1s09g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk2MjE2Ng==", "bodyText": "Do we need to expose this? It's only used once in this class so I can see it being rolled into the method above. I don't think it would change testing strategy either.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13340#discussion_r458962166", "createdAt": "2020-07-22T17:29:27Z", "author": {"login": "conniey"}, "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/serializer/DateTimeDeserializer.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.util.serializer;\n+\n+import com.fasterxml.jackson.core.JsonParser;\n+import com.fasterxml.jackson.databind.DeserializationContext;\n+import com.fasterxml.jackson.databind.JsonDeserializer;\n+import com.fasterxml.jackson.databind.module.SimpleModule;\n+\n+import java.io.IOException;\n+import java.time.LocalDateTime;\n+import java.time.OffsetDateTime;\n+import java.time.ZoneOffset;\n+import java.time.format.DateTimeFormatter;\n+import java.time.temporal.TemporalAccessor;\n+import java.time.temporal.TemporalQueries;\n+\n+/**\n+ * Custom deserializer that handles converting ISO8601 dates into {@link OffsetDateTime} objects.\n+ */\n+class DateTimeDeserializer extends JsonDeserializer<OffsetDateTime> {\n+    private static final SimpleModule MODULE;\n+\n+    static {\n+        MODULE = new SimpleModule().addDeserializer(OffsetDateTime.class, new DateTimeDeserializer());\n+    }\n+\n+    /**\n+     * Gets a module wrapping this deserializer as an adapter for the Jackson ObjectMapper.\n+     *\n+     * @return A {@link SimpleModule} to be plugged onto Jackson ObjectMapper.\n+     */\n+    public static SimpleModule getModule() {\n+        return MODULE;\n+    }\n+\n+    @Override\n+    public OffsetDateTime deserialize(JsonParser jsonParser, DeserializationContext deserializationContext)\n+        throws IOException {\n+        return deserialize(jsonParser.getValueAsString());\n+    }\n+\n+    static OffsetDateTime deserialize(String offsetDateTimeString) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "da12174e042924b7fe9b046cf06a028ba93ab605"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae523cd4836650d6a6c69e0cc5ace38e20701d57", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ae523cd4836650d6a6c69e0cc5ace38e20701d57", "committedDate": "2020-07-22T17:33:00Z", "message": "Merge branch 'master' into AzCore_DateTimeOffsetDeserialization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64cdf7ebf0ad3151871d9bd9a4d0624d228a40a7", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/64cdf7ebf0ad3151871d9bd9a4d0624d228a40a7", "committedDate": "2020-07-22T17:41:55Z", "message": "Removed package private static"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNTUzMzc2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13340#pullrequestreview-453553376", "createdAt": "2020-07-22T17:54:59Z", "commit": {"oid": "64cdf7ebf0ad3151871d9bd9a4d0624d228a40a7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNTU1ODU1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13340#pullrequestreview-453555855", "createdAt": "2020-07-22T17:58:13Z", "commit": {"oid": "64cdf7ebf0ad3151871d9bd9a4d0624d228a40a7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNTY3ODMw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13340#pullrequestreview-453567830", "createdAt": "2020-07-22T18:14:52Z", "commit": {"oid": "64cdf7ebf0ad3151871d9bd9a4d0624d228a40a7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1212, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}