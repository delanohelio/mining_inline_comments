{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MTQ1NDAy", "number": 12301, "title": "Cosmos CI improvements", "bodyText": "Using ARM templates\nThis PR addresses this issue : #8470", "createdAt": "2020-06-17T23:25:10Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12301", "merged": true, "mergeCommit": {"oid": "48ace3af91f62334dd7b5963eae23e40f2f47fb7"}, "closed": true, "closedAt": "2020-06-27T16:28:11Z", "author": {"login": "kushagraThapar"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsO43aAH2gAyNDM2MTQ1NDAyOjlkZjZiNWUyZjc2YjNmZDJiMTBiOGRmMjE5YzE3YjY4NTQxZDgyMjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvG3HKgH2gAyNDM2MTQ1NDAyOjgwOGIxY2MyNmRlMWM5Y2VhMWIwZjMyYjUxOTVlMTIyYjg2N2VjYmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9df6b5e2f76b3fd2b10b8df219c17b68541d8229", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9df6b5e2f76b3fd2b10b8df219c17b68541d8229", "committedDate": "2020-06-17T19:19:32Z", "message": "Initial commit for test-resources.json file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b593988eeef76274ac00c5cb50e7719ad083e381", "author": {"user": {"login": "danieljurek", "name": "Daniel Jurek"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b593988eeef76274ac00c5cb50e7719ad083e381", "committedDate": "2020-06-17T23:13:41Z", "message": "Add ArmTemplateParameters to archetype-sdk-tests.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51236ccf894955cd61d19a0499507a3b92fe540f", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/51236ccf894955cd61d19a0499507a3b92fe540f", "committedDate": "2020-06-17T23:24:46Z", "message": "Updated test-resources.json and tests.yml to work with ARM templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a1686ba007389aed54e477683b19bf90e87f23a", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2a1686ba007389aed54e477683b19bf90e87f23a", "committedDate": "2020-06-17T23:55:06Z", "message": "Updated ARM template parameters using variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e969ef189a70e3257bc754654992931ccfa70e16", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e969ef189a70e3257bc754654992931ccfa70e16", "committedDate": "2020-06-17T23:59:53Z", "message": "Trying default values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0957b4c36dc4851e1687083b507c19f6d4dfab1d", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0957b4c36dc4851e1687083b507c19f6d4dfab1d", "committedDate": "2020-06-18T00:29:21Z", "message": "Trying keys in quotes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7203a07173eb7132b7e03ab0538dae29fe5d46b", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f7203a07173eb7132b7e03ab0538dae29fe5d46b", "committedDate": "2020-06-18T00:35:05Z", "message": "Removed enableMultipleWriteLocations parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e45e03f23cd94fe5d8126476271d5b5fec3b77be", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e45e03f23cd94fe5d8126476271d5b5fec3b77be", "committedDate": "2020-06-18T00:42:33Z", "message": "Completely removed enableMultipleWriteLocations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86a2e0b301f224044ca4281aa37b1f09de017d08", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/86a2e0b301f224044ca4281aa37b1f09de017d08", "committedDate": "2020-06-18T00:46:40Z", "message": "Removed ArmTemplateParameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4aa6f170e4501ad17717d56544429fbe2eee2e0", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c4aa6f170e4501ad17717d56544429fbe2eee2e0", "committedDate": "2020-06-18T05:37:43Z", "message": "Added desired consistencies check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "121171dd30d32728936671f88259a8c7215fd07c", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/121171dd30d32728936671f88259a8c7215fd07c", "committedDate": "2020-06-18T15:47:42Z", "message": "Added enableMultipleWriteLocations for testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f05872d988e33a446c34eb3ef8c0997881ea0e5", "author": {"user": {"login": "danieljurek", "name": "Daniel Jurek"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6f05872d988e33a446c34eb3ef8c0997881ea0e5", "committedDate": "2020-06-18T17:21:55Z", "message": "testing template rendering"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca0a2e63016e4142d19c4d49188fb101b01d936c", "author": {"user": {"login": "danieljurek", "name": "Daniel Jurek"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ca0a2e63016e4142d19c4d49188fb101b01d936c", "committedDate": "2020-06-18T17:22:38Z", "message": "uncomment ArmTemplateParameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "838c99bc50e9dfed12bd0e8583a8058d3685be80", "author": {"user": {"login": "danieljurek", "name": "Daniel Jurek"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/838c99bc50e9dfed12bd0e8583a8058d3685be80", "committedDate": "2020-06-18T17:25:34Z", "message": "More variable source signifiers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f3e25a34a5b2ba103746a2a7796f19211ec4505", "author": {"user": {"login": "danieljurek", "name": "Daniel Jurek"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2f3e25a34a5b2ba103746a2a7796f19211ec4505", "committedDate": "2020-06-18T20:48:34Z", "message": "Use ArmTemplateParameters in deploy-test-resources.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d18a48f2fa799818dd59bf5552ddc7aae0f9ada", "author": {"user": {"login": "danieljurek", "name": "Daniel Jurek"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9d18a48f2fa799818dd59bf5552ddc7aae0f9ada", "committedDate": "2020-06-18T20:48:54Z", "message": "Revert \"More variable source signifiers\"\n\nThis reverts commit 838c99bc50e9dfed12bd0e8583a8058d3685be80."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b8afd5905a7389d6ed419cf7ffbf0d3df59ae16", "author": {"user": {"login": "danieljurek", "name": "Daniel Jurek"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8b8afd5905a7389d6ed419cf7ffbf0d3df59ae16", "committedDate": "2020-06-18T20:49:10Z", "message": "Revert \"testing template rendering\"\n\nThis reverts commit 6f05872d988e33a446c34eb3ef8c0997881ea0e5."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a24137e88c509424bb29574196d7cf525412733", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4a24137e88c509424bb29574196d7cf525412733", "committedDate": "2020-06-18T21:16:12Z", "message": "Updated with ARM template parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2235ed2279e4498ca3d407365d8c90002a59ff42", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2235ed2279e4498ca3d407365d8c90002a59ff42", "committedDate": "2020-06-18T22:20:24Z", "message": "Declared arm template parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6850148fcf0358d6c3e70d5c9bacade61026ef51", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6850148fcf0358d6c3e70d5c9bacade61026ef51", "committedDate": "2020-06-18T22:44:22Z", "message": "Updated type for boolean values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efbc8026f82b7dc3a88839d937c45468e4039e21", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/efbc8026f82b7dc3a88839d937c45468e4039e21", "committedDate": "2020-06-19T00:15:07Z", "message": "Enabling all CI through ARM templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "563348566c59974b6beabf472cfd627a30a61b86", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/563348566c59974b6beabf472cfd627a30a61b86", "committedDate": "2020-06-19T15:57:55Z", "message": "Increasing timeout because of extra time in creating and deleting resources"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3Njk4OTAy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12301#pullrequestreview-437698902", "createdAt": "2020-06-25T17:15:46Z", "commit": {"oid": "563348566c59974b6beabf472cfd627a30a61b86"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNzoxNTo0NlrOGpEO8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNzoxNTo0NlrOGpEO8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcxNDE2MQ==", "bodyText": "we should think about the multi-region accounts CI, how can we achieve that. can we have multiple arm templates: one for single region account and one for multi region account or can we parametrized the locations array cardinality?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12301#discussion_r445714161", "createdAt": "2020-06-25T17:15:46Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/test-resources.json", "diffHunk": "@@ -0,0 +1,75 @@\n+{\n+  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+  \"contentVersion\": \"1.0.0.0\",\n+  \"parameters\": {\n+    \"baseName\": {\n+      \"type\": \"string\"\n+    },\n+    \"enableMultipleWriteLocations\" : {\n+      \"type\": \"bool\",\n+      \"metadata\": {\n+        \"description\": \"Flag to enable or disable multiple write locations on CosmosDB Account\"\n+      }\n+    },\n+    \"defaultConsistencyLevel\": {\n+      \"type\": \"string\",\n+      \"metadata\": {\n+        \"description\": \"Default Cosmosdb Account level consistency\"\n+      }\n+    }\n+  },\n+  \"variables\": {\n+    \"apiVersion\": \"2020-04-01\",\n+    \"accountName\": \"[toLower(parameters('baseName'))]\",\n+    \"resourceId\": \"[resourceId('Microsoft.DocumentDB/databaseAccounts', variables('accountName'))]\"\n+  },\n+  \"resources\": [\n+    {\n+      \"type\": \"Microsoft.DocumentDB/databaseAccounts\",\n+      \"apiVersion\": \"[variables('apiVersion')]\",\n+      \"name\": \"[variables('accountName')]\",\n+      \"location\": \"[resourceGroup().location]\",\n+      \"kind\": \"GlobalDocumentDB\",\n+      \"properties\": {\n+        \"publicNetworkAccess\": \"Enabled\",\n+        \"enableAutomaticFailover\": false,\n+        \"enableMultipleWriteLocations\": \"[parameters('enableMultipleWriteLocations')]\",\n+        \"isVirtualNetworkFilterEnabled\": false,\n+        \"virtualNetworkRules\": [],\n+        \"disableKeyBasedMetadataWriteAccess\": false,\n+        \"enableFreeTier\": false,\n+        \"enableAnalyticalStorage\": false,\n+        \"databaseAccountOfferType\": \"Standard\",\n+        \"consistencyPolicy\": {\n+          \"defaultConsistencyLevel\": \"[parameters('defaultConsistencyLevel')]\",\n+          \"maxIntervalInSeconds\": 5,\n+          \"maxStalenessPrefix\": 100\n+        },\n+        \"locations\": [\n+          {\n+            \"locationName\": \"East US 2\",\n+            \"provisioningState\": \"Succeeded\",\n+            \"failoverPriority\": 0,\n+            \"isZoneRedundant\": false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "563348566c59974b6beabf472cfd627a30a61b86"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NzE3ODI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12301#pullrequestreview-437717825", "createdAt": "2020-06-25T17:40:57Z", "commit": {"oid": "563348566c59974b6beabf472cfd627a30a61b86"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ccdf743695e5fda484dd5fd401118b3b7db7376", "author": {"user": {"login": "danieljurek", "name": "Daniel Jurek"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0ccdf743695e5fda484dd5fd401118b3b7db7376", "committedDate": "2020-06-26T16:59:21Z", "message": "Enable multiple region configuration with ARM templates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NDU1MzE2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12301#pullrequestreview-438455316", "createdAt": "2020-06-26T17:01:14Z", "commit": {"oid": "0ccdf743695e5fda484dd5fd401118b3b7db7376"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNzowMToxNVrOGpoMmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNzowMToxNVrOGpoMmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwMzM4NA==", "bodyText": "typo\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    \"description\": \"Enable multiple regions,d efault is false\"\n          \n          \n            \n                    \"description\": \"Enable multiple regions, default is false\"", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12301#discussion_r446303384", "createdAt": "2020-06-26T17:01:15Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/test-resources.json", "diffHunk": "@@ -16,12 +16,42 @@\n       \"metadata\": {\n         \"description\": \"Default Cosmosdb Account level consistency\"\n       }\n+    },\n+    \"enableMultipleRegions\": {\n+      \"type\": \"bool\",\n+      \"metadata\": {\n+        \"description\": \"Enable multiple regions,d efault is false\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ccdf743695e5fda484dd5fd401118b3b7db7376"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "808b1cc26de1c9cea1b0f32b5195e122b867ecbd", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/808b1cc26de1c9cea1b0f32b5195e122b867ecbd", "committedDate": "2020-06-26T17:40:09Z", "message": "Added multiple regions for multi-region account"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2965, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}