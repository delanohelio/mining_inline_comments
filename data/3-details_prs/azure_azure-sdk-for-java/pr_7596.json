{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1NjA1NTgw", "number": 7596, "title": "[Feature] To be able to rotate subscription key", "bodyText": "Add the ability to rotate the subscription key.\nIn addition, increase test coverage to TextAnalyticsClientBuilder.\nFixes: #7390", "createdAt": "2020-01-22T00:36:24Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596", "merged": true, "mergeCommit": {"oid": "980616d05e14a1e150a51c2951531e0be7772dc3"}, "closed": true, "closedAt": "2020-01-28T22:10:53Z", "author": {"login": "mssfang"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8qnRzAH2gAyMzY1NjA1NTgwOjYyNDk0OGRhOWI0Zjg5OWU1NTdjZTg2NTY3NWM0YWU0MDA2MzRmMjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-40NwgFqTM0OTc0MDQ3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "624948da9b4f899e557ce865675c4ae400634f22", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/624948da9b4f899e557ce865675c4ae400634f22", "committedDate": "2020-01-22T00:29:18Z", "message": "Subscription Key Credential objects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9755bc7ea74ce6cecbe3539f07a0ae43294d616f", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9755bc7ea74ce6cecbe3539f07a0ae43294d616f", "committedDate": "2020-01-22T01:02:11Z", "message": "one used variable can be refactored"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "812ccd3a5b5a320cc814b61d1b7a9eddffb2cb11", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/812ccd3a5b5a320cc814b61d1b7a9eddffb2cb11", "committedDate": "2020-01-22T01:32:10Z", "message": "readme sample reformat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/559066ce393a4d92ab09c53e2f0a6080ea4779ba", "committedDate": "2020-01-22T05:08:27Z", "message": "reformat"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2ODk4MjUw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-346898250", "createdAt": "2020-01-22T20:59:36Z", "commit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTA1NTcz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-346905573", "createdAt": "2020-01-22T21:11:36Z", "commit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMToxMTozNlrOFgrJFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMToyMzo1NlrOFgreXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgwNTU5MA==", "bodyText": "Don't think returning TextAnalyticsSubscriptionKeyCredential is necessary here. Returning void should be sufficient.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369805590", "createdAt": "2020-01-22T21:11:36Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsSubscriptionKeyCredential.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+/**\n+ * Subscription key credential that shared across cognitive services, or restrict to single service.\n+ */\n+public final class TextAnalyticsSubscriptionKeyCredential {\n+    private String subscriptionKey;\n+\n+    /**\n+     * Creates a {@code SharedKeyCredential} model that describes subscription key.\n+     *\n+     * @param subscriptionKey the subscription key\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;\n+    }\n+\n+    /**\n+     * Get the subscription key value.\n+     *\n+     * @return the subscription key value\n+     */\n+    public String getSubscriptionKey() {\n+        return this.subscriptionKey;\n+    }\n+\n+    /**\n+     * Set the subscription key value.\n+     *\n+     * @param subscriptionKey the subscription key\n+     * @return the {@link TextAnalyticsSubscriptionKeyCredential} itself\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential updateCredential(String subscriptionKey) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgwNjYzMg==", "bodyText": "I am not sure if we agreed on the terminology here in previous arch-board review - there were several proposals refresh, update, set, rotate etc.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369806632", "createdAt": "2020-01-22T21:14:12Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsSubscriptionKeyCredential.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+/**\n+ * Subscription key credential that shared across cognitive services, or restrict to single service.\n+ */\n+public final class TextAnalyticsSubscriptionKeyCredential {\n+    private String subscriptionKey;\n+\n+    /**\n+     * Creates a {@code SharedKeyCredential} model that describes subscription key.\n+     *\n+     * @param subscriptionKey the subscription key\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;\n+    }\n+\n+    /**\n+     * Get the subscription key value.\n+     *\n+     * @return the subscription key value\n+     */\n+    public String getSubscriptionKey() {\n+        return this.subscriptionKey;\n+    }\n+\n+    /**\n+     * Set the subscription key value.\n+     *\n+     * @param subscriptionKey the subscription key\n+     * @return the {@link TextAnalyticsSubscriptionKeyCredential} itself\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential updateCredential(String subscriptionKey) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgwNTU5MA=="}, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgwNzE4NQ==", "bodyText": "Also, when is this method called? Is this method expected to be called by the user when they want to update the key? If so, it would be good to include in samples and code snippets.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369807185", "createdAt": "2020-01-22T21:15:32Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsSubscriptionKeyCredential.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+/**\n+ * Subscription key credential that shared across cognitive services, or restrict to single service.\n+ */\n+public final class TextAnalyticsSubscriptionKeyCredential {\n+    private String subscriptionKey;\n+\n+    /**\n+     * Creates a {@code SharedKeyCredential} model that describes subscription key.\n+     *\n+     * @param subscriptionKey the subscription key\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;\n+    }\n+\n+    /**\n+     * Get the subscription key value.\n+     *\n+     * @return the subscription key value\n+     */\n+    public String getSubscriptionKey() {\n+        return this.subscriptionKey;\n+    }\n+\n+    /**\n+     * Set the subscription key value.\n+     *\n+     * @param subscriptionKey the subscription key\n+     * @return the {@link TextAnalyticsSubscriptionKeyCredential} itself\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential updateCredential(String subscriptionKey) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgwODg4NA==", "bodyText": "Is this applicable for all cognitive services? If so, is the plan to duplicate this credential in all cognitive services modules or would we create a common module like storage has to put the common stuff there?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369808884", "createdAt": "2020-01-22T21:19:20Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsSubscriptionKeyCredential.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+/**\n+ * Subscription key credential that shared across cognitive services, or restrict to single service.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgxMTAzNg==", "bodyText": "Can subscriptionKey be null or empty? If not, you may want to check for these conditions here and in the constructor.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369811036", "createdAt": "2020-01-22T21:23:56Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsSubscriptionKeyCredential.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+/**\n+ * Subscription key credential that shared across cognitive services, or restrict to single service.\n+ */\n+public final class TextAnalyticsSubscriptionKeyCredential {\n+    private String subscriptionKey;\n+\n+    /**\n+     * Creates a {@code SharedKeyCredential} model that describes subscription key.\n+     *\n+     * @param subscriptionKey the subscription key\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;\n+    }\n+\n+    /**\n+     * Get the subscription key value.\n+     *\n+     * @return the subscription key value\n+     */\n+    public String getSubscriptionKey() {\n+        return this.subscriptionKey;\n+    }\n+\n+    /**\n+     * Set the subscription key value.\n+     *\n+     * @param subscriptionKey the subscription key\n+     * @return the {@link TextAnalyticsSubscriptionKeyCredential} itself\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential updateCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTIyNTc1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-346922575", "createdAt": "2020-01-22T21:40:44Z", "commit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMTo0MDo0NFrOFgr8Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMTo0MDo0NFrOFgr8Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgxODY1MA==", "bodyText": "Is there a reason why we need this?\nAlthough the guidelines are not done, during the meeting they agreed that\n\nSHOULD NOT define public properties or fields which allow users to access the authentication data directly.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369818650", "createdAt": "2020-01-22T21:40:44Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsSubscriptionKeyCredential.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+/**\n+ * Subscription key credential that shared across cognitive services, or restrict to single service.\n+ */\n+public final class TextAnalyticsSubscriptionKeyCredential {\n+    private String subscriptionKey;\n+\n+    /**\n+     * Creates a {@code SharedKeyCredential} model that describes subscription key.\n+     *\n+     * @param subscriptionKey the subscription key\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;\n+    }\n+\n+    /**\n+     * Get the subscription key value.\n+     *\n+     * @return the subscription key value\n+     */\n+    public String getSubscriptionKey() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTIyOTgw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-346922980", "createdAt": "2020-01-22T21:41:30Z", "commit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMTo0MTozMFrOFgr9Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMTo0MTozMFrOFgr9Xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgxODk3NA==", "bodyText": "Is this thread safe? Is there a way to guarantee that when modified it updates everywhere?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369818974", "createdAt": "2020-01-22T21:41:30Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsSubscriptionKeyCredential.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+/**\n+ * Subscription key credential that shared across cognitive services, or restrict to single service.\n+ */\n+public final class TextAnalyticsSubscriptionKeyCredential {\n+    private String subscriptionKey;\n+\n+    /**\n+     * Creates a {@code SharedKeyCredential} model that describes subscription key.\n+     *\n+     * @param subscriptionKey the subscription key\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;\n+    }\n+\n+    /**\n+     * Get the subscription key value.\n+     *\n+     * @return the subscription key value\n+     */\n+    public String getSubscriptionKey() {\n+        return this.subscriptionKey;\n+    }\n+\n+    /**\n+     * Set the subscription key value.\n+     *\n+     * @param subscriptionKey the subscription key\n+     * @return the {@link TextAnalyticsSubscriptionKeyCredential} itself\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential updateCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTI0Mzg0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-346924384", "createdAt": "2020-01-22T21:43:55Z", "commit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMTo0Mzo1NVrOFgsBsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMTo0Mzo1NVrOFgsBsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgyMDA4MQ==", "bodyText": "maybe we should leave it as before ENDPOINT? The customer can go to the portal or with Azure CLI and get the endpoint.\nLeaving it like this, might confuse people when using a multi-service subscription key as the region goes before the endpoint", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369820081", "createdAt": "2020-01-22T21:43:55Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -73,11 +73,11 @@ cognitive services.\n     ```\n     \n     Use the key as the credential parameter to authenticate the client:\n-    <!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L45-L48 -->\n+    <!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L44-L47 -->\n     ```java\n     TextAnalyticsClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n-        .subscriptionKey(SUBSCRIPTION_KEY)\n-        .endpoint(ENDPOINT)\n+        .subscriptionKey(new TextAnalyticsSubscriptionKeyCredential(\"{subscription_key}\"))\n+        .endpoint(\"https://{servicename}.cognitiveservices.azure.com/\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb3befd83b70df0fbbe513ba0b3c8a9af69f7293", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/eb3befd83b70df0fbbe513ba0b3c8a9af69f7293", "committedDate": "2020-01-22T22:46:48Z", "message": "subscription key cannot be null check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTQxNzYw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-346941760", "createdAt": "2020-01-22T22:15:19Z", "commit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjoxNToxOVrOFgs4jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjo1MjoyNFrOFgt0xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgzNDEyNw==", "bodyText": "May be use constant defined in this class instead of string ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369834127", "createdAt": "2020-01-22T22:15:19Z", "author": {"login": "hemanttanwar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/SubscriptionKeyCredentialPolicy.java", "diffHunk": "@@ -0,0 +1,35 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.implementation;\n+\n+import com.azure.core.http.HttpPipelineCallContext;\n+import com.azure.core.http.HttpPipelineNextPolicy;\n+import com.azure.core.http.HttpResponse;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.ai.textanalytics.models.TextAnalyticsSubscriptionKeyCredential;\n+import reactor.core.publisher.Mono;\n+\n+/**\n+ * Policy that adds the {@link TextAnalyticsSubscriptionKeyCredential} into the request's `Ocp-Apim-Subscription-Key`\n+ * header.\n+ */\n+public final class SubscriptionKeyCredentialPolicy implements HttpPipelinePolicy {\n+    private final TextAnalyticsSubscriptionKeyCredential credential;\n+\n+    /**\n+     * Creates a {@link SubscriptionKeyCredentialPolicy} pipeline policy that adds the SharedKeyCredential into the\n+     * request's `Ocp-Apim-Subscription-Key` header.\n+     *\n+     * @param credential the SharedKeyCredential credential used to create the policy.\n+     */\n+    public SubscriptionKeyCredentialPolicy(TextAnalyticsSubscriptionKeyCredential credential) {\n+        this.credential = credential;\n+    }\n+\n+    @Override\n+    public Mono<HttpResponse> process(HttpPipelineCallContext context, HttpPipelineNextPolicy next) {\n+        context.getHttpRequest().setHeader(\"Ocp-Apim-Subscription-Key\", credential.getSubscriptionKey());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg0MjMyMA==", "bodyText": "May be adding better description the subscription key for authentication.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369842320", "createdAt": "2020-01-22T22:33:56Z", "author": {"login": "hemanttanwar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsSubscriptionKeyCredential.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+/**\n+ * Subscription key credential that shared across cognitive services, or restrict to single service.\n+ */\n+public final class TextAnalyticsSubscriptionKeyCredential {\n+    private String subscriptionKey;\n+\n+    /**\n+     * Creates a {@code SharedKeyCredential} model that describes subscription key.\n+     *\n+     * @param subscriptionKey the subscription key\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;\n+    }\n+\n+    /**\n+     * Get the subscription key value.\n+     *\n+     * @return the subscription key value\n+     */\n+    public String getSubscriptionKey() {\n+        return this.subscriptionKey;\n+    }\n+\n+    /**\n+     * Set the subscription key value.\n+     *\n+     * @param subscriptionKey the subscription key", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg0NjI0Nw==", "bodyText": "What happens when client update with valid key and after that all the calls should be successful. Is there a test for that ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369846247", "createdAt": "2020-01-22T22:43:29Z", "author": {"login": "hemanttanwar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/java/com/azure/ai/textanalytics/TextAnalyticsClientBuilderTest.java", "diffHunk": "@@ -0,0 +1,108 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics;\n+\n+import com.azure.ai.textanalytics.models.DetectedLanguage;\n+import com.azure.ai.textanalytics.models.TextAnalyticsSubscriptionKeyCredential;\n+import com.azure.core.exception.HttpResponseException;\n+import com.azure.core.http.netty.NettyAsyncHttpClientBuilder;\n+import com.azure.core.test.TestBase;\n+import com.azure.core.util.Configuration;\n+import org.junit.jupiter.api.Test;\n+import reactor.test.StepVerifier;\n+\n+import java.util.Arrays;\n+import java.util.Objects;\n+\n+import static com.azure.ai.textanalytics.TextAnalyticsClientTestBase.validateDetectedLanguages;\n+import static org.junit.jupiter.api.Assertions.assertThrows;\n+\n+public class TextAnalyticsClientBuilderTest extends TestBase {\n+    private static final String AZURE_TEXT_ANALYTICS_SUBSCRIPTION_KEY = \"AZURE_TEXT_ANALYTICS_SUBSCRIPTION_KEY\";\n+\n+    @Test\n+    public void rotateSharedKeyCredentialAsyncClient() {\n+        // Arrange\n+        final String endpoint = getEndpoint();\n+        Objects.requireNonNull(endpoint, \"`endpoint` expected to be set.\");\n+        final String subscriptionKey = getSubscriptionKey();\n+        Objects.requireNonNull(subscriptionKey, \"`AZURE_TEXT_ANALYTICS_SUBSCRIPTION_KEY` expected to be set.\");\n+\n+        final TextAnalyticsSubscriptionKeyCredential credential =\n+            new TextAnalyticsSubscriptionKeyCredential(subscriptionKey);\n+\n+        final TextAnalyticsClientBuilder clientBuilder = new TextAnalyticsClientBuilder()\n+            .subscriptionKey(credential)\n+            .endpoint(endpoint);\n+\n+        if (interceptorManager.isPlaybackMode()) {\n+            clientBuilder.httpClient(interceptorManager.getPlaybackClient());\n+        } else {\n+            clientBuilder.httpClient(new NettyAsyncHttpClientBuilder().wiretap(true).build())\n+                .addPolicy(interceptorManager.getRecordPolicy());\n+        }\n+\n+        final TextAnalyticsAsyncClient client = clientBuilder.buildAsyncClient();\n+\n+        // Action and Assert\n+        StepVerifier.create(client.detectLanguage(\"This is a test English Text\"))\n+            .assertNext(response -> validateDetectedLanguages(\n+                Arrays.asList(new DetectedLanguage(\"English\", \"en\", 1.0)),\n+                response.getDetectedLanguages()))\n+            .verifyComplete();\n+\n+        // Update to invalid subscription key\n+        credential.updateCredential(\"invalid key\");\n+\n+        // Action and Assert\n+        StepVerifier.create(client.detectLanguage(\"This is a test English Text\"))\n+            .verifyError(HttpResponseException.class);\n+    }\n+\n+    @Test\n+    public void rotateSharedKeyCredentialSyncClient() {\n+        // Arrange\n+        final String endpoint = getEndpoint();\n+        Objects.requireNonNull(endpoint, \"`endpoint` expected to be set.\");\n+        final String subscriptionKey = getSubscriptionKey();\n+        Objects.requireNonNull(subscriptionKey, \"`AZURE_TEXT_ANALYTICS_SUBSCRIPTION_KEY` expected to be set.\");\n+\n+        final TextAnalyticsSubscriptionKeyCredential credential =\n+            new TextAnalyticsSubscriptionKeyCredential(subscriptionKey);\n+\n+        final TextAnalyticsClientBuilder clientBuilder = new TextAnalyticsClientBuilder()\n+            .subscriptionKey(credential)\n+            .endpoint(endpoint);\n+\n+        if (interceptorManager.isPlaybackMode()) {\n+            clientBuilder.httpClient(interceptorManager.getPlaybackClient());\n+        } else {\n+            clientBuilder.httpClient(new NettyAsyncHttpClientBuilder().wiretap(true).build())\n+                .addPolicy(interceptorManager.getRecordPolicy());\n+        }\n+\n+        final TextAnalyticsClient client = clientBuilder.buildClient();\n+\n+        // Action and Assert\n+        validateDetectedLanguages(Arrays.asList(new DetectedLanguage(\"English\", \"en\", 1.0)),\n+            client.detectLanguage(\"This is a test English Text\").getDetectedLanguages());\n+\n+        // Update to invalid subscription key\n+        credential.updateCredential(\"invalid key\");\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg0OTU0MQ==", "bodyText": "The samples/readme.md : provide an example of update.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r369849541", "createdAt": "2020-01-22T22:52:24Z", "author": {"login": "hemanttanwar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsSubscriptionKeyCredential.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+/**\n+ * Subscription key credential that shared across cognitive services, or restrict to single service.\n+ */\n+public final class TextAnalyticsSubscriptionKeyCredential {\n+    private String subscriptionKey;\n+\n+    /**\n+     * Creates a {@code SharedKeyCredential} model that describes subscription key.\n+     *\n+     * @param subscriptionKey the subscription key\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;\n+    }\n+\n+    /**\n+     * Get the subscription key value.\n+     *\n+     * @return the subscription key value\n+     */\n+    public String getSubscriptionKey() {\n+        return this.subscriptionKey;\n+    }\n+\n+    /**\n+     * Set the subscription key value.\n+     *\n+     * @param subscriptionKey the subscription key\n+     * @return the {@link TextAnalyticsSubscriptionKeyCredential} itself\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential updateCredential(String subscriptionKey) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MTE0MTY2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-348114166", "createdAt": "2020-01-24T17:38:34Z", "commit": {"oid": "eb3befd83b70df0fbbe513ba0b3c8a9af69f7293"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNzozODozNVrOFhlK_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQxNzo0MzowNVrOFhlTeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc1NjM1MA==", "bodyText": "The friendly text is incorrect. subscriptionKey(String)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r370756350", "createdAt": "2020-01-24T17:38:35Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsClientBuilder.java", "diffHunk": "@@ -42,7 +44,7 @@\n  *\n  * <p>\n  * The client needs the service endpoint of the Azure Text Analytics to access the resource service.\n- * {@link #subscriptionKey(String) subscriptionKey(String)} or\n+ * {@link #subscriptionKey(TextAnalyticsSubscriptionKeyCredential) subscriptionKey(String)} or", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb3befd83b70df0fbbe513ba0b3c8a9af69f7293"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc1NjU3Nw==", "bodyText": "nit: variable name credential fits better.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r370756577", "createdAt": "2020-01-24T17:39:07Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsClientBuilder.java", "diffHunk": "@@ -87,7 +88,7 @@\n     private final String clientVersion;\n \n     private String endpoint;\n-    private String subscriptionKey;\n+    private TextAnalyticsSubscriptionKeyCredential subscriptionKey;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb3befd83b70df0fbbe513ba0b3c8a9af69f7293"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc1ODUyMQ==", "bodyText": "In the pipeline policy, it is fetched, so it's possible that the policy picks up a different value than the one that is set. This is not thread safe.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r370758521", "createdAt": "2020-01-24T17:43:05Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsSubscriptionKeyCredential.java", "diffHunk": "@@ -0,0 +1,40 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+/**\n+ * Subscription key credential that shared across cognitive services, or restrict to single service.\n+ */\n+public final class TextAnalyticsSubscriptionKeyCredential {\n+    private String subscriptionKey;\n+\n+    /**\n+     * Creates a {@code SharedKeyCredential} model that describes subscription key.\n+     *\n+     * @param subscriptionKey the subscription key\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;\n+    }\n+\n+    /**\n+     * Get the subscription key value.\n+     *\n+     * @return the subscription key value\n+     */\n+    public String getSubscriptionKey() {\n+        return this.subscriptionKey;\n+    }\n+\n+    /**\n+     * Set the subscription key value.\n+     *\n+     * @param subscriptionKey the subscription key\n+     * @return the {@link TextAnalyticsSubscriptionKeyCredential} itself\n+     */\n+    public TextAnalyticsSubscriptionKeyCredential updateCredential(String subscriptionKey) {\n+        this.subscriptionKey = subscriptionKey;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgxODk3NA=="}, "originalCommit": {"oid": "559066ce393a4d92ab09c53e2f0a6080ea4779ba"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2338cc50ca163421d6dcb9a6ffc257eb43748750", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2338cc50ca163421d6dcb9a6ffc257eb43748750", "committedDate": "2020-01-27T00:38:56Z", "message": "beside the it is still not thread-safe. Hava updaet all side docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1795fb1e9713eb1d2ae860a055e6aab42611cd7e", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1795fb1e9713eb1d2ae860a055e6aab42611cd7e", "committedDate": "2020-01-27T01:14:13Z", "message": "add json files for test and minor checkstyle errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e9e4926daec71ee223c3d61c4e4eb53a278dc4e", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8e9e4926daec71ee223c3d61c4e4eb53a278dc4e", "committedDate": "2020-01-27T03:26:03Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into RotateSubscriptionKey"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77103c8088a9789c66b022993211598e06869284", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/77103c8088a9789c66b022993211598e06869284", "committedDate": "2020-01-27T17:07:20Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into RotateSubscriptionKey"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f3ee3db3b09fc06168245eb08b5d0223f08b808", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6f3ee3db3b09fc06168245eb08b5d0223f08b808", "committedDate": "2020-01-27T17:34:59Z", "message": "add volatile to subscription key to visisbility"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4ODYxNzU5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-348861759", "createdAt": "2020-01-27T17:58:47Z", "commit": {"oid": "6f3ee3db3b09fc06168245eb08b5d0223f08b808"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f408f1c1bd010893aaed6639831a38098f5146cd", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f408f1c1bd010893aaed6639831a38098f5146cd", "committedDate": "2020-01-27T20:19:23Z", "message": "update json files and take caure endpoint last character"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDcwNjA2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-349070606", "createdAt": "2020-01-28T00:39:15Z", "commit": {"oid": "f408f1c1bd010893aaed6639831a38098f5146cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDcwMzE2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-349070316", "createdAt": "2020-01-28T00:38:21Z", "commit": {"oid": "f408f1c1bd010893aaed6639831a38098f5146cd"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwMDozODoyMVrOFiWMHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwMDo0MTowNVrOFiWOvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTU1OTQ1NQ==", "bodyText": "Why the change to {endpoint}? It is more clear what the string should look like with the last change.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r371559455", "createdAt": "2020-01-28T00:38:21Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/AnalyzeSentimentAsync.java", "diffHunk": "@@ -19,8 +20,8 @@\n     public static void main(String[] args) {\n         // Instantiate a client that will be used to call the service.\n         TextAnalyticsAsyncClient client = new TextAnalyticsClientBuilder()\n-            .subscriptionKey(\"{subscription_key}\")\n-            .endpoint(\"https://{servicename}.cognitiveservices.azure.com/\")\n+            .subscriptionKey(new TextAnalyticsSubscriptionKeyCredential(\"{subscription_key}\"))\n+            .endpoint(\"{endpoint}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f408f1c1bd010893aaed6639831a38098f5146cd"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTU2MDEyNw==", "bodyText": "Generally, you try to limit the scope of your assertion. How do you know it threw in credential(null) and not buildclient()?\nThis goes for all the other tests that do the same.\n// arrange\nfinal TextAnalyticsClientBuilder builder = new TextAnalyticsClientBuilder();\n\n// Act & Assert\nassertThrows(NullPointerException.class, () -> builder.credential(null));", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r371560127", "createdAt": "2020-01-28T00:41:05Z", "author": {"login": "conniey"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/java/com/azure/ai/textanalytics/TextAnalyticsClientTest.java", "diffHunk": "@@ -408,4 +414,150 @@ public void analyseSentimentForBatchInputShowStatistics() {\n             validateSentiment(true, getExpectedBatchTextSentiment(),\n                 client.analyzeBatchSentimentWithResponse(inputs, options, Context.NONE).getValue()));\n     }\n+\n+    /**\n+     * Test client builder with valid subscription key\n+     */\n+    @Test\n+    public void validKey() {\n+        // Arrange\n+        final TextAnalyticsClient client = createClientBuilder(getEndpoint(),\n+            new TextAnalyticsSubscriptionKeyCredential(getSubscriptionKey())).buildClient();\n+\n+        // Action and Assert\n+        validateDetectedLanguages(Arrays.asList(new DetectedLanguage(\"English\", \"en\", 1.0)),\n+            client.detectLanguage(\"This is a test English Text\").getDetectedLanguages());\n+    }\n+\n+    /**\n+     * Test client builder with invalid subscription key\n+     */\n+    @Test\n+    public void invalidKey() {\n+        // Arrange\n+        final TextAnalyticsClient client = createClientBuilder(getEndpoint(),\n+            new TextAnalyticsSubscriptionKeyCredential(INVALID_KEY)).buildClient();\n+\n+        // Action and Assert\n+        assertThrows(HttpResponseException.class, () -> client.detectLanguage(\"This is a test English Text\"));\n+    }\n+\n+    /**\n+     * Test client with valid subscription key but update to invalid key and make call to server.\n+     */\n+    @Test\n+    public void updateToInvalidKey() {\n+        // Arrange\n+        final TextAnalyticsSubscriptionKeyCredential credential =\n+            new TextAnalyticsSubscriptionKeyCredential(getSubscriptionKey());\n+\n+        final TextAnalyticsClient client = createClientBuilder(getEndpoint(), credential).buildClient();\n+\n+        // Update to invalid key\n+        credential.updateCredential(INVALID_KEY);\n+\n+        // Action and Assert\n+        assertThrows(HttpResponseException.class, () -> client.detectLanguage(\"This is a test English Text\"));\n+    }\n+\n+    /**\n+     * Test client with invalid subscription key but update to valid key and make call to server.\n+     */\n+    @Test\n+    public void updateToValidKey() {\n+        // Arrange\n+        final TextAnalyticsSubscriptionKeyCredential credential =\n+            new TextAnalyticsSubscriptionKeyCredential(INVALID_KEY);\n+\n+        final TextAnalyticsClient client = createClientBuilder(getEndpoint(), credential).buildClient();\n+\n+        // Update to valid key\n+        credential.updateCredential(getSubscriptionKey());\n+\n+        // Action and Assert\n+        validateDetectedLanguages(Arrays.asList(new DetectedLanguage(\"English\", \"en\", 1.0)),\n+            client.detectLanguage(\"This is a test English Text\").getDetectedLanguages());\n+    }\n+\n+    /**\n+     * Test for missing endpoint\n+     */\n+    @Test\n+    public void missingEndpoint() {\n+        assertThrows(NullPointerException.class, () -> {\n+            final TextAnalyticsClientBuilder builder = new TextAnalyticsClientBuilder();\n+            builder.buildClient();\n+        });\n+    }\n+\n+    /**\n+     * Test for null subscription key\n+     */\n+    @Test\n+    public void nullSubscriptionKey() {\n+        assertThrows(NullPointerException.class, () -> {\n+            final TextAnalyticsClientBuilder builder = new TextAnalyticsClientBuilder();\n+            builder.endpoint(getEndpoint()).subscriptionKey(null).buildClient();\n+        });\n+    }\n+\n+    /**\n+     * Test for null AAD credential\n+     */\n+    @Test\n+    public void nullAADCredential() {\n+        assertThrows(NullPointerException.class, () -> {\n+            final TextAnalyticsClientBuilder builder = new TextAnalyticsClientBuilder();\n+            builder.endpoint(getEndpoint()).credential(null).buildClient();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f408f1c1bd010893aaed6639831a38098f5146cd"}, "originalPosition": 114}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MTExNDQ5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-349111449", "createdAt": "2020-01-28T03:23:40Z", "commit": {"oid": "f408f1c1bd010893aaed6639831a38098f5146cd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwMzoyMzo0MFrOFiYSlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwMzoyMzo0MFrOFiYSlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTU5Mzg3Ng==", "bodyText": "I wouldn't call it expired_subscription_key as it might give the wrong message to people when creating the client.\nit could be just subscription_key, and leave new_subscription_key", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#discussion_r371593876", "createdAt": "2020-01-28T03:23:40Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -114,14 +114,27 @@ analyze sentiment, recognize entities, detect language, and extract key phrases\n To create a client object, you will need the cognitive services or text analytics endpoint to \n your resource and a subscription key that allows you access:\n \n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L45-L48 -->\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L44-L47 -->\n ```java\n TextAnalyticsClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n-    .subscriptionKey(SUBSCRIPTION_KEY)\n-    .endpoint(ENDPOINT)\n+    .subscriptionKey(new TextAnalyticsSubscriptionKeyCredential(\"{subscription_key}\"))\n+    .endpoint(\"{endpoint}\")\n     .buildClient();\n ```\n \n+#### Rotate existing subscription key\n+The Azure Text Analytics client library provide a way to rotate the existing subscription key.\n+\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L174-L180 -->\n+```java\n+TextAnalyticsSubscriptionKeyCredential credential = new TextAnalyticsSubscriptionKeyCredential(\"{expired_subscription_key}\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f408f1c1bd010893aaed6639831a38098f5146cd"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MTEyNzI3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-349112727", "createdAt": "2020-01-28T03:30:09Z", "commit": {"oid": "f408f1c1bd010893aaed6639831a38098f5146cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "132815b60e187f960b93564090f817f61af4d78e", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/132815b60e187f960b93564090f817f61af4d78e", "committedDate": "2020-01-28T04:08:59Z", "message": "Merge branch 'RotateSubscriptionKey' of https://github.com/mssfang/azure-sdk-for-java into RotateSubscriptionKey"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af5710db8d9e617de900c50861b8874f9d180e07", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/af5710db8d9e617de900c50861b8874f9d180e07", "committedDate": "2020-01-28T04:37:34Z", "message": "workding and delete some dup tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06013da7acc0c0752579ed7e11a40d7d78d5435e", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/06013da7acc0c0752579ed7e11a40d7d78d5435e", "committedDate": "2020-01-28T19:59:21Z", "message": "renanem to TextAnalyticsApiKeyCredential"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4210cc609efafeaa4151bc72089f59a5931760c7", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4210cc609efafeaa4151bc72089f59a5931760c7", "committedDate": "2020-01-28T20:02:58Z", "message": "resolve conflict"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NzQwNDcx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7596#pullrequestreview-349740471", "createdAt": "2020-01-28T22:09:57Z", "commit": {"oid": "4210cc609efafeaa4151bc72089f59a5931760c7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 479, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}