{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExOTI2MjA1", "number": 10649, "title": "Use static storage account for Form Recognizer live tests ", "bodyText": "Update tests to use static storage files.\nRemove storage package test dependency\nAdd changelog updates.\nFix flakey live tests\nLive test pipeline - https://dev.azure.com/azure-sdk/internal/_build/results?buildId=379736&view=logs&j=4d5db6ce-0b7f-527e-b115-2367ee6e1fef&t=4d5db6ce-0b7f-527e-b115-2367ee6e1fef\nRemove static sample test and training files from repo", "createdAt": "2020-05-01T01:20:41Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10649", "merged": true, "mergeCommit": {"oid": "d87ba7fb9a5c06ad905ae9ede54c0342835c5376"}, "closed": true, "closedAt": "2020-05-05T18:40:05Z", "author": {"login": "samvaity"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcc4JBbABqjMyOTIwMjEwODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceYPw4gBqjMzMDU0NDUyNjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3dae42ec9d4ca00df2d8493de0c6e93237c159d7", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3dae42ec9d4ca00df2d8493de0c6e93237c159d7", "committedDate": "2020-05-01T02:18:40Z", "message": "update confidence value"}, "afterCommit": {"oid": "2dd145bd9cb30b5c331329dacc61842be57dbd69", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2dd145bd9cb30b5c331329dacc61842be57dbd69", "committedDate": "2020-05-01T02:20:17Z", "message": "update confidence value"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2dd145bd9cb30b5c331329dacc61842be57dbd69", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2dd145bd9cb30b5c331329dacc61842be57dbd69", "committedDate": "2020-05-01T02:20:17Z", "message": "update confidence value"}, "afterCommit": {"oid": "ddf28838302baea5081be66f766cd401687338e0", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ddf28838302baea5081be66f766cd401687338e0", "committedDate": "2020-05-01T21:07:42Z", "message": "Update for tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f9bbb6b2b2e131b8004e2e5aee6644fadbfaa5e8", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f9bbb6b2b2e131b8004e2e5aee6644fadbfaa5e8", "committedDate": "2020-05-01T21:11:49Z", "message": "remove storage dependency"}, "afterCommit": {"oid": "881492df1dc3bf53412905bd33ea8cdc2e5f1875", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/881492df1dc3bf53412905bd33ea8cdc2e5f1875", "committedDate": "2020-05-01T21:27:14Z", "message": "remove storage dependency"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "881492df1dc3bf53412905bd33ea8cdc2e5f1875", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/881492df1dc3bf53412905bd33ea8cdc2e5f1875", "committedDate": "2020-05-01T21:27:14Z", "message": "remove storage dependency"}, "afterCommit": {"oid": "b8327555f41ffc1e338044cfae25d6ac7395e1aa", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b8327555f41ffc1e338044cfae25d6ac7395e1aa", "committedDate": "2020-05-01T21:46:17Z", "message": "remove storage dependency"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b8327555f41ffc1e338044cfae25d6ac7395e1aa", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b8327555f41ffc1e338044cfae25d6ac7395e1aa", "committedDate": "2020-05-01T21:46:17Z", "message": "remove storage dependency"}, "afterCommit": {"oid": "7cd8bc6389f613dd47f9d7f3ab63bac346d816c9", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7cd8bc6389f613dd47f9d7f3ab63bac346d816c9", "committedDate": "2020-05-01T22:02:55Z", "message": "remove storage dependency"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7bdb8047c6eb9858d79a1e7d3b456fea7dfce849", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7bdb8047c6eb9858d79a1e7d3b456fea7dfce849", "committedDate": "2020-05-02T20:30:20Z", "message": "update Form recognizer tests"}, "afterCommit": {"oid": "2cb5547558a30050613358b3a1c8e7ccda4e6a8c", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2cb5547558a30050613358b3a1c8e7ccda4e6a8c", "committedDate": "2020-05-02T20:31:59Z", "message": "update Form recognizer tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bd825217cfcc28760b5876fab6ad79d16ee05345", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bd825217cfcc28760b5876fab6ad79d16ee05345", "committedDate": "2020-05-03T20:52:14Z", "message": "update changelog"}, "afterCommit": {"oid": "c5eef3b827207e6d5c8a1ca09154e2cdda5dd17a", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c5eef3b827207e6d5c8a1ca09154e2cdda5dd17a", "committedDate": "2020-05-03T21:03:04Z", "message": "update changelog"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c5eef3b827207e6d5c8a1ca09154e2cdda5dd17a", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c5eef3b827207e6d5c8a1ca09154e2cdda5dd17a", "committedDate": "2020-05-03T21:03:04Z", "message": "update changelog"}, "afterCommit": {"oid": "b39e512ad1a0e606eab8263de7b52f19a0bd97c9", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b39e512ad1a0e606eab8263de7b52f19a0bd97c9", "committedDate": "2020-05-03T21:24:27Z", "message": "update changelog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NDUzNzIx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10649#pullrequestreview-405453721", "createdAt": "2020-05-05T01:49:42Z", "commit": {"oid": "71684319f42e30997c02b5b9b3a611498fa3da5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMTo0OTo0MlrOGQYEDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMTo0OTo0MlrOGQYEDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTgyNDY1NA==", "bodyText": "These two methods can simplify to be one generic method.\nprivate String getSasUri(String sasUrl) {}", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10649#discussion_r419824654", "createdAt": "2020-05-05T01:49:42Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientTestBase.java", "diffHunk": "@@ -306,15 +277,18 @@ String getApiKey() {\n     String getEndpoint() {\n         return interceptorManager.isPlaybackMode()\n             ? \"https://localhost:8080\"\n-            : Configuration.getGlobalConfiguration().get(\"AZURE_FORM_RECOGNIZER_ENDPOINT\");\n+            : Configuration.getGlobalConfiguration().get(AZURE_FORM_RECOGNIZER_ENDPOINT);\n     }\n \n-    private String createStorageAndGenerateSas(String folderPath) {\n-        if (interceptorManager.isPlaybackMode()) {\n-            return \"https://isPlaybackmode\";\n-        } else {\n-            return Configuration.getGlobalConfiguration().get(FORM_RECOGNIZER_TRAINING_BLOB_CONTAINER_SAS_URL);\n+    private String getTrainingSasUri() {\n+        return interceptorManager.isPlaybackMode()\n+            ? \"https://isPlaybackmode\"\n+            : Configuration.getGlobalConfiguration().get(FORM_RECOGNIZER_TRAINING_BLOB_CONTAINER_SAS_URL);\n+    }\n \n-        }\n+    private String getTestingSasUri() {\n+        return interceptorManager.isPlaybackMode()\n+            ? \"https://isPlaybackmode\"\n+            : Configuration.getGlobalConfiguration().get(FORM_RECOGNIZER_TESTING_BLOB_CONTAINER_SAS_URL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71684319f42e30997c02b5b9b3a611498fa3da5e"}, "originalPosition": 264}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NDU1NzU4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10649#pullrequestreview-405455758", "createdAt": "2020-05-05T01:59:38Z", "commit": {"oid": "71684319f42e30997c02b5b9b3a611498fa3da5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMTo1OTozOFrOGQYL9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMTo1OTozOFrOGQYL9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTgyNjY3Nw==", "bodyText": "do you want to user logger? or is that fine to throw it directly in test?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10649#discussion_r419826677", "createdAt": "2020-05-05T01:59:38Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientTestBase.java", "diffHunk": "@@ -124,72 +95,72 @@ private static void validateErrorData(List<ErrorInformation> expectedErrors,\n         }\n     }\n \n-    static void validateCustomModel(CustomFormModel expectedModel, CustomFormModel actualCustomModel) {\n-        assertNotNull(actualCustomModel.getModelId());\n-        assertEquals(expectedModel.getModelStatus(), actualCustomModel.getModelStatus());\n-        validateErrors(expectedModel.getModelError(), actualCustomModel.getModelError());\n-        assertNotNull(actualCustomModel.getCreatedOn());\n-        assertNotNull(actualCustomModel.getLastUpdatedOn());\n-        validateSubModels(expectedModel.getSubModels(), actualCustomModel.getSubModels());\n-        validateTrainingDocuments(expectedModel.getTrainingDocuments(), actualCustomModel.getTrainingDocuments());\n-    }\n-\n     static void validateAccountProperties(AccountProperties expectedAccountProperties,\n         AccountProperties actualAccountProperties) {\n         assertEquals(expectedAccountProperties.getLimit(), actualAccountProperties.getLimit());\n         assertNotNull(actualAccountProperties.getCount());\n     }\n \n-    private static void validateTrainingDocuments(List<TrainingDocumentInfo> expectedTrainingDocuments,\n-        List<TrainingDocumentInfo> actualTrainingDocuments) {\n-        List<TrainingDocumentInfo> actualTrainingList = new ArrayList<>(actualTrainingDocuments);\n-        List<TrainingDocumentInfo> expectedTrainingList =\n-            new ArrayList<>(expectedTrainingDocuments);\n-        assertEquals(expectedTrainingList.size(), actualTrainingList.size());\n-        for (int i = 0; i < actualTrainingList.size(); i++) {\n-            TrainingDocumentInfo expectedTrainingDocument = expectedTrainingList.get(i);\n-            TrainingDocumentInfo actualTrainingDocument = actualTrainingList.get(i);\n-            assertEquals(expectedTrainingDocument.getName(), actualTrainingDocument.getName());\n-            assertEquals(expectedTrainingDocument.getPageCount(), actualTrainingDocument.getPageCount());\n-            assertEquals(expectedTrainingDocument.getTrainingStatus(), actualTrainingDocument.getTrainingStatus());\n-            validateErrors(expectedTrainingDocument.getDocumentErrors(), actualTrainingDocument.getDocumentErrors());\n+    /**\n+     * Deserialize test data from service.\n+     *\n+     * @return the deserialized raw response test data\n+     */\n+    static <T> T deserializeRawResponse(SerializerAdapter serializerAdapter, NetworkCallRecord record, Class<T> clazz) {\n+        try {\n+            return serializerAdapter.deserialize(record.getResponse().get(\"Body\"),\n+                clazz, SerializerEncoding.JSON);\n+        } catch (IOException e) {\n+            throw new RuntimeException(\"Failed to deserialize service response.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71684319f42e30997c02b5b9b3a611498fa3da5e"}, "originalPosition": 132}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NDU2NDE1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10649#pullrequestreview-405456415", "createdAt": "2020-05-05T02:02:42Z", "commit": {"oid": "71684319f42e30997c02b5b9b3a611498fa3da5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMjowMjo0MlrOGQYOXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMjowMjo0MlrOGQYOXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTgyNzI5NA==", "bodyText": "I saw this method twice in this PR.  Do we want to put it in TestUtil?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10649#discussion_r419827294", "createdAt": "2020-05-05T02:02:42Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -527,14 +557,63 @@ String getApiKey() {\n     protected String getEndpoint() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71684319f42e30997c02b5b9b3a611498fa3da5e"}, "originalPosition": 448}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NDU2Nzg0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10649#pullrequestreview-405456784", "createdAt": "2020-05-05T02:04:17Z", "commit": {"oid": "71684319f42e30997c02b5b9b3a611498fa3da5e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3e085efc241437c70ea04613ffe1363f7c3681c", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d3e085efc241437c70ea04613ffe1363f7c3681c", "committedDate": "2020-05-05T17:30:19Z", "message": "test deployment script output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c54b125661152ef0a3db2477de33dd389f93d617", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c54b125661152ef0a3db2477de33dd389f93d617", "committedDate": "2020-05-05T17:30:24Z", "message": "update confidence value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbd92c9d37bbfcbdde6a368938e50994cbd808f0", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fbd92c9d37bbfcbdde6a368938e50994cbd808f0", "committedDate": "2020-05-05T17:30:30Z", "message": "Update for tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3cfe718bf6eaacaf65212a05f9326e86aa4f839", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f3cfe718bf6eaacaf65212a05f9326e86aa4f839", "committedDate": "2020-05-05T17:30:35Z", "message": "remove storage dependency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9743bdcee5bab89f8e9db94aee13682f44c1bfdb", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9743bdcee5bab89f8e9db94aee13682f44c1bfdb", "committedDate": "2020-05-05T17:30:40Z", "message": "update form training tests to use record files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "332afcea74af70c9c8b9099cf1c88e955390cc7c", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/332afcea74af70c9c8b9099cf1c88e955390cc7c", "committedDate": "2020-05-05T17:30:46Z", "message": "update Form recognizer tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bef1220dfe03558dd5d1b1aad75368a7c510e16f", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bef1220dfe03558dd5d1b1aad75368a7c510e16f", "committedDate": "2020-05-05T17:30:50Z", "message": "update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f776d0bcbf9e1ddf59e1e1aabe769fba19e46e7c", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f776d0bcbf9e1ddf59e1e1aabe769fba19e46e7c", "committedDate": "2020-05-05T17:30:54Z", "message": "readme updates"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "71684319f42e30997c02b5b9b3a611498fa3da5e", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/71684319f42e30997c02b5b9b3a611498fa3da5e", "committedDate": "2020-05-04T17:53:07Z", "message": "readme updates"}, "afterCommit": {"oid": "f776d0bcbf9e1ddf59e1e1aabe769fba19e46e7c", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f776d0bcbf9e1ddf59e1e1aabe769fba19e46e7c", "committedDate": "2020-05-05T17:30:54Z", "message": "readme updates"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4498, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}