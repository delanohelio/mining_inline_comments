{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxMjY0MjE0", "number": 7335, "title": "Make azure resource creation can be disabled.", "bodyText": "This PR adds an optional flag to the archetype-sdk-tests.yml template to disable Azure resource creation during live tests. The reason we need this is that Cosmos reuses this template for its emulator runs and it doesn't (and shouldn't) have the requisite configuration present for Azure resource creation to work.", "createdAt": "2020-01-10T03:58:08Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7335", "merged": true, "mergeCommit": {"oid": "b5f759644d19878aa077b6d3fd544f40dc65029d"}, "closed": true, "closedAt": "2020-01-10T17:02:31Z", "author": {"login": "mitchdenny"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb42YligH2gAyMzYxMjY0MjE0OmMzMDFmZTUwNTU4YmI3ZmJmMGE1ZDZkMjUxODFkNGJlNzkwNmNiZWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb5Bk4UAFqTM0MTI5MDM1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c301fe50558bb7fbf0a5d6d25181d4be7906cbeb", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c301fe50558bb7fbf0a5d6d25181d4be7906cbeb", "committedDate": "2020-01-10T03:56:25Z", "message": "Make azure resource creation can be disabled."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcb9f27231c7f66252849e2e53d7d859c1ab963c", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/dcb9f27231c7f66252849e2e53d7d859c1ab963c", "committedDate": "2020-01-10T03:59:53Z", "message": "Fix indentation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMjAyOTE5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7335#pullrequestreview-341202919", "createdAt": "2020-01-10T14:39:26Z", "commit": {"oid": "dcb9f27231c7f66252849e2e53d7d859c1ab963c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMjkwMzU5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7335#pullrequestreview-341290359", "createdAt": "2020-01-10T16:49:10Z", "commit": {"oid": "dcb9f27231c7f66252849e2e53d7d859c1ab963c"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNjo0OToxMFrOFcZ6pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xMFQxNjo1NDoyMlrOFcaELA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTMyOTA2MA==", "bodyText": "We should add DisableAzureResourceCreation to the parameters section (like a function signature) so it's obvious that you can use it. This is cosmetic, not blocking.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7335#discussion_r365329060", "createdAt": "2020-01-10T16:49:10Z", "author": {"login": "danieljurek"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-tests.yml", "diffHunk": "@@ -70,28 +70,29 @@ jobs:\n           Write-Host \"##vso[task.setvariable variable=BaseName;]$baseName\"\n         displayName: Generate $(BaseName)\n \n-      - pwsh: >-\n-          eng/New-TestResources.ps1\n-          -BaseName $(BaseName)\n-          -ServiceDirectory ${{ parameters.ServiceDirectory }}\n-          -TestApplicationId $env:TEST_APPLICATION_ID\n-          -TestApplicationSecret $env:TEST_APPLICATION_SECRET\n-          -TestApplicationOid $env:TEST_APPLICATION_OID\n-          -TenantId $env:TENANT_ID\n-          -ProvisionerApplicationId $env:PROVISIONER_APPLICATION_ID\n-          -ProvisionerApplicationSecret $env:PROVISIONER_APPLICATION_SECRET\n-          -DeleteAfterHours 24\n-          -Location westus2\n-          -Force\n-          -Verbose\n-        env:\n-          TEST_APPLICATION_ID: $(aad-azure-sdk-test-client-id)\n-          TEST_APPLICATION_SECRET: $(aad-azure-sdk-test-client-secret)\n-          TEST_APPLICATION_OID: $(aad-azure-sdk-test-client-oid)\n-          TENANT_ID: $(aad-azure-sdk-test-tenant-id)\n-          PROVISIONER_APPLICATION_ID: $(provisioner-aad-id)\n-          PROVISIONER_APPLICATION_SECRET: $(provisioner-aad-secret)\n-        displayName: Provision Test Resources\n+      - ${{ if ne(parameters.DisableAzureResourceCreation, 'true') }}:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcb9f27231c7f66252849e2e53d7d859c1ab963c"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTMzMTUwMA==", "bodyText": "I suggest using EnableAzureResourceCreation and have it default to true in the archetype-sdk-tests.yml file... though this is purely cosmetic and individual preference. The reason behind this is that it translates to \"yes, enable azure resource creation\" as opposed to the double negative: \"don't disable azure resource creation\"", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7335#discussion_r365331500", "createdAt": "2020-01-10T16:54:22Z", "author": {"login": "danieljurek"}, "path": "eng/pipelines/templates/stages/cosmos-sdk-client.yml", "diffHunk": "@@ -26,6 +26,7 @@ stages:\n     - template: ../jobs/archetype-sdk-tests.yml\n       parameters:\n         TestName: Emulator\n+        DisableAzureResourceCreation: true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcb9f27231c7f66252849e2e53d7d859c1ab963c"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 608, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}