{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzNjAwNDcx", "number": 17664, "title": "Keep aad legacy code", "bodyText": "Recover aad legacy code.\nAdd SPEL like @ConditionalOnExpression(\"#{'${azure.active.directory.uri:notExist}' != 'notExist'}\") to make legacy code and new code not work at the same time.\nChange new property prefix from 'azure.activedirectory' to 'azure.active.directory'.", "createdAt": "2020-11-19T00:44:52Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17664", "merged": true, "mergeCommit": {"oid": "ed03d8757db002442ffb287666bee1ad947b9510"}, "closed": true, "closedAt": "2020-11-19T06:34:40Z", "author": {"login": "chenrujun"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdd3ojpgH2gAyNTIzNjAwNDcxOjhlZGIxNjFjODYyYTJhZDRhNzgzOWM4NTNkZDIyNGNjOWUyOGJmNmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdd7r_KgH2gAyNTIzNjAwNDcxOmI5MGRiNzAxYjM0YzE2N2EwYzJlMjJhNjQyZDQ0ODkzYjJiODUzNTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8edb161c862a2ad4a7839c853dd224cc9e28bf6e", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8edb161c862a2ad4a7839c853dd224cc9e28bf6e", "committedDate": "2020-11-19T00:30:07Z", "message": "checkout jialin's commit and make build pass."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5352b967d97b7839d8fba4fa2c5bb53d2f01dfda", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5352b967d97b7839d8fba4fa2c5bb53d2f01dfda", "committedDate": "2020-11-19T00:41:57Z", "message": "Change new property prefix from 'azure.activedirectory' to 'azure.active.directory'."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMzOTk1OTc2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17664#pullrequestreview-533995976", "createdAt": "2020-11-19T00:45:32Z", "commit": {"oid": "5352b967d97b7839d8fba4fa2c5bb53d2f01dfda"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwMDo0NTozM1rOH2IHOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQwMDo0NTozM1rOH2IHOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjUxODA3Mg==", "bodyText": "Refs: https://stackoverflow.com/questions/49013862/how-to-get-spel-spring-el-default-to-null-expression-working-in-the-spring-xml", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17664#discussion_r526518072", "createdAt": "2020-11-19T00:45:33Z", "author": {"login": "chenrujun"}, "path": "sdk/spring/azure-spring-boot/src/main/java/com/azure/spring/aad/implementation/AzureActiveDirectoryConfiguration.java", "diffHunk": "@@ -0,0 +1,136 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.spring.aad.implementation;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import com.azure.spring.autoconfigure.aad.AADOAuth2AutoConfiguration;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.boot.autoconfigure.AutoConfigureAfter;\n+import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;\n+import org.springframework.boot.autoconfigure.condition.ConditionalOnExpression;\n+import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;\n+import org.springframework.boot.context.properties.EnableConfigurationProperties;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n+import org.springframework.security.config.annotation.web.builders.HttpSecurity;\n+import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\n+import org.springframework.security.oauth2.client.registration.ClientRegistration;\n+import org.springframework.security.oauth2.client.registration.ClientRegistrationRepository;\n+import org.springframework.security.oauth2.client.web.OAuth2AuthorizedClientRepository;\n+import org.springframework.security.oauth2.core.AuthorizationGrantType;\n+\n+@Configuration\n+@ConditionalOnClass(ClientRegistrationRepository.class)\n+@EnableConfigurationProperties(AzureActiveDirectoryProperties.class)\n+@AutoConfigureAfter(AADOAuth2AutoConfiguration.class)\n+@ConditionalOnExpression(\"#{'${azure.active.directory.uri:notExist}' != 'notExist'}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5352b967d97b7839d8fba4fa2c5bb53d2f01dfda"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "108c359841baabc2085243723ec82f5665e3c268", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/108c359841baabc2085243723ec82f5665e3c268", "committedDate": "2020-11-19T00:53:13Z", "message": "Save authorizedClient to httpSession."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9228a492da5cc538f6001da2db3f02afe3af1006", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9228a492da5cc538f6001da2db3f02afe3af1006", "committedDate": "2020-11-19T00:59:18Z", "message": "Delete @AutoConfigureAfter in AzureActiveDirectoryConfiguration."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c69fe3ac3f52ddcd1bcc4315bec3c46785393b24", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c69fe3ac3f52ddcd1bcc4315bec3c46785393b24", "committedDate": "2020-11-19T01:02:44Z", "message": "No logic change, just format code."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0MDA2OTg3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17664#pullrequestreview-534006987", "createdAt": "2020-11-19T01:14:43Z", "commit": {"oid": "c69fe3ac3f52ddcd1bcc4315bec3c46785393b24"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e3ae3ea00485182c97a1200d6e53033358a2ce9", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3e3ae3ea00485182c97a1200d6e53033358a2ce9", "committedDate": "2020-11-19T01:21:39Z", "message": "Fix build error."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f3a5f04cea2a6071e94004b8c5ea620cd10f9b2", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6f3a5f04cea2a6071e94004b8c5ea620cd10f9b2", "committedDate": "2020-11-19T02:26:21Z", "message": "Recover function codes after jialin's commit."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b90db701b34c167a0c2e22a642d44893b2b85351", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b90db701b34c167a0c2e22a642d44893b2b85351", "committedDate": "2020-11-19T05:13:29Z", "message": "Fix integration test failure."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 55, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}