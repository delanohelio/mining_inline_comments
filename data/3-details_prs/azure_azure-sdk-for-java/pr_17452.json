{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NzQ0MDAz", "number": 17452, "title": "[Communication] - Chat - Replaced ChatUserCredentialPolicy with BearerTokenAuthenticationPolicy", "bodyText": "This PR removes a custom policy built for the Chat SDK and replaces it with a generic BearerTokenAuthenticationPolicy to keep consistency with other SDKs.\nTODO:\n\n CommunicationTokenCredential tests", "createdAt": "2020-11-10T20:24:54Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452", "merged": true, "mergeCommit": {"oid": "e63c3e107868db51cd953a2a6be4efbc2bf9d7b0"}, "closed": true, "closedAt": "2020-11-19T19:08:56Z", "author": {"login": "jbeauregardb"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbPXh4AH2gAyNTE4NzQ0MDAzOjdmZjk5ZThhN2ZkOGI4MzdjNTc3ZDY5ZGUyYTZhZjZlZjcyMWM2ZTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdb6LeUgFqTUyOTU0NjM4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9", "committedDate": "2020-11-10T20:27:28Z", "message": "Replaced ChatUserCredentialPolicy with BearerTokenAuthenticationPolicy"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fafb6dbff3ecde87e45d2d65e542e0f37f5da74", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4fafb6dbff3ecde87e45d2d65e542e0f37f5da74", "committedDate": "2020-11-10T20:16:01Z", "message": "Replaced ChatUserCredentialPolicy with BearerTokenAuthenticationPolicy"}, "afterCommit": {"oid": "7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9", "committedDate": "2020-11-10T20:27:28Z", "message": "Replaced ChatUserCredentialPolicy with BearerTokenAuthenticationPolicy"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjU3ODM3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452#pullrequestreview-527657837", "createdAt": "2020-11-10T22:25:35Z", "commit": {"oid": "7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjoyNTozNVrOHwyB6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjoyNTozNVrOHwyB6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMzM4Nw==", "bodyText": "Looks like you should also remove the ChatUserCredentialPolicy file as it is not used anymore", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452#discussion_r520913387", "createdAt": "2020-11-10T22:25:35Z", "author": {"login": "ankitarorabit"}, "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatClientBuilder.java", "diffHunk": "@@ -166,9 +168,10 @@ public ChatAsyncClient buildAsyncClient() {\n         } else {\n             Objects.requireNonNull(communicationUserCredential);\n             Objects.requireNonNull(httpClient);\n+            CommunicationTokenCredential tokenCredential = new CommunicationTokenCredential(communicationUserCredential);\n \n             pipeline = createHttpPipeline(httpClient,\n-                new ChatUserCredentialPolicy(communicationUserCredential),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ff99e8a7fd8b837c577d69de2a6af6ef721c6e9"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjU5MzM4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452#pullrequestreview-527659338", "createdAt": "2020-11-10T22:28:15Z", "commit": {"oid": "e03d97b5ff4d2ff381f758d14596478d14e2b007"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjoyODoxNlrOHwyGlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjoyODoxNlrOHwyGlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxNDU4Mw==", "bodyText": "nit: space between \"a CommunicationUserCredential\"", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452#discussion_r520914583", "createdAt": "2020-11-10T22:28:16Z", "author": {"login": "ankitarorabit"}, "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/CommunicationTokenCredential.java", "diffHunk": "@@ -0,0 +1,41 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.communication.common;\n+\n+import java.util.concurrent.ExecutionException;\n+\n+import com.azure.core.credential.AccessToken;\n+import com.azure.core.credential.TokenCredential;\n+import com.azure.core.credential.TokenRequestContext;\n+\n+import reactor.core.publisher.Mono;\n+\n+/**\n+ * This class serves as aCommunicationUserCredential wrapper that ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e03d97b5ff4d2ff381f758d14596478d14e2b007"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjU5Njky", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452#pullrequestreview-527659692", "createdAt": "2020-11-10T22:28:55Z", "commit": {"oid": "e03d97b5ff4d2ff381f758d14596478d14e2b007"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b665cabddec4250042d3fd22ffe4d3bb2afc0075", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b665cabddec4250042d3fd22ffe4d3bb2afc0075", "committedDate": "2020-11-10T22:41:54Z", "message": "Removed ChatUserCredentialPolicy"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e03d97b5ff4d2ff381f758d14596478d14e2b007", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e03d97b5ff4d2ff381f758d14596478d14e2b007", "committedDate": "2020-11-10T22:25:34Z", "message": "Removed ChatUserCredentialPolicy"}, "afterCommit": {"oid": "b665cabddec4250042d3fd22ffe4d3bb2afc0075", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b665cabddec4250042d3fd22ffe4d3bb2afc0075", "committedDate": "2020-11-10T22:41:54Z", "message": "Removed ChatUserCredentialPolicy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77e3250c5494d9a03f2fb21db4b36576a5328da6", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/77e3250c5494d9a03f2fb21db4b36576a5328da6", "committedDate": "2020-11-11T19:51:03Z", "message": "Added tests for CommunicationTokenCredential"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b33b1eb8fe05403199ddab176005b3ecf9d06f3", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1b33b1eb8fe05403199ddab176005b3ecf9d06f3", "committedDate": "2020-11-11T19:07:31Z", "message": "Added tests for CommunicationTokenCredential"}, "afterCommit": {"oid": "77e3250c5494d9a03f2fb21db4b36576a5328da6", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/77e3250c5494d9a03f2fb21db4b36576a5328da6", "committedDate": "2020-11-11T19:51:03Z", "message": "Added tests for CommunicationTokenCredential"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NTQ2Mzg3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17452#pullrequestreview-529546387", "createdAt": "2020-11-12T22:20:13Z", "commit": {"oid": "77e3250c5494d9a03f2fb21db4b36576a5328da6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 63, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}