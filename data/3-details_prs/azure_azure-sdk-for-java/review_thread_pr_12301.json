{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MTQ1NDAy", "number": 12301, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNzoxNTo0NlrOEI2hJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNzowMToxNVrOEJM-dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NzE3Mjg2OnYy", "diffSide": "RIGHT", "path": "sdk/cosmos/test-resources.json", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNzoxNTo0NlrOGpEO8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNzo0ODo1N1rOGpFZCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcxNDE2MQ==", "bodyText": "we should think about the multi-region accounts CI, how can we achieve that. can we have multiple arm templates: one for single region account and one for multi region account or can we parametrized the locations array cardinality?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12301#discussion_r445714161", "createdAt": "2020-06-25T17:15:46Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/test-resources.json", "diffHunk": "@@ -0,0 +1,75 @@\n+{\n+  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+  \"contentVersion\": \"1.0.0.0\",\n+  \"parameters\": {\n+    \"baseName\": {\n+      \"type\": \"string\"\n+    },\n+    \"enableMultipleWriteLocations\" : {\n+      \"type\": \"bool\",\n+      \"metadata\": {\n+        \"description\": \"Flag to enable or disable multiple write locations on CosmosDB Account\"\n+      }\n+    },\n+    \"defaultConsistencyLevel\": {\n+      \"type\": \"string\",\n+      \"metadata\": {\n+        \"description\": \"Default Cosmosdb Account level consistency\"\n+      }\n+    }\n+  },\n+  \"variables\": {\n+    \"apiVersion\": \"2020-04-01\",\n+    \"accountName\": \"[toLower(parameters('baseName'))]\",\n+    \"resourceId\": \"[resourceId('Microsoft.DocumentDB/databaseAccounts', variables('accountName'))]\"\n+  },\n+  \"resources\": [\n+    {\n+      \"type\": \"Microsoft.DocumentDB/databaseAccounts\",\n+      \"apiVersion\": \"[variables('apiVersion')]\",\n+      \"name\": \"[variables('accountName')]\",\n+      \"location\": \"[resourceGroup().location]\",\n+      \"kind\": \"GlobalDocumentDB\",\n+      \"properties\": {\n+        \"publicNetworkAccess\": \"Enabled\",\n+        \"enableAutomaticFailover\": false,\n+        \"enableMultipleWriteLocations\": \"[parameters('enableMultipleWriteLocations')]\",\n+        \"isVirtualNetworkFilterEnabled\": false,\n+        \"virtualNetworkRules\": [],\n+        \"disableKeyBasedMetadataWriteAccess\": false,\n+        \"enableFreeTier\": false,\n+        \"enableAnalyticalStorage\": false,\n+        \"databaseAccountOfferType\": \"Standard\",\n+        \"consistencyPolicy\": {\n+          \"defaultConsistencyLevel\": \"[parameters('defaultConsistencyLevel')]\",\n+          \"maxIntervalInSeconds\": 5,\n+          \"maxStalenessPrefix\": 100\n+        },\n+        \"locations\": [\n+          {\n+            \"locationName\": \"East US 2\",\n+            \"provisioningState\": \"Succeeded\",\n+            \"failoverPriority\": 0,\n+            \"isZoneRedundant\": false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "563348566c59974b6beabf472cfd627a30a61b86"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTczMzEzMQ==", "bodyText": "Good point Mo, @danieljurek - is there a way we can support multiple test-resources.json files - one for all single-region accounts, and other one for all multi-region accounts ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12301#discussion_r445733131", "createdAt": "2020-06-25T17:48:57Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/test-resources.json", "diffHunk": "@@ -0,0 +1,75 @@\n+{\n+  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n+  \"contentVersion\": \"1.0.0.0\",\n+  \"parameters\": {\n+    \"baseName\": {\n+      \"type\": \"string\"\n+    },\n+    \"enableMultipleWriteLocations\" : {\n+      \"type\": \"bool\",\n+      \"metadata\": {\n+        \"description\": \"Flag to enable or disable multiple write locations on CosmosDB Account\"\n+      }\n+    },\n+    \"defaultConsistencyLevel\": {\n+      \"type\": \"string\",\n+      \"metadata\": {\n+        \"description\": \"Default Cosmosdb Account level consistency\"\n+      }\n+    }\n+  },\n+  \"variables\": {\n+    \"apiVersion\": \"2020-04-01\",\n+    \"accountName\": \"[toLower(parameters('baseName'))]\",\n+    \"resourceId\": \"[resourceId('Microsoft.DocumentDB/databaseAccounts', variables('accountName'))]\"\n+  },\n+  \"resources\": [\n+    {\n+      \"type\": \"Microsoft.DocumentDB/databaseAccounts\",\n+      \"apiVersion\": \"[variables('apiVersion')]\",\n+      \"name\": \"[variables('accountName')]\",\n+      \"location\": \"[resourceGroup().location]\",\n+      \"kind\": \"GlobalDocumentDB\",\n+      \"properties\": {\n+        \"publicNetworkAccess\": \"Enabled\",\n+        \"enableAutomaticFailover\": false,\n+        \"enableMultipleWriteLocations\": \"[parameters('enableMultipleWriteLocations')]\",\n+        \"isVirtualNetworkFilterEnabled\": false,\n+        \"virtualNetworkRules\": [],\n+        \"disableKeyBasedMetadataWriteAccess\": false,\n+        \"enableFreeTier\": false,\n+        \"enableAnalyticalStorage\": false,\n+        \"databaseAccountOfferType\": \"Standard\",\n+        \"consistencyPolicy\": {\n+          \"defaultConsistencyLevel\": \"[parameters('defaultConsistencyLevel')]\",\n+          \"maxIntervalInSeconds\": 5,\n+          \"maxStalenessPrefix\": 100\n+        },\n+        \"locations\": [\n+          {\n+            \"locationName\": \"East US 2\",\n+            \"provisioningState\": \"Succeeded\",\n+            \"failoverPriority\": 0,\n+            \"isZoneRedundant\": false", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTcxNDE2MQ=="}, "originalCommit": {"oid": "563348566c59974b6beabf472cfd627a30a61b86"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MDg1MjM4OnYy", "diffSide": "RIGHT", "path": "sdk/cosmos/test-resources.json", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNzowMToxNVrOGpoMmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNzowNToxMVrOGpoT0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwMzM4NA==", "bodyText": "typo\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    \"description\": \"Enable multiple regions,d efault is false\"\n          \n          \n            \n                    \"description\": \"Enable multiple regions, default is false\"", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12301#discussion_r446303384", "createdAt": "2020-06-26T17:01:15Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/test-resources.json", "diffHunk": "@@ -16,12 +16,42 @@\n       \"metadata\": {\n         \"description\": \"Default Cosmosdb Account level consistency\"\n       }\n+    },\n+    \"enableMultipleRegions\": {\n+      \"type\": \"bool\",\n+      \"metadata\": {\n+        \"description\": \"Enable multiple regions,d efault is false\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ccdf743695e5fda484dd5fd401118b3b7db7376"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwNTIzNA==", "bodyText": "@moderakh  - we are still experimenting with this feature.\nThis was just a quick commit I asked @danieljurek  to do so I can pick up the changes we talked about :)\nThis will all be fixed with better comments.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12301#discussion_r446305234", "createdAt": "2020-06-26T17:05:11Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/test-resources.json", "diffHunk": "@@ -16,12 +16,42 @@\n       \"metadata\": {\n         \"description\": \"Default Cosmosdb Account level consistency\"\n       }\n+    },\n+    \"enableMultipleRegions\": {\n+      \"type\": \"bool\",\n+      \"metadata\": {\n+        \"description\": \"Enable multiple regions,d efault is false\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwMzM4NA=="}, "originalCommit": {"oid": "0ccdf743695e5fda484dd5fd401118b3b7db7376"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3775, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}