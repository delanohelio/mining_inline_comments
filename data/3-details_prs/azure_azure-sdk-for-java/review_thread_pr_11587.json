{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MjUzNzk5", "number": 11587, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxODoxNzowMlrOEA_dcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxOTo1MjoxMFrOEBBNew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NDc1MTg0OnYy", "diffSide": "RIGHT", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosException.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxODoxNzowMlrOGcnThw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxODozMDo0NFrOGcnvXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY1NzI4Nw==", "bodyText": "I think this need to go into troubleshooting string, rather than just Exception.toSTring()\n@simplynaveen20", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11587#discussion_r432657287", "createdAt": "2020-05-29T18:17:02Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosException.java", "diffHunk": "@@ -258,7 +260,7 @@ CosmosException setDiagnostics(CosmosDiagnostics cosmosDiagnostics) {\n \n     @Override\n     public String toString() {\n-        return getClass().getSimpleName() + \"{\" + \"error=\" + cosmosError + \", resourceAddress='\"\n+        return getClass().getSimpleName() + \"{\" + \"sdkVersion=\" + SDK_VERSION + \", error=\" + cosmosError + \", resourceAddress='\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1bc3880470161680b5567b1e6b33ee636e2e9fdf"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY1OTYwMA==", "bodyText": "My initial thought on that is, we don't want our customers to rely on getting diagnostics string and then logging the exception.\nIt would be much better to have it in all scenarios.\nFor example, below is a very common scenario is :\ntry {\n  some operation. \n} catch (Exception e) {\n  logger.error(\"Exception occurred\", e);\n}\n\nThat being said, we can also add this to diagnostics string.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11587#discussion_r432659600", "createdAt": "2020-05-29T18:20:54Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosException.java", "diffHunk": "@@ -258,7 +260,7 @@ CosmosException setDiagnostics(CosmosDiagnostics cosmosDiagnostics) {\n \n     @Override\n     public String toString() {\n-        return getClass().getSimpleName() + \"{\" + \"error=\" + cosmosError + \", resourceAddress='\"\n+        return getClass().getSimpleName() + \"{\" + \"sdkVersion=\" + SDK_VERSION + \", error=\" + cosmosError + \", resourceAddress='\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY1NzI4Nw=="}, "originalCommit": {"oid": "1bc3880470161680b5567b1e6b33ee636e2e9fdf"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY2MDk0NA==", "bodyText": "diagnostics string should have all the needed info for troubleshooting (including sdk version). However it is good to have it here too. We can consider adding it to troubleshooting string later.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11587#discussion_r432660944", "createdAt": "2020-05-29T18:23:34Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosException.java", "diffHunk": "@@ -258,7 +260,7 @@ CosmosException setDiagnostics(CosmosDiagnostics cosmosDiagnostics) {\n \n     @Override\n     public String toString() {\n-        return getClass().getSimpleName() + \"{\" + \"error=\" + cosmosError + \", resourceAddress='\"\n+        return getClass().getSimpleName() + \"{\" + \"sdkVersion=\" + SDK_VERSION + \", error=\" + cosmosError + \", resourceAddress='\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY1NzI4Nw=="}, "originalCommit": {"oid": "1bc3880470161680b5567b1e6b33ee636e2e9fdf"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY2MTM0NQ==", "bodyText": "Valid point, I can add it to the diagnostics string as well in this PR. Let me see what needs to be done for that.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11587#discussion_r432661345", "createdAt": "2020-05-29T18:24:21Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosException.java", "diffHunk": "@@ -258,7 +260,7 @@ CosmosException setDiagnostics(CosmosDiagnostics cosmosDiagnostics) {\n \n     @Override\n     public String toString() {\n-        return getClass().getSimpleName() + \"{\" + \"error=\" + cosmosError + \", resourceAddress='\"\n+        return getClass().getSimpleName() + \"{\" + \"sdkVersion=\" + SDK_VERSION + \", error=\" + cosmosError + \", resourceAddress='\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY1NzI4Nw=="}, "originalCommit": {"oid": "1bc3880470161680b5567b1e6b33ee636e2e9fdf"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY2MjA5OQ==", "bodyText": "@moderakh @simplynaveen20  - would it make sense to include the complete user agent string on diagnostics or just the SDK_VERSION ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11587#discussion_r432662099", "createdAt": "2020-05-29T18:25:58Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosException.java", "diffHunk": "@@ -258,7 +260,7 @@ CosmosException setDiagnostics(CosmosDiagnostics cosmosDiagnostics) {\n \n     @Override\n     public String toString() {\n-        return getClass().getSimpleName() + \"{\" + \"error=\" + cosmosError + \", resourceAddress='\"\n+        return getClass().getSimpleName() + \"{\" + \"sdkVersion=\" + SDK_VERSION + \", error=\" + cosmosError + \", resourceAddress='\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY1NzI4Nw=="}, "originalCommit": {"oid": "1bc3880470161680b5567b1e6b33ee636e2e9fdf"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY2NDQxMw==", "bodyText": "Honestly I prefer it to diagnostic , given we print diagnostic on every exception. It look little odd here on exception", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11587#discussion_r432664413", "createdAt": "2020-05-29T18:30:44Z", "author": {"login": "simplynaveen20"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosException.java", "diffHunk": "@@ -258,7 +260,7 @@ CosmosException setDiagnostics(CosmosDiagnostics cosmosDiagnostics) {\n \n     @Override\n     public String toString() {\n-        return getClass().getSimpleName() + \"{\" + \"error=\" + cosmosError + \", resourceAddress='\"\n+        return getClass().getSimpleName() + \"{\" + \"sdkVersion=\" + SDK_VERSION + \", error=\" + cosmosError + \", resourceAddress='\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY1NzI4Nw=="}, "originalCommit": {"oid": "1bc3880470161680b5567b1e6b33ee636e2e9fdf"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5NTAzODY3OnYy", "diffSide": "RIGHT", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosDiagnostics.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxOTo1MjoxMFrOGcqJpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQyMDoyMjo0MVrOGcq9cQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcwMzkwOQ==", "bodyText": "Is there an Environment.NewLine or equivalent for Java? It might not work correctly on Windows where new line is \\r\\n", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11587#discussion_r432703909", "createdAt": "2020-05-29T19:52:10Z", "author": {"login": "j82w"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosDiagnostics.java", "diffHunk": "@@ -45,16 +47,18 @@ CosmosDiagnostics clientSideRequestStatistics(ClientSideRequestStatistics client\n      */\n     @Override\n     public String toString() {\n+        StringBuilder stringBuilder = new StringBuilder();\n+        stringBuilder.append(\"userAgent=\").append(USER_AGENT).append(\"\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12f51f3015ed4691dd5a981ddc3266b7c75c3f59"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcwNjIwNg==", "bodyText": "Good point @j82w, we can use - System.lineSeparator()\nhttps://docs.oracle.com/javase/8/docs/api/java/lang/System.html#lineSeparator--\nI will port that change as a separate PR for everywhere in SDK code.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11587#discussion_r432706206", "createdAt": "2020-05-29T19:57:14Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosDiagnostics.java", "diffHunk": "@@ -45,16 +47,18 @@ CosmosDiagnostics clientSideRequestStatistics(ClientSideRequestStatistics client\n      */\n     @Override\n     public String toString() {\n+        StringBuilder stringBuilder = new StringBuilder();\n+        stringBuilder.append(\"userAgent=\").append(USER_AGENT).append(\"\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcwMzkwOQ=="}, "originalCommit": {"oid": "12f51f3015ed4691dd5a981ddc3266b7c75c3f59"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxNzE2OQ==", "bodyText": "Tracking this issue here : #11594", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11587#discussion_r432717169", "createdAt": "2020-05-29T20:22:41Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosDiagnostics.java", "diffHunk": "@@ -45,16 +47,18 @@ CosmosDiagnostics clientSideRequestStatistics(ClientSideRequestStatistics client\n      */\n     @Override\n     public String toString() {\n+        StringBuilder stringBuilder = new StringBuilder();\n+        stringBuilder.append(\"userAgent=\").append(USER_AGENT).append(\"\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcwMzkwOQ=="}, "originalCommit": {"oid": "12f51f3015ed4691dd5a981ddc3266b7c75c3f59"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4017, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}