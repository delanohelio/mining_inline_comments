{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3NjEwMjUz", "number": 15235, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjoyOTo0MlrOEjzqoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNjowNjozNlrOEnhGEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1OTgyMTEyOnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClient.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjoyOTo0MlrOHSYGAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjo0NTo1MFrOHSY18g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzMTE3MA==", "bodyText": "Do we have a ClientConstants in SB to put this?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15235#discussion_r489031170", "createdAt": "2020-09-15T22:29:42Z", "author": {"login": "samvaity"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClient.java", "diffHunk": "@@ -74,6 +75,9 @@\n      */\n     static final int MAX_MESSAGE_LENGTH_BYTES = 256 * 1024;\n     private static final String TRANSACTION_LINK_NAME = \"coordinator\";\n+    // Please see <a href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/azure-services-resource-providers>here</a>\n+    // for more information on Azure resource provider namespaces.\n+    private static final String AZ_TRACING_NAMESPACE_VALUE = \"Microsoft.ServiceBus\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b363cb22e33d5645fb7dac2eae7fae5d2f03a18"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA0MjY3MA==", "bodyText": "This can live here for now if it is the only place it is used.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15235#discussion_r489042670", "createdAt": "2020-09-15T22:44:54Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClient.java", "diffHunk": "@@ -74,6 +75,9 @@\n      */\n     static final int MAX_MESSAGE_LENGTH_BYTES = 256 * 1024;\n     private static final String TRANSACTION_LINK_NAME = \"coordinator\";\n+    // Please see <a href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/azure-services-resource-providers>here</a>\n+    // for more information on Azure resource provider namespaces.\n+    private static final String AZ_TRACING_NAMESPACE_VALUE = \"Microsoft.ServiceBus\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzMTE3MA=="}, "originalCommit": {"oid": "6b363cb22e33d5645fb7dac2eae7fae5d2f03a18"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA0MzQ0Mg==", "bodyText": "If you execute Ctrl+N, then Constants, you'll find ServiceBusConstants.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15235#discussion_r489043442", "createdAt": "2020-09-15T22:45:50Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClient.java", "diffHunk": "@@ -74,6 +75,9 @@\n      */\n     static final int MAX_MESSAGE_LENGTH_BYTES = 256 * 1024;\n     private static final String TRANSACTION_LINK_NAME = \"coordinator\";\n+    // Please see <a href=https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/azure-services-resource-providers>here</a>\n+    // for more information on Azure resource provider namespaces.\n+    private static final String AZ_TRACING_NAMESPACE_VALUE = \"Microsoft.ServiceBus\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzMTE3MA=="}, "originalCommit": {"oid": "6b363cb22e33d5645fb7dac2eae7fae5d2f03a18"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1OTgyODg5OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClient.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjozMToyOFrOHSYLXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQyMjo0NDozOFrOHSYyJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzMjU0Mg==", "bodyText": "For the entityPath and hostName values, do we want to update the ServiceBusSenderAsyncClient or we should be able to retrieve it some other way?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15235#discussion_r489032542", "createdAt": "2020-09-15T22:31:28Z", "author": {"login": "samvaity"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClient.java", "diffHunk": "@@ -495,17 +499,19 @@ public void close() {\n             messages.add(message);\n         }\n \n-        final Context finalSharedContext = sharedContext != null ? sharedContext : Context.NONE;\n+        if (isTracingEnabled) {\n+            final Context finalSharedContext = sharedContext == null\n+                ? Context.NONE\n+                : sharedContext\n+                    .addData(ENTITY_PATH_KEY, \"entityPath\")\n+                    .addData(HOST_NAME_KEY, \"hostName\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b363cb22e33d5645fb7dac2eae7fae5d2f03a18"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTA0MjQ3MA==", "bodyText": "There is an entityName you can use for entityPath. I'm sure fullyqualifedDomainName is also exposed in this class.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15235#discussion_r489042470", "createdAt": "2020-09-15T22:44:38Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClient.java", "diffHunk": "@@ -495,17 +499,19 @@ public void close() {\n             messages.add(message);\n         }\n \n-        final Context finalSharedContext = sharedContext != null ? sharedContext : Context.NONE;\n+        if (isTracingEnabled) {\n+            final Context finalSharedContext = sharedContext == null\n+                ? Context.NONE\n+                : sharedContext\n+                    .addData(ENTITY_PATH_KEY, \"entityPath\")\n+                    .addData(HOST_NAME_KEY, \"hostName\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTAzMjU0Mg=="}, "originalCommit": {"oid": "6b363cb22e33d5645fb7dac2eae7fae5d2f03a18"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5ODcyMTQ0OnYy", "diffSide": "RIGHT", "path": "sdk/core/azure-core-amqp/src/main/java/com/azure/core/amqp/implementation/TracerProvider.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNjowNjozNlrOHYJ0TA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNzowODoxNFrOHYL15w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA4ODcxNg==", "bodyText": "Does this break Event Hubs?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15235#discussion_r495088716", "createdAt": "2020-09-25T16:06:36Z", "author": {"login": "conniey"}, "path": "sdk/core/azure-core-amqp/src/main/java/com/azure/core/amqp/implementation/TracerProvider.java", "diffHunk": "@@ -33,17 +33,18 @@ public boolean isEnabled() {\n      * new span will be added as a child, otherwise the span will be created and added to the context and any downstream\n      * start calls will use the created span as the parent.\n      *\n+     * @param serviceBaseName the service name to be appended to the span name.\n      * @param context Additional metadata that is passed through the call stack.\n      * @param processKind the invoking process type.\n      * @return An updated context object.\n      */\n-    public Context startSpan(Context context, ProcessKind processKind) {\n+    public Context startSpan(String serviceBaseName, Context context, ProcessKind processKind) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbf62d9e7adda63db373c39d3437e5101cf53cc0"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTEyMTg5NQ==", "bodyText": "I updated Eventhubs too in this PR. It should be implementation details.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15235#discussion_r495121895", "createdAt": "2020-09-25T17:08:14Z", "author": {"login": "samvaity"}, "path": "sdk/core/azure-core-amqp/src/main/java/com/azure/core/amqp/implementation/TracerProvider.java", "diffHunk": "@@ -33,17 +33,18 @@ public boolean isEnabled() {\n      * new span will be added as a child, otherwise the span will be created and added to the context and any downstream\n      * start calls will use the created span as the parent.\n      *\n+     * @param serviceBaseName the service name to be appended to the span name.\n      * @param context Additional metadata that is passed through the call stack.\n      * @param processKind the invoking process type.\n      * @return An updated context object.\n      */\n-    public Context startSpan(Context context, ProcessKind processKind) {\n+    public Context startSpan(String serviceBaseName, Context context, ProcessKind processKind) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA4ODcxNg=="}, "originalCommit": {"oid": "fbf62d9e7adda63db373c39d3437e5101cf53cc0"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1027, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}