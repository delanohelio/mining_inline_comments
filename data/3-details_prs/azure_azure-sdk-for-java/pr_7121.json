{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MTcxNDYz", "number": 7121, "title": "connectionString() method should throw IllegalArgurmentException", "bodyText": "fixes: #6885\nthe connetionString() throws NullPointerException should throw IllegalArgumentException.\nAlso, no longer set AAD TokenCredentialto null when connectionString is given, vise versa..", "createdAt": "2020-01-04T01:39:12Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121", "merged": true, "mergeCommit": {"oid": "09b81e283dcdbd9217ad9d734de8b1edaa59b158"}, "closed": true, "closedAt": "2020-01-06T19:09:22Z", "author": {"login": "mssfang"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb24u4mAH2gAyMzU5MTcxNDYzOjE1MDUxZjA3NjgyZTYzNWE5YTMwYTUxYzY0MjI3YTYxZmU5NDE4YjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb3xCmSgFqTMzODgzNDA0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "15051f07682e635a9a30a51c64227a61fe9418b0", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/15051f07682e635a9a30a51c64227a61fe9418b0", "committedDate": "2020-01-04T01:32:44Z", "message": "throw IllegalArgException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NzgyNjI5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#pullrequestreview-338782629", "createdAt": "2020-01-06T17:31:41Z", "commit": {"oid": "15051f07682e635a9a30a51c64227a61fe9418b0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzozMTo0MVrOFakDTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzozMTo0MVrOFakDTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzM5Nzk2Ng==", "bodyText": "According to the design spec, null should throw NullPointerException and isEmpty should throw IllegalArgumentException. I'd split this into two steps.\nhttps://azure.github.io/azure-sdk/java_implementation.html#java-errors-system-errors", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#discussion_r363397966", "createdAt": "2020-01-06T17:31:41Z", "author": {"login": "conniey"}, "path": "sdk/appconfiguration/azure-data-appconfiguration/src/main/java/com/azure/data/appconfiguration/ConfigurationClientBuilder.java", "diffHunk": "@@ -239,25 +239,26 @@ public ConfigurationClientBuilder endpoint(String endpoint) {\n      * @param connectionString Connection string in the format \"endpoint={endpoint_value};id={id_value};\n      * secret={secret_value}\"\n      * @return The updated ConfigurationClientBuilder object.\n-     * @throws NullPointerException If {@code credential} is {@code null}.\n+     * @throws IllegalArgumentException if {@code connectionString} is null or an empty string. Or the secret is\n+     * invalid and cannot instantiate HMAC-SHA256 MAC algorithm.\n      */\n     public ConfigurationClientBuilder connectionString(String connectionString) {\n-        Objects.requireNonNull(connectionString);\n+        if (CoreUtils.isNullOrEmpty(connectionString)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15051f07682e635a9a30a51c64227a61fe9418b0"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34c113d4b9aa1d71467b9731b7f54194df711720", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/34c113d4b9aa1d71467b9731b7f54194df711720", "committedDate": "2020-01-06T17:37:41Z", "message": "split null pointer exception and illegal argument exception"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Nzg5NDcz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#pullrequestreview-338789473", "createdAt": "2020-01-06T17:45:21Z", "commit": {"oid": "34c113d4b9aa1d71467b9731b7f54194df711720"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzo0NToyMVrOFakXDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzo0NToyMVrOFakXDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQwMzAyMA==", "bodyText": "No change required in this PR.\nDo our Checkstyle rules need to be updated to catch this missing case? It looks like the IllegalArgumentException has been getting thrown for a while but never documented, we have a Checkstyle rule that should failed PR validation due to this.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#discussion_r363403020", "createdAt": "2020-01-06T17:45:21Z", "author": {"login": "alzimmermsft"}, "path": "sdk/appconfiguration/azure-data-appconfiguration/src/main/java/com/azure/data/appconfiguration/ConfigurationClientBuilder.java", "diffHunk": "@@ -239,25 +239,29 @@ public ConfigurationClientBuilder endpoint(String endpoint) {\n      * @param connectionString Connection string in the format \"endpoint={endpoint_value};id={id_value};\n      * secret={secret_value}\"\n      * @return The updated ConfigurationClientBuilder object.\n-     * @throws NullPointerException If {@code credential} is {@code null}.\n+     * @throws NullPointerException If {@code connectionString} is {@code null}.\n+     * @throws IllegalArgumentException if {@code connectionString} is an empty string. Or the secret is invalid and", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34c113d4b9aa1d71467b9731b7f54194df711720"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Nzg5NTMz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#pullrequestreview-338789533", "createdAt": "2020-01-06T17:45:28Z", "commit": {"oid": "34c113d4b9aa1d71467b9731b7f54194df711720"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzo0NToyOFrOFakXPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzo0NToyOFrOFakXPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQwMzA3MQ==", "bodyText": "You can replace this with connectionString.isEmpty(). No need to do another null check in CoreUtils.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#discussion_r363403071", "createdAt": "2020-01-06T17:45:28Z", "author": {"login": "conniey"}, "path": "sdk/appconfiguration/azure-data-appconfiguration/src/main/java/com/azure/data/appconfiguration/ConfigurationClientBuilder.java", "diffHunk": "@@ -239,25 +239,29 @@ public ConfigurationClientBuilder endpoint(String endpoint) {\n      * @param connectionString Connection string in the format \"endpoint={endpoint_value};id={id_value};\n      * secret={secret_value}\"\n      * @return The updated ConfigurationClientBuilder object.\n-     * @throws NullPointerException If {@code credential} is {@code null}.\n+     * @throws NullPointerException If {@code connectionString} is {@code null}.\n+     * @throws IllegalArgumentException if {@code connectionString} is an empty string. Or the secret is invalid and\n+     * cannot instantiate HMAC-SHA256 MAC algorithm.\n      */\n     public ConfigurationClientBuilder connectionString(String connectionString) {\n-        Objects.requireNonNull(connectionString);\n+        Objects.requireNonNull(connectionString, \"'connectionString' cannot be null.\");\n+\n+        if (CoreUtils.isNullOrEmpty(connectionString)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34c113d4b9aa1d71467b9731b7f54194df711720"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NzkxMDU1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#pullrequestreview-338791055", "createdAt": "2020-01-06T17:48:18Z", "commit": {"oid": "34c113d4b9aa1d71467b9731b7f54194df711720"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzo0ODoxOFrOFakbog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzo0ODoxOFrOFakbog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQwNDE5NA==", "bodyText": "Should this @throws statement be this?\n@throws IllegalArgumentException If {@code connectionString} is an empty string, the {@code connectionString} secret is invalid, or the HMAC-SHA256 MAC algorithm cannot be instantiated.\nMainly the second sentence is an issue since it isn't an and between an invalid secret and instantiating the algorithm but an or.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#discussion_r363404194", "createdAt": "2020-01-06T17:48:18Z", "author": {"login": "alzimmermsft"}, "path": "sdk/appconfiguration/azure-data-appconfiguration/src/main/java/com/azure/data/appconfiguration/ConfigurationClientBuilder.java", "diffHunk": "@@ -239,25 +239,29 @@ public ConfigurationClientBuilder endpoint(String endpoint) {\n      * @param connectionString Connection string in the format \"endpoint={endpoint_value};id={id_value};\n      * secret={secret_value}\"\n      * @return The updated ConfigurationClientBuilder object.\n-     * @throws NullPointerException If {@code credential} is {@code null}.\n+     * @throws NullPointerException If {@code connectionString} is {@code null}.\n+     * @throws IllegalArgumentException if {@code connectionString} is an empty string. Or the secret is invalid and\n+     * cannot instantiate HMAC-SHA256 MAC algorithm.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34c113d4b9aa1d71467b9731b7f54194df711720"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ade8a07b911381cb09e1d21464662b54dd7be0d6", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ade8a07b911381cb09e1d21464662b54dd7be0d6", "committedDate": "2020-01-06T17:48:25Z", "message": "use isEmpty() instead"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NzkxNTI5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#pullrequestreview-338791529", "createdAt": "2020-01-06T17:49:14Z", "commit": {"oid": "34c113d4b9aa1d71467b9731b7f54194df711720"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzo0OToxNVrOFakdFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxNzo0OToxNVrOFakdFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzQwNDU2Nw==", "bodyText": "Should we add in that the secret contained within the connection string is invalid? Right now this is too vague and being thrown from a black box scenario for anyone consuming this SDK.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#discussion_r363404567", "createdAt": "2020-01-06T17:49:15Z", "author": {"login": "alzimmermsft"}, "path": "sdk/appconfiguration/azure-data-appconfiguration/src/main/java/com/azure/data/appconfiguration/ConfigurationClientBuilder.java", "diffHunk": "@@ -239,25 +239,29 @@ public ConfigurationClientBuilder endpoint(String endpoint) {\n      * @param connectionString Connection string in the format \"endpoint={endpoint_value};id={id_value};\n      * secret={secret_value}\"\n      * @return The updated ConfigurationClientBuilder object.\n-     * @throws NullPointerException If {@code credential} is {@code null}.\n+     * @throws NullPointerException If {@code connectionString} is {@code null}.\n+     * @throws IllegalArgumentException if {@code connectionString} is an empty string. Or the secret is invalid and\n+     * cannot instantiate HMAC-SHA256 MAC algorithm.\n      */\n     public ConfigurationClientBuilder connectionString(String connectionString) {\n-        Objects.requireNonNull(connectionString);\n+        Objects.requireNonNull(connectionString, \"'connectionString' cannot be null.\");\n+\n+        if (CoreUtils.isNullOrEmpty(connectionString)) {\n+            throw logger.logExceptionAsError(\n+                new IllegalArgumentException(\"'connectionString' cannot be an empty string.\"));\n+        }\n \n         try {\n             this.credential = new ConfigurationClientCredentials(connectionString);\n         } catch (InvalidKeyException err) {\n             throw logger.logExceptionAsError(new IllegalArgumentException(\n-                    \"The secret is invalid and cannot instantiate the HMAC-SHA256 algorithm.\", err));\n+                \"The secret is invalid and cannot instantiate the HMAC-SHA256 algorithm.\", err));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34c113d4b9aa1d71467b9731b7f54194df711720"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fef3833f61d0d525d98e1eb63addce110e15cb8d", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fef3833f61d0d525d98e1eb63addce110e15cb8d", "committedDate": "2020-01-06T17:55:50Z", "message": "wording"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Nzk4ODcy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#pullrequestreview-338798872", "createdAt": "2020-01-06T18:03:06Z", "commit": {"oid": "fef3833f61d0d525d98e1eb63addce110e15cb8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4ODM0MDQw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7121#pullrequestreview-338834040", "createdAt": "2020-01-06T19:08:57Z", "commit": {"oid": "fef3833f61d0d525d98e1eb63addce110e15cb8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 772, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}