{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNjc0MzMx", "number": 17910, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMTo0NTo1MVrOE_ag2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMDo0MzozM1rOE_31Og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0OTMwMTM3OnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatAsyncClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMTo0NTo1MVrOH9HD1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwMTo0NTo1MVrOH9HD1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg0MDg1NQ==", "bodyText": "chatClient (singular all the way) ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17910#discussion_r533840855", "createdAt": "2020-12-02T01:45:51Z", "author": {"login": "juancamilor"}, "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatAsyncClient.java", "diffHunk": "@@ -33,11 +36,13 @@\n     private final ClientLogger logger = new ClientLogger(ChatAsyncClient.class);\n \n     private final AzureCommunicationChatServiceImpl chatServiceClient;\n+    private final ChatsImpl chatsClient;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d922581c16f3d56a7a8e74ef0a469cc9fb65a8c9"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1Mzk1NTgwOnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-chat/README.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMzo0NDoyNVrOH9y4AA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMzo0NDoyNVrOH9y4AA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1ODcyMA==", "bodyText": "from creating a chat thread", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17910#discussion_r534558720", "createdAt": "2020-12-02T23:44:25Z", "author": {"login": "juancamilor"}, "path": "sdk/communication/azure-communication-chat/README.md", "diffHunk": "@@ -102,8 +102,9 @@ Use the `createChatThread` method to create a chat thread.\n - Use `topic` to give a thread topic;\n - Use `participants` to list the thread participants to be added to the thread;\n \n-`chatThreadClient` is the response returned from creating a thread. It can be used for performing operations on the created thread: add participants, send message, etc.\n-It contains a `chatThreadId` property which is the unique ID of the thread. The property is accessible by the public method getChatThreadId().\n+`CreateChatThreadResult` is the response returned from creating a thread. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d922581c16f3d56a7a8e74ef0a469cc9fb65a8c9"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1Mzk1ODM5OnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatAsyncClient.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMzo0NToyMVrOH9y5Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMzo0NToyMVrOH9y5Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1OTA2Mg==", "bodyText": ".ChatImpl", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17910#discussion_r534559062", "createdAt": "2020-12-02T23:45:21Z", "author": {"login": "juancamilor"}, "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatAsyncClient.java", "diffHunk": "@@ -2,15 +2,18 @@\n // Licensed under the MIT License.\n package com.azure.communication.chat;\n \n+import com.azure.communication.chat.implementation.converters.CreateChatThreadResultConverter;\n import reactor.core.publisher.Mono;\n \n+import com.azure.communication.chat.models.ChatThread;\n+import com.azure.communication.chat.models.ChatThreadInfo;\n+import com.azure.communication.chat.models.CreateChatThreadOptions;\n+import com.azure.communication.chat.models.CreateChatThreadResult;\n+import com.azure.communication.chat.models.ListChatThreadsOptions;\n import com.azure.communication.chat.implementation.converters.ChatThreadConverter;\n import com.azure.communication.chat.implementation.converters.CreateChatThreadOptionsConverter;\n import com.azure.communication.chat.implementation.AzureCommunicationChatServiceImpl;\n-import com.azure.communication.chat.models.CreateChatThreadOptions;\n-import com.azure.communication.chat.models.ListChatThreadsOptions;\n-import com.azure.communication.chat.models.ChatThread;\n-import com.azure.communication.chat.models.ChatThreadInfo;\n+import com.azure.communication.chat.implementation.ChatsImpl;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d922581c16f3d56a7a8e74ef0a469cc9fb65a8c9"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1Mzk2MDM0OnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatAsyncClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMzo0NjowM1rOH9y6ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMzo0NjowM1rOH9y6ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1OTMzMg==", "bodyText": "THREAD_RESOURCE_STATUS_TYPE  - Not needed anymore", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17910#discussion_r534559332", "createdAt": "2020-12-02T23:46:03Z", "author": {"login": "juancamilor"}, "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatAsyncClient.java", "diffHunk": "@@ -33,11 +36,13 @@\n     private final ClientLogger logger = new ClientLogger(ChatAsyncClient.class);\n \n     private final AzureCommunicationChatServiceImpl chatServiceClient;\n+    private final ChatsImpl chatsClient;\n \n     private static final String THREAD_RESOURCE_STATUS_TYPE = \"thread\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d922581c16f3d56a7a8e74ef0a469cc9fb65a8c9"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1Mzk2ODY4OnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatThreadAsyncClient.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMzo0OToyMlrOH9y_NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMzo0OToyMlrOH9y_NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU2MDU2NQ==", "bodyText": ".ChatThreadImpl", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17910#discussion_r534560565", "createdAt": "2020-12-02T23:49:22Z", "author": {"login": "juancamilor"}, "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatThreadAsyncClient.java", "diffHunk": "@@ -2,6 +2,7 @@\n // Licensed under the MIT License.\n package com.azure.communication.chat;\n \n+import com.azure.communication.chat.implementation.ChatThreadsImpl;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d922581c16f3d56a7a8e74ef0a469cc9fb65a8c9"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1Mzk3Mjg1OnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatThreadAsyncClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMzo1MDo1M1rOH9zBkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQyMzo1MDo1M1rOH9zBkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU2MTE2OA==", "bodyText": "threadClient => chatThreadClient\nIn general, Thread was considered too generic on the earlier reviews so we are following that convention across all sdks : prefix names with Chat when they refer to chat threads", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17910#discussion_r534561168", "createdAt": "2020-12-02T23:50:53Z", "author": {"login": "juancamilor"}, "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatThreadAsyncClient.java", "diffHunk": "@@ -50,11 +53,13 @@\n     private final ClientLogger logger = new ClientLogger(ChatThreadAsyncClient.class);\n \n     private final AzureCommunicationChatServiceImpl chatServiceClient;\n+    private final ChatThreadsImpl threadClient;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d922581c16f3d56a7a8e74ef0a469cc9fb65a8c9"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1NDA5NzEyOnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatThreadAsyncClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMDo0MDoxNlrOH90JLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMDo0MDoxNlrOH90JLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU3OTUwMA==", "bodyText": "Here (and everywhere we do listParticipantsOptions.get...) we should have a null check on listParticipantsOptions\nCheck out the other methods that had pagination already, they should have null checks before invoking the threadClient with options", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17910#discussion_r534579500", "createdAt": "2020-12-03T00:40:16Z", "author": {"login": "angiurgiu"}, "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatThreadAsyncClient.java", "diffHunk": "@@ -270,12 +275,28 @@ public String getChatThreadId() {\n      */\n     @ServiceMethod(returns = ReturnType.COLLECTION)\n     public PagedFlux<ChatParticipant> listParticipants() {\n+        ListParticipantsOptions listParticipantsOptions = new ListParticipantsOptions();\n+        return listParticipants(listParticipantsOptions);\n+    }\n+\n+    /**\n+     * Gets the participants of a thread.\n+     *\n+     * @param listParticipantsOptions The request options.\n+     * @return the participants of a thread.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public PagedFlux<ChatParticipant> listParticipants(ListParticipantsOptions listParticipantsOptions) {\n         try {\n             return pagedFluxConvert(new PagedFlux<>(\n                 () -> withContext(context ->\n-                    this.chatServiceClient.listChatParticipantsSinglePageAsync(chatThreadId, context)),\n+                    this.threadClient.listChatParticipantsSinglePageAsync(\n+                        chatThreadId,\n+                        listParticipantsOptions.getMaxPageSize(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d922581c16f3d56a7a8e74ef0a469cc9fb65a8c9"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1NDEwMDExOnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatThreadAsyncClient.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMDo0MTozMFrOH90LAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMDo0MTozMFrOH90LAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU3OTk3MQ==", "bodyText": "Same comment, take precautions against NullReferenceExceptions", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17910#discussion_r534579971", "createdAt": "2020-12-03T00:41:30Z", "author": {"login": "angiurgiu"}, "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/ChatThreadAsyncClient.java", "diffHunk": "@@ -697,11 +734,26 @@ public String getChatThreadId() {\n      */\n     @ServiceMethod(returns = ReturnType.COLLECTION)\n     public PagedFlux<ChatMessageReadReceipt> listReadReceipts() {\n+        ListReadReceiptOptions listReadReceiptOptions = new ListReadReceiptOptions();\n+        return listReadReceipts(listReadReceiptOptions);\n+    }\n+\n+    /**\n+     * Gets read receipts for a thread.\n+     *\n+     * @param listReadReceiptOptions The additional options for this operation.\n+     * @return read receipts for a thread.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public PagedFlux<ChatMessageReadReceipt> listReadReceipts(ListReadReceiptOptions listReadReceiptOptions) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d922581c16f3d56a7a8e74ef0a469cc9fb65a8c9"}, "originalPosition": 233}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1NDEwNDkwOnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/models/CreateChatThreadOptions.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMDo0MzozM1rOH90N7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMDo0MzozM1rOH90N7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU4MDcxOQ==", "bodyText": "Id instead of ID", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17910#discussion_r534580719", "createdAt": "2020-12-03T00:43:33Z", "author": {"login": "angiurgiu"}, "path": "sdk/communication/azure-communication-chat/src/main/java/com/azure/communication/chat/models/CreateChatThreadOptions.java", "diffHunk": "@@ -22,6 +22,8 @@\n     @JsonProperty(value = \"participants\", required = true)\n     private List<ChatParticipant> participants;\n \n+    private String repeatabilityRequestID;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d922581c16f3d56a7a8e74ef0a469cc9fb65a8c9"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2760, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}