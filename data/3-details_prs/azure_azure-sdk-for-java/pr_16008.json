{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4ODM4NjY1", "number": 16008, "title": "Only check the touched markdown files in PR for the Verify link step", "bodyText": "Triggered from PR based on master:\nhttps://dev.azure.com/azure-sdk/public/_build/results?buildId=576322&view=logs&jobId=b70e5e73-bbb6-5567-0939-8415943fadb9&j=b70e5e73-bbb6-5567-0939-8415943fadb9&t=bdeefc16-b669-5ebd-ad94-a2c19ade53b0\nTriggered from PR based on feature:\nhttps://dev.azure.com/azure-sdk/internal/_build/results?buildId=576321&view=logs&jobId=b70e5e73-bbb6-5567-0939-8415943fadb9&j=b70e5e73-bbb6-5567-0939-8415943fadb9&t=bdeefc16-b669-5ebd-ad94-a2c19ade53b0\nTriggered from ci/manual build:\nhttps://dev.azure.com/azure-sdk/internal/_build/results?buildId=576324&view=logs&s=6884a131-87da-5381-61f3-d7acc3b91d76&j=b70e5e73-bbb6-5567-0939-8415943fadb9\nChanges in all repos:\nJava: #16008\n.NET: Azure/azure-sdk-for-net#15929\nPython: Azure/azure-sdk-for-python#14466\nJS: Azure/azure-sdk-for-js#11803\nAndroid: Azure/azure-sdk-for-android#405\nC: Azure/azure-sdk-for-c#1431\nCPP: Azure/azure-sdk-for-cpp#787\nGo: Azure/azure-sdk-for-go#12809\nIOS: Azure/azure-sdk-for-ios#488", "createdAt": "2020-10-06T21:13:17Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008", "merged": true, "mergeCommit": {"oid": "c9bc7959dabd3de71da328cf9158049bd3d5d117"}, "closed": true, "closedAt": "2020-10-16T18:13:52Z", "author": {"login": "sima-zhu"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP_mY7gBqjM4NDc3MDg1NzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTJ6hmAH2gAyNDk4ODM4NjY1Ojg5ODQ3MDFlNGQ2MGY5ZGU0MTI3NDY0NmFkODkxMmY1MzE3NDM2Nzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c56ea0df7d9f298e4755d0cbe25bc7c20d892576", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c56ea0df7d9f298e4755d0cbe25bc7c20d892576", "committedDate": "2020-10-06T21:44:35Z", "message": "var"}, "afterCommit": {"oid": "5ff2903cbdf303a11c63559341e4eb393449d87b", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5ff2903cbdf303a11c63559341e4eb393449d87b", "committedDate": "2020-10-06T21:51:42Z", "message": "this is diff check"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ff2903cbdf303a11c63559341e4eb393449d87b", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5ff2903cbdf303a11c63559341e4eb393449d87b", "committedDate": "2020-10-06T21:51:42Z", "message": "this is diff check"}, "afterCommit": {"oid": "141f10b452fbc6a1aa3e77076eb02f752747edb8", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/141f10b452fbc6a1aa3e77076eb02f752747edb8", "committedDate": "2020-10-06T22:06:59Z", "message": "diff on check"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4455fe82f2ed7a318c40102745cd60dc4964a5f7", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4455fe82f2ed7a318c40102745cd60dc4964a5f7", "committedDate": "2020-10-06T23:20:05Z", "message": "print out"}, "afterCommit": {"oid": "d35b6bb39cbdaf4456dc925957b887aebd193bc7", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d35b6bb39cbdaf4456dc925957b887aebd193bc7", "committedDate": "2020-10-06T23:27:40Z", "message": "Check links on diff"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MjA5MTY1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#pullrequestreview-505209165", "createdAt": "2020-10-08T22:27:53Z", "commit": {"oid": "d35b6bb39cbdaf4456dc925957b887aebd193bc7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjoyNzo1M1rOHeyhSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjoyNzo1M1rOHeyhSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjA0NzA1MQ==", "bodyText": "Why not just put this inline like:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      Urls: $(diffMarkdown)\n          \n          \n            \n                      Urls: (git diff origin/master HEAD --name-only -- *.md)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r502047051", "createdAt": "2020-10-08T22:27:53Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -162,9 +162,15 @@ jobs:\n           ward scan -d $(Build.SourcesDirectory) -c $(Build.SourcesDirectory)/eng/.docsettings.yml\n         displayName: 'Verify Readmes'\n \n+      - pwsh: |\n+            $diffs = git diff origin/master HEAD --name-only -- *.md\n+            echo \"##vso[task.setvariable variable=diffMarkdown]$diffs\"\n+        displayName: 'Find diff files'\n+\n       - template: ../../../common/pipelines/templates/steps/verify-links.yml\n         parameters:\n           Directory: sdk/${{ parameters.ServiceDirectory }}\n+          Urls: $(diffMarkdown)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d35b6bb39cbdaf4456dc925957b887aebd193bc7"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MjEwODAx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#pullrequestreview-505210801", "createdAt": "2020-10-08T22:31:24Z", "commit": {"oid": "d35b6bb39cbdaf4456dc925957b887aebd193bc7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjozMToyNFrOHeymXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjozMToyNFrOHeymXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjA0ODM0OQ==", "bodyText": "Your diff command will find all files in the PR not just files under the service directory so we may need to figure out what Directory we want to pass here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r502048349", "createdAt": "2020-10-08T22:31:24Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -162,9 +162,15 @@ jobs:\n           ward scan -d $(Build.SourcesDirectory) -c $(Build.SourcesDirectory)/eng/.docsettings.yml\n         displayName: 'Verify Readmes'\n \n+      - pwsh: |\n+            $diffs = git diff origin/master HEAD --name-only -- *.md\n+            echo \"##vso[task.setvariable variable=diffMarkdown]$diffs\"\n+        displayName: 'Find diff files'\n+\n       - template: ../../../common/pipelines/templates/steps/verify-links.yml\n         parameters:\n           Directory: sdk/${{ parameters.ServiceDirectory }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d35b6bb39cbdaf4456dc925957b887aebd193bc7"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a17d53dd7f6df9d7a67647286d6391134ee1d7a2", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a17d53dd7f6df9d7a67647286d6391134ee1d7a2", "committedDate": "2020-10-13T17:32:19Z", "message": "More printing"}, "afterCommit": {"oid": "a980dead12bf61bd62096b0400f30c0ba38d6fcb", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a980dead12bf61bd62096b0400f30c0ba38d6fcb", "committedDate": "2020-10-13T17:45:29Z", "message": "check links on diff"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3ODYwNDk0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#pullrequestreview-507860494", "createdAt": "2020-10-13T22:02:55Z", "commit": {"oid": "d14a83978a7c85795c46c0009c356b0925a9bde8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMjowMjo1NVrOHg7FBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMjowMjo1NVrOHg7FBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI4NDQyMQ==", "bodyText": "Is this the correct diff? What if this pipeline runs against a feature branch? This will produce a potentially large diff with a lot of files. I think we are going to need to figure out the correct set files to diff for pull requests as well as the correct set of changes if running outside of a pull request (i.e. manual, CI, scheduled)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r504284421", "createdAt": "2020-10-13T22:02:55Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -164,7 +164,8 @@ jobs:\n \n       - template: ../../../common/pipelines/templates/steps/verify-links.yml\n         parameters:\n-          Directory: sdk/${{ parameters.ServiceDirectory }}\n+          Directory: ''\n+          Urls: (git diff origin/master HEAD --name-only -- *.md)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d14a83978a7c85795c46c0009c356b0925a9bde8"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c58e5f22b3d1ee1509ac57de3f789405a462f902", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c58e5f22b3d1ee1509ac57de3f789405a462f902", "committedDate": "2020-10-14T17:23:53Z", "message": "include testing branches"}, "afterCommit": {"oid": "a5a7bb42082931865bd71f2f8d18f18fa8c065e6", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a5a7bb42082931865bd71f2f8d18f18fa8c065e6", "committedDate": "2020-10-14T16:25:56Z", "message": "add origin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4OTA4ODU2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#pullrequestreview-508908856", "createdAt": "2020-10-15T03:18:37Z", "commit": {"oid": "5a0e36afc461c6fc4c3d9a060686f3129e0e635b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwMzoxODozN1rOHhvUiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwMzoxODozN1rOHhvUiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTE0MDM2MA==", "bodyText": "We should figure out how to condition this step to only run for pull requests.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r505140360", "createdAt": "2020-10-15T03:18:37Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -164,7 +164,8 @@ jobs:\n \n       - template: ../../../common/pipelines/templates/steps/verify-links.yml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a0e36afc461c6fc4c3d9a060686f3129e0e635b"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NzI5MzE3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#pullrequestreview-509729317", "createdAt": "2020-10-15T19:54:25Z", "commit": {"oid": "101289ae40d194b20ac58038391723ff7ecbf71e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65e434cdb3972411c26db2a2fa894168eaa10a9a", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/65e434cdb3972411c26db2a2fa894168eaa10a9a", "committedDate": "2020-10-16T00:57:16Z", "message": "Check only diff fiels"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59c2b0ef871de36f7fd123513c49b7915af8cb2d", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/59c2b0ef871de36f7fd123513c49b7915af8cb2d", "committedDate": "2020-10-16T00:40:01Z", "message": "add print message"}, "afterCommit": {"oid": "65e434cdb3972411c26db2a2fa894168eaa10a9a", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/65e434cdb3972411c26db2a2fa894168eaa10a9a", "committedDate": "2020-10-16T00:57:16Z", "message": "Check only diff fiels"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de034cc2fa3cbab57e746c35c7b45eb78a5ba386", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/de034cc2fa3cbab57e746c35c7b45eb78a5ba386", "committedDate": "2020-10-16T00:58:17Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into checkLinkOnDiff"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNjM2NTAw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#pullrequestreview-510636500", "createdAt": "2020-10-16T16:44:37Z", "commit": {"oid": "c37dbf75c4b6ff4329765b4cdfcbc5baf80c0287"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNjo0NDozN1rOHjIK_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNjo0NDozN1rOHjIK_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU5NjA5NQ==", "bodyText": "I assume this is just for testing?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r506596095", "createdAt": "2020-10-16T16:44:37Z", "author": {"login": "weshaggard"}, "path": "eng/common/scripts/Verify-Links.ps1", "diffHunk": "@@ -262,7 +262,13 @@ function GetLinks([System.Uri]$pageUri)\n \n   return $links;\n }\n+Write-Host \"There are $($urls.length) files.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c37dbf75c4b6ff4329765b4cdfcbc5baf80c0287"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebd1b859471cf6f976cd660d9861e8a8cfc6d544", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ebd1b859471cf6f976cd660d9861e8a8cfc6d544", "committedDate": "2020-10-16T17:31:52Z", "message": "Test on readme, and works fine"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e4ff9110691cebb67e91fb4a912326ed6f581ec", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6e4ff9110691cebb67e91fb4a912326ed6f581ec", "committedDate": "2020-10-16T17:21:47Z", "message": "Use the quote around wildcard"}, "afterCommit": {"oid": "ebd1b859471cf6f976cd660d9861e8a8cfc6d544", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ebd1b859471cf6f976cd660d9861e8a8cfc6d544", "committedDate": "2020-10-16T17:31:52Z", "message": "Test on readme, and works fine"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c48b8683edb040d55ddcb6a12c5213f4f257b93", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6c48b8683edb040d55ddcb6a12c5213f4f257b93", "committedDate": "2020-10-16T17:33:53Z", "message": "remove testing changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8984701e4d60f9de41274646ad8912f531743679", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8984701e4d60f9de41274646ad8912f531743679", "committedDate": "2020-10-16T17:34:52Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into checkLinkOnDiff"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2152, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}