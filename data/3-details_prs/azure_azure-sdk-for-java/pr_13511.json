{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2ODY5Mzcx", "number": 13511, "title": "Artifact grouping take 2", "bodyText": "This PR changes the layout of the files in the artifact directory from the default structure of a Maven repo to the following structure:\n<root>/<groupId>/<artifactId>\nFor example:\n<root>/com.azure/azure-sdk-template\nThis is to remove the need for downstream consumers of the artifacts to use wildcards to discover artifact locations which is potentially error prone. As a consequence I've removed the stage-artifacts.yml template from the repository, and anywhere it was used instead use a combination of ${{artifact.groupId}}/${{artifact.name}} to locate the artifact instances (within an ${{ each ... }}: section).\nAdditionally I've moved common logic that was previously in Publish-MavenPackages.ps1 into a PowerShell module in eng/scripts/MavenPackaging. This logic is then used by Publish-MavenPackages.ps1 and a new script Stage-MavenPackageArtifacts.ps1.", "createdAt": "2020-07-27T03:05:46Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511", "merged": true, "mergeCommit": {"oid": "4a94616466a1364790c1c5c35950f7e1c3eeb1fb"}, "closed": true, "closedAt": "2020-07-29T03:07:49Z", "author": {"login": "mitchdenny"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5CXL3AFqTQ1NTgxMDQ0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5iJgJgH2gAyNDU2ODY5MzcxOjBmNjU3M2YxMDU1MmMxZTA4MjQ3MzRmYTU4MTBlMTE4MDQ1Zjc1ODg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1ODEwNDQw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#pullrequestreview-455810440", "createdAt": "2020-07-27T14:02:10Z", "commit": {"oid": "b353ffd05ad5eb7c9db3168c109b79c360a1b56d"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNDowMjoxMFrOG3j26g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNDowNDoyMVrOG3j8uQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkxMjM2Mg==", "bodyText": "@mitchdenny shouldn't the artifact location be $(Pipeline.Workspace)/${{parameters.ArtifactName}}-signed/${{artifact.groupId}}/${{artifact.name}} like it is in eng/pipelines/templates/stages/archetype-java-release.yml?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r460912362", "createdAt": "2020-07-27T14:02:10Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/stages/archetype-java-release-pom-only.yml", "diffHunk": "@@ -66,14 +66,9 @@ stages:\n                 deploy:\n                   steps:\n                     - checkout: self\n-                    - template: /eng/pipelines/templates/steps/stage-artifacts.yml\n-                      parameters:\n-                        SourceFolder: ${{parameters.ArtifactName}}-signed\n-                        TargetFolder: ${{artifact.safeName}}\n-                        PackageName: ${{artifact.name}}\n                     - template: /eng/common/pipelines/templates/steps/create-tags-and-git-release.yml\n                       parameters:\n-                        ArtifactLocation: $(Pipeline.Workspace)/${{artifact.safeName}}\n+                        ArtifactLocation: ${{parameters.ArtifactName}}-signed/${{artifact.groupId}}/${{artifact.name}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b353ffd05ad5eb7c9db3168c109b79c360a1b56d"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkxMzg0OQ==", "bodyText": "Shouldn't this also be $(Pipeline.Workspace)/${{parameters.ArtifactName}}-signed/${{artifact.groupId}}/${{artifact.name}}?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r460913849", "createdAt": "2020-07-27T14:04:21Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/stages/archetype-java-release.yml", "diffHunk": "@@ -165,14 +160,9 @@ stages:\n                   deploy:\n                     steps:\n                       - checkout: self\n-                      - template: /eng/pipelines/templates/steps/stage-artifacts.yml\n-                        parameters:\n-                          SourceFolder: ${{parameters.ArtifactName}}-signed\n-                          TargetFolder: ${{artifact.safeName}}\n-                          PackageName: ${{artifact.name}}\n                       - template: /eng/common/pipelines/templates/steps/docs-metadata-release.yml\n                         parameters:\n-                          ArtifactLocation: $(Pipeline.Workspace)/${{artifact.safeName}}\n+                          ArtifactLocation: ${{parameters.ArtifactName}}-signed/${{artifact.groupId}}/${{artifact.name}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b353ffd05ad5eb7c9db3168c109b79c360a1b56d"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1ODE0MTk1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#pullrequestreview-455814195", "createdAt": "2020-07-27T14:06:04Z", "commit": {"oid": "b353ffd05ad5eb7c9db3168c109b79c360a1b56d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MjE5NDA0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#pullrequestreview-456219404", "createdAt": "2020-07-28T00:16:56Z", "commit": {"oid": "b353ffd05ad5eb7c9db3168c109b79c360a1b56d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMDoxNjo1NlrOG34DRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwMDoxNjo1NlrOG34DRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI0MzIwNQ==", "bodyText": "Unless there is a good reason for this to be a PS module I'd suggest just having it be a helper script that we dot source into places that need it. PS modules end up causing more trouble then they are worth in a lot of our usages as such @chidozieononiwu is actually starting to move us away from them.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r461243205", "createdAt": "2020-07-28T00:16:56Z", "author": {"login": "weshaggard"}, "path": "eng/scripts/MavenPackaging/MavenPackaging.psd1", "diffHunk": "@@ -0,0 +1,18 @@\n+@{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b353ffd05ad5eb7c9db3168c109b79c360a1b56d"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MjE5OTAx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#pullrequestreview-456219901", "createdAt": "2020-07-28T00:18:32Z", "commit": {"oid": "b353ffd05ad5eb7c9db3168c109b79c360a1b56d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2Njk0ODE3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#pullrequestreview-456694817", "createdAt": "2020-07-28T14:31:34Z", "commit": {"oid": "e69c405d6603200d447a1e434c542f45c405729e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MDExNzA3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#pullrequestreview-457011707", "createdAt": "2020-07-28T21:04:42Z", "commit": {"oid": "e69c405d6603200d447a1e434c542f45c405729e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e62ff76ad7982edff6123c9a4084d01e54bf40cc", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e62ff76ad7982edff6123c9a4084d01e54bf40cc", "committedDate": "2020-07-29T00:31:53Z", "message": "Artifact grouping - take 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9279aa0f9c6d69e10e77d73d2d74a2e7ce704b7", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e9279aa0f9c6d69e10e77d73d2d74a2e7ce704b7", "committedDate": "2020-07-29T00:31:54Z", "message": "Use new script."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5066cd0f55e047b771bff79176101b7b3345919", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a5066cd0f55e047b771bff79176101b7b3345919", "committedDate": "2020-07-29T00:31:54Z", "message": "Try to get PS module loading."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5600ba15bd617f347662e951c3d0549aa0d7f20", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a5600ba15bd617f347662e951c3d0549aa0d7f20", "committedDate": "2020-07-29T00:31:54Z", "message": "Correct build output directory."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2d979c8f7bf996148b2cdf2f9e4f026c0db072b", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a2d979c8f7bf996148b2cdf2f9e4f026c0db072b", "committedDate": "2020-07-29T00:31:55Z", "message": "Remove usages of stage-artifacts.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "761769248fed10099e5234b2d54796fada596f34", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/761769248fed10099e5234b2d54796fada596f34", "committedDate": "2020-07-29T00:31:55Z", "message": "One more."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46432e9d8ca58d3e51451ab40afa3fae8b2dd666", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/46432e9d8ca58d3e51451ab40afa3fae8b2dd666", "committedDate": "2020-07-29T00:31:55Z", "message": "Remove staging template entirely."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8bb279e4e3b79dc9720cf866be67d2fc5a73a88", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e8bb279e4e3b79dc9720cf866be67d2fc5a73a88", "committedDate": "2020-07-29T00:31:55Z", "message": "Tweak artifact locations."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63abe1e3cc8330919c66b57126e23d29702a31aa", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/63abe1e3cc8330919c66b57126e23d29702a31aa", "committedDate": "2020-07-29T00:31:56Z", "message": "Switch back to dot sourcing."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "110d8898794d785b3f790bc71b81347c0bc552c3", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/110d8898794d785b3f790bc71b81347c0bc552c3", "committedDate": "2020-07-29T00:31:56Z", "message": "Fix changelog error."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3cc1cd95354fa5b37a39e1b4778d2e253d1ae1e", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a3cc1cd95354fa5b37a39e1b4778d2e253d1ae1e", "committedDate": "2020-07-28T23:22:18Z", "message": "Fix changelog error."}, "afterCommit": {"oid": "110d8898794d785b3f790bc71b81347c0bc552c3", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/110d8898794d785b3f790bc71b81347c0bc552c3", "committedDate": "2020-07-29T00:31:56Z", "message": "Fix changelog error."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55a3c2814e48f5bb551013242607d4687fae4766", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/55a3c2814e48f5bb551013242607d4687fae4766", "committedDate": "2020-07-29T01:01:01Z", "message": "Fix stage only parameter."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f4b631fc8c1108c9d1ed17478f63ba4fc53dd16", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2f4b631fc8c1108c9d1ed17478f63ba4fc53dd16", "committedDate": "2020-07-29T01:03:32Z", "message": "Bump template version."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69cd7988e10a6e4f61ccd2540caacd8b5ec9325d", "author": {"user": {"login": "azure-sdk", "name": "Azure SDK Bot"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/69cd7988e10a6e4f61ccd2540caacd8b5ec9325d", "committedDate": "2020-07-29T02:29:45Z", "message": "Increment package version after release of com.azure azure-sdk-template (#13588)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5282ad473d670336c84866aab9c506151d6162ec", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5282ad473d670336c84866aab9c506151d6162ec", "committedDate": "2020-07-29T02:33:47Z", "message": "Update version to 1.1.0."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7ad03056fb49d717c5dbabfa9315833f1f608c1", "author": {"user": {"login": "mitchdenny", "name": "Mitch Denny"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a7ad03056fb49d717c5dbabfa9315833f1f608c1", "committedDate": "2020-07-29T02:38:24Z", "message": "Merge branch 'feature/artifact-grouping-take-2' of https://github.com/azure/azure-sdk-for-java into feature/artifact-grouping-take-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f6573f10552c1e0824734fa5810e118045f7588", "author": {"user": {"login": "azure-sdk", "name": "Azure SDK Bot"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0f6573f10552c1e0824734fa5810e118045f7588", "committedDate": "2020-07-29T03:06:55Z", "message": "Increment package version after release of com.azure azure-sdk-template (#13589)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1143, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}