{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2Nzc4OTEx", "number": 8273, "title": "Make facet object strongly typed", "bodyText": "Make RangeFacetResult and ValueFacetResult generic type.", "createdAt": "2020-02-18T18:51:37Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8273", "merged": true, "mergeCommit": {"oid": "d888e8aa057d9675e357fde0dff2e68654b9fc0d"}, "closed": true, "closedAt": "2020-03-13T20:07:17Z", "author": {"login": "sima-zhu"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFm17aAH2gAyMzc2Nzc4OTExOmI2ZDhjNjNhYjJjNDRmYWRjNGQ5MjdmYTM1ZTQ2OGFmNmMzZmZiNTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNGUc6AFqTM3NDAwMDYwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b6d8c63ab2c44fadc4d927fa35e468af6c3ffb52", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b6d8c63ab2c44fadc4d927fa35e468af6c3ffb52", "committedDate": "2020-02-18T19:11:00Z", "message": "Remove live tests changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "043913ca88ff737792542b0c9d396bb1ff42e924", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/043913ca88ff737792542b0c9d396bb1ff42e924", "committedDate": "2020-02-18T18:52:49Z", "message": "Remove constructor"}, "afterCommit": {"oid": "b6d8c63ab2c44fadc4d927fa35e468af6c3ffb52", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b6d8c63ab2c44fadc4d927fa35e468af6c3ffb52", "committedDate": "2020-02-18T19:11:00Z", "message": "Remove live tests changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f21245ab4e05605dcee19669f39cea8aec048e9c", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f21245ab4e05605dcee19669f39cea8aec048e9c", "committedDate": "2020-02-18T19:42:10Z", "message": "Cast to double"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65386598faeff6c4c7aa0a103acd8a0fe42d86a3", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/65386598faeff6c4c7aa0a103acd8a0fe42d86a3", "committedDate": "2020-02-18T20:27:56Z", "message": "Remove illegal access parameter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMzUwOTUz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8273#pullrequestreview-361350953", "createdAt": "2020-02-19T18:55:21Z", "commit": {"oid": "65386598faeff6c4c7aa0a103acd8a0fe42d86a3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxODo1NToyMVrOFrzhPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxODo1Nzo1OVrOFrzmzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3NzE4MA==", "bodyText": "The accessor methods getFrom and getTo should return type T as well.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8273#discussion_r381477180", "createdAt": "2020-02-19T18:55:21Z", "author": {"login": "brjohnstmsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/models/RangeFacetResult.java", "diffHunk": "@@ -10,20 +10,22 @@\n  * with a field value falling within a particular range.\n  */\n @Immutable\n-public class RangeFacetResult {\n+public class RangeFacetResult<T> {\n     private final Long count;\n-    private final Object from;\n-    private final Object to;\n+    private final T from;\n+    private final T to;\n \n     /**\n-     * Constructor\n+     * Constructor of RangeFacetResult.\n      *\n-     * @param facetResult facet result object\n+     * @param count The count of the result.\n+     * @param from Value indicates the lower bound of facet's range\n+     * @param to Value indicates the upper bound of facet's range\n      */\n-    public RangeFacetResult(FacetResult facetResult) {\n-        count = facetResult.getCount();\n-        from = facetResult.getDocument().get(\"from\");\n-        to = facetResult.getDocument().get(\"to\");\n+    public RangeFacetResult(Long count, T from, T to) {\n+        this.count = count;\n+        this.from = from;\n+        this.to = to;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65386598faeff6c4c7aa0a103acd8a0fe42d86a3"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3NzYzMg==", "bodyText": "The accessor method getValue should return type T as well.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8273#discussion_r381477632", "createdAt": "2020-02-19T18:56:12Z", "author": {"login": "brjohnstmsft"}, "path": "sdk/search/azure-search/src/main/java/com/azure/search/models/ValueFacetResult.java", "diffHunk": "@@ -11,27 +11,17 @@\n  * falling within a particular interval or having a specific value.\n  */\n @Immutable\n-public class ValueFacetResult {\n+public class ValueFacetResult<T> {\n     private final Long count;\n-    private final Object value;\n+    private final T value;\n \n     /**\n      * Constructor\n      *\n-     * @param facetResult facet result object\n+     * @param count The approximate count of documents.\n+     * @param value The value of the facet.\n      */\n-    public ValueFacetResult(FacetResult facetResult) {\n-        this.count = facetResult.getCount();\n-        this.value = facetResult.getDocument().get(\"value\");\n-    }\n-\n-    /**\n-     * Constructor\n-     *\n-     * @param count count\n-     * @param value value\n-     */\n-    public ValueFacetResult(Long count, Object value) {\n+    public ValueFacetResult(Long count, T value) {\n         this.count = count;\n         this.value = value;\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65386598faeff6c4c7aa0a103acd8a0fe42d86a3"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3ODYwNA==", "bodyText": "The logic to create RangeFacetResult and ValueFacetResult from a FacetResult should be part of the SDK, not just the tests. Every customer that uses facets will need to do this, so we might as well make it easy.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8273#discussion_r381478604", "createdAt": "2020-02-19T18:57:59Z", "author": {"login": "brjohnstmsft"}, "path": "sdk/search/azure-search/src/test/java/com/azure/search/SearchTestBase.java", "diffHunk": "@@ -121,17 +124,21 @@ void assertRangeFacets(List<RangeFacetResult> baseRateFacets, List<RangeFacetRes\n         Assert.assertEquals(2, lastRenovationDateFacets.get(1).getCount().intValue());\n     }\n \n-    List<RangeFacetResult> getRangeFacetsForField(\n+    @SuppressWarnings(\"unchecked\")\n+    <T> List<RangeFacetResult<T>> getRangeFacetsForField(\n         Map<String, List<FacetResult>> facets, String expectedField, int expectedCount) {\n         List<FacetResult> facetCollection = getFacetsForField(facets, expectedField, expectedCount);\n-        return facetCollection.stream().map(RangeFacetResult::new)\n+        return facetCollection.stream().map(facetResult -> new RangeFacetResult<T>(facetResult.getCount(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65386598faeff6c4c7aa0a103acd8a0fe42d86a3"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cb6d85e6449136b977fe529b44ff4459f352b38", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5cb6d85e6449136b977fe529b44ff4459f352b38", "committedDate": "2020-02-20T17:52:09Z", "message": "Make changes on get API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fdb78a79560879d8cacc64f8e8cf13e66442ec7", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8fdb78a79560879d8cacc64f8e8cf13e66442ec7", "committedDate": "2020-03-12T19:06:33Z", "message": "Added the constructor back and change the core version."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "569f0d53be4ea478d5e2616c5a0b43f452314578", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/569f0d53be4ea478d5e2616c5a0b43f452314578", "committedDate": "2020-03-12T19:07:39Z", "message": "Merge from master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b948fefdc9551448572a8df7d39772f022ac4ec", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7b948fefdc9551448572a8df7d39772f022ac4ec", "committedDate": "2020-03-12T19:37:04Z", "message": "Fixed compilation issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc514d8ed24380404038fd7eeaf97e85bff1ec34", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cc514d8ed24380404038fd7eeaf97e85bff1ec34", "committedDate": "2020-03-04T21:29:32Z", "message": "Merge branch 'master' into strongly_typed"}, "afterCommit": {"oid": "7b948fefdc9551448572a8df7d39772f022ac4ec", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7b948fefdc9551448572a8df7d39772f022ac4ec", "committedDate": "2020-03-12T19:37:04Z", "message": "Fixed compilation issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6b23f2ffc409335ff751cd0cad41714c6d147d8", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b6b23f2ffc409335ff751cd0cad41714c6d147d8", "committedDate": "2020-03-12T19:40:31Z", "message": "Remove Assert imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1ec46c3a154fe8c799d4a5eeecc6eff93a74591", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f1ec46c3a154fe8c799d4a5eeecc6eff93a74591", "committedDate": "2020-03-12T19:41:42Z", "message": "Remove impoorts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MDAwNjA5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8273#pullrequestreview-374000609", "createdAt": "2020-03-13T01:48:52Z", "commit": {"oid": "f1ec46c3a154fe8c799d4a5eeecc6eff93a74591"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2337, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}