{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyMjY3OTIx", "number": 14916, "title": "Added support to pass application id to user agent string", "bodyText": "Resolves #14729", "createdAt": "2020-09-08T20:06:19Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14916", "merged": true, "mergeCommit": {"oid": "f2f204b637d56ec4301875ead08bc27238227fce"}, "closed": true, "closedAt": "2020-09-15T22:19:29Z", "author": {"login": "gapra-msft"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdG9TFTAH2gAyNDgyMjY3OTIxOjNiODNkNTdhMGZlZWNiN2M1MzE5NTJjZDQyOGFiMGRmYWMzM2NmOWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJMJ-zgH2gAyNDgyMjY3OTIxOjk0ZGNkMjk3Y2NlMGJlMTVkZjRiMThhMjFkYjA5NWFiNmE1NTFiMmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3b83d57a0feecb7c531952cd428ab0dfac33cf9e", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3b83d57a0feecb7c531952cd428ab0dfac33cf9e", "committedDate": "2020-09-08T20:05:50Z", "message": "Added support to pass application id to user agent string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NDY1MTU4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14916#pullrequestreview-484465158", "createdAt": "2020-09-08T20:20:48Z", "commit": {"oid": "3b83d57a0feecb7c531952cd428ab0dfac33cf9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMDoyMDo0OVrOHOsq-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMDoyMDo0OVrOHOsq-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE3NDAxMQ==", "bodyText": "Any possibility that logOptions is null?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14916#discussion_r485174011", "createdAt": "2020-09-08T20:20:49Z", "author": {"login": "alzimmermsft"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/implementation/util/BuilderHelper.java", "diffHunk": "@@ -165,14 +165,15 @@ public static void httpsValidation(Object objectToCheck, String objectName, Stri\n      * Creates a {@link UserAgentPolicy} using the default blob module name and version.\n      *\n      * @param configuration Configuration store used to determine whether telemetry information should be included.\n+     * @param logOptions Logging options to set in the logging policy.\n      * @return The default {@link UserAgentPolicy} for the module.\n      */\n-    private static UserAgentPolicy getUserAgentPolicy(Configuration configuration) {\n+    private static UserAgentPolicy getUserAgentPolicy(Configuration configuration, HttpLogOptions logOptions) {\n         configuration = (configuration == null) ? Configuration.NONE : configuration;\n \n         String clientName = PROPERTIES.getOrDefault(SDK_NAME, \"UnknownName\");\n         String clientVersion = PROPERTIES.getOrDefault(SDK_VERSION, \"UnknownVersion\");\n-        return new UserAgentPolicy(getDefaultHttpLogOptions().getApplicationId(), clientName, clientVersion,\n+        return new UserAgentPolicy(logOptions.getApplicationId(), clientName, clientVersion,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b83d57a0feecb7c531952cd428ab0dfac33cf9e"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NDY1NjIz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14916#pullrequestreview-484465623", "createdAt": "2020-09-08T20:21:30Z", "commit": {"oid": "3b83d57a0feecb7c531952cd428ab0dfac33cf9e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MDg2NDQ2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14916#pullrequestreview-487086446", "createdAt": "2020-09-11T19:57:03Z", "commit": {"oid": "3b83d57a0feecb7c531952cd428ab0dfac33cf9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxOTo1NzowM1rOHQsCcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxOTo1NzowM1rOHQsCcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzI2MDc4NA==", "bodyText": "We have discussed more about this in last 2 weeks with @JonathanGiles  and wanted more generic and common approach to provide applicationId. I would suggest not to implement this in HttpLogOptions because we are going to deprecate this.\nHere is Epic related to this issue #15107\nWe will be releasing com.azure.core.util.ClientOptions in master branch just after September release. Here is the PR for it  https://github.com/Azure/azure-sdk-for-java/pull/13697/files#diff-860f082a6593b9a09fa1a4d4fd0b5cf7R105\nI understand that we are changing this mid-way of this PR but want to make sure we are future proof.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14916#discussion_r487260784", "createdAt": "2020-09-11T19:57:03Z", "author": {"login": "hemanttanwar"}, "path": "sdk/storage/azure-storage-blob-cryptography/src/test/java/com/azure/storage/blob/specialized/cryptography/EncryptedBlobClientBuilderTest.groovy", "diffHunk": "@@ -56,6 +57,31 @@ class EncryptedBlobClientBuilderTest extends Specification {\n             .verifyComplete()\n     }\n \n+    /**\n+     * Tests that a user application id will be honored in the UA string when using the encrypted blob client builder's default\n+     * pipeline.\n+     */\n+    def \"Encrypted blob client custom application id in UA string\"() {\n+        when:\n+        def randomData = new byte[256]\n+        new SecureRandom().nextBytes(randomData)\n+\n+        def encryptedBlobClient = new EncryptedBlobClientBuilder()\n+            .endpoint(endpoint)\n+            .containerName(\"container\")\n+            .blobName(\"blob\")\n+            .credential(credentials)\n+            .key(new FakeKey(\"keyId\", randomData), \"keyWrapAlgorithm\")\n+            .httpClient(new ApplicationIdUAStringTestClient())\n+            .httpLogOptions(new HttpLogOptions().setApplicationId(\"custom-id\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b83d57a0feecb7c531952cd428ab0dfac33cf9e"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTQ5Mjgx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14916#pullrequestreview-488949281", "createdAt": "2020-09-15T18:23:27Z", "commit": {"oid": "3b83d57a0feecb7c531952cd428ab0dfac33cf9e"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94dcd297cce0be15df4b18a21db095ab6a551b2a", "author": {"user": {"login": "gapra-msft", "name": "Gauri Prasad"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/94dcd297cce0be15df4b18a21db095ab6a551b2a", "committedDate": "2020-09-15T18:32:19Z", "message": "Merge branch 'master' into storage/applicationId"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3680, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}