{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMTc1NDE2", "number": 9275, "title": "Azure-Cosmos version management HttpConstants", "bodyText": "Removed hard coded version from HttpConstants\nAdded azure-cosmos.properties file\nAdded unit tests to verify current version", "createdAt": "2020-03-19T18:45:47Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9275", "merged": true, "mergeCommit": {"oid": "076e387aa10dedd9596d84de6e6d3529a4cecd29"}, "closed": true, "closedAt": "2020-03-19T19:40:17Z", "author": {"login": "kushagraThapar"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPQcT4gH2gAyMzkxMTc1NDE2OjVhNTIxNzQwMTI2MjkwOGVkMTBiY2VmOWMyYjFmNDQxODBiZGI4YzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPQxEAgFqTM3ODAxNDU1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5a5217401262908ed10bcef9c2b1f44180bdb8c1", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5a5217401262908ed10bcef9c2b1f44180bdb8c1", "committedDate": "2020-03-19T18:44:21Z", "message": "Removed hard coded version from HttpConstants.\nAdded azure-cosmos.properties file.\nAdded unit tests to verify current version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MDAxMTg4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9275#pullrequestreview-378001188", "createdAt": "2020-03-19T18:48:02Z", "commit": {"oid": "5a5217401262908ed10bcef9c2b1f44180bdb8c1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODo0ODowMlrOF476tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODo0ODowMlrOF476tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI0NjI2MQ==", "bodyText": "Please add license header", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9275#discussion_r395246261", "createdAt": "2020-03-19T18:48:02Z", "author": {"login": "mbhaskar"}, "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/AzureCosmosPropertiesTest.java", "diffHunk": "@@ -0,0 +1,58 @@\n+package com.azure.cosmos;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a5217401262908ed10bcef9c2b1f44180bdb8c1"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5f8ca1a723abd3212f46bf6772195d859038664", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f5f8ca1a723abd3212f46bf6772195d859038664", "committedDate": "2020-03-19T18:50:12Z", "message": "Added license header"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MDA1MzA2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9275#pullrequestreview-378005306", "createdAt": "2020-03-19T18:53:44Z", "commit": {"oid": "f5f8ca1a723abd3212f46bf6772195d859038664"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MDA5MTQ1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9275#pullrequestreview-378009145", "createdAt": "2020-03-19T18:59:01Z", "commit": {"oid": "f5f8ca1a723abd3212f46bf6772195d859038664"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODo1OTowMlrOF48T9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxODo1OTowMlrOF48T9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI1MjcyNQ==", "bodyText": "ideally you can use xml parser to get the path of the filed of interest\nanyway, not a big deal for a test and may not worth the time.\nThank you.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9275#discussion_r395252725", "createdAt": "2020-03-19T18:59:02Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/AzureCosmosPropertiesTest.java", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.cosmos;\n+\n+import com.azure.core.util.CoreUtils;\n+import com.azure.cosmos.implementation.HttpConstants;\n+import org.testng.annotations.Test;\n+\n+import java.io.BufferedReader;\n+import java.io.File;\n+import java.io.FileReader;\n+import java.io.IOException;\n+import java.util.Map;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+public class AzureCosmosPropertiesTest {\n+\n+    @Test(groups = \"unit\")\n+    public void verifyAzureCosmosProperties() {\n+        Map<String, String> properties =\n+            CoreUtils.getProperties(HttpConstants.Versions.AZURE_COSMOS_PROPERTIES_FILE_NAME);\n+        assertThat(properties).isNotNull();\n+        assertThat(properties).isNotEmpty();\n+        assertThat(properties.get(\"version\")).isNotNull();\n+        assertThat(properties.get(\"name\")).isNotNull();\n+    }\n+\n+    @Test(groups = \"unit\")\n+    public void verifyProjectVersion() {\n+        assertThat(HttpConstants.Versions.SDK_VERSION).isNotNull();\n+        String pomFileVersion = getVersionFromPomFile();\n+        assertThat(HttpConstants.Versions.SDK_VERSION).isEqualTo(pomFileVersion);\n+    }\n+\n+    private String getVersionFromPomFile() {\n+        String fileName = \"pom.xml\";\n+        String versionStartTag = \"<version>\";\n+        String versionEndTag = \"</version>\";\n+        File file = new File(fileName);\n+        try {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5f8ca1a723abd3212f46bf6772195d859038664"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MDEzMTc1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9275#pullrequestreview-378013175", "createdAt": "2020-03-19T19:04:57Z", "commit": {"oid": "f5f8ca1a723abd3212f46bf6772195d859038664"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MDE0NTU3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9275#pullrequestreview-378014557", "createdAt": "2020-03-19T19:07:01Z", "commit": {"oid": "f5f8ca1a723abd3212f46bf6772195d859038664"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxOTowNzowMVrOF48k2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxOTowNzowMVrOF48k2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI1NzA1MQ==", "bodyText": "This is cool. We do additional regex testing to test over the version format.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9275#discussion_r395257051", "createdAt": "2020-03-19T19:07:01Z", "author": {"login": "sima-zhu"}, "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/AzureCosmosPropertiesTest.java", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.cosmos;\n+\n+import com.azure.core.util.CoreUtils;\n+import com.azure.cosmos.implementation.HttpConstants;\n+import org.testng.annotations.Test;\n+\n+import java.io.BufferedReader;\n+import java.io.File;\n+import java.io.FileReader;\n+import java.io.IOException;\n+import java.util.Map;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+\n+public class AzureCosmosPropertiesTest {\n+\n+    @Test(groups = \"unit\")\n+    public void verifyAzureCosmosProperties() {\n+        Map<String, String> properties =\n+            CoreUtils.getProperties(HttpConstants.Versions.AZURE_COSMOS_PROPERTIES_FILE_NAME);\n+        assertThat(properties).isNotNull();\n+        assertThat(properties).isNotEmpty();\n+        assertThat(properties.get(\"version\")).isNotNull();\n+        assertThat(properties.get(\"name\")).isNotNull();\n+    }\n+\n+    @Test(groups = \"unit\")\n+    public void verifyProjectVersion() {\n+        assertThat(HttpConstants.Versions.SDK_VERSION).isNotNull();\n+        String pomFileVersion = getVersionFromPomFile();\n+        assertThat(HttpConstants.Versions.SDK_VERSION).isEqualTo(pomFileVersion);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5f8ca1a723abd3212f46bf6772195d859038664"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 603, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}