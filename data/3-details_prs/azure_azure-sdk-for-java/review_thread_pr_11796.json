{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4MTY5NzQ1", "number": 11796, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDoxNjo0OFrOEEUMtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzo1ODo0MVrOEFJStA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTYwNjkzOnYy", "diffSide": "RIGHT", "path": "sdk/spring/azure-spring-boot-bom/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDoxNjo0OFrOGh2_Uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDoxNjo0OFrOGh2_Uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE1NzEzOQ==", "bodyText": "azure-spring-boot-bom was added to sdk/boms as part of @saragluna's PR which is the correct location. The azure-spring-boot-bom changes shouldn't be in this PR.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11796#discussion_r438157139", "createdAt": "2020-06-10T14:16:48Z", "author": {"login": "JimSuplizio"}, "path": "sdk/spring/azure-spring-boot-bom/pom.xml", "diffHunk": "@@ -0,0 +1,123 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ab61ec1ae0fe3e89d5c4fcc4f92ce8e12555dcf"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTY1NzA4OnYy", "diffSide": "RIGHT", "path": "sdk/spring/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDoyNzoyNlrOGh3f2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDoyNzoyNlrOGh3f2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE2NTQ2NA==", "bodyText": "Same comment as above. Please rebase and remove the azure-spring-boot-bom from here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11796#discussion_r438165464", "createdAt": "2020-06-10T14:27:26Z", "author": {"login": "JimSuplizio"}, "path": "sdk/spring/pom.xml", "diffHunk": "@@ -10,6 +10,7 @@\n   <version>1.0.0</version><!-- Need not change for every release-->\n   <modules>\n     <module>azure-spring-boot</module>\n+    <module>azure-spring-boot-bom</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ab61ec1ae0fe3e89d5c4fcc4f92ce8e12555dcf"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNTQ5NTI0OnYy", "diffSide": "RIGHT", "path": "sdk/spring/tests.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMzowNDowMlrOGixlRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMToyMDo1N1rOGi0E0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTExNzEyNA==", "bodyText": "@hemanttanwar @saragluna\nThe Java team needs to comment on this but I think the test matrix needs to be more than just linux and Java 8. Similarly, should this be testing with more than just AZURE_TEST_HTTP_CLIENTS: netty?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11796#discussion_r439117124", "createdAt": "2020-06-11T23:04:02Z", "author": {"login": "JimSuplizio"}, "path": "sdk/spring/tests.yml", "diffHunk": "@@ -0,0 +1,41 @@\n+trigger: none\n+\n+jobs:\n+    - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n+      parameters:\n+        TimeoutInMinutes: 240\n+        MaxParallel: 2\n+        ServiceDirectory: spring\n+        Matrix:\n+          Linux - Java 8 (AzureCloud):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "956e3be7a0ea94aa4efd3d8b07ead241b017efa5"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1Nzk2OQ==", "bodyText": "@JimSuplizio Yes, the matrix needs to be more than just Linux - Java 8 (just using only Linux - Java 8 to save testing time). I will remove the matrix section in tests.yml in this PR to use the default matrix defined in the test template.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11796#discussion_r439157969", "createdAt": "2020-06-12T01:20:57Z", "author": {"login": "saragluna"}, "path": "sdk/spring/tests.yml", "diffHunk": "@@ -0,0 +1,41 @@\n+trigger: none\n+\n+jobs:\n+    - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n+      parameters:\n+        TimeoutInMinutes: 240\n+        MaxParallel: 2\n+        ServiceDirectory: spring\n+        Matrix:\n+          Linux - Java 8 (AzureCloud):", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTExNzEyNA=="}, "originalCommit": {"oid": "956e3be7a0ea94aa4efd3d8b07ead241b017efa5"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNTQ5OTgwOnYy", "diffSide": "RIGHT", "path": "sdk/spring/tests.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMzowNjowNlrOGixn-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQyMzowNjowNlrOGixn-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTExNzgxOA==", "bodyText": "I'm happy to see this PR was updated to pass skipSpringITs into Maven instead of using an environment variable.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11796#discussion_r439117818", "createdAt": "2020-06-11T23:06:06Z", "author": {"login": "JimSuplizio"}, "path": "sdk/spring/tests.yml", "diffHunk": "@@ -0,0 +1,41 @@\n+trigger: none\n+\n+jobs:\n+    - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n+      parameters:\n+        TimeoutInMinutes: 240\n+        MaxParallel: 2\n+        ServiceDirectory: spring\n+        Matrix:\n+          Linux - Java 8 (AzureCloud):\n+            OSVmImage: 'ubuntu-18.04'\n+            JavaVersion: '1.8'\n+            DisplayName: 'Linux - Java 8'\n+            SubscriptionConfiguration: $(sub-config-azure-cloud-test-resources)\n+            AZURE_TEST_HTTP_CLIENTS: netty\n+        TestStepMavenInputs:\n+          options: '-Dmaven.wagon.http.pool=false $(DefaultOptions) -Dmaven.javadoc.skip=true -Drevapi.skip=true -DskipSpringITs=false -pl $(ProjectList)'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "956e3be7a0ea94aa4efd3d8b07ead241b017efa5"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODI3ODE3OnYy", "diffSide": "RIGHT", "path": "sdk/spring/tests.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzo0ODo0NVrOGjMssg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwMjoxOTowN1rOGjVMJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU2MTM5NA==", "bodyText": "I'm seeing failures  here that look like they're related to the right environment variables for an AAD app not being present. If you're using the default azure credentials then setting this in the EnvVars section might fix it:\n        ARM_CLIENTID: $(aad-azure-sdk-test-client-id)\n        ARM_CLIENTKEY: $(aad-azure-sdk-test-client-secret)\n        AZURE_TENANT_ID: $(aad-azure-sdk-test-tenant-id)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11796#discussion_r439561394", "createdAt": "2020-06-12T17:48:45Z", "author": {"login": "danieljurek"}, "path": "sdk/spring/tests.yml", "diffHunk": "@@ -1,9 +1,33 @@\n trigger: none\n \n jobs:\n-  - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n-    parameters:\n-      ServiceDirectory: spring\n-      EnvVars:\n-        AZURE_TEST_MODE: LIVE\n-      Artifacts: []\n+    - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n+      parameters:\n+        TimeoutInMinutes: 240\n+        MaxParallel: 2\n+        ServiceDirectory: spring\n+        TestStepMavenInputs:\n+          options: '-Dmaven.wagon.http.pool=false $(DefaultOptions) -Dmaven.javadoc.skip=true -Drevapi.skip=true -DskipSpringITs=false -pl $(ProjectList)'\n+          goals: \"verify\"\n+\n+        Artifacts:\n+          - name: azure-spring-boot-tests\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboot-tests\n+          - name: azure-spring-boot-test-core\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboottestcore\n+          - name: azure-spring-boot-test-cosmosdb\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboottestcosmosdb\n+          - name: azure-spring-boot-test-aad\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboottestaad\n+          - name: azure-spring-boot-test-keyvault\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboottestkeyvault\n+          - name: azure-spring-boot-test-application\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboottestapplication\n+        EnvVars:\n+          AZURE_TEST_MODE: LIVE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "646d22230ea86af76f72a19e17fcf26509a103de"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcwMDUxNw==", "bodyText": "@danieljurek We're using another Azure AD (which is created by ourselves) so we'll need to add such environment variables for the pipeline. Should we create a variable group for these variables or is there somewhere we could add them to? Seems like I don't have the permission to edit the pipeline.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11796#discussion_r439700517", "createdAt": "2020-06-13T02:19:07Z", "author": {"login": "saragluna"}, "path": "sdk/spring/tests.yml", "diffHunk": "@@ -1,9 +1,33 @@\n trigger: none\n \n jobs:\n-  - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n-    parameters:\n-      ServiceDirectory: spring\n-      EnvVars:\n-        AZURE_TEST_MODE: LIVE\n-      Artifacts: []\n+    - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n+      parameters:\n+        TimeoutInMinutes: 240\n+        MaxParallel: 2\n+        ServiceDirectory: spring\n+        TestStepMavenInputs:\n+          options: '-Dmaven.wagon.http.pool=false $(DefaultOptions) -Dmaven.javadoc.skip=true -Drevapi.skip=true -DskipSpringITs=false -pl $(ProjectList)'\n+          goals: \"verify\"\n+\n+        Artifacts:\n+          - name: azure-spring-boot-tests\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboot-tests\n+          - name: azure-spring-boot-test-core\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboottestcore\n+          - name: azure-spring-boot-test-cosmosdb\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboottestcosmosdb\n+          - name: azure-spring-boot-test-aad\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboottestaad\n+          - name: azure-spring-boot-test-keyvault\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboottestkeyvault\n+          - name: azure-spring-boot-test-application\n+            groupId: com.microsoft.azure\n+            safeName: azurespringboottestapplication\n+        EnvVars:\n+          AZURE_TEST_MODE: LIVE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU2MTM5NA=="}, "originalCommit": {"oid": "646d22230ea86af76f72a19e17fcf26509a103de"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODMwNTgwOnYy", "diffSide": "RIGHT", "path": "sdk/spring/tests.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzo1ODo0MVrOGjM-ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QwMjoxMjozN1rOGjVKQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU2NTk2Mg==", "bodyText": "MaxParallel is probably not necessary here. For the most part you probably only need to set it when one or more of these is true:\n\nTests use some shared resource (you're using test-resources.json which gives you one set of resources per job)\nThe resources you're creating have a low upper bound for the number of instances which can be created in a subscription and you want to limit parallelism to prevent having too many instances of that resource active at once\nYour test matrix is enormous and running tests would saturate our agent pool and make other tests wait a long time in a queued state", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11796#discussion_r439565962", "createdAt": "2020-06-12T17:58:41Z", "author": {"login": "danieljurek"}, "path": "sdk/spring/tests.yml", "diffHunk": "@@ -1,9 +1,33 @@\n trigger: none\n \n jobs:\n-  - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n-    parameters:\n-      ServiceDirectory: spring\n-      EnvVars:\n-        AZURE_TEST_MODE: LIVE\n-      Artifacts: []\n+    - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n+      parameters:\n+        TimeoutInMinutes: 240\n+        MaxParallel: 2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "646d22230ea86af76f72a19e17fcf26509a103de"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTcwMDAzNQ==", "bodyText": "Okay, I'll remove it then.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11796#discussion_r439700035", "createdAt": "2020-06-13T02:12:37Z", "author": {"login": "saragluna"}, "path": "sdk/spring/tests.yml", "diffHunk": "@@ -1,9 +1,33 @@\n trigger: none\n \n jobs:\n-  - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n-    parameters:\n-      ServiceDirectory: spring\n-      EnvVars:\n-        AZURE_TEST_MODE: LIVE\n-      Artifacts: []\n+    - template: ../../eng/pipelines/templates/jobs/archetype-sdk-tests.yml\n+      parameters:\n+        TimeoutInMinutes: 240\n+        MaxParallel: 2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU2NTk2Mg=="}, "originalCommit": {"oid": "646d22230ea86af76f72a19e17fcf26509a103de"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3984, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}