{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNDEwMjY2", "number": 11318, "title": "[TA] Remove pagination feature", "bodyText": "Remove pagination, which remove TextAnalyticsPagedFlux, TextAnalyticsPagedIterable and TextAnalyticsPagedResponse\n\nfixes: #11270\nA summary note after the Java questions call:\n(1) Stay with decision that removing paginaton feature.\n(2) Following what .NET has, create a concrete type, ExtractKeyPhrasesResultCollection, DetectLanguageResultCollection, etc, instead of a geneic type TextAnalyticsResultCollection\n(3) Keep one last API, which can do what other two convenience API does:\npublic TextAnalyticsPagedFlux<DetectLanguageResult> detectLanguageBatch(Iterable<String> documents, String countryHint, TextAnalyticsRequestOptions options) {}\n\nin\npublic TextAnalyticsPagedFlux<DetectLanguageResult> detectLanguageBatch(Iterable<String> documents) {}\npublic TextAnalyticsPagedFlux<DetectLanguageResult> detectLanguageBatch(Iterable<String> documents, String countryHint) {}\npublic TextAnalyticsPagedFlux<DetectLanguageResult> detectLanguageBatch(Iterable<String> documents, String countryHint, TextAnalyticsRequestOptions options) {}\n\n(4) Undo passing endpoint and api key as static in our pipelines. fixes: #11052\n(5) fixes: #11430", "createdAt": "2020-05-19T23:03:52Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318", "merged": true, "mergeCommit": {"oid": "a4ece31cd29237179d2ce92ebba65328360268c1"}, "closed": true, "closedAt": "2020-05-27T18:29:06Z", "author": {"login": "mssfang"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABci8sOZgH2gAyNDIwNDEwMjY2OmE0M2Y3Y2IyMzNmMmFjZjE2MWZhNjMyMWUxMWRhOTI2MDZjY2FhZmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcldPR6gH2gAyNDIwNDEwMjY2OmM3MDJkNDRlMGJhZjY0YzllYzBkOWI1MGUxMGFiN2NiZTFlN2Y1NDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a43f7cb233f2acf161fa6321e11da92606ccaafe", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a43f7cb233f2acf161fa6321e11da92606ccaafe", "committedDate": "2020-05-19T23:02:07Z", "message": "remove pagenation feature"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0ODg3OTIz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#pullrequestreview-414887923", "createdAt": "2020-05-19T23:18:03Z", "commit": {"oid": "a43f7cb233f2acf161fa6321e11da92606ccaafe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMzoxODowM1rOGX14KA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMzoxODowM1rOGX14KA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY1MzE2MA==", "bodyText": "oh wow! this is a big change. Do you mind sharing the reason behind it?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r427653160", "createdAt": "2020-05-19T23:18:03Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/CHANGELOG.md", "diffHunk": "@@ -9,6 +9,7 @@\n - Text analytics SDK update the service to version `v3.0` from `v3.0-preview.1`.\n \n **Breaking changes**\n+- Removed pagination feature, which removed `TextAnalyticsPagedIterable`, `TextAnalyticsPagedFlux` and `TextAnalyticsPagedResponse`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a43f7cb233f2acf161fa6321e11da92606ccaafe"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0OTExOTEw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#pullrequestreview-414911910", "createdAt": "2020-05-20T00:23:30Z", "commit": {"oid": "a43f7cb233f2acf161fa6321e11da92606ccaafe"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwMDoyMzozMFrOGX3IVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwMDozODoyNlrOGX3Ykw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY3MzY4Ng==", "bodyText": "Name for TextAnalyticsResultCollection is being discussed in the API view tool.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r427673686", "createdAt": "2020-05-20T00:23:30Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -60,55 +60,53 @@\n     }\n \n     /**\n-     * Helper function for calling service with max overloaded parameters that a returns {@link TextAnalyticsPagedFlux}\n-     * which is a paged flux that contains {@link AnalyzeSentimentResult}.\n+     * Helper function for calling service with max overloaded parameters that returns a {@link Response}\n+     * which contains {@link TextAnalyticsResultCollection} of {@link AnalyzeSentimentResult}.\n      *\n      * @param documents The list of documents to analyze sentiments for.\n      * @param options The {@link TextAnalyticsRequestOptions} request options.\n      *\n-     * @return {@link TextAnalyticsPagedFlux} of {@link AnalyzeSentimentResult}.\n+     * @return A mono {@link Response} contains {@link TextAnalyticsResultCollection} of {@link AnalyzeSentimentResult}.\n      */\n-    TextAnalyticsPagedFlux<AnalyzeSentimentResult> analyzeSentimentBatch(Iterable<TextDocumentInput> documents,\n-        TextAnalyticsRequestOptions options) {\n+    public Mono<Response<TextAnalyticsResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatch(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a43f7cb233f2acf161fa6321e11da92606ccaafe"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY3NjkyNg==", "bodyText": "Can this api be removed in favor of recognizeLinkedEntitiesBatch(Iterable<String> documents, String language, TextAnalyticsRequestOptions options)? Similarly, remove this overload for other operations too.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r427676926", "createdAt": "2020-05-20T00:35:22Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsAsyncClient.java", "diffHunk": "@@ -572,13 +574,13 @@ public String getDefaultLanguage() {\n      * @param language The 2 letter ISO 639-1 representation of language for the text. If not set, uses \"en\" for\n      * English as default.\n      *\n-     * @return A {@link TextAnalyticsPagedFlux} contains a list of\n-     * {@link LinkedEntity recognized linked entities document result}.\n+     * @return A {@link Mono} contains a {@link TextAnalyticsResultCollection} of\n+     * {@link RecognizeLinkedEntitiesResult recognized linked entities document result}.\n      *\n      * @throws NullPointerException if {@code documents} is {@code null}.\n      */\n-    @ServiceMethod(returns = ReturnType.COLLECTION)\n-    public TextAnalyticsPagedFlux<RecognizeLinkedEntitiesResult> recognizeLinkedEntitiesBatch(\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<TextAnalyticsResultCollection<RecognizeLinkedEntitiesResult>> recognizeLinkedEntitiesBatch(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a43f7cb233f2acf161fa6321e11da92606ccaafe"}, "originalPosition": 296}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY3Nzg0Mw==", "bodyText": "nit: change to \"any type that extends {@link TextAnalyticsResult}.\"", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r427677843", "createdAt": "2020-05-20T00:38:26Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsResultCollection.java", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.util.IterableStream;\n+\n+/**\n+ * A collection model that contains a list of {@link T} along with model version and batch's statistics\n+ *\n+ * @param <T> any child class of {@link TextAnalyticsResult}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a43f7cb233f2acf161fa6321e11da92606ccaafe"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0OTM4NjY1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#pullrequestreview-414938665", "createdAt": "2020-05-20T01:50:45Z", "commit": {"oid": "a43f7cb233f2acf161fa6321e11da92606ccaafe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwMTo1MDo0NVrOGX4inw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwMTo1MDo0NVrOGX4inw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY5Njc5OQ==", "bodyText": "Is this something new we are introducing in this PR?\nRather if keyPhraseResultCollection is empty return the same to client-side?\nWhat do other languages do here?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r427696799", "createdAt": "2020-05-20T01:50:45Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/ExtractKeyPhraseAsyncClient.java", "diffHunk": "@@ -74,73 +75,78 @@\n             Objects.requireNonNull(document, \"'document' cannot be null.\");\n             final TextDocumentInput textDocumentInput = new TextDocumentInput(\"0\", document);\n             textDocumentInput.setLanguage(language);\n-            return extractKeyPhrases(Collections.singletonList(textDocumentInput), null)\n-                    .map(keyPhraseResult -> {\n-                        if (keyPhraseResult.isError()) {\n-                            throw logger.logExceptionAsError(toTextAnalyticsException(keyPhraseResult.getError()));\n+            return extractKeyPhrasesWithResponse(Collections.singletonList(textDocumentInput), null)\n+                    .map(keyPhraseResultCollection -> {\n+                        for (ExtractKeyPhraseResult keyPhraseResult : keyPhraseResultCollection.getValue()) {\n+                            if (keyPhraseResult.isError()) {\n+                                throw logger.logExceptionAsError(toTextAnalyticsException(keyPhraseResult.getError()));\n+                            }\n+                            return new KeyPhrasesCollection(keyPhraseResult.getKeyPhrases(),\n+                                keyPhraseResult.getKeyPhrases().getWarnings());\n                         }\n-                        return new KeyPhrasesCollection(keyPhraseResult.getKeyPhrases(),\n-                            keyPhraseResult.getKeyPhrases().getWarnings());\n-                    }).last();\n+                        // this step should never be executed, if executed, we get an empty collection above.\n+                        throw logger.logExceptionAsError(\n+                            new TextAnalyticsException(\"None key Phrases extracted.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a43f7cb233f2acf161fa6321e11da92606ccaafe"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d80581a6df0c655207fa661ac3207febccaab77", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3d80581a6df0c655207fa661ac3207febccaab77", "committedDate": "2020-05-20T06:16:10Z", "message": "delete generic type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d37f7f2b1d1b4f28e4d4b36aadc7e0d6a40453f", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7d37f7f2b1d1b4f28e4d4b36aadc7e0d6a40453f", "committedDate": "2020-05-20T06:39:22Z", "message": "remove overload methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5745c265e4c1ffa44f96d8ba0df8801c5b24c46", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f5745c265e4c1ffa44f96d8ba0df8801c5b24c46", "committedDate": "2020-05-20T06:45:19Z", "message": "javadoc checkstyle and update changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b3f104a6a2d77d7dfe1fc90b260bc354730ddcb", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7b3f104a6a2d77d7dfe1fc90b260bc354730ddcb", "committedDate": "2020-05-20T06:46:01Z", "message": "wording"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb0877ab04c621c107e661c1d30339b550ca246c", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bb0877ab04c621c107e661c1d30339b550ca246c", "committedDate": "2020-05-20T06:56:32Z", "message": "return an obj with nulls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0350287c7e2c3c1800a98b5ca615c8ab1e0e81b3", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0350287c7e2c3c1800a98b5ca615c8ab1e0e81b3", "committedDate": "2020-05-20T06:58:35Z", "message": "remove unused improt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60f9178f7e3f7fbec7bdfd5556fb35bbe0343816", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/60f9178f7e3f7fbec7bdfd5556fb35bbe0343816", "committedDate": "2020-05-20T15:53:23Z", "message": "resolve conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c384beef3d1111c2f3bea95033ed1d388f25629", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7c384beef3d1111c2f3bea95033ed1d388f25629", "committedDate": "2020-05-21T22:13:41Z", "message": "resolve conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb0a5692fab64b8e49b6512223ceb43498acab83", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/eb0a5692fab64b8e49b6512223ceb43498acab83", "committedDate": "2020-05-22T00:07:57Z", "message": "make fromString() public"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14631012cad850f1e43a0e450e7c28db937ab11b", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/14631012cad850f1e43a0e450e7c28db937ab11b", "committedDate": "2020-05-22T00:52:14Z", "message": "add collections to util"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ffa221f6731ef5ff38bc615689fef23db229a678", "committedDate": "2020-05-26T18:12:48Z", "message": "modify TextAnalyticsException"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NjMxODgy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#pullrequestreview-418631882", "createdAt": "2020-05-26T19:54:08Z", "commit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "state": "APPROVED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOTo1NDowOFrOGauDzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMToyOTozMlrOGaw-7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY3MDc5Nw==", "bodyText": "Instead of suppressing this, you can make errorCode transient.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430670797", "createdAt": "2020-05-26T19:54:08Z", "author": {"login": "srnagar"}, "path": "eng/code-quality-reports/src/main/resources/spotbugs/spotbugs-exclude.xml", "diffHunk": "@@ -2040,4 +2040,10 @@\n       <Bug pattern=\"DM_DEFAULT_ENCODING\"/>\n   </Match>\n \n+  <!-- Bug: https://github.com/Azure/azure-sdk-for-java/issues/11430 -->\n+  <Match>\n+    <Class name=\"com.azure.ai.textanalytics.models.TextAnalyticsException\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY3NDAwOQ==", "bodyText": "Is this required?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430674009", "createdAt": "2020-05-26T19:59:58Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/ExtractKeyPhraseAsyncClient.java", "diffHunk": "@@ -74,73 +74,73 @@\n             Objects.requireNonNull(document, \"'document' cannot be null.\");\n             final TextDocumentInput textDocumentInput = new TextDocumentInput(\"0\", document);\n             textDocumentInput.setLanguage(language);\n-            return extractKeyPhrases(Collections.singletonList(textDocumentInput), null)\n-                    .map(keyPhraseResult -> {\n-                        if (keyPhraseResult.isError()) {\n-                            throw logger.logExceptionAsError(toTextAnalyticsException(keyPhraseResult.getError()));\n+            return extractKeyPhrasesWithResponse(Collections.singletonList(textDocumentInput), null)\n+                    .map(keyPhraseResultCollection -> {\n+                        for (ExtractKeyPhraseResult keyPhraseResult : keyPhraseResultCollection.getValue()) {\n+                            if (keyPhraseResult.isError()) {\n+                                throw logger.logExceptionAsError(toTextAnalyticsException(keyPhraseResult.getError()));\n+                            }\n+                            return new KeyPhrasesCollection(keyPhraseResult.getKeyPhrases(),\n+                                keyPhraseResult.getKeyPhrases().getWarnings());\n                         }\n-                        return new KeyPhrasesCollection(keyPhraseResult.getKeyPhrases(),\n-                            keyPhraseResult.getKeyPhrases().getWarnings());\n-                    }).last();\n+                        // this step should never be executed, if executed, we get an empty collection above.\n+                        return new KeyPhrasesCollection(null, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcxMTk2OA==", "bodyText": "Can keyPhraseResultCollection.getValue() be null or empty?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430711968", "createdAt": "2020-05-26T21:15:13Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/ExtractKeyPhraseAsyncClient.java", "diffHunk": "@@ -74,73 +74,73 @@\n             Objects.requireNonNull(document, \"'document' cannot be null.\");\n             final TextDocumentInput textDocumentInput = new TextDocumentInput(\"0\", document);\n             textDocumentInput.setLanguage(language);\n-            return extractKeyPhrases(Collections.singletonList(textDocumentInput), null)\n-                    .map(keyPhraseResult -> {\n-                        if (keyPhraseResult.isError()) {\n-                            throw logger.logExceptionAsError(toTextAnalyticsException(keyPhraseResult.getError()));\n+            return extractKeyPhrasesWithResponse(Collections.singletonList(textDocumentInput), null)\n+                    .map(keyPhraseResultCollection -> {\n+                        for (ExtractKeyPhraseResult keyPhraseResult : keyPhraseResultCollection.getValue()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcxMzExMw==", "bodyText": "Why do we have this in all the response mappers? Also, the comment is confusing. Either it gets executed or not. If it is expected to not be executed, then we should throw an exception when it does.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430713113", "createdAt": "2020-05-26T21:17:32Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsAsyncClient.java", "diffHunk": "@@ -161,71 +160,21 @@ public String getDefaultLanguage() {\n         try {\n             Objects.requireNonNull(document, \"'document' cannot be null.\");\n             return detectLanguageBatch(Collections.singletonList(document), countryHint, null)\n-                .map(detectLanguageResult -> {\n-                    if (detectLanguageResult.isError()) {\n-                        throw logger.logExceptionAsError(toTextAnalyticsException(detectLanguageResult.getError()));\n+                .map(detectLanguageResultCollection ->  {\n+                    for (DetectLanguageResult detectLanguageResult : detectLanguageResultCollection) {\n+                        if (detectLanguageResult.isError()) {\n+                            throw logger.logExceptionAsError(toTextAnalyticsException(detectLanguageResult.getError()));\n+                        }\n+                        return detectLanguageResult.getPrimaryLanguage();\n                     }\n-                    return detectLanguageResult.getPrimaryLanguage();\n-                }).last();\n+                    // this step should never be executed, if executed, we get an empty collection above.\n+                    return new DetectedLanguage(null, null, -1, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcxNDk0Mw==", "bodyText": "Why are these overloads removed?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430714943", "createdAt": "2020-05-26T21:21:24Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsClient.java", "diffHunk": "@@ -123,60 +123,6 @@ public DetectedLanguage detectLanguage(String document, String countryHint) {\n         return client.detectLanguage(document, countryHint).block();\n     }\n \n-    /**\n-     * Detects Language for a batch of documents.\n-     *\n-     * This method will use the default country hint that sets up in\n-     * {@link TextAnalyticsClientBuilder#defaultCountryHint(String)}. If none is specified, service will use 'US' as\n-     * the country hint.\n-     *\n-     * <p><strong>Code Sample</strong></p>\n-     * <p>Detects the languages in a list of documents.</p>\n-     * {@codesnippet com.azure.ai.textanalytics.TextAnalyticsClient.detectLanguageBatch#Iterable}\n-     *\n-     * @param documents The list of documents to detect languages for.\n-     * For text length limits, maximum batch size, and supported text encoding, see\n-     * <a href=\"https://docs.microsoft.com/azure/cognitive-services/text-analytics/overview#data-limits\">data limits</a>.\n-     *\n-     * @return A {@link TextAnalyticsPagedIterable} contains a list of\n-     * {@link DetectLanguageResult detected language document result}.\n-     *\n-     * @throws NullPointerException if {@code documents} is {@code null}.\n-     * @throws IllegalArgumentException if {@code documents} is empty.\n-     */\n-    @ServiceMethod(returns = ReturnType.COLLECTION)\n-    public TextAnalyticsPagedIterable<DetectLanguageResult> detectLanguageBatch(Iterable<String> documents) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcxNjc0OQ==", "bodyText": "We still need util package to be exported as this package holds the collection types that are returned to the user.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430716749", "createdAt": "2020-05-26T21:25:14Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/module-info.java", "diffHunk": "@@ -6,7 +6,6 @@\n \n     exports com.azure.ai.textanalytics;\n     exports com.azure.ai.textanalytics.models;\n-    exports com.azure.ai.textanalytics.util;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcxODcwMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Package containing classes for creating result collections on Azure Text Analytics.\n          \n          \n            \n             * Package containing Azure Text Analytics collection types that contain the results for batch operations.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430718702", "createdAt": "2020-05-26T21:29:32Z", "author": {"login": "srnagar"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/util/package-info.java", "diffHunk": "@@ -2,8 +2,6 @@\n // Licensed under the MIT License.\n \n /**\n- * Package containing classes for creating a {@link com.azure.ai.textanalytics.util.TextAnalyticsPagedFlux}\n- * and {@link com.azure.ai.textanalytics.util.TextAnalyticsPagedIterable} to use them to perform operations on\n- * Azure Text Analytics.\n+ * Package containing classes for creating result collections on Azure Text Analytics.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NjM5NTM2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#pullrequestreview-418639536", "createdAt": "2020-05-26T20:05:30Z", "commit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMDowNTozMFrOGaubIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMDowODowMFrOGauf7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY3Njc3MA==", "bodyText": "analyzing sentiment operation. It also includes", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430676770", "createdAt": "2020-05-26T20:05:30Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -146,8 +146,8 @@ or the number of operation transactions that have gone through, simply call `get\n `TextDocumentStatistics` which contains both information. \n \n ### Return value collection\n-An operation result collection, such as `TextAnalyticsPagedResponse<AnalyzeSentimentResult>`, which is the collection of \n-the result of a Text Analytics analyzing sentiment operation. For `TextAnalyticsPagedResponse` includes the model\n+An operation result collection, such as `AnalyzeSentimentResultCollection`, which is the collection of \n+the result of a Text Analytics analyzing sentiment operation, also it includes the model", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY3Nzk5OA==", "bodyText": "nit: Should be fine to just say A  {@link Response}", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430677998", "createdAt": "2020-05-26T20:08:00Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/DetectLanguageAsyncClient.java", "diffHunk": "@@ -57,55 +58,51 @@\n     }\n \n     /**\n-     * Helper function for calling service with max overloaded parameters that a returns {@link TextAnalyticsPagedFlux}\n-     * which is a paged flux that contains {@link DetectLanguageResult}.\n+     * Helper function for calling service with max overloaded parameters.\n      *\n      * @param documents The list of documents to detect languages for.\n      * @param options The {@link TextAnalyticsRequestOptions} request options.\n      *\n-     * @return The {@link TextAnalyticsPagedFlux} of {@link DetectLanguageResult}.\n+     * @return A mono {@link Response} that contains {@link DetectLanguageResultCollection}.\n      */\n-    TextAnalyticsPagedFlux<DetectLanguageResult> detectLanguageBatch(Iterable<DetectLanguageInput> documents,\n-        TextAnalyticsRequestOptions options) {\n+    Mono<Response<DetectLanguageResultCollection>> detectLanguageBatch(\n+        Iterable<DetectLanguageInput> documents, TextAnalyticsRequestOptions options) {\n         try {\n             inputDocumentsValidation(documents);\n-            return new TextAnalyticsPagedFlux<>(() -> (continuationToken, pageSize) -> withContext(context ->\n-                getDetectedLanguageResponseInPage(documents, options, context)).flux());\n+            return withContext(context -> getDetectedLanguageResponse(documents, options, context));\n         } catch (RuntimeException ex) {\n-            return new TextAnalyticsPagedFlux<>(() -> (continuationToken, pageSize) -> fluxError(logger, ex));\n+            return monoError(logger, ex);\n         }\n     }\n \n     /**\n-     * Helper function for calling service with max overloaded parameters with {@link Context} that a returns\n-     * {@link TextAnalyticsPagedFlux} which is a paged flux that contains {@link DetectLanguageResult}.\n+     * Helper function for calling service with max overloaded parameters with {@link Context}.\n      *\n      * @param documents The list of documents to detect languages for.\n      * @param options The {@link TextAnalyticsRequestOptions} request options.\n      * @param context Additional context that is passed through the Http pipeline during the service call.\n      *\n-     * @return The {@link TextAnalyticsPagedFlux} of {@link DetectLanguageResult}.\n+     * @return A mono {@link Response} which contains {@link DetectLanguageResultCollection}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzAxODI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#pullrequestreview-418701825", "createdAt": "2020-05-26T21:45:43Z", "commit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMTo0NTo0M1rOGaxaXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMTo0NTo0M1rOGaxaXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcyNTcyNQ==", "bodyText": "could we add the version the library supports to the Readme file too? Kind of what we did in FR: https://github.com/Azure/azure-sdk-for-java/tree/master/sdk/formrecognizer/azure-ai-formrecognizer#include-the-package", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430725725", "createdAt": "2020-05-26T21:45:43Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/CHANGELOG.md", "diffHunk": "@@ -9,6 +9,8 @@\n - Text analytics SDK update the service to version `v3.0` from `v3.0-preview.1`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzE3OTUw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#pullrequestreview-418717950", "createdAt": "2020-05-26T22:18:46Z", "commit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMjoxODo0NlrOGayNKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMjoxODo0NlrOGayNKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDczODczMQ==", "bodyText": "will remove it", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430738731", "createdAt": "2020-05-26T22:18:46Z", "author": {"login": "mssfang"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/batch/RecognizeEntitiesBatchDocuments.java", "diffHunk": "@@ -29,8 +29,8 @@\n     public static void main(String[] args) {\n         // Instantiate a client that will be used to call the service.\n         TextAnalyticsClient client = new TextAnalyticsClientBuilder()\n-            .credential(new AzureKeyCredential(\"{key}\"))\n-            .endpoint(\"{endpoint}\")\n+            .credential(new AzureKeyCredential(\"184654c847d54432b8301a4b76f63045\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffa221f6731ef5ff38bc615689fef23db229a678"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4a579cd92bab814da5be392849c51d7fb2bca52", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c4a579cd92bab814da5be392849c51d7fb2bca52", "committedDate": "2020-05-26T22:37:18Z", "message": "address partial feedbacks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ad4f4932efb127e1e9f7cc9ad2e50552b530dbd", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3ad4f4932efb127e1e9f7cc9ad2e50552b530dbd", "committedDate": "2020-05-27T00:02:00Z", "message": "refactor for single document operation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04a88bd9689046b8edc559602335eba26743e125", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/04a88bd9689046b8edc559602335eba26743e125", "committedDate": "2020-05-27T04:33:17Z", "message": "make textAnalyticsErrorCode serializable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccfbd988d64104ad33e49928c0c1b94b87bf94b8", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ccfbd988d64104ad33e49928c0c1b94b87bf94b8", "committedDate": "2020-05-27T05:39:41Z", "message": "use AAD credentail instead of key credential and bring back create-as-needed resouces"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4ODczMDg1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#pullrequestreview-418873085", "createdAt": "2020-05-27T05:47:36Z", "commit": {"oid": "04a88bd9689046b8edc559602335eba26743e125"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNTo0NzozNlrOGa6P4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNTo0NzozNlrOGa6P4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3MDQ5OA==", "bodyText": "It would be good to show these examples with valid TextAnalyticsRequestOptions options now that we don't have the other overload.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11318#discussion_r430870498", "createdAt": "2020-05-27T05:47:36Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/batch/RecognizeLinkedEntitiesBatchStringDocuments.java", "diffHunk": "@@ -36,7 +36,7 @@ public static void main(String[] args) {\n \n         // Recognizing linked entities for each document in a batch of documents\n         AtomicInteger counter = new AtomicInteger();\n-        for (RecognizeLinkedEntitiesResult entitiesResult : client.recognizeLinkedEntitiesBatch(documents, \"en\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04a88bd9689046b8edc559602335eba26743e125"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "499de5043e0b48aed000b35ef7c97295411b3658", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/499de5043e0b48aed000b35ef7c97295411b3658", "committedDate": "2020-05-27T07:04:52Z", "message": "update samples with requestOptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6a5715ab28697b5b1f6d317749ce34bd72e832d", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f6a5715ab28697b5b1f6d317749ce34bd72e832d", "committedDate": "2020-05-27T07:42:40Z", "message": "update docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c702d44e0baf64c9ec0d9b50e10ab7cbe1e7f540", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c702d44e0baf64c9ec0d9b50e10ab7cbe1e7f540", "committedDate": "2020-05-27T18:05:13Z", "message": "refactor code"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4174, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}