{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MjAwNTAw", "number": 13840, "title": "Remove JavaBeans for getter and setter method", "bodyText": "When received getter and setter method, remove JavaBeans get and set if any", "createdAt": "2020-08-06T18:40:46Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13840", "merged": true, "mergeCommit": {"oid": "91fd7f6686909d7fbafc95f3cfc352b2073274df"}, "closed": true, "closedAt": "2020-08-07T00:39:02Z", "author": {"login": "sima-zhu"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8UR_AgH2gAyNDY0MjAwNTAwOjViMDMxMGJjZTFiMzE2NGIwY2IxZmFmNTdjNmQ4ZDQ5YjNiYjUwYzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8Y2JQAFqTQ2Mjk1MjU5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5b0310bce1b3164b0cb1faf57c6d8d49b3bb50c9", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5b0310bce1b3164b0cb1faf57c6d8d49b3bb50c9", "committedDate": "2020-08-06T18:39:17Z", "message": "Remove JavaBeans for getter and setter method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bab268e5db8049f1c20556268ec119455e4493cf", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bab268e5db8049f1c20556268ec119455e4493cf", "committedDate": "2020-08-06T18:44:16Z", "message": "Made changes to test more cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a20086c7e8040da7132ba4090cbfeafc5c77458f", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a20086c7e8040da7132ba4090cbfeafc5c77458f", "committedDate": "2020-08-06T19:57:39Z", "message": "Fix linting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyODkyNjMx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13840#pullrequestreview-462892631", "createdAt": "2020-08-06T21:34:48Z", "commit": {"oid": "a20086c7e8040da7132ba4090cbfeafc5c77458f"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMTozNDo0OFrOG9FCdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMTozNTo1M1rOG9FEcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY5ODg2OQ==", "bodyText": "Regex should be \"^get|^set\". Current regex will replace isPreset to ``isPre`.\njshell> System.out.println(\"isPreset\".replaceFirst(\"^get|set\", \"\"))\nisPre", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13840#discussion_r466698869", "createdAt": "2020-08-06T21:34:48Z", "author": {"login": "srnagar"}, "path": "sdk/core/azure-core-serializer-json-jackson/src/main/java/com/azure/core/serializer/json/jackson/JacksonJsonSerializer.java", "diffHunk": "@@ -93,16 +95,28 @@ public String convertMemberName(Member member) {\n \n         if (member instanceof Method) {\n             Method m = (Method) member;\n+            String methodNameWithoutJavaBeans = removePrefix(m.getName());\n             if (m.isAnnotationPresent(JsonIgnore.class)) {\n                 return null;\n             }\n             if (m.isAnnotationPresent(JsonProperty.class)) {\n                 String propertyName = m.getDeclaredAnnotation(JsonProperty.class).value();\n-                return CoreUtils.isNullOrEmpty(propertyName) ? m.getName() : propertyName;\n+                return CoreUtils.isNullOrEmpty(propertyName) ? methodNameWithoutJavaBeans : propertyName;\n             }\n-            return member.getName();\n+            return methodNameWithoutJavaBeans;\n         }\n \n         return null;\n     }\n+\n+    private String removePrefix(String methodName) {\n+        if (methodName == null || !(methodName.contains(\"get\") || methodName.contains(\"set\"))) {\n+            return methodName;\n+        }\n+        String noPrefix = methodName.replaceFirst(\"^get|set\", \"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a20086c7e8040da7132ba4090cbfeafc5c77458f"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY5OTM3OA==", "bodyText": "Add some tests where the property name also contains get and set.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13840#discussion_r466699378", "createdAt": "2020-08-06T21:35:53Z", "author": {"login": "srnagar"}, "path": "sdk/core/azure-core-serializer-json-jackson/src/test/java/com/azure/core/serializer/json/jackson/JacksonPropertyNameTests.java", "diffHunk": "@@ -98,10 +97,35 @@ public void testPropertyNameOnMethodName() throws NoSuchMethodException {\n             public String getHotelName() {\n                 return hotelName;\n             }\n+            public void setHotelName(String hotelName) {\n+                this.hotelName = hotelName;\n+            }\n         }\n \n-        Method m = LocalHotel.class.getDeclaredMethod(\"getHotelName\");\n-        assertEquals(\"getHotelName\", serializer.convertMemberName(m));\n+        Method getterM = LocalHotel.class.getDeclaredMethod(\"getHotelName\");\n+        assertEquals(\"hotelName\", serializer.convertMemberName(getterM));\n+        Method setterM = LocalHotel.class.getDeclaredMethod(\"setHotelName\", String.class);\n+        assertEquals(\"hotelName\", serializer.convertMemberName(setterM));\n+    }\n+\n+    @Test\n+    public void testPropertyNameOnMethodNameWithoutGetSet() throws NoSuchMethodException {\n+        class LocalHotel {\n+            String hotelName;\n+\n+            public String hotelName1() {\n+                return hotelName;\n+            }\n+\n+            public void hotelName2(String hotelName) {\n+                this.hotelName = hotelName;\n+            }\n+        }\n+\n+        Method getterM = LocalHotel.class.getDeclaredMethod(\"hotelName1\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a20086c7e8040da7132ba4090cbfeafc5c77458f"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyODkzNjQ0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13840#pullrequestreview-462893644", "createdAt": "2020-08-06T21:36:46Z", "commit": {"oid": "a20086c7e8040da7132ba4090cbfeafc5c77458f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "024ae40c210ff642a5c6ed436bef3a990bc0a68b", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/024ae40c210ff642a5c6ed436bef3a990bc0a68b", "committedDate": "2020-08-06T22:41:40Z", "message": "Leverage beans util"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "466d14d0f399585c9670d09ab5071cffc89bc79e", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/466d14d0f399585c9670d09ab5071cffc89bc79e", "committedDate": "2020-08-06T22:43:29Z", "message": "remove extra testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1b7c9b66be1475eb791a3312f6089416ec15130", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f1b7c9b66be1475eb791a3312f6089416ec15130", "committedDate": "2020-08-06T23:34:10Z", "message": "do not use name transformation for setter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9202f00145ae7d586f118e803f23e9e38c009254", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9202f00145ae7d586f118e803f23e9e38c009254", "committedDate": "2020-08-06T23:39:17Z", "message": "Fixed a test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3ead9c3a98104f7fdbde8c7ece4c0f96d703103", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b3ead9c3a98104f7fdbde8c7ece4c0f96d703103", "committedDate": "2020-08-06T23:44:39Z", "message": "Fixed failed tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2fb3bb0811bad91f4aba409b3331d6106f04a78", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b2fb3bb0811bad91f4aba409b3331d6106f04a78", "committedDate": "2020-08-06T23:51:22Z", "message": "Added more test cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyOTUyNTk5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13840#pullrequestreview-462952599", "createdAt": "2020-08-06T23:58:24Z", "commit": {"oid": "b2fb3bb0811bad91f4aba409b3331d6106f04a78"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 841, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}