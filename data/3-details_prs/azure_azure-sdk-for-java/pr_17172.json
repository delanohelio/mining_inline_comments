{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1Mzg5OTU1", "number": 17172, "title": "Fix retry policy for GoneException when receiving 410/0 from Service", "bodyText": "", "createdAt": "2020-11-04T13:36:00Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17172", "merged": true, "mergeCommit": {"oid": "21bd5265287e5dfc8f578c361f0e135b41c18399"}, "closed": true, "closedAt": "2020-11-04T21:15:05Z", "author": {"login": "FabianMeiswinkel"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZN2jvAH2gAyNTE1Mzg5OTU1OjhkZDY5NmFjNzE5ODI0MzdlMWVjMTZmNWI4ZmZhMjA2OThhYjViOTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZTF9jgFqTUyMzY3ODYxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8dd696ac71982437e1ec16f5b8ffa20698ab5b97", "author": {"user": {"login": "FabianMeiswinkel", "name": "Fabian Meiswinkel"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8dd696ac71982437e1ec16f5b8ffa20698ab5b97", "committedDate": "2020-11-04T13:33:42Z", "message": "Fix retry policy for GoneException when writes fail with 410/0 from Service"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNTcxMjMx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17172#pullrequestreview-523571231", "createdAt": "2020-11-04T17:14:57Z", "commit": {"oid": "8dd696ac71982437e1ec16f5b8ffa20698ab5b97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNjE1ODQ0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17172#pullrequestreview-523615844", "createdAt": "2020-11-04T18:11:27Z", "commit": {"oid": "8dd696ac71982437e1ec16f5b8ffa20698ab5b97"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxODoxMToyN1rOHtj_Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxODoxMToyN1rOHtj_Xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzUzNzYzMA==", "bodyText": "Should we be more specific here? only when substatus code  = 0, then retry the write operation.\nMaybe we can have a specific exception type for 410/0, similar to split/migration exception", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17172#discussion_r517537630", "createdAt": "2020-11-04T18:11:27Z", "author": {"login": "xinlian12"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/directconnectivity/HttpTransportClient.java", "diffHunk": "@@ -863,15 +863,19 @@ static String getHeader(String[] names, String[] values, String name) {\n                                 break;\n                             } else {\n                                 // Have the request URL in the exception message for debugging purposes.\n-                                exception = new GoneException(\n+                                GoneException goneExceptionFromService = new GoneException(\n                                         String.format(\n                                                 RMResources.ExceptionMessage,\n                                                 RMResources.Gone),\n                                         response.headers(),\n                                         request.uri());\n+                                goneExceptionFromService.setIsBasedOn410ResponseFromService();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8dd696ac71982437e1ec16f5b8ffa20698ab5b97"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNjc4NjE2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17172#pullrequestreview-523678616", "createdAt": "2020-11-04T19:40:03Z", "commit": {"oid": "8dd696ac71982437e1ec16f5b8ffa20698ab5b97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 207, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}