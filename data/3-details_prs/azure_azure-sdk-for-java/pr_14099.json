{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3Nzc5OTAz", "number": 14099, "title": "Mgmt: Migrate Redis", "bodyText": "", "createdAt": "2020-08-14T05:36:36Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14099", "merged": true, "mergeCommit": {"oid": "fb7b067b68f37898f686b8170b29886449f9f68a"}, "closed": true, "closedAt": "2020-08-17T08:00:51Z", "author": {"login": "ChenTanyi"}, "timelineItems": {"totalCount": 45, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9YgCvgH2gAyNDY3Nzc5OTAzOmJiMWEzZTZiY2VjYTdhYTcxYmQwYzVlNjZlYzgwZGM3MjBiYWIyNWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc_rO2dgH2gAyNDY3Nzc5OTAzOjVkOWVjNjUxN2Y5N2IyMmNkOWE5NDg3Y2FjOTVkM2MwOTc3NzA2ZTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bb1a3e6bceca7aa71bd0c5e66ec80dc720bab25c", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bb1a3e6bceca7aa71bd0c5e66ec80dc720bab25c", "committedDate": "2020-08-10T02:08:11Z", "message": "move redis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7aabf98b75e80dc17eb360ad3d115f5dc188ccb3", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7aabf98b75e80dc17eb360ad3d115f5dc188ccb3", "committedDate": "2020-08-10T02:11:01Z", "message": "update pom"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65ed007157dcf03525b3e6ff52c7a005618d61c9", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/65ed007157dcf03525b3e6ff52c7a005618d61c9", "committedDate": "2020-08-10T02:12:50Z", "message": "add versioning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8e0518ee7304db04a40f50a7dc74a8f94ce91f0", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f8e0518ee7304db04a40f50a7dc74a8f94ce91f0", "committedDate": "2020-08-10T02:13:38Z", "message": "move to models"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fdc84270615a655888240b27bd9d1d31ea93d20", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3fdc84270615a655888240b27bd9d1d31ea93d20", "committedDate": "2020-08-10T02:16:23Z", "message": "update api-specs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55b2077f80e84cebf879db9d26f496d198bfaa8c", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/55b2077f80e84cebf879db9d26f496d198bfaa8c", "committedDate": "2020-08-10T02:23:49Z", "message": "rename package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "805d34f29b3177233af5da074fb767d4acbc90f0", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/805d34f29b3177233af5da074fb767d4acbc90f0", "committedDate": "2020-08-10T02:25:31Z", "message": "generate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76fad3b5203971a53496524fa844474a205a1666", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/76fad3b5203971a53496524fa844474a205a1666", "committedDate": "2020-08-10T02:26:14Z", "message": "move manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3aa731d1f617fad3f7fc96a86c1547a0d804f872", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3aa731d1f617fad3f7fc96a86c1547a0d804f872", "committedDate": "2020-08-10T02:31:27Z", "message": "update redis manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da1d9717ea7148550ec35fda786a59989053d3cf", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/da1d9717ea7148550ec35fda786a59989053d3cf", "committedDate": "2020-08-10T02:40:08Z", "message": "remove Beta and Method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9b42589e891416ca9cfeb381f0263bb1ca07f48", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b9b42589e891416ca9cfeb381f0263bb1ca07f48", "committedDate": "2020-08-10T02:42:47Z", "message": "fix name error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e31a135b8d14492208f4976dc5409f0ae8a2120d", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e31a135b8d14492208f4976dc5409f0ae8a2120d", "committedDate": "2020-08-10T02:44:31Z", "message": "fix models compile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37ac2d03f598d31715e856e64d99d7f0f12494ac", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/37ac2d03f598d31715e856e64d99d7f0f12494ac", "committedDate": "2020-08-10T03:03:16Z", "message": "fix some compile error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb4d4b24b9a318aceb483da94304033684ba3a2d", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb4d4b24b9a318aceb483da94304033684ba3a2d", "committedDate": "2020-08-10T03:17:56Z", "message": "fix impl compile error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d27bf65ebe623c27c06b5fea4637dca814280635", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d27bf65ebe623c27c06b5fea4637dca814280635", "committedDate": "2020-08-10T05:25:22Z", "message": "fix test compile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9d86b98cd572062137a5b81a0dc19875cb17d83", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c9d86b98cd572062137a5b81a0dc19875cb17d83", "committedDate": "2020-08-10T06:02:33Z", "message": "ChildResourcesCached to flux"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d13a2cdcdadfc0893fa02c9c156bff1274e16d81", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d13a2cdcdadfc0893fa02c9c156bff1274e16d81", "committedDate": "2020-08-10T06:03:04Z", "message": "remove redundant"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "200017748795aa63824775adb3084bc586afcd34", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/200017748795aa63824775adb3084bc586afcd34", "committedDate": "2020-08-10T06:10:33Z", "message": "fix some checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f86b798d41aa6ad1c4e9e0aca9696109186dbe1", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9f86b798d41aa6ad1c4e9e0aca9696109186dbe1", "committedDate": "2020-08-10T06:17:33Z", "message": "update impl of child resource"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f26f0b871d64630753d75c1c7044ec61384cb590", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f26f0b871d64630753d75c1c7044ec61384cb590", "committedDate": "2020-08-10T06:42:05Z", "message": "fix map with null"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c894d491662925517fd688398aa3cb446fe1283b", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c894d491662925517fd688398aa3cb446fe1283b", "committedDate": "2020-08-12T02:37:26Z", "message": "use lazy load for extern child resources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d31aa1a63e1ad118631d75bc33e334c3d681a11", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8d31aa1a63e1ad118631d75bc33e334c3d681a11", "committedDate": "2020-08-12T10:15:04Z", "message": "update redis cache LRO"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17aac58aa526afb5ac7ec46981fef0f30080d0a1", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/17aac58aa526afb5ac7ec46981fef0f30080d0a1", "committedDate": "2020-08-12T10:15:47Z", "message": "update session-records"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b045e84702d49303f790f07c8207fd13ba723517", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b045e84702d49303f790f07c8207fd13ba723517", "committedDate": "2020-08-13T05:09:18Z", "message": "regen redis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85d8ca86dd006e3f8d0c489405b52b4fb892e026", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/85d8ca86dd006e3f8d0c489405b52b4fb892e026", "committedDate": "2020-08-13T05:11:26Z", "message": "format code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "370c5d5179f65cd36b553b7929fbd788157cc99b", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/370c5d5179f65cd36b553b7929fbd788157cc99b", "committedDate": "2020-08-13T05:19:56Z", "message": "Merge branch 'master' into redis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23db43335c358422a3ebc9d3607183d4c704807b", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/23db43335c358422a3ebc9d3607183d4c704807b", "committedDate": "2020-08-13T07:59:10Z", "message": "add redis to azure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a059625b6f29213835f8044730f2d745270e5f23", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a059625b6f29213835f8044730f2d745270e5f23", "committedDate": "2020-08-13T07:59:44Z", "message": "update session-records"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcbe46284e9b832048df4573788bbb0fb07227f5", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/dcbe46284e9b832048df4573788bbb0fb07227f5", "committedDate": "2020-08-13T08:03:22Z", "message": "move samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e70706b195ef2cd097e19fb506dcfab58434703", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1e70706b195ef2cd097e19fb506dcfab58434703", "committedDate": "2020-08-13T08:09:18Z", "message": "fix compile error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "257df00719312414c704196e477bb537724b0418", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/257df00719312414c704196e477bb537724b0418", "committedDate": "2020-08-13T09:18:59Z", "message": "update session-records"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64bd6203b00c3d2bba50323cc8549261a079a412", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/64bd6203b00c3d2bba50323cc8549261a079a412", "committedDate": "2020-08-14T02:06:02Z", "message": "add non async listChildResources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6e3ea3d189b6394ed8af251039acbbd818260ff", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b6e3ea3d189b6394ed8af251039acbbd818260ff", "committedDate": "2020-08-14T02:06:08Z", "message": "revert 9f86b798 in vm impl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b579efab038659940d140c05f484adb53fe0094b", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b579efab038659940d140c05f484adb53fe0094b", "committedDate": "2020-08-14T02:06:09Z", "message": "update lincense"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26b74c9eaf25095dea8241ff1a52419d5ffad464", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/26b74c9eaf25095dea8241ff1a52419d5ffad464", "committedDate": "2020-08-14T05:35:38Z", "message": "fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11d300705626d244748463c253d137b7511f6df6", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/11d300705626d244748463c253d137b7511f6df6", "committedDate": "2020-08-14T05:47:36Z", "message": "Merge branch 'master' into redis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a488fc5d2af2bd06a0d94f361e6126d5f0db9e3", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7a488fc5d2af2bd06a0d94f361e6126d5f0db9e3", "committedDate": "2020-08-14T05:48:16Z", "message": "update version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d5d06e4216a8d57fd76a04fa4c492be4fefd86a", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6d5d06e4216a8d57fd76a04fa4c492be4fefd86a", "committedDate": "2020-08-14T06:07:40Z", "message": "add readme and changelog"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MzQyNDA2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14099#pullrequestreview-467342406", "createdAt": "2020-08-14T06:46:07Z", "commit": {"oid": "c894d491662925517fd688398aa3cb446fe1283b"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwNjo0NjowOFrOHApaSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwNjo1NjozOFrOHApotw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDQ0MDUyMQ==", "bodyText": "Seems better to put to a shared method like ensureCollectionLoaded etc.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14099#discussion_r470440521", "createdAt": "2020-08-14T06:46:08Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/resourcemanager/azure-resourcemanager-redis/src/main/java/com/azure/resourcemanager/redis/implementation/RedisPatchSchedulesImpl.java", "diffHunk": "@@ -25,15 +26,17 @@\n         RedisCache> {\n     // Currently Redis Cache has one PatchSchedule\n     private final String patchScheduleName = \"default\";\n+    private boolean load = false;\n \n     RedisPatchSchedulesImpl(RedisCacheImpl parent) {\n         super(parent, parent.taskGroup(), \"PatchSchedule\");\n-        if (parent.id() != null) {\n-            this.cacheCollection();\n-        }\n     }\n \n     Map<String, RedisPatchSchedule> patchSchedulesAsMap() {\n+        if (!load) {\n+            load = true;\n+            cacheCollection();\n+        }\n         Map<String, RedisPatchSchedule> result = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c894d491662925517fd688398aa3cb446fe1283b"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDQ0MTA5MQ==", "bodyText": "Is these method guaranteed to be called only by sync method (at least from us)?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14099#discussion_r470441091", "createdAt": "2020-08-14T06:47:48Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/resourcemanager/azure-resourcemanager-redis/src/main/java/com/azure/resourcemanager/redis/implementation/RedisFirewallRulesImpl.java", "diffHunk": "@@ -41,14 +44,26 @@\n     }\n \n     public void addRule(RedisFirewallRuleImpl rule) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c894d491662925517fd688398aa3cb446fe1283b"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDQ0NDIxNQ==", "bodyText": "Another fake LRO?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14099#discussion_r470444215", "createdAt": "2020-08-14T06:56:38Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/resourcemanager/azure-resourcemanager-redis/src/main/java/com/azure/resourcemanager/redis/implementation/RedisCacheImpl.java", "diffHunk": "@@ -568,23 +568,27 @@ public RedisCacheImpl update() {\n \n     @Override\n     public Mono<RedisCache> updateResourceAsync() {\n-        final RedisCacheImpl self = this;\n+        updateParameters.withTags(this.inner().tags());\n         return this.manager().inner().getRedis().updateAsync(resourceGroupName(), name(), updateParameters)\n                 .map(innerToFluentMap(this))\n-                .doOnNext(redisCache -> {\n-                    while (!redisCache.provisioningState().equalsIgnoreCase(\"Succeeded\")) {\n-                        SdkContext.sleep(30 * 1000);\n-\n-                        RedisResourceInner innerResource = self.manager().inner().getRedis().getByResourceGroup(resourceGroupName(), name());\n-                        ((RedisCacheImpl) redisCache).setInner(innerResource);\n-                        self.setInner(innerResource);\n-                        self.patchScheduleAdded = false;\n+                .filter(redisCache -> !redisCache.provisioningState().equalsIgnoreCase(ProvisioningState.SUCCEEDED.toString()))\n+                .flatMap(redisCache -> {\n+                    SdkContext.sleep(30 * 1000);\n+                    this.patchScheduleAdded = false;\n+                    return this.manager().inner().getRedis().getByResourceGroupAsync(resourceGroupName(), name())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d31aa1a63e1ad118631d75bc33e334c3d681a11"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MzQ4MTg4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14099#pullrequestreview-467348188", "createdAt": "2020-08-14T06:59:29Z", "commit": {"oid": "8d31aa1a63e1ad118631d75bc33e334c3d681a11"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwNjo1OToyOVrOHAps_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwNjo1OToyOVrOHAps_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDQ0NTMwOQ==", "bodyText": "Should we use delaySubscription + repeat?\nhttps://github.com/Azure/azure-sdk-for-java/blob/master/sdk/core/azure-core/src/main/java/com/azure/core/util/polling/PollerFlux.java#L214-L238", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14099#discussion_r470445309", "createdAt": "2020-08-14T06:59:29Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/resourcemanager/azure-resourcemanager-redis/src/main/java/com/azure/resourcemanager/redis/implementation/RedisCacheImpl.java", "diffHunk": "@@ -568,23 +568,27 @@ public RedisCacheImpl update() {\n \n     @Override\n     public Mono<RedisCache> updateResourceAsync() {\n-        final RedisCacheImpl self = this;\n+        updateParameters.withTags(this.inner().tags());\n         return this.manager().inner().getRedis().updateAsync(resourceGroupName(), name(), updateParameters)\n                 .map(innerToFluentMap(this))\n-                .doOnNext(redisCache -> {\n-                    while (!redisCache.provisioningState().equalsIgnoreCase(\"Succeeded\")) {\n-                        SdkContext.sleep(30 * 1000);\n-\n-                        RedisResourceInner innerResource = self.manager().inner().getRedis().getByResourceGroup(resourceGroupName(), name());\n-                        ((RedisCacheImpl) redisCache).setInner(innerResource);\n-                        self.setInner(innerResource);\n-                        self.patchScheduleAdded = false;\n+                .filter(redisCache -> !redisCache.provisioningState().equalsIgnoreCase(ProvisioningState.SUCCEEDED.toString()))\n+                .flatMap(redisCache -> {\n+                    SdkContext.sleep(30 * 1000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d31aa1a63e1ad118631d75bc33e334c3d681a11"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MzQ5MDA1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14099#pullrequestreview-467349005", "createdAt": "2020-08-14T07:01:10Z", "commit": {"oid": "6d5d06e4216a8d57fd76a04fa4c492be4fefd86a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6eab09e50b668c5c520534c459eca5bee0b7e620", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6eab09e50b668c5c520534c459eca5bee0b7e620", "committedDate": "2020-08-14T07:53:31Z", "message": "add ensureCollectionLoaded"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2d7de1c034a2200cb3d177910f1e0de631fe42a", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c2d7de1c034a2200cb3d177910f1e0de631fe42a", "committedDate": "2020-08-14T08:13:04Z", "message": "delete first sleep in LRO"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22625df4e6bcd641f8267ac5c5f9e9c51724f6e1", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/22625df4e6bcd641f8267ac5c5f9e9c51724f6e1", "committedDate": "2020-08-14T09:07:54Z", "message": "set inner in LRO"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d9ec6517f97b22cd9a9487cac95d3c0977706e2", "author": {"user": {"login": "ChenTanyi", "name": "Tanyi Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5d9ec6517f97b22cd9a9487cac95d3c0977706e2", "committedDate": "2020-08-17T05:05:27Z", "message": "Merge branch 'master' into redis"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 493, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}