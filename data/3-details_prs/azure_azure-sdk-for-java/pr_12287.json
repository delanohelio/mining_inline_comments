{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NzUyMjUx", "number": 12287, "title": "Feature/migrate-spring-data-cosmos", "bodyText": "Migrate source code and unit tests from repo spring-data-cosmos here.\nChange the dependency in azure-spring-boot of spring-data-cosmos from external to current.\nKeep several dependency versions different from SDK including\n\nspring_org.springframework:spring-web\nspring_com.microsoft.azure:azure-cosmos\nspring_org.springframework.boot:spring-boot-starter-test", "createdAt": "2020-06-17T10:20:40Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287", "merged": true, "mergeCommit": {"oid": "35d91545eda07b2bf86a2345a23f46dd52b786e3"}, "closed": true, "closedAt": "2020-06-25T12:37:34Z", "author": {"login": "yiliuTo"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsMNrWgFqTQzMjU1ODcyOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcud632gFqTQzNjg4MDYxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNTU4NzI5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#pullrequestreview-432558729", "createdAt": "2020-06-17T16:12:33Z", "commit": {"oid": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjoxMjozM1rOGlNB8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjoxMjozM1rOGlNB8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY2Mzk4Nw==", "bodyText": "Shouldn't this be using the latest GA version available which is 1.0.7?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441663987", "createdAt": "2020-06-17T16:12:33Z", "author": {"login": "alzimmermsft"}, "path": "sdk/spring/azure-spring-boot/pom.xml", "diffHunk": "@@ -251,6 +251,12 @@\n       <version>1.1.1</version> <!-- {x-version-update;pl.pragmatists:JUnitParams;external_dependency} -->\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>com.azure</groupId>\n+      <artifactId>azure-identity</artifactId>\n+      <version>1.0.4</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNjQ4Mzg2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#pullrequestreview-432648386", "createdAt": "2020-06-17T18:05:22Z", "commit": {"oid": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODowNToyMlrOGlRLDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODowNjoxM1rOGlRM4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczMTg1NA==", "bodyText": "There is no DocumentDbRepository. That is in old spring-data-cosmosdb SDK.\nThis should extend CosmosRepository or ReactiveCosmosRepository", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441731854", "createdAt": "2020-06-17T18:05:22Z", "author": {"login": "kushagraThapar"}, "path": "sdk/spring/azure-spring-data-cosmosdb/QueryPartitionedCollection.md", "diffHunk": "@@ -0,0 +1,58 @@\n+### How to Query Partitioned Azure Cosmos DB Collection\n+\n+With Azure Cosmos DB, you can configure [partition key](https://docs.microsoft.com/en-us/azure/cosmos-db/partition-data) for your collection.\n+\n+Below is an example about how to query partitioned collection with this spring data module.\n+\n+#### Example \n+\n+Given a document entity structure:\n+```\n+    @Document\n+    @Data\n+    @AllArgsConstructor\n+    public class Address {\n+        @Id\n+        String postalCode;\n+        String street;\n+        @PartitionKey\n+        String city;\n+    }\n+```\n+\n+Write the repository interface:\n+```\n+    @Repository\n+    public interface AddressRepository extends DocumentDbRepository<Address, String> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczMjMyMw==", "bodyText": "What is the use of this file ?\nThis should be merged with README file, or move this topic to spring-data-cosmosdb developer's guide : https://docs.microsoft.com/en-us/azure/developer/java/spring-framework/how-to-guides-spring-data-cosmosdb", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441732323", "createdAt": "2020-06-17T18:06:13Z", "author": {"login": "kushagraThapar"}, "path": "sdk/spring/azure-spring-data-cosmosdb/QueryPartitionedCollection.md", "diffHunk": "@@ -0,0 +1,58 @@\n+### How to Query Partitioned Azure Cosmos DB Collection", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNTUxMzE2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#pullrequestreview-432551316", "createdAt": "2020-06-17T16:03:02Z", "commit": {"oid": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjowMzowMlrOGlMrQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNjowMzowMlrOGlMrQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY1ODE3OA==", "bodyText": "First, spring_ only dependencies should be infrequent or in rare cases. The org.springframework versions here have been updated as part of another PR which has been approved. I recommended rebasing after that gets submitted. Second, the com.microsoft.azure:azure-cosmos dependency was added as part of this Spring PR several weeks back and apparently nothing previously used it. So the spring_com.microsoft.azure:azure-cosmos is unnecessary and the existing dependency version should be updated. In the future, I'm like to recommend either grep/findstr/search within whatever IDE is being used. If a dependency is an existing one, then updating that is the preferred method over declaring spring specific dependencies which may require contacting another library owner and those can be found in the CODEOWNERS  file", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441658178", "createdAt": "2020-06-17T16:03:02Z", "author": {"login": "JimSuplizio"}, "path": "eng/versioning/external_dependencies.txt", "diffHunk": "@@ -251,3 +263,9 @@ storage_com.microsoft.azure:azure-storage;8.4.0\n spring_io.micrometer:micrometer-core;1.3.0\n spring_io.micrometer:micrometer-registry-azure-monitor;1.3.0\n spring_com.microsoft.azure:azure;1.34.0\n+\n+#sdk\\spring\\spring-data-cosmosdb\\pom.xml\n+spring_org.springframework:spring-web;5.2.6.RELEASE\n+spring_com.microsoft.azure:azure-cosmos;3.7.3\n+spring_org.springframework.boot:spring-boot-starter-test;2.3.0.RELEASE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8"}, "originalPosition": 72}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8", "committedDate": "2020-06-17T10:13:16Z", "message": "add changelog"}, "afterCommit": {"oid": "1a0201e742c403cdf9eae6bccdc34374d24e8706", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1a0201e742c403cdf9eae6bccdc34374d24e8706", "committedDate": "2020-06-18T02:24:44Z", "message": "modify for dependency version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb467c4287de75ea93169732e4f6edfad7616d5a", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb467c4287de75ea93169732e4f6edfad7616d5a", "committedDate": "2020-06-22T05:47:32Z", "message": "apply pr: Deliver multiple KeyVault support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cd2c7d1c89e431dcefa9c4327cdb03d4963a985", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3cd2c7d1c89e431dcefa9c4327cdb03d4963a985", "committedDate": "2020-06-22T05:48:27Z", "message": "migrate src files from spring-data-cosmosdb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91dd74c348dba7bfe91558b3ff339f793995ba4a", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/91dd74c348dba7bfe91558b3ff339f793995ba4a", "committedDate": "2020-06-22T05:48:27Z", "message": "modify pom and dependency versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "976d6973640012d86d63346654d0bd1356e4b91a", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/976d6973640012d86d63346654d0bd1356e4b91a", "committedDate": "2020-06-22T05:48:28Z", "message": "add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d6b0983644c7c0e4734c2a65fea35c0fdcfe93c", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1d6b0983644c7c0e4734c2a65fea35c0fdcfe93c", "committedDate": "2020-06-22T05:48:29Z", "message": "modify for compiler errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4fd2df0e7fb9defebf14961cd3dbd98b92b0799", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d4fd2df0e7fb9defebf14961cd3dbd98b92b0799", "committedDate": "2020-06-22T05:48:29Z", "message": "modify for checkstyle errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1e7aafc24ea003c93a956020587de9822be1826", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d1e7aafc24ea003c93a956020587de9822be1826", "committedDate": "2020-06-22T05:49:57Z", "message": "update underlying library versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d404db0ef065b45d655a67b38b122fe89679904", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4d404db0ef065b45d655a67b38b122fe89679904", "committedDate": "2020-06-22T05:50:23Z", "message": "add changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89776ce33644f797454868260d56a96f51ad7772", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/89776ce33644f797454868260d56a96f51ad7772", "committedDate": "2020-06-22T05:50:23Z", "message": "modify for dependency version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2543cb65acce54dd92bebd239281ad06ac056f3", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f2543cb65acce54dd92bebd239281ad06ac056f3", "committedDate": "2020-06-22T05:50:24Z", "message": "modify readme title and add dependency for java11"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97f6ca204315212c650a5e9652569761ea879d7c", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/97f6ca204315212c650a5e9652569761ea879d7c", "committedDate": "2020-06-22T05:50:24Z", "message": "add code owner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53fa59e422b904755f538f5c64b5ab9a017f5c7e", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/53fa59e422b904755f538f5c64b5ab9a017f5c7e", "committedDate": "2020-06-22T05:50:25Z", "message": "add debug for pipeline error temporarily"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "699ba12f666fa949181ee6d0af2c46c5d1720d0c", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/699ba12f666fa949181ee6d0af2c46c5d1720d0c", "committedDate": "2020-06-22T05:50:25Z", "message": "add dependency in cosmos for running java-core-ci"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce265b70bd7401734c058752829b4fac81845b25", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ce265b70bd7401734c058752829b4fac81845b25", "committedDate": "2020-06-22T05:52:08Z", "message": "move spring-data-cosmosdb to sdk/cosmos"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0e022d70c1962c3c41aa18e3b33727569819d6ec", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0e022d70c1962c3c41aa18e3b33727569819d6ec", "committedDate": "2020-06-18T09:47:17Z", "message": "add dependency in cosmos for running java-core-ci"}, "afterCommit": {"oid": "ce265b70bd7401734c058752829b4fac81845b25", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ce265b70bd7401734c058752829b4fac81845b25", "committedDate": "2020-06-22T05:52:08Z", "message": "move spring-data-cosmosdb to sdk/cosmos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abfa961210570d902bd3d90426e04e30babcb7c3", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/abfa961210570d902bd3d90426e04e30babcb7c3", "committedDate": "2020-06-22T06:17:29Z", "message": "fix for the pipeline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2b8ba1d97179200349a39d6a6cab362fbd4f59b", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e2b8ba1d97179200349a39d6a6cab362fbd4f59b", "committedDate": "2020-06-22T08:18:01Z", "message": "add spring-data-cosmosdb as external-dependency for pipeline"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c659f9882428796b50820b593fae470f652f97e7", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c659f9882428796b50820b593fae470f652f97e7", "committedDate": "2020-06-22T07:24:29Z", "message": "add spring-data-cosmosdb as external-dependency for pipeline"}, "afterCommit": {"oid": "e2b8ba1d97179200349a39d6a6cab362fbd4f59b", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e2b8ba1d97179200349a39d6a6cab362fbd4f59b", "committedDate": "2020-06-22T08:18:01Z", "message": "add spring-data-cosmosdb as external-dependency for pipeline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "826c8eae2a0cd016fc9fe87c647a1493552b767d", "author": {"user": {"login": "yiliuTo", "name": "Yi Liu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/826c8eae2a0cd016fc9fe87c647a1493552b767d", "committedDate": "2020-06-22T09:18:47Z", "message": "modify codeowner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MzcyMTA4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#pullrequestreview-435372108", "createdAt": "2020-06-23T01:07:32Z", "commit": {"oid": "826c8eae2a0cd016fc9fe87c647a1493552b767d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwMTowNzozM1rOGnV1xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwMTowNzozM1rOGnV1xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkwNTQ3Nw==", "bodyText": "@kushagraThapar, as per our discussion earlier we'll let this get checked in like this but part of the v4 updates will be to rename the groupId and change the artifactId to match the naming convention. Also, the work item you're creating will also encompass updating the versions to match this update to v4 cosmos which will update the major to 3.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r443905477", "createdAt": "2020-06-23T01:07:33Z", "author": {"login": "JimSuplizio"}, "path": "eng/versioning/version_client.txt", "diffHunk": "@@ -55,7 +55,7 @@ com.microsoft.azure:azure-servicebus-jms-spring-boot-starter;2.3.2;2.3.3-beta.1\n com.microsoft.azure:azure-spring-boot-metrics-starter;2.3.2;2.3.3-beta.1\n com.microsoft.azure:azure-spring-boot-tests;2.3.2;2.3.3-beta.1\n com.microsoft.azure:azure-spring-boot-test-core;2.3.2;2.3.3-beta.1\n-\n+com.microsoft.azure:spring-data-cosmosdb;2.3.0;2.3.1-beta.1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "826c8eae2a0cd016fc9fe87c647a1493552b767d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2ODgwNjE0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#pullrequestreview-436880614", "createdAt": "2020-06-24T17:58:09Z", "commit": {"oid": "826c8eae2a0cd016fc9fe87c647a1493552b767d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3066, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}