{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNDAyMzkx", "number": 13756, "title": "Updated CosmosConfig to take database name", "bodyText": "Updated CosmosConfig to take database name.\nRemoved CosmosClientConfig.\nReplaced CosmosClientConfig with CosmosClientBuilder.\nUpdated readme, and samples with new architecture\n\nGist of this PR:\nWe don't need 2 separate config classes to customize AbstractCosmosConfiguration. \nWe just need 1 class - CosmosConfig \nAnd we can rely on CosmosClientBuilder bean directly to provide all the necessary configuration needed for CosmosAsyncClient", "createdAt": "2020-08-03T21:19:27Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13756", "merged": true, "mergeCommit": {"oid": "8ae28b1b816fba9b22dd887e7b662e8dd0a12235"}, "closed": true, "closedAt": "2020-08-04T16:45:12Z", "author": {"login": "kushagraThapar"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7Yv-MAH2gAyNDYyNDAyMzkxOmYzZGY5ODM4YWFmZWQ3ODQ3NjFhN2UyZWFmOGRmN2ZjNThkMDIxNWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7galmgH2gAyNDYyNDAyMzkxOjkzMTYyOGRiZGIzY2ZjMGQ4ZDM5NDYyMTg1MGU5MTc5NmQ2NzhhNzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f3df9838aafed784761a7e2eaf8df7fc58d0215b", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f3df9838aafed784761a7e2eaf8df7fc58d0215b", "committedDate": "2020-08-03T21:17:44Z", "message": "Updated CosmosConfig to take database name. Removed CosmosClientConfig, replaced with CosmosClientBuilder. Updated readme, and samples with new architecture"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNDQyNzc5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13756#pullrequestreview-460442779", "createdAt": "2020-08-04T01:48:42Z", "commit": {"oid": "f3df9838aafed784761a7e2eaf8df7fc58d0215b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMTo0ODo0M1rOG7OMaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwMTo1MzozNlrOG7ORzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc1MTcyMQ==", "bodyText": "Do we need the database here? in the previous design, multiple databases can use the same CosmosConfig instance, if we add the database here, each database does each database have to create its own CosmosConfig?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13756#discussion_r464751721", "createdAt": "2020-08-04T01:48:43Z", "author": {"login": "zhoufenqin"}, "path": "sdk/cosmos/azure-spring-data-cosmos/src/main/java/com/azure/spring/data/cosmos/config/CosmosConfig.java", "diffHunk": "@@ -11,22 +11,36 @@\n  */\n public class CosmosConfig {\n \n+    private final String database;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3df9838aafed784761a7e2eaf8df7fc58d0215b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc1MzEwMw==", "bodyText": "As I mentioned before, here we create CosmosConfig instance with database name, can we use the same instance to create different cosmos template? see secondaryReactiveCosmosTemplate and secondaryReactiveCosmosTemplate1, we use the same CosmosConfig instance", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13756#discussion_r464753103", "createdAt": "2020-08-04T01:53:36Z", "author": {"login": "zhoufenqin"}, "path": "sdk/cosmos/azure-spring-data-cosmos/src/samples/java/com/azure/cosmos/multidatasource/DatabaseConfiguration.java", "diffHunk": "@@ -96,16 +89,17 @@ public ReactiveCosmosTemplate primaryReactiveCosmosTemplate(CosmosAsyncClient co\n \n     // -------------------------Second Cosmos Client for Secondary Cosmos Account---------------------------\n     @Bean(\"secondaryCosmosAsyncClient\")\n-    public CosmosAsyncClient getCosmosAsyncClient(CosmosClientConfig secondaryCosmosClientConfig) {\n-        return CosmosFactory.createCosmosAsyncClient(secondaryCosmosClientConfig);\n+    public CosmosAsyncClient getCosmosAsyncClient(CosmosClientBuilder secondaryCosmosClientBuilder) {\n+        return CosmosFactory.createCosmosAsyncClient(secondaryCosmosClientBuilder);\n     }\n \n     @Bean(\"secondaryCosmosConfig\")\n     public CosmosConfig getCosmosConfig() {\n         return CosmosConfig.builder()\n-            .enableQueryMetrics(true)\n-            .responseDiagnosticsProcessor(new ResponseDiagnosticsProcessorImplementation())\n-            .build();\n+                           .enableQueryMetrics(true)\n+                           .responseDiagnosticsProcessor(new ResponseDiagnosticsProcessorImplementation())\n+                           .database(secondaryProperties.getDatabase())\n+                           .build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3df9838aafed784761a7e2eaf8df7fc58d0215b"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9b4b4547565a536c451a8d312b857cd340f5115", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f9b4b4547565a536c451a8d312b857cd340f5115", "committedDate": "2020-08-04T05:47:48Z", "message": "Removed database property from CosmosConfig"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNTE5MTE5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13756#pullrequestreview-460519119", "createdAt": "2020-08-04T06:06:50Z", "commit": {"oid": "f9b4b4547565a536c451a8d312b857cd340f5115"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "931628dbdb3cfc0d8d394621850e91796d678a71", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/931628dbdb3cfc0d8d394621850e91796d678a71", "committedDate": "2020-08-04T06:13:37Z", "message": "Removed unused imports"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 956, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}