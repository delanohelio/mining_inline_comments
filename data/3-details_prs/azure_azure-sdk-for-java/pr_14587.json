{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1MjgzODQ1", "number": 14587, "title": "SB Track2 : SubQueue Implementation", "bodyText": "Implement SubQueue for  deadletter queue\nfixes #14518", "createdAt": "2020-08-28T09:07:02Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587", "merged": true, "mergeCommit": {"oid": "d0ff18ecfb612baab3b99c82d1e566ef3377858a"}, "closed": true, "closedAt": "2020-08-31T20:50:08Z", "author": {"login": "hemanttanwar"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDRPNAAH2gAyNDc1MjgzODQ1OjRlNWM0ZTY0YmQ4YWY1ZDQxMDliY2Y1ZmRlNWFiZTI3MjFiMmI0MTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEYnjBgH2gAyNDc1MjgzODQ1OjU1ZjVkZGU0MzAyMzY1ZDI1NGNmNTQ5YjM0NTFkZTEyMzE1ODIzZmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411", "committedDate": "2020-08-28T09:04:00Z", "message": "SubQueue Implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NzM4Njgz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#pullrequestreview-477738683", "createdAt": "2020-08-28T13:42:46Z", "commit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzo0Mjo0N1rOHJGT2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMzo0NDoxNVrOHJGZeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMwMjYxOQ==", "bodyText": "I would throw instead of just logging it.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#discussion_r479302619", "createdAt": "2020-08-28T13:42:47Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -447,13 +439,18 @@ private static String getEntityPath(ClientLogger logger, MessagingEntityType ent\n                     new IllegalArgumentException(\"Unknown entity type: \" + entityType));\n         }\n \n-        return entityPath;\n-    }\n+        switch (subQueue) {\n+            case NONE:\n+            case TRANSFER_QUEUE:\n+                break;\n+            case DEAD_LETTER_QUEUE:\n+                entityPath += \"/$deadletterqueue\";\n+                break;\n+            default:\n+                logger.warning(\"Unsupported value of subqueue type {}.\", subQueue);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMwMzI4Nw==", "bodyText": "Why none? Don't we have some parameter user's set?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#discussion_r479303287", "createdAt": "2020-08-28T13:43:27Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -716,7 +713,8 @@ public ServiceBusSessionReceiverClientBuilder topicName(String topicName) {\n         public ServiceBusReceiverAsyncClient buildAsyncClient() {\n             final MessagingEntityType entityType = validateEntityPaths(logger, connectionStringEntityName, topicName,\n                 queueName);\n-            final String entityPath = getEntityPath(logger, entityType, queueName, topicName, subscriptionName);\n+            final String entityPath = getEntityPath(logger, entityType, queueName, topicName, subscriptionName,\n+                SubQueue.NONE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMwMzYzNQ==", "bodyText": "nit: empty line.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#discussion_r479303635", "createdAt": "2020-08-28T13:43:48Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/models/SubQueue.java", "diffHunk": "@@ -0,0 +1,31 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus.models;\n+\n+import com.azure.messaging.servicebus.ServiceBusReceiverAsyncClient;\n+import com.azure.messaging.servicebus.ServiceBusReceiverClient;\n+\n+/**\n+ * Defines values for sub queue type.\n+ */\n+public enum SubQueue {\n+    /** Connect to the default entity (directly to the queue or subscription) **/\n+    NONE,\n+\n+    /**\n+     * Azure Service Bus queues and topic subscriptions provide a secondary subqueue, called a dead-letter queue (DLQ).\n+     * The dead-letter queue doesn't need to be explicitly created and can't be deleted or otherwise managed\n+     * independent of the main entity.\n+     * <p>\n+     * This is builder for creating  {@link ServiceBusReceiverClient} and {@link ServiceBusReceiverAsyncClient} to\n+     * consume dead-letter messages from Service Bus entity.\n+     */\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMwNDA1OA==", "bodyText": "Tests?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#discussion_r479304058", "createdAt": "2020-08-28T13:44:15Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "diffHunk": "@@ -326,13 +326,14 @@ Azure Service Bus queues and topic subscriptions provide a secondary sub-queue,\n The dead-letter queue doesn't need to be explicitly created and can't be deleted or otherwise managed independent ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e5c4e64bd8af5d4109bcf5fde5abe2721b2b411"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b05e8ca5df00184d15d1bf17bacce141ec3f284", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5b05e8ca5df00184d15d1bf17bacce141ec3f284", "committedDate": "2020-08-28T18:24:06Z", "message": "Added impl for transfer deadletter queue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NzY3MzEz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14587#pullrequestreview-478767313", "createdAt": "2020-08-31T16:35:29Z", "commit": {"oid": "5b05e8ca5df00184d15d1bf17bacce141ec3f284"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "319ee6f8cf84c7b5ba7eeeb791e7da0fe65fb138", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/319ee6f8cf84c7b5ba7eeeb791e7da0fe65fb138", "committedDate": "2020-08-31T20:10:24Z", "message": "Fix unit test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55f5dde4302365d254cf549b3451de12315823fa", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/55f5dde4302365d254cf549b3451de12315823fa", "committedDate": "2020-08-31T20:13:51Z", "message": "Remove unwanted files"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 166, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}