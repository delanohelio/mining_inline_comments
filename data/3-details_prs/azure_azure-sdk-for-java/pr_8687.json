{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMjUzMTAy", "number": 8687, "title": "Add Additional UTF8 BOM Check", "bodyText": "This PR adds an additional UTF8 BOM check by checking for the String representation of the UTF8 BOM.", "createdAt": "2020-03-03T23:44:08Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8687", "merged": true, "mergeCommit": {"oid": "112723e611fb07ae57b1997a62ad0697a3970b98"}, "closed": true, "closedAt": "2020-03-05T00:24:36Z", "author": {"login": "alzimmermsft"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKLAI9AH2gAyMzgzMjUzMTAyOjIxNjcwMThhNTkzZmRiYWY5Njk2ZWJiMDA0ZTVlZGIxODk5NzQyODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKfXGmgH2gAyMzgzMjUzMTAyOjgzNmE1YmE3NmRkMTg1ZGJkYmQ4ZDg5NmU0YTgyNWQwMzE2YTFlNmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2167018a593fdbaf9696ebb004e5edb189974285", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2167018a593fdbaf9696ebb004e5edb189974285", "committedDate": "2020-03-03T23:34:26Z", "message": "Add an additional check for UTF8 BOM as a string representation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NDE0MDI3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8687#pullrequestreview-368414027", "createdAt": "2020-03-04T00:02:31Z", "commit": {"oid": "2167018a593fdbaf9696ebb004e5edb189974285"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwMDowMjozMlrOFxbC3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwMDowMjozMlrOFxbC3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NzY0NA==", "bodyText": "As discussed, please file an issue for further investigation on this. This is good for now to release this as this issue was already noticed in smoke tests and would be better to get this fix out before customers are impacted.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8687#discussion_r387367644", "createdAt": "2020-03-04T00:02:32Z", "author": {"login": "srnagar"}, "path": "sdk/core/azure-core/src/main/java/com/azure/core/util/serializer/JacksonAdapter.java", "diffHunk": "@@ -158,12 +161,17 @@ public String serializeList(List<?> list, CollectionFormat format) {\n     @Override\n     @SuppressWarnings(\"unchecked\")\n     public <T> T deserialize(String value, final Type type, SerializerEncoding encoding) throws IOException {\n-        if (value == null || value.isEmpty() || value.equals(BOM)) {\n+        if (CoreUtils.isNullOrEmpty(value) || value.equals(BOM) || value.equals(BOM_STRING)) {\n             return null;\n         }\n-        // Remove BOM\n-        if (value.startsWith(BOM)) {\n-            value = value.replaceFirst(BOM, \"\");\n+\n+        // Remove any leading BOM from the XML.\n+        if (encoding == SerializerEncoding.XML) {\n+            if (value.startsWith(BOM)) {\n+                value = value.replaceFirst(BOM, \"\");\n+            } else if (value.startsWith(BOM_STRING)) {\n+                value = value.replaceFirst(BOM_STRING, \"\");\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2167018a593fdbaf9696ebb004e5edb189974285"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a1c2efaffa9066a6305a2a31951ef5ddcfa1230", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6a1c2efaffa9066a6305a2a31951ef5ddcfa1230", "committedDate": "2020-03-04T22:08:27Z", "message": "Merge branch 'master' into AzCore_ThoroughXmlBomCheck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "902d59619a15f35ecc2676968276797cb6d810db", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/902d59619a15f35ecc2676968276797cb6d810db", "committedDate": "2020-03-04T22:09:48Z", "message": "Remove XML guard when removing BOM"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe73108668c6d93cc7b1a0b22d57e6ca1ea0e297", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fe73108668c6d93cc7b1a0b22d57e6ca1ea0e297", "committedDate": "2020-03-04T23:17:02Z", "message": "Use default charset to match what new String would do to fix SpotBug issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "836a5ba76dd185dbdbd8d896e4a825d0316a1e6b", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/836a5ba76dd185dbdbd8d896e4a825d0316a1e6b", "committedDate": "2020-03-04T23:17:37Z", "message": "Merge branch 'master' into AzCore_ThoroughXmlBomCheck"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 988, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}