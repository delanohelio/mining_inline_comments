{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwNDQ1NDcz", "number": 13251, "title": "Single result queries", "bodyText": "This is a port of this PR from the old repository...\nmicrosoft/spring-data-cosmosdb#480\nIt now includes reactive support as requested in the other PR.", "createdAt": "2020-07-16T19:21:06Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13251", "merged": true, "mergeCommit": {"oid": "b179420700edbb334bc4ccc2dd88dd4b47b9f50d"}, "closed": true, "closedAt": "2020-07-17T23:30:28Z", "author": {"login": "Blackbaud-EricSlater"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1kW14ABqjM1NTQ3ODcxMjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc169NQgH2gAyNDUwNDQ1NDczOmU3NjA3MjUxMDM1ZWMxMmIzOGRiYmE5YjBhZThhOTU1ZDM4YzI4MDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5c4d38e759e68289fb7df79b578e88b4ecb92942", "author": {"user": {"login": "Blackbaud-EricSlater", "name": "Eric Slater"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5c4d38e759e68289fb7df79b578e88b4ecb92942", "committedDate": "2020-07-16T19:19:30Z", "message": "fix test order issue where other contact test removes container"}, "afterCommit": {"oid": "0e69b125a01cf2efe476cc925e2015ca6ba04923", "author": {"user": {"login": "Blackbaud-EricSlater", "name": "Eric Slater"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0e69b125a01cf2efe476cc925e2015ca6ba04923", "committedDate": "2020-07-16T19:25:24Z", "message": "fix test order issue where other contact test removes container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67becaaa96b1a7820bb17c7b18441265aa55fd7f", "author": {"user": {"login": "Blackbaud-EricSlater", "name": "Eric Slater"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/67becaaa96b1a7820bb17c7b18441265aa55fd7f", "committedDate": "2020-07-17T16:16:15Z", "message": "add support for single result queries. Works for both normal and reactive repositories."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14e8e7a052ba8942586c21a1d0b5bc43553a3b0f", "author": {"user": {"login": "Blackbaud-EricSlater", "name": "Eric Slater"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/14e8e7a052ba8942586c21a1d0b5bc43553a3b0f", "committedDate": "2020-07-17T16:16:15Z", "message": "fix test order issue where other contact test removes container"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0e69b125a01cf2efe476cc925e2015ca6ba04923", "author": {"user": {"login": "Blackbaud-EricSlater", "name": "Eric Slater"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0e69b125a01cf2efe476cc925e2015ca6ba04923", "committedDate": "2020-07-16T19:25:24Z", "message": "fix test order issue where other contact test removes container"}, "afterCommit": {"oid": "14e8e7a052ba8942586c21a1d0b5bc43553a3b0f", "author": {"user": {"login": "Blackbaud-EricSlater", "name": "Eric Slater"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/14e8e7a052ba8942586c21a1d0b5bc43553a3b0f", "committedDate": "2020-07-17T16:16:15Z", "message": "fix test order issue where other contact test removes container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcca5455416a38563e2909b669c6332b1e81c71e", "author": {"user": {"login": "Blackbaud-EricSlater", "name": "Eric Slater"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bcca5455416a38563e2909b669c6332b1e81c71e", "committedDate": "2020-07-17T18:04:24Z", "message": "fix references to renamed classes. Fix checkstyle issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwODY2MTMw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13251#pullrequestreview-450866130", "createdAt": "2020-07-17T18:18:00Z", "commit": {"oid": "bcca5455416a38563e2909b669c6332b1e81c71e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxODoxODowMVrOGzcwlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxODoyMDoxNFrOGzc0qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYwMTc0OA==", "bodyText": "why do we need this buffer(2) ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13251#discussion_r456601748", "createdAt": "2020-07-17T18:18:01Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-spring-data-cosmos/src/main/java/com/azure/spring/data/cosmos/repository/query/ReactiveCosmosQueryExecution.java", "diffHunk": "@@ -54,6 +56,34 @@ public Object execute(DocumentQuery query, Class<?> type, String container) {\n         }\n     }\n \n+    /**\n+     * Find operation implementation to execute a find query for a single item\n+     */\n+    final class SingleEntityExecution implements ReactiveCosmosQueryExecution {\n+\n+        private final ReactiveCosmosOperations operations;\n+        private final ReturnedType returnedType;\n+\n+        public SingleEntityExecution(ReactiveCosmosOperations operations, ReturnedType returnedType) {\n+            this.operations = operations;\n+            this.returnedType = returnedType;\n+        }\n+\n+        @Override\n+        public Object execute(DocumentQuery query, Class<?> type, String container) {\n+            return operations.find(query, type, container)\n+                .buffer(2)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcca5455416a38563e2909b669c6332b1e81c71e"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjYwMjc5NA==", "bodyText": "Shouldn't this also be findOneByName ?\nI am still unclear on what if there are multiple items by name ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13251#discussion_r456602794", "createdAt": "2020-07-17T18:20:14Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-spring-data-cosmos/src/test/java/com/azure/spring/data/cosmos/repository/repository/ReactiveCourseRepository.java", "diffHunk": "@@ -34,4 +35,12 @@\n      * @return Course list\n      */\n     Flux<Course> findByNameOrDepartmentAllIgnoreCase(String name, String department);\n+\n+    /**\n+     * Find a single Course list by name\n+     * @param name name\n+     * @return Course list\n+     */\n+    Mono<Course> findByName(String name);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcca5455416a38563e2909b669c6332b1e81c71e"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwOTIwMzk3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13251#pullrequestreview-450920397", "createdAt": "2020-07-17T19:53:26Z", "commit": {"oid": "bcca5455416a38563e2909b669c6332b1e81c71e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7607251035ec12b38dbba9b0ae8a955d38c2808", "author": {"user": {"login": "Blackbaud-EricSlater", "name": "Eric Slater"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e7607251035ec12b38dbba9b0ae8a955d38c2808", "committedDate": "2020-07-17T21:45:25Z", "message": "add unit test coverae for CosmosQuery get execution methods. Address code review feedback."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1309, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}