{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1Mzc2NjM1", "number": 7571, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjo0OTo1OVrODZkCeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo1NTozOVrODZlVoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MTMxNDQ5OnYy", "diffSide": "LEFT", "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjo0OTo1OVrOFgBP7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjo0OTo1OVrOFgBP7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTExOTIxMg==", "bodyText": "Start Jetty is a data only task and is no longer necessary in client.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369119212", "createdAt": "2020-01-21T16:49:59Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -217,26 +217,13 @@ jobs:\n           Options: --batch-mode\n           MavenOptions: $(MemoryOptions) $(LoggingOptions)\n \n-      - task: Maven@3", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MTMzNjI1OnYy", "diffSide": "RIGHT", "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjo1NTo0NlrOFgBdZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjo1NTo0NlrOFgBdZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEyMjY2Mw==", "bodyText": "The previous version of Start Jetty was making the call to start it using pom.client.xml, since the task lives in parent\\pom.xml and we're in the archetype-sdk-data.yml, use the pom.data.xml", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369122663", "createdAt": "2020-01-21T16:55:46Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+\n+jobs:\n+  - job: 'Build'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |\n+          echo \"##vso[build.addbuildtag]Scheduled\"\n+        displayName: 'Tag scheduled builds'\n+        condition: and(succeeded(), eq(variables['Build.SourceBranchName'],'master'),eq(variables['Build.Reason'],'Schedule'))\n+\n+      - task: UsePythonVersion@0\n+        displayName: 'Use Python 3.6'\n+        inputs:\n+          versionSpec: '3.6'\n+\n+      - template: tools/daily-dev-build-variable/daily-dev-build-variable.yml@azure-sdk-tools\n+\n+      - ${{ each artifact in parameters.Artifacts }}:\n+        - script: |\n+            python3 --version\n+            python3 eng/versioning/set_versions.py --build-type ${{parameters.SDKType}} --build-qualifier dev.$(Build.BuildNumber) --artifact-id ${{artifact.name}} --group-id ${{artifact.groupId}}\n+          condition: and(succeeded(), eq(variables['SetDevVersion'],'true'))\n+          displayName: Append dev package version suffix for ${{artifact.name}}\n+\n+      - script: |\n+          python3 --version\n+          python3 eng/versioning/update_versions.py --update-type library --build-type ${{parameters.SDKType}}\n+        condition: and(succeeded(), eq(variables['SetDevVersion'],'true'))\n+        displayName: Apply version settings to repository\n+\n+      - script: |\n+          pip install markdown2 BeautifulSoup4\n+        displayName: 'pip install markdown2 and BeautifulSoup4'\n+\n+      - template: ../steps/cache-maven-repository.yml\n+\n+      - template: eng/pipelines/templates/scripts/replace-relative-links.yml@azure-sdk-tools\n+        parameters:\n+          TargetFolder: $(Build.SourcesDirectory)\n+          RootFolder: $(Build.SourcesDirectory)\n+          BuildSHA: $(Build.SourceVersion)\n+          RepoId: 'Azure/azure-sdk-for-java'\n+\n+      - task: Maven@3\n+        displayName: 'Build and Package'\n+        inputs:\n+          mavenPomFile: sdk/${{parameters.ServiceDirectory}}/pom.service.xml\n+          goals: 'package'\n+          options: '$(DefaultOptions) \"-DpackageOutputDirectory=$(Build.ArtifactStagingDirectory)\" -DskipTests -Dgenerate-overview' # We include template-module so we ensure it always builds in CI\n+          mavenOptions: '$(MemoryOptions) $(LoggingOptions)'\n+          javaHomeOption: 'JDKVersion'\n+          jdkVersionOption: $(JavaVersion)\n+          jdkArchitectureOption: 'x64'\n+          publishJUnitResults: false\n+\n+      - publish: $(Build.ArtifactStagingDirectory)\n+        displayName: 'Publish Artifacts $(ArtifactName)'\n+        artifact: '$(ArtifactName)'\n+\n+      - publish: $(System.DefaultWorkingDirectory)\n+        condition: and(eq(variables['CaptureRepositoryOnFailure'], 'true'), failed())\n+        displayName: 'Capture repo state for analysis'\n+        artifact: repository\n+\n+  - job: 'Analyze'\n+    condition: and(succeeded(), ne(variables['Skip.Analyze'], 'true'))\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    steps:\n+      - pwsh: |\n+          $(Build.SourcesDirectory)/eng/versioning/pom_file_version_scanner.ps1\n+        displayName: \"Verify versions in POM files\"\n+\n+      - task: UsePythonVersion@0\n+        displayName: 'Use Python 3.6'\n+        inputs:\n+          versionSpec: '3.6'\n+\n+      - script: |\n+          pip install setuptools wheel\n+          pip install doc-warden\n+          ward scan -d $(Build.SourcesDirectory) -c $(Build.SourcesDirectory)/eng/.docsettings.yml\n+        displayName: 'Verify Readmes'\n+\n+      - task: ms.vss-governance-buildtask.governance-build-task-component-detection.ComponentGovernanceComponentDetection@0\n+        # ComponentGovernance is currently unable to run on pull requests of public projects. Running on non-PR\n+        # builds should be sufficient.\n+        condition: and(succeededOrFailed(), ne(variables['Build.Reason'], 'PullRequest'))\n+        displayName: 'Component Detection'\n+\n+      # We `install` the code quality reports tooling into our local m2 cache separately from building the Maven project\n+      # reports. This means it is available as part of that, but also so that this is not documented in the project report.\n+\n+      - template: ../steps/install-reporting-tools.yml\n+        parameters:\n+          Options: --batch-mode\n+          MavenOptions: $(MemoryOptions) $(LoggingOptions)\n+\n+      - task: Maven@3\n+        displayName: 'Install Module and Run SpotBugs, Checkstyle, RevApi, and Javadoc'\n+        inputs:\n+          mavenPomFile: sdk/${{parameters.ServiceDirectory}}/pom.service.xml\n+          options: '--no-transfer-progress -DskipTests -Dgpg.skip -Dverify-readme'\n+          mavenOptions: '$(MemoryOptions)'\n+          javaHomeOption: 'JDKVersion'\n+          jdkVersionOption: '1.11'\n+          jdkArchitectureOption: 'x64'\n+          publishJUnitResults: false\n+          goals: 'install'\n+\n+  - job: 'Test'\n+    condition: and(succeeded(), ne(variables['Skip.Test'], 'true'))\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    strategy:\n+      matrix: ${{ parameters.TestMatrix }}\n+\n+    pool:\n+      vmImage: $(OSVmImage)\n+\n+    steps:\n+      - template: ../steps/verify-agent-os.yml\n+        parameters:\n+          OSName: $(OSName)\n+\n+      - template: ../steps/cache-maven-repository.yml\n+\n+      - template: ../steps/install-reporting-tools.yml\n+        parameters:\n+          Options: --batch-mode\n+          MavenOptions: $(MemoryOptions) $(LoggingOptions)\n+\n+      - task: Maven@3\n+        displayName: 'Start Jetty'\n+        condition: succeeded()\n+        inputs:\n+          mavenPomFile: pom.data.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 193}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MTM4Mzk2OnYy", "diffSide": "RIGHT", "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzowOToxMVrOFgB7Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxODoxNDowM1rOFgD1jA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEzMDI0Mw==", "bodyText": "Data track doesn't have the same interdependencies as client track and the from source runs don't really make much sense.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369130243", "createdAt": "2020-01-21T17:09:11Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE0NzEyMw==", "bodyText": "OK we can add it later if we find a gap we need to fill.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369147123", "createdAt": "2020-01-21T17:43:36Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEzMDI0Mw=="}, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE2MTYxMg==", "bodyText": "The from source builds were never intended to run for anything other than client. Part of this change removed the conditions in the archetype-sdk-client that were limiting this run.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369161612", "createdAt": "2020-01-21T18:14:03Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEzMDI0Mw=="}, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MTQ5NjU1OnYy", "diffSide": "RIGHT", "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo0NTozNFrOFgDArg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMzoxNDo0M1rOFgL9eA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE0ODA3OA==", "bodyText": "Orthogonal but potentially more clean-up. I believe this was added to enabling the publishing of dependency reports, see #4238, we should see if that is still necessary after all our refactorings and changes to unified pipelines.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369148078", "createdAt": "2020-01-21T17:45:34Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+\n+jobs:\n+  - job: 'Build'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE4NTYwOA==", "bodyText": "@mitchdenny, it looks like the reason this tag step was being done was for the nightly dependency report. It seems that this should be a step within the nightly aggregate report generation. Though it's unclear if this step is actually still necessary. I'll make that change as part of this PR, to move this out to the aggregate pipeline.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369185608", "createdAt": "2020-01-21T19:01:58Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+\n+jobs:\n+  - job: 'Build'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE0ODA3OA=="}, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI2ODkwOA==", "bodyText": "I haven't touched the dependency reports, I think they still run off one of the tagged builds. I think we should file a separate issue for that because we almost certainly will want to move that over to the aggregate reports.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369268908", "createdAt": "2020-01-21T22:06:50Z", "author": {"login": "mitchdenny"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+\n+jobs:\n+  - job: 'Build'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE0ODA3OA=="}, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI3NTM1MQ==", "bodyText": "OK @mitchdenny, I'll leave this alone in my PR and let you file the issue.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369275351", "createdAt": "2020-01-21T22:22:43Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+\n+jobs:\n+  - job: 'Build'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE0ODA3OA=="}, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI5NDcxMg==", "bodyText": "Logged: #7592", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369294712", "createdAt": "2020-01-21T23:14:43Z", "author": {"login": "mitchdenny"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+\n+jobs:\n+  - job: 'Build'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE0ODA3OA=="}, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MTUyMzU2OnYy", "diffSide": "RIGHT", "path": "sdk/authorization/ci.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo1NDozM1rOFgDRIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxOTowNjo0OVrOFgFb_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE1MjI4OQ==", "bodyText": "Should we set the SDKType in the template now?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369152289", "createdAt": "2020-01-21T17:54:33Z", "author": {"login": "weshaggard"}, "path": "sdk/authorization/ci.yml", "diffHunk": "@@ -37,7 +37,7 @@ pr:\n       - sdk/authorization/mgmt-\n \n stages:\n-  - template: ../../eng/pipelines/templates/stages/archetype-sdk-client.yml\n+  - template: ../../eng/pipelines/templates/stages/archetype-sdk-data.yml\n     parameters:\n       ServiceDirectory: authorization\n       SDKType: data", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE4NzgzNw==", "bodyText": "Good call/catch. I'll remove those from the various ci.yml files.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369187837", "createdAt": "2020-01-21T19:06:49Z", "author": {"login": "JimSuplizio"}, "path": "sdk/authorization/ci.yml", "diffHunk": "@@ -37,7 +37,7 @@ pr:\n       - sdk/authorization/mgmt-\n \n stages:\n-  - template: ../../eng/pipelines/templates/stages/archetype-sdk-client.yml\n+  - template: ../../eng/pipelines/templates/stages/archetype-sdk-data.yml\n     parameters:\n       ServiceDirectory: authorization\n       SDKType: data", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE1MjI4OQ=="}, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MTUyNzM2OnYy", "diffSide": "RIGHT", "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo1NTozOVrOFgDTdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo1NTozOVrOFgDTdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE1Mjg4Ng==", "bodyText": "I didn't look super close but it still feels like there might be a fair amount of duplication between the client and data templates. We should consider creating more templates to share as much as possible were it makes sense.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369152886", "createdAt": "2020-01-21T17:55:39Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+\n+jobs:\n+  - job: 'Build'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |\n+          echo \"##vso[build.addbuildtag]Scheduled\"\n+        displayName: 'Tag scheduled builds'\n+        condition: and(succeeded(), eq(variables['Build.SourceBranchName'],'master'),eq(variables['Build.Reason'],'Schedule'))\n+\n+      - task: UsePythonVersion@0\n+        displayName: 'Use Python 3.6'\n+        inputs:\n+          versionSpec: '3.6'\n+\n+      - template: tools/daily-dev-build-variable/daily-dev-build-variable.yml@azure-sdk-tools\n+\n+      - ${{ each artifact in parameters.Artifacts }}:\n+        - script: |\n+            python3 --version\n+            python3 eng/versioning/set_versions.py --build-type ${{parameters.SDKType}} --build-qualifier dev.$(Build.BuildNumber) --artifact-id ${{artifact.name}} --group-id ${{artifact.groupId}}\n+          condition: and(succeeded(), eq(variables['SetDevVersion'],'true'))\n+          displayName: Append dev package version suffix for ${{artifact.name}}\n+\n+      - script: |\n+          python3 --version\n+          python3 eng/versioning/update_versions.py --update-type library --build-type ${{parameters.SDKType}}\n+        condition: and(succeeded(), eq(variables['SetDevVersion'],'true'))\n+        displayName: Apply version settings to repository\n+\n+      - script: |\n+          pip install markdown2 BeautifulSoup4\n+        displayName: 'pip install markdown2 and BeautifulSoup4'\n+\n+      - template: ../steps/cache-maven-repository.yml\n+\n+      - template: eng/pipelines/templates/scripts/replace-relative-links.yml@azure-sdk-tools\n+        parameters:\n+          TargetFolder: $(Build.SourcesDirectory)\n+          RootFolder: $(Build.SourcesDirectory)\n+          BuildSHA: $(Build.SourceVersion)\n+          RepoId: 'Azure/azure-sdk-for-java'\n+\n+      - task: Maven@3\n+        displayName: 'Build and Package'\n+        inputs:\n+          mavenPomFile: sdk/${{parameters.ServiceDirectory}}/pom.service.xml\n+          goals: 'package'\n+          options: '$(DefaultOptions) \"-DpackageOutputDirectory=$(Build.ArtifactStagingDirectory)\" -DskipTests -Dgenerate-overview' # We include template-module so we ensure it always builds in CI\n+          mavenOptions: '$(MemoryOptions) $(LoggingOptions)'\n+          javaHomeOption: 'JDKVersion'\n+          jdkVersionOption: $(JavaVersion)\n+          jdkArchitectureOption: 'x64'\n+          publishJUnitResults: false\n+\n+      - publish: $(Build.ArtifactStagingDirectory)\n+        displayName: 'Publish Artifacts $(ArtifactName)'\n+        artifact: '$(ArtifactName)'\n+\n+      - publish: $(System.DefaultWorkingDirectory)\n+        condition: and(eq(variables['CaptureRepositoryOnFailure'], 'true'), failed())\n+        displayName: 'Capture repo state for analysis'\n+        artifact: repository\n+\n+  - job: 'Analyze'\n+    condition: and(succeeded(), ne(variables['Skip.Analyze'], 'true'))\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    steps:\n+      - pwsh: |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 124}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 455, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}