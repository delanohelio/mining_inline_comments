{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMDgwNzQ3", "number": 7904, "title": "fixed Mono -> Flux -> Mono back and forth conversion", "bodyText": "in different layers we were unnecessarily translating Mono to Flux and back to Mono.\nWhen we know the return type is single we should use Mono and not translate back and forth from Mono to Flux and back to Mono again.", "createdAt": "2020-02-03T01:09:47Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7904", "merged": true, "mergeCommit": {"oid": "8494bff7678195da6f54fb79c57909db9570746e"}, "closed": true, "closedAt": "2020-02-04T16:58:55Z", "author": {"login": "moderakh"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAiSrDgH2gAyMzcwMDgwNzQ3OjRlMjcxYWUxNGUwYWUwYjk1MjkxMDQ0MmI2MzUzYTI1YjFiYjQ4ZTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcA8TxdgH2gAyMzcwMDgwNzQ3Ojg1NzcxYTI0NTdkNWEyNWJmNzg2MGMyOTk1MGY0YmViN2JlZGQ2MzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e271ae14e0ae0b952910442b6353a25b1bb48e6", "author": {"user": {"login": "moderakh", "name": "Mohammad Derakhshani"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4e271ae14e0ae0b952910442b6353a25b1bb48e6", "committedDate": "2020-02-03T01:03:15Z", "message": "fixed Mono -> Flux -> Mono back and forth conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a231fa7a51a0be83361d265b960a5a8e5d19034", "author": {"user": {"login": "moderakh", "name": "Mohammad Derakhshani"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9a231fa7a51a0be83361d265b960a5a8e5d19034", "committedDate": "2020-02-03T03:34:22Z", "message": "fixed a test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNTI4Mjgx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7904#pullrequestreview-352528281", "createdAt": "2020-02-03T20:07:52Z", "commit": {"oid": "9a231fa7a51a0be83361d265b960a5a8e5d19034"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDowNzo1MlrOFk-Urg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QyMDoxMzozOVrOFk-flw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMxNDE1OA==", "bodyText": "We don't need this .single() anymore, right ?\nHere and every other method in this class.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7904#discussion_r374314158", "createdAt": "2020-02-03T20:07:52Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos-examples/src/main/java/com/azure/cosmos/rx/examples/multimaster/Helpers.java", "diffHunk": "@@ -38,7 +38,7 @@ static public String createDatabaseUri(String databaseName) {\n                                 }\n                             }\n \n-                            return Flux.error(e);\n+                            return Mono.error(e);\n                         }\n                 ).map(ResourceResponse::getResource).single();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a231fa7a51a0be83361d265b960a5a8e5d19034"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMxNDczNg==", "bodyText": "Same here, unnecessary conversion to .single()", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7904#discussion_r374314736", "createdAt": "2020-02-03T20:09:06Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos-examples/src/test/java/com/azure/cosmos/rx/examples/CollectionCRUDAsyncAPITest.java", "diffHunk": "@@ -242,7 +243,7 @@ public void createCollection_toBlocking_CollectionAlreadyExists_Fails() {\n      */\n     @Test(groups = \"samples\", timeOut = TIMEOUT)\n     public void transformObservableToCompletableFuture() throws Exception {\n-        Flux<ResourceResponse<DocumentCollection>> createCollectionObservable = client\n+        Mono<ResourceResponse<DocumentCollection>> createCollectionObservable = client\n                 .createCollection(getDatabaseLink(), collectionDefinition, null);\n         CompletableFuture<ResourceResponse<DocumentCollection>> future = createCollectionObservable.single().toFuture();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a231fa7a51a0be83361d265b960a5a8e5d19034"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDMxNjk1MQ==", "bodyText": "Please remove unnecessary .single()", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7904#discussion_r374316951", "createdAt": "2020-02-03T20:13:39Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/caches/RxClientCollectionCache.java", "diffHunk": "@@ -94,7 +94,7 @@ public RxClientCollectionCache(ISessionContainer sessionContainer,\n             retryPolicyInstance.onBeforeSendRequest(request);\n         }\n \n-        Flux<RxDocumentServiceResponse> responseObs = this.storeModel.processMessage(request);\n+        Mono<RxDocumentServiceResponse> responseObs = this.storeModel.processMessage(request);\n         return responseObs.map(response -> BridgeInternal.toResourceResponse(response, DocumentCollection.class)\n                 .getResource()).single();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9a231fa7a51a0be83361d265b960a5a8e5d19034"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyNjY5ODQ0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7904#pullrequestreview-352669844", "createdAt": "2020-02-04T01:11:44Z", "commit": {"oid": "9a231fa7a51a0be83361d265b960a5a8e5d19034"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85771a2457d5a25bf7860c29950f4beb7bedd631", "author": {"user": {"login": "moderakh", "name": "Mohammad Derakhshani"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/85771a2457d5a25bf7860c29950f4beb7bedd631", "committedDate": "2020-02-04T07:21:59Z", "message": "Merge branch 'feature/cosmos/v4' into users/moderakh/flux-mono-conversion"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2565, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}