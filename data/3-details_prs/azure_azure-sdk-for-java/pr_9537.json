{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzODUzOTY4", "number": 9537, "title": "Added AzureKeyCredentialPolicy to Azure Core", "bodyText": "Resolves #9535\nThis PR adds AzureKeyCredentialPolicy into Azure Core, this policies replaces the service specific TextAnalyticsApiKeyCredentialPolicy and SearchApiKeyCredentialPolicy classes. AzureKeyCredentialPolicy acts as a generic policy that will set the specified header to the key contained in the passed AzureKeyCredential object.", "createdAt": "2020-03-25T22:14:09Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9537", "merged": true, "mergeCommit": {"oid": "24f48b40e259d20ad872aa4b368426bcc82fac45"}, "closed": true, "closedAt": "2020-03-26T19:27:12Z", "author": {"login": "alzimmermsft"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRPAWOgH2gAyMzkzODUzOTY4OjM3ZTM4M2E0NjY4ZmJmMjRiNDU2NjIxZTkyZmFiNmI2NDQ5ODUwNWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRgt4IAH2gAyMzkzODUzOTY4OjY0ODJkM2NhY2FlM2FmZDk0ZWJiOTI5YmExZWFkYTQyMTUzMmE0YmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "37e383a4668fbf24b456621e92fab6b64498505e", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/37e383a4668fbf24b456621e92fab6b64498505e", "committedDate": "2020-03-25T22:11:45Z", "message": "Added AzureKeyCredentialPolicy and removed service specific policies which it replaces"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNjIyOTg1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9537#pullrequestreview-381622985", "createdAt": "2020-03-26T00:09:47Z", "commit": {"oid": "37e383a4668fbf24b456621e92fab6b64498505e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNjk5OTAz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9537#pullrequestreview-381699903", "createdAt": "2020-03-26T04:47:12Z", "commit": {"oid": "37e383a4668fbf24b456621e92fab6b64498505e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMjExNTgy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9537#pullrequestreview-382211582", "createdAt": "2020-03-26T16:55:43Z", "commit": {"oid": "37e383a4668fbf24b456621e92fab6b64498505e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMjMyOTA5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9537#pullrequestreview-382232909", "createdAt": "2020-03-26T17:19:07Z", "commit": {"oid": "37e383a4668fbf24b456621e92fab6b64498505e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNzoxOTowOFrOF8RxIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNzoxOTowOFrOF8RxIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODc0OTk4Ng==", "bodyText": "Alan, on Python land, Johan is suggesting to change the parameter name from header to name so whenever we have a service that uses query keys instead of header keys, this name will work.\nI am considering changing it in .NET too so we are consistent\nMore info here: Azure/azure-sdk-for-python#10509 (comment)\nWhat do you think?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9537#discussion_r398749986", "createdAt": "2020-03-26T17:19:08Z", "author": {"login": "maririos"}, "path": "sdk/core/azure-core/src/main/java/com/azure/core/http/policy/AzureKeyCredentialPolicy.java", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.http.policy;\n+\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.HttpPipelineCallContext;\n+import com.azure.core.http.HttpPipelineNextPolicy;\n+import com.azure.core.http.HttpResponse;\n+import com.azure.core.util.logging.ClientLogger;\n+import reactor.core.publisher.Mono;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Pipeline policy that uses an {@link AzureKeyCredential} to set the specified header which authorizes requests.\n+ *\n+ * <p>\n+ * Requests sent with this pipeline policy are required to use {@code HTTPS}. If the request isn't using {@code HTTPS}\n+ * an exception will be thrown to prevent leaking the key.\n+ */\n+public final class AzureKeyCredentialPolicy implements HttpPipelinePolicy {\n+    private final ClientLogger logger = new ClientLogger(AzureKeyCredentialPolicy.class);\n+\n+    private final String header;\n+    private final AzureKeyCredential credential;\n+\n+    /**\n+     * Creates a policy that uses the passed {@link AzureKeyCredential} to set the specified header.\n+     *\n+     * @param header The header that will be set to the {@link AzureKeyCredential} key value.\n+     * @param credential The {@link AzureKeyCredential} containing the authorization key to use.\n+     * @throws NullPointerException If {@code header} or {@code credential} is {@code null}.\n+     * @throws IllegalArgumentException If {@code header} is empty.\n+     */\n+    public AzureKeyCredentialPolicy(String header, AzureKeyCredential credential) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37e383a4668fbf24b456621e92fab6b64498505e"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2504723be2a88cdf7a49fe0859d98b2553cfb126", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2504723be2a88cdf7a49fe0859d98b2553cfb126", "committedDate": "2020-03-26T18:46:08Z", "message": "Merge branch 'master' into AzCore_AddAzureKeyCredentialPolicy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6482d3cacae3afd94ebb929ba1eada421532a4ba", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6482d3cacae3afd94ebb929ba1eada421532a4ba", "committedDate": "2020-03-26T18:49:52Z", "message": "Rename header to name"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1472, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}