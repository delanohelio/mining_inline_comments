{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4NDg4Mzk3", "number": 8391, "title": "TA PagedFlux, PagedIterable, PagedResponse class", "bodyText": "This PR includes:\n\n API Tool feedbacks: https://apiview.dev/Assemblies/Review/942b652edaf44b7189f41270cf07e54f\n Delete DocumentResultCollection class and create TextAnalyticsPagedResponse class to include modelVersion and TextAnalyticsBatchStatistics.\n Implement a new TextAnalyticsPagedFlux class that takes TextAnalyticsPagedResponse. And  TextAnalyticsPagedIterable fot the synchronous APIs.\n Change all collection APIs to return TextAnalyticsPagedFlux for Async and TextAnalyticsPagedIterable for Sync APIs.\n Default value for defaultCountryHint.  \"As an example, in .NET we use the default of the client and then give the option to the user to override the behavior and use None as default.\" If a user pass in \"none\" case-insencetive, we treat it as an empty string.\n Rename offset and length to graphemeLength and graphemeOffset in SentenceSentiment,\nCategorizedEntity, PiiEntity, LinkedEntityMatch.\n Rename showStatistics() to isIncludeStatistics() in the TextAnalyticsRequestOptions\n Rename getErrorCodeValue() to getCode()\n Add an enum class EntityCategory as .NET has now.\n Fixes #8347 Text Analytics Readme description of Sentiment analysis is reflecting v2 and not v3.\n\nfixes #8353\nfixes #8224", "createdAt": "2020-02-21T21:52:20Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391", "merged": true, "mergeCommit": {"oid": "ea763fa134f29c2274f633c69cb4b5a1a2d9734f"}, "closed": true, "closedAt": "2020-03-06T22:40:52Z", "author": {"login": "mssfang"}, "timelineItems": {"totalCount": 55, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGm6QTgH2gAyMzc4NDg4Mzk3OmEyMjhiODE5NGQ2ZjVhODkxNjY0MTViOWYzZGU3NDUyZjhlZWU2YmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcLHb8BAH2gAyMzc4NDg4Mzk3OjdhZmQ1Yzc0NmI5OTQ2NzlmMTg4MGJlMDE2YjY4OGYyOGVlODA4ZjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a228b8194d6f5a89166415b9f3de7452f8eee6ba", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a228b8194d6f5a89166415b9f3de7452f8eee6ba", "committedDate": "2020-02-21T21:49:39Z", "message": "add only TA PagedFlux, PagedIterable, PagedResponse class and samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be1473382a37a0ec3bace1a093b60d2edaf73767", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/be1473382a37a0ec3bace1a093b60d2edaf73767", "committedDate": "2020-02-23T06:56:35Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into TextAnalyticsPagedFlux"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9838984723fda2dfeb16cadbf4200a005b6541cc", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9838984723fda2dfeb16cadbf4200a005b6541cc", "committedDate": "2020-02-24T00:03:25Z", "message": "inputText in document result along with ID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4c8ed7db93e30b75dff3de6e09f5ecceeb42fdf", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d4c8ed7db93e30b75dff3de6e09f5ecceeb42fdf", "committedDate": "2020-02-24T08:55:40Z", "message": "iterabel stream and EntitiesResult"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9f7c0e31ebae35dd73a69e115f1ecbc07ba60dd", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e9f7c0e31ebae35dd73a69e115f1ecbc07ba60dd", "committedDate": "2020-02-24T16:18:21Z", "message": "add more samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0c3a246f24b388c9f5ed76401825a28756edc80", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e0c3a246f24b388c9f5ed76401825a28756edc80", "committedDate": "2020-02-24T21:07:16Z", "message": "before arch board"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55fbace5fa4e40d56ec021b8e9c93c7e599ead33", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/55fbace5fa4e40d56ec021b8e9c93c7e599ead33", "committedDate": "2020-02-24T21:07:30Z", "message": "before arch board 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee6d6fb55a3c72abd6ce35a3114ee283d3e62587", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ee6d6fb55a3c72abd6ce35a3114ee283d3e62587", "committedDate": "2020-03-02T19:00:56Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into TextAnalyticsPagedFlux"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cd7d000b52f4d41d8864b2cddf3a4dfdff45feb", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2cd7d000b52f4d41d8864b2cddf3a4dfdff45feb", "committedDate": "2020-03-02T19:06:56Z", "message": "address feedbacks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ecb2980d7b64bad89d6ab6717566849a5217acb", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9ecb2980d7b64bad89d6ab6717566849a5217acb", "committedDate": "2020-03-02T19:24:39Z", "message": "resolve conflict after merge from another branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4499d0a12bba37dd366d0f4a4b98516afe2ebdb7", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4499d0a12bba37dd366d0f4a4b98516afe2ebdb7", "committedDate": "2020-03-02T21:30:40Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into TextAnalyticsPagedFlux"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fd45b565aa0f9faf87a017d5df6fd86252808be", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9fd45b565aa0f9faf87a017d5df6fd86252808be", "committedDate": "2020-03-03T06:12:13Z", "message": "before arch board"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "749281454f38fc49bccf0b3cab312e586d36633e", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/749281454f38fc49bccf0b3cab312e586d36633e", "committedDate": "2020-03-03T17:52:21Z", "message": "readme updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "221c3c4331fd982d5ab109dcabdcc24f40d07c68", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/221c3c4331fd982d5ab109dcabdcc24f40d07c68", "committedDate": "2020-03-04T02:03:49Z", "message": "feedbaak 0303 part 1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a70e66591aebf2087ffc00be2b8496c53a16b0e3", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a70e66591aebf2087ffc00be2b8496c53a16b0e3", "committedDate": "2020-03-04T07:53:26Z", "message": "add an overload api and codesnippet but need to add tests as well"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4Nzk5NzI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-368799725", "createdAt": "2020-03-04T14:01:12Z", "commit": {"oid": "a70e66591aebf2087ffc00be2b8496c53a16b0e3"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDowMToxMlrOFxuWFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDoxODozNlrOFxu-wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4Mzg2Mg==", "bodyText": "if the method takes the Context parameter, shouldn't it be withResponse?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r387683862", "createdAt": "2020-03-04T14:01:12Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java", "diffHunk": "@@ -71,6 +66,46 @@ public void useAadAsyncClient() {\n             .buildAsyncClient();\n     }\n \n+    /**\n+     * Code snippet for rotating API key of the client\n+     */\n+    public void rotatingApiKey() {\n+        TextAnalyticsApiKeyCredential credential = new TextAnalyticsApiKeyCredential(\"{api_key}\");\n+        TextAnalyticsClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n+            .apiKey(credential)\n+            .endpoint(\"{endpoint}\")\n+            .buildClient();\n+\n+        credential.updateCredential(\"{new_api_key}\");\n+    }\n+\n+    /**\n+     * Code snippet for handling exception\n+     */\n+    public void handlingException() {\n+        List<DetectLanguageInput> inputs = Arrays.asList(\n+            new DetectLanguageInput(\"1\", \"This is written in English.\", \"us\"),\n+            new DetectLanguageInput(\"1\", \"Este es un document escrito en Espa\u00f1ol.\", \"es\")\n+        );\n+\n+        try {\n+            textAnalyticsClient.detectLanguageBatch(inputs, null, Context.NONE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70e66591aebf2087ffc00be2b8496c53a16b0e3"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4NDY0MQ==", "bodyText": "should this using the unreleased_core rather than current?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r387684641", "createdAt": "2020-03-04T14:02:33Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/pom.xml", "diffHunk": "@@ -36,12 +36,12 @@\n     <dependency>\n       <groupId>com.azure</groupId>\n       <artifactId>azure-core</artifactId>\n-      <version>1.2.0</version> <!-- {x-version-update;com.azure:azure-core;dependency} -->\n+      <version>1.3.0-beta.2</version> <!-- {x-version-update;com.azure:azure-core;current} -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70e66591aebf2087ffc00be2b8496c53a16b0e3"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4NDk3OA==", "bodyText": "nit : containing", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r387684978", "createdAt": "2020-03-04T14:03:11Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +51,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70e66591aebf2087ffc00be2b8496c53a16b0e3"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4NzgzMQ==", "bodyText": "Need to make sure that the naming is consistent for this one. Either documents, inputs or textInputs etc.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r387687831", "createdAt": "2020-03-04T14:07:58Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +51,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70e66591aebf2087ffc00be2b8496c53a16b0e3"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4OTUwNQ==", "bodyText": "Can combine analyzeSentimentBatch and anlayzeSentimentBatchWithContext to be a single method.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r387689505", "createdAt": "2020-03-04T14:10:46Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +51,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.\n+     *\n+     * @return {@link TextAnalyticsPagedFlux} of {@link AnalyzeSentimentResult}.\n+     */\n+    TextAnalyticsPagedFlux<AnalyzeSentimentResult> analyzeSentimentBatch(Iterable<TextDocumentInput> textInputs,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70e66591aebf2087ffc00be2b8496c53a16b0e3"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY5NDI3NA==", "bodyText": "do we need this in a variable here?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r387694274", "createdAt": "2020-03-04T14:18:36Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +51,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.\n+     *\n+     * @return {@link TextAnalyticsPagedFlux} of {@link AnalyzeSentimentResult}.\n+     */\n+    TextAnalyticsPagedFlux<AnalyzeSentimentResult> analyzeSentimentBatch(Iterable<TextDocumentInput> textInputs,\n+        TextAnalyticsRequestOptions options) {\n+        Objects.requireNonNull(textInputs, \"'textInputs' cannot be null.\");\n+        try {\n+            return new TextAnalyticsPagedFlux<>(() -> (continuationToken, pageSize) -> withContext(context ->\n+                service.sentimentWithRestResponseAsync(\n+                    new MultiLanguageBatchInput().setDocuments(Transforms.toMultiLanguageInput(textInputs)),\n+                    options == null ? null : options.getModelVersion(),\n+                    options == null ? null : options.isStatisticsShown(), context)\n+                    .doOnSubscribe(ignoredValue ->\n+                        logger.info(\"A batch of text sentiment input - {}\", textInputs.toString()))\n+                    .doOnSuccess(response -> logger.info(\"A batch of text sentiment output - {}\", response))\n+                    .doOnError(error -> logger.warning(\"Failed to analyze text sentiment - {}\", error))\n+                    .map(this::toTextAnalyticsPagedResponse))\n+                    .flux());\n+        } catch (RuntimeException ex) {\n+            return new TextAnalyticsPagedFlux<>(() ->\n+                (continuationToken, pageSize) -> fluxError(logger, ex));\n+        }\n+    }\n+\n+    /**\n+     * Helper function that calling service with max overloaded parameters and returns {@link TextAnalyticsPagedFlux}\n+     * that is a paged flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.\n+     * @param context Additional context that is passed through the Http pipeline during the service call.\n+     *\n+     * @return The {@link TextAnalyticsPagedFlux} of {@link AnalyzeSentimentResult}.\n+     */\n+    TextAnalyticsPagedFlux<AnalyzeSentimentResult> analyzeSentimentBatchWithContext(\n         Iterable<TextDocumentInput> textInputs, TextAnalyticsRequestOptions options, Context context) {\n+\n         Objects.requireNonNull(textInputs, \"'textInputs' cannot be null.\");\n \n-        final MultiLanguageBatchInput batchInput = new MultiLanguageBatchInput()\n-            .setDocuments(toMultiLanguageInput(textInputs));\n-        return service.sentimentWithRestResponseAsync(\n-            batchInput,\n-            options == null ? null : options.getModelVersion(),\n-            options == null ? null : options.showStatistics(), context)\n-            .doOnSubscribe(ignoredValue -> logger.info(\"A batch of text sentiment input - {}\", textInputs.toString()))\n-            .doOnSuccess(response -> logger.info(\"A batch of text sentiment output - {}\", response))\n-            .doOnError(error -> logger.warning(\"Failed to analyze text sentiment - {}\", error))\n-            .map(response -> new SimpleResponse<>(response, toDocumentResultCollection(response.getValue())));\n+        return new TextAnalyticsPagedFlux<>(() -> (continuationToken, pageSize) ->\n+            service.sentimentWithRestResponseAsync(\n+                new MultiLanguageBatchInput().setDocuments(Transforms.toMultiLanguageInput(textInputs)),\n+                options == null ? null : options.getModelVersion(),\n+                options == null ? null : options.isStatisticsShown(), context)\n+                .doOnSubscribe(ignoredValue ->\n+                    logger.info(\"A batch of text sentiment input - {}\", textInputs.toString()))\n+                .doOnSuccess(response -> logger.info(\"A batch of text sentiment output - {}\", response))\n+                .doOnError(error -> logger.warning(\"Failed to analyze text sentiment - {}\", error))\n+                .map(response -> toTextAnalyticsPagedResponse(response))\n+                .flux());\n     }\n \n     /**\n-     * Helper method to convert the service response of {@link SentimentResponse} to {@link DocumentResultCollection}.\n+     * Helper method to convert the service response of {@link SentimentResponse} to {@link TextAnalyticsPagedResponse}\n+     * of {@link AnalyzeSentimentResult}.\n      *\n-     * @param sentimentResponse the {@link SentimentResponse} returned by the service.\n+     * @param response The {@link SimpleResponse} of {@link SentimentResponse} returned by the service.\n      *\n-     * @return the {@link DocumentResultCollection} of {@link AnalyzeSentimentResult} to be returned by the SDK.\n+     * @return The {@link TextAnalyticsPagedResponse} of {@link AnalyzeSentimentResult} returned by the SDK.\n      */\n-    private DocumentResultCollection<AnalyzeSentimentResult> toDocumentResultCollection(\n-        final SentimentResponse sentimentResponse) {\n+    private TextAnalyticsPagedResponse<AnalyzeSentimentResult> toTextAnalyticsPagedResponse(\n+        final SimpleResponse<SentimentResponse> response) {\n+        SentimentResponse sentimentResponse = response.getValue();\n         List<AnalyzeSentimentResult> analyzeSentimentResults = new ArrayList<>();\n         for (DocumentSentiment documentSentiment : sentimentResponse.getDocuments()) {\n-            analyzeSentimentResults.add(convertToAnalyzeSentimentResult(documentSentiment));\n+\n+            analyzeSentimentResults.add(\n+                convertToAnalyzeSentimentResult(documentSentiment));\n         }\n         for (DocumentError documentError : sentimentResponse.getErrors()) {\n             final com.azure.ai.textanalytics.models.TextAnalyticsError error =\n                 toTextAnalyticsError(documentError.getError());\n-            analyzeSentimentResults.add(new AnalyzeSentimentResult(documentError.getId(), null,\n+\n+            final String documentId = documentError.getId();\n+            analyzeSentimentResults.add(new AnalyzeSentimentResult(documentId, null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a70e66591aebf2087ffc00be2b8496c53a16b0e3"}, "originalPosition": 145}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6cfafea8a49387849ce59dd86fe9b212c44d4010", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6cfafea8a49387849ce59dd86fe9b212c44d4010", "committedDate": "2020-03-04T23:47:01Z", "message": "update tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21af44c8a4381448ec5e48cd18246d91a7df6439", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/21af44c8a4381448ec5e48cd18246d91a7df6439", "committedDate": "2020-03-05T00:22:46Z", "message": "renaming without categorized word"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53492122a5b92a96455620cc4fc757292087bc4b", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/53492122a5b92a96455620cc4fc757292087bc4b", "committedDate": "2020-03-05T00:31:29Z", "message": "merge SentenceSentimentLabel and DocumentSentimentLabel to TextSentimentLabel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b667a5d5e43a7c2e30fba3c4dc1936f676bee1df", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b667a5d5e43a7c2e30fba3c4dc1936f676bee1df", "committedDate": "2020-03-05T05:22:27Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into TextAnalyticsPagedFlux"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1ec36e2b64a26f3f9248bbb750b9f1e4ca368126", "committedDate": "2020-03-05T05:40:26Z", "message": "correct warning and remove redundant"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzUwNjA2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369750606", "createdAt": "2020-03-05T17:04:39Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowNDozOVrOFycEww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowNDozOVrOFycEww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQzMzA5MQ==", "bodyText": "After yesterday's discussion, please remove the categorized in this method", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388433091", "createdAt": "2020-03-05T17:04:39Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -217,68 +217,62 @@ TextAnalyticsAsyncClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n ```\n \n ### Analyze sentiment\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L137-L142 -->\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L102-L106 -->\n ```java\n String text = \"The hotel was dark and unclean. I like microsoft.\";\n DocumentSentiment documentSentiment = textAnalyticsClient.analyzeSentiment(text);\n System.out.printf(\"Analyzed document sentiment: %s.%n\", documentSentiment.getSentiment());\n-for (SentenceSentiment sentenceSentiment : documentSentiment.getSentences()) {\n-    System.out.printf(\"Analyzed sentence sentiment: %s.%n\", sentenceSentiment.getSentiment());\n-}\n+documentSentiment.getSentences().forEach(sentenceSentiment ->\n+    System.out.printf(\"Analyzed sentence sentiment: %s.%n\", sentenceSentiment.getSentiment()));\n ```\n \n ### Detect language\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L78-L81 -->\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L113-L116 -->\n ```java\n String inputText = \"Bonjour tout le monde\";\n DetectedLanguage detectedLanguage = textAnalyticsClient.detectLanguage(inputText);\n System.out.printf(\"Detected language name: %s, ISO 6391 name: %s, score: %.2f.%n\",\n     detectedLanguage.getName(), detectedLanguage.getIso6391Name(), detectedLanguage.getScore());\n ```\n \n-### Recognize entity\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L88-L92 -->\n+### Recognize categorized entity", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 82}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzU1Nzgz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369755783", "createdAt": "2020-03-05T17:09:13Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowOToxM1rOFycSAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzowOToxM1rOFycSAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQzNjQ4Mw==", "bodyText": "do other Java libraries have this dependency?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388436483", "createdAt": "2020-03-05T17:09:13Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/pom.xml", "diffHunk": "@@ -36,12 +36,22 @@\n     <dependency>\n       <groupId>com.azure</groupId>\n       <artifactId>azure-core</artifactId>\n-      <version>1.2.0</version> <!-- {x-version-update;com.azure:azure-core;dependency} -->\n+      <version>1.3.0-beta.2</version> <!-- {x-version-update;com.azure:azure-core;current} -->\n     </dependency>\n     <dependency>\n       <groupId>com.azure</groupId>\n       <artifactId>azure-core-http-netty</artifactId>\n-      <version>1.3.0</version> <!-- {x-version-update;com.azure:azure-core-http-netty;dependency} -->\n+      <version>1.4.0-beta.2</version> <!-- {x-version-update;com.azure:azure-core-http-netty;current} -->\n+    </dependency>\n+\n+    <!-- Added this dependency to include necessary annotations used by reactor core.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzU3MTg1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369757185", "createdAt": "2020-03-05T17:11:14Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoxMToxNFrOFycWfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoxMToxNFrOFycWfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQzNzYyOA==", "bodyText": "should we include a link to TextAnalyticsRequestOptions  instead of listing the properties?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388437628", "createdAt": "2020-03-05T17:11:14Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +50,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzYyNTE2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369762516", "createdAt": "2020-03-05T17:18:40Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoxODo0MFrOFycncA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoxODo0MFrOFycncA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ0MTk2OA==", "bodyText": "Is the idea that when the user activates logging, it will see all of this?\nDo we really need to print all the input?\nAlso, text sentiment input sounds weird. The text doesn't include the sentiment, the service is going to analyze the text to get a sentiment. So maybe, Batch of documents to analyze", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388441968", "createdAt": "2020-03-05T17:18:40Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +50,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.\n+     *\n+     * @return {@link TextAnalyticsPagedFlux} of {@link AnalyzeSentimentResult}.\n+     */\n+    TextAnalyticsPagedFlux<AnalyzeSentimentResult> analyzeSentimentBatch(Iterable<TextDocumentInput> textInputs,\n+        TextAnalyticsRequestOptions options) {\n+        Objects.requireNonNull(textInputs, \"'textInputs' cannot be null.\");\n+        try {\n+            return new TextAnalyticsPagedFlux<>(() -> (continuationToken, pageSize) -> withContext(context ->\n+                service.sentimentWithRestResponseAsync(\n+                    new MultiLanguageBatchInput().setDocuments(Transforms.toMultiLanguageInput(textInputs)),\n+                    options == null ? null : options.getModelVersion(),\n+                    options == null ? null : options.isStatisticsShown(), context)\n+                    .doOnSubscribe(ignoredValue ->\n+                        logger.info(\"A batch of text sentiment input - {}\", textInputs.toString()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 68}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzY1NDEw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369765410", "createdAt": "2020-03-05T17:22:42Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoyMjo0MlrOFycwQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoyMjo0MlrOFycwQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ0NDIyNw==", "bodyText": "maybe Analyzed sentiment for a batch of documents?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388444227", "createdAt": "2020-03-05T17:22:42Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +50,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.\n+     *\n+     * @return {@link TextAnalyticsPagedFlux} of {@link AnalyzeSentimentResult}.\n+     */\n+    TextAnalyticsPagedFlux<AnalyzeSentimentResult> analyzeSentimentBatch(Iterable<TextDocumentInput> textInputs,\n+        TextAnalyticsRequestOptions options) {\n+        Objects.requireNonNull(textInputs, \"'textInputs' cannot be null.\");\n+        try {\n+            return new TextAnalyticsPagedFlux<>(() -> (continuationToken, pageSize) -> withContext(context ->\n+                service.sentimentWithRestResponseAsync(\n+                    new MultiLanguageBatchInput().setDocuments(Transforms.toMultiLanguageInput(textInputs)),\n+                    options == null ? null : options.getModelVersion(),\n+                    options == null ? null : options.isStatisticsShown(), context)\n+                    .doOnSubscribe(ignoredValue ->\n+                        logger.info(\"A batch of text sentiment input - {}\", textInputs.toString()))\n+                    .doOnSuccess(response -> logger.info(\"A batch of text sentiment output - {}\", response))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzY1NTcy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369765572", "createdAt": "2020-03-05T17:22:57Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoyMjo1N1rOFycw5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoyMjo1N1rOFycw5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ0NDM4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                .doOnError(error -> logger.warning(\"Failed to analyze text sentiment - {}\", error))\n          \n          \n            \n                                .doOnError(error -> logger.warning(\"Failed to analyze sentiment - {}\", error))", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388444388", "createdAt": "2020-03-05T17:22:57Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +50,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.\n+     *\n+     * @return {@link TextAnalyticsPagedFlux} of {@link AnalyzeSentimentResult}.\n+     */\n+    TextAnalyticsPagedFlux<AnalyzeSentimentResult> analyzeSentimentBatch(Iterable<TextDocumentInput> textInputs,\n+        TextAnalyticsRequestOptions options) {\n+        Objects.requireNonNull(textInputs, \"'textInputs' cannot be null.\");\n+        try {\n+            return new TextAnalyticsPagedFlux<>(() -> (continuationToken, pageSize) -> withContext(context ->\n+                service.sentimentWithRestResponseAsync(\n+                    new MultiLanguageBatchInput().setDocuments(Transforms.toMultiLanguageInput(textInputs)),\n+                    options == null ? null : options.getModelVersion(),\n+                    options == null ? null : options.isStatisticsShown(), context)\n+                    .doOnSubscribe(ignoredValue ->\n+                        logger.info(\"A batch of text sentiment input - {}\", textInputs.toString()))\n+                    .doOnSuccess(response -> logger.info(\"A batch of text sentiment output - {}\", response))\n+                    .doOnError(error -> logger.warning(\"Failed to analyze text sentiment - {}\", error))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 70}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzY3NjQy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369767642", "createdAt": "2020-03-05T17:25:51Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoyNTo1MlrOFyc3Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoyNTo1MlrOFyc3Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ0NjAzOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Helper function that calling service with max overloaded parameters and returns {@link TextAnalyticsPagedFlux}\n          \n          \n            \n                 * that is a paged flux contains {@link AnalyzeSentimentResult}.\n          \n          \n            \n                 * Helper function for calling service with max overloaded parameters that a returns {@link TextAnalyticsPagedFlux}\n          \n          \n            \n                 * which is a paged flux that contains {@link AnalyzeSentimentResult}.\n          \n      \n    \n    \n  \n\nor something like that", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388446038", "createdAt": "2020-03-05T17:25:52Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +50,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.\n+     *\n+     * @return {@link TextAnalyticsPagedFlux} of {@link AnalyzeSentimentResult}.\n+     */\n+    TextAnalyticsPagedFlux<AnalyzeSentimentResult> analyzeSentimentBatch(Iterable<TextDocumentInput> textInputs,\n+        TextAnalyticsRequestOptions options) {\n+        Objects.requireNonNull(textInputs, \"'textInputs' cannot be null.\");\n+        try {\n+            return new TextAnalyticsPagedFlux<>(() -> (continuationToken, pageSize) -> withContext(context ->\n+                service.sentimentWithRestResponseAsync(\n+                    new MultiLanguageBatchInput().setDocuments(Transforms.toMultiLanguageInput(textInputs)),\n+                    options == null ? null : options.getModelVersion(),\n+                    options == null ? null : options.isStatisticsShown(), context)\n+                    .doOnSubscribe(ignoredValue ->\n+                        logger.info(\"A batch of text sentiment input - {}\", textInputs.toString()))\n+                    .doOnSuccess(response -> logger.info(\"A batch of text sentiment output - {}\", response))\n+                    .doOnError(error -> logger.warning(\"Failed to analyze text sentiment - {}\", error))\n+                    .map(this::toTextAnalyticsPagedResponse))\n+                    .flux());\n+        } catch (RuntimeException ex) {\n+            return new TextAnalyticsPagedFlux<>(() ->\n+                (continuationToken, pageSize) -> fluxError(logger, ex));\n+        }\n+    }\n+\n+    /**\n+     * Helper function that calling service with max overloaded parameters and returns {@link TextAnalyticsPagedFlux}\n+     * that is a paged flux contains {@link AnalyzeSentimentResult}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 81}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzY4MDIw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369768020", "createdAt": "2020-03-05T17:26:23Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoyNjoyNFrOFyc4iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoyNjoyNFrOFyc4iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ0NjM0NA==", "bodyText": "same comment here", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388446344", "createdAt": "2020-03-05T17:26:24Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +50,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.\n+     *\n+     * @return {@link TextAnalyticsPagedFlux} of {@link AnalyzeSentimentResult}.\n+     */\n+    TextAnalyticsPagedFlux<AnalyzeSentimentResult> analyzeSentimentBatch(Iterable<TextDocumentInput> textInputs,\n+        TextAnalyticsRequestOptions options) {\n+        Objects.requireNonNull(textInputs, \"'textInputs' cannot be null.\");\n+        try {\n+            return new TextAnalyticsPagedFlux<>(() -> (continuationToken, pageSize) -> withContext(context ->\n+                service.sentimentWithRestResponseAsync(\n+                    new MultiLanguageBatchInput().setDocuments(Transforms.toMultiLanguageInput(textInputs)),\n+                    options == null ? null : options.getModelVersion(),\n+                    options == null ? null : options.isStatisticsShown(), context)\n+                    .doOnSubscribe(ignoredValue ->\n+                        logger.info(\"A batch of text sentiment input - {}\", textInputs.toString()))\n+                    .doOnSuccess(response -> logger.info(\"A batch of text sentiment output - {}\", response))\n+                    .doOnError(error -> logger.warning(\"Failed to analyze text sentiment - {}\", error))\n+                    .map(this::toTextAnalyticsPagedResponse))\n+                    .flux());\n+        } catch (RuntimeException ex) {\n+            return new TextAnalyticsPagedFlux<>(() ->\n+                (continuationToken, pageSize) -> fluxError(logger, ex));\n+        }\n+    }\n+\n+    /**\n+     * Helper function that calling service with max overloaded parameters and returns {@link TextAnalyticsPagedFlux}\n+     * that is a paged flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 84}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzcwMTc4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369770178", "createdAt": "2020-03-05T17:29:23Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoyOToyNFrOFyc-7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzoyOToyNFrOFyc-7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ0Nzk4MA==", "bodyText": "Consider changing to IncludeStatistics.\nisStatisticsShown sounds like the service already returns them and we just want to show them, when in reality we are asking the service for those values so we can show them", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388447980", "createdAt": "2020-03-05T17:29:24Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextAnalyticsRequestOptions.java", "diffHunk": "@@ -11,7 +11,7 @@\n @Fluent\n public final class TextAnalyticsRequestOptions {\n     private String modelVersion;\n-    private boolean showStatistics;\n+    private boolean isStatisticsShown;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzcxNjc2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369771676", "createdAt": "2020-03-05T17:31:34Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzozMTozNVrOFydDuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzozMTozNVrOFydDuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ0OTIwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        new DetectLanguageInput(\"1\", \"Este es un document escrito en Espa\u00f1ol.\", \"es\")\n          \n          \n            \n                        new DetectLanguageInput(\"1\", \"Este es un documento escrito en Espa\u00f1ol.\", \"es\")", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388449208", "createdAt": "2020-03-05T17:31:35Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java", "diffHunk": "@@ -71,6 +66,46 @@ public void useAadAsyncClient() {\n             .buildAsyncClient();\n     }\n \n+    /**\n+     * Code snippet for rotating API key of the client\n+     */\n+    public void rotatingApiKey() {\n+        TextAnalyticsApiKeyCredential credential = new TextAnalyticsApiKeyCredential(\"{api_key}\");\n+        TextAnalyticsClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n+            .apiKey(credential)\n+            .endpoint(\"{endpoint}\")\n+            .buildClient();\n+\n+        credential.updateCredential(\"{new_api_key}\");\n+    }\n+\n+    /**\n+     * Code snippet for handling exception\n+     */\n+    public void handlingException() {\n+        List<DetectLanguageInput> inputs = Arrays.asList(\n+            new DetectLanguageInput(\"1\", \"This is written in English.\", \"us\"),\n+            new DetectLanguageInput(\"1\", \"Este es un document escrito en Espa\u00f1ol.\", \"es\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5Nzc0Mzg2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369774386", "createdAt": "2020-03-05T17:35:31Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzozNTozMVrOFydMCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNzozNTozMVrOFydMCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ1MTMzOQ==", "bodyText": "looks like this string is copied in multiple places. Make sure to replace document to documento everywhere", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388451339", "createdAt": "2020-03-05T17:35:31Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/TextAnalyticsClientJavaDocCodeSnippets.java", "diffHunk": "@@ -123,50 +145,52 @@ public void detectLanguageStringListWithOptions() {\n             \"This is written in English\",\n             \"Este es un document escrito en Espa\u00f1ol.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 100}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2fa1b57fcf3cb57d76fa930543c136458125cac9", "committedDate": "2020-03-05T19:28:04Z", "message": "rename fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5ODQ2MTMz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369846133", "createdAt": "2020-03-05T19:20:54Z", "commit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxOToyMDo1NVrOFyguYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxOToyNzowOFrOFyg8IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUwOTI4MQ==", "bodyText": "@maririos Are we updating the method names too, to remove categorized ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388509281", "createdAt": "2020-03-05T19:20:55Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -217,68 +217,62 @@ TextAnalyticsAsyncClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n ```\n \n ### Analyze sentiment\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L137-L142 -->\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L102-L106 -->\n ```java\n String text = \"The hotel was dark and unclean. I like microsoft.\";\n DocumentSentiment documentSentiment = textAnalyticsClient.analyzeSentiment(text);\n System.out.printf(\"Analyzed document sentiment: %s.%n\", documentSentiment.getSentiment());\n-for (SentenceSentiment sentenceSentiment : documentSentiment.getSentences()) {\n-    System.out.printf(\"Analyzed sentence sentiment: %s.%n\", sentenceSentiment.getSentiment());\n-}\n+documentSentiment.getSentences().forEach(sentenceSentiment ->\n+    System.out.printf(\"Analyzed sentence sentiment: %s.%n\", sentenceSentiment.getSentiment()));\n ```\n \n ### Detect language\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L78-L81 -->\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L113-L116 -->\n ```java\n String inputText = \"Bonjour tout le monde\";\n DetectedLanguage detectedLanguage = textAnalyticsClient.detectLanguage(inputText);\n System.out.printf(\"Detected language name: %s, ISO 6391 name: %s, score: %.2f.%n\",\n     detectedLanguage.getName(), detectedLanguage.getIso6391Name(), detectedLanguage.getScore());\n ```\n \n-### Recognize entity\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L88-L92 -->\n+### Recognize categorized entity\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L123-L126 -->\n ```java\n String text = \"Satya Nadella is the CEO of Microsoft\";\n-for (CategorizedEntity entity : textAnalyticsClient.recognizeEntities(text)) {\n+textAnalyticsClient.recognizeCategorizedEntities(text).forEach(entity ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUxMTAyNw==", "bodyText": "Can't we call analyzeSentimentBatchWithContext from analyzeSentimentBatch and pass Context as Context.NONE, rather than repeating the same code block?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388511027", "createdAt": "2020-03-05T19:23:59Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/AnalyzeSentimentAsyncClient.java", "diffHunk": "@@ -50,57 +51,110 @@\n         this.service = service;\n     }\n \n-    Mono<Response<DocumentResultCollection<AnalyzeSentimentResult>>> analyzeSentimentBatchWithResponse(\n+    /**\n+     * Helper function that analyzes a batch of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n+     * flux contains {@link AnalyzeSentimentResult}.\n+     *\n+     * @param textInputs A batch of input texts.\n+     * @param options The request options, such as the training model version and to show statistics.\n+     *\n+     * @return {@link TextAnalyticsPagedFlux} of {@link AnalyzeSentimentResult}.\n+     */\n+    TextAnalyticsPagedFlux<AnalyzeSentimentResult> analyzeSentimentBatch(Iterable<TextDocumentInput> textInputs,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4OTUwNQ=="}, "originalCommit": {"oid": "a70e66591aebf2087ffc00be2b8496c53a16b0e3"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUxMjgwMA==", "bodyText": "Shouldn't this still be text?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388512800", "createdAt": "2020-03-05T19:27:08Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/TextAnalyticsAsyncClient.java", "diffHunk": "@@ -123,18 +118,18 @@ public TextAnalyticsServiceVersion getServiceVersion() {\n      * the country hint.\n      *\n      * <p><strong>Code sample</strong></p>\n-     * <p>Detects language in a text. Subscribes to the call asynchronously and prints out the detected language\n+     * <p>Detects language in a document. Subscribes to the call asynchronously and prints out the detected language", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ec36e2b64a26f3f9248bbb750b9f1e4ca368126"}, "originalPosition": 72}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5ODUzNjk2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369853696", "createdAt": "2020-03-05T19:32:18Z", "commit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxOTozMjoxOVrOFyhG7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxOTozMjoxOVrOFyhG7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUxNTU2NA==", "bodyText": "Seemed to be missing a few values mentioned here - https://docs.microsoft.com/en-us/azure/cognitive-services/Text-Analytics/named-entity-types", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388515564", "createdAt": "2020-03-05T19:32:19Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/EntityCategory.java", "diffHunk": "@@ -0,0 +1,68 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.annotation.Immutable;\n+import com.azure.core.util.ExpandableStringEnum;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+\n+/**\n+ * Gets the entity category inferred by the text analytics service's named entity recognition model.\n+ * The list of available categories is described at\n+ * See <a href=\"https://docs.microsoft.com/en-us/azure/cognitive-services/Text-Analytics/named-entity-types\"></a>.\n+ */\n+@Immutable\n+public final class EntityCategory extends ExpandableStringEnum<EntityCategory> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5ODU1NTU5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369855559", "createdAt": "2020-03-05T19:35:09Z", "commit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxOTozNToxMFrOFyhMPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxOTozNToxMFrOFyhMPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUxNjkyNg==", "bodyText": "Don't need the . in the end of line here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388516926", "createdAt": "2020-03-05T19:35:10Z", "author": {"login": "samvaity"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/LinkedEntityMatch.java", "diffHunk": "@@ -22,23 +22,23 @@\n     private final String text;\n \n     /*\n-     * Start position (in Unicode characters) for the entity match text.\n+     * Grapheme start position for the entity match text.\n      */\n     private final int offset;\n \n     /*\n-     * Length (in Unicode characters) for the entity match text.\n+     * Grapheme length for the entity match text.\n      */\n     private final int length;\n \n     /**\n-     * Creates a {@code LinkedEntityMatch} model that describes linked entity match.\n+     * Creates a {@link LinkedEntityMatch} model that describes linked entity match.\n      *\n-     * @param text entity text as appears in the request\n-     * @param score if a well-known item is recognized, a decimal number denoting the\n-     * confidence level between 0 and 1 will be returned\n-     * @param offset start position (in Unicode characters) for the entity match text\n-     * @param length length (in Unicode characters) for the entity match text\n+     * @param text The entity text as appears in the request.\n+     * @param score If a well-known item is recognized, a decimal number denoting the.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5OTUwMjE2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369950216", "createdAt": "2020-03-05T22:07:25Z", "commit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjowNzoyNVrOFyl_Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjowNzoyNVrOFyl_Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU5NTUxOA==", "bodyText": "Looks like we are missing the option to pass None in this PR", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388595518", "createdAt": "2020-03-05T22:07:25Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/DetectLanguageInput.java", "diffHunk": "@@ -40,9 +40,11 @@ public DetectLanguageInput(String id, String text) {\n     /**\n      * Creates an input for detect language that will takes {@code id}, {@code text} and {@code countryHint}.\n      *\n-     * @param id unique, non-empty document identifier\n-     * @param text the text property\n-     * @param countryHint the country hint\n+     * @param id Unique, non-empty document identifier.\n+     * @param text The text property.\n+     * @param countryHint Accepts two letter country codes specified by ISO 3166-1 alpha-2. Defaults to \"US\" if not", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5OTU0NDAx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369954401", "createdAt": "2020-03-05T22:15:23Z", "commit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjoxNToyM1rOFymM5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjoxNToyM1rOFymM5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU5OTAxNQ==", "bodyText": "Consider changing to documents or batch of documents,\nSame across this and other documents", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388599015", "createdAt": "2020-03-05T22:15:23Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/batch/RecognizedCategorizedEntitiesBatchStringDocuments.java", "diffHunk": "@@ -0,0 +1,51 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.batch;\n+\n+import com.azure.ai.textanalytics.TextAnalyticsClient;\n+import com.azure.ai.textanalytics.TextAnalyticsClientBuilder;\n+import com.azure.ai.textanalytics.models.TextAnalyticsApiKeyCredential;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+/**\n+ * Sample demonstrates how to recognize the entities of a batch input text.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5OTU3NTkz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369957593", "createdAt": "2020-03-05T22:22:05Z", "commit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjoyMjowNlrOFymXjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjoyMjowNlrOFymXjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODYwMTc0Mw==", "bodyText": "Consider not showing the grapheme properties in the Readme or samples", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388601743", "createdAt": "2020-03-05T22:22:06Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -217,68 +217,62 @@ TextAnalyticsAsyncClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n ```\n \n ### Analyze sentiment\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L137-L142 -->\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L102-L106 -->\n ```java\n String text = \"The hotel was dark and unclean. I like microsoft.\";\n DocumentSentiment documentSentiment = textAnalyticsClient.analyzeSentiment(text);\n System.out.printf(\"Analyzed document sentiment: %s.%n\", documentSentiment.getSentiment());\n-for (SentenceSentiment sentenceSentiment : documentSentiment.getSentences()) {\n-    System.out.printf(\"Analyzed sentence sentiment: %s.%n\", sentenceSentiment.getSentiment());\n-}\n+documentSentiment.getSentences().forEach(sentenceSentiment ->\n+    System.out.printf(\"Analyzed sentence sentiment: %s.%n\", sentenceSentiment.getSentiment()));\n ```\n \n ### Detect language\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L78-L81 -->\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L113-L116 -->\n ```java\n String inputText = \"Bonjour tout le monde\";\n DetectedLanguage detectedLanguage = textAnalyticsClient.detectLanguage(inputText);\n System.out.printf(\"Detected language name: %s, ISO 6391 name: %s, score: %.2f.%n\",\n     detectedLanguage.getName(), detectedLanguage.getIso6391Name(), detectedLanguage.getScore());\n ```\n \n-### Recognize entity\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L88-L92 -->\n+### Recognize categorized entity\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L123-L126 -->\n ```java\n String text = \"Satya Nadella is the CEO of Microsoft\";\n-for (CategorizedEntity entity : textAnalyticsClient.recognizeEntities(text)) {\n+textAnalyticsClient.recognizeEntities(text).forEach(entity ->\n     System.out.printf(\"Recognized categorized entity: %s, category: %s, subCategory: %s, score: %.2f.%n\",\n-        entity.getText(), entity.getCategory(), entity.getSubCategory(), entity.getScore());\n-}\n+        entity.getText(), entity.getCategory(), entity.getSubCategory(), entity.getScore()));\n ```\n \n ### Recognize PII (Personally Identifiable Information) entity\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L99-L103 -->\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L133-L136 -->\n ```java\n String text = \"My SSN is 555-55-5555\";\n-for (PiiEntity entity : textAnalyticsClient.recognizePiiEntities(text)) {\n+textAnalyticsClient.recognizePiiEntities(text).forEach(piiEntity ->\n     System.out.printf(\"Recognized Personally Identifiable Information entity: %s, category: %s, subCategory: %s, score: %.2f.%n\",\n-        entity.getText(), entity.getCategory(), entity.getSubCategory(), entity.getScore());\n-}\n+        piiEntity.getText(), piiEntity.getCategory(), piiEntity.getSubCategory(), piiEntity.getScore()));\n ```\n \n ### Recognize linked entity\n-<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L110-L119 -->\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L143-L151 -->\n \n ```java\n String text = \"Old Faithful is a geyser at Yellowstone Park.\";\n-for (LinkedEntity linkedEntity : textAnalyticsClient.recognizeLinkedEntities(text)) {\n+textAnalyticsClient.recognizeLinkedEntities(text).forEach(linkedEntity -> {\n     System.out.println(\"Linked Entities:\");\n     System.out.printf(\"Name: %s, entity ID in data source: %s, URL: %s, data source: %s.%n\",\n         linkedEntity.getName(), linkedEntity.getDataSourceEntityId(), linkedEntity.getUrl(), linkedEntity.getDataSource());\n-    for (LinkedEntityMatch linkedEntityMatch : linkedEntity.getLinkedEntityMatches()) {\n+    linkedEntity.getLinkedEntityMatches().forEach(linkedEntityMatch ->\n         System.out.printf(\"Text: %s, offset: %s, length: %s, score: %.2f.%n\", linkedEntityMatch.getText(),\n-            linkedEntityMatch.getOffset(), linkedEntityMatch.getLength(), linkedEntityMatch.getScore());\n-    }\n-}\n+            linkedEntityMatch.getGraphemeOffset(), linkedEntityMatch.getGraphemeLength(), linkedEntityMatch.getScore()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "originalPosition": 124}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5OTU5MTcw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369959170", "createdAt": "2020-03-05T22:25:30Z", "commit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjoyNTozMFrOFymcsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjoyNTozMFrOFymcsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODYwMzA1Ng==", "bodyText": "I see the rename happened in the docs, but not in the class itself", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388603056", "createdAt": "2020-03-05T22:25:30Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/implementation/models/SentimentConfidenceScorePerLabel.java", "diffHunk": "@@ -44,7 +44,7 @@ public double getPositive() {\n      * Set the positive property: The positive property.\n      *\n      * @param positive the positive value to set.\n-     * @return the SentimentConfidenceScorePerLabel object itself.\n+     * @return the SentimentConfidenceScores object itself.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5OTU5Njc0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-369959674", "createdAt": "2020-03-05T22:26:35Z", "commit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjoyNjozNVrOFymekA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMjoyNjozNVrOFymekA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODYwMzUzNg==", "bodyText": "we should drop the 'Labelhere too, so justTextSentiment`", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388603536", "createdAt": "2020-03-05T22:26:35Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/TextSentimentLabel.java", "diffHunk": "@@ -0,0 +1,45 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics.models;\n+\n+import com.azure.core.annotation.Immutable;\n+import com.azure.core.util.ExpandableStringEnum;\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+\n+/**\n+ * Defines values for {@link TextSentimentLabel}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa1b57fcf3cb57d76fa930543c136458125cac9"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66e1585ef9d7dd8a6f0b4c005728f7e1753eff1f", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/66e1585ef9d7dd8a6f0b4c005728f7e1753eff1f", "committedDate": "2020-03-06T02:33:50Z", "message": "address feedbacks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d9353b08fd0f81182eaac3e93d82b1bf955f7cb", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9d9353b08fd0f81182eaac3e93d82b1bf955f7cb", "committedDate": "2020-03-06T03:48:07Z", "message": "add playbacks files to pass build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDc1ODgx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-370075881", "createdAt": "2020-03-06T04:27:14Z", "commit": {"oid": "66e1585ef9d7dd8a6f0b4c005728f7e1753eff1f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNDoyNzoxNFrOFys12A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNDoyNzoxNFrOFys12A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcwNzgwMA==", "bodyText": "During the arch board, Assaf mentioned that we should remove the fixed points for score as the service will return them.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388707800", "createdAt": "2020-03-06T04:27:14Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -235,12 +235,12 @@ System.out.printf(\"Detected language name: %s, ISO 6391 name: %s, score: %.2f.%n\n     detectedLanguage.getName(), detectedLanguage.getIso6391Name(), detectedLanguage.getScore());\n ```\n \n-### Recognize categorized entity\n+### Recognize entity\n <!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L123-L126 -->\n ```java\n String text = \"Satya Nadella is the CEO of Microsoft\";\n textAnalyticsClient.recognizeEntities(text).forEach(entity ->\n-    System.out.printf(\"Recognized categorized entity: %s, category: %s, subCategory: %s, score: %.2f.%n\",\n+    System.out.printf(\"Recognized entity: %s, category: %s, subCategory: %s, score: %.2f.%n\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66e1585ef9d7dd8a6f0b4c005728f7e1753eff1f"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDc2NzU3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-370076757", "createdAt": "2020-03-06T04:31:24Z", "commit": {"oid": "66e1585ef9d7dd8a6f0b4c005728f7e1753eff1f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNDozMToyNFrOFys4tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNDozMToyNFrOFys4tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcwODUzMg==", "bodyText": "hint", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#discussion_r388708532", "createdAt": "2020-03-06T04:31:24Z", "author": {"login": "maririos"}, "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/RecognizeLinkedEntityAsyncClient.java", "diffHunk": "@@ -52,8 +53,10 @@\n     /**\n      * Helper function that recognize a single of documents and returns {@link TextAnalyticsPagedFlux} that is a paged\n      * flux containing {@link LinkedEntity}.\n+     * Helper function for calling service with max overloaded parameters that a returns {@link TextAnalyticsPagedFlux}\n+     * which is a paged flux that contains {@link AnalyzeSentimentResult}.\n      *\n-     * @param text A single input text.\n+     * @param text A single document.\n      * @param language The language hint.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66e1585ef9d7dd8a6f0b4c005728f7e1753eff1f"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b100f7053e4cbd39986202d6e67c52ff9af7a6d", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9b100f7053e4cbd39986202d6e67c52ff9af7a6d", "committedDate": "2020-03-06T06:19:08Z", "message": "update changelog and address wording feedbacks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbeafc2a48b1a4bae81377e6212d80d60821effc", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/dbeafc2a48b1a4bae81377e6212d80d60821effc", "committedDate": "2020-03-06T06:24:19Z", "message": "run npx comment to update readme java code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fb89b2917e2feb8228019697ed09bc65d7a3d8c", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3fb89b2917e2feb8228019697ed09bc65d7a3d8c", "committedDate": "2020-03-06T18:25:44Z", "message": "remove duplicate javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "934b5682a32e090a7b7fcc00afe1de9888b9b003", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/934b5682a32e090a7b7fcc00afe1de9888b9b003", "committedDate": "2020-03-06T19:35:29Z", "message": "remove unused import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNjAxNDQ1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-370601445", "createdAt": "2020-03-06T20:19:20Z", "commit": {"oid": "934b5682a32e090a7b7fcc00afe1de9888b9b003"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b25f8194658bf5271dbeed976b71b435ac27002", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9b25f8194658bf5271dbeed976b71b435ac27002", "committedDate": "2020-03-06T21:29:27Z", "message": "refactor to simplify some duplication code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7216747c391ec08e3fcdbfd21fba316fc85641d", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b7216747c391ec08e3fcdbfd21fba316fc85641d", "committedDate": "2020-03-06T21:33:57Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into TextAnalyticsPagedFlux"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f93898a7d29ac20423b8b7543592f63e43236c6", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7f93898a7d29ac20423b8b7543592f63e43236c6", "committedDate": "2020-03-06T21:39:30Z", "message": "update azure core and netty version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwNjUxMzkx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8391#pullrequestreview-370651391", "createdAt": "2020-03-06T21:56:52Z", "commit": {"oid": "7f93898a7d29ac20423b8b7543592f63e43236c6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7afd5c746b994679f1880be016b688f28ee808f2", "author": {"user": {"login": "mssfang", "name": "Shawn Fang"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7afd5c746b994679f1880be016b688f28ee808f2", "committedDate": "2020-03-06T21:59:06Z", "message": "update TA version in readme"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2296, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}