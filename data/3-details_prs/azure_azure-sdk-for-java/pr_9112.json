{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4ODU2MjM4", "number": 9112, "title": "Service Bus Track2 - Fixes and Samples for using AAD/application id", "bodyText": "This PR has following features.\n\nFixes issue with AAD when using management channel\nSample showing how AAD can be used for send and receive\n\nfixex #8711", "createdAt": "2020-03-15T22:38:02Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9112", "merged": true, "mergeCommit": {"oid": "c1bf029718bd671bfa6f8ff9b3ad028a633a5fa1"}, "closed": true, "closedAt": "2020-03-16T20:20:46Z", "author": {"login": "hemanttanwar"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOBWtgAH2gAyMzg4ODU2MjM4OmRlNjY3MDdjOWZkMmMxYmJkNjIzOTdiYjE5NzExOGMzMzgxZWIzNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOTAYVAH2gAyMzg4ODU2MjM4OmZlZDM3Yzk3Njg3YjYyYzYzN2ViY2ZiOTVhMTQ2MzYxZWU5MTYwNzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "de66707c9fd2c1bbd62397bb197118c3381eb354", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/de66707c9fd2c1bbd62397bb197118c3381eb354", "committedDate": "2020-03-15T22:35:44Z", "message": "Samples for using AAD/application id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0ODQxMDY3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9112#pullrequestreview-374841067", "createdAt": "2020-03-15T22:38:37Z", "commit": {"oid": "de66707c9fd2c1bbd62397bb197118c3381eb354"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQyMjozODozN1rOF2hwcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQyMjozODozN1rOF2hwcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjcyMDQ5OQ==", "bodyText": "This should be removed form API", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9112#discussion_r392720499", "createdAt": "2020-03-15T22:38:37Z", "author": {"login": "hemanttanwar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusMessage.java", "diffHunk": "@@ -159,15 +159,6 @@ public ServiceBusMessage(String messageId, byte[] body, String contentType) {\n         return Arrays.copyOf(body, body.length);\n     }\n \n-    /**\n-     * Returns message body as UTF-8 decoded string.\n-     *\n-     * @return UTF-8 decoded string representation of the message.\n-     */\n-    public String getBodyAsString() {\n-        return new String(body, UTF_8);\n-    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de66707c9fd2c1bbd62397bb197118c3381eb354"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3e5c7c6c68ec40a4d05f72a82eb749f5a90f0cd", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c3e5c7c6c68ec40a4d05f72a82eb749f5a90f0cd", "committedDate": "2020-03-16T03:08:58Z", "message": "Added samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47eee7e8633c666a9bbc40d349af34671025c0e1", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/47eee7e8633c666a9bbc40d349af34671025c0e1", "committedDate": "2020-03-16T05:19:10Z", "message": "adding more samples"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MjU3NTg2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9112#pullrequestreview-375257586", "createdAt": "2020-03-16T14:14:22Z", "commit": {"oid": "47eee7e8633c666a9bbc40d349af34671025c0e1"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNDoxNDoyMlrOF21__w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNDoxNzozNlrOF22Neg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA1MjE1OQ==", "bodyText": "-> to Service Bus", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9112#discussion_r393052159", "createdAt": "2020-03-16T14:14:22Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "diffHunk": "@@ -76,22 +83,80 @@ platform. First, add the package:\n [//]: # ({x-version-update-end})\n \n All the implemented ways to request a credential can be found under the `com.azure.identity.credential` package. The\n-sample below shows how to use an Azure Active Directory (AAD) application client secret to authorize with Azure Event\n-Hubs.\n+sample below shows how to use an Azure Active Directory (AAD) application client secret to authorize with Azure Service Bus.\n \n #### Authorizing with AAD application client secret\n \n Follow the instructions in [Creating a service principal using Azure Portal][application_client_secret] to create a\n service principal and a client secret. The corresponding `clientId` and `tenantId` for the service principal can be\n obtained from the [App registration page][app_registration_page].\n \n-When using Azure Active Directory, your principal must be assigned a role which allows access to Event Hubs, such\n-as the `Azure Event Hubs Data Owner` role. For more information about using Azure Active Directory authorization\n-with Event Hubs, please refer to [the associated documentation][aad_authorization].\n+When using Azure Active Directory, your principal must be assigned a role which allows access toService Bus, such", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47eee7e8633c666a9bbc40d349af34671025c0e1"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA1NTMwOA==", "bodyText": "Send and receive using AAD and connection string are good scenarios. We don't need to duplicate it with peek (this is also a diagnostic scenario we don't want to put to the forefront) and other small operations.\nIt makes the table of contents long. (Feedback we received in EH)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9112#discussion_r393055308", "createdAt": "2020-03-16T14:17:18Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "diffHunk": "@@ -25,6 +25,13 @@ have to be online at the same time.\n   - [Authenticate the client](#authenticate-the-client)\n - [Key concepts](#key-concepts)\n - [Examples](#examples)\n+  - [Create a sender or receiver using connection string](#create-a-sender-or-receiver-using-connection-string)\n+  - [Send Message to Queue or Topic](#send-message-to-queue-or-topic)\n+  - [Receive message from Queue or Subscription](#receive-message-from-queue-or-subscription)\n+  - [Peek message from Queue or Subscription](#peek-message-from-queue-or-subscription)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47eee7e8633c666a9bbc40d349af34671025c0e1"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA1NTYxMA==", "bodyText": "Should be 3rd level headers, not fourth.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9112#discussion_r393055610", "createdAt": "2020-03-16T14:17:36Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "diffHunk": "@@ -76,22 +83,80 @@ platform. First, add the package:\n [//]: # ({x-version-update-end})\n \n All the implemented ways to request a credential can be found under the `com.azure.identity.credential` package. The\n-sample below shows how to use an Azure Active Directory (AAD) application client secret to authorize with Azure Event\n-Hubs.\n+sample below shows how to use an Azure Active Directory (AAD) application client secret to authorize with Azure Service Bus.\n \n #### Authorizing with AAD application client secret\n \n Follow the instructions in [Creating a service principal using Azure Portal][application_client_secret] to create a\n service principal and a client secret. The corresponding `clientId` and `tenantId` for the service principal can be\n obtained from the [App registration page][app_registration_page].\n \n-When using Azure Active Directory, your principal must be assigned a role which allows access to Event Hubs, such\n-as the `Azure Event Hubs Data Owner` role. For more information about using Azure Active Directory authorization\n-with Event Hubs, please refer to [the associated documentation][aad_authorization].\n+When using Azure Active Directory, your principal must be assigned a role which allows access toService Bus, such\n+as the `Azure Service Bus Data Owner` role. For more information about using Azure Active Directory authorization\n+with Service Bus, please refer to [the associated documentation][aad_authorization].\n \n ## Key concepts\n+#### Queues", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47eee7e8633c666a9bbc40d349af34671025c0e1"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ded7be98cedf26d26c8d79dcc1327daef7bb546", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0ded7be98cedf26d26c8d79dcc1327daef7bb546", "committedDate": "2020-03-16T19:08:42Z", "message": "Review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fed37c97687b62c637ebcfb95a146361ee916070", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fed37c97687b62c637ebcfb95a146361ee916070", "committedDate": "2020-03-16T19:09:38Z", "message": "Review comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 664, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}