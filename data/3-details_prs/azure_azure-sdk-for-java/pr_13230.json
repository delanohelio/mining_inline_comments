{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5OTI3MTY4", "number": 13230, "title": "mgmt, if service says 404 is error, it is error", "bodyText": "", "createdAt": "2020-07-16T06:22:01Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13230", "merged": true, "mergeCommit": {"oid": "413f69a73ef37f38e63edd5e445394b10d5a743c"}, "closed": true, "closedAt": "2020-07-20T02:44:32Z", "author": {"login": "weidongxu-microsoft"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1ZG-lgH2gAyNDQ5OTI3MTY4OjA0ZjZhN2NkNDUxN2EzZWZiMWU1YTA5ZGYwN2NhZWNlOTU4NjdkOTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1vCMQAFqTQ1MDQ0NjM2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "04f6a7cd4517a3efb1e5a09df07caece95867d94", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/04f6a7cd4517a3efb1e5a09df07caece95867d94", "committedDate": "2020-07-16T06:19:19Z", "message": "remove onErrorResume"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NTM3MzA0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13230#pullrequestreview-449537304", "createdAt": "2020-07-16T06:23:32Z", "commit": {"oid": "04f6a7cd4517a3efb1e5a09df07caece95867d94"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwNjoyMzozM1rOGybtcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQwNjoyMzozM1rOGybtcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTUzNTk4Ng==", "bodyText": "Track1 does this\n    private Observable<VirtualMachineInner> retrieveVirtualMachineAsync() {\n        return this.computeManager\n                .inner()\n                .virtualMachines()\n                .getByResourceGroupAsync(rgName, vmName, InstanceViewTypes.INSTANCE_VIEW)\n                .flatMap(new Func1<VirtualMachineInner, Observable<VirtualMachineInner>>() {\n                    @Override\n                    public Observable<VirtualMachineInner> call(VirtualMachineInner virtualMachine) {\n                        if (virtualMachine == null) {\n                            return Observable.error(new Exception(String.format(\"VM with name '%s' not found (resource group '%s')\",\n                                    vmName, rgName)));\n                        }\n                        return Observable.just(virtualMachine);\n                    }\n                });\n    }\n\nBasically it convert null to Exception.\nSince we already has Exception here, no need for this code.\n\nI've added // Exception if vm not found comment in these locations, in case we need to switch back the GET 404 response to Mono.empty() without ManagementException.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13230#discussion_r455535986", "createdAt": "2020-07-16T06:23:33Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/compute/mgmt/src/main/java/com/azure/resourcemanager/compute/implementation/WindowsVolumeNoAADEncryptionMonitorImpl.java", "diffHunk": "@@ -155,13 +155,7 @@ public DiskVolumeEncryptionMonitor refresh() {\n             .computeManager\n             .inner()\n             .getVirtualMachines()\n-            .getByResourceGroupAsync(rgName, vmName)\n-            .onErrorResume(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04f6a7cd4517a3efb1e5a09df07caece95867d94"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13ba3c54d4dc35d02c82d265f12b9731a3c99080", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/13ba3c54d4dc35d02c82d265f12b9731a3c99080", "committedDate": "2020-07-16T06:37:15Z", "message": "add comment to mark the location"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c75fd7b228a0f68ddb8edbe239a1e3d950f89fa9", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c75fd7b228a0f68ddb8edbe239a1e3d950f89fa9", "committedDate": "2020-07-16T06:37:54Z", "message": "Merge branch 'master' into mgmt_let-it-fail"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f3981cfdae8dede72ee3d997392746bc3349e3d", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9f3981cfdae8dede72ee3d997392746bc3349e3d", "committedDate": "2020-07-16T06:49:28Z", "message": "revert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "139ae18cfde5e5253d417105edc73b7a1e40c4d3", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/139ae18cfde5e5253d417105edc73b7a1e40c4d3", "committedDate": "2020-07-16T09:15:54Z", "message": "protection for 404"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ba48650009632d33039f9641d39ae23719e50b6", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9ba48650009632d33039f9641d39ae23719e50b6", "committedDate": "2020-07-16T09:20:22Z", "message": "nit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a0d0c751b32aa2d6e3503213e3b072916a49226", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6a0d0c751b32aa2d6e3503213e3b072916a49226", "committedDate": "2020-07-16T09:57:51Z", "message": "ignore 404 in nested list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNDQyODAz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13230#pullrequestreview-450442803", "createdAt": "2020-07-17T07:46:07Z", "commit": {"oid": "6a0d0c751b32aa2d6e3503213e3b072916a49226"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNzo0NjowN1rOGzI5Dw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNzo1MDoyM1rOGzJA5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI3NjIzOQ==", "bodyText": "why does it need the try? When will it throw IllegalArgumentException?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13230#discussion_r456276239", "createdAt": "2020-07-17T07:46:07Z", "author": {"login": "ChenTanyi"}, "path": "sdk/authorization/mgmt/src/main/java/com/azure/resourcemanager/authorization/implementation/ActiveDirectoryApplicationsImpl.java", "diffHunk": "@@ -93,10 +91,13 @@ public ActiveDirectoryApplication getByName(String spn) {\n                 Mono\n                     .defer(\n                         () -> {\n-                            UUID.fromString(trimmed);\n-                            return inner().listAsync(String.format(\"appId eq '%s'\", trimmed)).singleOrEmpty();\n+                            try {\n+                                UUID.fromString(trimmed);\n+                                return inner().listAsync(String.format(\"appId eq '%s'\", trimmed)).singleOrEmpty();\n+                            } catch (IllegalArgumentException e) {\n+                                return Mono.empty();\n+                            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a0d0c751b32aa2d6e3503213e3b072916a49226"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI3ODA3MQ==", "bodyText": "I think it could just be removed, due to other list will not deal with 404.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13230#discussion_r456278071", "createdAt": "2020-07-17T07:50:04Z", "author": {"login": "ChenTanyi"}, "path": "sdk/compute/mgmt/src/main/java/com/azure/resourcemanager/compute/implementation/VirtualMachineExtensionImagesImpl.java", "diffHunk": "@@ -44,9 +45,10 @@ public VirtualMachineExtensionImagesImpl(VirtualMachinePublishers publishers) {\n                     virtualMachinePublisher\n                         .extensionTypes()\n                         .listAsync()\n-                        .onErrorResume(e -> Mono.empty())\n-                        .flatMap(\n-                            virtualMachineExtensionImageType -> virtualMachineExtensionImageType.versions().listAsync())\n+                        .onErrorResume(ManagementException.class,\n+                            e -> e.getResponse().getStatusCode() == 404 ? Flux.empty() : Flux.error(e))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a0d0c751b32aa2d6e3503213e3b072916a49226"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI3ODI0Nw==", "bodyText": "same as above", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13230#discussion_r456278247", "createdAt": "2020-07-17T07:50:23Z", "author": {"login": "ChenTanyi"}, "path": "sdk/compute/mgmt/src/main/java/com/azure/resourcemanager/compute/implementation/VirtualMachineImagesImpl.java", "diffHunk": "@@ -85,7 +87,8 @@ public VirtualMachineImage getImage(\n                     virtualMachinePublisher\n                         .offers()\n                         .listAsync()\n-                        .onErrorResume(e -> Mono.empty())\n+                        .onErrorResume(ManagementException.class,\n+                            e -> e.getResponse().getStatusCode() == 404 ? Flux.empty() : Flux.error(e))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a0d0c751b32aa2d6e3503213e3b072916a49226"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwNDQ2MzY1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13230#pullrequestreview-450446365", "createdAt": "2020-07-17T07:52:00Z", "commit": {"oid": "6a0d0c751b32aa2d6e3503213e3b072916a49226"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1289, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}