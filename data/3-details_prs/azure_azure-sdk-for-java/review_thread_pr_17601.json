{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMDYyOTA5", "number": 17601, "reviewThreads": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMDo1MjowMFrOE5zbwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMDo1MTowOFrOE6OuuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MDQ2OTc2OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMDo1MjowMFrOH0gEbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTo0NTozM1rOH1GxQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxMzQyMg==", "bodyText": "Interesting that this is on the exception itself. Is it the same in JS?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r524813422", "createdAt": "2020-11-17T00:52:00Z", "author": {"login": "JoshLove-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "diffHunk": "@@ -0,0 +1,101 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.exception.AmqpErrorCondition;\n+import com.azure.core.amqp.exception.AmqpException;\n+import com.azure.core.exception.AzureException;\n+\n+/**\n+ * Defines {@link ServiceBusException} which has additional information about the operation that caused the\n+ * error.\n+ * @see ServiceBusErrorSource\n+ */\n+public final class ServiceBusException extends AzureException {\n+    private final transient ServiceBusErrorSource errorSource;\n+    private final transient ServiceBusFailureReason reason;\n+    private final boolean isTransient;\n+\n+    /**\n+     * @param throwable   for the error happened.\n+     * @param errorSource indicating which api caused the error.\n+     */\n+    public ServiceBusException(Throwable throwable, ServiceBusErrorSource errorSource) {\n+        super(throwable.getMessage(), throwable);\n+        this.errorSource = errorSource;\n+\n+        if (throwable instanceof AmqpException) {\n+            AmqpException amqpException = (AmqpException) throwable;\n+            reason = getServiceBusFailureReasonFromException(amqpException);\n+            isTransient = amqpException.isTransient();\n+        } else {\n+            reason = ServiceBusFailureReason.GENERAL_ERROR;\n+            isTransient = false;\n+        }\n+    }\n+\n+    /**\n+     * Gets the {@link ServiceBusErrorSource} in case of any errors.\n+     * @return the {@link ServiceBusErrorSource}\n+     */\n+    public ServiceBusErrorSource getErrorSource() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b96dde81bc8abbd435b323072a984852b015817"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgyMjk0MA==", "bodyText": "Ah, its not in JS. I need to move this to the ProcessErrorArgs equivalent in Java.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r524822940", "createdAt": "2020-11-17T01:20:38Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "diffHunk": "@@ -0,0 +1,101 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.exception.AmqpErrorCondition;\n+import com.azure.core.amqp.exception.AmqpException;\n+import com.azure.core.exception.AzureException;\n+\n+/**\n+ * Defines {@link ServiceBusException} which has additional information about the operation that caused the\n+ * error.\n+ * @see ServiceBusErrorSource\n+ */\n+public final class ServiceBusException extends AzureException {\n+    private final transient ServiceBusErrorSource errorSource;\n+    private final transient ServiceBusFailureReason reason;\n+    private final boolean isTransient;\n+\n+    /**\n+     * @param throwable   for the error happened.\n+     * @param errorSource indicating which api caused the error.\n+     */\n+    public ServiceBusException(Throwable throwable, ServiceBusErrorSource errorSource) {\n+        super(throwable.getMessage(), throwable);\n+        this.errorSource = errorSource;\n+\n+        if (throwable instanceof AmqpException) {\n+            AmqpException amqpException = (AmqpException) throwable;\n+            reason = getServiceBusFailureReasonFromException(amqpException);\n+            isTransient = amqpException.isTransient();\n+        } else {\n+            reason = ServiceBusFailureReason.GENERAL_ERROR;\n+            isTransient = false;\n+        }\n+    }\n+\n+    /**\n+     * Gets the {@link ServiceBusErrorSource} in case of any errors.\n+     * @return the {@link ServiceBusErrorSource}\n+     */\n+    public ServiceBusErrorSource getErrorSource() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxMzQyMg=="}, "originalCommit": {"oid": "1b96dde81bc8abbd435b323072a984852b015817"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgyNDc0OA==", "bodyText": "An interesting thing here is that the ServiceBusProcessor in Java takes a throwable, not a context object at the moment.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r524824748", "createdAt": "2020-11-17T01:26:13Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "diffHunk": "@@ -0,0 +1,101 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.exception.AmqpErrorCondition;\n+import com.azure.core.amqp.exception.AmqpException;\n+import com.azure.core.exception.AzureException;\n+\n+/**\n+ * Defines {@link ServiceBusException} which has additional information about the operation that caused the\n+ * error.\n+ * @see ServiceBusErrorSource\n+ */\n+public final class ServiceBusException extends AzureException {\n+    private final transient ServiceBusErrorSource errorSource;\n+    private final transient ServiceBusFailureReason reason;\n+    private final boolean isTransient;\n+\n+    /**\n+     * @param throwable   for the error happened.\n+     * @param errorSource indicating which api caused the error.\n+     */\n+    public ServiceBusException(Throwable throwable, ServiceBusErrorSource errorSource) {\n+        super(throwable.getMessage(), throwable);\n+        this.errorSource = errorSource;\n+\n+        if (throwable instanceof AmqpException) {\n+            AmqpException amqpException = (AmqpException) throwable;\n+            reason = getServiceBusFailureReasonFromException(amqpException);\n+            isTransient = amqpException.isTransient();\n+        } else {\n+            reason = ServiceBusFailureReason.GENERAL_ERROR;\n+            isTransient = false;\n+        }\n+    }\n+\n+    /**\n+     * Gets the {@link ServiceBusErrorSource} in case of any errors.\n+     * @return the {@link ServiceBusErrorSource}\n+     */\n+    public ServiceBusErrorSource getErrorSource() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxMzQyMg=="}, "originalCommit": {"oid": "1b96dde81bc8abbd435b323072a984852b015817"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgzOTk5OQ==", "bodyText": "I would expect the Error Source to be available only on the context object passed to the processError() in the processor client builder.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r524839999", "createdAt": "2020-11-17T02:14:13Z", "author": {"login": "ramya-rao-a"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "diffHunk": "@@ -0,0 +1,101 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.exception.AmqpErrorCondition;\n+import com.azure.core.amqp.exception.AmqpException;\n+import com.azure.core.exception.AzureException;\n+\n+/**\n+ * Defines {@link ServiceBusException} which has additional information about the operation that caused the\n+ * error.\n+ * @see ServiceBusErrorSource\n+ */\n+public final class ServiceBusException extends AzureException {\n+    private final transient ServiceBusErrorSource errorSource;\n+    private final transient ServiceBusFailureReason reason;\n+    private final boolean isTransient;\n+\n+    /**\n+     * @param throwable   for the error happened.\n+     * @param errorSource indicating which api caused the error.\n+     */\n+    public ServiceBusException(Throwable throwable, ServiceBusErrorSource errorSource) {\n+        super(throwable.getMessage(), throwable);\n+        this.errorSource = errorSource;\n+\n+        if (throwable instanceof AmqpException) {\n+            AmqpException amqpException = (AmqpException) throwable;\n+            reason = getServiceBusFailureReasonFromException(amqpException);\n+            isTransient = amqpException.isTransient();\n+        } else {\n+            reason = ServiceBusFailureReason.GENERAL_ERROR;\n+            isTransient = false;\n+        }\n+    }\n+\n+    /**\n+     * Gets the {@link ServiceBusErrorSource} in case of any errors.\n+     * @return the {@link ServiceBusErrorSource}\n+     */\n+    public ServiceBusErrorSource getErrorSource() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxMzQyMg=="}, "originalCommit": {"oid": "1b96dde81bc8abbd435b323072a984852b015817"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM4Nzk1Ng==", "bodyText": "Now that the error context includes the error source, this method can be removed from this class.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525387956", "createdAt": "2020-11-17T18:24:13Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "diffHunk": "@@ -0,0 +1,101 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.exception.AmqpErrorCondition;\n+import com.azure.core.amqp.exception.AmqpException;\n+import com.azure.core.exception.AzureException;\n+\n+/**\n+ * Defines {@link ServiceBusException} which has additional information about the operation that caused the\n+ * error.\n+ * @see ServiceBusErrorSource\n+ */\n+public final class ServiceBusException extends AzureException {\n+    private final transient ServiceBusErrorSource errorSource;\n+    private final transient ServiceBusFailureReason reason;\n+    private final boolean isTransient;\n+\n+    /**\n+     * @param throwable   for the error happened.\n+     * @param errorSource indicating which api caused the error.\n+     */\n+    public ServiceBusException(Throwable throwable, ServiceBusErrorSource errorSource) {\n+        super(throwable.getMessage(), throwable);\n+        this.errorSource = errorSource;\n+\n+        if (throwable instanceof AmqpException) {\n+            AmqpException amqpException = (AmqpException) throwable;\n+            reason = getServiceBusFailureReasonFromException(amqpException);\n+            isTransient = amqpException.isTransient();\n+        } else {\n+            reason = ServiceBusFailureReason.GENERAL_ERROR;\n+            isTransient = false;\n+        }\n+    }\n+\n+    /**\n+     * Gets the {@link ServiceBusErrorSource} in case of any errors.\n+     * @return the {@link ServiceBusErrorSource}\n+     */\n+    public ServiceBusErrorSource getErrorSource() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxMzQyMg=="}, "originalCommit": {"oid": "1b96dde81bc8abbd435b323072a984852b015817"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ0NzQ4OQ==", "bodyText": "I've made this field internal but we do use it when constructing the ErrorContext. So we won't expose it from the exception but we will use it internally to fill out the context (when appropriate).", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525447489", "createdAt": "2020-11-17T19:45:33Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "diffHunk": "@@ -0,0 +1,101 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.exception.AmqpErrorCondition;\n+import com.azure.core.amqp.exception.AmqpException;\n+import com.azure.core.exception.AzureException;\n+\n+/**\n+ * Defines {@link ServiceBusException} which has additional information about the operation that caused the\n+ * error.\n+ * @see ServiceBusErrorSource\n+ */\n+public final class ServiceBusException extends AzureException {\n+    private final transient ServiceBusErrorSource errorSource;\n+    private final transient ServiceBusFailureReason reason;\n+    private final boolean isTransient;\n+\n+    /**\n+     * @param throwable   for the error happened.\n+     * @param errorSource indicating which api caused the error.\n+     */\n+    public ServiceBusException(Throwable throwable, ServiceBusErrorSource errorSource) {\n+        super(throwable.getMessage(), throwable);\n+        this.errorSource = errorSource;\n+\n+        if (throwable instanceof AmqpException) {\n+            AmqpException amqpException = (AmqpException) throwable;\n+            reason = getServiceBusFailureReasonFromException(amqpException);\n+            isTransient = amqpException.isTransient();\n+        } else {\n+            reason = ServiceBusFailureReason.GENERAL_ERROR;\n+            isTransient = false;\n+        }\n+    }\n+\n+    /**\n+     * Gets the {@link ServiceBusErrorSource} in case of any errors.\n+     * @return the {@link ServiceBusErrorSource}\n+     */\n+    public ServiceBusErrorSource getErrorSource() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDgxMzQyMg=="}, "originalCommit": {"oid": "1b96dde81bc8abbd435b323072a984852b015817"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5MDY1MTc5OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusErrorSource.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QwMjoxNDo0OVrOH0htAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTo0MTo0MlrOH1GejA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg0MDE5NA==", "bodyText": "Assuming that the Error Source will be restricted to the processor only as per https://github.com/Azure/azure-sdk-for-java/pull/17601/files#r524813422, we dont need the above additions right?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r524840194", "createdAt": "2020-11-17T02:14:49Z", "author": {"login": "ramya-rao-a"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusErrorSource.java", "diffHunk": "@@ -36,4 +36,12 @@\n     /** Error while session is closed.*/\n     public static final ServiceBusErrorSource CLOSE_SESSION = fromString(\"CLOSE_SESSION\",\n         ServiceBusErrorSource.class);\n+\n+    /** Error while sending a message.*/\n+    public static final ServiceBusErrorSource SENDING = fromString(\"SENDING\",\n+            ServiceBusErrorSource.class);\n+\n+    /** Error while trying to do an operation on the management link. */\n+    public static final ServiceBusErrorSource MANAGEMENT = fromString(\"MANAGEMENT\",\n+            ServiceBusErrorSource.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810a107f1e8fd724e9c79646e5e6375a9224615a"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ0MjcwMA==", "bodyText": "I'm adding them in since we do throw this exception type from places other than the processor.\nHowever, I am making the errorSource field package-private now.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525442700", "createdAt": "2020-11-17T19:41:42Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusErrorSource.java", "diffHunk": "@@ -36,4 +36,12 @@\n     /** Error while session is closed.*/\n     public static final ServiceBusErrorSource CLOSE_SESSION = fromString(\"CLOSE_SESSION\",\n         ServiceBusErrorSource.class);\n+\n+    /** Error while sending a message.*/\n+    public static final ServiceBusErrorSource SENDING = fromString(\"SENDING\",\n+            ServiceBusErrorSource.class);\n+\n+    /** Error while trying to do an operation on the management link. */\n+    public static final ServiceBusErrorSource MANAGEMENT = fromString(\"MANAGEMENT\",\n+            ServiceBusErrorSource.class);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDg0MDE5NA=="}, "originalCommit": {"oid": "810a107f1e8fd724e9c79646e5e6375a9224615a"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDA3MDY5OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusProcessErrorContext.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNzo1ODozNFrOH1CHVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTo0NDo1OFrOH1GuYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM3MTIyMw==", "bodyText": "Make this final. Also, should we just name this as ServiceBusErrorContext?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525371223", "createdAt": "2020-11-17T17:58:34Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusProcessErrorContext.java", "diffHunk": "@@ -0,0 +1,60 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+/**\n+ * Context for errors handled by the Service Bus processor.\n+ */\n+public class ServiceBusProcessErrorContext {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810a107f1e8fd724e9c79646e5e6375a9224615a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ0Njc1Mw==", "bodyText": "Both of those sound good, done.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525446753", "createdAt": "2020-11-17T19:44:58Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusProcessErrorContext.java", "diffHunk": "@@ -0,0 +1,60 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+/**\n+ * Context for errors handled by the Service Bus processor.\n+ */\n+public class ServiceBusProcessErrorContext {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM3MTIyMw=="}, "originalCommit": {"oid": "810a107f1e8fd724e9c79646e5e6375a9224615a"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDExNDM3OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusProcessErrorContext.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxODowOToyMFrOH1CidQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTowODo1NlrOH1E2_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM3ODE2NQ==", "bodyText": "Why do we need fullyQualifiedNamespace and entityPath? If this is needed for the error context, we should consider adding it to the ServiceBusReceivedMessageContext too? I know Event Hubs had these properties on both event and error context. So, we should consider adding it to both places.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525378165", "createdAt": "2020-11-17T18:09:20Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusProcessErrorContext.java", "diffHunk": "@@ -0,0 +1,60 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+/**\n+ * Context for errors handled by the Service Bus processor.\n+ */\n+public class ServiceBusProcessErrorContext {\n+    private final Throwable exception;\n+    private final ServiceBusErrorSource errorSource;\n+    private final String fullyQualifiedNamespace;\n+    private final String entityPath;\n+\n+    ServiceBusProcessErrorContext(Throwable throwable, String fullyQualifiedNamespace, String entityPath) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810a107f1e8fd724e9c79646e5e6375a9224615a"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQxNjE4OQ==", "bodyText": "This is just mimicking what's already in .net, so this is more a question for @JoshLove-msft .", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525416189", "createdAt": "2020-11-17T19:08:56Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusProcessErrorContext.java", "diffHunk": "@@ -0,0 +1,60 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+/**\n+ * Context for errors handled by the Service Bus processor.\n+ */\n+public class ServiceBusProcessErrorContext {\n+    private final Throwable exception;\n+    private final ServiceBusErrorSource errorSource;\n+    private final String fullyQualifiedNamespace;\n+    private final String entityPath;\n+\n+    ServiceBusProcessErrorContext(Throwable throwable, String fullyQualifiedNamespace, String entityPath) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM3ODE2NQ=="}, "originalCommit": {"oid": "810a107f1e8fd724e9c79646e5e6375a9224615a"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDE1NzI0OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxODoxOTozMVrOH1C85Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTo0NDo0M1rOH1GtLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM4NDkzMw==", "bodyText": "Do we need the constructor to be public?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525384933", "createdAt": "2020-11-17T18:19:31Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "diffHunk": "@@ -0,0 +1,101 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.exception.AmqpErrorCondition;\n+import com.azure.core.amqp.exception.AmqpException;\n+import com.azure.core.exception.AzureException;\n+\n+/**\n+ * Defines {@link ServiceBusException} which has additional information about the operation that caused the\n+ * error.\n+ * @see ServiceBusErrorSource\n+ */\n+public final class ServiceBusException extends AzureException {\n+    private final transient ServiceBusErrorSource errorSource;\n+    private final transient ServiceBusFailureReason reason;\n+    private final boolean isTransient;\n+\n+    /**\n+     * @param throwable for the error happened.\n+     * @param errorSource indicating which api caused the error.\n+     */\n+    public ServiceBusException(Throwable throwable, ServiceBusErrorSource errorSource) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "185cd5935e6412004c189baa46e55632da23c38c"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ0NjQ0NQ==", "bodyText": "Nope, made package private.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525446445", "createdAt": "2020-11-17T19:44:43Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "diffHunk": "@@ -0,0 +1,101 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.exception.AmqpErrorCondition;\n+import com.azure.core.amqp.exception.AmqpException;\n+import com.azure.core.exception.AzureException;\n+\n+/**\n+ * Defines {@link ServiceBusException} which has additional information about the operation that caused the\n+ * error.\n+ * @see ServiceBusErrorSource\n+ */\n+public final class ServiceBusException extends AzureException {\n+    private final transient ServiceBusErrorSource errorSource;\n+    private final transient ServiceBusFailureReason reason;\n+    private final boolean isTransient;\n+\n+    /**\n+     * @param throwable for the error happened.\n+     * @param errorSource indicating which api caused the error.\n+     */\n+    public ServiceBusException(Throwable throwable, ServiceBusErrorSource errorSource) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM4NDkzMw=="}, "originalCommit": {"oid": "185cd5935e6412004c189baa46e55632da23c38c"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDE5MTM1OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxODoyNzoyM1rOH1DRcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTo0NDozMVrOH1Gr_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MDE5Mg==", "bodyText": "nit: update the comment too.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525390192", "createdAt": "2020-11-17T18:27:23Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "diffHunk": "@@ -1200,22 +1201,27 @@ private String getLinkName(String sessionId) {\n         } else if (!receiverOptions.isSessionReceiver()) {\n             return monoError(logger, new IllegalStateException(\"Cannot get session state on a non-session receiver.\"));\n         }\n+\n+        Mono<byte[]> result;\n+\n         if (sessionManager != null) {\n-            return sessionManager.getSessionState(sessionId);\n+            result =  sessionManager.getSessionState(sessionId);\n         } else {\n-            return connectionProcessor\n+            result =  connectionProcessor\n                 .flatMap(connection -> connection.getManagementNode(entityPath, entityType))\n                 .flatMap(channel -> channel.getSessionState(sessionId, getLinkName(sessionId)));\n         }\n+\n+        return result.onErrorMap((err) -> mapError(err, ServiceBusErrorSource.RECEIVE));\n     }\n \n     /**\n-     * Map the error to {@link ServiceBusReceiverException}\n+     * Map the error to {@link ServiceBusException}\n      */\n     private Throwable mapError(Throwable throwable, ServiceBusErrorSource errorSource) {\n         // If it is already `ServiceBusReceiverException`, we can just throw it.\n-        if (!(throwable instanceof ServiceBusReceiverException)) {\n-            return new ServiceBusReceiverException(throwable, errorSource);\n+        if (!(throwable instanceof ServiceBusException)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "185cd5935e6412004c189baa46e55632da23c38c"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ0NjE0MA==", "bodyText": "Removed the comment - realized what the function was doing was pretty obvious.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525446140", "createdAt": "2020-11-17T19:44:31Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "diffHunk": "@@ -1200,22 +1201,27 @@ private String getLinkName(String sessionId) {\n         } else if (!receiverOptions.isSessionReceiver()) {\n             return monoError(logger, new IllegalStateException(\"Cannot get session state on a non-session receiver.\"));\n         }\n+\n+        Mono<byte[]> result;\n+\n         if (sessionManager != null) {\n-            return sessionManager.getSessionState(sessionId);\n+            result =  sessionManager.getSessionState(sessionId);\n         } else {\n-            return connectionProcessor\n+            result =  connectionProcessor\n                 .flatMap(connection -> connection.getManagementNode(entityPath, entityType))\n                 .flatMap(channel -> channel.getSessionState(sessionId, getLinkName(sessionId)));\n         }\n+\n+        return result.onErrorMap((err) -> mapError(err, ServiceBusErrorSource.RECEIVE));\n     }\n \n     /**\n-     * Map the error to {@link ServiceBusReceiverException}\n+     * Map the error to {@link ServiceBusException}\n      */\n     private Throwable mapError(Throwable throwable, ServiceBusErrorSource errorSource) {\n         // If it is already `ServiceBusReceiverException`, we can just throw it.\n-        if (!(throwable instanceof ServiceBusReceiverException)) {\n-            return new ServiceBusReceiverException(throwable, errorSource);\n+        if (!(throwable instanceof ServiceBusException)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MDE5Mg=="}, "originalCommit": {"oid": "185cd5935e6412004c189baa46e55632da23c38c"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDE5NDU1OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxODoyODowN1rOH1DTRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTo0NDoxM1rOH1GqZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MDY2Mg==", "bodyText": "nit: fix indentation", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525390662", "createdAt": "2020-11-17T18:28:07Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "diffHunk": "@@ -1190,7 +1190,8 @@ private String getLinkName(String sessionId) {\n \n         return connectionProcessor\n             .flatMap(connection -> connection.getManagementNode(entityPath, entityType))\n-            .flatMap(channel -> channel.setSessionState(sessionId, sessionState, linkName));\n+            .flatMap(channel -> channel.setSessionState(sessionId, sessionState, linkName))\n+                .onErrorMap((err) -> mapError(err, ServiceBusErrorSource.RECEIVE));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "185cd5935e6412004c189baa46e55632da23c38c"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ0NTczNQ==", "bodyText": "Fixed to be flush with the other calls.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525445735", "createdAt": "2020-11-17T19:44:13Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "diffHunk": "@@ -1190,7 +1190,8 @@ private String getLinkName(String sessionId) {\n \n         return connectionProcessor\n             .flatMap(connection -> connection.getManagementNode(entityPath, entityType))\n-            .flatMap(channel -> channel.setSessionState(sessionId, sessionState, linkName));\n+            .flatMap(channel -> channel.setSessionState(sessionId, sessionState, linkName))\n+                .onErrorMap((err) -> mapError(err, ServiceBusErrorSource.RECEIVE));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MDY2Mg=="}, "originalCommit": {"oid": "185cd5935e6412004c189baa46e55632da23c38c"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDIwNjk5OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/implementation/ManagementChannel.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxODozMToxOFrOH1Da8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxOTo0MzozMFrOH1GnBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MjYyNA==", "bodyText": "I don't think then() is needed here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525392624", "createdAt": "2020-11-17T18:31:18Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/implementation/ManagementChannel.java", "diffHunk": "@@ -499,21 +509,26 @@ public void close() {\n                 sink.error(throwable);\n             })\n             .switchIfEmpty(Mono.error(new AmqpException(true, \"No response received from management channel.\",\n-                channel.getErrorContext())));\n+                channel.getErrorContext())))\n+            .onErrorMap(this::mapError);\n     }\n \n     private Mono<Void> isAuthorized(String operation) {\n         return tokenManager.getAuthorizationResults()\n             .next()\n             .handle((response, sink) -> {\n                 if (response != AmqpResponseCode.ACCEPTED && response != AmqpResponseCode.OK) {\n-                    sink.error(new AmqpException(false, String.format(\n-                        \"User does not have authorization to perform operation [%s] on entity [%s]. Response: [%s]\",\n-                        operation, entityPath, response), getErrorContext()));\n+                    final String message = String.format(\"User does not have authorization to perform operation \"\n+                        + \"[%s] on entity [%s]. Response: [%s]\", operation, entityPath, response);\n+                    final Throwable exc = new AmqpException(false, AmqpErrorCondition.UNAUTHORIZED_ACCESS,\n+                        message, getErrorContext());\n+                    sink.error(new ServiceBusException(exc, ServiceBusErrorSource.MANAGEMENT));\n                 } else {\n                     sink.complete();\n                 }\n-            });\n+            })\n+            .onErrorMap(this::mapError)\n+            .then();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "185cd5935e6412004c189baa46e55632da23c38c"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ0NDg3MA==", "bodyText": "You were right, it needed to be hoisted further up!", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525444870", "createdAt": "2020-11-17T19:43:30Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/implementation/ManagementChannel.java", "diffHunk": "@@ -499,21 +509,26 @@ public void close() {\n                 sink.error(throwable);\n             })\n             .switchIfEmpty(Mono.error(new AmqpException(true, \"No response received from management channel.\",\n-                channel.getErrorContext())));\n+                channel.getErrorContext())))\n+            .onErrorMap(this::mapError);\n     }\n \n     private Mono<Void> isAuthorized(String operation) {\n         return tokenManager.getAuthorizationResults()\n             .next()\n             .handle((response, sink) -> {\n                 if (response != AmqpResponseCode.ACCEPTED && response != AmqpResponseCode.OK) {\n-                    sink.error(new AmqpException(false, String.format(\n-                        \"User does not have authorization to perform operation [%s] on entity [%s]. Response: [%s]\",\n-                        operation, entityPath, response), getErrorContext()));\n+                    final String message = String.format(\"User does not have authorization to perform operation \"\n+                        + \"[%s] on entity [%s]. Response: [%s]\", operation, entityPath, response);\n+                    final Throwable exc = new AmqpException(false, AmqpErrorCondition.UNAUTHORIZED_ACCESS,\n+                        message, getErrorContext());\n+                    sink.error(new ServiceBusException(exc, ServiceBusErrorSource.MANAGEMENT));\n                 } else {\n                     sink.complete();\n                 }\n-            });\n+            })\n+            .onErrorMap(this::mapError)\n+            .then();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MjYyNA=="}, "originalCommit": {"oid": "185cd5935e6412004c189baa46e55632da23c38c"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDkyMTY3OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusErrorSource.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMDo0NToxNlrOH1Kw-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMToyMzoyNlrOH1MAmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUxMjk1Mg==", "bodyText": "To be consistent with the usage of other terms here, we should just call this SEND. Also, we should do the same for ABANDONED -> ABANDON (sorry, this was not part of your PR).", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525512952", "createdAt": "2020-11-17T20:45:16Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusErrorSource.java", "diffHunk": "@@ -36,4 +36,12 @@\n     /** Error while session is closed.*/\n     public static final ServiceBusErrorSource CLOSE_SESSION = fromString(\"CLOSE_SESSION\",\n         ServiceBusErrorSource.class);\n+\n+    /** Error while sending a message.*/\n+    public static final ServiceBusErrorSource SENDING = fromString(\"SENDING\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "649179ca3049c8b9686635b595034bd8a2f21757"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUzMzMzOQ==", "bodyText": "I live to serve. No apologies needed ;)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525533339", "createdAt": "2020-11-17T21:23:26Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusErrorSource.java", "diffHunk": "@@ -36,4 +36,12 @@\n     /** Error while session is closed.*/\n     public static final ServiceBusErrorSource CLOSE_SESSION = fromString(\"CLOSE_SESSION\",\n         ServiceBusErrorSource.class);\n+\n+    /** Error while sending a message.*/\n+    public static final ServiceBusErrorSource SENDING = fromString(\"SENDING\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUxMjk1Mg=="}, "originalCommit": {"oid": "649179ca3049c8b9686635b595034bd8a2f21757"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDkyNzkyOnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMDo0NzowNlrOH1K03w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMToyMzozNVrOH1MA6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUxMzk1MQ==", "bodyText": "PROTO_IO falls under SERVICE_COMMUNICATION_PROBLEM", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525513951", "createdAt": "2020-11-17T20:47:06Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "diffHunk": "@@ -0,0 +1,101 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.exception.AmqpErrorCondition;\n+import com.azure.core.amqp.exception.AmqpException;\n+import com.azure.core.exception.AzureException;\n+\n+/**\n+ * Defines {@link ServiceBusException} which has additional information about the operation that caused the\n+ * error.\n+ * @see ServiceBusErrorSource\n+ */\n+public final class ServiceBusException extends AzureException {\n+    private final transient ServiceBusErrorSource errorSource;\n+    private final transient ServiceBusFailureReason reason;\n+    private final boolean isTransient;\n+\n+    /**\n+     * @param throwable for the error happened.\n+     * @param errorSource indicating which api caused the error.\n+     */\n+    public ServiceBusException(Throwable throwable, ServiceBusErrorSource errorSource) {\n+        super(throwable.getMessage(), throwable);\n+        this.errorSource = errorSource;\n+\n+        if (throwable instanceof AmqpException) {\n+            AmqpException amqpException = (AmqpException) throwable;\n+            reason = getServiceBusFailureReasonFromException(amqpException);\n+            isTransient = amqpException.isTransient();\n+        } else {\n+            reason = ServiceBusFailureReason.GENERAL_ERROR;\n+            isTransient = false;\n+        }\n+    }\n+\n+    /**\n+     * Gets the {@link ServiceBusErrorSource} in case of any errors.\n+     * @return the {@link ServiceBusErrorSource}\n+     */\n+    ServiceBusErrorSource getErrorSource() {\n+        return errorSource;\n+    }\n+\n+    /**\n+     * Gets the {@link ServiceBusFailureReason} in case of any errors.\n+     * @return the {@link ServiceBusFailureReason}\n+     */\n+    public ServiceBusFailureReason getReason() {\n+        return reason;\n+    }\n+\n+    /**\n+     * A boolean indicating if the exception is a transient error or not.\n+     *\n+     * @return returns true when user can retry the operation that generated the exception without additional\n+     * intervention.\n+     */\n+    public boolean isTransient() {\n+        return isTransient;\n+    }\n+\n+    private ServiceBusFailureReason getServiceBusFailureReasonFromException(AmqpException throwable) {\n+        final AmqpErrorCondition errorCondition = throwable.getErrorCondition();\n+\n+        if (errorCondition == null) {\n+            return ServiceBusFailureReason.GENERAL_ERROR;\n+        }\n+\n+        switch (errorCondition) {\n+            case NOT_FOUND:\n+                return ServiceBusFailureReason.MESSAGING_ENTITY_NOT_FOUND;\n+            case MESSAGE_LOCK_LOST:\n+                return ServiceBusFailureReason.MESSAGE_LOCK_LOST;\n+            case MESSAGE_NOT_FOUND:\n+                return ServiceBusFailureReason.MESSAGE_NOT_FOUND;\n+            case LINK_PAYLOAD_SIZE_EXCEEDED:\n+                return ServiceBusFailureReason.MESSAGE_SIZE_EXCEEDED;\n+            case ENTITY_ALREADY_EXISTS:\n+                return ServiceBusFailureReason.MESSAGING_ENTITY_ALREADY_EXISTS;\n+            case ENTITY_DISABLED_ERROR:\n+                return ServiceBusFailureReason.MESSAGING_ENTITY_DISABLED;\n+            case RESOURCE_LIMIT_EXCEEDED:\n+                return ServiceBusFailureReason.QUOTA_EXCEEDED;\n+            case SERVER_BUSY_ERROR:\n+                return ServiceBusFailureReason.SERVICE_BUSY;\n+            case TIMEOUT_ERROR:\n+                return ServiceBusFailureReason.SERVICE_TIMEOUT;\n+            case SESSION_CANNOT_BE_LOCKED:\n+                return ServiceBusFailureReason.SESSION_CANNOT_BE_LOCKED;\n+            case SESSION_LOCK_LOST:\n+                return ServiceBusFailureReason.SESSION_LOCK_LOST;\n+            case UNAUTHORIZED_ACCESS:\n+                return ServiceBusFailureReason.UNAUTHORIZED;\n+            case PROTON_IO:         // does this mapping make sense?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "649179ca3049c8b9686635b595034bd8a2f21757"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUzMzQxNg==", "bodyText": "Done.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525533416", "createdAt": "2020-11-17T21:23:35Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusException.java", "diffHunk": "@@ -0,0 +1,101 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.amqp.exception.AmqpErrorCondition;\n+import com.azure.core.amqp.exception.AmqpException;\n+import com.azure.core.exception.AzureException;\n+\n+/**\n+ * Defines {@link ServiceBusException} which has additional information about the operation that caused the\n+ * error.\n+ * @see ServiceBusErrorSource\n+ */\n+public final class ServiceBusException extends AzureException {\n+    private final transient ServiceBusErrorSource errorSource;\n+    private final transient ServiceBusFailureReason reason;\n+    private final boolean isTransient;\n+\n+    /**\n+     * @param throwable for the error happened.\n+     * @param errorSource indicating which api caused the error.\n+     */\n+    public ServiceBusException(Throwable throwable, ServiceBusErrorSource errorSource) {\n+        super(throwable.getMessage(), throwable);\n+        this.errorSource = errorSource;\n+\n+        if (throwable instanceof AmqpException) {\n+            AmqpException amqpException = (AmqpException) throwable;\n+            reason = getServiceBusFailureReasonFromException(amqpException);\n+            isTransient = amqpException.isTransient();\n+        } else {\n+            reason = ServiceBusFailureReason.GENERAL_ERROR;\n+            isTransient = false;\n+        }\n+    }\n+\n+    /**\n+     * Gets the {@link ServiceBusErrorSource} in case of any errors.\n+     * @return the {@link ServiceBusErrorSource}\n+     */\n+    ServiceBusErrorSource getErrorSource() {\n+        return errorSource;\n+    }\n+\n+    /**\n+     * Gets the {@link ServiceBusFailureReason} in case of any errors.\n+     * @return the {@link ServiceBusFailureReason}\n+     */\n+    public ServiceBusFailureReason getReason() {\n+        return reason;\n+    }\n+\n+    /**\n+     * A boolean indicating if the exception is a transient error or not.\n+     *\n+     * @return returns true when user can retry the operation that generated the exception without additional\n+     * intervention.\n+     */\n+    public boolean isTransient() {\n+        return isTransient;\n+    }\n+\n+    private ServiceBusFailureReason getServiceBusFailureReasonFromException(AmqpException throwable) {\n+        final AmqpErrorCondition errorCondition = throwable.getErrorCondition();\n+\n+        if (errorCondition == null) {\n+            return ServiceBusFailureReason.GENERAL_ERROR;\n+        }\n+\n+        switch (errorCondition) {\n+            case NOT_FOUND:\n+                return ServiceBusFailureReason.MESSAGING_ENTITY_NOT_FOUND;\n+            case MESSAGE_LOCK_LOST:\n+                return ServiceBusFailureReason.MESSAGE_LOCK_LOST;\n+            case MESSAGE_NOT_FOUND:\n+                return ServiceBusFailureReason.MESSAGE_NOT_FOUND;\n+            case LINK_PAYLOAD_SIZE_EXCEEDED:\n+                return ServiceBusFailureReason.MESSAGE_SIZE_EXCEEDED;\n+            case ENTITY_ALREADY_EXISTS:\n+                return ServiceBusFailureReason.MESSAGING_ENTITY_ALREADY_EXISTS;\n+            case ENTITY_DISABLED_ERROR:\n+                return ServiceBusFailureReason.MESSAGING_ENTITY_DISABLED;\n+            case RESOURCE_LIMIT_EXCEEDED:\n+                return ServiceBusFailureReason.QUOTA_EXCEEDED;\n+            case SERVER_BUSY_ERROR:\n+                return ServiceBusFailureReason.SERVICE_BUSY;\n+            case TIMEOUT_ERROR:\n+                return ServiceBusFailureReason.SERVICE_TIMEOUT;\n+            case SESSION_CANNOT_BE_LOCKED:\n+                return ServiceBusFailureReason.SESSION_CANNOT_BE_LOCKED;\n+            case SESSION_LOCK_LOST:\n+                return ServiceBusFailureReason.SESSION_LOCK_LOST;\n+            case UNAUTHORIZED_ACCESS:\n+                return ServiceBusFailureReason.UNAUTHORIZED;\n+            case PROTON_IO:         // does this mapping make sense?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUxMzk1MQ=="}, "originalCommit": {"oid": "649179ca3049c8b9686635b595034bd8a2f21757"}, "originalPosition": 96}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDkzNjQ2OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusFailureReason.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMDo0OTo0MFrOH1K6Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMTozMzoxNlrOH1MVtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUxNTI5OQ==", "bodyText": "Some alternate name proposals: SERVICE_COMMUNICATION_ERROR, SERVICE_CONNECTION_ERROR. Generally, we don't suffix PROBLEM. ERROR is the more commonly used term.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525515299", "createdAt": "2020-11-17T20:49:40Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusFailureReason.java", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.util.ExpandableStringEnum;\n+\n+/**\n+ * The set of well-known reasons for an Service Bus operation failure that was the cause of an exception.\n+ */\n+public final class ServiceBusFailureReason extends ExpandableStringEnum<ServiceBusFailureReason> {\n+    // NOTE: this list is intended to mirror the reasons we have in .net\n+    // https://github.com/Azure/azure-sdk-for-net/blob/master/sdk/servicebus/Azure.Messaging\n+    // .ServiceBus/src/Primitives/ServiceBusFailureReason.cs\n+\n+    /** The exception was the result of a general error within the client library. */\n+    public static final ServiceBusFailureReason GENERAL_ERROR = fromString(\"GENERAL_ERROR\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The lock on the message is lost. Callers should call attempt to receive and process the message again. */\n+    public static final ServiceBusFailureReason MESSAGE_LOCK_LOST = fromString(\"MESSAGE_LOCK_LOST\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The requested message was not found. */\n+    public static final ServiceBusFailureReason MESSAGE_NOT_FOUND = fromString(\"MESSAGE_NOT_FOUND\",\n+        ServiceBusFailureReason.class);\n+\n+    /** A message is larger than the maximum size allowed for its transport. */\n+    public static final ServiceBusFailureReason MESSAGE_SIZE_EXCEEDED = fromString(\"MESSAGE_SIZE_EXCEEDED\",\n+        ServiceBusFailureReason.class);\n+\n+    /** An entity with the same name exists under the same namespace. */\n+    public static final ServiceBusFailureReason MESSAGING_ENTITY_ALREADY_EXISTS = fromString(\n+        \"MESSAGING_ENTITY_ALREADY_EXISTS\", ServiceBusFailureReason.class);\n+\n+    /** The Messaging Entity is disabled. Enable the entity again using Portal. */\n+    public static final ServiceBusFailureReason MESSAGING_ENTITY_DISABLED = fromString(\"MESSAGING_ENTITY_DISABLED\",\n+        ServiceBusFailureReason.class);\n+\n+    /** A Service Bus resource cannot be found by the Service Bus service. */\n+    public static final ServiceBusFailureReason MESSAGING_ENTITY_NOT_FOUND = fromString(\"MESSAGING_ENTITY_NOT_FOUND\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The quota applied to an Service Bus resource has been exceeded while interacting with the Azure Service Bus\n+     * service. */\n+    public static final ServiceBusFailureReason QUOTA_EXCEEDED = fromString(\"QUOTA_EXCEEDED\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The Azure Service Bus service reports that it is busy in response to a client request to perform an operation\n+     * . */\n+    public static final ServiceBusFailureReason SERVICE_BUSY = fromString(\"SERVICE_BUSY\",\n+        ServiceBusFailureReason.class);\n+\n+    /** An operation or other request timed out while interacting with the Azure Service Bus service. */\n+    public static final ServiceBusFailureReason SERVICE_TIMEOUT = fromString(\"SERVICE_TIMEOUT\",\n+        ServiceBusFailureReason.class);\n+\n+    /** There was a general communications error encountered when interacting with the Azure Service Bus service. */\n+    public static final ServiceBusFailureReason SERVICE_COMMUNICATION_PROBLEM = fromString(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "649179ca3049c8b9686635b595034bd8a2f21757"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUyOTg5OQ==", "bodyText": "Went with this just to get better search alignment (this name matches with .net).\nI can change it, but that was the reasoning.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525529899", "createdAt": "2020-11-17T21:16:54Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusFailureReason.java", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.util.ExpandableStringEnum;\n+\n+/**\n+ * The set of well-known reasons for an Service Bus operation failure that was the cause of an exception.\n+ */\n+public final class ServiceBusFailureReason extends ExpandableStringEnum<ServiceBusFailureReason> {\n+    // NOTE: this list is intended to mirror the reasons we have in .net\n+    // https://github.com/Azure/azure-sdk-for-net/blob/master/sdk/servicebus/Azure.Messaging\n+    // .ServiceBus/src/Primitives/ServiceBusFailureReason.cs\n+\n+    /** The exception was the result of a general error within the client library. */\n+    public static final ServiceBusFailureReason GENERAL_ERROR = fromString(\"GENERAL_ERROR\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The lock on the message is lost. Callers should call attempt to receive and process the message again. */\n+    public static final ServiceBusFailureReason MESSAGE_LOCK_LOST = fromString(\"MESSAGE_LOCK_LOST\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The requested message was not found. */\n+    public static final ServiceBusFailureReason MESSAGE_NOT_FOUND = fromString(\"MESSAGE_NOT_FOUND\",\n+        ServiceBusFailureReason.class);\n+\n+    /** A message is larger than the maximum size allowed for its transport. */\n+    public static final ServiceBusFailureReason MESSAGE_SIZE_EXCEEDED = fromString(\"MESSAGE_SIZE_EXCEEDED\",\n+        ServiceBusFailureReason.class);\n+\n+    /** An entity with the same name exists under the same namespace. */\n+    public static final ServiceBusFailureReason MESSAGING_ENTITY_ALREADY_EXISTS = fromString(\n+        \"MESSAGING_ENTITY_ALREADY_EXISTS\", ServiceBusFailureReason.class);\n+\n+    /** The Messaging Entity is disabled. Enable the entity again using Portal. */\n+    public static final ServiceBusFailureReason MESSAGING_ENTITY_DISABLED = fromString(\"MESSAGING_ENTITY_DISABLED\",\n+        ServiceBusFailureReason.class);\n+\n+    /** A Service Bus resource cannot be found by the Service Bus service. */\n+    public static final ServiceBusFailureReason MESSAGING_ENTITY_NOT_FOUND = fromString(\"MESSAGING_ENTITY_NOT_FOUND\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The quota applied to an Service Bus resource has been exceeded while interacting with the Azure Service Bus\n+     * service. */\n+    public static final ServiceBusFailureReason QUOTA_EXCEEDED = fromString(\"QUOTA_EXCEEDED\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The Azure Service Bus service reports that it is busy in response to a client request to perform an operation\n+     * . */\n+    public static final ServiceBusFailureReason SERVICE_BUSY = fromString(\"SERVICE_BUSY\",\n+        ServiceBusFailureReason.class);\n+\n+    /** An operation or other request timed out while interacting with the Azure Service Bus service. */\n+    public static final ServiceBusFailureReason SERVICE_TIMEOUT = fromString(\"SERVICE_TIMEOUT\",\n+        ServiceBusFailureReason.class);\n+\n+    /** There was a general communications error encountered when interacting with the Azure Service Bus service. */\n+    public static final ServiceBusFailureReason SERVICE_COMMUNICATION_PROBLEM = fromString(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUxNTI5OQ=="}, "originalCommit": {"oid": "649179ca3049c8b9686635b595034bd8a2f21757"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUzODc0MA==", "bodyText": "(renamed!)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525538740", "createdAt": "2020-11-17T21:33:16Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusFailureReason.java", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+import com.azure.core.util.ExpandableStringEnum;\n+\n+/**\n+ * The set of well-known reasons for an Service Bus operation failure that was the cause of an exception.\n+ */\n+public final class ServiceBusFailureReason extends ExpandableStringEnum<ServiceBusFailureReason> {\n+    // NOTE: this list is intended to mirror the reasons we have in .net\n+    // https://github.com/Azure/azure-sdk-for-net/blob/master/sdk/servicebus/Azure.Messaging\n+    // .ServiceBus/src/Primitives/ServiceBusFailureReason.cs\n+\n+    /** The exception was the result of a general error within the client library. */\n+    public static final ServiceBusFailureReason GENERAL_ERROR = fromString(\"GENERAL_ERROR\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The lock on the message is lost. Callers should call attempt to receive and process the message again. */\n+    public static final ServiceBusFailureReason MESSAGE_LOCK_LOST = fromString(\"MESSAGE_LOCK_LOST\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The requested message was not found. */\n+    public static final ServiceBusFailureReason MESSAGE_NOT_FOUND = fromString(\"MESSAGE_NOT_FOUND\",\n+        ServiceBusFailureReason.class);\n+\n+    /** A message is larger than the maximum size allowed for its transport. */\n+    public static final ServiceBusFailureReason MESSAGE_SIZE_EXCEEDED = fromString(\"MESSAGE_SIZE_EXCEEDED\",\n+        ServiceBusFailureReason.class);\n+\n+    /** An entity with the same name exists under the same namespace. */\n+    public static final ServiceBusFailureReason MESSAGING_ENTITY_ALREADY_EXISTS = fromString(\n+        \"MESSAGING_ENTITY_ALREADY_EXISTS\", ServiceBusFailureReason.class);\n+\n+    /** The Messaging Entity is disabled. Enable the entity again using Portal. */\n+    public static final ServiceBusFailureReason MESSAGING_ENTITY_DISABLED = fromString(\"MESSAGING_ENTITY_DISABLED\",\n+        ServiceBusFailureReason.class);\n+\n+    /** A Service Bus resource cannot be found by the Service Bus service. */\n+    public static final ServiceBusFailureReason MESSAGING_ENTITY_NOT_FOUND = fromString(\"MESSAGING_ENTITY_NOT_FOUND\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The quota applied to an Service Bus resource has been exceeded while interacting with the Azure Service Bus\n+     * service. */\n+    public static final ServiceBusFailureReason QUOTA_EXCEEDED = fromString(\"QUOTA_EXCEEDED\",\n+        ServiceBusFailureReason.class);\n+\n+    /** The Azure Service Bus service reports that it is busy in response to a client request to perform an operation\n+     * . */\n+    public static final ServiceBusFailureReason SERVICE_BUSY = fromString(\"SERVICE_BUSY\",\n+        ServiceBusFailureReason.class);\n+\n+    /** An operation or other request timed out while interacting with the Azure Service Bus service. */\n+    public static final ServiceBusFailureReason SERVICE_TIMEOUT = fromString(\"SERVICE_TIMEOUT\",\n+        ServiceBusFailureReason.class);\n+\n+    /** There was a general communications error encountered when interacting with the Azure Service Bus service. */\n+    public static final ServiceBusFailureReason SERVICE_COMMUNICATION_PROBLEM = fromString(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUxNTI5OQ=="}, "originalCommit": {"oid": "649179ca3049c8b9686635b595034bd8a2f21757"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI5NDk0MjAwOnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/test/java/com/azure/messaging/servicebus/ServiceBusExceptionTestHelper.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMDo1MTowOFrOH1K9eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMToxMTowOVrOH1LnPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUxNjE1Mw==", "bodyText": "\ud83d\ude01", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525516153", "createdAt": "2020-11-17T20:51:08Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/test/java/com/azure/messaging/servicebus/ServiceBusExceptionTestHelper.java", "diffHunk": "@@ -0,0 +1,15 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+public class ServiceBusExceptionTestHelper {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "649179ca3049c8b9686635b595034bd8a2f21757"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUyNjg0Ng==", "bodyText": "It was approved by the deputy architect for Java! ;)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17601#discussion_r525526846", "createdAt": "2020-11-17T21:11:09Z", "author": {"login": "richardpark-msft"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/test/java/com/azure/messaging/servicebus/ServiceBusExceptionTestHelper.java", "diffHunk": "@@ -0,0 +1,15 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.messaging.servicebus;\n+\n+public class ServiceBusExceptionTestHelper {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTUxNjE1Mw=="}, "originalCommit": {"oid": "649179ca3049c8b9686635b595034bd8a2f21757"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2869, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}