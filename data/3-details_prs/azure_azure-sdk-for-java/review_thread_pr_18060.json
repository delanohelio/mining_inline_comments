{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NTc3MTky", "number": 18060, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxOToyNjo1MlrOFFKvPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMjoxNzo1NFrOFF1UvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwOTYzMTMyOnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-common/CHANGELOG.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxOToyNjo1MlrOIFik2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxOTo1Mjo1MVrOIFkTlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjY4MDI4Mw==", "bodyText": "Should we also include the breaking change of renaming CommunicationUser to CommunicationUserIdentifier in this file? Or do you plan to include that update in a different PR?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18060#discussion_r542680283", "createdAt": "2020-12-14T19:26:52Z", "author": {"login": "JianpingChen"}, "path": "sdk/communication/azure-communication-common/CHANGELOG.md", "diffHunk": "@@ -3,6 +3,8 @@\n ## 1.0.0-beta.4 (Unreleased)\n ### Breaking Changes\n - Renamed `CommunicationUserCredential` to `CommunicationTokenCredential`\n+- Replaced constructor `CommunicationTokenCredential(TokenRefresher tokenRefresher, String initialToken,\tboolean refreshProactively)` with `CommunicationTokenCredential(TokenRefreshOptions tokenRefreshOptions, String initialToken)`\n+- Replaced constructor `CommunicationTokenCredential(TokenRefresher tokenRefresher)` with `CommunicationTokenCredential(TokenRefreshOptions tokenRefreshOptions)`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69145df0396789549be7d1bf903eeb3e4af58515"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjcwODYzMQ==", "bodyText": "Good point JP, I will need to include that in the other PR that has the renaming changes. This PR is about something different so I won't include it in here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18060#discussion_r542708631", "createdAt": "2020-12-14T19:52:51Z", "author": {"login": "minnieliu"}, "path": "sdk/communication/azure-communication-common/CHANGELOG.md", "diffHunk": "@@ -3,6 +3,8 @@\n ## 1.0.0-beta.4 (Unreleased)\n ### Breaking Changes\n - Renamed `CommunicationUserCredential` to `CommunicationTokenCredential`\n+- Replaced constructor `CommunicationTokenCredential(TokenRefresher tokenRefresher, String initialToken,\tboolean refreshProactively)` with `CommunicationTokenCredential(TokenRefreshOptions tokenRefreshOptions, String initialToken)`\n+- Replaced constructor `CommunicationTokenCredential(TokenRefresher tokenRefresher)` with `CommunicationTokenCredential(TokenRefreshOptions tokenRefreshOptions)`", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjY4MDI4Mw=="}, "originalCommit": {"oid": "69145df0396789549be7d1bf903eeb3e4af58515"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTY1ODUyOnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/CommunicationTokenCredential.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODozMTo1MlrOIGZ5DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMDozMDowMlrOIGeqtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU4NjU3Mg==", "bodyText": "I think we should rename initialToken to simply token everywhere.\nFor the constructor with refresh options, token can be an optional argument in the options bag, we don't need it as a top-level arg in the constructor.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18060#discussion_r543586572", "createdAt": "2020-12-15T18:31:52Z", "author": {"login": "DominikMe"}, "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/CommunicationTokenCredential.java", "diffHunk": "@@ -61,19 +62,14 @@ public CommunicationTokenCredential(TokenRefresher tokenRefresher) {\n      * CallbackOffsetMinutes defaulted to two minutes. To modify this default, call\n      * setCallbackOffsetMinutes after construction\n      * \n-     * @param tokenRefresher implementation to supply fresh token when reqested\n+     * @param tokenRefreshOptions implementation to supply fresh token when reqested\n      * @param initialToken serialized JWT token\n-     * @param refreshProactively when set to true, turn on proactive fetching to call\n-     *                           tokenRefresher before token expiry by minutes set\n-     *                           with setCallbackOffsetMinutes or default value of\n-     *                           two minutes\n      */\n-    public CommunicationTokenCredential(TokenRefresher tokenRefresher, String initialToken,\n-            boolean refreshProactively) {\n-        this(tokenRefresher);\n+    public CommunicationTokenCredential(TokenRefreshOptions tokenRefreshOptions, String initialToken) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69145df0396789549be7d1bf903eeb3e4af58515"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY2NDgyMQ==", "bodyText": "Sure, thanks Dom, Java does not have optional arguments so I've overloaded the constructor with the token param", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18060#discussion_r543664821", "createdAt": "2020-12-15T20:30:02Z", "author": {"login": "minnieliu"}, "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/CommunicationTokenCredential.java", "diffHunk": "@@ -61,19 +62,14 @@ public CommunicationTokenCredential(TokenRefresher tokenRefresher) {\n      * CallbackOffsetMinutes defaulted to two minutes. To modify this default, call\n      * setCallbackOffsetMinutes after construction\n      * \n-     * @param tokenRefresher implementation to supply fresh token when reqested\n+     * @param tokenRefreshOptions implementation to supply fresh token when reqested\n      * @param initialToken serialized JWT token\n-     * @param refreshProactively when set to true, turn on proactive fetching to call\n-     *                           tokenRefresher before token expiry by minutes set\n-     *                           with setCallbackOffsetMinutes or default value of\n-     *                           two minutes\n      */\n-    public CommunicationTokenCredential(TokenRefresher tokenRefresher, String initialToken,\n-            boolean refreshProactively) {\n-        this(tokenRefresher);\n+    public CommunicationTokenCredential(TokenRefreshOptions tokenRefreshOptions, String initialToken) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU4NjU3Mg=="}, "originalCommit": {"oid": "69145df0396789549be7d1bf903eeb3e4af58515"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTY2MzUwOnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/TokenRefreshOptions.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODozMzowMVrOIGZ76Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMDozMDoyM1rOIGerlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU4NzMwNQ==", "bodyText": "To avoid naming ambiguity I can hear Kryzsztof ask to rename this to CommunicationTokenRefreshOptions and I think we should. :-)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18060#discussion_r543587305", "createdAt": "2020-12-15T18:33:01Z", "author": {"login": "DominikMe"}, "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/TokenRefreshOptions.java", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.communication.common;\n+\n+/**\n+ * Options for refreshing CommunicationTokenCredential\n+ */\n+public class TokenRefreshOptions {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69145df0396789549be7d1bf903eeb3e4af58515"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY2NTA0NA==", "bodyText": "Done ;)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18060#discussion_r543665044", "createdAt": "2020-12-15T20:30:23Z", "author": {"login": "minnieliu"}, "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/TokenRefreshOptions.java", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.communication.common;\n+\n+/**\n+ * Options for refreshing CommunicationTokenCredential\n+ */\n+public class TokenRefreshOptions {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU4NzMwNQ=="}, "originalCommit": {"oid": "69145df0396789549be7d1bf903eeb3e4af58515"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTY2Njc0OnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/TokenRefreshOptions.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxODozMzo1MlrOIGZ91Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMDozMDo0N1rOIGesjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU4Nzc5Nw==", "bodyText": "As mentioned above, token can go here too. The comment can explain that token is an optional initial token.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18060#discussion_r543587797", "createdAt": "2020-12-15T18:33:52Z", "author": {"login": "DominikMe"}, "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/TokenRefreshOptions.java", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.communication.common;\n+\n+/**\n+ * Options for refreshing CommunicationTokenCredential\n+ */\n+public class TokenRefreshOptions {\n+    private final TokenRefresher tokenRefresher;\n+    private final boolean refreshProactively;\n+\n+    /**\n+     * Creates a TokenRefreshOptions object\n+     * \n+     * @param tokenRefresher the token refresher to provide capacity to fetch fresh token\n+     * @param refreshProactively when set to true, turn on proactive fetching to call\n+     *                           tokenRefresher before token expiry by minutes set\n+     *                           with setCallbackOffsetMinutes or default value of\n+     *                           two minutes\n+     */\n+    public TokenRefreshOptions(TokenRefresher tokenRefresher, boolean refreshProactively) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69145df0396789549be7d1bf903eeb3e4af58515"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY2NTI5Mw==", "bodyText": "Done, thanks Dom", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18060#discussion_r543665293", "createdAt": "2020-12-15T20:30:47Z", "author": {"login": "minnieliu"}, "path": "sdk/communication/azure-communication-common/src/main/java/com/azure/communication/common/TokenRefreshOptions.java", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.communication.common;\n+\n+/**\n+ * Options for refreshing CommunicationTokenCredential\n+ */\n+public class TokenRefreshOptions {\n+    private final TokenRefresher tokenRefresher;\n+    private final boolean refreshProactively;\n+\n+    /**\n+     * Creates a TokenRefreshOptions object\n+     * \n+     * @param tokenRefresher the token refresher to provide capacity to fetch fresh token\n+     * @param refreshProactively when set to true, turn on proactive fetching to call\n+     *                           tokenRefresher before token expiry by minutes set\n+     *                           with setCallbackOffsetMinutes or default value of\n+     *                           two minutes\n+     */\n+    public TokenRefreshOptions(TokenRefresher tokenRefresher, boolean refreshProactively) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU4Nzc5Nw=="}, "originalCommit": {"oid": "69145df0396789549be7d1bf903eeb3e4af58515"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNjYwODYxOnYy", "diffSide": "RIGHT", "path": "sdk/communication/azure-communication-common/CHANGELOG.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMjoxNzo1NFrOIGigPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMjoyOTowNlrOIGi36Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcyNzY3OA==", "bodyText": "One more change needed after the last commit.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - Replaced constructor `CommunicationTokenCredential(TokenRefresher tokenRefresher, String initialToken,\tboolean refreshProactively)` with `CommunicationTokenCredential(CommunicationTokenRefreshOptions tokenRefreshOptions, String initialToken)`\n          \n          \n            \n            - Replaced constructor `CommunicationTokenCredential(TokenRefresher tokenRefresher, String initialToken,\tboolean refreshProactively)` with `CommunicationTokenCredential(CommunicationTokenRefreshOptions tokenRefreshOptions)`\n          \n      \n    \n    \n  \n\nWe can also combine both replacements into one line.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18060#discussion_r543727678", "createdAt": "2020-12-15T22:17:54Z", "author": {"login": "DominikMe"}, "path": "sdk/communication/azure-communication-common/CHANGELOG.md", "diffHunk": "@@ -3,6 +3,8 @@\n ## 1.0.0-beta.4 (Unreleased)\n ### Breaking Changes\n - Renamed `CommunicationUserCredential` to `CommunicationTokenCredential`\n+- Replaced constructor `CommunicationTokenCredential(TokenRefresher tokenRefresher, String initialToken,\tboolean refreshProactively)` with `CommunicationTokenCredential(CommunicationTokenRefreshOptions tokenRefreshOptions, String initialToken)`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b8b0c4c0bd88241b28b1214c775ef9d5f6a9368"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzczMzczNw==", "bodyText": "Good catch! Thank you :)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18060#discussion_r543733737", "createdAt": "2020-12-15T22:29:06Z", "author": {"login": "minnieliu"}, "path": "sdk/communication/azure-communication-common/CHANGELOG.md", "diffHunk": "@@ -3,6 +3,8 @@\n ## 1.0.0-beta.4 (Unreleased)\n ### Breaking Changes\n - Renamed `CommunicationUserCredential` to `CommunicationTokenCredential`\n+- Replaced constructor `CommunicationTokenCredential(TokenRefresher tokenRefresher, String initialToken,\tboolean refreshProactively)` with `CommunicationTokenCredential(CommunicationTokenRefreshOptions tokenRefreshOptions, String initialToken)`", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcyNzY3OA=="}, "originalCommit": {"oid": "7b8b0c4c0bd88241b28b1214c775ef9d5f6a9368"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2694, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}