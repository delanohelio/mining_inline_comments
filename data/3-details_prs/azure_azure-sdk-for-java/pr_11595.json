{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MzI4ODQy", "number": 11595, "title": "[FEATURE] Cosmos | Wire up ConnectionPolicy, DirectConnectionConfig, and RntbdTransportClient.Options", "bodyText": "In addition default RntbdTransportClient.Options are now obtained from DirectConnectionConfig.defaultConfig, the definitive source for all default public-facing Direct TCP options.\nAlso\n\nAsyncBenchmark now correctly reports the number of pre-created documents (not the number of operations).\nRemoved dead code from RntbdClientChannelPool.\nReplaced use of deprecated Jackson method in RntbdObjectMapper.", "createdAt": "2020-05-29T21:14:41Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595", "merged": true, "mergeCommit": {"oid": "dcf54c3af11eaa3819d2c2d67f4f505d6bf4bfe6"}, "closed": true, "closedAt": "2020-06-02T17:37:46Z", "author": {"login": "David-Noble-at-work"}, "timelineItems": {"totalCount": 67, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABbkQmrkAH2gAyNDI1MzI4ODQyOjg0YTM3YWIzMjk1MjVhZTUyZDdjMWFkYzZlN2JhM2MzMzYyNWM1Yzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnXLETAH2gAyNDI1MzI4ODQyOjM2NzJlZDg5ZTE2MzgxODc3MmNmMDJhOTNhOGRjNjY2NWJmMjFkOTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "84a37ab329525ae52d7c1adc6e7ba3c33625c5c7", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/84a37ab329525ae52d7c1adc6e7ba3c33625c5c7", "committedDate": "2019-11-07T04:36:56Z", "message": "Port from v4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d218925e1dff21266697a27e4271d34dfcc3b6a7", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d218925e1dff21266697a27e4271d34dfcc3b6a7", "committedDate": "2019-11-08T01:46:09Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11cbbf37bf63bf50e94f67fe30300ac39c72ed4f", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/11cbbf37bf63bf50e94f67fe30300ac39c72ed4f", "committedDate": "2019-11-08T03:20:35Z", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05c7e0551ffb6fd1ed80c15d1068cb32e734007e", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/05c7e0551ffb6fd1ed80c15d1068cb32e734007e", "committedDate": "2019-11-09T00:07:30Z", "message": "Corrected package misspelling in log4j.properties and removed System.exit from Main.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dfa3dbf03ae2addeddcb34ffc67c362670a164c", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8dfa3dbf03ae2addeddcb34ffc67c362670a164c", "committedDate": "2019-11-09T00:07:47Z", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6e71f5e6b292cac17b6a9687d04ad858f02a8a1", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e6e71f5e6b292cac17b6a9687d04ad858f02a8a1", "committedDate": "2019-11-09T18:42:20Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e082d817a13d64ed57e5243cbc1da5b4ef0ab58e", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e082d817a13d64ed57e5243cbc1da5b4ef0ab58e", "committedDate": "2019-11-17T00:51:11Z", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "069c822e997087f384cf1a1864e7efec331e69f8", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/069c822e997087f384cf1a1864e7efec331e69f8", "committedDate": "2019-11-23T22:36:47Z", "message": "Merge branch 'master' of github.com:David-Noble-at-work/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ead1cca230e56b61e5376e73bd1481f7a7b81e6", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3ead1cca230e56b61e5376e73bd1481f7a7b81e6", "committedDate": "2019-12-03T18:58:37Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "669ba8b28ed6ae321fda445e0e167ff027cc6481", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/669ba8b28ed6ae321fda445e0e167ff027cc6481", "committedDate": "2019-12-04T19:34:26Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "735f57269d45a3497a66d47d594b7efac88179ff", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/735f57269d45a3497a66d47d594b7efac88179ff", "committedDate": "2019-12-04T19:36:31Z", "message": "Responded to code review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6db330d843c4cdbb80b90c6f734f69a59afb9183", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6db330d843c4cdbb80b90c6f734f69a59afb9183", "committedDate": "2020-01-04T00:31:23Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48855b55564f6f216ee6a156f7a64ff5991ee2e6", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/48855b55564f6f216ee6a156f7a64ff5991ee2e6", "committedDate": "2020-01-04T02:07:38Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2367f50dd69e8f4d1ba123c3b42ad4388caeaa66", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2367f50dd69e8f4d1ba123c3b42ad4388caeaa66", "committedDate": "2020-01-17T20:51:14Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb9cac0c12e21f09e3c45580bf324bef7733b8c1", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb9cac0c12e21f09e3c45580bf324bef7733b8c1", "committedDate": "2020-01-23T01:18:46Z", "message": "Updated sdk/cosmos/README.md with info on using system properties to modify default Direct TCP options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dd708ef9e753607040a6bb1f2b69c863dda8a0a", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1dd708ef9e753607040a6bb1f2b69c863dda8a0a", "committedDate": "2020-01-23T01:21:11Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "203507a249705593b04dec3e36566537d15da4e2", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/203507a249705593b04dec3e36566537d15da4e2", "committedDate": "2020-03-16T00:12:48Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "368b10f9893cdf49e95545e8ae4ec5ff03450f60", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/368b10f9893cdf49e95545e8ae4ec5ff03450f60", "committedDate": "2020-03-16T17:10:04Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7544aa31e210fe20d9939c26b17c9dbb4d7d72f", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f7544aa31e210fe20d9939c26b17c9dbb4d7d72f", "committedDate": "2020-03-17T01:24:39Z", "message": "Ported memory leak from v2.6.X and bumped version number."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cd3a139255f258d20b3c56ce9d00462add02b2b", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4cd3a139255f258d20b3c56ce9d00462add02b2b", "committedDate": "2020-03-18T01:32:58Z", "message": "Removed a file that was mistakenly committed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f58a9c7b813cc0f1d39071c8dd64e667681e2ec", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8f58a9c7b813cc0f1d39071c8dd64e667681e2ec", "committedDate": "2020-03-18T05:41:03Z", "message": "Space adjustments for readability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49baa6abd3e5ee01571b05c776ef43ff6efe7620", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/49baa6abd3e5ee01571b05c776ef43ff6efe7620", "committedDate": "2020-03-19T00:30:26Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/memory-leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f70e844575c77ef9906cc109a44c06e1366a3ad5", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f70e844575c77ef9906cc109a44c06e1366a3ad5", "committedDate": "2020-03-24T00:46:33Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "163c66d1a858ade5c179488ee9b7fb9798147e03", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/163c66d1a858ade5c179488ee9b7fb9798147e03", "committedDate": "2020-03-26T02:47:43Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01a3661f189abc1cf6f582083bbba44126aa8719", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/01a3661f189abc1cf6f582083bbba44126aa8719", "committedDate": "2020-04-05T01:57:34Z", "message": "DCDocumentCrudTest passes. Performance, reliability, and scalability tuning/testing work remains."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be7b3d88e28d214ed79d686bcd4349f00d0b3c7a", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/be7b3d88e28d214ed79d686bcd4349f00d0b3c7a", "committedDate": "2020-04-07T04:54:30Z", "message": "Enabled channel acquisition timeout interval default: 100 ms\n\nVerified: direct tests pass modulo a mockito issue that breaks a number of direct tests. Root cause analysis on the mockito break is TBD."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7446c7aa03a788401d61900188ebfb357c0fea00", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7446c7aa03a788401d61900188ebfb357c0fea00", "committedDate": "2020-04-08T00:34:05Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f263570653c07bc9f077cae2307061ad0d286ac", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5f263570653c07bc9f077cae2307061ad0d286ac", "committedDate": "2020-04-08T22:37:00Z", "message": "Removed some newlines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfb2ba4826880e5152658bab479b34f5f490a5bd", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/dfb2ba4826880e5152658bab479b34f5f490a5bd", "committedDate": "2020-04-08T22:37:31Z", "message": "Added a newline at the end of file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34baf33d1a8a05c4f04091b8ef963209f1ed949f", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/34baf33d1a8a05c4f04091b8ef963209f1ed949f", "committedDate": "2020-04-08T22:37:58Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d7bf22c9ec045ec56683dc94f5879de003fdf40", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5d7bf22c9ec045ec56683dc94f5879de003fdf40", "committedDate": "2020-04-11T20:56:20Z", "message": "Ensured that RntbdClientChannelPool.release never throws and never releases a channel prematurely. This change addresses occassional point read failures (~0.0015% of the time in local testing) when slamming a partition with read requests. This change also ensures that unhandled exceptions during release do not cause thread deaths."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5a8e7b75b7ff126eac016d28738f937951aa4a1", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c5a8e7b75b7ff126eac016d28738f937951aa4a1", "committedDate": "2020-04-15T16:20:21Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05f141039211010d76a20a070dc864df979759b6", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/05f141039211010d76a20a070dc864df979759b6", "committedDate": "2020-04-16T00:26:34Z", "message": "Revised channel acquisition algorithm such that no timer acquisition task timeout is used by default and we allow maxRequestsPerChannel to go above limit when maxChannels are allocated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e767404f56822dab79896d35ff73e584b3e018f1", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e767404f56822dab79896d35ff73e584b3e018f1", "committedDate": "2020-04-18T20:26:30Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3425d0b8e13d32afcb8684f0d9d344509cd90007", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3425d0b8e13d32afcb8684f0d9d344509cd90007", "committedDate": "2020-04-18T20:58:40Z", "message": "Attempt to resolve scalability issue that causes performance degradation about about 500 concurrent requests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7a6cdad8597ff80a6209ecc37b093f4934eb2b2", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f7a6cdad8597ff80a6209ecc37b093f4934eb2b2", "committedDate": "2020-04-19T19:56:19Z", "message": "Code/documentation tweaks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a04ad8bc10d8ad3a809ff52e7aac120147620a9", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0a04ad8bc10d8ad3a809ff52e7aac120147620a9", "committedDate": "2020-04-20T04:03:27Z", "message": "Idle endpoint timeout task now detects idleEndpointTimeout and\u2014unless the endpoint is found to be idle\u2014runs tasks in the pendingAcquisitionQueue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb81f3e7458759d7fadb237c71c2db4b0ae7f19d", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb81f3e7458759d7fadb237c71c2db4b0ae7f19d", "committedDate": "2020-04-20T04:09:56Z", "message": "Updated a comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f23efd6299bf6989eecc5dcbc1b9b14276e83ca", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7f23efd6299bf6989eecc5dcbc1b9b14276e83ca", "committedDate": "2020-04-20T05:57:42Z", "message": "Code tweak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78f0e55d2001b90ba72450b6854c83ac3baba8e6", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/78f0e55d2001b90ba72450b6854c83ac3baba8e6", "committedDate": "2020-04-21T04:27:48Z", "message": "Switch to HashedWheelTimer implementation for RntbdClientChannelPool.acquisitionAndIdleEndpointDetectionTimeout and revised RntbdClientChannelPool.acquireChannel. Local testing indicates that this significatnly reduces P95-P99.9 latencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12b5981b89ec39d52b45117e29835401358a5ba5", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/12b5981b89ec39d52b45117e29835401358a5ba5", "committedDate": "2020-04-22T18:04:19Z", "message": "Tweaked log message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5ff54c36b6cc35e63cecaccc287abff95b202e0", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e5ff54c36b6cc35e63cecaccc287abff95b202e0", "committedDate": "2020-04-24T00:22:21Z", "message": "Addressed a number of threading-related issues in RntbdClientChannelPool; tweaked the RntbdReporter; and added a CsvReporter feature to the benchmark tool. They latter may be a temporary addition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc7637be1cebb5f6a8b4df3395600996c9b50ca4", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fc7637be1cebb5f6a8b4df3395600996c9b50ca4", "committedDate": "2020-04-25T20:23:13Z", "message": "Streamlined RntbdServiceEndpoint.write for performance/readability. In local testing this change resulted in a significant performance gain in these configurations:\n* concurrency=2048.documentCount=000001.operation=ReadLatency.operation-count=1000000\n* concurrency=2048.documentCount=100000.operation=ReadLatency.operation-count=1000000\nSpecificallly, the P99 values moved to P99.9 and throughput increased by at least 11% as measured by (lowest[with-change] - highest[sans-change]) / highest[sans-change])"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "488291ed705a9cc6552b2326c794268e1785442f", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/488291ed705a9cc6552b2326c794268e1785442f", "committedDate": "2020-04-28T15:11:38Z", "message": "Tweaks tested extensively--full test suite plus point read benchmarks (1 and 10,0000 documents with 2,048 concurrent requests) locally in prep for PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02293fc5c0952a9615a29a1992e08d87b461567a", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/02293fc5c0952a9615a29a1992e08d87b461567a", "committedDate": "2020-04-28T15:15:58Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2375baab4d6b8dc533a38405294ed21fa247f648", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2375baab4d6b8dc533a38405294ed21fa247f648", "committedDate": "2020-04-28T21:53:39Z", "message": "Tweaked AsyncBenchmark for verifying the direct tcp \u201cconnection timeout\u201d issue raised by T-Mobile."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46f5dd1bd9ebfac572044b3f2a104c6b37267103", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/46f5dd1bd9ebfac572044b3f2a104c6b37267103", "committedDate": "2020-04-29T20:59:51Z", "message": "Moved a misplaced statement in AsyncBenchmark that produced a lot of logger noise."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d0c00772d1c79f4b3ba82add514132660d5ae31", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3d0c00772d1c79f4b3ba82add514132660d5ae31", "committedDate": "2020-04-30T03:52:52Z", "message": "Updated version numbers in an attempt to get past CI version checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb7273bd375723f5a065eb0a511c8df935201245", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb7273bd375723f5a065eb0a511c8df935201245", "committedDate": "2020-04-30T03:54:21Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02d7ed00304e953d15119c35358bc2497e162a0a", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/02d7ed00304e953d15119c35358bc2497e162a0a", "committedDate": "2020-04-30T04:06:27Z", "message": "Tweaked RntbdRequestTimer.close for readability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44c7ea7ded34c1141e28fc8866326c296639d2b7", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/44c7ea7ded34c1141e28fc8866326c296639d2b7", "committedDate": "2020-04-30T05:32:22Z", "message": "Removed README.md which seems to have been removed from master after being edited by me"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "350db568ea82a310993c3d9f4860d7897ad50afc", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/350db568ea82a310993c3d9f4860d7897ad50afc", "committedDate": "2020-04-30T06:09:49Z", "message": "Fixed a build issue that CI complains about."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf9e4d2b49a5adc63665888e6231470fbc1c04e4", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cf9e4d2b49a5adc63665888e6231470fbc1c04e4", "committedDate": "2020-05-04T22:17:10Z", "message": "Reverting version bump for benchmark and examples as these are in the process of being removed as libraries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a747ce328164ae53f261958300d23f3f7eea42b", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2a747ce328164ae53f261958300d23f3f7eea42b", "committedDate": "2020-05-14T00:11:00Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into issue/cosmos-4.X/direct-tcp/socket-leak"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27a01073878092f79a512f95da17f2a1cc6833e0", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/27a01073878092f79a512f95da17f2a1cc6833e0", "committedDate": "2020-05-18T17:01:59Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/direct-tcp/direct-connection-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b986717d57de4f3a378b2d1c9344aa6fd8a6af4", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6b986717d57de4f3a378b2d1c9344aa6fd8a6af4", "committedDate": "2020-05-18T17:05:57Z", "message": "Removed dead code and changed an error message in AsyncBenchmark.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "145d853297a0bff9993918b81db2a2fff5a454d0", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/145d853297a0bff9993918b81db2a2fff5a454d0", "committedDate": "2020-05-18T19:51:07Z", "message": "Removed merge orig files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f55e5a97f2021c496fc7e803487b5fa308e9381", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9f55e5a97f2021c496fc7e803487b5fa308e9381", "committedDate": "2020-05-20T03:29:15Z", "message": "Wired up DirectConnectionConfig to RntbdTransportClient by way of ConnectionPolicy. Also: addressed a bug in AsyncBenchmark and replaced a deprecated method call in RntbdObjectMapper."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf836da7718484645a9dbd9be1828357d2edb9d8", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bf836da7718484645a9dbd9be1828357d2edb9d8", "committedDate": "2020-05-26T18:23:53Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/direct-tcp/direct-connection-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "139637f5ce58a32837902b1be356b1fa1d615b33", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/139637f5ce58a32837902b1be356b1fa1d615b33", "committedDate": "2020-05-29T18:25:19Z", "message": "Wired up ConnectionPolicy, DirectConnectionConfig, and RntbdTransportClient.Options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b", "committedDate": "2020-05-29T21:05:29Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/direct-tcp/direct-connection-config"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDA5MDIz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#pullrequestreview-422009023", "createdAt": "2020-06-01T16:46:15Z", "commit": {"oid": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNjo0NjoxNVrOGdSCsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNjo1MTo0OVrOGdSOPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM1NzQ4OA==", "bodyText": "Please add this new field to toString() API.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433357488", "createdAt": "2020-06-01T16:46:15Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/DirectConnectionConfig.java", "diffHunk": "@@ -17,24 +17,27 @@\n     //  Constants\n     private static final Duration DEFAULT_IDLE_ENDPOINT_TIMEOUT = Duration.ofSeconds(70L);\n     private static final Duration DEFAULT_CONNECTION_TIMEOUT = Duration.ofSeconds(60L);\n+    private static final Duration DEFAULT_REQUEST_TIMEOUT = Duration.ofSeconds(60L);\n     private static final int DEFAULT_MAX_CONNECTIONS_PER_ENDPOINT = 30;\n     private static final int DEFAULT_MAX_REQUESTS_PER_CONNECTION = 10;\n \n     private Duration connectionTimeout;\n     private Duration idleConnectionTimeout;\n     private Duration idleEndpointTimeout;\n+    private Duration requestTimeout;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MDQ0NA==", "bodyText": "We should also rename the string wordings -> maxChannelsPerEndpoint -> maxConnectionsPerEndpoint\nand maxRequestsPerChannel -> maxRequestsPerConnection", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433360444", "createdAt": "2020-06-01T16:51:49Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/ConnectionPolicy.java", "diffHunk": "@@ -476,10 +458,9 @@ public String toString() {\n             \", inetSocketProxyAddress=\" + inetSocketProxyAddress +\n             \", readRequestsFallbackEnabled=\" + readRequestsFallbackEnabled +\n             \", connectionTimeout=\" + connectionTimeout +\n-            \", idleChannelTimeout=\" + idleChannelTimeout +\n             \", idleEndpointTimeout=\" + idleEndpointTimeout +\n-            \", maxChannelsPerEndpoint=\" + maxChannelsPerEndpoint +\n-            \", maxRequestsPerChannel=\" + maxRequestsPerChannel +\n+            \", maxChannelsPerEndpoint=\" + maxConnectionsPerEndpoint +\n+            \", maxRequestsPerChannel=\" + maxRequestsPerConnection +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b"}, "originalPosition": 155}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDE2MDUz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#pullrequestreview-422016053", "createdAt": "2020-06-01T16:56:19Z", "commit": {"oid": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNjo1NjoxOVrOGdSXjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNjo1NjoxOVrOGdSXjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MjgyOA==", "bodyText": "Is this the end to end (including the consistency stack) timeout?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433362828", "createdAt": "2020-06-01T16:56:19Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/DirectConnectionConfig.java", "diffHunk": "@@ -190,6 +193,32 @@ public DirectConnectionConfig setMaxRequestsPerConnection(int maxRequestsPerConn\n         return this;\n     }\n \n+    /**\n+     * Gets the request timeout interval\n+     * This represents the timeout interval for requests\n+     *\n+     * Default value is 60 seconds\n+     *\n+     * @return the request timeout interval\n+     */\n+    public Duration getRequestTimeout() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4eb5db9a647f766da826783db14fdffbaef26b48", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4eb5db9a647f766da826783db14fdffbaef26b48", "committedDate": "2020-06-01T17:16:57Z", "message": "Corrected two toString methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMDkwNzI0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#pullrequestreview-422090724", "createdAt": "2020-06-01T18:43:53Z", "commit": {"oid": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxODo0Mzo1M1rOGdV10Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxODo0Mzo1M1rOGdV10Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQxOTcyOQ==", "bodyText": "@kirankumarkolli\nboth GWConnectionConfig and DirectConnectionConfig have requestTimeout.\nand DirectConnectionConfig#requestTimeout represents the end to end latency (including consistency stack).\nI wonder if we should keep these at the ConnectionConfig level or if we should move it up to the CosmosClientBuilder. How .Net is doing this?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433419729", "createdAt": "2020-06-01T18:43:53Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/DirectConnectionConfig.java", "diffHunk": "@@ -190,6 +193,32 @@ public DirectConnectionConfig setMaxRequestsPerConnection(int maxRequestsPerConn\n         return this;\n     }\n \n+    /**\n+     * Gets the request timeout interval\n+     * This represents the timeout interval for requests\n+     *\n+     * Default value is 60 seconds\n+     *\n+     * @return the request timeout interval\n+     */\n+    public Duration getRequestTimeout() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM2MjgyOA=="}, "originalCommit": {"oid": "d96f4b3e8234f9ae3ec37212a78b6bd1ec494b3b"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMTg1MDE1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#pullrequestreview-422185015", "createdAt": "2020-06-01T21:11:06Z", "commit": {"oid": "4eb5db9a647f766da826783db14fdffbaef26b48"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQyMToxMTowN1rOGdaSfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQyMToxMTowN1rOGdaSfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ5MjYwNg==", "bodyText": "good catch. thank you", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11595#discussion_r433492606", "createdAt": "2020-06-01T21:11:07Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos-benchmark/src/main/java/com/azure/cosmos/benchmark/AsyncBenchmark.java", "diffHunk": "@@ -131,7 +131,7 @@\n         if (configuration.getOperationType() != Configuration.Operation.WriteLatency\n                 && configuration.getOperationType() != Configuration.Operation.WriteThroughput\n                 && configuration.getOperationType() != Configuration.Operation.ReadMyWrites) {\n-            logger.info(\"PRE-populating {} documents ....\", cfg.getNumberOfOperations());\n+            logger.info(\"PRE-populating {} documents ....\", cfg.getNumberOfPreCreatedDocuments());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4eb5db9a647f766da826783db14fdffbaef26b48"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3672ed89e163818772cf02a93a8dc6665bf21d96", "author": {"user": {"login": "David-Noble-at-work", "name": "David Noble"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3672ed89e163818772cf02a93a8dc6665bf21d96", "committedDate": "2020-06-02T16:09:02Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into feature/cosmos-4.x/direct-tcp/direct-connection-config"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3883, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}