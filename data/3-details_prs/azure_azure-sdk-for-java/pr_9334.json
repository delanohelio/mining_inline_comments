{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNzE1NDc3", "number": 9334, "title": "Cosmos API Review Iteration - Part 2", "bodyText": "Moved Indexkind to implementation package\nReduced scope of JsonSerializable public APIs to protected / package-private APIs.", "createdAt": "2020-03-20T19:56:10Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334", "merged": true, "mergeCommit": {"oid": "a104a927a24a15ef5c7713b503d0101f0143c3d1"}, "closed": true, "closedAt": "2020-03-23T16:43:00Z", "author": {"login": "kushagraThapar"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPXiC8gH2gAyMzkxNzE1NDc3OjMzMzhmNzRhZWM3NmZjZGRiZWRkZjg0NGIyM2Q2YjEzMGYyYzg3ODM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQXT3RgH2gAyMzkxNzE1NDc3OjU4OWVkMzBkZDlmODk0YTBjYjRmZDIwMjEwODBiZDEyZWZiMzlkNGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3338f74aec76fcddbeddf844b23d6b130f2c8783", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3338f74aec76fcddbeddf844b23d6b130f2c8783", "committedDate": "2020-03-20T02:59:57Z", "message": "Moved IndexKind to implementation package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99abecf11c32a79e473823d648043e91f23162cd", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/99abecf11c32a79e473823d648043e91f23162cd", "committedDate": "2020-03-20T03:00:30Z", "message": "Merge branch 'master' into index_kind_implementation_package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2397642be0ecddade4e8857855d4e45ecce9375", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b2397642be0ecddade4e8857855d4e45ecce9375", "committedDate": "2020-03-20T06:14:41Z", "message": "Reduced method scope from public to protected for most of JsonSerializable APIs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0585e9ec9c992424cd31ba24ba4a75481561c1e", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f0585e9ec9c992424cd31ba24ba4a75481561c1e", "committedDate": "2020-03-20T19:54:58Z", "message": "Reduced method scope from public to protected for most of JsonSerializable APIs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa6b37fd6de7adaac32c7f857a99ac4637ed6242", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fa6b37fd6de7adaac32c7f857a99ac4637ed6242", "committedDate": "2020-03-20T20:04:39Z", "message": "Removed unused imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Nzc2ODg0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#pullrequestreview-378776884", "createdAt": "2020-03-20T20:00:42Z", "commit": {"oid": "f0585e9ec9c992424cd31ba24ba4a75481561c1e"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDowMDo0MlrOF5hj6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDowMjo0OFrOF5hngw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2MzAxNg==", "bodyText": "why do we need these overridden methods?\nthe implementation is the same as parent class.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395863016", "createdAt": "2020-03-20T20:00:42Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/DatabaseAccount.java", "diffHunk": "@@ -285,4 +285,9 @@ public String toJson() {\n         this.populatePropertyBag();\n         return super.toJson();\n     }\n+\n+    @Override\n+    public Object get(String propertyName) {\n+        return super.get(propertyName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0585e9ec9c992424cd31ba24ba4a75481561c1e"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2MzIzOA==", "bodyText": "ditto, here and other places for the new methods, the implementation is the same as parent class why are they needed in every child class?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395863238", "createdAt": "2020-03-20T20:01:14Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/Offer.java", "diffHunk": "@@ -132,4 +132,14 @@ private ObjectNode getContent() {\n     private void setContent(ObjectNode offerContent) {\n         BridgeInternal.setProperty(this, Constants.Properties.OFFER_CONTENT, offerContent);\n     }\n+\n+    @Override\n+    public String getString(String propertyName) {\n+        return super.getString(propertyName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0585e9ec9c992424cd31ba24ba4a75481561c1e"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2MzI5Mw==", "bodyText": "ditto", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395863293", "createdAt": "2020-03-20T20:01:24Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/PartitionKeyRange.java", "diffHunk": "@@ -123,4 +123,9 @@ public void setParents(List<String> parents) {\n      * @return a list partition key range ID\n      */\n     public List<String> getParents() { return this.getList(Constants.Properties.PARENTS, String.class); }\n+\n+    @Override\n+    public String toJson() {\n+        return super.toJson();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0585e9ec9c992424cd31ba24ba4a75481561c1e"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg2MzkzOQ==", "bodyText": "ditto", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395863939", "createdAt": "2020-03-20T20:02:48Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/directconnectivity/Address.java", "diffHunk": "@@ -87,4 +87,9 @@ public String getParitionKeyRangeId() {\n     public void setPartitionKeyRangeId(String partitionKeyRangeId) {\n         BridgeInternal.setProperty(this, Constants.Properties.PARTITION_KEY_RANGE_ID, partitionKeyRangeId);\n     }\n+\n+    @Override\n+    public Object get(String propertyName) {\n+        return super.get(propertyName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0585e9ec9c992424cd31ba24ba4a75481561c1e"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NzgxMzg0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#pullrequestreview-378781384", "createdAt": "2020-03-20T20:08:56Z", "commit": {"oid": "fa6b37fd6de7adaac32c7f857a99ac4637ed6242"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Nzk5MDQ3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#pullrequestreview-378799047", "createdAt": "2020-03-20T20:41:43Z", "commit": {"oid": "fa6b37fd6de7adaac32c7f857a99ac4637ed6242"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDo0MTo0NFrOF5imTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQyMDo0MTo0NFrOF5imTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg4MDAxMw==", "bodyText": "(Could be out of scope of this PR) Potential double serialization. Instead of converting toJson and again back from Json, we could just use the propertybag to get UDF by using Resource(ObjectNode) overload.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9334#discussion_r395880013", "createdAt": "2020-03-20T20:41:44Z", "author": {"login": "mbhaskar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/CosmosAsyncUserDefinedFunction.java", "diffHunk": "@@ -73,7 +73,7 @@ CosmosAsyncUserDefinedFunction setId(String id) {\n     public Mono<CosmosAsyncUserDefinedFunctionResponse> replace(CosmosUserDefinedFunctionProperties udfSettings) {\n         return container.getDatabase()\n                    .getDocClientWrapper()\n-                   .replaceUserDefinedFunction(new UserDefinedFunction(udfSettings.toJson()), null)\n+                   .replaceUserDefinedFunction(new UserDefinedFunction(ModelBridgeInternal.toJsonFromJsonSerializable(udfSettings)), null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa6b37fd6de7adaac32c7f857a99ac4637ed6242"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbf26d6062dd857e966d092b6893f3f968ea5d7e", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cbf26d6062dd857e966d092b6893f3f968ea5d7e", "committedDate": "2020-03-20T23:09:45Z", "message": "Fixed Query with multi order test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "589ed30dd9f894a0cb4fd2021080bd12efb39d4b", "author": {"user": {"login": "kushagraThapar", "name": "Kushagra Thapar"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/589ed30dd9f894a0cb4fd2021080bd12efb39d4b", "committedDate": "2020-03-23T05:18:23Z", "message": "Merge branch 'master' into index_kind_implementation_package"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 643, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}