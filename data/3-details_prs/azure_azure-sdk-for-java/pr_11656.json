{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MjkyMTM5", "number": 11656, "title": "ProxyOptions change", "bodyText": "Issue #11316\nUse ProxyOptions instead of InetSocketAddress", "createdAt": "2020-06-02T01:10:23Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11656", "merged": true, "mergeCommit": {"oid": "d2e5e5f10922f5e5cd6637b110258f7ed41d0888"}, "closed": true, "closedAt": "2020-06-02T05:51:50Z", "author": {"login": "xinlian12"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnJ2GdAH2gAyNDI2MjkyMTM5OmIzNzNlZGIwYTUwOGJkNGE0MzZmNGU1MWJkY2I1ZjhhNDlmMzRmZWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnNFlwAFqTQyMjMzMjQxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b373edb0a508bd4a436f4e51bdcb5f8a49f34fed", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b373edb0a508bd4a436f4e51bdcb5f8a49f34fed", "committedDate": "2020-06-02T00:37:22Z", "message": "ProxyOptions change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMjc5NjE2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11656#pullrequestreview-422279616", "createdAt": "2020-06-02T01:14:39Z", "commit": {"oid": "b373edb0a508bd4a436f4e51bdcb5f8a49f34fed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToxNDozOVrOGde8tQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToxNDozOVrOGde8tQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU2ODk0OQ==", "bodyText": "should I throw exception here?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11656#discussion_r433568949", "createdAt": "2020-06-02T01:14:39Z", "author": {"login": "xinlian12"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/GatewayConnectionConfig.java", "diffHunk": "@@ -119,8 +120,12 @@ public InetSocketAddress getProxy() {\n      * @return the {@link GatewayConnectionConfig}.\n      */\n \n-    public GatewayConnectionConfig setProxy(InetSocketAddress proxy) {\n-        this.inetSocketProxyAddress = proxy;\n+    public GatewayConnectionConfig setProxy(ProxyOptions proxy) {\n+        if (proxy.getType() != ProxyOptions.Type.HTTP) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b373edb0a508bd4a436f4e51bdcb5f8a49f34fed"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMjc5Njk1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11656#pullrequestreview-422279695", "createdAt": "2020-06-02T01:14:57Z", "commit": {"oid": "b373edb0a508bd4a436f4e51bdcb5f8a49f34fed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToxNDo1N1rOGde8-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToxNDo1N1rOGde8-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU2OTAxOQ==", "bodyText": "should I also add the proxy type?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11656#discussion_r433569019", "createdAt": "2020-06-02T01:14:57Z", "author": {"login": "xinlian12"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/GatewayConnectionConfig.java", "diffHunk": "@@ -130,7 +135,8 @@ public String toString() {\n             \"requestTimeout=\" + requestTimeout +\n             \", maxConnectionPoolSize=\" + maxConnectionPoolSize +\n             \", idleConnectionTimeout=\" + idleConnectionTimeout +\n-            \", inetSocketProxyAddress=\" + inetSocketProxyAddress +\n+            \", proxyType=\" + proxy.getType() +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b373edb0a508bd4a436f4e51bdcb5f8a49f34fed"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMjgwMDQ1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11656#pullrequestreview-422280045", "createdAt": "2020-06-02T01:16:14Z", "commit": {"oid": "b373edb0a508bd4a436f4e51bdcb5f8a49f34fed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToxNjoxNFrOGde-Lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwMToxNjoxNFrOGde-Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzU2OTMyNg==", "bodyText": "changed the method name here since it could be non http?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11656#discussion_r433569326", "createdAt": "2020-06-02T01:16:14Z", "author": {"login": "xinlian12"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/http/HttpClientConfig.java", "diffHunk": "@@ -30,7 +30,7 @@ public HttpClientConfig withPoolSize(int maxPoolSize) {\n         return this;\n     }\n \n-    public HttpClientConfig withHttpProxy(InetSocketAddress proxy) {\n+    public HttpClientConfig withProxy(ProxyOptions proxy) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b373edb0a508bd4a436f4e51bdcb5f8a49f34fed"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMjg1Mzc2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11656#pullrequestreview-422285376", "createdAt": "2020-06-02T01:33:45Z", "commit": {"oid": "b373edb0a508bd4a436f4e51bdcb5f8a49f34fed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99e39d9f118dc3c6ff0844ea283cac3807b7607a", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/99e39d9f118dc3c6ff0844ea283cac3807b7607a", "committedDate": "2020-06-02T01:39:29Z", "message": "resolve comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b9a0657e0c6e0d12e194c17c40e4046a0d60577", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3b9a0657e0c6e0d12e194c17c40e4046a0d60577", "committedDate": "2020-06-02T04:05:22Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyMzMyNDEy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11656#pullrequestreview-422332412", "createdAt": "2020-06-02T04:23:28Z", "commit": {"oid": "3b9a0657e0c6e0d12e194c17c40e4046a0d60577"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNDoyMzoyOFrOGdhlzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNDoyMzoyOFrOGdhlzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYxMjIzOQ==", "bodyText": "as we don't support password with proxy, shouldn't we throw if password is set?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11656#discussion_r433612239", "createdAt": "2020-06-02T04:23:28Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/GatewayConnectionConfig.java", "diffHunk": "@@ -119,18 +120,26 @@ public InetSocketAddress getProxy() {\n      * @return the {@link GatewayConnectionConfig}.\n      */\n \n-    public GatewayConnectionConfig setProxy(InetSocketAddress proxy) {\n-        this.inetSocketProxyAddress = proxy;\n+    public GatewayConnectionConfig setProxy(ProxyOptions proxy) {\n+        if (proxy.getType() != ProxyOptions.Type.HTTP) {\n+            throw new IllegalArgumentException(\"Only http proxy type is supported.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b9a0657e0c6e0d12e194c17c40e4046a0d60577"}, "originalPosition": 44}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3910, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}