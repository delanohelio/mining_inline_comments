{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNzUyMDg4", "number": 15477, "title": "fix msi validate function", "bodyText": "#15435 fix msi validate function", "createdAt": "2020-09-22T07:40:16Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477", "merged": true, "mergeCommit": {"oid": "91cba02bf4a37ef7dd955906502fe5e9a1074d99"}, "closed": true, "closedAt": "2020-09-24T01:24:33Z", "author": {"login": "zhoufenqin"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLTRRkAFqTQ5MzIwODgzMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLtuQJgBqjM3OTg1MTg0MTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjA4ODMx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#pullrequestreview-493208831", "createdAt": "2020-09-22T07:57:27Z", "commit": {"oid": "8c0e83fbd50075f57b35e2fda175c795ae648bbb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNzo1NzoyOFrOHVuUTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNzo1NzoyOFrOHVuUTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0MTAwNw==", "bodyText": "Can we delete  && Strings.isNullOrEmpty(subscriptionId)?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#discussion_r492541007", "createdAt": "2020-09-22T07:57:28Z", "author": {"login": "chenrujun"}, "path": "sdk/spring/azure-spring-cloud-context/src/main/java/com/microsoft/azure/spring/cloud/context/core/config/AzureProperties.java", "diffHunk": "@@ -41,7 +41,7 @@ private void validate() {\n         }\n \n         if (msiEnabled && Strings.isNullOrEmpty(subscriptionId)) {\n-            Assert.hasText(this.region, \"When msi is enabled, spring.cloud.azure.subscription-id must be provided\");\n+            Assert.hasText(this.subscriptionId, \"When msi is enabled, spring.cloud.azure.subscription-id must be provided\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c0e83fbd50075f57b35e2fda175c795ae648bbb"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0MzkyODg1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#pullrequestreview-494392885", "createdAt": "2020-09-23T07:54:18Z", "commit": {"oid": "85e6ca8fdf1bfc7b8547896b1db5b4a7597dc816"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNzo1NDoxOFrOHWbDIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNzo1NzoyMlrOHWbPVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI3Mzg5MA==", "bodyText": "We should remove the locale in this URL.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#discussion_r493273890", "createdAt": "2020-09-23T07:54:18Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-cloud-eventhubs-binder-sample/README.adoc", "diffHunk": "@@ -141,15 +141,11 @@ If you choose system-assigned identity, follow https://docs.microsoft.com/en-us/\n If you choose user-assigned identity, follow https://docs.microsoft.com/en-us/azure/app-service/overview-managed-identity#adding-a-user-assigned-identity[\n  Adding a user assigned identity].\n \n-==== Role Assignment\n+==== Add Role Assignment for Resource Group\n \n-Add role assignment to Event hub, Storage Account and Resource Group.\n+- Resource Group: assign `Reader` role for managed identity.\n \n-- Event Hub: `Contributor` role.\n-- Storage Account: `Storage Account Key Operator Service Role` role.\n-- Resource Group: `Reader` role.\n-\n-See https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-managed-service-identity[Managed identities for Azure resources with Event Hubs] to add role assignment for Event Hub, Storage Account and Resource Group are similar.\n+See https://docs.microsoft.com/en-us/azure/role-based-access-control/role-assignments-portal[Add or remove Azure role assignments] to add the role assignment for Resource Group.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85e6ca8fdf1bfc7b8547896b1db5b4a7597dc816"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI3NzAxNA==", "bodyText": "Same here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#discussion_r493277014", "createdAt": "2020-09-23T07:57:22Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-cloud-eventhubs-binder-sample/README.adoc", "diffHunk": "@@ -186,6 +183,18 @@ spring.cloud.stream.bindings.output.destination=[eventhub-name]\n spring.cloud.stream.eventhub.bindings.input.consumer.checkpoint-mode=MANUAL\n ....\n \n+==== Add Role Assignment for Event Hub and Storage Account\n+\n+- Event Hub: assign `Contributor` role for managed identity.\n+- Storage Account: assign `Storage Account Key Operator Service Role` role for managed identity.\n+\n+See https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-managed-service-identity[Managed identities for Azure resources with Event Hubs] to add role assignment for Event Hub, Storage Account is similar.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85e6ca8fdf1bfc7b8547896b1db5b4a7597dc816"}, "originalPosition": 40}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85e6ca8fdf1bfc7b8547896b1db5b4a7597dc816", "author": {"user": {"login": "zhoufenqin", "name": "zhoufenqin"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/85e6ca8fdf1bfc7b8547896b1db5b4a7597dc816", "committedDate": "2020-09-23T06:46:04Z", "message": "update azure context auto configuration"}, "afterCommit": {"oid": "6089199f8d832ebf87b714db3d30669a957d78ac", "author": {"user": {"login": "zhoufenqin", "name": "zhoufenqin"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6089199f8d832ebf87b714db3d30669a957d78ac", "committedDate": "2020-09-23T08:08:38Z", "message": "update azure context auto configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NDEwNDY2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#pullrequestreview-494410466", "createdAt": "2020-09-23T08:15:32Z", "commit": {"oid": "6089199f8d832ebf87b714db3d30669a957d78ac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1edad7505bfb6a4d9720b5d8bc137bfc821b04ba", "author": {"user": {"login": "zhoufenqin", "name": "zhoufenqin"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1edad7505bfb6a4d9720b5d8bc137bfc821b04ba", "committedDate": "2020-09-23T14:22:10Z", "message": "fix msi validate function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "779a973ba21275e9c036e2d2026874332151c9b1", "author": {"user": {"login": "zhoufenqin", "name": "zhoufenqin"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/779a973ba21275e9c036e2d2026874332151c9b1", "committedDate": "2020-09-23T14:46:20Z", "message": "update azure context auto configuration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6089199f8d832ebf87b714db3d30669a957d78ac", "author": {"user": {"login": "zhoufenqin", "name": "zhoufenqin"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6089199f8d832ebf87b714db3d30669a957d78ac", "committedDate": "2020-09-23T08:08:38Z", "message": "update azure context auto configuration"}, "afterCommit": {"oid": "779a973ba21275e9c036e2d2026874332151c9b1", "author": {"user": {"login": "zhoufenqin", "name": "zhoufenqin"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/779a973ba21275e9c036e2d2026874332151c9b1", "committedDate": "2020-09-23T14:46:20Z", "message": "update azure context auto configuration"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3338, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}