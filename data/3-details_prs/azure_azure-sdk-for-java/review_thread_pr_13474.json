{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2MDcwOTM2", "number": 13474, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMjoyODozNlrOETBiGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMjoyODozNlrOETBiGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MzgzNTE1OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMjoyODozNlrOG4h7ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMjoyODozNlrOG4h7ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkyOTMxNw==", "bodyText": "variable name formRecognizerException", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13474#discussion_r461929317", "createdAt": "2020-07-28T22:28:36Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -959,4 +1044,65 @@ public void recognizeCustomFormUrlMultiPageLabeled(HttpClient httpClient,\n                 validateMultiPageDataLabeled(syncPoller.getFinalResult());\n             }));\n     }\n+\n+    /**\n+     * Verifies encoded blank url must stay same when sent to service for a document using invalid source url with \\\n+     * encoded blank space as input data to recognize a custom form from url API.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormFromUrlWithEncodedBlankSpaceSourceUrl(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        encodedBlankSpaceSourceUrlRunner(sourceUrl -> {\n+            HttpResponseException errorResponseException = assertThrows(HttpResponseException.class,\n+                () -> client.beginRecognizeCustomFormsFromUrl(sourceUrl, NON_EXIST_MODEL_ID, new RecognizeOptions()\n+                    .setPollInterval(durationTestMode)).getSyncPoller().getFinalResult());\n+            assertEquals(ENCODED_EMPTY_SPACE,\n+                new String(errorResponseException.getResponse().getRequest().getBody().blockFirst().array(),\n+                    StandardCharsets.UTF_8));\n+        });\n+    }\n+\n+    /**\n+     * Verify that custom form with invalid model id.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormUrlNonExistModelId(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        urlRunner(fileUrl -> {\n+            HttpResponseException errorResponseException = assertThrows(HttpResponseException.class,\n+                () -> client.beginRecognizeCustomFormsFromUrl(fileUrl, NON_EXIST_MODEL_ID,\n+                    new RecognizeOptions().setPollInterval(durationTestMode)).getSyncPoller().getFinalResult());\n+            ErrorInformation errorInformation = (ErrorInformation) errorResponseException.getValue();\n+            assertEquals(EXPECTED_INVALID_MODEL_ID_ERROR_CODE, errorInformation.getCode());\n+            assertEquals(EXPECTED_INVALID_MODEL_ID_ERROR_MESSAGE, errorInformation.getMessage());\n+        }, FORM_JPG);\n+    }\n+\n+    /**\n+     * Verify that custom form with damaged PDF file.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormDamagedPdf(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        damagedPdfDataRunner((data, dataLength) ->\n+            beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+                SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                    getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                        useTrainingLabels, null, durationTestMode).getSyncPoller();\n+                trainingPoller.waitForCompletion();\n+\n+                FormRecognizerException errorResponseException = assertThrows(FormRecognizerException.class,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36ca9bb10c43f33dfd35e8d962c24420928ccec8"}, "originalPosition": 202}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4824, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}