{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxOTQ0Mjc5", "number": 16213, "title": "Live test pipeline setup", "bodyText": "Configure the live test pipeline to use the shared resources from the test subscription.\nPull changes from core redactor for empty value redaction bug fix.\nLive test pipeline - https://dev.azure.com/azure-sdk/internal/_build/results?buildId=599834&view=results", "createdAt": "2020-10-13T03:05:35Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213", "merged": true, "mergeCommit": {"oid": "a95455bb285dbf87a3bef697e85f846d53c7c758"}, "closed": true, "closedAt": "2020-11-02T21:51:25Z", "author": {"login": "samvaity"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSLa79gBqjM4NzI0NDYxNjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYq8MtgBqjM5NTAwMjc2ODQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0aff4a78fcfe63c18204167da20d1795c20928b", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b0aff4a78fcfe63c18204167da20d1795c20928b", "committedDate": "2020-10-13T16:23:54Z", "message": "remove test resources file"}, "afterCommit": {"oid": "ac41a80979b48aa3acb940079c5e560569369795", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ac41a80979b48aa3acb940079c5e560569369795", "committedDate": "2020-10-13T16:45:51Z", "message": "remove test resources file"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "68984266a7a4a7fc038a17d2566e52ea4d7cd504", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/68984266a7a4a7fc038a17d2566e52ea4d7cd504", "committedDate": "2020-10-28T07:59:48Z", "message": "update datafeed tests"}, "afterCommit": {"oid": "ed9042636dcc63ee62a2237273057185e5869440", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ed9042636dcc63ee62a2237273057185e5869440", "committedDate": "2020-10-28T08:17:51Z", "message": "update datafeed tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad3308e52fee4558335989ea7b0d18c29ce4fdd2", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ad3308e52fee4558335989ea7b0d18c29ce4fdd2", "committedDate": "2020-10-29T00:02:56Z", "message": "update redactor, re-record tests"}, "afterCommit": {"oid": "16c2b43d909d439e7ce56e23e6c2ce0092673308", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/16c2b43d909d439e7ce56e23e6c2ce0092673308", "committedDate": "2020-10-29T01:08:44Z", "message": "update redactor, re-record tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "16c2b43d909d439e7ce56e23e6c2ce0092673308", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/16c2b43d909d439e7ce56e23e6c2ce0092673308", "committedDate": "2020-10-29T01:08:44Z", "message": "update redactor, re-record tests"}, "afterCommit": {"oid": "f688f4860777527fb8d311c9b599c9e006afda38", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f688f4860777527fb8d311c9b599c9e006afda38", "committedDate": "2020-10-29T01:31:49Z", "message": "update redactor, re-record tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f688f4860777527fb8d311c9b599c9e006afda38", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f688f4860777527fb8d311c9b599c9e006afda38", "committedDate": "2020-10-29T01:31:49Z", "message": "update redactor, re-record tests"}, "afterCommit": {"oid": "c880bfb6af931205c8bf375aab35680565f2bc33", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c880bfb6af931205c8bf375aab35680565f2bc33", "committedDate": "2020-10-29T22:26:12Z", "message": "update redactor, re-record tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMjM2ODMw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213#pullrequestreview-520236830", "createdAt": "2020-10-30T00:43:30Z", "commit": {"oid": "1d1623e7d1ff2b64ecdaef9424c516a446db7d33"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo0MzozMFrOHqzdTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo0MzozMFrOHqzdTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY0NTMyNQ==", "bodyText": "remove", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213#discussion_r514645325", "createdAt": "2020-10-30T00:43:30Z", "author": {"login": "samvaity"}, "path": "sdk/metricsadvisor/azure-ai-metricsadvisor/src/test/java/com/azure/ai/metricsadvisor/HookTestBase.java", "diffHunk": "@@ -97,6 +97,7 @@ protected void assertCreateWebHookOutput(Hook hook) {\n //        }\n     }\n \n+    // Track this with https://github.com/Azure/azure-sdk-for-java/issues/16932", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d1623e7d1ff2b64ecdaef9424c516a446db7d33"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMjM3NTU3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213#pullrequestreview-520237557", "createdAt": "2020-10-30T00:44:00Z", "commit": {"oid": "1d1623e7d1ff2b64ecdaef9424c516a446db7d33"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo0NDowMFrOHqzdwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDo0NDowMFrOHqzdwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY0NTQ0MQ==", "bodyText": "reported as service issue #_53", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213#discussion_r514645441", "createdAt": "2020-10-30T00:44:00Z", "author": {"login": "samvaity"}, "path": "sdk/metricsadvisor/azure-ai-metricsadvisor/src/test/java/com/azure/ai/metricsadvisor/IncidentForAlertTestBase.java", "diffHunk": "@@ -19,22 +19,22 @@\n         static final ListIncidentsForAlertInput INSTANCE = new ListIncidentsForAlertInput();\n         final ListIncidentsAlertedOptions options = new ListIncidentsAlertedOptions()\n             .setTop(10);\n-        final String alertConfigurationId = \"ff3014a0-bbbb-41ec-a637-677e77b81299\";\n-        final String alertId = \"1746b031c00\";\n+        final String alertConfigurationId = ALERT_CONFIG_ID;\n+        final String alertId = \"175434e3400\";\n     }\n \n     protected static class ListIncidentsForAlertOutput {\n         static final ListIncidentsForAlertOutput INSTANCE = new ListIncidentsForAlertOutput();\n-        final int expectedIncidents = 3;\n+        final int expectedIncidents = 2;\n     }\n \n     protected void assertListIncidentsForAlertOutput(Incident incident) {\n         Assertions.assertNotNull(incident);\n         Assertions.assertNotNull(incident.getId());\n         Assertions.assertNotNull(incident.getMetricId());\n-        Assertions.assertNotNull(incident.getSeverity());\n+        // currently, returned as null?\n+        // Assertions.assertNotNull(incident.getSeverity());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d1623e7d1ff2b64ecdaef9424c516a446db7d33"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40556944687ec87b959ad45e1b28c9b8f98e9f55", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/40556944687ec87b959ad45e1b28c9b8f98e9f55", "committedDate": "2020-10-30T18:39:01Z", "message": "use shared test secrets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ea79d4f52eb58cc5961ead08469d7dcddd8f0f7", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8ea79d4f52eb58cc5961ead08469d7dcddd8f0f7", "committedDate": "2020-10-30T18:39:03Z", "message": "remove test resources file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33be1a20c6fe9a457c0d871b8dc0b8f81eec4d46", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/33be1a20c6fe9a457c0d871b8dc0b8f81eec4d46", "committedDate": "2020-10-30T18:39:07Z", "message": "new resource Id/recordings update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4310e7f54bad2b2077db4256497ada3a269dc219", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4310e7f54bad2b2077db4256497ada3a269dc219", "committedDate": "2020-10-30T18:39:13Z", "message": "update recordings for dimensions new data feed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e013410b5f41cf255db482e562934b53c775e85a", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e013410b5f41cf255db482e562934b53c775e85a", "committedDate": "2020-10-30T18:39:17Z", "message": "update feedback recording"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56c937243a74c0b571fb3de5af67285c296742df", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/56c937243a74c0b571fb3de5af67285c296742df", "committedDate": "2020-10-30T18:39:21Z", "message": "update datafeed tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eebaf61d278e7c7a902a2783ed6a8dd9c4b7ef70", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/eebaf61d278e7c7a902a2783ed6a8dd9c4b7ef70", "committedDate": "2020-10-30T18:49:19Z", "message": "update redactor, re-record tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d1623e7d1ff2b64ecdaef9424c516a446db7d33", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1d1623e7d1ff2b64ecdaef9424c516a446db7d33", "committedDate": "2020-10-30T00:36:13Z", "message": "Merge branch 'master' into test-resources-ma"}, "afterCommit": {"oid": "10e2e05623945d2e724e5ac95cff863852e9ae43", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/10e2e05623945d2e724e5ac95cff863852e9ae43", "committedDate": "2020-10-30T18:56:06Z", "message": "update spotbugs and alert config id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10e2e05623945d2e724e5ac95cff863852e9ae43", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/10e2e05623945d2e724e5ac95cff863852e9ae43", "committedDate": "2020-10-30T18:56:06Z", "message": "update spotbugs and alert config id"}, "afterCommit": {"oid": "11e08de2afe43b3267c98b1baf6fee451ab23cff", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/11e08de2afe43b3267c98b1baf6fee451ab23cff", "committedDate": "2020-10-30T21:00:16Z", "message": "update spotbugs and alert config id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "11e08de2afe43b3267c98b1baf6fee451ab23cff", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/11e08de2afe43b3267c98b1baf6fee451ab23cff", "committedDate": "2020-10-30T21:00:16Z", "message": "update spotbugs and alert config id"}, "afterCommit": {"oid": "7f88c4515988fd62fd4183802afae47dec428e76", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7f88c4515988fd62fd4183802afae47dec428e76", "committedDate": "2020-10-30T21:12:25Z", "message": "update spotbugs and alert config id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f88c4515988fd62fd4183802afae47dec428e76", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7f88c4515988fd62fd4183802afae47dec428e76", "committedDate": "2020-10-30T21:12:25Z", "message": "update spotbugs and alert config id"}, "afterCommit": {"oid": "70a6f2bfe3831ee22dfec3af1da72b11095778a6", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/70a6f2bfe3831ee22dfec3af1da72b11095778a6", "committedDate": "2020-11-01T09:22:20Z", "message": "update spotbugs and alert config id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70a6f2bfe3831ee22dfec3af1da72b11095778a6", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/70a6f2bfe3831ee22dfec3af1da72b11095778a6", "committedDate": "2020-11-01T09:22:20Z", "message": "update spotbugs and alert config id"}, "afterCommit": {"oid": "799cb08f4c8886d6d06b078ef3fcc196ed8c6bc8", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/799cb08f4c8886d6d06b078ef3fcc196ed8c6bc8", "committedDate": "2020-11-01T21:17:44Z", "message": "update spotbugs and alert config id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "799cb08f4c8886d6d06b078ef3fcc196ed8c6bc8", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/799cb08f4c8886d6d06b078ef3fcc196ed8c6bc8", "committedDate": "2020-11-01T21:17:44Z", "message": "update spotbugs and alert config id"}, "afterCommit": {"oid": "1f4323cd5cffcde9ee5d766778331aac914ecef3", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1f4323cd5cffcde9ee5d766778331aac914ecef3", "committedDate": "2020-11-01T21:34:34Z", "message": "update spotbugs and alert config id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f4323cd5cffcde9ee5d766778331aac914ecef3", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1f4323cd5cffcde9ee5d766778331aac914ecef3", "committedDate": "2020-11-01T21:34:34Z", "message": "update spotbugs and alert config id"}, "afterCommit": {"oid": "064d178a8d6cc730c12458f6e1536d472980ef9e", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/064d178a8d6cc730c12458f6e1536d472980ef9e", "committedDate": "2020-11-01T22:47:24Z", "message": "update spotbugs and alert config id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9ee9390a0c7d145b7de8ee6d9ce4b2d8cebd1eb", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c9ee9390a0c7d145b7de8ee6d9ce4b2d8cebd1eb", "committedDate": "2020-11-01T23:00:28Z", "message": "update spotbugs and alert config id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "064d178a8d6cc730c12458f6e1536d472980ef9e", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/064d178a8d6cc730c12458f6e1536d472980ef9e", "committedDate": "2020-11-01T22:47:24Z", "message": "update spotbugs and alert config id"}, "afterCommit": {"oid": "c9ee9390a0c7d145b7de8ee6d9ce4b2d8cebd1eb", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c9ee9390a0c7d145b7de8ee6d9ce4b2d8cebd1eb", "committedDate": "2020-11-01T23:00:28Z", "message": "update spotbugs and alert config id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNzQ0MzQx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213#pullrequestreview-521744341", "createdAt": "2020-11-02T15:39:55Z", "commit": {"oid": "c9ee9390a0c7d145b7de8ee6d9ce4b2d8cebd1eb"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNTozOTo1NVrOHsJxGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNTo0MTowMFrOHsJ0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjA1OTQxNg==", "bodyText": "In finally should we attempt to clean up the resource only if the alertConfigurationId has a value (which means creation succeeded).", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213#discussion_r516059416", "createdAt": "2020-11-02T15:39:55Z", "author": {"login": "anuchandy"}, "path": "sdk/metricsadvisor/azure-ai-metricsadvisor/src/test/java/com/azure/ai/metricsadvisor/AnomalyAlertAsyncTest.java", "diffHunk": "@@ -160,20 +162,24 @@ public void getAnomalyAlertValidId(HttpClient httpClient, MetricsAdvisorServiceV\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.metricsadvisor.TestUtils#getTestParameters\")\n     public void createAnomalyAlertConfiguration(HttpClient httpClient, MetricsAdvisorServiceVersion serviceVersion) {\n-        // Arrange\n-        client = getMetricsAdvisorAdministrationBuilder(httpClient, serviceVersion).buildAsyncClient();\n         final AtomicReference<String> alertConfigurationId = new AtomicReference<>();\n-        creatAnomalyAlertRunner(inputAnomalyAlert ->\n-\n-            // Act & Assert\n-            StepVerifier.create(client.createAnomalyAlertConfiguration(inputAnomalyAlert))\n-                .assertNext(createdAnomalyAlert -> {\n-                    alertConfigurationId.set(createdAnomalyAlert.getId());\n-                    validateAnomalyAlertResult(inputAnomalyAlert, createdAnomalyAlert);\n-                })\n-                .verifyComplete());\n-\n-        client.deleteAnomalyAlertConfiguration(alertConfigurationId.get()).block();\n+        try {\n+           // Arrange\n+            client = getMetricsAdvisorAdministrationBuilder(httpClient, serviceVersion).buildAsyncClient();\n+            creatAnomalyAlertRunner(inputAnomalyAlert ->\n+\n+                // Act & Assert\n+                StepVerifier.create(client.createAnomalyAlertConfiguration(inputAnomalyAlert))\n+                    .assertNext(createdAnomalyAlert -> {\n+                        alertConfigurationId.set(createdAnomalyAlert.getId());\n+                        validateAnomalyAlertResult(inputAnomalyAlert, createdAnomalyAlert);\n+                    })\n+                    .verifyComplete());\n+        } finally {\n+            Mono<Void> deleteAnomalyAlertConfiguration\n+                = client.deleteAnomalyAlertConfiguration(alertConfigurationId.get());\n+            StepVerifier.create(deleteAnomalyAlertConfiguration).verifyComplete();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9ee9390a0c7d145b7de8ee6d9ce4b2d8cebd1eb"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjA2MDIxMg==", "bodyText": "the same comment for other applicable places we do the cleanup in finally.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213#discussion_r516060212", "createdAt": "2020-11-02T15:41:00Z", "author": {"login": "anuchandy"}, "path": "sdk/metricsadvisor/azure-ai-metricsadvisor/src/test/java/com/azure/ai/metricsadvisor/AnomalyAlertAsyncTest.java", "diffHunk": "@@ -160,20 +162,24 @@ public void getAnomalyAlertValidId(HttpClient httpClient, MetricsAdvisorServiceV\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.metricsadvisor.TestUtils#getTestParameters\")\n     public void createAnomalyAlertConfiguration(HttpClient httpClient, MetricsAdvisorServiceVersion serviceVersion) {\n-        // Arrange\n-        client = getMetricsAdvisorAdministrationBuilder(httpClient, serviceVersion).buildAsyncClient();\n         final AtomicReference<String> alertConfigurationId = new AtomicReference<>();\n-        creatAnomalyAlertRunner(inputAnomalyAlert ->\n-\n-            // Act & Assert\n-            StepVerifier.create(client.createAnomalyAlertConfiguration(inputAnomalyAlert))\n-                .assertNext(createdAnomalyAlert -> {\n-                    alertConfigurationId.set(createdAnomalyAlert.getId());\n-                    validateAnomalyAlertResult(inputAnomalyAlert, createdAnomalyAlert);\n-                })\n-                .verifyComplete());\n-\n-        client.deleteAnomalyAlertConfiguration(alertConfigurationId.get()).block();\n+        try {\n+           // Arrange\n+            client = getMetricsAdvisorAdministrationBuilder(httpClient, serviceVersion).buildAsyncClient();\n+            creatAnomalyAlertRunner(inputAnomalyAlert ->\n+\n+                // Act & Assert\n+                StepVerifier.create(client.createAnomalyAlertConfiguration(inputAnomalyAlert))\n+                    .assertNext(createdAnomalyAlert -> {\n+                        alertConfigurationId.set(createdAnomalyAlert.getId());\n+                        validateAnomalyAlertResult(inputAnomalyAlert, createdAnomalyAlert);\n+                    })\n+                    .verifyComplete());\n+        } finally {\n+            Mono<Void> deleteAnomalyAlertConfiguration\n+                = client.deleteAnomalyAlertConfiguration(alertConfigurationId.get());\n+            StepVerifier.create(deleteAnomalyAlertConfiguration).verifyComplete();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjA1OTQxNg=="}, "originalCommit": {"oid": "c9ee9390a0c7d145b7de8ee6d9ce4b2d8cebd1eb"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxODUyNjQ4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213#pullrequestreview-521852648", "createdAt": "2020-11-02T17:34:30Z", "commit": {"oid": "c9ee9390a0c7d145b7de8ee6d9ce4b2d8cebd1eb"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNzozNDozMFrOHsO47A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxNzozNjo0MVrOHsO9uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjE0MzM0MA==", "bodyText": "Should leave a TODO to determine the root cause and fix this.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213#discussion_r516143340", "createdAt": "2020-11-02T17:34:30Z", "author": {"login": "alzimmermsft"}, "path": "sdk/metricsadvisor/azure-ai-metricsadvisor/pom.xml", "diffHunk": "@@ -109,6 +109,17 @@\n               </argLine>\n             </configuration>\n           </plugin>\n+          <plugin>\n+            <groupId>org.apache.maven.plugins</groupId>\n+            <artifactId>maven-surefire-plugin</artifactId>\n+            <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-surefire-plugin;external_dependency} -->\n+            <configuration>\n+              <systemPropertyVariables>\n+                <!-- Parallel runs disabled due to subscriber timeout issue causing failures in tests. -->\n+                <junit.jupiter.execution.parallel.enabled>false</junit.jupiter.execution.parallel.enabled>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9ee9390a0c7d145b7de8ee6d9ce4b2d8cebd1eb"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjE0NDU3MQ==", "bodyText": "Are these static test configurations or dynamic each time the tests are ran?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16213#discussion_r516144571", "createdAt": "2020-11-02T17:36:41Z", "author": {"login": "alzimmermsft"}, "path": "sdk/metricsadvisor/tests.yml", "diffHunk": "@@ -10,3 +10,23 @@ jobs:\n           safeName: azureaimetricsadvisor\n       EnvVars:\n         AZURE_TEST_MODE: RECORD\n+        AZURE_METRICS_ADVISOR_ENDPOINT: $(metricsadvisor-test-service-endpoint)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9ee9390a0c7d145b7de8ee6d9ce4b2d8cebd1eb"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b8f1e1d8bb9f170f4b28e303176ac166232643b", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9b8f1e1d8bb9f170f4b28e303176ac166232643b", "committedDate": "2020-11-02T20:51:44Z", "message": "check non-null id before finally"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39541498cb3d973d8beb6908102739985c3dbbe7", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/39541498cb3d973d8beb6908102739985c3dbbe7", "committedDate": "2020-11-02T20:22:18Z", "message": "check non-null id before finally"}, "afterCommit": {"oid": "9b8f1e1d8bb9f170f4b28e303176ac166232643b", "author": {"user": {"login": "samvaity", "name": "Sameeksha Vaity"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9b8f1e1d8bb9f170f4b28e303176ac166232643b", "committedDate": "2020-11-02T20:51:44Z", "message": "check non-null id before finally"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2136, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}