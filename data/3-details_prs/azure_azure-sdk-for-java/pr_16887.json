{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwOTcyNjE4", "number": 16887, "title": "Communication - Purchase Search Follow-up PR", "bodyText": "", "createdAt": "2020-10-27T18:37:32Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887", "merged": true, "mergeCommit": {"oid": "6ed232113b920e957dc221ac8fcb2f05ff643b95"}, "closed": true, "closedAt": "2020-10-28T19:04:32Z", "author": {"login": "jbeauregardb"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWtnclgH2gAyNTEwOTcyNjE4OjJjMGFhNGU2ZDAzODM3Y2YzMDM4M2EyYWI5ZTVhZjJjZjc2MzFjZjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXCU4tgFqTUxODk5Mjk1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2c0aa4e6d03837cf30383a2ab9e5af2cf7631cf9", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2c0aa4e6d03837cf30383a2ab9e5af2cf7631cf9", "committedDate": "2020-10-27T18:52:23Z", "message": "Fixed response types"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24a0acf99ac5c929f817f572305b9386cc6cac2f", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/24a0acf99ac5c929f817f572305b9386cc6cac2f", "committedDate": "2020-10-27T18:34:04Z", "message": "Fixed response types"}, "afterCommit": {"oid": "2c0aa4e6d03837cf30383a2ab9e5af2cf7631cf9", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2c0aa4e6d03837cf30383a2ab9e5af2cf7631cf9", "committedDate": "2020-10-27T18:52:23Z", "message": "Fixed response types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fbde25606580ac4df4fe2a1c53562d426b52cfa", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3fbde25606580ac4df4fe2a1c53562d426b52cfa", "committedDate": "2020-10-27T20:00:09Z", "message": "Fixed EVERYTHING"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "de600a5a572065f26ab245f6663d749e893d890e", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/de600a5a572065f26ab245f6663d749e893d890e", "committedDate": "2020-10-27T19:46:33Z", "message": "Fixed EVERYTHING"}, "afterCommit": {"oid": "3fbde25606580ac4df4fe2a1c53562d426b52cfa", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3fbde25606580ac4df4fe2a1c53562d426b52cfa", "committedDate": "2020-10-27T20:00:09Z", "message": "Fixed EVERYTHING"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MTI0MDcy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887#pullrequestreview-518124072", "createdAt": "2020-10-27T20:41:17Z", "commit": {"oid": "3fbde25606580ac4df4fe2a1c53562d426b52cfa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMDo0MToxOFrOHpQCAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMDo0MToxOFrOHpQCAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAxNjMyMw==", "bodyText": "Can you make it a const (DEFAULT_POLL_INTERVAL) and reuse in all other methods as well? I guess the only other operation right now is the beginCreateSearch but you will also add the beginReleasePhoneNumber, and you can use the same default for everything", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887#discussion_r513016323", "createdAt": "2020-10-27T20:41:18Z", "author": {"login": "ankitarorabit"}, "path": "sdk/communication/azure-communication-administration/src/main/java/com/azure/communication/administration/PhoneNumberAsyncClient.java", "diffHunk": "@@ -847,48 +847,53 @@\n      */\n \n     @ServiceMethod(returns = ReturnType.COLLECTION)\n-    public PollerFlux<Void, Void> beginPurchaseSearch(String searchId, Duration pollInterval) {\n+    public PollerFlux<PhoneNumberSearch, \n+        PhoneNumberSearch> beginPurchaseSearch(String searchId, Duration pollInterval) {\n         Objects.requireNonNull(searchId, \"'searchId' can not be null.\");\n-        Objects.requireNonNull(pollInterval, \"'pollInterval' can not be null.\");\n+        \n+        if (pollInterval == null) {\n+            pollInterval = Duration.ofSeconds(5);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3fbde25606580ac4df4fe2a1c53562d426b52cfa"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MTI3MDI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887#pullrequestreview-518127025", "createdAt": "2020-10-27T20:45:34Z", "commit": {"oid": "3fbde25606580ac4df4fe2a1c53562d426b52cfa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMDo0NTozNFrOHpQLAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMDo0NTozNFrOHpQLAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAxODYyNA==", "bodyText": "nit: do you mind moving Mono> to the line above, will look cleaner :)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887#discussion_r513018624", "createdAt": "2020-10-27T20:45:34Z", "author": {"login": "ankitarorabit"}, "path": "sdk/communication/azure-communication-administration/src/main/java/com/azure/communication/administration/PhoneNumberAsyncClient.java", "diffHunk": "@@ -847,48 +847,53 @@\n      */\n \n     @ServiceMethod(returns = ReturnType.COLLECTION)\n-    public PollerFlux<Void, Void> beginPurchaseSearch(String searchId, Duration pollInterval) {\n+    public PollerFlux<PhoneNumberSearch, \n+        PhoneNumberSearch> beginPurchaseSearch(String searchId, Duration pollInterval) {\n         Objects.requireNonNull(searchId, \"'searchId' can not be null.\");\n-        Objects.requireNonNull(pollInterval, \"'pollInterval' can not be null.\");\n+        \n+        if (pollInterval == null) {\n+            pollInterval = Duration.ofSeconds(5);\n+        }\n \n-        return new PollerFlux<Void, Void>(pollInterval,\n+        return new PollerFlux<PhoneNumberSearch, PhoneNumberSearch>(pollInterval,\n             purchaseSearchActivationOperation(searchId),\n             purchaseSearchPollOperation(searchId),\n             (activationResponse, pollingContext) -> Mono.error(new RuntimeException(\"Cancellation is not supported\")),\n             purchaseSearchFetchResultOperation());\n     }\n \n-    private Function<PollingContext<Void>, Mono<Void>> purchaseSearchActivationOperation(String searchId) {\n-\n+    private Function<PollingContext<PhoneNumberSearch>, \n+        Mono<PhoneNumberSearch>> purchaseSearchActivationOperation(String searchId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3fbde25606580ac4df4fe2a1c53562d426b52cfa"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MTI3OTk0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887#pullrequestreview-518127994", "createdAt": "2020-10-27T20:46:57Z", "commit": {"oid": "3fbde25606580ac4df4fe2a1c53562d426b52cfa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMDo0Njo1OFrOHpQN-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QyMDo0Njo1OFrOHpQN-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAxOTM4Ng==", "bodyText": "Can we use more descriptive parameter names than res, agh?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887#discussion_r513019386", "createdAt": "2020-10-27T20:46:58Z", "author": {"login": "ankitarorabit"}, "path": "sdk/communication/azure-communication-administration/src/main/java/com/azure/communication/administration/PhoneNumberAsyncClient.java", "diffHunk": "@@ -847,48 +847,53 @@\n      */\n \n     @ServiceMethod(returns = ReturnType.COLLECTION)\n-    public PollerFlux<Void, Void> beginPurchaseSearch(String searchId, Duration pollInterval) {\n+    public PollerFlux<PhoneNumberSearch, \n+        PhoneNumberSearch> beginPurchaseSearch(String searchId, Duration pollInterval) {\n         Objects.requireNonNull(searchId, \"'searchId' can not be null.\");\n-        Objects.requireNonNull(pollInterval, \"'pollInterval' can not be null.\");\n+        \n+        if (pollInterval == null) {\n+            pollInterval = Duration.ofSeconds(5);\n+        }\n \n-        return new PollerFlux<Void, Void>(pollInterval,\n+        return new PollerFlux<PhoneNumberSearch, PhoneNumberSearch>(pollInterval,\n             purchaseSearchActivationOperation(searchId),\n             purchaseSearchPollOperation(searchId),\n             (activationResponse, pollingContext) -> Mono.error(new RuntimeException(\"Cancellation is not supported\")),\n             purchaseSearchFetchResultOperation());\n     }\n \n-    private Function<PollingContext<Void>, Mono<Void>> purchaseSearchActivationOperation(String searchId) {\n-\n+    private Function<PollingContext<PhoneNumberSearch>, \n+        Mono<PhoneNumberSearch>> purchaseSearchActivationOperation(String searchId) {\n         return (pollingContext) -> {\n-            Mono<Void> response = purchaseSearch(searchId);\n-            return response;\n+            Mono<PhoneNumberSearch> res = purchaseSearch(searchId).flatMap(agh -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3fbde25606580ac4df4fe2a1c53562d426b52cfa"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MTM4OTU5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887#pullrequestreview-518138959", "createdAt": "2020-10-27T20:54:14Z", "commit": {"oid": "3fbde25606580ac4df4fe2a1c53562d426b52cfa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4eddb1cfdeda7cbd19351e576389fa73b3681ff", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b4eddb1cfdeda7cbd19351e576389fa73b3681ff", "committedDate": "2020-10-27T22:56:04Z", "message": "Reverted to void"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "501ebd2b9f83bc081ca04aca5729d92f7a23578f", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/501ebd2b9f83bc081ca04aca5729d92f7a23578f", "committedDate": "2020-10-27T23:10:04Z", "message": "Added default poll interval constant"}, "afterCommit": {"oid": "28e38f9b0f219bded5dd01a8cc659f655dcebc31", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/28e38f9b0f219bded5dd01a8cc659f655dcebc31", "committedDate": "2020-10-27T23:18:40Z", "message": "Added default poll interval constant"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MjIwNTM1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887#pullrequestreview-518220535", "createdAt": "2020-10-27T23:20:12Z", "commit": {"oid": "28e38f9b0f219bded5dd01a8cc659f655dcebc31"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "335c7fd4deabf0709567be2fd87acd788ca70ceb", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/335c7fd4deabf0709567be2fd87acd788ca70ceb", "committedDate": "2020-10-27T23:37:33Z", "message": "Added default poll interval constant"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "28e38f9b0f219bded5dd01a8cc659f655dcebc31", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/28e38f9b0f219bded5dd01a8cc659f655dcebc31", "committedDate": "2020-10-27T23:18:40Z", "message": "Added default poll interval constant"}, "afterCommit": {"oid": "335c7fd4deabf0709567be2fd87acd788ca70ceb", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/335c7fd4deabf0709567be2fd87acd788ca70ceb", "committedDate": "2020-10-27T23:37:33Z", "message": "Added default poll interval constant"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MzIzNzk5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887#pullrequestreview-518323799", "createdAt": "2020-10-28T04:56:16Z", "commit": {"oid": "335c7fd4deabf0709567be2fd87acd788ca70ceb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10c94d54b61bd57d9fca90f7e17fe24b6e45eb59", "author": {"user": {"login": "jbeauregardb", "name": "Jorge Beauregard"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/10c94d54b61bd57d9fca90f7e17fe24b6e45eb59", "committedDate": "2020-10-28T15:23:29Z", "message": "Purchase methods are now private"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4OTkyOTU1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16887#pullrequestreview-518992955", "createdAt": "2020-10-28T19:00:07Z", "commit": {"oid": "10c94d54b61bd57d9fca90f7e17fe24b6e45eb59"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1709, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}