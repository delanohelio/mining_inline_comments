{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4ODE0MTA3", "number": 7835, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxODozMDo0NlrODcBCVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQyMToyNzowMFrODcENIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNzAzNzAwOnYy", "diffSide": "RIGHT", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobClient.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxODozMDo0NlrOFj1XYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxODo0MDo1N1rOFj1q_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzExODgxNg==", "bodyText": "I thought this method was only java 9?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7835#discussion_r373118816", "createdAt": "2020-01-30T18:30:46Z", "author": {"login": "rickle-msft"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobClient.java", "diffHunk": "@@ -115,6 +120,70 @@ public PageBlobClient getPageBlobClient() {\n             .buildPageBlobClient();\n     }\n \n+    /**\n+     * Creates a new blob. By default this method will not overwrite an existing blob.\n+     *\n+     * @param data The data to write to the blob.\n+     * @param length The exact length of the data. It is important that this value match precisely the length of the\n+     * data provided in the {@link InputStream}.\n+     */\n+    public void upload(InputStream data, long length) {\n+        upload(data, length, false);\n+    }\n+\n+    /**\n+     * Creates a new blob, or updates the content of an existing blob.\n+     *\n+     * @param data The data to write to the blob.\n+     * @param length The exact length of the data. It is important that this value match precisely the length of the\n+     * data provided in the {@link InputStream}.\n+     * @param overwrite Whether or not to overwrite, should data exist on the blob.\n+     */\n+    public void upload(InputStream data, long length, boolean overwrite) {\n+        BlobRequestConditions blobRequestConditions = new BlobRequestConditions();\n+        if (!overwrite) {\n+            blobRequestConditions.setIfNoneMatch(Constants.HeaderConstants.ETAG_WILDCARD);\n+        }\n+        uploadWithResponse(data, length, null, null, null, null, blobRequestConditions, null, Context.NONE);\n+    }\n+\n+    /**\n+     * Creates a new blob, or updates the content of an existing blob.\n+     * <p>\n+     * To avoid overwriting, pass \"*\" to {@link BlobRequestConditions#setIfNoneMatch(String)}.\n+     *\n+     * @param data The data to write to the blob.\n+     * @param length The exact length of the data. It is important that this value match precisely the length of the\n+     * data provided in the {@link InputStream}.\n+     * @param parallelTransferOptions {@link ParallelTransferOptions} used to configure buffered uploading.\n+     * @param headers {@link BlobHttpHeaders}\n+     * @param metadata Metadata to associate with the blob.\n+     * @param tier {@link AccessTier} for the destination blob.\n+     * @param requestConditions {@link BlobRequestConditions}\n+     * @param timeout An optional timeout value beyond which a {@link RuntimeException} will be raised.\n+     * @param context Additional context that is passed through the Http pipeline during the service call.\n+     */\n+    public void uploadWithResponse(InputStream data, long length, ParallelTransferOptions parallelTransferOptions,\n+        BlobHttpHeaders headers, Map<String, String> metadata, AccessTier tier, BlobRequestConditions requestConditions,\n+        Duration timeout, Context context) {\n+        BlockBlobClient blockBlobClient = this.getBlockBlobClient();\n+        final ParallelTransferOptions validatedParallelTransferOptions =\n+            ModelHelper.populateAndApplyDefaults(parallelTransferOptions);\n+        if (length < validatedParallelTransferOptions.getMaxSingleUploadSize()) {\n+            blockBlobClient.uploadWithResponse(data, length, headers, metadata, tier, null, requestConditions,\n+                timeout, context);\n+        } else {\n+            BlobOutputStream blobOutputStream = BlobOutputStream.blockBlobOutputStream(client,\n+                validatedParallelTransferOptions, headers, metadata, tier, requestConditions);\n+            try {\n+                data.transferTo(blobOutputStream);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b61665336f217d120cd3d6748013909b59275c2d"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMzY4Ng==", "bodyText": "yep, I need to change it", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7835#discussion_r373123686", "createdAt": "2020-01-30T18:40:41Z", "author": {"login": "gapra-msft"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobClient.java", "diffHunk": "@@ -115,6 +120,70 @@ public PageBlobClient getPageBlobClient() {\n             .buildPageBlobClient();\n     }\n \n+    /**\n+     * Creates a new blob. By default this method will not overwrite an existing blob.\n+     *\n+     * @param data The data to write to the blob.\n+     * @param length The exact length of the data. It is important that this value match precisely the length of the\n+     * data provided in the {@link InputStream}.\n+     */\n+    public void upload(InputStream data, long length) {\n+        upload(data, length, false);\n+    }\n+\n+    /**\n+     * Creates a new blob, or updates the content of an existing blob.\n+     *\n+     * @param data The data to write to the blob.\n+     * @param length The exact length of the data. It is important that this value match precisely the length of the\n+     * data provided in the {@link InputStream}.\n+     * @param overwrite Whether or not to overwrite, should data exist on the blob.\n+     */\n+    public void upload(InputStream data, long length, boolean overwrite) {\n+        BlobRequestConditions blobRequestConditions = new BlobRequestConditions();\n+        if (!overwrite) {\n+            blobRequestConditions.setIfNoneMatch(Constants.HeaderConstants.ETAG_WILDCARD);\n+        }\n+        uploadWithResponse(data, length, null, null, null, null, blobRequestConditions, null, Context.NONE);\n+    }\n+\n+    /**\n+     * Creates a new blob, or updates the content of an existing blob.\n+     * <p>\n+     * To avoid overwriting, pass \"*\" to {@link BlobRequestConditions#setIfNoneMatch(String)}.\n+     *\n+     * @param data The data to write to the blob.\n+     * @param length The exact length of the data. It is important that this value match precisely the length of the\n+     * data provided in the {@link InputStream}.\n+     * @param parallelTransferOptions {@link ParallelTransferOptions} used to configure buffered uploading.\n+     * @param headers {@link BlobHttpHeaders}\n+     * @param metadata Metadata to associate with the blob.\n+     * @param tier {@link AccessTier} for the destination blob.\n+     * @param requestConditions {@link BlobRequestConditions}\n+     * @param timeout An optional timeout value beyond which a {@link RuntimeException} will be raised.\n+     * @param context Additional context that is passed through the Http pipeline during the service call.\n+     */\n+    public void uploadWithResponse(InputStream data, long length, ParallelTransferOptions parallelTransferOptions,\n+        BlobHttpHeaders headers, Map<String, String> metadata, AccessTier tier, BlobRequestConditions requestConditions,\n+        Duration timeout, Context context) {\n+        BlockBlobClient blockBlobClient = this.getBlockBlobClient();\n+        final ParallelTransferOptions validatedParallelTransferOptions =\n+            ModelHelper.populateAndApplyDefaults(parallelTransferOptions);\n+        if (length < validatedParallelTransferOptions.getMaxSingleUploadSize()) {\n+            blockBlobClient.uploadWithResponse(data, length, headers, metadata, tier, null, requestConditions,\n+                timeout, context);\n+        } else {\n+            BlobOutputStream blobOutputStream = BlobOutputStream.blockBlobOutputStream(client,\n+                validatedParallelTransferOptions, headers, metadata, tier, requestConditions);\n+            try {\n+                data.transferTo(blobOutputStream);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzExODgxNg=="}, "originalCommit": {"oid": "b61665336f217d120cd3d6748013909b59275c2d"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMzgzOA==", "bodyText": "I made the PR before I realized", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7835#discussion_r373123838", "createdAt": "2020-01-30T18:40:57Z", "author": {"login": "gapra-msft"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobClient.java", "diffHunk": "@@ -115,6 +120,70 @@ public PageBlobClient getPageBlobClient() {\n             .buildPageBlobClient();\n     }\n \n+    /**\n+     * Creates a new blob. By default this method will not overwrite an existing blob.\n+     *\n+     * @param data The data to write to the blob.\n+     * @param length The exact length of the data. It is important that this value match precisely the length of the\n+     * data provided in the {@link InputStream}.\n+     */\n+    public void upload(InputStream data, long length) {\n+        upload(data, length, false);\n+    }\n+\n+    /**\n+     * Creates a new blob, or updates the content of an existing blob.\n+     *\n+     * @param data The data to write to the blob.\n+     * @param length The exact length of the data. It is important that this value match precisely the length of the\n+     * data provided in the {@link InputStream}.\n+     * @param overwrite Whether or not to overwrite, should data exist on the blob.\n+     */\n+    public void upload(InputStream data, long length, boolean overwrite) {\n+        BlobRequestConditions blobRequestConditions = new BlobRequestConditions();\n+        if (!overwrite) {\n+            blobRequestConditions.setIfNoneMatch(Constants.HeaderConstants.ETAG_WILDCARD);\n+        }\n+        uploadWithResponse(data, length, null, null, null, null, blobRequestConditions, null, Context.NONE);\n+    }\n+\n+    /**\n+     * Creates a new blob, or updates the content of an existing blob.\n+     * <p>\n+     * To avoid overwriting, pass \"*\" to {@link BlobRequestConditions#setIfNoneMatch(String)}.\n+     *\n+     * @param data The data to write to the blob.\n+     * @param length The exact length of the data. It is important that this value match precisely the length of the\n+     * data provided in the {@link InputStream}.\n+     * @param parallelTransferOptions {@link ParallelTransferOptions} used to configure buffered uploading.\n+     * @param headers {@link BlobHttpHeaders}\n+     * @param metadata Metadata to associate with the blob.\n+     * @param tier {@link AccessTier} for the destination blob.\n+     * @param requestConditions {@link BlobRequestConditions}\n+     * @param timeout An optional timeout value beyond which a {@link RuntimeException} will be raised.\n+     * @param context Additional context that is passed through the Http pipeline during the service call.\n+     */\n+    public void uploadWithResponse(InputStream data, long length, ParallelTransferOptions parallelTransferOptions,\n+        BlobHttpHeaders headers, Map<String, String> metadata, AccessTier tier, BlobRequestConditions requestConditions,\n+        Duration timeout, Context context) {\n+        BlockBlobClient blockBlobClient = this.getBlockBlobClient();\n+        final ParallelTransferOptions validatedParallelTransferOptions =\n+            ModelHelper.populateAndApplyDefaults(parallelTransferOptions);\n+        if (length < validatedParallelTransferOptions.getMaxSingleUploadSize()) {\n+            blockBlobClient.uploadWithResponse(data, length, headers, metadata, tier, null, requestConditions,\n+                timeout, context);\n+        } else {\n+            BlobOutputStream blobOutputStream = BlobOutputStream.blockBlobOutputStream(client,\n+                validatedParallelTransferOptions, headers, metadata, tier, requestConditions);\n+            try {\n+                data.transferTo(blobOutputStream);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzExODgxNg=="}, "originalCommit": {"oid": "b61665336f217d120cd3d6748013909b59275c2d"}, "originalPosition": 86}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwNzU1NjE4OnYy", "diffSide": "RIGHT", "path": "sdk/storage/azure-storage-common/src/main/java/com/azure/storage/common/Utility.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQyMToyNzowMFrOFj6diA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQyMjozNDo0NVrOFj8MdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwMjMxMg==", "bodyText": "Could this go into StorageImplUtils for the time being? Do we expected or would want a customer to use this API in the near-term?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7835#discussion_r373202312", "createdAt": "2020-01-30T21:27:00Z", "author": {"login": "alzimmermsft"}, "path": "sdk/storage/azure-storage-common/src/main/java/com/azure/storage/common/Utility.java", "diffHunk": "@@ -241,4 +244,27 @@ public static OffsetDateTime parseDate(String dateString) {\n                 }\n             });\n     }\n+\n+    /**\n+     * Reads data from an input stream and writes it to an output stream.\n+     * @param source {@link InputStream source}\n+     * @param writeLength The length of data to write.\n+     * @param destination {@link OutputStream destination}\n+     * @throws IOException If an I/O error occurs.\n+     */\n+    public static void copyToOutputStream(InputStream source, long writeLength, OutputStream destination)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "083af3f1e39421e69740a79c5deb49da12172fc2"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwNDU3MA==", "bodyText": "I have nothing against doing that", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7835#discussion_r373204570", "createdAt": "2020-01-30T21:32:15Z", "author": {"login": "gapra-msft"}, "path": "sdk/storage/azure-storage-common/src/main/java/com/azure/storage/common/Utility.java", "diffHunk": "@@ -241,4 +244,27 @@ public static OffsetDateTime parseDate(String dateString) {\n                 }\n             });\n     }\n+\n+    /**\n+     * Reads data from an input stream and writes it to an output stream.\n+     * @param source {@link InputStream source}\n+     * @param writeLength The length of data to write.\n+     * @param destination {@link OutputStream destination}\n+     * @throws IOException If an I/O error occurs.\n+     */\n+    public static void copyToOutputStream(InputStream source, long writeLength, OutputStream destination)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwMjMxMg=="}, "originalCommit": {"oid": "083af3f1e39421e69740a79c5deb49da12172fc2"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIzMDcwOA==", "bodyText": "done", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7835#discussion_r373230708", "createdAt": "2020-01-30T22:34:45Z", "author": {"login": "gapra-msft"}, "path": "sdk/storage/azure-storage-common/src/main/java/com/azure/storage/common/Utility.java", "diffHunk": "@@ -241,4 +244,27 @@ public static OffsetDateTime parseDate(String dateString) {\n                 }\n             });\n     }\n+\n+    /**\n+     * Reads data from an input stream and writes it to an output stream.\n+     * @param source {@link InputStream source}\n+     * @param writeLength The length of data to write.\n+     * @param destination {@link OutputStream destination}\n+     * @throws IOException If an I/O error occurs.\n+     */\n+    public static void copyToOutputStream(InputStream source, long writeLength, OutputStream destination)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzIwMjMxMg=="}, "originalCommit": {"oid": "083af3f1e39421e69740a79c5deb49da12172fc2"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3259, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}