{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyMjU5NTMz", "number": 14365, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNToyNzowOFrOEbaU-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNToyNzowOFrOEbaU-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3MTc4MzYwOnYy", "diffSide": "RIGHT", "path": "sdk/resourcemanager/azure-resourcemanager-appplatform/src/main/java/com/azure/resourcemanager/appplatform/implementation/SpringServiceImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNToyNzowOFrOHFVE8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQwNToyNzowOFrOHFVE8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM1MDI1OA==", "bodyText": "Better to have an object configured, and delay postRunDependency to e.g. beforeCreating", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14365#discussion_r475350258", "createdAt": "2020-08-24T05:27:08Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/resourcemanager/azure-resourcemanager-appplatform/src/main/java/com/azure/resourcemanager/appplatform/implementation/SpringServiceImpl.java", "diffHunk": "@@ -107,70 +121,80 @@ public SpringServiceImpl withSku(String skuName, int capacity) {\n \n     @Override\n     public SpringServiceImpl withSku(Sku sku) {\n+        needUpdate = true;\n         inner().withSku(sku);\n         return this;\n     }\n \n     @Override\n     public SpringServiceImpl withTracing(String appInsightInstrumentationKey) {\n-        if (inner().properties() == null) {\n-            inner().withProperties(new ClusterResourceProperties());\n-        }\n-        inner().properties().withTrace(\n-            new TraceProperties().withAppInsightInstrumentationKey(appInsightInstrumentationKey).withEnabled(true));\n+        this.addPostRunDependent(\n+            context -> manager().inner().getMonitoringSettings()\n+                .updatePatchAsync(resourceGroupName(), name(), new MonitoringSettingProperties()\n+                    .withAppInsightsInstrumentationKey(appInsightInstrumentationKey)\n+                    .withTraceEnabled(true))\n+                .then(context.voidMono())\n+        );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59f111d200c86a3489497ff30af4be1ac7d67398"}, "originalPosition": 97}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1489, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}