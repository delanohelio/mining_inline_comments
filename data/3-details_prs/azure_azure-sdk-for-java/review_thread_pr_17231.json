{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MjU0MTc4", "number": 17231, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMToyMDozNlrOE12cxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMToyOTowMVrOE12n5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0OTAyMDg0OnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceivedMessage.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMToyMDozNlrOHuXHGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMTo1OTowNlrOHuYUaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM3NTE5Mg==", "bodyText": "Do we need argument. ? Shouldn't this always set it to true", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17231#discussion_r518375192", "createdAt": "2020-11-05T21:20:36Z", "author": {"login": "hemanttanwar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceivedMessage.java", "diffHunk": "@@ -508,12 +523,12 @@ void setEnqueuedTime(OffsetDateTime enqueuedTime) {\n     }\n \n     /**\n-     * Sets the subject for the message.\n+     * Sets whether the message has been settled.\n      *\n-     * @param subject The subject to set.\n+     * @param isSettled True if the message has been settled and false otherwise.\n      */\n-    void setSubject(String subject) {\n-        amqpAnnotatedMessage.getProperties().setSubject(subject);\n+    void setIsSettled(boolean isSettled) {\n+        this.isSettled = isSettled;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53672ee6eb9f47dcd6d12f7c4a9b72cf4b4866a2"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM5NDk4NA==", "bodyText": "Resolved", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17231#discussion_r518394984", "createdAt": "2020-11-05T21:59:06Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceivedMessage.java", "diffHunk": "@@ -508,12 +523,12 @@ void setEnqueuedTime(OffsetDateTime enqueuedTime) {\n     }\n \n     /**\n-     * Sets the subject for the message.\n+     * Sets whether the message has been settled.\n      *\n-     * @param subject The subject to set.\n+     * @param isSettled True if the message has been settled and false otherwise.\n      */\n-    void setSubject(String subject) {\n-        amqpAnnotatedMessage.getProperties().setSubject(subject);\n+    void setIsSettled(boolean isSettled) {\n+        this.isSettled = isSettled;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM3NTE5Mg=="}, "originalCommit": {"oid": "53672ee6eb9f47dcd6d12f7c4a9b72cf4b4866a2"}, "originalPosition": 102}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0OTA0OTMyOnYy", "diffSide": "RIGHT", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMToyOTowMVrOHuXYAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMTo1OToxNlrOHuYU1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM3OTUyMw==", "bodyText": "If the message is already settled, we should throw error with message something like The message has either been deleted or already settled \nCheck line item 2 on this.\nhttps://microsoft.sharepoint.com/teams/AzureDeveloperExperience/_layouts/15/Doc.aspx?sourcedoc={41b0af1e-8da3-4d88-b296-9b616c3e7b6b}&action=edit&wd=target%28Design.one%7C14d18aa9-3941-cf4d-b2fa-4b211ac30733%2FException%5C%2FError%20handling%7Ce696adb4-72c6-4a64-85fb-1d187557099b%2F%29&wdorigin=703", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17231#discussion_r518379523", "createdAt": "2020-11-05T21:29:01Z", "author": {"login": "hemanttanwar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "diffHunk": "@@ -1001,16 +1005,18 @@ private boolean isManagementToken(String lockToken) {\n                 logger.info(\"{}: Management node Update completed. Disposition: {}. Lock: {}.\",\n                     entityPath, dispositionStatus, lockToken);\n \n+                message.setIsSettled(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53672ee6eb9f47dcd6d12f7c4a9b72cf4b4866a2"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM5NTA5Mg==", "bodyText": "Throwing error message now.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17231#discussion_r518395092", "createdAt": "2020-11-05T21:59:16Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "diffHunk": "@@ -1001,16 +1005,18 @@ private boolean isManagementToken(String lockToken) {\n                 logger.info(\"{}: Management node Update completed. Disposition: {}. Lock: {}.\",\n                     entityPath, dispositionStatus, lockToken);\n \n+                message.setIsSettled(true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM3OTUyMw=="}, "originalCommit": {"oid": "53672ee6eb9f47dcd6d12f7c4a9b72cf4b4866a2"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3034, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}