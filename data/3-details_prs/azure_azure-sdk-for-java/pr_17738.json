{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0OTk0NzU2", "number": 17738, "title": "[Service Bus] Shutdown scheduler before closing client", "bodyText": "This PR shuts down the scheduler before closing the client to avoid restarting the client in the rare case where the scheduler runs after the client is closed and before the shutdown() is called.", "createdAt": "2020-11-20T22:53:23Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17738", "merged": true, "mergeCommit": {"oid": "87d97a9f47ecaeac1ed09990f143d3acef4e7fb3"}, "closed": true, "closedAt": "2020-11-21T00:25:38Z", "author": {"login": "srnagar"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdefZjiAH2gAyNTI0OTk0NzU2OjNkMzdmZjEzMjg5MmRmZGMwM2NjNDZiNTNiYzRmNzA5OGM4NTU4YTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdegCrXgFqTUzNTg0MzIyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3d37ff132892dfdc03cc46b53bc4f7098c8558a4", "author": {"user": {"login": "srnagar", "name": "Srikanta"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3d37ff132892dfdc03cc46b53bc4f7098c8558a4", "committedDate": "2020-11-20T22:49:56Z", "message": "Shutdown scheduler before closing client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e2a67cf67e502080f0e03cd71b84f5527f9714e", "author": {"user": {"login": "srnagar", "name": "Srikanta"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4e2a67cf67e502080f0e03cd71b84f5527f9714e", "committedDate": "2020-11-20T23:12:43Z", "message": "Change equality check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODM5NjYw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17738#pullrequestreview-535839660", "createdAt": "2020-11-20T23:23:27Z", "commit": {"oid": "4e2a67cf67e502080f0e03cd71b84f5527f9714e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQyMzoyMzoyN1rOH3j5IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQyMzoyMzoyN1rOH3j5IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAyMTc5Mg==", "bodyText": "Do we throw an exception or let let the processor client to continue receive if start() is called after close()?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17738#discussion_r528021792", "createdAt": "2020-11-20T23:23:27Z", "author": {"login": "YijunXieMS"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusProcessorClient.java", "diffHunk": "@@ -116,20 +117,21 @@\n      * a new set of sessions will be processed.\n      */\n     public synchronized void start() {\n-        if (isRunning.getAndSet(true)) {\n+        if (isRunning.getAndSet(true) && !isClosed.getAndSet(false)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e2a67cf67e502080f0e03cd71b84f5527f9714e"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00640e8cbff89304fcb1be53125a886bc497050a", "author": {"user": {"login": "srnagar", "name": "Srikanta"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/00640e8cbff89304fcb1be53125a886bc497050a", "committedDate": "2020-11-20T23:30:00Z", "message": "Refactored close logic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODQzMjI3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17738#pullrequestreview-535843227", "createdAt": "2020-11-20T23:34:51Z", "commit": {"oid": "4e2a67cf67e502080f0e03cd71b84f5527f9714e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1646, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}