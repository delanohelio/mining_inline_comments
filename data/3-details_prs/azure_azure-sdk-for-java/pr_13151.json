{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MTcyNTgy", "number": 13151, "title": "Support web apps for oauth based credentials", "bodyText": "", "createdAt": "2020-07-15T00:08:33Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13151", "merged": true, "mergeCommit": {"oid": "c15199d0299b462c73293c87177005d415a85837"}, "closed": true, "closedAt": "2020-07-16T18:16:46Z", "author": {"login": "jianghaolu"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4HlyjAH2gAyNDQ5MTcyNTgyOjEzODk2ZjJlMGVmMTQwM2ZhNjhkYTc0YjY5MDljYjUwZGI1ODQwZTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1V5q8AH2gAyNDQ5MTcyNTgyOjcyNjE5MmU2MTQwNTk4M2JkOTNmMWIxZWQ1ODkwNjBhYmViNGM1MDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "13896f2e0ef1403fa68da74b6909cb50db5840e6", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/13896f2e0ef1403fa68da74b6909cb50db5840e6", "committedDate": "2020-01-07T21:25:18Z", "message": "Fix AuthorizationCodeCredential to support credential"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a489133cd19ee8c0aadd086a0a8b4760d4662e88", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a489133cd19ee8c0aadd086a0a8b4760d4662e88", "committedDate": "2020-01-07T22:13:28Z", "message": "Skip integration tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c936f22cbde630be9e49098a76ef5e55c37056c5", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c936f22cbde630be9e49098a76ef5e55c37056c5", "committedDate": "2020-01-07T22:31:27Z", "message": "unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d697541391c3d91f241ee40a383bf29660a8a56", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9d697541391c3d91f241ee40a383bf29660a8a56", "committedDate": "2020-01-08T22:52:31Z", "message": "Add same settings to InteractiveBrowserCredential"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5728c670133f32eb6d2a9b6462a60ac22e263073", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5728c670133f32eb6d2a9b6462a60ac22e263073", "committedDate": "2020-01-09T19:32:32Z", "message": "Skip live tests again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91f5831e01973a5bedda48e7d120c4d8e29501c9", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/91f5831e01973a5bedda48e7d120c4d8e29501c9", "committedDate": "2020-01-09T21:41:41Z", "message": "Checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdbd53ad09287ee8a06c88a977f77756cb653a49", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cdbd53ad09287ee8a06c88a977f77756cb653a49", "committedDate": "2020-01-15T01:34:05Z", "message": "Merge branch 'master' of github.com:Azure/azure-sdk-for-java into oauthfix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fc67a10e4e11384122b62589353769361f21586", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5fc67a10e4e11384122b62589353769361f21586", "committedDate": "2020-01-16T19:08:57Z", "message": "Checkstyle: line too long"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "903b0506118aa48e4fa52de75f0d8d68830d17cd", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/903b0506118aa48e4fa52de75f0d8d68830d17cd", "committedDate": "2020-01-16T19:43:33Z", "message": "Revert integration test change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9a6818b191e6ae44702285da5c2a966c6be834f", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f9a6818b191e6ae44702285da5c2a966c6be834f", "committedDate": "2020-01-16T21:45:00Z", "message": "Add some changelog"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "945f67bb4a897849421e68110434e6df54f7529b", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/945f67bb4a897849421e68110434e6df54f7529b", "committedDate": "2020-07-15T00:07:09Z", "message": "Merge branch 'oauthfix' of github.com:jianghaolu/azure-sdk-for-java into oauthfix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9db25dbd4fcfaf6dd61f6371facd1e598a8b186a", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9db25dbd4fcfaf6dd61f6371facd1e598a8b186a", "committedDate": "2020-07-15T00:08:42Z", "message": "Improve change log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc6a9eaa8a1769051f1b8e79a8428fc5a9639b41", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fc6a9eaa8a1769051f1b8e79a8428fc5a9639b41", "committedDate": "2020-07-15T05:58:21Z", "message": "Fix IdentityClient ctr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffaf2c81702f5b30eb56cfe1056ab8bfe378ecf2", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ffaf2c81702f5b30eb56cfe1056ab8bfe378ecf2", "committedDate": "2020-07-15T17:54:54Z", "message": "Fix javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MzczNTQ1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13151#pullrequestreview-449373545", "createdAt": "2020-07-15T21:59:03Z", "commit": {"oid": "ffaf2c81702f5b30eb56cfe1056ab8bfe378ecf2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMTo1OTowNFrOGySxHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMTo1OTowNFrOGySxHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM4OTQ2OA==", "bodyText": "Where are you setting this client secret  in ConfidentialClient ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13151#discussion_r455389468", "createdAt": "2020-07-15T21:59:04Z", "author": {"login": "g2vinay"}, "path": "sdk/identity/azure-identity/src/main/java/com/azure/identity/implementation/IdentityClient.java", "diffHunk": "@@ -550,13 +550,19 @@ private HttpPipeline setupPipeline(HttpClient httpClient) {\n      */\n     public Mono<MsalToken> authenticateWithAuthorizationCode(TokenRequestContext request, String authorizationCode,\n                                                              URI redirectUrl) {\n-        return publicClientApplicationAccessor.getValue()\n-                .flatMap(pc -> Mono.fromFuture(() -> pc.acquireToken(\n-                AuthorizationCodeParameters.builder(authorizationCode, redirectUrl)\n-                    .scopes(new HashSet<>(request.getScopes()))\n-                    .build()))\n-                .onErrorMap(t -> new ClientAuthenticationException(\"Failed to acquire token with authorization code\",\n-                    null, t)).map(ar -> new MsalToken(ar, options)));\n+        AuthorizationCodeParameters parameters = AuthorizationCodeParameters.builder(authorizationCode, redirectUrl)\n+            .scopes(new HashSet<>(request.getScopes()))\n+            .build();\n+        Mono<IAuthenticationResult> acquireToken;\n+        if (clientSecret != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffaf2c81702f5b30eb56cfe1056ab8bfe378ecf2"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MzgzNDI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13151#pullrequestreview-449383425", "createdAt": "2020-07-15T22:20:06Z", "commit": {"oid": "ffaf2c81702f5b30eb56cfe1056ab8bfe378ecf2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "726192e61405983bd93f1b1ed589060abeb4c509", "author": {"user": {"login": "jianghaolu", "name": "Jianghao Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/726192e61405983bd93f1b1ed589060abeb4c509", "committedDate": "2020-07-16T02:35:04Z", "message": "Add more javadocs for oauth client secret"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1366, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}