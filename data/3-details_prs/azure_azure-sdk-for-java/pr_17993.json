{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMTA5ODE1", "number": 17993, "title": "Fix memory leak in ServiceBusReceiverAsyncClient client lock containers", "bodyText": "This is a PR to fix the issue reported in #17992.\nAfter this fix, this is how the memory footprint looks like for the same test:\n\nAnd this is how the number of instances and retained sizes look like on the beginning and end of test:\n\n\nPlease consider publishing a release when/if this PR is accepted.\nBest regards and please let me know if you need more information!", "createdAt": "2020-12-05T23:32:20Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17993", "merged": true, "mergeCommit": {"oid": "07c54ba77cdf1e6e8e1822cdb36469a52976cb19"}, "closed": true, "closedAt": "2020-12-07T14:19:47Z", "author": {"login": "marciopd"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjTZ9SAH2gAyNTMzMTA5ODE1OjhiMzkyM2M2MjVlZjEyNDhmZmNhZjY5YjE3M2Q5NDA4ZDU4ODJlZWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdj2SKnAFqTU0NjE5MTYzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8b3923c625ef1248ffcaf69b173d9408d5882eec", "author": {"user": {"login": "marciopd", "name": "M\u00e1rcio P. Dantas"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8b3923c625ef1248ffcaf69b173d9408d5882eec", "committedDate": "2020-12-05T21:41:08Z", "message": "Closing lock containers fields in order to fix a memory leak.\n\nLockContainer constructor subscribes to Flux (cleanupOperation) and its consumer was not getting disposed under a async client close call."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f1ff8dbe3d54ec8c35403a8df7daa753e52015e", "author": {"user": {"login": "marciopd", "name": "M\u00e1rcio P. Dantas"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3f1ff8dbe3d54ec8c35403a8df7daa753e52015e", "committedDate": "2020-12-05T22:38:07Z", "message": "Unit testing that lock containers are closed under async client close call."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTkxNjMz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17993#pullrequestreview-546191633", "createdAt": "2020-12-07T14:18:58Z", "commit": {"oid": "3f1ff8dbe3d54ec8c35403a8df7daa753e52015e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDoxODo1OFrOIAo8iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNDoxODo1OFrOIAo8iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU0MTc2OA==", "bodyText": "In hindsight, I could have made these dependencies, so we wouldn't have to add these package-private methods to assert behaviour. Next time! :)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17993#discussion_r537541768", "createdAt": "2020-12-07T14:18:58Z", "author": {"login": "conniey"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusReceiverAsyncClient.java", "diffHunk": "@@ -1312,4 +1315,12 @@ private Throwable mapError(Throwable throwable, ServiceBusErrorSource errorSourc\n     boolean isConnectionClosed() {\n         return this.connectionProcessor.isChannelClosed();\n     }\n+\n+    boolean isManagementNodeLocksClosed() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f1ff8dbe3d54ec8c35403a8df7daa753e52015e"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1379, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}