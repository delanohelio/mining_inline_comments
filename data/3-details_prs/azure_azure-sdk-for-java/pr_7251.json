{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMjEwMjAy", "number": 7251, "title": "Enable Complete Test Matrix in Storage", "bodyText": "Removes the matrix configuration in the tests.yml file for Storage. This triggers Storage tests to inherit the test matrix from the parent template which specifies the complete testing matrix (Linux, Windows, and Mac X Java 8 and 11 [LTS]).\nAdditionally, changes the windowUntil prefetch from maxSingleUploadSize to Integer.MAX_VALUE to leverage an unbounded feature in Reactor. Previously, there was an issue that arose when the stream completed before triggering a window to be generated which lead to a deadlock/infinite loop state which hung the application, this was remedied by setting the prefetch limit to an arbitrarily high number. Recently it was discovered that this limit would generate an Object array the size of the limit, using Integer.MAX_VALUE triggers a specialized unbounded scenario where the prefetch is unlimited but doesn't generate the array. This change continues to fix the initially found issue while reducing the memory overhead introduced by creating the array.", "createdAt": "2020-01-07T23:00:07Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7251", "merged": true, "mergeCommit": {"oid": "56ee9d7c5e58ab2f42831cead6e3c166020e40d8"}, "closed": true, "closedAt": "2020-01-08T17:44:03Z", "author": {"login": "alzimmermsft"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4I6uGAH2gAyMzYwMjEwMjAyOjEyM2E4MDczODEzMTlhOTczNGVmZjU2ZDQ1ODk5MGZhM2E3ZGE0ZmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4YyQPAH2gAyMzYwMjEwMjAyOmY4NzE4Y2U4Nzg2NzRkMDg2ZjZkYzNkY2UyY2Q5MWVlYzliMjM4NGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "123a807381319a9734eff56d458990fa3a7da4fe", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/123a807381319a9734eff56d458990fa3a7da4fe", "committedDate": "2020-01-07T22:58:04Z", "message": "Removed Storage tests.yml matrix override to enable complete test matrix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2db9aa9b94066a0cd5d7848edac12f7513d9e31f", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2db9aa9b94066a0cd5d7848edac12f7513d9e31f", "committedDate": "2020-01-08T02:53:34Z", "message": "Change windowUntil to use magic number"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMDIxNDUy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7251#pullrequestreview-340021452", "createdAt": "2020-01-08T17:23:50Z", "commit": {"oid": "2db9aa9b94066a0cd5d7848edac12f7513d9e31f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNzoyMzo1MVrOFbeJcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNzoyMzo1MVrOFbeJcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM0OTgxMQ==", "bodyText": "Update code comment to align with this change", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7251#discussion_r364349811", "createdAt": "2020-01-08T17:23:51Z", "author": {"login": "mikeharder"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/BlobAsyncClient.java", "diffHunk": "@@ -434,7 +434,7 @@ as we can guarantee we only need at most two buffers for any call to write (two\n              * windowUntil uses a default limit of 256 and once that is hit it will trigger onComplete which causes\n              * downstream issues.\n              */\n-            }, true, parallelTransferOptions.getMaxSingleUploadSize())\n+            }, true, Integer.MAX_VALUE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2db9aa9b94066a0cd5d7848edac12f7513d9e31f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8718ce878674d086f6dc3dce2cd91eec9b2384a", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f8718ce878674d086f6dc3dce2cd91eec9b2384a", "committedDate": "2020-01-08T17:27:18Z", "message": "Update windowUntil fetch limit comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 559, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}