{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NzA5ODU4", "number": 15834, "title": "Add support for verify peer.", "bodyText": "Add logic to ConnectionHandler and support for verification options.\nEnsure that ClientOptions is not null.\nRemoving MockReactorProviderHandler because you can mock concrete classes.", "createdAt": "2020-09-30T18:45:50Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15834", "merged": true, "mergeCommit": {"oid": "4c84256098b7795401c9e8eca3338e7fc5eef7e0"}, "closed": true, "closedAt": "2020-10-02T15:54:01Z", "author": {"login": "conniey"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNidy3AH2gAyNDk1NzA5ODU4OmQ4MTIxNmM0ZjA0OGUwN2FjMDJiZDM1MThjN2UyMmZmZjhhMzY3NjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOZdW0AH2gAyNDk1NzA5ODU4OmY0NzZiZjM2MjNjZTg3OTAzMTc1Mzk0ZjE4N2EyYTE1ODU0NDllNGM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d81216c4f048e07ac02bd3518c7e22fff8a36766", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d81216c4f048e07ac02bd3518c7e22fff8a36766", "committedDate": "2020-09-29T06:47:34Z", "message": "Adding StrictTlsContext and StrictTlsContextSpi."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7bc97496647646c673755f97447ce4f07673628", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e7bc97496647646c673755f97447ce4f07673628", "committedDate": "2020-09-29T06:47:45Z", "message": "Add overloads to ConnectionHandler and WebSocketsConnectionHandler to verify peer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf94fe285909d09499b3a153593da642e724dafe", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cf94fe285909d09499b3a153593da642e724dafe", "committedDate": "2020-09-29T06:58:21Z", "message": "Fixing broken build from new constructor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04e099cf27045606b38bbae29838919b2323ed55", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/04e099cf27045606b38bbae29838919b2323ed55", "committedDate": "2020-09-30T05:27:17Z", "message": "Removing MockReactorHandlerProvider and fixing test breaks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0da1a9ff42c196ff585fe8095a66af04787eab27", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0da1a9ff42c196ff585fe8095a66af04787eab27", "committedDate": "2020-09-30T09:07:44Z", "message": "Adding tests for StrictTlsContextSpi."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36806f647cfd9ff978d585dc794bfb70ce6bc56c", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/36806f647cfd9ff978d585dc794bfb70ce6bc56c", "committedDate": "2020-09-30T17:30:35Z", "message": "Ensure ClientOptions is not null."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db87f3d74576b0cb60f503caf77dd85b6de3ee04", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/db87f3d74576b0cb60f503caf77dd85b6de3ee04", "committedDate": "2020-09-30T17:43:15Z", "message": "Fix build break in event hubs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2063e7eed7d69a36dc27a1dde2033de96cb8a8fb", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2063e7eed7d69a36dc27a1dde2033de96cb8a8fb", "committedDate": "2020-09-30T18:10:44Z", "message": "Fixing test breaks in EventHubs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "608e8e827dd71b94ce7c795c111d2f3f4894efde", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/608e8e827dd71b94ce7c795c111d2f3f4894efde", "committedDate": "2020-09-30T18:40:52Z", "message": "Fix Event Hubs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd21f71257d05c41e6f002e3bc5f0fafbefed9c5", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cd21f71257d05c41e6f002e3bc5f0fafbefed9c5", "committedDate": "2020-09-30T18:42:21Z", "message": "Adding support for Service Bus."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c55c866a368cfe92edb56261b2b1d8c8cb8d1e7b", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c55c866a368cfe92edb56261b2b1d8c8cb8d1e7b", "committedDate": "2020-09-30T19:13:07Z", "message": "Fix test failures."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ba8e4912ff118ffe836886d32fecb30c12f50e2", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0ba8e4912ff118ffe836886d32fecb30c12f50e2", "committedDate": "2020-09-30T19:37:40Z", "message": "Fix checkstyle error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NzY2MzE0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15834#pullrequestreview-499766314", "createdAt": "2020-09-30T19:59:12Z", "commit": {"oid": "c55c866a368cfe92edb56261b2b1d8c8cb8d1e7b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxOTo1OToxM1rOHatM3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQwODowMDoxMFrOHa-3SQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc2NTU5Nw==", "bodyText": "nit: fix formatting", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15834#discussion_r497765597", "createdAt": "2020-09-30T19:59:13Z", "author": {"login": "srnagar"}, "path": "sdk/core/azure-core-amqp/src/main/java/com/azure/core/amqp/implementation/ConnectionOptions.java", "diffHunk": "@@ -26,10 +27,13 @@\n     private final String fullyQualifiedNamespace;\n     private final CbsAuthorizationType authorizationType;\n     private final ClientOptions clientOptions;\n+    private final SslDomain.VerifyMode verifyMode;\n \n     public ConnectionOptions(String fullyQualifiedNamespace, TokenCredential tokenCredential,\n             CbsAuthorizationType authorizationType, AmqpTransportType transport, AmqpRetryOptions retryOptions,\n-            ProxyOptions proxyOptions, Scheduler scheduler, ClientOptions clientOptions) {\n+            ProxyOptions proxyOptions, Scheduler scheduler, ClientOptions clientOptions,\n+        SslDomain.VerifyMode verifyMode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c55c866a368cfe92edb56261b2b1d8c8cb8d1e7b"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA1NDk4NQ==", "bodyText": "Do we plan of supporting any other mode apart from VERIFY_PEER_NAME?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15834#discussion_r498054985", "createdAt": "2020-10-01T08:00:10Z", "author": {"login": "srnagar"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/EventHubClientBuilder.java", "diffHunk": "@@ -630,8 +645,10 @@ private ConnectionOptions getConnectionOptions() {\n             ? CbsAuthorizationType.SHARED_ACCESS_SIGNATURE\n             : CbsAuthorizationType.JSON_WEB_TOKEN;\n \n+        final ClientOptions options = clientOptions != null ? clientOptions : new ClientOptions();\n+\n         return new ConnectionOptions(fullyQualifiedNamespace, credentials, authorizationType, transport, retryOptions,\n-            proxyOptions, scheduler, null);\n+            proxyOptions, scheduler, options, SslDomain.VerifyMode.VERIFY_PEER_NAME);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c55c866a368cfe92edb56261b2b1d8c8cb8d1e7b"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMDk3OTIw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15834#pullrequestreview-500097920", "createdAt": "2020-10-01T08:01:39Z", "commit": {"oid": "c55c866a368cfe92edb56261b2b1d8c8cb8d1e7b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7ece9e6ee8cdf9f98a890104d0031de7882f09a", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b7ece9e6ee8cdf9f98a890104d0031de7882f09a", "committedDate": "2020-10-01T18:44:03Z", "message": "Fixing formatting."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7789d1e51a8a55ffb4fc13ea7188182408d681b", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e7789d1e51a8a55ffb4fc13ea7188182408d681b", "committedDate": "2020-10-01T18:53:31Z", "message": "Replacing deprecated with verifyNoInteractions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea4389486f479d3df4b24e890d69a9e6efbb80fb", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ea4389486f479d3df4b24e890d69a9e6efbb80fb", "committedDate": "2020-10-01T18:58:47Z", "message": "Adding package-private verification mode for testing."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "257402e7d5e639c78791e6d7cca88cdf9053d56a", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/257402e7d5e639c78791e6d7cca88cdf9053d56a", "committedDate": "2020-10-01T21:56:35Z", "message": "Fixing Proxy Send test because we do not self-sign certs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f476bf3623ce87903175394f187a2a1585449e4c", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f476bf3623ce87903175394f187a2a1585449e4c", "committedDate": "2020-10-01T22:51:52Z", "message": "Remove unused import"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3124, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}