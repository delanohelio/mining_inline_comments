{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5NTU1OTQ2", "number": 9144, "title": "Add Release Infrastructure for BOMs", "bodyText": "This PR adds release infrastructure for BOMs.", "createdAt": "2020-03-17T00:17:46Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9144", "merged": true, "mergeCommit": {"oid": "c019ca8928021192d949a9b0de092705a7b343cc"}, "closed": true, "closedAt": "2020-03-17T21:13:34Z", "author": {"login": "alzimmermsft"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOXZ47gH2gAyMzg5NTU1OTQ2OmYzMTk0YmM1ZWZhZmM4NjE2ODBmMTE5YjFjNzU1ODIyMjQ2M2E3Y2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOpYEQgFqTM3NjQwOTc4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f3194bc5efafc861680f119b1c7558222463a7ce", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f3194bc5efafc861680f119b1c7558222463a7ce", "committedDate": "2020-03-17T00:17:07Z", "message": "Added archetypes for BOMs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfcfca289ffea58ef4db986240249734f140ca43", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bfcfca289ffea58ef4db986240249734f140ca43", "committedDate": "2020-03-17T00:31:08Z", "message": "Standardize BOM build configuration with normal client configuration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NzQyMDIz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9144#pullrequestreview-375742023", "createdAt": "2020-03-17T05:03:06Z", "commit": {"oid": "bfcfca289ffea58ef4db986240249734f140ca43"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNTowMzowNlrOF3OEHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwNTowMzowNlrOF3OEHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ0NjQyOA==", "bodyText": "nit: this can be removed.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9144#discussion_r393446428", "createdAt": "2020-03-17T05:03:06Z", "author": {"login": "srnagar"}, "path": "sdk/boms/pom.service.xml", "diffHunk": "@@ -0,0 +1,16 @@\n+<!-- Copyright (c) Microsoft Corporation. All rights reserved.\n+     Licensed under the MIT License. -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <groupId>com.azure</groupId>\n+  <artifactId>azure-boms</artifactId>\n+  <packaging>pom</packaging>\n+  <version>1.0.0</version><!-- Need not change for every release-->\n+  <modules>\n+    <!-- NOTE: Commenting out because we should now be binary composed.\n+    -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfcfca289ffea58ef4db986240249734f140ca43"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MDQ2Mzg4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9144#pullrequestreview-376046388", "createdAt": "2020-03-17T13:44:39Z", "commit": {"oid": "bfcfca289ffea58ef4db986240249734f140ca43"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMzo0NDozOVrOF3c3rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMzo0NDozOVrOF3c3rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzY4OTAwNQ==", "bodyText": "Is this step actually necessary? The BOM file doesn't have tags, the right parentage to ensure that it's been scanned and even if it did, the script would have to be modified for this specific case to allow a dependencyManagement sections (which is effectively what a BOM file is).", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9144#discussion_r393689005", "createdAt": "2020-03-17T13:44:39Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-bom.yml", "diffHunk": "@@ -0,0 +1,78 @@\n+parameters:\n+  SDKType: bom\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  ValidationSteps: []\n+\n+jobs:\n+  - job: 'Build and Validate'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |\n+          echo \"##vso[build.addbuildtag]Scheduled\"\n+        displayName: 'Tag scheduled builds'\n+        condition: and(succeeded(), eq(variables['Build.SourceBranchName'],'master'),eq(variables['Build.Reason'],'Schedule'))\n+\n+      - task: UsePythonVersion@0\n+        displayName: 'Use Python 3.6'\n+        inputs:\n+          versionSpec: '3.6'\n+\n+      - template: tools/daily-dev-build-variable/daily-dev-build-variable.yml@azure-sdk-tools\n+\n+      - pwsh: |\n+        $(Build.SourcesDirectory)/eng/versioning/pom_file_version_scanner.ps1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfcfca289ffea58ef4db986240249734f140ca43"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MTYyMTg0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9144#pullrequestreview-376162184", "createdAt": "2020-03-17T15:47:08Z", "commit": {"oid": "bfcfca289ffea58ef4db986240249734f140ca43"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNTo0NzowOVrOF3iWUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxNTo0NzowOVrOF3iWUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc3ODc3MQ==", "bodyText": "As we chatted I suspect this will not work as is. I'll defer to @mitchdenny  to help deep dive into this and figure out what needs to happen.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9144#discussion_r393778771", "createdAt": "2020-03-17T15:47:09Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/stages/archetype-sdk-bom.yml", "diffHunk": "@@ -0,0 +1,23 @@\n+parameters:\n+  Artifacts: []\n+  SDKType: bom\n+  ServiceDirectory: not-specified\n+\n+stages:\n+  - stage: Build\n+    jobs:\n+      - template: ../jobs/archetype-sdk-bom.yml\n+        parameters:\n+          ServiceDirectory: ${{parameters.ServiceDirectory}}\n+          SDKType: ${{parameters.SDKType}}\n+          Artifacts: ${{parameters.Artifacts}}\n+\n+  # The Prerelease and Release stages are conditioned on whether we are building a pull request and the branch.\n+  - ${{if and(ne(variables['Build.Reason'], 'PullRequest'), eq(variables['System.TeamProject'], 'internal'))}}:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfcfca289ffea58ef4db986240249734f140ca43"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9706aba6ef9a10b64796e01839a4ee07939ed621", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9706aba6ef9a10b64796e01839a4ee07939ed621", "committedDate": "2020-03-17T19:04:22Z", "message": "Add ant task to azure-sdk-bom and removed version verification in BOM pipeline template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8106ef3a5cadcc1fefd42879122187100059eaa8", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8106ef3a5cadcc1fefd42879122187100059eaa8", "committedDate": "2020-03-17T19:10:46Z", "message": "Removed unnecessary comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NDA5Nzgw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9144#pullrequestreview-376409780", "createdAt": "2020-03-17T21:13:25Z", "commit": {"oid": "8106ef3a5cadcc1fefd42879122187100059eaa8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 687, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}