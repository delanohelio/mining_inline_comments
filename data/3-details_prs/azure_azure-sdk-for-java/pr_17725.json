{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0NzIwMTg3", "number": 17725, "title": "fix: unit test coverage for KeyVault Secrets", "bodyText": "Partially fixes: #6478", "createdAt": "2020-11-20T13:53:03Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17725", "merged": true, "mergeCommit": {"oid": "83d9e3663d54d8eeca00b2bb9dc80c8fdbdbf6ba"}, "closed": true, "closedAt": "2020-11-24T19:59:20Z", "author": {"login": "ksatwara"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeXmJngH2gAyNTI0NzIwMTg3OjdiODVmOTFlYjM4MTk0ODExMDBiYWZhYjMwY2Q2MmIyNTA4YzY2OGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdftoh0gFqTUzNzc3MTU4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7b85f91eb3819481100bafab30cd62b2508c668a", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7b85f91eb3819481100bafab30cd62b2508c668a", "committedDate": "2020-11-20T13:44:27Z", "message": "fix: unit test coverage for KeyVault Secrets"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MDU0OTI5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17725#pullrequestreview-537054929", "createdAt": "2020-11-24T03:40:49Z", "commit": {"oid": "7b85f91eb3819481100bafab30cd62b2508c668a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMzo0MDo1MFrOH4qsYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMzo0MTo1NlrOH4qtig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTE4MTc5NA==", "bodyText": "The difference between this method and the one above is that this one accepts a polling duration, while both use a PollerFlux under the hood.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void recoverDeletedSecretNotFoundWithPoller(HttpClient httpClient, SecretServiceVersion serviceVersion) {\n          \n          \n            \n                public void recoverDeletedSecretNotFoundWithPollingDuration(HttpClient httpClient, SecretServiceVersion serviceVersion) {", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17725#discussion_r529181794", "createdAt": "2020-11-24T03:40:50Z", "author": {"login": "vcolin7"}, "path": "sdk/keyvault/azure-security-keyvault-secrets/src/test/java/com/azure/security/keyvault/secrets/SecretAsyncClientTest.java", "diffHunk": "@@ -310,6 +310,17 @@ public void recoverDeletedSecretNotFound(HttpClient httpClient, SecretServiceVer\n             .verifyErrorSatisfies(ex -> assertRestException(ex, ResourceNotFoundException.class, HttpURLConnection.HTTP_NOT_FOUND));\n     }\n \n+    /**\n+     * Tests that an attempt to recover a non existing deleted secret throws an error on a soft-delete enabled vault.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"getTestParameters\")\n+    public void recoverDeletedSecretNotFoundWithPoller(HttpClient httpClient, SecretServiceVersion serviceVersion) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b85f91eb3819481100bafab30cd62b2508c668a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTE4MjAxOA==", "bodyText": "Same comment as above.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void recoverDeletedSecretNotFoundWithPoller(HttpClient httpClient, SecretServiceVersion serviceVersion) {\n          \n          \n            \n                public void recoverDeletedSecretNotFoundWithPollingDuration(HttpClient httpClient, SecretServiceVersion serviceVersion) {", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17725#discussion_r529182018", "createdAt": "2020-11-24T03:41:43Z", "author": {"login": "vcolin7"}, "path": "sdk/keyvault/azure-security-keyvault-secrets/src/test/java/com/azure/security/keyvault/secrets/SecretClientTest.java", "diffHunk": "@@ -262,6 +262,16 @@ public void recoverDeletedSecretNotFound(HttpClient httpClient, SecretServiceVer\n         assertRestException(() -> client.beginRecoverDeletedSecret(\"non-existing\"), ResourceNotFoundException.class, HttpResponseStatus.NOT_FOUND.code());\n     }\n \n+    /**\n+     * Tests that an attempt to recover a non existing deleted secret throws an error on a soft-delete enabled vault.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"getTestParameters\")\n+    public void recoverDeletedSecretNotFoundWithPoller(HttpClient httpClient, SecretServiceVersion serviceVersion) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b85f91eb3819481100bafab30cd62b2508c668a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTE4MjA5MA==", "bodyText": "Same comment as above.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public abstract void recoverDeletedSecretNotFoundWithPoller(HttpClient httpClient, SecretServiceVersion serviceVersion);\n          \n          \n            \n                public abstract void recoverDeletedSecretNotFoundWithPollingDuration(HttpClient httpClient, SecretServiceVersion serviceVersion);", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17725#discussion_r529182090", "createdAt": "2020-11-24T03:41:56Z", "author": {"login": "vcolin7"}, "path": "sdk/keyvault/azure-security-keyvault-secrets/src/test/java/com/azure/security/keyvault/secrets/SecretClientTestBase.java", "diffHunk": "@@ -248,6 +248,9 @@ void recoverDeletedSecretRunner(Consumer<KeyVaultSecret> testRunner) {\n     @Test\n     public abstract void recoverDeletedSecretNotFound(HttpClient httpClient, SecretServiceVersion serviceVersion);\n \n+    @Test\n+    public abstract void recoverDeletedSecretNotFoundWithPoller(HttpClient httpClient, SecretServiceVersion serviceVersion);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b85f91eb3819481100bafab30cd62b2508c668a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19304604d82d277a809077b611d9be6ee5c9cd13", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/19304604d82d277a809077b611d9be6ee5c9cd13", "committedDate": "2020-11-24T17:45:00Z", "message": "fixes: naming convention as suggested"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3NzcxNTgx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17725#pullrequestreview-537771581", "createdAt": "2020-11-24T17:58:53Z", "commit": {"oid": "19304604d82d277a809077b611d9be6ee5c9cd13"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1628, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}