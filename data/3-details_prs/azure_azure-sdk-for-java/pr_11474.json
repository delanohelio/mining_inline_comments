{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzOTk4NDg1", "number": 11474, "title": "Replacing OffsetDateTime and ZonedDateTime with Instant", "bodyText": "Moving all the timestamp to Instant (both implementation and public surface)\ncloses #11439", "createdAt": "2020-05-27T17:19:12Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474", "merged": true, "mergeCommit": {"oid": "9beb16c9038e56bf5decec84c1fe357b2f7ede5d"}, "closed": true, "closedAt": "2020-05-29T17:46:01Z", "author": {"login": "simplynaveen20"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclcijnAH2gAyNDIzOTk4NDg1OmY1NmYxN2FhZmI3YTAzZTVkMWNjN2Y0YjNkNzM1YzEzNGYyNmFkNDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmFTzzAH2gAyNDIzOTk4NDg1OmFmYmE5YTM4OGQyMDNhODZjMjZlYTRiYTk3ZDVkOGQ5ZWI0MjhiZTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f56f17aafb7a03e5d1cc7f4b3d735c134f26ad49", "author": {"user": {"login": "simplynaveen20", "name": "Naveen Singh"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f56f17aafb7a03e5d1cc7f4b3d735c134f26ad49", "committedDate": "2020-05-27T17:16:22Z", "message": "replacing OffsetDateTime and ZonedDateTime with Instant"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NDQ4ODY2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#pullrequestreview-419448866", "createdAt": "2020-05-27T17:23:46Z", "commit": {"oid": "f56f17aafb7a03e5d1cc7f4b3d735c134f26ad49"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNzoyMzo0NlrOGbVWJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNzozNToyOFrOGbVx6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMxNDQ2OQ==", "bodyText": "does ZonedDateTimeSerializer now how to serialize Instant?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#discussion_r431314469", "createdAt": "2020-05-27T17:23:46Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/ClientSideRequestStatistics.java", "diffHunk": "@@ -329,9 +327,9 @@ public void serialize(\n \n     private static class AddressResolutionStatistics {\n         @JsonSerialize(using = ZonedDateTimeSerializer.class)\n-        ZonedDateTime startTime;\n+        Instant startTime;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f56f17aafb7a03e5d1cc7f4b3d735c134f26ad49"}, "originalPosition": 104}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMxODg1OA==", "bodyText": "why aren't we using existing library serializers?\nhttps://fasterxml.github.io/jackson-datatype-jsr310/javadoc/2.4/com/fasterxml/jackson/datatype/jsr310/ser/InstantSerializer.html", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#discussion_r431318858", "createdAt": "2020-05-27T17:30:50Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/ZonedDateTimeSerializer.java", "diffHunk": "@@ -7,31 +7,32 @@\n import com.fasterxml.jackson.databind.ser.std.StdSerializer;\n \n import java.io.IOException;\n-import java.time.ZonedDateTime;\n+import java.time.Instant;\n+import java.time.ZoneOffset;\n import java.time.format.DateTimeFormatter;\n import java.util.Locale;\n \n-public class ZonedDateTimeSerializer extends StdSerializer<ZonedDateTime> {\n+public class ZonedDateTimeSerializer extends StdSerializer<Instant> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f56f17aafb7a03e5d1cc7f4b3d735c134f26ad49"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMyMTU3Ng==", "bodyText": "why are we doing translation from ZoneDateTime to Instant? can't we rely on Instant everywhere?\n@simplynaveen20 @milismsft", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#discussion_r431321576", "createdAt": "2020-05-27T17:35:28Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/changefeed/ServiceItemLease.java", "diffHunk": "@@ -203,7 +200,7 @@ public static ServiceItemLease fromDocument(CosmosItemProperties document) {\n \n         String leaseTimestamp = ModelBridgeInternal.getStringFromJsonSerializable(document,PROPERTY_NAME_TIMESTAMP);\n         if (leaseTimestamp != null) {\n-            return lease.withTimestamp(ZonedDateTime.parse(leaseTimestamp));\n+            return lease.withTimestamp(ZonedDateTime.parse(leaseTimestamp).toInstant());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f56f17aafb7a03e5d1cc7f4b3d735c134f26ad49"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NDU3MDAw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#pullrequestreview-419457000", "createdAt": "2020-05-27T17:34:31Z", "commit": {"oid": "f56f17aafb7a03e5d1cc7f4b3d735c134f26ad49"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNzozNDozMVrOGbVvzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNzozNTozMlrOGbVyDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMyMTAzNg==", "bodyText": "Instead of converting instant to OffsetDateTime, its better to add this helper method in Utils.java which directly takes Instant and formats it.\npublic static String instantAsUTCRFC1123(Instant instant){\n       return Utils.RFC_1123_DATE_TIME.format(instant);\n}", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#discussion_r431321036", "createdAt": "2020-05-27T17:34:31Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/ChangeFeedQueryImpl.java", "diffHunk": "@@ -95,7 +96,7 @@ private RxDocumentServiceRequest createDocumentServiceRequest(String continuatio\n         }\n \n         if(options.getStartDateTime() != null){\n-            String dateTimeInHttpFormat = Utils.zonedDateTimeAsUTCRFC1123(options.getStartDateTime());\n+            String dateTimeInHttpFormat = Utils.zonedDateTimeAsUTCRFC1123(options.getStartDateTime().atOffset(ZoneOffset.UTC));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f56f17aafb7a03e5d1cc7f4b3d735c134f26ad49"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMyMTYxMg==", "bodyText": "We should rename this class to InstantSerializer", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#discussion_r431321612", "createdAt": "2020-05-27T17:35:32Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/ZonedDateTimeSerializer.java", "diffHunk": "@@ -7,31 +7,32 @@\n import com.fasterxml.jackson.databind.ser.std.StdSerializer;\n \n import java.io.IOException;\n-import java.time.ZonedDateTime;\n+import java.time.Instant;\n+import java.time.ZoneOffset;\n import java.time.format.DateTimeFormatter;\n import java.util.Locale;\n \n-public class ZonedDateTimeSerializer extends StdSerializer<ZonedDateTime> {\n+public class ZonedDateTimeSerializer extends StdSerializer<Instant> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f56f17aafb7a03e5d1cc7f4b3d735c134f26ad49"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNTM1MjA4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#pullrequestreview-420535208", "createdAt": "2020-05-28T22:25:59Z", "commit": {"oid": "f56f17aafb7a03e5d1cc7f4b3d735c134f26ad49"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d49de2c97ddc3fc45824ff2da702bb0daeca37c3", "author": {"user": {"login": "simplynaveen20", "name": "Naveen Singh"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d49de2c97ddc3fc45824ff2da702bb0daeca37c3", "committedDate": "2020-05-29T14:31:22Z", "message": "merging with master and resolving comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDY5NTA4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#pullrequestreview-421069508", "createdAt": "2020-05-29T15:41:21Z", "commit": {"oid": "d49de2c97ddc3fc45824ff2da702bb0daeca37c3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDg3NDQ4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#pullrequestreview-421087448", "createdAt": "2020-05-29T16:02:19Z", "commit": {"oid": "d49de2c97ddc3fc45824ff2da702bb0daeca37c3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ecc1f53df21c40a811275d8fa911a52af106ba3", "author": {"user": {"login": "simplynaveen20", "name": "Naveen Singh"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5ecc1f53df21c40a811275d8fa911a52af106ba3", "committedDate": "2020-05-29T16:08:48Z", "message": "removing extra files checked in  due to merge"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMTEyODk5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#pullrequestreview-421112899", "createdAt": "2020-05-29T16:38:02Z", "commit": {"oid": "5ecc1f53df21c40a811275d8fa911a52af106ba3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjozODowMlrOGckEAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjozODowMlrOGckEAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjYwNDE2Mw==", "bodyText": "Seems like we have few unused imports here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#discussion_r432604163", "createdAt": "2020-05-29T16:38:02Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/rx/ChangeFeedProcessorTest.java", "diffHunk": "@@ -38,7 +38,12 @@\n import reactor.core.scheduler.Schedulers;\n \n import java.time.Duration;\n-import java.time.OffsetDateTime;\n+import java.time.Instant;\n+import java.time.ZoneOffset;\n+import java.time.ZonedDateTime;\n+import java.time.temporal.ChronoUnit;\n+import java.time.temporal.Temporal;\n+import java.time.temporal.TemporalUnit;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ecc1f53df21c40a811275d8fa911a52af106ba3"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMTE3ODU2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11474#pullrequestreview-421117856", "createdAt": "2020-05-29T16:45:24Z", "commit": {"oid": "5ecc1f53df21c40a811275d8fa911a52af106ba3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afba9a388d203a86c26ea4ba97d5d8d9eb428be7", "author": {"user": {"login": "simplynaveen20", "name": "Naveen Singh"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/afba9a388d203a86c26ea4ba97d5d8d9eb428be7", "committedDate": "2020-05-29T16:46:22Z", "message": "removing extra imports"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3957, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}