{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NzUzMjM5", "number": 11265, "title": "Users/xinlian/included path and exclude path update", "bodyText": "This PR solve #11192\nIncludedPath ->\nRemove constructor which takes jsonString\nAdd constructor which takes String path - and call logic of setPath(path) in the constructor\nChange public Collection getIndexes() { -> public List getIndexes()\nExcludedPath ->\nAdd constructor which takes String path - and call logic of setPath(path) in the constructor", "createdAt": "2020-05-18T21:32:48Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265", "merged": true, "mergeCommit": {"oid": "6cc6b56025e281dd30dfd9c5787479960d075b4a"}, "closed": true, "closedAt": "2020-05-19T15:45:58Z", "author": {"login": "xinlian12"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcimuiiAH2gAyNDE5NzUzMjM5OmE3MjQzNDg2NDcyMjVhYjNhNTc2M2YyYTMzZWEwMjQyNzBlMWI5YWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcirhk7AH2gAyNDE5NzUzMjM5OjIxYjZkYjYzNzM5ZTRkMTdlZWQ3Y2NjZmM0MDIxYzUzY2U0NjNlY2I=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a724348647225ab3a5763f2a33ea024270e1b9ad", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a724348647225ab3a5763f2a33ea024270e1b9ad", "committedDate": "2020-05-18T21:26:44Z", "message": "IncludedPath/ExcludedPath update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b1a924b9cf0a964855419719d3952ff1602ef66", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1b1a924b9cf0a964855419719d3952ff1602ef66", "committedDate": "2020-05-18T21:31:57Z", "message": "revert some change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTU2Mjcz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#pullrequestreview-413956273", "createdAt": "2020-05-18T21:37:16Z", "commit": {"oid": "1b1a924b9cf0a964855419719d3952ff1602ef66"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTozNzoxNlrOGXIUYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTozNzo1N1rOGXIVng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwNjcyMw==", "bodyText": "can this be updated to use the public apis for setting precision.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#discussion_r426906723", "createdAt": "2020-05-18T21:37:16Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos-benchmark/src/test/java/com/azure/cosmos/benchmark/ReadMyWritesConsistencyTest.java", "diffHunk": "@@ -168,7 +168,7 @@ DocumentCollection getCollectionDefinitionWithRangeRangeIndex() {\n         List<IncludedPath> includedPaths = new ArrayList<>();\n         IncludedPath includedPath = new IncludedPath();\n         includedPath.setPath(\"/*\");\n-        Collection<Index> indexes = new ArrayList<>();\n+        List<Index> indexes = new ArrayList<>();\n         Index stringIndex = Index.range(DataType.STRING);\n         BridgeInternal.setProperty(ModelBridgeInternal.getJsonSerializable(stringIndex), \"precision\", -1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b1a924b9cf0a964855419719d3952ff1602ef66"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkwNzAzOA==", "bodyText": "now that custructor for parsing json is removed, could you please add a test which sets different fields using setter api invocation? (basically equivalent of this test using setters)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#discussion_r426907038", "createdAt": "2020-05-18T21:37:57Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/models/IncludedPathTest.java", "diffHunk": "@@ -1,40 +0,0 @@\n-// Copyright (c) Microsoft Corporation. All rights reserved.\n-// Licensed under the MIT License.\n-package com.azure.cosmos.models;\n-\n-import org.assertj.core.api.Assertions;\n-import org.testng.annotations.Test;\n-\n-import java.util.ArrayList;\n-import java.util.List;\n-\n-import static org.assertj.core.api.Assertions.assertThat;\n-\n-public class IncludedPathTest {\n-\n-    @Test(groups = {\"unit\"})\n-    public void deserialize() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b1a924b9cf0a964855419719d3952ff1602ef66"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTY0NzQ5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#pullrequestreview-413964749", "createdAt": "2020-05-18T21:53:48Z", "commit": {"oid": "1b1a924b9cf0a964855419719d3952ff1602ef66"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTo1Mzo0OFrOGXIvSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMTo1Mzo0OFrOGXIvSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjkxMzYxMA==", "bodyText": "Now we have this constructor , what is the benefit of having default constructor and setPath() method explicitly .", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#discussion_r426913610", "createdAt": "2020-05-18T21:53:48Z", "author": {"login": "simplynaveen20"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/models/ExcludedPath.java", "diffHunk": "@@ -23,10 +23,11 @@ public ExcludedPath() {\n     /**\n      * Constructor.\n      *\n-     * @param jsonString the json string that represents the excluded path.\n+     * @param path the excluded path.\n      */\n-    ExcludedPath(String jsonString) {\n-        this.jsonSerializable = new JsonSerializable(jsonString);\n+    public ExcludedPath(String path) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b1a924b9cf0a964855419719d3952ff1602ef66"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "354e42d868632b6c91c90366b50cf58bcdfebd64", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/354e42d868632b6c91c90366b50cf58bcdfebd64", "committedDate": "2020-05-18T22:12:51Z", "message": "resolve comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2881ae778758d02057ad42bfe784dbdf9738b9a2", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2881ae778758d02057ad42bfe784dbdf9738b9a2", "committedDate": "2020-05-18T22:26:16Z", "message": "fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTk3MDcy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#pullrequestreview-413997072", "createdAt": "2020-05-18T23:11:15Z", "commit": {"oid": "2881ae778758d02057ad42bfe784dbdf9738b9a2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMzoxMToxNVrOGXKZ_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMzoxMToxNVrOGXKZ_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk0MDkyNg==", "bodyText": "please add back static import so we don't repeat Assertions.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#discussion_r426940926", "createdAt": "2020-05-18T23:11:15Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/models/IncludedPathTest.java", "diffHunk": "@@ -8,33 +8,25 @@\n import java.util.ArrayList;\n import java.util.List;\n \n-import static org.assertj.core.api.Assertions.assertThat;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2881ae778758d02057ad42bfe784dbdf9738b9a2"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTk3MDkw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#pullrequestreview-413997090", "createdAt": "2020-05-18T23:11:18Z", "commit": {"oid": "2881ae778758d02057ad42bfe784dbdf9738b9a2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMzoxMToxOFrOGXKaBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMzoxMToxOFrOGXKaBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk0MDkzNQ==", "bodyText": "please have static import so we don't repeat Assertions.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#discussion_r426940935", "createdAt": "2020-05-18T23:11:18Z", "author": {"login": "moderakh"}, "path": "sdk/cosmos/azure-cosmos/src/test/java/com/azure/cosmos/models/IncludedPathTest.java", "diffHunk": "@@ -8,33 +8,25 @@\n import java.util.ArrayList;\n import java.util.List;\n \n-import static org.assertj.core.api.Assertions.assertThat;\n-\n public class IncludedPathTest {\n \n     @Test(groups = {\"unit\"})\n-    public void deserialize() {\n-        String json = \"{\" +\n-                \"  'path': '\\\\/*',\" +\n-                \"  'indexes': [\" +\n-                \"    {\" +\n-                \"      'kind': 'Range',\" +\n-                \"      'dataType': 'String',\" +\n-                \"      'precision': -1\" +\n-                \"    },\" +\n-                \"    {\" +\n-                \"      'kind': 'Range',\" +\n-                \"      'dataType': 'Number',\" +\n-                \"      'precision': -1\" +\n-                \"    }\" +\n-                \"  ]\" +\n-                \"}\";\n-        IncludedPath path = new IncludedPath(json);\n-        List<Index> indexes = new ArrayList<>(path.getIndexes());\n-        Assertions.assertThat(indexes).hasSize(2);\n-        Assertions.assertThat(((RangeIndex) indexes.get(0)).getDataType()).isEqualTo(DataType.STRING);\n-        Assertions.assertThat(((RangeIndex) indexes.get(0)).getPrecision()).isEqualTo(-1);\n-        Assertions.assertThat(((RangeIndex) indexes.get(1)).getDataType()).isEqualTo(DataType.NUMBER);\n-        Assertions.assertThat(((RangeIndex) indexes.get(1)).getPrecision()).isEqualTo(-1);\n+    public void setAndGetIncludedPath() {\n+        String path = \"/*\";\n+        IncludedPath includedPath = new IncludedPath(path);\n+\n+        List<Index> indexes = new ArrayList<>();\n+        indexes.add(Index.range(DataType.STRING, -1));\n+        indexes.add(Index.range(DataType.NUMBER, -1));\n+        includedPath.setIndexes(indexes);\n+\n+        List<Index> includedPathIndexes = new ArrayList<>(includedPath.getIndexes());\n+        Assertions.assertThat(includedPathIndexes).hasSize(2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2881ae778758d02057ad42bfe784dbdf9738b9a2"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTk3OTI0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#pullrequestreview-413997924", "createdAt": "2020-05-18T23:13:37Z", "commit": {"oid": "2881ae778758d02057ad42bfe784dbdf9738b9a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MDEyNzMw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#pullrequestreview-414012730", "createdAt": "2020-05-18T23:56:58Z", "commit": {"oid": "2881ae778758d02057ad42bfe784dbdf9738b9a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MDEzMzY2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11265#pullrequestreview-414013366", "createdAt": "2020-05-18T23:59:01Z", "commit": {"oid": "2881ae778758d02057ad42bfe784dbdf9738b9a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21b6db63739e4d17eed7cccfc4021c53ce463ecb", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/21b6db63739e4d17eed7cccfc4021c53ce463ecb", "committedDate": "2020-05-19T03:02:06Z", "message": "resolve comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4112, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}