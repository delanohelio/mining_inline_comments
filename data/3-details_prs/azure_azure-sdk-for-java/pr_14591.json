{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1MzI3NTE3", "number": 14591, "title": "[Cog Serv Anomaly Detector] add sample codes", "bodyText": "", "createdAt": "2020-08-28T10:36:19Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14591", "merged": true, "mergeCommit": {"oid": "3f42cdb2d08c7c46f7a821e796a980b58e87d8f8"}, "closed": true, "closedAt": "2020-09-08T23:39:14Z", "author": {"login": "moreOver0"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDR-nLgH2gAyNDc1MzI3NTE3OmYxNmIzODdjOTAyMWU4NDE4OTA4MjQxMzIwNmQyYzI3OWU0MDRlMzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHAPe6gFqTQ4NDU2MDk3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f16b387c9021e84189082413206d2c279e404e36", "author": {"user": {"login": "moreOver0", "name": "Xia ZHU"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f16b387c9021e84189082413206d2c279e404e36", "committedDate": "2020-08-28T09:55:47Z", "message": "add samples and sample data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3735210505a134c9adc791977326a5fa76809e52", "author": {"user": {"login": "moreOver0", "name": "Xia ZHU"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3735210505a134c9adc791977326a5fa76809e52", "committedDate": "2020-08-28T10:33:19Z", "message": "add REAME.md for samples"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5MDU5NDEw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14591#pullrequestreview-479059410", "createdAt": "2020-08-31T23:39:13Z", "commit": {"oid": "3735210505a134c9adc791977326a5fa76809e52"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMzozOToxM1rOHKN2Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMzo0OTowMlrOHKOBjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQ3NDY1MQ==", "bodyText": "Please add javadoc to describe what this sample does.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14591#discussion_r480474651", "createdAt": "2020-08-31T23:39:13Z", "author": {"login": "srnagar"}, "path": "sdk/anomalydetector/azure-ai-anomalydetector/src/samples/java/com/azure/ai/anomalydetector/DetectAnomaliesEntireSeries.java", "diffHunk": "@@ -0,0 +1,75 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.anomalydetector;\n+\n+import com.azure.ai.anomalydetector.models.DetectRequest;\n+import com.azure.ai.anomalydetector.models.EntireDetectResponse;\n+import com.azure.ai.anomalydetector.models.TimeGranularity;\n+import com.azure.ai.anomalydetector.models.TimeSeriesPoint;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.*;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.time.OffsetDateTime;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+public class DetectAnomaliesEntireSeries {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3735210505a134c9adc791977326a5fa76809e52"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQ3NTE1Ng==", "bodyText": "use more descriptive variable names instead of e and p.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14591#discussion_r480475156", "createdAt": "2020-08-31T23:40:51Z", "author": {"login": "srnagar"}, "path": "sdk/anomalydetector/azure-ai-anomalydetector/src/samples/java/com/azure/ai/anomalydetector/DetectAnomaliesEntireSeries.java", "diffHunk": "@@ -0,0 +1,75 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.anomalydetector;\n+\n+import com.azure.ai.anomalydetector.models.DetectRequest;\n+import com.azure.ai.anomalydetector.models.EntireDetectResponse;\n+import com.azure.ai.anomalydetector.models.TimeGranularity;\n+import com.azure.ai.anomalydetector.models.TimeSeriesPoint;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.*;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.time.OffsetDateTime;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+public class DetectAnomaliesEntireSeries {\n+\n+    public static void main(final String[] args) throws IOException {\n+        String endpoint = \"<anomaly-detector-resource-endpoint>\";\n+        String key = \"<anomaly-detector-resource-key>\";\n+        HttpHeaders headers = new HttpHeaders()\n+            .put(\"Accept\", ContentType.APPLICATION_JSON);\n+\n+        HttpPipelinePolicy authPolicy = new AzureKeyCredentialPolicy(\"Ocp-Apim-Subscription-Key\",\n+            new AzureKeyCredential(key));\n+        AddHeadersPolicy addHeadersPolicy = new AddHeadersPolicy(headers);\n+\n+        HttpPipeline httpPipeline = new HttpPipelineBuilder().httpClient(HttpClient.createDefault())\n+            .policies(authPolicy, addHeadersPolicy).build();\n+        AnomalyDetectorClient anomalyDetectorClient = new AnomalyDetectorClientBuilder()\n+            .pipeline(httpPipeline)\n+            .endpoint(endpoint)\n+            .buildClient();\n+\n+        Path path = Paths.get(\"./src/samples/java/sample_data/request-data.csv\");\n+        List<String> requestData = Files.readAllLines(path);\n+        List<TimeSeriesPoint> series = requestData.stream()\n+            .map(e -> e.trim())\n+            .filter(e -> e.length() > 0)\n+            .map(e -> e.split(\",\", 2))\n+            .filter(e -> e.length == 2)\n+            .map(e -> {\n+                TimeSeriesPoint p = new TimeSeriesPoint();\n+                p.setTimestamp(OffsetDateTime.parse(e[0]));\n+                p.setValue(Float.parseFloat(e[1]));\n+                return p;\n+            })", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3735210505a134c9adc791977326a5fa76809e52"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQ3NTM5NQ==", "bodyText": "Add javadocs for all samples.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14591#discussion_r480475395", "createdAt": "2020-08-31T23:41:41Z", "author": {"login": "srnagar"}, "path": "sdk/anomalydetector/azure-ai-anomalydetector/src/samples/java/com/azure/ai/anomalydetector/DetectAnomaliesLastPoint.java", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.anomalydetector;\n+\n+import com.azure.ai.anomalydetector.models.DetectRequest;\n+import com.azure.ai.anomalydetector.models.LastDetectResponse;\n+import com.azure.ai.anomalydetector.models.TimeGranularity;\n+import com.azure.ai.anomalydetector.models.TimeSeriesPoint;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.*;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.time.OffsetDateTime;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+public class DetectAnomaliesLastPoint {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3735210505a134c9adc791977326a5fa76809e52"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQ3NjQ4OA==", "bodyText": "Enumerate all imports instead of using *.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14591#discussion_r480476488", "createdAt": "2020-08-31T23:45:24Z", "author": {"login": "srnagar"}, "path": "sdk/anomalydetector/azure-ai-anomalydetector/src/samples/java/com/azure/ai/anomalydetector/DetectChangePoints.java", "diffHunk": "@@ -0,0 +1,75 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.anomalydetector;\n+\n+import com.azure.ai.anomalydetector.models.ChangePointDetectRequest;\n+import com.azure.ai.anomalydetector.models.ChangePointDetectResponse;\n+import com.azure.ai.anomalydetector.models.TimeGranularity;\n+import com.azure.ai.anomalydetector.models.TimeSeriesPoint;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3735210505a134c9adc791977326a5fa76809e52"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDQ3NzU4Mg==", "bodyText": "It would be good to add comments to describe what is happening in the samples to help the users follow the sample better.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14591#discussion_r480477582", "createdAt": "2020-08-31T23:49:02Z", "author": {"login": "srnagar"}, "path": "sdk/anomalydetector/azure-ai-anomalydetector/src/samples/java/com/azure/ai/anomalydetector/DetectChangePoints.java", "diffHunk": "@@ -0,0 +1,75 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.anomalydetector;\n+\n+import com.azure.ai.anomalydetector.models.ChangePointDetectRequest;\n+import com.azure.ai.anomalydetector.models.ChangePointDetectResponse;\n+import com.azure.ai.anomalydetector.models.TimeGranularity;\n+import com.azure.ai.anomalydetector.models.TimeSeriesPoint;\n+import com.azure.core.credential.AzureKeyCredential;\n+import com.azure.core.http.*;\n+import com.azure.core.http.policy.AddHeadersPolicy;\n+import com.azure.core.http.policy.AzureKeyCredentialPolicy;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.time.OffsetDateTime;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n+public class DetectChangePoints {\n+\n+    public static void main(final String[] args) throws IOException {\n+        String endpoint = \"<anomaly-detector-resource-endpoint>\";\n+        String key = \"<anomaly-detector-resource-key>\";\n+        HttpHeaders headers = new HttpHeaders()\n+            .put(\"Accept\", ContentType.APPLICATION_JSON);\n+\n+        HttpPipelinePolicy authPolicy = new AzureKeyCredentialPolicy(\"Ocp-Apim-Subscription-Key\",\n+            new AzureKeyCredential(key));\n+        AddHeadersPolicy addHeadersPolicy = new AddHeadersPolicy(headers);\n+\n+        HttpPipeline httpPipeline = new HttpPipelineBuilder().httpClient(HttpClient.createDefault())\n+            .policies(authPolicy, addHeadersPolicy).build();\n+        AnomalyDetectorClient anomalyDetectorClient = new AnomalyDetectorClientBuilder()\n+            .pipeline(httpPipeline)\n+            .endpoint(endpoint)\n+            .buildClient();\n+\n+        Path path = Paths.get(\"./src/samples/java/sample_data/request-data.csv\");\n+        List<String> requestData = Files.readAllLines(path);\n+        List<TimeSeriesPoint> series = requestData.stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3735210505a134c9adc791977326a5fa76809e52"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cd0dab37b01e735f326dba6b1ae07ab6fb14022", "author": {"user": {"login": "moreOver0", "name": "Xia ZHU"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2cd0dab37b01e735f326dba6b1ae07ab6fb14022", "committedDate": "2020-09-01T04:17:40Z", "message": "add javafdoc; rename variates;"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c57811459f2f0c39cce126c2f6734b0f5ac5fd9e", "author": {"user": {"login": "moreOver0", "name": "Xia ZHU"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c57811459f2f0c39cce126c2f6734b0f5ac5fd9e", "committedDate": "2020-09-01T04:59:36Z", "message": "add more comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5OTk0MDkz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14591#pullrequestreview-479994093", "createdAt": "2020-09-01T18:06:41Z", "commit": {"oid": "c57811459f2f0c39cce126c2f6734b0f5ac5fd9e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NTYwOTc3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14591#pullrequestreview-484560977", "createdAt": "2020-09-08T23:31:37Z", "commit": {"oid": "c57811459f2f0c39cce126c2f6734b0f5ac5fd9e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 174, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}