{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzNzMwMjM0", "number": 17679, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMDoxNDowOVrOE7TFhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMDoyMDozNlrOE7TScQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNjE0MTUxOnYy", "diffSide": "RIGHT", "path": "eng/mgmt/automation/generation.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMDoxNDowOVrOH23Kxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMTo1Mzo1OFrOH26g5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4OTAzMA==", "bodyText": "This looks a little off. Why would you need maven in the key twice?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527289030", "createdAt": "2020-11-20T00:14:09Z", "author": {"login": "weshaggard"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM0Mzg0NQ==", "bodyText": "This is just copied from azure devops docs https://docs.microsoft.com/en-us/azure/devops/pipelines/release/caching?view=azure-devops#maven", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527343845", "createdAt": "2020-11-20T01:53:58Z", "author": {"login": "ChenTanyi"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4OTAzMA=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNjE0MzQzOnYy", "diffSide": "RIGHT", "path": "eng/mgmt/automation/generation.yml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMDoxNDoyOVrOH23L8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwNzo1OToyOVrOH3EI3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4OTMzMQ==", "bodyText": "Is the maven cache that interesting for this pipeline?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527289331", "createdAt": "2020-11-20T00:14:29Z", "author": {"login": "weshaggard"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM0NDEzNQ==", "bodyText": "Maybe I think I could remove the cache, due to generation will usually result to different service with different pom.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527344135", "createdAt": "2020-11-20T01:54:47Z", "author": {"login": "ChenTanyi"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4OTMzMQ=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzUwMTUzMw==", "bodyText": "After testing, I think it still necessary for cache maven dependency for mvn verify package.\nActually all services need same cache, so I change this to using key \"maven | ${ OS }\" to do cache.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527501533", "createdAt": "2020-11-20T07:59:29Z", "author": {"login": "ChenTanyi"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI4OTMzMQ=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNjE0ODU3OnYy", "diffSide": "RIGHT", "path": "eng/mgmt/automation/generation.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMDoxNToyOFrOH23PbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwODowMDoxN1rOH3EKdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5MDIyMA==", "bodyText": "I recommend not setting these globally and only doing it as part of the commit command. See https://github.com/Azure/azure-sdk-tools/blob/master/eng/common/scripts/git-branch-push.ps1#L79 as an example.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527290220", "createdAt": "2020-11-20T00:15:28Z", "author": {"login": "weshaggard"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven\n+    path: $(MAVEN_CACHE_FOLDER)\n+  displayName: Cache Maven local repo\n+\n+- bash: |\n+    git config --global user.name \"Azure-Fluent\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzUwMTk0Mw==", "bodyText": "done", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527501943", "createdAt": "2020-11-20T08:00:17Z", "author": {"login": "ChenTanyi"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven\n+    path: $(MAVEN_CACHE_FOLDER)\n+  displayName: Cache Maven local repo\n+\n+- bash: |\n+    git config --global user.name \"Azure-Fluent\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5MDIyMA=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNjE1MTE1OnYy", "diffSide": "RIGHT", "path": "eng/mgmt/automation/generation.yml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMDoxNjowMlrOH23ROg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMTo1NTo0OFrOH26jWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5MDY4Mg==", "bodyText": "When do you expect someone to call this pipeline over just using the sdk automation?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527290682", "createdAt": "2020-11-20T00:16:02Z", "author": {"login": "weshaggard"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM0NDQ3NA==", "bodyText": "This yml is mainly used for manually generation, which will be manually run in devops.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527344474", "createdAt": "2020-11-20T01:55:48Z", "author": {"login": "ChenTanyi"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5MDY4Mg=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNjE1NjQxOnYy", "diffSide": "RIGHT", "path": "eng/mgmt/automation/generation.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMDoxNzowNlrOH23Utw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwODowMDozMVrOH3EK0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5MTU3NQ==", "bodyText": "I don't think this is necessary to set this in env var given you are passing it as part of the URL.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527291575", "createdAt": "2020-11-20T00:17:06Z", "author": {"login": "weshaggard"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven\n+    path: $(MAVEN_CACHE_FOLDER)\n+  displayName: Cache Maven local repo\n+\n+- bash: |\n+    git config --global user.name \"Azure-Fluent\"\n+    git config --global user.email \"azfluent@microsoft.com\"\n+  displayName: Base Config\n+\n+- bash: |\n+    sudo apt-get install -y --upgrade python3-pip python3-setuptools\n+    pip3 install --upgrade wheel\n+    pip3 install --upgrade PyYAML\n+  displayName: Update python\n+\n+- task: NodeTool@0\n+  displayName: 'Install Node.js $(NodeVersion)'\n+  inputs:\n+    versionSpec: '$(NodeVersion)'\n+\n+- bash: |\n+    npm install -g autorest\n+    npm install\n+  displayName: 'Install autorest'\n+\n+- bash: |\n+    export PATH=$JAVA_HOME_11_X64/bin:$PATH\n+    java -version\n+    ./eng/mgmt/automation/generate.py --readme \"$(README)\" --tag \"$(TAG)\" --service \"$(SERVICE)\" --version \"$(VERSION)\" --auto-commit-generated-code\n+  displayName: Generation and Compile\n+\n+- bash: |\n+    export MESSAGE=\"[Automation] Generate Fluent Lite from $(README)#$(TAG)\"\n+    export BRANCH=\"Fluent-lite-generation-$(Build.BuildId)\"\n+    git add -A\n+    git commit -m \"[Automation] Update other files outside generation folder\"\n+    git log -2\n+    git push https://$(GITHUB_TOKEN)@github.com/azure-fluent/azure-sdk-for-java HEAD:refs/heads/$BRANCH -f\n+    python3 eng/mgmt/pull-request.py chentanyi azure-sdk-for-java \"$MESSAGE\" \"azure-fluent:$BRANCH\"\n+  displayName: Create pull request\n+  env:\n+    GITHUB_TOKEN: $(GITHUB_TOKEN)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzUwMjAzMg==", "bodyText": "done", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527502032", "createdAt": "2020-11-20T08:00:31Z", "author": {"login": "ChenTanyi"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven\n+    path: $(MAVEN_CACHE_FOLDER)\n+  displayName: Cache Maven local repo\n+\n+- bash: |\n+    git config --global user.name \"Azure-Fluent\"\n+    git config --global user.email \"azfluent@microsoft.com\"\n+  displayName: Base Config\n+\n+- bash: |\n+    sudo apt-get install -y --upgrade python3-pip python3-setuptools\n+    pip3 install --upgrade wheel\n+    pip3 install --upgrade PyYAML\n+  displayName: Update python\n+\n+- task: NodeTool@0\n+  displayName: 'Install Node.js $(NodeVersion)'\n+  inputs:\n+    versionSpec: '$(NodeVersion)'\n+\n+- bash: |\n+    npm install -g autorest\n+    npm install\n+  displayName: 'Install autorest'\n+\n+- bash: |\n+    export PATH=$JAVA_HOME_11_X64/bin:$PATH\n+    java -version\n+    ./eng/mgmt/automation/generate.py --readme \"$(README)\" --tag \"$(TAG)\" --service \"$(SERVICE)\" --version \"$(VERSION)\" --auto-commit-generated-code\n+  displayName: Generation and Compile\n+\n+- bash: |\n+    export MESSAGE=\"[Automation] Generate Fluent Lite from $(README)#$(TAG)\"\n+    export BRANCH=\"Fluent-lite-generation-$(Build.BuildId)\"\n+    git add -A\n+    git commit -m \"[Automation] Update other files outside generation folder\"\n+    git log -2\n+    git push https://$(GITHUB_TOKEN)@github.com/azure-fluent/azure-sdk-for-java HEAD:refs/heads/$BRANCH -f\n+    python3 eng/mgmt/pull-request.py chentanyi azure-sdk-for-java \"$MESSAGE\" \"azure-fluent:$BRANCH\"\n+  displayName: Create pull request\n+  env:\n+    GITHUB_TOKEN: $(GITHUB_TOKEN)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5MTU3NQ=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNjE3NDU3OnYy", "diffSide": "RIGHT", "path": "eng/mgmt/automation/generation.yml", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQwMDoyMDozNlrOH23gyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxNzoxNTo0NVrOH3YwoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5NDY2Ng==", "bodyText": "orthogonal but it would be good for use to use the shared code to submit pull requests, see https://github.com/Azure/azure-sdk-for-java/blob/master/eng/common/pipelines/templates/steps/create-pull-request.yml.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527294666", "createdAt": "2020-11-20T00:20:36Z", "author": {"login": "weshaggard"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven\n+    path: $(MAVEN_CACHE_FOLDER)\n+  displayName: Cache Maven local repo\n+\n+- bash: |\n+    git config --global user.name \"Azure-Fluent\"\n+    git config --global user.email \"azfluent@microsoft.com\"\n+  displayName: Base Config\n+\n+- bash: |\n+    sudo apt-get install -y --upgrade python3-pip python3-setuptools\n+    pip3 install --upgrade wheel\n+    pip3 install --upgrade PyYAML\n+  displayName: Update python\n+\n+- task: NodeTool@0\n+  displayName: 'Install Node.js $(NodeVersion)'\n+  inputs:\n+    versionSpec: '$(NodeVersion)'\n+\n+- bash: |\n+    npm install -g autorest\n+    npm install\n+  displayName: 'Install autorest'\n+\n+- bash: |\n+    export PATH=$JAVA_HOME_11_X64/bin:$PATH\n+    java -version\n+    ./eng/mgmt/automation/generate.py --readme \"$(README)\" --tag \"$(TAG)\" --service \"$(SERVICE)\" --version \"$(VERSION)\" --auto-commit-generated-code\n+  displayName: Generation and Compile\n+\n+- bash: |\n+    export MESSAGE=\"[Automation] Generate Fluent Lite from $(README)#$(TAG)\"\n+    export BRANCH=\"Fluent-lite-generation-$(Build.BuildId)\"\n+    git add -A\n+    git commit -m \"[Automation] Update other files outside generation folder\"\n+    git log -2\n+    git push https://$(GITHUB_TOKEN)@github.com/azure-fluent/azure-sdk-for-java HEAD:refs/heads/$BRANCH -f\n+    python3 eng/mgmt/pull-request.py chentanyi azure-sdk-for-java \"$MESSAGE\" \"azure-fluent:$BRANCH\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM1OTg1Ng==", "bodyText": "As the yml show, it need the github-pat of azure-sdk, is the pat will auto-apply to all pipeline in azure-sdk devops? Or I would use Azure-Fluent account instead?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527359856", "createdAt": "2020-11-20T02:49:18Z", "author": {"login": "ChenTanyi"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven\n+    path: $(MAVEN_CACHE_FOLDER)\n+  displayName: Cache Maven local repo\n+\n+- bash: |\n+    git config --global user.name \"Azure-Fluent\"\n+    git config --global user.email \"azfluent@microsoft.com\"\n+  displayName: Base Config\n+\n+- bash: |\n+    sudo apt-get install -y --upgrade python3-pip python3-setuptools\n+    pip3 install --upgrade wheel\n+    pip3 install --upgrade PyYAML\n+  displayName: Update python\n+\n+- task: NodeTool@0\n+  displayName: 'Install Node.js $(NodeVersion)'\n+  inputs:\n+    versionSpec: '$(NodeVersion)'\n+\n+- bash: |\n+    npm install -g autorest\n+    npm install\n+  displayName: 'Install autorest'\n+\n+- bash: |\n+    export PATH=$JAVA_HOME_11_X64/bin:$PATH\n+    java -version\n+    ./eng/mgmt/automation/generate.py --readme \"$(README)\" --tag \"$(TAG)\" --service \"$(SERVICE)\" --version \"$(VERSION)\" --auto-commit-generated-code\n+  displayName: Generation and Compile\n+\n+- bash: |\n+    export MESSAGE=\"[Automation] Generate Fluent Lite from $(README)#$(TAG)\"\n+    export BRANCH=\"Fluent-lite-generation-$(Build.BuildId)\"\n+    git add -A\n+    git commit -m \"[Automation] Update other files outside generation folder\"\n+    git log -2\n+    git push https://$(GITHUB_TOKEN)@github.com/azure-fluent/azure-sdk-for-java HEAD:refs/heads/$BRANCH -f\n+    python3 eng/mgmt/pull-request.py chentanyi azure-sdk-for-java \"$MESSAGE\" \"azure-fluent:$BRANCH\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5NDY2Ng=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM2Mzg3NA==", "bodyText": "Unless there is a reason you need to use the azure-fluent account specifically I'd suggest just using the azure-sdk service account like a lot of our other automation does.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527363874", "createdAt": "2020-11-20T03:03:52Z", "author": {"login": "weshaggard"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven\n+    path: $(MAVEN_CACHE_FOLDER)\n+  displayName: Cache Maven local repo\n+\n+- bash: |\n+    git config --global user.name \"Azure-Fluent\"\n+    git config --global user.email \"azfluent@microsoft.com\"\n+  displayName: Base Config\n+\n+- bash: |\n+    sudo apt-get install -y --upgrade python3-pip python3-setuptools\n+    pip3 install --upgrade wheel\n+    pip3 install --upgrade PyYAML\n+  displayName: Update python\n+\n+- task: NodeTool@0\n+  displayName: 'Install Node.js $(NodeVersion)'\n+  inputs:\n+    versionSpec: '$(NodeVersion)'\n+\n+- bash: |\n+    npm install -g autorest\n+    npm install\n+  displayName: 'Install autorest'\n+\n+- bash: |\n+    export PATH=$JAVA_HOME_11_X64/bin:$PATH\n+    java -version\n+    ./eng/mgmt/automation/generate.py --readme \"$(README)\" --tag \"$(TAG)\" --service \"$(SERVICE)\" --version \"$(VERSION)\" --auto-commit-generated-code\n+  displayName: Generation and Compile\n+\n+- bash: |\n+    export MESSAGE=\"[Automation] Generate Fluent Lite from $(README)#$(TAG)\"\n+    export BRANCH=\"Fluent-lite-generation-$(Build.BuildId)\"\n+    git add -A\n+    git commit -m \"[Automation] Update other files outside generation folder\"\n+    git log -2\n+    git push https://$(GITHUB_TOKEN)@github.com/azure-fluent/azure-sdk-for-java HEAD:refs/heads/$BRANCH -f\n+    python3 eng/mgmt/pull-request.py chentanyi azure-sdk-for-java \"$MESSAGE\" \"azure-fluent:$BRANCH\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5NDY2Ng=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzM5OTQwNw==", "bodyText": "Yes, I think we could use the azure-sdk account. So I would like to know do we need to set the azure-sdk github-pat manually in the pipeline?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527399407", "createdAt": "2020-11-20T05:04:00Z", "author": {"login": "ChenTanyi"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven\n+    path: $(MAVEN_CACHE_FOLDER)\n+  displayName: Cache Maven local repo\n+\n+- bash: |\n+    git config --global user.name \"Azure-Fluent\"\n+    git config --global user.email \"azfluent@microsoft.com\"\n+  displayName: Base Config\n+\n+- bash: |\n+    sudo apt-get install -y --upgrade python3-pip python3-setuptools\n+    pip3 install --upgrade wheel\n+    pip3 install --upgrade PyYAML\n+  displayName: Update python\n+\n+- task: NodeTool@0\n+  displayName: 'Install Node.js $(NodeVersion)'\n+  inputs:\n+    versionSpec: '$(NodeVersion)'\n+\n+- bash: |\n+    npm install -g autorest\n+    npm install\n+  displayName: 'Install autorest'\n+\n+- bash: |\n+    export PATH=$JAVA_HOME_11_X64/bin:$PATH\n+    java -version\n+    ./eng/mgmt/automation/generate.py --readme \"$(README)\" --tag \"$(TAG)\" --service \"$(SERVICE)\" --version \"$(VERSION)\" --auto-commit-generated-code\n+  displayName: Generation and Compile\n+\n+- bash: |\n+    export MESSAGE=\"[Automation] Generate Fluent Lite from $(README)#$(TAG)\"\n+    export BRANCH=\"Fluent-lite-generation-$(Build.BuildId)\"\n+    git add -A\n+    git commit -m \"[Automation] Update other files outside generation folder\"\n+    git log -2\n+    git push https://$(GITHUB_TOKEN)@github.com/azure-fluent/azure-sdk-for-java HEAD:refs/heads/$BRANCH -f\n+    python3 eng/mgmt/pull-request.py chentanyi azure-sdk-for-java \"$MESSAGE\" \"azure-fluent:$BRANCH\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5NDY2Ng=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzUwMjE0OA==", "bodyText": "change to azure-sdk done", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527502148", "createdAt": "2020-11-20T08:00:44Z", "author": {"login": "ChenTanyi"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven\n+    path: $(MAVEN_CACHE_FOLDER)\n+  displayName: Cache Maven local repo\n+\n+- bash: |\n+    git config --global user.name \"Azure-Fluent\"\n+    git config --global user.email \"azfluent@microsoft.com\"\n+  displayName: Base Config\n+\n+- bash: |\n+    sudo apt-get install -y --upgrade python3-pip python3-setuptools\n+    pip3 install --upgrade wheel\n+    pip3 install --upgrade PyYAML\n+  displayName: Update python\n+\n+- task: NodeTool@0\n+  displayName: 'Install Node.js $(NodeVersion)'\n+  inputs:\n+    versionSpec: '$(NodeVersion)'\n+\n+- bash: |\n+    npm install -g autorest\n+    npm install\n+  displayName: 'Install autorest'\n+\n+- bash: |\n+    export PATH=$JAVA_HOME_11_X64/bin:$PATH\n+    java -version\n+    ./eng/mgmt/automation/generate.py --readme \"$(README)\" --tag \"$(TAG)\" --service \"$(SERVICE)\" --version \"$(VERSION)\" --auto-commit-generated-code\n+  displayName: Generation and Compile\n+\n+- bash: |\n+    export MESSAGE=\"[Automation] Generate Fluent Lite from $(README)#$(TAG)\"\n+    export BRANCH=\"Fluent-lite-generation-$(Build.BuildId)\"\n+    git add -A\n+    git commit -m \"[Automation] Update other files outside generation folder\"\n+    git log -2\n+    git push https://$(GITHUB_TOKEN)@github.com/azure-fluent/azure-sdk-for-java HEAD:refs/heads/$BRANCH -f\n+    python3 eng/mgmt/pull-request.py chentanyi azure-sdk-for-java \"$MESSAGE\" \"azure-fluent:$BRANCH\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5NDY2Ng=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzgzOTM5Mw==", "bodyText": "You don't set it manually in the pipeline but instead hook up the correct variable group that has the secret which is pulled from keyvault. I", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17679#discussion_r527839393", "createdAt": "2020-11-20T17:15:45Z", "author": {"login": "weshaggard"}, "path": "eng/mgmt/automation/generation.yml", "diffHunk": "@@ -0,0 +1,61 @@\n+trigger: none\n+\n+pr: none\n+\n+pool:\n+  vmImage: 'ubuntu-18.04'\n+\n+variables:\n+  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n+  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n+  NodeVersion: '14.x'\n+\n+steps:\n+- task: Cache@2\n+  inputs:\n+    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n+    restoreKeys: |\n+      maven | \"$(Agent.OS)\"\n+      maven\n+    path: $(MAVEN_CACHE_FOLDER)\n+  displayName: Cache Maven local repo\n+\n+- bash: |\n+    git config --global user.name \"Azure-Fluent\"\n+    git config --global user.email \"azfluent@microsoft.com\"\n+  displayName: Base Config\n+\n+- bash: |\n+    sudo apt-get install -y --upgrade python3-pip python3-setuptools\n+    pip3 install --upgrade wheel\n+    pip3 install --upgrade PyYAML\n+  displayName: Update python\n+\n+- task: NodeTool@0\n+  displayName: 'Install Node.js $(NodeVersion)'\n+  inputs:\n+    versionSpec: '$(NodeVersion)'\n+\n+- bash: |\n+    npm install -g autorest\n+    npm install\n+  displayName: 'Install autorest'\n+\n+- bash: |\n+    export PATH=$JAVA_HOME_11_X64/bin:$PATH\n+    java -version\n+    ./eng/mgmt/automation/generate.py --readme \"$(README)\" --tag \"$(TAG)\" --service \"$(SERVICE)\" --version \"$(VERSION)\" --auto-commit-generated-code\n+  displayName: Generation and Compile\n+\n+- bash: |\n+    export MESSAGE=\"[Automation] Generate Fluent Lite from $(README)#$(TAG)\"\n+    export BRANCH=\"Fluent-lite-generation-$(Build.BuildId)\"\n+    git add -A\n+    git commit -m \"[Automation] Update other files outside generation folder\"\n+    git log -2\n+    git push https://$(GITHUB_TOKEN)@github.com/azure-fluent/azure-sdk-for-java HEAD:refs/heads/$BRANCH -f\n+    python3 eng/mgmt/pull-request.py chentanyi azure-sdk-for-java \"$MESSAGE\" \"azure-fluent:$BRANCH\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5NDY2Ng=="}, "originalCommit": {"oid": "ad6436c5d178311d5b3fcd157ff326e46d4d1afa"}, "originalPosition": 57}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2766, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}