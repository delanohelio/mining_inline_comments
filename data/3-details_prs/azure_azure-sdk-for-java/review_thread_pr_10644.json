{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExNzkyNjk5", "number": 10644, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxOTo1MToxOVrOD4Lxcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxOTo1MToxOVrOD4Lxcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwMjM5NzMxOnYy", "diffSide": "RIGHT", "path": "sdk/search/azure-search-documents/swagger/readme.md", "isResolved": false, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxOTo1MToxOVrOGO4Arg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQyMTowMDowMVrOGO6JYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1MDkyNg==", "bodyText": "Isn't there a way to perform this by mutating the Swagger instead of the generated file?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10644#discussion_r418250926", "createdAt": "2020-04-30T19:51:19Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/swagger/readme.md", "diffHunk": "@@ -121,10 +123,25 @@ directive:\n       where: $\n       transform: >-\n           return $\n-          .replace(/(\\@HostParam\\(\\\"indexName\\\"\\) String indexName)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n-          .replace(/(this.client.getIndexName\\(\\),)/g, \"$1 accept,\")\n+          .replace(/(\\@QueryParam\\(\\\"api\\-version\\\"\\) String apiVersion)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n+          .replace(/(this\\.client\\.getApiVersion\\(\\)\\,)/g, \"$1 accept,\")\n           .replace(/(public Mono\\<(.*)\\) \\{)/g, \"$1\\n\\t\\tfinal String accept \\= \\\"application\\/json\\;odata\\.metadata\\=none\\\"\\;\\n\")\n \n+    # Change service resource impl to take Accept header parameter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e65e96dbf54eafe84350fa2b8876da8739a367c"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI3MTM0MA==", "bodyText": "The autorest.core version we used do not support the change. Update to latest autorest.core one works well, but break other transformers. I think we still need to switch latest autorest.core. I dont think it can deliver this release.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10644#discussion_r418271340", "createdAt": "2020-04-30T20:31:50Z", "author": {"login": "sima-zhu"}, "path": "sdk/search/azure-search-documents/swagger/readme.md", "diffHunk": "@@ -121,10 +123,25 @@ directive:\n       where: $\n       transform: >-\n           return $\n-          .replace(/(\\@HostParam\\(\\\"indexName\\\"\\) String indexName)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n-          .replace(/(this.client.getIndexName\\(\\),)/g, \"$1 accept,\")\n+          .replace(/(\\@QueryParam\\(\\\"api\\-version\\\"\\) String apiVersion)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n+          .replace(/(this\\.client\\.getApiVersion\\(\\)\\,)/g, \"$1 accept,\")\n           .replace(/(public Mono\\<(.*)\\) \\{)/g, \"$1\\n\\t\\tfinal String accept \\= \\\"application\\/json\\;odata\\.metadata\\=none\\\"\\;\\n\")\n \n+    # Change service resource impl to take Accept header parameter", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1MDkyNg=="}, "originalCommit": {"oid": "1e65e96dbf54eafe84350fa2b8876da8739a367c"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI3NDk0MQ==", "bodyText": "I believe this could be added as a transform like\n\"parameters\": [\n  {\n    \"name\": \"Accept\",\n    \"in\": \"headers\",\n    \"required\": true,\n    \"type\": \"string\",\n    \"enum\": [\n      \"application/json;odata.metadata=minimal\"\n    ]\n  }\n]", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10644#discussion_r418274941", "createdAt": "2020-04-30T20:38:22Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/swagger/readme.md", "diffHunk": "@@ -121,10 +123,25 @@ directive:\n       where: $\n       transform: >-\n           return $\n-          .replace(/(\\@HostParam\\(\\\"indexName\\\"\\) String indexName)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n-          .replace(/(this.client.getIndexName\\(\\),)/g, \"$1 accept,\")\n+          .replace(/(\\@QueryParam\\(\\\"api\\-version\\\"\\) String apiVersion)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n+          .replace(/(this\\.client\\.getApiVersion\\(\\)\\,)/g, \"$1 accept,\")\n           .replace(/(public Mono\\<(.*)\\) \\{)/g, \"$1\\n\\t\\tfinal String accept \\= \\\"application\\/json\\;odata\\.metadata\\=none\\\"\\;\\n\")\n \n+    # Change service resource impl to take Accept header parameter", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1MDkyNg=="}, "originalCommit": {"oid": "1e65e96dbf54eafe84350fa2b8876da8739a367c"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI3NjIxNQ==", "bodyText": "Does it add to parameters? Or replace to accept?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10644#discussion_r418276215", "createdAt": "2020-04-30T20:40:52Z", "author": {"login": "sima-zhu"}, "path": "sdk/search/azure-search-documents/swagger/readme.md", "diffHunk": "@@ -121,10 +123,25 @@ directive:\n       where: $\n       transform: >-\n           return $\n-          .replace(/(\\@HostParam\\(\\\"indexName\\\"\\) String indexName)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n-          .replace(/(this.client.getIndexName\\(\\),)/g, \"$1 accept,\")\n+          .replace(/(\\@QueryParam\\(\\\"api\\-version\\\"\\) String apiVersion)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n+          .replace(/(this\\.client\\.getApiVersion\\(\\)\\,)/g, \"$1 accept,\")\n           .replace(/(public Mono\\<(.*)\\) \\{)/g, \"$1\\n\\t\\tfinal String accept \\= \\\"application\\/json\\;odata\\.metadata\\=none\\\"\\;\\n\")\n \n+    # Change service resource impl to take Accept header parameter", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1MDkyNg=="}, "originalCommit": {"oid": "1e65e96dbf54eafe84350fa2b8876da8739a367c"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI3ODMxOQ==", "bodyText": "I will have a try. Basically,\nparameters.push does not work", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10644#discussion_r418278319", "createdAt": "2020-04-30T20:45:10Z", "author": {"login": "sima-zhu"}, "path": "sdk/search/azure-search-documents/swagger/readme.md", "diffHunk": "@@ -121,10 +123,25 @@ directive:\n       where: $\n       transform: >-\n           return $\n-          .replace(/(\\@HostParam\\(\\\"indexName\\\"\\) String indexName)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n-          .replace(/(this.client.getIndexName\\(\\),)/g, \"$1 accept,\")\n+          .replace(/(\\@QueryParam\\(\\\"api\\-version\\\"\\) String apiVersion)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n+          .replace(/(this\\.client\\.getApiVersion\\(\\)\\,)/g, \"$1 accept,\")\n           .replace(/(public Mono\\<(.*)\\) \\{)/g, \"$1\\n\\t\\tfinal String accept \\= \\\"application\\/json\\;odata\\.metadata\\=none\\\"\\;\\n\")\n \n+    # Change service resource impl to take Accept header parameter", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1MDkyNg=="}, "originalCommit": {"oid": "1e65e96dbf54eafe84350fa2b8876da8739a367c"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI4MTExOA==", "bodyText": "It did not work. Jianghao has pull the json after swagger.\nSomehow autorest.core did not generate the right parameters for modeler to parse. That's the main reason. For .NET, I guess they use latest autorest.core version, which generate the right code for Java too. Unfortunately, other transformers get a mess if using the latest.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10644#discussion_r418281118", "createdAt": "2020-04-30T20:50:37Z", "author": {"login": "sima-zhu"}, "path": "sdk/search/azure-search-documents/swagger/readme.md", "diffHunk": "@@ -121,10 +123,25 @@ directive:\n       where: $\n       transform: >-\n           return $\n-          .replace(/(\\@HostParam\\(\\\"indexName\\\"\\) String indexName)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n-          .replace(/(this.client.getIndexName\\(\\),)/g, \"$1 accept,\")\n+          .replace(/(\\@QueryParam\\(\\\"api\\-version\\\"\\) String apiVersion)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n+          .replace(/(this\\.client\\.getApiVersion\\(\\)\\,)/g, \"$1 accept,\")\n           .replace(/(public Mono\\<(.*)\\) \\{)/g, \"$1\\n\\t\\tfinal String accept \\= \\\"application\\/json\\;odata\\.metadata\\=none\\\"\\;\\n\")\n \n+    # Change service resource impl to take Accept header parameter", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1MDkyNg=="}, "originalCommit": {"oid": "1e65e96dbf54eafe84350fa2b8876da8739a367c"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI4NTkyMw==", "bodyText": "Can circle back on this in the future since this is internal code, no need to hold up this change which is needed.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10644#discussion_r418285923", "createdAt": "2020-04-30T21:00:01Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/swagger/readme.md", "diffHunk": "@@ -121,10 +123,25 @@ directive:\n       where: $\n       transform: >-\n           return $\n-          .replace(/(\\@HostParam\\(\\\"indexName\\\"\\) String indexName)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n-          .replace(/(this.client.getIndexName\\(\\),)/g, \"$1 accept,\")\n+          .replace(/(\\@QueryParam\\(\\\"api\\-version\\\"\\) String apiVersion)/g, \"$1\\, @HeaderParam\\(\\\"accept\\\"\\) String accept\")\n+          .replace(/(this\\.client\\.getApiVersion\\(\\)\\,)/g, \"$1 accept,\")\n           .replace(/(public Mono\\<(.*)\\) \\{)/g, \"$1\\n\\t\\tfinal String accept \\= \\\"application\\/json\\;odata\\.metadata\\=none\\\"\\;\\n\")\n \n+    # Change service resource impl to take Accept header parameter", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1MDkyNg=="}, "originalCommit": {"oid": "1e65e96dbf54eafe84350fa2b8876da8739a367c"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4406, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}