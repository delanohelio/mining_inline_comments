{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2MDY3NTcy", "number": 14636, "title": "Support java modules for azure-spring-data-cosmos", "bodyText": "Support Java modules for azure-spring-data-cosmos: #14378.\nmodule-info.java added to the core project azure-spring-data-cosmos-core and the name for this core module is com.azure.spring.data.cosmos.\nFor the two pom file projects, azure-spring-data-2-3-cosmos and azure-spring-data-2-2-cosmos,  an Automatic-Module-Name entry added to the maven-jar-plugin so these two could be automatic modules when used in Java modules. If we don't add such entry, the automatic module names for these two are like azure.spring.data.2.2.cosmos which is not valid and will cause runtime exceptions.\nWe could choose to add module-info.java for the azure-spring-data-2-3-cosmos, but the maven-compiler-plugin would fail when it compiles this artifact against Java8, complaining it doesn't support Java module even though we exclude the module-info.java in such execution.\nI also created a WIP PR to the sample project showing the changes users need to include when creating a modular application. Azure-Samples/azure-spring-data-cosmos-java-sql-api-getting-started#2", "createdAt": "2020-08-31T05:52:04Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636", "merged": true, "mergeCommit": {"oid": "d890893932b3bf6225d907b25de50fa4b90a5aa4"}, "closed": true, "closedAt": "2020-09-04T03:13:38Z", "author": {"login": "saragluna"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDU5C0gH2gAyNDc2MDY3NTcyOjc3YjlkMjg2ZjcwMDg4N2JkYjIxN2JhNzM3ODVjZmE0NTRkOWEyZmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFURCXAFqTQ4MjA2NTkzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "77b9d286f700887bdb217ba73785cfa454d9a2fb", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/77b9d286f700887bdb217ba73785cfa454d9a2fb", "committedDate": "2020-08-28T13:19:25Z", "message": "add module info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dee60bba128bc39cd1409315cb160a8e91606d68", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/dee60bba128bc39cd1409315cb160a8e91606d68", "committedDate": "2020-08-31T04:55:09Z", "message": "fix split packages and runtime exceptions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MzM2ODc4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#pullrequestreview-478336878", "createdAt": "2020-08-31T06:05:37Z", "commit": {"oid": "dee60bba128bc39cd1409315cb160a8e91606d68"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNjowNTozOFrOHJrgow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNjowNTozOFrOHJrgow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMjA5OQ==", "bodyText": "Why do we need this?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r479912099", "createdAt": "2020-08-31T06:05:38Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/module-info.java", "diffHunk": "@@ -32,7 +32,7 @@\n     exports com.azure.cosmos.util;\n \n     // exporting some packages specifically for Jackson\n-    opens com.azure.cosmos to com.fasterxml.jackson.databind;\n+    opens com.azure.cosmos to com.fasterxml.jackson.databind, org.apache.commons.lang3;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee60bba128bc39cd1409315cb160a8e91606d68"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1428014b4cc5e029aceba3e6b57de9955ae4678c", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1428014b4cc5e029aceba3e6b57de9955ae4678c", "committedDate": "2020-08-31T06:55:19Z", "message": "fix compilation error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df6f3b9c1b297055f325f7dca2fea3ca7e5d6882", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/df6f3b9c1b297055f325f7dca2fea3ca7e5d6882", "committedDate": "2020-08-31T11:33:46Z", "message": "fix tests failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3c8fe33c4a7f968769fbc6e478b1fa1fce5f5ff", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e3c8fe33c4a7f968769fbc6e478b1fa1fce5f5ff", "committedDate": "2020-08-31T14:12:17Z", "message": "Merge branch 'master' into feature/spring-data-cosmos-modular"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5017648bdcdb573acd480dbdcae25ea754bbad5", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e5017648bdcdb573acd480dbdcae25ea754bbad5", "committedDate": "2020-08-31T14:19:59Z", "message": "fix checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4OTIwMTQ2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#pullrequestreview-478920146", "createdAt": "2020-08-31T20:11:20Z", "commit": {"oid": "e5017648bdcdb573acd480dbdcae25ea754bbad5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMDoxMToyMFrOHKHmjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMDoxNDo1NlrOHKHtXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3MjM2NQ==", "bodyText": "nit: missing trailing empty line.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r480372365", "createdAt": "2020-08-31T20:11:20Z", "author": {"login": "conniey"}, "path": "sdk/cosmos/azure-spring-data-cosmos-core/src/main/java/module-info.java", "diffHunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+module com.azure.spring.data.cosmos {\n+\n+    requires transitive com.azure.cosmos;\n+    requires com.fasterxml.jackson.datatype.jdk8;\n+    requires com.fasterxml.jackson.module.paramnames;\n+    requires java.desktop;\n+    requires org.apache.commons.lang3;\n+    requires org.slf4j;\n+    requires spring.beans;\n+    requires spring.context;\n+    requires spring.core;\n+    requires spring.data.commons;\n+    requires spring.expression;\n+    requires spring.tx;\n+\n+    exports com.azure.spring.data.cosmos;\n+    exports com.azure.spring.data.cosmos.common;\n+    exports com.azure.spring.data.cosmos.config;\n+    exports com.azure.spring.data.cosmos.core.convert;\n+    exports com.azure.spring.data.cosmos.core;\n+    exports com.azure.spring.data.cosmos.core.mapping;\n+    exports com.azure.spring.data.cosmos.exception;\n+    exports com.azure.spring.data.cosmos.repository;\n+    exports com.azure.spring.data.cosmos.repository.config;\n+    exports com.azure.spring.data.cosmos.repository.support;\n+\n+    opens com.azure.spring.data.cosmos.config to spring.core;\n+    opens com.azure.spring.data.cosmos.repository.support to spring.beans;\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5017648bdcdb573acd480dbdcae25ea754bbad5"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3NDEwOA==", "bodyText": "These should not be in azure-client-sdk-parent. They are inherited by every child module. You should move these to the area path's SDK.\n/cc @alzimmermsft", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r480374108", "createdAt": "2020-08-31T20:14:56Z", "author": {"login": "conniey"}, "path": "sdk/parents/azure-client-sdk-parent/pom.xml", "diffHunk": "@@ -1142,6 +1142,18 @@\n                 <!-- Azure-core needs to open the test entities to Jackson for unit tests to operate -->\n                 --add-opens com.azure.core/com.azure.core.implementation.entities=com.fasterxml.jackson.databind\n                 --add-opens com.azure.core/com.azure.core.implementation.entities=ALL-UNNAMED\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5017648bdcdb573acd480dbdcae25ea754bbad5"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01f6fa6ac3e499be502ba7a3d32bc8a6f2c9e99a", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/01f6fa6ac3e499be502ba7a3d32bc8a6f2c9e99a", "committedDate": "2020-09-01T05:28:30Z", "message": "extend surefire plugin in spring-data-cosmos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77898d0073960fd4329f56310d2bcc5180ff362a", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/77898d0073960fd4329f56310d2bcc5180ff362a", "committedDate": "2020-09-01T07:13:08Z", "message": "inherit plugin from profile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a8e82dfc5926c1e11751a52314120b770259aa2", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7a8e82dfc5926c1e11751a52314120b770259aa2", "committedDate": "2020-09-01T07:28:29Z", "message": "fix broken link caused by changing samples package name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2602c4a18290c86f59be20ba136928f30b5d7ad4", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2602c4a18290c86f59be20ba136928f30b5d7ad4", "committedDate": "2020-09-03T03:26:10Z", "message": "Merge branch 'master' into feature/spring-data-cosmos-modular"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "258aa1e75487c4f14277e12019a0d9f8692219f3", "author": {"user": {"login": "saragluna", "name": "Xiaolu Dai"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/258aa1e75487c4f14277e12019a0d9f8692219f3", "committedDate": "2020-09-03T10:35:50Z", "message": "use plain Java reflection instead of commons.lang3, hence opens to spring module"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMDQ3MDU3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#pullrequestreview-482047057", "createdAt": "2020-09-03T17:17:05Z", "commit": {"oid": "258aa1e75487c4f14277e12019a0d9f8692219f3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMDY1OTMw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#pullrequestreview-482065930", "createdAt": "2020-09-03T17:43:34Z", "commit": {"oid": "258aa1e75487c4f14277e12019a0d9f8692219f3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4957, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}