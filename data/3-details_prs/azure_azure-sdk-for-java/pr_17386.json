{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MTA5NzQ1", "number": 17386, "title": "[Service Bus] Use processor in the readme", "bodyText": "The processor client is what we should share in the getting started scenario and not the sync/async receiver clients. In this PR I have,\n\nused the processor client to receive messages instead of sync/async receiver clients\nremoved the part on renewing locks as this is now done by default. These are remnants from the time when people had to opt in explicitly\nmerged settling messages into the processor sample\nremoved the session receiver example, put in just a note that it is similar to the non sessions case and listed out differences.\n\n@srnagar I put together this PR in a haste, please make corrections as you see fit. I'd like to see the basic version checked in ASAP and you can make improvements in a different PR", "createdAt": "2020-11-09T23:36:39Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17386", "merged": true, "mergeCommit": {"oid": "00cba536f64e3d12e2ab23a8ff5c026e169d295c"}, "closed": true, "closedAt": "2020-11-10T00:08:48Z", "author": {"login": "ramya-rao-a"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABda9c9BAH2gAyNTE4MTA5NzQ1OjY3NGFhYjRlMDcxYmI3YzQ3YWIxNWIwZDc4NzBlOTRjZWVmMzgxZDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABda9oUjgH2gAyNTE4MTA5NzQ1OmJjMGY0ZmM2M2E5M2JhYjI4OTJmMzM3M2E4YzFjMTk3NmU3OTNmYmY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "674aab4e071bb7c47ab15b0d7870e94ceef381d2", "author": {"user": {"login": "ramya-rao-a", "name": "Ramya Rao"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/674aab4e071bb7c47ab15b0d7870e94ceef381d2", "committedDate": "2020-11-09T23:35:06Z", "message": "[Service Bus] Use processor in the readme"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2NzQzODMw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17386#pullrequestreview-526743830", "createdAt": "2020-11-09T23:45:09Z", "commit": {"oid": "674aab4e071bb7c47ab15b0d7870e94ceef381d2"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMzo0NTowOVrOHwGC2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMzo0NTo0NlrOHwGDuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE5MjczMQ==", "bodyText": "Both session and non-session builders will create the same processor client type instance.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In non session case, you would use the `ServiceBusProcessorClient` by using the sub builder `processor()`. In case of sessions, you would use the `ServiceBusSessionProcessorClient` by using the sub builder `sessionProcessor()`. You can pass the maximum number of sessions you want the processor to process concurrently as well.\n          \n          \n            \n            In non-session case, you would use the sub builder `processor()`. In case of sessions, you would use the sub builder `sessionProcessor()`. Both sub builders will create an instance of `ServiceBusProcessorClient` configured to work on a session or a non-session Service Bus entity. In the case of the session processor, you can pass the maximum number of sessions you want the processor to process concurrently as well.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17386#discussion_r520192731", "createdAt": "2020-11-09T23:45:09Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "diffHunk": "@@ -298,29 +246,9 @@ sender.sendMessage(message);\n \n #### Receive messages from a session\n \n-Receivers can fetch messages from a specific session or the first available, unlocked session.\n+Receiving messages from sessions is similar to receiving messages from a non session enabled queue or subscription. The difference is in the builder and the class you use.\n \n-<!-- embedme ./src/samples/java/com/azure/messaging/servicebus/ReadmeSamples.java#L175-L181 -->\n-```java\n-// Creates a session-enabled receiver that gets messages from the session \"greetings\".\n-ServiceBusSessionReceiverAsyncClient sessionReceiver = new ServiceBusClientBuilder()\n-    .connectionString(\"<< CONNECTION STRING FOR THE SERVICE BUS NAMESPACE >>\")\n-    .sessionReceiver()\n-    .queueName(\"<< QUEUE NAME >>\")\n-    .buildAsyncClient();\n-Mono<ServiceBusReceiverAsyncClient> receiverAsyncClient = sessionReceiver.acceptSession(\"greetings\");\n-```\n-\n-<!-- embedme ./src/samples/java/com/azure/messaging/servicebus/ReadmeSamples.java#L188-L194 -->\n-```java\n-// Creates a session-enabled receiver that gets messages from the first available session.\n-ServiceBusSessionReceiverAsyncClient sessionReceiver = new ServiceBusClientBuilder()\n-    .connectionString(\"<< CONNECTION STRING FOR THE SERVICE BUS NAMESPACE >>\")\n-    .sessionReceiver()\n-    .queueName(\"<< QUEUE NAME >>\")\n-    .buildAsyncClient();\n-Mono<ServiceBusReceiverAsyncClient> receiverAsyncClient = sessionReceiver.acceptNextSession();\n-```\n+In non session case, you would use the `ServiceBusProcessorClient` by using the sub builder `processor()`. In case of sessions, you would use the `ServiceBusSessionProcessorClient` by using the sub builder `sessionProcessor()`. You can pass the maximum number of sessions you want the processor to process concurrently as well.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "674aab4e071bb7c47ab15b0d7870e94ceef381d2"}, "originalPosition": 157}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE5Mjk1NQ==", "bodyText": "I can include the code snippet here for creating the session processor in a separate PR if you don't have the sample for it.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17386#discussion_r520192955", "createdAt": "2020-11-09T23:45:46Z", "author": {"login": "srnagar"}, "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "diffHunk": "@@ -298,29 +246,9 @@ sender.sendMessage(message);\n \n #### Receive messages from a session\n \n-Receivers can fetch messages from a specific session or the first available, unlocked session.\n+Receiving messages from sessions is similar to receiving messages from a non session enabled queue or subscription. The difference is in the builder and the class you use.\n \n-<!-- embedme ./src/samples/java/com/azure/messaging/servicebus/ReadmeSamples.java#L175-L181 -->\n-```java", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "674aab4e071bb7c47ab15b0d7870e94ceef381d2"}, "originalPosition": 137}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc0f4fc63a93bab2892f3373a8c1c1976e793fbf", "author": {"user": {"login": "ramya-rao-a", "name": "Ramya Rao"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bc0f4fc63a93bab2892f3373a8c1c1976e793fbf", "committedDate": "2020-11-09T23:47:31Z", "message": "Update sdk/servicebus/azure-messaging-servicebus/README.md\n\nCo-authored-by: Srikanta <51379715+srnagar@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 168, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}