{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2MDcwODU5", "number": 18378, "title": "Change the code style of AADSeleniumITHelper", "bodyText": "Change the code style of AADSeleniumITHelper", "createdAt": "2020-12-28T12:18:22Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18378", "merged": true, "mergeCommit": {"oid": "c239763dd681f208b337264f5ca69ba2e52b57e3"}, "closed": true, "closedAt": "2020-12-29T09:05:23Z", "author": {"login": "chenrujun"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdpkcQ1gH2gAyNTQ2MDcwODU5OjM4NGMyYWQzNTUwMjc3ZTU2ZDFlYzA5NzczYzU1NDQzNmIwNTIxZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdq22ZwgFqTU1OTQzNTk2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "384c2ad3550277e56d1ec09773c554436b0521e3", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/384c2ad3550277e56d1ec09773c554436b0521e3", "committedDate": "2020-12-25T08:55:35Z", "message": "Add logout test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "514453878fac3e45cd8776e9a6a2834100a302b7", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/514453878fac3e45cd8776e9a6a2834100a302b7", "committedDate": "2020-12-28T02:59:50Z", "message": "Merge branch 'master' of github.com:Azure/azure-sdk-for-java into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e45cf8f9aa374510c8a9207cddc4f0374379c5e7", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e45cf8f9aa374510c8a9207cddc4f0374379c5e7", "committedDate": "2020-12-28T03:47:22Z", "message": "modify selenium tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28417a81beec15e53e659c9ef0e0b4c7cc38a674", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/28417a81beec15e53e659c9ef0e0b4c7cc38a674", "committedDate": "2020-12-28T06:29:37Z", "message": "Merge branch 'master' of github.com:Azure/azure-sdk-for-java into dev\n\n\u0001 Conflicts:\n\u0001\tsdk/spring/azure-spring-boot-test-aad/src/test/java/com/azure/test/aad/selenium/access/token/scopes/AccessTokenScopesIT.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24c1603255856a4367ce2c6165da7055779fb80f", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/24c1603255856a4367ce2c6165da7055779fb80f", "committedDate": "2020-12-28T07:00:35Z", "message": "modify selenium tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb04b7f4476b69a57291f0e16e485f0a3bfd9f61", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bb04b7f4476b69a57291f0e16e485f0a3bfd9f61", "committedDate": "2020-12-28T07:43:32Z", "message": "Rename AuthorizationProperties to AuthorizationClientProperties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64ad42d98099303ebcae75d1ab5a71c070c81482", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/64ad42d98099303ebcae75d1ab5a71c070c81482", "committedDate": "2020-12-28T12:17:33Z", "message": "Simplify code of AADSeleniumITHelper."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b06fbc9e69a4270a7b41e39e71f7709a10c8b66", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8b06fbc9e69a4270a7b41e39e71f7709a10c8b66", "committedDate": "2020-12-28T23:29:32Z", "message": "In AADSeleniumITHelper:\n1. Delete httpGetAndAssert, use httpGet instead.\n2. Add \"this.app.start()\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dfc13d6265569c4f2e210cc9d8ae30e257b4122", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8dfc13d6265569c4f2e210cc9d8ae30e257b4122", "committedDate": "2020-12-29T00:07:19Z", "message": "Fix error about app properties."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d58ee31038e0725baf06ca7efb42975cd1a5a935", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d58ee31038e0725baf06ca7efb42975cd1a5a935", "committedDate": "2020-12-29T00:08:58Z", "message": "Change the order of static code block."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1c35fdfb365c6000cf628832cc1c86cfe2b3ac7", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a1c35fdfb365c6000cf628832cc1c86cfe2b3ac7", "committedDate": "2020-12-29T00:10:04Z", "message": "No logic change, just change class name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d1fc0f42e93fb54a164bee0711c0df5ec067ecf", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0d1fc0f42e93fb54a164bee0711c0df5ec067ecf", "committedDate": "2020-12-29T01:03:14Z", "message": "Update properties."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2cb8f1a940469d7575f511cb23ccc894348a8eb", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f2cb8f1a940469d7575f511cb23ccc894348a8eb", "committedDate": "2020-12-29T01:13:19Z", "message": "Change package name for AADRoleIT."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dba4e8f6b92c1f6829c4913c98f497869fa14a88", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/dba4e8f6b92c1f6829c4913c98f497869fa14a88", "committedDate": "2020-12-29T01:30:58Z", "message": "No logic change, just make property easier to read."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e194625285db4b08ad482c3ea02c831186d6eda8", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e194625285db4b08ad482c3ea02c831186d6eda8", "committedDate": "2020-12-29T01:34:26Z", "message": "No logic change, just code order."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "416923bd9ad26b5b2f4bb5fd0a019ce0983f25ea", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/416923bd9ad26b5b2f4bb5fd0a019ce0983f25ea", "committedDate": "2020-12-29T01:37:31Z", "message": "Fix assert error in AADAccessTokenScopesIT."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eabd0119a8f8bb7d1d76a50f9583f255cf637620", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/eabd0119a8f8bb7d1d76a50f9583f255cf637620", "committedDate": "2020-12-29T01:39:57Z", "message": "Fix assert error in AADRoleIT."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4224f91e381c28ad22d78bf0cc4fd1646fc6224", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f4224f91e381c28ad22d78bf0cc4fd1646fc6224", "committedDate": "2020-12-29T01:43:06Z", "message": "Change the style of forbidden endpoint."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d43ca770b68cae51e222f40816ac6751e81c55af", "author": {"user": {"login": "chenrujun", "name": "Rujun Chen"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d43ca770b68cae51e222f40816ac6751e81c55af", "committedDate": "2020-12-29T08:28:23Z", "message": "Merge branch 'master' into change-the-code-style-of-selenium-test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NDIyMDQ2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18378#pullrequestreview-559422046", "createdAt": "2020-12-29T08:15:09Z", "commit": {"oid": "f4224f91e381c28ad22d78bf0cc4fd1646fc6224"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwODoxNTowOVrOIMJmyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwODo0MToyNVrOIMKErQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYxMTIwOA==", "bodyText": "Can these 2 lines be combined?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18378#discussion_r549611208", "createdAt": "2020-12-29T08:15:09Z", "author": {"login": "yiliuTo"}, "path": "sdk/spring/azure-spring-boot-test-aad/src/test/java/com/azure/test/aad/selenium/AADSeleniumITHelper.java", "diffHunk": "@@ -0,0 +1,115 @@\n+package com.azure.test.aad.selenium;\n+\n+import com.azure.test.utils.AppRunner;\n+import org.junit.Assert;\n+import org.openqa.selenium.By;\n+import org.openqa.selenium.Keys;\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.chrome.ChromeDriver;\n+import org.openqa.selenium.chrome.ChromeDriverService;\n+import org.openqa.selenium.chrome.ChromeOptions;\n+import org.openqa.selenium.support.ui.WebDriverWait;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.regex.Pattern;\n+\n+import static com.azure.test.aad.AADTestUtils.AAD_MULTI_TENANT_CLIENT_ID;\n+import static com.azure.test.aad.AADTestUtils.AAD_MULTI_TENANT_CLIENT_SECRET;\n+import static com.azure.test.aad.AADTestUtils.AAD_TENANT_ID_1;\n+import static com.azure.test.aad.AADTestUtils.AAD_USER_NAME_1;\n+import static com.azure.test.aad.AADTestUtils.AAD_USER_PASSWORD_1;\n+import static org.openqa.selenium.support.ui.ExpectedConditions.presenceOfElementLocated;\n+\n+public class AADSeleniumITHelper {\n+\n+    private final String username;\n+    private final String password;\n+    private final AppRunner app;\n+    private final WebDriver driver;\n+    private static final Map<String, String> DEFAULT_PROPERTIES = new HashMap<>();\n+\n+    static {\n+        DEFAULT_PROPERTIES.put(\"azure.activedirectory.tenant-id\", System.getenv(AAD_TENANT_ID_1));\n+        DEFAULT_PROPERTIES.put(\"azure.activedirectory.client-id\", System.getenv(AAD_MULTI_TENANT_CLIENT_ID));\n+        DEFAULT_PROPERTIES.put(\"azure.activedirectory.client-secret\", System.getenv(AAD_MULTI_TENANT_CLIENT_SECRET));\n+        DEFAULT_PROPERTIES.put(\"azure.activedirectory.user-group.allowed-groups\", \"group1\");\n+        DEFAULT_PROPERTIES.put(\"azure.activedirectory.post-logout-redirect-uri\", \"http://localhost:${server.port}\");\n+\n+        final String directory = \"src/test/resources/driver/\";\n+        final String chromedriverLinux = \"chromedriver_linux64\";\n+        final String chromedriverWin32 = \"chromedriver_win32.exe\";\n+        final String chromedriverMac = \"chromedriver_mac64\";\n+        String osName = System.getProperty(\"os.name\").toLowerCase();\n+        Process process = null;\n+        try {\n+            File dir = new File(directory);\n+            if (Pattern.matches(\"linux.*\", osName)) {\n+                process = Runtime.getRuntime().exec(\"chmod +x \" + chromedriverLinux, null, dir);\n+                process.waitFor();\n+                System.setProperty(ChromeDriverService.CHROME_DRIVER_EXE_PROPERTY, directory + chromedriverLinux);\n+            } else if (Pattern.matches(\"windows.*\", osName)) {\n+                System.setProperty(ChromeDriverService.CHROME_DRIVER_EXE_PROPERTY, directory + chromedriverWin32);\n+            } else if (Pattern.matches(\"mac.*\", osName)) {\n+                process = Runtime.getRuntime().exec(\"chmod +x \" + chromedriverMac, null, dir);\n+                process.waitFor();\n+                System.setProperty(ChromeDriverService.CHROME_DRIVER_EXE_PROPERTY, directory + chromedriverMac);\n+            } else {\n+                throw new IllegalStateException(\"Unrecognized osName. osName = \" + System.getProperty(\"os.name\"));\n+            }\n+        } catch (InterruptedException | IOException e) {\n+            throw new RuntimeException(e);\n+        } finally {\n+            if (process != null) {\n+                process.destroy();\n+            }\n+        }\n+    }\n+\n+    public AADSeleniumITHelper(Class<?> appClass, Map<String, String> properties) throws InterruptedException {\n+        username = System.getenv(AAD_USER_NAME_1);\n+        password = System.getenv(AAD_USER_PASSWORD_1);\n+        app = new AppRunner(appClass);\n+        DEFAULT_PROPERTIES.forEach(app::property);\n+        properties.forEach(app::property);\n+\n+        ChromeOptions options = new ChromeOptions();\n+        options.addArguments(\"--headless\");\n+        options.addArguments(\"--incognito\", \"--no-sandbox\", \"--disable-dev-shm-usage\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f4224f91e381c28ad22d78bf0cc4fd1646fc6224"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYxODc1Ng==", "bodyText": "Can we add checks on if the authorization code flow is executed for \"arm\" client or the same checks as above?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18378#discussion_r549618756", "createdAt": "2020-12-29T08:41:03Z", "author": {"login": "yiliuTo"}, "path": "sdk/spring/azure-spring-boot-test-aad/src/test/java/com/azure/test/aad/selenium/access/token/scopes/AADAccessTokenScopesIT.java", "diffHunk": "@@ -0,0 +1,95 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.test.aad.selenium.access.token.scopes;\n+\n+import com.azure.test.aad.selenium.AADSeleniumITHelper;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.springframework.boot.autoconfigure.SpringBootApplication;\n+import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\n+import org.springframework.security.oauth2.client.OAuth2AuthorizedClient;\n+import org.springframework.security.oauth2.client.annotation.RegisteredOAuth2AuthorizedClient;\n+import org.springframework.security.oauth2.core.OAuth2AccessToken;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+\n+public class AADAccessTokenScopesIT {\n+\n+    @Test\n+    public void testAccessTokenScopes() throws InterruptedException {\n+        Map<String, String> arguments = new HashMap<>();\n+        arguments.put(\n+            \"azure.activedirectory.authorization-clients.office.scopes\",\n+            \"https://manage.office.com/ActivityFeed.Read, https://manage.office.com/ActivityFeed.ReadDlp, \"\n+                + \"https://manage.office.com/ServiceHealth.Read\");\n+        arguments.put(\n+            \"azure.activedirectory.authorization-clients.graph.scopes\",\n+            \"https://graph.microsoft.com/User.Read, https://graph.microsoft.com/Directory.AccessAsUser.All\");\n+        AADSeleniumITHelper aadSeleniumITHelper = new AADSeleniumITHelper(DumbApp.class, arguments);\n+\n+        String httpResponse = aadSeleniumITHelper.httpGet(\"accessTokenScopes/azure\");\n+        Assert.assertTrue(httpResponse.contains(\"profile\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://graph.microsoft.com/Directory.AccessAsUser.All\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://graph.microsoft.com/User.Read\"));\n+\n+        httpResponse = aadSeleniumITHelper.httpGet(\"accessTokenScopes/graph\");\n+        Assert.assertTrue(httpResponse.contains(\"profile\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://graph.microsoft.com/Directory.AccessAsUser.All\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://graph.microsoft.com/User.Read\"));\n+\n+        httpResponse = aadSeleniumITHelper.httpGet(\"accessTokenScopes/office\");\n+        Assert.assertFalse(httpResponse.contains(\"profile\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://manage.office.com/ActivityFeed.Read\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://manage.office.com/ActivityFeed.ReadDlp\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://manage.office.com/ServiceHealth.Read\"));\n+\n+        httpResponse = aadSeleniumITHelper.httpGet(\"arm\");\n+        Assert.assertNotEquals(httpResponse, \"arm\");\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d43ca770b68cae51e222f40816ac6751e81c55af"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYxODg2MQ==", "bodyText": "Why do we make arm controller different with the others?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18378#discussion_r549618861", "createdAt": "2020-12-29T08:41:25Z", "author": {"login": "yiliuTo"}, "path": "sdk/spring/azure-spring-boot-test-aad/src/test/java/com/azure/test/aad/selenium/access/token/scopes/AADAccessTokenScopesIT.java", "diffHunk": "@@ -0,0 +1,95 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.test.aad.selenium.access.token.scopes;\n+\n+import com.azure.test.aad.selenium.AADSeleniumITHelper;\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.springframework.boot.autoconfigure.SpringBootApplication;\n+import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\n+import org.springframework.security.oauth2.client.OAuth2AuthorizedClient;\n+import org.springframework.security.oauth2.client.annotation.RegisteredOAuth2AuthorizedClient;\n+import org.springframework.security.oauth2.core.OAuth2AccessToken;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+\n+public class AADAccessTokenScopesIT {\n+\n+    @Test\n+    public void testAccessTokenScopes() throws InterruptedException {\n+        Map<String, String> arguments = new HashMap<>();\n+        arguments.put(\n+            \"azure.activedirectory.authorization-clients.office.scopes\",\n+            \"https://manage.office.com/ActivityFeed.Read, https://manage.office.com/ActivityFeed.ReadDlp, \"\n+                + \"https://manage.office.com/ServiceHealth.Read\");\n+        arguments.put(\n+            \"azure.activedirectory.authorization-clients.graph.scopes\",\n+            \"https://graph.microsoft.com/User.Read, https://graph.microsoft.com/Directory.AccessAsUser.All\");\n+        AADSeleniumITHelper aadSeleniumITHelper = new AADSeleniumITHelper(DumbApp.class, arguments);\n+\n+        String httpResponse = aadSeleniumITHelper.httpGet(\"accessTokenScopes/azure\");\n+        Assert.assertTrue(httpResponse.contains(\"profile\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://graph.microsoft.com/Directory.AccessAsUser.All\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://graph.microsoft.com/User.Read\"));\n+\n+        httpResponse = aadSeleniumITHelper.httpGet(\"accessTokenScopes/graph\");\n+        Assert.assertTrue(httpResponse.contains(\"profile\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://graph.microsoft.com/Directory.AccessAsUser.All\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://graph.microsoft.com/User.Read\"));\n+\n+        httpResponse = aadSeleniumITHelper.httpGet(\"accessTokenScopes/office\");\n+        Assert.assertFalse(httpResponse.contains(\"profile\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://manage.office.com/ActivityFeed.Read\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://manage.office.com/ActivityFeed.ReadDlp\"));\n+        Assert.assertTrue(httpResponse.contains(\"https://manage.office.com/ServiceHealth.Read\"));\n+\n+        httpResponse = aadSeleniumITHelper.httpGet(\"arm\");\n+        Assert.assertNotEquals(httpResponse, \"arm\");\n+    }\n+\n+    @EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)\n+    @SpringBootApplication\n+    @RestController\n+    public static class DumbApp {\n+\n+        @GetMapping(value = \"accessTokenScopes/azure\")\n+        public Set<String> azure(\n+            @RegisteredOAuth2AuthorizedClient(\"azure\") OAuth2AuthorizedClient authorizedClient) {\n+            return Optional.of(authorizedClient)\n+                           .map(OAuth2AuthorizedClient::getAccessToken)\n+                           .map(OAuth2AccessToken::getScopes)\n+                           .orElse(null);\n+        }\n+\n+        @GetMapping(value = \"accessTokenScopes/graph\")\n+        public Set<String> graph(\n+            @RegisteredOAuth2AuthorizedClient(\"graph\") OAuth2AuthorizedClient authorizedClient) {\n+            return Optional.of(authorizedClient)\n+                           .map(OAuth2AuthorizedClient::getAccessToken)\n+                           .map(OAuth2AccessToken::getScopes)\n+                           .orElse(null);\n+        }\n+\n+        @GetMapping(value = \"accessTokenScopes/office\")\n+        public Set<String> office(\n+            @RegisteredOAuth2AuthorizedClient(\"office\") OAuth2AuthorizedClient authorizedClient) {\n+            return Optional.of(authorizedClient)\n+                           .map(OAuth2AuthorizedClient::getAccessToken)\n+                           .map(OAuth2AccessToken::getScopes)\n+                           .orElse(null);\n+        }\n+\n+        @GetMapping(value = \"arm\")\n+        public String arm(\n+            @RegisteredOAuth2AuthorizedClient(\"arm\") OAuth2AuthorizedClient authorizedClient) {\n+            return \"arm\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d43ca770b68cae51e222f40816ac6751e81c55af"}, "originalPosition": 91}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NDM1OTYz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18378#pullrequestreview-559435963", "createdAt": "2020-12-29T08:56:21Z", "commit": {"oid": "d43ca770b68cae51e222f40816ac6751e81c55af"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4193, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}