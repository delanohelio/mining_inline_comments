{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI1NTE0NTE5", "number": 17753, "title": "AADB2COidcLoginConfigurer OAuth2 Additional Parameters", "bodyText": "Fixes #17751", "createdAt": "2020-11-23T07:19:54Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17753", "merged": true, "mergeCommit": {"oid": "63ad3112b3f01a9fd1d40eda23f01b6ed858d4f4"}, "closed": true, "closedAt": "2020-11-24T08:39:29Z", "author": {"login": "lu-cheng"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfP2hcgH2gAyNTI1NTE0NTE5OjUwMTVmMDlhMTgxZjBmZGExNDZhYjFmNWIzZWJlMGM4YTAxMmM5Zjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdflVR0gFqTUzNzE5MDM5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5015f09a181f0fda146ab1f5b3ebe0c8a012c9f7", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5015f09a181f0fda146ab1f5b3ebe0c8a012c9f7", "committedDate": "2020-11-23T07:17:01Z", "message": "fixes #17751"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2MjIzMDM5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17753#pullrequestreview-536223039", "createdAt": "2020-11-23T07:34:42Z", "commit": {"oid": "5015f09a181f0fda146ab1f5b3ebe0c8a012c9f7"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QwNzozNDo0MlrOH4Btzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QwNzozNDo0MlrOH4Btzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODUxMDQxNQ==", "bodyText": "Maybe we shouldn't directly manipulate the additional here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17753#discussion_r528510415", "createdAt": "2020-11-23T07:34:42Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot/src/main/java/com/azure/spring/autoconfigure/b2c/AADB2CAuthorizationRequestResolver.java", "diffHunk": "@@ -89,12 +92,11 @@ private OAuth2AuthorizationRequest getB2CAuthorizationRequest(@Nullable OAuth2Au\n \n         cleanupSecurityContextAuthentication();\n \n-        final Map<String, Object> parameters = new HashMap<>(request.getAdditionalParameters());\n-\n-        parameters.put(\"p\", userFlow);\n-        parameters.put(PARAMETER_X_CLIENT_SKU, AAD_B2C_USER_AGENT);\n+        final Map<String, Object> additional = this.properties.getAdditional();\n+        this.properties.getAdditional().put(\"p\", userFlow);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5015f09a181f0fda146ab1f5b3ebe0c8a012c9f7"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49e89ae198ac056c950c626a05ed3d134bd5bc3a", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/49e89ae198ac056c950c626a05ed3d134bd5bc3a", "committedDate": "2020-11-23T08:29:00Z", "message": "modify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8be2fa61e39481e3389767218a7d65dcadccc842", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8be2fa61e39481e3389767218a7d65dcadccc842", "committedDate": "2020-11-23T08:51:42Z", "message": "modify"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MDMxOTk4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17753#pullrequestreview-537031998", "createdAt": "2020-11-24T02:34:46Z", "commit": {"oid": "8be2fa61e39481e3389767218a7d65dcadccc842"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMjozNDo0NlrOH4pZmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMjozNTozMFrOH4pcPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTE2MDYwMQ==", "bodyText": "Maybe authenticate-additional-parameters will make it easier to understand?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17753#discussion_r529160601", "createdAt": "2020-11-24T02:34:46Z", "author": {"login": "chenrujun"}, "path": "sdk/spring/azure-spring-boot-starter-active-directory-b2c/README.md", "diffHunk": "@@ -101,6 +101,10 @@ application to use the Spring annotations and classes to protect the web app.\n            sign-up-or-sign-in: ${your-sign-up-or-in-user-flow}\n            profile-edit: ${your-profile-edit-user-flow}     # optional\n            password-reset: ${your-password-reset-user-flow} # optional\n+         additional: ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8be2fa61e39481e3389767218a7d65dcadccc842"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTE2MTI3Nw==", "bodyText": "additionalParameters", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17753#discussion_r529161277", "createdAt": "2020-11-24T02:35:30Z", "author": {"login": "chenrujun"}, "path": "sdk/spring/azure-spring-boot/src/main/java/com/azure/spring/autoconfigure/b2c/AADB2CAuthorizationRequestResolver.java", "diffHunk": "@@ -89,12 +93,14 @@ private OAuth2AuthorizationRequest getB2CAuthorizationRequest(@Nullable OAuth2Au\n \n         cleanupSecurityContextAuthentication();\n \n-        final Map<String, Object> parameters = new HashMap<>(request.getAdditionalParameters());\n-\n-        parameters.put(\"p\", userFlow);\n-        parameters.put(PARAMETER_X_CLIENT_SKU, AAD_B2C_USER_AGENT);\n+        final Map<String, Object> additional = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8be2fa61e39481e3389767218a7d65dcadccc842"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4300072557ad1a3110cb51843b58039c3c4180b", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a4300072557ad1a3110cb51843b58039c3c4180b", "committedDate": "2020-11-24T02:42:07Z", "message": "modify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93bf20d8fc026aa9ca0a4d83e345c364d46a0282", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/93bf20d8fc026aa9ca0a4d83e345c364d46a0282", "committedDate": "2020-11-24T07:59:59Z", "message": "Merge branch 'master' of github.com:Azure/azure-sdk-for-java into fixes#17751"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b096379a1446247e2188490681644a8005650a83", "author": {"user": {"login": "lu-cheng", "name": "Jack Lu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b096379a1446247e2188490681644a8005650a83", "committedDate": "2020-11-24T08:02:21Z", "message": "modify"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MTkwMzkw", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17753#pullrequestreview-537190390", "createdAt": "2020-11-24T08:18:37Z", "commit": {"oid": "b096379a1446247e2188490681644a8005650a83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1658, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}