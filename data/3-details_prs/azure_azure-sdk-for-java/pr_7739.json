{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3NjQ0NzIw", "number": 7739, "title": "[API Change] Added ability to access BlobProperties from BlobInputStream", "bodyText": "Resolves #7497", "createdAt": "2020-01-27T18:45:30Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7739", "merged": true, "mergeCommit": {"oid": "f2b35625f270523f008d6e266d87a61c3b7153ef"}, "closed": true, "closedAt": "2020-01-29T23:28:56Z", "author": {"login": "gapra-msft"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-hRzmgH2gAyMzY3NjQ0NzIwOjUxOThjNTYzNmI2YWY1Y2NkNjBhMjNjN2UwNzZlM2I5MzFlN2M0ZWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_LpiYgH2gAyMzY3NjQ0NzIwOmEzMDE0NDcwZWQ3NjVkYWJlNWU0NWJmNDYxNTQ2Njc4ZTFlNmRjZGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5198c5636b6af5ccd60a23c7e076e3b931e7c4ec", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5198c5636b6af5ccd60a23c7e076e3b931e7c4ec", "committedDate": "2020-01-27T18:44:33Z", "message": "Added ability to access BlobProperties from BlobInputStream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a9709e12142c5235a4362dac349c2d09ef44a62", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4a9709e12142c5235a4362dac349c2d09ef44a62", "committedDate": "2020-01-27T19:16:46Z", "message": "Removed unused imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDQzMTA0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7739#pullrequestreview-349043104", "createdAt": "2020-01-27T23:18:31Z", "commit": {"oid": "4a9709e12142c5235a4362dac349c2d09ef44a62"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMzoxODozMVrOFiUzsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMzoxODozMVrOFiUzsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUzNjgxOA==", "bodyText": "Extra space.\nLooking at this, I wonder if it actually would be good to do a getProperties call if they try to access the properties before reading any data instead of returning null. What do you think?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7739#discussion_r371536818", "createdAt": "2020-01-27T23:18:31Z", "author": {"login": "rickle-msft"}, "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/storage/blob/specialized/BlobInputStream.java", "diffHunk": "@@ -89,4 +102,26 @@ protected synchronized ByteBuffer dispatchRead(final int readLength, final long\n         }\n     }\n \n+    private static BlobProperties buildBlobProperties(BlobDownloadHeaders hd) {\n+        if (hd == null) {\n+            return null;\n+        }\n+        return new BlobProperties(null, hd.getLastModified(), hd.getETag(),\n+            hd.getContentLength() == null ? 0 : hd.getContentLength(), hd.getContentType(), null,\n+            hd.getContentEncoding(), hd.getContentDisposition(), hd.getContentLanguage(), hd.getCacheControl(),\n+            hd.getBlobSequenceNumber(), hd.getBlobType(), hd.getLeaseStatus(), hd.getLeaseState(),\n+            hd.getLeaseDuration(), hd.getCopyId(), hd.getCopyStatus(), hd.getCopySource(), hd.getCopyProgress(),\n+            hd.getCopyCompletionTime(), hd.getCopyStatusDescription(), hd.isServerEncrypted(),\n+            null, null, null, null, null, hd.getEncryptionKeySha256(), null, hd.getMetadata(),\n+            hd.getBlobCommittedBlockCount());\n+    }\n+\n+    /**\n+     *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a9709e12142c5235a4362dac349c2d09ef44a62"}, "originalPosition": 66}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0d08b0752b339a7065c35b0078be99437cfbc6d", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c0d08b0752b339a7065c35b0078be99437cfbc6d", "committedDate": "2020-01-28T00:30:44Z", "message": "Added a call to getProperties if called before"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDkyMDI1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7739#pullrequestreview-349092025", "createdAt": "2020-01-28T01:56:10Z", "commit": {"oid": "c0d08b0752b339a7065c35b0078be99437cfbc6d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTg0ODE5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7739#pullrequestreview-349584819", "createdAt": "2020-01-28T17:59:35Z", "commit": {"oid": "c0d08b0752b339a7065c35b0078be99437cfbc6d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNzo1OTozNVrOFiu67A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNzo1OTozNVrOFiu67A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk2NDY1Mg==", "bodyText": "need to update this test", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7739#discussion_r371964652", "createdAt": "2020-01-28T17:59:35Z", "author": {"login": "gapra-msft"}, "path": "sdk/storage/azure-storage-blob/src/test/java/com/azure/storage/blob/BlockBlobInputOutputStreamTest.groovy", "diffHunk": "@@ -25,6 +26,7 @@ class BlockBlobInputOutputStreamTest extends APISpec {\n \n         then:\n         def inputStream = bc.openInputStream()\n+        !inputStream.getProperties() // before reading properties should be null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0d08b0752b339a7065c35b0078be99437cfbc6d"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cad10721b36213e1c75f2eeb64734a8e2d8cb106", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cad10721b36213e1c75f2eeb64734a8e2d8cb106", "committedDate": "2020-01-28T19:31:47Z", "message": "Updated input stream test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMzYxNDEz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7739#pullrequestreview-350361413", "createdAt": "2020-01-29T19:19:56Z", "commit": {"oid": "cad10721b36213e1c75f2eeb64734a8e2d8cb106"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17c52f96782a4aa61c1f6790c595680417734283", "author": {"user": null}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/17c52f96782a4aa61c1f6790c595680417734283", "committedDate": "2020-01-29T20:03:42Z", "message": "Added test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3014470ed765dabe5e45bf461546678e1e6dcde", "author": {"user": {"login": "gapra-msft", "name": "Gauri Prasad"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a3014470ed765dabe5e45bf461546678e1e6dcde", "committedDate": "2020-01-29T20:06:29Z", "message": "Merge branch 'master' into storage/inputStreamProperties"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2595, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}