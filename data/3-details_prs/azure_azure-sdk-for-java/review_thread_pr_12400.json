{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4MTkzNTQ0", "number": 12400, "reviewThreads": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0MTozMFrOEIIF1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo0ODo0NVrOEKn6kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTU2NjI5OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0MTozMFrOGn5wvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNToxNDoxMlrOGpT62w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5NDAxMw==", "bodyText": "Update this to using the public beginRecognizeContent API", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r444494013", "createdAt": "2020-06-23T20:41:30Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -210,6 +300,55 @@ public void recognizeContentResultWithContentTypeAutoDetection(HttpClient httpCl\n         });\n     }\n \n+    /**\n+     * Verifies blank form file is still a valid file to process\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeContentResultWithBlankPdf(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        SyncPoller<OperationResult, List<FormPage>> syncPoller =\n+            client.beginRecognizeContent(getReplayableBufferData(BLANK_FORM_LOCAL_URL), BLANK_FORM_FILE_LENGTH,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 209}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3MTE2Mw==", "bodyText": "not sure what it means.\nclient.beginRecognizeContent()\n\nis already a public API", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445971163", "createdAt": "2020-06-26T05:14:12Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -210,6 +300,55 @@ public void recognizeContentResultWithContentTypeAutoDetection(HttpClient httpCl\n         });\n     }\n \n+    /**\n+     * Verifies blank form file is still a valid file to process\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeContentResultWithBlankPdf(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        SyncPoller<OperationResult, List<FormPage>> syncPoller =\n+            client.beginRecognizeContent(getReplayableBufferData(BLANK_FORM_LOCAL_URL), BLANK_FORM_FILE_LENGTH,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5NDAxMw=="}, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 209}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTU2OTIwOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0MjoyNlrOGn5yqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0MjoyNlrOGn5yqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5NDUwNg==", "bodyText": "bad as in incorrect or not supported?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r444494506", "createdAt": "2020-06-23T20:42:26Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -210,6 +300,55 @@ public void recognizeContentResultWithContentTypeAutoDetection(HttpClient httpCl\n         });\n     }\n \n+    /**\n+     * Verifies blank form file is still a valid file to process\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeContentResultWithBlankPdf(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        SyncPoller<OperationResult, List<FormPage>> syncPoller =\n+            client.beginRecognizeContent(getReplayableBufferData(BLANK_FORM_LOCAL_URL), BLANK_FORM_FILE_LENGTH,\n+                FormContentType.APPLICATION_PDF, null).getSyncPoller();\n+        syncPoller.waitForCompletion();\n+        validateContentResultData(syncPoller.getFinalResult(), false);\n+    }\n+\n+    /**\n+     * Verifies throwing exception when using bad content type argument\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeBadContentTypeArgument(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+//        Exception ex = assertThrows(RuntimeException.class, () -> client.beginRecognizeContent(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 221}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTU3MDQxOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0Mjo0NVrOGn5zaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0Mjo0NVrOGn5zaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5NDY5Nw==", "bodyText": "Need to fix something here?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r444494697", "createdAt": "2020-06-23T20:42:45Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -210,6 +300,55 @@ public void recognizeContentResultWithContentTypeAutoDetection(HttpClient httpCl\n         });\n     }\n \n+    /**\n+     * Verifies blank form file is still a valid file to process\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeContentResultWithBlankPdf(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        SyncPoller<OperationResult, List<FormPage>> syncPoller =\n+            client.beginRecognizeContent(getReplayableBufferData(BLANK_FORM_LOCAL_URL), BLANK_FORM_FILE_LENGTH,\n+                FormContentType.APPLICATION_PDF, null).getSyncPoller();\n+        syncPoller.waitForCompletion();\n+        validateContentResultData(syncPoller.getFinalResult(), false);\n+    }\n+\n+    /**\n+     * Verifies throwing exception when using bad content type argument\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeBadContentTypeArgument(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+//        Exception ex = assertThrows(RuntimeException.class, () -> client.beginRecognizeContent(\n+//            getReplayableBufferData(BLANK_FORM_LOCAL_URL), BLANK_FORM_FILE_LENGTH,\n+//            FormContentType.APPLICATION_PDF, null).getSyncPoller());\n+        // TODO: this should throw exception, probably we don't have the pre-check for the FormContentType", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 224}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTU3NTEwOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0NDoxM1rOGn52XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0NDoxM1rOGn52XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5NTQ1Mw==", "bodyText": "Can this supplier give both jpg form data and length?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r444495453", "createdAt": "2020-06-23T20:44:13Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -277,11 +445,78 @@ public void recognizeCustomFormLabeledData(HttpClient httpClient, FormRecognizer\n     }\n \n     /**\n-     * Verifies an exception thrown for a document using null data value or null model id.\n+     * Verifies custom form data for a JPG content type with labeled data\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithJpgContentType(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormJpgDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 335}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTU3OTg2OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0NTo0MlrOGn55Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0NTo0MlrOGn55Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5NjIyMw==", "bodyText": "No need to train if test is to check for null model Id?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r444496223", "createdAt": "2020-06-23T20:45:42Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -293,12 +528,72 @@ public void recognizeCustomFormLabeledDataWithNullValues(HttpClient httpClient,\n             assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(null,\n                 syncPoller.getFinalResult().getModelId(), CUSTOM_FORM_FILE_LENGTH, FormContentType.APPLICATION_PDF,\n                 true, null).getSyncPoller());\n+        }));\n+    }\n+\n+    /**\n+     * Verifies an exception thrown for a document using null model id.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithNullModelId(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> syncPoller =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 420}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTU4MTYwOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0NjoxOFrOGn56fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0NjoxOFrOGn56fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5NjUwOA==", "bodyText": "Same here. No need to train, if we are not going to use the training result.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r444496508", "createdAt": "2020-06-23T20:46:18Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -293,12 +528,72 @@ public void recognizeCustomFormLabeledDataWithNullValues(HttpClient httpClient,\n             assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(null,\n                 syncPoller.getFinalResult().getModelId(), CUSTOM_FORM_FILE_LENGTH, FormContentType.APPLICATION_PDF,\n                 true, null).getSyncPoller());\n+        }));\n+    }\n+\n+    /**\n+     * Verifies an exception thrown for a document using null model id.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithNullModelId(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n+                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                    useTrainingLabels).getSyncPoller();\n+            syncPoller.waitForCompletion();\n+\n+            Exception ex = assertThrows(RuntimeException.class, () ->\n+                client.beginRecognizeCustomForms(toFluxByteBuffer(data), null,\n+                CUSTOM_FORM_FILE_LENGTH, FormContentType.APPLICATION_PDF, true, null)\n+                    .getSyncPoller());\n+            assertEquals(EXPECTED_MODEL_ID_IS_REQUIRED_EXCEPTION_MESSAGE, ex.getMessage());\n+        }));\n+    }\n+\n+    /**\n+     * Verifies an exception thrown for an empty model id when recognizing custom form from URL.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithEmptyModelId(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> syncPoller =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 442}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTU5MDcyOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0OTowMlrOGn6AbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo0OTowMlrOGn6AbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ5ODAyOA==", "bodyText": "updatethese  to use the public API's in the tests and not the package private APIs.\nApplies to all test methods.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r444498028", "createdAt": "2020-06-23T20:49:02Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -316,12 +611,37 @@ public void recognizeCustomFormLabeledDataWithContentTypeAutoDetection(HttpClien\n \n             SyncPoller<OperationResult, List<RecognizedForm>> syncPoller =\n                 client.beginRecognizeCustomForms(getReplayableBufferData(FORM_LOCAL_URL),\n-                    trainingPoller.getFinalResult().getModelId(), CUSTOM_FORM_FILE_LENGTH, null, true, null).getSyncPoller();\n+                    trainingPoller.getFinalResult().getModelId(), CUSTOM_FORM_FILE_LENGTH, null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 483}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTYyNDQ3OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo1NzoyMFrOGn6Xxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo1NzoyMFrOGn6Xxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwNDAwNg==", "bodyText": "recognizeReceiptDataTextDetailsWithNullData -> recognizeReceiptDataNullData\n?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r444504006", "createdAt": "2020-06-23T20:57:20Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -274,29 +284,58 @@ private static void validatePageRangeData(int expectedPageInfo, FormPageRange ac\n         assertEquals(expectedPageInfo, actualPageInfo.getLastPageNumber());\n     }\n \n+    // Receipt recognition\n+\n     @Test\n-    abstract void recognizeReceiptSourceUrl(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion);\n+    abstract void recognizeReceiptData(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion);\n \n     @Test\n-    abstract void recognizeReceiptSourceUrlTextDetails(HttpClient httpClient,\n+    abstract void recognizeReceiptDataTextDetailsWithNullData(HttpClient httpClient,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTYyODAyOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo1ODoyOFrOGn6aDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMDo1ODoyOFrOGn6aDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwNDU4OA==", "bodyText": "recognizeReceiptSourceUrlTextDetails -> recognizeReceiptFromUrlTextContent", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r444504588", "createdAt": "2020-06-23T20:58:28Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -274,29 +284,58 @@ private static void validatePageRangeData(int expectedPageInfo, FormPageRange ac\n         assertEquals(expectedPageInfo, actualPageInfo.getLastPageNumber());\n     }\n \n+    // Receipt recognition\n+\n     @Test\n-    abstract void recognizeReceiptSourceUrl(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion);\n+    abstract void recognizeReceiptData(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion);\n \n     @Test\n-    abstract void recognizeReceiptSourceUrlTextDetails(HttpClient httpClient,\n+    abstract void recognizeReceiptDataTextDetailsWithNullData(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion);\n \n     @Test\n-    abstract void recognizeReceiptData(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion);\n+    abstract void recognizeReceiptDataWithContentTypeAutoDetection(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion);\n \n     // Turn off the tests as there is service regression on the media type.\n     // Issue link: https://github.com/Azure/azure-sdk-for-java/issues/11036\n     // @Test\n     // abstract void recognizeReceiptDataTextDetails(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion);\n \n     @Test\n-    abstract void recognizeReceiptDataTextDetailsWithNullData(HttpClient httpClient,\n+    abstract void recognizeReceiptDataWithPngFile(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion);\n \n     @Test\n-    abstract void recognizeReceiptDataWithContentTypeAutoDetection(HttpClient httpClient,\n+    abstract void recognizeReceiptDataWithBlankPdf(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion);\n \n+    @Test\n+    abstract void recognizeReceiptFromDataMultiPage(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion);\n+\n+    // Receipt - URL\n+\n+    @Test\n+    abstract void recognizeReceiptSourceUrl(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion);\n+\n+    @Test\n+    abstract void recognizeReceiptInvalidSourceUrl(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion);\n+\n+    @Test\n+    abstract void recognizeReceiptSourceUrlTextDetails(HttpClient httpClient,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 81}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTY0Nzk5OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/resources/session-records/recognizeCustomFormFromUrlLabeledDataWithNullValues.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTowNDozNFrOGn6mbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNDozNTozN1rOGpTZRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwNzc1OQ==", "bodyText": "No test case with this name?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r444507759", "createdAt": "2020-06-23T21:04:34Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/resources/session-records/recognizeCustomFormFromUrlLabeledDataWithNullValues.json", "diffHunk": "@@ -0,0 +1,44 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk2MjU2Nw==", "bodyText": "deleted", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445962567", "createdAt": "2020-06-26T04:35:37Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/resources/session-records/recognizeCustomFormFromUrlLabeledDataWithNullValues.json", "diffHunk": "@@ -0,0 +1,44 @@\n+{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwNzc1OQ=="}, "originalCommit": {"oid": "d24722074a1e4cbb8d3f43219e07a9f96ff7a02a"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODg3OTQxOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoxMToxOFrOGpU2Zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoxMToxOFrOGpU2Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4NjQwNg==", "bodyText": "let's update all the includeTextDetails references to includeTextContent", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445986406", "createdAt": "2020-06-26T06:11:18Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -171,17 +208,66 @@ public void recognizeReceiptInvalidSourceUrl(HttpClient httpClient, FormRecogniz\n             () -> client.beginRecognizeReceiptsFromUrl(sourceUrl).getSyncPoller()));\n     }\n \n+    /**\n+     * Verifies receipt data for a document using source as file url and include content when includeTextDetails is\n+     * true.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeReceiptFromUrlTextContent(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        receiptSourceUrlRunnerTextDetails((sourceUrl, includeTextDetails) -> {\n+            SyncPoller<OperationResult, List<RecognizedReceipt>> syncPoller = client.beginRecognizeReceiptsFromUrl(\n+                new RecognizeOptions(sourceUrl).setIncludeTextContent(includeTextDetails)).getSyncPoller();\n+            syncPoller.waitForCompletion();\n+            validateReceiptResultData(syncPoller.getFinalResult(), includeTextDetails);\n+        });\n+    }\n+\n+    /**\n+     * Verifies receipt data for a document using source as PNG file url and include content when includeTextDetails is\n+     * true.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeReceiptSourceUrlWithPngFile(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        receiptPngSourceUrlRunnerTextDetails((sourceUrl, includeTextDetails) -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 184}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODg4MzQxOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoxMzoxOVrOGpU42w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoxMzoxOVrOGpU42w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4NzAzNQ==", "bodyText": "nit: this would by default be false so no need to set.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445987035", "createdAt": "2020-06-26T06:13:19Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -241,73 +368,189 @@ public void recognizeContentInvalidSourceUrl(HttpClient httpClient, FormRecogniz\n             () -> client.beginRecognizeContentFromUrl(invalidSourceUrl).getSyncPoller()));\n     }\n \n-    /**\n-     * Verifies that an exception is thrown for invalid status model Id.\n-     */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeCustomFormInvalidSourceUrl(HttpClient httpClient,\n-        FormRecognizerServiceVersion serviceVersion) {\n+    public void recognizeContentFromUrlMultiPage(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n-            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n-                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n-                    useTrainingLabels).getSyncPoller();\n+        multipageFromUrlRunner((fileUrl) -> {\n+            SyncPoller<OperationResult, List<FormPage>> syncPoller =\n+                client.beginRecognizeContentFromUrl(fileUrl).getSyncPoller();\n             syncPoller.waitForCompletion();\n-            CustomFormModel createdModel = syncPoller.getFinalResult();\n-            StepVerifier.create(client.beginRecognizeCustomFormsFromUrl(INVALID_URL, createdModel.getModelId()))\n-                .verifyErrorSatisfies(throwable -> assertEquals(throwable.getMessage(), INVALID_SOURCE_URL_ERROR));\n+            validateContentResultData(syncPoller.getFinalResult(), false);\n         });\n     }\n \n+    // Custom form recognition\n+\n+    // Custom form - non-URL - labeled data\n+\n     /**\n      * Verifies custom form data for a document using source as input stream data and valid labeled model Id.\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n     public void recognizeCustomFormLabeledData(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n             SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n                 getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n                     useTrainingLabels).getSyncPoller();\n             trainingPoller.waitForCompletion();\n \n             SyncPoller<OperationResult, List<RecognizedForm>> syncPoller =\n                 client.beginRecognizeCustomForms(new RecognizeCustomFormsOptions(toFluxByteBuffer(data),\n-                    CUSTOM_FORM_FILE_LENGTH, trainingPoller.getFinalResult().getModelId())\n+                    dataLength, trainingPoller.getFinalResult().getModelId())\n                     .setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(true)).getSyncPoller();\n             syncPoller.waitForCompletion();\n             validateRecognizedResult(syncPoller.getFinalResult(), true, true);\n         }));\n     }\n \n     /**\n-     * Verifies an exception thrown for a document using null data value or null model id.\n+     * Verifies custom form data for a JPG content type with labeled data\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeCustomFormLabeledDataWithNullValues(HttpClient httpClient,\n+    public void recognizeCustomFormLabeledDataWithJpgContentType(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n-            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n+        customFormJpgDataRunner((data, dataLength) ->\n+            beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+                SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                    getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                        useTrainingLabels).getSyncPoller();\n+                trainingPoller.waitForCompletion();\n+\n+                SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                    new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                        trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.IMAGE_JPEG)\n+                        .setIncludeTextContent(false)).getSyncPoller();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 380}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODg4OTQwOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoxNjoxNFrOGpU8cQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNTo1NzoyNFrOGpmKXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4Nzk1Mw==", "bodyText": "@maririos @kristapratico Wanted to confirm the exception we are throwing when an empty model Id is passed in respective languages", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445987953", "createdAt": "2020-06-26T06:16:14Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -241,73 +368,189 @@ public void recognizeContentInvalidSourceUrl(HttpClient httpClient, FormRecogniz\n             () -> client.beginRecognizeContentFromUrl(invalidSourceUrl).getSyncPoller()));\n     }\n \n-    /**\n-     * Verifies that an exception is thrown for invalid status model Id.\n-     */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeCustomFormInvalidSourceUrl(HttpClient httpClient,\n-        FormRecognizerServiceVersion serviceVersion) {\n+    public void recognizeContentFromUrlMultiPage(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n-            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n-                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n-                    useTrainingLabels).getSyncPoller();\n+        multipageFromUrlRunner((fileUrl) -> {\n+            SyncPoller<OperationResult, List<FormPage>> syncPoller =\n+                client.beginRecognizeContentFromUrl(fileUrl).getSyncPoller();\n             syncPoller.waitForCompletion();\n-            CustomFormModel createdModel = syncPoller.getFinalResult();\n-            StepVerifier.create(client.beginRecognizeCustomFormsFromUrl(INVALID_URL, createdModel.getModelId()))\n-                .verifyErrorSatisfies(throwable -> assertEquals(throwable.getMessage(), INVALID_SOURCE_URL_ERROR));\n+            validateContentResultData(syncPoller.getFinalResult(), false);\n         });\n     }\n \n+    // Custom form recognition\n+\n+    // Custom form - non-URL - labeled data\n+\n     /**\n      * Verifies custom form data for a document using source as input stream data and valid labeled model Id.\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n     public void recognizeCustomFormLabeledData(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n             SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n                 getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n                     useTrainingLabels).getSyncPoller();\n             trainingPoller.waitForCompletion();\n \n             SyncPoller<OperationResult, List<RecognizedForm>> syncPoller =\n                 client.beginRecognizeCustomForms(new RecognizeCustomFormsOptions(toFluxByteBuffer(data),\n-                    CUSTOM_FORM_FILE_LENGTH, trainingPoller.getFinalResult().getModelId())\n+                    dataLength, trainingPoller.getFinalResult().getModelId())\n                     .setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(true)).getSyncPoller();\n             syncPoller.waitForCompletion();\n             validateRecognizedResult(syncPoller.getFinalResult(), true, true);\n         }));\n     }\n \n     /**\n-     * Verifies an exception thrown for a document using null data value or null model id.\n+     * Verifies custom form data for a JPG content type with labeled data\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeCustomFormLabeledDataWithNullValues(HttpClient httpClient,\n+    public void recognizeCustomFormLabeledDataWithJpgContentType(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n-            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n+        customFormJpgDataRunner((data, dataLength) ->\n+            beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+                SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                    getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                        useTrainingLabels).getSyncPoller();\n+                trainingPoller.waitForCompletion();\n+\n+                SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                    new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                        trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.IMAGE_JPEG)\n+                        .setIncludeTextContent(false)).getSyncPoller();\n+                syncPoller.waitForCompletion();\n+                validateRecognizedResult(syncPoller.getFinalResult(), false, true);\n+            }));\n+    }\n+\n+    /**\n+     * Verifies custom form data for a blank PDF content type with labeled data\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithBlankPdfContentType(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        blankPdfDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n                 getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n                     useTrainingLabels).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                    trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n+                    .setIncludeTextContent(false)).getSyncPoller();\n             syncPoller.waitForCompletion();\n+            validateRecognizedResult(syncPoller.getFinalResult(), false, true);\n+        }));\n+    }\n \n-            assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n-                new RecognizeCustomFormsOptions((InputStream) null, CUSTOM_FORM_FILE_LENGTH,\n-                    syncPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n-                    .setIncludeTextContent(true)).getSyncPoller());\n+    /**\n+     * Verifies custom form data for a document using source as input stream data and valid labeled model Id,\n+     * excluding text content.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataExcludeTextContent(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                    useTrainingLabels).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                    trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n+                    .setIncludeTextContent(false)).getSyncPoller();\n+            syncPoller.waitForCompletion();\n+            validateRecognizedResult(syncPoller.getFinalResult(), false, true);\n+        }));\n+    }\n+\n+    /**\n+     * Verifies an exception thrown for a document using null data value.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithNullFormData(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n+                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                    useTrainingLabels).getSyncPoller();\n+            syncPoller.waitForCompletion();\n \n             assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n-                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), CUSTOM_FORM_FILE_LENGTH,\n-                    null).setFormContentType(FormContentType.APPLICATION_PDF)\n-                    .setIncludeTextContent(true)).getSyncPoller());\n+                new RecognizeCustomFormsOptions((InputStream) null, dataLength,\n+                syncPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n+                .setIncludeTextContent(true)).getSyncPoller());\n         }));\n     }\n \n+    /**\n+     * Verifies an exception thrown for a document using null model id.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithNullModelId(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> {\n+            Exception ex = assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                    null).setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(true))\n+                .getSyncPoller());\n+            assertEquals(EXPECTED_MODEL_ID_IS_REQUIRED_EXCEPTION_MESSAGE, ex.getMessage());\n+        });\n+    }\n+\n+    /**\n+     * Verifies an exception thrown for an empty model id when recognizing custom form from URL.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithEmptyModelId(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> {\n+            Exception ex = assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength, \"\")\n+                    .setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(true)).getSyncPoller());\n+            assertEquals(EXPECTED_INVALID_UUID_EXCEPTION_MESSAGE, ex.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 490}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI2ODQ1MA==", "bodyText": "For .NET, if modelId is null we throw ArgumentNullException if it is empty, we throw ArgumentException.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r446268450", "createdAt": "2020-06-26T15:54:43Z", "author": {"login": "maririos"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -241,73 +368,189 @@ public void recognizeContentInvalidSourceUrl(HttpClient httpClient, FormRecogniz\n             () -> client.beginRecognizeContentFromUrl(invalidSourceUrl).getSyncPoller()));\n     }\n \n-    /**\n-     * Verifies that an exception is thrown for invalid status model Id.\n-     */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeCustomFormInvalidSourceUrl(HttpClient httpClient,\n-        FormRecognizerServiceVersion serviceVersion) {\n+    public void recognizeContentFromUrlMultiPage(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n-            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n-                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n-                    useTrainingLabels).getSyncPoller();\n+        multipageFromUrlRunner((fileUrl) -> {\n+            SyncPoller<OperationResult, List<FormPage>> syncPoller =\n+                client.beginRecognizeContentFromUrl(fileUrl).getSyncPoller();\n             syncPoller.waitForCompletion();\n-            CustomFormModel createdModel = syncPoller.getFinalResult();\n-            StepVerifier.create(client.beginRecognizeCustomFormsFromUrl(INVALID_URL, createdModel.getModelId()))\n-                .verifyErrorSatisfies(throwable -> assertEquals(throwable.getMessage(), INVALID_SOURCE_URL_ERROR));\n+            validateContentResultData(syncPoller.getFinalResult(), false);\n         });\n     }\n \n+    // Custom form recognition\n+\n+    // Custom form - non-URL - labeled data\n+\n     /**\n      * Verifies custom form data for a document using source as input stream data and valid labeled model Id.\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n     public void recognizeCustomFormLabeledData(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n             SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n                 getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n                     useTrainingLabels).getSyncPoller();\n             trainingPoller.waitForCompletion();\n \n             SyncPoller<OperationResult, List<RecognizedForm>> syncPoller =\n                 client.beginRecognizeCustomForms(new RecognizeCustomFormsOptions(toFluxByteBuffer(data),\n-                    CUSTOM_FORM_FILE_LENGTH, trainingPoller.getFinalResult().getModelId())\n+                    dataLength, trainingPoller.getFinalResult().getModelId())\n                     .setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(true)).getSyncPoller();\n             syncPoller.waitForCompletion();\n             validateRecognizedResult(syncPoller.getFinalResult(), true, true);\n         }));\n     }\n \n     /**\n-     * Verifies an exception thrown for a document using null data value or null model id.\n+     * Verifies custom form data for a JPG content type with labeled data\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeCustomFormLabeledDataWithNullValues(HttpClient httpClient,\n+    public void recognizeCustomFormLabeledDataWithJpgContentType(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n-            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n+        customFormJpgDataRunner((data, dataLength) ->\n+            beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+                SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                    getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                        useTrainingLabels).getSyncPoller();\n+                trainingPoller.waitForCompletion();\n+\n+                SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                    new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                        trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.IMAGE_JPEG)\n+                        .setIncludeTextContent(false)).getSyncPoller();\n+                syncPoller.waitForCompletion();\n+                validateRecognizedResult(syncPoller.getFinalResult(), false, true);\n+            }));\n+    }\n+\n+    /**\n+     * Verifies custom form data for a blank PDF content type with labeled data\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithBlankPdfContentType(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        blankPdfDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n                 getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n                     useTrainingLabels).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                    trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n+                    .setIncludeTextContent(false)).getSyncPoller();\n             syncPoller.waitForCompletion();\n+            validateRecognizedResult(syncPoller.getFinalResult(), false, true);\n+        }));\n+    }\n \n-            assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n-                new RecognizeCustomFormsOptions((InputStream) null, CUSTOM_FORM_FILE_LENGTH,\n-                    syncPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n-                    .setIncludeTextContent(true)).getSyncPoller());\n+    /**\n+     * Verifies custom form data for a document using source as input stream data and valid labeled model Id,\n+     * excluding text content.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataExcludeTextContent(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                    useTrainingLabels).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                    trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n+                    .setIncludeTextContent(false)).getSyncPoller();\n+            syncPoller.waitForCompletion();\n+            validateRecognizedResult(syncPoller.getFinalResult(), false, true);\n+        }));\n+    }\n+\n+    /**\n+     * Verifies an exception thrown for a document using null data value.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithNullFormData(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n+                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                    useTrainingLabels).getSyncPoller();\n+            syncPoller.waitForCompletion();\n \n             assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n-                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), CUSTOM_FORM_FILE_LENGTH,\n-                    null).setFormContentType(FormContentType.APPLICATION_PDF)\n-                    .setIncludeTextContent(true)).getSyncPoller());\n+                new RecognizeCustomFormsOptions((InputStream) null, dataLength,\n+                syncPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n+                .setIncludeTextContent(true)).getSyncPoller());\n         }));\n     }\n \n+    /**\n+     * Verifies an exception thrown for a document using null model id.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithNullModelId(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> {\n+            Exception ex = assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                    null).setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(true))\n+                .getSyncPoller());\n+            assertEquals(EXPECTED_MODEL_ID_IS_REQUIRED_EXCEPTION_MESSAGE, ex.getMessage());\n+        });\n+    }\n+\n+    /**\n+     * Verifies an exception thrown for an empty model id when recognizing custom form from URL.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithEmptyModelId(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> {\n+            Exception ex = assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength, \"\")\n+                    .setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(true)).getSyncPoller());\n+            assertEquals(EXPECTED_INVALID_UUID_EXCEPTION_MESSAGE, ex.getMessage());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4Nzk1Mw=="}, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 490}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI3MDA0NA==", "bodyText": "For Python, this is a built-in exception - ValueError", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r446270044", "createdAt": "2020-06-26T15:57:24Z", "author": {"login": "kristapratico"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -241,73 +368,189 @@ public void recognizeContentInvalidSourceUrl(HttpClient httpClient, FormRecogniz\n             () -> client.beginRecognizeContentFromUrl(invalidSourceUrl).getSyncPoller()));\n     }\n \n-    /**\n-     * Verifies that an exception is thrown for invalid status model Id.\n-     */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeCustomFormInvalidSourceUrl(HttpClient httpClient,\n-        FormRecognizerServiceVersion serviceVersion) {\n+    public void recognizeContentFromUrlMultiPage(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n-            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n-                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n-                    useTrainingLabels).getSyncPoller();\n+        multipageFromUrlRunner((fileUrl) -> {\n+            SyncPoller<OperationResult, List<FormPage>> syncPoller =\n+                client.beginRecognizeContentFromUrl(fileUrl).getSyncPoller();\n             syncPoller.waitForCompletion();\n-            CustomFormModel createdModel = syncPoller.getFinalResult();\n-            StepVerifier.create(client.beginRecognizeCustomFormsFromUrl(INVALID_URL, createdModel.getModelId()))\n-                .verifyErrorSatisfies(throwable -> assertEquals(throwable.getMessage(), INVALID_SOURCE_URL_ERROR));\n+            validateContentResultData(syncPoller.getFinalResult(), false);\n         });\n     }\n \n+    // Custom form recognition\n+\n+    // Custom form - non-URL - labeled data\n+\n     /**\n      * Verifies custom form data for a document using source as input stream data and valid labeled model Id.\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n     public void recognizeCustomFormLabeledData(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n             SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n                 getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n                     useTrainingLabels).getSyncPoller();\n             trainingPoller.waitForCompletion();\n \n             SyncPoller<OperationResult, List<RecognizedForm>> syncPoller =\n                 client.beginRecognizeCustomForms(new RecognizeCustomFormsOptions(toFluxByteBuffer(data),\n-                    CUSTOM_FORM_FILE_LENGTH, trainingPoller.getFinalResult().getModelId())\n+                    dataLength, trainingPoller.getFinalResult().getModelId())\n                     .setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(true)).getSyncPoller();\n             syncPoller.waitForCompletion();\n             validateRecognizedResult(syncPoller.getFinalResult(), true, true);\n         }));\n     }\n \n     /**\n-     * Verifies an exception thrown for a document using null data value or null model id.\n+     * Verifies custom form data for a JPG content type with labeled data\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeCustomFormLabeledDataWithNullValues(HttpClient httpClient,\n+    public void recognizeCustomFormLabeledDataWithJpgContentType(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n-            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n+        customFormJpgDataRunner((data, dataLength) ->\n+            beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+                SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                    getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                        useTrainingLabels).getSyncPoller();\n+                trainingPoller.waitForCompletion();\n+\n+                SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                    new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                        trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.IMAGE_JPEG)\n+                        .setIncludeTextContent(false)).getSyncPoller();\n+                syncPoller.waitForCompletion();\n+                validateRecognizedResult(syncPoller.getFinalResult(), false, true);\n+            }));\n+    }\n+\n+    /**\n+     * Verifies custom form data for a blank PDF content type with labeled data\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithBlankPdfContentType(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        blankPdfDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n                 getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n                     useTrainingLabels).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                    trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n+                    .setIncludeTextContent(false)).getSyncPoller();\n             syncPoller.waitForCompletion();\n+            validateRecognizedResult(syncPoller.getFinalResult(), false, true);\n+        }));\n+    }\n \n-            assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n-                new RecognizeCustomFormsOptions((InputStream) null, CUSTOM_FORM_FILE_LENGTH,\n-                    syncPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n-                    .setIncludeTextContent(true)).getSyncPoller());\n+    /**\n+     * Verifies custom form data for a document using source as input stream data and valid labeled model Id,\n+     * excluding text content.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataExcludeTextContent(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                    useTrainingLabels).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                    trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n+                    .setIncludeTextContent(false)).getSyncPoller();\n+            syncPoller.waitForCompletion();\n+            validateRecognizedResult(syncPoller.getFinalResult(), false, true);\n+        }));\n+    }\n+\n+    /**\n+     * Verifies an exception thrown for a document using null data value.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithNullFormData(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> syncPoller =\n+                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                    useTrainingLabels).getSyncPoller();\n+            syncPoller.waitForCompletion();\n \n             assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n-                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), CUSTOM_FORM_FILE_LENGTH,\n-                    null).setFormContentType(FormContentType.APPLICATION_PDF)\n-                    .setIncludeTextContent(true)).getSyncPoller());\n+                new RecognizeCustomFormsOptions((InputStream) null, dataLength,\n+                syncPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n+                .setIncludeTextContent(true)).getSyncPoller());\n         }));\n     }\n \n+    /**\n+     * Verifies an exception thrown for a document using null model id.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithNullModelId(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> {\n+            Exception ex = assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                    null).setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(true))\n+                .getSyncPoller());\n+            assertEquals(EXPECTED_MODEL_ID_IS_REQUIRED_EXCEPTION_MESSAGE, ex.getMessage());\n+        });\n+    }\n+\n+    /**\n+     * Verifies an exception thrown for an empty model id when recognizing custom form from URL.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormLabeledDataWithEmptyModelId(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) -> {\n+            Exception ex = assertThrows(RuntimeException.class, () -> client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength, \"\")\n+                    .setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(true)).getSyncPoller());\n+            assertEquals(EXPECTED_INVALID_UUID_EXCEPTION_MESSAGE, ex.getMessage());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4Nzk1Mw=="}, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 490}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODg5MDM4OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoxNjo1MFrOGpU9Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoxNjo1MFrOGpU9Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4ODExNQ==", "bodyText": "This should be default if you don't set?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445988115", "createdAt": "2020-06-26T06:16:50Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -317,145 +560,346 @@ public void recognizeCustomFormLabeledDataWithNullValues(HttpClient httpClient,\n     public void recognizeCustomFormLabeledDataWithContentTypeAutoDetection(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n             SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n                 getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n                     useTrainingLabels).getSyncPoller();\n             trainingPoller.waitForCompletion();\n \n-            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller =\n-                client.beginRecognizeCustomForms(new RecognizeCustomFormsOptions(getReplayableBufferData(FORM_LOCAL_URL),\n-                    CUSTOM_FORM_FILE_LENGTH, trainingPoller.getFinalResult().getModelId()).setFormContentType(null)\n-                    .setIncludeTextContent(true)).getSyncPoller();\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(getReplayableBufferData(FORM_LOCAL_URL), dataLength,\n+                    trainingPoller.getFinalResult().getModelId())\n+                    .setFormContentType(null).setIncludeTextContent(true)).getSyncPoller();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 535}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODg5MjkxOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoxODowOVrOGpU-rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoxODowOVrOGpU-rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4ODUyNg==", "bodyText": "same here, don't need to set it to false. Would be false by default.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445988526", "createdAt": "2020-06-26T06:18:09Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerAsyncClientTest.java", "diffHunk": "@@ -317,145 +560,346 @@ public void recognizeCustomFormLabeledDataWithNullValues(HttpClient httpClient,\n     public void recognizeCustomFormLabeledDataWithContentTypeAutoDetection(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+        customFormDataRunner((data, dataLength) -> beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n             SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n                 getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n                     useTrainingLabels).getSyncPoller();\n             trainingPoller.waitForCompletion();\n \n-            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller =\n-                client.beginRecognizeCustomForms(new RecognizeCustomFormsOptions(getReplayableBufferData(FORM_LOCAL_URL),\n-                    CUSTOM_FORM_FILE_LENGTH, trainingPoller.getFinalResult().getModelId()).setFormContentType(null)\n-                    .setIncludeTextContent(true)).getSyncPoller();\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(getReplayableBufferData(FORM_LOCAL_URL), dataLength,\n+                    trainingPoller.getFinalResult().getModelId())\n+                    .setFormContentType(null).setIncludeTextContent(true)).getSyncPoller();\n             syncPoller.waitForCompletion();\n             validateRecognizedResult(syncPoller.getFinalResult(), true, true);\n         }));\n     }\n \n+    /**\n+     * Verify custom form for a data stream of multi-page labeled data\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormMultiPageLabeled(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        multipageFromDataRunner((data, dataLength) -> beginTrainingMultipageRunner((trainingFilesUrl) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                getFormTrainingAsyncClient(httpClient, serviceVersion)\n+                    .beginTraining(trainingFilesUrl, true).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                    trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF))\n+                .getSyncPoller();\n+            syncPoller.waitForCompletion();\n+            validateMultiPageDataLabeled(syncPoller.getFinalResult());\n+        }));\n+    }\n+\n+    // Custom form - non-URL - unlabeled data\n+\n     /**\n      * Verifies custom form data for a document using source as input stream data and valid labeled model Id.\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n     public void recognizeCustomFormUnlabeledData(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        customFormDataRunner(data -> beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+        customFormDataRunner((data, dataLength) ->\n+            beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+                SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                    getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                        useTrainingLabels).getSyncPoller();\n+                trainingPoller.waitForCompletion();\n+\n+                SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                    new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                        trainingPoller.getFinalResult().getModelId())\n+                        .setFormContentType(FormContentType.APPLICATION_PDF)\n+                        .setIncludeTextContent(false)).getSyncPoller();\n+                syncPoller.waitForCompletion();\n+                validateRecognizedResult(syncPoller.getFinalResult(), false, false);\n+            }));\n+    }\n+\n+    /**\n+     * Verifies custom form data for a document using source as input stream data and valid include text content\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormUnlabeledDataIncludeTextContent(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormDataRunner((data, dataLength) ->\n+            beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+                SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                    getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                        useTrainingLabels).getSyncPoller();\n+                trainingPoller.waitForCompletion();\n+\n+                SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                    new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                        trainingPoller.getFinalResult().getModelId())\n+                        .setFormContentType(FormContentType.APPLICATION_PDF)\n+                        .setIncludeTextContent(true)).getSyncPoller();\n+                syncPoller.waitForCompletion();\n+                validateRecognizedResult(syncPoller.getFinalResult(), true, false);\n+            }));\n+    }\n+\n+    /**\n+     * Verify custom form for a data stream of multi-page unlabeled data\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormMultiPageUnlabeled(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        multipageFromDataRunner((data, dataLength) -> beginTrainingMultipageRunner((trainingFilesUrl) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                getFormTrainingAsyncClient(httpClient, serviceVersion)\n+                    .beginTraining(trainingFilesUrl, false).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                toFluxByteBuffer(data), dataLength, trainingPoller.getFinalResult().getModelId(),\n+                FormContentType.APPLICATION_PDF).getSyncPoller();\n+            syncPoller.waitForCompletion();\n+            validateMultiPageDataUnlabeled(syncPoller.getFinalResult());\n+        }));\n+    }\n+\n+    /**\n+     * Verifies custom form data for a JPG content type with unlabeled data\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormUnlabeledDataWithJpgContentType(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        customFormJpgDataRunner((data, dataLength) ->\n+            beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+                SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                    getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                        useTrainingLabels).getSyncPoller();\n+                trainingPoller.waitForCompletion();\n+\n+                SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                    new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n+                        trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.IMAGE_JPEG)\n+                        .setIncludeTextContent(false)).getSyncPoller();\n+                syncPoller.waitForCompletion();\n+                validateRecognizedResult(syncPoller.getFinalResult(), false, false);\n+            }));\n+    }\n+\n+    /**\n+     * Verifies custom form data for a blank PDF content type with unlabeled data\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeCustomFormUnlabeledDataWithBlankPdfContentType(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n+        blankPdfDataRunner((data, dataLength) -> beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n             SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n                 getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n                     useTrainingLabels).getSyncPoller();\n             trainingPoller.waitForCompletion();\n \n-            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller =\n-                client.beginRecognizeCustomForms(new RecognizeCustomFormsOptions(toFluxByteBuffer(data), CUSTOM_FORM_FILE_LENGTH,\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(toFluxByteBuffer(data), dataLength,\n                     trainingPoller.getFinalResult().getModelId()).setFormContentType(FormContentType.APPLICATION_PDF)\n                     .setIncludeTextContent(false)).getSyncPoller();\n             syncPoller.waitForCompletion();\n             validateRecognizedResult(syncPoller.getFinalResult(), false, false);\n         }));\n     }\n \n+    // Custom form - URL - unlabeled data\n+\n+    /**\n+     * Verifies custom form data for an URL document data without labeled data\n+     */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeCustomFormMultiPageUnlabeled(HttpClient httpClient,\n+    public void recognizeCustomFormUrlUnlabeledData(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerAsyncClient(httpClient, serviceVersion);\n-        multipageFromDataRunner(data -> beginTrainingMultipageRunner((trainingFilesUrl) -> {\n+\n+        urlDataRunner(fileUrl -> beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n             SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n-                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl, false).getSyncPoller();\n+                getFormTrainingAsyncClient(httpClient, serviceVersion).beginTraining(trainingFilesUrl,\n+                    useTrainingLabels).getSyncPoller();\n             trainingPoller.waitForCompletion();\n \n-            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller =\n-                client.beginRecognizeCustomForms(toFluxByteBuffer(data), MULTIPAGE_INVOICE_FILE_LENGTH, trainingPoller.getFinalResult().getModelId(),\n-                        FormContentType.APPLICATION_PDF).getSyncPoller();\n+            SyncPoller<OperationResult, List<RecognizedForm>> syncPoller = client.beginRecognizeCustomForms(\n+                new RecognizeCustomFormsOptions(fileUrl, trainingPoller.getFinalResult().getModelId())\n+                    .setIncludeTextContent(false)).getSyncPoller();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 712}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODg5OTE2OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoyMTozM1rOGpVCkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoyMTozM1rOGpVCkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTUyMg==", "bodyText": "Can you uncomment this, I think I missed updating this when I updated the FormRcognizerAsyncClientTests file?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445989522", "createdAt": "2020-06-26T06:21:33Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTest.java", "diffHunk": "@@ -51,109 +54,205 @@ private FormTrainingClient getFormTrainingClient(HttpClient httpClient,\n         return getFormTrainingClientBuilder(httpClient, serviceVersion).buildClient();\n     }\n \n+    // Receipt recognition\n+\n+    // Receipt - non-URL\n+\n     /**\n-     * Verifies receipt data for a document using source as file url.\n+     * Verifies receipt data for a document using source as input stream data.\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeReceiptSourceUrl(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+    public void recognizeReceiptData(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerClient(httpClient, serviceVersion);\n-        receiptSourceUrlRunner((sourceUrl) -> {\n+        receiptDataRunner((data, dataLength) -> {\n             SyncPoller<OperationResult, List<RecognizedReceipt>> syncPoller =\n-                client.beginRecognizeReceiptsFromUrl(sourceUrl);\n+                client.beginRecognizeReceipts(data, dataLength, FormContentType.IMAGE_JPEG);\n             syncPoller.waitForCompletion();\n             validateReceiptResultData(syncPoller.getFinalResult(), false);\n         });\n     }\n \n     /**\n-     * Verifies receipt data for a document using source as file url and include content when includeTextContent is\n-     * true.\n+     * Verifies an exception thrown for a document using null data value.\n      */\n     @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n     @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n-    public void recognizeReceiptSourceUrlTextDetails(HttpClient httpClient,\n+    public void recognizeReceiptDataNullData(HttpClient httpClient,\n         FormRecognizerServiceVersion serviceVersion) {\n         client = getFormRecognizerClient(httpClient, serviceVersion);\n-        receiptSourceUrlRunnerTextDetails((sourceUrl, includeTextContent) -> {\n+        assertThrows(RuntimeException.class, () ->\n+            client.beginRecognizeReceipts(null, RECEIPT_FILE_LENGTH, FormContentType.IMAGE_JPEG));\n+    }\n+\n+    /**\n+     * Verifies content type will be auto detected when using receipt API with input stream data overload.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void recognizeReceiptDataWithContentTypeAutoDetection(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormRecognizerClient(httpClient, serviceVersion);\n+        SyncPoller<OperationResult, List<RecognizedReceipt>> syncPoller =\n+            client.beginRecognizeReceipts(getContentDetectionFileData(RECEIPT_LOCAL_URL), RECEIPT_FILE_LENGTH,\n+                null);\n+        syncPoller.waitForCompletion();\n+        validateReceiptResultData(syncPoller.getFinalResult(), false);\n+    }\n+\n+    /**\n+     * Verifies receipt data for a document using source as as input stream data and text content when\n+     * includeTextDetails is true.\n+     */\n+    // Turn off the tests as there is service regression on the media type.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODkxMTk2OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoyNzo1NFrOGpVKjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwMzo0NjoyOFrOGp6Dvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MTU2Nw==", "bodyText": "Names seems to be misleading. Is this a urlRunner or a dataRunner?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445991567", "createdAt": "2020-06-26T06:27:54Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -481,11 +623,35 @@ void contentFromUrlRunner(Consumer<String> testRunner) {\n         testRunner.accept(getStorageTestingFileUrl(FORM_JPG));\n     }\n \n-    void customFormDataRunner(Consumer<InputStream> testRunner) {\n+    void pdfContentFromUrlRunner(Consumer<String> testRunner) {\n+        testRunner.accept(getStorageTestingFileUrl(INVOICE_1_PDF));\n+    }\n+\n+    void customFormDataRunner(BiConsumer<InputStream, Long> testRunner) {\n+        if (interceptorManager.isPlaybackMode()) {\n+            testRunner.accept(new ByteArrayInputStream(\"testData.png\".getBytes()), CUSTOM_FORM_FILE_LENGTH);\n+        } else {\n+            testRunner.accept(getFileData(getStorageTestingFileUrl(INVOICE_PDF)), CUSTOM_FORM_FILE_LENGTH);\n+        }\n+    }\n+\n+    void customFormJpgDataRunner(BiConsumer<InputStream, Long> testRunner) {\n+        if (interceptorManager.isPlaybackMode()) {\n+            testRunner.accept(new ByteArrayInputStream(\"testData.png\".getBytes()), FORM_1_JPG_FILE_LENGTH);\n+        } else {\n+            testRunner.accept(getFileData(getStorageTestingFileUrl(FORM_JPG)), FORM_1_JPG_FILE_LENGTH);\n+        }\n+    }\n+\n+    void urlDataRunner(Consumer<String> testRunner, String formData) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 340}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU5NjAzMA==", "bodyText": "urlRunner", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r446596030", "createdAt": "2020-06-28T03:46:28Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientTestBase.java", "diffHunk": "@@ -481,11 +623,35 @@ void contentFromUrlRunner(Consumer<String> testRunner) {\n         testRunner.accept(getStorageTestingFileUrl(FORM_JPG));\n     }\n \n-    void customFormDataRunner(Consumer<InputStream> testRunner) {\n+    void pdfContentFromUrlRunner(Consumer<String> testRunner) {\n+        testRunner.accept(getStorageTestingFileUrl(INVOICE_1_PDF));\n+    }\n+\n+    void customFormDataRunner(BiConsumer<InputStream, Long> testRunner) {\n+        if (interceptorManager.isPlaybackMode()) {\n+            testRunner.accept(new ByteArrayInputStream(\"testData.png\".getBytes()), CUSTOM_FORM_FILE_LENGTH);\n+        } else {\n+            testRunner.accept(getFileData(getStorageTestingFileUrl(INVOICE_PDF)), CUSTOM_FORM_FILE_LENGTH);\n+        }\n+    }\n+\n+    void customFormJpgDataRunner(BiConsumer<InputStream, Long> testRunner) {\n+        if (interceptorManager.isPlaybackMode()) {\n+            testRunner.accept(new ByteArrayInputStream(\"testData.png\".getBytes()), FORM_1_JPG_FILE_LENGTH);\n+        } else {\n+            testRunner.accept(getFileData(getStorageTestingFileUrl(FORM_JPG)), FORM_1_JPG_FILE_LENGTH);\n+        }\n+    }\n+\n+    void urlDataRunner(Consumer<String> testRunner, String formData) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MTU2Nw=="}, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 340}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODkxNDQ0OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjoyOTowM1rOGpVMEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQwMzo1MToyM1rOGp6FIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MTk1Mg==", "bodyText": "validateBlankPdfResultData() is this method is only specific to Receipt result lets update it to validateBlankReceiptResult() ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445991952", "createdAt": "2020-06-26T06:29:03Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientTest.java", "diffHunk": "@@ -54,6 +61,25 @@ private FormTrainingAsyncClient getFormTrainingAsyncClient(HttpClient httpClient\n         return getFormTrainingClientBuilder(httpClient, serviceVersion).buildAsyncClient();\n     }\n \n+    /**\n+     * Verifies the form recognizer async client is valid.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    void getFormRecognizerClientAndValidate(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        FormRecognizerAsyncClient formRecognizerClient = getFormTrainingAsyncClient(httpClient, serviceVersion)\n+            .getFormRecognizerAsyncClient();\n+        blankPdfDataRunner(data -> {\n+            SyncPoller<OperationResult, List<RecognizedReceipt>> syncPoller =\n+                formRecognizerClient.beginRecognizeReceipts(\n+                    new RecognizeOptions(toFluxByteBuffer(data), BLANK_FORM_FILE_LENGTH)\n+                        .setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(false))\n+                    .getSyncPoller();\n+            syncPoller.waitForCompletion();\n+            validateBlankPdfResultData(syncPoller.getFinalResult());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU5NjM4NA==", "bodyText": "Receipt and Custom both have the Blank PDF test. So I think we should be restricted to Receipt", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r446596384", "createdAt": "2020-06-28T03:51:23Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientTest.java", "diffHunk": "@@ -54,6 +61,25 @@ private FormTrainingAsyncClient getFormTrainingAsyncClient(HttpClient httpClient\n         return getFormTrainingClientBuilder(httpClient, serviceVersion).buildAsyncClient();\n     }\n \n+    /**\n+     * Verifies the form recognizer async client is valid.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    void getFormRecognizerClientAndValidate(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        FormRecognizerAsyncClient formRecognizerClient = getFormTrainingAsyncClient(httpClient, serviceVersion)\n+            .getFormRecognizerAsyncClient();\n+        blankPdfDataRunner(data -> {\n+            SyncPoller<OperationResult, List<RecognizedReceipt>> syncPoller =\n+                formRecognizerClient.beginRecognizeReceipts(\n+                    new RecognizeOptions(toFluxByteBuffer(data), BLANK_FORM_FILE_LENGTH)\n+                        .setFormContentType(FormContentType.APPLICATION_PDF).setIncludeTextContent(false))\n+                    .getSyncPoller();\n+            syncPoller.waitForCompletion();\n+            validateBlankPdfResultData(syncPoller.getFinalResult());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MTk1Mg=="}, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODkxNjkyOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjozMDoxOFrOGpVNlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNjo1MDoxOFrOGpn24Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MjM0MQ==", "bodyText": "Is this just a rename change?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445992341", "createdAt": "2020-06-26T06:30:18Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientTest.java", "diffHunk": "@@ -357,4 +353,103 @@ public void beginTrainingInvalidModelStatus(HttpClient httpClient, FormRecognize\n             assertTrue(formRecognizerException.getMessage().contains(EXPECTED_INVALID_STATUS_EXCEPTION_MESSAGE));\n         });\n     }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and JPG training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithTrainingLabelsForJPGTrainingSet(HttpClient httpClient,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 101}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI5NzgyNQ==", "bodyText": "Yes. A rename change", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r446297825", "createdAt": "2020-06-26T16:50:18Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientTest.java", "diffHunk": "@@ -357,4 +353,103 @@ public void beginTrainingInvalidModelStatus(HttpClient httpClient, FormRecognize\n             assertTrue(formRecognizerException.getMessage().contains(EXPECTED_INVALID_STATUS_EXCEPTION_MESSAGE));\n         });\n     }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and JPG training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithTrainingLabelsForJPGTrainingSet(HttpClient httpClient,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MjM0MQ=="}, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 101}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODkyMDA1OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjozMToyMVrOGpVPUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjozMToyMVrOGpVPUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5Mjc4Nw==", "bodyText": ".setPrefix(SUBFOLDER) -> .setPrefix(PREFIX_SUBFOLDER) ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445992787", "createdAt": "2020-06-26T06:31:21Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingAsyncClientTest.java", "diffHunk": "@@ -357,4 +353,103 @@ public void beginTrainingInvalidModelStatus(HttpClient httpClient, FormRecognize\n             assertTrue(formRecognizerException.getMessage().contains(EXPECTED_INVALID_STATUS_EXCEPTION_MESSAGE));\n         });\n     }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and JPG training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithTrainingLabelsForJPGTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingAsyncClient(httpClient, serviceVersion);\n+        beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, useTrainingLabels).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), true);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid unlabeled model Id and JPG training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithoutTrainingLabelsForJPGTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingAsyncClient(httpClient, serviceVersion);\n+        beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, useTrainingLabels).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), false);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and multi-page PDF training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithTrainingLabelsForMultiPagePDFTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingAsyncClient(httpClient, serviceVersion);\n+        beginTrainingMultipageRunner(trainingFilesUrl -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, true).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), true);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid unlabeled model Id and multi-page PDF training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithoutTrainingLabelsForMultiPagePDFTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingAsyncClient(httpClient, serviceVersion);\n+        beginTrainingMultipageRunner(trainingFilesUrl -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, false).getSyncPoller();\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), false);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and include subfolder training set\n+     * Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithoutTrainingLabelsIncludeSubfolder(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingAsyncClient(httpClient, serviceVersion);\n+        beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller = client.beginTraining(trainingFilesUrl,\n+                useTrainingLabels, new TrainingFileFilter().setIncludeSubFolders(true).setPrefix(SUBFOLDER), null).getSyncPoller();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 171}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODkyNDM3OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientBuilderTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjozMzoyNlrOGpVR1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwMzo0MTo1NlrOGqDxSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MzQyOA==", "bodyText": "not  sure, if the test name is clear.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445993428", "createdAt": "2020-06-26T06:33:26Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientBuilderTest.java", "diffHunk": "@@ -84,6 +89,37 @@ public void trainingClientBuilderDefaultPipeline(HttpClient httpClient, FormReco\n             assertNotNull(clientBuilder.buildClient().getFormRecognizerClient().beginRecognizeContentFromUrl(input).getFinalResult()));\n     }\n \n+    /**\n+     * Test for invalid endpoint.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void trainingClientBuilderInvalidEndpoint(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        clientBuilderWithDefaultPipelineRunner(httpClient, serviceVersion, clientBuilder -> (input) -> {\n+            Exception exception =  assertThrows(RuntimeException.class, () ->\n+                clientBuilder.endpoint(INVALID_ENDPOINT).buildClient().getFormRecognizerClient()\n+                    .beginRecognizeContentFromUrl(input).getFinalResult());\n+            // \"Max retries 3 times exceeded. Error Details: Connection refused: no further information:\n+            // notreal.azure.com/23.217.138.110:443\"\n+            // Recording mode has Error Details: null\n+            assertTrue(exception.getMessage().contains(\"Max retries 3 times exceeded. Error Details:\"));\n+        });\n+    }\n+\n+    /**\n+     * Test for http endpoint, which throws HTTPS requirement exception message.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void trainingClientBuilderHttpEndpoint(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njc1NTE0Ng==", "bodyText": "this test renamed to httpsProtocolRequiredException and moved to TrainingClientBuilderUniteTest", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r446755146", "createdAt": "2020-06-29T03:41:56Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientBuilderTest.java", "diffHunk": "@@ -84,6 +89,37 @@ public void trainingClientBuilderDefaultPipeline(HttpClient httpClient, FormReco\n             assertNotNull(clientBuilder.buildClient().getFormRecognizerClient().beginRecognizeContentFromUrl(input).getFinalResult()));\n     }\n \n+    /**\n+     * Test for invalid endpoint.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void trainingClientBuilderInvalidEndpoint(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        clientBuilderWithDefaultPipelineRunner(httpClient, serviceVersion, clientBuilder -> (input) -> {\n+            Exception exception =  assertThrows(RuntimeException.class, () ->\n+                clientBuilder.endpoint(INVALID_ENDPOINT).buildClient().getFormRecognizerClient()\n+                    .beginRecognizeContentFromUrl(input).getFinalResult());\n+            // \"Max retries 3 times exceeded. Error Details: Connection refused: no further information:\n+            // notreal.azure.com/23.217.138.110:443\"\n+            // Recording mode has Error Details: null\n+            assertTrue(exception.getMessage().contains(\"Max retries 3 times exceeded. Error Details:\"));\n+        });\n+    }\n+\n+    /**\n+     * Test for http endpoint, which throws HTTPS requirement exception message.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void trainingClientBuilderHttpEndpoint(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MzQyOA=="}, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODkyNjYxOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjozNDozMVrOGpVTNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQyMjo1OTo0N1rOGqA9Zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5Mzc4MQ==", "bodyText": "Is there a separate test for when only the prefix is set?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445993781", "createdAt": "2020-06-26T06:34:31Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientTest.java", "diffHunk": "@@ -332,4 +326,103 @@ public void beginTrainingInvalidModelStatus(HttpClient httpClient, FormRecognize\n             assertTrue(formRecognizerException.getMessage().contains(EXPECTED_INVALID_STATUS_EXCEPTION_MESSAGE));\n         });\n     }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and JPG training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithTrainingLabelsForJPGTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingClient(httpClient, serviceVersion);\n+        beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, useTrainingLabels);\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), true);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid unlabeled model Id and JPG training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithoutTrainingLabelsForJPGTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingClient(httpClient, serviceVersion);\n+        beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, useTrainingLabels);\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), false);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and multi-page PDF training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithTrainingLabelsForMultiPagePDFTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingClient(httpClient, serviceVersion);\n+        beginTrainingMultipageRunner(trainingFilesUrl -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, true);\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), true);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid unlabeled model Id and multi-page PDF training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithoutTrainingLabelsForMultiPagePDFTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingClient(httpClient, serviceVersion);\n+        beginTrainingMultipageRunner(trainingFilesUrl -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, false);\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), false);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and include subfolder training set\n+     * Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithoutTrainingLabelsIncludeSubfolder(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingClient(httpClient, serviceVersion);\n+        beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller = client.beginTraining(trainingFilesUrl,\n+                useTrainingLabels, new TrainingFileFilter().setIncludeSubFolders(true).setPrefix(SUBFOLDER), null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 165}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjcwOTA5NQ==", "bodyText": "added", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r446709095", "createdAt": "2020-06-28T22:59:47Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientTest.java", "diffHunk": "@@ -332,4 +326,103 @@ public void beginTrainingInvalidModelStatus(HttpClient httpClient, FormRecognize\n             assertTrue(formRecognizerException.getMessage().contains(EXPECTED_INVALID_STATUS_EXCEPTION_MESSAGE));\n         });\n     }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and JPG training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithTrainingLabelsForJPGTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingClient(httpClient, serviceVersion);\n+        beginTrainingLabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, useTrainingLabels);\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), true);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid unlabeled model Id and JPG training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithoutTrainingLabelsForJPGTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingClient(httpClient, serviceVersion);\n+        beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, useTrainingLabels);\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), false);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and multi-page PDF training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithTrainingLabelsForMultiPagePDFTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingClient(httpClient, serviceVersion);\n+        beginTrainingMultipageRunner(trainingFilesUrl -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, true);\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), true);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid unlabeled model Id and multi-page PDF training set Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithoutTrainingLabelsForMultiPagePDFTrainingSet(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingClient(httpClient, serviceVersion);\n+        beginTrainingMultipageRunner(trainingFilesUrl -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller =\n+                client.beginTraining(trainingFilesUrl, false);\n+            trainingPoller.waitForCompletion();\n+            validateCustomModelData(trainingPoller.getFinalResult(), false);\n+        });\n+    }\n+\n+    /**\n+     * Verifies the result of the training operation for a valid labeled model Id and include subfolder training set\n+     * Url.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void beginTrainingWithoutTrainingLabelsIncludeSubfolder(HttpClient httpClient,\n+        FormRecognizerServiceVersion serviceVersion) {\n+        client = getFormTrainingClient(httpClient, serviceVersion);\n+        beginTrainingUnlabeledRunner((trainingFilesUrl, useTrainingLabels) -> {\n+            SyncPoller<OperationResult, CustomFormModel> trainingPoller = client.beginTraining(trainingFilesUrl,\n+                useTrainingLabels, new TrainingFileFilter().setIncludeSubFolders(true).setPrefix(SUBFOLDER), null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5Mzc4MQ=="}, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 165}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODkzMTk4OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/resources/session-records/clientBuilderWithHttpEndpoint.json", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjozNjozOFrOGpVWRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQyMToyNjozNVrOGqAasw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5NDU2Nw==", "bodyText": "Is this test for an invalid Http pipeline?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445994567", "createdAt": "2020-06-26T06:36:38Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/resources/session-records/clientBuilderWithHttpEndpoint.json", "diffHunk": "@@ -0,0 +1,4 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjcwMDIxMQ==", "bodyText": "move this test into BuilderUnitTest, Azure core requires https protocal: \"Key credentials require HTTPS to prevent leaking the key.\"", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r446700211", "createdAt": "2020-06-28T21:26:35Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/resources/session-records/clientBuilderWithHttpEndpoint.json", "diffHunk": "@@ -0,0 +1,4 @@\n+{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5NDU2Nw=="}, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODkzNTA0OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/resources/session-records/recognizeBadContentTypeArgument.json", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjozODowM1rOGpVYLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNjo1MTozMFrOGpn5PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5NTA1NQ==", "bodyText": "Is this test removed?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445995055", "createdAt": "2020-06-26T06:38:03Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/resources/session-records/recognizeBadContentTypeArgument.json", "diffHunk": "@@ -0,0 +1,4 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI5ODQyOA==", "bodyText": "Yes. It is removed. I will delete this record json file", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r446298428", "createdAt": "2020-06-26T16:51:30Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/resources/session-records/recognizeBadContentTypeArgument.json", "diffHunk": "@@ -0,0 +1,4 @@\n+{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5NTA1NQ=="}, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODk0MTUzOnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientBuilderTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNjo0MDo1M1rOGpVb_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo0NjoxMlrOGrxdJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5NjAyOA==", "bodyText": "Are you covering this as part of a different PR?\nUpdate to use default  5 seconds polling only in Live mode?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r445996028", "createdAt": "2020-06-26T06:40:53Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientBuilderTest.java", "diffHunk": "@@ -81,6 +85,33 @@ public void clientBuilderWithDefaultPipeline(HttpClient httpClient, FormRecogniz\n             assertNotNull(clientBuilder.buildClient().beginRecognizeContentFromUrl(input).getFinalResult()));\n     }\n \n+    /**\n+     * Test for invalid endpoint, which throws connection refused exception message.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void clientBuilderWithInvalidEndpoint(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1MjIyOQ==", "bodyText": "yes. covered in this PR. Speed up to around 3mins now", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r448552229", "createdAt": "2020-07-01T18:46:12Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormRecognizerClientBuilderTest.java", "diffHunk": "@@ -81,6 +85,33 @@ public void clientBuilderWithDefaultPipeline(HttpClient httpClient, FormRecogniz\n             assertNotNull(clientBuilder.buildClient().beginRecognizeContentFromUrl(input).getFinalResult()));\n     }\n \n+    /**\n+     * Test for invalid endpoint, which throws connection refused exception message.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void clientBuilderWithInvalidEndpoint(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5NjAyOA=="}, "originalCommit": {"oid": "1732307526903c46516af3347cf395cc5ed67db8"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc5NTc1MTg3OnYy", "diffSide": "RIGHT", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientBuilderTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo0ODo0NVrOGrxiFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo1MToyOFrOGrxnGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1MzQ5NA==", "bodyText": "Is the comment still true??", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r448553494", "createdAt": "2020-07-01T18:48:45Z", "author": {"login": "samvaity"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientBuilderTest.java", "diffHunk": "@@ -84,6 +86,23 @@ public void trainingClientBuilderDefaultPipeline(HttpClient httpClient, FormReco\n             assertNotNull(clientBuilder.buildClient().getFormRecognizerClient().beginRecognizeContentFromUrl(input).getFinalResult()));\n     }\n \n+    /**\n+     * Test for invalid endpoint.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void trainingClientBuilderInvalidEndpoint(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        clientBuilderWithDefaultPipelineRunner(httpClient, serviceVersion, clientBuilder -> (input) -> {\n+            Exception exception =  assertThrows(RuntimeException.class, () ->\n+                clientBuilder.endpoint(INVALID_ENDPOINT).buildClient().getFormRecognizerClient()\n+                    .beginRecognizeContentFromUrl(input).getFinalResult());\n+            // RECORD mode has \"Max retries 3 times exceeded. Error Details: Connection refused: no further information:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "371fcb8f4632ac21870495a6204e29aefe6d8e09"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1NDc3Nw==", "bodyText": "Yes", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12400#discussion_r448554777", "createdAt": "2020-07-01T18:51:28Z", "author": {"login": "mssfang"}, "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/test/java/com/azure/ai/formrecognizer/FormTrainingClientBuilderTest.java", "diffHunk": "@@ -84,6 +86,23 @@ public void trainingClientBuilderDefaultPipeline(HttpClient httpClient, FormReco\n             assertNotNull(clientBuilder.buildClient().getFormRecognizerClient().beginRecognizeContentFromUrl(input).getFinalResult()));\n     }\n \n+    /**\n+     * Test for invalid endpoint.\n+     */\n+    @ParameterizedTest(name = DISPLAY_NAME_WITH_ARGUMENTS)\n+    @MethodSource(\"com.azure.ai.formrecognizer.TestUtils#getTestParameters\")\n+    public void trainingClientBuilderInvalidEndpoint(HttpClient httpClient, FormRecognizerServiceVersion serviceVersion) {\n+        clientBuilderWithDefaultPipelineRunner(httpClient, serviceVersion, clientBuilder -> (input) -> {\n+            Exception exception =  assertThrows(RuntimeException.class, () ->\n+                clientBuilder.endpoint(INVALID_ENDPOINT).buildClient().getFormRecognizerClient()\n+                    .beginRecognizeContentFromUrl(input).getFinalResult());\n+            // RECORD mode has \"Max retries 3 times exceeded. Error Details: Connection refused: no further information:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1MzQ5NA=="}, "originalCommit": {"oid": "371fcb8f4632ac21870495a6204e29aefe6d8e09"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3818, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}