{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0ODY5MTcy", "number": 10313, "title": "Add TestWatcher to Print Testing Information", "bodyText": "This PR adds implementations of JUnit 5's before and after test extensions and creates an SPI that will be loaded during the test run. This follows the documentation here: https://junit.org/junit5/docs/5.0.1/user-guide/#extensions.", "createdAt": "2020-04-17T01:12:39Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313", "merged": true, "mergeCommit": {"oid": "e82d877fbae6cc9e137a57b811985b0239ad17ac"}, "closed": true, "closedAt": "2020-04-22T18:30:17Z", "author": {"login": "alzimmermsft"}, "timelineItems": {"totalCount": 26, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYWwbEAH2gAyNDA0ODY5MTcyOmU3YTZhZmNiMmU4MTIxMTk5ZmRlMWFmYjU4ZTYxMTZiYzRjNmE4OGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaMXR0AH2gAyNDA0ODY5MTcyOmQyNjA3MDM0NTcyYTc1ZmM3NTc5YTM5ZTc3OGNhNTI4NDM5MDU3YTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e7a6afcb2e8121199fde1afb58e6116bc4c6a88f", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e7a6afcb2e8121199fde1afb58e6116bc4c6a88f", "committedDate": "2020-04-17T01:11:04Z", "message": "Prototype for test watcher concept"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ff039760454936c51decc981d20587d85284781", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9ff039760454936c51decc981d20587d85284781", "committedDate": "2020-04-17T17:54:44Z", "message": "Added client parent and module-info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b687cdcf2973c23fe0118d40c05196d9d195cc5", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4b687cdcf2973c23fe0118d40c05196d9d195cc5", "committedDate": "2020-04-17T18:18:02Z", "message": "Small additional change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "798b968a5c3db199bbb67da89b30d13d71e2eb38", "author": {"user": {"login": "srnagar", "name": "Srikanta"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/798b968a5c3db199bbb67da89b30d13d71e2eb38", "committedDate": "2020-04-17T19:44:18Z", "message": "Make SPI work for test watcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f77f18fac7df46f08891e0f7abc0e87c6cfc4c0", "author": {"user": {"login": "srnagar", "name": "Srikanta"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9f77f18fac7df46f08891e0f7abc0e87c6cfc4c0", "committedDate": "2020-04-17T19:44:28Z", "message": "Merge remote-tracking branch 'upstream/master' into AzEng_TestWatcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6af28f7f99b26bc22ecf378732fcdbb050702da2", "author": {"user": {"login": "srnagar", "name": "Srikanta"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6af28f7f99b26bc22ecf378732fcdbb050702da2", "committedDate": "2020-04-17T19:46:19Z", "message": "Merge from master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NzI5NzI2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#pullrequestreview-395729726", "createdAt": "2020-04-17T19:48:27Z", "commit": {"oid": "6af28f7f99b26bc22ecf378732fcdbb050702da2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxOTo0ODoyN1rOGHbB4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxOTo0ODoyN1rOGHbB4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQzNjA2NQ==", "bodyText": "Let's aim to remove these on-off configurations from children POMs where possible.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#discussion_r410436065", "createdAt": "2020-04-17T19:48:27Z", "author": {"login": "alzimmermsft"}, "path": "sdk/appconfiguration/azure-data-appconfiguration/pom.xml", "diffHunk": "@@ -105,6 +111,14 @@\n           <statelessTestsetReporter implementation=\"org.apache.maven.plugin.surefire.extensions.junit5.JUnit5Xml30StatelessReporter\">\n             <usePhrasedTestCaseMethodName>true</usePhrasedTestCaseMethodName>\n           </statelessTestsetReporter>\n+          <properties>\n+            <configurationParameters>\n+              junit.jupiter.conditions.deactivate = *\n+              junit.jupiter.extensions.autodetection.enabled = true\n+              junit.jupiter.testinstance.lifecycle.default = per_class\n+              junit.jupiter.execution.parallel.enabled = true\n+            </configurationParameters>\n+          </properties>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6af28f7f99b26bc22ecf378732fcdbb050702da2"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bd463140e22af694d56ae13ef1b78819cb8618d", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6bd463140e22af694d56ae13ef1b78819cb8618d", "committedDate": "2020-04-17T20:41:21Z", "message": "Merge branch 'master' into AzEng_TestWatcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41a4eb16b3c588eb85d8ed2bfbfe959d574a2a1e", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/41a4eb16b3c588eb85d8ed2bfbfe959d574a2a1e", "committedDate": "2020-04-17T20:42:36Z", "message": "Merge branch 'AzEng_TestWatcher' of https://github.com/alzimmermsft/azure-sdk-for-java into AzEng_TestWatcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94bfd5717140e489bcb8a1a9ac5a6ba04dcfd866", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/94bfd5717140e489bcb8a1a9ac5a6ba04dcfd866", "committedDate": "2020-04-17T20:46:54Z", "message": "Reduce configurationParameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e41322db8da7e0ec6a2edc18ddab1be36b11fc6", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/0e41322db8da7e0ec6a2edc18ddab1be36b11fc6", "committedDate": "2020-04-17T20:49:50Z", "message": "Removed configuration from AppConfig"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5364c62829c601598cfbdee69af68076248957c9", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5364c62829c601598cfbdee69af68076248957c9", "committedDate": "2020-04-17T21:09:24Z", "message": "Update log message, removed parent POM, cleaned up POM"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34c765dce7b10bdfeeddcf48fd0441876abc9f07", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/34c765dce7b10bdfeeddcf48fd0441876abc9f07", "committedDate": "2020-04-17T21:10:36Z", "message": "Removed effective-pom used to verification of configuration inheritence"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1Nzc1OTA4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#pullrequestreview-395775908", "createdAt": "2020-04-17T21:12:44Z", "commit": {"oid": "34c765dce7b10bdfeeddcf48fd0441876abc9f07"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QyMToxMjo0NFrOGHdQPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QyMToxMjo0NFrOGHdQPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQ3MjUwOA==", "bodyText": "Could you port the surefire extension change to check the display in both console and report?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#discussion_r410472508", "createdAt": "2020-04-17T21:12:44Z", "author": {"login": "sima-zhu"}, "path": "sdk/appconfiguration/azure-data-appconfiguration/pom.xml", "diffHunk": "@@ -93,20 +93,11 @@\n       <version>1.0.4</version> <!-- {x-version-update;com.azure:azure-identity;dependency} -->\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>com.azure</groupId>\n+      <artifactId>azure-test-watcher</artifactId>\n+      <version>1.0.0-beta.1</version> <!-- {x-version-update;com.azure:azure-test-watcher;dependency} -->\n+      <scope>test</scope>\n+    </dependency>\n   </dependencies>\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34c765dce7b10bdfeeddcf48fd0441876abc9f07"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc84ec190a3b29af1a909f8b8097dac1c56893aa", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/dc84ec190a3b29af1a909f8b8097dac1c56893aa", "committedDate": "2020-04-17T22:03:00Z", "message": "Removed invalid dependency from AppConfig POM"}, "afterCommit": {"oid": "34c765dce7b10bdfeeddcf48fd0441876abc9f07", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/34c765dce7b10bdfeeddcf48fd0441876abc9f07", "committedDate": "2020-04-17T21:10:36Z", "message": "Removed effective-pom used to verification of configuration inheritence"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28b578c86477a2fb63c5d1fc3661630a6b0eb0c6", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/28b578c86477a2fb63c5d1fc3661630a6b0eb0c6", "committedDate": "2020-04-17T22:10:19Z", "message": "Fix missing version tag and added reporter to global configuration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3701ff340ee43a0e8a4b9a2b18761f63bc226ed", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f3701ff340ee43a0e8a4b9a2b18761f63bc226ed", "committedDate": "2020-04-17T22:33:58Z", "message": "Merged in master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTUwMzk3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#pullrequestreview-395950397", "createdAt": "2020-04-18T20:57:58Z", "commit": {"oid": "f3701ff340ee43a0e8a4b9a2b18761f63bc226ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQyMDo1Nzo1OFrOGHuLjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQyMDo1Nzo1OFrOGHuLjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0OTgzNw==", "bodyText": "nit: add new line.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#discussion_r410749837", "createdAt": "2020-04-18T20:57:58Z", "author": {"login": "conniey"}, "path": "eng/azure-test-watcher/src/main/java/com/azure/testing/package-info.java", "diffHunk": "@@ -0,0 +1,7 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+/**\n+ * Package containing JUnit 5 testing extensions.\n+ */\n+package com.azure.testing;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3701ff340ee43a0e8a4b9a2b18761f63bc226ed"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTUwNDgz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#pullrequestreview-395950483", "createdAt": "2020-04-18T20:58:56Z", "commit": {"oid": "f3701ff340ee43a0e8a4b9a2b18761f63bc226ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQyMDo1ODo1NlrOGHuMJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQyMDo1ODo1NlrOGHuMJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0OTk5MA==", "bodyText": "Is there a reason this can't be lumped into azure-core-test? It's only used for tests. It'll give azure-core-test a reason to live.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#discussion_r410749990", "createdAt": "2020-04-18T20:58:56Z", "author": {"login": "conniey"}, "path": "pom.xml", "diffHunk": "@@ -8,6 +8,7 @@\n   <packaging>pom</packaging>\n   <version>1.0.0</version><!-- Need not change for every release-->\n   <modules>\n+    <module>eng/azure-test-watcher</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3701ff340ee43a0e8a4b9a2b18761f63bc226ed"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NDM1NDU3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#pullrequestreview-396435457", "createdAt": "2020-04-20T13:08:23Z", "commit": {"oid": "f3701ff340ee43a0e8a4b9a2b18761f63bc226ed"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMzowODoyM1rOGITkNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxMzowODoyM1rOGITkNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM2MjM1Nw==", "bodyText": "@alzimmermsft this should probably be in the common with perf-test-core and smoke-tests, instead of eng.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#discussion_r411362357", "createdAt": "2020-04-20T13:08:23Z", "author": {"login": "JimSuplizio"}, "path": "pom.xml", "diffHunk": "@@ -8,6 +8,7 @@\n   <packaging>pom</packaging>\n   <version>1.0.0</version><!-- Need not change for every release-->\n   <modules>\n+    <module>eng/azure-test-watcher</module>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0OTk5MA=="}, "originalCommit": {"oid": "f3701ff340ee43a0e8a4b9a2b18761f63bc226ed"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0c19f328983da4d81928bb6488fdfb040e787c5", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b0c19f328983da4d81928bb6488fdfb040e787c5", "committedDate": "2020-04-20T16:28:52Z", "message": "Merge branch 'master' into AzEng_TestWatcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d92e970214240d5cbb22375c6aa29b46e429f7c6", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d92e970214240d5cbb22375c6aa29b46e429f7c6", "committedDate": "2020-04-20T16:32:40Z", "message": "Moved from eng/ to common/"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "debbbcae970e8d845fa977848bed040ca3a8917e", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/debbbcae970e8d845fa977848bed040ca3a8917e", "committedDate": "2020-04-20T16:35:18Z", "message": "Fixed module path"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MzEyNDEz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#pullrequestreview-397312413", "createdAt": "2020-04-21T13:09:34Z", "commit": {"oid": "debbbcae970e8d845fa977848bed040ca3a8917e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3Mzg2Njc2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#pullrequestreview-397386676", "createdAt": "2020-04-21T14:27:52Z", "commit": {"oid": "debbbcae970e8d845fa977848bed040ca3a8917e"}, "state": "APPROVED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNDoyNzo1MlrOGJIxdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNDozMToyNFrOGJI-Dg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzNDEwMQ==", "bodyText": "nit: completed -> Completed", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#discussion_r412234101", "createdAt": "2020-04-21T14:27:52Z", "author": {"login": "conniey"}, "path": "common/azure-test-watcher/src/main/java/com/azure/testing/AzureTestWatcher.java", "diffHunk": "@@ -0,0 +1,50 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.testing;\n+\n+import org.junit.jupiter.api.extension.AfterTestExecutionCallback;\n+import org.junit.jupiter.api.extension.BeforeTestExecutionCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+import java.lang.reflect.Method;\n+import java.util.Objects;\n+\n+/**\n+ * JUnit 5 extension class which reports on testing running and simple metrics about the test such as run time.\n+ */\n+public class AzureTestWatcher implements BeforeTestExecutionCallback, AfterTestExecutionCallback {\n+\n+    @Override\n+    public void beforeTestExecution(ExtensionContext extensionContext) {\n+        String displayName = extensionContext.getDisplayName();\n+        getStore(extensionContext).put(extensionContext.getRequiredTestMethod(), System.currentTimeMillis());\n+\n+        String testName = \"\";\n+        String fullyQualifiedTestName = \"\";\n+        if (extensionContext.getTestMethod().isPresent()) {\n+            Method method = extensionContext.getTestMethod().get();\n+            testName = method.getName();\n+            fullyQualifiedTestName = method.getDeclaringClass().getName() + \".\" + testName;\n+        }\n+\n+        if (!Objects.equals(displayName, testName)) {\n+            System.out.printf(\"Starting test %s (%s), \", fullyQualifiedTestName, displayName);\n+        } else {\n+            System.out.printf(\"Starting test %s, \", fullyQualifiedTestName);\n+        }\n+    }\n+\n+    @Override\n+    public void afterTestExecution(ExtensionContext context) {\n+        Method testMethod = context.getRequiredTestMethod();\n+        long start = getStore(context).remove(testMethod, long.class);\n+        long duration = System.currentTimeMillis() - start;\n+\n+        System.out.printf(\"completed in %d ms.%n\", duration);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "debbbcae970e8d845fa977848bed040ca3a8917e"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzNTAyNA==", "bodyText": "Do you need a %n for these too?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#discussion_r412235024", "createdAt": "2020-04-21T14:28:50Z", "author": {"login": "conniey"}, "path": "common/azure-test-watcher/src/main/java/com/azure/testing/AzureTestWatcher.java", "diffHunk": "@@ -0,0 +1,50 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.testing;\n+\n+import org.junit.jupiter.api.extension.AfterTestExecutionCallback;\n+import org.junit.jupiter.api.extension.BeforeTestExecutionCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+import java.lang.reflect.Method;\n+import java.util.Objects;\n+\n+/**\n+ * JUnit 5 extension class which reports on testing running and simple metrics about the test such as run time.\n+ */\n+public class AzureTestWatcher implements BeforeTestExecutionCallback, AfterTestExecutionCallback {\n+\n+    @Override\n+    public void beforeTestExecution(ExtensionContext extensionContext) {\n+        String displayName = extensionContext.getDisplayName();\n+        getStore(extensionContext).put(extensionContext.getRequiredTestMethod(), System.currentTimeMillis());\n+\n+        String testName = \"\";\n+        String fullyQualifiedTestName = \"\";\n+        if (extensionContext.getTestMethod().isPresent()) {\n+            Method method = extensionContext.getTestMethod().get();\n+            testName = method.getName();\n+            fullyQualifiedTestName = method.getDeclaringClass().getName() + \".\" + testName;\n+        }\n+\n+        if (!Objects.equals(displayName, testName)) {\n+            System.out.printf(\"Starting test %s (%s), \", fullyQualifiedTestName, displayName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "debbbcae970e8d845fa977848bed040ca3a8917e"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzNTc0OQ==", "bodyText": "Should this line have that x-version-update metadata?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#discussion_r412235749", "createdAt": "2020-04-21T14:29:38Z", "author": {"login": "conniey"}, "path": "common/azure-test-watcher/pom.xml", "diffHunk": "@@ -0,0 +1,32 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <groupId>com.azure</groupId>\n+  <artifactId>azure-test-watcher</artifactId>\n+  <version>1.0.0-beta.1</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "debbbcae970e8d845fa977848bed040ca3a8917e"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzNjExOQ==", "bodyText": "nit: alphabetise", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#discussion_r412236119", "createdAt": "2020-04-21T14:30:05Z", "author": {"login": "conniey"}, "path": "sdk/parents/azure-client-sdk-parent/pom.xml", "diffHunk": "@@ -1458,6 +1464,7 @@\n \n   <modules>\n     <module>../../../common/perf-test-core</module>\n+    <module>../../../common/azure-test-watcher</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "debbbcae970e8d845fa977848bed040ca3a8917e"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzNzMyNg==", "bodyText": "this could be a static method because it doesn't rely on any state from its parent class.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10313#discussion_r412237326", "createdAt": "2020-04-21T14:31:24Z", "author": {"login": "conniey"}, "path": "common/azure-test-watcher/src/main/java/com/azure/testing/AzureTestWatcher.java", "diffHunk": "@@ -0,0 +1,50 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.testing;\n+\n+import org.junit.jupiter.api.extension.AfterTestExecutionCallback;\n+import org.junit.jupiter.api.extension.BeforeTestExecutionCallback;\n+import org.junit.jupiter.api.extension.ExtensionContext;\n+\n+import java.lang.reflect.Method;\n+import java.util.Objects;\n+\n+/**\n+ * JUnit 5 extension class which reports on testing running and simple metrics about the test such as run time.\n+ */\n+public class AzureTestWatcher implements BeforeTestExecutionCallback, AfterTestExecutionCallback {\n+\n+    @Override\n+    public void beforeTestExecution(ExtensionContext extensionContext) {\n+        String displayName = extensionContext.getDisplayName();\n+        getStore(extensionContext).put(extensionContext.getRequiredTestMethod(), System.currentTimeMillis());\n+\n+        String testName = \"\";\n+        String fullyQualifiedTestName = \"\";\n+        if (extensionContext.getTestMethod().isPresent()) {\n+            Method method = extensionContext.getTestMethod().get();\n+            testName = method.getName();\n+            fullyQualifiedTestName = method.getDeclaringClass().getName() + \".\" + testName;\n+        }\n+\n+        if (!Objects.equals(displayName, testName)) {\n+            System.out.printf(\"Starting test %s (%s), \", fullyQualifiedTestName, displayName);\n+        } else {\n+            System.out.printf(\"Starting test %s, \", fullyQualifiedTestName);\n+        }\n+    }\n+\n+    @Override\n+    public void afterTestExecution(ExtensionContext context) {\n+        Method testMethod = context.getRequiredTestMethod();\n+        long start = getStore(context).remove(testMethod, long.class);\n+        long duration = System.currentTimeMillis() - start;\n+\n+        System.out.printf(\"completed in %d ms.%n\", duration);\n+    }\n+\n+    private ExtensionContext.Store getStore(ExtensionContext context) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "debbbcae970e8d845fa977848bed040ca3a8917e"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2607034572a75fc7579a39e778ca528439057a1", "author": {"user": {"login": "alzimmermsft", "name": "Alan Zimmer"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d2607034572a75fc7579a39e778ca528439057a1", "committedDate": "2020-04-22T18:12:24Z", "message": "Updated to use object bag to pass testing context"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1004, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}