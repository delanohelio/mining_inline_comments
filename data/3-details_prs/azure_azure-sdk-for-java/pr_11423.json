{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyOTg2MDc0", "number": 11423, "title": "mgmt update readme, add more concept", "bodyText": "Add concept:\n\ndependency as Creatable<T>\nbatch create/delete", "createdAt": "2020-05-26T04:59:32Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11423", "merged": true, "mergeCommit": {"oid": "5de58f4505522d3a223cbb04e4b48b1bce85238d"}, "closed": true, "closedAt": "2020-05-28T07:11:55Z", "author": {"login": "weidongxu-microsoft"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABck9WMCAH2gAyNDIyOTg2MDc0OmVkN2JkYzBkNmQ2MGQxYzdjODg4MDdhNGY4MjhiNmY0NDVkNzcyZTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclSbSzgFqTQxODg2NjY2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ed7bdc0d6d60d1c7c88807a4f828b6f445d772e9", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ed7bdc0d6d60d1c7c88807a4f828b6f445d772e9", "committedDate": "2020-05-26T04:55:48Z", "message": "support creatable as input"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "299192ee3fa5d487e19d9dd10b015daedbd108ee", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/299192ee3fa5d487e19d9dd10b015daedbd108ee", "committedDate": "2020-05-26T04:57:02Z", "message": "update readme to add more key concept"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7022356cae387e21a7b7b67071c8d5b1e7794ac8", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7022356cae387e21a7b7b67071c8d5b1e7794ac8", "committedDate": "2020-05-26T05:06:50Z", "message": "use variable instead of string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTcyNzY4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11423#pullrequestreview-417972768", "createdAt": "2020-05-26T05:07:46Z", "commit": {"oid": "299192ee3fa5d487e19d9dd10b015daedbd108ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNTowNzo0NlrOGaOwoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNTowNzo0NlrOGaOwoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE1Nzk4NQ==", "bodyText": "Is it required only for new section added in README? Should we plan to cover same scenario for important resource inside Network, Compute, etc. ?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11423#discussion_r430157985", "createdAt": "2020-05-26T05:07:46Z", "author": {"login": "xseeseesee"}, "path": "sdk/appservice/mgmt/src/main/java/com/azure/management/appservice/FunctionApp.java", "diffHunk": "@@ -325,6 +325,14 @@\n              */\n             WithCreate withNewStorageAccount(String name, StorageAccountSkuType sku);\n \n+            /**\n+             * Creates a new storage account to use for the function app.\n+             *\n+             * @param storageAccount a creatable definition for a new storage account\n+             * @return the next stage of the definition\n+             */\n+            WithCreate withNewStorageAccount(Creatable<StorageAccount> storageAccount);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "299192ee3fa5d487e19d9dd10b015daedbd108ee"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "757bface202afa5c3a080eeec02ab77ca2f51a59", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/757bface202afa5c3a080eeec02ab77ca2f51a59", "committedDate": "2020-05-26T05:14:57Z", "message": "use variable instead"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTg1NTg4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11423#pullrequestreview-417985588", "createdAt": "2020-05-26T05:48:20Z", "commit": {"oid": "757bface202afa5c3a080eeec02ab77ca2f51a59"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNTo0ODoyMFrOGaPaaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNTo0ODoyMFrOGaPaaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE2ODY4Mw==", "bodyText": "Currently, we don't have a AzureProfile constructor with only one parameter.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11423#discussion_r430168683", "createdAt": "2020-05-26T05:48:20Z", "author": {"login": "ChenTanyi"}, "path": "sdk/management/README.md", "diffHunk": "@@ -70,7 +70,7 @@ In addition, Azure subscription ID can be configured via environment variable `A\n With above configuration, `azure` client can be authenticated by following code:\n \n ```java\n-AzureProfile profile = new AzureProfile(AzureEnvironment.AZURE, true);\n+AzureProfile profile = new AzureProfile(AzureEnvironment.AZURE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "757bface202afa5c3a080eeec02ab77ca2f51a59"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4ODI5MDk1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11423#pullrequestreview-418829095", "createdAt": "2020-05-27T03:14:43Z", "commit": {"oid": "757bface202afa5c3a080eeec02ab77ca2f51a59"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4ODMyOTA0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11423#pullrequestreview-418832904", "createdAt": "2020-05-27T03:28:47Z", "commit": {"oid": "757bface202afa5c3a080eeec02ab77ca2f51a59"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3eb4a15b3d31e872f0d84dc17ab0c651552f3566", "author": {"user": {"login": "weidongxu-microsoft", "name": "Weidong Xu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3eb4a15b3d31e872f0d84dc17ab0c651552f3566", "committedDate": "2020-05-27T05:26:29Z", "message": "concept on RBAC"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4ODY2NjYy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11423#pullrequestreview-418866662", "createdAt": "2020-05-27T05:29:22Z", "commit": {"oid": "3eb4a15b3d31e872f0d84dc17ab0c651552f3566"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyOToyMlrOGa56JQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNToyOToyMlrOGa56JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2NDkzMw==", "bodyText": "Add a section on RBAC. Probably this is the only lib in java than can do this...", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11423#discussion_r430864933", "createdAt": "2020-05-27T05:29:22Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/management/README.md", "diffHunk": "@@ -132,12 +135,78 @@ linuxVM.update()\n     .apply();\n ```\n \n+### Dependency across Azure resources.\n+\n+You can create a function app, together with required storage account and app service plan created on specification.\n+\n+```java\n+Creatable<StorageAccount> creatableStorageAccount = azure.storageAccounts()\n+    .define(storageAccountName)\n+    .withRegion(Region.US_EAST)\n+    .withExistingResourceGroup(rgName)\n+    .withGeneralPurposeAccountKindV2()\n+    .withSku(StorageAccountSkuType.STANDARD_LRS);\n+\n+Creatable<AppServicePlan> creatableAppServicePlan = azure.appServicePlans()\n+    .define(appServicePlanName)\n+    .withRegion(Region.US_EAST)\n+    .withExistingResourceGroup(rgName)\n+    .withPricingTier(PricingTier.STANDARD_S1)\n+    .withOperatingSystem(OperatingSystem.LINUX);\n+\n+FunctionApp linuxFunctionApp = azure.functionApps().define(functionAppName)\n+    .withRegion(Region.US_EAST)\n+    .withExistingResourceGroup(rgName)\n+    .withNewLinuxAppServicePlan(creatableAppServicePlan)\n+    .withBuiltInImage(FunctionRuntimeStack.JAVA_8)\n+    .withNewStorageAccount(creatableStorageAccount)\n+    .withHttpsOnly(true)\n+    .withAppSetting(\"WEBSITE_RUN_FROM_PACKAGE\", functionAppPackageUrl)\n+    .create();\n+```\n+\n+### Batch Azure resource provisioning\n+\n+You can batch create and delete managed disk instances.\n+\n+```java\n+List<String> diskNames = Arrays.asList(\"datadisk1\", \"datadisk2\");\n+\n+List<Creatable<Disk>> creatableDisks = diskNames.stream()\n+    .map(diskName -> azure.disks()\n+        .define(diskName)\n+        .withRegion(Region.US_EAST)\n+        .withExistingResourceGroup(rgName)\n+        .withData()\n+        .withSizeInGB(1)\n+        .withSku(DiskSkuTypes.STANDARD_LRS))\n+    .collect(Collectors.toList());\n+\n+Collection<Disk> disks = azure.disks().create(creatableDisks).values();\n+\n+azure.disks().deleteByIds(disks.stream().map(Disk::id).collect(Collectors.toList()));\n+```\n+\n+### Integration with Azure role-based access control\n+\n+You can assign Contributor for an Azure resource to a service principal.\n+\n+```java\n+String raName = UUID.randomUUID().toString();\n+RoleAssignment roleAssignment = azure.accessManagement().roleAssignments()\n+    .define(raName)\n+    .forServicePrincipal(servicePrincipal)\n+    .withBuiltInRole(BuiltInRole.CONTRIBUTOR)\n+    .withScope(resource.id())\n+    .create();\n+```\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3eb4a15b3d31e872f0d84dc17ab0c651552f3566"}, "originalPosition": 97}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4046, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}