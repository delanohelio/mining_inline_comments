{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1Mzc2NjM1", "number": 7571, "title": "first round archetype-sdk-data.yml", "bodyText": "We have a bunch of logic in the eng\\pipelines\\templates\\jobs\\archetype-sdk-client.yml that runs exclusively for one branch or another and about half of the logic works correctly. For example the dependency, code coverage and spotbugs reports are being generated every run but are client only.\nThe purpose of this PR is to create an archetype-sdk-data.yml and clean out the client only jobs. Similarly, remove the data only jobs from the archetype-sdk-client.yml.", "createdAt": "2020-01-21T15:50:36Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571", "merged": true, "mergeCommit": {"oid": "041eea7f39de50418dd17a34788f8e72e9a1897e"}, "closed": true, "closedAt": "2020-01-23T17:49:40Z", "author": {"login": "JimSuplizio"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8kCwtgFqTM0NjAzMTU1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9Nk07AH2gAyMzY1Mzc2NjM1OjY3ZTFjMjkxOTM0M2U3NDhkMDAyM2YxY2MzYmY2Yjk0NGU1ZDAyZWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDMxNTU0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#pullrequestreview-346031554", "createdAt": "2020-01-21T16:49:59Z", "commit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjo0OTo1OVrOFgBP7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjo0OTo1OVrOFgBP7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTExOTIxMg==", "bodyText": "Start Jetty is a data only task and is no longer necessary in client.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369119212", "createdAt": "2020-01-21T16:49:59Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -217,26 +217,13 @@ jobs:\n           Options: --batch-mode\n           MavenOptions: $(MemoryOptions) $(LoggingOptions)\n \n-      - task: Maven@3", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDM1OTE4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#pullrequestreview-346035918", "createdAt": "2020-01-21T16:55:46Z", "commit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjo1NTo0NlrOFgBdZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNjo1NTo0NlrOFgBdZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEyMjY2Mw==", "bodyText": "The previous version of Start Jetty was making the call to start it using pom.client.xml, since the task lives in parent\\pom.xml and we're in the archetype-sdk-data.yml, use the pom.data.xml", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369122663", "createdAt": "2020-01-21T16:55:46Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+\n+jobs:\n+  - job: 'Build'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |\n+          echo \"##vso[build.addbuildtag]Scheduled\"\n+        displayName: 'Tag scheduled builds'\n+        condition: and(succeeded(), eq(variables['Build.SourceBranchName'],'master'),eq(variables['Build.Reason'],'Schedule'))\n+\n+      - task: UsePythonVersion@0\n+        displayName: 'Use Python 3.6'\n+        inputs:\n+          versionSpec: '3.6'\n+\n+      - template: tools/daily-dev-build-variable/daily-dev-build-variable.yml@azure-sdk-tools\n+\n+      - ${{ each artifact in parameters.Artifacts }}:\n+        - script: |\n+            python3 --version\n+            python3 eng/versioning/set_versions.py --build-type ${{parameters.SDKType}} --build-qualifier dev.$(Build.BuildNumber) --artifact-id ${{artifact.name}} --group-id ${{artifact.groupId}}\n+          condition: and(succeeded(), eq(variables['SetDevVersion'],'true'))\n+          displayName: Append dev package version suffix for ${{artifact.name}}\n+\n+      - script: |\n+          python3 --version\n+          python3 eng/versioning/update_versions.py --update-type library --build-type ${{parameters.SDKType}}\n+        condition: and(succeeded(), eq(variables['SetDevVersion'],'true'))\n+        displayName: Apply version settings to repository\n+\n+      - script: |\n+          pip install markdown2 BeautifulSoup4\n+        displayName: 'pip install markdown2 and BeautifulSoup4'\n+\n+      - template: ../steps/cache-maven-repository.yml\n+\n+      - template: eng/pipelines/templates/scripts/replace-relative-links.yml@azure-sdk-tools\n+        parameters:\n+          TargetFolder: $(Build.SourcesDirectory)\n+          RootFolder: $(Build.SourcesDirectory)\n+          BuildSHA: $(Build.SourceVersion)\n+          RepoId: 'Azure/azure-sdk-for-java'\n+\n+      - task: Maven@3\n+        displayName: 'Build and Package'\n+        inputs:\n+          mavenPomFile: sdk/${{parameters.ServiceDirectory}}/pom.service.xml\n+          goals: 'package'\n+          options: '$(DefaultOptions) \"-DpackageOutputDirectory=$(Build.ArtifactStagingDirectory)\" -DskipTests -Dgenerate-overview' # We include template-module so we ensure it always builds in CI\n+          mavenOptions: '$(MemoryOptions) $(LoggingOptions)'\n+          javaHomeOption: 'JDKVersion'\n+          jdkVersionOption: $(JavaVersion)\n+          jdkArchitectureOption: 'x64'\n+          publishJUnitResults: false\n+\n+      - publish: $(Build.ArtifactStagingDirectory)\n+        displayName: 'Publish Artifacts $(ArtifactName)'\n+        artifact: '$(ArtifactName)'\n+\n+      - publish: $(System.DefaultWorkingDirectory)\n+        condition: and(eq(variables['CaptureRepositoryOnFailure'], 'true'), failed())\n+        displayName: 'Capture repo state for analysis'\n+        artifact: repository\n+\n+  - job: 'Analyze'\n+    condition: and(succeeded(), ne(variables['Skip.Analyze'], 'true'))\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    steps:\n+      - pwsh: |\n+          $(Build.SourcesDirectory)/eng/versioning/pom_file_version_scanner.ps1\n+        displayName: \"Verify versions in POM files\"\n+\n+      - task: UsePythonVersion@0\n+        displayName: 'Use Python 3.6'\n+        inputs:\n+          versionSpec: '3.6'\n+\n+      - script: |\n+          pip install setuptools wheel\n+          pip install doc-warden\n+          ward scan -d $(Build.SourcesDirectory) -c $(Build.SourcesDirectory)/eng/.docsettings.yml\n+        displayName: 'Verify Readmes'\n+\n+      - task: ms.vss-governance-buildtask.governance-build-task-component-detection.ComponentGovernanceComponentDetection@0\n+        # ComponentGovernance is currently unable to run on pull requests of public projects. Running on non-PR\n+        # builds should be sufficient.\n+        condition: and(succeededOrFailed(), ne(variables['Build.Reason'], 'PullRequest'))\n+        displayName: 'Component Detection'\n+\n+      # We `install` the code quality reports tooling into our local m2 cache separately from building the Maven project\n+      # reports. This means it is available as part of that, but also so that this is not documented in the project report.\n+\n+      - template: ../steps/install-reporting-tools.yml\n+        parameters:\n+          Options: --batch-mode\n+          MavenOptions: $(MemoryOptions) $(LoggingOptions)\n+\n+      - task: Maven@3\n+        displayName: 'Install Module and Run SpotBugs, Checkstyle, RevApi, and Javadoc'\n+        inputs:\n+          mavenPomFile: sdk/${{parameters.ServiceDirectory}}/pom.service.xml\n+          options: '--no-transfer-progress -DskipTests -Dgpg.skip -Dverify-readme'\n+          mavenOptions: '$(MemoryOptions)'\n+          javaHomeOption: 'JDKVersion'\n+          jdkVersionOption: '1.11'\n+          jdkArchitectureOption: 'x64'\n+          publishJUnitResults: false\n+          goals: 'install'\n+\n+  - job: 'Test'\n+    condition: and(succeeded(), ne(variables['Skip.Test'], 'true'))\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    strategy:\n+      matrix: ${{ parameters.TestMatrix }}\n+\n+    pool:\n+      vmImage: $(OSVmImage)\n+\n+    steps:\n+      - template: ../steps/verify-agent-os.yml\n+        parameters:\n+          OSName: $(OSName)\n+\n+      - template: ../steps/cache-maven-repository.yml\n+\n+      - template: ../steps/install-reporting-tools.yml\n+        parameters:\n+          Options: --batch-mode\n+          MavenOptions: $(MemoryOptions) $(LoggingOptions)\n+\n+      - task: Maven@3\n+        displayName: 'Start Jetty'\n+        condition: succeeded()\n+        inputs:\n+          mavenPomFile: pom.data.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 193}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDQ1NzU3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#pullrequestreview-346045757", "createdAt": "2020-01-21T17:09:11Z", "commit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzowOToxMVrOFgB7Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzowOToxMVrOFgB7Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEzMDI0Mw==", "bodyText": "Data track doesn't have the same interdependencies as client track and the from source runs don't really make much sense.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369130243", "createdAt": "2020-01-21T17:09:11Z", "author": {"login": "JimSuplizio"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDY5MjAx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#pullrequestreview-346069201", "createdAt": "2020-01-21T17:45:33Z", "commit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo0NTozNFrOFgDArg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo0NTozNFrOFgDArg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE0ODA3OA==", "bodyText": "Orthogonal but potentially more clean-up. I believe this was added to enabling the publishing of dependency reports, see #4238, we should see if that is still necessary after all our refactorings and changes to unified pipelines.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369148078", "createdAt": "2020-01-21T17:45:34Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+\n+jobs:\n+  - job: 'Build'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDc0NjU0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#pullrequestreview-346074654", "createdAt": "2020-01-21T17:54:32Z", "commit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo1NDozM1rOFgDRIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo1NDozM1rOFgDRIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE1MjI4OQ==", "bodyText": "Should we set the SDKType in the template now?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369152289", "createdAt": "2020-01-21T17:54:33Z", "author": {"login": "weshaggard"}, "path": "sdk/authorization/ci.yml", "diffHunk": "@@ -37,7 +37,7 @@ pr:\n       - sdk/authorization/mgmt-\n \n stages:\n-  - template: ../../eng/pipelines/templates/stages/archetype-sdk-client.yml\n+  - template: ../../eng/pipelines/templates/stages/archetype-sdk-data.yml\n     parameters:\n       ServiceDirectory: authorization\n       SDKType: data", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDc1NDAz", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#pullrequestreview-346075403", "createdAt": "2020-01-21T17:55:38Z", "commit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo1NTozOVrOFgDTdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzo1NTozOVrOFgDTdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE1Mjg4Ng==", "bodyText": "I didn't look super close but it still feels like there might be a fair amount of duplication between the client and data templates. We should consider creating more templates to share as much as possible were it makes sense.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#discussion_r369152886", "createdAt": "2020-01-21T17:55:39Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-data.yml", "diffHunk": "@@ -0,0 +1,222 @@\n+parameters:\n+  SDKType: not-specified # Set a default that breaks in obvious ways.\n+  ServiceDirectory: not-specified # Set a default that breaks in obvious ways.\n+  PreTestSteps: []\n+  TestOptions: '$(DefaultOptions)'\n+  TestGoals: verify\n+  TestMatrix:\n+    Linux - Java 8:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Linux on Java 1.8'\n+    macOS - Java 8:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.8'\n+      RunTitle: 'macOS on Java 1.8'\n+    Windows - Java 8:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.8'\n+      RunTitle: 'Windows on Java 1.8'\n+    Linux - Java 11:\n+      OSName: 'Linux'\n+      OSVmImage: 'ubuntu-16.04'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Linux on Java 1.11'\n+    macOS - Java 11:\n+      OSName: 'macOS'\n+      OSVmImage: 'macOS-10.13'\n+      JavaVersion: '1.11'\n+      RunTitle: 'macOS on Java 1.11'\n+    Windows - Java 11:\n+      OSName: 'Windows'\n+      OSVmImage: 'windows-2019'\n+      JavaVersion: '1.11'\n+      RunTitle: 'Windows on Java 1.11'\n+\n+jobs:\n+  - job: 'Build'\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    strategy:\n+      matrix:\n+        Client Libraries:\n+          ArtifactName: 'packages'\n+          JavaVersion: '1.11'\n+\n+    steps:\n+      - script: |\n+          echo \"##vso[build.addbuildtag]Scheduled\"\n+        displayName: 'Tag scheduled builds'\n+        condition: and(succeeded(), eq(variables['Build.SourceBranchName'],'master'),eq(variables['Build.Reason'],'Schedule'))\n+\n+      - task: UsePythonVersion@0\n+        displayName: 'Use Python 3.6'\n+        inputs:\n+          versionSpec: '3.6'\n+\n+      - template: tools/daily-dev-build-variable/daily-dev-build-variable.yml@azure-sdk-tools\n+\n+      - ${{ each artifact in parameters.Artifacts }}:\n+        - script: |\n+            python3 --version\n+            python3 eng/versioning/set_versions.py --build-type ${{parameters.SDKType}} --build-qualifier dev.$(Build.BuildNumber) --artifact-id ${{artifact.name}} --group-id ${{artifact.groupId}}\n+          condition: and(succeeded(), eq(variables['SetDevVersion'],'true'))\n+          displayName: Append dev package version suffix for ${{artifact.name}}\n+\n+      - script: |\n+          python3 --version\n+          python3 eng/versioning/update_versions.py --update-type library --build-type ${{parameters.SDKType}}\n+        condition: and(succeeded(), eq(variables['SetDevVersion'],'true'))\n+        displayName: Apply version settings to repository\n+\n+      - script: |\n+          pip install markdown2 BeautifulSoup4\n+        displayName: 'pip install markdown2 and BeautifulSoup4'\n+\n+      - template: ../steps/cache-maven-repository.yml\n+\n+      - template: eng/pipelines/templates/scripts/replace-relative-links.yml@azure-sdk-tools\n+        parameters:\n+          TargetFolder: $(Build.SourcesDirectory)\n+          RootFolder: $(Build.SourcesDirectory)\n+          BuildSHA: $(Build.SourceVersion)\n+          RepoId: 'Azure/azure-sdk-for-java'\n+\n+      - task: Maven@3\n+        displayName: 'Build and Package'\n+        inputs:\n+          mavenPomFile: sdk/${{parameters.ServiceDirectory}}/pom.service.xml\n+          goals: 'package'\n+          options: '$(DefaultOptions) \"-DpackageOutputDirectory=$(Build.ArtifactStagingDirectory)\" -DskipTests -Dgenerate-overview' # We include template-module so we ensure it always builds in CI\n+          mavenOptions: '$(MemoryOptions) $(LoggingOptions)'\n+          javaHomeOption: 'JDKVersion'\n+          jdkVersionOption: $(JavaVersion)\n+          jdkArchitectureOption: 'x64'\n+          publishJUnitResults: false\n+\n+      - publish: $(Build.ArtifactStagingDirectory)\n+        displayName: 'Publish Artifacts $(ArtifactName)'\n+        artifact: '$(ArtifactName)'\n+\n+      - publish: $(System.DefaultWorkingDirectory)\n+        condition: and(eq(variables['CaptureRepositoryOnFailure'], 'true'), failed())\n+        displayName: 'Capture repo state for analysis'\n+        artifact: repository\n+\n+  - job: 'Analyze'\n+    condition: and(succeeded(), ne(variables['Skip.Analyze'], 'true'))\n+\n+    variables:\n+      - template: ../variables/globals.yml\n+\n+    pool:\n+      vmImage: 'ubuntu-16.04'\n+\n+    steps:\n+      - pwsh: |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "originalPosition": 124}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDc2MDAx", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#pullrequestreview-346076001", "createdAt": "2020-01-21T17:56:32Z", "commit": {"oid": "eec8a15f8f10d3e52f6d481c14ad2f607e36c846"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTU0MTY0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7571#pullrequestreview-346954164", "createdAt": "2020-01-22T22:38:35Z", "commit": {"oid": "eca07be206f3e3ad3ce7cd671c12cc58ab2e8ca2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "124e6db05a327661d5f932570b75b30b89fc715d", "author": {"user": {"login": "JimSuplizio", "name": "James Suplizio"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/124e6db05a327661d5f932570b75b30b89fc715d", "committedDate": "2020-01-23T16:15:20Z", "message": "first round archetype-sdk-data.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f8fc270a8e624a53f7c8a4d2bc0daf80df0c87f", "author": {"user": {"login": "JimSuplizio", "name": "James Suplizio"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9f8fc270a8e624a53f7c8a4d2bc0daf80df0c87f", "committedDate": "2020-01-23T16:15:20Z", "message": "Fix erroneous condition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f06ba82153700395fcf2b5ef21416e56c0184c7b", "author": {"user": {"login": "JimSuplizio", "name": "James Suplizio"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f06ba82153700395fcf2b5ef21416e56c0184c7b", "committedDate": "2020-01-23T16:15:21Z", "message": "define SDKType in job templates, remove from ci.yml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67e1c2919343e748d0023f1cc3bf6b944e5d02ee", "author": {"user": {"login": "JimSuplizio", "name": "James Suplizio"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/67e1c2919343e748d0023f1cc3bf6b944e5d02ee", "committedDate": "2020-01-23T17:13:18Z", "message": "update for rebase to get the latest changes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 463, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}