{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNzUyMDg4", "number": 15477, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNzo1NzoyOFrOEl9zRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNzo1NzoyMlrOEma0IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MjQ1MzE4OnYy", "diffSide": "RIGHT", "path": "sdk/spring/azure-spring-cloud-context/src/main/java/com/microsoft/azure/spring/cloud/context/core/config/AzureProperties.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwNzo1NzoyOFrOHVuUTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwODowMjoxNFrOHWbiQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0MTAwNw==", "bodyText": "Can we delete  && Strings.isNullOrEmpty(subscriptionId)?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#discussion_r492541007", "createdAt": "2020-09-22T07:57:28Z", "author": {"login": "chenrujun"}, "path": "sdk/spring/azure-spring-cloud-context/src/main/java/com/microsoft/azure/spring/cloud/context/core/config/AzureProperties.java", "diffHunk": "@@ -41,7 +41,7 @@ private void validate() {\n         }\n \n         if (msiEnabled && Strings.isNullOrEmpty(subscriptionId)) {\n-            Assert.hasText(this.region, \"When msi is enabled, spring.cloud.azure.subscription-id must be provided\");\n+            Assert.hasText(this.subscriptionId, \"When msi is enabled, spring.cloud.azure.subscription-id must be provided\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c0e83fbd50075f57b35e2fda175c795ae648bbb"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzIzNjQ2Mw==", "bodyText": "Can we delete  && Strings.isNullOrEmpty(subscriptionId)?\n\nI think it's necessary, we will assert it when the subscriptionId is empty", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#discussion_r493236463", "createdAt": "2020-09-23T06:49:50Z", "author": {"login": "zhoufenqin"}, "path": "sdk/spring/azure-spring-cloud-context/src/main/java/com/microsoft/azure/spring/cloud/context/core/config/AzureProperties.java", "diffHunk": "@@ -41,7 +41,7 @@ private void validate() {\n         }\n \n         if (msiEnabled && Strings.isNullOrEmpty(subscriptionId)) {\n-            Assert.hasText(this.region, \"When msi is enabled, spring.cloud.azure.subscription-id must be provided\");\n+            Assert.hasText(this.subscriptionId, \"When msi is enabled, spring.cloud.azure.subscription-id must be provided\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0MTAwNw=="}, "originalCommit": {"oid": "8c0e83fbd50075f57b35e2fda175c795ae648bbb"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI4MTg1OQ==", "bodyText": "Here is the source code of Assert.hasText(...):\n\tpublic static void hasText(@Nullable String text, String message) {\n\t\tif (!StringUtils.hasText(text)) {\n\t\t\tthrow new IllegalArgumentException(message);\n\t\t}\n\t}\n\nIt will check by StringUtils.hasText(text).\nMaybe we do not need check it again by Strings.isNullOrEmpty(subscriptionId)?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#discussion_r493281859", "createdAt": "2020-09-23T08:02:14Z", "author": {"login": "chenrujun"}, "path": "sdk/spring/azure-spring-cloud-context/src/main/java/com/microsoft/azure/spring/cloud/context/core/config/AzureProperties.java", "diffHunk": "@@ -41,7 +41,7 @@ private void validate() {\n         }\n \n         if (msiEnabled && Strings.isNullOrEmpty(subscriptionId)) {\n-            Assert.hasText(this.region, \"When msi is enabled, spring.cloud.azure.subscription-id must be provided\");\n+            Assert.hasText(this.subscriptionId, \"When msi is enabled, spring.cloud.azure.subscription-id must be provided\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0MTAwNw=="}, "originalCommit": {"oid": "8c0e83fbd50075f57b35e2fda175c795ae648bbb"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NzE4Njk4OnYy", "diffSide": "RIGHT", "path": "sdk/spring/azure-spring-boot-samples/azure-spring-cloud-eventhubs-binder-sample/README.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNzo1NDoxOFrOHWbDIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNzo1NDoxOFrOHWbDIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI3Mzg5MA==", "bodyText": "We should remove the locale in this URL.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#discussion_r493273890", "createdAt": "2020-09-23T07:54:18Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-cloud-eventhubs-binder-sample/README.adoc", "diffHunk": "@@ -141,15 +141,11 @@ If you choose system-assigned identity, follow https://docs.microsoft.com/en-us/\n If you choose user-assigned identity, follow https://docs.microsoft.com/en-us/azure/app-service/overview-managed-identity#adding-a-user-assigned-identity[\n  Adding a user assigned identity].\n \n-==== Role Assignment\n+==== Add Role Assignment for Resource Group\n \n-Add role assignment to Event hub, Storage Account and Resource Group.\n+- Resource Group: assign `Reader` role for managed identity.\n \n-- Event Hub: `Contributor` role.\n-- Storage Account: `Storage Account Key Operator Service Role` role.\n-- Resource Group: `Reader` role.\n-\n-See https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-managed-service-identity[Managed identities for Azure resources with Event Hubs] to add role assignment for Event Hub, Storage Account and Resource Group are similar.\n+See https://docs.microsoft.com/en-us/azure/role-based-access-control/role-assignments-portal[Add or remove Azure role assignments] to add the role assignment for Resource Group.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85e6ca8fdf1bfc7b8547896b1db5b4a7597dc816"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NzIwNjczOnYy", "diffSide": "RIGHT", "path": "sdk/spring/azure-spring-boot-samples/azure-spring-cloud-eventhubs-binder-sample/README.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNzo1NzoyMlrOHWbPVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QwNzo1NzoyMlrOHWbPVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI3NzAxNA==", "bodyText": "Same here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15477#discussion_r493277014", "createdAt": "2020-09-23T07:57:22Z", "author": {"login": "saragluna"}, "path": "sdk/spring/azure-spring-boot-samples/azure-spring-cloud-eventhubs-binder-sample/README.adoc", "diffHunk": "@@ -186,6 +183,18 @@ spring.cloud.stream.bindings.output.destination=[eventhub-name]\n spring.cloud.stream.eventhub.bindings.input.consumer.checkpoint-mode=MANUAL\n ....\n \n+==== Add Role Assignment for Event Hub and Storage Account\n+\n+- Event Hub: assign `Contributor` role for managed identity.\n+- Storage Account: assign `Storage Account Key Operator Service Role` role for managed identity.\n+\n+See https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-managed-service-identity[Managed identities for Azure resources with Event Hubs] to add role assignment for Event Hub, Storage Account is similar.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85e6ca8fdf1bfc7b8547896b1db5b4a7597dc816"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 903, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}