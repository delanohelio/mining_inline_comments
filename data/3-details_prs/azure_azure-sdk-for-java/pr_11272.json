{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5ODMzNDkx", "number": 11272, "title": "Updates API based on feedback", "bodyText": "Removes by default auto-lock renewal and auto-completion\nMoves auto-lock renewal into builder\nRenames peek -> browse\nFixes snippets and docs\nAdds integration tags to run subset of tests (-Dgroups=integration or -Dgroups=!integration) without reliance on environment variables.\nFixes bug in completion.", "createdAt": "2020-05-19T02:09:17Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11272", "merged": true, "mergeCommit": {"oid": "be832eead6a20dfab7a500755cbe58bfc3daff8e"}, "closed": true, "closedAt": "2020-05-19T03:44:13Z", "author": {"login": "conniey"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcinAcCgH2gAyNDE5ODMzNDkxOjlmZjY0ODY0NjYwMmFlNThjOWFmNzBlMzdmMjg1MmJiZjg3NDJiZDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcir2BhAH2gAyNDE5ODMzNDkxOmM4NWI4MWFjZjc1M2RhNTIzNTlhYjJmZTQzYTliYmNhYmUwZmU4NGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9ff648646602ae58c9af70e37f2852bbf8742bd2", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9ff648646602ae58c9af70e37f2852bbf8742bd2", "committedDate": "2020-05-18T21:46:17Z", "message": "Update synchronous receive sample."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc1b1d82d0aeb7b6ba494310a1ab2c6f426439ac", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/fc1b1d82d0aeb7b6ba494310a1ab2c6f426439ac", "committedDate": "2020-05-18T21:46:18Z", "message": "Remove ReceiveAsyncOptions and fix build breaks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f7f1c90a09b92b9b177aa260d6ae5a4da6e9698", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5f7f1c90a09b92b9b177aa260d6ae5a4da6e9698", "committedDate": "2020-05-18T21:46:18Z", "message": "update peek -> browse()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79834ee26d95eac02626f58988ace3354e557c93", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/79834ee26d95eac02626f58988ace3354e557c93", "committedDate": "2020-05-18T21:46:19Z", "message": "Fixing build breaks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "672fca9423ee1509340a77913b46bd2be375d388", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/672fca9423ee1509340a77913b46bd2be375d388", "committedDate": "2020-05-18T21:46:19Z", "message": "Update peek -> browse"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed9dd9b9e2d63bc58e44fd54a5374980113fcbdf", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ed9dd9b9e2d63bc58e44fd54a5374980113fcbdf", "committedDate": "2020-05-18T22:51:35Z", "message": "Add support for maximum lock renewal time."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0ccc2f74e741f2425cee18012b0d23e10f9caa4", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c0ccc2f74e741f2425cee18012b0d23e10f9caa4", "committedDate": "2020-05-18T22:58:47Z", "message": "Fix samples."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61167877063ec42092d68a8d1ab93987b7d5d659", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/61167877063ec42092d68a8d1ab93987b7d5d659", "committedDate": "2020-05-18T23:48:46Z", "message": "Fix completion with sessionId."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43948ca5aadfcd9da8638b5737588c94feaba2d7", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/43948ca5aadfcd9da8638b5737588c94feaba2d7", "committedDate": "2020-05-18T23:58:49Z", "message": "Fix checkstyle issues in samples."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9669971e423aa132b967d57e52f4f7756119b328", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9669971e423aa132b967d57e52f4f7756119b328", "committedDate": "2020-05-19T01:01:07Z", "message": "Update tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fbe30913e39d49dd5b5469257e1fdbec265d547", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8fbe30913e39d49dd5b5469257e1fdbec265d547", "committedDate": "2020-05-19T01:02:51Z", "message": "Adding integration tag."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MDY4MDE3", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11272#pullrequestreview-414068017", "createdAt": "2020-05-19T02:58:40Z", "commit": {"oid": "8fbe30913e39d49dd5b5469257e1fdbec265d547"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwMjo1ODo0MFrOGXOIFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwMzowMzozNVrOGXOMiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzAwMTg3OQ==", "bodyText": "Might want to change documentation to reflect autoLockRenewalEnabled.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11272#discussion_r427001879", "createdAt": "2020-05-19T02:58:40Z", "author": {"login": "hemanttanwar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ReceiverOptions.java", "diffHunk": "@@ -15,26 +17,38 @@\n     private final boolean isRollingSessionReceiver;\n     private final Integer maxConcurrentSessions;\n     private final boolean isSessionReceiver;\n+    private final Duration maxAutoLockRenewalDuration;\n \n-    ReceiverOptions(ReceiveMode receiveMode, int prefetchCount) {\n+    ReceiverOptions(ReceiveMode receiveMode, int prefetchCount, Duration maxAutoLockRenewalDuration) {\n         this.receiveMode = receiveMode;\n         this.prefetchCount = prefetchCount;\n+        this.maxAutoLockRenewalDuration = maxAutoLockRenewalDuration;\n         this.sessionId = null;\n         this.isRollingSessionReceiver = false;\n         this.maxConcurrentSessions = null;\n         this.isSessionReceiver = false;\n     }\n \n-    ReceiverOptions(ReceiveMode receiveMode, int prefetchCount, String sessionId,\n-        boolean isRollingSessionReceiver, Integer maxConcurrentSessions) {\n+    ReceiverOptions(ReceiveMode receiveMode, int prefetchCount, Duration maxAutoLockRenewalDuration,\n+        String sessionId, boolean isRollingSessionReceiver, Integer maxConcurrentSessions) {\n         this.receiveMode = receiveMode;\n         this.prefetchCount = prefetchCount;\n+        this.maxAutoLockRenewalDuration = maxAutoLockRenewalDuration;\n         this.sessionId = sessionId;\n         this.isRollingSessionReceiver = isRollingSessionReceiver;\n         this.maxConcurrentSessions = maxConcurrentSessions;\n         this.isSessionReceiver = true;\n     }\n \n+    /**\n+     * Gets whether or not the receiver is a session-aware receiver.\n+     *\n+     * @return true if it is a session-aware receiver; false otherwise.\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fbe30913e39d49dd5b5469257e1fdbec265d547"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzAwMjYzNw==", "bodyText": "Explain little bit about If there are multiple session This would apply on each session separately.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11272#discussion_r427002637", "createdAt": "2020-05-19T03:01:59Z", "author": {"login": "hemanttanwar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -542,16 +549,29 @@ public ServiceBusSenderClient buildClient() {\n         private String sessionId;\n         private String subscriptionName;\n         private String topicName;\n+        private Duration maxAutoLockRenewalDuration;\n \n         private ServiceBusSessionReceiverClientBuilder() {\n         }\n \n+        /**\n+         * Enables auto-lock renewal by renewing session lock renewal until the {@code maxAutoLockRenewalDuration} has\n+         * elapsed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fbe30913e39d49dd5b5469257e1fdbec265d547"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzAwMzAxNw==", "bodyText": "This documentation should be for non session receiver because this builder belongs to non-session entities.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/11272#discussion_r427003017", "createdAt": "2020-05-19T03:03:35Z", "author": {"login": "hemanttanwar"}, "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -734,10 +760,23 @@ private boolean isRollingSessionReceiver() {\n         private ReceiveMode receiveMode = ReceiveMode.PEEK_LOCK;\n         private String subscriptionName;\n         private String topicName;\n+        private Duration maxAutoLockRenewalDuration;\n \n         private ServiceBusReceiverClientBuilder() {\n         }\n \n+        /**\n+         * Enables auto-lock renewal by renewing session lock renewal until the {@code maxAutoLockRenewalDuration} has\n+         * elapsed.\n+         *\n+         * @param maxAutoLockRenewalDuration Maximum amount of time to renew the session lock.\n+         * @return The modified {@link ServiceBusReceiverClientBuilder} object.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fbe30913e39d49dd5b5469257e1fdbec265d547"}, "originalPosition": 156}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c85b81acf753da52359ab2fe43a9bbcabe0fe84d", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c85b81acf753da52359ab2fe43a9bbcabe0fe84d", "committedDate": "2020-05-19T03:24:26Z", "message": "Fix documentation. Add overload for String."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4121, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}