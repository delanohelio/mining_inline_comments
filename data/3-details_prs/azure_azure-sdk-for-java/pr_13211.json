{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5NzUxNDk3", "number": 13211, "title": "Update for bannedDependency includes and beta_ tags", "bodyText": "There are 3 changes in this PR\n\nThe auto-increment code's handling of the dependency version during the release:\n\n\nIf the dependency version is a GA version and we released a GA version then it should be updated to the latest GA version\nIf the dependency version is a GA version and we released a beta, the dependency version should stay at the GA version. The current version would be updated to the next beta.\nIf the dependency version is beta and we released a beta, then the dependency version will be updated to whatever current was (if they were different) and current's version would be updated to the next beta\n\n\n\nThe beta_ tag, which should be used to set a dependency version on the released beta if the library's dependency version is GA, should also be updated to the current version for the From Source runs. Increment_version.py was also updated to ensure when loading the version file, that any unreleased_ or beta_ entries have matching non-unreleased_ or non-beta_ entries, respectively. This is done to prevent erroneous entries for unreleased_ or beta_ artifacts.\n\n\nThe bannedDependency Includes weren't being inherited correctly. There weren't a lot of duplicate entries but com.azure:* ended up in every library's bannedDependency Includes. The actual fix here was to do a combine.children=\"append\" in the parent's plugin configuration inside of sdk/parents/azure-client-sdk-parent/pom.xml. The majority of pom file changes for this was just to remove com.azure:* however I also inspected everything to ensure we didn't needless have entries in the banned dependencies includes list. I found that there were some test only dependencies in the includes which aren't necessary as test only dependencies do not get flagged by dependency enforcer, only runtime, compiled and provided.\n\n\n/CC @saragluna @yiliuTo @jialindai\nAn addendum to issue 3, above, is that com.microsoft.azure:* should not be anyplace other than Jacoco. The reason being is that every com.microsoft.azure dependency in Jacoco is most definitely something we build and we're producing coverage reports. There were 4 spring pom files using this in their bannedDependencies that shouldn't have been. The com.microsoft.azure groupId contains a number of artifacts that are not build or controlled by us. Two of the files have dependencies on com.microsoft.azure which was getting blanked included because of the com.microsoft.azure:* wildcard. For individual libraries pom files, any dependency with the com.microsoft.azure groupId needs to explicitly have its own include entry.", "createdAt": "2020-07-15T21:32:00Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13211", "merged": true, "mergeCommit": {"oid": "84cd70c4da775ff5ce921f36f9b21ae0f97692fa"}, "closed": true, "closedAt": "2020-07-15T23:18:28Z", "author": {"login": "JimSuplizio"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1RFgSAH2gAyNDQ5NzUxNDk3OjZlZGVlZjQ4YzQ5MDY4NTM4ZDQ1NTBhOGE1NjhjODM4NTNhOTFmNWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1R8WDAH2gAyNDQ5NzUxNDk3OjdmMGUyMTY1ZWNlM2IzYzczZjg5MTBhNTQ3MmQzNjE2OWFmOTA1M2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6edeef48c49068538d4550a8a568c83853a91f5e", "author": {"user": {"login": "JimSuplizio", "name": "James Suplizio"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/6edeef48c49068538d4550a8a568c83853a91f5e", "committedDate": "2020-07-15T20:58:28Z", "message": "Update for bannedDependency includes and beta_ tags"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MzYzMTQ0", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13211#pullrequestreview-449363144", "createdAt": "2020-07-15T21:38:43Z", "commit": {"oid": "6edeef48c49068538d4550a8a568c83853a91f5e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMTozODo0M1rOGyRrnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQyMTozODo0M1rOGyRrnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM3MTY3OQ==", "bodyText": "I think there might be a word missing after \"effectively\" here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13211#discussion_r455371679", "createdAt": "2020-07-15T21:38:43Z", "author": {"login": "vcolin7"}, "path": "eng/versioning/set_versions.py", "diffHunk": "@@ -221,6 +224,20 @@ def prep_version_file_for_source_testing(build_type):\n                 if hasattr(module, 'current') and not module.current == module.dependency:\n                     module.dependency = module.current\n                     file_changed = True\n+                # In order to ensure that the From Source runs are effectively, ensure that", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6edeef48c49068538d4550a8a568c83853a91f5e"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5MzcwNDIy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13211#pullrequestreview-449370422", "createdAt": "2020-07-15T21:52:49Z", "commit": {"oid": "6edeef48c49068538d4550a8a568c83853a91f5e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f0e2165ece3b3c73f8910a5472d36169af9053a", "author": {"user": {"login": "JimSuplizio", "name": "James Suplizio"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7f0e2165ece3b3c73f8910a5472d36169af9053a", "committedDate": "2020-07-15T21:58:22Z", "message": "Update comment to remove sentence fragment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1272, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}