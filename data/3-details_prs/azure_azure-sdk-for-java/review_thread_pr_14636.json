{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2MDY3NTcy", "number": 14636, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNjowNTozOFrOEeK7yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMDoxNDo1NlrOEedSBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMDcxODgxOnYy", "diffSide": "RIGHT", "path": "sdk/cosmos/azure-cosmos/src/main/java/module-info.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNjowNTozOFrOHJrgow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxNzo1Mzo1MFrOHKCqkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMjA5OQ==", "bodyText": "Why do we need this?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r479912099", "createdAt": "2020-08-31T06:05:38Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/module-info.java", "diffHunk": "@@ -32,7 +32,7 @@\n     exports com.azure.cosmos.util;\n \n     // exporting some packages specifically for Jackson\n-    opens com.azure.cosmos to com.fasterxml.jackson.databind;\n+    opens com.azure.cosmos to com.fasterxml.jackson.databind, org.apache.commons.lang3;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dee60bba128bc39cd1409315cb160a8e91606d68"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkzMzc3NA==", "bodyText": "We use reflection to retrieve userAgentSuffix field of cosmosClient: https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/cosmos/azure-spring-data-cosmos-core/src/main/java/com/azure/spring/data/cosmos/CosmosFactory.java#L87", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r479933774", "createdAt": "2020-08-31T06:59:11Z", "author": {"login": "saragluna"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/module-info.java", "diffHunk": "@@ -32,7 +32,7 @@\n     exports com.azure.cosmos.util;\n \n     // exporting some packages specifically for Jackson\n-    opens com.azure.cosmos to com.fasterxml.jackson.databind;\n+    opens com.azure.cosmos to com.fasterxml.jackson.databind, org.apache.commons.lang3;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMjA5OQ=="}, "originalCommit": {"oid": "dee60bba128bc39cd1409315cb160a8e91606d68"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI2MDAwNw==", "bodyText": "But that code piece is in spring-data-cosmos-core and here we are exporting apache commons lang 3 to azure-cosmos module, which doesn't use this dependency at all. Let's discuss this offline today.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r480260007", "createdAt": "2020-08-31T16:54:48Z", "author": {"login": "kushagraThapar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/module-info.java", "diffHunk": "@@ -32,7 +32,7 @@\n     exports com.azure.cosmos.util;\n \n     // exporting some packages specifically for Jackson\n-    opens com.azure.cosmos to com.fasterxml.jackson.databind;\n+    opens com.azure.cosmos to com.fasterxml.jackson.databind, org.apache.commons.lang3;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMjA5OQ=="}, "originalCommit": {"oid": "dee60bba128bc39cd1409315cb160a8e91606d68"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDI5MTQ3NQ==", "bodyText": "Yes, cosmos package should have no dependency or reference to org.apache.commons.lang3.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r480291475", "createdAt": "2020-08-31T17:53:50Z", "author": {"login": "srnagar"}, "path": "sdk/cosmos/azure-cosmos/src/main/java/module-info.java", "diffHunk": "@@ -32,7 +32,7 @@\n     exports com.azure.cosmos.util;\n \n     // exporting some packages specifically for Jackson\n-    opens com.azure.cosmos to com.fasterxml.jackson.databind;\n+    opens com.azure.cosmos to com.fasterxml.jackson.databind, org.apache.commons.lang3;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMjA5OQ=="}, "originalCommit": {"oid": "dee60bba128bc39cd1409315cb160a8e91606d68"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMzcxMzgyOnYy", "diffSide": "RIGHT", "path": "sdk/cosmos/azure-spring-data-cosmos-core/src/main/java/module-info.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMDoxMToyMFrOHKHmjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQwNTozNDoyOVrOHKj3_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3MjM2NQ==", "bodyText": "nit: missing trailing empty line.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r480372365", "createdAt": "2020-08-31T20:11:20Z", "author": {"login": "conniey"}, "path": "sdk/cosmos/azure-spring-data-cosmos-core/src/main/java/module-info.java", "diffHunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+module com.azure.spring.data.cosmos {\n+\n+    requires transitive com.azure.cosmos;\n+    requires com.fasterxml.jackson.datatype.jdk8;\n+    requires com.fasterxml.jackson.module.paramnames;\n+    requires java.desktop;\n+    requires org.apache.commons.lang3;\n+    requires org.slf4j;\n+    requires spring.beans;\n+    requires spring.context;\n+    requires spring.core;\n+    requires spring.data.commons;\n+    requires spring.expression;\n+    requires spring.tx;\n+\n+    exports com.azure.spring.data.cosmos;\n+    exports com.azure.spring.data.cosmos.common;\n+    exports com.azure.spring.data.cosmos.config;\n+    exports com.azure.spring.data.cosmos.core.convert;\n+    exports com.azure.spring.data.cosmos.core;\n+    exports com.azure.spring.data.cosmos.core.mapping;\n+    exports com.azure.spring.data.cosmos.exception;\n+    exports com.azure.spring.data.cosmos.repository;\n+    exports com.azure.spring.data.cosmos.repository.config;\n+    exports com.azure.spring.data.cosmos.repository.support;\n+\n+    opens com.azure.spring.data.cosmos.config to spring.core;\n+    opens com.azure.spring.data.cosmos.repository.support to spring.beans;\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5017648bdcdb573acd480dbdcae25ea754bbad5"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDgzNTU4Mw==", "bodyText": "added", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r480835583", "createdAt": "2020-09-01T05:34:29Z", "author": {"login": "saragluna"}, "path": "sdk/cosmos/azure-spring-data-cosmos-core/src/main/java/module-info.java", "diffHunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+module com.azure.spring.data.cosmos {\n+\n+    requires transitive com.azure.cosmos;\n+    requires com.fasterxml.jackson.datatype.jdk8;\n+    requires com.fasterxml.jackson.module.paramnames;\n+    requires java.desktop;\n+    requires org.apache.commons.lang3;\n+    requires org.slf4j;\n+    requires spring.beans;\n+    requires spring.context;\n+    requires spring.core;\n+    requires spring.data.commons;\n+    requires spring.expression;\n+    requires spring.tx;\n+\n+    exports com.azure.spring.data.cosmos;\n+    exports com.azure.spring.data.cosmos.common;\n+    exports com.azure.spring.data.cosmos.config;\n+    exports com.azure.spring.data.cosmos.core.convert;\n+    exports com.azure.spring.data.cosmos.core;\n+    exports com.azure.spring.data.cosmos.core.mapping;\n+    exports com.azure.spring.data.cosmos.exception;\n+    exports com.azure.spring.data.cosmos.repository;\n+    exports com.azure.spring.data.cosmos.repository.config;\n+    exports com.azure.spring.data.cosmos.repository.support;\n+\n+    opens com.azure.spring.data.cosmos.config to spring.core;\n+    opens com.azure.spring.data.cosmos.repository.support to spring.beans;\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3MjM2NQ=="}, "originalCommit": {"oid": "e5017648bdcdb573acd480dbdcae25ea754bbad5"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMzcyNDg0OnYy", "diffSide": "RIGHT", "path": "sdk/parents/azure-client-sdk-parent/pom.xml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMDoxNDo1NlrOHKHtXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNzoyMzoxNVrOHMwecQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3NDEwOA==", "bodyText": "These should not be in azure-client-sdk-parent. They are inherited by every child module. You should move these to the area path's SDK.\n/cc @alzimmermsft", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r480374108", "createdAt": "2020-08-31T20:14:56Z", "author": {"login": "conniey"}, "path": "sdk/parents/azure-client-sdk-parent/pom.xml", "diffHunk": "@@ -1142,6 +1142,18 @@\n                 <!-- Azure-core needs to open the test entities to Jackson for unit tests to operate -->\n                 --add-opens com.azure.core/com.azure.core.implementation.entities=com.fasterxml.jackson.databind\n                 --add-opens com.azure.core/com.azure.core.implementation.entities=ALL-UNNAMED\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5017648bdcdb573acd480dbdcae25ea754bbad5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDkwNzU1Ng==", "bodyText": "Inherited from the child's pom.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r480907556", "createdAt": "2020-09-01T07:15:58Z", "author": {"login": "saragluna"}, "path": "sdk/parents/azure-client-sdk-parent/pom.xml", "diffHunk": "@@ -1142,6 +1142,18 @@\n                 <!-- Azure-core needs to open the test entities to Jackson for unit tests to operate -->\n                 --add-opens com.azure.core/com.azure.core.implementation.entities=com.fasterxml.jackson.databind\n                 --add-opens com.azure.core/com.azure.core.implementation.entities=ALL-UNNAMED\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3NDEwOA=="}, "originalCommit": {"oid": "e5017648bdcdb573acd480dbdcae25ea754bbad5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDkwOTM1OQ==", "bodyText": "And there're some more --add-opens and --add-exports in the parent's pom, should they be moved to the children's poms too?\n\n  \n    \n      azure-sdk-for-java/sdk/parents/azure-client-sdk-parent/pom.xml\n    \n    \n         Line 1088\n      in\n      e501764\n    \n    \n    \n    \n\n        \n          \n           <argLine>", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r480909359", "createdAt": "2020-09-01T07:18:16Z", "author": {"login": "saragluna"}, "path": "sdk/parents/azure-client-sdk-parent/pom.xml", "diffHunk": "@@ -1142,6 +1142,18 @@\n                 <!-- Azure-core needs to open the test entities to Jackson for unit tests to operate -->\n                 --add-opens com.azure.core/com.azure.core.implementation.entities=com.fasterxml.jackson.databind\n                 --add-opens com.azure.core/com.azure.core.implementation.entities=ALL-UNNAMED\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3NDEwOA=="}, "originalCommit": {"oid": "e5017648bdcdb573acd480dbdcae25ea754bbad5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEzOTE4NQ==", "bodyText": "@conniey - can you please provide an update on the above discussion ?\nWe are trying to close this for our next release - which is early next week, and would like to get this change in by Friday (code complete)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14636#discussion_r483139185", "createdAt": "2020-09-03T17:23:15Z", "author": {"login": "kushagraThapar"}, "path": "sdk/parents/azure-client-sdk-parent/pom.xml", "diffHunk": "@@ -1142,6 +1142,18 @@\n                 <!-- Azure-core needs to open the test entities to Jackson for unit tests to operate -->\n                 --add-opens com.azure.core/com.azure.core.implementation.entities=com.fasterxml.jackson.databind\n                 --add-opens com.azure.core/com.azure.core.implementation.entities=ALL-UNNAMED\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM3NDEwOA=="}, "originalCommit": {"oid": "e5017648bdcdb573acd480dbdcae25ea754bbad5"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1328, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}