{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4ODM4NjY1", "number": 16008, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjoyNzo1M1rOErz-DA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNjo0NDozN1rOEum4PQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0Mzc1NjkyOnYy", "diffSide": "RIGHT", "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjoyNzo1M1rOHeyhSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjoyNzo1M1rOHeyhSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjA0NzA1MQ==", "bodyText": "Why not just put this inline like:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      Urls: $(diffMarkdown)\n          \n          \n            \n                      Urls: (git diff origin/master HEAD --name-only -- *.md)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r502047051", "createdAt": "2020-10-08T22:27:53Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -162,9 +162,15 @@ jobs:\n           ward scan -d $(Build.SourcesDirectory) -c $(Build.SourcesDirectory)/eng/.docsettings.yml\n         displayName: 'Verify Readmes'\n \n+      - pwsh: |\n+            $diffs = git diff origin/master HEAD --name-only -- *.md\n+            echo \"##vso[task.setvariable variable=diffMarkdown]$diffs\"\n+        displayName: 'Find diff files'\n+\n       - template: ../../../common/pipelines/templates/steps/verify-links.yml\n         parameters:\n           Directory: sdk/${{ parameters.ServiceDirectory }}\n+          Urls: $(diffMarkdown)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d35b6bb39cbdaf4456dc925957b887aebd193bc7"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0Mzc2NTU2OnYy", "diffSide": "RIGHT", "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjozMToyNFrOHeymXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQyMjozMToyNFrOHeymXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjA0ODM0OQ==", "bodyText": "Your diff command will find all files in the PR not just files under the service directory so we may need to figure out what Directory we want to pass here.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r502048349", "createdAt": "2020-10-08T22:31:24Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -162,9 +162,15 @@ jobs:\n           ward scan -d $(Build.SourcesDirectory) -c $(Build.SourcesDirectory)/eng/.docsettings.yml\n         displayName: 'Verify Readmes'\n \n+      - pwsh: |\n+            $diffs = git diff origin/master HEAD --name-only -- *.md\n+            echo \"##vso[task.setvariable variable=diffMarkdown]$diffs\"\n+        displayName: 'Find diff files'\n+\n       - template: ../../../common/pipelines/templates/steps/verify-links.yml\n         parameters:\n           Directory: sdk/${{ parameters.ServiceDirectory }}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d35b6bb39cbdaf4456dc925957b887aebd193bc7"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1ODczNDk4OnYy", "diffSide": "RIGHT", "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QyMjowMjo1NVrOHg7FBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNjowNToxOVrOHhacZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI4NDQyMQ==", "bodyText": "Is this the correct diff? What if this pipeline runs against a feature branch? This will produce a potentially large diff with a lot of files. I think we are going to need to figure out the correct set files to diff for pull requests as well as the correct set of changes if running outside of a pull request (i.e. manual, CI, scheduled)", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r504284421", "createdAt": "2020-10-13T22:02:55Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -164,7 +164,8 @@ jobs:\n \n       - template: ../../../common/pipelines/templates/steps/verify-links.yml\n         parameters:\n-          Directory: sdk/${{ parameters.ServiceDirectory }}\n+          Directory: ''\n+          Urls: (git diff origin/master HEAD --name-only -- *.md)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d14a83978a7c85795c46c0009c356b0925a9bde8"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc5ODMwOA==", "bodyText": "Will make change to git diff on base branch. Will test over on manual cases.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r504798308", "createdAt": "2020-10-14T16:05:19Z", "author": {"login": "sima-zhu"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -164,7 +164,8 @@ jobs:\n \n       - template: ../../../common/pipelines/templates/steps/verify-links.yml\n         parameters:\n-          Directory: sdk/${{ parameters.ServiceDirectory }}\n+          Directory: ''\n+          Urls: (git diff origin/master HEAD --name-only -- *.md)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDI4NDQyMQ=="}, "originalCommit": {"oid": "d14a83978a7c85795c46c0009c356b0925a9bde8"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2NDE5MTU1OnYy", "diffSide": "RIGHT", "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwMzoxODozN1rOHhvUiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNjo0NTozMFrOHiQ3fQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTE0MDM2MA==", "bodyText": "We should figure out how to condition this step to only run for pull requests.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r505140360", "createdAt": "2020-10-15T03:18:37Z", "author": {"login": "weshaggard"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -164,7 +164,8 @@ jobs:\n \n       - template: ../../../common/pipelines/templates/steps/verify-links.yml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a0e36afc461c6fc4c3d9a060686f3129e0e635b"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTY4OTk4MQ==", "bodyText": "Made the change", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r505689981", "createdAt": "2020-10-15T16:45:30Z", "author": {"login": "sima-zhu"}, "path": "eng/pipelines/templates/jobs/archetype-sdk-client.yml", "diffHunk": "@@ -164,7 +164,8 @@ jobs:\n \n       - template: ../../../common/pipelines/templates/steps/verify-links.yml", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTE0MDM2MA=="}, "originalCommit": {"oid": "5a0e36afc461c6fc4c3d9a060686f3129e0e635b"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3MzA2OTQxOnYy", "diffSide": "RIGHT", "path": "eng/common/scripts/Verify-Links.ps1", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNjo0NDozN1rOHjIK_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNjo0Nzo1MlrOHjIRuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU5NjA5NQ==", "bodyText": "I assume this is just for testing?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r506596095", "createdAt": "2020-10-16T16:44:37Z", "author": {"login": "weshaggard"}, "path": "eng/common/scripts/Verify-Links.ps1", "diffHunk": "@@ -262,7 +262,13 @@ function GetLinks([System.Uri]$pageUri)\n \n   return $links;\n }\n+Write-Host \"There are $($urls.length) files.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c37dbf75c4b6ff4329765b4cdfcbc5baf80c0287"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU5NzgxOQ==", "bodyText": "Yes, it is for testing. Will remove.\nI found the script did not pick up HEAD correctly. I have 2 readme changes, but only one got picked up.\ngit diff origin/master HEAD --name-only -- *.md\n\nI am trying to use commit and test\ngit diff origin/master \"${env:SYSTEM_PULLREQUEST_SOURCECOMMITID}\" --name-only -- *.md", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16008#discussion_r506597819", "createdAt": "2020-10-16T16:47:52Z", "author": {"login": "sima-zhu"}, "path": "eng/common/scripts/Verify-Links.ps1", "diffHunk": "@@ -262,7 +262,13 @@ function GetLinks([System.Uri]$pageUri)\n \n   return $links;\n }\n+Write-Host \"There are $($urls.length) files.\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU5NjA5NQ=="}, "originalCommit": {"oid": "c37dbf75c4b6ff4329765b4cdfcbc5baf80c0287"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3539, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}