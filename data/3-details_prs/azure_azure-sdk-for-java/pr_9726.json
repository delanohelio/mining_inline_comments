{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2NjUwNjYw", "number": 9726, "title": "Remove dependencies related to reflection assertion", "bodyText": "", "createdAt": "2020-03-31T22:44:47Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726", "merged": true, "mergeCommit": {"oid": "de84f8b221ff2043759df8a0f307d5cf96a56c34"}, "closed": true, "closedAt": "2020-04-02T18:00:19Z", "author": {"login": "sima-zhu"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcS2nFagH2gAyMzk2NjUwNjYwOmI1YTFmZmRiNTQ0MjMyZmYzMGQxYmQ4OWJkNTgyZDg4ZGQ0OWM5NWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTv4kPAH2gAyMzk2NjUwNjYwOmNmMTRiZGM4MzQ4MDVlYzYyZThkMzdkODY3OWVkMjM2YjFkNDk1YWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b5a1ffdb544232ff30d1bd89bd582d88dd49c95f", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b5a1ffdb544232ff30d1bd89bd582d88dd49c95f", "committedDate": "2020-03-30T22:54:17Z", "message": "Make more changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4994deadc2e483a1b366482ab43324edfb123037", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4994deadc2e483a1b366482ab43324edfb123037", "committedDate": "2020-03-31T17:07:18Z", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e33b188d498366ff93042f3a997c9ec5a814729d", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/e33b188d498366ff93042f3a997c9ec5a814729d", "committedDate": "2020-03-31T22:43:35Z", "message": "Remove dependencies related to reflection assertion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "598ac8adcf91b25a21c5599e1a963a08c9b39dfc", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/598ac8adcf91b25a21c5599e1a963a08c9b39dfc", "committedDate": "2020-03-31T22:51:12Z", "message": "Clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71ff703f8b69d3a0b00973ada4a89be2b5039045", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/71ff703f8b69d3a0b00973ada4a89be2b5039045", "committedDate": "2020-04-01T00:40:39Z", "message": "remove debug setting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NzA4Mzg1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#pullrequestreview-385708385", "createdAt": "2020-04-01T15:38:36Z", "commit": {"oid": "71ff703f8b69d3a0b00973ada4a89be2b5039045"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNTozODozNlrOF_Gk1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNTozODozNlrOF_Gk1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcxMjM0Mw==", "bodyText": "Did we want to remove this?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#discussion_r401712343", "createdAt": "2020-04-01T15:38:36Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/tests.yml", "diffHunk": "@@ -5,9 +5,6 @@ jobs:\n     parameters:\n       ServiceDirectory: search\n       Timeout: 120\n-      # Live tests create their own resources for testing. Resources are created against a\n-      # finite resource pool, so we limit parallelism to conserve availability in that pool.\n-      MaxParallel: 3", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71ff703f8b69d3a0b00973ada4a89be2b5039045"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NzA5Mzc4", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#pullrequestreview-385709378", "createdAt": "2020-04-01T15:39:41Z", "commit": {"oid": "71ff703f8b69d3a0b00973ada4a89be2b5039045"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNTozOTo0MVrOF_GoEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNTozOTo0MVrOF_GoEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcxMzE2OQ==", "bodyText": "nit: Possibly rename this to shouldCheckField", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#discussion_r401713169", "createdAt": "2020-04-01T15:39:41Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/test/java/com/azure/search/documents/TestHelpers.java", "diffHunk": "@@ -152,4 +96,77 @@ public static MatchConditions generateIfExistsAccessCondition() {\n     public static MatchConditions generateIfNotChangedAccessCondition(String eTag) {\n         return new MatchConditions().setIfMatch(eTag);\n     }\n+\n+    public static void assertObjectEquals(Object expected, Object actual) {\n+        JacksonAdapter jacksonAdapter = new JacksonAdapter();\n+        try {\n+            assertEquals(jacksonAdapter.serialize(expected, SerializerEncoding.JSON),\n+                jacksonAdapter.serialize(actual, SerializerEncoding.JSON));\n+        } catch (IOException ex) {\n+            fail(\"There is something wrong happen in serializer.\");\n+        }\n+    }\n+\n+    public static void assertObjectEquals(Object expected, Object actual, boolean ignoreDefaults,\n+        String ... ignoreFields) {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode expectedNode = mapper.valueToTree(expected);\n+        ObjectNode actualNode = mapper.valueToTree(actual);\n+        assertOnMapIterator(expectedNode.fields(), actualNode, ignoreDefaults, ignoreFields);\n+    }\n+\n+    private static void assertOnMapIterator(Iterator<Map.Entry<String, JsonNode>> expectedNode,\n+        ObjectNode actualNode, boolean ignoreDefaults, String[] ignoreFields) {\n+        while (expectedNode.hasNext()) {\n+            assertTrue(actualNode.fields().hasNext());\n+            Map.Entry<String, JsonNode> expectedField = expectedNode.next();\n+            String fieldName = expectedField.getKey();\n+            if (!doesFieldNeedCheck(fieldName, expectedField.getValue(), ignoreDefaults, ignoreFields)) {\n+                continue;\n+            }\n+            if (expectedField.getValue().isValueNode()) {\n+                assertEquals(expectedField.getValue(), actualNode.get(expectedField.getKey()));\n+            } else if (expectedField.getValue().isArray()) {\n+                Iterator<JsonNode> expectedArray = expectedField.getValue().elements();\n+                Iterator<JsonNode> actualArray = actualNode.get(expectedField.getKey()).elements();\n+                while (expectedArray.hasNext() ) {\n+                    assertTrue(actualArray.hasNext());\n+                    Iterator<JsonNode> expectedElements = expectedArray.next().elements();\n+                    Iterator<JsonNode> actualElements = actualArray.next().elements();\n+                    while (expectedElements.hasNext()) {\n+                        assertTrue(actualElements.hasNext());\n+                        JsonNode a = expectedElements.next();\n+                        JsonNode b = actualElements.next();\n+                        if (Arrays.asList(ignoreFields).contains(fieldName)) {\n+                            continue;\n+                        }\n+                        if (!doesFieldNeedCheck(null, a, true)) {\n+                            continue;\n+                        }\n+                        assertEquals(a.asText(), b.asText());\n+                    }\n+                }\n+            } else {\n+                assertObjectEquals(expectedField.getValue(), actualNode.get(expectedField.getKey()), ignoreDefaults, ignoreFields);\n+            }\n+        }\n+    }\n+\n+    private static boolean doesFieldNeedCheck(String fieldName, JsonNode fieldValue,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71ff703f8b69d3a0b00973ada4a89be2b5039045"}, "originalPosition": 157}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NzExNDg2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#pullrequestreview-385711486", "createdAt": "2020-04-01T15:42:02Z", "commit": {"oid": "71ff703f8b69d3a0b00973ada4a89be2b5039045"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNTo0MjowM1rOF_Guog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNTo0Njo1MFrOF_G8cw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcxNDg1MA==", "bodyText": "nit: Renamed this to ignoredFields", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#discussion_r401714850", "createdAt": "2020-04-01T15:42:03Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/test/java/com/azure/search/documents/TestHelpers.java", "diffHunk": "@@ -152,4 +96,77 @@ public static MatchConditions generateIfExistsAccessCondition() {\n     public static MatchConditions generateIfNotChangedAccessCondition(String eTag) {\n         return new MatchConditions().setIfMatch(eTag);\n     }\n+\n+    public static void assertObjectEquals(Object expected, Object actual) {\n+        JacksonAdapter jacksonAdapter = new JacksonAdapter();\n+        try {\n+            assertEquals(jacksonAdapter.serialize(expected, SerializerEncoding.JSON),\n+                jacksonAdapter.serialize(actual, SerializerEncoding.JSON));\n+        } catch (IOException ex) {\n+            fail(\"There is something wrong happen in serializer.\");\n+        }\n+    }\n+\n+    public static void assertObjectEquals(Object expected, Object actual, boolean ignoreDefaults,\n+        String ... ignoreFields) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71ff703f8b69d3a0b00973ada4a89be2b5039045"}, "originalPosition": 113}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcxNTE1MA==", "bodyText": "If this is going to be passed in many times should we convert ignoredFields to a Set before processing?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#discussion_r401715150", "createdAt": "2020-04-01T15:42:29Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/test/java/com/azure/search/documents/TestHelpers.java", "diffHunk": "@@ -152,4 +96,77 @@ public static MatchConditions generateIfExistsAccessCondition() {\n     public static MatchConditions generateIfNotChangedAccessCondition(String eTag) {\n         return new MatchConditions().setIfMatch(eTag);\n     }\n+\n+    public static void assertObjectEquals(Object expected, Object actual) {\n+        JacksonAdapter jacksonAdapter = new JacksonAdapter();\n+        try {\n+            assertEquals(jacksonAdapter.serialize(expected, SerializerEncoding.JSON),\n+                jacksonAdapter.serialize(actual, SerializerEncoding.JSON));\n+        } catch (IOException ex) {\n+            fail(\"There is something wrong happen in serializer.\");\n+        }\n+    }\n+\n+    public static void assertObjectEquals(Object expected, Object actual, boolean ignoreDefaults,\n+        String ... ignoreFields) {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode expectedNode = mapper.valueToTree(expected);\n+        ObjectNode actualNode = mapper.valueToTree(actual);\n+        assertOnMapIterator(expectedNode.fields(), actualNode, ignoreDefaults, ignoreFields);\n+    }\n+\n+    private static void assertOnMapIterator(Iterator<Map.Entry<String, JsonNode>> expectedNode,\n+        ObjectNode actualNode, boolean ignoreDefaults, String[] ignoreFields) {\n+        while (expectedNode.hasNext()) {\n+            assertTrue(actualNode.fields().hasNext());\n+            Map.Entry<String, JsonNode> expectedField = expectedNode.next();\n+            String fieldName = expectedField.getKey();\n+            if (!doesFieldNeedCheck(fieldName, expectedField.getValue(), ignoreDefaults, ignoreFields)) {\n+                continue;\n+            }\n+            if (expectedField.getValue().isValueNode()) {\n+                assertEquals(expectedField.getValue(), actualNode.get(expectedField.getKey()));\n+            } else if (expectedField.getValue().isArray()) {\n+                Iterator<JsonNode> expectedArray = expectedField.getValue().elements();\n+                Iterator<JsonNode> actualArray = actualNode.get(expectedField.getKey()).elements();\n+                while (expectedArray.hasNext() ) {\n+                    assertTrue(actualArray.hasNext());\n+                    Iterator<JsonNode> expectedElements = expectedArray.next().elements();\n+                    Iterator<JsonNode> actualElements = actualArray.next().elements();\n+                    while (expectedElements.hasNext()) {\n+                        assertTrue(actualElements.hasNext());\n+                        JsonNode a = expectedElements.next();\n+                        JsonNode b = actualElements.next();\n+                        if (Arrays.asList(ignoreFields).contains(fieldName)) {\n+                            continue;\n+                        }\n+                        if (!doesFieldNeedCheck(null, a, true)) {\n+                            continue;\n+                        }\n+                        assertEquals(a.asText(), b.asText());\n+                    }\n+                }\n+            } else {\n+                assertObjectEquals(expectedField.getValue(), actualNode.get(expectedField.getKey()), ignoreDefaults, ignoreFields);\n+            }\n+        }\n+    }\n+\n+    private static boolean doesFieldNeedCheck(String fieldName, JsonNode fieldValue,\n+        boolean ignoreDefaults, String... ignoreFields) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71ff703f8b69d3a0b00973ada4a89be2b5039045"}, "originalPosition": 158}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcxNjIwMg==", "bodyText": "Another possible name is shouldSkipField since it's only use is negated.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#discussion_r401716202", "createdAt": "2020-04-01T15:43:54Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/test/java/com/azure/search/documents/TestHelpers.java", "diffHunk": "@@ -152,4 +96,77 @@ public static MatchConditions generateIfExistsAccessCondition() {\n     public static MatchConditions generateIfNotChangedAccessCondition(String eTag) {\n         return new MatchConditions().setIfMatch(eTag);\n     }\n+\n+    public static void assertObjectEquals(Object expected, Object actual) {\n+        JacksonAdapter jacksonAdapter = new JacksonAdapter();\n+        try {\n+            assertEquals(jacksonAdapter.serialize(expected, SerializerEncoding.JSON),\n+                jacksonAdapter.serialize(actual, SerializerEncoding.JSON));\n+        } catch (IOException ex) {\n+            fail(\"There is something wrong happen in serializer.\");\n+        }\n+    }\n+\n+    public static void assertObjectEquals(Object expected, Object actual, boolean ignoreDefaults,\n+        String ... ignoreFields) {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode expectedNode = mapper.valueToTree(expected);\n+        ObjectNode actualNode = mapper.valueToTree(actual);\n+        assertOnMapIterator(expectedNode.fields(), actualNode, ignoreDefaults, ignoreFields);\n+    }\n+\n+    private static void assertOnMapIterator(Iterator<Map.Entry<String, JsonNode>> expectedNode,\n+        ObjectNode actualNode, boolean ignoreDefaults, String[] ignoreFields) {\n+        while (expectedNode.hasNext()) {\n+            assertTrue(actualNode.fields().hasNext());\n+            Map.Entry<String, JsonNode> expectedField = expectedNode.next();\n+            String fieldName = expectedField.getKey();\n+            if (!doesFieldNeedCheck(fieldName, expectedField.getValue(), ignoreDefaults, ignoreFields)) {\n+                continue;\n+            }\n+            if (expectedField.getValue().isValueNode()) {\n+                assertEquals(expectedField.getValue(), actualNode.get(expectedField.getKey()));\n+            } else if (expectedField.getValue().isArray()) {\n+                Iterator<JsonNode> expectedArray = expectedField.getValue().elements();\n+                Iterator<JsonNode> actualArray = actualNode.get(expectedField.getKey()).elements();\n+                while (expectedArray.hasNext() ) {\n+                    assertTrue(actualArray.hasNext());\n+                    Iterator<JsonNode> expectedElements = expectedArray.next().elements();\n+                    Iterator<JsonNode> actualElements = actualArray.next().elements();\n+                    while (expectedElements.hasNext()) {\n+                        assertTrue(actualElements.hasNext());\n+                        JsonNode a = expectedElements.next();\n+                        JsonNode b = actualElements.next();\n+                        if (Arrays.asList(ignoreFields).contains(fieldName)) {\n+                            continue;\n+                        }\n+                        if (!doesFieldNeedCheck(null, a, true)) {\n+                            continue;\n+                        }\n+                        assertEquals(a.asText(), b.asText());\n+                    }\n+                }\n+            } else {\n+                assertObjectEquals(expectedField.getValue(), actualNode.get(expectedField.getKey()), ignoreDefaults, ignoreFields);\n+            }\n+        }\n+    }\n+\n+    private static boolean doesFieldNeedCheck(String fieldName, JsonNode fieldValue,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcxMzE2OQ=="}, "originalCommit": {"oid": "71ff703f8b69d3a0b00973ada4a89be2b5039045"}, "originalPosition": 157}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcxODM4Nw==", "bodyText": "This is pretty risky code as null, false, and 0 could all be legitimate values being returned. Given that we are validating equality by traversing the JSON tree we could modify the serialization of the objects to always include default values and this section could be removed.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#discussion_r401718387", "createdAt": "2020-04-01T15:46:50Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/test/java/com/azure/search/documents/TestHelpers.java", "diffHunk": "@@ -152,4 +96,77 @@ public static MatchConditions generateIfExistsAccessCondition() {\n     public static MatchConditions generateIfNotChangedAccessCondition(String eTag) {\n         return new MatchConditions().setIfMatch(eTag);\n     }\n+\n+    public static void assertObjectEquals(Object expected, Object actual) {\n+        JacksonAdapter jacksonAdapter = new JacksonAdapter();\n+        try {\n+            assertEquals(jacksonAdapter.serialize(expected, SerializerEncoding.JSON),\n+                jacksonAdapter.serialize(actual, SerializerEncoding.JSON));\n+        } catch (IOException ex) {\n+            fail(\"There is something wrong happen in serializer.\");\n+        }\n+    }\n+\n+    public static void assertObjectEquals(Object expected, Object actual, boolean ignoreDefaults,\n+        String ... ignoreFields) {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode expectedNode = mapper.valueToTree(expected);\n+        ObjectNode actualNode = mapper.valueToTree(actual);\n+        assertOnMapIterator(expectedNode.fields(), actualNode, ignoreDefaults, ignoreFields);\n+    }\n+\n+    private static void assertOnMapIterator(Iterator<Map.Entry<String, JsonNode>> expectedNode,\n+        ObjectNode actualNode, boolean ignoreDefaults, String[] ignoreFields) {\n+        while (expectedNode.hasNext()) {\n+            assertTrue(actualNode.fields().hasNext());\n+            Map.Entry<String, JsonNode> expectedField = expectedNode.next();\n+            String fieldName = expectedField.getKey();\n+            if (!doesFieldNeedCheck(fieldName, expectedField.getValue(), ignoreDefaults, ignoreFields)) {\n+                continue;\n+            }\n+            if (expectedField.getValue().isValueNode()) {\n+                assertEquals(expectedField.getValue(), actualNode.get(expectedField.getKey()));\n+            } else if (expectedField.getValue().isArray()) {\n+                Iterator<JsonNode> expectedArray = expectedField.getValue().elements();\n+                Iterator<JsonNode> actualArray = actualNode.get(expectedField.getKey()).elements();\n+                while (expectedArray.hasNext() ) {\n+                    assertTrue(actualArray.hasNext());\n+                    Iterator<JsonNode> expectedElements = expectedArray.next().elements();\n+                    Iterator<JsonNode> actualElements = actualArray.next().elements();\n+                    while (expectedElements.hasNext()) {\n+                        assertTrue(actualElements.hasNext());\n+                        JsonNode a = expectedElements.next();\n+                        JsonNode b = actualElements.next();\n+                        if (Arrays.asList(ignoreFields).contains(fieldName)) {\n+                            continue;\n+                        }\n+                        if (!doesFieldNeedCheck(null, a, true)) {\n+                            continue;\n+                        }\n+                        assertEquals(a.asText(), b.asText());\n+                    }\n+                }\n+            } else {\n+                assertObjectEquals(expectedField.getValue(), actualNode.get(expectedField.getKey()), ignoreDefaults, ignoreFields);\n+            }\n+        }\n+    }\n+\n+    private static boolean doesFieldNeedCheck(String fieldName, JsonNode fieldValue,\n+        boolean ignoreDefaults, String... ignoreFields) {\n+        if (Arrays.asList(ignoreFields).contains(fieldName)) {\n+            return false;\n+        }\n+\n+        if (ignoreDefaults) {\n+            if (fieldValue.isNull()) {\n+                return false;\n+            }\n+            if (fieldValue.isBoolean() && !fieldValue.asBoolean()) {\n+                return false;\n+            }\n+            return !fieldValue.isNumber() || fieldValue.asDouble() != 0.0D;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71ff703f8b69d3a0b00973ada4a89be2b5039045"}, "originalPosition": 171}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bf211ecc51c6b1512de1d0c467c33cc714b6a28", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8bf211ecc51c6b1512de1d0c467c33cc714b6a28", "committedDate": "2020-04-01T17:09:00Z", "message": "Fixed linting."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NzkyNDgy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#pullrequestreview-385792482", "createdAt": "2020-04-01T17:19:52Z", "commit": {"oid": "8bf211ecc51c6b1512de1d0c467c33cc714b6a28"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNzoxOTo1MlrOF_KyDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNzoxOTo1MlrOF_KyDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc4MTI2MA==", "bodyText": "You'll want to move this outside of the while loop, right now this will be recreated each time.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#discussion_r401781260", "createdAt": "2020-04-01T17:19:52Z", "author": {"login": "alzimmermsft"}, "path": "sdk/search/azure-search-documents/src/test/java/com/azure/search/documents/TestHelpers.java", "diffHunk": "@@ -152,4 +98,93 @@ public static MatchConditions generateIfExistsAccessCondition() {\n     public static MatchConditions generateIfNotChangedAccessCondition(String eTag) {\n         return new MatchConditions().setIfMatch(eTag);\n     }\n+\n+    /**\n+     * Assert whether two objects are equal.\n+     *\n+     * @param expected The expected object.\n+     * @param actual The actual object.\n+     */\n+    public static void assertObjectEquals(Object expected, Object actual) {\n+        JacksonAdapter jacksonAdapter = new JacksonAdapter();\n+        try {\n+            assertEquals(jacksonAdapter.serialize(expected, SerializerEncoding.JSON),\n+                jacksonAdapter.serialize(actual, SerializerEncoding.JSON));\n+        } catch (IOException ex) {\n+            fail(\"There is something wrong happen in serializer.\");\n+        }\n+    }\n+\n+    /**\n+     * Assert whether two objects are equal.\n+     *\n+     * @param expected The expected object.\n+     * @param actual The actual object.\n+     * @param ignoredDefaults Set to true if it needs to ignore default value of expected object.\n+     * @param ignoredFields Varargs of ignored fields.\n+     */\n+    public static void assertObjectEquals(Object expected, Object actual, boolean ignoredDefaults,\n+        String... ignoredFields) {\n+        ObjectMapper mapper = new ObjectMapper();\n+        ObjectNode expectedNode = mapper.valueToTree(expected);\n+        ObjectNode actualNode = mapper.valueToTree(actual);\n+        assertOnMapIterator(expectedNode.fields(), actualNode, ignoredDefaults,ignoredFields);\n+    }\n+\n+    private static void assertOnMapIterator(Iterator<Map.Entry<String, JsonNode>> expectedNode,\n+        ObjectNode actualNode, boolean ignoredDefaults, String[] ignoredFields) {\n+        while (expectedNode.hasNext()) {\n+            assertTrue(actualNode.fields().hasNext());\n+            Map.Entry<String, JsonNode> expectedField = expectedNode.next();\n+            String fieldName = expectedField.getKey();\n+            Set<String> ignoredFieldSet = new HashSet<>(Arrays.asList(ignoredFields));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8bf211ecc51c6b1512de1d0c467c33cc714b6a28"}, "originalPosition": 142}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a177ac291223812f4d7889214d3df5003fb5ee3", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9a177ac291223812f4d7889214d3df5003fb5ee3", "committedDate": "2020-04-01T17:23:36Z", "message": "Address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg2NjEwMjk1", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9726#pullrequestreview-386610295", "createdAt": "2020-04-02T16:47:30Z", "commit": {"oid": "9a177ac291223812f4d7889214d3df5003fb5ee3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf14bdc834805ec62e8d37d8679ed236b1d495ac", "author": {"user": {"login": "sima-zhu", "name": "Sima Zhu"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cf14bdc834805ec62e8d37d8679ed236b1d495ac", "committedDate": "2020-04-02T17:37:58Z", "message": "remove external dependencies"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1301, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}