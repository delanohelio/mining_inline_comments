{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MDgwNjg4", "number": 7534, "title": "Clears closed/errored sessions and links", "bodyText": "Fixes issues when a connection/session/link idles and is closed. This cleans up those old sessions and links.\nUpdates log messages. There are multiple instances of some classes and it is hard to discern which one is for which.\nFixes a bug where it would not wait for the reactor to finish scheduling remaining tasks before disposing of instance.", "createdAt": "2020-01-17T10:46:59Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7534", "merged": true, "mergeCommit": {"oid": "6b587326c78049b855136993296b5fcabdc82742"}, "closed": true, "closedAt": "2020-01-18T07:37:19Z", "author": {"login": "conniey"}, "timelineItems": {"totalCount": 43, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7DBB3AH2gAyMzY0MDgwNjg4OjE1OTYxYjRmZDQ2M2MxMDdkYTMyYTc4NTVjNmRmYTZiYjc2MTM5ZTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb7dQGzAH2gAyMzY0MDgwNjg4OmEwYjliM2YwOTkxNmU2ZmY1NTdlMzY0ZDRmNWFmODMxYjk0ODE5Y2Q=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "15961b4fd463c107da32a7855c6dfa6bb76139e2", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/15961b4fd463c107da32a7855c6dfa6bb76139e2", "committedDate": "2020-01-16T23:47:18Z", "message": "Update Reactor to schedule pending tasks before completing."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e9f2f77280447bb7b0103a02857fd4178476223", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3e9f2f77280447bb7b0103a02857fd4178476223", "committedDate": "2020-01-16T23:52:22Z", "message": "Fix bug where clean up task was not scheduled immediately"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ba7ccda4efca850cac5e7d785287ccb208276bf", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3ba7ccda4efca850cac5e7d785287ccb208276bf", "committedDate": "2020-01-17T00:11:22Z", "message": "Dispose of session when closed in Connection."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92378c64fbc85a40f9adbbabe46b13da809f2c43", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/92378c64fbc85a40f9adbbabe46b13da809f2c43", "committedDate": "2020-01-17T00:18:28Z", "message": "Cleaning up sessions when they die."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0f9c7613b054e78298722931733300cca75a160", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/f0f9c7613b054e78298722931733300cca75a160", "committedDate": "2020-01-17T00:28:51Z", "message": "Use single map to keep track of sessions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47a0ba2a67a85c1e2ffc97cf3a0fee63a1f5a2a2", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/47a0ba2a67a85c1e2ffc97cf3a0fee63a1f5a2a2", "committedDate": "2020-01-17T08:25:01Z", "message": "AmqpConnection does not keep track of open links."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad1006d8f34a19aa40593419f0f9a8fd0c53d038", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ad1006d8f34a19aa40593419f0f9a8fd0c53d038", "committedDate": "2020-01-17T08:25:33Z", "message": "Use the same link name for creating producers."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26b15ec305af3285f1758a4700c50e4019de1151", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/26b15ec305af3285f1758a4700c50e4019de1151", "committedDate": "2020-01-17T08:26:28Z", "message": "Update log messages in TokenManager."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de25760807cd49227b01f5757dcfb013b9950a67", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/de25760807cd49227b01f5757dcfb013b9950a67", "committedDate": "2020-01-17T08:27:46Z", "message": "Use retry in entire getLinkSize operation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "982924312f81e1b898c8cc6a32af3ae91dd54d10", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/982924312f81e1b898c8cc6a32af3ae91dd54d10", "committedDate": "2020-01-17T08:29:11Z", "message": "Defer creation of send work item"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e3959536bfe2cfc36329f9851b76a3e32d4ea94", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1e3959536bfe2cfc36329f9851b76a3e32d4ea94", "committedDate": "2020-01-17T08:29:36Z", "message": "Manage send and receive links in ReactorSession."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cae2509870a3b9270394f74a277da6d94de9f54a", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/cae2509870a3b9270394f74a277da6d94de9f54a", "committedDate": "2020-01-17T08:51:56Z", "message": "Fix spotbug issues."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31415e041e80719b03d2eea30cdac2d0aa3c32a9", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/31415e041e80719b03d2eea30cdac2d0aa3c32a9", "committedDate": "2020-01-17T08:59:57Z", "message": "Fixing test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d2850c97a52a40d0afa9f54fe557c6d11f404e9", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3d2850c97a52a40d0afa9f54fe557c6d11f404e9", "committedDate": "2020-01-17T09:02:48Z", "message": "Change warning to information."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a96089d9d9376a35abf0e7cc0a8703bbddcf95c", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4a96089d9d9376a35abf0e7cc0a8703bbddcf95c", "committedDate": "2020-01-17T09:04:09Z", "message": "Fixing test failures."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d99bd8e306666998e3c907280f788bbdd1f2c28", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7d99bd8e306666998e3c907280f788bbdd1f2c28", "committedDate": "2020-01-17T09:36:18Z", "message": "Change send link to verbose."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0df15cc29d2b239ad460246f4637ca4613e4ee3", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/d0df15cc29d2b239ad460246f4637ca4613e4ee3", "committedDate": "2020-01-17T09:44:21Z", "message": "Add another long running integration test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ad89defc5a36b109a9a87914389ae1df47d8cd2", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4ad89defc5a36b109a9a87914389ae1df47d8cd2", "committedDate": "2020-01-17T10:19:05Z", "message": "Update logging."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c041a0011c516773166cbaf0375c33d8114b288", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4c041a0011c516773166cbaf0375c33d8114b288", "committedDate": "2020-01-17T10:42:25Z", "message": "Updating loggging messages."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88625cd17249a00e96fa809dae519889b21679ac", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/88625cd17249a00e96fa809dae519889b21679ac", "committedDate": "2020-01-17T10:45:00Z", "message": "Update logging for messages."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a3e3bdcf725575b9a4ba15fe4ff6359697a592a", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/3a3e3bdcf725575b9a4ba15fe4ff6359697a592a", "committedDate": "2020-01-17T11:22:00Z", "message": "Fix checkstyle issues."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "583cb2f54650fa4299413a916d0dc969adc625b1", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/583cb2f54650fa4299413a916d0dc969adc625b1", "committedDate": "2020-01-17T12:13:14Z", "message": "Add class for long running, disabled, tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d67a33d690fa50c69c7999a6475fb4e3b8bd3cd", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/8d67a33d690fa50c69c7999a6475fb4e3b8bd3cd", "committedDate": "2020-01-17T12:29:22Z", "message": "Fix log messages. Do not return management node if there is an exception."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ec5272f3bccb8ac8eb5d3ed2a7a573eee97d4b0", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4ec5272f3bccb8ac8eb5d3ed2a7a573eee97d4b0", "committedDate": "2020-01-17T12:48:31Z", "message": "Update RequestResponseChannel to listen to endpoint states."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0NzY2MTIy", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7534#pullrequestreview-344766122", "createdAt": "2020-01-17T18:36:59Z", "commit": {"oid": "3a3e3bdcf725575b9a4ba15fe4ff6359697a592a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODozNjo1OVrOFfBuTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODozNjo1OVrOFfBuTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA3ODQxMw==", "bodyText": "Would this be better suited in our stress test client since this is disabled and wouldn't run in any of our live tests?", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7534#discussion_r368078413", "createdAt": "2020-01-17T18:36:59Z", "author": {"login": "srnagar"}, "path": "sdk/eventhubs/azure-messaging-eventhubs/src/test/java/com/azure/messaging/eventhubs/EventHubProducerAsyncClientIntegrationTest.java", "diffHunk": "@@ -247,4 +252,41 @@ void worksAfterReconnection() throws InterruptedException {\n         TimeUnit.MINUTES.sleep(30);\n         System.out.println(\"Complete.\");\n     }\n+\n+    @Disabled(\"Testing idle/long running operations.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a3e3bdcf725575b9a4ba15fe4ff6359697a592a"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfc09fbb9f834fe8e25fdd61c4cdb1e634cc9a0f", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/dfc09fbb9f834fe8e25fdd61c4cdb1e634cc9a0f", "committedDate": "2020-01-17T19:23:15Z", "message": "Updating tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "837d76d9d4148766ad0d48d0d2adb40f47b380d4", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/837d76d9d4148766ad0d48d0d2adb40f47b380d4", "committedDate": "2020-01-17T19:45:19Z", "message": "Adding support for management channel to fetch new instance if it is idled or closed."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80c83eb05c82d23628c7c6c5b568f5f83a2f2a4c", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/80c83eb05c82d23628c7c6c5b568f5f83a2f2a4c", "committedDate": "2020-01-17T19:46:18Z", "message": "Adding tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9d36d67edb620a2f5a12c648805323a82572a96", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c9d36d67edb620a2f5a12c648805323a82572a96", "committedDate": "2020-01-17T19:48:53Z", "message": "Fix build issue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75cc6fcfed7f44e13a93cad847357ae45e5d7e4b", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/75cc6fcfed7f44e13a93cad847357ae45e5d7e4b", "committedDate": "2020-01-17T19:59:23Z", "message": "Update logging."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7eaa4a29d5c8c676a213861edd05377b38f8bdd0", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7eaa4a29d5c8c676a213861edd05377b38f8bdd0", "committedDate": "2020-01-17T20:03:37Z", "message": "ConnectionProcessor uses AmqpCHannelProcessor."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddb9200db5bcae3524836ceb1ecf2cd30b84074d", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ddb9200db5bcae3524836ceb1ecf2cd30b84074d", "committedDate": "2020-01-17T20:03:53Z", "message": "Remove unused method."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7950b9e2bce76813cadb620e4d320c0bdbed44dc", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7950b9e2bce76813cadb620e4d320c0bdbed44dc", "committedDate": "2020-01-17T20:29:20Z", "message": "Fix test hang."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c870c987ddd786e60cfbd3d1010a062f7b79dab4", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/c870c987ddd786e60cfbd3d1010a062f7b79dab4", "committedDate": "2020-01-17T20:30:48Z", "message": "Update EHCProcessorTest."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5814c027e794fefd380846e19a95579687b6200b", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5814c027e794fefd380846e19a95579687b6200b", "committedDate": "2020-01-17T20:53:18Z", "message": "Fix spotbugs issue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c028c21ef54b2b3678239a931344f0611adf2a2", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/4c028c21ef54b2b3678239a931344f0611adf2a2", "committedDate": "2020-01-17T21:34:48Z", "message": "Fix indentation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed8c2571cbb5f55d778afa765873c8bf8f8f9da4", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/ed8c2571cbb5f55d778afa765873c8bf8f8f9da4", "committedDate": "2020-01-17T22:05:34Z", "message": "Fixing log message."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f04384069f754d7895d296e088be9b98c80ca7e", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2f04384069f754d7895d296e088be9b98c80ca7e", "committedDate": "2020-01-18T01:21:35Z", "message": "Fix error that occurs when multiple consumers are used."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fe809559e869e7f175f437d53eb1b15caae2a13", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/9fe809559e869e7f175f437d53eb1b15caae2a13", "committedDate": "2020-01-18T01:27:51Z", "message": "update test parameters."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5955ecc4598e6acb20cd211d8819408f64b9f07b", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/5955ecc4598e6acb20cd211d8819408f64b9f07b", "committedDate": "2020-01-18T01:40:28Z", "message": "revert to using session name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bed42169045b68765d3204631f552f7e6bf91ce6", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/bed42169045b68765d3204631f552f7e6bf91ce6", "committedDate": "2020-01-18T01:40:53Z", "message": "Fix test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43e4415442dee42c0b80d0984015e59ebd84552d", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/43e4415442dee42c0b80d0984015e59ebd84552d", "committedDate": "2020-01-18T05:02:58Z", "message": "Revert changes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0b9b3f09916e6ff557e364d4f5af831b94819cd", "author": {"user": {"login": "conniey", "name": "Connie Yau"}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/a0b9b3f09916e6ff557e364d4f5af831b94819cd", "committedDate": "2020-01-18T06:21:18Z", "message": "Fix checkstyle issue."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 448, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}