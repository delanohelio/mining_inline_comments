{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxNTkwOTA2", "number": 15539, "title": "mgmt disallow user pass SdkContext into Manager class", "bodyText": "The SdkContext is required for playback tests. It's not required for user to pass when creating the managers.\nThe key change is here.\n\nRemove Manager::sdkContext().\nRemove all xxManager::authenticate(HttpPipeline, AzureProfile, SdkContext).\nOnly keep SdkContext in ResourceManager::sdkContext() and AuthorizationManager::sdkContext().\nWhen running tests, modify all SdkContext via ResourceManagerTestBase::setSdkContext(SdkContext, Object...).", "createdAt": "2020-09-23T07:59:01Z", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15539", "merged": true, "mergeCommit": {"oid": "298fb250f12818925546bfde29d9f52091406656"}, "closed": true, "closedAt": "2020-09-24T13:53:58Z", "author": {"login": "xseeseesee"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLnzprgH2gAyNDkxNTkwOTA2OjU0MGQ2NTFhYjU1YmQyNTY4M2M4MTJkOGJmOTk3ZjYxZDFkODZlNmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdL7YBDAFqTQ5NTI2MDUxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "540d651ab55bd25683c812d8bf997f61d1d86e6e", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/540d651ab55bd25683c812d8bf997f61d1d86e6e", "committedDate": "2020-09-23T07:53:07Z", "message": "remove SdkContext from user input"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b8b2979ce44932b2ad183179e10db60083f1ebc", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/1b8b2979ce44932b2ad183179e10db60083f1ebc", "committedDate": "2020-09-23T07:53:45Z", "message": "update msi for sdk context change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a523e6b1b7649f33215a34adcc268c442e69673", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/2a523e6b1b7649f33215a34adcc268c442e69673", "committedDate": "2020-09-23T08:47:26Z", "message": "update storage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d3ead2a25a3d3fb77eeea7d282226fefa7a63e6", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/7d3ead2a25a3d3fb77eeea7d282226fefa7a63e6", "committedDate": "2020-09-23T10:33:02Z", "message": "Merge branch 'master' into update-sdkcontext"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35ebca5d3de109344ca90e10299386f7f3e79054", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/35ebca5d3de109344ca90e10299386f7f3e79054", "committedDate": "2020-09-23T15:30:41Z", "message": "add method setSdkContext"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5f41f48779dfc5ad8b31c74f67d2d8c5ff18fdb", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/b5f41f48779dfc5ad8b31c74f67d2d8c5ff18fdb", "committedDate": "2020-09-23T15:31:43Z", "message": "update after adding new method to set SdkContext"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MTk3NjE5", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15539#pullrequestreview-495197619", "createdAt": "2020-09-24T03:41:20Z", "commit": {"oid": "b5f41f48779dfc5ad8b31c74f67d2d8c5ff18fdb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMzo0MToyMFrOHXIj7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMzo0MToyMFrOHXIj7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDAxOTU2Nw==", "bodyText": "randomResourceName in samples is quite a mess. Maybe not now, but need to find a better way.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15539#discussion_r494019567", "createdAt": "2020-09-24T03:41:20Z", "author": {"login": "weidongxu-microsoft"}, "path": "sdk/resourcemanager/azure-resourcemanager-samples/src/main/java/com/azure/resourcemanager/appplatform/samples/ManageSpringCloud.java", "diffHunk": "@@ -72,13 +72,13 @@\n      * @throws IllegalStateException unexcepted state\n      */\n     public static boolean runSample(AzureResourceManager azureResourceManager, String clientId) throws IOException, KeyStoreException, CertificateException, NoSuchAlgorithmException {\n-        final String rgName = azureResourceManager.sdkContext().randomResourceName(\"rg\", 24);\n-        final String serviceName  = azureResourceManager.sdkContext().randomResourceName(\"service\", 24);\n+        final String rgName = azureResourceManager.resourceGroups().manager().sdkContext().randomResourceName(\"rg\", 24);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5f41f48779dfc5ad8b31c74f67d2d8c5ff18fdb"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MjI4ODM2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15539#pullrequestreview-495228836", "createdAt": "2020-09-24T05:26:50Z", "commit": {"oid": "35ebca5d3de109344ca90e10299386f7f3e79054"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNToyNjo1MFrOHXKNJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwNToyNjo1MFrOHXKNJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA0NjUwMw==", "bodyText": "so no change to SdkContext itself right? I believe we all agree that SdkContext is confusing, need a better name, maybe test specific.", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15539#discussion_r494046503", "createdAt": "2020-09-24T05:26:50Z", "author": {"login": "yungezz"}, "path": "sdk/resourcemanager/azure-resourcemanager-test/src/main/java/com/azure/resourcemanager/test/ResourceManagerTestBase.java", "diffHunk": "@@ -273,6 +276,49 @@ private void addTextReplacementRules(Map<String, String> rules) {\n         }\n     }\n \n+    /**\n+     * Sets sdk context when running the tests\n+     *\n+     * @param sdkContext the sdkContext\n+     * @param objects the manager classes to change sdkContext\n+     * @param <SdkContext> the type of sdk context\n+     * @throws RuntimeException when field cannot be found or set.\n+     */\n+    protected <SdkContext> void setSdkContext(SdkContext sdkContext, Object... objects) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35ebca5d3de109344ca90e10299386f7f3e79054"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "898ae32c69f931b3a351fc5478e878ee2f183b01", "author": {"user": {"login": "xseeseesee", "name": null}}, "url": "https://github.com/Azure/azure-sdk-for-java/commit/898ae32c69f931b3a351fc5478e878ee2f183b01", "committedDate": "2020-09-24T05:29:24Z", "message": "update pom for -add-opens"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MjYwNTE2", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15539#pullrequestreview-495260516", "createdAt": "2020-09-24T06:41:02Z", "commit": {"oid": "898ae32c69f931b3a351fc5478e878ee2f183b01"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3365, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}