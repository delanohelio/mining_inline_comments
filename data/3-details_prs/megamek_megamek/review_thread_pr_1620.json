{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MTI1MjEz", "number": 1620, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTowMToyMlrODbVgmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTowMToyMlrODbVgmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5OTkwNTUzOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/weapons/WeaponHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTowMToyMlrOFiw15Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTo1OTo1M1rOFiyoRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5NjEzMw==", "bodyText": "This would work in most situations, but a mech standing in depth 0 water (or a superheavy in 0-1) receiving partial cover from terrain would incorrectly have the partial cover hit removed.", "url": "https://github.com/MegaMek/megamek/pull/1620#discussion_r371996133", "createdAt": "2020-01-28T19:01:22Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/common/weapons/WeaponHandler.java", "diffHunk": "@@ -1555,8 +1556,11 @@ protected void handleEntityDamage(Entity entityTarget,\n         }\n         boolean isIndirect = wtype.hasModes()\n                 && weapon.curMode().equals(\"Indirect\");\n+        IHex targetHex = game.getBoard().getHex(target.getPosition());\n \n-        if (!isIndirect\n+        //For indirect fire, remove leg hits only if target is in water partial cover\n+        //Per TW errata for indirect fire\n+        if ((!isIndirect || (isIndirect && targetHex.containsTerrain(Terrains.WATER)))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18829090281d0a77645843771cf648913a2e7763"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyNTQxMw==", "bodyText": "Latest commit appears to fix this.", "url": "https://github.com/MegaMek/megamek/pull/1620#discussion_r372025413", "createdAt": "2020-01-28T19:59:53Z", "author": {"login": "mkerensky"}, "path": "megamek/src/megamek/common/weapons/WeaponHandler.java", "diffHunk": "@@ -1555,8 +1556,11 @@ protected void handleEntityDamage(Entity entityTarget,\n         }\n         boolean isIndirect = wtype.hasModes()\n                 && weapon.curMode().equals(\"Indirect\");\n+        IHex targetHex = game.getBoard().getHex(target.getPosition());\n \n-        if (!isIndirect\n+        //For indirect fire, remove leg hits only if target is in water partial cover\n+        //Per TW errata for indirect fire\n+        if ((!isIndirect || (isIndirect && targetHex.containsTerrain(Terrains.WATER)))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5NjEzMw=="}, "originalCommit": {"oid": "18829090281d0a77645843771cf648913a2e7763"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2546, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}