{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMjM0NDYx", "number": 1839, "title": "Include hydrofoil in naval support vehicle weight class determination", "bodyText": "Hydrofoil support vehicles were missing from the method that determines support vehicle weight class. I also reworked the method to remove a lot of code repetition and fragile reliance on String literal matching. The type parameter passed to EntityWeightClass#getSupportWeightClass comes from Entity#getMovementModeAsString. I took advantage of the lookup aliases in EntityMovementMode to match to the enum value.", "createdAt": "2020-04-11T19:14:41Z", "url": "https://github.com/MegaMek/megamek/pull/1839", "merged": true, "mergeCommit": {"oid": "a354398cc07aae8c3293b53d6b52e056c083f2d9"}, "closed": true, "closedAt": "2020-04-11T20:07:13Z", "author": {"login": "neoancient"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWqCTugH2gAyNDAyMjM0NDYxOjRlNTBhMDgxZWRmYWNhMjllOWM1NjAyNzMzNzM4NjRmN2RkNTdmMTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWqxyygFqTM5MTc5MzcxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e50a081edfaca29e9c560273373864f7dd57f11", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/4e50a081edfaca29e9c560273373864f7dd57f11", "committedDate": "2020-04-11T18:30:57Z", "message": "Include hydrofoil in SV weight calculations."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77998b193ec3c656402d0fe8c86ed0016adc70ab", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/77998b193ec3c656402d0fe8c86ed0016adc70ab", "committedDate": "2020-04-11T18:55:19Z", "message": "Simplify EntityWeightClass#getSupportWeightClass.\n\nRemove code repitition and reliance on string literals."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzkzNjYx", "url": "https://github.com/MegaMek/megamek/pull/1839#pullrequestreview-391793661", "createdAt": "2020-04-11T19:22:16Z", "commit": {"oid": "77998b193ec3c656402d0fe8c86ed0016adc70ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzkzNzE2", "url": "https://github.com/MegaMek/megamek/pull/1839#pullrequestreview-391793716", "createdAt": "2020-04-11T19:22:48Z", "commit": {"oid": "77998b193ec3c656402d0fe8c86ed0016adc70ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQxOToyMjo0OFrOGEPehQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQxOToyMjo0OFrOGEPehQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzEwMTA2MQ==", "bodyText": "Maybe add a space here?", "url": "https://github.com/MegaMek/megamek/pull/1839#discussion_r407101061", "createdAt": "2020-04-11T19:22:48Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/EntityWeightClass.java", "diffHunk": "@@ -177,83 +177,51 @@ public static int getWeightClass(double tonnage, String type) {\n      * @return        The weight class\n      */\n     public static int getSupportWeightClass(double tonnage, String type) {\n-        int i = 0;\n-\n-        if (type.equals(\"Wheeled\")) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (wheeledSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= wheeledSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(\"Tracked\")) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (trackedSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= trackedSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(\"Hover\")) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (hoverSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= hoverSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(UnitType.getTypeName(UnitType.VTOL))) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (vtolSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= vtolSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(\"WiGE\")) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (wigeSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= wigeSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(UnitType.getTypeName(UnitType.NAVAL))) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (navalSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= navalSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(\"Submarine\")) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (navalSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= navalSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(\"Rail\")) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (railSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= railSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(\"MagLev\")) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (railSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= railSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(\"Aerodyne\")) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (fixedwingSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= fixedwingSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(\"Airship\")) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (airshipSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= airshipSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n-            }\n-        } else if (type.equals(\"Satellite\")) {\n-            for (i = WEIGHT_SMALL_SUPPORT; i < (satelliteSupportVehicleWeightLimits.length - 1); i++) {\n-                if (tonnage <= satelliteSupportVehicleWeightLimits[i]) {\n-                    break;\n-                }\n+        double[] weightLimits;\n+        switch (EntityMovementMode.getMode(type)) {\n+            case WHEELED:\n+                weightLimits = wheeledSupportVehicleWeightLimits;\n+                break;\n+            case TRACKED:\n+                weightLimits = trackedSupportVehicleWeightLimits;\n+                break;\n+            case HOVER:\n+                weightLimits = hoverSupportVehicleWeightLimits;\n+                break;\n+            case VTOL:\n+                weightLimits = vtolSupportVehicleWeightLimits;\n+                break;\n+            case WIGE:\n+                weightLimits = wigeSupportVehicleWeightLimits;\n+                break;\n+            case NAVAL:\n+            case HYDROFOIL:\n+            case SUBMARINE:\n+                weightLimits = navalSupportVehicleWeightLimits;\n+                break;\n+            case RAIL:\n+            case MAGLEV:\n+                weightLimits = railSupportVehicleWeightLimits;\n+                break;\n+            case AERODYNE:\n+                weightLimits = fixedwingSupportVehicleWeightLimits;\n+                break;\n+            case AIRSHIP:\n+                weightLimits = airshipSupportVehicleWeightLimits;\n+                break;\n+            case STATION_KEEPING:\n+                weightLimits = satelliteSupportVehicleWeightLimits;\n+                break;\n+            default:\n+                return WEIGHT_MEDIUM_SUPPORT;\n+        }\n+        for (int i = WEIGHT_SMALL_SUPPORT; i < weightLimits.length; i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77998b193ec3c656402d0fe8c86ed0016adc70ab"}, "originalPosition": 115}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4964, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}