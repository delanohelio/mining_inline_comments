{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NjgyNDc0", "number": 1883, "title": "Enable bot to turn fighters at end of move", "bodyText": "This PR fixes a \"dumb\" bot behavior that I observed quite a bit but couldn't quite figure out.  Basically, in low-altitude air combat, the bot would move its aircraft all the way up to your ship, but fail to make that last turn and not be able to fire.\nTurns out the pathfinder wasn't providing the appropriate paths to it in the first place.", "createdAt": "2020-04-24T17:44:55Z", "url": "https://github.com/MegaMek/megamek/pull/1883", "merged": true, "mergeCommit": {"oid": "0fff9b6e2e7c8d0085dacb24c84a4b1851737c79"}, "closed": true, "closedAt": "2020-04-24T18:07:17Z", "author": {"login": "NickAragua"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABca1HDRgH2gAyNDA4NjgyNDc0OmVjZWJlMmZlZTMyZjViMTZlNzVkNDk3MzRhNThiNGNlMDUwMTRmMmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABca1ew2gH2gAyNDA4NjgyNDc0OmMyNjVlOTMwZmExYzA5NThmZWI5YzlkMWYxYzk4NzI5ODYzYTQ0YjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ecebe2fee32f5b16e75d49734a58b4ce05014f2d", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/ecebe2fee32f5b16e75d49734a58b4ce05014f2d", "committedDate": "2020-04-24T17:40:47Z", "message": "turn fighters at end of move"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMTUwNTA4", "url": "https://github.com/MegaMek/megamek/pull/1883#pullrequestreview-400150508", "createdAt": "2020-04-24T17:46:20Z", "commit": {"oid": "ecebe2fee32f5b16e75d49734a58b4ce05014f2d"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzo0NjoyMFrOGLiimA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxNzo0NjozMVrOGLijBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc1MzQzMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    for(MovePath movePath : fullMovePaths) {\n          \n          \n            \n                    for (MovePath movePath : fullMovePaths) {", "url": "https://github.com/MegaMek/megamek/pull/1883#discussion_r414753432", "createdAt": "2020-04-24T17:46:20Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/pathfinder/AeroLowAltitudePathFinder.java", "diffHunk": "@@ -56,7 +57,25 @@ protected int getMaximumVelocity(IAero mover) {\n             fullMovePaths.addAll(super.GenerateAllPaths(altitudePath.clone()));\n         }\n         \n-        return fullMovePaths;\n+        List<MovePath> fullMovePathsWithTurns = new ArrayList<>();\n+        \n+        for(MovePath movePath : fullMovePaths) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecebe2fee32f5b16e75d49734a58b4ce05014f2d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc1MzU0MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if(lastStep != null && lastStep.canAeroTurn(game)) {\n          \n          \n            \n                        if ((lastStep != null) && lastStep.canAeroTurn(game)) {", "url": "https://github.com/MegaMek/megamek/pull/1883#discussion_r414753541", "createdAt": "2020-04-24T17:46:31Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/pathfinder/AeroLowAltitudePathFinder.java", "diffHunk": "@@ -56,7 +57,25 @@ protected int getMaximumVelocity(IAero mover) {\n             fullMovePaths.addAll(super.GenerateAllPaths(altitudePath.clone()));\n         }\n         \n-        return fullMovePaths;\n+        List<MovePath> fullMovePathsWithTurns = new ArrayList<>();\n+        \n+        for(MovePath movePath : fullMovePaths) {\n+            fullMovePathsWithTurns.add(movePath);\n+            \n+            MoveStep lastStep = movePath.getLastStep();\n+            \n+            if(lastStep != null && lastStep.canAeroTurn(game)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecebe2fee32f5b16e75d49734a58b4ce05014f2d"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58e396815c676662a04c4157328ffeb39a4709f7", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/58e396815c676662a04c4157328ffeb39a4709f7", "committedDate": "2020-04-24T18:06:33Z", "message": "Update megamek/src/megamek/common/pathfinder/AeroLowAltitudePathFinder.java\n\nCo-Authored-By: Justin Bowen <39067288+Windchild292@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c265e930fa1c0958feb9c9d1f1c98729863a44b6", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/c265e930fa1c0958feb9c9d1f1c98729863a44b6", "committedDate": "2020-04-24T18:06:41Z", "message": "Update megamek/src/megamek/common/pathfinder/AeroLowAltitudePathFinder.java\n\nCo-Authored-By: Justin Bowen <39067288+Windchild292@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4990, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}