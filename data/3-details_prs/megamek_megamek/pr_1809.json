{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2NjI5NDk0", "number": 1809, "title": "fix NPE with support tank infantry weapons", "bodyText": "Fixes #1797, which would happen when evaluating potential attacks against infantry by support vehicles mounting infantry weapons.", "createdAt": "2020-03-31T21:58:42Z", "url": "https://github.com/MegaMek/megamek/pull/1809", "merged": true, "mergeCommit": {"oid": "d424ce8b82a39a1adbacb473e533d7eecfea342f"}, "closed": true, "closedAt": "2020-04-01T01:32:03Z", "author": {"login": "NickAragua"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTKZE2gH2gAyMzk2NjI5NDk0OjU2MDcxYzM3ZWIxZmRiODQ0NmZhOTQzODY2ZWUzY2FiNThjZjMxN2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTNdjEgH2gAyMzk2NjI5NDk0OmFiZjFlYWRiYmU0NjY4YjA2MmEyNmQ0ZDRmNmZkYTcwZGM3MTJkOTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "56071c37eb1fdb8446fa943866ee3cab58cf317c", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/56071c37eb1fdb8446fa943866ee3cab58cf317c", "committedDate": "2020-03-31T21:57:05Z", "message": "fix NPE with support tank infantry weapons"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MTM5MjU1", "url": "https://github.com/MegaMek/megamek/pull/1809#pullrequestreview-385139255", "createdAt": "2020-03-31T22:07:20Z", "commit": {"oid": "56071c37eb1fdb8446fa943866ee3cab58cf317c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMjowNzoyMFrOF-p_iQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMjowNzoyMFrOF-p_iQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI0NDA0MQ==", "bodyText": "Cast to Infantry isn't needed here.", "url": "https://github.com/MegaMek/megamek/pull/1809#discussion_r401244041", "createdAt": "2020-03-31T22:07:20Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "diffHunk": "@@ -115,8 +115,10 @@ public double getMaxDamageAtRange(final MovePath shooterPath, final MovePath tar\n \n             // case 1\n             if (weaponType.hasFlag(WeaponType.F_INFANTRY)) {\n+                int infantryCount = shooter.isConventionalInfantry() ?\n+                        ((Infantry) shooter).getInternal(Infantry.LOC_INFANTRY) : 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56071c37eb1fdb8446fa943866ee3cab58cf317c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c959e17508d0b1cd6cd51f8450c6110c7b760b1", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/1c959e17508d0b1cd6cd51f8450c6110c7b760b1", "committedDate": "2020-04-01T01:19:12Z", "message": "fix BA damage calculation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MjA4Njc1", "url": "https://github.com/MegaMek/megamek/pull/1809#pullrequestreview-385208675", "createdAt": "2020-04-01T01:23:11Z", "commit": {"oid": "1c959e17508d0b1cd6cd51f8450c6110c7b760b1"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMToyMzoxMVrOF-tr9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMToyMzo0NFrOF-tsjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMwNDU2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    for (final Mounted weapon : shooter.getWeaponList()) {            \n          \n          \n            \n                    for (final Mounted weapon : shooter.getWeaponList()) {", "url": "https://github.com/MegaMek/megamek/pull/1809#discussion_r401304565", "createdAt": "2020-04-01T01:23:11Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "diffHunk": "@@ -91,7 +92,7 @@ public double getMaxDamageAtRange(final MovePath shooterPath, final MovePath tar\n                 && target.hasETypeFlag(Entity.ETYPE_INFANTRY) && ((Infantry) target).isMechanized();\n \n         // cycle through my weapons\n-        for (final Mounted weapon : shooter.getWeaponList()) {\n+        for (final Mounted weapon : shooter.getWeaponList()) {            ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c959e17508d0b1cd6cd51f8450c6110c7b760b1"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMwNDY2MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if(shooter.isConventionalInfantry()) {\n          \n          \n            \n                            if (shooter.isConventionalInfantry()) {", "url": "https://github.com/MegaMek/megamek/pull/1809#discussion_r401304661", "createdAt": "2020-04-01T01:23:31Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "diffHunk": "@@ -115,8 +116,16 @@ public double getMaxDamageAtRange(final MovePath shooterPath, final MovePath tar\n \n             // case 1\n             if (weaponType.hasFlag(WeaponType.F_INFANTRY)) {\n+                int infantryCount = 1;\n+                \n+                if(shooter.isConventionalInfantry()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c959e17508d0b1cd6cd51f8450c6110c7b760b1"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMwNDcxOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            } else if(shooter instanceof BattleArmor){\n          \n          \n            \n                            } else if (shooter instanceof BattleArmor) {", "url": "https://github.com/MegaMek/megamek/pull/1809#discussion_r401304719", "createdAt": "2020-04-01T01:23:44Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "diffHunk": "@@ -115,8 +116,16 @@ public double getMaxDamageAtRange(final MovePath shooterPath, final MovePath tar\n \n             // case 1\n             if (weaponType.hasFlag(WeaponType.F_INFANTRY)) {\n+                int infantryCount = 1;\n+                \n+                if(shooter.isConventionalInfantry()) {\n+                    infantryCount = shooter.getInternal(Infantry.LOC_INFANTRY);\n+                } else if(shooter instanceof BattleArmor){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c959e17508d0b1cd6cd51f8450c6110c7b760b1"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b765fcceb7ab65a5afad15056c7a970c1a585dc", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/6b765fcceb7ab65a5afad15056c7a970c1a585dc", "committedDate": "2020-04-01T01:31:27Z", "message": "Update megamek/src/megamek/client/bot/princess/InfantryFireControl.java\n\nCo-Authored-By: Justin Bowen <39067288+Windchild292@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b67909442c1e606455ed09b00300a05604846cb", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/5b67909442c1e606455ed09b00300a05604846cb", "committedDate": "2020-04-01T01:31:36Z", "message": "Update megamek/src/megamek/client/bot/princess/InfantryFireControl.java\n\nCo-Authored-By: Justin Bowen <39067288+Windchild292@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abf1eadbbe4668b062a26d4d4f6fda70dc712d99", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/abf1eadbbe4668b062a26d4d4f6fda70dc712d99", "committedDate": "2020-04-01T01:31:41Z", "message": "Update megamek/src/megamek/client/bot/princess/InfantryFireControl.java\n\nCo-Authored-By: Justin Bowen <39067288+Windchild292@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4940, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}