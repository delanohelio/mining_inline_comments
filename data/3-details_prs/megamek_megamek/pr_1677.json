{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NzYzODUy", "number": 1677, "title": "Freezers", "bodyText": "This fixes a couple things related to prototype double heat sinks which I ran into while working on MegaMek/megameklab#438. The rules are found in IO, p. 71. The brief summary is that the unit may replace any number of single heat sinks with a prototype double heat sink, but the double heat sinks must always be assigned critical slots (on Mechs), even if this leaves some of the engine capacity unmet. The two types of prototype double heat sinks are identical in function, but not considered the same part, as the one developed in the 3020s (often called \"freezers\") were developed independently rather than being recovered Star League lostech.\n\nDuring validation, ignore the prototype double heat sinks when checking whether all the engine internal heat sinks are accounted for.\nSet the tech level to experimental, which is the same for all prototype equipment.", "createdAt": "2020-02-15T22:26:55Z", "url": "https://github.com/MegaMek/megamek/pull/1677", "merged": true, "mergeCommit": {"oid": "5425d0cb66c310195c1387941172dd86b483e95a"}, "closed": true, "closedAt": "2020-02-16T02:34:51Z", "author": {"login": "neoancient"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEqCHPAH2gAyMzc1NzYzODUyOmIzOGEyNTUxYjdiZDdiYmViNGVhZDc3OTlmYWRkMWIzMGFmZTRiMzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEvWUrAFqTM1OTM3NjU5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b38a2551b7bd7bbeb4ead7799fadd1b30afe4b38", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/b38a2551b7bd7bbeb4ead7799fadd1b30afe4b38", "committedDate": "2020-02-15T20:20:06Z", "message": "Exclude prototype double HS from internal count when validating."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ad6ecba7ea903e3301e19ffd39e77676ed83e6d", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/8ad6ecba7ea903e3301e19ffd39e77676ed83e6d", "committedDate": "2020-02-15T22:14:51Z", "message": "Set prototype double heat sink tech level to experimental."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MzY5NzAy", "url": "https://github.com/MegaMek/megamek/pull/1677#pullrequestreview-359369702", "createdAt": "2020-02-15T22:28:31Z", "commit": {"oid": "8ad6ecba7ea903e3301e19ffd39e77676ed83e6d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f710961f3f69d1e48920b576b0a302d527bffb28", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/f710961f3f69d1e48920b576b0a302d527bffb28", "committedDate": "2020-02-15T22:29:01Z", "message": "Remove useless typecast"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MzY5Nzk0", "url": "https://github.com/MegaMek/megamek/pull/1677#pullrequestreview-359369794", "createdAt": "2020-02-15T22:30:55Z", "commit": {"oid": "8ad6ecba7ea903e3301e19ffd39e77676ed83e6d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMjozMDo1NVrOFqQ1hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMjozMDo1NVrOFqQ1hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg2MDM1Nw==", "bodyText": "This is the only logic change in this file. The boolean parameter to Mech#heatSinks tells it to ignore prototypes.", "url": "https://github.com/MegaMek/megamek/pull/1677#discussion_r379860357", "createdAt": "2020-02-15T22:30:55Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/common/verifier/TestMech.java", "diffHunk": "@@ -589,21 +589,19 @@ public boolean checkCriticalSlotsForEquipment(Entity entity,\n                 } else if (m.getType() instanceof PPCWeapon) {\n                     weapon = \"PPCs\";\n                 }\n-                if (entity.hasSystem(Mech.ACTUATOR_LOWER_ARM, loc)\n-                        || entity.hasSystem(Mech.ACTUATOR_HAND, loc)) {\n-                    buff.append(\"Omni mechs with arm mounted \" + weapon\n-                            + \" cannot have lower armor or hand actuators!\\n\");\n+                if (mech.hasSystem(Mech.ACTUATOR_LOWER_ARM, loc)\n+                        || mech.hasSystem(Mech.ACTUATOR_HAND, loc)) {\n+                    buff.append(\"Omni mechs with arm mounted \").append(weapon)\n+                            .append(\" cannot have lower armor or hand actuators!\\n\");\n                     legal = false;\n                 }\n             }\n         }\n-        if ((countInternalHeatSinks > engine.integralHeatSinkCapacity(mech\n-                .hasCompactHeatSinks()))\n-                || ((countInternalHeatSinks < engine\n-                        .integralHeatSinkCapacity(mech.hasCompactHeatSinks()))\n-                        && (countInternalHeatSinks != ((Mech) entity)\n-                                .heatSinks()) && !entity.isOmni())) {\n-            heatSinks.addElement(Integer.valueOf(countInternalHeatSinks));\n+        if ((countInternalHeatSinks > engine.integralHeatSinkCapacity(this.mech.hasCompactHeatSinks()))\n+                || ((countInternalHeatSinks < engine.integralHeatSinkCapacity(this.mech.hasCompactHeatSinks()))\n+                        && (countInternalHeatSinks != mech.heatSinks(false))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ad6ecba7ea903e3301e19ffd39e77676ed83e6d"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5Mzc2NTkw", "url": "https://github.com/MegaMek/megamek/pull/1677#pullrequestreview-359376590", "createdAt": "2020-02-16T02:31:42Z", "commit": {"oid": "f710961f3f69d1e48920b576b0a302d527bffb28"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4542, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}