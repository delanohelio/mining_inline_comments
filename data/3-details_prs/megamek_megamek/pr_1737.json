{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMzMxNTUz", "number": 1737, "title": "implement fuel-air ordnance for artillery", "bodyText": "Moved FAE processing to its own class.\nImplemented FAE munitions for the artillery pieces that can mount them", "createdAt": "2020-03-04T04:23:16Z", "url": "https://github.com/MegaMek/megamek/pull/1737", "merged": true, "mergeCommit": {"oid": "2b2b622a152ec7166c6beb5ea4b0c550eaf5cdb7"}, "closed": true, "closedAt": "2020-03-10T22:42:12Z", "author": {"login": "NickAragua"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKPHI_AH2gAyMzgzMzMxNTUzOjZjYmVmMWI4NTM4M2ExYzQ4NDA2N2E3ZjNjNWM4ZjY1ZmI5YTkwNjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMabZnAH2gAyMzgzMzMxNTUzOjBkNGUwNzAwYjQ0YjM4ZTYwNzUxNDFiYjVlNzI2MmE5YTE1OTE2MWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6cbef1b85383a1c484067a7f3c5c8f65fb9a9060", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/6cbef1b85383a1c484067a7f3c5c8f65fb9a9060", "committedDate": "2020-03-04T04:21:42Z", "message": "implement fuel-air ordnance for artillery"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b9724ad70f3d5dc14bf21f445750e7d4c68acba", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/3b9724ad70f3d5dc14bf21f445750e7d4c68acba", "committedDate": "2020-03-04T04:25:50Z", "message": "Merge branch 'master' of https://github.com/MegaMek/megamek into fuel_air_munitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0da4d526b14ff97b47a97a8947b1ac423cd0e623", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/0da4d526b14ff97b47a97a8947b1ac423cd0e623", "committedDate": "2020-03-05T03:21:25Z", "message": "Merge branch 'master' of https://github.com/MegaMek/megamek into fuel_air_munitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92ccca773a12f6561b6ae2bea96f3a62e6841daf", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/92ccca773a12f6561b6ae2bea96f3a62e6841daf", "committedDate": "2020-03-05T16:52:59Z", "message": "fix parameter whoops"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b461604e36328f49a76e0c5202d760d5c620e3f5", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/b461604e36328f49a76e0c5202d760d5c620e3f5", "committedDate": "2020-03-06T02:06:58Z", "message": "Merge branch 'master' of https://github.com/MegaMek/megamek into fuel_air_munitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f06d5107a219e5d7ce2444cada1aca400bbeda3", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/9f06d5107a219e5d7ce2444cada1aca400bbeda3", "committedDate": "2020-03-06T02:10:41Z", "message": "adjust incorrect bomb references"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05b627880da6314914e5e35af74630d9c6511cea", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/05b627880da6314914e5e35af74630d9c6511cea", "committedDate": "2020-03-06T02:10:55Z", "message": "Merge branch 'fuel_air_munitions' of https://github.com/NickAragua/megamek into fuel_air_munitions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "090657ada3d36b88cb785603ff3c08ca6c76932e", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/090657ada3d36b88cb785603ff3c08ca6c76932e", "committedDate": "2020-03-06T03:28:44Z", "message": "FAE shouldn't do 2x damage or clear minefields"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDYzMjAy", "url": "https://github.com/MegaMek/megamek/pull/1737#pullrequestreview-370063202", "createdAt": "2020-03-06T03:30:31Z", "commit": {"oid": "090657ada3d36b88cb785603ff3c08ca6c76932e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMzozMDozMVrOFysLfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMzozMDozMVrOFysLfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY5Njk1Nw==", "bodyText": "Consolidates mine clearing code into one place. I was going to have FAE code invoke it as well, but then realized that FAE probably can't clear minefields (the \"can I clear minefields\" code appears to imply that only standard munitions can clear mine fields)", "url": "https://github.com/MegaMek/megamek/pull/1737#discussion_r388696957", "createdAt": "2020-03-06T03:30:31Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/weapons/ArtilleryWeaponIndirectFireHandler.java", "diffHunk": "@@ -456,24 +448,30 @@ else if ((null != bestSpotter) && !(this instanceof ArtilleryWeaponDirectFireHan\n \n         // artillery may unintentially clear minefields, but only if it wasn't\n         // trying to\n-        if (!mineClear && game.containsMinefield(targetPos)) {\n-            Enumeration<Minefield> minefields = game.getMinefields(targetPos)\n-                    .elements();\n-            ArrayList<Minefield> mfRemoved = new ArrayList<Minefield>();\n-            while (minefields.hasMoreElements()) {\n-                Minefield mf = minefields.nextElement();\n-                if (server.clearMinefield(mf, ae, 10, vPhaseReport)) {\n-                    mfRemoved.add(mf);\n-                }\n-            }\n-            // we have to do it this way to avoid a concurrent error problem\n-            for (Minefield mf : mfRemoved) {\n-                server.removeMinefield(mf);\n-            }\n+        if (!mineClear) {\n+            clearMineFields(targetPos, Minefield.CLEAR_NUMBER_WEAPON_ACCIDENT, vPhaseReport);\n         }\n \n         return false;\n     }\n+    \n+    /**\n+     * Worker function that clears minefields.\n+     */\n+    private void clearMineFields(Coords targetPos, int targetNum, Vector<Report> vPhaseReport) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "090657ada3d36b88cb785603ff3c08ca6c76932e"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDYzNDEy", "url": "https://github.com/MegaMek/megamek/pull/1737#pullrequestreview-370063412", "createdAt": "2020-03-06T03:31:28Z", "commit": {"oid": "090657ada3d36b88cb785603ff3c08ca6c76932e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMzozMToyOFrOFysMOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwMzozMToyOFrOFysMOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY5NzE0Ng==", "bodyText": "The \"contains minefield\" check was redundant.", "url": "https://github.com/MegaMek/megamek/pull/1737#discussion_r388697146", "createdAt": "2020-03-06T03:31:28Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/weapons/ArtilleryWeaponIndirectFireHandler.java", "diffHunk": "@@ -461,24 +448,30 @@ else if ((null != bestSpotter) && !(this instanceof ArtilleryWeaponDirectFireHan\n \n         // artillery may unintentially clear minefields, but only if it wasn't\n         // trying to\n-        if (!mineClear && game.containsMinefield(targetPos)) {\n-            Enumeration<Minefield> minefields = game.getMinefields(targetPos)\n-                    .elements();\n-            ArrayList<Minefield> mfRemoved = new ArrayList<Minefield>();\n-            while (minefields.hasMoreElements()) {\n-                Minefield mf = minefields.nextElement();\n-                if (server.clearMinefield(mf, ae, 10, vPhaseReport)) {\n-                    mfRemoved.add(mf);\n-                }\n-            }\n-            // we have to do it this way to avoid a concurrent error problem\n-            for (Minefield mf : mfRemoved) {\n-                server.removeMinefield(mf);\n-            }\n+        if (!mineClear) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "090657ada3d36b88cb785603ff3c08ca6c76932e"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f0864b81d43d03b580b69ac69841b88eaf74f53", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/7f0864b81d43d03b580b69ac69841b88eaf74f53", "committedDate": "2020-03-06T05:31:49Z", "message": "FAE *can* clear minefields"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNjYwMzIw", "url": "https://github.com/MegaMek/megamek/pull/1737#pullrequestreview-371660320", "createdAt": "2020-03-10T03:25:39Z", "commit": {"oid": "7f0864b81d43d03b580b69ac69841b88eaf74f53"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzoyNTozOVrOF0AW2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwMzoyNTozOVrOF0AW2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA3NjEyMQ==", "bodyText": "It would be helpful to add a comment here that 62 is already in use, as is done elsewhere that the numbers are out of order.", "url": "https://github.com/MegaMek/megamek/pull/1737#discussion_r390076121", "createdAt": "2020-03-10T03:25:39Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/common/AmmoType.java", "diffHunk": "@@ -333,9 +333,11 @@\n     \n     // More SRM+LRM Munitions types\n     public static final long M_MINE_CLEARANCE = 1l << 61;\n+    \n+    public static final long M_FAE = 1l << 63;\n   \n   \n-    // Numbers 62-63 are used for Nuclear munitions, above ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f0864b81d43d03b580b69ac69841b88eaf74f53"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d4e0700b44b38e6075141bb5e7262a9a159161d", "author": {"user": {"login": "NickAragua", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/0d4e0700b44b38e6075141bb5e7262a9a159161d", "committedDate": "2020-03-10T22:40:38Z", "message": "updated comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4590, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}