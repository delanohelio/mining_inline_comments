{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxMTY2MDc1", "number": 1969, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1Mzo0OVrOD-kg9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMDowMzozNlrOD_DuoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2OTM2NTY1OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1Mzo0OVrOGYwEvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1Mzo0OVrOGYwEvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwNjY1NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    for (int dir: allDirections)\n          \n          \n            \n                    {\n          \n          \n            \n                    for (int dir : allDirections) {", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r428606655", "createdAt": "2020-05-21T11:53:49Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "diffHunk": "@@ -4620,8 +4621,26 @@ public void initPolys() {\n         facingPolys = new Shape[8];\n         for (int dir: allDirections)\n         {\n-            facingPolys[dir] = FacingRotate.createTransformedShape(facingPoly_tmp);\n-            FacingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n+            facingPolys[dir] = facingRotate.createTransformedShape(facingPoly_tmp);\n+            facingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n+        }\n+\n+        // final facing polygons\n+        Polygon finalFacingPoly_tmp = new Polygon();\n+        finalFacingPoly_tmp.addPoint(41, 3);\n+        finalFacingPoly_tmp.addPoint(21, 18);\n+        finalFacingPoly_tmp.addPoint(41, 14);\n+        finalFacingPoly_tmp.addPoint(42, 14);\n+        finalFacingPoly_tmp.addPoint(61, 18);\n+        finalFacingPoly_tmp.addPoint(42, 3);\n+\n+        // create the rotated shapes\n+        facingRotate.setToIdentity();\n+        finalFacingPolys = new Shape[8];\n+        for (int dir: allDirections)\n+        {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcf74a590f51232602f6595bf5b555b8e1b2a06e"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2OTM2NjkxOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NDoxOVrOGYwFjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NDoxOVrOGYwFjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwNjg2MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        facingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n          \n          \n            \n                        facingRotate.rotate(Math.toRadians(60), HEX_W / 2, HEX_H / 2);", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r428606860", "createdAt": "2020-05-21T11:54:19Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "diffHunk": "@@ -4620,8 +4621,26 @@ public void initPolys() {\n         facingPolys = new Shape[8];\n         for (int dir: allDirections)\n         {\n-            facingPolys[dir] = FacingRotate.createTransformedShape(facingPoly_tmp);\n-            FacingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n+            facingPolys[dir] = facingRotate.createTransformedShape(facingPoly_tmp);\n+            facingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n+        }\n+\n+        // final facing polygons\n+        Polygon finalFacingPoly_tmp = new Polygon();\n+        finalFacingPoly_tmp.addPoint(41, 3);\n+        finalFacingPoly_tmp.addPoint(21, 18);\n+        finalFacingPoly_tmp.addPoint(41, 14);\n+        finalFacingPoly_tmp.addPoint(42, 14);\n+        finalFacingPoly_tmp.addPoint(61, 18);\n+        finalFacingPoly_tmp.addPoint(42, 3);\n+\n+        // create the rotated shapes\n+        facingRotate.setToIdentity();\n+        finalFacingPolys = new Shape[8];\n+        for (int dir: allDirections)\n+        {\n+            finalFacingPolys[dir] = facingRotate.createTransformedShape(finalFacingPoly_tmp);\n+            facingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcf74a590f51232602f6595bf5b555b8e1b2a06e"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2OTM2NzkyOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NDo0NlrOGYwGJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NDo0NlrOGYwGJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwNzAxNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        facingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n          \n          \n            \n                        facingRotate.rotate(Math.toRadians(60), HEX_W / 2, HEX_H / 2);", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r428607014", "createdAt": "2020-05-21T11:54:46Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "diffHunk": "@@ -4647,23 +4666,23 @@ public void initPolys() {\n         movementPoly_tmp.addPoint(45, 68);\n \n         // create the rotated shapes\n-        FacingRotate.setToIdentity();\n+        facingRotate.setToIdentity();\n         movementPolys = new Shape[8];\n         for (int dir: allDirections)\n         {\n-            movementPolys[dir] = FacingRotate.createTransformedShape(movementPoly_tmp);\n-            FacingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n+            movementPolys[dir] = facingRotate.createTransformedShape(movementPoly_tmp);\n+            facingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcf74a590f51232602f6595bf5b555b8e1b2a06e"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2OTM2ODk1OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NTowOFrOGYwGyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NTowOFrOGYwGyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwNzE3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    facingRotate.rotate(Math.toRadians(180),HEX_W/2,HEX_H/2);\n          \n          \n            \n                    facingRotate.rotate(Math.toRadians(180), HEX_W / 2, HEX_H / 2);", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r428607176", "createdAt": "2020-05-21T11:55:08Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "diffHunk": "@@ -4647,23 +4666,23 @@ public void initPolys() {\n         movementPoly_tmp.addPoint(45, 68);\n \n         // create the rotated shapes\n-        FacingRotate.setToIdentity();\n+        facingRotate.setToIdentity();\n         movementPolys = new Shape[8];\n         for (int dir: allDirections)\n         {\n-            movementPolys[dir] = FacingRotate.createTransformedShape(movementPoly_tmp);\n-            FacingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n+            movementPolys[dir] = facingRotate.createTransformedShape(movementPoly_tmp);\n+            facingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n         }\n \n         // Up and Down Arrows\n-        FacingRotate.setToIdentity();\n-        FacingRotate.translate(0, -31);\n-        upArrow = FacingRotate.createTransformedShape(movementPoly_tmp);\n-\n-        FacingRotate.setToIdentity();\n-        FacingRotate.rotate(Math.toRadians(180),HEX_W/2,HEX_H/2);\n-        FacingRotate.translate(0, -31);\n-        downArrow = FacingRotate.createTransformedShape(movementPoly_tmp);\n+        facingRotate.setToIdentity();\n+        facingRotate.translate(0, -31);\n+        upArrow = facingRotate.createTransformedShape(movementPoly_tmp);\n+\n+        facingRotate.setToIdentity();\n+        facingRotate.rotate(Math.toRadians(180),HEX_W/2,HEX_H/2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcf74a590f51232602f6595bf5b555b8e1b2a06e"}, "originalPosition": 75}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2OTM3MDAxOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NTozNlrOGYwHcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NTozNlrOGYwHcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwNzM0Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        facingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n          \n          \n            \n                        facingRotate.rotate(Math.toRadians(60), HEX_W / 2, HEX_H / 2);", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r428607347", "createdAt": "2020-05-21T11:55:36Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "diffHunk": "@@ -4620,8 +4621,26 @@ public void initPolys() {\n         facingPolys = new Shape[8];\n         for (int dir: allDirections)\n         {\n-            facingPolys[dir] = FacingRotate.createTransformedShape(facingPoly_tmp);\n-            FacingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);\n+            facingPolys[dir] = facingRotate.createTransformedShape(facingPoly_tmp);\n+            facingRotate.rotate(Math.toRadians(60),HEX_W/2,HEX_H/2);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcf74a590f51232602f6595bf5b555b8e1b2a06e"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2OTM3MTcyOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NjoyNlrOGYwIlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NjoyNlrOGYwIlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwNzYzNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (isLastStep && step.getMovementType(isLastStep) != EntityMovementType.MOVE_ILLEGAL) {\n          \n          \n            \n                    if (isLastStep && (step.getMovementType(isLastStep) != EntityMovementType.MOVE_ILLEGAL)) {", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r428607636", "createdAt": "2020-05-21T11:56:26Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "diffHunk": "@@ -79,20 +79,25 @@ public void prepare() {\n         final Point stepPos = bv.getHexLocation(step.getPosition());\n         stepPos.translate(-bounds.x, -bounds.y);\n         \n-        Shape FacingArrow = bv.facingPolys[step.getFacing()];\n         Shape moveArrow = bv.movementPolys[step.getFacing()];\n+        Shape facingArrow;\n+        if (isLastStep && step.getMovementType(isLastStep) != EntityMovementType.MOVE_ILLEGAL) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcf74a590f51232602f6595bf5b555b8e1b2a06e"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2OTM3Mzc4OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NzoxNlrOGYwJ0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NzoxNlrOGYwJ0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwNzk1NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    upDownOffset.translate(-30,0);\n          \n          \n            \n                    upDownOffset.translate(-30, 0);", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r428607954", "createdAt": "2020-05-21T11:57:16Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "diffHunk": "@@ -79,20 +79,25 @@ public void prepare() {\n         final Point stepPos = bv.getHexLocation(step.getPosition());\n         stepPos.translate(-bounds.x, -bounds.y);\n         \n-        Shape FacingArrow = bv.facingPolys[step.getFacing()];\n         Shape moveArrow = bv.movementPolys[step.getFacing()];\n+        Shape facingArrow;\n+        if (isLastStep && step.getMovementType(isLastStep) != EntityMovementType.MOVE_ILLEGAL) {\n+            facingArrow = bv.finalFacingPolys[step.getFacing()];\n+        } else {\n+            facingArrow = bv.facingPolys[step.getFacing()];\n+        }\n+\n+        AffineTransform stepOffset = new AffineTransform();\n+        stepOffset.translate(stepPos.x + 1, stepPos.y + 1);   //when is stepPos ever <> 0?\n         \n-        AffineTransform StepOffset = new AffineTransform();\n-        StepOffset.translate(stepPos.x + 1, stepPos.y + 1);   //when is stepPos ever <> 0?\n-        \n-        AffineTransform ShadowOffset = new AffineTransform();\n-        ShadowOffset.translate(-1,-1);\n+        AffineTransform shadowOffset = new AffineTransform();\n+        shadowOffset.translate(-1,-1);\n         \n-        AffineTransform UpDownOffset = new AffineTransform();\n-        UpDownOffset.translate(-30,0);\n+        AffineTransform upDownOffset = new AffineTransform();\n+        upDownOffset.translate(-30,0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcf74a590f51232602f6595bf5b555b8e1b2a06e"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2OTM3NDU0OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NzozMVrOGYwKRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxMTo1NzozMVrOGYwKRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYwODA2OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    shadowOffset.translate(-1,-1);\n          \n          \n            \n                    shadowOffset.translate(-1, -1);", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r428608068", "createdAt": "2020-05-21T11:57:31Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "diffHunk": "@@ -79,20 +79,25 @@ public void prepare() {\n         final Point stepPos = bv.getHexLocation(step.getPosition());\n         stepPos.translate(-bounds.x, -bounds.y);\n         \n-        Shape FacingArrow = bv.facingPolys[step.getFacing()];\n         Shape moveArrow = bv.movementPolys[step.getFacing()];\n+        Shape facingArrow;\n+        if (isLastStep && step.getMovementType(isLastStep) != EntityMovementType.MOVE_ILLEGAL) {\n+            facingArrow = bv.finalFacingPolys[step.getFacing()];\n+        } else {\n+            facingArrow = bv.facingPolys[step.getFacing()];\n+        }\n+\n+        AffineTransform stepOffset = new AffineTransform();\n+        stepOffset.translate(stepPos.x + 1, stepPos.y + 1);   //when is stepPos ever <> 0?\n         \n-        AffineTransform StepOffset = new AffineTransform();\n-        StepOffset.translate(stepPos.x + 1, stepPos.y + 1);   //when is stepPos ever <> 0?\n-        \n-        AffineTransform ShadowOffset = new AffineTransform();\n-        ShadowOffset.translate(-1,-1);\n+        AffineTransform shadowOffset = new AffineTransform();\n+        shadowOffset.translate(-1,-1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcf74a590f51232602f6595bf5b555b8e1b2a06e"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NDQ1OTYzOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxOTo1MTo1OVrOGZiQFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQxOToxNjoyMlrOGZwwbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQyODc1OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                StepSprite(BoardView1 boardView1, final MoveStep step,\n          \n          \n            \n                public StepSprite(BoardView1 boardView1, final MoveStep step,", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r429428759", "createdAt": "2020-05-22T19:51:59Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "diffHunk": "@@ -30,11 +30,11 @@\n class StepSprite extends Sprite {\n \n     private MoveStep step;\n-    boolean isLastStep = false;\n+    private boolean isLastStep;\n     private Image baseScaleImage;\n-    \n-    public StepSprite(BoardView1 boardView1, final MoveStep step,\n-            boolean isLastStep) {\n+\n+    StepSprite(BoardView1 boardView1, final MoveStep step,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f002c1e51dfc3385314791d3930878d82578545d"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ1MDUwMg==", "bodyText": "The class was already package-private so I didn't see a reason to keep the constructor public.  Is this a style for the project?", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r429450502", "createdAt": "2020-05-22T21:03:38Z", "author": {"login": "sagnam"}, "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "diffHunk": "@@ -30,11 +30,11 @@\n class StepSprite extends Sprite {\n \n     private MoveStep step;\n-    boolean isLastStep = false;\n+    private boolean isLastStep;\n     private Image baseScaleImage;\n-    \n-    public StepSprite(BoardView1 boardView1, final MoveStep step,\n-            boolean isLastStep) {\n+\n+    StepSprite(BoardView1 boardView1, final MoveStep step,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQyODc1OQ=="}, "originalCommit": {"oid": "f002c1e51dfc3385314791d3930878d82578545d"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ5NTczNg==", "bodyText": "Style in a legacy project like this is a strong word. Generally speaking \"when in Rome,\" is best, but we are not opposed to meaningful improvements in style if coupled with meaningful work.\nIn this very specific case I'd say we prefer explicit access modifiers on all members.", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r429495736", "createdAt": "2020-05-23T00:22:17Z", "author": {"login": "sixlettervariables"}, "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "diffHunk": "@@ -30,11 +30,11 @@\n class StepSprite extends Sprite {\n \n     private MoveStep step;\n-    boolean isLastStep = false;\n+    private boolean isLastStep;\n     private Image baseScaleImage;\n-    \n-    public StepSprite(BoardView1 boardView1, final MoveStep step,\n-            boolean isLastStep) {\n+\n+    StepSprite(BoardView1 boardView1, final MoveStep step,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQyODc1OQ=="}, "originalCommit": {"oid": "f002c1e51dfc3385314791d3930878d82578545d"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY2NjQxMw==", "bodyText": "Done", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r429666413", "createdAt": "2020-05-24T19:16:22Z", "author": {"login": "sagnam"}, "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "diffHunk": "@@ -30,11 +30,11 @@\n class StepSprite extends Sprite {\n \n     private MoveStep step;\n-    boolean isLastStep = false;\n+    private boolean isLastStep;\n     private Image baseScaleImage;\n-    \n-    public StepSprite(BoardView1 boardView1, final MoveStep step,\n-            boolean isLastStep) {\n+\n+    StepSprite(BoardView1 boardView1, final MoveStep step,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQyODc1OQ=="}, "originalCommit": {"oid": "f002c1e51dfc3385314791d3930878d82578545d"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NDQ3OTY4OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMDowMzozNlrOGZidFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQyMTowNTozN1rOGZjnKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzMjA4NA==", "bodyText": "I think this is redundant.", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r429432084", "createdAt": "2020-05-22T20:03:36Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "diffHunk": "@@ -64,35 +63,39 @@ public void prepare() {\n         Image tempImage = new BufferedImage(BoardView1.HEX_W, BoardView1.HEX_H,\n                 BufferedImage.TYPE_INT_ARGB);\n         Graphics graph = tempImage.getGraphics();\n-        \n+\n         if (GUIPreferences.getInstance().getAntiAliasing()) {\n             ((Graphics2D) graph).setRenderingHint(\n                     RenderingHints.KEY_ANTIALIASING,\n                     RenderingHints.VALUE_ANTIALIAS_ON);\n         }\n \n         // fill with key color\n-        graph.setColor(new Color(0,0,0,0));\n+        graph.setColor(new Color(0, 0, 0, 0));\n         graph.fillRect(0, 0, BoardView1.HEX_W, BoardView1.HEX_H);\n \n         // setup some variables\n         final Point stepPos = bv.getHexLocation(step.getPosition());\n         stepPos.translate(-bounds.x, -bounds.y);\n-        \n-        Shape FacingArrow = bv.facingPolys[step.getFacing()];\n+\n         Shape moveArrow = bv.movementPolys[step.getFacing()];\n-        \n-        AffineTransform StepOffset = new AffineTransform();\n-        StepOffset.translate(stepPos.x + 1, stepPos.y + 1);   //when is stepPos ever <> 0?\n-        \n-        AffineTransform ShadowOffset = new AffineTransform();\n-        ShadowOffset.translate(-1,-1);\n-        \n-        AffineTransform UpDownOffset = new AffineTransform();\n-        UpDownOffset.translate(-30,0);\n-        \n+        Shape facingArrow = bv.facingPolys[step.getFacing()];\n+        Shape finalFacingArrow = bv.finalFacingPolys[step.getFacing()];\n+        if (isLastStep &&\n+                (step.getMovementType(true) != EntityMovementType.MOVE_ILLEGAL)) {\n+            facingArrow = bv.facingPolys[step.getFacing()];\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f002c1e51dfc3385314791d3930878d82578545d"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ1MTA0OA==", "bodyText": "Ooops!", "url": "https://github.com/MegaMek/megamek/pull/1969#discussion_r429451048", "createdAt": "2020-05-22T21:05:37Z", "author": {"login": "sagnam"}, "path": "megamek/src/megamek/client/ui/swing/boardview/StepSprite.java", "diffHunk": "@@ -64,35 +63,39 @@ public void prepare() {\n         Image tempImage = new BufferedImage(BoardView1.HEX_W, BoardView1.HEX_H,\n                 BufferedImage.TYPE_INT_ARGB);\n         Graphics graph = tempImage.getGraphics();\n-        \n+\n         if (GUIPreferences.getInstance().getAntiAliasing()) {\n             ((Graphics2D) graph).setRenderingHint(\n                     RenderingHints.KEY_ANTIALIASING,\n                     RenderingHints.VALUE_ANTIALIAS_ON);\n         }\n \n         // fill with key color\n-        graph.setColor(new Color(0,0,0,0));\n+        graph.setColor(new Color(0, 0, 0, 0));\n         graph.fillRect(0, 0, BoardView1.HEX_W, BoardView1.HEX_H);\n \n         // setup some variables\n         final Point stepPos = bv.getHexLocation(step.getPosition());\n         stepPos.translate(-bounds.x, -bounds.y);\n-        \n-        Shape FacingArrow = bv.facingPolys[step.getFacing()];\n+\n         Shape moveArrow = bv.movementPolys[step.getFacing()];\n-        \n-        AffineTransform StepOffset = new AffineTransform();\n-        StepOffset.translate(stepPos.x + 1, stepPos.y + 1);   //when is stepPos ever <> 0?\n-        \n-        AffineTransform ShadowOffset = new AffineTransform();\n-        ShadowOffset.translate(-1,-1);\n-        \n-        AffineTransform UpDownOffset = new AffineTransform();\n-        UpDownOffset.translate(-30,0);\n-        \n+        Shape facingArrow = bv.facingPolys[step.getFacing()];\n+        Shape finalFacingArrow = bv.finalFacingPolys[step.getFacing()];\n+        if (isLastStep &&\n+                (step.getMovementType(true) != EntityMovementType.MOVE_ILLEGAL)) {\n+            facingArrow = bv.facingPolys[step.getFacing()];\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzMjA4NA=="}, "originalCommit": {"oid": "f002c1e51dfc3385314791d3930878d82578545d"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2782, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}