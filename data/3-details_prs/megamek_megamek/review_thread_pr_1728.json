{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxNzI5Mzgy", "number": 1728, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMjo0MzozNlrODl_V-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwNTozNToxNFrODl_zhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTYxNzIyOnYy", "diffSide": "LEFT", "path": "megamek/src/megamek/common/Crew.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMjo0MzozNlrOFzMI7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMzoxMjo0NVrOFzMQlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMDU4OA==", "bodyText": "What happened to all these functions that got removed?", "url": "https://github.com/MegaMek/megamek/pull/1728#discussion_r389220588", "createdAt": "2020-03-07T02:43:36Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/Crew.java", "diffHunk": "@@ -1173,20 +1252,6 @@ public void setCurrentPilot(int pos) {\n         actedThisTurn[pos] = true;\n     }\n \n-    /**\n-     * Set the gunner slot. If a multicrew cockpit uses the same crew member as both pilot and gunner\n-     * (i.e. cockpit command console), sets the pilot as well.\n-     *\n-     * @param pos The slot index to set as gunner.\n-     */\n-    public void setCurrentGunner(int pos) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49831ab097a0c0b019e3af9343b3ccfd425acb30"}, "originalPosition": 499}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMjU0OQ==", "bodyText": "Unused for years, so I removed them.", "url": "https://github.com/MegaMek/megamek/pull/1728#discussion_r389222549", "createdAt": "2020-03-07T03:12:45Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Crew.java", "diffHunk": "@@ -1173,20 +1252,6 @@ public void setCurrentPilot(int pos) {\n         actedThisTurn[pos] = true;\n     }\n \n-    /**\n-     * Set the gunner slot. If a multicrew cockpit uses the same crew member as both pilot and gunner\n-     * (i.e. cockpit command console), sets the pilot as well.\n-     *\n-     * @param pos The slot index to set as gunner.\n-     */\n-    public void setCurrentGunner(int pos) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMDU4OA=="}, "originalCommit": {"oid": "49831ab097a0c0b019e3af9343b3ccfd425acb30"}, "originalPosition": 499}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTYxODAzOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/server/ScenarioLoader.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMjo0NTozNlrOFzMJYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMzoyMjo0MFrOFzMS8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMDcwNQ==", "bodyText": "Isn't this going to break scenarios?", "url": "https://github.com/MegaMek/megamek/pull/1728#discussion_r389220705", "createdAt": "2020-03-07T02:45:36Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/server/ScenarioLoader.java", "diffHunk": "@@ -555,7 +555,7 @@ private Entity parseEntityLine(String s) throws ScenarioLoaderException {\n             System.out.println(String.format(\"Loading %s\", ms.getName())); //$NON-NLS-1$\n             Entity e = new MechFileParser(ms.getSourceFile(), ms.getEntryName()).getEntity();\n             e.setCrew(new Crew(e.getCrew().getCrewType(), parts[1], 1, Integer.parseInt(parts[2]),\n-                    Integer.parseInt(parts[3])));\n+                    Integer.parseInt(parts[3]), Integer.parseInt(parts[4]), null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49831ab097a0c0b019e3af9343b3ccfd425acb30"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMjY0NQ==", "bodyText": "I think so, this I'll fix immediately.", "url": "https://github.com/MegaMek/megamek/pull/1728#discussion_r389222645", "createdAt": "2020-03-07T03:14:15Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/server/ScenarioLoader.java", "diffHunk": "@@ -555,7 +555,7 @@ private Entity parseEntityLine(String s) throws ScenarioLoaderException {\n             System.out.println(String.format(\"Loading %s\", ms.getName())); //$NON-NLS-1$\n             Entity e = new MechFileParser(ms.getSourceFile(), ms.getEntryName()).getEntity();\n             e.setCrew(new Crew(e.getCrew().getCrewType(), parts[1], 1, Integer.parseInt(parts[2]),\n-                    Integer.parseInt(parts[3])));\n+                    Integer.parseInt(parts[3]), Integer.parseInt(parts[4]), null));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMDcwNQ=="}, "originalCommit": {"oid": "49831ab097a0c0b019e3af9343b3ccfd425acb30"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMzE1Mg==", "bodyText": "Fixed", "url": "https://github.com/MegaMek/megamek/pull/1728#discussion_r389223152", "createdAt": "2020-03-07T03:22:40Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/server/ScenarioLoader.java", "diffHunk": "@@ -555,7 +555,7 @@ private Entity parseEntityLine(String s) throws ScenarioLoaderException {\n             System.out.println(String.format(\"Loading %s\", ms.getName())); //$NON-NLS-1$\n             Entity e = new MechFileParser(ms.getSourceFile(), ms.getEntryName()).getEntity();\n             e.setCrew(new Crew(e.getCrew().getCrewType(), parts[1], 1, Integer.parseInt(parts[2]),\n-                    Integer.parseInt(parts[3])));\n+                    Integer.parseInt(parts[3]), Integer.parseInt(parts[4]), null));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMDcwNQ=="}, "originalCommit": {"oid": "49831ab097a0c0b019e3af9343b3ccfd425acb30"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTYyMDAzOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Crew.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMjo0OToxN1rOFzMKXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwMzoxMjowNFrOFzMQdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMDk1OA==", "bodyText": "What's the deal with this function? Why not just either pass in ints or switch the whole thing to a boolean, why convert between the two?", "url": "https://github.com/MegaMek/megamek/pull/1728#discussion_r389220958", "createdAt": "2020-03-07T02:49:17Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/Crew.java", "diffHunk": "@@ -294,10 +369,28 @@ public String getNickname(int pos) {\n         return nickname[pos];\n     }\n \n+    public int getGender() {\n+        return gender[0];\n+    }\n+\n+    public int getGender(int pos) {\n+        // The randomize return value is used in MekHQ to create new personnel following a battle,\n+        // and should not be changed without ensuring it doesn't break on that side\n+        if (pos < gender.length) {\n+            return gender[pos];\n+        } else {\n+            return G_RANDOMIZE;\n+        }\n+    }\n+\n+    public static int getGenderAsInt(boolean isFemale) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49831ab097a0c0b019e3af9343b3ccfd425acb30"}, "originalPosition": 233}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMjUxNw==", "bodyText": "Temporary function to keep functionality while I finished updating names. I'll be removing this in wave 2.", "url": "https://github.com/MegaMek/megamek/pull/1728#discussion_r389222517", "createdAt": "2020-03-07T03:12:04Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Crew.java", "diffHunk": "@@ -294,10 +369,28 @@ public String getNickname(int pos) {\n         return nickname[pos];\n     }\n \n+    public int getGender() {\n+        return gender[0];\n+    }\n+\n+    public int getGender(int pos) {\n+        // The randomize return value is used in MekHQ to create new personnel following a battle,\n+        // and should not be changed without ensuring it doesn't break on that side\n+        if (pos < gender.length) {\n+            return gender[pos];\n+        } else {\n+            return G_RANDOMIZE;\n+        }\n+    }\n+\n+    public static int getGenderAsInt(boolean isFemale) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIyMDk1OA=="}, "originalCommit": {"oid": "49831ab097a0c0b019e3af9343b3ccfd425acb30"}, "originalPosition": 233}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMTY5Mjg3OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/server/ScenarioLoader.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwNTozNToxNFrOFzMvQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QwNTozNToxNFrOFzMvQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIzMDQwMA==", "bodyText": "Think this might be 'off by one' here as well.", "url": "https://github.com/MegaMek/megamek/pull/1728#discussion_r389230400", "createdAt": "2020-03-07T05:35:14Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/server/ScenarioLoader.java", "diffHunk": "@@ -554,9 +554,19 @@ private Entity parseEntityLine(String s) throws ScenarioLoaderException {\n             }\n             System.out.println(String.format(\"Loading %s\", ms.getName())); //$NON-NLS-1$\n             Entity e = new MechFileParser(ms.getSourceFile(), ms.getEntryName()).getEntity();\n-            e.setCrew(new Crew(e.getCrew().getCrewType(), parts[1], 1, Integer.parseInt(parts[2]),\n-                    Integer.parseInt(parts[3]), Integer.parseInt(parts[4]), null));\n-            if(parts.length >= 7) {\n+\n+            // This if statement ensures that scenarios don't break if they don't have gender, as that\n+            // field was only added in MegaMek 0.47.5\n+            if (parts.length > 4) {\n+                e.setCrew(new Crew(e.getCrew().getCrewType(), parts[1], 1,\n+                        Integer.parseInt(parts[2]), Integer.parseInt(parts[3]),\n+                        Integer.parseInt(parts[4]), null));\n+            } else {\n+                e.setCrew(new Crew(e.getCrew().getCrewType(), parts[1], 1,\n+                        Integer.parseInt(parts[2]), Integer.parseInt(parts[3]),\n+                        Crew.G_RANDOMIZE, null));\n+            }\n+            if (parts.length >= 7) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a014a7b9d078318502f31b58916c4946f54d4633"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2499, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}