{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2NjI5NDk0", "number": 1809, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMjowNzoyMFrODtTj0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMToyMzo0NFrODtV-gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4ODMyOTc5OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQyMjowNzoyMFrOF-p_iQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMToyMToyMVrOF-tqMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI0NDA0MQ==", "bodyText": "Cast to Infantry isn't needed here.", "url": "https://github.com/MegaMek/megamek/pull/1809#discussion_r401244041", "createdAt": "2020-03-31T22:07:20Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "diffHunk": "@@ -115,8 +115,10 @@ public double getMaxDamageAtRange(final MovePath shooterPath, final MovePath tar\n \n             // case 1\n             if (weaponType.hasFlag(WeaponType.F_INFANTRY)) {\n+                int infantryCount = shooter.isConventionalInfantry() ?\n+                        ((Infantry) shooter).getInternal(Infantry.LOC_INFANTRY) : 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56071c37eb1fdb8446fa943866ee3cab58cf317c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI5ODM3MA==", "bodyText": "It's used by the bot to calculate incoming and outgoing damage when evaluating a path being considered by an infantry unit. So it was trying to evaluate a move path for a foot platoon and checking how much damage an \"apocalypse world rover\" would do to the foot platoon. That particular tank has a weapon with an infantry flag, but was not an infantry unit.\nI'm pretty sure this will lead to incorrect behavior for battle armor, so I'm going to take another look at it.", "url": "https://github.com/MegaMek/megamek/pull/1809#discussion_r401298370", "createdAt": "2020-04-01T00:58:49Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "diffHunk": "@@ -115,8 +115,10 @@ public double getMaxDamageAtRange(final MovePath shooterPath, final MovePath tar\n \n             // case 1\n             if (weaponType.hasFlag(WeaponType.F_INFANTRY)) {\n+                int infantryCount = shooter.isConventionalInfantry() ?\n+                        ((Infantry) shooter).getInternal(Infantry.LOC_INFANTRY) : 1;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI0NDA0MQ=="}, "originalCommit": {"oid": "56071c37eb1fdb8446fa943866ee3cab58cf317c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMwNDExMg==", "bodyText": "There, that should do it.", "url": "https://github.com/MegaMek/megamek/pull/1809#discussion_r401304112", "createdAt": "2020-04-01T01:21:21Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "diffHunk": "@@ -115,8 +115,10 @@ public double getMaxDamageAtRange(final MovePath shooterPath, final MovePath tar\n \n             // case 1\n             if (weaponType.hasFlag(WeaponType.F_INFANTRY)) {\n+                int infantryCount = shooter.isConventionalInfantry() ?\n+                        ((Infantry) shooter).getInternal(Infantry.LOC_INFANTRY) : 1;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI0NDA0MQ=="}, "originalCommit": {"oid": "56071c37eb1fdb8446fa943866ee3cab58cf317c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4ODcyNDY3OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMToyMzoxMVrOF-tr9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMToyMzoxMVrOF-tr9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMwNDU2NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    for (final Mounted weapon : shooter.getWeaponList()) {            \n          \n          \n            \n                    for (final Mounted weapon : shooter.getWeaponList()) {", "url": "https://github.com/MegaMek/megamek/pull/1809#discussion_r401304565", "createdAt": "2020-04-01T01:23:11Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "diffHunk": "@@ -91,7 +92,7 @@ public double getMaxDamageAtRange(final MovePath shooterPath, final MovePath tar\n                 && target.hasETypeFlag(Entity.ETYPE_INFANTRY) && ((Infantry) target).isMechanized();\n \n         // cycle through my weapons\n-        for (final Mounted weapon : shooter.getWeaponList()) {\n+        for (final Mounted weapon : shooter.getWeaponList()) {            ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c959e17508d0b1cd6cd51f8450c6110c7b760b1"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4ODcyNTMxOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMToyMzozMVrOF-tsVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMToyMzozMVrOF-tsVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMwNDY2MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if(shooter.isConventionalInfantry()) {\n          \n          \n            \n                            if (shooter.isConventionalInfantry()) {", "url": "https://github.com/MegaMek/megamek/pull/1809#discussion_r401304661", "createdAt": "2020-04-01T01:23:31Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "diffHunk": "@@ -115,8 +116,16 @@ public double getMaxDamageAtRange(final MovePath shooterPath, final MovePath tar\n \n             // case 1\n             if (weaponType.hasFlag(WeaponType.F_INFANTRY)) {\n+                int infantryCount = 1;\n+                \n+                if(shooter.isConventionalInfantry()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c959e17508d0b1cd6cd51f8450c6110c7b760b1"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4ODcyNTc2OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMToyMzo0NFrOF-tsjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMToyMzo0NFrOF-tsjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMwNDcxOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            } else if(shooter instanceof BattleArmor){\n          \n          \n            \n                            } else if (shooter instanceof BattleArmor) {", "url": "https://github.com/MegaMek/megamek/pull/1809#discussion_r401304719", "createdAt": "2020-04-01T01:23:44Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/bot/princess/InfantryFireControl.java", "diffHunk": "@@ -115,8 +116,16 @@ public double getMaxDamageAtRange(final MovePath shooterPath, final MovePath tar\n \n             // case 1\n             if (weaponType.hasFlag(WeaponType.F_INFANTRY)) {\n+                int infantryCount = 1;\n+                \n+                if(shooter.isConventionalInfantry()) {\n+                    infantryCount = shooter.getInternal(Infantry.LOC_INFANTRY);\n+                } else if(shooter instanceof BattleArmor){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c959e17508d0b1cd6cd51f8450c6110c7b760b1"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2888, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}