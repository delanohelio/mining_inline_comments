{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyOTk3Nzg0", "number": 1735, "title": "Fix kg-standard weight calculations", "bodyText": "I broke this somewhere along the line by not passing the entity to the rounding method, so it couldn't figure out whether to round to the half-ton or the kg. I added the argument, then removed the version of RoundWeight#round that doesn't have an Entity parameter to prevent the same mistake in the future. It's only used internally.\nThis purpose of the RoundWeight parameter to EquipmentType#getTonnage is to allow the standard rounding system to be overridden to support fractional accounting.", "createdAt": "2020-03-03T14:54:26Z", "url": "https://github.com/MegaMek/megamek/pull/1735", "merged": true, "mergeCommit": {"oid": "4f4a306adc456afc9f964158df98832a5c298081"}, "closed": true, "closedAt": "2020-03-04T13:59:05Z", "author": {"login": "neoancient"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKDcWEAH2gAyMzgyOTk3Nzg0OmQzZTFlYzBiNDY5N2RmMjk4NDY2ZDVjZTdkM2VkOWM2YWZkN2Q4NTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKFd-8AFqTM2ODE2MzM4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d3e1ec0b4697df298466d5ce7d3ed9c6afd7d850", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/d3e1ec0b4697df298466d5ce7d3ed9c6afd7d850", "committedDate": "2020-03-03T14:46:00Z", "message": "Round equipment weight appropriately for the unit type.\n\nEquipmentType#getTonnage(Entity, int, RoundWeight) was not providing the entity to RoundWeight#round, so it was rounding to the half ton for everything."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e7bc6d58d57060fb916f553845cb0b9a3eec1ed", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/4e7bc6d58d57060fb916f553845cb0b9a3eec1ed", "committedDate": "2020-03-03T14:49:19Z", "message": "Removed the version of RoundWeight#round that does not have an Entity parameter. It was only used internally."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MTYzMDA4", "url": "https://github.com/MegaMek/megamek/pull/1735#pullrequestreview-368163008", "createdAt": "2020-03-03T17:07:09Z", "commit": {"oid": "4e7bc6d58d57060fb916f553845cb0b9a3eec1ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNzowNzowOVrOFxOuJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNzowNzowOVrOFxOuJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE2NTczMg==", "bodyText": "What's the null do? I remember seeing that function definition, but I forgot.", "url": "https://github.com/MegaMek/megamek/pull/1735#discussion_r387165732", "createdAt": "2020-03-03T17:07:09Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/RoundWeight.java", "diffHunk": "@@ -118,7 +107,7 @@ public static double nearestHalfTon(double weight) {\n      * @return       The weight in tons, rounded to the closest ton.\n      */\n     public static double nearestTon(double weight) {\n-        return NEAREST_TON.round(weight);\n+        return NEAREST_TON.round(weight, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e7bc6d58d57060fb916f553845cb0b9a3eec1ed"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MTYzMzgz", "url": "https://github.com/MegaMek/megamek/pull/1735#pullrequestreview-368163383", "createdAt": "2020-03-03T17:07:36Z", "commit": {"oid": "4e7bc6d58d57060fb916f553845cb0b9a3eec1ed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4587, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}