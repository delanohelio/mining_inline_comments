{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyMDQ1MTM5", "number": 2238, "title": "Board editor fixes (#2233,#1762)", "bodyText": "Resolves #2233\nResolves #1762\n... and various small issues.", "createdAt": "2020-09-23T21:16:47Z", "url": "https://github.com/MegaMek/megamek/pull/2238", "merged": true, "mergeCommit": {"oid": "dc16a7c4518ca682ba2fd7093d210fff04b4773c"}, "closed": true, "closedAt": "2020-09-24T21:54:16Z", "author": {"login": "SJuliez"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLzAmcgH2gAyNDkyMDQ1MTM5OjM2ODg1YzhhNThmMWNlZDljZWUyMTZlMGEyOWVhNjQzYjNmMzE5Njc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMD34qgFqTQ5NTc1NDI5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "36885c8a58f1ced9cee216e0a29ea643b3f31967", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/36885c8a58f1ced9cee216e0a29ea643b3f31967", "committedDate": "2020-09-23T20:56:13Z", "message": "BoardEditor Various issues and #2233 and #1762"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6b523a004989d4f9a105f9c00759a2a1428c428", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/e6b523a004989d4f9a105f9c00759a2a1428c428", "committedDate": "2020-09-23T21:13:51Z", "message": "Small Correction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MDkzNzE4", "url": "https://github.com/MegaMek/megamek/pull/2238#pullrequestreview-495093718", "createdAt": "2020-09-23T22:32:24Z", "commit": {"oid": "e6b523a004989d4f9a105f9c00759a2a1428c428"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QyMjozMjoyNVrOHXDNNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QyMjozMjoyNVrOHXDNNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzkzMTgzMA==", "bodyText": "This should be moved into the try statement itself (try (...)) so if board.save throws, os will be cleaned up.", "url": "https://github.com/MegaMek/megamek/pull/2238#discussion_r493931830", "createdAt": "2020-09-23T22:32:25Z", "author": {"login": "sixlettervariables"}, "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "diffHunk": "@@ -1622,47 +1554,69 @@ private void boardSaveImage(boolean ignoreUnits) {\n     }\n \n     /**\n-     * Opens a file dialog box to select a file to save as; saves the board to\n-     * the file.\n+     * Saves the board to a .board file. \n+     * When saveAs is true, acts as a Save As... by opening a file chooser dialog.\n+     * When saveAs is false, it will directly save to the current board file name,\n+     * if it is known and otherwise act as Save As... \n      */\n-    private boolean boardSaveAs() {\n-        // First, correct connection issues\n+    private boolean boardSave(boolean saveAs) {\n+        // Correct connection issues and do a validation.\n         correctExits();\n-        JFileChooser fc = new JFileChooser(\"data\" + File.separator + \"boards\");\n+        validateBoard(false); \n+        \n+        // Choose a board file to save to if this was\n+        // called as \"Save As...\" or there is no current filename\n+        if (curBoardFile == null || saveAs) {\n+            if (!chooseSaveBoardFile()) {\n+                return false;\n+            }\n+        }\n+        butSourceFile.setEnabled(true);\n+\n+        // write the board\n+        try {\n+            OutputStream os = new FileOutputStream(curBoardFile);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6b523a004989d4f9a105f9c00759a2a1428c428"}, "originalPosition": 290}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30ebfb97985789f163cec01c6a1d70d6141f84fc", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/30ebfb97985789f163cec01c6a1d70d6141f84fc", "committedDate": "2020-09-24T16:30:48Z", "message": "Try/resource handling correction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NzU0Mjkz", "url": "https://github.com/MegaMek/megamek/pull/2238#pullrequestreview-495754293", "createdAt": "2020-09-24T16:35:05Z", "commit": {"oid": "30ebfb97985789f163cec01c6a1d70d6141f84fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4771, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}