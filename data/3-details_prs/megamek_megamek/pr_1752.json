{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1OTIwNzcy", "number": 1752, "title": "Location limits", "bodyText": "This is the third and final set of changes that validates equipment construction rules, mostly for vehicles. The first checked against motive type, the second against mount location, and this one takes care of the more tedious work of checking the maximum number in a location. For mechs this also streamlines and completes the checks for required or prohibited actuators.\nFixes MegaMek/megameklab#500", "createdAt": "2020-03-10T03:38:26Z", "url": "https://github.com/MegaMek/megamek/pull/1752", "merged": true, "mergeCommit": {"oid": "7b07b21cc26da41f46a776d13523fda8b0562261"}, "closed": true, "closedAt": "2020-03-11T03:11:47Z", "author": {"login": "neoancient"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcLvs23gH2gAyMzg1OTIwNzcyOjA5YzhiNjFlNDM5MjJhNTE3NWZjYjI3MmY0ZWQ0ZjJiY2VlZTg0OGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMd6CogH2gAyMzg1OTIwNzcyOmI4NGQ0NzE4ZTBkM2UxZjhhMTgwZWQ0ZThmZDg3NGJhMWU2ZDZkY2Q=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "09c8b61e43922a5175fcb272f4ed4f2bceee848a", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/09c8b61e43922a5175fcb272f4ed4f2bceee848a", "committedDate": "2020-03-08T20:53:47Z", "message": "Checks for required actuators with arm-mounted physical weapons."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea28f9d2595df4fe2caa4fdc90f6ac3b78f7495c", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/ea28f9d2595df4fe2caa4fdc90f6ac3b78f7495c", "committedDate": "2020-03-08T23:13:09Z", "message": "Add restrictions on equipment count by location."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd5faa2bb09ec02ce53765bf47b1a6e229927212", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/cd5faa2bb09ec02ce53765bf47b1a6e229927212", "committedDate": "2020-03-09T21:35:49Z", "message": "Don't include unallocated equipment in location limit checks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "555bf3dcb9b7be39a3db6e403104b8c14be18196", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/555bf3dcb9b7be39a3db6e403104b8c14be18196", "committedDate": "2020-03-10T02:39:02Z", "message": "Add location restriction for minesweepers."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73ca0ec9026bf0f9dc4064269dd698359be32393", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/73ca0ec9026bf0f9dc4064269dd698359be32393", "committedDate": "2020-03-10T02:50:47Z", "message": "Require lower arm for equipment that replaces the hand actuator."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48308089ed9ac1cd616f81db2e7ffd111b96df55", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/48308089ed9ac1cd616f81db2e7ffd111b96df55", "committedDate": "2020-03-10T03:36:58Z", "message": "Restrict max lift hoist check to mechs and vehicles."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxOTAwMzE3", "url": "https://github.com/MegaMek/megamek/pull/1752#pullrequestreview-371900317", "createdAt": "2020-03-10T12:18:34Z", "commit": {"oid": "48308089ed9ac1cd616f81db2e7ffd111b96df55"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjoxODozNFrOF0MZvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjoxOToxMFrOF0MaxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI3MzQ2OA==", "bodyText": "Any objection to?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            physicalWeaponsByLocation.putIfAbsent(m.getLocation(), new ArrayList<>());\n          \n          \n            \n                            physicalWeaponsByLocation.get(m.getLocation()).add(m.getType());\n          \n          \n            \n                            physicalWeaponsByLocation.computeIfAbsent(m.getLocation(), new ArrayList<>()).add(m.getType());", "url": "https://github.com/MegaMek/megamek/pull/1752#discussion_r390273468", "createdAt": "2020-03-10T12:18:34Z", "author": {"login": "sixlettervariables"}, "path": "megamek/src/megamek/common/verifier/TestEntity.java", "diffHunk": "@@ -1354,6 +1354,19 @@ public boolean hasIllegalEquipmentCombinations(StringBuffer buff) {\n                     || m.getType().hasFlag(MiscType.F_CASPAR) || m.getType().hasFlag(MiscType.F_CASPARII)) {\n                 robotics++;\n             }\n+            if (m.getType().hasFlag(MiscType.F_LIFTHOIST)) {\n+                liftHoists++;\n+            } else if ((m.getLocation() > 0)\n+                    && ((m.getType().hasFlag(MiscType.F_CLUB) && !((MiscType) m.getType()).isShield())\n+                    || m.getType().hasFlag(MiscType.F_BULLDOZER)\n+                    || m.getType().hasFlag(MiscType.F_HAND_WEAPON))) {\n+                physicalWeaponsByLocation.putIfAbsent(m.getLocation(), new ArrayList<>());\n+                physicalWeaponsByLocation.get(m.getLocation()).add(m.getType());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48308089ed9ac1cd616f81db2e7ffd111b96df55"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI3MzczMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    } else if ((getEntity().isSupportVehicle() || (getEntity() instanceof Tank)) &&  (liftHoists > 4)) {\n          \n          \n            \n                    } else if ((getEntity().isSupportVehicle() || (getEntity() instanceof Tank)) && (liftHoists > 4)) {", "url": "https://github.com/MegaMek/megamek/pull/1752#discussion_r390273733", "createdAt": "2020-03-10T12:19:10Z", "author": {"login": "sixlettervariables"}, "path": "megamek/src/megamek/common/verifier/TestEntity.java", "diffHunk": "@@ -1419,7 +1432,27 @@ public boolean hasIllegalEquipmentCombinations(StringBuffer buff) {\n             buff.append(\"Stealth armor requires an ECM generator.\\n\");\n             illegal = true;\n         }\n-        \n+        if ((getEntity() instanceof Mech) && (liftHoists > 2)) {\n+            illegal = true;\n+            buff.append(\"Can mount a maximum of two lift hoists.\\n\");\n+        } else if ((getEntity().isSupportVehicle() || (getEntity() instanceof Tank)) &&  (liftHoists > 4)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48308089ed9ac1cd616f81db2e7ffd111b96df55"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4371408323ad8e3f36a0ba39672f32266c999980", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/4371408323ad8e3f36a0ba39672f32266c999980", "committedDate": "2020-03-11T02:23:29Z", "message": "Update megamek/src/megamek/common/verifier/TestEntity.java\n\nCo-Authored-By: Christopher Watford <christopher.watford@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "429b43b69a4a8d9c6a0a3c9451e487753bf8c6ce", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/429b43b69a4a8d9c6a0a3c9451e487753bf8c6ce", "committedDate": "2020-03-11T02:23:48Z", "message": "Update megamek/src/megamek/common/verifier/TestEntity.java\n\nCo-Authored-By: Christopher Watford <christopher.watford@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b84d4718e0d3e1f8a180ed4e8fd874ba1e6d6dcd", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/b84d4718e0d3e1f8a180ed4e8fd874ba1e6d6dcd", "committedDate": "2020-03-11T02:43:49Z", "message": "Correction to Map#computeIfAbsent parameter"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4593, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}