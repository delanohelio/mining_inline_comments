{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2Njg0NTE0", "number": 1690, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjo1NjoxNFrODgxmaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjo1NjoxNFrODgxmaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NjkzNjczOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/verifier/TestTank.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjo1NjoxNFrOFrKdjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjo1Nzo1N1rOFrKhfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDgwNDQ5Mg==", "bodyText": "What? VTOLs can't mount rivet guns? That's BS, I demand a refund! ::monocle::", "url": "https://github.com/MegaMek/megamek/pull/1690#discussion_r380804492", "createdAt": "2020-02-18T16:56:14Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/verifier/TestTank.java", "diffHunk": "@@ -451,6 +458,71 @@ public boolean correctEntity(StringBuffer buff, int ammoTechLvl) {\n         return correct;\n     }\n \n+    /**\n+     * Checks whether the equipment is compatible with the vehicle's motive type\n+     *\n+     * @param eq   The equipment to check\n+     * @param mode The vehicle's motive type\n+     * @return     Whether the equipment and motive type are compatible\n+     */\n+    public static boolean legalForMotiveType(EquipmentType eq, EntityMovementMode mode) {\n+        final boolean isNaval = mode.equals(EntityMovementMode.NAVAL)\n+                || mode.equals(EntityMovementMode.HYDROFOIL)\n+                || mode.equals(EntityMovementMode.SUBMARINE);\n+        if (eq instanceof MiscType) {\n+            if (eq.hasFlag(MiscType.F_FLOTATION_HULL)) {\n+                // Per errata, WiGE vehicles automatically include flotation hull\n+                return mode.equals(EntityMovementMode.HOVER) || mode.equals(EntityMovementMode.VTOL);\n+            }\n+            if (eq.hasFlag(MiscType.F_FULLY_AMPHIBIOUS)\n+                    || eq.hasFlag(MiscType.F_LIMITED_AMPHIBIOUS)\n+                    || eq.hasFlag(MiscType.F_BULLDOZER)\n+                    || (eq.hasFlag(MiscType.F_CLUB) && eq.hasSubType(MiscType.S_COMBINE))) {\n+                return mode.equals(EntityMovementMode.WHEELED) || mode.equals(EntityMovementMode.TRACKED);\n+            }\n+            if (eq.hasFlag(MiscType.F_DUNE_BUGGY)) {\n+                return mode.equals(EntityMovementMode.WHEELED);\n+            }\n+            if (eq.hasFlag(MiscType.F_CLUB)\n+                    && eq.hasSubType(MiscType.S_CHAINSAW | MiscType.S_DUAL_SAW | MiscType.S_MINING_DRILL)) {\n+                return mode.equals(EntityMovementMode.WHEELED) || mode.equals(EntityMovementMode.TRACKED)\n+                        || mode.equals(EntityMovementMode.HOVER) || mode.equals(EntityMovementMode.WIGE);\n+            }\n+            if (eq.hasFlag(MiscType.F_MINESWEEPER)) {\n+                return mode.equals(EntityMovementMode.WHEELED) || mode.equals(EntityMovementMode.TRACKED)\n+                    || isNaval;\n+            }\n+            if (eq.hasFlag(MiscType.F_LIFEBOAT)) {\n+                // Need to filter out atmospheric lifeboat\n+                return isNaval && (eq.hasFlag(MiscType.F_TANK_EQUIPMENT) || eq.hasFlag(MiscType.F_SUPPORT_TANK_EQUIPMENT));\n+            }\n+            if (eq.hasFlag(MiscType.F_HEAVY_BRIDGE_LAYER)\n+                    || eq.hasFlag(MiscType.F_MEDIUM_BRIDGE_LAYER)\n+                    || eq.hasFlag(MiscType.F_LIGHT_BRIDGE_LAYER)\n+                    || (eq.hasFlag(MiscType.F_CLUB)\n+                    && eq.hasSubType(MiscType.S_BACKHOE | MiscType.S_ROCK_CUTTER\n+                    | MiscType.S_SPOT_WELDER | MiscType.S_WRECKING_BALL))) {\n+                return !mode.equals(EntityMovementMode.VTOL);\n+            }\n+            if (eq.hasFlag(MiscType.F_CLUB) && eq.hasSubType(MiscType.S_PILE_DRIVER)) {\n+                return !mode.equals(EntityMovementMode.VTOL)\n+                        && !mode.equals(EntityMovementMode.HOVER)\n+                        && !mode.equals(EntityMovementMode.WIGE);\n+            }\n+            if (eq.hasFlag(MiscType.F_AP_POD)) {\n+                return !isNaval;\n+            }\n+        } else if (eq instanceof WeaponType) {\n+            if (((WeaponType) eq).getAmmoType() == AmmoType.T_BPOD) {\n+                return !isNaval;\n+            }\n+            if (((WeaponType) eq).getAmmoType() == AmmoType.T_NAIL_RIVET_GUN) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06ec6f8b30e79745897dd2db34ea049214870915"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDgwNTUwMQ==", "bodyText": "I think it's a total crock that submarines can't have combines. Hello? Kelp forests?", "url": "https://github.com/MegaMek/megamek/pull/1690#discussion_r380805501", "createdAt": "2020-02-18T16:57:57Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/common/verifier/TestTank.java", "diffHunk": "@@ -451,6 +458,71 @@ public boolean correctEntity(StringBuffer buff, int ammoTechLvl) {\n         return correct;\n     }\n \n+    /**\n+     * Checks whether the equipment is compatible with the vehicle's motive type\n+     *\n+     * @param eq   The equipment to check\n+     * @param mode The vehicle's motive type\n+     * @return     Whether the equipment and motive type are compatible\n+     */\n+    public static boolean legalForMotiveType(EquipmentType eq, EntityMovementMode mode) {\n+        final boolean isNaval = mode.equals(EntityMovementMode.NAVAL)\n+                || mode.equals(EntityMovementMode.HYDROFOIL)\n+                || mode.equals(EntityMovementMode.SUBMARINE);\n+        if (eq instanceof MiscType) {\n+            if (eq.hasFlag(MiscType.F_FLOTATION_HULL)) {\n+                // Per errata, WiGE vehicles automatically include flotation hull\n+                return mode.equals(EntityMovementMode.HOVER) || mode.equals(EntityMovementMode.VTOL);\n+            }\n+            if (eq.hasFlag(MiscType.F_FULLY_AMPHIBIOUS)\n+                    || eq.hasFlag(MiscType.F_LIMITED_AMPHIBIOUS)\n+                    || eq.hasFlag(MiscType.F_BULLDOZER)\n+                    || (eq.hasFlag(MiscType.F_CLUB) && eq.hasSubType(MiscType.S_COMBINE))) {\n+                return mode.equals(EntityMovementMode.WHEELED) || mode.equals(EntityMovementMode.TRACKED);\n+            }\n+            if (eq.hasFlag(MiscType.F_DUNE_BUGGY)) {\n+                return mode.equals(EntityMovementMode.WHEELED);\n+            }\n+            if (eq.hasFlag(MiscType.F_CLUB)\n+                    && eq.hasSubType(MiscType.S_CHAINSAW | MiscType.S_DUAL_SAW | MiscType.S_MINING_DRILL)) {\n+                return mode.equals(EntityMovementMode.WHEELED) || mode.equals(EntityMovementMode.TRACKED)\n+                        || mode.equals(EntityMovementMode.HOVER) || mode.equals(EntityMovementMode.WIGE);\n+            }\n+            if (eq.hasFlag(MiscType.F_MINESWEEPER)) {\n+                return mode.equals(EntityMovementMode.WHEELED) || mode.equals(EntityMovementMode.TRACKED)\n+                    || isNaval;\n+            }\n+            if (eq.hasFlag(MiscType.F_LIFEBOAT)) {\n+                // Need to filter out atmospheric lifeboat\n+                return isNaval && (eq.hasFlag(MiscType.F_TANK_EQUIPMENT) || eq.hasFlag(MiscType.F_SUPPORT_TANK_EQUIPMENT));\n+            }\n+            if (eq.hasFlag(MiscType.F_HEAVY_BRIDGE_LAYER)\n+                    || eq.hasFlag(MiscType.F_MEDIUM_BRIDGE_LAYER)\n+                    || eq.hasFlag(MiscType.F_LIGHT_BRIDGE_LAYER)\n+                    || (eq.hasFlag(MiscType.F_CLUB)\n+                    && eq.hasSubType(MiscType.S_BACKHOE | MiscType.S_ROCK_CUTTER\n+                    | MiscType.S_SPOT_WELDER | MiscType.S_WRECKING_BALL))) {\n+                return !mode.equals(EntityMovementMode.VTOL);\n+            }\n+            if (eq.hasFlag(MiscType.F_CLUB) && eq.hasSubType(MiscType.S_PILE_DRIVER)) {\n+                return !mode.equals(EntityMovementMode.VTOL)\n+                        && !mode.equals(EntityMovementMode.HOVER)\n+                        && !mode.equals(EntityMovementMode.WIGE);\n+            }\n+            if (eq.hasFlag(MiscType.F_AP_POD)) {\n+                return !isNaval;\n+            }\n+        } else if (eq instanceof WeaponType) {\n+            if (((WeaponType) eq).getAmmoType() == AmmoType.T_BPOD) {\n+                return !isNaval;\n+            }\n+            if (((WeaponType) eq).getAmmoType() == AmmoType.T_NAIL_RIVET_GUN) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDgwNDQ5Mg=="}, "originalCommit": {"oid": "06ec6f8b30e79745897dd2db34ea049214870915"}, "originalPosition": 76}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2478, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}