{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MTI1MjEz", "number": 1620, "title": "Allow indirect LRMs to miss legs if target in water", "bodyText": "This resolves RFE #1348, which references current errata for indirect fire on TW p111.", "createdAt": "2020-01-28T16:59:54Z", "url": "https://github.com/MegaMek/megamek/pull/1620", "merged": true, "mergeCommit": {"oid": "198b4596171ae7c6b8a950b45cdaf59b1d1621cf"}, "closed": true, "closedAt": "2020-01-28T20:30:08Z", "author": {"login": "mkerensky"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-0KPcgH2gAyMzY4MTI1MjEzOjE4ODI5MDkwMjgxZDBhNzc2NDU4NDM3NzFjZjY0ODkxM2EyZTc3NjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-3EQuAFqTM0OTY2Njk5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "18829090281d0a77645843771cf648913a2e7763", "author": {"user": {"login": "mkerensky", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/18829090281d0a77645843771cf648913a2e7763", "committedDate": "2020-01-28T16:44:29Z", "message": "Allow indirect LRMs to miss legs if target in water"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NjI0NTM4", "url": "https://github.com/MegaMek/megamek/pull/1620#pullrequestreview-349624538", "createdAt": "2020-01-28T19:01:22Z", "commit": {"oid": "18829090281d0a77645843771cf648913a2e7763"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTowMToyMlrOFiw15Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTowMToyMlrOFiw15Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5NjEzMw==", "bodyText": "This would work in most situations, but a mech standing in depth 0 water (or a superheavy in 0-1) receiving partial cover from terrain would incorrectly have the partial cover hit removed.", "url": "https://github.com/MegaMek/megamek/pull/1620#discussion_r371996133", "createdAt": "2020-01-28T19:01:22Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/common/weapons/WeaponHandler.java", "diffHunk": "@@ -1555,8 +1556,11 @@ protected void handleEntityDamage(Entity entityTarget,\n         }\n         boolean isIndirect = wtype.hasModes()\n                 && weapon.curMode().equals(\"Indirect\");\n+        IHex targetHex = game.getBoard().getHex(target.getPosition());\n \n-        if (!isIndirect\n+        //For indirect fire, remove leg hits only if target is in water partial cover\n+        //Per TW errata for indirect fire\n+        if ((!isIndirect || (isIndirect && targetHex.containsTerrain(Terrains.WATER)))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18829090281d0a77645843771cf648913a2e7763"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a1527a51523f8b3664c7c6505cd0003de2723c2", "author": {"user": {"login": "mkerensky", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/1a1527a51523f8b3664c7c6505cd0003de2723c2", "committedDate": "2020-01-28T19:57:32Z", "message": "Accounts for height above water, solving some edge cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NjY2OTk2", "url": "https://github.com/MegaMek/megamek/pull/1620#pullrequestreview-349666996", "createdAt": "2020-01-28T20:07:40Z", "commit": {"oid": "1a1527a51523f8b3664c7c6505cd0003de2723c2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4622, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}