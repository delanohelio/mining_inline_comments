{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NDg2MzI3", "number": 2287, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNzoxMDowMVrOErRuJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNzoxMDowMVrOErRuJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzODE0NTY3OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/GunEmplacement.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNzoxMDowMVrOHd9Vdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwMjozODoyNFrOHeL7sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE3NTY3MA==", "bodyText": "Is this a bug fix?", "url": "https://github.com/MegaMek/megamek/pull/2287#discussion_r501175670", "createdAt": "2020-10-07T17:10:01Z", "author": {"login": "sixlettervariables"}, "path": "megamek/src/megamek/common/GunEmplacement.java", "diffHunk": "@@ -612,18 +594,18 @@ public void setDeployed(boolean deployed) {\n      */\n     @Override\n     public double getArmorRemainingPercent() {\n-        if(getPosition() == null) {\n+        if (getPosition() == null) {\n             return 1.0;\n         }\n         \n         Building occupiedStructure = getGame().getBoard().getBuildingAt(getPosition());\n         \n         // we'll consider undeployed emplacements to be fully intact\n-        if((occupiedStructure == null) || (initialBuildingCF + initialBuildingArmor == 0)) {\n+        if ((occupiedStructure == null) || (initialBuildingCF + initialBuildingArmor == 0)) {\n             return 1.0;\n         }\n         \n-        return (occupiedStructure.getCurrentCF(getPosition()) + occupiedStructure.getArmor(getPosition())) / \n-                (initialBuildingCF + initialBuildingArmor);\n+        return (1.0 * (occupiedStructure.getCurrentCF(getPosition()) + occupiedStructure.getArmor(getPosition())))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bb7aef0a025e6db161665107298abbd92607f2f"}, "originalPosition": 183}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI4NDY5MA==", "bodyText": "It is, it was trying to return a double from an int/int.", "url": "https://github.com/MegaMek/megamek/pull/2287#discussion_r501284690", "createdAt": "2020-10-07T20:19:10Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/GunEmplacement.java", "diffHunk": "@@ -612,18 +594,18 @@ public void setDeployed(boolean deployed) {\n      */\n     @Override\n     public double getArmorRemainingPercent() {\n-        if(getPosition() == null) {\n+        if (getPosition() == null) {\n             return 1.0;\n         }\n         \n         Building occupiedStructure = getGame().getBoard().getBuildingAt(getPosition());\n         \n         // we'll consider undeployed emplacements to be fully intact\n-        if((occupiedStructure == null) || (initialBuildingCF + initialBuildingArmor == 0)) {\n+        if ((occupiedStructure == null) || (initialBuildingCF + initialBuildingArmor == 0)) {\n             return 1.0;\n         }\n         \n-        return (occupiedStructure.getCurrentCF(getPosition()) + occupiedStructure.getArmor(getPosition())) / \n-                (initialBuildingCF + initialBuildingArmor);\n+        return (1.0 * (occupiedStructure.getCurrentCF(getPosition()) + occupiedStructure.getArmor(getPosition())))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE3NTY3MA=="}, "originalCommit": {"oid": "9bb7aef0a025e6db161665107298abbd92607f2f"}, "originalPosition": 183}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI5NDM5OQ==", "bodyText": "More obvious to cast the denominator to double. I presume this means that gun emplacements never showed the correct amount of armor remaining? (always 0)", "url": "https://github.com/MegaMek/megamek/pull/2287#discussion_r501294399", "createdAt": "2020-10-07T20:37:14Z", "author": {"login": "sixlettervariables"}, "path": "megamek/src/megamek/common/GunEmplacement.java", "diffHunk": "@@ -612,18 +594,18 @@ public void setDeployed(boolean deployed) {\n      */\n     @Override\n     public double getArmorRemainingPercent() {\n-        if(getPosition() == null) {\n+        if (getPosition() == null) {\n             return 1.0;\n         }\n         \n         Building occupiedStructure = getGame().getBoard().getBuildingAt(getPosition());\n         \n         // we'll consider undeployed emplacements to be fully intact\n-        if((occupiedStructure == null) || (initialBuildingCF + initialBuildingArmor == 0)) {\n+        if ((occupiedStructure == null) || (initialBuildingCF + initialBuildingArmor == 0)) {\n             return 1.0;\n         }\n         \n-        return (occupiedStructure.getCurrentCF(getPosition()) + occupiedStructure.getArmor(getPosition())) / \n-                (initialBuildingCF + initialBuildingArmor);\n+        return (1.0 * (occupiedStructure.getCurrentCF(getPosition()) + occupiedStructure.getArmor(getPosition())))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE3NTY3MA=="}, "originalCommit": {"oid": "9bb7aef0a025e6db161665107298abbd92607f2f"}, "originalPosition": 183}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTQxNDgzMw==", "bodyText": "Swapped, and I believe so. This was a catch from my IDE.", "url": "https://github.com/MegaMek/megamek/pull/2287#discussion_r501414833", "createdAt": "2020-10-08T02:38:24Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/GunEmplacement.java", "diffHunk": "@@ -612,18 +594,18 @@ public void setDeployed(boolean deployed) {\n      */\n     @Override\n     public double getArmorRemainingPercent() {\n-        if(getPosition() == null) {\n+        if (getPosition() == null) {\n             return 1.0;\n         }\n         \n         Building occupiedStructure = getGame().getBoard().getBuildingAt(getPosition());\n         \n         // we'll consider undeployed emplacements to be fully intact\n-        if((occupiedStructure == null) || (initialBuildingCF + initialBuildingArmor == 0)) {\n+        if ((occupiedStructure == null) || (initialBuildingCF + initialBuildingArmor == 0)) {\n             return 1.0;\n         }\n         \n-        return (occupiedStructure.getCurrentCF(getPosition()) + occupiedStructure.getArmor(getPosition())) / \n-                (initialBuildingCF + initialBuildingArmor);\n+        return (1.0 * (occupiedStructure.getCurrentCF(getPosition()) + occupiedStructure.getArmor(getPosition())))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE3NTY3MA=="}, "originalCommit": {"oid": "9bb7aef0a025e6db161665107298abbd92607f2f"}, "originalPosition": 183}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2741, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}