{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NTgyMzMx", "number": 2025, "title": "Add null-proofing to avoid #2024", "bodyText": "This will avoid the NRE in the AccessibilityWindow if for whatever reason a player or entity is missing, fixing the exception seen in the logs of #2024. I was unable to recreate the exception or the bug as described, but the call stack is plausible and can be null-proofed.", "createdAt": "2020-06-25T00:10:39Z", "url": "https://github.com/MegaMek/megamek/pull/2025", "merged": true, "mergeCommit": {"oid": "9f87a169a4e57cd8a58012e60667aae0e2634cb1"}, "closed": true, "closedAt": "2020-06-25T01:29:26Z", "author": {"login": "sixlettervariables"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcujO6jAH2gAyNDM5NTgyMzMxOmQ5NDBiZTUyMzExMzUzMGNmZmRjN2U4MmNmYmEyMzA3NGIyYzZiOWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcukE_fAH2gAyNDM5NTgyMzMxOmVhYzgyNjAyMDc0MTgzMjA1ZWYxMGM4ODY4Yzg0N2Q0MDFhYTcyNDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d940be523113530cffdc7e82cfba23074b2c6b9b", "author": {"user": {"login": "sixlettervariables", "name": "Christopher Watford"}}, "url": "https://github.com/MegaMek/megamek/commit/d940be523113530cffdc7e82cfba23074b2c6b9b", "committedDate": "2020-06-25T00:09:34Z", "message": "Add null-proofing to avoid #2024"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MDg3ODI3", "url": "https://github.com/MegaMek/megamek/pull/2025#pullrequestreview-437087827", "createdAt": "2020-06-25T00:12:01Z", "commit": {"oid": "d940be523113530cffdc7e82cfba23074b2c6b9b"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwMDoxMjowMVrOGonNsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwMDoxMzoyNVrOGonPLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIzODcwNg==", "bodyText": "This might be easier to read if it is in brackets?", "url": "https://github.com/MegaMek/megamek/pull/2025#discussion_r445238706", "createdAt": "2020-06-25T00:12:01Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/AccessibilityWindow.java", "diffHunk": "@@ -38,12 +38,18 @@ public AccessibilityWindow(ChatterBox cb, ClientGUI clientgui) {\n         client.getGame().addGameListener(new GameListenerAdapter() {\n             @Override\n             public void gamePlayerConnected(GamePlayerConnectedEvent e) {\n-                systemEvent(\"New player has connected. Their name is \" + e.getPlayer().getName() + \".\");\n+                String name = e != null && e.getPlayer() != null ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d940be523113530cffdc7e82cfba23074b2c6b9b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIzODk3Mw==", "bodyText": "Brackets are missing here", "url": "https://github.com/MegaMek/megamek/pull/2025#discussion_r445238973", "createdAt": "2020-06-25T00:12:57Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/AccessibilityWindow.java", "diffHunk": "@@ -66,20 +75,29 @@ public void gameEntityNewOffboard(GameEntityNewOffboardEvent e) {\n \n             @Override\n             public void gameEntityRemove(GameEntityRemoveEvent e) {\n-                final Entity ent = e.getEntity();\n-                systemEvent(\"Removed \" + ent.getDisplayName() + \" from player \" + ent.getOwner().getName() + \".\");\n+                if (e != null && e.getEntity() != null) {\n+                    final Entity ent = e.getEntity();\n+                    String name = ent.getOwner() != null ? ent.getOwner().getName() : \"UNNAMED\";\n+                    systemEvent(\"Removed \" + ent.getDisplayName() + \" from player \" + name + \".\");\n+                }\n             }\n \n             @Override\n             public void gameEntityChange(GameEntityChangeEvent e) {\n-                final Entity ent = e.getEntity();\n-                systemEvent(e.toString());\n+                if (e != null && e.getEntity() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d940be523113530cffdc7e82cfba23074b2c6b9b"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIzOTA4Ng==", "bodyText": "Missing brackets here", "url": "https://github.com/MegaMek/megamek/pull/2025#discussion_r445239086", "createdAt": "2020-06-25T00:13:25Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/AccessibilityWindow.java", "diffHunk": "@@ -66,20 +75,29 @@ public void gameEntityNewOffboard(GameEntityNewOffboardEvent e) {\n \n             @Override\n             public void gameEntityRemove(GameEntityRemoveEvent e) {\n-                final Entity ent = e.getEntity();\n-                systemEvent(\"Removed \" + ent.getDisplayName() + \" from player \" + ent.getOwner().getName() + \".\");\n+                if (e != null && e.getEntity() != null) {\n+                    final Entity ent = e.getEntity();\n+                    String name = ent.getOwner() != null ? ent.getOwner().getName() : \"UNNAMED\";\n+                    systemEvent(\"Removed \" + ent.getDisplayName() + \" from player \" + name + \".\");\n+                }\n             }\n \n             @Override\n             public void gameEntityChange(GameEntityChangeEvent e) {\n-                final Entity ent = e.getEntity();\n-                systemEvent(e.toString());\n+                if (e != null && e.getEntity() != null) {\n+                    systemEvent(e.getEntity().toString());\n+                }\n             }\n \n             @Override\n             public void gameNewAction(GameNewActionEvent e) {\n-                final Entity ent = client.getEntity(e.getAction().getEntityId());\n-                systemEvent( ent.getDisplayName() + \" from player \" + ent.getOwner().getName() + \" is doing \" + e.getAction().toString() + \".\");\n+                if (e != null && e.getAction() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d940be523113530cffdc7e82cfba23074b2c6b9b"}, "originalPosition": 63}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eac82602074183205ef10c8868c847d401aa7242", "author": {"user": {"login": "sixlettervariables", "name": "Christopher Watford"}}, "url": "https://github.com/MegaMek/megamek/commit/eac82602074183205ef10c8868c847d401aa7242", "committedDate": "2020-06-25T01:08:38Z", "message": "Address PR comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4886, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}