{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwOTEyMjA5", "number": 1966, "title": "Fix hex shift when changing tileset theme", "bodyText": "When responding to a hex change event, the boardview repaints surrounding hexes as well, including making sure the theme is current. If not, it updates the hex but uses the coordinates of the original hex from the event rather than the coordinates of the surrounding hex.\nFixes #1946\nFixes #1645 (presumed)", "createdAt": "2020-05-20T17:35:12Z", "url": "https://github.com/MegaMek/megamek/pull/1966", "merged": true, "mergeCommit": {"oid": "8d50818b1a951013c86b63f868f4c3c0c5912c00"}, "closed": true, "closedAt": "2020-05-20T19:32:40Z", "author": {"login": "neoancient"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjMf5eAH2gAyNDIwOTEyMjA5OmE4YjViNWNjMjYzNDNjMTdlYzY1Y2VhY2YxNzQ4ZmE2ZjUxODVjOGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjNs-FgH2gAyNDIwOTEyMjA5OjU5MTdjMDU1NjViN2U4M2RkZTJlZDNkY2UyMWI4YWI2MDgxYmU5MDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a8b5b5cc26343c17ec65ceacf1748fa6f5185c8f", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/a8b5b5cc26343c17ec65ceacf1748fa6f5185c8f", "committedDate": "2020-05-20T17:27:08Z", "message": "Fix hex shift when changing tileset theme."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTcwMzE5", "url": "https://github.com/MegaMek/megamek/pull/1966#pullrequestreview-415570319", "createdAt": "2020-05-20T17:41:55Z", "commit": {"oid": "a8b5b5cc26343c17ec65ceacf1748fa6f5185c8f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzo0MTo1NVrOGYW2MQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzo0MTo1NVrOGYW2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE5MzMyOQ==", "bodyText": "Why make the change here instead of just fixing the allBoardHexes() erroneous null return and replacing it with Collections.emptyList() (the return value of ArrayList can be swapped to List without issue)", "url": "https://github.com/MegaMek/megamek/pull/1966#discussion_r428193329", "createdAt": "2020-05-20T17:41:55Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "diffHunk": "@@ -6661,16 +6663,20 @@ public void changeTheme() {\n \n         if (selectedTheme == null) {\n             return;\n-\n-        } else if (selectedTheme.equals(\"(Original Theme)\")) {\n-            for (Coords c: allBoardHexes()) {\n+        }\n+        final List<Coords> allCoords = allBoardHexes();\n+        if (allCoords == null) {\n+            return;\n+        }\n+        if (selectedTheme.equals(\"(Original Theme)\")) {\n+            for (Coords c: allCoords) {\n                 IHex hex = board.getHex(c);\n                 hex.resetTheme();\n                 board.setHex(c, hex);\n             }\n \n         } else {\n-            for (Coords c: allBoardHexes()) {\n+            for (Coords c: allCoords) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8b5b5cc26343c17ec65ceacf1748fa6f5185c8f"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40baf3a3370311bbaadb704edfd4f4d556a127ee", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/40baf3a3370311bbaadb704edfd4f4d556a127ee", "committedDate": "2020-05-20T18:33:29Z", "message": "Improve null protection."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9a58c2ba86451c2a9c3cd5f46472ae9025664f4", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/e9a58c2ba86451c2a9c3cd5f46472ae9025664f4", "committedDate": "2020-05-20T18:39:33Z", "message": "Cleanup in BoardView1::allBoardHexes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NjE5OTk5", "url": "https://github.com/MegaMek/megamek/pull/1966#pullrequestreview-415619999", "createdAt": "2020-05-20T18:45:28Z", "commit": {"oid": "e9a58c2ba86451c2a9c3cd5f46472ae9025664f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NjIwMzM3", "url": "https://github.com/MegaMek/megamek/pull/1966#pullrequestreview-415620337", "createdAt": "2020-05-20T18:45:55Z", "commit": {"oid": "e9a58c2ba86451c2a9c3cd5f46472ae9025664f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODo0NTo1NVrOGYZUZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODo0NTo1NVrOGYZUZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIzMzgzMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 *  @return a list of {@ink Coords} of all hexes on the board.\n          \n          \n            \n                 *  @return a list of {@link Coords} of all hexes on the board.", "url": "https://github.com/MegaMek/megamek/pull/1966#discussion_r428233830", "createdAt": "2020-05-20T18:45:55Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "diffHunk": "@@ -1459,25 +1445,27 @@ private void renderDonut(Graphics2D g, Coords coords, int radius) {\n             drawHexBorder(g, p, Color.PINK, 0, 6);\n         }\n     }\n+\n     /**\n-     *  Returns a list of Coords of all hexes on the board.\n-     *  Returns ONLY hexes where board.getHex != null.\n+     *  @return a list of {@ink Coords} of all hexes on the board.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9a58c2ba86451c2a9c3cd5f46472ae9025664f4"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NjIwNjcz", "url": "https://github.com/MegaMek/megamek/pull/1966#pullrequestreview-415620673", "createdAt": "2020-05-20T18:46:23Z", "commit": {"oid": "e9a58c2ba86451c2a9c3cd5f46472ae9025664f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5917c05565b7e83dde2ed3dce21b8ab6081be906", "author": {"user": {"login": "neoancient", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/5917c05565b7e83dde2ed3dce21b8ab6081be906", "committedDate": "2020-05-20T18:51:19Z", "message": "Update megamek/src/megamek/client/ui/swing/boardview/BoardView1.java\n\nCo-authored-by: Justin Bowen <39067288+Windchild292@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4837, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}