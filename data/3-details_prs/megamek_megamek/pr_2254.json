{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNjUwOTcx", "number": 2254, "title": "Fix wreck decal path Linux UI rendering problem", "bodyText": "As I mentioned in Slack, I found 0.47.10 up to the latest dev unplayable as the UI would stop rendering any updates after awhile. Behavior started similar to #2191, but eventually the UI would not refresh at all.\nNoticed the error below repeated in the logs. Note the mix of forward and back slashes in the file path on the first line, which causes a failure on Linux (possibly Mac OS as well),\nTrying to load image for a non-existent file! Path: data/images/units/wrecks\\bottomdecals/fuelleak_decal_assaultplus.png\n18:56:10,456 ERROR [megamek.client.ui.swing.tileset.TilesetManager] {AWT-EventQueue-0} \nLoadSpecificImage() : Error opening image: fuelleak_decal_assaultplus.png\n\nException in thread \"AWT-EventQueue-0\" java.lang.NullPointerException\n        at megamek.client.ui.swing.tileset.TilesetManager.bottomLayerFuelLeakMarkerFor(TilesetManager.java:278)\n        at megamek.client.ui.swing.boardview.IsometricSprite.drawImmobileElements(IsometricSprite.java:172)\n        at megamek.client.ui.swing.boardview.IsometricSprite.drawOnto(IsometricSprite.java:159)\n        at megamek.client.ui.swing.boardview.BoardView1.drawIsometricSpritesForHex(BoardView1.java:1921)\n        at megamek.client.ui.swing.boardview.BoardView1.drawHexes(BoardView1.java:2517)\n        at megamek.client.ui.swing.boardview.BoardView1.drawHexes(BoardView1.java:2461)\n        at megamek.client.ui.swing.boardview.BoardView1.paintComponent(BoardView1.java:1292)\n        at java.desktop/javax.swing.JComponent.paint(JComponent.java:1074)\n        at java.desktop/javax.swing.JComponent.paintChildren(JComponent.java:907)\n        at java.desktop/javax.swing.JComponent.paint(JComponent.java:1083)\n        at java.desktop/javax.swing.JViewport.paint(JViewport.java:737)\n        at java.desktop/javax.swing.JComponent.paintChildren(JComponent.java:907)\n        at java.desktop/javax.swing.JComponent.paint(JComponent.java:1083)\n        at java.desktop/javax.swing.JComponent.paintToOffscreen(JComponent.java:5255)\n        at java.desktop/javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:246)\n        at java.desktop/javax.swing.RepaintManager.paint(RepaintManager.java:1323)\n        at java.desktop/javax.swing.JComponent._paintImmediately(JComponent.java:5203)\n        at java.desktop/javax.swing.JComponent.paintImmediately(JComponent.java:5013)\n        at java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:865)\n        at java.desktop/javax.swing.RepaintManager$4.run(RepaintManager.java:848)\n        at java.base/java.security.AccessController.doPrivileged(Native Method)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\n        at java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:848)\n        at java.desktop/javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:823)\n        at java.desktop/javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:772)\n        at java.desktop/javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1890)\n        at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:313)\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:770)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:715)\n        at java.base/java.security.AccessController.doPrivileged(Native Method)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:740)\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)", "createdAt": "2020-09-27T01:12:45Z", "url": "https://github.com/MegaMek/megamek/pull/2254", "merged": true, "mergeCommit": {"oid": "a106844bd67338289b8f847e13ad016a50bfb31a"}, "closed": true, "closedAt": "2020-09-27T02:01:15Z", "author": {"login": "RexPearce"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdM0UWWgH2gAyNDkzNjUwOTcxOjM5NTE2NWE2YWM1MTM3MjFjOTE5NzU5N2VmMzc1Y2U1YTg4ODU2ZGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdM08_6gH2gAyNDkzNjUwOTcxOmMyZDBhMGJkMTM1MTg0YTc3N2ViODkxY2ZkYzY3NWJkNjg0Yjk3ZmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "395165a6ac513721c9197597ef375ce5a88856db", "author": {"user": {"login": "RexPearce", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/395165a6ac513721c9197597ef375ce5a88856db", "committedDate": "2020-09-27T01:01:37Z", "message": "use OS-agnostic file paths"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDQxMjM3", "url": "https://github.com/MegaMek/megamek/pull/2254#pullrequestreview-497041237", "createdAt": "2020-09-27T01:19:19Z", "commit": {"oid": "395165a6ac513721c9197597ef375ce5a88856db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDQxMzA0", "url": "https://github.com/MegaMek/megamek/pull/2254#pullrequestreview-497041304", "createdAt": "2020-09-27T01:20:56Z", "commit": {"oid": "395165a6ac513721c9197597ef375ce5a88856db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwMToyMDo1NlrOHYjuoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QwMToyMDo1NlrOHYjuoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUxMzI0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        // Image baseImage = TilesetManager.LoadSpecificImage(new File(Configuration.unitImagesDir(), path), filename);\n          \n          \n            \n                        Image baseImage = TilesetManager.LoadSpecificImage(wreckDecalDir, filename);\n          \n          \n            \n                        Image baseImage = TilesetManager.LoadSpecificImage(wreckDecalDir, filename);", "url": "https://github.com/MegaMek/megamek/pull/2254#discussion_r495513249", "createdAt": "2020-09-27T01:20:56Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/tileset/TilesetManager.java", "diffHunk": "@@ -263,13 +265,15 @@ public Image bottomLayerFuelLeakMarkerFor(Entity entity) {\n         \n         String suffix = EntityWreckHelper.getWeightSuffix(entity);\n         String filename = String.format(\"fuelleak_decal_%s.png\", suffix);\n-        String path = String.format(\"%s\\\\%s\", DIR_NAME_WRECKS, DIR_NAME_BOTTOM_DECALS);\n+        File wreckDir = new File(Configuration.unitImagesDir(), DIR_NAME_WRECKS);\n+        File wreckDecalDir = new File(wreckDir, DIR_NAME_BOTTOM_DECALS);\n         \n         int rotationKey = entity.getId() % NUM_DECAL_ROTATIONS;\n         String imageKey = String.format(\"%s%s\", filename, rotationKey);\n         \n         if(!wreckageDecals.containsKey(imageKey)) {\n-            Image baseImage = TilesetManager.LoadSpecificImage(new File(Configuration.unitImagesDir(), path), filename);\n+            // Image baseImage = TilesetManager.LoadSpecificImage(new File(Configuration.unitImagesDir(), path), filename);\n+            Image baseImage = TilesetManager.LoadSpecificImage(wreckDecalDir, filename);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "395165a6ac513721c9197597ef375ce5a88856db"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2d0a0bd135184a777eb891cfdc675bd684b97fa", "author": {"user": {"login": "RexPearce", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/c2d0a0bd135184a777eb891cfdc675bd684b97fa", "committedDate": "2020-09-27T01:46:01Z", "message": "remove old comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4781, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}