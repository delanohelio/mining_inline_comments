{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1NTAyNDUw", "number": 1610, "title": "VSTOL Equipment Now Saves Properly and is shown on Unit Summary and TRO", "bodyText": "I've also done some refactoring as I've gone through the files, and added .idea to the .gitignore for those of us who use the Idea IDE", "createdAt": "2020-01-21T20:42:47Z", "url": "https://github.com/MegaMek/megamek/pull/1610", "merged": true, "mergeCommit": {"oid": "f895c343842ca323f746f7fc4e95262c730cbe0e"}, "closed": true, "closedAt": "2020-01-24T19:28:14Z", "author": {"login": "Windchild292"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8jrjXAH2gAyMzY1NTAyNDUwOmQzNGM2ZDVhMzMyYWU1ZGVlZmY4MGQ1MTVlNWRiNmViMDliY2Q1MzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9QhjDAFqTM0NzU5MTgxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d34c6d5a332ae5deeff80d515e5db6eb09bcd536", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/megamek/commit/d34c6d5a332ae5deeff80d515e5db6eb09bcd536", "committedDate": "2020-01-21T16:24:38Z", "message": "Adding .idea to .gitignore for Idea IDE users"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "973bba738e53279cbc28dd58900f2fafa2175652", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/megamek/commit/973bba738e53279cbc28dd58900f2fafa2175652", "committedDate": "2020-01-21T16:25:01Z", "message": "Initial refactoring in BLKFile.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89891e29fde518f48d013f8a45c445f3c6e38455", "author": {"user": null}, "url": "https://github.com/MegaMek/megamek/commit/89891e29fde518f48d013f8a45c445f3c6e38455", "committedDate": "2020-01-21T16:26:55Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_VSTOL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "495b583679fa3e2816e933c46e1f37c7d5eeb7d1", "author": {"user": null}, "url": "https://github.com/MegaMek/megamek/commit/495b583679fa3e2816e933c46e1f37c7d5eeb7d1", "committedDate": "2020-01-21T16:41:38Z", "message": "Finished refactoring in BLKFile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "326208abc7909578b6809eebb0cc900a3c66f958", "author": {"user": null}, "url": "https://github.com/MegaMek/megamek/commit/326208abc7909578b6809eebb0cc900a3c66f958", "committedDate": "2020-01-21T18:02:20Z", "message": "Refactoring, and initial changes for implementing VSTOL note on aerospace TRO and unit summary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba8a49072cd3899c3b5df9ec29c16059a91acfda", "author": {"user": null}, "url": "https://github.com/MegaMek/megamek/commit/ba8a49072cd3899c3b5df9ec29c16059a91acfda", "committedDate": "2020-01-21T18:36:15Z", "message": "Further refactoring while figuring out how to add VSTOL notes to TRO and Unit Summary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3baeedd3eb0c1e27c2b4e866cd1d7d27404657a", "author": {"user": null}, "url": "https://github.com/MegaMek/megamek/commit/a3baeedd3eb0c1e27c2b4e866cd1d7d27404657a", "committedDate": "2020-01-21T18:40:22Z", "message": "Reverting change to testing mechfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdc8c747a15da2954913c78e6c9524dfd5a77c18", "author": {"user": null}, "url": "https://github.com/MegaMek/megamek/commit/fdc8c747a15da2954913c78e6c9524dfd5a77c18", "committedDate": "2020-01-21T19:00:18Z", "message": "Adding VSTOL to MechSummary for Conventional fighters with VSTOL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9593b58835b155eef9be06a95e61301e64d812ca", "author": {"user": null}, "url": "https://github.com/MegaMek/megamek/commit/9593b58835b155eef9be06a95e61301e64d812ca", "committedDate": "2020-01-21T19:52:03Z", "message": "Reverting erraneous fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9ca1a76f5eb62a02789b9fb760a61fc79864700", "author": {"user": null}, "url": "https://github.com/MegaMek/megamek/commit/c9ca1a76f5eb62a02789b9fb760a61fc79864700", "committedDate": "2020-01-21T19:54:13Z", "message": "Adding space to method calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002", "author": {"user": null}, "url": "https://github.com/MegaMek/megamek/commit/9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002", "committedDate": "2020-01-21T20:30:15Z", "message": "Added VSTOL Equipment to TRO views"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MjEzNTM2", "url": "https://github.com/MegaMek/megamek/pull/1610#pullrequestreview-346213536", "createdAt": "2020-01-21T21:45:23Z", "commit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMTo0NToyNFrOFgJ0bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQyMTo0NToyNFrOFgJ0bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTI1OTYyOA==", "bodyText": "Why are you changing the order? The habit of putting the constant first is deliberate.", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369259628", "createdAt": "2020-01-21T21:45:24Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/client/ui/swing/MechViewPanel.java", "diffHunk": "@@ -137,7 +137,7 @@ public void setMech(Entity entity, TROView troView){\n         txtMek.setCaretPosition(0);\n         Image image = FluffImageHelper.getFluffImage(entity);\n         icon = null;\n-        if(null != image) {\n+        if(image != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2ODcxMDgx", "url": "https://github.com/MegaMek/megamek/pull/1610#pullrequestreview-346871081", "createdAt": "2020-01-22T20:12:22Z", "commit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMDoxMjoyMlrOFgpgig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMDoyODo1N1rOFgp9OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc3ODgyNg==", "bodyText": "This adds blank lines between the table header and the first row.", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369778826", "createdAt": "2020-01-22T20:12:22Z", "author": {"login": "neoancient"}, "path": "megamek/resources/megamek/common/templates/tro/aero.ftl", "diffHunk": "@@ -40,11 +43,13 @@ None\n </#if>\n \n Weapons\n-${formatEquipmentRow(\"and Ammo\", \"Location\", \"Tonnage\", \"Heat\", \"SRV\", \"MRV\", \"LRV\", \"ERV\")}\t\n+${formatEquipmentRow(\"and Ammo\", \"Location\", \"Tonnage\", \"Heat\", \"SRV\", \"MRV\", \"LRV\", \"ERV\")}\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc3OTg2NA==", "bodyText": "This adds a line for VSTOL equipment on all aerospace units, but it's only relevant for conventional fighters.", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369779864", "createdAt": "2020-01-22T20:14:44Z", "author": {"login": "neoancient"}, "path": "megamek/resources/megamek/common/templates/tro/aero.ftlh", "diffHunk": "@@ -71,6 +71,7 @@\n \t<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Safe Thrust:</td><td align=\"center\">${safeThrust}</td><td></td></tr>\n \t<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max Thrust:</td><td align=\"center\">${maxThrust}</td><td></td></tr>\n \t<tr><td>Structural Integrity:</td><td align=\"center\">${si}</td><td></td></tr>\n+\t<tr><td>VSTOL Equipment:</td><td align=\"center\"></td><td align=\"center\">${vstolMass}</td></tr>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4MDMxNw==", "bodyText": "isVSTOL is never defined in the template data model, causing the text version to fail. This also needs to exclude fixed wing support, which gain VSTOL capabilities through a chassis modification, which is listed elsewhere. That's probably best done by changing the definition of isConventional to exclude support vehicles.", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369780317", "createdAt": "2020-01-22T20:15:43Z", "author": {"login": "neoancient"}, "path": "megamek/resources/megamek/common/templates/tro/aero.ftl", "diffHunk": "@@ -14,6 +14,9 @@ ${formatBasicDataRow(\"Engine\", engineName, engineMass)}\n \tSafe Thrust: ${safeThrust}\n \tMax Thrust: ${maxThrust}\n ${formatBasicDataRow(\"Structural Integrity:\", si, \"\")}\n+<#if isVSTOL && isConventional>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4MjUwMg==", "bodyText": "As indicated by the comment above, if an exception is thrown while loading the unit, mechView will still not be initialized. The exception is already caught and logged, but removing this null check will cause another exception to be thrown which may cause the ui to stop responding.", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369782502", "createdAt": "2020-01-22T20:20:28Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/client/ui/swing/UnitSelectorDialog.java", "diffHunk": "@@ -706,17 +703,16 @@ void refreshUnitView() {\n             // error unit didn't load right. this is bad news.\n             populateTextFields = false;\n         }\n-        if (populateTextFields && (mechView != null)) {\n+        if (populateTextFields) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NDE1NQ==", "bodyText": "This duplicates code already present in TestAero. Where possible, calculations related to construction rules, when not required to load the unit or required during gameplay, should be placed the megamek.common.verifier package rather than the Entity. This will also report an incorrect value for FixedWingSupport, which adds VSTOL capability through a chassis modification.", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369784155", "createdAt": "2020-01-22T20:24:02Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/common/Aero.java", "diffHunk": "@@ -3375,6 +3373,14 @@ public void setVSTOL(boolean b) {\n         vstol = b;\n     }\n \n+    public double getVSTOLGearTonnage(){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NTM4Mw==", "bodyText": "Strings that are displayed to the user should go in the i18n resource file.", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369785383", "createdAt": "2020-01-22T20:27:05Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/common/MechView.java", "diffHunk": "@@ -296,7 +295,14 @@ public MechView(Entity entity, boolean showDetail, boolean useAlternateCost, boo\n                         .append(warningEnd());\n                 }\n             }\n-            sBasic.add(new LabeledElement(Messages.getString(\"MechView.Movement\"), moveString.toString())); //$NON-NLS-1$\n+\n+            // TODO : Add STOL message as part of the movement line\n+            if (isConvFighter && ((Aero) entity).isVSTOL()) {\n+                sBasic.add(new LabeledElement(Messages.getString(\"MechView.Movement\"),\n+                        moveString.toString().concat(\" (VSTOL)\"))); //$NON-NLS-1$", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NjE2OA==", "bodyText": "This is better, but I would suggest String#isEmpty", "url": "https://github.com/MegaMek/megamek/pull/1610#discussion_r369786168", "createdAt": "2020-01-22T20:28:57Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/common/MechView.java", "diffHunk": "@@ -453,19 +459,19 @@ public MechView(Entity entity, boolean showDetail, boolean useAlternateCost, boo\n             sFluff.add(list);\n         }\n         \n-        if (entity.getFluff().getOverview() != \"\") {\n+        if (!entity.getFluff().getOverview().equals(\"\")) {\n             sFluff.add(new LabeledElement(\"Overview\", entity.getFluff().getOverview()));\n         }\n         \n-        if (entity.getFluff().getCapabilities() != \"\") {\n+        if (!entity.getFluff().getCapabilities().equals(\"\")) {\n             sFluff.add(new LabeledElement(\"Capabilities\", entity.getFluff().getCapabilities()));\n         }\n         \n-        if (entity.getFluff().getDeployment() != \"\") {\n+        if (!entity.getFluff().getDeployment().equals(\"\")) {\n             sFluff.add(new LabeledElement(\"Deployment\", entity.getFluff().getDeployment()));\n         }\n         \n-        if (entity.getFluff().getHistory() != \"\") {\n+        if (!entity.getFluff().getHistory().equals(\"\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f46602eb9d1cbc2c9b8532fdcd54d600e7cd002"}, "originalPosition": 99}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba761bdd23d6d65ca57828fbeaf4e69543da3c16", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/megamek/commit/ba761bdd23d6d65ca57828fbeaf4e69543da3c16", "committedDate": "2020-01-22T22:05:56Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_VSTOL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93dec699c3ebb1138b2a6f8111b09f7342a5666e", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/megamek/commit/93dec699c3ebb1138b2a6f8111b09f7342a5666e", "committedDate": "2020-01-23T17:12:07Z", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_VSTOL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f895c343842ca323f746f7fc4e95262c730cbe0e", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/megamek/commit/f895c343842ca323f746f7fc4e95262c730cbe0e", "committedDate": "2020-01-23T17:20:32Z", "message": "VSTOL Fixing Issues Found During Review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NTkxODE2", "url": "https://github.com/MegaMek/megamek/pull/1610#pullrequestreview-347591816", "createdAt": "2020-01-23T20:39:26Z", "commit": {"oid": "f895c343842ca323f746f7fc4e95262c730cbe0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4616, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}