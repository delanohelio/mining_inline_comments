{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MTQyNjU2", "number": 1859, "title": "Various QoL MapEditor changes and issue 1856", "bodyText": "Several MapEd file dialogs (save, load etc.) now, finally, remember their size.\nThe validation dialogs now appear centered and react to ESC or Enter.\nThe board validation upon loading a board now does show the error report because it can be different from what a later validation shows, especially when buildings have errors.\nThe minimap (in the map editor) now shows invalid hexes as bright red.\nThe MapEd frame title now shows if the board has been changed (with the usual \"*\"). A fresh random board does not count as changed.\nIf the board is changed, the MapEd will now not just close when the window \"X\" is pressed but ask if the user wants to save the board first.\nThe RandomMap dialog at the startup of the MapEd can now be disabled in the dialog.\nBridges and other orthos now show up in the work hex - Resolves #1856", "createdAt": "2020-04-17T13:47:31Z", "url": "https://github.com/MegaMek/megamek/pull/1859", "merged": true, "mergeCommit": {"oid": "503807da9c25099aa2196b7586bb2a6804295684"}, "closed": true, "closedAt": "2020-04-25T11:48:29Z", "author": {"login": "SJuliez"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX7xjiAH2gAyNDA1MTQyNjU2OjUzOTczMmM4MTE5N2E2NmEwYWEwMTBjMDYwOGJkZTJlNjYzYzdjOWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZNBlSgH2gAyNDA1MTQyNjU2OjZlZTlkYjYwYjMwMGI3YzZkMTlmMWFiNDg1MzRjNmQxMmZjYWJkOGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "539732c81197a66a0aa010c0608bde2e663c7c9d", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/539732c81197a66a0aa010c0608bde2e663c7c9d", "committedDate": "2020-04-15T17:44:52Z", "message": "MapEditor FileDialog remembers size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da3e9f8349762508d6be3c4613b6b817b0eee73b", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/da3e9f8349762508d6be3c4613b6b817b0eee73b", "committedDate": "2020-04-15T18:07:16Z", "message": "BoardEditor Positioning of various dialogs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "572e90ed0ff2b470749c2184543ebe4290394f76", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/572e90ed0ff2b470749c2184543ebe4290394f76", "committedDate": "2020-04-16T15:52:00Z", "message": "Show invalid hexes on the minimap"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "179916a4d3239e51ca9b0faf3a793c9f33dd5a7a", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/179916a4d3239e51ca9b0faf3a793c9f33dd5a7a", "committedDate": "2020-04-16T19:55:17Z", "message": "Frame Title marks changes, safety prompt when exiting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "066b935e975dd935f9f8624d91aea9b4d38db239", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/066b935e975dd935f9f8624d91aea9b4d38db239", "committedDate": "2020-04-17T12:46:33Z", "message": "Option to disable RandomMap dialog at MapEd start"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2daf54558914640724faff6595b8c80f3fbbaff1", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/2daf54558914640724faff6595b8c80f3fbbaff1", "committedDate": "2020-04-17T13:22:51Z", "message": "Issue 1856: Bridges (orthos) now appear in the MapEd work hex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "047a45bbc43faa769b0f30312961f16c9dfd2fe8", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/047a45bbc43faa769b0f30312961f16c9dfd2fe8", "committedDate": "2020-04-17T13:29:49Z", "message": "Correction to work hex size and JScrollpane setting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83ff49b4f3e87e14e9d51b555543f42b4ffc34b3", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/83ff49b4f3e87e14e9d51b555543f42b4ffc34b3", "committedDate": "2020-04-17T13:32:57Z", "message": "Editor JScrollpane scroll speed adjustment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NzIwODIy", "url": "https://github.com/MegaMek/megamek/pull/1859#pullrequestreview-395720822", "createdAt": "2020-04-17T19:33:17Z", "commit": {"oid": "83ff49b4f3e87e14e9d51b555543f42b4ffc34b3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxOTozMzoxN1rOGHamfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxOTozMzoxN1rOGHamfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQyOTA1NQ==", "bodyText": "I think this is tab versus space spacing, which would be good to fix.", "url": "https://github.com/MegaMek/megamek/pull/1859#discussion_r410429055", "createdAt": "2020-04-17T19:33:17Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "diffHunk": "@@ -1345,16 +1376,19 @@ private void updateWhenSelected() {\n             addSetTerrain();\n     }\n \n-    public void boardNew() {\n-    \tRandomMapDialog rmd = new RandomMapDialog(frame, this, null, mapSettings);\n-    \tboolean userCancel = rmd.activateDialog(bv.getTilesetManager().getThemes());\n-    \tif (!userCancel) {\n-    \t\tboard = BoardUtilities.generateRandom(mapSettings);\n-    \t\tgame.setBoard(board);\n-    \t\tcurfile = null;\n-    \t\tbutSourceFile.setEnabled(false);\n-    \t\tframe.setTitle(Messages.getString(\"BoardEditor.title\")); //$NON-NLS-1$\n-    \t\tmenuBar.setBoard(true);\n+    public void boardNew(boolean showDialog) {\n+        boolean userCancel = false;\n+        if (showDialog) {\n+            RandomMapDialog rmd = new RandomMapDialog(frame, this, null, mapSettings);\n+            userCancel = rmd.activateDialog(bv.getTilesetManager().getThemes());\n+        }\n+        if (!userCancel) {\n+            board = BoardUtilities.generateRandom(mapSettings);\n+            game.setBoard(board);\n+            curfile = null;\n+            butSourceFile.setEnabled(false);\n+            frame.setTitle(Messages.getString(\"BoardEditor.title\")); //$NON-NLS-1$\n+            menuBar.setBoard(true);\n     \t\tbvc.doLayout();\n     \t\tresetUndo();\n     \t\tchoTheme.setSelectedItem(mapSettings.getTheme());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83ff49b4f3e87e14e9d51b555543f42b4ffc34b3"}, "originalPosition": 153}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NzIyNjA1", "url": "https://github.com/MegaMek/megamek/pull/1859#pullrequestreview-395722605", "createdAt": "2020-04-17T19:36:25Z", "commit": {"oid": "83ff49b4f3e87e14e9d51b555543f42b4ffc34b3"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxOTozNjoyNVrOGHar8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxOTo0NDowN1rOGHa5-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQzMDQ1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                JOptionPane.showMessageDialog(frame, \"Could not open the file \"+curfile+\". \"+e.getMessage());\n          \n          \n            \n                                JOptionPane.showMessageDialog(frame, \"Could not open the file \" + curfile + \". \" + e.getMessage());", "url": "https://github.com/MegaMek/megamek/pull/1859#discussion_r410430451", "createdAt": "2020-04-17T19:36:25Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "diffHunk": "@@ -1759,21 +1807,17 @@ public void actionPerformed(ActionEvent ae) {\n                 try {\n                     Desktop.getDesktop().open(curfile);\n                 } catch (IOException e) {\n-                    JOptionPane.showMessageDialog(this, \"Could not open the file \"+curfile+\". \"+e.getMessage());\n+                    ignoreHotKeys = true;\n+                    JOptionPane.showMessageDialog(frame, \"Could not open the file \"+curfile+\". \"+e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83ff49b4f3e87e14e9d51b555543f42b4ffc34b3"}, "originalPosition": 317}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQzMjY1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String title = Messages.getString(\"BoardEditor.title\"); //$NON-NLS-1$\n          \n          \n            \n                    if (curfile != null) {\n          \n          \n            \n                        title = Messages.getString(\"BoardEditor.title\") + curfile; //$NON-NLS-1$\n          \n          \n            \n                    }\n          \n          \n            \n                    String title = Messages.getString(\"BoardEditor.title\"); //$NON-NLS-1$\n          \n          \n            \n                    if (curfile != null) {\n          \n          \n            \n                        title += curfile;\n          \n          \n            \n                    }", "url": "https://github.com/MegaMek/megamek/pull/1859#discussion_r410432658", "createdAt": "2020-04-17T19:41:06Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "diffHunk": "@@ -2069,6 +2124,31 @@ public boolean shouldIgnoreHotKeys() {\n                 || texTerrainLevel.hasFocus() || texTerrExits.hasFocus();\n     }\n     \n+    private void setDialogSize(JFileChooser dialog) {\n+        int width = guip.getBoardEditLoadWidth();\n+        int height = guip.getBoardEditLoadHeight();\n+        dialog.setPreferredSize(new Dimension(width, height));   \n+    }\n+    \n+    private void saveDialogSize(JComponent dialog) {\n+        guip.setBoardEditLoadHeight(dialog.getHeight());\n+        guip.setBoardEditLoadWidth(dialog.getWidth());\n+    }\n+    \n+    /** \n+     *  Sets the Board Editor frame title, adding the current file name if any\n+     *  and a \"*\" if the board has been changed.\n+     */\n+    private void setFrameTitle() {\n+        String title = Messages.getString(\"BoardEditor.title\"); //$NON-NLS-1$\n+        if (curfile != null) {\n+            title = Messages.getString(\"BoardEditor.title\") + curfile; //$NON-NLS-1$\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83ff49b4f3e87e14e9d51b555543f42b4ffc34b3"}, "originalPosition": 440}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQzMzA3NA==", "bodyText": "Is red really the best choice, given that some people can't see it?", "url": "https://github.com/MegaMek/megamek/pull/1859#discussion_r410433074", "createdAt": "2020-04-17T19:42:06Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/MiniMap.java", "diffHunk": "@@ -728,6 +728,13 @@ protected synchronized void drawMapOrig() {\n                         paintCoord(gg, j, k, true);\n                     }\n                     addRoadElements(h, j, k);\n+                    // Color invalid hexes red when in the Map Editor\n+                    if ((m_game != null) && \n+                            (m_game.getPhase() == IGame.Phase.PHASE_UNKNOWN)\n+                            && !h.isValid(null)) {\n+                        gg.setColor(Color.RED);\n+                        paintCoord(gg, j, k, true);\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83ff49b4f3e87e14e9d51b555543f42b4ffc34b3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQzNDA0MA==", "bodyText": "Suggested change", "url": "https://github.com/MegaMek/megamek/pull/1859#discussion_r410434040", "createdAt": "2020-04-17T19:44:07Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/RandomMapDialog.java", "diffHunk": "@@ -271,8 +274,22 @@ private JPanel setupTopPanel() {\n     }\n \n     private JPanel setupControlsPanel() {\n+        JPanel outerpanel = new JPanel(new BorderLayout());\n+        \n+        // The left-side panel contains only the Show on startup option\n+        JPanel leftPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 2, 2));\n+       \n+        // Add the option only when in the Map Editor\n+        if (CLIENT == null) {\n+            showAtStartButton.addActionListener(this);\n+            showAtStartButton.setMnemonic(showAtStartButton.getText().charAt(0));\n+            showAtStartButton.setSelected(guip.getBoardEdRndStart());\n+            leftPanel.add(showAtStartButton);\n+        }\n+        \n+        // The main panel with the Okay, Cancel etc. buttons\n         JPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER, 2, 2));\n-\n+        ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83ff49b4f3e87e14e9d51b555543f42b4ffc34b3"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fac64340da2296ec12997298c3682c27c08f8fc", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/8fac64340da2296ec12997298c3682c27c08f8fc", "committedDate": "2020-04-18T06:28:13Z", "message": "Corrections: remove tabs, Messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e7f66fbf5ac8d0930b8d04862b6885dda65ed92", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/6e7f66fbf5ac8d0930b8d04862b6885dda65ed92", "committedDate": "2020-04-18T13:43:24Z", "message": "Board saved status tracking correction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTI5NDc5", "url": "https://github.com/MegaMek/megamek/pull/1859#pullrequestreview-395929479", "createdAt": "2020-04-18T16:37:58Z", "commit": {"oid": "6e7f66fbf5ac8d0930b8d04862b6885dda65ed92"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxNjozNzo1OFrOGHsXSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQxNjo0MTo1M1rOGHsZMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcyMDA3NQ==", "bodyText": "I'm not sure about this name, as it took me a second to realise what it meant.", "url": "https://github.com/MegaMek/megamek/pull/1859#discussion_r410720075", "createdAt": "2020-04-18T16:37:58Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "diffHunk": "@@ -1751,6 +1761,17 @@ private void showSettings() {\n         // Show the settings dialog.\n         setdlg.setVisible(true);\n     }\n+    \n+    private void freshBoardSettings() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e7f66fbf5ac8d0930b8d04862b6885dda65ed92"}, "originalPosition": 177}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcyMDU2Mw==", "bodyText": "Why are you removing the original side of things?", "url": "https://github.com/MegaMek/megamek/pull/1859#discussion_r410720563", "createdAt": "2020-04-18T16:41:53Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/Messages.java", "diffHunk": "@@ -1,16 +1,16 @@\n-/*\n- * MegaMek - Copyright (C) 2005 Ben Mazur (bmazur@sev.org)\n- *\n- *  This program is free software; you can redistribute it and/or modify it\n- *  under the terms of the GNU General Public License as published by the Free\n- *  Software Foundation; either version 2 of the License, or (at your option)\n- *  any later version.\n- *\n- *  This program is distributed in the hope that it will be useful, but\n- *  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n- *  or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License\n- *  for more details.\n- */\n+/*  \n+* MegaMek - Copyright (C) 2020 - The MegaMek Team  ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e7f66fbf5ac8d0930b8d04862b6885dda65ed92"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a1821040b201c3130ef7537f28beb5d104d118e", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/4a1821040b201c3130ef7537f28beb5d104d118e", "committedDate": "2020-04-19T06:32:59Z", "message": "Messages Copyright notice and code commenting/method rename"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be2c3720f230596a194679961ba287e11375fa95", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/be2c3720f230596a194679961ba287e11375fa95", "committedDate": "2020-04-19T06:51:26Z", "message": "Accessibility: add Warning Color, default red, to the GUIPrefs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDMyMjk5", "url": "https://github.com/MegaMek/megamek/pull/1859#pullrequestreview-396032299", "createdAt": "2020-04-19T15:42:40Z", "commit": {"oid": "be2c3720f230596a194679961ba287e11375fa95"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNTo0Mjo0MFrOGH5TGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNTo0Mjo0MFrOGH5TGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkzMTk5NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                ((Graphics2D)g).setRenderingHint(\n          \n          \n            \n                                ((Graphics2D) g).setRenderingHint(", "url": "https://github.com/MegaMek/megamek/pull/1859#discussion_r410931995", "createdAt": "2020-04-19T15:42:40Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "diffHunk": "@@ -2137,17 +2143,25 @@ public void paintComponent(Graphics g) {\n                     g.drawImage(newVar, 0, 0, this);\n                 }\n                 // add level and INVALID if necessary\n+                if (guip.getAntiAliasing()) {\n+                    ((Graphics2D)g).setRenderingHint(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be2c3720f230596a194679961ba287e11375fa95"}, "originalPosition": 108}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ee9db60b300b7c6d19f1ab48534c6d12fcabd8a", "author": {"user": {"login": "SJuliez", "name": null}}, "url": "https://github.com/MegaMek/megamek/commit/6ee9db60b300b7c6d19f1ab48534c6d12fcabd8a", "committedDate": "2020-04-19T16:24:41Z", "message": "Spacing amendment\n\nCo-Authored-By: Justin Bowen <39067288+Windchild292@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4973, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}