{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4MjU2MzY4", "number": 1765, "reviewThreads": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo0NToxMlrODoDgJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDoxMDozOFrODoDlCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3MDEyOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo0NToxMlrOF2Zwzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo0NToxMlrOF2Zwzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4OTUxOQ==", "bodyText": "Then why keep the code?", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392589519", "createdAt": "2020-03-14T13:45:12Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "diffHunk": "@@ -5120,7 +5120,7 @@ public synchronized void boardChangedHex(BoardEvent b) {\n      */\n     public synchronized void boardChangedAllHexes(BoardEvent b) {\n         clearHexImageCache();\n-        tileManager.loadAllHexes();\n+//        tileManager.loadAllHexes(); Creates long load times and seems unnecessary ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3MDg1OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Board.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo0NjoxOVrOF2ZxKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo0NjozNFrOF2ZxRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4OTYxMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                if (errBuff.length()>0)\n          \n          \n            \n                                    errBuff.append(\"----\\n\");\n          \n          \n            \n                                if (errBuff.length() > 0) {\n          \n          \n            \n                                    errBuff.append(\"----\\n\");\n          \n          \n            \n                                }", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392589610", "createdAt": "2020-03-14T13:46:19Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {\n+                            if (adjHex.getTerrain(Terrains.BUILDING).getLevel() != hex.getTerrain(Terrains.BUILDING).getLevel()) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit to a building of another Building Type (Light, Medium...).\\n\");\n+                            }\n+                            if (hex.containsTerrain(Terrains.BLDG_CLASS) \n+                                    && ((adjHex.containsTerrain(Terrains.BLDG_CLASS) \n+                                            && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())\n+                                            || (!adjHex.containsTerrain(Terrains.BLDG_CLASS) )  )) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit in direction \"+dir+\" to a building of another Building Class.\\n\");\n+                            }\n+                        }\n+                    }\n+                }\n+                \n                 // Return early if we aren't logging errors\n                 if (!valid && (errBuff == null)) {\n                     return false;\n                 } else if (!valid) { // Otherwise, log the error for later output\n-                    errBuff.append(\"Hex \" + String.format(\"%1$02d%02$2d\", x + 1, y + 1) + \" is invalid!\\n\");\n-                    errBuff.append(currBuff.toString().replaceAll(\"^\", \"\\t\"));\n+                    if (errBuff.length()>0)\n+                        errBuff.append(\"----\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4OTYzNw==", "bodyText": "Just easier to read", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392589637", "createdAt": "2020-03-14T13:46:34Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {\n+                            if (adjHex.getTerrain(Terrains.BUILDING).getLevel() != hex.getTerrain(Terrains.BUILDING).getLevel()) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit to a building of another Building Type (Light, Medium...).\\n\");\n+                            }\n+                            if (hex.containsTerrain(Terrains.BLDG_CLASS) \n+                                    && ((adjHex.containsTerrain(Terrains.BLDG_CLASS) \n+                                            && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())\n+                                            || (!adjHex.containsTerrain(Terrains.BLDG_CLASS) )  )) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit in direction \"+dir+\" to a building of another Building Class.\\n\");\n+                            }\n+                        }\n+                    }\n+                }\n+                \n                 // Return early if we aren't logging errors\n                 if (!valid && (errBuff == null)) {\n                     return false;\n                 } else if (!valid) { // Otherwise, log the error for later output\n-                    errBuff.append(\"Hex \" + String.format(\"%1$02d%02$2d\", x + 1, y + 1) + \" is invalid!\\n\");\n-                    errBuff.append(currBuff.toString().replaceAll(\"^\", \"\\t\"));\n+                    if (errBuff.length()>0)\n+                        errBuff.append(\"----\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4OTYxMA=="}, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3MTM0OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Board.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo0NzoyMlrOF2Zxcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo0NzoyMlrOF2Zxcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU4OTY4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Coords c = new Coords(x,y);\n          \n          \n            \n                                Coords c = new Coords(x, y);", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392589682", "createdAt": "2020-03-14T13:47:22Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {\n+                            if (adjHex.getTerrain(Terrains.BUILDING).getLevel() != hex.getTerrain(Terrains.BUILDING).getLevel()) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit to a building of another Building Type (Light, Medium...).\\n\");\n+                            }\n+                            if (hex.containsTerrain(Terrains.BLDG_CLASS) \n+                                    && ((adjHex.containsTerrain(Terrains.BLDG_CLASS) \n+                                            && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())\n+                                            || (!adjHex.containsTerrain(Terrains.BLDG_CLASS) )  )) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit in direction \"+dir+\" to a building of another Building Class.\\n\");\n+                            }\n+                        }\n+                    }\n+                }\n+                \n                 // Return early if we aren't logging errors\n                 if (!valid && (errBuff == null)) {\n                     return false;\n                 } else if (!valid) { // Otherwise, log the error for later output\n-                    errBuff.append(\"Hex \" + String.format(\"%1$02d%02$2d\", x + 1, y + 1) + \" is invalid!\\n\");\n-                    errBuff.append(currBuff.toString().replaceAll(\"^\", \"\\t\"));\n+                    if (errBuff.length()>0)\n+                        errBuff.append(\"----\\n\");\n+                    Coords c = new Coords(x,y);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3NDQ4OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Board.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1Mzo1MVrOF2ZzKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1Mzo1MVrOF2ZzKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDEyMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                errBuff.append(\"Hex \" + c.getBoardNum() + \" is invalid:\\n\");\n          \n          \n            \n                                errBuff.append(currBuff.toString());\n          \n          \n            \n                                errBuff.append(\"Hex \" + c.getBoardNum() + \" is invalid:\\n\")\n          \n          \n            \n                                        .append(currBuff.toString());", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392590122", "createdAt": "2020-03-14T13:53:51Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {\n+                            if (adjHex.getTerrain(Terrains.BUILDING).getLevel() != hex.getTerrain(Terrains.BUILDING).getLevel()) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit to a building of another Building Type (Light, Medium...).\\n\");\n+                            }\n+                            if (hex.containsTerrain(Terrains.BLDG_CLASS) \n+                                    && ((adjHex.containsTerrain(Terrains.BLDG_CLASS) \n+                                            && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())\n+                                            || (!adjHex.containsTerrain(Terrains.BLDG_CLASS) )  )) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit in direction \"+dir+\" to a building of another Building Class.\\n\");\n+                            }\n+                        }\n+                    }\n+                }\n+                \n                 // Return early if we aren't logging errors\n                 if (!valid && (errBuff == null)) {\n                     return false;\n                 } else if (!valid) { // Otherwise, log the error for later output\n-                    errBuff.append(\"Hex \" + String.format(\"%1$02d%02$2d\", x + 1, y + 1) + \" is invalid!\\n\");\n-                    errBuff.append(currBuff.toString().replaceAll(\"^\", \"\\t\"));\n+                    if (errBuff.length()>0)\n+                        errBuff.append(\"----\\n\");\n+                    Coords c = new Coords(x,y);\n+                    errBuff.append(\"Hex \" + c.getBoardNum() + \" is invalid:\\n\");\n+                    errBuff.append(currBuff.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 48}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3NTAwOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Terrain.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1NTowM1rOF2ZzeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1NTowM1rOF2ZzeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDIwMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    } else if (type == Terrains.BRIDGE && level < 1) {\n          \n          \n            \n                    } else if ((type == Terrains.BRIDGE) && (level < 1)) {", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392590200", "createdAt": "2020-03-14T13:55:03Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Terrain.java", "diffHunk": "@@ -633,6 +633,8 @@ public boolean isValid(StringBuffer errBuff) {\n             rv = false;\n         } else if (type == Terrains.TUNDRA && level != 1) {\n             rv = false;\n+        } else if (type == Terrains.BRIDGE && level < 1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3NTYxOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Building.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1NTo0OVrOF2Zzwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1NTo0OVrOF2Zzwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDI3NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392590274", "createdAt": "2020-03-14T13:55:49Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Building.java", "diffHunk": "@@ -33,13 +33,21 @@\n  */\n public class Building implements Serializable {\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3NTg0OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Building.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1NjowN1rOF2Zz3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1NjowN1rOF2Zz3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDMwMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // The Building Class\n          \n          \n            \n                // The Building Classes", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392590302", "createdAt": "2020-03-14T13:56:07Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Building.java", "diffHunk": "@@ -33,13 +33,21 @@\n  */\n public class Building implements Serializable {\n \n-    // Private attributes and helper functions.\n-\n-    /**\n-     *\n-     */\n     private static final long serialVersionUID = -8236017592012683793L;\n \n+    // The Building Types\n+    public static final int LIGHT = 1;\n+    public static final int MEDIUM = 2;\n+    public static final int HEAVY = 3;\n+    public static final int HARDENED = 4;\n+    public static final int WALL = 5;\n+    \n+    // The Building Class", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3NjU0OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Building.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1Nzo0MFrOF2Z0NA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1Nzo0MFrOF2Z0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDM4OA==", "bodyText": "Remove this comment and the CASTLE_BRIAN constant, and move it to be commented out under the building classes above", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392590388", "createdAt": "2020-03-14T13:57:40Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Building.java", "diffHunk": "@@ -268,22 +279,6 @@ public static BasementType getType(int value) {\n         }\n     }\n \n-    /**\n-     * Various construction types.\n-     */\n-    public static final int LIGHT = 1;\n-    public static final int MEDIUM = 2;\n-    public static final int HEAVY = 3;\n-    public static final int HARDENED = 4;\n-    public static final int WALL = 5;\n-\n-    /**\n-     * Various building types\n-     */\n-    public static final int STANDARD = 0;\n-    public static final int HANGAR = 1;\n-    public static final int FORTRESS = 2;\n-    public static final int GUN_EMPLACEMENT = 3;\n \n     // TODO: leaving out Castles Brian until issues with damage scaling are\n     // resolved", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 109}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3NjkyOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Building.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMzo1ODozNVrOF2Z0ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyMjo1MFrOF5A3nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDQ0Mg==", "bodyText": "Does this not error out if the Construction factor changes? IIRC, shouldn't that be enforced too?", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392590442", "createdAt": "2020-03-14T13:58:35Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Building.java", "diffHunk": "@@ -167,7 +178,7 @@ protected void include(Coords coords, IBoard board, int structureType) {\n         }\n \n         if (structureType == Terrains.BUILDING) {\n-            // Error off if the building type, or CF is off.\n+            // Error if the Building Type (Light, Medium...) or Building Class (Standard, Hangar...) is off.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMyNzM5MQ==", "bodyText": "Don't know much about building rules but a building with different CFs in different hexes at least loads without error. Therefore I'd like to keep it like that for now.", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r395327391", "createdAt": "2020-03-19T21:22:50Z", "author": {"login": "SJuliez"}, "path": "megamek/src/megamek/common/Building.java", "diffHunk": "@@ -167,7 +178,7 @@ protected void include(Coords coords, IBoard board, int structureType) {\n         }\n \n         if (structureType == Terrains.BUILDING) {\n-            // Error off if the building type, or CF is off.\n+            // Error if the Building Type (Light, Medium...) or Building Class (Standard, Hangar...) is off.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDQ0Mg=="}, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3ODc1OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Building.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowMjoxNFrOF2Z1WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowMjoxNFrOF2Z1WQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDY4MQ==", "bodyText": "UNKNOWN should probably be moved up here from line 235.", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392590681", "createdAt": "2020-03-14T14:02:14Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Building.java", "diffHunk": "@@ -33,13 +33,21 @@\n  */\n public class Building implements Serializable {\n \n-    // Private attributes and helper functions.\n-\n-    /**\n-     *\n-     */\n     private static final long serialVersionUID = -8236017592012683793L;\n \n+    // The Building Types", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3OTQ1OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Building.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowNDowMVrOF2Z1vw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowNDowMVrOF2Z1vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDc4Mw==", "bodyText": "Maybe move this to be listed under the classes instead of having a comment that might go out of date?", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392590783", "createdAt": "2020-03-14T14:04:01Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Building.java", "diffHunk": "@@ -51,16 +59,19 @@\n     private Vector<Coords> coordinates = new Vector<Coords>();\n \n     /**\n-     * The construction type of the building.\n+     * The Construction Type of the building; equal to the terrain elevation of the BUILDING terrain of a hex.\n+     * Types: LIGHT, MEDIUM, HEAVY, HARDENED, WALL\n      */\n     private int type = Building.UNKNOWN;\n \n     /**\n      * The Basement type of the building.\n      */\n     private Map<Coords,BasementType> basement = new HashMap<Coords,BasementType>();\n+    \n     /**\n-     * the class of the building\n+     * The Building Class of the building; equal to the terrain elevation of the BUILDING CLASS terrain of a hex.\n+     * Types: STANDARD, HANGAR, FORTRESS, GUN_EMPLACEMENT \n      */\n     private int bldgClass = Building.STANDARD;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3OTU5OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Building.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowNDoyMlrOF2Z10w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowNDoyMlrOF2Z10w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDgwMw==", "bodyText": "Maybe move this to be under the list of types instead of a comment?", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392590803", "createdAt": "2020-03-14T14:04:22Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Building.java", "diffHunk": "@@ -51,16 +59,19 @@\n     private Vector<Coords> coordinates = new Vector<Coords>();\n \n     /**\n-     * The construction type of the building.\n+     * The Construction Type of the building; equal to the terrain elevation of the BUILDING terrain of a hex.\n+     * Types: LIGHT, MEDIUM, HEAVY, HARDENED, WALL\n      */\n     private int type = Building.UNKNOWN;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI3OTk1OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowNToxOVrOF2Z2Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMToyNTo1OFrOF5A9Tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDg1MA==", "bodyText": "Why use a StringBuffer? Does this require thread safety?", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392590850", "createdAt": "2020-03-14T14:05:19Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "diffHunk": "@@ -1440,12 +1440,32 @@ public String getDescription() {\n         mapSettings.setBoardSize(board.getWidth(), board.getHeight());\n         refreshTerrainList();\n     }\n+    \n+    /**\n+     * Will do board.initializeHex() for all hexes, correcting \n+     * building and road connection issues for those hexes that do not have\n+     * the exits check set.\n+     */\n+    private void correctExits() {\n+        for (int x = 0; x < board.getWidth(); x++) {\n+            for (int y = 0; y < board.getHeight(); y++) {\n+                board.initializeHex(x, y);\n+            }\n+        }\n+    }\n \n     /**\n      * Checks to see if there is already a path and name stored; if not, calls\n      * \"save as\"; otherwise, saves the board to the specified file.\n      */\n     private void boardSave() {\n+        // First, correct connection issues and do a validation.\n+        correctExits();\n+        StringBuffer errBuff = new StringBuffer();\n+        board.isValid(errBuff);\n+        if (errBuff.length() > 0) {\n+            showBoardValidationReport(errBuff);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMyODg0Ng==", "bodyText": "I didn't introduce it and I didn't really think about that.", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r395328846", "createdAt": "2020-03-19T21:25:58Z", "author": {"login": "SJuliez"}, "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "diffHunk": "@@ -1440,12 +1440,32 @@ public String getDescription() {\n         mapSettings.setBoardSize(board.getWidth(), board.getHeight());\n         refreshTerrainList();\n     }\n+    \n+    /**\n+     * Will do board.initializeHex() for all hexes, correcting \n+     * building and road connection issues for those hexes that do not have\n+     * the exits check set.\n+     */\n+    private void correctExits() {\n+        for (int x = 0; x < board.getWidth(); x++) {\n+            for (int y = 0; y < board.getHeight(); y++) {\n+                board.initializeHex(x, y);\n+            }\n+        }\n+    }\n \n     /**\n      * Checks to see if there is already a path and name stored; if not, calls\n      * \"save as\"; otherwise, saves the board to the specified file.\n      */\n     private void boardSave() {\n+        // First, correct connection issues and do a validation.\n+        correctExits();\n+        StringBuffer errBuff = new StringBuffer();\n+        board.isValid(errBuff);\n+        if (errBuff.length() > 0) {\n+            showBoardValidationReport(errBuff);\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MDg1MA=="}, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 81}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI4MTU0OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Board.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowODozMlrOF2Z2xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowODozMlrOF2Z2xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MTA0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                            && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n          \n          \n            \n                                    {\n          \n          \n            \n                                            && hex.containsTerrainExit(Terrains.BUILDING, dir)) {", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392591044", "createdAt": "2020-03-14T14:08:32Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI4MTcyOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Board.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowODo0MlrOF2Z22A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowODo0MlrOF2Z22A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MTA2NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    if (adjHex != null \n          \n          \n            \n                                    if ((adjHex != null)", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392591064", "createdAt": "2020-03-14T14:08:42Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI4MjI1OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Board.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowOTozNlrOF2Z3Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowOTozNlrOF2Z3Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MTEzMQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                                        && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())\n          \n          \n            \n                                                        && (adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel()))", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392591131", "createdAt": "2020-03-14T14:09:36Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {\n+                            if (adjHex.getTerrain(Terrains.BUILDING).getLevel() != hex.getTerrain(Terrains.BUILDING).getLevel()) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit to a building of another Building Type (Light, Medium...).\\n\");\n+                            }\n+                            if (hex.containsTerrain(Terrains.BLDG_CLASS) \n+                                    && ((adjHex.containsTerrain(Terrains.BLDG_CLASS) \n+                                            && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI4MjM3OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Board.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowOTo1MFrOF2Z3KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDowOTo1MFrOF2Z3KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MTE0NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                                        || (!adjHex.containsTerrain(Terrains.BLDG_CLASS) )  )) {\n          \n          \n            \n                                                        || (!adjHex.containsTerrain(Terrains.BLDG_CLASS)))) {", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392591145", "createdAt": "2020-03-14T14:09:50Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {\n+                            if (adjHex.getTerrain(Terrains.BUILDING).getLevel() != hex.getTerrain(Terrains.BUILDING).getLevel()) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit to a building of another Building Type (Light, Medium...).\\n\");\n+                            }\n+                            if (hex.containsTerrain(Terrains.BLDG_CLASS) \n+                                    && ((adjHex.containsTerrain(Terrains.BLDG_CLASS) \n+                                            && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())\n+                                            || (!adjHex.containsTerrain(Terrains.BLDG_CLASS) )  )) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMzI4MjY3OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Board.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDoxMDozOFrOF2Z3Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMTo0ODoxNVrOF5Bjvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MTE4Mw==", "bodyText": "Replace the + dir + with chained append calls.", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r392591183", "createdAt": "2020-03-14T14:10:38Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {\n+                            if (adjHex.getTerrain(Terrains.BUILDING).getLevel() != hex.getTerrain(Terrains.BUILDING).getLevel()) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit to a building of another Building Type (Light, Medium...).\\n\");\n+                            }\n+                            if (hex.containsTerrain(Terrains.BLDG_CLASS) \n+                                    && ((adjHex.containsTerrain(Terrains.BLDG_CLASS) \n+                                            && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())\n+                                            || (!adjHex.containsTerrain(Terrains.BLDG_CLASS) )  )) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit in direction \"+dir+\" to a building of another Building Class.\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMzMDUyMA==", "bodyText": "Why? much longer. Effortlessly readable as is.", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r395330520", "createdAt": "2020-03-19T21:29:52Z", "author": {"login": "SJuliez"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {\n+                            if (adjHex.getTerrain(Terrains.BUILDING).getLevel() != hex.getTerrain(Terrains.BUILDING).getLevel()) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit to a building of another Building Type (Light, Medium...).\\n\");\n+                            }\n+                            if (hex.containsTerrain(Terrains.BLDG_CLASS) \n+                                    && ((adjHex.containsTerrain(Terrains.BLDG_CLASS) \n+                                            && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())\n+                                            || (!adjHex.containsTerrain(Terrains.BLDG_CLASS) )  )) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit in direction \"+dir+\" to a building of another Building Class.\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MTE4Mw=="}, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMzMTc2MQ==", "bodyText": "Faster processing and more consistent code", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r395331761", "createdAt": "2020-03-19T21:32:22Z", "author": {"login": "Windchild292"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {\n+                            if (adjHex.getTerrain(Terrains.BUILDING).getLevel() != hex.getTerrain(Terrains.BUILDING).getLevel()) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit to a building of another Building Type (Light, Medium...).\\n\");\n+                            }\n+                            if (hex.containsTerrain(Terrains.BLDG_CLASS) \n+                                    && ((adjHex.containsTerrain(Terrains.BLDG_CLASS) \n+                                            && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())\n+                                            || (!adjHex.containsTerrain(Terrains.BLDG_CLASS) )  )) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit in direction \"+dir+\" to a building of another Building Class.\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MTE4Mw=="}, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMzODY4Ng==", "bodyText": "For the sake of not arguing about irrelevant issues I've changed it. I also followed most of your suggestions above (I think I just didnt add the parenthesis clutter in Terrain.java as this would be inconsistent :D but everything else). Thanks for looking at it.", "url": "https://github.com/MegaMek/megamek/pull/1765#discussion_r395338686", "createdAt": "2020-03-19T21:48:15Z", "author": {"login": "SJuliez"}, "path": "megamek/src/megamek/common/Board.java", "diffHunk": "@@ -971,12 +971,40 @@ private boolean isValid(IHex[] data, int width, int height, StringBuffer errBuff\n                 }\n                 StringBuffer currBuff = new StringBuffer();\n                 boolean valid = hex.isValid(currBuff);\n+                \n+                // Multi-hex problems \n+                // A building hex must only have exits to other building hexes of the same Building Type and Class\n+                if (hex.containsTerrain(Terrains.BUILDING) && hex.getTerrain(Terrains.BUILDING).hasExitsSpecified()) {\n+                    for (int dir = 0; dir < 6; dir++) {\n+                        IHex adjHex = getHexInDir(x, y, dir);\n+                        if (adjHex != null \n+                                && adjHex.containsTerrain(Terrains.BUILDING) \n+                                && hex.containsTerrainExit(Terrains.BUILDING, dir)) \n+                        {\n+                            if (adjHex.getTerrain(Terrains.BUILDING).getLevel() != hex.getTerrain(Terrains.BUILDING).getLevel()) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit to a building of another Building Type (Light, Medium...).\\n\");\n+                            }\n+                            if (hex.containsTerrain(Terrains.BLDG_CLASS) \n+                                    && ((adjHex.containsTerrain(Terrains.BLDG_CLASS) \n+                                            && adjHex.getTerrain(Terrains.BLDG_CLASS).getLevel() != hex.getTerrain(Terrains.BLDG_CLASS).getLevel())\n+                                            || (!adjHex.containsTerrain(Terrains.BLDG_CLASS) )  )) {\n+                                valid = false;\n+                                currBuff.append(\"Building has an exit in direction \"+dir+\" to a building of another Building Class.\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MTE4Mw=="}, "originalCommit": {"oid": "51276a5806b93f153d53eb6a4e6fa523edde4eba"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2526, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}