{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3MzQyMjg4", "number": 2293, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQwMDo1NTowOVrOEqDWxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQwMDo1NTowOVrOEqDWxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyNTMwNjI5OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/weapons/infantry/InfantryWeaponHandler.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQwMDo1NTowOVrOHcEatw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQwMTowNTowOVrOHcEcsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE5NDU1MQ==", "bodyText": "I hate to ask, but what about battle armor?", "url": "https://github.com/MegaMek/megamek/pull/2293#discussion_r499194551", "createdAt": "2020-10-04T00:55:09Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/weapons/infantry/InfantryWeaponHandler.java", "diffHunk": "@@ -157,12 +157,15 @@ protected int calcnClusterAero(Entity entityTarget) {\n     }\n \n     protected int calcAttackValue() {\n-        int av = 0;\n+        int av;\n         //Sigh, another rules oversight - nobody bothered to figure this out\n         //To be consistent with other cluster weapons we will assume 60% hit\n-        if ((ae instanceof Infantry) && !(ae instanceof BattleArmor)) {\n+        if (ae.isConventionalInfantry()) {\n             double damage = ((Infantry) ae).getDamagePerTrooper();\n             av = (int) Math.round(damage * 0.6 * ((Infantry) ae).getShootingStrength());\n+        } else {\n+            // Small fixed wing support\n+            av = super.calcAttackValue();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd82bfbba450c4e2be2a498f0c052fe62a5cf6a1"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE5NDkxMw==", "bodyText": "I'm not really sure what that code is about, though I have some ideas. It's beyond the scope of what I'm working on so I made it more concise but otherwise left it alone.", "url": "https://github.com/MegaMek/megamek/pull/2293#discussion_r499194913", "createdAt": "2020-10-04T01:02:13Z", "author": {"login": "neoancient"}, "path": "megamek/src/megamek/common/weapons/infantry/InfantryWeaponHandler.java", "diffHunk": "@@ -157,12 +157,15 @@ protected int calcnClusterAero(Entity entityTarget) {\n     }\n \n     protected int calcAttackValue() {\n-        int av = 0;\n+        int av;\n         //Sigh, another rules oversight - nobody bothered to figure this out\n         //To be consistent with other cluster weapons we will assume 60% hit\n-        if ((ae instanceof Infantry) && !(ae instanceof BattleArmor)) {\n+        if (ae.isConventionalInfantry()) {\n             double damage = ((Infantry) ae).getDamagePerTrooper();\n             av = (int) Math.round(damage * 0.6 * ((Infantry) ae).getShootingStrength());\n+        } else {\n+            // Small fixed wing support\n+            av = super.calcAttackValue();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE5NDU1MQ=="}, "originalCommit": {"oid": "fd82bfbba450c4e2be2a498f0c052fe62a5cf6a1"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE5NTA1OQ==", "bodyText": "Ah, I think I see what you're saying - that check before was explicitly \"is this infantry but not battle armor\".", "url": "https://github.com/MegaMek/megamek/pull/2293#discussion_r499195059", "createdAt": "2020-10-04T01:05:09Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/weapons/infantry/InfantryWeaponHandler.java", "diffHunk": "@@ -157,12 +157,15 @@ protected int calcnClusterAero(Entity entityTarget) {\n     }\n \n     protected int calcAttackValue() {\n-        int av = 0;\n+        int av;\n         //Sigh, another rules oversight - nobody bothered to figure this out\n         //To be consistent with other cluster weapons we will assume 60% hit\n-        if ((ae instanceof Infantry) && !(ae instanceof BattleArmor)) {\n+        if (ae.isConventionalInfantry()) {\n             double damage = ((Infantry) ae).getDamagePerTrooper();\n             av = (int) Math.round(damage * 0.6 * ((Infantry) ae).getShootingStrength());\n+        } else {\n+            // Small fixed wing support\n+            av = super.calcAttackValue();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE5NDU1MQ=="}, "originalCommit": {"oid": "fd82bfbba450c4e2be2a498f0c052fe62a5cf6a1"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2744, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}