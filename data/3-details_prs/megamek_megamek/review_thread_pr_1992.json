{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI5MTc3OTk4", "number": 1992, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozNTowNVrOERRnJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozODoyN1rOERRpXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NTQ5Nzk2OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Compute.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozNTowNVrOG15qtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozNTowNVrOG15qtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3MjUzNA==", "bodyText": "Seems to me like this logic and the logic in SharedUtility.NagPSR should be unified somehow to avoid inconsistencies if/ when it needs to be updated. Keeping it in a distinct method will also allow it to be referenced by other code that may need it (e.g. the bot)", "url": "https://github.com/MegaMek/megamek/pull/1992#discussion_r459172534", "createdAt": "2020-07-23T01:35:05Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/Compute.java", "diffHunk": "@@ -548,6 +548,42 @@ public static boolean isPilotingSkillNeeded(IGame game, int entityId,\n                 && !isPavementStep) {\n             return true;\n         }\n+        \n+        // Sheer Cliffs, TO p.39\n+        // Roads over cliffs cancel the cliff effects for units that move on roads\n+        boolean quadveeVehMode = entity instanceof QuadVee ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5ae66882841d64c9cd845de44f62960b8a21dcd"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NTQ5OTE5OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Compute.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozNTo0M1rOG15rXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNDo1MTo1NFrOG2yckg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3MjcwMg==", "bodyText": "Normally I don't bother about white space formatting, but it looks like the tabs got completely clobbered here.", "url": "https://github.com/MegaMek/megamek/pull/1992#discussion_r459172702", "createdAt": "2020-07-23T01:35:43Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/Compute.java", "diffHunk": "@@ -3160,72 +3196,72 @@ public static float getExpectedDamage(IGame g, WeaponAttackAction waa,\n                         g.getEntity(waa.getTargetId()).getPosition());\n                 //Convert AV to fDamage for bay weapons, fighters, etc\n                 if (attacker.usesWeaponBays()){\n-                \tdouble av = 0;\n-                \tdouble threat = 1;\n+                    double av = 0;\n+                    double threat = 1;\n                     for (int wId : weapon.getBayWeapons()) {\n-                    \tMounted bayW = attacker.getEquipment(wId);\n-                    \tWeaponType bayWType = ((WeaponType) bayW.getType());\n-                \t//Capital weapons have a different range scale\n+                        Mounted bayW = attacker.getEquipment(wId);\n+                        WeaponType bayWType = ((WeaponType) bayW.getType());\n+                    //Capital weapons have a different range scale\n                         if (wt.isCapital()) {\n-                        \t// Capital missiles get higher priority than standard missiles:\n+                            // Capital missiles get higher priority than standard missiles:\n                             // damage plus a bonus for the critical hit threat they represent\n-                        \tthreat = 12;\n-                        \tif (rangeToTarget > 50) {\n-                \t\t\tav = 0;\n-                        \t} else if (rangeToTarget > 40) {\n-                \t\t\tav += bayWType.getExtAV();\n-                        \t} else if (rangeToTarget > 25) {\n-                \t\t\tav += bayWType.getLongAV();\n-                        \t} else if (rangeToTarget > 12) {\n-                \t\t\tav += bayWType.getMedAV();\n-                        \t} else {\n-                \t\t\tav += bayWType.getShortAV();\n-                        \t}\n+                            threat = 12;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5ae66882841d64c9cd845de44f62960b8a21dcd"}, "originalPosition": 148}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDEwMjgwMg==", "bodyText": "OK, autoindented it.", "url": "https://github.com/MegaMek/megamek/pull/1992#discussion_r460102802", "createdAt": "2020-07-24T14:51:54Z", "author": {"login": "SJuliez"}, "path": "megamek/src/megamek/common/Compute.java", "diffHunk": "@@ -3160,72 +3196,72 @@ public static float getExpectedDamage(IGame g, WeaponAttackAction waa,\n                         g.getEntity(waa.getTargetId()).getPosition());\n                 //Convert AV to fDamage for bay weapons, fighters, etc\n                 if (attacker.usesWeaponBays()){\n-                \tdouble av = 0;\n-                \tdouble threat = 1;\n+                    double av = 0;\n+                    double threat = 1;\n                     for (int wId : weapon.getBayWeapons()) {\n-                    \tMounted bayW = attacker.getEquipment(wId);\n-                    \tWeaponType bayWType = ((WeaponType) bayW.getType());\n-                \t//Capital weapons have a different range scale\n+                        Mounted bayW = attacker.getEquipment(wId);\n+                        WeaponType bayWType = ((WeaponType) bayW.getType());\n+                    //Capital weapons have a different range scale\n                         if (wt.isCapital()) {\n-                        \t// Capital missiles get higher priority than standard missiles:\n+                            // Capital missiles get higher priority than standard missiles:\n                             // damage plus a bonus for the critical hit threat they represent\n-                        \tthreat = 12;\n-                        \tif (rangeToTarget > 50) {\n-                \t\t\tav = 0;\n-                        \t} else if (rangeToTarget > 40) {\n-                \t\t\tav += bayWType.getExtAV();\n-                        \t} else if (rangeToTarget > 25) {\n-                \t\t\tav += bayWType.getLongAV();\n-                        \t} else if (rangeToTarget > 12) {\n-                \t\t\tav += bayWType.getMedAV();\n-                        \t} else {\n-                \t\t\tav += bayWType.getShortAV();\n-                        \t}\n+                            threat = 12;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3MjcwMg=="}, "originalCommit": {"oid": "d5ae66882841d64c9cd845de44f62960b8a21dcd"}, "originalPosition": 148}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NTQ5OTgyOnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/Hex.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozNjoxMlrOG15rvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNDo1MjoxMVrOG2ydRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3Mjc5Ng==", "bodyText": "Let's put a comment on this public method.", "url": "https://github.com/MegaMek/megamek/pull/1992#discussion_r459172796", "createdAt": "2020-07-23T01:36:12Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/Hex.java", "diffHunk": "@@ -590,20 +590,23 @@ public void getUnstuckModifier(int elev, PilotingRollData rollTarget) {\n             terrain.getUnstuckModifier(elev, rollTarget);\n         }\n     }\n+    \n+    public boolean hasCliffTopTowards(IHex otherHex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5ae66882841d64c9cd845de44f62960b8a21dcd"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDEwMjk4MQ==", "bodyText": "Did.", "url": "https://github.com/MegaMek/megamek/pull/1992#discussion_r460102981", "createdAt": "2020-07-24T14:52:11Z", "author": {"login": "SJuliez"}, "path": "megamek/src/megamek/common/Hex.java", "diffHunk": "@@ -590,20 +590,23 @@ public void getUnstuckModifier(int elev, PilotingRollData rollTarget) {\n             terrain.getUnstuckModifier(elev, rollTarget);\n         }\n     }\n+    \n+    public boolean hasCliffTopTowards(IHex otherHex) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3Mjc5Ng=="}, "originalCommit": {"oid": "d5ae66882841d64c9cd845de44f62960b8a21dcd"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NTUwMDg2OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/MechSummaryCache.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozNjozNFrOG15sPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQxNDo1Mjo0OVrOG2yesA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3MjkyNw==", "bodyText": "Should probably uncomment these guys?", "url": "https://github.com/MegaMek/megamek/pull/1992#discussion_r459172927", "createdAt": "2020-07-23T01:36:34Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/MechSummaryCache.java", "diffHunk": "@@ -489,8 +489,8 @@ private boolean loadMechsFromDirectory(Vector<MechSummary> vMechs,\n             Set<String> sKnownFiles, long lLastCheck, File fDir,\n             boolean ignoreUnofficial) {\n         boolean bNeedsUpdate = false;\n-        loadReport.append(\"  Looking in \").append(fDir.getPath())\n-                .append(\"...\\n\");\n+//        loadReport.append(\"  Looking in \").append(fDir.getPath())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5ae66882841d64c9cd845de44f62960b8a21dcd"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDEwMzM0NA==", "bodyText": "Right :) Although these clutter up the log.", "url": "https://github.com/MegaMek/megamek/pull/1992#discussion_r460103344", "createdAt": "2020-07-24T14:52:49Z", "author": {"login": "SJuliez"}, "path": "megamek/src/megamek/common/MechSummaryCache.java", "diffHunk": "@@ -489,8 +489,8 @@ private boolean loadMechsFromDirectory(Vector<MechSummary> vMechs,\n             Set<String> sKnownFiles, long lLastCheck, File fDir,\n             boolean ignoreUnofficial) {\n         boolean bNeedsUpdate = false;\n-        loadReport.append(\"  Looking in \").append(fDir.getPath())\n-                .append(\"...\\n\");\n+//        loadReport.append(\"  Looking in \").append(fDir.getPath())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3MjkyNw=="}, "originalCommit": {"oid": "d5ae66882841d64c9cd845de44f62960b8a21dcd"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NTUwMzA0OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/common/MoveStep.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozODowMVrOG15teg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozODowMVrOG15teg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3MzI0Mg==", "bodyText": "It looks like a triplication of the 'is this affected by a cliff' code, so yet another argument to consolidate that logic.", "url": "https://github.com/MegaMek/megamek/pull/1992#discussion_r459173242", "createdAt": "2020-07-23T01:38:01Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/common/MoveStep.java", "diffHunk": "@@ -3356,24 +3364,76 @@ public boolean isMovementPossible(IGame game, Coords src, int srcEl, CachedEntit\n                 return false;\n             }\n         }\n+        \n+        // Sheer Cliffs, TO p.39\n+        // Roads over cliffs cancel the cliff effects for units that move on roads\n+        boolean vehicleAffectedByCliff = entity instanceof Tank ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5ae66882841d64c9cd845de44f62960b8a21dcd"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NTUwMzY3OnYy", "diffSide": "RIGHT", "path": "megamek/src/megamek/server/Server.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozODoyN1rOG15t0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwMTozODoyN1rOG15t0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE3MzMyOQ==", "bodyText": "A quadruplication!", "url": "https://github.com/MegaMek/megamek/pull/1992#discussion_r459173329", "createdAt": "2020-07-23T01:38:27Z", "author": {"login": "NickAragua"}, "path": "megamek/src/megamek/server/Server.java", "diffHunk": "@@ -8720,6 +8721,69 @@ else if (bldgExited.equals(bldgEntered)\n                     }\n                 }\n             }\n+            \n+            // Sheer Cliffs, TO p.39\n+            boolean vehicleAffectedByCliff = entity instanceof Tank ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5ae66882841d64c9cd845de44f62960b8a21dcd"}, "originalPosition": 54}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2811, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}