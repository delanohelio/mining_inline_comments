{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5OTMyNDE4", "number": 2458, "title": "Combo box to select player names when loading saved game", "bodyText": "For debugging, we get saved games submitted by players.  Generally, we don't know the names of the players in these saved games so it usually creates an annoying workflow of loading the game, finding the player names, then exiting and reloading.  It would be convenient to have the host dialog populate a list of players in the game to select from, but still function the same as the old load dialog.  This pull request adds this functionality.\nI read in the serialized game to scrape the list of players and then AbstractConnectionDialog was updated such that it can take a list of player names.  If no player name list is passed (aka, null), then everything functions as before, but if the player name list is supplied then a JComboBox is used instead of a JTextField and the combo box is populated with the list of player names.  It's still editable, so users can use whatever username they want.\nIt turns out the action events for JTextField and JComboBox behave differently.  For the JTextField it seems that an edit event is only fired when the user hits enter, and the old behavior was based around this (so when you hit enter in the text box, the dialog closes).  With a JComboBox anytime you stop typing it fires a comboBoxEdited event, but this event can't distinguish between normal typing and enter being pressed.  I created a work around for this, so the behavior is as expected, but the code is a kludgy.   It could definitely be improved.", "createdAt": "2020-12-01T02:37:58Z", "url": "https://github.com/MegaMek/megamek/pull/2458", "merged": true, "mergeCommit": {"oid": "8f8745298161a2a19065852a5259306ba8aaf388"}, "closed": true, "closedAt": "2020-12-05T15:31:51Z", "author": {"login": "arlith"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhvoG8gH2gAyNTI5OTMyNDE4OmM0MWIyMjcwZjA4ODFjYzAzODlmODYyMTViN2FhOTIzYTU5NDM4MmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdi7xpMgFqTU0NTE4NjI4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c41b2270f0881cc0389f86215b7aa923a594382b", "author": {"user": {"login": "arlith", "name": "Nicholas Walczak"}}, "url": "https://github.com/MegaMek/megamek/commit/c41b2270f0881cc0389f86215b7aa923a594382b", "committedDate": "2020-12-01T01:26:05Z", "message": "Conditionally use combo box for host dialog\n\nwhen loading a saved game.  The combo box is populated by names of the\nplayers present in the saved game."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be020103fdae4639e9f13b9da45859ab82bc633b", "author": {"user": {"login": "arlith", "name": "Nicholas Walczak"}}, "url": "https://github.com/MegaMek/megamek/commit/be020103fdae4639e9f13b9da45859ab82bc633b", "committedDate": "2020-12-01T02:28:11Z", "message": "Fix Enter behavior for JComboBox\n\nWith a JTextField, users can type into the field and hit enter and that\nwill update the dialog.  For a JComboBox, an event is fired anytime\ntyping is finished or enter is pressed.  I can't distinguish between\nthose two events without something like is added in this commit."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2f5c7672084b4ed47aa3dcb3ad7e99c6333d425", "author": {"user": {"login": "arlith", "name": "Nicholas Walczak"}}, "url": "https://github.com/MegaMek/megamek/commit/f2f5c7672084b4ed47aa3dcb3ad7e99c6333d425", "committedDate": "2020-12-01T02:29:11Z", "message": "Remove exceptions for JComboBox events\n\nAfter the last commit, we don't have to add the JComboBox to the action\nlistener, so its events never fire and don't need to be ignored."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0796abd6371863f5963b720c82b4600cabce296", "author": {"user": {"login": "arlith", "name": "Nicholas Walczak"}}, "url": "https://github.com/MegaMek/megamek/commit/d0796abd6371863f5963b720c82b4600cabce296", "committedDate": "2020-12-01T02:45:44Z", "message": "Match player name JCombo to width of JTextField"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxNTM4OTcw", "url": "https://github.com/MegaMek/megamek/pull/2458#pullrequestreview-541538970", "createdAt": "2020-12-01T07:10:24Z", "commit": {"oid": "d0796abd6371863f5963b720c82b4600cabce296"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwNzoxMDoyNFrOH8avXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwNzoxMDoyNFrOH8avXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzExNDcxNw==", "bodyText": "Currently when a game doesn't load, it continues to the host dialog (and notices later, that it cant load). Maybe add\nJOptionPane.showMessageDialog(frame, Messages.getString(\"MegaMek.LoadGameAlert.message\"),\nMessages.getString(\"MegaMek.LoadGameAlert.title\"), JOptionPane.ERROR_MESSAGE);\nreturn;\nto the catch block?", "url": "https://github.com/MegaMek/megamek/pull/2458#discussion_r533114717", "createdAt": "2020-12-01T07:10:24Z", "author": {"login": "SJuliez"}, "path": "megamek/src/megamek/client/ui/swing/MegaMekGUI.java", "diffHunk": "@@ -536,7 +543,24 @@ public String getDescription() {\n             // I want a file, y'know!\n             return;\n         }\n-        HostDialog hd = new HostDialog(frame);\n+\n+        IGame newGame = null;\n+        try (InputStream is = new FileInputStream(fc.getSelectedFile()); InputStream gzi = new GZIPInputStream(is)) {\n+            XStream xstream = SerializationHelper.getXStream();\n+            newGame = (IGame) xstream.fromXML(gzi);\n+        } catch (Exception e) {\n+            MegaMek.getLogger().error(\"Unable to load file: \" + fc.getSelectedFile(), e);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0796abd6371863f5963b720c82b4600cabce296"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e11b664c2c24e1b8ce245cae5fed0982b8569768", "author": {"user": {"login": "arlith", "name": "Nicholas Walczak"}}, "url": "https://github.com/MegaMek/megamek/commit/e11b664c2c24e1b8ce245cae5fed0982b8569768", "committedDate": "2020-12-01T22:52:35Z", "message": "Display error dialog on first saved game load"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MTYyNDE5", "url": "https://github.com/MegaMek/megamek/pull/2458#pullrequestreview-545162419", "createdAt": "2020-12-04T17:36:23Z", "commit": {"oid": "e11b664c2c24e1b8ce245cae5fed0982b8569768"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b0cbc0402867953a895d8b268a0e92588e22396", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/megamek/commit/8b0cbc0402867953a895d8b268a0e92588e22396", "committedDate": "2020-12-04T17:39:36Z", "message": "Merge branch 'master' into savedGamePlayerComboBox"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d60c18b8de15863e94968757dcd5ec0e8a1e8902", "author": {"user": {"login": "Windchild292", "name": "Justin Bowen"}}, "url": "https://github.com/MegaMek/megamek/commit/d60c18b8de15863e94968757dcd5ec0e8a1e8902", "committedDate": "2020-12-04T18:03:11Z", "message": "Implementing HostDialog changes for MekHQ"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MTg2Mjg3", "url": "https://github.com/MegaMek/megamek/pull/2458#pullrequestreview-545186287", "createdAt": "2020-12-04T18:09:17Z", "commit": {"oid": "d60c18b8de15863e94968757dcd5ec0e8a1e8902"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4684, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}