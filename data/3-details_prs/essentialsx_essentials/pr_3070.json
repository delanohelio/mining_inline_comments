{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3ODQ0NTIx", "number": 3070, "title": "Add default enchantment level for enchant sign", "bodyText": "Defaults the enchantment level on signs to 1 is one is not provided on the sign.\nCloses #1497 and possibly others", "createdAt": "2020-03-13T15:38:47Z", "url": "https://github.com/EssentialsX/Essentials/pull/3070", "merged": true, "mergeCommit": {"oid": "e9d29f789f5818540a279c0157d6e6e2ab20a93b"}, "closed": true, "closedAt": "2020-05-04T10:10:17Z", "author": {"login": "JRoy"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNSLBvAH2gAyMzg3ODQ0NTIxOjAyNzhlNzE2YTMxOGJjMzE4NDM4NGM3ZWZlZTNkZjI2ZjA4YjA4ZTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcd8pjxgFqTQwNDg1NzYwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0278e716a318bc3184384c7efee3df26f08b08e8", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/0278e716a318bc3184384c7efee3df26f08b08e8", "committedDate": "2020-03-13T15:37:26Z", "message": "Add default enchantment level for enchant sign"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NjEzMDI1", "url": "https://github.com/EssentialsX/Essentials/pull/3070#pullrequestreview-374613025", "createdAt": "2020-03-13T20:52:14Z", "commit": {"oid": "0278e716a318bc3184384c7efee3df26f08b08e8"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NDQ0NzUw", "url": "https://github.com/EssentialsX/Essentials/pull/3070#pullrequestreview-384444750", "createdAt": "2020-03-31T06:51:18Z", "commit": {"oid": "0278e716a318bc3184384c7efee3df26f08b08e8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjo1MToxOFrOF-Hkuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwNjo1MjoxMVrOF-HmNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4MDEyMw==", "bodyText": "This logic opens up a weird validation corner case that probably doesn't matter but I'll still complain about....\nenchant:level:somejunk is valid, but even if level > 1, level will always only be 1. This should be a validation error.", "url": "https://github.com/EssentialsX/Essentials/pull/3070#discussion_r400680123", "createdAt": "2020-03-31T06:51:18Z", "author": {"login": "Ichbinjoe"}, "path": "Essentials/src/com/earth2me/essentials/signs/SignEnchant.java", "diffHunk": "@@ -28,21 +28,19 @@ protected boolean onSignCreate(final ISign sign, final User player, final String\n             throw e;\n         }\n         final String[] enchantLevel = sign.getLine(2).split(\":\");\n-        if (enchantLevel.length != 2) {\n-            sign.setLine(2, \"\u00a7c<enchant>\");\n-            throw new SignException(tl(\"invalidSignLine\", 3));\n-        }\n+        int level = 1;\n         final Enchantment enchantment = Enchantments.getByName(enchantLevel[0]);\n         if (enchantment == null) {\n             sign.setLine(2, \"\u00a7c<enchant>\");\n             throw new SignException(tl(\"enchantmentNotFound\"));\n         }\n-        int level;\n-        try {\n-            level = Integer.parseInt(enchantLevel[1]);\n-        } catch (NumberFormatException ex) {\n-            sign.setLine(2, \"\u00a7c<enchant>\");\n-            throw new SignException(ex.getMessage(), ex);\n+        if (enchantLevel.length == 2) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0278e716a318bc3184384c7efee3df26f08b08e8"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4MDUwMA==", "bodyText": "I don't like this default. I know you didn't do it, but this just feels clowny.", "url": "https://github.com/EssentialsX/Essentials/pull/3070#discussion_r400680500", "createdAt": "2020-03-31T06:52:11Z", "author": {"login": "Ichbinjoe"}, "path": "Essentials/src/com/earth2me/essentials/signs/SignEnchant.java", "diffHunk": "@@ -70,18 +68,17 @@ protected boolean onSignInteract(ISign sign, User player, String username, IEsse\n         final Trade charge = getTrade(sign, 3, ess);\n         charge.isAffordableFor(player);\n         final String[] enchantLevel = sign.getLine(2).split(\":\");\n-        if (enchantLevel.length != 2) {\n-            throw new SignException(tl(\"invalidSignLine\", 3));\n-        }\n         final Enchantment enchantment = Enchantments.getByName(enchantLevel[0]);\n         if (enchantment == null) {\n             throw new SignException(tl(\"enchantmentNotFound\"));\n         }\n-        int level;\n-        try {\n-            level = Integer.parseInt(enchantLevel[1]);\n-        } catch (NumberFormatException ex) {\n-            level = enchantment.getMaxLevel();\n+        int level = 1;\n+        if (enchantLevel.length == 2) {\n+            try {\n+                level = Integer.parseInt(enchantLevel[1]);\n+            } catch (NumberFormatException ex) {\n+                level = enchantment.getMaxLevel();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0278e716a318bc3184384c7efee3df26f08b08e8"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19c285989964680bcbfdd7caa26a163299a646cf", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/19c285989964680bcbfdd7caa26a163299a646cf", "committedDate": "2020-03-31T16:09:22Z", "message": "Review changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e34635ac73d6e8303463dd69afaed88807e7507", "author": {"user": {"login": "JRoy", "name": "Josh Roy"}}, "url": "https://github.com/EssentialsX/Essentials/commit/8e34635ac73d6e8303463dd69afaed88807e7507", "committedDate": "2020-04-27T21:46:37Z", "message": "Remove max enchantment default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTY3Nzg0", "url": "https://github.com/EssentialsX/Essentials/pull/3070#pullrequestreview-404567784", "createdAt": "2020-05-02T23:19:39Z", "commit": {"oid": "8e34635ac73d6e8303463dd69afaed88807e7507"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODU3NjA5", "url": "https://github.com/EssentialsX/Essentials/pull/3070#pullrequestreview-404857609", "createdAt": "2020-05-04T10:09:35Z", "commit": {"oid": "8e34635ac73d6e8303463dd69afaed88807e7507"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4816, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}