{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwNDQ3Mjg5", "number": 3649, "title": "Add TransactionEvent for successful transactions", "bodyText": "This adds an event for plugins to hook into when a transaction occurs, allowing them to do whatever they want.\nCloses #3635\nWas also considering making it cancellable, may do that if suggested.", "createdAt": "2020-09-05T05:12:52Z", "url": "https://github.com/EssentialsX/Essentials/pull/3649", "merged": true, "mergeCommit": {"oid": "a20d20574e8cd8493fd2fd744ac8137659aa2512"}, "closed": true, "closedAt": "2021-01-02T03:45:53Z", "author": {"login": "Chew"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFysUVgH2gAyNDgwNDQ3Mjg5OmVmZDBlMGQ1YmZkOWQyNTc3YTEzNjIyNGFjMTg4NTRmM2YyMjUxMDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdsEzbnAFqTU2MDYxODg0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "efd0e0d5bfd9d2577a136224ac18854f3f225105", "author": {"user": {"login": "Chew", "name": "Olivia"}}, "url": "https://github.com/EssentialsX/Essentials/commit/efd0e0d5bfd9d2577a136224ac18854f3f225105", "committedDate": "2020-09-05T05:10:31Z", "message": "Add TransactionEvent for successful transactions\nThis adds an event for plugins to hook into when a transaction occurs, allowing them to do whatever they want.\n\nImplements #3635"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MDg3NDE3", "url": "https://github.com/EssentialsX/Essentials/pull/3649#pullrequestreview-485087417", "createdAt": "2020-09-09T14:46:10Z", "commit": {"oid": "efd0e0d5bfd9d2577a136224ac18854f3f225105"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNDo0NjoxMFrOHPK-4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNDo0NjoxMFrOHPK-4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTY3MDYyNA==", "bodyText": "Should probably check the current thread here, in case transactions occur async.", "url": "https://github.com/EssentialsX/Essentials/pull/3649#discussion_r485670624", "createdAt": "2020-09-09T14:46:10Z", "author": {"login": "mdcfe"}, "path": "Essentials/src/net/ess3/api/events/TransactionEvent.java", "diffHunk": "@@ -0,0 +1,53 @@\n+package net.ess3.api.events;\n+\n+import com.earth2me.essentials.CommandSource;\n+import net.ess3.api.IUser;\n+import org.bukkit.event.Event;\n+import org.bukkit.event.HandlerList;\n+\n+import java.math.BigDecimal;\n+\n+public class TransactionEvent extends Event {\n+    private static final HandlerList handlers = new HandlerList();\n+\n+    private final CommandSource requester;\n+    private final IUser target;\n+    private final BigDecimal amount;\n+\n+    public TransactionEvent(CommandSource requester, IUser target, BigDecimal amount) {\n+        super();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efd0e0d5bfd9d2577a136224ac18854f3f225105"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8623afced6d069c05863b956c717ed7693d34d61", "author": {"user": {"login": "Chew", "name": "Olivia"}}, "url": "https://github.com/EssentialsX/Essentials/commit/8623afced6d069c05863b956c717ed7693d34d61", "committedDate": "2020-09-09T15:37:17Z", "message": "Check if thread is primary thread"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5Mjc3MjI4", "url": "https://github.com/EssentialsX/Essentials/pull/3649#pullrequestreview-489277228", "createdAt": "2020-09-16T05:05:42Z", "commit": {"oid": "8623afced6d069c05863b956c717ed7693d34d61"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNTowNTo0M1rOHSgRjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNTowNTo0M1rOHSgRjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTE2NTE5OQ==", "bodyText": "Don't use * imports", "url": "https://github.com/EssentialsX/Essentials/pull/3649#discussion_r489165199", "createdAt": "2020-09-16T05:05:43Z", "author": {"login": "pop4959"}, "path": "Essentials/src/com/earth2me/essentials/User.java", "diffHunk": "@@ -11,10 +11,7 @@\n import com.earth2me.essentials.utils.VersionUtil;\n import net.ess3.api.IEssentials;\n import net.ess3.api.MaxMoneyException;\n-import net.ess3.api.events.AfkStatusChangeEvent;\n-import net.ess3.api.events.JailStatusChangeEvent;\n-import net.ess3.api.events.MuteStatusChangeEvent;\n-import net.ess3.api.events.UserBalanceUpdateEvent;\n+import net.ess3.api.events.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8623afced6d069c05863b956c717ed7693d34d61"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5Mjg2NzI1", "url": "https://github.com/EssentialsX/Essentials/pull/3649#pullrequestreview-489286725", "createdAt": "2020-09-16T05:33:59Z", "commit": {"oid": "8623afced6d069c05863b956c717ed7693d34d61"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNTozNDowMFrOHSgxDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNTozNDowMFrOHSgxDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTE3MzI2MA==", "bodyText": "It's \"receiver\"", "url": "https://github.com/EssentialsX/Essentials/pull/3649#discussion_r489173260", "createdAt": "2020-09-16T05:34:00Z", "author": {"login": "l1ttleO"}, "path": "Essentials/src/com/earth2me/essentials/User.java", "diffHunk": "@@ -199,6 +196,8 @@ public void payUser(final User reciever, final BigDecimal value, UserBalanceUpda\n             reciever.setMoney(reciever.getMoney().add(value), cause);\n             sendMessage(tl(\"moneySentTo\", NumberUtil.displayCurrency(value, ess), reciever.getDisplayName()));\n             reciever.sendMessage(tl(\"moneyRecievedFrom\", NumberUtil.displayCurrency(value, ess), getDisplayName()));\n+            TransactionEvent transactionEvent = new TransactionEvent(this.getSource(), reciever, value);\n+            ess.getServer().getPluginManager().callEvent(transactionEvent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8623afced6d069c05863b956c717ed7693d34d61"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwMDUyOTk0", "url": "https://github.com/EssentialsX/Essentials/pull/3649#pullrequestreview-490052994", "createdAt": "2020-09-16T22:06:25Z", "commit": {"oid": "8623afced6d069c05863b956c717ed7693d34d61"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQyMjowNjoyNVrOHTF27Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQyMjowNjoyNVrOHTF27Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTc4MDk3Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import net.ess3.api.events.*;\n          \n          \n            \n            import net.ess3.api.events.AfkStatusChangeEvent;\n          \n          \n            \n            import net.ess3.api.events.JailStatusChangeEvent;\t\n          \n          \n            \n            import net.ess3.api.events.MuteStatusChangeEvent;\t\n          \n          \n            \n            import net.ess3.api.events.UserBalanceUpdateEvent;", "url": "https://github.com/EssentialsX/Essentials/pull/3649#discussion_r489780973", "createdAt": "2020-09-16T22:06:25Z", "author": {"login": "pop4959"}, "path": "Essentials/src/com/earth2me/essentials/User.java", "diffHunk": "@@ -11,10 +11,7 @@\n import com.earth2me.essentials.utils.VersionUtil;\n import net.ess3.api.IEssentials;\n import net.ess3.api.MaxMoneyException;\n-import net.ess3.api.events.AfkStatusChangeEvent;\n-import net.ess3.api.events.JailStatusChangeEvent;\n-import net.ess3.api.events.MuteStatusChangeEvent;\n-import net.ess3.api.events.UserBalanceUpdateEvent;\n+import net.ess3.api.events.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8623afced6d069c05863b956c717ed7693d34d61"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bb3f3acced48eb1b1bc10015028be94b0881ca3", "author": {"user": {"login": "Chew", "name": "Olivia"}}, "url": "https://github.com/EssentialsX/Essentials/commit/6bb3f3acced48eb1b1bc10015028be94b0881ca3", "committedDate": "2020-09-17T03:46:47Z", "message": "Remove wildcard import\nBeing harassed by wildcard imports? Just say no! IntellJ legally cannot use wildcard imports without your consent!"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0MDAyMjEy", "url": "https://github.com/EssentialsX/Essentials/pull/3649#pullrequestreview-494002212", "createdAt": "2020-09-23T03:22:51Z", "commit": {"oid": "6bb3f3acced48eb1b1bc10015028be94b0881ca3"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MTM4NDA3", "url": "https://github.com/EssentialsX/Essentials/pull/3649#pullrequestreview-495138407", "createdAt": "2020-09-24T00:13:23Z", "commit": {"oid": "6bb3f3acced48eb1b1bc10015028be94b0881ca3"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNjUwMDQ0", "url": "https://github.com/EssentialsX/Essentials/pull/3649#pullrequestreview-501650044", "createdAt": "2020-10-04T19:00:21Z", "commit": {"oid": "6bb3f3acced48eb1b1bc10015028be94b0881ca3"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "448661cbde2ac8248a9de3cbeedbadb56fcba731", "author": {"user": {"login": "Chew", "name": "Olivia"}}, "url": "https://github.com/EssentialsX/Essentials/commit/448661cbde2ac8248a9de3cbeedbadb56fcba731", "committedDate": "2020-11-25T22:48:38Z", "message": "Merge remote-tracking branch 'original/2.x' into feature/transactionevent"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b1523f35488bef73f875d991f2130a17bf2da094", "author": {"user": {"login": "mdcfe", "name": "MD"}}, "url": "https://github.com/EssentialsX/Essentials/commit/b1523f35488bef73f875d991f2130a17bf2da094", "committedDate": "2020-11-25T22:45:48Z", "message": "Upload GH artifacts before publish"}, "afterCommit": {"oid": "448661cbde2ac8248a9de3cbeedbadb56fcba731", "author": {"user": {"login": "Chew", "name": "Olivia"}}, "url": "https://github.com/EssentialsX/Essentials/commit/448661cbde2ac8248a9de3cbeedbadb56fcba731", "committedDate": "2020-11-25T22:48:38Z", "message": "Merge remote-tracking branch 'original/2.x' into feature/transactionevent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc371f69b4f67d99b309de67e75769ba4f00f9c9", "author": {"user": {"login": "Chew", "name": "Olivia"}}, "url": "https://github.com/EssentialsX/Essentials/commit/cc371f69b4f67d99b309de67e75769ba4f00f9c9", "committedDate": "2020-11-25T22:58:26Z", "message": "Move TransactionEvent.java to proper folder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78dc1a96b3af96ec0b0d1d0ccef409774aca4b57", "author": {"user": {"login": "Chew", "name": "Olivia"}}, "url": "https://github.com/EssentialsX/Essentials/commit/78dc1a96b3af96ec0b0d1d0ccef409774aca4b57", "committedDate": "2020-11-25T23:12:20Z", "message": "Fix some CheckStyle errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4OTEwOTA1", "url": "https://github.com/EssentialsX/Essentials/pull/3649#pullrequestreview-538910905", "createdAt": "2020-11-25T23:56:01Z", "commit": {"oid": "78dc1a96b3af96ec0b0d1d0ccef409774aca4b57"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b138510c950ffdc29dc57a2264d0484aaa4d841", "author": {"user": {"login": "Chew", "name": "Olivia"}}, "url": "https://github.com/EssentialsX/Essentials/commit/9b138510c950ffdc29dc57a2264d0484aaa4d841", "committedDate": "2021-01-02T03:34:19Z", "message": "Move TransactionEvent.java to proper folder... again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24b0a98874d8b39fafb5a3d33208c344dcabae39", "author": {"user": {"login": "Chew", "name": "Olivia"}}, "url": "https://github.com/EssentialsX/Essentials/commit/24b0a98874d8b39fafb5a3d33208c344dcabae39", "committedDate": "2021-01-02T03:39:51Z", "message": "Merge remote-tracking branch 'original/2.x' into feature/transactionevent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb961505df5897dea4fce56e40643682074311a8", "author": {"user": {"login": "Chew", "name": "Olivia"}}, "url": "https://github.com/EssentialsX/Essentials/commit/fb961505df5897dea4fce56e40643682074311a8", "committedDate": "2021-01-02T03:42:01Z", "message": "Fix TransactionEvent import in User.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNjE4ODQz", "url": "https://github.com/EssentialsX/Essentials/pull/3649#pullrequestreview-560618843", "createdAt": "2021-01-02T03:45:42Z", "commit": {"oid": "fb961505df5897dea4fce56e40643682074311a8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4610, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}