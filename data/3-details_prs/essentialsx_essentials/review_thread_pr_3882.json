{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2MTU1NTY5", "number": 3882, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMFQyMjoxOTo1OFrOFM-nrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMFQyMjoxOTo1OFrOFM-nrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ5MTUzMTk2OnYy", "diffSide": "RIGHT", "path": "Essentials/src/main/java/com/earth2me/essentials/MetaItemStack.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMFQyMjoxOTo1OFrOIQ8AdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQyMTozNjoxMVrOIRoM5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDYzMTI4NA==", "bodyText": "Why the check for power? It isn't required in the firework meta", "url": "https://github.com/EssentialsX/Essentials/pull/3882#discussion_r554631284", "createdAt": "2021-01-10T22:19:58Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/java/com/earth2me/essentials/MetaItemStack.java", "diffHunk": "@@ -226,28 +226,25 @@ public void addStringMeta(final CommandSource sender, final boolean allowUnsafe,\n             final BookMeta meta = (BookMeta) stack.getItemMeta();\n             meta.setTitle(title);\n             stack.setItemMeta(meta);\n-        } else if (split.length > 1 && split[0].equalsIgnoreCase(\"power\") && MaterialUtil.isFirework(stack.getType()) && hasMetaPermission(sender, \"firework-power\", false, true, ess)) {\n-            final int power = NumberUtil.isInt(split[1]) ? Integer.parseInt(split[1]) : 0;\n-            final FireworkMeta meta = (FireworkMeta) stack.getItemMeta();\n-            meta.setPower(power > 3 ? 4 : power);\n-            stack.setItemMeta(meta);\n         } else if (split.length > 1 && split[0].equalsIgnoreCase(\"itemflags\") && hasMetaPermission(sender, \"itemflags\", false, true, ess)) {\n             addItemFlags(string);\n         } else if (MaterialUtil.isFirework(stack.getType())) {\n-            //WARNING - Meta for fireworks will be ignored after this point.\n-            addFireworkMeta(sender, false, string, ess);\n+            if (split[0].equalsIgnoreCase(\"power\") || !parseEnchantmentStrings(sender, allowUnsafe, split, ess)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0886de6d15ba0ede5b7c4913e6f773472a8997e5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTIyMTEzNQ==", "bodyText": "Moved lines 229-233 to addFireworkMeta method, so it is required now", "url": "https://github.com/EssentialsX/Essentials/pull/3882#discussion_r555221135", "createdAt": "2021-01-11T17:33:57Z", "author": {"login": "imDaniX"}, "path": "Essentials/src/main/java/com/earth2me/essentials/MetaItemStack.java", "diffHunk": "@@ -226,28 +226,25 @@ public void addStringMeta(final CommandSource sender, final boolean allowUnsafe,\n             final BookMeta meta = (BookMeta) stack.getItemMeta();\n             meta.setTitle(title);\n             stack.setItemMeta(meta);\n-        } else if (split.length > 1 && split[0].equalsIgnoreCase(\"power\") && MaterialUtil.isFirework(stack.getType()) && hasMetaPermission(sender, \"firework-power\", false, true, ess)) {\n-            final int power = NumberUtil.isInt(split[1]) ? Integer.parseInt(split[1]) : 0;\n-            final FireworkMeta meta = (FireworkMeta) stack.getItemMeta();\n-            meta.setPower(power > 3 ? 4 : power);\n-            stack.setItemMeta(meta);\n         } else if (split.length > 1 && split[0].equalsIgnoreCase(\"itemflags\") && hasMetaPermission(sender, \"itemflags\", false, true, ess)) {\n             addItemFlags(string);\n         } else if (MaterialUtil.isFirework(stack.getType())) {\n-            //WARNING - Meta for fireworks will be ignored after this point.\n-            addFireworkMeta(sender, false, string, ess);\n+            if (split[0].equalsIgnoreCase(\"power\") || !parseEnchantmentStrings(sender, allowUnsafe, split, ess)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDYzMTI4NA=="}, "originalCommit": {"oid": "0886de6d15ba0ede5b7c4913e6f773472a8997e5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTMwMTUxOA==", "bodyText": "It shouldn't be though? We don't need the full meta to create a valid firework", "url": "https://github.com/EssentialsX/Essentials/pull/3882#discussion_r555301518", "createdAt": "2021-01-11T19:56:40Z", "author": {"login": "JRoy"}, "path": "Essentials/src/main/java/com/earth2me/essentials/MetaItemStack.java", "diffHunk": "@@ -226,28 +226,25 @@ public void addStringMeta(final CommandSource sender, final boolean allowUnsafe,\n             final BookMeta meta = (BookMeta) stack.getItemMeta();\n             meta.setTitle(title);\n             stack.setItemMeta(meta);\n-        } else if (split.length > 1 && split[0].equalsIgnoreCase(\"power\") && MaterialUtil.isFirework(stack.getType()) && hasMetaPermission(sender, \"firework-power\", false, true, ess)) {\n-            final int power = NumberUtil.isInt(split[1]) ? Integer.parseInt(split[1]) : 0;\n-            final FireworkMeta meta = (FireworkMeta) stack.getItemMeta();\n-            meta.setPower(power > 3 ? 4 : power);\n-            stack.setItemMeta(meta);\n         } else if (split.length > 1 && split[0].equalsIgnoreCase(\"itemflags\") && hasMetaPermission(sender, \"itemflags\", false, true, ess)) {\n             addItemFlags(string);\n         } else if (MaterialUtil.isFirework(stack.getType())) {\n-            //WARNING - Meta for fireworks will be ignored after this point.\n-            addFireworkMeta(sender, false, string, ess);\n+            if (split[0].equalsIgnoreCase(\"power\") || !parseEnchantmentStrings(sender, allowUnsafe, split, ess)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDYzMTI4NA=="}, "originalCommit": {"oid": "0886de6d15ba0ede5b7c4913e6f773472a8997e5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTM1NTM2Ng==", "bodyText": "This change does not affect the creation of fireworks, but rather makes it more consistent - this is the only action that belongs to fireworks meta, but isn't included in the method.\nI might be just stupid, but I really see no reason for it not to be there", "url": "https://github.com/EssentialsX/Essentials/pull/3882#discussion_r555355366", "createdAt": "2021-01-11T21:36:11Z", "author": {"login": "imDaniX"}, "path": "Essentials/src/main/java/com/earth2me/essentials/MetaItemStack.java", "diffHunk": "@@ -226,28 +226,25 @@ public void addStringMeta(final CommandSource sender, final boolean allowUnsafe,\n             final BookMeta meta = (BookMeta) stack.getItemMeta();\n             meta.setTitle(title);\n             stack.setItemMeta(meta);\n-        } else if (split.length > 1 && split[0].equalsIgnoreCase(\"power\") && MaterialUtil.isFirework(stack.getType()) && hasMetaPermission(sender, \"firework-power\", false, true, ess)) {\n-            final int power = NumberUtil.isInt(split[1]) ? Integer.parseInt(split[1]) : 0;\n-            final FireworkMeta meta = (FireworkMeta) stack.getItemMeta();\n-            meta.setPower(power > 3 ? 4 : power);\n-            stack.setItemMeta(meta);\n         } else if (split.length > 1 && split[0].equalsIgnoreCase(\"itemflags\") && hasMetaPermission(sender, \"itemflags\", false, true, ess)) {\n             addItemFlags(string);\n         } else if (MaterialUtil.isFirework(stack.getType())) {\n-            //WARNING - Meta for fireworks will be ignored after this point.\n-            addFireworkMeta(sender, false, string, ess);\n+            if (split[0].equalsIgnoreCase(\"power\") || !parseEnchantmentStrings(sender, allowUnsafe, split, ess)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDYzMTI4NA=="}, "originalCommit": {"oid": "0886de6d15ba0ede5b7c4913e6f773472a8997e5"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4559, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}